DEVICE:53
;MODULE:RB_Teach
;MODULE_TYPE:0
LD R50006                ; MANUAL
MC
;ﾃｨｰﾁﾝｸﾞ画面
LD MR101                 ; TP[0015]: TEACH画面
MPS
OUT MR7600               ; 手動操作_初期化
MPP
ANP MR7600               ; 手動操作_初期化
RES MR7701               ; 0.01移動量
CON
RES MR7702               ; 0.1移動量
CON
SET MR7703               ; 1.0移動量
CON
RES MR7700               ; 高速JOG
CON
SET MR7615               ; 低速JOG
LD= DM3000 #120          ; 表示中画面No.
MPS
ANP MR7610               ; 低速JOG
RES MR7700               ; 高速JOG
CON
SET MR7615               ; 低速JOG
MRD
ANP MR7611               ; 高速JOG
SET MR7700               ; 高速JOG
CON
RES MR7615               ; 低速JOG
MRD
LDP MR7612               ; 0.01移動
ORP MR7613               ; 0.1移動量
ORP MR7614               ; 1.0移動量
ANL
RES MR7700               ; 高速JOG
CON
SET MR7615               ; 低速JOG
MRD
ANP MR7612               ; 0.01移動
SET MR7701               ; 0.01移動量
CON
RES MR7702               ; 0.1移動量
CON
RES MR7703               ; 1.0移動量
CON
UWRIT.L #2 #14170 +1 #1
UWRIT.L #2 #14220 +1 #1
MRD
ANP MR7613               ; 0.1移動量
RES MR7701               ; 0.01移動量
CON
SET MR7702               ; 0.1移動量
CON
RES MR7703               ; 1.0移動量
CON
UWRIT.L #2 #14170 +10 #1
UWRIT.L #2 #14220 +10 #1
MPP
ANP MR7614               ; 1.0移動量
RES MR7701               ; 0.01移動量
CON
RES MR7702               ; 0.1移動量
CON
SET MR7703               ; 1.0移動量
CON
UWRIT.L #2 #14170 +100 #1
UWRIT.L #2 #14220 +100 #1
LD CR2002                ; 常時ON
UWRIT.L #2 #14166 +50 #1
UWRIT.L #2 #14168 +2000 #1
UWRIT.L #2 #14216 +50 #1
UWRIT.L #2 #14218 +2000 #1
;JOG動作　ｿﾌﾄﾘﾐｯﾄの範囲内ならば動作する。
LD MR7700                ; 高速JOG
OR MR7615                ; 低速JOG
OUT MR7901               ; JOG動作選択
LD MR101                 ; TP[0015]: TEACH画面
LD MR7708                ; 軸1JOG+
AND>=.L DM20290 DM20812  ; 軸1 現在座標  軸１ｿﾌﾄﾘﾐｯﾄ＋
LD MR7709                ; 軸1JOG-
AND<=.L DM20290 DM20814  ; 軸1 現在座標  軸１ｿﾌﾄﾘﾐｯﾄ-
ORL
LD MR7710                ; 軸2JOG+
AND>=.L DM20350 DM20816  ; 軸2 現在座標  軸２ｿﾌﾄﾘﾐｯﾄ＋
ORL
LD MR7711                ; 軸2JOG-
AND<=.L DM20350 DM20818  ; 軸2 現在座標  軸２ｿﾌﾄﾘﾐｯﾄ-
ORL
ANL
SET MR7607               ; ｿﾌﾄﾘﾐｯﾄ警告表示
LD MR101                 ; TP[0015]: TEACH画面
AND R34513               ; 軸1 ｻｰﾎﾞﾚﾃﾞｨ
AND R32800               ; 動作可能
MPS
LD MR7708                ; 軸1JOG+
ANB R50300               ; Pause
ANB R34101               ; 軸1 JOG負方向
AND<.L DM20290 DM20812   ; 軸1 現在座標  軸１ｿﾌﾄﾘﾐｯﾄ＋
ANL
OUT R34100               ; 軸1 JOG正方向
MRD
LD MR7709                ; 軸1JOG-
ANB R50300               ; Pause
ANB R34100               ; 軸1 JOG正方向
AND>.L DM20290 DM20814   ; 軸1 現在座標  軸１ｿﾌﾄﾘﾐｯﾄ-
ANL
OUT R34101               ; 軸1 JOG負方向
MPP
AND MR7700               ; 高速JOG
OUT R34102               ; 軸1 高速JOG
LD MR101                 ; TP[0015]: TEACH画面
AND R35313               ; 軸2 ｻｰﾎﾞﾚﾃﾞｨ
AND R32800               ; 動作可能
MPS
LD MR7710                ; 軸2JOG+
ANB R50300               ; Pause
ANB R34901               ; 軸2 JOG負方向
AND<.L DM20350 DM20816   ; 軸2 現在座標  軸２ｿﾌﾄﾘﾐｯﾄ＋
ANL
OUT R34900               ; 軸2 JOG正方向
MRD
LD MR7711                ; 軸2JOG-
ANB R50300               ; Pause
ANB R34900               ; 軸2 JOG正方向
AND>.L DM20350 DM20818   ; 軸2 現在座標  軸２ｿﾌﾄﾘﾐｯﾄ-
ANL
OUT R34901               ; 軸2 JOG負方向
MPP
AND MR7700               ; 高速JOG
OUT R34902               ; 軸2 高速JOG
;画面にティーチングデータ読出
LDP MR7600               ; 手動操作_初期化
ORP MR7804               ; 呼出SW
MPS
AND LR500                ; 機種1選択
BMOV EM1120 EM920 #80    ; 機種1_開始位置(左)P1_X  編集_開始位置(左)P1_X
MRD
AND LR501                ; 機種2選択
BMOV EM1220 EM920 #80    ; 機種2_開始位置(左)P1_X  編集_開始位置(左)P1_X
MRD
AND LR502                ; 機種3選択
BMOV EM1320 EM920 #80    ; 機種3_開始位置(左)P1_X  編集_開始位置(左)P1_X
MRD
AND LR503                ; 機種4選択
BMOV EM1420 EM920 #80    ; 機種4_開始位置(左)P1_X  編集_開始位置(左)P1_X
MPP
AND LR504                ; 機種5選択
BMOV EM1520 EM920 #80    ; 機種5_開始位置(左)P1_X  編集_開始位置(左)P1_X
;ﾃｨｰﾁ画面でTEACHｽｲｯﾁが押されると確認の画面が表示される。
;確認画面でTEACHｽｲｯﾁが押されると、選択されたﾚｼﾋﾟ番号の領域に書き込まれる。
LDP MR7802               ; 確認SW
RES MR7608               ; TEACH SW
CON
MPS
AND= DM501 #1            ; 登録機種No.
BMOV EM920 EM1120 #80    ; 編集_開始位置(左)P1_X  機種1_開始位置(左)P1_X
MRD
AND= DM501 #2            ; 登録機種No.
BMOV EM920 EM1220 #80    ; 編集_開始位置(左)P1_X  機種2_開始位置(左)P1_X
MRD
AND= DM501 #3            ; 登録機種No.
BMOV EM920 EM1320 #80    ; 編集_開始位置(左)P1_X  機種3_開始位置(左)P1_X
MRD
AND= DM501 #4            ; 登録機種No.
BMOV EM920 EM1420 #80    ; 編集_開始位置(左)P1_X  機種4_開始位置(左)P1_X
MPP
AND= DM501 #5            ; 登録機種No.
BMOV EM920 EM1520 #80    ; 編集_開始位置(左)P1_X  機種5_開始位置(左)P1_X
MCR
LD CR2002                ; 常時ON
MPS
LD= DM501 #0             ; 登録機種No.
ORP MR7810               ; ﾃｨｰﾁﾝｸﾞ  機種1選択
ORP LR500                ; 機種1選択
ANL
MOV #1 DM501             ; 登録機種No.
MRD
LDP MR7811               ; ﾃｨｰﾁﾝｸﾞ  機種2選択
ORP LR501                ; 機種2選択
ANL
MOV #2 DM501             ; 登録機種No.
MRD
LDP MR7812               ; ﾃｨｰﾁﾝｸﾞ  機種3選択
ORP LR502                ; 機種3選択
ANL
MOV #3 DM501             ; 登録機種No.
MRD
LDP MR7813               ; ﾃｨｰﾁﾝｸﾞ  機種4選択
ORP LR503                ; 機種4選択
ANL
MOV #4 DM501             ; 登録機種No.
MPP
LDP MR7814               ; ﾃｨｰﾁﾝｸﾞ  機種5選択
ORP LR504                ; 機種5選択
ANL
MOV #5 DM501             ; 登録機種No.
LD CR2002                ; 常時ON
MPS
AND= DM501 #1            ; 登録機種No.
OUT MR7910               ; ﾃｨｰﾁﾝｸﾞ  機種1選択 表示
MRD
AND= DM501 #2            ; 登録機種No.
OUT MR7911               ; ﾃｨｰﾁﾝｸﾞ  機種2選択 表示
MRD
AND= DM501 #3            ; 登録機種No.
OUT MR7912               ; ﾃｨｰﾁﾝｸﾞ  機種3選択 表示
MRD
AND= DM501 #4            ; 登録機種No.
OUT MR7913               ; ﾃｨｰﾁﾝｸﾞ  機種4選択 表示
MPP
AND= DM501 #5            ; 登録機種No.
OUT MR7914               ; ﾃｨｰﾁﾝｸﾞ  機種5選択 表示
END
ENDH
