DEVICE:53
;MODULE:MC_Control
;MODULE_TYPE:0
;SCRIPT_TYPE:
;<h1/>MC20 動作許可
;[内容]
;・非常停止、優先ｴﾗｰ発生時に初期化したいﾃﾞﾊﾞｲｽを指定して下さい
;※本Taskで使用するﾛｰｶﾙﾃﾞﾊﾞｲｽなど
;※STG〜JMPにて使用しているﾃﾞﾊﾞｲｽは必須
LD CR2002                ; 常時ON
FLIK #30 #30 @MR000
LD R46104                ; _非常停止中　ﾓｰﾄﾞﾌﾗｸﾞ
ZRES @MR100 @MR115
LD CR2002                ; 常時ON
TMR @0 #50
CON
AND @T0
OUT @MR514               ; MC立上りｳｪｲﾄﾀｲﾏ
;MC 立上げ時ﾁｪｯｸ
LDB R46104               ; _非常停止中　ﾓｰﾄﾞﾌﾗｸﾞ
OUT R21600               ; 動作許可
LD R22800                ; 動作可能
OUT MR24800              ; MC20 動作可能
LD R22801                ; 動作許可ｴﾗｰ
OUT MR24801              ; MC20 動作不可_ｴﾗｰ発生
LD R20802                ; 軸1 位置決め完了
OUT MR21111              ; MC 軸1位置決め完了
LD R24705                ; 軸1 ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
OR R24400                ; 軸1 軸ｴﾗｰ中
ANB @MR008               ; MCｱﾗｰﾑ発生
OUT MR21115              ; MC 軸1ｴﾗｰ検出
LD R20810                ; 軸2 位置決め完了
OUT MR21311              ; MC 軸2位置決め完了
LD R25505                ; 軸2 ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
OR R25200                ; 軸2 軸ｴﾗｰ中
ANB @MR008               ; MCｱﾗｰﾑ発生
OUT MR21315              ; MC 軸2ｴﾗｰ検出
LD @MR514                ; MC立上りｳｪｲﾄﾀｲﾏ
ANB @MR008               ; MCｱﾗｰﾑ発生
AND MR24801              ; MC20 動作不可_ｴﾗｰ発生
ANB R39004               ; ｴﾗｰ中
SET @MR008               ; MCｱﾗｰﾑ発生
CON
SET R39004               ; ｴﾗｰ中
CON
DW #3 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_Axis6 ｱﾗｰﾑ発生
CON
LDA DM21500              ; ﾕﾆｯﾄｴﾗｰｺｰﾄﾞ
CON
STA DM20030              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET @R000
STG @R000
AND @R101
RES @R101
CON
DW #0 DM60009
CON
AND @R105                ; SW1
DW #0 DM20030            ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET MR18100              ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @R001
STG @R001
TMR #1945 #5
CON
AND T1945
RES @MR008               ; MCｱﾗｰﾑ発生
CON
RES @R100                ; MSEP_Axis6 ｱﾗｰﾑ発生
CON
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
RES R39004               ; ｴﾗｰ中
CON
ENDS
;
LD @MR514                ; MC立上りｳｪｲﾄﾀｲﾏ
ANP MR21115              ; MC 軸1ｴﾗｰ検出
ANB R39004               ; ｴﾗｰ中
SET @MR008               ; MCｱﾗｰﾑ発生
CON
SET R39004               ; ｴﾗｰ中
CON
DW #4 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_Axis6 ｱﾗｰﾑ発生
CON
LDA DM21500              ; ﾕﾆｯﾄｴﾗｰｺｰﾄﾞ
CON
STA DM20030              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET @R003
STG @R003
AND @R101
RES @R101
CON
DW #0 DM60009
CON
AND @R105                ; SW1
DW #0 DM20030            ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET R24000               ; 軸1 軸ｴﾗｰｸﾘｱ
CON
SET MR18100              ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @R004
STG @R004
TMR #1946 #5
CON
AND T1946
RES R24000               ; 軸1 軸ｴﾗｰｸﾘｱ
CON
RES @R100                ; MSEP_Axis6 ｱﾗｰﾑ発生
CON
RES R39004               ; ｴﾗｰ中
CON
SET @MR500
CON
JMP @R005
STG @R005
MPS
AND R24513               ; 軸1 ｻｰﾎﾞﾚﾃﾞｨ
RES @MR008               ; MCｱﾗｰﾑ発生
CON
ENDS
MPP
ANB R24513               ; 軸1 ｻｰﾎﾞﾚﾃﾞｨ
TMR #1947 #30
CON
AND T1947
JMP @R006
STG @R006
ANB R39004               ; ｴﾗｰ中
SET @MR008               ; MCｱﾗｰﾑ発生
CON
SET R39004               ; ｴﾗｰ中
CON
DW #4 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_Axis6 ｱﾗｰﾑ発生
CON
LDA DM21500              ; ﾕﾆｯﾄｴﾗｰｺｰﾄﾞ
CON
STA DM20030              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
JMP @R003
LD @MR514                ; MC立上りｳｪｲﾄﾀｲﾏ
ANP MR21315              ; MC 軸2ｴﾗｰ検出
ANB R39004               ; ｴﾗｰ中
SET @MR008               ; MCｱﾗｰﾑ発生
CON
SET R39004               ; ｴﾗｰ中
CON
DW #5 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_Axis6 ｱﾗｰﾑ発生
CON
LDA DM21500              ; ﾕﾆｯﾄｴﾗｰｺｰﾄﾞ
CON
STA DM20030              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET @R007
STG @R007
AND @R101
RES @R101
CON
DW #0 DM60009
CON
AND @R105                ; SW1
DW #0 DM20030            ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET R24800               ; 軸2 軸ｴﾗｰｸﾘｱ
CON
SET MR18100              ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @R008
STG @R008
TMR #1948 #5
CON
AND T1948
RES R24800               ; 軸2 軸ｴﾗｰｸﾘｱ
CON
RES @R100                ; MSEP_Axis6 ｱﾗｰﾑ発生
CON
RES R39004               ; ｴﾗｰ中
CON
SET @MR500
CON
JMP @R009
STG @R009
MPS
AND R24513               ; 軸1 ｻｰﾎﾞﾚﾃﾞｨ
RES @MR008               ; MCｱﾗｰﾑ発生
CON
ENDS
MPP
ANB R24513               ; 軸1 ｻｰﾎﾞﾚﾃﾞｨ
TMR #1949 #30
CON
AND T1949
JMP @R010
STG @R010
ANB R39004               ; ｴﾗｰ中
SET @MR008               ; MCｱﾗｰﾑ発生
CON
SET R39004               ; ｴﾗｰ中
CON
DW #5 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_Axis6 ｱﾗｰﾑ発生
CON
LDA DM21500              ; ﾕﾆｯﾄｴﾗｰｺｰﾄﾞ
CON
STA DM20030              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
JMP @R007
;<h1/>MC20 1軸目 転写RB(RB7) 設定
LD CR2008                ; 運転開始時1ｽｷｬﾝON
ORP MR20508              ; MC_軸1 ｱﾗｰﾑﾘｾｯﾄ SW
SET @MR500
LD @MR500
ANB R46104               ; _非常停止中　ﾓｰﾄﾞﾌﾗｸﾞ
AND @MR514               ; MC立上りｳｪｲﾄﾀｲﾏ
AND MR24800              ; MC20 動作可能
AND MR6004               ; RBC2 RB7 停止
ANB @MR515
@SET MR6101              ; SCON-1 CSTP
CON
RES @MR500
CON
SET @MR501
STG @MR501
TMR @1 #50
CON
AND @T1
SET R24305               ; 軸1 ﾄﾞﾗｲﾊﾞｱﾗｰﾑﾘｾｯﾄ
CON
JMP @MR502
STG @MR502
ANB R24705               ; 軸1 ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
RES R24305               ; 軸1 ﾄﾞﾗｲﾊﾞｱﾗｰﾑﾘｾｯﾄ
CON
SET R24000               ; 軸1 軸ｴﾗｰｸﾘｱ
CON
JMP @MR503
STG @MR503
ANB R24400               ; 軸1 軸ｴﾗｰ中
RES R24000               ; 軸1 軸ｴﾗｰｸﾘｱ
CON
JMP @MR504
STG @MR504
TMR @2 #55
CON
AND @T2
SET R24113               ; 軸1 ｻｰﾎﾞON
CON
JMP @MR505
STG @MR505
AND R24513               ; 軸1 ｻｰﾎﾞﾚﾃﾞｨ
SET @MR515
CON
ENDS
LDF R24513               ; 軸1 ｻｰﾎﾞﾚﾃﾞｨ
RES @MR515
LDP MR20500              ; MC_軸1 ｻｰﾎﾞON SW
ANB MR21110              ; MC 軸1BUSY
ALT R24113               ; 軸1 ｻｰﾎﾞON
LD R24113                ; 軸1 ｻｰﾎﾞON
OUT MR20501              ; MC_軸1 ｻｰﾎﾞON LP
;<h1/>MC20 1軸目 転写RB(RB7)動作 Busy
LDB MR21111              ; MC 軸1位置決め完了
OUT MR21110              ; MC 軸1BUSY
;<h1/>MC20 1軸目 転写RB(RB7) 現在値読み出し
LD CR2002                ; 常時ON
U_RDFPOS.L #3 #1 EM2600  ; MC 軸1 現在位置
;<h1/>MC20 2軸目 主軸ﾛｰﾗ設定
LD CR2008                ; 運転開始時1ｽｷｬﾝON
ORP MR20811              ; MC_軸2 ｱﾗｰﾑﾘｾｯﾄ SW
SET @MR600
LD @MR600
ANB R46104               ; _非常停止中　ﾓｰﾄﾞﾌﾗｸﾞ
AND @MR514               ; MC立上りｳｪｲﾄﾀｲﾏ
AND MR24800              ; MC20 動作可能
AND MR6004               ; RBC2 RB7 停止
ANB @MR615
RES @MR600
CON
SET @MR601
STG @MR601
TMR @4 #50
CON
AND @T4
SET R25105               ; 軸2 ﾄﾞﾗｲﾊﾞｱﾗｰﾑﾘｾｯﾄ
CON
JMP @MR602
STG @MR602
ANB R25505               ; 軸2 ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
RES R25105               ; 軸2 ﾄﾞﾗｲﾊﾞｱﾗｰﾑﾘｾｯﾄ
CON
SET R24800               ; 軸2 軸ｴﾗｰｸﾘｱ
CON
JMP @MR603
STG @MR603
ANB R25200               ; 軸2 軸ｴﾗｰ中
RES R24800               ; 軸2 軸ｴﾗｰｸﾘｱ
CON
JMP @MR604
STG @MR604
TMR @5 #55
CON
AND @T5
SET R24913               ; 軸2 ｻｰﾎﾞON
CON
JMP @MR605
STG @MR605
AND R25313               ; 軸2 ｻｰﾎﾞﾚﾃﾞｨ
SET @MR615
CON
ENDS
LDF R25313               ; 軸2 ｻｰﾎﾞﾚﾃﾞｨ
RES @MR615
LDP MR20803              ; MC_軸2 ｻｰﾎﾞON SW
ANB MR21310              ; MC 軸2BUSY
ALT R24913               ; 軸2 ｻｰﾎﾞON
LD R24913                ; 軸2 ｻｰﾎﾞON
OUT MR20804              ; MC_軸2 ｻｰﾎﾞON LP
LDF R25313               ; 軸2 ｻｰﾎﾞﾚﾃﾞｨ
RES @MR615
;<h1/>MC20 2軸目 主軸ﾛｰﾗ動作　Busy
LDB MR21311              ; MC 軸2位置決め完了
AND CR2003               ; 常時OFF
OUT MR21310              ; MC 軸2BUSY
;<h1/>MC20 2軸目 主軸ﾛｰﾗ 現在値読み出し
LD CR2002                ; 常時ON
U_RDFPOS.L #3 #2 EM2610  ; MC 軸2 現在位置
;<h1/>MC20 1軸目 転写RB(RB7) 原点復帰
LDB R7406                ; ｽｷｰｼﾞ部 ｽｸﾚｰﾊﾟｰ（小） 下限
AND R7407                ; ｽｷｰｼﾞ部 ｽｸﾚｰﾊﾟｰ（小） 上限
ANB R7408                ; ｽｷｰｼﾞ部 ｽｸﾚｰﾊﾟｰ（大） 下限
AND R7409                ; ｽｷｰｼﾞ部 ｽｸﾚｰﾊﾟｰ（大） 上限
AND<=.L DM11042 +3000    ; RB1 現在位置1
ANB R7600                ; 接着剤塗布部 ﾕﾆｯﾄ 下限
AND R7601                ; 接着剤塗布部 ﾕﾆｯﾄ 上限
ANB R8106                ; 接着剤塗布ﾍｯﾄﾞ(子)前進限
AND R8107                ; 接着剤塗布ﾍｯﾄﾞ(子)後退限
ANB R7602                ; 接着剤塗布部 ﾍｯﾄﾞ 前限
AND R7603                ; 接着剤塗布部 ﾍｯﾄﾞ 後限
AND<=.L DM11062 +1000    ; RB2 現在位置1
ANB R7400                ; ｽｷｰｼﾞ台部 ｽｷｰｼﾞ台 上限
AND R7401                ; ｽｷｰｼﾞ台部 ｽｷｰｼﾞ台 下限
LD R7014                 ; ｽｸﾚｰﾊﾟｰ清掃ｻﾌﾞｶﾊﾞｰ開閉状態(ON閉)
LD R8112                 ; ｽｸﾚｰﾊﾟｰ部水平ｼｬｯﾀｰ 閉限
ANB R8113                ; ｽｸﾚｰﾊﾟｰ部水平ｼｬｯﾀｰ 開限
ORL
ANL
LD R7015                 ; ｼﾘﾝｼﾞ交換ｻﾌﾞｶﾊﾞｰ開閉状態(ON閉)
LD R8114                 ; ｼﾘﾝｼﾞ部ｼｬｯﾀｰ上下 下降限
ANB R8115                ; ｼﾘﾝｼﾞ部ｼｬｯﾀｰ上下 上昇限
ORL
ANL
OUT @MR715               ; 軸1復帰ok
LD CR2002                ; 常時ON
AND MR20509              ; 転写RB 原点復帰SW
ANB @MR701               ; 軸1復帰中
AND @MR715               ; 軸1復帰ok
SET @MR701               ; 軸1復帰中
CON
SET MR20510              ; 転写RB 原点復帰LP
CON
SET @MR700
STG @MR700
RES MR21109              ; MC 軸1原点復帰完了記憶
CON
RES MR11201              ; 主軸ﾛｰﾗｸﾗﾝﾌﾟ 下降
CON
SET MR11200              ; 主軸ﾛｰﾗｸﾗﾝﾌﾟ 上昇
CON
MPS
LDB MR7606               ; 主軸ﾛｰﾗｸﾗﾝﾌﾟ 上昇ｴﾗｰ
ANB R7607                ; 転写部  主軸ﾛｰﾗｸﾗﾝﾌﾟ 下限
AND R7606                ; 転写部  主軸ﾛｰﾗｸﾗﾝﾌﾟ 上限
ANL
TMR #814 #5              ; ｳｪｲﾄﾀｲﾏ
CON
AND T814                 ; ｳｪｲﾄﾀｲﾏ
JMP @MR703
MPP
LD MR7606                ; 主軸ﾛｰﾗｸﾗﾝﾌﾟ 上昇ｴﾗｰ
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANL
SET MR1900               ; 毎ｽｷｬﾝMD_Main1 HALT許可
STG @MR703
MPS
SET MR20109              ; MC 軸1原点復帰動作中
CON
MCALL MC_ORIGIN_OP #3 #1 MR6100 R5400 MR20511;SCON-1 HOME  SCON HEND  転写RB 原点復帰完了
MPP
AND MR20511              ; 転写RB 原点復帰完了
JMP @MR704
STG @MR704
RES MR6100               ; SCON-1 HOME
CON
AND R5400                ; SCON HEND
JMP @MR705
STG @MR705
RES MR20511              ; 転写RB 原点復帰完了
CON
ANB MR20511              ; 転写RB 原点復帰完了
RES MR20109              ; MC 軸1原点復帰動作中
CON
TMR #813 #5
CON
AND T813
JMP @MR706
STG @MR706
RES MR11200              ; 主軸ﾛｰﾗｸﾗﾝﾌﾟ 上昇
CON
SET MR11201              ; 主軸ﾛｰﾗｸﾗﾝﾌﾟ 下降
CON
MPS
LDB MR7607               ; 転写部  主軸ﾛｰﾗｸﾗﾝﾌﾟ 下限ｴﾗｰ
ANB R7606                ; 転写部  主軸ﾛｰﾗｸﾗﾝﾌﾟ 上限
AND R7607                ; 転写部  主軸ﾛｰﾗｸﾗﾝﾌﾟ 下限
ANL
JMP @MR707
MPP
LD MR7607                ; 転写部  主軸ﾛｰﾗｸﾗﾝﾌﾟ 下限ｴﾗｰ
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANL
SET MR1900               ; 毎ｽｷｬﾝMD_Main1 HALT許可
STG @MR707
SET MR21109              ; MC 軸1原点復帰完了記憶
CON
RES @MR701               ; 軸1復帰中
CON
RES MR20510              ; 転写RB 原点復帰LP
CON
ENDS
;<h1/>MC20 1軸目 転写RB(RB7) 動作
LD CR2002                ; 常時ON
AND R22800               ; 動作可能
AND R24513               ; 軸1 ｻｰﾎﾞﾚﾃﾞｨ
AND MR21109              ; MC 軸1原点復帰完了記憶
OUT @MR1000
LDB R24100               ; 軸1 JOG正方向
ANB R24101               ; 軸1 JOG負方向
ANB MR6100               ; SCON-1 HOME
ANB MR21610              ; MC 軸1動作中
INV
OUT MR20110              ; MC1 BUSY
LD @MR1000
MPS
LD= DM3000 #1906         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1915         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
MPS
LD MR20504               ; MC_軸1 JOG+ SW
ANB MR20506              ; MC_軸1 JOG- SW
ANL
OUT MR20505              ; MC_軸1 JOG+ LP
CON
OUT R24100               ; 軸1 JOG正方向
MPP
LDB MR20504              ; MC_軸1 JOG+ SW
AND MR20506              ; MC_軸1 JOG- SW
ANL
OUT MR20507              ; MC_軸1 JOG- LP
CON
OUT R24101               ; 軸1 JOG負方向
MPP
AND MR20502              ; MC_軸1 JOG高速 SW
OUT MR20503              ; MC_軸1 JOG高速 LP
CON
OUT R24102               ; 軸1 高速JOG
LDP R24102               ; 軸1 高速JOG
UWRIT.L #3 #14168 EM2404 #1;MC 軸1 JOG速度Hi
LDF R24102               ; 軸1 高速JOG
LD= DM3000 #1906         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1915         ; _MainTP　表示中ﾍﾟｰｼﾞNo
MEP
ORL
UWRIT.L #3 #14168 EM2402 #1;MC 軸1 JOG速度Lo
RES MR20502              ; MC_軸1 JOG高速 SW
;<h1/>MC20 1軸目 転写RB(RB7) ﾃﾞｰﾀｾｯﾄ
LD CR2002                ; 常時ON
AND MR21109              ; MC 軸1原点復帰完了記憶
MPS
ANP MR5700               ; 転写ﾍｯﾄﾞ P1 選択　
DW #1 DM11168            ; CON-1 目標ﾎﾟｲﾝﾄNo.
CON
ZRES MR14900 MR14906     ; NR_接着剤転写_P1  NR_接着剤転写_P7
CON
SET MR14900              ; NR_接着剤転写_P1
MRD
ANP MR5701               ; 転写ﾍｯﾄﾞ P2 選択　
DW #2 DM11168            ; CON-1 目標ﾎﾟｲﾝﾄNo.
CON
ZRES MR14900 MR14906     ; NR_接着剤転写_P1  NR_接着剤転写_P7
CON
SET MR14901              ; NR_接着剤転写_P2
MRD
ANP MR5702               ; 転写ﾍｯﾄﾞ P3 選択　
DW #3 DM11168            ; CON-1 目標ﾎﾟｲﾝﾄNo.
CON
ZRES MR14900 MR14906     ; NR_接着剤転写_P1  NR_接着剤転写_P7
CON
SET MR14902              ; NR_接着剤転写_P3
MRD
ANP MR5703               ; 転写ﾍｯﾄﾞ P4 選択　
DW #4 DM11168            ; CON-1 目標ﾎﾟｲﾝﾄNo.
CON
ZRES MR14900 MR14906     ; NR_接着剤転写_P1  NR_接着剤転写_P7
CON
SET MR14903              ; NR_接着剤転写_P4
MRD
ANP MR5704               ; 転写ﾍｯﾄﾞ P5 選択　
DW #5 DM11168            ; CON-1 目標ﾎﾟｲﾝﾄNo.
CON
ZRES MR14900 MR14906     ; NR_接着剤転写_P1  NR_接着剤転写_P7
CON
SET MR14904              ; NR_接着剤転写_P5
MRD
ANP MR5705               ; 転写ﾍｯﾄﾞ P6 選択　
DW #5 DM11168            ; CON-1 目標ﾎﾟｲﾝﾄNo.
CON
ZRES MR14900 MR14906     ; NR_接着剤転写_P1  NR_接着剤転写_P7
CON
SET MR14905              ; NR_接着剤転写_P6
MPP
ANP MR5706               ; 転写ﾍｯﾄﾞ P7 選択　
DW #5 DM11168            ; CON-1 目標ﾎﾟｲﾝﾄNo.
CON
ZRES MR14900 MR14906     ; NR_接着剤転写_P1  NR_接着剤転写_P7
CON
SET MR14906              ; NR_接着剤転写_P7
LD= DM3000 #1906         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1915         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR21109               ; MC 軸1原点復帰完了記憶
OR CR2002                ; 常時ON
ANL
MPS
ANP MR5700               ; 転写ﾍｯﾄﾞ P1 選択　
MOV.L EM3002 EM1940      ; MC 軸1 Point1 移動量  RB7 目標位置（下位bit）表示用
MOV.L EM3000 EM1944      ; MC 軸1 Point1 速度  RB7 指令速度表示用
MRD
ANP MR5701               ; 転写ﾍｯﾄﾞ P2 選択　
MOV.L EM3012 EM1940      ; MC 軸1 Point2 移動量  RB7 目標位置（下位bit）表示用
MOV.L EM3010 EM1944      ; MC 軸1 Point2 速度  RB7 指令速度表示用
MRD
ANP MR5702               ; 転写ﾍｯﾄﾞ P3 選択　
MOV.L EM3022 EM1940      ; MC 軸1 Point3 移動量  RB7 目標位置（下位bit）表示用
MOV.L EM3020 EM1944      ; MC 軸1 Point3 速度  RB7 指令速度表示用
MRD
ANP MR5703               ; 転写ﾍｯﾄﾞ P4 選択　
MOV.L EM3032 EM1940      ; MC 軸1 Point4 移動量  RB7 目標位置（下位bit）表示用
MOV.L EM3030 EM1944      ; MC 軸1 Point4 速度  RB7 指令速度表示用
MRD
ANP MR5704               ; 転写ﾍｯﾄﾞ P5 選択　
MOV.L EM3042 EM1940      ; MC 軸1 Point5 移動量  RB7 目標位置（下位bit）表示用
MOV.L EM3040 EM1944      ; MC 軸1 Point5 速度  RB7 指令速度表示用
MRD
ANP MR5705               ; 転写ﾍｯﾄﾞ P6 選択　
MOV.L EM3052 EM1940      ; MC 軸1 Point6 移動量  RB7 目標位置（下位bit）表示用
MOV.L EM3050 EM1944      ; MC 軸1 Point6 速度  RB7 指令速度表示用
MPP
ANP MR5706               ; 転写ﾍｯﾄﾞ P7 選択　
MOV.L EM3062 EM1940      ; MC 軸1 Point7 移動量  RB7 目標位置（下位bit）表示用
MOV.L EM3060 EM1944      ; MC 軸1 Point7 速度  RB7 指令速度表示用
LD= DM3000 #1915         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1906         ; _MainTP　表示中ﾍﾟｰｼﾞNo
MEF
ORP @MR514               ; MC立上りｳｪｲﾄﾀｲﾏ
ORF MR4914               ; 確定SW
ORF MR4915               ; 現在地書込SW
UWRIT.L #3 #18016 EM3002 #1;MC 軸1 Point1 移動量
UWRIT.L #3 #18528 EM3012 #1;MC 軸1 Point2 移動量
UWRIT.L #3 #19040 EM3022 #1;MC 軸1 Point3 移動量
UWRIT.L #3 #19552 EM3032 #1;MC 軸1 Point4 移動量
UWRIT.L #3 #20064 EM3042 #1;MC 軸1 Point5 移動量
UWRIT.L #3 #20576 EM3052 #1;MC 軸1 Point6 移動量
UWRIT.L #3 #21088 EM3062 #1;MC 軸1 Point7 移動量
UWRIT.L #3 #22624 EM3002 #1;MC 軸1 Point1 移動量
UWRIT.L #3 #23648 EM3042 #1;MC 軸1 Point5 移動量
UWRIT.L #3 #18028 EM3000 #1;MC 軸1 Point1 速度
UWRIT.L #3 #18540 EM3010 #1;MC 軸1 Point2 速度
UWRIT.L #3 #19052 EM3020 #1;MC 軸1 Point3 速度
UWRIT.L #3 #19564 EM3030 #1;MC 軸1 Point4 速度
UWRIT.L #3 #20076 EM3040 #1;MC 軸1 Point5 速度
UWRIT.L #3 #20588 EM3050 #1;MC 軸1 Point6 速度
UWRIT.L #3 #21100 EM3060 #1;MC 軸1 Point7 速度
UWRIT.L #3 #22636 EM3000 #1;MC 軸1 Point1 速度
UWRIT.L #3 #23660 EM3040 #1;MC 軸1 Point5 速度
LD MR14900               ; NR_接着剤転写_P1
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM21790 EM3002     ; 軸1 現在座標  MC 軸1 Point1 移動量
MOV.L EM1944 EM3000      ; RB7 指令速度表示用  MC 軸1 Point1 速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1940 EM3002      ; RB7 目標位置（下位bit）表示用  MC 軸1 Point1 移動量
MOV.L EM1944 EM3000      ; RB7 指令速度表示用  MC 軸1 Point1 速度
LD MR14901               ; NR_接着剤転写_P2
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM21790 EM3012     ; 軸1 現在座標  MC 軸1 Point2 移動量
MOV.L EM1944 EM3010      ; RB7 指令速度表示用  MC 軸1 Point2 速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1940 EM3012      ; RB7 目標位置（下位bit）表示用  MC 軸1 Point2 移動量
MOV.L EM1944 EM3010      ; RB7 指令速度表示用  MC 軸1 Point2 速度
LD MR14902               ; NR_接着剤転写_P3
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM21790 EM3022     ; 軸1 現在座標  MC 軸1 Point3 移動量
MOV.L EM1944 EM3020      ; RB7 指令速度表示用  MC 軸1 Point3 速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1940 EM3022      ; RB7 目標位置（下位bit）表示用  MC 軸1 Point3 移動量
MOV.L EM1944 EM3020      ; RB7 指令速度表示用  MC 軸1 Point3 速度
LD MR14903               ; NR_接着剤転写_P4
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM21790 EM3032     ; 軸1 現在座標  MC 軸1 Point4 移動量
MOV.L EM1944 EM3030      ; RB7 指令速度表示用  MC 軸1 Point4 速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1940 EM3032      ; RB7 目標位置（下位bit）表示用  MC 軸1 Point4 移動量
MOV.L EM1944 EM3030      ; RB7 指令速度表示用  MC 軸1 Point4 速度
LD MR14904               ; NR_接着剤転写_P5
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM21790 EM3042     ; 軸1 現在座標  MC 軸1 Point5 移動量
MOV.L EM1944 EM3040      ; RB7 指令速度表示用  MC 軸1 Point5 速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1940 EM3042      ; RB7 目標位置（下位bit）表示用  MC 軸1 Point5 移動量
MOV.L EM1944 EM3040      ; RB7 指令速度表示用  MC 軸1 Point5 速度
LD MR14905               ; NR_接着剤転写_P6
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM21790 EM3052     ; 軸1 現在座標  MC 軸1 Point6 移動量
MOV.L EM1944 EM3050      ; RB7 指令速度表示用  MC 軸1 Point6 速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1940 EM3052      ; RB7 目標位置（下位bit）表示用  MC 軸1 Point6 移動量
MOV.L EM1944 EM3050      ; RB7 指令速度表示用  MC 軸1 Point6 速度
LD MR14906               ; NR_接着剤転写_P7
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM21790 EM3062     ; 軸1 現在座標  MC 軸1 Point7 移動量
MOV.L EM1944 EM3060      ; RB7 指令速度表示用  MC 軸1 Point7 速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1940 EM3062      ; RB7 目標位置（下位bit）表示用  MC 軸1 Point7 移動量
MOV.L EM1944 EM3060      ; RB7 指令速度表示用  MC 軸1 Point7 速度
;EM43002.l = em3002.l - 2
;EM44002.l = em3002.l + 2
;EM43012.l = em3012.l - 2
;EM44012.l = em3012.l + 2
;EM43022.l = em3022.l - 2
;EM44022.l = em3022.l + 2
;EM43032.l = em3032.l - 2
;EM44032.l = em3032.l + 2
;EM43042.l = em3042.l - 2
;EM44042.l = em3042.l + 2
;EM43052.l = em3052.l - 2
;EM44052.l = em3052.l + 2
;EM43062.l = em3062.l - 2
;EM44062.l = em3062.l + 2
;EM43072.l = em3072.l - 2
;EM44072.l = em3072.l + 2
LD CR2002                ; 常時ON
NCJ #1000
;EM43002.l = em3002.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM3002             ; MC 軸1 Point1 移動量
CON
SUB.L +2
CON
STA.L EM43002
;EM44002.l = em3002.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM3002             ; MC 軸1 Point1 移動量
CON
ADD.L +2
CON
STA.L EM44002
;EM43012.l = em3012.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM3012             ; MC 軸1 Point2 移動量
CON
SUB.L +2
CON
STA.L EM43012
;EM44012.l = em3012.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM3012             ; MC 軸1 Point2 移動量
CON
ADD.L +2
CON
STA.L EM44012
;EM43022.l = em3022.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM3022             ; MC 軸1 Point3 移動量
CON
SUB.L +2
CON
STA.L EM43022
;EM44022.l = em3022.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM3022             ; MC 軸1 Point3 移動量
CON
ADD.L +2
CON
STA.L EM44022
;EM43032.l = em3032.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM3032             ; MC 軸1 Point4 移動量
CON
SUB.L +2
CON
STA.L EM43032
;EM44032.l = em3032.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM3032             ; MC 軸1 Point4 移動量
CON
ADD.L +2
CON
STA.L EM44032
;EM43042.l = em3042.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM3042             ; MC 軸1 Point5 移動量
CON
SUB.L +2
CON
STA.L EM43042
;EM44042.l = em3042.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM3042             ; MC 軸1 Point5 移動量
CON
ADD.L +2
CON
STA.L EM44042
;EM43052.l = em3052.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM3052             ; MC 軸1 Point6 移動量
CON
SUB.L +2
CON
STA.L EM43052
;EM44052.l = em3052.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM3052             ; MC 軸1 Point6 移動量
CON
ADD.L +2
CON
STA.L EM44052
;EM43062.l = em3062.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM3062             ; MC 軸1 Point7 移動量
CON
SUB.L +2
CON
STA.L EM43062
;EM44062.l = em3062.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM3062             ; MC 軸1 Point7 移動量
CON
ADD.L +2
CON
STA.L EM44062
;EM43072.l = em3072.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM3072             ; MC 軸1 Point8 移動量
CON
SUB.L +2
CON
STA.L EM43072
;EM44072.l = em3072.l + 2
LD CR2002                ; 常時ON
LDA.L EM3072             ; MC 軸1 Point8 移動量
CON
ADD.L +2
CON
STA.L EM44072
LABEL #1000
;
LD CR2002                ; 常時ON
AND MR21109              ; MC 軸1原点復帰完了記憶
MPS
LD<=.L EM43002 DM21790   ; 軸1 現在座標
AND<=.L DM21790 EM44002  ; 軸1 現在座標
LD>.L EM43002 DM21790    ; 軸1 現在座標
OR>.L DM21790 EM44002    ; 軸1 現在座標
AND @MR000
AND MR14900              ; NR_接着剤転写_P1
ORL
ANL
RES MR21501              ; MC 軸1 ﾎﾟｲﾝﾄ-1移動要求
CON
OUT MR23800              ; 接着剤転写_P1
MRD
LD<=.L EM43012 DM21790   ; 軸1 現在座標
AND<=.L DM21790 EM44012  ; 軸1 現在座標
LD>.L EM43012 DM21790    ; 軸1 現在座標
OR>.L DM21790 EM1402     ; 軸1 現在座標
AND @MR000
AND MR14901              ; NR_接着剤転写_P2
ORL
ANL
RES MR21502              ; MC 軸1 ﾎﾟｲﾝﾄ-2移動要求
CON
OUT MR23801              ; 接着剤転写_P2
MRD
LD<=.L EM43022 DM21790   ; 軸1 現在座標
AND<=.L DM21790 EM44022  ; 軸1 現在座標
LD>.L EM43022 DM21790    ; 軸1 現在座標
OR>.L DM21790 EM44022    ; 軸1 現在座標
AND @MR000
AND MR14902              ; NR_接着剤転写_P3
ORL
ANL
RES MR21503              ; MC 軸1 ﾎﾟｲﾝﾄ-3移動要求
CON
OUT MR23802              ; 接着剤転写_P3
MRD
LD<=.L EM43032 DM21790   ; 軸1 現在座標
AND<=.L DM21790 EM44032  ; 軸1 現在座標
LD>.L EM43032 DM21790    ; 軸1 現在座標
OR>.L DM21790 EM44032    ; 軸1 現在座標
AND @MR000
AND MR14903              ; NR_接着剤転写_P4
ORL
ANL
RES MR21504              ; MC 軸1 ﾎﾟｲﾝﾄ-4移動要求
CON
OUT MR23803              ; 接着剤転写_P4
MRD
LD<=.L EM43042 DM21790   ; 軸1 現在座標
AND<=.L DM21790 EM44042  ; 軸1 現在座標
LD>.L EM43042 DM21790    ; 軸1 現在座標
OR>.L DM21790 EM44042    ; 軸1 現在座標
AND @MR000
AND MR14904              ; NR_接着剤転写_P5
ORL
ANL
RES MR21505              ; MC 軸1 ﾎﾟｲﾝﾄ-5移動要求
CON
OUT MR23804              ; 接着剤転写_P5
MRD
LD<=.L EM43052 DM21790   ; 軸1 現在座標
AND<=.L DM21790 EM44052  ; 軸1 現在座標
LD>.L EM43052 DM21790    ; 軸1 現在座標
OR>.L DM21790 EM44052    ; 軸1 現在座標
AND @MR000
AND MR14905              ; NR_接着剤転写_P6
ORL
ANL
RES MR21506              ; MC 軸1 ﾎﾟｲﾝﾄ-6移動要求
CON
OUT MR23805              ; 接着剤転写_P6
MPP
LD<=.L EM43062 DM21790   ; 軸1 現在座標
AND<=.L DM21790 EM44062  ; 軸1 現在座標
LD>.L EM43062 DM21790    ; 軸1 現在座標
OR>.L DM21790 EM44062    ; 軸1 現在座標
AND @MR000
AND MR14906              ; NR_接着剤転写_P7
ORL
ANL
RES MR21507              ; MC 軸1 ﾎﾟｲﾝﾄ-7移動要求
CON
OUT MR23806              ; 接着剤転写_P7
LD R7514                 ; ﾌｨﾙﾑ受け部  F受け 下限
AND R7401                ; ｽｷｰｼﾞ台部 ｽｷｰｼﾞ台 下限
AND R7407                ; ｽｷｰｼﾞ部 ｽｸﾚｰﾊﾟｰ（小） 上限
AND R7409                ; ｽｷｰｼﾞ部 ｽｸﾚｰﾊﾟｰ（大） 上限
LD R7014                 ; ｽｸﾚｰﾊﾟｰ清掃ｻﾌﾞｶﾊﾞｰ開閉状態(ON閉)
LD R8112                 ; ｽｸﾚｰﾊﾟｰ部水平ｼｬｯﾀｰ 閉限
ANB R8113                ; ｽｸﾚｰﾊﾟｰ部水平ｼｬｯﾀｰ 開限
ORL
ANL
LD R7015                 ; ｼﾘﾝｼﾞ交換ｻﾌﾞｶﾊﾞｰ開閉状態(ON閉)
LD R8114                 ; ｼﾘﾝｼﾞ部ｼｬｯﾀｰ上下 下降限
ANB R8115                ; ｼﾘﾝｼﾞ部ｼｬｯﾀｰ上下 上昇限
ORL
ANL
AND<= DM10524 #10        ; MSEP Axis-2 現在位置（下位8bit）
AND MR21109              ; MC 軸1原点復帰完了記憶
ANB R8106                ; 接着剤塗布ﾍｯﾄﾞ(子)前進限
AND R8107                ; 接着剤塗布ﾍｯﾄﾞ(子)後退限
ANB R7602                ; 接着剤塗布部 ﾍｯﾄﾞ 前限
AND R7603                ; 接着剤塗布部 ﾍｯﾄﾞ 後限
OUT @MR001               ; MC 軸1ｲﾝﾀｰﾛｯｸ
LD @MR001                ; MC 軸1ｲﾝﾀｰﾛｯｸ
ANP MR20512              ; 転写RB MOVE SW
MPS
LD MR14900               ; NR_接着剤転写_P1
LD>.L EM43002 DM21790    ; 軸1 現在座標
OR>.L DM21790 EM44002    ; 軸1 現在座標
ANL
ANL
SET MR21501              ; MC 軸1 ﾎﾟｲﾝﾄ-1移動要求
MRD
LD MR14901               ; NR_接着剤転写_P2
LD>.L EM43012 DM21790    ; 軸1 現在座標
OR>.L DM21790 EM1402     ; 軸1 現在座標
ANL
ANL
SET MR21502              ; MC 軸1 ﾎﾟｲﾝﾄ-2移動要求
MRD
LD MR14902               ; NR_接着剤転写_P3
LD>.L EM43022 DM21790    ; 軸1 現在座標
OR>.L DM21790 EM44022    ; 軸1 現在座標
ANL
ANL
SET MR21503              ; MC 軸1 ﾎﾟｲﾝﾄ-3移動要求
MRD
LD MR14903               ; NR_接着剤転写_P4
LD>.L EM43032 DM21790    ; 軸1 現在座標
OR>.L DM21790 EM44032    ; 軸1 現在座標
ANL
ANL
SET MR21504              ; MC 軸1 ﾎﾟｲﾝﾄ-4移動要求
MRD
LD MR14904               ; NR_接着剤転写_P5
LD>.L EM43042 DM21790    ; 軸1 現在座標
OR>.L DM21790 EM44042    ; 軸1 現在座標
ANL
ANL
SET MR21505              ; MC 軸1 ﾎﾟｲﾝﾄ-5移動要求
MRD
LD MR14905               ; NR_接着剤転写_P6
LD>.L EM43052 DM21790    ; 軸1 現在座標
OR>.L DM21790 EM44052    ; 軸1 現在座標
ANL
ANL
SET MR21505              ; MC 軸1 ﾎﾟｲﾝﾄ-5移動要求
MPP
LD MR14906               ; NR_接着剤転写_P7
LD>.L EM43062 DM21790    ; 軸1 現在座標
OR>.L DM21790 EM44062    ; 軸1 現在座標
ANL
ANL
SET MR21507              ; MC 軸1 ﾎﾟｲﾝﾄ-7移動要求
;<h1/>MC20 2軸目 主軸ﾛｰﾗ 原点復帰(ｾﾞﾛ書き込み）
LD CR2002                ; 常時ON
AND MR20800              ; MC_軸2 原点復帰 SW
ANB @MR801
SET @MR801
CON
SET MR20801              ; MC_軸2 原点復帰 LP
CON
SET @MR800
STG @MR800
RES MR20802              ; MC_軸2 原点復帰完了表示
CON
ANB R20012               ; 軸2 現在座標変更要求
U_WRCPOS.L #3 #2 +0
TMR #835 #2              ; 軸2 現在座標変更待ち
CON
AND T835                 ; 軸2 現在座標変更待ち
JMP @MR801
STG @MR801
SET R20012               ; 軸2 現在座標変更要求
CON
AND R20812               ; 軸2 現在座標変更完了
AND=.L DM21850 +0        ; 軸2 現在座標
JMP @MR802
STG @MR802
RES R20012               ; 軸2 現在座標変更要求
CON
TMR #836 #5
CON
AND T836
JMP @MR803
STG @MR803
SET MR20802              ; MC_軸2 原点復帰完了表示
CON
RES @MR801
CON
RES MR20801              ; MC_軸2 原点復帰 LP
CON
ENDS
;<h1/>MC20 2軸目 主軸ﾛｰﾗ 動作
LD CR2002                ; 常時ON
AND R22800               ; 動作可能
AND R24913               ; 軸2 ｻｰﾎﾞON
AND MR20802              ; MC_軸2 原点復帰完了表示
OUT @MR1010
LD @MR1010
LD= DM3000 #1908         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1919         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
ANB MR20809              ; MC_軸2 JOG- SW
AND MR20807              ; MC_軸2 JOG+ SW
OR MR10013               ; 軸2 JOG正方向
OUT R24900               ; 軸2 JOG正方向
CON
OUT MR20808              ; MC_軸2 JOG+ LP
LD @MR1010
LD= DM3000 #1908         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1919         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
ANB MR20807              ; MC_軸2 JOG+ SW
AND MR20809              ; MC_軸2 JOG- SW
OUT R24901               ; 軸2 JOG負方向
CON
OUT MR20810              ; MC_軸2 JOG- LP
LD @MR1010
AND MR20805              ; MC_軸2 JOG高速 SW
OUT MR20806              ; MC_軸2 JOG高速 LP
CON
OUT R24902               ; 軸2 高速JOG
LDP R24902               ; 軸2 高速JOG
UWRIT.L #3 #14168 EM2404 #1;MC 軸1 JOG速度Hi
LDF R24902               ; 軸2 高速JOG
LD= DM3000 #1908         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1919         ; _MainTP　表示中ﾍﾟｰｼﾞNo
MEP
ORL
UWRIT.L #3 #14168 EM2402 #1;MC 軸1 JOG速度Lo
RES MR20805              ; MC_軸2 JOG高速 SW
;<h1/>MC20 2軸目 主軸ﾛｰﾗ ﾃﾞｰﾀｾｯﾄ
LD CR2002                ; 常時ON
MPS
ANP MR5800               ; 主軸ﾛｰﾗ P1 選択　
DW #1 DM11188            ; CON-2 目標ﾎﾟｲﾝﾄNo.
CON
ZRES MR15000 MR15006     ; NR_主軸ﾛｰﾗ_P1  NR_主軸ﾛｰﾗ_P7
CON
SET MR15000              ; NR_主軸ﾛｰﾗ_P1
MRD
ANP MR5801               ; 主軸ﾛｰﾗ P2 選択　
DW #2 DM11188            ; CON-2 目標ﾎﾟｲﾝﾄNo.
CON
ZRES MR15000 MR15006     ; NR_主軸ﾛｰﾗ_P1  NR_主軸ﾛｰﾗ_P7
CON
SET MR15001              ; NR_主軸ﾛｰﾗ_P2
MRD
ANP MR5802               ; 主軸ﾛｰﾗ P3 選択　
DW #3 DM11188            ; CON-2 目標ﾎﾟｲﾝﾄNo.
CON
ZRES MR15000 MR15006     ; NR_主軸ﾛｰﾗ_P1  NR_主軸ﾛｰﾗ_P7
CON
SET MR15002              ; NR_主軸ﾛｰﾗ_P3
MRD
ANP MR5803               ; 主軸ﾛｰﾗ P4 選択　
DW #4 DM11188            ; CON-2 目標ﾎﾟｲﾝﾄNo.
CON
ZRES MR15000 MR15006     ; NR_主軸ﾛｰﾗ_P1  NR_主軸ﾛｰﾗ_P7
CON
SET MR15003              ; NR_主軸ﾛｰﾗ_P4
MRD
ANP MR5804               ; 主軸ﾛｰﾗ P5 選択　
DW #5 DM11188            ; CON-2 目標ﾎﾟｲﾝﾄNo.
CON
ZRES MR15000 MR15006     ; NR_主軸ﾛｰﾗ_P1  NR_主軸ﾛｰﾗ_P7
CON
SET MR15004              ; NR_主軸ﾛｰﾗ_P5
MRD
ANP MR5805               ; 主軸ﾛｰﾗ P6 選択　
DW #5 DM11188            ; CON-2 目標ﾎﾟｲﾝﾄNo.
CON
ZRES MR15000 MR15006     ; NR_主軸ﾛｰﾗ_P1  NR_主軸ﾛｰﾗ_P7
CON
SET MR15005              ; NR_主軸ﾛｰﾗ_P6
MPP
ANP MR5806               ; 主軸ﾛｰﾗ P7 選択　
DW #5 DM11188            ; CON-2 目標ﾎﾟｲﾝﾄNo.
CON
ZRES MR15000 MR15006     ; NR_主軸ﾛｰﾗ_P1  NR_主軸ﾛｰﾗ_P7
CON
SET MR15006              ; NR_主軸ﾛｰﾗ_P7
LD= DM3000 #1908         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1919         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR20802               ; MC_軸2 原点復帰完了表示
OR CR2002                ; 常時ON
ANL
MPS
ANP MR5800               ; 主軸ﾛｰﾗ P1 選択　
MOV.L EM3202 EM1950      ; MC 軸2 Point1 移動量  SV1 目標位置（下位bit）表示用
MOV.L EM3200 EM1954      ; MC 軸2 Point1 速度  SV1 指令速度表示用
MRD
ANP MR5801               ; 主軸ﾛｰﾗ P2 選択　
MOV.L EM3212 EM1950      ; MC 軸2 Point2 移動量  SV1 目標位置（下位bit）表示用
MOV.L EM3210 EM1954      ; MC 軸2 Point2 速度  SV1 指令速度表示用
MRD
ANP MR5802               ; 主軸ﾛｰﾗ P3 選択　
MOV.L EM3222 EM1950      ; MC 軸2 Point3 移動量  SV1 目標位置（下位bit）表示用
MOV.L EM3220 EM1954      ; MC 軸2 Point3 速度  SV1 指令速度表示用
MRD
ANP MR5803               ; 主軸ﾛｰﾗ P4 選択　
MOV.L EM3232 EM1950      ; MC 軸2 Point4 移動量  SV1 目標位置（下位bit）表示用
MOV.L EM3230 EM1954      ; MC 軸2 Point4 速度  SV1 指令速度表示用
MRD
ANP MR5804               ; 主軸ﾛｰﾗ P5 選択　
MOV.L EM3242 EM1950      ; MC 軸2 Point5 移動量  SV1 目標位置（下位bit）表示用
MOV.L EM3240 EM1954      ; MC 軸2 Point5 速度  SV1 指令速度表示用
MRD
ANP MR5805               ; 主軸ﾛｰﾗ P6 選択　
MOV.L EM3252 EM1950      ; MC 軸2 Point6 移動量  SV1 目標位置（下位bit）表示用
MOV.L EM3250 EM1954      ; MC 軸2 Point6 速度  SV1 指令速度表示用
MPP
ANP MR5806               ; 主軸ﾛｰﾗ P7 選択　
MOV.L EM3262 EM1950      ; MC 軸2 Point7 移動量  SV1 目標位置（下位bit）表示用
MOV.L EM3260 EM1954      ; MC 軸2 Point7 速度  SV1 指令速度表示用
LD= DM3000 #1919         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1908         ; _MainTP　表示中ﾍﾟｰｼﾞNo
MEF
ORP @MR514               ; MC立上りｳｪｲﾄﾀｲﾏ
ORF MR4914               ; 確定SW
ORF MR4915               ; 現在地書込SW
UWRIT.L #3 #18048 EM3202 #1;MC 軸2 Point1 移動量
UWRIT.L #3 #18560 EM3212 #1;MC 軸2 Point2 移動量
UWRIT.L #3 #19072 EM3222 #1;MC 軸2 Point3 移動量
UWRIT.L #3 #19584 EM3232 #1;MC 軸2 Point4 移動量
UWRIT.L #3 #20096 EM3242 #1;MC 軸2 Point5 移動量
UWRIT.L #3 #20608 EM3252 #1;MC 軸2 Point6 移動量
UWRIT.L #3 #21120 EM5004 #1;主軸回転 Home〜中間 P7
UWRIT.L #3 #22656 EM5000 #1;主軸回転 P10
UWRIT.L #3 #23680 EM5002 #1;主軸回転 Pｎ
UWRIT.L #3 #18060 EM3200 #1;MC 軸2 Point1 速度
UWRIT.L #3 #18572 EM3210 #1;MC 軸2 Point2 速度
UWRIT.L #3 #19084 EM3220 #1;MC 軸2 Point3 速度
UWRIT.L #3 #19596 EM3230 #1;MC 軸2 Point4 速度
UWRIT.L #3 #20108 EM3240 #1;MC 軸2 Point5 速度
UWRIT.L #3 #20620 EM3250 #1;MC 軸2 Point6 速度
UWRIT.L #3 #21132 EM3260 #1;MC 軸2 Point7 速度
LD MR15000               ; NR_主軸ﾛｰﾗ_P1
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM21850 EM3202     ; 軸2 現在座標  MC 軸2 Point1 移動量
MOV.L EM1954 EM3200      ; SV1 指令速度表示用  MC 軸2 Point1 速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1950 EM3202      ; SV1 目標位置（下位bit）表示用  MC 軸2 Point1 移動量
MOV.L EM1954 EM3200      ; SV1 指令速度表示用  MC 軸2 Point1 速度
LD MR15001               ; NR_主軸ﾛｰﾗ_P2
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM21850 EM3212     ; 軸2 現在座標  MC 軸2 Point2 移動量
MOV.L EM1954 EM3210      ; SV1 指令速度表示用  MC 軸2 Point2 速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1950 EM3212      ; SV1 目標位置（下位bit）表示用  MC 軸2 Point2 移動量
MOV.L EM1954 EM3210      ; SV1 指令速度表示用  MC 軸2 Point2 速度
LD MR15002               ; NR_主軸ﾛｰﾗ_P3
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM21850 EM3222     ; 軸2 現在座標  MC 軸2 Point3 移動量
MOV.L EM1954 EM3220      ; SV1 指令速度表示用  MC 軸2 Point3 速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1950 EM3222      ; SV1 目標位置（下位bit）表示用  MC 軸2 Point3 移動量
MOV.L EM1954 EM3220      ; SV1 指令速度表示用  MC 軸2 Point3 速度
LD MR15003               ; NR_主軸ﾛｰﾗ_P4
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM21850 EM3232     ; 軸2 現在座標  MC 軸2 Point4 移動量
MOV.L EM1954 EM3230      ; SV1 指令速度表示用  MC 軸2 Point4 速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1950 EM3232      ; SV1 目標位置（下位bit）表示用  MC 軸2 Point4 移動量
MOV.L EM1954 EM3230      ; SV1 指令速度表示用  MC 軸2 Point4 速度
LD MR15004               ; NR_主軸ﾛｰﾗ_P5
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM21850 EM3242     ; 軸2 現在座標  MC 軸2 Point5 移動量
MOV.L EM1954 EM3240      ; SV1 指令速度表示用  MC 軸2 Point5 速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1950 EM3242      ; SV1 目標位置（下位bit）表示用  MC 軸2 Point5 移動量
MOV.L EM1954 EM3240      ; SV1 指令速度表示用  MC 軸2 Point5 速度
LD MR15005               ; NR_主軸ﾛｰﾗ_P6
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM21850 EM3252     ; 軸2 現在座標  MC 軸2 Point6 移動量
MOV.L EM1954 EM3250      ; SV1 指令速度表示用  MC 軸2 Point6 速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1950 EM3252      ; SV1 目標位置（下位bit）表示用  MC 軸2 Point6 移動量
MOV.L EM1954 EM3250      ; SV1 指令速度表示用  MC 軸2 Point6 速度
LD MR15006               ; NR_主軸ﾛｰﾗ_P7
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM21850 EM3262     ; 軸2 現在座標  MC 軸2 Point7 移動量
MOV.L EM1954 EM3260      ; SV1 指令速度表示用  MC 軸2 Point7 速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1950 EM3262      ; SV1 目標位置（下位bit）表示用  MC 軸2 Point7 移動量
MOV.L EM1954 EM3260      ; SV1 指令速度表示用  MC 軸2 Point7 速度
;'転写ﾍｯﾄﾞ 剥離位置から待機位置までの距離の負数
;
;EM5000.L=1*(EM3002.L-EM3062.L)'中間から待機位置まで逆転
;EM5004.L=(E3022.L-E3062.L)      'HOME位置から中間位置まで正転
;'転写ﾍｯﾄﾞ_転写動作時のﾌｨﾙﾑ送り距離
;EM5002.L=EM3042.L-EM3032.L
;
LD CR2002                ; 常時ON
NCJ #1001
;'転写ﾍｯﾄﾞ 剥離位置から待機位置までの距離の負数
;
;EM5000.L=1*(EM3002.L-EM3062.L)'中間から待機位置まで逆転
;
LD CR2002                ; 常時ON
LDA.L EM3002             ; MC 軸1 Point1 移動量
CON
SUB.L EM3062             ; MC 軸1 Point7 移動量
CON
MUL.L +1
CON
STA.L EM5000             ; 主軸回転 P10
;EM5004.L=(E3022.L-E3062.L)      'HOME位置から中間位置まで正転
;
LD CR2002                ; 常時ON
LDA.L EM3022             ; MC 軸1 Point3 移動量
CON
SUB.L EM3062             ; MC 軸1 Point7 移動量
CON
STA.L EM5004             ; 主軸回転 Home〜中間 P7
;'転写ﾍｯﾄﾞ_転写動作時のﾌｨﾙﾑ送り距離
;
;EM5002.L=EM3042.L-EM3032.L
;
LD CR2002                ; 常時ON
LDA.L EM3042             ; MC 軸1 Point5 移動量
CON
SUB.L EM3032             ; MC 軸1 Point4 移動量
CON
STA.L EM5002             ; 主軸回転 Pｎ
LABEL #1001
;
;EM43202.l = em3202.l - 2
;EM44202.l = em3202.l + 2
;EM43212.l = em3212.l - 2
;EM44212.l = em3212.l + 2
;EM43222.l = em3222.l - 2
;EM44222.l = em3222.l + 2
;EM43232.l = em3232.l - 2
;EM44232.l = em3232.l + 2
;EM43242.l = em3242.l - 2
;EM44242.l = em3242.l + 2
;EM43252.l = em3252.l - 2
;EM44252.l = em3252.l + 2
;EM43262.l = em3262.l - 2
;EM44262.l = em3262.l + 2
;EM43272.l = em3272.l - 2
;EM44272.l = em3272.l + 2
LD CR2002                ; 常時ON
NCJ #1002
;EM43202.l = em3202.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM3202             ; MC 軸2 Point1 移動量
CON
SUB.L +2
CON
STA.L EM43202
;EM44202.l = em3202.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM3202             ; MC 軸2 Point1 移動量
CON
ADD.L +2
CON
STA.L EM44202
;EM43212.l = em3212.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM3212             ; MC 軸2 Point2 移動量
CON
SUB.L +2
CON
STA.L EM43212
;EM44212.l = em3212.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM3212             ; MC 軸2 Point2 移動量
CON
ADD.L +2
CON
STA.L EM44212
;EM43222.l = em3222.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM3222             ; MC 軸2 Point3 移動量
CON
SUB.L +2
CON
STA.L EM43222
;EM44222.l = em3222.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM3222             ; MC 軸2 Point3 移動量
CON
ADD.L +2
CON
STA.L EM44222
;EM43232.l = em3232.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM3232             ; MC 軸2 Point4 移動量
CON
SUB.L +2
CON
STA.L EM43232
;EM44232.l = em3232.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM3232             ; MC 軸2 Point4 移動量
CON
ADD.L +2
CON
STA.L EM44232
;EM43242.l = em3242.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM3242             ; MC 軸2 Point5 移動量
CON
SUB.L +2
CON
STA.L EM43242
;EM44242.l = em3242.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM3242             ; MC 軸2 Point5 移動量
CON
ADD.L +2
CON
STA.L EM44242
;EM43252.l = em3252.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM3252             ; MC 軸2 Point6 移動量
CON
SUB.L +2
CON
STA.L EM43252
;EM44252.l = em3252.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM3252             ; MC 軸2 Point6 移動量
CON
ADD.L +2
CON
STA.L EM44252
;EM43262.l = em3262.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM3262             ; MC 軸2 Point7 移動量
CON
SUB.L +2
CON
STA.L EM43262
;EM44262.l = em3262.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM3262             ; MC 軸2 Point7 移動量
CON
ADD.L +2
CON
STA.L EM44262
;EM43272.l = em3272.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM3272             ; MC 軸2 Point8 移動量
CON
SUB.L +2
CON
STA.L EM43272
;EM44272.l = em3272.l + 2
LD CR2002                ; 常時ON
LDA.L EM3272             ; MC 軸2 Point8 移動量
CON
ADD.L +2
CON
STA.L EM44272
LABEL #1002
;
LD CR2002                ; 常時ON
AND MR20802              ; MC_軸2 原点復帰完了表示
MPS
AND MR15000              ; NR_主軸ﾛｰﾗ_P1
MPS
LD<=.L EM43202 DM21850   ; 軸2 現在座標
AND<=.L DM21850 EM44202  ; 軸2 現在座標
LD>.L EM43202 DM21850    ; 軸2 現在座標
OR>.L DM21850 EM44202    ; 軸2 現在座標
AND @MR000
ORL
ANL
RES MR21701              ; MC 軸2 ﾎﾟｲﾝﾄ-1移動要求
CON
OUT MR23900              ; 主軸ﾛｰﾗ_P1
MPP
LD>.L EM43202 DM21850    ; 軸2 現在座標
OR>.L DM21850 EM44202    ; 軸2 現在座標
ANP MR20812              ; 主軸ﾛｰﾗ MOVE SW
ANL
SET MR21801              ; MC 軸2 ﾎﾟｲﾝﾄ-1移動要求
MRD
AND MR15001              ; NR_主軸ﾛｰﾗ_P2
MPS
LD<=.L EM43212 DM21850   ; 軸2 現在座標
AND<=.L DM21850 EM44212  ; 軸2 現在座標
LD>.L EM43212 DM21850    ; 軸2 現在座標
OR>.L DM21850 EM44212    ; 軸2 現在座標
AND @MR000
ORL
ANL
RES MR21702              ; MC 軸2 ﾎﾟｲﾝﾄ-2移動要求
CON
OUT MR23901              ; 主軸ﾛｰﾗ_P2
MPP
LD>.L EM43212 DM21850    ; 軸2 現在座標
OR>.L DM21850 EM44212    ; 軸2 現在座標
ANP MR20812              ; 主軸ﾛｰﾗ MOVE SW
ANL
SET MR21802              ; MC 軸2 ﾎﾟｲﾝﾄ-2移動要求
MRD
AND MR15002              ; NR_主軸ﾛｰﾗ_P3
MPS
LD<=.L EM43222 DM21850   ; 軸2 現在座標
AND<=.L DM21850 EM44222  ; 軸2 現在座標
LD>.L EM43222 DM21850    ; 軸2 現在座標
OR>.L DM21850 EM44222    ; 軸2 現在座標
AND @MR000
ORL
ANL
RES MR21703              ; MC 軸2 ﾎﾟｲﾝﾄ-3移動要求
CON
OUT MR23902              ; 主軸ﾛｰﾗ_P3
MPP
LD>.L EM43222 DM21850    ; 軸2 現在座標
OR>.L DM21850 EM44222    ; 軸2 現在座標
ANP MR20812              ; 主軸ﾛｰﾗ MOVE SW
ANL
SET MR21803              ; MC 軸2 ﾎﾟｲﾝﾄ-3移動要求
MRD
AND MR15003              ; NR_主軸ﾛｰﾗ_P4
MPS
LD<=.L EM43232 DM21850   ; 軸2 現在座標
AND<=.L DM21850 EM44232  ; 軸2 現在座標
LD>.L EM43232 DM21850    ; 軸2 現在座標
OR>.L DM21850 EM44232    ; 軸2 現在座標
AND @MR000
ORL
ANL
RES MR21704              ; MC 軸2 ﾎﾟｲﾝﾄ-4移動要求
CON
OUT MR23903              ; 主軸ﾛｰﾗ_P4
MPP
LD>.L EM43232 DM21850    ; 軸2 現在座標
OR>.L DM21850 EM44232    ; 軸2 現在座標
ANP MR20812              ; 主軸ﾛｰﾗ MOVE SW
ANL
SET MR21804              ; MC 軸2 ﾎﾟｲﾝﾄ-4移動要求
MRD
AND MR15004              ; NR_主軸ﾛｰﾗ_P5
MPS
LD<=.L EM43242 DM21850   ; 軸2 現在座標
AND<=.L DM21850 EM44242  ; 軸2 現在座標
LD>.L EM43242 DM21850    ; 軸2 現在座標
OR>.L DM21850 EM44242    ; 軸2 現在座標
AND @MR000
ORL
ANL
RES MR21705              ; MC 軸2 ﾎﾟｲﾝﾄ-5移動要求
CON
OUT MR23904              ; 主軸ﾛｰﾗ_P5
MPP
LD>.L EM43242 DM21850    ; 軸2 現在座標
OR>.L DM21850 EM44242    ; 軸2 現在座標
ANP MR20812              ; 主軸ﾛｰﾗ MOVE SW
ANL
SET MR21805              ; MC 軸2 ﾎﾟｲﾝﾄ-5移動要求
MRD
AND MR15005              ; NR_主軸ﾛｰﾗ_P6
MPS
LD<=.L EM43252 DM21850   ; 軸2 現在座標
AND<=.L DM21850 EM44252  ; 軸2 現在座標
LD>.L EM43252 DM21850    ; 軸2 現在座標
OR>.L DM21850 EM44252    ; 軸2 現在座標
AND @MR000
ORL
ANL
RES MR21705              ; MC 軸2 ﾎﾟｲﾝﾄ-5移動要求
CON
OUT MR23905              ; 主軸ﾛｰﾗ_P6
MPP
LD>.L EM43252 DM21850    ; 軸2 現在座標
OR>.L DM21850 EM44252    ; 軸2 現在座標
ANP MR20812              ; 主軸ﾛｰﾗ MOVE SW
ANL
SET MR21806              ; MC 軸2 ﾎﾟｲﾝﾄ-6移動要求
MPP
AND MR15006              ; NR_主軸ﾛｰﾗ_P7
MPS
LD<=.L EM43262 DM21850   ; 軸2 現在座標
AND<=.L DM21850 EM44262  ; 軸2 現在座標
LD>.L EM43262 DM21850    ; 軸2 現在座標
OR>.L DM21850 EM44262    ; 軸2 現在座標
AND @MR000
ORL
ANL
RES MR21705              ; MC 軸2 ﾎﾟｲﾝﾄ-5移動要求
CON
OUT MR23906              ; 主軸ﾛｰﾗ_P7
MPP
LD>.L EM43262 DM21850    ; 軸2 現在座標
OR>.L DM21850 EM44262    ; 軸2 現在座標
ANP MR20812              ; 主軸ﾛｰﾗ MOVE SW
ANL
SET MR21807              ; MC 軸2 ﾎﾟｲﾝﾄ-7移動要求
STG MR21801              ; MC 軸2 ﾎﾟｲﾝﾄ-1移動要求
ANB R20012               ; 軸2 現在座標変更要求
U_WRCPOS.L #3 #2 +0
TMR #790 #2              ; 軸2 現在座標変更待ち
CON
AND T790                 ; 軸2 現在座標変更待ち
JMP @MR100
STG @MR100
SET R20012               ; 軸2 現在座標変更要求
CON
AND R20812               ; 軸2 現在座標変更完了
AND=.L DM21850 +0        ; 軸2 現在座標
JMP @MR101
STG @MR101
RES R20012               ; 軸2 現在座標変更要求
CON
TMR #1317 #2
CON
AND T1317
SET MR21701              ; MC 軸2 ﾎﾟｲﾝﾄ-1移動要求
CON
ENDS
STG MR21802              ; MC 軸2 ﾎﾟｲﾝﾄ-2移動要求
ANB R20012               ; 軸2 現在座標変更要求
U_WRCPOS.L #3 #2 +0
TMR #791 #2              ; 軸2 現在座標変更待ち
CON
AND T791                 ; 軸2 現在座標変更待ち
JMP @MR102
STG @MR102
SET R20012               ; 軸2 現在座標変更要求
CON
AND R20812               ; 軸2 現在座標変更完了
AND=.L DM21850 +0        ; 軸2 現在座標
JMP @MR103
STG @MR103
RES R20012               ; 軸2 現在座標変更要求
CON
TMR #1318 #2
CON
AND T1318
SET MR21702              ; MC 軸2 ﾎﾟｲﾝﾄ-2移動要求
CON
ENDS
STG MR21803              ; MC 軸2 ﾎﾟｲﾝﾄ-3移動要求
ANB R20012               ; 軸2 現在座標変更要求
U_WRCPOS.L #3 #2 +0
TMR #792 #2              ; 軸2 現在座標変更待ち
CON
AND T792                 ; 軸2 現在座標変更待ち
JMP @MR104
STG @MR104
SET R20012               ; 軸2 現在座標変更要求
CON
AND R20812               ; 軸2 現在座標変更完了
AND=.L DM21850 +0        ; 軸2 現在座標
JMP @MR105
STG @MR105
RES R20012               ; 軸2 現在座標変更要求
CON
TMR #1319 #2
CON
AND T1319
SET MR21703              ; MC 軸2 ﾎﾟｲﾝﾄ-3移動要求
CON
ENDS
STG MR21804              ; MC 軸2 ﾎﾟｲﾝﾄ-4移動要求
ANB R20012               ; 軸2 現在座標変更要求
U_WRCPOS.L #3 #2 +0
TMR #793 #2              ; 軸2 現在座標変更待ち
CON
AND T793                 ; 軸2 現在座標変更待ち
JMP @MR106
STG @MR106
SET R20012               ; 軸2 現在座標変更要求
CON
AND R20812               ; 軸2 現在座標変更完了
AND=.L DM21850 +0        ; 軸2 現在座標
JMP @MR107
STG @MR107
RES R20012               ; 軸2 現在座標変更要求
CON
TMR #1320 #2
CON
AND T1320
SET MR21704              ; MC 軸2 ﾎﾟｲﾝﾄ-4移動要求
CON
ENDS
STG MR21805              ; MC 軸2 ﾎﾟｲﾝﾄ-5移動要求
ANB R20012               ; 軸2 現在座標変更要求
U_WRCPOS.L #3 #2 +0
TMR #794 #2              ; 軸2 現在座標変更待ち
CON
AND T794                 ; 軸2 現在座標変更待ち
JMP @MR108
STG @MR108
SET R20012               ; 軸2 現在座標変更要求
CON
AND R20812               ; 軸2 現在座標変更完了
AND=.L DM21850 +0        ; 軸2 現在座標
JMP @MR109
STG @MR109
RES R20012               ; 軸2 現在座標変更要求
CON
TMR #1321 #2
CON
AND T1321
SET MR21705              ; MC 軸2 ﾎﾟｲﾝﾄ-5移動要求
CON
ENDS
;MyTask Error Process Substance/ｴﾗｰ処理実体
STG @R100                ; MSEP_Axis6 ｱﾗｰﾑ発生
ANB R39002               ; ERROR_DISP Busy
MPS
ZRES @R105 @R108         ; SW1
CON
LDA @DM9
CON
TBCD
CON
STA @DM10
CON
DISN @DM10 @DM3 #4
MRD
DW #5 @DM0
CON
BMOV @DM0 DM60000 #7     ; TaskNo /ERROR_DISP
MPP
SET R39000               ; ERROR_DISP Start
CON
SET @R102
CON
JMP @R103
STG @R103
AND R39002               ; ERROR_DISP Busy
AND= DM60008 @DM1        ; ReturnNo /ERROR_DISP
AND= DM60007 @DM6        ; ReturnSW /ERROR_DISP
SET @R105                ; SW1
CON
JMP @R104
STG @R104
ANB R39002               ; ERROR_DISP Busy
RES @R102
CON
SET @R101
CON
ENDS
;
END
ENDH
