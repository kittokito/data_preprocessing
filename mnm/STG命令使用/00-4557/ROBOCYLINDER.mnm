DEVICE:53
;MODULE:ROBOCYLINDER
;MODULE_TYPE:0
;非常停止
;Emergency Stop
LD R50000                ; 即停止
OR R50900                ; TRAP
OR R50914                ; HOMEsw ON
ZRES @MR000 @MR1515
LD T200                  ; 動作中遅延
OUT R26600               ; 動作許可
;<h1/>サーボＯＮ
LD CR2002                ; 常時ON
AND R55000               ; 即停止/TRAP 入力無し
OUT R21600               ; 動作許可
LD T200                  ; 動作中遅延
ANB R52004               ; ｽﾀｰﾄ_SW
AND R3100                ; SERVO MOTOR POWER ON
AND R3101                ; DRV-T2 POWER ON
AND R3102                ; DRV-T3 POWER ON
AND R3103                ; DRV-T4 POWER ON
@SET MR3006
CON
@SET @MR001
STG @MR001
SET R29305               ; 軸1 ﾄﾞﾗｲﾊﾞｱﾗｰﾑﾘｾｯﾄ
CON
SET R30105               ; 軸2 ﾄﾞﾗｲﾊﾞｱﾗｰﾑﾘｾｯﾄ
CON
SET R30905               ; 軸3 ﾄﾞﾗｲﾊﾞｱﾗｰﾑﾘｾｯﾄ
CON
SET R31705               ; 軸4 ﾄﾞﾗｲﾊﾞｱﾗｰﾑﾘｾｯﾄ
CON
JMP @MR002               ; 002
STG @MR002               ; 002
ANB R29705               ; 軸1 ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
ANB R30505               ; 軸2 ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
ANB R31305               ; 軸3 ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
ANB R32105               ; 軸4 ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
RES R29305               ; 軸1 ﾄﾞﾗｲﾊﾞｱﾗｰﾑﾘｾｯﾄ
CON
RES R30105               ; 軸2 ﾄﾞﾗｲﾊﾞｱﾗｰﾑﾘｾｯﾄ
CON
RES R30905               ; 軸3 ﾄﾞﾗｲﾊﾞｱﾗｰﾑﾘｾｯﾄ
CON
RES R31705               ; 軸4 ﾄﾞﾗｲﾊﾞｱﾗｰﾑﾘｾｯﾄ
CON
JMP @MR003               ; 003
STG @MR003               ; 003
SET R29000               ; 軸1 軸ｴﾗｰｸﾘｱ
CON
SET R29800               ; 軸2 軸ｴﾗｰｸﾘｱ
CON
SET R30600               ; 軸3 軸ｴﾗｰｸﾘｱ
CON
SET R31400               ; 軸4 軸ｴﾗｰｸﾘｱ
CON
JMP @MR004               ; 002
STG @MR004               ; 002
ANB R29400               ; 軸1 軸ｴﾗｰ中
ANB R30200               ; 軸2 軸ｴﾗｰ中
ANB R31000               ; 軸3 軸ｴﾗｰ中
ANB R31800               ; 軸4 軸ｴﾗｰ中
RES R29000               ; 軸1 軸ｴﾗｰｸﾘｱ
CON
RES R29800               ; 軸2 軸ｴﾗｰｸﾘｱ
CON
RES R30600               ; 軸3 軸ｴﾗｰｸﾘｱ
CON
RES R31400               ; 軸4 軸ｴﾗｰｸﾘｱ
CON
JMP @MR005               ; 003
STG @MR005               ; 003
SET R29913               ; 軸2 ｻｰﾎﾞON
CON
JMP @MR006
STG @MR006
TMR @5 #30
CON
AND @T5
SET R30713               ; 軸3 ｻｰﾎﾞON
CON
JMP @MR007
STG @MR007
TMR @6 #30
CON
AND @T6
SET R29113               ; 軸1 ｻｰﾎﾞON
CON
JMP @MR008
STG @MR008
TMR @7 #30
CON
AND @T7
SET R31513               ; 軸4 ｻｰﾎﾞON
CON
JMP @MR009
STG @MR009
TMR @8 #30
CON
AND @T8
SET MR1402               ; RB4 ｻｰﾎﾞON完了
CON
ENDS
LDF R29513               ; 軸1 ｻｰﾎﾞﾚﾃﾞｨ
RES MR1102               ; RB1ｻｰﾎﾞON完了
LDF R30313               ; 軸2 ｻｰﾎﾞﾚﾃﾞｨ
RES MR1202               ; RB2 ｻｰﾎﾞON完了
LDF R31113               ; 軸3 ｻｰﾎﾞﾚﾃﾞｨ
RES MR1302               ; RB3ｻｰﾎﾞON完了
LDF R31913               ; 軸4 ｻｰﾎﾞﾚﾃﾞｨ
RES MR1402               ; RB4 ｻｰﾎﾞON完了
;<h1/>軸１　ﾌｨﾙﾑ送り_ﾌﾗｯｼｭﾛﾑ書込み
LDP R36015               ; 書き込みOK SW
@SET @MR1001             ; 給材PP X軸_ﾌﾗｯｼｭﾛﾑ書込み
STG @MR1001              ; 給材PP X軸_ﾌﾗｯｼｭﾛﾑ書込み
ANB R27812               ; ﾌﾗｯｼｭROM書込完了
SET R26612               ; ﾌﾗｯｼｭROM書込要求
CON
JMP @MR1002
STG @MR1002
AND R27812               ; ﾌﾗｯｼｭROM書込完了
UREAD #2 #105 @DM1 #1    ; ﾌﾗｯｼｭROM書込完了ｺｰﾄﾞ
RES R26612               ; ﾌﾗｯｼｭROM書込要求
CON
JMP @MR1003
STG @MR1003
MPS
AND= @DM1 #0             ; ﾌﾗｯｼｭROM書込完了ｺｰﾄﾞ
ENDS
MPP
AND<> @DM1 #0            ; ﾌﾗｯｼｭROM書込完了ｺｰﾄﾞ
SET MR14002              ; 給材P&P X軸_ﾌﾗｯｼｭﾛﾑ書込み異常
CON
ENDS
;軸１　ﾌｨﾙﾑ送り_移動可条件
;ﾌｨﾙﾑ送り軸_ﾎﾟｼﾞｼｮﾝ表示
LD CR2002                ; 常時ON
U_RDFPOS.L #2 #1 DM2050  ; ﾌｨﾙﾑ送り_現在座標読出し
MPS
LDA.D DM2050             ; ﾌｨﾙﾑ送り_現在座標読出し
CON
STA.D DM2052             ; ﾌｨﾙﾑ送り_現在座標表示用
MRD
MOV.L DM2058 DM2054      ; ﾌｨﾙﾑ送り_変更速度表示用  ﾌｨﾙﾑ送り_現在速度表示用
MPP
AND=.L DM2050 DM2012     ; ﾌｨﾙﾑ送り_現在座標読出し  ﾌｨﾙﾑ送り_P1:位置
OUT R38008               ; ﾌｨﾙﾑ送り P1 位置　表示
;ﾎﾟｲﾝﾄﾃﾞｰﾀ格納
LD= DM400 #200           ; 現在表示中   画面
OUT MR14015              ; RBﾎﾟｲﾝﾄ設定1画面表示中(TP)
LDB R29404               ; 軸1 軸制御中
OUT R38006               ; ﾌｨﾙﾑ送り_位置取込み可PL(TP)
CON
OUT R38007               ; ﾌｨﾙﾑ送り_位置書込み可PL(TP)
LD CR2002                ; 常時ON
OUT @MR2001              ; ﾌｨﾙﾑ送り X軸_ﾎﾟｲﾝﾄ1表示
LD CR2002                ; 常時ON
LDA.D DM642
CON
STA.D DM2058             ; ﾌｨﾙﾑ送り_変更速度表示用
CON
ANB CR2002               ; 常時ON
LDA.D DM2012             ; ﾌｨﾙﾑ送り_P1:位置
CON
STA.D DM542              ; ACF送り量
LD CR2002                ; 常時ON
ANP R36006               ; ﾌｨﾙﾑ送り_位置取込みPB(TP)
AND R38006               ; ﾌｨﾙﾑ送り_位置取込み可PL(TP)
MOV.L DM12290 DM2012     ; 軸1 現在座標  ﾌｨﾙﾑ送り_P1:位置
@LDA.D DM12290           ; 軸1 現在座標
CON
@STA.D DM542             ; ACF送り量
LD CR2002                ; 常時ON
ANP R36007               ; ﾌｨﾙﾑ送り_位置書込みPB(TP)
AND R38007               ; ﾌｨﾙﾑ送り_位置書込み可PL(TP)
LDA.D DM2058             ; ﾌｨﾙﾑ送り_変更速度表示用
CON
STA.D DM642
CON
LDA.D DM542              ; ACF送り量
CON
STA.D DM2012             ; ﾌｨﾙﾑ送り_P1:位置
LD CR2002                ; 常時ON
ANP R36015               ; 書き込みOK SW
LD R38006                ; ﾌｨﾙﾑ送り_位置取込み可PL(TP)
OR R38007                ; ﾌｨﾙﾑ送り_位置書込み可PL(TP)
ANL
UWRIT #2 #18016 DM2012 #2; ﾌｨﾙﾑ送り_P1:位置
UWRIT #2 #18028 DM642 #2
LDP R50001               ; 自動中
ORP R50002               ; ステップ動作中
ORP R50003               ; 原点復帰中
ORP MR14015              ; RBﾎﾟｲﾝﾄ設定1画面表示中(TP)
ORP T200                 ; 動作中遅延
UREAD #2 #18016 DM2012 #2; ﾌｨﾙﾑ送り_P1:位置
UREAD #2 #18028 DM642 #2
LDF MR14015              ; RBﾎﾟｲﾝﾄ設定1画面表示中(TP)
UWRIT #2 #18016 DM2012 #2; ﾌｨﾙﾑ送り_P1:位置
UWRIT #2 #18028 DM642 #2
;<h1/>軸２　給材上下_ﾌﾗｯｼｭﾛﾑ書込み
LDP R36115               ; 書き込みOK SW
@SET @MR1101             ; 給材上下 Z軸_ﾌﾗｯｼｭﾛﾑ書込み
STG @MR1101              ; 給材上下 Z軸_ﾌﾗｯｼｭﾛﾑ書込み
ANB R27812               ; ﾌﾗｯｼｭROM書込完了
SET R26612               ; ﾌﾗｯｼｭROM書込要求
CON
JMP @MR1102
STG @MR1102
AND R27812               ; ﾌﾗｯｼｭROM書込完了
UREAD #2 #105 @DM2 #1    ; ﾌﾗｯｼｭROM書込完了ｺｰﾄﾞ
RES R26612               ; ﾌﾗｯｼｭROM書込要求
CON
JMP @MR1103
STG @MR1103
MPS
AND= @DM2 #0             ; ﾌﾗｯｼｭROM書込完了ｺｰﾄﾞ
ENDS
MPP
AND<> @DM2 #0            ; ﾌﾗｯｼｭROM書込完了ｺｰﾄﾞ
SET MR14202              ; 給材上下 Z軸_ﾌﾗｯｼｭﾛﾑ書込み異常
CON
ENDS
;給材上下 Z軸_移動可条件
LD R4314                 ; 給材取る側端
ANB R6308                ; 給材置く側ﾊﾞﾙﾌﾞ
LD R4315                 ; 給材置く側端
ANB R6309                ; 給材取る側ﾊﾞﾙﾌﾞ
AND R4310                ; 除材後退端
ANB R4311                ; 除材前進端
AND R38308               ; ﾕﾆｯﾄ前後 P1 位置　表示
ORL
OUT MR3201               ; 給材上下 Z軸_移動可条件②
;給材上下 Z軸_ﾎﾟｼﾞｼｮﾝ表示
LD CR2002                ; 常時ON
U_RDFPOS.L #2 #2 DM2150  ; 給材上下 Z軸_現在座標読出し
MPS
LDA.D DM2150             ; 給材上下 Z軸_現在座標読出し
CON
STA.D DM2152             ; 給材上下 Z軸_現在座標表示用
MRD
U_RDFVEL.L #2 #2 DM2154  ; 給材上下 Z軸_現在速度表示用
MRD
AND=.L DM2150 DM2112     ; 給材上下 Z軸_現在座標読出し  給材上下 Z軸_P1:位置
OUT R38108               ; 給材上下 Z軸 P1 位置　表示
OUT R61410
MRD
AND=.L DM2150 DM2114     ; 給材上下 Z軸_現在座標読出し  給材上下 Z軸_P2:位置
OUT R38109               ; 給材上下 Z軸 P2 位置　表示
OUT R61408
MPP
AND=.L DM2150 DM2116     ; 給材上下 Z軸_現在座標読出し  給材上下 Z軸_P3:位置
OUT R38110               ; 給材上下 Z軸 P3 位置　表示
OUT R61409
;ﾎﾟｲﾝﾄﾃﾞｰﾀ格納
LD= DM400 #201           ; 現在表示中   画面
OUT MR14015              ; RBﾎﾟｲﾝﾄ設定1画面表示中(TP)
LDB R30204               ; 軸2 軸制御中
OUT R38106               ; 給材上下 Z軸_位置取込み可PL(TP)
CON
OUT R38107               ; 給材上下 Z軸_位置書込み可PL(TP)
LDP R36104               ; 給材上下 Z軸_ﾎﾟｲﾝﾄNo+PB(TP)
AND<= DM2100 #2          ; 給材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
INC DM2100               ; 給材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
LDP R36105               ; 給材上下 Z軸_ﾎﾟｲﾝﾄNo-PB(TP)
AND>= DM2100 #2          ; 給材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
DEC DM2100               ; 給材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
LD> DM2100 #8            ; 給材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
DW #8 DM2100             ; 給材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
LD< DM2100 #1            ; 給材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
DW #1 DM2100             ; 給材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
LD CR2002                ; 常時ON
MPS
AND= DM2100 #1           ; 給材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
OUT @MR2101              ; 給材上下 Z軸_ﾎﾟｲﾝﾄ1表示
MRD
AND= DM2100 #2           ; 給材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
OUT @MR2102              ; 給材上下 Z軸_ﾎﾟｲﾝﾄ2表示
MPP
AND= DM2100 #3           ; 給材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
OUT @MR2103              ; 給材上下 Z軸_ﾎﾟｲﾝﾄ3表示
LD CR2002                ; 常時ON
MPS
ANP @MR2101              ; 給材上下 Z軸_ﾎﾟｲﾝﾄ1表示
LDA.D DM2132             ; 給材上下 Z軸_P1:移動速度
CON
STA.D DM2158             ; 給材上下 Z軸_変更速度表示用
CON
LDA.D DM2112             ; 給材上下 Z軸_P1:位置
CON
STA.D DM2156             ; 給材上下 Z軸_変更位置表示用
MRD
ANP @MR2102              ; 給材上下 Z軸_ﾎﾟｲﾝﾄ2表示
LDA.D DM2134             ; 給材上下 Z軸_P2:移動速度
CON
STA.D DM2158             ; 給材上下 Z軸_変更速度表示用
CON
LDA.D DM2114             ; 給材上下 Z軸_P2:位置
CON
STA.D DM2156             ; 給材上下 Z軸_変更位置表示用
MPP
ANP @MR2103              ; 給材上下 Z軸_ﾎﾟｲﾝﾄ3表示
LDA.D DM2136             ; 給材上下 Z軸_P3:移動速度
CON
STA.D DM2158             ; 給材上下 Z軸_変更速度表示用
CON
LDA.D DM2116             ; 給材上下 Z軸_P3:位置
CON
STA.D DM2156             ; 給材上下 Z軸_変更位置表示用
LD CR2002                ; 常時ON
ANP R36106               ; 給材上下 Z軸_位置取込みPB(TP)
AND R38106               ; 給材上下 Z軸_位置取込み可PL(TP)
MPS
AND= DM2100 #1           ; 給材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
MOV.D DM2112 DM2122      ; 給材上下 Z軸_P1:位置
MOV.D DM20350 DM2112     ; 軸2 現在座標  給材上下 Z軸_P1:位置
MRD
AND= DM2100 #2           ; 給材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
MOV.D DM2114 DM2124      ; 給材上下 Z軸_P2:位置
MOV.D DM20350 DM2114     ; 軸2 現在座標  給材上下 Z軸_P2:位置
MRD
AND= DM2100 #3           ; 給材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
MOV.D DM2116 DM2126      ; 給材上下 Z軸_P3:位置
MOV.D DM20350 DM2116     ; 軸2 現在座標  給材上下 Z軸_P3:位置
MPP
LDA.D DM20350            ; 軸2 現在座標
CON
STA.D DM2156             ; 給材上下 Z軸_変更位置表示用
LD CR2002                ; 常時ON
AND R36107               ; 給材上下 Z軸_位置書込みPB(TP)
AND R38107               ; 給材上下 Z軸_位置書込み可PL(TP)
MPS
AND= DM2100 #1           ; 給材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
LDA.D DM2158             ; 給材上下 Z軸_変更速度表示用
CON
STA.D DM2132             ; 給材上下 Z軸_P1:移動速度
CON
LDA.D DM2156             ; 給材上下 Z軸_変更位置表示用
CON
STA.D DM2112             ; 給材上下 Z軸_P1:位置
MRD
AND= DM2100 #2           ; 給材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
LDA.D DM2158             ; 給材上下 Z軸_変更速度表示用
CON
STA.D DM2134             ; 給材上下 Z軸_P2:移動速度
CON
LDA.D DM2156             ; 給材上下 Z軸_変更位置表示用
CON
STA.D DM2114             ; 給材上下 Z軸_P2:位置
MPP
AND= DM2100 #3           ; 給材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
LDA.D DM2158             ; 給材上下 Z軸_変更速度表示用
CON
STA.D DM2136             ; 給材上下 Z軸_P3:移動速度
CON
LDA.D DM2156             ; 給材上下 Z軸_変更位置表示用
CON
STA.D DM2116             ; 給材上下 Z軸_P3:位置
LD CR2002                ; 常時ON
ANP R36115               ; 書き込みOK SW
LD R38106                ; 給材上下 Z軸_位置取込み可PL(TP)
OR R38107                ; 給材上下 Z軸_位置書込み可PL(TP)
ANL
MPS
AND= DM2100 #1           ; 給材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
UWRIT #2 #18048 DM2112 #2; 給材上下 Z軸_P1:位置
UWRIT #2 #18060 DM2132 #2; 給材上下 Z軸_P1:移動速度
MRD
AND= DM2100 #2           ; 給材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
UWRIT #2 #18560 DM2114 #2; 給材上下 Z軸_P2:位置
UWRIT #2 #18572 DM2134 #2; 給材上下 Z軸_P2:移動速度
MPP
AND= DM2100 #3           ; 給材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
UWRIT #2 #19072 DM2116 #2; 給材上下 Z軸_P3:位置
UWRIT #2 #19084 DM2136 #2; 給材上下 Z軸_P3:移動速度
LD CR2002                ; 常時ON
ANP R36114               ; 位置書込ｷｬﾝｾﾙ
MPS
AND= DM2100 #1           ; 給材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
MOV.D DM2122 DM2112      ; 給材上下 Z軸_P1:位置
LDA.D DM2112             ; 給材上下 Z軸_P1:位置
CON
STA.D DM2156             ; 給材上下 Z軸_変更位置表示用
MRD
AND= DM2100 #2           ; 給材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
MOV.D DM2124 DM2114      ; 給材上下 Z軸_P2:位置
LDA.D DM2114             ; 給材上下 Z軸_P2:位置
CON
STA.D DM2156             ; 給材上下 Z軸_変更位置表示用
MPP
AND= DM2100 #3           ; 給材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
MOV.D DM2126 DM2116      ; 給材上下 Z軸_P3:位置
LDA.D DM2116             ; 給材上下 Z軸_P3:位置
CON
STA.D DM2156             ; 給材上下 Z軸_変更位置表示用
LDP R50001               ; 自動中
ORP R50002               ; ステップ動作中
ORP R50003               ; 原点復帰中
ORP MR14015              ; RBﾎﾟｲﾝﾄ設定1画面表示中(TP)
ORP T200                 ; 動作中遅延
UREAD #2 #18048 DM2112 #2; 給材上下 Z軸_P1:位置
UREAD #2 #18060 DM2132 #2; 給材上下 Z軸_P1:移動速度
UREAD #2 #18560 DM2114 #2; 給材上下 Z軸_P2:位置
UREAD #2 #18572 DM2134 #2; 給材上下 Z軸_P2:移動速度
UREAD #2 #19072 DM2116 #2; 給材上下 Z軸_P3:位置
UREAD #2 #19084 DM2136 #2; 給材上下 Z軸_P3:移動速度
LDF MR14015              ; RBﾎﾟｲﾝﾄ設定1画面表示中(TP)
UWRIT #2 #18048 DM2112 #2; 給材上下 Z軸_P1:位置
UWRIT #2 #18060 DM2132 #2; 給材上下 Z軸_P1:移動速度
UWRIT #2 #18560 DM2114 #2; 給材上下 Z軸_P2:位置
UWRIT #2 #18572 DM2134 #2; 給材上下 Z軸_P2:移動速度
UWRIT #2 #19072 DM2116 #2; 給材上下 Z軸_P3:位置
UWRIT #2 #19084 DM2136 #2; 給材上下 Z軸_P3:移動速度
LDP R37000
ORP MR900                ; 給材P&P X-RB原点復帰要求
ORP R36111               ; 給材P&P Z軸_原点復帰PB(TP)
ANB MR1103               ; RB1原点復帰完了
ANB @MR702
SET R38111               ; 給材P&P Z軸_原点復帰PL(TP)
CON
RES MR1103               ; RB1原点復帰完了
CON
RES MR3010               ; RB2HOME
CON
SET @MR702
STG @MR702
MPS
AND MR1203               ; RB2原点復帰完了
JMP @MR703
MPP
MCALL GENTEN #2 #2 MR3010 R1008 MR1203;RB2HOME  RB2 HOME END  RB2原点復帰完了
STG @MR703
RES MR3010               ; RB2HOME
CON
RES MR1203               ; RB2原点復帰完了
CON
ANB MR1203               ; RB2原点復帰完了
MPS
ANB R50003               ; 原点復帰中
RES R38111               ; 給材P&P Z軸_原点復帰PL(TP)
CON
ENDS
MPP
AND R50003               ; 原点復帰中
SET MR901                ; 給材P&P Z-RB原点復帰完了
CON
ENDS
;<h1/>軸３　除材上下_ﾌﾗｯｼｭﾛﾑ書込み
LDP R36215               ; 書き込みOK SW
@SET @MR1201             ; 除材上下 Z軸_ﾌﾗｯｼｭﾛﾑ書込み
STG @MR1201              ; 除材上下 Z軸_ﾌﾗｯｼｭﾛﾑ書込み
ANB R27812               ; ﾌﾗｯｼｭROM書込完了
SET R26612               ; ﾌﾗｯｼｭROM書込要求
CON
JMP @MR1202
STG @MR1202
AND R27812               ; ﾌﾗｯｼｭROM書込完了
UREAD #2 #105 @DM3 #1    ; ﾌﾗｯｼｭROM書込完了ｺｰﾄﾞ
RES R26612               ; ﾌﾗｯｼｭROM書込要求
CON
JMP @MR1203
STG @MR1203
MPS
AND= @DM3 #0             ; ﾌﾗｯｼｭROM書込完了ｺｰﾄﾞ
ENDS
MPP
AND<> @DM3 #0            ; ﾌﾗｯｼｭROM書込完了ｺｰﾄﾞ
SET MR14402              ; 除材上下 Z軸_ﾌﾗｯｼｭﾛﾑ書込み異常
CON
ENDS
;除材上下 Z軸_移動可条件
LD R4312                 ; 除材置く側端
ANB R6306                ; 除材取る側ﾊﾞﾙﾌﾞ
AND R4310                ; 除材後退端
LD R4313                 ; 除材取る側端
ANB R6307                ; 除材置く側ﾊﾞﾙﾌﾞ
AND R4311                ; 除材前進端
ORL
OUT MR3401               ; 除材上下 Z軸_移動可条件②
;除材上下 Z軸_ﾎﾟｼﾞｼｮﾝ表示
LD CR2002                ; 常時ON
U_RDFPOS.L #2 #3 DM2250  ; 除材上下 Z軸_現在座標読出し
MPS
LDA.D DM2250             ; 除材上下 Z軸_現在座標読出し
CON
STA.D DM2252             ; 除材上下 Z軸_現在座標表示用
MRD
U_RDFVEL.L #2 #3 DM2254  ; 除材上下 Z軸_現在速度表示用
MRD
AND=.L DM2250 DM2212     ; 除材上下 Z軸_現在座標読出し  除材上下 Z軸_P1:位置
OUT R38208               ; 除材上下 Z軸 P1 位置　表示
OUT R61510
MRD
AND=.L DM2250 DM2214     ; 除材上下 Z軸_現在座標読出し  除材上下 Z軸_P2:位置
OUT R38209               ; 除材上下 Z軸 P2 位置　表示
OUT R61508
MPP
AND=.L DM2250 DM2216     ; 除材上下 Z軸_現在座標読出し  除材上下 Z軸_P3:位置
OUT R38210               ; 除材上下 Z軸 P3 位置　表示
OUT R61509
;ﾎﾟｲﾝﾄﾃﾞｰﾀ格納
LD= DM400 #202           ; 現在表示中   画面
OUT MR14415              ; RBﾎﾟｲﾝﾄ設定1画面表示中(TP)
LDB R31004               ; 軸3 軸制御中
OUT R38206               ; 除材上下 Z軸_位置取込み可PL(TP)
CON
OUT R38207               ; 除材上下 Z軸_位置書込み可PL(TP)
LDP R36204               ; 除材上下 Z軸_ﾎﾟｲﾝﾄNo+PB(TP)
AND<= DM2200 #2          ; 除材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
INC DM2200               ; 除材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
LDP R36205               ; 除材上下 Z軸_ﾎﾟｲﾝﾄNo-PB(TP)
AND>= DM2200 #2          ; 除材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
DEC DM2200               ; 除材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
LD> DM2200 #8            ; 除材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
DW #8 DM2200             ; 除材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
LD< DM2200 #1            ; 除材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
DW #1 DM2200             ; 除材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
LD CR2002                ; 常時ON
MPS
AND= DM2200 #1           ; 除材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
OUT @MR1601              ; 除材上下 Z軸_ﾎﾟｲﾝﾄ1表示
MRD
AND= DM2200 #2           ; 除材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
OUT @MR1602              ; 除材上下 Z軸_ﾎﾟｲﾝﾄ2表示
MPP
AND= DM2200 #3           ; 除材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
OUT @MR1603              ; 除材上下 Z軸_ﾎﾟｲﾝﾄ3表示
LD CR2002                ; 常時ON
MPS
ANP @MR1601              ; 除材上下 Z軸_ﾎﾟｲﾝﾄ1表示
LDA.D DM2232             ; 除材上下 Z軸_P1:移動速度
CON
STA.D DM2258             ; 除材上下 Z軸_変更速度表示用
CON
LDA.D DM2212             ; 除材上下 Z軸_P1:位置
CON
STA.D DM2256             ; 除材上下 Z軸_変更位置表示用
MRD
ANP @MR1602              ; 除材上下 Z軸_ﾎﾟｲﾝﾄ2表示
LDA.D DM2234             ; 除材上下 Z軸_P2:移動速度
CON
STA.D DM2258             ; 除材上下 Z軸_変更速度表示用
CON
LDA.D DM2214             ; 除材上下 Z軸_P2:位置
CON
STA.D DM2256             ; 除材上下 Z軸_変更位置表示用
MPP
ANP @MR1603              ; 除材上下 Z軸_ﾎﾟｲﾝﾄ3表示
LDA.D DM2236             ; 除材上下 Z軸_P3:移動速度
CON
STA.D DM2258             ; 除材上下 Z軸_変更速度表示用
CON
LDA.D DM2216             ; 除材上下 Z軸_P3:位置
CON
STA.D DM2256             ; 除材上下 Z軸_変更位置表示用
LD CR2002                ; 常時ON
ANP R36206               ; 除材上下 Z軸_位置取込みPB(TP)
AND R38206               ; 除材上下 Z軸_位置取込み可PL(TP)
MPS
AND= DM2200 #1           ; 除材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
MOV.D DM2212 DM2222      ; 除材上下 Z軸_P1:位置
MOV.D DM20410 DM2212     ; 軸3 現在座標  除材上下 Z軸_P1:位置
MRD
AND= DM2200 #2           ; 除材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
MOV.D DM2214 DM2224      ; 除材上下 Z軸_P2:位置
MOV.D DM20410 DM2214     ; 軸3 現在座標  除材上下 Z軸_P2:位置
MRD
AND= DM2200 #3           ; 除材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
MOV.D DM2216 DM2226      ; 除材上下 Z軸_P3:位置
MOV.D DM20410 DM2216     ; 軸3 現在座標  除材上下 Z軸_P3:位置
MPP
LDA.D DM20410            ; 軸3 現在座標
CON
STA.D DM2256             ; 除材上下 Z軸_変更位置表示用
LD CR2002                ; 常時ON
AND R36207               ; 除材上下 Z軸_位置書込みPB(TP)
AND R38207               ; 除材上下 Z軸_位置書込み可PL(TP)
MPS
AND= DM2200 #1           ; 除材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
LDA.D DM2258             ; 除材上下 Z軸_変更速度表示用
CON
STA.D DM2232             ; 除材上下 Z軸_P1:移動速度
CON
LDA.D DM2256             ; 除材上下 Z軸_変更位置表示用
CON
STA.D DM2212             ; 除材上下 Z軸_P1:位置
MRD
AND= DM2200 #2           ; 除材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
LDA.D DM2258             ; 除材上下 Z軸_変更速度表示用
CON
STA.D DM2234             ; 除材上下 Z軸_P2:移動速度
CON
LDA.D DM2256             ; 除材上下 Z軸_変更位置表示用
CON
STA.D DM2214             ; 除材上下 Z軸_P2:位置
MPP
AND= DM2200 #3           ; 除材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
LDA.D DM2258             ; 除材上下 Z軸_変更速度表示用
CON
STA.D DM2236             ; 除材上下 Z軸_P3:移動速度
CON
LDA.D DM2256             ; 除材上下 Z軸_変更位置表示用
CON
STA.D DM2216             ; 除材上下 Z軸_P3:位置
LD CR2002                ; 常時ON
ANP R36215               ; 書き込みOK SW
LD R38206                ; 除材上下 Z軸_位置取込み可PL(TP)
OR R38207                ; 除材上下 Z軸_位置書込み可PL(TP)
ANL
MPS
AND= DM2200 #1           ; 除材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
UWRIT #2 #18080 DM2212 #2; 除材上下 Z軸_P1:位置
UWRIT #2 #18092 DM2232 #2; 除材上下 Z軸_P1:移動速度
MRD
AND= DM2200 #2           ; 除材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
UWRIT #2 #18592 DM2214 #2; 除材上下 Z軸_P2:位置
UWRIT #2 #18604 DM2234 #2; 除材上下 Z軸_P2:移動速度
MPP
AND= DM2200 #3           ; 除材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
UWRIT #2 #19104 DM2216 #2; 除材上下 Z軸_P3:位置
UWRIT #2 #19116 DM2236 #2; 除材上下 Z軸_P3:移動速度
LD CR2002                ; 常時ON
ANP R36214               ; 除材位置書込ｷｬﾝｾﾙ
MPS
AND= DM2200 #1           ; 除材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
MOV.D DM2222 DM2212      ; 除材上下 Z軸_P1:位置
LDA.D DM2212             ; 除材上下 Z軸_P1:位置
CON
STA.D DM2256             ; 除材上下 Z軸_変更位置表示用
MRD
AND= DM2200 #2           ; 除材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
MOV.D DM2224 DM2214      ; 除材上下 Z軸_P2:位置
LDA.D DM2214             ; 除材上下 Z軸_P2:位置
CON
STA.D DM2256             ; 除材上下 Z軸_変更位置表示用
MPP
AND= DM2200 #3           ; 除材上下 Z軸_ﾎﾟｲﾝﾄNo(TP)
MOV.D DM2226 DM2216      ; 除材上下 Z軸_P3:位置
LDA.D DM2216             ; 除材上下 Z軸_P3:位置
CON
STA.D DM2256             ; 除材上下 Z軸_変更位置表示用
LDP R50001               ; 自動中
ORP R50002               ; ステップ動作中
ORP R50003               ; 原点復帰中
ORP MR14415              ; RBﾎﾟｲﾝﾄ設定1画面表示中(TP)
ORP T200                 ; 動作中遅延
UREAD #2 #18080 DM2212 #2; 除材上下 Z軸_P1:位置
UREAD #2 #18092 DM2232 #2; 除材上下 Z軸_P1:移動速度
UREAD #2 #18592 DM2214 #2; 除材上下 Z軸_P2:位置
UREAD #2 #18604 DM2234 #2; 除材上下 Z軸_P2:移動速度
UREAD #2 #19104 DM2216 #2; 除材上下 Z軸_P3:位置
UREAD #2 #19116 DM2236 #2; 除材上下 Z軸_P3:移動速度
LDF MR14415              ; RBﾎﾟｲﾝﾄ設定1画面表示中(TP)
UWRIT #2 #18080 DM2212 #2; 除材上下 Z軸_P1:位置
UWRIT #2 #18092 DM2232 #2; 除材上下 Z軸_P1:移動速度
UWRIT #2 #18592 DM2214 #2; 除材上下 Z軸_P2:位置
UWRIT #2 #18604 DM2234 #2; 除材上下 Z軸_P2:移動速度
UWRIT #2 #19104 DM2216 #2; 除材上下 Z軸_P3:位置
UWRIT #2 #19116 DM2236 #2; 除材上下 Z軸_P3:移動速度
LDP R37000
ORP MR902                ; 除材P&P Z-RB原点復帰要求
ORP R36211               ; 除材P&P Z軸_原点復帰PB(TP)
ANB MR1303               ; RB3原点復帰完了
ANB @MR705
SET R38211               ; 除材P&P Z軸_原点復帰PL(TP)
CON
RES MR1303               ; RB3原点復帰完了
CON
RES MR3012               ; RB3HOME
CON
SET @MR704
STG @MR704
MPS
AND MR1303               ; RB3原点復帰完了
JMP @MR705
MPP
MCALL GENTEN #2 #3 MR3012 R1009 MR1303;RB3HOME  RB3 HOME END  RB3原点復帰完了
STG @MR705
RES MR1303               ; RB3原点復帰完了
CON
RES MR3012               ; RB3HOME
CON
ANB MR1303               ; RB3原点復帰完了
MPS
ANB R50003               ; 原点復帰中
RES R38211               ; 除材P&P Z軸_原点復帰PL(TP)
CON
ENDS
MPP
AND R50003               ; 原点復帰中
SET MR903                ; 除材P&P Z-RB原点復帰完了
CON
ENDS
;<h1/>軸４　ﾕﾆｯﾄ前後_ﾌﾗｯｼｭﾛﾑ書込み
LDP R36315               ; 書き込みOK SW
@SET @MR1301             ; ﾕﾆｯﾄ前後_ﾌﾗｯｼｭﾛﾑ書込み
STG @MR1301              ; ﾕﾆｯﾄ前後_ﾌﾗｯｼｭﾛﾑ書込み
ANB R27812               ; ﾌﾗｯｼｭROM書込完了
SET R26612               ; ﾌﾗｯｼｭROM書込要求
CON
JMP @MR1302
STG @MR1302
AND R27812               ; ﾌﾗｯｼｭROM書込完了
UREAD #2 #105 @DM4 #1    ; ﾌﾗｯｼｭROM書込完了ｺｰﾄﾞ
RES R26612               ; ﾌﾗｯｼｭROM書込要求
CON
JMP @MR1303
STG @MR1303
MPS
AND= @DM4 #0             ; ﾌﾗｯｼｭROM書込完了ｺｰﾄﾞ
ENDS
MPP
AND<> @DM4 #0            ; ﾌﾗｯｼｭROM書込完了ｺｰﾄﾞ
SET MR14602              ; ﾕﾆｯﾄ前後_ﾌﾗｯｼｭﾛﾑ書込み異常
CON
ENDS
;ﾕﾆｯﾄ前後_移動可条件
LDB R4314                ; 給材取る側端
AND R38108               ; 給材上下 Z軸 P1 位置　表示
OR R4314                 ; 給材取る側端
LD R4313                 ; 除材取る側端
AND R38208               ; 除材上下 Z軸 P1 位置　表示
ORB R4313                ; 除材取る側端
ANL
LD R4212                 ; 圧着ﾍｯﾄﾞ上昇端
OR R4215                 ; 圧着ﾍｯﾄﾞ待機上昇端
ANL
AND R4200                ; 貼付ﾕﾆｯﾄ下降端
OUT MR3601               ; ﾕﾆｯﾄ前後_移動可条件②
;ﾕﾆｯﾄ前後_ﾎﾟｼﾞｼｮﾝ表示
LD CR2002                ; 常時ON
U_RDFPOS.L #2 #4 DM2350  ; ﾕﾆｯﾄ前後_現在座標読出し
MPS
LDA.D DM2350             ; ﾕﾆｯﾄ前後_現在座標読出し
CON
STA.D DM2352             ; ﾕﾆｯﾄ前後_現在座標表示用
MRD
U_RDFVEL.L #2 #4 DM2354  ; ﾕﾆｯﾄ前後_現在速度表示用
MRD
AND=.L DM2350 DM2312     ; ﾕﾆｯﾄ前後_現在座標読出し  ﾕﾆｯﾄ前後_P1:位置
OUT R38308               ; ﾕﾆｯﾄ前後 P1 位置　表示
OUT R61701
MPP
AND=.L DM2350 DM2314     ; ﾕﾆｯﾄ前後_現在座標読出し  ﾕﾆｯﾄ前後_P2:位置
OUT R38309               ; ﾕﾆｯﾄ前後 P2 位置　表示
OUT R61700
;ﾎﾟｲﾝﾄﾃﾞｰﾀ格納
LD= DM400 #203           ; 現在表示中   画面
OUT MR14415              ; RBﾎﾟｲﾝﾄ設定1画面表示中(TP)
LDB R31804               ; 軸4 軸制御中
OUT R38306               ; ﾕﾆｯﾄ前後_位置取込み可PL(TP)
CON
OUT R38307               ; ﾕﾆｯﾄ前後_位置書込み可PL(TP)
LDP R36304               ; ﾕﾆｯﾄ前後_ﾎﾟｲﾝﾄNo+PB(TP)
AND= DM2300 #1           ; ﾕﾆｯﾄ前後_ﾎﾟｲﾝﾄNo(TP)
INC DM2300               ; ﾕﾆｯﾄ前後_ﾎﾟｲﾝﾄNo(TP)
LDP R36305               ; ﾕﾆｯﾄ前後_ﾎﾟｲﾝﾄNo-PB(TP)
AND= DM2300 #2           ; ﾕﾆｯﾄ前後_ﾎﾟｲﾝﾄNo(TP)
DEC DM2300               ; ﾕﾆｯﾄ前後_ﾎﾟｲﾝﾄNo(TP)
LD> DM2300 #8            ; ﾕﾆｯﾄ前後_ﾎﾟｲﾝﾄNo(TP)
DW #8 DM2300             ; ﾕﾆｯﾄ前後_ﾎﾟｲﾝﾄNo(TP)
LD< DM2300 #1            ; ﾕﾆｯﾄ前後_ﾎﾟｲﾝﾄNo(TP)
DW #1 DM2300             ; ﾕﾆｯﾄ前後_ﾎﾟｲﾝﾄNo(TP)
LD CR2002                ; 常時ON
MPS
AND= DM2300 #1           ; ﾕﾆｯﾄ前後_ﾎﾟｲﾝﾄNo(TP)
OUT @MR1701              ; ﾕﾆｯﾄ前後_ﾎﾟｲﾝﾄ1表示
MPP
AND= DM2300 #2           ; ﾕﾆｯﾄ前後_ﾎﾟｲﾝﾄNo(TP)
OUT @MR1702              ; ﾕﾆｯﾄ前後_ﾎﾟｲﾝﾄ2表示
LD CR2002                ; 常時ON
MPS
ANP @MR1701              ; ﾕﾆｯﾄ前後_ﾎﾟｲﾝﾄ1表示
LDA.D DM2332             ; ﾕﾆｯﾄ前後_P1:移動速度
CON
STA.D DM2358             ; ﾕﾆｯﾄ前後_変更速度表示用
CON
LDA.D DM2312             ; ﾕﾆｯﾄ前後_P1:位置
CON
STA.D DM2356             ; ﾕﾆｯﾄ前後_変更位置表示用
MPP
ANP @MR1702              ; ﾕﾆｯﾄ前後_ﾎﾟｲﾝﾄ2表示
LDA.D DM2334             ; ﾕﾆｯﾄ前後_P2:移動速度
CON
STA.D DM2358             ; ﾕﾆｯﾄ前後_変更速度表示用
CON
LDA.D DM2314             ; ﾕﾆｯﾄ前後_P2:位置
CON
STA.D DM2356             ; ﾕﾆｯﾄ前後_変更位置表示用
LD CR2002                ; 常時ON
ANP R36306               ; 移載P&P Z軸_位置取込みPB(TP)
AND R38306               ; ﾕﾆｯﾄ前後_位置取込み可PL(TP)
MPS
AND= DM2300 #1           ; ﾕﾆｯﾄ前後_ﾎﾟｲﾝﾄNo(TP)
MOV.D DM2312 DM2322      ; ﾕﾆｯﾄ前後_P1:位置
MOV.D DM20470 DM2312     ; 軸4 現在座標  ﾕﾆｯﾄ前後_P1:位置
MRD
AND= DM2300 #2           ; ﾕﾆｯﾄ前後_ﾎﾟｲﾝﾄNo(TP)
MOV.D DM2314 DM2324      ; ﾕﾆｯﾄ前後_P2:位置
MOV.D DM20470 DM2314     ; 軸4 現在座標  ﾕﾆｯﾄ前後_P2:位置
MPP
LDA.D DM20470            ; 軸4 現在座標
CON
STA.D DM2356             ; ﾕﾆｯﾄ前後_変更位置表示用
LD CR2002                ; 常時ON
AND R36307               ; ﾕﾆｯﾄ前後_位置書込みPB(TP)
AND R38307               ; ﾕﾆｯﾄ前後_位置書込み可PL(TP)
MPS
AND= DM2300 #1           ; ﾕﾆｯﾄ前後_ﾎﾟｲﾝﾄNo(TP)
LDA.D DM2358             ; ﾕﾆｯﾄ前後_変更速度表示用
CON
STA.D DM2332             ; ﾕﾆｯﾄ前後_P1:移動速度
CON
LDA.D DM2356             ; ﾕﾆｯﾄ前後_変更位置表示用
CON
STA.D DM2312             ; ﾕﾆｯﾄ前後_P1:位置
MPP
AND= DM2300 #2           ; ﾕﾆｯﾄ前後_ﾎﾟｲﾝﾄNo(TP)
LDA.D DM2358             ; ﾕﾆｯﾄ前後_変更速度表示用
CON
STA.D DM2334             ; ﾕﾆｯﾄ前後_P2:移動速度
CON
LDA.D DM2356             ; ﾕﾆｯﾄ前後_変更位置表示用
CON
STA.D DM2314             ; ﾕﾆｯﾄ前後_P2:位置
LD CR2002                ; 常時ON
ANP R36315               ; 書き込みOK SW
LD R38306                ; ﾕﾆｯﾄ前後_位置取込み可PL(TP)
OR R38307                ; ﾕﾆｯﾄ前後_位置書込み可PL(TP)
ANL
MPS
AND= DM2300 #1           ; ﾕﾆｯﾄ前後_ﾎﾟｲﾝﾄNo(TP)
UWRIT #2 #18112 DM2312 #2; ﾕﾆｯﾄ前後_P1:位置
UWRIT #2 #18124 DM2332 #2; ﾕﾆｯﾄ前後_P1:移動速度
MPP
AND= DM2300 #2           ; ﾕﾆｯﾄ前後_ﾎﾟｲﾝﾄNo(TP)
UWRIT #2 #18624 DM2314 #2; ﾕﾆｯﾄ前後_P2:位置
UWRIT #2 #18636 DM2334 #2; ﾕﾆｯﾄ前後_P2:移動速度
LD CR2002                ; 常時ON
ANP R36314               ; 書き込みｷｬﾝｾﾙ SW
MPS
AND= DM2300 #1           ; ﾕﾆｯﾄ前後_ﾎﾟｲﾝﾄNo(TP)
MOV.D DM2322 DM2312      ; ﾕﾆｯﾄ前後_P1:位置
LDA.D DM2312             ; ﾕﾆｯﾄ前後_P1:位置
CON
STA.D DM2356             ; ﾕﾆｯﾄ前後_変更位置表示用
MPP
AND= DM2300 #2           ; ﾕﾆｯﾄ前後_ﾎﾟｲﾝﾄNo(TP)
MOV.D DM2324 DM2314      ; ﾕﾆｯﾄ前後_P2:位置
LDA.D DM2314             ; ﾕﾆｯﾄ前後_P2:位置
CON
STA.D DM2356             ; ﾕﾆｯﾄ前後_変更位置表示用
LDP R50001               ; 自動中
ORP R50002               ; ステップ動作中
ORP R50003               ; 原点復帰中
ORP MR14415              ; RBﾎﾟｲﾝﾄ設定1画面表示中(TP)
ORP T200                 ; 動作中遅延
UREAD #2 #18112 DM2312 #2; ﾕﾆｯﾄ前後_P1:位置
UREAD #2 #18124 DM2332 #2; ﾕﾆｯﾄ前後_P1:移動速度
UREAD #2 #18624 DM2314 #2; ﾕﾆｯﾄ前後_P2:位置
UREAD #2 #18636 DM2334 #2; ﾕﾆｯﾄ前後_P2:移動速度
LDF MR14415              ; RBﾎﾟｲﾝﾄ設定1画面表示中(TP)
UWRIT #2 #18112 DM2312 #2; ﾕﾆｯﾄ前後_P1:位置
UWRIT #2 #18124 DM2332 #2; ﾕﾆｯﾄ前後_P1:移動速度
UWRIT #2 #18624 DM2314 #2; ﾕﾆｯﾄ前後_P2:位置
UWRIT #2 #18636 DM2334 #2; ﾕﾆｯﾄ前後_P2:移動速度
LDP R37000
ORP MR904                ; 貼付ﾕﾆｯﾄ Y-RB原点復帰要求
ORP R36311               ; 移載P&P Z軸_原点復帰PB(TP)
ANB MR1403               ; RB4原点復帰完了
ANB @MR707
SET R38311               ; 移載P&P Z軸_原点復帰PL(TP)
CON
RES MR1403               ; RB4原点復帰完了
CON
RES MR3014               ; RB4HOME
CON
SET @MR706
STG @MR706
MPS
AND MR1403               ; RB4原点復帰完了
JMP @MR707
MPP
MCALL GENTEN #2 #4 MR3014 R1010 MR1403;RB4HOME  RB4 HOME END  RB4原点復帰完了
STG @MR707
RES MR1403               ; RB4原点復帰完了
CON
RES MR3014               ; RB4HOME
CON
ANB MR1403               ; RB4原点復帰完了
MPS
ANB R50003               ; 原点復帰中
RES R38311               ; 移載P&P Z軸_原点復帰PL(TP)
CON
ENDS
MPP
AND R50003               ; 原点復帰中
SET MR905                ; 貼付ﾕﾆｯﾄ Y-RB原点復帰完了
CON
ENDS
;ACF送りﾓｰﾀ / ACF sending motor
LDP R42406               ; 位置決ﾃﾞｰﾀ書込み
MOV.D DM542 CM2070       ; ACF送り量  ﾎﾟｲﾝﾄ1 目標値/移動量
;ｲﾝﾀｰﾛｯｸ覚書
;RB1 受渡ｴﾘｱ：MR1112　　　ﾄﾚｲ排出ｴﾘｱ：MR1113　　　ﾄﾚｲ供給ｴﾘｱ：MR1114
;RB2 ﾄﾚｲ受渡ｴﾘｱ：MR1214
;RB3 受取ｴﾘｱ：MR1313　　　受渡ｴﾘｱ：MR1314　　　
;RB4 受取ｴﾘｱ：MR1412　　　圧着ｴﾘｱ：MR1413
;現在座標　RB1:DM12290    RB2:DM12350    RB3:DM12410    RB4:DM12470
;軸制御中　RB1:R24404     RB2:R25204     RB3:R26004     RB4:R26804    
;
;Interlock
;
;RB4移動中ｴﾘｱ遮光処理 / Pause process when area sensor shade.
;Jog Interlock
;
;Jog write Interlock
;
;PACK
LDB R24404               ; 軸1 軸制御中
ANB R26004               ; 軸5 現在座標変更完了
ANB R26804               ; ｶｳﾝﾀ2 入力禁止
ANB MR3009               ; 1ZEROST
ANB MR3012               ; RB3HOME
ANB MR3014               ; RB4HOME
INV
OUT R50611               ; Pack RB
;ﾄﾚｲ取出し番号管理 / Tray Pick up No. Check
END
ENDH
