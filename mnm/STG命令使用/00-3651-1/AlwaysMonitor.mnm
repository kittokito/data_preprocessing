DEVICE:53
;MODULE:AlwaysMonitor
;MODULE_TYPE:0
;OneSystem Sub-Module
;
;---------------------------------------
;ModuleName	:	AlwaysMonitor
;ModuleType	:	Sub Module
;Function	:	常時監視
;---------------------------------------
;<使用方法>
;常時監視が必要な物は本ﾓｼﾞｭｰﾙ内に記述して下さい
;・ﾋｰﾀｰ過昇温検知による非常停止
;・ﾁｬﾝﾊﾞｰ排気量低下によるｴﾗｰ出力
;など
;<h1/>先頭
;RB1ｱﾌﾞｿﾊﾞｯﾃﾘｴﾗｰ
LD DM10507.3
LD= DM10506 $00EE        ; RB1 ｱﾗｰﾑｺｰﾄﾞ
OR= DM10506 $00EF        ; RB1 ｱﾗｰﾑｺｰﾄﾞ
ANL
MSTRT WARNING_DISP #1 #1 #1 #1
LDF DM10507.3
MSTRT WARNING_DEL #1 #1
;RB2ｱﾌﾞｿﾊﾞｯﾃﾘｴﾗｰ
LD DM10515.3
LD= DM10514 $00EE        ; RB2 ｱﾗｰﾑｺｰﾄﾞ
OR= DM10514 $00EF        ; RB2 ｱﾗｰﾑｺｰﾄﾞ
ANL
MSTRT WARNING_DISP #1 #2 #1 #1
LDF DM10515.3
MSTRT WARNING_DEL #1 #2
;RB3ｱﾌﾞｿﾊﾞｯﾃﾘｴﾗｰ
LD DM10523.3
LD= DM10522 $00EE        ; RB3 ｱﾗｰﾑｺｰﾄﾞ
OR= DM10522 $00EF        ; RB3 ｱﾗｰﾑｺｰﾄﾞ
ANL
MSTRT WARNING_DISP #1 #3 #1 #1
LDF DM10523.3
MSTRT WARNING_DEL #1 #3
;RB4ｱﾌﾞｿﾊﾞｯﾃﾘｴﾗｰ
LD DM10531.3
LD= DM10530 $00EE        ; RB4 ｱﾗｰﾑｺｰﾄﾞ
OR= DM10530 $00EF        ; RB4 ｱﾗｰﾑｺｰﾄﾞ
ANL
MSTRT WARNING_DISP #1 #4 #1 #1
LDF DM10531.3
MSTRT WARNING_DEL #1 #4
;RB5ｱﾌﾞｿﾊﾞｯﾃﾘｴﾗｰ
LD DM10539.3
LD= DM10538 $00EE        ; RB5 ｱﾗｰﾑｺｰﾄﾞ
OR= DM10538 $00EF        ; RB5 ｱﾗｰﾑｺｰﾄﾞ
ANL
MSTRT WARNING_DISP #1 #5 #1 #1
LDF DM10539.3
MSTRT WARNING_DEL #1 #5
;RB6ｱﾌﾞｿﾊﾞｯﾃﾘｴﾗｰ
LD DM10547.3
LD= DM10546 $00EE        ; RB6 ｱﾗｰﾑｺｰﾄﾞ
OR= DM10546 $00EF        ; RB6 ｱﾗｰﾑｺｰﾄﾞ
ANL
MSTRT WARNING_DISP #1 #6 #1 #1
LDF DM10547.3
MSTRT WARNING_DEL #1 #6
;RB1ｲﾝﾀｰﾛｯｸ
LDB R4300                ; 段ﾊﾞﾗｼ上下ｽﾗｲﾄﾞ1(左奥) ﾄﾚｲ保持
AND R4301                ; 段ﾊﾞﾗｼ上下ｽﾗｲﾄﾞ1(左奥) 戻し側
ANB R4302                ; 段ﾊﾞﾗｼ上下ｽﾗｲﾄﾞ2(右奥) ﾄﾚｲ保持
AND R4303                ; 段ﾊﾞﾗｼ上下ｽﾗｲﾄﾞ2(右奥) 戻し側
ANB R4304                ; 段ﾊﾞﾗｼ上下ｽﾗｲﾄﾞ3(左前) ﾄﾚｲ保持
AND R4305                ; 段ﾊﾞﾗｼ上下ｽﾗｲﾄﾞ3(左前) 戻し側
ANB R4306                ; 段ﾊﾞﾗｼ上下ｽﾗｲﾄﾞ4(右前) ﾄﾚｲ保持
AND R4307                ; 段ﾊﾞﾗｼ上下ｽﾗｲﾄﾞ4(右前) 戻し側
OUT @MR001               ; 段ﾊﾞﾗｼ部干渉無し
LD MR16312               ; 受取PP_Y軸_ﾊﾟﾚﾀｲｽﾞ範囲外
OR MR16411               ; 受取PP_Z軸_ﾊﾟﾚﾀｲｽﾞ範囲外
OR MR16300               ; 受取PP_Y軸_Pos#1
OUT @MR002               ; 受渡しP&P干渉無し
LDB R4100                ; ﾄﾚｲ押さえ(左奥)下降
AND R4101                ; ﾄﾚｲ押さえ(左奥)上昇
ANB R4102                ; ﾄﾚｲ押さえ(右奥)下降
AND R4103                ; ﾄﾚｲ押さえ(右奥)上昇
ANB R4104                ; ﾄﾚｲ押さえ(左前)下降
AND R4105                ; ﾄﾚｲ押さえ(左前)上昇
ANB R4106                ; ﾄﾚｲ押さえ(右前)下降
AND R4107                ; ﾄﾚｲ押さえ(右前)上昇
OUT @MR003               ; ﾄﾚｲ押さえ干渉無し
LDB R4200                ; ﾄﾚｲﾁｬｯｸ1(左奥)閉限
AND R4201                ; ﾄﾚｲﾁｬｯｸ1(左奥)開限
ANB R4202                ; ﾄﾚｲﾁｬｯｸ2(右奥)閉限
AND R4203                ; ﾄﾚｲﾁｬｯｸ2(右奥)開限
ANB R4204                ; ﾄﾚｲﾁｬｯｸ3(左前)閉限
AND R4205                ; ﾄﾚｲﾁｬｯｸ3(左前)開限
ANB R4206                ; ﾄﾚｲﾁｬｯｸ4(右前)閉限
AND R4207                ; ﾄﾚｲﾁｬｯｸ4(右前)開限
OUT @MR004               ; ﾄﾚｲﾁｬｯｸ開き
LDB R4208                ; ﾄﾚｲﾁｬｯｸｽﾗｲﾄﾞ1(左奥) ﾄﾚｲ保持側
AND R4209                ; ﾄﾚｲﾁｬｯｸｽﾗｲﾄﾞ1(左奥) 戻し側
ANB R4210                ; ﾄﾚｲﾁｬｯｸｽﾗｲﾄﾞ2(右奥) ﾄﾚｲ保持側
AND R4211                ; ﾄﾚｲﾁｬｯｸｽﾗｲﾄﾞ2(右奥) 戻し側
ANB R4212                ; ﾄﾚｲﾁｬｯｸｽﾗｲﾄﾞ3(左前) ﾄﾚｲ保持側
AND R4213                ; ﾄﾚｲﾁｬｯｸｽﾗｲﾄﾞ3(左前) 戻し側
ANB R4214                ; ﾄﾚｲﾁｬｯｸｽﾗｲﾄﾞ4(右前) ﾄﾚｲ保持側
AND R4215                ; ﾄﾚｲﾁｬｯｸｽﾗｲﾄﾞ4(右前) 戻し側
OUT @MR005               ; ﾄﾚｲﾁｬｯｸ戻し
LD @MR002                ; 受渡しP&P干渉無し
AND @MR003               ; ﾄﾚｲ押さえ干渉無し
ANB MR10314              ; T2_取出_Busy
LDB MR16502              ; 除材ｴﾚﾍﾞｰﾀ_Pos#12
OR<> EM1300 #2           ; RB1 TargetPos
ANL
LD<> EM1300 #1           ; RB1 TargetPos
LD= EM1300 #1            ; RB1 TargetPos
LD R4403                 ; 給材側 段ﾊﾞﾗｼ上昇ﾄﾚｲ有無(遮光ON
LD MR16011               ; ﾄﾚｲ搬送_段ﾊﾞﾗｼ範囲外
AND @MR004               ; ﾄﾚｲﾁｬｯｸ開き
AND @MR005               ; ﾄﾚｲﾁｬｯｸ戻し
ORB MR16011              ; ﾄﾚｲ搬送_段ﾊﾞﾗｼ範囲外
ANL
ORB R4403                ; 給材側 段ﾊﾞﾗｼ上昇ﾄﾚｲ有無(遮光ON
ANL
ORL
ANL
AND R007                 ; 安全ｶﾊﾞｰ
LD MR16211               ; 給材ｴﾚﾍﾞｰﾀ_段ﾊﾞﾗｼ範囲外
LD<> EM1300 #1           ; RB1 TargetPos
AND MR16011              ; ﾄﾚｲ搬送_段ﾊﾞﾗｼ範囲外
ORL
OR @MR005                ; ﾄﾚｲﾁｬｯｸ戻し
ANL
LD MR16511               ; 除材ｴﾚﾍﾞｰﾀ_段積み範囲外
LD<> EM1300 #2           ; RB1 TargetPos
AND MR16012              ; ﾄﾚｲ搬送_段積み範囲外
ORL
ANL
OUT MR3000               ; RB1 起動IL ON=起動可能
;RB2ｲﾝﾀｰﾛｯｸ
LDB R4300                ; 段ﾊﾞﾗｼ上下ｽﾗｲﾄﾞ1(左奥) ﾄﾚｲ保持
AND R4301                ; 段ﾊﾞﾗｼ上下ｽﾗｲﾄﾞ1(左奥) 戻し側
ANB R4302                ; 段ﾊﾞﾗｼ上下ｽﾗｲﾄﾞ2(右奥) ﾄﾚｲ保持
AND R4303                ; 段ﾊﾞﾗｼ上下ｽﾗｲﾄﾞ2(右奥) 戻し側
ANB R4304                ; 段ﾊﾞﾗｼ上下ｽﾗｲﾄﾞ3(左前) ﾄﾚｲ保持
AND R4305                ; 段ﾊﾞﾗｼ上下ｽﾗｲﾄﾞ3(左前) 戻し側
ANB R4306                ; 段ﾊﾞﾗｼ上下ｽﾗｲﾄﾞ4(右前) ﾄﾚｲ保持
AND R4307                ; 段ﾊﾞﾗｼ上下ｽﾗｲﾄﾞ4(右前) 戻し側
OUT @MR100               ; 段ﾊﾞﾗｼ部干渉無し
LD R4405                 ; 給材側 ﾄﾚｲ押込確認ｾﾝｻ(遮光ON)
LD @MR100                ; 段ﾊﾞﾗｼ部干渉無し
OR MR10012               ; 段ﾊﾞﾗｼ中
OR= EM1302 #1            ; RB2 Target Pos
OR= EM1302 #20           ; RB2 Target Pos
ANL
LD MR16212               ; 給材ｴﾚﾍﾞｰﾀ_ﾄﾚｲｻｰﾁ許可範囲
ORB MR22103              ; TPSW_RB2 ﾄﾚｲｻｰﾁTP
ANL
LD MR10401               ; 給材ｴﾚﾍﾞｰﾀ_ﾄﾚｲｻｰﾁ完了_Flg
OR MR22103               ; TPSW_RB2 ﾄﾚｲｻｰﾁTP
OR= EM1302 #1            ; RB2 Target Pos
OR= EM1302 #20           ; RB2 Target Pos
ANL
LD<> EM1302 #12          ; RB2 Target Pos
LD= EM1302 #12           ; RB2 Target Pos
ANB R4403                ; 給材側 段ﾊﾞﾗｼ上昇ﾄﾚｲ有無(遮光ON
LD MR16011               ; ﾄﾚｲ搬送_段ﾊﾞﾗｼ範囲外
LDB MR16011              ; ﾄﾚｲ搬送_段ﾊﾞﾗｼ範囲外
AND @MR004               ; ﾄﾚｲﾁｬｯｸ開き
AND @MR005               ; ﾄﾚｲﾁｬｯｸ戻し
ORL
ANL
ORL
ANL
AND R4004                ; 給材扉閉確認
AND R007                 ; 安全ｶﾊﾞｰ
OUT MR3001               ; RB2 起動IL ON=起動可能
;RB3ｲﾝﾀｰﾛｯｸ
LDB MR10314              ; T2_取出_Busy
AND MR16400              ; 受取PP_Z軸_Pos#1
AND MR16411              ; 受取PP_Z軸_ﾊﾟﾚﾀｲｽﾞ範囲外
AND MR16412              ; 受取PP_Z軸_受渡し範囲外
AND R007                 ; 安全ｶﾊﾞｰ
BANB DM10531 #2          ; RB4 状態信号
OUT MR3002               ; RB3 起動IL ON=起動可能
;RB4ｲﾝﾀｰﾛｯｸ
LDB R4114                ; 受渡しPP ﾜｰｸ反転 旋回側
AND R4115                ; 受渡しPP ﾜｰｸ反転 戻し側
LDB LR10000              ; OFF給材ﾄﾚﾁｪﾝ ON除材ﾄﾚﾁｪﾝ
LDB R4400                ; 受渡しPP ﾜｰｸ有無ｾﾝｻ(入光ON:有)
BANB DM2000 #1           ; _動作ﾊﾟﾗﾒｰﾀ
BOR DM2000 #1            ; _動作ﾊﾟﾗﾒｰﾀ
ANL
ANB R4112                ; 受渡しPP ﾁｬｯｸ 閉限
AND R4113                ; 受渡しPP ﾁｬｯｸ 開限
OR LR10000               ; OFF給材ﾄﾚﾁｪﾝ ON除材ﾄﾚﾁｪﾝ
ANL
ANB MR16312              ; 受取PP_Y軸_ﾊﾟﾚﾀｲｽﾞ範囲外
OUT @MR300               ; ﾄﾚｲ内下降干渉無し
LD MR16301               ; 受取PP_Y軸_Pos#2
LDB LR10000              ; OFF給材ﾄﾚﾁｪﾝ ON除材ﾄﾚﾁｪﾝ
LD MR16600               ; 受渡しRB_Pos#1
ANB R4414                ; 受渡しｽﾗｲﾀﾞ ﾜｰｸ有無右(遮光ON)
LD MR16601               ; 受渡しRB_Pos#2
ANB R4413                ; 受渡しｽﾗｲﾀﾞ ﾜｰｸ有無中右(遮光ON)
ORL
LD MR16602               ; 受渡しRB_Pos#3
ANB R4412                ; 受渡しｽﾗｲﾀﾞ ﾜｰｸ有無中左(遮光ON)
ORL
LD MR16603               ; 受渡しRB_Pos#4
ANB R4411                ; 受渡しｽﾗｲﾀﾞ ﾜｰｸ有無左(遮光ON)
ORL
LDB R4112                ; 受渡しPP ﾁｬｯｸ 閉限
AND R4113                ; 受渡しPP ﾁｬｯｸ 開限
ANB R4400                ; 受渡しPP ﾜｰｸ有無ｾﾝｻ(入光ON:有)
ORL
ANL
LD LR10000               ; OFF給材ﾄﾚﾁｪﾝ ON除材ﾄﾚﾁｪﾝ
LDB R4112                ; 受渡しPP ﾁｬｯｸ 閉限
AND R4113                ; 受渡しPP ﾁｬｯｸ 開限
LD R46102                ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
LD MR16600               ; 受渡しRB_Pos#1
ANB R4414                ; 受渡しｽﾗｲﾀﾞ ﾜｰｸ有無右(遮光ON)
LD MR16601               ; 受渡しRB_Pos#2
ANB R4413                ; 受渡しｽﾗｲﾀﾞ ﾜｰｸ有無中右(遮光ON)
ORL
LD MR16602               ; 受渡しRB_Pos#3
ANB R4412                ; 受渡しｽﾗｲﾀﾞ ﾜｰｸ有無中左(遮光ON)
ORL
LD MR16603               ; 受渡しRB_Pos#4
ANB R4411                ; 受渡しｽﾗｲﾀﾞ ﾜｰｸ有無左(遮光ON)
ORL
ANL
ORL
ANL
ORL
ANL
AND R4114                ; 受渡しPP ﾜｰｸ反転 旋回側
ANB R4115                ; 受渡しPP ﾜｰｸ反転 戻し側
OUT @MR301               ; 受渡し干渉無し
LD @MR300                ; ﾄﾚｲ内下降干渉無し
OR<> EM1306 #11          ; RB4 Target Pos
OR MR16402               ; 受取PP_Z軸_Pos#11
LD @MR301                ; 受渡し干渉無し
OR<> EM1306 #10          ; RB4 Target Pos
OR MR16401               ; 受取PP_Z軸_Pos#10
ANL
ANB @MR4502              ; 受渡PP_Y軸_RB3_Busy
AND R007                 ; 安全ｶﾊﾞｰ
BANB DM10523 #2          ; RB3 状態信号
OUT MR3003               ; RB4 起動IL ON=起動可能
;RB5ｲﾝﾀｰﾛｯｸ
LD R4410                 ; 除材側 ﾄﾚｲ押込確認ｾﾝｻ(遮光ON)
LD MR16512               ; 除材ｴﾚﾍﾞｰﾀ_ﾄﾚｲｻｰﾁ許可範囲
ORB MR22403              ; TPSW_RB5 ﾄﾚｲｻｰﾁTP
ANL
LD MR10405               ; 除材ｴﾚﾍﾞｰﾀ_ﾄﾚｲｻｰﾁ完了_Flg
OR MR22403               ; TPSW_RB5 ﾄﾚｲｻｰﾁTP
OR= EM1308 #1            ; RB5 Target Pos
OR= EM1308 #20           ; RB5 Target Pos
ANL
AND R4005                ; 除材扉閉確認
AND R007                 ; 安全ｶﾊﾞｰ
OUT MR3004               ; RB5 起動IL ON=起動可能
;RB6ｲﾝﾀｰﾛｯｸ
LD MR10702               ; COM_MAIN_ｲﾝﾀｰﾛｯｸ信号
LD MR16611               ; 受渡しRB_ｾﾙ間干渉外
AND<> EM1310 #5          ; RB6 Target Pos
ORL
AND MR16412              ; 受取PP_Z軸_受渡し範囲外
AND R007                 ; 安全ｶﾊﾞｰ
OUT MR3005               ; RB6 起動IL ON=起動可能
END
ENDH
