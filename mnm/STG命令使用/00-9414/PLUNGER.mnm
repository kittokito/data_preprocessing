DEVICE:53
;MODULE:PLUNGER
;MODULE_TYPE:0
LD R50010                ; Emergency　Stop
OR @MR000
ZRES @MR001 @MR3315      ; 001
CON
ZRES DM753 DM754         ; 連続循環中画面表示  循環回数画面表示
CON
ZRES DM738 DM739         ; インク循環中画面表示  インク循環画面表示
CON
ZRES DM758 DM759         ; ｲﾝｸ捨て出し中画面表示  ｲﾝｸ捨て出し回数画面表示
CON
OUT @MR000
TMR @0 #5
LD @T0
MDSTOP PLUNGER
;<h1/>プランジャー監視
;***** ﾌﾟﾗﾝｼﾞｬｰﾎﾟﾝﾌﾟ 中間ｾﾝｻｰ･前進ｾﾝｻｰ検出 処理  / plunger pump middle･ forward sensor detection  ******
;
;DM218=$5300(S) -> 中間限ｾﾝｻｰONで中間検出
;DM218=$5353(SS)-> 中間限ｾﾝｻｰ無視
LD R50007                ; 原点復帰　完了
LD R50001                ; AUTO
OR R50002                ; STEP
OR MR12014               ; 背面ｲﾝｸ吐出起動中
ANL
MPS
LD MR11806               ; ﾌﾟﾗﾝｼﾞｬｰ 1 前進call 実行中
AND=.L DM2000 DM2720     ; RB6現在位置  RB6_P2 位置ﾃﾞｰﾀ
ANL
@SET MR12104             ; Plunger pump1 前進検出FRG
MRD
LD MR11814               ; ﾌﾟﾗﾝｼﾞｬｰ 2 前進call 実行中
AND=.L DM2008 DM2770     ; RB7 現在位置  RB7_P2 位置ﾃﾞｰﾀ
ANL
@SET MR12105             ; Plunger pump2 前進検出FRG
MRD
LD MR11906               ; ﾌﾟﾗﾝｼﾞｬｰ 3 前進call 実行中
AND=.L DM2016 DM2820     ; RB8現在位置  RB8_P2 位置ﾃﾞｰﾀ
ANL
@SET MR12106             ; Plunger pump3 前進検出FRG
MPP
LD MR11914               ; ﾌﾟﾗﾝｼﾞｬｰ 4 前進call 実行中
AND=.L DM2024 DM2870     ; RB9 現在位置  RB9_P2 位置ﾃﾞｰﾀ
ANL
@SET MR12107             ; Plunger pump4 前進検出FRG
;***** ﾌﾟﾗﾝｼﾞｬｰﾎﾟﾝﾌﾟ ﾀｲﾏｰ監視  / Timer check of plunger pump ******
LD CR2004                ; 10msｸﾛｯｸﾊﾟﾙｽ
MPS
LD MR11806               ; ﾌﾟﾗﾝｼﾞｬｰ 1 前進call 実行中
ANB MR12104              ; Plunger pump1 前進検出FRG
ANL
@INC DM700               ; ﾌﾟﾗﾝｼﾞｬｰ1 動作時間
MRD
LD MR11814               ; ﾌﾟﾗﾝｼﾞｬｰ 2 前進call 実行中
ANB MR12105              ; Plunger pump2 前進検出FRG
ANL
@INC DM701               ; ﾌﾟﾗﾝｼﾞｬｰ2 動作時間
MRD
LD MR11906               ; ﾌﾟﾗﾝｼﾞｬｰ 3 前進call 実行中
ANB MR12106              ; Plunger pump3 前進検出FRG
ANL
@INC DM702               ; ﾌﾟﾗﾝｼﾞｬｰ3 動作時間
MPP
LD MR11914               ; ﾌﾟﾗﾝｼﾞｬｰ 4 前進call 実行中
ANB MR12107              ; Plunger pump4 前進検出FRG
ANL
@INC DM703               ; ﾌﾟﾗﾝｼﾞｬｰ4 動作時間
LDP MR11804              ; ﾌﾟﾗﾝｼﾞｬｰ 1 前進call FLG
RES DM700                ; ﾌﾟﾗﾝｼﾞｬｰ1 動作時間
LDP MR11812              ; ﾌﾟﾗﾝｼﾞｬｰ 2 前進call FLG
RES DM701                ; ﾌﾟﾗﾝｼﾞｬｰ2 動作時間
LDP MR11904              ; ﾌﾟﾗﾝｼﾞｬｰ 3 前進call FLG
RES DM702                ; ﾌﾟﾗﾝｼﾞｬｰ3 動作時間
LDP MR11912              ; ﾌﾟﾗﾝｼﾞｬｰ 4 前進call FLG
RES DM703                ; ﾌﾟﾗﾝｼﾞｬｰ4 動作時間
LDP MR11805              ; ﾌﾟﾗﾝｼﾞｬｰ 1 前進call 完了
RES MR12104              ; Plunger pump1 前進検出FRG
LDP MR11813              ; ﾌﾟﾗﾝｼﾞｬｰ 2 前進call 完了
RES MR12105              ; Plunger pump2 前進検出FRG
LDP MR11905              ; ﾌﾟﾗﾝｼﾞｬｰ 3 前進call 完了
RES MR12106              ; Plunger pump3 前進検出FRG
LDP MR11913              ; ﾌﾟﾗﾝｼﾞｬｰ 4 前進call 完了
RES MR12107              ; Plunger pump4 前進検出FRG
;ﾌﾟﾗﾝｼﾞｬﾎﾟﾝﾌﾟ動作中確認
LDB MR11802              ; ﾌﾟﾗﾝｼﾞｬｰ 1 後退call 実行中
ANB MR11806              ; ﾌﾟﾗﾝｼﾞｬｰ 1 前進call 実行中
ANB MR11810              ; ﾌﾟﾗﾝｼﾞｬｰ 2 後退call 実行中
ANB MR11814              ; ﾌﾟﾗﾝｼﾞｬｰ 2 前進call 実行中
ANB MR11902              ; ﾌﾟﾗﾝｼﾞｬｰ 3 後退call 実行中
ANB MR11906              ; ﾌﾟﾗﾝｼﾞｬｰ 3 前進call 実行中
ANB MR11910              ; ﾌﾟﾗﾝｼﾞｬｰ 4 後退call 実行中
ANB MR11914              ; ﾌﾟﾗﾝｼﾞｬｰ 4 前進call 実行中
OUT MR11710              ; PP動作中無し
;<h1/>各種ﾀｲﾏｰ
;Timers
LD CR2002                ; 常時ON
MPS
LDA FM83                 ; 注入安定時間L
CON
EXT
CON
STA.D @DM0               ; 注入安定時間L
MRD
LDA FM84                 ; 注入安定時間R
CON
EXT
CON
STA.D @DM2               ; 注入安定時間R
MRD
LDA FM85                 ; 引込安定時間
CON
EXT
CON
STA.D @DM4               ; 引込安定時間
MPP
DW.D #10 @DM6            ; ﾊﾞﾙﾌﾞ切替安定時間
;<h1/>背面吐出swﾓｰﾄﾞ
;Rear discharge sw mode
;***** 背面用 ｲﾝｸ吐出  ﾃﾞｼﾞ SW 処理  / Ink discharge digital sw check ******
;
LDP CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
ANB MR12014              ; 背面ｲﾝｸ吐出起動中
PMOV R5000 #12 DM1490 #0 #4;ﾃﾞｼﾞSW NO ORG
;***** 背面SW 有効画面表示  / Rear discharge sw display ******
;
;背面SW起動時はﾃﾞｼｹｰﾀ圧OUT2がONになるまで待機(画面に減圧中の表示をする)まだ背面SWは使えない
;OUT2がONになると背面SW使用可(ﾃﾞｼｹｰﾀ圧を常時監視する)
LDP R41109               ; AUTO PARA10 SW
SET R41000               ; 背面SW有効表示
LDF R41015               ; 背面有効表示閉SW
OR R1002                 ; 操作BOX ﾎﾟｰｽﾞSW
OR R1006                 ; PAUSE(REAR)
ORF R50000               ; HOLD
ORF LR41109              ; 背面SW有効
AND R41000               ; 背面SW有効表示
RES DM725                ; 脱気用ﾃﾞｼｹｰﾀ減圧中
CON
ZRES DM738 DM739         ; インク循環中画面表示  インク循環画面表示
CON
ZRES DM753 DM754         ; 連続循環中画面表示  循環回数画面表示
CON
ZRES DM758 DM759         ; ｲﾝｸ捨て出し中画面表示  ｲﾝｸ捨て出し回数画面表示
CON
ZRES @MR501 @MR505       ; 背面SW動作OK
CON
RES MR306                ; 脱気用ﾃﾞｼｹｰﾀ起動
CON
RES MR12014              ; 背面ｲﾝｸ吐出起動中
CON
RES R41000               ; 背面SW有効表示
LD LR41109               ; 背面SW有効
AND R41000               ; 背面SW有効表示
SET MR306                ; 脱気用ﾃﾞｼｹｰﾀ起動
CON
@SET @MR501
STG @MR501
ANB R50008               ; Error
SET DM725                ; 脱気用ﾃﾞｼｹｰﾀ減圧中
CON
AND R5805                ; ｻﾃﾗｲﾄA ｾﾊﾟﾚﾙ 真空検出2
AND R5905                ; ｻﾃﾗｲﾄB ｾﾊﾟﾚﾙ 真空検出2
RES DM725                ; 脱気用ﾃﾞｼｹｰﾀ減圧中
CON
SET @MR502               ; 背面SW起動時圧力OK
CON
ENDS
LD @MR502                ; 背面SW起動時圧力OK
MPS
LD MR2104                ; 脱気用ﾎﾟﾝﾌﾟ
AND R5805                ; ｻﾃﾗｲﾄA ｾﾊﾟﾚﾙ 真空検出2
AND R5905                ; ｻﾃﾗｲﾄB ｾﾊﾟﾚﾙ 真空検出2
ANL
OUT @MR505               ; 背面SW動作OK
MPP
LDB MR2104               ; 脱気用ﾎﾟﾝﾌﾟ
ORB R5805                ; ｻﾃﾗｲﾄA ｾﾊﾟﾚﾙ 真空検出2
ORB R5905                ; ｻﾃﾗｲﾄB ｾﾊﾟﾚﾙ 真空検出2
ANL
TMR @2 #10
CON
AND @T2
RES @MR502               ; 背面SW起動時圧力OK
CON
SET @MR400               ; Err65 ST3
CON
@SET @MR503
;ERR65 ﾃﾞｼｹｰﾀUT異常 / DC-UT Error
STG @MR503
ANB R50008               ; Error
AND @MR403               ; Err65 ST3 解除完了
JMP @MR504
STG @MR504
RES R41000               ; 背面SW有効表示
CON
RES MR306                ; 脱気用ﾃﾞｼｹｰﾀ起動
CON
RES @MR403               ; Err65 ST3 解除完了
CON
ENDS
;
LD @MR505                ; 背面SW動作OK
ANB R50113               ; Err ST3
AND MR11710              ; PP動作中無し
ANB MR12014              ; 背面ｲﾝｸ吐出起動中
ANP R1005                ; START(REAR)
MPS
AND= DM1490 #0           ; ﾃﾞｼﾞSW NO ORG
ZRES MR11800 MR11915     ; ﾌﾟﾗﾝｼﾞｬｰ 1 後退call FLG
CON
SET MR12014              ; 背面ｲﾝｸ吐出起動中
CON
SET @MR1000              ; 全PP 吐出
MRD
AND= DM1490 #1           ; ﾃﾞｼﾞSW NO ORG
SET MR12014              ; 背面ｲﾝｸ吐出起動中
CON
SET @MR1100              ; PP1 吐出
MRD
AND= DM1490 #2           ; ﾃﾞｼﾞSW NO ORG
SET MR12014              ; 背面ｲﾝｸ吐出起動中
CON
SET @MR1200              ; PP3 吐出
MRD
AND= DM1490 #3           ; ﾃﾞｼﾞSW NO ORG
SET MR12014              ; 背面ｲﾝｸ吐出起動中
CON
SET @MR1108              ; PP2 吐出
MRD
AND= DM1490 #4           ; ﾃﾞｼﾞSW NO ORG
SET MR12014              ; 背面ｲﾝｸ吐出起動中
CON
SET @MR1208              ; PP4 吐出
MRD
AND= DM1490 #5           ; ﾃﾞｼﾞSW NO ORG
ZRES MR11800 MR11915     ; ﾌﾟﾗﾝｼﾞｬｰ 1 後退call FLG
CON
SET MR12014              ; 背面ｲﾝｸ吐出起動中
CON
SET @MR1300              ; 全ﾍｯﾄﾞｲﾝｸ循環捨出し
MRD
LD= DM1490 #6            ; ﾃﾞｼﾞSW NO ORG
AND CR2003               ; 常時OFF
ANL
SET MR12014              ; 背面ｲﾝｸ吐出起動中
CON
SET @MR1300              ; 全ﾍｯﾄﾞｲﾝｸ循環捨出し
MRD
LD= DM1490 #7            ; ﾃﾞｼﾞSW NO ORG
AND CR2003               ; 常時OFF
ANL
SET MR12014              ; 背面ｲﾝｸ吐出起動中
CON
SET @MR1300              ; 全ﾍｯﾄﾞｲﾝｸ循環捨出し
MRD
AND= DM1490 #8           ; ﾃﾞｼﾞSW NO ORG
ZRES MR11800 MR11915     ; ﾌﾟﾗﾝｼﾞｬｰ 1 後退call FLG
CON
SET MR12014              ; 背面ｲﾝｸ吐出起動中
CON
SET @MR1900              ; 連続捨て出し
MRD
LD= DM1490 #9            ; ﾃﾞｼﾞSW NO ORG
AND CR2003               ; 常時OFF
ANL
SET MR12014              ; 背面ｲﾝｸ吐出起動中
CON
SET @MR1900              ; 連続捨て出し
MRD
LD= DM1490 #10           ; ﾃﾞｼﾞSW NO ORG
AND CR2003               ; 常時OFF
ANL
SET MR12014              ; 背面ｲﾝｸ吐出起動中
CON
SET @MR1900              ; 連続捨て出し
MRD
AND= DM1490 #11          ; ﾃﾞｼﾞSW NO ORG
ZRES MR11800 MR11915     ; ﾌﾟﾗﾝｼﾞｬｰ 1 後退call FLG
CON
SET MR12014              ; 背面ｲﾝｸ吐出起動中
CON
SET @MR2200              ; KDｲﾝｸ循環時間Call
MRD
LD= DM1490 #12           ; ﾃﾞｼﾞSW NO ORG
AND CR2003               ; 常時OFF
ANL
SET MR12014              ; 背面ｲﾝｸ吐出起動中
CON
SET @MR2200              ; KDｲﾝｸ循環時間Call
MPP
LD= DM1490 #13           ; ﾃﾞｼﾞSW NO ORG
AND CR2003               ; 常時OFF
ANL
SET MR12014              ; 背面ｲﾝｸ吐出起動中
CON
SET @MR2200              ; KDｲﾝｸ循環時間Call
;<h1/>  全PP1回吐出動作
;  All Plunger pump one-time discharge 
STG @MR1000              ; 全PP 吐出
SET @MR1001              ; 全PP 吐出中
CON
SET @MR1002              ; PP1 吐出
CON
SET @MR1003              ; PP2 吐出
CON
SET @MR1004              ; PP3 吐出
CON
SET @MR1005              ; PP4 吐出
CON
SET @MR1100              ; PP1 吐出
CON
SET @MR1108              ; PP2 吐出
CON
SET @MR1200              ; PP3 吐出
CON
SET @MR1208              ; PP4 吐出
CON
JMP @MR1008
STG @MR1008
ANB @MR1002              ; PP1 吐出
ANB @MR1003              ; PP2 吐出
ANB @MR1004              ; PP3 吐出
ANB @MR1005              ; PP4 吐出
RES @MR1001              ; 全PP 吐出中
CON
RES MR12014              ; 背面ｲﾝｸ吐出起動中
CON
ENDS
;<h1/>  PP1 1回吐出動作
;  Plunger pump 1 one-time discharge 
STG @MR1100              ; PP1 吐出
MPS
JMP @MR1101              ; PP1 前進
MPP
LD< W1BC6 #5             ; ｻﾃﾗｲﾄNo_from Host
AND>.L DM2720 +6000      ; RB6_P2 位置ﾃﾞｰﾀ
LD= W1BC6 #5             ; ｻﾃﾗｲﾄNo_from Host
AND>.L DM2720 +7000      ; RB6_P2 位置ﾃﾞｰﾀ
ORL
LD>= W1BC6 #6            ; ｻﾃﾗｲﾄNo_from Host
AND>.L DM2720 +7000      ; RB6_P2 位置ﾃﾞｰﾀ
ORL
ANL
MOV.L DM2720 DM2726      ; RB6_P2 位置ﾃﾞｰﾀ  PP1  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
STG @MR1101              ; PP1 前進
SET MR11804              ; ﾌﾟﾗﾝｼﾞｬｰ 1 前進call FLG
CON
JMP @MR1102
STG @MR1102
AND MR11805              ; ﾌﾟﾗﾝｼﾞｬｰ 1 前進call 完了
RES MR11805              ; ﾌﾟﾗﾝｼﾞｬｰ 1 前進call 完了
CON
JMP @MR1103              ; PP1 後退
STG @MR1103              ; PP1 後退
SET MR11800              ; ﾌﾟﾗﾝｼﾞｬｰ 1 後退call FLG
CON
JMP @MR1104
STG @MR1104
AND MR11801              ; ﾌﾟﾗﾝｼﾞｬｰ 1 後退call 完了
RES MR11801              ; ﾌﾟﾗﾝｼﾞｬｰ 1 後退call 完了
CON
JMP @MR1105
STG @MR1105
MPS
AND< W1BC6 #5            ; ｻﾃﾗｲﾄNo_from Host
LDA.L DM2726             ; PP1  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
CON
SUB.L +6000
CON
STA.L DM2726             ; PP1  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
CON
JMP @MR1106
MRD
AND= W1BC6 #5            ; ｻﾃﾗｲﾄNo_from Host
LDA.L DM2726             ; PP1  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
CON
SUB.L +7000
CON
STA.L DM2726             ; PP1  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
CON
JMP @MR1106
MPP
AND>= W1BC6 #6           ; ｻﾃﾗｲﾄNo_from Host
LDA.L DM2726             ; PP1  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
CON
SUB.L +7000
CON
STA.L DM2726             ; PP1  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
CON
JMP @MR1106
STG @MR1106
MPS
AND>.L DM2726 +0         ; PP1  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
DW.L +0 DM2726           ; PP1  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
CON
SET MR28000              ; Err counting RB6
CON
JMP @MR1500
MPP
AND<=.L DM2726 +0        ; PP1  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
JMP @MR1107
STG @MR1500
AND @MR015
AND MR28001              ; err 266 release
RES MR28001              ; err 266 release
CON
JMP @MR1107
STG @MR1107
MPS
RES @MR1002              ; PP1 吐出
CON
ENDS
MPP
ANB @MR1001              ; 全PP 吐出中
RES MR12014              ; 背面ｲﾝｸ吐出起動中
;<h1/>  PP2 1回吐出動作
;  Plunger pump 2 one-time discharge 
STG @MR1108              ; PP2 吐出
MPS
JMP @MR1109              ; PP2 前進
MPP
LD< W1BC6 #5             ; ｻﾃﾗｲﾄNo_from Host
AND>.L DM2770 +6000      ; RB7_P2 位置ﾃﾞｰﾀ
LD= W1BC6 #5             ; ｻﾃﾗｲﾄNo_from Host
AND>.L DM2770 +7000      ; RB7_P2 位置ﾃﾞｰﾀ
ORL
LD>= W1BC6 #6            ; ｻﾃﾗｲﾄNo_from Host
AND>.L DM2770 +7000      ; RB7_P2 位置ﾃﾞｰﾀ
ORL
ANL
MOV.L DM2770 DM2776      ; RB7_P2 位置ﾃﾞｰﾀ  PP2  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
STG @MR1109              ; PP2 前進
SET MR11812              ; ﾌﾟﾗﾝｼﾞｬｰ 2 前進call FLG
CON
JMP @MR1110
STG @MR1110
AND MR11813              ; ﾌﾟﾗﾝｼﾞｬｰ 2 前進call 完了
RES MR11813              ; ﾌﾟﾗﾝｼﾞｬｰ 2 前進call 完了
CON
JMP @MR1111              ; PP2 後退
STG @MR1111              ; PP2 後退
SET MR11808              ; ﾌﾟﾗﾝｼﾞｬｰ 2 後退call FLG
CON
JMP @MR1112
STG @MR1112
AND MR11809              ; ﾌﾟﾗﾝｼﾞｬｰ 2  後退call 完了
RES MR11809              ; ﾌﾟﾗﾝｼﾞｬｰ 2  後退call 完了
CON
JMP @MR1113
STG @MR1113
MPS
AND< W1BC6 #5            ; ｻﾃﾗｲﾄNo_from Host
LDA.L DM2776             ; PP2  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
CON
SUB.L +6000
CON
STA.L DM2776             ; PP2  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
CON
JMP @MR1114
MRD
AND= W1BC6 #5            ; ｻﾃﾗｲﾄNo_from Host
LDA.L DM2776             ; PP2  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
CON
SUB.L +7000
CON
STA.L DM2776             ; PP2  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
CON
JMP @MR1114
MPP
AND>= W1BC6 #6           ; ｻﾃﾗｲﾄNo_from Host
LDA.L DM2776             ; PP2  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
CON
SUB.L +7000
CON
STA.L DM2776             ; PP2  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
CON
JMP @MR1114
STG @MR1114
MPS
AND>.L DM2776 +0         ; PP2  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
DW.L +0 DM2776           ; PP2  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
CON
SET MR28005              ; Err counting RB7
CON
JMP @MR1501
MPP
AND<=.L DM2776 +0        ; PP2  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
JMP @MR1115
STG @MR1501
AND @MR015
AND MR28006              ; err 267 release
RES MR28006              ; err 267 release
CON
JMP @MR1115
STG @MR1115
MPS
RES @MR1003              ; PP2 吐出
CON
ENDS
MPP
ANB @MR1001              ; 全PP 吐出中
RES MR12014              ; 背面ｲﾝｸ吐出起動中
;<h1/>  PP3 1回吐出動作
;  Plunger pump 3 one-time discharge 
STG @MR1200              ; PP3 吐出
MPS
JMP @MR1201              ; PP3 前進
MPP
LD< W1BC6 #5             ; ｻﾃﾗｲﾄNo_from Host
AND>.L DM2820 +6000      ; RB8_P2 位置ﾃﾞｰﾀ
LD= W1BC6 #5             ; ｻﾃﾗｲﾄNo_from Host
AND>.L DM2820 +7000      ; RB8_P2 位置ﾃﾞｰﾀ
ORL
LD>= W1BC6 #6            ; ｻﾃﾗｲﾄNo_from Host
AND>.L DM2820 +7000      ; RB8_P2 位置ﾃﾞｰﾀ
ORL
ANL
MOV.L DM2820 DM2826      ; RB8_P2 位置ﾃﾞｰﾀ  PP3  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
STG @MR1201              ; PP3 前進
SET MR11904              ; ﾌﾟﾗﾝｼﾞｬｰ 3 前進call FLG
CON
JMP @MR1202
STG @MR1202
AND MR11905              ; ﾌﾟﾗﾝｼﾞｬｰ 3 前進call 完了
RES MR11905              ; ﾌﾟﾗﾝｼﾞｬｰ 3 前進call 完了
CON
JMP @MR1203              ; PP3 後退
STG @MR1203              ; PP3 後退
SET MR11900              ; ﾌﾟﾗﾝｼﾞｬｰ 3 後退call FLG
CON
JMP @MR1204
STG @MR1204
AND MR11901              ; ﾌﾟﾗﾝｼﾞｬｰ 3 後退call 完了
RES MR11901              ; ﾌﾟﾗﾝｼﾞｬｰ 3 後退call 完了
CON
JMP @MR1205
STG @MR1205
MPS
AND< W1BC6 #5            ; ｻﾃﾗｲﾄNo_from Host
LDA.L DM2826             ; PP3  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
CON
SUB.L +6000
CON
STA.L DM2826             ; PP3  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
CON
JMP @MR1206
MRD
AND= W1BC6 #5            ; ｻﾃﾗｲﾄNo_from Host
LDA.L DM2826             ; PP3  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
CON
SUB.L +7000
CON
STA.L DM2826             ; PP3  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
CON
JMP @MR1206
MPP
AND>= W1BC6 #6           ; ｻﾃﾗｲﾄNo_from Host
LDA.L DM2826             ; PP3  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
CON
SUB.L +7000
CON
STA.L DM2826             ; PP3  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
CON
JMP @MR1206
STG @MR1206
MPS
AND>.L DM2826 +0         ; PP3  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
DW.L +0 DM2826           ; PP3  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
CON
SET MR28010              ; Err counting RB8
CON
JMP @MR1502
MPP
AND<=.L DM2826 +0        ; PP3  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
JMP @MR1207
STG @MR1502
AND @MR015
AND MR28011              ; err 268 release
RES MR28011              ; err 268 release
CON
JMP @MR1207
STG @MR1207
MPS
RES @MR1004              ; PP3 吐出
CON
ENDS
MPP
ANB @MR1001              ; 全PP 吐出中
RES MR12014              ; 背面ｲﾝｸ吐出起動中
;<h1/>  PP4 1回吐出動作
;  Plunger pump 4 one-time discharge 
STG @MR1208              ; PP4 吐出
MPS
JMP @MR1209              ; PP4 前進
MPP
LD< W1BC6 #5             ; ｻﾃﾗｲﾄNo_from Host
AND>.L DM2870 +6000      ; RB9_P2 位置ﾃﾞｰﾀ
LD= W1BC6 #5             ; ｻﾃﾗｲﾄNo_from Host
AND>.L DM2870 +7000      ; RB9_P2 位置ﾃﾞｰﾀ
ORL
LD>= W1BC6 #6            ; ｻﾃﾗｲﾄNo_from Host
AND>.L DM2870 +7000      ; RB9_P2 位置ﾃﾞｰﾀ
ORL
ANL
MOV.L DM2870 DM2876      ; RB9_P2 位置ﾃﾞｰﾀ  PP4  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
STG @MR1209              ; PP4 前進
SET MR11912              ; ﾌﾟﾗﾝｼﾞｬｰ 4 前進call FLG
CON
JMP @MR1210
STG @MR1210
AND MR11913              ; ﾌﾟﾗﾝｼﾞｬｰ 4 前進call 完了
RES MR11913              ; ﾌﾟﾗﾝｼﾞｬｰ 4 前進call 完了
CON
JMP @MR1211              ; PP4 後退
STG @MR1211              ; PP4 後退
SET MR11908              ; ﾌﾟﾗﾝｼﾞｬｰ 4 後退call FLG
CON
JMP @MR1212
STG @MR1212
AND MR11909              ; ﾌﾟﾗﾝｼﾞｬｰ 4 後退call 完了
RES MR11909              ; ﾌﾟﾗﾝｼﾞｬｰ 4 後退call 完了
CON
JMP @MR1213
STG @MR1213
MPS
AND< W1BC6 #5            ; ｻﾃﾗｲﾄNo_from Host
LDA.L DM2876             ; PP4  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
CON
SUB.L +6000
CON
STA.L DM2876             ; PP4  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
CON
JMP @MR1214
MRD
AND= W1BC6 #5            ; ｻﾃﾗｲﾄNo_from Host
LDA.L DM2876             ; PP4  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
CON
SUB.L +7000
CON
STA.L DM2876             ; PP4  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
CON
JMP @MR1214
MPP
AND>= W1BC6 #6           ; ｻﾃﾗｲﾄNo_from Host
LDA.L DM2876             ; PP4  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
CON
SUB.L +7000
CON
STA.L DM2876             ; PP4  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
CON
JMP @MR1214
STG @MR1214
MPS
AND>.L DM2876 +0         ; PP4  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
DW.L +0 DM2876           ; PP4  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
CON
SET MR28015              ; Err counting RB9
CON
JMP @MR1503
MPP
AND<=.L DM2876 +0        ; PP4  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
JMP @MR1215
STG @MR1503
AND @MR015
AND MR28100              ; err 269 release
RES MR28100              ; err 269 release
CON
JMP @MR1215
STG @MR1215
MPS
RES @MR1005              ; PP4 吐出
CON
ENDS
MPP
ANB @MR1001              ; 全PP 吐出中
RES MR12014              ; 背面ｲﾝｸ吐出起動中
;<h1/>  全PP ｲﾝｸ循環吐出
;  All Plunger pump Ink circulation & discharge
;ｲﾝｸ循環  /  Ink circulation
STG @MR1300              ; 全ﾍｯﾄﾞｲﾝｸ循環捨出し
MPS
RES MR2902               ; ｻﾌﾞﾀﾝｸｲﾝｸ循環完了FLG
CON
SET DM753                ; 連続循環中画面表示
CON
SET DM754                ; 循環回数画面表示
CON
JMP @MR1301              ; 循環開始
MRD
MOV #0 DM750             ; インク循環回数
MRD
MOV #0 DM755             ; ｲﾝｸ捨て出し回数
MRD
MOV DM527 DM757          ; ST3 Data07 連続捨てだし回数
MRD
MOV #10 DM751            ; インク循環回数(設定値)
MPP
MOV #3 DM527             ; ST3 Data07 連続捨てだし回数
STG @MR1301              ; 循環開始
@INC DM750               ; インク循環回数
CON
SET MR11804              ; ﾌﾟﾗﾝｼﾞｬｰ 1 前進call FLG
CON
SET MR11812              ; ﾌﾟﾗﾝｼﾞｬｰ 2 前進call FLG
CON
SET MR11904              ; ﾌﾟﾗﾝｼﾞｬｰ 3 前進call FLG
CON
SET MR11912              ; ﾌﾟﾗﾝｼﾞｬｰ 4 前進call FLG
CON
JMP @MR1302              ; 次ｽﾃｯﾌﾟへ
STG @MR1302              ; 次ｽﾃｯﾌﾟへ
AND MR11805              ; ﾌﾟﾗﾝｼﾞｬｰ 1 前進call 完了
AND MR11813              ; ﾌﾟﾗﾝｼﾞｬｰ 2 前進call 完了
AND MR11905              ; ﾌﾟﾗﾝｼﾞｬｰ 3 前進call 完了
AND MR11913              ; ﾌﾟﾗﾝｼﾞｬｰ 4 前進call 完了
RES MR11805              ; ﾌﾟﾗﾝｼﾞｬｰ 1 前進call 完了
CON
RES MR11813              ; ﾌﾟﾗﾝｼﾞｬｰ 2 前進call 完了
CON
RES MR11905              ; ﾌﾟﾗﾝｼﾞｬｰ 3 前進call 完了
CON
RES MR11913              ; ﾌﾟﾗﾝｼﾞｬｰ 4 前進call 完了
CON
JMP @MR1303              ; 次ｽﾃｯﾌﾟへ
STG @MR1303              ; 次ｽﾃｯﾌﾟへ
SET MR11800              ; ﾌﾟﾗﾝｼﾞｬｰ 1 後退call FLG
CON
SET MR11808              ; ﾌﾟﾗﾝｼﾞｬｰ 2 後退call FLG
CON
SET MR11900              ; ﾌﾟﾗﾝｼﾞｬｰ 3 後退call FLG
CON
SET MR11908              ; ﾌﾟﾗﾝｼﾞｬｰ 4 後退call FLG
CON
JMP @MR1304              ; 次ｽﾃｯﾌﾟへ
STG @MR1304              ; 次ｽﾃｯﾌﾟへ
AND MR11801              ; ﾌﾟﾗﾝｼﾞｬｰ 1 後退call 完了
AND MR11809              ; ﾌﾟﾗﾝｼﾞｬｰ 2  後退call 完了
AND MR11901              ; ﾌﾟﾗﾝｼﾞｬｰ 3 後退call 完了
AND MR11909              ; ﾌﾟﾗﾝｼﾞｬｰ 4 後退call 完了
RES MR11801              ; ﾌﾟﾗﾝｼﾞｬｰ 1 後退call 完了
CON
RES MR11809              ; ﾌﾟﾗﾝｼﾞｬｰ 2  後退call 完了
CON
RES MR11901              ; ﾌﾟﾗﾝｼﾞｬｰ 3 後退call 完了
CON
RES MR11909              ; ﾌﾟﾗﾝｼﾞｬｰ 4 後退call 完了
CON
JMP @MR1305              ; 次ｽﾃｯﾌﾟへ
STG @MR1305              ; 次ｽﾃｯﾌﾟへ
MPS
AND>= DM750 DM751        ; インク循環回数  インク循環回数(設定値)
JMP @MR1400              ; 次ｽﾃｯﾌﾟへ
MPP
AND< DM750 DM751         ; インク循環回数  インク循環回数(設定値)
MPS
AND R41000               ; 背面SW有効表示
JMP @MR1301              ; 循環開始
MPP
ANB R41000               ; 背面SW有効表示
JMP @MR1407              ; 次ｽﾃｯﾌﾟへ
;ｲﾝｸ吐出  /  Ink discharge
STG @MR1400              ; 次ｽﾃｯﾌﾟへ
SET @MR300
CON
RES DM753                ; 連続循環中画面表示
CON
RES DM754                ; 循環回数画面表示
CON
SET DM758                ; ｲﾝｸ捨て出し中画面表示
CON
SET DM759                ; ｲﾝｸ捨て出し回数画面表示
CON
INC DM755                ; ｲﾝｸ捨て出し回数
CON
JMP @MR1401
STG @MR1401
SET MR11804              ; ﾌﾟﾗﾝｼﾞｬｰ 1 前進call FLG
CON
SET MR11812              ; ﾌﾟﾗﾝｼﾞｬｰ 2 前進call FLG
CON
SET MR11904              ; ﾌﾟﾗﾝｼﾞｬｰ 3 前進call FLG
CON
SET MR11912              ; ﾌﾟﾗﾝｼﾞｬｰ 4 前進call FLG
CON
JMP @MR1402              ; 次ｽﾃｯﾌﾟへ
STG @MR1402              ; 次ｽﾃｯﾌﾟへ
AND MR11805              ; ﾌﾟﾗﾝｼﾞｬｰ 1 前進call 完了
AND MR11813              ; ﾌﾟﾗﾝｼﾞｬｰ 2 前進call 完了
AND MR11905              ; ﾌﾟﾗﾝｼﾞｬｰ 3 前進call 完了
AND MR11913              ; ﾌﾟﾗﾝｼﾞｬｰ 4 前進call 完了
RES MR11805              ; ﾌﾟﾗﾝｼﾞｬｰ 1 前進call 完了
CON
RES MR11813              ; ﾌﾟﾗﾝｼﾞｬｰ 2 前進call 完了
CON
RES MR11905              ; ﾌﾟﾗﾝｼﾞｬｰ 3 前進call 完了
CON
RES MR11913              ; ﾌﾟﾗﾝｼﾞｬｰ 4 前進call 完了
CON
JMP @MR1403              ; 次ｽﾃｯﾌﾟへ
STG @MR1403              ; 次ｽﾃｯﾌﾟへ
SET MR11800              ; ﾌﾟﾗﾝｼﾞｬｰ 1 後退call FLG
CON
SET MR11808              ; ﾌﾟﾗﾝｼﾞｬｰ 2 後退call FLG
CON
SET MR11900              ; ﾌﾟﾗﾝｼﾞｬｰ 3 後退call FLG
CON
SET MR11908              ; ﾌﾟﾗﾝｼﾞｬｰ 4 後退call FLG
CON
JMP @MR1404              ; 次ｽﾃｯﾌﾟへ
STG @MR1404              ; 次ｽﾃｯﾌﾟへ
AND MR11801              ; ﾌﾟﾗﾝｼﾞｬｰ 1 後退call 完了
AND MR11809              ; ﾌﾟﾗﾝｼﾞｬｰ 2  後退call 完了
AND MR11901              ; ﾌﾟﾗﾝｼﾞｬｰ 3 後退call 完了
AND MR11909              ; ﾌﾟﾗﾝｼﾞｬｰ 4 後退call 完了
RES MR11801              ; ﾌﾟﾗﾝｼﾞｬｰ 1 後退call 完了
CON
RES MR11809              ; ﾌﾟﾗﾝｼﾞｬｰ 2  後退call 完了
CON
RES MR11901              ; ﾌﾟﾗﾝｼﾞｬｰ 3 後退call 完了
CON
RES MR11809              ; ﾌﾟﾗﾝｼﾞｬｰ 2  後退call 完了
CON
JMP @MR1405              ; 次ｽﾃｯﾌﾟへ
STG @MR1405              ; 次ｽﾃｯﾌﾟへ
MPS
AND>= DM755 #3           ; ｲﾝｸ捨て出し回数
MPS
AND R41000               ; 背面SW有効表示
JMP @MR1406              ; 次ｽﾃｯﾌﾟへ
MPP
ANB R41000               ; 背面SW有効表示
JMP @MR1406              ; 次ｽﾃｯﾌﾟへ
MPP
AND< DM755 #3            ; ｲﾝｸ捨て出し回数
MPS
AND R41000               ; 背面SW有効表示
JMP @MR1400              ; 次ｽﾃｯﾌﾟへ
MPP
ANB R41000               ; 背面SW有効表示
JMP @MR1407              ; 次ｽﾃｯﾌﾟへ
;連続循環完了  /  Ink circulation Fin.
STG @MR1406              ; 次ｽﾃｯﾌﾟへ
SET MR2900               ; 連続吐出完了FLG
CON
SET MR2902               ; ｻﾌﾞﾀﾝｸｲﾝｸ循環完了FLG
CON
JMP @MR1409              ; 次ｽﾃｯﾌﾟへ
;連続循環未完了  /  Ink circulation unfinished 
STG @MR1407              ; 次ｽﾃｯﾌﾟへ
RES MR2902               ; ｻﾌﾞﾀﾝｸｲﾝｸ循環完了FLG
CON
SET @MR104               ; Err79 連続吐出未完了
CON
JMP @MR1408              ; 次ｽﾃｯﾌﾟへ
STG @MR1408              ; 次ｽﾃｯﾌﾟへ
AND @MR107               ; Err79 Release
RES @MR107               ; Err79 Release
CON
JMP @MR1409              ; 次ｽﾃｯﾌﾟへ
;End process
STG @MR1409              ; 次ｽﾃｯﾌﾟへ
SET @MR002               ; 背面SW動作終了記憶
CON
RES MR12014              ; 背面ｲﾝｸ吐出起動中
CON
ANB MR12014              ; 背面ｲﾝｸ吐出起動中
MPS
RES @MR300
CON
RES DM753                ; 連続循環中画面表示
CON
RES DM754                ; 循環回数画面表示
CON
RES DM758                ; ｲﾝｸ捨て出し中画面表示
CON
RES DM759                ; ｲﾝｸ捨て出し回数画面表示
CON
ENDS
MPP
MOV DM757 DM527          ; ST3 Data07 連続捨てだし回数
;<h1/>  ｲﾝｸ捨て出し動作
;  Ink discharge
;捨て出し回数設定はﾀｯﾁﾊﾟﾈﾙより入力
;既存として3回→背面有効OFFで常時3回を代入する
STG @MR1900              ; 連続捨て出し
MPS
RES MR2900               ; 連続吐出完了FLG
CON
SET DM758                ; ｲﾝｸ捨て出し中画面表示
CON
SET DM759                ; ｲﾝｸ捨て出し回数画面表示
CON
JMP @MR1901              ; 捨て出し開始
MRD
MOV #0 DM755             ; ｲﾝｸ捨て出し回数
MPP
MOV DM527 DM756          ; ST3 Data07 連続捨てだし回数  ｲﾝｸ捨て出し回数(設定値)
STG @MR1901              ; 捨て出し開始
INC DM755                ; ｲﾝｸ捨て出し回数
CON
SET MR11804              ; ﾌﾟﾗﾝｼﾞｬｰ 1 前進call FLG
CON
SET MR11812              ; ﾌﾟﾗﾝｼﾞｬｰ 2 前進call FLG
CON
SET MR11904              ; ﾌﾟﾗﾝｼﾞｬｰ 3 前進call FLG
CON
SET MR11912              ; ﾌﾟﾗﾝｼﾞｬｰ 4 前進call FLG
CON
JMP @MR1902              ; 次ｽﾃｯﾌﾟへ
STG @MR1902              ; 次ｽﾃｯﾌﾟへ
AND MR11805              ; ﾌﾟﾗﾝｼﾞｬｰ 1 前進call 完了
AND MR11813              ; ﾌﾟﾗﾝｼﾞｬｰ 2 前進call 完了
AND MR11905              ; ﾌﾟﾗﾝｼﾞｬｰ 3 前進call 完了
AND MR11913              ; ﾌﾟﾗﾝｼﾞｬｰ 4 前進call 完了
RES MR11805              ; ﾌﾟﾗﾝｼﾞｬｰ 1 前進call 完了
CON
RES MR11813              ; ﾌﾟﾗﾝｼﾞｬｰ 2 前進call 完了
CON
RES MR11905              ; ﾌﾟﾗﾝｼﾞｬｰ 3 前進call 完了
CON
RES MR11913              ; ﾌﾟﾗﾝｼﾞｬｰ 4 前進call 完了
CON
JMP @MR1903              ; 次ｽﾃｯﾌﾟへ
STG @MR1903              ; 次ｽﾃｯﾌﾟへ
SET MR11800              ; ﾌﾟﾗﾝｼﾞｬｰ 1 後退call FLG
CON
SET MR11808              ; ﾌﾟﾗﾝｼﾞｬｰ 2 後退call FLG
CON
SET MR11900              ; ﾌﾟﾗﾝｼﾞｬｰ 3 後退call FLG
CON
SET MR11908              ; ﾌﾟﾗﾝｼﾞｬｰ 4 後退call FLG
CON
JMP @MR1904              ; 次ｽﾃｯﾌﾟへ
STG @MR1904              ; 次ｽﾃｯﾌﾟへ
AND MR11801              ; ﾌﾟﾗﾝｼﾞｬｰ 1 後退call 完了
AND MR11809              ; ﾌﾟﾗﾝｼﾞｬｰ 2  後退call 完了
AND MR11901              ; ﾌﾟﾗﾝｼﾞｬｰ 3 後退call 完了
AND MR11909              ; ﾌﾟﾗﾝｼﾞｬｰ 4 後退call 完了
RES MR11801              ; ﾌﾟﾗﾝｼﾞｬｰ 1 後退call 完了
CON
RES MR11809              ; ﾌﾟﾗﾝｼﾞｬｰ 2  後退call 完了
CON
RES MR11901              ; ﾌﾟﾗﾝｼﾞｬｰ 3 後退call 完了
CON
RES MR11909              ; ﾌﾟﾗﾝｼﾞｬｰ 4 後退call 完了
CON
JMP @MR1905              ; 次ｽﾃｯﾌﾟへ
STG @MR1905              ; 次ｽﾃｯﾌﾟへ
MPS
AND>= DM755 DM756        ; ｲﾝｸ捨て出し回数  ｲﾝｸ捨て出し回数(設定値)
MPS
AND R41000               ; 背面SW有効表示
JMP @MR1906              ; 次ｽﾃｯﾌﾟへ
MPP
ANB R41000               ; 背面SW有効表示
JMP @MR1906              ; 次ｽﾃｯﾌﾟへ
MPP
AND< DM755 DM756         ; ｲﾝｸ捨て出し回数  ｲﾝｸ捨て出し回数(設定値)
MPS
AND R41000               ; 背面SW有効表示
JMP @MR1901              ; 捨て出し開始
MPP
ANB R41000               ; 背面SW有効表示
JMP @MR1908              ; 次ｽﾃｯﾌﾟへ
;連続吐出完了
STG @MR1906              ; 次ｽﾃｯﾌﾟへ
JMP @MR1910              ; 次ｽﾃｯﾌﾟへ
;連続吐出未完了
STG @MR1908              ; 次ｽﾃｯﾌﾟへ
RES MR2900               ; 連続吐出完了FLG
CON
SET @MR112               ; Err81 連続捨て出し未完了
CON
JMP @MR1909              ; 次ｽﾃｯﾌﾟへ
STG @MR1909              ; 次ｽﾃｯﾌﾟへ
AND @MR115               ; Err81 Release
RES @MR112               ; Err81 連続捨て出し未完了
CON
JMP @MR1910              ; 次ｽﾃｯﾌﾟへ
;
STG @MR1910              ; 次ｽﾃｯﾌﾟへ
SET @MR002               ; 背面SW動作終了記憶
CON
RES MR12014              ; 背面ｲﾝｸ吐出起動中
CON
ANB MR12014              ; 背面ｲﾝｸ吐出起動中
RES DM758                ; ｲﾝｸ捨て出し中画面表示
CON
RES DM759                ; ｲﾝｸ捨て出し回数画面表示
CON
ENDS
;<h1/>  KDﾄﾞﾗﾑｲﾝｸ撹拌
;  KD drum Ink circulation
STG @MR2200              ; KDｲﾝｸ循環時間Call
MPS
RES MR2901               ; KDｲﾝｸ循環完了FLG
CON
SET DM739                ; インク循環画面表示
CON
JMP @MR2201              ; 次ｽﾃｯﾌﾟへ
MPP
MOV #0 DM735             ; ｲﾝｸ循環時間
STG @MR2201              ; 次ｽﾃｯﾌﾟへ
SET MR12308              ; KDﾄﾞﾗﾑ攪拌call
CON
JMP @MR2202              ; 次ｽﾃｯﾌﾟへ
STG @MR2202              ; 次ｽﾃｯﾌﾟへ
AND MR12309              ; KDﾄﾞﾗﾑ攪拌時間call 完了
RES MR12309              ; KDﾄﾞﾗﾑ攪拌時間call 完了
CON
MPS
AND MR2901               ; KDｲﾝｸ循環完了FLG
JMP @MR2215              ; 次ｽﾃｯﾌﾟへ
MPP
ANB MR2901               ; KDｲﾝｸ循環完了FLG
JMP @MR2203              ; 次ｽﾃｯﾌﾟへ
;ERR75 KDｲﾝｸ循環未完了
STG @MR2203              ; 次ｽﾃｯﾌﾟへ
SET @MR204               ; Err83 KDｲﾝｸ循環未完了
CON
JMP @MR2204              ; 次ｽﾃｯﾌﾟへ
STG @MR2204              ; 次ｽﾃｯﾌﾟへ
AND @MR207               ; Err83 Release
RES @MR207               ; Err83 Release
CON
JMP @MR2215              ; 次ｽﾃｯﾌﾟへ
;終了
STG @MR2215              ; 次ｽﾃｯﾌﾟへ
SET @MR002               ; 背面SW動作終了記憶
CON
RES MR12014              ; 背面ｲﾝｸ吐出起動中
CON
RES DM739                ; インク循環画面表示
CON
ENDS
;***** ﾊﾞﾌﾞﾘﾝｸﾞ中画面表示  / bubring  display ******
;
;<h1/>ﾊﾞﾌﾞﾘﾝｸﾞ画面表示制御
LDP MR12302              ; ｻﾌﾞﾀﾝｸ攪拌中
ORP MR12310              ; KDﾄﾞﾗﾑ攪拌中
DW #1 DM1498             ; Main画面上にﾊﾞﾌﾞﾘﾝｸﾞ中画面表示
LDB MR12302              ; ｻﾌﾞﾀﾝｸ攪拌中
ANB MR12310              ; KDﾄﾞﾗﾑ攪拌中
DW #0 DM1498             ; Main画面上にﾊﾞﾌﾞﾘﾝｸﾞ中画面表示
;***** ｲﾝｸ照合表示  / collation  display ******
;
;<h1/>INK照合画面表示制御
LDP MR12112              ; 照合要求画面表示
DW #1 DM1496             ; Main画面上に照合要求画表示
LD MR12112               ; 照合要求画面表示
OUT R41012               ; 照合要求表示
LDF MR12112              ; 照合要求画面表示
DW #0 DM1496             ; Main画面上に照合要求画表示
;<h1/>ｻﾌﾞﾙｰﾁﾝ
;Subroutine
;<h1/>  ﾌﾟﾗﾝｼﾞｬ1 後退制御
;  Plunger pump 1  BACK
STG MR11800              ; ﾌﾟﾗﾝｼﾞｬｰ 1 後退call FLG
SET MR11802              ; ﾌﾟﾗﾝｼﾞｬｰ 1 後退call 実行中
CON
JMP @MR2600              ; 次ｽﾃｯﾌﾟへ
STG @MR2600              ; 次ｽﾃｯﾌﾟへ
LDB MR12211              ; ｻﾃﾗｲﾄ無し
AND MR12209              ; ｱｷｭﾑﾚｰﾀｰ ｲﾝｸ供給OK
AND R5804                ; ｻﾃﾗｲﾄA ｾﾊﾟﾚﾙ 真空検出1
AND R5804                ; ｻﾃﾗｲﾄA ｾﾊﾟﾚﾙ 真空検出1
OR MR12211               ; ｻﾃﾗｲﾄ無し
ANL
MPS
RES MR8608               ; ｻﾃﾗｲﾄA ｲﾝｸ注入 1  開
CON
JMP @MR2601              ; 次ｽﾃｯﾌﾟへ
MPP
BMOV DM2710 DM2700 #5    ; RB6_P1 位置ﾃﾞｰﾀ(原点)  RB6移動目標位置
STG @MR2601              ; 次ｽﾃｯﾌﾟへ
TMH @10 @DM6             ; ﾊﾞﾙﾌﾞ切替安定時間
CON
AND @T10
JMP @MR2602              ; 次ｽﾃｯﾌﾟへ
STG @MR2602              ; 次ｽﾃｯﾌﾟへ
SET MR8609               ; ｻﾃﾗｲﾄA ｲﾝｸ開閉 1 開
CON
JMP @MR2603              ; 次ｽﾃｯﾌﾟへ
STG @MR2603              ; 次ｽﾃｯﾌﾟへ
TMH @11 @DM6             ; ﾊﾞﾙﾌﾞ切替安定時間
CON
AND @T11
JMP @MR2604              ; 次ｽﾃｯﾌﾟへ
STG @MR2604              ; 次ｽﾃｯﾌﾟへ
SET MR14405              ; RB6 PCON移動開始
CON
JMP @MR2605              ; 次ｽﾃｯﾌﾟへ
STG @MR2605              ; 次ｽﾃｯﾌﾟへ
AND MR14406              ; RB6 PCON移動完了
RES MR14406              ; RB6 PCON移動完了
CON
JMP @MR2606              ; 次ｽﾃｯﾌﾟへ
STG @MR2606              ; 次ｽﾃｯﾌﾟへ
JMP @MR2607              ; 次ｽﾃｯﾌﾟへ
BMOV DM2740 DM2700 #5    ; RB6_P4 位置ﾃﾞｰﾀ(ﾊﾞｯｸﾗｯｼｭ量)  RB6移動目標位置
STG @MR2607              ; 次ｽﾃｯﾌﾟへ
SET MR14405              ; RB6 PCON移動開始
CON
JMP @MR2608              ; 次ｽﾃｯﾌﾟへ
STG @MR2608              ; 次ｽﾃｯﾌﾟへ
AND MR14406              ; RB6 PCON移動完了
RES MR14406              ; RB6 PCON移動完了
CON
JMP @MR2609              ; 次ｽﾃｯﾌﾟへ
STG @MR2609              ; 次ｽﾃｯﾌﾟへ
TMH @30 @DM4             ; 引込安定時間
CON
AND @T30
JMP @MR2610              ; 次ｽﾃｯﾌﾟへ
STG @MR2610              ; 次ｽﾃｯﾌﾟへ
RES MR8609               ; ｻﾃﾗｲﾄA ｲﾝｸ開閉 1 開
CON
JMP @MR2611              ; 次ｽﾃｯﾌﾟへ
STG @MR2611              ; 次ｽﾃｯﾌﾟへ
SET MR11801              ; ﾌﾟﾗﾝｼﾞｬｰ 1 後退call 完了
CON
RES MR11802              ; ﾌﾟﾗﾝｼﾞｬｰ 1 後退call 実行中
CON
ENDS
;<h1/>  ﾌﾟﾗﾝｼﾞｬ1 前進制御
;  Plunger pump 1 FORWARD
STG MR11804              ; ﾌﾟﾗﾝｼﾞｬｰ 1 前進call FLG
AND LR1000               ; QR SR-1000
SET MR11806              ; ﾌﾟﾗﾝｼﾞｬｰ 1 前進call 実行中
CON
JMP @MR2700              ; 次ｽﾃｯﾌﾟ
STG @MR2700              ; 次ｽﾃｯﾌﾟ
MPS
LDB DM754                ; 循環回数画面表示
LD<> DM1490 #8           ; ﾃﾞｼﾞSW NO ORG
ORB MR12014              ; 背面ｲﾝｸ吐出起動中
ANL
ANL
BMOV DM2720 DM2700 #5    ; RB6_P2 位置ﾃﾞｰﾀ  RB6移動目標位置
MPS
LD= DM1490 #5            ; ﾃﾞｼﾞSW NO ORG
AND MR12014              ; 背面ｲﾝｸ吐出起動中
ANL
DW #6 DM2704             ; RB6移動速度
MRD
LD< W1BC6 #5             ; ｻﾃﾗｲﾄNo_from Host
AND>.L DM2720 +6000      ; RB6_P2 位置ﾃﾞｰﾀ
ANL
MPS
AND<=.L DM2726 +6000     ; PP1  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
MOV.L DM2726 DM2700      ; PP1  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ  RB6移動目標位置
MPP
AND>.L DM2726 +6000      ; PP1  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
MOV.L +6000 DM2700       ; RB6移動目標位置
MRD
LD= W1BC6 #5             ; ｻﾃﾗｲﾄNo_from Host
AND>.L DM2720 +7000      ; RB6_P2 位置ﾃﾞｰﾀ
ANL
MPS
AND<=.L DM2726 +7000     ; PP1  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
MOV.L DM2726 DM2700      ; PP1  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ  RB6移動目標位置
MPP
AND>.L DM2726 +7000      ; PP1  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
MOV.L +7000 DM2700       ; RB6移動目標位置
MPP
LD>= W1BC6 #6            ; ｻﾃﾗｲﾄNo_from Host
AND>.L DM2720 +7000      ; RB6_P2 位置ﾃﾞｰﾀ
ANL
MPS
AND<=.L DM2726 +7000     ; PP1  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
MOV.L DM2726 DM2700      ; PP1  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ  RB6移動目標位置
MPP
AND>.L DM2726 +7000      ; PP1  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
MOV.L +7000 DM2700       ; RB6移動目標位置
MRD
LD DM754                 ; 循環回数画面表示
LD= DM1490 #8            ; ﾃﾞｼﾞSW NO ORG
AND MR12014              ; 背面ｲﾝｸ吐出起動中
ORL
ANL
MPS
AND< W1BC6 #5            ; ｻﾃﾗｲﾄNo_from Host
MOV.L +6000 DM2700       ; RB6移動目標位置
MRD
AND= W1BC6 #5            ; ｻﾃﾗｲﾄNo_from Host
MOV.L +7000 DM2700       ; RB6移動目標位置
MRD
AND>= W1BC6 #6           ; ｻﾃﾗｲﾄNo_from Host
MOV.L +6000 DM2700       ; RB6移動目標位置
MPP
BMOV DM2722 DM2702 #3    ; RB6_P2 位置決め完了幅ﾃﾞｰﾀ  RB6位置決め完了幅
MPP
RES MR8609               ; ｻﾃﾗｲﾄA ｲﾝｸ開閉 1 開
CON
JMP @MR2701              ; 次ｽﾃｯﾌﾟ
STG @MR2701              ; 次ｽﾃｯﾌﾟ
TMH @12 @DM6             ; ﾊﾞﾙﾌﾞ切替安定時間
CON
AND @T12
JMP @MR2702              ; 次ｽﾃｯﾌﾟ
STG @MR2702              ; 次ｽﾃｯﾌﾟ
SET MR8608               ; ｻﾃﾗｲﾄA ｲﾝｸ注入 1  開
CON
JMP @MR2703              ; 次ｽﾃｯﾌﾟ
STG @MR2703              ; 次ｽﾃｯﾌﾟ
MPS
LDB DM754                ; 循環回数画面表示
ANB @MR300
ANL
SET MR8602               ; ｻﾃﾗｲﾄA 注入ﾍｯﾄﾞ1 注入 開
CON
RES MR8702               ; ｻﾃﾗｲﾄA 循環回収1
CON
JMP @MR2704              ; 次ｽﾃｯﾌﾟへ
MPP
LD DM754                 ; 循環回数画面表示
OR @MR300
ANL
RES MR8602               ; ｻﾃﾗｲﾄA 注入ﾍｯﾄﾞ1 注入 開
CON
SET MR8702               ; ｻﾃﾗｲﾄA 循環回収1
CON
SET MR8614               ; ｻﾃﾗｲﾄA 循環回収
CON
JMP @MR2704              ; 次ｽﾃｯﾌﾟへ
STG @MR2704              ; 次ｽﾃｯﾌﾟへ
TMH @13 @DM6             ; ﾊﾞﾙﾌﾞ切替安定時間
CON
AND @T13
SET MR14405              ; RB6 PCON移動開始
CON
JMP @MR2705              ; 次ｽﾃｯﾌﾟ
STG @MR2705              ; 次ｽﾃｯﾌﾟ
AND MR14406              ; RB6 PCON移動完了
RES MR14406              ; RB6 PCON移動完了
CON
RES MR8608               ; ｻﾃﾗｲﾄA ｲﾝｸ注入 1  開
CON
RES MR8602               ; ｻﾃﾗｲﾄA 注入ﾍｯﾄﾞ1 注入 開
CON
JMP @MR2706              ; 次ｽﾃｯﾌﾟへ
STG @MR2706              ; 次ｽﾃｯﾌﾟへ
MPS
LDB DM753                ; 連続循環中画面表示
ANB @MR300
ANL
SET MR8608               ; ｻﾃﾗｲﾄA ｲﾝｸ注入 1  開
CON
SET MR8602               ; ｻﾃﾗｲﾄA 注入ﾍｯﾄﾞ1 注入 開
CON
JMP @MR2707              ; 次ｽﾃｯﾌﾟ
MPP
LD DM753                 ; 連続循環中画面表示
OR @MR300
ANL
JMP @MR2707              ; 次ｽﾃｯﾌﾟ
STG @MR2707              ; 次ｽﾃｯﾌﾟ
TMH @40 @DM0             ; 注入安定時間L
CON
AND @T40
RES MR8608               ; ｻﾃﾗｲﾄA ｲﾝｸ注入 1  開
CON
RES MR8602               ; ｻﾃﾗｲﾄA 注入ﾍｯﾄﾞ1 注入 開
CON
RES MR8702               ; ｻﾃﾗｲﾄA 循環回収1
CON
RES MR8614               ; ｻﾃﾗｲﾄA 循環回収
CON
JMP @MR2708              ; 次ｽﾃｯﾌﾟへ
STG @MR2708              ; 次ｽﾃｯﾌﾟへ
SET MR11805              ; ﾌﾟﾗﾝｼﾞｬｰ 1 前進call 完了
CON
RES MR11806              ; ﾌﾟﾗﾝｼﾞｬｰ 1 前進call 実行中
CON
ENDS
;<h1/>  ﾌﾟﾗﾝｼﾞｬ2 後退制御
;  Plunger pump 2 BACK
STG MR11808              ; ﾌﾟﾗﾝｼﾞｬｰ 2 後退call FLG
SET MR11810              ; ﾌﾟﾗﾝｼﾞｬｰ 2 後退call 実行中
CON
JMP @MR2800              ; 次ｽﾃｯﾌﾟへ
STG @MR2800              ; 次ｽﾃｯﾌﾟへ
LDB MR12211              ; ｻﾃﾗｲﾄ無し
AND MR12209              ; ｱｷｭﾑﾚｰﾀｰ ｲﾝｸ供給OK
AND R5804                ; ｻﾃﾗｲﾄA ｾﾊﾟﾚﾙ 真空検出1
AND R5804                ; ｻﾃﾗｲﾄA ｾﾊﾟﾚﾙ 真空検出1
OR MR12211               ; ｻﾃﾗｲﾄ無し
ANL
MPS
RES MR8610               ; ｻﾃﾗｲﾄA ｲﾝｸ注入 2 開
CON
JMP @MR2801              ; 次ｽﾃｯﾌﾟへ
MPP
BMOV DM2760 DM2750 #5    ; RB7_P1 位置ﾃﾞｰﾀ(原点)  RB7移動目標位置
STG @MR2801              ; 次ｽﾃｯﾌﾟへ
TMH @14 @DM6             ; ﾊﾞﾙﾌﾞ切替安定時間
CON
AND @T14
JMP @MR2802              ; 次ｽﾃｯﾌﾟへ
STG @MR2802              ; 次ｽﾃｯﾌﾟへ
SET MR8611               ; ｻﾃﾗｲﾄA ｲﾝｸ開閉 2  開
CON
JMP @MR2803              ; 次ｽﾃｯﾌﾟへ
STG @MR2803              ; 次ｽﾃｯﾌﾟへ
TMH @15 @DM6             ; ﾊﾞﾙﾌﾞ切替安定時間
CON
AND @T15
JMP @MR2804              ; 次ｽﾃｯﾌﾟへ
STG @MR2804              ; 次ｽﾃｯﾌﾟへ
SET MR14505              ; RB7 PCON移動開始
CON
JMP @MR2805              ; 次ｽﾃｯﾌﾟへ
STG @MR2805              ; 次ｽﾃｯﾌﾟへ
AND MR14506              ; RB7 PCON移動完了
RES MR14506              ; RB7 PCON移動完了
CON
JMP @MR2806              ; 次ｽﾃｯﾌﾟへ
STG @MR2806              ; 次ｽﾃｯﾌﾟへ
JMP @MR2807              ; 次ｽﾃｯﾌﾟへ
BMOV DM2790 DM2750 #5    ; RB7_P4 位置ﾃﾞｰﾀ(ﾊﾞｯｸﾗｯｼｭ量)  RB7移動目標位置
STG @MR2807              ; 次ｽﾃｯﾌﾟへ
SET MR14505              ; RB7 PCON移動開始
CON
JMP @MR2808              ; 次ｽﾃｯﾌﾟへ
STG @MR2808              ; 次ｽﾃｯﾌﾟへ
AND MR14506              ; RB7 PCON移動完了
RES MR14506              ; RB7 PCON移動完了
CON
JMP @MR2809              ; 次ｽﾃｯﾌﾟへ
STG @MR2809              ; 次ｽﾃｯﾌﾟへ
TMH @31 @DM4             ; 引込安定時間
CON
AND @T31
JMP @MR2810              ; 次ｽﾃｯﾌﾟへ
STG @MR2810              ; 次ｽﾃｯﾌﾟへ
RES MR8611               ; ｻﾃﾗｲﾄA ｲﾝｸ開閉 2  開
CON
JMP @MR2811              ; 次ｽﾃｯﾌﾟへ
STG @MR2811              ; 次ｽﾃｯﾌﾟへ
SET MR11809              ; ﾌﾟﾗﾝｼﾞｬｰ 2  後退call 完了
CON
RES MR11810              ; ﾌﾟﾗﾝｼﾞｬｰ 2 後退call 実行中
CON
ENDS
;<h1/>  ﾌﾟﾗﾝｼﾞｬ2 前進制御
;  Plunger pump 2 FORWARD
STG MR11812              ; ﾌﾟﾗﾝｼﾞｬｰ 2 前進call FLG
SET MR11814              ; ﾌﾟﾗﾝｼﾞｬｰ 2 前進call 実行中
CON
JMP @MR2900              ; 次ｽﾃｯﾌﾟへ
STG @MR2900              ; 次ｽﾃｯﾌﾟへ
MPS
LDB DM754                ; 循環回数画面表示
LD<> DM1490 #8           ; ﾃﾞｼﾞSW NO ORG
ORB MR12014              ; 背面ｲﾝｸ吐出起動中
ANL
ANL
BMOV DM2770 DM2750 #5    ; RB7_P2 位置ﾃﾞｰﾀ  RB7移動目標位置
MPS
LD= DM1490 #5            ; ﾃﾞｼﾞSW NO ORG
AND MR12014              ; 背面ｲﾝｸ吐出起動中
ANL
DW #6 DM2754             ; RB7移動速度
MRD
LD< W1BC6 #5             ; ｻﾃﾗｲﾄNo_from Host
AND>.L DM2770 +6000      ; RB7_P2 位置ﾃﾞｰﾀ
ANL
MPS
AND<=.L DM2776 +6000     ; PP2  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
MOV.L DM2776 DM2750      ; PP2  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ  RB7移動目標位置
MPP
AND>.L DM2776 +6000      ; PP2  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
MOV.L +6000 DM2750       ; RB7移動目標位置
MRD
LD= W1BC6 #5             ; ｻﾃﾗｲﾄNo_from Host
AND>.L DM2770 +7000      ; RB7_P2 位置ﾃﾞｰﾀ
ANL
MPS
AND<=.L DM2776 +7000     ; PP2  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
MOV.L DM2776 DM2750      ; PP2  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ  RB7移動目標位置
MPP
AND>.L DM2776 +7000      ; PP2  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
MOV.L +7000 DM2750       ; RB7移動目標位置
MPP
LD>= W1BC6 #6            ; ｻﾃﾗｲﾄNo_from Host
AND>.L DM2770 +7000      ; RB7_P2 位置ﾃﾞｰﾀ
ANL
MPS
AND<=.L DM2776 +7000     ; PP2  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
MOV.L DM2776 DM2750      ; PP2  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ  RB7移動目標位置
MPP
AND>.L DM2776 +7000      ; PP2  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
MOV.L +7000 DM2750       ; RB7移動目標位置
MRD
LD DM754                 ; 循環回数画面表示
LD= DM1490 #8            ; ﾃﾞｼﾞSW NO ORG
AND MR12014              ; 背面ｲﾝｸ吐出起動中
ORL
ANL
MPS
AND< W1BC6 #5            ; ｻﾃﾗｲﾄNo_from Host
MOV.L +6000 DM2750       ; RB7移動目標位置
MRD
AND= W1BC6 #5            ; ｻﾃﾗｲﾄNo_from Host
MOV.L +7000 DM2750       ; RB7移動目標位置
MRD
AND>= W1BC6 #6           ; ｻﾃﾗｲﾄNo_from Host
MOV.L +6000 DM2750       ; RB7移動目標位置
MPP
BMOV DM2772 DM2752 #3    ; RB7_P2 位置決め完了幅ﾃﾞｰﾀ  RB7位置決め完了幅
MPP
RES MR8611               ; ｻﾃﾗｲﾄA ｲﾝｸ開閉 2  開
CON
JMP @MR2901              ; 次ｽﾃｯﾌﾟへ
STG @MR2901              ; 次ｽﾃｯﾌﾟへ
TMH @16 @DM6             ; ﾊﾞﾙﾌﾞ切替安定時間
CON
AND @T16
JMP @MR2902              ; 次ｽﾃｯﾌﾟへ
STG @MR2902              ; 次ｽﾃｯﾌﾟへ
SET MR8610               ; ｻﾃﾗｲﾄA ｲﾝｸ注入 2 開
CON
JMP @MR2903              ; 次ｽﾃｯﾌﾟへ
STG @MR2903              ; 次ｽﾃｯﾌﾟへ
MPS
LDB DM754                ; 循環回数画面表示
ANB @MR300
ANL
SET MR8606               ; ｻﾃﾗｲﾄA 注入ﾍｯﾄﾞ2 注入 開
CON
RES MR8703               ; ｻﾃﾗｲﾄA 循環回収2
CON
JMP @MR2904              ; 次ｽﾃｯﾌﾟへ
MPP
LD DM754                 ; 循環回数画面表示
OR @MR300
ANL
RES MR8606               ; ｻﾃﾗｲﾄA 注入ﾍｯﾄﾞ2 注入 開
CON
SET MR8703               ; ｻﾃﾗｲﾄA 循環回収2
CON
SET MR8614               ; ｻﾃﾗｲﾄA 循環回収
CON
JMP @MR2904              ; 次ｽﾃｯﾌﾟへ
STG @MR2904              ; 次ｽﾃｯﾌﾟへ
TMH @17 @DM6             ; ﾊﾞﾙﾌﾞ切替安定時間
CON
AND @T17
JMP @MR2905              ; 次ｽﾃｯﾌﾟへ
STG @MR2905              ; 次ｽﾃｯﾌﾟへ
SET MR14505              ; RB7 PCON移動開始
CON
JMP @MR2906              ; 次ｽﾃｯﾌﾟへ
STG @MR2906              ; 次ｽﾃｯﾌﾟへ
AND MR14506              ; RB7 PCON移動完了
RES MR14506              ; RB7 PCON移動完了
CON
JMP @MR2907              ; 次ｽﾃｯﾌﾟへ
STG @MR2907              ; 次ｽﾃｯﾌﾟへ
RES MR8610               ; ｻﾃﾗｲﾄA ｲﾝｸ注入 2 開
CON
RES MR8606               ; ｻﾃﾗｲﾄA 注入ﾍｯﾄﾞ2 注入 開
CON
JMP @MR2908              ; 次ｽﾃｯﾌﾟへ
STG @MR2908              ; 次ｽﾃｯﾌﾟへ
MPS
LDB DM753                ; 連続循環中画面表示
ANB @MR300
ANL
SET MR8610               ; ｻﾃﾗｲﾄA ｲﾝｸ注入 2 開
CON
SET MR8606               ; ｻﾃﾗｲﾄA 注入ﾍｯﾄﾞ2 注入 開
CON
JMP @MR2909              ; 次ｽﾃｯﾌﾟへ
MPP
LD DM753                 ; 連続循環中画面表示
OR @MR300
ANL
JMP @MR2909              ; 次ｽﾃｯﾌﾟへ
STG @MR2909              ; 次ｽﾃｯﾌﾟへ
TMH @41 @DM0             ; 注入安定時間L
CON
AND @T41
RES MR8610               ; ｻﾃﾗｲﾄA ｲﾝｸ注入 2 開
CON
RES MR8606               ; ｻﾃﾗｲﾄA 注入ﾍｯﾄﾞ2 注入 開
CON
RES MR8703               ; ｻﾃﾗｲﾄA 循環回収2
CON
RES MR8614               ; ｻﾃﾗｲﾄA 循環回収
CON
JMP @MR2910              ; 次ｽﾃｯﾌﾟへ
STG @MR2910              ; 次ｽﾃｯﾌﾟへ
SET MR11813              ; ﾌﾟﾗﾝｼﾞｬｰ 2 前進call 完了
CON
RES MR11814              ; ﾌﾟﾗﾝｼﾞｬｰ 2 前進call 実行中
CON
ENDS
;<h1/>  ﾌﾟﾗﾝｼﾞｬ3 後退制御
;  Plunger pump 3  BACK
STG MR11900              ; ﾌﾟﾗﾝｼﾞｬｰ 3 後退call FLG
SET MR11902              ; ﾌﾟﾗﾝｼﾞｬｰ 3 後退call 実行中
CON
JMP @MR3000
STG @MR3000
LDB MR12211              ; ｻﾃﾗｲﾄ無し
AND MR12209              ; ｱｷｭﾑﾚｰﾀｰ ｲﾝｸ供給OK
AND R5904                ; ｻﾃﾗｲﾄB ｾﾊﾟﾚﾙ 真空検出1
AND R5904                ; ｻﾃﾗｲﾄB ｾﾊﾟﾚﾙ 真空検出1
OR MR12211               ; ｻﾃﾗｲﾄ無し
ANL
MPS
RES MR8808               ; ｻﾃﾗｲﾄB ｲﾝｸ注入 1  開
CON
JMP @MR3001
MPP
BMOV DM2810 DM2800 #5    ; RB8_P1 位置ﾃﾞｰﾀ(原点)  RB8移動目標位置
STG @MR3001
TMH @18 @DM6             ; ﾊﾞﾙﾌﾞ切替安定時間
CON
AND @T18
JMP @MR3002
STG @MR3002
SET MR8809               ; ｻﾃﾗｲﾄB ｲﾝｸ開閉 1 開
CON
JMP @MR3003
STG @MR3003
TMH @19 @DM6             ; ﾊﾞﾙﾌﾞ切替安定時間
CON
AND @T19
JMP @MR3004
STG @MR3004
SET MR14605              ; RB8 PCON移動開始
CON
JMP @MR3005
STG @MR3005
AND MR14606              ; RB8 PCON移動完了
RES MR14606              ; RB8 PCON移動完了
CON
JMP @MR3006
STG @MR3006
JMP @MR3007
BMOV DM2840 DM2800 #5    ; RB8_P4 位置ﾃﾞｰﾀ(ﾊﾞｯｸﾗｯｼｭ量)  RB8移動目標位置
STG @MR3007
SET MR14605              ; RB8 PCON移動開始
CON
JMP @MR3008
STG @MR3008
AND MR14606              ; RB8 PCON移動完了
RES MR14606              ; RB8 PCON移動完了
CON
JMP @MR3009
STG @MR3009
TMH @32 @DM4             ; 引込安定時間
CON
AND @T32
JMP @MR3010
STG @MR3010
RES MR8809               ; ｻﾃﾗｲﾄB ｲﾝｸ開閉 1 開
CON
JMP @MR3011
STG @MR3011
SET MR11901              ; ﾌﾟﾗﾝｼﾞｬｰ 3 後退call 完了
CON
RES MR11902              ; ﾌﾟﾗﾝｼﾞｬｰ 3 後退call 実行中
CON
ENDS
;<h1/>  ﾌﾟﾗﾝｼﾞｬ3 前進制御
;  Plunger pump 3 FORWARD
STG MR11904              ; ﾌﾟﾗﾝｼﾞｬｰ 3 前進call FLG
SET MR11906              ; ﾌﾟﾗﾝｼﾞｬｰ 3 前進call 実行中
CON
JMP @MR3100
STG @MR3100
MPS
LDB DM754                ; 循環回数画面表示
LD<> DM1490 #8           ; ﾃﾞｼﾞSW NO ORG
ORB MR12014              ; 背面ｲﾝｸ吐出起動中
ANL
ANL
BMOV DM2820 DM2800 #5    ; RB8_P2 位置ﾃﾞｰﾀ  RB8移動目標位置
MPS
LD= DM1490 #5            ; ﾃﾞｼﾞSW NO ORG
AND MR12014              ; 背面ｲﾝｸ吐出起動中
ANL
DW #6 DM2804             ; RB8移動速度
MRD
LD< W1BC6 #5             ; ｻﾃﾗｲﾄNo_from Host
AND>.L DM2820 +6000      ; RB8_P2 位置ﾃﾞｰﾀ
ANL
MPS
AND<=.L DM2826 +6000     ; PP3  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
MOV.L DM2826 DM2800      ; PP3  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ  RB8移動目標位置
MPP
AND>.L DM2826 +6000      ; PP3  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
MOV.L +6000 DM2800       ; RB8移動目標位置
MRD
LD= W1BC6 #5             ; ｻﾃﾗｲﾄNo_from Host
AND>.L DM2820 +7000      ; RB8_P2 位置ﾃﾞｰﾀ
ANL
MPS
AND<=.L DM2826 +7000     ; PP3  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
MOV.L DM2826 DM2800      ; PP3  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ  RB8移動目標位置
MPP
AND>.L DM2826 +7000      ; PP3  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
MOV.L +7000 DM2800       ; RB8移動目標位置
MPP
LD>= W1BC6 #6            ; ｻﾃﾗｲﾄNo_from Host
AND>.L DM2820 +7000      ; RB8_P2 位置ﾃﾞｰﾀ
ANL
MPS
AND<=.L DM2826 +7000     ; PP3  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
MOV.L DM2826 DM2800      ; PP3  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ  RB8移動目標位置
MPP
AND>.L DM2826 +7000      ; PP3  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
MOV.L +7000 DM2800       ; RB8移動目標位置
MRD
LD DM754                 ; 循環回数画面表示
LD= DM1490 #8            ; ﾃﾞｼﾞSW NO ORG
AND MR12014              ; 背面ｲﾝｸ吐出起動中
ORL
ANL
MPS
AND< W1BC6 #5            ; ｻﾃﾗｲﾄNo_from Host
MOV.L +6000 DM2800       ; RB8移動目標位置
MRD
AND= W1BC6 #5            ; ｻﾃﾗｲﾄNo_from Host
MOV.L +7000 DM2800       ; RB8移動目標位置
MRD
AND>= W1BC6 #6           ; ｻﾃﾗｲﾄNo_from Host
MOV.L +6000 DM2800       ; RB8移動目標位置
MPP
BMOV DM2822 DM2802 #3    ; RB8_P2 位置決め完了幅ﾃﾞｰﾀ  RB8位置決め完了幅
MPP
RES MR8809               ; ｻﾃﾗｲﾄB ｲﾝｸ開閉 1 開
CON
JMP @MR3101
STG @MR3101
TMH @20 @DM6             ; ﾊﾞﾙﾌﾞ切替安定時間
CON
AND @T20
JMP @MR3102
STG @MR3102
SET MR8808               ; ｻﾃﾗｲﾄB ｲﾝｸ注入 1  開
CON
JMP @MR3103
STG @MR3103
MPS
LDB DM754                ; 循環回数画面表示
ANB @MR300
ANL
SET MR8802               ; ｻﾃﾗｲﾄB 注入ﾍｯﾄﾞ1 注入 開
CON
RES MR8902               ; ｻﾃﾗｲﾄB 循環回収1
CON
JMP @MR3104
MPP
LD DM754                 ; 循環回数画面表示
OR @MR300
ANL
RES MR8802               ; ｻﾃﾗｲﾄB 注入ﾍｯﾄﾞ1 注入 開
CON
SET MR8902               ; ｻﾃﾗｲﾄB 循環回収1
CON
SET MR8814               ; ｻﾃﾗｲﾄB 循環回収
CON
JMP @MR3104
STG @MR3104
TMH @21 @DM6             ; ﾊﾞﾙﾌﾞ切替安定時間
CON
AND @T21
SET MR14605              ; RB8 PCON移動開始
CON
JMP @MR3105
STG @MR3105
AND MR14606              ; RB8 PCON移動完了
RES MR14606              ; RB8 PCON移動完了
CON
RES MR8808               ; ｻﾃﾗｲﾄB ｲﾝｸ注入 1  開
CON
RES MR8802               ; ｻﾃﾗｲﾄB 注入ﾍｯﾄﾞ1 注入 開
CON
JMP @MR3106
STG @MR3106
MPS
LDB DM753                ; 連続循環中画面表示
ANB @MR300
ANL
SET MR8808               ; ｻﾃﾗｲﾄB ｲﾝｸ注入 1  開
CON
SET MR8802               ; ｻﾃﾗｲﾄB 注入ﾍｯﾄﾞ1 注入 開
CON
JMP @MR3107
MPP
LD DM753                 ; 連続循環中画面表示
OR @MR300
ANL
JMP @MR3107
STG @MR3107
TMH @42 @DM0             ; 注入安定時間L
CON
AND @T42
RES MR8808               ; ｻﾃﾗｲﾄB ｲﾝｸ注入 1  開
CON
RES MR8802               ; ｻﾃﾗｲﾄB 注入ﾍｯﾄﾞ1 注入 開
CON
RES MR8902               ; ｻﾃﾗｲﾄB 循環回収1
CON
RES MR8814               ; ｻﾃﾗｲﾄB 循環回収
CON
JMP @MR3108
STG @MR3108
SET MR11905              ; ﾌﾟﾗﾝｼﾞｬｰ 3 前進call 完了
CON
RES MR11906              ; ﾌﾟﾗﾝｼﾞｬｰ 3 前進call 実行中
CON
ENDS
;<h1/>  ﾌﾟﾗﾝｼﾞｬ4 後退制御
;  Plunger pump 4 BACK
STG MR11908              ; ﾌﾟﾗﾝｼﾞｬｰ 4 後退call FLG
SET MR11910              ; ﾌﾟﾗﾝｼﾞｬｰ 4 後退call 実行中
CON
JMP @MR3200
STG @MR3200
LDB MR12211              ; ｻﾃﾗｲﾄ無し
AND MR12209              ; ｱｷｭﾑﾚｰﾀｰ ｲﾝｸ供給OK
AND R5904                ; ｻﾃﾗｲﾄB ｾﾊﾟﾚﾙ 真空検出1
AND R5904                ; ｻﾃﾗｲﾄB ｾﾊﾟﾚﾙ 真空検出1
OR MR12211               ; ｻﾃﾗｲﾄ無し
ANL
MPS
RES MR8810               ; ｻﾃﾗｲﾄB ｲﾝｸ注入 2 開
CON
JMP @MR3201
MPP
BMOV DM2860 DM2850 #5    ; RB9_P1 位置ﾃﾞｰﾀ(原点)  RB9移動目標位置
STG @MR3201
TMH @22 @DM6             ; ﾊﾞﾙﾌﾞ切替安定時間
CON
AND @T22
JMP @MR3202
STG @MR3202
SET MR8811               ; ｻﾃﾗｲﾄB ｲﾝｸ開閉 2  開
CON
JMP @MR3203
STG @MR3203
TMH @23 @DM6             ; ﾊﾞﾙﾌﾞ切替安定時間
CON
AND @T23
JMP @MR3204
STG @MR3204
SET MR14705              ; RB9 PCON移動開始
CON
JMP @MR3205
STG @MR3205
AND MR14706              ; RB9 PCON移動完了
RES MR14706              ; RB9 PCON移動完了
CON
JMP @MR3206
STG @MR3206
JMP @MR3207
BMOV DM2890 DM2850 #5    ; RB9_P4 位置ﾃﾞｰﾀ(ﾊﾞｯｸﾗｯｼｭ量)  RB9移動目標位置
STG @MR3207
SET MR14705              ; RB9 PCON移動開始
CON
JMP @MR3208
STG @MR3208
AND MR14706              ; RB9 PCON移動完了
RES MR14706              ; RB9 PCON移動完了
CON
JMP @MR3209
STG @MR3209
TMH @33 @DM4             ; 引込安定時間
CON
AND @T33
JMP @MR3210
STG @MR3210
RES MR8811               ; ｻﾃﾗｲﾄB ｲﾝｸ開閉 2  開
CON
JMP @MR3211
STG @MR3211
SET MR11909              ; ﾌﾟﾗﾝｼﾞｬｰ 4 後退call 完了
CON
RES MR11910              ; ﾌﾟﾗﾝｼﾞｬｰ 4 後退call 実行中
CON
ENDS
;<h1/>  ﾌﾟﾗﾝｼﾞｬ4 前進制御
;  Plunger pump 4 FORWARD
STG MR11912              ; ﾌﾟﾗﾝｼﾞｬｰ 4 前進call FLG
SET MR11914              ; ﾌﾟﾗﾝｼﾞｬｰ 4 前進call 実行中
CON
JMP @MR3300
STG @MR3300
MPS
LDB DM754                ; 循環回数画面表示
LD<> DM1490 #8           ; ﾃﾞｼﾞSW NO ORG
ORB MR12014              ; 背面ｲﾝｸ吐出起動中
ANL
ANL
BMOV DM2870 DM2850 #5    ; RB9_P2 位置ﾃﾞｰﾀ  RB9移動目標位置
MPS
LD= DM1490 #5            ; ﾃﾞｼﾞSW NO ORG
AND MR12014              ; 背面ｲﾝｸ吐出起動中
ANL
DW #6 DM2854             ; RB9移動速度
MRD
LD< W1BC6 #5             ; ｻﾃﾗｲﾄNo_from Host
AND>.L DM2870 +6000      ; RB9_P2 位置ﾃﾞｰﾀ
ANL
MPS
AND<=.L DM2876 +6000     ; PP4  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
MOV.L DM2876 DM2850      ; PP4  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ  RB9移動目標位置
MPP
AND>.L DM2876 +6000      ; PP4  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
MOV.L +6000 DM2850       ; RB9移動目標位置
MRD
LD= W1BC6 #5             ; ｻﾃﾗｲﾄNo_from Host
AND>.L DM2870 +7000      ; RB9_P2 位置ﾃﾞｰﾀ
ANL
MPS
AND<=.L DM2876 +7000     ; PP4  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
MOV.L DM2876 DM2850      ; PP4  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ  RB9移動目標位置
MPP
AND>.L DM2876 +7000      ; PP4  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
MOV.L +7000 DM2850       ; RB9移動目標位置
MPP
LD>= W1BC6 #6            ; ｻﾃﾗｲﾄNo_from Host
AND>.L DM2870 +7000      ; RB9_P2 位置ﾃﾞｰﾀ
ANL
MPS
AND<=.L DM2876 +7000     ; PP4  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
MOV.L DM2876 DM2850      ; PP4  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ  RB9移動目標位置
MPP
AND>.L DM2876 +7000      ; PP4  複数回ｽﾄﾛｰｸ用位置ﾃﾞｰﾀ
MOV.L +7000 DM2850       ; RB9移動目標位置
MRD
LD DM754                 ; 循環回数画面表示
LD= DM1490 #8            ; ﾃﾞｼﾞSW NO ORG
AND MR12014              ; 背面ｲﾝｸ吐出起動中
ORL
ANL
MPS
AND< W1BC6 #5            ; ｻﾃﾗｲﾄNo_from Host
MOV.L +6000 DM2850       ; RB9移動目標位置
MRD
AND= W1BC6 #5            ; ｻﾃﾗｲﾄNo_from Host
MOV.L +7000 DM2850       ; RB9移動目標位置
MRD
AND>= W1BC6 #6           ; ｻﾃﾗｲﾄNo_from Host
MOV.L +6000 DM2850       ; RB9移動目標位置
MPP
BMOV DM2872 DM2852 #3    ; RB9_P2 位置決め完了幅ﾃﾞｰﾀ  RB9位置決め完了幅
MPP
RES MR8811               ; ｻﾃﾗｲﾄB ｲﾝｸ開閉 2  開
CON
JMP @MR3301
STG @MR3301
TMH @24 @DM6             ; ﾊﾞﾙﾌﾞ切替安定時間
CON
AND @T24
JMP @MR3302
STG @MR3302
SET MR8810               ; ｻﾃﾗｲﾄB ｲﾝｸ注入 2 開
CON
JMP @MR3303
STG @MR3303
MPS
LDB DM754                ; 循環回数画面表示
ANB @MR300
ANL
SET MR8806               ; ｻﾃﾗｲﾄB 注入ﾍｯﾄﾞ2 注入 開
CON
RES MR8903               ; ｻﾃﾗｲﾄB 循環回収2
CON
JMP @MR3304
MPP
LD DM754                 ; 循環回数画面表示
OR @MR300
ANL
RES MR8806               ; ｻﾃﾗｲﾄB 注入ﾍｯﾄﾞ2 注入 開
CON
SET MR8903               ; ｻﾃﾗｲﾄB 循環回収2
CON
SET MR8814               ; ｻﾃﾗｲﾄB 循環回収
CON
JMP @MR3304
STG @MR3304
TMH @25 @DM6             ; ﾊﾞﾙﾌﾞ切替安定時間
CON
AND @T25
JMP @MR3305
STG @MR3305
SET MR14705              ; RB9 PCON移動開始
CON
JMP @MR3306
STG @MR3306
AND MR14706              ; RB9 PCON移動完了
RES MR14706              ; RB9 PCON移動完了
CON
JMP @MR3307
STG @MR3307
RES MR8810               ; ｻﾃﾗｲﾄB ｲﾝｸ注入 2 開
CON
RES MR8806               ; ｻﾃﾗｲﾄB 注入ﾍｯﾄﾞ2 注入 開
CON
JMP @MR3308
STG @MR3308
MPS
LDB DM753                ; 連続循環中画面表示
ANB @MR300
ANL
SET MR8810               ; ｻﾃﾗｲﾄB ｲﾝｸ注入 2 開
CON
SET MR8806               ; ｻﾃﾗｲﾄB 注入ﾍｯﾄﾞ2 注入 開
CON
JMP @MR3309
MPP
LD DM753                 ; 連続循環中画面表示
OR @MR300
ANL
JMP @MR3309
STG @MR3309
TMH @43 @DM0             ; 注入安定時間L
CON
AND @T43
RES MR8810               ; ｻﾃﾗｲﾄB ｲﾝｸ注入 2 開
CON
RES MR8806               ; ｻﾃﾗｲﾄB 注入ﾍｯﾄﾞ2 注入 開
CON
RES MR8903               ; ｻﾃﾗｲﾄB 循環回収2
CON
RES MR8814               ; ｻﾃﾗｲﾄB 循環回収
CON
JMP @MR3310
STG @MR3310
SET MR11913              ; ﾌﾟﾗﾝｼﾞｬｰ 4 前進call 完了
CON
RES MR11914              ; ﾌﾟﾗﾝｼﾞｬｰ 4 前進call 実行中
CON
ENDS
;<h1/>ERR
;Erorr Subroutine
;***** 連続循環完了表示  ERROR NO 80  /  Consective discharge finishing display  *****
;
STG @MR100               ; Err78 連続吐出完了
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
JMP @MR101               ; 101
MOV #80 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR101               ; 101
AND R50008               ; Error
JMP @MR102               ; 102
STG @MR102               ; 102
ANB R50008               ; Error
SET @MR103               ; Err Release
CON
ENDS
;***** 連続循環未完了表示  ERROR NO 81  /  Consective discharge non-finishing display  *****
;
STG @MR104               ; Err79 連続吐出未完了
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
SET LR49914              ; ｴﾗｰﾘｾｯﾄｷｰ要求
CON
JMP @MR105               ; 105
MOV #81 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR105               ; 105
AND R50008               ; Error
JMP @MR106               ; 106
STG @MR106               ; 106
ANB R50008               ; Error
SET @MR107               ; Err79 Release
CON
ENDS
;***** 連続吐出完了表示  ERROR NO 82  /  Consective discharge finishing display  *****
;
STG @MR108               ; Err80 連続捨て出し完了
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
JMP @MR109               ; 109
MOV #82 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR109               ; 109
AND R50008               ; Error
JMP @MR110               ; 110
STG @MR110               ; 110
ANB R50008               ; Error
SET @MR111               ; Err80 Release
CON
ENDS
;***** 連続吐出未完了表示  ERROR NO 83  /  Consective discharge non-finishing display  *****
;
STG @MR112               ; Err81 連続捨て出し未完了
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
SET LR49914              ; ｴﾗｰﾘｾｯﾄｷｰ要求
CON
JMP @MR113               ; 113
MOV #83 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR113               ; 113
AND R50008               ; Error
JMP @MR114               ; 114
STG @MR114               ; 114
ANB R50008               ; Error
SET @MR115               ; Err81 Release
CON
ENDS
;***** KDｲﾝｸ循環完了表示  ERROR NO 84  /  KD Ink discharge finishing display  *****
;
STG @MR200               ; Err82 KDｲﾝｸ循環完了
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
JMP @MR201               ; 201
MOV #84 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR201               ; 201
AND R50008               ; Error
JMP @MR202               ; 202
STG @MR202               ; 202
ANB R50008               ; Error
SET @MR203               ; Err82 Release
CON
ENDS
;***** KDｲﾝｸ循環未完了表示  ERROR NO 85  /  KD Ink discharge non-finishing display  *****
;
STG @MR204               ; Err83 KDｲﾝｸ循環未完了
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
SET LR49914              ; ｴﾗｰﾘｾｯﾄｷｰ要求
CON
JMP @MR205               ; 205
MOV #85 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR205               ; 205
AND R50008               ; Error
JMP @MR206               ; 206
STG @MR206               ; 206
ANB R50008               ; Error
SET @MR207               ; Err83 Release
CON
ENDS
;Err65 ﾃﾞｼｹｰﾀUT 圧NGｴﾗｰ
;Err65 DC-UT pressure NG
STG @MR400               ; Err65 ST3
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
JMP @MR401               ; 301
MOV #65 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR401               ; 301
AND R50008               ; Error
JMP @MR402               ; 302
STG @MR402               ; 302
ANB R50008               ; Error
SET @MR403               ; Err65 ST3 解除完了
CON
ENDS
;
LD MR11802               ; ﾌﾟﾗﾝｼﾞｬｰ 1 後退call 実行中
OR MR11810               ; ﾌﾟﾗﾝｼﾞｬｰ 2 後退call 実行中
OUT MR15000              ; ｻﾌﾞﾀﾝｸA大気解放
LD MR11902               ; ﾌﾟﾗﾝｼﾞｬｰ 3 後退call 実行中
OR MR11910               ; ﾌﾟﾗﾝｼﾞｬｰ 4 後退call 実行中
OUT MR15500              ; ｻﾌﾞﾀﾝｸB大気解放
;背面ｽｲｯﾁ動作終了時お知らせﾌﾞｻﾞｰ
LDP @MR002               ; 背面SW動作終了記憶
OR R42106                ; 背面ｽｲｯﾁ動作終了ﾌﾞｻﾞｰON
ANB T726                 ; 背面sw動作終了動作
MPS
RES @MR002               ; 背面SW動作終了記憶
CON
OUT R42106               ; 背面ｽｲｯﾁ動作終了ﾌﾞｻﾞｰON
MPP
TMR #726 #10             ; 背面sw動作終了動作
;Error Dry Vacuum Pump Off
LD R50001                ; AUTO
OR R50002                ; STEP
ANB R50008               ; Error
LDB MR26204
ORB MR26205
ANL
TMR @26 #50
CON
AND @T26
ANB @MR407
ANB LR49800              ; ｻﾃﾗｲﾄ無しﾓｰﾄﾞ
@SET @MR404
STG @MR404
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
SET @MR407
CON
JMP @MR405
MOV #104 DM400           ; ﾒｯｾｰｼﾞNo.
STG @MR405
AND R50008               ; Error
JMP @MR406
STG @MR406
ANB R50008               ; Error
RES @MR407
CON
ENDS
;Error couting RB6 infusion
STG MR28000              ; Err counting RB6
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
JMP @MR511
MOV #266 DM400           ; ﾒｯｾｰｼﾞNo.
STG @MR511
AND R50008               ; Error
JMP @MR512
STG @MR512
ANB R50008               ; Error
SET MR28001              ; err 266 release
CON
ENDS
;Error couting RB7 infusion
STG MR28005              ; Err counting RB7
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
JMP @MR601
MOV #267 DM400           ; ﾒｯｾｰｼﾞNo.
STG @MR602
AND R50008               ; Error
JMP @MR603
STG @MR603
ANB R50008               ; Error
SET MR28006              ; err 267 release
CON
ENDS
;Error couting RB8 infusion
STG MR28010              ; Err counting RB8
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
JMP @MR611
MOV #268 DM400           ; ﾒｯｾｰｼﾞNo.
STG @MR611
AND R50008               ; Error
JMP @MR612
STG @MR612
ANB R50008               ; Error
SET MR28011              ; err 268 release
CON
ENDS
;Error couting RB9 infusion
STG MR28015              ; Err counting RB9
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
JMP @MR701
MOV #269 DM400           ; ﾒｯｾｰｼﾞNo.
STG @MR701
AND R50008               ; Error
JMP @MR702
STG @MR702
ANB R50008               ; Error
SET MR28100              ; err 269 release
CON
ENDS
END
ENDH
