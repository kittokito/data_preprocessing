DEVICE:53
;MODULE:Error_NG
;MODULE_TYPE:0
;<h1/>ｴﾗｰ処理部/Error processing unit
LD MR902                 ; ｴﾗｰ
ANB @MR015               ; ｴﾗｰ処理中
SET @MR015               ; ｴﾗｰ処理中
CON
SET @MR000               ; ｴﾗｰ処理開始
;処理開始/Start processing
STG @MR000               ; ｴﾗｰ処理開始
MOV DM149 EM2007         ; ｴﾗｰ画面詳細ﾒｯｾｰｼﾞ  結果書込8
MOV DM148 EM2008         ; ｴﾗｰ詳細  結果書込9
SET MR30115              ; (TP)BzRstSw 表示灯
CON
JMP @MR001
LDP MR30114              ; (TP)BzRstSw
RES MR30115              ; (TP)BzRstSw 表示灯
;ｴﾗｰ画面表示：ﾍﾟｰｼﾞ600/Error screen display: page 600
;解除待ち/Pending wait
STG @MR001
DW #600 EM30001          ; (TP)ﾍﾟｰｼﾞ画面切替用No.
MPS
AND MR30114              ; (TP)BzRstSw
SET MR114                ; NGﾘｾｯﾄ処理ﾌﾞｻﾞｰ解除
MRD
AND MR911                ; 検査NG（ｷｰsw解除必要Err）
MPS
AND MR005                ; ﾗﾝﾌﾟ点滅用(0.5S)
OUT MR30408              ; (TP)ｷｰsw要求LP
MPP
AND R2001                ; ｷｰｽｲｯﾁ
RES MR30115              ; (TP)BzRstSw 表示灯
CON
SET MR114                ; NGﾘｾｯﾄ処理ﾌﾞｻﾞｰ解除
CON
JMP @MR002
MPP
LDB MR911                ; 検査NG（ｷｰsw解除必要Err）
AND MR30114              ; (TP)BzRstSw
ANL
JMP @MR002
;ｽﾀｰﾄsw入力待ち/Wait for start sw input
STG @MR002
OUT MR202                ; ｴﾗｰ解除要求
CON
ANP MR2000               ; ｽﾀｰﾄSW
ANB MR900                ; 重度異常：電源再投入必要
JMP @MR003
;ｴﾗｰ終了：ﾌﾗｸﾞﾘｾｯﾄ/Error termination: Flag reset
STG @MR003
RES MR902                ; ｴﾗｰ
CON
RES MR114                ; NGﾘｾｯﾄ処理ﾌﾞｻﾞｰ解除
CON
DW #0 DM148              ; ｴﾗｰ詳細
CON
DW #0 DM149              ; ｴﾗｰ画面詳細ﾒｯｾｰｼﾞ
CON
RES @MR015               ; ｴﾗｰ処理中
CON
MPS
AND MR911                ; 検査NG（ｷｰsw解除必要Err）
JMP @MR004
MPP
ANB MR911                ; 検査NG（ｷｰsw解除必要Err）
JMP @MR005
;TP520：検査結果/TP 520: Inspection result
STG @MR004
DW #520 EM30001          ; (TP)ﾍﾟｰｼﾞ画面切替用No.
CON
RES MR911                ; 検査NG（ｷｰsw解除必要Err）
CON
ENDS
;TP500：ﾒｲﾝ画面/TP 500: Main screen
STG @MR005
MPS
ANB MR304                ; 原点復帰中
MPS
LDB MR30402              ; TP)装置ﾘｰｸ検査ﾓｰﾄﾞ
ANB MR30415              ; TP 装置ﾘｰｸ検査ﾓｰﾄﾞ2
ANB MR30404              ; (TP)ﾘｰｸﾃｽﾀｰ公正ﾓｰﾄﾞ
ANB MR30406              ; (TP)ﾘｰｸﾃｽﾀｰNG調整ﾓｰﾄﾞ
ANB MR30100              ; (TP)手動ﾊﾞﾙﾌﾞON/OFF
ANL
DW #500 EM30001          ; (TP)ﾍﾟｰｼﾞ画面切替用No.
CON
ENDS
MRD
LD MR30402               ; TP)装置ﾘｰｸ検査ﾓｰﾄﾞ
OR MR30415               ; TP 装置ﾘｰｸ検査ﾓｰﾄﾞ2
ANL
MPS
ANB LR1915               ; New MC leak
DW #812 EM30001          ; (TP)ﾍﾟｰｼﾞ画面切替用No.
CON
ENDS
MPP
AND LR1915               ; New MC leak
DW #821 EM30001          ; (TP)ﾍﾟｰｼﾞ画面切替用No.
CON
ENDS
MRD
AND MR30404              ; (TP)ﾘｰｸﾃｽﾀｰ公正ﾓｰﾄﾞ
DW #817 EM30001          ; (TP)ﾍﾟｰｼﾞ画面切替用No.
CON
ENDS
MRD
AND MR30406              ; (TP)ﾘｰｸﾃｽﾀｰNG調整ﾓｰﾄﾞ
DW #818 EM30001          ; (TP)ﾍﾟｰｼﾞ画面切替用No.
CON
ENDS
MPP
AND MR30100              ; (TP)手動ﾊﾞﾙﾌﾞON/OFF
DW #801 EM30001          ; (TP)ﾍﾟｰｼﾞ画面切替用No.
CON
ENDS
MPP
AND MR304                ; 原点復帰中
DW #0 EM30001            ; (TP)ﾍﾟｰｼﾞ画面切替用No.
CON
ENDS
;<h1/>Err2ｸﾘｰﾝﾕﾆｯﾄ異常/Err2 Clean unit err
LD CR2003                ; 常時OFF
LDB R2014                ; ｴｱｸﾘｰﾝﾕﾆｯﾄ1ｱﾗｰﾑ1
ORB R2015                ; ｴｱｸﾘｰﾝﾕﾆｯﾄ1ｱﾗｰﾑ2
ANL
AND T1                   ; 電源ON wait
TMR @0 #30
CON
AND @T0
ANB MR902                ; ｴﾗｰ
ANB @MR101
DW #2 DM149              ; ｴﾗｰ画面詳細ﾒｯｾｰｼﾞ
CON
SET MR902                ; ｴﾗｰ
CON
SET MR31001              ; Err2ｸﾘｰﾝﾕﾆｯﾄ異常
CON
@SET @MR101
STG @MR101
ANB MR902                ; ｴﾗｰ
RES MR31001              ; Err2ｸﾘｰﾝﾕﾆｯﾄ異常
CON
ENDS
;<h1/>Err4ﾒﾓﾘｰｶｰﾄﾞｴﾗｰ/Err4 Memory card error
LD MR112                 ; ﾒﾓﾘｶｰﾄﾞｴﾗｰ
ORB CR3213               ; ﾒﾓﾘｶｰﾄﾞあり
ANB MR902                ; ｴﾗｰ
ANB @MR102
DW #4 DM149              ; ｴﾗｰ画面詳細ﾒｯｾｰｼﾞ
CON
SET MR902                ; ｴﾗｰ
CON
SET MR31003              ; Err4ﾒﾓﾘｰｶｰﾄﾞｴﾗｰ
CON
@SET @MR102
;TP画面602：ﾒﾓﾘｰｶｰﾄﾞｴﾗｰ詳細/TP screen 602: Memory card error details
STG @MR102
SET MR900                ; 重度異常：電源再投入必要
CON
MPS
ANP MR30114              ; (TP)BzRstSw
DW #602 EM30001          ; (TP)ﾍﾟｰｼﾞ画面切替用No.
MPP
ANB MR902                ; ｴﾗｰ
RES MR112                ; ﾒﾓﾘｶｰﾄﾞｴﾗｰ
CON
RES MR31003              ; Err4ﾒﾓﾘｰｶｰﾄﾞｴﾗｰ
CON
ENDS
;<h1/>Err5通信ｴﾗｰ/Err 5 communication error
;<<通信エラー>>
;<<Communication error>>
LD MR901                 ; 通信ｴﾗｰ
ANB MR902                ; ｴﾗｰ
ANB @MR103
DW #5 DM149              ; ｴﾗｰ画面詳細ﾒｯｾｰｼﾞ
CON
SET MR902                ; ｴﾗｰ
CON
SET MR31004              ; Err5通信ｴﾗｰ
CON
@SET @MR103
STG @MR103
ANB MR902                ; ｴﾗｰ
RES MR901                ; 通信ｴﾗｰ
CON
RES MR31004              ; Err5通信ｴﾗｰ
CON
ENDS
;<h1/>Err6検査条件NG/Err 6 Inspection condition NG
;<<検査条件エラー>>
;<<Inspection condition error>>
LD MR907                 ; 検査条件ｴﾗｰﾌﾗｸﾞ
ANB MR902                ; ｴﾗｰ
ANB @MR104
DW #6 DM149              ; ｴﾗｰ画面詳細ﾒｯｾｰｼﾞ
CON
SET MR902                ; ｴﾗｰ
CON
SET MR31005              ; Err6検査条件NG
CON
@SET @MR104
;TP画面604：検査条件ｴﾗｰ詳細/TP screen 604: inspection condition error details
STG @MR104
MPS
ANP MR30114              ; (TP)BzRstSw
DW #604 EM30001          ; (TP)ﾍﾟｰｼﾞ画面切替用No.
MPP
ANB MR902                ; ｴﾗｰ
RES MR907                ; 検査条件ｴﾗｰﾌﾗｸﾞ
CON
RES MR31005              ; Err6検査条件NG
CON
ENDS
;<h1/>Err7元圧異常/Err 7 source pressure error
;<<元圧異常>>
;<<Main pressure abnormal>>
LD CR2003                ; 常時OFF
ANB R2002                ; 元圧空検出 
TMR @15 #50
CON
AND @T15
ANB @MR105
ANB MR902                ; ｴﾗｰ
DW #7 DM149              ; ｴﾗｰ画面詳細ﾒｯｾｰｼﾞ
CON
SET MR902                ; ｴﾗｰ
CON
SET MR31006              ; Err7元圧異常
CON
@SET @MR105
STG @MR105
MPS
LD MR304                 ; 原点復帰中
OR MR306                 ; 自動運転中
OR MR307                 ; ﾒﾝﾃ動作中
ANL
SET MR900                ; 重度異常：電源再投入必要
MPP
ANB MR902                ; ｴﾗｰ
RES MR31006              ; Err7元圧異常
CON
ENDS
;<h1/>Err13ｼﾘﾝﾀﾞｰｾﾝｻｰｴﾗｰ/Err 13 cylinder sensor error
;<<シリンダセンサエラー>>
;<<Cylinder sensor error>>
;下降:ﾎｰｽ押Vari/針ｼﾘﾝﾀﾞ出口供給継
;Down: Hose push Vari / needle cylinder outlet supply inheritance
LD CR2008                ; 運転開始時1ｽｷｬﾝON
DW #0 DM150              ; ｼﾘﾝﾀﾞｰｴﾗｰ番号
LDB MR306                ; 自動運転中
CJ #1
;ﾏｰｷﾝｸﾞﾍﾟﾝ/Marking pen
LD MR8402                ; ﾏｰｷﾝｸﾞ ﾍﾟﾝ1 前進
ANB R2114                ; ﾏｰｷﾝｸﾞﾍﾟﾝ前進限
LD MR8403                ; ﾏｰｷﾝｸﾞ ﾍﾟﾝ1 後退
AND R2114                ; ﾏｰｷﾝｸﾞﾍﾟﾝ前進限
ORL
AND DM824.1              ; ﾏｰｷﾝｸﾞﾍﾟﾝ1有効(=ON
AND= DM150 #0            ; ｼﾘﾝﾀﾞｰｴﾗｰ番号
TMR @1 #50
CON
AND @T1
DW #2114 DM150           ; ｼﾘﾝﾀﾞｰｴﾗｰ番号
LD MR8402                ; ﾏｰｷﾝｸﾞ ﾍﾟﾝ1 前進
AND R2115                ; ﾏｰｷﾝｸﾞﾍﾟﾝ後退限
LD MR8403                ; ﾏｰｷﾝｸﾞ ﾍﾟﾝ1 後退
ANB R2115                ; ﾏｰｷﾝｸﾞﾍﾟﾝ後退限
ORL
AND DM824.1              ; ﾏｰｷﾝｸﾞﾍﾟﾝ1有効(=ON
AND= DM150 #0            ; ｼﾘﾝﾀﾞｰｴﾗｰ番号
TMR @2 #50
CON
AND @T2
DW #2115 DM150           ; ｼﾘﾝﾀﾞｰｴﾗｰ番号
LABEL #1
;ｼﾘﾝﾀﾞｰｾﾝｻｰｴﾗｰ処理/Cylinder sensor error processing
LD<> DM150 #0            ; ｼﾘﾝﾀﾞｰｴﾗｰ番号
ANB MR902                ; ｴﾗｰ
ANB @MR107
DW #13 DM149             ; ｴﾗｰ画面詳細ﾒｯｾｰｼﾞ
CON
SET MR902                ; ｴﾗｰ
CON
SET MR31012              ; Err13ｼﾘﾝﾀﾞｰｾﾝｻｰｴﾗｰ
CON
@SET @MR107
STG @MR107
MPS
ANP MR30114              ; (TP)BzRstSw
DW #606 EM30001          ; (TP)ﾍﾟｰｼﾞ画面切替用No.
MPP
ANB MR902                ; ｴﾗｰ
DW #0 DM150              ; ｼﾘﾝﾀﾞｰｴﾗｰ番号
CON
RES MR31012              ; Err13ｼﾘﾝﾀﾞｰｾﾝｻｰｴﾗｰ
CON
ENDS
END
ENDH
