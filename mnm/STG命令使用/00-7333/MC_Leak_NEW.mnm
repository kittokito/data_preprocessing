DEVICE:53
;MODULE:MC_Leak_NEW
;MODULE_TYPE:0
;SCRIPT_TYPE:
;※MCﾘｰｸ方法変更
;→待機ﾓｼﾞｭｰﾙ「MC_Leak_NEW」を呼び出す
;
;詳細
;従来：自動時と同様の回路設定でMCﾘｰｸ
;
;変更：→「MC_Leak_NEW」
;①上流-下流を1対1で接続した冶具(A)にて1回路ずつﾘｰｸ検査
;各回路の結果として記録
;②上流を封止した冶具(B)にて1回路ずつﾘｰｸ検査
;各回路の結果として記録
;
;①②を複合して補正値として利用する
;* MC leak method change
;→ Call standby module "MC_Leak_NEW"
;
;Details
;Conventional: MC leak with the same circuit setting as in automatic operation
;
;Change: → "MC_Leak_NEW"
;① Leak inspection for one circuit at a jig (A) connected upstream - downstream one - to - one
;Record as a result of each circuit
;② Leak inspection by one circuit at jig (B) sealed upstream
;Record as a result of each circuit
;
;Combine ① and use it as a correction value
LDP MR30500              ; (TP)検査強制終了
ORP MR900                ; 重度異常：電源再投入必要
MPS
RES MR403                ; 大気開放後処理
CON
RES MR402                ; 大気開放中
CON
RES MR103                ; ﾘｰｸ検査中
CON
RES MR100                ; 検査動作中
CON
ZRES @MR000 @MR3215      ; 上流封止検査
MPP
MDSTOP MC_Leak_NEW
;<h1/>初期化/Initialize
LD @CR2008
SET MR100                ; 検査動作中
CON
SET @MR1500
;<h1/>△ﾘｰｸ検査/Leak inspection
STG @MR1500
DW #2 EM504              ; M/Cﾘｰｸ 状態LP(0未1-2中3良4不
CON
DW #1 DM13               ; 現在MCﾘｰｸ番号(1～20)
CON
SET MR103                ; ﾘｰｸ検査中
CON
JMP @MR1501
;検査ﾁｬﾝﾈﾙﾙｰﾌﾟ先頭/Inspection channel loop head
;上下流ﾊﾞﾙﾌﾞ設定実行/Execution of upstream and downstream valve setting
STG @MR1501
ZRES ZF19994 ZF25999     ; ﾘｰｸ検査1ﾃﾞｰﾀ取得数  ﾘｰｸ検査6測定中差圧1000
CON
LDA DM13                 ; 現在MCﾘｰｸ番号(1～20)
CON
SUB #1
CON
STA Z1
CON
MPS
LDB @MR000               ; 上流封止検査
ANB @MR001               ; 共通回路ﾁｪｯｸ
ANL
DW #2 EM1090:Z1          ; MCﾘｰｸ結果(回路1-1) 結果
CON
JMP @MR1502
MPP
AND @MR000               ; 上流封止検査
MPS
ANB @MR001               ; 共通回路ﾁｪｯｸ
DW #2 EM1110:Z1          ; MCﾘｰｸ結果(回路1上流封止) 結果
CON
JMP @MR1502
MPP
AND @MR001               ; 共通回路ﾁｪｯｸ
DW #2 EM1171             ; MCﾘｰｸ結果(共通回路) 結果
CON
JMP @MR1502
STG @MR1502
ANB MR902                ; ｴﾗｰ
FMOV #0 DM19900 #20      ; 上流側流路切替ﾊﾞﾙﾌﾞ1 (0=閉/1=開)
FMOV #0 DM19930 #20      ; 下流側流路切替ﾊﾞﾙﾌﾞ1 (0=閉/1=開
MPS
ANB @MR001               ; 共通回路ﾁｪｯｸ
LDA DM13                 ; 現在MCﾘｰｸ番号(1～20)
CON
SUB #1
CON
STA Z1
CON
DW #1 DM19900:Z1         ; 上流側流路切替ﾊﾞﾙﾌﾞ1 (0=閉/1=開)
CON
DW #1 DM19930:Z1         ; 下流側流路切替ﾊﾞﾙﾌﾞ1 (0=閉/1=開
CON
JMP @MR1508
MPP
AND @MR001               ; 共通回路ﾁｪｯｸ
JMP @MR1508
;M/Cリーク初回エアー通し動作
;↑M/Cリーク初回エアー通しここまで
;EM30029:(TP)装置ﾘｰｸ検査表示用
;2：加圧中
;EM30029: (TP) For device leak inspection display
;2: Under pressurization
STG @MR1508
DW #2 EM30029            ; (TP)装置ﾘｰｸ検査表示用
CON
JMP @MR1509
;現在のﾘｰｸ検査部位に対応する回路ﾊﾞﾙﾌﾞを開設定する
;※ﾀｲﾏは検査毎に設定値有り
;Open the circuit valves corresponding to the current leak inspection site
;* Timer has setting value for each inspection
;23：ﾘｰｸﾃｽﾀ入口
;24：ﾘｰｸﾃｽﾀ出口
;25：流量ｾﾝｻ入口
;26：流量ｾﾝｻ出口
;27：上流大気開放
;23: Leak tester entrance
;24: Leak tester exit
;25: Flow sensor inlet
;26: Flow sensor outlet
;27: Upstream air release
STG @MR1509
RES MR8104               ; 上流側流路切替ﾊﾞﾙﾌﾞ 23(ON=開)
CON
RES MR8105               ; 上流側流路切替ﾊﾞﾙﾌﾞ 24(ON=開)
CON
SET MR8106               ; 上流側流路切替ﾊﾞﾙﾌﾞ 25(ON=開)
CON
SET MR8107               ; 上流側流路切替ﾊﾞﾙﾌﾞ 26(ON=開)
CON
RES MR8108               ; 上流側流路切替ﾊﾞﾙﾌﾞ 27(ON=開)
CON
SET MR400                ; 上下流_ﾊﾞﾙﾌﾞ一括切替(OFF全閉
CON
TMR @0 #50               ; エアー通し待ち時間
CON
AND @T0                  ; エアー通し待ち時間
MPS
AND CR2003               ; 常時OFF
TMR @3 DM880             ; ﾘｰｸ検査初期加圧時間  現設定_ﾘｰｸ検査1初期加圧時間
CON
AND @T3                  ; ﾘｰｸ検査初期加圧時間
AND T2                   ; 大気開放時間
JMP @MR1510
MPP
AND CR2002               ; 常時ON
JMP @MR1510
STG @MR1510
FMOV #1 DM19900 #20      ; 上流側流路切替ﾊﾞﾙﾌﾞ1 (0=閉/1=開)
FMOV #1 DM19930 #20      ; 下流側流路切替ﾊﾞﾙﾌﾞ1 (0=閉/1=開
SET MR402                ; 大気開放中
CON
SET MR400                ; 上下流_ﾊﾞﾙﾌﾞ一括切替(OFF全閉
CON
SET MR8104               ; 上流側流路切替ﾊﾞﾙﾌﾞ 23(ON=開)
CON
SET MR8105               ; 上流側流路切替ﾊﾞﾙﾌﾞ 24(ON=開)
CON
SET MR8106               ; 上流側流路切替ﾊﾞﾙﾌﾞ 25(ON=開)
CON
SET MR8107               ; 上流側流路切替ﾊﾞﾙﾌﾞ 26(ON=開)
CON
SET MR8108               ; 上流側流路切替ﾊﾞﾙﾌﾞ 27(ON=開)
CON
JMP @MR1511
STG @MR1511
TMR @1 #100              ; 大気開放時間
CON
AND @T1                  ; 大気開放時間
RES MR402                ; 大気開放中
CON
SET MR403                ; 大気開放後処理
CON
JMP @MR1512
STG @MR1512
ANB MR403                ; 大気開放後処理
JMP @MR1513
STG @MR1513
ANB MR902                ; ｴﾗｰ
FMOV #0 DM19900 #20      ; 上流側流路切替ﾊﾞﾙﾌﾞ1 (0=閉/1=開)
FMOV #0 DM19930 #20      ; 下流側流路切替ﾊﾞﾙﾌﾞ1 (0=閉/1=開
MPS
ANB @MR001               ; 共通回路ﾁｪｯｸ
LDA DM13                 ; 現在MCﾘｰｸ番号(1～20)
CON
SUB #1
CON
STA Z1
CON
DW #1 DM19900:Z1         ; 上流側流路切替ﾊﾞﾙﾌﾞ1 (0=閉/1=開)
CON
JMP @MR1514
MRD
AND @MR001               ; 共通回路ﾁｪｯｸ
JMP @MR1514
MPP
SET MR8104               ; 上流側流路切替ﾊﾞﾙﾌﾞ 23(ON=開)
CON
SET MR8105               ; 上流側流路切替ﾊﾞﾙﾌﾞ 24(ON=開)
CON
RES MR8106               ; 上流側流路切替ﾊﾞﾙﾌﾞ 25(ON=開)
CON
RES MR8107               ; 上流側流路切替ﾊﾞﾙﾌﾞ 26(ON=開)
CON
RES MR8108               ; 上流側流路切替ﾊﾞﾙﾌﾞ 27(ON=開)
CON
SET MR400                ; 上下流_ﾊﾞﾙﾌﾞ一括切替(OFF全閉
;ﾘｰｸ検査初期加圧安定時間待ち
;Leak inspection Initial pressurization Waiting for setting time
STG @MR1514
TMR @4 DM892             ; ﾘｰｸ検査初期加圧安定時間  現設定_ﾘｰｸ検査1初期加圧安定時間
CON
AND @T4                  ; ﾘｰｸ検査初期加圧安定時間
JMP @MR2400
;<h1/> -ﾘｰｸ検査/Leak inspection
STG @MR2400
SET MR20500              ; ﾘｰｸﾃｽﾀ-実行要求
CON
JMP @MR2401
;EM30029:(TP)装置ﾘｰｸ検査表示用
;3：装置体ﾘｰｸ検査中
;EM30029: (TP) For device leak inspection display
;3: Under leak inspection
LD @MR2401
DW #3 EM30029            ; (TP)装置ﾘｰｸ検査表示用
;完了待ち/Wait for completion
STG @MR2401
AND MR20501              ; ﾘｰｸﾃｽﾀ-実行完了
RES MR20501              ; ﾘｰｸﾃｽﾀ-実行完了
CON
JMP @MR2402
STG @MR2402
MPS
ANB MR20502              ; ﾘｰｸﾃｽﾀｰ処理異常有
MPS
AND= DM20020 #1          ; ﾘｰｸﾃｽﾀｰ結果ｺｰﾄﾞ(1=OK)
JMP @MR2403
MPP
AND<> DM20020 #1         ; ﾘｰｸﾃｽﾀｰ結果ｺｰﾄﾞ(1=OK)
LDA DM13                 ; 現在MCﾘｰｸ番号(1～20)
CON
SUB #1
CON
STA Z1
CON
MPS
ANB @MR000               ; 上流封止検査
DW.S +32767 EM1050:Z1    ; MCﾘｰｸ結果(回路1-1) ﾘｰｸ量
CON
JMP @MR2406
MPP
AND @MR000               ; 上流封止検査
MPS
ANB @MR001               ; 共通回路ﾁｪｯｸ
DW.S +32767 EM1070:Z1    ; MCﾘｰｸ結果(回路1上流封止) ﾘｰｸ量
CON
JMP @MR2406
MPP
AND @MR001               ; 共通回路ﾁｪｯｸ
DW.S +32767 EM1170       ; MCﾘｰｸ結果(共通回路) ﾘｰｸ量
CON
JMP @MR2406
MPP
AND MR20502              ; ﾘｰｸﾃｽﾀｰ処理異常有
RES MR20502              ; ﾘｰｸﾃｽﾀｰ処理異常有
CON
JMP @MR2400
;ﾘｰｸ量(補正後)算出/Leak amount (after correction) calculated
STG @MR2403
LDA DM13                 ; 現在MCﾘｰｸ番号(1～20)
CON
SUB #1
CON
STA Z1
CON
LDA.S EM148              ; ﾘｰｸ検査1 ﾘｰｸ量(補正前)
CON
MPS
ANB @MR000               ; 上流封止検査
STA.S EM1050:Z1          ; MCﾘｰｸ結果(回路1-1) ﾘｰｸ量
CON
JMP @MR2404
MPP
AND @MR000               ; 上流封止検査
MPS
ANB @MR001               ; 共通回路ﾁｪｯｸ
STA.S EM1070:Z1          ; MCﾘｰｸ結果(回路1上流封止) ﾘｰｸ量
CON
JMP @MR2404
MPP
AND @MR001               ; 共通回路ﾁｪｯｸ
STA.S EM1170             ; MCﾘｰｸ結果(共通回路) ﾘｰｸ量
CON
JMP @MR2404
;ﾘｰｸ検査判断/Leak inspection judgment
STG @MR2404
LDA DM13                 ; 現在MCﾘｰｸ番号(1～20)
CON
SUB #1
CON
STA Z1
CON
MPS
ANB @MR000               ; 上流封止検査
MPS
LD<= EM1050:Z1 EM900:Z1  ; MCﾘｰｸ結果(回路1-1) ﾘｰｸ量  MCﾘｰｸ検査 判定値(ﾘｰｸ量)1-1
AND>= EM1050:Z1 EM800:Z1 ; MCﾘｰｸ結果(回路1-1) ﾘｰｸ量  MCﾘｰｸ検査 判定値下(ﾘｰｸ量)1-1
ANL
JMP @MR2405
MPP
LD> EM1050:Z1 EM900:Z1   ; MCﾘｰｸ結果(回路1-1) ﾘｰｸ量  MCﾘｰｸ検査 判定値(ﾘｰｸ量)1-1
OR< EM1050:Z1 EM800:Z1   ; MCﾘｰｸ結果(回路1-1) ﾘｰｸ量  MCﾘｰｸ検査 判定値下(ﾘｰｸ量)1-1
ANL
JMP @MR2406
MPP
AND @MR000               ; 上流封止検査
MPS
ANB @MR001               ; 共通回路ﾁｪｯｸ
MPS
LD<= EM1070:Z1 EM920:Z1  ; MCﾘｰｸ結果(回路1上流封止) ﾘｰｸ量  MCﾘｰｸ検査 判定値(ﾘｰｸ量)U1
AND>= EM1070:Z1 EM820:Z1 ; MCﾘｰｸ結果(回路1上流封止) ﾘｰｸ量  MCﾘｰｸ検査 判定値下(ﾘｰｸ量)U1
ANL
JMP @MR2405
MPP
LD> EM1070:Z1 EM920:Z1   ; MCﾘｰｸ結果(回路1上流封止) ﾘｰｸ量  MCﾘｰｸ検査 判定値(ﾘｰｸ量)U1
OR< EM1070:Z1 EM820:Z1   ; MCﾘｰｸ結果(回路1上流封止) ﾘｰｸ量  MCﾘｰｸ検査 判定値下(ﾘｰｸ量)U1
ANL
JMP @MR2406
MPP
AND @MR001               ; 共通回路ﾁｪｯｸ
MPS
LD<= EM1170 EM1172       ; MCﾘｰｸ結果(共通回路) ﾘｰｸ量  MCﾘｰｸ検査(共通回路)判定値(ﾘｰｸ量)
AND>= EM1170 EM1173      ; MCﾘｰｸ結果(共通回路) ﾘｰｸ量  MCﾘｰｸ検査(共通回路)判定下(ﾘｰｸ量)
ANL
JMP @MR2405
MPP
LD> EM1170 EM1172        ; MCﾘｰｸ結果(共通回路) ﾘｰｸ量  MCﾘｰｸ検査(共通回路)判定値(ﾘｰｸ量)
OR< EM1170 EM1173        ; MCﾘｰｸ結果(共通回路) ﾘｰｸ量  MCﾘｰｸ検査(共通回路)判定下(ﾘｰｸ量)
ANL
JMP @MR2406
;ﾘｰｸ検査OK/Leak inspection OK
STG @MR2405
LDA DM13                 ; 現在MCﾘｰｸ番号(1～20)
CON
SUB #1
CON
STA Z1
CON
MPS
ANB @MR000               ; 上流封止検査
DW #3 EM1090:Z1          ; MCﾘｰｸ結果(回路1-1) 結果
CON
JMP @MR2600
MPP
AND @MR000               ; 上流封止検査
MPS
ANB @MR001               ; 共通回路ﾁｪｯｸ
DW #3 EM1110:Z1          ; MCﾘｰｸ結果(回路1上流封止) 結果
CON
JMP @MR2600
MPP
AND @MR001               ; 共通回路ﾁｪｯｸ
DW #3 EM1171             ; MCﾘｰｸ結果(共通回路) 結果
CON
JMP @MR2600
;ﾘｰｸ検査圧異常/Leak inspection pressure error
;EM(230+(X-1)):ﾘｰｸ検査Xの異常履歴
;bit6:ﾘｰｸ検査圧異常
;EM (230+ (X - 1)): Anomaly history of leakage inspection X
;bit 6: leak inspection pressure abnormality
STG @MR2406
MPS
LDA DM13                 ; 現在MCﾘｰｸ番号(1～20)
CON
SUB #1
CON
STA Z1
CON
MPS
ANB @MR000               ; 上流封止検査
DW #4 EM1090:Z1          ; MCﾘｰｸ結果(回路1-1) 結果
MPP
AND @MR000               ; 上流封止検査
MPS
ANB @MR001               ; 共通回路ﾁｪｯｸ
DW #4 EM1110:Z1          ; MCﾘｰｸ結果(回路1上流封止) 結果
MPP
AND @MR001               ; 共通回路ﾁｪｯｸ
DW #4 EM1171             ; MCﾘｰｸ結果(共通回路) 結果
MRD
LDA EM30010              ; (TP)機種選択番号(1-10)
CON
SUB #1
CON
MUL #25
CON
ADD DM5                  ; 現在部品番号(1～25）
CON
SUB #1
CON
STA Z1
CON
RES LR000:Z1             ; 機種1部品1装置ﾘｰｸ検査OK
MPP
DW #82 EM2007            ; 結果書込8
CON
DW #82 EM2008            ; 結果書込9
CON
SET MR31501              ; Err82ﾘｰｸ検査 ﾘｰｸNG
CON
SET @MR002               ; 終了時NG発報予約
CON
JMP @MR2600
;<h1/> -ﾘｰｸ検査終了処理/Leak inspection end processing
;EM30029:(TP)装置ﾘｰｸ検査表示用
;4：大気開放中
;EM30029: (TP) For device leak inspection display
;4: Under atmosphere opening
LD @MR2600
DW #4 EM30029            ; (TP)装置ﾘｰｸ検査表示用
;23：ﾘｰｸﾃｽﾀ入口
;24：ﾘｰｸﾃｽﾀ出口
;25：流量ｾﾝｻ入口
;26：流量ｾﾝｻ出口
;27：上流大気開放
;23: Leak tester entrance
;24: Leak tester exit
;25: Flow sensor inlet
;26: Flow sensor outlet
;27: Upstream air release
STG @MR2600
FMOV #1 DM19900 #20      ; 上流側流路切替ﾊﾞﾙﾌﾞ1 (0=閉/1=開)
FMOV #1 DM19930 #20      ; 下流側流路切替ﾊﾞﾙﾌﾞ1 (0=閉/1=開
SET MR402                ; 大気開放中
CON
SET MR400                ; 上下流_ﾊﾞﾙﾌﾞ一括切替(OFF全閉
CON
SET MR8104               ; 上流側流路切替ﾊﾞﾙﾌﾞ 23(ON=開)
CON
SET MR8105               ; 上流側流路切替ﾊﾞﾙﾌﾞ 24(ON=開)
CON
SET MR8106               ; 上流側流路切替ﾊﾞﾙﾌﾞ 25(ON=開)
CON
SET MR8107               ; 上流側流路切替ﾊﾞﾙﾌﾞ 26(ON=開)
CON
SET MR8108               ; 上流側流路切替ﾊﾞﾙﾌﾞ 27(ON=開)
CON
JMP @MR2601
STG @MR2601
AND T2                   ; 大気開放時間
SET MR403                ; 大気開放後処理
CON
JMP @MR2602
STG @MR2602
ANB MR403                ; 大気開放後処理
RES MR402                ; 大気開放中
CON
JMP @MR2603
;<h1/> ﾃﾞｰﾀ記録/Data recording
;DM410：ﾒﾓﾘｰｶｰﾄﾞ書き込み
;0bit目 結果書き込み無効
;1bit目 測定書き込み無効
;
;DM 410: Memory card write
;0 bit Result write invalid
;1st bit Measurement write invalid
STG @MR2603
MPS
LDB DM504.0              ; ﾒﾓﾘｰｶｰﾄﾞ書込_結果ﾃﾞｰﾀ無効(=ON
ORB DM504.1              ; ﾒﾓﾘｰｶｰﾄﾞ書込_測定ﾃﾞｰﾀ無効(=ON
ANB MR902                ; ｴﾗｰ
ANL
JMP @MR2604
MPP
LD DM504.0               ; ﾒﾓﾘｰｶｰﾄﾞ書込_結果ﾃﾞｰﾀ無効(=ON
AND DM504.1              ; ﾒﾓﾘｰｶｰﾄﾞ書込_測定ﾃﾞｰﾀ無効(=ON
ANL
JMP @MR2607
;<h1/>測定ﾃﾞｰﾀ書き込み/Write measurement data
STG @MR2604
ANB MR902                ; ｴﾗｰ
AND T0                   ; ﾒﾓﾘｶｰﾄﾞ書込中(排他ﾌﾗｸﾞ）OFF
SET MR109                ; ﾒﾓﾘｶｰﾄﾞ書込中(排他ﾌﾗｸﾞ）
CON
JMP @MR2605
STG @MR2605
MPS
ANB @MR000               ; 上流封止検査
DW #0 EM40000            ; 検査ﾃﾞｰﾀ書込:①
MRD
AND @MR000               ; 上流封止検査
MPS
ANB @MR001               ; 共通回路ﾁｪｯｸ
DW #1 EM40000            ; 検査ﾃﾞｰﾀ書込:①
MPP
AND @MR001               ; 共通回路ﾁｪｯｸ
DW #2 EM40000            ; 検査ﾃﾞｰﾀ書込:①
MRD
MDSTRT MemoryCard_AccessMC
MPP
JMP @MR2606
STG @MR2606
AND _MemoryCard_AccessMC
ANF MR111                ; ﾒﾓﾘｶｰﾄﾞ書込中
MDSTOP MemoryCard_AccessMC
RES MR109                ; ﾒﾓﾘｶｰﾄﾞ書込中(排他ﾌﾗｸﾞ）
CON
JMP @MR2607
;<h1/>ﾘｰｸ検査全部位(1～16)終了？
;Leak inspection All parts (1 to 5) end?
;※検査NG＆NG時終了設定時は終了処理へ
;* When inspection NG & NG end setting is set to end processing
STG @MR2607
MPS
AND @MR001               ; 共通回路ﾁｪｯｸ
JMP @MR2700
MPP
ANB @MR001               ; 共通回路ﾁｪｯｸ
MPS
AND> DM13 #19            ; 現在MCﾘｰｸ番号(1～20)
JMP @MR2700
MPP
AND<= DM13 #19           ; 現在MCﾘｰｸ番号(1～20)
MPS
LD< EM30014 #1           ; 判定方法 確認用(1でNG時続行)
AND MR31501              ; Err82ﾘｰｸ検査 ﾘｰｸNG
ANL
JMP @MR2703
MPP
LD>= EM30014 #1          ; 判定方法 確認用(1でNG時続行)
ORB MR31501              ; Err82ﾘｰｸ検査 ﾘｰｸNG
ANL
JMP @MR2608
STG @MR2608
INC DM13                 ; 現在MCﾘｰｸ番号(1～20)
CON
JMP @MR1501
;<h1/>上流封止で検査済？/Is it checked with upstream seal?
STG @MR2700
MPS
LDB MR30415              ; TP 装置ﾘｰｸ検査ﾓｰﾄﾞ2
ANB @MR000               ; 上流封止検査
ANL
JMP @MR2701
MRD
LDB MR30415              ; TP 装置ﾘｰｸ検査ﾓｰﾄﾞ2
AND @MR000               ; 上流封止検査
ANL
MPS
ANB LR1909               ; MCﾘｰｸ共通経路測定有効
JMP @MR2703
MPP
AND LR1909               ; MCﾘｰｸ共通経路測定有効
MPS
AND @MR001               ; 共通回路ﾁｪｯｸ
JMP @MR2703
MPP
ANB @MR001               ; 共通回路ﾁｪｯｸ
SET @MR001               ; 共通回路ﾁｪｯｸ
CON
JMP @MR1500
MPP
AND MR30415              ; TP 装置ﾘｰｸ検査ﾓｰﾄﾞ2
JMP @MR2703
STG @MR2701
SET @MR000               ; 上流封止検査
CON
JMP @MR2702
;EM30029:(TP)装置ﾘｰｸ検査表示用
;5：装置ﾘｰｸ治具(上流封止)をｾｯﾄし、
;ｽﾀｰﾄSWを押して下さい。
;EM30029: (TP) For device leak inspection display
;5: Set the sealing jig(Upstream seal)
;and press start SW.
STG @MR2702
DW #5 EM30029            ; (TP)装置ﾘｰｸ検査表示用
CON
ANB MR902                ; ｴﾗｰ
AND MR2000               ; ｽﾀｰﾄSW
AND R2013                ; 冶具確認ON有
DW #1 EM30029            ; (TP)装置ﾘｰｸ検査表示用
CON
JMP @MR1500
;ﾘｰｸ検査総合状態LP書込み/Leak inspection overall state LP writing
STG @MR2703
RES MR103                ; ﾘｰｸ検査中
CON
MPS
LDB MR31501              ; Err82ﾘｰｸ検査 ﾘｰｸNG
ANB @MR002               ; 終了時NG発報予約
ANL
DW #3 EM504              ; M/Cﾘｰｸ 状態LP(0未1-2中3良4不
CON
JMP @MR3200
MPP
LD MR31501               ; Err82ﾘｰｸ検査 ﾘｰｸNG
OR @MR002                ; 終了時NG発報予約
ANL
DW #4 EM504              ; M/Cﾘｰｸ 状態LP(0未1-2中3良4不
CON
JMP @MR3200
;<h1/>■ﾓｼﾞｭｰﾙ終了/End module
STG @MR3200
RES @MR000               ; 上流封止検査
CON
RES @MR001               ; 共通回路ﾁｪｯｸ
CON
JMP @MR3201
STG @MR3201
ANB MR902                ; ｴﾗｰ
MPS
ANB @MR002               ; 終了時NG発報予約
MPS
LDA EM30010              ; (TP)機種選択番号(1-10)
CON
SUB #1
CON
MUL #25
CON
ADD DM5                  ; 現在部品番号(1～25）
CON
SUB #1
CON
STA Z1
CON
SET LR000:Z1             ; 機種1部品1装置ﾘｰｸ検査OK
MPP
JMP @MR3203
MPP
AND @MR002               ; 終了時NG発報予約
DW #80 DM149             ; ｴﾗｰ画面詳細ﾒｯｾｰｼﾞ
CON
SET MR902                ; ｴﾗｰ
CON
JMP @MR3202
;ｴﾗｰ解除待ち/Waiting for error cancellation
STG @MR3202
RES @MR002               ; 終了時NG発報予約
CON
ANB MR902                ; ｴﾗｰ
RES MR31501              ; Err82ﾘｰｸ検査 ﾘｰｸNG
CON
JMP @MR3203
;<h1/>MCﾘｰｸ結果(回路下流算出) ﾘｰｸ量/MC leak result (down) amount
;EM1130.S = EM1050.S - EM1070.S
;EM1131.S = EM1051.S - EM1071.S
;EM1132.S = EM1052.S - EM1072.S
;EM1133.S = EM1053.S - EM1073.S
;EM1134.S = EM1054.S - EM1074.S
;EM1135.S = EM1055.S - EM1075.S
;EM1136.S = EM1056.S - EM1076.S
;EM1137.S = EM1057.S - EM1077.S
;EM1138.S = EM1058.S - EM1078.S
;EM1139.S = EM1059.S - EM1079.S
;EM1140.S = EM1060.S - EM1080.S
;EM1141.S = EM1061.S - EM1081.S
;EM1142.S = EM1062.S - EM1082.S
;EM1143.S = EM1063.S - EM1083.S
;EM1144.S = EM1064.S - EM1084.S
;EM1145.S = EM1065.S - EM1085.S
;EM1146.S = EM1066.S - EM1086.S
;EM1147.S = EM1067.S - EM1087.S
;EM1148.S = EM1068.S - EM1088.S
;EM1149.S = EM1069.S - EM1089.S
LD @MR3203
NCJ #1000
;EM1130.S = EM1050.S - EM1070.S
;
LD CR2002                ; 常時ON
LDA.S EM1070             ; MCﾘｰｸ結果(回路1上流封止) ﾘｰｸ量
CON
EXT.S
CON
STA.L @VM0
CON
LDA.S EM1050             ; MCﾘｰｸ結果(回路1-1) ﾘｰｸ量
CON
EXT.S
CON
SUB.L @VM0
CON
STA.S EM1130             ; MCﾘｰｸ結果(回路1下流算出) ﾘｰｸ量
;EM1131.S = EM1051.S - EM1071.S
;
LD CR2002                ; 常時ON
LDA.S EM1071             ; MCﾘｰｸ結果(回路2上流封止) ﾘｰｸ量
CON
EXT.S
CON
STA.L @VM2
CON
LDA.S EM1051             ; MCﾘｰｸ結果(回路2-2) ﾘｰｸ量
CON
EXT.S
CON
SUB.L @VM2
CON
STA.S EM1131             ; MCﾘｰｸ結果(回路2下流算出) ﾘｰｸ量
;EM1132.S = EM1052.S - EM1072.S
;
LD CR2002                ; 常時ON
LDA.S EM1072             ; MCﾘｰｸ結果(回路3上流封止) ﾘｰｸ量
CON
EXT.S
CON
STA.L @VM4
CON
LDA.S EM1052             ; MCﾘｰｸ結果(回路3-3) ﾘｰｸ量
CON
EXT.S
CON
SUB.L @VM4
CON
STA.S EM1132             ; MCﾘｰｸ結果(回路3下流算出) ﾘｰｸ量
;EM1133.S = EM1053.S - EM1073.S
;
LD CR2002                ; 常時ON
LDA.S EM1073             ; MCﾘｰｸ結果(回路4上流封止) ﾘｰｸ量
CON
EXT.S
CON
STA.L @VM6
CON
LDA.S EM1053             ; MCﾘｰｸ結果(回路4-4) ﾘｰｸ量
CON
EXT.S
CON
SUB.L @VM6
CON
STA.S EM1133             ; MCﾘｰｸ結果(回路4下流算出) ﾘｰｸ量
;EM1134.S = EM1054.S - EM1074.S
;
LD CR2002                ; 常時ON
LDA.S EM1074             ; MCﾘｰｸ結果(回路5上流封止) ﾘｰｸ量
CON
EXT.S
CON
STA.L @VM8
CON
LDA.S EM1054             ; MCﾘｰｸ結果(回路5-5) ﾘｰｸ量
CON
EXT.S
CON
SUB.L @VM8
CON
STA.S EM1134             ; MCﾘｰｸ結果(回路5下流算出) ﾘｰｸ量
;EM1135.S = EM1055.S - EM1075.S
;
LD CR2002                ; 常時ON
LDA.S EM1075             ; MCﾘｰｸ結果(回路6上流封止) ﾘｰｸ量
CON
EXT.S
CON
STA.L @VM10
CON
LDA.S EM1055             ; MCﾘｰｸ結果(回路6-6) ﾘｰｸ量
CON
EXT.S
CON
SUB.L @VM10
CON
STA.S EM1135             ; MCﾘｰｸ結果(回路6下流算出) ﾘｰｸ量
;EM1136.S = EM1056.S - EM1076.S
;
LD CR2002                ; 常時ON
LDA.S EM1076             ; MCﾘｰｸ結果(回路7上流封止) ﾘｰｸ量
CON
EXT.S
CON
STA.L @VM12
CON
LDA.S EM1056             ; MCﾘｰｸ結果(回路7-7) ﾘｰｸ量
CON
EXT.S
CON
SUB.L @VM12
CON
STA.S EM1136             ; MCﾘｰｸ結果(回路7下流算出) ﾘｰｸ量
;EM1137.S = EM1057.S - EM1077.S
;
LD CR2002                ; 常時ON
LDA.S EM1077             ; MCﾘｰｸ結果(回路8上流封止) ﾘｰｸ量
CON
EXT.S
CON
STA.L @VM14
CON
LDA.S EM1057             ; MCﾘｰｸ結果(回路8-8) ﾘｰｸ量
CON
EXT.S
CON
SUB.L @VM14
CON
STA.S EM1137             ; MCﾘｰｸ結果(回路8下流算出) ﾘｰｸ量
;EM1138.S = EM1058.S - EM1078.S
;
LD CR2002                ; 常時ON
LDA.S EM1078             ; MCﾘｰｸ結果(回路9上流封止) ﾘｰｸ量
CON
EXT.S
CON
STA.L @VM16
CON
LDA.S EM1058             ; MCﾘｰｸ結果(回路9-9) ﾘｰｸ量
CON
EXT.S
CON
SUB.L @VM16
CON
STA.S EM1138             ; MCﾘｰｸ結果(回路9下流算出) ﾘｰｸ量
;EM1139.S = EM1059.S - EM1079.S
;
LD CR2002                ; 常時ON
LDA.S EM1079             ; MCﾘｰｸ結果(回路10上流封止) ﾘｰｸ量
CON
EXT.S
CON
STA.L @VM18
CON
LDA.S EM1059             ; MCﾘｰｸ結果(回路10-10) ﾘｰｸ量
CON
EXT.S
CON
SUB.L @VM18
CON
STA.S EM1139             ; MCﾘｰｸ結果(回路10下流算出) ﾘｰｸ量
;EM1140.S = EM1060.S - EM1080.S
;
LD CR2002                ; 常時ON
LDA.S EM1080             ; MCﾘｰｸ結果(回路11上流封止) ﾘｰｸ量
CON
EXT.S
CON
STA.L @VM20
CON
LDA.S EM1060             ; MCﾘｰｸ結果(回路11-11) ﾘｰｸ量
CON
EXT.S
CON
SUB.L @VM20
CON
STA.S EM1140             ; MCﾘｰｸ結果(回路11下流算出) ﾘｰｸ量
;EM1141.S = EM1061.S - EM1081.S
;
LD CR2002                ; 常時ON
LDA.S EM1081             ; MCﾘｰｸ結果(回路12上流封止) ﾘｰｸ量
CON
EXT.S
CON
STA.L @VM22
CON
LDA.S EM1061             ; MCﾘｰｸ結果(回路12-12) ﾘｰｸ量
CON
EXT.S
CON
SUB.L @VM22
CON
STA.S EM1141             ; MCﾘｰｸ結果(回路12下流算出) ﾘｰｸ量
;EM1142.S = EM1062.S - EM1082.S
;
LD CR2002                ; 常時ON
LDA.S EM1082             ; MCﾘｰｸ結果(回路13上流封止) ﾘｰｸ量
CON
EXT.S
CON
STA.L @VM24
CON
LDA.S EM1062             ; MCﾘｰｸ結果(回路13-13) ﾘｰｸ量
CON
EXT.S
CON
SUB.L @VM24
CON
STA.S EM1142             ; MCﾘｰｸ結果(回路13下流算出) ﾘｰｸ量
;EM1143.S = EM1063.S - EM1083.S
;
LD CR2002                ; 常時ON
LDA.S EM1083             ; MCﾘｰｸ結果(回路14上流封止) ﾘｰｸ量
CON
EXT.S
CON
STA.L @VM26
CON
LDA.S EM1063             ; MCﾘｰｸ結果(回路14-14) ﾘｰｸ量
CON
EXT.S
CON
SUB.L @VM26
CON
STA.S EM1143             ; MCﾘｰｸ結果(回路14下流算出) ﾘｰｸ量
;EM1144.S = EM1064.S - EM1084.S
;
LD CR2002                ; 常時ON
LDA.S EM1084             ; MCﾘｰｸ結果(回路15上流封止) ﾘｰｸ量
CON
EXT.S
CON
STA.L @VM28
CON
LDA.S EM1064             ; MCﾘｰｸ結果(回路15-15) ﾘｰｸ量
CON
EXT.S
CON
SUB.L @VM28
CON
STA.S EM1144             ; MCﾘｰｸ結果(回路15下流算出) ﾘｰｸ量
;EM1145.S = EM1065.S - EM1085.S
;
LD CR2002                ; 常時ON
LDA.S EM1085             ; MCﾘｰｸ結果(回路16上流封止) ﾘｰｸ量
CON
EXT.S
CON
STA.L @VM30
CON
LDA.S EM1065             ; MCﾘｰｸ結果(回路16-16) ﾘｰｸ量
CON
EXT.S
CON
SUB.L @VM30
CON
STA.S EM1145             ; MCﾘｰｸ結果(回路16下流算出) ﾘｰｸ量
;EM1146.S = EM1066.S - EM1086.S
;
LD CR2002                ; 常時ON
LDA.S EM1086             ; MCﾘｰｸ結果(回路17上流封止) ﾘｰｸ量
CON
EXT.S
CON
STA.L @VM32
CON
LDA.S EM1066             ; MCﾘｰｸ結果(回路17-17) ﾘｰｸ量
CON
EXT.S
CON
SUB.L @VM32
CON
STA.S EM1146             ; MCﾘｰｸ結果(回路17下流算出) ﾘｰｸ量
;EM1147.S = EM1067.S - EM1087.S
;
LD CR2002                ; 常時ON
LDA.S EM1087             ; MCﾘｰｸ結果(回路18上流封止) ﾘｰｸ量
CON
EXT.S
CON
STA.L @VM34
CON
LDA.S EM1067             ; MCﾘｰｸ結果(回路18-18) ﾘｰｸ量
CON
EXT.S
CON
SUB.L @VM34
CON
STA.S EM1147             ; MCﾘｰｸ結果(回路18下流算出) ﾘｰｸ量
;EM1148.S = EM1068.S - EM1088.S
;
LD CR2002                ; 常時ON
LDA.S EM1088             ; MCﾘｰｸ結果(回路19上流封止) ﾘｰｸ量
CON
EXT.S
CON
STA.L @VM36
CON
LDA.S EM1068             ; MCﾘｰｸ結果(回路19-19) ﾘｰｸ量
CON
EXT.S
CON
SUB.L @VM36
CON
STA.S EM1148             ; MCﾘｰｸ結果(回路19下流算出) ﾘｰｸ量
;EM1149.S = EM1069.S - EM1089.S
LD CR2002                ; 常時ON
LDA.S EM1089             ; MCﾘｰｸ結果(回路20上流封止) ﾘｰｸ量
CON
EXT.S
CON
STA.L @VM38
CON
LDA.S EM1069             ; MCﾘｰｸ結果(回路20-20) ﾘｰｸ量
CON
EXT.S
CON
SUB.L @VM38
CON
STA.S EM1149             ; MCﾘｰｸ結果(回路20下流算出) ﾘｰｸ量
LABEL #1000
;
STG @MR3203
JMP @MR3215
;終了/end
STG @MR3215
RES MR100                ; 検査動作中
CON
MDSTOP MC_Leak_NEW
ENDS
;<h1/>■ｻﾌﾞﾙｰﾁﾝ/Subroutine
END
ENDH
