DEVICE:53
;MODULE:Safty_cover
;MODULE_TYPE:0
LD MR504                 ; 非常停止
AND MR315                ; 扉開処理中
AND MR505                ; 安全扉開
ANB R013                 ; 安全扉状態(ON=OK)
ANB MR510                ; ﾎﾟｰｽﾞ禁止
ANB MR415                ; ｴﾘｱｾﾝｻ監視中遮光記憶
@RES MR504               ; 非常停止
LDB MR504                ; 非常停止
AND MR315                ; 扉開処理中
ANB MR505                ; 安全扉開
AND R013                 ; 安全扉状態(ON=OK)
ANB MR415                ; ｴﾘｱｾﾝｻ監視中遮光記憶
@SET MR504               ; 非常停止
LDB MR306                ; 自動運転中
ANB MR307                ; ﾒﾝﾃ動作中
ANB MR304                ; 原点復帰中
OR MR902                 ; ｴﾗｰ
OUT MR400                ; ｶﾊﾞｰ開条件
LDP R4001                ; 安全扉開閉Pause sw
ORP MR21002              ; TP_安全扉開閉Pause sw
LD MR400                 ; ｶﾊﾞｰ開条件
OR CR2002                ; 常時ON
ANL
ANB MR315                ; 扉開処理中
SET MR315                ; 扉開処理中
CON
SET @MR000
STG @MR000
LDB MR510                ; ﾎﾟｰｽﾞ禁止
LD MR510                 ; ﾎﾟｰｽﾞ禁止
AND MR902                ; ｴﾗｰ
ORL
ANL
LDA DM2020               ; RBT RB Position No
CON
STA DM2022               ; RBT RB  Before cover open posi
CON
SET MR505                ; 安全扉開
CON
JMP @MR001
STG @MR001
MPS
AND MR005                ; ﾗﾝﾌﾟ点滅用(0.5S)
OUT MR7000               ; 安全扉開閉Start sw lamp
MPP
LDP R4000                ; 安全扉開閉Start sw
ORP MR21000              ; TP_自動ｽﾀｰﾄSW
ANL
RES MR505                ; 安全扉開
CON
JMP @MR002
;扉閉ﾁｪｯｸ/Check door closing 
STG @MR002
MPS
AND R013                 ; 安全扉状態(ON=OK)
JMP @MR004
MPP
ANB R013                 ; 安全扉状態(ON=OK)
TMR #5 #10
CON
AND T5
JMP @MR000
;end
STG @MR004
SET MR403                ; ｴﾘｱｾﾝｻ監視中
CON
LDA DM2022               ; RBT RB  Before cover open posi
CON
STA DM2020               ; RBT RB Position No
CON
AND R4007                ; ﾊﾟｯｸ首溶着 開限
ANB R4006                ; ﾊﾟｯｸ首溶着 閉限
ANB R4014                ; ﾊﾟｯｸ肩/ﾌｨﾙﾑ 熱溶着閉限
AND R4015                ; ﾊﾟｯｸ肩/ﾌｨﾙﾑ 熱溶着開限
SET R54000               ; RB1 MOVE
CON
JMP @MR005
STG @MR005
MPS
LD R1014                 ; ｴﾘｱｾﾝｻ状態(OFF=遮光)
AND R54001               ; RB1 MOVE END
ANL
RES R54001               ; RB1 MOVE END
CON
ANB R54003               ; RB1 Alarm
JMP @MR015
MPP
ANB R1014                ; ｴﾘｱｾﾝｻ状態(OFF=遮光)
JMP @MR010
;エリアセンサ遮光停止
STG @MR010
JMP @MR011
STG @MR011
ANB MR902                ; ｴﾗｰ
ANB MR404                ; ｴﾘｱｾﾝｻ遮光
RES MR510                ; ﾎﾟｰｽﾞ禁止
CON
AND R1014                ; ｴﾘｱｾﾝｻ状態(OFF=遮光)
RES MR504                ; 非常停止
CON
RES MR200                ; ｻｲｸﾙﾀｲﾑ測定ﾌﾗｸﾞ
CON
JMP @MR015
STG @MR015
RES MR315                ; 扉開処理中
CON
TMR #6 #5
CON
AND T6
RES MR403                ; ｴﾘｱｾﾝｻ監視中
CON
ENDS
;安全扉開閉Pause sw lamp/Safety door Pause sw lamp
LD MR315                 ; 扉開処理中
OUT MR7001               ; 安全扉開閉Pause sw lamp
OUT MR21012              ; TP_ｽﾀｰﾄSW　点滅
END
ENDH
