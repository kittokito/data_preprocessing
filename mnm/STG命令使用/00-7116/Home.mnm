DEVICE:53
;MODULE:Home
;MODULE_TYPE:0
;ｲﾆｼｬﾗｲｽﾞ/Initialize
LD CR2008                ; 運転開始時1ｽｷｬﾝON
ORP MR900                ; 重度異常：電源再投入必要
ZRES @MR000 @MR115
LD MR30100               ; 原点復帰開始
MPS
ANB DM10607.4
SET MR504                ; 非常停止
CON
SET DM10807.4            ; RB1ｻｰﾎﾞon
CON
AND DM10607.4
SET @MR000
MPP
AND DM10607.4
SET @MR000
STG @MR000
ANB MR902                ; ｴﾗｰ
AND MR504                ; 非常停止
RES MR510                ; ﾎﾟｰｽﾞ禁止
CON
RES MR30100              ; 原点復帰開始
CON
SET MR403                ; ｴﾘｱｾﾝｻ監視中
CON
JMP @MR001
;溶着開/weld open
STG @MR001
RES MR7012               ; ﾊﾟｯｸ首溶着　下降
CON
RES MR7014               ; ﾊﾟｯｸ肩/ﾌｨﾙﾑ 溶着
CON
JMP @MR002
STG @MR002
ANB MR902                ; ｴﾗｰ
ANB R4014                ; ﾊﾟｯｸ肩/ﾌｨﾙﾑ 熱溶着閉限
AND R4015                ; ﾊﾟｯｸ肩/ﾌｨﾙﾑ 熱溶着開限
ANB R4006                ; ﾊﾟｯｸ首溶着 閉限
AND R4007                ; ﾊﾟｯｸ首溶着 開限
JMP @MR003
;RB1HOME
STG @MR003
ANB MR902                ; ｴﾗｰ
AND MR504                ; 非常停止
TMR #101 #5
CON
AND T101
SET MR403                ; ｴﾘｱｾﾝｻ監視中
CON
RES R54009               ; RB1 HOME END
CON
SET R54008               ; RB1 HOME
CON
JMP @MR004
STG @MR004
MPS
LD MR415                 ; ｴﾘｱｾﾝｻ監視中遮光記憶
OR MR315                 ; 扉開処理中
ANL
JMP @MR005
MPP
LDB MR415                ; ｴﾘｱｾﾝｻ監視中遮光記憶
ANB MR315                ; 扉開処理中
AND R54009               ; RB1 HOME END
ANL
RES R54009               ; RB1 HOME END
CON
MPS
ANB R54003               ; RB1 Alarm
JMP @MR006
MPP
AND R54003               ; RB1 Alarm
JMP @MR005
STG @MR005
ANB MR902                ; ｴﾗｰ
AND MR504                ; 非常停止
TMR #110 #5
CON
AND T110
JMP @MR003
; RB1移動_P1ﾜｰｸｾｯﾄ位置/RB1 Move P1 set pos
STG @MR006
AND R4007                ; ﾊﾟｯｸ首溶着 開限
AND R4015                ; ﾊﾟｯｸ肩/ﾌｨﾙﾑ 熱溶着開限
AND MR504                ; 非常停止
SET MR403                ; ｴﾘｱｾﾝｻ監視中
CON
DW #1 DM2020             ; RBT RB Position No
CON
SET R54000               ; RB1 MOVE
CON
JMP @MR007
STG @MR007
MPS
LD MR415                 ; ｴﾘｱｾﾝｻ監視中遮光記憶
OR MR315                 ; 扉開処理中
ANL
JMP @MR008
MPP
LDB MR415                ; ｴﾘｱｾﾝｻ監視中遮光記憶
ANB MR315                ; 扉開処理中
AND R54001               ; RB1 MOVE END
ANL
RES R54001               ; RB1 MOVE END
CON
MPS
ANB R54003               ; RB1 Alarm
JMP @MR010
MPP
AND R54003               ; RB1 Alarm
JMP @MR009
STG @MR008
ANB R54002               ; During RB1 MOVE 
AND R54001               ; RB1 MOVE END
RES R54001               ; RB1 MOVE END
CON
JMP @MR009
STG @MR009
ANB MR902                ; ｴﾗｰ
ANB R54003               ; RB1 Alarm
AND MR504                ; 非常停止
TMR #111 #5
CON
AND T111
JMP @MR006
;ﾋｰﾀｰon/
STG @MR010
RES MR403                ; ｴﾘｱｾﾝｻ監視中
CON
SET MR500                ; ﾋｰﾀｰ1ON
CON
SET MR501                ; ﾋｰﾀｰ2ON
CON
SET MR502                ; ﾋｰﾀｰ3ON
CON
SET MR503                ; ﾋｰﾀｰ4ON
CON
TMR #100 #5
CON
AND T100
JMP @MR011
;ﾜｰｸ有無確認
STG @MR011
MPS
LDB R4011                ; ﾜｰｸ有無 ﾊﾟｯｸ側
ANB R4100                ; 舟型確認
ANB R4101                ; ﾜｰｸ有無 舟形側
ANL
JMP @MR015
MPP
LD R4011                 ; ﾜｰｸ有無 ﾊﾟｯｸ側
OR R4100                 ; 舟型確認
OR R4101                 ; ﾜｰｸ有無 舟形側
ANL
MPS
LDB LR1010               ; 首溶着済み
ANB LR1011               ; 肩溶着済み
ANL
JMP @MR012
MPP
LD LR1010                ; 首溶着済み
OR LR1011                ; 肩溶着済み
ANL
JMP @MR013
STG @MR012
ANB MR902                ; ｴﾗｰ
DW #2 DM150              ; ｴﾗｰ番号
CON
SET MR31001              ; Err2
CON
SET MR902                ; ｴﾗｰ
CON
JMP @MR014
STG @MR013
ANB MR902                ; ｴﾗｰ
DW #3 DM150              ; ｴﾗｰ番号
CON
SET MR31002              ; Err3
CON
SET MR902                ; ｴﾗｰ
CON
JMP @MR014
STG @MR014
ANB MR902                ; ｴﾗｰ
RES LR1010               ; 首溶着済み
CON
RES LR1011               ; 肩溶着済み
CON
RES MR31002              ; Err3
CON
RES MR31001              ; Err2
CON
AND R1014                ; ｴﾘｱｾﾝｻ状態(OFF=遮光)
JMP @MR011
;END
STG @MR015
MDSTOP Home
ENDS
END
ENDH
