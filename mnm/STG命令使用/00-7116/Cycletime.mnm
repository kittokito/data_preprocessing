DEVICE:53
;MODULE:Cycletime
;MODULE_TYPE:0
;<h1/>ｻｲｸﾙﾀｲﾑ計測/Cycle time measurement
;初期化/Initialize
LDP MR200                ; ｻｲｸﾙﾀｲﾑ測定ﾌﾗｸﾞ
FMOV #0 TM50 #20         ; 全ｻｲｸﾙﾀｲﾑ
DW #0 @TM0               ; ｻｲｸﾙﾀｲﾑ一時保存(100ms)
CON
DW #0 TM90               ; 各ｻｲｸﾙ測定用ﾌﾗｸﾞ
CON
DW #0 @EM0               ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)
;経過時間記録/Elapsed time record
LD MR200                 ; ｻｲｸﾙﾀｲﾑ測定ﾌﾗｸﾞ
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
@INC @EM0                ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)
;各工程時間記録/Each process time record
LD MR200                 ; ｻｲｸﾙﾀｲﾑ測定ﾌﾗｸﾞ
MPS
ANP TM90.0               ; ｻｲｸﾙ測定_工程1
MPS
RES TM90.0               ; ｻｲｸﾙ測定_工程1
CON
MOV @EM0 TM51            ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)  工程1ｻｲｸﾙﾀｲﾑ
MPP
MOV @EM0 @TM0            ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)  ｻｲｸﾙﾀｲﾑ一時保存(100ms)
MRD
ANP TM90.1               ; ｻｲｸﾙ測定_工程2
MPS
RES TM90.1               ; ｻｲｸﾙ測定_工程2
CON
LDA.S @EM0               ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)
CON
SUB.S @TM0               ; ｻｲｸﾙﾀｲﾑ一時保存(100ms)
CON
STA.S TM52               ; 工程2ｻｲｸﾙﾀｲﾑ
MPP
MOV @EM0 @TM0            ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)  ｻｲｸﾙﾀｲﾑ一時保存(100ms)
MRD
ANP TM90.2               ; ｻｲｸﾙ測定_工程3
MPS
RES TM90.2               ; ｻｲｸﾙ測定_工程3
CON
LDA.S @EM0               ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)
CON
SUB.S @TM0               ; ｻｲｸﾙﾀｲﾑ一時保存(100ms)
CON
STA.S TM53               ; 工程3ｻｲｸﾙﾀｲﾑ
MPP
MOV @EM0 @TM0            ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)  ｻｲｸﾙﾀｲﾑ一時保存(100ms)
MRD
ANP TM90.3               ; ｻｲｸﾙ測定_工程4
MPS
RES TM90.3               ; ｻｲｸﾙ測定_工程4
CON
LDA.S @EM0               ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)
CON
SUB.S @TM0               ; ｻｲｸﾙﾀｲﾑ一時保存(100ms)
CON
STA.S TM54               ; 工程4ｻｲｸﾙﾀｲﾑ
MPP
MOV @EM0 @TM0            ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)  ｻｲｸﾙﾀｲﾑ一時保存(100ms)
MPP
ANP TM90.4               ; ｻｲｸﾙ測定_工程5
MPS
RES TM90.4               ; ｻｲｸﾙ測定_工程5
CON
LDA.S @EM0               ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)
CON
SUB.S @TM0               ; ｻｲｸﾙﾀｲﾑ一時保存(100ms)
CON
STA.S TM55               ; 工程5 ｻｲｸﾙﾀｲﾑ
MPP
MOV @EM0 @TM0            ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)  ｻｲｸﾙﾀｲﾑ一時保存(100ms)
;ｻｲｸﾙﾀｲﾑ計測終了/Cycle time measurement end
LDF MR200                ; ｻｲｸﾙﾀｲﾑ測定ﾌﾗｸﾞ
MPS
LDA.S @EM0               ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)
CON
SUB.S @TM0               ; ｻｲｸﾙﾀｲﾑ一時保存(100ms)
CON
STA.S TM60               ; 終了動作
MPP
MOV @EM0 TM50            ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)  全ｻｲｸﾙﾀｲﾑ
END
ENDH
