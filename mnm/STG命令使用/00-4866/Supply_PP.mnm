DEVICE:53
;MODULE:Supply_PP
;MODULE_TYPE:0
;SCRIPT_TYPE:
;非常停止 / Emergency stop
LD R50000                ; 即停止
OR R50415                ; TRAP
OR R50010                ; 非常停止
ZRES @MR002 @MR2915      ; 同一箇所給材(給材失敗)
;条件ﾌﾗｸﾞ / Flug
LD<> DM3910 #0           ; 給材要求有
OUT @MR005               ; 給材要求有
LD R19001                ; L1給材要求
AND R28501               ; 給材 X軸 P2 位置　表示
AND R4409                ; 治具1 PZT位置決めｸﾗﾝﾌﾟY 開限
AND R4411                ; 治具1 PZT位置決めｸﾗﾝﾌﾟX 開限
AND R4413                ; 治具1 ﾌﾟﾛｰﾌﾞ受け 開放側限
AND R4415                ; 治具1 治具ｽﾗｲﾄﾞ 後退限(ｺﾝﾍﾞﾔ側)
LD R19002                ; L2給材要求
AND R28502               ; 給材 X軸 P3 位置　表示
AND R4503                ; 治具2 PZT位置決めｸﾗﾝﾌﾟY 開限
AND R4505                ; 治具2 PZT位置決めｸﾗﾝﾌﾟX 開限
AND R4507                ; 治具2 ﾌﾟﾛｰﾌﾞ受け 開放側限
AND R4509                ; 治具2 治具ｽﾗｲﾄﾞ 後退限(ｺﾝﾍﾞﾔ側)
ORL
LD R19003                ; L3給材要求
AND R28503               ; 給材 X軸 P4 位置　表示
AND R4513                ; 治具3 PZT位置決めｸﾗﾝﾌﾟY 開限
AND R4515                ; 治具3 PZT位置決めｸﾗﾝﾌﾟX 開限
AND R4601                ; 治具3 ﾌﾟﾛｰﾌﾞ受け 開放側限
AND R4603                ; 治具3 治具ｽﾗｲﾄﾞ 後退限(ｺﾝﾍﾞﾔ側)
ORL
LD R19004                ; L4給材要求
AND R28504               ; 給材 X軸 P5 位置　表示
AND R4607                ; 治具4 PZT位置決めｸﾗﾝﾌﾟY 開限
AND R4609                ; 治具4 PZT位置決めｸﾗﾝﾌﾟX 開限
AND R4611                ; 治具4 ﾌﾟﾛｰﾌﾞ受け 開放側限
AND R4613                ; 治具4 治具ｽﾗｲﾄﾞ 後退限(ｺﾝﾍﾞﾔ側)
ORL
LD R19005                ; L5給材要求
AND R28505               ; 給材 X軸 P6 位置　表示
AND R4701                ; 治具5 PZT位置決めｸﾗﾝﾌﾟY 開限
AND R4703                ; 治具5 PZT位置決めｸﾗﾝﾌﾟX 開限
AND R4705                ; 治具5 ﾌﾟﾛｰﾌﾞ受け 開放側限
AND R4707                ; 治具5 治具ｽﾗｲﾄﾞ 後退限(ｺﾝﾍﾞﾔ側)
ORL
LD R19006                ; L6給材要求
AND R28506               ; 給材 X軸 P7 位置　表示
AND R4711                ; 治具6 PZT位置決めｸﾗﾝﾌﾟY 開限
AND R4713                ; 治具6 PZT位置決めｸﾗﾝﾌﾟX 開限
AND R4715                ; 治具6 ﾌﾟﾛｰﾌﾞ受け 開放側限
AND R4801                ; 治具6 治具ｽﾗｲﾄﾞ 後退限(ｺﾝﾍﾞﾔ側)
ORL
LD R19007                ; L7給材要求
AND R28507               ; 給材 X軸 P8 位置　表示
AND R4805                ; 治具7 PZT位置決めｸﾗﾝﾌﾟY 開限
AND R4807                ; 治具7 PZT位置決めｸﾗﾝﾌﾟX 開限
AND R4809                ; 治具7 ﾌﾟﾛｰﾌﾞ受け 開放側限
AND R4811                ; 治具7 治具ｽﾗｲﾄﾞ 後退限(ｺﾝﾍﾞﾔ側)
ORL
AND @T11                 ; 給材P&P 旋回限(測定側)
OUT @MR006               ; ﾜｰｸ挿入可
;'X軸移動後ﾎﾟｼﾞｼｮﾝOKﾌﾗｸﾞ処理 @MR007
;Z1=@DM1 - 1                                  'P1が-00なので-1してます
;IF R28500:Z1 = 1 THEN                        '目的のﾎﾟｼﾞｼｮﾝﾌﾗｸﾞがONしてれば
;  @MR007 = 1                                 '@MRをONします
;ELSE
;  @MR007 = 0                                 'OFFなら
;END IF                                       '@MRをONします
;
;'Z軸移動後ﾎﾟｼﾞｼｮﾝOKﾌﾗｸﾞ処理 @MR008
;Z2=@DM2 - 1
;IF R29500:Z2 = 1 THEN
;  @MR008 = 1
;ELSE
;  @MR008 = 0
;END IF
;
;'X軸移動後ﾎﾟｼﾞｼｮﾝOKﾌﾗｸﾞ処理 @MR007
;
;Z1=@DM1 - 1                                  'P1が-00なので-1してます
;
LD CR2002                ; 常時ON
LDA @DM1                 ; X軸　ﾎﾟｲﾝﾄ No.
CON
EXT
CON
SUB.L +1
CON
STA.L Z1
;IF R28500:Z1 = 1 THEN                        '目的のﾎﾟｼﾞｼｮﾝﾌﾗｸﾞがONしてれば
;
LD R28500:Z1             ; 給材 X軸 P1 位置　表示
NCJ #2000
;  @MR007 = 1                                 '@MRをONします
;
LD CR2002                ; 常時ON
OUT @MR007               ; X軸移動後 ﾎﾟｼﾞｼｮﾝOK
;ELSE
;
LD CR2002                ; 常時ON
CJ #2001
LABEL #2000
;  @MR007 = 0                                 'OFFなら
;
LD CR2003                ; 常時OFF
OUT @MR007               ; X軸移動後 ﾎﾟｼﾞｼｮﾝOK
;END IF                                       '@MRをONします
;
LABEL #2001
;'Z軸移動後ﾎﾟｼﾞｼｮﾝOKﾌﾗｸﾞ処理 @MR008
;
;Z2=@DM2 - 1
;
LD CR2002                ; 常時ON
LDA @DM2                 ; Z軸　ﾎﾟｲﾝﾄ No.
CON
EXT
CON
SUB.L +1
CON
STA.L Z2
;IF R29500:Z2 = 1 THEN
;
LD R29500:Z2             ; 給材 Z軸 P1 位置　表示
NCJ #2002
;  @MR008 = 1
;
LD CR2002                ; 常時ON
OUT @MR008               ; Z軸移動後 ﾎﾟｼﾞｼｮﾝOK
;ELSE
;
LD CR2002                ; 常時ON
CJ #2003
LABEL #2002
;  @MR008 = 0
;
LD CR2003                ; 常時OFF
OUT @MR008               ; Z軸移動後 ﾎﾟｼﾞｼｮﾝOK
;END IF
;
LABEL #2003
;
LDB R50300               ; PAUSE中
ANB R51001               ; 全体･ｼｽﾃﾑ部ｴﾗｰ中
ANB R51003               ; 給材PP部ｴﾗｰ中
ANB R50108               ; ｴﾗｰ発生中
OUT @MR010               ; 給材PP 一時停止ｴﾗｰ無し
;確認ｾﾝｻﾃﾞｨﾚｲ / Senser Delay
LD R7106                 ; 給材P&P 吸着ON
ANB R7107                ; 給材P&P 吸着OFF
ANB R7108                ; 給材P&P 吸着破壊ON
MPS
LD R5104                 ; 給材P&P　吸着圧　  OUT1
OR R52902                ; P&P吸着無視
ANL
TMH @1 #20               ; 給材P&P  吸着OK
MRD
LDB R5104                ; 給材P&P　吸着圧　  OUT1
ANB R52902               ; P&P吸着無視
ANL
TMR @2 #30               ; 給材P&P  吸着NG
MRD
ANB R5104                ; 給材P&P　吸着圧　  OUT1
TMR @3 #3                ; 給材P&P  開放OK
MPP
AND R5104                ; 給材P&P　吸着圧　  OUT1
TMH @4 #20               ; 給材P&P   ﾜｰｸ残
LD R4304                 ; 給材P&P 旋回限(測定側)
TMH @11 #20              ; 給材P&P 旋回限(測定側)
LD R4305                 ; 給材P&P 戻し限(ｺﾝﾍﾞﾔ側)
TMH @12 #20              ; 給材P&P 戻し限(ｺﾝﾍﾞﾔ側)
;<h1/>■■■　AUTO動作 / AUTO OPERATION
LD R50011                ; AUTO MODE
ANB MR11205              ; 給材PPｻｲｸﾙ中
AND MR11005              ; 給材P&P   Start
MPS
LD LR41000               ; 自動ﾊﾟﾗﾒｰﾀ1　通常動作
OR LR41001               ; 自動ﾊﾟﾗﾒｰﾀ2　払い出し
ANL
RES MR11404              ; 給材PPｻｲｸﾙ終了
CON
SET MR11205              ; 給材PPｻｲｸﾙ中
CON
RES MR11005              ; 給材P&P   Start
CON
SET @MR2000              ; AUTO START
MPP
AND LR41008              ; 自動ﾊﾟﾗﾒｰﾀ9  PASS
RES MR11404              ; 給材PPｻｲｸﾙ終了
CON
RES MR11205              ; 給材PPｻｲｸﾙ中
CON
RES MR11005              ; 給材P&P   Start
CON
SET @MR2800              ; 給材P&P ｻｲｸﾙ終了処理
;給材動作MAIN
STG @MR2000              ; AUTO START
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
RES @MR003               ; P&Pﾀｲﾑ計測中
CON
ANPB @MR2000             ; AUTO START
MPS
AND R52000               ; 給材ｺﾝﾍﾞｱ 取出し要求
JMP @MR2001
MPP
LDB R52000               ; 給材ｺﾝﾍﾞｱ 取出し要求
AND MR11407              ; ｺﾝﾍﾞｱ給材ｻｲｸﾙ終了
ANL
JMP @MR2800              ; 給材P&P ｻｲｸﾙ終了処理
;<h1/>ｺﾝﾍﾞﾔから取Ｐ取り出し
STG @MR2001
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
SET @MR003               ; P&Pﾀｲﾑ計測中
CON
SET MR12003              ; 給材動作開始
CON
RES MR7106               ; 給材P&P 吸着ON
CON
SET MR7107               ; 給材P&P 吸着OFF
CON
RES MR7108               ; 給材P&P 吸着破壊ON
CON
JMP @MR2002
STG @MR2002
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
AND R29003               ; 給材 Z軸_移動可
ANB R29101               ; 給材 Z軸_移動中
AND R28500               ; 給材 X軸 P1 位置　表示
AND R29500               ; 給材 Z軸 P1 位置　表示
AND R4400                ; 供給部ﾊﾞｯｸｱｯﾌﾟ 上昇限
AND R4312                ; 供給部ﾜｰｸｸﾗﾝﾌﾟ 閉限
ANB R29102               ; 給材 Z軸_移動完了
SET @MR2900              ; 一時停止禁止
CON
JMP @MR2003
STG @MR2003
MPS
AND R29102               ; 給材 Z軸_移動完了
JMP @MR2004
MPP
MCALL POINT_MOVE2 #4 #2 #2 R29111 R29102;給材 Z軸_位置決め異常  給材 Z軸_移動完了
STG @MR2004
RES R29102               ; 給材 Z軸_移動完了
CON
ANB R29102               ; 給材 Z軸_移動完了
AND R29501               ; 給材 Z軸 P2 位置　表示
RES @MR2900              ; 一時停止禁止
CON
JMP @MR2005              ; 吸着確認
STG @MR2005              ; 吸着確認
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
SET MR7106               ; 給材P&P 吸着ON
CON
RES MR7107               ; 給材P&P 吸着OFF
CON
RES MR7108               ; 給材P&P 吸着破壊ON
CON
MPS
AND @T1                  ; 給材P&P  吸着OK
JMP @MR2100
MPP
AND @T2                  ; 給材P&P  吸着NG
SET @MR200               ; ERR17給材P&P吸着異常
CON
JMP @MR2006
;☆　吸着NG処理
STG @MR2006
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
AND @MR207               ; ERR17解除
RES @MR207               ; ERR17解除
CON
JMP @MR2007
STG @MR2007
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
MPS
ANB R310                 ; ﾊﾟｽｽｲｯﾁON
JMP @MR2005              ; 吸着確認
MPP
AND R310                 ; ﾊﾟｽｽｲｯﾁON
JMP @MR2008
STG @MR2008
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
RES R310                 ; ﾊﾟｽｽｲｯﾁON
CON
RES MR7106               ; 給材P&P 吸着ON
CON
SET MR7107               ; 給材P&P 吸着OFF
CON
SET MR7108               ; 給材P&P 吸着破壊ON
CON
TMR @30 #5
CON
AND @T30
JMP @MR2009
STG @MR2009
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
AND R29003               ; 給材 Z軸_移動可
ANB R29101               ; 給材 Z軸_移動中
ANB R29102               ; 給材 Z軸_移動完了
SET @MR2900              ; 一時停止禁止
CON
JMP @MR2010
STG @MR2010
MPS
AND R29102               ; 給材 Z軸_移動完了
JMP @MR2011
MPP
MCALL POINT_MOVE2 #4 #2 #1 R29111 R29102;給材 Z軸_位置決め異常  給材 Z軸_移動完了
STG @MR2011
RES R29102               ; 給材 Z軸_移動完了
CON
ANB R29102               ; 給材 Z軸_移動完了
AND R29500               ; 給材 Z軸 P1 位置　表示
RES @MR2900              ; 一時停止禁止
CON
JMP @MR2012
STG @MR2012
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
RES MR7106               ; 給材P&P 吸着ON
CON
SET MR7107               ; 給材P&P 吸着OFF
CON
RES MR7108               ; 給材P&P 吸着破壊ON
CON
SET @MR208               ; ERR18給材P&Pﾜｰｸ除材要求
CON
JMP @MR2013
STG @MR2013
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
AND @MR215               ; ERR18解除
RES R52000               ; 給材ｺﾝﾍﾞｱ 取出し要求
CON
SET R52001               ; 取出し完了
CON
RES @MR215               ; ERR18解除
CON
JMP @MR2014
STG @MR2014
ANB R52000               ; 給材ｺﾝﾍﾞｱ 取出し要求
ANB R52001               ; 取出し完了
JMP @MR2000              ; AUTO START
;☆
STG @MR2100
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
AND R29003               ; 給材 Z軸_移動可
ANB R29101               ; 給材 Z軸_移動中
ANB R29102               ; 給材 Z軸_移動完了
SET @MR2900              ; 一時停止禁止
CON
JMP @MR2101
STG @MR2101
MPS
AND R29102               ; 給材 Z軸_移動完了
JMP @MR2102
MPP
MCALL POINT_MOVE2 #4 #2 #1 R29111 R29102;給材 Z軸_位置決め異常  給材 Z軸_移動完了
STG @MR2102
RES R29102               ; 給材 Z軸_移動完了
CON
ANB R29102               ; 給材 Z軸_移動完了
AND R29500               ; 給材 Z軸 P1 位置　表示
RES @MR2900              ; 一時停止禁止
CON
JMP @MR2103
STG @MR2103
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
RES R52000               ; 給材ｺﾝﾍﾞｱ 取出し要求
CON
SET R52001               ; 取出し完了
CON
JMP @MR2104
STG @MR2104
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
MPS
AND @T1                  ; 給材P&P  吸着OK
@INC DM350               ; IINPUT
CON
JMP @MR2200              ; 搬送先判断
MPP
AND @T2                  ; 給材P&P  吸着NG
SET @MR200               ; ERR17給材P&P吸着異常
CON
JMP @MR2105
;☆　給材P&P上昇時吸着異常処理
STG @MR2105
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
AND @MR207               ; ERR17解除
RES @MR207               ; ERR17解除
CON
JMP @MR2106
STG @MR2106
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
MPS
ANB R310                 ; ﾊﾟｽｽｲｯﾁON
JMP @MR2104
MPP
AND R310                 ; ﾊﾟｽｽｲｯﾁON
JMP @MR2107
STG @MR2107
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
RES R310                 ; ﾊﾟｽｽｲｯﾁON
CON
MPS
AND @T3                  ; 給材P&P  開放OK
RES MR7106               ; 給材P&P 吸着ON
CON
SET MR7107               ; 給材P&P 吸着OFF
CON
RES MR7108               ; 給材P&P 吸着破壊ON
CON
JMP @MR2000              ; AUTO START
MPP
AND @T4                  ; 給材P&P   ﾜｰｸ残
SET @MR208               ; ERR18給材P&Pﾜｰｸ除材要求
CON
JMP @MR2108
STG @MR2108
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
AND @MR215               ; ERR18解除
RES @MR215               ; ERR18解除
CON
JMP @MR2107
;<h1/>給材動作
;搬送先判断 ROUTINE
STG @MR2200              ; 搬送先判断
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
RES MR6105               ; 給材P&P 旋回戻し    (ｺﾝﾍﾞﾔ側)
CON
SET MR6104               ; 給材P&P 旋回(測定側)
CON
MPS
AND @MR005               ; 給材要求有
JMP @MR2300              ; 給材ﾎﾟｲﾝﾄ移動
MPP
ANB @MR005               ; 給材要求有
JMP @MR2208
;X軸　給材要求無し時先行動作
STG @MR2208
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
LDA DM3901               ; 優先1
CON
ADD #1
CON
STA @DM1                 ; X軸　ﾎﾟｲﾝﾄ No.
CON
JMP @MR2209
STG @MR2209
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
LD<> @DM1 #8             ; X軸　ﾎﾟｲﾝﾄ No.
LD= @DM1 #8              ; X軸　ﾎﾟｲﾝﾄ No.
AND @T11                 ; 給材P&P 旋回限(測定側)
ORL
ANL
JMP @MR2210
STG @MR2210
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
MPS
LDB @MR005               ; 給材要求有
AND R28003               ; 給材 X軸_移動可
ANB R28101               ; 給材 X軸_移動中
ANB R28102               ; 給材 X軸_移動完了
ANL
SET @MR2900              ; 一時停止禁止
CON
JMP @MR2211
MPP
AND @MR005               ; 給材要求有
JMP @MR2300              ; 給材ﾎﾟｲﾝﾄ移動
STG @MR2211
MPS
AND R28102               ; 給材 X軸_移動完了
JMP @MR2212
MPP
MCALL POINT_MOVE2 #4 #1 @DM1 R28111 R28102;X軸　ﾎﾟｲﾝﾄ No.  給材 X軸_位置決め異常  給材 X軸_移動完了
STG @MR2212
RES R28102               ; 給材 X軸_移動完了
CON
ANB R28102               ; 給材 X軸_移動完了
AND @MR007               ; X軸移動後 ﾎﾟｼﾞｼｮﾝOK
RES @MR2900              ; 一時停止禁止
CON
JMP @MR2213
STG @MR2213
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
AND @MR005               ; 給材要求有
JMP @MR2300              ; 給材ﾎﾟｲﾝﾄ移動
;X軸　給材ﾎﾟｼﾞｼｮﾝに移動
STG @MR2300              ; 給材ﾎﾟｲﾝﾄ移動
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
ANB R19800               ; 投入開始
ANFB R19800              ; 投入開始
MPS
ANB @MR002               ; 同一箇所給材(給材失敗)
SET R19800               ; 投入開始
CON
JMP @MR2301
MPP
AND @MR002               ; 同一箇所給材(給材失敗)
JMP @MR2301
STG @MR2301
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
RES @MR002               ; 同一箇所給材(給材失敗)
CON
ANPB R19800              ; 投入開始
TMH @20 #5
CON
AND @T20
LDA DM3900               ; 投入LNo.
CON
ADD #1
CON
STA @DM1                 ; X軸　ﾎﾟｲﾝﾄ No.
CON
JMP @MR2302
STG @MR2302
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
MPS
LD<> @DM1 #8             ; X軸　ﾎﾟｲﾝﾄ No.
OR R28507                ; 給材 X軸 P8 位置　表示
ANL
JMP @MR2306
MPP
LD= @DM1 #8              ; X軸　ﾎﾟｲﾝﾄ No.
ANB R28507               ; 給材 X軸 P8 位置　表示
ANL
JMP @MR2303
STG @MR2303
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
AND R28003               ; 給材 X軸_移動可
ANB R28101               ; 給材 X軸_移動中
ANB R28102               ; 給材 X軸_移動完了
SET @MR2900              ; 一時停止禁止
CON
JMP @MR2304
STG @MR2304
MPS
AND R28102               ; 給材 X軸_移動完了
JMP @MR2305
MPP
MCALL POINT_MOVE2 #4 #1 #7 R28111 R28102;給材 X軸_位置決め異常  給材 X軸_移動完了
STG @MR2305
RES R28102               ; 給材 X軸_移動完了
CON
ANB R28102               ; 給材 X軸_移動完了
AND @T11                 ; 給材P&P 旋回限(測定側)
TMH @14 #2
CON
AND @T14
RES @MR2900              ; 一時停止禁止
CON
JMP @MR2306
STG @MR2306
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
AND R28003               ; 給材 X軸_移動可
ANB R28101               ; 給材 X軸_移動中
ANB R28102               ; 給材 X軸_移動完了
SET @MR2900              ; 一時停止禁止
CON
JMP @MR2307
STG @MR2307
MPS
AND R28102               ; 給材 X軸_移動完了
JMP @MR2308
MPP
MCALL POINT_MOVE2 #4 #1 @DM1 R28111 R28102;X軸　ﾎﾟｲﾝﾄ No.  給材 X軸_位置決め異常  給材 X軸_移動完了
STG @MR2308
RES R28102               ; 給材 X軸_移動完了
CON
ANB R28102               ; 給材 X軸_移動完了
AND @MR007               ; X軸移動後 ﾎﾟｼﾞｼｮﾝOK
RES @MR2900              ; 一時停止禁止
CON
JMP @MR2400              ; 各ﾗｲﾝへﾜｰｸ挿入
;各ﾗｲﾝへ給材動作
STG @MR2400              ; 各ﾗｲﾝへﾜｰｸ挿入
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
MPS
AND @T1                  ; 給材P&P  吸着OK
JMP @MR2408
MPP
ANB @T1                  ; 給材P&P  吸着OK
TMR @21 #100
CON
AND @T21
SET @MR200               ; ERR17給材P&P吸着異常
CON
JMP @MR2401
;☆　挿入前吸着NG
STG @MR2401
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
AND @MR207               ; ERR17解除
RES @MR207               ; ERR17解除
CON
JMP @MR2402
STG @MR2402
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
MPS
ANB R310                 ; ﾊﾟｽｽｲｯﾁON
JMP @MR2400              ; 各ﾗｲﾝへﾜｰｸ挿入
MPP
AND R310                 ; ﾊﾟｽｽｲｯﾁON
JMP @MR2403
STG @MR2403
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
RES R310                 ; ﾊﾟｽｽｲｯﾁON
CON
MPS
AND @T3                  ; 給材P&P  開放OK
RES R19800               ; 投入開始
CON
SET @MR002               ; 同一箇所給材(給材失敗)
CON
JMP @MR2508
MPP
AND @T4                  ; 給材P&P   ﾜｰｸ残
JMP @MR2400              ; 各ﾗｲﾝへﾜｰｸ挿入
;☆
;Z軸下降　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　↓ﾎﾟｼﾞｼｮﾝはLNo.+2
STG @MR2408
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
LDA DM3900               ; 投入LNo.
CON
ADD #2
CON
STA @DM2                 ; Z軸　ﾎﾟｲﾝﾄ No.
CON
JMP @MR2409
STG @MR2409
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
AND R29003               ; 給材 Z軸_移動可
ANB R29101               ; 給材 Z軸_移動中
ANB R29102               ; 給材 Z軸_移動完了
AND @MR006               ; ﾜｰｸ挿入可
SET R52008               ; 給材中
CON
SET @MR2900              ; 一時停止禁止
CON
JMP @MR2410
STG @MR2410
MPS
AND R29102               ; 給材 Z軸_移動完了
JMP @MR2411
MPP
MCALL POINT_MOVE2 #4 #2 @DM2 R29111 R29102;Z軸　ﾎﾟｲﾝﾄ No.  給材 Z軸_位置決め異常  給材 Z軸_移動完了
STG @MR2411
RES R29102               ; 給材 Z軸_移動完了
CON
ANB R29102               ; 給材 Z軸_移動完了
AND @MR008               ; Z軸移動後 ﾎﾟｼﾞｼｮﾝOK
RES @MR2900              ; 一時停止禁止
CON
JMP @MR2412
STG @MR2412
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
TMH @31 #10
CON
AND @T31
JMP @MR2413
;PP　吸着OFF
STG @MR2413
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
RES MR7106               ; 給材P&P 吸着ON
CON
SET MR7107               ; 給材P&P 吸着OFF
CON
SET MR7108               ; 給材P&P 吸着破壊ON
CON
TMH @32 #30
CON
AND @T32
JMP @MR2414
;Z軸　上昇
STG @MR2414
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
AND R29003               ; 給材 Z軸_移動可
ANB R29101               ; 給材 Z軸_移動中
ANB R29102               ; 給材 Z軸_移動完了
SET @MR2900              ; 一時停止禁止
CON
JMP @MR2415
STG @MR2415
MPS
AND R29102               ; 給材 Z軸_移動完了
JMP @MR2500
MPP
MCALL POINT_MOVE2 #4 #2 #1 R29111 R29102;給材 Z軸_位置決め異常  給材 Z軸_移動完了
STG @MR2500
RES R29102               ; 給材 Z軸_移動完了
CON
ANB R29102               ; 給材 Z軸_移動完了
AND R29500               ; 給材 Z軸 P1 位置　表示
RES @MR2900              ; 一時停止禁止
CON
JMP @MR2501              ; 取P無→X軸P1へ
;ﾜｰｸお持ち帰り確認
STG @MR2501              ; 取P無→X軸P1へ
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
RES R310                 ; ﾊﾟｽｽｲｯﾁON
CON
SET MR7106               ; 給材P&P 吸着ON
CON
RES MR7107               ; 給材P&P 吸着OFF
CON
RES MR7108               ; 給材P&P 吸着破壊ON
CON
MPS
AND @T3                  ; 給材P&P  開放OK
JMP @MR2506
MPP
AND @T4                  ; 給材P&P   ﾜｰｸ残
SET @MR300               ; ERR19取Pお持ち帰り
CON
JMP @MR2502
;☆　ﾜｰｸお持ち帰り
STG @MR2502
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
AND @MR307               ; ERR19解除
RES @MR307               ; ERR19解除
CON
JMP @MR2501              ; 取P無→X軸P1へ
;☆
STG @MR2506
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
RES MR7106               ; 給材P&P 吸着ON
CON
SET MR7107               ; 給材P&P 吸着OFF
CON
RES MR7108               ; 給材P&P 吸着破壊ON
CON
RES R19800               ; 投入開始
CON
RES R52008               ; 給材中
CON
MPS
AND R28501               ; 給材 X軸 P2 位置　表示
SET R19201               ; L1給材完了
MRD
AND R28502               ; 給材 X軸 P3 位置　表示
SET R19202               ; L2給材完了
MRD
AND R28503               ; 給材 X軸 P4 位置　表示
SET R19203               ; L3給材完了
MRD
AND R28504               ; 給材 X軸 P5 位置　表示
SET R19204               ; L4給材完了
MRD
AND R28505               ; 給材 X軸 P6 位置　表示
SET R19205               ; L5給材完了
MRD
AND R28506               ; 給材 X軸 P7 位置　表示
SET R19206               ; L6給材完了
MRD
AND R28507               ; 給材 X軸 P8 位置　表示
SET R19207               ; L7給材完了
MPP
JMP @MR2507
STG @MR2507
LD R28501                ; 給材 X軸 P2 位置　表示
ANB R19001               ; L1給材要求
LD R28502                ; 給材 X軸 P3 位置　表示
ANB R19002               ; L2給材要求
ORL
LD R28503                ; 給材 X軸 P4 位置　表示
ANB R19003               ; L3給材要求
ORL
LD R28504                ; 給材 X軸 P5 位置　表示
ANB R19004               ; L4給材要求
ORL
LD R28505                ; 給材 X軸 P6 位置　表示
ANB R19005               ; L5給材要求
ORL
LD R28506                ; 給材 X軸 P7 位置　表示
ANB R19006               ; L6給材要求
ORL
LD R28507                ; 給材 X軸 P8 位置　表示
ANB R19007               ; L7給材要求
ORL
ANL
JMP @MR2508
;X軸　取P取り出し位置(P1)移動
STG @MR2508
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
RES MR7106               ; 給材P&P 吸着ON
CON
SET MR7107               ; 給材P&P 吸着OFF
CON
RES MR7108               ; 給材P&P 吸着破壊ON
CON
JMP @MR2509
STG @MR2509
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
AND R28003               ; 給材 X軸_移動可
ANB R28101               ; 給材 X軸_移動中
ANB R28102               ; 給材 X軸_移動完了
AND R29500               ; 給材 Z軸 P1 位置　表示
SET @MR2515              ; 旋回戻し動作
CON
SET @MR2900              ; 一時停止禁止
CON
JMP @MR2510
STG @MR2510
MPS
AND R28102               ; 給材 X軸_移動完了
JMP @MR2511
MPP
MCALL POINT_MOVE2 #4 #1 #1 R28111 R28102;給材 X軸_位置決め異常  給材 X軸_移動完了
STG @MR2511
RES R28102               ; 給材 X軸_移動完了
CON
ANB R28102               ; 給材 X軸_移動完了
AND R28500               ; 給材 X軸 P1 位置　表示
RES @MR2900              ; 一時停止禁止
CON
JMP @MR2512
;給材P&P　旋回戻し動作
STG @MR2515              ; 旋回戻し動作
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
AND<=.L DM14290 +50000   ; 軸1 現在座標
RES MR6104               ; 給材P&P 旋回(測定側)
CON
SET MR6105               ; 給材P&P 旋回戻し    (ｺﾝﾍﾞﾔ側)
CON
ENDS
;
STG @MR2512
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
AND @T12                 ; 給材P&P 戻し限(ｺﾝﾍﾞﾔ側)
JMP @MR2000              ; AUTO START
;ｻｲｸﾙ終了処理
STG @MR2800              ; 給材P&P ｻｲｸﾙ終了処理
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
JMP @MR2801
STG @MR2801
AND @MR010               ; 給材PP 一時停止ｴﾗｰ無し
RES MR11205              ; 給材PPｻｲｸﾙ中
CON
SET MR11404              ; 給材PPｻｲｸﾙ終了
CON
ENDS
;<h1/>/// ｱﾗｰﾑ処理
;ERR17
STG @MR200               ; ERR17給材P&P吸着異常
ANB R50008               ; 全体ｴﾗｰ発生
SET R50008               ; 全体ｴﾗｰ発生
CON
SET R51003               ; 給材PP部ｴﾗｰ中
CON
SET R50601               ; ERR17
CON
SET R210                 ; RETRY SW　目隠し解除
CON
JMP @MR201
MOV #17 DM400            ; 表示画面No.
STG @MR201
AND R50008               ; 全体ｴﾗｰ発生
JMP @MR202
STG @MR202
ANB R50008               ; 全体ｴﾗｰ発生
RES R210                 ; RETRY SW　目隠し解除
CON
SET @MR207               ; ERR17解除
CON
ENDS
;ERR18
STG @MR208               ; ERR18給材P&Pﾜｰｸ除材要求
ANB R50008               ; 全体ｴﾗｰ発生
SET R50008               ; 全体ｴﾗｰ発生
CON
SET R51003               ; 給材PP部ｴﾗｰ中
CON
SET R50602               ; ERR18
CON
JMP @MR209
MOV #18 DM400            ; 表示画面No.
STG @MR209
AND R50008               ; 全体ｴﾗｰ発生
JMP @MR210
STG @MR210
ANB R50008               ; 全体ｴﾗｰ発生
SET @MR215               ; ERR18解除
CON
ENDS
;ERR19
STG @MR300               ; ERR19取Pお持ち帰り
ANB R50008               ; 全体ｴﾗｰ発生
SET R50008               ; 全体ｴﾗｰ発生
CON
SET R51003               ; 給材PP部ｴﾗｰ中
CON
SET R50603               ; ERR19
CON
JMP @MR301
MOV #19 DM400            ; 表示画面No.
STG @MR301
AND R50008               ; 全体ｴﾗｰ発生
JMP @MR302
STG @MR302
ANB R50008               ; 全体ｴﾗｰ発生
SET @MR307               ; ERR19解除
CON
ENDS
;<h1/>/// PACK処理
LD @MR2900               ; 一時停止禁止
OUT R51101               ; 給材PP PACK
;<h1/>/// 給材P&P 除給材時間計測
LD @MR003                ; P&Pﾀｲﾑ計測中
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
@INC DM15120             ; 給材P&Pｻｲｸﾙ積算
LDF @MR003               ; P&Pﾀｲﾑ計測中
MOV DM15120 DM15121      ; 給材P&Pｻｲｸﾙ積算  給材P&Pｻｲｸﾙﾀｲﾑ
DW #0 DM15120            ; 給材P&Pｻｲｸﾙ積算
END
ENDH
