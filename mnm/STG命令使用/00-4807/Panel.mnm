DEVICE:53
;MODULE:Panel
;MODULE_TYPE:0
;SCRIPT_TYPE:
;ﾀｯﾁﾊﾟﾈﾙ表示
LD R54206                ; _割り込みSW押下無効
OR MR20210               ; ﾄﾚｲ交換無し選択ﾌﾗｸﾞ
OR MR20212               ; ﾄﾚｲ給材無し
OUT MR20214              ; 割り込みSW押下無効補助
LD MR20210               ; ﾄﾚｲ交換無し選択ﾌﾗｸﾞ
OR MR20212               ; ﾄﾚｲ給材無し
OUT MR20213              ; ﾊﾟﾈﾙ表示
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
MC
LD CR2003                ; 常時OFF
OUT MR9000               ; LD 実P給材可 ULD 実P除材要求表示
LD CR2003                ; 常時OFF
OUT MR9001               ; LD 実P除材要求 ULD 実P給材可表示
LD R5113                 ; 上段ﾄﾚｲ搬送前後　段積み側限
OUT MR9003               ; LD 段ﾊﾞﾗｼ ULD 段積 ﾄﾚｲ表示
LD R5112                 ; 上段ﾄﾚｲ搬送前後　ｴﾚﾍﾞｰﾀ側限
OUT MR9002               ; LD 取出 ULD 取込 ﾄﾚｲ表示
LD CR2003                ; 常時OFF
OUT MR9004               ; ｽﾄｯｶ上 実ﾊﾟﾚｯﾄ有り表示
LD CR2003                ; 常時OFF
OUT MR9005               ; ｽﾄｯｶ中上 実ﾊﾟﾚｯﾄ有り表示
LD CR2003                ; 常時OFF
OUT MR9006               ; ｽﾄｯｶ中下 実ﾊﾟﾚｯﾄ有り表示
LD R5305                 ; ﾄﾚｲｽﾄｯｶ ﾄﾚｲ有無
OUT MR9007               ; ｽﾄｯｶ下 実ﾊﾟﾚｯﾄ有り表示
LDB R5301                ; ﾄﾚｲ段ﾊﾞﾗｼ ﾄﾚｲｻｰﾁ 
OUT MR9008               ; ｴﾚﾍﾞｰﾀ上 ﾊﾟﾚｯﾄ有り表示
LD CR2003                ; 常時OFF
OUT MR9009               ; 下段ｴﾚﾍﾞｰﾀ側 ﾊﾟﾚｯﾄ有り表示
LD R5304                 ; 下段ﾄﾚｲ搬送 扉側ﾄﾚｲ有無
OUT MR9010               ; 下段扉側 ﾊﾟﾚｯﾄ有り表示
LD CR2003                ; 常時OFF
OUT MR9011               ; ｽﾄｯｶ上 ﾄﾚｲ満杯表示
OUT MR9012               ; ｽﾄｯｶ中上 ﾄﾚｲ満杯表示
OUT MR9013               ; ｽﾄｯｶ中下 ﾄﾚｲ満杯表示
OUT MR9014               ; ｽﾄｯｶ下 ﾄﾚｲ満杯表示
LD MR18001               ; RB1(ﾄﾚｲ搬送) 移動中
OUT MR9015               ; LD/ULD ﾄﾚｲ搬送中 矢印表示
LD CR2003                ; 常時OFF
OUT MR9100               ; LD ﾄﾚｲ取出 ULD ﾄﾚｲ取込準備可表示
LD MR21111               ; ﾄﾚｲ交換中
OUT MR9101               ; LD/ULD ﾄﾚｲ交換中表示
LD B2013                 ; ﾒｲﾝへﾜｰｸ取出し可
OUT MR9102               ; LD/ULD ﾜｰｸ取出中表示
LD R5312                 ; 下段ﾄﾚｲ搬送 ﾄﾚｲ過積載
OUT MR9103               ; 下段扉側 ﾊﾟﾚｯﾄ過積載
LD CR2003                ; 常時OFF
OUT MR9104
LD CR2003                ; 常時OFF
OUT MR9105
LD CR2003                ; 常時OFF
OUT MR9106
LD CR2003                ; 常時OFF
OUT MR9107
LD CR2003                ; 常時OFF
OUT MR9108
LD CR2003                ; 常時OFF
OUT MR9109
LD CR2003                ; 常時OFF
OUT MR9110
LD R5306                 ; ﾄﾚｲｽﾄｯｶ ﾄﾚｲ満杯
OUT MR9111               ; ｽﾄｯｶ上 ﾄﾚｲ過積載表示
LD CR2003                ; 常時OFF
OUT MR9112               ; ｽﾄｯｶ中上 ﾄﾚｲ過積載表示
LD CR2003                ; 常時OFF
OUT MR9113               ; ｽﾄｯｶ中下 ﾄﾚｲ過積載表示
LD R5306                 ; ﾄﾚｲｽﾄｯｶ ﾄﾚｲ満杯
OUT MR9114               ; ｽﾄｯｶ下 ﾄﾚｲ過積載表示
LD CR2003                ; 常時OFF
OUT MR9115
MCR
;'ﾄﾚｲ 無検出用
;DM29000.L = EM31000.L - 800
;DM29002.L = dm29000.L
;
LD CR2002                ; 常時ON
NCJ #1002
;'ﾄﾚｲ 無検出用
;
;DM29000.L = EM31000.L - 800
;
LD CR2002                ; 常時ON
LDA.L EM31000            ; ﾄﾚｲ無し時載台停止位置座標ﾊﾞｯﾌｧ
CON
SUB.L +800
CON
STA.L DM29000
;DM29002.L = dm29000.L
;
LD CR2002                ; 常時ON
MOV.L DM29000 DM29002
LABEL #1002
;
LDB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ZRES LR100 LR103         ; _割り込みSW1　ON/OFF状態  _割り込みSW4　ON/OFF状態
LD MR21910               ; 手 ｻｰﾎﾞ P1移動SW表示灯
OR MR21911               ; 手 ｻｰﾎﾞ P5移動SW表示灯
OR MR21912               ; 手 ｻｰﾎﾞ P6移動SW表示灯
OR MR21915               ; 手 RB ｻｰﾁ動作SW表示灯
OUT MR21715              ; 手動　動作中
;ｻｲｸﾙﾀｲﾑ計測
LD CR2003                ; 常時OFF
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND MR19910              ; ｻｲｸﾙﾀｲﾑ計測開始
AND CR2004               ; 10msｸﾛｯｸﾊﾟﾙｽ
@INC.D DM20050           ; ｻｲｸﾙﾀｲﾑ計測
LDF MR19910              ; ｻｲｸﾙﾀｲﾑ計測開始
LDA.D DM20050            ; ｻｲｸﾙﾀｲﾑ計測
CON
MUL.D #10
CON
STA.D DM5040             ; _装置ｻｲｸﾙﾀｲﾑ
LD MR24210               ; ｻｲｸﾙﾀｲﾑ計測ON
ANP MR24200              ; ｻｲｸﾙﾀｲﾑｶｳﾝﾄ開始
LDA.D DM5056             ; _処理計測時間8
CON
STA.D DM20100
CON
LDA.D DM5054             ; _処理計測時間7
CON
STA.D DM5056             ; _処理計測時間8
CON
LDA.D DM5052             ; _処理計測時間6
CON
STA.D DM5054             ; _処理計測時間7
CON
LDA.D DM5050             ; _処理計測時間5
CON
STA.D DM5052             ; _処理計測時間6
CON
LDA.D DM5048             ; _処理計測時間4
CON
STA.D DM5050             ; _処理計測時間5
CON
LDA.D DM5046             ; _処理計測時間3
CON
STA.D DM5048             ; _処理計測時間4
CON
LDA.D DM5044             ; _処理計測時間2
CON
STA.D DM5046             ; _処理計測時間3
CON
LDA.D DM5042             ; _処理計測時間1
CON
STA.D DM5044             ; _処理計測時間2
;dm5058.d = (dm5042.d + dm5044.d + dm5046.d + dm5048.d + dm5050.d + dm5052.d + dm5054.d + dm5056.d )/8
;
LD MR24210               ; ｻｲｸﾙﾀｲﾑ計測ON
ANP MR24200              ; ｻｲｸﾙﾀｲﾑｶｳﾝﾄ開始
NCJ #1000
;dm5058.d = (dm5042.d + dm5044.d + dm5046.d + dm5048.d + dm5050.d + dm5052.d + dm5054.d + dm5056.d )/8
;
LD CR2002                ; 常時ON
LDA.L DM5042             ; _処理計測時間1
CON
ADD.L DM5044             ; _処理計測時間2
CON
ADD.L DM5046             ; _処理計測時間3
CON
ADD.L DM5048             ; _処理計測時間4
CON
ADD.L DM5050             ; _処理計測時間5
CON
ADD.L DM5052             ; _処理計測時間6
CON
ADD.L DM5054             ; _処理計測時間7
CON
ADD.L DM5056             ; _処理計測時間8
CON
EXT.L
CON
DIV.L +8
CON
STA.D DM5058             ; _処理計測時間9
LABEL #1000
;
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND MR24200              ; ｻｲｸﾙﾀｲﾑｶｳﾝﾄ開始
@DW.D #0 DM20060
CON
AND CR2004               ; 10msｸﾛｯｸﾊﾟﾙｽ
RES MR24210              ; ｻｲｸﾙﾀｲﾑ計測ON
CON
@INC.D DM20060
LDF MR24200              ; ｻｲｸﾙﾀｲﾑｶｳﾝﾄ開始
SET MR24210              ; ｻｲｸﾙﾀｲﾑ計測ON
CON
LDA.D DM20060
CON
MUL.D #10
CON
STA.D DM5042             ; _処理計測時間1
LDP MR24202              ; ｻｲｸﾙﾀｲﾑﾘｾｯﾄ
DW.D #0 DM5042           ; _処理計測時間1
CON
DW.D #0 DM5044           ; _処理計測時間2
CON
DW.D #0 DM5046           ; _処理計測時間3
CON
DW.D #0 DM5048           ; _処理計測時間4
CON
DW.D #0 DM5050           ; _処理計測時間5
CON
DW.D #0 DM5052           ; _処理計測時間6
CON
DW.D #0 DM5054           ; _処理計測時間7
CON
DW.D #0 DM5056           ; _処理計測時間8
CON
DW.D #0 DM5058           ; _処理計測時間9
LDF R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
RES MR24210              ; ｻｲｸﾙﾀｲﾑ計測ON
END
ENDH
