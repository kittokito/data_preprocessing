DEVICE:51
;MODULE:CAMERA
;MODULE_TYPE:0
;<h1/>非常停止処理
LD R50010                ; Emargency　Stop
ZRES @MR000 @MR2915
;<h1/>画面切替設定
STG MR20210              ; 検査設定切替要求
ANB R4102                ; 画像ｺﾝﾄﾛｰﾗ BUSY
ANB @MR1001              ; 検査設定切替中
RES MR20211              ; 検査設定切替NG
CON
RES MR20212              ; 検査設定切替完了
CON
SET @MR1001              ; 検査設定切替中
CON
JMP @MR1002              ; 検査設定切替動作
STG @MR1002              ; 検査設定切替動作
LDA DM1000               ; 確定 機種No
CON
STA MR7100               ; 画像処理命令ﾊﾟﾗﾒｰﾀﾋﾞｯﾄ0
CON
RES MR7108               ; 画像処理命令入力ﾋﾞｯﾄ0
CON
SET MR7109               ; 画像処理命令入力ﾋﾞｯﾄ1
CON
JMP @MR1003
STG @MR1003
TMR #750 #2              ; ｳｪｲﾄﾀｲﾏ
CON
AND T750                 ; ｳｪｲﾄﾀｲﾏ
SET MR7112               ; 画像処理命令確定
CON
JMP @MR1004
STG @MR1004
ANB R4103                ; 画像ｺﾝﾄﾛｰﾗ ｺﾏﾝﾄﾞReady
TMH #751 #10             ; ｳｪｲﾄﾀｲﾏ
CON
AND T751                 ; ｳｪｲﾄﾀｲﾏ
RES MR7112               ; 画像処理命令確定
CON
JMP @MR1005
STG @MR1005
MPS
AND R4100                ; 画像ｺﾝﾄﾛｰﾗ ACK
RES MR20211              ; 検査設定切替NG
CON
JMP @MR1006
MPP
AND R4101                ; 画像ｺﾝﾄﾛｰﾗ NACK
SET MR20211              ; 検査設定切替NG
CON
JMP @MR1006
STG @MR1006
RES MR7100               ; 画像処理命令ﾊﾟﾗﾒｰﾀﾋﾞｯﾄ0
CON
RES MR7101               ; 画像処理命令ﾊﾟﾗﾒｰﾀﾋﾞｯﾄ1
CON
RES MR7102               ; 画像処理命令ﾊﾟﾗﾒｰﾀﾋﾞｯﾄ2
CON
RES MR7103               ; 画像処理命令ﾊﾟﾗﾒｰﾀﾋﾞｯﾄ3
CON
RES MR7104               ; 画像処理命令ﾊﾟﾗﾒｰﾀﾋﾞｯﾄ4
CON
RES MR7105               ; 画像処理命令ﾊﾟﾗﾒｰﾀﾋﾞｯﾄ5
CON
RES MR7106               ; 画像処理命令ﾊﾟﾗﾒｰﾀﾋﾞｯﾄ6
CON
RES MR7107               ; 画像処理命令ﾊﾟﾗﾒｰﾀﾋﾞｯﾄ7
CON
RES MR7108               ; 画像処理命令入力ﾋﾞｯﾄ0
CON
RES MR7109               ; 画像処理命令入力ﾋﾞｯﾄ1
CON
RES MR7112               ; 画像処理命令確定
CON
RES @MR1001              ; 検査設定切替中
CON
SET MR20212              ; 検査設定切替完了
CON
ENDS
;<h1/>画像検査
;OR出力　（ONでNG）
STG MR20213              ; 画像検査要求
ANB R4102                ; 画像ｺﾝﾄﾛｰﾗ BUSY
ANB @MR1101              ; 検査検査中
RES MR20214              ; 検査NG
CON
RES MR20215              ; 検査検査完了
CON
SET @MR1101              ; 検査検査中
CON
JMP @MR1102              ; 検査検査動作
STG @MR1102              ; 検査検査動作
SET MR7201               ; 画像処理ﾄﾘｶﾞ1
CON
JMP @MR1103
STG @MR1103
AND R4010                ; 画像ｺﾝﾄﾛｰﾗ 出力用ｽﾄﾛｰﾌﾞ信号
JMP @MR1104
STG @MR1104
MPS
ANB R4011                ; 画像ｺﾝﾄﾛｰﾗ 総合判定
RES MR20214              ; 検査NG
CON
JMP @MR1105
MPP
AND R4011                ; 画像ｺﾝﾄﾛｰﾗ 総合判定
SET MR20214              ; 検査NG
CON
JMP @MR1105
STG @MR1105
RES MR7201               ; 画像処理ﾄﾘｶﾞ1
CON
RES @MR1101              ; 検査検査中
CON
SET MR20215              ; 検査検査完了
CON
ENDS
END
ENDH
