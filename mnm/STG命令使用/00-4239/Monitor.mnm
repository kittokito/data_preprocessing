DEVICE:51
;MODULE:Monitor
;MODULE_TYPE:0
;<h1/>非常停止処理
LD R50010                ; Emargency　Stop
ZRES @MR000 @MR915       ; ﾋｰﾀｰ1 ｴﾗｰ発生
;<h1/>ﾋｰﾀｰ監視
;原点復帰完了でﾋｰﾀｰON
LDP R50007               ; 原点復帰　完了
SET MR500                ; HEATER1 ON
CON
SET MR501                ; HEATER2 ON
;ﾋｰﾀｰ状態監視
LDB LR30003              ; ﾊﾞｲﾊﾟｽ封止無し
AND MR500                ; HEATER1 ON
TMR @0 #10               ; ｳｪｲﾄ
CON
AND @T0                  ; ｳｪｲﾄ
ANB R002                 ; ﾋｰﾀｰ1ｵｰﾊﾞｰﾋｰﾄ
TMH @1 #10               ; ｳｪｲﾄ
CON
AND @T1                  ; ｳｪｲﾄ
OUT @MR008               ; ﾋｰﾀｰ1過昇
LDB LR30003              ; ﾊﾞｲﾊﾟｽ封止無し
AND MR501                ; HEATER2 ON
TMR @10 #10              ; ｳｪｲﾄ
CON
AND @T10                 ; ｳｪｲﾄ
ANB R005                 ; ﾋｰﾀｰ2ｵｰﾊﾞｰﾋｰﾄ
TMH @11 #10
CON
AND @T11
OUT @MR108               ; ﾋｰﾀｰ2過昇
LDB LR30003              ; ﾊﾞｲﾊﾟｽ封止無し
AND MR500                ; HEATER1 ON
ANB @MR007               ; ﾋｰﾀｰ1断線
AND R002                 ; ﾋｰﾀｰ1ｵｰﾊﾞｰﾋｰﾄ
MPS
AND R000                 ; ﾋｰﾀｰ1ALM1
OUT @MR006               ; ﾋｰﾀｰ1低温
MPP
LDB R000                 ; ﾋｰﾀｰ1ALM1
AND R001                 ; ﾋｰﾀｰ1ALM2
ANL
OUT @MR005               ; ﾋｰﾀｰ1適温
LDB LR30003              ; ﾊﾞｲﾊﾟｽ封止無し
AND MR501                ; HEATER2 ON
ANB @MR107               ; ﾋｰﾀｰ2断線
AND R005                 ; ﾋｰﾀｰ2ｵｰﾊﾞｰﾋｰﾄ
MPS
AND R003                 ; ﾋｰﾀｰ2ALM1
OUT @MR106               ; ﾋｰﾀｰ2低温
MPP
LDB R003                 ; ﾋｰﾀｰ2ALM1
AND R004                 ; ﾋｰﾀｰ2ALM2
ANL
OUT @MR105               ; ﾋｰﾀｰ2適温
LDB LR30003              ; ﾊﾞｲﾊﾟｽ封止無し
AND @MR005               ; ﾋｰﾀｰ1適温
ANB @MR000               ; ﾋｰﾀｰ1 ｴﾗｰ発生
OUT R52200               ; ﾋｰﾀｰ1適温
LDB LR30003              ; ﾊﾞｲﾊﾟｽ封止無し
AND @MR105               ; ﾋｰﾀｰ2適温
ANB @MR100               ; ﾋｰﾀｰ2 ｴﾗｰ発生
OUT R52204               ; ﾋｰﾀｰ2適温
;ｴﾗｰNo.42　ﾋｰﾀｰ1適温外ｴﾗｰ
LDB LR30003              ; ﾊﾞｲﾊﾟｽ封止無し
AND R50001               ; AUTO
ANB R52200               ; ﾋｰﾀｰ1適温
AND @MR006               ; ﾋｰﾀｰ1低温
ANB @MR000               ; ﾋｰﾀｰ1 ｴﾗｰ発生
TMH @3 #10               ; ﾋｰﾀ1適温外状態監視
LD @T3                   ; ﾋｰﾀ1適温外状態監視
ANB R50008               ; 全体Error
SET @MR000               ; ﾋｰﾀｰ1 ｴﾗｰ発生
CON
SET R50008               ; 全体Error
CON
SET R50903               ; UT4部ｴﾗｰ
CON
SET R51210               ; Err42
CON
SET @MR001               ; ｴﾗｰ処理へ
MOV #100 DM108           ; ｴﾗｰ詳細
STG @MR001               ; ｴﾗｰ処理へ
AND R50008               ; 全体Error
JMP @MR002
STG @MR002
ANB R50008               ; 全体Error
RES @MR000               ; ﾋｰﾀｰ1 ｴﾗｰ発生
CON
ENDS
;ｴﾗｰNo.43　ﾋｰﾀｰ2適温外ｴﾗｰ
LDB LR30003              ; ﾊﾞｲﾊﾟｽ封止無し
AND R50001               ; AUTO
ANB R52204               ; ﾋｰﾀｰ2適温
AND @MR106               ; ﾋｰﾀｰ2低温
ANB @MR100               ; ﾋｰﾀｰ2 ｴﾗｰ発生
TMH @13 #10              ; ﾋｰﾀ2適温外状態監視
LD @T13                  ; ﾋｰﾀ2適温外状態監視
ANB R50008               ; 全体Error
SET @MR100               ; ﾋｰﾀｰ2 ｴﾗｰ発生
CON
SET R50008               ; 全体Error
CON
SET R50903               ; UT4部ｴﾗｰ
CON
SET R51211               ; Err43
CON
SET @MR101               ; ｴﾗｰ処理へ
MOV #101 DM108           ; ｴﾗｰ詳細
STG @MR101               ; ｴﾗｰ処理へ
AND R50008               ; 全体Error
JMP @MR102
STG @MR102
ANB R50008               ; 全体Error
RES @MR100               ; ﾋｰﾀｰ2 ｴﾗｰ発生
CON
ENDS
;ｴﾗｰNo.40　ﾋｰﾀｰ1過昇温ｴﾗｰ
LDB LR30003              ; ﾊﾞｲﾊﾟｽ封止無し
AND @MR008               ; ﾋｰﾀｰ1過昇
ANB @MR000               ; ﾋｰﾀｰ1 ｴﾗｰ発生
TMH @4 #10               ; ﾋｰﾀ1過昇状態監視
LD @T4                   ; ﾋｰﾀ1過昇状態監視
ANB R50008               ; 全体Error
RES MR500                ; HEATER1 ON
CON
SET @MR000               ; ﾋｰﾀｰ1 ｴﾗｰ発生
CON
SET R50008               ; 全体Error
CON
SET R50903               ; UT4部ｴﾗｰ
CON
SET R51208               ; Err40
CON
SET @MR200               ; ｴﾗｰ処理へ
MOV #102 DM108           ; ｴﾗｰ詳細
STG @MR200               ; ｴﾗｰ処理へ
AND R50008               ; 全体Error
JMP @MR201
STG @MR201
ANB R50008               ; 全体Error
RES @MR000               ; ﾋｰﾀｰ1 ｴﾗｰ発生
CON
SET R50011               ; TRAP
CON
ENDS
;ｴﾗｰNo.41　ﾋｰﾀｰ2過昇温ｴﾗｰ
LDB LR30003              ; ﾊﾞｲﾊﾟｽ封止無し
AND @MR108               ; ﾋｰﾀｰ2過昇
ANB @MR100               ; ﾋｰﾀｰ2 ｴﾗｰ発生
TMH @14 #10              ; ﾋｰﾀ2過昇状態監視
LD @T14                  ; ﾋｰﾀ2過昇状態監視
ANB R50008               ; 全体Error
RES MR501                ; HEATER2 ON
CON
SET @MR100               ; ﾋｰﾀｰ2 ｴﾗｰ発生
CON
SET R50008               ; 全体Error
CON
SET R50903               ; UT4部ｴﾗｰ
CON
SET R51209               ; Err41
CON
SET @MR204               ; ｴﾗｰ処理へ
MOV #103 DM108           ; ｴﾗｰ詳細
STG @MR204               ; ｴﾗｰ処理へ
AND R50008               ; 全体Error
JMP @MR205
STG @MR205
ANB R50008               ; 全体Error
RES @MR100               ; ﾋｰﾀｰ2 ｴﾗｰ発生
CON
SET R50011               ; TRAP
CON
ENDS
;ｴﾗｰNo.44　ﾋｰﾀｰ1断線ｴﾗｰ
LDB LR30003              ; ﾊﾞｲﾊﾟｽ封止無し
AND R50501               ; ﾋｰﾀｰ１断線
ANB @MR000               ; ﾋｰﾀｰ1 ｴﾗｰ発生
TMH @5 #10               ; ﾋｰﾀ1断線状態監視
LD @T5                   ; ﾋｰﾀ1断線状態監視
ANB R50008               ; 全体Error
RES MR500                ; HEATER1 ON
CON
SET @MR000               ; ﾋｰﾀｰ1 ｴﾗｰ発生
CON
SET R50008               ; 全体Error
CON
SET R50903               ; UT4部ｴﾗｰ
CON
SET R51212               ; Err44
CON
SET @MR300               ; ｴﾗｰ処理へ
MOV #104 DM108           ; ｴﾗｰ詳細
STG @MR300               ; ｴﾗｰ処理へ
AND R50008               ; 全体Error
JMP @MR301
STG @MR301
ANB R50008               ; 全体Error
RES @MR000               ; ﾋｰﾀｰ1 ｴﾗｰ発生
CON
SET R50011               ; TRAP
CON
ENDS
;ｴﾗｰNo.45　ﾋｰﾀｰ2断線ｴﾗｰ
LDB LR30003              ; ﾊﾞｲﾊﾟｽ封止無し
AND R50502               ; ﾋｰﾀｰ2断線
ANB @MR100               ; ﾋｰﾀｰ2 ｴﾗｰ発生
TMH @15 #10              ; ﾋｰﾀ2断線状態監視
LD @T15                  ; ﾋｰﾀ2断線状態監視
ANB R50008               ; 全体Error
RES MR501                ; HEATER2 ON
CON
SET @MR100               ; ﾋｰﾀｰ2 ｴﾗｰ発生
CON
SET R50008               ; 全体Error
CON
SET R50903               ; UT4部ｴﾗｰ
CON
SET R51213               ; Err45
CON
SET @MR304               ; ｴﾗｰ処理
MOV #105 DM108           ; ｴﾗｰ詳細
STG @MR304               ; ｴﾗｰ処理
AND R50008               ; 全体Error
JMP @MR305
STG @MR305
ANB R50008               ; 全体Error
RES @MR100               ; ﾋｰﾀｰ2 ｴﾗｰ発生
CON
SET R50011               ; TRAP
CON
ENDS
;<h1/>攪拌ﾓｰﾀ監視
LD CR2002                ; 常時ON
AND= DM1008 #1           ; 顔料　染料判別
LD MR7902                ; 攪拌ﾓｰﾀ正転
OR MR7902                ; 攪拌ﾓｰﾀ正転
ANL
ANB R1110                ; 攪拌ﾓｰﾀ　過昇検出
TMR @7 #5                ; 攪拌ﾓｰﾀ過昇検出
LD @T7                   ; 攪拌ﾓｰﾀ過昇検出
ANB R50008               ; 全体Error
RES MR12705              ; 攪拌回転
CON
SET @MR500               ; 攪拌ﾓｰﾀ過昇検出
CON
SET R50008               ; 全体Error
CON
SET R50902               ; UT3部ｴﾗｰ
CON
SET R51008               ; Err08
CON
SET @MR501
MOV #124 DM108           ; ｴﾗｰ詳細
STG @MR501
AND R50008               ; 全体Error
JMP @MR502
STG @MR502
ANB R50008               ; 全体Error
RES @MR500               ; 攪拌ﾓｰﾀ過昇検出
CON
SET R50011               ; TRAP
CON
ENDS
;<h1/>INDEXﾓｰﾀ監視
LD CR2002                ; 常時ON
AND MR2105               ; INDEX電源ON
ANB R1109                ; INDEX過昇検出
TMR @9 #5                ; INDEXﾓｰﾀ過昇検出
LD @T9                   ; INDEXﾓｰﾀ過昇検出
ANB R50008               ; 全体Error
RES MR2105               ; INDEX電源ON
CON
SET R50008               ; 全体Error
CON
SET R50900               ; INDEX部ｴﾗｰ
CON
SET R51009               ; Err09
CON
SET @MR509
MOV #134 DM108           ; ｴﾗｰ詳細
STG @MR509
AND R50008               ; 全体Error
JMP @MR510
STG @MR510
ANB R50008               ; 全体Error
SET R50011               ; TRAP
CON
ENDS
;<h1/>ｾﾊﾟﾚﾙ真空ﾎﾟﾝﾌﾟｻｰﾏﾙﾄﾘｯﾌﾟ監視
LD CR2002                ; 常時ON
AND MR502                ; ｾﾊﾟﾚﾙ真空ﾎﾟﾝﾌﾟ ON
AND R006                 ; ｾﾊﾟﾚﾙ真空ﾎﾟﾝﾌﾟｻｰﾏﾙﾄﾘｯﾌﾟ
TMR #510 #5              ; ｾﾊﾟﾚﾙ真空ﾎﾟﾝﾌﾟｻｰﾏﾙﾄﾘｯﾌﾟ
LD T510                  ; ｾﾊﾟﾚﾙ真空ﾎﾟﾝﾌﾟｻｰﾏﾙﾄﾘｯﾌﾟ
ANB R50008               ; 全体Error
RES MR502                ; ｾﾊﾟﾚﾙ真空ﾎﾟﾝﾌﾟ ON
CON
SET R50008               ; 全体Error
CON
SET R50902               ; UT3部ｴﾗｰ
CON
SET R51013               ; Err13
CON
SET @MR600               ; ｾﾊﾟﾚﾙ真空ﾎﾟﾝﾌﾟｻｰﾏﾙﾄﾘｯﾌﾟ
MOV #136 DM108           ; ｴﾗｰ詳細
STG @MR600               ; ｾﾊﾟﾚﾙ真空ﾎﾟﾝﾌﾟｻｰﾏﾙﾄﾘｯﾌﾟ
AND R50008               ; 全体Error
JMP @MR601
STG @MR601
ANB R50008               ; 全体Error
SET R50011               ; TRAP
CON
ENDS
;<h1/>ｲﾝｸ吸上げ真空ﾎﾟﾝﾌﾟｻｰﾏﾙﾄﾘｯﾌﾟ監視
LD CR2002                ; 常時ON
AND MR503                ; ｲﾝｸ吸上真空ﾎﾟﾝﾌﾟ ON
AND R007                 ; INK吸上真空ﾎﾟﾝﾌﾟｻｰﾏﾙﾄﾘｯﾌﾟ
TMR #511 #5              ; INK吸上真空ﾎﾟﾝﾌﾟｻｰﾏﾙﾄﾘｯﾌﾟ
LD T511                  ; INK吸上真空ﾎﾟﾝﾌﾟｻｰﾏﾙﾄﾘｯﾌﾟ
ANB R50008               ; 全体Error
RES MR503                ; ｲﾝｸ吸上真空ﾎﾟﾝﾌﾟ ON
CON
SET R50008               ; 全体Error
CON
SET R50902               ; UT3部ｴﾗｰ
CON
SET R51014               ; Err14
CON
SET @MR608               ; INK吸上真空ﾎﾟﾝﾌﾟｻｰﾏﾙﾄﾘｯﾌﾟ
MOV #137 DM108           ; ｴﾗｰ詳細
STG @MR608               ; INK吸上真空ﾎﾟﾝﾌﾟｻｰﾏﾙﾄﾘｯﾌﾟ
AND R50008               ; 全体Error
JMP @MR609
STG @MR609
ANB R50008               ; 全体Error
SET R50011               ; TRAP
CON
ENDS
;<h1/>SATELLITE監視
LD R50001                ; AUTO
ANB LR30009              ; ｻﾃﾗｲﾄ無しﾓｰﾄﾞ
ANB LR30002              ; 注入無し
ANB R5103                ; KD-DRUM　ｲﾝｸｴﾝﾄﾞ検出
TMR @2 #10               ; ｲﾝｸｴﾝﾄﾞ検出ﾃﾞｨﾚｲ
LD @T2                   ; ｲﾝｸｴﾝﾄﾞ検出ﾃﾞｨﾚｲ
ANB R50008               ; 全体Error
ANB R50111               ; ｲﾝｸｴﾝﾄﾞ検出済み
SET R50111               ; ｲﾝｸｴﾝﾄﾞ検出済み
CON
SET @MR800               ; ｲﾝｸｴﾝﾄﾞ検出
CON
SET R50008               ; 全体Error
CON
SET R50902               ; UT3部ｴﾗｰ
CON
SET R51112               ; Err28
CON
SET @MR801
MOV #128 DM108           ; ｴﾗｰ詳細
STG @MR801
AND R50008               ; 全体Error
JMP @MR802
STG @MR802
ANB R50008               ; 全体Error
RES @MR800               ; ｲﾝｸｴﾝﾄﾞ検出
CON
SET R50110               ; 装置定停止要求
CON
ENDS
LDB LR30009              ; ｻﾃﾗｲﾄ無しﾓｰﾄﾞ
AND R50007               ; 原点復帰　完了
LD DM10019.15
OR DM10020.0
ANL
TMR @6 #10               ; ｻﾃﾗｲﾄ断線
LD @T6                   ; ｻﾃﾗｲﾄ断線
ANB R50008               ; 全体Error
SET @MR808               ; ｻﾃﾗｲﾄ断線
CON
SET R50008               ; 全体Error
CON
SET R50902               ; UT3部ｴﾗｰ
CON
SET R51108               ; Err24
CON
SET @MR809
MOV #129 DM108           ; ｴﾗｰ詳細
STG @MR809
AND R50008               ; 全体Error
JMP @MR810
STG @MR810
ANB R50008               ; 全体Error
RES @MR808               ; ｻﾃﾗｲﾄ断線
CON
RES R50007               ; 原点復帰　完了
CON
ENDS
LDF R50001               ; AUTO
OR @MR010                ; AUTO動作終了
ANB @MR011
OUT @MR010               ; AUTO動作終了
LD @MR010                ; AUTO動作終了
TMR @8 #30
CON
AND @T8
AND R50110               ; 装置定停止要求
RES MR7900               ; ｻﾃﾗｲﾄｶﾊﾞｰ1　閉
CON
RES MR7901               ; ｻﾃﾗｲﾄｶﾊﾞｰ2　閉
CON
RES R50007               ; 原点復帰　完了
CON
RES R50110               ; 装置定停止要求
CON
DIFU @MR011
END
ENDH
