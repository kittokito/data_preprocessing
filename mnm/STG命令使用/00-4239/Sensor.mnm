DEVICE:51
;MODULE:Sensor
;MODULE_TYPE:0
;<h1/>非常停止処理
LD R50010                ; Emargency　Stop
ZRES @MR000 @MR2915      ; INDEX部ｾﾝｻ異常発生中
;<h1/>ｴﾗｰ確認
LDB R50900               ; INDEX部ｴﾗｰ
ANB R50901               ; UT2部ｴﾗｰ
ANB R50902               ; UT3部ｴﾗｰ
ANB R50903               ; UT4部ｴﾗｰ
OUT R50907               ; ｴﾗｰ無し
;<h1/>ｼﾘﾝﾀﾞｰ動作確認
LD R50001                ; AUTO
OR R50003                ; HOME
LD R50002                ; STEP
AND R50408               ; STEP時ｼﾘﾝﾀﾞｴﾗｰ有効
ORL
ANB R50008               ; 全体Error
ANB R50300               ; Pause
MC
LD R7500                 ; INDEXﾌﾞﾚｰｷ解除
LDB R4300                ; INDEXﾌﾞﾚｰｷ下降端
LD R4300                 ; INDEXﾌﾞﾚｰｷ下降端
AND R4301                ; INDEXﾌﾞﾚｰｷ上昇端
ORL
ANL
TMR #400 #30
CON
AND T400
SET R51400               ; INDEX制動 下降動作ｴﾗｰ
LDB R7500                ; INDEXﾌﾞﾚｰｷ解除
LDB R4301                ; INDEXﾌﾞﾚｰｷ上昇端
LD R4300                 ; INDEXﾌﾞﾚｰｷ下降端
AND R4301                ; INDEXﾌﾞﾚｰｷ上昇端
ORL
ANL
TMR #401 #30
CON
AND T401
SET R51401               ; INDEX制動 上昇動作ｴﾗｰ
LD R7302                 ; INDEX治具ｴｱｰ供給上下 上昇
LDB R4302                ; 治具 圧空供給 2ST位置 上昇端
LD R4302                 ; 治具 圧空供給 2ST位置 上昇端
AND R4303                ; 治具 圧空供給 2ST位置 下降端
ORL
ANL
TMR #402 #30
CON
AND T402
SET R51402               ; 治具 圧空供給 2ST位置 上昇動作ｴﾗ
LD R7302                 ; INDEX治具ｴｱｰ供給上下 上昇
LDB R4304                ; 治具 圧空供給 3ST位置 上昇端
LD R4304                 ; 治具 圧空供給 3ST位置 上昇端
AND R4305                ; 治具 圧空供給 3ST位置 下降端
ORL
ANL
TMR #403 #30
CON
AND T403
SET R51404               ; 治具 圧空供給 3ST位置 上昇動作ｴﾗ
LD R7302                 ; INDEX治具ｴｱｰ供給上下 上昇
LDB R4306                ; 治具 圧空供給 4ST位置 上昇端
LD R4306                 ; 治具 圧空供給 4ST位置 上昇端
AND R4307                ; 治具 圧空供給 4ST位置 下降端
ORL
ANL
TMR #404 #30
CON
AND T404
SET R51406               ; 治具 圧空供給 4ST位置 上昇動作ｴﾗ
LDB R7302                ; INDEX治具ｴｱｰ供給上下 上昇
LDB R4303                ; 治具 圧空供給 2ST位置 下降端
LD R4302                 ; 治具 圧空供給 2ST位置 上昇端
AND R4303                ; 治具 圧空供給 2ST位置 下降端
ORL
ANL
TMR #405 #30
CON
AND T405
SET R51403               ; 治具 圧空供給 2ST位置 下降動作ｴﾗ
LDB R7302                ; INDEX治具ｴｱｰ供給上下 上昇
LDB R4305                ; 治具 圧空供給 3ST位置 下降端
LD R4304                 ; 治具 圧空供給 3ST位置 上昇端
AND R4305                ; 治具 圧空供給 3ST位置 下降端
ORL
ANL
TMR #406 #30
CON
AND T406
SET R51405               ; 治具 圧空供給 3ST位置 下降動作ｴﾗ
LDB R7302                ; INDEX治具ｴｱｰ供給上下 上昇
LDB R4307                ; 治具 圧空供給 4ST位置 下降端
LD R4306                 ; 治具 圧空供給 4ST位置 上昇端
AND R4307                ; 治具 圧空供給 4ST位置 下降端
ORL
ANL
TMR #407 #30
CON
AND T407
SET R51407               ; 治具 圧空供給 4ST位置 下降動作ｴﾗ
LD R7306                 ; ﾊﾞｲﾊﾟｽ封止ﾍｯﾄﾞ左右1&2出
LDB R4308                ; BYPASS封止左右移動 1&2側 出端
LD R4308                 ; BYPASS封止左右移動 1&2側 出端
AND R4309                ; BYPASS封止左右移動 1&2側 戻端
ORL
ANL
TMR #408 #50
CON
AND T408
SET R51408               ; BYPASS封止左右移動 1&2側 出動作ｴ
LD R7307                 ; ﾊﾞｲﾊﾟｽ封止ﾍｯﾄﾞ左右1&2戻
LDB R4309                ; BYPASS封止左右移動 1&2側 戻端
LD R4308                 ; BYPASS封止左右移動 1&2側 出端
AND R4309                ; BYPASS封止左右移動 1&2側 戻端
ORL
ANL
TMR #409 #50
CON
AND T409
SET R51409               ; BYPASS封止左右移動 1&2側 戻動作ｴ
LD R7308                 ; ﾊﾞｲﾊﾟｽ封止ﾍｯﾄﾞ左右3&4出
LDB R4310                ; BYPASS封止左右移動 3&4側 出端
LD R4310                 ; BYPASS封止左右移動 3&4側 出端
AND R4311                ; BYPASS封止左右移動 3&4側 戻端
ORL
ANL
TMR #410 #50
CON
AND T410
SET R51410               ; BYPASS封止左右移動 3&4側 出動作ｴ
LD R7309                 ; ﾊﾞｲﾊﾟｽ封止ﾍｯﾄﾞ左右3&4戻
LDB R4311                ; BYPASS封止左右移動 3&4側 戻端
LD R4310                 ; BYPASS封止左右移動 3&4側 出端
AND R4311                ; BYPASS封止左右移動 3&4側 戻端
ORL
ANL
TMR #411 #50
CON
AND T411
SET R51411               ; BYPASS封止左右移動 3&4側 戻動作ｴ
LD R7310                 ; ﾊﾞｲﾊﾟｽ封止ﾍｯﾄﾞ前後1&2出
LDB R4312                ; BYPASS封止前後移動 1&2側 前進端
LD R4312                 ; BYPASS封止前後移動 1&2側 前進端
AND R4313                ; BYPASS封止前後移動 1&2側 後退端
ORL
ANL
TMR #412 #30
CON
AND T412
SET R51412               ; BYPASS封止前後移動 1&2側 前進動
LDB R7310                ; ﾊﾞｲﾊﾟｽ封止ﾍｯﾄﾞ前後1&2出
LDB R4313                ; BYPASS封止前後移動 1&2側 後退端
LD R4312                 ; BYPASS封止前後移動 1&2側 前進端
AND R4313                ; BYPASS封止前後移動 1&2側 後退端
ORL
ANL
TMR #413 #50
CON
AND T413
SET R51413               ; BYPASS封止前後移動 1&2側 後退動
LD R7312                 ; ﾊﾞｲﾊﾟｽ封止ﾍｯﾄﾞ前後3&4出
LDB R4314                ; BYPASS封止前後移動 3&4側 前進端
LD R4314                 ; BYPASS封止前後移動 3&4側 前進端
AND R4315                ; BYPASS封止前後移動 3&4側 後退端
ORL
ANL
TMR #414 #30
CON
AND T414
SET R51414               ; BYPASS封止前後移動 3&4側 前進動
LDB R7312                ; ﾊﾞｲﾊﾟｽ封止ﾍｯﾄﾞ前後3&4出
LDB R4315                ; BYPASS封止前後移動 3&4側 後退端
LD R4314                 ; BYPASS封止前後移動 3&4側 前進端
AND R4315                ; BYPASS封止前後移動 3&4側 後退端
ORL
ANL
TMR #415 #50
CON
AND T415
SET R51415               ; BYPASS封止前後移動 3&4側 後退動
LD R7314                 ; ﾏｰｷﾝｸﾞ針下降
LDB R4400                ; 色識別打痕 Cartridge-1 下降端
LD R4400                 ; 色識別打痕 Cartridge-1 下降端
AND R4401                ; 色識別打痕 Cartridge-1 上昇端
ORL
ANL
TMR #416 #50
CON
AND T416
SET R51500               ; 色識別打痕 Cartridge-1 下降動作ｴ
LDB R7314                ; ﾏｰｷﾝｸﾞ針下降
LDB R4401                ; 色識別打痕 Cartridge-1 上昇端
LD R4400                 ; 色識別打痕 Cartridge-1 下降端
AND R4401                ; 色識別打痕 Cartridge-1 上昇端
ORL
ANL
TMR #417 #50
CON
AND T417
SET R51501               ; 色識別打痕 Cartridge-1 上昇動作ｴ
LD R7314                 ; ﾏｰｷﾝｸﾞ針下降
LDB R4402                ; 色識別打痕 Cartridge-2 下降端
LD R4402                 ; 色識別打痕 Cartridge-2 下降端
AND R4403                ; 色識別打痕 Cartridge-2 上昇端
ORL
ANL
TMR #418 #50
CON
AND T418
SET R51502               ; 色識別打痕 Cartridge-2 下降動作ｴ
LDB R7314                ; ﾏｰｷﾝｸﾞ針下降
LDB R4403                ; 色識別打痕 Cartridge-2 上昇端
LD R4402                 ; 色識別打痕 Cartridge-2 下降端
AND R4403                ; 色識別打痕 Cartridge-2 上昇端
ORL
ANL
TMR #419 #50
CON
AND T419
SET R51503               ; 色識別打痕 Cartridge-2 上昇動作ｴ
LD R7314                 ; ﾏｰｷﾝｸﾞ針下降
LDB R4404                ; 色識別打痕 Cartridge-3 下降端
LD R4404                 ; 色識別打痕 Cartridge-3 下降端
AND R4405                ; 色識別打痕 Cartridge-3 上昇端
ORL
ANL
TMR #420 #50
CON
AND T420
SET R51504               ; 色識別打痕 Cartridge-3 下降動作ｴ
LDB R7314                ; ﾏｰｷﾝｸﾞ針下降
LDB R4405                ; 色識別打痕 Cartridge-3 上昇端
LD R4404                 ; 色識別打痕 Cartridge-3 下降端
AND R4405                ; 色識別打痕 Cartridge-3 上昇端
ORL
ANL
TMR #421 #50
CON
AND T421
SET R51505               ; 色識別打痕 Cartridge-3 上昇動作ｴ
LD R7314                 ; ﾏｰｷﾝｸﾞ針下降
LDB R4406                ; 色識別打痕 Cartridge-4 下降端
LD R4406                 ; 色識別打痕 Cartridge-4 下降端
AND R4407                ; 色識別打痕 Cartridge-4 上昇端
ORL
ANL
TMR #422 #50
CON
AND T422
SET R51506               ; 色識別打痕 Cartridge-4 下降動作ｴ
LDB R7314                ; ﾏｰｷﾝｸﾞ針下降
LDB R4407                ; 色識別打痕 Cartridge-4 上昇端
LD R4406                 ; 色識別打痕 Cartridge-4 下降端
AND R4407                ; 色識別打痕 Cartridge-4 上昇端
ORL
ANL
TMR #423 #50
CON
AND T423
SET R51507               ; 色識別打痕 Cartridge-4 上昇動作ｴ
LD R7400                 ; ﾊﾞｲﾊﾟｽ封止ﾜｰｸ押え下降
LDB R4408                ; Cartridge押え上下 下降端
LD R4408                 ; Cartridge押え上下 下降端
AND R4409                ; Cartridge押え上下 上昇端
ORL
ANL
TMR #424 #50
CON
AND T424
SET R51508               ; Cartridge押え上下 下降動作ｴﾗｰ
LDB R7400                ; ﾊﾞｲﾊﾟｽ封止ﾜｰｸ押え下降
LDB R4409                ; Cartridge押え上下 上昇端
LD R4408                 ; Cartridge押え上下 下降端
AND R4409                ; Cartridge押え上下 上昇端
ORL
ANL
TMR #425 #50
CON
AND T425
SET R51509               ; Cartridge押え上下 上昇動作ｴﾗｰ
LD R7402                 ; ﾊﾞｲﾊﾟｽ封止ﾜｰｸ押え出
LDB R4410                ; Cartridge押え左右 出端
LD R4410                 ; Cartridge押え左右 出端
AND R4411                ; Cartridge押え左右 戻端
ORL
ANL
TMR #426 #50
CON
AND T426
SET R51510               ; Cartridge押え左右 出動作ｴﾗｰ
LD R7403                 ; ﾊﾞｲﾊﾟｽ封止ﾜｰｸ押え戻
LDB R4411                ; Cartridge押え左右 戻端
LD R4410                 ; Cartridge押え左右 出端
AND R4411                ; Cartridge押え左右 戻端
ORL
ANL
TMR #427 #50
CON
AND T427
SET R51511               ; Cartridge押え左右 戻動作ｴﾗｰ
MCR
LD R51400                ; INDEX制動 下降動作ｴﾗｰ
OR R51401                ; INDEX制動 上昇動作ｴﾗｰ
OR R51402                ; 治具 圧空供給 2ST位置 上昇動作ｴﾗ
OR R51403                ; 治具 圧空供給 2ST位置 下降動作ｴﾗ
OR R51404                ; 治具 圧空供給 3ST位置 上昇動作ｴﾗ
OR R51405                ; 治具 圧空供給 3ST位置 下降動作ｴﾗ
OR R51406                ; 治具 圧空供給 4ST位置 上昇動作ｴﾗ
OR R51407                ; 治具 圧空供給 4ST位置 下降動作ｴﾗ
ANB R50008               ; 全体Error
ANB @MR000               ; INDEX部ｾﾝｻ異常発生中
SET R50008               ; 全体Error
CON
SET R50900               ; INDEX部ｴﾗｰ
CON
SET @MR000               ; INDEX部ｾﾝｻ異常発生中
CON
SET R51308               ; Err56
CON
SET @MR001
MOV #106 DM108           ; ｴﾗｰ詳細
STG @MR001
AND R50008               ; 全体Error
JMP @MR002
STG @MR002
ANB R50008               ; 全体Error
RES @MR000               ; INDEX部ｾﾝｻ異常発生中
CON
ENDS
LD R51408                ; BYPASS封止左右移動 1&2側 出動作ｴ
OR R51409                ; BYPASS封止左右移動 1&2側 戻動作ｴ
OR R51410                ; BYPASS封止左右移動 3&4側 出動作ｴ
OR R51411                ; BYPASS封止左右移動 3&4側 戻動作ｴ
OR R51412                ; BYPASS封止前後移動 1&2側 前進動
OR R51413                ; BYPASS封止前後移動 1&2側 後退動
OR R51414                ; BYPASS封止前後移動 3&4側 前進動
OR R51415                ; BYPASS封止前後移動 3&4側 後退動
OR R51500                ; 色識別打痕 Cartridge-1 下降動作ｴ
OR R51501                ; 色識別打痕 Cartridge-1 上昇動作ｴ
OR R51502                ; 色識別打痕 Cartridge-2 下降動作ｴ
OR R51503                ; 色識別打痕 Cartridge-2 上昇動作ｴ
OR R51504                ; 色識別打痕 Cartridge-3 下降動作ｴ
OR R51505                ; 色識別打痕 Cartridge-3 上昇動作ｴ
OR R51506                ; 色識別打痕 Cartridge-4 下降動作ｴ
OR R51507                ; 色識別打痕 Cartridge-4 上昇動作ｴ
OR R51508                ; Cartridge押え上下 下降動作ｴﾗｰ
OR R51509                ; Cartridge押え上下 上昇動作ｴﾗｰ
OR R51510                ; Cartridge押え左右 出動作ｴﾗｰ
OR R51511                ; Cartridge押え左右 戻動作ｴﾗｰ
ANB R50008               ; 全体Error
ANB @MR100               ; ﾊﾞｲﾊﾟｽ封止部ｾﾝｻ異常発生中
SET R50008               ; 全体Error
CON
SET R50903               ; UT4部ｴﾗｰ
CON
SET @MR100               ; ﾊﾞｲﾊﾟｽ封止部ｾﾝｻ異常発生中
CON
SET R51310               ; Err58
CON
SET @MR101
MOV #106 DM108           ; ｴﾗｰ詳細
STG @MR101
AND R50008               ; 全体Error
JMP @MR102
STG @MR102
ANB R50008               ; 全体Error
RES @MR100               ; ﾊﾞｲﾊﾟｽ封止部ｾﾝｻ異常発生中
CON
ENDS
;ｴﾗｰ画面へのｼﾘﾝﾀﾞｴﾗｰｳｨﾝﾄﾞ表示
LD @MR000                ; INDEX部ｾﾝｻ異常発生中
OR @MR100                ; ﾊﾞｲﾊﾟｽ封止部ｾﾝｻ異常発生中
AND CR2004               ; 10msｸﾛｯｸﾊﾟﾙｽ
OUT R52213               ; ｼﾘﾝﾀﾞｴﾗｰｳｨﾝﾄﾞ表示
LDB R52213               ; ｼﾘﾝﾀﾞｴﾗｰｳｨﾝﾄﾞ表示
TMR @2 #5                ; ｳｪｲﾄ
CON
AND @T2                  ; ｳｪｲﾄ
OUT R52210               ; ｼﾘﾝﾀﾞｴﾗｰｳｨﾝﾄﾞ表示OFF
;<h1/>ｲﾝﾀｰﾛｯｸ
;　1.ｲﾝﾃﾞｯｸｽ回転開始時、又は回転中に・・・
;INDEXﾌﾞﾚｰｷｼﾘﾝﾀﾞが上昇動作した
LDB R7500                ; INDEXﾌﾞﾚｰｷ解除
ORB R4300                ; INDEXﾌﾞﾚｰｷ下降端
LD R50200                ; INDEX Do
OR R50205                ; INDEX Do   (STEP)
OR R12010                ; INDEX回転中
ANL
ANB R50300               ; Pause
SET R50012               ; TRAP Interlock
CON
@MOV #2000 DM112
;治具ｴｱｰ供給ｼﾘﾝﾀﾞが上昇動作した
LD R7302                 ; INDEX治具ｴｱｰ供給上下 上昇
ORB R4303                ; 治具 圧空供給 2ST位置 下降端
ORB R4305                ; 治具 圧空供給 3ST位置 下降端
ORB R4307                ; 治具 圧空供給 4ST位置 下降端
LD CR2003                ; 常時OFF
AND R50200               ; INDEX Do
LD CR2003                ; 常時OFF
AND R50205               ; INDEX Do   (STEP)
ORL
OR R12010                ; INDEX回転中
ORB DM10548.10           ; INDEX 起動入力待ち
ANL
ANB R50300               ; Pause
AND CR2003               ; 常時OFF
SET R50012               ; TRAP Interlock
CON
@MOV #2001 DM112
;ﾊﾞｲﾊﾟｽ封止1,2前後ｼﾘﾝﾀﾞが前進動作した
LD R7310                 ; ﾊﾞｲﾊﾟｽ封止ﾍｯﾄﾞ前後1&2出
ORB R4313                ; BYPASS封止前後移動 1&2側 後退端
LD R50200                ; INDEX Do
OR R50205                ; INDEX Do   (STEP)
OR R12010                ; INDEX回転中
ANL
ANB R50300               ; Pause
SET R50012               ; TRAP Interlock
CON
@MOV #2002 DM112
;ﾊﾞｲﾊﾟｽ封止3,4前後ｼﾘﾝﾀﾞが前進動作した
LD R7312                 ; ﾊﾞｲﾊﾟｽ封止ﾍｯﾄﾞ前後3&4出
ORB R4315                ; BYPASS封止前後移動 3&4側 後退端
LD R50200                ; INDEX Do
OR R50205                ; INDEX Do   (STEP)
OR R12010                ; INDEX回転中
ANL
ANB R50300               ; Pause
SET R50012               ; TRAP Interlock
CON
@MOV #2003 DM112
;ﾏｰｷﾝｸﾞ上下ｼﾘﾝﾀﾞが下降動作した
LD R7314                 ; ﾏｰｷﾝｸﾞ針下降
ORB R4401                ; 色識別打痕 Cartridge-1 上昇端
ORB R4403                ; 色識別打痕 Cartridge-2 上昇端
ORB R4405                ; 色識別打痕 Cartridge-3 上昇端
ORB R4407                ; 色識別打痕 Cartridge-4 上昇端
LD R50200                ; INDEX Do
OR R50205                ; INDEX Do   (STEP)
OR R12010                ; INDEX回転中
ANL
ANB R50300               ; Pause
SET R50012               ; TRAP Interlock
CON
@MOV #2004 DM112
;ﾜｰｸ押さえ上下ｼﾘﾝﾀﾞが下降動作した
LD R7400                 ; ﾊﾞｲﾊﾟｽ封止ﾜｰｸ押え下降
ORB R4409                ; Cartridge押え上下 上昇端
LD R50200                ; INDEX Do
OR R50205                ; INDEX Do   (STEP)
OR R12010                ; INDEX回転中
ANL
ANB R50300               ; Pause
SET R50012               ; TRAP Interlock
CON
@MOV #2005 DM112
;ﾜｰｸ押さえ左右ｼﾘﾝﾀﾞが前進動作した
LD R7402                 ; ﾊﾞｲﾊﾟｽ封止ﾜｰｸ押え出
ORB R4411                ; Cartridge押え左右 戻端
LD R50200                ; INDEX Do
OR R50205                ; INDEX Do   (STEP)
OR R12010                ; INDEX回転中
ANL
ANB R50300               ; Pause
AND CR2003               ; 常時OFF
SET R50012               ; TRAP Interlock
CON
@MOV #2006 DM112
;注入針上下RBが下降動作した
;　注入針上下RBは、注入ﾍｯﾄﾞが本体にｾｯﾄされている場合には、原点復帰が完了し、ﾎﾟｲﾝﾄが1（待機位置）か、
;　ﾎﾟｲﾝﾄ2（ﾒﾝﾃﾅﾝｽ位置）か、原点位置の場合のみｲﾝﾃﾞｯｸｽ回転可能とする
LD R4415                 ; 注入ﾍｯﾄﾞ有り確認
AND CR2003               ; 常時OFF
LD R50200                ; INDEX Do
OR R50205                ; INDEX Do   (STEP)
OR R12010                ; INDEX回転中
ANL
ANB R50300               ; Pause
SET R50012               ; TRAP Interlock
CON
@MOV #2007 DM112
;<h1/>ｲﾝﾀｰﾛｯｸ
;　1.ﾊﾞｲﾊﾟｽ封止にて・・・
;ﾊﾞｲﾊﾟｽ封止ﾍｯﾄﾞが前進中に、ﾊﾞｲﾊﾟｽ封止左右動作した
LD R50004                ; TASKDO
AND R7310                ; ﾊﾞｲﾊﾟｽ封止ﾍｯﾄﾞ前後1&2出
ANB R4308                ; BYPASS封止左右移動 1&2側 出端
ANB R4309                ; BYPASS封止左右移動 1&2側 戻端
SET R50012               ; TRAP Interlock
CON
@MOV #2010 DM112
LD R50004                ; TASKDO
AND R7312                ; ﾊﾞｲﾊﾟｽ封止ﾍｯﾄﾞ前後3&4出
ANB R4310                ; BYPASS封止左右移動 3&4側 出端
ANB R4311                ; BYPASS封止左右移動 3&4側 戻端
SET R50012               ; TRAP Interlock
CON
@MOV #2011 DM112
;ｲﾝﾀｰﾛｯｸﾘｾｯﾄ
LD R50012                ; TRAP Interlock
ONDL #30 R50013          ; ｲﾝﾀｰﾛｯｸ表示
LD R50013                ; ｲﾝﾀｰﾛｯｸ表示
AND R50014               ; ｲﾝﾀｰﾛｯｸﾘｾｯﾄ
RES R50012               ; TRAP Interlock
CON
RES R50013               ; ｲﾝﾀｰﾛｯｸ表示
CON
ZRES R52100 R52115       ; ｲﾝﾀｰﾛｯｸ01
END
ENDH
