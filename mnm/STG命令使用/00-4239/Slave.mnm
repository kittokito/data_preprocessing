DEVICE:51
;MODULE:Slave
;MODULE_TYPE:0
LD R50010                ; Emargency　Stop
ZRES @MR000 @MR915       ; Pause条件確認
;<h1/>一時停止条件/ Pause Condition
LD CR2002                ; 常時ON
LD R4001                 ; 正面PAUSEｽｲｯﾁ
OR R4004                 ; 背面PAUSEｽｲｯﾁ
ANL
OUT R50106               ; PAUSE SW ON
LDB R50010               ; Emargency　Stop
MPS
TMH @0 #500              ; 起動遅延
CON
AND @T0                  ; 起動遅延
SET @MR000               ; Pause条件確認
MPP
TMR @30 #10              ; ﾒｲﾝｴｱｰOFF確認ﾀｲﾏ
STG @MR000               ; Pause条件確認
MPS
LDB R4005                ; ﾒｲﾝｴｱｰ
OR R50106                ; PAUSE SW ON
ORB R1100                ; Sefty Door
OR R50005                ; PAUSE RQ
LDB LR35000              ; ｴﾗｰﾘｾｯﾄｷｰ要求
LD LR35000               ; ｴﾗｰﾘｾｯﾄｷｰ要求
AND LR35001              ; ｴﾗｰﾘｾｯﾄｷｰ動作OK
ORL
ANL
ANL
LDA DM400                ; INDEXﾎﾟｼﾞｼｮﾝ
CON
STA DM401                ; PAUSE時INDEXﾎﾟｼﾞｼｮﾝ記憶
CON
SET R50300               ; Pause
CON
RES R50005               ; PAUSE RQ
CON
SET R50302               ; 一時停止移行中表示
CON
JMP @MR001
MPP
LD R50515                ; ｴﾘｱｶｰﾃﾝ有効中
ANB R1101                ; ﾗｲﾄｶｰﾃﾝ
ANL
LDA DM400                ; INDEXﾎﾟｼﾞｼｮﾝ
CON
STA DM401                ; PAUSE時INDEXﾎﾟｼﾞｼｮﾝ記憶
CON
SET R50301               ; INDEX回転中ｴﾘｱ遮光
CON
SET R50300               ; Pause
CON
RES R50005               ; PAUSE RQ
CON
SET R50302               ; 一時停止移行中表示
CON
JMP @MR001
;一時停止確認
LDB R50100               ; PACK INDEX
OR R50301                ; INDEX回転中ｴﾘｱ遮光
ANB R50101               ; PACK UT1
ANB R50102               ; PACK UT2
ANB R50103               ; PACK UT3
ANB R50104               ; PACK UT4
OUT @MR900               ; PACK未検出
LDF R50300               ; Pause
RES R50301               ; INDEX回転中ｴﾘｱ遮光
STG @MR001
MPS
AND @MR900               ; PACK未検出
SET MR606                ; PAUSE確認
CON
JMP @MR003
MPP
LDB @MR900               ; PACK未検出
AND R4005                ; ﾒｲﾝｴｱｰ
AND R1100                ; Sefty Door
AND R1101                ; ﾗｲﾄｶｰﾃﾝ
ANB R50106               ; PAUSE SW ON
LDB R50711               ; 背面ﾊﾟﾈﾙ有効LP
OR R50711                ; 背面ﾊﾟﾈﾙ有効LP
ANL
LD R4000                 ; 正面STARTｽｲｯﾁ
OR R4003                 ; 背面STARTｽｲｯﾁ
ANL
ANL
SET MR2107               ; INDEX RESET
CON
JMP @MR002
STG @MR002
AND R1106                ; INDEX 起動待ち
RES MR2107               ; INDEX RESET
CON
RES R50300               ; Pause
CON
JMP @MR000               ; Pause条件確認
LD @MR003
MPS
AND _UT1
SET @MR901               ; UT1 PAUSE中
CON
MDSTOP UT1
MRD
AND _UT2
SET @MR902               ; UT2 PAUSE中
CON
MDSTOP UT2
MRD
AND _UT3
SET @MR903               ; UT3 PAUSE中
CON
MDSTOP UT3
MPP
AND _UT4
SET @MR904               ; UT4 PAUSE中
CON
MDSTOP UT4
STG @MR003
ANB _UT1
ANB _UT2
ANB _UT3
ANB _UT4
JMP @MR004
STG @MR004
RES MR7500               ; INDEXﾌﾞﾚｰｷ解除
CON
LD R4301                 ; INDEXﾌﾞﾚｰｷ上昇端
OR CR2002                ; 常時ON
ANL
JMP @MR005
STG @MR005
RES MR606                ; PAUSE確認
CON
RES MR2105               ; INDEX電源ON
CON
RES DM10748.9            ; INDEX ｻｰﾎﾞON
CON
RES DM10748.8            ; INDEX 起動入力
CON
RES R50302               ; 一時停止移行中表示
CON
SET R50304               ; 一時停止中表示
CON
SET MR2100               ; ｶﾊﾞｰ開要求
CON
JMP @MR101
;ｶﾊﾞｰ閉じ後、ｽﾀｰﾄSW ON
STG @MR101
AND R4005                ; ﾒｲﾝｴｱｰ
AND R1101                ; ﾗｲﾄｶｰﾃﾝ
ANB R50106               ; PAUSE SW ON
LDB R50711               ; 背面ﾊﾟﾈﾙ有効LP
OR R50711                ; 背面ﾊﾟﾈﾙ有効LP
ANL
LD R4000                 ; 正面STARTｽｲｯﾁ
OR R4003                 ; 背面STARTｽｲｯﾁ
ANL
RES MR607                ; ﾒｲﾝｴｱｰOFF
CON
RES MR2100               ; ｶﾊﾞｰ開要求
CON
RES R50302               ; 一時停止移行中表示
CON
RES R50304               ; 一時停止中表示
CON
SET R50303               ; 一時停止解除中表示
CON
JMP @MR102
STG @MR102
TMH @1 #50               ; ｶﾊﾞｰ閉確認遅延
CON
AND @T1                  ; ｶﾊﾞｰ閉確認遅延
JMP @MR103
STG @MR103
MPS
LDB R4005                ; ﾒｲﾝｴｱｰ
OR R50106                ; PAUSE SW ON
ORB R1100                ; Sefty Door
ANL
JMP @MR105
MPP
LD R4005                 ; ﾒｲﾝｴｱｰ
ANB R50106               ; PAUSE SW ON
AND R1100                ; Sefty Door
ANL
JMP @MR106
STG @MR105
RES R50303               ; 一時停止解除中表示
CON
RES R50302               ; 一時停止移行中表示
CON
SET R50304               ; 一時停止中表示
CON
SET MR2100               ; ｶﾊﾞｰ開要求
CON
JMP @MR101
;PAUSE解除、ｶﾊﾞｰ閉
STG @MR106
SET MR2105               ; INDEX電源ON
CON
TMR @2 #30
CON
AND @T2
SET DM10748.10           ; INDEX ready復帰
CON
JMP @MR107
STG @MR107
TMR @3 #3
CON
AND @T3
RES DM10748.10           ; INDEX ready復帰
CON
TMR @5 #3                ; ｳｪｲﾄﾀｲﾏ
CON
AND @T5                  ; ｳｪｲﾄﾀｲﾏ
JMP @MR108
STG @MR108
SET DM10748.9            ; INDEX ｻｰﾎﾞON
CON
AND DM10548.10           ; INDEX 起動入力待ち
RES DM10748.10           ; INDEX ready復帰
CON
SET MR7500               ; INDEXﾌﾞﾚｰｷ解除
CON
AND R4300                ; INDEXﾌﾞﾚｰｷ下降端
JMP @MR109
STG @MR109
MPS
LD R50007                ; 原点復帰　完了
OR R50003                ; HOME
ANL
JMP @MR110
MPP
LDB R50007               ; 原点復帰　完了
ANB R50003               ; HOME
ANL
JMP @MR213
LDP @MR110
MPS
AND @MR901               ; UT1 PAUSE中
MDSTRT UT1
MRD
AND @MR902               ; UT2 PAUSE中
MDSTRT UT2
MRD
AND @MR903               ; UT3 PAUSE中
MDSTRT UT3
MPP
AND @MR904               ; UT4 PAUSE中
MDSTRT UT4
STG @MR110
LD _Index
AND _UT1
AND _UT2
AND _UT3
AND _UT4
OR CR2002                ; 常時ON
ANL
MPS
AND R50007               ; 原点復帰　完了
JMP @MR111
MPP
ANB R50007               ; 原点復帰　完了
JMP @MR213
LDB MR2105               ; INDEX電源ON
TMR @4 #30
STG @MR111
RES MR2105               ; INDEX電源ON
CON
SET MR2110               ; INDEX非常停止
CON
AND @T4
MPS
LD MR7304                ; INDEX治具ｴｱｰ供給ON
AND MR7302               ; INDEX治具ｴｱｰ供給上下 上昇
ANL
SET @MR114               ; 治具ｴｱｰ上昇記憶
CON
JMP @MR112
MPP
LDB MR7304               ; INDEX治具ｴｱｰ供給ON
ORB MR7302               ; INDEX治具ｴｱｰ供給上下 上昇
ANL
SET @MR115               ; 治具ｴｱｰ下降記憶
CON
JMP @MR112
STG @MR112
TMR @6 #5
CON
AND @T6
SET MR2105               ; INDEX電源ON
CON
SET MR2107               ; INDEX RESET
CON
LDA DM401                ; PAUSE時INDEXﾎﾟｼﾞｼｮﾝ記憶
CON
STA DM400                ; INDEXﾎﾟｼﾞｼｮﾝ
CON
JMP @MR113
STG @MR113
SET MR7500               ; INDEXﾌﾞﾚｰｷ解除
CON
RES MR7304               ; INDEX治具ｴｱｰ供給ON
CON
TMR @7 #2
CON
AND @T7
RES MR7302               ; INDEX治具ｴｱｰ供給上下 上昇
CON
AND R12006               ; ｲﾝﾃﾞｯｸｽ回転ｲﾝﾀｰﾛｯｸ
RES DM10748.11           ; INDEX ｱﾝｻ
CON
JMP @MR200
STG @MR200
AND DM10548.10           ; INDEX 起動入力待ち
MPS
AND= DM400 #1            ; INDEXﾎﾟｼﾞｼｮﾝ
RES DM10748.4            ; INDEX ﾌﾟﾛｸﾞﾗﾑ2桁目
CON
SET DM10748.5            ; INDEX ﾌﾟﾛｸﾞﾗﾑ1桁目
CON
RES DM10748.0            ; INDEX ﾌﾟﾛｸﾞﾗﾑ番号0
CON
RES DM10748.1            ; INDEX ﾌﾟﾛｸﾞﾗﾑ番号1
CON
RES DM10748.2            ; INDEX ﾌﾟﾛｸﾞﾗﾑ番号2
CON
RES DM10748.3            ; INDEX ﾌﾟﾛｸﾞﾗﾑ番号3
CON
JMP @MR201
MRD
AND= DM400 #2            ; INDEXﾎﾟｼﾞｼｮﾝ
RES DM10748.4            ; INDEX ﾌﾟﾛｸﾞﾗﾑ2桁目
CON
SET DM10748.5            ; INDEX ﾌﾟﾛｸﾞﾗﾑ1桁目
CON
SET DM10748.0            ; INDEX ﾌﾟﾛｸﾞﾗﾑ番号0
CON
RES DM10748.1            ; INDEX ﾌﾟﾛｸﾞﾗﾑ番号1
CON
RES DM10748.2            ; INDEX ﾌﾟﾛｸﾞﾗﾑ番号2
CON
RES DM10748.3            ; INDEX ﾌﾟﾛｸﾞﾗﾑ番号3
CON
JMP @MR201
MRD
AND= DM400 #3            ; INDEXﾎﾟｼﾞｼｮﾝ
RES DM10748.4            ; INDEX ﾌﾟﾛｸﾞﾗﾑ2桁目
CON
SET DM10748.5            ; INDEX ﾌﾟﾛｸﾞﾗﾑ1桁目
CON
RES DM10748.0            ; INDEX ﾌﾟﾛｸﾞﾗﾑ番号0
CON
SET DM10748.1            ; INDEX ﾌﾟﾛｸﾞﾗﾑ番号1
CON
RES DM10748.2            ; INDEX ﾌﾟﾛｸﾞﾗﾑ番号2
CON
RES DM10748.3            ; INDEX ﾌﾟﾛｸﾞﾗﾑ番号3
CON
JMP @MR201
MPP
AND= DM400 #0            ; INDEXﾎﾟｼﾞｼｮﾝ
RES DM10748.4            ; INDEX ﾌﾟﾛｸﾞﾗﾑ2桁目
CON
SET DM10748.5            ; INDEX ﾌﾟﾛｸﾞﾗﾑ1桁目
CON
SET DM10748.0            ; INDEX ﾌﾟﾛｸﾞﾗﾑ番号0
CON
SET DM10748.1            ; INDEX ﾌﾟﾛｸﾞﾗﾑ番号1
CON
RES DM10748.2            ; INDEX ﾌﾟﾛｸﾞﾗﾑ番号2
CON
RES DM10748.3            ; INDEX ﾌﾟﾛｸﾞﾗﾑ番号3
CON
JMP @MR201
STG @MR201
TMH @13 #10
CON
AND @T13
SET R50301               ; INDEX回転中ｴﾘｱ遮光
CON
SET DM10748.8            ; INDEX 起動入力
CON
JMP @MR202
STG @MR202
ANB DM10548.10           ; INDEX 起動入力待ち
RES DM10748.4            ; INDEX ﾌﾟﾛｸﾞﾗﾑ2桁目
CON
RES DM10748.5            ; INDEX ﾌﾟﾛｸﾞﾗﾑ1桁目
CON
RES DM10748.0            ; INDEX ﾌﾟﾛｸﾞﾗﾑ番号0
CON
RES DM10748.1            ; INDEX ﾌﾟﾛｸﾞﾗﾑ番号1
CON
RES DM10748.2            ; INDEX ﾌﾟﾛｸﾞﾗﾑ番号2
CON
RES DM10748.3            ; INDEX ﾌﾟﾛｸﾞﾗﾑ番号3
CON
JMP @MR203
STG @MR203
AND DM10548.9            ; INDEX 位置決め完了
RES DM10748.8            ; INDEX 起動入力
CON
SET DM10748.11           ; INDEX ｱﾝｻ
CON
JMP @MR204
STG @MR204
ANB DM10548.9            ; INDEX 位置決め完了
RES DM10748.11           ; INDEX ｱﾝｻ
CON
RES R50301               ; INDEX回転中ｴﾘｱ遮光
CON
TMR #885 #2
CON
AND T885
JMP @MR212
STG @MR212
MPS
AND @MR114               ; 治具ｴｱｰ上昇記憶
SET MR7302               ; INDEX治具ｴｱｰ供給上下 上昇
CON
AND R4302                ; 治具 圧空供給 2ST位置 上昇端
AND R4304                ; 治具 圧空供給 3ST位置 上昇端
AND R4306                ; 治具 圧空供給 4ST位置 上昇端
SET MR7304               ; INDEX治具ｴｱｰ供給ON
CON
JMP @MR213
MPP
AND @MR115               ; 治具ｴｱｰ下降記憶
JMP @MR213
STG @MR213
RES R50303               ; 一時停止解除中表示
CON
RES R50302               ; 一時停止移行中表示
CON
RES R50304               ; 一時停止中表示
CON
RES @MR901               ; UT1 PAUSE中
CON
RES @MR902               ; UT2 PAUSE中
CON
RES @MR903               ; UT3 PAUSE中
CON
RES @MR904               ; UT4 PAUSE中
CON
RES R50300               ; Pause
CON
RES @MR114               ; 治具ｴｱｰ上昇記憶
CON
RES @MR115               ; 治具ｴｱｰ下降記憶
CON
JMP @MR000               ; Pause条件確認
END
ENDH
