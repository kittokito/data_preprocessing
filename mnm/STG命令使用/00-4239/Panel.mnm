DEVICE:51
;MODULE:Panel
;MODULE_TYPE:0
;画面切替禁止条件
LD R50004                ; TASKDO
OUT R50212               ; PANEL画面切替禁止
;装置立ち上げ画面→初期画面へ
LD CR2008                ; 運転開始時1ｽｷｬﾝON
RES R50900               ; INDEX部ｴﾗｰ
CON
RES R50901               ; UT2部ｴﾗｰ
CON
RES R50902               ; UT3部ｴﾗｰ
CON
RES R50903               ; UT4部ｴﾗｰ
CON
SET MR000                ; 立ち上げｾｯﾄ
CON
SET MR001                ; 立ち上げｾｯﾄ
CON
MOV #0 DM308             ; 切替画面
MOV #0 DM358             ; 背面PANEL 切替画面
LD MR000                 ; 立ち上げｾｯﾄ
RES R50707               ; 自動運転切替
CON
TMR #100 #50             ; ｼｽﾃﾑ立上げ時間
CON
AND T100                 ; ｼｽﾃﾑ立上げ時間
RES MR000                ; 立ち上げｾｯﾄ
CON
@MOV #101 DM308          ; 切替画面
@MOV #5 DM358            ; 背面PANEL 切替画面
LD MR001                 ; 立ち上げｾｯﾄ
RES R50707               ; 自動運転切替
CON
TMR #99 #40              ; ｴﾗｰ監視開始ﾀｲﾏ
CON
AND T99                  ; ｴﾗｰ監視開始ﾀｲﾏ
RES MR001                ; 立ち上げｾｯﾄ
CON
SET MR003                ; ｴﾗｰ監視開始
;原点復帰画面
LDP R50003               ; HOME
MOV #103 DM308           ; 切替画面
;原点復帰完了でﾒｲﾝ画面へ
LDP R50007               ; 原点復帰　完了
MOV #101 DM308           ; 切替画面
LD R50206                ; 自動終了
RES R50707               ; 自動運転切替
CON
MOV #101 DM308           ; 切替画面
;ｴﾗｰ画面へ
LD CR2002                ; 常時ON
AND R50008               ; 全体Error
AND R50108               ; ｴﾗｰ中
@MOV DM300 DM320         ; ﾒｲﾝﾊﾟﾈﾙ表示中画面  ｴﾗｰ発生前の画面番号記憶
MPS
@MOV #502 DM308          ; 切替画面
MPP
LD R50600                ; ﾌﾘｯｶ1 (0.3_0.3)
ANB R50015               ; ｴﾗｰﾘｾｯﾄSW ON
ANL
OUT R50914               ; ﾌﾞｻﾞｰｶｯﾄLP
LD CR2002                ; 常時ON
LDF R50008               ; 全体Error
OR MR002                 ; 全体ｴﾗｰ解除後保持時間補助
ANL
MPS
AND T101                 ; 全体ｴﾗｰ解除後保持時間
OUT MR002                ; 全体ｴﾗｰ解除後保持時間補助
MRD
ANB R50012               ; TRAP Interlock
MOV DM320 DM308          ; ｴﾗｰ発生前の画面番号記憶  切替画面
MRD
AND R50012               ; TRAP Interlock
MOV #0 DM108             ; ｴﾗｰ詳細
MRD
RES R50015               ; ｴﾗｰﾘｾｯﾄSW ON
MPP
TMH #101 #10             ; 全体ｴﾗｰ解除後保持時間
LD CR2003                ; 常時OFF
ANP R50910               ; ｴﾗｰﾘｾｯﾄ
ORP R50909               ; ﾌﾞｻﾞｰｶｯﾄ
LDB LR35000              ; ｴﾗｰﾘｾｯﾄｷｰ要求
OR LR35001               ; ｴﾗｰﾘｾｯﾄｷｰ動作OK
ANL
ANB R50015               ; ｴﾗｰﾘｾｯﾄSW ON
RES LR35001              ; ｴﾗｰﾘｾｯﾄｷｰ動作OK
CON
SET R50015               ; ｴﾗｰﾘｾｯﾄSW ON
LD R50015                ; ｴﾗｰﾘｾｯﾄSW ON
AND R50600               ; ﾌﾘｯｶ1 (0.3_0.3)
OUT R50915               ; 異常ﾘｾｯﾄLP
LD R50010                ; Emargency　Stop
AND R50013               ; ｲﾝﾀｰﾛｯｸ表示
@MOV #501 DM308          ; 切替画面
;ｶｳﾝﾀ表示
LD R50001                ; AUTO
AND R50309               ; 投入数ｶｳﾝﾄ
MPS
AND R52000               ; 投入数1ｹ
@INC.D DM500             ; 投入数ｶｳﾝﾄ
CON
RES R50309               ; 投入数ｶｳﾝﾄ
CON
ZRES R52000 R52003       ; 投入数1ｹ  投入数4ｹ
MRD
AND R52001               ; 投入数2ｹ
@INC.D DM500             ; 投入数ｶｳﾝﾄ
CON
@INC.D DM500             ; 投入数ｶｳﾝﾄ
CON
RES R50309               ; 投入数ｶｳﾝﾄ
CON
ZRES R52000 R52003       ; 投入数1ｹ  投入数4ｹ
MRD
AND R52002               ; 投入数3ｹ
@INC.D DM500             ; 投入数ｶｳﾝﾄ
CON
@INC.D DM500             ; 投入数ｶｳﾝﾄ
CON
@INC.D DM500             ; 投入数ｶｳﾝﾄ
CON
RES R50309               ; 投入数ｶｳﾝﾄ
CON
ZRES R52000 R52003       ; 投入数1ｹ  投入数4ｹ
MPP
AND R52003               ; 投入数4ｹ
@INC.D DM500             ; 投入数ｶｳﾝﾄ
CON
@INC.D DM500             ; 投入数ｶｳﾝﾄ
CON
@INC.D DM500             ; 投入数ｶｳﾝﾄ
CON
@INC.D DM500             ; 投入数ｶｳﾝﾄ
CON
RES R50309               ; 投入数ｶｳﾝﾄ
CON
ZRES R52000 R52003       ; 投入数1ｹ  投入数4ｹ
LD R50001                ; AUTO
AND R50310               ; OK品取出数ｶｳﾝﾄ
MPS
AND R52004               ; OK品取出数1ｹ
@INC.D DM502             ; OK品取出数ｶｳﾝﾄ
CON
RES R50310               ; OK品取出数ｶｳﾝﾄ
CON
ZRES R52004 R52007       ; OK品取出数1ｹ  OK品取出数4ｹ
MRD
AND R52005               ; OK品取出数2ｹ
@INC.D DM502             ; OK品取出数ｶｳﾝﾄ
CON
@INC.D DM502             ; OK品取出数ｶｳﾝﾄ
CON
RES R50310               ; OK品取出数ｶｳﾝﾄ
CON
ZRES R52004 R52007       ; OK品取出数1ｹ  OK品取出数4ｹ
MRD
AND R52006               ; OK品取出数3ｹ
@INC.D DM502             ; OK品取出数ｶｳﾝﾄ
CON
@INC.D DM502             ; OK品取出数ｶｳﾝﾄ
CON
@INC.D DM502             ; OK品取出数ｶｳﾝﾄ
CON
RES R50310               ; OK品取出数ｶｳﾝﾄ
CON
ZRES R52004 R52007       ; OK品取出数1ｹ  OK品取出数4ｹ
MPP
AND R52007               ; OK品取出数4ｹ
@INC.D DM502             ; OK品取出数ｶｳﾝﾄ
CON
@INC.D DM502             ; OK品取出数ｶｳﾝﾄ
CON
@INC.D DM502             ; OK品取出数ｶｳﾝﾄ
CON
@INC.D DM502             ; OK品取出数ｶｳﾝﾄ
CON
RES R50310               ; OK品取出数ｶｳﾝﾄ
CON
ZRES R52004 R52007       ; OK品取出数1ｹ  OK品取出数4ｹ
LD R50001                ; AUTO
AND R50311               ; NG品取出数ｶｳﾝﾄ
MPS
AND R52008               ; NG品取出数1ｹ
@INC.D DM504             ; NG品取出数ｶｳﾝﾄ
CON
RES R50311               ; NG品取出数ｶｳﾝﾄ
CON
ZRES R52008 R52011       ; NG品取出数1ｹ  NG品取出数4ｹ
MRD
AND R52009               ; NG品取出数2ｹ
@INC.D DM504             ; NG品取出数ｶｳﾝﾄ
CON
@INC.D DM504             ; NG品取出数ｶｳﾝﾄ
CON
RES R50311               ; NG品取出数ｶｳﾝﾄ
CON
ZRES R52008 R52011       ; NG品取出数1ｹ  NG品取出数4ｹ
MRD
AND R52010               ; NG品取出数3ｹ
@INC.D DM504             ; NG品取出数ｶｳﾝﾄ
CON
@INC.D DM504             ; NG品取出数ｶｳﾝﾄ
CON
@INC.D DM504             ; NG品取出数ｶｳﾝﾄ
CON
RES R50311               ; NG品取出数ｶｳﾝﾄ
CON
ZRES R52008 R52011       ; NG品取出数1ｹ  NG品取出数4ｹ
MPP
AND R52011               ; NG品取出数4ｹ
@INC.D DM504             ; NG品取出数ｶｳﾝﾄ
CON
@INC.D DM504             ; NG品取出数ｶｳﾝﾄ
CON
@INC.D DM504             ; NG品取出数ｶｳﾝﾄ
CON
@INC.D DM504             ; NG品取出数ｶｳﾝﾄ
CON
RES R50311               ; NG品取出数ｶｳﾝﾄ
CON
ZRES R52008 R52011       ; NG品取出数1ｹ  NG品取出数4ｹ
LDP R10603               ; 手動画面切替
ZRES LR40000 LR40004     ; STEP INDEX   選択ﾗﾝﾌﾟ  STEP UT4   選択ﾗﾝﾌﾟ
LDB LR40000              ; STEP INDEX   選択ﾗﾝﾌﾟ
ANB LR40001              ; STEP UT2   選択ﾗﾝﾌﾟ
ANB LR40002              ; STEP UT2   選択ﾗﾝﾌﾟ
ANB LR40003              ; STEP UT3   選択ﾗﾝﾌﾟ
ANB LR40004              ; STEP UT4   選択ﾗﾝﾌﾟ
INV
ANP R10604               ; ﾒｲﾝ画面戻りSW
DW #0 DM110              ; ｲﾝﾀｰﾛｯｸ詳細
CON
RES R50007               ; 原点復帰　完了
LDP R10604               ; ﾒｲﾝ画面戻りSW
MDSTOP Index
MDSTOP UT1
MDSTOP UT2
MDSTOP UT3
MDSTOP UT4
LD= DM300 #101           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
ANB R50007               ; 原点復帰　完了
ANB MR21711              ; ｻﾃﾗｲﾄ交換可
MOV #8 DM100
LD= DM300 #101           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
ANB R50007               ; 原点復帰　完了
AND MR21711              ; ｻﾃﾗｲﾄ交換可
MOV #15 DM100
LD= DM300 #101           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
AND R50007               ; 原点復帰　完了
AND MR21711              ; ｻﾃﾗｲﾄ交換可
MOV #16 DM100
LD<> DM300 #101          ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
@MOV #0 DM100
LD= DM300 #101           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
AND R50007               ; 原点復帰　完了
MPS
AND R50709               ; 自動運転切替
MOV #10 DM100
MPP
ANF R50709               ; 自動運転切替
@MOV #0 DM100
LD R50709                ; 自動運転切替
AND R50007               ; 原点復帰　完了
AND<> DM1000 #0          ; 確定 機種No
ALT R50707               ; 自動運転切替
LD R52200                ; ﾋｰﾀｰ1適温
OUT MR20100              ; ﾋｰﾀ1準備OK
LD R52204                ; ﾋｰﾀｰ2適温
OUT MR20101              ; ﾋｰﾀ2準備OK
LD R50001                ; AUTO
ANB R50210               ; ｻｲｸﾙ停止中
ANB R50000               ; HOLD
LD R50000                ; HOLD
OR R50210                ; ｻｲｸﾙ停止中
AND R50600               ; ﾌﾘｯｶ1 (0.3_0.3)
ORL
OUT R51714               ; 停止SW表示
LD R50710                ; 背面ﾊﾟﾈﾙ有効
OUT R50711               ; 背面ﾊﾟﾈﾙ有効LP
LDP R50711               ; 背面ﾊﾟﾈﾙ有効LP
MOV #30 DM358            ; 背面PANEL 切替画面
LDF R50711               ; 背面ﾊﾟﾈﾙ有効LP
MOV #5 DM358             ; 背面PANEL 切替画面
LDB R5100                ; ｻﾃﾗｲﾄｶﾊﾞｰ1閉確認
ORB R5101                ; ｻﾃﾗｲﾄｶﾊﾞｰ2閉確認
OUT R10600               ; ｻﾃﾗｲﾄ安全扉開
LD R52303                ; ﾜｰｸ除材ｴﾗｰｳｨﾝﾄﾞ表示要求
OR R52304                ; ﾜｰｸ除材ｴﾗｰｳｨﾝﾄﾞ表示要求
AND CR2004               ; 10msｸﾛｯｸﾊﾟﾙｽ
OUT R52214               ; ﾜｰｸ除材ｴﾗｰｳｨﾝﾄﾞ表示
LD R51001                ; Err01
OR R51002                ; Err02
OR R51003                ; Err03
OR R51004                ; Err04
OR R51005                ; Err05
OR R51006                ; Err06
OUT R51610               ; ﾛﾎﾞｯﾄｴﾗｰ表示
END
ENDH
