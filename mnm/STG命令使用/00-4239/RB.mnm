DEVICE:51
;MODULE:RB
;MODULE_TYPE:0
;<h1/>非常停止処理
LD R50010                ; Emargency　Stop
ZRES MR20200 MR20815     ; 画像RB ｻｰﾎﾞON
CON
ZRES @R001 @R3115
LDF R50010               ; Emargency　Stop
MPS
DW #101 DM308            ; 切替画面
CON
SET MR2000               ; RB1 EMG STOP
CON
SET MR2001               ; RB2 EMG STOP
CON
SET MR2002               ; RB3 EMG STOP
CON
SET MR2003               ; RB4 EMG STOP
CON
SET MR2004               ; RB5 EMG STOP
CON
SET MR2005               ; RB6 EMG STOP
MPP
SET MR2008               ; RB1 Drive STOP
CON
SET MR2009               ; RB2 Drive STOP
CON
SET MR2010               ; RB3 Drive STOP
CON
SET MR2011               ; RB4 Drive STOP
CON
SET MR2012               ; RB5 Drive STOP
CON
SET MR2013               ; RB6 Drive STOP
;<h1/>RB設定
;RBの位置決め幅を0.1に固定する
LD CR2002                ; 常時ON
DW.D #10 DM10702         ; 画像RB 位置決幅（下位8bit）
CON
DW.D #10 DM10710         ; ﾍｯﾄﾞ上下RB 位置決幅（下位8bit）
CON
DW.D #10 DM10718         ; 注入RB1 位置決幅（下位8bit）
CON
DW.D #10 DM10726         ; 注入RB2 位置決幅（下位8bit）
CON
DW.D #10 DM10734         ; 注入RB3 位置決幅（下位8bit）
CON
DW.D #10 DM10742         ; 注入RB4 位置決幅（下位8bit）
;装置の立ち上がりPLSで全軸RBｻｰﾎﾞONさせる
LD CR2008                ; 運転開始時1ｽｷｬﾝON
AND CR2003               ; 常時OFF
SET MR20200              ; 画像RB ｻｰﾎﾞON
CON
SET MR20201              ; 注入上下RB ｻｰﾎﾞON
CON
SET MR20202              ; 注入RB1 ｻｰﾎﾞON
CON
SET MR20203              ; 注入RB2 ｻｰﾎﾞON
CON
SET MR20204              ; 注入RB3 ｻｰﾎﾞON
CON
SET MR20205              ; 注入RB4 ｻｰﾎﾞON
LDB @MR100               ; 画像RB ｱﾗｰﾑ出力中
AND MR2000               ; RB1 EMG STOP
AND MR2008               ; RB1 Drive STOP
TMR #600 #2
CON
AND T600
@SET MR20200             ; 画像RB ｻｰﾎﾞON
LDB @MR102               ; 注入上下RB ｱﾗｰﾑ出力中
AND MR2001               ; RB2 EMG STOP
AND MR2008               ; RB1 Drive STOP
TMR #601 #2
CON
AND T601
@SET MR20201             ; 注入上下RB ｻｰﾎﾞON
LDB @MR104               ; 注入RB1 ｱﾗｰﾑ出力中
AND MR2002               ; RB3 EMG STOP
AND MR2009               ; RB2 Drive STOP
TMR #602 #2
CON
AND T602
@SET MR20202             ; 注入RB1 ｻｰﾎﾞON
LDB @MR106               ; 注入RB2 ｱﾗｰﾑ出力中
AND MR2003               ; RB4 EMG STOP
AND MR2010               ; RB3 Drive STOP
TMR #603 #2
CON
AND T603
@SET MR20203             ; 注入RB2 ｻｰﾎﾞON
LDB @MR108               ; 注入RB3 ｱﾗｰﾑ出力中
AND MR2004               ; RB5 EMG STOP
AND MR2011               ; RB4 Drive STOP
TMR #604 #2
CON
AND T604
@SET MR20204             ; 注入RB3 ｻｰﾎﾞON
LDB @MR110               ; 注入RB4 ｱﾗｰﾑ出力中
AND MR2005               ; RB6 EMG STOP
AND MR2012               ; RB5 Drive STOP
TMR #605 #2
CON
AND T605
@SET MR20205             ; 注入RB4 ｻｰﾎﾞON
LD CR2008                ; 運転開始時1ｽｷｬﾝON
AND CR2003               ; 常時OFF
SET MR20200              ; 画像RB ｻｰﾎﾞON
CON
SET MR20201              ; 注入上下RB ｻｰﾎﾞON
CON
SET MR20202              ; 注入RB1 ｻｰﾎﾞON
CON
SET MR20203              ; 注入RB2 ｻｰﾎﾞON
CON
SET MR20204              ; 注入RB3 ｻｰﾎﾞON
CON
SET MR20205              ; 注入RB4 ｻｰﾎﾞON
;<h1/>画像RB　PCON-CA
BLD DM10507 #3           ; 画像RB 状態信号
OUT @MR100               ; 画像RB ｱﾗｰﾑ出力中
BLD DM10507 #4           ; 画像RB 状態信号
BAND DM10507 #14         ; 画像RB 状態信号
BANB DM10507 #15         ; 画像RB 状態信号
BANB DM10507 #8          ; 画像RB 状態信号
BANB DM10507 #7          ; 画像RB 状態信号
ANB R50008               ; 全体Error
ANB R50300               ; Pause
OUT @MR101               ; 画像RB 運転準備OK
BLD DM10507 #0           ; 画像RB 状態信号
OUT MR20300              ; 画像RB 位置決め完了
LDB @MR1001              ; 画像RB 原点復帰中
ANB @MR2001              ; 画像RB 移動中
INV
OUT MR20304              ; 画像RB ﾓｰﾄﾞ切替不可
LDP MR20200              ; 画像RB ｻｰﾎﾞON
BSET DM10707 #4          ; 画像RB 制御信号
LDF MR20200              ; 画像RB ｻｰﾎﾞON
BRES DM10707 #4          ; 画像RB 制御信号
;画像RB ｱﾗｰﾑ処理
LD MR003                 ; ｴﾗｰ監視開始
AND R50004               ; TASKDO
AND @MR100               ; 画像RB ｱﾗｰﾑ出力中
ANB @MR201               ; 画像RB ｱﾗｰﾑON
ZRES @MR1000 @MR1015     ; 画像RB 原点復帰
CON
ZRES @MR2000 @MR2015
CON
RES MR20306              ; 画像RB 原点復帰中
CON
RES R17912               ; ﾊﾟﾈﾙ　ﾍﾟｰｼﾞ切替不可
CON
BRES DM10707 #1          ; 画像RB 制御信号
CON
RES R10301               ; 画像RB ﾎﾟｲﾝﾄ移動要求
CON
RES MR20307              ; 画像RB ﾎﾟｲﾝﾄ移動中
CON
BRES DM10707 #0          ; 画像RB 制御信号
CON
BRES DM10707 #2          ; 画像RB 制御信号
CON
OUT MR20301              ; 画像RB ｱﾗｰﾑ出力
LD= DM300 #301           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
OR= DM300 #121           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
AND MR20301              ; 画像RB ｱﾗｰﾑ出力
ANB @MR207               ; ｱﾗｰﾑ解除中
ANP MR20312              ; 画像RB ｱﾗｰﾑﾘｾｯﾄ
SET @MR207               ; ｱﾗｰﾑ解除中
CON
SET @MR203
LD<> DM300 #301          ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
AND<> DM300 #121         ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
AND MR20301              ; 画像RB ｱﾗｰﾑ出力
ANB R50008               ; 全体Error
SET @MR201               ; 画像RB ｱﾗｰﾑON
CON
SET R50008               ; 全体Error
CON
SET R50901               ; UT2部ｴﾗｰ
CON
SET R51001               ; Err01
CON
SET @MR202
MOV #110 DM108           ; ｴﾗｰ詳細
STG @MR202
AND R50008               ; 全体Error
JMP @MR203
STG @MR203
ANB R50008               ; 全体Error
SET MR20302              ; 画像RB ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @MR204
STG @MR204
ANB MR20302              ; 画像RB ｱﾗｰﾑﾘｾｯﾄ要求
AND MR20303              ; 画像RB ｱﾗｰﾑﾘｾｯﾄ完了
RES @MR207               ; ｱﾗｰﾑ解除中
CON
RES @MR201               ; 画像RB ｱﾗｰﾑON
CON
RES MR20303              ; 画像RB ｱﾗｰﾑﾘｾｯﾄ完了
CON
SET R50011               ; TRAP
CON
ENDS
STG MR20302              ; 画像RB ｱﾗｰﾑﾘｾｯﾄ要求
BSET DM10707 #3          ; 画像RB 制御信号
CON
JMP @MR205
STG @MR205
TMR @4 #10               ; ｳｪｲﾄﾀｲﾏ
CON
AND @T4                  ; ｳｪｲﾄﾀｲﾏ
JMP @MR206
STG @MR206
BRES DM10707 #3          ; 画像RB 制御信号
CON
SET MR20303              ; 画像RB ｱﾗｰﾑﾘｾｯﾄ完了
CON
ENDS
;画像RB 原点復帰
LD MR20306               ; 画像RB 原点復帰中
AND R50600               ; ﾌﾘｯｶ1 (0.3_0.3)
OR R12310                ; 画像RB 原点位置有り
OUT R12302               ; 画像RB 原点復帰　表示
LD CR2002                ; 常時ON
AND @MR101               ; 画像RB 運転準備OK
OUT R12300               ; 画像RB 動作可
LD R10302                ; 画像RB 原点復帰要求
AND R12300               ; 画像RB 動作可
ANB MR20306              ; 画像RB 原点復帰中
ANB MR20307              ; 画像RB ﾎﾟｲﾝﾄ移動中
ANB @MR1001              ; 画像RB 原点復帰中
ANB @MR2001              ; 画像RB 移動中
SET @MR1000              ; 画像RB 原点復帰
STG @MR1000              ; 画像RB 原点復帰
RES R10302               ; 画像RB 原点復帰要求
CON
RES R12310               ; 画像RB 原点位置有り
CON
ZRES R12204 R12209       ; RB P1有り  RB P6有り
CON
SET R17912               ; ﾊﾟﾈﾙ　ﾍﾟｰｼﾞ切替不可
CON
RES MR20305              ; 画像RB 原点復帰済
CON
SET MR20306              ; 画像RB 原点復帰中
CON
SET @MR1001              ; 画像RB 原点復帰中
CON
JMP @MR1002
STG @MR1002
BSET DM10707 #1          ; 画像RB 制御信号
CON
JMP @MR1003
STG @MR1003
BANB DM10507 #0          ; 画像RB 状態信号
BRES DM10707 #1          ; 画像RB 制御信号
CON
JMP @MR1004
STG @MR1004
BANB DM10507 #2          ; 画像RB 状態信号
BAND DM10507 #0          ; 画像RB 状態信号
JMP @MR1005
STG @MR1005
RES MR20306              ; 画像RB 原点復帰中
CON
RES @MR1001              ; 画像RB 原点復帰中
CON
RES R17912               ; ﾊﾟﾈﾙ　ﾍﾟｰｼﾞ切替不可
CON
SET R12310               ; 画像RB 原点位置有り
CON
SET MR20305              ; 画像RB 原点復帰済
CON
ENDS
;画像RB ﾎﾟｲﾝﾄ移動
LD= DM300 #301           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
MPS
AND= DM450 #1            ; 画像RB ﾎﾟｲﾝﾄNo.
ZRES R10210 R10215       ; 画像RB P1選択  画像RB P6選択
CON
SET R10210               ; 画像RB P1選択
MRD
AND= DM450 #2            ; 画像RB ﾎﾟｲﾝﾄNo.
ZRES R10210 R10215       ; 画像RB P1選択  画像RB P6選択
CON
SET R10211               ; 画像RB P2選択
MRD
AND= DM450 #3            ; 画像RB ﾎﾟｲﾝﾄNo.
ZRES R10210 R10215       ; 画像RB P1選択  画像RB P6選択
CON
SET R10212               ; 画像RB P3選択
MRD
AND= DM450 #4            ; 画像RB ﾎﾟｲﾝﾄNo.
ZRES R10210 R10215       ; 画像RB P1選択  画像RB P6選択
CON
SET R10213               ; 画像RB P4選択
MRD
AND= DM450 #5            ; 画像RB ﾎﾟｲﾝﾄNo.
ZRES R10210 R10215       ; 画像RB P1選択  画像RB P6選択
CON
SET R10214               ; 画像RB P5選択
MPP
AND= DM450 #6            ; 画像RB ﾎﾟｲﾝﾄNo.
ZRES R10210 R10215       ; 画像RB P1選択  画像RB P6選択
CON
SET R10215               ; 画像RB P6選択
LD= DM300 #301           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
OR= DM300 #121           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
MPS
LDB R12204               ; RB P1有り
AND R10210               ; 画像RB P1選択
LDB MR20307              ; 画像RB ﾎﾟｲﾝﾄ移動中
AND R50600               ; ﾌﾘｯｶ1 (0.3_0.3)
OR MR20307               ; 画像RB ﾎﾟｲﾝﾄ移動中
ANL
ANL
OUT R12210               ; RB P1選択
MRD
LDB R12205               ; RB P2有り
AND R10211               ; 画像RB P2選択
LDB MR20307              ; 画像RB ﾎﾟｲﾝﾄ移動中
AND R50600               ; ﾌﾘｯｶ1 (0.3_0.3)
OR MR20307               ; 画像RB ﾎﾟｲﾝﾄ移動中
ANL
ANL
OUT R12211               ; RB P2選択
MRD
LDB R12206               ; RB P3有り
AND R10212               ; 画像RB P3選択
LDB MR20307              ; 画像RB ﾎﾟｲﾝﾄ移動中
AND R50600               ; ﾌﾘｯｶ1 (0.3_0.3)
OR MR20307               ; 画像RB ﾎﾟｲﾝﾄ移動中
ANL
ANL
OUT R12212               ; RB P3選択
MRD
LDB R12207               ; RB P4有り
AND R10213               ; 画像RB P4選択
LDB MR20307              ; 画像RB ﾎﾟｲﾝﾄ移動中
AND R50600               ; ﾌﾘｯｶ1 (0.3_0.3)
OR MR20307               ; 画像RB ﾎﾟｲﾝﾄ移動中
ANL
ANL
OUT R12213               ; RB P4選択
MRD
LDB R12208               ; RB P5有り
AND R10214               ; 画像RB P5選択
LDB MR20307              ; 画像RB ﾎﾟｲﾝﾄ移動中
AND R50600               ; ﾌﾘｯｶ1 (0.3_0.3)
OR MR20307               ; 画像RB ﾎﾟｲﾝﾄ移動中
ANL
ANL
OUT R12214               ; RB P5選択
MPP
LDB R12209               ; RB P6有り
AND R10215               ; 画像RB P6選択
LDB MR20307              ; 画像RB ﾎﾟｲﾝﾄ移動中
AND R50600               ; ﾌﾘｯｶ1 (0.3_0.3)
OR MR20307               ; 画像RB ﾎﾟｲﾝﾄ移動中
ANL
ANL
OUT R12215               ; RB P6選択
LD R10301                ; 画像RB ﾎﾟｲﾝﾄ移動要求
AND R12300               ; 画像RB 動作可
ANB MR20306              ; 画像RB 原点復帰中
ANB MR20307              ; 画像RB ﾎﾟｲﾝﾄ移動中
ANB @MR1001              ; 画像RB 原点復帰中
ANB @MR2001              ; 画像RB 移動中
AND MR20305              ; 画像RB 原点復帰済
SET @MR2000
STG @MR2000
RES R12310               ; 画像RB 原点位置有り
CON
ZRES R12204 R12209       ; RB P1有り  RB P6有り
CON
SET R17912               ; ﾊﾟﾈﾙ　ﾍﾟｰｼﾞ切替不可
CON
RES R10301               ; 画像RB ﾎﾟｲﾝﾄ移動要求
CON
SET MR20307              ; 画像RB ﾎﾟｲﾝﾄ移動中
CON
SET @MR2001              ; 画像RB 移動中
CON
JMP @MR2002
STG @MR2002
MPS
LD R10210                ; 画像RB P1選択
LD= #301 DM300           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
AND= DM450 #1            ; 画像RB ﾎﾟｲﾝﾄNo.
ORL
ANL
MOV.L EM20200 DM10700    ; 画像RB P1 位置ﾃﾞｰﾀ1  画像RB 目標位置（下位8bit）
MOV EM20202 DM10704      ; 画像RB P1 速度ﾃﾞｰﾀ  画像RB 速度
MOV EM20203 DM10705      ; 画像RB P1 加減速ﾃﾞｰﾀ  画像RB 加減速度
MRD
LD R10211                ; 画像RB P2選択
LD= #301 DM300           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
AND= DM450 #2            ; 画像RB ﾎﾟｲﾝﾄNo.
ORL
ANL
MOV.L EM20204 DM10700    ; 画像RB P2 位置ﾃﾞｰﾀ1  画像RB 目標位置（下位8bit）
MOV EM20206 DM10704      ; 画像RB P2 速度ﾃﾞｰﾀ  画像RB 速度
MOV EM20207 DM10705      ; 画像RB P2 加減速ﾃﾞｰﾀ  画像RB 加減速度
MRD
LD R10212                ; 画像RB P3選択
LD= #301 DM300           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
AND= DM450 #3            ; 画像RB ﾎﾟｲﾝﾄNo.
ORL
ANL
MOV.L EM20208 DM10700    ; 画像RB P3 位置ﾃﾞｰﾀ1  画像RB 目標位置（下位8bit）
MOV EM20210 DM10704      ; 画像RB P3 速度ﾃﾞｰﾀ  画像RB 速度
MOV EM20211 DM10705      ; 画像RB P3 加減速ﾃﾞｰﾀ  画像RB 加減速度
MRD
LD R10213                ; 画像RB P4選択
LD= #301 DM300           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
AND= DM450 #4            ; 画像RB ﾎﾟｲﾝﾄNo.
ORL
ANL
MOV.L EM20212 DM10700    ; 画像RB P4 位置ﾃﾞｰﾀ1  画像RB 目標位置（下位8bit）
MOV EM20214 DM10704      ; 画像RB P4 速度ﾃﾞｰﾀ  画像RB 速度
MOV EM20215 DM10705      ; 画像RB P4 加減速ﾃﾞｰﾀ  画像RB 加減速度
MRD
LD R10214                ; 画像RB P5選択
LD= #301 DM300           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
AND= DM450 #5            ; 画像RB ﾎﾟｲﾝﾄNo.
ORL
ANL
MOV.L EM20216 DM10700    ; 画像RB P5 位置ﾃﾞｰﾀ1  画像RB 目標位置（下位8bit）
MOV EM20218 DM10704      ; 画像RB P5 速度ﾃﾞｰﾀ  画像RB 速度
MOV EM20219 DM10705      ; 画像RB P5 加減速ﾃﾞｰﾀ  画像RB 加減速度
MRD
LD R10215                ; 画像RB P6選択
LD= #301 DM300           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
AND= DM450 #6            ; 画像RB ﾎﾟｲﾝﾄNo.
ORL
ANL
MOV.L EM20220 DM10700    ; 画像RB P6 位置ﾃﾞｰﾀ1  画像RB 目標位置（下位8bit）
MOV EM20222 DM10704      ; 画像RB P6 速度ﾃﾞｰﾀ  画像RB 速度
MOV EM20223 DM10705      ; 画像RB P6 加減速ﾃﾞｰﾀ  画像RB 加減速度
MPP
TMH @0 #10               ; ｳｪｲﾄﾀｲﾏ
CON
AND @T0                  ; ｳｪｲﾄﾀｲﾏ
JMP @MR2003
STG @MR2003
BSET DM10707 #0          ; 画像RB 制御信号
CON
JMP @MR2004
STG @MR2004
MPS
BANB DM10507 #0          ; 画像RB 状態信号
BRES DM10707 #0          ; 画像RB 制御信号
CON
JMP @MR2005
MPP
TMH @1 #50               ; ｳｪｲﾄﾀｲﾏ
CON
AND @T1                  ; ｳｪｲﾄﾀｲﾏ
BRES DM10707 #0          ; 画像RB 制御信号
CON
JMP @MR2005
STG @MR2005
BANB DM10507 #2          ; 画像RB 状態信号
BAND DM10507 #0          ; 画像RB 状態信号
TMH @2 #10               ; ｳｪｲﾄﾀｲﾏ
CON
AND @T2                  ; ｳｪｲﾄﾀｲﾏ
JMP @MR2006
STG @MR2006
MPS
LD R10210                ; 画像RB P1選択
LD= #301 DM300           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
AND= DM450 #1            ; 画像RB ﾎﾟｲﾝﾄNo.
ORL
ANL
RES R12209               ; RB P6有り
CON
RES R12208               ; RB P5有り
CON
RES R12207               ; RB P4有り
CON
RES R12206               ; RB P3有り
CON
RES R12205               ; RB P2有り
CON
SET R12204               ; RB P1有り
MRD
LD R10211                ; 画像RB P2選択
LD= #301 DM300           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
AND= DM450 #2            ; 画像RB ﾎﾟｲﾝﾄNo.
ORL
ANL
RES R12209               ; RB P6有り
CON
RES R12208               ; RB P5有り
CON
RES R12207               ; RB P4有り
CON
RES R12206               ; RB P3有り
CON
RES R12204               ; RB P1有り
CON
SET R12205               ; RB P2有り
MRD
LD R10212                ; 画像RB P3選択
LD= #301 DM300           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
AND= DM450 #3            ; 画像RB ﾎﾟｲﾝﾄNo.
ORL
ANL
RES R12209               ; RB P6有り
CON
RES R12208               ; RB P5有り
CON
RES R12207               ; RB P4有り
CON
RES R12205               ; RB P2有り
CON
RES R12204               ; RB P1有り
CON
SET R12206               ; RB P3有り
MRD
LD R10213                ; 画像RB P4選択
LD= #301 DM300           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
AND= DM450 #4            ; 画像RB ﾎﾟｲﾝﾄNo.
ORL
ANL
RES R12209               ; RB P6有り
CON
RES R12208               ; RB P5有り
CON
RES R12206               ; RB P3有り
CON
RES R12205               ; RB P2有り
CON
RES R12204               ; RB P1有り
CON
SET R12207               ; RB P4有り
MRD
LD R10214                ; 画像RB P5選択
LD= #301 DM300           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
AND= DM450 #5            ; 画像RB ﾎﾟｲﾝﾄNo.
ORL
ANL
RES R12209               ; RB P6有り
CON
RES R12207               ; RB P4有り
CON
RES R12206               ; RB P3有り
CON
RES R12205               ; RB P2有り
CON
RES R12204               ; RB P1有り
CON
SET R12208               ; RB P5有り
MRD
LD R10215                ; 画像RB P6選択
LD= #301 DM300           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
AND= DM450 #6            ; 画像RB ﾎﾟｲﾝﾄNo.
ORL
ANL
RES R12208               ; RB P5有り
CON
RES R12207               ; RB P4有り
CON
RES R12206               ; RB P3有り
CON
RES R12205               ; RB P2有り
CON
RES R12204               ; RB P1有り
CON
SET R12209               ; RB P6有り
MPP
TMH @3 #10
CON
AND @T3
ZRES R10210 R10215       ; 画像RB P1選択  画像RB P6選択
CON
JMP @MR2007
STG @MR2007
RES R17912               ; ﾊﾟﾈﾙ　ﾍﾟｰｼﾞ切替不可
CON
BRES DM10707 #2          ; 画像RB 制御信号
CON
BRES DM10707 #3          ; 画像RB 制御信号
CON
RES MR20307              ; 画像RB ﾎﾟｲﾝﾄ移動中
CON
RES @MR2001              ; 画像RB 移動中
CON
ENDS
;画像RB JOG/INCHING
LD= DM300 #301           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
AND MR20305              ; 画像RB 原点復帰済
AND R12300               ; 画像RB 動作可
ANB MR20306              ; 画像RB 原点復帰中
ANB MR20307              ; 画像RB ﾎﾟｲﾝﾄ移動中
ANB @MR1001              ; 画像RB 原点復帰中
ANB @MR2001              ; 画像RB 移動中
MPS
ANB MR20308              ; 画像RB JOG/INC切替 ONでINC
OUT @MR3000              ; JOG動作
MPP
AND MR20308              ; 画像RB JOG/INC切替 ONでINC
OUT @MR3001              ; ｲﾝﾁﾝｸﾞ動作
LD @MR3000               ; JOG動作
OR @MR3001               ; ｲﾝﾁﾝｸﾞ動作
AND MR20311              ; 画像RB JOG/INC H/L切替 ONでH
BOUT DM10707 #6          ; 画像RB 制御信号
LDP @MR3001              ; ｲﾝﾁﾝｸﾞ動作
BSET DM10707 #5          ; 画像RB 制御信号
LDF @MR3001              ; ｲﾝﾁﾝｸﾞ動作
BRES DM10707 #5          ; 画像RB 制御信号
LD @MR3000               ; JOG動作
OR @MR3001               ; ｲﾝﾁﾝｸﾞ動作
MPS
LD MR20309               ; 画像RB JOG/INC +移動
ANB MR20310              ; 画像RB JOG/INC -移動
ANL
BOUT DM10707 #8          ; 画像RB 制御信号
MPP
LDB MR20309              ; 画像RB JOG/INC +移動
AND MR20310              ; 画像RB JOG/INC -移動
ANL
BOUT DM10707 #7          ; 画像RB 制御信号
;画像RB ﾃﾞｰﾀ書込
LDB MR20313              ; 画像RB 現在位置書込
AND= DM300 #301          ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
MPS
AND= DM450 #1            ; 画像RB ﾎﾟｲﾝﾄNo.
MEP
DW #1000 DM451           ; ﾎﾟｲﾝﾄ名称
CON
MOV.L EM18000 DM452      ; 画像RB P1 位置ﾃﾞｰﾀ1
MOV EM18002 DM454        ; 画像RB P1 速度ﾃﾞｰﾀ
MOV EM18003 DM455        ; 画像RB P1 加減速ﾃﾞｰﾀ
MRD
AND= DM450 #2            ; 画像RB ﾎﾟｲﾝﾄNo.
MEP
DW #1001 DM451           ; ﾎﾟｲﾝﾄ名称
CON
MOV.L EM18004 DM452      ; 画像RB P2 位置ﾃﾞｰﾀ1
MOV EM18006 DM454        ; 画像RB P2 速度ﾃﾞｰﾀ
MOV EM18007 DM455        ; 画像RB P2 加減速ﾃﾞｰﾀ
MRD
AND= DM450 #3            ; 画像RB ﾎﾟｲﾝﾄNo.
MEP
DW #1002 DM451           ; ﾎﾟｲﾝﾄ名称
CON
MOV.L EM18008 DM452      ; 画像RB P3 位置ﾃﾞｰﾀ1
MOV EM18010 DM454        ; 画像RB P3 速度ﾃﾞｰﾀ
MOV EM18011 DM455        ; 画像RB P3 加減速ﾃﾞｰﾀ
MRD
AND= DM450 #4            ; 画像RB ﾎﾟｲﾝﾄNo.
MEP
DW #1003 DM451           ; ﾎﾟｲﾝﾄ名称
CON
MOV.L EM18012 DM452      ; 画像RB P4 位置ﾃﾞｰﾀ1
MOV EM18014 DM454        ; 画像RB P4 速度ﾃﾞｰﾀ
MOV EM18015 DM455        ; 画像RB P4 加減速ﾃﾞｰﾀ
MRD
AND= DM450 #5            ; 画像RB ﾎﾟｲﾝﾄNo.
MEP
DW #1004 DM451           ; ﾎﾟｲﾝﾄ名称
CON
MOV.L EM18016 DM452      ; 画像RB P5 位置ﾃﾞｰﾀ1
MOV EM18018 DM454        ; 画像RB P5 速度ﾃﾞｰﾀ
MOV EM18019 DM455        ; 画像RB P5 加減速ﾃﾞｰﾀ
MPP
AND= DM450 #6            ; 画像RB ﾎﾟｲﾝﾄNo.
MEP
DW #1005 DM451           ; ﾎﾟｲﾝﾄ名称
CON
MOV.L EM18020 DM452      ; 画像RB P6 位置ﾃﾞｰﾀ1
MOV EM18022 DM454        ; 画像RB P6 速度ﾃﾞｰﾀ
MOV EM18023 DM455        ; 画像RB P6 加減速ﾃﾞｰﾀ
LD= DM300 #301           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
AND MR20313              ; 画像RB 現在位置書込
MPS
AND= DM450 #1            ; 画像RB ﾎﾟｲﾝﾄNo.
MOV.L DM10500 EM18000    ; 画像RB 現在位置（下位8bit）  画像RB P1 位置ﾃﾞｰﾀ1
MRD
AND= DM450 #2            ; 画像RB ﾎﾟｲﾝﾄNo.
MOV.L DM10500 EM18004    ; 画像RB 現在位置（下位8bit）  画像RB P2 位置ﾃﾞｰﾀ1
MRD
AND= DM450 #3            ; 画像RB ﾎﾟｲﾝﾄNo.
MOV.L DM10500 EM18008    ; 画像RB 現在位置（下位8bit）  画像RB P3 位置ﾃﾞｰﾀ1
MRD
AND= DM450 #4            ; 画像RB ﾎﾟｲﾝﾄNo.
MOV.L DM10500 EM18012    ; 画像RB 現在位置（下位8bit）  画像RB P4 位置ﾃﾞｰﾀ1
MRD
AND= DM450 #5            ; 画像RB ﾎﾟｲﾝﾄNo.
MOV.L DM10500 EM18016    ; 画像RB 現在位置（下位8bit）  画像RB P5 位置ﾃﾞｰﾀ1
MPP
AND= DM450 #6            ; 画像RB ﾎﾟｲﾝﾄNo.
MOV.L DM10500 EM18020    ; 画像RB 現在位置（下位8bit）  画像RB P6 位置ﾃﾞｰﾀ1
LD= DM300 #301           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
AND MR20315              ; 画像RB 書込確定
MPS
AND= DM450 #1            ; 画像RB ﾎﾟｲﾝﾄNo.
MOV.L DM452 EM18000      ; 画像RB P1 位置ﾃﾞｰﾀ1
MOV DM454 EM18002        ; 画像RB P1 速度ﾃﾞｰﾀ
MOV DM455 EM18003        ; 画像RB P1 加減速ﾃﾞｰﾀ
MRD
AND= DM450 #2            ; 画像RB ﾎﾟｲﾝﾄNo.
MOV.L DM452 EM18004      ; 画像RB P2 位置ﾃﾞｰﾀ1
MOV DM454 EM18006        ; 画像RB P2 速度ﾃﾞｰﾀ
MOV DM455 EM18007        ; 画像RB P2 加減速ﾃﾞｰﾀ
MRD
AND= DM450 #3            ; 画像RB ﾎﾟｲﾝﾄNo.
MOV.L DM452 EM18008      ; 画像RB P3 位置ﾃﾞｰﾀ1
MOV DM454 EM18010        ; 画像RB P3 速度ﾃﾞｰﾀ
MOV DM455 EM18011        ; 画像RB P3 加減速ﾃﾞｰﾀ
MRD
AND= DM450 #4            ; 画像RB ﾎﾟｲﾝﾄNo.
MOV.L DM452 EM18012      ; 画像RB P4 位置ﾃﾞｰﾀ1
MOV DM454 EM18014        ; 画像RB P4 速度ﾃﾞｰﾀ
MOV DM455 EM18015        ; 画像RB P4 加減速ﾃﾞｰﾀ
MRD
AND= DM450 #5            ; 画像RB ﾎﾟｲﾝﾄNo.
MOV.L DM452 EM18016      ; 画像RB P5 位置ﾃﾞｰﾀ1
MOV DM454 EM18018        ; 画像RB P5 速度ﾃﾞｰﾀ
MOV DM455 EM18019        ; 画像RB P5 加減速ﾃﾞｰﾀ
MPP
AND= DM450 #6            ; 画像RB ﾎﾟｲﾝﾄNo.
MOV.L DM452 EM18020      ; 画像RB P6 位置ﾃﾞｰﾀ1
MOV DM454 EM18022        ; 画像RB P6 速度ﾃﾞｰﾀ
MOV DM455 EM18023        ; 画像RB P6 加減速ﾃﾞｰﾀ
;<h1/>注入上下RB　PCON-CA
BLD DM10515 #3           ; 注入上下RB 状態信号
OUT @MR102               ; 注入上下RB ｱﾗｰﾑ出力中
BLD DM10515 #4           ; 注入上下RB 状態信号
BAND DM10515 #14         ; 注入上下RB 状態信号
BANB DM10515 #15         ; 注入上下RB 状態信号
BANB DM10515 #8          ; 注入上下RB 状態信号
BANB DM10515 #7          ; 注入上下RB 状態信号
ANB R50008               ; 全体Error
ANB R50300               ; Pause
OUT @MR103               ; 注入上下RB 運転準備OK
BLD DM10515 #0           ; 注入上下RB 状態信号
OUT MR20400              ; 注入上下RB 位置決め完了
LDB @MR1101              ; 注入上下RB 原点復帰中
ANB @MR2101              ; 注入上下RB ﾎﾟｲﾝﾄ移動中
INV
OUT MR20404              ; 注入上下RB ﾓｰﾄﾞ切替不可
LDP MR20201              ; 注入上下RB ｻｰﾎﾞON
BSET DM10715 #4          ; ﾍｯﾄﾞ上下RB 制御信号
LDF MR20201              ; 注入上下RB ｻｰﾎﾞON
BRES DM10715 #4          ; ﾍｯﾄﾞ上下RB 制御信号
LDP MR20206              ; 注入上下RB ﾌﾞﾚｰｷON
AND CR2003               ; 常時OFF
BSET DM10715 #15         ; ﾍｯﾄﾞ上下RB 制御信号
LDF MR20206              ; 注入上下RB ﾌﾞﾚｰｷON
AND CR2003               ; 常時OFF
BRES DM10715 #15         ; ﾍｯﾄﾞ上下RB 制御信号
;注入上下RB ｱﾗｰﾑ処理
LD MR003                 ; ｴﾗｰ監視開始
AND R50004               ; TASKDO
AND @MR102               ; 注入上下RB ｱﾗｰﾑ出力中
ANB @MR209               ; 注入上下RB ｱﾗｰﾑON
ZRES @MR1100 @MR1115     ; 注入上下RB 原点復帰
CON
ZRES @MR2100 @MR2115     ; 注入上下RB ﾎﾟｲﾝﾄ移動
CON
RES MR20406              ; 注入上下RB 原点復帰中
CON
RES R17912               ; ﾊﾟﾈﾙ　ﾍﾟｰｼﾞ切替不可
CON
BRES DM10715 #1          ; ﾍｯﾄﾞ上下RB 制御信号
CON
RES R10611               ; 注入上下RB ﾎﾟｲﾝﾄ移動要求
CON
RES MR20407              ; 注入上下RB ﾎﾟｲﾝﾄ移動中
CON
BRES DM10715 #0          ; ﾍｯﾄﾞ上下RB 制御信号
CON
BRES DM10715 #2          ; ﾍｯﾄﾞ上下RB 制御信号
CON
OUT MR20401              ; 注入上下RB ｱﾗｰﾑ出力
LD= DM300 #302           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
OR= DM300 #132           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
OR= DM300 #133           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
AND MR20401              ; 注入上下RB ｱﾗｰﾑ出力
ANB @MR215               ; ｱﾗｰﾑ解除中
ANP MR20412              ; 注入上下RB ｱﾗｰﾑﾘｾｯﾄ
SET @MR215               ; ｱﾗｰﾑ解除中
CON
SET @MR211
LD<> DM300 #302          ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
AND<> DM300 #132         ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
AND<> DM300 #133         ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
AND MR20401              ; 注入上下RB ｱﾗｰﾑ出力
ANB R50008               ; 全体Error
SET @MR209               ; 注入上下RB ｱﾗｰﾑON
CON
SET R50008               ; 全体Error
CON
SET R50902               ; UT3部ｴﾗｰ
CON
SET R51002               ; Err02
CON
SET @MR210
MOV #111 DM108           ; ｴﾗｰ詳細
STG @MR210
AND R50008               ; 全体Error
JMP @MR211
STG @MR211
ANB R50008               ; 全体Error
SET MR20402              ; 注入上下RB ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @MR212
STG @MR212
ANB MR20402              ; 注入上下RB ｱﾗｰﾑﾘｾｯﾄ要求
AND MR20403              ; 注入上下RB ｱﾗｰﾑﾘｾｯﾄ完了
RES @MR215               ; ｱﾗｰﾑ解除中
CON
RES @MR209               ; 注入上下RB ｱﾗｰﾑON
CON
RES MR20403              ; 注入上下RB ｱﾗｰﾑﾘｾｯﾄ完了
CON
SET R50011               ; TRAP
CON
ENDS
STG MR20402              ; 注入上下RB ｱﾗｰﾑﾘｾｯﾄ要求
BSET DM10715 #3          ; ﾍｯﾄﾞ上下RB 制御信号
CON
JMP @MR213
STG @MR213
TMR @9 #10               ; ｳｪｲﾄﾀｲﾏ
CON
AND @T9                  ; ｳｪｲﾄﾀｲﾏ
JMP @MR214
STG @MR214
BRES DM10715 #3          ; ﾍｯﾄﾞ上下RB 制御信号
CON
SET MR20403              ; 注入上下RB ｱﾗｰﾑﾘｾｯﾄ完了
CON
ENDS
;注入上下RB 原点復帰
LD MR20406               ; 注入上下RB 原点復帰中
AND R50600               ; ﾌﾘｯｶ1 (0.3_0.3)
OR R12615                ; 注入上下RB 原点位置有り
OUT R12612               ; 注入上下RB 原点復帰　表示
LD CR2002                ; 常時ON
AND @MR103               ; 注入上下RB 運転準備OK
OUT R12610               ; 注入上下RB 動作可
LD R10612                ; 注入上下RB 原点復帰要求
AND R12610               ; 注入上下RB 動作可
ANB MR20406              ; 注入上下RB 原点復帰中
ANB MR20407              ; 注入上下RB ﾎﾟｲﾝﾄ移動中
ANB @MR1101              ; 注入上下RB 原点復帰中
ANB @MR2101              ; 注入上下RB ﾎﾟｲﾝﾄ移動中
SET @MR1100              ; 注入上下RB 原点復帰
STG @MR1100              ; 注入上下RB 原点復帰
RES R10612               ; 注入上下RB 原点復帰要求
CON
RES R12615               ; 注入上下RB 原点位置有り
CON
ZRES R12600 R12603       ; RB P1有り  RB P4有り
CON
SET R17905               ; ﾊﾟﾈﾙ　ﾍﾟｰｼﾞ切替不可
CON
RES MR20405              ; 注入上下RB 原点復帰済
CON
SET MR20406              ; 注入上下RB 原点復帰中
CON
SET @MR1101              ; 注入上下RB 原点復帰中
CON
JMP @MR1102
STG @MR1102
BSET DM10715 #1          ; ﾍｯﾄﾞ上下RB 制御信号
CON
JMP @MR1103
STG @MR1103
BANB DM10515 #0          ; 注入上下RB 状態信号
BRES DM10715 #1          ; ﾍｯﾄﾞ上下RB 制御信号
CON
JMP @MR1104
STG @MR1104
BANB DM10515 #2          ; 注入上下RB 状態信号
BAND DM10515 #0          ; 注入上下RB 状態信号
JMP @MR1105
STG @MR1105
RES MR20406              ; 注入上下RB 原点復帰中
CON
RES @MR1101              ; 注入上下RB 原点復帰中
CON
RES R17905               ; ﾊﾟﾈﾙ　ﾍﾟｰｼﾞ切替不可
CON
SET R12615               ; 注入上下RB 原点位置有り
CON
SET MR20405              ; 注入上下RB 原点復帰済
CON
ENDS
;注入上下RB ﾎﾟｲﾝﾄ移動
LD= DM300 #302           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
OR= DM300 #132           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
OR= DM300 #133           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
OR= DM350 #51
MPS
LDB R12600               ; RB P1有り
AND R10605               ; 注入上下RB P1選択
LDB MR20407              ; 注入上下RB ﾎﾟｲﾝﾄ移動中
AND R50600               ; ﾌﾘｯｶ1 (0.3_0.3)
OR MR20407               ; 注入上下RB ﾎﾟｲﾝﾄ移動中
ANL
ANL
OUT R12605               ; RB P1選択
MRD
LDB R12601               ; RB P2有り
AND R10606               ; 注入上下RB P2選択
LDB MR20407              ; 注入上下RB ﾎﾟｲﾝﾄ移動中
AND R50600               ; ﾌﾘｯｶ1 (0.3_0.3)
OR MR20407               ; 注入上下RB ﾎﾟｲﾝﾄ移動中
ANL
ANL
OUT R12606               ; RB P2選択
MRD
LDB R12602               ; RB P3有り
AND R10607               ; 注入上下RB P3選択
LDB MR20407              ; 注入上下RB ﾎﾟｲﾝﾄ移動中
AND R50600               ; ﾌﾘｯｶ1 (0.3_0.3)
OR MR20407               ; 注入上下RB ﾎﾟｲﾝﾄ移動中
ANL
ANL
OUT R12607               ; RB P3選択
MPP
LDB R12603               ; RB P4有り
AND R10608               ; 注入上下RB P4選択
LDB MR20307              ; 画像RB ﾎﾟｲﾝﾄ移動中
AND R50600               ; ﾌﾘｯｶ1 (0.3_0.3)
OR MR20307               ; 画像RB ﾎﾟｲﾝﾄ移動中
ANL
ANL
OUT R12608               ; RB P4選択
LD R10611                ; 注入上下RB ﾎﾟｲﾝﾄ移動要求
AND R12610               ; 注入上下RB 動作可
ANB MR20406              ; 注入上下RB 原点復帰中
ANB MR20407              ; 注入上下RB ﾎﾟｲﾝﾄ移動中
ANB @MR1101              ; 注入上下RB 原点復帰中
ANB @MR2101              ; 注入上下RB ﾎﾟｲﾝﾄ移動中
AND MR20405              ; 注入上下RB 原点復帰済
SET @MR2100              ; 注入上下RB ﾎﾟｲﾝﾄ移動
STG @MR2100              ; 注入上下RB ﾎﾟｲﾝﾄ移動
RES R12615               ; 注入上下RB 原点位置有り
CON
ZRES R12600 R12603       ; RB P1有り  RB P4有り
CON
SET R17905               ; ﾊﾟﾈﾙ　ﾍﾟｰｼﾞ切替不可
CON
RES R10611               ; 注入上下RB ﾎﾟｲﾝﾄ移動要求
CON
SET MR20407              ; 注入上下RB ﾎﾟｲﾝﾄ移動中
CON
SET @MR2101              ; 注入上下RB ﾎﾟｲﾝﾄ移動中
CON
JMP @MR2102
STG @MR2102
MPS
LD R10605                ; 注入上下RB P1選択
LD= #302 DM300           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
AND= DM460 #1            ; 注入上下RB ﾎﾟｲﾝﾄNo.
ORL
ANL
MOV.L EM20300 DM10708    ; 注入上下RB P1 位置ﾃﾞｰﾀ1  ﾍｯﾄﾞ上下RB 目標位置（下位8bit）
MOV EM20302 DM10712      ; 注入上下RB P1 速度ﾃﾞｰﾀ  ﾍｯﾄﾞ上下RB 速度
MOV EM20303 DM10713      ; 注入上下RB P1 加減速ﾃﾞｰﾀ  ﾍｯﾄﾞ上下RB 加減速度
MRD
LD R10606                ; 注入上下RB P2選択
LD= #302 DM300           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
AND= DM460 #2            ; 注入上下RB ﾎﾟｲﾝﾄNo.
ORL
ANL
MPS
AND= DM1010 #1           ; 確定　Satellite No.
LDA.L EM20304            ; 注入上下RB P2 位置ﾃﾞｰﾀ1
CON
ADD.L EM20400            ; Satellite-1 ｵﾌｾｯﾄ量
CON
STA.L EM20500            ; 注入上下RB　P2ｵﾌｾｯﾄ加算量
MRD
AND= DM1010 #2           ; 確定　Satellite No.
LDA.L EM20304            ; 注入上下RB P2 位置ﾃﾞｰﾀ1
CON
ADD.L EM20402            ; Satellite-2 ｵﾌｾｯﾄ量
CON
STA.L EM20500            ; 注入上下RB　P2ｵﾌｾｯﾄ加算量
MRD
AND= DM1010 #3           ; 確定　Satellite No.
LDA.L EM20304            ; 注入上下RB P2 位置ﾃﾞｰﾀ1
CON
ADD.L EM20404            ; Satellite-3 ｵﾌｾｯﾄ量
CON
STA.L EM20500            ; 注入上下RB　P2ｵﾌｾｯﾄ加算量
MRD
AND= DM1010 #4           ; 確定　Satellite No.
LDA.L EM20304            ; 注入上下RB P2 位置ﾃﾞｰﾀ1
CON
ADD.L EM20406            ; Satellite-4 ｵﾌｾｯﾄ量
CON
STA.L EM20500            ; 注入上下RB　P2ｵﾌｾｯﾄ加算量
MRD
AND= DM1010 #5           ; 確定　Satellite No.
LDA.L EM20304            ; 注入上下RB P2 位置ﾃﾞｰﾀ1
CON
ADD.L EM20408            ; Satellite-5 ｵﾌｾｯﾄ量
CON
STA.L EM20500            ; 注入上下RB　P2ｵﾌｾｯﾄ加算量
MRD
AND= DM1010 #6           ; 確定　Satellite No.
LDA.L EM20304            ; 注入上下RB P2 位置ﾃﾞｰﾀ1
CON
ADD.L EM20410            ; Satellite-6 ｵﾌｾｯﾄ量
CON
STA.L EM20500            ; 注入上下RB　P2ｵﾌｾｯﾄ加算量
MRD
AND= DM1010 #7           ; 確定　Satellite No.
LDA.L EM20304            ; 注入上下RB P2 位置ﾃﾞｰﾀ1
CON
ADD.L EM20412            ; Satellite-7 ｵﾌｾｯﾄ量
CON
STA.L EM20500            ; 注入上下RB　P2ｵﾌｾｯﾄ加算量
MRD
AND= DM1010 #8           ; 確定　Satellite No.
LDA.L EM20304            ; 注入上下RB P2 位置ﾃﾞｰﾀ1
CON
ADD.L EM20414            ; Satellite-8 ｵﾌｾｯﾄ量
CON
STA.L EM20500            ; 注入上下RB　P2ｵﾌｾｯﾄ加算量
MRD
AND= DM1010 #9           ; 確定　Satellite No.
LDA.L EM20304            ; 注入上下RB P2 位置ﾃﾞｰﾀ1
CON
ADD.L EM20416            ; Satellite-9 ｵﾌｾｯﾄ量
CON
STA.L EM20500            ; 注入上下RB　P2ｵﾌｾｯﾄ加算量
MRD
AND= DM1010 #10          ; 確定　Satellite No.
LDA.L EM20304            ; 注入上下RB P2 位置ﾃﾞｰﾀ1
CON
ADD.L EM20418            ; Satellite-10 ｵﾌｾｯﾄ量
CON
STA.L EM20500            ; 注入上下RB　P2ｵﾌｾｯﾄ加算量
MRD
AND= DM1010 #11          ; 確定　Satellite No.
LDA.L EM20304            ; 注入上下RB P2 位置ﾃﾞｰﾀ1
CON
ADD.L EM20420            ; Satellite-11 ｵﾌｾｯﾄ量
CON
STA.L EM20500            ; 注入上下RB　P2ｵﾌｾｯﾄ加算量
MRD
AND= DM1010 #12          ; 確定　Satellite No.
LDA.L EM20304            ; 注入上下RB P2 位置ﾃﾞｰﾀ1
CON
ADD.L EM20422            ; Satellite-12 ｵﾌｾｯﾄ量
CON
STA.L EM20500            ; 注入上下RB　P2ｵﾌｾｯﾄ加算量
MRD
AND= DM1010 #13          ; 確定　Satellite No.
LDA.L EM20304            ; 注入上下RB P2 位置ﾃﾞｰﾀ1
CON
ADD.L EM20424            ; Satellite-13 ｵﾌｾｯﾄ量
CON
STA.L EM20500            ; 注入上下RB　P2ｵﾌｾｯﾄ加算量
MRD
AND= DM1010 #14          ; 確定　Satellite No.
LDA.L EM20304            ; 注入上下RB P2 位置ﾃﾞｰﾀ1
CON
ADD.L EM20426            ; Satellite-14 ｵﾌｾｯﾄ量
CON
STA.L EM20500            ; 注入上下RB　P2ｵﾌｾｯﾄ加算量
MRD
AND= DM1010 #15          ; 確定　Satellite No.
LDA.L EM20304            ; 注入上下RB P2 位置ﾃﾞｰﾀ1
CON
ADD.L EM20428            ; Satellite-15 ｵﾌｾｯﾄ量
CON
STA.L EM20500            ; 注入上下RB　P2ｵﾌｾｯﾄ加算量
MRD
AND= DM1010 #16          ; 確定　Satellite No.
LDA.L EM20304            ; 注入上下RB P2 位置ﾃﾞｰﾀ1
CON
ADD.L EM20430            ; Satellite-16 ｵﾌｾｯﾄ量
CON
STA.L EM20500            ; 注入上下RB　P2ｵﾌｾｯﾄ加算量
MRD
AND= DM1010 #17          ; 確定　Satellite No.
LDA.L EM20304            ; 注入上下RB P2 位置ﾃﾞｰﾀ1
CON
ADD.L EM20432            ; Satellite-17 ｵﾌｾｯﾄ量
CON
STA.L EM20500            ; 注入上下RB　P2ｵﾌｾｯﾄ加算量
MRD
AND= DM1010 #18          ; 確定　Satellite No.
LDA.L EM20304            ; 注入上下RB P2 位置ﾃﾞｰﾀ1
CON
ADD.L EM20434            ; Satellite-18 ｵﾌｾｯﾄ量
CON
STA.L EM20500            ; 注入上下RB　P2ｵﾌｾｯﾄ加算量
MRD
AND= DM1010 #19          ; 確定　Satellite No.
LDA.L EM20304            ; 注入上下RB P2 位置ﾃﾞｰﾀ1
CON
ADD.L EM20436            ; Satellite-19 ｵﾌｾｯﾄ量
CON
STA.L EM20500            ; 注入上下RB　P2ｵﾌｾｯﾄ加算量
MRD
AND= DM1010 #20          ; 確定　Satellite No.
LDA.L EM20304            ; 注入上下RB P2 位置ﾃﾞｰﾀ1
CON
ADD.L EM20438            ; Satellite-20 ｵﾌｾｯﾄ量
CON
STA.L EM20500            ; 注入上下RB　P2ｵﾌｾｯﾄ加算量
MRD
MOV.L EM20500 DM10708    ; 注入上下RB　P2ｵﾌｾｯﾄ加算量  ﾍｯﾄﾞ上下RB 目標位置（下位8bit）
MRD
MOV EM20306 DM10712      ; 注入上下RB P2 速度ﾃﾞｰﾀ  ﾍｯﾄﾞ上下RB 速度
MPP
MOV EM20307 DM10713      ; 注入上下RB P2 加減速ﾃﾞｰﾀ  ﾍｯﾄﾞ上下RB 加減速度
MRD
LD R10607                ; 注入上下RB P3選択
LD= #302 DM300           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
AND= DM460 #3            ; 注入上下RB ﾎﾟｲﾝﾄNo.
ORL
ANL
MOV.L EM20308 DM10708    ; 注入上下RB P3 位置ﾃﾞｰﾀ1  ﾍｯﾄﾞ上下RB 目標位置（下位8bit）
MOV EM20310 DM10712      ; 注入上下RB P3 速度ﾃﾞｰﾀ  ﾍｯﾄﾞ上下RB 速度
MOV EM20311 DM10713      ; 注入上下RB P3 加減速ﾃﾞｰﾀ  ﾍｯﾄﾞ上下RB 加減速度
MRD
LD R10608                ; 注入上下RB P4選択
LD= #302 DM300           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
AND= DM460 #4            ; 注入上下RB ﾎﾟｲﾝﾄNo.
ORL
ANL
MOV.L EM20312 DM10708    ; 注入上下RB P4 位置ﾃﾞｰﾀ1  ﾍｯﾄﾞ上下RB 目標位置（下位8bit）
MOV EM20314 DM10712      ; 注入上下RB P4 速度ﾃﾞｰﾀ  ﾍｯﾄﾞ上下RB 速度
MOV EM20315 DM10713      ; 注入上下RB P4 加減速ﾃﾞｰﾀ  ﾍｯﾄﾞ上下RB 加減速度
MPP
TMH @5 #10
CON
AND @T5
JMP @MR2103
STG @MR2103
BSET DM10715 #0          ; ﾍｯﾄﾞ上下RB 制御信号
CON
JMP @MR2104
STG @MR2104
MPS
BANB DM10515 #0          ; 注入上下RB 状態信号
BRES DM10715 #0          ; ﾍｯﾄﾞ上下RB 制御信号
CON
JMP @MR2105
MPP
TMH @6 #50
CON
AND @T6
BRES DM10715 #0          ; ﾍｯﾄﾞ上下RB 制御信号
CON
JMP @MR2105
STG @MR2105
BANB DM10515 #2          ; 注入上下RB 状態信号
BAND DM10515 #0          ; 注入上下RB 状態信号
TMH @7 #10
CON
AND @T7
JMP @MR2106
STG @MR2106
MPS
LD R10605                ; 注入上下RB P1選択
LD= #302 DM300           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
OR= DM350 #1
OR= DM350 #2
AND= DM460 #1            ; 注入上下RB ﾎﾟｲﾝﾄNo.
ORL
ANL
RES R12603               ; RB P4有り
CON
RES R12602               ; RB P3有り
CON
RES R12601               ; RB P2有り
CON
SET R12600               ; RB P1有り
MRD
LD R10606                ; 注入上下RB P2選択
LD= #302 DM300           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
OR= DM350 #1
OR= DM350 #2
AND= DM460 #2            ; 注入上下RB ﾎﾟｲﾝﾄNo.
ORL
ANL
RES R12603               ; RB P4有り
CON
RES R12602               ; RB P3有り
CON
RES R12600               ; RB P1有り
CON
SET R12601               ; RB P2有り
MRD
LD R10607                ; 注入上下RB P3選択
LD= #302 DM300           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
OR= DM350 #1
OR= DM350 #2
AND= DM460 #3            ; 注入上下RB ﾎﾟｲﾝﾄNo.
ORL
ANL
RES R12603               ; RB P4有り
CON
RES R12601               ; RB P2有り
CON
RES R12600               ; RB P1有り
CON
SET R12602               ; RB P3有り
MRD
LD R10608                ; 注入上下RB P4選択
LD= #302 DM300           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
OR= DM350 #1
OR= DM350 #2
AND= DM460 #4            ; 注入上下RB ﾎﾟｲﾝﾄNo.
ORL
ANL
RES R12602               ; RB P3有り
CON
RES R12601               ; RB P2有り
CON
RES R12600               ; RB P1有り
CON
SET R12603               ; RB P4有り
MPP
TMH @8 #10
CON
AND @T8
ZRES R10605 R10608       ; 注入上下RB P1選択  注入上下RB P4選択
CON
JMP @MR2107
STG @MR2107
RES R17905               ; ﾊﾟﾈﾙ　ﾍﾟｰｼﾞ切替不可
CON
BRES DM10715 #2          ; ﾍｯﾄﾞ上下RB 制御信号
CON
BRES DM10715 #3          ; ﾍｯﾄﾞ上下RB 制御信号
CON
RES MR20407              ; 注入上下RB ﾎﾟｲﾝﾄ移動中
CON
RES @MR2101              ; 注入上下RB ﾎﾟｲﾝﾄ移動中
CON
ENDS
;注入上下RB JOG/INCHING
LD= DM300 #302           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
OR= DM350 #1
OR= DM350 #2
AND MR20405              ; 注入上下RB 原点復帰済
AND R12610               ; 注入上下RB 動作可
ANB MR20406              ; 注入上下RB 原点復帰中
ANB MR20407              ; 注入上下RB ﾎﾟｲﾝﾄ移動中
ANB @MR1101              ; 注入上下RB 原点復帰中
ANB @MR2101              ; 注入上下RB ﾎﾟｲﾝﾄ移動中
MPS
ANB MR20408              ; 注入上下RB JOG/INC切替 ONでINC
OUT @MR3100              ; JOG動作
MPP
AND MR20408              ; 注入上下RB JOG/INC切替 ONでINC
OUT @MR3101              ; ｲﾝﾁﾝｸﾞ動作
LD @MR3100               ; JOG動作
OR @MR3101               ; ｲﾝﾁﾝｸﾞ動作
AND MR20411              ; 注入上下RB JOG/INC H/L切替 ONでH
BOUT DM10715 #6          ; ﾍｯﾄﾞ上下RB 制御信号
LDP @MR3101              ; ｲﾝﾁﾝｸﾞ動作
BSET DM10715 #5          ; ﾍｯﾄﾞ上下RB 制御信号
LDF @MR3101              ; ｲﾝﾁﾝｸﾞ動作
BRES DM10715 #5          ; ﾍｯﾄﾞ上下RB 制御信号
LD @MR3100               ; JOG動作
OR @MR3101               ; ｲﾝﾁﾝｸﾞ動作
MPS
LD MR20409               ; 注入上下RB JOG/INC +移動
ANB MR20410              ; 注入上下RB JOG/INC -移動
ANL
BOUT DM10715 #8          ; ﾍｯﾄﾞ上下RB 制御信号
MPP
LDB MR20409              ; 注入上下RB JOG/INC +移動
AND MR20410              ; 注入上下RB JOG/INC -移動
ANL
BOUT DM10715 #7          ; ﾍｯﾄﾞ上下RB 制御信号
;注入上下RB ﾃﾞｰﾀ書込
LDB MR20413              ; 注入上下RB 現在位置書込
LD= DM300 #302           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
OR= DM350 #1
OR= DM350 #2
ANL
MPS
AND= DM460 #1            ; 注入上下RB ﾎﾟｲﾝﾄNo.
MEP
DW #1010 DM461           ; ﾎﾟｲﾝﾄ名称
CON
MOV.L EM19000 DM462      ; 注入上下RB P1 位置ﾃﾞｰﾀ1
MOV EM19002 DM464        ; 注入上下RB P1 速度ﾃﾞｰﾀ
MOV EM19003 DM465        ; 注入上下RB P1 加減速ﾃﾞｰﾀ
MRD
AND= DM460 #2            ; 注入上下RB ﾎﾟｲﾝﾄNo.
MEP
DW #1011 DM461           ; ﾎﾟｲﾝﾄ名称
CON
MOV.L EM19004 DM462      ; 注入上下RB P2 位置ﾃﾞｰﾀ1
MOV EM19006 DM464        ; 注入上下RB P2 速度ﾃﾞｰﾀ
MOV EM19007 DM465        ; 注入上下RB P2 加減速ﾃﾞｰﾀ
MRD
AND= DM460 #3            ; 注入上下RB ﾎﾟｲﾝﾄNo.
MEP
DW #1012 DM461           ; ﾎﾟｲﾝﾄ名称
CON
MOV.L EM19008 DM462      ; 注入上下RB P3 位置ﾃﾞｰﾀ1
MOV EM19010 DM464        ; 注入上下RB P3 速度ﾃﾞｰﾀ
MOV EM19011 DM465        ; 注入上下RB P3 加減速ﾃﾞｰﾀ
MPP
AND= DM460 #4            ; 注入上下RB ﾎﾟｲﾝﾄNo.
MEP
DW #1013 DM461           ; ﾎﾟｲﾝﾄ名称
CON
MOV.L EM19012 DM462      ; 注入上下RB P4 位置ﾃﾞｰﾀ1
MOV EM19014 DM464        ; 注入上下RB P4 速度ﾃﾞｰﾀ
MOV EM19015 DM465        ; 注入上下RB P4 加減速ﾃﾞｰﾀ
LD= DM300 #302           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
OR= DM350 #1
OR= DM350 #2
AND MR20413              ; 注入上下RB 現在位置書込
MPS
AND= DM460 #1            ; 注入上下RB ﾎﾟｲﾝﾄNo.
MOV.L DM10508 EM19000    ; 注入上下RB 現在位置（下位8bit）  注入上下RB P1 位置ﾃﾞｰﾀ1
MRD
AND= DM460 #2            ; 注入上下RB ﾎﾟｲﾝﾄNo.
MOV.L DM10508 EM19004    ; 注入上下RB 現在位置（下位8bit）  注入上下RB P2 位置ﾃﾞｰﾀ1
MRD
AND= DM460 #3            ; 注入上下RB ﾎﾟｲﾝﾄNo.
MOV.L DM10508 EM19008    ; 注入上下RB 現在位置（下位8bit）  注入上下RB P3 位置ﾃﾞｰﾀ1
MPP
AND= DM460 #4            ; 注入上下RB ﾎﾟｲﾝﾄNo.
MOV.L DM10508 EM19012    ; 注入上下RB 現在位置（下位8bit）  注入上下RB P4 位置ﾃﾞｰﾀ1
LD= DM300 #302           ; ﾒｲﾝﾊﾟﾈﾙ表示中画面
OR= DM350 #1
OR= DM350 #2
AND MR20415              ; 注入上下RB 書込確定
MPS
AND= DM460 #1            ; 注入上下RB ﾎﾟｲﾝﾄNo.
MOV.L DM462 EM19000      ; 注入上下RB P1 位置ﾃﾞｰﾀ1
MOV DM464 EM19002        ; 注入上下RB P1 速度ﾃﾞｰﾀ
MOV DM465 EM19003        ; 注入上下RB P1 加減速ﾃﾞｰﾀ
MRD
AND= DM460 #2            ; 注入上下RB ﾎﾟｲﾝﾄNo.
MOV.L DM462 EM19004      ; 注入上下RB P2 位置ﾃﾞｰﾀ1
MOV DM464 EM19006        ; 注入上下RB P2 速度ﾃﾞｰﾀ
MOV DM465 EM19007        ; 注入上下RB P2 加減速ﾃﾞｰﾀ
MRD
AND= DM460 #3            ; 注入上下RB ﾎﾟｲﾝﾄNo.
MOV.L DM462 EM19008      ; 注入上下RB P3 位置ﾃﾞｰﾀ1
MOV DM464 EM19010        ; 注入上下RB P3 速度ﾃﾞｰﾀ
MOV DM465 EM19011        ; 注入上下RB P3 加減速ﾃﾞｰﾀ
MPP
AND= DM460 #4            ; 注入上下RB ﾎﾟｲﾝﾄNo.
MOV.L DM462 EM19012      ; 注入上下RB P4 位置ﾃﾞｰﾀ1
MOV DM464 EM19014        ; 注入上下RB P4 速度ﾃﾞｰﾀ
MOV DM465 EM19015        ; 注入上下RB P4 加減速ﾃﾞｰﾀ
;<h1/>注入RB-1　PCON-C
BLD DM10523 #3           ; 注入RB1 状態信号
OUT @MR104               ; 注入RB1 ｱﾗｰﾑ出力中
BLD DM10523 #4           ; 注入RB1 状態信号
BAND DM10523 #14         ; 注入RB1 状態信号
BANB DM10523 #15         ; 注入RB1 状態信号
BANB DM10523 #8          ; 注入RB1 状態信号
BANB DM10523 #7          ; 注入RB1 状態信号
ANB R50008               ; 全体Error
ANB R50300               ; Pause
OUT @MR105               ; 注入RB1 運転準備OK
BLD DM10523 #0           ; 注入RB1 状態信号
OUT MR20500              ; 注入RB1 位置決め完了
LDB @MR1201              ; 注入RB1 原点復帰中
ANB @MR2201              ; 注入RB1 ﾎﾟｲﾝﾄ移動中
INV
OUT MR20504              ; 注入RB1 ﾓｰﾄﾞ切替不可
LDP MR20202              ; 注入RB1 ｻｰﾎﾞON
BSET DM10723 #4          ; 注入RB1 制御信号
LDF MR20202              ; 注入RB1 ｻｰﾎﾞON
BRES DM10723 #4          ; 注入RB1 制御信号
;注入RB1 ｱﾗｰﾑ処理
LD MR003                 ; ｴﾗｰ監視開始
AND R50004               ; TASKDO
AND @MR104               ; 注入RB1 ｱﾗｰﾑ出力中
ANB @MR301               ; 注入RB1 ｱﾗｰﾑON
ZRES @MR1200 @MR1215     ; 注入RB1 原点復帰
CON
ZRES @MR2200 @MR2215     ; 注入RB1 ﾎﾟｲﾝﾄ移動
CON
RES MR20506              ; 注入RB1 原点復帰中
CON
RES R17900               ; ﾊﾟﾈﾙ　ﾍﾟｰｼﾞ切替不可
CON
BRES DM10723 #1          ; 注入RB1 制御信号
CON
RES R10806               ; 注入RB1 ﾎﾟｲﾝﾄ移動要求
CON
RES MR20507              ; 注入RB1 ﾎﾟｲﾝﾄ移動中
CON
BRES DM10723 #0          ; 注入RB1 制御信号
CON
BRES DM10723 #2          ; 注入RB1 制御信号
CON
BRES DM10723 #3          ; 注入RB1 制御信号
CON
OUT MR20501              ; 注入RB1 ｱﾗｰﾑ出力
LD CR2002                ; 常時ON
AND MR20501              ; 注入RB1 ｱﾗｰﾑ出力
ANB R50008               ; 全体Error
SET @MR301               ; 注入RB1 ｱﾗｰﾑON
CON
SET R50008               ; 全体Error
CON
SET R50902               ; UT3部ｴﾗｰ
CON
SET R51003               ; Err03
CON
SET @MR302
MOV #112 DM108           ; ｴﾗｰ詳細
STG @MR302
AND R50008               ; 全体Error
JMP @MR303
STG @MR303
ANB R50008               ; 全体Error
SET MR20502              ; 注入RB1 ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @MR304
STG @MR304
ANB MR20502              ; 注入RB1 ｱﾗｰﾑﾘｾｯﾄ要求
AND MR20503              ; 注入RB1 ｱﾗｰﾑﾘｾｯﾄ完了
RES @MR307               ; ｱﾗｰﾑ解除中
CON
RES @MR301               ; 注入RB1 ｱﾗｰﾑON
CON
RES MR20503              ; 注入RB1 ｱﾗｰﾑﾘｾｯﾄ完了
CON
SET R50011               ; TRAP
CON
ENDS
STG MR20502              ; 注入RB1 ｱﾗｰﾑﾘｾｯﾄ要求
BSET DM10723 #3          ; 注入RB1 制御信号
CON
JMP @MR305
STG @MR305
TMR @14 #10
CON
AND @T14
JMP @MR306
STG @MR306
BRES DM10723 #3          ; 注入RB1 制御信号
CON
SET MR20503              ; 注入RB1 ｱﾗｰﾑﾘｾｯﾄ完了
CON
ENDS
;注入RB1 原点復帰
LD MR20506               ; 注入RB1 原点復帰中
AND R50600               ; ﾌﾘｯｶ1 (0.3_0.3)
OR R12815                ; 注入RB1 原点位置有り
OUT R12812               ; 注入RB1 原点復帰　表示
LD CR2002                ; 常時ON
AND @MR105               ; 注入RB1 運転準備OK
OUT R12810               ; 注入RB1 動作可
LD R10807                ; 注入RB1 原点復帰要求
AND R12810               ; 注入RB1 動作可
ANB MR20506              ; 注入RB1 原点復帰中
ANB MR20507              ; 注入RB1 ﾎﾟｲﾝﾄ移動中
ANB @MR1201              ; 注入RB1 原点復帰中
ANB @MR2201              ; 注入RB1 ﾎﾟｲﾝﾄ移動中
SET @MR1200              ; 注入RB1 原点復帰
STG @MR1200              ; 注入RB1 原点復帰
RES R10807               ; 注入RB1 原点復帰要求
CON
RES R12815               ; 注入RB1 原点位置有り
CON
ZRES R12800 R12802       ; RB1 P1有り  RB1 P3有り
CON
SET R17900               ; ﾊﾟﾈﾙ　ﾍﾟｰｼﾞ切替不可
CON
RES MR20505              ; 注入RB1 原点復帰済
CON
SET MR20506              ; 注入RB1 原点復帰中
CON
SET @MR1201              ; 注入RB1 原点復帰中
CON
JMP @MR1202
STG @MR1202
BSET DM10723 #1          ; 注入RB1 制御信号
CON
JMP @MR1203
STG @MR1203
BANB DM10523 #0          ; 注入RB1 状態信号
BRES DM10723 #1          ; 注入RB1 制御信号
CON
JMP @MR1204
STG @MR1204
BANB DM10523 #2          ; 注入RB1 状態信号
BAND DM10523 #0          ; 注入RB1 状態信号
JMP @MR1205
STG @MR1205
RES MR20506              ; 注入RB1 原点復帰中
CON
RES @MR1201              ; 注入RB1 原点復帰中
CON
RES R17900               ; ﾊﾟﾈﾙ　ﾍﾟｰｼﾞ切替不可
CON
SET R12815               ; 注入RB1 原点位置有り
CON
SET MR20505              ; 注入RB1 原点復帰済
CON
ENDS
;注入RB1 ﾎﾟｲﾝﾄ移動
LD R10806                ; 注入RB1 ﾎﾟｲﾝﾄ移動要求
AND R12810               ; 注入RB1 動作可
ANB MR20506              ; 注入RB1 原点復帰中
ANB MR20507              ; 注入RB1 ﾎﾟｲﾝﾄ移動中
ANB @MR1201              ; 注入RB1 原点復帰中
ANB @MR2201              ; 注入RB1 ﾎﾟｲﾝﾄ移動中
SET @MR2200              ; 注入RB1 ﾎﾟｲﾝﾄ移動
STG @MR2200              ; 注入RB1 ﾎﾟｲﾝﾄ移動
RES R12815               ; 注入RB1 原点位置有り
CON
SET R17900               ; ﾊﾟﾈﾙ　ﾍﾟｰｼﾞ切替不可
CON
RES R10806               ; 注入RB1 ﾎﾟｲﾝﾄ移動要求
CON
SET MR20507              ; 注入RB1 ﾎﾟｲﾝﾄ移動中
CON
SET @MR2201              ; 注入RB1 ﾎﾟｲﾝﾄ移動中
CON
JMP @MR2202
STG @MR2202
MPS
AND R10800               ; 注入RB1 P1選択
MOV.L EM20000 DM10716    ; 注入RB1 目標位置（下位8bit）
MOV EM20002 DM10720      ; 注入RB1 速度
MOV EM20003 DM10721      ; 注入RB1 加減速度
MRD
AND R10801               ; 注入RB1 P2選択
MOV.L EM20004 DM10716    ; 注入RB1 目標位置（下位8bit）
MOV EM20006 DM10720      ; 注入RB1 速度
MOV EM20007 DM10721      ; 注入RB1 加減速度
MRD
AND R10802               ; 注入RB1 P3選択
MOV.L EM20008 DM10716    ; 注入RB1 目標位置（下位8bit）
MOV EM20010 DM10720      ; 注入RB1 速度
MOV EM20011 DM10721      ; 注入RB1 加減速度
MPP
TMH @10 #10
CON
AND @T10
JMP @MR2203
STG @MR2203
BSET DM10723 #0          ; 注入RB1 制御信号
CON
JMP @MR2204
STG @MR2204
MPS
BANB DM10523 #0          ; 注入RB1 状態信号
BRES DM10723 #0          ; 注入RB1 制御信号
CON
JMP @MR2205
MPP
TMH @11 #100
CON
AND @T11
BRES DM10723 #0          ; 注入RB1 制御信号
CON
JMP @MR2205
STG @MR2205
BANB DM10523 #2          ; 注入RB1 状態信号
BAND DM10523 #0          ; 注入RB1 状態信号
TMH @12 #10
CON
AND @T12
JMP @MR2206
STG @MR2206
MPS
AND R10800               ; 注入RB1 P1選択
RES R12802               ; RB1 P3有り
CON
RES R12801               ; RB1 P2有り
CON
SET R12800               ; RB1 P1有り
MRD
AND R10801               ; 注入RB1 P2選択
RES R12802               ; RB1 P3有り
CON
RES R12800               ; RB1 P1有り
CON
SET R12801               ; RB1 P2有り
MRD
AND R10802               ; 注入RB1 P3選択
RES R12801               ; RB1 P2有り
CON
RES R12800               ; RB1 P1有り
CON
SET R12802               ; RB1 P3有り
MPP
TMH @13 #10
CON
AND @T13
ZRES R10800 R10802       ; 注入RB1 P1選択  注入RB1 P3選択
CON
JMP @MR2207
STG @MR2207
RES R17900               ; ﾊﾟﾈﾙ　ﾍﾟｰｼﾞ切替不可
CON
BRES DM10723 #2          ; 注入RB1 制御信号
CON
BRES DM10723 #3          ; 注入RB1 制御信号
CON
RES MR20507              ; 注入RB1 ﾎﾟｲﾝﾄ移動中
CON
RES @MR2201              ; 注入RB1 ﾎﾟｲﾝﾄ移動中
CON
ENDS
;<h1/>注入RB-2　PCON-C
BLD DM10531 #3           ; 注入RB2 状態信号
OUT @MR106               ; 注入RB2 ｱﾗｰﾑ出力中
BLD DM10531 #4           ; 注入RB2 状態信号
BAND DM10531 #14         ; 注入RB2 状態信号
BANB DM10531 #15         ; 注入RB2 状態信号
BANB DM10531 #8          ; 注入RB2 状態信号
BANB DM10531 #7          ; 注入RB2 状態信号
ANB R50008               ; 全体Error
ANB R50300               ; Pause
OUT @MR107               ; 注入RB2 運転準備OK
BLD DM10531 #0           ; 注入RB2 状態信号
OUT MR20600              ; 注入RB2 位置決め完了
LDB @MR1301              ; 注入RB2 原点復帰中
ANB @MR2301              ; 注入RB2 ﾎﾟｲﾝﾄ移動中
INV
OUT MR20604              ; 注入RB2 ﾓｰﾄﾞ切替不可
LDP MR20203              ; 注入RB2 ｻｰﾎﾞON
BSET DM10731 #4          ; 注入RB2 制御信号
LDF MR20203              ; 注入RB2 ｻｰﾎﾞON
BRES DM10731 #4          ; 注入RB2 制御信号
;注入RB2 ｱﾗｰﾑ処理
LD MR003                 ; ｴﾗｰ監視開始
AND R50004               ; TASKDO
AND @MR106               ; 注入RB2 ｱﾗｰﾑ出力中
ANB @MR309               ; 注入RB2 ｱﾗｰﾑON
ZRES @MR1300 @MR1315     ; 注入RB2 原点復帰
CON
ZRES @MR2300 @MR2315     ; 注入RB2 ﾎﾟｲﾝﾄ移動
CON
RES MR20606              ; 注入RB2 原点復帰中
CON
RES R17900               ; ﾊﾟﾈﾙ　ﾍﾟｰｼﾞ切替不可
CON
BRES DM10731 #1          ; 注入RB2 制御信号
CON
RES R10906               ; 注入RB2 ﾎﾟｲﾝﾄ移動要求
CON
RES MR20607              ; 注入RB2 ﾎﾟｲﾝﾄ移動中
CON
BRES DM10731 #0          ; 注入RB2 制御信号
CON
BRES DM10731 #2          ; 注入RB2 制御信号
CON
BRES DM10731 #3          ; 注入RB2 制御信号
CON
OUT MR20601              ; 注入RB2 ｱﾗｰﾑ出力
LD CR2002                ; 常時ON
AND MR20601              ; 注入RB2 ｱﾗｰﾑ出力
ANB R50008               ; 全体Error
SET @MR309               ; 注入RB2 ｱﾗｰﾑON
CON
SET R50008               ; 全体Error
CON
SET R50902               ; UT3部ｴﾗｰ
CON
SET R51004               ; Err04
CON
SET @MR310
MOV #113 DM108           ; ｴﾗｰ詳細
STG @MR310
AND R50008               ; 全体Error
JMP @MR311
STG @MR311
ANB R50008               ; 全体Error
SET MR20602              ; 注入RB2 ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @MR312
STG @MR312
ANB MR20602              ; 注入RB2 ｱﾗｰﾑﾘｾｯﾄ要求
AND MR20603              ; 注入RB2 ｱﾗｰﾑﾘｾｯﾄ完了
RES @MR315               ; ｱﾗｰﾑ解除中
CON
RES @MR309               ; 注入RB2 ｱﾗｰﾑON
CON
RES MR20603              ; 注入RB2 ｱﾗｰﾑﾘｾｯﾄ完了
CON
SET R50011               ; TRAP
CON
ENDS
STG MR20602              ; 注入RB2 ｱﾗｰﾑﾘｾｯﾄ要求
BSET DM10731 #3          ; 注入RB2 制御信号
CON
JMP @MR313
STG @MR313
TMR @19 #10
CON
AND @T19
JMP @MR314
STG @MR314
BRES DM10731 #3          ; 注入RB2 制御信号
CON
SET MR20603              ; 注入RB2 ｱﾗｰﾑﾘｾｯﾄ完了
CON
ENDS
;注入RB2 原点復帰
LD MR20606               ; 注入RB2 原点復帰中
AND R50600               ; ﾌﾘｯｶ1 (0.3_0.3)
OR R12915                ; 注入RB2 原点位置有り
OUT R12912               ; 注入RB2 原点復帰　表示
LD CR2002                ; 常時ON
AND @MR107               ; 注入RB2 運転準備OK
OUT R12910               ; 注入RB2 動作可
LD R10907                ; 注入RB2 原点復帰要求
AND R12910               ; 注入RB2 動作可
ANB MR20606              ; 注入RB2 原点復帰中
ANB MR20607              ; 注入RB2 ﾎﾟｲﾝﾄ移動中
ANB @MR1301              ; 注入RB2 原点復帰中
ANB @MR2301              ; 注入RB2 ﾎﾟｲﾝﾄ移動中
SET @MR1300              ; 注入RB2 原点復帰
STG @MR1300              ; 注入RB2 原点復帰
RES R10907               ; 注入RB2 原点復帰要求
CON
RES R12915               ; 注入RB2 原点位置有り
CON
ZRES R12900 R12902       ; RB2 P1有り  RB2 P3有り
CON
SET R17900               ; ﾊﾟﾈﾙ　ﾍﾟｰｼﾞ切替不可
CON
RES MR20605              ; 注入RB2 原点復帰済
CON
SET MR20606              ; 注入RB2 原点復帰中
CON
SET @MR1301              ; 注入RB2 原点復帰中
CON
JMP @MR1302
STG @MR1302
BSET DM10731 #1          ; 注入RB2 制御信号
CON
JMP @MR1303
STG @MR1303
BANB DM10531 #0          ; 注入RB2 状態信号
BRES DM10731 #1          ; 注入RB2 制御信号
CON
JMP @MR1304
STG @MR1304
BANB DM10531 #2          ; 注入RB2 状態信号
BAND DM10531 #0          ; 注入RB2 状態信号
JMP @MR1305
STG @MR1305
RES MR20606              ; 注入RB2 原点復帰中
CON
RES @MR1301              ; 注入RB2 原点復帰中
CON
RES R17900               ; ﾊﾟﾈﾙ　ﾍﾟｰｼﾞ切替不可
CON
SET R12915               ; 注入RB2 原点位置有り
CON
SET MR20605              ; 注入RB2 原点復帰済
CON
ENDS
;注入RB2 ﾎﾟｲﾝﾄ移動
LD R10906                ; 注入RB2 ﾎﾟｲﾝﾄ移動要求
AND R12910               ; 注入RB2 動作可
ANB MR20606              ; 注入RB2 原点復帰中
ANB MR20607              ; 注入RB2 ﾎﾟｲﾝﾄ移動中
ANB @MR1301              ; 注入RB2 原点復帰中
ANB @MR2301              ; 注入RB2 ﾎﾟｲﾝﾄ移動中
SET @MR2300              ; 注入RB2 ﾎﾟｲﾝﾄ移動
STG @MR2300              ; 注入RB2 ﾎﾟｲﾝﾄ移動
RES R12915               ; 注入RB2 原点位置有り
CON
SET R17900               ; ﾊﾟﾈﾙ　ﾍﾟｰｼﾞ切替不可
CON
RES R10906               ; 注入RB2 ﾎﾟｲﾝﾄ移動要求
CON
SET MR20607              ; 注入RB2 ﾎﾟｲﾝﾄ移動中
CON
SET @MR2301              ; 注入RB2 ﾎﾟｲﾝﾄ移動中
CON
JMP @MR2302
STG @MR2302
MPS
AND R10900               ; 注入RB2 P1選択
MOV.L EM20040 DM10724    ; 注入RB2 目標位置（下位8bit）
MOV EM20042 DM10728      ; 注入RB2 速度
MOV EM20043 DM10729      ; 注入RB2 加減速度
MRD
AND R10901               ; 注入RB2 P2選択
MOV.L EM20044 DM10724    ; 注入RB2 目標位置（下位8bit）
MOV EM20046 DM10728      ; 注入RB2 速度
MOV EM20047 DM10729      ; 注入RB2 加減速度
MRD
AND R10902               ; 注入RB2 P3選択
MOV.L EM20048 DM10724    ; 注入RB2 目標位置（下位8bit）
MOV EM20050 DM10728      ; 注入RB2 速度
MOV EM20051 DM10729      ; 注入RB2 加減速度
MPP
TMH @15 #10
CON
AND @T15
JMP @MR2303
STG @MR2303
BSET DM10731 #0          ; 注入RB2 制御信号
CON
JMP @MR2304
STG @MR2304
MPS
BANB DM10531 #0          ; 注入RB2 状態信号
BRES DM10731 #0          ; 注入RB2 制御信号
CON
JMP @MR2305
MPP
TMH @16 #100
CON
AND @T16
BRES DM10731 #0          ; 注入RB2 制御信号
CON
JMP @MR2305
STG @MR2305
BANB DM10531 #2          ; 注入RB2 状態信号
BAND DM10531 #0          ; 注入RB2 状態信号
TMH @17 #10
CON
AND @T17
JMP @MR2306
STG @MR2306
MPS
AND R10900               ; 注入RB2 P1選択
RES R12902               ; RB2 P3有り
CON
RES R12901               ; RB2 P2有り
CON
SET R12900               ; RB2 P1有り
MRD
AND R10901               ; 注入RB2 P2選択
RES R12902               ; RB2 P3有り
CON
RES R12900               ; RB2 P1有り
CON
SET R12901               ; RB2 P2有り
MRD
AND R10902               ; 注入RB2 P3選択
RES R12901               ; RB2 P2有り
CON
RES R12900               ; RB2 P1有り
CON
SET R12902               ; RB2 P3有り
MPP
TMH @18 #10
CON
AND @T18
ZRES R10900 R10902       ; 注入RB2 P1選択  注入RB2 P3選択
CON
JMP @MR2307
STG @MR2307
RES R17900               ; ﾊﾟﾈﾙ　ﾍﾟｰｼﾞ切替不可
CON
BRES DM10731 #2          ; 注入RB2 制御信号
CON
BRES DM10731 #3          ; 注入RB2 制御信号
CON
RES MR20607              ; 注入RB2 ﾎﾟｲﾝﾄ移動中
CON
RES @MR2301              ; 注入RB2 ﾎﾟｲﾝﾄ移動中
CON
ENDS
;<h1/>注入RB-3　PCON-C
BLD DM10539 #3           ; 注入RB3 状態信号
OUT @MR108               ; 注入RB3 ｱﾗｰﾑ出力中
BLD DM10539 #4           ; 注入RB3 状態信号
BAND DM10539 #14         ; 注入RB3 状態信号
BANB DM10539 #15         ; 注入RB3 状態信号
BANB DM10539 #8          ; 注入RB3 状態信号
BANB DM10539 #7          ; 注入RB3 状態信号
ANB R50008               ; 全体Error
ANB R50300               ; Pause
OUT @MR109               ; 注入RB3 運転準備OK
BLD DM10539 #0           ; 注入RB3 状態信号
OUT MR20700              ; 注入RB3 位置決め完了
LDB @MR1401              ; 注入RB3 原点復帰中
ANB @MR2401              ; 注入RB3 ﾎﾟｲﾝﾄ移動中
INV
OUT MR20704              ; 注入RB3 ﾓｰﾄﾞ切替不可
LDP MR20204              ; 注入RB3 ｻｰﾎﾞON
BSET DM10739 #4          ; 注入RB3 制御信号
LDF MR20204              ; 注入RB3 ｻｰﾎﾞON
BRES DM10739 #4          ; 注入RB3 制御信号
;注入RB3 ｱﾗｰﾑ処理
LD MR003                 ; ｴﾗｰ監視開始
AND R50004               ; TASKDO
AND @MR108               ; 注入RB3 ｱﾗｰﾑ出力中
ANB @MR401               ; 注入RB3 ｱﾗｰﾑON
ZRES @MR1400 @MR1415     ; 注入RB3 原点復帰
CON
ZRES @MR2400 @MR2415     ; 注入RB3 ﾎﾟｲﾝﾄ移動
CON
RES MR20706              ; 注入RB3 原点復帰中
CON
RES R17900               ; ﾊﾟﾈﾙ　ﾍﾟｰｼﾞ切替不可
CON
BRES DM10739 #1          ; 注入RB3 制御信号
CON
RES R11006               ; 注入RB3 ﾎﾟｲﾝﾄ移動要求
CON
RES MR20707              ; 注入RB3 ﾎﾟｲﾝﾄ移動中
CON
BRES DM10739 #0          ; 注入RB3 制御信号
CON
BRES DM10739 #2          ; 注入RB3 制御信号
CON
BRES DM10739 #3          ; 注入RB3 制御信号
CON
OUT MR20701              ; 注入RB3 ｱﾗｰﾑ出力
LD CR2002                ; 常時ON
AND MR20701              ; 注入RB3 ｱﾗｰﾑ出力
ANB R50008               ; 全体Error
SET @MR401               ; 注入RB3 ｱﾗｰﾑON
CON
SET R50008               ; 全体Error
CON
SET R50902               ; UT3部ｴﾗｰ
CON
SET R51005               ; Err05
CON
SET @MR402
MOV #114 DM108           ; ｴﾗｰ詳細
STG @MR402
AND R50008               ; 全体Error
JMP @MR403
STG @MR403
ANB R50008               ; 全体Error
SET MR20702              ; 注入RB3 ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @MR404
STG @MR404
ANB MR20702              ; 注入RB3 ｱﾗｰﾑﾘｾｯﾄ要求
AND MR20703              ; 注入RB3 ｱﾗｰﾑﾘｾｯﾄ完了
RES @MR407               ; ｱﾗｰﾑ解除中
CON
RES @MR401               ; 注入RB3 ｱﾗｰﾑON
CON
RES MR20703              ; 注入RB3 ｱﾗｰﾑﾘｾｯﾄ完了
CON
SET R50011               ; TRAP
CON
ENDS
STG MR20702              ; 注入RB3 ｱﾗｰﾑﾘｾｯﾄ要求
BSET DM10739 #3          ; 注入RB3 制御信号
CON
JMP @MR405
STG @MR405
TMR @24 #10
CON
AND @T24
JMP @MR406
STG @MR406
BRES DM10739 #3          ; 注入RB3 制御信号
CON
SET MR20703              ; 注入RB3 ｱﾗｰﾑﾘｾｯﾄ完了
CON
ENDS
;注入RB3 原点復帰
LD MR20706               ; 注入RB3 原点復帰中
AND R50600               ; ﾌﾘｯｶ1 (0.3_0.3)
OR R13015                ; 注入RB3 原点位置有り
OUT R13012               ; 注入RB3 原点復帰　表示
LD CR2002                ; 常時ON
AND @MR109               ; 注入RB3 運転準備OK
OUT R13010               ; 注入RB3 動作可
LD R11007                ; 注入RB3 原点復帰要求
AND R13010               ; 注入RB3 動作可
ANB MR20706              ; 注入RB3 原点復帰中
ANB MR20707              ; 注入RB3 ﾎﾟｲﾝﾄ移動中
ANB @MR1401              ; 注入RB3 原点復帰中
ANB @MR2401              ; 注入RB3 ﾎﾟｲﾝﾄ移動中
SET @MR1400              ; 注入RB3 原点復帰
STG @MR1400              ; 注入RB3 原点復帰
RES R11007               ; 注入RB3 原点復帰要求
CON
RES R13015               ; 注入RB3 原点位置有り
CON
ZRES R13000 R13002       ; RB3 P1有り  RB3 P3有り
CON
SET R17900               ; ﾊﾟﾈﾙ　ﾍﾟｰｼﾞ切替不可
CON
RES MR20705              ; 注入RB3 原点復帰済
CON
SET MR20706              ; 注入RB3 原点復帰中
CON
SET @MR1401              ; 注入RB3 原点復帰中
CON
JMP @MR1402
STG @MR1402
BSET DM10739 #1          ; 注入RB3 制御信号
CON
JMP @MR1403
STG @MR1403
BANB DM10539 #0          ; 注入RB3 状態信号
BRES DM10739 #1          ; 注入RB3 制御信号
CON
JMP @MR1404
STG @MR1404
BANB DM10539 #2          ; 注入RB3 状態信号
BAND DM10539 #0          ; 注入RB3 状態信号
JMP @MR1405
STG @MR1405
RES MR20706              ; 注入RB3 原点復帰中
CON
RES @MR1401              ; 注入RB3 原点復帰中
CON
RES R17900               ; ﾊﾟﾈﾙ　ﾍﾟｰｼﾞ切替不可
CON
SET R13015               ; 注入RB3 原点位置有り
CON
SET MR20705              ; 注入RB3 原点復帰済
CON
ENDS
;注入RB3 ﾎﾟｲﾝﾄ移動
LD R11006                ; 注入RB3 ﾎﾟｲﾝﾄ移動要求
AND R13010               ; 注入RB3 動作可
ANB MR20706              ; 注入RB3 原点復帰中
ANB MR20707              ; 注入RB3 ﾎﾟｲﾝﾄ移動中
ANB @MR1401              ; 注入RB3 原点復帰中
ANB @MR2401              ; 注入RB3 ﾎﾟｲﾝﾄ移動中
SET @MR2400              ; 注入RB3 ﾎﾟｲﾝﾄ移動
STG @MR2400              ; 注入RB3 ﾎﾟｲﾝﾄ移動
RES R13015               ; 注入RB3 原点位置有り
CON
SET R17900               ; ﾊﾟﾈﾙ　ﾍﾟｰｼﾞ切替不可
CON
RES R11006               ; 注入RB3 ﾎﾟｲﾝﾄ移動要求
CON
SET MR20707              ; 注入RB3 ﾎﾟｲﾝﾄ移動中
CON
SET @MR2401              ; 注入RB3 ﾎﾟｲﾝﾄ移動中
CON
JMP @MR2402
STG @MR2402
MPS
AND R11000               ; 注入RB3 P1選択
MOV.L EM20080 DM10732    ; 注入RB3 目標位置（下位8bit）
MOV EM20082 DM10736      ; 注入RB3 速度
MOV EM20083 DM10737      ; 注入RB3 加減速度
MRD
AND R11001               ; 注入RB3 P2選択
MOV.L EM20084 DM10732    ; 注入RB3 目標位置（下位8bit）
MOV EM20086 DM10736      ; 注入RB3 速度
MOV EM20087 DM10737      ; 注入RB3 加減速度
MRD
AND R11002               ; 注入RB3 P3選択
MOV.L EM20088 DM10732    ; 注入RB3 目標位置（下位8bit）
MOV EM20090 DM10736      ; 注入RB3 速度
MOV EM20091 DM10737      ; 注入RB3 加減速度
MPP
TMH @20 #10
CON
AND @T20
JMP @MR2403
STG @MR2403
BSET DM10739 #0          ; 注入RB3 制御信号
CON
JMP @MR2404
STG @MR2404
MPS
BANB DM10539 #0          ; 注入RB3 状態信号
BRES DM10739 #0          ; 注入RB3 制御信号
CON
JMP @MR2405
MPP
TMH @21 #100
CON
AND @T21
BRES DM10739 #0          ; 注入RB3 制御信号
CON
JMP @MR2405
STG @MR2405
BANB DM10539 #2          ; 注入RB3 状態信号
BAND DM10539 #0          ; 注入RB3 状態信号
TMH @22 #10
CON
AND @T22
JMP @MR2406
STG @MR2406
MPS
AND R11000               ; 注入RB3 P1選択
RES R13002               ; RB3 P3有り
CON
RES R13001               ; RB3 P2有り
CON
SET R13000               ; RB3 P1有り
MRD
AND R11001               ; 注入RB3 P2選択
RES R13002               ; RB3 P3有り
CON
RES R13000               ; RB3 P1有り
CON
SET R13001               ; RB3 P2有り
MRD
AND R11002               ; 注入RB3 P3選択
RES R13001               ; RB3 P2有り
CON
RES R13000               ; RB3 P1有り
CON
SET R13002               ; RB3 P3有り
MPP
TMH @23 #10
CON
AND @T23
ZRES R11000 R11002       ; 注入RB3 P1選択  注入RB3 P3選択
CON
JMP @MR2407
STG @MR2407
RES R17900               ; ﾊﾟﾈﾙ　ﾍﾟｰｼﾞ切替不可
CON
BRES DM10739 #2          ; 注入RB3 制御信号
CON
BRES DM10739 #3          ; 注入RB3 制御信号
CON
RES MR20707              ; 注入RB3 ﾎﾟｲﾝﾄ移動中
CON
RES @MR2401              ; 注入RB3 ﾎﾟｲﾝﾄ移動中
CON
ENDS
;<h1/>注入RB-4　PCON-C
BLD DM10547 #3           ; 注入RB4 状態信号
OUT @MR110               ; 注入RB4 ｱﾗｰﾑ出力中
BLD DM10547 #4           ; 注入RB4 状態信号
BAND DM10547 #14         ; 注入RB4 状態信号
BANB DM10547 #15         ; 注入RB4 状態信号
BANB DM10547 #8          ; 注入RB4 状態信号
BANB DM10547 #7          ; 注入RB4 状態信号
ANB R50008               ; 全体Error
ANB R50300               ; Pause
OUT @MR111               ; 注入RB4 運転準備OK
BLD DM10547 #0           ; 注入RB4 状態信号
OUT MR20800              ; 注入RB4 位置決め完了
LDB @MR1501              ; 注入RB4 原点復帰中
ANB @MR2501              ; 注入RB4 ﾎﾟｲﾝﾄ移動中
INV
OUT MR20804              ; 注入RB4 ﾓｰﾄﾞ切替不可
LDP MR20205              ; 注入RB4 ｻｰﾎﾞON
BSET DM10747 #4          ; 注入RB4 制御信号
LDF MR20205              ; 注入RB4 ｻｰﾎﾞON
BRES DM10747 #4          ; 注入RB4 制御信号
;注入RB4 ｱﾗｰﾑ処理
LD MR003                 ; ｴﾗｰ監視開始
AND R50004               ; TASKDO
AND @MR110               ; 注入RB4 ｱﾗｰﾑ出力中
ANB @MR409               ; 注入RB4 ｱﾗｰﾑON
ZRES @MR1500 @MR1515     ; 注入RB4 原点復帰
CON
ZRES @MR2500 @MR2515     ; 注入RB4 ﾎﾟｲﾝﾄ移動
CON
RES MR20806              ; 注入RB4 原点復帰中
CON
RES R17900               ; ﾊﾟﾈﾙ　ﾍﾟｰｼﾞ切替不可
CON
BRES DM10747 #1          ; 注入RB4 制御信号
CON
RES R11106               ; 注入RB4 ﾎﾟｲﾝﾄ移動要求
CON
RES MR20807              ; 注入RB4 ﾎﾟｲﾝﾄ移動中
CON
BRES DM10747 #0          ; 注入RB4 制御信号
CON
BRES DM10747 #2          ; 注入RB4 制御信号
CON
BRES DM10747 #3          ; 注入RB4 制御信号
CON
OUT MR20801              ; 注入RB4 ｱﾗｰﾑ出力
LD CR2002                ; 常時ON
AND MR20801              ; 注入RB4 ｱﾗｰﾑ出力
ANB R50008               ; 全体Error
SET @MR409               ; 注入RB4 ｱﾗｰﾑON
CON
SET R50008               ; 全体Error
CON
SET R50902               ; UT3部ｴﾗｰ
CON
SET R51006               ; Err06
CON
SET @MR410
MOV #115 DM108           ; ｴﾗｰ詳細
STG @MR410
AND R50008               ; 全体Error
JMP @MR411
STG @MR411
ANB R50008               ; 全体Error
SET MR20802              ; 注入RB4 ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @MR412
STG @MR412
ANB MR20802              ; 注入RB4 ｱﾗｰﾑﾘｾｯﾄ要求
AND MR20803              ; 注入RB4 ｱﾗｰﾑﾘｾｯﾄ完了
RES @MR415               ; ｱﾗｰﾑ解除中
CON
RES @MR409               ; 注入RB4 ｱﾗｰﾑON
CON
RES MR20803              ; 注入RB4 ｱﾗｰﾑﾘｾｯﾄ完了
CON
SET R50011               ; TRAP
CON
ENDS
STG MR20802              ; 注入RB4 ｱﾗｰﾑﾘｾｯﾄ要求
BSET DM10747 #3          ; 注入RB4 制御信号
CON
JMP @MR413
STG @MR413
TMR @29 #10
CON
AND @T29
JMP @MR414
STG @MR414
BRES DM10747 #3          ; 注入RB4 制御信号
CON
SET MR20803              ; 注入RB4 ｱﾗｰﾑﾘｾｯﾄ完了
CON
ENDS
;注入RB4 原点復帰
LD MR20806               ; 注入RB4 原点復帰中
AND R50600               ; ﾌﾘｯｶ1 (0.3_0.3)
OR R13115                ; 注入RB4 原点位置有り
OUT R13112               ; 注入RB4 原点復帰　表示
LD CR2002                ; 常時ON
AND @MR111               ; 注入RB4 運転準備OK
OUT R13110               ; 注入RB4 動作可
LD R11107                ; 注入RB4 原点復帰要求
AND R13110               ; 注入RB4 動作可
ANB MR20806              ; 注入RB4 原点復帰中
ANB MR20807              ; 注入RB4 ﾎﾟｲﾝﾄ移動中
ANB @MR1501              ; 注入RB4 原点復帰中
ANB @MR2501              ; 注入RB4 ﾎﾟｲﾝﾄ移動中
SET @MR1500              ; 注入RB4 原点復帰
STG @MR1500              ; 注入RB4 原点復帰
RES R11107               ; 注入RB4 原点復帰要求
CON
RES R13115               ; 注入RB4 原点位置有り
CON
ZRES R13100 R13102       ; RB4 P1有り  RB4 P3有り
CON
SET R17900               ; ﾊﾟﾈﾙ　ﾍﾟｰｼﾞ切替不可
CON
RES MR20805              ; 注入RB4 原点復帰済
CON
SET MR20806              ; 注入RB4 原点復帰中
CON
SET @MR1501              ; 注入RB4 原点復帰中
CON
JMP @MR1502
STG @MR1502
BSET DM10747 #1          ; 注入RB4 制御信号
CON
JMP @MR1503
STG @MR1503
BANB DM10547 #0          ; 注入RB4 状態信号
BRES DM10747 #1          ; 注入RB4 制御信号
CON
JMP @MR1504
STG @MR1504
BANB DM10547 #2          ; 注入RB4 状態信号
BAND DM10547 #0          ; 注入RB4 状態信号
JMP @MR1505
STG @MR1505
RES MR20806              ; 注入RB4 原点復帰中
CON
RES @MR1501              ; 注入RB4 原点復帰中
CON
RES R17900               ; ﾊﾟﾈﾙ　ﾍﾟｰｼﾞ切替不可
CON
SET R13115               ; 注入RB4 原点位置有り
CON
SET MR20805              ; 注入RB4 原点復帰済
CON
ENDS
;注入RB4 ﾎﾟｲﾝﾄ移動
LD R11106                ; 注入RB4 ﾎﾟｲﾝﾄ移動要求
AND R13110               ; 注入RB4 動作可
ANB MR20806              ; 注入RB4 原点復帰中
ANB MR20807              ; 注入RB4 ﾎﾟｲﾝﾄ移動中
ANB @MR1501              ; 注入RB4 原点復帰中
ANB @MR2501              ; 注入RB4 ﾎﾟｲﾝﾄ移動中
SET @MR2500              ; 注入RB4 ﾎﾟｲﾝﾄ移動
STG @MR2500              ; 注入RB4 ﾎﾟｲﾝﾄ移動
RES R13115               ; 注入RB4 原点位置有り
CON
SET R17900               ; ﾊﾟﾈﾙ　ﾍﾟｰｼﾞ切替不可
CON
RES R11106               ; 注入RB4 ﾎﾟｲﾝﾄ移動要求
CON
SET MR20807              ; 注入RB4 ﾎﾟｲﾝﾄ移動中
CON
SET @MR2501              ; 注入RB4 ﾎﾟｲﾝﾄ移動中
CON
JMP @MR2502
STG @MR2502
MPS
AND R11100               ; 注入RB4 P1選択
MOV.L EM20120 DM10740    ; 注入RB4 目標位置（下位8bit）
MOV EM20122 DM10744      ; 注入RB4 速度
MOV EM20123 DM10745      ; 注入RB4 加減速度
MRD
AND R11101               ; 注入RB4 P2選択
MOV.L EM20124 DM10740    ; 注入RB4 目標位置（下位8bit）
MOV EM20126 DM10744      ; 注入RB4 速度
MOV EM20127 DM10745      ; 注入RB4 加減速度
MRD
AND R11102               ; 注入RB4 P3選択
MOV.L EM20128 DM10740    ; 注入RB4 目標位置（下位8bit）
MOV EM20130 DM10744      ; 注入RB4 速度
MOV EM20131 DM10745      ; 注入RB4 加減速度
MPP
TMH @25 #10
CON
AND @T25
JMP @MR2503
STG @MR2503
BSET DM10747 #0          ; 注入RB4 制御信号
CON
JMP @MR2504
STG @MR2504
MPS
BANB DM10547 #0          ; 注入RB4 状態信号
BRES DM10747 #0          ; 注入RB4 制御信号
CON
JMP @MR2505
MPP
TMH @26 #500
CON
AND @T26
BRES DM10747 #0          ; 注入RB4 制御信号
CON
JMP @MR2505
STG @MR2505
BANB DM10547 #2          ; 注入RB4 状態信号
BAND DM10547 #0          ; 注入RB4 状態信号
TMH @27 #10
CON
AND @T27
JMP @MR2506
STG @MR2506
MPS
AND R11100               ; 注入RB4 P1選択
RES R13102               ; RB4 P3有り
CON
RES R13101               ; RB4 P2有り
CON
SET R13100               ; RB4 P1有り
MRD
AND R11101               ; 注入RB4 P2選択
RES R13102               ; RB4 P3有り
CON
RES R13100               ; RB4 P1有り
CON
SET R13101               ; RB4 P2有り
MRD
AND R11102               ; 注入RB4 P3選択
RES R13100               ; RB4 P1有り
CON
RES R13101               ; RB4 P2有り
CON
SET R13102               ; RB4 P3有り
MPP
TMH @28 #10
CON
AND @T28
ZRES R11100 R11102       ; 注入RB4 P1選択  注入RB4 P3選択
CON
JMP @MR2507
STG @MR2507
RES R17900               ; ﾊﾟﾈﾙ　ﾍﾟｰｼﾞ切替不可
CON
BRES DM10747 #2          ; 注入RB4 制御信号
CON
BRES DM10747 #3          ; 注入RB4 制御信号
CON
RES MR20807              ; 注入RB4 ﾎﾟｲﾝﾄ移動中
CON
RES @MR2501              ; 注入RB4 ﾎﾟｲﾝﾄ移動中
CON
ENDS
END
ENDH
