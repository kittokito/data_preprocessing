DEVICE:53
;MODULE:UT5
;MODULE_TYPE:0
;UT5 Label fainal pasting
;
;非常停止
;Emergency Stop
LD R50010                ; 非常停止
OR @MR001
ZRES @MR002 @MR3415      ; STEP運転終了
CON
OUT @MR001
TMR @0 #5
LD @T0
MDSTOP UT5
;<h1/>HOME
LD R50003                ; HOMEﾓｰﾄﾞ
ANB R51805               ; UT5 Do
SET R51805               ; UT5 Do
CON
SET @MR1003              ; 原点復帰開始
LDB R50003               ; HOMEﾓｰﾄﾞ
ANB R50001               ; AUTOﾓｰﾄﾞ
ANB R50002               ; STEPﾓｰﾄﾞ
AND @MR1015              ; 原点復帰完了
RES R51805               ; UT5 Do
CON
RES @MR1015              ; 原点復帰完了
STG @MR1003              ; 原点復帰開始
ANB R50300               ; Pause
ANB R51705               ; UT5異常
RES MR8308               ; ﾗﾍﾞﾙ本貼り 前進
CON
SET MR8309               ; ﾗﾍﾞﾙ本貼り 後退
CON
AND R5311                ; ﾗﾍﾞﾙ本貼り 後退限
JMP @MR1004
STG @MR1004
ANB R50300               ; Pause
ANB R51705               ; UT5異常
MPS
LDB DM10563.1            ; RB8 本貼1上下 原点復帰完了
ORB DM10571.1            ; RB9 本貼2上下 原点復帰完了
ANL
JMP @MR1005
MPP
LD DM10563.1             ; RB8 本貼1上下 原点復帰完了
AND DM10571.1            ; RB9 本貼2上下 原点復帰完了
ANL
JMP @MR1007
STG @MR1005
ANB R50300               ; Pause
ANB R51705               ; UT5異常
DW #99 EM1314            ; RB8 本貼1上下 指令POS
CON
DW #99 EM1316            ; RB9 本貼2上下 指令POS
CON
AND MR3007               ; RB8 本貼1上下 起動IL
AND MR3008               ; RB9 本貼2上下 起動IL
SET R35708               ; RB8 本貼1上下 原点復帰
CON
SET R35808               ; RB9 本貼2上下 原点復帰
CON
JMP @MR1006
STG @MR1006
ANB R50300               ; Pause
ANB R51705               ; UT5異常
AND R35709               ; RB8 本貼1上下 原点復帰完了
AND R35809               ; RB9 本貼2上下 原点復帰完了
AND DM10563.1            ; RB8 本貼1上下 原点復帰完了
AND DM10571.1            ; RB9 本貼2上下 原点復帰完了
AND= EM1315 #1           ; RB8 本貼1上下 現在POS
AND= EM1317 #1           ; RB9 本貼2上下 現在POS
RES R35709               ; RB8 本貼1上下 原点復帰完了
CON
RES R35809               ; RB9 本貼2上下 原点復帰完了
CON
JMP @MR1007
STG @MR1007
ANB R50300               ; Pause
ANB R51705               ; UT5異常
SET MR5000               ; RB8 本貼1上下 下降 移動要求
CON
SET MR5100               ; RB9 本貼2上下 下降 移動要求
CON
JMP @MR1008
STG @MR1008
ANB R50300               ; Pause
ANB R51705               ; UT5異常
AND MR5001               ; RB8 本貼1上下 下降 移動完了
AND MR5101               ; RB9 本貼2上下 下降 移動完了
RES MR5001               ; RB8 本貼1上下 下降 移動完了
CON
RES MR5101               ; RB9 本貼2上下 下降 移動完了
CON
JMP @MR1009
STG @MR1009
ANB R50300               ; Pause
ANB R51705               ; UT5異常
SET R51905               ; UT5 1ｻｲｸﾙ終了
CON
SET @MR1015              ; 原点復帰完了
CON
ENDS
;<h1/>AUTO
LD R50001                ; AUTOﾓｰﾄﾞ
ANB R51805               ; UT5 Do
ANB @MR2001              ; 自動運転中
SET R51805               ; UT5 Do
CON
SET @MR2000              ; UT5 AUTO START
LDB R50003               ; HOMEﾓｰﾄﾞ
ANB R50001               ; AUTOﾓｰﾄﾞ
ANB R50002               ; STEPﾓｰﾄﾞ
AND @MR2915              ; 自動運転完了
RES @MR2001              ; 自動運転中
CON
RES R51805               ; UT5 Do
CON
RES @MR2915              ; 自動運転完了
STG @MR2000              ; UT5 AUTO START
AND R50209               ; 動作開始
SET @MR2001              ; 自動運転中
CON
JMP @MR2505
STG @MR2505
MPS
LD LR41100               ; AC Parameter 0(Normal mode)
OR LR41101               ; AC Parameter 1(UT6.7 non action)
ANL
JMP @MR2005
MRD
LD LR41102               ; AC Parameter 2(UT6-8 only)
OR LR41107               ; AC Parameter 7(UT8 only)
ANL
JMP @MR2910              ; 動作終了
MPP
LDB LR41100              ; AC Parameter 0(Normal mode)
ANB LR41101              ; AC Parameter 1(UT6.7 non action)
ANB LR41102              ; AC Parameter 2(UT6-8 only)
ANB LR41107              ; AC Parameter 7(UT8 only)
ANL
JMP @MR2005
STG @MR2005
MPS
LD= DM20500 #4           ; UT5-1在荷
AND= DM20502 #4          ; UT5-2在荷
AND R4808                ; INDEX ﾁｬｯｸ5-1 ﾜｰｸ有無
AND R4809                ; INDEX ﾁｬｯｸ5-2 ﾜｰｸ有無
LD= DM20500 #4           ; UT5-1在荷
AND= DM20502 #0          ; UT5-2在荷
AND R4808                ; INDEX ﾁｬｯｸ5-1 ﾜｰｸ有無
ANB R4809                ; INDEX ﾁｬｯｸ5-2 ﾜｰｸ有無
ORL
LD= DM20500 #0           ; UT5-1在荷
AND= DM20502 #4          ; UT5-2在荷
ANB R4808                ; INDEX ﾁｬｯｸ5-1 ﾜｰｸ有無
AND R4809                ; INDEX ﾁｬｯｸ5-2 ﾜｰｸ有無
ORL
ANB R50300               ; Pause
ANB R51705               ; UT5異常
ANL
JMP @MR2100              ; 通常動作
MPP
LD= DM20500 #0           ; UT5-1在荷
AND= DM20502 #0          ; UT5-2在荷
ANB R4808                ; INDEX ﾁｬｯｸ5-1 ﾜｰｸ有無
ANB R4809                ; INDEX ﾁｬｯｸ5-2 ﾜｰｸ有無
LD= DM20500 #5           ; UT5-1在荷
AND= DM20502 #5          ; UT5-2在荷
AND R4808                ; INDEX ﾁｬｯｸ5-1 ﾜｰｸ有無
AND R4809                ; INDEX ﾁｬｯｸ5-2 ﾜｰｸ有無
ORL
LD= DM20500 #5           ; UT5-1在荷
AND= DM20502 #0          ; UT5-2在荷
AND R4808                ; INDEX ﾁｬｯｸ5-1 ﾜｰｸ有無
ANB R4809                ; INDEX ﾁｬｯｸ5-2 ﾜｰｸ有無
ORL
LD= DM20500 #0           ; UT5-1在荷
AND= DM20502 #5          ; UT5-2在荷
ANB R4808                ; INDEX ﾁｬｯｸ5-1 ﾜｰｸ有無
AND R4809                ; INDEX ﾁｬｯｸ5-2 ﾜｰｸ有無
ORL
ANB R50300               ; Pause
ANB R51705               ; UT5異常
ANL
JMP @MR2910              ; 動作終了
;Ordinary Movement
;通常動作
;
STG @MR2100              ; 通常動作
ANB R50300               ; Pause
ANB R51705               ; UT5異常
LDA #4
CON
ADD EM1202               ; ﾒｲﾝINDEX 現在POS
CON
STA DM19500              ; UT5ﾁｬｯｸNo.
CON
JMP @MR2101
STG @MR2101
ANB R50300               ; Pause
ANB R51705               ; UT5異常
MPS
LD>= DM19500 #1          ; UT5ﾁｬｯｸNo.
AND<= DM19500 #8         ; UT5ﾁｬｯｸNo.
ANL
JMP @MR2102
MPP
AND> DM19500 #8          ; UT5ﾁｬｯｸNo.
LDA DM19500              ; UT5ﾁｬｯｸNo.
CON
SUB #8
CON
STA DM19500              ; UT5ﾁｬｯｸNo.
CON
JMP @MR2102
STG @MR2102
ANB R50300               ; Pause
ANB R51705               ; UT5異常
JMP @MR2103
STG @MR2103
ANB R50300               ; Pause
ANB R51705               ; UT5異常
SET MR405                ; UT5 着座/検知 無効ﾀｲﾐﾝｸﾞ
CON
JMP @MR2104
STG @MR2104
ANB R50300               ; Pause
ANB R51705               ; UT5異常
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
MPS
LDB @MR006               ; STEP動作中
ANB @MR1702              ; ﾗﾍﾞﾙ本貼 動作完了
ANL
SET @MR1700              ; ﾗﾍﾞﾙ本貼 動作要求
CON
JMP @MR2105
MPP
AND @MR006               ; STEP動作中
JMP @MR2105
STG @MR2105
ANB R50300               ; Pause
ANB R51705               ; UT5異常
MPS
LD<> DM20500 #0          ; UT5-1在荷
AND<> DM20502 #0         ; UT5-2在荷
ANL
LDA.L DM20530            ; UT5-1 本貼り 上昇高さ1
CON
STA.L EM14254            ; RB8目標値（下位）10
CON
LDA.L DM20532            ; UT5-2 本貼り 上昇高さ2
CON
STA.L EM14854            ; RB9目標値（下位）10
CON
JMP @MR2106
MRD
LD<> DM20500 #0          ; UT5-1在荷
AND= DM20502 #0          ; UT5-2在荷
ANL
LDA.L DM20530            ; UT5-1 本貼り 上昇高さ1
CON
STA.L EM14254            ; RB8目標値（下位）10
CON
JMP @MR2106
MPP
LD= DM20500 #0           ; UT5-1在荷
AND<> DM20502 #0         ; UT5-2在荷
ANL
LDA.L DM20532            ; UT5-2 本貼り 上昇高さ2
CON
STA.L EM14854            ; RB9目標値（下位）10
CON
JMP @MR2106
STG @MR2106
SET @MR800               ; Pause disable
CON
MPS
LD<> DM20500 #0          ; UT5-1在荷
AND<> DM20502 #0         ; UT5-2在荷
ANL
SET MR5008               ; RB8 本貼1上下 上昇 移動要求
CON
SET MR5108               ; RB9 本貼2上下 上昇 移動要求
CON
JMP @MR2107
MRD
LD<> DM20500 #0          ; UT5-1在荷
AND= DM20502 #0          ; UT5-2在荷
ANL
SET MR5008               ; RB8 本貼1上下 上昇 移動要求
CON
JMP @MR2107
MPP
LD= DM20500 #0           ; UT5-1在荷
AND<> DM20502 #0         ; UT5-2在荷
ANL
SET MR5108               ; RB9 本貼2上下 上昇 移動要求
CON
JMP @MR2107
STG @MR2107
MPS
LD<> DM20500 #0          ; UT5-1在荷
AND<> DM20502 #0         ; UT5-2在荷
AND MR5009               ; RB8 本貼1上下 上昇 移動完了
AND MR5109               ; RB9 本貼2上下 上昇 移動完了
ANL
RES MR5009               ; RB8 本貼1上下 上昇 移動完了
CON
RES MR5109               ; RB9 本貼2上下 上昇 移動完了
CON
JMP @MR2108
MRD
LD<> DM20500 #0          ; UT5-1在荷
AND= DM20502 #0          ; UT5-2在荷
AND MR5009               ; RB8 本貼1上下 上昇 移動完了
ANL
RES MR5009               ; RB8 本貼1上下 上昇 移動完了
CON
JMP @MR2108
MPP
LD= DM20500 #0           ; UT5-1在荷
AND<> DM20502 #0         ; UT5-2在荷
AND MR5109               ; RB9 本貼2上下 上昇 移動完了
ANL
RES MR5109               ; RB9 本貼2上下 上昇 移動完了
CON
JMP @MR2108
STG @MR2108
MPS
LDB @MR006               ; STEP動作中
AND @MR1702              ; ﾗﾍﾞﾙ本貼 動作完了
ANL
RES @MR1702              ; ﾗﾍﾞﾙ本貼 動作完了
CON
JMP @MR2109
MPP
AND @MR006               ; STEP動作中
JMP @MR3408              ; STEP動作のみ
;STEP only
STG @MR3408              ; STEP動作のみ
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
MPS
AND= DM19500 #1          ; UT5ﾁｬｯｸNo.
SET MR7800               ; ﾒｲﾝINDEX ﾁｬｯｸ1閉
CON
RES MR7801               ; ﾒｲﾝINDEX ﾁｬｯｸ1開
CON
JMP @MR3409
MRD
AND= DM19500 #2          ; UT5ﾁｬｯｸNo.
SET MR7802               ; ﾒｲﾝINDEX ﾁｬｯｸ2閉
CON
RES MR7803               ; ﾒｲﾝINDEX ﾁｬｯｸ2開
CON
JMP @MR3409
MRD
AND= DM19500 #3          ; UT5ﾁｬｯｸNo.
SET MR7804               ; ﾒｲﾝINDEX ﾁｬｯｸ3閉
CON
RES MR7805               ; ﾒｲﾝINDEX ﾁｬｯｸ3開
CON
JMP @MR3409
MRD
AND= DM19500 #4          ; UT5ﾁｬｯｸNo.
SET MR7806               ; ﾒｲﾝINDEX ﾁｬｯｸ4閉
CON
RES MR7807               ; ﾒｲﾝINDEX ﾁｬｯｸ4開
CON
JMP @MR3409
MRD
AND= DM19500 #5          ; UT5ﾁｬｯｸNo.
SET MR7808               ; ﾒｲﾝINDEX ﾁｬｯｸ5閉
CON
RES MR7809               ; ﾒｲﾝINDEX ﾁｬｯｸ5開
CON
JMP @MR3409
MRD
AND= DM19500 #6          ; UT5ﾁｬｯｸNo.
SET MR7810               ; ﾒｲﾝINDEX ﾁｬｯｸ6閉
CON
RES MR7811               ; ﾒｲﾝINDEX ﾁｬｯｸ6開
CON
JMP @MR3409
MRD
AND= DM19500 #7          ; UT5ﾁｬｯｸNo.
SET MR7812               ; ﾒｲﾝINDEX ﾁｬｯｸ7閉
CON
RES MR7813               ; ﾒｲﾝINDEX ﾁｬｯｸ7開
CON
JMP @MR3409
MPP
AND= DM19500 #8          ; UT5ﾁｬｯｸNo.
SET MR7814               ; ﾒｲﾝINDEX ﾁｬｯｸ8閉
CON
RES MR7815               ; ﾒｲﾝINDEX ﾁｬｯｸ8開
CON
JMP @MR3409
STG @MR3409
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
ANB @MR1702              ; ﾗﾍﾞﾙ本貼 動作完了
SET @MR1700              ; ﾗﾍﾞﾙ本貼 動作要求
CON
JMP @MR3410
STG @MR3410
AND @MR1702              ; ﾗﾍﾞﾙ本貼 動作完了
RES @MR1702              ; ﾗﾍﾞﾙ本貼 動作完了
CON
JMP @MR2109
STG @MR2109
MPS
AND= DM19500 #1          ; UT5ﾁｬｯｸNo.
RES MR7800               ; ﾒｲﾝINDEX ﾁｬｯｸ1閉
CON
SET MR7801               ; ﾒｲﾝINDEX ﾁｬｯｸ1開
CON
JMP @MR2110
MRD
AND= DM19500 #2          ; UT5ﾁｬｯｸNo.
RES MR7802               ; ﾒｲﾝINDEX ﾁｬｯｸ2閉
CON
SET MR7803               ; ﾒｲﾝINDEX ﾁｬｯｸ2開
CON
JMP @MR2110
MRD
AND= DM19500 #3          ; UT5ﾁｬｯｸNo.
RES MR7804               ; ﾒｲﾝINDEX ﾁｬｯｸ3閉
CON
SET MR7805               ; ﾒｲﾝINDEX ﾁｬｯｸ3開
CON
JMP @MR2110
MRD
AND= DM19500 #4          ; UT5ﾁｬｯｸNo.
RES MR7806               ; ﾒｲﾝINDEX ﾁｬｯｸ4閉
CON
SET MR7807               ; ﾒｲﾝINDEX ﾁｬｯｸ4開
CON
JMP @MR2110
MRD
AND= DM19500 #5          ; UT5ﾁｬｯｸNo.
RES MR7808               ; ﾒｲﾝINDEX ﾁｬｯｸ5閉
CON
SET MR7809               ; ﾒｲﾝINDEX ﾁｬｯｸ5開
CON
JMP @MR2110
MRD
AND= DM19500 #6          ; UT5ﾁｬｯｸNo.
RES MR7810               ; ﾒｲﾝINDEX ﾁｬｯｸ6閉
CON
SET MR7811               ; ﾒｲﾝINDEX ﾁｬｯｸ6開
CON
JMP @MR2110
MRD
AND= DM19500 #7          ; UT5ﾁｬｯｸNo.
RES MR7812               ; ﾒｲﾝINDEX ﾁｬｯｸ7閉
CON
SET MR7813               ; ﾒｲﾝINDEX ﾁｬｯｸ7開
CON
JMP @MR2110
MPP
AND= DM19500 #8          ; UT5ﾁｬｯｸNo.
RES MR7814               ; ﾒｲﾝINDEX ﾁｬｯｸ8閉
CON
SET MR7815               ; ﾒｲﾝINDEX ﾁｬｯｸ8開
CON
JMP @MR2110
STG @MR2110
ANB R50300               ; Pause
ANB R51705               ; UT5異常
TMR @1 #3                ; INDEXﾁｬｯｸ 開ﾃﾞｨﾚｲ
CON
AND @T1                  ; INDEXﾁｬｯｸ 開ﾃﾞｨﾚｲ
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR2111
STG @MR2111
SET MR5000               ; RB8 本貼1上下 下降 移動要求
CON
SET MR5100               ; RB9 本貼2上下 下降 移動要求
CON
JMP @MR2112
STG @MR2112
AND MR5001               ; RB8 本貼1上下 下降 移動完了
AND MR5101               ; RB9 本貼2上下 下降 移動完了
RES @MR800               ; Pause disable
CON
RES MR5001               ; RB8 本貼1上下 下降 移動完了
CON
RES MR5101               ; RB9 本貼2上下 下降 移動完了
CON
JMP @MR2113
STG @MR2113
MPS
LD<> DM20500 #0          ; UT5-1在荷
AND<> DM20502 #0         ; UT5-2在荷
ANL
DW #5 DM20500            ; UT5-1在荷
CON
DW #5 DM20502            ; UT5-2在荷
CON
JMP @MR2114
MRD
LD<> DM20500 #0          ; UT5-1在荷
AND= DM20502 #0          ; UT5-2在荷
ANL
DW #5 DM20500            ; UT5-1在荷
CON
JMP @MR2114
MPP
LD= DM20500 #0           ; UT5-1在荷
AND<> DM20502 #0         ; UT5-2在荷
ANL
DW #5 DM20502            ; UT5-2在荷
CON
JMP @MR2114
STG @MR2114
ANB R50300               ; Pause
ANB R51705               ; UT5異常
MPS
AND= DM19500 #1          ; UT5ﾁｬｯｸNo.
RES MR7801               ; ﾒｲﾝINDEX ﾁｬｯｸ1開
CON
SET MR7800               ; ﾒｲﾝINDEX ﾁｬｯｸ1閉
CON
JMP @MR2115
MRD
AND= DM19500 #2          ; UT5ﾁｬｯｸNo.
RES MR7803               ; ﾒｲﾝINDEX ﾁｬｯｸ2開
CON
SET MR7802               ; ﾒｲﾝINDEX ﾁｬｯｸ2閉
CON
JMP @MR2115
MRD
AND= DM19500 #3          ; UT5ﾁｬｯｸNo.
RES MR7805               ; ﾒｲﾝINDEX ﾁｬｯｸ3開
CON
SET MR7804               ; ﾒｲﾝINDEX ﾁｬｯｸ3閉
CON
JMP @MR2115
MRD
AND= DM19500 #4          ; UT5ﾁｬｯｸNo.
RES MR7807               ; ﾒｲﾝINDEX ﾁｬｯｸ4開
CON
SET MR7806               ; ﾒｲﾝINDEX ﾁｬｯｸ4閉
CON
JMP @MR2115
MRD
AND= DM19500 #5          ; UT5ﾁｬｯｸNo.
RES MR7809               ; ﾒｲﾝINDEX ﾁｬｯｸ5開
CON
SET MR7808               ; ﾒｲﾝINDEX ﾁｬｯｸ5閉
CON
JMP @MR2115
MRD
AND= DM19500 #6          ; UT5ﾁｬｯｸNo.
RES MR7811               ; ﾒｲﾝINDEX ﾁｬｯｸ6開
CON
SET MR7810               ; ﾒｲﾝINDEX ﾁｬｯｸ6閉
CON
JMP @MR2115
MRD
AND= DM19500 #7          ; UT5ﾁｬｯｸNo.
RES MR7813               ; ﾒｲﾝINDEX ﾁｬｯｸ7開
CON
SET MR7812               ; ﾒｲﾝINDEX ﾁｬｯｸ7閉
CON
JMP @MR2115
MPP
AND= DM19500 #8          ; UT5ﾁｬｯｸNo.
RES MR7815               ; ﾒｲﾝINDEX ﾁｬｯｸ8開
CON
SET MR7814               ; ﾒｲﾝINDEX ﾁｬｯｸ8閉
CON
JMP @MR2115
STG @MR2115
ANB R50300               ; Pause
ANB R51705               ; UT5異常
TMR @2 #3                ; INDEXﾁｬｯｸ 閉ﾃﾞｨﾚｲ
CON
AND @T2                  ; INDEXﾁｬｯｸ 閉ﾃﾞｨﾚｲ
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR2910              ; 動作終了
;An End of Operation
;動作終了
;
STG @MR2910              ; 動作終了
RES MR405                ; UT5 着座/検知 無効ﾀｲﾐﾝｸﾞ
CON
ANB R50300               ; Pause
ANB R51705               ; UT5異常
MPS
AND R50001               ; AUTOﾓｰﾄﾞ
SET R51905               ; UT5 1ｻｲｸﾙ終了
CON
JMP @MR2911
MPP
AND R50002               ; STEPﾓｰﾄﾞ
SET R50009               ; HOLDRQ
CON
SET R51905               ; UT5 1ｻｲｸﾙ終了
CON
JMP @MR2911
STG @MR2911
ANB R50209               ; 動作開始
MPS
AND R50001               ; AUTOﾓｰﾄﾞ
MPS
LDB R50000               ; HOLD
AND R50409               ; ｻｲｸﾙ完了
ANL
SET @MR2000              ; UT5 AUTO START
CON
ENDS
MPP
AND R50000               ; HOLD
JMP @MR2912
MPP
LD R50002                ; STEPﾓｰﾄﾞ
AND R50000               ; HOLD
ANL
JMP @MR2912
;Processing of end
;終了処理
;
STG @MR2912
ANB R50300               ; Pause
ANB R51705               ; UT5異常
MPS
AND @MR2001              ; 自動運転中
SET @MR2915              ; 自動運転完了
CON
ENDS
MPP
AND @MR006               ; STEP動作中
RES @MR006               ; STEP動作中
CON
SET @MR3415              ; STEP運転終了
CON
ENDS
;<h1/>STEP
LD R50002                ; STEPﾓｰﾄﾞ
ANB R50300               ; Pause
ANB R51805               ; UT5 Do
SET @MR006               ; STEP動作中
CON
SET R51805               ; UT5 Do
CON
SET @MR3400
STG @MR3400
ANB R50300               ; Pause
ANB R51705               ; UT5異常
MPS
LD LR40600               ; STEP UT5-0 selection lamp
OR LR40601               ; STEP UT5-1 selection lamp
ANL
JMP @MR3401
MPP
LDB LR40600              ; STEP UT5-0 selection lamp
ANB LR40601              ; STEP UT5-1 selection lamp
ANL
JMP @MR3401
STG @MR3401
ANB R50300               ; Pause
ANB R51705               ; UT5異常
MPS
LD R4808                 ; INDEX ﾁｬｯｸ5-1 ﾜｰｸ有無
AND R4809                ; INDEX ﾁｬｯｸ5-2 ﾜｰｸ有無
ANL
DW #4 DM20500            ; UT5-1在荷
CON
DW #4 DM20502            ; UT5-2在荷
CON
SET @MR2100              ; 通常動作
CON
JMP @MR3413
MRD
LD R4808                 ; INDEX ﾁｬｯｸ5-1 ﾜｰｸ有無
ANB R4809                ; INDEX ﾁｬｯｸ5-2 ﾜｰｸ有無
ANL
DW #4 DM20500            ; UT5-1在荷
CON
SET @MR2100              ; 通常動作
CON
JMP @MR3413
MRD
LDB R4808                ; INDEX ﾁｬｯｸ5-1 ﾜｰｸ有無
AND R4809                ; INDEX ﾁｬｯｸ5-2 ﾜｰｸ有無
ANL
DW #4 DM20502            ; UT5-2在荷
CON
SET @MR2100              ; 通常動作
CON
JMP @MR3413
MPP
LDB R4808                ; INDEX ﾁｬｯｸ5-1 ﾜｰｸ有無
ANB R4809                ; INDEX ﾁｬｯｸ5-2 ﾜｰｸ有無
ANL
SET @MR2910              ; 動作終了
CON
JMP @MR3413
STG @MR3413
ANB R50300               ; Pause
ANB R51705               ; UT5異常
@SET LR000               ; Step/Manual 操作記憶
CON
ANB @MR006               ; STEP動作中
MPS
AND= DM19500 #1          ; UT5ﾁｬｯｸNo.
SET MR7801               ; ﾒｲﾝINDEX ﾁｬｯｸ1開
CON
RES MR7800               ; ﾒｲﾝINDEX ﾁｬｯｸ1閉
CON
JMP @MR3414
MRD
AND= DM19500 #2          ; UT5ﾁｬｯｸNo.
SET MR7803               ; ﾒｲﾝINDEX ﾁｬｯｸ2開
CON
RES MR7802               ; ﾒｲﾝINDEX ﾁｬｯｸ2閉
CON
JMP @MR3414
MRD
AND= DM19500 #3          ; UT5ﾁｬｯｸNo.
SET MR7805               ; ﾒｲﾝINDEX ﾁｬｯｸ3開
CON
RES MR7804               ; ﾒｲﾝINDEX ﾁｬｯｸ3閉
CON
JMP @MR3414
MRD
AND= DM19500 #4          ; UT5ﾁｬｯｸNo.
SET MR7807               ; ﾒｲﾝINDEX ﾁｬｯｸ4開
CON
RES MR7806               ; ﾒｲﾝINDEX ﾁｬｯｸ4閉
CON
JMP @MR3414
MRD
AND= DM19500 #5          ; UT5ﾁｬｯｸNo.
SET MR7809               ; ﾒｲﾝINDEX ﾁｬｯｸ5開
CON
RES MR7808               ; ﾒｲﾝINDEX ﾁｬｯｸ5閉
CON
JMP @MR3414
MRD
AND= DM19500 #6          ; UT5ﾁｬｯｸNo.
SET MR7811               ; ﾒｲﾝINDEX ﾁｬｯｸ6開
CON
RES MR7810               ; ﾒｲﾝINDEX ﾁｬｯｸ6閉
CON
JMP @MR3414
MRD
AND= DM19500 #7          ; UT5ﾁｬｯｸNo.
SET MR7813               ; ﾒｲﾝINDEX ﾁｬｯｸ7開
CON
RES MR7812               ; ﾒｲﾝINDEX ﾁｬｯｸ7閉
CON
JMP @MR3414
MPP
AND= DM19500 #8          ; UT5ﾁｬｯｸNo.
SET MR7815               ; ﾒｲﾝINDEX ﾁｬｯｸ8開
CON
RES MR7814               ; ﾒｲﾝINDEX ﾁｬｯｸ8閉
CON
JMP @MR3414
STG @MR3414
ANB R50300               ; Pause
ANB R51705               ; UT5異常
DW #0 DM20500            ; UT5-1在荷
CON
DW #0 DM20502            ; UT5-2在荷
CON
ENDS
LDB R50003               ; HOMEﾓｰﾄﾞ
ANB R50001               ; AUTOﾓｰﾄﾞ
ANB R50002               ; STEPﾓｰﾄﾞ
AND @MR3415              ; STEP運転終了
RES R51805               ; UT5 Do
CON
RES @MR3415              ; STEP運転終了
;<h1/>Subrutine
;ｻﾌﾞﾙｰﾁﾝ
;
;RB8 final pasting1 down 
STG MR5000               ; RB8 本貼1上下 下降 移動要求
SET MR5002               ; RB8 本貼1上下 下降 移動中
CON
DW #5 EM1314             ; RB8 本貼1上下 指令POS
CON
AND DM10563.1            ; RB8 本貼1上下 原点復帰完了
AND MR3007               ; RB8 本貼1上下 起動IL
SET R35700               ; RB8 本貼1上下 移動要求
CON
JMP @MR1501
STG @MR1501
AND R35701               ; RB8 本貼1上下 移動完了
AND T2259                ; RB8 本貼1上下 POS5 (下降)
AND= EM1315 #5           ; RB8 本貼1上下 現在POS
RES MR5002               ; RB8 本貼1上下 下降 移動中
CON
SET MR5001               ; RB8 本貼1上下 下降 移動完了
CON
RES R35701               ; RB8 本貼1上下 移動完了
CON
ENDS
;RB8 final pasting1 up 
STG MR5008               ; RB8 本貼1上下 上昇 移動要求
SET MR5010               ; RB8 本貼1上下 上昇 移動中
CON
DW #10 EM1314            ; RB8 本貼1上下 指令POS
CON
AND DM10563.1            ; RB8 本貼1上下 原点復帰完了
AND MR3007               ; RB8 本貼1上下 起動IL
SET R35700               ; RB8 本貼1上下 移動要求
CON
JMP @MR1509
STG @MR1509
AND R35701               ; RB8 本貼1上下 移動完了
AND T2264                ; RB8 本貼1上下 POS10 (上昇)
AND= EM1315 #10          ; RB8 本貼1上下 現在POS
RES MR5010               ; RB8 本貼1上下 上昇 移動中
CON
SET MR5009               ; RB8 本貼1上下 上昇 移動完了
CON
RES R35701               ; RB8 本貼1上下 移動完了
CON
ENDS
;RB8 final pasting2 down 
STG MR5100               ; RB9 本貼2上下 下降 移動要求
SET MR5102               ; RB9 本貼2上下 下降 移動中
CON
DW #5 EM1316             ; RB9 本貼2上下 指令POS
CON
AND DM10571.1            ; RB9 本貼2上下 原点復帰完了
AND MR3008               ; RB9 本貼2上下 起動IL
SET R35800               ; RB9 本貼2上下 移動要求
CON
JMP @MR1601
STG @MR1601
AND R35801               ; RB9 本貼2上下 移動完了
AND T2294                ; RB9 本貼2上下 POS5 (下降)
AND= EM1317 #5           ; RB9 本貼2上下 現在POS
RES MR5102               ; RB9 本貼2上下 下降 移動中
CON
SET MR5101               ; RB9 本貼2上下 下降 移動完了
CON
RES R35801               ; RB9 本貼2上下 移動完了
CON
ENDS
;RB9 final pasting2 down 
STG MR5108               ; RB9 本貼2上下 上昇 移動要求
SET MR5110               ; RB9 本貼2上下 上昇 移動中
CON
DW #10 EM1316            ; RB9 本貼2上下 指令POS
CON
AND DM10571.1            ; RB9 本貼2上下 原点復帰完了
AND MR3008               ; RB9 本貼2上下 起動IL
SET R35800               ; RB9 本貼2上下 移動要求
CON
JMP @MR1609
STG @MR1609
AND R35801               ; RB9 本貼2上下 移動完了
AND T2299                ; RB9 本貼2上下 POS10 (上昇)
AND= EM1317 #10          ; RB9 本貼2上下 現在POS
RES MR5110               ; RB9 本貼2上下 上昇 移動中
CON
SET MR5109               ; RB9 本貼2上下 上昇 移動完了
CON
RES R35801               ; RB9 本貼2上下 移動完了
CON
ENDS
;label final pusshing forward→backward
STG @MR1700              ; ﾗﾍﾞﾙ本貼 動作要求
RES MR8309               ; ﾗﾍﾞﾙ本貼り 後退
CON
SET MR8308               ; ﾗﾍﾞﾙ本貼り 前進
CON
AND R5310                ; ﾗﾍﾞﾙ本貼り 前進限
TMH @5 #25               ; ﾗﾍﾞﾙ本貼り 前進限
CON
AND @T5                  ; ﾗﾍﾞﾙ本貼り 前進限
JMP @MR1701
STG @MR1701
RES MR8308               ; ﾗﾍﾞﾙ本貼り 前進
CON
SET MR8309               ; ﾗﾍﾞﾙ本貼り 後退
CON
AND R5311                ; ﾗﾍﾞﾙ本貼り 後退限
SET @MR1702              ; ﾗﾍﾞﾙ本貼 動作完了
CON
ENDS
;<h1/>Error display
;ｴﾗｰ表示
;
;<h1/>UT5 Pause disable
;UT5 ﾎﾟｰｽﾞ禁止
;
LDB @MR800               ; Pause disable
INV
OUT R51605               ; PACK UT5
END
ENDH
