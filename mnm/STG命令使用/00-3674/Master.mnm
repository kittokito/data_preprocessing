DEVICE:53
;MODULE:Master
;MODULE_TYPE:0
;Device net nodo check
BLDB DM10014 #0          ; 正常通信ﾉｰﾄﾞ一覧(0-15)
BAND DM10014 #1          ; 正常通信ﾉｰﾄﾞ一覧(0-15)
BAND DM10014 #2          ; 正常通信ﾉｰﾄﾞ一覧(0-15)
BAND DM10014 #3          ; 正常通信ﾉｰﾄﾞ一覧(0-15)
BAND DM10014 #4          ; 正常通信ﾉｰﾄﾞ一覧(0-15)
BAND DM10014 #5          ; 正常通信ﾉｰﾄﾞ一覧(0-15)
BAND DM10014 #6          ; 正常通信ﾉｰﾄﾞ一覧(0-15)
BAND DM10014 #7          ; 正常通信ﾉｰﾄﾞ一覧(0-15)
BAND DM10014 #8          ; 正常通信ﾉｰﾄﾞ一覧(0-15)
BAND DM10014 #9          ; 正常通信ﾉｰﾄﾞ一覧(0-15)
BAND DM10014 #10         ; 正常通信ﾉｰﾄﾞ一覧(0-15)
BAND DM10014 #11         ; 正常通信ﾉｰﾄﾞ一覧(0-15)
BAND DM10014 #12         ; 正常通信ﾉｰﾄﾞ一覧(0-15)
BAND DM10014 #13         ; 正常通信ﾉｰﾄﾞ一覧(0-15)
BAND DM10014 #14         ; 正常通信ﾉｰﾄﾞ一覧(0-15)
BAND DM10014 #15         ; 正常通信ﾉｰﾄﾞ一覧(0-15)
BAND DM10015 #0          ; 正常通信ﾉｰﾄﾞ一覧(16-31)
BAND DM10015 #1          ; 正常通信ﾉｰﾄﾞ一覧(16-31)
BAND DM10015 #2          ; 正常通信ﾉｰﾄﾞ一覧(16-31)
BAND DM10015 #3          ; 正常通信ﾉｰﾄﾞ一覧(16-31)
BAND DM10015 #4          ; 正常通信ﾉｰﾄﾞ一覧(16-31)
BAND DM10015 #5          ; 正常通信ﾉｰﾄﾞ一覧(16-31)
BAND DM10015 #6          ; 正常通信ﾉｰﾄﾞ一覧(16-31)
BAND DM10015 #7          ; 正常通信ﾉｰﾄﾞ一覧(16-31)
BAND DM10015 #8          ; 正常通信ﾉｰﾄﾞ一覧(16-31)
BAND DM10015 #9          ; 正常通信ﾉｰﾄﾞ一覧(16-31)
BAND DM10015 #10         ; 正常通信ﾉｰﾄﾞ一覧(16-31)
BAND DM10015 #11         ; 正常通信ﾉｰﾄﾞ一覧(16-31)
BAND DM10015 #12         ; 正常通信ﾉｰﾄﾞ一覧(16-31)
BAND DM10015 #13         ; 正常通信ﾉｰﾄﾞ一覧(16-31)
BAND DM10015 #14         ; 正常通信ﾉｰﾄﾞ一覧(16-31)
BAND DM10015 #15         ; 正常通信ﾉｰﾄﾞ一覧(16-31)
BAND DM10016 #0          ; 正常通信ﾉｰﾄﾞ一覧(32-47)
BAND DM10016 #1          ; 正常通信ﾉｰﾄﾞ一覧(32-47)
BANB DM10016 #2          ; 正常通信ﾉｰﾄﾞ一覧(32-47)
BANB DM10016 #3          ; 正常通信ﾉｰﾄﾞ一覧(32-47)
BANB DM10016 #4          ; 正常通信ﾉｰﾄﾞ一覧(32-47)
BANB DM10016 #5          ; 正常通信ﾉｰﾄﾞ一覧(32-47)
BANB DM10016 #6          ; 正常通信ﾉｰﾄﾞ一覧(32-47)
BANB DM10016 #7          ; 正常通信ﾉｰﾄﾞ一覧(32-47)
BANB DM10016 #8          ; 正常通信ﾉｰﾄﾞ一覧(32-47)
BAND DM10016 #9          ; 正常通信ﾉｰﾄﾞ一覧(32-47)
BAND DM10016 #10         ; 正常通信ﾉｰﾄﾞ一覧(32-47)
BAND DM10016 #11         ; 正常通信ﾉｰﾄﾞ一覧(32-47)
BANB DM10016 #12         ; 正常通信ﾉｰﾄﾞ一覧(32-47)
BANB DM10016 #13         ; 正常通信ﾉｰﾄﾞ一覧(32-47)
BANB DM10016 #14         ; 正常通信ﾉｰﾄﾞ一覧(32-47)
BANB DM10016 #15         ; 正常通信ﾉｰﾄﾞ一覧(32-47)
BANB DM10017 #0          ; 正常通信ﾉｰﾄﾞ一覧(48-63)
BANB DM10017 #1          ; 正常通信ﾉｰﾄﾞ一覧(48-63)
BAND DM10017 #2          ; 正常通信ﾉｰﾄﾞ一覧(48-63)
BANB DM10017 #3          ; 正常通信ﾉｰﾄﾞ一覧(48-63)
BANB DM10017 #4          ; 正常通信ﾉｰﾄﾞ一覧(48-63)
BANB DM10017 #5          ; 正常通信ﾉｰﾄﾞ一覧(48-63)
BANB DM10017 #6          ; 正常通信ﾉｰﾄﾞ一覧(48-63)
BANB DM10017 #7          ; 正常通信ﾉｰﾄﾞ一覧(48-63)
BANB DM10017 #8          ; 正常通信ﾉｰﾄﾞ一覧(48-63)
BANB DM10017 #9          ; 正常通信ﾉｰﾄﾞ一覧(48-63)
BANB DM10017 #10         ; 正常通信ﾉｰﾄﾞ一覧(48-63)
BANB DM10017 #11         ; 正常通信ﾉｰﾄﾞ一覧(48-63)
BANB DM10017 #12         ; 正常通信ﾉｰﾄﾞ一覧(48-63)
BANB DM10017 #13         ; 正常通信ﾉｰﾄﾞ一覧(48-63)
BANB DM10017 #14         ; 正常通信ﾉｰﾄﾞ一覧(48-63)
BANB DM10017 #15         ; 正常通信ﾉｰﾄﾞ一覧(48-63)
TMR #202 #10             ; device net ﾉｰﾄﾞ確認
LD CR2002                ; 常時ON
LD R59812                ; TP#1 左上SW
AND R59815               ; TP#1 右下SW
LD R59813                ; TP#1 左下SW
AND R59814               ; TP#1 右上SW
ORL
ANL
MPS
TMR #200 #10
MPP
AND T200
MOV #500 DM3001          ; 切替 画面No.
LD= DM3000 #4            ; 表示中 画面No.
AND R59815               ; TP#1 右下SW
MOV #500 DM3001          ; 切替 画面No.
LD R1103                 ; ｴﾗｰﾘｾｯﾄSW
ANB R50200               ; INDEX Do
ANB R50100               ; PACK INDEX
ANB R50101               ; PACK UT1
ANB R50102               ; PACK UT2
ANB R50103               ; PACK UT3
ANB R50104               ; PACK UT4
ANB R51605               ; PACK UT5
ANB R51606               ; PACK UT6
ANB R51607               ; PACK UT7
ANB R51608               ; PACK UT8
TMR #210 #100            ; ALL RESET TIMER
LD MR014
OR T210                  ; ALL RESET TIMER
FMOV #0 DM20100 #900     ; UT1-1在荷
RES MR7800               ; ﾒｲﾝINDEX ﾁｬｯｸ1閉
CON
RES MR7802               ; ﾒｲﾝINDEX ﾁｬｯｸ2閉
CON
RES MR7804               ; ﾒｲﾝINDEX ﾁｬｯｸ3閉
CON
RES MR7806               ; ﾒｲﾝINDEX ﾁｬｯｸ4閉
CON
RES MR7808               ; ﾒｲﾝINDEX ﾁｬｯｸ5閉
CON
RES MR7810               ; ﾒｲﾝINDEX ﾁｬｯｸ6閉
CON
RES MR7812               ; ﾒｲﾝINDEX ﾁｬｯｸ7閉
CON
RES MR7814               ; ﾒｲﾝINDEX ﾁｬｯｸ8閉
CON
SET MR7801               ; ﾒｲﾝINDEX ﾁｬｯｸ1開
CON
SET MR7803               ; ﾒｲﾝINDEX ﾁｬｯｸ2開
CON
SET MR7805               ; ﾒｲﾝINDEX ﾁｬｯｸ3開
CON
SET MR7807               ; ﾒｲﾝINDEX ﾁｬｯｸ4開
CON
SET MR7809               ; ﾒｲﾝINDEX ﾁｬｯｸ5開
CON
SET MR7811               ; ﾒｲﾝINDEX ﾁｬｯｸ6開
CON
SET MR7813               ; ﾒｲﾝINDEX ﾁｬｯｸ7開
CON
SET MR7815               ; ﾒｲﾝINDEX ﾁｬｯｸ8開
CON
RES MR104                ; 4UT ｲﾝﾃﾞｯｸｽﾃﾞｰﾀｼﾌﾄ禁止
CON
RES LR100                ; 4st ﾒｲﾝｲﾝﾃﾞｯｸｽ旋回完了FLG
CON
RES LR104                ; ﾗﾍﾞﾙﾌﾟﾘﾝﾀｰ先行ﾗﾍﾞﾙ送り開始
CON
SET R50011               ; TRAP
LD R50010                ; 非常停止
ZRES @MR000 @MR915       ; AUTOﾓｰﾄﾞ PLS
LD DM2000.0              ; 上流 H/S 無
OUT MR001                ; 上流 H/S 無
LD DM2000.1              ; 下流 H/S 無
OUT MR008                ; 下流 H/S 無
LD DM2000.2              ; UT3 重量/T-code 強制OK
OUT MR002                ; UT3 重量/T-code 強制OK
LD CR2003                ; 常時OFF
OUT MR003                ; ﾗﾍﾞﾙﾌﾟﾘﾝﾀ I/Fなし
LD DM2000.3              ; ﾌｨﾙﾑ皺検査 強制OK
OUT MR005                ; ﾌｨﾙﾑ皺検査 強制OK
LD DM2000.4              ; 7st 本締ﾄﾙｸ判定無効
OUT MR006                ; 7st 本締ﾄﾙｸ判定無効
LD DM2000.5              ; CAP判別無効
OUT MR007                ; CAP判別無効
LD DM2000.6              ; UT2 重量範囲異常無効
OUT MR009                ; UT2 重量範囲異常無効
LDB DM2000.0             ; 上流 H/S 無
ANB DM2000.1             ; 下流 H/S 無
ANB DM2000.2             ; UT3 重量/T-code 強制OK
ANB DM2000.3             ; ﾌｨﾙﾑ皺検査 強制OK
ANB DM2000.4             ; 7st 本締ﾄﾙｸ判定無効
ANB DM2000.5             ; CAP判別無効
ANB DM2000.6             ; UT2 重量範囲異常無効
ANB DM2000.7
INV
OUT MR115                ; M/C ﾊﾟﾗﾒｰﾀｰ設定中
LD CR2002                ; 常時ON
OUT MR215                ; 4st Y軸 2次関数 FLG
LD CR2002                ; 常時ON
MPS
LDA.F FM20               ; 重量規格 （Min)　ﾎｽﾄPCより
CON
MUL.F +100
CON
INTG.D
CON
STA.L EM31000            ; 重量規格 （Min)
MPP
LDA.F FM30               ; 重量規格 （Max） ﾎｽﾄPCより
CON
MUL.F +100
CON
INTG.D
CON
STA.L EM31010            ; 重量規格 （Max）
;Task Control / タスク制御
;Task Control / タスク制御
LD R50001                ; AUTOﾓｰﾄﾞ
DIFU @MR000              ; AUTOﾓｰﾄﾞ PLS
LDP @MR000               ; AUTOﾓｰﾄﾞ PLS
ORP @MR004
ORP R50003               ; HOMEﾓｰﾄﾞ
ANB R50209               ; 動作開始
RES @MR004
CON
SET R50209               ; 動作開始
;Task Controll / タスク制御
LDP R50209               ; 動作開始
LD R50001                ; AUTOﾓｰﾄﾞ
OR R50003                ; HOMEﾓｰﾄﾞ
ANL
MDSTRT UT1
MDSTRT UT2
MDSTRT UT3
MDSTRT UT4
MDSTRT UT5
MDSTRT UT6
MDSTRT UT7
MDSTRT UT8
RES R50409               ; ｻｲｸﾙ完了
CON
SET @MR001
STG @MR001
AND R51901               ; UT1 1ｻｲｸﾙ終了
AND R51902               ; UT2 1ｻｲｸﾙ終了
AND R51903               ; UT3 1ｻｲｸﾙ終了
AND R51904               ; UT4 1ｻｲｸﾙ終了
AND R51905               ; UT5 1ｻｲｸﾙ終了
AND R51906               ; UT6 1ｻｲｸﾙ終了
AND R51907               ; UT7 1ｻｲｸﾙ終了
AND R51908               ; UT8 1ｻｲｸﾙ終了
TMH @1 #1
CON
AND @T1
JMP @MR002
MDSTRT Index
STG @MR002
AND R51900               ; INDEX 1ｻｲｸﾙ終了
RES R51901               ; UT1 1ｻｲｸﾙ終了
CON
RES R51902               ; UT2 1ｻｲｸﾙ終了
CON
RES R51903               ; UT3 1ｻｲｸﾙ終了
CON
RES R51904               ; UT4 1ｻｲｸﾙ終了
CON
RES R51905               ; UT5 1ｻｲｸﾙ終了
CON
RES R51906               ; UT6 1ｻｲｸﾙ終了
CON
RES R51907               ; UT7 1ｻｲｸﾙ終了
CON
RES R51908               ; UT8 1ｻｲｸﾙ終了
CON
RES R51900               ; INDEX 1ｻｲｸﾙ終了
CON
SET R50409               ; ｻｲｸﾙ完了
CON
RES R50209               ; 動作開始
CON
JMP @MR003
MDSTOP Index
STG @MR003
ANB _Index
RES R50200               ; INDEX Do
CON
MPS
LD R50001                ; AUTOﾓｰﾄﾞ
ANB R50000               ; HOLD
ANL
SET @MR004
MPP
ENDS
;STOP Manegment/停止処理
LD R50001                ; AUTOﾓｰﾄﾞ
OR R50002                ; STEPﾓｰﾄﾞ
LDF R1003                ; AUTO SW
ORP R50009               ; HOLDRQ
ANL
ORP R50003               ; HOMEﾓｰﾄﾞ
SET R50000               ; HOLD
CON
RES R50009               ; HOLDRQ
LDB R50004               ; TASK DO
OR R50308                ; ﾀｽｸ停止待ち
RES R50001               ; AUTOﾓｰﾄﾞ
CON
RES R50002               ; STEPﾓｰﾄﾞ
LD R50003                ; HOMEﾓｰﾄﾞ
LDB R50004               ; TASK DO
OR R50308                ; ﾀｽｸ停止待ち
ANL
RES MR1013               ; INDEX 原点復帰
CON
RES R50003               ; HOMEﾓｰﾄﾞ
CON
SET R50007               ; 原点復帰完了
LD R1003                 ; AUTO SW
ANB R50004               ; TASK DO
AND LR000                ; Step/Manual 操作記憶
@RES R50007              ; 原点復帰完了
;Each UT Task Stop / 各UTタスク停止
LD R50001                ; AUTOﾓｰﾄﾞ
AND R50409               ; ｻｲｸﾙ完了
AND R50000               ; HOLD
LD R50002                ; STEPﾓｰﾄﾞ
OR R50003                ; HOMEﾓｰﾄﾞ
AND R50409               ; ｻｲｸﾙ完了
ORL
RES R50409               ; ｻｲｸﾙ完了
CON
RES R50209               ; 動作開始
CON
SET R50308               ; ﾀｽｸ停止待ち
LD R50308                ; ﾀｽｸ停止待ち
ANB R50201               ; UT1 Do
ANB R50202               ; UT2 Do
ANB R50203               ; UT3 Do
ANB R50204               ; UT4 Do
ANB R51805               ; UT5 Do
ANB R51806               ; UT6 Do
ANB R51807               ; UT7 Do
ANB R51808               ; UT8 Do
RES R50308               ; ﾀｽｸ停止待ち
CON
RES R50004               ; TASK DO
CON
RES R50000               ; HOLD
CON
DIFU @MR103
STG @MR103
JMP @MR104
MDSTOP UT1
MDSTOP UT2
MDSTOP UT3
MDSTOP UT4
MDSTOP UT5
MDSTOP UT6
MDSTOP UT7
MDSTOP UT8
MDSTOP Index
STG @MR104
ANB _UT1
ANB _UT2
ANB _UT3
ANB _UT4
ANB _UT5
ANB _UT6
ANB _UT7
ANB _UT8
ANB _Index
RES R50205               ; INDEX Do(STEP)
CON
ENDS
;＠モード選択　/　Select Mode
;ＨＯＭＥ
LD R45005                ; ﾒｲﾝ画面#2 表示中
ORB R50007               ; 原点復帰完了
AND R1004                ; 原点復帰SW
AND T202                 ; device net ﾉｰﾄﾞ確認
ANP R1001                ; ｽﾀｰﾄSW
DIFU @MR006
LD @MR006
ANB R50004               ; TASK DO
ANB R50008               ; Whole ERROR
ANB R50300               ; Pause
ANB R50010               ; 非常停止
AND R1100                ; ﾒｲﾝｴｱ
AND R1102                ; 安全ｶﾊﾞｰ
OUT @MR200
LD @MR200
SET R50003               ; HOMEﾓｰﾄﾞ
CON
SET R50004               ; TASK DO
;ＡＵＴＯ
LD R1003                 ; AUTO SW
ANP R1001                ; ｽﾀｰﾄSW
AND R45005               ; ﾒｲﾝ画面#2 表示中
DIFU @MR008
LD @MR008
AND R50007               ; 原点復帰完了
ANB R50004               ; TASK DO
ANB R50008               ; Whole ERROR
ANB R50300               ; Pause
ANB R50010               ; 非常停止
AND R1100                ; ﾒｲﾝｴｱ
AND R1102                ; 安全ｶﾊﾞｰ
MPS
AND R12003
MPS
AND R51209
OUT @MR204
MPP
ANB R51208
SET R51208
MRD
ANB R12003
OUT @MR205
MPP
OUT @MR207
LD @MR204
OR @MR205
OUT @MR009
CON
SET R50001               ; AUTOﾓｰﾄﾞ
CON
SET R50004               ; TASK DO
;ＳＴＥＰ
LD R1005                 ; MANU SW
ANP R1001                ; ｽﾀｰﾄSW
LD R45005                ; ﾒｲﾝ画面#2 表示中
OR R45006                ; ｽﾃｯﾌﾟ画面#4表示中
ANL
DIFU @MR010
LD @MR010
AND R50007               ; 原点復帰完了
ANB R50004               ; TASK DO
ANB R50008               ; Whole ERROR
ANB R50300               ; Pause
ANB R50010               ; 非常停止
AND R1100                ; ﾒｲﾝｴｱ
AND R1102                ; 安全ｶﾊﾞｰ
OUT @MR208
LD @MR208
SET R50002               ; STEPﾓｰﾄﾞ
CON
SET R50004               ; TASK DO
;STEP Operation / STEP動作
LD R50002                ; STEPﾓｰﾄﾞ
MPS
AND LR40001              ; UT1
MPS
ANB _UT1
MDSTRT UT1
MPP
AND R51901               ; UT1 1ｻｲｸﾙ終了
SET R50409               ; ｻｲｸﾙ完了
CON
RES R51901               ; UT1 1ｻｲｸﾙ終了
MRD
AND LR40002              ; UT2
MPS
ANB _UT2
MDSTRT UT2
MPP
AND R51902               ; UT2 1ｻｲｸﾙ終了
SET R50409               ; ｻｲｸﾙ完了
CON
RES R51902               ; UT2 1ｻｲｸﾙ終了
MRD
AND LR40003              ; UT3
MPS
ANB _UT3
MDSTRT UT3
MPP
AND R51903               ; UT3 1ｻｲｸﾙ終了
SET R50409               ; ｻｲｸﾙ完了
CON
RES R51903               ; UT3 1ｻｲｸﾙ終了
MRD
AND LR40004              ; UT4
MPS
ANB _UT4
MDSTRT UT4
MPP
AND R51904               ; UT4 1ｻｲｸﾙ終了
SET R50409               ; ｻｲｸﾙ完了
CON
RES R51904               ; UT4 1ｻｲｸﾙ終了
MRD
AND LR40005              ; UT5
MPS
ANB _UT5
MDSTRT UT5
MPP
AND R51905               ; UT5 1ｻｲｸﾙ終了
SET R50409               ; ｻｲｸﾙ完了
CON
RES R51905               ; UT5 1ｻｲｸﾙ終了
MRD
AND LR40006              ; UT6
MPS
ANB _UT6
MDSTRT UT6
MPP
AND R51906               ; UT6 1ｻｲｸﾙ終了
SET R50409               ; ｻｲｸﾙ完了
CON
RES R51906               ; UT6 1ｻｲｸﾙ終了
MRD
AND LR40007              ; UT7
MPS
ANB _UT7
MDSTRT UT7
MPP
AND R51907               ; UT7 1ｻｲｸﾙ終了
SET R50409               ; ｻｲｸﾙ完了
CON
RES R51907               ; UT7 1ｻｲｸﾙ終了
MRD
AND LR40008              ; UT8
MPS
ANB _UT8
MDSTRT UT8
MPP
AND R51908               ; UT8 1ｻｲｸﾙ終了
SET R50409               ; ｻｲｸﾙ完了
CON
RES R51908               ; UT8 1ｻｲｸﾙ終了
MPP
AND LR40000              ; INDEX
MPS
ANB _Index
MDSTRT Index
MPP
AND R51900               ; INDEX 1ｻｲｸﾙ終了
SET R50409               ; ｻｲｸﾙ完了
CON
RES R51900               ; INDEX 1ｻｲｸﾙ終了
;Ｃａｌｌ　Ｐｏｓｔ
LDB R50002               ; STEPﾓｰﾄﾞ
ZRES R50403 R50405
STG R50400               ; Call Post
ANB R50403
ANB R1001                ; ｽﾀｰﾄSW
AND R50002               ; STEPﾓｰﾄﾞ
SET R50403
CON
JMP R50404
STG R50404
ANP R1001                ; ｽﾀｰﾄSW
ANB R50008               ; Whole ERROR
ANB R50300               ; Pause
ANB R50010               ; 非常停止
AND R1100                ; ﾒｲﾝｴｱ
AND R1102                ; 安全ｶﾊﾞｰ
JMP R50405
STG R50405
ANB R50400               ; Call Post
RES R50403
CON
ENDS
LD R50400                ; Call Post
AND R50404
OUT R50401               ; Post Busy
LD R50002                ; STEPﾓｰﾄﾞ
AND R50405
ORB R50002               ; STEPﾓｰﾄﾞ
OUT R50402               ; Post Ok
;Error Release Delay Management / エラー解除遅延処理
LDP R50107               ; ｴﾗｰ中 非常停止
SET R50109               ; ｴﾗｰ解除
LDB R50008               ; Whole ERROR
OR R50109                ; ｴﾗｰ解除
TMR @3 #15
LD @T3
SET @MR300
CON
RES R50109               ; ｴﾗｰ解除
CON
RES R50107               ; ｴﾗｰ中 非常停止
;Error Release Manegment / エラー解除処理
LD R50008                ; Whole ERROR
AND R50108               ; ｴﾗｰ中
TMR @4 #15
LD R50008                ; Whole ERROR
AND R50108               ; ｴﾗｰ中
AND R50015               ; ｴﾗｰﾘｾｯﾄSW_ON
ANP R1001                ; ｽﾀｰﾄSW
AND @T4
ANB R50300               ; Pause
MPS
SET R50109               ; ｴﾗｰ解除
CON
RES R50108               ; ｴﾗｰ中
CON
RES R50008               ; Whole ERROR
MRD
ZRES R50110 R50114       ; INDEX異常  UT4異常
CON
ZRES R50500 R50915       ; 1.ﾒｲﾝINDEX ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
CON
ZRES R46000 R47315       ; ﾒｲﾝINDEX ﾌﾞﾚｰｷ下降限  UT8-2 ﾜｰｸﾃﾞｰﾀ異常
MPP
ZRES R51705 R51708       ; UT5異常  UT8異常
LDP R50008               ; Whole ERROR
SET @MR301
STG @MR301
AND @MR300
RES @MR300
CON
SET R50108               ; ｴﾗｰ中
CON
ENDS
;Error Reset Key SW Operation Check / エラーリセットキーＳＷ動作確認
LD CR2007                ; 運転開始時1ｽｷｬﾝOFF
AND LR49914
ANB R50010               ; 非常停止
@SET @MR302
STG @MR302
ANB R1103                ; ｴﾗｰﾘｾｯﾄSW
JMP @MR303
STG @MR303
AND R1103                ; ｴﾗｰﾘｾｯﾄSW
JMP @MR304
STG @MR304
ANB R1103                ; ｴﾗｰﾘｾｯﾄSW
MPS
AND R50007               ; 原点復帰完了
SET LR49915
CON
ENDS
MPP
ANB R50007               ; 原点復帰完了
RES LR49914
CON
RES LR49915
CON
ENDS
;サイクルタイム計測
;Total  =  DM5010
;UT1    =  DM5012
;UT2    =  DM5014
;UT3    =  DM5016
;UT4    =  DM5018
;Index  =  DM5020
;UT5    =  DM5040
LD R50209                ; 動作開始
OR R50200                ; INDEX Do
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
@INC DM5010              ; Total ｻｲｸﾙﾀｲﾑ
LD R50209                ; 動作開始
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
@INC DM5014              ; UT1 ｻｲｸﾙﾀｲﾑ
CON
@INC DM5016              ; UT2 ｻｲｸﾙﾀｲﾑ
CON
@INC DM5018              ; UT3 ｻｲｸﾙﾀｲﾑ
CON
@INC DM5020              ; UT4 ｻｲｸﾙﾀｲﾑ
CON
@INC DM5022              ; UT5 ｻｲｸﾙﾀｲﾑ
CON
@INC DM5024              ; UT6 ｻｲｸﾙﾀｲﾑ
CON
@INC DM5026              ; UT7 ｻｲｸﾙﾀｲﾑ
CON
@INC DM5028              ; UT8 ｻｲｸﾙﾀｲﾑ
LD R50200                ; INDEX Do
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
@INC DM5012              ; INDEX ｻｲｸﾙﾀｲﾑ
LDP R51901               ; UT1 1ｻｲｸﾙ終了
MOV DM5014 DM5015        ; UT1 ｻｲｸﾙﾀｲﾑ  UT1 ｻｲｸﾙﾀｲﾑ TP表示
LDP R51902               ; UT2 1ｻｲｸﾙ終了
MOV DM5016 DM5017        ; UT2 ｻｲｸﾙﾀｲﾑ  UT2 ｻｲｸﾙﾀｲﾑ TP表示
LDP R51903               ; UT3 1ｻｲｸﾙ終了
MOV DM5018 DM5019        ; UT3 ｻｲｸﾙﾀｲﾑ  UT3 ｻｲｸﾙﾀｲﾑ TP表示
LDP R51904               ; UT4 1ｻｲｸﾙ終了
MOV DM5020 DM5021        ; UT4 ｻｲｸﾙﾀｲﾑ  UT4 ｻｲｸﾙﾀｲﾑ TP表示
LDP R51905               ; UT5 1ｻｲｸﾙ終了
MOV DM5022 DM5023        ; UT5 ｻｲｸﾙﾀｲﾑ  UT5 ｻｲｸﾙﾀｲﾑ TP表示
LDP R51906               ; UT6 1ｻｲｸﾙ終了
MOV DM5024 DM5025        ; UT6 ｻｲｸﾙﾀｲﾑ  UT6 ｻｲｸﾙﾀｲﾑ TP表示
LDP R51907               ; UT7 1ｻｲｸﾙ終了
MOV DM5026 DM5027        ; UT7 ｻｲｸﾙﾀｲﾑ  UT7 ｻｲｸﾙﾀｲﾑ TP表示
LDP R51908               ; UT8 1ｻｲｸﾙ終了
MOV DM5028 DM5029        ; UT8 ｻｲｸﾙﾀｲﾑ  UT8 ｻｲｸﾙﾀｲﾑ TP表示
LDF R50200               ; INDEX Do
WSR EM31500 #1000 #1     ; Total C/T 履歴
MOV DM5010 EM31500       ; Total ｻｲｸﾙﾀｲﾑ  Total C/T 履歴
MOV DM5012 EM31600       ; INDEX ｻｲｸﾙﾀｲﾑ  INDEX C/T 履歴
MOV DM5015 EM31700       ; UT1 ｻｲｸﾙﾀｲﾑ TP表示  UT1 C/T 履歴
MOV DM5017 EM31800       ; UT2 ｻｲｸﾙﾀｲﾑ TP表示  UT2 C/T 履歴
MOV DM5019 EM31900       ; UT3 ｻｲｸﾙﾀｲﾑ TP表示  UT3 C/T 履歴
MOV DM5021 EM32000       ; UT4 ｻｲｸﾙﾀｲﾑ TP表示  UT4 C/T 履歴
MOV DM5023 EM32100       ; UT5 ｻｲｸﾙﾀｲﾑ TP表示  UT5 C/T 履歴
MOV DM5025 EM32200       ; UT6 ｻｲｸﾙﾀｲﾑ TP表示  UT6 C/T 履歴
MOV DM5027 EM32300       ; UT7 ｻｲｸﾙﾀｲﾑ TP表示  UT7 C/T 履歴
MOV DM5029 EM32400       ; UT8 ｻｲｸﾙﾀｲﾑ TP表示  UT8 C/T 履歴
;<<C/T Histoy Display>>
LD CR2002                ; 常時ON
MPS
LDA DM5050               ; C/T 履歴転送ｶｳﾝﾄ
CON
STA Z6
MRD
MOV EM31500:Z6 DM5060    ; Total C/T 履歴  TOTAL C/T 履歴表示
MRD
MOV EM31600:Z6 DM5061    ; INDEX C/T 履歴  INDEX C/T 履歴表示
MRD
MOV EM31700:Z6 DM5062    ; UT1 C/T 履歴  UT1 C/T 履歴表示
MRD
MOV EM31800:Z6 DM5063    ; UT2 C/T 履歴  UT2 C/T 履歴表示
MRD
MOV EM31900:Z6 DM5064    ; UT3 C/T 履歴  UT3 C/T 履歴表示
MRD
MOV EM32000:Z6 DM5065    ; UT4 C/T 履歴  UT4 C/T 履歴表示
MRD
MOV EM32100:Z6 DM5066    ; UT5 C/T 履歴  UT5 C/T 履歴表示
MRD
MOV EM32200:Z6 DM5067    ; UT6 C/T 履歴  UT6 C/T 履歴表示
MRD
MOV EM32300:Z6 DM5068    ; UT7 C/T 履歴  UT7 C/T 履歴表示
MPP
MOV EM32400:Z6 DM5069    ; UT8 C/T 履歴  UT8 C/T 履歴表示
LDF R50200               ; INDEX Do
MOV DM5012 DM5013        ; INDEX ｻｲｸﾙﾀｲﾑ  INDEX ｻｲｸﾙﾀｲﾑ TP表示
MOV DM5010 DM5011        ; Total ｻｲｸﾙﾀｲﾑ  Total ｻｲｸﾙﾀｲﾑ TP表示
MOV #0 DM5014            ; UT1 ｻｲｸﾙﾀｲﾑ
MOV #0 DM5016            ; UT2 ｻｲｸﾙﾀｲﾑ
MOV #0 DM5018            ; UT3 ｻｲｸﾙﾀｲﾑ
MOV #0 DM5020            ; UT4 ｻｲｸﾙﾀｲﾑ
MOV #0 DM5022            ; UT5 ｻｲｸﾙﾀｲﾑ
MOV #0 DM5024            ; UT6 ｻｲｸﾙﾀｲﾑ
MOV #0 DM5026            ; UT7 ｻｲｸﾙﾀｲﾑ
MOV #0 DM5028            ; UT8 ｻｲｸﾙﾀｲﾑ
LDF @MR004
MOV #0 DM5010            ; Total ｻｲｸﾙﾀｲﾑ
MOV #0 DM5012            ; INDEX ｻｲｸﾙﾀｲﾑ
LD= DM20100 #0           ; UT1-1在荷
AND= DM20102 #0          ; UT1-2在荷
AND= DM20200 #0          ; UT2-1在荷
AND= DM20202 #0          ; UT2-2在荷
AND= DM20300 #0          ; UT3-1在荷
AND= DM20302 #0          ; UT3-2在荷
AND= DM20400 #0          ; UT4-1在荷
AND= DM20402 #0          ; UT4-2在荷
AND= DM20500 #0          ; UT5-1在荷
AND= DM20502 #0          ; UT5-2在荷
AND= DM20600 #0          ; UT6-1在荷
AND= DM20602 #0          ; UT6-2在荷
AND= DM20700 #0          ; UT7-1在荷
AND= DM20702 #0          ; UT7-2在荷
AND= DM20800 #0          ; UT8-1在荷
AND= DM20802 #0          ; UT8-2在荷
INV
OUT MR10000              ; INDEX ﾜｰｸ有
LDP R50003               ; HOMEﾓｰﾄﾞ
MPS
SET DM10707.4            ; RB1 SON
CON
SET DM10715.4            ; RB2 SON
CON
SET DM10723.4            ; RB3 SON
CON
SET DM10731.4            ; RB4 SON
CON
SET DM10739.4            ; RB5 SON
CON
SET DM10747.4            ; RB6 SON
CON
SET DM10755.4            ; RB7 SON
CON
SET DM10763.4            ; RB8 SON
CON
SET DM10771.4            ; RB9 SON
MRD
SET DM10779.4            ; RB10 SON
CON
SET DM10787.4            ; RB11 SON
CON
SET DM10795.4            ; RB12 SON
CON
SET DM10803.4            ; RB13 SON
MRD
SET MR2104               ; ﾒｲﾝINDEX Power ON/OFF
CON
SET MR2105               ; ﾗﾍﾞﾙINDEX1 Power ON/OFF
CON
SET MR2106               ; ﾗﾍﾞﾙINDEX2 Power ON/OFF
CON
SET MR2108               ; INDEX Emergency stop
CON
SET DM10850.9            ; ﾒｲﾝINDEX ｻｰﾎﾞON
CON
SET DM10860.9            ; ﾗﾍﾞﾙINDEX1 ｻｰﾎﾞON
CON
SET DM10870.9            ; ﾗﾍﾞﾙINDEX2 ｻｰﾎﾞON
MRD
SET DM10850.12           ; ﾒｲﾝINDEX 非常停止
CON
SET DM10860.12           ; ﾗﾍﾞﾙINDEX1 非常停止
CON
SET DM10870.12           ; ﾗﾍﾞﾙINDEX2 非常停止
MRD
SET MR9500               ; RB1 EMG 解除
CON
SET MR9501               ; RB2 EMG 解除
CON
SET MR9502               ; RB3 EMG 解除
CON
SET MR9503               ; RB4 EMG 解除
CON
SET MR9504               ; RB5 EMG 解除
CON
SET MR9505               ; RB6 EMG 解除
CON
SET MR9506               ; RB7 EMG 解除
CON
SET MR9507               ; RB8 EMG 解除
MPP
SET MR9508               ; RB9 EMG 解除
CON
SET MR9509               ; RB10 EMG 解除
CON
SET MR9510               ; RB11 EMG 解除
CON
SET MR9511               ; RB12 EMG 解除
CON
SET MR9512               ; RB13 EMG 解除
;ｻｲｸﾙﾀｲﾑLOG
LDP R50001               ; AUTOﾓｰﾄﾞ
LOGE #0
LDF R50001               ; AUTOﾓｰﾄﾞ
LOGD #0
LDP R50209               ; 動作開始
TRGD #0
END
ENDH
