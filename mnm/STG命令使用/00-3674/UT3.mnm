DEVICE:53
;MODULE:UT3
;MODULE_TYPE:0
;UT3 Bottle rotation
;
;非常停止
;Emergency Stop
LD R50010                ; 非常停止
OR @MR001
ZRES @MR002 @MR3915      ; STEP運転終了
CON
OUT @MR001
TMR @0 #5
LD @T0
MDSTOP UT3
;<h1/>HOME
LD R50003                ; HOMEﾓｰﾄﾞ
ANB R50203               ; UT3 Do
SET R50203               ; UT3 Do
CON
SET @MR1003              ; 原点復帰開始
LDB R50003               ; HOMEﾓｰﾄﾞ
ANB R50001               ; AUTOﾓｰﾄﾞ
ANB R50002               ; STEPﾓｰﾄﾞ
AND @MR1015              ; 原点復帰完了
RES R50203               ; UT3 Do
CON
RES @MR1015              ; 原点復帰完了
STG @MR1003              ; 原点復帰開始
ANB R50300               ; Pause
ANB R50113               ; UT3異常
JMP @MR1004
STG @MR1004
ANB R50300               ; Pause
ANB R50113               ; UT3異常
SET MR8307               ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ上昇
CON
RES MR8306               ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ下降
CON
ANB R5308                ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ下降限
AND R5309                ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ上昇限
JMP @MR1005
STG @MR1005
ANB R50300               ; Pause
ANB R50113               ; UT3異常
RES MR8208               ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ閉
CON
SET MR8209               ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ開
CON
AND R5209                ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ1開限
AND R5211                ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ2開限
JMP @MR1006
STG @MR1006
ANB R50300               ; Pause
ANB R50113               ; UT3異常
MPS
LDB DM10515.1            ; RB2 ﾎﾞﾄﾙ回転1 原点復帰完了
ORB DM10523.1            ; RB3 ﾎﾞﾄﾙ回転2 原点復帰完了
ANL
JMP @MR1007
MPP
LD DM10515.1             ; RB2 ﾎﾞﾄﾙ回転1 原点復帰完了
AND DM10523.1            ; RB3 ﾎﾞﾄﾙ回転2 原点復帰完了
ANL
JMP @MR1009
STG @MR1007
ANB R50300               ; Pause
ANB R50113               ; UT3異常
DW #99 EM1302            ; RB2 ﾎﾞﾄﾙ回転1 指令POS
CON
DW #99 EM1304            ; RB3 ﾎﾞﾄﾙ回転2 指令POS
CON
AND MR3001               ; RB2 ﾎﾞﾄﾙ回転1 起動IL
AND MR3002               ; RB3 ﾎﾞﾄﾙ回転2 起動IL
SET R35108               ; RB2 ﾎﾞﾄﾙ回転1 原点復帰
CON
SET R35208               ; RB3 ﾎﾞﾄﾙ回転2 原点復帰
CON
JMP @MR1008
STG @MR1008
ANB R50300               ; Pause
ANB R50113               ; UT3異常
AND R35109               ; RB2 ﾎﾞﾄﾙ回転1 原点復帰完了
AND R35209               ; RB3 ﾎﾞﾄﾙ回転2 原点復帰完了
AND DM10515.1            ; RB2 ﾎﾞﾄﾙ回転1 原点復帰完了
AND DM10523.1            ; RB3 ﾎﾞﾄﾙ回転2 原点復帰完了
AND= EM1303 #1           ; RB2 ﾎﾞﾄﾙ回転1 現在POS
AND= EM1305 #1           ; RB3 ﾎﾞﾄﾙ回転2 現在POS
RES R35109               ; RB2 ﾎﾞﾄﾙ回転1 原点復帰完了
CON
RES R35209               ; RB3 ﾎﾞﾄﾙ回転2 原点復帰完了
CON
JMP @MR1009
STG @MR1009
ANB R50300               ; Pause
ANB R50113               ; UT3異常
SET MR4300               ; RB2 ﾎﾞﾄﾙ回転1 補正前 移動要求
CON
SET MR4308               ; RB3 ﾎﾞﾄﾙ回転2 補正前 移動要求
CON
JMP @MR1010
STG @MR1010
ANB R50300               ; Pause
ANB R50113               ; UT3異常
AND MR4301               ; RB2 ﾎﾞﾄﾙ回転1 補正前 移動完了
AND MR4309               ; RB3 ﾎﾞﾄﾙ回転2 補正前 移動完了
RES MR4301               ; RB2 ﾎﾞﾄﾙ回転1 補正前 移動完了
CON
RES MR4309               ; RB3 ﾎﾞﾄﾙ回転2 補正前 移動完了
CON
JMP @MR1011
STG @MR1011
ANB R50300               ; Pause
ANB R50113               ; UT3異常
SET R51903               ; UT3 1ｻｲｸﾙ終了
CON
SET @MR1015              ; 原点復帰完了
CON
ENDS
;<h1/>AUTO
LD R50001                ; AUTOﾓｰﾄﾞ
ANB R50203               ; UT3 Do
ANB @MR2001              ; 自動運転中
SET R50203               ; UT3 Do
CON
SET @MR2000              ; UT3 AUTO START
LDB R50003               ; HOMEﾓｰﾄﾞ
ANB R50001               ; AUTOﾓｰﾄﾞ
ANB R50002               ; STEPﾓｰﾄﾞ
AND @MR2915              ; 自動運転完了
RES @MR2001              ; 自動運転中
CON
RES R50203               ; UT3 Do
CON
RES @MR2915              ; 自動運転完了
STG @MR2000              ; UT3 AUTO START
AND R50209               ; 動作開始
SET @MR2001              ; 自動運転中
CON
JMP @MR2003
;Chuck position check
STG @MR2003
ANB R50300               ; Pause
ANB R50113               ; UT3異常
LDA #6
CON
ADD EM1202               ; ﾒｲﾝINDEX 現在POS
CON
STA DM19300              ; UT3ﾁｬｯｸNo.
CON
JMP @MR2004
STG @MR2004
ANB R50300               ; Pause
ANB R50113               ; UT3異常
MPS
LD>= DM19300 #1          ; UT3ﾁｬｯｸNo.
AND<= DM19300 #8         ; UT3ﾁｬｯｸNo.
ANL
JMP @MR2505
MPP
AND> DM19300 #8          ; UT3ﾁｬｯｸNo.
LDA DM19300              ; UT3ﾁｬｯｸNo.
CON
SUB #8
CON
STA DM19300              ; UT3ﾁｬｯｸNo.
CON
JMP @MR2505
STG @MR2505
MPS
LD LR41100               ; AC Parameter 0(Normal mode)
OR LR41101               ; AC Parameter 1(UT6.7 non action)
ANL
JMP @MR2005
MRD
LD LR41102               ; AC Parameter 2(UT6-8 only)
OR LR41107               ; AC Parameter 7(UT8 only)
ANL
JMP @MR2910
MPP
LDB LR41100              ; AC Parameter 0(Normal mode)
ANB LR41101              ; AC Parameter 1(UT6.7 non action)
ANB LR41102              ; AC Parameter 2(UT6-8 only)
ANB LR41107              ; AC Parameter 7(UT8 only)
ANL
JMP @MR2005
;Work detection
STG @MR2005
MPS
LD= DM20300 #2           ; UT3-1在荷
AND= DM20302 #2          ; UT3-2在荷
AND R4804                ; INDEX ﾁｬｯｸ3-1 ﾜｰｸ有無
AND R4805                ; INDEX ﾁｬｯｸ3-2 ﾜｰｸ有無
LD= DM20300 #2           ; UT3-1在荷
AND= DM20302 #0          ; UT3-2在荷
AND R4804                ; INDEX ﾁｬｯｸ3-1 ﾜｰｸ有無
ANB R4805                ; INDEX ﾁｬｯｸ3-2 ﾜｰｸ有無
ORL
LD= DM20300 #0           ; UT3-1在荷
AND= DM20302 #2          ; UT3-2在荷
ANB R4804                ; INDEX ﾁｬｯｸ3-1 ﾜｰｸ有無
AND R4805                ; INDEX ﾁｬｯｸ3-2 ﾜｰｸ有無
ORL
ANB R50300               ; Pause
ANB R50113               ; UT3異常
ANL
JMP @MR2006
MPP
LD= DM20300 #0           ; UT3-1在荷
AND= DM20302 #0          ; UT3-2在荷
ANB R4804                ; INDEX ﾁｬｯｸ3-1 ﾜｰｸ有無
ANB R4805                ; INDEX ﾁｬｯｸ3-2 ﾜｰｸ有無
LD= DM20300 #3           ; UT3-1在荷
AND= DM20302 #3          ; UT3-2在荷
AND R4804                ; INDEX ﾁｬｯｸ3-1 ﾜｰｸ有無
AND R4805                ; INDEX ﾁｬｯｸ3-2 ﾜｰｸ有無
ORL
LD= DM20300 #3           ; UT3-1在荷
AND= DM20302 #0          ; UT3-2在荷
AND R4804                ; INDEX ﾁｬｯｸ3-1 ﾜｰｸ有無
ANB R4805                ; INDEX ﾁｬｯｸ3-2 ﾜｰｸ有無
ORL
LD= DM20300 #0           ; UT3-1在荷
AND= DM20302 #3          ; UT3-2在荷
ANB R4804                ; INDEX ﾁｬｯｸ3-1 ﾜｰｸ有無
AND R4805                ; INDEX ﾁｬｯｸ3-2 ﾜｰｸ有無
ORL
ANB R50300               ; Pause
ANB R50113               ; UT3異常
ANL
JMP @MR2910
;T-Code　Mismatch detection
STG @MR2006
ANB R50300               ; Pause
ANB R50113               ; UT3異常
MPS
LD<> DM20300 #0          ; UT3-1在荷
AND= DM20340 FM10        ; UT3-1ﾊﾞｰｺｰﾄﾞ  T-code(ﾎﾞﾄﾙﾊﾞｰｺｰﾄﾞ)
AND= DM20341 FM11
AND= DM20342 FM12
OR= DM20300 #0           ; UT3-1在荷
OR MR002                 ; UT3 重量/T-code 強制OK
ANL
OUT @MR2007
MRD
AND @MR2007
JMP @MR2008
MPP
LDB @MR2007
ANB MR002                ; UT3 重量/T-code 強制OK
ANL
SET @MR2700              ; UT3-1 T-Code不一致
CON
JMP @MR2600              ; 異常ﾜｰｸ 取出し
STG @MR2008
ANB R50300               ; Pause
ANB R50113               ; UT3異常
MPS
LD<> DM20302 #0          ; UT3-2在荷
AND= DM20344 FM10        ; UT3-2ﾊﾞｰｺｰﾄﾞ  T-code(ﾎﾞﾄﾙﾊﾞｰｺｰﾄﾞ)
AND= DM20345 FM11
AND= DM20346 FM12
OR= DM20302 #0           ; UT3-2在荷
OR MR002                 ; UT3 重量/T-code 強制OK
ANL
OUT @MR2009
MRD
AND @MR2009
JMP @MR2010
MPP
LDB @MR2009
ANB MR002                ; UT3 重量/T-code 強制OK
ANL
SET @MR2701              ; UT3-2 T-Code不一致
CON
JMP @MR2600              ; 異常ﾜｰｸ 取出し
;Out of weight range 
;
;
STG @MR2010
ANB R50300               ; Pause
ANB R50113               ; UT3異常
MPS
LD<> DM20300 #0          ; UT3-1在荷
AND>=.L DM20310 EM31000  ; UT3-1重量  重量規格 （Min)
AND<=.L DM20310 EM31010  ; UT3-1重量  重量規格 （Max）
OR= DM20300 #0           ; UT3-1在荷
OR MR002                 ; UT3 重量/T-code 強制OK
ANL
OUT @MR2011
MRD
AND @MR2011
JMP @MR2012
MPP
ANB @MR2011
SET @MR2702              ; UT3-1 重量範囲外
CON
JMP @MR2600              ; 異常ﾜｰｸ 取出し
STG @MR2012
ANB R50300               ; Pause
ANB R50113               ; UT3異常
MPS
LD<> DM20302 #0          ; UT3-2在荷
AND>=.L DM20312 EM31000  ; UT3-2重量  重量規格 （Min)
AND<=.L DM20312 EM31010  ; UT3-2重量  重量規格 （Max）
OR= DM20302 #0           ; UT3-2在荷
OR MR002                 ; UT3 重量/T-code 強制OK
ANL
OUT @MR2013
MRD
AND @MR2013
JMP @MR2014
MPP
ANB @MR2013
SET @MR2703              ; UT3-2 重量範囲外
CON
JMP @MR2600              ; 異常ﾜｰｸ 取出し
;Film NG detection
STG @MR2014
ANB R50300               ; Pause
ANB R50113               ; UT3異常
MPS
AND= DM20300 #0          ; UT3-1在荷
JMP @MR2015
MPP
AND<> DM20300 #0         ; UT3-1在荷
MPS
LD= DM20314 #1           ; UT3-1画像
OR MR005                 ; ﾌｨﾙﾑ皺検査 強制OK
ANL
JMP @MR2015
MPP
LD<> DM20314 #1          ; UT3-1画像
ANB MR005                ; ﾌｨﾙﾑ皺検査 強制OK
ANL
SET @MR2704              ; UT3-1 剥離ﾌｨﾙﾑ しわ検出
CON
JMP @MR2600              ; 異常ﾜｰｸ 取出し
STG @MR2015
ANB R50300               ; Pause
ANB R50113               ; UT3異常
MPS
AND= DM20302 #0          ; UT3-2在荷
JMP @MR2400
MPP
AND<> DM20302 #0         ; UT3-2在荷
MPS
LD= DM20316 #1           ; UT3-2画像
OR MR005                 ; ﾌｨﾙﾑ皺検査 強制OK
ANL
JMP @MR2400
MPP
LD<> DM20316 #1          ; UT3-2画像
ANB MR005                ; ﾌｨﾙﾑ皺検査 強制OK
ANL
SET @MR2705              ; UT3-2 剥離ﾌｨﾙﾑ しわ検出
CON
JMP @MR2600              ; 異常ﾜｰｸ 取出し
STG @MR2400
ANB R50300               ; Pause
ANB R50113               ; UT3異常
MPS
AND= DM20300 #0          ; UT3-1在荷
JMP @MR2401
MPP
AND<> DM20300 #0         ; UT3-1在荷
MPS
AND= DM20318 #0          ; UT3-1 読取異常
JMP @MR2401
MRD
AND= DM20318 #1          ; UT3-1 読取異常
SET @MR2706              ; UT3-1 重量測定 ﾀｲﾑｵｰﾊﾞｰ
CON
JMP @MR2600              ; 異常ﾜｰｸ 取出し
MRD
AND= DM20318 #2          ; UT3-1 読取異常
SET @MR2708              ; UT3-1 T-Code ﾀｲﾑｵｰﾊﾞｰ
CON
JMP @MR2600              ; 異常ﾜｰｸ 取出し
MPP
AND= DM20318 #3          ; UT3-1 読取異常
SET @MR2710              ; UT3-1 重量測定&T-Code ﾀｲﾑｵｰﾊﾞｰ
CON
JMP @MR2600              ; 異常ﾜｰｸ 取出し
STG @MR2401
ANB R50300               ; Pause
ANB R50113               ; UT3異常
MPS
AND= DM20302 #0          ; UT3-2在荷
JMP @MR2100              ; 通常動作
MPP
AND<> DM20302 #0         ; UT3-2在荷
MPS
AND= DM20320 #0          ; UT3-2 読取異常
JMP @MR2100              ; 通常動作
MRD
AND= DM20320 #1          ; UT3-2 読取異常
SET @MR2707              ; UT3-2 重量測定 ﾀｲﾑｵｰﾊﾞｰ
CON
JMP @MR2600              ; 異常ﾜｰｸ 取出し
MRD
AND= DM20320 #2          ; UT3-2 読取異常
SET @MR2709              ; UT3-2 T-Code ﾀｲﾑｵｰﾊﾞｰ
CON
JMP @MR2600              ; 異常ﾜｰｸ 取出し
MPP
AND= DM20320 #3          ; UT3-2 読取異常
SET @MR2711              ; UT3-2 重量測定&T-Code ﾀｲﾑｵｰﾊﾞｰ
CON
JMP @MR2600              ; 異常ﾜｰｸ 取出し
;Ordinary Movement
;通常動作
;
STG @MR2100              ; 通常動作
ANB R50300               ; Pause
ANB R50113               ; UT3異常
ANB @MR1801              ; ﾗﾍﾞﾙﾌﾟﾘﾝﾀｰ起動完了
MPS
ANB @MR006               ; STEP動作中
SET @MR1800              ; ﾗﾍﾞﾙﾌﾟﾘﾝﾀｰ起動
CON
JMP @MR2103
MPP
AND @MR006               ; STEP動作中
JMP @MR2103
STG @MR2103
ANB R50300               ; Pause
ANB R50113               ; UT3異常
MPS
AND= DM19300 #1          ; UT3ﾁｬｯｸNo.
RES MR7800               ; ﾒｲﾝINDEX ﾁｬｯｸ1閉
CON
SET MR7801               ; ﾒｲﾝINDEX ﾁｬｯｸ1開
CON
JMP @MR2104
MRD
AND= DM19300 #2          ; UT3ﾁｬｯｸNo.
RES MR7802               ; ﾒｲﾝINDEX ﾁｬｯｸ2閉
CON
SET MR7803               ; ﾒｲﾝINDEX ﾁｬｯｸ2開
CON
JMP @MR2104
MRD
AND= DM19300 #3          ; UT3ﾁｬｯｸNo.
RES MR7804               ; ﾒｲﾝINDEX ﾁｬｯｸ3閉
CON
SET MR7805               ; ﾒｲﾝINDEX ﾁｬｯｸ3開
CON
JMP @MR2104
MRD
AND= DM19300 #4          ; UT3ﾁｬｯｸNo.
RES MR7806               ; ﾒｲﾝINDEX ﾁｬｯｸ4閉
CON
SET MR7807               ; ﾒｲﾝINDEX ﾁｬｯｸ4開
CON
JMP @MR2104
MRD
AND= DM19300 #5          ; UT3ﾁｬｯｸNo.
RES MR7808               ; ﾒｲﾝINDEX ﾁｬｯｸ5閉
CON
SET MR7809               ; ﾒｲﾝINDEX ﾁｬｯｸ5開
CON
JMP @MR2104
MRD
AND= DM19300 #6          ; UT3ﾁｬｯｸNo.
RES MR7810               ; ﾒｲﾝINDEX ﾁｬｯｸ6閉
CON
SET MR7811               ; ﾒｲﾝINDEX ﾁｬｯｸ6開
CON
JMP @MR2104
MRD
AND= DM19300 #7          ; UT3ﾁｬｯｸNo.
RES MR7812               ; ﾒｲﾝINDEX ﾁｬｯｸ7閉
CON
SET MR7813               ; ﾒｲﾝINDEX ﾁｬｯｸ7開
CON
JMP @MR2104
MPP
AND= DM19300 #8          ; UT3ﾁｬｯｸNo.
RES MR7814               ; ﾒｲﾝINDEX ﾁｬｯｸ8閉
CON
SET MR7815               ; ﾒｲﾝINDEX ﾁｬｯｸ8開
CON
JMP @MR2104
STG @MR2104
ANB R50300               ; Pause
ANB R50113               ; UT3異常
TMR @1 #5                ; INDEXﾁｬｯｸ 開ﾃﾞｨﾚｲ
CON
AND @T1                  ; INDEXﾁｬｯｸ 開ﾃﾞｨﾚｲ
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
SET MR403                ; UT3 着座/検知 無効ﾀｲﾐﾝｸﾞ
CON
JMP @MR2105
STG @MR2105
ANB R50300               ; Pause
ANB R50113               ; UT3異常
RES MR8208               ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ閉
CON
SET MR8209               ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ開
CON
AND R5209                ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ1開限
AND R5211                ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ2開限
JMP @MR2106
STG @MR2106
ANB R50300               ; Pause
ANB R50113               ; UT3異常
RES MR8307               ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ上昇
CON
SET MR8306               ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ下降
CON
AND R5308                ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ下降限
JMP @MR2107
STG @MR2107
SET @MR800               ; UT3 PACK
CON
SET MR4300               ; RB2 ﾎﾞﾄﾙ回転1 補正前 移動要求
CON
SET MR4308               ; RB3 ﾎﾞﾄﾙ回転2 補正前 移動要求
CON
JMP @MR2108
STG @MR2108
AND MR4301               ; RB2 ﾎﾞﾄﾙ回転1 補正前 移動完了
AND MR4309               ; RB3 ﾎﾞﾄﾙ回転2 補正前 移動完了
RES MR4301               ; RB2 ﾎﾞﾄﾙ回転1 補正前 移動完了
CON
RES MR4309               ; RB3 ﾎﾞﾄﾙ回転2 補正前 移動完了
CON
JMP @MR2200
STG @MR2200
RES MR8209               ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ開
CON
SET MR8208               ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ閉
CON
JMP @MR2201
STG @MR2201
MPS
LD<> DM20300 #0          ; UT3-1在荷
AND<> DM20302 #0         ; UT3-2在荷
ANL
LDA.L DM20322            ; UT3-1 補正角度
CON
STA.L EM10654            ; RB2目標値（下位）10
CON
LDA.L DM20324            ; UT3-2 補正角度
CON
STA.L EM11254            ; RB3目標値（下位）10
CON
JMP @MR2202
MRD
LD<> DM20300 #0          ; UT3-1在荷
AND= DM20302 #0          ; UT3-2在荷
ANL
LDA.L DM20322            ; UT3-1 補正角度
CON
STA.L EM10654            ; RB2目標値（下位）10
CON
JMP @MR2202
MPP
LD= DM20300 #0           ; UT3-1在荷
AND<> DM20302 #0         ; UT3-2在荷
ANL
LDA.L DM20324            ; UT3-2 補正角度
CON
STA.L EM11254            ; RB3目標値（下位）10
CON
JMP @MR2202
STG @MR2202
MPS
LD<> DM20300 #0          ; UT3-1在荷
AND R5208                ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ1閉限
AND<> DM20302 #0         ; UT3-2在荷
AND R5210                ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ2閉限
LD<> DM20300 #0          ; UT3-1在荷
AND R5208                ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ1閉限
AND= DM20302 #0          ; UT3-2在荷
ANB R5211                ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ2開限
ORL
LD= DM20300 #0           ; UT3-1在荷
ANB R5209                ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ1開限
AND<> DM20302 #0         ; UT3-2在荷
AND R5210                ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ2閉限
ORL
ANL
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR2203
MPP
LD R46301                ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ1閉 異常
OR R46303                ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ2閉 異常
ANL
SET MR8209               ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ開
CON
RES MR8208               ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ閉
CON
RES @MR800               ; UT3 PACK
CON
JMP @MR2105
STG @MR2203
MPS
LD<> DM20300 #0          ; UT3-1在荷
AND<> DM20302 #0         ; UT3-2在荷
ANL
SET MR4400               ; RB2 ﾎﾞﾄﾙ回転1 補正後 移動要求
CON
SET MR4408               ; RB3 ﾎﾞﾄﾙ回転2 補正後 移動要求
CON
JMP @MR2204
MRD
LD<> DM20300 #0          ; UT3-1在荷
AND= DM20302 #0          ; UT3-2在荷
ANL
SET MR4400               ; RB2 ﾎﾞﾄﾙ回転1 補正後 移動要求
CON
JMP @MR2204
MPP
LD= DM20300 #0           ; UT3-1在荷
AND<> DM20302 #0         ; UT3-2在荷
ANL
SET MR4408               ; RB3 ﾎﾞﾄﾙ回転2 補正後 移動要求
CON
JMP @MR2204
STG @MR2204
MPS
LD<> DM20300 #0          ; UT3-1在荷
AND<> DM20302 #0         ; UT3-2在荷
AND MR4401               ; RB2 ﾎﾞﾄﾙ回転1 補正後 移動完了
AND MR4409               ; RB3 ﾎﾞﾄﾙ回転2 補正後 移動完了
ANL
RES @MR800               ; UT3 PACK
CON
RES MR4401               ; RB2 ﾎﾞﾄﾙ回転1 補正後 移動完了
CON
RES MR4409               ; RB3 ﾎﾞﾄﾙ回転2 補正後 移動完了
CON
JMP @MR2205
MRD
LD<> DM20300 #0          ; UT3-1在荷
AND= DM20302 #0          ; UT3-2在荷
AND MR4401               ; RB2 ﾎﾞﾄﾙ回転1 補正後 移動完了
ANL
RES @MR800               ; UT3 PACK
CON
RES MR4401               ; RB2 ﾎﾞﾄﾙ回転1 補正後 移動完了
CON
JMP @MR2205
MPP
LD= DM20300 #0           ; UT3-1在荷
AND<> DM20302 #0         ; UT3-2在荷
AND MR4409               ; RB3 ﾎﾞﾄﾙ回転2 補正後 移動完了
ANL
RES @MR800               ; UT3 PACK
CON
RES MR4409               ; RB3 ﾎﾞﾄﾙ回転2 補正後 移動完了
CON
JMP @MR2205
STG @MR2205
ANB R50300               ; Pause
ANB R50113               ; UT3異常
MPS
AND= DM19300 #1          ; UT3ﾁｬｯｸNo.
RES MR7801               ; ﾒｲﾝINDEX ﾁｬｯｸ1開
CON
SET MR7800               ; ﾒｲﾝINDEX ﾁｬｯｸ1閉
CON
JMP @MR2206
MRD
AND= DM19300 #2          ; UT3ﾁｬｯｸNo.
RES MR7803               ; ﾒｲﾝINDEX ﾁｬｯｸ2開
CON
SET MR7802               ; ﾒｲﾝINDEX ﾁｬｯｸ2閉
CON
JMP @MR2206
MRD
AND= DM19300 #3          ; UT3ﾁｬｯｸNo.
RES MR7805               ; ﾒｲﾝINDEX ﾁｬｯｸ3開
CON
SET MR7804               ; ﾒｲﾝINDEX ﾁｬｯｸ3閉
CON
JMP @MR2206
MRD
AND= DM19300 #4          ; UT3ﾁｬｯｸNo.
RES MR7807               ; ﾒｲﾝINDEX ﾁｬｯｸ4開
CON
SET MR7806               ; ﾒｲﾝINDEX ﾁｬｯｸ4閉
CON
JMP @MR2206
MRD
AND= DM19300 #5          ; UT3ﾁｬｯｸNo.
RES MR7809               ; ﾒｲﾝINDEX ﾁｬｯｸ5開
CON
SET MR7808               ; ﾒｲﾝINDEX ﾁｬｯｸ5閉
CON
JMP @MR2206
MRD
AND= DM19300 #6          ; UT3ﾁｬｯｸNo.
RES MR7811               ; ﾒｲﾝINDEX ﾁｬｯｸ6開
CON
SET MR7810               ; ﾒｲﾝINDEX ﾁｬｯｸ6閉
CON
JMP @MR2206
MRD
AND= DM19300 #7          ; UT3ﾁｬｯｸNo.
RES MR7813               ; ﾒｲﾝINDEX ﾁｬｯｸ7開
CON
SET MR7812               ; ﾒｲﾝINDEX ﾁｬｯｸ7閉
CON
JMP @MR2206
MPP
AND= DM19300 #8          ; UT3ﾁｬｯｸNo.
RES MR7815               ; ﾒｲﾝINDEX ﾁｬｯｸ8開
CON
SET MR7814               ; ﾒｲﾝINDEX ﾁｬｯｸ8閉
CON
JMP @MR2206
STG @MR2206
ANB R50300               ; Pause
ANB R50113               ; UT3異常
TMR @2 #3                ; INDEXﾁｬｯｸ 閉ﾃﾞｨﾚｲ
CON
AND @T2                  ; INDEXﾁｬｯｸ 閉ﾃﾞｨﾚｲ
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR2207
STG @MR2207
ANB R50300               ; Pause
ANB R50113               ; UT3異常
RES MR8208               ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ閉
CON
SET MR8209               ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ開
CON
AND R5209                ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ1開限
AND R5211                ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ2開限
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR2208
STG @MR2208
ANB R50300               ; Pause
ANB R50113               ; UT3異常
SET @MR800               ; UT3 PACK
CON
SET MR4300               ; RB2 ﾎﾞﾄﾙ回転1 補正前 移動要求
CON
SET MR4308               ; RB3 ﾎﾞﾄﾙ回転2 補正前 移動要求
CON
JMP @MR2209
STG @MR2209
AND MR4301               ; RB2 ﾎﾞﾄﾙ回転1 補正前 移動完了
AND MR4309               ; RB3 ﾎﾞﾄﾙ回転2 補正前 移動完了
RES @MR800               ; UT3 PACK
CON
RES MR4301               ; RB2 ﾎﾞﾄﾙ回転1 補正前 移動完了
CON
RES MR4309               ; RB3 ﾎﾞﾄﾙ回転2 補正前 移動完了
CON
JMP @MR2210
STG @MR2210
MPS
LD<> DM20300 #0          ; UT3-1在荷
AND<> DM20302 #0         ; UT3-2在荷
ANL
DW #3 DM20300            ; UT3-1在荷
CON
DW #3 DM20302            ; UT3-2在荷
CON
JMP @MR2211
MRD
LD<> DM20300 #0          ; UT3-1在荷
AND= DM20302 #0          ; UT3-2在荷
ANL
DW #3 DM20300            ; UT3-1在荷
CON
JMP @MR2211
MPP
LD= DM20300 #0           ; UT3-1在荷
AND<> DM20302 #0         ; UT3-2在荷
ANL
DW #3 DM20302            ; UT3-2在荷
CON
JMP @MR2211
STG @MR2211
LD @MR1801               ; ﾗﾍﾞﾙﾌﾟﾘﾝﾀｰ起動完了
OR @MR006                ; STEP動作中
ANL
RES @MR1801              ; ﾗﾍﾞﾙﾌﾟﾘﾝﾀｰ起動完了
CON
JMP @MR2212
STG @MR2212
JMP @MR2910
;An End of Operation
;動作終了
;
STG @MR2910
RES MR403                ; UT3 着座/検知 無効ﾀｲﾐﾝｸﾞ
CON
ANB R50300               ; Pause
ANB R50113               ; UT3異常
MPS
AND R50001               ; AUTOﾓｰﾄﾞ
SET R51903               ; UT3 1ｻｲｸﾙ終了
CON
JMP @MR2911
MPP
AND R50002               ; STEPﾓｰﾄﾞ
SET R50009               ; HOLDRQ
CON
SET R51903               ; UT3 1ｻｲｸﾙ終了
CON
JMP @MR2911
STG @MR2911
ANB R50209               ; 動作開始
MPS
AND R50001               ; AUTOﾓｰﾄﾞ
MPS
LDB R50000               ; HOLD
AND R50409               ; ｻｲｸﾙ完了
ANL
SET @MR2000              ; UT3 AUTO START
CON
ENDS
MPP
AND R50000               ; HOLD
JMP @MR2912
MPP
LD R50002                ; STEPﾓｰﾄﾞ
AND R50000               ; HOLD
ANL
JMP @MR2912
;Processing of end
;終了処理
;
STG @MR2912
ANB R50300               ; Pause
ANB R50113               ; UT3異常
MPS
AND @MR2001              ; 自動運転中
SET @MR2915              ; 自動運転完了
CON
ENDS
MPP
AND @MR006               ; STEP動作中
RES @MR006               ; STEP動作中
CON
SET @MR3915              ; STEP運転終了
CON
ENDS
;<h1/>Abnormal work taken out 
;
STG @MR2600              ; 異常ﾜｰｸ 取出し
ANB R50300               ; Pause
AND R50113               ; UT3異常
RES MR8208               ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ閉
CON
SET MR8209               ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ開
CON
ANB R5208                ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ1閉限
AND R5209                ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ1開限
ANB R5210                ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ2閉限
AND R5211                ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ2開限
JMP @MR2601
STG @MR2601
ANB R50300               ; Pause
RES MR8306               ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ下降
CON
SET MR8307               ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ上昇
CON
JMP @MR2602
STG @MR2602
MPS
AND= DM19300 #1          ; UT3ﾁｬｯｸNo.
RES MR7800               ; ﾒｲﾝINDEX ﾁｬｯｸ1閉
CON
SET MR7801               ; ﾒｲﾝINDEX ﾁｬｯｸ1開
CON
JMP @MR2603
MRD
AND= DM19300 #2          ; UT3ﾁｬｯｸNo.
RES MR7802               ; ﾒｲﾝINDEX ﾁｬｯｸ2閉
CON
SET MR7803               ; ﾒｲﾝINDEX ﾁｬｯｸ2開
CON
JMP @MR2603
MRD
AND= DM19300 #3          ; UT3ﾁｬｯｸNo.
RES MR7804               ; ﾒｲﾝINDEX ﾁｬｯｸ3閉
CON
SET MR7805               ; ﾒｲﾝINDEX ﾁｬｯｸ3開
CON
JMP @MR2603
MRD
AND= DM19300 #4          ; UT3ﾁｬｯｸNo.
RES MR7806               ; ﾒｲﾝINDEX ﾁｬｯｸ4閉
CON
SET MR7807               ; ﾒｲﾝINDEX ﾁｬｯｸ4開
CON
JMP @MR2603
MRD
AND= DM19300 #5          ; UT3ﾁｬｯｸNo.
RES MR7808               ; ﾒｲﾝINDEX ﾁｬｯｸ5閉
CON
SET MR7809               ; ﾒｲﾝINDEX ﾁｬｯｸ5開
CON
JMP @MR2603
MRD
AND= DM19300 #6          ; UT3ﾁｬｯｸNo.
RES MR7810               ; ﾒｲﾝINDEX ﾁｬｯｸ6閉
CON
SET MR7811               ; ﾒｲﾝINDEX ﾁｬｯｸ6開
CON
JMP @MR2603
MRD
AND= DM19300 #7          ; UT3ﾁｬｯｸNo.
RES MR7812               ; ﾒｲﾝINDEX ﾁｬｯｸ7閉
CON
SET MR7813               ; ﾒｲﾝINDEX ﾁｬｯｸ7開
CON
JMP @MR2603
MPP
AND= DM19300 #8          ; UT3ﾁｬｯｸNo.
RES MR7814               ; ﾒｲﾝINDEX ﾁｬｯｸ8閉
CON
SET MR7815               ; ﾒｲﾝINDEX ﾁｬｯｸ8開
CON
JMP @MR2603
STG @MR2603
ANB R5308                ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ下降限
AND R5309                ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ上昇限
JMP @MR2604
STG @MR2604
ANB R50300               ; Pause
ANB R50113               ; UT3異常
AND= @MR2700 #0          ; UT3-1 T-Code不一致
MPS
LDB R4804                ; INDEX ﾁｬｯｸ3-1 ﾜｰｸ有無
ANB R4805                ; INDEX ﾁｬｯｸ3-2 ﾜｰｸ有無
ANL
@INC DM5002              ; NG ｶｳﾝﾀ
CON
@INC DM5002              ; NG ｶｳﾝﾀ
CON
DW #0 DM20300            ; UT3-1在荷
CON
DW #0 DM20302            ; UT3-2在荷
CON
JMP @MR2605
MRD
LD R4804                 ; INDEX ﾁｬｯｸ3-1 ﾜｰｸ有無
ANB R4805                ; INDEX ﾁｬｯｸ3-2 ﾜｰｸ有無
ANL
@INC DM5002              ; NG ｶｳﾝﾀ
CON
DW #0 DM20302            ; UT3-2在荷
CON
JMP @MR2004
MRD
LDB R4804                ; INDEX ﾁｬｯｸ3-1 ﾜｰｸ有無
AND R4805                ; INDEX ﾁｬｯｸ3-2 ﾜｰｸ有無
ANL
@INC DM5002              ; NG ｶｳﾝﾀ
CON
DW #0 DM20300            ; UT3-1在荷
CON
JMP @MR2004
MPP
LD R4804                 ; INDEX ﾁｬｯｸ3-1 ﾜｰｸ有無
OR R4805                 ; INDEX ﾁｬｯｸ3-2 ﾜｰｸ有無
ANL
JMP @MR2004
STG @MR2605
ANB R50300               ; Pause
ANB R50113               ; UT3異常
RES MR8307               ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ上昇
CON
SET MR8306               ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ下降
CON
AND R5308                ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ下降限
ANB R5309                ; ﾎﾞﾄﾙ回転 ﾁｬｯｸ上昇限
JMP @MR2910
;<h1/>STEP
LD R50002                ; STEPﾓｰﾄﾞ
ANB R50300               ; Pause
ANB R50203               ; UT3 Do
SET @MR006               ; STEP動作中
CON
SET R50203               ; UT3 Do
CON
SET @MR3900
STG @MR3900
ANB R50300               ; Pause
ANB R50113               ; UT3異常
MPS
LD LR40400               ; STEP UT3-0 selection lamp
OR LR40401               ; STEP UT3-1 selection lamp
ANL
JMP @MR3901
MPP
LDB LR40400              ; STEP UT3-0 selection lamp
ANB LR40401              ; STEP UT3-1 selection lamp
ANL
JMP @MR3901
STG @MR3901
ANB R50300               ; Pause
ANB R50113               ; UT3異常
MPS
LD R4804                 ; INDEX ﾁｬｯｸ3-1 ﾜｰｸ有無
AND R4805                ; INDEX ﾁｬｯｸ3-2 ﾜｰｸ有無
ANL
DW #2 DM20300            ; UT3-1在荷
CON
DW #2 DM20302            ; UT3-2在荷
CON
SET @MR2100              ; 通常動作
CON
JMP @MR3913
MRD
LD R4804                 ; INDEX ﾁｬｯｸ3-1 ﾜｰｸ有無
ANB R4805                ; INDEX ﾁｬｯｸ3-2 ﾜｰｸ有無
ANL
DW #2 DM20300            ; UT3-1在荷
CON
SET @MR2100              ; 通常動作
CON
JMP @MR3913
MRD
LDB R4804                ; INDEX ﾁｬｯｸ3-1 ﾜｰｸ有無
AND R4805                ; INDEX ﾁｬｯｸ3-2 ﾜｰｸ有無
ANL
DW #2 DM20302            ; UT3-2在荷
CON
SET @MR2100              ; 通常動作
CON
JMP @MR3913
MPP
LDB R4804                ; INDEX ﾁｬｯｸ3-1 ﾜｰｸ有無
ANB R4805                ; INDEX ﾁｬｯｸ3-2 ﾜｰｸ有無
ANL
SET @MR2910
CON
JMP @MR3913
STG @MR3913
ANB R50300               ; Pause
ANB R50112               ; UT2異常
@SET LR000               ; Step/Manual 操作記憶
CON
ANB @MR006               ; STEP動作中
MPS
AND= DM19300 #1          ; UT3ﾁｬｯｸNo.
SET MR7801               ; ﾒｲﾝINDEX ﾁｬｯｸ1開
CON
RES MR7800               ; ﾒｲﾝINDEX ﾁｬｯｸ1閉
CON
JMP @MR3914
MRD
AND= DM19300 #2          ; UT3ﾁｬｯｸNo.
SET MR7803               ; ﾒｲﾝINDEX ﾁｬｯｸ2開
CON
RES MR7802               ; ﾒｲﾝINDEX ﾁｬｯｸ2閉
CON
JMP @MR3914
MRD
AND= DM19300 #3          ; UT3ﾁｬｯｸNo.
SET MR7805               ; ﾒｲﾝINDEX ﾁｬｯｸ3開
CON
RES MR7804               ; ﾒｲﾝINDEX ﾁｬｯｸ3閉
CON
JMP @MR3914
MRD
AND= DM19300 #4          ; UT3ﾁｬｯｸNo.
SET MR7807               ; ﾒｲﾝINDEX ﾁｬｯｸ4開
CON
RES MR7806               ; ﾒｲﾝINDEX ﾁｬｯｸ4閉
CON
JMP @MR3914
MRD
AND= DM19300 #5          ; UT3ﾁｬｯｸNo.
SET MR7809               ; ﾒｲﾝINDEX ﾁｬｯｸ5開
CON
RES MR7808               ; ﾒｲﾝINDEX ﾁｬｯｸ5閉
CON
JMP @MR3914
MRD
AND= DM19300 #6          ; UT3ﾁｬｯｸNo.
SET MR7811               ; ﾒｲﾝINDEX ﾁｬｯｸ6開
CON
RES MR7810               ; ﾒｲﾝINDEX ﾁｬｯｸ6閉
CON
JMP @MR3914
MRD
AND= DM19300 #7          ; UT3ﾁｬｯｸNo.
SET MR7813               ; ﾒｲﾝINDEX ﾁｬｯｸ7開
CON
RES MR7812               ; ﾒｲﾝINDEX ﾁｬｯｸ7閉
CON
JMP @MR3914
MPP
AND= DM19300 #8          ; UT3ﾁｬｯｸNo.
SET MR7815               ; ﾒｲﾝINDEX ﾁｬｯｸ8開
CON
RES MR7814               ; ﾒｲﾝINDEX ﾁｬｯｸ8閉
CON
JMP @MR3914
STG @MR3914
ANB R50300               ; Pause
ANB R50113               ; UT3異常
DW #0 DM20300            ; UT3-1在荷
CON
DW #0 DM20302            ; UT3-2在荷
CON
ENDS
LDB R50003               ; HOMEﾓｰﾄﾞ
ANB R50001               ; AUTOﾓｰﾄﾞ
ANB R50002               ; STEPﾓｰﾄﾞ
AND @MR3915              ; STEP運転終了
RES R50203               ; UT3 Do
CON
RES @MR3915              ; STEP運転終了
;<h1/>Subrutine
;ｻﾌﾞﾙｰﾁﾝ
;
;RB2 bottle rotation 1 correction before moving
;RB2 ﾎﾞﾄﾙ回転1 補正前 移動
STG MR4300               ; RB2 ﾎﾞﾄﾙ回転1 補正前 移動要求
SET MR4302               ; RB2 ﾎﾞﾄﾙ回転1 補正前 移動要求中
CON
DW #5 EM1302             ; RB2 ﾎﾞﾄﾙ回転1 指令POS
CON
AND DM10515.1            ; RB2 ﾎﾞﾄﾙ回転1 原点復帰完了
AND MR3001               ; RB2 ﾎﾞﾄﾙ回転1 起動IL
SET R35100               ; RB2 ﾎﾞﾄﾙ回転1 移動要求
CON
JMP @MR1501
STG @MR1501
AND R35101               ; RB2 ﾎﾞﾄﾙ回転1 移動完了
AND T2044                ; RB2 ﾎﾞﾄﾙ回転1 POS5 (補正前)
AND= EM1303 #5           ; RB2 ﾎﾞﾄﾙ回転1 現在POS
RES MR4302               ; RB2 ﾎﾞﾄﾙ回転1 補正前 移動要求中
CON
SET MR4301               ; RB2 ﾎﾞﾄﾙ回転1 補正前 移動完了
CON
RES R35101               ; RB2 ﾎﾞﾄﾙ回転1 移動完了
CON
ENDS
;RB3 bottle rotation 2 correction before moving
;RB3 ﾎﾞﾄﾙ回転2 補正前 移動
STG MR4308               ; RB3 ﾎﾞﾄﾙ回転2 補正前 移動要求
SET MR4310               ; RB3 ﾎﾞﾄﾙ回転2 補正前 移動中
CON
DW #5 EM1304             ; RB3 ﾎﾞﾄﾙ回転2 指令POS
CON
AND DM10523.1            ; RB3 ﾎﾞﾄﾙ回転2 原点復帰完了
AND MR3002               ; RB3 ﾎﾞﾄﾙ回転2 起動IL
SET R35200               ; RB3 ﾎﾞﾄﾙ回転2 移動要求
CON
JMP @MR1509
STG @MR1509
AND R35201               ; RB3 ﾎﾞﾄﾙ回転2 移動完了
AND T2074                ; RB3 ﾎﾞﾄﾙ回転2 POS5 (補正前)
AND= EM1305 #5           ; RB3 ﾎﾞﾄﾙ回転2 現在POS
RES MR4310               ; RB3 ﾎﾞﾄﾙ回転2 補正前 移動中
CON
SET MR4309               ; RB3 ﾎﾞﾄﾙ回転2 補正前 移動完了
CON
RES R35201               ; RB3 ﾎﾞﾄﾙ回転2 移動完了
CON
ENDS
;RB2 bottle rotation 1 correction after moving
;RB2 ﾎﾞﾄﾙ回転1 補正後 移動
STG MR4400               ; RB2 ﾎﾞﾄﾙ回転1 補正後 移動要求
SET MR4402               ; RB2 ﾎﾞﾄﾙ回転1 補正後 移動中
CON
DW #10 EM1302            ; RB2 ﾎﾞﾄﾙ回転1 指令POS
CON
AND DM10515.1            ; RB2 ﾎﾞﾄﾙ回転1 原点復帰完了
AND MR3001               ; RB2 ﾎﾞﾄﾙ回転1 起動IL
SET R35100               ; RB2 ﾎﾞﾄﾙ回転1 移動要求
CON
JMP @MR1601
STG @MR1601
AND R35101               ; RB2 ﾎﾞﾄﾙ回転1 移動完了
AND T2049                ; RB2 ﾎﾞﾄﾙ回転1 POS10 (補正後)
AND= EM1303 #10          ; RB2 ﾎﾞﾄﾙ回転1 現在POS
RES MR4402               ; RB2 ﾎﾞﾄﾙ回転1 補正後 移動中
CON
SET MR4401               ; RB2 ﾎﾞﾄﾙ回転1 補正後 移動完了
CON
RES R35101               ; RB2 ﾎﾞﾄﾙ回転1 移動完了
CON
ENDS
;RB3 bottle rotation 2 correction after moving
;RB3 ﾎﾞﾄﾙ回転2 補正後 移動
STG MR4408               ; RB3 ﾎﾞﾄﾙ回転2 補正後 移動要求
SET MR4410               ; RB3 ﾎﾞﾄﾙ回転2 補正後 移動中
CON
DW #10 EM1304            ; RB3 ﾎﾞﾄﾙ回転2 指令POS
CON
AND DM10523.1            ; RB3 ﾎﾞﾄﾙ回転2 原点復帰完了
AND MR3002               ; RB3 ﾎﾞﾄﾙ回転2 起動IL
SET R35200               ; RB3 ﾎﾞﾄﾙ回転2 移動要求
CON
JMP @MR1609
STG @MR1609
AND R35201               ; RB3 ﾎﾞﾄﾙ回転2 移動完了
AND T2079                ; RB3 ﾎﾞﾄﾙ回転2 POS10 (補正後)
AND= EM1305 #10          ; RB3 ﾎﾞﾄﾙ回転2 現在POS
RES MR4410               ; RB3 ﾎﾞﾄﾙ回転2 補正後 移動中
CON
SET MR4409               ; RB3 ﾎﾞﾄﾙ回転2 補正後 移動完了
CON
RES R35201               ; RB3 ﾎﾞﾄﾙ回転2 移動完了
CON
ENDS
;Start-up label printer
;ﾗﾍﾞﾙﾌﾟﾘﾝﾀｰ起動
STG @MR1800              ; ﾗﾍﾞﾙﾌﾟﾘﾝﾀｰ起動
SET @MR1802              ; ﾗﾍﾞﾙﾌﾟﾘﾝﾀｰ起動中
CON
JMP @MR1803
STG @MR1803
ANB R50300               ; Pause
ANB R50113               ; UT3異常
ANB MR104                ; 4UT ｲﾝﾃﾞｯｸｽﾃﾞｰﾀｼﾌﾄ禁止
ANB LR100                ; 4st ﾒｲﾝｲﾝﾃﾞｯｸｽ旋回完了FLG
ANB LR104                ; ﾗﾍﾞﾙﾌﾟﾘﾝﾀｰ先行ﾗﾍﾞﾙ送り開始
LDB MR003                ; ﾗﾍﾞﾙﾌﾟﾘﾝﾀ I/Fなし
AND R5904                ; ﾗﾍﾞﾙﾌﾟﾘﾝﾀ1 Back_End
AND R5912                ; ﾗﾍﾞﾙﾌﾟﾘﾝﾀ2 Back_End
OR MR003                 ; ﾗﾍﾞﾙﾌﾟﾘﾝﾀ I/Fなし
ANL
JMP @MR1804
STG @MR1804
ANB R50300               ; Pause
ANB R50113               ; UT3異常
AND R5801                ; ﾗﾍﾞﾙﾌﾟﾘﾝﾀ 固定 上昇限
AND R5901                ; ﾗﾍﾞﾙﾌﾟﾘﾝﾀ1 ON_LINE
AND R5909                ; ﾗﾍﾞﾙﾌﾟﾘﾝﾀ2 ON_LINE
ANB R5903                ; ﾗﾍﾞﾙﾌﾟﾘﾝﾀ1 Error
ANB R5911                ; ﾗﾍﾞﾙﾌﾟﾘﾝﾀ2 Error
AND R5905                ; ﾗﾍﾞﾙﾌﾟﾘﾝﾀ1 Power
AND R5913                ; ﾗﾍﾞﾙﾌﾟﾘﾝﾀ2 Power
TMH @3 #10               ; ﾗﾍﾞﾙﾌﾟﾘﾝﾀｰ先行ﾗﾍﾞﾙ送り開始ﾃﾞｨﾚｲ
CON
AND @T3                  ; ﾗﾍﾞﾙﾌﾟﾘﾝﾀｰ先行ﾗﾍﾞﾙ送り開始ﾃﾞｨﾚｲ
@SET LR100               ; 4st ﾒｲﾝｲﾝﾃﾞｯｸｽ旋回完了FLG
CON
@SET LR104               ; ﾗﾍﾞﾙﾌﾟﾘﾝﾀｰ先行ﾗﾍﾞﾙ送り開始
CON
JMP @MR1805
STG @MR1805
JMP @MR1806
STG @MR1806
JMP @MR1807
STG @MR1807
SET @MR1801              ; ﾗﾍﾞﾙﾌﾟﾘﾝﾀｰ起動完了
CON
RES @MR1802              ; ﾗﾍﾞﾙﾌﾟﾘﾝﾀｰ起動中
CON
ENDS
;<h1/>Error Display
;ｴﾗｰ表示
;
;Error 20
;UT3-1 T-Code miss match
STG @MR2700              ; UT3-1 T-Code不一致
ANB R50008               ; Whole ERROR
SET R50008               ; Whole ERROR
CON
SET R50113               ; UT3異常
CON
SET R50603               ; 20.UT3-1 T-Code不一致
CON
JMP @MR100
MOV #20 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR100
AND R50008               ; Whole ERROR
JMP @MR101
STG @MR101
ANB R50008               ; Whole ERROR
ENDS
;Error 21
;UT3-2 T-Code missmatch
STG @MR2701              ; UT3-2 T-Code不一致
ANB R50008               ; Whole ERROR
SET R50008               ; Whole ERROR
CON
SET R50113               ; UT3異常
CON
SET R50604               ; 21.UT3-2 T-Code不一致
CON
JMP @MR104
MOV #21 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR104
AND R50008               ; Whole ERROR
JMP @MR105
STG @MR105
ANB R50008               ; Whole ERROR
ENDS
;Error 22
;UT3-1 out of weight range
STG @MR2702              ; UT3-1 重量範囲外
ANB R50008               ; Whole ERROR
SET R50008               ; Whole ERROR
CON
SET R50113               ; UT3異常
CON
SET R50605               ; 22.UT3-1 重量範囲外
CON
JMP @MR108
MOV #22 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR108
AND R50008               ; Whole ERROR
JMP @MR109
STG @MR109
ANB R50008               ; Whole ERROR
ENDS
;Error 23
;UT3-2 out of weight rang
STG @MR2703              ; UT3-2 重量範囲外
ANB R50008               ; Whole ERROR
SET R50008               ; Whole ERROR
CON
SET R50113               ; UT3異常
CON
SET R50606               ; 23.UT3-2 重量範囲外
CON
JMP @MR112
MOV #23 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR112
AND R50008               ; Whole ERROR
JMP @MR112
STG @MR113
ANB R50008               ; Whole ERROR
ENDS
;Error 24
;UT3-1 film check NG
STG @MR2704              ; UT3-1 剥離ﾌｨﾙﾑ しわ検出
ANB R50008               ; Whole ERROR
SET R50008               ; Whole ERROR
CON
SET R50113               ; UT3異常
CON
SET R50607               ; 24.UT3-1 剥離ﾌｨﾙﾑ しわ検出
CON
JMP @MR200
MOV #24 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR200
AND R50008               ; Whole ERROR
JMP @MR201
STG @MR201
ANB R50008               ; Whole ERROR
ENDS
;Error 25
;UT3-2 film check NG
STG @MR2705              ; UT3-2 剥離ﾌｨﾙﾑ しわ検出
ANB R50008               ; Whole ERROR
SET R50008               ; Whole ERROR
CON
SET R50113               ; UT3異常
CON
SET R50608               ; 25.UT3-2 剥離ﾌｨﾙﾑ しわ検出
CON
JMP @MR204
MOV #25 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR204
AND R50008               ; Whole ERROR
JMP @MR205
STG @MR205
ANB R50008               ; Whole ERROR
ENDS
;Error 26
;26.UT3-1 time over weight mesurement
STG @MR2706              ; UT3-1 重量測定 ﾀｲﾑｵｰﾊﾞｰ
ANB R50008               ; Whole ERROR
SET R50008               ; Whole ERROR
CON
SET R50113               ; UT3異常
CON
SET R50609               ; 26.UT3-1 重量測定 ﾀｲﾑｵｰﾊﾞｰ
CON
JMP @MR208
MOV #26 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR208
AND R50008               ; Whole ERROR
JMP @MR209
STG @MR209
ANB R50008               ; Whole ERROR
ENDS
;Error 27
;27.UT3-2 time over weight mesurement
STG @MR2707              ; UT3-2 重量測定 ﾀｲﾑｵｰﾊﾞｰ
ANB R50008               ; Whole ERROR
SET R50008               ; Whole ERROR
CON
SET R50113               ; UT3異常
CON
SET R50610               ; 27.UT3-2 重量測定 ﾀｲﾑｵｰﾊﾞｰ
CON
JMP @MR212
MOV #27 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR212
AND R50008               ; Whole ERROR
JMP @MR213
STG @MR213
ANB R50008               ; Whole ERROR
ENDS
;Error 28
;UT3-1 time over reading T-Code 
STG @MR2708              ; UT3-1 T-Code ﾀｲﾑｵｰﾊﾞｰ
ANB R50008               ; Whole ERROR
SET R50008               ; Whole ERROR
CON
SET R50113               ; UT3異常
CON
SET R50611               ; UT3-1 T-Code ﾀｲﾑｵｰﾊﾞｰ
CON
JMP @MR300
MOV #28 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR300
AND R50008               ; Whole ERROR
JMP @MR301
STG @MR301
ANB R50008               ; Whole ERROR
ENDS
;Error 29
;UT3-2 time over reading T-Code 
STG @MR2709              ; UT3-2 T-Code ﾀｲﾑｵｰﾊﾞｰ
ANB R50008               ; Whole ERROR
SET R50008               ; Whole ERROR
CON
SET R50113               ; UT3異常
CON
SET R50612               ; UT3-2 T-Code ﾀｲﾑｵｰﾊﾞｰ
CON
JMP @MR304
MOV #29 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR304
AND R50008               ; Whole ERROR
JMP @MR305
STG @MR305
ANB R50008               ; Whole ERROR
ENDS
;Error 30
;UT3-1 time over reading T-Code 
STG @MR2710              ; UT3-1 重量測定&T-Code ﾀｲﾑｵｰﾊﾞｰ
ANB R50008               ; Whole ERROR
SET R50008               ; Whole ERROR
CON
SET R50113               ; UT3異常
CON
SET R50601               ; 18.重量測定&T-Codeﾀｲﾑｵｰﾊﾞｰ
CON
JMP @MR308
MOV #18 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR308
AND R50008               ; Whole ERROR
JMP @MR309
STG @MR309
ANB R50008               ; Whole ERROR
ENDS
;Error 31
;UT3-2 time over reading T-Code 
STG @MR2711              ; UT3-2 重量測定&T-Code ﾀｲﾑｵｰﾊﾞｰ
ANB R50008               ; Whole ERROR
SET R50008               ; Whole ERROR
CON
SET R50113               ; UT3異常
CON
SET R50602               ; 19. UT3-2重量測定&T-Codeﾀｲﾑｵｰﾊﾞｰ
CON
JMP @MR312
MOV #19 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR312
AND R50008               ; Whole ERROR
JMP @MR313
STG @MR313
ANB R50008               ; Whole ERROR
ENDS
;<h1/>UT3 Pause disable
;UT3 ﾎﾟｰｽﾞ禁止
;
LDB @MR800               ; UT3 PACK
INV
OUT R50103               ; PACK UT3
END
ENDH
