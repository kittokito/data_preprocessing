DEVICE:53
;MODULE:Panel
;MODULE_TYPE:0
;SCRIPT_TYPE:
LDB T202                 ; device net ﾉｰﾄﾞ確認
MOV #0 DM3001            ; 切替 画面No.
LD= DM3000 #0            ; 表示中 画面No.
AND T202                 ; device net ﾉｰﾄﾞ確認
MOV #1 DM3001            ; 切替 画面No.
LD= DM3000 #1            ; 表示中 画面No.
MPS
OUT R45004               ; HOME画面 表示中
MPP
LD= DM3001 #5            ; 切替 画面No.
ANB R50010               ; 非常停止
ANL
@MOV #1 DM3001           ; 切替 画面No.
LD= DM3000 #2            ; 表示中 画面No.
OUT R45005               ; ﾒｲﾝ画面#2 表示中
LD= DM3000 #4            ; 表示中 画面No.
OUT R45006               ; ｽﾃｯﾌﾟ画面#4表示中
LD R50004                ; TASK DO
RES R59900               ; ﾒｲﾝ画面 停止中表示
;STOP
LDB R50004               ; TASK DO
AND R50007               ; 原点復帰完了
ANB R50300               ; Pause
ANB R50008               ; Whole ERROR
SET R59900               ; ﾒｲﾝ画面 停止中表示
CON
RES R59902               ; ﾒｲﾝ画面 自動中表示
CON
RES R59903               ; ﾒｲﾝ画面 STEP中表示
CON
@MOV #2 DM3001           ; 切替 画面No.
;HOME
LD R50003                ; HOMEﾓｰﾄﾞ
ANB R50300               ; Pause
ANB R50008               ; Whole ERROR
@MOV #6 DM3001           ; 切替 画面No.
LD R40003
ANB R50004               ; TASK DO
ANB R50001               ; AUTOﾓｰﾄﾞ
ANB R50002               ; STEPﾓｰﾄﾞ
OUT R59901
;AUTO
LD R50001                ; AUTOﾓｰﾄﾞ
ANB R50300               ; Pause
ANB R50008               ; Whole ERROR
SET R59902               ; ﾒｲﾝ画面 自動中表示
CON
RES R59903               ; ﾒｲﾝ画面 STEP中表示
CON
@MOV #2 DM3001           ; 切替 画面No.
;STEP
LD R50002                ; STEPﾓｰﾄﾞ
ANB R50300               ; Pause
ANB R50008               ; Whole ERROR
SET R59903               ; ﾒｲﾝ画面 STEP中表示
CON
RES R59900               ; ﾒｲﾝ画面 停止中表示
CON
RES R59902               ; ﾒｲﾝ画面 自動中表示
CON
@MOV #2 DM3001           ; 切替 画面No.
LDP R1005                ; MANU SW
AND R50007               ; 原点復帰完了
ANB R50004               ; TASK DO
@MOV #4 DM3001           ; 切替 画面No.
;PAUSE
LD R50300                ; Pause
RES R59900               ; ﾒｲﾝ画面 停止中表示
CON
RES R59902               ; ﾒｲﾝ画面 自動中表示
CON
RES R59903               ; ﾒｲﾝ画面 STEP中表示
CON
OUT R59904               ; 一時停止中表示
LDB R1102                ; 安全ｶﾊﾞｰ
@MOV #7 DM3001           ; 切替 画面No.
;Emargency Stop1
LD R50010                ; 非常停止
ANB R50012               ; TRAP       Interlock
ANB R50013               ; Interlock display
@MOV #5 DM3001           ; 切替 画面No.
;Emargency Stop2
LD R50010                ; 非常停止
AND R50013               ; Interlock display
MOV #8 DM3001            ; 切替 画面No.
;Error / エラー
LD R1102                 ; 安全ｶﾊﾞｰ
MPS
LD R50008                ; Whole ERROR
AND R50108               ; ｴﾗｰ中
ANL
@MOV #10 DM3001          ; 切替 画面No.
MPP
ANB R50008               ; Whole ERROR
MPS
ANB R50003               ; HOMEﾓｰﾄﾞ
MPS
AND R50007               ; 原点復帰完了
@MOV #2 DM3001           ; 切替 画面No.
MPP
LDB R50007               ; 原点復帰完了
ANB R50012               ; TRAP       Interlock
AND T202                 ; device net ﾉｰﾄﾞ確認
ANL
@MOV #1 DM3001           ; 切替 画面No.
MRD
ANB R50012               ; TRAP       Interlock
@MOV #0 DM400            ; ﾒｯｾｰｼﾞNo.
MPP
RES R50015               ; ｴﾗｰﾘｾｯﾄSW_ON
LD R1103                 ; ｴﾗｰﾘｾｯﾄSW
OR R40006
MPS
ANB LR49914
SET R50015               ; ｴﾗｰﾘｾｯﾄSW_ON
MPP
LD LR49914
AND LR49915
ANL
RES LR49914
CON
RES LR49915
LD LR49914
MPS
LDB R50108               ; ｴﾗｰ中
ANB R50007               ; 原点復帰完了
ANL
OUT R49900
MPP
@LDA DM400               ; ﾒｯｾｰｼﾞNo.
CON
@ADD #1
CON
@STA DM5029              ; UT8 ｻｲｸﾙﾀｲﾑ TP表示
;エラーユニット箇所表示
;Display of error unit part
LD R50110                ; INDEX異常
OUT R52800               ; INDEX ｴﾗｰ表示
LD R50111                ; UT1異常
OUT R52801               ; UT1 ｴﾗｰ表示
LD R50112                ; UT2異常
OUT R52802               ; UT2 ｴﾗｰ表示
LD R50113                ; UT3異常
OUT R52803               ; UT3 ｴﾗｰ表示
LD R50114                ; UT4異常
OUT R52804               ; UT4 ｴﾗｰ表示
LD R51705                ; UT5異常
OUT R52805               ; UT5 ｴﾗｰ表示
LD R51706                ; UT6異常
OUT R52806               ; UT6 ｴﾗｰ表示
LD R51707                ; UT7異常
OUT R52807               ; UT7 ｴﾗｰ表示
LD R51708                ; UT8異常
OUT R52808               ; UT8 ｴﾗｰ表示
;センサー番号表示
;Sensor Number display
LD>= DM400 #60           ; ﾒｯｾｰｼﾞNo.
AND<= DM400 #65          ; ﾒｯｾｰｼﾞNo.
LD>= DM400 #69           ; ﾒｯｾｰｼﾞNo.
AND<= DM400 #71          ; ﾒｯｾｰｼﾞNo.
ORL
OUT R42000               ; ｼﾘﾝﾀﾞｰｴﾗｰ
;カウンター
LD R50001                ; AUTOﾓｰﾄﾞ
MPS
AND R50309               ; Input ｶｳﾝﾀ
@INC DM5000              ; Input ｶｳﾝﾀ
CON
RES R50309               ; Input ｶｳﾝﾀ
MRD
AND R50310               ; Output ｶｳﾝﾀ
@INC DM5001              ; Output ｶｳﾝﾀ
CON
RES R50310               ; Output ｶｳﾝﾀ
MPP
AND R50311               ; NG ｶｳﾝﾀ
@INC DM5002              ; NG ｶｳﾝﾀ
CON
RES R50311               ; NG ｶｳﾝﾀ
LD R50008                ; Whole ERROR
@INC DM5003
;カウンターリセット
;
LD R40007                ; ｶｳﾝﾀﾘｾｯﾄSW
@MOV #0 DM5000           ; Input ｶｳﾝﾀ
@MOV #0 DM5001           ; Output ｶｳﾝﾀ
@MOV #0 DM5002           ; NG ｶｳﾝﾀ
LD R40008
OR R40007                ; ｶｳﾝﾀﾘｾｯﾄSW
@MOV #0 DM5003
LD R40009
RES R40009
CON
MOV #0 DM5022            ; UT5 ｻｲｸﾙﾀｲﾑ
LD R40010
RES R40010
CON
MOV #0 DM5023            ; UT5 ｻｲｸﾙﾀｲﾑ TP表示
;ﾊﾟﾗﾒｰﾀ選択画面
LD R47100                ; ｾｯﾄｱｯﾌﾟSW
@MOV #3 DM3001           ; 切替 画面No.
;2Y?C?@?i?i?n?\?|
;Ink model information display
LD CR2002                ; 常時ON
MPS
LDA DM501                ; #805 ﾓﾃﾞﾙNo.
CON
ADD #200
CON
STA DM514                ; #805 ﾒｯｾｰｼﾞ表示
MPP
LDA DM500                ; #331 ﾓﾃﾞﾙNo.
CON
TBIN
CON
ADD #200
CON
STA DM515                ; #331 ﾒｯｾｰｼﾞ表示
;IF DM500 >= 0 AND DM500 <= 9 THEN			'MODEL 0~9
;
;	DM520 = DM500 + 1
;
;	DM521 = 0
;	DM522 = 0
;		
;ELSE IF DM500 >= 10 AND DM500 <= 19 THEN	'MODEL 10~19
;
;	DM521 = DM500 - 9
;
;	DM520 = 0
;	DM522 = 0
;
;ELSE IF DM500 >= 20 AND DM500 <= 29 THEN	'MODEL 20~29
;
;	DM522 = DM500 - 19
;
;	DM520 = 0
;	DM521 = 0
;
;ELSE										'MODEL 30 Over
;
;	DM520 = 0
;	DM521 = 0
;	DM522 = 0
;
;END IF
;IF DM500 >= 0 AND DM500 <= 9 THEN			'MODEL 0~9
;
LD>= DM500 #0            ; #331 ﾓﾃﾞﾙNo.
OUT @VB00
LD<= DM500 #9            ; #331 ﾓﾃﾞﾙNo.
AND @VB00
NCJ #2000
;	DM520 = DM500 + 1
;
LD CR2002                ; 常時ON
LDA DM500                ; #331 ﾓﾃﾞﾙNo.
CON
EXT
CON
ADD.L +1
CON
STA DM520
;	DM521 = 0
;
LD CR2002                ; 常時ON
MOV #0 DM521
;	DM522 = 0
;
LD CR2002                ; 常時ON
MOV #0 DM522
LD CR2002                ; 常時ON
CJ #2001
LABEL #2000
;ELSE IF DM500 >= 10 AND DM500 <= 19 THEN	'MODEL 10~19
;
LD>= DM500 #10           ; #331 ﾓﾃﾞﾙNo.
OUT @VB01
LD<= DM500 #19           ; #331 ﾓﾃﾞﾙNo.
AND @VB01
NCJ #2002
;	DM521 = DM500 - 9
;
LD CR2002                ; 常時ON
LDA DM500                ; #331 ﾓﾃﾞﾙNo.
CON
EXT
CON
SUB.L +9
CON
STA DM521
;	DM520 = 0
;
LD CR2002                ; 常時ON
MOV #0 DM520
;	DM522 = 0
;
LD CR2002                ; 常時ON
MOV #0 DM522
LD CR2002                ; 常時ON
CJ #2003
LABEL #2002
;ELSE IF DM500 >= 20 AND DM500 <= 29 THEN	'MODEL 20~29
;
LD>= DM500 #20           ; #331 ﾓﾃﾞﾙNo.
OUT @VB02
LD<= DM500 #29           ; #331 ﾓﾃﾞﾙNo.
AND @VB02
NCJ #2004
;	DM522 = DM500 - 19
;
LD CR2002                ; 常時ON
LDA DM500                ; #331 ﾓﾃﾞﾙNo.
CON
EXT
CON
SUB.L +19
CON
STA DM522
;	DM520 = 0
;
LD CR2002                ; 常時ON
MOV #0 DM520
;	DM521 = 0
;
LD CR2002                ; 常時ON
MOV #0 DM521
;ELSE										'MODEL 30 Over
;
LD CR2002                ; 常時ON
CJ #2005
LABEL #2004
;	DM520 = 0
;
LD CR2002                ; 常時ON
MOV #0 DM520
;	DM521 = 0
;
LD CR2002                ; 常時ON
MOV #0 DM521
;	DM522 = 0
;
LD CR2002                ; 常時ON
MOV #0 DM522
;END IF
LABEL #2005
LABEL #2003
LABEL #2001
;
END
ENDH
