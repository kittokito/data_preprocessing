DEVICE:53
;MODULE:Group1_Task5
;MODULE_TYPE:0
;SCRIPT_TYPE:
;OneSystem Main-Module
;
;-----------------------------------------
;ModuleName	:	Group1_Task5
;ModuleType	:	Main Module
;Line		:	F2 PZT 固定ﾌﾟﾚｰﾄ接着組立ﾗｲﾝ
;Cell		:   ﾄﾚｲﾁｪﾝｼﾞｬｰ
;Function	:   接着冶具搬送
;-----------------------------------------
;<<Task LocalDevice>>
;/*項目			/*割付ｴﾘｱ				/*備考
;---------------------------------------------------------------------			
;Emergency		@MR000～@MR015			Emergency処理時RESET禁止ｴﾘｱ
;Free			@MR100～@MR915			ﾕｰｻﾞｰﾌﾘｰｴﾘｱ
;HOME			@MR1000～@MR1515		HOME動作時使用ｴﾘｱ
;MAINTENANCE		@MR2000～@MR2915		MAINTE動作時使用ｴﾘｱ
;AUTO(Main1)		@MR3000～@MR3915		AUTO(Main1)動作時使用ｴﾘｱ
;	(Main2)		@MR4000～@MR4415		AUTO(Main2)動作時使用ｴﾘｱ
;SubRoutine		@MR4500～@MR6415		ｻﾌﾞﾙｰﾁﾝ共通動作使用ｴﾘｱ　※状況により増設してください。
;----------------------------------------------------------------------
;<h1/>Device_Init/ﾃﾞﾊﾞｲｽ初期化
;[内容]
;・非常停止、優先ｴﾗｰ発生時に初期化したいﾃﾞﾊﾞｲｽを指定して下さい
;※本Taskで使用するﾛｰｶﾙﾃﾞﾊﾞｲｽなど
;※STG～JMPにて使用しているﾃﾞﾊﾞｲｽは必須
LDP R46104               ; _非常停止中　ﾓｰﾄﾞﾌﾗｸﾞ
ZRES @MR100 @MR6415      ; Task5 ERROR
LD= DM60000 MyTask       ; TaskNo /ERROR_DISP  自ﾀｽｸ番号
AND R46208               ; _Group1　ｴﾗｰ発生中
OUT @MR001               ; TASK5　ERROR
;<h1/>Task_Monitor/ﾀｽｸﾓﾆﾀｰ
LD CR2002                ; 常時ON
FLIK #50 #50 @MR000
;ON STG Main1
;TYPE EM640.U,EM641.U,@MR000.U,@MR3000.U
;
;FOR EM640 = EM640 TO 160 STEP 16
;	IF @MR3000:EM640 <> 0 THEN
;		BREAK
;	END IF	
;NEXT
;	
;IF EM640 < 160 THEN
;	EM641 = (EM640 / 16) * 100 + DMX(@MR3000:EM640) + #3000
;END IF		
;		
;EM640 = EM640 + 16		
;IF EM640 > 160 THEN		
;	EM640 = 0		
;END IF
LDP @MR000
NCJ #1000
;TYPE EM640.U,EM641.U,@MR000.U,@MR3000.U
;
;FOR EM640 = EM640 TO 160 STEP 16
;
LD CR2002                ; 常時ON
MOV EM640 EM640          ; Task5 Main1@MR  Task5 Main1@MR
LABEL #2000
LD> EM640 #160           ; Task5 Main1@MR
CJ #2001
;	IF @MR3000:EM640 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM640                ; Task5 Main1@MR
CON
EXT
CON
STA.L Z12
LD<> @MR3000:Z12 #0      ; AUTO Main1
NCJ #2002
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2003
;	END IF	
;
LABEL #2002
;NEXT
;
LD CR2002                ; 常時ON
LDA EM640                ; Task5 Main1@MR
CON
ADD #16
CON
STA EM640                ; Task5 Main1@MR
LDB CR2009               ; 演算結果が負
CJ #2000
LABEL #2003
LABEL #2001
;IF EM640 < 160 THEN
;
LD< EM640 #160           ; Task5 Main1@MR
NCJ #2004
;	EM641 = (EM640 / 16) * 100 + DMX(@MR3000:EM640) + #3000
;
LD CR2002                ; 常時ON
LDA EM640                ; Task5 Main1@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR3000:Z12          ; AUTO Main1
CON
DMX
CON
STA @VM0
CON
LDA EM640                ; Task5 Main1@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM1
CON
LDA @VM0
CON
EXT
CON
ADD.L @VM1
CON
ADD.L +3000
CON
STA EM641                ; Task5 Main1@MR
;END IF		
;
LABEL #2004
;EM640 = EM640 + 16		
;
LD CR2002                ; 常時ON
LDA EM640                ; Task5 Main1@MR
CON
EXT
CON
ADD.L +16
CON
STA EM640                ; Task5 Main1@MR
;IF EM640 > 160 THEN		
;
LD> EM640 #160           ; Task5 Main1@MR
NCJ #2005
;	EM640 = 0		
;
LD CR2002                ; 常時ON
MOV #0 EM640             ; Task5 Main1@MR
;END IF
LABEL #2005
LABEL #1000
;
;ON STG Main2
;TYPE EM642.U,EM643.U,@MR4000.U
;
;FOR EM642 = EM642 TO 80 STEP 16
;	IF @MR4000:EM642 <> 0 THEN
;		BREAK
;	END IF	
;NEXT	
;
;IF EM642 < 80 THEN
;	EM643 = (EM642 / 16) * 100 + DMX(@MR4000:EM642) + #4000
;END IF
;
;EM642 = EM642 + 16		
;
;IF EM642 > 80 THEN
;	EM642 = 0	
;END IF
LDP @MR000
NCJ #1001
;TYPE EM642.U,EM643.U,@MR4000.U
;
;FOR EM642 = EM642 TO 80 STEP 16
;
LD CR2002                ; 常時ON
MOV EM642 EM642          ; Task5 Main2@MR  Task5 Main2@MR
LABEL #2006
LD> EM642 #80            ; Task5 Main2@MR
CJ #2007
;	IF @MR4000:EM642 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM642                ; Task5 Main2@MR
CON
EXT
CON
STA.L Z12
LD<> @MR4000:Z12 #0      ; AUTO Main2
NCJ #2008
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2009
;	END IF	
;
LABEL #2008
;NEXT	
;
LD CR2002                ; 常時ON
LDA EM642                ; Task5 Main2@MR
CON
ADD #16
CON
STA EM642                ; Task5 Main2@MR
LDB CR2009               ; 演算結果が負
CJ #2006
LABEL #2009
LABEL #2007
;IF EM642 < 80 THEN
;
LD< EM642 #80            ; Task5 Main2@MR
NCJ #2010
;	EM643 = (EM642 / 16) * 100 + DMX(@MR4000:EM642) + #4000
;
LD CR2002                ; 常時ON
LDA EM642                ; Task5 Main2@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR4000:Z12          ; AUTO Main2
CON
DMX
CON
STA @VM3
CON
LDA EM642                ; Task5 Main2@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM4
CON
LDA @VM3
CON
EXT
CON
ADD.L @VM4
CON
ADD.L +4000
CON
STA EM643                ; Task5 Main2@MR
;END IF
;
LABEL #2010
;EM642 = EM642 + 16		
;
LD CR2002                ; 常時ON
LDA EM642                ; Task5 Main2@MR
CON
EXT
CON
ADD.L +16
CON
STA EM642                ; Task5 Main2@MR
;IF EM642 > 80 THEN
;
LD> EM642 #80            ; Task5 Main2@MR
NCJ #2011
;	EM642 = 0	
;
LD CR2002                ; 常時ON
MOV #0 EM642             ; Task5 Main2@MR
;END IF
LABEL #2011
LABEL #1001
;
;ON STG SubRoutine
;TYPE EM644.U,EM645.U,@MR4500.U
;	
;FOR EM644 = EM644 TO 320 STEP 16
;	IF @MR4500:EM644 <> 0 THEN
;		BREAK
;	END IF	
;NEXT
;		
;IF EM644 < 320 THEN
;	EM645 = (EM644 / 16) * 100 + DMX(@MR4500:EM644) + #4500
;END IF
;		
;EM644 = EM644 + 16	
;
;IF EM644 > 320 THEN
;   EM644 = 0	
;END IF
LDP @MR000
NCJ #1002
;TYPE EM644.U,EM645.U,@MR4500.U
;
;FOR EM644 = EM644 TO 320 STEP 16
;
LD CR2002                ; 常時ON
MOV EM644 EM644          ; Task5 Sub@MR  Task5 Sub@MR
LABEL #2012
LD> EM644 #320           ; Task5 Sub@MR
CJ #2013
;	IF @MR4500:EM644 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM644                ; Task5 Sub@MR
CON
EXT
CON
STA.L Z12
LD<> @MR4500:Z12 #0      ; ①SUB_RB2_MOVE
NCJ #2014
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2015
;	END IF	
;
LABEL #2014
;NEXT
;
LD CR2002                ; 常時ON
LDA EM644                ; Task5 Sub@MR
CON
ADD #16
CON
STA EM644                ; Task5 Sub@MR
LDB CR2009               ; 演算結果が負
CJ #2012
LABEL #2015
LABEL #2013
;IF EM644 < 320 THEN
;
LD< EM644 #320           ; Task5 Sub@MR
NCJ #2016
;	EM645 = (EM644 / 16) * 100 + DMX(@MR4500:EM644) + #4500
;
LD CR2002                ; 常時ON
LDA EM644                ; Task5 Sub@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR4500:Z12          ; ①SUB_RB2_MOVE
CON
DMX
CON
STA @VM6
CON
LDA EM644                ; Task5 Sub@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM7
CON
LDA @VM6
CON
EXT
CON
ADD.L @VM7
CON
ADD.L +4500
CON
STA EM645                ; Task5 Sub@MR
;END IF
;
LABEL #2016
;EM644 = EM644 + 16	
;
LD CR2002                ; 常時ON
LDA EM644                ; Task5 Sub@MR
CON
EXT
CON
ADD.L +16
CON
STA EM644                ; Task5 Sub@MR
;IF EM644 > 320 THEN
;
LD> EM644 #320           ; Task5 Sub@MR
NCJ #2017
;   EM644 = 0	
;
LD CR2002                ; 常時ON
MOV #0 EM644             ; Task5 Sub@MR
;END IF
LABEL #2017
LABEL #1002
;
;<h1/>Task_Init/ﾀｽｸ初期化
;[本STG内容]
;・本Task起動時に必要な初期化処理を記述して下さい
;・起動Taskの全Init処理終了後、Task_StartのSTGが起動します
STG LR805                ; _Grp1_Task5_Init.STG
ENDS
;<h1/>Task_Start/ﾀｽｸ開始
;[本STG内容]
;・Task起動後、以下運転ﾓｰﾄﾞに従い、各STGにJMPします
;【HOME】	→	LR5200
;【AUTO】	→	LR5400
;【MAINTE】	→	LR5600
;・本STGは追記、修正不要です
STG LR405                ; _Grp1_Task5_Start.STG
MPS
AND R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5205               ; _Grp1_Task5_HOME.STG
MRD
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5405               ; _Grp1_Task5_AUTO.STG
MPP
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5605               ; _Grp1_Task5_MAINTE.STG
;<h1/>Task_Finish/ﾀｽｸ終了
;[本STG内容]
;・各Taskの終了STGになります
;・運転ﾓｰﾄﾞに係わらず終了時は本STGを経由して終了して下さい
;・本STGは追記、修正不要です
STG LR605                ; _Grp1_Task5_Fin.STG
MPS
LDB R41205               ; TASK5 PAUSE 要求
ANB @MR001               ; TASK5　ERROR
ANL
RES R41005               ; _Grp1_Task5_起動中ﾌﾗｸﾞ
CON
ENDS
MPP
AND R41205               ; TASK5 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;<h1/>■HOME/原点復帰
;[本STG内容]
;・STG @MR1000の続きから各Taskの原点復帰動作を記述する
;・動作終了時は@MR1515にJMPする事
STG LR5205               ; _Grp1_Task5_HOME.STG
JMP @MR1000              ; HOME
STG @MR1000              ; HOME
RES MR20005              ; TASK5復帰完了
CON
SET @MR1002              ; HOME中
CON
JMP @MR1003
;<h1/>H1：原点復帰条件待ち
;ｽｶﾗRB、給除材ｴﾚﾍﾞｰﾀｰが復帰完了
STG @MR1003
MPS
LDB R41205               ; TASK5 PAUSE 要求
AND MR20000              ; TASK0復帰完了
AND MR20004              ; TASK4復帰完了
AND MR20006              ; TASK6復帰完了
ANL
JMP @MR1004
MPP
AND R41205               ; TASK5 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;<h1/>H2：位置決めｼﾘﾝﾀﾞ復帰
;ﾄﾚｲ位置決め前後ｼﾘﾝﾀﾞ復帰
STG @MR1004
RES MR7304               ; 接着冶具給材_ﾄﾚｲ位置決め前進
CON
SET MR7305               ; 接着冶具給材_ﾄﾚｲ位置決め後退
CON
MPS
LDB MR5111               ; 接着冶具_ﾄﾚｲ位置決め_後限ERR
ANB R5110                ; 接着冶具_ﾄﾚｲ位置決め_前限
AND R5111                ; 接着冶具_ﾄﾚｲ位置決め_後限
ANL
JMP @MR1005
MPP
LD MR5111                ; 接着冶具_ﾄﾚｲ位置決め_後限ERR
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;ﾄﾚｲ位置決め上下ｼﾘﾝﾀﾞ復帰
STG @MR1005
RES MR7306               ; 接着冶具給材_ﾄﾚｲ位置決め上昇
CON
SET MR7307               ; 接着冶具給材_ﾄﾚｲ位置決め下降
CON
MPS
LDB MR5107               ; 接着冶具_ﾄﾚｲ位置決_奥_下限ER
ANB MR5109               ; 接着冶具_ﾄﾚｲ位置決_前_下限ER
ANB R5106                ; 接着冶具_ﾄﾚｲ位置決め_奥_上限
AND R5107                ; 接着冶具_ﾄﾚｲ位置決め_奥_下限
ANB R5108                ; 接着冶具_ﾄﾚｲ位置決め_前_上限
AND R5109                ; 接着冶具_ﾄﾚｲ位置決め_前_下限
ANL
JMP @MR1006
MPP
LD MR5107                ; 接着冶具_ﾄﾚｲ位置決_奥_下限ER
OR MR5109                ; 接着冶具_ﾄﾚｲ位置決_前_下限ER
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;<h1/>H3：給材側ｼﾘﾝﾀﾞ復帰&ﾄﾚｲ確認
;給材側ｼﾘﾝﾀﾞ前後確認
LDB R4708                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_前限
AND R4709                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_後限
ANB R4710                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_前限
AND R4711                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_後限
ANB R4712                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_前限
AND R4713                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_後限
ANB R4714                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_前限
AND R4715                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_後限
OUT @MR800               ; 全給材ﾁｬｯｸ_後退
STG @MR1006
MPS
AND R41205               ; TASK5 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
MPP
ANB R41205               ; TASK5 PAUSE 要求
MPS
ANB @MR800               ; 全給材ﾁｬｯｸ_後退
JMP @MR1008              ; 給材側ｼﾘﾝﾀﾞ前進状態から復帰
MPP
AND @MR800               ; 全給材ﾁｬｯｸ_後退
JMP @MR1011              ; 給材側ｼﾘﾝﾀﾞ後退状態から復帰
;<h1/>H3-1：給材側ｼﾘﾝﾀﾞ前進状態から復帰
;→ﾁｬｯｸを閉じて、上昇させる。この時点ではﾄﾚｲを掴んでいるかは不明
;給材側ﾄﾚｲﾁｬｯｸ_前進
STG @MR1008              ; 給材側ｼﾘﾝﾀﾞ前進状態から復帰
RES MR7503               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_後退
CON
SET MR7502               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_前進
CON
MPS
LDB MR4708               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_前限ERR
ANB MR4710               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_前限ERR
ANB MR4712               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_前限ERR
ANB MR4714               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_前限ERR
AND R4708                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_前限
ANB R4709                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_後限
AND R4710                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_前限
ANB R4711                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_後限
AND R4712                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_前限
ANB R4713                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_後限
AND R4714                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_前限
ANB R4715                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_後限
ANL
JMP @MR1009
MPP
LD MR4708                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_前限ERR
OR MR4710                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_前限ERR
OR MR4712                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_前限ERR
OR MR4714                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_前限ERR
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;給材側ﾁｬｯｸ閉
STG @MR1009
RES MR7501               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_開
CON
SET MR7500               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_閉
CON
MPS
LDB MR4700               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_閉限ERR
ANB MR4702               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_閉限ERR
ANB MR4704               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_閉限ERR
ANB MR4706               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_閉限ERR
AND R4700                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_閉限
ANB R4701                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_開限
AND R4702                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_閉限
ANB R4703                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_開限
AND R4704                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_閉限
ANB R4705                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_開限
AND R4706                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_閉限
ANB R4707                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_開限
ANL
JMP @MR1010
MPP
LD MR4700                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_閉限ERR
OR MR4702                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_閉限ERR
OR MR4704                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_閉限ERR
OR MR4706                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_閉限ERR
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;ﾄﾚｲ有無記憶ｾｯﾄ
STG @MR1010
MPS
AND<> @DM10 #1           ; 給材側ﾄﾚｲ情報(0不明1有2無)
DW #0 @DM10              ; 給材側ﾄﾚｲ情報(0不明1有2無)
CON
JMP @MR1100              ; 共通_給材側ﾄﾚｲﾁｬｯｸ上下親_上昇
MPP
AND= @DM10 #1            ; 給材側ﾄﾚｲ情報(0不明1有2無)
JMP @MR1100              ; 共通_給材側ﾄﾚｲﾁｬｯｸ上下親_上昇
;<h1/>H3-2：給材側ｼﾘﾝﾀﾞ後退状態から復帰
;→ﾁｬｯｸを開いて、上昇させる。ﾁｬｯｸﾄﾚｲ無し
;給材側ﾁｬｯｸ後退
STG @MR1011              ; 給材側ｼﾘﾝﾀﾞ後退状態から復帰
RES MR7502               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_前進
CON
SET MR7503               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_後退
CON
MPS
LDB MR4709               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_後限ERR
ANB MR4711               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_後限ERR
ANB MR4713               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_後限ERR
ANB MR4715               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_後限ERR
ANB R4708                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_前限
AND R4709                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_後限
ANB R4710                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_前限
AND R4711                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_後限
ANB R4712                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_前限
AND R4713                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_後限
ANB R4714                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_前限
AND R4715                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_後限
ANL
JMP @MR1012
MPP
LD MR4709                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_後限ERR
OR MR4711                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_後限ERR
OR MR4713                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_後限ERR
OR MR4715                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_後限ERR
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;給材側ﾄﾚｲﾁｬｯｸ開
STG @MR1012
RES MR7500               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_閉
CON
SET MR7501               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_開
CON
MPS
LDB MR4701               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_開限ERR
ANB MR4703               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_開限ERR
ANB MR4705               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_開限ERR
ANB MR4707               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_開限ERR
ANB R4700                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_閉限
AND R4701                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_開限
ANB R4702                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_閉限
AND R4703                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_開限
ANB R4704                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_閉限
AND R4705                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_開限
ANB R4706                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_閉限
AND R4707                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_開限
ANL
DW #2 @DM10              ; 給材側ﾄﾚｲ情報(0不明1有2無)
CON
JMP @MR1100              ; 共通_給材側ﾄﾚｲﾁｬｯｸ上下親_上昇
MPP
LD MR4701                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_開限ERR
OR MR4703                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_開限ERR
OR MR4705                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_開限ERR
OR MR4707                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_開限ERR
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;<h1/>H4：給材側ﾄﾚｲﾁｬｯｸ上昇
;給材側ﾄﾚｲﾁｬｯｸ上下親_上昇
STG @MR1100              ; 共通_給材側ﾄﾚｲﾁｬｯｸ上下親_上昇
RES MR7504               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ親_下降
CON
SET MR7505               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ親_上昇
CON
MPS
LDB MR4801               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親上限E
ANB MR4805               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親上限E
ANB MR4809               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親上限E
ANB MR4813               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親上限E
ANB R4800                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親下限
AND R4801                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親上限
ANB R4804                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親下限
AND R4805                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親上限
ANB R4808                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親下限
AND R4809                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親上限
ANB R4812                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親下限
AND R4813                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親上限
ANL
JMP @MR1101
MPP
LD MR4801                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親上限E
OR MR4805                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親上限E
OR MR4809                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親上限E
OR MR4813                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親上限E
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;給材側ﾄﾚｲﾁｬｯｸ上下子_上昇
STG @MR1101
RES MR7506               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ子_下降
CON
SET MR7507               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ子_上昇
CON
MPS
LDB MR4803               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_子上限E
ANB MR4807               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_子上限E
ANB MR4811               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_子上限E
ANB MR4815               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_子上限E
ANB R4802                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_子下限
AND R4803                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_子上限
ANB R4806                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_子下限
AND R4807                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_子上限
ANB R4810                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_子下限
AND R4811                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_子上限
ANB R4814                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_子下限
AND R4815                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_子上限
ANL
JMP @MR1200              ; 除材側ｼﾘﾝﾀﾞ復帰&ﾄﾚｲ確認
MPP
LD MR4803                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_子上限E
OR MR4807                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_子上限E
OR MR4811                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_子上限E
OR MR4815                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_子上限E
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;<h1/>H5：除材側ｼﾘﾝﾀﾞ復帰&ﾄﾚｲ確認
;除材側ｼﾘﾝﾀﾞ前後確認
LDB R4908                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_前限
AND R4909                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_後限
ANB R4910                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_前限
AND R4911                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_後限
ANB R4912                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_前限
AND R4913                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_後限
ANB R4914                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_前限
AND R4915                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_後限
OUT @MR801               ; 全除材側ﾁｬｯｸ_後退
STG @MR1200              ; 除材側ｼﾘﾝﾀﾞ復帰&ﾄﾚｲ確認
MPS
AND R41205               ; TASK5 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
MPP
ANB R41205               ; TASK5 PAUSE 要求
MPS
ANB @MR801               ; 全除材側ﾁｬｯｸ_後退
JMP @MR1201              ; 除材側ｼﾘﾝﾀﾞ前進状態から復帰
MPP
AND @MR801               ; 全除材側ﾁｬｯｸ_後退
JMP @MR1204              ; 除材側ｼﾘﾝﾀﾞ後退状態から復帰
;<h1/>H5-1：除材側ｼﾘﾝﾀﾞ前進状態から復帰
;→ﾁｬｯｸを閉じて、上昇させる。この時点ではﾄﾚｲを掴んでいるかは不明
;除材側ﾁｬｯｸ前進
STG @MR1201              ; 除材側ｼﾘﾝﾀﾞ前進状態から復帰
RES MR7511               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_後退
CON
SET MR7510               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_前進
CON
MPS
LDB MR4908               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_前限ERR
ANB MR4910               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_前限ERR
ANB MR4912               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_前限ERR
ANB MR4914               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_前限ERR
AND R4908                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_前限
ANB R4909                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_後限
AND R4910                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_前限
ANB R4911                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_後限
AND R4912                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_前限
ANB R4913                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_後限
AND R4914                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_前限
ANB R4915                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_後限
ANL
JMP @MR1202
MPP
LD MR4908                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_前限ERR
OR MR4910                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_前限ERR
OR MR4912                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_前限ERR
OR MR4914                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_前限ERR
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;除材側ﾁｬｯｸ閉
STG @MR1202
RES MR7509               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_開
CON
SET MR7508               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_閉
CON
MPS
LDB MR4900               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_閉限ERR
ANB MR4902               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_閉限ERR
ANB MR4904               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_閉限ERR
ANB MR4906               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_閉限ERR
AND R4900                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_閉限
ANB R4901                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_開限
AND R4902                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_閉限
ANB R4903                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_開限
AND R4904                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_閉限
ANB R4905                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_開限
AND R4906                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_閉限
ANB R4907                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_開限
ANL
JMP @MR1203
MPP
LD MR4900                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_閉限ERR
OR MR4902                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_閉限ERR
OR MR4904                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_閉限ERR
OR MR4906                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_閉限ERR
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR1203
MPS
AND<> @DM11 #1           ; 除材側ﾄﾚｲ情報(0不明1有2無)
DW #0 @DM11              ; 除材側ﾄﾚｲ情報(0不明1有2無)
CON
JMP @MR1300              ; 共通_除材側ﾄﾚｲﾁｬｯｸ上下親_上昇
MPP
AND= @DM11 #1            ; 除材側ﾄﾚｲ情報(0不明1有2無)
JMP @MR1300              ; 共通_除材側ﾄﾚｲﾁｬｯｸ上下親_上昇
;<h1/>H5-2：除材側ｼﾘﾝﾀﾞ後退状態から復帰
;→ﾁｬｯｸを開いて、上昇させる。ﾁｬｯｸﾄﾚｲ無し
;除材側ﾁｬｯｸ後退
STG @MR1204              ; 除材側ｼﾘﾝﾀﾞ後退状態から復帰
RES MR7510               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_前進
CON
SET MR7511               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_後退
CON
MPS
LDB MR4909               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_後限ERR
ANB MR4911               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_後限ERR
ANB MR4913               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_後限ERR
ANB MR4915               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_後限ERR
ANB R4908                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_前限
AND R4909                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_後限
ANB R4910                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_前限
AND R4911                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_後限
ANB R4912                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_前限
AND R4913                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_後限
ANB R4914                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_前限
AND R4915                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_後限
ANL
JMP @MR1205
MPP
LD MR4909                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_後限ERR
OR MR4911                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_後限ERR
OR MR4913                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_後限ERR
OR MR4915                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_後限ERR
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;除材側ﾄﾚｲﾁｬｯｸ開
STG @MR1205
RES MR7508               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_閉
CON
SET MR7509               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_開
CON
MPS
LDB MR4901               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_開限ERR
ANB MR4903               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_開限ERR
ANB MR4905               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_開限ERR
ANB MR4907               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_開限ERR
ANB R4900                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_閉限
AND R4901                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_開限
ANB R4902                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_閉限
AND R4903                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_開限
ANB R4904                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_閉限
AND R4905                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_開限
ANB R4906                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_閉限
AND R4907                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_開限
ANL
DW #2 @DM11              ; 除材側ﾄﾚｲ情報(0不明1有2無)
CON
JMP @MR1300              ; 共通_除材側ﾄﾚｲﾁｬｯｸ上下親_上昇
MPP
LD MR4901                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_開限ERR
OR MR4903                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_開限ERR
OR MR4905                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_開限ERR
OR MR4907                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_開限ERR
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;<h1/>H6：除材側ﾄﾚｲﾁｬｯｸ上昇
;除材側ﾄﾚｲﾁｬｯｸ上下親_上昇
STG @MR1300              ; 共通_除材側ﾄﾚｲﾁｬｯｸ上下親_上昇
RES MR7512               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ親_下降
CON
SET MR7513               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ親_上昇
CON
MPS
LDB MR5001               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親上限E
ANB MR5005               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親上限E
ANB MR5009               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親上限E
ANB MR5013               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親上限E
ANB R5000                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親下限
AND R5001                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親上限
ANB R5004                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親下限
AND R5005                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親上限
ANB R5008                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親下限
AND R5009                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親上限
ANB R5012                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親下限
AND R5013                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親上限
ANL
JMP @MR1301
MPP
LD MR5001                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親上限E
OR MR5005                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親上限E
OR MR5009                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親上限E
OR MR5013                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親上限E
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;除材側ﾄﾚｲﾁｬｯｸ上下子_上昇
STG @MR1301
RES MR7514               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ子_下降
CON
SET MR7515               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ子_上昇
CON
MPS
LDB MR5003               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_子上限E
ANB MR5007               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_子上限E
ANB MR5011               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_子上限E
ANB MR5015               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_子上限E
ANB R5002                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_子下限
AND R5003                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_子上限
ANB R5006                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_子下限
AND R5007                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_子上限
ANB R5010                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_子下限
AND R5011                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_子上限
ANB R5014                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_子下限
AND R5015                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_子上限
ANL
JMP @MR1400
MPP
LD MR5003                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_子上限E
OR MR5007                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_子上限E
OR MR5011                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_子上限E
OR MR5015                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_子上限E
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;<h1/>H7：ﾄﾚｲ有無確認
STG @MR1400
SET @MR4700              ; ③SUB_HOME_ﾄﾚｲ有無確認
CON
JMP @MR1401
STG @MR1401
AND @MR4701              ; ③SUB_HOME_ﾄﾚｲ有無確認完了
RES @MR4701              ; ③SUB_HOME_ﾄﾚｲ有無確認完了
CON
JMP @MR1402
;RB2移動分岐_ﾄﾚｲ情報より
;POS1:給材側
;POS2:除材側
;POS3:ｽｶﾗ渡し
STG @MR1402
MPS
LD= @DM10 #2             ; 給材側ﾄﾚｲ情報(0不明1有2無)
AND= @DM11 #2            ; 除材側ﾄﾚｲ情報(0不明1有2無)
ANL
MPS
AND= @DM12 #2            ; RB2ﾄﾚｲ情報(0不明1有2無)
DW #2 EM1302             ; RB2Target Pos
MPP
AND= @DM12 #1            ; RB2ﾄﾚｲ情報(0不明1有2無)
MPS
AND= DM11407 #99         ; RB2ﾄﾚｲ処理状況(0未処理99終了)
DW #2 EM1302             ; RB2Target Pos
MPP
AND= DM11407 #0          ; RB2ﾄﾚｲ処理状況(0未処理99終了)
DW #3 EM1302             ; RB2Target Pos
MRD
LD= @DM10 #1             ; 給材側ﾄﾚｲ情報(0不明1有2無)
AND= @DM11 #2            ; 除材側ﾄﾚｲ情報(0不明1有2無)
ANL
DW #2 EM1302             ; RB2Target Pos
MRD
LD= @DM10 #2             ; 給材側ﾄﾚｲ情報(0不明1有2無)
AND= @DM11 #1            ; 除材側ﾄﾚｲ情報(0不明1有2無)
ANL
DW #1 EM1302             ; RB2Target Pos
MRD
LD= @DM10 #1             ; 給材側ﾄﾚｲ情報(0不明1有2無)
AND= @DM11 #1            ; 除材側ﾄﾚｲ情報(0不明1有2無)
AND= @DM12 #2            ; RB2ﾄﾚｲ情報(0不明1有2無)
ANL
DW #1 EM1302             ; RB2Target Pos
MPP
JMP @MR1403
;<h1/>H8：RB2ﾄﾚｲ搬送移動
STG @MR1403
SET @MR4500              ; ①SUB_RB2_MOVE
CON
JMP @MR1404
STG @MR1404
AND @MR4501              ; ①SUB_RB2_MOVE完了
RES @MR4501              ; ①SUB_RB2_MOVE完了
CON
JMP @MR1514
;<h1/>H_END：原点復帰終了
STG @MR1514
SET MR20005              ; TASK5復帰完了
CON
JMP @MR1515              ; HOME END
STG @MR1515              ; HOME END
MPS
LDB R41205               ; TASK5 PAUSE 要求
ANB @MR001               ; TASK5　ERROR
ANL
RES @MR1002              ; HOME中
CON
JMP LR605                ; _Grp1_Task5_Fin.STG
MPP
AND R41205               ; TASK5 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;<h1/>■AUTO/自動動作
STG LR5405               ; _Grp1_Task5_AUTO.STG
JMP @MR3000              ; AUTO Main1
;<h1/>Auto-Main1/Autoﾒｲﾝﾙｰﾁﾝ1
;[本STG内容]
;・各TaskのAUTO動作を記述して下さい
;・動作ﾓｰﾄﾞは「AUTOAC」に格納されています(1～32)
;・@MR3000:AUTO_Main1開始、@MR3001:AUTO_Main1完了、@MR3002:AUTO_Main1動作中
STG @MR3000              ; AUTO Main1
MPS
ANB R47800               ; _Group1　ﾒﾝﾃ動作定停止移行中
MPS
ANB R57305               ; Task5 停止要求
MPS
LD= W2021 W2031          ; CAV機種番号1：CL_2：BK  ﾄﾚﾁｪﾝ機種番号1：CL_2：BK
AND= W2022 W2031         ; 転写機種番号1：CL_2：BK  ﾄﾚﾁｪﾝ機種番号1：CL_2：BK
ANB R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND MR20015              ; 加圧冶具数確認済み
OR DM2000.1              ; 上流OFFLINE
OR R46102                ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANL
SET @MR3002              ; AUTO Main1 Busy
CON
JMP @MR3003
MPP
LD<> W2021 W2031         ; CAV機種番号1：CL_2：BK  ﾄﾚﾁｪﾝ機種番号1：CL_2：BK
OR<> W2022 W2031         ; 転写機種番号1：CL_2：BK  ﾄﾚﾁｪﾝ機種番号1：CL_2：BK
ANB DM2000.1             ; 上流OFFLINE
ANB R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANL
JMP @MR3915              ; AUTO END
MPP
AND R57305               ; Task5 停止要求
JMP @MR3915              ; AUTO END
MPP
AND R47800               ; _Group1　ﾒﾝﾃ動作定停止移行中
JMP @MR3915              ; AUTO END
;<h1/>A1:ﾄﾚｲ状況分岐
;給材ﾁｬｯｸ、除材ﾁｬｯｸ、RB2上の3箇所のﾄﾚｲ情報より分岐
;注：3箇所同時にﾄﾚｲは存在できない(干渉する為)
;
;動作の流れ
;A:給材ｴﾚﾍﾞｰﾀｰ(TASK4)からﾄﾚｲ受取
;↓
;B:給材ﾁｬｯｸからﾄﾚｲ受取
;↓
;C:RB1_ﾜｰｸ受渡し位置へ
;↓
;D:RB1_ﾄﾚｲ除材位置へ
;↓
;E:除材側受渡し前_RB4_給材側移動
STG @MR3003
MPS
AND= @DM12 #2            ; RB2ﾄﾚｲ情報(0不明1有2無)
MPS
LD= @DM10 #2             ; 給材側ﾄﾚｲ情報(0不明1有2無)
AND= @DM11 #2            ; 除材側ﾄﾚｲ情報(0不明1有2無)
ANL
MPS
ANB R57305               ; Task5 停止要求
JMP @MR3004              ; A:給材ｴﾚﾍﾞｰﾀｰ(TASK4)からﾄﾚｲ受取
MPP
AND R57305               ; Task5 停止要求
JMP @MR3915              ; AUTO END
MRD
LD= @DM10 #1             ; 給材側ﾄﾚｲ情報(0不明1有2無)
AND= @DM11 #2            ; 除材側ﾄﾚｲ情報(0不明1有2無)
ANL
JMP @MR3300              ; B:給材ﾁｬｯｸからﾄﾚｲ受取
MPP
LD= @DM10 #2             ; 給材側ﾄﾚｲ情報(0不明1有2無)
AND= @DM11 #1            ; 除材側ﾄﾚｲ情報(0不明1有2無)
ANL
JMP @MR3506              ; E:除材側受渡し前_RB2_給材側移動
MPP
AND= @DM12 #1            ; RB2ﾄﾚｲ情報(0不明1有2無)
MPS
LD= @DM10 #2             ; 給材側ﾄﾚｲ情報(0不明1有2無)
AND= @DM11 #2            ; 除材側ﾄﾚｲ情報(0不明1有2無)
LD= @DM10 #1             ; 給材側ﾄﾚｲ情報(0不明1有2無)
AND= @DM11 #2            ; 除材側ﾄﾚｲ情報(0不明1有2無)
ORL
ANL
MPS
AND<> DM11407 #99        ; RB2ﾄﾚｲ処理状況(0未処理99終了)
JMP @MR3400              ; C:RB2_ﾜｰｸ受渡し位置へ
MPP
AND= DM11407 #99         ; RB2ﾄﾚｲ処理状況(0未処理99終了)
JMP @MR3408              ; D:RB2_ﾄﾚｲ除材位置へ
MPP
LD= @DM10 #2             ; 給材側ﾄﾚｲ情報(0不明1有2無)
AND= @DM11 #1            ; 除材側ﾄﾚｲ情報(0不明1有2無)
ANL
JMP @MR3506              ; E:除材側受渡し前_RB2_給材側移動
;<h1/>A1-A：給材ｴﾚﾍﾞｰﾀｰ(TASK4)からﾄﾚｲ受取
;RB2_除材側移動
STG @MR3004              ; A:給材ｴﾚﾍﾞｰﾀｰ(TASK4)からﾄﾚｲ受取
MPS
LDB R41205               ; TASK5 PAUSE 要求
AND R5215                ; 接着冶具側ｴﾘｱｾﾝｻ_入光(ON)
ANL
DW #2 EM1302             ; RB2Target Pos
CON
SET @MR4500              ; ①SUB_RB2_MOVE
CON
JMP @MR3005
MPP
AND R41205               ; TASK5 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR3005
AND @MR4501              ; ①SUB_RB2_MOVE完了
RES @MR4501              ; ①SUB_RB2_MOVE完了
CON
JMP @MR3006
;④SUB起動
STG @MR3006
SET @MR5000              ; ④SUB_給材ｴﾚﾍﾞｰﾀｰからﾄﾚｲ受取
CON
JMP @MR3007
STG @MR3007
AND @MR5001              ; ④SUB_給材ｴﾚﾍﾞｰﾀｰからﾄﾚｲ受取完了
RES @MR5001              ; ④SUB_給材ｴﾚﾍﾞｰﾀｰからﾄﾚｲ受取完了
CON
MPS
ANB @MR902               ; TASK4停止_ﾄﾚｲ受取無し
JMP @MR3300              ; B:給材ﾁｬｯｸからﾄﾚｲ受取
MPP
AND @MR902               ; TASK4停止_ﾄﾚｲ受取無し
RES @MR902               ; TASK4停止_ﾄﾚｲ受取無し
CON
JMP @MR3003
;<h1/>A1-B：給材ﾁｬｯｸからﾄﾚｲ受取
;RB2_給材側移動
STG @MR3300              ; B:給材ﾁｬｯｸからﾄﾚｲ受取
MPS
LDB R41205               ; TASK5 PAUSE 要求
AND R5215                ; 接着冶具側ｴﾘｱｾﾝｻ_入光(ON)
ANL
DW #1 EM1302             ; RB2Target Pos
CON
SET @MR4500              ; ①SUB_RB2_MOVE
CON
JMP @MR3301
MPP
AND R41205               ; TASK5 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR3301
AND @MR4501              ; ①SUB_RB2_MOVE完了
RES @MR4501              ; ①SUB_RB2_MOVE完了
CON
JMP @MR3302
;給材ﾁｬｯｸからRB2へﾄﾚｲ受渡し
STG @MR3302
SET @MR5200              ; ⑤SUB_給材ﾁｬｯｸからRB2ﾄﾚｲ受渡
CON
JMP @MR3303
STG @MR3303
AND @MR5201              ; ⑤SUB_給材ﾁｬｯｸからRB2ﾄﾚｲ受渡完了
DW #1 DM11404            ; 上冶具取出番号記憶
CON
DW #1 DM11405            ; 下冶具取出番号記憶
CON
DW #0 DM11407            ; RB2ﾄﾚｲ処理状況(0未処理99終了)
CON
RES @MR5201              ; ⑤SUB_給材ﾁｬｯｸからRB2ﾄﾚｲ受渡完了
CON
JMP @MR3400              ; C:RB2_ﾜｰｸ受渡し位置へ
;<h1/>A1-C：RB2_ﾜｰｸ受渡し位置へ
STG @MR3400              ; C:RB2_ﾜｰｸ受渡し位置へ
MPS
ANB R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
MPS
LDB R41205               ; TASK5 PAUSE 要求
AND R5215                ; 接着冶具側ｴﾘｱｾﾝｻ_入光(ON)
ANL
DW #3 EM1302             ; RB2Target Pos
CON
SET @MR4500              ; ①SUB_RB2_MOVE
CON
JMP @MR3402
MPP
AND R41205               ; TASK5 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
MPP
LD R46102                ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND= DM4110 #11          ; _Group1　ﾒﾝﾃ動作番号
ANL
JMP @MR2914
STG @MR3402
AND @MR4501              ; ①SUB_RB2_MOVE完了
RES @MR4501              ; ①SUB_RB2_MOVE完了
CON
JMP @MR3403
;TASK0へ準備完了
STG @MR3403
MPS
AND R5100                ; 接着冶具給材_ﾄﾚｲ有無
RES R47001               ; _処理時間2計測開始
CON
SET MR20400              ; T5→T0_接着冶具ﾄﾚｲ取出しOK
CON
JMP @MR3406
MPP
ANB R5100                ; 接着冶具給材_ﾄﾚｲ有無
TMR @14 #20
CON
AND @T14
DW #2 @DM12              ; RB2ﾄﾚｲ情報(0不明1有2無)
CON
JMP @MR3011              ; ●ﾄﾚｲ状況分岐STG
;TASK0よりﾄﾚｲ排出要求待ち
STG @MR3406
MPS
ANB R41205               ; TASK5 PAUSE 要求
MPS
LDB R57305               ; Task5 停止要求
ANB MR20203              ; 払出し停止
AND MR20401              ; T0→T5ﾄﾚｲ排出要求
ANL
SET R47001               ; _処理時間2計測開始
CON
RES MR20400              ; T5→T0_接着冶具ﾄﾚｲ取出しOK
CON
JMP @MR3407
MPP
LD R57305                ; Task5 停止要求
OR MR20203               ; 払出し停止
ANL
RES MR20400              ; T5→T0_接着冶具ﾄﾚｲ取出しOK
CON
JMP @MR3915              ; AUTO END
MPP
AND R41205               ; TASK5 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR3407
ANB MR20401              ; T0→T5ﾄﾚｲ排出要求
DW #99 DM11407           ; RB2ﾄﾚｲ処理状況(0未処理99終了)
CON
JMP @MR3408              ; D:RB2_ﾄﾚｲ除材位置へ
;<h1/>A1-D：RB2_ﾄﾚｲ除材位置へ
STG @MR3408              ; D:RB2_ﾄﾚｲ除材位置へ
MPS
LDB R41205               ; TASK5 PAUSE 要求
AND R5215                ; 接着冶具側ｴﾘｱｾﾝｻ_入光(ON)
ANL
DW #2 EM1302             ; RB2Target Pos
CON
SET @MR4500              ; ①SUB_RB2_MOVE
CON
JMP @MR3409
MPP
AND R41205               ; TASK5 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR3409
AND @MR4501              ; ①SUB_RB2_MOVE完了
RES @MR4501              ; ①SUB_RB2_MOVE完了
CON
JMP @MR3410
;<h1/>☆1_並列処理1_開始分岐
;給材ｴﾚﾍﾞｰﾀｰ(TASK4)からﾄﾚｲ受取
;※条件1：給材側のﾄﾚｲ無し
;  条件2：給材ｴﾚﾍﾞｰﾀｰが頭出し完了(ﾄﾚｲの受渡しが可能)
;条件外の場合には、並列動作しない。
STG @MR3410
MPS
ANB R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
MPS
LD= @DM10 #2             ; 給材側ﾄﾚｲ情報(0不明1有2無)
ANB MR20203              ; 払出し停止
AND MR20700              ; T4→T5_給材EV頭出し済
ANL
SET @MR900               ; ☆1並列実行ﾌﾗｸﾞ
CON
SET @MR5000              ; ④SUB_給材ｴﾚﾍﾞｰﾀｰからﾄﾚｲ受取
CON
JMP @MR3411              ; 除材側搬送後、ﾄﾚｲ有無確認
MPP
LD= @DM10 #1             ; 給材側ﾄﾚｲ情報(0不明1有2無)
ORB MR20700              ; T4→T5_給材EV頭出し済
OR MR20203               ; 払出し停止
ANL
RES @MR900               ; ☆1並列実行ﾌﾗｸﾞ
CON
JMP @MR3411              ; 除材側搬送後、ﾄﾚｲ有無確認
MPP
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP @MR3411              ; 除材側搬送後、ﾄﾚｲ有無確認
;除材側搬送後、ﾄﾚｲ有無確認
STG @MR3411              ; 除材側搬送後、ﾄﾚｲ有無確認
MPS
ANB R5104                ; 接着冶具除材_ﾄﾚｲ有無
TMR @0 #5                ; ﾄﾚｲ無しﾃﾞｨﾚｲ
CON
AND @T0                  ; ﾄﾚｲ無しﾃﾞｨﾚｲ
JMP @MR3412
MPP
AND R5104                ; 接着冶具除材_ﾄﾚｲ有無
JMP @MR3500
;ERR163_除材側搬送後、ﾄﾚｲ無異常
STG @MR3412
MPS
LDB R41205               ; TASK5 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
DW $7000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #163 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #5104 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task5 ERROR
CON
JMP @MR3413
MPP
AND R41205               ; TASK5 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR3413
MPS
LDB R41205               ; TASK5 PAUSE 要求
AND @MR101               ; Task5 ERROR_End
ANL
RES @MR101               ; Task5 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR3411              ; 除材側搬送後、ﾄﾚｲ有無確認
MPP
AND R41205               ; TASK5 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;除材側ﾄﾚｲﾁｬｯｸ上下子_下降
STG @MR3500
RES MR7515               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ子_上昇
CON
SET MR7514               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ子_下降
CON
MPS
LDB MR5002               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_子下限E
ANB MR5006               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_子下限E
ANB MR5010               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_子下限E
ANB MR5014               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_子下限E
AND R5002                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_子下限
ANB R5003                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_子上限
AND R5006                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_子下限
ANB R5007                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_子上限
AND R5010                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_子下限
ANB R5011                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_子上限
AND R5014                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_子下限
ANB R5015                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_子上限
ANL
JMP @MR3501
MPP
LD MR5002                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_子下限E
OR MR5006                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_子下限E
OR MR5010                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_子下限E
OR MR5014                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_子下限E
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;除材側ﾁｬｯｸ前進
STG @MR3501
RES MR7511               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_後退
CON
SET MR7510               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_前進
CON
MPS
LDB MR4908               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_前限ERR
ANB MR4910               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_前限ERR
ANB MR4912               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_前限ERR
ANB MR4914               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_前限ERR
AND R4908                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_前限
ANB R4909                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_後限
AND R4910                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_前限
ANB R4911                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_後限
AND R4912                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_前限
ANB R4913                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_後限
AND R4914                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_前限
ANB R4915                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_後限
ANL
JMP @MR3502
MPP
LD MR4908                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_前限ERR
OR MR4910                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_前限ERR
OR MR4912                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_前限ERR
OR MR4914                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_前限ERR
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;除材側ﾁｬｯｸ閉
STG @MR3502
RES MR7509               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_開
CON
SET MR7508               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_閉
CON
MPS
LDB MR4900               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_閉限ERR
ANB MR4902               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_閉限ERR
ANB MR4904               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_閉限ERR
ANB MR4906               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_閉限ERR
AND R4900                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_閉限
ANB R4901                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_開限
AND R4902                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_閉限
ANB R4903                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_開限
AND R4904                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_閉限
ANB R4905                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_開限
AND R4906                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_閉限
ANB R4907                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_開限
ANL
JMP @MR3503
MPP
LD MR4900                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_閉限ERR
OR MR4902                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_閉限ERR
OR MR4904                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_閉限ERR
OR MR4906                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_閉限ERR
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;除材側ﾄﾚｲﾁｬｯｸ上下子_上昇
STG @MR3503
RES MR7514               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ子_下降
CON
SET MR7515               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ子_上昇
CON
MPS
LDB MR5003               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_子上限E
ANB MR5007               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_子上限E
ANB MR5011               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_子上限E
ANB MR5015               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_子上限E
ANB R5002                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_子下限
AND R5003                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_子上限
ANB R5006                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_子下限
AND R5007                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_子上限
ANB R5010                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_子下限
AND R5011                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_子上限
ANB R5014                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_子下限
AND R5015                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_子上限
ANL
DW #2 @DM12              ; RB2ﾄﾚｲ情報(0不明1有2無)
CON
DW #1 @DM11              ; 除材側ﾄﾚｲ情報(0不明1有2無)
CON
JMP @MR3504
MPP
LD MR5003                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_子上限E
OR MR5007                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_子上限E
OR MR5011                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_子上限E
OR MR5015                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_子上限E
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;<h1/>☆1_並列処理1_完了確認
;給材ｴﾚﾍﾞｰﾀｰ(TASK4)からﾄﾚｲ受取
;※並列実行していない場合にはｽﾙｰ
STG @MR3504
MPS
LD @MR900                ; ☆1並列実行ﾌﾗｸﾞ
AND @MR5001              ; ④SUB_給材ｴﾚﾍﾞｰﾀｰからﾄﾚｲ受取完了
ANL
MPS
ANB @MR902               ; TASK4停止_ﾄﾚｲ受取無し
JMP @MR3505
MPP
AND @MR902               ; TASK4停止_ﾄﾚｲ受取無し
RES @MR902               ; TASK4停止_ﾄﾚｲ受取無し
MPP
ANB @MR900               ; ☆1並列実行ﾌﾗｸﾞ
JMP @MR3506              ; E:除材側受渡し前_RB2_給材側移動
STG @MR3505
RES @MR900               ; ☆1並列実行ﾌﾗｸﾞ
CON
RES @MR5001              ; ④SUB_給材ｴﾚﾍﾞｰﾀｰからﾄﾚｲ受取完了
CON
JMP @MR3506              ; E:除材側受渡し前_RB2_給材側移動
;<h1/>A1-E：除材側受渡し
;RB2_給材側移動
STG @MR3506              ; E:除材側受渡し前_RB2_給材側移動
MPS
LDB R41205               ; TASK5 PAUSE 要求
AND R5215                ; 接着冶具側ｴﾘｱｾﾝｻ_入光(ON)
ANL
DW #1 EM1302             ; RB2Target Pos
CON
SET @MR4500              ; ①SUB_RB2_MOVE
CON
JMP @MR3507
MPP
AND R41205               ; TASK5 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR3507
AND @MR4501              ; ①SUB_RB2_MOVE完了
RES @MR4501              ; ①SUB_RB2_MOVE完了
CON
JMP @MR3508
;<h1/>☆2_並列処理2_開始分岐
;※給材ﾁｬｯｸにﾄﾚｲが有る場合
;給材ﾁｬｯｸからRB2へﾄﾚｲ受渡し
STG @MR3508
MPS
LD= @DM10 #1             ; 給材側ﾄﾚｲ情報(0不明1有2無)
ANB R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANL
SET @MR901               ; ☆2並列実行
CON
SET @MR5200              ; ⑤SUB_給材ﾁｬｯｸからRB2ﾄﾚｲ受渡
CON
JMP @MR3600
MPP
LD= @DM10 #2             ; 給材側ﾄﾚｲ情報(0不明1有2無)
OR R46102                ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANL
JMP @MR3600
;除材ｴﾚﾍﾞｰﾀｰへﾄﾚｲ受渡し
STG @MR3600
SET @MR5400              ; ⑥SUB_除材ｴﾚﾍﾞｰﾀｰへﾄﾚｲ受渡し
CON
JMP @MR3601
STG @MR3601
MPS
ANB @MR901               ; ☆2並列実行
JMP @MR3700
MPP
AND @MR901               ; ☆2並列実行
JMP @MR3603
;<h1/>☆2_並列処理2_完了
;給材ﾁｬｯｸからRB2へﾄﾚｲ受渡し
STG @MR3603
AND @MR5201              ; ⑤SUB_給材ﾁｬｯｸからRB2ﾄﾚｲ受渡完了
DW #1 DM11404            ; 上冶具取出番号記憶
CON
DW #1 DM11405            ; 下冶具取出番号記憶
CON
DW #0 DM11407            ; RB2ﾄﾚｲ処理状況(0未処理99終了)
CON
RES @MR5201              ; ⑤SUB_給材ﾁｬｯｸからRB2ﾄﾚｲ受渡完了
CON
JMP @MR3604
;RB2_ﾜｰｸ受渡し位置へ
STG @MR3604
MPS
LDB R41205               ; TASK5 PAUSE 要求
AND R5215                ; 接着冶具側ｴﾘｱｾﾝｻ_入光(ON)
ANL
DW #3 EM1302             ; RB2Target Pos
CON
SET @MR4500              ; ①SUB_RB2_MOVE
CON
JMP @MR3605
MPP
AND R41205               ; TASK5 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR3605
AND @MR4501              ; ①SUB_RB2_MOVE完了
RES @MR4501              ; ①SUB_RB2_MOVE完了
CON
JMP @MR3606
;TASK0へ準備完了
STG @MR3606
RES R47001               ; _処理時間2計測開始
CON
SET MR20400              ; T5→T0_接着冶具ﾄﾚｲ取出しOK
CON
JMP @MR3700
;<h1/>A-2:共通_⑥SUB_除材ｴﾚﾍﾞｰﾀｰへﾄﾚｲ受渡し_完了確認
STG @MR3700
AND @MR5401              ; ⑥SUB_除材ｴﾚﾍﾞｰﾀｰへﾄﾚｲ受渡し_終
RES @MR5401              ; ⑥SUB_除材ｴﾚﾍﾞｰﾀｰへﾄﾚｲ受渡し_終
CON
MPS
ANB @MR901               ; ☆2並列実行
JMP @MR3715
MPP
AND @MR901               ; ☆2並列実行
JMP @MR3701
;並列処理2実行ﾌﾗｸﾞﾘｾｯﾄ
STG @MR3701
RES @MR901               ; ☆2並列実行
CON
JMP @MR3406
;ﾄﾚｲ状況分岐STGへ戻る
STG @MR3715
MPS
ANB R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP @MR3003
MPP
LD R46102                ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND= DM4110 #12          ; _Group1　ﾒﾝﾃ動作番号
ANL
JMP @MR2914
;<h1/>A_END：Auto終了処理
STG @MR3915              ; AUTO END
MPS
LDB R41205               ; TASK5 PAUSE 要求
ANB @MR001               ; TASK5　ERROR
ANB @MR4002              ; Main2 Busy
ANL
RES @MR3002              ; AUTO Main1 Busy
CON
JMP LR605                ; _Grp1_Task5_Fin.STG
MPP
AND R41205               ; TASK5 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;<h1/>Auto-Main2/Autoﾒｲﾝﾙｰﾁﾝ2
;[本STG内容]
;・@MR4000の起動はMain1にて行う事
;・@MR4000:AUTO_Main2開始、@MR4001:AUTO_Main2完了、@MR4002:AUTO_Main2動作中
STG @MR4000              ; AUTO Main2
SET @MR4002              ; Main2 Busy
CON
JMP @MR4003
STG @MR4003
JMP @MR4415              ; Main2 END
STG @MR4415              ; Main2 END
SET @MR4001              ; Main2 END
CON
RES @MR4002              ; Main2 Busy
CON
ENDS
;<h1/>■MAINTE/ﾒﾝﾃﾅﾝｽ動作
;[本STG内容]
;・各TaskのMAINTE動作を記述して下さい
;・動作ﾓｰﾄﾞは「MAINTEAC*」に格納されています(1～32)
;・動作終了時は@MR2915にJMPして下さい
;ﾒﾝﾃ動作条件
;
;段ﾊﾞﾗｼ条件
;①給材・除材ﾁｬｯｸ開&親上昇&子上昇、位置決め後退&下降
;②給材ｴﾚﾍﾞｰﾀｰｻｰﾁ済OR下端、除材ｴﾚﾍﾞｰﾀｰｻｰﾁ済OR下端
;③ｽｶﾗRB範囲外ORﾊﾝﾄﾞｼﾘﾝﾀﾞ全上昇
;④RB2ﾄﾚｲ搬送にﾄﾚｲ無し&ﾄﾚｲ検出範囲内
;
;段積み条件
;①給材・除材ﾁｬｯｸ開&親上昇&子上昇、位置決め下降
;②給材ｴﾚﾍﾞｰﾀｰｻｰﾁ済OR下端、除材ｴﾚﾍﾞｰﾀｰｻｰﾁ済OR下端
;③ｽｶﾗRB範囲外ORﾊﾝﾄﾞｼﾘﾝﾀﾞ全上昇
;④RB2ﾄﾚｲ搬送にﾄﾚｲ有り&ﾄﾚｲ検出範囲内
;
LDB R4800                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親下限
AND R4801                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親上限
ANB R4802                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_子下限
AND R4803                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_子上限
ANB R4804                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親下限
AND R4805                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親上限
ANB R4806                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_子下限
AND R4807                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_子上限
ANB R4808                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親下限
AND R4809                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親上限
ANB R4810                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_子下限
AND R4811                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_子上限
ANB R4812                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親下限
AND R4813                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親上限
ANB R4814                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_子下限
AND R4815                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_子上限
ANB R5106                ; 接着冶具_ﾄﾚｲ位置決め_奥_上限
AND R5107                ; 接着冶具_ﾄﾚｲ位置決め_奥_下限
ANB R5108                ; 接着冶具_ﾄﾚｲ位置決め_前_上限
AND R5109                ; 接着冶具_ﾄﾚｲ位置決め_前_下限
ANB R5000                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親下限
AND R5001                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親上限
ANB R5002                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_子下限
AND R5003                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_子上限
ANB R5004                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親下限
AND R5005                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親上限
ANB R5006                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_子下限
AND R5007                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_子上限
ANB R5008                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親下限
AND R5009                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親上限
ANB R5010                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_子下限
AND R5011                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_子上限
ANB R5012                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親下限
AND R5013                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親上限
ANB R5014                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_子下限
AND R5015                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_子上限
LDB R5202                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_下限
AND R5203                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_上限
ANB R5206                ; ｽｶﾗRB_接着上冶具吸着_下限
AND R5207                ; ｽｶﾗRB_接着上冶具吸着_上限
ANB R5300                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_下限
AND R5301                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_上限
AND<> DM11034 #11        ; ｽｶﾗRB位置信号
AND<> DM11034 #13        ; ｽｶﾗRB位置信号
ORB DM11033.13           ; SRB出力:上下治具エリア
ANL
LD<=.L DM20690 +11000    ; 軸1 現在座標
OR MR20102               ; 接着給材EVｻｰﾁ済
ANL
LD<=.L DM20750 +11000    ; 軸2 現在座標
OR MR20103               ; 接着除材EVｻｰﾁ済
ANL
MPS
LD<=.L DM11008 +22200    ; RB2 現在位置(下位)
ANB R5100                ; 接着冶具給材_ﾄﾚｲ有無
LD>=.L DM11008 +42600    ; RB2 現在位置(下位)
ANB R5104                ; 接着冶具除材_ﾄﾚｲ有無
ORL
ANB R5110                ; 接着冶具_ﾄﾚｲ位置決め_前限
AND R5111                ; 接着冶具_ﾄﾚｲ位置決め_後限
ANL
OUT MR20106              ; 接着段ﾊﾞﾗｼ条件
MPP
LD<=.L DM11008 +22200    ; RB2 現在位置(下位)
AND R5100                ; 接着冶具給材_ﾄﾚｲ有無
LD>=.L DM11008 +42600    ; RB2 現在位置(下位)
AND R5104                ; 接着冶具除材_ﾄﾚｲ有無
ORL
ANL
OUT MR20107              ; 接着段積み条件
;<h1/>ﾒﾝﾃ動作分岐
STG LR5605               ; _Grp1_Task5_MAINTE.STG
JMP @MR2000              ; Mainte
STG @MR2000              ; Mainte
SET @MR2002              ; ﾒﾝﾃ中
CON
JMP @MR2003
STG @MR2003
MPS
AND= DM4110 #11          ; _Group1　ﾒﾝﾃ動作番号
MPS
AND MR20106              ; 接着段ﾊﾞﾗｼ条件
JMP @MR3004              ; A:給材ｴﾚﾍﾞｰﾀｰ(TASK4)からﾄﾚｲ受取
MPP
ANB MR20106              ; 接着段ﾊﾞﾗｼ条件
JMP @MR2100
MRD
AND= DM4110 #12          ; _Group1　ﾒﾝﾃ動作番号
MPS
AND MR20107              ; 接着段積み条件
JMP @MR3408              ; D:RB2_ﾄﾚｲ除材位置へ
MPP
ANB MR20107              ; 接着段積み条件
JMP @MR2102
MRD
LD= DM4110 #25           ; _Group1　ﾒﾝﾃ動作番号
OR= DM4110 #26           ; _Group1　ﾒﾝﾃ動作番号
ANL
JMP @MR2400              ; ｼﾘﾝﾀﾞｰ手動操作
MPP
LD<> DM4110 #11          ; _Group1　ﾒﾝﾃ動作番号
AND<> DM4110 #12         ; _Group1　ﾒﾝﾃ動作番号
AND<> DM4110 #25         ; _Group1　ﾒﾝﾃ動作番号
AND<> DM4110 #26         ; _Group1　ﾒﾝﾃ動作番号
ANL
JMP @MR2915              ; Mainte END
;<h1/>ｽﾃｯﾌﾟor通常　か選択
STG @MR2004
MPS
MSTRT SELECT_POST #1 MyTask #0 @MR2005;自ﾀｽｸ番号
MPP
AND @MR2005
RES @MR2005
CON
ENDS
;<h1/>段ﾊﾞﾗｼ動作条件NG
STG @MR2100
SET R39004               ; ｴﾗｰ中
CON
DW $1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #104 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task5 ERROR
CON
JMP @MR2101
STG @MR2101
MPS
LDB R41205               ; TASK5 PAUSE 要求
AND @MR101               ; Task5 ERROR_End
ANL
RES @MR101               ; Task5 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR2914
MPP
AND R41205               ; TASK5 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;<h1/>段積み動作条件NG
STG @MR2102
SET R39004               ; ｴﾗｰ中
CON
DW $1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #105 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task5 ERROR
CON
JMP @MR2103
STG @MR2103
MPS
LDB R41205               ; TASK5 PAUSE 要求
AND @MR101               ; Task5 ERROR_End
ANL
RES @MR101               ; Task5 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR2914
MPP
AND R41205               ; TASK5 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;<h1/>手動操作_RB移動
STG @MR2400              ; ｼﾘﾝﾀﾞｰ手動操作
MPS
ANB R41205               ; TASK5 PAUSE 要求
OUT @MR2402              ; ｼﾘﾝﾀﾞｰ 手動操作中
CON
AND @MR1902              ; 終了確認
JMP @MR2914
MRD
AND R41205               ; TASK5 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
MPP
LD= DM4110 #25           ; _Group1　ﾒﾝﾃ動作番号
ANP MR22000              ; Cylinder動作終了
LD= DM4110 #26           ; _Group1　ﾒﾝﾃ動作番号
LDP R44914               ; Teaching End2
ORP R44915               ; Teaching End
ANL
ORL
ANL
SET @MR1902              ; 終了確認
LDP MR22610              ; SW91RB2POS1
AND @MR2402              ; ｼﾘﾝﾀﾞｰ 手動操作中
ANB @MR4502              ; ①SUB_RB2_MOVE中
DW #1 EM1302             ; RB2Target Pos
LDP MR22611              ; SW92RB2POS2
AND @MR2402              ; ｼﾘﾝﾀﾞｰ 手動操作中
ANB @MR4502              ; ①SUB_RB2_MOVE中
DW #2 EM1302             ; RB2Target Pos
LDP MR22612              ; SW93RB2POS3
AND @MR2402              ; ｼﾘﾝﾀﾞｰ 手動操作中
ANB @MR4502              ; ①SUB_RB2_MOVE中
DW #3 EM1302             ; RB2Target Pos
;<h1/>RB移動起動条件
LDB R4800                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親下限
AND R4801                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親上限
ANB R4802                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_子下限
AND R4803                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_子上限
ANB R4804                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親下限
AND R4805                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親上限
ANB R4806                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_子下限
AND R4807                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_子上限
ANB R4808                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親下限
AND R4809                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親上限
ANB R4810                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_子下限
AND R4811                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_子上限
ANB R4812                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親下限
AND R4813                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親上限
ANB R4814                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_子下限
AND R4815                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_子上限
ANB R5106                ; 接着冶具_ﾄﾚｲ位置決め_奥_上限
AND R5107                ; 接着冶具_ﾄﾚｲ位置決め_奥_下限
ANB R5108                ; 接着冶具_ﾄﾚｲ位置決め_前_上限
AND R5109                ; 接着冶具_ﾄﾚｲ位置決め_前_下限
LD<=.L DM20690 +5000     ; 軸1 現在座標
OR MR20102               ; 接着給材EVｻｰﾁ済
ANL
OUT @MR002               ; RB2接着給材側進入OK
LDB R5000                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親下限
AND R5001                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親上限
ANB R5002                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_子下限
AND R5003                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_子上限
ANB R5004                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親下限
AND R5005                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親上限
ANB R5006                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_子下限
AND R5007                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_子上限
ANB R5008                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親下限
AND R5009                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親上限
ANB R5010                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_子下限
AND R5011                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_子上限
ANB R5012                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親下限
AND R5013                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親上限
ANB R5014                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_子下限
AND R5015                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_子上限
LD<=.L DM20750 +8000     ; 軸2 現在座標
OR MR20103               ; 接着除材EVｻｰﾁ済
ANL
OUT @MR003               ; RB2接着除材側進入OK
LDB R5202                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_下限
AND R5203                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_上限
ANB R5206                ; ｽｶﾗRB_接着上冶具吸着_下限
AND R5207                ; ｽｶﾗRB_接着上冶具吸着_上限
ANB R5300                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_下限
AND R5301                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_上限
AND<> DM11034 #11        ; ｽｶﾗRB位置信号
AND<> DM11034 #13        ; ｽｶﾗRB位置信号
ORB DM11033.13           ; SRB出力:上下治具エリア
ANB DM11034.15           ; SRB出力:動作中
OUT @MR004               ; ｽｶﾗRB干渉外
;<h1/>RB移動起動
LDP MR23003              ; SW148RB2移動開始
AND @MR2402              ; ｼﾘﾝﾀﾞｰ 手動操作中
ANB @MR4502              ; ①SUB_RB2_MOVE中
AND @MR002               ; RB2接着給材側進入OK
AND @MR003               ; RB2接着除材側進入OK
AND @MR004               ; ｽｶﾗRB干渉外
AND R5215                ; 接着冶具側ｴﾘｱｾﾝｻ_入光(ON)
SET @MR2403
STG @MR2403
SET @MR4500              ; ①SUB_RB2_MOVE
CON
JMP @MR2404
STG @MR2404
AND @MR4501              ; ①SUB_RB2_MOVE完了
RES @MR4501              ; ①SUB_RB2_MOVE完了
CON
ENDS
;<h1/>Maintenance 終了
STG @MR2914
MCALL MODE_INDI #2
MCALL HOLD_REQUEST MyGroup;自ｸﾞﾙｰﾌﾟ番号
JMP @MR2915              ; Mainte END
STG @MR2915              ; Mainte END
MPS
LD R41205                ; TASK5 PAUSE 要求
ANB @MR001               ; TASK5　ERROR
ANL
SET @MR1900              ; Main1 HALT許可
MPP
ANB R41205               ; TASK5 PAUSE 要求
RES @MR1902              ; 終了確認
CON
RES @MR2002              ; ﾒﾝﾃ中
CON
JMP LR605                ; _Grp1_Task5_Fin.STG
;<h1/>■SubRoutines/ｻﾌﾞﾙｰﾁﾝ
;[記述方法]
;・ｻﾌﾞﾙｰﾁﾝは本ﾌﾞｯｸﾏｰｸから下に記述していって下さい
;・ｻﾌﾞﾙｰﾁﾝは必ずﾌﾞｯｸﾏｰｸを挿入して処理内容を明確にする事
;<h1/>①SUB_RB2_MOVE/接着冶具搬送_動作
STG @MR4500              ; ①SUB_RB2_MOVE
AND R5215                ; 接着冶具側ｴﾘｱｾﾝｻ_入光(ON)
SET @MR4502              ; ①SUB_RB2_MOVE中
CON
JMP @MR4503              ; RB2_MOVE_ｱﾗｰﾑﾘｾｯﾄ &ｻｰﾎﾞON
;RB2_MOVE_ｱﾗｰﾑﾘｾｯﾄ &ｻｰﾎﾞON  ｱﾗｰﾑﾘｾｯﾄできない場合は、ｻｰﾎﾞOFFしError発生
STG @MR4503              ; RB2_MOVE_ｱﾗｰﾑﾘｾｯﾄ &ｻｰﾎﾞON
MPS
BSET DM11215 #3          ; RB2 制御信号
CON
BANB DM11015 #3          ; RB2 状態信号
BSET DM11215 #4          ; RB2 制御信号
CON
BAND DM11015 #4          ; RB2 状態信号
BRES DM11215 #3          ; RB2 制御信号
CON
JMP @MR4504
MPP
BLD DM11015 #3           ; RB2 状態信号
BORB DM11015 #4          ; RB2 状態信号
ANL
TMR @4 #20               ; RB2ｴﾗｰ
CON
AND @T4                  ; RB2ｴﾗｰ
BRES DM11215 #3          ; RB2 制御信号
CON
BRES DM11215 #4          ; RB2 制御信号
CON
JMP @MR4600              ; Error12 RB2_動作異常
STG @MR4504
SET R35100               ; RB2 MOVE
CON
JMP @MR4505
STG @MR4505
AND R35101               ; RB2 MOVE END
RES R35101               ; RB2 MOVE END
CON
JMP @MR4506
STG @MR4506
MPS
ANB R35103               ; RB2 Alarm
JMP @MR4507
MPP
AND R35103               ; RB2 Alarm
RES R35103               ; RB2 Alarm
CON
JMP @MR4600              ; Error12 RB2_動作異常
STG @MR4507
SET @MR4501              ; ①SUB_RB2_MOVE完了
CON
RES @MR4502              ; ①SUB_RB2_MOVE中
CON
ENDS
;<h1/>②SUB_RB2_HOME/接着冶具搬送_復帰
STG @MR4508              ; ②SUB_RB2_HOME
SET @MR4510              ; ②SUB_RB2_HOME中
CON
JMP @MR4511              ; RB2_HOME_ｱﾗｰﾑﾘｾｯﾄ &ｻｰﾎﾞON
;RB2_HOME_ｱﾗｰﾑﾘｾｯﾄ &ｻｰﾎﾞON  ｱﾗｰﾑﾘｾｯﾄできない場合は、ｻｰﾎﾞOFFしError発生
STG @MR4511              ; RB2_HOME_ｱﾗｰﾑﾘｾｯﾄ &ｻｰﾎﾞON
MPS
BSET DM11215 #3          ; RB2 制御信号
CON
BANB DM11015 #3          ; RB2 状態信号
BSET DM11215 #4          ; RB2 制御信号
CON
BAND DM11015 #4          ; RB2 状態信号
BRES DM11215 #3          ; RB2 制御信号
CON
JMP @MR4512
MPP
BLD DM11015 #3           ; RB2 状態信号
BORB DM11015 #4          ; RB2 状態信号
ANL
TMR @5 #20               ; RB2ｴﾗｰ
CON
AND @T5                  ; RB2ｴﾗｰ
BRES DM11215 #3          ; RB2 制御信号
CON
BRES DM11215 #4          ; RB2 制御信号
CON
JMP @MR4600              ; Error12 RB2_動作異常
STG @MR4512
MPS
BAND DM11015 #1          ; RB2 状態信号
JMP @MR4515
MPP
BANB DM11015 #1          ; RB2 状態信号
SET R35108               ; RB2 HOME
CON
JMP @MR4513
STG @MR4513
AND R35109               ; RB2 HOME END
RES R35109               ; RB2 HOME END
CON
JMP @MR4514
STG @MR4514
MPS
ANB R35103               ; RB2 Alarm
JMP @MR4515
MPP
AND R35103               ; RB2 Alarm
RES R35103               ; RB2 Alarm
CON
JMP @MR4600              ; Error12 RB2_動作異常
STG @MR4515
SET @MR4509              ; ②SUB_RB2_HOME完了
CON
RES @MR4510              ; ②SUB_RB2_HOME中
CON
ENDS
;Error12 RB2_動作異常
STG @MR4600              ; Error12 RB2_動作異常
ANB R39900               ; RB動作中
MPS
LDB R41205               ; TASK5 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
MPS
DW $1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #2 @DM1               ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task5 ERROR
CON
JMP @MR4601
MPP
SET B3990                ; ｱﾗｰﾑ詳細表示
CON
LDA DM11014              ; RB2 ｱﾗｰﾑｺｰﾄﾞ
CON
STA DM50310              ; RB ｱﾗｰﾑ表示
MPP
AND R41205               ; TASK5 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR4601
SET @MR1900              ; Main1 HALT許可
CON
AND @MR101               ; Task5 ERROR_End
RES @MR101               ; Task5 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
RES B3990                ; ｱﾗｰﾑ詳細表示
CON
DW #0 DM50310            ; RB ｱﾗｰﾑ表示
CON
MPS
AND @MR4510              ; ②SUB_RB2_HOME中
JMP @MR4511              ; RB2_HOME_ｱﾗｰﾑﾘｾｯﾄ &ｻｰﾎﾞON
MPP
AND @MR4502              ; ①SUB_RB2_MOVE中
JMP @MR4503              ; RB2_MOVE_ｱﾗｰﾑﾘｾｯﾄ &ｻｰﾎﾞON
;<h1/>③SUB_HOME_ﾄﾚｲ有無確認
STG @MR4700              ; ③SUB_HOME_ﾄﾚｲ有無確認
SET @MR4702              ; SUB2 置き動作 実行中
CON
JMP @MR4703              ; 分岐
;RB1の位置が給材側OR除材側(ﾄﾚｲ有無検出用)
;
;*****RB1の位置が給材側範囲内*****
;
;A:給材側のﾄﾚｲ有無でRB1上のﾄﾚｲを検出  かつ  給材側ﾄﾚｲ情報不明OR有記憶   
;→給材側ﾄﾚｲ情報「無」&復帰動作
;
;B:給材側のﾄﾚｲ有無でRB1上のﾄﾚｲを未検出  かつ  給材側ﾄﾚｲ情報不明OR有記憶 
;→RB1給材位置移動、ﾁｬｯｸ下降後、ﾄﾚｲ有無確認
;
;AB共通:除材側のﾄﾚｲ有無確認
;
;*****RB1の位置が除材側範囲内*****
;
;C:除材側のﾄﾚｲ有無でRB1上のﾄﾚｲを検出  かつ  除材側ﾄﾚｲ情報不明OR有記憶   
;→C:除材側ﾄﾚｲ情報「無」&復帰動作へ
;
;D:除材側のﾄﾚｲ有無でRB1上のﾄﾚｲを未検出  かつ  除材側ﾄﾚｲ情報不明OR有記憶 
;→RB1除材位置移動、ﾁｬｯｸ下降後、ﾄﾚｲ有無確認
;
;CD共通:給材側のﾄﾚｲ有無確認
;
;*****RB1の位置が給材側範囲外かつ除材側範囲外*****
;E:給材、除材側の近い方へ移動。(干渉がある為、ﾄﾚｲはRB1上かﾁｬｯｸ上の両方には存在できない）
STG @MR4703              ; 分岐
MPS
AND<=.L DM11008 +22200   ; RB2 現在位置(下位)
MPS
AND R5100                ; 接着冶具給材_ﾄﾚｲ有無
TMR @15 #5
CON
AND @T15
DW #1 @DM12              ; RB2ﾄﾚｲ情報(0不明1有2無)
CON
MPS
LD= @DM10 #0             ; 給材側ﾄﾚｲ情報(0不明1有2無)
OR= @DM10 #1             ; 給材側ﾄﾚｲ情報(0不明1有2無)
ANL
JMP @MR4706              ; A
MPP
AND= @DM10 #2            ; 給材側ﾄﾚｲ情報(0不明1有2無)
JMP @MR4714              ; AB共通:除材側のﾄﾚｲ有無確認
MPP
ANB R5100                ; 接着冶具給材_ﾄﾚｲ有無
TMR @16 #5
CON
AND @T16
DW #2 @DM12              ; RB2ﾄﾚｲ情報(0不明1有2無)
CON
MPS
LD= @DM10 #0             ; 給材側ﾄﾚｲ情報(0不明1有2無)
OR= @DM10 #1             ; 給材側ﾄﾚｲ情報(0不明1有2無)
ANL
JMP @MR4708              ; B
MPP
AND= @DM10 #2            ; 給材側ﾄﾚｲ情報(0不明1有2無)
JMP @MR4714              ; AB共通:除材側のﾄﾚｲ有無確認
MRD
AND>=.L DM11008 +42600   ; RB2 現在位置(下位)
MPS
AND R5104                ; 接着冶具除材_ﾄﾚｲ有無
TMR @17 #5
CON
AND @T17
DW #1 @DM12              ; RB2ﾄﾚｲ情報(0不明1有2無)
CON
MPS
LD= @DM11 #0             ; 除材側ﾄﾚｲ情報(0不明1有2無)
OR= @DM11 #1             ; 除材側ﾄﾚｲ情報(0不明1有2無)
ANL
JMP @MR4805              ; C
MPP
AND= @DM11 #2            ; 除材側ﾄﾚｲ情報(0不明1有2無)
JMP @MR4813              ; CD共通:給材側のﾄﾚｲ有無確認
MPP
ANB R5104                ; 接着冶具除材_ﾄﾚｲ有無
TMR @18 #5
CON
AND @T18
DW #2 @DM12              ; RB2ﾄﾚｲ情報(0不明1有2無)
CON
MPS
LD= @DM11 #0             ; 除材側ﾄﾚｲ情報(0不明1有2無)
OR= @DM11 #1             ; 除材側ﾄﾚｲ情報(0不明1有2無)
ANL
JMP @MR4807              ; D
MPP
AND= @DM11 #2            ; 除材側ﾄﾚｲ情報(0不明1有2無)
JMP @MR4813              ; CD共通:給材側のﾄﾚｲ有無確認
MPP
LD>.L DM11008 +22200     ; RB2 現在位置(下位)
AND<.L DM11008 +42600    ; RB2 現在位置(下位)
ANL
MPS
AND<.L DM11008 +35000    ; RB2 現在位置(下位)
DW #1 EM1302             ; RB2Target Pos
CON
JMP @MR4704              ; E
MPP
AND>=.L DM11008 +35000   ; RB2 現在位置(下位)
DW #2 EM1302             ; RB2Target Pos
CON
JMP @MR4704              ; E
;RB1移動
STG @MR4704              ; E
SET @MR4500              ; ①SUB_RB2_MOVE
CON
JMP @MR4705
STG @MR4705
AND @MR4501              ; ①SUB_RB2_MOVE完了
RES @MR4501              ; ①SUB_RB2_MOVE完了
CON
JMP @MR4703              ; 分岐
;<h1/>A:給材側のﾄﾚｲ有無でRB2上のﾄﾚｲを検出  かつ  給材側ﾄﾚｲ情報不明  
;→給材側ﾄﾚｲ情報「無」&復帰動作
;給材側ﾁｬｯｸ開
STG @MR4706              ; A
RES MR7500               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_閉
CON
SET MR7501               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_開
CON
MPS
LDB MR4701               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_開限ERR
ANB MR4703               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_開限ERR
ANB MR4705               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_開限ERR
ANB MR4707               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_開限ERR
ANB R4700                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_閉限
AND R4701                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_開限
ANB R4702                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_閉限
AND R4703                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_開限
ANB R4704                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_閉限
AND R4705                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_開限
ANB R4706                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_閉限
AND R4707                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_開限
ANL
JMP @MR4707
MPP
LD MR4701                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_開限ERR
OR MR4703                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_開限ERR
OR MR4705                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_開限ERR
OR MR4707                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_開限ERR
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;給材側ﾁｬｯｸ後退
STG @MR4707
RES MR7502               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_前進
CON
SET MR7503               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_後退
CON
MPS
LDB MR4709               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_後限ERR
ANB MR4711               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_後限ERR
ANB MR4713               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_後限ERR
ANB MR4715               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_後限ERR
ANB R4708                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_前限
AND R4709                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_後限
ANB R4710                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_前限
AND R4711                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_後限
ANB R4712                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_前限
AND R4713                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_後限
ANB R4714                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_前限
AND R4715                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_後限
ANL
DW #2 @DM10              ; 給材側ﾄﾚｲ情報(0不明1有2無)
CON
JMP @MR4714              ; AB共通:除材側のﾄﾚｲ有無確認
MPP
LD MR4709                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_後限ERR
OR MR4711                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_後限ERR
OR MR4713                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_後限ERR
OR MR4715                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_後限ERR
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;<h1/>B:給材側のﾄﾚｲ有無でRB2上のﾄﾚｲを未検出  かつ  給材側ﾄﾚｲ情報不明
;→RB2給材位置移動、ﾁｬｯｸ下降後、ﾄﾚｲ有無確認
;加圧冶具搬送RB2_給材側移動
STG @MR4708              ; B
DW #1 EM1302             ; RB2Target Pos
CON
SET @MR4500              ; ①SUB_RB2_MOVE
CON
JMP @MR4709
STG @MR4709
AND @MR4501              ; ①SUB_RB2_MOVE完了
RES @MR4501              ; ①SUB_RB2_MOVE完了
CON
JMP @MR4710
;給材側ﾄﾚｲﾁｬｯｸ上下親_下降
STG @MR4710
RES MR7505               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ親_上昇
CON
SET MR7504               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ親_下降
CON
MPS
LDB MR4800               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親下限E
ANB MR4804               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親下限E
ANB MR4808               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親下限E
ANB MR4812               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親下限E
AND R4800                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親下限
ANB R4801                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親上限
AND R4804                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親下限
ANB R4805                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親上限
AND R4808                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親下限
ANB R4809                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親上限
AND R4812                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親下限
ANB R4813                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親上限
ANL
JMP @MR4711
MPP
LD MR4800                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親下限E
OR MR4804                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親下限E
OR MR4808                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親下限E
OR MR4812                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親下限E
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;給材側ﾄﾚｲ有無確認
STG @MR4711
MPS
AND R5100                ; 接着冶具給材_ﾄﾚｲ有無
TMR @10 #20
CON
AND @T10
DW #1 @DM10              ; 給材側ﾄﾚｲ情報(0不明1有2無)
CON
JMP @MR4712
MPP
LDB R5100                ; 接着冶具給材_ﾄﾚｲ有無
ANB R5101                ; 接着冶具給材_ﾄﾚｲ浮き左(ONOK)
ANB R5102                ; 接着冶具給材_ﾄﾚｲ浮き右(ONOK)
ANL
TMR @11 #20
CON
AND @T11
DW #2 @DM10              ; 給材側ﾄﾚｲ情報(0不明1有2無)
CON
JMP @MR4712
;給材側ﾄﾚｲﾁｬｯｸ上下親_上昇
STG @MR4712
RES MR7504               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ親_下降
CON
SET MR7505               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ親_上昇
CON
MPS
LDB MR4801               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親上限E
ANB MR4805               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親上限E
ANB MR4809               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親上限E
ANB MR4813               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親上限E
ANB R4800                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親下限
AND R4801                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親上限
ANB R4804                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親下限
AND R4805                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親上限
ANB R4808                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親下限
AND R4809                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親上限
ANB R4812                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親下限
AND R4813                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親上限
ANL
JMP @MR4713
MPP
LD MR4801                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親上限E
OR MR4805                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親上限E
OR MR4809                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親上限E
OR MR4813                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親上限E
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;給材側ﾄﾚｲ有無分岐
;ﾄﾚｲ有り→AB共通動作(除材側ﾄﾚｲ確認)へ
;ﾄﾚｲ無し→A動作へ
STG @MR4713
MPS
AND= @DM10 #1            ; 給材側ﾄﾚｲ情報(0不明1有2無)
JMP @MR4714              ; AB共通:除材側のﾄﾚｲ有無確認
MPP
AND= @DM10 #2            ; 給材側ﾄﾚｲ情報(0不明1有2無)
JMP @MR4706              ; A
;<h1/>AB共通:除材側のﾄﾚｲ有無確認
;除材側ﾄﾚｲ情報分岐
STG @MR4714              ; AB共通:除材側のﾄﾚｲ有無確認
MPS
AND= @DM11 #0            ; 除材側ﾄﾚｲ情報(0不明1有2無)
JMP @MR4715
MPP
AND<> @DM11 #0           ; 除材側ﾄﾚｲ情報(0不明1有2無)
JMP @MR4904
;除材側ﾄﾚｲﾁｬｯｸ上下親_下降
STG @MR4715
RES MR7513               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ親_上昇
CON
SET MR7512               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ親_下降
CON
MPS
LDB MR5000               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親下限E
ANB MR5004               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親下限E
ANB MR5008               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親下限E
ANB MR5012               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親下限E
AND R5000                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親下限
ANB R5001                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親上限
AND R5004                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親下限
ANB R5005                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親上限
AND R5008                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親下限
ANB R5009                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親上限
AND R5012                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親下限
ANB R5013                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親上限
ANL
JMP @MR4800
MPP
LD MR5000                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親下限E
OR MR5004                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親下限E
OR MR5008                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親下限E
OR MR5012                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親下限E
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;除材側ﾄﾚｲ有無確認
STG @MR4800
MPS
AND R5104                ; 接着冶具除材_ﾄﾚｲ有無
TMR @8 #20
CON
AND @T8
DW #1 @DM11              ; 除材側ﾄﾚｲ情報(0不明1有2無)
CON
JMP @MR4801
MPP
ANB R5104                ; 接着冶具除材_ﾄﾚｲ有無
TMR @9 #20
CON
AND @T9
DW #2 @DM11              ; 除材側ﾄﾚｲ情報(0不明1有2無)
CON
JMP @MR4801
;給材側ﾄﾚｲﾁｬｯｸ上下親_上昇
STG @MR4801
RES MR7512               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ親_下降
CON
SET MR7513               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ親_上昇
CON
MPS
LDB MR5001               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親上限E
ANB MR5005               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親上限E
ANB MR5009               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親上限E
ANB MR5013               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親上限E
ANB R5000                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親下限
AND R5001                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親上限
ANB R5004                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親下限
AND R5005                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親上限
ANB R5008                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親下限
AND R5009                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親上限
ANB R5012                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親下限
AND R5013                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親上限
ANL
JMP @MR4802
MPP
LD MR5001                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親上限E
OR MR5005                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親上限E
OR MR5009                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親上限E
OR MR5013                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親上限E
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;除材側ﾄﾚｲ有無分岐
STG @MR4802
MPS
AND= @DM11 #1            ; 除材側ﾄﾚｲ情報(0不明1有2無)
JMP @MR4904
MPP
AND= @DM11 #2            ; 除材側ﾄﾚｲ情報(0不明1有2無)
JMP @MR4803
;除材側ﾁｬｯｸ開
STG @MR4803
RES MR7508               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_閉
CON
SET MR7509               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_開
CON
MPS
LDB MR4901               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_開限ERR
ANB MR4903               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_開限ERR
ANB MR4905               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_開限ERR
ANB MR4907               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_開限ERR
ANB R4900                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_閉限
AND R4901                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_開限
ANB R4902                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_閉限
AND R4903                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_開限
ANB R4904                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_閉限
AND R4905                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_開限
ANB R4906                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_閉限
AND R4907                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_開限
ANL
JMP @MR4804
MPP
LD MR4901                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_開限ERR
OR MR4903                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_開限ERR
OR MR4905                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_開限ERR
OR MR4907                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_開限ERR
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;除材側ﾁｬｯｸ後退
STG @MR4804
RES MR7510               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_前進
CON
SET MR7511               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_後退
CON
MPS
LDB MR4909               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_後限ERR
ANB MR4911               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_後限ERR
ANB MR4913               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_後限ERR
ANB MR4915               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_後限ERR
ANB R4908                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_前限
AND R4909                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_後限
ANB R4910                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_前限
AND R4911                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_後限
ANB R4912                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_前限
AND R4913                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_後限
ANB R4914                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_前限
AND R4915                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_後限
ANL
DW #2 @DM11              ; 除材側ﾄﾚｲ情報(0不明1有2無)
CON
JMP @MR4904
MPP
LD MR4909                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_後限ERR
OR MR4911                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_後限ERR
OR MR4913                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_後限ERR
OR MR4915                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_後限ERR
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;<h1/>C:除材側のﾄﾚｲ有無でRB2上のﾄﾚｲを検出  かつ  除材側ﾄﾚｲ情報不明  
;→C:除材側ﾄﾚｲ情報「無」&復帰動作へ
;除材側ﾁｬｯｸ開
STG @MR4805              ; C
RES MR7508               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_閉
CON
SET MR7509               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_開
CON
MPS
LDB MR4901               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_開限ERR
ANB MR4903               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_開限ERR
ANB MR4905               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_開限ERR
ANB MR4907               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_開限ERR
ANB R4900                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_閉限
AND R4901                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_開限
ANB R4902                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_閉限
AND R4903                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_開限
ANB R4904                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_閉限
AND R4905                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_開限
ANB R4906                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_閉限
AND R4907                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_開限
ANL
JMP @MR4806
MPP
LD MR4901                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_開限ERR
OR MR4903                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_開限ERR
OR MR4905                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_開限ERR
OR MR4907                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_開限ERR
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;除材側ﾁｬｯｸ後退
STG @MR4806
RES MR7510               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_前進
CON
SET MR7511               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_後退
CON
MPS
LDB MR4909               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_後限ERR
ANB MR4911               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_後限ERR
ANB MR4913               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_後限ERR
ANB MR4915               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_後限ERR
ANB R4908                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_前限
AND R4909                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_後限
ANB R4910                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_前限
AND R4911                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_後限
ANB R4912                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_前限
AND R4913                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_後限
ANB R4914                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_前限
AND R4915                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_後限
ANL
DW #2 @DM11              ; 除材側ﾄﾚｲ情報(0不明1有2無)
CON
JMP @MR4813              ; CD共通:給材側のﾄﾚｲ有無確認
MPP
LD MR4909                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_後限ERR
OR MR4911                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_後限ERR
OR MR4913                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_後限ERR
OR MR4915                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_後限ERR
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;<h1/>D:除材側のﾄﾚｲ有無でRB2上のﾄﾚｲを未検出  かつ  除材側ﾄﾚｲ情報不明
;→RB2除材位置移動、ﾁｬｯｸ下降後、ﾄﾚｲ有無確認
;加圧冶具搬送RB2_給材側移動
STG @MR4807              ; D
DW #2 EM1302             ; RB2Target Pos
CON
SET @MR4500              ; ①SUB_RB2_MOVE
CON
JMP @MR4808
STG @MR4808
AND @MR4501              ; ①SUB_RB2_MOVE完了
RES @MR4501              ; ①SUB_RB2_MOVE完了
CON
JMP @MR4809
;除材側ﾄﾚｲﾁｬｯｸ上下親_下降
STG @MR4809
RES MR7513               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ親_上昇
CON
SET MR7512               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ親_下降
CON
MPS
LDB MR5000               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親下限E
ANB MR5004               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親下限E
ANB MR5008               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親下限E
ANB MR5012               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親下限E
AND R5000                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親下限
ANB R5001                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親上限
AND R5004                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親下限
ANB R5005                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親上限
AND R5008                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親下限
ANB R5009                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親上限
AND R5012                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親下限
ANB R5013                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親上限
ANL
JMP @MR4810
MPP
LD MR5000                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親下限E
OR MR5004                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親下限E
OR MR5008                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親下限E
OR MR5012                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親下限E
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;除材側ﾄﾚｲ有無確認
STG @MR4810
MPS
AND R5104                ; 接着冶具除材_ﾄﾚｲ有無
TMR @6 #20
CON
AND @T6
DW #1 @DM11              ; 除材側ﾄﾚｲ情報(0不明1有2無)
CON
JMP @MR4811
MPP
ANB R5104                ; 接着冶具除材_ﾄﾚｲ有無
TMR @7 #20
CON
AND @T7
DW #2 @DM11              ; 除材側ﾄﾚｲ情報(0不明1有2無)
CON
JMP @MR4811
;給材側ﾄﾚｲﾁｬｯｸ上下親_上昇
STG @MR4811
RES MR7512               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ親_下降
CON
SET MR7513               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ親_上昇
CON
MPS
LDB MR5001               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親上限E
ANB MR5005               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親上限E
ANB MR5009               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親上限E
ANB MR5013               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親上限E
ANB R5000                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親下限
AND R5001                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親上限
ANB R5004                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親下限
AND R5005                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親上限
ANB R5008                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親下限
AND R5009                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親上限
ANB R5012                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親下限
AND R5013                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親上限
ANL
JMP @MR4812              ; 除材側ﾄﾚｲ有無分岐
MPP
LD MR5001                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親上限E
OR MR5005                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親上限E
OR MR5009                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親上限E
OR MR5013                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親上限E
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;除材側ﾄﾚｲ有無分岐
;ﾄﾚｲ有り→CD共通動作(給材側ﾄﾚｲ確認)へ
;ﾄﾚｲ無し→C動作へ
STG @MR4812              ; 除材側ﾄﾚｲ有無分岐
MPS
AND= @DM11 #1            ; 除材側ﾄﾚｲ情報(0不明1有2無)
JMP @MR4813              ; CD共通:給材側のﾄﾚｲ有無確認
MPP
AND= @DM11 #2            ; 除材側ﾄﾚｲ情報(0不明1有2無)
JMP @MR4805              ; C
;<h1/>CD共通:給材側のﾄﾚｲ有無確認
;給材側ﾄﾚｲ情報分岐
STG @MR4813              ; CD共通:給材側のﾄﾚｲ有無確認
MPS
AND= @DM10 #0            ; 給材側ﾄﾚｲ情報(0不明1有2無)
JMP @MR4814
MPP
AND<> @DM11 #0           ; 除材側ﾄﾚｲ情報(0不明1有2無)
JMP @MR4904
;給材側ﾄﾚｲﾁｬｯｸ上下親_下降
STG @MR4814
RES MR7505               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ親_上昇
CON
SET MR7504               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ親_下降
CON
MPS
LDB MR4800               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親下限E
ANB MR4804               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親下限E
ANB MR4808               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親下限E
ANB MR4812               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親下限E
AND R4800                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親下限
ANB R4801                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親上限
AND R4804                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親下限
ANB R4805                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親上限
AND R4808                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親下限
ANB R4809                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親上限
AND R4812                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親下限
ANB R4813                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親上限
ANL
JMP @MR4815              ; SUB2 置きｴﾗｰ IR2吸着
MPP
LD MR4800                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親下限E
OR MR4804                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親下限E
OR MR4808                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親下限E
OR MR4812                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親下限E
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;給材側ﾄﾚｲ有無確認
STG @MR4815              ; SUB2 置きｴﾗｰ IR2吸着
MPS
AND R5100                ; 接着冶具給材_ﾄﾚｲ有無
TMR @12 #20
CON
AND @T12
DW #1 @DM10              ; 給材側ﾄﾚｲ情報(0不明1有2無)
CON
JMP @MR4900              ; SUB 除材確認 開始
MPP
LDB R5100                ; 接着冶具給材_ﾄﾚｲ有無
ANB R5101                ; 接着冶具給材_ﾄﾚｲ浮き左(ONOK)
ANB R5102                ; 接着冶具給材_ﾄﾚｲ浮き右(ONOK)
ANL
TMR @13 #20
CON
AND @T13
DW #2 @DM10              ; 給材側ﾄﾚｲ情報(0不明1有2無)
CON
JMP @MR4900              ; SUB 除材確認 開始
;給材側ﾄﾚｲﾁｬｯｸ上下親_上昇
STG @MR4900              ; SUB 除材確認 開始
RES MR7504               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ親_下降
CON
SET MR7505               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ親_上昇
CON
MPS
LDB MR4801               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親上限E
ANB MR4805               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親上限E
ANB MR4809               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親上限E
ANB MR4813               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親上限E
ANB R4800                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親下限
AND R4801                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親上限
ANB R4804                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親下限
AND R4805                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親上限
ANB R4808                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親下限
AND R4809                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親上限
ANB R4812                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親下限
AND R4813                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親上限
ANL
JMP @MR4901              ; SUB 除材確認 完了
MPP
LD MR4801                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親上限E
OR MR4805                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親上限E
OR MR4809                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親上限E
OR MR4813                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親上限E
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;給材側ﾄﾚｲ有無分岐
STG @MR4901              ; SUB 除材確認 完了
MPS
AND= @DM10 #1            ; 給材側ﾄﾚｲ情報(0不明1有2無)
JMP @MR4904
MPP
AND= @DM10 #2            ; 給材側ﾄﾚｲ情報(0不明1有2無)
JMP @MR4902
;給材側ﾁｬｯｸ開
STG @MR4902
RES MR7500               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_閉
CON
SET MR7501               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_開
CON
MPS
LDB MR4701               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_開限ERR
ANB MR4703               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_開限ERR
ANB MR4705               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_開限ERR
ANB MR4707               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_開限ERR
ANB R4700                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_閉限
AND R4701                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_開限
ANB R4702                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_閉限
AND R4703                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_開限
ANB R4704                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_閉限
AND R4705                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_開限
ANB R4706                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_閉限
AND R4707                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_開限
ANL
JMP @MR4903
MPP
LD MR4701                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_開限ERR
OR MR4703                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_開限ERR
OR MR4705                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_開限ERR
OR MR4707                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_開限ERR
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;給材側ﾁｬｯｸ後退
STG @MR4903
RES MR7502               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_前進
CON
SET MR7503               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_後退
CON
MPS
LDB MR4709               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_後限ERR
ANB MR4711               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_後限ERR
ANB MR4713               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_後限ERR
ANB MR4715               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_後限ERR
ANB R4708                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_前限
AND R4709                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_後限
ANB R4710                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_前限
AND R4711                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_後限
ANB R4712                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_前限
AND R4713                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_後限
ANB R4714                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_前限
AND R4715                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_後限
ANL
DW #2 @DM10              ; 給材側ﾄﾚｲ情報(0不明1有2無)
CON
JMP @MR4904
MPP
LD MR4709                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_後限ERR
OR MR4711                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_後限ERR
OR MR4713                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_後限ERR
OR MR4715                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_後限ERR
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;ﾄﾚｲ状態判別確認
STG @MR4904
AND<> @DM10 #0           ; 給材側ﾄﾚｲ情報(0不明1有2無)
AND<> @DM11 #0           ; 除材側ﾄﾚｲ情報(0不明1有2無)
JMP @MR4905
STG @MR4905
SET @MR4701              ; ③SUB_HOME_ﾄﾚｲ有無確認完了
CON
RES @MR4702              ; SUB2 置き動作 実行中
CON
ENDS
;<h1/>④SUB_給材ｴﾚﾍﾞｰﾀｰ(TASK4)からﾄﾚｲ受取
STG @MR5000              ; ④SUB_給材ｴﾚﾍﾞｰﾀｰからﾄﾚｲ受取
SET @MR5002              ; ④SUB_給材ｴﾚﾍﾞｰﾀｰからﾄﾚｲ受取中
CON
JMP @MR5003
;TASK4給材ｴﾚﾍﾞｰﾀｰへﾄﾚｲ供給要求
STG @MR5003
SET MR20701              ; T5→T4ﾄﾚｲ供給要求
CON
JMP @MR5004
;TASK4給材ｴﾚﾍﾞｰﾀｰから準備完了待ち
STG @MR5004
MPS
ANB R41205               ; TASK5 PAUSE 要求
MPS
AND MR20702              ; T4→T5ﾄﾚｲ受渡し準備完了
RES MR20701              ; T5→T4ﾄﾚｲ供給要求
CON
JMP @MR5006
MPP
LDB MR20702              ; T4→T5ﾄﾚｲ受渡し準備完了
ANB R41004               ; _Grp1_Task4_起動中ﾌﾗｸﾞ
ANL
SET @MR902               ; TASK4停止_ﾄﾚｲ受取無し
CON
RES MR20701              ; T5→T4ﾄﾚｲ供給要求
CON
JMP @MR5109
MPP
AND R41205               ; TASK5 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;給材側ﾄﾚｲﾁｬｯｸ上下親子_下降
STG @MR5006
RES MR7505               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ親_上昇
CON
SET MR7504               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ親_下降
CON
RES MR7507               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ子_上昇
CON
SET MR7506               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ子_下降
CON
MPS
LDB MR4800               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親下限E
ANB MR4804               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親下限E
ANB MR4808               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親下限E
ANB MR4812               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親下限E
ANB MR4802               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_子下限E
ANB MR4806               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_子下限E
ANB MR4810               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_子下限E
ANB MR4814               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_子下限E
AND R4800                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親下限
ANB R4801                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親上限
AND R4804                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親下限
ANB R4805                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親上限
AND R4808                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親下限
ANB R4809                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親上限
AND R4812                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親下限
ANB R4813                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親上限
AND R4802                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_子下限
ANB R4803                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_子上限
AND R4806                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_子下限
ANB R4807                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_子上限
AND R4810                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_子下限
ANB R4811                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_子上限
AND R4814                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_子下限
ANB R4815                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_子上限
ANL
JMP @MR5008              ; SUB P&P 残Wk確認 ｴﾗｰ処理
MPP
LD MR4800                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親下限E
OR MR4804                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親下限E
OR MR4808                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親下限E
OR MR4812                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親下限E
OR MR4802                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_子下限E
OR MR4806                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_子下限E
OR MR4810                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_子下限E
OR MR4814                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_子下限E
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;給材側ﾄﾚｲﾁｬｯｸ_前進
STG @MR5008              ; SUB P&P 残Wk確認 ｴﾗｰ処理
RES MR7503               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_後退
CON
SET MR7502               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_前進
CON
MPS
LDB MR4708               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_前限ERR
ANB MR4710               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_前限ERR
ANB MR4712               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_前限ERR
ANB MR4714               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_前限ERR
AND R4708                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_前限
ANB R4709                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_後限
AND R4710                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_前限
ANB R4711                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_後限
AND R4712                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_前限
ANB R4713                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_後限
AND R4714                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_前限
ANB R4715                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_後限
ANL
JMP @MR5009
MPP
LD MR4708                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_前限ERR
OR MR4710                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_前限ERR
OR MR4712                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_前限ERR
OR MR4714                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_前限ERR
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;給材側ﾄﾚｲﾁｬｯｸ上下子_上昇
STG @MR5009
RES MR7506               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ子_下降
CON
SET MR7507               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ子_上昇
CON
MPS
LDB MR4803               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_子上限E
ANB MR4807               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_子上限E
ANB MR4811               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_子上限E
ANB MR4815               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_子上限E
ANB R4802                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_子下限
AND R4803                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_子上限
ANB R4806                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_子下限
AND R4807                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_子上限
ANB R4810                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_子下限
AND R4811                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_子上限
ANB R4814                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_子下限
AND R4815                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_子上限
ANL
JMP @MR5010
MPP
LD MR4803                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_子上限E
OR MR4807                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_子上限E
OR MR4811                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_子上限E
OR MR4815                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_子上限E
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;給材側ﾁｬｯｸ閉
STG @MR5010
RES MR7501               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_開
CON
SET MR7500               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_閉
CON
MPS
LDB MR4700               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_閉限ERR
ANB MR4702               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_閉限ERR
ANB MR4704               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_閉限ERR
ANB MR4706               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_閉限ERR
AND R4700                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_閉限
ANB R4701                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_開限
AND R4702                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_閉限
ANB R4703                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_開限
AND R4704                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_閉限
ANB R4705                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_開限
AND R4706                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_閉限
ANB R4707                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_開限
ANL
JMP @MR5011
MPP
LD MR4700                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_閉限ERR
OR MR4702                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_閉限ERR
OR MR4704                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_閉限ERR
OR MR4706                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_閉限ERR
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;ﾄﾚｲ有無確認
STG @MR5011
MPS
AND R5100                ; 接着冶具給材_ﾄﾚｲ有無
DW #1 @DM10              ; 給材側ﾄﾚｲ情報(0不明1有2無)
CON
JMP @MR5100
MPP
ANB R5100                ; 接着冶具給材_ﾄﾚｲ有無
TMR @1 #5                ; ﾄﾚｲ無しﾃﾞｨﾚｲ
CON
AND @T1                  ; ﾄﾚｲ無しﾃﾞｨﾚｲ
JMP @MR5012
;ﾄﾚｲ受取異常
STG @MR5012
MPS
LDB R41205               ; TASK5 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
DW $7000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #160 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #5100 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task5 ERROR
CON
JMP @MR5013
MPP
AND R41205               ; TASK5 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR5013
MPS
LDB R41205               ; TASK5 PAUSE 要求
AND @MR101               ; Task5 ERROR_End
ANL
RES @MR101               ; Task5 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR5011
MPP
AND R41205               ; TASK5 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;TASK4へﾄﾚｲ受取完了
STG @MR5100
SET MR20703              ; T5→T4ｴﾚﾍﾞｰﾀｰ下降許可
CON
JMP @MR5101
;給材側ﾄﾚｲﾁｬｯｸ上下親_上昇
STG @MR5101
RES MR7504               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ親_下降
CON
SET MR7505               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ親_上昇
CON
MPS
LDB MR4801               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親上限E
ANB MR4805               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親上限E
ANB MR4809               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親上限E
ANB MR4813               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親上限E
ANB R4800                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親下限
AND R4801                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親上限
ANB R4804                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親下限
AND R4805                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親上限
ANB R4808                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親下限
AND R4809                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親上限
ANB R4812                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親下限
AND R4813                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親上限
ANL
JMP @MR5102
MPP
LD MR4801                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親上限E
OR MR4805                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親上限E
OR MR4809                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親上限E
OR MR4813                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親上限E
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;ﾁｬｯｸ開&位置決め上昇
STG @MR5102
SET MR7306               ; 接着冶具給材_ﾄﾚｲ位置決め上昇
CON
RES MR7307               ; 接着冶具給材_ﾄﾚｲ位置決め下降
CON
SET MR7501               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_開
CON
RES MR7500               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_閉
CON
MPS
LDB MR5106               ; 接着冶具_ﾄﾚｲ位置決_奥_上限ER
ANB MR5108               ; 接着冶具_ﾄﾚｲ位置決_前_上限ER
ANB MR4701               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_開限ERR
ANB MR4703               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_開限ERR
ANB MR4705               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_開限ERR
ANB MR4707               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_開限ERR
AND R5106                ; 接着冶具_ﾄﾚｲ位置決め_奥_上限
ANB R5107                ; 接着冶具_ﾄﾚｲ位置決め_奥_下限
AND R5108                ; 接着冶具_ﾄﾚｲ位置決め_前_上限
ANB R5109                ; 接着冶具_ﾄﾚｲ位置決め_前_下限
ANB R4700                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_閉限
AND R4701                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_開限
ANB R4702                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_閉限
AND R4703                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_開限
ANB R4704                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_閉限
AND R4705                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_開限
ANB R4706                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_閉限
AND R4707                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_開限
ANL
JMP @MR5104
MPP
LD MR5106                ; 接着冶具_ﾄﾚｲ位置決_奥_上限ER
OR MR5108                ; 接着冶具_ﾄﾚｲ位置決_前_上限ER
OR MR4701                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_開限ERR
OR MR4703                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_開限ERR
OR MR4705                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_開限ERR
OR MR4707                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_開限ERR
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;TASK4からｴﾚﾍﾞｰﾀｰ退避完了待ち
STG @MR5104
MPS
LDB R41205               ; TASK5 PAUSE 要求
AND MR20704              ; T4→T5ｴﾚﾍﾞｰﾀｰ退避完了
ANL
RES MR20703              ; T5→T4ｴﾚﾍﾞｰﾀｰ下降許可
CON
JMP @MR5105
MPP
AND R41205               ; TASK5 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR5105
MPS
LDB R41205               ; TASK5 PAUSE 要求
ANB MR20704              ; T4→T5ｴﾚﾍﾞｰﾀｰ退避完了
ANL
JMP @MR5106
MPP
AND R41205               ; TASK5 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;位置決め前進
STG @MR5106
RES MR7305               ; 接着冶具給材_ﾄﾚｲ位置決め後退
CON
SET MR7304               ; 接着冶具給材_ﾄﾚｲ位置決め前進
CON
MPS
LDB MR5110               ; 接着冶具_ﾄﾚｲ位置決め_前限ERR
AND R5110                ; 接着冶具_ﾄﾚｲ位置決め_前限
ANB R5111                ; 接着冶具_ﾄﾚｲ位置決め_後限
ANL
JMP @MR5107
MPP
LD MR5110                ; 接着冶具_ﾄﾚｲ位置決め_前限ERR
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;ﾁｬｯｸ閉
STG @MR5107
RES MR7501               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_開
CON
SET MR7500               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_閉
CON
MPS
LDB MR4700               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_閉限ERR
ANB MR4702               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_閉限ERR
ANB MR4704               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_閉限ERR
ANB MR4706               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_閉限ERR
AND R4700                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_閉限
ANB R4701                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_開限
AND R4702                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_閉限
ANB R4703                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_開限
AND R4704                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_閉限
ANB R4705                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_開限
AND R4706                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_閉限
ANB R4707                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_開限
ANL
JMP @MR5108
MPP
LD MR4700                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_閉限ERR
OR MR4702                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_閉限ERR
OR MR4704                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_閉限ERR
OR MR4706                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_閉限ERR
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;位置決め下降&後退
STG @MR5108
RES MR7304               ; 接着冶具給材_ﾄﾚｲ位置決め前進
CON
SET MR7305               ; 接着冶具給材_ﾄﾚｲ位置決め後退
CON
RES MR7306               ; 接着冶具給材_ﾄﾚｲ位置決め上昇
CON
SET MR7307               ; 接着冶具給材_ﾄﾚｲ位置決め下降
CON
MPS
LDB MR5111               ; 接着冶具_ﾄﾚｲ位置決め_後限ERR
ANB MR5107               ; 接着冶具_ﾄﾚｲ位置決_奥_下限ER
ANB MR5109               ; 接着冶具_ﾄﾚｲ位置決_前_下限ER
ANB R5110                ; 接着冶具_ﾄﾚｲ位置決め_前限
AND R5111                ; 接着冶具_ﾄﾚｲ位置決め_後限
ANB R5106                ; 接着冶具_ﾄﾚｲ位置決め_奥_上限
AND R5107                ; 接着冶具_ﾄﾚｲ位置決め_奥_下限
ANB R5108                ; 接着冶具_ﾄﾚｲ位置決め_前_上限
AND R5109                ; 接着冶具_ﾄﾚｲ位置決め_前_下限
ANL
JMP @MR5109
MPP
LD MR5111                ; 接着冶具_ﾄﾚｲ位置決め_後限ERR
OR MR5107                ; 接着冶具_ﾄﾚｲ位置決_奥_下限ER
OR MR5109                ; 接着冶具_ﾄﾚｲ位置決_前_下限ER
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;④SUB_給材ｴﾚﾍﾞｰﾀｰ(TASK4)からﾄﾚｲ受取_終了
STG @MR5109
SET @MR5001              ; ④SUB_給材ｴﾚﾍﾞｰﾀｰからﾄﾚｲ受取完了
CON
RES @MR5002              ; ④SUB_給材ｴﾚﾍﾞｰﾀｰからﾄﾚｲ受取中
CON
ENDS
;<h1/>⑤SUB_給材側ﾁｬｯｸからRB2へﾄﾚｲ受渡し
STG @MR5200              ; ⑤SUB_給材ﾁｬｯｸからRB2ﾄﾚｲ受渡
SET @MR5202              ; ⑤SUB_給材ﾁｬｯｸからRB2ﾄﾚｲ受渡中
CON
JMP @MR5203
;給材側ﾄﾚｲﾁｬｯｸ上下子_下降
STG @MR5203
RES MR7507               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ子_上昇
CON
SET MR7506               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ子_下降
CON
MPS
LDB MR4802               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_子下限E
ANB MR4806               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_子下限E
ANB MR4810               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_子下限E
ANB MR4814               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_子下限E
AND R4802                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_子下限
ANB R4803                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_子上限
AND R4806                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_子下限
ANB R4807                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_子上限
AND R4810                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_子下限
ANB R4811                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_子上限
AND R4814                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_子下限
ANB R4815                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_子上限
ANL
JMP @MR5204
MPP
LD MR4802                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_子下限E
OR MR4806                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_子下限E
OR MR4810                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_子下限E
OR MR4814                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_子下限E
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;給材側ﾄﾚｲﾁｬｯｸ開
STG @MR5204
RES MR7500               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_閉
CON
SET MR7501               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_開
CON
MPS
LDB MR4701               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_開限ERR
ANB MR4703               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_開限ERR
ANB MR4705               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_開限ERR
ANB MR4707               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_開限ERR
ANB R4700                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_閉限
AND R4701                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_開限
ANB R4702                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_閉限
AND R4703                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_開限
ANB R4704                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_閉限
AND R4705                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_開限
ANB R4706                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_閉限
AND R4707                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_開限
ANL
JMP @MR5205
MPP
LD MR4701                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_開限ERR
OR MR4703                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_開限ERR
OR MR4705                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_開限ERR
OR MR4707                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_開限ERR
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;給材側ﾄﾚｲﾁｬｯｸ_後退
STG @MR5205
RES MR7502               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_前進
CON
SET MR7503               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_後退
CON
MPS
LDB MR4709               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_後限ERR
ANB MR4711               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_後限ERR
ANB MR4713               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_後限ERR
ANB MR4715               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_後限ERR
ANB R4708                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_前限
AND R4709                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_後限
ANB R4710                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_前限
AND R4711                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_後限
ANB R4712                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_前限
AND R4713                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_後限
ANB R4714                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_前限
AND R4715                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_後限
ANL
DW #2 @DM10              ; 給材側ﾄﾚｲ情報(0不明1有2無)
CON
JMP @MR5206
MPP
LD MR4709                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_後限ERR
OR MR4711                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_後限ERR
OR MR4713                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_後限ERR
OR MR4715                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_後限ERR
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;ﾄﾚｲ状態確認
STG @MR5206
MPS
ANB R5100                ; 接着冶具給材_ﾄﾚｲ有無
TMR @2 #5                ; ﾄﾚｲ無しﾃﾞｨﾚｲ
CON
AND @T2                  ; ﾄﾚｲ無しﾃﾞｨﾚｲ
JMP @MR5207
MPP
AND R5100                ; 接着冶具給材_ﾄﾚｲ有無
MPS
LD R5101                 ; 接着冶具給材_ﾄﾚｲ浮き左(ONOK)
AND R5102                ; 接着冶具給材_ﾄﾚｲ浮き右(ONOK)
ANL
DW #1 @DM12              ; RB2ﾄﾚｲ情報(0不明1有2無)
CON
JMP @MR5301
MPP
LDB R5101                ; 接着冶具給材_ﾄﾚｲ浮き左(ONOK)
ORB R5102                ; 接着冶具給材_ﾄﾚｲ浮き右(ONOK)
ANL
TMR @3 #5                ; ﾄﾚｲ浮きﾃﾞｨﾚｲ
CON
AND @T3                  ; ﾄﾚｲ浮きﾃﾞｨﾚｲ
JMP @MR5209
;ﾄﾚｲﾁｬｯｸ受渡し後_ﾄﾚｲ無異常
STG @MR5207
MPS
LDB R41205               ; TASK5 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
DW $7000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #161 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #5100 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task5 ERROR
CON
JMP @MR5208
MPP
AND R41205               ; TASK5 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR5208
MPS
LDB R41205               ; TASK5 PAUSE 要求
AND @MR101               ; Task5 ERROR_End
ANL
RES @MR101               ; Task5 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR5206
MPP
AND R41205               ; TASK5 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;ﾄﾚｲﾁｬｯｸ受渡し後_ﾄﾚｲ浮き異常
STG @MR5209
MPS
LDB R41205               ; TASK5 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
DW $7000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #162 @DM1             ; ErrorNo /ERROR_DISP
CON
MPS
SET @MR100               ; Task5 ERROR
CON
JMP @MR5210
MRD
ANB R5102                ; 接着冶具給材_ﾄﾚｲ浮き右(ONOK)
DW #5102 @DM2            ; SensorNo /ERROR_DISP
MPP
ANB R5101                ; 接着冶具給材_ﾄﾚｲ浮き左(ONOK)
DW #5101 @DM2            ; SensorNo /ERROR_DISP
MPP
AND R41205               ; TASK5 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR5210
MPS
LDB R41205               ; TASK5 PAUSE 要求
AND @MR101               ; Task5 ERROR_End
ANL
RES @MR101               ; Task5 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR5206
MPP
AND R41205               ; TASK5 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;給材側ﾄﾚｲﾁｬｯｸ上下親子_上昇
STG @MR5301
RES MR7504               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ親_下降
CON
SET MR7505               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ親_上昇
CON
RES MR7506               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ子_下降
CON
SET MR7507               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ子_上昇
CON
MPS
LDB MR4801               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親上限E
ANB MR4805               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親上限E
ANB MR4809               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親上限E
ANB MR4813               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親上限E
ANB MR4803               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_子上限E
ANB MR4807               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_子上限E
ANB MR4811               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_子上限E
ANB MR4815               ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_子上限E
ANB R4800                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親下限
AND R4801                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親上限
ANB R4804                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親下限
AND R4805                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親上限
ANB R4808                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親下限
AND R4809                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親上限
ANB R4812                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親下限
AND R4813                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親上限
ANB R4802                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_子下限
AND R4803                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_子上限
ANB R4806                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_子下限
AND R4807                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_子上限
ANB R4810                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_子下限
AND R4811                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_子上限
ANB R4814                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_子下限
AND R4815                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_子上限
ANL
JMP @MR5303
MPP
LD MR4801                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_親上限E
OR MR4805                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_親上限E
OR MR4809                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_親上限E
OR MR4813                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_親上限E
OR MR4803                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左奥_子上限E
OR MR4807                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右奥_子上限E
OR MR4811                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_左前_子上限E
OR MR4815                ; 接着冶具給材ﾄﾚｲﾁｬｯｸ_右前_子上限E
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;⑤SUB_給材側ﾁｬｯｸからRB2へﾄﾚｲ受渡し_終了
STG @MR5303
SET @MR5201              ; ⑤SUB_給材ﾁｬｯｸからRB2ﾄﾚｲ受渡完了
CON
RES @MR5202              ; ⑤SUB_給材ﾁｬｯｸからRB2ﾄﾚｲ受渡中
CON
ENDS
;<h1/>⑥SUB_除材ｴﾚﾍﾞｰﾀｰへﾄﾚｲ受渡し
STG @MR5400              ; ⑥SUB_除材ｴﾚﾍﾞｰﾀｰへﾄﾚｲ受渡し
SET @MR5402              ; ⑥SUB_除材ｴﾚﾍﾞｰﾀｰへﾄﾚｲ受渡し中
CON
JMP @MR5403
;TASK6除材ｴﾚﾍﾞｰﾀｰへﾄﾚｲ受渡し要求
STG @MR5403
SET MR20800              ; T5→T6ﾄﾚｲ受渡し要求
CON
JMP @MR5404
STG @MR5404
MPS
LDB R41205               ; TASK5 PAUSE 要求
AND MR20801              ; T6→T5_ﾄﾚｲ受取準備完了
ANL
RES MR20800              ; T5→T6ﾄﾚｲ受渡し要求
CON
JMP @MR5405
MPP
AND R41205               ; TASK5 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;除材側ﾁｬｯｸ開
STG @MR5405
RES MR7508               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_閉
CON
SET MR7509               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_開
CON
MPS
LDB MR4901               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_開限ERR
ANB MR4903               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_開限ERR
ANB MR4905               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_開限ERR
ANB MR4907               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_開限ERR
ANB R4900                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_閉限
AND R4901                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_開限
ANB R4902                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_閉限
AND R4903                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_開限
ANB R4904                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_閉限
AND R4905                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_開限
ANB R4906                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_閉限
AND R4907                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_開限
ANL
JMP @MR5406
MPP
LD MR4901                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_開限ERR
OR MR4903                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_開限ERR
OR MR4905                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_開限ERR
OR MR4907                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_開限ERR
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;除材側ﾄﾚｲﾁｬｯｸ上下親子_下降
STG @MR5406
RES MR7515               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ子_上昇
CON
SET MR7514               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ子_下降
CON
RES MR7513               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ親_上昇
CON
SET MR7512               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ親_下降
CON
MPS
LDB MR5002               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_子下限E
ANB MR5006               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_子下限E
ANB MR5010               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_子下限E
ANB MR5014               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_子下限E
ANB MR5000               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親下限E
ANB MR5004               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親下限E
ANB MR5008               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親下限E
ANB MR5012               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親下限E
AND R5002                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_子下限
ANB R5003                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_子上限
AND R5006                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_子下限
ANB R5007                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_子上限
AND R5010                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_子下限
ANB R5011                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_子上限
AND R5014                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_子下限
ANB R5015                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_子上限
AND R5000                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親下限
ANB R5001                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親上限
AND R5004                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親下限
ANB R5005                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親上限
AND R5008                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親下限
ANB R5009                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親上限
AND R5012                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親下限
ANB R5013                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親上限
ANL
JMP @MR5408
MPP
LD MR5002                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_子下限E
OR MR5006                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_子下限E
OR MR5010                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_子下限E
OR MR5014                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_子下限E
OR MR5000                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親下限E
OR MR5004                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親下限E
OR MR5008                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親下限E
OR MR5012                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親下限E
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;除材側ﾁｬｯｸ後退
STG @MR5408
RES MR7510               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_前進
CON
SET MR7511               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_後退
CON
MPS
LDB MR4909               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_後限ERR
ANB MR4911               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_後限ERR
ANB MR4913               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_後限ERR
ANB MR4915               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_後限ERR
ANB R4908                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_前限
AND R4909                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_後限
ANB R4910                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_前限
AND R4911                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_後限
ANB R4912                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_前限
AND R4913                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_後限
ANB R4914                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_前限
AND R4915                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_後限
ANL
DW #2 @DM11              ; 除材側ﾄﾚｲ情報(0不明1有2無)
CON
JMP @MR5409
MPP
LD MR4909                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_後限ERR
OR MR4911                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_後限ERR
OR MR4913                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_後限ERR
OR MR4915                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_後限ERR
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;TASK6除材ｴﾚﾍﾞｰﾀｰへ下降許可
STG @MR5409
SET MR20802              ; T5→T6ｴﾚﾍﾞｰﾀｰ下降許可
CON
JMP @MR5410
;除材側ﾄﾚｲﾁｬｯｸ上下親子_上昇
STG @MR5410
RES MR7512               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ親_下降
CON
SET MR7513               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ親_上昇
CON
RES MR7514               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ子_下降
CON
SET MR7515               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ子_上昇
CON
MPS
LDB MR5001               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親上限E
ANB MR5005               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親上限E
ANB MR5009               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親上限E
ANB MR5013               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親上限E
ANB MR5003               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_子上限E
ANB MR5007               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_子上限E
ANB MR5011               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_子上限E
ANB MR5015               ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_子上限E
ANB R5000                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親下限
AND R5001                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親上限
ANB R5004                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親下限
AND R5005                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親上限
ANB R5008                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親下限
AND R5009                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親上限
ANB R5012                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親下限
AND R5013                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親上限
ANB R5002                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_子下限
AND R5003                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_子上限
ANB R5006                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_子下限
AND R5007                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_子上限
ANB R5010                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_子下限
AND R5011                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_子上限
ANB R5014                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_子下限
AND R5015                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_子上限
ANL
JMP @MR5411
MPP
LD MR5001                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_親上限E
OR MR5005                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_親上限E
OR MR5009                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_親上限E
OR MR5013                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_親上限E
OR MR5003                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左奥_子上限E
OR MR5007                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右奥_子上限E
OR MR5011                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_左前_子上限E
OR MR5015                ; 接着冶具除材ﾄﾚｲﾁｬｯｸ_右前_子上限E
AND R41205               ; TASK5 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;TASK6除材ｴﾚﾍﾞｰﾀｰ_退避完了待ち
STG @MR5411
MPS
LDB R41205               ; TASK5 PAUSE 要求
AND MR20803              ; T6→T5_ｴﾚﾍﾞｰﾀｰ退避完了
ANL
RES MR20802              ; T5→T6ｴﾚﾍﾞｰﾀｰ下降許可
CON
JMP @MR5412
MPP
AND R41205               ; TASK5 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR5412
ANB MR20803              ; T6→T5_ｴﾚﾍﾞｰﾀｰ退避完了
JMP @MR5413
;⑥SUB_除材ｴﾚﾍﾞｰﾀｰへﾄﾚｲ受渡し_終了
STG @MR5413
SET @MR5401              ; ⑥SUB_除材ｴﾚﾍﾞｰﾀｰへﾄﾚｲ受渡し_終
CON
RES @MR5402              ; ⑥SUB_除材ｴﾚﾍﾞｰﾀｰへﾄﾚｲ受渡し中
CON
ENDS
;<h1/>*ERROR
;MyTask Error Process Substance/エラー処理実体
STG @MR100               ; Task5 ERROR
ANB R39002               ; ERROR_DISP Busy
MPS
ZRES @MR105 @MR108       ; SW1  SW4
CON
DISN @DM9 @DM3 #4        ; ReturnSW /ERROR_DISP
MRD
DW MyTask @DM0           ; 自ﾀｽｸ番号  TaskNo /ERROR_DISP
CON
BMOV @DM0 DM60000 #7     ; TaskNo /ERROR_DISP  TaskNo /ERROR_DISP
MPP
SET R39000               ; ERROR_DISP Start
CON
SET @MR102               ; Task5 ERROR Busy
CON
JMP @MR103
STG @MR103
AND R39002               ; ERROR_DISP Busy
AND= DM60008 @DM1        ; ReturnNo /ERROR_DISP  ErrorNo /ERROR_DISP
MPS
AND= DM60007 @DM6        ; ReturnSW /ERROR_DISP
SET @MR105               ; SW1
CON
JMP @MR104
MRD
AND= DM60007 @DM5        ; ReturnSW /ERROR_DISP
SET @MR106               ; SW2
CON
JMP @MR104
MRD
AND= DM60007 @DM4        ; ReturnSW /ERROR_DISP
SET @MR107               ; SW3
CON
JMP @MR104
MPP
AND= DM60007 @DM3        ; ReturnSW /ERROR_DISP
SET @MR108               ; SW4
CON
JMP @MR104
STG @MR104
ANB R39002               ; ERROR_DISP Busy
RES @MR102               ; Task5 ERROR Busy
CON
SET @MR101               ; Task5 ERROR_End
CON
ENDS
;<h1/>*Select_Y_N 
;MyTask Select_Y_N Process Substance/SELECT_Y_N処理実体
STG @MR300               ; Task5 SELECT_Y_N
ANB R39102               ; SELECT_Y_N Busy
MPS
ZRES @MR306 @MR307       ; Task5 Y/N
CON
DW #0 @DM20
CON
BMOV @DM20 DM60020 #3    ; TaskNo /SELECT_Y_N
MPP
SET R39100               ; SELECT_Y_N Start
CON
SET @MR302               ; Task5 Y_N Busy
CON
JMP @MR303
STG @MR303
AND R39102               ; SELECT_Y_N Busy
MPS
AND= DM60023 #1          ; Y_N /SELECT_Y_N
SET @MR306               ; Task5 Y/N
CON
JMP @MR304
MPP
AND= DM60023 #2          ; Y_N /SELECT_Y_N
RES @MR306               ; Task5 Y/N
CON
JMP @MR304
STG @MR304
ANB R39102               ; SELECT_Y_N Busy
RES @MR302               ; Task5 Y_N Busy
CON
SET @MR301               ; Task5 Y/N END
CON
ENDS
;<h1/>*TIMEUP ERROR
;MyTask TIMEUP_ERROR Process Substance/TIMEUP_ERROR処理実体
STG @MR400               ; Task5 TIMEUP_ERR
ANB R39302               ; TIMEUP_ERR Busy
MPS
DW #0 @DM40
CON
BMOV @DM40 DM60040 #2    ; TaskNo /TIMEUP_ERR
MPP
SET R39300               ; TIMEUP_ERR Start
CON
SET @MR402               ; Task5 TIMEUP Busy
CON
JMP @MR403
STG @MR403
AND R39302               ; TIMEUP_ERR Busy
JMP @MR404
STG @MR404
ANB R39302               ; TIMEUP_ERR Busy
RES @MR402               ; Task5 TIMEUP Busy
CON
SET @MR401               ; Task5 TIMEUP_END
CON
ENDS
;<h1/>*Select_ACT 
;MyTask Select_ACT Process Substance/SELECT_ACT処理実体
STG @MR200               ; Task5 SELECT_ACT
ANB R39202               ; SELECT_ACT Busy
MPS
ZRES @MR205 @MR208       ; SW1  SW4
CON
DW #0 @DM30
CON
BMOV @DM30 DM60030 #7    ; TaskNo /SELECT_ACT
MPP
SET R39200               ; SELECT_ACT Start
CON
SET @MR202               ; Task5 SEL_ACT Busy
CON
JMP @MR203
STG @MR203
AND R39202               ; SELECT_ACT Busy
AND<> DM60037 #0         ; SelectSW /SELECT_ACT
MPS
AND= DM60037 #1          ; SelectSW /SELECT_ACT
SET @MR205               ; SW1
CON
JMP @MR204
MRD
AND= DM60037 #2          ; SelectSW /SELECT_ACT
SET @MR206               ; SW2
CON
JMP @MR204
MRD
AND= DM60037 #3          ; SelectSW /SELECT_ACT
SET @MR207               ; SW3
CON
JMP @MR204
MPP
AND= DM60037 #4          ; SelectSW /SELECT_ACT
SET @MR208               ; SW4
CON
JMP @MR204
STG @MR204
ANB R39202               ; SELECT_ACT Busy
RES @MR202               ; Task5 SEL_ACT Busy
CON
SET @MR201               ; Task5 SEL_ACT END
CON
ENDS
;<h1/>※機能Macro呼出し見本- 削除して下さい。-------------------------------------
;<h1/>※Error:記述見本
;ERR163 "****Error"
;<h1/>※SELECT_ACT　:記述見本
;画面番号33をブザー有りで選択SW番号を左から#5,#10,#0(無し),#34の並びで表示する
;<h1/>※ SELECT_Y_N　記述見本
;//*Select_Y_N
;<h1/>HALT
LD R41205                ; TASK5 PAUSE 要求
AND @MR1900              ; Main1 HALT許可
LD @MR1901               ; Main2 HALT許可
ORB @MR4002              ; Main2 Busy
ANL
TMR @40 #5
CON
AND @T40
SET R42605               ; Grp1_Task5_ﾎﾟｰｽﾞ許可
LD R42605                ; Grp1_Task5_ﾎﾟｰｽﾞ許可
ORB R41205               ; TASK5 PAUSE 要求
ANB @MR001               ; TASK5　ERROR
RES @MR1900              ; Main1 HALT許可
CON
RES @MR1901              ; Main2 HALT許可
END
ENDH
