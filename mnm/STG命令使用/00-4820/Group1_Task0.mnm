DEVICE:53
;MODULE:Group1_Task0
;MODULE_TYPE:0
;SCRIPT_TYPE:
;OneSystem Main-Module
;
;-----------------------------------------
;ModuleName	:	Group1_Task0
;ModuleType	:	Main Module
;Line		:	F2 PZT 固定ﾌﾟﾚｰﾄ接着組立ﾗｲﾝ
;Cell		:   ﾄﾚｲﾁｪﾝｼﾞｬｰ
;Function	:   搬送ｽｶﾗRB
;-----------------------------------------
;<<Task LocalDevice>>
;/*項目			/*割付ｴﾘｱ				/*備考
;---------------------------------------------------------------------			
;Emergency		@MR000～@MR015			Emergency処理時RESET禁止ｴﾘｱ
;Free			@MR100～@MR915			ﾕｰｻﾞｰﾌﾘｰｴﾘｱ
;HOME			@MR1000～@MR1515		HOME動作時使用ｴﾘｱ
;MAINTENANCE		@MR2000～@MR2915		MAINTE動作時使用ｴﾘｱ
;AUTO(Main1)		@MR3000～@MR3915		AUTO(Main1)動作時使用ｴﾘｱ
;	(Main2)		@MR4000～@MR4415		AUTO(Main2)動作時使用ｴﾘｱ
;SubRoutine		@MR4500～@MR6415		ｻﾌﾞﾙｰﾁﾝ共通動作使用ｴﾘｱ　※状況により増設してください。
;----------------------------------------------------------------------
;<h1/>Device_Init/ﾃﾞﾊﾞｲｽ初期化
;[内容]
;・非常停止、優先ｴﾗｰ発生時に初期化したいﾃﾞﾊﾞｲｽを指定して下さい
;※本Taskで使用するﾛｰｶﾙﾃﾞﾊﾞｲｽなど
;※STG～JMPにて使用しているﾃﾞﾊﾞｲｽは必須
LDP R46104               ; _非常停止中　ﾓｰﾄﾞﾌﾗｸﾞ
ZRES @MR100 @MR6415      ; Task0 ERROR
;<h1/>Task_Monitor/ﾀｽｸﾓﾆﾀｰ
LD CR2002                ; 常時ON
FLIK #50 #50 @MR000
LD= DM60000 MyTask       ; TaskNo /ERROR_DISP  自ﾀｽｸ番号
AND R46208               ; _Group1　ｴﾗｰ発生中
OUT @MR001               ; TASK0 ERROR
;ON STG Main1
;TYPE EM600.U,EM601.U,@MR000.U,@MR3000.U
;
;FOR EM600 = EM600 TO 160 STEP 16
;	IF @MR3000:EM600 <> 0 THEN
;		BREAK
;	END IF	
;NEXT
;	
;IF EM600 < 160 THEN
;	EM601 = (EM600 / 16) * 100 + DMX(@MR3000:EM600) + #3000
;END IF		
;		
;EM600 = EM600 + 16		
;IF EM600 > 160 THEN		
;	EM600 = 0	
;END IF
LDP @MR000
NCJ #1000
;TYPE EM600.U,EM601.U,@MR000.U,@MR3000.U
;
;FOR EM600 = EM600 TO 160 STEP 16
;
LD CR2002                ; 常時ON
MOV EM600 EM600          ; Task0 Main1@MR  Task0 Main1@MR
LABEL #2000
LD> EM600 #160           ; Task0 Main1@MR
CJ #2001
;	IF @MR3000:EM600 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM600                ; Task0 Main1@MR
CON
EXT
CON
STA.L Z12
LD<> @MR3000:Z12 #0      ; AUTO Main1
NCJ #2002
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2003
;	END IF	
;
LABEL #2002
;NEXT
;
LD CR2002                ; 常時ON
LDA EM600                ; Task0 Main1@MR
CON
ADD #16
CON
STA EM600                ; Task0 Main1@MR
LDB CR2009               ; 演算結果が負
CJ #2000
LABEL #2003
LABEL #2001
;IF EM600 < 160 THEN
;
LD< EM600 #160           ; Task0 Main1@MR
NCJ #2004
;	EM601 = (EM600 / 16) * 100 + DMX(@MR3000:EM600) + #3000
;
LD CR2002                ; 常時ON
LDA EM600                ; Task0 Main1@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR3000:Z12          ; AUTO Main1
CON
DMX
CON
STA @VM0
CON
LDA EM600                ; Task0 Main1@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM1
CON
LDA @VM0
CON
EXT
CON
ADD.L @VM1
CON
ADD.L +3000
CON
STA EM601                ; Task0 Main1@MR
;END IF		
;
LABEL #2004
;EM600 = EM600 + 16		
;
LD CR2002                ; 常時ON
LDA EM600                ; Task0 Main1@MR
CON
EXT
CON
ADD.L +16
CON
STA EM600                ; Task0 Main1@MR
;IF EM600 > 160 THEN		
;
LD> EM600 #160           ; Task0 Main1@MR
NCJ #2005
;	EM600 = 0	
;
LD CR2002                ; 常時ON
MOV #0 EM600             ; Task0 Main1@MR
;END IF
LABEL #2005
LABEL #1000
;
;ON STG Main2
;TYPE EM602.U,EM603.U,@MR4000.U
;
;FOR EM602 = EM602 TO 80 STEP 16
;	IF @MR4000:EM602 <> 0 THEN
;		BREAK
;	END IF	
;NEXT	
;
;IF EM602 < 80 THEN
;	EM603 = (EM602 / 16) * 100 + DMX(@MR4000:EM602) + #4000
;END IF
;
;EM602 = EM602 + 16		
;
;IF EM602 > 80 THEN
;	EM602 = 0	
;END IF
LDP @MR000
NCJ #1001
;TYPE EM602.U,EM603.U,@MR4000.U
;
;FOR EM602 = EM602 TO 80 STEP 16
;
LD CR2002                ; 常時ON
MOV EM602 EM602          ; Task0 Main2@MR  Task0 Main2@MR
LABEL #2006
LD> EM602 #80            ; Task0 Main2@MR
CJ #2007
;	IF @MR4000:EM602 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM602                ; Task0 Main2@MR
CON
EXT
CON
STA.L Z12
LD<> @MR4000:Z12 #0      ; AUTO Main2
NCJ #2008
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2009
;	END IF	
;
LABEL #2008
;NEXT	
;
LD CR2002                ; 常時ON
LDA EM602                ; Task0 Main2@MR
CON
ADD #16
CON
STA EM602                ; Task0 Main2@MR
LDB CR2009               ; 演算結果が負
CJ #2006
LABEL #2009
LABEL #2007
;IF EM602 < 80 THEN
;
LD< EM602 #80            ; Task0 Main2@MR
NCJ #2010
;	EM603 = (EM602 / 16) * 100 + DMX(@MR4000:EM602) + #4000
;
LD CR2002                ; 常時ON
LDA EM602                ; Task0 Main2@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR4000:Z12          ; AUTO Main2
CON
DMX
CON
STA @VM3
CON
LDA EM602                ; Task0 Main2@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM4
CON
LDA @VM3
CON
EXT
CON
ADD.L @VM4
CON
ADD.L +4000
CON
STA EM603                ; Task0 Main2@MR
;END IF
;
LABEL #2010
;EM602 = EM602 + 16		
;
LD CR2002                ; 常時ON
LDA EM602                ; Task0 Main2@MR
CON
EXT
CON
ADD.L +16
CON
STA EM602                ; Task0 Main2@MR
;IF EM602 > 80 THEN
;
LD> EM602 #80            ; Task0 Main2@MR
NCJ #2011
;	EM602 = 0	
;
LD CR2002                ; 常時ON
MOV #0 EM602             ; Task0 Main2@MR
;END IF
LABEL #2011
LABEL #1001
;
;ON STG SubRoutine
;TYPE EM604.U,EM605.U,@MR4500.U
;	
;FOR EM604 = EM604 TO 320 STEP 16
;	IF @MR4500:EM604 <> 0 THEN
;		BREAK
;	END IF	
;NEXT
;		
;IF EM604 < 320 THEN
;	EM605 = (EM604 / 16) * 100 + DMX(@MR4500:EM604) + #4500
;END IF
;		
;EM604 = EM604 + 16	
;
;IF EM604 > 320 THEN
;   EM604 = 0
;END IF
LDP @MR000
NCJ #1002
;TYPE EM604.U,EM605.U,@MR4500.U
;
;FOR EM604 = EM604 TO 320 STEP 16
;
LD CR2002                ; 常時ON
MOV EM604 EM604          ; Task0 Sub@MR  Task0 Sub@MR
LABEL #2012
LD> EM604 #320           ; Task0 Sub@MR
CJ #2013
;	IF @MR4500:EM604 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM604                ; Task0 Sub@MR
CON
EXT
CON
STA.L Z12
LD<> @MR4500:Z12 #0      ; ①SUB_加圧冶具取出し動作
NCJ #2014
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2015
;	END IF	
;
LABEL #2014
;NEXT
;
LD CR2002                ; 常時ON
LDA EM604                ; Task0 Sub@MR
CON
ADD #16
CON
STA EM604                ; Task0 Sub@MR
LDB CR2009               ; 演算結果が負
CJ #2012
LABEL #2015
LABEL #2013
;IF EM604 < 320 THEN
;
LD< EM604 #320           ; Task0 Sub@MR
NCJ #2016
;	EM605 = (EM604 / 16) * 100 + DMX(@MR4500:EM604) + #4500
;
LD CR2002                ; 常時ON
LDA EM604                ; Task0 Sub@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR4500:Z12          ; ①SUB_加圧冶具取出し動作
CON
DMX
CON
STA @VM6
CON
LDA EM604                ; Task0 Sub@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM7
CON
LDA @VM6
CON
EXT
CON
ADD.L @VM7
CON
ADD.L +4500
CON
STA EM605                ; Task0 Sub@MR
;END IF
;
LABEL #2016
;EM604 = EM604 + 16	
;
LD CR2002                ; 常時ON
LDA EM604                ; Task0 Sub@MR
CON
EXT
CON
ADD.L +16
CON
STA EM604                ; Task0 Sub@MR
;IF EM604 > 320 THEN
;
LD> EM604 #320           ; Task0 Sub@MR
NCJ #2017
;   EM604 = 0
;
LD CR2002                ; 常時ON
MOV #0 EM604             ; Task0 Sub@MR
;END IF
LABEL #2017
LABEL #1002
;
;<h1/>Task_Init/ﾀｽｸ初期化
;[本STG内容]
;・本Task起動時に必要な初期化処理を記述して下さい
;・起動Taskの全Init処理終了後、Task_StartのSTGが起動します
STG LR800                ; _Grp1_Task0_Init.STG
ENDS
;<h1/>Task_Start/ﾀｽｸ開始
;[本STG内容]
;・Task起動後、以下運転ﾓｰﾄﾞに従い、各STGにJMPします
;【HOME】	→	LR5200
;【AUTO】	→	LR5400
;【MAINTE】	→	LR5600
;・本STGは追記、修正不要です
STG LR400                ; _Grp1_Task0_Start.STG
MPS
AND R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5200               ; _Grp1_Task0_HOME.STG
MRD
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5400               ; _Grp1_Task0_AUTO.STG
MPP
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5600               ; _Grp1_Task0_MAINTE.STG
;<h1/>Task_Finish/ﾀｽｸ終了
;[本STG内容]
;・各Taskの終了STGになります
;・運転ﾓｰﾄﾞに係わらず終了時は本STGを経由して終了して下さい
;・本STGは追記、修正不要です
STG LR600                ; _Grp1_Task0_Fin.STG
ANB @MR001               ; TASK0 ERROR
RES R41000               ; _Grp1_Task0_起動中ﾌﾗｸﾞ
CON
ENDS
;<h1/>ｽｶﾗRB(RC700)速度設定
LD CR2002                ; 常時ON
LDA DM7014               ; 装置基礎ﾃﾞｰﾀ8
CON
STA DM11238              ; 通常ｽﾋﾟｰﾄﾞ
;<h1/>■HOME/原点復帰
;[本STG内容]
;・STG @MR1000の続きから各Taskの原点復帰動作を記述する
;・動作終了時は@MR1515にJMPする事
STG LR5200               ; _Grp1_Task0_HOME.STG
JMP @MR1000              ; HOME
STG @MR1000              ; HOME
RES MR20000              ; TASK0復帰完了
CON
SET @MR1002              ; HOME中
CON
JMP @MR1003
;搬送ｽｶﾗ位置確認
;※組み立てｾﾙに進入中か否か、進入時復帰許可が有るか
STG @MR1003
MPS
AND DM2000.1             ; 上流OFFLINE
JMP @MR1100
MPP
ANB DM2000.1             ; 上流OFFLINE
MPS
LDB DM11033.14           ; SRB出力:加圧冶具置きエリア
ANB DM11033.15           ; SRB出力:インデックスエリア
ANL
JMP @MR1100
MPP
LD DM11033.14            ; SRB出力:加圧冶具置きエリア
OR DM11033.15            ; SRB出力:インデックスエリア
ANL
JMP @MR1004
STG @MR1004
MPS
LDB R41200               ; TASK0 PAUSE 要求
AND B360D                ; Index->TC  IL 進入許可
ANL
JMP @MR1100
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;<h1/>H1：搬送ｽｶﾗ_ｼﾘﾝﾀﾞ復帰
;各冶具上下ｼﾘﾝﾀﾞ上昇
STG @MR1100
RES MR7802               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_下降
CON
SET MR7803               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_上昇
CON
RES MR7808               ; ｽｶﾗRB_上冶具吸着_下降
CON
SET MR7809               ; ｽｶﾗRB_上冶具吸着_上昇
CON
RES MR7810               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_下降
CON
SET MR7811               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_上昇
CON
RES MR7805               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_ｺﾝﾌﾟﾗｲｱﾝｽｴｱON
CON
MPS
LDB MR5203               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_上限ERR
ANB MR5207               ; ｽｶﾗRB_接着上冶具吸着_上限ERR
ANB MR5301               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_上限ERR
ANB R5202                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_下限
AND R5203                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_上限
ANB R5206                ; ｽｶﾗRB_接着上冶具吸着_下限
AND R5207                ; ｽｶﾗRB_接着上冶具吸着_上限
ANB R5300                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_下限
AND R5301                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_上限
ANL
JMP @MR1101
MPP
LD MR5203                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_上限ERR
OR MR5207                ; ｽｶﾗRB_接着上冶具吸着_上限ERR
OR MR5301                ; ｽｶﾗRB_下冶具ﾁｬｯｸ_上限ERR
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;<h1/>H2：搬送ｽｶﾗ_起動
STG @MR1101
AND T14                  ; ｽｶﾗRB立上り完了
SET @MR5300              ; ⑧SUB_ｽｶﾗRBｾｯﾄｱｯﾌﾟ
CON
JMP @MR1102
STG @MR1102
AND @MR5301              ; ⑧SUB_ｽｶﾗRBｾｯﾄｱｯﾌﾟ完了
RES @MR5301              ; ⑧SUB_ｽｶﾗRBｾｯﾄｱｯﾌﾟ完了
CON
JMP @MR1114
;<h1/>H3：搬送ｽｶﾗ_原点へ
STG @MR1114
DW #1 DM11420            ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
CON
SET @MR5200              ; ⑦SUB_ｽｶﾗRB動作
CON
JMP @MR1115
STG @MR1115
AND @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
RES @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
CON
JMP @MR1200
;<h1/>H4：搬送ｽｶﾗ_加圧冶具有無確認
;加圧冶具確認
STG @MR1200
MPS
ANB R5303                ; ｽｶﾗRBﾁｬｯｸ_加圧冶具検出(遮光ON)
JMP @MR1203              ; ｽｶﾗﾁｬｯｸ_加圧冶具ﾁｬｯｸ開
MPP
AND R5303                ; ｽｶﾗRBﾁｬｯｸ_加圧冶具検出(遮光ON)
TMR @14 #5               ; 加圧有無ﾃﾞｨﾚｲ
CON
AND @T14                 ; 加圧有無ﾃﾞｨﾚｲ
MPS
AND<> DM11417 #0         ; 加圧冶具情報：0無1空2完3NG
JMP @MR1204
MPP
AND= DM11417 #0          ; 加圧冶具情報：0無1空2完3NG
JMP @MR1201              ; ｽｶﾗﾁｬｯｸ_加圧冶具除材要求
;ERR20:ｽｶﾗﾁｬｯｸ_加圧冶具除材要求
STG @MR1201              ; ｽｶﾗﾁｬｯｸ_加圧冶具除材要求
MPS
LDB R41200               ; TASK0 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
DW $7000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #60 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #5303 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR1202
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR1202
MPS
LDB R41200               ; TASK0 PAUSE 要求
AND @MR101               ; Task0 ｴﾗｰ完了
ANL
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR1200
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;<h1/>H5：ｽｶﾗﾁｬｯｸ_加圧冶具ﾁｬｯｸ開
STG @MR1203              ; ｽｶﾗﾁｬｯｸ_加圧冶具ﾁｬｯｸ開
RES MR7800               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉
CON
SET MR7801               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開
CON
MPS
LDB MR5201               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限ERR
ANB R5200                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉限
AND R5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限
ANL
DW #0 DM11417            ; 加圧冶具情報：0無1空2完3NG
CON
JMP @MR1204
MPP
LD MR5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限ERR
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;<h1/>H6：下冶具有無確認
STG @MR1204
MPS
ANB R5302                ; ｽｶﾗRBﾁｬｯｸ_下冶具検出(遮光ON)
JMP @MR1207
MPP
AND R5302                ; ｽｶﾗRBﾁｬｯｸ_下冶具検出(遮光ON)
TMR @15 #5               ; 下冶具有無ﾃﾞｨﾚｲ
CON
AND @T15                 ; 下冶具有無ﾃﾞｨﾚｲ
JMP @MR1205
;ｽｶﾗﾁｬｯｸ_下冶具除材要求
STG @MR1205
MPS
LDB R41200               ; TASK0 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
DW $4000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #61 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #5302 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR1206
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR1206
MPS
LDB R41200               ; TASK0 PAUSE 要求
AND @MR101               ; Task0 ｴﾗｰ完了
ANL
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR1204
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;<h1/>H7：ｽｶﾗﾁｬｯｸ_下冶具ﾁｬｯｸ開
STG @MR1207
RES MR7806               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_閉
CON
SET MR7807               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_開
CON
MPS
LDB MR5205               ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_開限ERR
ANB R5204                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_閉限
AND R5205                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_開限
ANL
DW #0 DM11418            ; ﾊﾝﾄﾞ下冶具記憶：0無1有
CON
JMP @MR1208
MPP
LD MR5205                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_開限ERR
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;<h1/>H8：上冶具有無確認
;上冶具吸着ON
;OUT1:ﾜｰｸ有り/OUT2:ﾜｰｸ無し
STG @MR1208
SET MR7010               ; ｽｶﾗRB_上冶具吸着ON
CON
RES MR7011               ; ｽｶﾗRB_上冶具吸着OFF
CON
RES MR7012               ; ｽｶﾗRB_上冶具破壊ON
CON
JMP @MR1209
STG @MR1209
MPS
AND R5209                ; ｽｶﾗRB_接着上冶具_吸着OUT2 
TMR @3 #5                ; 無し確認OK安定ﾀｲﾏ
CON
AND @T3                  ; 無し確認OK安定ﾀｲﾏ
JMP @MR1212
MPP
ANB R5209                ; ｽｶﾗRB_接着上冶具_吸着OUT2 
TMR @5 #5                ; 無し確認ﾀｲﾑｱｯﾌﾟ
CON
AND @T5                  ; 無し確認ﾀｲﾑｱｯﾌﾟ
JMP @MR1210
;ｽｶﾗﾁｬｯｸ_上冶具除材要求
STG @MR1210
MPS
LDB R41200               ; TASK0 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
DW $4000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #62 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #5209 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR1211
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR1211
MPS
LDB R41200               ; TASK0 PAUSE 要求
AND @MR101               ; Task0 ｴﾗｰ完了
ANL
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR1209
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;<h1/>H9：上冶具吸着OFF
STG @MR1212
RES MR7010               ; ｽｶﾗRB_上冶具吸着ON
CON
SET MR7011               ; ｽｶﾗRB_上冶具吸着OFF
CON
RES MR7012               ; ｽｶﾗRB_上冶具破壊ON
CON
JMP @MR1213
STG @MR1213
MPS
LDB R5208                ; ｽｶﾗRB_接着上冶具_吸着OUT1
ANB R5209                ; ｽｶﾗRB_接着上冶具_吸着OUT2 
ANL
DW #0 DM11419            ; ﾊﾝﾄﾞ上冶具記憶：0無1有
CON
JMP @MR1300
MPP
LD R5208                 ; ｽｶﾗRB_接着上冶具_吸着OUT1
OR R5209                 ; ｽｶﾗRB_接着上冶具_吸着OUT2 
ANL
TMR @17 #20              ; 上冶具吸着ｾﾝｻﾃﾞｨﾚｲ
CON
AND @T17                 ; 上冶具吸着ｾﾝｻﾃﾞｨﾚｲ
JMP @MR1214
;ｽｶﾗﾁｬｯｸ_上冶具除材要求
STG @MR1214
MPS
LDB R41200               ; TASK0 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
DW $4000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #62 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #5208 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR1215
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR1215
MPS
LDB R41200               ; TASK0 PAUSE 要求
AND @MR101               ; Task0 ｴﾗｰ完了
ANL
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR1212
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;<h1/>H10：NG置き場有無確認
STG @MR1300
MPS
AND R5304                ; 加圧冶具NG置場有無(L=ON)
JMP @MR1303
MPP
ANB R5304                ; 加圧冶具NG置場有無(L=ON)
TMR @35 #5               ; NG置場在荷ﾃﾞｨﾚｲ
CON
AND @T35                 ; NG置場在荷ﾃﾞｨﾚｲ
JMP @MR1301
;NG置場_加圧冶具除材要求
STG @MR1301
MPS
LDB R41200               ; TASK0 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
DW $4000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #73 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #5304 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR1302
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR1302
MPS
LDB R41200               ; TASK0 PAUSE 要求
AND @MR101               ; Task0 ｴﾗｰ完了
ANL
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR1300
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;NG品所持確認
STG @MR1303
MPS
ANB R5303                ; ｽｶﾗRBﾁｬｯｸ_加圧冶具検出(遮光ON)
JMP @MR1514
MPP
AND R5303                ; ｽｶﾗRBﾁｬｯｸ_加圧冶具検出(遮光ON)
TMR @37 #5               ; 加圧有無ﾃﾞｨﾚｲ
CON
AND @T37                 ; 加圧有無ﾃﾞｨﾚｲ
MPS
AND<> DM11417 #3         ; 加圧冶具情報：0無1空2完3NG
JMP @MR1514
MPP
AND= DM11417 #3          ; 加圧冶具情報：0無1空2完3NG
JMP @MR1304
;搬送ｽｶﾗ_NG置場へ
STG @MR1304
DW #5 DM11420            ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
CON
SET @MR5200              ; ⑦SUB_ｽｶﾗRB動作
CON
JMP @MR1305
STG @MR1305
AND @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
RES @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
CON
JMP @MR1306
;ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開
STG @MR1306
RES MR7800               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉
CON
SET MR7801               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開
CON
MPS
LDB MR5201               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限ERR
ANB R5200                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉限
AND R5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限
ANL
JMP @MR1307
MPP
LD MR5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限ERR
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;搬送ｽｶﾗ_原点へ
STG @MR1307
DW #1 DM11420            ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
CON
SET @MR5200              ; ⑦SUB_ｽｶﾗRB動作
CON
JMP @MR1308
STG @MR1308
AND @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
RES @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
CON
JMP @MR1309
STG @MR1309
@DEC DM11428             ; 完成品ｾｯﾄ必要数
CON
DW #0 DM11417            ; 加圧冶具情報：0無1空2完3NG
CON
@INC DM5026              ; _生産ｶｳﾝﾀ4
CON
RES @MR4900              ; ④SUB_加圧冶具ｾｯﾄ動作
CON
JMP @MR1300
;<h1/>H_END：原点復帰終了
STG @MR1514
SET MR20000              ; TASK0復帰完了
CON
JMP @MR1515              ; HOME END
STG @MR1515              ; HOME END
MPS
LDB R41200               ; TASK0 PAUSE 要求
ANB @MR001               ; TASK0 ERROR
ANL
RES @MR1002              ; HOME中
CON
JMP LR600                ; _Grp1_Task0_Fin.STG
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;<h1/>■AUTO/自動動作
STG LR5400               ; _Grp1_Task0_AUTO.STG
JMP @MR3000              ; AUTO Main1
;<h1/>AUTO_組立装置IF
LDP @MR3000              ; AUTO Main1
RES B3659                ; TC->Index 加圧冶具給材完了
CON
RES B365A                ; TC->Index 加圧冶具除材完了
CON
RES B365B                ; TC->Index 接着冶具給材完了
CON
DW #2 DM11415            ; 単独運転用_ﾒｲﾝ信号ﾁｪﾝｼﾞ
LD DM2000.1              ; 上流OFFLINE
AND= DM11415 #2          ; 単独運転用_ﾒｲﾝ信号ﾁｪﾝｼﾞ
LDB DM2000.1             ; 上流OFFLINE
AND B3609                ; Index->TC 冶具要求信号ｾｯﾄ完了
AND B360C                ; Index->TC 加圧冶具給材要求
AND B3604                ; Index->TC 電源ON 
AND B3600                ; Index->TC AUTO
ORL
OUT @MR002               ; 加圧冶具供給要求
LD DM2000.1              ; 上流OFFLINE
AND= DM11415 #1          ; 単独運転用_ﾒｲﾝ信号ﾁｪﾝｼﾞ
LDB DM2000.1             ; 上流OFFLINE
AND B3609                ; Index->TC 冶具要求信号ｾｯﾄ完了
AND B360A                ; Index->TC 加圧冶具除材要求
AND B3600                ; Index->TC AUTO
AND B3604                ; Index->TC 電源ON 
ORL
OUT @MR003               ; 完成品取出し要求
LD DM2000.1              ; 上流OFFLINE
LD= DM11415 #2           ; 単独運転用_ﾒｲﾝ信号ﾁｪﾝｼﾞ
OR= DM11415 #1           ; 単独運転用_ﾒｲﾝ信号ﾁｪﾝｼﾞ
OR= DM11415 #3           ; 単独運転用_ﾒｲﾝ信号ﾁｪﾝｼﾞ
ANL
LDB DM2000.1             ; 上流OFFLINE
AND B3604                ; Index->TC 電源ON 
AND B3600                ; Index->TC AUTO
AND B360B                ; Index->TC 接着冶具給材要求
ORL
OUT @MR004               ; 接着冶具供給要求
LD DM2000.1              ; 上流OFFLINE
LDB DM2000.1             ; 上流OFFLINE
AND B360D                ; Index->TC  IL 進入許可
AND B3600                ; Index->TC AUTO
AND B3604                ; Index->TC 電源ON 
ORL
OUT @MR005               ; 組立装置進入許可
LDB DM2000.1             ; 上流OFFLINE
AND B360E                ; Index->TC 接着冶具給材要求中止
AND B3600                ; Index->TC AUTO
AND B3604                ; Index->TC 電源ON 
OUT @MR006               ; 接着冶具給材要求中止信号
LDB DM2000.1             ; 上流OFFLINE
AND B360F                ; Index->TC加圧冶具NG除材要求 
AND B3600                ; Index->TC AUTO
AND B3604                ; Index->TC 電源ON 
OUT @MR007               ; 加圧冶具NG除材要求 
LD B3613                 ; Index->TC ｻｲｸﾙ停止
ANB DM2000.1             ; 上流OFFLINE
AND B3600                ; Index->TC AUTO
AND B3604                ; Index->TC 電源ON 
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB B360B                ; Index->TC 接着冶具給材要求
ANB B360C                ; Index->TC 加圧冶具給材要求
ANB B360A                ; Index->TC 加圧冶具除材要求
SET MR20203              ; 払出し停止
LDB DM11033.14           ; SRB出力:加圧冶具置きエリア
ANB DM11033.15           ; SRB出力:インデックスエリア
RES B3659                ; TC->Index 加圧冶具給材完了
CON
RES B365A                ; TC->Index 加圧冶具除材完了
CON
RES B365B                ; TC->Index 接着冶具給材完了
LDB DM2000.1             ; 上流OFFLINE
AND B3618                ; Index->TC 
AND B3600                ; Index->TC AUTO
AND B3604                ; Index->TC 電源ON 
OUT @MR008               ; 接着冶具投入許可
LDB DM2000.1             ; 上流OFFLINE
AND B3619                ; Index->TC 
AND B3600                ; Index->TC AUTO
AND B3604                ; Index->TC 電源ON 
OUT @MR009               ; 接着冶具受取中
LDB DM2000.1             ; 上流OFFLINE
AND B361A                ; Index->TC 
AND B3600                ; Index->TC AUTO
AND B3604                ; Index->TC 電源ON 
OUT @MR010               ; 加圧冶具投入除材許可
LDB DM2000.1             ; 上流OFFLINE
AND B361B                ; Index->TC 
AND B3600                ; Index->TC AUTO
AND B3604                ; Index->TC 電源ON 
OUT @MR011               ; 加圧冶具受渡し中
;<h1/>Auto-Main1/Autoﾒｲﾝﾙｰﾁﾝ1
;[本STG内容]
;・各TaskのAUTO動作を記述して下さい
;・動作ﾓｰﾄﾞは「AUTOAC」に格納されています(1～32)
;・@MR3000:AUTO_Main1開始、@MR3001:AUTO_Main1完了、@MR3002:AUTO_Main1動作中
STG @MR3000              ; AUTO Main1
MPS
ANB R47800               ; _Group1　ﾒﾝﾃ動作定停止移行中
MPS
ANB R57300               ; Task0 停止要求
SET @MR3002              ; AUTO Main1 Busy
CON
JMP @MR3003
MPP
AND R57300               ; Task0 停止要求
JMP @MR3913              ; A_END：Auto終了処理
MPP
AND R47800               ; _Group1　ﾒﾝﾃ動作定停止移行中
JMP @MR3915              ; AUTO END
;<h1/>A0-1：他装置機種一致確認
STG @MR3003
MPS
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
MPP
ANB R41200               ; TASK0 PAUSE 要求
MPS
AND R57300               ; Task0 停止要求
JMP @MR3913              ; A_END：Auto終了処理
MPP
ANB R57300               ; Task0 停止要求
MPS
LD= W2021 W2031          ; CAV機種番号1：CL_2：BK  ﾄﾚﾁｪﾝ機種番号1：CL_2：BK
AND= W2022 W2031         ; 転写機種番号1：CL_2：BK  ﾄﾚﾁｪﾝ機種番号1：CL_2：BK
ANB R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND MR20015              ; 加圧冶具数確認済み
OR DM2000.1              ; 上流OFFLINE
OR R46102                ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANL
JMP @MR3006
MPP
LD<> W2021 W2031         ; CAV機種番号1：CL_2：BK  ﾄﾚﾁｪﾝ機種番号1：CL_2：BK
OR<> W2022 W2031         ; 転写機種番号1：CL_2：BK  ﾄﾚﾁｪﾝ機種番号1：CL_2：BK
ANB DM2000.1             ; 上流OFFLINE
ANB R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANL
JMP @MR3004
;機種不一致異常
STG @MR3004
MPS
LDB R41200               ; TASK0 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET MR20014              ; 自動停止
CON
SET R39004               ; ｴﾗｰ中
CON
DW $1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #74 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR3005
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR3005
MPS
LDB R41200               ; TASK0 PAUSE 要求
AND @MR101               ; Task0 ｴﾗｰ完了
ANL
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR3915              ; AUTO END
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;<h1/>A0-2：NG置き場有無確認
STG @MR3006
MPS
AND R5304                ; 加圧冶具NG置場有無(L=ON)
JMP @MR3009              ; ｽｶﾗRBﾜｰｸ所持状況分岐
MPP
ANB R5304                ; 加圧冶具NG置場有無(L=ON)
TMR @36 #5               ; NG置場在荷ﾃﾞｨﾚｲ
CON
AND @T36                 ; NG置場在荷ﾃﾞｨﾚｲ
JMP @MR3007
;NG置場_加圧冶具除材要求
STG @MR3007
MPS
LDB R41200               ; TASK0 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
DW $4000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #73 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #5304 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR3008
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR3008
MPS
LDB R41200               ; TASK0 PAUSE 要求
AND @MR101               ; Task0 ｴﾗｰ完了
ANL
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR3006
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;<h1/>A1：ｽｶﾗRBﾜｰｸ所持状況分岐
;※ﾊﾝﾄﾞ冶具不一致が発生した場合にここに戻る→ﾊﾝﾄﾞ状況、取出信号より動作決定
STG @MR3009              ; ｽｶﾗRBﾜｰｸ所持状況分岐
MPS
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
MPP
LDB R41200               ; TASK0 PAUSE 要求
ANB @MR903               ; ﾊﾝﾄﾞ冶具状態不一致
ANL
MPS
AND R57300               ; Task0 停止要求
JMP @MR3913              ; A_END：Auto終了処理
MPP
ANB R57300               ; Task0 停止要求
MPS
LDB R5303                ; ｽｶﾗRBﾁｬｯｸ_加圧冶具検出(遮光ON)
ANB R5200                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉限
AND R5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限
AND= DM11417 #0          ; 加圧冶具情報：0無1空2完3NG
ANL
JMP @MR3010              ; 加圧冶具無
MPP
LD R5303                 ; ｽｶﾗRBﾁｬｯｸ_加圧冶具検出(遮光ON)
AND R5200                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉限
ANB R5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限
AND<> DM11417 #0         ; 加圧冶具情報：0無1空2完3NG
ANL
JMP @MR3011              ; 加圧冶具有
;加圧冶具無
;加圧冶具取出し状況確認
STG @MR3010              ; 加圧冶具無
MPS
AND @MR903               ; ﾊﾝﾄﾞ冶具状態不一致
JMP @MR3009              ; ｽｶﾗRBﾜｰｸ所持状況分岐
MPP
ANB @MR903               ; ﾊﾝﾄﾞ冶具状態不一致
MPS
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
MPP
ANB R41200               ; TASK0 PAUSE 要求
MPS
AND R57300               ; Task0 停止要求
JMP @MR3913              ; A_END：Auto終了処理
MPP
ANB R57300               ; Task0 停止要求
MPS
AND @MR007               ; 加圧冶具NG除材要求 
MPS
ANB @MR005               ; 組立装置進入許可
JMP @MR3600              ; 組み立て装置進入前位置へ
MPP
AND @MR005               ; 組立装置進入許可
JMP @MR3602              ; 組み立て装置_要求信号分岐
MPP
ANB @MR007               ; 加圧冶具NG除材要求 
MPS
LD @MR002                ; 加圧冶具供給要求
AND MR20300              ; T2→T0加圧冶具ﾄﾚｲ取出投入OK
ANL
JMP @MR3110              ; 加圧冶具取出し番号確認
MPP
LDB @MR002               ; 加圧冶具供給要求
ORB MR20300              ; T2→T0加圧冶具ﾄﾚｲ取出投入OK
LD MR20400               ; T5→T0_接着冶具ﾄﾚｲ取出しOK
LD= DM11418 #1           ; ﾊﾝﾄﾞ下冶具記憶：0無1有
AND= DM11419 #1          ; ﾊﾝﾄﾞ上冶具記憶：0無1有
AND R5302                ; ｽｶﾗRBﾁｬｯｸ_下冶具検出(遮光ON)
AND R5204                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_閉限
ANB R5205                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_開限
AND R5208                ; ｽｶﾗRB_接着上冶具_吸着OUT1
ANB R5209                ; ｽｶﾗRB_接着上冶具_吸着OUT2 
ORL
ANL
ANL
JMP @MR3013              ; 接着冶具状況確認
;加圧冶具有
;空冶具か完成品かで分岐
STG @MR3011              ; 加圧冶具有
MPS
AND @MR903               ; ﾊﾝﾄﾞ冶具状態不一致
JMP @MR3009              ; ｽｶﾗRBﾜｰｸ所持状況分岐
MPP
LDB @MR903               ; ﾊﾝﾄﾞ冶具状態不一致
AND R5303                ; ｽｶﾗRBﾁｬｯｸ_加圧冶具検出(遮光ON)
AND R5200                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉限
ANB R5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限
ANL
MPS
AND= DM11417 #1          ; 加圧冶具情報：0無1空2完3NG
JMP @MR3012
MRD
AND= DM11417 #2          ; 加圧冶具情報：0無1空2完3NG
MPS
AND MR20300              ; T2→T0加圧冶具ﾄﾚｲ取出投入OK
JMP @MR3100              ; 加圧冶具ﾄﾚｲｾｯﾄへ
MPP
LDB MR20300              ; T2→T0加圧冶具ﾄﾚｲ取出投入OK
AND MR20400              ; T5→T0_接着冶具ﾄﾚｲ取出しOK
ANL
JMP @MR3013              ; 接着冶具状況確認
MPP
AND= DM11417 #3          ; 加圧冶具情報：0無1空2完3NG
JMP @MR3903              ; NG品排出
;接着冶具ﾁｪｯｸ
STG @MR3012
MPS
AND @MR903               ; ﾊﾝﾄﾞ冶具状態不一致
JMP @MR3009              ; ｽｶﾗRBﾜｰｸ所持状況分岐
MPP
ANB @MR903               ; ﾊﾝﾄﾞ冶具状態不一致
MPS
LDB R5204                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_閉限
AND R5205                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_開限
ANB R5208                ; ｽｶﾗRB_接着上冶具_吸着OUT1
ANB R5209                ; ｽｶﾗRB_接着上冶具_吸着OUT2 
AND= DM11418 #0          ; ﾊﾝﾄﾞ下冶具記憶：0無1有
AND= DM11419 #0          ; ﾊﾝﾄﾞ上冶具記憶：0無1有
ANL
JMP @MR3013              ; 接着冶具状況確認
MPP
LD R5204                 ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_閉限
ANB R5205                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_開限
AND R5208                ; ｽｶﾗRB_接着上冶具_吸着OUT1
ANB R5209                ; ｽｶﾗRB_接着上冶具_吸着OUT2 
AND= DM11418 #1          ; ﾊﾝﾄﾞ下冶具記憶：0無1有
AND= DM11419 #1          ; ﾊﾝﾄﾞ上冶具記憶：0無1有
ANL
MPS
ANB @MR005               ; 組立装置進入許可
JMP @MR3600              ; 組み立て装置進入前位置へ
MPP
AND @MR005               ; 組立装置進入許可
JMP @MR3602              ; 組み立て装置_要求信号分岐
;接着冶具ﾁｪｯｸ
STG @MR3013              ; 接着冶具状況確認
MPS
AND @MR903               ; ﾊﾝﾄﾞ冶具状態不一致
JMP @MR3009              ; ｽｶﾗRBﾜｰｸ所持状況分岐
MPP
ANB @MR903               ; ﾊﾝﾄﾞ冶具状態不一致
MPS
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
MPP
ANB R41200               ; TASK0 PAUSE 要求
MPS
LD R57300                ; Task0 停止要求
ANB MR20203              ; 払出し停止
ANL
JMP @MR3913              ; A_END：Auto終了処理
MPP
LDB R57300               ; Task0 停止要求
OR MR20203               ; 払出し停止
ANL
MPS
LD= DM11418 #0           ; ﾊﾝﾄﾞ下冶具記憶：0無1有
AND= DM11419 #0          ; ﾊﾝﾄﾞ上冶具記憶：0無1有
ANB R5204                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_閉限
AND R5205                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_開限
ANB R5208                ; ｽｶﾗRB_接着上冶具_吸着OUT1
ANB R5209                ; ｽｶﾗRB_接着上冶具_吸着OUT2 
ANL
MPS
AND MR20400              ; T5→T0_接着冶具ﾄﾚｲ取出しOK
MPS
AND @MR004               ; 接着冶具供給要求
JMP @MR3400              ; 接着冶具取出しへ
MPP
ANB @MR004               ; 接着冶具供給要求
MPS
LD @MR002                ; 加圧冶具供給要求
ANB @MR003               ; 完成品取出し要求
ANL
MPS
LDB R5303                ; ｽｶﾗRBﾁｬｯｸ_加圧冶具検出(遮光ON)
ANB R5200                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉限
AND R5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限
AND= DM11417 #0          ; 加圧冶具情報：0無1空2完3NG
AND MR20300              ; T2→T0加圧冶具ﾄﾚｲ取出投入OK
ANL
JMP @MR3009              ; ｽｶﾗRBﾜｰｸ所持状況分岐
MPP
LD R5303                 ; ｽｶﾗRBﾁｬｯｸ_加圧冶具検出(遮光ON)
AND R5200                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉限
ANB R5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限
AND= DM11417 #1          ; 加圧冶具情報：0無1空2完3NG
ANL
MPS
ANB @MR005               ; 組立装置進入許可
JMP @MR3600              ; 組み立て装置進入前位置へ
MPP
AND @MR005               ; 組立装置進入許可
JMP @MR3602              ; 組み立て装置_要求信号分岐
MRD
LDB @MR002               ; 加圧冶具供給要求
AND @MR003               ; 完成品取出し要求
ANB R5303                ; ｽｶﾗRBﾁｬｯｸ_加圧冶具検出(遮光ON)
ANB R5200                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉限
AND R5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限
AND= DM11417 #0          ; 加圧冶具情報：0無1空2完3NG
ANL
MPS
ANB @MR005               ; 組立装置進入許可
JMP @MR3600              ; 組み立て装置進入前位置へ
MPP
AND @MR005               ; 組立装置進入許可
JMP @MR3602              ; 組み立て装置_要求信号分岐
MPP
LDB @MR003               ; 完成品取出し要求
ANB @MR002               ; 加圧冶具供給要求
ANB R5303                ; ｽｶﾗRBﾁｬｯｸ_加圧冶具検出(遮光ON)
ANB R5200                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉限
AND R5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限
AND= DM11417 #0          ; 加圧冶具情報：0無1空2完3NG
AND MR20203              ; 払出し停止
ANL
SET MR20014              ; 自動停止
CON
JMP @MR3913              ; A_END：Auto終了処理
MPP
ANB MR20400              ; T5→T0_接着冶具ﾄﾚｲ取出しOK
MPS
LD R5303                 ; ｽｶﾗRBﾁｬｯｸ_加圧冶具検出(遮光ON)
AND R5200                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉限
ANB R5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限
AND<> DM11417 #0         ; 加圧冶具情報：0無1空2完3NG
AND MR20300              ; T2→T0加圧冶具ﾄﾚｲ取出投入OK
ANL
JMP @MR3009              ; ｽｶﾗRBﾜｰｸ所持状況分岐
MPP
LDB R5303                ; ｽｶﾗRBﾁｬｯｸ_加圧冶具検出(遮光ON)
ANB R5200                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉限
AND R5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限
AND= DM11417 #0          ; 加圧冶具情報：0無1空2完3NG
ANL
MPS
LDB MR20203              ; 払出し停止
AND MR20300              ; T2→T0加圧冶具ﾄﾚｲ取出投入OK
ANL
MPS
LD @MR002                ; 加圧冶具供給要求
OR @MR003                ; 完成品取出し要求
ANL
JMP @MR3009              ; ｽｶﾗRBﾜｰｸ所持状況分岐
MPP
LD @MR004                ; 接着冶具供給要求
ANB @MR003               ; 完成品取出し要求
ANB @MR002               ; 加圧冶具供給要求
AND<> DM11034 #10        ; ｽｶﾗRB位置信号
ANL
JMP @MR3014
MPP
AND MR20203              ; 払出し停止
SET MR20014              ; 自動停止
CON
JMP @MR3913              ; A_END：Auto終了処理
MPP
LD= DM11418 #1           ; ﾊﾝﾄﾞ下冶具記憶：0無1有
AND= DM11419 #1          ; ﾊﾝﾄﾞ上冶具記憶：0無1有
AND R5204                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_閉限
ANB R5205                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_開限
AND R5208                ; ｽｶﾗRB_接着上冶具_吸着OUT1
ANB R5209                ; ｽｶﾗRB_接着上冶具_吸着OUT2 
ANL
MPS
LDB @MR002               ; 加圧冶具供給要求
AND @MR004               ; 接着冶具供給要求
ANL
MPS
ANB @MR005               ; 組立装置進入許可
JMP @MR3600              ; 組み立て装置進入前位置へ
MPP
AND @MR005               ; 組立装置進入許可
JMP @MR3602              ; 組み立て装置_要求信号分岐
MPP
AND @MR002               ; 加圧冶具供給要求
MPS
LDB MR20300              ; T2→T0加圧冶具ﾄﾚｲ取出投入OK
AND @MR004               ; 接着冶具供給要求
ANL
MPS
ANB @MR005               ; 組立装置進入許可
JMP @MR3600              ; 組み立て装置進入前位置へ
MPP
AND @MR005               ; 組立装置進入許可
JMP @MR3602              ; 組み立て装置_要求信号分岐
MPP
LD MR20300               ; T2→T0加圧冶具ﾄﾚｲ取出投入OK
ANB R5303                ; ｽｶﾗRBﾁｬｯｸ_加圧冶具検出(遮光ON)
ANB R5200                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉限
AND R5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限
AND= DM11417 #0          ; 加圧冶具情報：0無1空2完3NG
ANL
JMP @MR3009              ; ｽｶﾗRBﾜｰｸ所持状況分岐
;ｽｶﾗRB移動_接着冶具上空位置
STG @MR3014
DW #10 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
CON
SET @MR5200              ; ⑦SUB_ｽｶﾗRB動作
CON
JMP @MR3015
STG @MR3015
AND @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
RES @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
CON
JMP @MR3013              ; 接着冶具状況確認
;<h1/>A1-A：加圧冶具(完成品)ﾄﾚｲｾｯﾄへ
;ｽｶﾗRB移動_加圧冶具位置
LDP @MR3100              ; 加圧冶具ﾄﾚｲｾｯﾄへ
LDA DM11421              ; 加圧冶具完成品ｾｯﾄ番号
CON
ADD #1
CON
STA DM11406              ; 加圧冶具目標位置
STG @MR3100              ; 加圧冶具ﾄﾚｲｾｯﾄへ
DW #15 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
CON
SET @MR5200              ; ⑦SUB_ｽｶﾗRB動作
CON
JMP @MR3101
STG @MR3101
AND @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
RES @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
CON
JMP @MR3102
;加圧冶具ﾄﾚｲ_ﾜｰｸ記憶確認
STG @MR3102
MPS
AND<= DM11406 #10        ; 加圧冶具目標位置
LDA DM11406              ; 加圧冶具目標位置
CON
STA @DM11                ; 記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
MRD
LD> DM11406 #10          ; 加圧冶具目標位置
AND<= DM11406 #20        ; 加圧冶具目標位置
ANL
LDA DM11406              ; 加圧冶具目標位置
CON
SUB #10
CON
STA @DM11                ; 記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
MRD
LD> DM11406 #20          ; 加圧冶具目標位置
AND<= DM11406 #28        ; 加圧冶具目標位置
ANL
LDA DM11406              ; 加圧冶具目標位置
CON
SUB #20
CON
STA @DM11                ; 記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
MPP
JMP @MR3103
STG @MR3103
MPS
AND<= DM11406 #10        ; 加圧冶具目標位置
MPS
BLDB DM11408 @DM11       ; 加圧ﾄﾚｲﾜｰｸ有無記憶1-10_ON有  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
BANB DM11423 @DM11       ; 加圧ﾄﾚｲ完成品ｾｯﾄ記憶1-10_ON済  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
ANL
JMP @MR3107
MPP
BLD DM11408 @DM11        ; 加圧ﾄﾚｲﾜｰｸ有無記憶1-10_ON有  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
BOR DM11423 @DM11        ; 加圧ﾄﾚｲ完成品ｾｯﾄ記憶1-10_ON済  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
ANL
JMP @MR3104              ; 完成品投入先_ﾜｰｸ記憶不一致
MRD
LD> DM11406 #10          ; 加圧冶具目標位置
AND<= DM11406 #20        ; 加圧冶具目標位置
ANL
MPS
BLDB DM11409 @DM11       ; 加圧ﾄﾚｲﾜｰｸ有無記憶11-20_ON有  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
BANB DM11424 @DM11       ; 加圧ﾄﾚｲ完成品ｾｯﾄ記憶11-20_ON済  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
ANL
JMP @MR3107
MPP
BLD DM11409 @DM11        ; 加圧ﾄﾚｲﾜｰｸ有無記憶11-20_ON有  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
BOR DM11424 @DM11        ; 加圧ﾄﾚｲ完成品ｾｯﾄ記憶11-20_ON済  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
ANL
JMP @MR3104              ; 完成品投入先_ﾜｰｸ記憶不一致
MPP
LD> DM11406 #20          ; 加圧冶具目標位置
AND<= DM11406 #28        ; 加圧冶具目標位置
ANL
MPS
BLDB DM11410 @DM11       ; 加圧ﾄﾚｲﾜｰｸ有無記憶21-28_ON有  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
BANB DM11425 @DM11       ; 加圧ﾄﾚｲ完成品ｾｯﾄ記憶21-28_ON済  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
ANL
JMP @MR3107
MPP
BLD DM11410 @DM11        ; 加圧ﾄﾚｲﾜｰｸ有無記憶21-28_ON有  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
BOR DM11425 @DM11        ; 加圧ﾄﾚｲ完成品ｾｯﾄ記憶21-28_ON済  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
ANL
JMP @MR3104              ; 完成品投入先_ﾜｰｸ記憶不一致
;完成品投入先_ﾜｰｸ記憶不一致
STG @MR3104              ; 完成品投入先_ﾜｰｸ記憶不一致
MPS
LDB R41200               ; TASK0 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
DW $1400 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #67 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR3105
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR3105
MPS
LDB R41200               ; TASK0 PAUSE 要求
AND @MR101               ; Task0 ｴﾗｰ完了
ANL
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR105               ; SW1
JMP @MR3102
MPP
AND @MR106               ; SW2
JMP @MR3106
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;除材選択
STG @MR3106
MPS
AND<= DM11406 #10        ; 加圧冶具目標位置
LDA DM11406              ; 加圧冶具目標位置
CON
STA @DM11                ; 記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
CON
BRES DM11408 @DM11       ; 加圧ﾄﾚｲﾜｰｸ有無記憶1-10_ON有  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
MRD
LD> DM11406 #10          ; 加圧冶具目標位置
AND<= DM11406 #20        ; 加圧冶具目標位置
ANL
LDA DM11406              ; 加圧冶具目標位置
CON
SUB #10
CON
STA @DM11                ; 記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
CON
BRES DM11409 @DM11       ; 加圧ﾄﾚｲﾜｰｸ有無記憶11-20_ON有  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
MRD
LD> DM11406 #20          ; 加圧冶具目標位置
AND<= DM11406 #28        ; 加圧冶具目標位置
ANL
LDA DM11406              ; 加圧冶具目標位置
CON
SUB #20
CON
STA @DM11                ; 記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
CON
BRES DM11410 @DM11       ; 加圧ﾄﾚｲﾜｰｸ有無記憶21-28_ON有  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
MPP
JMP @MR3102
;加圧冶具ｾｯﾄ動作
STG @MR3107
SET @MR4900              ; ④SUB_加圧冶具ｾｯﾄ動作
CON
JMP @MR3108
STG @MR3108
AND @MR4901              ; ④SUB_加圧冶具ｾｯﾄ動作完了
RES @MR4901              ; ④SUB_加圧冶具ｾｯﾄ動作完了
CON
@INC DM5020              ; _生産ｶｳﾝﾀ1
CON
@INC DM5024              ; _生産ｶｳﾝﾀ3
CON
JMP @MR3109
;加圧冶具ﾄﾚｲ_ﾜｰｸ記憶ｾｯﾄ
STG @MR3109
MPS
AND<= DM11406 #10        ; 加圧冶具目標位置
LDA DM11406              ; 加圧冶具目標位置
CON
STA @DM11                ; 記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
CON
BSET DM11408 @DM11       ; 加圧ﾄﾚｲﾜｰｸ有無記憶1-10_ON有  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
CON
BSET DM11423 @DM11       ; 加圧ﾄﾚｲ完成品ｾｯﾄ記憶1-10_ON済  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
MRD
LD> DM11406 #10          ; 加圧冶具目標位置
AND<= DM11406 #20        ; 加圧冶具目標位置
ANL
LDA DM11406              ; 加圧冶具目標位置
CON
SUB #10
CON
STA @DM11                ; 記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
CON
BSET DM11409 @DM11       ; 加圧ﾄﾚｲﾜｰｸ有無記憶11-20_ON有  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
CON
BSET DM11424 @DM11       ; 加圧ﾄﾚｲ完成品ｾｯﾄ記憶11-20_ON済  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
MRD
LD> DM11406 #20          ; 加圧冶具目標位置
AND<= DM11406 #28        ; 加圧冶具目標位置
ANL
LDA DM11406              ; 加圧冶具目標位置
CON
SUB #20
CON
STA @DM11                ; 記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
CON
BSET DM11410 @DM11       ; 加圧ﾄﾚｲﾜｰｸ有無記憶21-28_ON有  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
CON
BSET DM11425 @DM11       ; 加圧ﾄﾚｲ完成品ｾｯﾄ記憶21-28_ON済  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
MPP
LDA DM11406              ; 加圧冶具目標位置
CON
STA DM11421              ; 加圧冶具完成品ｾｯﾄ番号
CON
JMP @MR3110              ; 加圧冶具取出し番号確認
;加圧冶具取出し番号確認
;完成品を必要数セットした→ﾄﾚｲﾁｪﾝｼﾞへ
;
;完成品が必要数セットされていない
;→取出し記憶番号確認
;28個(ﾄﾚｲ上全部)取出した場合→次のﾄﾚｲから先行して加圧冶具を取出す
;
;※完成品ｾｯﾄ必要数は完成品が異常にて除材されると-1される。
;(ﾄﾚｲﾁｪﾝｼﾞにて28にﾘｾｯﾄ)
STG @MR3110              ; 加圧冶具取出し番号確認
MPS
AND< DM11421 DM11428     ; 加圧冶具完成品ｾｯﾄ番号  完成品ｾｯﾄ必要数
MPS
AND< DM11426 #28         ; 加圧冶具取出番号記憶
JMP @MR3111
MPP
LD>= DM11426 #28         ; 加圧冶具取出番号記憶
AND MR20113              ; 加圧冶具先行取出し準備ok
ANB DM11427.1
ANL
RES MR20101              ; 加圧冶具先行取出しﾌﾗｸﾞ
CON
JMP @MR3300              ; 先行取出しへ
MPP
AND>= DM11421 DM11428    ; 加圧冶具完成品ｾｯﾄ番号  完成品ｾｯﾄ必要数
JMP @MR3112              ; ﾄﾚｲﾁｪﾝｼﾞへ
;加圧冶具取出し番号算出
STG @MR3111
MPS
AND @MR002               ; 加圧冶具供給要求
MPS
LDA DM11426              ; 加圧冶具取出番号記憶
CON
ADD #1
CON
STA DM11406              ; 加圧冶具目標位置
MPP
JMP @MR3200              ; 加圧冶具取出しへ
MPP
ANB @MR002               ; 加圧冶具供給要求
MPS
ANB DM2000.1             ; 上流OFFLINE
JMP @MR3013              ; 接着冶具状況確認
MPP
AND DM2000.1             ; 上流OFFLINE
MPS
LDA DM11426              ; 加圧冶具取出番号記憶
CON
ADD #1
CON
STA DM11406              ; 加圧冶具目標位置
MPP
DW #2 DM11415            ; 単独運転用_ﾒｲﾝ信号ﾁｪﾝｼﾞ
CON
JMP @MR3009              ; ｽｶﾗRBﾜｰｸ所持状況分岐
;ﾄﾚｲﾁｪﾝｼﾞ前_ｽｶﾗ退避
STG @MR3112              ; ﾄﾚｲﾁｪﾝｼﾞへ
DW #14 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
CON
SET @MR5200              ; ⑦SUB_ｽｶﾗRB動作
CON
JMP @MR3113
STG @MR3113
AND @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
RES @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
CON
JMP @MR3114
;TASK2へﾄﾚｲ除材要求
STG @MR3114
SET MR20301              ; T0→T2ﾄﾚｲ排出要求
CON
JMP @MR3115
STG @MR3115
ANB MR20300              ; T2→T0加圧冶具ﾄﾚｲ取出投入OK
RES MR20301              ; T0→T2ﾄﾚｲ排出要求
CON
JMP @MR3009              ; ｽｶﾗRBﾜｰｸ所持状況分岐
;<h1/>A1-B1：加圧冶具(空)取出しへ
;加圧冶具ﾄﾚｲ_ﾄﾚｲ有無記憶確認
STG @MR3200              ; 加圧冶具取出しへ
MPS
AND<= DM11406 #10        ; 加圧冶具目標位置
LDA DM11406              ; 加圧冶具目標位置
CON
STA @DM11                ; 記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
MRD
LD> DM11406 #10          ; 加圧冶具目標位置
AND<= DM11406 #20        ; 加圧冶具目標位置
ANL
LDA DM11406              ; 加圧冶具目標位置
CON
SUB #10
CON
STA @DM11                ; 記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
MRD
LD> DM11406 #20          ; 加圧冶具目標位置
AND<= DM11406 #28        ; 加圧冶具目標位置
ANL
LDA DM11406              ; 加圧冶具目標位置
CON
SUB #20
CON
STA @DM11                ; 記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
MPP
JMP @MR3201
STG @MR3201
MPS
LD<= DM11406 #10         ; 加圧冶具目標位置
BANB DM11423 @DM11       ; 加圧ﾄﾚｲ完成品ｾｯﾄ記憶1-10_ON済  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
ANL
MPS
BANB DM11408 @DM11       ; 加圧ﾄﾚｲﾜｰｸ有無記憶1-10_ON有  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
JMP @MR3110              ; 加圧冶具取出し番号確認
MPP
BAND DM11408 @DM11       ; 加圧ﾄﾚｲﾜｰｸ有無記憶1-10_ON有  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
JMP @MR3203
MRD
LD> DM11406 #10          ; 加圧冶具目標位置
AND<= DM11406 #20        ; 加圧冶具目標位置
BANB DM11424 @DM11       ; 加圧ﾄﾚｲ完成品ｾｯﾄ記憶11-20_ON済  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
ANL
MPS
BANB DM11409 @DM11       ; 加圧ﾄﾚｲﾜｰｸ有無記憶11-20_ON有  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
JMP @MR3110              ; 加圧冶具取出し番号確認
MPP
BAND DM11409 @DM11       ; 加圧ﾄﾚｲﾜｰｸ有無記憶11-20_ON有  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
JMP @MR3203
MPP
LD> DM11406 #20          ; 加圧冶具目標位置
AND<= DM11406 #28        ; 加圧冶具目標位置
BANB DM11425 @DM11       ; 加圧ﾄﾚｲ完成品ｾｯﾄ記憶21-28_ON済  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
ANL
MPS
BANB DM11410 @DM11       ; 加圧ﾄﾚｲﾜｰｸ有無記憶21-28_ON有  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
JMP @MR3110              ; 加圧冶具取出し番号確認
MPP
BAND DM11410 @DM11       ; 加圧ﾄﾚｲﾜｰｸ有無記憶21-28_ON有  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
JMP @MR3203
;ｽｶﾗRB移動_加圧冶具位置
STG @MR3203
DW #15 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
CON
SET @MR5200              ; ⑦SUB_ｽｶﾗRB動作
CON
JMP @MR3204
STG @MR3204
AND @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
RES @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
CON
JMP @MR3205
;加圧冶具取出し動作
STG @MR3205
SET @MR4500              ; ①SUB_加圧冶具取出し動作
CON
JMP @MR3206
STG @MR3206
AND @MR4501              ; ①SUB_加圧冶具取出し動作完了
RES @MR4501              ; ①SUB_加圧冶具取出し動作完了
CON
JMP @MR3207
;加圧冶具有無記憶管理
;取出した位置のﾜｰｸ有り記憶ﾘｾｯﾄ
STG @MR3207
MPS
AND<= DM11406 #10        ; 加圧冶具目標位置
LDA DM11406              ; 加圧冶具目標位置
CON
STA @DM11                ; 記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
CON
BRES DM11408 @DM11       ; 加圧ﾄﾚｲﾜｰｸ有無記憶1-10_ON有  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
MRD
LD> DM11406 #10          ; 加圧冶具目標位置
AND<= DM11406 #20        ; 加圧冶具目標位置
ANL
LDA DM11406              ; 加圧冶具目標位置
CON
SUB #10
CON
STA @DM11                ; 記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
CON
BRES DM11409 @DM11       ; 加圧ﾄﾚｲﾜｰｸ有無記憶11-20_ON有  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
MRD
LD> DM11406 #20          ; 加圧冶具目標位置
AND<= DM11406 #28        ; 加圧冶具目標位置
ANL
LDA DM11406              ; 加圧冶具目標位置
CON
SUB #20
CON
STA @DM11                ; 記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
CON
BRES DM11410 @DM11       ; 加圧ﾄﾚｲﾜｰｸ有無記憶21-28_ON有  記憶ﾋﾞｯﾄ_ｲﾝﾃﾞｯｸｽ修飾
MPP
LDA DM11406              ; 加圧冶具目標位置
CON
STA DM11426              ; 加圧冶具取出番号記憶
CON
JMP @MR3208
;除材ﾌﾗｸﾞ確認
STG @MR3208
MPS
ANB @MR900               ; 加圧冶具除材ﾌﾗｸﾞ
DW #1 DM11417            ; 加圧冶具情報：0無1空2完3NG
CON
JMP @MR3210
MPP
AND @MR900               ; 加圧冶具除材ﾌﾗｸﾞ
JMP @MR3209
STG @MR3209
RES @MR900               ; 加圧冶具除材ﾌﾗｸﾞ
CON
DW #0 DM11417            ; 加圧冶具情報：0無1空2完3NG
CON
JMP @MR3210
;取出し位置確認
;先行取出しﾌﾗｸﾞｾｯﾄ
STG @MR3210
MPS
AND= DM11426 #28         ; 加圧冶具取出番号記憶
SET MR20101              ; 加圧冶具先行取出しﾌﾗｸﾞ
CON
JMP @MR3009              ; ｽｶﾗRBﾜｰｸ所持状況分岐
MPP
AND<> DM11426 #28        ; 加圧冶具取出番号記憶
JMP @MR3009              ; ｽｶﾗRBﾜｰｸ所持状況分岐
;<h1/>A1-B2：加圧冶具(空)先行取出しへ
;ｽｶﾗRB移動_加圧冶具先行取出し1位置
STG @MR3300              ; 先行取出しへ
ANB R5300                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_下限
AND R5301                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_上限
DW #17 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
CON
SET @MR5200              ; ⑦SUB_ｽｶﾗRB動作
CON
JMP @MR3301
STG @MR3301
AND @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
RES @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
CON
JMP @MR3302
;加圧冶具取出し動作
STG @MR3302
SET @MR4500              ; ①SUB_加圧冶具取出し動作
CON
JMP @MR3303
STG @MR3303
AND @MR4501              ; ①SUB_加圧冶具取出し動作完了
RES @MR4501              ; ①SUB_加圧冶具取出し動作完了
CON
JMP @MR3304
;除材ﾌﾗｸﾞ確認
STG @MR3304
MPS
ANB @MR900               ; 加圧冶具除材ﾌﾗｸﾞ
DW #1 DM11417            ; 加圧冶具情報：0無1空2完3NG
CON
JMP @MR3306
MPP
AND @MR900               ; 加圧冶具除材ﾌﾗｸﾞ
JMP @MR3305
STG @MR3305
RES @MR900               ; 加圧冶具除材ﾌﾗｸﾞ
CON
DW #0 DM11417            ; 加圧冶具情報：0無1空2完3NG
CON
JMP @MR3306
STG @MR3306
SET DM11427.1
CON
JMP @MR3009              ; ｽｶﾗRBﾜｰｸ所持状況分岐
;<h1/>A1-C：接着冶具取出しへ
;ｽｶﾗRB移動_下冶具位置
STG @MR3400              ; 接着冶具取出しへ
ANB R5300                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_下限
AND R5301                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_上限
DW #13 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
CON
SET @MR5200              ; ⑦SUB_ｽｶﾗRB動作
CON
JMP @MR3401
STG @MR3401
AND @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
RES @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
CON
JMP @MR3402
;<h1/>A1-C1：下冶具取出し動作
STG @MR3402
SET @MR4600              ; ②SUB_下冶具取出し動作
CON
JMP @MR3403
STG @MR3403
AND @MR4601              ; ②SUB_下冶具取出し動作完了
RES @MR4601              ; ②SUB_下冶具取出し動作完了
CON
JMP @MR3404
;除材ﾌﾗｸﾞ確認
;※除材ﾌﾗｸﾞ有り→次の接着冶具取出し位置へ(上冶具も次のﾎﾟｲﾝﾄから取る)
STG @MR3404
MPS
ANB @MR901               ; 下冶具除材ﾌﾗｸﾞ
JMP @MR3500              ; 上冶具取出しへ
MPP
AND @MR901               ; 下冶具除材ﾌﾗｸﾞ
JMP @MR3405              ; 取出し番号確認
;上冶具除材時、取出し位置確認
;48番未満の時、次のﾎﾟｲﾝﾄをｾｯﾄ
;48番の時(48以上)、次のﾎﾟｲﾝﾄが無い為、接着冶具ﾄﾚｲ交換処理へ
STG @MR3405              ; 取出し番号確認
RES @MR901               ; 下冶具除材ﾌﾗｸﾞ
CON
MPS
LD< DM11404 #48          ; 上冶具取出番号記憶
AND< DM11405 #48         ; 下冶具取出番号記憶
ANL
JMP @MR3406              ; 取出し位置ｶｳﾝﾄｱｯﾌﾟ
MPP
LD>= DM11404 #48         ; 上冶具取出番号記憶
AND>= DM11405 #48        ; 下冶具取出番号記憶
ANL
JMP @MR3507              ; TASK5へﾄﾚｲ除材要求
STG @MR3406              ; 取出し位置ｶｳﾝﾄｱｯﾌﾟ
INC DM11404              ; 上冶具取出番号記憶
CON
INC DM11405              ; 下冶具取出番号記憶
CON
JMP @MR3009              ; ｽｶﾗRBﾜｰｸ所持状況分岐
;<h1/>A1-C2：上冶具取出し動作
;ｽｶﾗRB移動_上冶具位置
STG @MR3500              ; 上冶具取出しへ
DW #11 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
CON
SET @MR5200              ; ⑦SUB_ｽｶﾗRB動作
CON
JMP @MR3501
STG @MR3501
AND @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
RES @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
CON
JMP @MR3502
;上冶具取出し動作
STG @MR3502
SET @MR4700              ; ③SUB_上冶具取出し動作
CON
JMP @MR3503
STG @MR3503
AND @MR4701              ; ③SUB_上冶具取出し動作完了
RES @MR4701              ; ③SUB_上冶具取出し動作完了
CON
JMP @MR3504              ; 除材ﾌﾗｸﾞ確認
;除材ﾌﾗｸﾞ確認
;※除材ﾌﾗｸﾞ有り→次の接着冶具取出し位置へ
STG @MR3504              ; 除材ﾌﾗｸﾞ確認
MPS
LD< DM11404 #48          ; 上冶具取出番号記憶
AND< DM11405 #48         ; 下冶具取出番号記憶
ANL
JMP @MR3506
MPP
LD>= DM11404 #48         ; 上冶具取出番号記憶
AND>= DM11405 #48        ; 下冶具取出番号記憶
ANL
JMP @MR3507              ; TASK5へﾄﾚｲ除材要求
STG @MR3505              ; 除材ﾌﾗｸﾞ有り
RES @MR902               ; 接着冶具除材ﾌﾗｸﾞ
CON
MPS
LD< DM11404 #48          ; 上冶具取出番号記憶
AND< DM11405 #48         ; 下冶具取出番号記憶
ANL
JMP @MR3506
MPP
LD>= DM11404 #48         ; 上冶具取出番号記憶
AND>= DM11405 #48        ; 下冶具取出番号記憶
ANL
JMP @MR3507              ; TASK5へﾄﾚｲ除材要求
STG @MR3506
INC DM11404              ; 上冶具取出番号記憶
CON
INC DM11405              ; 下冶具取出番号記憶
CON
MPS
AND @MR005               ; 組立装置進入許可
JMP @MR3602              ; 組み立て装置_要求信号分岐
MPP
ANB @MR005               ; 組立装置進入許可
JMP @MR3009              ; ｽｶﾗRBﾜｰｸ所持状況分岐
;ｽｶﾗ退避
STG @MR3507              ; TASK5へﾄﾚｲ除材要求
DW #10 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
CON
SET @MR5200              ; ⑦SUB_ｽｶﾗRB動作
CON
JMP @MR3508
STG @MR3508
AND @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
RES @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
CON
JMP @MR3509
;TASK5へﾄﾚｲ除材要求
STG @MR3509
SET MR20401              ; T0→T5ﾄﾚｲ排出要求
CON
JMP @MR3510
STG @MR3510
ANB MR20400              ; T5→T0_接着冶具ﾄﾚｲ取出しOK
RES MR20401              ; T0→T5ﾄﾚｲ排出要求
CON
MPS
AND @MR005               ; 組立装置進入許可
JMP @MR3602              ; 組み立て装置_要求信号分岐
MPP
ANB @MR005               ; 組立装置進入許可
JMP @MR3009              ; ｽｶﾗRBﾜｰｸ所持状況分岐
;<h1/>A2：組み立て装置へﾜｰｸ供給
;組み立て装置進入前位置へ
STG @MR3600              ; 組み立て装置進入前位置へ
DW #4 DM11420            ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
CON
SET @MR5200              ; ⑦SUB_ｽｶﾗRB動作
CON
JMP @MR3601
STG @MR3601
AND @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
RES @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
CON
JMP @MR3602              ; 組み立て装置_要求信号分岐
;<h1/>A2-1：組み立て装置_要求信号分岐
STG @MR3602              ; 組み立て装置_要求信号分岐
MPS
AND @MR903               ; ﾊﾝﾄﾞ冶具状態不一致
JMP @MR3009              ; ｽｶﾗRBﾜｰｸ所持状況分岐
MPP
ANB @MR903               ; ﾊﾝﾄﾞ冶具状態不一致
MPS
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
MPP
ANB R41200               ; TASK0 PAUSE 要求
MPS
LD @MR004                ; 接着冶具供給要求
OR @MR002                ; 加圧冶具供給要求
OR @MR003                ; 完成品取出し要求
OR @MR007                ; 加圧冶具NG除材要求 
AND @MR005               ; 組立装置進入許可
ANL
JMP @MR3603              ; 上冶具供給
MPP
LDB @MR004               ; 接着冶具供給要求
ANB @MR002               ; 加圧冶具供給要求
ANB @MR003               ; 完成品取出し要求
ANB @MR007               ; 加圧冶具NG除材要求 
AND R57300               ; Task0 停止要求
ANL
JMP @MR3913              ; A_END：Auto終了処理
;<h1/>A3：上冶具供給(組立装置)
;ｽｶﾗRB移動_上冶具渡し上位置(組立装置側)
;※要求中止時→完成品取り出し分岐へ
STG @MR3603              ; 上冶具供給
ANB @MR903               ; ﾊﾝﾄﾞ冶具状態不一致
MPS
ANB @MR004               ; 接着冶具供給要求
JMP @MR3700              ; 加圧冶具供給分岐
MPP
AND @MR004               ; 接着冶具供給要求
MPS
LD= DM11418 #1           ; ﾊﾝﾄﾞ下冶具記憶：0無1有
AND= DM11419 #1          ; ﾊﾝﾄﾞ上冶具記憶：0無1有
AND R5302                ; ｽｶﾗRBﾁｬｯｸ_下冶具検出(遮光ON)
AND R5204                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_閉限
ANB R5205                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_開限
AND R5208                ; ｽｶﾗRB_接着上冶具_吸着OUT1
ANB R5209                ; ｽｶﾗRB_接着上冶具_吸着OUT2 
AND @MR004               ; 接着冶具供給要求
ANL
JMP @MR3604
MPP
LD= DM11418 #0           ; ﾊﾝﾄﾞ下冶具記憶：0無1有
AND= DM11419 #0          ; ﾊﾝﾄﾞ上冶具記憶：0無1有
ANB R5302                ; ｽｶﾗRBﾁｬｯｸ_下冶具検出(遮光ON)
ANB R5204                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_閉限
AND R5205                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_開限
ANB R5208                ; ｽｶﾗRB_接着上冶具_吸着OUT1
ANB R5209                ; ｽｶﾗRB_接着上冶具_吸着OUT2 
ANL
JMP @MR3009              ; ｽｶﾗRBﾜｰｸ所持状況分岐
STG @MR3604
MPS
ANB @MR006               ; 接着冶具給材要求中止信号
DW #30 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
CON
SET @MR5200              ; ⑦SUB_ｽｶﾗRB動作
CON
JMP @MR3605
MPP
AND @MR006               ; 接着冶具給材要求中止信号
JMP @MR3700              ; 加圧冶具供給分岐
STG @MR3605
AND @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
RES @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
CON
JMP @MR3606
;上流ｵﾌﾗｲﾝ時信号ｾｯﾄ
LDP @MR3606
AND DM2000.1             ; 上流OFFLINE
AND>= DM11416 #3         ; ﾃﾞﾊﾞｯｸﾞ接着冶具供給ｶｳﾝﾄ
DW #1 DM11415            ; 単独運転用_ﾒｲﾝ信号ﾁｪﾝｼﾞ
DW #0 DM11416            ; ﾃﾞﾊﾞｯｸﾞ接着冶具供給ｶｳﾝﾄ
STG @MR3606
JMP @MR3607
;ｽｶﾗRB_上下冶具吸着_下降
STG @MR3607
SET MR7810               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_下降
CON
RES MR7811               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_上昇
CON
SET MR7808               ; ｽｶﾗRB_上冶具吸着_下降
CON
RES MR7809               ; ｽｶﾗRB_上冶具吸着_上昇
CON
MPS
LDB MR5206               ; ｽｶﾗRB_接着上冶具吸着_下限ERR
ANB MR5300               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_下限ERR
AND R5206                ; ｽｶﾗRB_接着上冶具吸着_下限
ANB R5207                ; ｽｶﾗRB_接着上冶具吸着_上限
AND R5300                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_下限
ANB R5301                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_上限
ANL
JMP @MR3608
MPP
LD MR5206                ; ｽｶﾗRB_接着上冶具吸着_下限ERR
OR MR5300                ; ｽｶﾗRB_下冶具ﾁｬｯｸ_下限ERR
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;ｲﾝﾃﾞｯｸｽｲﾝﾀｰﾛｯｸ確認
STG @MR3608
MPS
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
MPP
LDB R41200               ; TASK0 PAUSE 要求
ANB @MR903               ; ﾊﾝﾄﾞ冶具状態不一致
ANL
MPS
LD= DM11418 #1           ; ﾊﾝﾄﾞ下冶具記憶：0無1有
AND= DM11419 #1          ; ﾊﾝﾄﾞ上冶具記憶：0無1有
AND R5302                ; ｽｶﾗRBﾁｬｯｸ_下冶具検出(遮光ON)
AND R5204                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_閉限
ANB R5205                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_開限
AND R5208                ; ｽｶﾗRB_接着上冶具_吸着OUT1
ANB R5209                ; ｽｶﾗRB_接着上冶具_吸着OUT2 
ANL
MPS
AND B3600                ; Index->TC AUTO
SET B3668                ; TC->Index 
CON
MPS
ANB @MR006               ; 接着冶具給材要求中止信号
MPS
LD @MR004                ; 接着冶具供給要求
AND @MR008               ; 接着冶具投入許可
AND R012                 ; ｲﾝﾀｰﾛｯｸ1ｲﾝﾃﾞｯｸｽ側OK
ANL
JMP @MR800               ; 接着冶具供給IF中1
MPP
LD CR2003                ; 常時OFF
ANB @MR004               ; 接着冶具供給要求
LD @MR003                ; 完成品取出し要求
OR @MR002                ; 加圧冶具供給要求
ANL
ANL
SET @MR908               ; 接着冶具給材ｷｬﾝｾﾙ
CON
JMP @MR3609
MPP
LD @MR006                ; 接着冶具給材要求中止信号
LD @MR003                ; 完成品取出し要求
OR @MR002                ; 加圧冶具供給要求
ANL
ANL
RES B3668                ; TC->Index 
CON
SET @MR908               ; 接着冶具給材ｷｬﾝｾﾙ
CON
JMP @MR3609
MPP
LDB B3600                ; Index->TC AUTO
AND R57300               ; Task0 停止要求
ANL
RES B3668                ; TC->Index 
CON
SET @MR909               ; 停止処理へ
CON
JMP @MR3609
MPP
LD= DM11418 #0           ; ﾊﾝﾄﾞ下冶具記憶：0無1有
AND= DM11419 #0          ; ﾊﾝﾄﾞ上冶具記憶：0無1有
ANB R5302                ; ｽｶﾗRBﾁｬｯｸ_下冶具検出(遮光ON)
ANB R5204                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_閉限
AND R5205                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_開限
ANB R5208                ; ｽｶﾗRB_接着上冶具_吸着OUT1
ANB R5209                ; ｽｶﾗRB_接着上冶具_吸着OUT2 
ANL
SET @MR908               ; 接着冶具給材ｷｬﾝｾﾙ
CON
JMP @MR3609
;組立装置へ、接着冶具受渡し中信号on
STG @MR800               ; 接着冶具供給IF中1
SET B3669                ; TC->Index 
CON
MPS
LD B3600                 ; Index->TC AUTO
AND @MR009               ; 接着冶具受取中
AND R012                 ; ｲﾝﾀｰﾛｯｸ1ｲﾝﾃﾞｯｸｽ側OK
AND @MR008               ; 接着冶具投入許可
ANL
RES B3668                ; TC->Index 
CON
JMP @MR801               ; 接着冶具供給IF中2
MPP
ANB B3600                ; Index->TC AUTO
RES B3669                ; TC->Index 
CON
JMP @MR3608
STG @MR801               ; 接着冶具供給IF中2
SET MR20110              ; 組立装置ｲﾝﾃﾞｯｸｽ干渉動作中
CON
OUT MR000                ; Cycleﾀｲﾑｶｳﾝﾄ
CON
JMP @MR3610
;接着冶具給材ｷｬﾝｾﾙ発生時_加圧冶具位置へ
;ｽｶﾗRB_上下冶具吸着_上昇
STG @MR3609
SET MR7811               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_上昇
CON
RES MR7810               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_下降
CON
SET MR7809               ; ｽｶﾗRB_上冶具吸着_上昇
CON
RES MR7808               ; ｽｶﾗRB_上冶具吸着_下降
CON
MPS
LDB MR5207               ; ｽｶﾗRB_接着上冶具吸着_上限ERR
ANB MR5301               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_上限ERR
ANB R5206                ; ｽｶﾗRB_接着上冶具吸着_下限
AND R5207                ; ｽｶﾗRB_接着上冶具吸着_上限
ANB R5300                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_下限
AND R5301                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_上限
ANL
RES @MR908               ; 接着冶具給材ｷｬﾝｾﾙ
CON
RES MR20110              ; 組立装置ｲﾝﾃﾞｯｸｽ干渉動作中
CON
MPS
ANB @MR909               ; 停止処理へ
JMP @MR3700              ; 加圧冶具供給分岐
MPP
AND @MR909               ; 停止処理へ
JMP @MR3913              ; A_END：Auto終了処理
MPP
LD MR5207                ; ｽｶﾗRB_接着上冶具吸着_上限ERR
OR MR5301                ; ｽｶﾗRB_下冶具ﾁｬｯｸ_上限ERR
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;接着冶具渡し位置へ
STG @MR3610
DW #31 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
CON
SET @MR5200              ; ⑦SUB_ｽｶﾗRB動作
CON
JMP @MR3611
STG @MR3611
AND @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
RES @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
CON
JMP @MR3612
;上下冶具ｾｯﾄ動作
STG @MR3612
SET @MR5000              ; ⑤SUB_下冶具ｾｯﾄ動作
CON
SET @MR5100              ; ⑥SUB_上冶具ｾｯﾄ動作
CON
JMP @MR3613
STG @MR3613
AND @MR5001              ; ⑤SUB_下冶具ｾｯﾄ動作完了
AND @MR5101              ; ⑥SUB_上冶具ｾｯﾄ動作終了
RES @MR5001              ; ⑤SUB_下冶具ｾｯﾄ動作完了
CON
RES @MR5101              ; ⑥SUB_上冶具ｾｯﾄ動作終了
CON
JMP @MR3614
;ｵﾌﾗｲﾝ時信号ｾｯﾄ
LD @MR3614
AND DM2000.1             ; 上流OFFLINE
INC DM11416              ; ﾃﾞﾊﾞｯｸﾞ接着冶具供給ｶｳﾝﾄ
;接着冶具渡し上空位置へ
STG @MR3614
DW #30 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
CON
SET @MR5200              ; ⑦SUB_ｽｶﾗRB動作
CON
JMP @MR3615
STG @MR3615
AND @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
RES @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
CON
@INC DM5028              ; _生産ｶｳﾝﾀ5
CON
RES MR20110              ; 組立装置ｲﾝﾃﾞｯｸｽ干渉動作中
CON
JMP @MR802               ; 接着冶具渡し終了IF
;組立装置IF信号off待ち
STG @MR802               ; 接着冶具渡し終了IF
SET B365B                ; TC->Index 接着冶具給材完了
CON
AND B3604                ; Index->TC 電源ON 
ANB @MR008               ; 接着冶具投入許可
ANB @MR009               ; 接着冶具受取中
RES B365B                ; TC->Index 接着冶具給材完了
CON
RES B3669                ; TC->Index 
CON
JMP @MR3700              ; 加圧冶具供給分岐
;<h1/>A4加圧冶具供給分岐
STG @MR3700              ; 加圧冶具供給分岐
ANB @MR903               ; ﾊﾝﾄﾞ冶具状態不一致
MPS
ANB @MR002               ; 加圧冶具供給要求
MPS
LDB @MR003               ; 完成品取出し要求
ANB @MR007               ; 加圧冶具NG除材要求 
ANL
JMP @MR3902              ; 受渡し終了
MPP
LD @MR003                ; 完成品取出し要求
ANB @MR007               ; 加圧冶具NG除材要求 
LD @MR007                ; 加圧冶具NG除材要求 
ANB @MR003               ; 完成品取出し要求
ORL
ANB R5303                ; ｽｶﾗRBﾁｬｯｸ_加圧冶具検出(遮光ON)
ANB R5200                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉限
AND R5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限
AND= DM11417 #0          ; 加圧冶具情報：0無1空2完3NG
ANL
JMP @MR3805
MPP
LD @MR002                ; 加圧冶具供給要求
ANB @MR003               ; 完成品取出し要求
ANL
MPS
LD R5303                 ; ｽｶﾗRBﾁｬｯｸ_加圧冶具検出(遮光ON)
AND R5200                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉限
ANB R5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限
AND= DM11417 #1          ; 加圧冶具情報：0無1空2完3NG
ANL
JMP @MR3701
MPP
LDB R5303                ; ｽｶﾗRBﾁｬｯｸ_加圧冶具検出(遮光ON)
ANB R5200                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉限
AND R5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限
AND= DM11417 #0          ; 加圧冶具情報：0無1空2完3NG
ANL
JMP @MR3902              ; 受渡し終了
;組み立て装置加圧冶具ｾｯﾄ上空位置へ
STG @MR3701
DW #20 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
CON
SET @MR5200              ; ⑦SUB_ｽｶﾗRB動作
CON
JMP @MR3702
STG @MR3702
AND @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
RES @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
CON
JMP @MR3703
;ｽｶﾗRB移動_加圧冶具置き位置(組立装置側)
;ｽｶﾗRB_加圧冶具ﾁｬｯｸ_下降
STG @MR3703
MPS
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
MPP
LDB R41200               ; TASK0 PAUSE 要求
ANB @MR903               ; ﾊﾝﾄﾞ冶具状態不一致
ANL
MPS
LD R5200                 ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉限
ANB R5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限
AND R5303                ; ｽｶﾗRBﾁｬｯｸ_加圧冶具検出(遮光ON)
AND= DM11417 #1          ; 加圧冶具情報：0無1空2完3NG
ANL
MPS
AND B3600                ; Index->TC AUTO
SET B366A                ; TC->Index 
CON
AND @MR002               ; 加圧冶具供給要求
AND @MR010               ; 加圧冶具投入除材許可
AND R013                 ; ｲﾝﾀｰﾛｯｸ2加圧冶具側OK
JMP @MR3704
MPP
LDB B3600                ; Index->TC AUTO
AND R57300               ; Task0 停止要求
ANL
RES B366A                ; TC->Index 
CON
JMP @MR3913              ; A_END：Auto終了処理
MPP
LD R5200                 ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉限
ANB R5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限
AND R5303                ; ｽｶﾗRBﾁｬｯｸ_加圧冶具検出(遮光ON)
ANL
MPS
AND= DM11417 #0          ; 加圧冶具情報：0無1空2完3NG
RES B366A                ; TC->Index 
CON
JMP @MR3902              ; 受渡し終了
MPP
AND= DM11417 #2          ; 加圧冶具情報：0無1空2完3NG
RES B366A                ; TC->Index 
CON
JMP @MR3902              ; 受渡し終了
;組立装置へ加圧冶具受渡し中信号on
STG @MR3704
SET B366B                ; TC->Index 
CON
MPS
LD B3600                 ; Index->TC AUTO
AND @MR010               ; 加圧冶具投入除材許可
AND @MR011               ; 加圧冶具受渡し中
AND R013                 ; ｲﾝﾀｰﾛｯｸ2加圧冶具側OK
ANL
RES B366A                ; TC->Index 
CON
JMP @MR3705
MPP
ANB B3600                ; Index->TC AUTO
RES B366B                ; TC->Index 
CON
JMP @MR3703
;供給開始
STG @MR3705
SET MR20109              ; 組立装置加圧冶具干渉動作中
CON
RES MR7803               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_上昇
CON
SET MR7802               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_下降
CON
LDA DM7010               ; 装置基礎ﾃﾞｰﾀ6
CON
STA DM11239              ; 挿入ｽﾋﾟｰﾄﾞ
CON
LDA DM7012               ; 装置基礎ﾃﾞｰﾀ7
CON
STA DM11240              ; 速度切換高さ
CON
DW #21 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
CON
SET @MR5200              ; ⑦SUB_ｽｶﾗRB動作
CON
JMP @MR3706
STG @MR3706
MPS
LDB MR5202               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_下限ERR
AND R5202                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_下限
ANB R5203                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_上限
AND @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
ANL
RES @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
CON
JMP @MR3800
MPP
LD MR5202                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_下限ERR
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;<h1/>A5：加圧冶具供給(組立装置側)
STG @MR3800
SET @MR4900              ; ④SUB_加圧冶具ｾｯﾄ動作
CON
JMP @MR3801
STG @MR3801
AND @MR4901              ; ④SUB_加圧冶具ｾｯﾄ動作完了
RES @MR4901              ; ④SUB_加圧冶具ｾｯﾄ動作完了
CON
@INC DM5022              ; _生産ｶｳﾝﾀ2
CON
JMP @MR3802
LDP @MR3802
AND DM2000.1             ; 上流OFFLINE
DW #3 DM11415            ; 単独運転用_ﾒｲﾝ信号ﾁｪﾝｼﾞ
;組み立て装置加圧冶具ｾｯﾄ上空位置へ
STG @MR3802
DW #20 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
CON
SET @MR5200              ; ⑦SUB_ｽｶﾗRB動作
CON
JMP @MR3803
STG @MR3803
AND @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
RES @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
CON
RES MR20109              ; 組立装置加圧冶具干渉動作中
CON
JMP @MR3804
STG @MR3804
SET B3659                ; TC->Index 加圧冶具給材完了
CON
AND B3604                ; Index->TC 電源ON 
ANB @MR002               ; 加圧冶具供給要求
ANB @MR010               ; 加圧冶具投入除材許可
ANB @MR011               ; 加圧冶具受渡し中
RES B3659                ; TC->Index 加圧冶具給材完了
CON
RES B366B                ; TC->Index 
CON
JMP @MR3902              ; 受渡し終了
;<h1/>A6：加圧冶具受取
;組み立て装置加圧冶具ｾｯﾄ位置へ
;ｽｶﾗRB移動_加圧冶具受取上空位置(組立装置側)
STG @MR3805
DW #22 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
CON
SET @MR5200              ; ⑦SUB_ｽｶﾗRB動作
CON
JMP @MR3806
STG @MR3806
AND @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
RES @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
CON
JMP @MR3807
;ｽｶﾗRB移動_加圧冶具受取位置(組立装置側)
;ｽｶﾗRB_加圧冶具ﾁｬｯｸ_下降
STG @MR3807
MPS
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
MPP
LDB R41200               ; TASK0 PAUSE 要求
ANB @MR903               ; ﾊﾝﾄﾞ冶具状態不一致
ANL
MPS
LDB R5200                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉限
AND R5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限
ANB R5303                ; ｽｶﾗRBﾁｬｯｸ_加圧冶具検出(遮光ON)
AND= DM11417 #0          ; 加圧冶具情報：0無1空2完3NG
ANL
MPS
AND B3600                ; Index->TC AUTO
SET B366A                ; TC->Index 
CON
AND @MR003               ; 完成品取出し要求
AND @MR010               ; 加圧冶具投入除材許可
AND R013                 ; ｲﾝﾀｰﾛｯｸ2加圧冶具側OK
JMP @MR803               ; 完成品取り出しIF中1
MPP
LDB B3600                ; Index->TC AUTO
AND R57300               ; Task0 停止要求
ANL
RES B366A                ; TC->Index 
CON
JMP @MR3913              ; A_END：Auto終了処理
MPP
LD R5200                 ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉限
ANB R5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限
AND R5303                ; ｽｶﾗRBﾁｬｯｸ_加圧冶具検出(遮光ON)
AND<> DM11417 #0         ; 加圧冶具情報：0無1空2完3NG
ANL
RES B366A                ; TC->Index 
CON
JMP @MR3902              ; 受渡し終了
;組立装置へ加圧冶具受渡し中信号on
STG @MR803               ; 完成品取り出しIF中1
SET B366B                ; TC->Index 
CON
MPS
LD B3600                 ; Index->TC AUTO
AND @MR010               ; 加圧冶具投入除材許可
AND @MR011               ; 加圧冶具受渡し中
AND R013                 ; ｲﾝﾀｰﾛｯｸ2加圧冶具側OK
ANL
RES B366A                ; TC->Index 
CON
JMP @MR804               ; 完成品取り出し動作
MPP
ANB B3600                ; Index->TC AUTO
RES B366B                ; TC->Index 
CON
JMP @MR3807
;完成品取り出し動作
STG @MR804               ; 完成品取り出し動作
SET MR20109              ; 組立装置加圧冶具干渉動作中
CON
RES MR7803               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_上昇
CON
SET MR7802               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_下降
CON
DW #23 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
CON
SET @MR5200              ; ⑦SUB_ｽｶﾗRB動作
CON
JMP @MR3808
STG @MR3808
MPS
LDB MR5202               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_下限ERR
AND R5202                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_下限
ANB R5203                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_上限
AND @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
ANL
RES @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
CON
JMP @MR3809
MPP
LD MR5202                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_下限ERR
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;加圧冶具取出し動作(組み立て装置)
STG @MR3809
SET @MR4500              ; ①SUB_加圧冶具取出し動作
CON
JMP @MR3810
LD @MR3809
MPS
AND @MR003               ; 完成品取出し要求
DW #2 @DM7               ; 取出し加圧冶具情報予約
MPP
AND @MR007               ; 加圧冶具NG除材要求 
DW #3 @DM7               ; 取出し加圧冶具情報予約
STG @MR3810
AND @MR4501              ; ①SUB_加圧冶具取出し動作完了
RES @MR4501              ; ①SUB_加圧冶具取出し動作完了
CON
JMP @MR3811
STG @MR3811
MPS
ANB @MR900               ; 加圧冶具除材ﾌﾗｸﾞ
MPS
ANB B3600                ; Index->TC AUTO
LDA @DM7                 ; 取出し加圧冶具情報予約
CON
STA DM11417              ; 加圧冶具情報：0無1空2完3NG
CON
JMP @MR3813
MPP
AND B3600                ; Index->TC AUTO
MPS
LD @MR003                ; 完成品取出し要求
ANB @MR007               ; 加圧冶具NG除材要求 
ANL
DW #2 DM11417            ; 加圧冶具情報：0無1空2完3NG
CON
JMP @MR3813
MPP
LD @MR007                ; 加圧冶具NG除材要求 
ANB @MR003               ; 完成品取出し要求
ANL
DW #3 DM11417            ; 加圧冶具情報：0無1空2完3NG
CON
JMP @MR3813
MPP
AND @MR900               ; 加圧冶具除材ﾌﾗｸﾞ
MPS
DW #0 DM11417            ; 加圧冶具情報：0無1空2完3NG
CON
JMP @MR3812
MPP
AND DM2000.1             ; 上流OFFLINE
DW #2 DM11415            ; 単独運転用_ﾒｲﾝ信号ﾁｪﾝｼﾞ
STG @MR3812
RES @MR900               ; 加圧冶具除材ﾌﾗｸﾞ
CON
JMP @MR3813
;ｽｶﾗRB移動_加圧冶具受取上空位置(組立装置側)
STG @MR3813
DW #22 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
CON
SET @MR5200              ; ⑦SUB_ｽｶﾗRB動作
CON
JMP @MR3814
STG @MR3814
AND @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
RES @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
CON
RES MR20109              ; 組立装置加圧冶具干渉動作中
CON
JMP @MR805               ; 処理内容分岐
STG @MR805               ; 処理内容分岐
MPS
LD @MR003                ; 完成品取出し要求
ANB @MR007               ; 加圧冶具NG除材要求 
ANL
SET B365A                ; TC->Index 加圧冶具除材完了
CON
JMP @MR3815
MPP
LD @MR007                ; 加圧冶具NG除材要求 
ANB @MR003               ; 完成品取出し要求
ANL
SET B365F                ; TC->Index 加圧冶具NG除材完了
CON
JMP @MR3815
STG @MR3815
AND B3604                ; Index->TC 電源ON 
MPS
ANB B3600                ; Index->TC AUTO
RES B366B                ; TC->Index 
CON
RES B365A                ; TC->Index 加圧冶具除材完了
CON
RES B365F                ; TC->Index 加圧冶具NG除材完了
CON
JMP @MR3902              ; 受渡し終了
MPP
LD B3600                 ; Index->TC AUTO
ANB @MR010               ; 加圧冶具投入除材許可
ANB @MR003               ; 完成品取出し要求
ANB @MR007               ; 加圧冶具NG除材要求 
ANL
RES B366B                ; TC->Index 
CON
RES B365A                ; TC->Index 加圧冶具除材完了
CON
RES B365F                ; TC->Index 加圧冶具NG除材完了
CON
JMP @MR3902              ; 受渡し終了
;<h1/>A7：組み立て装置へﾜｰｸ受渡し完了
;先頭へ
STG @MR3902              ; 受渡し終了
JMP @MR3009              ; ｽｶﾗRBﾜｰｸ所持状況分岐
;<h1/>AX：NG置き動作
;NG置き場有無確認
STG @MR3903              ; NG品排出
MPS
AND R5304                ; 加圧冶具NG置場有無(L=ON)
MPS
AND= DM11417 #3          ; 加圧冶具情報：0無1空2完3NG
JMP @MR3906
MPP
AND<> DM11417 #3         ; 加圧冶具情報：0無1空2完3NG
JMP @MR3009              ; ｽｶﾗRBﾜｰｸ所持状況分岐
MPP
ANB R5304                ; 加圧冶具NG置場有無(L=ON)
TMR @39 #5               ; NG置場在荷ﾃﾞｨﾚｲ
CON
AND @T39                 ; NG置場在荷ﾃﾞｨﾚｲ
JMP @MR3904
;NG置場_加圧冶具除材要求
STG @MR3904
MPS
LDB R41200               ; TASK0 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
DW $4000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #73 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #5304 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR3905
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR3905
MPS
LDB R41200               ; TASK0 PAUSE 要求
AND @MR101               ; Task0 ｴﾗｰ完了
ANL
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR3903              ; NG品排出
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;搬送ｽｶﾗ_NG置場へ
STG @MR3906
DW #5 DM11420            ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
CON
SET @MR5200              ; ⑦SUB_ｽｶﾗRB動作
CON
JMP @MR3907
STG @MR3907
AND @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
RES @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
CON
JMP @MR3908
;NG置場_NG品ｾｯﾄ
;ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開
STG @MR3908
RES MR7800               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉
CON
SET MR7801               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開
CON
MPS
LDB MR5201               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限ERR
ANB R5200                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉限
AND R5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限
ANL
JMP @MR3909
MPP
LD MR5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限ERR
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;搬送ｽｶﾗ_進入前位置へ
STG @MR3909
DW #4 DM11420            ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
CON
SET @MR5200              ; ⑦SUB_ｽｶﾗRB動作
CON
JMP @MR3910
STG @MR3910
AND @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
RES @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
CON
JMP @MR3911
STG @MR3911
DW #0 DM11417            ; 加圧冶具情報：0無1空2完3NG
CON
@DEC DM11428             ; 完成品ｾｯﾄ必要数
CON
@INC DM5026              ; _生産ｶｳﾝﾀ4
CON
RES @MR4900              ; ④SUB_加圧冶具ｾｯﾄ動作
CON
JMP @MR3903              ; NG品排出
;<h1/>A_END：Auto終了処理
;ｽｶﾗRB移動_待機位置
STG @MR3913              ; A_END：Auto終了処理
RES @MR909               ; 停止処理へ
CON
DW #2 DM11420            ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
CON
SET @MR5200              ; ⑦SUB_ｽｶﾗRB動作
CON
JMP @MR3914
STG @MR3914
AND @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
RES @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
CON
JMP @MR3915              ; AUTO END
STG @MR3915              ; AUTO END
MPS
LDB R41200               ; TASK0 PAUSE 要求
ANB @MR001               ; TASK0 ERROR
ANB @MR4002              ; Main2 Busy
ANL
RES @MR3002              ; AUTO Main1 Busy
CON
JMP LR600                ; _Grp1_Task0_Fin.STG
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;<h1/>Auto-Main2/Autoﾒｲﾝﾙｰﾁﾝ2
;[本STG内容]
;・@MR4000の起動はMain1にて行う事
;・@MR4000:AUTO_Main2開始、@MR4001:AUTO_Main2完了、@MR4002:AUTO_Main2動作中
STG @MR4000              ; AUTO Main2
SET @MR4002              ; Main2 Busy
CON
JMP @MR4003
STG @MR4003
JMP @MR4415              ; Main2 END
STG @MR4415              ; Main2 END
SET @MR4001              ; Main2 END
CON
RES @MR4002              ; Main2 Busy
CON
ENDS
;<h1/>■MAINTE/ﾒﾝﾃﾅﾝｽ動作
;[本STG内容]
;・各TaskのMAINTE動作を記述して下さい
;・動作ﾓｰﾄﾞは「MAINTEAC*」に格納されています(1～32)
;・動作終了時は@MR2915にJMPして下さい
STG LR5600               ; _Grp1_Task0_MAINTE.STG
JMP @MR2000
STG @MR2000
SET @MR2002              ; ﾒﾝﾃ中
CON
JMP @MR2003
STG @MR2003
MPS
LD= DM4110 #25           ; _Group1　ﾒﾝﾃ動作番号
OR= DM4110 #26           ; _Group1　ﾒﾝﾃ動作番号
ANL
JMP @MR2400              ; ｼﾘﾝﾀﾞｰ手動操作
MPP
LD<> DM4110 #25          ; _Group1　ﾒﾝﾃ動作番号
AND<> DM4110 #26         ; _Group1　ﾒﾝﾃ動作番号
ANL
JMP @MR2915              ; Mainte END
;<h1/>ｽﾃｯﾌﾟor通常　か選択
STG @MR2004
MPS
MSTRT SELECT_POST #1 MyTask #0 @MR2005;自ﾀｽｸ番号
MPP
AND @MR2005
RES @MR2005
CON
JMP @MR2914              ; ﾒﾝﾃ終了
;<h1/>手動操作_RB移動
STG @MR2400              ; ｼﾘﾝﾀﾞｰ手動操作
OUT @MR2402              ; ｼﾘﾝﾀﾞｰ 手動操作中
MPS
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
MPP
ANB R41200               ; TASK0 PAUSE 要求
MPS
AND @MR1902              ; 終了確認
JMP @MR2914              ; ﾒﾝﾃ終了
MRD
LD R41200                ; TASK0 PAUSE 要求
ANB @MR1902              ; 終了確認
ANL
SET @MR1900              ; Main1 HALT許可
MPP
LD= DM4110 #25           ; _Group1　ﾒﾝﾃ動作番号
ANP MR22000              ; Cylinder動作終了
LD= DM4110 #26           ; _Group1　ﾒﾝﾃ動作番号
LDP R44914               ; Teaching End2
ORP R44915               ; Teaching End
ANL
ORL
ANL
SET @MR1902              ; 終了確認
;<h1/>RC 制御ｽｲｯﾁ
;ﾎﾟｰｽﾞ/ﾎﾟｰｽﾞ解除
LDP MR23110              ; SW171ｽｶﾗRBﾎﾟｰｽﾞ
AND @MR2402              ; ｼﾘﾝﾀﾞｰ 手動操作中
ANB @MR5302              ; ⑧SUB_ｽｶﾗRBｾｯﾄｱｯﾌﾟ中
SET DM11232.5            ; SRB入力:Pause
LDP MR23112              ; SW173ｽｶﾗRBｺﾝﾃｨﾆｭｰ
AND @MR2402              ; ｼﾘﾝﾀﾞｰ 手動操作中
ANB @MR5302              ; ⑧SUB_ｽｶﾗRBｾｯﾄｱｯﾌﾟ中
AND DM11032.2            ; SRB出力:Paused
RES DM11232.5            ; SRB入力:Pause
CON
SET DM11232.6            ; SRB入力:Continue
LD @MR2402               ; ｼﾘﾝﾀﾞｰ 手動操作中
ANB @MR5302              ; ⑧SUB_ｽｶﾗRBｾｯﾄｱｯﾌﾟ中
ANB DM11032.2            ; SRB出力:Paused
RES DM11232.6            ; SRB入力:Continue
CON
RES DM11232.6            ; SRB入力:Continue
;ｻｰﾎﾞON/OFF
LDP MR23105              ; SW166ｽｶﾗRBｻｰﾎﾞON
AND @MR2402              ; ｼﾘﾝﾀﾞｰ 手動操作中
ANB @MR5202              ; ⑦SUB_ｽｶﾗRB動作中
ANB @MR5302              ; ⑧SUB_ｽｶﾗRBｾｯﾄｱｯﾌﾟ中
SET DM11232.8            ; SRB入力:SetMotorsOn
LDF MR23105              ; SW166ｽｶﾗRBｻｰﾎﾞON
AND @MR2402              ; ｼﾘﾝﾀﾞｰ 手動操作中
ANB @MR5202              ; ⑦SUB_ｽｶﾗRB動作中
ANB @MR5302              ; ⑧SUB_ｽｶﾗRBｾｯﾄｱｯﾌﾟ中
RES DM11232.8            ; SRB入力:SetMotorsOn
LDP MR23106              ; SW167ｽｶﾗRBｻｰﾎﾞOFF
AND @MR2402              ; ｼﾘﾝﾀﾞｰ 手動操作中
ANB @MR5202              ; ⑦SUB_ｽｶﾗRB動作中
ANB @MR5302              ; ⑧SUB_ｽｶﾗRBｾｯﾄｱｯﾌﾟ中
SET DM11232.9            ; SRB入力:SetMotorsOff
LDF MR23106              ; SW167ｽｶﾗRBｻｰﾎﾞOFF
AND @MR2402              ; ｼﾘﾝﾀﾞｰ 手動操作中
ANB @MR5202              ; ⑦SUB_ｽｶﾗRB動作中
ANB @MR5302              ; ⑧SUB_ｽｶﾗRBｾｯﾄｱｯﾌﾟ中
RES DM11232.9            ; SRB入力:SetMotorsOff
;ﾌﾟﾛｸﾞﾗﾑｽﾀｰﾄ/ｽﾄｯﾌﾟ
LDP MR23107              ; SW168ｽｶﾗRBﾌﾟﾛｸﾞﾗﾑｽﾀｰﾄ
AND @MR2402              ; ｼﾘﾝﾀﾞｰ 手動操作中
ANB @MR5302              ; ⑧SUB_ｽｶﾗRBｾｯﾄｱｯﾌﾟ中
SET DM11232.0            ; SRB入力:Start
LDF MR23107              ; SW168ｽｶﾗRBﾌﾟﾛｸﾞﾗﾑｽﾀｰﾄ
AND @MR2402              ; ｼﾘﾝﾀﾞｰ 手動操作中
ANB @MR5302              ; ⑧SUB_ｽｶﾗRBｾｯﾄｱｯﾌﾟ中
RES DM11232.0            ; SRB入力:Start
LDP MR23108              ; SW169ｽｶﾗRBﾌﾟﾛｸﾞﾗﾑｽﾄｯﾌﾟ
AND @MR2402              ; ｼﾘﾝﾀﾞｰ 手動操作中
ANB @MR5302              ; ⑧SUB_ｽｶﾗRBｾｯﾄｱｯﾌﾟ中
SET DM11232.4            ; SRB入力:Stop
LDF MR23108              ; SW169ｽｶﾗRBﾌﾟﾛｸﾞﾗﾑｽﾄｯﾌﾟ
AND @MR2402              ; ｼﾘﾝﾀﾞｰ 手動操作中
ANB @MR5302              ; ⑧SUB_ｽｶﾗRBｾｯﾄｱｯﾌﾟ中
RES DM11232.4            ; SRB入力:Stop
;ﾘｾｯﾄ
LDP MR23109              ; SW170ｽｶﾗRBﾘｾｯﾄ
AND @MR2402              ; ｼﾘﾝﾀﾞｰ 手動操作中
ANB DM11232.7            ; SRB入力:Rest
ANB @MR5202              ; ⑦SUB_ｽｶﾗRB動作中
ANB @MR5302              ; ⑧SUB_ｽｶﾗRBｾｯﾄｱｯﾌﾟ中
SET DM11232.7            ; SRB入力:Rest
LDB @MR5302              ; ⑧SUB_ｽｶﾗRBｾｯﾄｱｯﾌﾟ中
AND DM11232.7            ; SRB入力:Rest
MPS
LDB DM11032.3            ; SRB出力:Error
ANB DM11032.6            ; SRB出力:SEroor
ANB DM11032.7            ; SRB出力:Warning
OR @T30                  ; 手動時ﾘｾｯﾄ信号ﾀｲﾑｱｯﾌﾟ
ANL
RES DM11232.7            ; SRB入力:Rest
MPP
TMR @30 #50              ; 手動時ﾘｾｯﾄ信号ﾀｲﾑｱｯﾌﾟ
LD @MR2402               ; ｼﾘﾝﾀﾞｰ 手動操作中
ANB @MR5202              ; ⑦SUB_ｽｶﾗRB動作中
ANB @MR5302              ; ⑧SUB_ｽｶﾗRBｾｯﾄｱｯﾌﾟ中
MC
;<h1/>移動ﾎﾟｲﾝﾄｾｯﾄ
LDP MR23203              ; SW180ｽｶﾗRB位置1原点
ANB DM11034.15           ; SRB出力:動作中
DW #1 DM11401            ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS(TP表示)
CON
DW #1 DM11420            ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
LDP MR23204              ; SW181ｽｶﾗRB位置2待機
ANB DM11034.15           ; SRB出力:動作中
DW #2 DM11401            ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS(TP表示)
CON
DW #2 DM11420            ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
LDP MR23205              ; SW182ｽｶﾗRB位置3上昇
ANB DM11034.15           ; SRB出力:動作中
DW #3 DM11401            ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS(TP表示)
CON
DW #3 DM11420            ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
LDP MR23206              ; SW183ｽｶﾗRB位置4進入前
ANB DM11034.15           ; SRB出力:動作中
DW #4 DM11401            ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS(TP表示)
CON
DW #4 DM11420            ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
LDP MR23207              ; SW184ｽｶﾗRB位置5下冶具上
ANB DM11034.15           ; SRB出力:動作中
DW #10 DM11401           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS(TP表示)
CON
DW #10 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
LDP MR23208              ; SW185ｽｶﾗRB位置6下冶具取
ANB DM11034.15           ; SRB出力:動作中
DW #11 DM11401           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS(TP表示)
CON
DW #11 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
LDP MR23209              ; SW186ｽｶﾗRB位置7上冶具上
ANB DM11034.15           ; SRB出力:動作中
DW #12 DM11401           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS(TP表示)
CON
DW #12 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
LDP MR23210              ; SW187ｽｶﾗRB位置8上冶具取
ANB DM11034.15           ; SRB出力:動作中
DW #13 DM11401           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS(TP表示)
CON
DW #13 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
LDP MR23211              ; SW188ｽｶﾗRB位置9加圧上
ANB DM11034.15           ; SRB出力:動作中
DW #14 DM11401           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS(TP表示)
CON
DW #14 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
LDP MR23212              ; SW189ｽｶﾗRB位置10加圧取置
ANB DM11034.15           ; SRB出力:動作中
DW #15 DM11401           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS(TP表示)
CON
DW #15 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
LDP MR23213              ; SW190ｽｶﾗRB位置11加圧渡し上
ANB DM11034.15           ; SRB出力:動作中
DW #20 DM11401           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS(TP表示)
CON
DW #20 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
LDP MR23214              ; SW191ｽｶﾗRB位置12加圧渡し
ANB DM11034.15           ; SRB出力:動作中
LDA DM7010               ; 装置基礎ﾃﾞｰﾀ6
CON
STA DM11239              ; 挿入ｽﾋﾟｰﾄﾞ
CON
LDA DM7012               ; 装置基礎ﾃﾞｰﾀ7
CON
STA DM11240              ; 速度切換高さ
CON
DW #21 DM11401           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS(TP表示)
CON
DW #21 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
LDP MR23215              ; SW192ｽｶﾗRB位置13加圧受取上
ANB DM11034.15           ; SRB出力:動作中
DW #22 DM11401           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS(TP表示)
CON
DW #22 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
LDP MR23300              ; SW193ｽｶﾗRB位置14加圧受取
ANB DM11034.15           ; SRB出力:動作中
DW #23 DM11401           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS(TP表示)
CON
DW #23 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
LDP MR23301              ; SW194ｽｶﾗRB位置15接着冶具渡し上
ANB DM11034.15           ; SRB出力:動作中
DW #30 DM11401           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS(TP表示)
CON
DW #30 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
LDP MR23302              ; SW195ｽｶﾗRB位置16接着冶具渡し
ANB DM11034.15           ; SRB出力:動作中
LDA DM7002               ; 装置基礎ﾃﾞｰﾀ2
CON
STA DM11239              ; 挿入ｽﾋﾟｰﾄﾞ
CON
LDA DM7004               ; 基礎装置ﾃﾞｰﾀ3
CON
STA DM11240              ; 速度切換高さ
CON
DW #31 DM11401           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS(TP表示)
CON
DW #31 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
LDP MR23303              ; SW196ｽｶﾗRB位置17先行取出し上空
ANB DM11034.15           ; SRB出力:動作中
DW #16 DM11401           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS(TP表示)
CON
DW #16 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
LDP MR23304              ; SW197ｽｶﾗRB位置18先行取出し
ANB DM11034.15           ; SRB出力:動作中
DW #17 DM11401           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS(TP表示)
CON
DW #17 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
LDP MR23305              ; SW198ｽｶﾗRB位置19NG置場
ANB DM11034.15           ; SRB出力:動作中
DW #5 DM11401            ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS(TP表示)
CON
DW #5 DM11420            ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
MCR
;<h1/>RB移動起動
LDP MR23104              ; SW165ｽｶﾗRB移動開始
AND @MR2402              ; ｼﾘﾝﾀﾞｰ 手動操作中
ANB @MR5202              ; ⑦SUB_ｽｶﾗRB動作中
ANB @MR5302              ; ⑧SUB_ｽｶﾗRBｾｯﾄｱｯﾌﾟ中
ANB DM11032.2            ; SRB出力:Paused
AND DM11032.1            ; SRB出力:Running
AND DM11032.8            ; SRB出力:MotorsOn
ANB R5202                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_下限
AND R5203                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_上限
LDB R5206                ; ｽｶﾗRB_接着上冶具吸着_下限
AND R5207                ; ｽｶﾗRB_接着上冶具吸着_上限
ANB R5300                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_下限
AND R5301                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_上限
OR= DM11420 #31          ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
ANL
LD DM2000.1              ; 上流OFFLINE
LDB DM2000.1             ; 上流OFFLINE
LD B360D                 ; Index->TC  IL 進入許可
LD R012                  ; ｲﾝﾀｰﾛｯｸ1ｲﾝﾃﾞｯｸｽ側OK
LD<> DM11420 #31         ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
AND<> DM11420 #33        ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
ORL
ANL
LD R013                  ; ｲﾝﾀｰﾛｯｸ2加圧冶具側OK
LD<> DM11420 #21         ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
AND<> DM11420 #23        ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
ORL
ANL
OR<= DM11420 #20         ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
ANL
ORL
ANL
SET @MR2403
STG @MR2403
SET @MR5200              ; ⑦SUB_ｽｶﾗRB動作
CON
JMP @MR2404
STG @MR2404
AND @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
RES @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
CON
ENDS
;<h1/>搬送ｽｶﾗ_ｾｯﾄｱｯﾌﾟ
LDP MR23111              ; SW172ｽｶﾗRBｾｯﾄｱｯﾌﾟ
ANB DM11032.1            ; SRB出力:Running
ANB DM11032.8            ; SRB出力:MotorsOn
ANB @MR5302              ; ⑧SUB_ｽｶﾗRBｾｯﾄｱｯﾌﾟ中
SET @MR5300              ; ⑧SUB_ｽｶﾗRBｾｯﾄｱｯﾌﾟ
CON
SET @MR2405
STG @MR2405
AND @MR5301              ; ⑧SUB_ｽｶﾗRBｾｯﾄｱｯﾌﾟ完了
RES @MR5301              ; ⑧SUB_ｽｶﾗRBｾｯﾄｱｯﾌﾟ完了
CON
ENDS
;<h1/>Maintenance 終了
STG @MR2914              ; ﾒﾝﾃ終了
MCALL MODE_INDI #2
MCALL HOLD_REQUEST MyGroup;自ｸﾞﾙｰﾌﾟ番号
JMP @MR2915              ; Mainte END
STG @MR2915              ; Mainte END
RES @MR1902              ; 終了確認
CON
RES @MR2002              ; ﾒﾝﾃ中
CON
JMP LR600                ; _Grp1_Task0_Fin.STG
;<h1/>■SubRoutines/ｻﾌﾞﾙｰﾁﾝ
;[記述方法]
;・ｻﾌﾞﾙｰﾁﾝは本ﾌﾞｯｸﾏｰｸから下に記述していって下さい
;・ｻﾌﾞﾙｰﾁﾝは必ずﾌﾞｯｸﾏｰｸを挿入して処理内容を明確にする事
;<h1/>①SUB_加圧冶具取出し動作
STG @MR4500              ; ①SUB_加圧冶具取出し動作
SET @MR4502              ; ①SUB_加圧冶具取出し動作中
CON
JMP @MR4503
;ｽｶﾗRB_加圧冶具ﾁｬｯｸ_下降
STG @MR4503
RES MR7803               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_上昇
CON
SET MR7802               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_下降
CON
MPS
LDB MR5202               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_下限ERR
AND R5202                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_下限
ANB R5203                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_上限
ANL
JMP @MR4504
MPP
LD MR5202                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_下限ERR
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉
STG @MR4504
RES MR7801               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開
CON
SET MR7800               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉
CON
MPS
LDB MR5200               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉限ERR
AND R5200                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉限
ANB R5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限
ANL
JMP @MR4505
MPP
LD MR5200                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉限ERR
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;ｽｶﾗRB_加圧冶具ﾁｬｯｸ_上昇
STG @MR4505
RES MR7802               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_下降
CON
SET MR7803               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_上昇
CON
MPS
LDB MR5203               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_上限ERR
ANB R5202                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_下限
AND R5203                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_上限
ANL
JMP @MR4506
MPP
LD MR5203                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_上限ERR
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;加圧冶具有無確認
STG @MR4506
MPS
AND R5303                ; ｽｶﾗRBﾁｬｯｸ_加圧冶具検出(遮光ON)
JMP @MR4510
MPP
ANB R5303                ; ｽｶﾗRBﾁｬｯｸ_加圧冶具検出(遮光ON)
TMR @16 #5               ; 加圧有無ﾃﾞｨﾚｲ
CON
AND @T16                 ; 加圧有無ﾃﾞｨﾚｲ
JMP @MR4507
;加圧冶具取出し異常
;※除材によって加圧冶具数が変わってしまう為、除材機能停止中
STG @MR4507
MPS
LDB R41200               ; TASK0 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
DW $7800 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #63 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #5303 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR4508
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR4508
MPS
LDB R41200               ; TASK0 PAUSE 要求
AND @MR101               ; Task0 ｴﾗｰ完了
ANL
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR105               ; SW1
JMP @MR4506
MRD
AND @MR106               ; SW2
JMP @MR4509
MPP
LDB CR2002               ; 常時ON
AND @MR107               ; SW3
ANL
SET @MR900               ; 加圧冶具除材ﾌﾗｸﾞ
CON
JMP @MR4509
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;ﾘﾄﾗｲ・除材選択/ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開
STG @MR4509
RES MR7800               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉
CON
SET MR7801               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開
CON
MPS
LDB MR5201               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限ERR
ANB R5200                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉限
AND R5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限
ANL
MPS
ANB @MR900               ; 加圧冶具除材ﾌﾗｸﾞ
JMP @MR4503
MPP
AND @MR900               ; 加圧冶具除材ﾌﾗｸﾞ
JMP @MR4510
MPP
LD MR5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限ERR
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;加圧冶具取出し完了
STG @MR4510
SET @MR4501              ; ①SUB_加圧冶具取出し動作完了
CON
RES @MR4502              ; ①SUB_加圧冶具取出し動作中
CON
ENDS
;<h1/>②SUB_下冶具取出し動作
STG @MR4600              ; ②SUB_下冶具取出し動作
SET @MR4602              ; ②SUB_下冶具取出し動作中
CON
JMP @MR4603
;ｽｶﾗRB_下冶具ﾁｬｯｸ_下降
STG @MR4603
ANB R5204                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_閉限
AND R5205                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_開限
SET MR7810               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_下降
CON
RES MR7811               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_上昇
CON
JMP @MR4604
STG @MR4604
MPS
LDB MR5300               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_下限ERR
AND R5300                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_下限
ANB R5301                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_上限
ANL
JMP @MR4605
MPP
LD MR5300                ; ｽｶﾗRB_下冶具ﾁｬｯｸ_下限ERR
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;ｽｶﾗRB_下冶具ﾁｬｯｸ_閉
STG @MR4605
SET MR7806               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_閉
CON
RES MR7807               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_開
CON
MPS
LDB MR5204               ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_閉限ERR
AND R5204                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_閉限
ANB R5205                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_開限
ANL
JMP @MR4607
MPP
AND MR5204               ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_閉限ERR
JMP @MR4606
;ｽｶﾗRB_下冶具ﾁｬｯｸ_閉：異常発生時ﾁｬｯｸ上昇
STG @MR4606
SET MR7811               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_上昇
CON
RES MR7810               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_下降
CON
MPS
LDB MR5204               ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_閉限ERR
ANB R41200               ; TASK0 PAUSE 要求
ANL
JMP @MR4608
MPP
LD MR5204                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_閉限ERR
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;ｽｶﾗRB_下冶具ﾁｬｯｸ_上昇
STG @MR4607
SET MR7811               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_上昇
CON
RES MR7810               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_下降
CON
MPS
LDB MR5301               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_上限ERR
ANB R5300                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_下限
AND R5301                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_上限
ANL
JMP @MR4608
MPP
LD MR5301                ; ｽｶﾗRB_下冶具ﾁｬｯｸ_上限ERR
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;下冶具有無確認
STG @MR4608
MPS
AND R5302                ; ｽｶﾗRBﾁｬｯｸ_下冶具検出(遮光ON)
DW #1 DM11418            ; ﾊﾝﾄﾞ下冶具記憶：0無1有
CON
JMP @MR4614
MPP
ANB R5302                ; ｽｶﾗRBﾁｬｯｸ_下冶具検出(遮光ON)
TMR @18 #5               ; 下冶具有無ﾃﾞｨﾚｲ
CON
AND @T18                 ; 下冶具有無ﾃﾞｨﾚｲ
JMP @MR4609
;下冶具取出し異常
STG @MR4609
MPS
LDB R41200               ; TASK0 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
DW $7840 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #64 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #5302 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR4610
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR4610
MPS
LDB R41200               ; TASK0 PAUSE 要求
AND @MR101               ; Task0 ｴﾗｰ完了
ANL
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR105               ; SW1
JMP @MR4608
MRD
AND @MR106               ; SW2
MPS
ANB R5302                ; ｽｶﾗRBﾁｬｯｸ_下冶具検出(遮光ON)
JMP @MR4611
MPP
AND R5302                ; ｽｶﾗRBﾁｬｯｸ_下冶具検出(遮光ON)
JMP @MR4608
MPP
AND @MR107               ; SW3
MPS
ANB R5302                ; ｽｶﾗRBﾁｬｯｸ_下冶具検出(遮光ON)
SET @MR901               ; 下冶具除材ﾌﾗｸﾞ
CON
JMP @MR4611
MPP
AND R5302                ; ｽｶﾗRBﾁｬｯｸ_下冶具検出(遮光ON)
JMP @MR4608
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;ﾘﾄﾗｲ・除材選択/ｽｶﾗRB_下冶具ﾁｬｯｸ_開
STG @MR4611
RES MR7806               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_閉
CON
SET MR7807               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_開
CON
MPS
LDB MR5205               ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_開限ERR
ANB R5204                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_閉限
AND R5205                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_開限
ANL
MPS
ANB @MR901               ; 下冶具除材ﾌﾗｸﾞ
JMP @MR4603
MPP
AND @MR901               ; 下冶具除材ﾌﾗｸﾞ
DW #0 DM11418            ; ﾊﾝﾄﾞ下冶具記憶：0無1有
CON
JMP @MR4614
MPP
LD MR5205                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_開限ERR
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;下冶具取出し完了
STG @MR4614
SET @MR4601              ; ②SUB_下冶具取出し動作完了
CON
RES @MR4602              ; ②SUB_下冶具取出し動作中
CON
ENDS
;<h1/>③SUB_上冶具取出し動作
STG @MR4700              ; ③SUB_上冶具取出し動作
SET @MR4702              ; ③SUB_上冶具取出し動作中
CON
JMP @MR4703              ; ｽｶﾗRB_上冶具吸着_下降
;ｽｶﾗRB_上冶具吸着_下降
STG @MR4703              ; ｽｶﾗRB_上冶具吸着_下降
RES MR7804               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_ｺﾝﾌﾟﾗｲｱﾝｽｴｱOF
CON
SET MR7805               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_ｺﾝﾌﾟﾗｲｱﾝｽｴｱON
CON
SET MR7808               ; ｽｶﾗRB_上冶具吸着_下降
CON
RES MR7809               ; ｽｶﾗRB_上冶具吸着_上昇
CON
MPS
LDB MR5206               ; ｽｶﾗRB_接着上冶具吸着_下限ERR
AND R5206                ; ｽｶﾗRB_接着上冶具吸着_下限
ANB R5207                ; ｽｶﾗRB_接着上冶具吸着_上限
ANL
JMP @MR4704
MPP
LD MR5206                ; ｽｶﾗRB_接着上冶具吸着_下限ERR
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;ｽｶﾗRB_上冶具吸着ON
STG @MR4704
SET MR7010               ; ｽｶﾗRB_上冶具吸着ON
CON
RES MR7011               ; ｽｶﾗRB_上冶具吸着OFF
CON
RES MR7012               ; ｽｶﾗRB_上冶具破壊ON
CON
TMR @6 #2                ; 吸着ONﾃﾞｨﾚｲﾀｲﾏ
CON
AND @T6                  ; 吸着ONﾃﾞｨﾚｲﾀｲﾏ
JMP @MR4705
STG @MR4705
MPS
AND R5208                ; ｽｶﾗRB_接着上冶具_吸着OUT1
TMR @7 #3                ; 吸着ON安定ﾀｲﾏ
CON
AND @T7                  ; 吸着ON安定ﾀｲﾏ
JMP @MR4706
MPP
ANB R5208                ; ｽｶﾗRB_接着上冶具_吸着OUT1
TMR @8 #20               ; 吸着ﾀｲﾑｱｯﾌﾟ
CON
AND @T8                  ; 吸着ﾀｲﾑｱｯﾌﾟ
JMP @MR4706
;ｽｶﾗRB_上冶具吸着_上昇
STG @MR4706
SET MR7809               ; ｽｶﾗRB_上冶具吸着_上昇
CON
RES MR7808               ; ｽｶﾗRB_上冶具吸着_下降
CON
MPS
LDB MR5207               ; ｽｶﾗRB_接着上冶具吸着_上限ERR
ANB R5206                ; ｽｶﾗRB_接着上冶具吸着_下限
AND R5207                ; ｽｶﾗRB_接着上冶具吸着_上限
ANL
JMP @MR4707              ; ｽｶﾗRB_上冶具吸着上昇後_ﾜｰｸ確認
MPP
LD MR5207                ; ｽｶﾗRB_接着上冶具吸着_上限ERR
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;ｽｶﾗRB_上冶具吸着上昇後_ﾜｰｸ確認
STG @MR4707              ; ｽｶﾗRB_上冶具吸着上昇後_ﾜｰｸ確認
MPS
AND R5208                ; ｽｶﾗRB_接着上冶具_吸着OUT1
DW #1 DM11419            ; ﾊﾝﾄﾞ上冶具記憶：0無1有
CON
JMP @MR4815              ; 上冶具取出し終了
MPP
ANB R5208                ; ｽｶﾗRB_接着上冶具_吸着OUT1
TMR @9 #20               ; 吸着確認ﾀｲﾑｱｯﾌﾟ
CON
AND @T9                  ; 吸着確認ﾀｲﾑｱｯﾌﾟ
JMP @MR4708
;上冶具吸着NG
STG @MR4708
MPS
LDB R41200               ; TASK0 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
DW $7840 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #65 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #5208 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR4709
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR4709
MPS
LDB R41200               ; TASK0 PAUSE 要求
AND @MR101               ; Task0 ｴﾗｰ完了
ANL
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR105               ; SW1
JMP @MR4707              ; ｽｶﾗRB_上冶具吸着上昇後_ﾜｰｸ確認
MRD
AND @MR106               ; SW2
JMP @MR4710              ; 再取出し前ﾜｰｸ無し確認
MPP
AND @MR107               ; SW3
MPS
AND R5209                ; ｽｶﾗRB_接着上冶具_吸着OUT2 
SET MR7011               ; ｽｶﾗRB_上冶具吸着OFF
CON
RES MR7010               ; ｽｶﾗRB_上冶具吸着ON
CON
RES MR7012               ; ｽｶﾗRB_上冶具破壊ON
CON
DW #0 DM11419            ; ﾊﾝﾄﾞ上冶具記憶：0無1有
CON
JMP @MR4713              ; 接着冶具除材要求
MPP
ANB R5209                ; ｽｶﾗRB_接着上冶具_吸着OUT2 
JMP @MR4707              ; ｽｶﾗRB_上冶具吸着上昇後_ﾜｰｸ確認
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;再取出し前ﾜｰｸ無し確認
STG @MR4710              ; 再取出し前ﾜｰｸ無し確認
MPS
AND R5209                ; ｽｶﾗRB_接着上冶具_吸着OUT2 
JMP @MR4703              ; ｽｶﾗRB_上冶具吸着_下降
MPP
ANB R5209                ; ｽｶﾗRB_接着上冶具_吸着OUT2 
TMR @10 #20              ; 上冶具吸着ﾃﾞｨﾚｲ
CON
AND @T10                 ; 上冶具吸着ﾃﾞｨﾚｲ
JMP @MR4707              ; ｽｶﾗRB_上冶具吸着上昇後_ﾜｰｸ確認
;接着冶具除材要求
;※上下冶具の両方を除材
STG @MR4713              ; 接着冶具除材要求
MPS
LDB R41200               ; TASK0 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
DW $4000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #66 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #5209 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR4714
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR4714
MPS
LDB R41200               ; TASK0 PAUSE 要求
AND @MR101               ; Task0 ｴﾗｰ完了
ANL
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR4715
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;ｽｶﾗ退避
STG @MR4715
DW #10 DM11420           ; ｽｶﾗRBﾀｰｹﾞｯﾄPOS
CON
SET @MR5200              ; ⑦SUB_ｽｶﾗRB動作
CON
JMP @MR4800
STG @MR4800
AND @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
RES @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
CON
JMP @MR4801
;下冶具有無確認_※接着冶具除材要求中
STG @MR4801
MPS
AND R5302                ; ｽｶﾗRBﾁｬｯｸ_下冶具検出(遮光ON)
JMP @MR4713              ; 接着冶具除材要求
MPP
ANB R5302                ; ｽｶﾗRBﾁｬｯｸ_下冶具検出(遮光ON)
JMP @MR4802
;ｽｶﾗRB_下冶具ﾁｬｯｸ_開_※接着冶具除材要求中
STG @MR4802
SET MR7807               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_開
CON
RES MR7806               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_閉
CON
MPS
LDB MR5205               ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_開限ERR
ANB R5204                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_閉限
AND R5205                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_開限
ANL
SET @MR902               ; 接着冶具除材ﾌﾗｸﾞ
CON
JMP @MR4815              ; 上冶具取出し終了
MPP
LD MR5205                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_開限ERR
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;上冶具取出し終了
STG @MR4815              ; 上冶具取出し終了
SET @MR4701              ; ③SUB_上冶具取出し動作完了
CON
RES @MR4702              ; ③SUB_上冶具取出し動作中
CON
ENDS
;<h1/>④SUB_加圧冶具ｾｯﾄ動作
STG @MR4900              ; ④SUB_加圧冶具ｾｯﾄ動作
SET @MR4902              ; ④SUB_加圧冶具ｾｯﾄ動作中
CON
JMP @MR4903
;ｽｶﾗRB_加圧冶具ﾁｬｯｸ_下降
STG @MR4903
RES MR7803               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_上昇
CON
SET MR7802               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_下降
CON
MPS
LDB MR5202               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_下限ERR
AND R5202                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_下限
ANB R5203                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_上限
ANL
JMP @MR4904
MPP
LD MR5202                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_下限ERR
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開
STG @MR4904
RES MR7800               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉
CON
SET MR7801               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開
CON
MPS
LDB MR5201               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限ERR
ANB R5200                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉限
AND R5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限
ANL
JMP @MR4905
MPP
LD MR5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限ERR
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;ｽｶﾗRB_加圧冶具ﾁｬｯｸ_上昇
STG @MR4905
RES MR7802               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_下降
CON
SET MR7803               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_上昇
CON
MPS
LDB MR5203               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_上限ERR
ANB R5202                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_下限
AND R5203                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_上限
ANL
JMP @MR4906
MPP
LD MR5203                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_上限ERR
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;加圧冶具有無確認
STG @MR4906
MPS
ANB R5303                ; ｽｶﾗRBﾁｬｯｸ_加圧冶具検出(遮光ON)
DW #0 DM11417            ; 加圧冶具情報：0無1空2完3NG
CON
JMP @MR4912
MPP
AND R5303                ; ｽｶﾗRBﾁｬｯｸ_加圧冶具検出(遮光ON)
TMR @19 #5               ; 加圧有無ﾃﾞｨﾚｲ
CON
AND @T19                 ; 加圧有無ﾃﾞｨﾚｲ
JMP @MR4907
;加圧冶具ｾｯﾄ異常
STG @MR4907
MPS
LDB R41200               ; TASK0 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
DW $7000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #68 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #5303 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR4908
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR4908
MPS
LDB R41200               ; TASK0 PAUSE 要求
AND @MR101               ; Task0 ｴﾗｰ完了
ANL
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR4906
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;加圧冶具ｾｯﾄ完了
STG @MR4912
SET @MR4901              ; ④SUB_加圧冶具ｾｯﾄ動作完了
CON
RES @MR4902              ; ④SUB_加圧冶具ｾｯﾄ動作中
CON
ENDS
;<h1/>⑤SUB_下冶具ｾｯﾄ動作
STG @MR5000              ; ⑤SUB_下冶具ｾｯﾄ動作
SET MR20111              ; 下冶具渡し動作中
CON
SET @MR5002              ; ⑤SUB_下冶具ｾｯﾄ動作中
CON
JMP @MR5003
;ｽｶﾗRB_下冶具ﾁｬｯｸ_下降
STG @MR5003
SET MR7810               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_下降
CON
RES MR7811               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_上昇
CON
MPS
LDB MR5300               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_下限ERR
AND R5300                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_下限
ANB R5301                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_上限
ANL
JMP @MR5006
MPP
LD MR5300                ; ｽｶﾗRB_下冶具ﾁｬｯｸ_下限ERR
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;ｽｶﾗRB_下冶具ﾁｬｯｸ_開
STG @MR5006
SET MR7807               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_開
CON
RES MR7806               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_閉
CON
MPS
LDB MR5205               ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_開限ERR
ANB R5204                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_閉限
AND R5205                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_開限
ANL
JMP @MR5007
MPP
LD MR5205                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_開限ERR
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;ｽｶﾗRB_下冶具ﾁｬｯｸ_上昇
STG @MR5007
SET MR7811               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_上昇
CON
RES MR7810               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_下降
CON
MPS
LDB MR5301               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_上限ERR
ANB R5300                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_下限
AND R5301                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_上限
ANL
JMP @MR5011
MPP
LD MR5301                ; ｽｶﾗRB_下冶具ﾁｬｯｸ_上限ERR
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;下冶具取出し完了
STG @MR5011
DW #0 DM11418            ; ﾊﾝﾄﾞ下冶具記憶：0無1有
CON
RES MR20111              ; 下冶具渡し動作中
CON
SET @MR5001              ; ⑤SUB_下冶具ｾｯﾄ動作完了
CON
RES @MR5002              ; ⑤SUB_下冶具ｾｯﾄ動作中
CON
ENDS
;<h1/>⑥SUB_上冶具ｾｯﾄ動作
STG @MR5100              ; ⑥SUB_上冶具ｾｯﾄ動作
SET MR20112              ; 上冶具渡し動作中
CON
SET @MR5102              ; ⑥SUB_上冶具ｾｯﾄ動作中
CON
JMP @MR5103
;ｽｶﾗRB_上冶具吸着_下降
LD @MR5103
SET MR7804               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_ｺﾝﾌﾟﾗｲｱﾝｽｴｱOF
CON
RES MR7805               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_ｺﾝﾌﾟﾗｲｱﾝｽｴｱON
STG @MR5103
SET MR7808               ; ｽｶﾗRB_上冶具吸着_下降
CON
RES MR7809               ; ｽｶﾗRB_上冶具吸着_上昇
CON
MPS
LDB MR5206               ; ｽｶﾗRB_接着上冶具吸着_下限ERR
ANB MR5300               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_下限ERR
AND R5206                ; ｽｶﾗRB_接着上冶具吸着_下限
ANB R5207                ; ｽｶﾗRB_接着上冶具吸着_上限
ANL
JMP @MR5113
MPP
LD MR5206                ; ｽｶﾗRB_接着上冶具吸着_下限ERR
OR MR5300                ; ｽｶﾗRB_下冶具ﾁｬｯｸ_下限ERR
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;ｽｶﾗRB_上冶具吸着OFF
STG @MR5113
SET MR7012               ; ｽｶﾗRB_上冶具破壊ON
CON
RES MR7010               ; ｽｶﾗRB_上冶具吸着ON
CON
RES MR7011               ; ｽｶﾗRB_上冶具吸着OFF
CON
TMH @11 #10              ; 吸着破壊ﾃﾞｨﾚｲ
CON
AND @T11                 ; 吸着破壊ﾃﾞｨﾚｲ
ANB R5208                ; ｽｶﾗRB_接着上冶具_吸着OUT1
ANB R5209                ; ｽｶﾗRB_接着上冶具_吸着OUT2 
DW #0 DM11419            ; ﾊﾝﾄﾞ上冶具記憶：0無1有
CON
JMP @MR5114
;ｽｶﾗRB_上冶具吸着_上昇
STG @MR5114
SET MR7809               ; ｽｶﾗRB_上冶具吸着_上昇
CON
RES MR7808               ; ｽｶﾗRB_上冶具吸着_下降
CON
MPS
LDB MR5207               ; ｽｶﾗRB_接着上冶具吸着_上限ERR
ANB R5206                ; ｽｶﾗRB_接着上冶具吸着_下限
AND R5207                ; ｽｶﾗRB_接着上冶具吸着_上限
ANL
JMP @MR5115
MPP
LD MR5207                ; ｽｶﾗRB_接着上冶具吸着_上限ERR
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;上冶具ｾｯﾄ終了
STG @MR5115
RES MR20112              ; 上冶具渡し動作中
CON
SET @MR5101              ; ⑥SUB_上冶具ｾｯﾄ動作終了
CON
RES @MR5102              ; ⑥SUB_上冶具ｾｯﾄ動作中
CON
ENDS
;<h1/>⑦SUB_ｽｶﾗRB動作
LDB DM11034.15           ; SRB出力:動作中
ANB @MR5202              ; ⑦SUB_ｽｶﾗRB動作中
TMH @31 #15              ; ｽｶﾗ連続起動防止
STG @MR5200              ; ⑦SUB_ｽｶﾗRB動作
AND @T31                 ; ｽｶﾗ連続起動防止
SET @MR5202              ; ⑦SUB_ｽｶﾗRB動作中
CON
JMP @MR5203
STG @MR5203
MPS
LD DM11038.0             ; SRB出力:左手系
AND DM11033.12           ; SRB出力:加圧治具エリア
ORB DM11038.0            ; SRB出力:左手系
ANL
SET DM11232.7            ; SRB入力:Rest
CON
MPS
LDB DM11032.3            ; SRB出力:Error
ANB DM11032.6            ; SRB出力:SEroor
ANL
RES DM11232.7            ; SRB入力:Rest
CON
JMP @MR5204
MPP
LD DM11032.3             ; SRB出力:Error
OR DM11032.6             ; SRB出力:SEroor
ANL
TMR @27 #40              ; SRBｴﾗｰﾃﾞｨﾚｲ
CON
AND @T27                 ; SRBｴﾗｰﾃﾞｨﾚｲ
JMP @MR5208              ; 搬送ｽｶﾗRBｺﾝﾄﾛｰﾗ異常
MPP
LD DM11038.0             ; SRB出力:左手系
ANB DM11033.12           ; SRB出力:加圧治具エリア
ANL
JMP @MR5208              ; 搬送ｽｶﾗRBｺﾝﾄﾛｰﾗ異常
STG @MR5204
RES DM11232.9            ; SRB入力:SetMotorsOff
CON
SET DM11232.8            ; SRB入力:SetMotorsOn
CON
MPS
AND DM11032.8            ; SRB出力:MotorsOn
RES DM11232.8            ; SRB入力:SetMotorsOn
CON
JMP @MR5205
MPP
ANB DM11032.8            ; SRB出力:MotorsOn
TMR @25 #40              ; SRBﾓｰﾀｰﾃﾞｨﾚｲ
CON
AND @T25                 ; SRBﾓｰﾀｰﾃﾞｨﾚｲ
JMP @MR5208              ; 搬送ｽｶﾗRBｺﾝﾄﾛｰﾗ異常
STG @MR5205
SET DM11232.0            ; SRB入力:Start
CON
MPS
AND DM11032.1            ; SRB出力:Running
RES DM11232.0            ; SRB入力:Start
CON
JMP @MR5206
MPP
ANB DM11032.1            ; SRB出力:Running
TMR @26 #40              ; SRB_Runﾃﾞｨﾚｲ
CON
AND @T26                 ; SRB_Runﾃﾞｨﾚｲ
JMP @MR5208              ; 搬送ｽｶﾗRBｺﾝﾄﾛｰﾗ異常
STG @MR5206
DW #0 DM11422            ; RC7move完了ｺｰﾄﾞ
CON
JMP @MR5207
LD @MR5207
LDA DM11404              ; 上冶具取出番号記憶
CON
STA DM11235              ; 上冶具取出番号
CON
LDA DM11405              ; 下冶具取出番号記憶
CON
STA DM11236              ; 下冶具取出番号
CON
LDA DM11406              ; 加圧冶具目標位置
CON
STA DM11237              ; 加圧冶具取出番号
LD @MR5207
MSTRT RC7_MOVE DM11420 DM11032 DM11232 DM11422;ｽｶﾗRBﾀｰｹﾞｯﾄPOS  ｽｶﾗRB状態信号  PLC→SRB出力  RC7move完了ｺｰﾄﾞ
STG @MR5207
MPS
AND= DM11422 #20         ; RC7move完了ｺｰﾄﾞ
JMP @MR5215              ; 終了処理
MPP
LD<> DM11422 #20         ; RC7move完了ｺｰﾄﾞ
AND<> DM11422 #0         ; RC7move完了ｺｰﾄﾞ
ANL
JMP @MR5208              ; 搬送ｽｶﾗRBｺﾝﾄﾛｰﾗ異常
;搬送ｽｶﾗRBｺﾝﾄﾛｰﾗ異常
STG @MR5208              ; 搬送ｽｶﾗRBｺﾝﾄﾛｰﾗ異常
RES DM11232.7            ; SRB入力:Rest
CON
RES DM11232.8            ; SRB入力:SetMotorsOn
CON
SET DM11232.9            ; SRB入力:SetMotorsOff
CON
RES DM11232.0            ; SRB入力:Start
CON
MPS
AND @MR906               ; ﾘﾄﾗｲ済
JMP @MR5209
MPP
ANB @MR906               ; ﾘﾄﾗｲ済
TMR @43 #20
CON
AND @T43
SET @MR906               ; ﾘﾄﾗｲ済
CON
JMP @MR5203
STG @MR5209
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #33 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
DW $1000 @DM9            ; ReturnSW /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR5210
STG @MR5210
SET @MR1900              ; Main1 HALT許可
CON
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
JMP @MR5203
;終了処理
STG @MR5215              ; 終了処理
RES @MR906               ; ﾘﾄﾗｲ済
CON
SET @MR5201              ; ⑦SUB_ｽｶﾗRB動作完了
CON
RES @MR5202              ; ⑦SUB_ｽｶﾗRB動作中
CON
ENDS
;<h1/>⑧SUB_ｽｶﾗRBｾｯﾄｱｯﾌﾟ
STG @MR5300              ; ⑧SUB_ｽｶﾗRBｾｯﾄｱｯﾌﾟ
SET @MR5302              ; ⑧SUB_ｽｶﾗRBｾｯﾄｱｯﾌﾟ中
CON
SET MR24000              ; LP1ｽｶﾗRBｾｯﾄｱｯﾌﾟ中
CON
MPS
LDB DM11032.8            ; SRB出力:MotorsOn
ORB DM11032.1            ; SRB出力:Running
ANL
DW #0 DM11232            ; PLC→SRB出力
CON
JMP @MR5303
MPP
LD DM11032.8             ; SRB出力:MotorsOn
AND DM11032.1            ; SRB出力:Running
ANL
JMP @MR5315
STG @MR5303
SET DM11232.4            ; SRB入力:Stop
CON
ANB DM11032.1            ; SRB出力:Running
TMR @44 #20
CON
AND @T44
JMP @MR5304
STG @MR5304
RES DM11232.4            ; SRB入力:Stop
CON
MPS
AND DM11032.0            ; SRB出力:Ready
SET DM11232.7            ; SRB入力:Rest
CON
JMP @MR5305
MPP
ANB DM11032.0            ; SRB出力:Ready
TMR @13 #40              ; SRBﾚﾃﾞｨﾃﾞｨﾚｲ
CON
AND @T13                 ; SRBﾚﾃﾞｨﾃﾞｨﾚｲ
JMP @MR5313              ; ｽｶﾗRB_ERR
STG @MR5305
TMR @28 #20              ; SRB_EMGﾃﾞｨﾚｲ
CON
AND @T28                 ; SRB_EMGﾃﾞｨﾚｲ
MPS
ANB DM11032.4            ; SRB出力:EstopOn
RES DM11232.7            ; SRB入力:Rest
CON
JMP @MR5306
MPP
AND DM11032.4            ; SRB出力:EstopOn
RES DM11232.7            ; SRB入力:Rest
CON
JMP @MR5313              ; ｽｶﾗRB_ERR
STG @MR5306
MPS
LDB DM11032.3            ; SRB出力:Error
ANB DM11032.6            ; SRB出力:SEroor
ANB DM11032.7            ; SRB出力:Warning
ANL
SET DM11232.8            ; SRB入力:SetMotorsOn
CON
MPS
AND DM11032.8            ; SRB出力:MotorsOn
RES DM11232.8            ; SRB入力:SetMotorsOn
CON
JMP @MR5307
MPP
LDB DM11032.8            ; SRB出力:MotorsOn
ANB @MR904               ; SetMotorsOn ﾘﾄﾗｲ
ANL
TMR @38 #40
CON
AND @T38
JMP @MR5309
MPP
LD DM11032.3             ; SRB出力:Error
OR DM11032.6             ; SRB出力:SEroor
OR DM11032.7             ; SRB出力:Warning
LDB DM11032.8            ; SRB出力:MotorsOn
AND @MR904               ; SetMotorsOn ﾘﾄﾗｲ
ORL
ANL
TMR @12 #40              ; SRBﾀｲﾑｱｯﾌﾟ
CON
AND @T12                 ; SRBﾀｲﾑｱｯﾌﾟ
RES DM11232.8            ; SRB入力:SetMotorsOn
CON
JMP @MR5313              ; ｽｶﾗRB_ERR
STG @MR5307
SET DM11232.0            ; SRB入力:Start
CON
MPS
AND DM11032.1            ; SRB出力:Running
SET DM11232.6            ; SRB入力:Continue
CON
ANB DM11032.2            ; SRB出力:Paused
RES DM11232.0            ; SRB入力:Start
CON
JMP @MR5308
MPP
ANB DM11032.1            ; SRB出力:Running
MPS
LD DM11032.3             ; SRB出力:Error
OR DM11032.6             ; SRB出力:SEroor
ANL
RES DM11232.0            ; SRB入力:Start
CON
RES DM11232.8            ; SRB入力:SetMotorsOn
CON
SET DM11232.9            ; SRB入力:SetMotorsOff
CON
JMP @MR5313              ; ｽｶﾗRB_ERR
MRD
AND @MR905               ; SRB入力:Start ﾘﾄﾗｲ
TMR @29 #40              ; SRBﾀｲﾑｱｯﾌﾟ
CON
AND @T29                 ; SRBﾀｲﾑｱｯﾌﾟ
RES DM11232.0            ; SRB入力:Start
CON
RES DM11232.8            ; SRB入力:SetMotorsOn
CON
SET DM11232.9            ; SRB入力:SetMotorsOff
CON
JMP @MR5313              ; ｽｶﾗRB_ERR
MPP
ANB @MR905               ; SRB入力:Start ﾘﾄﾗｲ
JMP @MR5310
STG @MR5308
RES DM11232.6            ; SRB入力:Continue
CON
JMP @MR5315
;SRB入力:SetMotorsOn ﾘﾄﾗｲ
STG @MR5309
RES DM11232.8            ; SRB入力:SetMotorsOn
CON
TMR @41 #40
CON
AND @T41
SET @MR904               ; SetMotorsOn ﾘﾄﾗｲ
CON
JMP @MR5306
;SRB入力:Start ﾘﾄﾗｲ
STG @MR5310
RES DM11232.0            ; SRB入力:Start
CON
TMR @42 #40
CON
AND @T42
SET @MR905               ; SRB入力:Start ﾘﾄﾗｲ
CON
JMP @MR5307
;ｽｶﾗRB_ERR
STG @MR5313              ; ｽｶﾗRB_ERR
MPS
LD @MR906                ; ﾘﾄﾗｲ済
ANB R39900               ; RB動作中
ANL
MPS
LDB R41200               ; TASK0 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
DW $1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #33 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR5314
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
MPP
ANB @MR906               ; ﾘﾄﾗｲ済
SET @MR906               ; ﾘﾄﾗｲ済
CON
JMP @MR5303
STG @MR5314
SET @MR1900              ; Main1 HALT許可
CON
MPS
LDB R41200               ; TASK0 PAUSE 要求
AND @MR101               ; Task0 ｴﾗｰ完了
ANL
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
RES B3990                ; ｱﾗｰﾑ詳細表示
CON
DW #0 DM50310            ; RB ｱﾗｰﾑ表示
CON
JMP @MR5303
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;終了処理
STG @MR5315
RES @MR904               ; SetMotorsOn ﾘﾄﾗｲ
CON
RES @MR905               ; SRB入力:Start ﾘﾄﾗｲ
CON
RES @MR906               ; ﾘﾄﾗｲ済
CON
RES MR24000              ; LP1ｽｶﾗRBｾｯﾄｱｯﾌﾟ中
CON
SET @MR5301              ; ⑧SUB_ｽｶﾗRBｾｯﾄｱｯﾌﾟ完了
CON
RES @MR5302              ; ⑧SUB_ｽｶﾗRBｾｯﾄｱｯﾌﾟ中
CON
ENDS
;<h1/>I/F [PLACE] 装置受け取り
;[内容]
;・装置受け取りIF　サブルーチン
;　同時取り置き対応
;　
;　以下を割り付けて変更して下さい
;　L10000,B3917､B3937
;　B3900～　32点
;　B3950～　32点
;　IF_Rev_Comp_No　
;　
;　戻り値　IF_Rev_Comp_No　　No1 受け渡し完了//No10 停止//捨て出し No11
;　
;　IFの有るTASKのへ移動して使用してください。
;　
;※転送元デバイスは装置デバイス割り付けに基づき変更して下さい。
LD CR2002                ; 常時ON
MOV B3700 B3700          ; FromRC 自動運転中 in1  FromRC 自動運転中 in1
;  以下の2点を割り付けを変更して下さい
LDB CR2002               ; 常時ON
OUT B3917                ; ﾜｰｸ有無ｾﾝｻｰ
LDB CR2002               ; 常時ON
OUT B3912                ; 捨て出し
LD B3700                 ; FromRC 自動運転中 in1
LD B3701                 ; FromRC ｲﾝﾀｰﾛｯｸ in2
LDB B3701                ; FromRC ｲﾝﾀｰﾛｯｸ in2
AND B3937                ; RC取出成功
ANB LR10000              ; ﾜｰｸ記憶
ORL
ANL
ANB B3702                ; FromRC PP動作中　in3
ANB B3703                ; FromRC ﾜｰｸｾｯﾄ部動作要求 in4
ANB B3704                ; FromRC PP動作完了 in5
ANB B3705                ; FromRC PP動作ｴﾗｰ in6
MPS
TMH @0 #0
MPP
AND @T0
OUT B3900                ; RC排出可能条件
LDB B3701                ; FromRC ｲﾝﾀｰﾛｯｸ in2
AND B3702                ; FromRC PP動作中　in3
TMH @1 #0
CON
AND @T1
OUT B3901                ; RC排出動作中条件
LD B3704                 ; FromRC PP動作完了 in5
AND B3701                ; FromRC ｲﾝﾀｰﾛｯｸ in2
ANB B3702                ; FromRC PP動作中　in3
TMH @2 #0
CON
AND @T2
OUT B3902                ; RC排出動作完了条件
LD B3720                 ; toRC 自動運転中 out1
AND B3721                ; toRC ｲﾝﾀｰﾛｯｸ out2
ANB LR10000              ; ﾜｰｸ記憶
ANB B3917                ; ﾜｰｸ有無ｾﾝｻｰ
ANB B3724                ; toRC ﾋﾟｯｸ要求 out5
ANB B3723                ; toRC ﾌﾟﾚｰｽ要求 out4
TMH @4 #0
CON
AND @T4
OUT B3910                ; 装置取出　可能条件
LD R46106                ; _定停止移行中
OR R39004                ; ｴﾗｰ中
OR B3912                 ; 捨て出し
OUT B3911                ; 装置取出　停止条件
LDB R39004               ; ｴﾗｰ中
AND B3912                ; 捨て出し
OUT B3913                ; 捨て出し
LDP @MR6000              ; 装置受取開始
MOV #0 W3C10             ; IFｻﾌﾞﾙｰﾁﾝ完了No受取
STG @MR6000              ; 装置受取開始
SET @MR6002              ; 装置受取中
CON
JMP @MR6004
STG @MR6004
MPS
LDB B3911                ; 装置取出　停止条件
ANB R41200               ; TASK0 PAUSE 要求
AND B3900                ; RC排出可能条件
AND B3910                ; 装置取出　可能条件
ANL
SET B3723                ; toRC ﾌﾟﾚｰｽ要求 out4
CON
JMP @MR6005
MRD
LD B3911                 ; 装置取出　停止条件
ANB R41200               ; TASK0 PAUSE 要求
ANL
JMP @MR6010
MPS
ANB B3913                ; 捨て出し
MOV #10 W3C10            ; IFｻﾌﾞﾙｰﾁﾝ完了No受取
MPP
AND B3912                ; 捨て出し
MOV #11 W3C10            ; IFｻﾌﾞﾙｰﾁﾝ完了No受取
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR6005
MPS
AND B3901                ; RC排出動作中条件
SET B3725                ; toRC PP動作中 out6
CON
JMP @MR6007
MPP
LDB B3901                ; RC排出動作中条件
AND B3911                ; 装置取出　停止条件
ANB B3725                ; toRC PP動作中 out6
ANL
JMP @MR6010
MPS
ANB B3913                ; 捨て出し
MOV #10 W3C10            ; IFｻﾌﾞﾙｰﾁﾝ完了No受取
MPP
AND B3912                ; 捨て出し
MOV #11 W3C10            ; IFｻﾌﾞﾙｰﾁﾝ完了No受取
STG @MR6007
AND B3703                ; FromRC ﾜｰｸｾｯﾄ部動作要求 in4
JMP @MR6008
STG @MR6008
SET B3726                ; toRC ﾜｰｸｾｯﾄ部動作完了 out7
CON
JMP @MR6009
STG @MR6009
AND B3902                ; RC排出動作完了条件
DW #1 W3C10              ; IFｻﾌﾞﾙｰﾁﾝ完了No受取
CON
SET LR10000              ; ﾜｰｸ記憶
CON
JMP @MR6010
STG @MR6010
RES B3723                ; toRC ﾌﾟﾚｰｽ要求 out4
CON
RES B3725                ; toRC PP動作中 out6
CON
RES B3726                ; toRC ﾜｰｸｾｯﾄ部動作完了 out7
CON
ANB B3704                ; FromRC PP動作完了 in5
JMP @MR6011
STG @MR6011
JMP @MR6012
STG @MR6012
JMP @MR6015
STG @MR6015
RES @MR6002              ; 装置受取中
CON
SET @MR6001              ; 装置受取完了
CON
ENDS
;<h1/>I/F  [PIC]  装置排出
;[内容]
;・装置排出IF　サブルーチン
;　同時取り置き対応
;　以下を割り付け変更して下さい
;　L10000,B3917，B3937
;　B3920～　32点
;　B3950～　32点
;　IF_Send_Comp_No　
;　
;　戻り値　IF_Send_Comp_No　　No1 受け渡し完了//No2 NG//No10 停止//捨て出し No11
;　
;※　CALL使用は、点線を使用して　B3938の位置にスライダー前進する動作を追加してください。
;　
;　IFの有るTASKのへ移動して使用してください。
LD B3700                 ; FromRC 自動運転中 in1
AND B3701                ; FromRC ｲﾝﾀｰﾛｯｸ in2
ANB B3702                ; FromRC PP動作中　in3
ANB B3703                ; FromRC ﾜｰｸｾｯﾄ部動作要求 in4
ANB B3704                ; FromRC PP動作完了 in5
ANB B3705                ; FromRC PP動作ｴﾗｰ in6
TMH @20 #0
CON
AND @T20
OUT B3920                ; RC取出　可能条件
LDB B3701                ; FromRC ｲﾝﾀｰﾛｯｸ in2
AND B3702                ; FromRC PP動作中　in3
TMH @21 #0
CON
AND @T21
OUT B3921                ; RC排出　動作中条件
LD B3704                 ; FromRC PP動作完了 in5
AND B3701                ; FromRC ｲﾝﾀｰﾛｯｸ in2
ANB B3702                ; FromRC PP動作中　in3
TMH @22 #0
CON
AND @T22
OUT B3922                ; RC排出　動作完了条件
LD B3720                 ; toRC 自動運転中 out1
AND B3721                ; toRC ｲﾝﾀｰﾛｯｸ out2
AND LR10000              ; ﾜｰｸ記憶
AND B3917                ; ﾜｰｸ有無ｾﾝｻｰ
ANB B3724                ; toRC ﾋﾟｯｸ要求 out5
ANB B3723                ; toRC ﾌﾟﾚｰｽ要求 out4
TMH @24 #0
CON
AND @T24
OUT B3930                ; 装置受取　可能条件
LD R46106                ; _定停止移行中
OR R39004                ; ｴﾗｰ中
OR B3912                 ; 捨て出し
OUT B3931                ; 装置受取　停止条件
LDP @MR6400              ; 装置排出開始
MOV #0 W3C11             ; IFｻﾌﾞﾙｰﾁﾝ完了No排出
STG @MR6400              ; 装置排出開始
SET @MR6402              ; 装置排出中
CON
JMP @MR6404
STG @MR6404
MPS
LDB B3911                ; 装置取出　停止条件
ANB R41200               ; TASK0 PAUSE 要求
AND B3920                ; RC取出　可能条件
AND B3930                ; 装置受取　可能条件
ANL
SET B3724                ; toRC ﾋﾟｯｸ要求 out5
CON
RES B3937                ; RC取出成功
CON
JMP @MR6405
MRD
LD B3931                 ; 装置受取　停止条件
ANB R41200               ; TASK0 PAUSE 要求
ANL
JMP @MR6410
MPS
ANB B3913                ; 捨て出し
MOV #10 W3C11            ; IFｻﾌﾞﾙｰﾁﾝ完了No排出
MPP
AND B3912                ; 捨て出し
MOV #11 W3C11            ; IFｻﾌﾞﾙｰﾁﾝ完了No排出
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;<h1/>※Call使用時
;※サンプルではRB＊を移動させているが、実際は装置に合わせワークを乗せているスライダをRC受渡側へ移動させる事。
;Call未使用時
STG @MR6405
MPS
AND B3921                ; RC排出　動作中条件
SET B3725                ; toRC PP動作中 out6
CON
JMP @MR6407
MPP
LDB B3921                ; RC排出　動作中条件
AND B3931                ; 装置受取　停止条件
ANB B3725                ; toRC PP動作中 out6
ANL
JMP @MR6410
MPS
ANB B3913                ; 捨て出し
MOV #10 W3C11            ; IFｻﾌﾞﾙｰﾁﾝ完了No排出
MPP
AND B3912                ; 捨て出し
MOV #11 W3C11            ; IFｻﾌﾞﾙｰﾁﾝ完了No排出
;--
STG @MR6407
AND B3703                ; FromRC ﾜｰｸｾｯﾄ部動作要求 in4
JMP @MR6408
STG @MR6408
SET B3726                ; toRC ﾜｰｸｾｯﾄ部動作完了 out7
CON
JMP @MR6409
STG @MR6409
AND B3922                ; RC排出　動作完了条件
MPS
ANB B3705                ; FromRC PP動作ｴﾗｰ in6
RES LR10000              ; ﾜｰｸ記憶
CON
SET B3937                ; RC取出成功
CON
DW #1 W3C11              ; IFｻﾌﾞﾙｰﾁﾝ完了No排出
CON
JMP @MR6410
MPP
AND B3705                ; FromRC PP動作ｴﾗｰ in6
DW #2 W3C11              ; IFｻﾌﾞﾙｰﾁﾝ完了No排出
CON
JMP @MR6410
STG @MR6410
RES B3724                ; toRC ﾋﾟｯｸ要求 out5
CON
RES B3725                ; toRC PP動作中 out6
CON
RES B3726                ; toRC ﾜｰｸｾｯﾄ部動作完了 out7
CON
ANB B3704                ; FromRC PP動作完了 in5
JMP @MR6411
STG @MR6411
JMP @MR6412
STG @MR6412
JMP @MR6415
STG @MR6415
RES @MR6402              ; 装置排出中
CON
SET @MR6401              ; 装置排出完了
CON
ENDS
;<h1/>※RCへ出力 装置に合わせ毎スキャンモジュールへ記述して下さい。
;※転送元デバイスは装置デバイス割り付けに基づき変更して下さい。
LD CR2002                ; 常時ON
MOV B3720 B3720          ; toRC 自動運転中 out1  toRC 自動運転中 out1
;<h1/>-----------------------------------------------------------
;<h1/>*ERROR
;ｽｶﾗﾊﾝﾄﾞﾁｬｯｸ・吸着状態確認
;<h1/>ｽｶﾗﾊﾝﾄﾞ監視_加圧冶具不一致
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
LDB R5303                ; ｽｶﾗRBﾁｬｯｸ_加圧冶具検出(遮光ON)
OR= DM11417 #0           ; 加圧冶具情報：0無1空2完3NG
AND R5200                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉限
ANB R5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限
LD<> DM11417 #0          ; 加圧冶具情報：0無1空2完3NG
LDB R5200                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉限
AND R5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限
ORB R5303                ; ｽｶﾗRBﾁｬｯｸ_加圧冶具検出(遮光ON)
ANL
ORL
ANL
ANB R39004               ; ｴﾗｰ中
TMR @32 #100             ; 加圧状態不一致ﾀｲﾏ
CON
AND @T32                 ; 加圧状態不一致ﾀｲﾏ
ANB MR20109              ; 組立装置加圧冶具干渉動作中
ANB DM11034.15           ; SRB出力:動作中
SET @MR903               ; ﾊﾝﾄﾞ冶具状態不一致
CON
@SET @MR500
STG @MR500
SET R39004               ; ｴﾗｰ中
CON
DW $7400 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #70 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #5303 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR501
STG @MR501
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR105               ; SW1
RES @MR903               ; ﾊﾝﾄﾞ冶具状態不一致
CON
ENDS
MPP
AND @MR106               ; SW2
MPS
ANB R5303                ; ｽｶﾗRBﾁｬｯｸ_加圧冶具検出(遮光ON)
JMP @MR502
MPP
AND R5303                ; ｽｶﾗRBﾁｬｯｸ_加圧冶具検出(遮光ON)
JMP @MR500
;ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開
STG @MR502
RES MR7800               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉
CON
SET MR7801               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開
CON
MPS
LDB MR5201               ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限ERR
ANB R5200                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_閉限
AND R5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限
ANL
@DEC DM11428             ; 完成品ｾｯﾄ必要数
CON
RES @MR903               ; ﾊﾝﾄﾞ冶具状態不一致
CON
DW #0 DM11417            ; 加圧冶具情報：0無1空2完3NG
CON
ENDS
MPP
LD MR5201                ; ｽｶﾗRB_加圧冶具ﾁｬｯｸ_開限ERR
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;<h1/>ｽｶﾗﾊﾝﾄﾞ監視_下冶具不一致
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
LDB R5302                ; ｽｶﾗRBﾁｬｯｸ_下冶具検出(遮光ON)
OR= DM11418 #0           ; ﾊﾝﾄﾞ下冶具記憶：0無1有
AND R5204                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_閉限
ANB R5205                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_開限
LD= DM11418 #1           ; ﾊﾝﾄﾞ下冶具記憶：0無1有
LDB R5204                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_閉限
AND R5205                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_開限
ORB R5302                ; ｽｶﾗRBﾁｬｯｸ_下冶具検出(遮光ON)
ANL
ORL
ANL
ANB R39004               ; ｴﾗｰ中
ANB MR20111              ; 下冶具渡し動作中
TMR @33 #100             ; 下冶具状態不一致ﾀｲﾏ
CON
AND @T33                 ; 下冶具状態不一致ﾀｲﾏ
ANB DM11034.15           ; SRB出力:動作中
SET @MR903               ; ﾊﾝﾄﾞ冶具状態不一致
CON
@SET @MR503
STG @MR503
SET R39004               ; ｴﾗｰ中
CON
DW $7400 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #71 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #5302 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR504
STG @MR504
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR105               ; SW1
JMP @MR509               ; ｽｶﾗﾊﾝﾄﾞ監視_下冶具不一致終了
MPP
AND @MR106               ; SW2
MPS
ANB R5302                ; ｽｶﾗRBﾁｬｯｸ_下冶具検出(遮光ON)
JMP @MR505
MPP
AND R5302                ; ｽｶﾗRBﾁｬｯｸ_下冶具検出(遮光ON)
JMP @MR503
;ｽｶﾗRB_下冶具ﾁｬｯｸ_開
STG @MR505
SET MR7807               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_開
CON
RES MR7806               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_閉
CON
MPS
LDB MR5205               ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_開限ERR
ANB R5204                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_閉限
AND R5205                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_開限
ANL
DW #0 DM11418            ; ﾊﾝﾄﾞ下冶具記憶：0無1有
CON
MPS
ANB R5208                ; ｽｶﾗRB_接着上冶具_吸着OUT1
JMP @MR508
MPP
AND R5208                ; ｽｶﾗRB_接着上冶具_吸着OUT1
JMP @MR506
MPP
LD MR5205                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_開限ERR
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;上冶具有：上冶具除材要求_(下冶具を除材したので)
STG @MR506
MPS
LDB R41200               ; TASK0 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
DW $4000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #62 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #5209 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR507
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR507
MPS
LDB R41200               ; TASK0 PAUSE 要求
AND @MR101               ; Task0 ｴﾗｰ完了
ANL
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
MPS
ANB R5208                ; ｽｶﾗRB_接着上冶具_吸着OUT1
JMP @MR508
MPP
AND R5208                ; ｽｶﾗRB_接着上冶具_吸着OUT1
JMP @MR506
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;ｽｶﾗRB_上冶具吸着OFF
STG @MR508
SET MR7011               ; ｽｶﾗRB_上冶具吸着OFF
CON
RES MR7010               ; ｽｶﾗRB_上冶具吸着ON
CON
RES MR7012               ; ｽｶﾗRB_上冶具破壊ON
CON
DW #0 DM11419            ; ﾊﾝﾄﾞ上冶具記憶：0無1有
CON
JMP @MR509               ; ｽｶﾗﾊﾝﾄﾞ監視_下冶具不一致終了
;ｽｶﾗﾊﾝﾄﾞ監視_下冶具不一致終了
STG @MR509               ; ｽｶﾗﾊﾝﾄﾞ監視_下冶具不一致終了
RES @MR903               ; ﾊﾝﾄﾞ冶具状態不一致
CON
ENDS
;<h1/>ｽｶﾗﾊﾝﾄﾞ監視_上冶具不一致
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
LD= DM11419 #1           ; ﾊﾝﾄﾞ上冶具記憶：0無1有
LDB R5208                ; ｽｶﾗRB_接着上冶具_吸着OUT1
OR R5209                 ; ｽｶﾗRB_接着上冶具_吸着OUT2 
ANL
LD= DM11419 #0           ; ﾊﾝﾄﾞ上冶具記憶：0無1有
AND R5208                ; ｽｶﾗRB_接着上冶具_吸着OUT1
ORL
ANL
ANB R39004               ; ｴﾗｰ中
TMR @34 #100             ; 上冶具状態不一致ﾀｲﾏ
CON
AND @T34                 ; 上冶具状態不一致ﾀｲﾏ
ANB DM11034.15           ; SRB出力:動作中
ANB MR20112              ; 上冶具渡し動作中
SET @MR903               ; ﾊﾝﾄﾞ冶具状態不一致
CON
@SET @MR600
STG @MR600
SET R39004               ; ｴﾗｰ中
CON
DW $7400 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #72 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #5208 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR601
STG @MR601
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR105               ; SW1
JMP @MR606               ; ｽｶﾗﾊﾝﾄﾞ監視_上冶具不一致終了
MPP
AND @MR106               ; SW2
MPS
ANB R5208                ; ｽｶﾗRB_接着上冶具_吸着OUT1
JMP @MR602
MPP
AND R5208                ; ｽｶﾗRB_接着上冶具_吸着OUT1
JMP @MR600
;ｽｶﾗRB_上冶具吸着OFF
STG @MR602
SET MR7011               ; ｽｶﾗRB_上冶具吸着OFF
CON
RES MR7010               ; ｽｶﾗRB_上冶具吸着ON
CON
RES MR7012               ; ｽｶﾗRB_上冶具破壊ON
CON
DW #0 DM11419            ; ﾊﾝﾄﾞ上冶具記憶：0無1有
CON
MPS
ANB R5302                ; ｽｶﾗRBﾁｬｯｸ_下冶具検出(遮光ON)
JMP @MR605
MPP
AND R5302                ; ｽｶﾗRBﾁｬｯｸ_下冶具検出(遮光ON)
JMP @MR603
;下冶具有：下冶具除材要求_(上冶具を除材したので)
STG @MR603
MPS
LDB R41200               ; TASK0 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
DW $4000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #61 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #5302 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR604
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR604
MPS
LDB R41200               ; TASK0 PAUSE 要求
AND @MR101               ; Task0 ｴﾗｰ完了
ANL
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
MPS
ANB R5302                ; ｽｶﾗRBﾁｬｯｸ_下冶具検出(遮光ON)
JMP @MR605
MPP
AND R5302                ; ｽｶﾗRBﾁｬｯｸ_下冶具検出(遮光ON)
JMP @MR603
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;ｽｶﾗRB_下冶具ﾁｬｯｸ_開
STG @MR605
SET MR7807               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_開
CON
RES MR7806               ; ｽｶﾗRB_下冶具ﾁｬｯｸ_閉
CON
MPS
LDB MR5205               ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_開限ERR
ANB R5204                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_閉限
AND R5205                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_開限
ANL
DW #0 DM11418            ; ﾊﾝﾄﾞ下冶具記憶：0無1有
CON
JMP @MR606               ; ｽｶﾗﾊﾝﾄﾞ監視_上冶具不一致終了
MPP
LD MR5205                ; ｽｶﾗRB_接着下冶具ﾁｬｯｸ_開限ERR
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;ｽｶﾗﾊﾝﾄﾞ監視_上冶具不一致終了
STG @MR606               ; ｽｶﾗﾊﾝﾄﾞ監視_上冶具不一致終了
RES @MR903               ; ﾊﾝﾄﾞ冶具状態不一致
CON
ENDS
;MyTask Error Process Substance/エラー処理実体
STG @MR100               ; Task0 ERROR
ANB R39002               ; ERROR_DISP Busy
MPS
ZRES @MR105 @MR108       ; SW1  SW4
CON
DISN @DM9 @DM3 #4        ; ReturnSW /ERROR_DISP
MRD
DW MyTask @DM0           ; 自ﾀｽｸ番号  TaskNo /ERROR_DISP
CON
BMOV @DM0 DM60000 #7     ; TaskNo /ERROR_DISP  TaskNo /ERROR_DISP
MPP
SET R39000               ; ERROR_DISP Start
CON
SET @MR102               ; Task0 ERROR Busy
CON
JMP @MR103
STG @MR103
AND R39002               ; ERROR_DISP Busy
AND= DM60008 @DM1        ; ReturnNo /ERROR_DISP  ErrorNo /ERROR_DISP
MPS
AND= DM60007 @DM6        ; ReturnSW /ERROR_DISP
SET @MR105               ; SW1
CON
JMP @MR104
MRD
AND= DM60007 @DM5        ; ReturnSW /ERROR_DISP
SET @MR106               ; SW2
CON
JMP @MR104
MRD
AND= DM60007 @DM4        ; ReturnSW /ERROR_DISP
SET @MR107               ; SW3
CON
JMP @MR104
MPP
AND= DM60007 @DM3        ; ReturnSW /ERROR_DISP
SET @MR108               ; SW4
CON
JMP @MR104
STG @MR104
ANB R39002               ; ERROR_DISP Busy
RES @MR102               ; Task0 ERROR Busy
CON
SET @MR101               ; Task0 ｴﾗｰ完了
CON
ENDS
;<h1/>*Select_Y_N 
;MyTask Select_Y_N Process Substance/SELECT_Y_N処理実体
STG @MR300               ; Task0 SELECT_Y_N
ANB R39102               ; SELECT_Y_N Busy
MPS
ZRES @MR306 @MR307       ; Task0 Y/N
CON
DW #0 @DM20              ; TaskNo /SELECT_Y_N
CON
BMOV @DM20 DM60020 #3    ; TaskNo /SELECT_Y_N  TaskNo /SELECT_Y_N
MPP
SET R39100               ; SELECT_Y_N Start
CON
SET @MR302               ; Task0 Y_N Busy
CON
JMP @MR303
STG @MR303
AND R39102               ; SELECT_Y_N Busy
MPS
AND= DM60023 #1          ; Y_N /SELECT_Y_N
SET @MR306               ; Task0 Y/N
CON
JMP @MR304
MPP
AND= DM60023 #2          ; Y_N /SELECT_Y_N
RES @MR306               ; Task0 Y/N
CON
JMP @MR304
STG @MR304
ANB R39102               ; SELECT_Y_N Busy
RES @MR302               ; Task0 Y_N Busy
CON
SET @MR301               ; Task0 Y/N END
CON
ENDS
;<h1/>*TIMEUP ERROR
;MyTask TIMEUP_ERROR Process Substance/TIMEUP_ERROR処理実体
STG @MR400               ; Task0 TIMEUP_ERR
ANB R39302               ; TIMEUP_ERR Busy
MPS
DW #0 @DM40              ; TaskNo /TIMEUP_ERR
CON
BMOV @DM40 DM60040 #2    ; TaskNo /TIMEUP_ERR  TaskNo /TIMEUP_ERR
MPP
SET R39300               ; TIMEUP_ERR Start
CON
SET @MR402               ; Task0 TIMEUP Busy
CON
JMP @MR403
STG @MR403
AND R39302               ; TIMEUP_ERR Busy
JMP @MR404
STG @MR404
ANB R39302               ; TIMEUP_ERR Busy
RES @MR402               ; Task0 TIMEUP Busy
CON
SET @MR401               ; Task0 TIMEUP_END
CON
ENDS
;<h1/>*Select_ACT 
;MyTask Select_ACT Process Substance/SELECT_ACT処理実体
STG @MR200               ; Task0 SELECT_ACT
ANB R39202               ; SELECT_ACT Busy
MPS
ZRES @MR205 @MR208       ; SW1  SW4
CON
DW #0 @DM30              ; TaskNo /SELECT_ACT
CON
BMOV @DM30 DM60030 #7    ; TaskNo /SELECT_ACT  TaskNo /SELECT_ACT
MPP
SET R39200               ; SELECT_ACT Start
CON
SET @MR202               ; Task0 SEL_ACT Busy
CON
JMP @MR203
STG @MR203
AND R39202               ; SELECT_ACT Busy
AND<> DM60037 #0         ; SelectSW /SELECT_ACT
MPS
AND= DM60037 #1          ; SelectSW /SELECT_ACT
SET @MR205               ; SW1
CON
JMP @MR204
MRD
AND= DM60037 #2          ; SelectSW /SELECT_ACT
SET @MR206               ; SW2
CON
JMP @MR204
MRD
AND= DM60037 #3          ; SelectSW /SELECT_ACT
SET @MR207               ; SW3
CON
JMP @MR204
MPP
AND= DM60037 #4          ; SelectSW /SELECT_ACT
SET @MR208               ; SW4
CON
JMP @MR204
STG @MR204
ANB R39202               ; SELECT_ACT Busy
RES @MR202               ; Task0 SEL_ACT Busy
CON
SET @MR201               ; Task0 SEL_ACT END
CON
ENDS
;<h1/>※機能Macro呼出し見本- 削除して下さい。-------------------------------------
;<h1/>※Error:記述見本
;ERR163 "****Error"
;<h1/>※SELECT_ACT　:記述見本
;画面番号33をブザー有りで選択SW番号を左から#5,#10,#0(無し),#34の並びで表示する
;<h1/>※ SELECT_Y_N　記述見本
;//*Select_Y_N
;<h1/>HALT
LD R41200                ; TASK0 PAUSE 要求
AND @MR1900              ; Main1 HALT許可
LD @MR1901               ; Main2 HALT許可
ORB @MR4002              ; Main2 Busy
ANL
TMR @40 #5               ; HALT許可 遅延
CON
AND @T40                 ; HALT許可 遅延
SET R42600               ; Grp1_Task0_ﾎﾟｰｽﾞ許可
LD R42600                ; Grp1_Task0_ﾎﾟｰｽﾞ許可
ORB R41200               ; TASK0 PAUSE 要求
ANB @MR001               ; TASK0 ERROR
RES @MR1900              ; Main1 HALT許可
CON
RES @MR1901              ; Main2 HALT許可
END
ENDH
