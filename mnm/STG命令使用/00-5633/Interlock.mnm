DEVICE:53
;MODULE:Interlock
;MODULE_TYPE:0
LD R4401                 ; ﾜｰｸｾｯﾄ部 投入側限
SET MR2112               ; ﾐｭｰﾃｨﾝｸﾞ中=ON
LDB R4401                ; ﾜｰｸｾｯﾄ部 投入側限
RES MR2112               ; ﾐｭｰﾃｨﾝｸﾞ中=ON
;RBｲﾝﾀｰﾛｯｸ / RB Interlock
LD R2009                 ; RB1 電源ON
AND DM2007.2             ; RB1_PCON 移動中信号
ANB R50300               ; Pause
OUT @MR015               ; RB IL
;吸着ﾍｯﾄﾞ移動条件
LDB R4202                ; ﾌｨﾙﾑ押え 前後 前進限(ﾌｨﾙﾑ引出)
AND R4203                ; ﾌｨﾙﾑ押え 前後 後退限
ANB R7212                ; 吸着ﾍｯﾄﾞ 下降
ANB R4212                ; 吸着ﾍｯﾄﾞ 下降限1(溶着側)
ANB R4213                ; 吸着ﾍｯﾄﾞ 下降限2(切出し側)
AND R4214                ; 吸着ﾍｯﾄﾞ 上昇限
LDB R4302                ; 溶着ﾍｯﾄﾞｴｽｹｰﾌﾟ1(手前側) 下降限
AND R4303                ; 溶着ﾍｯﾄﾞｴｽｹｰﾌﾟ1(手前側) 上昇限
LD R4302                 ; 溶着ﾍｯﾄﾞｴｽｹｰﾌﾟ1(手前側) 下降限
ANB R4303                ; 溶着ﾍｯﾄﾞｴｽｹｰﾌﾟ1(手前側) 上昇限
ORL
ANL
LDB R4304                ; 溶着ﾍｯﾄﾞｴｽｹｰﾌﾟ2(奥側) 下降限
AND R4305                ; 溶着ﾍｯﾄﾞｴｽｹｰﾌﾟ2(奥側) 上昇限
LD R4304                 ; 溶着ﾍｯﾄﾞｴｽｹｰﾌﾟ2(奥側) 下降限
ANB R4305                ; 溶着ﾍｯﾄﾞｴｽｹｰﾌﾟ2(奥側) 上昇限
ORL
ANL
LDB R4400                ; ﾜｰｸｾｯﾄ部 溶着側限
AND R4401                ; ﾜｰｸｾｯﾄ部 投入側限
LD R4400                 ; ﾜｰｸｾｯﾄ部 溶着側限
ANB R4401                ; ﾜｰｸｾｯﾄ部 投入側限
ORL
ANL
AND R1107                ; ﾗｲﾄｶｰﾃﾝ遮光無し=ON
OUT MR3000               ; IL 吸着ﾍｯﾄﾞ移動OK
;溶着ﾍｯﾄﾞ下降条件
LD R4210                 ; 吸着ﾍｯﾄﾞ 右行限(溶着側)
ANB R4211                ; 吸着ﾍｯﾄﾞ 左行限(切出し側)
ANB R4212                ; 吸着ﾍｯﾄﾞ 下降限1(溶着側)
ANB R4213                ; 吸着ﾍｯﾄﾞ 下降限2(切出し側)
AND R4214                ; 吸着ﾍｯﾄﾞ 上昇限
LDB R4210                ; 吸着ﾍｯﾄﾞ 右行限(溶着側)
AND R4211                ; 吸着ﾍｯﾄﾞ 左行限(切出し側)
ORL
ANB R4302                ; 溶着ﾍｯﾄﾞｴｽｹｰﾌﾟ1(手前側) 下降限
AND R4303                ; 溶着ﾍｯﾄﾞｴｽｹｰﾌﾟ1(手前側) 上昇限
ANB R4304                ; 溶着ﾍｯﾄﾞｴｽｹｰﾌﾟ2(奥側) 下降限
AND R4305                ; 溶着ﾍｯﾄﾞｴｽｹｰﾌﾟ2(奥側) 上昇限
LDB R4400                ; ﾜｰｸｾｯﾄ部 溶着側限
AND R4401                ; ﾜｰｸｾｯﾄ部 投入側限
LD R4400                 ; ﾜｰｸｾｯﾄ部 溶着側限
ANB R4401                ; ﾜｰｸｾｯﾄ部 投入側限
ORL
ANL
AND R1107                ; ﾗｲﾄｶｰﾃﾝ遮光無し=ON
OUT MR3001               ; IL 溶着ﾍｯﾄﾞ下降OK
;吸着ﾍｯﾄﾞ下降条件
LD R4210                 ; 吸着ﾍｯﾄﾞ 右行限(溶着側)
ANB R4211                ; 吸着ﾍｯﾄﾞ 左行限(切出し側)
LDB R4400                ; ﾜｰｸｾｯﾄ部 溶着側限
AND R4401                ; ﾜｰｸｾｯﾄ部 投入側限
LD R4400                 ; ﾜｰｸｾｯﾄ部 溶着側限
ANB R4401                ; ﾜｰｸｾｯﾄ部 投入側限
ORL
ANL
LDB R4210                ; 吸着ﾍｯﾄﾞ 右行限(溶着側)
AND R4211                ; 吸着ﾍｯﾄﾞ 左行限(切出し側)
ANB R4202                ; ﾌｨﾙﾑ押え 前後 前進限(ﾌｨﾙﾑ引出)
AND R4203                ; ﾌｨﾙﾑ押え 前後 後退限
ORL
AND R1107                ; ﾗｲﾄｶｰﾃﾝ遮光無し=ON
OUT MR3002               ; IL 吸着ﾍｯﾄﾞ下降OK
;ﾌｨﾙﾑ切出し前進条件
LD R4207                 ; ﾌｨﾙﾑ押さえ上下 上昇限
ANB R4206                ; ﾌｨﾙﾑ押さえ上下 下降限
ANB R4202                ; ﾌｨﾙﾑ押え 前後 前進限(ﾌｨﾙﾑ引出)
AND R4203                ; ﾌｨﾙﾑ押え 前後 後退限
AND R1107                ; ﾗｲﾄｶｰﾃﾝ遮光無し=ON
OUT MR3003               ; IL F切り出し前進OK
;ﾌｨﾙﾑ押え後退条件
LD R4207                 ; ﾌｨﾙﾑ押さえ上下 上昇限
ANB R4206                ; ﾌｨﾙﾑ押さえ上下 下降限
AND R1107                ; ﾗｲﾄｶｰﾃﾝ遮光無し=ON
OUT MR3004               ; IL F押さえ後退OK
;ﾜｰｸｾｯﾄ移動条件
LD R4210                 ; 吸着ﾍｯﾄﾞ 右行限(溶着側)
ANB R4211                ; 吸着ﾍｯﾄﾞ 左行限(切出し側)
ANB R4212                ; 吸着ﾍｯﾄﾞ 下降限1(溶着側)
ANB R4213                ; 吸着ﾍｯﾄﾞ 下降限2(切出し側)
AND R4214                ; 吸着ﾍｯﾄﾞ 上昇限
LDB R4210                ; 吸着ﾍｯﾄﾞ 右行限(溶着側)
AND R4211                ; 吸着ﾍｯﾄﾞ 左行限(切出し側)
ORL
AND<.L DM2000 +20        ; RB1_PCON 現在位置
AND R1107                ; ﾗｲﾄｶｰﾃﾝ遮光無し=ON
OUT MR3005               ; IL ﾜｰｸｾｯﾄ移動OK
;Interlock 01 Flag set
;RB1が待機位置より低いときに、干渉する恐れのあるCYLの端が切れたら非常停止
LD CR2002                ; 常時ON
LDA.L EM10000            ; RB1 Pos0 目標値
CON
ADD.L +100
CON
STA.L DM6000             ; IL_RB1待機位置領域
LDFB R4210               ; 吸着ﾍｯﾄﾞ 右行限(溶着側)
ANFB R4211               ; 吸着ﾍｯﾄﾞ 左行限(切出し側)
INV
AND R4300                ; 吸着ﾍｯﾄﾞ 旋回限(45°)
LDFB R4400               ; ﾜｰｸｾｯﾄ部 溶着側限
ANFB R4401               ; ﾜｰｸｾｯﾄ部 投入側限
INV
ORL
LDPB MR7304              ; ﾜｰｸｾｯﾄ部　溶着側移動
ANPB MR7305              ; ﾜｰｸｾｯﾄ部　投入側移動
INV
ORL
LD R4302                 ; 溶着ﾍｯﾄﾞｴｽｹｰﾌﾟ1(手前側) 下降限
OR R4304                 ; 溶着ﾍｯﾄﾞｴｽｹｰﾌﾟ2(奥側) 下降限
ANL
AND DM2007.1             ; RB1_PCON 原点復帰完了
AND>.L DM2000 DM6000     ; RB1_PCON 現在位置  IL_RB1待機位置領域
AND CR2002               ; 常時ON
MPS
RES MR7304               ; ﾜｰｸｾｯﾄ部　溶着側移動
CON
RES MR7305               ; ﾜｰｸｾｯﾄ部　投入側移動
CON
RES MR7210               ; 吸着ﾍｯﾄﾞ 右行 (溶着側)
CON
RES MR7211               ; 吸着ﾍｯﾄﾞ 左行 (ﾌｨﾙﾑ切出し側)
CON
SET R50012               ; TRAP       Interlock
MPP
MOV #301 DM410           ; Inter Lock Text No
;Interlock 02 Flag set
LD CR2003                ; 常時OFF
ANB R50300               ; Pause
SET R50012               ; TRAP       Interlock
MOV #302 DM410           ; Inter Lock Text No
;Interlock 03 Flag set
LD CR2003                ; 常時OFF
ANB R50300               ; Pause
SET R50012               ; TRAP       Interlock
MOV #303 DM410           ; Inter Lock Text No
;Interlock 04 Flag set
LD CR2003                ; 常時OFF
ANB R50300               ; Pause
SET R50012               ; TRAP       Interlock
MOV #304 DM410           ; Inter Lock Text No
;Interlock 05 Flag set
LD CR2003                ; 常時OFF
ANB R50300               ; Pause
SET R50012               ; TRAP       Interlock
MOV #305 DM410           ; Inter Lock Text No
;Interlock 06 Flag set
LD CR2003                ; 常時OFF
ANB R50300               ; Pause
SET R50012               ; TRAP       Interlock
MOV #306 DM410           ; Inter Lock Text No
;Interlock 07 Flag set
LD CR2003                ; 常時OFF
ANB R50300               ; Pause
SET R50012               ; TRAP       Interlock
MOV #307 DM410           ; Inter Lock Text No
;Interlock 08 Flag set
LD CR2003                ; 常時OFF
ANB R50300               ; Pause
SET R50012               ; TRAP       Interlock
MOV #308 DM410           ; Inter Lock Text No
;Interlock 09 Flag set
LD CR2003                ; 常時OFF
ANB R50300               ; Pause
SET R50012               ; TRAP       Interlock
MOV #309 DM410           ; Inter Lock Text No
;Interlock 10 Flag set
LD CR2003                ; 常時OFF
ANB R50300               ; Pause
SET R50012               ; TRAP       Interlock
MOV #310 DM410           ; Inter Lock Text No
;Interlock 11 Flag set
LD CR2003                ; 常時OFF
ANB R50300               ; Pause
SET R50012               ; TRAP       Interlock
MOV #311 DM410           ; Inter Lock Text No
;Interlock 12 Flag set
LD CR2003                ; 常時OFF
ANB R50300               ; Pause
SET R50012               ; TRAP       Interlock
MOV #312 DM410           ; Inter Lock Text No
;Interlock 13 Flag set
LD CR2003                ; 常時OFF
ANB R50300               ; Pause
SET R50012               ; TRAP       Interlock
MOV #313 DM410           ; Inter Lock Text No
;Interlock 14 Flag set
LD CR2003                ; 常時OFF
ANB R50300               ; Pause
SET R50012               ; TRAP       Interlock
MOV #314 DM410           ; Inter Lock Text No
;Interlock 15 Flag set
LD CR2003                ; 常時OFF
ANB R50300               ; Pause
SET R50012               ; TRAP       Interlock
MOV #315 DM410           ; Inter Lock Text No
;Interlock 16 Flag set
LD CR2003                ; 常時OFF
ANB R50300               ; Pause
SET R50012               ; TRAP       Interlock
MOV #316 DM410           ; Inter Lock Text No
;Interlock 17 Flag set
LD CR2003                ; 常時OFF
ANB R50300               ; Pause
SET R50012               ; TRAP       Interlock
MOV #317 DM410           ; Inter Lock Text No
;Interlock 18 Flag set
LD CR2003                ; 常時OFF
ANB R50300               ; Pause
SET R50012               ; TRAP       Interlock
MOV #318 DM410           ; Inter Lock Text No
;Interlock 19 Flag set
LD CR2003                ; 常時OFF
ANB R50300               ; Pause
SET R50012               ; TRAP       Interlock
MOV #319 DM410           ; Inter Lock Text No
;Interlock 20 Flag set
LD R1110                 ; ﾒﾝﾃﾅﾝｽｷｰSW
SET R50012               ; TRAP       Interlock
MOV #320 DM410           ; Inter Lock Text No
;Interlock Reset
LD R50012                ; TRAP       Interlock
ONDL #30 R50013          ; Interlock  表示
LD R50013                ; Interlock  表示
AND R40011               ; Interlock ﾘｾｯﾄ OK SW
RES DM2007.2             ; RB1_PCON 移動中信号
CON
RES R50012               ; TRAP       Interlock
CON
RES R50013               ; Interlock  表示
;
END
ENDH
