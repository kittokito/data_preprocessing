DEVICE:53
;MODULE:Panel
;MODULE_TYPE:0
;SCRIPT_TYPE:
LDB T202                 ; Device net node check
MOV #0 DM3001            ; Change Screen NO.
LD= DM3000 #0            ; Display Screen NO.
AND T202                 ; Device net node check
MOV #1 DM3001            ; Change Screen NO.
LD= DM3000 #1            ; Display Screen NO.
MPS
OUT R45004               ; HOME Screen
MPP
LD= DM3001 #5            ; Change Screen NO.
ANB R50010               ; Emaegency Stop
ANL
@MOV #1 DM3001           ; Change Screen NO.
LD= DM3000 #2            ; Display Screen NO.
OUT R45005               ; Main Screen2
LD= DM3000 #4            ; Display Screen NO.
OUT R45006               ; STEP Screen2
LD R50004                ; TASK DO
RES R59900               ; Main screen stop display
;STOP
LDB R50004               ; TASK DO
AND R50007               ; HOME FINISHED
ANB R50300               ; Pause
ANB R50008               ; Whole ERROR
SET R59900               ; Main screen stop display
CON
RES R59902               ; Main screen auto display
CON
RES R59903               ; Main screen step display
CON
@MOV #2 DM3001           ; Change Screen NO.
;HOME
LD R50003                ; HOME mode
ANB R50300               ; Pause
ANB R50008               ; Whole ERROR
@MOV #6 DM3001           ; Change Screen NO.
LD R40003
ANB R50004               ; TASK DO
ANB R50001               ; AUTO mode
ANB R50002               ; STEP mode
OUT R59901
;AUTO
LD R50001                ; AUTO mode
ANB R50300               ; Pause
ANB R50008               ; Whole ERROR
SET R59902               ; Main screen auto display
CON
RES R59903               ; Main screen step display
CON
@MOV #2 DM3001           ; Change Screen NO.
;STEP
LD R50002                ; STEP mode
ANB R50300               ; Pause
ANB R50008               ; Whole ERROR
SET R59903               ; Main screen step display
CON
RES R59900               ; Main screen stop display
CON
RES R59902               ; Main screen auto display
CON
@MOV #2 DM3001           ; Change Screen NO.
LDP R1005                ; MANU SW
AND R50007               ; HOME FINISHED
ANB R50004               ; TASK DO
@MOV #4 DM3001           ; Change Screen NO.
;PAUSE
LD R50300                ; Pause
RES R59900               ; Main screen stop display
CON
RES R59902               ; Main screen auto display
CON
RES R59903               ; Main screen step display
CON
OUT R59904               ; Paused Display
LDB R1102                ; Safty cover
@MOV #7 DM3001           ; Change Screen NO.
;Emargency Stop1
LD R50010                ; Emaegency Stop
ANB R50012               ; TRAP       Interlock
ANB R50013               ; Interlock display
@MOV #5 DM3001           ; Change Screen NO.
;Emargency Stop2
LD R50010                ; Emaegency Stop
AND R50013               ; Interlock display
MOV #8 DM3001            ; Change Screen NO.
;Error / エラー
LD R1102                 ; Safty cover
MPS
LD R50008                ; Whole ERROR
AND R50108               ; Error 
ANL
@MOV #10 DM3001          ; Change Screen NO.
MPP
ANB R50008               ; Whole ERROR
MPS
ANB R50003               ; HOME mode
MPS
AND R50007               ; HOME FINISHED
@MOV #2 DM3001           ; Change Screen NO.
MPP
LDB R50007               ; HOME FINISHED
ANB R50012               ; TRAP       Interlock
AND T202                 ; Device net node check
ANL
@MOV #1 DM3001           ; Change Screen NO.
MRD
ANB R50012               ; TRAP       Interlock
@MOV #0 DM400            ; Message NO.
@MOV #0 DM411            ; Sensor No.
MPP
RES R50015               ; Error SW-ON
LD R1103                 ; Error Reset SW
OR R40006
MPS
ANB LR49914
SET R50015               ; Error SW-ON
MPP
LD LR49914
AND LR49915
ANL
RES LR49914
CON
RES LR49915
LD LR49914
MPS
LDB R50108               ; Error 
ANB R50007               ; HOME FINISHED
ANL
OUT R49900
MPP
@LDA DM400               ; Message NO.
CON
@ADD #1
CON
@STA DM5029              ; UT8 Cycle time TP Display
;エラーユニット箇所表示
;Display of error unit part
LD R50110                ; INDEX Error
OUT R52800               ; INDEX Error display
LD R50111                ; UT1 Error
OUT R52801               ; UT1 Error display
LD R50112                ; UT2 Error
OUT R52802               ; UT2 Error display
LD R50113                ; UT3 Error
OUT R52803               ; UT3 Error display
LD R50114                ; UT4 Error
OUT R52804               ; UT4 Error display
LD R51705                ; UT5 ERROR
OUT R52805               ; UT5 Error display
LD R51706                ; UT6 ERROR
OUT R52806               ; UT6 Error display
LD R51707                ; UT7 ERROR
OUT R52807               ; UT7 Error display
LD R51708                ; UT8 ERROR
OUT R52808               ; UT8 Error display
;エラーサブディスプレイ表示	
;Error sub display
LD>= DM400 #60           ; Message NO.
AND<= DM400 #67          ; Message NO.
OR= DM400 #69            ; Message NO.
OR= DM400 #71            ; Message NO.
OR= DM400 #77            ; Message NO.
OUT R42000               ; Cylinder error
LD= DM400 #70            ; Message NO.
OUT R42001               ; SubDisplay
;カウンター
LD R50001                ; AUTO mode
MPS
AND R50309               ; Input Counter
@INC DM5000              ; Input Counter
CON
RES R50309               ; Input Counter
MRD
AND R50310               ; Output Counter
@INC DM5001              ; Output Counter
CON
RES R50310               ; Output Counter
MPP
AND R50311               ; NG Counter
@INC DM5002              ; NG Counter
CON
RES R50311               ; NG Counter
LD R50008                ; Whole ERROR
@INC DM5003
;カウンターリセット
;
LD R40007                ; Counter Reset
@MOV #0 DM5000           ; Input Counter
@MOV #0 DM5001           ; Output Counter
@MOV #0 DM5002           ; NG Counter
@MOV #0 DM4000
@MOV #0 DM4002
LD R40008
OR R40007                ; Counter Reset
@MOV #0 DM5003
LD R40009
RES R40009
CON
MOV #0 DM5022            ; UT5 Cycle 
LD R40010
RES R40010
CON
MOV #0 DM5023            ; UT5 Cycle time TP Display
;ﾊﾟﾗﾒｰﾀ選択画面
LD R47100                ; SET up sw
@MOV #3 DM3001           ; Change Screen NO.
;2Y?C?@?i?i?n?\?|
;Ink model information display
LD CR2002                ; Normal ON
MPS
LDA DM501                ; #805 Model NO.
CON
ADD #200
CON
STA DM514                ; #805 Massage Display
MPP
LDA DM500                ; #331 Model NO.
CON
TBIN
CON
ADD #200
CON
STA DM515                ; #331 Massage Display
;IF DM500 >= 0 AND DM500 <= 9 THEN			'MODEL 0~9
;
;	DM520 = DM500 + 1
;
;	DM521 = 0
;	DM522 = 0
;		
;ELSE IF DM500 >= 10 AND DM500 <= 19 THEN	'MODEL 10~19
;
;	DM521 = DM500 - 9
;
;	DM520 = 0
;	DM522 = 0
;
;ELSE IF DM500 >= 20 AND DM500 <= 29 THEN	'MODEL 20~29
;
;	DM522 = DM500 - 19
;
;	DM520 = 0
;	DM521 = 0
;
;ELSE										'MODEL 30 Over
;
;	DM520 = 0
;	DM521 = 0
;	DM522 = 0
;
;END IF
;IF DM500 >= 0 AND DM500 <= 9 THEN			'MODEL 0~9
;
LD>= DM500 #0            ; #331 Model NO.
OUT @VB00
LD<= DM500 #9            ; #331 Model NO.
AND @VB00
NCJ #2000
;	DM520 = DM500 + 1
;
LD CR2002                ; Normal ON
LDA DM500                ; #331 Model NO.
CON
EXT
CON
ADD.L +1
CON
STA DM520
;	DM521 = 0
;
LD CR2002                ; Normal ON
MOV #0 DM521
;	DM522 = 0
;
LD CR2002                ; Normal ON
MOV #0 DM522
LD CR2002                ; Normal ON
CJ #2001
LABEL #2000
;ELSE IF DM500 >= 10 AND DM500 <= 19 THEN	'MODEL 10~19
;
LD>= DM500 #10           ; #331 Model NO.
OUT @VB01
LD<= DM500 #19           ; #331 Model NO.
AND @VB01
NCJ #2002
;	DM521 = DM500 - 9
;
LD CR2002                ; Normal ON
LDA DM500                ; #331 Model NO.
CON
EXT
CON
SUB.L +9
CON
STA DM521
;	DM520 = 0
;
LD CR2002                ; Normal ON
MOV #0 DM520
;	DM522 = 0
;
LD CR2002                ; Normal ON
MOV #0 DM522
LD CR2002                ; Normal ON
CJ #2003
LABEL #2002
;ELSE IF DM500 >= 20 AND DM500 <= 29 THEN	'MODEL 20~29
;
LD>= DM500 #20           ; #331 Model NO.
OUT @VB02
LD<= DM500 #29           ; #331 Model NO.
AND @VB02
NCJ #2004
;	DM522 = DM500 - 19
;
LD CR2002                ; Normal ON
LDA DM500                ; #331 Model NO.
CON
EXT
CON
SUB.L +19
CON
STA DM522
;	DM520 = 0
;
LD CR2002                ; Normal ON
MOV #0 DM520
;	DM521 = 0
;
LD CR2002                ; Normal ON
MOV #0 DM521
;ELSE										'MODEL 30 Over
;
LD CR2002                ; Normal ON
CJ #2005
LABEL #2004
;	DM520 = 0
;
LD CR2002                ; Normal ON
MOV #0 DM520
;	DM521 = 0
;
LD CR2002                ; Normal ON
MOV #0 DM521
;	DM522 = 0
;
LD CR2002                ; Normal ON
MOV #0 DM522
;END IF
LABEL #2005
LABEL #2003
LABEL #2001
;
END
ENDH
