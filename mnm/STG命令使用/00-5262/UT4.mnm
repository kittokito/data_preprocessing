DEVICE:53
;MODULE:UT4
;MODULE_TYPE:0
;UT4 ﾌｨﾙﾑ溶着
;UT4 Film Welding
;
;非常停止
;Emergency Stop
LD R50010                ; Emaegency Stop
OR @MR001
ZRES @MR002 @MR4915      ; STEP oparation finish
CON
OUT @MR001
TMR @0 #5
LD @T0
MDSTOP UT4
;<h1/>HOME
LD R50003                ; HOME mode
ANB R50204               ; UT4 Do
SET R50204               ; UT4 Do
CON
SET @MR1003              ; Home retun start
LDB R50003               ; HOME mode
ANB R50001               ; AUTO mode
ANB R50002               ; STEP mode
AND @MR1015              ; home return finish
RES R50204               ; UT4 Do
CON
RES @MR1015              ; home return finish
STG @MR1003              ; Home retun start
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
RES MR204
CON
RES MR104                ; 4UT index data shift Prohibited
CON
RES MR105                ; Index data shift 
CON
RES R51515
CON
SET MR8903               ; Label pinter1 CAN
CON
SET MR8911               ; Label pinter2 CAN
CON
JMP @MR1004
STG @MR1004
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
RES MR8012               ; Nozzle1 forward
CON
SET MR8013               ; Nozzle1 backward
CON
RES MR8104               ; Nozzle2 forward
CON
SET MR8105               ; Nozzle2 backward
CON
AND R5101                ; Nozzle1 backward limit
AND R5109                ; Nozzle2 backward limit
JMP @MR1005
STG @MR1005
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
RES MR8014               ; Nozzle rotation1 forward
CON
SET MR8015               ; Nozzle rotation1 backward
CON
RES MR8106               ; Nozzle rotation2 forward
CON
SET MR8107               ; Nozzle rotation2 backward
CON
SET MR8004               ; Nozzle rotation brake1 UP
CON
SET MR8006               ; Nozzle rotation brake2 UP
CON
ANB R5102                ; Nozzle rotation1 forward limit
AND R5103                ; Nozzle rotation1 backward limit
ANB R5110                ; Nozzle rotation2 forward limit
AND R5111                ; Nozzle rotation2 backward limit
AND R5008                ; Nozzle rotation brake1 upper lim
ANB R5009                ; Nozzle rotation brake1 lower lim
AND R8004                ; Nozzle rotation brake1 UP
AND R5010                ; Nozzle rotation brake2 upper lim
ANB R5011                ; Nozzle rotation brake2 lower lim
AND R8006                ; Nozzle rotation brake2 UP
RES MR8903               ; Label pinter1 CAN
CON
RES MR8911               ; Label pinter2 CAN
CON
JMP @MR1006
STG @MR1006
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
DW #99 EM1306            ; RB4 temp paste1 terget POS
CON
DW #99 EM1308            ; RB5 temp paste2 terget POS
CON
DW #99 EM1310            ; RB6 temp paste1 terget POS
CON
DW #99 EM1312            ; RB7 temp paste2 terget POS
CON
AND MR3003               ; RB4 label1 pitch start I/L
AND MR3004               ; RB5 label2 pitch start I/L
AND MR3005               ; RB6 label1  start I/L
AND MR3006               ; RB7 label2  start I/L
AND MR3201               ; label index1 moving I/L
AND MR3202               ; label index2 moving I/L
JMP @MR1007
STG @MR1007
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
SET @MR1100              ; RB4 temp paste1 home return 
CON
SET @MR1108              ; RB5 temp paste2 home return 
CON
SET @MR1200              ; RB6 temp paste1 home return 
CON
SET @MR1208              ; RB7 temp paste2 home return 
CON
SET @MR1300              ; Label index1 home return request
CON
SET @MR1308              ; Label index2 home return request
CON
JMP @MR1008
STG @MR1008
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
AND @MR1107              ; RB4 temp paste1 home return 
AND @MR1115              ; RB5 temp paste2 home return 
AND @MR1207              ; RB6 temp paste1 home return 
AND @MR1215              ; RB7 temp paste2 home return 
AND @MR1307              ; Label index1 home return finish
AND @MR1315              ; Label index2 home return finish
JMP @MR1009
STG @MR1009
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
RES @MR1107              ; RB4 temp paste1 home return 
CON
RES @MR1115              ; RB5 temp paste2 home return 
CON
RES @MR1207              ; RB6 temp paste1 home return 
CON
RES @MR1215              ; RB7 temp paste2 home return 
CON
RES @MR1307              ; Label index1 home return finish
CON
RES @MR1315              ; Label index2 home return finish
CON
JMP @MR1010
STG @MR1010
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
SET R51904               ; UT4 1cycle finished
CON
SET @MR1015              ; home return finish
CON
ENDS
;RB4 仮貼1ﾋﾟｯﾁ　原点復帰
STG @MR1100              ; RB4 temp paste1 home return 
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
MPS
ANB DM10531.1            ; RB4 Temp paste home Complete
JMP @MR1101
MPP
AND DM10531.1            ; RB4 Temp paste home Complete
JMP @MR1103
STG @MR1101
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
ANB DM10531.1            ; RB4 Temp paste home Complete
DW #99 EM1306            ; RB4 temp paste1 terget POS
CON
AND MR3003               ; RB4 label1 pitch start I/L
SET R35308               ; RB4 label1 pitch origin
CON
JMP @MR1102
STG @MR1102
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
AND R35309               ; RB4 label1 pitch origin
AND DM10531.1            ; RB4 Temp paste home Complete
AND= EM1307 #1           ; RB4 temp paste1 current POS
RES R35309               ; RB4 label1 pitch origin
CON
JMP @MR1103
STG @MR1103
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
ANB MR4501               ; RB4 label1 recive moving complet
SET MR4500               ; RB4 label1 recive moving request
CON
JMP @MR1104
STG @MR1104
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
AND MR4501               ; RB4 label1 recive moving complet
RES MR4501               ; RB4 label1 recive moving complet
CON
JMP @MR1105
STG @MR1105
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
SET @MR1107              ; RB4 temp paste1 home return 
CON
ENDS
;RB5 仮貼2ﾋﾟｯﾁ　原点復帰
STG @MR1108              ; RB5 temp paste2 home return 
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
MPS
ANB DM10539.1            ; RB5 Temp paste home Complete
JMP @MR1109
MPP
AND DM10539.1            ; RB5 Temp paste home Complete
JMP @MR1111
STG @MR1109
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
ANB DM10539.1            ; RB5 Temp paste home Complete
DW #99 EM1308            ; RB5 temp paste2 terget POS
CON
AND MR3004               ; RB5 label2 pitch start I/L
SET R35408               ; RB5 label2 pitch origin
CON
JMP @MR1110
STG @MR1110
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
AND R35409               ; RB5 label2 pitch origin
AND DM10539.1            ; RB5 Temp paste home Complete
AND= EM1309 #1           ; RB5 temp paste2 current POS
RES R35409               ; RB5 label2 pitch origin
CON
JMP @MR1111
STG @MR1111
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
ANB MR4601               ; RB5 label1 recive moving complet
SET MR4600               ; RB5 label1 recive moving request
CON
JMP @MR1112
STG @MR1112
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
AND MR4601               ; RB5 label1 recive moving complet
RES MR4601               ; RB5 label1 recive moving complet
CON
JMP @MR1113
STG @MR1113
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
SET @MR1115              ; RB5 temp paste2 home return 
CON
ENDS
;RB6 仮貼1上下　原点復帰
STG @MR1200              ; RB6 temp paste1 home return 
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
MPS
ANB DM10547.1            ; RB6 Temp paste home Complete
JMP @MR1201
MPP
AND DM10547.1            ; RB6 Temp paste home Complete
JMP @MR1203
STG @MR1201
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
ANB DM10547.1            ; RB6 Temp paste home Complete
DW #99 EM1310            ; RB6 temp paste1 terget POS
CON
AND MR3005               ; RB6 label1  start I/L
SET R35508               ; RB6 label1 up & down origin
CON
JMP @MR1202
STG @MR1202
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
AND R35509               ; RB6 label1 up & down origin
AND DM10547.1            ; RB6 Temp paste home Complete
AND= EM1311 #1           ; RB6 temp paste1 current POS
RES R35509               ; RB6 label1 up & down origin
CON
JMP @MR1203
STG @MR1203
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
ANB MR4701               ; RB6 label1 down moving complet
SET MR4700               ; RB6 label1 down moving request
CON
JMP @MR1204
STG @MR1204
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
AND MR4701               ; RB6 label1 down moving complet
RES MR4701               ; RB6 label1 down moving complet
CON
JMP @MR1205
STG @MR1205
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
SET @MR1207              ; RB6 temp paste1 home return 
CON
ENDS
;RB7 仮貼2上下　原点復帰
STG @MR1208              ; RB7 temp paste2 home return 
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
MPS
ANB DM10555.1            ; RB7 Temp paste home Complete
JMP @MR1209
MPP
AND DM10555.1            ; RB7 Temp paste home Complete
JMP @MR1211
STG @MR1209
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
ANB DM10555.1            ; RB7 Temp paste home Complete
DW #99 EM1312            ; RB7 temp paste2 terget POS
CON
AND MR3006               ; RB7 label2  start I/L
SET R35608               ; RB7 label2 up & down origin
CON
JMP @MR1210
STG @MR1210
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
AND R35609               ; RB7 label2 up & down origin
AND DM10555.1            ; RB7 Temp paste home Complete
AND= EM1313 #1           ; RB7 temp paste2 current POS
RES R35609               ; RB7 label2 up & down origin
CON
JMP @MR1211
STG @MR1211
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
ANB MR4801               ; RB7 label2 down moving complet
SET MR4800               ; RB7 label2 down moving request
CON
JMP @MR1212
STG @MR1212
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
AND MR4801               ; RB7 label2 down moving complet
RES MR4801               ; RB7 label2 down moving complet
CON
JMP @MR1213
STG @MR1213
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
SET @MR1215              ; RB7 temp paste2 home return 
CON
ENDS
;ﾗﾍﾞﾙINDEX1　原点復帰
STG @MR1300              ; Label index1 home return request
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
AND MR3201               ; label index1 moving I/L
LD>= EM1190 #1           ; Label Index1 recive setting POS
AND<= EM1190 #10         ; Label Index1 recive setting POS
OR CR2002                ; Normal ON
ANL
MPS
MOV #25 EM1210           ; label INDEX1 terget POS
MPP
AND<> EM1210 #0          ; label INDEX1 terget POS
JMP @MR1301
STG @MR1301
ANB MR1102               ; Index moving completed
SET MR1100               ; Index move request
CON
JMP @MR1302
STG @MR1302
AND MR1102               ; Index moving completed
RES MR1102               ; Index moving completed
CON
JMP @MR1303
STG @MR1303
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
AND MR3201               ; label index1 moving I/L
AND>= EM1190 #1          ; Label Index1 recive setting POS
AND<= EM1190 #10         ; Label Index1 recive setting POS
MPS
MOV EM1190 EM1210        ; Label Index1 recive setting POS  label INDEX1 terget POS
MPP
AND<> EM1210 #0          ; label INDEX1 terget POS
JMP @MR1304
STG @MR1304
ANB MR1102               ; Index moving completed
SET MR1100               ; Index move request
CON
JMP @MR1305
STG @MR1305
AND MR1102               ; Index moving completed
RES MR1102               ; Index moving completed
CON
SET @MR1307              ; Label index1 home return finish
CON
ENDS
;ﾗﾍﾞﾙINDEX2　原点復帰
STG @MR1308              ; Label index2 home return request
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
AND MR3202               ; label index2 moving I/L
LD>= EM1194 #1           ; Label Index2 recive setting POS
AND<= EM1194 #10         ; Label Index2 recive setting POS
OR CR2002                ; Normal ON
ANL
MPS
MOV #25 EM1220           ; label INDEX2 terget POS
MPP
AND<> EM1220 #0          ; label INDEX2 terget POS
JMP @MR1309
STG @MR1309
ANB MR1202               ; Label index2 moving completed
SET MR1200               ; Label index2 move request
CON
JMP @MR1310
STG @MR1310
AND MR1202               ; Label index2 moving completed
RES MR1202               ; Label index2 moving completed
CON
JMP @MR1311
STG @MR1311
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
AND MR3202               ; label index2 moving I/L
AND>= EM1194 #1          ; Label Index2 recive setting POS
AND<= EM1194 #10         ; Label Index2 recive setting POS
MPS
MOV EM1194 EM1220        ; Label Index2 recive setting POS  label INDEX2 terget POS
MPP
AND<> EM1220 #0          ; label INDEX2 terget POS
JMP @MR1312
STG @MR1312
ANB MR1202               ; Label index2 moving completed
SET MR1200               ; Label index2 move request
CON
JMP @MR1313
STG @MR1313
AND MR1202               ; Label index2 moving completed
RES MR1202               ; Label index2 moving completed
CON
SET @MR1315              ; Label index2 home return finish
CON
ENDS
;<h1/>AUTO
LD R50001                ; AUTO mode
ANB R50204               ; UT4 Do
ANB @MR2001              ; AUTO oparation 
SET R50204               ; UT4 Do
CON
SET @MR2000              ; UT4 auto start
LDB R50003               ; HOME mode
ANB R50001               ; AUTO mode
ANB R50002               ; STEP mode
AND @MR2915              ; AUTO oparation finish
RES @MR2001              ; AUTO oparation 
CON
RES R50204               ; UT4 Do
CON
RES @MR2915              ; AUTO oparation finish
STG @MR2000              ; UT4 auto start
AND R50209               ; Operation Start
ANB R50200               ; INDEX Do
ANB @MR2800              ; next start waiting
SET @MR2001              ; AUTO oparation 
CON
JMP @MR2003
;チャック位置確認
STG @MR2003
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
LDA #5
CON
ADD EM1202               ; Main INDEX current POS
CON
STA DM19400              ; UT4 chuck No.
CON
JMP @MR2004
STG @MR2004
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
MPS
LD>= DM19400 #1          ; UT4 chuck No.
AND<= DM19400 #8         ; UT4 chuck No.
ANL
JMP @MR2505
MPP
AND> DM19400 #8          ; UT4 chuck No.
LDA DM19400              ; UT4 chuck No.
CON
SUB #8
CON
STA DM19400              ; UT4 chuck No.
CON
JMP @MR2505
;
STG @MR2505
MPS
LD LR41100               ; AC Parameter 0(Normal mode)
OR LR41101               ; AC Parameter 1(UT6.7 non action)
ANL
JMP @MR2005
MRD
LD LR41102               ; AC Parameter 2(UT6-8 only)
OR LR41107               ; AC Parameter 7(UT8 only)
ANL
JMP @MR2910              ; Oparation finish
MPP
LDB LR41100              ; AC Parameter 0(Normal mode)
ANB LR41101              ; AC Parameter 1(UT6.7 non action)
ANB LR41102              ; AC Parameter 2(UT6-8 only)
ANB LR41107              ; AC Parameter 7(UT8 only)
ANL
JMP @MR2005
STG @MR2005
MPS
LD= DM20400 #3           ; UT4-1 Work detection
AND= DM20402 #3          ; UT4-2 Work detection
LD R4806                 ; INDEX chuck 4-1 work existence
AND R4807                ; INDEX chuck 4-2 work existence
LDB MR700                ; Upper stream non H/S
AND MR714                ; Non Shrink film
ORL
ANL
LD= DM20400 #3           ; UT4-1 Work detection
AND= DM20402 #0          ; UT4-2 Work detection
LD R4806                 ; INDEX chuck 4-1 work existence
OR MR714                 ; Non Shrink film
ANL
ANB R4807                ; INDEX chuck 4-2 work existence
ORL
LD= DM20400 #0           ; UT4-1 Work detection
AND= DM20402 #3          ; UT4-2 Work detection
ANB R4806                ; INDEX chuck 4-1 work existence
LD R4807                 ; INDEX chuck 4-2 work existence
OR MR714                 ; Non Shrink film
ANL
ORL
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
ANL
JMP @MR2006
MPP
LD= DM20400 #0           ; UT4-1 Work detection
AND= DM20402 #0          ; UT4-2 Work detection
LDB R4806                ; INDEX chuck 4-1 work existence
ANB R4807                ; INDEX chuck 4-2 work existence
LDB MR700                ; Upper stream non H/S
AND MR714                ; Non Shrink film
ORL
ANL
LD= DM20400 #4           ; UT4-1 Work detection
AND= DM20402 #4          ; UT4-2 Work detection
AND R4806                ; INDEX chuck 4-1 work existence
AND R4807                ; INDEX chuck 4-2 work existence
ORL
LD= DM20400 #4           ; UT4-1 Work detection
AND= DM20402 #0          ; UT4-2 Work detection
AND R4806                ; INDEX chuck 4-1 work existence
ANB R4807                ; INDEX chuck 4-2 work existence
ORL
LD= DM20400 #0           ; UT4-1 Work detection
AND= DM20402 #4          ; UT4-2 Work detection
ANB R4806                ; INDEX chuck 4-1 work existence
AND R4807                ; INDEX chuck 4-2 work existence
ORL
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
ANL
JMP @MR2910              ; Oparation finish
;不良ﾜｰｸ確認
STG @MR2006
MPS
LD= DM20404 #0
AND= DM20406 #0
ANL
JMP @MR2100              ; Normal oparation
MRD
TMR #50 #20
CON
AND T50
DW #0 DM20404
CON
DW #0 DM20406
MRD
LD= DM20400 #3           ; UT4-1 Work detection
AND= DM20402 #3          ; UT4-2 Work detection
LD<> DM20404 #0
OR<> DM20406 #0
ANL
ANL
DW #4 DM20400            ; UT4-1 Work detection
CON
DW #4 DM20402            ; UT4-2 Work detection
CON
JMP @MR2910              ; Oparation finish
MRD
LD= DM20400 #3           ; UT4-1 Work detection
AND= DM20402 #0          ; UT4-2 Work detection
AND<> DM20404 #0
ANL
DW #4 DM20400            ; UT4-1 Work detection
CON
JMP @MR2910              ; Oparation finish
MPP
LD= DM20400 #0           ; UT4-1 Work detection
AND= DM20402 #3          ; UT4-2 Work detection
AND<> DM20406 #0
ANL
DW #4 DM20402            ; UT4-2 Work detection
CON
JMP @MR2910              ; Oparation finish
;
LD R50001                ; AUTO mode
OR R50002                ; STEP mode
MPS
LD @MR2601               ; Label printer1 send finish
LD @MR2613               ; 1 Side Label start
OR MR715                 ; Label printer non
ANL
AND= @MR3000 #0          ; Label1 recive request
AND= @MR3100 #0
AND= @MR3200 #0
AND= @MR3300 #0          ; label1 paste request
ANB @MR3414
ANL
SET @MR3000              ; Label1 recive request
MRD
LD @MR4501               ; Label printer2 send finish
LD @MR4514               ; 2 Side Label start
OR MR715                 ; Label printer non
ANL
AND= @MR3500 #0          ; Label2 recive request
AND= @MR3600 #0
AND= @MR3700 #0
AND= @MR3800 #0          ; label2 recive request
ANB @MR3914
ANL
SET @MR3500              ; Label2 recive request
MRD
LD @MR2601               ; Label printer1 send finish
LD @MR2613               ; 1 Side Label start
OR MR715                 ; Label printer non
ANL
AND @MR3000              ; Label1 recive request
ANL
RES @MR2601              ; Label printer1 send finish
CON
RES @MR2613              ; 1 Side Label start
MPP
LD @MR4501               ; Label printer2 send finish
LD @MR4514               ; 2 Side Label start
OR MR715                 ; Label printer non
ANL
AND @MR3500              ; Label2 recive request
ANL
RES @MR4501              ; Label printer2 send finish
CON
RES @MR4514              ; 2 Side Label start
;<<行コメント編集：Ctrl+Enter/Escで確定>>
LD R50001                ; AUTO mode
MPS
LDB @MR4002              ; Label1 recive sbsorption finish
ANP MR204
AND<> DM20300 #0         ; UT3-1 Work detection
ANL
DW #3 EM1926             ; Label1 send data Reference NO
CON
SET @MR2600              ; Label printer send
MRD
LDB @MR4102              ; Label2 recive sbsorption finish
ANP MR204
AND<> DM20302 #0         ; UT3-2 Work detection
ANL
DW #3 EM1932             ; Label2 send data Reference NO
CON
SET @MR4500
MRD
LD @MR4002               ; Label1 recive sbsorption finish
AND @MR4015              ; Label1 error label start
AND<> DM20400 #0         ; UT4-1 Work detection
ANL
MEP
DW #4 EM1926             ; Label1 send data Reference NO
CON
SET @MR2600              ; Label printer send
MPP
LD @MR4102               ; Label2 recive sbsorption finish
AND @MR4115              ; Label2 error label start
AND<> DM20402 #0         ; UT4-2 Work detection
ANL
MEP
DW #4 EM1932             ; Label2 send data Reference NO
CON
SET @MR4500
LD R50002                ; STEP mode
MPS
LDB @MR4002              ; Label1 recive sbsorption finish
ANP MR204
AND<> DM20400 #0         ; UT4-1 Work detection
ANL
DW #4 EM1926             ; Label1 send data Reference NO
CON
SET @MR2600              ; Label printer send
MRD
LD @MR4002               ; Label1 recive sbsorption finish
AND @MR4015              ; Label1 error label start
AND<> DM20400 #0         ; UT4-1 Work detection
ANL
MEP
DW #4 EM1926             ; Label1 send data Reference NO
CON
SET @MR2600              ; Label printer send
MRD
LDB @MR4102              ; Label2 recive sbsorption finish
ANP MR204
AND<> DM20402 #0         ; UT4-2 Work detection
ANL
DW #4 EM1932             ; Label2 send data Reference NO
CON
SET @MR4500
MPP
LD @MR4102               ; Label2 recive sbsorption finish
AND @MR4115              ; Label2 error label start
AND<> DM20402 #0         ; UT4-2 Work detection
ANL
MEP
DW #4 EM1932             ; Label2 send data Reference NO
CON
SET @MR4500
;通常動作
;Ordinary Movement
STG @MR2100              ; Normal oparation
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
SET @MR2112
CON
JMP @MR2103
STG @MR2103
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
SET MR404                ; UT4 work detection/data check 
CON
MPS
AND= DM19400 #1          ; UT4 chuck No.
RES MR7800               ; INDEX chuck1 close
CON
SET MR7801               ; INDEX chuck1 open
CON
JMP @MR2104
MRD
AND= DM19400 #2          ; UT4 chuck No.
RES MR7802               ; INDEX chuck2 close
CON
SET MR7803               ; INDEX chuck2 open
CON
JMP @MR2104
MRD
AND= DM19400 #3          ; UT4 chuck No.
RES MR7804               ; INDEX chuck3 close
CON
SET MR7805               ; INDEX chuck3 open
CON
JMP @MR2104
MRD
AND= DM19400 #4          ; UT4 chuck No.
RES MR7806               ; INDEX chuck4 close
CON
SET MR7807               ; INDEX chuck4 open
CON
JMP @MR2104
MRD
AND= DM19400 #5          ; UT4 chuck No.
RES MR7808               ; INDEX chuck5 close
CON
SET MR7809               ; INDEX chuck5 open
CON
JMP @MR2104
MRD
AND= DM19400 #6          ; UT4 chuck No.
RES MR7810               ; INDEX chuck6 close
CON
SET MR7811               ; INDEX chuck6 open
CON
JMP @MR2104
MRD
AND= DM19400 #7          ; UT4 chuck No.
RES MR7812               ; INDEX chuck7 close
CON
SET MR7813               ; INDEX chuck7 open
CON
JMP @MR2104
MPP
AND= DM19400 #8          ; UT4 chuck No.
RES MR7814               ; INDEX chuck8 close
CON
SET MR7815               ; INDEX chuck8 open
CON
JMP @MR2104
STG @MR2104
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
TMR @1 #3
CON
AND @T1
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR2106
STG @MR2106
SET @MR800               ; Pause dissable1
CON
MPS
LD<> DM20400 #0          ; UT4-1 Work detection
AND<> DM20402 #0         ; UT4-2 Work detection
ANL
LDA.L DM20426            ; UT4-1 temp paste height1
CON
STA.L EM13054            ; RB6 terget (LOW)10
CON
LDA.L DM20428            ; UT4-2 temp paste height2
CON
STA.L EM13654            ; RB7 terget (LOW)10
CON
JMP @MR2105
MRD
LD<> DM20400 #0          ; UT4-1 Work detection
AND= DM20402 #0          ; UT4-2 Work detection
ANL
LDA.L DM20426            ; UT4-1 temp paste height1
CON
STA.L EM13054            ; RB6 terget (LOW)10
CON
JMP @MR2105
MPP
LD= DM20400 #0           ; UT4-1 Work detection
AND<> DM20402 #0         ; UT4-2 Work detection
ANL
LDA.L DM20428            ; UT4-2 temp paste height2
CON
STA.L EM13654            ; RB7 terget (LOW)10
CON
JMP @MR2105
STG @MR2105
MPS
LD<> DM20400 #0          ; UT4-1 Work detection
AND<> DM20402 #0         ; UT4-2 Work detection
ANB MR4709               ; RB6 label1 up moving complet
ANB MR4809               ; RB7 label2 up moving complet
ANL
SET MR4708               ; RB6 label1 up moving request
CON
SET MR4808               ; RB7 label2 up moving request
CON
JMP @MR2107
MRD
LD<> DM20400 #0          ; UT4-1 Work detection
AND= DM20402 #0          ; UT4-2 Work detection
ANB MR4709               ; RB6 label1 up moving complet
ANL
SET MR4708               ; RB6 label1 up moving request
CON
JMP @MR2107
MPP
LD= DM20400 #0           ; UT4-1 Work detection
AND<> DM20402 #0         ; UT4-2 Work detection
ANB MR4809               ; RB7 label2 up moving complet
ANL
SET MR4808               ; RB7 label2 up moving request
CON
JMP @MR2107
STG @MR2107
MPS
LD<> DM20400 #0          ; UT4-1 Work detection
AND<> DM20402 #0         ; UT4-2 Work detection
AND MR4709               ; RB6 label1 up moving complet
AND MR4809               ; RB7 label2 up moving complet
ANL
RES MR4709               ; RB6 label1 up moving complet
CON
RES MR4809               ; RB7 label2 up moving complet
CON
RES @MR800               ; Pause dissable1
CON
JMP @MR2108
MRD
LD<> DM20400 #0          ; UT4-1 Work detection
AND= DM20402 #0          ; UT4-2 Work detection
AND MR4709               ; RB6 label1 up moving complet
ANL
RES MR4709               ; RB6 label1 up moving complet
CON
RES @MR800               ; Pause dissable1
CON
JMP @MR2108
MPP
LD= DM20400 #0           ; UT4-1 Work detection
AND<> DM20402 #0         ; UT4-2 Work detection
AND MR4809               ; RB7 label2 up moving complet
ANL
RES MR4809               ; RB7 label2 up moving complet
CON
RES @MR800               ; Pause dissable1
CON
JMP @MR2108
STG @MR2108
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR2111
STG @MR2111
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
MPS
AND= DM19400 #1          ; UT4 chuck No.
RES MR7801               ; INDEX chuck1 open
CON
SET MR7800               ; INDEX chuck1 close
CON
JMP @MR2109
MRD
AND= DM19400 #2          ; UT4 chuck No.
RES MR7803               ; INDEX chuck2 open
CON
SET MR7802               ; INDEX chuck2 close
CON
JMP @MR2109
MRD
AND= DM19400 #3          ; UT4 chuck No.
RES MR7805               ; INDEX chuck3 open
CON
SET MR7804               ; INDEX chuck3 close
CON
JMP @MR2109
MRD
AND= DM19400 #4          ; UT4 chuck No.
RES MR7807               ; INDEX chuck4 open
CON
SET MR7806               ; INDEX chuck4 close
CON
JMP @MR2109
MRD
AND= DM19400 #5          ; UT4 chuck No.
RES MR7809               ; INDEX chuck5 open
CON
SET MR7808               ; INDEX chuck5 close
CON
JMP @MR2109
MRD
AND= DM19400 #6          ; UT4 chuck No.
RES MR7811               ; INDEX chuck6 open
CON
SET MR7810               ; INDEX chuck6 close
CON
JMP @MR2109
MRD
AND= DM19400 #7          ; UT4 chuck No.
RES MR7813               ; INDEX chuck7 open
CON
SET MR7812               ; INDEX chuck7 close
CON
JMP @MR2109
MPP
AND= DM19400 #8          ; UT4 chuck No.
RES MR7815               ; INDEX chuck8 open
CON
SET MR7814               ; INDEX chuck8 close
CON
JMP @MR2109
STG @MR2109
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
TMR @2 #3
CON
AND @T2
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR2110
STG @MR2110
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
MPS
LD<> DM20400 #0          ; UT4-1 Work detection
AND<> DM20402 #0         ; UT4-2 Work detection
AND @MR3213              ; Label1 recive label OK
AND @MR3713              ; Label2 recive label OK
ANL
JMP @MR2200
MRD
LD<> DM20400 #0          ; UT4-1 Work detection
AND= DM20402 #0          ; UT4-2 Work detection
AND @MR3213              ; Label1 recive label OK
ANL
JMP @MR2200
MPP
LD= DM20400 #0           ; UT4-1 Work detection
AND<> DM20402 #0         ; UT4-2 Work detection
AND @MR3713              ; Label2 recive label OK
ANL
JMP @MR2200
LD @MR2112
LD<> DM20400 #0          ; UT4-1 Work detection
AND<> DM20402 #0         ; UT4-2 Work detection
AND @MR3213              ; Label1 recive label OK
AND @MR3713              ; Label2 recive label OK
LD<> DM20400 #0          ; UT4-1 Work detection
AND= DM20402 #0          ; UT4-2 Work detection
AND @MR3213              ; Label1 recive label OK
ORL
LD= DM20400 #0           ; UT4-1 Work detection
AND<> DM20402 #0         ; UT4-2 Work detection
AND @MR3713              ; Label2 recive label OK
ORL
ANL
OUT @MR2113
LDP @MR2113
RES MR204
CON
RES MR104                ; 4UT index data shift Prohibited
CON
RES MR105                ; Index data shift 
CON
SET R51515
STG @MR2200
LDB MR204
ANB MR104                ; 4UT index data shift Prohibited
ANB MR105                ; Index data shift 
AND R51515
OR CR2002                ; Normal ON
ANL
RES @MR2112
CON
RES @MR3213              ; Label1 recive label OK
CON
RES @MR3713              ; Label2 recive label OK
CON
JMP @MR2212
STG @MR2212
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
MPS
LD<> DM20400 #0          ; UT4-1 Work detection
AND<> DM20402 #0         ; UT4-2 Work detection
AND @MR3215              ; label1 recive finish
AND @MR3715              ; label2 recive finish
ANL
RES @MR3215              ; label1 recive finish
CON
RES @MR3715              ; label2 recive finish
CON
JMP @MR2201
MRD
LD<> DM20400 #0          ; UT4-1 Work detection
AND= DM20402 #0          ; UT4-2 Work detection
AND @MR3215              ; label1 recive finish
ANL
RES @MR3215              ; label1 recive finish
CON
JMP @MR2201
MPP
LD= DM20400 #0           ; UT4-1 Work detection
AND<> DM20402 #0         ; UT4-2 Work detection
AND @MR3715              ; label2 recive finish
ANL
RES @MR3715              ; label2 recive finish
CON
JMP @MR2201
STG @MR2201
ANB @MR3314              ; Label label1 forward finish
ANB @MR3315              ; Label1 paste finish
ANB @MR3814              ; Label nozuru2 forward finish
ANB @MR3815              ; Label2 paste finish
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR2202
STG @MR2202
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
MPS
LD<> DM20400 #0          ; UT4-1 Work detection
AND<> DM20402 #0         ; UT4-2 Work detection
ANL
SET @MR3300              ; label1 paste request
CON
SET @MR3800              ; label2 recive request
CON
JMP @MR2213
MRD
LD<> DM20400 #0          ; UT4-1 Work detection
AND= DM20402 #0          ; UT4-2 Work detection
ANL
SET @MR3300              ; label1 paste request
CON
JMP @MR2213
MPP
LD= DM20400 #0           ; UT4-1 Work detection
AND<> DM20402 #0         ; UT4-2 Work detection
ANL
SET @MR3800              ; label2 recive request
CON
JMP @MR2213
STG @MR2213
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
MPS
LD<> DM20400 #0          ; UT4-1 Work detection
AND<> DM20402 #0         ; UT4-2 Work detection
AND @MR3314              ; Label label1 forward finish
AND @MR3814              ; Label nozuru2 forward finish
ANL
RES @MR3314              ; Label label1 forward finish
CON
RES @MR3814              ; Label nozuru2 forward finish
CON
JMP @MR2203
MRD
LD<> DM20400 #0          ; UT4-1 Work detection
AND= DM20402 #0          ; UT4-2 Work detection
AND @MR3314              ; Label label1 forward finish
ANL
RES @MR3314              ; Label label1 forward finish
CON
JMP @MR2203
MPP
LD= DM20400 #0           ; UT4-1 Work detection
AND<> DM20402 #0         ; UT4-2 Work detection
AND @MR3814              ; Label nozuru2 forward finish
ANL
RES @MR3814              ; Label nozuru2 forward finish
CON
JMP @MR2203
STG @MR2203
SET @MR800               ; Pause dissable1
CON
MPS
LD<> DM20400 #0          ; UT4-1 Work detection
AND<> DM20402 #0         ; UT4-2 Work detection
ANB MR4701               ; RB6 label1 down moving complet
ANB MR4801               ; RB7 label2 down moving complet
ANL
SET MR4700               ; RB6 label1 down moving request
CON
SET MR4800               ; RB7 label2 down moving request
CON
JMP @MR2204
MRD
LD<> DM20400 #0          ; UT4-1 Work detection
AND= DM20402 #0          ; UT4-2 Work detection
ANB MR4701               ; RB6 label1 down moving complet
ANB MR4801               ; RB7 label2 down moving complet
ANL
SET MR4700               ; RB6 label1 down moving request
CON
JMP @MR2204
MPP
LD= DM20400 #0           ; UT4-1 Work detection
AND<> DM20402 #0         ; UT4-2 Work detection
ANB MR4701               ; RB6 label1 down moving complet
ANB MR4801               ; RB7 label2 down moving complet
ANL
SET MR4800               ; RB7 label2 down moving request
CON
JMP @MR2204
STG @MR2204
MPS
LD<> DM20400 #0          ; UT4-1 Work detection
AND<> DM20402 #0         ; UT4-2 Work detection
AND @MR3315              ; Label1 paste finish
AND @MR3815              ; Label2 paste finish
ANL
RES @MR3315              ; Label1 paste finish
CON
RES @MR3815              ; Label2 paste finish
CON
JMP @MR2205
MRD
LD<> DM20400 #0          ; UT4-1 Work detection
AND= DM20402 #0          ; UT4-2 Work detection
AND @MR3315              ; Label1 paste finish
ANL
RES @MR3315              ; Label1 paste finish
CON
JMP @MR2205
MPP
LD= DM20400 #0           ; UT4-1 Work detection
AND<> DM20402 #0         ; UT4-2 Work detection
AND @MR3815              ; Label2 paste finish
ANL
RES @MR3815              ; Label2 paste finish
CON
JMP @MR2205
STG @MR2205
LDB @MR3415              ; Label1 recive finish
OR= DM20400 #0           ; UT4-1 Work detection
ANL
LDB @MR3915              ; Label2 ready for recive finish
OR= DM20402 #0           ; UT4-2 Work detection
ANL
JMP @MR2206
STG @MR2206
MPS
LD<> DM20400 #0          ; UT4-1 Work detection
AND<> DM20402 #0         ; UT4-2 Work detection
ANL
SET @MR3400              ; Label1 recive request
CON
SET @MR3900              ; Label2 ready for recive request 
CON
JMP @MR2207
MRD
LD<> DM20400 #0          ; UT4-1 Work detection
AND= DM20402 #0          ; UT4-2 Work detection
ANL
SET @MR3400              ; Label1 recive request
CON
JMP @MR2207
MPP
LD= DM20400 #0           ; UT4-1 Work detection
AND<> DM20402 #0         ; UT4-2 Work detection
ANL
SET @MR3900              ; Label2 ready for recive request 
CON
JMP @MR2207
STG @MR2207
MPS
LD<> DM20400 #0          ; UT4-1 Work detection
AND<> DM20402 #0         ; UT4-2 Work detection
AND MR4701               ; RB6 label1 down moving complet
AND MR4801               ; RB7 label2 down moving complet
ANL
RES MR4701               ; RB6 label1 down moving complet
CON
RES MR4801               ; RB7 label2 down moving complet
CON
RES @MR800               ; Pause dissable1
CON
JMP @MR2208
MRD
LD<> DM20400 #0          ; UT4-1 Work detection
AND= DM20402 #0          ; UT4-2 Work detection
AND MR4701               ; RB6 label1 down moving complet
ANL
RES MR4701               ; RB6 label1 down moving complet
CON
RES MR4801               ; RB7 label2 down moving complet
CON
RES @MR800               ; Pause dissable1
CON
JMP @MR2208
MPP
LD= DM20400 #0           ; UT4-1 Work detection
AND<> DM20402 #0         ; UT4-2 Work detection
AND MR4801               ; RB7 label2 down moving complet
ANL
RES MR4701               ; RB6 label1 down moving complet
CON
RES MR4801               ; RB7 label2 down moving complet
CON
RES @MR800               ; Pause dissable1
CON
JMP @MR2208
STG @MR2208
MPS
LD<> DM20400 #0          ; UT4-1 Work detection
AND<> DM20402 #0         ; UT4-2 Work detection
ANL
DW #4 DM20400            ; UT4-1 Work detection
CON
DW #4 DM20402            ; UT4-2 Work detection
CON
JMP @MR2209
MRD
LD<> DM20400 #0          ; UT4-1 Work detection
AND= DM20402 #0          ; UT4-2 Work detection
ANL
DW #4 DM20400            ; UT4-1 Work detection
CON
JMP @MR2209
MPP
LD= DM20400 #0           ; UT4-1 Work detection
AND<> DM20402 #0         ; UT4-2 Work detection
ANL
DW #4 DM20402            ; UT4-2 Work detection
CON
JMP @MR2209
STG @MR2209
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
MPS
ANB @MR006               ; STEP oparation
SET @MR2910              ; Oparation finish
CON
SET @MR2800              ; next start waiting
CON
JMP @MR2210
MPP
AND @MR006               ; STEP oparation
SET @MR2800              ; next start waiting
CON
JMP @MR2210
STG @MR2210
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
JMP @MR2211
STG @MR2211
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
MPS
ANB @MR006               ; STEP oparation
RES @MR2800              ; next start waiting
CON
ENDS
MPP
AND @MR006               ; STEP oparation
RES @MR2800              ; next start waiting
CON
JMP @MR2910              ; Oparation finish
;動作終了
;An End of Operation
STG @MR2910              ; Oparation finish
RES MR404                ; UT4 work detection/data check 
CON
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
MPS
AND R50001               ; AUTO mode
SET R51904               ; UT4 1cycle finished
CON
JMP @MR2911
MPP
AND R50002               ; STEP mode
SET R50009               ; HOLDRQ
CON
SET R51904               ; UT4 1cycle finished
CON
JMP @MR2911
STG @MR2911
ANB R50209               ; Operation Start
MPS
AND R50001               ; AUTO mode
MPS
LDB R50000               ; HOLD
AND R50409               ; Cycyle Finished
ANL
SET @MR2000              ; UT4 auto start
CON
ENDS
MPP
AND R50000               ; HOLD
JMP @MR2912
MPP
LD R50002                ; STEP mode
AND R50000               ; HOLD
ANL
JMP @MR2912
;終了処理
;Processing of end
STG @MR2912
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
MPS
AND @MR2001              ; AUTO oparation 
SET @MR2915              ; AUTO oparation finish
CON
ENDS
MPP
AND @MR006               ; STEP oparation
RES @MR006               ; STEP oparation
CON
SET @MR4915              ; STEP oparation finish
CON
ENDS
;<h1/>STEP
LD R50002                ; STEP mode
ANB R50300               ; Pause
ANB R50204               ; UT4 Do
SET @MR006               ; STEP oparation
CON
SET R50204               ; UT4 Do
CON
SET @MR4900
STG @MR4900
ANB R50300               ; Pause
ANB R50113               ; UT3 Error
MPS
AND LR40500              ; STEP UT4-0 selection lamp
JMP @MR4901
MPP
ANB LR40500              ; STEP UT4-0 selection lamp
JMP @MR4901
;STEP　ﾁｬｯｸ位置確認
STG @MR4901
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
LDA #5
CON
ADD EM1202               ; Main INDEX current POS
CON
STA DM19400              ; UT4 chuck No.
CON
JMP @MR4902
STG @MR4902
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
MPS
LD>= DM19400 #1          ; UT4 chuck No.
AND<= DM19400 #8         ; UT4 chuck No.
ANL
JMP @MR4903
MPP
AND> DM19400 #8          ; UT4 chuck No.
LDA DM19400              ; UT4 chuck No.
CON
SUB #8
CON
STA DM19400              ; UT4 chuck No.
CON
JMP @MR4903
;STEP　ﾁｬｯｸ位置確認ここまで
STG @MR4903
ANB R50300               ; Pause
ANB R50112               ; UT2 Error
@SET LR000               ; Step/Manual Oparation Memory
CON
MPS
AND= DM19400 #1          ; UT4 chuck No.
SET MR7801               ; INDEX chuck1 open
CON
RES MR7800               ; INDEX chuck1 close
CON
JMP @MR4904
MRD
AND= DM19400 #2          ; UT4 chuck No.
SET MR7803               ; INDEX chuck2 open
CON
RES MR7802               ; INDEX chuck2 close
CON
JMP @MR4904
MRD
AND= DM19400 #3          ; UT4 chuck No.
SET MR7805               ; INDEX chuck3 open
CON
RES MR7804               ; INDEX chuck3 close
CON
JMP @MR4904
MRD
AND= DM19400 #4          ; UT4 chuck No.
SET MR7807               ; INDEX chuck4 open
CON
RES MR7806               ; INDEX chuck4 close
CON
JMP @MR4904
MRD
AND= DM19400 #5          ; UT4 chuck No.
SET MR7809               ; INDEX chuck5 open
CON
RES MR7808               ; INDEX chuck5 close
CON
JMP @MR4904
MRD
AND= DM19400 #6          ; UT4 chuck No.
SET MR7811               ; INDEX chuck6 open
CON
RES MR7810               ; INDEX chuck6 close
CON
JMP @MR4904
MRD
AND= DM19400 #7          ; UT4 chuck No.
SET MR7813               ; INDEX chuck7 open
CON
RES MR7812               ; INDEX chuck7 close
CON
JMP @MR4904
MPP
AND= DM19400 #8          ; UT4 chuck No.
SET MR7815               ; INDEX chuck8 open
CON
RES MR7814               ; INDEX chuck8 close
CON
JMP @MR4904
STG @MR4904
ANB R50300               ; Pause
ANB R50113               ; UT3 Error
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR4905
STG @MR4905
ANB R50300               ; Pause
ANB R50113               ; UT3 Error
MPS
LD R4806                 ; INDEX chuck 4-1 work existence
AND R4807                ; INDEX chuck 4-2 work existence
ANL
DW #3 DM20400            ; UT4-1 Work detection
CON
DW #3 DM20402            ; UT4-2 Work detection
CON
SET @MR2100              ; Normal oparation
CON
SET MR204
CON
JMP @MR4906
MRD
LD R4806                 ; INDEX chuck 4-1 work existence
ANB R4807                ; INDEX chuck 4-2 work existence
ANL
DW #3 DM20400            ; UT4-1 Work detection
CON
SET @MR2100              ; Normal oparation
CON
SET MR204
CON
JMP @MR4906
MRD
LDB R4806                ; INDEX chuck 4-1 work existence
AND R4807                ; INDEX chuck 4-2 work existence
ANL
DW #3 DM20402            ; UT4-2 Work detection
CON
SET @MR2100              ; Normal oparation
CON
SET MR204
CON
JMP @MR4906
MPP
LDB R4806                ; INDEX chuck 4-1 work existence
ANB R4807                ; INDEX chuck 4-2 work existence
ANL
SET @MR2910              ; Oparation finish
CON
JMP @MR4906
STG @MR4906
ANB R50300               ; Pause
ANB R50112               ; UT2 Error
@SET LR000               ; Step/Manual Oparation Memory
CON
ANB @MR006               ; STEP oparation
MPS
AND= DM19400 #1          ; UT4 chuck No.
SET MR7801               ; INDEX chuck1 open
CON
RES MR7800               ; INDEX chuck1 close
CON
JMP @MR4914
MRD
AND= DM19400 #2          ; UT4 chuck No.
SET MR7803               ; INDEX chuck2 open
CON
RES MR7802               ; INDEX chuck2 close
CON
JMP @MR4914
MRD
AND= DM19400 #3          ; UT4 chuck No.
SET MR7805               ; INDEX chuck3 open
CON
RES MR7804               ; INDEX chuck3 close
CON
JMP @MR4914
MRD
AND= DM19400 #4          ; UT4 chuck No.
SET MR7807               ; INDEX chuck4 open
CON
RES MR7806               ; INDEX chuck4 close
CON
JMP @MR4914
MRD
AND= DM19400 #5          ; UT4 chuck No.
SET MR7809               ; INDEX chuck5 open
CON
RES MR7808               ; INDEX chuck5 close
CON
JMP @MR4914
MRD
AND= DM19400 #6          ; UT4 chuck No.
SET MR7811               ; INDEX chuck6 open
CON
RES MR7810               ; INDEX chuck6 close
CON
JMP @MR4914
MRD
AND= DM19400 #7          ; UT4 chuck No.
SET MR7813               ; INDEX chuck7 open
CON
RES MR7812               ; INDEX chuck7 close
CON
JMP @MR4914
MPP
AND= DM19400 #8          ; UT4 chuck No.
SET MR7815               ; INDEX chuck8 open
CON
RES MR7814               ; INDEX chuck8 close
CON
JMP @MR4914
STG @MR4914
ANB R50300               ; Pause
ANB R50113               ; UT3 Error
DW #0 DM20400            ; UT4-1 Work detection
CON
DW #0 DM20402            ; UT4-2 Work detection
CON
ENDS
LDB R50003               ; HOME mode
ANB R50001               ; AUTO mode
ANB R50002               ; STEP mode
AND @MR4915              ; STEP oparation finish
RES R50204               ; UT4 Do
CON
RES @MR4915              ; STEP oparation finish
;<h1/>ｻﾌﾞﾙｰﾁﾝ
;Subrutine
;RB4 仮貼1ﾋﾟｯﾁ 受取側移動
STG MR4500               ; RB4 label1 recive moving request
SET MR4502               ; RB4 label1 recive moving 
CON
DW #5 EM1306             ; RB4 temp paste1 terget POS
CON
AND DM10531.1            ; RB4 Temp paste home Complete
AND MR3003               ; RB4 label1 pitch start I/L
SET R35300               ; RB4 label1 pitch move
CON
JMP @MR1401
STG @MR1401
AND R35301               ; RB4 label1 pitch move
AND T2104                ; RB4 Temp paste POS5(Recive)
AND= EM1307 #5           ; RB4 temp paste1 current POS
RES MR4502               ; RB4 label1 recive moving 
CON
RES R35301               ; RB4 label1 pitch move
CON
JMP @MR1402              ; RB4 temp paste recive finish
STG @MR1402              ; RB4 temp paste recive finish
SET MR4501               ; RB4 label1 recive moving complet
CON
ENDS
;RB4 仮貼1ﾋﾟｯﾁ 貼付側移動
STG MR4508               ; RB4 label1 paste moving request
SET MR4510               ; RB4 label1 paste moving 
CON
DW #10 EM1306            ; RB4 temp paste1 terget POS
CON
AND DM10531.1            ; RB4 Temp paste home Complete
AND MR3003               ; RB4 label1 pitch start I/L
SET R35300               ; RB4 label1 pitch move
CON
JMP @MR1409
STG @MR1409
AND R35301               ; RB4 label1 pitch move
AND T2109                ; RB4 Temp paste POS10(Pasting)
AND= EM1307 #10          ; RB4 temp paste1 current POS
RES MR4510               ; RB4 label1 paste moving 
CON
RES R35301               ; RB4 label1 pitch move
CON
JMP @MR1410              ; RB4 temp paste finish
STG @MR1410              ; RB4 temp paste finish
SET MR4509               ; RB4 label1 paste moving complet
CON
ENDS
;RB5 仮貼2ﾋﾟｯﾁ 受取側移動
STG MR4600               ; RB5 label1 recive moving request
SET MR4602               ; RB5 label1 recive moving 
CON
DW #5 EM1308             ; RB5 temp paste2 terget POS
CON
AND DM10539.1            ; RB5 Temp paste home Complete
AND MR3004               ; RB5 label2 pitch start I/L
SET R35400               ; RB5 label2 pitch move
CON
JMP @MR1501
STG @MR1501
AND R35401               ; RB5 label2 pitch move
AND T2144                ; RB5 Temp paste POS5(Recive)
AND= EM1309 #5           ; RB5 temp paste2 current POS
RES MR4602               ; RB5 label1 recive moving 
CON
RES R35401               ; RB5 label2 pitch move
CON
JMP @MR1502              ; RB5 temp paste recive finish
STG @MR1502              ; RB5 temp paste recive finish
SET MR4601               ; RB5 label1 recive moving complet
CON
ENDS
;RB5 仮貼2ﾋﾟｯﾁ 貼付側移動
STG MR4608               ; RB5 label1 paste moving request
SET MR4610               ; RB5 label1 paste moving 
CON
DW #10 EM1308            ; RB5 temp paste2 terget POS
CON
AND DM10539.1            ; RB5 Temp paste home Complete
AND MR3004               ; RB5 label2 pitch start I/L
SET R35400               ; RB5 label2 pitch move
CON
JMP @MR1509
STG @MR1509
AND R35401               ; RB5 label2 pitch move
AND T2149                ; RB5 Temp paste POS10(Pasting)
AND= EM1309 #10          ; RB5 temp paste2 current POS
RES MR4610               ; RB5 label1 paste moving 
CON
RES R35401               ; RB5 label2 pitch move
CON
JMP @MR1510              ; RB5 temp paste finish
STG @MR1510              ; RB5 temp paste finish
SET MR4609               ; RB5 label1 paste moving complet
CON
ENDS
;RB6 仮貼1上下 下降移動
STG MR4700               ; RB6 label1 down moving request
SET MR4702               ; RB6 label1 down moving 
CON
DW #5 EM1310             ; RB6 temp paste1 terget POS
CON
AND DM10547.1            ; RB6 Temp paste home Complete
AND MR3005               ; RB6 label1  start I/L
SET R35500               ; RB6 label1 up & down move
CON
JMP @MR1601
STG @MR1601
AND R35501               ; RB6 label1 up & down move
AND T2174                ; RB6 Temp paste POS5(Down)
AND= EM1311 #5           ; RB6 temp paste1 current POS
RES MR4702               ; RB6 label1 down moving 
CON
RES R35501               ; RB6 label1 up & down move
CON
JMP @MR1602              ; RB6 temp down finish
STG @MR1602              ; RB6 temp down finish
SET MR4701               ; RB6 label1 down moving complet
CON
ENDS
;RB6 仮貼1上下 上昇移動
STG MR4708               ; RB6 label1 up moving request
SET MR4710               ; RB6 label1 up moving 
CON
DW #10 EM1310            ; RB6 temp paste1 terget POS
CON
AND DM10547.1            ; RB6 Temp paste home Complete
AND MR3005               ; RB6 label1  start I/L
SET R35500               ; RB6 label1 up & down move
CON
JMP @MR1609
STG @MR1609
AND R35501               ; RB6 label1 up & down move
AND T2179                ; RB6 Temp paste POS10(UP)
AND= EM1311 #10          ; RB6 temp paste1 current POS
RES MR4710               ; RB6 label1 up moving 
CON
RES R35501               ; RB6 label1 up & down move
CON
JMP @MR1610              ; RB6 temp up finish
STG @MR1610              ; RB6 temp up finish
SET MR4709               ; RB6 label1 up moving complet
CON
ENDS
;RB7 仮貼2上下 下降移動
STG MR4800               ; RB7 label2 down moving request
SET MR4802               ; RB7 label2 down moving 
CON
DW #5 EM1312             ; RB7 temp paste2 terget POS
CON
AND DM10555.1            ; RB7 Temp paste home Complete
AND MR3006               ; RB7 label2  start I/L
SET R35600               ; RB7 label2 up & down move
CON
JMP @MR1701
STG @MR1701
AND R35601               ; RB7 label2 up & down move
AND T2204                ; RB7 Temp paste POS5(Down)
AND= EM1313 #5           ; RB7 temp paste2 current POS
RES MR4802               ; RB7 label2 down moving 
CON
RES R35601               ; RB7 label2 up & down move
CON
JMP @MR1702              ; RB7 temp down finish
STG @MR1702              ; RB7 temp down finish
SET MR4801               ; RB7 label2 down moving complet
CON
ENDS
;RB7 仮貼2上下 上昇移動
STG MR4808               ; RB7 label2 up moving request
SET MR4810               ; RB7 label2 up moving 
CON
DW #10 EM1312            ; RB7 temp paste2 terget POS
CON
AND DM10555.1            ; RB7 Temp paste home Complete
AND MR3006               ; RB7 label2  start I/L
SET R35600               ; RB7 label2 up & down move
CON
JMP @MR1709
STG @MR1709
AND R35601               ; RB7 label2 up & down move
AND T2209                ; RB7 Temp paste POS10(UP)
AND= EM1313 #10          ; RB7 temp paste2 current POS
RES MR4810               ; RB7 label2 up moving 
CON
RES R35601               ; RB7 label2 up & down move
CON
JMP @MR1710              ; RB7 temp up finish
STG @MR1710              ; RB7 temp up finish
SET MR4809               ; RB7 label2 up moving complet
CON
ENDS
;<h1/>ﾗﾍﾞﾙ旋回1 ｲﾝﾃﾞｯｸｽ B  位置決ｻﾌﾞ
;Label Turn INDEX Operation
STG MR1100               ; Index move request
SET MR8004               ; Nozzle rotation brake1 UP
CON
AND R5008                ; Nozzle rotation brake1 upper lim
ANB R5009                ; Nozzle rotation brake1 lower lim
AND R8004                ; Nozzle rotation brake1 UP
AND MR3201               ; label index1 moving I/L
RES DM10860.11           ; Label INDEX1 anser
CON
SET MR1101               ; Index moving
CON
JMP @MR1800
STG @MR1800
AND DM10660.10           ; Label INDEX1 waitting Start
AND= EM1210 EM1214       ; label INDEX1 terget POS  label INDEX1 current terget POS
AND<> EM1210 #0          ; label INDEX1 terget POS
AND<> EM1214 #0          ; label INDEX1 current terget POS
DW #0 EM1212             ; label INDEX1 current POS
CON
SET DM10860.8            ; Label INDEX1 input Start
CON
JMP @MR1801
STG @MR1801
ANB DM10660.10           ; Label INDEX1 waitting Start
RES DM10860.8            ; Label INDEX1 input Start
CON
JMP @MR1802
STG @MR1802
AND DM10660.9            ; Label INDEX1 inposition complete
SET DM10860.11           ; Label INDEX1 anser
CON
JMP @MR1803
STG @MR1803
ANB DM10660.9            ; Label INDEX1 inposition complete
RES DM10860.11           ; Label INDEX1 anser
CON
JMP @MR1804
STG @MR1804
AND DM10661.1            ; Label INDEX1 M code strobe
TMH @3 #5
CON
AND @T3
LDA DM10660              ; LABEL INDEX1 status 1
CON
ANDA $00FF
CON
STA EM1212               ; label INDEX1 current POS
CON
SET DM10860.11           ; Label INDEX1 anser
CON
JMP @MR1805
STG @MR1805
ANB DM10661.1            ; Label INDEX1 M code strobe
RES DM10860.11           ; Label INDEX1 anser
CON
AND= EM1210 EM1212       ; label INDEX1 terget POS  label INDEX1 current POS
JMP @MR1806
STG @MR1806
DW #0 EM1210             ; label INDEX1 terget POS
CON
AND= EM1214 #0           ; label INDEX1 current terget POS
RES MR1101               ; Index moving
CON
SET MR1102               ; Index moving completed
CON
ENDS
LD CR2002                ; Normal ON
LDA DM10860              ; Label INDEX1 command 1
CON
ANDA $003F
CON
STA EM1214               ; label INDEX1 current terget POS
LD CR2002                ; Normal ON
MPS
AND EM1210.0
OUT DM10860.0            ; Label INDEX1 PROG 0
MRD
AND EM1210.1
OUT DM10860.1            ; Label INDEX1 PROG 1
MRD
AND EM1210.2
OUT DM10860.2            ; Label INDEX1 PROG 2
MRD
AND EM1210.3
OUT DM10860.3            ; Label INDEX1 PROG 3
MRD
AND EM1210.4
OUT DM10860.4            ; Label INDEX1 PROG 4
MPP
AND EM1210.5
OUT DM10860.5            ; Label INDEX1 PROG 5
;<h1/>ﾗﾍﾞﾙ旋回2 ｲﾝﾃﾞｯｸｽ C  位置決ｻﾌﾞ
;Label Turn INDEX Operation
STG MR1200               ; Label index2 move request
SET MR8006               ; Nozzle rotation brake2 UP
CON
AND R5010                ; Nozzle rotation brake2 upper lim
ANB R5011                ; Nozzle rotation brake2 lower lim
AND R8006                ; Nozzle rotation brake2 UP
AND MR3202               ; label index2 moving I/L
RES DM10870.11           ; Label INDEX2 anser
CON
SET MR1201               ; Label index2 moving
CON
JMP @MR1900
STG @MR1900
AND DM10670.10           ; Label INDEX2 waitting Start
AND= EM1220 EM1224       ; label INDEX2 terget POS  label INDEX2 current terget POS
AND<> EM1220 #0          ; label INDEX2 terget POS
AND<> EM1224 #0          ; label INDEX2 current terget POS
DW #0 EM1222             ; label INDEX2 current POS
CON
SET DM10870.8            ; Label INDEX2 input Start
CON
JMP @MR1901
STG @MR1901
ANB DM10670.10           ; Label INDEX2 waitting Start
RES DM10870.8            ; Label INDEX2 input Start
CON
JMP @MR1902
STG @MR1902
AND DM10670.9            ; Label INDEX2 inposition complete
SET DM10870.11           ; Label INDEX2 anser
CON
JMP @MR1903
STG @MR1903
ANB DM10670.9            ; Label INDEX2 inposition complete
RES DM10870.11           ; Label INDEX2 anser
CON
JMP @MR1904
STG @MR1904
AND DM10671.1            ; Label INDEX2 M code strobe
TMH @4 #5
CON
AND @T4
LDA DM10670              ; LABEL INDEX2 status 1
CON
ANDA $00FF
CON
STA EM1222               ; label INDEX2 current POS
CON
SET DM10870.11           ; Label INDEX2 anser
CON
JMP @MR1905
STG @MR1905
ANB DM10671.1            ; Label INDEX2 M code strobe
RES DM10870.11           ; Label INDEX2 anser
CON
AND= EM1220 EM1222       ; label INDEX2 terget POS  label INDEX2 current POS
JMP @MR1906
STG @MR1906
DW #0 EM1220             ; label INDEX2 terget POS
CON
AND= EM1224 #0           ; label INDEX2 current terget POS
RES MR1201               ; Label index2 moving
CON
SET MR1202               ; Label index2 moving completed
CON
ENDS
LD CR2002                ; Normal ON
LDA DM10870              ; Label INDEX2 command 1
CON
ANDA $003F
CON
STA EM1224               ; label INDEX2 current terget POS
LD CR2002                ; Normal ON
MPS
AND EM1220.0
OUT DM10870.0            ; Label INDEX2 PROG 0
MRD
AND EM1220.1
OUT DM10870.1            ; Label INDEX2 PROG 1
MRD
AND EM1220.2
OUT DM10870.2            ; Label INDEX2 PROG 2
MRD
AND EM1220.3
OUT DM10870.3            ; Label INDEX2 PROG 3
MRD
AND EM1220.4
OUT DM10870.4            ; Label INDEX2 PROG 4
MPP
AND EM1220.5
OUT DM10870.5            ; Label INDEX2 PROG 5
;<h1/>ﾌﾟﾘﾝﾀｰ1 ﾗﾍﾞﾙ発行
STG @MR2600              ; Label printer send
SET @MR2602              ; Label printer sending
CON
ANB @MR2613              ; 1 Side Label start
MPS
ANB MR715                ; Label printer non
JMP @MR2603
MPP
AND MR715                ; Label printer non
JMP @MR2610
STG @MR2603
ANB R5900                ; Label printer1 busy
AND R5901                ; Label printer1 ON-LINE
ANB R5902                ; Label printer1 Print-end
ANB R5903                ; Label printer1 error
AND R5904                ; Label printer1 back-end
AND R5905                ; Label printer1 power
SET @MR2400
CON
JMP @MR2604
STG @MR2604
LD= EM1926 #3            ; Label1 send data Reference NO
LDB MR105                ; Index data shift 
AND<> DM20300 #0         ; UT3-1 Work detection
LD MR105                 ; Index data shift 
AND<> DM20400 #0         ; UT4-1 Work detection
ORL
ANL
LD= EM1926 #4            ; Label1 send data Reference NO
LD R50001                ; AUTO mode
AND @MR4015              ; Label1 error label start
LD R50002                ; STEP mode
AND R4806                ; INDEX chuck 4-1 work existence
ORL
ANL
AND<> DM20400 #0         ; UT4-1 Work detection
ORL
ANL
SET @MR2613              ; 1 Side Label start
CON
DW #1 EM1924             ; Label1 command NO
CON
JMP @MR2605
STG @MR2605
SET R37200               ; LBL1 for PC communication start
CON
JMP @MR2606
STG @MR2606
AND R37201               ; LBL1 for PC communication finis
MPS
ANB R37203               ; LBL1 for PC communication NG
RES R37201               ; LBL1 for PC communication finis
CON
JMP @MR2607
MPP
AND R37203               ; LBL1 for PC communication NG
RES R37201               ; LBL1 for PC communication finis
CON
RES R37203               ; LBL1 for PC communication NG
CON
JMP @MR2605
STG @MR2607
LD= EM1926 #3            ; Label1 send data Reference NO
LDB MR105                ; Index data shift 
AND<> DM20300 #0         ; UT3-1 Work detection
LD MR105                 ; Index data shift 
AND<> DM20400 #0         ; UT4-1 Work detection
ORL
ANL
LD= EM1926 #4            ; Label1 send data Reference NO
LD R50001                ; AUTO mode
AND @MR4015              ; Label1 error label start
LD R50002                ; STEP mode
AND R4806                ; INDEX chuck 4-1 work existence
ORL
ANL
AND<> DM20400 #0         ; UT4-1 Work detection
ORL
ANL
LD R5900                 ; Label printer1 busy
OR R5902                 ; Label printer1 Print-end
ANL
SET MR8900               ; Label pinter1 START
CON
JMP @MR2608
STG @MR2608
JMP @MR2615
STG @MR2615
LD= EM1926 #3            ; Label1 send data Reference NO
LDB MR105                ; Index data shift 
AND<> DM20300 #0         ; UT3-1 Work detection
LD MR105                 ; Index data shift 
AND<> DM20400 #0         ; UT4-1 Work detection
ORL
ANL
LD= EM1926 #4            ; Label1 send data Reference NO
LD R50001                ; AUTO mode
AND @MR4015              ; Label1 error label start
LD R50002                ; STEP mode
AND R4806                ; INDEX chuck 4-1 work existence
ORL
ANL
AND<> DM20400 #0         ; UT4-1 Work detection
ORL
ANL
ANB R5904                ; Label printer1 back-end
RES MR8900               ; Label pinter1 START
CON
JMP @MR2609
STG @MR2609
LD= EM1926 #3            ; Label1 send data Reference NO
LDB MR105                ; Index data shift 
AND<> DM20300 #0         ; UT3-1 Work detection
LD MR105                 ; Index data shift 
AND<> DM20400 #0         ; UT4-1 Work detection
ORL
ANL
LD= EM1926 #4            ; Label1 send data Reference NO
LD R50001                ; AUTO mode
AND @MR4015              ; Label1 error label start
LD R50002                ; STEP mode
AND R4806                ; INDEX chuck 4-1 work existence
ORL
ANL
AND<> DM20400 #0         ; UT4-1 Work detection
ORL
ANL
MPS
LDB R5903                ; Label printer1 error
AND R5902                ; Label printer1 Print-end
ANB R5900                ; Label printer1 busy
ANL
JMP @MR2610
MPP
AND R5903                ; Label printer1 error
RES @MR2602              ; Label printer sending
CON
JMP @MR2612
;Printer NG, Waiting Re-Print
STG @MR2612
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
AND R5901                ; Label printer1 ON-LINE
ANB R5903                ; Label printer1 error
MPS
AND R5900                ; Label printer1 busy
SET @MR2602              ; Label printer sending
CON
JMP @MR2607
MPP
ANB R5900                ; Label printer1 busy
MPS
AND R5904                ; Label printer1 back-end
SET @MR2602              ; Label printer sending
CON
JMP @MR2604
MPP
ANB R5904                ; Label printer1 back-end
MPS
ANB R5902                ; Label printer1 Print-end
SET MR8901               ; Label pinter1 BACK
CON
JMP @MR2614              ; 2 Side Label start
MPP
AND R5902                ; Label printer1 Print-end
SET @MR2602              ; Label printer sending
CON
JMP @MR2610
STG @MR2614              ; 2 Side Label start
AND R5904                ; Label printer1 back-end
RES MR8901               ; Label pinter1 BACK
CON
SET @MR2602              ; Label printer sending
CON
JMP @MR2604
;ここまで
STG @MR2610
MPS
AND MR715                ; Label printer non
TMR @13 #10
CON
AND @T13
JMP @MR2611
MPP
ANB MR715                ; Label printer non
JMP @MR2611
STG @MR2611
RES @MR2400
CON
RES @MR4015              ; Label1 error label start
CON
SET @MR2601              ; Label printer1 send finish
CON
RES @MR2602              ; Label printer sending
CON
ENDS
;<h1/>ﾌﾟﾘﾝﾀｰ2 ﾗﾍﾞﾙ発行
STG @MR4500
SET @MR4502
CON
ANB @MR4514              ; 2 Side Label start
MPS
ANB MR715                ; Label printer non
JMP @MR4503
MPP
AND MR715                ; Label printer non
JMP @MR4510
STG @MR4503
ANB R5908                ; Label printer2 busy
AND R5909                ; Label printer2 ON-LINE
ANB R5910                ; Label printer2 Print-end
ANB R5911                ; Label printer2 error
AND R5912                ; Label printer2 back-end
AND R5913                ; Label printer2 power
SET @MR2401
CON
JMP @MR4504
STG @MR4504
LD= EM1932 #3            ; Label2 send data Reference NO
LDB MR105                ; Index data shift 
AND<> DM20302 #0         ; UT3-2 Work detection
LD MR105                 ; Index data shift 
AND<> DM20402 #0         ; UT4-2 Work detection
ORL
ANL
LD= EM1932 #4            ; Label2 send data Reference NO
LD R50001                ; AUTO mode
AND @MR4115              ; Label2 error label start
LD R50002                ; STEP mode
AND R4807                ; INDEX chuck 4-2 work existence
ORL
ANL
AND<> DM20402 #0         ; UT4-2 Work detection
ORL
ANL
SET @MR4514              ; 2 Side Label start
CON
DW #2 EM1930             ; Label2 command NO
CON
JMP @MR4505
STG @MR4505
SET R37208               ; LBL2 for PC communication start
CON
JMP @MR4506
STG @MR4506
AND R37209               ; LBL2 for PC communication finis
MPS
ANB R37211               ; LBL2 for PC communication NG
RES R37209               ; LBL2 for PC communication finis
CON
JMP @MR4507
MPP
AND R37211               ; LBL2 for PC communication NG
RES R37209               ; LBL2 for PC communication finis
CON
RES R37211               ; LBL2 for PC communication NG
CON
JMP @MR4505
STG @MR4507
LD= EM1932 #3            ; Label2 send data Reference NO
LDB MR105                ; Index data shift 
AND<> DM20302 #0         ; UT3-2 Work detection
LD MR105                 ; Index data shift 
AND<> DM20402 #0         ; UT4-2 Work detection
ORL
ANL
LD= EM1932 #4            ; Label2 send data Reference NO
LD R50001                ; AUTO mode
AND @MR4115              ; Label2 error label start
LD R50002                ; STEP mode
AND R4807                ; INDEX chuck 4-2 work existence
ORL
ANL
AND<> DM20402 #0         ; UT4-2 Work detection
ORL
ANL
LD R5908                 ; Label printer2 busy
OR R5910                 ; Label printer2 Print-end
ANL
SET MR8908               ; Label pinter2 START
CON
JMP @MR4508
STG @MR4508
JMP @MR4515
STG @MR4515
LD= EM1932 #3            ; Label2 send data Reference NO
LDB MR105                ; Index data shift 
AND<> DM20302 #0         ; UT3-2 Work detection
LD MR105                 ; Index data shift 
AND<> DM20402 #0         ; UT4-2 Work detection
ORL
ANL
LD= EM1932 #4            ; Label2 send data Reference NO
LD R50001                ; AUTO mode
AND @MR4115              ; Label2 error label start
LD R50002                ; STEP mode
AND R4807                ; INDEX chuck 4-2 work existence
ORL
ANL
AND<> DM20402 #0         ; UT4-2 Work detection
ORL
ANL
ANB R5912                ; Label printer2 back-end
RES MR8908               ; Label pinter2 START
CON
JMP @MR4509
STG @MR4509
LD= EM1932 #3            ; Label2 send data Reference NO
LDB MR105                ; Index data shift 
AND<> DM20302 #0         ; UT3-2 Work detection
LD MR105                 ; Index data shift 
AND<> DM20402 #0         ; UT4-2 Work detection
ORL
ANL
LD= EM1932 #4            ; Label2 send data Reference NO
LD R50001                ; AUTO mode
AND @MR4115              ; Label2 error label start
LD R50002                ; STEP mode
AND R4807                ; INDEX chuck 4-2 work existence
ORL
ANL
AND<> DM20402 #0         ; UT4-2 Work detection
ORL
ANL
MPS
LDB R5911                ; Label printer2 error
AND R5910                ; Label printer2 Print-end
ANB R5908                ; Label printer2 busy
ANL
JMP @MR4510
MPP
AND R5911                ; Label printer2 error
RES @MR4502
CON
JMP @MR4512
;Printer NG, Waiting Re-Print
STG @MR4512
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
AND R5909                ; Label printer2 ON-LINE
ANB R5911                ; Label printer2 error
MPS
AND R5908                ; Label printer2 busy
SET @MR4502
CON
JMP @MR4507
MPP
ANB R5908                ; Label printer2 busy
MPS
AND R5912                ; Label printer2 back-end
SET @MR4502
CON
JMP @MR4504
MPP
ANB R5912                ; Label printer2 back-end
MPS
ANB R5910                ; Label printer2 Print-end
SET MR8909               ; Label pinter2 BACK
CON
JMP @MR4513
MPP
AND R5910                ; Label printer2 Print-end
SET @MR4502
CON
JMP @MR4510
STG @MR4513
AND R5912                ; Label printer2 back-end
RES MR8909               ; Label pinter2 BACK
CON
SET @MR4502
CON
JMP @MR4504
;ここまで
STG @MR4510
MPS
AND MR715                ; Label printer non
TMR @11 #10
CON
AND @T11
JMP @MR4511
MPP
ANB MR715                ; Label printer non
JMP @MR4511
STG @MR4511
RES @MR2401
CON
RES @MR4115              ; Label2 error label start
CON
SET @MR4501              ; Label printer2 send finish
CON
RES @MR4502
CON
ENDS
;<h1/>ﾗﾍﾞﾙ1　受取動作
STG @MR3000              ; Label1 recive request
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
AND= @MR3300 #0          ; label1 paste request
MPS
ANB @MR3415              ; Label1 recive finish
SET @MR3214              ; rciving from　label printer
CON
JMP @MR3001
MPP
AND @MR3415              ; Label1 recive finish
SET @MR3214              ; rciving from　label printer
CON
JMP @MR3100
STG @MR3001
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
RES MR8000               ; Label chuck1 close
CON
SET MR8001               ; Label chuck1 open
CON
ANB R5000                ; Label chuck1-1 close limit
AND R5001                ; Label chuck1-1 open limit
ANB R5002                ; Label chuck1-2 close limit
AND R5003                ; Label chuck1-2 open limit
JMP @MR3002
STG @MR3002
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
RES MR8012               ; Nozzle1 forward
CON
SET MR8013               ; Nozzle1 backward
CON
RES MR8010               ; Label chuck1 forward
CON
SET MR8011               ; Label chuck1 backward
CON
JMP @MR3003
STG @MR3003
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
ANB R5100                ; Nozzle1 forward limit
AND R5101                ; Nozzle1 backward limit
ANB R5014                ; Label chuck1 forward limit
AND R5015                ; Label chuck1 backward limit
JMP @MR3004
STG @MR3004
SET @MR801               ; Pause dissable2
CON
AND>= EM1190 #1          ; Label Index1 recive setting POS
AND<= EM1190 #10         ; Label Index1 recive setting POS
LDA EM1190               ; Label Index1 recive setting POS
CON
STA EM1210               ; label INDEX1 terget POS
CON
JMP @MR3005
STG @MR3005
ANB MR1102               ; Index moving completed
SET MR1100               ; Index move request
CON
JMP @MR3006
STG @MR3006
ANB MR4501               ; RB4 label1 recive moving complet
MPS
AND<> EM1212 #5          ; label INDEX1 current POS
RES MR8014               ; Nozzle rotation1 forward
CON
SET MR8015               ; Nozzle rotation1 backward
CON
MPS
LDB R5102                ; Nozzle rotation1 forward limit
AND R5103                ; Nozzle rotation1 backward limit
ANL
SET MR4500               ; RB4 label1 recive moving request
CON
JMP @MR3007
MPP
AND R46901               ; Nozuru rotation1 backward err
JMP @MR3010
MPP
AND= EM1212 #5           ; label INDEX1 current POS
JMP @MR3008
STG @MR3010
AND MR1102               ; Index moving completed
RES MR1102               ; Index moving completed
CON
RES @MR801               ; Pause dissable2
CON
JMP @MR3011
STG @MR3011
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
JMP @MR3004
STG @MR3007
AND MR4501               ; RB4 label1 recive moving complet
RES MR4501               ; RB4 label1 recive moving complet
CON
JMP @MR3008
STG @MR3008
AND MR1102               ; Index moving completed
RES MR1102               ; Index moving completed
CON
JMP @MR3009
STG @MR3009
RES MR8015               ; Nozzle rotation1 backward
CON
SET MR8014               ; Nozzle rotation1 forward
CON
MPS
LD R5102                 ; Nozzle rotation1 forward limit
ANB R5103                ; Nozzle rotation1 backward limit
ANL
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
RES @MR801               ; Pause dissable2
CON
JMP @MR3100
MPP
AND R46900               ; Nozuru rotation1 forward err
RES @MR801               ; Pause dissable2
CON
JMP @MR3012
STG @MR3012
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
SET @MR801               ; Pause dissable2
CON
JMP @MR3009
STG @MR3100
RES @MR3415              ; Label1 recive finish
CON
ANB @MR2602              ; Label printer sending
JMP @MR3101
STG @MR3101
SET @MR801               ; Pause dissable2
CON
RES MR8013               ; Nozzle1 backward
CON
SET MR8012               ; Nozzle1 forward
CON
JMP @MR3102
STG @MR3102
MPS
LDB R5101                ; Nozzle1 backward limit
AND R5100                ; Nozzle1 forward limit
ANL
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR3103
MPP
AND R46415               ; Label nozuru1 backward error
SET MR8013               ; Nozzle1 backward
CON
RES MR8012               ; Nozzle1 forward
CON
RES @MR801               ; Pause dissable2
CON
JMP @MR3104
STG @MR3104
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
JMP @MR3101
STG @MR3103
MPS
ANB MR715                ; Label printer non
RES MR8600               ; Label Nozuru1 absorp rerease 
CON
SET MR8601               ; Label Nozuru1 absorp  
CON
RES MR8011               ; Label chuck1 backward
CON
SET MR8010               ; Label chuck1 forward
CON
JMP @MR3105
MPP
AND MR715                ; Label printer non
RES MR8011               ; Label chuck1 backward
CON
SET MR8010               ; Label chuck1 forward
CON
JMP @MR3105
STG @MR3105
MPS
LDB R5015                ; Label chuck1 backward limit
AND R5014                ; Label chuck1 forward limit
ANL
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR3106
MPP
AND R46412               ; Label chuck1 forward error
SET MR8013               ; Nozzle1 backward
CON
RES MR8012               ; Nozzle1 forward
CON
SET MR8011               ; Label chuck1 backward
CON
RES MR8010               ; Label chuck1 forward
CON
RES @MR801               ; Pause dissable2
CON
JMP @MR3104
STG @MR3106
RES MR8001               ; Label chuck1 open
CON
SET MR8000               ; Label chuck1 close
CON
JMP @MR3107
STG @MR3107
MPS
LDB R5001                ; Label chuck1-1 open limit
AND R5000                ; Label chuck1-1 close limit
ANB R5003                ; Label chuck1-2 open limit
AND R5002                ; Label chuck1-2 close limit
ANL
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR3108
MPP
LD R46401                ; Label chuck1-1 close error
OR R46403                ; Label chuck1-2 close error
ANL
SET @MR3112
CON
JMP @MR3108
STG @MR3108
LDB R5600                ; Label pasting1 absorption 1
OR MR715                 ; Label printer non
ANL
MPS
LD R5700                 ; Label nozzle1 rabel detection
AND R5601                ; Label pasting1 absorption 2
OR CR2002                ; Normal ON
ANL
JMP @MR3109
MPP
LDB R5700                ; Label nozzle1 rabel detection
ORB R5601                ; Label pasting1 absorption 2
ANL
TMR @21 #50
CON
AND @T21
ANB CR2002               ; Normal ON
JMP @MR3109
STG @MR3109
SET MR8008               ; Label1 stage air blow open
CON
RES MR8012               ; Nozzle1 forward
CON
SET MR8013               ; Nozzle1 backward
CON
JMP @MR3110
STG @MR3110
ANB R5100                ; Nozzle1 forward limit
SET MR8901               ; Label pinter1 BACK
CON
ANB R5902                ; Label printer1 Print-end
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
RES @MR3214              ; rciving from　label printer
CON
RES @MR801               ; Pause dissable2
CON
JMP @MR3111
STG @MR3111
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
RES MR8901               ; Label pinter1 BACK
CON
RES MR8014               ; Nozzle rotation1 forward
CON
SET MR8015               ; Nozzle rotation1 backward
CON
JMP @MR3200
STG @MR3200
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
ANB R5102                ; Nozzle rotation1 forward limit
AND R5103                ; Nozzle rotation1 backward limit
ANB R5100                ; Nozzle1 forward limit
AND R5101                ; Nozzle1 backward limit
RES MR8008               ; Label1 stage air blow open
CON
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR3207
STG @MR3207
MPS
ANB LR1000               ; Parameter Label Absortion
MPS
ANB MR715                ; Label printer non
MPS
LD R5700                 ; Label nozzle1 rabel detection
AND R5601                ; Label pasting1 absorption 2
ANL
SET @MR3213              ; Label1 recive label OK
CON
JMP @MR3201
MPP
LDB R5700                ; Label nozzle1 rabel detection
ORB R5601                ; Label pasting1 absorption 2
OR @MR3112
ANL
TMR @22 #80
CON
AND @T22
SET @MR4000              ; Label1 recive sbsorption error
CON
RES @MR3112
CON
JMP @MR3115
MPP
AND MR715                ; Label printer non
RES @MR3112
CON
SET @MR3213              ; Label1 recive label OK
CON
JMP @MR3201
MPP
AND LR1000               ; Parameter Label Absortion
MPS
LD R5700                 ; Label nozzle1 rabel detection
AND R5601                ; Label pasting1 absorption 2
ANB @MR3112
ANL
SET @MR3213              ; Label1 recive label OK
CON
JMP @MR3201
MRD
ANB R5700                ; Label nozzle1 rabel detection
TMR @19 #80
CON
AND @T19
SET @MR4000              ; Label1 recive sbsorption error
CON
RES @MR3112
CON
JMP @MR3115
MRD
ANB R5601                ; Label pasting1 absorption 2
TMR @20 #80
CON
AND @T20
SET @MR4010
CON
SET @MR4000              ; Label1 recive sbsorption error
CON
RES @MR3112
CON
JMP @MR3115
MPP
AND @MR3112
TMR @23 #80
CON
AND @T23
SET @MR4011
CON
SET @MR4000              ; Label1 recive sbsorption error
CON
RES @MR3112
CON
JMP @MR3115
;吸着異常処理
STG @MR3115
AND @MR4001              ; Label1 recive sbsorption finish
RES @MR4001              ; Label1 recive sbsorption finish
CON
ENDS
;吸着異常処理ここまで
STG @MR3201
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
AND>= EM1192 #11         ; Label Index1 paste setting POS
AND<= EM1192 #20         ; Label Index1 paste setting POS
LDA EM1192               ; Label Index1 paste setting POS
CON
STA EM1210               ; label INDEX1 terget POS
CON
JMP @MR3202
STG @MR3202
ANB MR1102               ; Index moving completed
SET @MR801               ; Pause dissable2
CON
SET MR1100               ; Index move request
CON
JMP @MR3203
STG @MR3203
ANB MR4509               ; RB4 label1 paste moving complet
SET MR4508               ; RB4 label1 paste moving request
CON
JMP @MR3204
STG @MR3204
AND MR4509               ; RB4 label1 paste moving complet
RES MR4509               ; RB4 label1 paste moving complet
CON
JMP @MR3205
STG @MR3205
AND MR1102               ; Index moving completed
RES @MR801               ; Pause dissable2
CON
RES MR1102               ; Index moving completed
CON
JMP @MR3206
STG @MR3206
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
SET @MR3215              ; label1 recive finish
CON
ENDS
;<h1/>ﾗﾍﾞﾙ1　貼付動作
;呼び出し元Pack中の為Pause禁止
STG @MR3300              ; label1 paste request
AND= @MR3000 #0          ; Label1 recive request
AND= @MR3100 #0
AND= @MR3200 #0
AND= @MR3400 #0          ; Label1 recive request
JMP @MR3301
STG @MR3301
MPS
LD>= EM1212 #11          ; label INDEX1 current POS
AND<= EM1212 #20         ; label INDEX1 current POS
AND= EM1307 #10          ; RB4 temp paste1 current POS
AND T2109                ; RB4 Temp paste POS10(Pasting)
AND R5103                ; Nozzle rotation1 backward limit
ANL
JMP @MR3302
MPP
LD>= EM1212 #1           ; label INDEX1 current POS
AND<= EM1212 #10         ; label INDEX1 current POS
AND= EM1307 #5           ; RB4 temp paste1 current POS
AND T2104                ; RB4 Temp paste POS5(Recive)
AND R5103                ; Nozzle rotation1 backward limit
ANL
LDA EM1192               ; Label Index1 paste setting POS
CON
STA EM1210               ; label INDEX1 terget POS
CON
JMP @MR3313
STG @MR3313
ANB MR1102               ; Index moving completed
ANB MR4509               ; RB4 label1 paste moving complet
SET @MR801               ; Pause dissable2
CON
SET MR1100               ; Index move request
CON
SET MR4508               ; RB4 label1 paste moving request
CON
JMP @MR3413
STG @MR3413
AND MR4509               ; RB4 label1 paste moving complet
AND MR1102               ; Index moving completed
RES MR4509               ; RB4 label1 paste moving complet
CON
RES MR1102               ; Index moving completed
CON
RES @MR801               ; Pause dissable2
CON
JMP @MR3301
STG @MR3302
SET @MR801               ; Pause dissable2
CON
RES MR8013               ; Nozzle1 backward
CON
SET MR8012               ; Nozzle1 forward
CON
JMP @MR3303
STG @MR3303
RES MR8000               ; Label chuck1 close
CON
SET MR8001               ; Label chuck1 open
CON
MPS
LD R5100                 ; Nozzle1 forward limit
ANB R5101                ; Nozzle1 backward limit
ANL
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR3304
MPP
TMR @24 #50
CON
AND @T24
ANB R5101                ; Nozzle1 backward limit
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR3304
STG @MR3304
SET @MR3314              ; Label label1 forward finish
CON
RES MR8601               ; Label Nozuru1 absorp  
CON
SET MR8600               ; Label Nozuru1 absorp rerease 
CON
RES MR8000               ; Label chuck1 close
CON
SET MR8001               ; Label chuck1 open
CON
JMP @MR3307
STG @MR3307
MPS
LDB R5000                ; Label chuck1-1 close limit
AND R5001                ; Label chuck1-1 open limit
ANB R5002                ; Label chuck1-2 close limit
AND R5003                ; Label chuck1-2 open limit
ANL
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR3308
MPP
LD R46400                ; Label chuck1-1 open error
OR R46402                ; Label chuck1-2 open error
ANL
JMP @MR3308
STG @MR3308
RES MR8010               ; Label chuck1 forward
CON
SET MR8011               ; Label chuck1 backward
CON
JMP @MR3309
STG @MR3309
LDB R5014                ; Label chuck1 forward limit
AND R5015                ; Label chuck1 backward limit
OR R46413                ; Label chuck1 backward error
ANL
RES @MR801               ; Pause dissable2
CON
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR3310
STG @MR3310
LD R5600                 ; Label pasting1 absorption 1
ORB R5600                ; Label pasting1 absorption 1
ANL
ANB R5601                ; Label pasting1 absorption 2
RES MR8012               ; Nozzle1 forward
CON
SET MR8013               ; Nozzle1 backward
CON
JMP @MR3311
STG @MR3311
ANB R5100                ; Nozzle1 forward limit
AND R5101                ; Nozzle1 backward limit
RES @MR801               ; Pause dissable2
CON
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR3312
STG @MR3312
SET @MR3315              ; Label1 paste finish
CON
ENDS
;<h1/>ﾗﾍﾞﾙ1　受取準備動作
STG @MR3400              ; Label1 recive request
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
MPS
LD= @MR3000 #0           ; Label1 recive request
AND= @MR3100 #0
AND= @MR3200 #0
AND= @MR3300 #0          ; label1 paste request
ANL
SET @MR3414
CON
JMP @MR3401
MPP
LD<> @MR3000 #0          ; Label1 recive request
OR<> @MR3100 #0
OR<> @MR3200 #0
ANL
ENDS
STG @MR3401
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
RES MR8000               ; Label chuck1 close
CON
SET MR8001               ; Label chuck1 open
CON
ANB R5000                ; Label chuck1-1 close limit
AND R5001                ; Label chuck1-1 open limit
ANB R5002                ; Label chuck1-2 close limit
AND R5003                ; Label chuck1-2 open limit
JMP @MR3402
STG @MR3402
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
RES MR8012               ; Nozzle1 forward
CON
SET MR8013               ; Nozzle1 backward
CON
RES MR8010               ; Label chuck1 forward
CON
SET MR8011               ; Label chuck1 backward
CON
JMP @MR3403
STG @MR3403
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
ANB R5100                ; Nozzle1 forward limit
AND R5101                ; Nozzle1 backward limit
ANB R5014                ; Label chuck1 forward limit
AND R5015                ; Label chuck1 backward limit
JMP @MR3404
STG @MR3404
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
AND>= EM1190 #1          ; Label Index1 recive setting POS
AND<= EM1190 #10         ; Label Index1 recive setting POS
LDA EM1190               ; Label Index1 recive setting POS
CON
STA EM1210               ; label INDEX1 terget POS
CON
JMP @MR3405
STG @MR3405
ANB MR1102               ; Index moving completed
SET @MR801               ; Pause dissable2
CON
SET MR1100               ; Index move request
CON
JMP @MR3406
STG @MR3406
ANB MR4501               ; RB4 label1 recive moving complet
SET MR4500               ; RB4 label1 recive moving request
CON
JMP @MR3407
STG @MR3407
AND<= DM10524 #7000      ; RB4 Current POS
RES MR8015               ; Nozzle rotation1 backward
CON
SET MR8014               ; Nozzle rotation1 forward
CON
AND MR4501               ; RB4 label1 recive moving complet
RES MR4501               ; RB4 label1 recive moving complet
CON
JMP @MR3408
STG @MR3408
MPS
LD R5102                 ; Nozzle rotation1 forward limit
ANB R5103                ; Nozzle rotation1 backward limit
ANL
JMP @MR3409
MPP
AND R46900               ; Nozuru rotation1 forward err
JMP @MR3409
STG @MR3409
AND MR1102               ; Index moving completed
RES @MR801               ; Pause dissable2
CON
RES MR1102               ; Index moving completed
CON
JMP @MR3410
STG @MR3410
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
SET @MR3415              ; Label1 recive finish
CON
RES @MR3414
CON
ENDS
;<h1/>ﾗﾍﾞﾙ2　受取動作
STG @MR3500              ; Label2 recive request
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
AND= @MR3800 #0          ; label2 recive request
MPS
ANB @MR3915              ; Label2 ready for recive finish
SET @MR3714              ; reciving from label printer2
CON
JMP @MR3501
MPP
AND @MR3915              ; Label2 ready for recive finish
SET @MR3714              ; reciving from label printer2
CON
JMP @MR3600
STG @MR3501
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
RES MR8002               ; Label chuck2 close
CON
SET MR8003               ; Label chuck2 open
CON
ANB R5004                ; Label chuck2-1 close limit
AND R5005                ; Label chuck2-1 open limit
ANB R5006                ; Label chuck2-2 close limit
AND R5007                ; Label chuck2-2 open limit
JMP @MR3502
STG @MR3502
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
RES MR8104               ; Nozzle2 forward
CON
SET MR8105               ; Nozzle2 backward
CON
RES MR8102               ; Label chuck2 forward
CON
SET MR8103               ; Label chuck2 backward
CON
JMP @MR3503
STG @MR3503
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
ANB R5108                ; Nozzle2 forward limit
AND R5109                ; Nozzle2 backward limit
ANB R5106                ; Label chuck2 forward limit
AND R5107                ; Label chuck2 backward limit
JMP @MR3504
STG @MR3504
SET @MR802
CON
AND>= EM1194 #1          ; Label Index2 recive setting POS
AND<= EM1194 #10         ; Label Index2 recive setting POS
LDA EM1194               ; Label Index2 recive setting POS
CON
STA EM1220               ; label INDEX2 terget POS
CON
JMP @MR3505
STG @MR3505
ANB MR1202               ; Label index2 moving completed
SET MR1200               ; Label index2 move request
CON
JMP @MR3506
STG @MR3506
ANB MR4601               ; RB5 label1 recive moving complet
MPS
AND<> EM1222 #5          ; label INDEX2 current POS
RES MR8106               ; Nozzle rotation2 forward
CON
SET MR8107               ; Nozzle rotation2 backward
CON
MPS
LDB R5110                ; Nozzle rotation2 forward limit
AND R5111                ; Nozzle rotation2 backward limit
ANL
SET MR4600               ; RB5 label1 recive moving request
CON
JMP @MR3507
MPP
AND R46907               ; Nozuru NOZURU rota2 backward err
JMP @MR3510
MPP
AND= EM1222 #5           ; label INDEX2 current POS
JMP @MR3508
STG @MR3510
AND MR1202               ; Label index2 moving completed
RES MR1202               ; Label index2 moving completed
CON
RES @MR802
CON
JMP @MR3511
STG @MR3511
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
JMP @MR3504
STG @MR3507
AND MR4601               ; RB5 label1 recive moving complet
RES MR4601               ; RB5 label1 recive moving complet
CON
JMP @MR3508
STG @MR3508
AND MR1202               ; Label index2 moving completed
RES MR1202               ; Label index2 moving completed
CON
JMP @MR3509
STG @MR3509
RES MR8107               ; Nozzle rotation2 backward
CON
SET MR8106               ; Nozzle rotation2 forward
CON
MPS
LD R5110                 ; Nozzle rotation2 forward limit
ANB R5111                ; Nozzle rotation2 backward limit
ANL
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
RES @MR802
CON
JMP @MR3600
MPP
AND R46906               ; Nozuru NOZURU rota2 forward err
RES @MR802
CON
JMP @MR3512
STG @MR3512
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
SET @MR802
CON
JMP @MR3509
STG @MR3600
RES @MR3915              ; Label2 ready for recive finish
CON
ANB @MR4502
MPS
ANB MR715                ; Label printer non
JMP @MR3601
MPP
AND MR715                ; Label printer non
JMP @MR3601
STG @MR3601
SET @MR802
CON
RES MR8105               ; Nozzle2 backward
CON
SET MR8104               ; Nozzle2 forward
CON
JMP @MR3602
STG @MR3602
MPS
LDB R5109                ; Nozzle2 backward limit
AND R5108                ; Nozzle2 forward limit
ANL
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR3603
MPP
AND R46904               ; Nozuru NOZURU2 forward err
SET MR8105               ; Nozzle2 backward
CON
RES MR8104               ; Nozzle2 forward
CON
RES @MR802
CON
JMP @MR3604
STG @MR3604
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
JMP @MR3601
STG @MR3603
MPS
ANB MR715                ; Label printer non
RES MR8602               ; Label Nozuru2 absorp rerease 
CON
SET MR8603               ; Label Nozuru2 absorp  
CON
RES MR8103               ; Label chuck2 backward
CON
SET MR8102               ; Label chuck2 forward
CON
JMP @MR3605
MPP
AND MR715                ; Label printer non
RES MR8103               ; Label chuck2 backward
CON
SET MR8102               ; Label chuck2 forward
CON
JMP @MR3605
STG @MR3605
MPS
LDB R5107                ; Label chuck2 backward limit
AND R5106                ; Label chuck2 forward limit
ANL
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR3606
MPP
AND R46902               ; Nozuru Label chuck2 forward err
SET MR8105               ; Nozzle2 backward
CON
RES MR8104               ; Nozzle2 forward
CON
SET MR8103               ; Label chuck2 backward
CON
RES MR8102               ; Label chuck2 forward
CON
RES @MR802
CON
JMP @MR3604
STG @MR3606
RES MR8003               ; Label chuck2 open
CON
SET MR8002               ; Label chuck2 close
CON
JMP @MR3607
STG @MR3607
MPS
LD R5004                 ; Label chuck2-1 close limit
ANB R5005                ; Label chuck2-1 open limit
AND R5006                ; Label chuck2-2 close limit
ANB R5007                ; Label chuck2-2 open limit
ANL
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR3608
MPP
LD R46405                ; Label chuck2-1 close error
OR R46407                ; Label chuck2-2 close error
ANL
SET @MR3612
CON
JMP @MR3608
STG @MR3608
LDB R5602                ; Label pasting2 absorption 1
OR MR715                 ; Label printer non
ANL
MPS
LD R5701                 ; Label nozzle2 rabel detection
AND R5603                ; Label pasting2 absorption 2
OR CR2002                ; Normal ON
ANL
JMP @MR3609
MPP
LDB R5701                ; Label nozzle2 rabel detection
ORB R5603                ; Label pasting2 absorption 2
ANL
TMR @26 #50
CON
AND @T26
ANB CR2002               ; Normal ON
JMP @MR3609
STG @MR3609
SET MR8100               ; Label2 stage air blow open
CON
RES MR8104               ; Nozzle2 forward
CON
SET MR8105               ; Nozzle2 backward
CON
JMP @MR3610
STG @MR3610
ANB R5108                ; Nozzle2 forward limit
SET MR8909               ; Label pinter2 BACK
CON
ANB R5910                ; Label printer2 Print-end
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
RES @MR802
CON
RES @MR3714              ; reciving from label printer2
CON
JMP @MR3611
STG @MR3611
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
RES MR8909               ; Label pinter2 BACK
CON
RES MR8106               ; Nozzle rotation2 forward
CON
SET MR8107               ; Nozzle rotation2 backward
CON
JMP @MR3700
STG @MR3700
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
ANB R5110                ; Nozzle rotation2 forward limit
AND R5111                ; Nozzle rotation2 backward limit
ANB R5108                ; Nozzle2 forward limit
AND R5109                ; Nozzle2 backward limit
RES MR8100               ; Label2 stage air blow open
CON
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR3707
STG @MR3707
MPS
ANB LR1000               ; Parameter Label Absortion
MPS
ANB MR715                ; Label printer non
MPS
LD R5701                 ; Label nozzle2 rabel detection
AND R5603                ; Label pasting2 absorption 2
ANL
SET @MR3713              ; Label2 recive label OK
CON
JMP @MR3701
MPP
LDB R5701                ; Label nozzle2 rabel detection
ORB R5603                ; Label pasting2 absorption 2
OR @MR3612
ANL
TMR @27 #30
CON
AND @T27
SET @MR4100              ; Label2 recive sbsorption error
CON
RES @MR3612
CON
JMP @MR3615
MPP
AND MR715                ; Label printer non
RES @MR3612
CON
SET @MR3713              ; Label2 recive label OK
CON
JMP @MR3701
MPP
AND LR1000               ; Parameter Label Absortion
MPS
LD R5701                 ; Label nozzle2 rabel detection
AND R5603                ; Label pasting2 absorption 2
ANB @MR3612
ANL
SET @MR3713              ; Label2 recive label OK
CON
JMP @MR3701
MRD
ANB R5701                ; Label nozzle2 rabel detection
TMR @28 #30
CON
AND @T28
SET @MR4100              ; Label2 recive sbsorption error
CON
RES @MR3612
CON
JMP @MR3615
MRD
ANB R5603                ; Label pasting2 absorption 2
TMR @31 #30
CON
AND @T31
SET @MR4110
CON
SET @MR4100              ; Label2 recive sbsorption error
CON
RES @MR3612
CON
JMP @MR3615
MPP
AND @MR3612
TMR @32 #30
CON
AND @T32
SET @MR4111
CON
SET @MR4100              ; Label2 recive sbsorption error
CON
RES @MR3612
CON
JMP @MR3615
;吸着異常処理
STG @MR3615
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
AND @MR4101              ; Label2 recive sbsorption finish
RES @MR4101              ; Label2 recive sbsorption finish
CON
ENDS
;吸着異常処理ここまで
STG @MR3701
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
AND>= EM1196 #11         ; Label Index2 paste setting POS
AND<= EM1196 #20         ; Label Index2 paste setting POS
LDA EM1196               ; Label Index2 paste setting POS
CON
STA EM1220               ; label INDEX2 terget POS
CON
JMP @MR3702
STG @MR3702
ANB MR1202               ; Label index2 moving completed
SET @MR802
CON
SET MR1200               ; Label index2 move request
CON
JMP @MR3703
STG @MR3703
ANB MR4609               ; RB5 label1 paste moving complet
SET MR4608               ; RB5 label1 paste moving request
CON
JMP @MR3704
STG @MR3704
AND MR4609               ; RB5 label1 paste moving complet
RES MR4609               ; RB5 label1 paste moving complet
CON
JMP @MR3705
STG @MR3705
AND MR1202               ; Label index2 moving completed
RES @MR802
CON
RES MR1202               ; Label index2 moving completed
CON
JMP @MR3706
STG @MR3706
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
SET @MR3715              ; label2 recive finish
CON
ENDS
;<h1/>ﾗﾍﾞﾙ2　貼付動作
;呼び出し元Pack中の為,Pause禁止
STG @MR3800              ; label2 recive request
AND= @MR3500 #0          ; Label2 recive request
AND= @MR3600 #0
AND= @MR3700 #0
AND= @MR3900 #0          ; Label2 ready for recive request 
JMP @MR3801
STG @MR3801
MPS
LD>= EM1222 #11          ; label INDEX2 current POS
AND<= EM1222 #20         ; label INDEX2 current POS
AND= EM1309 #10          ; RB5 temp paste2 current POS
AND T2149                ; RB5 Temp paste POS10(Pasting)
AND R5111                ; Nozzle rotation2 backward limit
ANL
JMP @MR3802
MPP
LD>= EM1222 #1           ; label INDEX2 current POS
AND<= EM1222 #10         ; label INDEX2 current POS
AND= EM1309 #5           ; RB5 temp paste2 current POS
AND T2144                ; RB5 Temp paste POS5(Recive)
AND R5111                ; Nozzle rotation2 backward limit
ANL
LDA EM1196               ; Label Index2 paste setting POS
CON
STA EM1220               ; label INDEX2 terget POS
CON
JMP @MR3813
STG @MR3813
ANB MR1202               ; Label index2 moving completed
ANB MR4609               ; RB5 label1 paste moving complet
SET @MR802
CON
SET MR1200               ; Label index2 move request
CON
SET MR4608               ; RB5 label1 paste moving request
CON
JMP @MR3913
STG @MR3913
AND MR4609               ; RB5 label1 paste moving complet
AND MR1202               ; Label index2 moving completed
RES MR4609               ; RB5 label1 paste moving complet
CON
RES MR1202               ; Label index2 moving completed
CON
RES @MR802
CON
JMP @MR3801
STG @MR3802
SET @MR802
CON
RES MR8105               ; Nozzle2 backward
CON
SET MR8104               ; Nozzle2 forward
CON
JMP @MR3803
STG @MR3803
RES MR8002               ; Label chuck2 close
CON
SET MR8003               ; Label chuck2 open
CON
MPS
LD R5108                 ; Nozzle2 forward limit
ANB R5109                ; Nozzle2 backward limit
ANL
JMP @MR3804
MPP
TMR @29 #50
CON
AND @T29
ANB R5109                ; Nozzle2 backward limit
JMP @MR3804
STG @MR3804
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
SET @MR3814              ; Label nozuru2 forward finish
CON
RES MR8603               ; Label Nozuru2 absorp  
CON
SET MR8602               ; Label Nozuru2 absorp rerease 
CON
RES MR8002               ; Label chuck2 close
CON
SET MR8003               ; Label chuck2 open
CON
JMP @MR3807
STG @MR3807
MPS
LDB R5004                ; Label chuck2-1 close limit
AND R5005                ; Label chuck2-1 open limit
ANB R5006                ; Label chuck2-2 close limit
AND R5007                ; Label chuck2-2 open limit
ANL
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR3808
MPP
LD R46404                ; Label chuck2-1 open error
OR R46406                ; Label chuck2-2 open error
ANL
JMP @MR3808
STG @MR3808
RES MR8102               ; Label chuck2 forward
CON
SET MR8103               ; Label chuck2 backward
CON
JMP @MR3809
STG @MR3809
LDB R5106                ; Label chuck2 forward limit
AND R5107                ; Label chuck2 backward limit
OR R46903                ; Nozuru Label chuck2 backward err
ANL
RES @MR802
CON
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR3810
STG @MR3810
LD R5602                 ; Label pasting2 absorption 1
ORB R5602                ; Label pasting2 absorption 1
ANL
ANB R5603                ; Label pasting2 absorption 2
RES MR8104               ; Nozzle2 forward
CON
SET MR8105               ; Nozzle2 backward
CON
JMP @MR3811
STG @MR3811
ANB R5108                ; Nozzle2 forward limit
AND R5109                ; Nozzle2 backward limit
RES @MR802
CON
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR3812
STG @MR3812
SET @MR3815              ; Label2 paste finish
CON
ENDS
;<h1/>ﾗﾍﾞﾙ2　受取準備動作
STG @MR3900              ; Label2 ready for recive request 
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
MPS
LD= @MR3500 #0           ; Label2 recive request
AND= @MR3600 #0
AND= @MR3700 #0
AND= @MR3800 #0          ; label2 recive request
ANL
SET @MR3914
CON
JMP @MR3901
MPP
LD<> @MR3500 #0          ; Label2 recive request
OR<> @MR3600 #0
OR<> @MR3700 #0
ANL
ENDS
STG @MR3901
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
RES MR8002               ; Label chuck2 close
CON
SET MR8003               ; Label chuck2 open
CON
ANB R5004                ; Label chuck2-1 close limit
AND R5005                ; Label chuck2-1 open limit
ANB R5006                ; Label chuck2-2 close limit
AND R5007                ; Label chuck2-2 open limit
JMP @MR3902
STG @MR3902
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
RES MR8104               ; Nozzle2 forward
CON
SET MR8105               ; Nozzle2 backward
CON
RES MR8102               ; Label chuck2 forward
CON
SET MR8103               ; Label chuck2 backward
CON
JMP @MR3903
STG @MR3903
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
ANB R5108                ; Nozzle2 forward limit
AND R5109                ; Nozzle2 backward limit
ANB R5106                ; Label chuck2 forward limit
AND R5107                ; Label chuck2 backward limit
JMP @MR3904
STG @MR3904
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
AND>= EM1194 #1          ; Label Index2 recive setting POS
AND<= EM1194 #10         ; Label Index2 recive setting POS
LDA EM1194               ; Label Index2 recive setting POS
CON
STA EM1220               ; label INDEX2 terget POS
CON
JMP @MR3905
STG @MR3905
ANB MR1202               ; Label index2 moving completed
SET @MR802
CON
SET MR1200               ; Label index2 move request
CON
JMP @MR3906
STG @MR3906
ANB MR4601               ; RB5 label1 recive moving complet
SET MR4600               ; RB5 label1 recive moving request
CON
JMP @MR3907
STG @MR3907
AND<= DM10532 #7000      ; RB5 Current POS
RES MR8107               ; Nozzle rotation2 backward
CON
SET MR8106               ; Nozzle rotation2 forward
CON
AND MR4601               ; RB5 label1 recive moving complet
RES MR4601               ; RB5 label1 recive moving complet
CON
JMP @MR3908
STG @MR3908
MPS
LD R5110                 ; Nozzle rotation2 forward limit
ANB R5111                ; Nozzle rotation2 backward limit
ANL
JMP @MR3909
MPP
AND R46906               ; Nozuru NOZURU rota2 forward err
JMP @MR3909
STG @MR3909
AND MR1202               ; Label index2 moving completed
RES @MR802
CON
RES MR1202               ; Label index2 moving completed
CON
JMP @MR3910
STG @MR3910
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
SET @MR3915              ; Label2 ready for recive finish
CON
RES @MR3914
CON
ENDS
;<h1/>ﾗﾍﾞﾙ仮貼り1 受取時吸着異常処理
STG @MR4000              ; Label1 recive sbsorption error
SET @MR4002              ; Label1 recive sbsorption finish
CON
JMP @MR4003
STG @MR4003
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
RES MR8000               ; Label chuck1 close
CON
SET MR8001               ; Label chuck1 open
CON
ANB R5000                ; Label chuck1-1 close limit
AND R5001                ; Label chuck1-1 open limit
ANB R5002                ; Label chuck1-2 close limit
AND R5003                ; Label chuck1-2 open limit
JMP @MR4004
STG @MR4004
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
RES MR8012               ; Nozzle1 forward
CON
SET MR8013               ; Nozzle1 backward
CON
RES MR8010               ; Label chuck1 forward
CON
SET MR8011               ; Label chuck1 backward
CON
JMP @MR4005
STG @MR4005
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
ANB R5100                ; Nozzle1 forward limit
AND R5101                ; Nozzle1 backward limit
ANB R5014                ; Label chuck1 forward limit
AND R5015                ; Label chuck1 backward limit
JMP @MR4006
STG @MR4006
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
RES MR8600               ; Label Nozuru1 absorp rerease 
CON
RES MR8601               ; Label Nozuru1 absorp  
CON
MPS
ANB LR1000               ; Parameter Label Absortion
SET @MR2700              ; UT4-1 label absorption error
CON
JMP @MR4007
MPP
AND LR1000               ; Parameter Label Absortion
MPS
LDB @MR4010
ANB @MR4011
ANL
SET @MR2700              ; UT4-1 label absorption error
CON
JMP @MR4007
MRD
AND @MR4010
SET @MR2708
CON
JMP @MR4007
MPP
AND @MR4011
SET @MR2709
CON
JMP @MR4007
STG @MR4007
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
LDB LR1000               ; Parameter Label Absortion
OR @MR102
OR @MR103
OR @MR107
ANL
RES @MR4010
CON
RES @MR4011
CON
RES @MR107
CON
RES @MR103
CON
RES @MR102
CON
JMP @MR4008
STG @MR4008
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
MPS
ANB @MR2602              ; Label printer sending
SET @MR4015              ; Label1 error label start
CON
JMP @MR4009
MPP
LD @MR2613               ; 1 Side Label start
ANB CR2002               ; Normal ON
ANL
JMP @MR4009
STG @MR4009
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
AND @MR2602              ; Label printer sending
RES @MR4002              ; Label1 recive sbsorption finish
CON
SET @MR4001              ; Label1 recive sbsorption finish
CON
ENDS
;<h1/>ﾗﾍﾞﾙ仮貼り2 受取時吸着異常処理
STG @MR4100              ; Label2 recive sbsorption error
SET @MR4102              ; Label2 recive sbsorption finish
CON
JMP @MR4103
STG @MR4103
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
RES MR8002               ; Label chuck2 close
CON
SET MR8003               ; Label chuck2 open
CON
ANB R5004                ; Label chuck2-1 close limit
AND R5005                ; Label chuck2-1 open limit
ANB R5006                ; Label chuck2-2 close limit
AND R5007                ; Label chuck2-2 open limit
JMP @MR4104
STG @MR4104
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
RES MR8104               ; Nozzle2 forward
CON
SET MR8105               ; Nozzle2 backward
CON
RES MR8102               ; Label chuck2 forward
CON
SET MR8103               ; Label chuck2 backward
CON
JMP @MR4105
STG @MR4105
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
ANB R5108                ; Nozzle2 forward limit
AND R5109                ; Nozzle2 backward limit
ANB R5106                ; Label chuck2 forward limit
AND R5107                ; Label chuck2 backward limit
JMP @MR4106
STG @MR4106
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
RES MR8602               ; Label Nozuru2 absorp rerease 
CON
RES MR8603               ; Label Nozuru2 absorp  
CON
MPS
LDB @MR4110
ANB @MR4111
ANL
SET @MR2701              ; UT4-2 label absorption error
CON
JMP @MR4107
MRD
AND @MR4110
SET @MR2710
CON
JMP @MR4107
MPP
AND @MR4111
SET @MR2711
CON
JMP @MR4107
STG @MR4107
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
LD @MR106
OR @MR207
OR @MR210
ANL
RES @MR4110
CON
RES @MR4110
CON
RES @MR207
CON
RES @MR210
CON
RES @MR106
CON
JMP @MR4108
STG @MR4108
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
MPS
ANB @MR4502
SET @MR4115              ; Label2 error label start
CON
JMP @MR4109
MPP
LD @MR4514               ; 2 Side Label start
ANB CR2002               ; Normal ON
ANL
JMP @MR4109
STG @MR4109
ANB R50300               ; Pause
ANB R50114               ; UT4 Error
AND @MR4502
RES @MR4102              ; Label2 recive sbsorption finish
CON
SET @MR4101              ; Label2 recive sbsorption finish
CON
ENDS
;<h1/>ｴﾗｰ表示
;Error display
;Error 30
;UT4-1 ﾗﾍﾞﾙ吸着異常
STG @MR2700              ; UT4-1 label absorption error
ANB R50008               ; Whole ERROR
SET R50008               ; Whole ERROR
CON
SET R50114               ; UT4 Error
CON
SET R50613               ; 30.UT4-1 Label absorption error 
CON
JMP @MR100
MOV #30 DM400            ; Message NO.
STG @MR100
AND R50008               ; Whole ERROR
JMP @MR101
STG @MR101
ANB R50008               ; Whole ERROR
SET @MR102
CON
ENDS
;Error Absortion Vacuum NG 4-1
;
STG @MR2708
ANB R50008               ; Whole ERROR
SET R50008               ; Whole ERROR
CON
SET R50114               ; UT4 Error
CON
SET R51103               ; 81.UT4-1 Absortion Error Vacuum
CON
JMP @MR110
MOV #81 DM400            ; Message NO.
STG @MR110
AND R50008               ; Whole ERROR
JMP @MR111
STG @MR111
ANB R50008               ; Whole ERROR
SET @MR103
CON
ENDS
;Error Absortion Chuck NG 4-1
STG @MR2709
ANB R50008               ; Whole ERROR
SET R50008               ; Whole ERROR
CON
SET R50114               ; UT4 Error
CON
SET R51104               ; 82.UT4-1 Absortion Error Chuck
CON
JMP @MR114
MOV #82 DM400            ; Message NO.
STG @MR114
AND R50008               ; Whole ERROR
JMP @MR115
STG @MR115
ANB R50008               ; Whole ERROR
SET @MR107
CON
ENDS
;Error 31
;UT4-2 ﾗﾍﾞﾙ吸着異常
STG @MR2701              ; UT4-2 label absorption error
ANB R50008               ; Whole ERROR
SET R50008               ; Whole ERROR
CON
SET R50114               ; UT4 Error
CON
SET R50614               ; 31.UT4-2 Label absorption error 
CON
JMP @MR104
MOV #31 DM400            ; Message NO.
STG @MR104
AND R50008               ; Whole ERROR
JMP @MR105
STG @MR105
ANB R50008               ; Whole ERROR
SET @MR106
CON
ENDS
;Error Absortion Vacuum NG
STG @MR2710
ANB R50008               ; Whole ERROR
SET R50008               ; Whole ERROR
CON
SET R50114               ; UT4 Error
CON
SET R51105               ; 83.UT4-2 Absortion Error Vacuum
CON
JMP @MR307
MOV #83 DM400            ; Message NO.
STG @MR307
AND R50008               ; Whole ERROR
JMP @MR308
STG @MR308
ANB R50008               ; Whole ERROR
SET @MR207
CON
ENDS
;Error Absortion Chuck NG
STG @MR2711
ANB R50008               ; Whole ERROR
SET R50008               ; Whole ERROR
CON
SET R50114               ; UT4 Error
CON
SET R51106               ; 84.UT4-2 Absortion Error Chuck
CON
JMP @MR309
MOV #84 DM400            ; Message NO.
STG @MR309
AND R50008               ; Whole ERROR
JMP @MR310
STG @MR310
ANB R50008               ; Whole ERROR
SET @MR210
CON
ENDS
;Error 32
;UT4-1 ﾌﾞﾛｰ圧力異常
STG @MR2702              ; UT4-1 blow pressure error
ANB R50008               ; Whole ERROR
SET R50008               ; Whole ERROR
CON
SET R50114               ; UT4 Error
CON
SET R50615               ; 32.UT4-1 blow error 
CON
JMP @MR108
MOV #37 DM400            ; Message NO.
STG @MR108
AND R50008               ; Whole ERROR
JMP @MR109
STG @MR109
ANB R50008               ; Whole ERROR
ENDS
;Error 33
;UT4-2 ﾌﾞﾛｰ圧力異常
STG @MR2703              ; UT4-2 blow pressure error
ANB R50008               ; Whole ERROR
SET R50008               ; Whole ERROR
CON
SET R50114               ; UT4 Error
CON
SET R50700               ; 33.UT4-2 blow error
CON
JMP @MR112
MOV #33 DM400            ; Message NO.
STG @MR112
AND R50008               ; Whole ERROR
JMP @MR112
STG @MR113
ANB R50008               ; Whole ERROR
ENDS
;Error 54
;UT4 ﾗﾍﾞﾙ1印字ﾀｲﾑｵｰﾊﾞｰ
LD @MR2602               ; Label printer sending
ANB R50008               ; Whole ERROR
ANB R50114               ; UT4 Error
ANB R50701               ; 34.UT4-1 Label Printer1 err
ANB R50703               ; 36.UT4-1 Label Printer1 powererr
ANB R50705               ; 38.UT4-1 Label Printer1 on-line
TMR @40 #100
LD @T40
SET @MR2704              ; UT4 Label print time over
STG @MR2704              ; UT4 Label print time over
ANB R50008               ; Whole ERROR
SET R50008               ; Whole ERROR
CON
SET R50114               ; UT4 Error
CON
SET R50805               ; 54.UT4 Time over to LABEL printi
CON
JMP @MR200
MOV #54 DM400            ; Message NO.
STG @MR200
AND R50008               ; Whole ERROR
ZRES @MR2600 @MR2615     ; Label printer send
CON
JMP @MR201
STG @MR201
ANB R50008               ; Whole ERROR
MPS
AND R5900                ; Label printer1 busy
SET MR8900               ; Label pinter1 START
CON
JMP @MR202
MPP
ANB R5900                ; Label printer1 busy
JMP @MR202
STG @MR202
TMR @7 #30
CON
AND @T7
RES MR8900               ; Label pinter1 START
CON
JMP @MR203
STG @MR203
TMR @8 #20
CON
AND @T8
SET MR8903               ; Label pinter1 CAN
CON
JMP @MR204
STG @MR204
TMR @5 #20
CON
AND @T5
RES MR8903               ; Label pinter1 CAN
CON
SET @MR2705
CON
JMP @MR205
STG @MR205
AND @MR211
RES @MR211
CON
JMP @MR206
STG @MR206
MPS
LD R50001                ; AUTO mode
OR R50002                ; STEP mode
ANL
SET @MR2600              ; Label printer send
CON
ENDS
MPP
LDB R50001               ; AUTO mode
ANB R50002               ; STEP mode
ANL
ENDS
;Error 55
;UT4 ﾗﾍﾞﾙ1取出し要求
STG @MR2705
ANB R50008               ; Whole ERROR
SET R50008               ; Whole ERROR
CON
SET R50114               ; UT4 Error
CON
SET R50806               ; 55.UT4 Remove LABEL request
CON
JMP @MR208
MOV #55 DM400            ; Message NO.
STG @MR208
AND R50008               ; Whole ERROR
JMP @MR209
STG @MR209
ANB R50008               ; Whole ERROR
SET @MR211
CON
ENDS
;Error 56
;UT4 ﾗﾍﾞﾙ2印字ﾀｲﾑｵｰﾊﾞｰ
LD @MR4502
ANB R50008               ; Whole ERROR
ANB R50114               ; UT4 Error
ANB R50702               ; 35.UT4-2 Label Printer2 err
ANB R50704               ; 37.UT4-2 Label Printer2 powererr
ANB R50706               ; 39.UT4-2 Label Printer2 on-line
TMR @41 #150
LD @T41
SET @MR2706
STG @MR2706
ANB R50008               ; Whole ERROR
SET R50008               ; Whole ERROR
CON
SET R50114               ; UT4 Error
CON
SET R50807               ; 56.UT4-2 LABEL2 PRINT time over
CON
JMP @MR212
MOV #56 DM400            ; Message NO.
STG @MR212
AND R50008               ; Whole ERROR
ZRES @MR4500 @MR4515
CON
JMP @MR213
STG @MR213
MPS
AND R5908                ; Label printer2 busy
SET MR8908               ; Label pinter2 START
CON
JMP @MR214
MPP
ANB R5908                ; Label printer2 busy
JMP @MR214
STG @MR214
TMR @14 #30
CON
AND @T14
RES MR8908               ; Label pinter2 START
CON
JMP @MR215
STG @MR215
TMR @15 #20
CON
AND @T15
SET MR8911               ; Label pinter2 CAN
CON
JMP @MR300
STG @MR300
TMR @16 #20
CON
AND @T16
RES MR8911               ; Label pinter2 CAN
CON
SET @MR2707
CON
JMP @MR301
STG @MR301
AND @MR306
RES @MR306
CON
JMP @MR302
STG @MR302
MPS
LD R50001                ; AUTO mode
OR R50002                ; STEP mode
ANL
SET @MR4500
CON
ENDS
MPP
LDB R50001               ; AUTO mode
ANB R50002               ; STEP mode
ANL
ENDS
;Error 58
;UT4 ﾗﾍﾞﾙ2取出し要求
STG @MR2707
ANB R50008               ; Whole ERROR
SET R50008               ; Whole ERROR
CON
SET R50114               ; UT4 Error
CON
SET R50809               ; 58.UT4-2 Remove LABEL2 Request
CON
JMP @MR304
MOV #58 DM400            ; Message NO.
STG @MR304
AND R50008               ; Whole ERROR
JMP @MR305
STG @MR305
ANB R50008               ; Whole ERROR
SET @MR306
CON
ENDS
;<h1/>UT4 ﾎﾟｰｽﾞ禁止
;UT4 Pause Prohibition
LDB @MR800               ; Pause dissable1
ANB @MR801               ; Pause dissable2
ANB @MR802
INV
OUT R50104               ; PACK UT4
;ﾌﾟﾘﾝﾀ1.2ｻｲｸﾙﾀｲﾑ
LD @MR2606
OR MR800
ANB R5900                ; Label printer1 busy
MPS
OUT MR800
MPP
AND CR2004               ; 10ms clock pls
@INC DM5200
LDP R5900                ; Label printer1 busy
MOV DM5200 DM5201
MOV #0 DM5200
LD @MR4506
OR MR801
ANB R5908                ; Label printer2 busy
MPS
OUT MR801
MPP
AND CR2004               ; 10ms clock pls
@INC DM5202
LDP R5908                ; Label printer2 busy
MOV DM5202 DM5203
MOV #0 DM5202
LD @MR2400
AND CR2004               ; 10ms clock pls
@INC DM5204
LDF @MR2400
MOV DM5204 DM5205
MOV #0 DM5204
LD @MR2401
AND CR2004               ; 10ms clock pls
@INC DM5206
LDF @MR2401
MOV DM5206 DM5207
MOV #0 DM5206
LD MR8901                ; Label pinter1 BACK
OR MR802
ANB MR803
MPS
OUT MR802
MPP
AND CR2004               ; 10ms clock pls
@INC DM5208
LDB R5902                ; Label printer1 Print-end
AND R5904                ; Label printer1 back-end
OUT MR803
LDP MR803
MOV DM5208 DM5209
MOV #0 DM5208
LD MR8909                ; Label pinter2 BACK
OR MR804
ANB MR805
MPS
OUT MR804
MPP
AND CR2004               ; 10ms clock pls
@INC DM5210
LDB R5910                ; Label printer2 Print-end
AND R5912                ; Label printer2 back-end
OUT MR805
LDP MR805
MOV DM5210 DM5211
MOV #0 DM5210
END
ENDH
