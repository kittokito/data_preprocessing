DEVICE:53
;MODULE:OK_Marking_Check
;MODULE_TYPE:0
;OK marking 
LDP R46104               ; _ESTOP_MODE
ZRES R37400 R37415       ; marking check toriger Memory   imaging position memory
CON
ZRES @R100 @R315
LDB R4010                ; VS-02 ERROR
AND R4011                ; VS-02 RUN
OUT R37408               ; OK Marking Ready OK
LD R37408                ; OK Marking Ready OK
ANB R37402               ; OK marking communication busy
OUT R37409               ; OK Marking Image OK
;<h1/>OK Marking VS start
LD R4702                 ; Liner feeder New Cap imaging po
INV
ANB R51208               ; 122.UT6 CAP marking error
AND R4700                ; Liner feeder cap clamp back limi
AND R37408               ; OK Marking Ready OK
OUT @R000                ; Liner feeder New Cap imaging po
LDB MR708                ; UT6 CAP OK marking judge invalid
AND @R000                ; Liner feeder New Cap imaging po
ANB R37415               ;  imaging position memory
TMR @10 #3               ; Liner New Cap imaging position
LDB MR708                ; UT6 CAP OK marking judge invalid
AND @R001                ; Liner feeder New Cap triger pos
ANB @T10                 ; Liner New Cap imaging position
ANB R37402               ; OK marking communication busy
ANB R37415               ;  imaging position memory
TMR @20 #30              ; Liner feeder New Cap triger pos
LDP @T10                 ; Liner New Cap imaging position
SET R37400               ; marking check toriger Memory
STG R37400               ; marking check toriger Memory
RES R37401               ; OK marking communication finish
CON
ZRES DM41000 DM41999
CON
SET R37402               ; OK marking communication busy
CON
JMP @R104
;<h1/><<ŽB‘œŠJŽn>>
STG @R104
SET MR7401               ; Liner feeder ON
CON
SET MR7009               ; VS-02 TRG1 Vision Controller Tri
CON
JMP @R105
STG @R105
AND= DM41000 #1
RES MR7009               ; VS-02 TRG1 Vision Controller Tri
CON
JMP @R106
STG @R106
DW #0 DM41000
CON
JMP @R200
;<h1/><<‰æ‘œŒ‹‰ÊŽæ“¾>>
STG @R200
DW #0 DM41100            ; OK Marking VS-02 comand NO
CON
DW #1 DM41002            ; OK Marking VS-02 comand Run
CON
JMP @R201
STG @R201
AND= DM41003 #1          ; OK Marking VS-02 comand run fini
JMP @R202
STG @R202
DW #0 DM41002            ; OK Marking VS-02 comand Run
CON
JMP @R203
STG @R203
AND= DM41003 #0          ; OK Marking VS-02 comand run fini
JMP @R208
;<h1/><<OK/NG Check>>
STG @R208
MPS
LD= DM41500 #0           ; OK Marking VS-02  judgment
AND<> DM41502 #0         ; OK Marking VS-02  result data
ANL
JMP @R215
MPP
LD<> DM41500 #0          ; OK Marking VS-02  judgment
OR= DM41502 #0           ; OK Marking VS-02  result data
ANL
RES MR7401               ; Liner feeder ON
CON
SET R51706               ; UT6 ERROR
CON
JMP @R210
STG @R210
RES MR8403               ; Liner feeder Cap Clanp backward
CON
SET MR8402               ; Liner feeder Cap Clanp forward
CON
ANB R4700                ; Liner feeder cap clamp back limi
AND R4701                ; Liner feeder cap clamp forward l
SET @R300
CON
JMP @R212
STG @R212
RES MR7401               ; Liner feeder ON
CON
AND @R303
SET MR8403               ; Liner feeder Cap Clanp backward
CON
RES MR8402               ; Liner feeder Cap Clanp forward
CON
AND R4700                ; Liner feeder cap clamp back limi
ANB R4701                ; Liner feeder cap clamp forward l
RES @R303
CON
JMP @R213
STG @R213
MPS
AND R4702                ; Liner feeder New Cap imaging po
SET MR7401               ; Liner feeder ON
CON
JMP @R215
MPP
ANB R4702                ; Liner feeder New Cap imaging po
JMP @R210
STG @R215
RES R37415               ;  imaging position memory
CON
RES R37402               ; OK marking communication busy
CON
ENDS
;<h1/><<ERROR>>
STG @R300
SET MR7500               ; Bowl feeder vibration OFF
CON
ANB R50008               ; Whole ERROR
SET R51706               ; UT6 ERROR
CON
SET R50008               ; Whole ERROR
CON
SET R51208               ; 122.UT6 CAP marking error
CON
JMP @R301
MOV #122 DM400           ; Message NO.
STG @R301
AND R50008               ; Whole ERROR
JMP @R302
STG @R302
ANB R50008               ; Whole ERROR
SET @R303
CON
ENDS
END
ENDH
