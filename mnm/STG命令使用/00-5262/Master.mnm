DEVICE:53
;MODULE:Master
;MODULE_TYPE:0
;
LD CR2002                ; Normal ON
MPS
DW #1 DM27615            ; Port2 data save range setting
CON
DW $4431 DM27620         ; Port2 recive Hedda setting
CON
DW $0D0A DM27621         ; Port2 recive delimiter setting
CON
DW $0000 DM27616         ; Port2 mode setting
CON
SET R26800               ; Port2 communication permission
MPP
DW #1 DM29115            ; Port2 data save range setting
CON
DW $4431 DM29120         ; Port2 recive Hedda setting
CON
DW $0D0A DM29121         ; Port2 recive delimiter setting
CON
DW $0000 DM29116         ; Port2 mode setting
CON
SET R28300               ; Port2 communication permission
;Device net nodo check
BLDB DM10014 #0          ; Normal communication node list 
BAND DM10014 #1          ; Normal communication node list 
BAND DM10014 #2          ; Normal communication node list 
BAND DM10014 #3          ; Normal communication node list 
BAND DM10014 #4          ; Normal communication node list 
BAND DM10014 #5          ; Normal communication node list 
BAND DM10014 #6          ; Normal communication node list 
BAND DM10014 #7          ; Normal communication node list 
BAND DM10014 #8          ; Normal communication node list 
BAND DM10014 #9          ; Normal communication node list 
BAND DM10014 #10         ; Normal communication node list 
BAND DM10014 #11         ; Normal communication node list 
BAND DM10014 #12         ; Normal communication node list 
BAND DM10014 #13         ; Normal communication node list 
BAND DM10014 #14         ; Normal communication node list 
BAND DM10014 #15         ; Normal communication node list 
BAND DM10015 #0          ; Normal communication node list 
BAND DM10015 #1          ; Normal communication node list 
BAND DM10015 #2          ; Normal communication node list 
BAND DM10015 #3          ; Normal communication node list 
BAND DM10015 #4          ; Normal communication node list 
BAND DM10015 #5          ; Normal communication node list 
BAND DM10015 #6          ; Normal communication node list 
BAND DM10015 #7          ; Normal communication node list 
BAND DM10015 #8          ; Normal communication node list 
BAND DM10015 #9          ; Normal communication node list 
BAND DM10015 #10         ; Normal communication node list 
BAND DM10015 #11         ; Normal communication node list 
BAND DM10015 #12         ; Normal communication node list 
BAND DM10015 #13         ; Normal communication node list 
BAND DM10015 #14         ; Normal communication node list 
BAND DM10015 #15         ; Normal communication node list 
BAND DM10016 #0          ; Normal communication node list 
BAND DM10016 #1          ; Normal communication node list 
BANB DM10016 #2          ; Normal communication node list 
BANB DM10016 #3          ; Normal communication node list 
BANB DM10016 #4          ; Normal communication node list 
BANB DM10016 #5          ; Normal communication node list 
BANB DM10016 #6          ; Normal communication node list 
BANB DM10016 #7          ; Normal communication node list 
BANB DM10016 #8          ; Normal communication node list 
BAND DM10016 #9          ; Normal communication node list 
BAND DM10016 #10         ; Normal communication node list 
BAND DM10016 #11         ; Normal communication node list 
BANB DM10016 #12         ; Normal communication node list 
BANB DM10016 #13         ; Normal communication node list 
BANB DM10016 #14         ; Normal communication node list 
BANB DM10016 #15         ; Normal communication node list 
BANB DM10017 #0          ; Normal communication node list 
BANB DM10017 #1          ; Normal communication node list 
BAND DM10017 #2          ; Normal communication node list 
BANB DM10017 #3          ; Normal communication node list 
BANB DM10017 #4          ; Normal communication node list 
BANB DM10017 #5          ; Normal communication node list 
BANB DM10017 #6          ; Normal communication node list 
BANB DM10017 #7          ; Normal communication node list 
BANB DM10017 #8          ; Normal communication node list 
BANB DM10017 #9          ; Normal communication node list 
BANB DM10017 #10         ; Normal communication node list 
BANB DM10017 #11         ; Normal communication node list 
BANB DM10017 #12         ; Normal communication node list 
BANB DM10017 #13         ; Normal communication node list 
BANB DM10017 #14         ; Normal communication node list 
BANB DM10017 #15         ; Normal communication node list 
TMR #202 #10             ; Device net node check
LD CR2002                ; Normal ON
LD R59812                ; TP#1 left upper SW
AND R59815               ; TP#1 right lower SW
LD R59813                ; TP#1 left lower SW
AND R59814               ; TP#1 right upper SW
ORL
OR R59811                ; TP STEP MANU SW
ANL
MPS
TMR #200 #10
MPP
AND T200
MOV #500 DM3001          ; Change Screen NO.
LD= DM3000 #4            ; Display Screen NO.
AND R59815               ; TP#1 right lower SW
MOV #500 DM3001          ; Change Screen NO.
LD R1103                 ; Error Reset SW
ANB R50200               ; INDEX Do
ANB R50100               ; PACK INDEX
ANB R50101               ; PACK UT1
ANB R50102               ; PACK UT2
ANB R50103               ; PACK UT3
ANB R50104               ; PACK UT4
ANB R51605               ; PACK UT5
ANB R51606               ; PACK UT6
ANB R51607               ; PACK UT7
ANB R51608               ; PACK UT8
TMR #210 #100            ; ALL RESET TIMER
LD MR014
OR T210                  ; ALL RESET TIMER
FMOV #0 DM20100 #900     ; UT1-1 Work detection
RES MR7800               ; INDEX chuck1 close
CON
RES MR7802               ; INDEX chuck2 close
CON
RES MR7804               ; INDEX chuck3 close
CON
RES MR7806               ; INDEX chuck4 close
CON
RES MR7808               ; INDEX chuck5 close
CON
RES MR7810               ; INDEX chuck6 close
CON
RES MR7812               ; INDEX chuck7 close
CON
RES MR7814               ; INDEX chuck8 close
CON
SET MR7801               ; INDEX chuck1 open
CON
SET MR7803               ; INDEX chuck2 open
CON
SET MR7805               ; INDEX chuck3 open
CON
SET MR7807               ; INDEX chuck4 open
CON
SET MR7809               ; INDEX chuck5 open
CON
SET MR7811               ; INDEX chuck6 open
CON
SET MR7813               ; INDEX chuck7 open
CON
SET MR7815               ; INDEX chuck8 open
CON
RES MR104                ; 4UT index data shift Prohibited
CON
RES MR105                ; Index data shift 
CON
RES MR204
CON
SET R50011               ; TRAP
LD R50010                ; Emaegency Stop
ZRES @MR000 @MR915
;Machine parameter  selection/ ﾏｼﾝﾊﾟﾗﾒｰﾀｰ 選択
LD DM2000.0              ; 1cell H/S invalid
OUT MR700                ; Upper stream non H/S
LD DM2000.1              ; 3cell H/S invalid
OUT MR701                ; lower stream non H/S
LD DM2000.2              ; HOST PC  invalid
OUT MR702                ; UT3 weight/t-code force OK
LD DM2000.3              ; 3UT Film check invalid
OUT MR703                ; Film check force OK
LD DM2000.4              ; 7UT CAP torqe judge valid
OUT MR704                ; 7st final tight judgement invali
LD DM2000.5              ; CAP judge valid
OUT MR705                ; CAP judgement invalid
LD DM2000.6              ; 2UT weight area judge valid
ANB MR16500              ; Dummy check from cell 1
OR MR16500               ; Dummy check from cell 1
OUT MR706                ; UT2 weight range error invalid
LD DM2000.7              ; UT6 dentcheck invalid
OUT MR707                ; UT5 Dent check judge invalid
LD DM2000.8              ; UT6 CAP OK marking judge invalid
OUT MR708                ; UT6 CAP OK marking judge invalid
LD DM2000.14             ; Non Shrink film
OUT MR714                ; Non Shrink film
LD DM2000.15             ; Label Printer unused
OUT MR715                ; Label printer non
LDB DM2000.0             ; 1cell H/S invalid
ANB DM2000.1             ; 3cell H/S invalid
ANB DM2000.2             ; HOST PC  invalid
ANB DM2000.3             ; 3UT Film check invalid
ANB DM2000.4             ; 7UT CAP torqe judge valid
ANB DM2000.5             ; CAP judge valid
ANB DM2000.6             ; 2UT weight area judge valid
ANB DM2000.7             ; UT6 dentcheck invalid
ANB DM2000.15            ; Label Printer unused
INV
OUT MR115                ; M/C parameter setting
LDB DM2000.0             ; 1cell H/S invalid
ANB DM2000.1             ; 3cell H/S invalid
ANB DM2000.2             ; HOST PC  invalid
ANB DM2000.3             ; 3UT Film check invalid
ANB DM2000.4             ; 7UT CAP torqe judge valid
ANB DM2000.5             ; CAP judge valid
ANB DM2000.6             ; 2UT weight area judge valid
ANB DM2000.7             ; UT6 dentcheck invalid
ANB DM2000.15            ; Label Printer unused
INV
OUT MR100
LD CR2002                ; Normal ON
MPS
LDA.F FM20               ; Weight Min
CON
MUL.F +100
CON
INTG.D
CON
STA.L EM31000            ; weight standard （Min)
MPP
LDA.F FM30               ; Weight Max
CON
MUL.F +100
CON
INTG.D
CON
STA.L EM31010            ; weight standard （Max)
;Task Control / タスク制御
LD R50001                ; AUTO mode
DIFU @MR000
LDP @MR000
ORP @MR004
ORP R50003               ; HOME mode
ANB R50209               ; Operation Start
RES @MR004
CON
SET R50209               ; Operation Start
;Task Controll / タスク制御
LDP R50209               ; Operation Start
LD R50001                ; AUTO mode
OR R50003                ; HOME mode
ANL
MDSTRT UT1
MDSTRT UT2
MDSTRT UT3
MDSTRT UT4
MDSTRT UT5
MDSTRT UT6
MDSTRT UT7
MDSTRT UT8
RES R50409               ; Cycyle Finished
CON
SET @MR001
STG @MR001
AND R51901               ; UT1 1cycle finished
AND R51902               ; UT2 1cycle finished
AND R51903               ; UT3 1cycle finished
AND R51904               ; UT4 1cycle finished
AND R51905               ; UT5 1cycle finished
AND R51906               ; UT6 1cycle finished
AND R51907               ; UT7 1cycle finished
AND R51908               ; UT8 1cycle finished
TMH @1 #1
CON
AND @T1
JMP @MR002
MDSTRT Index
STG @MR002
AND R51900               ; Index 1cycle finished
RES R51901               ; UT1 1cycle finished
CON
RES R51902               ; UT2 1cycle finished
CON
RES R51903               ; UT3 1cycle finished
CON
RES R51904               ; UT4 1cycle finished
CON
RES R51515
CON
RES R51905               ; UT5 1cycle finished
CON
RES R51906               ; UT6 1cycle finished
CON
RES R51907               ; UT7 1cycle finished
CON
RES R51908               ; UT8 1cycle finished
CON
RES R51900               ; Index 1cycle finished
CON
SET R50409               ; Cycyle Finished
CON
RES R50209               ; Operation Start
CON
JMP @MR003
MDSTOP Index
STG @MR003
ANB _Index
RES R50200               ; INDEX Do
CON
MPS
LD R50001                ; AUTO mode
ANB R50000               ; HOLD
ANL
SET @MR004
MPP
ENDS
;STOP Manegment/停止処理
LD R50001                ; AUTO mode
OR R50002                ; STEP mode
LDF R1003                ; AUTO SW
ORP R50009               ; HOLDRQ
ANL
ORP R50003               ; HOME mode
SET R50000               ; HOLD
CON
RES R50009               ; HOLDRQ
LDB R50004               ; TASK DO
OR R50308                ; Waiting task stop
RES R50001               ; AUTO mode
CON
RES R50002               ; STEP mode
LD R50003                ; HOME mode
LDB R50004               ; TASK DO
OR R50308                ; Waiting task stop
ANL
RES MR1013               ; Index HOME return
CON
RES R50003               ; HOME mode
CON
SET R50007               ; HOME FINISHED
LD R1003                 ; AUTO SW
ANB R50004               ; TASK DO
AND LR000                ; Step/Manual Oparation Memory
@RES R50007              ; HOME FINISHED
;Each UT Task Stop / 各UTタスク停止
LD R50001                ; AUTO mode
AND R50409               ; Cycyle Finished
AND R50000               ; HOLD
LD R50002                ; STEP mode
OR R50003                ; HOME mode
AND R50409               ; Cycyle Finished
ORL
RES R50409               ; Cycyle Finished
CON
RES R50209               ; Operation Start
CON
SET R50308               ; Waiting task stop
LD R50308                ; Waiting task stop
ANB R50201               ; UT1 Do
ANB R50202               ; UT2 Do
ANB R50203               ; UT3 Do
ANB R50204               ; UT4 Do
ANB R51805               ; UT5 Do
ANB R51806               ; UT6 Do
ANB R51807               ; UT7 Do
ANB R51808               ; UT8 Do
ANB R50001               ; AUTO mode
RES R50308               ; Waiting task stop
CON
RES R50004               ; TASK DO
CON
RES R50000               ; HOLD
CON
DIFU @MR103
STG @MR103
JMP @MR104
MDSTOP UT1
MDSTOP UT2
MDSTOP UT3
MDSTOP UT4
MDSTOP UT5
MDSTOP UT6
MDSTOP UT7
MDSTOP UT8
MDSTOP Index
STG @MR104
ANB _UT1
ANB _UT2
ANB _UT3
ANB _UT4
ANB _UT5
ANB _UT6
ANB _UT7
ANB _UT8
ANB _Index
RES R50205               ; INDEX Do(STEP)
CON
ENDS
;＠モード選択　/　Select Mode
;ＨＯＭＥ
LD R45005                ; Main Screen2
ORB R50007               ; HOME FINISHED
AND R1004                ; HOME SW
AND T202                 ; Device net node check
ANP R1001                ; START SW
DIFU @MR006
LD @MR006
ANB R50004               ; TASK DO
ANB R50008               ; Whole ERROR
ANB R50300               ; Pause
ANB R50010               ; Emaegency Stop
AND R1100                ; MAIN air
AND R1102                ; Safty cover
OUT @MR200
LD @MR200
SET R50003               ; HOME mode
CON
SET R50004               ; TASK DO
;ＡＵＴＯ
LD R1003                 ; AUTO SW
LDP R1001                ; START SW
ANB MR115                ; M/C parameter setting
ORP MR201                ; Parameter warning start
ANL
AND R45005               ; Main Screen2
DIFU @MR008
LD R1003                 ; AUTO SW
AND MR115                ; M/C parameter setting
AND R1001                ; START SW
ANB R50001               ; AUTO mode
OUT MR200
LD @MR008
AND R50007               ; HOME FINISHED
ANB R50004               ; TASK DO
ANB R50008               ; Whole ERROR
ANB R50300               ; Pause
ANB R50010               ; Emaegency Stop
AND R1100                ; MAIN air
AND R1102                ; Safty cover
MPS
AND R12003
MPS
AND R51309
OUT @MR204
MPP
ANB R51308
SET R51308
MRD
ANB R12003
OUT @MR205
MPP
OUT @MR207
LD @MR204
OR @MR205
OUT @MR009
CON
SET R50001               ; AUTO mode
CON
SET R50004               ; TASK DO
;ＳＴＥＰ
LD R1005                 ; MANU SW
ANP R1001                ; START SW
LD R45005                ; Main Screen2
OR R45006                ; STEP Screen2
ANL
DIFU @MR010
LD @MR010
AND R50007               ; HOME FINISHED
ANB R50004               ; TASK DO
ANB R50008               ; Whole ERROR
ANB R50300               ; Pause
ANB R50010               ; Emaegency Stop
AND R1100                ; MAIN air
AND R1102                ; Safty cover
OUT @MR208
LD @MR208
SET R50002               ; STEP mode
CON
SET R50004               ; TASK DO
;STEP Operation / STEP動作
LD R50002                ; STEP mode
MPS
AND LR40001              ; UT1
MPS
ANB _UT1
MDSTRT UT1
MPP
AND R51901               ; UT1 1cycle finished
SET R50409               ; Cycyle Finished
CON
RES R51901               ; UT1 1cycle finished
MRD
AND LR40002              ; UT2
MPS
ANB _UT2
MDSTRT UT2
MPP
AND R51902               ; UT2 1cycle finished
SET R50409               ; Cycyle Finished
CON
RES R51902               ; UT2 1cycle finished
MRD
AND LR40003              ; UT3
MPS
ANB _UT3
MDSTRT UT3
MPP
AND R51903               ; UT3 1cycle finished
SET R50409               ; Cycyle Finished
CON
RES R51903               ; UT3 1cycle finished
MRD
AND LR40004              ; UT4
MPS
ANB _UT4
MDSTRT UT4
MPP
AND R51904               ; UT4 1cycle finished
SET R50409               ; Cycyle Finished
CON
RES R51904               ; UT4 1cycle finished
CON
RES R51515
MRD
AND LR40005              ; UT5
MPS
ANB _UT5
MDSTRT UT5
MPP
AND R51905               ; UT5 1cycle finished
SET R50409               ; Cycyle Finished
CON
RES R51905               ; UT5 1cycle finished
MRD
AND LR40006              ; UT6
MPS
ANB _UT6
MDSTRT UT6
MPP
AND R51906               ; UT6 1cycle finished
SET R50409               ; Cycyle Finished
CON
RES R51906               ; UT6 1cycle finished
MRD
AND LR40007              ; UT7
MPS
ANB _UT7
MDSTRT UT7
MPP
AND R51907               ; UT7 1cycle finished
SET R50409               ; Cycyle Finished
CON
RES R51907               ; UT7 1cycle finished
MRD
AND LR40008              ; UT8
MPS
ANB _UT8
MDSTRT UT8
MPP
AND R51908               ; UT8 1cycle finished
SET R50409               ; Cycyle Finished
CON
RES R51908               ; UT8 1cycle finished
MPP
AND LR40000              ; INDEX
MPS
ANB _Index
MDSTRT Index
MPP
AND R51900               ; Index 1cycle finished
SET R50409               ; Cycyle Finished
CON
RES R51900               ; Index 1cycle finished
;Ｃａｌｌ　Ｐｏｓｔ
LDB R50002               ; STEP mode
ZRES R50403 R50405
STG R50400               ; Call Post
ANB R50403
ANB R1001                ; START SW
AND R50002               ; STEP mode
SET R50403
CON
JMP R50404
STG R50404
LDP R1001                ; START SW
ORP R4000                ; START SW
ANL
ANB R50008               ; Whole ERROR
ANB R50300               ; Pause
ANB R50010               ; Emaegency Stop
AND R1100                ; MAIN air
AND R1102                ; Safty cover
JMP R50405
STG R50405
ANB R50400               ; Call Post
RES R50403
CON
ENDS
LD R50400                ; Call Post
AND R50404
OUT R50401               ; Post Busy
LD R50002                ; STEP mode
AND R50405
ORB R50002               ; STEP mode
OUT R50402               ; Post Ok
;Error Release Delay Management / エラー解除遅延処理
LDP R50107               ; Error Emergency Stop
SET R50109               ; Error Rerease
LDB R50008               ; Whole ERROR
OR R50109                ; Error Rerease
TMR @3 #15
LD @T3
SET @MR300
CON
RES R50109               ; Error Rerease
CON
RES R50107               ; Error Emergency Stop
STG @MR301
AND @MR300
RES @MR300
CON
SET R50108               ; Error 
CON
ENDS
LD R50008                ; Whole ERROR
AND R50108               ; Error 
TMR @4 #15
TMH @2 #20
;Error Release Manegment / エラー解除処理
LD R50008                ; Whole ERROR
AND R50108               ; Error 
LD R50015                ; Error SW-ON
ANP R1001                ; START SW
AND @T4
LD R50106
AND @T2
ORL
ANL
ANB R50300               ; Pause
MPS
SET R50109               ; Error Rerease
CON
RES R50108               ; Error 
CON
RES R50008               ; Whole ERROR
MRD
ZRES R51107 R51108       ; 85.UT6-1 Seal Cap Error  86.UT6-2 Seal Cap Error
CON
ZRES R50110 R50114       ; INDEX Error  UT4 Error
CON
ZRES R50500 R50915       ; 1.Main Index Driver Alarm  80.UT3-2 Blancer and T-Code Time
CON
ZRES R46000 R47115       ; Main Index brake down limit
MPP
ZRES R51103 R51215       ; 81.UT4-1 Absortion Error Vacuum  109.
CON
ZRES R47300 R47315       ; UT1-1 work data error  UT8-2 work data error
CON
ZRES R51705 R51708       ; UT5 ERROR  UT8 ERROR
CON
RES R50106
LDP R50008               ; Whole ERROR
SET @MR301
;Error Reset Key SW Operation Check / エラーリセットキーＳＷ動作確認
LD CR2007                ; 1 scan OFF at the start of opera
AND LR49914
ANB R50010               ; Emaegency Stop
@SET @MR302
STG @MR302
ANB R1103                ; Error Reset SW
JMP @MR303
STG @MR303
AND R1103                ; Error Reset SW
JMP @MR304
STG @MR304
ANB R1103                ; Error Reset SW
MPS
AND R50007               ; HOME FINISHED
SET LR49915
CON
ENDS
MPP
ANB R50007               ; HOME FINISHED
RES LR49914
CON
RES LR49915
CON
ENDS
;サイクルタイム計測
;Total  =  DM5010
;UT1    =  DM5012
;UT2    =  DM5014
;UT3    =  DM5016
;UT4    =  DM5018
;Index  =  DM5020
;UT5    =  DM5040
LD R50209                ; Operation Start
ANB @T0
TMS @0 #100
LD R50209                ; Operation Start
OR R50200                ; INDEX Do
AND @T0
@INC DM5010              ; Total Cycle time
LD R50209                ; Operation Start
AND @T0
@INC DM5014              ; UT1 Cycle 
CON
@INC DM5016              ; UT2 Cycle 
CON
@INC DM5018              ; UT3 Cycle 
CON
@INC DM5020              ; UT4 Cycle 
CON
@INC DM5022              ; UT5 Cycle 
CON
@INC DM5024              ; UT6 Cycle 
CON
@INC DM5026              ; UT7 Cycle 
CON
@INC DM5028              ; UT8 Cycle 
LD R50200                ; INDEX Do
AND @T0
@INC DM5012              ; INDEX Cycle time
LDP R51901               ; UT1 1cycle finished
MOV DM5014 DM5015        ; UT1 Cycle   UT1 Cycle time TP Display
LDP R51902               ; UT2 1cycle finished
MOV DM5016 DM5017        ; UT2 Cycle   UT2 Cycle time TP Display
LDP R51903               ; UT3 1cycle finished
MOV DM5018 DM5019        ; UT3 Cycle   UT3 Cycle time TP Display
LDP R51904               ; UT4 1cycle finished
MOV DM5020 DM5021        ; UT4 Cycle   UT4 Cycle time TP Display
LDP R51905               ; UT5 1cycle finished
MOV DM5022 DM5023        ; UT5 Cycle   UT5 Cycle time TP Display
LDP R51906               ; UT6 1cycle finished
MOV DM5024 DM5025        ; UT6 Cycle   UT6 Cycle time TP Display
LDP R51907               ; UT7 1cycle finished
MOV DM5026 DM5027        ; UT7 Cycle   UT7 Cycle time TP Display
LDP R51908               ; UT8 1cycle finished
MOV DM5028 DM5029        ; UT8 Cycle   UT8 Cycle time TP Display
LDF R50200               ; INDEX Do
WSR EM31500 #1000 #1     ; Total C/T History
MOV DM5010 EM31500       ; Total Cycle time  Total C/T History
MOV DM5012 EM31600       ; INDEX Cycle time  INDEXl C/T History
MOV DM5015 EM31700       ; UT1 Cycle time TP Display  UT1 C/T History
MOV DM5017 EM31800       ; UT2 Cycle time TP Display  UT2 C/T History
MOV DM5019 EM31900       ; UT3 Cycle time TP Display  UT3 C/T History
MOV DM5021 EM32000       ; UT4 Cycle time TP Display  UT4 C/T History
MOV DM5023 EM32100       ; UT5 Cycle time TP Display  UT5 C/T History
MOV DM5025 EM32200       ; UT6 Cycle time TP Display  UT6 C/T History
MOV DM5027 EM32300       ; UT7 Cycle time TP Display  UT7 C/T History
MOV DM5029 EM32400       ; UT8 Cycle time TP Display  UT8 C/T History
;<<C/T Histoy Display>>
LD CR2002                ; Normal ON
MPS
LDA DM5050               ; C/T Histry forward Count
CON
STA Z6
MRD
MOV EM31500:Z6 DM5060    ; Total C/T History  Total C/T History Display
MRD
MOV EM31600:Z6 DM5061    ; INDEXl C/T History  INDEX C/T History Display
MRD
MOV EM31700:Z6 DM5062    ; UT1 C/T History  UT1 C/T History Display
MRD
MOV EM31800:Z6 DM5063    ; UT2 C/T History  UT2 C/T History Display
MRD
MOV EM31900:Z6 DM5064    ; UT3 C/T History  UT3 C/T History Display
MRD
MOV EM32000:Z6 DM5065    ; UT4 C/T History  UT4 C/T History Display
MRD
MOV EM32100:Z6 DM5066    ; UT5 C/T History  UT5 C/T History Display
MRD
MOV EM32200:Z6 DM5067    ; UT6 C/T History  UT6 C/T History Display
MRD
MOV EM32300:Z6 DM5068    ; UT7 C/T History  UT7 C/T History Display
MPP
MOV EM32400:Z6 DM5069    ; UT8 C/T History  UT8 C/T History Display
LDF R50200               ; INDEX Do
MOV DM5012 DM5013        ; INDEX Cycle time  INDEX Cycle time TP Display
MOV DM5010 DM5011        ; Total Cycle time  Total Cycle time TP Display
MOV #0 DM5014            ; UT1 Cycle 
MOV #0 DM5016            ; UT2 Cycle 
MOV #0 DM5018            ; UT3 Cycle 
MOV #0 DM5020            ; UT4 Cycle 
MOV #0 DM5022            ; UT5 Cycle 
MOV #0 DM5024            ; UT6 Cycle 
MOV #0 DM5026            ; UT7 Cycle 
MOV #0 DM5028            ; UT8 Cycle 
LDF @MR004
MOV #0 DM5010            ; Total Cycle time
MOV #0 DM5012            ; INDEX Cycle time
LD= DM20100 #0           ; UT1-1 Work detection
AND= DM20102 #0          ; UT1-2 Work detection
AND= DM20200 #0          ; UT2-1 Work detection
AND= DM20202 #0          ; UT2-2 Work detection
AND= DM20300 #0          ; UT3-1 Work detection
AND= DM20302 #0          ; UT3-2 Work detection
AND= DM20400 #0          ; UT4-1 Work detection
AND= DM20402 #0          ; UT4-2 Work detection
AND= DM20500 #0          ; UT5-1 Work detection
AND= DM20502 #0          ; UT5-2 Work detection
AND= DM20600 #0          ; UT6-1 Work detection
AND= DM20602 #0          ; UT6-2 Work detection
AND= DM20700 #0          ; UT7-1 Work detection
AND= DM20702 #0          ; UT7-2 Work detection
AND= DM20800 #0          ; UT8-1 Work detection
AND= DM20802 #0          ; UT8-2 Work detection
INV
OUT MR10000              ; INDEX work detect
LDP R50003               ; HOME mode
MPS
SET DM10707.4            ; RB1 SON
CON
SET DM10715.4            ; RB2 SON
CON
SET DM10723.4            ; RB3 SON
CON
SET DM10731.4            ; RB4 SON
CON
SET DM10739.4            ; RB5 SON
CON
SET DM10747.4            ; RB6 SON
CON
SET DM10755.4            ; RB7 SON
CON
SET DM10763.4            ; RB8 SON
CON
SET DM10771.4            ; RB9 SON
MRD
SET DM10779.4            ; RB10 SON
CON
SET DM10787.4            ; R12 SON
CON
SET DM10795.4            ; RB12 SON
CON
SET DM10803.4            ; RB13 SON
MRD
SET MR2104               ; Main index power ON/OFF
CON
SET MR2105               ; Label index1 power ON/OFF
CON
SET MR2106               ; Label index2 power ON/OFF
CON
SET MR2108               ; INDEX Emergency stop
CON
SET DM10850.9            ; Main INDEX Servo on
CON
SET DM10860.9            ; Label INDEX1 Servo on
CON
SET DM10870.9            ; Label INDEX2 Servo on
MRD
SET DM10850.12           ; Main INDEX Emergency
CON
SET DM10860.12           ; Label INDEX1 Emergency
CON
SET DM10870.12           ; Label INDEX2 Emergency
MRD
SET MR9500               ; RB1 EMG REREASE
CON
SET MR9501               ; RB2 EMG REREASE
CON
SET MR9502               ; RB3 EMG REREASE
CON
SET MR9503               ; RB4 EMG REREASE
CON
SET MR9504               ; RB5 EMG REREASE
CON
SET MR9505
CON
SET MR9506
CON
SET MR9507
MPP
SET MR9508
CON
SET MR9509               ; RB10 EMG REREASE
CON
SET MR9510               ; RB11 EMG REREASE
CON
SET MR9511               ; RB12 EMG REREASE
CON
SET MR9512               ; RB13 EMG REREASE
;ｻｲｸﾙﾀｲﾑLOG
LDP R50001               ; AUTO mode
LOGE #0
LDF R50001               ; AUTO mode
LOGD #0
LDP R50209               ; Operation Start
TRGD #0
;電源OFF時ワーク不良にする。UT2.3.4
LDP R50001               ; AUTO mode
MPS
AND LR200
MPS
LD= DM20200 #1           ; UT2-1 Work detection
OR= DM20200 #2           ; UT2-1 Work detection
ANL
MOV #1 DM20204
MRD
LD= DM20202 #1           ; UT2-2 Work detection
OR= DM20202 #2           ; UT2-2 Work detection
ANL
MOV #1 DM20206
MRD
LD= DM20300 #2           ; UT3-1 Work detection
OR= DM20300 #3           ; UT3-1 Work detection
ANL
MOV #1 DM20304
MRD
LD= DM20302 #2           ; UT3-2 Work detection
OR= DM20302 #3           ; UT3-2 Work detection
ANL
MOV #1 DM20306
MRD
LD= DM20400 #3           ; UT4-1 Work detection
OR= DM20400 #4           ; UT4-1 Work detection
ANL
MOV #1 DM20404
MRD
LD= DM20402 #3           ; UT4-2 Work detection
OR= DM20402 #4           ; UT4-2 Work detection
ANL
MOV #1 DM20406
MPP
SET @MR100
MPP
ANB LR200
SET @MR100
STG @MR100
SET LR200
CON
ENDS
LD R50001                ; AUTO mode
AND R50308               ; Waiting task stop
RES LR200
;エラー時間計測
LD R50008                ; Whole ERROR
ANB T601
TMS #601 #1000
LD R50008                ; Whole ERROR
ANP T601
INC DM5030
LDF R50008               ; Whole ERROR
MOV DM5030 DM5031
DW #0 DM5030
LDB R50008               ; Whole ERROR
TMS #600 #10
CON
AND T600
DW #0 DM5030
END
ENDH
