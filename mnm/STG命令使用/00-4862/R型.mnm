DEVICE:53
;MODULE:R型
;MODULE_TYPE:0
;非常停止
;Emergency Stop
LD R50000                ; 即停止
OR R50900                ; TRAP
OR R50010                ; 非常停止
ZRES @MR002 @MR1915
;ｾﾝｻ
LDB R4606                ; R_ﾜｰｸｾｯﾄ 上昇端
AND R4607                ; R_ﾜｰｸｾｯﾄ 下降端
ANB R4608                ; R_位置決めﾁｬｯｸX 閉端
AND R4609                ; R_位置決めﾁｬｯｸX 開端
ANB R4610                ; R_位置決めﾁｬｯｸY 閉端
AND R4611                ; R_位置決めﾁｬｯｸY 開端
ANB R4612                ; R_吸着ﾜｰｸ圧力ｾﾝｻ OUT1
LD R4613                 ; R_破戒ﾜｰｸ圧力ｾﾝｻ OUT2
OR CR2002                ; 常時ON
ANL
OUT @MR115               ; 搬送原点
LDB R50300               ; PAUSE中
ANB R50113               ; L側COF接合部ｴﾗｰ中
ANB R50108               ; ｴﾗｰ発生中
OUT @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
LD R53105                ; Line-B（右） 型動作要求
ANB R53210               ; R側型ｻｲｸﾙ動作中
MPS
AND LR000                ; 吸着OFFで位置決めﾊﾞｰｼﾞｮﾝ
SET @MR100               ; 型動作開始
MPP
ANB LR000                ; 吸着OFFで位置決めﾊﾞｰｼﾞｮﾝ
SET @MR300               ; 型動作開始　吸着OFFにてXY位置決
;型動作　吸着ONでX,Y軸位置決め
STG @MR100               ; 型動作開始
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
SET R53210               ; R側型ｻｲｸﾙ動作中
CON
JMP @MR101
STG @MR101
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
MPS
LD= DM514 #1
AND R4609                ; R_位置決めﾁｬｯｸX 開端
AND R4611                ; R_位置決めﾁｬｯｸY 開端
ANL
SET MR6506               ; R_ﾜｰｸｾｯﾄ上下 上昇端
CON
RES MR6507               ; R_ﾜｰｸｾｯﾄ上下 下降端
CON
AND R4606                ; R_ﾜｰｸｾｯﾄ 上昇端
ANB R4607                ; R_ﾜｰｸｾｯﾄ 下降端
JMP @MR102
MPP
AND<> DM514 #1
JMP @MR202
STG @MR102
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
SET MR6502               ; R_位置決めﾁｬｯｸY 閉端
CON
ANB R4611                ; R_位置決めﾁｬｯｸY 開端
JMP @MR103
STG @MR103
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
SET MR6504               ; R_位置決めﾁｬｯｸX 閉端
CON
ANB R4609                ; R_位置決めﾁｬｯｸX 開端
TMR #362 #2
CON
AND T362
JMP @MR104
STG @MR104
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
RES MR6702               ; R_ﾜｰｸ確認 吸着
CON
SET MR6703               ; R_ﾜｰｸ確認 吸着
CON
TMR @5 #3
CON
AND @T5
JMP @MR105
STG @MR105
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
RES MR6502               ; R_位置決めﾁｬｯｸY 閉端
CON
RES MR6504               ; R_位置決めﾁｬｯｸX 閉端
CON
TMR @4 #3
CON
AND @T4
JMP @MR106
STG @MR106
SET MR6502               ; R_位置決めﾁｬｯｸY 閉端
CON
SET MR6504               ; R_位置決めﾁｬｯｸX 閉端
CON
TMR @0 #3
CON
AND @T0
JMP @MR107
STG @MR107
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
MPS
AND R4612                ; R_吸着ﾜｰｸ圧力ｾﾝｻ OUT1
JMP @MR110
MPP
ANB R4612                ; R_吸着ﾜｰｸ圧力ｾﾝｻ OUT1
TMR #363 #50
CON
AND T363
SET @MR1500              ; 吸着ｴﾗｰ
CON
ENDS
STG @MR110
SET R53109               ; Line-B（右） 溶着動作要求
CON
JMP @MR111
STG @MR111
ANB R53109               ; Line-B（右） 溶着動作要求
AND R53111               ; Line-B（右） 溶着動作完了
RES R53111               ; Line-B（右） 溶着動作完了
CON
JMP @MR200
STG @MR200
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
RES MR6502               ; R_位置決めﾁｬｯｸY 閉端
CON
RES MR6504               ; R_位置決めﾁｬｯｸX 閉端
CON
AND R4609                ; R_位置決めﾁｬｯｸX 開端
AND R4611                ; R_位置決めﾁｬｯｸY 開端
JMP @MR201
STG @MR201
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
RES MR6703               ; R_ﾜｰｸ確認 吸着
CON
RES MR6702               ; R_ﾜｰｸ確認 吸着
CON
JMP @MR202
STG @MR202
RES MR6703               ; R_ﾜｰｸ確認 吸着
CON
RES MR6702               ; R_ﾜｰｸ確認 吸着
CON
SET MR6507               ; R_ﾜｰｸｾｯﾄ上下 下降端
CON
RES MR6506               ; R_ﾜｰｸｾｯﾄ上下 上昇端
CON
AND R4607                ; R_ﾜｰｸｾｯﾄ 下降端
ANB R4606                ; R_ﾜｰｸｾｯﾄ 上昇端
JMP @MR203
STG @MR203
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
RES R53210               ; R側型ｻｲｸﾙ動作中
CON
SET R53107               ; Line-B（右） 型動作完了
CON
ENDS
;型動作　吸着OFFでX,Y軸位置決め
STG @MR300               ; 型動作開始　吸着OFFにてXY位置決
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
SET R53210               ; R側型ｻｲｸﾙ動作中
CON
JMP @MR301
STG @MR301
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
MPS
LD= DM514 #1
AND R4609                ; R_位置決めﾁｬｯｸX 開端
AND R4611                ; R_位置決めﾁｬｯｸY 開端
ANL
SET MR6506               ; R_ﾜｰｸｾｯﾄ上下 上昇端
CON
RES MR6507               ; R_ﾜｰｸｾｯﾄ上下 下降端
CON
AND R4606                ; R_ﾜｰｸｾｯﾄ 上昇端
ANB R4607                ; R_ﾜｰｸｾｯﾄ 下降端
RES R53212               ; R側吸着確認 位置決め後
CON
JMP @MR302
MPP
AND<> DM514 #1
JMP @MR402
STG @MR302
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
RES MR6702               ; R_ﾜｰｸ確認 吸着
CON
SET MR6703               ; R_ﾜｰｸ確認 吸着
CON
MPS
AND R4612                ; R_吸着ﾜｰｸ圧力ｾﾝｻ OUT1
SET R53212               ; R側吸着確認 位置決め後
CON
JMP @MR303
MPP
ANB R4612                ; R_吸着ﾜｰｸ圧力ｾﾝｻ OUT1
TMR @1 #50
CON
AND @T1
SET @MR1500              ; 吸着ｴﾗｰ
CON
ENDS
STG @MR303
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
SET MR6502               ; R_位置決めﾁｬｯｸY 閉端
CON
ANB R4611                ; R_位置決めﾁｬｯｸY 開端
JMP @MR304
STG @MR304
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
SET MR6504               ; R_位置決めﾁｬｯｸX 閉端
CON
ANB R4609                ; R_位置決めﾁｬｯｸX 開端
TMR @6 #2
CON
AND @T6
JMP @MR305
STG @MR305
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
MPS
AND R4612                ; R_吸着ﾜｰｸ圧力ｾﾝｻ OUT1
RES R53212               ; R側吸着確認 位置決め後
CON
JMP @MR310
MPP
ANB R4612                ; R_吸着ﾜｰｸ圧力ｾﾝｻ OUT1
TMR @3 #50
CON
AND @T3
SET @MR1500              ; 吸着ｴﾗｰ
CON
ENDS
STG @MR310
SET R53109               ; Line-B（右） 溶着動作要求
CON
JMP @MR311
STG @MR311
ANB R53109               ; Line-B（右） 溶着動作要求
AND R53111               ; Line-B（右） 溶着動作完了
RES R53111               ; Line-B（右） 溶着動作完了
CON
JMP @MR400
STG @MR400
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
RES MR6502               ; R_位置決めﾁｬｯｸY 閉端
CON
RES MR6504               ; R_位置決めﾁｬｯｸX 閉端
CON
AND R4609                ; R_位置決めﾁｬｯｸX 開端
AND R4611                ; R_位置決めﾁｬｯｸY 開端
JMP @MR401
STG @MR401
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
RES MR6703               ; R_ﾜｰｸ確認 吸着
CON
RES MR6702               ; R_ﾜｰｸ確認 吸着
CON
JMP @MR402
STG @MR402
RES MR6703               ; R_ﾜｰｸ確認 吸着
CON
RES MR6702               ; R_ﾜｰｸ確認 吸着
CON
SET MR6507               ; R_ﾜｰｸｾｯﾄ上下 下降端
CON
RES MR6506               ; R_ﾜｰｸｾｯﾄ上下 上昇端
CON
AND R4607                ; R_ﾜｰｸｾｯﾄ 下降端
ANB R4606                ; R_ﾜｰｸｾｯﾄ 上昇端
JMP @MR403
STG @MR403
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
RES R53210               ; R側型ｻｲｸﾙ動作中
CON
SET R53107               ; Line-B（右） 型動作完了
CON
ENDS
;ｱﾗｰﾑ処理
STG @MR1500              ; 吸着ｴﾗｰ
SET R50008               ; 全体ｴﾗｰ発生
CON
SET R50114               ; R側COF接合部ｴﾗｰ中
CON
SET R51004               ; R側COF接合部表示
CON
SET R210                 ; RETRY SW　目隠し解除
CON
SET R50611               ; ERR27
CON
RES MR6703               ; R_ﾜｰｸ確認 吸着
CON
SET MR6702               ; R_ﾜｰｸ確認 吸着
CON
JMP @MR1501
MOV #27 DM400            ; 表示画面No.
STG @MR1501
TMR @2 #3
CON
AND @T2
RES MR6703               ; R_ﾜｰｸ確認 吸着
CON
RES MR6702               ; R_ﾜｰｸ確認 吸着
CON
RES MR6502               ; R_位置決めﾁｬｯｸY 閉端
CON
RES MR6504               ; R_位置決めﾁｬｯｸX 閉端
CON
AND R4609                ; R_位置決めﾁｬｯｸX 開端
AND R4611                ; R_位置決めﾁｬｯｸY 開端
JMP @MR1502
STG @MR1502
AND R50008               ; 全体ｴﾗｰ発生
JMP @MR1503
STG @MR1503
ANB R50008               ; 全体ｴﾗｰ発生
MPS
ANB R310                 ; ﾊﾟｽｽｲｯﾁON
JMP @MR1505
MPP
AND R310                 ; ﾊﾟｽｽｲｯﾁON
JMP @MR1504
STG @MR1504
ANB R50008               ; 全体ｴﾗｰ発生
LDA #8
CON
STA DM514
CON
RES R310                 ; ﾊﾟｽｽｲｯﾁON
CON
RES R210                 ; RETRY SW　目隠し解除
CON
MPS
AND LR000                ; 吸着OFFで位置決めﾊﾞｰｼﾞｮﾝ
SET @MR200
CON
ENDS
MPP
ANB LR000                ; 吸着OFFで位置決めﾊﾞｰｼﾞｮﾝ
SET @MR400
CON
ENDS
STG @MR1505
ANB R50008               ; 全体ｴﾗｰ発生
JMP @MR1506
STG @MR1506
ANB R50008               ; 全体ｴﾗｰ発生
RES R210                 ; RETRY SW　目隠し解除
CON
RES R310                 ; ﾊﾟｽｽｲｯﾁON
CON
MPS
AND LR000                ; 吸着OFFで位置決めﾊﾞｰｼﾞｮﾝ
SET @MR102
CON
ENDS
MPP
ANB LR000                ; 吸着OFFで位置決めﾊﾞｰｼﾞｮﾝ
SET @MR302
CON
ENDS
END
ENDH
