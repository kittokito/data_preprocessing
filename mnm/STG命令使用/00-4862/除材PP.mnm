DEVICE:53
;MODULE:除材PP
;MODULE_TYPE:0
;非常停止 / Emergency stop
LD R50000                ; 即停止
OR R50900                ; TRAP
OR R50010                ; 非常停止
ZRES @MR002 @MR2915
CON
ZRES R54500 R54815       ; 除材PPZ軸 上昇位置
CON
OUT @MR001
TMR @0 #5                ; Wait Timer-00
;条件ﾌﾗｸﾞ / Flug
LD R54500                ; 除材PPZ軸 上昇位置
OR R54503                ; 除材PPZ軸 待機位置
AND R54508               ; 除材PPX軸 待機位置
ANB R4200                ; 除材_ﾁｬｯｸ 開端
AND R4201                ; 除材_ﾁｬｯｸ 閉端
OUT @MR005               ; 移載PP部ｼﾘﾝﾀﾞ原位置
LDB R50300               ; PAUSE中
ANB R50114               ; R側COF接合部ｴﾗｰ中
ANB R50108               ; ｴﾗｰ発生中
OUT @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
LD<.D DM2252 #472000     ; 移載P&P X軸_現在座標表示用
OUT R54304               ; 移載PP 干渉外
;AUTO動作 / AUTO OPERATION
LD R50011                ; AUTO MODE
ANB MR11207              ; 除材PPｻｲｸﾙ中
AND MR11007              ; 除材PP start
LD LR41000               ; 自動ﾊﾟﾗﾒｰﾀ1　通常動作
OR LR41001               ; 自動ﾊﾟﾗﾒｰﾀ2　払い出し
OR LR41003               ; 自動ﾊﾟﾗﾒｰﾀ4
OR LR41006               ; 自動ﾊﾟﾗﾒｰﾀ7
ANL
SET MR11207              ; 除材PPｻｲｸﾙ中
CON
RES MR11007              ; 除材PP start
CON
SET @MR2000              ; AUTO START
STG @MR2000              ; AUTO START
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
RES MR12002              ; 除材RB動作中
CON
DW #0 DM15010
CON
MPS
LD MR11206               ; 移載PPｻｲｸﾙ中
AND R38408               ; 除材P&P Y軸 P1 位置　表示
LD R4208                 ; ﾜｰｸ確認ｾﾝｻ
OR CR2002                ; 常時ON
ANL
AND R54305               ; ﾊﾞｯﾌｧ位置　ﾜｰｸ除材要求
AND R54304               ; 移載PP 干渉外
ANB R54303               ; 移載PP ﾊﾞｯﾌｧ部移載中
ANL
SET R54302               ; 除材RB Y軸　ﾊﾞｯﾌｧ部除材中
CON
JMP @MR2001
MPP
ANB MR11206              ; 移載PPｻｲｸﾙ中
MPS
LD R4208                 ; ﾜｰｸ確認ｾﾝｻ
AND R54305               ; ﾊﾞｯﾌｧ位置　ﾜｰｸ除材要求
AND R54304               ; 移載PP 干渉外
ANB R54303               ; 移載PP ﾊﾞｯﾌｧ部移載中
ANL
SET R54302               ; 除材RB Y軸　ﾊﾞｯﾌｧ部除材中
CON
JMP @MR2001
MPP
LDB R4208                ; ﾜｰｸ確認ｾﾝｻ
ANB R54305               ; ﾊﾞｯﾌｧ位置　ﾜｰｸ除材要求
ANL
JMP @MR2300
STG @MR2001
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
SET MR12002              ; 除材RB動作中
CON
RES R54305               ; ﾊﾞｯﾌｧ位置　ﾜｰｸ除材要求
CON
SET @MR2900              ; 一時停止禁止
CON
JMP @MR2002
STG @MR2002
SET @MR2600              ; RB Y軸　ﾊﾞｯﾌｧ側移動動作
CON
JMP @MR2003
STG @MR2003
AND @MR2607              ; RB Y軸　ﾊﾞｯ側移動動作完了
RES @MR2900              ; 一時停止禁止
CON
RES @MR2607              ; RB Y軸　ﾊﾞｯ側移動動作完了
CON
JMP @MR2004
STG @MR2004
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
SET MR6100               ; 除材ﾁｬｯｸ 開
CON
AND R4200                ; 除材_ﾁｬｯｸ 開端
SET @MR2900              ; 一時停止禁止
CON
JMP @MR2005
STG @MR2005
SET @MR2608              ; RB Z軸　ﾊﾞｯﾌｧ側下降動作
CON
JMP @MR2006
STG @MR2006
AND @MR2615              ; RB Z軸　ﾊﾞｯﾌｧ側下降動作完了
RES @MR2900              ; 一時停止禁止
CON
RES @MR2615              ; RB Z軸　ﾊﾞｯﾌｧ側下降動作完了
CON
JMP @MR2007
STG @MR2007
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
RES MR6100               ; 除材ﾁｬｯｸ 開
CON
AND R4201                ; 除材_ﾁｬｯｸ 閉端
TMR #400 #2
CON
AND T400
SET @MR2900              ; 一時停止禁止
CON
JMP @MR2008
STG @MR2008
SET @MR2700              ; RB Z軸　上昇動作
CON
JMP @MR2009
STG @MR2009
AND @MR2707              ; RB Z軸　上昇動作完
RES R54302               ; 除材RB Y軸　ﾊﾞｯﾌｧ部除材中
CON
RES @MR2900              ; 一時停止禁止
CON
RES @MR2707              ; RB Z軸　上昇動作完
CON
JMP @MR2010
STG @MR2010
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
SET @MR2900              ; 一時停止禁止
CON
JMP @MR2011
STG @MR2011
SET @MR2708              ; RB Y軸　CV側移動動作
CON
JMP @MR2012
STG @MR2012
AND @MR2715              ; RB Y軸　CV側移動動作完
RES @MR2900              ; 一時停止禁止
CON
RES @MR2715              ; RB Y軸　CV側移動動作完
CON
JMP @MR2100
STG @MR2100
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
MPS
AND R4203                ; 除材_ﾊﾝﾄﾞ 取P確認ｾﾝｻ
JMP @MR2200
MPP
ANB R4203                ; 除材_ﾊﾝﾄﾞ 取P確認ｾﾝｻ
SET R54306               ; 取P無し
CON
JMP @MR2200
STG @MR2200
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
AND R52010               ; ｺﾝﾍﾞｱ受け取り可
AND T247                 ; 除材側位置決め ﾜｰｸ確認ｾﾝｻ
AND T250                 ; 下流側ｵｰﾊﾞｰﾌﾛｰｾﾝｻ ﾜｰｸ無し
SET @MR2900              ; 一時停止禁止
CON
JMP @MR2205
STG @MR2205
SET @MR2808              ; RB Z軸　CV側下降動作
CON
RES R52010               ; ｺﾝﾍﾞｱ受け取り可
CON
JMP @MR2201
STG @MR2201
AND @MR2815              ; RB Z軸　CV側下降動作完了
RES @MR2900              ; 一時停止禁止
CON
RES @MR2815              ; RB Z軸　CV側下降動作完了
CON
JMP @MR2202
STG @MR2202
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
SET MR6100               ; 除材ﾁｬｯｸ 開
CON
AND R4200                ; 除材_ﾁｬｯｸ 開端
TMR #401 #2
CON
AND T401
SET @MR2900              ; 一時停止禁止
CON
JMP @MR2203
STG @MR2203
SET @MR2700              ; RB Z軸　上昇動作
CON
JMP @MR2204
STG @MR2204
AND @MR2707              ; RB Z軸　上昇動作完
RES @MR2900              ; 一時停止禁止
CON
@INC DM352               ; OUTPUT
CON
SET R52007               ; 受渡し完了
CON
RES R54302               ; 除材RB Y軸　ﾊﾞｯﾌｧ部除材中
CON
RES @MR2707              ; RB Z軸　上昇動作完
CON
JMP @MR2101
STG @MR2101
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
SET @MR2900              ; 一時停止禁止
CON
JMP @MR2102
STG @MR2102
SET @MR2800              ; RB Y軸　待機位置動作
CON
JMP @MR2103
STG @MR2103
AND @MR2807              ; RB Y軸　待機位置動作完了
RES @MR2900              ; 一時停止禁止
CON
RES @MR2807              ; RB Y軸　待機位置動作完了
CON
JMP @MR2000              ; AUTO START
STG @MR2300
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
RES R52010               ; ｺﾝﾍﾞｱ受け取り可
CON
RES MR12002              ; 除材RB動作中
CON
RES MR11207              ; 除材PPｻｲｸﾙ中
CON
SET MR11406              ; 除材PPｻｲｸﾙ終了
CON
ENDS
STG @MR2600              ; RB Y軸　ﾊﾞｯﾌｧ側移動動作
MPS
AND MR14902              ; 除材RB-Y軸_移動完了
JMP @MR2601
MPP
MCALL POINT_MOVE2 #3 #1 #2 MR14911 MR14902;除材RB-Y軸_位置決め異常  除材RB-Y軸_移動完了
STG @MR2601
RES MR14902              ; 除材RB-Y軸_移動完了
CON
ANB MR14902              ; 除材RB-Y軸_移動完了
SET @MR2607              ; RB Y軸　ﾊﾞｯ側移動動作完了
CON
ENDS
STG @MR2608              ; RB Z軸　ﾊﾞｯﾌｧ側下降動作
MPS
AND MR15102              ; 除材RB-Z軸_移動完了
JMP @MR2609
MPP
MCALL POINT_MOVE2 #3 #2 #2 MR15111 MR15102;除材RB-Z軸_位置決め異常  除材RB-Z軸_移動完了
STG @MR2609
RES MR15102              ; 除材RB-Z軸_移動完了
CON
ANB MR15102              ; 除材RB-Z軸_移動完了
SET @MR2615              ; RB Z軸　ﾊﾞｯﾌｧ側下降動作完了
CON
ENDS
STG @MR2700              ; RB Z軸　上昇動作
MPS
AND MR15102              ; 除材RB-Z軸_移動完了
JMP @MR2701
MPP
MCALL POINT_MOVE2 #3 #2 #1 MR15111 MR15102;除材RB-Z軸_位置決め異常  除材RB-Z軸_移動完了
STG @MR2701
RES MR15102              ; 除材RB-Z軸_移動完了
CON
ANB MR15102              ; 除材RB-Z軸_移動完了
SET @MR2707              ; RB Z軸　上昇動作完
CON
ENDS
STG @MR2708              ; RB Y軸　CV側移動動作
MPS
AND MR14902              ; 除材RB-Y軸_移動完了
JMP @MR2709
MPP
MCALL POINT_MOVE2 #3 #1 #3 MR14911 MR14902;除材RB-Y軸_位置決め異常  除材RB-Y軸_移動完了
STG @MR2709
RES MR14902              ; 除材RB-Y軸_移動完了
CON
ANB MR14902              ; 除材RB-Y軸_移動完了
SET @MR2715              ; RB Y軸　CV側移動動作完
CON
ENDS
STG @MR2808              ; RB Z軸　CV側下降動作
MPS
AND MR15102              ; 除材RB-Z軸_移動完了
JMP @MR2809
MPP
MCALL POINT_MOVE2 #3 #2 #3 MR15111 MR15102;除材RB-Z軸_位置決め異常  除材RB-Z軸_移動完了
STG @MR2809
RES MR15102              ; 除材RB-Z軸_移動完了
CON
ANB MR15102              ; 除材RB-Z軸_移動完了
SET @MR2815              ; RB Z軸　CV側下降動作完了
CON
ENDS
STG @MR2800              ; RB Y軸　待機位置動作
MPS
AND MR14902              ; 除材RB-Y軸_移動完了
JMP @MR2801
MPP
MCALL POINT_MOVE2 #3 #1 #1 MR14911 MR14902;除材RB-Y軸_位置決め異常  除材RB-Y軸_移動完了
STG @MR2801
RES MR14902              ; 除材RB-Y軸_移動完了
CON
ANB MR14902              ; 除材RB-Y軸_移動完了
SET @MR2807              ; RB Y軸　待機位置動作完了
CON
ENDS
LD @MR2900               ; 一時停止禁止
OUT R51103               ; 除材PP PACK
END
ENDH
