DEVICE:53
;MODULE:Data_Shif
;MODULE_TYPE:0
;SCRIPT_TYPE:
;OneSystem Main-Module
;
;-----------------------------------------
;ModuleName	:	Group1_Task0
;ModuleType	:	Main Module
;Line		:	μTFP CAV Plate Assembly Line
;Cell		:	2Cell
;Function	:	data_Shift _ﾃﾞｰﾀｼﾌﾄ 制御
;Ver			:	1.00　NAT:ARIMOTO　2012/11/07
;-----------------------------------------
;<<Task LocalDevice>>
;/*項目			/*割付ｴﾘｱ				/*備考
;---------------------------------------------------------------------			
;1st	給材部		EM30000～EM30499		1st 50word×10
;2st	ﾊﾞｯﾌｧ部		EM30500～EM30999		2st 50word×10
;3st	転写部		EM31000～EM31499		3st 50word×10
;4st	除材部		EM31500～EM31999		4st 50word×10
;5　 除材ﾊﾝﾄﾞ    EM32100～EM32149        1ﾜｰｸ分 50word
;----------------------------------------------------------------------
;<<Task LocalDevice>>  HOME時一時ﾃﾞｰﾀ退避ｴﾘｱ
;/*項目			/*割付ｴﾘｱ				/*備考
;---------------------------------------------------------------------			
;1st 給材部		EM35000～EM35499		1st 50word×10
;2st ﾊﾞｯﾌｧ部		EM35500～EM35999		2st 50word×10
;3st 転写部		EM36000～EM36499		3st 50word×10
;4st 除材部		EM36500～EM36999		4st 50word×10
;----------------------------------------------------------------------
;ﾄﾚｰｻﾋﾞﾘﾃｨｰﾃﾞﾊﾞｲｽ内訳
;----------------------------------------------------------------------
;ﾃﾞｰﾀｱﾄﾞﾚｽ	|データ名						|データ形式	|コメント
;E*_0		|ﾜｰｸ情報						|BIN		|0:ﾜｰｸ無 1:ﾜｰｸ有
;E*_1　　　　|インデックス治具NO				|BIN		|1～4:治具NO
;E*_2　　　　|インデックス ST NO				|BIN		|1～4:ST NO
;E*_3　　　	|INDEXポジション（冶具ﾎﾟｼﾞｼｮﾝ）	|BIN		|値01～40
;E*_4　　　　|転写状況　　					|BIN		|0:未転写 1:転写済
;E*_5	　　|ST(CRのみ)						|BIN		|
;E*_6	　　|Wafer ID/CR フレームID1		|ASCII		|1Cellより受け取り/次Cellに引渡し
;E*_7　　　　|Wafer ID/CR フレームID2		|ASCII		|1Cellより受け取り/次Cellに引渡し
;E*_8　　　　|Wafer ID/CR フレームID3		|ASCII		|1Cellより受け取り/次Cellに引渡し
;E*_9		|Wafer ID/CR フレームID4		|ASCII		|1Cellより受け取り/次Cellに引渡し
;E*_10		|Wafer ID/CR フレームID5		|ASCII		|1Cellより受け取り/次Cellに引渡し
;E*_11		|Wafer ID/CR フレームID6		|ASCII		|1Cellより受け取り/次Cellに引渡し
;E*_12		|Wafer ID/CR フレームID7		|ASCII		|1Cellより受け取り/次Cellに引渡し
;E*_13		|Wafer ID/CR フレームID8		|ASCII		|1Cellより受け取り/次Cellに引渡し
;E*_14		|CAV WF FRAME ADDRESS			|BIN		|1Cellより受け取り/次Cellに引渡し
;E*_15		|WORK DATA						|BIN		|1Cellより受け取り/次Cellに引渡し　100：良品 200：ﾀﾞﾐｰ
;E*_16		|接着時刻 YY（年）				|BIN		|次Cellに引渡し
;E*_17		|接着時刻 MM（月）				|BIN		|次Cellに引渡し
;E*_18		|接着時刻 DD（日）				|BIN		|次Cellに引渡し
;E*_19		|接着時刻 HH（時）				|BIN		|次Cellに引渡し
;E*_20		|接着時刻 MM（分）				|BIN		|次Cellに引渡し
;E*_21		|接着時刻 SS（秒）				|BIN		|次Cellに引渡し
;E*_22		|LOT識別用No					|BIN		|1Cellより受け取り/次Cellに引渡し
;E*_23		|機種ﾃﾞｰﾀCRC値					|BIN		|
;E*_24		|スキージ台スピード				|BIN		|mm/S
;E*_25		|（スキージ台スピード）			|BIN		|
;E*_26		|スキージ台圧力					|BIN		|kPa
;E*_27		|（スキージ台圧力）				|BIN		|
;E*_28		|シリンジ交換後時間				|BIN		|sec
;E*_29		|（シリンジ交換後時間）			|BIN		|
;E*_30		|R/B剥ぎ取りスピード			|BIN		|mm/S
;E*_31		|（R/B剥ぎ取りスピード）		|BIN		|
;E*_32		|温度							|BIN		|℃
;E*_33		|（温度）						|BIN	 	|
;E*_34		|湿度							|BIN		|％
;E*_35		|（湿度）						|BIN		|
;E*_36		|接着剤Lot No					|ASCII		|
;E*_37		|接着剤Lot No					|ASCII		|
;E*_38		|接着剤Lot No					|ASCII		|
;E*_39		|接着剤Lot No					|ASCII		|
;E*_40		|接着剤Lot No					|ASCII		|
;E*_41		|接着剤Lot No					|ASCII		|
;E*_42		|接着剤Lot No					|ASCII		|
;E*_43		|接着剤Lot No					|ASCII		|
;E*_44		|WF_取出し時間（YY)	（年）		|BIN		|1Cellより受け取り/次Cellに引渡し
;E*_45		|WF_取出し時間（MM)	（年）		|BIN		|1Cellより受け取り/次Cellに引渡し
;E*_46		|WF_取出し時間（DD)	（年）		|BIN		|1Cellより受け取り/次Cellに引渡し
;E*_47		|WF_取出し時間（HH)	（年）		|BIN		|1Cellより受け取り/次Cellに引渡し
;E*_48		|WF_取出し時間（MM)	（年）		|BIN		|1Cellより受け取り/次Cellに引渡し
;E*_49		|WF_取出し時間（SS)	（年）		|BIN		|1Cellより受け取り/次Cellに引渡し
;----------------------------------------------------------------------
;<h1/>HOME INDEX Data Shift 
LD MR10010               ; 原点復帰動作中
AND MR012                ; Index HOME Posi Data Request 
@BMOV EM30000 EM35000 #2000;1stﾜｰｸ情報
RES MR012                ; Index HOME Posi Data Request 
;退避したﾜｰｸﾃﾞｰﾀの冶具Noを参照し、ﾃﾞｰﾀの書き込みを行う。
;'原点復帰後のINDEX治具No.とﾜｰｸﾎﾟｼﾞｼｮﾝをｾｯﾄする
;
;for em29990 = 0 to 9
;	em29992 = em29990 * 50
;	em30001:em29992 = 1
;	em30003:em29992 = em29990 + 1
;next
;for em29990 = 0 to 9
;	em29992 = em29990 * 50
;	em30501:em29992 = 4
;	em30503:em29992 = em29990 + 31
;next
;for em29990 = 0 to 9
;	em29992 = em29990 * 50
;	em31001:em29992 = 3
;	em31003:em29992 = em29990 + 21
;next
;for em29990 = 0 to 9
;	em29992 = em29990 * 50
;	em31501:em29992 = 2
;	em31503:em29992 = em29990 + 11
;next
;
LD MR10010               ; 原点復帰動作中
AND MR013                ; Index HOME Data Shift finished 
MPS
AND= EM35001 #1
@BMOV EM35000 EM30000 #500;1stﾜｰｸ情報
@BMOV EM36500 EM31500 #500;ﾜｰｸ情報1
@BMOV EM36000 EM31000 #500;ﾜｰｸ情報
@BMOV EM35500 EM30500 #500;2stﾜｰｸ情報
@FMOV #0 EM35000 #2000
MRD
AND= EM35001 #2
@BMOV EM35000 EM31500 #500;ﾜｰｸ情報1
@BMOV EM36500 EM31000 #500;ﾜｰｸ情報
@BMOV EM36000 EM30500 #500;2stﾜｰｸ情報
@BMOV EM35500 EM30000 #500;1stﾜｰｸ情報
@FMOV #0 EM35000 #2000
MRD
AND= EM35001 #3
@BMOV EM35000 EM31000 #500;ﾜｰｸ情報
@BMOV EM36500 EM30500 #500;2stﾜｰｸ情報
@BMOV EM36000 EM30000 #500;1stﾜｰｸ情報
@BMOV EM35500 EM31500 #500;ﾜｰｸ情報1
@FMOV #0 EM35000 #2000
MRD
AND= EM35001 #4
@BMOV EM35000 EM30500 #500;2stﾜｰｸ情報
@BMOV EM36500 EM30000 #500;1stﾜｰｸ情報
@BMOV EM36000 EM31500 #500;ﾜｰｸ情報1
@BMOV EM35500 EM31000 #500;ﾜｰｸ情報
@FMOV #0 EM35000 #2000
MRD
RES MR013                ; Index HOME Data Shift finished 
MPP
NCJ #1000
;'原点復帰後のINDEX治具No.とﾜｰｸﾎﾟｼﾞｼｮﾝをｾｯﾄする
;
;for em29990 = 0 to 9
;
LD CR2002                ; 常時ON
MOV #0 EM29990
LABEL #2000
LD> EM29990 #9
CJ #2001
;	em29992 = em29990 * 50
;
LD CR2002                ; 常時ON
LDA EM29990
CON
EXT
CON
MUL.L +50
CON
STA EM29992
;	em30001:em29992 = 1
;
LD CR2002                ; 常時ON
LDA EM29992
CON
EXT
CON
STA.L Z11
CON
MOV #1 EM30001:Z11       ; インデックス治具NO
;	em30003:em29992 = em29990 + 1
;
LD CR2002                ; 常時ON
LDA EM29992
CON
EXT
CON
STA.L Z11
CON
LDA EM29990
CON
EXT
CON
ADD.L +1
CON
STA EM30003:Z11          ; INDEXポジション（冶具ﾎﾟｼﾞｼｮﾝ１～
;next
;
LD CR2002                ; 常時ON
INC EM29990
LDB CR2009               ; 演算結果が負
CJ #2000
LABEL #2001
;for em29990 = 0 to 9
;
LD CR2002                ; 常時ON
MOV #0 EM29990
LABEL #2002
LD> EM29990 #9
CJ #2003
;	em29992 = em29990 * 50
;
LD CR2002                ; 常時ON
LDA EM29990
CON
EXT
CON
MUL.L +50
CON
STA EM29992
;	em30501:em29992 = 4
;
LD CR2002                ; 常時ON
LDA EM29992
CON
EXT
CON
STA.L Z11
CON
MOV #4 EM30501:Z11       ; インデックス治具NO
;	em30503:em29992 = em29990 + 31
;
LD CR2002                ; 常時ON
LDA EM29992
CON
EXT
CON
STA.L Z11
CON
LDA EM29990
CON
EXT
CON
ADD.L +31
CON
STA EM30503:Z11          ; INDEXポジション（冶具ﾎﾟｼﾞｼｮﾝ１～
;next
;
LD CR2002                ; 常時ON
INC EM29990
LDB CR2009               ; 演算結果が負
CJ #2002
LABEL #2003
;for em29990 = 0 to 9
;
LD CR2002                ; 常時ON
MOV #0 EM29990
LABEL #2004
LD> EM29990 #9
CJ #2005
;	em29992 = em29990 * 50
;
LD CR2002                ; 常時ON
LDA EM29990
CON
EXT
CON
MUL.L +50
CON
STA EM29992
;	em31001:em29992 = 3
;
LD CR2002                ; 常時ON
LDA EM29992
CON
EXT
CON
STA.L Z11
CON
MOV #3 EM31001:Z11       ; インデックス治具NO
;	em31003:em29992 = em29990 + 21
;
LD CR2002                ; 常時ON
LDA EM29992
CON
EXT
CON
STA.L Z11
CON
LDA EM29990
CON
EXT
CON
ADD.L +21
CON
STA EM31003:Z11          ; INDEXポジション（冶具ﾎﾟｼﾞｼｮﾝ１～
;next
;
LD CR2002                ; 常時ON
INC EM29990
LDB CR2009               ; 演算結果が負
CJ #2004
LABEL #2005
;for em29990 = 0 to 9
;
LD CR2002                ; 常時ON
MOV #0 EM29990
LABEL #2006
LD> EM29990 #9
CJ #2007
;	em29992 = em29990 * 50
;
LD CR2002                ; 常時ON
LDA EM29990
CON
EXT
CON
MUL.L +50
CON
STA EM29992
;	em31501:em29992 = 2
;
LD CR2002                ; 常時ON
LDA EM29992
CON
EXT
CON
STA.L Z11
CON
MOV #2 EM31501:Z11       ; インデックス治具NO
;	em31503:em29992 = em29990 + 11
;
LD CR2002                ; 常時ON
LDA EM29992
CON
EXT
CON
STA.L Z11
CON
LDA EM29990
CON
EXT
CON
ADD.L +11
CON
STA EM31503:Z11          ; INDEXポジション（冶具ﾎﾟｼﾞｼｮﾝ１～
;next
;
LD CR2002                ; 常時ON
INC EM29990
LDB CR2009               ; 演算結果が負
CJ #2006
LABEL #2007
LABEL #1000
;
;<h1/>AUTO/MENTE INDEX Data Shift 
;
;手順
;1．給材部ﾃﾞｰﾀ退避 EM30000→EM59500（ﾜｰｸ①～⑩のﾃﾞｰﾀ）
;2．除材部→給材部 M31500→EM30000（ﾜｰｸ①～⑩のﾃﾞｰﾀ）
;3．給材部 EM30000（ﾜｰｸ①～⑩のﾃﾞｰﾀ）を初期化
;※ｲﾝﾃﾞｯｸｽ冶具No,ｲﾝﾃﾞｯｸｽﾎﾟｼﾞｼｮﾝ保持
;4．給材部　EM30000（ﾜｰｸ①～⑩のﾃﾞｰﾀ）
;ｲﾝﾃﾞｯｸｽSTNo#1を代入
;5．転写部→除材部 EM31000→EM31500（ﾜｰｸ①～⑩のﾃﾞｰﾀ）
;6．除材部 EM31500（ﾜｰｸ①～⑩のﾃﾞｰﾀ）
;ｲﾝﾃﾞｯｸｽSTNo#4を代入
;7．ﾊﾞｯﾌｧ部→転写部 EM30500→EM31000（ﾜｰｸ①～⑩のﾃﾞｰﾀ）
;8．転写部 EM31000（ﾜｰｸ①～⑩のﾃﾞｰﾀ）
;ｲﾝﾃﾞｯｸｽSTNo#3を代入
;9．退避ﾃﾞｰﾀ→ﾊﾞｯﾌｧ部 EM59500→EM30500（ﾜｰｸ①～⑩のﾃﾞｰﾀ）
;10．ﾊﾞｯﾌｧ部 EM30500（ﾜｰｸ①～⑩のﾃﾞｰﾀ）
;ｲﾝﾃﾞｯｸｽSTNo#2を代入
STG MR014                ; Index Data shift Request 
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
OR R46102                ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
OR R46101                ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
ANL
@BMOV EM30000 EM59500 #500;1stﾜｰｸ情報
@BMOV EM31500 EM30000 #500;ﾜｰｸ情報1  1stﾜｰｸ情報
@BMOV EM31000 EM31500 #500;ﾜｰｸ情報  ﾜｰｸ情報1
@BMOV EM30500 EM31000 #500;2stﾜｰｸ情報  ﾜｰｸ情報
@BMOV EM59500 EM30500 #500;2stﾜｰｸ情報
@BMOV EM31006 EM32406 #10; Wafer ID/CR フレームID1  Wafer ID/CR フレームID1
MPS
@LDA EM30001             ; インデックス治具NO
CON
@STA EM32500             ; TB1情報　ｽﾃｰｼｮﾝNo.
CON
@LDA EM30501             ; インデックス治具NO
CON
@STA EM32510             ; TB2情報　ｽﾃｰｼｮﾝNo.
CON
@LDA EM31001             ; インデックス治具NO
CON
@STA EM32520             ; TB3情報　ｽﾃｰｼｮﾝNo.
CON
@LDA EM31501             ; インデックス治具NO
CON
@STA EM32530             ; TB4情報　ｽﾃｰｼｮﾝNo.
MPP
TMR #1645 #5
CON
AND T1645
JMP MR509
STG MR509
SET MR510                ; 完了
CON
ENDS
;<h1/>AUTO LOAD P&P(1cell)→INDEX(1ST) Data recive 
;
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND MR114                ; from 給材P&P Data Shift Request
AND= DM35100 #1          ; ﾃｰﾌﾞﾙ　ﾜｰｸ要求番号
BMOV W030 EM30006 #10    ; Wafer ID/CR フレームID1
BMOV W040 EM30022 #1     ; LOT識別用No
BMOV W05D EM30023 #1     ; ｾﾙ1_CRC値  機種ﾃﾞｰﾀCRC値
BMOV W03A EM30044 #6     ; WF_取出し時間（YY)
MOV #1 EM30000           ; 1stﾜｰｸ情報
BMOV EM30006 EM32306 #10 ; Wafer ID/CR フレームID1  Wafer ID/CR フレームID1
MOV EM30001 EM32301      ; インデックス治具NO  インデックス治具NO
MOV EM30002 EM32302      ; インデックス ST NO  インデックス ST NO
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND MR114                ; from 給材P&P Data Shift Request
AND= DM35100 #2          ; ﾃｰﾌﾞﾙ　ﾜｰｸ要求番号
BMOV W030 EM30056 #10    ; Wafer ID/CR フレームID1
BMOV W040 EM30072 #1     ; LOT識別用No
BMOV W05D EM30073 #1     ; ｾﾙ1_CRC値  機種ﾃﾞｰﾀCRC値
BMOV W03A EM30094 #6     ; WF_取出し時間（YY)
MOV #1 EM30050           ; ﾜｰｸ情報
BMOV EM30056 EM32306 #10 ; Wafer ID/CR フレームID1  Wafer ID/CR フレームID1
MOV EM30051 EM32301      ; インデックス治具NO  インデックス治具NO
MOV EM30052 EM32302      ; インデックス ST NO  インデックス ST NO
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND MR114                ; from 給材P&P Data Shift Request
AND= DM35100 #3          ; ﾃｰﾌﾞﾙ　ﾜｰｸ要求番号
BMOV W030 EM30106 #10    ; Wafer ID/CR フレームID1
BMOV W040 EM30122 #1     ; LOT識別用No
BMOV W05D EM30123 #1     ; ｾﾙ1_CRC値  機種ﾃﾞｰﾀCRC値
BMOV W03A EM30144 #6     ; WF_取出し時間（YY)
MOV #1 EM30100           ; ﾜｰｸ情報
BMOV EM30106 EM32306 #10 ; Wafer ID/CR フレームID1  Wafer ID/CR フレームID1
MOV EM30101 EM32301      ; インデックス治具NO  インデックス治具NO
MOV EM30102 EM32302      ; インデックス ST NO  インデックス ST NO
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND MR114                ; from 給材P&P Data Shift Request
AND= DM35100 #4          ; ﾃｰﾌﾞﾙ　ﾜｰｸ要求番号
BMOV W030 EM30156 #10    ; Wafer ID/CR フレームID1
BMOV W040 EM30172 #1     ; LOT識別用No
BMOV W05D EM30173 #1     ; ｾﾙ1_CRC値  機種ﾃﾞｰﾀCRC値
BMOV W03A EM30194 #6     ; WF_取出し時間（YY)
MOV #1 EM30150           ; ﾜｰｸ情報
BMOV EM30156 EM32306 #10 ; Wafer ID/CR フレームID1  Wafer ID/CR フレームID1
MOV EM30151 EM32301      ; インデックス治具NO  インデックス治具NO
MOV EM30152 EM32302      ; インデックス ST NO  インデックス ST NO
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND MR114                ; from 給材P&P Data Shift Request
AND= DM35100 #5          ; ﾃｰﾌﾞﾙ　ﾜｰｸ要求番号
BMOV W030 EM30206 #10    ; Wafer ID/CR フレームID1
BMOV W040 EM30222 #1     ; LOT識別用No
BMOV W05D EM30223 #1     ; ｾﾙ1_CRC値  機種ﾃﾞｰﾀCRC値
BMOV W03A EM30244 #6     ; WF_取出し時間（YY)
MOV #1 EM30200           ; ﾜｰｸ情報
BMOV EM30206 EM32306 #10 ; Wafer ID/CR フレームID1  Wafer ID/CR フレームID1
MOV EM30201 EM32301      ; インデックス治具NO  インデックス治具NO
MOV EM30202 EM32302      ; インデックス ST NO  インデックス ST NO
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND MR114                ; from 給材P&P Data Shift Request
AND= DM35100 #6          ; ﾃｰﾌﾞﾙ　ﾜｰｸ要求番号
BMOV W030 EM30256 #10    ; Wafer ID/CR フレームID1
BMOV W040 EM30272 #1     ; LOT識別用No
BMOV W05D EM30273 #1     ; ｾﾙ1_CRC値  機種ﾃﾞｰﾀCRC値
BMOV W03A EM30294 #6     ; WF_取出し時間（YY)
MOV #1 EM30250           ; ﾜｰｸ情報
BMOV EM30256 EM32306 #10 ; Wafer ID/CR フレームID1  Wafer ID/CR フレームID1
MOV EM30251 EM32301      ; インデックス治具NO  インデックス治具NO
MOV EM30252 EM32302      ; インデックス ST NO  インデックス ST NO
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND MR114                ; from 給材P&P Data Shift Request
AND= DM35100 #7          ; ﾃｰﾌﾞﾙ　ﾜｰｸ要求番号
BMOV W030 EM30306 #10    ; Wafer ID/CR フレームID1
BMOV W040 EM30322 #1     ; LOT識別用No
BMOV W05D EM30323 #1     ; ｾﾙ1_CRC値  機種ﾃﾞｰﾀCRC値
BMOV W03A EM30344 #6     ; WF_取出し時間（YY)
MOV #1 EM30300           ; ﾜｰｸ情報
BMOV EM30306 EM32306 #10 ; Wafer ID/CR フレームID1  Wafer ID/CR フレームID1
MOV EM30301 EM32301      ; インデックス治具NO  インデックス治具NO
MOV EM30302 EM32302      ; インデックス ST NO  インデックス ST NO
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND MR114                ; from 給材P&P Data Shift Request
AND= DM35100 #8          ; ﾃｰﾌﾞﾙ　ﾜｰｸ要求番号
BMOV W030 EM30356 #10    ; Wafer ID/CR フレームID1
BMOV W040 EM30372 #1     ; LOT識別用No
BMOV W05D EM30373 #1     ; ｾﾙ1_CRC値  機種ﾃﾞｰﾀCRC値
BMOV W03A EM30394 #6     ; WF_取出し時間（YY)
MOV #1 EM30350           ; ﾜｰｸ情報
BMOV EM30356 EM32306 #10 ; Wafer ID/CR フレームID1  Wafer ID/CR フレームID1
MOV EM30351 EM32301      ; インデックス治具NO  インデックス治具NO
MOV EM30352 EM32302      ; インデックス ST NO  インデックス ST NO
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND MR114                ; from 給材P&P Data Shift Request
AND= DM35100 #9          ; ﾃｰﾌﾞﾙ　ﾜｰｸ要求番号
BMOV W030 EM30406 #10    ; Wafer ID/CR フレームID1
BMOV W040 EM30422 #1     ; LOT識別用No
BMOV W05D EM30423 #1     ; ｾﾙ1_CRC値  機種ﾃﾞｰﾀCRC値
BMOV W03A EM30444 #6     ; WF_取出し時間（YY)
MOV #1 EM30400           ; ﾜｰｸ情報
BMOV EM30406 EM32306 #10 ; Wafer ID/CR フレームID1  Wafer ID/CR フレームID1
MOV EM30401 EM32301      ; インデックス治具NO  インデックス治具NO
MOV EM30402 EM32302      ; インデックス ST NO  インデックス ST NO
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND MR114                ; from 給材P&P Data Shift Request
AND= DM35100 #10         ; ﾃｰﾌﾞﾙ　ﾜｰｸ要求番号
BMOV W030 EM30456 #10    ; Wafer ID/CR フレームID1
BMOV W040 EM30472 #1     ; LOT識別用No
BMOV W05D EM30473 #1     ; ｾﾙ1_CRC値  機種ﾃﾞｰﾀCRC値
BMOV W03A EM30494 #6     ; WF_取出し時間（YY)
BMOV EM30456 EM32306 #10 ; Wafer ID/CR フレームID1  Wafer ID/CR フレームID1
MOV EM30451 EM32301      ; インデックス治具NO  インデックス治具NO
MOV EM30452 EM32302      ; インデックス ST NO  インデックス ST NO
MOV #1 EM30450           ; ﾜｰｸ情報
;<h1/>2CELLﾜｰｸﾃﾞｰﾀ書き込み
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND MR409                ; 転写ﾃﾞｰﾀ書き込みﾌﾗｸﾞ
MEP
LDA EM40010              ; AUTO_転写時間_YY
CON
STA EM31016              ; 接着時刻 YY（年）
CON
STA EM31066              ; 接着時刻 YY（年）
CON
STA EM31116              ; 接着時刻 YY（年）
CON
STA EM31166              ; 接着時刻 YY（年）
CON
STA EM31216              ; 接着時刻 YY（年）
CON
STA EM31266              ; 接着時刻 YY（年）
CON
STA EM31316              ; 接着時刻 YY（年）
CON
STA EM31366              ; 接着時刻 YY（年）
CON
STA EM31416              ; 接着時刻 YY（年）
CON
STA EM31466              ; 接着時刻 YY（年）
CON
STA EM32416              ; 接着時刻 YY（年）
CON
LDA EM40011              ; AUTO_転写時間_MM
CON
STA EM31017              ; 接着時刻 MM（月）
CON
STA EM31067              ; 接着時刻 MM（月）
CON
STA EM31117              ; 接着時刻 MM（月）
CON
STA EM31167              ; 接着時刻 MM（月）
CON
STA EM31217              ; 接着時刻 MM（月）
CON
STA EM31267              ; 接着時刻 MM（月）
CON
STA EM31317              ; 接着時刻 MM（月）
CON
STA EM31367              ; 接着時刻 MM（月）
CON
STA EM31417              ; 接着時刻 MM（月）
CON
STA EM31467              ; 接着時刻 MM（月）
CON
STA EM32417              ; 接着時刻 MM（月）
CON
LDA EM40012              ; AUTO_転写時間_DD
CON
STA EM31018              ; 接着時刻 DD（日）
CON
STA EM31068              ; 接着時刻 DD（日）
CON
STA EM31118              ; 接着時刻 DD（日）
CON
STA EM31168              ; 接着時刻 DD（日）
CON
STA EM31218              ; 接着時刻 DD（日）
CON
STA EM31268              ; 接着時刻 DD（日）
CON
STA EM31318              ; 接着時刻 DD（日）
CON
STA EM31368              ; 接着時刻 DD（日）
CON
STA EM31418              ; 接着時刻 DD（日）
CON
STA EM31468              ; 接着時刻 DD（日）
CON
STA EM32418              ; 接着時刻 DD（日）
CON
LDA EM40013              ; AUTO_転写時間_HH
CON
STA EM31019              ; 接着時刻 HH（時）
CON
STA EM31069              ; 接着時刻 HH（時）
CON
STA EM31119              ; 接着時刻 HH（時）
CON
STA EM31169              ; 接着時刻 HH（時）
CON
STA EM31219              ; 接着時刻 HH（時）
CON
STA EM31269              ; 接着時刻 HH（時）
CON
STA EM31319              ; 接着時刻 HH（時）
CON
STA EM31369              ; 接着時刻 HH（時）
CON
STA EM31419              ; 接着時刻 HH（時）
CON
STA EM31469              ; 接着時刻 HH（時）
CON
STA EM32419              ; 接着時刻 HH（時）
CON
LDA EM40014              ; AUTO_転写時間_MM
CON
STA EM31020              ; 接着時刻 MM（分）
CON
STA EM31070              ; 接着時刻 MM（分）
CON
STA EM31120              ; 接着時刻 MM（分）
CON
STA EM31170              ; 接着時刻 MM（分）
CON
STA EM31220              ; 接着時刻 MM（分）
CON
STA EM31270              ; 接着時刻 MM（分）
CON
STA EM31320              ; 接着時刻 MM（分）
CON
STA EM31370              ; 接着時刻 MM（分）
CON
STA EM31420              ; 接着時刻 MM（分）
CON
STA EM31470              ; 接着時刻 MM（分）
CON
STA EM32420              ; 接着時刻 MM（分）
CON
LDA EM40015              ; AUTO_転写時間_SS
CON
STA EM31021              ; 接着時刻 SS（秒）
CON
STA EM31071              ; 接着時刻 SS（秒）
CON
STA EM31121              ; 接着時刻 SS（秒）
CON
STA EM31171              ; 接着時刻 SS（秒）
CON
STA EM31221              ; 接着時刻 SS（秒）
CON
STA EM31271              ; 接着時刻 SS（秒）
CON
STA EM31321              ; 接着時刻 SS（秒）
CON
STA EM31371              ; 接着時刻 SS（秒）
CON
STA EM31421              ; 接着時刻 SS（秒）
CON
STA EM31471              ; 接着時刻 SS（秒）
CON
STA EM32421              ; 接着時刻 SS（秒）
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND MR409                ; 転写ﾃﾞｰﾀ書き込みﾌﾗｸﾞ
MEP
LDA EM40002              ; AUTO_ｽｷｰｼﾞ台ｽﾋﾟｰﾄﾞ取得
CON
STA EM31024              ; スキージ台スピード
CON
STA EM31074              ; スキージ台スピード
CON
STA EM31124              ; スキージ台スピード
CON
STA EM31174              ; スキージ台スピード
CON
STA EM31224              ; スキージ台スピード
CON
STA EM31274              ; スキージ台スピード
CON
STA EM31324              ; スキージ台スピード
CON
STA EM31374              ; スキージ台スピード
CON
STA EM31424              ; スキージ台スピード
CON
STA EM31474              ; スキージ台スピード
CON
STA EM32424              ; スキージ台スピード
CON
LDA EM40004              ; AUTO_ｽｷｰｼﾞ台吸着圧取得
CON
STA EM31026              ; スキージ台圧力
CON
STA EM31076              ; スキージ台圧力
CON
STA EM31126              ; スキージ台圧力
CON
STA EM31176              ; スキージ台圧力
CON
STA EM31226              ; スキージ台圧力
CON
STA EM31276              ; スキージ台圧力
CON
STA EM31326              ; スキージ台圧力
CON
STA EM31376              ; スキージ台圧力
CON
STA EM31426              ; スキージ台圧力
CON
STA EM31476              ; スキージ台圧力
CON
STA EM32426              ; スキージ台圧力
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND MR409                ; 転写ﾃﾞｰﾀ書き込みﾌﾗｸﾞ
MEP
LDA.D DM25220            ; ﾎﾟｯﾄﾀｲﾑﾘｾｯﾄ時間
CON
STA.D EM31028            ; シリンジ交換後時間
CON
STA.D EM31078            ; シリンジ交換後時間
CON
STA.D EM31128            ; シリンジ交換後時間
CON
STA.D EM31178            ; シリンジ交換後時間
CON
STA.D EM31228            ; シリンジ交換後時間
CON
STA.D EM31278            ; シリンジ交換後時間
CON
STA.D EM31328            ; シリンジ交換後時間
CON
STA.D EM31378            ; シリンジ交換後時間
CON
STA.D EM31428            ; シリンジ交換後時間
CON
STA.D EM31478            ; シリンジ交換後時間
CON
STA EM32428
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND MR409                ; 転写ﾃﾞｰﾀ書き込みﾌﾗｸﾞ
MEP
BMOV DM27230 EM30036 #8  ; 接着剤Lot No
BMOV DM27230 EM30086 #8  ; 接着剤Lot No
BMOV DM27230 EM30136 #8  ; 接着剤Lot No
BMOV DM27230 EM30186 #8  ; 接着剤Lot No
BMOV DM27230 EM30236 #8  ; 接着剤Lot No
BMOV DM27230 EM30286 #8  ; 接着剤Lot No
BMOV DM27230 EM30336 #8  ; 接着剤Lot No
BMOV DM27230 EM30386 #8  ; 接着剤Lot No
BMOV DM27230 EM30436 #8  ; 接着剤Lot No
BMOV DM27230 EM30486 #8  ; 接着剤Lot No
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND MR409                ; 転写ﾃﾞｰﾀ書き込みﾌﾗｸﾞ
MEP
LDA EM40008              ; AUTO_はぎ取りｽﾋﾟｰﾄﾞ取得
CON
STA EM31030              ; R/B剥ぎ取りスピード
CON
STA EM31080              ; R/B剥ぎ取りスピード
CON
STA EM31130              ; R/B剥ぎ取りスピード
CON
STA EM31180              ; R/B剥ぎ取りスピード
CON
STA EM31230              ; R/B剥ぎ取りスピード
CON
STA EM31280              ; R/B剥ぎ取りスピード
CON
STA EM31330              ; R/B剥ぎ取りスピード
CON
STA EM31380              ; R/B剥ぎ取りスピード
CON
STA EM31430              ; R/B剥ぎ取りスピード
CON
STA EM31480              ; R/B剥ぎ取りスピード
CON
STA EM32430              ; R/B剥ぎ取りスピード
;↓未記入
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND MR409                ; 転写ﾃﾞｰﾀ書き込みﾌﾗｸﾞ
@MOV #0 EM31032          ; 温度
@MOV #0 EM31034          ; 湿度
LD MR409                 ; 転写ﾃﾞｰﾀ書き込みﾌﾗｸﾞ
TMR #1740 #2
CON
AND T1740
RES MR409                ; 転写ﾃﾞｰﾀ書き込みﾌﾗｸﾞ
;<h1/>AUTO INDEX(4ST)→UNLOAD P&P Data shift  
;
STG MR314                ; 除材P&P Data shift Request
MPS
AND= DM35010 #1          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
SEC EM31516 EM29900      ; 接着時刻 YY（年）  演算結果
MPS
LDA.D EM29900            ; 演算結果
CON
SUB.D EM31528            ; シリンジ交換後時間
CON
STA.D EM31528            ; シリンジ交換後時間
CON
@BMOV EM31500 EM32100 #50; ﾜｰｸ情報1  ﾜｰｸ情報
MRD
@FMOV #0 EM31500 #1      ; ﾜｰｸ情報1
MRD
@FMOV #0 EM31502 #1      ; インデックス ST NO
MPP
@FMOV #0 EM31504 #46
MRD
AND= DM35010 #2          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
SEC EM31566 EM29900      ; 接着時刻 YY（年）  演算結果
MPS
LDA.D EM29900            ; 演算結果
CON
SUB.D EM31578            ; シリンジ交換後時間
CON
STA.D EM31578            ; シリンジ交換後時間
CON
@BMOV EM31550 EM32100 #50; ﾜｰｸ情報2  ﾜｰｸ情報
MRD
@FMOV #0 EM31550 #1      ; ﾜｰｸ情報2
MRD
@FMOV #0 EM31552 #1      ; インデックス ST NO
MPP
@FMOV #0 EM31554 #46
MRD
AND= DM35010 #3          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
SEC EM31616 EM29900      ; 接着時刻 YY（年）  演算結果
MPS
LDA.D EM29900            ; 演算結果
CON
SUB.D EM31628            ; シリンジ交換後時間
CON
STA.D EM31628            ; シリンジ交換後時間
CON
@BMOV EM31600 EM32100 #50; ﾜｰｸ情報  ﾜｰｸ情報
MRD
@FMOV #0 EM31600 #1      ; ﾜｰｸ情報
MRD
@FMOV #0 EM31602 #1      ; インデックス ST NO
MPP
@FMOV #0 EM31604 #46
MRD
AND= DM35010 #4          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
SEC EM31666 EM29900      ; 接着時刻 YY（年）  演算結果
MPS
LDA.D EM29900            ; 演算結果
CON
SUB.D EM31678            ; シリンジ交換後時間
CON
STA.D EM31678            ; シリンジ交換後時間
CON
@BMOV EM31650 EM32100 #50; ﾜｰｸ情報  ﾜｰｸ情報
MRD
@FMOV #0 EM31650 #1      ; ﾜｰｸ情報
MRD
@FMOV #0 EM31652 #1      ; インデックス ST NO
MPP
@FMOV #0 EM31654 #46
MRD
AND= DM35010 #5          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
SEC EM31716 EM29900      ; 接着時刻 YY（年）  演算結果
MPS
LDA.D EM29900            ; 演算結果
CON
SUB.D EM31728            ; シリンジ交換後時間
CON
STA.D EM31728            ; シリンジ交換後時間
CON
@BMOV EM31700 EM32100 #50; ﾜｰｸ情報  ﾜｰｸ情報
MRD
@FMOV #0 EM31700 #1      ; ﾜｰｸ情報
MRD
@FMOV #0 EM31702 #1      ; インデックス ST NO
MPP
@FMOV #0 EM31704 #46
MRD
AND= DM35010 #6          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
SEC EM31766 EM29900      ; 接着時刻 YY（年）  演算結果
MPS
LDA.D EM29900            ; 演算結果
CON
SUB.D EM31778            ; シリンジ交換後時間
CON
STA.D EM31778            ; シリンジ交換後時間
CON
@BMOV EM31750 EM32100 #50; ﾜｰｸ情報  ﾜｰｸ情報
MRD
@FMOV #0 EM31750 #1      ; ﾜｰｸ情報
MRD
@FMOV #0 EM31752 #1      ; インデックス ST NO
MPP
@FMOV #0 EM31754 #46
MRD
AND= DM35010 #7          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
SEC EM31816 EM29900      ; 接着時刻 YY（年）  演算結果
MPS
LDA.D EM29900            ; 演算結果
CON
SUB.D EM31828            ; シリンジ交換後時間
CON
STA.D EM31828            ; シリンジ交換後時間
CON
@BMOV EM31800 EM32100 #50; ﾜｰｸ情報  ﾜｰｸ情報
MRD
@FMOV #0 EM31800 #1      ; ﾜｰｸ情報
MRD
@FMOV #0 EM31802 #1      ; インデックス ST NO
MPP
@FMOV #0 EM31804 #46
MRD
AND= DM35010 #8          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
SEC EM31866 EM29900      ; 接着時刻 YY（年）  演算結果
MPS
LDA.D EM29900            ; 演算結果
CON
SUB.D EM31878            ; シリンジ交換後時間
CON
STA.D EM31878            ; シリンジ交換後時間
CON
@BMOV EM31850 EM32100 #50; ﾜｰｸ情報  ﾜｰｸ情報
MRD
@FMOV #0 EM31850 #1      ; ﾜｰｸ情報
MRD
@FMOV #0 EM31852 #1      ; インデックス ST NO
MPP
@FMOV #0 EM31854 #46
MRD
AND= DM35010 #9          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
SEC EM31916 EM29900      ; 接着時刻 YY（年）  演算結果
MPS
LDA.D EM29900            ; 演算結果
CON
SUB.D EM31928            ; シリンジ交換後時間
CON
STA.D EM31928            ; シリンジ交換後時間
CON
@BMOV EM31900 EM32100 #50; ﾜｰｸ情報  ﾜｰｸ情報
MRD
@FMOV #0 EM31900 #1      ; ﾜｰｸ情報
MRD
@FMOV #0 EM31902 #1      ; インデックス ST NO
MPP
@FMOV #0 EM31904 #46     ; 転写状態
MRD
AND= DM35010 #10         ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
SEC EM31966 EM29900      ; 接着時刻 YY（年）  演算結果
MPS
LDA.D EM29900            ; 演算結果
CON
SUB.D EM31978            ; シリンジ交換後時間
CON
STA.D EM31978            ; シリンジ交換後時間
CON
@BMOV EM31950 EM32100 #50; ﾜｰｸ情報  ﾜｰｸ情報
MRD
@FMOV #0 EM31950 #1      ; ﾜｰｸ情報
MRD
@FMOV #0 EM31952 #1      ; インデックス ST NO
MPP
@FMOV #0 EM31954 #46
MPP
TMR #1741 #2
CON
AND T1741
JMP MR513
STG MR513
SET MR514                ; 完了
CON
ENDS
;<h1/>AUTO UNLOAD P&P→3cell Data shift  
;
STG MR414                ; to 3cell Data shift Request
@BMOV EM32106 W060 #16   ; Wafer ID/CR フレームID1
@BMOV EM32103 W070 #1    ; INDEXポジション（冶具ﾎﾟｼﾞｼｮﾝ１～
@BMOV EM32122 W071 #1    ; LOT識別用No
@BMOV W060 W07C0 #10
TMR #8 #1
CON
AND T8
JMP MR512
STG MR512
AND= W068 EM32114        ; CAV WF FRAME ADDRESS
SET MR508                ; ﾃﾞｰﾀ書き込み完了
CON
ENDS
;<h1/>SD Card Data Write
STG MR410                ; SDCard書き込みﾌﾗｸﾞ
MOV #2 W2000             ; 工程No
BMOV EM32106 W2001 #10   ; Wafer ID/CR フレームID1  CAV WF_ID
BMOV EM32144 W200B #6    ; WF_取出し時間（YY)  WF_取出し時間（YY)
BMOV EM32103 W2011 #1    ; INDEXポジション（冶具ﾎﾟｼﾞｼｮﾝ１～  INDEX　Position
BMOV EM32124 W2012 #6    ; スキージ台スピード  ｽｷｰｼﾞ台ｽﾋﾟｰﾄﾞ
BMOV EM32136 W2018 #8    ; 接着剤Lot No  接着剤Lot No
BMOV EM32130 W2020 #6    ; R/B剥ぎ取りスピード  剥ぎ取りｽﾋﾟｰ^ﾄﾞ
BMOV EM32116 W2026 #6    ; 接着時刻 YY（年）  転写日時(YY)
JMP MR412
STG MR412
MPS
LDB R42001               ; ﾄﾚｻﾋﾞ1完了
ANB R42002               ; ﾄﾚｻﾋﾞ1中
ANL
SET R42000               ; ﾄﾚｻﾋﾞ1開始
CON
JMP MR511
MPP
AND R42001               ; ﾄﾚｻﾋﾞ1完了
RES R42001               ; ﾄﾚｻﾋﾞ1完了
STG MR511
AND R42002               ; ﾄﾚｻﾋﾞ1中
SET MR413                ; SDCard書き込み完了
CON
ENDS
;<h1/>DATA MONITOR DISPLAY CONTROL  
;
LDP MR808                ; DATA ﾓﾆﾀ1 上SW
AND>= EM39000 #0
AND<= EM39000 #4
INC EM39000
LDP MR809                ; DATA ﾓﾆﾀ1 下SW
AND>= EM39000 #2
AND<= EM39000 #5
DEC EM39000
LDP MR810                ; DATA ﾓﾆﾀ2 上SW
AND>= EM39001 #0
AND<= EM39001 #9
INC EM39001
LDP MR811                ; DATA ﾓﾆﾀ2 下SW
AND>= EM39001 #2
AND<= EM39001 #10
DEC EM39001
LD CR2008                ; 運転開始時1ｽｷｬﾝON
MPS
AND= EM39000 #0
MOV #1 EM39000
MPP
AND= EM39001 #0
MOV #1 EM39001
LD CR2002                ; 常時ON
AND>= EM39000 #1
AND<= EM39000 #5
LDA EM39001
CON
MUL #50
CON
SUB #50
CON
STA EM39010
LD CR2002                ; 常時ON
MPS
AND= EM39000 #1
ADRSET EM30000 EM39090   ; 1stﾜｰｸ情報
ADRADD.S EM39010 EM39090
BMOV *EM39090 EM39500 #50
MRD
AND= EM39000 #2
ADRSET EM30500 EM39090   ; 2stﾜｰｸ情報
ADRADD.S EM39010 EM39090
BMOV *EM39090 EM39500 #50
MRD
AND= EM39000 #3
ADRSET EM31000 EM39090   ; ﾜｰｸ情報
ADRADD.S EM39010 EM39090
BMOV *EM39090 EM39500 #50
MRD
AND= EM39000 #4
ADRSET EM31500 EM39090   ; ﾜｰｸ情報1
ADRADD.S EM39010 EM39090
BMOV *EM39090 EM39500 #50
MPP
AND= EM39000 #5
BMOV EM32100 EM39500 #50 ; ﾜｰｸ情報
;
END
ENDH
