DEVICE:53
;MODULE:ｽﾚｰﾌﾞ
;MODULE_TYPE:0
LD R54200                ; TRAP
OR R53010                ; 非常停止
ZRES @MR000 @MR215       ; PAUSE条件確認へ
LD MR810                 ; 給材P&P移動条件
AND MR811                ; 除材P&P移動条件
AND MR812                ; COF給材P&P移動条件
AND MR813                ; COF搬送XP&P移動条件
AND MR814                ; ﾄﾚﾁｪﾝZ軸移動可条件
AND MR815                ; ﾄﾚﾁｪﾝX移動可条件
AND MR900                ; L側ｱﾗｲﾒﾝﾄ移動可条件
AND MR20011              ; 手動原点復帰
OUT MR20000              ; RB動作無
LD R53315                ; 原点復帰完了
ANB R53300               ; PAUSE中
ANB R53301               ; ﾄﾚﾁｪﾝ部PAUSE中
ANB R53000               ; 自動運転中
ANB R53002               ; STEP動作中
OUT MR20001              ; 手動
LD MR20001               ; 手動
ANB MR20000              ; RB動作無
OUT MR20002              ; 手動動作中ﾎﾟｰｽﾞ禁止
LDB R54200               ; TRAP
TMR @0 #10               ; 遅延ﾀｲﾏ
CON
ANP @T0                  ; 遅延ﾀｲﾏ
SET @MR000               ; PAUSE条件確認へ
CON
SET @MR100               ; ﾄﾚﾁｪﾝ部ｶﾊﾞｰ開へ
;***** Pause 判断 / Pause Judge  *****
;
STG @MR000               ; PAUSE条件確認へ
ANB MR20002              ; 手動動作中ﾎﾟｰｽﾞ禁止
ANB R53300               ; PAUSE中
LD R202                  ; TP PAUSE SW
OR R1009                 ; 背面ﾎﾟｰｽﾞSW
ORB R1000                ; ｾｰﾌﾃｨﾄﾞｱｽｲｯﾁ 開
ANL
SET R53300               ; PAUSE中
CON
JMP @MR001
;一時停止確認
STG @MR001
MPS
LDB R54400               ; ｺﾝﾍﾞｱ部 PACK
ANB R54401               ; 給材P&P部 PACK
ANB R54402               ; 除材P&P部 PACK
ANB R54403               ; COF搬送部 PACK
ANB R54404               ; ｱﾗｲﾒﾝﾄ部 PACK
ANB R54405               ; COF給材部 PACK
ANB R54406               ; ﾄﾚﾁｪﾝ部 PACK
ANB R54407               ; L側ﾜｰｸｾｯﾄ部 PACK
ANB R54408               ; R側ﾜｰｸｾｯﾄ部 PACK
ANB R54409               ; ﾒｲﾝ動作部 PACK
ANB MR20002              ; 手動動作中ﾎﾟｰｽﾞ禁止
ANL
RES MR2001               ; 供給側ｺﾝﾍﾞｱ ON
CON
RES MR2002               ; 戻り側ｺﾝﾍﾞｱ ON
CON
JMP @MR002
MRD
AND MR20002              ; 手動動作中ﾎﾟｰｽﾞ禁止
RES R53300               ; PAUSE中
CON
RES MR611                ; 一時停止解除中
CON
JMP @MR000               ; PAUSE条件確認へ
MPP
LD R54400                ; ｺﾝﾍﾞｱ部 PACK
OR R54401                ; 給材P&P部 PACK
OR R54402                ; 除材P&P部 PACK
OR R54403                ; COF搬送部 PACK
OR R54404                ; ｱﾗｲﾒﾝﾄ部 PACK
OR R54405                ; COF給材部 PACK
OR R54406                ; ﾄﾚﾁｪﾝ部 PACK
OR R54407                ; L側ﾜｰｸｾｯﾄ部 PACK
OR R54408                ; R側ﾜｰｸｾｯﾄ部 PACK
OR R54409                ; ﾒｲﾝ動作部 PACK
LDF R200                 ; ﾊﾟﾈﾙ内 ｽﾀｰﾄSW
ORF R1008                ; 背面ｽﾀｰﾄSW
ANL
ANL
RES R53300               ; PAUSE中
CON
RES MR611                ; 一時停止解除中
CON
JMP @MR000               ; PAUSE条件確認へ
STG @MR002
TMR @1 #10               ; 遅延ﾀｲﾏ
CON
AND @T1                  ; 遅延ﾀｲﾏ
SET MR2013               ; ﾄﾚﾁｪﾝ扉用 ｾｰﾌﾃｨﾄﾞｱｽｲｯﾁ 開
CON
SET MR2000               ; ｾｰﾌﾃｨﾄﾞｱｽｲｯﾁ 開
CON
JMP @MR003
;***** Pause 条件復帰待ち / Pause Clear  Judge  *****
;
STG @MR003
ANB R202                 ; TP PAUSE SW
ANB R1009                ; 背面ﾎﾟｰｽﾞSW
MPS
LD R200                  ; ﾊﾟﾈﾙ内 ｽﾀｰﾄSW
OR R1008                 ; 背面ｽﾀｰﾄSW
ANL
RES MR610                ; 一時停止解除待ち表示
CON
SET MR611                ; 一時停止解除中
CON
RES MR2013               ; ﾄﾚﾁｪﾝ扉用 ｾｰﾌﾃｨﾄﾞｱｽｲｯﾁ 開
CON
RES MR2000               ; ｾｰﾌﾃｨﾄﾞｱｽｲｯﾁ 開
CON
JMP @MR004               ; 004
MPP
LDB R200                 ; ﾊﾟﾈﾙ内 ｽﾀｰﾄSW
ANB R1008                ; 背面ｽﾀｰﾄSW
ANL
SET MR610                ; 一時停止解除待ち表示
STG @MR004               ; 004
TMR @2 #5                ; 遅延
CON
AND @T2                  ; 遅延
JMP @MR005               ; 005
STG @MR005               ; 005
MPS
LD R202                  ; TP PAUSE SW
OR R1009                 ; 背面ﾎﾟｰｽﾞSW
ORB R1000                ; ｾｰﾌﾃｨﾄﾞｱｽｲｯﾁ 開
ORB R1001                ; ﾄﾚﾁｪﾝﾄﾞｱｽｲｯﾁ 開
ANB @MR010
ANL
JMP @MR006
MPP
LDB R200                 ; ﾊﾟﾈﾙ内 ｽﾀｰﾄSW
ANB R1009                ; 背面ﾎﾟｰｽﾞSW
AND R1000                ; ｾｰﾌﾃｨﾄﾞｱｽｲｯﾁ 開
AND R1001                ; ﾄﾚﾁｪﾝﾄﾞｱｽｲｯﾁ 開
ANB @MR006
ANL
JMP @MR010
STG @MR006
ANB R200                 ; ﾊﾟﾈﾙ内 ｽﾀｰﾄSW
ANB R200                 ; ﾊﾟﾈﾙ内 ｽﾀｰﾄSW
ANB R1008                ; 背面ｽﾀｰﾄSW
SET MR2013               ; ﾄﾚﾁｪﾝ扉用 ｾｰﾌﾃｨﾄﾞｱｽｲｯﾁ 開
CON
SET MR2000               ; ｾｰﾌﾃｨﾄﾞｱｽｲｯﾁ 開
CON
JMP @MR003
STG @MR010
TMR @3 #10
CON
AND @T3
MPS
LD R1000                 ; ｾｰﾌﾃｨﾄﾞｱｽｲｯﾁ 開
AND R1000                ; ｾｰﾌﾃｨﾄﾞｱｽｲｯﾁ 開
ANL
MPS
AND R53000               ; 自動運転中
SET MR2001               ; 供給側ｺﾝﾍﾞｱ ON
CON
SET MR2002               ; 戻り側ｺﾝﾍﾞｱ ON
CON
RES R53300               ; PAUSE中
CON
RES MR611                ; 一時停止解除中
CON
JMP @MR000               ; PAUSE条件確認へ
MPP
ANB R53000               ; 自動運転中
RES MR2001               ; 供給側ｺﾝﾍﾞｱ ON
CON
RES MR2002               ; 戻り側ｺﾝﾍﾞｱ ON
CON
RES R53300               ; PAUSE中
CON
RES MR611                ; 一時停止解除中
CON
JMP @MR000               ; PAUSE条件確認へ
MPP
LDB R1000                ; ｾｰﾌﾃｨﾄﾞｱｽｲｯﾁ 開
ORB R1000                ; ｾｰﾌﾃｨﾄﾞｱｽｲｯﾁ 開
ANL
SET MR2013               ; ﾄﾚﾁｪﾝ扉用 ｾｰﾌﾃｨﾄﾞｱｽｲｯﾁ 開
CON
SET MR2000               ; ｾｰﾌﾃｨﾄﾞｱｽｲｯﾁ 開
CON
JMP @MR003
;***** ﾄﾚﾁｪﾝ部ｶﾊﾞｰ　Pause 判断 / Pause Judge  *****
;
STG @MR100               ; ﾄﾚﾁｪﾝ部ｶﾊﾞｰ開へ
MPS
LDB MR20002              ; 手動動作中ﾎﾟｰｽﾞ禁止
ANB R53301               ; ﾄﾚﾁｪﾝ部PAUSE中
ANB R53300               ; PAUSE中
LD R1115                 ; ﾄﾚﾁｪﾝ扉用 背面ﾎﾟｰｽﾞSW
ORB R1001                ; ﾄﾚﾁｪﾝﾄﾞｱｽｲｯﾁ 開
ANL
ANL
SET R44910               ; ﾄﾚﾁｪﾝｶﾊﾞｰ開
CON
SET R53301               ; ﾄﾚﾁｪﾝ部PAUSE中
CON
JMP @MR101
MPP
AND MR20002              ; 手動動作中ﾎﾟｰｽﾞ禁止
JMP @MR100               ; ﾄﾚﾁｪﾝ部ｶﾊﾞｰ開へ
STG @MR101
ANB R54415               ; ﾄﾚﾁｪﾝ部PAUSE禁止
MPS
LD R43601                ; ﾄﾚﾁｪﾝ ﾄﾚｲ搬送X軸 P1
OR R43602                ; ﾄﾚﾁｪﾝ ﾄﾚｲ搬送X軸 P2
ANL
RES MR6704               ; ﾄﾚｰｸﾗﾝﾌﾟ 閉
CON
AND R4509                ; COFﾄﾚｰｸﾗﾝﾌﾟ開端
SET MR2013               ; ﾄﾚﾁｪﾝ扉用 ｾｰﾌﾃｨﾄﾞｱｽｲｯﾁ 開
CON
JMP @MR102
MPP
LDB R43601               ; ﾄﾚﾁｪﾝ ﾄﾚｲ搬送X軸 P1
ANB R43602               ; ﾄﾚﾁｪﾝ ﾄﾚｲ搬送X軸 P2
ANL
SET MR2013               ; ﾄﾚﾁｪﾝ扉用 ｾｰﾌﾃｨﾄﾞｱｽｲｯﾁ 開
CON
JMP @MR102
STG @MR102
ANB R1115                ; ﾄﾚﾁｪﾝ扉用 背面ﾎﾟｰｽﾞSW
MPS
AND R1114                ; ﾄﾚﾁｪﾝ扉用 背面ｽﾀｰﾄSW
RES MR612                ; ﾄﾚﾁｪﾝ部一時停止解除待ち表示
CON
SET MR613                ; ﾄﾚﾁｪﾝ部一時停止解除中
CON
RES MR2013               ; ﾄﾚﾁｪﾝ扉用 ｾｰﾌﾃｨﾄﾞｱｽｲｯﾁ 開
CON
JMP @MR104
MPP
ANB R1114                ; ﾄﾚﾁｪﾝ扉用 背面ｽﾀｰﾄSW
SET MR612                ; ﾄﾚﾁｪﾝ部一時停止解除待ち表示
STG @MR104
TMR @5 #5
CON
AND @T5
JMP @MR105
STG @MR105
MPS
LD R1115                 ; ﾄﾚﾁｪﾝ扉用 背面ﾎﾟｰｽﾞSW
ORB R1001                ; ﾄﾚﾁｪﾝﾄﾞｱｽｲｯﾁ 開
ANB @MR110
ANL
JMP @MR106
MPP
LDB R1115                ; ﾄﾚﾁｪﾝ扉用 背面ﾎﾟｰｽﾞSW
AND R1001                ; ﾄﾚﾁｪﾝﾄﾞｱｽｲｯﾁ 開
ANB @MR106
ANL
JMP @MR110
STG @MR106
ANB R1114                ; ﾄﾚﾁｪﾝ扉用 背面ｽﾀｰﾄSW
SET MR2013               ; ﾄﾚﾁｪﾝ扉用 ｾｰﾌﾃｨﾄﾞｱｽｲｯﾁ 開
CON
JMP @MR102
STG @MR110
TMR @6 #10
CON
AND @T6
MPS
AND R1001                ; ﾄﾚﾁｪﾝﾄﾞｱｽｲｯﾁ 開
SET MR6704               ; ﾄﾚｰｸﾗﾝﾌﾟ 閉
CON
RES R44910               ; ﾄﾚﾁｪﾝｶﾊﾞｰ開
CON
RES R53301               ; ﾄﾚﾁｪﾝ部PAUSE中
CON
RES MR613                ; ﾄﾚﾁｪﾝ部一時停止解除中
CON
JMP @MR100               ; ﾄﾚﾁｪﾝ部ｶﾊﾞｰ開へ
MPP
ANB R1001                ; ﾄﾚﾁｪﾝﾄﾞｱｽｲｯﾁ 開
SET MR2013               ; ﾄﾚﾁｪﾝ扉用 ｾｰﾌﾃｨﾄﾞｱｽｲｯﾁ 開
CON
JMP @MR102
END
ENDH
