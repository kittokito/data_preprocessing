DEVICE:53
;MODULE:BringDown_Scan
;MODULE_TYPE:0
;SCRIPT_TYPE:
;OneSystem UserOpen-Module
;
;-----------------------------------------
;ModuleName	:	BringDown_Scan
;ModuleType	:	UserOpen Module
;Function	:	User Open Function
;-----------------------------------------
;
;Copylight(C) 2011 SEIKO EPSON Corp. All rights reserved.
;[ﾕｰｻﾞｰ解放ﾌｧﾝｸｼｮﾝ共通注意事項]
;・ﾕｰｻﾞｰｵｰﾌﾟﾝｴﾘｱ以外は変更しないで下さい。
;・各Functionの作成上の注意点をよく読んで使用して下さい。
;↓Please do not delete.
;非常停止発生時STGｸﾘｱ
LDP R46104               ; _非常停止中　ﾓｰﾄﾞﾌﾗｸﾞ
ZRES @R000 @R015
CON
ZRES @R1000 @R1915       ; 0.3S flicker
LD CR2002                ; 常時ON
FLIK #30 #30 @R1915      ; 0.3S flicker
;↑Please do not delete.
;<h1/>*Common/共通
;<h1/>Data_Distribut/ﾃﾞｰﾀ変換
;[起動するﾀｲﾐﾝｸﾞ]
;・初期化ﾓｼﾞｭｰﾙ起動直後
;・ﾊﾟﾗﾒｰﾀ変更後
;・運転ﾓｰﾄﾞ開始時(HOME,AUTO,MAINTE初回)
;[作成上の注意点]
;・ﾕｰｻﾞｰｵｰﾌﾟﾝｴﾘｱ以外は修正しないで下さい。
;・動作命令、待ち要素がある記述は禁止します。
;・ﾃﾞｰﾀ処理ﾌﾟﾛｸﾞﾗﾑのみ記述して下さい。
;・STG～JMP命令は@R001～014を使用して下さい。
;・処理終了後は必ず@R015へJMPして下さい。
LD CR2008                ; 運転開始時1ｽｷｬﾝON
SET R40404               ; _ﾊﾟﾗﾒｰﾀ変更後ﾕｰｻﾞｰSTG
LD R40404                ; _ﾊﾟﾗﾒｰﾀ変更後ﾕｰｻﾞｰSTG
SET @R000
;//User Open Area Header
STG @R000
JMP @R015
;//User Open Area Footer
STG @R015
RES R40404               ; _ﾊﾟﾗﾒｰﾀ変更後ﾕｰｻﾞｰSTG
CON
ENDS
;<h1/>Estop_Handle/非常停止発生時
;[作成上の注意点]
;・待ち要素、動作命令記述は禁止します。
;・ﾕｰｻﾞｰI/O、ｸﾞﾛｰﾊﾞﾙｱﾄﾞﾚｽの初期化などを行って下さい。
;・STG～JMP命令は@R101～114を使用して下さい。
;・終了時は必ず@R115へJMPして下さい。
LD R40405                ; _非常停止ﾕｰｻﾞｰSTG
SET @R100
;//User Open Area Header　
;※アクチェータが即停止するようにしてください。
STG @R100
MPS
ZRES R54402 R54403       ; ﾊﾟﾗﾒｰﾀNG  ﾊﾟﾗﾒｰﾀ設定ｴﾗｰ解除
CON
ZRES R57300 R57315       ; Task0 停止要求  受入れTask 受入れ停止要求
CON
ZRES R35000 R39915       ; RB1 MOVE
MRD
RES DM11207.2            ; RB1 STP
CON
RES DM11215.2            ; RB2 STP
CON
RES DM11223.2            ; RB3 STP
CON
RES MR2009               ; SCARA RB 非常停止
MRD
ZRES MR20000 MR20915     ; Task1→0 ﾌｰﾌﾟ①②取出し要求
MPP
LD @R101
AND @R102
ANL
JMP @R115
;IAI RBﾃﾞﾊﾞｲｽｸﾘｱ
;'///// 出力 OFF
;FOR  N =0 TO DM9412
;	*RB_IN_STATUS:RB_OFFSET[N]=ANDA(*RB_IN_STATUS:RB_OFFSET[N],$0000)
;	*RB_OUT_STATUS:RB_OFFSET[N]=ANDA(*RB_OUT_STATUS:RB_OFFSET[N],$0000)
;NEXT
;SET(@R101)
LD @R100
NCJ #1000
;'///// 出力 OFF
;
;FOR  N =0 TO DM9412
;
LD CR2002                ; 常時ON
MOV #0 N
LABEL #2000
LD> N DM9412             ; IAI最大軸数
CJ #2001
;	*RB_IN_STATUS:RB_OFFSET[N]=ANDA(*RB_IN_STATUS:RB_OFFSET[N],$0000)
;
LD CR2002                ; 常時ON
LDA N
CON
EXT
CON
STA.L Z12
CON
LDA W3AB0:Z12            ; RB_OFFSET
CON
EXT
CON
STA.L Z11
CON
LDA N
CON
EXT
CON
STA.L Z12
CON
LDA W3AB0:Z12            ; RB_OFFSET
CON
EXT
CON
STA.L Z12
CON
LDA *W3A04:Z12           ; RB_IN (STATUS)
CON
ANDA $0000
CON
STA @VM0
CON
MOV @VM0 *W3A04:Z11      ; RB_IN (STATUS)
;	*RB_OUT_STATUS:RB_OFFSET[N]=ANDA(*RB_OUT_STATUS:RB_OFFSET[N],$0000)
;
LD CR2002                ; 常時ON
LDA N
CON
EXT
CON
STA.L Z12
CON
LDA W3AB0:Z12            ; RB_OFFSET
CON
EXT
CON
STA.L Z11
CON
LDA N
CON
EXT
CON
STA.L Z12
CON
LDA W3AB0:Z12            ; RB_OFFSET
CON
EXT
CON
STA.L Z12
CON
LDA *W3A14:Z12           ; RB_OUT (STATUS)
CON
ANDA $0000
CON
STA @VM1
CON
MOV @VM1 *W3A14:Z11      ; RB_OUT (STATUS)
;NEXT
;
LD CR2002                ; 常時ON
INC N
LDB CR2009               ; 演算結果が負
CJ #2000
LABEL #2001
;SET(@R101)
LD CR2002                ; 常時ON
SET @R101
LABEL #1000
;
;EPSON RC700ﾃﾞﾊﾞｲｽｸﾘｱ
;'///// 出力 OFF
;FOR  N =0 TO 20
;	DM11150:N = #0
;	DM11350:N = #0
;NEXT
;SET(@R102)
LD @R100
NCJ #1001
;'///// 出力 OFF
;
;FOR  N =0 TO 20
;
LD CR2002                ; 常時ON
MOV #0 N
LABEL #2002
LD> N #20
CJ #2003
;	DM11150:N = #0
;
LD CR2002                ; 常時ON
LDA N
CON
EXT
CON
STA.L Z11
CON
MOV #0 DM11150:Z11       ; SCRBC1 I/F IN1
;	DM11350:N = #0
;
LD CR2002                ; 常時ON
LDA N
CON
EXT
CON
STA.L Z11
CON
MOV #0 DM11350:Z11       ; SCRBC1  I/F OUT1
;NEXT
;
LD CR2002                ; 常時ON
INC N
LDB CR2009               ; 演算結果が負
CJ #2002
LABEL #2003
;SET(@R102)
LD CR2002                ; 常時ON
SET @R102
LABEL #1001
;
;//User Open Area Footer
STG @R115
RES @R101
CON
RES R40405               ; _非常停止ﾕｰｻﾞｰSTG
CON
ENDS
;<h1/>Estop_Revival/非常停止復帰時
;[作成上の注意点]
;・待ち要素、動作命令記述は禁止します。
;・STG～JMP命令は@R201～214を使用して下さい。
;・終了時は必ず@R215へJMPして下さい。
LD R40406                ; _非常停止復帰ﾕｰｻﾞｰSTG
SET @R200
;//User Open Area Header
STG @R200
JMP @R215
;//User Open Area Footer
STG @R215
RES R40406               ; _非常停止復帰ﾕｰｻﾞｰSTG
CON
ENDS
;<h1/>Tower_Lamp/ﾕｰｻﾞｰｶｽﾀﾑﾀﾜｰﾗﾝﾌﾟ
;User Custom1/ﾕｰｻﾞｰｶｽﾀﾑ1
;[作成上の注意点]
;・ﾕｰｻﾞｰ仕様ﾀﾜｰﾗﾝﾌﾟ処理を記述して下さい。
;・使用するｸﾞﾙｰﾌﾟ数分記述が必要です。
;・必ずMC～MCRの範囲内に記述して下さい。
LD= DM9210 #1            ; _ﾀﾜｰﾗﾝﾌﾟ制御選択
MC
;<h1/>Red/ﾀﾜｰﾗﾝﾌﾟ赤
;・点灯：非常停止中
;・点滅：ｴﾗｰ発生中、ｴｱｰ圧低下中
LD R46104                ; _非常停止中　ﾓｰﾄﾞﾌﾗｸﾞ
LD @R1915                ; 0.3S flicker
AND R46208               ; _Group1　ｴﾗｰ発生中
ORL
LD R46103                ; _停止中　ﾓｰﾄﾞﾌﾗｸﾞ
AND R46114               ; _装置原点復帰待ち
OR R48408                ; _Group1　ﾗﾝﾌﾟ赤点滅要求1
OR R48409                ; _Group1　ﾗﾝﾌﾟ赤点滅要求2
OR R48410                ; _Group1　ﾗﾝﾌﾟ赤点滅要求3
OR R48411                ; _Group1　ﾗﾝﾌﾟ赤点滅要求4
AND @R1915               ; 0.3S flicker
ANB R46208               ; _Group1　ｴﾗｰ発生中
ORL
OUT R44507               ; *Group1　ﾀﾜｰﾗﾝﾌﾟ赤
;<h1/>Green/ﾀﾜｰﾗﾝﾌﾟ緑
;・点灯：定停止中
;・点滅：安全ｶﾊﾞｰﾛｯｸ解除中、ｴﾘｱｾﾝｻ遮断QP、ｴｱｰ圧低下QP
LDB R46104               ; _非常停止中　ﾓｰﾄﾞﾌﾗｸﾞ
AND R46103               ; _停止中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB R46200               ; _安全ｶﾊﾞｰ1開中
ANB R46300               ; _Group1　ｴﾘｱｾﾝｻ遮断中
ANB R50700               ; _Group1 ｴｱｰ元圧状態
LD R46200                ; _安全ｶﾊﾞｰ1開中
OR R46300                ; _Group1　ｴﾘｱｾﾝｻ遮断中
OR R50700                ; _Group1 ｴｱｰ元圧状態
AND @R1915               ; 0.3S flicker
ORL
OUT R44508               ; *Group1　ﾀﾜｰﾗﾝﾌﾟ緑
;<h1/>Yellow/ﾀﾜｰﾗﾝﾌﾟ黄
;・点灯：動作中
;・点滅：ｵｰﾊﾞｰﾌﾛｰ状態（AUTOのみ）
LDB R46104               ; _非常停止中　ﾓｰﾄﾞﾌﾗｸﾞ
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
LD R47708                ; _Group1　ｵｰﾊﾞｰﾌﾛｰ宣言
AND @R1915               ; 0.3S flicker
ORB R47708               ; _Group1　ｵｰﾊﾞｰﾌﾛｰ宣言
ANL
OR R46101                ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
LD R46102                ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND R47500               ; _Group1　ﾒﾝﾃ動作中
ORL
ANL
OUT R44509               ; *Group1　ﾀﾜｰﾗﾝﾌﾟ黄
MCR
;User Custom2/ﾕｰｻﾞｰｶｽﾀﾑ2
;[作成上の注意点]
;・ﾕｰｻﾞｰ仕様ﾀﾜｰﾗﾝﾌﾟ処理を記述して下さい。
;・使用するｸﾞﾙｰﾌﾟ数分記述が必要です。
;・必ずMC～MCRの範囲内に記述して下さい。
LD= DM9210 #2            ; _ﾀﾜｰﾗﾝﾌﾟ制御選択
MC
MCR
;User Custom3/ﾕｰｻﾞｰｶｽﾀﾑ3
;[作成上の注意点]
;・ﾕｰｻﾞｰ仕様ﾀﾜｰﾗﾝﾌﾟ処理を記述して下さい。
;・使用するｸﾞﾙｰﾌﾟ数分記述が必要です。
;・必ずMC～MCRの範囲内に記述して下さい。
LD= DM9210 #3            ; _ﾀﾜｰﾗﾝﾌﾟ制御選択
MC
MCR
;User Custom4/ﾕｰｻﾞｰｶｽﾀﾑ4
;[作成上の注意点]
;・ﾕｰｻﾞｰ仕様ﾀﾜｰﾗﾝﾌﾟ処理を記述して下さい。
;・使用するｸﾞﾙｰﾌﾟ数分記述が必要です。
;・必ずMC～MCRの範囲内に記述して下さい。
LD= DM9210 #4            ; _ﾀﾜｰﾗﾝﾌﾟ制御選択
MC
MCR
;User Custom5/ﾕｰｻﾞｰｶｽﾀﾑ5
;[作成上の注意点]
;・ﾕｰｻﾞｰ仕様ﾀﾜｰﾗﾝﾌﾟ処理を記述して下さい。
;・使用するｸﾞﾙｰﾌﾟ数分記述が必要です。
;・必ずMC～MCRの範囲内に記述して下さい。
LD= DM9210 #5            ; _ﾀﾜｰﾗﾝﾌﾟ制御選択
MC
MCR
;User Custom6/ﾕｰｻﾞｰｶｽﾀﾑ6
;[作成上の注意点]
;・ﾕｰｻﾞｰ仕様ﾀﾜｰﾗﾝﾌﾟ処理を記述して下さい。
;・使用するｸﾞﾙｰﾌﾟ数分記述が必要です。
;・必ずMC～MCRの範囲内に記述して下さい。
LD= DM9210 #6            ; _ﾀﾜｰﾗﾝﾌﾟ制御選択
MC
MCR
;User Custom7/ﾕｰｻﾞｰｶｽﾀﾑ7
;[作成上の注意点]
;・ﾕｰｻﾞｰ仕様ﾀﾜｰﾗﾝﾌﾟ処理を記述して下さい。
;・使用するｸﾞﾙｰﾌﾟ数分記述が必要です。
;・必ずMC～MCRの範囲内に記述して下さい。
LD= DM9210 #7            ; _ﾀﾜｰﾗﾝﾌﾟ制御選択
MC
MCR
;User Custom8/ﾕｰｻﾞｰｶｽﾀﾑ8
;[作成上の注意点]
;・ﾕｰｻﾞｰ仕様ﾀﾜｰﾗﾝﾌﾟ処理を記述して下さい。
;・使用するｸﾞﾙｰﾌﾟ数分記述が必要です。
;・必ずMC～MCRの範囲内に記述して下さい。
LD= DM9210 #8            ; _ﾀﾜｰﾗﾝﾌﾟ制御選択
MC
MCR
;User Custom9/ﾕｰｻﾞｰｶｽﾀﾑ9
;[作成上の注意点]
;・ﾕｰｻﾞｰ仕様ﾀﾜｰﾗﾝﾌﾟ処理を記述して下さい。
;・使用するｸﾞﾙｰﾌﾟ数分記述が必要です。
;・必ずMC～MCRの範囲内に記述して下さい。
LD= DM9210 #9            ; _ﾀﾜｰﾗﾝﾌﾟ制御選択
MC
MCR
;User Custom10/ﾕｰｻﾞｰｶｽﾀﾑ10
;[作成上の注意点]
;・ﾕｰｻﾞｰ仕様ﾀﾜｰﾗﾝﾌﾟ処理を記述して下さい。
;・使用するｸﾞﾙｰﾌﾟ数分記述が必要です。
;・必ずMC～MCRの範囲内に記述して下さい。
LD= DM9210 #10           ; _ﾀﾜｰﾗﾝﾌﾟ制御選択
MC
MCR
;<h1/>*Group1/ｸﾞﾙｰﾌﾟ1
;<h1/>SC1_Before/安全ｶﾊﾞｰ1開時
;[作成上の注意点]
;・ﾕｰｻﾞｰｵｰﾌﾟﾝｴﾘｱ以外は修正しないで下さい。
;・STG～JMP命令は@R1001～1013を使用して下さい。
;・ﾕｰｻﾞｰ処理終了後、いずれかのSTGへ必ずJMPして下さい。
;	→安全ｶﾊﾞｰ開OKの場合：@R1014へ
;	→安全ｶﾊﾞｰ開NGの場合：@R1015へ
STG R40500               ; _安全ｶﾊﾞｰ1解除ﾕｰｻﾞｰSTG
JMP @R1000
;//User Open Area Header
STG @R1000
MPS
SET MR2108               ; ｲｵﾅｲｻﾞ1 放電停止
CON
RES MR7506               ; ｲｵﾅｲｻﾞ1 ｴｱﾌﾞﾛｰ （ﾜｰｸ投入口）
CON
SET MR2110               ; ｲｵﾅｲｻﾞ2 放電停止
CON
RES MR7507               ; ｲｵﾅｲｻﾞ2 ｴｱﾌﾞﾛｰ (ﾃｰﾌﾟ)ﾕﾆｯﾄ)
CON
SET MR2112               ; ｲｵﾅｲｻﾞ3 放電停止
CON
JMP @R1014               ; ﾛｯｸ解除OK
MRD
BMOV DM11157 @DM0 #8     ; SCRBC1 X軸現在位置(2ﾜｰﾄﾞ)
MPP
AND CR2003               ; 常時OFF
JMP @R1015               ; ﾛｯｸ解除NG
;//User Open Area Footer
STG @R1014               ; ﾛｯｸ解除OK
SET R40600               ; _安全ｶﾊﾞｰ1ﾛｯｸ解除OK
CON
ENDS
STG @R1015               ; ﾛｯｸ解除NG
SET R40601               ; _安全ｶﾊﾞｰ1ﾛｯｸ解除NG
CON
ENDS
;<h1/>SC1_After/安全ｶﾊﾞｰ1閉時
;[作成上の注意点]
;・ﾕｰｻﾞｰｵｰﾌﾟﾝｴﾘｱ以外は修正しないで下さい。
;・STG～JMP命令は@R1101～1113を使用して下さい。
;・ﾕｰｻﾞｰ処理終了後、いずれかのSTGへ必ずJMPして下さい。
;	→安全ｶﾊﾞｰﾛｯｸOKの場合：@R1114
;	→安全ｶﾊﾞｰﾛｯｸNGの場合：@R1115
STG R40501               ; _安全ｶﾊﾞｰ1ﾛｯｸﾕｰｻﾞｰSTG
JMP @R1100
;//User Open Area Header
STG @R1100
SET MR7506               ; ｲｵﾅｲｻﾞ1 ｴｱﾌﾞﾛｰ （ﾜｰｸ投入口）
CON
SET MR7507               ; ｲｵﾅｲｻﾞ2 ｴｱﾌﾞﾛｰ (ﾃｰﾌﾟ)ﾕﾆｯﾄ)
CON
RES MR2108               ; ｲｵﾅｲｻﾞ1 放電停止
CON
RES MR2110               ; ｲｵﾅｲｻﾞ2 放電停止
CON
RES MR2112               ; ｲｵﾅｲｻﾞ3 放電停止
CON
JMP @R1101
STG @R1101
MPS
ANB R2009                ; SCARA RB 非常停止
JMP @R1114               ; ﾛｯｸOK
MPP
AND R2009                ; SCARA RB 非常停止
JMP @R1102
LDB DM11150.4            ; SCRBC1 EstopOn
ANB DM11150.8            ; SCRBC1 MotorsOn
TMR @12 #30
STG @R1102
AND @T12
SET DM11350.4            ; SCRBC1 Stop 
CON
JMP @R1103
STG @R1103
ANB DM11150.1            ; SCRBC1 Running
AND DM11150.0            ; SCRBC1 Ready
RES DM11350.4            ; SCRBC1 Stop 
CON
SET DM11350.7            ; SCRBC1 Rest 
CON
JMP @R1104
STG @R1104
ANB DM11150.4            ; SCRBC1 EstopOn
RES DM11350.7            ; SCRBC1 Rest 
CON
JMP @R1105
STG @R1105
ANB DM11150.3            ; SCRBC1 Error
ANB DM11150.6            ; SCRBC1 SError
SET DM11350.8            ; SCRBC1 SetMotorsOn
CON
JMP @R1106
STG @R1106
AND DM11150.8            ; SCRBC1 MotorsOn
RES DM11350.8            ; SCRBC1 SetMotorsOn
CON
JMP @R1107
STG @R1107
TMR @19 #2
CON
AND @T19
SET DM11350.0            ; SCRBC1 Start
CON
JMP @R1108
STG @R1108
MPS
AND DM11150.1            ; SCRBC1 Running
RES DM11350.0            ; SCRBC1 Start
CON
JMP @R1109
MPP
TMR @20 #50
CON
AND @T20
RES DM11350.0            ; SCRBC1 Start
CON
JMP @R1106
STG @R1109
MPS
LD MR20904               ; RC7 異常中
OR R4500                 ; ﾊﾝﾄﾞ1 下降端
ORB R4501                ; ﾊﾝﾄﾞ1 上昇端
OR R4502                 ; ﾊﾝﾄﾞ2 下降端
ORB R4503                ; ﾊﾝﾄﾞ2 上昇端
ANL
JMP @R1114               ; ﾛｯｸOK
MPP
LDB MR20904              ; RC7 異常中
ANB R4500                ; ﾊﾝﾄﾞ1 下降端
AND R4501                ; ﾊﾝﾄﾞ1 上昇端
ANB R4502                ; ﾊﾝﾄﾞ2 下降端
AND R4503                ; ﾊﾝﾄﾞ2 上昇端
ANL
SET MR20900              ; RC7 移動
CON
JMP @R1110
STG @R1110
AND MR20901              ; RC7 移動完了
RES MR20901              ; RC7 移動完了
CON
JMP @R1114               ; ﾛｯｸOK
;//User Open Area Footer
STG @R1114               ; ﾛｯｸOK
SET R40700               ; _安全ｶﾊﾞｰ1ﾛｯｸOK
CON
ENDS
STG @R1115               ; ﾛｯｸNG
SET R40701               ; _安全ｶﾊﾞｰ1ﾛｯｸNG
CON
ENDS
;<h1/>Air_Before/ｴｱｰ流量低下時
;[作成上の注意点]
;・待ち要素、動作命令記述は禁止します。
;・STG～JMP命令は@R1201～1214を使用して下さい。
;・終了時は必ず@R1215へJMPして下さい。
LD R40800                ; _ｴｱｰ元圧低下1ﾕｰｻﾞｰSTG
SET @R1200
;//User Open Area Header
STG @R1200
JMP @R1215
;//User Open Area Footer
STG @R1215
RES R40800               ; _ｴｱｰ元圧低下1ﾕｰｻﾞｰSTG
CON
ENDS
;<h1/>Air_After/ｴｱｰ流量低下復帰時
;[作成上の注意点]
;・待ち要素、動作命令記述は禁止します。
;・STG～JMP命令は@R1301～1314を使用して下さい。
;・終了時は必ず@R1315へJMPして下さい。
LD R40801                ; _ｴｱｰ元圧低下1解除ﾕｰｻﾞｰSTG
SET @R1300
;//User Open Area Header
STG @R1300
JMP @R1315
;//User Open Area Footer
STG @R1315
RES R40801               ; _ｴｱｰ元圧低下1解除ﾕｰｻﾞｰSTG
CON
ENDS
;<h1/>Area1_Before/ｴﾘｱｾﾝｻ遮断直後
;[作成上の注意点]
;・待ち要素、動作命令記述は禁止します。
;・STG～JMP命令は@R1401～1414を使用して下さい。
;・終了時は必ず@R1415へJMPして下さい。
LD R40900                ; _ｴﾘｱｾﾝｻ1遮断ﾕｰｻﾞｰSTG
SET @R1400
;//User Open Area Header
STG @R1400
JMP @R1415
;//User Open Area Footer
STG @R1415
RES R40900               ; _ｴﾘｱｾﾝｻ1遮断ﾕｰｻﾞｰSTG
CON
ENDS
;<h1/>Area1_After/ｴﾘｱｾﾝｻ復帰直前
;[作成上の注意点]
;・待ち要素、動作命令記述は禁止します。
;・STG～JMP命令は@R1501～1514を使用して下さい。
;・終了時は必ず@R1515へJMPして下さい。
LD R40901                ; _ｴﾘｱｾﾝｻ1復帰ﾕｰｻﾞｰSTG
SET @R1500
;//User Open Area Header
STG @R1500
JMP @R1515
;//User Open Area Footer
STG @R1515
RES R40901               ; _ｴﾘｱｾﾝｻ1復帰ﾕｰｻﾞｰSTG
CON
ENDS
;<h1/>TaskState1/ﾀｽｸ状態
;[Task]
;1行目：OneSystem2_Taskよりﾓｼﾞｭｰﾙ起動指令が来たらMDSTRT
;2行目：OneSystem2_Taskよりﾓｼﾞｭｰﾙ停止指令が来たらMDSTOP
;3行目：Task起動状態をOUT
;<使用方法>
;※不要ﾒｲﾝﾓｼﾞｭｰﾙﾌｧｲﾙを削除したい場合、未使用ﾀｽｸは行無効化を行ってください
;ﾒｲﾝﾓｼﾞｭｰﾙﾌｧｲﾙを削除したにも係わらず行無効化を実施しないと変換異常になります
;Group1_Task0
LD>= DM9200 #1           ; _Group1ﾀｽｸ登録数
MPS
LD R47300                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ起動要求
ANB _Group1_Task0
ANL
MDSTRT Group1_Task0
MRD
LD R47308                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ停止要求
AND _Group1_Task0
ANL
MDSTOP Group1_Task0
MPP
AND _Group1_Task0
TMR @0 DM9358            ; _ﾃﾞｰﾀ収集ﾘｾｯﾄﾃﾞｨﾚｲ
CON
AND @T0
OUT R49000               ; _Group1_Task0起動状態
;Group1_Task1
LD>= DM9200 #2           ; _Group1ﾀｽｸ登録数
MPS
LD R47300                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ起動要求
ANB _Group1_Task1
ANL
MDSTRT Group1_Task1
MRD
LD R47308                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ停止要求
AND _Group1_Task1
ANL
MDSTOP Group1_Task1
MPP
AND _Group1_Task1
TMR @1 DM9358            ; _ﾃﾞｰﾀ収集ﾘｾｯﾄﾃﾞｨﾚｲ
CON
AND @T1
OUT R49000:#1            ; _Group1_Task1起動状態
;Group1_Task2
LD>= DM9200 #3           ; _Group1ﾀｽｸ登録数
MPS
LD R47300                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ起動要求
ANB _Group1_Task2
ANL
MDSTRT Group1_Task2
MRD
LD R47308                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ停止要求
AND _Group1_Task2
ANL
MDSTOP Group1_Task2
MPP
AND _Group1_Task2
TMR @2 DM9358            ; _ﾃﾞｰﾀ収集ﾘｾｯﾄﾃﾞｨﾚｲ
CON
AND @T2
OUT R49000:#2            ; _Group1_Task2起動状態
;Group1_Task3
LD>= DM9200 #4           ; _Group1ﾀｽｸ登録数
MPS
LD R47300                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ起動要求
ANB _Group1_Task3
ANL
MDSTRT Group1_Task3
MRD
LD R47308                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ停止要求
AND _Group1_Task3
ANL
MDSTOP Group1_Task3
MPP
AND _Group1_Task3
TMR @3 DM9358            ; _ﾃﾞｰﾀ収集ﾘｾｯﾄﾃﾞｨﾚｲ
CON
AND @T3
OUT R49000:#3            ; _Group1_Task3起動状態
;Group1_Task4
LD>= DM9200 #5           ; _Group1ﾀｽｸ登録数
MPS
LD R47300                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ起動要求
ANB _Group1_Task4
ANL
MDSTRT Group1_Task4
MRD
LD R47308                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ停止要求
AND _Group1_Task4
ANL
MDSTOP Group1_Task4
MPP
AND _Group1_Task4
TMR @4 DM9358            ; _ﾃﾞｰﾀ収集ﾘｾｯﾄﾃﾞｨﾚｲ
CON
AND @T4
OUT R49000:#4            ; _Group1_Task4起動状態
;Group1_Task5
LD>= DM9200 #6           ; _Group1ﾀｽｸ登録数
MPS
LD R47300                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ起動要求
ANB _Group1_Task5
ANL
MDSTRT Group1_Task5
MRD
LD R47308                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ停止要求
AND _Group1_Task5
ANL
MDSTOP Group1_Task5
MPP
AND _Group1_Task5
TMR @5 DM9358            ; _ﾃﾞｰﾀ収集ﾘｾｯﾄﾃﾞｨﾚｲ
CON
AND @T5
OUT R49000:#5            ; _Group1_Task5起動状態
;Group1_Task6
LD>= DM9200 #7           ; _Group1ﾀｽｸ登録数
MPS
LD R47300                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ起動要求
ANB _Group1_Task6
ANL
MDSTRT Group1_Task6
MRD
LD R47308                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ停止要求
AND _Group1_Task6
ANL
MDSTOP Group1_Task6
MPP
AND _Group1_Task6
TMR @6 DM9358            ; _ﾃﾞｰﾀ収集ﾘｾｯﾄﾃﾞｨﾚｲ
CON
AND @T6
OUT R49000:#6            ; _Group1_Task6起動状態
;Group1_Task7
LD>= DM9200 #8           ; _Group1ﾀｽｸ登録数
MPS
LD R47300                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ起動要求
ANB _Group1_Task7
ANL
MDSTRT Group1_Task7
MRD
LD R47308                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ停止要求
AND _Group1_Task7
ANL
MDSTOP Group1_Task7
MPP
AND _Group1_Task7
TMR @7 DM9358            ; _ﾃﾞｰﾀ収集ﾘｾｯﾄﾃﾞｨﾚｲ
CON
AND @T7
OUT R49000:#7            ; _Group1_Task7起動状態
;Group1_Task8
LD>= DM9200 #9           ; _Group1ﾀｽｸ登録数
MPS
LD R47300                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ起動要求
ANB _Group1_Task8
ANL
MDSTRT Group1_Task8
MRD
LD R47308                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ停止要求
AND _Group1_Task8
ANL
MDSTOP Group1_Task8
MPP
AND _Group1_Task8
TMR @8 DM9358            ; _ﾃﾞｰﾀ収集ﾘｾｯﾄﾃﾞｨﾚｲ
CON
AND @T8
OUT R49000:#8            ; _Group1_Task8起動状態
;Group1_Task9
LD>= DM9200 #10          ; _Group1ﾀｽｸ登録数
MPS
LD R47300                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ起動要求
ANB _Group1_Task9
ANL
MDSTRT Group1_Task9
MRD
LD R47308                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ停止要求
AND _Group1_Task9
ANL
MDSTOP Group1_Task9
MPP
AND _Group1_Task9
TMR @9 DM9358            ; _ﾃﾞｰﾀ収集ﾘｾｯﾄﾃﾞｨﾚｲ
CON
AND @T9
OUT R49000:#9            ; _Group1_Task9起動状態
;Group1_Task10
LD>= DM9200 #11          ; _Group1ﾀｽｸ登録数
MPS
LD R47300                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ起動要求
ANB _Group1_Task10
ANL
MDSTRT Group1_Task10
MRD
LD R47308                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ停止要求
AND _Group1_Task10
ANL
MDSTOP Group1_Task10
MPP
AND _Group1_Task10
TMR @10 DM9358           ; _ﾃﾞｰﾀ収集ﾘｾｯﾄﾃﾞｨﾚｲ
CON
AND @T10
OUT R49000:#10           ; _Group1_Task10起動状態
END
ENDH
