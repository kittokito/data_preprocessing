DEVICE:53
;MODULE:Sensor
;MODULE_TYPE:0
;<h1/>TASK 0  ｼﾘﾝﾀﾞｰｾﾝｻｰ監視
;
LD R41000                ; _Grp1_Task0_起動中ﾌﾗｸﾞ
ANB @R001
MC
LD R1104                 ; ﾎﾙﾀﾞｰSub位置決ﾋﾟﾝ上昇
ANB R1105                ; ﾎﾙﾀﾞｰSub位置決ﾋﾟﾝ下降
LDB R1006                ; ﾎﾙﾀﾞｰSub位置決ﾋﾟﾝ上昇限
ANB R1007                ; ﾎﾙﾀﾞｰSub位置決ﾋﾟﾝ下降限
LD R1006                 ; ﾎﾙﾀﾞｰSub位置決ﾋﾟﾝ上昇限
AND R1007                ; ﾎﾙﾀﾞｰSub位置決ﾋﾟﾝ下降限
ORL
LDB R1006                ; ﾎﾙﾀﾞｰSub位置決ﾋﾟﾝ上昇限
AND R1007                ; ﾎﾙﾀﾞｰSub位置決ﾋﾟﾝ下降限
ORL
ANL
TMR @10 #30
CON
AND @T10
DW #4000 DM60009         ; Sensor    ERROR №
CON
SET MR4000               ; ﾜｰｸ引込   前進ｴﾗｰ
LDB R1104                ; ﾎﾙﾀﾞｰSub位置決ﾋﾟﾝ上昇
AND R1105                ; ﾎﾙﾀﾞｰSub位置決ﾋﾟﾝ下降
LDB R1006                ; ﾎﾙﾀﾞｰSub位置決ﾋﾟﾝ上昇限
ANB R1007                ; ﾎﾙﾀﾞｰSub位置決ﾋﾟﾝ下降限
LD R1006                 ; ﾎﾙﾀﾞｰSub位置決ﾋﾟﾝ上昇限
AND R1007                ; ﾎﾙﾀﾞｰSub位置決ﾋﾟﾝ下降限
ORL
LD R1006                 ; ﾎﾙﾀﾞｰSub位置決ﾋﾟﾝ上昇限
ANB R1007                ; ﾎﾙﾀﾞｰSub位置決ﾋﾟﾝ下降限
ORL
ANL
TMR @11 #30
CON
AND @T11
DW #4001 DM60009         ; Sensor    ERROR №
CON
SET MR4001               ; ﾜｰｸ引込   後退ｴﾗｰ
LD R1108                 ; ﾍｯﾄﾞsub位置決ﾋﾟﾝ上昇
ANB R1109                ; ﾍｯﾄﾞsub位置決ﾋﾟﾝ下降
LDB R1008                ; ﾍｯﾄﾞSub位置決ﾋﾟﾝ上限
ANB R1009                ; ﾍｯﾄﾞSub位置決ﾋﾟﾝ下限
LD R1008                 ; ﾍｯﾄﾞSub位置決ﾋﾟﾝ上限
AND R1009                ; ﾍｯﾄﾞSub位置決ﾋﾟﾝ下限
ORL
LDB R1008                ; ﾍｯﾄﾞSub位置決ﾋﾟﾝ上限
AND R1009                ; ﾍｯﾄﾞSub位置決ﾋﾟﾝ下限
ORL
ANL
TMR @12 #30
CON
AND @T12
DW #4002 DM60009         ; Sensor    ERROR №
CON
SET MR4002               ; ﾜｰｸ押え   下降ｴﾗｰ
LDB R1108                ; ﾍｯﾄﾞsub位置決ﾋﾟﾝ上昇
AND R1109                ; ﾍｯﾄﾞsub位置決ﾋﾟﾝ下降
LDB R1008                ; ﾍｯﾄﾞSub位置決ﾋﾟﾝ上限
ANB R1009                ; ﾍｯﾄﾞSub位置決ﾋﾟﾝ下限
LD R1008                 ; ﾍｯﾄﾞSub位置決ﾋﾟﾝ上限
AND R1009                ; ﾍｯﾄﾞSub位置決ﾋﾟﾝ下限
ORL
LD R1008                 ; ﾍｯﾄﾞSub位置決ﾋﾟﾝ上限
ANB R1009                ; ﾍｯﾄﾞSub位置決ﾋﾟﾝ下限
ORL
ANL
TMR @13 #30
CON
AND @T13
DW #4003 DM60009         ; Sensor    ERROR №
CON
SET MR4003               ; ﾜｰｸ押え   上昇ｴﾗｰ
LD R1110                 ; ﾍｯﾄﾞSub吸着
ANB R1111                ; ﾍｯﾄﾞSub破壊
LDB R1010                ; ﾎﾙﾀﾞｰSub吸着検出
ANB R1011                ; ﾎﾙﾀﾞｰSub破壊検出
LD R1010                 ; ﾎﾙﾀﾞｰSub吸着検出
AND R1011                ; ﾎﾙﾀﾞｰSub破壊検出
ORL
LDB R1010                ; ﾎﾙﾀﾞｰSub吸着検出
AND R1011                ; ﾎﾙﾀﾞｰSub破壊検出
ORL
ANL
TMR @14 #30
CON
AND @T14
DW #4004 DM60009         ; Sensor    ERROR №
CON
SET MR4004               ; ﾜｰｸ切替   前進ｴﾗｰ
LDB R1110                ; ﾍｯﾄﾞSub吸着
AND R1111                ; ﾍｯﾄﾞSub破壊
LDB R1010                ; ﾎﾙﾀﾞｰSub吸着検出
ANB R1011                ; ﾎﾙﾀﾞｰSub破壊検出
LD R1010                 ; ﾎﾙﾀﾞｰSub吸着検出
AND R1011                ; ﾎﾙﾀﾞｰSub破壊検出
ORL
LD R1010                 ; ﾎﾙﾀﾞｰSub吸着検出
ANB R1011                ; ﾎﾙﾀﾞｰSub破壊検出
ORL
ANL
TMR @15 #30
CON
AND @T15
DW #4005 DM60009         ; Sensor    ERROR №
CON
SET MR4005               ; ﾜｰｸ切替   後退ｴﾗｰ
LD R1112                 ; ｾｯﾄ台ｽﾗｲﾄﾞ前進　ｶｼﾒ側
ANB R1113                ; ｾｯﾄ台ｽﾗｲﾄﾞ後退　ﾜｰｸｾｯﾄ側
LDB R1012                ; ｾｯﾄ台ｽﾗｲﾄﾞ前進限 ｶｼﾒ側
ANB R1013                ; ｾｯﾄ台ｽﾗｲﾄﾞ後退限 ﾜｰｸｾｯﾄ側 
LD R1012                 ; ｾｯﾄ台ｽﾗｲﾄﾞ前進限 ｶｼﾒ側
AND R1013                ; ｾｯﾄ台ｽﾗｲﾄﾞ後退限 ﾜｰｸｾｯﾄ側 
ORL
LDB R1012                ; ｾｯﾄ台ｽﾗｲﾄﾞ前進限 ｶｼﾒ側
AND R1013                ; ｾｯﾄ台ｽﾗｲﾄﾞ後退限 ﾜｰｸｾｯﾄ側 
ORL
ANL
TMR @16 #30
CON
AND @T16
DW #4006 DM60009         ; Sensor    ERROR №
CON
SET MR4006               ; 7
LDB R1112                ; ｾｯﾄ台ｽﾗｲﾄﾞ前進　ｶｼﾒ側
AND R1113                ; ｾｯﾄ台ｽﾗｲﾄﾞ後退　ﾜｰｸｾｯﾄ側
LDB R1012                ; ｾｯﾄ台ｽﾗｲﾄﾞ前進限 ｶｼﾒ側
ANB R1013                ; ｾｯﾄ台ｽﾗｲﾄﾞ後退限 ﾜｰｸｾｯﾄ側 
LD R1012                 ; ｾｯﾄ台ｽﾗｲﾄﾞ前進限 ｶｼﾒ側
AND R1013                ; ｾｯﾄ台ｽﾗｲﾄﾞ後退限 ﾜｰｸｾｯﾄ側 
ORL
LD R1012                 ; ｾｯﾄ台ｽﾗｲﾄﾞ前進限 ｶｼﾒ側
ANB R1013                ; ｾｯﾄ台ｽﾗｲﾄﾞ後退限 ﾜｰｸｾｯﾄ側 
ORL
ANL
TMR @17 #30
CON
AND @T17
DW #4007 DM60009         ; Sensor    ERROR №
CON
SET MR4007               ; 8
LD R1114                 ; COFｶﾞｲﾄﾞ前進　ﾜｰｸ側
ANB R1115                ; COFｶﾞｲﾄﾞ後退　逃げ側
LDB R1014                ; COFｶﾞｲﾄﾞ前進限 ﾜｰｸ側
ANB R1015                ; COFｶﾞｲﾄﾞ後退限 逃げ側
LD R1014                 ; COFｶﾞｲﾄﾞ前進限 ﾜｰｸ側
AND R1015                ; COFｶﾞｲﾄﾞ後退限 逃げ側
ORL
LDB R1014                ; COFｶﾞｲﾄﾞ前進限 ﾜｰｸ側
AND R1015                ; COFｶﾞｲﾄﾞ後退限 逃げ側
ORL
ANL
TMR @18 #30
CON
AND @T18
DW #4008 DM60009         ; Sensor    ERROR №
CON
SET MR4008               ; 9
LDB R1114                ; COFｶﾞｲﾄﾞ前進　ﾜｰｸ側
AND R1115                ; COFｶﾞｲﾄﾞ後退　逃げ側
LDB R1014                ; COFｶﾞｲﾄﾞ前進限 ﾜｰｸ側
ANB R1015                ; COFｶﾞｲﾄﾞ後退限 逃げ側
LD R1014                 ; COFｶﾞｲﾄﾞ前進限 ﾜｰｸ側
AND R1015                ; COFｶﾞｲﾄﾞ後退限 逃げ側
ORL
LD R1014                 ; COFｶﾞｲﾄﾞ前進限 ﾜｰｸ側
ANB R1015                ; COFｶﾞｲﾄﾞ後退限 逃げ側
ORL
ANL
TMR @19 #30
CON
AND @T19
DW #4009 DM60009         ; Sensor    ERROR №
CON
SET MR4009               ; 10
LD R2212                 ; ｶｼﾒﾍｯﾄﾞ前後　ﾜｰｸ側
ANB R2213                ; ｶｼﾒﾍｯﾄﾞ前後　逃げ側
LDB R2114                ; ｶｼﾒﾍｯﾄﾞ前後 (ﾜｰｸ側)
ANB R2115                ; ｶｼﾒﾍｯﾄﾞ前後 (逃げ側)
LD R2114                 ; ｶｼﾒﾍｯﾄﾞ前後 (ﾜｰｸ側)
AND R2115                ; ｶｼﾒﾍｯﾄﾞ前後 (逃げ側)
ORL
LDB R2114                ; ｶｼﾒﾍｯﾄﾞ前後 (ﾜｰｸ側)
AND R2115                ; ｶｼﾒﾍｯﾄﾞ前後 (逃げ側)
ORL
ANL
TMR @20 #30
CON
AND @T20
DW #4010 DM60009         ; Sensor    ERROR №
CON
SET MR4010               ; 11
LDB R2212                ; ｶｼﾒﾍｯﾄﾞ前後　ﾜｰｸ側
AND R2213                ; ｶｼﾒﾍｯﾄﾞ前後　逃げ側
LDB R2114                ; ｶｼﾒﾍｯﾄﾞ前後 (ﾜｰｸ側)
ANB R2115                ; ｶｼﾒﾍｯﾄﾞ前後 (逃げ側)
LD R2114                 ; ｶｼﾒﾍｯﾄﾞ前後 (ﾜｰｸ側)
AND R2115                ; ｶｼﾒﾍｯﾄﾞ前後 (逃げ側)
ORL
LD R2114                 ; ｶｼﾒﾍｯﾄﾞ前後 (ﾜｰｸ側)
ANB R2115                ; ｶｼﾒﾍｯﾄﾞ前後 (逃げ側)
ORL
ANL
TMR @21 #30
CON
AND @T21
DW #4011 DM60009         ; Sensor    ERROR №
CON
SET MR4011               ; 12
LD R2214                 ; ﾎﾙﾀﾞｰSub押え下降
ANB R2215                ; ﾎﾙﾀﾞｰSub押え上昇
LDB R2014                ; ﾎﾙﾀﾞｰSub押え下降限
ANB R2015                ; ﾎﾙﾀﾞｰSub押え上昇限
LD R2014                 ; ﾎﾙﾀﾞｰSub押え下降限
AND R2015                ; ﾎﾙﾀﾞｰSub押え上昇限
ORL
LDB R2014                ; ﾎﾙﾀﾞｰSub押え下降限
AND R2015                ; ﾎﾙﾀﾞｰSub押え上昇限
ORL
ANL
TMR @22 #30
CON
AND @T22
DW #4012 DM60009         ; Sensor    ERROR №
CON
SET MR4012               ; 13
LDB R2214                ; ﾎﾙﾀﾞｰSub押え下降
AND R2215                ; ﾎﾙﾀﾞｰSub押え上昇
LDB R2014                ; ﾎﾙﾀﾞｰSub押え下降限
ANB R2015                ; ﾎﾙﾀﾞｰSub押え上昇限
LD R2014                 ; ﾎﾙﾀﾞｰSub押え下降限
AND R2015                ; ﾎﾙﾀﾞｰSub押え上昇限
ORL
LD R2014                 ; ﾎﾙﾀﾞｰSub押え下降限
ANB R2015                ; ﾎﾙﾀﾞｰSub押え上昇限
ORL
ANL
TMR @23 #30
CON
AND @T23
DW #4013 DM60009         ; Sensor    ERROR №
CON
SET MR4013               ; 14
LD R2308                 ; COFｶﾞｲﾄﾞﾁｬｯｸ閉
ANB R2309                ; COFｶﾞｲﾄﾞﾁｬｯｸ開
LDB R2108                ; COFｶﾞｲﾄﾞﾁｬｯｸ閉端
ANB R2109                ; COFｶﾞｲﾄﾞﾁｬｯｸ開端
LD R2108                 ; COFｶﾞｲﾄﾞﾁｬｯｸ閉端
AND R2109                ; COFｶﾞｲﾄﾞﾁｬｯｸ開端
ORL
LDB R2108                ; COFｶﾞｲﾄﾞﾁｬｯｸ閉端
AND R2109                ; COFｶﾞｲﾄﾞﾁｬｯｸ開端
ORL
ANL
TMR @24 #30
CON
AND @T24
DW #4014 DM60009         ; Sensor    ERROR №
CON
SET MR4014               ; 15
LDB R2308                ; COFｶﾞｲﾄﾞﾁｬｯｸ閉
AND R2309                ; COFｶﾞｲﾄﾞﾁｬｯｸ開
LDB R2108                ; COFｶﾞｲﾄﾞﾁｬｯｸ閉端
ANB R2109                ; COFｶﾞｲﾄﾞﾁｬｯｸ開端
LD R2108                 ; COFｶﾞｲﾄﾞﾁｬｯｸ閉端
AND R2109                ; COFｶﾞｲﾄﾞﾁｬｯｸ開端
ORL
LD R2108                 ; COFｶﾞｲﾄﾞﾁｬｯｸ閉端
ANB R2109                ; COFｶﾞｲﾄﾞﾁｬｯｸ開端
ORL
ANL
TMR @25 #30
CON
AND @T25
DW #4015 DM60009         ; Sensor    ERROR №
CON
SET MR4015               ; 16
LD R2310                 ; ﾎﾙﾀﾞｰSub下降部前進　ﾜｰｸ側
ANB R2311                ; ﾎﾙﾀﾞｰSub下降部後退　逃げ側
LDB R2110                ; ﾎﾙﾀﾞｰSub下降部前進限 (ﾜｰｸ側)
ANB R2111                ; ﾎﾙﾀﾞｰSub下降部後退限 (逃げ側)
LD R2110                 ; ﾎﾙﾀﾞｰSub下降部前進限 (ﾜｰｸ側)
AND R2111                ; ﾎﾙﾀﾞｰSub下降部後退限 (逃げ側)
ORL
LDB R2110                ; ﾎﾙﾀﾞｰSub下降部前進限 (ﾜｰｸ側)
AND R2111                ; ﾎﾙﾀﾞｰSub下降部後退限 (逃げ側)
ORL
ANL
TMR @26 #30
CON
AND @T26
DW #4016 DM60009         ; Sensor    ERROR №
CON
SET MR4100               ; 17
LDB R2310                ; ﾎﾙﾀﾞｰSub下降部前進　ﾜｰｸ側
AND R2311                ; ﾎﾙﾀﾞｰSub下降部後退　逃げ側
LDB R2110                ; ﾎﾙﾀﾞｰSub下降部前進限 (ﾜｰｸ側)
ANB R2111                ; ﾎﾙﾀﾞｰSub下降部後退限 (逃げ側)
LD R2110                 ; ﾎﾙﾀﾞｰSub下降部前進限 (ﾜｰｸ側)
AND R2111                ; ﾎﾙﾀﾞｰSub下降部後退限 (逃げ側)
ORL
LD R2110                 ; ﾎﾙﾀﾞｰSub下降部前進限 (ﾜｰｸ側)
ANB R2111                ; ﾎﾙﾀﾞｰSub下降部後退限 (逃げ側)
ORL
ANL
TMR @27 #30
CON
AND @T27
DW #4017 DM60009         ; Sensor    ERROR №
CON
SET MR4101               ; 18
LD R2312                 ; ﾎﾙﾀﾞｰSub下降部下降
ANB R2313                ; ﾎﾙﾀﾞｰSub下降部上昇　逃げ側
LDB R2112                ; ﾎﾙﾀﾞｰSub下降部下降端
ANB R2113                ; ﾎﾙﾀﾞｰSub下降部上昇端 (逃げ側)
LD R2112                 ; ﾎﾙﾀﾞｰSub下降部下降端
AND R2113                ; ﾎﾙﾀﾞｰSub下降部上昇端 (逃げ側)
ORL
LDB R2112                ; ﾎﾙﾀﾞｰSub下降部下降端
AND R2113                ; ﾎﾙﾀﾞｰSub下降部上昇端 (逃げ側)
ORL
ANL
TMR @28 #30
CON
AND @T28
DW #4018 DM60009         ; Sensor    ERROR №
CON
SET MR4102               ; 19
LDB R2312                ; ﾎﾙﾀﾞｰSub下降部下降
AND R2313                ; ﾎﾙﾀﾞｰSub下降部上昇　逃げ側
LDB R2112                ; ﾎﾙﾀﾞｰSub下降部下降端
ANB R2113                ; ﾎﾙﾀﾞｰSub下降部上昇端 (逃げ側)
LD R2112                 ; ﾎﾙﾀﾞｰSub下降部下降端
AND R2113                ; ﾎﾙﾀﾞｰSub下降部上昇端 (逃げ側)
ORL
LD R2112                 ; ﾎﾙﾀﾞｰSub下降部下降端
ANB R2113                ; ﾎﾙﾀﾞｰSub下降部上昇端 (逃げ側)
ORL
ANL
TMR @29 #30
CON
AND @T29
DW #4019 DM60009         ; Sensor    ERROR №
CON
SET MR4103               ; 20
MCR
;インターロック
LD R2008                 ; ｶｼﾒRob　原点ｾﾝｻ
AND>= DM10500 #2400      ; RB_1       現在位置
AND DM10507.1            ; HEND      原点復帰完了
TMR #900 #5
CON
AND T900
OUT MR400                ; ｾｯﾄ台ｽﾗｲﾄﾞ前進　ｶｼﾒ側移動 IL_OK
LD R2008                 ; ｶｼﾒRob　原点ｾﾝｻ
AND>= DM10500 #2400      ; RB_1       現在位置
AND DM10507.1            ; HEND      原点復帰完了
TMR #901 #5
CON
AND T901
OUT MR401                ; ｾｯﾄ台ｽﾗｲﾄﾞ後退　ﾜｰｸｾ側移動 IL_OK
LD R2309                 ; COFｶﾞｲﾄﾞﾁｬｯｸ開
ANB R2308                ; COFｶﾞｲﾄﾞﾁｬｯｸ閉
AND>= DM10500 #2400      ; RB_1       現在位置
AND DM10507.1            ; HEND      原点復帰完了
OUT MR402                ; COFｶﾞｲﾄﾞ前進　ﾜｰｸ側移動 IL_OK
LD R2309                 ; COFｶﾞｲﾄﾞﾁｬｯｸ開
ANB R2308                ; COFｶﾞｲﾄﾞﾁｬｯｸ閉
AND>= DM10500 #2400      ; RB_1       現在位置
AND DM10507.1            ; HEND      原点復帰完了
OUT MR403                ; COFｶﾞｲﾄﾞ後退　逃げ側 IL_OK
LD R1113                 ; ｾｯﾄ台ｽﾗｲﾄﾞ後退　ﾜｰｸｾｯﾄ側
AND R1115                ; COFｶﾞｲﾄﾞ後退　逃げ側
TMR #904 #10
CON
AND T904
OUT MR404                ; ﾎﾙﾀﾞｰSub　Rob下降動作 IL_OK
LD CR2002                ; 常時ON
TMR #905 #10
CON
AND T905
OUT MR405                ; ﾎﾙﾀﾞｰSub　Rob上昇動作 IL_OK
LD R1112                 ; ｾｯﾄ台ｽﾗｲﾄﾞ前進　ｶｼﾒ側
TMR #906 #5
CON
AND T906
OUT MR406                ; ｶｼﾒRob下降動作 IL_OK
LD CR2002                ; 常時ON
TMR #907 #5
CON
AND T907
OUT MR407                ; ｶｼﾒRob上昇動作 IL_OK
LD CR2002                ; 常時ON
TMR #908 #5
CON
AND T908
OUT MR408
LDB CR2002               ; 常時ON
TMR #910 #5
CON
AND T910
OUT MR410
LDB CR2002               ; 常時ON
TMR #912 #5
CON
AND T912
OUT MR412
LDB CR2002               ; 常時ON
TMR #914 #5
CON
AND T914
OUT MR414
;TASK0  Sensor ERROR
LD>= DM60009 #4000       ; Sensor    ERROR №
AND<= DM60009 #4009      ; Sensor    ERROR №
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1 @DM1               ; ErrorNo /ERROR_DISP
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
LDA DM60009              ; Sensor    ERROR №
CON
STA @DM2                 ; SensorNo /ERROR_DISP
CON
SET @R100                ; Task0     ERROR
CON
SET @R000
STG @R000
AND @R101                ; Task0     ERROR_End
RES @R101                ; Task0     ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
ZRES MR4000 MR6915       ; ﾜｰｸ引込   前進ｴﾗｰ
CON
DW #0 DM60009            ; Sensor    ERROR №
CON
OUT @R001
CON
ENDS
;MyTask Error Process Substance / ｴﾗｰ処理実体
STG @R100                ; Task0     ERROR
ANB R39002               ; ERROR_DISP Busy
MPS
ZRES @R105 @R108         ; SW1  SW4
CON
LDA @DM9                 ; ReturnSW /ERROR_DISP
CON
TBCD
CON
STA @DM10
CON
DISN @DM10 @DM3 #4
MRD
DW #0 @DM0               ; TaskNo /ERROR_DISP
CON
BMOV @DM0 DM60000 #7     ; TaskNo /ERROR_DISP  TaskNo /ERROR_DISP
MPP
SET R39000               ; ERROR_DISP Start
CON
SET @R102                ; Task0     ERROR Busy
CON
JMP @R103
STG @R103
AND R39002               ; ERROR_DISP Busy
AND= DM60008 @DM1        ; ReturnNo /ERROR_DISP  ErrorNo /ERROR_DISP
JMP @R104
STG @R104
ANB R39002               ; ERROR_DISP Busy
RES @R102                ; Task0     ERROR Busy
CON
SET @R101                ; Task0     ERROR_End
CON
ENDS
END
ENDH
