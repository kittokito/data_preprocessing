DEVICE:53
;MODULE:Group1_Task10
;MODULE_TYPE:0
;SCRIPT_TYPE:
;OneSystem Main-Module
;
;-----------------------------------------
;ModuleName	:	Group1_Task10
;ModuleType	:	Main Module
;Line		:	
;Cell		:	
;Function	:	MAINTENANCE Cylinder動作、RBﾃｨｰﾁﾝｸﾞ動作専用
;-----------------------------------------
;<h1/>※MAINTENANCE Cylinder動作及びRBﾃｨｰﾁﾝｸﾞはTASK9を介して動作させます。
;<<Task LocalDevice>>
;/*項目			/*割付ｴﾘｱ				/*備考
;---------------------------------------------------------------------			
;Emergency		@MR000〜@MR015			Emergency処理時RESET禁止ｴﾘｱ
;Free			@MR100〜@MR915			ﾕｰｻﾞｰﾌﾘｰｴﾘｱ
;HOME			@なし
;MAINTENANCE		@MR2000〜@MR2915		MAINTE動作時使用ｴﾘｱ
;AUTO(Main1)		なし
;	(Main2)		なし
;SubRoutine		なし
;----------------------------------------------------------------------
;<h1/>Device_Init/ﾃﾞﾊﾞｲｽ初期化
;[内容]
;・非常停止、優先ｴﾗｰ発生時に初期化したいﾃﾞﾊﾞｲｽを指定して下さい
;※本Taskで使用するﾛｰｶﾙﾃﾞﾊﾞｲｽなど
;※STG〜JMPにて使用しているﾃﾞﾊﾞｲｽは必須
LDP R46104               ; _非常停止中　ﾓｰﾄﾞﾌﾗｸﾞ
ZRES @MR100 @MR2915      ; Task10 ERROR  Mainte END
LD= DM60000 MyTask       ; TaskNo /ERROR_DISP  自ﾀｽｸ番号
AND R46208               ; _Group1　ｴﾗｰ発生中
OUT @MR001               ; TASK10　ERROR
;<h1/>Task_Monitor/ﾀｽｸﾓﾆﾀｰ
LD CR2002                ; 常時ON
FLIK #50 #50 @MR000
;<h1/>RB PLS列タイプ検出
;TYPE @DM10.U,DM50312.U
;
;IF DM50312<> @DM10 THEN 'RB番号変更時  PLS列RBﾌﾗｸﾞｸﾘｱ
;	RES(R39007)
;END IF
;@DM10=DM50312			'RB選択番号格納
;
;
;IF RB_TYPE[0,DM50312] = 6 OR RB_TYPE[0,DM50312] = 7  THEN  '選択されたRBがPLS列TYPEか確認 6 OR 7 はMC
;		SET(R39007)                						   'PLS列TYPEの場合 ﾌﾗｸﾞON
;END IF
;TYPE @DM10.U,DM50312.U
;
;IF DM50312<> @DM10 THEN 'RB番号変更時  PLS列RBﾌﾗｸﾞｸﾘｱ
;
LD<> DM50312 @DM10       ; RB選択
NCJ #2000
;	RES(R39007)
;
LD CR2002                ; 常時ON
RES R39007               ; PLS列TYPE
;END IF
;
LABEL #2000
;@DM10=DM50312			'RB選択番号格納
;
LD CR2002                ; 常時ON
MOV DM50312 @DM10        ; RB選択
;IF RB_TYPE[0,DM50312] = 6 OR RB_TYPE[0,DM50312] = 7  THEN  '選択されたRBがPLS列TYPEか確認 6 OR 7 はMC
;
LD CR2002                ; 常時ON
LDA DM50312              ; RB選択
CON
EXT
CON
ADD.L +0
CON
STA.L Z12
LD= W3A25:Z12 #6         ; RB1 TYPE
OUT @VB00
LD CR2002                ; 常時ON
LDA DM50312              ; RB選択
CON
EXT
CON
ADD.L +0
CON
STA.L Z12
LD= W3A25:Z12 #7         ; RB1 TYPE
OR @VB00
NCJ #2001
;		SET(R39007)                						   'PLS列TYPEの場合 ﾌﾗｸﾞON
;
LD CR2002                ; 常時ON
SET R39007               ; PLS列TYPE
;END IF
LABEL #2001
;
;<h1/>MC AXIS No.割出
;IF RB_TYPE[2,DM50312]<> 0 THEN
;		@DM14.T =STR(RB_TYPE[2,DM50312]) 'MC AxisNo.割出
;		DISB(@DM14,@DM16,2) 
;		BSWAP(@D16,2)             '桁分割
;		Axis_No= RDASC(@DM16.T)		     'AXIS No.格納
;		Unit_No= RDASC(@DM17.T)			 'UNIT No.格納
;END IF
;IF RB_TYPE[2,DM50312]<> 0 THEN
;
LD CR2002                ; 常時ON
LDA DM50312              ; RB選択
CON
EXT
CON
ADD.L +64
CON
STA.L Z12
LD<> W3A25:Z12 #0        ; RB1 TYPE
NCJ #2002
;		@DM14.T =STR(RB_TYPE[2,DM50312]) 'MC AxisNo.割出
;
LD CR2002                ; 常時ON
LDA DM50312              ; RB選択
CON
EXT
CON
ADD.L +64
CON
STA.L Z12
LD CR2002                ; 常時ON
ADRSET VM2 VM0
MOV #0 VM2
MOV.D VM0 @VM1
LD CR2002                ; 常時ON
MOV CR2800 @VM0          ; ﾌﾞﾚｰｸ信号送出
SET CR2814               ; ASCII変換ｾﾞﾛｻﾌﾟﾚｽ設定
SET CR2815               ; ASCII変換+符号省略
DASC W3A25:Z12 *@VM1     ; RB1 TYPE
MOV @VM0 CR2800          ; ﾌﾞﾚｰｸ信号送出
LD CR2002                ; 常時ON
SMOV *@VM1 @DM14
;		DISB(@DM14,@DM16,2) 
;
LD CR2002                ; 常時ON
DISB @DM14 @DM16 #2
;		BSWAP(@D16,2)             '桁分割
;
LD CR2002                ; 常時ON
BSWAP @DM16 #2
;		Axis_No= RDASC(@DM16.T)		     'AXIS No.格納
;
LD CR2002                ; 常時ON
MOV.L +0 @VM3
RDASC.L @DM16 @VM3
LD CR2002                ; 常時ON
MOV @VM3 W3A22           ; Axis No.
;		Unit_No= RDASC(@DM17.T)			 'UNIT No.格納
;
LD CR2002                ; 常時ON
MOV.L +0 @VM5
RDASC.L @DM17 @VM5
LD CR2002                ; 常時ON
MOV @VM5 W3A23           ; Unit No.
;END IF
LABEL #2002
;
;<h1/>Task_Init/ﾀｽｸ初期化
;[本STG内容]
;・本Task起動時に必要な初期化処理を記述して下さい
;・起動Taskの全Init処理終了後、Task_StartのSTGが起動します
STG LR810                ; _Grp1_Task10_Init.STG
ENDS
;<h1/>Task_Start/ﾀｽｸ開始
;[本STG内容]
;・Task起動後、以下運転ﾓｰﾄﾞに従い、各STGにJMPします
;【HOME】	→	LR5200
;【AUTO】	→	LR5400
;【MAINTE】	→	LR5600
;・本STGは追記、修正不要です
STG LR410                ; _Grp1_Task10_Start.STG
MPS
LD R46101                ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
OR R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANL
JMP LR610                ; _Grp1_Task10_Fin.STG
MPP
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5610               ; _Grp1_Task10_MAINTE.STG
;<h1/>Task_Finish/ﾀｽｸ終了
;[本STG内容]
;・各Taskの終了STGになります
;・運転ﾓｰﾄﾞに係わらず終了時は本STGを経由して終了して下さい
;・本STGは追記、修正不要です
STG LR610                ; _Grp1_Task10_Fin.STG
MPS
LDB R41210               ; TASK10 PAUSE 要求
ANB @MR001               ; TASK10　ERROR
ANL
RES R42610               ; Grp1_Task10_ﾎﾟｰｽﾞ許可
CON
RES R41010               ; _Grp1_Task10_起動中ﾌﾗｸﾞ
CON
ENDS
MPP
AND R41210               ; TASK10 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;<h1/>MAINTE/ﾒﾝﾃﾅﾝｽ動作
;[本STG内容]
;・各TaskのMAINTE動作を記述して下さい
;・動作ﾓｰﾄﾞは「MAINTEAC*」に格納されています(1〜32)
;・動作終了時は@MR2915にJMPして下さい
STG LR5610               ; _Grp1_Task10_MAINTE.STG
JMP @MR2000              ; Mainte
STG @MR2000              ; Mainte
SET @MR2002              ; ﾒﾝﾃ中
CON
JMP @MR2003
STG @MR2003
MPS
AND= DM4110 #25          ; _Group1　ﾒﾝﾃ動作番号
@DW #2010 DM3008         ; _MainTP　切替ﾍﾟｰｼﾞNo
CON
JMP @MR2400              ; ｼﾘﾝﾀﾞｰ手動操作
MRD
AND= DM4110 #26          ; _Group1　ﾒﾝﾃ動作番号
@DW #2150 DM3008         ; _MainTP　切替ﾍﾟｰｼﾞNo
CON
JMP @MR2100              ; RB ﾃｨｰﾁﾝｸﾞ
MPP
LD<> DM4110 #25          ; _Group1　ﾒﾝﾃ動作番号
AND<> DM4110 #26         ; _Group1　ﾒﾝﾃ動作番号
OR R47800                ; _Group1　ﾒﾝﾃ動作定停止移行中
ANL
JMP @MR2915              ; Mainte END
;<h1/>ﾒﾝﾃ Cylinder動作
STG @MR2400              ; ｼﾘﾝﾀﾞｰ手動操作
MPS
ANB R41210               ; TASK10 PAUSE 要求
OUT @MR2402              ; ｼﾘﾝﾀﾞｰ 手動操作中
CON
AND @MR1902              ; 終了確認
JMP @MR2914
MRD
AND R41210               ; TASK10 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
MPP
ANP MR22000              ; Cylinder動作終了
SET @MR1902              ; 終了確認
LD @MR2400               ; ｼﾘﾝﾀﾞｰ手動操作
OR @MR2102               ; ﾃｨｰﾁﾝｸﾞ中
ANB R41210               ; TASK10 PAUSE 要求
MC
;<h1/>Cylinder-1  動作
;ﾙﾐﾗｰ巻出しﾓｰﾀ
LDP MR21300              ; ﾙﾐﾗｰ巻出しﾓｰﾀ CW回転
ANB MR21301              ; ﾙﾐﾗｰ巻出しﾓｰﾀ CCW回転
ANB MR1105               ; ﾙﾐﾗｰ巻出しﾓｰﾀ 制御解除
SET MR1103               ; ﾙﾐﾗｰ巻出しﾓｰﾀ CW
CON
RES MR1104               ; ﾙﾐﾗｰ巻出しﾓｰﾀ CCW
LDF MR21300              ; ﾙﾐﾗｰ巻出しﾓｰﾀ CW回転
RES MR1103               ; ﾙﾐﾗｰ巻出しﾓｰﾀ CW
CON
RES MR1104               ; ﾙﾐﾗｰ巻出しﾓｰﾀ CCW
LDP MR21301              ; ﾙﾐﾗｰ巻出しﾓｰﾀ CCW回転
ANB MR21300              ; ﾙﾐﾗｰ巻出しﾓｰﾀ CW回転
ANB MR1105               ; ﾙﾐﾗｰ巻出しﾓｰﾀ 制御解除
RES MR1103               ; ﾙﾐﾗｰ巻出しﾓｰﾀ CW
CON
SET MR1104               ; ﾙﾐﾗｰ巻出しﾓｰﾀ CCW
LDF MR21301              ; ﾙﾐﾗｰ巻出しﾓｰﾀ CCW回転
RES MR1103               ; ﾙﾐﾗｰ巻出しﾓｰﾀ CW
CON
RES MR1104               ; ﾙﾐﾗｰ巻出しﾓｰﾀ CCW
;ﾙﾐﾗｰ巻出しﾓｰﾀ  ﾌﾞﾚｰｷ解除
LDP MR21302              ; ﾙﾐﾗｰ巻出しﾓｰﾀ ﾌﾞﾚｰｷ解除OFF
ANB MR21303              ; ﾙﾐﾗｰ巻出しﾓｰﾀ ﾌﾞﾚｰｷ解除ON
RES MR1105               ; ﾙﾐﾗｰ巻出しﾓｰﾀ 制御解除
LDP MR21303              ; ﾙﾐﾗｰ巻出しﾓｰﾀ ﾌﾞﾚｰｷ解除ON
ANB MR21302              ; ﾙﾐﾗｰ巻出しﾓｰﾀ ﾌﾞﾚｰｷ解除OFF
SET MR1105               ; ﾙﾐﾗｰ巻出しﾓｰﾀ 制御解除
;ﾙﾐﾗｰ巻取りﾓｰﾀ
LDP MR21304              ; ﾙﾐﾗｰ巻取りﾓｰﾀ CW回転
ANB MR21305              ; ﾙﾐﾗｰ巻取りﾓｰﾀ CCW回転
ANB MR1108               ; ﾙﾐﾗｰ巻取りﾓｰﾀ 制御解除
SET MR1106               ; ﾙﾐﾗｰ巻取りﾓｰﾀ CW
CON
RES MR1107               ; ﾙﾐﾗｰ巻取りﾓｰﾀ CCW
LDF MR21304              ; ﾙﾐﾗｰ巻取りﾓｰﾀ CW回転
RES MR1106               ; ﾙﾐﾗｰ巻取りﾓｰﾀ CW
CON
RES MR1107               ; ﾙﾐﾗｰ巻取りﾓｰﾀ CCW
LDP MR21305              ; ﾙﾐﾗｰ巻取りﾓｰﾀ CCW回転
ANB MR21304              ; ﾙﾐﾗｰ巻取りﾓｰﾀ CW回転
ANB MR1108               ; ﾙﾐﾗｰ巻取りﾓｰﾀ 制御解除
RES MR1106               ; ﾙﾐﾗｰ巻取りﾓｰﾀ CW
CON
SET MR1107               ; ﾙﾐﾗｰ巻取りﾓｰﾀ CCW
LDF MR21305              ; ﾙﾐﾗｰ巻取りﾓｰﾀ CCW回転
RES MR1106               ; ﾙﾐﾗｰ巻取りﾓｰﾀ CW
CON
RES MR1107               ; ﾙﾐﾗｰ巻取りﾓｰﾀ CCW
;ﾙﾐﾗｰ巻取りﾓｰﾀ  ﾌﾞﾚｰｷ解除
LDP MR21306              ; ﾙﾐﾗｰ巻取りﾓｰﾀ ﾌﾞﾚｰｷ解除OFF
ANB MR21307              ; ﾙﾐﾗｰ巻取りﾓｰﾀ ﾌﾞﾚｰｷ解除ON
RES MR1108               ; ﾙﾐﾗｰ巻取りﾓｰﾀ 制御解除
LDP MR21307              ; ﾙﾐﾗｰ巻取りﾓｰﾀ ﾌﾞﾚｰｷ解除ON
ANB MR21306              ; ﾙﾐﾗｰ巻取りﾓｰﾀ ﾌﾞﾚｰｷ解除OFF
SET MR1108               ; ﾙﾐﾗｰ巻取りﾓｰﾀ 制御解除
;ﾃﾝｼｮﾝ上下
LDP MR21308              ; ﾃﾝｼｮﾝ上下 上昇
ANB MR21309              ; ﾃﾝｼｮﾝ上下 下降
ANB MR21310              ; ﾃﾝｼｮﾝ上下 OFF
RES MR7200               ; ﾙﾐﾗｰ巻取りﾃﾝｼｮﾝ 下降
CON
SET MR7201               ; ﾙﾐﾗｰ巻取りﾃﾝｼｮﾝ 上昇
LDP MR21309              ; ﾃﾝｼｮﾝ上下 下降
ANB MR21308              ; ﾃﾝｼｮﾝ上下 上昇
ANB MR21310              ; ﾃﾝｼｮﾝ上下 OFF
RES MR7201               ; ﾙﾐﾗｰ巻取りﾃﾝｼｮﾝ 上昇
CON
SET MR7200               ; ﾙﾐﾗｰ巻取りﾃﾝｼｮﾝ 下降
LDP MR21310              ; ﾃﾝｼｮﾝ上下 OFF
ANB MR21308              ; ﾃﾝｼｮﾝ上下 上昇
ANB MR21309              ; ﾃﾝｼｮﾝ上下 下降
RES MR7200               ; ﾙﾐﾗｰ巻取りﾃﾝｼｮﾝ 下降
CON
RES MR7201               ; ﾙﾐﾗｰ巻取りﾃﾝｼｮﾝ 上昇
LDB MR7200               ; ﾙﾐﾗｰ巻取りﾃﾝｼｮﾝ 下降
ANB MR7201               ; ﾙﾐﾗｰ巻取りﾃﾝｼｮﾝ 上昇
OUT MR21311              ; ﾃﾝｼｮﾝ上下 OFF表示
;ｲｵﾅｲｻﾞ放電停止
LDP MR21312              ; ｲｵﾅｲｻﾞ放電停止
ALT MR7300               ; ｲｵﾅｲｻﾞｴｱ-
;<h1/>Cylinder2  動作
;ﾙﾐﾗｰ送り/戻し
LDP MR21400              ; ﾙﾐﾗｰ送り 1ﾋﾟｯﾁ
ANB MR21401              ; ﾙﾐﾗｰ送り 1行
ANB MR21402              ; ﾙﾐﾗｰ戻し 1ﾋﾟｯﾁ（大）
ANB MR21403              ; ﾙﾐﾗｰ戻し 1ﾋﾟｯﾁ（小）
ANB MR21405              ; ﾙﾐﾗｰ送り連続
ANB @MR1002              ; ﾙﾐﾗｰ送り 1ﾋﾟｯﾁ動作中
ANB @MR1102              ; ﾙﾐﾗｰ送り 1行動作中
ANB @MR1202              ; ﾙﾐﾗｰ戻し 1ﾋﾟｯﾁ大動作中
ANB @MR1302              ; ﾙﾐﾗｰ戻し 1ﾋﾟｯﾁ小動作中
ANB @MR1402              ; ﾙﾐﾗｰ送り 連続動作中
SET @MR1000
LDP MR21401              ; ﾙﾐﾗｰ送り 1行
ANB MR21400              ; ﾙﾐﾗｰ送り 1ﾋﾟｯﾁ
ANB MR21402              ; ﾙﾐﾗｰ戻し 1ﾋﾟｯﾁ（大）
ANB MR21403              ; ﾙﾐﾗｰ戻し 1ﾋﾟｯﾁ（小）
ANB MR21405              ; ﾙﾐﾗｰ送り連続
ANB @MR1002              ; ﾙﾐﾗｰ送り 1ﾋﾟｯﾁ動作中
ANB @MR1102              ; ﾙﾐﾗｰ送り 1行動作中
ANB @MR1202              ; ﾙﾐﾗｰ戻し 1ﾋﾟｯﾁ大動作中
ANB @MR1302              ; ﾙﾐﾗｰ戻し 1ﾋﾟｯﾁ小動作中
ANB @MR1402              ; ﾙﾐﾗｰ送り 連続動作中
SET @MR1100
LDP MR21402              ; ﾙﾐﾗｰ戻し 1ﾋﾟｯﾁ（大）
ANB MR21400              ; ﾙﾐﾗｰ送り 1ﾋﾟｯﾁ
ANB MR21401              ; ﾙﾐﾗｰ送り 1行
ANB MR21403              ; ﾙﾐﾗｰ戻し 1ﾋﾟｯﾁ（小）
ANB MR21405              ; ﾙﾐﾗｰ送り連続
ANB @MR1002              ; ﾙﾐﾗｰ送り 1ﾋﾟｯﾁ動作中
ANB @MR1102              ; ﾙﾐﾗｰ送り 1行動作中
ANB @MR1202              ; ﾙﾐﾗｰ戻し 1ﾋﾟｯﾁ大動作中
ANB @MR1302              ; ﾙﾐﾗｰ戻し 1ﾋﾟｯﾁ小動作中
ANB @MR1402              ; ﾙﾐﾗｰ送り 連続動作中
SET @MR1200
LDP MR21403              ; ﾙﾐﾗｰ戻し 1ﾋﾟｯﾁ（小）
ANB MR21400              ; ﾙﾐﾗｰ送り 1ﾋﾟｯﾁ
ANB MR21401              ; ﾙﾐﾗｰ送り 1行
ANB MR21402              ; ﾙﾐﾗｰ戻し 1ﾋﾟｯﾁ（大）
ANB MR21405              ; ﾙﾐﾗｰ送り連続
ANB @MR1002              ; ﾙﾐﾗｰ送り 1ﾋﾟｯﾁ動作中
ANB @MR1102              ; ﾙﾐﾗｰ送り 1行動作中
ANB @MR1202              ; ﾙﾐﾗｰ戻し 1ﾋﾟｯﾁ大動作中
ANB @MR1302              ; ﾙﾐﾗｰ戻し 1ﾋﾟｯﾁ小動作中
ANB @MR1402              ; ﾙﾐﾗｰ送り 連続動作中
SET @MR1300
LDP MR21405              ; ﾙﾐﾗｰ送り連続
ANB MR21400              ; ﾙﾐﾗｰ送り 1ﾋﾟｯﾁ
ANB MR21401              ; ﾙﾐﾗｰ送り 1行
ANB MR21402              ; ﾙﾐﾗｰ戻し 1ﾋﾟｯﾁ（大）
ANB MR21403              ; ﾙﾐﾗｰ戻し 1ﾋﾟｯﾁ（小）
ANB @MR1002              ; ﾙﾐﾗｰ送り 1ﾋﾟｯﾁ動作中
ANB @MR1102              ; ﾙﾐﾗｰ送り 1行動作中
ANB @MR1202              ; ﾙﾐﾗｰ戻し 1ﾋﾟｯﾁ大動作中
ANB @MR1302              ; ﾙﾐﾗｰ戻し 1ﾋﾟｯﾁ小動作中
ANB @MR1402              ; ﾙﾐﾗｰ送り 連続動作中
SET @MR1400
;<h1/>Cylinder3  動作
;ｽｸﾚﾊﾟｰ上下
LDP MR21500              ; ｽｸﾚﾊﾟｰ上下 上昇
ANB MR21501              ; ｽｸﾚﾊﾟｰ上下 下降
ANB DM11055.2            ; RB7 MOVE
RES MR7202               ; ｽｸﾚﾊﾟｰ上下 下降
LDP MR21501              ; ｽｸﾚﾊﾟｰ上下 下降
ANB MR21500              ; ｽｸﾚﾊﾟｰ上下 上昇
ANB DM11055.2            ; RB7 MOVE
SET MR7202               ; ｽｸﾚﾊﾟｰ上下 下降
;ｽｸﾚﾊﾟｰ退避上下
LDP MR21502              ; ｽｸﾚﾊﾟｰ退避上下 上昇
ANB MR21503              ; ｽｸﾚﾊﾟｰ退避上下 下降
ANB DM11055.2            ; RB7 MOVE
RES MR7203               ; ｽｸﾚﾊﾟｰ待避上下 下降
LDP MR21503              ; ｽｸﾚﾊﾟｰ退避上下 下降
ANB MR21502              ; ｽｸﾚﾊﾟｰ退避上下 上昇
ANB DM11055.2            ; RB7 MOVE
SET MR7203               ; ｽｸﾚﾊﾟｰ待避上下 下降
;ﾙﾐﾗｰｸﾗﾝﾌﾟ上下-1
LDP MR21504              ; ﾙﾐﾗｰｸﾗﾝﾌﾟ-1 開
ANB MR21505              ; ﾙﾐﾗｰｸﾗﾝﾌﾟ-1 閉
SET MR7210               ; ﾙﾐﾗｰｸﾗﾝﾌﾟ-1 上昇
CON
RES MR7209               ; ﾙﾐﾗｰｸﾗﾝﾌﾟ-1 下降
LDP MR21505              ; ﾙﾐﾗｰｸﾗﾝﾌﾟ-1 閉
ANB MR21504              ; ﾙﾐﾗｰｸﾗﾝﾌﾟ-1 開
SET MR7209               ; ﾙﾐﾗｰｸﾗﾝﾌﾟ-1 下降
CON
RES MR7210               ; ﾙﾐﾗｰｸﾗﾝﾌﾟ-1 上昇
;ﾙﾐﾗｰｸﾗﾝﾌﾟ上下-2
LDP MR21506              ; ﾙﾐﾗｰｸﾗﾝﾌﾟ-2 開
ANB MR21507              ; ﾙﾐﾗｰｸﾗﾝﾌﾟ-2 閉
SET MR7212               ; ﾙﾐﾗｰｸﾗﾝﾌﾟ-2 上昇
CON
RES MR7211               ; ﾙﾐﾗｰｸﾗﾝﾌﾟ-2 下降
LDP MR21507              ; ﾙﾐﾗｰｸﾗﾝﾌﾟ-2 閉
ANB MR21506              ; ﾙﾐﾗｰｸﾗﾝﾌﾟ-2 開
SET MR7211               ; ﾙﾐﾗｰｸﾗﾝﾌﾟ-2 下降
CON
RES MR7212               ; ﾙﾐﾗｰｸﾗﾝﾌﾟ-2 上昇
;ﾙﾐﾗｰｸﾗﾝﾌﾟ上下-3
LDP MR21508              ; ﾙﾐﾗｰｸﾗﾝﾌﾟ-3 開
ANB MR21509              ; ﾙﾐﾗｰｸﾗﾝﾌﾟ-3 閉
SET MR7214               ; ﾙﾐﾗｰｸﾗﾝﾌﾟ-3 上昇
CON
RES MR7213               ; ﾙﾐﾗｰｸﾗﾝﾌﾟ-3 下降
LDP MR21509              ; ﾙﾐﾗｰｸﾗﾝﾌﾟ-3 閉
ANB MR21508              ; ﾙﾐﾗｰｸﾗﾝﾌﾟ-3 開
SET MR7213               ; ﾙﾐﾗｰｸﾗﾝﾌﾟ-3 下降
CON
RES MR7214               ; ﾙﾐﾗｰｸﾗﾝﾌﾟ-3 上昇
;ｽｷｰｼﾞ X軸(RB7) 動作可ｲﾝﾀｰﾛｯｸ共通
LD DM11055.1             ; RB7 HEND
AND DM11055.4            ; RB7 SV
ANB DM11055.2            ; RB7 MOVE
ANB @MR502               ; ｽｷｰｼﾞRB(RB7)移動中
OUT @MR507               ; ｽｷｰｼﾞ X軸(RB7)動作可
;ｽｷｰｼﾞ X軸(RB7)動作
LDP MR21510              ; ｽｷｰｼﾞRB待機位置移動
ANB MR21511              ; ｽｷｰｼﾞRB開始位置移動
ANB MR21512              ; ｽｷｰｼﾞRB終了位置移動
AND @MR507               ; ｽｷｰｼﾞ X軸(RB7)動作可
DW #1 EM1312             ; RB7Target Pos
CON
SET @MR500               ; ｽｷｰｼﾞ X軸移動開始
LDP MR21511              ; ｽｷｰｼﾞRB開始位置移動
ANB MR21510              ; ｽｷｰｼﾞRB待機位置移動
ANB MR21512              ; ｽｷｰｼﾞRB終了位置移動
AND @MR507               ; ｽｷｰｼﾞ X軸(RB7)動作可
DW #2 EM1312             ; RB7Target Pos
CON
SET @MR500               ; ｽｷｰｼﾞ X軸移動開始
LDP MR21512              ; ｽｷｰｼﾞRB終了位置移動
ANB MR21510              ; ｽｷｰｼﾞRB待機位置移動
ANB MR21511              ; ｽｷｰｼﾞRB開始位置移動
AND @MR507               ; ｽｷｰｼﾞ X軸(RB7)動作可
DW #3 EM1312             ; RB7Target Pos
CON
SET @MR500               ; ｽｷｰｼﾞ X軸移動開始
;ｽｷｰｼﾞ X軸(RB7)  ﾛﾎﾞｯﾄ移動
STG @MR500               ; ｽｷｰｼﾞ X軸移動開始
SET @MR502               ; ｽｷｰｼﾞRB(RB7)移動中
CON
JMP @MR503
STG @MR503
SET MR21210              ; ｽｷｰｼﾞRB(RB7)移動要求
CON
JMP @MR504
STG @MR504
AND MR21211              ; ｽｷｰｼﾞRB(RB7)移動完了
RES @MR502               ; ｽｷｰｼﾞRB(RB7)移動中
CON
RES MR21211              ; ｽｷｰｼﾞRB(RB7)移動完了
CON
ENDS
;<h1/>Cylinder4  動作
;ﾙﾐﾗｰｸﾗﾝﾌﾟ上下
LDP MR21600              ; ﾙﾐﾗｰｸﾗﾝﾌﾟ上下 開 
ANB MR21601              ; ﾙﾐﾗｰｸﾗﾝﾌﾟ上下 閉
AND R4205                ; 転写S_ﾙﾐﾗｰ引張り 戻し端
RES MR7204               ; 転写S_ﾙﾐﾗｰｸﾗﾝﾌﾟ- 下降
CON
SET MR7205               ; 転写S_ﾙﾐﾗｰｸﾗﾝﾌﾟ- 上昇
LDP MR21601              ; ﾙﾐﾗｰｸﾗﾝﾌﾟ上下 閉
ANB MR21600              ; ﾙﾐﾗｰｸﾗﾝﾌﾟ上下 開 
RES MR7205               ; 転写S_ﾙﾐﾗｰｸﾗﾝﾌﾟ- 上昇
CON
SET MR7204               ; 転写S_ﾙﾐﾗｰｸﾗﾝﾌﾟ- 下降
;ﾙﾐﾗｰ引っ張り
LDP MR21602              ; ﾙﾐﾗｰ引っ張り 戻し
ANB MR21603              ; ﾙﾐﾗｰ引っ張り 引っ張り
RES MR7206               ; 転写S_ﾙﾐﾗｰ引張り 引張り
CON
SET MR7207               ; 転写S_ﾙﾐﾗｰ引張り 戻し
LDP MR21603              ; ﾙﾐﾗｰ引っ張り 引っ張り
ANB MR21602              ; ﾙﾐﾗｰ引っ張り 戻し
AND R4200                ; 転写S_ﾙﾐﾗｰｸﾗﾝﾌﾟ-前 下降端
AND R4202                ; 転写S_ﾙﾐﾗｰｸﾗﾝﾌﾟ-奥 下降端
RES MR7207               ; 転写S_ﾙﾐﾗｰ引張り 戻し
CON
SET MR7206               ; 転写S_ﾙﾐﾗｰ引張り 引張り
;<h1/>Cylinder5  動作
;転写台吸着、破壊
LDP MR21700              ; 転写台最左吸着ON
ANB MR21701              ; 転写台最左吸着OFF
ANB MR21702              ; 転写台最左吸着破壊ON
ANB @MR1502              ; 真空破壊動作中
SET MR7000               ; 転写台 最左吸着ON
CON
RES MR7001               ; 転写台 最左吸着OFF
CON
RES MR7002               ; 転写台 最左吸着破壊ON
LDP MR21701              ; 転写台最左吸着OFF
ANB MR21702              ; 転写台最左吸着破壊ON
ANB MR21700              ; 転写台最左吸着ON
ANB @MR1502              ; 真空破壊動作中
RES MR7000               ; 転写台 最左吸着ON
CON
SET MR7001               ; 転写台 最左吸着OFF
CON
RES MR7002               ; 転写台 最左吸着破壊ON
LDP MR21702              ; 転写台最左吸着破壊ON
ANB MR21700              ; 転写台最左吸着ON
ANB MR21701              ; 転写台最左吸着OFF
ANB @MR1502              ; 真空破壊動作中
SET @MR1500              ; 真空破壊動作
STG @MR1500              ; 真空破壊動作
SET @MR1502              ; 真空破壊動作中
CON
RES MR7000               ; 転写台 最左吸着ON
CON
SET MR7001               ; 転写台 最左吸着OFF
CON
RES MR7002               ; 転写台 最左吸着破壊ON
CON
JMP @MR1503
STG @MR1503
TMH @10 #5
CON
AND @T10
JMP @MR1504
STG @MR1504
RES MR7000               ; 転写台 最左吸着ON
CON
SET MR7001               ; 転写台 最左吸着OFF
CON
SET MR7002               ; 転写台 最左吸着破壊ON
CON
JMP @MR1505
STG @MR1505
MPS
AND R4301                ; 転写台 最左吸着確認 OUT2
RES MR7000               ; 転写台 最左吸着ON
CON
SET MR7001               ; 転写台 最左吸着OFF
CON
RES MR7002               ; 転写台 最左吸着破壊ON
CON
JMP @MR1506
MPP
ANB R4301                ; 転写台 最左吸着確認 OUT2
TMR @11 #30
CON
AND @T11
RES MR7000               ; 転写台 最左吸着ON
CON
SET MR7001               ; 転写台 最左吸着OFF
CON
RES MR7002               ; 転写台 最左吸着破壊ON
CON
JMP @MR1506
STG @MR1506
RES @MR1502              ; 真空破壊動作中
CON
ENDS
LDP MR21703              ; 転写台左吸着ON
ANB MR21704              ; 転写台左吸着OFF
ANB MR21705              ; 転写台左吸着破壊ON
ANB @MR1510              ; 真空破壊動作中
SET MR7003               ; 転写台 左吸着ON
CON
RES MR7004               ; 転写台 左吸着OFF
CON
RES MR7005               ; 転写台 左吸着破壊ON
LDP MR21704              ; 転写台左吸着OFF
ANB MR21705              ; 転写台左吸着破壊ON
ANB MR21703              ; 転写台左吸着ON
ANB @MR1510              ; 真空破壊動作中
RES MR7003               ; 転写台 左吸着ON
CON
SET MR7004               ; 転写台 左吸着OFF
CON
RES MR7005               ; 転写台 左吸着破壊ON
LDP MR21705              ; 転写台左吸着破壊ON
ANB MR21703              ; 転写台左吸着ON
ANB MR21704              ; 転写台左吸着OFF
ANB @MR1510              ; 真空破壊動作中
SET @MR1508              ; 真空破壊動作中
STG @MR1508              ; 真空破壊動作中
SET @MR1510              ; 真空破壊動作中
CON
RES MR7003               ; 転写台 左吸着ON
CON
SET MR7004               ; 転写台 左吸着OFF
CON
RES MR7005               ; 転写台 左吸着破壊ON
CON
JMP @MR1511
STG @MR1511
TMH @12 #5
CON
AND @T12
JMP @MR1512
STG @MR1512
RES MR7003               ; 転写台 左吸着ON
CON
SET MR7004               ; 転写台 左吸着OFF
CON
SET MR7005               ; 転写台 左吸着破壊ON
CON
JMP @MR1513
STG @MR1513
MPS
AND R4303                ; 転写台 左吸着確認 OUT2
RES MR7003               ; 転写台 左吸着ON
CON
SET MR7004               ; 転写台 左吸着OFF
CON
RES MR7005               ; 転写台 左吸着破壊ON
CON
JMP @MR1514
MPP
ANB R4303                ; 転写台 左吸着確認 OUT2
TMR @13 #30
CON
AND @T13
RES MR7003               ; 転写台 左吸着ON
CON
SET MR7004               ; 転写台 左吸着OFF
CON
RES MR7005               ; 転写台 左吸着破壊ON
CON
JMP @MR1514
STG @MR1514
RES @MR1510              ; 真空破壊動作中
CON
ENDS
LDP MR21706              ; 転写台中央吸着ON
ANB MR21707              ; 転写台中央吸着OFF
ANB MR21708              ; 転写台中央吸着破壊ON
ANB @MR1602              ; 真空破壊動作中
SET MR7006               ; 転写台 中央吸着ON
CON
RES MR7007               ; 転写台 中央吸着OFF
CON
RES MR7008               ; 転写台 中央吸着破壊ON
LDP MR21707              ; 転写台中央吸着OFF
ANB MR21708              ; 転写台中央吸着破壊ON
ANB MR21706              ; 転写台中央吸着ON
ANB @MR1602              ; 真空破壊動作中
RES MR7006               ; 転写台 中央吸着ON
CON
SET MR7007               ; 転写台 中央吸着OFF
CON
RES MR7008               ; 転写台 中央吸着破壊ON
LDP MR21708              ; 転写台中央吸着破壊ON
ANB MR21706              ; 転写台中央吸着ON
ANB MR21707              ; 転写台中央吸着OFF
ANB @MR1602              ; 真空破壊動作中
SET @MR1600              ; 真空破壊動作中
STG @MR1600              ; 真空破壊動作中
SET @MR1602              ; 真空破壊動作中
CON
RES MR7006               ; 転写台 中央吸着ON
CON
SET MR7007               ; 転写台 中央吸着OFF
CON
RES MR7008               ; 転写台 中央吸着破壊ON
CON
JMP @MR1603
STG @MR1603
TMH @14 #5
CON
AND @T14
JMP @MR1604
STG @MR1604
RES MR7006               ; 転写台 中央吸着ON
CON
SET MR7007               ; 転写台 中央吸着OFF
CON
SET MR7008               ; 転写台 中央吸着破壊ON
CON
JMP @MR1605
STG @MR1605
MPS
AND R4305                ; 転写台 中央吸着確認 OUT2
RES MR7006               ; 転写台 中央吸着ON
CON
SET MR7007               ; 転写台 中央吸着OFF
CON
RES MR7008               ; 転写台 中央吸着破壊ON
CON
JMP @MR1606
MPP
ANB R4305                ; 転写台 中央吸着確認 OUT2
TMR @15 #30
CON
AND @T15
RES MR7006               ; 転写台 中央吸着ON
CON
SET MR7007               ; 転写台 中央吸着OFF
CON
RES MR7008               ; 転写台 中央吸着破壊ON
CON
JMP @MR1606
STG @MR1606
RES @MR1602              ; 真空破壊動作中
CON
ENDS
LDP MR21709              ; 転写台右吸着ON
ANB MR21710              ; 転写台右吸着OFF
ANB MR21711              ; 転写台右吸着破壊ON
ANB @MR1610              ; 真空破壊動作中
SET MR7009               ; 転写台 右吸着ON
CON
RES MR7010               ; 転写台 右吸着OFF
CON
RES MR7011               ; 転写台 右吸着破壊ON
LDP MR21710              ; 転写台右吸着OFF
ANB MR21709              ; 転写台右吸着ON
ANB MR21711              ; 転写台右吸着破壊ON
ANB @MR1610              ; 真空破壊動作中
RES MR7009               ; 転写台 右吸着ON
CON
SET MR7010               ; 転写台 右吸着OFF
CON
RES MR7011               ; 転写台 右吸着破壊ON
LDP MR21711              ; 転写台右吸着破壊ON
ANB MR21709              ; 転写台右吸着ON
ANB MR21710              ; 転写台右吸着OFF
ANB @MR1610              ; 真空破壊動作中
SET @MR1608              ; 真空破壊動作中
STG @MR1608              ; 真空破壊動作中
SET @MR1610              ; 真空破壊動作中
CON
RES MR7009               ; 転写台 右吸着ON
CON
SET MR7010               ; 転写台 右吸着OFF
CON
RES MR7011               ; 転写台 右吸着破壊ON
CON
JMP @MR1611
STG @MR1611
TMH @16 #5
CON
AND @T16
JMP @MR1612
STG @MR1612
RES MR7009               ; 転写台 右吸着ON
CON
SET MR7010               ; 転写台 右吸着OFF
CON
SET MR7011               ; 転写台 右吸着破壊ON
CON
JMP @MR1613
STG @MR1613
MPS
AND R4307                ; 転写台 右吸着確認 OUT2
RES MR7009               ; 転写台 右吸着ON
CON
SET MR7010               ; 転写台 右吸着OFF
CON
RES MR7011               ; 転写台 右吸着破壊ON
CON
JMP @MR1614
MPP
ANB R4307                ; 転写台 右吸着確認 OUT2
TMR @17 #30
CON
AND @T17
RES MR7009               ; 転写台 右吸着ON
CON
SET MR7010               ; 転写台 右吸着OFF
CON
RES MR7011               ; 転写台 右吸着破壊ON
CON
JMP @MR1614
STG @MR1614
RES @MR1610              ; 真空破壊動作中
CON
ENDS
LDP MR21712              ; 転写台最右吸着ON
ANB MR21713              ; 転写台最右吸着OFF
ANB MR21714              ; 転写台最右吸着破壊ON
ANB @MR1702              ; 真空破壊動作中
SET MR7012               ; 転写台 最右吸着ON
CON
RES MR7013               ; 転写台 最右吸着OFF
CON
RES MR7014               ; 転写台 最右吸着破壊ON
LDP MR21713              ; 転写台最右吸着OFF
ANB MR21712              ; 転写台最右吸着ON
ANB MR21714              ; 転写台最右吸着破壊ON
ANB @MR1702              ; 真空破壊動作中
RES MR7012               ; 転写台 最右吸着ON
CON
SET MR7013               ; 転写台 最右吸着OFF
CON
RES MR7014               ; 転写台 最右吸着破壊ON
LDP MR21714              ; 転写台最右吸着破壊ON
ANB MR21712              ; 転写台最右吸着ON
ANB MR21713              ; 転写台最右吸着OFF
ANB @MR1702              ; 真空破壊動作中
SET @MR1700              ; 真空破壊動作中
STG @MR1700              ; 真空破壊動作中
SET @MR1702              ; 真空破壊動作中
CON
RES MR7012               ; 転写台 最右吸着ON
CON
SET MR7013               ; 転写台 最右吸着OFF
CON
RES MR7014               ; 転写台 最右吸着破壊ON
CON
JMP @MR1703
STG @MR1703
TMH @18 #5
CON
AND @T18
JMP @MR1704
STG @MR1704
RES MR7012               ; 転写台 最右吸着ON
CON
SET MR7013               ; 転写台 最右吸着OFF
CON
SET MR7014               ; 転写台 最右吸着破壊ON
CON
JMP @MR1705
STG @MR1705
MPS
AND R4309                ; 転写台 最右吸着確認 OUT2
RES MR7012               ; 転写台 最右吸着ON
CON
SET MR7013               ; 転写台 最右吸着OFF
CON
RES MR7014               ; 転写台 最右吸着破壊ON
CON
JMP @MR1706
MPP
ANB R4309                ; 転写台 最右吸着確認 OUT2
TMR @19 #30
CON
AND @T19
RES MR7012               ; 転写台 最右吸着ON
CON
SET MR7013               ; 転写台 最右吸着OFF
CON
RES MR7014               ; 転写台 最右吸着破壊ON
CON
JMP @MR1706
STG @MR1706
RES @MR1702              ; 真空破壊動作中
CON
ENDS
;<h1/>Cylinder6  動作
LDP MR21800              ; 転写ﾍｯﾄﾞ固定 固定
ANB MR21801              ; 転写ﾍｯﾄﾞ固定 解除
AND DM11047.12           ; RB6 ZONE1
RES MR7208               ; 転写ﾍｯﾄﾞ固定 解除
LDP MR21801              ; 転写ﾍｯﾄﾞ固定 解除
ANB MR21800              ; 転写ﾍｯﾄﾞ固定 固定
AND DM11047.12           ; RB6 ZONE1
SET MR7208               ; 転写ﾍｯﾄﾞ固定 解除
;転写ﾍｯﾄﾞY軸  動作可ｲﾝﾀｰﾛｯｸ共通
LD DM11023.1             ; RB3 HEND
AND DM11023.4            ; RB3 SV
AND DM11047.12           ; RB6 ZONE1
ANB DM11023.2            ; RB3 MOVE
ANB @MR510               ; 転写Y軸動作中
OUT @MR515               ; ﾒﾝﾃ_転写Ｙ軸動作可
;転写ﾍｯﾄﾞY軸動作
LDP MR21804              ; 転写Y軸待機位置
ANB MR21805              ; 転写Y軸転写台側
ANB MR21806              ; 転写Y軸固定P側
ANB MR21807              ; 転写Y軸清掃位置
AND @MR515               ; ﾒﾝﾃ_転写Ｙ軸動作可
DW #1 EM1304             ; RB3Target Pos
CON
SET @MR508               ; 転写Y軸動作開始
LDP MR21805              ; 転写Y軸転写台側
ANB MR21804              ; 転写Y軸待機位置
ANB MR21806              ; 転写Y軸固定P側
ANB MR21807              ; 転写Y軸清掃位置
AND @MR515               ; ﾒﾝﾃ_転写Ｙ軸動作可
MPS
AND= #1 DM20010          ; 転写回数
DW #2 EM1304             ; RB3Target Pos
CON
SET @MR508               ; 転写Y軸動作開始
MRD
AND= #2 DM20010          ; 転写回数
DW #3 EM1304             ; RB3Target Pos
CON
SET @MR508               ; 転写Y軸動作開始
MRD
AND= #3 DM20010          ; 転写回数
DW #2 EM1304             ; RB3Target Pos
CON
SET @MR508               ; 転写Y軸動作開始
MPP
AND= #4 DM20010          ; 転写回数
DW #3 EM1304             ; RB3Target Pos
CON
SET @MR508               ; 転写Y軸動作開始
LDP MR21806              ; 転写Y軸固定P側
ANB MR21805              ; 転写Y軸転写台側
ANB MR21804              ; 転写Y軸待機位置
ANB MR21807              ; 転写Y軸清掃位置
AND @MR515               ; ﾒﾝﾃ_転写Ｙ軸動作可
DW #5 EM1304             ; RB3Target Pos
CON
SET @MR508               ; 転写Y軸動作開始
LDP MR21807              ; 転写Y軸清掃位置
ANB MR21805              ; 転写Y軸転写台側
ANB MR21806              ; 転写Y軸固定P側
ANB MR21804              ; 転写Y軸待機位置
AND @MR515               ; ﾒﾝﾃ_転写Ｙ軸動作可
DW #6 EM1304             ; RB3Target Pos
CON
SET @MR508               ; 転写Y軸動作開始
;転写ﾍｯﾄﾞY軸  ﾛﾎﾞｯﾄ移動
STG @MR508               ; 転写Y軸動作開始
SET @MR510               ; 転写Y軸動作中
CON
JMP @MR511
STG @MR511
SET MR22504              ; 転写Y軸移動
CON
JMP @MR512
STG @MR512
AND MR22505              ; 転写Y軸移動完了
RES @MR510               ; 転写Y軸動作中
CON
RES MR22505              ; 転写Y軸移動完了
CON
ENDS
;転写ﾍｯﾄﾞZ軸  動作可ｲﾝﾀｰﾛｯｸ共通
LD MR22404               ; 転写Y軸待機位置あり
OR MR22405               ; 転写Y軸転写台側後あり
OR MR22406               ; 転写Y軸固定P側あり
AND DM11047.1            ; RB6 HEND
AND DM11047.4            ; RB6 SV
ANB DM11023.2            ; RB3 MOVE
ANB DM11047.2            ; RB6 MOVE
ANB @MR602               ; 転写Z軸動作中
MPS
OUT @MR607               ; ﾒﾝﾃ_転写Z軸動作可
MPP
LDB DM11007.2            ; RB1 MOVE
ANB DM11015.2            ; RB2 MOVE
ANL
OUT @MR606               ; ﾒﾝﾃ_転写Z軸動作可
;転写ﾍｯﾄﾞZ軸動作
LDP MR21808              ; 転写Z軸上
ANB MR21809              ; 転写Z軸転写側下降前
ANB MR21810              ; 転写Z軸転写側下降
ANB MR21811              ; 転写Z軸転写側下降後
ANB MR21812              ; 転写Z軸固定P側下降前
ANB MR21813              ; 転写Z軸固定P側下降
ANB MR21814              ; 転写Z軸固定P側下降後
AND @MR607               ; ﾒﾝﾃ_転写Z軸動作可
DW #1 EM1310             ; RB6Target Pos
CON
SET @MR600               ; 転写Z軸動作開始
LDP MR21809              ; 転写Z軸転写側下降前
ANB MR21808              ; 転写Z軸上
ANB MR21810              ; 転写Z軸転写側下降
ANB MR21811              ; 転写Z軸転写側下降後
ANB MR21812              ; 転写Z軸固定P側下降前
ANB MR21813              ; 転写Z軸固定P側下降
ANB MR21814              ; 転写Z軸固定P側下降後
AND @MR607               ; ﾒﾝﾃ_転写Z軸動作可
DW #2 EM1310             ; RB6Target Pos
CON
SET @MR600               ; 転写Z軸動作開始
LDP MR21810              ; 転写Z軸転写側下降
ANB MR21809              ; 転写Z軸転写側下降前
ANB MR21808              ; 転写Z軸上
ANB MR21811              ; 転写Z軸転写側下降後
ANB MR21812              ; 転写Z軸固定P側下降前
ANB MR21813              ; 転写Z軸固定P側下降
ANB MR21814              ; 転写Z軸固定P側下降後
AND @MR607               ; ﾒﾝﾃ_転写Z軸動作可
DW #3 EM1310             ; RB6Target Pos
CON
SET @MR600               ; 転写Z軸動作開始
LDP MR21811              ; 転写Z軸転写側下降後
ANB MR21809              ; 転写Z軸転写側下降前
ANB MR21810              ; 転写Z軸転写側下降
ANB MR21808              ; 転写Z軸上
ANB MR21812              ; 転写Z軸固定P側下降前
ANB MR21813              ; 転写Z軸固定P側下降
ANB MR21814              ; 転写Z軸固定P側下降後
AND @MR607               ; ﾒﾝﾃ_転写Z軸動作可
DW #4 EM1310             ; RB6Target Pos
CON
SET @MR600               ; 転写Z軸動作開始
LDP MR21812              ; 転写Z軸固定P側下降前
ANB MR21809              ; 転写Z軸転写側下降前
ANB MR21810              ; 転写Z軸転写側下降
ANB MR21811              ; 転写Z軸転写側下降後
ANB MR21808              ; 転写Z軸上
ANB MR21813              ; 転写Z軸固定P側下降
ANB MR21814              ; 転写Z軸固定P側下降後
AND @MR606               ; ﾒﾝﾃ_転写Z軸動作可
DW #6 EM1310             ; RB6Target Pos
CON
SET @MR600               ; 転写Z軸動作開始
LDP MR21813              ; 転写Z軸固定P側下降
ANB MR21809              ; 転写Z軸転写側下降前
ANB MR21810              ; 転写Z軸転写側下降
ANB MR21811              ; 転写Z軸転写側下降後
ANB MR21812              ; 転写Z軸固定P側下降前
ANB MR21808              ; 転写Z軸上
ANB MR21814              ; 転写Z軸固定P側下降後
AND @MR606               ; ﾒﾝﾃ_転写Z軸動作可
DW #7 EM1310             ; RB6Target Pos
CON
SET @MR600               ; 転写Z軸動作開始
LDP MR21814              ; 転写Z軸固定P側下降後
ANB MR21809              ; 転写Z軸転写側下降前
ANB MR21810              ; 転写Z軸転写側下降
ANB MR21811              ; 転写Z軸転写側下降後
ANB MR21812              ; 転写Z軸固定P側下降前
ANB MR21813              ; 転写Z軸固定P側下降
ANB MR21808              ; 転写Z軸上
AND @MR606               ; ﾒﾝﾃ_転写Z軸動作可
DW #8 EM1310             ; RB6Target Pos
CON
SET @MR600               ; 転写Z軸動作開始
;転写ﾍｯﾄﾞZ軸  ﾛﾎﾞｯﾄ移動
STG @MR600               ; 転写Z軸動作開始
SET @MR602               ; 転写Z軸動作中
CON
JMP @MR603
STG @MR603
SET MR22506              ; 転写Z軸移動
CON
JMP @MR604
STG @MR604
AND MR22507              ; 転写Z軸移動完了
RES @MR602               ; 転写Z軸動作中
CON
RES MR22507              ; 転写Z軸移動完了
CON
ENDS
;<h1/>Cylinder7  動作
;固定ﾌﾟﾚｰﾄ、ｾｯﾄ治具吸着、破壊
LDP MR21900              ; 固定P 搬送ｽﾃｰｼﾞ吸着ON
ANB MR21901              ; 固定P 搬送ｽﾃｰｼﾞ吸着OFF
ANB MR21902              ; 固定P 搬送ｽﾃｰｼﾞ吸着破壊ON
ANB @MR802               ; 真空破壊動作中
SET MR7100               ; 固定P搬送ｽﾃｰｼﾞ 吸着ON
CON
RES MR7101               ; 固定P搬送ｽﾃｰｼﾞ 吸着OFF
CON
RES MR7102               ; 固定P搬送ｽﾃｰｼﾞ 吸着破壊ON
LDP MR21901              ; 固定P 搬送ｽﾃｰｼﾞ吸着OFF
ANB MR21902              ; 固定P 搬送ｽﾃｰｼﾞ吸着破壊ON
ANB MR21900              ; 固定P 搬送ｽﾃｰｼﾞ吸着ON
ANB @MR802               ; 真空破壊動作中
RES MR7100               ; 固定P搬送ｽﾃｰｼﾞ 吸着ON
CON
SET MR7101               ; 固定P搬送ｽﾃｰｼﾞ 吸着OFF
CON
RES MR7102               ; 固定P搬送ｽﾃｰｼﾞ 吸着破壊ON
LDP MR21902              ; 固定P 搬送ｽﾃｰｼﾞ吸着破壊ON
ANB MR21900              ; 固定P 搬送ｽﾃｰｼﾞ吸着ON
ANB MR21901              ; 固定P 搬送ｽﾃｰｼﾞ吸着OFF
ANB @MR802               ; 真空破壊動作中
SET @MR800               ; 真空破壊動作
STG @MR800               ; 真空破壊動作
SET @MR802               ; 真空破壊動作中
CON
RES MR7100               ; 固定P搬送ｽﾃｰｼﾞ 吸着ON
CON
SET MR7101               ; 固定P搬送ｽﾃｰｼﾞ 吸着OFF
CON
RES MR7102               ; 固定P搬送ｽﾃｰｼﾞ 吸着破壊ON
CON
JMP @MR803
STG @MR803
TMH @20 #5
CON
AND @T20
JMP @MR804
STG @MR804
RES MR7100               ; 固定P搬送ｽﾃｰｼﾞ 吸着ON
CON
SET MR7101               ; 固定P搬送ｽﾃｰｼﾞ 吸着OFF
CON
SET MR7102               ; 固定P搬送ｽﾃｰｼﾞ 吸着破壊ON
CON
JMP @MR805
STG @MR805
MPS
LDB R4509                ; 固定P搬送ｽﾃｰｼﾞ 吸着確認 OUT2
ANB R4508                ; 固定P搬送ｽﾃｰｼﾞ 吸着確認 OUT1
ANL
RES MR7100               ; 固定P搬送ｽﾃｰｼﾞ 吸着ON
CON
SET MR7101               ; 固定P搬送ｽﾃｰｼﾞ 吸着OFF
CON
RES MR7102               ; 固定P搬送ｽﾃｰｼﾞ 吸着破壊ON
CON
JMP @MR806
MPP
TMR @21 #5
CON
AND @T21
RES MR7100               ; 固定P搬送ｽﾃｰｼﾞ 吸着ON
CON
SET MR7101               ; 固定P搬送ｽﾃｰｼﾞ 吸着OFF
CON
RES MR7102               ; 固定P搬送ｽﾃｰｼﾞ 吸着破壊ON
CON
JMP @MR806
STG @MR806
RES @MR802               ; 真空破壊動作中
CON
ENDS
LDP MR21903              ; ｾｯﾄJ 搬送ｽﾃｰｼﾞ吸着ON
ANB MR21904              ; ｾｯﾄJ 搬送ｽﾃｰｼﾞ吸着OFF
ANB MR21905              ; ｾｯﾄJ 搬送ｽﾃｰｼﾞ吸着破壊ON
ANB @MR810               ; 真空破壊動作中
SET MR7103               ; ｾｯﾄ治具搬送ｽﾃｰｼﾞ 吸着ON
CON
RES MR7104               ; ｾｯﾄ治具搬送ｽﾃｰｼﾞ 吸着OFF
CON
RES MR7105               ; ｾｯﾄ治具搬送ｽﾃｰｼﾞ 吸着破壊ON
LDP MR21904              ; ｾｯﾄJ 搬送ｽﾃｰｼﾞ吸着OFF
ANB MR21905              ; ｾｯﾄJ 搬送ｽﾃｰｼﾞ吸着破壊ON
ANB MR21903              ; ｾｯﾄJ 搬送ｽﾃｰｼﾞ吸着ON
ANB @MR810               ; 真空破壊動作中
RES MR7103               ; ｾｯﾄ治具搬送ｽﾃｰｼﾞ 吸着ON
CON
SET MR7104               ; ｾｯﾄ治具搬送ｽﾃｰｼﾞ 吸着OFF
CON
RES MR7105               ; ｾｯﾄ治具搬送ｽﾃｰｼﾞ 吸着破壊ON
LDP MR21905              ; ｾｯﾄJ 搬送ｽﾃｰｼﾞ吸着破壊ON
ANB MR21903              ; ｾｯﾄJ 搬送ｽﾃｰｼﾞ吸着ON
ANB MR21904              ; ｾｯﾄJ 搬送ｽﾃｰｼﾞ吸着OFF
ANB @MR810               ; 真空破壊動作中
SET @MR808               ; 真空破壊動作中
STG @MR808               ; 真空破壊動作中
SET @MR810               ; 真空破壊動作中
CON
RES MR7103               ; ｾｯﾄ治具搬送ｽﾃｰｼﾞ 吸着ON
CON
SET MR7104               ; ｾｯﾄ治具搬送ｽﾃｰｼﾞ 吸着OFF
CON
RES MR7105               ; ｾｯﾄ治具搬送ｽﾃｰｼﾞ 吸着破壊ON
CON
JMP @MR811
STG @MR811
TMH @22 #5
CON
AND @T22
JMP @MR812
STG @MR812
RES MR7103               ; ｾｯﾄ治具搬送ｽﾃｰｼﾞ 吸着ON
CON
SET MR7104               ; ｾｯﾄ治具搬送ｽﾃｰｼﾞ 吸着OFF
CON
SET MR7105               ; ｾｯﾄ治具搬送ｽﾃｰｼﾞ 吸着破壊ON
CON
JMP @MR813
STG @MR813
MPS
LDB R4511                ; ｾｯﾄ治具搬送ｽﾃｰｼﾞ 吸着確認 OUT2
ANB R4510                ; ｾｯﾄ治具搬送ｽﾃｰｼﾞ 吸着確認 OUT1
ANL
RES MR7103               ; ｾｯﾄ治具搬送ｽﾃｰｼﾞ 吸着ON
CON
SET MR7104               ; ｾｯﾄ治具搬送ｽﾃｰｼﾞ 吸着OFF
CON
RES MR7105               ; ｾｯﾄ治具搬送ｽﾃｰｼﾞ 吸着破壊ON
CON
JMP @MR814
MPP
TMR @23 #5
CON
AND @T23
RES MR7103               ; ｾｯﾄ治具搬送ｽﾃｰｼﾞ 吸着ON
CON
SET MR7104               ; ｾｯﾄ治具搬送ｽﾃｰｼﾞ 吸着OFF
CON
RES MR7105               ; ｾｯﾄ治具搬送ｽﾃｰｼﾞ 吸着破壊ON
CON
JMP @MR814
STG @MR814
RES @MR810               ; 真空破壊動作中
CON
ENDS
LDP MR21906              ; 固定P 搬送P&P吸着ON
ANB MR21907              ; 固定P 搬送P&P吸着OFF
ANB MR21908              ; 固定P 搬送P&P吸着破壊ON
ANB @MR902               ; 真空破壊動作中
SET MR7106               ; 固定P搬送P&P 吸着ON
CON
RES MR7107               ; 固定P搬送P&P 吸着OFF
CON
RES MR7108               ; 固定P搬送P&P 吸着破壊ON
LDP MR21907              ; 固定P 搬送P&P吸着OFF
ANB MR21908              ; 固定P 搬送P&P吸着破壊ON
ANB MR21906              ; 固定P 搬送P&P吸着ON
ANB @MR902               ; 真空破壊動作中
RES MR7106               ; 固定P搬送P&P 吸着ON
CON
SET MR7107               ; 固定P搬送P&P 吸着OFF
CON
RES MR7108               ; 固定P搬送P&P 吸着破壊ON
LDP MR21908              ; 固定P 搬送P&P吸着破壊ON
ANB MR21906              ; 固定P 搬送P&P吸着ON
ANB MR21907              ; 固定P 搬送P&P吸着OFF
ANB @MR902               ; 真空破壊動作中
SET @MR900               ; 真空破壊動作中
STG @MR900               ; 真空破壊動作中
SET @MR902               ; 真空破壊動作中
CON
RES MR7106               ; 固定P搬送P&P 吸着ON
CON
SET MR7107               ; 固定P搬送P&P 吸着OFF
CON
RES MR7108               ; 固定P搬送P&P 吸着破壊ON
CON
JMP @MR903
STG @MR903
TMH @24 #5
CON
AND @T24
JMP @MR904
STG @MR904
RES MR7106               ; 固定P搬送P&P 吸着ON
CON
SET MR7107               ; 固定P搬送P&P 吸着OFF
CON
SET MR7108               ; 固定P搬送P&P 吸着破壊ON
CON
JMP @MR905
STG @MR905
MPS
LDB R4513                ; 固定P搬送P&P 吸着確認 OUT2
ANB R4512                ; 固定P搬送P&P 吸着確認 OUT1
ANL
RES MR7106               ; 固定P搬送P&P 吸着ON
CON
SET MR7107               ; 固定P搬送P&P 吸着OFF
CON
RES MR7108               ; 固定P搬送P&P 吸着破壊ON
CON
JMP @MR906
MPP
TMR @25 #5
CON
AND @T25
RES MR7106               ; 固定P搬送P&P 吸着ON
CON
SET MR7107               ; 固定P搬送P&P 吸着OFF
CON
RES MR7108               ; 固定P搬送P&P 吸着破壊ON
CON
JMP @MR906
STG @MR906
RES @MR902               ; 真空破壊動作中
CON
ENDS
LDP MR21909              ; 固定P 載替え吸着ON
ANB MR21910              ; 固定P 載替え吸着OFF
ANB MR21911              ; 固定P 載替え吸着破壊ON
ANB @MR910               ; 真空破壊動作中
SET MR7109               ; 固定P載替え 吸着ON
CON
RES MR7110               ; 固定P載替え 吸着OFF
CON
RES MR7111               ; 固定P載替え 吸着破壊ON
LDP MR21910              ; 固定P 載替え吸着OFF
ANB MR21909              ; 固定P 載替え吸着ON
ANB MR21911              ; 固定P 載替え吸着破壊ON
ANB @MR910               ; 真空破壊動作中
RES MR7109               ; 固定P載替え 吸着ON
CON
SET MR7110               ; 固定P載替え 吸着OFF
CON
RES MR7111               ; 固定P載替え 吸着破壊ON
LDP MR21911              ; 固定P 載替え吸着破壊ON
ANB MR21909              ; 固定P 載替え吸着ON
ANB MR21910              ; 固定P 載替え吸着OFF
ANB @MR910               ; 真空破壊動作中
SET @MR908               ; 真空破壊動作中
STG @MR908               ; 真空破壊動作中
SET @MR910               ; 真空破壊動作中
CON
RES MR7109               ; 固定P載替え 吸着ON
CON
SET MR7110               ; 固定P載替え 吸着OFF
CON
RES MR7111               ; 固定P載替え 吸着破壊ON
CON
JMP @MR911
STG @MR911
TMH @26 #5
CON
AND @T26
JMP @MR912
STG @MR912
RES MR7109               ; 固定P載替え 吸着ON
CON
SET MR7110               ; 固定P載替え 吸着OFF
CON
SET MR7111               ; 固定P載替え 吸着破壊ON
CON
JMP @MR913
STG @MR913
MPS
LDB R4515                ; 固定P載替え 吸着確認 OUT2
ANB R4514                ; 固定P載替え 吸着確認 OUT1
ANL
RES MR7109               ; 固定P載替え 吸着ON
CON
SET MR7110               ; 固定P載替え 吸着OFF
CON
RES MR7111               ; 固定P載替え 吸着破壊ON
CON
JMP @MR914
MPP
TMR @27 #5
CON
AND @T27
RES MR7109               ; 固定P載替え 吸着ON
CON
SET MR7110               ; 固定P載替え 吸着OFF
CON
RES MR7111               ; 固定P載替え 吸着破壊ON
CON
JMP @MR914
STG @MR914
RES @MR910               ; 真空破壊動作中
CON
ENDS
;ｶﾞｲﾄﾞﾋﾟﾝ上下
LDP MR21802              ; ｶﾞｲﾄﾞﾋﾟﾝ上下 下降
ANB MR21803              ; ｶﾞｲﾄﾞﾋﾟﾝ上下 上昇
RES MR7215               ; 位置決めﾋﾟﾝ 上昇
LDP MR21803              ; ｶﾞｲﾄﾞﾋﾟﾝ上下 上昇
ANB MR21802              ; ｶﾞｲﾄﾞﾋﾟﾝ上下 下降
SET MR7215               ; 位置決めﾋﾟﾝ 上昇
;給材X軸(RB1)  動作可ｲﾝﾀｰﾛｯｸ共通
LD= EM1303 #1            ; RB2Now Pos
AND DM11007.4            ; RB1 SV
AND DM11047.12           ; RB6 ZONE1
AND DM11071.12           ; RB9 ZONE1
AND DM11079.12           ; RB10 ZONE1
ANB DM11007.2            ; RB1 MOVE
ANB @MR1710              ; 給材X軸動作中
OUT @MR1715              ; 給材X軸(RB1)動作可
;給材X軸(RB1)動作
LDP MR20900              ; 給材X軸RB RB1 受取り位置
ANB MR20901              ; 給材X軸RB RB1 載替え位置
ANB MR20902              ; 給材X軸RB RB1 転写位置
AND @MR1715              ; 給材X軸(RB1)動作可
DW #1 EM1300             ; RB1Target Pos
CON
SET @MR1708              ; 給材X軸移動開始
LDP MR20901              ; 給材X軸RB RB1 載替え位置
ANB MR20900              ; 給材X軸RB RB1 受取り位置
ANB MR20902              ; 給材X軸RB RB1 転写位置
AND @MR1715              ; 給材X軸(RB1)動作可
DW #3 EM1300             ; RB1Target Pos
CON
SET @MR1708              ; 給材X軸移動開始
LDP MR20902              ; 給材X軸RB RB1 転写位置
ANB MR20901              ; 給材X軸RB RB1 載替え位置
ANB MR20900              ; 給材X軸RB RB1 受取り位置
AND @MR1715              ; 給材X軸(RB1)動作可
DW #2 EM1300             ; RB1Target Pos
CON
SET @MR1708              ; 給材X軸移動開始
;給材X軸(RB1)  ﾛﾎﾞｯﾄ移動
STG @MR1708              ; 給材X軸移動開始
SET @MR1710              ; 給材X軸動作中
CON
JMP @MR1711
STG @MR1711
SET MR22712              ; 給材側搬送RB(RB1)移動要求
CON
JMP @MR1712
STG @MR1712
AND MR22713              ; 給材側搬送RB(RB1)移動完了
RES @MR1710              ; 給材X軸動作中
CON
RES MR22713              ; 給材側搬送RB(RB1)移動完了
CON
ENDS
;除材X軸(RB2)  動作可ｲﾝﾀｰﾛｯｸ共通
LD= EM1301 #1            ; RB1Now Pos
AND DM11015.4            ; RB2 SV
AND DM11047.12           ; RB6 ZONE1
AND DM11071.12           ; RB9 ZONE1
AND DM11079.12           ; RB10 ZONE1
ANB DM11015.2            ; RB2 MOVE
ANB @MR1802              ; 除材X軸動作中
OUT @MR1807              ; 除材X軸(RB2)動作可
;除材X軸(RB2)動作
LDP MR20903              ; 除材X軸RB RB2 載替え位置
ANB MR20904              ; 除材X軸RB RB2 除給材位置
AND @MR1807              ; 除材X軸(RB2)動作可
DW #2 EM1302             ; RB2Target Pos
CON
SET @MR1800              ; 除材X軸移動開始
LDP MR20904              ; 除材X軸RB RB2 除給材位置
ANB MR20903              ; 除材X軸RB RB2 載替え位置
AND @MR1807              ; 除材X軸(RB2)動作可
DW #1 EM1302             ; RB2Target Pos
CON
SET @MR1800              ; 除材X軸移動開始
;除材X軸(RB2)  ﾛﾎﾞｯﾄ移動
STG @MR1800              ; 除材X軸移動開始
SET @MR1802              ; 除材X軸動作中
CON
JMP @MR1803
STG @MR1803
SET MR22510              ; 除材側搬送RB(RB2)移動要求
CON
JMP @MR1804
STG @MR1804
AND MR22511              ; 除材側搬送RB(RB2)移動完了
RES @MR1802              ; 除材X軸動作中
CON
RES MR22511              ; 除材側搬送RB(RB2)移動完了
CON
ENDS
;載替えZ軸(RB9)  動作可ｲﾝﾀｰﾛｯｸ共通
LD= EM1301 #1            ; RB1Now Pos
OR= EM1301 #3            ; RB1Now Pos
LD= EM1303 #1            ; RB2Now Pos
OR= EM1303 #2            ; RB2Now Pos
ANL
AND DM11071.4            ; RB9 SV
AND DM11047.12           ; RB6 ZONE1
AND DM11039.12           ; RB5 ZONE1
ANB DM11007.2            ; RB1 MOVE
ANB DM11015.2            ; RB2 MOVE
ANB DM11071.2            ; RB9 MOVE
AND= EM1301 #3           ; RB1Now Pos
AND= EM1303 #1           ; RB2Now Pos
ANB @MR1810              ; 載せ替えZ軸動作中
OUT @MR1815              ; 載替えZ軸(RB9)動作可
;載替えZ軸(RB9)動作
LDP MR20908              ; 載替えZ軸RB RB9 上昇位置
ANB MR20909              ; 載替えZ軸RB RB9 取出下降直前
ANB MR20910              ; 載替えZ軸RB RB9 取出下降
ANB MR20912              ; 載替えZ軸RB RB9 載替下降直前
ANB MR20913              ; 載替えZ軸RB RB9 載替下降
AND @MR1815              ; 載替えZ軸(RB9)動作可
DW #1 EM1316             ; RB9Target Pos
CON
SET @MR1808              ; 載せ替えZ軸動作開始
LDP MR20909              ; 載替えZ軸RB RB9 取出下降直前
ANB MR20908              ; 載替えZ軸RB RB9 上昇位置
ANB MR20910              ; 載替えZ軸RB RB9 取出下降
ANB MR20912              ; 載替えZ軸RB RB9 載替下降直前
ANB MR20913              ; 載替えZ軸RB RB9 載替下降
AND @MR1815              ; 載替えZ軸(RB9)動作可
DW #2 EM1316             ; RB9Target Pos
CON
SET @MR1808              ; 載せ替えZ軸動作開始
LDP MR20910              ; 載替えZ軸RB RB9 取出下降
ANB MR20909              ; 載替えZ軸RB RB9 取出下降直前
ANB MR20908              ; 載替えZ軸RB RB9 上昇位置
ANB MR20912              ; 載替えZ軸RB RB9 載替下降直前
ANB MR20913              ; 載替えZ軸RB RB9 載替下降
AND @MR1815              ; 載替えZ軸(RB9)動作可
DW #3 EM1316             ; RB9Target Pos
CON
SET @MR1808              ; 載せ替えZ軸動作開始
LDP MR20912              ; 載替えZ軸RB RB9 載替下降直前
ANB MR20909              ; 載替えZ軸RB RB9 取出下降直前
ANB MR20910              ; 載替えZ軸RB RB9 取出下降
ANB MR20908              ; 載替えZ軸RB RB9 上昇位置
ANB MR20913              ; 載替えZ軸RB RB9 載替下降
AND @MR1815              ; 載替えZ軸(RB9)動作可
DW #6 EM1316             ; RB9Target Pos
CON
SET @MR1808              ; 載せ替えZ軸動作開始
LDP MR20913              ; 載替えZ軸RB RB9 載替下降
ANB MR20909              ; 載替えZ軸RB RB9 取出下降直前
ANB MR20910              ; 載替えZ軸RB RB9 取出下降
ANB MR20908              ; 載替えZ軸RB RB9 上昇位置
ANB MR20912              ; 載替えZ軸RB RB9 載替下降直前
AND @MR1815              ; 載替えZ軸(RB9)動作可
DW #7 EM1316             ; RB9Target Pos
CON
SET @MR1808              ; 載せ替えZ軸動作開始
;載替えZ軸(RB9)  ﾛﾎﾞｯﾄ移動
STG @MR1808              ; 載せ替えZ軸動作開始
SET @MR1810              ; 載せ替えZ軸動作中
CON
JMP @MR1811
STG @MR1811
SET MR22512              ; 載替え Z軸 動作要求
CON
JMP @MR1812
STG @MR1812
AND MR22513              ; 載替え Z軸 動作完了
RES @MR1810              ; 載せ替えZ軸動作中
CON
RES MR22513              ; 載替え Z軸 動作完了
CON
ENDS
;ﾄﾚｲ搬送Y軸(RB4) 動作可ｲﾝﾀｰﾛｯｸ共通
LD= EM1319 #1            ; RB10Now Pos
AND DM11031.4            ; RB4 SV
AND DM11079.12           ; RB10 ZONE1
ANB DM11031.2            ; RB4 MOVE
ANB @MR1110              ; ﾄﾚｲ搬送Y軸動作中
OUT @MR1115              ; ﾄﾚｲ搬送Y軸(RB4)動作可
;ﾄﾚｲ搬送Y軸(RB4)動作
LDP MR21000              ; ﾄﾚｲ搬送Y軸RB RB4 除給材位置
ANB MR21001              ; ﾄﾚｲ搬送Y軸RB RB4 1列目
ANB MR21002              ; ﾄﾚｲ搬送Y軸RB RB4 2列目
ANB MR21003              ; ﾄﾚｲ搬送Y軸RB RB4 3列目
ANB MR21004              ; ﾄﾚｲ搬送Y軸RB RB4 4列目
ANB MR21007              ; ﾄﾚｲ搬送Y軸RB RB4 ﾀﾞﾐｰﾄﾚｲ
AND @MR1115              ; ﾄﾚｲ搬送Y軸(RB4)動作可
DW #1 EM1306             ; RB4Target Pos
CON
SET @MR1108              ; ﾄﾚｲ搬送Y軸動作開始
LDP MR21001              ; ﾄﾚｲ搬送Y軸RB RB4 1列目
ANB MR21000              ; ﾄﾚｲ搬送Y軸RB RB4 除給材位置
ANB MR21002              ; ﾄﾚｲ搬送Y軸RB RB4 2列目
ANB MR21003              ; ﾄﾚｲ搬送Y軸RB RB4 3列目
ANB MR21004              ; ﾄﾚｲ搬送Y軸RB RB4 4列目
ANB MR21007              ; ﾄﾚｲ搬送Y軸RB RB4 ﾀﾞﾐｰﾄﾚｲ
AND @MR1115              ; ﾄﾚｲ搬送Y軸(RB4)動作可
DW #5 EM1306             ; RB4Target Pos
CON
SET @MR1108              ; ﾄﾚｲ搬送Y軸動作開始
LDP MR21002              ; ﾄﾚｲ搬送Y軸RB RB4 2列目
ANB MR21001              ; ﾄﾚｲ搬送Y軸RB RB4 1列目
ANB MR21000              ; ﾄﾚｲ搬送Y軸RB RB4 除給材位置
ANB MR21003              ; ﾄﾚｲ搬送Y軸RB RB4 3列目
ANB MR21004              ; ﾄﾚｲ搬送Y軸RB RB4 4列目
ANB MR21007              ; ﾄﾚｲ搬送Y軸RB RB4 ﾀﾞﾐｰﾄﾚｲ
AND @MR1115              ; ﾄﾚｲ搬送Y軸(RB4)動作可
DW #6 EM1306             ; RB4Target Pos
CON
SET @MR1108              ; ﾄﾚｲ搬送Y軸動作開始
LDP MR21003              ; ﾄﾚｲ搬送Y軸RB RB4 3列目
ANB MR21001              ; ﾄﾚｲ搬送Y軸RB RB4 1列目
ANB MR21002              ; ﾄﾚｲ搬送Y軸RB RB4 2列目
ANB MR21000              ; ﾄﾚｲ搬送Y軸RB RB4 除給材位置
ANB MR21004              ; ﾄﾚｲ搬送Y軸RB RB4 4列目
ANB MR21007              ; ﾄﾚｲ搬送Y軸RB RB4 ﾀﾞﾐｰﾄﾚｲ
AND @MR1115              ; ﾄﾚｲ搬送Y軸(RB4)動作可
DW #7 EM1306             ; RB4Target Pos
CON
SET @MR1108              ; ﾄﾚｲ搬送Y軸動作開始
LDP MR21004              ; ﾄﾚｲ搬送Y軸RB RB4 4列目
ANB MR21001              ; ﾄﾚｲ搬送Y軸RB RB4 1列目
ANB MR21002              ; ﾄﾚｲ搬送Y軸RB RB4 2列目
ANB MR21003              ; ﾄﾚｲ搬送Y軸RB RB4 3列目
ANB MR21000              ; ﾄﾚｲ搬送Y軸RB RB4 除給材位置
ANB MR21007              ; ﾄﾚｲ搬送Y軸RB RB4 ﾀﾞﾐｰﾄﾚｲ
AND @MR1115              ; ﾄﾚｲ搬送Y軸(RB4)動作可
DW #8 EM1306             ; RB4Target Pos
CON
SET @MR1108              ; ﾄﾚｲ搬送Y軸動作開始
LDP MR21007              ; ﾄﾚｲ搬送Y軸RB RB4 ﾀﾞﾐｰﾄﾚｲ
ANB MR21001              ; ﾄﾚｲ搬送Y軸RB RB4 1列目
ANB MR21002              ; ﾄﾚｲ搬送Y軸RB RB4 2列目
ANB MR21003              ; ﾄﾚｲ搬送Y軸RB RB4 3列目
ANB MR21004              ; ﾄﾚｲ搬送Y軸RB RB4 4列目
ANB MR21000              ; ﾄﾚｲ搬送Y軸RB RB4 除給材位置
AND @MR1115              ; ﾄﾚｲ搬送Y軸(RB4)動作可
DW #11 EM1306            ; RB4Target Pos
CON
SET @MR1108              ; ﾄﾚｲ搬送Y軸動作開始
;ﾄﾚｲ搬送Y軸(RB4)  ﾛﾎﾞｯﾄ移動
STG @MR1108              ; ﾄﾚｲ搬送Y軸動作開始
SET @MR1110              ; ﾄﾚｲ搬送Y軸動作中
CON
JMP @MR1111
STG @MR1111
SET MR22514              ; ﾄﾚｲ搬送RB(RB4)移動要求
CON
JMP @MR1112
STG @MR1112
AND MR22515              ; ﾄﾚｲ搬送RB(RB4)移動完了
RES @MR1110              ; ﾄﾚｲ搬送Y軸動作中
CON
RES MR22515              ; ﾄﾚｲ搬送RB(RB4)移動完了
CON
ENDS
;固定ﾌﾟﾚｰﾄ搬送P&P X軸(RB5) 動作可ｲﾝﾀｰﾛｯｸ共通
LD= EM1301 #1            ; RB1Now Pos
AND= EM1319 #1           ; RB10Now Pos
AND DM11039.1            ; RB5 HEND
AND DM11039.4            ; RB5 SV
AND DM11079.12           ; RB10 ZONE1
ANB DM11039.2            ; RB5 MOVE
ANB @MR1310              ; 固定ﾌﾟﾚｰﾄ搬送X軸動作中
OUT @MR1315              ; 固定ﾌﾟﾚｰﾄ搬送P&P X軸(RB5)動作可
;固定ﾌﾟﾚｰﾄ搬送P&P X軸(RB5)動作
LDP MR21008              ; 搬送P&P X軸 RB5 受渡し位置
ANB MR21009              ; 搬送P&P X軸 RB5 1段目
ANB MR21010              ; 搬送P&P X軸 RB5 2段目
ANB MR21011              ; 搬送P&P X軸 RB5 3段目
ANB MR21015              ; 搬送P&P X軸 RB5 ﾀﾞﾐｰﾄﾚｲ
AND @MR1315              ; 固定ﾌﾟﾚｰﾄ搬送P&P X軸(RB5)動作可
DW #3 EM1308             ; RB5Target Pos
CON
SET @MR1308              ; 固定ﾌﾟﾚｰﾄ搬送X軸移動開始
LDP MR21009              ; 搬送P&P X軸 RB5 1段目
ANB MR21008              ; 搬送P&P X軸 RB5 受渡し位置
ANB MR21010              ; 搬送P&P X軸 RB5 2段目
ANB MR21011              ; 搬送P&P X軸 RB5 3段目
ANB MR21015              ; 搬送P&P X軸 RB5 ﾀﾞﾐｰﾄﾚｲ
AND @MR1315              ; 固定ﾌﾟﾚｰﾄ搬送P&P X軸(RB5)動作可
DW #5 EM1308             ; RB5Target Pos
CON
SET @MR1308              ; 固定ﾌﾟﾚｰﾄ搬送X軸移動開始
LDP MR21010              ; 搬送P&P X軸 RB5 2段目
ANB MR21008              ; 搬送P&P X軸 RB5 受渡し位置
ANB MR21009              ; 搬送P&P X軸 RB5 1段目
ANB MR21011              ; 搬送P&P X軸 RB5 3段目
ANB MR21015              ; 搬送P&P X軸 RB5 ﾀﾞﾐｰﾄﾚｲ
AND @MR1315              ; 固定ﾌﾟﾚｰﾄ搬送P&P X軸(RB5)動作可
DW #6 EM1308             ; RB5Target Pos
CON
SET @MR1308              ; 固定ﾌﾟﾚｰﾄ搬送X軸移動開始
LDP MR21011              ; 搬送P&P X軸 RB5 3段目
ANB MR21008              ; 搬送P&P X軸 RB5 受渡し位置
ANB MR21009              ; 搬送P&P X軸 RB5 1段目
ANB MR21010              ; 搬送P&P X軸 RB5 2段目
ANB MR21015              ; 搬送P&P X軸 RB5 ﾀﾞﾐｰﾄﾚｲ
AND @MR1315              ; 固定ﾌﾟﾚｰﾄ搬送P&P X軸(RB5)動作可
DW #7 EM1308             ; RB5Target Pos
CON
SET @MR1308              ; 固定ﾌﾟﾚｰﾄ搬送X軸移動開始
LDP MR21015              ; 搬送P&P X軸 RB5 ﾀﾞﾐｰﾄﾚｲ
ANB MR21008              ; 搬送P&P X軸 RB5 受渡し位置
ANB MR21009              ; 搬送P&P X軸 RB5 1段目
ANB MR21010              ; 搬送P&P X軸 RB5 2段目
ANB MR21011              ; 搬送P&P X軸 RB5 3段目
AND @MR1315              ; 固定ﾌﾟﾚｰﾄ搬送P&P X軸(RB5)動作可
DW #11 EM1308            ; RB5Target Pos
CON
SET @MR1308              ; 固定ﾌﾟﾚｰﾄ搬送X軸移動開始
;固定ﾌﾟﾚｰﾄ搬送P&P X軸(RB5)  ﾛﾎﾞｯﾄ移動
STG @MR1308              ; 固定ﾌﾟﾚｰﾄ搬送X軸移動開始
SET @MR1310              ; 固定ﾌﾟﾚｰﾄ搬送X軸動作中
CON
JMP @MR1311
STG @MR1311
SET MR22600              ; 固定P搬送P&P X軸動作要求
CON
JMP @MR1312
STG @MR1312
AND MR22601              ; 固定P搬送P&P X軸 動作完了
RES @MR1310              ; 固定ﾌﾟﾚｰﾄ搬送X軸動作中
CON
RES MR22601              ; 固定P搬送P&P X軸 動作完了
CON
ENDS
;固定ﾌﾟﾚｰﾄ搬送P&P Z軸(RB10) 動作可ｲﾝﾀｰﾛｯｸ共通
LD= EM1301 #1            ; RB1Now Pos
AND DM11079.4            ; RB10 SV
ANB DM11079.2            ; RB10 MOVE
ANB @MR1210              ; 固定ﾌﾟﾚｰﾄ搬送Z軸動作中
OUT @MR1215              ; 固定ﾌﾟﾚｰﾄ搬送P&P Z軸(RB10)動作可
;固定ﾌﾟﾚｰﾄ搬送P&P Z軸(RB10)動作
LDP MR21100              ; 搬送P&P Z軸RB RB10 上昇位置
ANB MR21101              ; 搬送P&P Z軸RB RB10 取出下降直前
ANB MR21102              ; 搬送P&P Z軸RB RB10 取出下降
ANB MR21103              ; 搬送P&P Z軸RB RB10 取出下降直後
ANB MR21104              ; 搬送P&P Z軸RB RB10 載替下降直前
ANB MR21105              ; 搬送P&P Z軸RB RB10 載替下降
ANB MR21106              ; 搬送P&P Z軸RB RB10 載替下降直後
AND @MR1215              ; 固定ﾌﾟﾚｰﾄ搬送P&P Z軸(RB10)動作可
DW #1 EM1318             ; RB10Target Pos
CON
SET @MR1208              ; 固定ﾌﾟﾚｰﾄ搬送Z軸移動開始
LDP MR21101              ; 搬送P&P Z軸RB RB10 取出下降直前
ANB MR21100              ; 搬送P&P Z軸RB RB10 上昇位置
ANB MR21102              ; 搬送P&P Z軸RB RB10 取出下降
ANB MR21103              ; 搬送P&P Z軸RB RB10 取出下降直後
ANB MR21104              ; 搬送P&P Z軸RB RB10 載替下降直前
ANB MR21105              ; 搬送P&P Z軸RB RB10 載替下降
ANB MR21106              ; 搬送P&P Z軸RB RB10 載替下降直後
AND @MR1215              ; 固定ﾌﾟﾚｰﾄ搬送P&P Z軸(RB10)動作可
DW #2 EM1318             ; RB10Target Pos
CON
SET @MR1208              ; 固定ﾌﾟﾚｰﾄ搬送Z軸移動開始
LDP MR21102              ; 搬送P&P Z軸RB RB10 取出下降
ANB MR21101              ; 搬送P&P Z軸RB RB10 取出下降直前
ANB MR21100              ; 搬送P&P Z軸RB RB10 上昇位置
ANB MR21103              ; 搬送P&P Z軸RB RB10 取出下降直後
ANB MR21104              ; 搬送P&P Z軸RB RB10 載替下降直前
ANB MR21105              ; 搬送P&P Z軸RB RB10 載替下降
ANB MR21106              ; 搬送P&P Z軸RB RB10 載替下降直後
AND @MR1215              ; 固定ﾌﾟﾚｰﾄ搬送P&P Z軸(RB10)動作可
DW #3 EM1318             ; RB10Target Pos
CON
SET @MR1208              ; 固定ﾌﾟﾚｰﾄ搬送Z軸移動開始
LDP MR21103              ; 搬送P&P Z軸RB RB10 取出下降直後
ANB MR21101              ; 搬送P&P Z軸RB RB10 取出下降直前
ANB MR21102              ; 搬送P&P Z軸RB RB10 取出下降
ANB MR21100              ; 搬送P&P Z軸RB RB10 上昇位置
ANB MR21104              ; 搬送P&P Z軸RB RB10 載替下降直前
ANB MR21105              ; 搬送P&P Z軸RB RB10 載替下降
ANB MR21106              ; 搬送P&P Z軸RB RB10 載替下降直後
AND @MR1215              ; 固定ﾌﾟﾚｰﾄ搬送P&P Z軸(RB10)動作可
DW #4 EM1318             ; RB10Target Pos
CON
SET @MR1208              ; 固定ﾌﾟﾚｰﾄ搬送Z軸移動開始
LDP MR21104              ; 搬送P&P Z軸RB RB10 載替下降直前
ANB MR21101              ; 搬送P&P Z軸RB RB10 取出下降直前
ANB MR21102              ; 搬送P&P Z軸RB RB10 取出下降
ANB MR21103              ; 搬送P&P Z軸RB RB10 取出下降直後
ANB MR21100              ; 搬送P&P Z軸RB RB10 上昇位置
ANB MR21105              ; 搬送P&P Z軸RB RB10 載替下降
ANB MR21106              ; 搬送P&P Z軸RB RB10 載替下降直後
AND @MR1215              ; 固定ﾌﾟﾚｰﾄ搬送P&P Z軸(RB10)動作可
DW #6 EM1318             ; RB10Target Pos
CON
SET @MR1208              ; 固定ﾌﾟﾚｰﾄ搬送Z軸移動開始
LDP MR21105              ; 搬送P&P Z軸RB RB10 載替下降
ANB MR21101              ; 搬送P&P Z軸RB RB10 取出下降直前
ANB MR21102              ; 搬送P&P Z軸RB RB10 取出下降
ANB MR21103              ; 搬送P&P Z軸RB RB10 取出下降直後
ANB MR21104              ; 搬送P&P Z軸RB RB10 載替下降直前
ANB MR21100              ; 搬送P&P Z軸RB RB10 上昇位置
ANB MR21106              ; 搬送P&P Z軸RB RB10 載替下降直後
AND @MR1215              ; 固定ﾌﾟﾚｰﾄ搬送P&P Z軸(RB10)動作可
DW #7 EM1318             ; RB10Target Pos
CON
SET @MR1208              ; 固定ﾌﾟﾚｰﾄ搬送Z軸移動開始
LDP MR21106              ; 搬送P&P Z軸RB RB10 載替下降直後
ANB MR21101              ; 搬送P&P Z軸RB RB10 取出下降直前
ANB MR21102              ; 搬送P&P Z軸RB RB10 取出下降
ANB MR21103              ; 搬送P&P Z軸RB RB10 取出下降直後
ANB MR21104              ; 搬送P&P Z軸RB RB10 載替下降直前
ANB MR21105              ; 搬送P&P Z軸RB RB10 載替下降
ANB MR21100              ; 搬送P&P Z軸RB RB10 上昇位置
AND @MR1215              ; 固定ﾌﾟﾚｰﾄ搬送P&P Z軸(RB10)動作可
DW #8 EM1318             ; RB10Target Pos
CON
SET @MR1208              ; 固定ﾌﾟﾚｰﾄ搬送Z軸移動開始
;固定ﾌﾟﾚｰﾄ搬送P&P Z軸(RB10)  ﾛﾎﾞｯﾄ移動
STG @MR1208              ; 固定ﾌﾟﾚｰﾄ搬送Z軸移動開始
SET @MR1210              ; 固定ﾌﾟﾚｰﾄ搬送Z軸動作中
CON
JMP @MR1211
STG @MR1211
SET MR22602              ; 固定P搬送P&P Z軸 動作要求
CON
JMP @MR1212
STG @MR1212
AND MR22603              ; 固定P搬送P&P Z軸 動作完了
RES @MR1210              ; 固定ﾌﾟﾚｰﾄ搬送Z軸動作中
CON
RES MR22603              ; 固定P搬送P&P Z軸 動作完了
CON
ENDS
;<h1/>Cylinder8  動作
;画像検査
;画像検査位置移動 動作可ｲﾝﾀｰﾛｯｸ共通
LD= EM1303 #1            ; RB2Now Pos
AND DM11007.4            ; RB1 SV
AND DM11063.4            ; RB8 SV
AND DM11071.12           ; RB9 ZONE1
AND DM11079.12           ; RB10 ZONE1
ANB DM11063.2            ; RB8 MOVE
ANB DM11007.2            ; RB1 MOVE
ANB @MR702               ; 画像検査RB動作中
OUT @MR706               ; RB動作可
;画像検査位置移動
LDP MR20700              ; 画像検査1段目左移動
ANB MR20701              ; 画像検査2段目左移動
ANB MR20702              ; 画像検査3段目左移動
ANB MR20703              ; 画像検査4段目左移動
ANB MR20704              ; 画像検査5段目左移動
ANB MR20705              ; 画像検査6段目左移動
ANB MR20706              ; 画像検査1段目右移動
ANB MR20707              ; 画像検査2段目右移動
ANB MR20708              ; 画像検査3段目右移動
ANB MR20709              ; 画像検査4段目右移動
ANB MR20710              ; 画像検査5段目右移動
ANB MR20711              ; 画像検査6段目右移動
AND @MR706               ; RB動作可
DW #1 DM20030            ; 画像検査位置
CON
DW #11 EM1300            ; RB1Target Pos
CON
DW #11 EM1314            ; RB8Target Pos
CON
SET @MR700               ; 画像検査RB動作開始
LDP MR20701              ; 画像検査2段目左移動
ANB MR20700              ; 画像検査1段目左移動
ANB MR20702              ; 画像検査3段目左移動
ANB MR20703              ; 画像検査4段目左移動
ANB MR20704              ; 画像検査5段目左移動
ANB MR20705              ; 画像検査6段目左移動
ANB MR20706              ; 画像検査1段目右移動
ANB MR20707              ; 画像検査2段目右移動
ANB MR20708              ; 画像検査3段目右移動
ANB MR20709              ; 画像検査4段目右移動
ANB MR20710              ; 画像検査5段目右移動
ANB MR20711              ; 画像検査6段目右移動
AND @MR706               ; RB動作可
DW #3 DM20030            ; 画像検査位置
CON
DW #13 EM1300            ; RB1Target Pos
CON
DW #13 EM1314            ; RB8Target Pos
CON
SET @MR700               ; 画像検査RB動作開始
LDP MR20702              ; 画像検査3段目左移動
ANB MR20701              ; 画像検査2段目左移動
ANB MR20700              ; 画像検査1段目左移動
ANB MR20703              ; 画像検査4段目左移動
ANB MR20704              ; 画像検査5段目左移動
ANB MR20705              ; 画像検査6段目左移動
ANB MR20706              ; 画像検査1段目右移動
ANB MR20707              ; 画像検査2段目右移動
ANB MR20708              ; 画像検査3段目右移動
ANB MR20709              ; 画像検査4段目右移動
ANB MR20710              ; 画像検査5段目右移動
ANB MR20711              ; 画像検査6段目右移動
AND @MR706               ; RB動作可
DW #5 DM20030            ; 画像検査位置
CON
DW #15 EM1300            ; RB1Target Pos
CON
DW #15 EM1314            ; RB8Target Pos
CON
SET @MR700               ; 画像検査RB動作開始
LDP MR20703              ; 画像検査4段目左移動
ANB MR20701              ; 画像検査2段目左移動
ANB MR20702              ; 画像検査3段目左移動
ANB MR20700              ; 画像検査1段目左移動
ANB MR20704              ; 画像検査5段目左移動
ANB MR20705              ; 画像検査6段目左移動
ANB MR20706              ; 画像検査1段目右移動
ANB MR20707              ; 画像検査2段目右移動
ANB MR20708              ; 画像検査3段目右移動
ANB MR20709              ; 画像検査4段目右移動
ANB MR20710              ; 画像検査5段目右移動
ANB MR20711              ; 画像検査6段目右移動
AND @MR706               ; RB動作可
DW #7 DM20030            ; 画像検査位置
CON
DW #17 EM1300            ; RB1Target Pos
CON
DW #17 EM1314            ; RB8Target Pos
CON
SET @MR700               ; 画像検査RB動作開始
LDP MR20704              ; 画像検査5段目左移動
ANB MR20701              ; 画像検査2段目左移動
ANB MR20702              ; 画像検査3段目左移動
ANB MR20703              ; 画像検査4段目左移動
ANB MR20700              ; 画像検査1段目左移動
ANB MR20705              ; 画像検査6段目左移動
ANB MR20706              ; 画像検査1段目右移動
ANB MR20707              ; 画像検査2段目右移動
ANB MR20708              ; 画像検査3段目右移動
ANB MR20709              ; 画像検査4段目右移動
ANB MR20710              ; 画像検査5段目右移動
ANB MR20711              ; 画像検査6段目右移動
AND @MR706               ; RB動作可
DW #9 DM20030            ; 画像検査位置
CON
DW #19 EM1300            ; RB1Target Pos
CON
DW #19 EM1314            ; RB8Target Pos
CON
SET @MR700               ; 画像検査RB動作開始
LDP MR20705              ; 画像検査6段目左移動
ANB MR20701              ; 画像検査2段目左移動
ANB MR20702              ; 画像検査3段目左移動
ANB MR20703              ; 画像検査4段目左移動
ANB MR20704              ; 画像検査5段目左移動
ANB MR20700              ; 画像検査1段目左移動
ANB MR20706              ; 画像検査1段目右移動
ANB MR20707              ; 画像検査2段目右移動
ANB MR20708              ; 画像検査3段目右移動
ANB MR20709              ; 画像検査4段目右移動
ANB MR20710              ; 画像検査5段目右移動
ANB MR20711              ; 画像検査6段目右移動
AND @MR706               ; RB動作可
DW #11 DM20030           ; 画像検査位置
CON
DW #21 EM1300            ; RB1Target Pos
CON
DW #21 EM1314            ; RB8Target Pos
CON
SET @MR700               ; 画像検査RB動作開始
LDP MR20706              ; 画像検査1段目右移動
ANB MR20701              ; 画像検査2段目左移動
ANB MR20702              ; 画像検査3段目左移動
ANB MR20703              ; 画像検査4段目左移動
ANB MR20704              ; 画像検査5段目左移動
ANB MR20705              ; 画像検査6段目左移動
ANB MR20700              ; 画像検査1段目左移動
ANB MR20707              ; 画像検査2段目右移動
ANB MR20708              ; 画像検査3段目右移動
ANB MR20709              ; 画像検査4段目右移動
ANB MR20710              ; 画像検査5段目右移動
ANB MR20711              ; 画像検査6段目右移動
AND @MR706               ; RB動作可
DW #2 DM20030            ; 画像検査位置
CON
DW #12 EM1300            ; RB1Target Pos
CON
DW #12 EM1314            ; RB8Target Pos
CON
SET @MR700               ; 画像検査RB動作開始
LDP MR20707              ; 画像検査2段目右移動
ANB MR20701              ; 画像検査2段目左移動
ANB MR20702              ; 画像検査3段目左移動
ANB MR20703              ; 画像検査4段目左移動
ANB MR20704              ; 画像検査5段目左移動
ANB MR20705              ; 画像検査6段目左移動
ANB MR20706              ; 画像検査1段目右移動
ANB MR20700              ; 画像検査1段目左移動
ANB MR20708              ; 画像検査3段目右移動
ANB MR20709              ; 画像検査4段目右移動
ANB MR20710              ; 画像検査5段目右移動
ANB MR20711              ; 画像検査6段目右移動
AND @MR706               ; RB動作可
DW #4 DM20030            ; 画像検査位置
CON
DW #14 EM1300            ; RB1Target Pos
CON
DW #14 EM1314            ; RB8Target Pos
CON
SET @MR700               ; 画像検査RB動作開始
LDP MR20708              ; 画像検査3段目右移動
ANB MR20701              ; 画像検査2段目左移動
ANB MR20702              ; 画像検査3段目左移動
ANB MR20703              ; 画像検査4段目左移動
ANB MR20704              ; 画像検査5段目左移動
ANB MR20705              ; 画像検査6段目左移動
ANB MR20706              ; 画像検査1段目右移動
ANB MR20707              ; 画像検査2段目右移動
ANB MR20700              ; 画像検査1段目左移動
ANB MR20709              ; 画像検査4段目右移動
ANB MR20710              ; 画像検査5段目右移動
ANB MR20711              ; 画像検査6段目右移動
AND @MR706               ; RB動作可
DW #6 DM20030            ; 画像検査位置
CON
DW #16 EM1300            ; RB1Target Pos
CON
DW #16 EM1314            ; RB8Target Pos
CON
SET @MR700               ; 画像検査RB動作開始
LDP MR20709              ; 画像検査4段目右移動
ANB MR20701              ; 画像検査2段目左移動
ANB MR20702              ; 画像検査3段目左移動
ANB MR20703              ; 画像検査4段目左移動
ANB MR20704              ; 画像検査5段目左移動
ANB MR20705              ; 画像検査6段目左移動
ANB MR20706              ; 画像検査1段目右移動
ANB MR20707              ; 画像検査2段目右移動
ANB MR20708              ; 画像検査3段目右移動
ANB MR20700              ; 画像検査1段目左移動
ANB MR20710              ; 画像検査5段目右移動
ANB MR20711              ; 画像検査6段目右移動
AND @MR706               ; RB動作可
DW #8 DM20030            ; 画像検査位置
CON
DW #18 EM1300            ; RB1Target Pos
CON
DW #18 EM1314            ; RB8Target Pos
CON
SET @MR700               ; 画像検査RB動作開始
LDP MR20710              ; 画像検査5段目右移動
ANB MR20701              ; 画像検査2段目左移動
ANB MR20702              ; 画像検査3段目左移動
ANB MR20703              ; 画像検査4段目左移動
ANB MR20704              ; 画像検査5段目左移動
ANB MR20705              ; 画像検査6段目左移動
ANB MR20706              ; 画像検査1段目右移動
ANB MR20707              ; 画像検査2段目右移動
ANB MR20708              ; 画像検査3段目右移動
ANB MR20709              ; 画像検査4段目右移動
ANB MR20700              ; 画像検査1段目左移動
ANB MR20711              ; 画像検査6段目右移動
AND @MR706               ; RB動作可
DW #10 DM20030           ; 画像検査位置
CON
DW #20 EM1300            ; RB1Target Pos
CON
DW #20 EM1314            ; RB8Target Pos
CON
SET @MR700               ; 画像検査RB動作開始
LDP MR20711              ; 画像検査6段目右移動
ANB MR20701              ; 画像検査2段目左移動
ANB MR20702              ; 画像検査3段目左移動
ANB MR20703              ; 画像検査4段目左移動
ANB MR20704              ; 画像検査5段目左移動
ANB MR20705              ; 画像検査6段目左移動
ANB MR20706              ; 画像検査1段目右移動
ANB MR20707              ; 画像検査2段目右移動
ANB MR20708              ; 画像検査3段目右移動
ANB MR20709              ; 画像検査4段目右移動
ANB MR20710              ; 画像検査5段目右移動
ANB MR20700              ; 画像検査1段目左移動
AND @MR706               ; RB動作可
DW #12 DM20030           ; 画像検査位置
CON
DW #22 EM1300            ; RB1Target Pos
CON
DW #22 EM1314            ; RB8Target Pos
CON
SET @MR700               ; 画像検査RB動作開始
;画像検査  ﾛﾎﾞｯﾄ移動
STG @MR700               ; 画像検査RB動作開始
SET @MR702               ; 画像検査RB動作中
CON
JMP @MR703
STG @MR703
SET MR22712              ; 給材側搬送RB(RB1)移動要求
CON
SET MR22714              ; 画像検査　RB8移動
CON
JMP @MR704
STG @MR704
AND MR22713              ; 給材側搬送RB(RB1)移動完了
AND MR22715              ; 画像検査　RB8移動完了
RES @MR702               ; 画像検査RB動作中
CON
RES MR22713              ; 給材側搬送RB(RB1)移動完了
CON
RES MR22715              ; 画像検査　RB8移動完了
CON
ENDS
;画像検査
LDP MR20712              ; 画像検査開始
AND @MR706               ; RB動作可
AND R1200                ; 画像ｺﾝﾄﾛｰﾗ OUT19 Ready
ANB R1201                ; 画像ｺﾝﾄﾛｰﾗ OUT20 Busy
ANB R1202                ; 画像ｺﾝﾄﾛｰﾗ OUT21 Error
ANB @MR610               ; 画像調整ﾓｰﾄﾞ動作中
SET @MR708               ; 画像検査開始
STG @MR708               ; 画像検査開始
ZRES MR22800 MR22915
CON
SET @MR710               ; 画像検査中
CON
JMP @MR711
STG @MR711
SET MR22610              ; 画像検査開始
CON
JMP @MR712
STG @MR712
AND MR22611              ; 画像検査完了
MPS
AND MR22700              ; 画像検査1段目左あり
MPS
ANB R30015               ; 画像NG
SET MR22800
CON
RES MR22801
CON
RES @MR710               ; 画像検査中
CON
RES MR22611              ; 画像検査完了
CON
RES R30015               ; 画像NG
CON
ENDS
MPP
AND R30015               ; 画像NG
SET MR22801
CON
RES MR22800
CON
RES @MR710               ; 画像検査中
CON
RES MR22611              ; 画像検査完了
CON
RES R30015               ; 画像NG
CON
ENDS
MRD
AND MR22701              ; 画像検査2段目左あり
MPS
ANB R30015               ; 画像NG
SET MR22802
CON
RES MR22803
CON
RES @MR710               ; 画像検査中
CON
RES MR22611              ; 画像検査完了
CON
RES R30015               ; 画像NG
CON
ENDS
MPP
AND R30015               ; 画像NG
SET MR22803
CON
RES MR22802
CON
RES @MR710               ; 画像検査中
CON
RES MR22611              ; 画像検査完了
CON
RES R30015               ; 画像NG
CON
ENDS
MRD
AND MR22702              ; 画像検査3段目左あり
MPS
ANB R30015               ; 画像NG
SET MR22804
CON
RES MR22805
CON
RES @MR710               ; 画像検査中
CON
RES MR22611              ; 画像検査完了
CON
RES R30015               ; 画像NG
CON
ENDS
MPP
AND R30015               ; 画像NG
SET MR22805
CON
RES MR22804
CON
RES @MR710               ; 画像検査中
CON
RES MR22611              ; 画像検査完了
CON
RES R30015               ; 画像NG
CON
ENDS
MRD
AND MR22703              ; 画像検査4段目左あり
MPS
ANB R30015               ; 画像NG
SET MR22806
CON
RES MR22807
CON
RES @MR710               ; 画像検査中
CON
RES MR22611              ; 画像検査完了
CON
RES R30015               ; 画像NG
CON
ENDS
MPP
AND R30015               ; 画像NG
SET MR22807
CON
RES MR22806
CON
RES @MR710               ; 画像検査中
CON
RES MR22611              ; 画像検査完了
CON
RES R30015               ; 画像NG
CON
ENDS
MRD
AND MR22704              ; 画像検査5段目左あり
MPS
ANB R30015               ; 画像NG
SET MR22808
CON
RES MR22809
CON
RES @MR710               ; 画像検査中
CON
RES MR22611              ; 画像検査完了
CON
RES R30015               ; 画像NG
CON
ENDS
MPP
AND R30015               ; 画像NG
SET MR22809
CON
RES MR22808
CON
RES @MR710               ; 画像検査中
CON
RES MR22611              ; 画像検査完了
CON
RES R30015               ; 画像NG
CON
ENDS
MRD
AND MR22705              ; 画像検査6段目左あり
MPS
ANB R30015               ; 画像NG
SET MR22810
CON
RES MR22811
CON
RES @MR710               ; 画像検査中
CON
RES MR22611              ; 画像検査完了
CON
RES R30015               ; 画像NG
CON
ENDS
MPP
AND R30015               ; 画像NG
SET MR22811
CON
RES MR22810
CON
RES @MR710               ; 画像検査中
CON
RES MR22611              ; 画像検査完了
CON
RES R30015               ; 画像NG
CON
ENDS
MRD
AND MR22706              ; 画像検査1段目右あり
MPS
ANB R30015               ; 画像NG
SET MR22900
CON
RES MR22901
CON
RES @MR710               ; 画像検査中
CON
RES MR22611              ; 画像検査完了
CON
RES R30015               ; 画像NG
CON
ENDS
MPP
AND R30015               ; 画像NG
SET MR22901
CON
RES MR22900
CON
RES @MR710               ; 画像検査中
CON
RES MR22611              ; 画像検査完了
CON
RES R30015               ; 画像NG
CON
ENDS
MRD
AND MR22707              ; 画像検査2段目右あり
MPS
ANB R30015               ; 画像NG
SET MR22902
CON
RES MR22903
CON
RES @MR710               ; 画像検査中
CON
RES MR22611              ; 画像検査完了
CON
RES R30015               ; 画像NG
CON
ENDS
MPP
AND R30015               ; 画像NG
SET MR22903
CON
RES MR22902
CON
RES @MR710               ; 画像検査中
CON
RES MR22611              ; 画像検査完了
CON
RES R30015               ; 画像NG
CON
ENDS
MRD
AND MR22708              ; 画像検査3段目右あり
MPS
ANB R30015               ; 画像NG
SET MR22904
CON
RES MR22905
CON
RES @MR710               ; 画像検査中
CON
RES MR22611              ; 画像検査完了
CON
RES R30015               ; 画像NG
CON
ENDS
MPP
AND R30015               ; 画像NG
SET MR22905
CON
RES MR22904
CON
RES @MR710               ; 画像検査中
CON
RES MR22611              ; 画像検査完了
CON
RES R30015               ; 画像NG
CON
ENDS
MRD
AND MR22709              ; 画像検査4段目右あり
MPS
ANB R30015               ; 画像NG
SET MR22906
CON
RES MR22907
CON
RES @MR710               ; 画像検査中
CON
RES MR22611              ; 画像検査完了
CON
RES R30015               ; 画像NG
CON
ENDS
MPP
AND R30015               ; 画像NG
SET MR22907
CON
RES MR22906
CON
RES @MR710               ; 画像検査中
CON
RES MR22611              ; 画像検査完了
CON
RES R30015               ; 画像NG
CON
ENDS
MRD
AND MR22710              ; 画像検査5段目右あり
MPS
ANB R30015               ; 画像NG
SET MR22908
CON
RES MR22909
CON
RES @MR710               ; 画像検査中
CON
RES MR22611              ; 画像検査完了
CON
RES R30015               ; 画像NG
CON
ENDS
MPP
AND R30015               ; 画像NG
SET MR22909
CON
RES MR22908
CON
RES @MR710               ; 画像検査中
CON
RES MR22611              ; 画像検査完了
CON
RES R30015               ; 画像NG
CON
ENDS
MRD
AND MR22711              ; 画像検査6段目右あり
MPS
ANB R30015               ; 画像NG
SET MR22910
CON
RES MR22911
CON
RES @MR710               ; 画像検査中
CON
RES MR22611              ; 画像検査完了
CON
RES R30015               ; 画像NG
CON
ENDS
MPP
AND R30015               ; 画像NG
SET MR22911
CON
RES MR22910
CON
RES @MR710               ; 画像検査中
CON
RES MR22611              ; 画像検査完了
CON
RES R30015               ; 画像NG
CON
ENDS
MPP
LDB MR22700              ; 画像検査1段目左あり
ANB MR22701              ; 画像検査2段目左あり
ANB MR22702              ; 画像検査3段目左あり
ANB MR22703              ; 画像検査4段目左あり
ANB MR22704              ; 画像検査5段目左あり
ANB MR22705              ; 画像検査6段目左あり
ANB MR22706              ; 画像検査1段目右あり
ANB MR22707              ; 画像検査2段目右あり
ANB MR22708              ; 画像検査3段目右あり
ANB MR22709              ; 画像検査4段目右あり
ANB MR22710              ; 画像検査5段目右あり
ANB MR22711              ; 画像検査6段目右あり
ANL
RES @MR710               ; 画像検査中
CON
RES MR22611              ; 画像検査完了
CON
RES R30015               ; 画像NG
CON
ENDS
;画像調整ﾓｰﾄﾞ
LDP MR20713              ; 画像調整ﾓｰﾄﾞ開始
AND R1200                ; 画像ｺﾝﾄﾛｰﾗ OUT19 Ready
ANB R1201                ; 画像ｺﾝﾄﾛｰﾗ OUT20 Busy
ANB R1202                ; 画像ｺﾝﾄﾛｰﾗ OUT21 Error
ANB @MR710               ; 画像検査中
SET @MR610               ; 画像調整ﾓｰﾄﾞ動作中
CON
SET @MR608               ; 画像調整ﾓｰﾄﾞ開始
STG @MR608               ; 画像調整ﾓｰﾄﾞ開始
LDA DM20030              ; 画像検査位置
CON
STA DM20032              ; 画像検査位置一時保管
CON
JMP @MR611
STG @MR611
SET MR10310              ; 調整ﾓｰﾄﾞ動作
CON
JMP @MR612
STG @MR612
ANB MR10310              ; 調整ﾓｰﾄﾞ動作
AND MR10311              ; 調整ﾓｰﾄﾞ1ｻｲｸﾙ完了
JMP @MR613
STG @MR613
RES MR10311              ; 調整ﾓｰﾄﾞ1ｻｲｸﾙ完了
CON
JMP @MR614
STG @MR614
MPS
LD MR20713               ; 画像調整ﾓｰﾄﾞ開始
AND R1200                ; 画像ｺﾝﾄﾛｰﾗ OUT19 Ready
ANB R1201                ; 画像ｺﾝﾄﾛｰﾗ OUT20 Busy
ANB R1202                ; 画像ｺﾝﾄﾛｰﾗ OUT21 Error
ANL
JMP @MR608               ; 画像調整ﾓｰﾄﾞ開始
MPP
ANB MR20713              ; 画像調整ﾓｰﾄﾞ開始
LDA DM20032              ; 画像検査位置一時保管
CON
STA DM20030              ; 画像検査位置
CON
STA DM40020              ; ｺﾏﾝﾄﾞﾊﾟﾗﾒｰﾀｱﾄﾞﾚｽ
CON
RES @MR610               ; 画像調整ﾓｰﾄﾞ動作中
CON
ENDS
MCR
;<h1/>ﾒﾝﾃ RB ﾃｨｰﾁﾝｸﾞ
STG @MR2100              ; RB ﾃｨｰﾁﾝｸﾞ
MPS
LDB R39900               ; RB動作中
ANB @MR001               ; TASK10　ERROR
ANB @MR2110              ; RB_MOVE中
ANB @MR2202              ; RB_HOME中
ANL
MPS
ANB R41210               ; TASK10 PAUSE 要求
OUT @MR2102              ; ﾃｨｰﾁﾝｸﾞ中
CON
AND @MR1902              ; 終了確認
RES @MR1902              ; 終了確認
CON
JMP @MR2914
MPP
AND R41210               ; TASK10 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
MPP
LDP R44915               ; Teaching End
ORP R44914               ; Teaching End2
ANL
SET @MR1902              ; 終了確認
;<h1/>デバイスネットTYPE
;※ﾒﾝﾃ RB 指定　Z3=動作STG指定用：Z4=IAI_状態信号デバイス指定用　Z5=RB Target POS格納ﾃﾞﾊﾞｲｽ参照先
LDB R39007               ; PLS列TYPE
MC
;Z1=D50312*16			'Z1:動作ﾌﾗｸﾞ修飾
;Z2=RB_OFFSET[D50312]	'Z2:軸ﾃﾞﾊﾞｲｽｵﾌｾｯﾄ修飾
;Z3=D50312*2				'Z3:動作Parameter格納先修飾
LD CR2002                ; 常時ON
NCJ #1003
;Z1=D50312*16			'Z1:動作ﾌﾗｸﾞ修飾
;
LD CR2002                ; 常時ON
LDA DM50312              ; RB選択
CON
EXT
CON
MUL.L +16
CON
STA.L Z1
;Z2=RB_OFFSET[D50312]	'Z2:軸ﾃﾞﾊﾞｲｽｵﾌｾｯﾄ修飾
;
LD CR2002                ; 常時ON
LDA DM50312              ; RB選択
CON
EXT
CON
STA.L Z12
CON
LDA W3AB0:Z12            ; RB_OFFSET
CON
EXT
CON
STA.L Z2
;Z3=D50312*2				'Z3:動作Parameter格納先修飾
LD CR2002                ; 常時ON
LDA DM50312              ; RB選択
CON
EXT
CON
MUL.L +2
CON
STA.L Z3
LABEL #1003
;
LD @MR2102               ; ﾃｨｰﾁﾝｸﾞ中
ANB R44200               ; Grp1 ﾎﾟｰｽﾞ要求
ANB R39900               ; RB動作中
BAND *W3A04:Z2 #4        ; RB_IN (STATUS)
BANB *W3A04:Z2 #3        ; RB_IN (STATUS)
MPS
ANP MR22007              ; HOME
SET @MR2200              ; RB_HOME
MRD
LDP MR22006              ; MOVE
BAND *W3A04:Z2 #4        ; RB_IN (STATUS)
BANB *W3A04:Z2 #3        ; RB_IN (STATUS)
ANL
SET @MR2108              ; RB_MOVE
MPP
AND B39B5                ; JISL ON=ｲﾝﾁﾝｸﾞ T.P
MPS
ANP MR22005              ; JOG-
SET MR22008              ; INC-
CON
SET @MR2108              ; RB_MOVE
MPP
ANP MR22004              ; JOG+
SET MR22009              ; INC+
CON
SET @MR2108              ; RB_MOVE
MCR
;<h1/>MC Unit PULSE列TYPE
LD R39007                ; PLS列TYPE
MC
;Z1=D50312*16									'Z1:動作ﾌﾗｸﾞ修飾
;Z3=D50312*2										'Z3:動作Parameter格納先修飾
;
;@DM60=W3AE0:(Unit_No*4)*16						'選択軸UNITのRﾃﾞﾊﾞｲｽ修飾
;ADRSET(R0:@DM60,Unit_R)							'指定UNIT先頭ﾃﾞﾊﾞｲｽ格納 R
;Z1=D50312*16									'Z1:動作ﾌﾗｸﾞ修飾
;
LD CR2002                ; 常時ON
LDA DM50312              ; RB選択
CON
EXT
CON
MUL.L +16
CON
STA.L Z1
;Z3=D50312*2										'Z3:動作Parameter格納先修飾
;
LD CR2002                ; 常時ON
LDA DM50312              ; RB選択
CON
EXT
CON
MUL.L +2
CON
STA.L Z3
;@DM60=W3AE0:(Unit_No*4)*16						'選択軸UNITのRﾃﾞﾊﾞｲｽ修飾
;
LD CR2002                ; 常時ON
LDA W3A23                ; Unit No.
CON
EXT
CON
MUL.L +4
CON
STA.L Z12
CON
LDA W3AE0:Z12            ; UNIT_0 R
CON
EXT
CON
MUL.L +16
CON
STA @DM60
;ADRSET(R0:@DM60,Unit_R)							'指定UNIT先頭ﾃﾞﾊﾞｲｽ格納 R
LD CR2002                ; 常時ON
LDA @DM60
CON
EXT
CON
STA.L Z12
ADRSET R000:Z12 W3B20    ; 指定UNIT　ﾃﾞﾊﾞｲｽ格納先 R
;
;IN FLG
LD CR2002                ; 常時ON
LDA W3A22                ; Axis No.
CON
SUB #1
CON
MUL #128
CON
ADD #708
CON
STA Z2
CON
AND *W3B20:Z2            ; 指定UNIT　ﾃﾞﾊﾞｲｽ格納先 R
OUT Busy                 ; 動作中
LD CR2002                ; 常時ON
LDA W3A22                ; Axis No.
CON
SUB #1
CON
MUL #128
CON
ADD #733
CON
STA Z2
CON
AND *W3B20:Z2            ; 指定UNIT　ﾃﾞﾊﾞｲｽ格納先 R
OUT Ready                ; Servo ON中
LD CR2002                ; 常時ON
LDA W3A22                ; Axis No.
CON
SUB #1
CON
MUL #128
CON
ADD #734
CON
STA Z2
CON
AND *W3B20:Z2            ; 指定UNIT　ﾃﾞﾊﾞｲｽ格納先 R
OUT Send                 ; Servo End
LD CR2002                ; 常時ON
LDA W3A22                ; Axis No.
CON
SUB #1
CON
MUL #128
CON
ADD #757
CON
STA Z2
CON
AND *W3B20:Z2            ; 指定UNIT　ﾃﾞﾊﾞｲｽ格納先 R
OUT DRV_AL               ; ﾄﾞﾗｲｱﾗｰﾑ
LD CR2002                ; 常時ON
LDA #448
CON
STA Z2
CON
AND *W3B20:Z2            ; 指定UNIT　ﾃﾞﾊﾞｲｽ格納先 R
OUT CReady               ; 準備完了
;出力 FLG
LD CR2002                ; 常時ON
LDA W3A22                ; Axis No.
CON
SUB #1
CON
MUL #8
CON
ADD #0
CON
STA Z2
CON
AND *W3B20:Z2            ; 指定UNIT　ﾃﾞﾊﾞｲｽ格納先 R
OUT Cstr                 ; 位置決め開始
LD CR2002                ; 常時ON
LDA W3A22                ; Axis No.
CON
SUB #1
CON
MUL #128
CON
ADD #492
CON
STA Z2
CON
AND *W3B20:Z2            ; 指定UNIT　ﾃﾞﾊﾞｲｽ格納先 R
OUT Home                 ; 原点復帰
LD CR2002                ; 常時ON
LDA W3A22                ; Axis No.
CON
SUB #1
CON
MUL #128
CON
ADD #693
CON
STA Z2
CON
AND *W3B20:Z2            ; 指定UNIT　ﾃﾞﾊﾞｲｽ格納先 R
OUT DRV_ALM_RES          ; Driver ALARM Reset
LD CR2002                ; 常時ON
LDA W3A22                ; Axis No.
CON
SUB #1
CON
MUL #128
CON
ADD #669
CON
STA Z2
CON
AND *W3B20:Z2            ; 指定UNIT　ﾃﾞﾊﾞｲｽ格納先 R
OUT Son                  ; Servo ON
LD CR2002                ; 常時ON
LDA W3A22                ; Axis No.
CON
SUB #1
CON
MUL #128
CON
ADD #656
CON
STA Z2
CON
AND *W3B20:Z2            ; 指定UNIT　ﾃﾞﾊﾞｲｽ格納先 R
OUT Jog_plus             ; JOG+
LD CR2002                ; 常時ON
LDA W3A22                ; Axis No.
CON
SUB #1
CON
MUL #128
CON
ADD #657
CON
STA Z2
CON
AND *W3B20:Z2            ; 指定UNIT　ﾃﾞﾊﾞｲｽ格納先 R
OUT Jog_minus            ; JOG-
LD CR2002                ; 常時ON
LDA W3A22                ; Axis No.
CON
SUB #1
CON
MUL #128
CON
ADD #658
CON
STA Z2
CON
AND *W3B20:Z2            ; 指定UNIT　ﾃﾞﾊﾞｲｽ格納先 R
OUT Jog_hi               ; 高速JOG
;--
LD @MR2102               ; ﾃｨｰﾁﾝｸﾞ中
ANB R44200               ; Grp1 ﾎﾟｰｽﾞ要求
ANB R39900               ; RB動作中
ANB Busy                 ; 動作中
ANB DRV_AL               ; ﾄﾞﾗｲｱﾗｰﾑ
AND Ready                ; Servo ON中
MPS
ANP MR22007              ; HOME
SET @MR2200              ; RB_HOME
MRD
LDP MR22006              ; MOVE
AND R35011:Z1            ; RB1原点復帰済
ANL
SET @MR2108              ; RB_MOVE
MPP
AND B39B5                ; JISL ON=ｲﾝﾁﾝｸﾞ T.P
MPS
ANP MR22005              ; JOG-
SET MR22008              ; INC-
CON
SET @MR2108              ; RB_MOVE
MPP
ANP MR22004              ; JOG+
SET MR22009              ; INC+
CON
SET @MR2108              ; RB_MOVE
MCR
;<h1/>ﾒﾝﾃ Teaching MOVE
STG @MR2108              ; RB_MOVE
SET @MR2110              ; RB_MOVE中
CON
JMP @MR2111
;ｻｰﾎﾞON & ｱﾗｰﾑOFF
STG @MR2111
LDA DM50300              ; Position No
CON
STA EM1300:Z3            ; RB1Target Pos
CON
SET R35000:Z1            ; RB1 MOVE
CON
JMP @MR2112
STG @MR2112
AND R35001:Z1            ; RB1 MOVE END
RES R35001:Z1            ; RB1 MOVE END
CON
JMP @MR2113
STG @MR2113
MPS
ANB R35003:Z1            ; RB1 Alarm
JMP @MR2115              ; END
MPP
AND R35003:Z1            ; RB1 Alarm
RES R35003:Z1            ; RB1 Alarm
CON
SET @MR2208              ; RB_Alarm
CON
JMP @MR2114
STG @MR2114
AND @MR2209              ; RB_Alarm_END
RES @MR2209              ; RB_Alarm_END
CON
JMP @MR2115              ; END
STG @MR2115              ; END
RES MR22008              ; INC-
CON
RES MR22009              ; INC+
CON
RES @MR2110              ; RB_MOVE中
CON
ENDS
;<h1/>ﾒﾝﾃ Teaching HOME
STG @MR2200              ; RB_HOME
SET @MR2202              ; RB_HOME中
CON
JMP @MR2203
STG @MR2203
SET R35008:Z1            ; RB1 HOME
CON
JMP @MR2204
STG @MR2204
AND R35009:Z1            ; RB1 HOME END
RES R35009:Z1            ; RB1 HOME END
CON
JMP @MR2205
STG @MR2205
MPS
ANB R35003:Z1            ; RB1 Alarm
JMP @MR2207              ; END
MPP
AND R35003:Z1            ; RB1 Alarm
RES R35003:Z1            ; RB1 Alarm
CON
SET @MR2208              ; RB_Alarm
CON
JMP @MR2206
STG @MR2206
AND @MR2209              ; RB_Alarm_END
RES @MR2209              ; RB_Alarm_END
CON
JMP @MR2207              ; END
STG @MR2207              ; END
RES @MR2202              ; RB_HOME中
CON
ENDS
;<h1/>※現在値表示&格納
;デバイスネットTYPE
;TYPE D50300.L,D50312.D,@DM50.U,D50320.L,*RB_NOW_POS.L,DM11080.L
;'/// 現在位置 表示
;	DM50320 = *RB_NOW_POS:Z2 'Now Position 
;
;'DATA格納:現在位置 取込み/入力値取込み 
;IF R34001 = 1 THEN
;	@DM50 = ((D50300-1)*6)+(D50312*DM9422)
;	IF R34002 = 0 THEN 
;		EM10000.L:(@DM50) = DM50320.L	'Position
;	ELSE
;		EM10000.L:(@DM50) = DM50302.L	'Direct Position
;	END IF
;	
;	EM10004:(@DM50) = DM50306.U	'SPEED
;	EM10005:(@DM50) = DM50307.U	'ACC/DEC
;	D50302.L= E10000.L:@D50
;	D50306.U= E10004.U:@D50
;	D50307.U= E10005.U:@D50
;END IF
LD>= DM3000 #2150        ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND<= DM3000 #2153       ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2220         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANB R39007               ; PLS列TYPE
NCJ #1005
;TYPE D50300.L,D50312.D,@DM50.U,D50320.L,*RB_NOW_POS.L,DM11080.L
;
;'/// 現在位置 表示
;
;	DM50320 = *RB_NOW_POS:Z2 'Now Position 
;
LD CR2002                ; 常時ON
MOV.L *W3A00:Z2 DM50320  ; RB NOW_Pos  現在地
;'DATA格納:現在位置 取込み/入力値取込み 
;
;IF R34001 = 1 THEN
;
LD R34001                ; Teaching SW
NCJ #2003
;	@DM50 = ((D50300-1)*6)+(D50312*DM9422)
;
LD CR2002                ; 常時ON
LDA DM9422               ; 1軸あたり使用ﾃﾞﾊﾞｲｽ数
CON
EXT
CON
MUL.L DM50312            ; RB選択
CON
STA.L @VM7
CON
LDA.L DM50300            ; Position No
CON
SUB.L +1
CON
MUL.L +6
CON
ADD.L @VM7
CON
STA @DM50
;	IF R34002 = 0 THEN 
;
LDB R34002               ; direct Teach T.P
NCJ #2004
;		EM10000.L:(@DM50) = DM50320.L	'Position
;
LD CR2002                ; 常時ON
LDA @DM50
CON
EXT
CON
STA.L Z11
CON
MOV.L DM50320 EM10000:Z11; 現在地  RB1 P1 POS(LO)
;	ELSE
;
LD CR2002                ; 常時ON
CJ #2005
LABEL #2004
;		EM10000.L:(@DM50) = DM50302.L	'Direct Position
;
LD CR2002                ; 常時ON
LDA @DM50
CON
EXT
CON
STA.L Z11
CON
MOV.L DM50302 EM10000:Z11; RB Position Low  RB1 P1 POS(LO)
;	END IF
;
LABEL #2005
;	EM10004:(@DM50) = DM50306.U	'SPEED
;
LD CR2002                ; 常時ON
LDA @DM50
CON
EXT
CON
STA.L Z11
CON
MOV DM50306 EM10004:Z11  ; RB SPEED  RB1 P1 Speed
;	EM10005:(@DM50) = DM50307.U	'ACC/DEC
;
LD CR2002                ; 常時ON
LDA @DM50
CON
EXT
CON
STA.L Z11
CON
MOV DM50307 EM10005:Z11  ; RB Acc/Dec  RB1 P1 G
;	D50302.L= E10000.L:@D50
;
LD CR2002                ; 常時ON
LDA @DM50
CON
EXT
CON
STA.L Z12
CON
MOV.L EM10000:Z12 DM50302; RB1 P1 POS(LO)  RB Position Low
;	D50306.U= E10004.U:@D50
;
LD CR2002                ; 常時ON
LDA @DM50
CON
EXT
CON
STA.L Z12
CON
MOV EM10004:Z12 DM50306  ; RB1 P1 Speed  RB SPEED
;	D50307.U= E10005.U:@D50
;
LD CR2002                ; 常時ON
LDA @DM50
CON
EXT
CON
STA.L Z12
CON
MOV EM10005:Z12 DM50307  ; RB1 P1 G  RB Acc/Dec
;END IF
LABEL #2003
LABEL #1005
;
;MC UNIT TYPE
;TYPE D50300.L,D50312.D,@DM50.U,D50320.L,DM11080.L
;@DM62=W3AE2:(Unit_No*4)							'選択軸UNITのDMﾃﾞﾊﾞｲｽ修飾
;ADRSET(DM0:@DM62,Unit_DM)						'指定UNIT先頭ﾃﾞﾊﾞｲｽ格納 DM
;
;'/// 現在位置 表示
;D50320 = *Unit_DM.L:(290+((Axis_No-1)*60))	'MC Now pos
;
;
;'DATA格納:現在位置 取込み/入力値取込み 
;IF R34001 = 1 THEN
;	@DM50 = ((D50300-1)*6)+(D50312*DM9422)
;	IF R34002 = 0 THEN 
;		EM10000.L:(@DM50) = DM50320.L	'Position
;	ELSE
;		EM10000.L:(@DM50) = DM50302.L	'Direct Position
;	END IF
;	
;	EM10004:(@DM50) = DM50306.U	'SPEED
;	EM10005:(@DM50) = DM50307.U	'ACC/DEC
;	D50302.L= E10000.L:@D50
;	D50306.U= E10004.U:@D50
;	D50307.U= E10005.U:@D50
;END IF
LD>= DM3000 #2150        ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND<= DM3000 #2153       ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2220         ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND R39007               ; PLS列TYPE
NCJ #1006
;TYPE D50300.L,D50312.D,@DM50.U,D50320.L,DM11080.L
;
;@DM62=W3AE2:(Unit_No*4)							'選択軸UNITのDMﾃﾞﾊﾞｲｽ修飾
;
LD CR2002                ; 常時ON
LDA W3A23                ; Unit No.
CON
EXT
CON
MUL.L +4
CON
STA.L Z12
CON
MOV W3AE2:Z12 @DM62      ; UNIT_0 DM
;ADRSET(DM0:@DM62,Unit_DM)						'指定UNIT先頭ﾃﾞﾊﾞｲｽ格納 DM
;
LD CR2002                ; 常時ON
LDA @DM62
CON
EXT
CON
STA.L Z12
ADRSET DM0:Z12 W3B22     ; 指定UNITﾃﾞﾊﾞｲｽ格納先 DM
;'/// 現在位置 表示
;
;D50320 = *Unit_DM.L:(290+((Axis_No-1)*60))	'MC Now pos
;
LD CR2002                ; 常時ON
LDA W3A22                ; Axis No.
CON
EXT
CON
SUB.L +1
CON
MUL.L +60
CON
ADD.L +290
CON
STA.L Z12
CON
MOV.L *W3B22:Z12 DM50320 ; 指定UNITﾃﾞﾊﾞｲｽ格納先 DM  現在地
;'DATA格納:現在位置 取込み/入力値取込み 
;
;IF R34001 = 1 THEN
;
LD R34001                ; Teaching SW
NCJ #2006
;	@DM50 = ((D50300-1)*6)+(D50312*DM9422)
;
LD CR2002                ; 常時ON
LDA DM9422               ; 1軸あたり使用ﾃﾞﾊﾞｲｽ数
CON
EXT
CON
MUL.L DM50312            ; RB選択
CON
STA.L @VM9
CON
LDA.L DM50300            ; Position No
CON
SUB.L +1
CON
MUL.L +6
CON
ADD.L @VM9
CON
STA @DM50
;	IF R34002 = 0 THEN 
;
LDB R34002               ; direct Teach T.P
NCJ #2007
;		EM10000.L:(@DM50) = DM50320.L	'Position
;
LD CR2002                ; 常時ON
LDA @DM50
CON
EXT
CON
STA.L Z11
CON
MOV.L DM50320 EM10000:Z11; 現在地  RB1 P1 POS(LO)
;	ELSE
;
LD CR2002                ; 常時ON
CJ #2008
LABEL #2007
;		EM10000.L:(@DM50) = DM50302.L	'Direct Position
;
LD CR2002                ; 常時ON
LDA @DM50
CON
EXT
CON
STA.L Z11
CON
MOV.L DM50302 EM10000:Z11; RB Position Low  RB1 P1 POS(LO)
;	END IF
;
LABEL #2008
;	EM10004:(@DM50) = DM50306.U	'SPEED
;
LD CR2002                ; 常時ON
LDA @DM50
CON
EXT
CON
STA.L Z11
CON
MOV DM50306 EM10004:Z11  ; RB SPEED  RB1 P1 Speed
;	EM10005:(@DM50) = DM50307.U	'ACC/DEC
;
LD CR2002                ; 常時ON
LDA @DM50
CON
EXT
CON
STA.L Z11
CON
MOV DM50307 EM10005:Z11  ; RB Acc/Dec  RB1 P1 G
;	D50302.L= E10000.L:@D50
;
LD CR2002                ; 常時ON
LDA @DM50
CON
EXT
CON
STA.L Z12
CON
MOV.L EM10000:Z12 DM50302; RB1 P1 POS(LO)  RB Position Low
;	D50306.U= E10004.U:@D50
;
LD CR2002                ; 常時ON
LDA @DM50
CON
EXT
CON
STA.L Z12
CON
MOV EM10004:Z12 DM50306  ; RB1 P1 Speed  RB SPEED
;	D50307.U= E10005.U:@D50
;
LD CR2002                ; 常時ON
LDA @DM50
CON
EXT
CON
STA.L Z12
CON
MOV EM10005:Z12 DM50307  ; RB1 P1 G  RB Acc/Dec
;END IF
LABEL #2006
LABEL #1006
;
;<h1/>※入力モニター
BLD *W3A04:Z2 #0         ; RB_IN (STATUS)
ANB R39007               ; PLS列TYPE
LD Send                  ; Servo End
AND R39007               ; PLS列TYPE
ORL
OUT B39A0                ; PEND T.P
BLD *W3A04:Z2 #1         ; RB_IN (STATUS)
ANB R39007               ; PLS列TYPE
LD R35011:Z1             ; RB1原点復帰済
AND R39007               ; PLS列TYPE
ORL
OUT B39A1                ; HEND T.P
BLD *W3A04:Z2 #2         ; RB_IN (STATUS)
ANB R39007               ; PLS列TYPE
LD Busy                  ; 動作中
AND R39007               ; PLS列TYPE
ORL
OUT B39A2                ; MOVE T.P
BLD *W3A04:Z2 #3         ; RB_IN (STATUS)
ANB R39007               ; PLS列TYPE
LD DRV_AL                ; ﾄﾞﾗｲｱﾗｰﾑ
AND R39007               ; PLS列TYPE
ORL
OUT B39A3                ; ALM T.P
BLD *W3A04:Z2 #4         ; RB_IN (STATUS)
ANB R39007               ; PLS列TYPE
LD Ready                 ; Servo ON中
AND R39007               ; PLS列TYPE
ORL
OUT B39A4                ; SV T.P
BLD *W3A04:Z2 #5         ; RB_IN (STATUS)
ANB R39007               ; PLS列TYPE
OUT B39A5                ; PSFL T.P
BLD *W3A04:Z2 #6         ; RB_IN (STATUS)
ANB R39007               ; PLS列TYPE
OUT B39A6                ; -
BLD *W3A04:Z2 #7         ; RB_IN (STATUS)
ANB R39007               ; PLS列TYPE
OUT B39A7                ; BALM ﾊﾞｯﾃﾘｰALM T.P
BLD *W3A04:Z2 #8         ; RB_IN (STATUS)
ANB R39007               ; PLS列TYPE
OUT B39A8                ; Mend 移動指令完了 T.P
BLD *W3A04:Z2 #9         ; RB_IN (STATUS)
ANB R39007               ; PLS列TYPE
OUT B39A9                ; -
BLD *W3A04:Z2 #10        ; RB_IN (STATUS)
ANB R39007               ; PLS列TYPE
OUT B39AA                ; -
BLD *W3A04:Z2 #11        ; RB_IN (STATUS)
ANB R39007               ; PLS列TYPE
OUT B39AB                ; Pzone T.P
BLD *W3A04:Z2 #12        ; RB_IN (STATUS)
ANB R39007               ; PLS列TYPE
OUT B39AC                ; ZONE1 T.P
BLD *W3A04:Z2 #13        ; RB_IN (STATUS)
ANB R39007               ; PLS列TYPE
OUT B39AD                ; ZONE2 T.P
BLD *W3A04:Z2 #14        ; RB_IN (STATUS)
ANB R39007               ; PLS列TYPE
LD CReady                ; 準備完了
AND R39007               ; PLS列TYPE
ORL
OUT B39AE                ; CRDY ｺﾝﾄﾛｰﾗ準備完了 T.P
BLD *W3A04:Z2 #15        ; RB_IN (STATUS)
ANB R39007               ; PLS列TYPE
OUT B39AF                ; EMGS T.P
LDB R39007               ; PLS列TYPE
LDA *W3A02:Z2            ; RB_Alarm
CON
EXT
CON
STA DM50310              ; RB ｱﾗｰﾑ表示
LD R39007                ; PLS列TYPE
LDA #0
CON
EXT
CON
STA DM50310              ; RB ｱﾗｰﾑ表示
;<h1/>※出力モニター
BLD *W3A14:Z2 #0         ; RB_OUT (STATUS)
ANB R39007               ; PLS列TYPE
LD Cstr                  ; 位置決め開始
AND R39007               ; PLS列TYPE
ORL
OUT B39B0                ; CSTR 位置決めｽﾀｰﾄ T.P
BLD *W3A14:Z2 #1         ; RB_OUT (STATUS)
ANB R39007               ; PLS列TYPE
LD Home                  ; 原点復帰
AND R39007               ; PLS列TYPE
ORL
OUT B39B1                ; HOME T.P
BLD *W3A14:Z2 #2         ; RB_OUT (STATUS)
ANB R39007               ; PLS列TYPE
OUT B39B2                ; STP　一時停止 T.P
BLD *W3A14:Z2 #3         ; RB_OUT (STATUS)
ANB R39007               ; PLS列TYPE
LD DRV_ALM_RES           ; Driver ALARM Reset
AND R39007               ; PLS列TYPE
ORL
OUT B39B3                ; RES ﾘｾｯﾄ T.P
BLD *W3A14:Z2 #4         ; RB_OUT (STATUS)
ANB R39007               ; PLS列TYPE
LD Son                   ; Servo ON
AND R39007               ; PLS列TYPE
ORL
OUT B39B4                ; SON T.P
BLD *W3A14:Z2 #5         ; RB_OUT (STATUS)
ANB R39007               ; PLS列TYPE
LD MR22002               ; JISL ON=Inch OFF=JOG
AND R39007               ; PLS列TYPE
ORL
OUT B39B5                ; JISL ON=ｲﾝﾁﾝｸﾞ T.P
BLD *W3A14:Z2 #6         ; RB_OUT (STATUS)
ANB R39007               ; PLS列TYPE
LD Jog_hi                ; 高速JOG
AND R39007               ; PLS列TYPE
ORL
OUT B39B6                ; JVEL JOG速度切替 Low T.P
BLD *W3A14:Z2 #7         ; RB_OUT (STATUS)
ANB R39007               ; PLS列TYPE
LD Jog_minus             ; JOG-
AND R39007               ; PLS列TYPE
ORL
OUT B39B7                ; JOG- T.P
BLD *W3A14:Z2 #8         ; RB_OUT (STATUS)
ANB R39007               ; PLS列TYPE
LD Jog_plus              ; JOG+
AND R39007               ; PLS列TYPE
ORL
OUT B39B8                ; JOG+ T.P
BLD *W3A14:Z2 #9         ; RB_OUT (STATUS)
ANB R39007               ; PLS列TYPE
OUT B39B9                ; -
BLD *W3A14:Z2 #10        ; RB_OUT (STATUS)
ANB R39007               ; PLS列TYPE
OUT B39BA                ; -
BLD *W3A14:Z2 #11        ; RB_OUT (STATUS)
ANB R39007               ; PLS列TYPE
OUT B39BB                ; -
BLD *W3A14:Z2 #12        ; RB_OUT (STATUS)
ANB R39007               ; PLS列TYPE
OUT B39BC                ; PUSH T.P
BLD *W3A14:Z2 #13        ; RB_OUT (STATUS)
ANB R39007               ; PLS列TYPE
OUT B39BD                ; DIR T.P
BLD *W3A14:Z2 #14        ; RB_OUT (STATUS)
ANB R39007               ; PLS列TYPE
OUT B39BE                ; INC T.P
BLD *W3A14:Z2 #15        ; RB_OUT (STATUS)
ANB R39007               ; PLS列TYPE
OUT B39BF                ; BKRL T.P
;<h1/>※出力信号
;<h1/>IAI RB DEVICENET  出力
LDB R44200               ; Grp1 ﾎﾟｰｽﾞ要求
ANB R39007               ; PLS列TYPE
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
MC
;Alarm RESET
BLD DM50314 #3
BOUT *W3A14:Z2 #3        ; RB_OUT (STATUS)
;Servo ON
LDB R39900               ; RB動作中
BAND DM50314 #4
MEP
MPS
BAND *W3A14:Z2 #4        ; RB_OUT (STATUS)
OUT @R000
CON
BRES *W3A14:Z2 #4        ; RB_OUT (STATUS)
MPP
BLDB *W3A14:Z2 #4        ; RB_OUT (STATUS)
ANB @R000
ANL
BSET *W3A14:Z2 #4        ; RB_OUT (STATUS)
;JISL
LD MR22002               ; JISL ON=Inch OFF=JOG
BOUT *W3A14:Z2 #5        ; RB_OUT (STATUS)
;JVEL
LD MR22003               ; JVEL
BOUT *W3A14:Z2 #6        ; RB_OUT (STATUS)
;JOG
LDB B39B5                ; JISL ON=ｲﾝﾁﾝｸﾞ T.P
MPS
AND MR22005              ; JOG-
BOUT *W3A14:Z2 #7        ; RB_OUT (STATUS)
MPP
AND MR22004              ; JOG+
BOUT *W3A14:Z2 #8        ; RB_OUT (STATUS)
;Brake Release　※使用する軸のみ記述する事。
BLD DM50314 #15
MEP
MPS
BAND *W3A14:Z2 #15       ; RB_OUT (STATUS)
OUT @R001
CON
BRES *W3A14:Z2 #15       ; RB_OUT (STATUS)
MPP
BLDB *W3A14:Z2 #15       ; RB_OUT (STATUS)
ANB @R001
ANL
BSET *W3A14:Z2 #15       ; RB_OUT (STATUS)
MCR
;<h1/>MC UNIT PULSE列制御出力
LDB R44200               ; Grp1 ﾎﾟｰｽﾞ要求
AND R39007               ; PLS列TYPE
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
MC
;Alarm RESET
LD CR2002                ; 常時ON
ANB Busy                 ; 動作中
MPS
LDA W3A22                ; Axis No.
CON
SUB #1
CON
MUL #128
CON
ADD #693
CON
STA Z2
CON
BAND DM50314 #3
OUT *W3B20:Z2            ; 指定UNIT　ﾃﾞﾊﾞｲｽ格納先 R
MPP
LDA W3A22                ; Axis No.
CON
SUB #1
CON
MUL #128
CON
ADD #640
CON
STA Z2
CON
BAND DM50314 #3
OUT *W3B20:Z2            ; 指定UNIT　ﾃﾞﾊﾞｲｽ格納先 R
;Servo ON
LDB R39900               ; RB動作中
ANB Busy                 ; 動作中
BAND DM50314 #4
MEP
MPS
LDA W3A22                ; Axis No.
CON
SUB #1
CON
MUL #128
CON
ADD #669
CON
STA Z2
MRD
AND *W3B20:Z2            ; 指定UNIT　ﾃﾞﾊﾞｲｽ格納先 R
OUT @R002
CON
RES *W3B20:Z2            ; 指定UNIT　ﾃﾞﾊﾞｲｽ格納先 R
MPP
LDB *W3B20:Z2            ; 指定UNIT　ﾃﾞﾊﾞｲｽ格納先 R
ANB @R002
ANL
SET *W3B20:Z2            ; 指定UNIT　ﾃﾞﾊﾞｲｽ格納先 R
;JVEL  ON=高速
LD CR2002                ; 常時ON
ANB Busy                 ; 動作中
MPS
LDA W3A22                ; Axis No.
CON
SUB #1
CON
MUL #128
CON
ADD #658
CON
STA Z2
MPP
ANB MR22003              ; JVEL
OUT *W3B20:Z2            ; 指定UNIT　ﾃﾞﾊﾞｲｽ格納先 R
;JOG-
LDB B39B5                ; JISL ON=ｲﾝﾁﾝｸﾞ T.P
ANB MR22002              ; JISL ON=Inch OFF=JOG
MPS
LDA W3A22                ; Axis No.
CON
SUB #1
CON
MUL #128
CON
ADD #657
CON
STA Z2
MPP
AND MR22005              ; JOG-
OUT *W3B20:Z2            ; 指定UNIT　ﾃﾞﾊﾞｲｽ格納先 R
;JOG+
LDB B39B5                ; JISL ON=ｲﾝﾁﾝｸﾞ T.P
ANB MR22002              ; JISL ON=Inch OFF=JOG
MPS
LDA W3A22                ; Axis No.
CON
SUB #1
CON
MUL #128
CON
ADD #656
CON
STA Z2
MPP
AND MR22004              ; JOG+
OUT *W3B20:Z2            ; 指定UNIT　ﾃﾞﾊﾞｲｽ格納先 R
MCR
;安全の為Brake解除OFF
;'///// Brake解除 OFF
;FOR  I =0 TO DM9412
;	*RB_OUT_STATUS:RB_OFFSET[I]=ANDA(*RB_OUT_STATUS:RB_OFFSET[I],$7FFF)
;NEXT
;
LDB @MR2102              ; ﾃｨｰﾁﾝｸﾞ中
NCJ #1007
;'///// Brake解除 OFF
;
;FOR  I =0 TO DM9412
;
LD CR2002                ; 常時ON
MOV.S +0 i               ; 変数i
LABEL #2009
LD CR2002                ; 常時ON
LDA DM9412               ; IAI最大軸数
CON
EXT
CON
STA.L @VM11
CON
LDA.S i                  ; 変数i
CON
EXT.S
CON
CMP.L @VM11
LD CR2011                ; 演算結果が正
CJ #2010
;	*RB_OUT_STATUS:RB_OFFSET[I]=ANDA(*RB_OUT_STATUS:RB_OFFSET[I],$7FFF)
;
LD CR2002                ; 常時ON
LDA.S i                  ; 変数i
CON
EXT.S
CON
STA.L Z12
CON
LDA W3AB0:Z12            ; RB_OFFSET
CON
EXT
CON
STA.L Z11
CON
LDA.S i                  ; 変数i
CON
EXT.S
CON
STA.L Z12
CON
LDA W3AB0:Z12            ; RB_OFFSET
CON
EXT
CON
STA.L Z12
CON
LDA *W3A14:Z12           ; RB_OUT (STATUS)
CON
ANDA $7FFF
CON
STA @VM13
CON
MOV @VM13 *W3A14:Z11     ; RB_OUT (STATUS)
;NEXT
;
LD CR2002                ; 常時ON
INC.S i                  ; 変数i
LDB CR2009               ; 演算結果が負
CJ #2009
LABEL #2010
LABEL #1007
;
;<h1/>ﾒﾝﾃ RB ALARM
STG @MR2208              ; RB_Alarm
ANB @MR001               ; TASK10　ERROR
ANB R39900               ; RB動作中
MPS
LDB R44200               ; Grp1 ﾎﾟｰｽﾞ要求
ANB R39004               ; ｴﾗｰ中
ANL
MPS
SET R39004               ; ｴﾗｰ中
CON
DW $1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task10 ERROR
CON
JMP @MR2210
MRD
ANB R39007               ; PLS列TYPE
SET B3990                ; ｱﾗｰﾑ詳細表示
CON
LDA *W3A02:Z2            ; RB_Alarm
CON
STA DM50310              ; RB ｱﾗｰﾑ表示
MPP
LDA DM50312              ; RB選択
CON
ADD #1
CON
STA @DM1                 ; ErrorNo /ERROR_DISP
MPP
AND R44200               ; Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
STG @MR2210
SET @MR1900              ; Main1 HALT許可
CON
AND @MR101               ; TASK10 ERROR_End
RES @MR101               ; TASK10 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
RES B3990                ; ｱﾗｰﾑ詳細表示
CON
DW #0 DM50310            ; RB ｱﾗｰﾑ表示
CON
SET @MR2209              ; RB_Alarm_END
CON
ENDS
;<h1/>MAINTENANCE終了
STG @MR2914
MCALL MODE_INDI #1
MCALL HOLD_REQUEST MyGroup;自ｸﾞﾙｰﾌﾟ番号
MPS
MSTRT CHANGE_PAGE #1 #211 @MR2908
MPP
AND @MR2908
RES @MR2908
CON
JMP @MR2915              ; Mainte END
STG @MR2915              ; Mainte END
MPS
LDB R41210               ; TASK10 PAUSE 要求
ANB @MR001               ; TASK10　ERROR
ANB R39900               ; RB動作中
ANL
RES @MR1902              ; 終了確認
CON
RES @MR2002              ; ﾒﾝﾃ中
CON
JMP LR610                ; _Grp1_Task10_Fin.STG
MPP
AND R41210               ; TASK10 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;<h1/>-----------------------------------------------------------
;<h1/>*ERROR
;MyTask Error Process Substance/エラー処理実体
STG @MR100               ; Task10 ERROR
ANB R39002               ; ERROR_DISP Busy
MPS
ZRES @MR105 @MR108       ; SW1  SW4
CON
DISN @DM9 @DM3 #4        ; ReturnSW /ERROR_DISP
MRD
DW MyTask @DM0           ; 自ﾀｽｸ番号  TaskNo /ERROR_DISP
CON
BMOV @DM0 DM60000 #7     ; TaskNo /ERROR_DISP  TaskNo /ERROR_DISP
MPP
SET R39000               ; ERROR_DISP Start
CON
SET @MR102               ; TASK10 ERROR Busy
CON
JMP @MR103
STG @MR103
AND R39002               ; ERROR_DISP Busy
AND= DM60008 @DM1        ; ReturnNo /ERROR_DISP  ErrorNo /ERROR_DISP
MPS
AND= DM60007 @DM6        ; ReturnSW /ERROR_DISP
SET @MR105               ; SW1
CON
JMP @MR104
MRD
AND= DM60007 @DM5        ; ReturnSW /ERROR_DISP
SET @MR106               ; SW2
CON
JMP @MR104
MRD
AND= DM60007 @DM4        ; ReturnSW /ERROR_DISP  1軸あたり使用ﾃﾞﾊﾞｲｽ数
SET @MR107               ; SW3
CON
JMP @MR104
MPP
AND= DM60007 @DM3        ; ReturnSW /ERROR_DISP
SET @MR108               ; SW4
CON
JMP @MR104
STG @MR104
ANB R39002               ; ERROR_DISP Busy
RES @MR102               ; TASK10 ERROR Busy
CON
SET @MR101               ; TASK10 ERROR_End
CON
ENDS
;<h1/>*Select_Y_N 
;MyTask Select_Y_N Process Substance/SELECT_Y_N処理実体
STG @MR300               ; TASK10 SELECT_Y_N
ANB R39102               ; SELECT_Y_N Busy
MPS
ZRES @MR306 @MR307       ; TASK10 Y/N
CON
DW #0 @DM20              ; TaskNo /SELECT_Y_N
CON
BMOV @DM20 DM60020 #3    ; TaskNo /SELECT_Y_N  TaskNo /SELECT_Y_N
MPP
SET R39100               ; SELECT_Y_N Start
CON
SET @MR302               ; TASK10 Y_N Busy
CON
JMP @MR303
STG @MR303
AND R39102               ; SELECT_Y_N Busy
MPS
AND= DM60023 #1          ; Y_N /SELECT_Y_N
SET @MR306               ; TASK10 Y/N
CON
JMP @MR304
MPP
AND= DM60023 #2          ; Y_N /SELECT_Y_N
RES @MR306               ; TASK10 Y/N
CON
JMP @MR304
STG @MR304
ANB R39102               ; SELECT_Y_N Busy
RES @MR302               ; TASK10 Y_N Busy
CON
SET @MR301               ; TASK10 Y/N END
CON
ENDS
;<h1/>*TIMEUP ERROR
;MyTask TIMEUP_ERROR Process Substance/TIMEUP_ERROR処理実体
STG @MR400               ; TASK10 TIMEUP_ERR
ANB R39302               ; TIMEUP_ERR Busy
MPS
DW #0 @DM40              ; TaskNo /TIMEUP_ERR
CON
BMOV @DM40 DM60040 #2    ; TaskNo /TIMEUP_ERR  TaskNo /TIMEUP_ERR
MPP
SET R39300               ; TIMEUP_ERR Start
CON
SET @MR402               ; TASK10 TIMEUP Busy
CON
JMP @MR403
STG @MR403
AND R39302               ; TIMEUP_ERR Busy
JMP @MR404
STG @MR404
ANB R39302               ; TIMEUP_ERR Busy
RES @MR402               ; TASK10 TIMEUP Busy
CON
SET @MR401               ; TASK10 TIMEUP_END
CON
ENDS
;<h1/>*Select_ACT 
;MyTask Select_ACT Process Substance/SELECT_ACT処理実体
STG @MR200               ; TASK10 SELECT_ACT
ANB R39202               ; SELECT_ACT Busy
MPS
ZRES @MR205 @MR208       ; SW1  SW4
CON
DW #0 @DM30              ; TaskNo /SELECT_ACT
CON
BMOV @DM30 DM60030 #7    ; TaskNo /SELECT_ACT  TaskNo /SELECT_ACT
MPP
SET R39200               ; SELECT_ACT Start
CON
SET @MR202               ; TASK10 SEL_ACT Busy
CON
JMP @MR203
STG @MR203
AND R39202               ; SELECT_ACT Busy
AND<> DM60037 #0         ; SelectSW /SELECT_ACT
MPS
AND= DM60037 #1          ; SelectSW /SELECT_ACT
SET @MR205               ; SW1
CON
JMP @MR204
MRD
AND= DM60037 #2          ; SelectSW /SELECT_ACT
SET @MR206               ; SW2
CON
JMP @MR204
MRD
AND= DM60037 #3          ; SelectSW /SELECT_ACT
SET @MR207               ; SW3
CON
JMP @MR204
MPP
AND= DM60037 #4          ; SelectSW /SELECT_ACT
SET @MR208               ; SW4
CON
JMP @MR204
STG @MR204
ANB R39202               ; SELECT_ACT Busy
RES @MR202               ; TASK10 SEL_ACT Busy
CON
SET @MR201               ; TASK10 SEL_ACT END
CON
ENDS
;<h1/>※機能Macro呼出し見本- 削除して下さい。-------------------------------------
;<h1/>※Error:記述見本
;ERR163 "****Error"
;<h1/>※SELECT_ACT　:記述見本
;画面番号33をブザー有りで選択SW番号を左から#5,#10,#0(無し),#34の並びで表示する
;<h1/>※ SELECT_Y_N　記述見本
;//*Select_Y_N
;<h1/>HALT
LD R41210                ; TASK10 PAUSE 要求
AND @MR1900              ; Main1 HALT許可
TMH @40 #5
CON
AND @T40
SET R42610               ; Grp1_Task10_ﾎﾟｰｽﾞ許可
LD R42610                ; Grp1_Task10_ﾎﾟｰｽﾞ許可
ORB R41210               ; TASK10 PAUSE 要求
ANB @MR001               ; TASK10　ERROR
RES @MR1900              ; Main1 HALT許可
CON
RES @MR1901              ; Main2 HALT許可
;<h1/>RBﾎﾟｼﾞｼｮﾝ  ﾊﾟﾈﾙ表示
LD= EM1313 #1            ; RB7Now Pos
OUT MR21513              ; ｽｷｰｼﾞRB待機位置あり
LD= EM1313 #2            ; RB7Now Pos
OUT MR21514              ; ｽｷｰｼﾞRB開始位置あり
LD= EM1313 #3            ; RB7Now Pos
OUT MR21515              ; ｽｷｰｼﾞRB終了位置あり
LD= EM1305 #1            ; RB3Now Pos
OUT MR22404              ; 転写Y軸待機位置あり
LD= EM1305 #2            ; RB3Now Pos
OUT MR22405              ; 転写Y軸転写台側後あり
LD= EM1305 #3            ; RB3Now Pos
OR= EM1305 #5            ; RB3Now Pos
OUT MR22406              ; 転写Y軸固定P側あり
LD= EM1305 #6            ; RB3Now Pos
OUT MR22407              ; 転写Y軸清掃位置あり
LD= EM1311 #1            ; RB6Now Pos
OUT MR22409              ; 転写Z軸上あり
LD= EM1311 #2            ; RB6Now Pos
OUT MR22410              ; 転写Z軸転写側下降前あり
LD= EM1311 #3            ; RB6Now Pos
OUT MR22411              ; 転写Z軸転写側下降あり
LD= EM1311 #4            ; RB6Now Pos
OUT MR22412              ; 転写Z軸転写側下降後あり
LD= EM1311 #7            ; RB6Now Pos
OUT MR22413              ; 転写Z軸固定P側下降前あり
LD= EM1311 #8            ; RB6Now Pos
OUT MR22414              ; 転写Z軸固定P側下降あり
LD= EM1311 #9            ; RB6Now Pos
OUT MR22415              ; 転写Z軸固定P側下降後あり
LD= EM1301 #1            ; RB1Now Pos
OUT MR23000              ; 給材X軸RB RB1 受取り位置
LD= EM1301 #3            ; RB1Now Pos
OUT MR23001              ; 給材X軸RB RB1 載替え位置
LD= EM1301 #2            ; RB1Now Pos
OUT MR23002              ; 給材X軸RB RB1 転写位置
LD= EM1303 #2            ; RB2Now Pos
OUT MR23003              ; 除材X軸RB RB2 載替え位置
LD= EM1303 #1            ; RB2Now Pos
OUT MR23004              ; 除材X軸RB RB2 除給材位置
LD= EM1317 #1            ; RB9Now Pos
OUT MR23008              ; 載替えZ軸RB RB9 上昇位置
LD= EM1317 #2            ; RB9Now Pos
OUT MR23009              ; 載替えZ軸RB RB9 取出下降直前
LD= EM1317 #3            ; RB9Now Pos
OUT MR23010              ; 載替えZ軸RB RB9 取出下降
LD= EM1317 #6            ; RB9Now Pos
OUT MR23012              ; 載替えZ軸RB RB9 載替下降直前
LD= EM1317 #7            ; RB9Now Pos
OUT MR23013              ; 載替えZ軸RB RB9 載替下降
LD= EM1307 #1            ; RB4Now Pos
OUT MR23100              ; ﾄﾚｲ搬送Y軸RB RB4 除給材位置
LD= EM1307 #5            ; RB4Now Pos
OUT MR23101              ; ﾄﾚｲ搬送Y軸RB RB4 1列目
LD= EM1307 #6            ; RB4Now Pos
OUT MR23102              ; ﾄﾚｲ搬送Y軸RB RB4 2列目
LD= EM1307 #7            ; RB4Now Pos
OUT MR23103              ; ﾄﾚｲ搬送Y軸RB RB4 3列目
LD= EM1307 #8            ; RB4Now Pos
OUT MR23104              ; ﾄﾚｲ搬送Y軸RB RB4 4列目
LD= EM1307 #11           ; RB4Now Pos
OUT MR23107              ; ﾄﾚｲ搬送Y軸RB RB4 ﾀﾞﾐｰﾄﾚｲ
LD= EM1309 #3            ; RB5Now Pos
OUT MR23108              ; 搬送P&P X軸 RB5 受渡し位置
LD= EM1309 #5            ; RB5Now Pos
OUT MR23109              ; 搬送P&P X軸 RB5 1段目
LD= EM1309 #6            ; RB5Now Pos
OUT MR23110              ; 搬送P&P X軸 RB5 2段目
LD= EM1309 #7            ; RB5Now Pos
OUT MR23111              ; 搬送P&P X軸 RB5 3段目
LD= EM1309 #11           ; RB5Now Pos
OUT MR23115              ; 搬送P&P X軸 RB5 ﾀﾞﾐｰﾄﾚｲ
LD= EM1319 #1            ; RB10Now Pos
OUT MR23200              ; 搬送P&P Z軸RB RB9 上昇位置
LD= EM1319 #2            ; RB10Now Pos
OUT MR23201              ; 搬送P&P Z軸RB RB9 取出下降直前
LD= EM1319 #3            ; RB10Now Pos
OUT MR23202              ; 搬送P&P Z軸RB RB9 取出下降
LD= EM1319 #4            ; RB10Now Pos
OUT MR23203              ; 搬送P&P Z軸RB RB9 取出下降直後
LD= EM1319 #6            ; RB10Now Pos
OUT MR23204              ; 搬送P&P Z軸RB RB9 載替下降直前
LD= EM1319 #7            ; RB10Now Pos
OUT MR23205              ; 搬送P&P Z軸RB RB9 載替下降
LD= EM1319 #8            ; RB10Now Pos
OUT MR23206              ; 搬送P&P Z軸RB RB9 載替下降直後
LD= EM1301 #11           ; RB1Now Pos
AND= EM1315 #11          ; RB8Now Pos
OUT MR22700              ; 画像検査1段目左あり
LD= EM1301 #13           ; RB1Now Pos
AND= EM1315 #13          ; RB8Now Pos
OUT MR22701              ; 画像検査2段目左あり
LD= EM1301 #15           ; RB1Now Pos
AND= EM1315 #15          ; RB8Now Pos
OUT MR22702              ; 画像検査3段目左あり
LD= EM1301 #17           ; RB1Now Pos
AND= EM1315 #17          ; RB8Now Pos
OUT MR22703              ; 画像検査4段目左あり
LD= EM1301 #19           ; RB1Now Pos
AND= EM1315 #19          ; RB8Now Pos
OUT MR22704              ; 画像検査5段目左あり
LD= EM1301 #21           ; RB1Now Pos
AND= EM1315 #21          ; RB8Now Pos
OUT MR22705              ; 画像検査6段目左あり
LD= EM1301 #12           ; RB1Now Pos
AND= EM1315 #12          ; RB8Now Pos
OUT MR22706              ; 画像検査1段目右あり
LD= EM1301 #14           ; RB1Now Pos
AND= EM1315 #14          ; RB8Now Pos
OUT MR22707              ; 画像検査2段目右あり
LD= EM1301 #16           ; RB1Now Pos
AND= EM1315 #16          ; RB8Now Pos
OUT MR22708              ; 画像検査3段目右あり
LD= EM1301 #18           ; RB1Now Pos
AND= EM1315 #18          ; RB8Now Pos
OUT MR22709              ; 画像検査4段目右あり
LD= EM1301 #20           ; RB1Now Pos
AND= EM1315 #20          ; RB8Now Pos
OUT MR22710              ; 画像検査5段目右あり
LD= EM1301 #22           ; RB1Now Pos
AND= EM1315 #22          ; RB8Now Pos
OUT MR22711              ; 画像検査6段目右あり
END
ENDH
