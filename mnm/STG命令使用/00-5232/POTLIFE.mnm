DEVICE:53
;MODULE:POTLIFE
;MODULE_TYPE:0
;SCRIPT_TYPE:
;'現在の時間を秒に変換
;    dm11500.l = sec(cm700) 
;'ﾎﾟｯﾄﾗｲﾌ有効時間
;    dm11600.l = dm11500.l + dm4208.l
;
;
LDP MR10012              ; ﾎﾟｯﾄﾗｲﾌｽｲｯﾁON
NCJ #1000
;'現在の時間を秒に変換
;
;    dm11500.l = sec(cm700) 
;
LD CR2002                ; 常時ON
MOV.D #0 @VM0
SEC CM700 @VM0           ; ｶﾚﾝﾀﾞﾀｲﾏ（年）
MOV.L @VM0 DM11500       ; 画像結果表示
;'ﾎﾟｯﾄﾗｲﾌ有効時間
;
;    dm11600.l = dm11500.l + dm4208.l
;
LD CR2002                ; 常時ON
LDA.L DM11500            ; 画像結果表示
CON
ADD.L DM4208             ; _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ
CON
STA.L DM11600            ; ﾎﾟｯﾄﾗｲﾌ有効時間
LABEL #1000
;
;'ﾎﾟｯﾄﾗｲﾌ有効時間ﾘｾｯﾄ
;    dm11600.l = sec(cm700)
;
;
LDP MR10013              ; ﾎﾟｯﾄﾗｲﾌﾘｾｯﾄ
NCJ #1001
;'ﾎﾟｯﾄﾗｲﾌ有効時間ﾘｾｯﾄ
;
;    dm11600.l = sec(cm700)
;
LD CR2002                ; 常時ON
MOV.D #0 @VM2
SEC CM700 @VM2           ; ｶﾚﾝﾀﾞﾀｲﾏ（年）
MOV.L @VM2 DM11600       ; ﾎﾟｯﾄﾗｲﾌ有効時間
LABEL #1001
;
LDP MR10013              ; ﾎﾟｯﾄﾗｲﾌﾘｾｯﾄ
DW #1 DM20010            ; 転写回数
CON
RES MR10011              ; ﾎﾟｯﾄﾗｲﾌｽｲｯﾁ有効
;'現在の時間を秒に変換
;    dm11700.l = sec(cm700)
;'ﾎﾟｯﾄﾗｲﾌ有効時間との差を算出
;    dm11750.l = dm11600.l - dm11700.l
;	
;'有効時間を時分秒に変換
;    rsec(dm11750.l,dm11760)
;
LD CR2002                ; 常時ON
NCJ #1002
;'現在の時間を秒に変換
;
;    dm11700.l = sec(cm700)
;
LD CR2002                ; 常時ON
MOV.D #0 @VM4
SEC CM700 @VM4           ; ｶﾚﾝﾀﾞﾀｲﾏ（年）
MOV.L @VM4 DM11700       ; 現在の時間
;'ﾎﾟｯﾄﾗｲﾌ有効時間との差を算出
;
;    dm11750.l = dm11600.l - dm11700.l
;
LD CR2002                ; 常時ON
LDA.L DM11600            ; ﾎﾟｯﾄﾗｲﾌ有効時間
CON
SUB.L DM11700            ; 現在の時間
CON
STA.L DM11750
;'有効時間を時分秒に変換
;
;    rsec(dm11750.l,dm11760)
;
LD CR2002                ; 常時ON
RSEC DM11750 DM11760
LABEL #1002
;
LD CR2008                ; 運転開始時1ｽｷｬﾝON
AND<=.L DM11750 -36000
DW #1 DM20010            ; 転写回数
CON
RES MR10011              ; ﾎﾟｯﾄﾗｲﾌｽｲｯﾁ有効
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND<=.L DM11750 -36000
MEP
DW #1 DM20010            ; 転写回数
CON
RES MR10011              ; ﾎﾟｯﾄﾗｲﾌｽｲｯﾁ有効
LD<.L DM11600 DM11700    ; ﾎﾟｯﾄﾗｲﾌ有効時間  現在の時間
OUT MR10109              ; ﾎﾟｯﾄﾗｲﾌﾀｲﾏーﾀｲﾑｱｯﾌﾟ
END
ENDH
