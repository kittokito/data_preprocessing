DEVICE:52
;MODULE:Error_NG
;MODULE_TYPE:0
;<<エラー処理>>
LDP MR301                ; NGﾌﾗｸﾞ
ANB MR300                ; NG総合
DW #600 EM30001          ; (TP)ﾍﾟｰｼﾞ画面切替用No.
CON
RES MR301                ; NGﾌﾗｸﾞ
CON
SET MR300                ; NG総合
CON
SET @MR000               ; NG処理開始
STG @MR000               ; NG処理開始
MPS
AND MR110                ; 検査中
SET MR100                ; 原点復帰
CON
JMP @MR001               ; 001
MPP
ANB MR110                ; 検査中
JMP @MR002               ; 002
STG @MR001               ; 001
AND MR104                ; 原点復帰完了
RES MR104                ; 原点復帰完了
CON
JMP @MR002               ; 002
STG @MR002               ; 002
RES MR110                ; 検査中
CON
SET MR303                ; ｴﾗｰﾌﾞｻﾞｰON
CON
JMP @MR003               ; 003
STG @MR003               ; 003
MPS
LD= DM146 #6             ; ｴﾗｰｺｰﾄﾞ
ANP R1002                ; キースイッチ
ANL
JMP @MR004               ; 004
MPP
AND<> DM146 #6           ; ｴﾗｰｺｰﾄﾞ
JMP @MR004               ; 004
STG @MR004               ; 004
AND MR30114              ; (TP)BzRstSw
RES MR303                ; ｴﾗｰﾌﾞｻﾞｰON
CON
JMP @MR005
STG @MR005
AND<> DM146 #8           ; ｴﾗｰｺｰﾄﾞ
LD<> DM146 #6            ; ｴﾗｰｺｰﾄﾞ
ANP MR1000               ; スタートスイッチ
LD= DM146 #6             ; ｴﾗｰｺｰﾄﾞ
ANB MR512                ; ﾜｰｸあり
ANP MR1000               ; スタートスイッチ
ORL
ANL
JMP @MR006
STG @MR006
MPS
LDB MR304                ; ｴﾗｰﾌﾗｸﾞ
ANB MR1000               ; スタートスイッチ
ANL
JMP @MR007
MPP
AND MR304                ; ｴﾗｰﾌﾗｸﾞ
DW #0 DM310              ; 検査ｴﾗｰ記憶
CON
DW #0 DM146              ; ｴﾗｰｺｰﾄﾞ
CON
DW #500 EM30001          ; (TP)ﾍﾟｰｼﾞ画面切替用No.
CON
RES MR300                ; NG総合
CON
RES MR304                ; ｴﾗｰﾌﾗｸﾞ
CON
ENDS
STG @MR007
MPS
LD<= DM146 #9            ; ｴﾗｰｺｰﾄﾞ
ANB MR003                ; ワーク検出
ANP MR1000               ; スタートスイッチ
ANL
DW #0 DM310              ; 検査ｴﾗｰ記憶
CON
DW #0 DM315              ; ﾘｰｸ検査ｴﾗｰ位置記憶
CON
DW #0 DM144              ; NGｺｰﾄﾞ
CON
MPS
ANB MR304                ; ｴﾗｰﾌﾗｸﾞ
RES MR300                ; NG総合
CON
ENDS
MPP
AND MR304                ; ｴﾗｰﾌﾗｸﾞ
JMP @MR002               ; 002
MPP
LD>= DM146 #10           ; ｴﾗｰｺｰﾄﾞ
ANP MR1000               ; スタートスイッチ
ANL
DW #0 DM310              ; 検査ｴﾗｰ記憶
CON
DW #0 DM315              ; ﾘｰｸ検査ｴﾗｰ位置記憶
CON
DW #0 DM146              ; ｴﾗｰｺｰﾄﾞ
CON
DW #0 DM144              ; NGｺｰﾄﾞ
CON
MPS
ANB MR304                ; ｴﾗｰﾌﾗｸﾞ
RES MR300                ; NG総合
CON
DW #500 EM30001          ; (TP)ﾍﾟｰｼﾞ画面切替用No.
CON
ENDS
MPP
AND MR304                ; ｴﾗｰﾌﾗｸﾞ
JMP @MR002               ; 002
;<<検査NG>>
;<<Inspection fault>>
LD MR306                 ; 検査NG
ANB MR304                ; ｴﾗｰﾌﾗｸﾞ
LD CR2008                ; 運転開始時1ｽｷｬﾝON
AND= #6 DM146            ; ｴﾗｰｺｰﾄﾞ
ORL
SET @MR105               ; 105
STG @MR105               ; 105
DW #6 DM146              ; ｴﾗｰｺｰﾄﾞ
CON
DW #1 DM310              ; 検査ｴﾗｰ記憶
CON
SET MR301                ; NGﾌﾗｸﾞ
CON
SET MR304                ; ｴﾗｰﾌﾗｸﾞ
CON
RES MR306                ; 検査NG
CON
ENDS
;<<元圧ｴﾗｰ>>
;<<Air pressure fault>>
LD MR308                 ; 元圧ｴﾗｰ
ANB MR304                ; ｴﾗｰﾌﾗｸﾞ
SET @MR106               ; 106
STG @MR106               ; 106
DW #8 DM146              ; ｴﾗｰｺｰﾄﾞ
CON
DW #1 DM310              ; 検査ｴﾗｰ記憶
CON
SET MR301                ; NGﾌﾗｸﾞ
CON
SET MR304                ; ｴﾗｰﾌﾗｸﾞ
CON
RES MR308                ; 元圧ｴﾗｰ
CON
ENDS
;<<クランプエラー>>
;<<cramp fault>>
LD MR309                 ; ｸﾗﾝﾌﾟｴﾗｰ
ANB MR304                ; ｴﾗｰﾌﾗｸﾞ
SET @MR107               ; 107
STG @MR107               ; 107
DW #9 DM146              ; ｴﾗｰｺｰﾄﾞ
CON
DW #1 DM310              ; 検査ｴﾗｰ記憶
CON
SET MR301                ; NGﾌﾗｸﾞ
CON
SET MR304                ; ｴﾗｰﾌﾗｸﾞ
CON
RES MR309                ; ｸﾗﾝﾌﾟｴﾗｰ
CON
ENDS
;<<通信エラー>>
;<<Communication fault>>
LD MR310                 ; 通信ｴﾗｰ
ANB MR304                ; ｴﾗｰﾌﾗｸﾞ
SET @MR108               ; ｴﾗｰ処理開始 (No.3)
STG @MR108               ; ｴﾗｰ処理開始 (No.3)
DW #1 DM146              ; ｴﾗｰｺｰﾄﾞ
CON
DW #1 DM310              ; 検査ｴﾗｰ記憶
CON
SET MR301                ; NGﾌﾗｸﾞ
CON
SET MR304                ; ｴﾗｰﾌﾗｸﾞ
CON
RES MR310                ; 通信ｴﾗｰ
CON
ENDS
;<<メモリーカードエラー>>
;<<Memory card error>>
LD MR311                 ; ﾒﾓﾘｶｰﾄﾞｴﾗｰ
ANB MR304                ; ｴﾗｰﾌﾗｸﾞ
SET @MR112               ; ｴﾗｰ処理開始 (No.4)
STG @MR112               ; ｴﾗｰ処理開始 (No.4)
DW #4 DM146              ; ｴﾗｰｺｰﾄﾞ
CON
DW #1 DM310              ; 検査ｴﾗｰ記憶
CON
SET MR301                ; NGﾌﾗｸﾞ
CON
SET MR304                ; ｴﾗｰﾌﾗｸﾞ
CON
RES MR311                ; ﾒﾓﾘｶｰﾄﾞｴﾗｰ
CON
ENDS
;<<マノメーターOFF>>
;<<manometer power OFF>>
LD MR305                 ; マノメーターOFF
ANB MR304                ; ｴﾗｰﾌﾗｸﾞ
SET @MR110               ; 110
STG @MR110               ; 110
DW #10 DM146             ; ｴﾗｰｺｰﾄﾞ
CON
DW #1 DM310              ; 検査ｴﾗｰ記憶
CON
SET MR301                ; NGﾌﾗｸﾞ
CON
SET MR304                ; ｴﾗｰﾌﾗｸﾞ
CON
RES MR305                ; マノメーターOFF
CON
ENDS
LD MR300                 ; NG総合
AND<> DM146 #0           ; ｴﾗｰｺｰﾄﾞ
LDA DM146                ; ｴﾗｰｺｰﾄﾞ
CON
DECO MR31000 #4
END
ENDH
