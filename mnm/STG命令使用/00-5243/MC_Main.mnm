DEVICE:53
;MODULE:MC_Main
;MODULE_TYPE:0
;<h1/>MC20 動作許可
;[内容]
;・非常停止、優先ｴﾗｰ発生時に初期化したいﾃﾞﾊﾞｲｽを指定して下さい
;※本Taskで使用するﾛｰｶﾙﾃﾞﾊﾞｲｽなど
;※STG〜JMPにて使用しているﾃﾞﾊﾞｲｽは必須
;<h1/>MC20 制御
;<h1/>　　　MC20 動作許可
LD MR20400               ; MC20 動作可能
MC
;<h1/>　　　MC20 軸1制御　ﾎﾟｲﾝﾄ移動
LD CR2002                ; 常時ON
AND MR19907              ; ｻｰﾎﾞ動作ｲﾝﾀｰﾛｯｸ
OUT @MR000               ; ｲﾝﾀｰﾛｯｸ
LD @MR000                ; ｲﾝﾀｰﾛｯｸ
ANB MR20610              ; MC 軸1ﾎﾟｲﾝﾄ移動中
AND MR20701              ; MC 軸1 ﾎﾟｲﾝﾄ-1移動要求
SET @MR100
STG @MR100
TMR #603 #5
CON
AND T603
SET MR20610              ; MC 軸1ﾎﾟｲﾝﾄ移動中
CON
MPS
AND MR20611              ; MC 軸1移動完了
JMP @MR101
MPP
MCALL POINT_MOVE #3 #1 #1 MR20609 MR20611;MC 軸1ｱﾗｰﾑ  MC 軸1移動完了
STG @MR101
RES MR20611              ; MC 軸1移動完了
CON
ANB MR20611              ; MC 軸1移動完了
RES MR20610              ; MC 軸1ﾎﾟｲﾝﾄ移動中
CON
ENDS
LD @MR000                ; ｲﾝﾀｰﾛｯｸ
ANB MR20610              ; MC 軸1ﾎﾟｲﾝﾄ移動中
AND MR20705              ; MC 軸1 ﾎﾟｲﾝﾄ-5移動要求
SET @MR102
STG @MR102
TMR #601 #5
CON
AND T601
SET MR20610              ; MC 軸1ﾎﾟｲﾝﾄ移動中
CON
MPS
AND MR20611              ; MC 軸1移動完了
TMH #604 #5              ; ﾏｸﾛ終了安定ﾀｲﾏ
CON
AND T604                 ; ﾏｸﾛ終了安定ﾀｲﾏ
JMP @MR103
MPP
MCALL POINT_MOVE #3 #1 #5 MR20609 MR20611;MC 軸1ｱﾗｰﾑ  MC 軸1移動完了
STG @MR103
RES MR20611              ; MC 軸1移動完了
CON
ANB MR20611              ; MC 軸1移動完了
RES MR20610              ; MC 軸1ﾎﾟｲﾝﾄ移動中
CON
ENDS
LD @MR000                ; ｲﾝﾀｰﾛｯｸ
ANB MR20610              ; MC 軸1ﾎﾟｲﾝﾄ移動中
AND MR20706              ; MC 軸1 ﾎﾟｲﾝﾄ-6移動要求
SET @MR104
STG @MR104
TMR #602 #5
CON
AND T602
SET MR20610              ; MC 軸1ﾎﾟｲﾝﾄ移動中
CON
MPS
AND MR20611              ; MC 軸1移動完了
JMP @MR105
MPP
MCALL POINT_MOVE #3 #1 #6 MR20609 MR20611;MC 軸1ｱﾗｰﾑ  MC 軸1移動完了
STG @MR105
RES MR20611              ; MC 軸1移動完了
CON
ANB MR20611              ; MC 軸1移動完了
RES MR20610              ; MC 軸1ﾎﾟｲﾝﾄ移動中
CON
ENDS
LD @MR000                ; ｲﾝﾀｰﾛｯｸ
ANB MR20610              ; MC 軸1ﾎﾟｲﾝﾄ移動中
AND MR20707              ; MC 軸1 ﾎﾟｲﾝﾄ-7移動要求
SET @MR106
STG @MR106
SET MR21610
CON
MPS
AND MR20611              ; MC 軸1移動完了
JMP @MR107
MPP
MCALL POINT_MOVE #3 #1 #7 MR20609 MR20611;MC 軸1ｱﾗｰﾑ  MC 軸1移動完了
STG @MR107
RES MR20611              ; MC 軸1移動完了
CON
ANB MR20611              ; MC 軸1移動完了
RES MR20610              ; MC 軸1ﾎﾟｲﾝﾄ移動中
CON
ENDS
LD @MR000                ; ｲﾝﾀｰﾛｯｸ
ANB MR20610              ; MC 軸1ﾎﾟｲﾝﾄ移動中
AND MR20708              ; MC 軸1 ﾎﾟｲﾝﾄ-8移動要求
SET @MR108
STG @MR108
SET MR20610              ; MC 軸1ﾎﾟｲﾝﾄ移動中
CON
MPS
AND MR20611              ; MC 軸1移動完了
JMP @MR109
MPP
MCALL POINT_MOVE #3 #1 #8 MR20609 MR20611;MC 軸1ｱﾗｰﾑ  MC 軸1移動完了
STG @MR109
RES MR20611              ; MC 軸1移動完了
CON
ANB MR20611              ; MC 軸1移動完了
RES MR20610              ; MC 軸1ﾎﾟｲﾝﾄ移動中
CON
ENDS
LD @MR000                ; ｲﾝﾀｰﾛｯｸ
ANB MR20610              ; MC 軸1ﾎﾟｲﾝﾄ移動中
AND MR20709              ; MC 軸1 ﾎﾟｲﾝﾄ-9移動要求
SET @MR110
STG @MR110
SET MR20610              ; MC 軸1ﾎﾟｲﾝﾄ移動中
CON
MPS
AND MR20611              ; MC 軸1移動完了
JMP @MR111
MPP
MCALL POINT_MOVE #3 #1 #9 MR20609 MR20611;MC 軸1ｱﾗｰﾑ  MC 軸1移動完了
STG @MR111
RES MR20611              ; MC 軸1移動完了
CON
ANB MR20611              ; MC 軸1移動完了
RES MR20610              ; MC 軸1ﾎﾟｲﾝﾄ移動中
CON
ENDS
MCR
END
ENDH
