DEVICE:52
;MODULE:Axis_MAIN
;MODULE_TYPE:0
;SCRIPT_TYPE:
;***** 位置決めMAIN *****
;
;※ 注意:軸を動かせる範囲は、
;   ﾕﾆｯﾄ01(KV-MC40V:4軸)
;   4軸 15ﾎﾟｲﾝﾄ。
;   
;///// 位置決めﾕﾆｯﾄ制御 /////
;----- 位置決めﾕﾆｯﾄ動作許可 -----
LD R55000                ; 即停止/TRAP無
OUT MR53000              ; ﾕﾆｯﾄ01 動作許可
;----- 位置決めﾕﾆｯﾄ01実装軸指定 -----
LD CR2002                ; 常時ON
OUT MR53008              ; ﾕﾆｯﾄ01 軸1 有り
OUT MR53009              ; ﾕﾆｯﾄ01 軸2 有り
OUT MR53010              ; ﾕﾆｯﾄ01 軸3 有り
OUT MR53011              ; ﾕﾆｯﾄ01 軸4 有り
;----- 位置決めﾕﾆｯﾄﾌﾗｯｼｭROM書込 -----
LD R55000                ; 即停止/TRAP無
ANB MR53502              ; ﾕﾆｯﾄ01 ROM書込中
ANB MR53503              ; ﾕﾆｯﾄ01 ROM書込完了
ANB MR51110              ; 軸1BUSY
ANB MR51310              ; 軸2BUSY
ANB MR51510              ; 軸3BUSY
ANB MR51710              ; 軸4BUSY
AND CR2003               ; 常時OFF
OUT MR53002              ; ﾕﾆｯﾄ01 ROM書込指示
;///// 位置決めﾕﾆｯﾄ01(KV-MV40V:4軸)制御 /////
;----- 位置決めﾕﾆｯﾄ動作許可 -----
LD MR53500               ; ﾕﾆｯﾄ01 動作可能
MC
;/// 位置決めﾕﾆｯﾄ01 軸1制御 ///
;----- 軸1:ｻｰﾎﾞON -----
LD MR10000               ; 転写ﾍｯﾄﾞ_ｻｰﾎﾞON
OUT MR50107              ; 軸1ｻｰﾎﾞON
;----- 軸1:ｴﾗｰﾘｾｯﾄ -----
LD MR10001               ; 転写ﾍｯﾄﾞ_ｴﾗｰｸﾘｱ
LD MR51113               ; 軸1ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
OR MR51114               ; 軸1ﾜｰﾆﾝｸﾞ検出
OR MR51115               ; 軸1ｴﾗｰ検出
LD R50014                ; 異常発生ｱﾗｰﾑﾘｾｯﾄ_SW_ON
ORP MR52000              ; 軸1CWﾘﾐｯﾄ信号
ORP MR52001              ; 軸1CCWﾘﾐｯﾄ信号
ORF MR50114              ; 軸1減速停止
ANL
ORL
OUT MR50115              ; 軸1ｴﾗｰﾘｾｯﾄ
;----- 軸1:停止 -----
LDB R55000               ; 即停止/TRAP無
OR MR10002               ; 転写ﾍｯﾄﾞ_停止
LD CR2003                ; 常時OFF
AND MR51110              ; 軸1BUSY
ORL
OUT MR50114              ; 軸1減速停止
LD T2470                 ; 軸1ｲﾝﾀｰﾊﾞﾙ
ANB MR50114              ; 軸1減速停止
TMR #2480 #5             ; 軸1Pause復帰時間
;----- 軸1:JOG動作 -----
LD MR10003               ; 転写ﾍｯﾄﾞ_JOG高速
OUT MR50111              ; 軸1JOG速度切替 Hi
LDB MR50114              ; 軸1減速停止
LD R50007                ; 手動制御中
OR CR2002                ; 常時ON
ANL
MPS
LD MR10004               ; 転写ﾍｯﾄﾞ_JOG+_IL
AND MR10006              ; 転写ﾍｯﾄﾞ_JOG+
ANL
OUT MR50112              ; 軸1+JOG
MPP
LD MR10005               ; 転写ﾍｯﾄﾞ_JOG-_IL
AND MR10007              ; 転写ﾍｯﾄﾞ_JOG-
ANL
OUT MR50113              ; 軸1-JOG
;----- 軸1:原点復帰 -----
LD CR2003                ; 常時OFF
ANB CR2003               ; 常時OFF
LDP CR2003               ; 常時OFF
AND MR10100              ; 転写ﾍｯﾄﾞ_原点復帰_IL
AND LR201                ; 手動ﾓｰﾄﾞ選択
ORL
ANB MR50114              ; 軸1減速停止
ANB MR51110              ; 軸1BUSY
ANB MR51113              ; 軸1ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
ANB MR51115              ; 軸1ｴﾗｰ検出
OUT MR50108              ; 軸1原点復帰指令
;----- 軸1:Po.1起動 -----
LD MR11001               ; 転写ﾍｯﾄﾞ_待機位置移動
ANB MR12001              ; 転写ﾍｯﾄﾞ_待機位置
LD T2480                 ; 軸1Pause復帰時間
OR MR50001               ; 軸1ﾎﾟｲﾝﾄ01移動指令
ANL
LDP CR2003               ; 常時OFF
AND MR10101              ; 転写ﾍｯﾄﾞ_待機位置_IL
AND LR201                ; 手動ﾓｰﾄﾞ選択
ORL
AND MR51109              ; 軸1原点復帰完了記憶
ANB MR50114              ; 軸1減速停止
ANB MR51110              ; 軸1BUSY
ANB MR51113              ; 軸1ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
ANB MR51115              ; 軸1ｴﾗｰ検出
OUT MR50001              ; 軸1ﾎﾟｲﾝﾄ01移動指令
;'転写ﾍｯﾄﾞ_待機位置絶対移動
;'加減速時間[ms]
;EM30004.D=100
;EM30006.D=100
LD CR2002                ; 常時ON
NCJ #1006
;'転写ﾍｯﾄﾞ_待機位置絶対移動
;
;'加減速時間[ms]
;
;EM30004.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30004       ; 軸1 Po.1加速度
;EM30006.D=100
LD CR2002                ; 常時ON
MOV.D #100 EM30006       ; 軸1 Po.1減速度
LABEL #1006
;
;----- 軸1:Po.2起動 -----
LD MR11002               ; 転写ﾍｯﾄﾞ_たるみ位置移動
ANB MR12002              ; 転写ﾍｯﾄﾞ_たるみ位置
LD T2480                 ; 軸1Pause復帰時間
OR MR50002               ; 軸1ﾎﾟｲﾝﾄ02移動指令
ANL
LDP CR2003               ; 常時OFF
AND MR10102              ; 転写ﾍｯﾄﾞ_たるみ位置_IL
AND LR201                ; 手動ﾓｰﾄﾞ選択
ORL
AND MR51109              ; 軸1原点復帰完了記憶
ANB MR50114              ; 軸1減速停止
ANB MR51110              ; 軸1BUSY
ANB MR51113              ; 軸1ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
ANB MR51115              ; 軸1ｴﾗｰ検出
OUT MR50002              ; 軸1ﾎﾟｲﾝﾄ02移動指令
;'転写ﾍｯﾄﾞ_たるみ位置絶対移動
;'加減速時間[ms]
;EM30014.D=100
;EM30016.D=100
LD CR2002                ; 常時ON
NCJ #1005
;'転写ﾍｯﾄﾞ_たるみ位置絶対移動
;
;'加減速時間[ms]
;
;EM30014.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30014       ; 軸1 Po.2加速度
;EM30016.D=100
LD CR2002                ; 常時ON
MOV.D #100 EM30016       ; 軸1 Po.2減速度
LABEL #1005
;
;----- 軸1:Po.3起動 -----
LD MR11003               ; 転写ﾍｯﾄﾞ_剥離位置移動
ANB MR12003              ; 転写ﾍｯﾄﾞ_剥離位置
LD T2480                 ; 軸1Pause復帰時間
OR MR50003               ; 軸1ﾎﾟｲﾝﾄ03移動指令
ANL
LDP CR2003               ; 常時OFF
AND MR10103              ; 転写ﾍｯﾄﾞ_剥離位置_IL
AND LR201                ; 手動ﾓｰﾄﾞ選択
ORL
AND MR51109              ; 軸1原点復帰完了記憶
ANB MR50114              ; 軸1減速停止
ANB MR51110              ; 軸1BUSY
ANB MR51113              ; 軸1ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
ANB MR51115              ; 軸1ｴﾗｰ検出
OUT MR50003              ; 軸1ﾎﾟｲﾝﾄ03移動指令
;'転写ﾍｯﾄﾞ_剥離位置絶対移動
;'加減速時間[ms]
;EM30024.D=100
;EM30026.D=100
LD CR2002                ; 常時ON
NCJ #1004
;'転写ﾍｯﾄﾞ_剥離位置絶対移動
;
;'加減速時間[ms]
;
;EM30024.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30024       ; 軸1 Po.3加速度
;EM30026.D=100
LD CR2002                ; 常時ON
MOV.D #100 EM30026       ; 軸1 Po.3減速度
LABEL #1004
;
;----- 軸1:Po.4起動 -----
LD MR11004               ; 転写ﾍｯﾄﾞ_転写開始位置移動
ANB MR12004              ; 転写ﾍｯﾄﾞ_転写開始位置
LD T2480                 ; 軸1Pause復帰時間
OR MR50004               ; 軸1ﾎﾟｲﾝﾄ04移動指令
ANL
LDP CR2003               ; 常時OFF
AND MR10104              ; 転写ﾍｯﾄﾞ_転写開始位置_IL
AND LR201                ; 手動ﾓｰﾄﾞ選択
ORL
AND MR51109              ; 軸1原点復帰完了記憶
ANB MR50114              ; 軸1減速停止
ANB MR51110              ; 軸1BUSY
ANB MR51113              ; 軸1ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
ANB MR51115              ; 軸1ｴﾗｰ検出
OUT MR50004              ; 軸1ﾎﾟｲﾝﾄ04移動指令
;'転写ﾍｯﾄﾞ_転写開始位置絶対移動
;'加減速時間[ms]
;EM30034.D=100
;EM30036.D=100
LD CR2002                ; 常時ON
NCJ #1003
;'転写ﾍｯﾄﾞ_転写開始位置絶対移動
;
;'加減速時間[ms]
;
;EM30034.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30034       ; 軸1 Po.4加速度
;EM30036.D=100
LD CR2002                ; 常時ON
MOV.D #100 EM30036       ; 軸1 Po.4減速度
LABEL #1003
;
;----- 軸1:Po.5起動 -----
LD MR11005               ; 転写ﾍｯﾄﾞ_転写終了位置移動
ANB MR12005              ; 転写ﾍｯﾄﾞ_転写終了位置
LD T2480                 ; 軸1Pause復帰時間
OR MR50005               ; 軸1ﾎﾟｲﾝﾄ05移動指令
ANL
LDP CR2003               ; 常時OFF
AND MR10105              ; 転写ﾍｯﾄﾞ_転写終了位置_IL
AND LR201                ; 手動ﾓｰﾄﾞ選択
ORL
AND MR51109              ; 軸1原点復帰完了記憶
ANB MR50114              ; 軸1減速停止
ANB MR51110              ; 軸1BUSY
ANB MR51113              ; 軸1ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
ANB MR51115              ; 軸1ｴﾗｰ検出
OUT MR50005              ; 軸1ﾎﾟｲﾝﾄ05移動指令
;'転写ﾍｯﾄﾞ_転写終了位置絶対移動
;'加減速時間[ms]
;EM30044.D=100
;EM30046.D=100
LD CR2002                ; 常時ON
NCJ #1001
;'転写ﾍｯﾄﾞ_転写終了位置絶対移動
;
;'加減速時間[ms]
;
;EM30044.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30044       ; 軸1 Po.5加速度
;EM30046.D=100
LD CR2002                ; 常時ON
MOV.D #100 EM30046       ; 軸1 Po.5減速度
LABEL #1001
;
;----- 軸1:Po.10起動 -----
LD MR11010               ; 転写ﾍｯﾄﾞ/主軸ﾛｰﾗ待機位置移動
ANB MR12010              ; 転写ﾍｯﾄﾞ/主軸ﾛｰﾗ待機位置
LD T2480                 ; 軸1Pause復帰時間
OR MR50010               ; 軸1ﾎﾟｲﾝﾄ10移動指令
ANL
LDP CR2003               ; 常時OFF
AND MR10110
AND LR201                ; 手動ﾓｰﾄﾞ選択
ORL
AND MR51109              ; 軸1原点復帰完了記憶
ANB MR50114              ; 軸1減速停止
ANB MR51110              ; 軸1BUSY
ANB MR51113              ; 軸1ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
ANB MR51115              ; 軸1ｴﾗｰ検出
OUT MR50010              ; 軸1ﾎﾟｲﾝﾄ10移動指令
;'転写ﾍｯﾄﾞ/主軸ﾛｰﾗ_剥離位置→待機位置絶対補間移動
;'転写ﾍｯﾄﾞ
;'加減速時間[ms]
;EM30094.D=100
;EM30096.D=100
;'移動速度[μm/s]
;EM30090.D=EM30000.D
;'絶対移動位置[μm]
;EM30092.L=EM30002.L
;'主軸ﾛｰﾗ
;'加減速時間[ms]
;EM30494.D=100
;EM30496.D=100
;'移動速度[μm/s]
;EM30490.D=EM30000.D
;'絶対移動位置[μm]
;EM30492.L=NEG(EM30002.L-EM30022.L)
LDP MR11010              ; 転写ﾍｯﾄﾞ/主軸ﾛｰﾗ待機位置移動
NCJ #1014
;'転写ﾍｯﾄﾞ/主軸ﾛｰﾗ_剥離位置→待機位置絶対補間移動
;
;'転写ﾍｯﾄﾞ
;
;'加減速時間[ms]
;
;EM30094.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30094       ; 軸1 Po.10加速度
;EM30096.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30096       ; 軸1 Po.10減速度
;'移動速度[μm/s]
;
;EM30090.D=EM30000.D
;
LD CR2002                ; 常時ON
MOV.D EM30000 EM30090    ; 軸1 Po.1速度  軸1 Po.10速度
;'絶対移動位置[μm]
;
;EM30092.L=EM30002.L
;
LD CR2002                ; 常時ON
MOV.L EM30002 EM30092    ; 軸1 Po.1移動量  軸1 Po.10移動量
;'主軸ﾛｰﾗ
;
;'加減速時間[ms]
;
;EM30494.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30494       ; 軸3 Po.10加速度
;EM30496.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30496       ; 軸3 Po.10減速度
;'移動速度[μm/s]
;
;EM30490.D=EM30000.D
;
LD CR2002                ; 常時ON
MOV.D EM30000 EM30490    ; 軸1 Po.1速度  軸3 Po.10速度
;'絶対移動位置[μm]
;
;EM30492.L=NEG(EM30002.L-EM30022.L)
LD CR2002                ; 常時ON
LDA.L EM30002            ; 軸1 Po.1移動量
CON
SUB.L EM30022            ; 軸1 Po.3移動量
CON
NEG.L
CON
STA.L EM30492            ; 軸3 Po.10移動量
LABEL #1014
;
;----- 軸1:Po.12起動 -----
LD MR11012               ; 転写ﾍｯﾄﾞ/主軸ﾛｰﾗ転写終了位置移動
ANB MR12012              ; 転写ﾍｯﾄﾞ/主軸ﾛｰﾗ転写終了位置
LD T2480                 ; 軸1Pause復帰時間
OR MR50012               ; 軸1ﾎﾟｲﾝﾄ12移動指令
ANL
LDP CR2003               ; 常時OFF
AND MR10112              ; 転写ﾍｯﾄﾞ/主軸ﾛｰﾗ転写終了位置_IL
AND LR201                ; 手動ﾓｰﾄﾞ選択
ORL
AND MR51109              ; 軸1原点復帰完了記憶
ANB MR50114              ; 軸1減速停止
ANB MR51110              ; 軸1BUSY
ANB MR51113              ; 軸1ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
ANB MR51115              ; 軸1ｴﾗｰ検出
OUT MR50012              ; 軸1ﾎﾟｲﾝﾄ12移動指令
;'転写ﾍｯﾄﾞ/主軸ﾛｰﾗ_転写終了位置絶対補間移動
;'転写ﾍｯﾄﾞ
;'加減速時間[ms]
;EM30114.D=100
;EM30116.D=100
;'移動速度[μm/s]
;EM30110.D=EM30040.D
;'絶対移動位置[μm]
;EM30112.L=EM30042.L
;'主軸ﾛｰﾗ
;'加減速時間[ms]
;EM30514.D=100
;EM30516.D=100
;'移動速度[μm/s]
;EM30510.D=EM30040.D
;'絶対移動位置[μm]
;EM30512.L=EM30412.L+(EM30042.L-EM30032.L)
LDP MR11012              ; 転写ﾍｯﾄﾞ/主軸ﾛｰﾗ転写終了位置移動
NCJ #1011
;'転写ﾍｯﾄﾞ/主軸ﾛｰﾗ_転写終了位置絶対補間移動
;
;'転写ﾍｯﾄﾞ
;
;'加減速時間[ms]
;
;EM30114.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30114       ; 軸1 Po.12加速度
;EM30116.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30116       ; 軸1 Po.12減速度
;'移動速度[μm/s]
;
;EM30110.D=EM30040.D
;
LD CR2002                ; 常時ON
MOV.D EM30040 EM30110    ; 軸1 Po.5速度  軸1 Po.12速度
;'絶対移動位置[μm]
;
;EM30112.L=EM30042.L
;
LD CR2002                ; 常時ON
MOV.L EM30042 EM30112    ; 軸1 Po.5移動量  軸1 Po.12移動量
;'主軸ﾛｰﾗ
;
;'加減速時間[ms]
;
;EM30514.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30514       ; 軸3 Po.12加速度
;EM30516.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30516       ; 軸3 Po.12減速度
;'移動速度[μm/s]
;
;EM30510.D=EM30040.D
;
LD CR2002                ; 常時ON
MOV.D EM30040 EM30510    ; 軸1 Po.5速度  軸3 Po.12速度
;'絶対移動位置[μm]
;
;EM30512.L=EM30412.L+(EM30042.L-EM30032.L)
LD CR2002                ; 常時ON
LDA.L EM30042            ; 軸1 Po.5移動量
CON
SUB.L EM30032            ; 軸1 Po.4移動量
CON
ADD.L EM30412            ; 軸3 Po.2移動量
CON
STA.L EM30512            ; 軸3 Po.12移動量
LABEL #1011
;
;/// 位置決めﾕﾆｯﾄ01 軸2制御 ///
;----- 軸2:ｻｰﾎﾞON -----
LD MR10200               ; ﾌｨﾙﾑ送り_ｻｰﾎﾞON
OUT MR50307              ; 軸2ｻｰﾎﾞON
;----- 軸2:ｴﾗｰﾘｾｯﾄ -----
LD MR10201               ; ﾌｨﾙﾑ送り_ｴﾗｰｸﾘｱ
LD MR51313               ; 軸2ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
OR MR51314               ; 軸2ﾜｰﾆﾝｸﾞ検出
OR MR51315               ; 軸2ｴﾗｰ検出
LD R50014                ; 異常発生ｱﾗｰﾑﾘｾｯﾄ_SW_ON
ORP MR52100              ; 軸2CWﾘﾐｯﾄ信号
ORP MR52101              ; 軸2CCWﾘﾐｯﾄ信号
ORF MR50314              ; 軸2減速停止
ANL
ORL
OUT MR50315              ; 軸2ｴﾗｰﾘｾｯﾄ
;----- 軸2:停止 -----
LDB R55000               ; 即停止/TRAP無
OR MR10202               ; ﾌｨﾙﾑ送り_停止
LD CR2003                ; 常時OFF
AND MR51310              ; 軸2BUSY
ORL
OUT MR50314              ; 軸2減速停止
LD T2471                 ; 軸2ｲﾝﾀｰﾊﾞﾙ
ANB MR50314              ; 軸2減速停止
TMR #2481 #5             ; 軸2Pause復帰時間
;----- 軸2:JOG動作 -----
LD MR10203               ; ﾌｨﾙﾑ送り_JOG高速
OUT MR50311              ; 軸2JOG速度切替 Hi
LDB MR50314              ; 軸2減速停止
AND R50007               ; 手動制御中
MPS
LD MR10204               ; ﾌｨﾙﾑ送り_JOG+_IL
AND MR10206              ; ﾌｨﾙﾑ送り_JOG+
ANL
OUT MR50312              ; 軸2+JOG
MPP
LD MR10205               ; ﾌｨﾙﾑ送り_JOG-_IL
AND MR10207              ; ﾌｨﾙﾑ送り_JOG-
ANL
OUT MR50313              ; 軸2-JOG
;----- 軸2:原点復帰 -----
LD CR2003                ; 常時OFF
ANB CR2003               ; 常時OFF
LDP CR2003               ; 常時OFF
AND MR10300              ; ﾌｨﾙﾑ送り_原点復帰_IL
AND LR201                ; 手動ﾓｰﾄﾞ選択
ORL
ANB MR50314              ; 軸2減速停止
ANB MR51310              ; 軸2BUSY
ANB MR51313              ; 軸2ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
ANB MR51315              ; 軸2ｴﾗｰ検出
OUT MR50308              ; 軸2原点復帰指令
;----- 軸2:Po.1起動 -----
LD MR11101               ; ﾌｨﾙﾑ送り_待機位置移動
ANB MR12101              ; ﾌｨﾙﾑ送り_待機位置
LD T2481                 ; 軸2Pause復帰時間
OR MR50201               ; 軸2ﾎﾟｲﾝﾄ01移動指令
ANL
LDP CR2003               ; 常時OFF
AND MR10301              ; ﾌｨﾙﾑ送り_待機位置_IL
AND LR201                ; 手動ﾓｰﾄﾞ選択
ORL
AND MR51309              ; 軸2原点復帰完了記憶
ANB MR50314              ; 軸2減速停止
ANB MR51310              ; 軸2BUSY
ANB MR51313              ; 軸2ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
ANB MR51315              ; 軸2ｴﾗｰ検出
OUT MR50201              ; 軸2ﾎﾟｲﾝﾄ01移動指令
;'ﾌｨﾙﾑ送り_待機位置絶対移動
;'加減速時間[ms]
;EM30204.D=100
;EM30206.D=100
LD CR2002                ; 常時ON
NCJ #1008
;'ﾌｨﾙﾑ送り_待機位置絶対移動
;
;'加減速時間[ms]
;
;EM30204.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30204       ; 軸2 Po.1加速度
;EM30206.D=100
LD CR2002                ; 常時ON
MOV.D #100 EM30206       ; 軸2 Po.1減速度
LABEL #1008
;
;----- 軸2:Po.2起動 -----
LD MR11102               ; ﾌｨﾙﾑ送り_ﾋﾟｯﾁ送り位置移動
ANB MR12102              ; ﾌｨﾙﾑ送り_ﾋﾟｯﾁ送り位置
LD T2481                 ; 軸2Pause復帰時間
OR MR50202               ; 軸2ﾎﾟｲﾝﾄ02移動指令
ANL
LDP CR2003               ; 常時OFF
AND MR10302              ; ﾌｨﾙﾑ送り_ﾋﾟｯﾁ送り位置_IL
AND LR201                ; 手動ﾓｰﾄﾞ選択
ORL
AND MR51309              ; 軸2原点復帰完了記憶
ANB MR50314              ; 軸2減速停止
ANB MR51310              ; 軸2BUSY
ANB MR51313              ; 軸2ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
ANB MR51315              ; 軸2ｴﾗｰ検出
OUT MR50202              ; 軸2ﾎﾟｲﾝﾄ02移動指令
;'ﾌｨﾙﾑ送り_ﾋﾟｯﾁ送り位置絶対移動
;'加減速時間[ms]
;EM30214.D=100
;EM30216.D=100
LD CR2002                ; 常時ON
NCJ #1009
;'ﾌｨﾙﾑ送り_ﾋﾟｯﾁ送り位置絶対移動
;
;'加減速時間[ms]
;
;EM30214.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30214       ; 軸2 Po.2加速度
;EM30216.D=100
LD CR2002                ; 常時ON
MOV.D #100 EM30216       ; 軸2 Po.2減速度
LABEL #1009
;
;----- 軸2:Po.13起動 -----
LD MR11113               ; ﾌｨﾙﾑ送り/主軸ﾛｰﾗﾋﾟｯﾁ送り位置移動
ANB MR12113              ; ﾌｨﾙﾑ送り/主軸ﾛｰﾗﾋﾟｯﾁ送り位置
LD T2481                 ; 軸2Pause復帰時間
OR MR50213               ; 軸2ﾎﾟｲﾝﾄ13移動指令
ANL
LDP CR2003               ; 常時OFF
AND MR10313              ; ﾌｨﾙﾑ送り/主軸ﾛｰﾗﾋﾟｯﾁ送り位置_IL
AND LR201                ; 手動ﾓｰﾄﾞ選択
ORL
AND MR51309              ; 軸2原点復帰完了記憶
ANB MR50314              ; 軸2減速停止
ANB MR51310              ; 軸2BUSY
ANB MR51313              ; 軸2ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
ANB MR51315              ; 軸2ｴﾗｰ検出
OUT MR50213              ; 軸2ﾎﾟｲﾝﾄ13移動指令
;'ﾌｨﾙﾑ送り/主軸ﾛｰﾗ_ﾋﾟｯﾁ送り位置絶対補間移動
;'ﾌｨﾙﾑ送り
;'加減速時間[ms]
;EM30324.D=100
;EM30326.D=100
;'移動速度[μm/s]
;EM30320.D=EM30210.D
;'絶対移動位置[μm]
;EM30322.L=EM30212.L
;'主軸ﾛｰﾗ
;'加減速時間[ms]
;EM30524.D=100
;EM30526.D=100
;'移動速度[μm/s]
;EM30520.D=EM30210.D
;'絶対移動位置[μm]
;EM30522.L=EM32620.L+(EM30202.L-EM30212.L)
LDP MR11113              ; ﾌｨﾙﾑ送り/主軸ﾛｰﾗﾋﾟｯﾁ送り位置移動
NCJ #1012
;'ﾌｨﾙﾑ送り/主軸ﾛｰﾗ_ﾋﾟｯﾁ送り位置絶対補間移動
;
;'ﾌｨﾙﾑ送り
;
;'加減速時間[ms]
;
;EM30324.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30324       ; 軸2 Po.13加速度
;EM30326.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30326       ; 軸2 Po.13減速度
;'移動速度[μm/s]
;
;EM30320.D=EM30210.D
;
LD CR2002                ; 常時ON
MOV.D EM30210 EM30320    ; 軸2 Po.2速度  軸2 Po.13速度
;'絶対移動位置[μm]
;
;EM30322.L=EM30212.L
;
LD CR2002                ; 常時ON
MOV.L EM30212 EM30322    ; 軸2 Po.2移動量  軸2 Po.13移動量
;'主軸ﾛｰﾗ
;
;'加減速時間[ms]
;
;EM30524.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30524       ; 軸3 Po.13加速度
;EM30526.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30526       ; 軸3 Po.13減速度
;'移動速度[μm/s]
;
;EM30520.D=EM30210.D
;
LD CR2002                ; 常時ON
MOV.D EM30210 EM30520    ; 軸2 Po.2速度  軸3 Po.13速度
;'絶対移動位置[μm]
;
;EM30522.L=EM32620.L+(EM30202.L-EM30212.L)
LD CR2002                ; 常時ON
LDA.L EM30202            ; 軸2 Po.1移動量
CON
SUB.L EM30212            ; 軸2 Po.2移動量
CON
ADD.L EM32620            ; 軸3現在位置
CON
STA.L EM30522            ; 軸3 Po.13移動量
LABEL #1012
;
;/// 位置決めﾕﾆｯﾄ01 軸3制御 ///
;----- 軸3:ｻｰﾎﾞON -----
LD MR10400               ; 主軸ﾛｰﾗ_ｻｰﾎﾞON
OUT MR50507              ; 軸3ｻｰﾎﾞON
;----- 軸3:ｴﾗｰﾘｾｯﾄ -----
LD MR10401               ; 主軸ﾛｰﾗ_ｴﾗｰｸﾘｱ
LD MR51513               ; 軸3ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
OR MR51514               ; 軸3ﾜｰﾆﾝｸﾞ検出
OR MR51515               ; 軸3ｴﾗｰ検出
LD R50014                ; 異常発生ｱﾗｰﾑﾘｾｯﾄ_SW_ON
ORP MR52200              ; 軸3CWﾘﾐｯﾄ信号
ORP MR52201              ; 軸3CCWﾘﾐｯﾄ信号
ORF MR50514              ; 軸3減速停止
ANL
ORL
OUT MR50515              ; 軸3ｴﾗｰﾘｾｯﾄ
;----- 軸3:停止 -----
LDB R55000               ; 即停止/TRAP無
OR MR10402               ; 主軸ﾛｰﾗ_停止
LD CR2003                ; 常時OFF
AND MR51510              ; 軸3BUSY
ORL
OUT MR50514              ; 軸3減速停止
LD T2472                 ; 軸3ｲﾝﾀｰﾊﾞﾙ
ANB MR50514              ; 軸3減速停止
TMR #2482 #5             ; 軸3Pause復帰時間
;----- 軸3:JOG動作 -----
LD MR10403               ; 主軸ﾛｰﾗ_JOG高速
OUT MR50511              ; 軸3JOG速度切替 Hi
LDB MR50514              ; 軸3減速停止
LD R50007                ; 手動制御中
OR CR2002                ; 常時ON
ANL
MPS
LD MR10404               ; 主軸ﾛｰﾗ_JOG+_IL
AND MR10406              ; 主軸ﾛｰﾗ_JOG+
ANL
OUT MR50512              ; 軸3+JOG
MPP
LD MR10405               ; 主軸ﾛｰﾗ_JOG-_IL
AND MR10407              ; 主軸ﾛｰﾗ_JOG-
ANL
OUT MR50513              ; 軸3-JOG
;----- 軸3:原点復帰 -----
LD CR2003                ; 常時OFF
ANB CR2003               ; 常時OFF
LDP CR2003               ; 常時OFF
AND MR10500              ; 主軸ﾛｰﾗ_原点復帰_IL
AND LR201                ; 手動ﾓｰﾄﾞ選択
ORL
ANB MR50514              ; 軸3減速停止
ANB MR51510              ; 軸3BUSY
ANB MR51513              ; 軸3ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
ANB MR51515              ; 軸3ｴﾗｰ検出
OUT MR50508              ; 軸3原点復帰指令
;----- 軸3:Po.1起動 -----
LD MR11201               ; 主軸ﾛｰﾗ_ﾌｨﾙﾑ送り_ｴｰｼﾞﾝｸﾞ位置移動
ANB MR12201              ; 主軸ﾛｰﾗ_ﾌｨﾙﾑ送り_ｴｰｼﾞﾝｸﾞ位置
LD T2482                 ; 軸3Pause復帰時間
OR MR50401               ; 軸3ﾎﾟｲﾝﾄ01移動指令
ANL
LDP CR2003               ; 常時OFF
AND MR10501              ; 主軸ﾛｰﾗ_ﾌｨﾙﾑ送り_ｴｰｼﾞﾝｸﾞ位置_IL
AND LR201                ; 手動ﾓｰﾄﾞ選択
ORL
AND MR51509              ; 軸3原点復帰完了記憶
ANB MR50514              ; 軸3減速停止
ANB MR51510              ; 軸3BUSY
ANB MR51513              ; 軸3ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
ANB MR51515              ; 軸3ｴﾗｰ検出
OUT MR50401              ; 軸3ﾎﾟｲﾝﾄ01移動指令
;'主軸ﾛｰﾗ_ﾌｨﾙﾑ送り_ｴｰｼﾞﾝｸﾞ位置絶対移動
;'加減速時間[ms]
;EM30404.D=100
;EM30406.D=100
LD CR2002                ; 常時ON
NCJ #1019
;'主軸ﾛｰﾗ_ﾌｨﾙﾑ送り_ｴｰｼﾞﾝｸﾞ位置絶対移動
;
;'加減速時間[ms]
;
;EM30404.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30404       ; 軸3 Po.1加速度
;EM30406.D=100
LD CR2002                ; 常時ON
MOV.D #100 EM30406       ; 軸3 Po.1減速度
LABEL #1019
;
;----- 軸3:Po.2起動 -----
LD MR11202               ; 主軸ﾛｰﾗ_たるみ位置移動
ANB MR12202              ; 主軸ﾛｰﾗ_たるみ位置
LD T2482                 ; 軸3Pause復帰時間
OR MR50402               ; 軸3ﾎﾟｲﾝﾄ02移動指令
ANL
LDP CR2003               ; 常時OFF
AND MR10502              ; 主軸ﾛｰﾗ_たるみ位置_IL
AND LR201                ; 手動ﾓｰﾄﾞ選択
ORL
AND MR51509              ; 軸3原点復帰完了記憶
ANB MR50514              ; 軸3減速停止
ANB MR51510              ; 軸3BUSY
ANB MR51513              ; 軸3ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
ANB MR51515              ; 軸3ｴﾗｰ検出
OUT MR50402              ; 軸3ﾎﾟｲﾝﾄ02移動指令
;'主軸ﾛｰﾗ_たるみ位置絶対移動
;'加減速時間[ms]
;EM30414.D=100
;EM30416.D=100
LD CR2002                ; 常時ON
NCJ #1021
;'主軸ﾛｰﾗ_たるみ位置絶対移動
;
;'加減速時間[ms]
;
;EM30414.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30414       ; 軸3 Po.2加速度
;EM30416.D=100
LD CR2002                ; 常時ON
MOV.D #100 EM30416       ; 軸3 Po.2減速度
LABEL #1021
;
;----- 軸3:Po.3起動 -----
LD MR11203               ; 主軸ﾛｰﾗ_原点復帰ﾌｨﾙﾑ送り位置移動
ANB MR12203              ; 主軸ﾛｰﾗ_原点復帰ﾌｨﾙﾑ送り位置
LD T2482                 ; 軸3Pause復帰時間
OR MR50403               ; 軸3ﾎﾟｲﾝﾄ03移動指令
ANL
LDP CR2003               ; 常時OFF
AND MR10503              ; 主軸ﾛｰﾗ_原点復帰ﾌｨﾙﾑ送り位置_IL
AND LR201                ; 手動ﾓｰﾄﾞ選択
ORL
AND MR51509              ; 軸3原点復帰完了記憶
ANB MR50514              ; 軸3減速停止
ANB MR51510              ; 軸3BUSY
ANB MR51513              ; 軸3ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
ANB MR51515              ; 軸3ｴﾗｰ検出
OUT MR50403              ; 軸3ﾎﾟｲﾝﾄ03移動指令
;'主軸ﾛｰﾗ_原点復帰ﾌｨﾙﾑ送り位置絶対移動
;'加減速時間[ms]
;EM30424.D=100
;EM30426.D=100
LD CR2002                ; 常時ON
NCJ #1020
;'主軸ﾛｰﾗ_原点復帰ﾌｨﾙﾑ送り位置絶対移動
;
;'加減速時間[ms]
;
;EM30424.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30424       ; 軸3 Po.3加速度
;EM30426.D=100
LD CR2002                ; 常時ON
MOV.D #100 EM30426       ; 軸3 Po.3減速度
LABEL #1020
;
;----- 軸3:Po.4起動 -----
LD MR11204               ; 主軸ﾛｰﾗ_ﾌｨﾙﾑ巻戻位置移動
ANB MR12204              ; 主軸ﾛｰﾗ_ﾌｨﾙﾑ巻戻位置
LD T2482                 ; 軸3Pause復帰時間
OR MR50404               ; 軸3ﾎﾟｲﾝﾄ04移動指令
ANL
LDP CR2003               ; 常時OFF
AND MR10504              ; 主軸ﾛｰﾗ_ﾌｨﾙﾑ巻戻位置_IL
AND LR201                ; 手動ﾓｰﾄﾞ選択
ORL
AND MR51509              ; 軸3原点復帰完了記憶
ANB MR50514              ; 軸3減速停止
ANB MR51510              ; 軸3BUSY
ANB MR51513              ; 軸3ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
ANB MR51515              ; 軸3ｴﾗｰ検出
OUT MR50404              ; 軸3ﾎﾟｲﾝﾄ04移動指令
;'主軸ﾛｰﾗ_ﾌｨﾙﾑ巻戻位置絶対移動
;'加減速時間[ms]
;EM30434.D=100
;EM30436.D=100
LD CR2002                ; 常時ON
NCJ #1023
;'主軸ﾛｰﾗ_ﾌｨﾙﾑ巻戻位置絶対移動
;
;'加減速時間[ms]
;
;EM30434.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30434       ; 軸3 Po.4加速度
;EM30436.D=100
LD CR2002                ; 常時ON
MOV.D #100 EM30436       ; 軸3 Po.4減速度
LABEL #1023
;
;----- 軸3:Po.5起動 -----
LD MR11205               ; 主軸ﾛｰﾗ_ﾌｨﾙﾑﾋﾟｯﾁ送り位置移動
ANB MR12205              ; 主軸ﾛｰﾗ_ﾌｨﾙﾑﾋﾟｯﾁ送り位置
LD T2482                 ; 軸3Pause復帰時間
OR MR50405               ; 軸3ﾎﾟｲﾝﾄ05移動指令
ANL
LDP CR2003               ; 常時OFF
AND MR10505              ; 主軸ﾛｰﾗ_ﾌｨﾙﾑﾋﾟｯﾁ送り位置_IL
AND LR201                ; 手動ﾓｰﾄﾞ選択
ORL
AND MR51509              ; 軸3原点復帰完了記憶
ANB MR50514              ; 軸3減速停止
ANB MR51510              ; 軸3BUSY
ANB MR51513              ; 軸3ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
ANB MR51515              ; 軸3ｴﾗｰ検出
OUT MR50405              ; 軸3ﾎﾟｲﾝﾄ05移動指令
;'主軸ﾛｰﾗ_ﾌｨﾙﾑﾋﾟｯﾁ送り位置絶対移動
;'加減速時間[ms]
;EM30444.D=100
;EM30446.D=100
;'移動速度[μm/s]
;EM30440.D=EM30210.D
;'絶対移動位置[μm]
;EM30442.L=D4208.L
LD CR2002                ; 常時ON
NCJ #1025
;'主軸ﾛｰﾗ_ﾌｨﾙﾑﾋﾟｯﾁ送り位置絶対移動
;
;'加減速時間[ms]
;
;EM30444.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30444       ; 軸3 Po.5加速度
;EM30446.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30446       ; 軸3 Po.5減速度
;'移動速度[μm/s]
;
;EM30440.D=EM30210.D
;
LD CR2002                ; 常時ON
MOV.D EM30210 EM30440    ; 軸2 Po.2速度  軸3 Po.5速度
;'絶対移動位置[μm]
;
;EM30442.L=D4208.L
LD CR2002                ; 常時ON
MOV.L DM4208 EM30442     ; 軸3 Po.5移動量
LABEL #1025
;
;----- 軸3:Po.6起動 -----
LD MR11206               ; 主軸ﾛｰﾗ_Pauseﾌｨﾙﾑ送り位置移動
ANB MR12206              ; 主軸ﾛｰﾗ_Pauseﾌｨﾙﾑ送り位置
LD T2482                 ; 軸3Pause復帰時間
OR MR50406               ; 軸3ﾎﾟｲﾝﾄ06移動指令
ANL
LDP CR2003               ; 常時OFF
AND MR10506              ; 主軸ﾛｰﾗ_Pauseﾌｨﾙﾑ送り位置_IL
AND LR201                ; 手動ﾓｰﾄﾞ選択
ORL
AND MR51509              ; 軸3原点復帰完了記憶
ANB MR50514              ; 軸3減速停止
ANB MR51510              ; 軸3BUSY
ANB MR51513              ; 軸3ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
ANB MR51515              ; 軸3ｴﾗｰ検出
OUT MR50406              ; 軸3ﾎﾟｲﾝﾄ06移動指令
;'主軸ﾛｰﾗ_自動Pause処理ﾌｨﾙﾑ送り位置絶対移動
;'加減速時間[ms]
;EM30454.D=100
;EM30456.D=100
;'移動速度[μm/s]
;EM30450.D=EM30210.D
;'絶対移動位置[μm]
;EM30452.L=EM320.L
LD CR2002                ; 常時ON
NCJ #1027
;'主軸ﾛｰﾗ_自動Pause処理ﾌｨﾙﾑ送り位置絶対移動
;
;'加減速時間[ms]
;
;EM30454.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30454       ; 軸3 Po.6加速度
;EM30456.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30456       ; 軸3 Po.6減速度
;'移動速度[μm/s]
;
;EM30450.D=EM30210.D
;
LD CR2002                ; 常時ON
MOV.D EM30210 EM30450    ; 軸2 Po.2速度  軸3 Po.6速度
;'絶対移動位置[μm]
;
;EM30452.L=EM320.L
LD CR2002                ; 常時ON
MOV.L EM320 EM30452      ; ﾌｨﾙﾑ送量  軸3 Po.6移動量
LABEL #1027
;
;----- 軸3:Po.7起動 -----
LD MR11207               ; 主軸ﾛｰﾗ_最終ﾌｨﾙﾑ送り位置移動
ANB MR12207              ; 主軸ﾛｰﾗ_最終ﾌｨﾙﾑ送り位置
LD T2482                 ; 軸3Pause復帰時間
OR MR50407               ; 軸3ﾎﾟｲﾝﾄ07移動指令
ANL
LDP CR2003               ; 常時OFF
AND MR10507              ; 主軸ﾛｰﾗ_最終ﾌｨﾙﾑ送り位置移動
AND LR201                ; 手動ﾓｰﾄﾞ選択
ORL
AND MR51509              ; 軸3原点復帰完了記憶
ANB MR50514              ; 軸3減速停止
ANB MR51510              ; 軸3BUSY
ANB MR51513              ; 軸3ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
ANB MR51515              ; 軸3ｴﾗｰ検出
OUT MR50407              ; 軸3ﾎﾟｲﾝﾄ07移動指令
;'主軸ﾛｰﾗ_最終ﾌｨﾙﾑ送り位置絶対移動
;'加減速時間[ms]
;EM30464.D=100
;EM30466.D=100
LD CR2002                ; 常時ON
NCJ #1000
;'主軸ﾛｰﾗ_最終ﾌｨﾙﾑ送り位置絶対移動
;
;'加減速時間[ms]
;
;EM30464.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30464       ; 軸3 Po.7加速度
;EM30466.D=100
LD CR2002                ; 常時ON
MOV.D #100 EM30466       ; 軸3 Po.7減速度
LABEL #1000
;
;----- 軸3:Po.8起動 -----
LD MR11208               ; 主軸ﾛｰﾗ_ﾌｨﾙﾑ切断戻り位置移動
ANB MR12208              ; 主軸ﾛｰﾗ_ﾌｨﾙﾑ切断戻り位置
LD T2482                 ; 軸3Pause復帰時間
OR MR50408               ; 軸3ﾎﾟｲﾝﾄ08移動指令
ANL
LDP CR2003               ; 常時OFF
AND MR10508              ; 主軸ﾛｰﾗ_ﾌｨﾙﾑ切断戻り位置移動
AND LR201                ; 手動ﾓｰﾄﾞ選択
ORL
AND MR51509              ; 軸3原点復帰完了記憶
ANB MR50514              ; 軸3減速停止
ANB MR51510              ; 軸3BUSY
ANB MR51513              ; 軸3ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
ANB MR51515              ; 軸3ｴﾗｰ検出
OUT MR50408              ; 軸3ﾎﾟｲﾝﾄ08移動指令
;'主軸ﾛｰﾗ_ﾌｨﾙﾑ切断戻り位置移動
;'加減速時間[ms]
;EM30474.D=100
;EM30476.D=100
LD CR2002                ; 常時ON
NCJ #1002
;'主軸ﾛｰﾗ_ﾌｨﾙﾑ切断戻り位置移動
;
;'加減速時間[ms]
;
;EM30474.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30474       ; 軸3 Po.8加速度
;EM30476.D=100
LD CR2002                ; 常時ON
MOV.D #100 EM30476       ; 軸3 Po.8減速度
LABEL #1002
;
;/// 位置決めﾕﾆｯﾄ01 軸4制御 ///
;----- 軸4:ｻｰﾎﾞON -----
LD MR10600               ; ｽｸﾚｰﾊﾟ_ｻｰﾎﾞON
LDB R50006               ; 異常発生中
ANB R50300               ; Pause
ORB R50003               ; 原点復帰中
ANL
OUT MR50707              ; 軸4ｻｰﾎﾞON
;----- 軸4:ｴﾗｰﾘｾｯﾄ -----
LD MR10601               ; ｽｸﾚｰﾊﾟ_ｴﾗｰｸﾘｱ
LD MR51713               ; 軸4ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
OR MR51714               ; 軸4ﾜｰﾆﾝｸﾞ検出
OR MR51715               ; 軸4ｴﾗｰ検出
LD R50014                ; 異常発生ｱﾗｰﾑﾘｾｯﾄ_SW_ON
ORP MR52300              ; 軸4CWﾘﾐｯﾄ信号
ORP MR52301              ; 軸4CCWﾘﾐｯﾄ信号
ORF MR50714              ; 軸4減速停止
ANL
ORL
OUT MR50715              ; 軸4ｴﾗｰﾘｾｯﾄ
;----- 軸4:停止 -----
LDB R55000               ; 即停止/TRAP無
OR MR10602               ; ｽｸﾚｰﾊﾟ_停止
LD CR2003                ; 常時OFF
AND MR51710              ; 軸4BUSY
ORL
OUT MR50714              ; 軸4減速停止
LD T2473                 ; 軸4ｲﾝﾀｰﾊﾞﾙ
ANB MR50714              ; 軸4減速停止
TMR #2483 #5             ; 軸4Pause復帰時間
;----- 軸4:JOG動作 -----
LD MR10603               ; ｽｸﾚｰﾊﾟ_JOG高速
OUT MR50711              ; 軸4JOG速度切替 Hi
LDB MR50714              ; 軸4減速停止
LD R50007                ; 手動制御中
OR CR2002                ; 常時ON
ANL
MPS
LD MR10604               ; ｽｸﾚｰﾊﾟ_JOG+_IL
AND MR10606              ; ｽｸﾚｰﾊﾟ_JOG+
ANL
OUT MR50712              ; 軸4+JOG
MPP
LD MR10605               ; ｽｸﾚｰﾊﾟ_JOG-_IL
AND MR10607              ; ｽｸﾚｰﾊﾟ_JOG-
ANL
OUT MR50713              ; 軸4-JOG
;----- 軸4:原点復帰 -----
LD CR2003                ; 常時OFF
ANB CR2003               ; 常時OFF
LDP CR2003               ; 常時OFF
AND MR10700              ; ｽｸﾚｰﾊﾟ_原点復帰_IL
AND LR201                ; 手動ﾓｰﾄﾞ選択
ORL
ANB MR50714              ; 軸4減速停止
ANB MR51710              ; 軸4BUSY
ANB MR51713              ; 軸4ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
ANB MR51715              ; 軸4ｴﾗｰ検出
OUT MR50708              ; 軸4原点復帰指令
;----- 軸4:Po.1起動 -----
LD MR11301               ; ｽｸﾚｰﾊﾟ_待機位置移動
ANB MR12301              ; ｽｸﾚｰﾊﾟ_待機位置
LD T2483                 ; 軸4Pause復帰時間
OR MR50601               ; 軸4ﾎﾟｲﾝﾄ01移動指令
ANL
LDP CR2003               ; 常時OFF
AND MR10701              ; ｽｸﾚｰﾊﾟ_待機位置_IL
AND LR201                ; 手動ﾓｰﾄﾞ選択
ORL
AND MR51709              ; 軸4原点復帰完了記憶
ANB MR50714              ; 軸4減速停止
ANB MR51710              ; 軸4BUSY
ANB MR51713              ; 軸4ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
ANB MR51715              ; 軸4ｴﾗｰ検出
OUT MR50601              ; 軸4ﾎﾟｲﾝﾄ01移動指令
;'ｽｸﾚｰﾊﾟ_待機位置絶対補間移動
;'加減速時間[ms]
;EM30604.D=100
;EM30606.D=100
LD CR2002                ; 常時ON
NCJ #1013
;'ｽｸﾚｰﾊﾟ_待機位置絶対補間移動
;
;'加減速時間[ms]
;
;EM30604.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30604       ; 軸4 Po.1加速度
;EM30606.D=100
LD CR2002                ; 常時ON
MOV.D #100 EM30606       ; 軸4 Po.1減速度
LABEL #1013
;
;----- 軸4:Po.2起動 -----
LD MR11302               ; ｽｸﾚｰﾊﾟ_ｽｷｰｼﾞ動作開始位置移動
ANB MR12302              ; ｽｸﾚｰﾊﾟ_ｽｷｰｼﾞ動作開始位置
LD T2483                 ; 軸4Pause復帰時間
OR MR50602               ; 軸4ﾎﾟｲﾝﾄ02移動指令
ANL
LDP CR2003               ; 常時OFF
AND MR10702              ; ｽｸﾚｰﾊﾟ_ｽｷｰｼﾞ動作開始位置_IL
AND LR201                ; 手動ﾓｰﾄﾞ選択
ORL
AND MR51709              ; 軸4原点復帰完了記憶
ANB MR50714              ; 軸4減速停止
ANB MR51710              ; 軸4BUSY
ANB MR51713              ; 軸4ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
ANB MR51715              ; 軸4ｴﾗｰ検出
OUT MR50602              ; 軸4ﾎﾟｲﾝﾄ02移動指令
;'ｽｸﾚｰﾊﾟ_ｽｷｰｼﾞ動作終了位置絶対移動
;'加減速時間[ms]
;EM30614.D=100
;EM30616.D=100
LD CR2002                ; 常時ON
NCJ #1017
;'ｽｸﾚｰﾊﾟ_ｽｷｰｼﾞ動作終了位置絶対移動
;
;'加減速時間[ms]
;
;EM30614.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30614       ; 軸4 Po.2加速度
;EM30616.D=100
LD CR2002                ; 常時ON
MOV.D #100 EM30616       ; 軸4 Po.2減速度
LABEL #1017
;
;----- 軸4:Po.3起動 -----
LD MR11303               ; ｽｸﾚｰﾊﾟ_ｽｷｰｼﾞ動作終了位置移動
ANB MR12303              ; ｽｸﾚｰﾊﾟ_ｽｷｰｼﾞ動作終了位置
LD T2483                 ; 軸4Pause復帰時間
OR MR50603               ; 軸4ﾎﾟｲﾝﾄ03移動指令
ANL
LDP CR2003               ; 常時OFF
AND MR10703              ; ｽｸﾚｰﾊﾟ_ｽｷｰｼﾞ動作終了位置_IL
AND LR201                ; 手動ﾓｰﾄﾞ選択
ORL
AND MR51709              ; 軸4原点復帰完了記憶
ANB MR50714              ; 軸4減速停止
ANB MR51710              ; 軸4BUSY
ANB MR51713              ; 軸4ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
ANB MR51715              ; 軸4ｴﾗｰ検出
OUT MR50603              ; 軸4ﾎﾟｲﾝﾄ03移動指令
;'ｽｸﾚｰﾊﾟ_ｽｷｰｼﾞ動作終了位置絶対移動
;'加減速時間[ms]
;EM30624.D=100
;EM30626.D=100
LD CR2002                ; 常時ON
NCJ #1015
;'ｽｸﾚｰﾊﾟ_ｽｷｰｼﾞ動作終了位置絶対移動
;
;'加減速時間[ms]
;
;EM30624.D=100
;
LD CR2002                ; 常時ON
MOV.D #100 EM30624       ; 軸4 Po.3加速度
;EM30626.D=100
LD CR2002                ; 常時ON
MOV.D #100 EM30626       ; 軸4 Po.3減速度
LABEL #1015
;
MCR
END
ENDH
