DEVICE:53
;MODULE:ModelParameter
;MODULE_TYPE:0
;---------------------------------------
;ModuleName	:	ModelParameter
;ModuleType	:	Sub Module
;Function	:	RB2 初期設定ﾊﾟﾗﾒｰﾀ
;---------------------------------------
LDF R44300               ; *非常停止ｽｲｯﾁ
LDB R2003                ; 非常停止(取出機より)
ANB MR011                ; 取出機(ON=ｵﾌﾗｲﾝ/OFF=ｵﾝﾗｲﾝ
ORL
DW #0 EM50000            ; 反転EV ｼﾌﾄﾃﾞｰﾀ
LD CR2002                ; 常時ON
MPS
AND= DM400 #0            ; 反転有無切替(0=有/1=無)
SET LR10000              ; 反転有無切替(ON=有/OFF=無)
MRD
AND= DM400 #1            ; 反転有無切替(0=有/1=無)
RES LR10000              ; 反転有無切替(ON=有/OFF=無)
MRD
DW #0 DM35005            ; RB2 吸着ﾍｯﾄﾞ休止設定(1-255)
MRD
LD>= DM402 #1            ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
AND<> DM404 #0           ; RB2 ﾍｯﾄﾞ1休止設定(0=休止/1=使用)
ANL
BSET DM35005 #0          ; RB2 吸着ﾍｯﾄﾞ休止設定(1-255)
MRD
LD>= DM402 #2            ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
AND<> DM406 #0           ; RB2 ﾍｯﾄﾞ2休止設定(0=休止/1=使用)
ANL
BSET DM35005 #1          ; RB2 吸着ﾍｯﾄﾞ休止設定(1-255)
MRD
LD>= DM402 #3            ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
AND<> DM408 #0           ; RB2 ﾍｯﾄﾞ3休止設定(0=休止/1=使用)
ANL
BSET DM35005 #2          ; RB2 吸着ﾍｯﾄﾞ休止設定(1-255)
MRD
LD>= DM402 #4            ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
AND<> DM410 #0           ; RB2 ﾍｯﾄﾞ4休止設定(0=休止/1=使用)
ANL
BSET DM35005 #3          ; RB2 吸着ﾍｯﾄﾞ休止設定(1-255)
MRD
LD>= DM402 #5            ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
AND<> DM412 #0           ; RB2 ﾍｯﾄﾞ5休止設定(0=休止/1=使用)
ANL
BSET DM35005 #4          ; RB2 吸着ﾍｯﾄﾞ休止設定(1-255)
MRD
LD>= DM402 #6            ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
AND<> DM414 #0           ; RB2 ﾍｯﾄﾞ6休止設定(0=休止/1=使用)
ANL
BSET DM35005 #5          ; RB2 吸着ﾍｯﾄﾞ休止設定(1-255)
MRD
LD>= DM402 #7            ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
AND<> DM416 #0           ; RB2 ﾍｯﾄﾞ7休止設定(0=休止/1=使用)
ANL
BSET DM35005 #6          ; RB2 吸着ﾍｯﾄﾞ休止設定(1-255)
MRD
LD>= DM402 #8            ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
AND<> DM418 #0           ; RB2 ﾍｯﾄﾞ8休止設定(0=休止/1=使用)
ANL
BSET DM35005 #7          ; RB2 吸着ﾍｯﾄﾞ休止設定(1-255)
MRD
ANB LR20000              ; ｻﾝﾌﾟﾙ取動作中
LDA DM432                ; RB2 段積み最大数設定(1-255)
CON
SUB #2
CON
STA DM35021              ; RB2 段積みﾄﾚｲ最大枚数-2
MRD
AND LR20000              ; ｻﾝﾌﾟﾙ取動作中
LDA DM5038               ; _生産ｶｳﾝﾀ10
CON
SUB #2
CON
STA DM35021              ; RB2 段積みﾄﾚｲ最大枚数-2
MRD
AND<> DM402 #0           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
LDA DM426                ; RB2 ﾄﾚｲ分割数Y(1-255)
CON
MUL DM424                ; RB2 ﾄﾚｲ分割数X(1-255)
CON
EXT
CON
DIV DM402                ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
CON
LDA TM1
CON
STA DM35012              ; ﾄﾚｲ収納 不足ﾜｰｸ数
MPP
LDA DM35005              ; RB2 吸着ﾍｯﾄﾞ休止設定(1-255)
CON
BCNT
CON
CMP DM402                ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
CON
MPS
AND CR2009               ; 演算結果が負
SET LR10001              ; 吸着ﾍｯﾄﾞ休止(ON=有/OFF=無)
MPP
LD CR2010                ; 演算結果がｾﾞﾛ
OR CR2011                ; 演算結果が正
ANL
RES LR10001              ; 吸着ﾍｯﾄﾞ休止(ON=有/OFF=無)
;機種替え時のﾃﾞｰﾀ初期化
LDP R55209               ; 機種切替完了
ZRES EM50000 EM50800     ; 反転EV ｼﾌﾄﾃﾞｰﾀ  仮置台 ｼﾌﾄﾃﾞｰﾀ
CON
ZRES DM35010 DM35034     ; RB2 ﾜｰｸ収納回数  個別置き位置4
LD= DM5024 #0            ; _生産ｶｳﾝﾀ3
MEP
DW #0 DM35020            ; RB2 段積みﾄﾚｲ枚数
LD CR2002                ; 常時ON
LDA DM35020              ; RB2 段積みﾄﾚｲ枚数
CON
STA DM5024               ; _生産ｶｳﾝﾀ3
LD= DM484 #0             ; 反転ﾃｰﾌﾞﾙ 吸着破壊後待ち時間
DW #5 DM484              ; 反転ﾃｰﾌﾞﾙ 吸着破壊後待ち時間
CON
DW #5 DM4284             ; _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ
;ﾒｲﾝ画面表示
LD MR011                 ; 取出機(ON=ｵﾌﾗｲﾝ/OFF=ｵﾝﾗｲﾝ
SMOV "OFFLINE" DM50518   ; 機種項目3
LDB MR011                ; 取出機(ON=ｵﾌﾗｲﾝ/OFF=ｵﾝﾗｲﾝ
SMOV "ONLINE" DM50518    ; 機種項目3
LD= DM7018 #0            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
SMOV "通常運転" DM50527      ; 機種項目4
LD= DM7018 #1            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
SMOV "ワークなし運転" DM50527   ; 機種項目4
LD LR10001               ; 吸着ﾍｯﾄﾞ休止(ON=有/OFF=無)
SMOV "休止ヘッド有り" DM50536   ; 機種項目5
LDB LR10001              ; 吸着ﾍｯﾄﾞ休止(ON=有/OFF=無)
SMOV "休止ヘッド無し" DM50536   ; 機種項目5
;ALL CLEAR
LD MR12200               ; TPSW AllClear
ANB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND R003                 ; 操作BOX STOP SW(正面)
AND R005                 ; 操作BOX Bz OFF SW(正面)
MPS
ZRES DM35010 DM35034     ; RB2 ﾜｰｸ収納回数  個別置き位置4
CON
ZRES EM50000 EM50899     ; 反転EV ｼﾌﾄﾃﾞｰﾀ
CON
ZRES MR19000 MR19207     ; ﾜｰｸ供給要求(INDEX->RB1)
CON
RES MR2100               ; ﾜｰｸ供給要求(取出機へ)
MRD
RES LR20007              ; RB2 仮置台->ﾄﾚｲ収納Sub 補填完了
CON
RES LR100                ; _割り込みSW1　ON/OFF状態
CON
RES LR103                ; _割り込みSW4　ON/OFF状態
CON
RES LR20000              ; ｻﾝﾌﾟﾙ取動作中
MRD
ZRES MR19400 MR19401     ; 段ﾊﾞﾗｼﾘﾄﾗｲﾌﾗｸﾞ  ﾜｰｸ反転部吸着ﾘﾄﾗｲﾌﾗｸﾞ
MPP
OUT R505                 ; 操作BOX Bz
;強制OFFLINE切替
LDP MR12201              ; TPSW 強制OFFLINE切替
ANB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND R004                 ; 操作BOX PAUSE SW(正面)
AND R005                 ; 操作BOX Bz OFF SW(正面)
SET MR011                ; 取出機(ON=ｵﾌﾗｲﾝ/OFF=ｵﾝﾗｲﾝ
;検査用ｻﾝﾌﾟﾙ取動作
LD LR103                 ; _割り込みSW4　ON/OFF状態
ANB LR20000              ; ｻﾝﾌﾟﾙ取動作中
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR LR20000               ; ｻﾝﾌﾟﾙ取動作中
OUT MR19300              ; ｻﾝﾌﾟﾙ動作SW_PL
;機種切替時RB1へ初期値書込み
LDP R55209               ; 機種切替完了
MPS
LD=.D EM10000 #0         ; RB1目標値（下位）1
AND=.D EM10002 #0        ; RB1位置決め幅（下位）1
AND= EM10004 #0          ; RB1速度1
AND= EM10005 #0          ; RB1加減速1
ANL
DW.D #0 EM10000          ; RB1目標値（下位）1
CON
DW.D #0 EM10002          ; RB1位置決め幅（下位）1
CON
DW #200 EM10004          ; RB1速度1
CON
DW #3 EM10005            ; RB1加減速1
MPP
LD=.D EM10060 #0         ; RB1目標値（下位）11
AND=.D EM10062 #0        ; RB1位置決め幅（下位）11
AND= EM10064 #0          ; RB1速度11
AND= EM10065 #0          ; RB1加減速11
ANL
DW.D #40000 EM10060      ; RB1目標値（下位）11
CON
DW.D #0 EM10062          ; RB1位置決め幅（下位）11
CON
DW #200 EM10064          ; RB1速度11
CON
DW #3 EM10065            ; RB1加減速11
END
ENDH
