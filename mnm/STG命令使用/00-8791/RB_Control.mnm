DEVICE:53
;MODULE:RB_Control
;MODULE_TYPE:0
;SCRIPT_TYPE:
;
LD R50010                ; Emergency　Stop
ZRES @MR000 @MR1115      ; W_WDATA要求
;RB電源管理
LD CR2008                ; 運転開始時1ｽｷｬﾝON
OR R50010                ; Emergency　Stop
MPS
RES MR26000              ; A-RB1 電源ON
CON
RES MR26002              ; A-RB2 電源ON
CON
RES MR26100              ; A-RB3 電源ON
CON
RES MR26102              ; A-RB4 電源ON
CON
RES MR26104              ; A-RB5 電源ON
CON
RES MR26200              ; A-RB10 電源ON
CON
RES MR26202              ; A-RB11 電源ON
MPP
RES MR26300              ; A-RB6 電源ON
CON
RES MR26302              ; A-RB7 電源ON
CON
RES MR26400              ; A-RB8 電源ON
CON
RES MR26402              ; A-RB9 電源ON
LDP R50003               ; HOME
SET @MR700               ; 各RB電源ON開始
LDB R15000               ; A-RB1 電源ON
ANB R15002               ; A-RB2 電源ON
ANB R15900               ; A-RB3 電源ON
ANB R15902               ; A-RB4 電源ON
ANB R15904               ; A-RB5 電源ON
ANB R18300               ; A-RB6 電源ON
ANB R18302               ; A-RB7 電源ON
ANB R18400               ; A-RB8 電源ON
ANB R18402               ; A-RB9 電源ON
ANB R18500               ; A-RB10 電源ON
ANB R18502               ; A-RB11 電源ON
TMR @18 #80
STG @MR700               ; 各RB電源ON開始
RES MR26000              ; A-RB1 電源ON
CON
RES MR26002              ; A-RB2 電源ON
CON
RES MR26100              ; A-RB3 電源ON
CON
RES MR26102              ; A-RB4 電源ON
CON
RES MR26104              ; A-RB5 電源ON
CON
RES MR26200              ; A-RB10 電源ON
CON
RES MR26202              ; A-RB11 電源ON
CON
RES MR26300              ; A-RB6 電源ON
CON
RES MR26302              ; A-RB7 電源ON
CON
RES MR26400              ; A-RB8 電源ON
CON
RES MR26402              ; A-RB9 電源ON
CON
JMP @MR701
STG @MR701
MPS
TMR @20 #80
MPP
LD @T18
OR @T20
ANL
RES MR26301              ; A-ENB6 ｲﾈｰﾌﾞﾙ
CON
SET MR26300              ; A-RB6 電源ON
CON
JMP @MR702
STG @MR702
TMR @21 #5
CON
AND @T21
RES MR26303              ; A-ENB7 ｲﾈｰﾌﾞﾙ
CON
SET MR26302              ; A-RB7 電源ON
CON
JMP @MR703
STG @MR703
TMR @22 #5
CON
AND @T22
RES MR26401              ; A-ENB8 ｲﾈｰﾌﾞﾙ
CON
SET MR26400              ; A-RB8 電源ON
CON
JMP @MR704
STG @MR704
TMR @23 #5
CON
AND @T23
RES MR26403              ; A-ENB9 ｲﾈｰﾌﾞﾙ
CON
SET MR26402              ; A-RB9 電源ON
CON
JMP @MR705
STG @MR705
TMR @24 #5
CON
AND @T24
RES MR26101              ; A-ENB3 ｲﾈｰﾌﾞﾙ
CON
SET MR26100              ; A-RB3 電源ON
CON
JMP @MR706
STG @MR706
TMR @25 #5
CON
AND @T25
RES MR26001              ; A-ENB1 ｲﾈｰﾌﾞﾙ
CON
SET MR26000              ; A-RB1 電源ON
CON
JMP @MR707
STG @MR707
TMR @26 #5
CON
AND @T26
RES MR26003              ; A-ENB2 ｲﾈｰﾌﾞﾙ
CON
SET MR26002              ; A-RB2 電源ON
CON
JMP @MR708
STG @MR708
TMR @27 #5
CON
AND @T27
RES MR26103              ; A-ENB4 ｲﾈｰﾌﾞﾙ
CON
SET MR26102              ; A-RB4 電源ON
CON
JMP @MR709
STG @MR709
TMR @28 #5
CON
AND @T28
RES MR26105              ; A-ENB5 ｲﾈｰﾌﾞﾙ
CON
SET MR26104              ; A-RB5 電源ON
CON
JMP @MR710
STG @MR710
TMR @29 #5
CON
AND @T29
RES MR26201              ; A-ENB10 ｲﾈｰﾌﾞﾙ
CON
SET MR26200              ; A-RB10 電源ON
CON
JMP @MR711
STG @MR711
TMR @30 #5
CON
AND @T30
RES MR26203              ; A-ENB11 ｲﾈｰﾌﾞﾙ
CON
SET MR26202              ; A-RB11 電源ON
CON
ENDS
;RB3 X軸速度
LD<= DM10600 #0          ; RB3X軸速度
MOV #1 DM10600           ; RB3X軸速度
LD> DM10600 #1800        ; RB3X軸速度
MOV #1800 DM10600        ; RB3X軸速度
LD CR2002                ; 常時ON
MOV DM10600 MR16600      ; RB3X軸速度  Speed Setting(16bit)
;DEVICE NET Communication Check
BLD DM1514 #2            ; 正常通信ﾉｰﾄﾞ一覧(0-15)
BANB DM1518 #2           ; ｴﾗｰﾉｰﾄﾞ一覧(0-15)
OUT MR18015              ; RB1:DN正常通信中
BLD DM1514 #3            ; 正常通信ﾉｰﾄﾞ一覧(0-15)
BANB DM1518 #3           ; ｴﾗｰﾉｰﾄﾞ一覧(0-15)
OUT MR18215              ; RB2:DN正常通信中
BLD DM1514 #12           ; 正常通信ﾉｰﾄﾞ一覧(0-15)
BANB DM1518 #12          ; ｴﾗｰﾉｰﾄﾞ一覧(0-15)
OUT MR18415              ; RB3:DN正常通信中
BLD DM1514 #13           ; 正常通信ﾉｰﾄﾞ一覧(0-15)
BANB DM1518 #13          ; ｴﾗｰﾉｰﾄﾞ一覧(0-15)
OUT MR18615              ; RB4:DN正常通信中
BLD DM1514 #14           ; 正常通信ﾉｰﾄﾞ一覧(0-15)
BANB DM1518 #14          ; ｴﾗｰﾉｰﾄﾞ一覧(0-15)
OUT MR18815              ; RB5:DN正常通信中
BLD DM1514 #15           ; 正常通信ﾉｰﾄﾞ一覧(0-15)
BANB DM1518 #15          ; ｴﾗｰﾉｰﾄﾞ一覧(0-15)
OUT MR19500              ; RB10:DN正常通信中
BLD DM1515 #0            ; 正常通信ﾉｰﾄﾞ一覧(16-31)
BANB DM1519 #0           ; ｴﾗｰﾉｰﾄﾞ一覧(16-31)
OUT MR19501              ; RB11:DN正常通信中
BLD DM1516 #0            ; 正常通信ﾉｰﾄﾞ一覧(32-47)
BANB DM1520 #0           ; ｴﾗｰﾉｰﾄﾞ一覧(32-47)
OUT MR19115              ; RB6:DN正常通信中
BLD DM1516 #1            ; 正常通信ﾉｰﾄﾞ一覧(32-47)
BANB DM1520 #1           ; ｴﾗｰﾉｰﾄﾞ一覧(32-47)
OUT MR19315              ; RB7:DN正常通信中
;Panelより制御用ﾏｸﾛ
;再起動ﾀｲﾏ
LD MR18003               ; RB1:ﾏｸﾛ強制終了
TMR #521 #10             ; RB1ﾏｸﾛ再起動Wait
LD MR18203               ; RB2:ﾏｸﾛ強制終了
TMR #522 #10             ; RB2ﾏｸﾛ再起動Wait
LD MR18403               ; RB3:ﾏｸﾛ強制終了
TMR #523 #10             ; RB3ﾏｸﾛ再起動Wait
LD MR18603               ; RB4:ﾏｸﾛ強制終了
TMR #524 #10             ; RB4ﾏｸﾛ再起動Wait
LD MR18803               ; RB5:ﾏｸﾛ強制終了
TMR #525 #10             ; RB5ﾏｸﾛ再起動Wait
LD MR19103               ; RB6:ﾏｸﾛ強制終了
TMR #526 #10             ; RB6ﾏｸﾛ再起動Wait
LD MR19303               ; RB7:ﾏｸﾛ強制終了
TMR #527 #10             ; RB7ﾏｸﾛ再起動Wait
;各RBﾏｸﾛ / Each RB Macro
;<h1/>RB1
;<h1/>RB2
;<h1/>RB3
LD CR2002                ; 常時ON
ANB MR18403              ; RB3:ﾏｸﾛ強制終了
MSTRT IAI_XSEL R11800 MR16000 MR18400 DM13040 R50010 EM200 #100;RB3ｺﾝﾄﾛｰﾗ異常  RB3_ﾌﾟﾛｸﾞﾗﾑｽﾀｰﾄ  RB3:動作完了  RB3ResultCode  Emergency　Stop
LDB R50300               ; Pause
PMOV R12400 #0 DM13056 #0 #10;給材現在値出力1  給材ﾊﾝﾄﾞ現在値(整数)
PMOV R12500 #0 DM13057 #0 #10;除材現在値出力1  除材ﾊﾝﾄﾞ現在値(整数)
MPS
LDA DM13056              ; 給材ﾊﾝﾄﾞ現在値(整数)
CON
ADD DM13057              ; 除材ﾊﾝﾄﾞ現在値(整数)
CON
STA DM13058              ; 接近警報用
MPP
AND> DM13058 DM13059     ; 接近警報用
MOV DM13058 DM13059      ; 接近警報用
;<h1/>RB4
;<h1/>RB5
;<h1/>RB6
;<h1/>RB7
;<h1/>RB パネル制御時用 / RB Contorol from Panel
;RB定義
;EM2000 = 11	'RB数
;
;'RB TYPE 1 = CON
;'RB TYPE 2 = SEL
;'RB TYPE 4 = WELDING SEL
;
;EM2010 = 4		'RB1 RB TYPE
;EM2011 = 1		'RB1 Number of Axis
;EM2012 = 0		'RB1 Point Data ornament
;EM2013 = 0		'RB1 Spare
;EM2014 = 0		'RB1 Spare
;
;EM2015 = 4		'RB2 RB TYPE
;EM2016 = 1		'RB2 Number of Axis
;EM2017 = 100	'RB2 Point Data ornament
;EM2018 = 0		'RB2 Spare
;EM2019 = 0		'RB2 Spare
;
;EM2020 = 2		'RB3 RB TYPE
;EM2021 = 4		'RB3 Number of Axis
;EM2022 = 200	'RB3 Point Data ornament
;EM2023 = 0		'RB3 Spare
;EM2024 = 0		'RB3 Spare
;
;EM2025 = 4		'RB4 RB TYPE
;EM2026 = 2		'RB4 Number of Axis
;EM2027 = 600	'RB4 Point Data ornament
;EM2028 = 0		'RB4 Spare
;EM2029 = 0		'RB4 Spare
;
;EM2030 = 4		'RB5 RB TYPE
;EM2031 = 2		'RB5 Number of Axis
;EM2032 = 800	'RB5 Point Data ornament
;EM2033 = 0		'RB5 Spare
;EM2034 = 0		'RB5 Spare
;
;EM2035 = 1		'RB6 RB TYPE
;EM2036 = 1		'RB6 Number of Axis
;EM2037 = 1000	'RB6 Point Data ornament
;EM2038 = 0		'RB6 Spare
;EM2039 = 0		'RB6 Spare
;
;EM2040 = 1		'RB7 RB TYPE
;EM2041 = 1		'RB7 Number of Axis
;EM2042 = 1100	'RB7 Point Data ornament
;EM2043 = 0		'RB7 Spare
;EM2044 = 0 		'RB7 Spare
;
;EM2045 = 1		'RB8 RB TYPE
;EM2046 = 1		'RB8 Number of Axis
;EM2047 = 1200	'RB8 Point Data ornament
;EM2048 = 0		'RB8 Spare
;EM2049 = 0		'RB8 Spare
;
;EM2050 = 1		'RB9 RB TYPE
;EM2051 = 1		'RB9 Number of Axis
;EM2052 = 1300	'RB9 Point Data ornament
;EM2053 = 0		'RB9 Spare
;EM2054 = 0 		'RB9 Spare
;
;EM2055 = 1		'RB10 RB TYPE
;EM2056 = 1		'RB10 Number of Axis
;EM2057 = 1400	'RB10 Point Data ornament
;EM2058 = 0		'RB10 Spare
;EM2059 = 0		'RB10 Spare
;
;EM2060 = 1		'RB11 RB TYPE
;EM2061 = 1		'RB11 Number of Axis
;EM2062 = 1500	'RB11 Point Data ornament
;EM2063 = 0		'RB11 Spare
;EM2064 = 0 		'RB11 Spare
;EM2000 = 11	'RB数
;
LD CR2002                ; 常時ON
MOV #11 EM2000           ; RB数
;'RB TYPE 1 = CON
;
;'RB TYPE 2 = SEL
;
;'RB TYPE 4 = WELDING SEL
;
;EM2010 = 4		'RB1 RB TYPE
;
LD CR2002                ; 常時ON
MOV #4 EM2010            ; RB1 RBﾀｲﾌﾟ
;EM2011 = 1		'RB1 Number of Axis
;
LD CR2002                ; 常時ON
MOV #1 EM2011            ; RB1 軸数
;EM2012 = 0		'RB1 Point Data ornament
;
LD CR2002                ; 常時ON
MOV #0 EM2012            ; RB1 ﾎﾟｲﾝﾄ修飾
;EM2013 = 0		'RB1 Spare
;
LD CR2002                ; 常時ON
MOV #0 EM2013            ; RB1 予備
;EM2014 = 0		'RB1 Spare
;
LD CR2002                ; 常時ON
MOV #0 EM2014            ; RB1 予備
;EM2015 = 4		'RB2 RB TYPE
;
LD CR2002                ; 常時ON
MOV #4 EM2015            ; RB2 RBﾀｲﾌﾟ
;EM2016 = 1		'RB2 Number of Axis
;
LD CR2002                ; 常時ON
MOV #1 EM2016            ; RB2 軸数
;EM2017 = 100	'RB2 Point Data ornament
;
LD CR2002                ; 常時ON
MOV #100 EM2017          ; RB2 ﾎﾟｲﾝﾄ修飾
;EM2018 = 0		'RB2 Spare
;
LD CR2002                ; 常時ON
MOV #0 EM2018            ; RB2 予備
;EM2019 = 0		'RB2 Spare
;
LD CR2002                ; 常時ON
MOV #0 EM2019            ; RB2 予備
;EM2020 = 2		'RB3 RB TYPE
;
LD CR2002                ; 常時ON
MOV #2 EM2020            ; RB3 RBﾀｲﾌﾟ
;EM2021 = 4		'RB3 Number of Axis
;
LD CR2002                ; 常時ON
MOV #4 EM2021            ; RB3 軸数
;EM2022 = 200	'RB3 Point Data ornament
;
LD CR2002                ; 常時ON
MOV #200 EM2022          ; RB3 ﾎﾟｲﾝﾄ修飾
;EM2023 = 0		'RB3 Spare
;
LD CR2002                ; 常時ON
MOV #0 EM2023            ; RB3 予備
;EM2024 = 0		'RB3 Spare
;
LD CR2002                ; 常時ON
MOV #0 EM2024            ; RB3 予備
;EM2025 = 4		'RB4 RB TYPE
;
LD CR2002                ; 常時ON
MOV #4 EM2025            ; RB4 RBﾀｲﾌﾟ
;EM2026 = 2		'RB4 Number of Axis
;
LD CR2002                ; 常時ON
MOV #2 EM2026            ; RB4 軸数
;EM2027 = 600	'RB4 Point Data ornament
;
LD CR2002                ; 常時ON
MOV #600 EM2027          ; RB4 ﾎﾟｲﾝﾄ修飾
;EM2028 = 0		'RB4 Spare
;
LD CR2002                ; 常時ON
MOV #0 EM2028            ; RB4 予備
;EM2029 = 0		'RB4 Spare
;
LD CR2002                ; 常時ON
MOV #0 EM2029            ; RB4 予備
;EM2030 = 4		'RB5 RB TYPE
;
LD CR2002                ; 常時ON
MOV #4 EM2030            ; RB5 RBﾀｲﾌﾟ
;EM2031 = 2		'RB5 Number of Axis
;
LD CR2002                ; 常時ON
MOV #2 EM2031            ; RB5 軸数
;EM2032 = 800	'RB5 Point Data ornament
;
LD CR2002                ; 常時ON
MOV #800 EM2032          ; RB5 ﾎﾟｲﾝﾄ修飾
;EM2033 = 0		'RB5 Spare
;
LD CR2002                ; 常時ON
MOV #0 EM2033            ; RB5 予備
;EM2034 = 0		'RB5 Spare
;
LD CR2002                ; 常時ON
MOV #0 EM2034            ; RB5 予備
;EM2035 = 1		'RB6 RB TYPE
;
LD CR2002                ; 常時ON
MOV #1 EM2035            ; RB6 RBﾀｲﾌﾟ
;EM2036 = 1		'RB6 Number of Axis
;
LD CR2002                ; 常時ON
MOV #1 EM2036            ; RB6 軸数
;EM2037 = 1000	'RB6 Point Data ornament
;
LD CR2002                ; 常時ON
MOV #1000 EM2037         ; RB6 ﾎﾟｲﾝﾄ修飾
;EM2038 = 0		'RB6 Spare
;
LD CR2002                ; 常時ON
MOV #0 EM2038            ; RB6 予備
;EM2039 = 0		'RB6 Spare
;
LD CR2002                ; 常時ON
MOV #0 EM2039            ; RB6 予備
;EM2040 = 1		'RB7 RB TYPE
;
LD CR2002                ; 常時ON
MOV #1 EM2040            ; RB7 RBﾀｲﾌﾟ
;EM2041 = 1		'RB7 Number of Axis
;
LD CR2002                ; 常時ON
MOV #1 EM2041            ; RB7 軸数
;EM2042 = 1100	'RB7 Point Data ornament
;
LD CR2002                ; 常時ON
MOV #1100 EM2042         ; RB7 ﾎﾟｲﾝﾄ修飾
;EM2043 = 0		'RB7 Spare
;
LD CR2002                ; 常時ON
MOV #0 EM2043            ; RB7 予備
;EM2044 = 0 		'RB7 Spare
;
LD CR2002                ; 常時ON
MOV #0 EM2044            ; RB7 予備
;EM2045 = 1		'RB8 RB TYPE
;
LD CR2002                ; 常時ON
MOV #1 EM2045
;EM2046 = 1		'RB8 Number of Axis
;
LD CR2002                ; 常時ON
MOV #1 EM2046
;EM2047 = 1200	'RB8 Point Data ornament
;
LD CR2002                ; 常時ON
MOV #1200 EM2047
;EM2048 = 0		'RB8 Spare
;
LD CR2002                ; 常時ON
MOV #0 EM2048
;EM2049 = 0		'RB8 Spare
;
LD CR2002                ; 常時ON
MOV #0 EM2049
;EM2050 = 1		'RB9 RB TYPE
;
LD CR2002                ; 常時ON
MOV #1 EM2050
;EM2051 = 1		'RB9 Number of Axis
;
LD CR2002                ; 常時ON
MOV #1 EM2051
;EM2052 = 1300	'RB9 Point Data ornament
;
LD CR2002                ; 常時ON
MOV #1300 EM2052
;EM2053 = 0		'RB9 Spare
;
LD CR2002                ; 常時ON
MOV #0 EM2053
;EM2054 = 0 		'RB9 Spare
;
LD CR2002                ; 常時ON
MOV #0 EM2054
;EM2055 = 1		'RB10 RB TYPE
;
LD CR2002                ; 常時ON
MOV #1 EM2055
;EM2056 = 1		'RB10 Number of Axis
;
LD CR2002                ; 常時ON
MOV #1 EM2056
;EM2057 = 1400	'RB10 Point Data ornament
;
LD CR2002                ; 常時ON
MOV #1400 EM2057
;EM2058 = 0		'RB10 Spare
;
LD CR2002                ; 常時ON
MOV #0 EM2058
;EM2059 = 0		'RB10 Spare
;
LD CR2002                ; 常時ON
MOV #0 EM2059
;EM2060 = 1		'RB11 RB TYPE
;
LD CR2002                ; 常時ON
MOV #1 EM2060
;EM2061 = 1		'RB11 Number of Axis
;
LD CR2002                ; 常時ON
MOV #1 EM2061
;EM2062 = 1500	'RB11 Point Data ornament
;
LD CR2002                ; 常時ON
MOV #1500 EM2062
;EM2063 = 0		'RB11 Spare
;
LD CR2002                ; 常時ON
MOV #0 EM2063
;EM2064 = 0 		'RB11 Spare
LD CR2002                ; 常時ON
MOV #0 EM2064
;
;RB TYPE設定 / RB TYPE Setting
;'EM2106 Teaching TYPE
;'EM2107 Point ornament
;
;SELECT CASE EM2103
;	CASE 1
;		EM2106 = EM2010
;		EM2107 = EM2012
;	CASE 2
;		EM2106 = EM2015
;		EM2107 = EM2017
;	CASE 3
;		EM2106 = EM2020
;		EM2107 = EM2022
;	CASE 4
;		EM2106 = EM2025
;		EM2107 = EM2027
;	CASE 5
;		EM2106 = EM2030
;		EM2107 = EM2032
;	CASE 6
;		EM2106 = EM2035
;		EM2107 = EM2037
;	CASE 7
;		EM2106 = EM2040
;		EM2107 = EM2042
;	CASE 8
;		EM2106 = EM2045
;		EM2107 = EM2047
;	CASE 9
;		EM2106 = EM2050
;		EM2107 = EM2052
;	CASE 10
;		EM2106 = EM2055
;		EM2107 = EM2057
;	CASE 11
;		EM2106 = EM2060
;		EM2107 = EM2062
;END SELECT
;'EM2106 Teaching TYPE
;
;'EM2107 Point ornament
;
;SELECT CASE EM2103
;
LD CR2002                ; 常時ON
MOV EM2103 @VM0          ; RB No.
;	CASE 1
;
LD= @VM0 #1
NCJ #2000
;		EM2106 = EM2010
;
LD CR2002                ; 常時ON
MOV EM2010 EM2106        ; RB1 RBﾀｲﾌﾟ  ﾃｨｰﾁﾝｸﾞﾀｲﾌﾟ
;		EM2107 = EM2012
;
LD CR2002                ; 常時ON
MOV EM2012 EM2107        ; RB1 ﾎﾟｲﾝﾄ修飾  Point修飾
LD CR2002                ; 常時ON
CJ #2001
LABEL #2000
;	CASE 2
;
LD= @VM0 #2
NCJ #2002
;		EM2106 = EM2015
;
LD CR2002                ; 常時ON
MOV EM2015 EM2106        ; RB2 RBﾀｲﾌﾟ  ﾃｨｰﾁﾝｸﾞﾀｲﾌﾟ
;		EM2107 = EM2017
;
LD CR2002                ; 常時ON
MOV EM2017 EM2107        ; RB2 ﾎﾟｲﾝﾄ修飾  Point修飾
LD CR2002                ; 常時ON
CJ #2003
LABEL #2002
;	CASE 3
;
LD= @VM0 #3
NCJ #2004
;		EM2106 = EM2020
;
LD CR2002                ; 常時ON
MOV EM2020 EM2106        ; RB3 RBﾀｲﾌﾟ  ﾃｨｰﾁﾝｸﾞﾀｲﾌﾟ
;		EM2107 = EM2022
;
LD CR2002                ; 常時ON
MOV EM2022 EM2107        ; RB3 ﾎﾟｲﾝﾄ修飾  Point修飾
LD CR2002                ; 常時ON
CJ #2005
LABEL #2004
;	CASE 4
;
LD= @VM0 #4
NCJ #2006
;		EM2106 = EM2025
;
LD CR2002                ; 常時ON
MOV EM2025 EM2106        ; RB4 RBﾀｲﾌﾟ  ﾃｨｰﾁﾝｸﾞﾀｲﾌﾟ
;		EM2107 = EM2027
;
LD CR2002                ; 常時ON
MOV EM2027 EM2107        ; RB4 ﾎﾟｲﾝﾄ修飾  Point修飾
LD CR2002                ; 常時ON
CJ #2007
LABEL #2006
;	CASE 5
;
LD= @VM0 #5
NCJ #2008
;		EM2106 = EM2030
;
LD CR2002                ; 常時ON
MOV EM2030 EM2106        ; RB5 RBﾀｲﾌﾟ  ﾃｨｰﾁﾝｸﾞﾀｲﾌﾟ
;		EM2107 = EM2032
;
LD CR2002                ; 常時ON
MOV EM2032 EM2107        ; RB5 ﾎﾟｲﾝﾄ修飾  Point修飾
LD CR2002                ; 常時ON
CJ #2009
LABEL #2008
;	CASE 6
;
LD= @VM0 #6
NCJ #2010
;		EM2106 = EM2035
;
LD CR2002                ; 常時ON
MOV EM2035 EM2106        ; RB6 RBﾀｲﾌﾟ  ﾃｨｰﾁﾝｸﾞﾀｲﾌﾟ
;		EM2107 = EM2037
;
LD CR2002                ; 常時ON
MOV EM2037 EM2107        ; RB6 ﾎﾟｲﾝﾄ修飾  Point修飾
LD CR2002                ; 常時ON
CJ #2011
LABEL #2010
;	CASE 7
;
LD= @VM0 #7
NCJ #2012
;		EM2106 = EM2040
;
LD CR2002                ; 常時ON
MOV EM2040 EM2106        ; RB7 RBﾀｲﾌﾟ  ﾃｨｰﾁﾝｸﾞﾀｲﾌﾟ
;		EM2107 = EM2042
;
LD CR2002                ; 常時ON
MOV EM2042 EM2107        ; RB7 ﾎﾟｲﾝﾄ修飾  Point修飾
LD CR2002                ; 常時ON
CJ #2013
LABEL #2012
;	CASE 8
;
LD= @VM0 #8
NCJ #2014
;		EM2106 = EM2045
;
LD CR2002                ; 常時ON
MOV EM2045 EM2106        ; ﾃｨｰﾁﾝｸﾞﾀｲﾌﾟ
;		EM2107 = EM2047
;
LD CR2002                ; 常時ON
MOV EM2047 EM2107        ; Point修飾
LD CR2002                ; 常時ON
CJ #2015
LABEL #2014
;	CASE 9
;
LD= @VM0 #9
NCJ #2016
;		EM2106 = EM2050
;
LD CR2002                ; 常時ON
MOV EM2050 EM2106        ; ﾃｨｰﾁﾝｸﾞﾀｲﾌﾟ
;		EM2107 = EM2052
;
LD CR2002                ; 常時ON
MOV EM2052 EM2107        ; Point修飾
LD CR2002                ; 常時ON
CJ #2017
LABEL #2016
;	CASE 10
;
LD= @VM0 #10
NCJ #2018
;		EM2106 = EM2055
;
LD CR2002                ; 常時ON
MOV EM2055 EM2106        ; ﾃｨｰﾁﾝｸﾞﾀｲﾌﾟ
;		EM2107 = EM2057
;
LD CR2002                ; 常時ON
MOV EM2057 EM2107        ; Point修飾
LD CR2002                ; 常時ON
CJ #2019
LABEL #2018
;	CASE 11
;
LD= @VM0 #11
NCJ #2020
;		EM2106 = EM2060
;
LD CR2002                ; 常時ON
MOV EM2060 EM2106        ; ﾃｨｰﾁﾝｸﾞﾀｲﾌﾟ
;		EM2107 = EM2062
;
LD CR2002                ; 常時ON
MOV EM2062 EM2107        ; Point修飾
;END SELECT
LABEL #2020
LABEL #2019
LABEL #2017
LABEL #2015
LABEL #2013
LABEL #2011
LABEL #2009
LABEL #2007
LABEL #2005
LABEL #2003
LABEL #2001
;
;ティーチング画面呼び出し / Teaching Display Call
LDP MR21000              ; 各RB画面呼出
MPS
AND= EM2106 #1           ; ﾃｨｰﾁﾝｸﾞﾀｲﾌﾟ
DW #52 DM4008            ; TP 切り替え画面No
MRD
AND= EM2106 #2           ; ﾃｨｰﾁﾝｸﾞﾀｲﾌﾟ
DW #53 DM4008            ; TP 切り替え画面No
MPP
AND= EM2106 #4           ; ﾃｨｰﾁﾝｸﾞﾀｲﾌﾟ
DW #55 DM4008            ; TP 切り替え画面No
;テキストNo.初期化 / Text No. Initialize
LD CR2008                ; 運転開始時1ｽｷｬﾝON
DW #30 EM2100            ; RBﾃｷｽﾄNo.
CON
DW #31 EM2101            ; 軸ﾃｷｽﾄNo.
CON
DW #41 EM2102            ; PointﾃｷｽﾄNo.
;RB名,軸名指定 / RB Name and Axis Name No. Setting
;EM2101 = EM2103 + 30	'31〜40 Each RB Axis Name Table
;EM2102 = EM2103 + 40	'41〜50 Each RB Point Name Table
;EM2101 = EM2103 + 30	'31〜40 Each RB Axis Name Table
;
LD CR2002                ; 常時ON
LDA EM2103               ; RB No.
CON
EXT
CON
ADD.L +30
CON
STA EM2101               ; 軸ﾃｷｽﾄNo.
;EM2102 = EM2103 + 40	'41〜50 Each RB Point Name Table
LD CR2002                ; 常時ON
LDA EM2103               ; RB No.
CON
EXT
CON
ADD.L +40
CON
STA EM2102               ; PointﾃｷｽﾄNo.
;
;RB No.制限 / Limit of RB No.
;0以下にした場合はMAXに、MAX以上にした場合は1にする。
LD CR2002                ; 常時ON
MPS
AND<= EM2103 #0          ; RB No.
MOV EM2000 EM2103        ; RB数  RB No.
MPP
AND> EM2103 EM2000       ; RB No.  RB数
DW #1 EM2103             ; RB No.
;軸制限 / Limit of Axis
;'EM2104 Axis No.
;
;SELECT CASE EM2103
;	CASE 1
;		IF EM2104 <= 0 THEN
;			EM2104 = EM2011
;		ELSE IF EM2104 > EM2011 THEN
;			EM2104 = 1
;		ELSE
;		END IF
;	CASE 2
;		IF EM2104 <= 0 THEN
;			EM2104 = EM2016
;		ELSE IF EM2104 > EM2106 THEN
;			EM2104 = 1
;		ELSE
;		END IF
;	CASE 3
;		IF EM2104 <= 0 THEN
;			EM2104 = EM2021
;		ELSE IF EM2104 > EM2021 THEN
;			EM2104 = 1
;		ELSE
;		END IF
;	CASE 4
;		IF EM2104 <= 0 THEN
;			EM2104 = EM2026
;		ELSE IF EM2104 > EM2026 THEN
;			EM2104 = 1
;		ELSE
;		END IF
;	CASE 5
;		IF EM2104 <= 0 THEN
;			EM2104 = EM2031
;		ELSE IF EM2104 > EM2031 THEN
;			EM2104 = 1
;		ELSE
;		END IF
;	CASE 6
;		IF EM2104 <= 0 THEN
;			EM2104 = EM2036
;		ELSE IF EM2104 > EM2036 THEN
;			EM2104 = 1
;		ELSE
;		END IF
;	CASE 7
;		IF EM2104 <= 0 THEN
;			EM2104 = EM2041
;		ELSE IF EM2104 > EM2041 THEN
;			EM2104 = 1
;		ELSE
;		END IF
;	CASE 8
;		IF EM2104 <= 0 THEN
;			EM2104 = EM2046
;		ELSE IF EM2104 > EM2046 THEN
;			EM2104 = 1
;		ELSE
;		END IF
;	CASE 9
;		IF EM2104 <= 0 THEN
;			EM2104 = EM2051
;		ELSE IF EM2104 > EM2051 THEN
;			EM2104 = 1
;		ELSE
;		END IF
;	CASE 10
;		IF EM2104 <= 0 THEN
;			EM2104 = EM2056
;		ELSE IF EM2104 > EM2056 THEN
;			EM2104 = 1
;		ELSE
;		END IF
;	CASE 11
;		IF EM2104 <= 0 THEN
;			EM2104 = EM2061
;		ELSE IF EM2104 > EM2061 THEN
;			EM2104 = 1
;		ELSE
;		END IF
;END SELECT
;'EM2104 Axis No.
;
;SELECT CASE EM2103
;
LD CR2002                ; 常時ON
MOV EM2103 @VM1          ; RB No.
;	CASE 1
;
LD= @VM1 #1
NCJ #2021
;		IF EM2104 <= 0 THEN
;
LD<= EM2104 #0           ; 軸No.
NCJ #2022
;			EM2104 = EM2011
;
LD CR2002                ; 常時ON
MOV EM2011 EM2104        ; RB1 軸数  軸No.
LD CR2002                ; 常時ON
CJ #2023
LABEL #2022
;		ELSE IF EM2104 > EM2011 THEN
;
LD> EM2104 EM2011        ; 軸No.  RB1 軸数
NCJ #2024
;			EM2104 = 1
;
LD CR2002                ; 常時ON
MOV #1 EM2104            ; 軸No.
;		ELSE
;
LD CR2002                ; 常時ON
CJ #2025
LABEL #2024
;		END IF
;
LABEL #2025
LABEL #2023
LD CR2002                ; 常時ON
CJ #2026
LABEL #2021
;	CASE 2
;
LD= @VM1 #2
NCJ #2027
;		IF EM2104 <= 0 THEN
;
LD<= EM2104 #0           ; 軸No.
NCJ #2028
;			EM2104 = EM2016
;
LD CR2002                ; 常時ON
MOV EM2016 EM2104        ; RB2 軸数  軸No.
LD CR2002                ; 常時ON
CJ #2029
LABEL #2028
;		ELSE IF EM2104 > EM2106 THEN
;
LD> EM2104 EM2106        ; 軸No.  ﾃｨｰﾁﾝｸﾞﾀｲﾌﾟ
NCJ #2030
;			EM2104 = 1
;
LD CR2002                ; 常時ON
MOV #1 EM2104            ; 軸No.
;		ELSE
;
LD CR2002                ; 常時ON
CJ #2031
LABEL #2030
;		END IF
;
LABEL #2031
LABEL #2029
LD CR2002                ; 常時ON
CJ #2032
LABEL #2027
;	CASE 3
;
LD= @VM1 #3
NCJ #2033
;		IF EM2104 <= 0 THEN
;
LD<= EM2104 #0           ; 軸No.
NCJ #2034
;			EM2104 = EM2021
;
LD CR2002                ; 常時ON
MOV EM2021 EM2104        ; RB3 軸数  軸No.
LD CR2002                ; 常時ON
CJ #2035
LABEL #2034
;		ELSE IF EM2104 > EM2021 THEN
;
LD> EM2104 EM2021        ; 軸No.  RB3 軸数
NCJ #2036
;			EM2104 = 1
;
LD CR2002                ; 常時ON
MOV #1 EM2104            ; 軸No.
;		ELSE
;
LD CR2002                ; 常時ON
CJ #2037
LABEL #2036
;		END IF
;
LABEL #2037
LABEL #2035
LD CR2002                ; 常時ON
CJ #2038
LABEL #2033
;	CASE 4
;
LD= @VM1 #4
NCJ #2039
;		IF EM2104 <= 0 THEN
;
LD<= EM2104 #0           ; 軸No.
NCJ #2040
;			EM2104 = EM2026
;
LD CR2002                ; 常時ON
MOV EM2026 EM2104        ; RB4 軸数  軸No.
LD CR2002                ; 常時ON
CJ #2041
LABEL #2040
;		ELSE IF EM2104 > EM2026 THEN
;
LD> EM2104 EM2026        ; 軸No.  RB4 軸数
NCJ #2042
;			EM2104 = 1
;
LD CR2002                ; 常時ON
MOV #1 EM2104            ; 軸No.
;		ELSE
;
LD CR2002                ; 常時ON
CJ #2043
LABEL #2042
;		END IF
;
LABEL #2043
LABEL #2041
LD CR2002                ; 常時ON
CJ #2044
LABEL #2039
;	CASE 5
;
LD= @VM1 #5
NCJ #2045
;		IF EM2104 <= 0 THEN
;
LD<= EM2104 #0           ; 軸No.
NCJ #2046
;			EM2104 = EM2031
;
LD CR2002                ; 常時ON
MOV EM2031 EM2104        ; RB5 軸数  軸No.
LD CR2002                ; 常時ON
CJ #2047
LABEL #2046
;		ELSE IF EM2104 > EM2031 THEN
;
LD> EM2104 EM2031        ; 軸No.  RB5 軸数
NCJ #2048
;			EM2104 = 1
;
LD CR2002                ; 常時ON
MOV #1 EM2104            ; 軸No.
;		ELSE
;
LD CR2002                ; 常時ON
CJ #2049
LABEL #2048
;		END IF
;
LABEL #2049
LABEL #2047
LD CR2002                ; 常時ON
CJ #2050
LABEL #2045
;	CASE 6
;
LD= @VM1 #6
NCJ #2051
;		IF EM2104 <= 0 THEN
;
LD<= EM2104 #0           ; 軸No.
NCJ #2052
;			EM2104 = EM2036
;
LD CR2002                ; 常時ON
MOV EM2036 EM2104        ; RB6 軸数  軸No.
LD CR2002                ; 常時ON
CJ #2053
LABEL #2052
;		ELSE IF EM2104 > EM2036 THEN
;
LD> EM2104 EM2036        ; 軸No.  RB6 軸数
NCJ #2054
;			EM2104 = 1
;
LD CR2002                ; 常時ON
MOV #1 EM2104            ; 軸No.
;		ELSE
;
LD CR2002                ; 常時ON
CJ #2055
LABEL #2054
;		END IF
;
LABEL #2055
LABEL #2053
LD CR2002                ; 常時ON
CJ #2056
LABEL #2051
;	CASE 7
;
LD= @VM1 #7
NCJ #2057
;		IF EM2104 <= 0 THEN
;
LD<= EM2104 #0           ; 軸No.
NCJ #2058
;			EM2104 = EM2041
;
LD CR2002                ; 常時ON
MOV EM2041 EM2104        ; RB7 軸数  軸No.
LD CR2002                ; 常時ON
CJ #2059
LABEL #2058
;		ELSE IF EM2104 > EM2041 THEN
;
LD> EM2104 EM2041        ; 軸No.  RB7 軸数
NCJ #2060
;			EM2104 = 1
;
LD CR2002                ; 常時ON
MOV #1 EM2104            ; 軸No.
;		ELSE
;
LD CR2002                ; 常時ON
CJ #2061
LABEL #2060
;		END IF
;
LABEL #2061
LABEL #2059
LD CR2002                ; 常時ON
CJ #2062
LABEL #2057
;	CASE 8
;
LD= @VM1 #8
NCJ #2063
;		IF EM2104 <= 0 THEN
;
LD<= EM2104 #0           ; 軸No.
NCJ #2064
;			EM2104 = EM2046
;
LD CR2002                ; 常時ON
MOV EM2046 EM2104        ; 軸No.
LD CR2002                ; 常時ON
CJ #2065
LABEL #2064
;		ELSE IF EM2104 > EM2046 THEN
;
LD> EM2104 EM2046        ; 軸No.
NCJ #2066
;			EM2104 = 1
;
LD CR2002                ; 常時ON
MOV #1 EM2104            ; 軸No.
;		ELSE
;
LD CR2002                ; 常時ON
CJ #2067
LABEL #2066
;		END IF
;
LABEL #2067
LABEL #2065
LD CR2002                ; 常時ON
CJ #2068
LABEL #2063
;	CASE 9
;
LD= @VM1 #9
NCJ #2069
;		IF EM2104 <= 0 THEN
;
LD<= EM2104 #0           ; 軸No.
NCJ #2070
;			EM2104 = EM2051
;
LD CR2002                ; 常時ON
MOV EM2051 EM2104        ; 軸No.
LD CR2002                ; 常時ON
CJ #2071
LABEL #2070
;		ELSE IF EM2104 > EM2051 THEN
;
LD> EM2104 EM2051        ; 軸No.
NCJ #2072
;			EM2104 = 1
;
LD CR2002                ; 常時ON
MOV #1 EM2104            ; 軸No.
;		ELSE
;
LD CR2002                ; 常時ON
CJ #2073
LABEL #2072
;		END IF
;
LABEL #2073
LABEL #2071
LD CR2002                ; 常時ON
CJ #2074
LABEL #2069
;	CASE 10
;
LD= @VM1 #10
NCJ #2075
;		IF EM2104 <= 0 THEN
;
LD<= EM2104 #0           ; 軸No.
NCJ #2076
;			EM2104 = EM2056
;
LD CR2002                ; 常時ON
MOV EM2056 EM2104        ; 軸No.
LD CR2002                ; 常時ON
CJ #2077
LABEL #2076
;		ELSE IF EM2104 > EM2056 THEN
;
LD> EM2104 EM2056        ; 軸No.
NCJ #2078
;			EM2104 = 1
;
LD CR2002                ; 常時ON
MOV #1 EM2104            ; 軸No.
;		ELSE
;
LD CR2002                ; 常時ON
CJ #2079
LABEL #2078
;		END IF
;
LABEL #2079
LABEL #2077
LD CR2002                ; 常時ON
CJ #2080
LABEL #2075
;	CASE 11
;
LD= @VM1 #11
NCJ #2081
;		IF EM2104 <= 0 THEN
;
LD<= EM2104 #0           ; 軸No.
NCJ #2082
;			EM2104 = EM2061
;
LD CR2002                ; 常時ON
MOV EM2061 EM2104        ; 軸No.
LD CR2002                ; 常時ON
CJ #2083
LABEL #2082
;		ELSE IF EM2104 > EM2061 THEN
;
LD> EM2104 EM2061        ; 軸No.
NCJ #2084
;			EM2104 = 1
;
LD CR2002                ; 常時ON
MOV #1 EM2104            ; 軸No.
;		ELSE
;
LD CR2002                ; 常時ON
CJ #2085
LABEL #2084
;		END IF
;
LABEL #2085
LABEL #2083
;END SELECT
LABEL #2081
LABEL #2080
LABEL #2074
LABEL #2068
LABEL #2062
LABEL #2056
LABEL #2050
LABEL #2044
LABEL #2038
LABEL #2032
LABEL #2026
;
;<共通部 / COMMON>
;Point Data Display Control
;SELECT CASE EM2106 'Teaching Type
;	CASE 1		'CON
;		EM2512.L = EM0.L:(EM2107+(EM2104-1)*50+EM2500*2)		'Display 1
;		EM2514.L = EM0.L:(EM2107+(EM2104-1)*50+EM2501*2)		'Display 2
;		EM2516.L = EM0.L:(EM2107+(EM2104-1)*50+EM2502*2)		'Display 3
;		EM2518.L = EM0.L:(EM2107+(EM2104-1)*50+EM2503*2)		'Display 4
;		EM2520.L = EM0.L:(EM2107+(EM2104-1)*50+EM2504*2)		'Display 5
;		EM2531 = EM2500+(EM2104-1)*50+1							'Point Name 1
;		EM2532 = EM2501+(EM2104-1)*50+1							'Point Name 2
;		EM2533 = EM2502+(EM2104-1)*50+1							'Point Name 3
;		EM2534 = EM2503+(EM2104-1)*50+1							'Point Name 4
;		EM2535 = EM2504+(EM2104-1)*50+1							'Point Name 5
;	CASE ELSE	'CON以外
;		EM2512.L = EM0.L:(EM2107+(EM2104-1)*100+(EM2500-1)*2)	'Display 1
;		EM2514.L = EM0.L:(EM2107+(EM2104-1)*100+(EM2501-1)*2)	'Display 2
;		EM2516.L = EM0.L:(EM2107+(EM2104-1)*100+(EM2502-1)*2)	'Display 3
;		EM2518.L = EM0.L:(EM2107+(EM2104-1)*100+(EM2503-1)*2)	'Display 4
;		EM2520.L = EM0.L:(EM2107+(EM2104-1)*100+(EM2504-1)*2)	'Display 5
;		EM2531 = EM2500+(EM2104-1)*50							'Point Name 1
;		EM2532 = EM2501+(EM2104-1)*50							'Point Name 2
;		EM2533 = EM2502+(EM2104-1)*50							'Point Name 3
;		EM2534 = EM2503+(EM2104-1)*50							'Point Name 4
;		EM2535 = EM2504+(EM2104-1)*50							'Point Name 5
;END SELECT
;SELECT CASE EM2106 'Teaching Type
;
LD CR2002                ; 常時ON
MOV EM2106 @VM2          ; ﾃｨｰﾁﾝｸﾞﾀｲﾌﾟ
;	CASE 1		'CON
;
LD= @VM2 #1
NCJ #2086
;		EM2512.L = EM0.L:(EM2107+(EM2104-1)*50+EM2500*2)		'Display 1
;
LD CR2002                ; 常時ON
LDA EM2500               ; Point No.1
CON
EXT
CON
MUL.L +2
CON
STA.L @VM3
CON
LDA EM2104               ; 軸No.
CON
EXT
CON
SUB.L +1
CON
MUL.L +50
CON
STA.L @VM5
CON
LDA EM2107               ; Point修飾
CON
EXT
CON
ADD.L @VM5
CON
ADD.L @VM3
CON
STA.L Z12
CON
MOV.L EM0:Z12 EM2512     ; Point1 Data
;		EM2514.L = EM0.L:(EM2107+(EM2104-1)*50+EM2501*2)		'Display 2
;
LD CR2002                ; 常時ON
LDA EM2501               ; Point No.2
CON
EXT
CON
MUL.L +2
CON
STA.L @VM7
CON
LDA EM2104               ; 軸No.
CON
EXT
CON
SUB.L +1
CON
MUL.L +50
CON
STA.L @VM9
CON
LDA EM2107               ; Point修飾
CON
EXT
CON
ADD.L @VM9
CON
ADD.L @VM7
CON
STA.L Z12
CON
MOV.L EM0:Z12 EM2514     ; Point2 Data
;		EM2516.L = EM0.L:(EM2107+(EM2104-1)*50+EM2502*2)		'Display 3
;
LD CR2002                ; 常時ON
LDA EM2502               ; Point No.3
CON
EXT
CON
MUL.L +2
CON
STA.L @VM11
CON
LDA EM2104               ; 軸No.
CON
EXT
CON
SUB.L +1
CON
MUL.L +50
CON
STA.L @VM13
CON
LDA EM2107               ; Point修飾
CON
EXT
CON
ADD.L @VM13
CON
ADD.L @VM11
CON
STA.L Z12
CON
MOV.L EM0:Z12 EM2516     ; Point3 Data
;		EM2518.L = EM0.L:(EM2107+(EM2104-1)*50+EM2503*2)		'Display 4
;
LD CR2002                ; 常時ON
LDA EM2503               ; Point No.4
CON
EXT
CON
MUL.L +2
CON
STA.L @VM15
CON
LDA EM2104               ; 軸No.
CON
EXT
CON
SUB.L +1
CON
MUL.L +50
CON
STA.L @VM17
CON
LDA EM2107               ; Point修飾
CON
EXT
CON
ADD.L @VM17
CON
ADD.L @VM15
CON
STA.L Z12
CON
MOV.L EM0:Z12 EM2518     ; Point4 Data
;		EM2520.L = EM0.L:(EM2107+(EM2104-1)*50+EM2504*2)		'Display 5
;
LD CR2002                ; 常時ON
LDA EM2504               ; Point No.5
CON
EXT
CON
MUL.L +2
CON
STA.L @VM19
CON
LDA EM2104               ; 軸No.
CON
EXT
CON
SUB.L +1
CON
MUL.L +50
CON
STA.L @VM21
CON
LDA EM2107               ; Point修飾
CON
EXT
CON
ADD.L @VM21
CON
ADD.L @VM19
CON
STA.L Z12
CON
MOV.L EM0:Z12 EM2520     ; Point5 Data
;		EM2531 = EM2500+(EM2104-1)*50+1							'Point Name 1
;
LD CR2002                ; 常時ON
LDA EM2104               ; 軸No.
CON
EXT
CON
SUB.L +1
CON
MUL.L +50
CON
STA.L @VM23
CON
LDA EM2500               ; Point No.1
CON
EXT
CON
ADD.L @VM23
CON
ADD.L +1
CON
STA EM2531               ; Point1 Data ﾃｷｽﾄ行No.
;		EM2532 = EM2501+(EM2104-1)*50+1							'Point Name 2
;
LD CR2002                ; 常時ON
LDA EM2104               ; 軸No.
CON
EXT
CON
SUB.L +1
CON
MUL.L +50
CON
STA.L @VM25
CON
LDA EM2501               ; Point No.2
CON
EXT
CON
ADD.L @VM25
CON
ADD.L +1
CON
STA EM2532               ; Point2 Data ﾃｷｽﾄ行No.
;		EM2533 = EM2502+(EM2104-1)*50+1							'Point Name 3
;
LD CR2002                ; 常時ON
LDA EM2104               ; 軸No.
CON
EXT
CON
SUB.L +1
CON
MUL.L +50
CON
STA.L @VM27
CON
LDA EM2502               ; Point No.3
CON
EXT
CON
ADD.L @VM27
CON
ADD.L +1
CON
STA EM2533               ; Point3 Data ﾃｷｽﾄ行No.
;		EM2534 = EM2503+(EM2104-1)*50+1							'Point Name 4
;
LD CR2002                ; 常時ON
LDA EM2104               ; 軸No.
CON
EXT
CON
SUB.L +1
CON
MUL.L +50
CON
STA.L @VM29
CON
LDA EM2503               ; Point No.4
CON
EXT
CON
ADD.L @VM29
CON
ADD.L +1
CON
STA EM2534               ; Point4 Data ﾃｷｽﾄ行No.
;		EM2535 = EM2504+(EM2104-1)*50+1							'Point Name 5
;
LD CR2002                ; 常時ON
LDA EM2104               ; 軸No.
CON
EXT
CON
SUB.L +1
CON
MUL.L +50
CON
STA.L @VM31
CON
LDA EM2504               ; Point No.5
CON
EXT
CON
ADD.L @VM31
CON
ADD.L +1
CON
STA EM2535               ; Point5 Data ﾃｷｽﾄ行No.
LD CR2002                ; 常時ON
CJ #2087
LABEL #2086
;	CASE ELSE	'CON以外
;
;		EM2512.L = EM0.L:(EM2107+(EM2104-1)*100+(EM2500-1)*2)	'Display 1
;
LD CR2002                ; 常時ON
LDA EM2500               ; Point No.1
CON
EXT
CON
SUB.L +1
CON
MUL.L +2
CON
STA.L @VM33
CON
LDA EM2104               ; 軸No.
CON
EXT
CON
SUB.L +1
CON
MUL.L +100
CON
STA.L @VM35
CON
LDA EM2107               ; Point修飾
CON
EXT
CON
ADD.L @VM35
CON
ADD.L @VM33
CON
STA.L Z12
CON
MOV.L EM0:Z12 EM2512     ; Point1 Data
;		EM2514.L = EM0.L:(EM2107+(EM2104-1)*100+(EM2501-1)*2)	'Display 2
;
LD CR2002                ; 常時ON
LDA EM2501               ; Point No.2
CON
EXT
CON
SUB.L +1
CON
MUL.L +2
CON
STA.L @VM37
CON
LDA EM2104               ; 軸No.
CON
EXT
CON
SUB.L +1
CON
MUL.L +100
CON
STA.L @VM39
CON
LDA EM2107               ; Point修飾
CON
EXT
CON
ADD.L @VM39
CON
ADD.L @VM37
CON
STA.L Z12
CON
MOV.L EM0:Z12 EM2514     ; Point2 Data
;		EM2516.L = EM0.L:(EM2107+(EM2104-1)*100+(EM2502-1)*2)	'Display 3
;
LD CR2002                ; 常時ON
LDA EM2502               ; Point No.3
CON
EXT
CON
SUB.L +1
CON
MUL.L +2
CON
STA.L @VM41
CON
LDA EM2104               ; 軸No.
CON
EXT
CON
SUB.L +1
CON
MUL.L +100
CON
STA.L @VM43
CON
LDA EM2107               ; Point修飾
CON
EXT
CON
ADD.L @VM43
CON
ADD.L @VM41
CON
STA.L Z12
CON
MOV.L EM0:Z12 EM2516     ; Point3 Data
;		EM2518.L = EM0.L:(EM2107+(EM2104-1)*100+(EM2503-1)*2)	'Display 4
;
LD CR2002                ; 常時ON
LDA EM2503               ; Point No.4
CON
EXT
CON
SUB.L +1
CON
MUL.L +2
CON
STA.L @VM45
CON
LDA EM2104               ; 軸No.
CON
EXT
CON
SUB.L +1
CON
MUL.L +100
CON
STA.L @VM47
CON
LDA EM2107               ; Point修飾
CON
EXT
CON
ADD.L @VM47
CON
ADD.L @VM45
CON
STA.L Z12
CON
MOV.L EM0:Z12 EM2518     ; Point4 Data
;		EM2520.L = EM0.L:(EM2107+(EM2104-1)*100+(EM2504-1)*2)	'Display 5
;
LD CR2002                ; 常時ON
LDA EM2504               ; Point No.5
CON
EXT
CON
SUB.L +1
CON
MUL.L +2
CON
STA.L @VM49
CON
LDA EM2104               ; 軸No.
CON
EXT
CON
SUB.L +1
CON
MUL.L +100
CON
STA.L @VM51
CON
LDA EM2107               ; Point修飾
CON
EXT
CON
ADD.L @VM51
CON
ADD.L @VM49
CON
STA.L Z12
CON
MOV.L EM0:Z12 EM2520     ; Point5 Data
;		EM2531 = EM2500+(EM2104-1)*50							'Point Name 1
;
LD CR2002                ; 常時ON
LDA EM2104               ; 軸No.
CON
EXT
CON
SUB.L +1
CON
MUL.L +50
CON
STA.L @VM53
CON
LDA EM2500               ; Point No.1
CON
EXT
CON
ADD.L @VM53
CON
STA EM2531               ; Point1 Data ﾃｷｽﾄ行No.
;		EM2532 = EM2501+(EM2104-1)*50							'Point Name 2
;
LD CR2002                ; 常時ON
LDA EM2104               ; 軸No.
CON
EXT
CON
SUB.L +1
CON
MUL.L +50
CON
STA.L @VM55
CON
LDA EM2501               ; Point No.2
CON
EXT
CON
ADD.L @VM55
CON
STA EM2532               ; Point2 Data ﾃｷｽﾄ行No.
;		EM2533 = EM2502+(EM2104-1)*50							'Point Name 3
;
LD CR2002                ; 常時ON
LDA EM2104               ; 軸No.
CON
EXT
CON
SUB.L +1
CON
MUL.L +50
CON
STA.L @VM57
CON
LDA EM2502               ; Point No.3
CON
EXT
CON
ADD.L @VM57
CON
STA EM2533               ; Point3 Data ﾃｷｽﾄ行No.
;		EM2534 = EM2503+(EM2104-1)*50							'Point Name 4
;
LD CR2002                ; 常時ON
LDA EM2104               ; 軸No.
CON
EXT
CON
SUB.L +1
CON
MUL.L +50
CON
STA.L @VM59
CON
LDA EM2503               ; Point No.4
CON
EXT
CON
ADD.L @VM59
CON
STA EM2534               ; Point4 Data ﾃｷｽﾄ行No.
;		EM2535 = EM2504+(EM2104-1)*50							'Point Name 5
;
LD CR2002                ; 常時ON
LDA EM2104               ; 軸No.
CON
EXT
CON
SUB.L +1
CON
MUL.L +50
CON
STA.L @VM61
CON
LDA EM2504               ; Point No.5
CON
EXT
CON
ADD.L @VM61
CON
STA EM2535               ; Point5 Data ﾃｷｽﾄ行No.
;END SELECT
LABEL #2087
;
;Point Data SELECT NEXT/BACK
LD MR21308               ; NEXT
@SET @MR001              ; W_WDATA完了
;IF EM2500 < 45 THEN
;	EM2500 = EM2500 + 5
;	EM2501 = EM2501 + 5
;	EM2502 = EM2502 + 5
;	EM2503 = EM2503 + 5
;	EM2504 = EM2504 + 5
;ELSE IF EM2106 = 1 THEN
;	EM2500 = 0
;	EM2501 = 1
;	EM2502 = 2
;	EM2503 = 3
;	EM2504 = 4
;ELSE
;	EM2500 = 1
;	EM2501 = 2
;	EM2502 = 3
;	EM2503 = 4
;	EM2504 = 5	
;END IF
;
;RES (@MR001)
LD @MR001                ; W_WDATA完了
NCJ #1000
;IF EM2500 < 45 THEN
;
LD< EM2500 #45           ; Point No.1
NCJ #2088
;	EM2500 = EM2500 + 5
;
LD CR2002                ; 常時ON
LDA EM2500               ; Point No.1
CON
EXT
CON
ADD.L +5
CON
STA EM2500               ; Point No.1
;	EM2501 = EM2501 + 5
;
LD CR2002                ; 常時ON
LDA EM2501               ; Point No.2
CON
EXT
CON
ADD.L +5
CON
STA EM2501               ; Point No.2
;	EM2502 = EM2502 + 5
;
LD CR2002                ; 常時ON
LDA EM2502               ; Point No.3
CON
EXT
CON
ADD.L +5
CON
STA EM2502               ; Point No.3
;	EM2503 = EM2503 + 5
;
LD CR2002                ; 常時ON
LDA EM2503               ; Point No.4
CON
EXT
CON
ADD.L +5
CON
STA EM2503               ; Point No.4
;	EM2504 = EM2504 + 5
;
LD CR2002                ; 常時ON
LDA EM2504               ; Point No.5
CON
EXT
CON
ADD.L +5
CON
STA EM2504               ; Point No.5
LD CR2002                ; 常時ON
CJ #2089
LABEL #2088
;ELSE IF EM2106 = 1 THEN
;
LD= EM2106 #1            ; ﾃｨｰﾁﾝｸﾞﾀｲﾌﾟ
NCJ #2090
;	EM2500 = 0
;
LD CR2002                ; 常時ON
MOV #0 EM2500            ; Point No.1
;	EM2501 = 1
;
LD CR2002                ; 常時ON
MOV #1 EM2501            ; Point No.2
;	EM2502 = 2
;
LD CR2002                ; 常時ON
MOV #2 EM2502            ; Point No.3
;	EM2503 = 3
;
LD CR2002                ; 常時ON
MOV #3 EM2503            ; Point No.4
;	EM2504 = 4
;
LD CR2002                ; 常時ON
MOV #4 EM2504            ; Point No.5
;ELSE
;
LD CR2002                ; 常時ON
CJ #2091
LABEL #2090
;	EM2500 = 1
;
LD CR2002                ; 常時ON
MOV #1 EM2500            ; Point No.1
;	EM2501 = 2
;
LD CR2002                ; 常時ON
MOV #2 EM2501            ; Point No.2
;	EM2502 = 3
;
LD CR2002                ; 常時ON
MOV #3 EM2502            ; Point No.3
;	EM2503 = 4
;
LD CR2002                ; 常時ON
MOV #4 EM2503            ; Point No.4
;	EM2504 = 5	
;
LD CR2002                ; 常時ON
MOV #5 EM2504            ; Point No.5
;END IF
;
LABEL #2091
LABEL #2089
;RES (@MR001)
LD CR2002                ; 常時ON
RES @MR001               ; W_WDATA完了
LABEL #1000
;
LD MR21309               ; BACK
@SET @MR002
;IF EM2500  > 1 THEN
;	EM2500 = EM2500 - 5
;	EM2501 = EM2501 - 5
;	EM2502 = EM2502 - 5
;	EM2503 = EM2503 - 5
;	EM2504 = EM2504 - 5
;ELSE IF EM2106 = 1 THEN
;	EM2500 = 45
;	EM2501 = 46
;	EM2502 = 47
;	EM2503 = 48
;	EM2504 = 49
;ELSE
;	EM2500 = 46
;	EM2501 = 47
;	EM2502 = 48
;	EM2503 = 49
;	EM2504 = 50
;END IF
;
;RES (@MR002)
LD @MR002
NCJ #1001
;IF EM2500  > 1 THEN
;
LD> EM2500 #1            ; Point No.1
NCJ #2092
;	EM2500 = EM2500 - 5
;
LD CR2002                ; 常時ON
LDA EM2500               ; Point No.1
CON
EXT
CON
SUB.L +5
CON
STA EM2500               ; Point No.1
;	EM2501 = EM2501 - 5
;
LD CR2002                ; 常時ON
LDA EM2501               ; Point No.2
CON
EXT
CON
SUB.L +5
CON
STA EM2501               ; Point No.2
;	EM2502 = EM2502 - 5
;
LD CR2002                ; 常時ON
LDA EM2502               ; Point No.3
CON
EXT
CON
SUB.L +5
CON
STA EM2502               ; Point No.3
;	EM2503 = EM2503 - 5
;
LD CR2002                ; 常時ON
LDA EM2503               ; Point No.4
CON
EXT
CON
SUB.L +5
CON
STA EM2503               ; Point No.4
;	EM2504 = EM2504 - 5
;
LD CR2002                ; 常時ON
LDA EM2504               ; Point No.5
CON
EXT
CON
SUB.L +5
CON
STA EM2504               ; Point No.5
LD CR2002                ; 常時ON
CJ #2093
LABEL #2092
;ELSE IF EM2106 = 1 THEN
;
LD= EM2106 #1            ; ﾃｨｰﾁﾝｸﾞﾀｲﾌﾟ
NCJ #2094
;	EM2500 = 45
;
LD CR2002                ; 常時ON
MOV #45 EM2500           ; Point No.1
;	EM2501 = 46
;
LD CR2002                ; 常時ON
MOV #46 EM2501           ; Point No.2
;	EM2502 = 47
;
LD CR2002                ; 常時ON
MOV #47 EM2502           ; Point No.3
;	EM2503 = 48
;
LD CR2002                ; 常時ON
MOV #48 EM2503           ; Point No.4
;	EM2504 = 49
;
LD CR2002                ; 常時ON
MOV #49 EM2504           ; Point No.5
;ELSE
;
LD CR2002                ; 常時ON
CJ #2095
LABEL #2094
;	EM2500 = 46
;
LD CR2002                ; 常時ON
MOV #46 EM2500           ; Point No.1
;	EM2501 = 47
;
LD CR2002                ; 常時ON
MOV #47 EM2501           ; Point No.2
;	EM2502 = 48
;
LD CR2002                ; 常時ON
MOV #48 EM2502           ; Point No.3
;	EM2503 = 49
;
LD CR2002                ; 常時ON
MOV #49 EM2503           ; Point No.4
;	EM2504 = 50
;
LD CR2002                ; 常時ON
MOV #50 EM2504           ; Point No.5
;END IF
;
LABEL #2095
LABEL #2093
;RES (@MR002)
LD CR2002                ; 常時ON
RES @MR002
LABEL #1001
;
;ポイントNo.選択 / Select the Point No.
;IF MR21301 =ON THEN
;	EM2105 = EM2500
;ELSE IF MR21302 = ON THEN
;	EM2105 = EM2501
;ELSE IF MR21303 = ON THEN
;	EM2105 = EM2502
;ELSE IF MR21304 = ON THEN
;	EM2105 = EM2503
;ELSE IF MR21305 = ON THEN
;	EM2105 = EM2504
;END IF
;IF MR21301 =ON THEN
;
LD MR21301               ; POINT DATA1 選択
NCJ #2096
;	EM2105 = EM2500
;
LD CR2002                ; 常時ON
MOV EM2500 EM2105        ; Point No.1  ﾃｨｰﾁﾝｸﾞﾎﾟｲﾝﾄNo.
LD CR2002                ; 常時ON
CJ #2097
LABEL #2096
;ELSE IF MR21302 = ON THEN
;
LD MR21302               ; POINT DATA2 選択
NCJ #2098
;	EM2105 = EM2501
;
LD CR2002                ; 常時ON
MOV EM2501 EM2105        ; Point No.2  ﾃｨｰﾁﾝｸﾞﾎﾟｲﾝﾄNo.
LD CR2002                ; 常時ON
CJ #2099
LABEL #2098
;ELSE IF MR21303 = ON THEN
;
LD MR21303               ; POINT DATA3 選択
NCJ #2100
;	EM2105 = EM2502
;
LD CR2002                ; 常時ON
MOV EM2502 EM2105        ; Point No.3  ﾃｨｰﾁﾝｸﾞﾎﾟｲﾝﾄNo.
LD CR2002                ; 常時ON
CJ #2101
LABEL #2100
;ELSE IF MR21304 = ON THEN
;
LD MR21304               ; POINT DATA4 選択
NCJ #2102
;	EM2105 = EM2503
;
LD CR2002                ; 常時ON
MOV EM2503 EM2105        ; Point No.4  ﾃｨｰﾁﾝｸﾞﾎﾟｲﾝﾄNo.
LD CR2002                ; 常時ON
CJ #2103
LABEL #2102
;ELSE IF MR21305 = ON THEN
;
LD MR21305               ; POINT DATA5 選択
NCJ #2104
;	EM2105 = EM2504
;
LD CR2002                ; 常時ON
MOV EM2504 EM2105        ; Point No.5  ﾃｨｰﾁﾝｸﾞﾎﾟｲﾝﾄNo.
;END IF
LABEL #2104
LABEL #2103
LABEL #2101
LABEL #2099
LABEL #2097
;
;Teaching Type =1 (CON)
;初期表示処理 / Display Initial
LD= DM4008 #52           ; TP 切り替え画面No
@SET @MR003
;EM2500 = 0				'Display 1
;EM2501 = 1				'Display 2
;EM2502 = 2				'Display 3
;EM2503 = 3				'Display 4
;EM2504 = 4				'Display 5
;
;EM2530 = EM2102			'Point Text No.
;
;SET (MR21300)			'Present Value Select
;
;SET (MR21400)			'AUTO Select
;RES (MR21405)			'+/- Switching (+ Select)
;RES (MR21406)			'0.1/0.01 Switching (0.1 Select)
;
;RES (MR21311)			'Spare
;RES (MR21312)			'Spare
;
;EM2524 = 2				'Decimal Point Position Setting
;
;ZRES (MR21004,MR21006)	'Flag for Point Data Change Check Display
;
;RES (@MR003)
LD @MR003
NCJ #1002
;EM2500 = 0				'Display 1
;
LD CR2002                ; 常時ON
MOV #0 EM2500            ; Point No.1
;EM2501 = 1				'Display 2
;
LD CR2002                ; 常時ON
MOV #1 EM2501            ; Point No.2
;EM2502 = 2				'Display 3
;
LD CR2002                ; 常時ON
MOV #2 EM2502            ; Point No.3
;EM2503 = 3				'Display 4
;
LD CR2002                ; 常時ON
MOV #3 EM2503            ; Point No.4
;EM2504 = 4				'Display 5
;
LD CR2002                ; 常時ON
MOV #4 EM2504            ; Point No.5
;EM2530 = EM2102			'Point Text No.
;
LD CR2002                ; 常時ON
MOV EM2102 EM2530        ; PointﾃｷｽﾄNo.  ﾎﾟｲﾝﾄﾃﾞｰﾀﾃｷｽﾄNo.
;SET (MR21300)			'Present Value Select
;
LD CR2002                ; 常時ON
SET MR21300              ; 現在値選択
;SET (MR21400)			'AUTO Select
;
LD CR2002                ; 常時ON
SET MR21400              ; TEACH:AUTO
;RES (MR21405)			'+/- Switching (+ Select)
;
LD CR2002                ; 常時ON
RES MR21405              ; TEACH:+-切替
;RES (MR21406)			'0.1/0.01 Switching (0.1 Select)
;
LD CR2002                ; 常時ON
RES MR21406              ; TEACH:0.1-0.01切替
;RES (MR21311)			'Spare
;
LD CR2002                ; 常時ON
RES MR21311              ; TEACH
;RES (MR21312)			'Spare
;
LD CR2002                ; 常時ON
RES MR21312              ; DIRECT CHANGE
;EM2524 = 2				'Decimal Point Position Setting
;
LD CR2002                ; 常時ON
MOV #2 EM2524            ; 直接変更仮ﾃﾞｰﾀ小数点位置
;ZRES (MR21004,MR21006)	'Flag for Point Data Change Check Display
;
LD CR2002                ; 常時ON
ZRES MR21004 MR21006     ; PosData変更確認画面呼出  PosData変更確認No
;RES (@MR003)
LD CR2002                ; 常時ON
RES @MR003
LABEL #1002
;
;Teaching Type =2 (SEL)
;初期表示処理 / Display Initial
LD= DM4008 #53           ; TP 切り替え画面No
@SET @MR004
;EM2500 = 1				'Display 1
;EM2501 = 2				'Display 2
;EM2502 = 3				'Display 3
;EM2503 = 4				'Display 4
;EM2504 = 5				'Display 5
;
;EM2530 = EM2102			'Point Text No.
;
;SET (MR21300)			'Present Value Select
;
;SET (MR21400)			'AUTO Select
;RES (MR21405)			'+/- Switching (+ Select)
;RES (MR21406)			'0.1/0.01 Switching (0.1 Select)
;
;RES (MR21311)			'Spare
;RES (MR21312)			'Spare
;
;EM2524 = 3				'Decimal Point Position Setting
;
;ZRES (MR21004,MR21006)	'Flag for Point Data Change Check Display
;
;RES (@MR004)
LD @MR004
NCJ #1003
;EM2500 = 1				'Display 1
;
LD CR2002                ; 常時ON
MOV #1 EM2500            ; Point No.1
;EM2501 = 2				'Display 2
;
LD CR2002                ; 常時ON
MOV #2 EM2501            ; Point No.2
;EM2502 = 3				'Display 3
;
LD CR2002                ; 常時ON
MOV #3 EM2502            ; Point No.3
;EM2503 = 4				'Display 4
;
LD CR2002                ; 常時ON
MOV #4 EM2503            ; Point No.4
;EM2504 = 5				'Display 5
;
LD CR2002                ; 常時ON
MOV #5 EM2504            ; Point No.5
;EM2530 = EM2102			'Point Text No.
;
LD CR2002                ; 常時ON
MOV EM2102 EM2530        ; PointﾃｷｽﾄNo.  ﾎﾟｲﾝﾄﾃﾞｰﾀﾃｷｽﾄNo.
;SET (MR21300)			'Present Value Select
;
LD CR2002                ; 常時ON
SET MR21300              ; 現在値選択
;SET (MR21400)			'AUTO Select
;
LD CR2002                ; 常時ON
SET MR21400              ; TEACH:AUTO
;RES (MR21405)			'+/- Switching (+ Select)
;
LD CR2002                ; 常時ON
RES MR21405              ; TEACH:+-切替
;RES (MR21406)			'0.1/0.01 Switching (0.1 Select)
;
LD CR2002                ; 常時ON
RES MR21406              ; TEACH:0.1-0.01切替
;RES (MR21311)			'Spare
;
LD CR2002                ; 常時ON
RES MR21311              ; TEACH
;RES (MR21312)			'Spare
;
LD CR2002                ; 常時ON
RES MR21312              ; DIRECT CHANGE
;EM2524 = 3				'Decimal Point Position Setting
;
LD CR2002                ; 常時ON
MOV #3 EM2524            ; 直接変更仮ﾃﾞｰﾀ小数点位置
;ZRES (MR21004,MR21006)	'Flag for Point Data Change Check Display
;
LD CR2002                ; 常時ON
ZRES MR21004 MR21006     ; PosData変更確認画面呼出  PosData変更確認No
;RES (@MR004)
LD CR2002                ; 常時ON
RES @MR004
LABEL #1003
;
;Teaching Type =2 (SEL)
;初期表示処理 / Display Initial
LD= DM4008 #55           ; TP 切り替え画面No
@SET @MR005
;EM2500 = 17				'Display 1
;'EM2501 = 2				'Display 2
;'EM2502 = 3				'Display 3
;'EM2503 = 4				'Display 4
;'EM2504 = 5				'Display 5
;
;EM2530 = EM2102			'Point Text No.
;
;SET (MR21300)			'Present Value Select
;
;SET (MR21400)			'AUTO Select
;RES (MR21405)			'+/- Switching (+ Select)
;RES (MR21406)			'0.1/0.01 Switching (0.1 Select)
;
;RES (MR21311)			'Spare
;RES (MR21312)			'Spare
;
;EM2524 = 3				'Decimal Point Position Setting
;
;ZRES (MR21004,MR21006)	'Flag for Point Data Change Check Display
;
;RES (@MR005)
LD @MR005
NCJ #1004
;EM2500 = 17				'Display 1
;
LD CR2002                ; 常時ON
MOV #17 EM2500           ; Point No.1
;'EM2501 = 2				'Display 2
;
;'EM2502 = 3				'Display 3
;
;'EM2503 = 4				'Display 4
;
;'EM2504 = 5				'Display 5
;
;EM2530 = EM2102			'Point Text No.
;
LD CR2002                ; 常時ON
MOV EM2102 EM2530        ; PointﾃｷｽﾄNo.  ﾎﾟｲﾝﾄﾃﾞｰﾀﾃｷｽﾄNo.
;SET (MR21300)			'Present Value Select
;
LD CR2002                ; 常時ON
SET MR21300              ; 現在値選択
;SET (MR21400)			'AUTO Select
;
LD CR2002                ; 常時ON
SET MR21400              ; TEACH:AUTO
;RES (MR21405)			'+/- Switching (+ Select)
;
LD CR2002                ; 常時ON
RES MR21405              ; TEACH:+-切替
;RES (MR21406)			'0.1/0.01 Switching (0.1 Select)
;
LD CR2002                ; 常時ON
RES MR21406              ; TEACH:0.1-0.01切替
;RES (MR21311)			'Spare
;
LD CR2002                ; 常時ON
RES MR21311              ; TEACH
;RES (MR21312)			'Spare
;
LD CR2002                ; 常時ON
RES MR21312              ; DIRECT CHANGE
;EM2524 = 3				'Decimal Point Position Setting
;
LD CR2002                ; 常時ON
MOV #3 EM2524            ; 直接変更仮ﾃﾞｰﾀ小数点位置
;ZRES (MR21004,MR21006)	'Flag for Point Data Change Check Display
;
LD CR2002                ; 常時ON
ZRES MR21004 MR21006     ; PosData変更確認画面呼出  PosData変更確認No
;RES (@MR005)
LD CR2002                ; 常時ON
RES @MR005
LABEL #1004
;
;PSEL Point Display Contoroll
;IF EM2106 = 4 THEN
;	IF EM2104 = 1 THEN
;		EM2500 = 17	'作業原点表示
;	ELSE
;		EM2500 = 18	'作業原点表示
;	END IF
;END IF
;		
;IF EM2106 = 4 THEN
;
LD= EM2106 #4            ; ﾃｨｰﾁﾝｸﾞﾀｲﾌﾟ
NCJ #2105
;	IF EM2104 = 1 THEN
;
LD= EM2104 #1            ; 軸No.
NCJ #2106
;		EM2500 = 17	'作業原点表示
;
LD CR2002                ; 常時ON
MOV #17 EM2500           ; Point No.1
;	ELSE
;
LD CR2002                ; 常時ON
CJ #2107
LABEL #2106
;		EM2500 = 18	'作業原点表示
;
LD CR2002                ; 常時ON
MOV #18 EM2500           ; Point No.1
;	END IF
;
LABEL #2107
;END IF
;
LABEL #2105
;
;Permission for RB TEACH Flag
LDB R50001               ; AUTO
ANB R50002               ; STEP
OUT MR21008              ; RB TEACH 許可
;<h1/>RB1
;PSEL
;Supply Hole Film Weld
LD MR21008               ; RB TEACH 許可
AND= EM2103 #1           ; RB No.
MC
MCR
;<h1/>RB2
;PSEL
;Removable Film Weld
LD MR21008               ; RB TEACH 許可
AND= EM2103 #2           ; RB No.
MC
MCR
;<h1/>RB3
;XSEL
;Transport RB In the CELL
;RB TYPE = 2
LD MR21008               ; RB TEACH 許可
AND= EM2103 #3           ; RB No.
MC
LD CR2002                ; 常時ON
MOV.L R12600 EM2510      ; 現在座標(下位) 16bits  現在ポジションデータ表示
MOV EM2104 R16800        ; 軸No.  軸No. 16bits
MOV EM2104 DM13052       ; 軸No.  RB3:軸番号
;AUTO/MANU 切替
;Switching AUTO/MANU
LD MR21400               ; TEACH:AUTO
RES MR16104              ; 自動選択中
LD MR21401               ; TEACH:MANU
SET MR16104              ; 自動選択中
;Servo ON/OFF
LD R11805                ; 給材X軸(1軸)ｻｰﾎﾞON中
AND R11806               ; 給材Y軸(2軸)ｻｰﾎﾞON中
AND R11807               ; 除材X軸(3軸)ｻｰﾎﾞON中
AND R11808               ; 除材Y軸(4軸)ｻｰﾎﾞON中
OUT MR21412              ; TEACH:SV表示
;POWER ON/OFF
LDP MR21407              ; TEACH:電源ON
RES MR26101              ; A-ENB3 ｲﾈｰﾌﾞﾙ
CON
SET MR26100              ; A-RB3 電源ON
LDF MR21407              ; TEACH:電源ON
RES MR26100              ; A-RB3 電源ON
CON
SET MR26101              ; A-ENB3 ｲﾈｰﾌﾞﾙ
LD MR26100               ; A-RB3 電源ON
OUT MR21408              ; TEACH:電源表示
;RB3 RDY Display
;If can teaching the RB3, Display turn ON.
LD R11800                ; RB3ｺﾝﾄﾛｰﾗ異常
AND R11801               ; 準備完了(ｺﾝﾄﾛｰﾗReady)
AND R12000               ; 給材ﾊﾝﾄﾞ動作可能
AND R12200               ; 除材ﾊﾝﾄﾞ動作可能
OUT MR21414              ; TEACH:RB RDY
;HOME
LD MR21410               ; TEACH:HOME
@SET MR18404             ; RB3:HOME
CON
@SET @MR800
STG @MR800
AND MR18400              ; RB3:動作完了
RES MR18400              ; RB3:動作完了
CON
JMP @MR801
STG @MR801
MPS
AND= DM13040 #20         ; RB3ResultCode
JMP @MR803
MPP
AND<> DM13040 #20        ; RB3ResultCode
SET MR18500
CON
JMP @MR802
STG @MR802
AND MR18500
RES MR18500
CON
JMP @MR803
STG @MR803
RES MR21410              ; TEACH:HOME
CON
ENDS
;Position Move
LD MR21402               ; TEACH:POSMOVE
MOV EM2104 DM13052       ; 軸No.  RB3:軸番号
MOV EM2105 DM13053       ; ﾃｨｰﾁﾝｸﾞﾎﾟｲﾝﾄNo.  RB3:ﾎﾟｲﾝﾄNo
@SET MR18405             ; RB3:POSMOVE
CON
@SET @MR804
STG @MR804
AND MR18400              ; RB3:動作完了
RES MR18400              ; RB3:動作完了
CON
JMP @MR805
STG @MR805
MPS
AND= DM13040 #20         ; RB3ResultCode
JMP @MR807
MPP
AND<> DM13040 #20        ; RB3ResultCode
SET MR18500
CON
JMP @MR806
STG @MR806
AND MR18500
RES MR18500
CON
JMP @MR807
STG @MR807
RES MR18405              ; RB3:POSMOVE
CON
ENDS
;JOG
LD MR21403               ; TEACH:JOG
MOV EM2104 DM13052       ; 軸No.  RB3:軸番号
MPS
ANB MR21405              ; TEACH:+-切替
DW #1 DM13051            ; RB3:方向切替(1=+)(0=-)
MRD
AND MR21405              ; TEACH:+-切替
DW #0 DM13051            ; RB3:方向切替(1=+)(0=-)
MPP
@SET MR18407             ; RB3:JOG
CON
@SET @MR808
STG @MR808
ANB MR21403              ; TEACH:JOG
RES MR18407              ; RB3:JOG
CON
JMP @MR809
STG @MR809
AND MR18400              ; RB3:動作完了
RES MR18400              ; RB3:動作完了
CON
JMP @MR810
STG @MR810
MPS
AND= DM13040 #20         ; RB3ResultCode
ENDS
MPP
AND<> DM13040 #20        ; RB3ResultCode
SET MR18500
CON
JMP @MR811
STG @MR811
AND MR18500
RES MR18500
CON
ENDS
;INCH
LD MR21404               ; TEACH:INCH
MOV EM2104 DM13052       ; 軸No.  RB3:軸番号
MPS
ANB MR21405              ; TEACH:+-切替
DW #1 DM13051            ; RB3:方向切替(1=+)(0=-)
MRD
AND MR21405              ; TEACH:+-切替
DW #0 DM13051            ; RB3:方向切替(1=+)(0=-)
MRD
ANB MR21406              ; TEACH:0.1-0.01切替
DW #0 DM13050            ; RB3:ｲﾝﾁﾝｸﾞ幅切替
MRD
AND MR21406              ; TEACH:0.1-0.01切替
DW #1 DM13050            ; RB3:ｲﾝﾁﾝｸﾞ幅切替
MPP
@SET MR18408             ; RB3:INCH
CON
@SET @MR812
STG @MR812
AND MR18400              ; RB3:動作完了
RES MR18400              ; RB3:動作完了
CON
JMP @MR813
STG @MR813
MPS
AND= DM13040 #20         ; RB3ResultCode
JMP @MR815
MPP
AND<> DM13040 #20        ; RB3ResultCode
SET MR18500
CON
JMP @MR814
STG @MR814
AND MR18500
RES MR18500
CON
JMP @MR815
STG @MR815
RES MR21404              ; TEACH:INCH
CON
ENDS
;WRITE
LD MR21409               ; TEACH:WRITE
ANB MR21500              ; 現在値選択
RES MR21005              ; PosData変更確認YES
CON
RES MR21006              ; PosData変更確認No
CON
SET MR21004              ; PosData変更確認画面呼出
CON
@SET @MR900
STG @MR900
MPS
AND MR21005              ; PosData変更確認YES
@SET @MR901
CON
RES MR21004              ; PosData変更確認画面呼出
CON
JMP @MR904
MPP
AND MR21006              ; PosData変更確認No
RES MR21004              ; PosData変更確認画面呼出
CON
ENDS
;@DM1 = EM2107+(EM2104-1)*100+(EM2105-1)*2
;EM0.L:@DM1 = EM2510.L
;
;DM13052 = EM2104
;DM13053 = EM2105
;DM13054.L = EM0.L:@DM1
;
;RES (@MR901)
LD @MR901
NCJ #1005
;@DM1 = EM2107+(EM2104-1)*100+(EM2105-1)*2
;
LD CR2002                ; 常時ON
LDA EM2105               ; ﾃｨｰﾁﾝｸﾞﾎﾟｲﾝﾄNo.
CON
EXT
CON
SUB.L +1
CON
MUL.L +2
CON
STA.L @VM63
CON
LDA EM2104               ; 軸No.
CON
EXT
CON
SUB.L +1
CON
MUL.L +100
CON
STA.L @VM65
CON
LDA EM2107               ; Point修飾
CON
EXT
CON
ADD.L @VM65
CON
ADD.L @VM63
CON
STA @DM1
;EM0.L:@DM1 = EM2510.L
;
LD CR2002                ; 常時ON
LDA @DM1
CON
EXT
CON
STA.L Z11
CON
MOV.L EM2510 EM0:Z11     ; 現在ポジションデータ表示
;DM13052 = EM2104
;
LD CR2002                ; 常時ON
MOV EM2104 DM13052       ; 軸No.  RB3:軸番号
;DM13053 = EM2105
;
LD CR2002                ; 常時ON
MOV EM2105 DM13053       ; ﾃｨｰﾁﾝｸﾞﾎﾟｲﾝﾄNo.  RB3:ﾎﾟｲﾝﾄNo
;DM13054.L = EM0.L:@DM1
;
LD CR2002                ; 常時ON
LDA @DM1
CON
EXT
CON
STA.L Z12
CON
MOV.L EM0:Z12 DM13054    ; RB3:座標値(下位)
;RES (@MR901)
LD CR2002                ; 常時ON
RES @MR901
LABEL #1005
;
;POINT DATA DIRECT CHANGE
LDP MR21413              ; TEACH:DIRECT CHANGE
ANB MR21500              ; 現在値選択
RES MR21005              ; PosData変更確認YES
CON
RES MR21006              ; PosData変更確認No
CON
SET MR21004              ; PosData変更確認画面呼出
CON
@SET @MR902
STG @MR902
MPS
AND MR21005              ; PosData変更確認YES
@SET @MR903
CON
RES MR21004              ; PosData変更確認画面呼出
CON
JMP @MR904
MPP
AND MR21006              ; PosData変更確認No
RES MR21004              ; PosData変更確認画面呼出
CON
ENDS
;@DM2 = EM2107+(EM2104-1)*100+(EM2105-1)*2
;EM0.L:@DM2 = EM2522.L
;
;DM13052 = EM2104
;DM13053 = EM2105
;DM13054.L = EM0.L:@DM2
;
;RES (@MR903)
LD @MR903
NCJ #1006
;@DM2 = EM2107+(EM2104-1)*100+(EM2105-1)*2
;
LD CR2002                ; 常時ON
LDA EM2105               ; ﾃｨｰﾁﾝｸﾞﾎﾟｲﾝﾄNo.
CON
EXT
CON
SUB.L +1
CON
MUL.L +2
CON
STA.L @VM67
CON
LDA EM2104               ; 軸No.
CON
EXT
CON
SUB.L +1
CON
MUL.L +100
CON
STA.L @VM69
CON
LDA EM2107               ; Point修飾
CON
EXT
CON
ADD.L @VM69
CON
ADD.L @VM67
CON
STA @DM2
;EM0.L:@DM2 = EM2522.L
;
LD CR2002                ; 常時ON
LDA @DM2
CON
EXT
CON
STA.L Z11
CON
MOV.L EM2522 EM0:Z11     ; 直接変更仮ﾃﾞｰﾀ
;DM13052 = EM2104
;
LD CR2002                ; 常時ON
MOV EM2104 DM13052       ; 軸No.  RB3:軸番号
;DM13053 = EM2105
;
LD CR2002                ; 常時ON
MOV EM2105 DM13053       ; ﾃｨｰﾁﾝｸﾞﾎﾟｲﾝﾄNo.  RB3:ﾎﾟｲﾝﾄNo
;DM13054.L = EM0.L:@DM2
;
LD CR2002                ; 常時ON
LDA @DM2
CON
EXT
CON
STA.L Z12
CON
MOV.L EM0:Z12 DM13054    ; RB3:座標値(下位)
;RES (@MR903)
LD CR2002                ; 常時ON
RES @MR903
LABEL #1006
;
;COMMON OF DATA CHANGE
STG @MR904
ANB @MR901
ANB @MR903
JMP @MR905
STG @MR905
SET MR18410              ; RB3:SETPOSDATA
CON
JMP @MR906
STG @MR906
AND MR18400              ; RB3:動作完了
RES MR18400              ; RB3:動作完了
CON
JMP @MR907
STG @MR907
MPS
AND= DM13040 #20         ; RB3ResultCode
JMP @MR909
MPP
AND<> DM13040 #20        ; RB3ResultCode
SET MR18500
CON
JMP @MR908
STG @MR908
AND MR18500
RES MR18500
CON
JMP @MR909
STG @MR909
RES MR18410              ; RB3:SETPOSDATA
CON
ENDS
MCR
;<h1/>RB4
;PSEL
;Bypass 1 & 2 Welding
LD MR21008               ; RB TEACH 許可
AND= EM2103 #4           ; RB No.
MC
MCR
;<h1/>RB5
;PSEL
;Bypass 3 & 4 Welding
LD MR21008               ; RB TEACH 許可
AND= EM2103 #5           ; RB No.
MC
MCR
;<h1/>RB6
;SCON
;Infusion 1
LD MR21008               ; RB TEACH 許可
AND= EM2103 #6           ; RB No.
MC
MCR
;<h1/>RB7
;SCON
;Infusion 2
LD MR21008               ; RB TEACH 許可
AND= EM2103 #7           ; RB No.
MC
MCR
;Return the Display
LD MR21001               ; 画面戻り
MPS
AND MR9812               ; 画面よりOUTPUT CONTOROLL
@MOV #511 DM4008         ; TP 切り替え画面No
MPP
ANB MR9812               ; 画面よりOUTPUT CONTOROLL
@MOV #4 DM4008           ; TP 切り替え画面No
;<h1/>RB Contorol for Panel (LAST)
;Err　RB1異常 / RB1 Alarm
LD R15000                ; A-RB1 電源ON
AND MR18015              ; RB1:DN正常通信中
TMR @10 #50
CON
AND @T10
ANB R10100               ; RB1_PSEL_ｱﾗｰﾑ
TMR @2 #50
CON
AND @T2
@SET MR10410             ; RB1異常Flag
;Err　RB2異常 / RB2 Alarm
LD R15002                ; A-RB2 電源ON
AND MR18215              ; RB2:DN正常通信中
TMR @11 #50
CON
AND @T11
ANB R10900               ; RB2_PSEL_ｱﾗｰﾑ
TMR @3 #50
CON
AND @T3
@SET MR10411             ; RB2異常Flag
;Err　RB3異常 / RB3 Alarm
LD R15900                ; A-RB3 電源ON
AND MR18415              ; RB3:DN正常通信中
AND R50007               ; 原点復帰　完了
ANB R50300               ; Pause
ANB @MR203               ; RB3 Error Release Do
MPS
LDB R11800               ; RB3ｺﾝﾄﾛｰﾗ異常
ANB R11801               ; 準備完了(ｺﾝﾄﾛｰﾗReady)
ANL
TMR @4 #50
MPP
LDB R11800               ; RB3ｺﾝﾄﾛｰﾗ異常
AND R11801               ; 準備完了(ｺﾝﾄﾛｰﾗReady)
ANL
TMR @5 #50
LD @T4
SET @MR203               ; RB3 Error Release Do
CON
SET @MR112               ; RB3 Move Reset Level Error
LD @T5
SET @MR203               ; RB3 Error Release Do
CON
SET @MR112               ; RB3 Move Reset Level Error
STG @MR109               ; RB3 Cold Start Level Error
SET R50008               ; Error
CON
SET R50111               ; Err ST1
CON
SET @MR108
CON
MOV #166 DM400           ; ﾒｯｾｰｼﾞNo.
JMP @MR110
STG @MR110
AND R50008               ; Error
SET MR26101              ; A-ENB3 ｲﾈｰﾌﾞﾙ
CON
JMP @MR111
STG @MR111
ANB R50008               ; Error
RES @MR203               ; RB3 Error Release Do
CON
RES MR26100              ; A-RB3 電源ON
CON
SET R50011               ; TRAP
CON
ENDS
STG @MR112               ; RB3 Move Reset Level Error
SET R50008               ; Error
CON
SET R50111               ; Err ST1
CON
MOV #166 DM400           ; ﾒｯｾｰｼﾞNo.
SET MR15200              ; RB3 Alarm復帰中
CON
JMP @MR113
STG @MR113
AND R50008               ; Error
JMP @MR114               ; 潰し量設定ﾏｸﾛ完了
STG @MR114               ; 潰し量設定ﾏｸﾛ完了
ANB R50008               ; Error
MPS
ANB CR2002               ; 常時ON
SET R50011               ; TRAP
CON
ENDS
MPP
AND CR2002               ; 常時ON
JMP @MR115               ; 作業原点設定ﾏｸﾛ完了
STG @MR115               ; 作業原点設定ﾏｸﾛ完了
SET MR16001              ; ｴﾗｰﾘｾｯﾄ指令
CON
MPS
LD R11800                ; RB3ｺﾝﾄﾛｰﾗ異常
AND R11801               ; 準備完了(ｺﾝﾄﾛｰﾗReady)
ANL
JMP @MR200
MPP
TMR @12 #50
CON
AND @T12
JMP @MR200
STG @MR200
RES MR16001              ; ｴﾗｰﾘｾｯﾄ指令
CON
@SET @MR1000             ; RB3 Alarm return
CON
JMP @MR201
STG @MR201
AND @MR1014
JMP @MR202
STG @MR202
AND @MR1015
RES MR15200              ; RB3 Alarm復帰中
CON
RES @MR203               ; RB3 Error Release Do
CON
RES @MR1015
CON
ENDS
;RB3 Alarm復帰
STG @MR1000              ; RB3 Alarm return
ZRES MR16000 MR16515     ; RB3_ﾌﾟﾛｸﾞﾗﾑｽﾀｰﾄ  Spare
CON
RES MR26100              ; A-RB3 電源ON
CON
SET MR18403              ; RB3:ﾏｸﾛ強制終了
CON
JMP @MR1001
STG @MR1001
TMR @40 #50
CON
AND @T40
SET MR26100              ; A-RB3 電源ON
CON
JMP @MR1002
STG @MR1002
AND T523                 ; RB3ﾏｸﾛ再起動Wait
RES MR18403              ; RB3:ﾏｸﾛ強制終了
CON
JMP @MR1003
STG @MR1003
AND MR18415              ; RB3:DN正常通信中
AND R11800               ; RB3ｺﾝﾄﾛｰﾗ異常
AND R11801               ; 準備完了(ｺﾝﾄﾛｰﾗReady)
SET MR16002              ; RB3_原点復帰開始
CON
JMP @MR1004
STG @MR1004
AND R11815               ; RB3_原点復帰中
JMP @MR1005
STG @MR1005
ANB R11815               ; RB3_原点復帰中
RES MR16002              ; RB3_原点復帰開始
CON
JMP @MR1006
STG @MR1006
AND R11800               ; RB3ｺﾝﾄﾛｰﾗ異常
AND R11801               ; 準備完了(ｺﾝﾄﾛｰﾗReady)
@SET @MR1100
CON
JMP @MR1007
STG @MR1007
RES MR7104               ; ｾﾙ内 給材ﾁｬｯｸ 閉じ
CON
SET MR7105               ; ｾﾙ内 給材ﾁｬｯｸ 開き
CON
AND R4305                ; 給材ﾁｬｯｸ 開限
JMP @MR1008
STG @MR1008
RES MR7012               ; ｾﾙ内PP給材側ｼﾌﾄ　前進
CON
SET MR7013               ; ｾﾙ内PP給材側ｼﾌﾄ　後退
CON
RES MR7102               ; ｾﾙ内PP給材ﾁｬｯｸ 旋回
CON
SET MR7103               ; ｾﾙ内PP給材ﾁｬｯｸ 旋回戻り
CON
AND R4301                ; ｾﾙ内P&P給材側ｼﾌﾄ　後退限
AND R4303                ; 給材ﾁｬｯｸ 戻り限
SET @MR1014
CON
JMP @MR1009
STG @MR1009
AND R12000               ; 給材ﾊﾝﾄﾞ動作可能
SET MR16208              ; 給材P&P_原点復帰
CON
JMP @MR1010
STG @MR1010
AND R12008               ; 給材P&P_原点復帰完了
RES MR16208              ; 給材P&P_原点復帰
CON
JMP @MR1011
STG @MR1011
MPS
AND MR15009              ; IND2_除材中
SET MR15011              ; IND2_除材異常完了
CON
RES MR15009              ; IND2_除材中
MPP
ANB MR15009              ; IND2_除材中
SET MR15004              ; 給材P&P原点復帰完了
CON
JMP @MR1012
STG @MR1100
RES MR7106               ; ｾﾙ内 除材ﾁｬｯｸ 閉じ
CON
SET MR7107               ; ｾﾙ内 除材ﾁｬｯｸ 開き
CON
AND R4311                ; 除材ﾁｬｯｸ 開限
JMP @MR1101
STG @MR1101
AND R12200               ; 除材ﾊﾝﾄﾞ動作可能
SET MR16501              ; 除材P&P_PAUSE_待機位置移動
CON
JMP @MR1102
STG @MR1102
AND R12301               ; 除材P&P_PAUSE_待機位置移動完了
RES MR16501              ; 除材P&P_PAUSE_待機位置移動
CON
JMP @MR1103
STG @MR1103
RES MR7014               ; ｾﾙ内PP除材側ｼﾌﾄ　前進
CON
SET MR7015               ; ｾﾙ内PP除材側ｼﾌﾄ　後退
CON
AND R4309                ; ｾﾙ内P&P  除材側ｼﾌﾄ　後退限
MPS
AND MR15013              ; IND3_給材中
SET MR15015              ; IND3_給材異常完了
CON
RES MR15013              ; IND3_給材中
MPP
ANB MR15013              ; IND3_給材中
SET MR15003              ; 除材P&P原点復帰完了
CON
SET @MR1115
CON
ENDS
STG @MR1012
AND @MR1115
RES @MR1115
CON
JMP @MR1013
STG @MR1013
RES @MR1014
CON
SET @MR1015
CON
ENDS
;Err　RB4異常 / RB4 Alarm
LD R15902                ; A-RB4 電源ON
AND MR18615              ; RB4:DN正常通信中
TMR @13 #50
CON
AND @T13
ANB R13100               ; RB4_PSEL_ｱﾗｰﾑ
TMR @6 #200
CON
AND @T6
@SET MR10413             ; RB4異常Flag
;Err　RB5異常 / RB5 Alarm
LD R15904                ; A-RB5 電源ON
AND MR18815              ; RB5:DN正常通信中
TMR @14 #50
CON
AND @T14
ANB R13900               ; RB5_PSEL_ｱﾗｰﾑ
TMR @7 #200
CON
AND @T7
@SET MR10414             ; RB5異常Flag
;Err　RB6異常 / RB6 Alarm
LDB LR49800              ; ｻﾃﾗｲﾄ無しﾓｰﾄﾞ
AND<> DM2006 $00A1       ; RB6 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2006 $00A8       ; RB6 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2006 $00B8       ; RB6 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2006 $00E5       ; RB6 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2006 $00E8       ; RB6 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2006 $00E9       ; RB6 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2006 $00EA       ; RB6 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2006 $00F4       ; RB6 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2006 $00F8       ; RB6 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2006 $00FA       ; RB6 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2006 $00FB       ; RB6 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2006 $00FC       ; RB6 ｱﾗｰﾑｺｰﾄﾞ
OUT R52000               ; RB6解除不可異常発生無し
LDB LR49800              ; ｻﾃﾗｲﾄ無しﾓｰﾄﾞ
AND R18300               ; A-RB6 電源ON
TMR @15 #50
CON
AND @T15
MPS
BAND DM2007 #3           ; RB6 状態信号
TMR @8 #50
CON
AND @T8
@SET @MR214              ; RB6 Abnormal Flag
MPP
AND MR14409              ; RB6 PCON移動NG
@SET @MR214              ; RB6 Abnormal Flag
LD @MR214                ; RB6 Abnormal Flag
ANB @MR204
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
SET @MR204
CON
MPS
BRES DM2207 #3           ; RB6 制御信号
CON
@SET @MR205
MRD
MOV #169 DM400           ; ﾒｯｾｰｼﾞNo.
MPP
LD MR19000               ; 注入中
ANB MR19001              ; 注入1異常
ANL
SET MR19001              ; 注入1異常
STG @MR205
AND R50008               ; Error
RES @MR214               ; RB6 Abnormal Flag
CON
MPS
ANB R52000               ; RB6解除不可異常発生無し
SET MR26301              ; A-ENB6 ｲﾈｰﾌﾞﾙ
CON
JMP @MR206
MPP
AND R52000               ; RB6解除不可異常発生無し
JMP @MR207
STG @MR206
ANB R50008               ; Error
RES MR14409              ; RB6 PCON移動NG
CON
RES @MR204
CON
RES MR26300              ; A-RB6 電源ON
CON
SET R50011               ; TRAP
CON
ENDS
STG @MR207
ANB R50008               ; Error
RES MR14409              ; RB6 PCON移動NG
CON
RES @MR204
CON
BSET DM2207 #3           ; RB6 制御信号
CON
ENDS
LD MR19001               ; 注入1異常
BAND DM2207 #3           ; RB6 制御信号
BANB DM2007 #3           ; RB6 状態信号
BRES DM2207 #3           ; RB6 制御信号
;Err　RB7異常 / RB7 Alarm
LDB LR49800              ; ｻﾃﾗｲﾄ無しﾓｰﾄﾞ
AND<> DM2014 $00A1       ; RB7 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2014 $00A8       ; RB7 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2014 $00B8       ; RB7 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2014 $00E5       ; RB7 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2014 $00E8       ; RB7 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2014 $00E9       ; RB7 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2014 $00EA       ; RB7 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2014 $00F4       ; RB7 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2014 $00F8       ; RB7 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2014 $00FA       ; RB7 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2014 $00FB       ; RB7 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2014 $00FC       ; RB7 ｱﾗｰﾑｺｰﾄﾞ
OUT R52001               ; RB7解除不可異常発生無し
LDB LR49800              ; ｻﾃﾗｲﾄ無しﾓｰﾄﾞ
AND R18302               ; A-RB7 電源ON
TMR @16 #50
CON
AND @T16
MPS
BAND DM2015 #3           ; RB7 状態信号
TMR @9 #50
CON
AND @T9
@SET @MR215              ; RB7 Abnormal Flag
MPP
AND MR14509              ; RB7 PCON移動NG
@SET @MR215              ; RB7 Abnormal Flag
LD @MR215                ; RB7 Abnormal Flag
ANB @MR208
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
SET @MR208
CON
MPS
BRES DM2215 #3           ; RB7 制御信号
CON
@SET @MR209
MRD
MOV #170 DM400           ; ﾒｯｾｰｼﾞNo.
MPP
LD MR19000               ; 注入中
ANB MR19002              ; 注入2異常
ANL
SET MR19002              ; 注入2異常
STG @MR209
AND R50008               ; Error
RES @MR215               ; RB7 Abnormal Flag
CON
MPS
ANB R52001               ; RB7解除不可異常発生無し
SET MR26303              ; A-ENB7 ｲﾈｰﾌﾞﾙ
CON
JMP @MR210
MPP
AND R52001               ; RB7解除不可異常発生無し
JMP @MR211
STG @MR210
ANB R50008               ; Error
RES MR14509              ; RB7 PCON移動NG
CON
RES @MR208
CON
RES MR26302              ; A-RB7 電源ON
CON
SET R50011               ; TRAP
CON
ENDS
STG @MR211
ANB R50008               ; Error
RES MR14509              ; RB7 PCON移動NG
CON
RES @MR208
CON
BSET DM2215 #3           ; RB7 制御信号
CON
ENDS
LD MR19002               ; 注入2異常
BAND DM2215 #3           ; RB7 制御信号
BANB DM2015 #3           ; RB7 状態信号
BRES DM2215 #3           ; RB7 制御信号
;Err  RB8異常 / RB8 Alarm
LDB LR49800              ; ｻﾃﾗｲﾄ無しﾓｰﾄﾞ
AND<> DM2022 $00A1       ; RB8 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2022 $00A8       ; RB8 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2022 $00B8       ; RB8 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2022 $00E5       ; RB8 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2022 $00E8       ; RB8 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2022 $00E9       ; RB8 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2022 $00EA       ; RB8 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2022 $00F4       ; RB8 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2022 $00F8       ; RB8 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2022 $00FA       ; RB8 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2022 $00FB       ; RB8 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2022 $00FC       ; RB8 ｱﾗｰﾑｺｰﾄﾞ
OUT R52002               ; RB8解除不可異常発生無し
LDB LR49800              ; ｻﾃﾗｲﾄ無しﾓｰﾄﾞ
AND R18400               ; A-RB8 電源ON
TMR @41 #50
CON
AND @T41
MPS
BAND DM2023 #3           ; RB8 状態信号
TMR @42 #50
CON
AND @T42
@SET @MR307
MPP
AND MR14609              ; RB8 PCON移動NG
@SET @MR307
LD @MR307
ANB @MR300
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
SET @MR300
CON
MPS
BRES DM2223 #3           ; RB8 制御信号
CON
@SET @MR301
MRD
MOV #125 DM400           ; ﾒｯｾｰｼﾞNo.
MPP
LD MR19000               ; 注入中
ANB MR19007              ; 注入3異常
ANL
SET MR19007              ; 注入3異常
STG @MR301
AND R50008               ; Error
RES @MR307
CON
MPS
ANB R52002               ; RB8解除不可異常発生無し
SET MR26401              ; A-ENB8 ｲﾈｰﾌﾞﾙ
CON
JMP @MR302
MPP
AND R52002               ; RB8解除不可異常発生無し
JMP @MR303
STG @MR302
ANB R50008               ; Error
RES MR14609              ; RB8 PCON移動NG
CON
RES @MR300
CON
RES MR26400              ; A-RB8 電源ON
CON
SET R50011               ; TRAP
CON
ENDS
STG @MR303
ANB R50008               ; Error
RES MR14609              ; RB8 PCON移動NG
CON
RES @MR300
CON
BSET DM2223 #3           ; RB8 制御信号
CON
ENDS
LD MR19007               ; 注入3異常
BAND DM2223 #3           ; RB8 制御信号
BANB DM2023 #3           ; RB8 状態信号
BRES DM2223 #3           ; RB8 制御信号
;Err  RB9異常 / RB9 Alarm
LDB LR49800              ; ｻﾃﾗｲﾄ無しﾓｰﾄﾞ
AND<> DM2030 $00A1       ; RB9 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2030 $00A8       ; RB9 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2030 $00B8       ; RB9 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2030 $00E5       ; RB9 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2030 $00E8       ; RB9 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2030 $00E9       ; RB9 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2030 $00EA       ; RB9 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2030 $00F4       ; RB9 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2030 $00F8       ; RB9 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2030 $00FA       ; RB9 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2030 $00FB       ; RB9 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2030 $00FC       ; RB9 ｱﾗｰﾑｺｰﾄﾞ
OUT R52003               ; RB9解除不可異常発生無し
LDB LR49800              ; ｻﾃﾗｲﾄ無しﾓｰﾄﾞ
AND R18402               ; A-RB9 電源ON
TMR @43 #50
CON
AND @T43
MPS
BAND DM2031 #3           ; RB9 状態信号
TMR @44 #50
CON
AND @T44
@SET @MR315
MPP
AND MR14709              ; RB9 PCON移動NG
@SET @MR315
LD @MR315
ANB @MR308
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
SET @MR308
CON
MPS
BRES DM2231 #3           ; RB9 制御信号
CON
@SET @MR309
MRD
MOV #126 DM400           ; ﾒｯｾｰｼﾞNo.
MPP
LD MR19000               ; 注入中
ANB MR19008              ; 注入4異常
ANL
SET MR19008              ; 注入4異常
STG @MR309
AND R50008               ; Error
RES @MR315
CON
MPS
ANB R52003               ; RB9解除不可異常発生無し
SET MR26403              ; A-ENB9 ｲﾈｰﾌﾞﾙ
CON
JMP @MR310
MPP
AND R52003               ; RB9解除不可異常発生無し
JMP @MR311
STG @MR310
ANB R50008               ; Error
RES MR14709              ; RB9 PCON移動NG
CON
RES @MR308
CON
RES MR26402              ; A-RB9 電源ON
CON
SET R50011               ; TRAP
CON
ENDS
STG @MR311
ANB R50008               ; Error
RES MR14709              ; RB9 PCON移動NG
CON
RES @MR308
CON
BSET DM2231 #3           ; RB9 制御信号
CON
ENDS
LD MR19008               ; 注入4異常
BAND DM2231 #3           ; RB9 制御信号
BANB DM2031 #3           ; RB9 状態信号
BRES DM2231 #3           ; RB9 制御信号
;Err  RB10異常 / RB10 Alarm
LD<> DM2038 $00A1        ; RB10 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2038 $00A8       ; RB10 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2038 $00B8       ; RB10 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2038 $00E5       ; RB10 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2038 $00E8       ; RB10 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2038 $00E9       ; RB10 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2038 $00EA       ; RB10 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2038 $00F4       ; RB10 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2038 $00F8       ; RB10 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2038 $00FA       ; RB10 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2038 $00FB       ; RB10 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2038 $00FC       ; RB10 ｱﾗｰﾑｺｰﾄﾞ
OUT R52004               ; RB10解除不可異常発生無し
LD R18500                ; A-RB10 電源ON
AND DM2039.14
AND MR19500              ; RB10:DN正常通信中
TMR @45 #50
CON
AND @T45
MPS
BAND DM2039 #3           ; RB10 状態信号
TMR @46 #50
CON
AND @T46
@SET @MR407
MPP
AND MR14809              ; RB10 PCON移動NG
@SET @MR407
LD @MR407
ANB @MR400
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
SET @MR400
CON
MPS
BRES DM2239 #3           ; RB10 制御信号
CON
@SET @MR401
MPP
MOV #127 DM400           ; ﾒｯｾｰｼﾞNo.
STG @MR401
AND R50008               ; Error
RES @MR407
CON
MPS
ANB R52004               ; RB10解除不可異常発生無し
SET MR26201              ; A-ENB10 ｲﾈｰﾌﾞﾙ
CON
JMP @MR402
MPP
AND R52004               ; RB10解除不可異常発生無し
JMP @MR403
STG @MR402
ANB R50008               ; Error
RES MR14809              ; RB10 PCON移動NG
CON
RES @MR400
CON
RES MR26200              ; A-RB10 電源ON
CON
SET R50011               ; TRAP
CON
ENDS
STG @MR403
ANB R50008               ; Error
RES MR14809              ; RB10 PCON移動NG
CON
RES @MR400
CON
BSET DM2239 #3           ; RB10 制御信号
CON
ENDS
;Err  RB11異常 / RB11 Alarm
LD<> DM2046 $00A1        ; RB11 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2046 $00A8       ; RB11 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2046 $00B8       ; RB11 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2046 $00E5       ; RB11 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2046 $00E8       ; RB11 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2046 $00E9       ; RB11 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2046 $00EA       ; RB11 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2046 $00F4       ; RB11 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2046 $00F8       ; RB11 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2046 $00FA       ; RB11 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2046 $00FB       ; RB11 ｱﾗｰﾑｺｰﾄﾞ
AND<> DM2046 $00FC       ; RB11 ｱﾗｰﾑｺｰﾄﾞ
OUT R52005               ; RB11解除不可異常発生無し
LD R18502                ; A-RB11 電源ON
AND DM2047.14
AND MR19501              ; RB11:DN正常通信中
TMR @47 #50
CON
AND @T47
MPS
BAND DM2047 #3           ; RB11 状態信号
TMR @48 #50
CON
AND @T48
@SET @MR415
MPP
AND MR14909              ; RB11 SCON移動NG
@SET @MR415
LD @MR415
ANB @MR408
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
SET @MR408
CON
MPS
BRES DM2247 #3           ; RB11 制御信号
CON
@SET @MR409
MPP
MOV #128 DM400           ; ﾒｯｾｰｼﾞNo.
STG @MR409
AND R50008               ; Error
RES @MR415
CON
MPS
ANB R52005               ; RB11解除不可異常発生無し
SET MR26203              ; A-ENB11 ｲﾈｰﾌﾞﾙ
CON
JMP @MR410
MPP
AND R52005               ; RB11解除不可異常発生無し
JMP @MR411
STG @MR410
ANB R50008               ; Error
RES MR14909              ; RB11 SCON移動NG
CON
RES @MR408
CON
RES MR26202              ; A-RB11 電源ON
CON
SET R50011               ; TRAP
CON
ENDS
STG @MR411
ANB R50008               ; Error
RES MR14909              ; RB11 SCON移動NG
CON
RES @MR408
CON
BSET DM2247 #3           ; RB11 制御信号
CON
ENDS
;搬送P&P Pack
LD R15900                ; A-RB3 電源ON
LDB R12000               ; 給材ﾊﾝﾄﾞ動作可能
ORB R12200               ; 除材ﾊﾝﾄﾞ動作可能
ANL
OR R12009                ; 給材P&P_取出位置移動完了
OR R12012                ; 給材P&P_挿入位置下降完了
OR R12210                ; 除材P&P_取出位置下降完了
OR R12212                ; 除材P&P_挿入位置下降完了
OR R11815                ; RB3_原点復帰中
OR MR19003               ; RB復帰中
AND MR18415              ; RB3:DN正常通信中
OUT R51612               ; 搬送P&P Pack
END
ENDH
