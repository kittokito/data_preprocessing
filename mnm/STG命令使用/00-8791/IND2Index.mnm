DEVICE:53
;MODULE:IND2Index
;MODULE_TYPE:0
;***************************************
; 非常停止
; Emergency Stop 
;***************************************
LD R50010                ; Emergency　Stop
OR @MR000                ; Emergency STOP
ZRES @MR001 @MR2715      ; ST1ｼﾘﾝﾀﾞ 干渉外  4708
CON
OUT @MR000               ; Emergency STOP
TMR @0 #5
LD @T0
MDSTOP IND2Index
;***************************************
; ﾎﾟｰｽﾞ ･ ｴﾗｰ 監視
; Pause ･ Error Check 
;***************************************
LDB R50300               ; Pause
ANB R51400               ; Err IND2
OUT @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
;***************************************
; INDEXｼﾘﾝﾀﾞｲﾝﾀｰﾛｯｸﾁｪｯｸ
; INDEX Cylinder Interlock Check 
;***************************************
LDB R5408                ; IND2 INDEX位置決め 上限
AND R5409                ; IND2 INDEX位置決め 下限
ANB R5400                ; IND2 ST1治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R5401                ; IND2 ST1治具ｴｱｰ供給ﾉｽﾞﾙ 下限
OUT @MR001               ; ST1ｼﾘﾝﾀﾞ 干渉外
LDB R5402                ; IND2 ST2治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R5403                ; IND2 ST2治具ｴｱｰ供給ﾉｽﾞﾙ 下限
OUT @MR002               ; ST2ｼﾘﾝﾀﾞ 干渉外
LDB R5404                ; IND2 ST3治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R5405                ; IND2 ST3治具ｴｱｰ供給ﾉｽﾞﾙ 下限
LDB R5602                ; 剥離F 吸着ﾍｯﾄﾞ(2) 下限
AND R5603                ; 剥離F 吸着ﾍｯﾄﾞ(2) 上限
OR R5605                 ; 剥離F ﾍｯﾄﾞ 切出側限   (外側)
ANL
ANB R5606                ; 剥離F ﾜｰｸ押さえ　下降限
AND R5607                ; 剥離F ﾜｰｸ押さえ　上昇限
ANB R10908               ; RB2_PSEL_軸1Busy
AND R10910               ; RB2_PSEL_ｿﾞｰﾝ出力設定用1
OUT @MR003               ; ST3ｼﾘﾝﾀﾞ 干渉外
LDB R5406                ; IND2 ST4治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R5407                ; IND2 ST4治具ｴｱｰ供給ﾉｽﾞﾙ 下限
LD R11905                ; 給材P&P-IND2 Z軸干渉外
ORB R11900               ; 給材P&P干渉外
ANL
OUT @MR004               ; ST4ｼﾘﾝﾀﾞ 干渉外
LD @MR001                ; ST1ｼﾘﾝﾀﾞ 干渉外
AND @MR002               ; ST2ｼﾘﾝﾀﾞ 干渉外
AND @MR003               ; ST3ｼﾘﾝﾀﾞ 干渉外
AND @MR004               ; ST4ｼﾘﾝﾀﾞ 干渉外
OUT @MR005               ; INDEXｼﾘﾝﾀﾞ全干渉外
;<h1/>原点復帰動作
;HOME RETURN OPERATION 
LD R50003                ; HOME
ANB R51306               ; IND2 DO
SET R51306               ; IND2 DO
CON
SET @MR1000              ; INDEX 原点復帰開始
STG @MR1000              ; INDEX 原点復帰開始
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
SET @MR1001              ; IND2 原点復帰中
CON
ZRES DM3200 DM3799       ; IND2-ST2 QRID-1  排出時読込 
CON
DW #4 DM668              ; 原点復帰時IND2回転回数
CON
JMP @MR1002              ; 1002
STG @MR1002              ; 1002
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
AND R50003               ; HOME
RES MR1103               ; IND2 CW回転Fin
CON
RES R50407               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点灯
CON
SET R50406               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
AND R1101                ; ﾗｲﾄｶｰﾃﾝ
AND R50105               ; ｽﾀｰﾄSW ON
RES R50406               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
SET R50408               ; ｻｲｸﾙ動作中
CON
JMP @MR1003              ; 1003
STG @MR1003              ; 1003
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
RES MR8004               ; IND 2 位置決め 上昇
CON
SET MR8005               ; IND2 位置決め 下降
CON
RES MR8100               ; IND2 ST1治具1(縦) 閉じ
CON
RES MR8101               ; IND2 ST1治具1(縦) 開き
CON
RES MR8102               ; IND2 ST1治具2(横) 閉じ
CON
RES MR8103               ; IND2 ST1治具2(横) 開き
CON
RES MR8104               ; IND2 ST2治具 閉じ 
CON
RES MR8105               ; IND2 ST2治具 開き
CON
RES MR8106               ; IND2 ST3治具 閉じ
CON
RES MR8107               ; IND2 ST3治具 開き
CON
RES MR8108               ; IND2 ST4治具 閉じ
CON
RES MR8109               ; IND2 ST4治具 開き
CON
RES MR8002               ; IND2 治具ｴｱｰ供給 ﾉｽﾞﾙ 上昇
CON
ANB R5408                ; IND2 INDEX位置決め 上限
AND R5409                ; IND2 INDEX位置決め 下限
ANB R5400                ; IND2 ST1治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R5401                ; IND2 ST1治具ｴｱｰ供給ﾉｽﾞﾙ 下限
ANB R5402                ; IND2 ST2治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R5403                ; IND2 ST2治具ｴｱｰ供給ﾉｽﾞﾙ 下限
ANB R5404                ; IND2 ST3治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R5405                ; IND2 ST3治具ｴｱｰ供給ﾉｽﾞﾙ 下限
ANB R5406                ; IND2 ST4治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R5407                ; IND2 ST4治具ｴｱｰ供給ﾉｽﾞﾙ 下限
JMP @MR1004              ; 1004
STG @MR1004              ; 1004
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
LD R5102                 ; 4Cellより　インターロックON
OR MR014                 ; 上流H/S無効
ANL
TMH @19 #10
CON
AND @T19
JMP @MR1005              ; 1005
STG @MR1005              ; 1005
TMH @6 #3
CON
AND @T6
AND MR15004              ; 給材P&P原点復帰完了
MPS
AND @MR005               ; INDEXｼﾘﾝﾀﾞ全干渉外
JMP @MR1100              ; 1100
MPP
ANB @MR005               ; INDEXｼﾘﾝﾀﾞ全干渉外
SET @MR304               ; Err160 INDEX Err10
CON
JMP @MR1014              ; 1014
;Err180
STG @MR1014              ; 1014
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
AND @MR307               ; Err160 INDEX Err10解除完了
JMP @MR1015              ; 1015
STG @MR1015              ; 1015
RES @MR307               ; Err160 INDEX Err10解除完了
CON
JMP @MR1003              ; 1003
;
STG @MR1100              ; 1100
RES MR15004              ; 給材P&P原点復帰完了
CON
SET R51406               ; PACK INDEX2
CON
JMP @MR1101              ; 1101
STG @MR1101              ; 1101
SET R50106               ; ﾐｭｰﾃｨﾝｸﾞﾘｾｯﾄ
CON
LD T723                  ; IND2電源再投入ﾃﾞｨﾚｲ
OR R15004                ; IND2 電源ON
ANL
MPS
AND @MR005               ; INDEXｼﾘﾝﾀﾞ全干渉外
SET MR1100               ; IND2 原点復帰SUB
CON
JMP @MR1102              ; 1102
MPP
ANB @MR005               ; INDEXｼﾘﾝﾀﾞ全干渉外
SET @MR304               ; Err160 INDEX Err10
CON
JMP @MR1014              ; 1014
STG @MR1102              ; 1102
AND MR1101               ; IND2 原点復帰完了
RES R50106               ; ﾐｭｰﾃｨﾝｸﾞﾘｾｯﾄ
CON
SET MR1014               ; IND2原点復帰完了
CON
JMP @MR1103              ; 1103
STG @MR1103              ; 1103
SET MR8002               ; IND2 治具ｴｱｰ供給 ﾉｽﾞﾙ 上昇
CON
AND R5400                ; IND2 ST1治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R5402                ; IND2 ST2治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R5404                ; IND2 ST3治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R5406                ; IND2 ST4治具ｴｱｰ供給ﾉｽﾞﾙ 上限
RES MR8100               ; IND2 ST1治具1(縦) 閉じ
CON
SET MR8101               ; IND2 ST1治具1(縦) 開き
CON
RES MR8102               ; IND2 ST1治具2(横) 閉じ
CON
SET MR8103               ; IND2 ST1治具2(横) 開き
CON
SET MR8104               ; IND2 ST2治具 閉じ 
CON
RES MR8105               ; IND2 ST2治具 開き
CON
SET MR8106               ; IND2 ST3治具 閉じ
CON
RES MR8107               ; IND2 ST3治具 開き
CON
RES MR8108               ; IND2 ST4治具 閉じ
CON
SET MR8109               ; IND2 ST4治具 開き
CON
TMH @2 #20
CON
AND @T2
JMP @MR1104
STG @MR1104
RES MR8104               ; IND2 ST2治具 閉じ 
CON
RES MR8106               ; IND2 ST3治具 閉じ
CON
RES MR8108               ; IND2 ST4治具 閉じ
CON
RES MR1101               ; IND2 原点復帰完了
CON
RES R50408               ; ｻｲｸﾙ動作中
CON
RES R51406               ; PACK INDEX2
CON
JMP @MR1300              ; ST1以外にｹｰｽ有るかも
;
STG @MR1108              ; 1108
RES R50408               ; ｻｲｸﾙ動作中
CON
TMH @1 #10
CON
AND @T1
RES R51406               ; PACK INDEX2
CON
JMP @MR1109              ; 1109
STG @MR1109              ; 1109
JMP @MR1200              ; 1200
;ケースチェック
;Check the Case
;UT1のﾜｰｸﾁｪｯｸﾌﾗｸﾞ
;UT1 Work Check Flag
LDB R5300                ; IND2 ST1 ﾜｰｸ有無検出
OUT @MR010               ; ST1にｹｰｽ無し
;
STG @MR1200              ; 1200
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
MPS
AND @MR010               ; ST1にｹｰｽ無し
MPS
AND= DM668 #0            ; 原点復帰時IND2回転回数
JMP @MR1201              ; INDEX上にｹｰｽ無し
MPP
AND<> DM668 #0           ; 原点復帰時IND2回転回数
RES R51406               ; PACK INDEX2
CON
JMP @MR1300              ; ST1以外にｹｰｽ有るかも
MPP
ANB @MR010               ; ST1にｹｰｽ無し
SET @MR108               ; Err153 INDEX Err3
CON
JMP @MR1208              ; ST1 ｹｰｽ有り
STG @MR1201              ; INDEX上にｹｰｽ無し
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
SET MR8002               ; IND2 治具ｴｱｰ供給 ﾉｽﾞﾙ 上昇
CON
AND R5400                ; IND2 ST1治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R5402                ; IND2 ST2治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R5404                ; IND2 ST3治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R5406                ; IND2 ST4治具ｴｱｰ供給ﾉｽﾞﾙ 上限
JMP @MR1202              ; 1202
STG @MR1202              ; 1202
RES MR8100               ; IND2 ST1治具1(縦) 閉じ
CON
SET MR8101               ; IND2 ST1治具1(縦) 開き
CON
RES MR8102               ; IND2 ST1治具2(横) 閉じ
CON
SET MR8103               ; IND2 ST1治具2(横) 開き
CON
SET MR8104               ; IND2 ST2治具 閉じ 
CON
RES MR8105               ; IND2 ST2治具 開き
CON
SET MR8106               ; IND2 ST3治具 閉じ
CON
RES MR8107               ; IND2 ST3治具 開き
CON
RES MR8108               ; IND2 ST4治具 閉じ
CON
SET MR8109               ; IND2 ST4治具 開き
CON
TMR @16 #30
CON
AND @T16
RES MR1103               ; IND2 CW回転Fin
CON
RES R50408               ; ｻｲｸﾙ動作中
CON
JMP @MR1203              ; 1203
STG @MR1203              ; 1203
RES MR8101               ; IND2 ST1治具1(縦) 開き
CON
RES MR8103               ; IND2 ST1治具2(横) 開き
CON
RES MR8105               ; IND2 ST2治具 開き
CON
RES MR8106               ; IND2 ST3治具 閉じ
CON
RES MR8109               ; IND2 ST4治具 開き
CON
RES @MR1001              ; IND2 原点復帰中
CON
SET R51305               ; IND2INDEX  1ｻｲｸﾙ終了
CON
ENDS
;INDEX ST1ワーク残り　エラー解除・除材
STG @MR1208              ; ST1 ｹｰｽ有り
AND @MR111               ; Err153 INDEX Err3解除完了
JMP @MR1209              ; 2301
STG @MR1209              ; 2301
RES @MR111               ; Err153 INDEX Err3解除完了
CON
JMP @MR1108              ; 1108
;INDEX ワーク残りの為､INDEX回転
STG @MR1300              ; ST1以外にｹｰｽ有るかも
SET R50406               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
AND R1101                ; ﾗｲﾄｶｰﾃﾝ
AND R50105               ; ｽﾀｰﾄSW ON
RES R50406               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
SET @MR2200              ; ﾜｰｸ浮きﾁｪｯｸ開始
CON
JMP @MR1301              ; 1301
STG @MR1301              ; 1301
AND @MR2215              ; ﾜｰｸ浮きﾁｪｯｸ終了
RES @MR2215              ; ﾜｰｸ浮きﾁｪｯｸ終了
CON
JMP @MR1302              ; 1302
STG @MR1302              ; 1302
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
SET MR8104               ; IND2 ST2治具 閉じ 
CON
RES MR8105               ; IND2 ST2治具 開き
CON
SET MR8106               ; IND2 ST3治具 閉じ
CON
RES MR8107               ; IND2 ST3治具 開き
CON
SET MR8108               ; IND2 ST4治具 閉じ
CON
RES MR8109               ; IND2 ST4治具 開き
CON
TMH @5 #10
CON
AND @T5
JMP @MR1303              ; 1303
STG @MR1303              ; 1303
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
TMH @9 #10
CON
AND @T9
RES MR8004               ; IND 2 位置決め 上昇
CON
SET MR8005               ; IND2 位置決め 下降
CON
RES MR8104               ; IND2 ST2治具 閉じ 
CON
RES MR8106               ; IND2 ST3治具 閉じ
CON
RES MR8108               ; IND2 ST4治具 閉じ
CON
RES MR8002               ; IND2 治具ｴｱｰ供給 ﾉｽﾞﾙ 上昇
CON
ANB R5408                ; IND2 INDEX位置決め 上限
AND R5409                ; IND2 INDEX位置決め 下限
ANB R5400                ; IND2 ST1治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R5401                ; IND2 ST1治具ｴｱｰ供給ﾉｽﾞﾙ 下限
ANB R5402                ; IND2 ST2治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R5403                ; IND2 ST2治具ｴｱｰ供給ﾉｽﾞﾙ 下限
ANB R5404                ; IND2 ST3治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R5405                ; IND2 ST3治具ｴｱｰ供給ﾉｽﾞﾙ 下限
ANB R5406                ; IND2 ST4治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R5407                ; IND2 ST4治具ｴｱｰ供給ﾉｽﾞﾙ 下限
JMP @MR1304
STG @MR1304
MPS
AND @MR005               ; INDEXｼﾘﾝﾀﾞ全干渉外
SET R51406               ; PACK INDEX2
CON
JMP @MR1400              ; 1400
MPP
ANB @MR005               ; INDEXｼﾘﾝﾀﾞ全干渉外
SET @MR304               ; Err160 INDEX Err10
CON
JMP @MR1308              ; 1308
;Err180
STG @MR1308              ; 1308
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
AND @MR307               ; Err160 INDEX Err10解除完了
JMP @MR1309              ; 1309
STG @MR1309              ; 1309
RES @MR307               ; Err160 INDEX Err10解除完了
CON
JMP @MR1303              ; 1303
;
STG @MR1400              ; 1400
SET MR1102               ; IND2 90°CW回転SUB
CON
SET R50106               ; ﾐｭｰﾃｨﾝｸﾞﾘｾｯﾄ
CON
SET R50408               ; ｻｲｸﾙ動作中
CON
DEC DM668                ; 原点復帰時IND2回転回数
CON
JMP @MR1401              ; 1401
STG @MR1401              ; 1401
MPS
LDB MR1010               ; ﾗｲﾄｶｰﾃﾝ遮光
AND MR1103               ; IND2 CW回転Fin
ANL
JMP @MR1402
MPP
AND MR1010               ; ﾗｲﾄｶｰﾃﾝ遮光
JMP @MR2800              ; Light curtain shade in rotating 
;ﾗｲﾄｶｰﾃﾝ遮光時処理
;Light Curtain shade process
STG @MR2800              ; Light curtain shade in rotating 
AND R50300               ; Pause
ANB R50105               ; ｽﾀｰﾄSW ON
RES R50408               ; ｻｲｸﾙ動作中
CON
RES R51406               ; PACK INDEX2
CON
JMP @MR2801
STG @MR2801
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
SET R50406               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
AND R50105               ; ｽﾀｰﾄSW ON
JMP @MR2802
STG @MR2802
SET R51406               ; PACK INDEX2
CON
RES R50406               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
SET R50106               ; ﾐｭｰﾃｨﾝｸﾞﾘｾｯﾄ
CON
JMP @MR1303              ; 1303
;
STG @MR1402
RES R50408               ; ｻｲｸﾙ動作中
CON
RES MR1103               ; IND2 CW回転Fin
CON
JMP @MR1108              ; 1108
;<h1/>自動運転
;AUTO OERATION
LD R50001                ; AUTO
ANB R51306               ; IND2 DO
ANB @MR1500              ; INDEX AUTO
SET R51306               ; IND2 DO
CON
SET @MR1500              ; INDEX AUTO
LDB LR41100              ; AUTO-0 全ﾕﾆｯﾄ動作
ANB LR41101              ; AUTO-1 IND1 2UT
ANB LR41102              ; AUTO-2 IND1 3UT
ANB LR41103              ; AUTO-3 IND1 4UT
ANB LR41104              ; AUTO-4 IND2 3UT
ANB LR41105              ; AUTO-5 IND3 3UT
ANB LR41106              ; AUTO-6
ANB LR41107              ; AUTO-7
ANB LR41108              ; AUTO-8
OUB @MR013               ; INDEX AUTO Parameter OK
;AUTO Operation Parameter No? / auto動作Ｎｏ．は？
STG @MR1500              ; INDEX AUTO
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
MPS
AND @MR013               ; INDEX AUTO Parameter OK
JMP @MR1508              ; 4010
MPP
ANB @MR013               ; INDEX AUTO Parameter OK
JMP @MR1501              ; 4003
;動作パラメーター設定不良
;Parameter Set NG
STG @MR1501              ; 4003
SET R50009               ; HOLDRQ
CON
SET R51305               ; IND2INDEX  1ｻｲｸﾙ終了
CON
ENDS
;
STG @MR1508              ; 4010
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
SET @MR2200              ; ﾜｰｸ浮きﾁｪｯｸ開始
CON
JMP @MR1502
STG @MR1502
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
AND @MR2215              ; ﾜｰｸ浮きﾁｪｯｸ終了
RES @MR2215              ; ﾜｰｸ浮きﾁｪｯｸ終了
CON
JMP @MR1503
STG @MR1503
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
AND R1101                ; ﾗｲﾄｶｰﾃﾝ
SET MR1112               ; IND2 監視
CON
JMP @MR1506
STG @MR1506
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
RES MR8004               ; IND 2 位置決め 上昇
CON
SET MR8005               ; IND2 位置決め 下降
CON
RES MR8100               ; IND2 ST1治具1(縦) 閉じ
CON
RES MR8101               ; IND2 ST1治具1(縦) 開き
CON
RES MR8102               ; IND2 ST1治具2(横) 閉じ
CON
RES MR8103               ; IND2 ST1治具2(横) 開き
CON
RES MR8104               ; IND2 ST2治具 閉じ 
CON
RES MR8105               ; IND2 ST2治具 開き
CON
RES MR8106               ; IND2 ST3治具 閉じ
CON
RES MR8107               ; IND2 ST3治具 開き
CON
RES MR8108               ; IND2 ST4治具 閉じ
CON
RES MR8109               ; IND2 ST4治具 開き
CON
JMP @MR1509
STG @MR1509
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
SET R51406               ; PACK INDEX2
CON
SET MR1111               ; IND2 監視
CON
SET R50106               ; ﾐｭｰﾃｨﾝｸﾞﾘｾｯﾄ
CON
JMP @MR1510              ; 4008
STG @MR1510              ; 4008
MPS
LDB MR5401               ; Cylinder Error 5401
ANB MR5403               ; Cylinder Error 5403
ANB MR5405               ; Cylinder Error 5405
ANB MR5407               ; Cylinder Error 5407
ANB MR5409               ; Cylinder Error 5409
ANL
RES MR8002               ; IND2 治具ｴｱｰ供給 ﾉｽﾞﾙ 上昇
CON
ANB R5400                ; IND2 ST1治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R5401                ; IND2 ST1治具ｴｱｰ供給ﾉｽﾞﾙ 下限
ANB R5402                ; IND2 ST2治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R5403                ; IND2 ST2治具ｴｱｰ供給ﾉｽﾞﾙ 下限
ANB R5404                ; IND2 ST3治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R5405                ; IND2 ST3治具ｴｱｰ供給ﾉｽﾞﾙ 下限
ANB R5406                ; IND2 ST4治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R5407                ; IND2 ST4治具ｴｱｰ供給ﾉｽﾞﾙ 下限
ANB R5408                ; IND2 INDEX位置決め 上限
AND R5409                ; IND2 INDEX位置決め 下限
ANB MR1010               ; ﾗｲﾄｶｰﾃﾝ遮光
JMP @MR1511              ; 4009
MPP
LD MR5401                ; Cylinder Error 5401
OR MR5403                ; Cylinder Error 5403
OR MR5405                ; Cylinder Error 5405
OR MR5407                ; Cylinder Error 5407
OR MR5409                ; Cylinder Error 5409
OR MR1010                ; ﾗｲﾄｶｰﾃﾝ遮光
ANL
RES MR1111               ; IND2 監視
CON
RES R51406               ; PACK INDEX2
CON
JMP @MR1508              ; 4010
STG @MR1511              ; 4009
MPS
AND @MR005               ; INDEXｼﾘﾝﾀﾞ全干渉外
TMH @18 #10
CON
AND @T18
JMP @MR1600              ; 4011
MPP
ANB @MR005               ; INDEXｼﾘﾝﾀﾞ全干渉外
RES R51406               ; PACK INDEX2
CON
SET @MR304               ; Err160 INDEX Err10
CON
JMP @MR1514              ; 6908
;Err180 Release
STG @MR1514              ; 6908
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
AND @MR307               ; Err160 INDEX Err10解除完了
JMP @MR1515              ; 6909
STG @MR1515              ; 6909
RES @MR307               ; Err160 INDEX Err10解除完了
CON
JMP @MR1508              ; 4010
;
STG @MR1600              ; 4011
SET R51406               ; PACK INDEX2
CON
SET R50106               ; ﾐｭｰﾃｨﾝｸﾞﾘｾｯﾄ
CON
SET @MR2300              ; IND2上ｹｰｽ記憶開始
CON
JMP @MR1601              ; 4012
STG @MR1601              ; 4012
AND @MR2301              ; IND2上ｹｰｽ記憶完了
RES @MR2301              ; IND2上ｹｰｽ記憶完了
CON
JMP @MR1602              ; 4013
STG @MR1602              ; 4013
MPS
AND @MR005               ; INDEXｼﾘﾝﾀﾞ全干渉外
JMP @MR1604
MPP
ANB @MR005               ; INDEXｼﾘﾝﾀﾞ全干渉外
SET @MR304               ; Err160 INDEX Err10
CON
JMP @MR1603              ; 4014
;Err 180
STG @MR1603              ; 4014
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
AND @MR307               ; Err160 INDEX Err10解除完了
RES @MR307               ; Err160 INDEX Err10解除完了
CON
JMP @MR1508              ; 4010
;
STG @MR1604
SET R50106               ; ﾐｭｰﾃｨﾝｸﾞﾘｾｯﾄ
CON
SET MR1102               ; IND2 90°CW回転SUB
CON
JMP @MR1605
STG @MR1605
MPS
LDB MR1010               ; ﾗｲﾄｶｰﾃﾝ遮光
AND MR1103               ; IND2 CW回転Fin
ANL
JMP @MR1700              ; 4100
MPP
AND MR1010               ; ﾗｲﾄｶｰﾃﾝ遮光
JMP @MR1608              ; INDEX回転中ﾗｲﾄｶｰﾃﾝ遮光
;
STG @MR1608              ; INDEX回転中ﾗｲﾄｶｰﾃﾝ遮光
AND R50300               ; Pause
ANB R50105               ; ｽﾀｰﾄSW ON
RES R50408               ; ｻｲｸﾙ動作中
CON
RES R51406               ; PACK INDEX2
CON
JMP @MR1609              ; 4301
STG @MR1609              ; 4301
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
RES R50407               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点灯
CON
SET R50406               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
AND R50105               ; ｽﾀｰﾄSW ON
JMP @MR1610              ; 4302
STG @MR1610              ; 4302
RES R50406               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
SET R50407               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点灯
CON
SET R50106               ; ﾐｭｰﾃｨﾝｸﾞﾘｾｯﾄ
CON
SET R50408               ; ｻｲｸﾙ動作中
CON
JMP @MR1508              ; 4010
;
STG @MR1700              ; 4100
RES MR1103               ; IND2 CW回転Fin
CON
RES R50408               ; ｻｲｸﾙ動作中
CON
JMP @MR1701              ; 4101
STG @MR1701              ; 4101
MPS
LD R10002                ; IND2 Alarm1 正常=ON
AND R10003               ; IND2 Alarm2 正常=ON
ANL
RES R51406               ; PACK INDEX2
CON
JMP @MR1702              ; 4102
MPP
LDB R10002               ; IND2 Alarm1 正常=ON
ORB R10003               ; IND2 Alarm2 正常=ON
ANL
TMH @7 #100
CON
AND @T7
SET R50005               ; PAUSERQ
CON
RES R51406               ; PACK INDEX2
CON
JMP @MR1705
STG @MR1702              ; 4102
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
SET MR8002               ; IND2 治具ｴｱｰ供給 ﾉｽﾞﾙ 上昇
CON
AND R5400                ; IND2 ST1治具ｴｱｰ供給ﾉｽﾞﾙ 上限
ANB R5401                ; IND2 ST1治具ｴｱｰ供給ﾉｽﾞﾙ 下限
AND R5402                ; IND2 ST2治具ｴｱｰ供給ﾉｽﾞﾙ 上限
ANB R5403                ; IND2 ST2治具ｴｱｰ供給ﾉｽﾞﾙ 下限
AND R5404                ; IND2 ST3治具ｴｱｰ供給ﾉｽﾞﾙ 上限
ANB R5405                ; IND2 ST3治具ｴｱｰ供給ﾉｽﾞﾙ 下限
AND R5406                ; IND2 ST4治具ｴｱｰ供給ﾉｽﾞﾙ 上限
ANB R5407                ; IND2 ST4治具ｴｱｰ供給ﾉｽﾞﾙ 下限
JMP @MR1703
STG @MR1705
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
JMP @MR1701              ; 4101
STG @MR1703
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
RES MR8100               ; IND2 ST1治具1(縦) 閉じ
CON
SET MR8101               ; IND2 ST1治具1(縦) 開き
CON
RES MR8102               ; IND2 ST1治具2(横) 閉じ
CON
SET MR8103               ; IND2 ST1治具2(横) 開き
CON
SET MR8104               ; IND2 ST2治具 閉じ 
CON
RES MR8105               ; IND2 ST2治具 開き
CON
SET MR8106               ; IND2 ST3治具 閉じ
CON
RES MR8107               ; IND2 ST3治具 開き
CON
RES MR8108               ; IND2 ST4治具 閉じ
CON
SET MR8109               ; IND2 ST4治具 開き
CON
JMP @MR1704
STG @MR1704
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
MPS
LDB R5300                ; IND2 ST1 ﾜｰｸ有無検出
AND R5301                ; IND2 ST1 ﾜｰｸ浮き検出1(供給孔側)
AND R5302                ; IND2 ST1 ﾜｰｸ浮き検出2(ﾌｨﾙﾑ側)
ANL
JMP @MR1800              ; UT1 ｹｰｽ確認終了
MPP
LD R5300                 ; IND2 ST1 ﾜｰｸ有無検出
ORB R5301                ; IND2 ST1 ﾜｰｸ浮き検出1(供給孔側)
ORB R5302                ; IND2 ST1 ﾜｰｸ浮き検出2(ﾌｨﾙﾑ側)
ANL
MPS
AND= DM665 #0            ; IND2-NGﾜｰｸﾁｪｯｸ
JMP @MR1800              ; UT1 ｹｰｽ確認終了
MPP
AND<> DM665 #0           ; IND2-NGﾜｰｸﾁｪｯｸ
TMR @4 #5
CON
AND @T4
SET @MR112               ; Err154 INDEX Err4
CON
JMP @MR1708              ; 2109
;ＩＮＤＥＸ　ＵＴ１到着ワーク不良品 エラー・除材
STG @MR1708              ; 2109
TMR @8 #5
CON
AND @T8
AND @MR115               ; Err154 INDEX Err4解除完了
JMP @MR1709              ; 2110
STG @MR1709              ; 2110
RES @MR115               ; Err154 INDEX Err4解除完了
CON
JMP @MR1701              ; 4101
;動作終了
STG @MR1800              ; UT1 ｹｰｽ確認終了
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
SET MR8002               ; IND2 治具ｴｱｰ供給 ﾉｽﾞﾙ 上昇
CON
SET @MR2400              ; 到着ｹｰｽﾁｪｯｸ
CON
JMP @MR1801              ; 4111
STG @MR1801              ; 4111
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
AND @MR2401              ; 到着ｹｰｽﾁｪｯｸ完了
AND R5400                ; IND2 ST1治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R5402                ; IND2 ST2治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R5404                ; IND2 ST3治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R5406                ; IND2 ST4治具ｴｱｰ供給ﾉｽﾞﾙ 上限
JMP @MR1802              ; 4112
STG @MR1802              ; 4112
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
TMH @17 #5
CON
AND @T17
RES MR8104               ; IND2 ST2治具 閉じ 
CON
RES MR8106               ; IND2 ST3治具 閉じ
CON
RES MR8108               ; IND2 ST4治具 閉じ
CON
RES R50408               ; ｻｲｸﾙ動作中
CON
SET R51305               ; IND2INDEX  1ｻｲｸﾙ終了
CON
RES @MR2401              ; 到着ｹｰｽﾁｪｯｸ完了
CON
ENDS
;サブルーチン
;Subroutine
;INDEX 原点復帰動作
;INDEX HOME
;The starting point return of an index is program No.5.  
;By 4 division specification, it moves to a starting point position by the shortest. 
;/ ｲﾝﾃﾞｯｸｽの原点復帰は、ﾌﾟﾛｸﾞﾗﾑNo.５　4分割指定で、近周りで原点位置へ移動する
STG MR1100               ; IND2 原点復帰SUB
SET MR26015              ; IND2     非常停止
CON
TMH @3 #10
CON
AND @T3
SET MR26004              ; IND2 電源ON
CON
JMP @MR2000              ; 6003
STG @MR2000              ; 6003
AND R15004               ; IND2 電源ON
SET MR26012              ; IND2 ﾘｾｯﾄ
CON
JMP @MR2001              ; 6004
STG @MR2001              ; 6004
AND R10002               ; IND2 Alarm1 正常=ON
AND R10003               ; IND2 Alarm2 正常=ON
RES MR26012              ; IND2 ﾘｾｯﾄ
CON
JMP @MR2002              ; 6005
STG @MR2002              ; 6005
AND R10001               ; IND2 起動入力待ち
RES MR26007              ; IND2 ﾌﾟﾛｸﾞﾗﾑNo. 0bit
CON
SET MR26008              ; IND2 ﾌﾟﾛｸﾞﾗﾑNo. 1bit
CON
SET MR26009              ; IND2 ﾌﾟﾛｸﾞﾗﾑNo. 2bit
CON
TMH @12 #20
CON
AND @T12
SET MR26011              ; IND2 ﾌﾟﾛｸﾞﾗﾑNo. 1桁目
CON
JMP @MR2003              ; 6006
STG @MR2003              ; 6006
TMH @13 #10
CON
AND @T13
SET R51405               ; IND2回転中(SET/RESET)
CON
SET MR26013              ; IND2 起動
CON
ANB R10001               ; IND2 起動入力待ち
JMP @MR2004              ; 6007
STG @MR2004              ; 6007
RES MR26013              ; IND2 起動
CON
ZRES MR26007 MR26011     ; IND2 ﾌﾟﾛｸﾞﾗﾑNo. 0bit  IND2 ﾌﾟﾛｸﾞﾗﾑNo. 1桁目
CON
AND R10000               ; IND2 位置決め完了
SET MR26014              ; IND2 ｱﾝｻ
CON
JMP @MR2005
STG @MR2005
ANB R10000               ; IND2 位置決め完了
RES MR26014              ; IND2 ｱﾝｻ
CON
RES R51405               ; IND2回転中(SET/RESET)
CON
DW #0 DM669              ; IND2位置記憶
CON
JMP @MR2006
STG @MR2006
SET MR1101               ; IND2 原点復帰完了
CON
ENDS
;90 degrees positive rotation of an index chooses program No.0 to 3 in order, and starts it. 
;By 4 division specification, it moves to the following position of four positions. 
;If movement is completed, the following specification will be written in DM. 
; / ｲﾝﾃﾞｯｸｽの90度正回転は、ﾌﾟﾛｸﾞﾗﾑNo．０から３を順に選択し起動する
;4分割指定で、4位置の次位置へ移動する、移動が完了したらDMに次の指定を書込む
LD MR1111                ; IND2 監視
AND MR1010               ; ﾗｲﾄｶｰﾃﾝ遮光
RES MR1111               ; IND2 監視
CON
RES MR26013              ; IND2 起動
CON
RES MR26014              ; IND2 ｱﾝｻ
CON
ZRES MR26007 MR26011     ; IND2 ﾌﾟﾛｸﾞﾗﾑNo. 0bit  IND2 ﾌﾟﾛｸﾞﾗﾑNo. 1桁目
CON
RES MR1102               ; IND2 90°CW回転SUB
CON
ZRES @MR2100 @MR2115     ; INDEX 　　 CW回転sig
STG MR1102               ; IND2 90°CW回転SUB
RES MR1112               ; IND2 監視
CON
SET MR1111               ; IND2 監視
CON
ANB MR1010               ; ﾗｲﾄｶｰﾃﾝ遮光
SET MR26015              ; IND2     非常停止
CON
JMP @MR2100              ; INDEX 　　 CW回転sig
LD @MR2100               ; INDEX 　　 CW回転sig
ANB R10001               ; IND2 起動入力待ち
TMR #1 #100              ; ﾃﾞｨﾚｲ
CON
AND T1                   ; ﾃﾞｨﾚｲ
OUT MR615                ; ﾐｭｰﾃｨﾝｸﾞ不良ﾌﾗｸﾞ
STG @MR2100              ; INDEX 　　 CW回転sig
AND R10001               ; IND2 起動入力待ち
MPS
AND= DM669 #0            ; IND2位置記憶
SET MR26007              ; IND2 ﾌﾟﾛｸﾞﾗﾑNo. 0bit
CON
RES MR26008              ; IND2 ﾌﾟﾛｸﾞﾗﾑNo. 1bit
CON
RES MR26009              ; IND2 ﾌﾟﾛｸﾞﾗﾑNo. 2bit
CON
JMP @MR2101              ; 6103
MRD
AND= DM669 #1            ; IND2位置記憶
RES MR26007              ; IND2 ﾌﾟﾛｸﾞﾗﾑNo. 0bit
CON
SET MR26008              ; IND2 ﾌﾟﾛｸﾞﾗﾑNo. 1bit
CON
RES MR26009              ; IND2 ﾌﾟﾛｸﾞﾗﾑNo. 2bit
CON
JMP @MR2101              ; 6103
MRD
AND= DM669 #2            ; IND2位置記憶
SET MR26007              ; IND2 ﾌﾟﾛｸﾞﾗﾑNo. 0bit
CON
SET MR26008              ; IND2 ﾌﾟﾛｸﾞﾗﾑNo. 1bit
CON
RES MR26009              ; IND2 ﾌﾟﾛｸﾞﾗﾑNo. 2bit
CON
JMP @MR2101              ; 6103
MPP
AND= DM669 #3            ; IND2位置記憶
RES MR26007              ; IND2 ﾌﾟﾛｸﾞﾗﾑNo. 0bit
CON
RES MR26008              ; IND2 ﾌﾟﾛｸﾞﾗﾑNo. 1bit
CON
RES MR26009              ; IND2 ﾌﾟﾛｸﾞﾗﾑNo. 2bit
CON
JMP @MR2101              ; 6103
STG @MR2101              ; 6103
TMH @14 #3
CON
AND @T14
SET MR26011              ; IND2 ﾌﾟﾛｸﾞﾗﾑNo. 1桁目
CON
JMP @MR2102              ; 6104
STG @MR2102              ; 6104
TMH @15 #3
CON
AND @T15
SET R51405               ; IND2回転中(SET/RESET)
CON
SET MR26013              ; IND2 起動
CON
JMP @MR2103              ; 6200
STG @MR2103              ; 6200
ANB R10001               ; IND2 起動入力待ち
RES MR26013              ; IND2 起動
CON
ZRES MR26007 MR26011     ; IND2 ﾌﾟﾛｸﾞﾗﾑNo. 0bit  IND2 ﾌﾟﾛｸﾞﾗﾑNo. 1桁目
CON
JMP @MR2104              ; 6201
STG @MR2104              ; 6201
AND R10000               ; IND2 位置決め完了
SET MR26014              ; IND2 ｱﾝｻ
CON
JMP @MR2105              ; 6202
STG @MR2105              ; 6202
ANB R10000               ; IND2 位置決め完了
RES MR26014              ; IND2 ｱﾝｻ
CON
RES R51405               ; IND2回転中(SET/RESET)
CON
JMP @MR2106
STG @MR2106
SET MR8002               ; IND2 治具ｴｱｰ供給 ﾉｽﾞﾙ 上昇
CON
AND R5400                ; IND2 ST1治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R5402                ; IND2 ST2治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R5404                ; IND2 ST3治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R5406                ; IND2 ST4治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R50006               ; ﾐｭｰﾃｨﾝｸﾞ中
RES MR1111               ; IND2 監視
CON
MPS
AND<= DM669 #2           ; IND2位置記憶
JMP @MR2107              ; 6204
MPP
AND>= DM669 #3           ; IND2位置記憶
JMP @MR2108              ; 6205
STG @MR2107              ; 6204
INC DM669                ; IND2位置記憶
CON
JMP @MR2109              ; 6206
STG @MR2108              ; 6205
DW #0 DM669              ; IND2位置記憶
CON
JMP @MR2109              ; 6206
STG @MR2109              ; 6206
MPS
SET MR1103               ; IND2 CW回転Fin
CON
ENDS
MRD
WSR DM670 #3 #1          ; IND2_ST1 Work Memory
MRD
MOV DM3251 DM665         ; IND2-ST4 NGﾜｰｸ 0=OK  IND2-NGﾜｰｸﾁｪｯｸ
MPP
WSR DM3200 #40 #20       ; IND2-ST2 QRID-1
;<h1/>Floating check
;
STG @MR2200              ; ﾜｰｸ浮きﾁｪｯｸ開始
MPS
ANB MR914                ; 使用注意！ 浮き無視
MPS
AND R5300                ; IND2 ST1 ﾜｰｸ有無検出
MPS
LD R5301                 ; IND2 ST1 ﾜｰｸ浮き検出1(供給孔側)
AND R5302                ; IND2 ST1 ﾜｰｸ浮き検出2(ﾌｨﾙﾑ側)
ANL
JMP @MR2201              ; 3101
MPP
LDB R5301                ; IND2 ST1 ﾜｰｸ浮き検出1(供給孔側)
ORB R5302                ; IND2 ST1 ﾜｰｸ浮き検出2(ﾌｨﾙﾑ側)
ANB MR914                ; 使用注意！ 浮き無視
ANL
SET @MR308               ; Err161 INDEX Err11
CON
JMP @MR2204              ; 3104
MPP
ANB R5300                ; IND2 ST1 ﾜｰｸ有無検出
JMP @MR2201              ; 3101
MPP
AND MR914                ; 使用注意！ 浮き無視
JMP @MR2203              ; 3103
STG @MR2201              ; 3101
MPS
AND R5310                ; IND2 ST3 ﾜｰｸ有無検出
MPS
LD R5311                 ; IND2 ST3 ﾜｰｸ浮き検出1(供給孔側)
AND R5312                ; IND2 ST3 ﾜｰｸ浮き検出2(ﾌｨﾙﾑ側)
OR R50002                ; STEP
ANL
JMP @MR2203              ; 3103
MPP
LDB R5311                ; IND2 ST3 ﾜｰｸ浮き検出1(供給孔側)
ORB R5312                ; IND2 ST3 ﾜｰｸ浮き検出2(ﾌｨﾙﾑ側)
ANB R50002               ; STEP
ANL
SET @MR312               ; Err162 INDEX Err12
CON
JMP @MR2206
MPP
ANB R5310                ; IND2 ST3 ﾜｰｸ有無検出
JMP @MR2203              ; 3103
STG @MR2203              ; 3103
SET @MR2215              ; ﾜｰｸ浮きﾁｪｯｸ終了
CON
ENDS
;Error 
;IND2_ST1 Cartridge Flowting Detection Before turn
STG @MR2204              ; 3104
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
AND @MR311               ; Err161 INDEX Err11解除完了
RES @MR311               ; Err161 INDEX Err11解除完了
CON
JMP @MR2200              ; ﾜｰｸ浮きﾁｪｯｸ開始
;Error 
;IND2_ST3Cartridge Flowting Detection Before turn
STG @MR2206
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
AND @MR315               ; Err162 INDEX Err12解除完了
RES @MR315               ; Err162 INDEX Err12解除完了
CON
JMP @MR2200              ; ﾜｰｸ浮きﾁｪｯｸ開始
;
;<h1/>ｽﾃｯﾌﾟ運転
;STEP OERATION
LD R50002                ; STEP
ANB R51313               ; IND2_INDEX DO (STEP)
ANB LR40600              ; INDEX STEP-01 flag
AND LR40601              ; INDEX STEP-02 flag
ANB LR40602              ; INDEX STEP-IND2 flag
SET R51313               ; IND2_INDEX DO (STEP)
CON
SET @MR2500              ; INDEX STEP開始
LDB R50003               ; HOME
ANB R50001               ; AUTO
ANB R50002               ; STEP
LD @MR2501               ; IND2 STEP完了
OR R51305                ; IND2INDEX  1ｻｲｸﾙ終了
ANL
RES R51313               ; IND2_INDEX DO (STEP)
CON
RES @MR2501              ; IND2 STEP完了
;動作パラメーター確認
;No.0　90°正転
STG @MR2500              ; INDEX STEP開始
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
MPS
AND LR40601              ; INDEX STEP-02 flag
JMP @MR2600              ; STEP
MPP
ANB LR40601              ; INDEX STEP-02 flag
JMP @MR2502              ; ﾊﾟﾗﾒｰﾀｰNo.NG
;動作パラメーター設定不良
STG @MR2502              ; ﾊﾟﾗﾒｰﾀｰNo.NG
SET R51305               ; IND2INDEX  1ｻｲｸﾙ終了
CON
ENDS
;STEP通常動作
STG @MR2600              ; STEP
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
ANB _IND2ST1
ANB _IND2ST3
ANB _IND2ST4
JMP @MR2601              ; 4608
STG @MR2601              ; 4608
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
RES MR8104               ; IND2 ST2治具 閉じ 
CON
RES MR8105               ; IND2 ST2治具 開き
CON
RES MR8106               ; IND2 ST3治具 閉じ
CON
RES MR8107               ; IND2 ST3治具 開き
CON
RES MR8108               ; IND2 ST4治具 閉じ
CON
RES MR8109               ; IND2 ST4治具 開き
CON
SET @MR2200              ; ﾜｰｸ浮きﾁｪｯｸ開始
CON
JMP @MR2602              ; 4609
STG @MR2602              ; 4609
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
AND @MR2215              ; ﾜｰｸ浮きﾁｪｯｸ終了
SET R50106               ; ﾐｭｰﾃｨﾝｸﾞﾘｾｯﾄ
CON
RES @MR2215              ; ﾜｰｸ浮きﾁｪｯｸ終了
CON
JMP @MR2603              ; 4701
STG @MR2603              ; 4701
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
RES R50407               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点灯
CON
SET R50406               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
AND R50105               ; ｽﾀｰﾄSW ON
SET MR1111               ; IND2 監視
CON
RES R50406               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
SET R50407               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点灯
CON
SET R50106               ; ﾐｭｰﾃｨﾝｸﾞﾘｾｯﾄ
CON
JMP @MR2604
STG @MR2604
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
RES MR8002               ; IND2 治具ｴｱｰ供給 ﾉｽﾞﾙ 上昇
CON
AND R5401                ; IND2 ST1治具ｴｱｰ供給ﾉｽﾞﾙ 下限
AND R5403                ; IND2 ST2治具ｴｱｰ供給ﾉｽﾞﾙ 下限
AND R5405                ; IND2 ST3治具ｴｱｰ供給ﾉｽﾞﾙ 下限
AND R5407                ; IND2 ST4治具ｴｱｰ供給ﾉｽﾞﾙ 下限
JMP @MR2605
STG @MR2605
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
MPS
AND @MR005               ; INDEXｼﾘﾝﾀﾞ全干渉外
JMP @MR2700              ; 4702
MPP
ANB @MR005               ; INDEXｼﾘﾝﾀﾞ全干渉外
SET @MR304               ; Err160 INDEX Err10
CON
JMP @MR2608              ; 4712
;Err180 Release
STG @MR2608              ; 4712
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
AND @MR307               ; Err160 INDEX Err10解除完了
JMP @MR2609              ; 4713
STG @MR2609              ; 4713
RES @MR307               ; Err160 INDEX Err10解除完了
CON
JMP @MR2603              ; 4701
;
STG @MR2700              ; 4702
SET R51406               ; PACK INDEX2
CON
SET R50408               ; ｻｲｸﾙ動作中
CON
JMP @MR2701              ; 4703
STG @MR2701              ; 4703
SET R50106               ; ﾐｭｰﾃｨﾝｸﾞﾘｾｯﾄ
CON
SET MR1102               ; IND2 90°CW回転SUB
CON
JMP @MR2702              ; 4704
STG @MR2702              ; 4704
MPS
LDB MR1010               ; ﾗｲﾄｶｰﾃﾝ遮光
AND MR1103               ; IND2 CW回転Fin
ANL
JMP @MR2708              ; 4705
MPP
AND MR1010               ; ﾗｲﾄｶｰﾃﾝ遮光
JMP @MR2703              ; 4800
;<h1/>ﾗｲﾄｶｰﾃﾝ遮光時処理
;Light Curtain shade process
STG @MR2703              ; 4800
AND R50300               ; Pause
ANB R50105               ; ｽﾀｰﾄSW ON
RES R50408               ; ｻｲｸﾙ動作中
CON
RES R51406               ; PACK INDEX2
CON
JMP @MR2704
STG @MR2704
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
RES R50407               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点灯
CON
SET R50406               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
AND R50105               ; ｽﾀｰﾄSW ON
JMP @MR2705
STG @MR2705
SET R50106               ; ﾐｭｰﾃｨﾝｸﾞﾘｾｯﾄ
CON
RES R50406               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
SET R50407               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点灯
CON
RES R51406               ; PACK INDEX2
CON
JMP @MR2600              ; STEP
;
STG @MR2708              ; 4705
RES MR1103               ; IND2 CW回転Fin
CON
RES R50408               ; ｻｲｸﾙ動作中
CON
JMP @MR2709              ; 4706
STG @MR2709              ; 4706
TMH @10 #5
CON
AND @T10
RES R51406               ; PACK INDEX2
CON
AND R10002               ; IND2 Alarm1 正常=ON
AND R10003               ; IND2 Alarm2 正常=ON
JMP @MR2710              ; 4707
STG @MR2710              ; 4707
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
MPS
LDB R5300                ; IND2 ST1 ﾜｰｸ有無検出
AND R5306                ; IND2 ST2 ﾜｰｸ浮き検出1(供給孔側)
AND R5307                ; IND2 ST2 ﾜｰｸ浮き検出2(ﾌｨﾙﾑ側)
ANL
JMP @MR2715              ; 4708
MPP
LD R5300                 ; IND2 ST1 ﾜｰｸ有無検出
ORB R5306                ; IND2 ST2 ﾜｰｸ浮き検出1(供給孔側)
ORB R5307                ; IND2 ST2 ﾜｰｸ浮き検出2(ﾌｨﾙﾑ側)
ANL
MPS
AND= DM665 #0            ; IND2-NGﾜｰｸﾁｪｯｸ
JMP @MR2715              ; 4708
MPP
AND<> DM665 #0           ; IND2-NGﾜｰｸﾁｪｯｸ
SET @MR112               ; Err154 INDEX Err4
CON
JMP @MR2711              ; 4709
;<h1/>INDEX UT1到着ワーク不良品 エラー・除材
STG @MR2711              ; 4709
TMR @11 #2
CON
AND @T11
AND @MR115               ; Err154 INDEX Err4解除完了
JMP @MR2712              ; 4710
STG @MR2712              ; 4710
RES @MR115               ; Err154 INDEX Err4解除完了
CON
JMP @MR2709              ; 4706
;
STG @MR2715              ; 4708
AND @MR015               ; IND2 ﾎﾟｰｽﾞ&ｴﾗｰ無
SET MR8002               ; IND2 治具ｴｱｰ供給 ﾉｽﾞﾙ 上昇
CON
AND R5400                ; IND2 ST1治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R5402                ; IND2 ST2治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R5404                ; IND2 ST3治具ｴｱｰ供給ﾉｽﾞﾙ 上限
AND R5406                ; IND2 ST4治具ｴｱｰ供給ﾉｽﾞﾙ 上限
RES R50406               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
RES R50407               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点灯
CON
RES MR8100               ; IND2 ST1治具1(縦) 閉じ
CON
SET MR8101               ; IND2 ST1治具1(縦) 開き
CON
RES MR8102               ; IND2 ST1治具2(横) 閉じ
CON
SET MR8103               ; IND2 ST1治具2(横) 開き
CON
SET MR8104               ; IND2 ST2治具 閉じ 
CON
RES MR8105               ; IND2 ST2治具 開き
CON
SET MR8106               ; IND2 ST3治具 閉じ
CON
RES MR8107               ; IND2 ST3治具 開き
CON
RES MR8108               ; IND2 ST4治具 閉じ
CON
SET MR8109               ; IND2 ST4治具 開き
CON
SET R50009               ; HOLDRQ
CON
SET R51305               ; IND2INDEX  1ｻｲｸﾙ終了
CON
ENDS
;INDEX上ｹｰｽ記憶
;INDEX Case Memory
STG @MR2300              ; IND2上ｹｰｽ記憶開始
SET @MR2302              ; IND2上ｹｰｽ記憶中
CON
MPS
AND R5300                ; IND2 ST1 ﾜｰｸ有無検出
BSET DM670 #0            ; IND2_ST1 Work Memory
CON
JMP @MR2303              ; 6403
MPP
ANB R5300                ; IND2 ST1 ﾜｰｸ有無検出
BRES DM670 #0            ; IND2_ST1 Work Memory
CON
JMP @MR2303              ; 6403
STG @MR2303              ; 6403
MPS
AND R5305                ; IND2 ST2 ﾜｰｸ有無検出
BSET DM671 #0            ; IND2_ST2 Work Memory
CON
JMP @MR2304              ; 6404
MPP
ANB R5305                ; IND2 ST2 ﾜｰｸ有無検出
BRES DM671 #0            ; IND2_ST2 Work Memory
CON
JMP @MR2304              ; 6404
STG @MR2304              ; 6404
MPS
AND R5310                ; IND2 ST3 ﾜｰｸ有無検出
BSET DM672 #0            ; IND2_ST3 Work Memory
CON
JMP @MR2305              ; 6405
MPP
ANB R5310                ; IND2 ST3 ﾜｰｸ有無検出
BRES DM672 #0            ; IND2_ST3 Work Memory
CON
JMP @MR2305              ; 6405
STG @MR2305              ; 6405
MPS
AND R5313                ; IND2 ST4 ﾜｰｸ有無検出
BSET DM673 #0            ; IND2_ST4 Work Memory
CON
JMP @MR2306              ; 6406
MPP
ANB R5313                ; IND2 ST4 ﾜｰｸ有無検出
BRES DM673 #0            ; IND2_ST4 Work Memory
CON
JMP @MR2306              ; 6406
STG @MR2306              ; 6406
RES @MR2302              ; IND2上ｹｰｽ記憶中
CON
SET @MR2301              ; IND2上ｹｰｽ記憶完了
CON
ENDS
;
;<h1/>到着ｹｰｽﾁｪｯｸ
;Arrival Case Check
STG @MR2400              ; 到着ｹｰｽﾁｪｯｸ
MPS
AND R5305                ; IND2 ST2 ﾜｰｸ有無検出
MPS
AND= DM671 #1            ; IND2_ST2 Work Memory
JMP @MR2402              ; 6503
MPP
AND= DM671 #0            ; IND2_ST2 Work Memory
@SET @MR208              ; Err157 INDEX Err7
CON
@SET @MR100              ; ﾜｰｸ有り異常
CON
SET R51402               ; Err IND2ST2
CON
JMP @MR2408              ; 6512
MPP
ANB R5305                ; IND2 ST2 ﾜｰｸ有無検出
MPS
AND= DM671 #0            ; IND2_ST2 Work Memory
JMP @MR2402              ; 6503
MPP
AND= DM671 #1            ; IND2_ST2 Work Memory
@SET @MR208              ; Err157 INDEX Err7
CON
SET R51402               ; Err IND2ST2
CON
JMP @MR2408              ; 6512
STG @MR2402              ; 6503
MPS
AND R5310                ; IND2 ST3 ﾜｰｸ有無検出
MPS
AND= DM672 #1            ; IND2_ST3 Work Memory
JMP @MR2403              ; 6504
MPP
AND= DM672 #0            ; IND2_ST3 Work Memory
@SET @MR208              ; Err157 INDEX Err7
CON
@SET @MR100              ; ﾜｰｸ有り異常
CON
SET R51403               ; Err IND2ST3
CON
JMP @MR2409              ; 6513
MPP
ANB R5310                ; IND2 ST3 ﾜｰｸ有無検出
MPS
AND= DM672 #0            ; IND2_ST3 Work Memory
JMP @MR2403              ; 6504
MPP
AND= DM672 #1            ; IND2_ST3 Work Memory
@SET @MR208              ; Err157 INDEX Err7
CON
SET R51403               ; Err IND2ST3
CON
JMP @MR2409              ; 6513
STG @MR2403              ; 6504
MPS
AND R5313                ; IND2 ST4 ﾜｰｸ有無検出
MPS
AND= DM673 #1            ; IND2_ST4 Work Memory
JMP @MR2404              ; 6505
MPP
AND= DM673 #0            ; IND2_ST4 Work Memory
@SET @MR208              ; Err157 INDEX Err7
CON
@SET @MR100              ; ﾜｰｸ有り異常
CON
SET R51404               ; Err IND2ST4
CON
JMP @MR2410              ; 6514
MPP
ANB R5313                ; IND2 ST4 ﾜｰｸ有無検出
MPS
AND= DM673 #0            ; IND2_ST4 Work Memory
JMP @MR2404              ; 6505
MPP
AND= DM673 #1            ; IND2_ST4 Work Memory
@SET @MR208              ; Err157 INDEX Err7
CON
SET R51404               ; Err IND2ST4
CON
JMP @MR2410              ; 6514
STG @MR2404              ; 6505
SET @MR2401              ; 到着ｹｰｽﾁｪｯｸ完了
CON
ENDS
;
STG @MR2408              ; 6512
AND @MR211               ; Err157 INDEX Err7解除完了
DW #2 DM3211             ; IND2-ST2 NGﾜｰｸ 0=OK
CON
RES @MR211               ; Err157 INDEX Err7解除完了
CON
JMP @MR2402              ; 6503
STG @MR2409              ; 6513
AND @MR211               ; Err157 INDEX Err7解除完了
DW #3 DM3231             ; IND2-ST3 NGﾜｰｸ 0=OK
CON
RES @MR211               ; Err157 INDEX Err7解除完了
CON
JMP @MR2403              ; 6504
STG @MR2410              ; 6514
AND @MR211               ; Err157 INDEX Err7解除完了
DW #4 DM3251             ; IND2-ST4 NGﾜｰｸ 0=OK
CON
RES @MR211               ; Err157 INDEX Err7解除完了
CON
JMP @MR2404              ; 6505
;
;<h1/>Err
;Err143
;原点復帰時ﾜｰｸ有り
STG @MR108               ; Err153 INDEX Err3
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R51400               ; Err IND2
CON
JMP @MR109               ; 109
MOV #143 DM400           ; ﾒｯｾｰｼﾞNo.
STG @MR109               ; 109
AND R50008               ; Error
JMP @MR110               ; 110
STG @MR110               ; 110
ANB R50008               ; Error
SET @MR111               ; Err153 INDEX Err3解除完了
CON
ENDS
;Error144-146
;到着ワーク不良・除材確認 / Arrival Work NG, Remove Check
STG @MR112               ; Err154 INDEX Err4
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R51400               ; Err IND2
CON
MPS
AND= DM665 #2            ; IND2-NGﾜｰｸﾁｪｯｸ
SET LR49914              ; ｴﾗｰﾘｾｯﾄｷｰ要求
CON
JMP @MR113               ; 113
MOV #144 DM400           ; ﾒｯｾｰｼﾞNo.
MRD
AND= DM665 #3            ; IND2-NGﾜｰｸﾁｪｯｸ
SET LR49914              ; ｴﾗｰﾘｾｯﾄｷｰ要求
CON
JMP @MR113               ; 113
MOV #145 DM400           ; ﾒｯｾｰｼﾞNo.
MPP
AND= DM665 #4            ; IND2-NGﾜｰｸﾁｪｯｸ
SET LR49914              ; ｴﾗｰﾘｾｯﾄｷｰ要求
CON
JMP @MR113               ; 113
MOV #146 DM400           ; ﾒｯｾｰｼﾞNo.
STG @MR113               ; 113
AND R50008               ; Error
JMP @MR114               ; 114
STG @MR114               ; 114
ANB R50008               ; Error
SET @MR115               ; Err154 INDEX Err4解除完了
CON
ENDS
;Error147,148
;ﾜｰｸ検出異常 / Work Detect is Abnormal
STG @MR208               ; Err157 INDEX Err7
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R51400               ; Err IND2
CON
JMP @MR209               ; 209
MPS
ANB @MR100               ; ﾜｰｸ有り異常
MOV #147 DM400           ; ﾒｯｾｰｼﾞNo.
MPP
AND @MR100               ; ﾜｰｸ有り異常
MOV #148 DM400           ; ﾒｯｾｰｼﾞNo.
STG @MR209               ; 209
AND R50008               ; Error
JMP @MR210               ; 210
STG @MR210               ; 210
ANB R50008               ; Error
RES @MR100               ; ﾜｰｸ有り異常
CON
SET @MR211               ; Err157 INDEX Err7解除完了
CON
ENDS
;Error150
;INDEX 干渉ｼﾘﾝﾀﾞ有り
;INDEX interference CY Detect
STG @MR304               ; Err160 INDEX Err10
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R51400               ; Err IND2
CON
JMP @MR305               ; 305
MOV #150 DM400           ; ﾒｯｾｰｼﾞNo.
STG @MR305               ; 305
AND R50008               ; Error
JMP @MR306               ; 306
STG @MR306               ; 306
ANB R50008               ; Error
SET @MR307               ; Err160 INDEX Err10解除完了
CON
ENDS
;Err23 
;Err23 IND2_ST1 Cartridge Flowting Detection Before turn
STG @MR308               ; Err161 INDEX Err11
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R51400               ; Err IND2
CON
JMP @MR309               ; 309
MOV #23 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR309               ; 309
AND R50008               ; Error
JMP @MR310               ; 310
STG @MR310               ; 310
ANB R50008               ; Error
SET @MR311               ; Err161 INDEX Err11解除完了
CON
ENDS
;Err54 
;Err54 IND2_ST3Cartridge Flowting Detection Before turn
STG @MR312               ; Err162 INDEX Err12
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R51400               ; Err IND2
CON
JMP @MR313               ; 313
MOV #54 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR313               ; 313
AND R50008               ; Error
JMP @MR314               ; 314
STG @MR314               ; 314
ANB R50008               ; Error
SET @MR315               ; Err162 INDEX Err12解除完了
CON
ENDS
END
ENDH
