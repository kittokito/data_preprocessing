DEVICE:53
;MODULE:ST2
;MODULE_TYPE:0
;SCRIPT_TYPE:
;***************************************
; 非常停止
;  Emergency Stop 
;***************************************
LD R50010                ; Emergency　Stop
OR @MR000                ; Emergency STOP
ZRES @MR001 @MR2915      ; PACK set1(Leak inspection)
CON
OUT @MR000               ; Emergency STOP
TMR @39 #5
LD @T39
MDSTOP ST2
;
LD R4200                 ; IND1 ST2 ﾜｰｸ検出1(ST1側)
OR R4201                 ; IND1 ST2 ﾜｰｸ検出2(中1側)
OUT @MR004               ; 1-2ｶｰﾄﾘｯｼﾞ有り
LD R4202                 ; IND1 ST2 ﾜｰｸ検出3(中2側)
OR R4203                 ; IND1 ST2 ﾜｰｸ検出4(ST3側)
OUT @MR005               ; 3-4ｶｰﾄﾘｯｼﾞ有り
LD<> DM824 #0            ; ST2_1 ﾜｰｸ有無(0=無)
AND R4200                ; IND1 ST2 ﾜｰｸ検出1(ST1側)
LD= DM824 #0             ; ST2_1 ﾜｰｸ有無(0=無)
LDB R4200                ; IND1 ST2 ﾜｰｸ検出1(ST1側)
OR<> DM3371 #0           ; ST2-No1 NGﾜｰｸ 0=OK
ANL
ORL
LD<> DM825 #0            ; ST2_2 ﾜｰｸ有無(0=無)
AND R4201                ; IND1 ST2 ﾜｰｸ検出2(中1側)
LD= DM825 #0             ; ST2_2 ﾜｰｸ有無(0=無)
LDB R4201                ; IND1 ST2 ﾜｰｸ検出2(中1側)
OR<> DM3391 #0           ; ST2-No2 NGﾜｰｸ 0=OK
ANL
ORL
ANL
LD<> DM826 #0            ; ST2_3 ﾜｰｸ有無(0=無)
AND R4202                ; IND1 ST2 ﾜｰｸ検出3(中2側)
LD= DM826 #0             ; ST2_3 ﾜｰｸ有無(0=無)
LDB R4202                ; IND1 ST2 ﾜｰｸ検出3(中2側)
OR<> DM3411 #0           ; ST2-No3 NGﾜｰｸ 0=OK
ANL
ORL
ANL
LD<> DM827 #0            ; ST2_4 ﾜｰｸ有無(0=無)
AND R4203                ; IND1 ST2 ﾜｰｸ検出4(ST3側)
LD= DM827 #0             ; ST2_4 ﾜｰｸ有無(0=無)
LDB R4203                ; IND1 ST2 ﾜｰｸ検出4(ST3側)
OR<> DM3431 #0           ; ST2-No4 NGﾜｰｸ 0=OK
ANL
ORL
ANL
OR R50002                ; STEP
OUT @MR010               ; ﾜｰｸ状態OK
LD<> DM824 #0            ; ST2_1 ﾜｰｸ有無(0=無)
LD R50002                ; STEP
AND R4200                ; IND1 ST2 ﾜｰｸ検出1(ST1側)
ORL
AND= DM3371 #0           ; ST2-No1 NGﾜｰｸ 0=OK
OUT @MR100               ; ﾜｰｸ1処理有
LD<> DM825 #0            ; ST2_2 ﾜｰｸ有無(0=無)
LD R50002                ; STEP
AND R4201                ; IND1 ST2 ﾜｰｸ検出2(中1側)
ORL
AND= DM3391 #0           ; ST2-No2 NGﾜｰｸ 0=OK
OUT @MR101               ; ﾜｰｸ2処理有
LD<> DM826 #0            ; ST2_3 ﾜｰｸ有無(0=無)
LD R50002                ; STEP
AND R4202                ; IND1 ST2 ﾜｰｸ検出3(中2側)
ORL
AND= DM3411 #0           ; ST2-No3 NGﾜｰｸ 0=OK
OUT @MR102               ; ﾜｰｸ3処理有
LD<> DM827 #0            ; ST2_4 ﾜｰｸ有無(0=無)
LD R50002                ; STEP
AND R4203                ; IND1 ST2 ﾜｰｸ検出4(ST3側)
ORL
AND= DM3431 #0           ; ST2-No4 NGﾜｰｸ 0=OK
OUT @MR103               ; ﾜｰｸ4処理有
LDB MR4500               ; Cylinder Error 4500
ANB MR4501               ; Cylinder Error 4501
ANB MR4502               ; Cylinder Error 4502
ANB MR4503               ; Cylinder Error 4503
ANB MR4504               ; Cylinder Error 4504
ANB MR4505               ; Cylinder Error 4505
ANB MR4506               ; Cylinder Error 4506
ANB MR4507               ; Cylinder Error 4507
ANB MR4508               ; Cylinder Error 4508
ANB MR4509               ; Cylinder Error 4509
INV
OUT @MR106               ; 106
;動作ﾊﾟﾗﾒｰﾀ
;Operation Parameter
LD LR41100               ; AUTO-0 全ﾕﾆｯﾄ動作
OR LR41101               ; AUTO-1 IND1 2UT
OUT @MR013               ; ST2 AUTO Parameter OK
;***************************************
; ﾎﾟｰｽﾞ ･ ｴﾗｰ 監視
; Pause ･ Error Check 
;***************************************
LDB R50300               ; Pause
ANB R50112               ; Err ST2
ANB R50110               ; Err INDEX
OUT @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
;<h1/>原点復帰動作
;HOME RETURN OPERATION 
LD R50003                ; HOME
ANB R50202               ; ST2 動作中
SET R50202               ; ST2 動作中
CON
SET @MR600
LDB R50003               ; HOME
ANB R50001               ; AUTO
ANB R50002               ; STEP
AND @MR601
RES R50202               ; ST2 動作中
CON
RES @MR601
STG @MR600
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
SET R50902               ; IND1 ST2  ｻｲｸﾙ動作中
CON
JMP @MR603
STG @MR603
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
ZRES MR7208 MR7211       ; ﾘｰｸ検査1（ST1側） 加圧  ﾘｰｸ検査4（ST3側） 加圧
CON
ZRES R41900 R41904       ; 検査C1表示灯
CON
ZRES R41905 R41914       ; ﾜｰｸ1QRｽｷｬﾝ異常表示
CON
JMP @MR604
STG @MR604
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
RES MR7200               ; ﾘｰｸ検査押棒1 下降
CON
RES MR7202               ; ﾘｰｸ検査押棒2 下降
CON
RES MR7204               ; ﾘｰｸ検査ﾍｯﾄﾞ 下降
CON
ANB R4500                ; ﾘｰｸ検査押し棒1 下降限
AND R4501                ; ﾘｰｸ検査押し棒1 上昇限
ANB R4502                ; ﾘｰｸ検査押し棒2 下降限
AND R4503                ; ﾘｰｸ検査押し棒2 上昇限
ANB R4504                ; ﾘｰｸ検査ﾍｯﾄﾞ 下降限
AND R4505                ; ﾘｰｸ検査ﾍｯﾄﾞ 上昇限
JMP @MR605
STG @MR605
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
RES MR7206               ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ 閉じ
CON
ANB R4506                ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ位置決側 閉限
AND R4507                ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ位置決側 開限
ANB R4508                ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ基準側　閉限
AND R4509                ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ基準側　開限
JMP @MR606
STG @MR606
SET R30105               ; Port1 ｼｰｹﾝｽｸﾘｱ要求
CON
SET R34105               ; Port4 ｼｰｹﾝｽｸﾘｱ要求
CON
JMP @MR607
STG @MR607
AND R30005               ; Port1 ｼｰｹﾝｽｸﾘｱ完了
AND R34005               ; Port4 ｼｰｹﾝｽｸﾘｱ完了
RES R30105               ; Port1 ｼｰｹﾝｽｸﾘｱ要求
CON
RES R34105               ; Port4 ｼｰｹﾝｽｸﾘｱ要求
CON
JMP @MR608
STG @MR608
AND R18500               ; A-RB10 電源ON
AND DM2039.14
AND MR19500              ; RB10:DN正常通信中
TMR @15 #10
CON
AND @T15
JMP @MR609
STG @MR609
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
SET DM2239.4
CON
AND DM2039.4
TMR @16 #10
CON
AND @T16
JMP @MR610
STG @MR610
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
SET MR14800              ; RB10 PCON原点復帰開始
CON
JMP @MR611
STG @MR611
AND MR14801              ; RB10 PCON原点復帰完了
RES MR14801              ; RB10 PCON原点復帰完了
CON
JMP @MR612
STG @MR612
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
AND R4507                ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ位置決側 開限
AND R4509                ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ基準側　開限
DW #1 DM2910             ; RB10 目標No.
CON
SET MR14805              ; RB10 PCON移動開始
CON
JMP @MR613
STG @MR613
AND MR14806              ; RB10 PCON移動完了
RES MR14806              ; RB10 PCON移動完了
CON
JMP @MR614
STG @MR614
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
RES R30400               ; Port1 通信完了
CON
RES R34400               ; Port4 通信完了
CON
JMP @MR615
STG @MR615
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
AND MR600                ; IND1      ｻｲｸﾙ動作中
RES R50902               ; IND1 ST2  ｻｲｸﾙ動作中
CON
SET R50412               ; IND1 ST2   1ｻｲｸﾙ終了
CON
SET @MR601
CON
ENDS
;<h1/>自動運転
;AUTO OERATION
LD R50001                ; AUTO
ANB R50202               ; ST2 動作中
SET R50202               ; ST2 動作中
CON
SET @MR1000              ; ST2 AUTO開始
LDB R50003               ; HOME
ANB R50001               ; AUTO
ANB R50002               ; STEP
AND @MR1001              ; ST2 AUTO終了
RES R50202               ; ST2 動作中
CON
RES @MR1001              ; ST2 AUTO終了
;ﾘﾄﾗｲ回数計算
LDP @MR2200              ; ﾘｰｸ検査開始
AND= DM5500 #0           ; ﾘｰｸ検査ﾘﾄﾗｲ回数
LDA.F @DM2
CON
ADD.F +1
CON
STA.F @DM2
LDP @MR500               ; ST2 原点復帰開始
LDA.F @DM4
CON
ADD.F +1
CON
STA.F @DM4
LD CR2002                ; 常時ON
LDA.F @DM4
CON
DIV.F @DM2
CON
MUL.F +100
CON
STA.F @DM6
; 動作パラメーター確認
; Operating Parameter Check
STG @MR1000              ; ST2 AUTO開始
MPS
AND R50209               ; IND1     動作開始
SET R50902               ; IND1 ST2  ｻｲｸﾙ動作中
CON
MPS
AND R50210               ; Model OK
JMP @MR1002              ; 3002
MPP
LDB R50210               ; Model OK
AND R50000               ; HOLD
ANL
TMR @13 #10
CON
AND @T13
SET R50412               ; IND1 ST2   1ｻｲｸﾙ終了
CON
JMP @MR1902              ; 3902
MPP
LDB R50209               ; IND1     動作開始
AND R50000               ; HOLD
AND R50213               ; IND1　　　払出し完了
ANL
JMP @MR1902              ; 3902
STG @MR1002              ; 3002
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
MPS
AND @MR013               ; ST2 AUTO Parameter OK
DW #0 DM5500             ; ﾘｰｸ検査ﾘﾄﾗｲ回数
CON
RES R42215               ; ﾘｰｸ検査OK
CON
JMP @MR1108              ; ﾜｰｸﾁｪｯｸ
MPP
ANB @MR013               ; ST2 AUTO Parameter OK
JMP @MR1900              ; AUTO終了処理
;AUTO動作開始
;AUTO Operation Start
;ﾜｰｸﾁｪｯｸ
STG @MR1108              ; ﾜｰｸﾁｪｯｸ
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
RES R41915               ; ﾘﾄﾗｲ要求
CON
RES R30401               ; Port1 通信エラー
CON
MPS
AND @MR010               ; ﾜｰｸ状態OK
MPS
LD @MR004                ; 1-2ｶｰﾄﾘｯｼﾞ有り
OR @MR005                ; 3-4ｶｰﾄﾘｯｼﾞ有り
ANB LR300                ; 搬送ﾃﾞﾊﾞｯｸﾞbit
ANL
JMP @MR1109              ; 2006
MPP
LDB @MR004               ; 1-2ｶｰﾄﾘｯｼﾞ有り
ANB @MR005               ; 3-4ｶｰﾄﾘｯｼﾞ有り
OR LR300                 ; 搬送ﾃﾞﾊﾞｯｸﾞbit
ANL
JMP @MR1900              ; AUTO終了処理
MPP
ANB @MR010               ; ﾜｰｸ状態OK
MPS
LD @MR004                ; 1-2ｶｰﾄﾘｯｼﾞ有り
OR @MR005                ; 3-4ｶｰﾄﾘｯｼﾞ有り
ANL
SET @MR006               ; ﾜｰｸ有NG
CON
SET @MR504               ; 1004
CON
JMP @MR1106
MPP
LDB @MR004               ; 1-2ｶｰﾄﾘｯｼﾞ有り
ANB @MR005               ; 3-4ｶｰﾄﾘｯｼﾞ有り
ANL
SET @MR504               ; 1004
CON
JMP @MR1106
STG @MR1109              ; 2006
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
MPS
LD R4204                 ; IND1 ST2 ﾜｰｸ浮き検出(外側)
AND R4205                ; IND1 ST2 ﾜｰｸ浮き検出(Index側)
ANL
JMP @MR1112              ; 2010
MPP
LDB R4204                ; IND1 ST2 ﾜｰｸ浮き検出(外側)
ORB R4205                ; IND1 ST2 ﾜｰｸ浮き検出(Index側)
ANL
SET @MR200               ; Err35
CON
JMP @MR1110
;
STG @MR1106
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
AND @MR507               ; 1007
JMP @MR1107
STG @MR1107
RES @MR006               ; ﾜｰｸ有NG
CON
RES @MR507               ; 1007
CON
DW #0 DM3371             ; ST2-No1 NGﾜｰｸ 0=OK
CON
DW #0 DM3391             ; ST2-No2 NGﾜｰｸ 0=OK
CON
DW #0 DM3411             ; ST2-No3 NGﾜｰｸ 0=OK
CON
DW #0 DM3431             ; ST2-No4 NGﾜｰｸ 0=OK
CON
JMP @MR1108              ; ﾜｰｸﾁｪｯｸ
;Err32 IND1_ST2　ﾜｰｸ浮き / Cartridge Float on IND1_ST2
STG @MR1110
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
AND @MR203               ; Err35解除完了
JMP @MR1111
STG @MR1111
RES @MR203               ; Err35解除完了
CON
JMP @MR1109              ; 2006
;Flg reset
STG @MR1112              ; 2010
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
MPS
ZRES R41900 R41904       ; 検査C1表示灯
CON
ZRES R41905 R41914       ; ﾜｰｸ1QRｽｷｬﾝ異常表示
CON
RES @MR2001              ; ﾘｰｸ検査完了
CON
RES @MR2401              ; QRﾘｰﾀﾞｰﾁｪｯｸ12完了
CON
RES @MR2701              ; QRﾘｰﾀﾞｰﾁｪｯｸ34完了
CON
TMR @40 #2
CON
AND @T40
JMP @MR1200              ; 2101
MPP
AND CR2003               ; 常時OFF
FMOV #0 @DM1000 #10
FMOV #0 @DM1100 #10
;ﾘｰｸ検査・QRﾁｪｯｸ動作
STG @MR1200              ; 2101
MPS
ANB MR002                ; ST2 Leak Check Pass
MPS
ANB MR001                ; 2UT QR照合無し
MPS
ANB R49815               ; QR無効SW
MPS
ANB R42215               ; ﾘｰｸ検査OK
SET @MR2000              ; ﾘｰｸ検査開始
CON
JMP @MR1201              ; 2102
MRD
AND R42215               ; ﾘｰｸ検査OK
JMP @MR1201              ; 2102
MRD
LD @MR100                ; ﾜｰｸ1処理有
AND R4200                ; IND1 ST2 ﾜｰｸ検出1(ST1側)
LD @MR101                ; ﾜｰｸ2処理有
AND R4201                ; IND1 ST2 ﾜｰｸ検出2(中1側)
ORL
ANL
SET @MR2400              ; QRﾁｪｯｸ12開始
MRD
LD LR311
LD @MR102                ; ﾜｰｸ3処理有
AND R4202                ; IND1 ST2 ﾜｰｸ検出3(中2側)
LD @MR103                ; ﾜｰｸ4処理有
AND R4203                ; IND1 ST2 ﾜｰｸ検出4(ST3側)
ORL
ANL
ANL
SET @MR2700              ; QRﾁｪｯｸ34開始
MPP
LDB LR311
LD @MR102                ; ﾜｰｸ3処理有
AND R4202                ; IND1 ST2 ﾜｰｸ検出3(中2側)
LD @MR103                ; ﾜｰｸ4処理有
AND R4203                ; IND1 ST2 ﾜｰｸ検出4(ST3側)
ORL
ANL
AND CR2003               ; 常時OFF
ANL
SET @MR2700              ; QRﾁｪｯｸ34開始
MRD
AND R49815               ; QR無効SW
MPS
ANB R42215               ; ﾘｰｸ検査OK
SET @MR2000              ; ﾘｰｸ検査開始
CON
JMP @MR1201              ; 2102
MPP
AND R42215               ; ﾘｰｸ検査OK
JMP @MR1201              ; 2102
MRD
MOV #0 @DM4100
MPP
MOV #0 @DM4101
MPP
AND MR001                ; 2UT QR照合無し
SET @MR2000              ; ﾘｰｸ検査開始
CON
JMP @MR1201              ; 2102
MPP
AND MR002                ; ST2 Leak Check Pass
JMP @MR1500
LDB LR310
SET @MR2915
LD LR310
LDB @MR100               ; ﾜｰｸ1処理有
ANB R4200                ; IND1 ST2 ﾜｰｸ検出1(ST1側)
LDB @MR101               ; ﾜｰｸ2処理有
ANB R4201                ; IND1 ST2 ﾜｰｸ検出2(中1側)
ORL
ANL
SET @MR2915
STG @MR1201              ; 2102
MPS
LDB MR001                ; 2UT QR照合無し
LD @MR2001               ; ﾘｰｸ検査完了
OR R42215                ; ﾘｰｸ検査OK
ANL
LD @MR2401               ; QRﾘｰﾀﾞｰﾁｪｯｸ12完了
LDB R4200                ; IND1 ST2 ﾜｰｸ検出1(ST1側)
ORB @MR100               ; ﾜｰｸ1処理有
LDB R4201                ; IND1 ST2 ﾜｰｸ検出2(中1側)
ORB @MR101               ; ﾜｰｸ2処理有
ANL
ORL
OR R49815                ; QR無効SW
ANL
LD @MR2701               ; QRﾘｰﾀﾞｰﾁｪｯｸ34完了
LDB R4202                ; IND1 ST2 ﾜｰｸ検出3(中2側)
ORB @MR102               ; ﾜｰｸ3処理有
LDB R4203                ; IND1 ST2 ﾜｰｸ検出4(ST3側)
ORB @MR103               ; ﾜｰｸ4処理有
ANL
ORL
ANL
ANL
RES @MR1700
CON
JMP @MR1202              ; 2103
MPP
LD MR001                 ; 2UT QR照合無し
AND @MR2001              ; ﾘｰｸ検査完了
ANL
RES @MR1700
CON
JMP @MR1202              ; 2103
STG @MR1202              ; 2103
RES @MR2001              ; ﾘｰｸ検査完了
CON
RES @MR2401              ; QRﾘｰﾀﾞｰﾁｪｯｸ12完了
CON
RES @MR2701              ; QRﾘｰﾀﾞｰﾁｪｯｸ34完了
CON
MPS
ANB MR002                ; ST2 Leak Check Pass
JMP @MR1203              ; 検査結果 確認
MPP
AND MR002                ; ST2 Leak Check Pass
JMP @MR1400              ; QR確認
;ﾘｰｸ検査ｴﾗｰ確認
STG @MR1203              ; 検査結果 確認
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
MPS
ANB R41900               ; 検査C1表示灯
JMP @MR1210              ; 2105
MPP
AND R41900               ; 検査C1表示灯
MPS
LD R50002                ; STEP
OR>= DM5500 #1           ; ﾘｰｸ検査ﾘﾄﾗｲ回数
ANL
SET @MR204               ; Err36
CON
JMP @MR1206
MPP
LDB R50002               ; STEP
AND< DM5500 #1           ; ﾘｰｸ検査ﾘﾄﾗｲ回数
ANL
SET @MR500               ; ST2 原点復帰開始
CON
JMP @MR1204
;ﾘｰｸ検査自動ﾘﾄﾗｲ /Leak Check AUTO Retry
STG @MR1204
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
AND @MR503               ; 1003
RES @MR503               ; 1003
CON
JMP @MR1205
STG @MR1205
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
@INC DM5500              ; ﾘｰｸ検査ﾘﾄﾗｲ回数
CON
JMP @MR1108              ; ﾜｰｸﾁｪｯｸ
STG @MR1206
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
AND @MR207               ; Err36解除完了
RES @MR207               ; Err36解除完了
CON
JMP @MR1207
STG @MR1207
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
JMP @MR1208
STG @MR1208
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
MPS
LD R50002                ; STEP
ORB @MR012               ; ﾘﾄﾗｲ処理
ANL
JMP @MR1210              ; 2105
MPP
LD R50001                ; AUTO
AND @MR012               ; ﾘﾄﾗｲ処理
ANL
JMP @MR1506
STG @MR1210              ; 2105
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
MPS
ANB R41901               ; 検査C2表示灯
JMP @MR1300
MPP
AND R41901               ; 検査C2表示灯
MPS
LD R50002                ; STEP
OR>= DM5500 #1           ; ﾘｰｸ検査ﾘﾄﾗｲ回数
ANL
SET @MR208               ; Err37 ST2 Err7
CON
JMP @MR1211
MPP
LDB R50002               ; STEP
AND< DM5500 #1           ; ﾘｰｸ検査ﾘﾄﾗｲ回数
ANL
SET @MR508               ; 1008
CON
JMP @MR1408
STG @MR1408
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
AND @MR702               ; 2002
RES @MR702               ; 2002
CON
JMP @MR1409
STG @MR1409
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
@INC DM5500              ; ﾘｰｸ検査ﾘﾄﾗｲ回数
CON
JMP @MR1108              ; ﾜｰｸﾁｪｯｸ
STG @MR1211
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
AND @MR211               ; Err37 ST2 Err7解除完了
RES @MR211               ; Err37 ST2 Err7解除完了
CON
JMP @MR1212
STG @MR1212
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
JMP @MR1213
STG @MR1213
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
MPS
LD R50002                ; STEP
ORB @MR012               ; ﾘﾄﾗｲ処理
ANL
JMP @MR1300
MPP
LD R50001                ; AUTO
AND @MR012               ; ﾘﾄﾗｲ処理
ANL
JMP @MR1506
STG @MR1300
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
MPS
ANB R41902               ; 検査C3表示灯
JMP @MR1308
MPP
AND R41902               ; 検査C3表示灯
MPS
LD R50002                ; STEP
OR>= DM5500 #1           ; ﾘｰｸ検査ﾘﾄﾗｲ回数
ANL
SET @MR212               ; Err38 ST2 Err8
CON
JMP @MR1301
MPP
LDB R50002               ; STEP
AND< DM5500 #1           ; ﾘｰｸ検査ﾘﾄﾗｲ回数
ANL
SET @MR509
CON
JMP @MR1410
STG @MR1410
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
AND @MR705
RES @MR705
CON
JMP @MR1411
STG @MR1411
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
@INC DM5500              ; ﾘｰｸ検査ﾘﾄﾗｲ回数
CON
JMP @MR1108              ; ﾜｰｸﾁｪｯｸ
STG @MR1301
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
AND @MR215               ; Err38 ST2 Err8解除完了
RES @MR215               ; Err38 ST2 Err8解除完了
CON
JMP @MR1302
STG @MR1302
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
JMP @MR1303
STG @MR1303
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
MPS
LD R50002                ; STEP
ORB @MR012               ; ﾘﾄﾗｲ処理
ANL
JMP @MR1308
MPP
LD R50001                ; AUTO
AND @MR012               ; ﾘﾄﾗｲ処理
ANL
JMP @MR1506
STG @MR1308
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
MPS
ANB R41903               ; 検査C4表示灯
JMP @MR1400              ; QR確認
MPP
AND R41903               ; 検査C4表示灯
MPS
LD R50002                ; STEP
OR>= DM5500 #1           ; ﾘｰｸ検査ﾘﾄﾗｲ回数
ANL
SET @MR300               ; Err43
CON
JMP @MR1309
MPP
LDB R50002               ; STEP
AND< DM5500 #1           ; ﾘｰｸ検査ﾘﾄﾗｲ回数
ANL
SET @MR510
CON
JMP @MR1412
STG @MR1412
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
AND @MR708               ; STEP終了処理
RES @MR708               ; STEP終了処理
CON
JMP @MR1413
STG @MR1413
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
@INC DM5500              ; ﾘｰｸ検査ﾘﾄﾗｲ回数
CON
JMP @MR1108              ; ﾜｰｸﾁｪｯｸ
STG @MR1309
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
AND @MR303               ; Err43解除完了
RES @MR303               ; Err43解除完了
CON
JMP @MR1310
STG @MR1310
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
JMP @MR1311
STG @MR1311
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
MPS
LD R50002                ; STEP
ORB @MR012               ; ﾘﾄﾗｲ処理
ANL
JMP @MR1400              ; QR確認
MPP
LD R50001                ; AUTO
AND @MR012               ; ﾘﾄﾗｲ処理
ANL
JMP @MR1506
;counter retry auto leak check C1
LD R41900                ; 検査C1表示灯
ANB R50002               ; STEP
AND< DM5500 #1           ; ﾘｰｸ検査ﾘﾄﾗｲ回数
AND>= DM400 #250         ; ﾒｯｾｰｼﾞNo.
AND<= DM400 #265         ; ﾒｯｾｰｼﾞNo.
@INC DM5510
MOV DM5510 DM5511
;counter retry auto leak check C2
LD R41901                ; 検査C2表示灯
ANB R50002               ; STEP
AND< DM5500 #1           ; ﾘｰｸ検査ﾘﾄﾗｲ回数
AND>= DM400 #250         ; ﾒｯｾｰｼﾞNo.
AND<= DM400 #265         ; ﾒｯｾｰｼﾞNo.
@INC DM5512
MOV DM5512 DM5513
;counter retry auto leak check C3
LD R41902                ; 検査C3表示灯
ANB R50002               ; STEP
AND< DM5500 #1           ; ﾘｰｸ検査ﾘﾄﾗｲ回数
AND>= DM400 #250         ; ﾒｯｾｰｼﾞNo.
AND<= DM400 #265         ; ﾒｯｾｰｼﾞNo.
@INC DM5514
MOV DM5514 DM5515
;counter retry auto leak check C4
LD R41903                ; 検査C4表示灯
ANB R50002               ; STEP
AND< DM5500 #1           ; ﾘｰｸ検査ﾘﾄﾗｲ回数
AND>= DM400 #250         ; ﾒｯｾｰｼﾞNo.
AND<= DM400 #265         ; ﾒｯｾｰｼﾞNo.
@INC DM5516
MOV DM5516 DM5517
;counter retry auto leak check All
LD R41900                ; 検査C1表示灯
OR R41901                ; 検査C2表示灯
OR R41902                ; 検査C3表示灯
OR R41903                ; 検査C4表示灯
AND< DM5500 #1           ; ﾘｰｸ検査ﾘﾄﾗｲ回数
@INC DM5518
MOV DM5518 DM5519
;QRﾁｪｯｸ
STG @MR1400              ; QR確認
DW #0 DM5500             ; ﾘｰｸ検査ﾘﾄﾗｲ回数
CON
MPS
LDB MR001                ; 2UT QR照合無し
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
ANL
MPS
LDB R41905               ; ﾜｰｸ1QRｽｷｬﾝ異常表示
ANB R41906               ; ﾜｰｸ2QRｽｷｬﾝ異常表示
ANB R41907               ; ﾜｰｸ3QRｽｷｬﾝ異常表示
ANB R41908               ; ﾜｰｸ4QRｽｷｬﾝ異常表示
ANL
DW #0 DM7900
CON
JMP @MR1404              ; 2202
MPP
LD R41905                ; ﾜｰｸ1QRｽｷｬﾝ異常表示
OR R41906                ; ﾜｰｸ2QRｽｷｬﾝ異常表示
OR R41907                ; ﾜｰｸ3QRｽｷｬﾝ異常表示
OR R41908                ; ﾜｰｸ4QRｽｷｬﾝ異常表示
ANL
SET @MR312               ; Err46
CON
JMP @MR1401
MPP
AND MR001                ; 2UT QR照合無し
JMP @MR1500
;Err43 上ﾗﾍﾞﾙQRｺｰﾄﾞｽｷｬﾝ異常 / QR Code Scan Error
STG @MR1401
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
AND @MR315               ; Err46解除完了
JMP @MR1402
STG @MR1402
RES @MR315               ; Err46解除完了
CON
JMP @MR1403
STG @MR1403
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
MPS
LD R50002                ; STEP
ORB @MR012               ; ﾘﾄﾗｲ処理
ANL
JMP @MR1404              ; 2202
MPP
LD R50001                ; AUTO
AND @MR012               ; ﾘﾄﾗｲ処理
ANL
JMP @MR1506
;
STG @MR1404              ; 2202
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
MPS
LDB R41910               ; ﾜｰｸ1照合異常表示
ANB R41911               ; ﾜｰｸ2照合異常表示
ANB R41912               ; ﾜｰｸ3照合異常表示
ANB R41913               ; ﾜｰｸ4照合異常表示
ANL
JMP @MR1500
MPP
LD R41910                ; ﾜｰｸ1照合異常表示
OR R41911                ; ﾜｰｸ2照合異常表示
OR R41912                ; ﾜｰｸ3照合異常表示
OR R41913                ; ﾜｰｸ4照合異常表示
ANL
SET @MR404               ; Err42
CON
JMP @MR1405
;Err40 上ﾗﾍﾞﾙQRｺｰﾄﾞ照合異常 / QR Check Forward Error
STG @MR1405
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
AND @MR407               ; Err42解除完了
JMP @MR1406
STG @MR1406
RES @MR407               ; Err42解除完了
CON
JMP @MR1407
STG @MR1407
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
MPS
AND R50002               ; STEP
JMP @MR808
MPP
AND R50001               ; AUTO
MPS
ANB @MR012               ; ﾘﾄﾗｲ処理
JMP @MR1500
MPP
AND @MR012               ; ﾘﾄﾗｲ処理
JMP @MR1506
;
LD @MR1500
MPS
PMOV R41900 #0 DM430 #0 #5;検査C1表示灯
MPP
AND= DM430 #0
SET R42215               ; ﾘｰｸ検査OK
STG @MR1500
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
MPS
ANB R50002               ; STEP
MPS
AND @MR007               ; 検査ｴﾗｰ無し
RES R42215               ; ﾘｰｸ検査OK
CON
JMP @MR1900              ; AUTO終了処理
MPP
ANB @MR007               ; 検査ｴﾗｰ無し
MPS
ANB @MR011               ; ﾘﾄﾗｲ処理2
RES MR7206               ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ 閉じ
CON
AND R4507                ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ位置決側 開限
AND R4509                ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ基準側　開限
JMP @MR1501
MPP
AND @MR011               ; ﾘﾄﾗｲ処理2
JMP @MR1108              ; ﾜｰｸﾁｪｯｸ
MPP
AND R50002               ; STEP
JMP @MR808
;Err41 ﾜｰｸ除材要求&ﾘﾄﾗｲ要求 / NG Cartridge Remove or Retry Demand
STG @MR1501
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
AND R4507                ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ位置決側 開限
AND R4509                ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ基準側　開限
DW #1 DM2910             ; RB10 目標No.
CON
SET MR14805              ; RB10 PCON移動開始
CON
JMP @MR1502
STG @MR1502
AND MR14806              ; RB10 PCON移動完了
RES MR14806              ; RB10 PCON移動完了
CON
JMP @MR1503
STG @MR1503
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
RES MR7904               ; IND1 ST2治具1(縦) 閉じ 
CON
SET MR7905               ; IND1 ST2治具1(縦) 開き
CON
RES MR7906               ; IND1 ST2治具2(横) 閉じ
CON
SET MR7907               ; IND1 ST2治具2(横) 開き
CON
SET @MR412
CON
JMP @MR1504
STG @MR1504
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
AND @MR415
RES @MR415
CON
JMP @MR1505
STG @MR1505
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
RES MR7905               ; IND1 ST2治具1(縦) 開き
CON
SET MR7904               ; IND1 ST2治具1(縦) 閉じ 
CON
TMH @8 #50
CON
AND @T8
JMP @MR1506
STG @MR1506
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
RES MR7907               ; IND1 ST2治具2(横) 開き
CON
SET MR7906               ; IND1 ST2治具2(横) 閉じ
CON
TMH @9 #50
CON
AND @T9
JMP @MR1507
LD @MR1506
MPS
LD= DM3371 #2            ; ST2-No1 NGﾜｰｸ 0=OK
AND R41900               ; 検査C1表示灯
AND @MR100               ; ﾜｰｸ1処理有
ANL
DW #0 DM3371             ; ST2-No1 NGﾜｰｸ 0=OK
MRD
LD= DM3391 #2            ; ST2-No2 NGﾜｰｸ 0=OK
AND R41901               ; 検査C2表示灯
AND @MR101               ; ﾜｰｸ2処理有
ANL
DW #0 DM3391             ; ST2-No2 NGﾜｰｸ 0=OK
MRD
LD= DM3411 #2            ; ST2-No3 NGﾜｰｸ 0=OK
AND R41902               ; 検査C3表示灯
AND @MR102               ; ﾜｰｸ3処理有
ANL
DW #0 DM3411             ; ST2-No3 NGﾜｰｸ 0=OK
MPP
LD= DM3431 #2            ; ST2-No4 NGﾜｰｸ 0=OK
AND R41903               ; 検査C4表示灯
AND @MR103               ; ﾜｰｸ4処理有
ANL
DW #0 DM3431             ; ST2-No4 NGﾜｰｸ 0=OK
;ﾜｰｸ状態を確認しあるワークだけをリトライする。
STG @MR1507
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
MPS
AND @MR100               ; ﾜｰｸ1処理有
MPS
ANB R4200                ; IND1 ST2 ﾜｰｸ検出1(ST1側)
SET R41915               ; ﾘﾄﾗｲ要求
CON
DW #0 DM824              ; ST2_1 ﾜｰｸ有無(0=無)
MPP
LD R4200                 ; IND1 ST2 ﾜｰｸ検出1(ST1側)
AND R41900               ; 検査C1表示灯
ANB R41915               ; ﾘﾄﾗｲ要求
ANL
SET R41915               ; ﾘﾄﾗｲ要求
CON
DW #0 DM824              ; ST2_1 ﾜｰｸ有無(0=無)
CON
DW #2 DM3371             ; ST2-No1 NGﾜｰｸ 0=OK
MRD
AND @MR101               ; ﾜｰｸ2処理有
MPS
ANB R4201                ; IND1 ST2 ﾜｰｸ検出2(中1側)
SET R41915               ; ﾘﾄﾗｲ要求
CON
DW #0 DM825              ; ST2_2 ﾜｰｸ有無(0=無)
MPP
LD R4201                 ; IND1 ST2 ﾜｰｸ検出2(中1側)
AND R41901               ; 検査C2表示灯
ANB R41915               ; ﾘﾄﾗｲ要求
ANL
SET R41915               ; ﾘﾄﾗｲ要求
CON
DW #0 DM825              ; ST2_2 ﾜｰｸ有無(0=無)
CON
DW #2 DM3391             ; ST2-No2 NGﾜｰｸ 0=OK
MRD
AND @MR102               ; ﾜｰｸ3処理有
MPS
ANB R4202                ; IND1 ST2 ﾜｰｸ検出3(中2側)
SET R41915               ; ﾘﾄﾗｲ要求
CON
DW #0 DM826              ; ST2_3 ﾜｰｸ有無(0=無)
MPP
LD R4202                 ; IND1 ST2 ﾜｰｸ検出3(中2側)
AND R41902               ; 検査C3表示灯
ANB R41915               ; ﾘﾄﾗｲ要求
ANL
SET R41915               ; ﾘﾄﾗｲ要求
CON
DW #0 DM826              ; ST2_3 ﾜｰｸ有無(0=無)
CON
DW #2 DM3411             ; ST2-No3 NGﾜｰｸ 0=OK
MRD
AND @MR103               ; ﾜｰｸ4処理有
MPS
ANB R4203                ; IND1 ST2 ﾜｰｸ検出4(ST3側)
SET R41915               ; ﾘﾄﾗｲ要求
CON
DW #0 DM827              ; ST2_4 ﾜｰｸ有無(0=無)
MPP
LD R4203                 ; IND1 ST2 ﾜｰｸ検出4(ST3側)
AND R41903               ; 検査C4表示灯
ANB R41915               ; ﾘﾄﾗｲ要求
ANL
SET R41915               ; ﾘﾄﾗｲ要求
CON
DW #0 DM827              ; ST2_4 ﾜｰｸ有無(0=無)
CON
DW #2 DM3431             ; ST2-No4 NGﾜｰｸ 0=OK
MRD
AND= DM7900 #0
DW #0 DM7900
CON
JMP @MR1510
MRD
LD CR2002                ; 常時ON
AND= DM7900 #1
AND @MR012               ; ﾘﾄﾗｲ処理
ANL
DW #0 DM7900
CON
JMP @MR1510
MPP
LD CR2002                ; 常時ON
AND= DM7900 #1
ANB @MR012               ; ﾘﾄﾗｲ処理
ANL
DW #0 DM7900
CON
JMP @MR1108              ; ﾜｰｸﾁｪｯｸ
;Re-Check Part / ワーク再確認
STG @MR1510
MPS
ANB R41915               ; ﾘﾄﾗｲ要求
MPS
LD @MR100                ; ﾜｰｸ1処理有
AND R4200                ; IND1 ST2 ﾜｰｸ検出1(ST1側)
LDB @MR100               ; ﾜｰｸ1処理有
ANB R4200                ; IND1 ST2 ﾜｰｸ検出1(ST1側)
ORL
LD @MR101                ; ﾜｰｸ2処理有
AND R4201                ; IND1 ST2 ﾜｰｸ検出2(中1側)
LDB @MR101               ; ﾜｰｸ2処理有
ANB R4201                ; IND1 ST2 ﾜｰｸ検出2(中1側)
ORL
ANL
LD @MR102                ; ﾜｰｸ3処理有
AND R4202                ; IND1 ST2 ﾜｰｸ検出3(中2側)
LDB @MR102               ; ﾜｰｸ3処理有
ANB R4202                ; IND1 ST2 ﾜｰｸ検出3(中2側)
ORL
ANL
LD @MR103                ; ﾜｰｸ4処理有
AND R4203                ; IND1 ST2 ﾜｰｸ検出4(ST3側)
LDB @MR103               ; ﾜｰｸ4処理有
ANB R4203                ; IND1 ST2 ﾜｰｸ検出4(ST3側)
ORL
ANL
AND R4204                ; IND1 ST2 ﾜｰｸ浮き検出(外側)
AND R4205                ; IND1 ST2 ﾜｰｸ浮き検出(Index側)
ANL
RES R41915               ; ﾘﾄﾗｲ要求
CON
JMP @MR1508
MPP
LD @MR100                ; ﾜｰｸ1処理有
ANB R4200                ; IND1 ST2 ﾜｰｸ検出1(ST1側)
LDB @MR100               ; ﾜｰｸ1処理有
AND R4200                ; IND1 ST2 ﾜｰｸ検出1(ST1側)
ORL
LD @MR101                ; ﾜｰｸ2処理有
ANB R4201                ; IND1 ST2 ﾜｰｸ検出2(中1側)
ORL
LDB @MR101               ; ﾜｰｸ2処理有
AND R4201                ; IND1 ST2 ﾜｰｸ検出2(中1側)
ORL
LD @MR102                ; ﾜｰｸ3処理有
ANB R4202                ; IND1 ST2 ﾜｰｸ検出3(中2側)
ORL
LDB @MR102               ; ﾜｰｸ3処理有
AND R4202                ; IND1 ST2 ﾜｰｸ検出3(中2側)
ORL
LD @MR103                ; ﾜｰｸ4処理有
ANB R4203                ; IND1 ST2 ﾜｰｸ検出4(ST3側)
ORL
LDB @MR103               ; ﾜｰｸ4処理有
AND R4203                ; IND1 ST2 ﾜｰｸ検出4(ST3側)
ORL
ANL
TMR @10 #10
CON
AND @T10
JMP @MR1503
MPP
AND R41915               ; ﾘﾄﾗｲ要求
RES R41915               ; ﾘﾄﾗｲ要求
CON
JMP @MR1108              ; ﾜｰｸﾁｪｯｸ
STG @MR1508
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
RES MR7905               ; IND1 ST2治具1(縦) 開き
CON
SET MR7904               ; IND1 ST2治具1(縦) 閉じ 
CON
RES MR7907               ; IND1 ST2治具2(横) 開き
CON
SET MR7906               ; IND1 ST2治具2(横) 閉じ
CON
RES MR7206               ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ 閉じ
CON
AND R4507                ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ位置決側 開限
AND R4509                ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ基準側　開限
DW #2 DM2910             ; RB10 目標No.
CON
SET MR14805              ; RB10 PCON移動開始
CON
JMP @MR1509
STG @MR1509
AND MR14806              ; RB10 PCON移動完了
DW #0 DM7900
CON
RES MR14806              ; RB10 PCON移動完了
CON
JMP @MR1900              ; AUTO終了処理
;AUTO 1ｻｲｸﾙ終了処理
;AUTO 1Cycle end Operation
STG @MR1900              ; AUTO終了処理
MPS
LD R50001                ; AUTO
AND MR600                ; IND1      ｻｲｸﾙ動作中
ANL
SET R50412               ; IND1 ST2   1ｻｲｸﾙ終了
CON
JMP @MR1902              ; 3902
MPP
ANB R50001               ; AUTO
JMP @MR1902              ; 3902
STG @MR1902              ; 3902
RES R50902               ; IND1 ST2  ｻｲｸﾙ動作中
CON
ANB R50209               ; IND1     動作開始
AND R50409               ; IND1      ｻｲｸﾙ完了
MPS
LDB R50000               ; HOLD
ORB R50213               ; IND1　　　払出し完了
ANL
JMP @MR1000              ; ST2 AUTO開始
MPP
LD R50000                ; HOLD
AND R50213               ; IND1　　　払出し完了
ANL
JMP @MR1903              ; 3903
;AUTO 終了処理
;AUTO Finish Operation
STG @MR1903              ; 3903
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
AND R4507                ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ位置決側 開限
AND R4509                ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ基準側　開限
DW #1 DM2910             ; RB10 目標No.
CON
SET MR14805              ; RB10 PCON移動開始
CON
JMP @MR1904
STG @MR1904
AND MR14806              ; RB10 PCON移動完了
RES MR14806              ; RB10 PCON移動完了
CON
JMP @MR1905
STG @MR1905
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
SET @MR1001              ; ST2 AUTO終了
CON
ENDS
;
LDB R41900               ; 検査C1表示灯
ANB R41901               ; 検査C2表示灯
ANB R41902               ; 検査C3表示灯
ANB R41903               ; 検査C4表示灯
ANB R41905               ; ﾜｰｸ1QRｽｷｬﾝ異常表示
ANB R41906               ; ﾜｰｸ2QRｽｷｬﾝ異常表示
ANB R41907               ; ﾜｰｸ3QRｽｷｬﾝ異常表示
ANB R41908               ; ﾜｰｸ4QRｽｷｬﾝ異常表示
ANB R41910               ; ﾜｰｸ1照合異常表示
ANB R41911               ; ﾜｰｸ2照合異常表示
ANB R41912               ; ﾜｰｸ3照合異常表示
ANB R41913               ; ﾜｰｸ4照合異常表示
OUT @MR007               ; 検査ｴﾗｰ無し
;<h1/>ｽﾃｯﾌﾟ運転
;STEP OERATION
LD R50002                ; STEP
ANB R50202               ; ST2 動作中
SET R50202               ; ST2 動作中
CON
SET @MR800               ; 2100
LDB R50003               ; HOME
ANB R50001               ; AUTO
ANB R50002               ; STEP
AND @MR801               ; 2101
RES R50202               ; ST2 動作中
CON
RES @MR801               ; 2101
LD LR40300               ; IND1_ST2 STEP-01 通常動作
OR LR40301               ; IND1_ST2 STEP-02
OR LR40308               ; ST2 STEP-09 flag
OUT @MR014               ; ST2 STEP Parameter OK
STG @MR800               ; 2100
AND R50202               ; ST2 動作中
MPS
AND LR40300              ; IND1_ST2 STEP-01 通常動作
RES R42215               ; ﾘｰｸ検査OK
CON
JMP @MR1112              ; 2010
MRD
AND LR40301              ; IND1_ST2 STEP-02
JMP @MR900
MRD
AND LR40308              ; ST2 STEP-09 flag
RES R42215               ; ﾘｰｸ検査OK
CON
SET R50313               ; STEP中CallPost回避
CON
JMP @MR1112              ; 2010
MPP
ANB @MR014               ; ST2 STEP Parameter OK
JMP @MR808
;STEP終了処理
STG @MR808
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
RES @MR2402              ; QRﾁｪｯｸ12異常終了
CON
RES @MR2702              ; QRﾁｪｯｸ34異常終了
CON
RES MR7904               ; IND1 ST2治具1(縦) 閉じ 
CON
SET MR7905               ; IND1 ST2治具1(縦) 開き
CON
RES MR7906               ; IND1 ST2治具2(横) 閉じ
CON
SET MR7907               ; IND1 ST2治具2(横) 開き
CON
SET R50009               ; HOLDRQ
CON
JMP @MR809
STG @MR809
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
AND R50000               ; HOLD
ZRES DM3200 DM3799       ; IND2-ST2 QRID-1  排出時読込 
CON
ZRES R41900 R41904       ; 検査C1表示灯
CON
ZRES R41905 R41914       ; ﾜｰｸ1QRｽｷｬﾝ異常表示
CON
RES R50313               ; STEP中CallPost回避
CON
SET R50412               ; IND1 ST2   1ｻｲｸﾙ終了
CON
SET @MR801               ; 2101
CON
ENDS
;
STG @MR900
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
ZRES R41905 R41914       ; ﾜｰｸ1QRｽｷｬﾝ異常表示
CON
ZRES R41900 R41904       ; 検査C1表示灯
CON
SET R42215               ; ﾘｰｸ検査OK
CON
TMR @29 #2
CON
AND @T29
JMP @MR901
STG @MR901
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
MPS
ANB R49815               ; QR無効SW
MPS
LD R4200                 ; IND1 ST2 ﾜｰｸ検出1(ST1側)
OR R4201                 ; IND1 ST2 ﾜｰｸ検出2(中1側)
ANL
SET @MR2400              ; QRﾁｪｯｸ12開始
MRD
LD R4202                 ; IND1 ST2 ﾜｰｸ検出3(中2側)
OR R4203                 ; IND1 ST2 ﾜｰｸ検出4(ST3側)
ANL
SET @MR2700              ; QRﾁｪｯｸ34開始
MPP
JMP @MR902
MRD
AND R49815               ; QR無効SW
JMP @MR902
MRD
MOV #0 @DM4100
MPP
MOV #0 @DM4101
STG @MR902
LD @MR2401               ; QRﾘｰﾀﾞｰﾁｪｯｸ12完了
LDB R4200                ; IND1 ST2 ﾜｰｸ検出1(ST1側)
ANB R4201                ; IND1 ST2 ﾜｰｸ検出2(中1側)
ORL
LD @MR2701               ; QRﾘｰﾀﾞｰﾁｪｯｸ34完了
LDB R4202                ; IND1 ST2 ﾜｰｸ検出3(中2側)
ANB R4203                ; IND1 ST2 ﾜｰｸ検出4(ST3側)
ORL
ANL
OR R49815                ; QR無効SW
ANL
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR903
STG @MR903
RES @MR2401              ; QRﾘｰﾀﾞｰﾁｪｯｸ12完了
CON
RES @MR2701              ; QRﾘｰﾀﾞｰﾁｪｯｸ34完了
CON
MPS
LDB @MR2402              ; QRﾁｪｯｸ12異常終了
ORB @MR2702              ; QRﾁｪｯｸ34異常終了
ANL
JMP @MR1203              ; 検査結果 確認
MPP
LD @MR2402               ; QRﾁｪｯｸ12異常終了
AND @MR2702              ; QRﾁｪｯｸ34異常終了
ANL
JMP @MR808
;<h1/>ｻﾌﾞﾙｰﾁﾝ
;Subroutine
;<h1/> ﾘｰｸ検査
; Leak Detection
;  
;治具ｸﾗﾝﾌﾟ / ST2 Jig close
STG @MR2000              ; ﾘｰｸ検査開始
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
SET @MR2002
CON
SET R43208               ; ｻｲｸﾙﾀｲﾑ計測用2-1
CON
RES MR7905               ; IND1 ST2治具1(縦) 開き
CON
SET MR7904               ; IND1 ST2治具1(縦) 閉じ 
CON
TMH @21 #50
CON
AND @T21
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR2003
STG @MR2003
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
RES MR7206               ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ 閉じ
CON
RES MR7907               ; IND1 ST2治具2(横) 開き
CON
SET MR7906               ; IND1 ST2治具2(横) 閉じ
CON
TMH @22 #50
CON
AND @T22
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR2004
;供給孔ｸﾗﾝﾌﾟ 閉じ / Supply hole clamp close
STG @MR2004
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
RES MR7206               ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ 閉じ
CON
AND R4507                ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ位置決側 開限
AND R4509                ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ基準側　開限
SET @MR001               ; PACK set1(Leak inspection)
CON
DW #3 DM2910             ; RB10 目標No.
CON
SET MR14805              ; RB10 PCON移動開始
CON
JMP @MR2005
STG @MR2005
AND MR14806              ; RB10 PCON移動完了
RES MR14806              ; RB10 PCON移動完了
CON
JMP @MR2006
STG @MR2006
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR2007
STG @MR2007
MPS
LDB MR107                ; Supply Hole ON
AND R4507                ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ位置決側 開限
AND R4509                ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ基準側　開限
ANL
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
RES R43208               ; ｻｲｸﾙﾀｲﾑ計測用2-1
CON
JMP @MR2008
MRD
AND MR107                ; Supply Hole ON
SET MR7206               ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ 閉じ
CON
ANB R4507                ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ位置決側 開限
AND R4506                ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ位置決側 閉限
ANB R4509                ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ基準側　開限
AND R4508                ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ基準側　閉限
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
RES R43208               ; ｻｲｸﾙﾀｲﾑ計測用2-1
CON
JMP @MR2008
MPP
AND @MR106               ; 106
JMP @MR2100
;ﾘｰｸ検査前圧力確認 / Pressure check before Leak Detection
LD R4400                 ; ﾘｰｸ検査圧力確認1(ST1側) OUT1　
AND R4401                ; ﾘｰｸ検査圧力確認1(ST1側) OUT2　
AND R4402                ; ﾘｰｸ検査圧力確認2(中-ST1側) OUT1
AND R4403                ; ﾘｰｸ検査圧力確認2(中-ST1側) OUT2
AND R4404                ; ﾘｰｸ検査圧力確認3(中-ST3側) OUT1
AND R4405                ; ﾘｰｸ検査圧力確認3(中-ST3側) OUT2
AND R4406                ; ﾘｰｸ検査圧力確認4(ST3側) OUT1　
AND R4407                ; ﾘｰｸ検査圧力確認4(ST3側) OUT2　
OUT @MR008               ; 検査元圧OK
STG @MR2008
SET R43209               ; ｻｲｸﾙﾀｲﾑ計測用2-2
CON
MPS
LD @MR008                ; 検査元圧OK
OR R50002                ; STEP
ANL
JMP @MR2009
MPP
LDB @MR008               ; 検査元圧OK
ANB R50002               ; STEP
ANL
SET @MR104               ; Err32 ST2 Err2
CON
JMP @MR2100
;ﾘｰｸ検査前流量計確認 / Leak check before Leak Detection 
LD R4408                 ; ﾘｰｸ検査流量計1　(ST1側) OUT1
AND R4409                ; ﾘｰｸ検査流量計1　(ST1側) OUT2
AND R4410                ; ﾘｰｸ検査流量計2　(中-ST1側) OUT1
AND R4411                ; ﾘｰｸ検査流量計2　(中-ST1側) OUT2
AND R4412                ; ﾘｰｸ検査流量計3　(中-ST3側) OUT1
AND R4413                ; ﾘｰｸ検査流量計3　(中-ST3側) OUT2
AND R4414                ; ﾘｰｸ検査流量計4　(ST3側) OUT1
AND R4415                ; ﾘｰｸ検査流量計4　(ST3側) OUT2
OUT @MR009               ; 検査流量計OK
STG @MR2009
MPS
LD @MR009                ; 検査流量計OK
OR R50002                ; STEP
ANL
JMP @MR2010
MPP
LDB @MR009               ; 検査流量計OK
ANB R50002               ; STEP
ANL
SET @MR105               ; 105
CON
JMP @MR2100
;押し棒 下降 / Pusher rod down
STG @MR2010
MPS
SET MR7200               ; ﾘｰｸ検査押棒1 下降
CON
SET MR7202               ; ﾘｰｸ検査押棒2 下降
CON
AND R4500                ; ﾘｰｸ検査押し棒1 下降限
AND R4502                ; ﾘｰｸ検査押し棒2 下降限
RES R43209               ; ｻｲｸﾙﾀｲﾑ計測用2-2
CON
SET R43210               ; ｻｲｸﾙﾀｲﾑ計測用2-3
CON
JMP @MR2011
MPP
AND @MR106               ; 106
JMP @MR2100
;
STG @MR2011
MPS
LD R50002                ; STEP
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
ANL
SET MR7204               ; ﾘｰｸ検査ﾍｯﾄﾞ 下降
CON
AND R4504                ; ﾘｰｸ検査ﾍｯﾄﾞ 下降限
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR2012
MRD
LD R50001                ; AUTO
ANB R50112               ; Err ST2
ANL
SET MR7204               ; ﾘｰｸ検査ﾍｯﾄﾞ 下降
CON
AND R4504                ; ﾘｰｸ検査ﾍｯﾄﾞ 下降限
JMP @MR2012
MPP
AND @MR106               ; 106
JMP @MR2100
STG @MR2012
MPS
LD R50002                ; STEP
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
ANL
SET MR7200               ; ﾘｰｸ検査押棒1 下降
CON
SET MR7202               ; ﾘｰｸ検査押棒2 下降
CON
AND R4500                ; ﾘｰｸ検査押し棒1 下降限
AND R4502                ; ﾘｰｸ検査押し棒2 下降限
TMH @6 #30
CON
AND @T6
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR2108
MRD
LD R50001                ; AUTO
ANB R50112               ; Err ST2
ANL
SET MR7200               ; ﾘｰｸ検査押棒1 下降
CON
SET MR7202               ; ﾘｰｸ検査押棒2 下降
CON
AND R4500                ; ﾘｰｸ検査押し棒1 下降限
AND R4502                ; ﾘｰｸ検査押し棒2 下降限
TMH @7 #70
CON
AND @T7
JMP @MR2109
MPP
AND @MR106               ; 106
JMP @MR2100
LD @MR2012
AND LR102                ; 流量計無効
MPS
AND @MR100               ; ﾜｰｸ1処理有
SET MR7208               ; ﾘｰｸ検査1（ST1側） 加圧
MRD
AND @MR101               ; ﾜｰｸ2処理有
SET MR7209               ; ﾘｰｸ検査2（中手前側） 加圧
MRD
AND @MR102               ; ﾜｰｸ3処理有
SET MR7210               ; ﾘｰｸ検査3（中奥側） 加圧
MPP
AND @MR103               ; ﾜｰｸ4処理有
SET MR7211               ; ﾘｰｸ検査4（ST3側） 加圧
;ﾘｰｸ検査ﾕﾆｯﾄｼﾘﾝﾀﾞｴﾗｰ処理
;Leak Check UT Cylinder Error
STG @MR2100
RES MR7204               ; ﾘｰｸ検査ﾍｯﾄﾞ 下降
CON
RES MR7200               ; ﾘｰｸ検査押棒1 下降
CON
RES MR7202               ; ﾘｰｸ検査押棒2 下降
CON
RES MR7208               ; ﾘｰｸ検査1（ST1側） 加圧
CON
RES MR7209               ; ﾘｰｸ検査2（中手前側） 加圧
CON
RES MR7210               ; ﾘｰｸ検査3（中奥側） 加圧
CON
RES MR7211               ; ﾘｰｸ検査4（ST3側） 加圧
CON
LD R4505                 ; ﾘｰｸ検査ﾍｯﾄﾞ 上昇限
OR MR4505                ; Cylinder Error 4505
ANL
LD R4501                 ; ﾘｰｸ検査押し棒1 上昇限
OR MR4501                ; Cylinder Error 4501
ANL
LD R4503                 ; ﾘｰｸ検査押し棒2 上昇限
OR MR4503                ; Cylinder Error 4503
ANL
RES MR7206               ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ 閉じ
CON
LD R4507                 ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ位置決側 開限
OR MR4507                ; Cylinder Error 4507
ANL
LD R4509                 ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ基準側　開限
OR MR4509                ; Cylinder Error 4509
ANL
JMP @MR2101
STG @MR2101
DW #1 DM2910             ; RB10 目標No.
CON
SET MR14805              ; RB10 PCON移動開始
CON
JMP @MR2102
STG @MR2102
AND MR14806              ; RB10 PCON移動完了
RES @MR001               ; PACK set1(Leak inspection)
CON
RES MR14806              ; RB10 PCON移動完了
CON
JMP @MR2103
STG @MR2103
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
ANB MR4500               ; Cylinder Error 4500
ANB MR4501               ; Cylinder Error 4501
ANB MR4502               ; Cylinder Error 4502
ANB MR4503               ; Cylinder Error 4503
ANB MR4504               ; Cylinder Error 4504
ANB MR4505               ; Cylinder Error 4505
ANB MR4506               ; Cylinder Error 4506
ANB MR4507               ; Cylinder Error 4507
ANB MR4508               ; Cylinder Error 4508
ANB MR4509               ; Cylinder Error 4509
JMP @MR2104
STG @MR2104
MPS
LDB @MR104               ; Err32 ST2 Err2
ANB @MR105               ; 105
ANL
DW #0 @DM0               ; 押し棒押込み実施回数
CON
JMP @MR2000              ; ﾘｰｸ検査開始
MRD
AND @MR104               ; Err32 ST2 Err2
SET @MR304               ; Err44
CON
JMP @MR2105
MPP
AND @MR105               ; 105
SET @MR308               ; Err45
CON
JMP @MR2106
;Err37 ﾘｰｸ検査圧力設定異常 / Pressure before Leak Check Error 
STG @MR2105
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
AND @MR307               ; Err44解除完了
RES @MR104               ; Err32 ST2 Err2
CON
RES @MR307               ; Err44解除完了
CON
JMP @MR2000              ; ﾘｰｸ検査開始
;Err37 ﾘｰｸ検査流量設定異常 / Flow Gage before Leak Check Error 
STG @MR2106
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
AND @MR311               ; Err45解除完了
RES @MR105               ; 105
CON
RES @MR311               ; Err45解除完了
CON
JMP @MR2000              ; ﾘｰｸ検査開始
;
STG @MR2108
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
RES MR7202               ; ﾘｰｸ検査押棒2 下降
CON
RES MR7200               ; ﾘｰｸ検査押棒1 下降
CON
RES MR7208               ; ﾘｰｸ検査1（ST1側） 加圧
CON
RES MR7209               ; ﾘｰｸ検査2（中手前側） 加圧
CON
RES MR7210               ; ﾘｰｸ検査3（中奥側） 加圧
CON
RES MR7211               ; ﾘｰｸ検査4（ST3側） 加圧
CON
AND R4501                ; ﾘｰｸ検査押し棒1 上昇限
AND R4503                ; ﾘｰｸ検査押し棒2 上昇限
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
@INC @DM0                ; 押し棒押込み実施回数
CON
JMP @MR2110
STG @MR2109
MPS
ANB R50112               ; Err ST2
RES MR7202               ; ﾘｰｸ検査押棒2 下降
CON
RES MR7200               ; ﾘｰｸ検査押棒1 下降
CON
RES MR7208               ; ﾘｰｸ検査1（ST1側） 加圧
CON
RES MR7209               ; ﾘｰｸ検査2（中手前側） 加圧
CON
RES MR7210               ; ﾘｰｸ検査3（中奥側） 加圧
CON
RES MR7211               ; ﾘｰｸ検査4（ST3側） 加圧
CON
AND R4501                ; ﾘｰｸ検査押し棒1 上昇限
AND R4503                ; ﾘｰｸ検査押し棒2 上昇限
@INC @DM0                ; 押し棒押込み実施回数
CON
SET @MR1700
CON
JMP @MR2110
MPP
AND @MR106               ; 106
JMP @MR2100
STG @MR2110
LD R50002                ; STEP
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
LD R50001                ; AUTO
ANB R50112               ; Err ST2
ORL
ANL
MPS
AND>= @DM0 FM360         ; 押し棒押込み実施回数  ﾘｰｸ検査 押棒押込み回数設定
RES R43210               ; ｻｲｸﾙﾀｲﾑ計測用2-3
CON
JMP @MR2200              ; ﾘｰｸ検査開始
MPP
AND< @DM0 FM360          ; 押し棒押込み実施回数  ﾘｰｸ検査 押棒押込み回数設定
JMP @MR2012
;ﾘｰｸ検査
;Leak inspection
STG @MR2200              ; ﾘｰｸ検査開始
SET R43211               ; ｻｲｸﾙﾀｲﾑ計測用2-4
CON
MPS
ANB @MR106               ; 106
MPS
AND MR111                ; Sｻｲｽﾞ
TMH #40 #9999            ; Sｻｲｽﾞﾘｰｸ待機時間
CON
AND T40                  ; Sｻｲｽﾞﾘｰｸ待機時間
JMP @MR2201              ; 3601
MRD
AND MR112                ; Lｻｲｽﾞ
TMH #41 #9999            ; Lｻｲｽﾞﾘｰｸ待機時間
CON
AND T41                  ; Lｻｲｽﾞﾘｰｸ待機時間
JMP @MR2201              ; 3601
MRD
AND @MR100               ; ﾜｰｸ1処理有
DW #1 DM3372             ; ST2-No1 ﾘｰｸ検査PNo.
CON
SET MR7208               ; ﾘｰｸ検査1（ST1側） 加圧
MRD
AND @MR101               ; ﾜｰｸ2処理有
DW #2 DM3392             ; ST2-No2 ﾘｰｸ検査PNo.
CON
SET MR7209               ; ﾘｰｸ検査2（中手前側） 加圧
MRD
AND @MR102               ; ﾜｰｸ3処理有
DW #3 DM3412             ; ST2-No3 ﾘｰｸ検査PNo.
CON
SET MR7210               ; ﾘｰｸ検査3（中奥側） 加圧
MPP
AND @MR103               ; ﾜｰｸ4処理有
DW #4 DM3432             ; ST2-No4 ﾘｰｸ検査PNo.
CON
SET MR7211               ; ﾘｰｸ検査4（ST3側） 加圧
MPP
AND @MR106               ; 106
RES MR7208               ; ﾘｰｸ検査1（ST1側） 加圧
CON
RES MR7209               ; ﾘｰｸ検査2（中手前側） 加圧
CON
RES MR7210               ; ﾘｰｸ検査3（中奥側） 加圧
CON
RES MR7211               ; ﾘｰｸ検査4（ST3側） 加圧
CON
JMP @MR2100
STG @MR2201              ; 3601
MPS
TMR @5 #8
CON
AND @T5
LD R4408                 ; ﾘｰｸ検査流量計1　(ST1側) OUT1
OR R41900                ; 検査C1表示灯
ORB @MR100               ; ﾜｰｸ1処理有
LD R4410                 ; ﾘｰｸ検査流量計2　(中-ST1側) OUT1
OR R41901                ; 検査C2表示灯
ORB @MR101               ; ﾜｰｸ2処理有
ANL
LD R4412                 ; ﾘｰｸ検査流量計3　(中-ST3側) OUT1
OR R41902                ; 検査C3表示灯
ORB @MR102               ; ﾜｰｸ3処理有
ANL
LD R4414                 ; ﾘｰｸ検査流量計4　(ST3側) OUT1
OR R41903                ; 検査C4表示灯
ORB @MR103               ; ﾜｰｸ4処理有
ANL
OR MR003                 ; ST2 Leak Judgment Disable
ANL
JMP @MR2202              ; 3606
MRD
LD @MR100                ; ﾜｰｸ1処理有
ANB R4408                ; ﾘｰｸ検査流量計1　(ST1側) OUT1
ANL
TMH @1 #20
CON
AND @T1
ANB MR003                ; ST2 Leak Judgment Disable
SET R41900               ; 検査C1表示灯
MRD
LD @MR101                ; ﾜｰｸ2処理有
ANB R4410                ; ﾘｰｸ検査流量計2　(中-ST1側) OUT1
ANL
TMH @2 #20
CON
AND @T2
ANB MR003                ; ST2 Leak Judgment Disable
SET R41901               ; 検査C2表示灯
MRD
LD @MR102                ; ﾜｰｸ3処理有
ANB R4412                ; ﾘｰｸ検査流量計3　(中-ST3側) OUT1
ANL
TMH @3 #20
CON
AND @T3
ANB MR003                ; ST2 Leak Judgment Disable
SET R41902               ; 検査C3表示灯
MPP
LD @MR103                ; ﾜｰｸ4処理有
ANB R4414                ; ﾘｰｸ検査流量計4　(ST3側) OUT1
ANL
TMH @4 #20
CON
AND @T4
ANB MR003                ; ST2 Leak Judgment Disable
SET R41903               ; 検査C4表示灯
STG @MR2202              ; 3606
DW #0 @DM0               ; 押し棒押込み実施回数
CON
RES MR7208               ; ﾘｰｸ検査1（ST1側） 加圧
CON
RES MR7209               ; ﾘｰｸ検査2（中手前側） 加圧
CON
RES MR7210               ; ﾘｰｸ検査3（中奥側） 加圧
CON
RES MR7211               ; ﾘｰｸ検査4（ST3側） 加圧
CON
RES R43211               ; ｻｲｸﾙﾀｲﾑ計測用2-4
CON
JMP @MR2203
STG @MR2203
MPS
ANB @MR106               ; 106
MPS
LD R50002                ; STEP
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
ANL
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR2204
MPP
LD R50001                ; AUTO
ANB R50112               ; Err ST2
ANL
JMP @MR2204
MPP
AND @MR106               ; 106
JMP @MR2100
STG @MR2204
MPS
LD R50002                ; STEP
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
ANL
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR2205
MPP
LD R50001                ; AUTO
ANB R50112               ; Err ST2
ANL
JMP @MR2205
STG @MR2205
SET R43212               ; ｻｲｸﾙﾀｲﾑ計測用2-5
CON
RES MR7206               ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ 閉じ
CON
LD R4507                 ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ位置決側 開限
OR MR4507                ; Cylinder Error 4507
ANL
LD R4509                 ; ﾘｰｸ検査 供給孔ｸﾗﾝﾌﾟ基準側　開限
OR MR4509                ; Cylinder Error 4509
ANL
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR2206
STG @MR2206
RES MR7204               ; ﾘｰｸ検査ﾍｯﾄﾞ 下降
CON
MPS
LD R4505                 ; ﾘｰｸ検査ﾍｯﾄﾞ 上昇限
OR MR4505                ; Cylinder Error 4505
ANL
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR2208
MRD
AND R50002               ; STEP
SET MR14805              ; RB10 PCON移動開始
CON
DW #1 DM2910             ; RB10 目標No.
MPP
AND R50001               ; AUTO
SET MR14805              ; RB10 PCON移動開始
CON
DW #2 DM2910             ; RB10 目標No.
STG @MR2208
AND MR14806              ; RB10 PCON移動完了
RES @MR001               ; PACK set1(Leak inspection)
CON
RES MR14806              ; RB10 PCON移動完了
CON
JMP @MR2209
STG @MR2209
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
MPS
AND R50002               ; STEP
RES MR7904               ; IND1 ST2治具1(縦) 閉じ 
CON
SET MR7905               ; IND1 ST2治具1(縦) 開き
CON
RES MR7906               ; IND1 ST2治具2(横) 閉じ
CON
SET MR7907               ; IND1 ST2治具2(横) 開き
CON
SET @MR2001              ; ﾘｰｸ検査完了
CON
RES @MR2002
CON
RES R43212               ; ｻｲｸﾙﾀｲﾑ計測用2-5
CON
ENDS
MPP
AND R50001               ; AUTO
RES @MR2002
CON
SET @MR2001              ; ﾘｰｸ検査完了
CON
RES R43212               ; ｻｲｸﾙﾀｲﾑ計測用2-5
CON
ENDS
;<h1/> QRﾘｰﾀﾞｰ  ﾁｪｯｸ
; QR Reader Check
; 
;<h1/>  Cartrigde 1,2
STG @MR2400              ; QRﾁｪｯｸ12開始
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
LD @MR1700
ORB @MR2002
ANL
RES @MR2915
CON
SET R43213               ; ｻｲｸﾙﾀｲﾑ計測用2-6
CON
@INC @DM4100
CON
SET @MR002               ; PACK set2(QR12)
CON
MPS
ANB LR1000               ; QR SR-1000
RES R30401               ; Port1 通信エラー
CON
JMP @MR2404
MPP
AND LR1000               ; QR SR-1000
RES MR3403               ; QR Read 1 & 2 Finish
CON
JMP @MR2404
STG @MR2404
MPS
ANB LR1000               ; QR SR-1000
JMP @MR2405
FMOV #0 DM30001 #5       ; Port1 送信ﾃﾞｰﾀ数
MPP
AND LR1000               ; QR SR-1000
RES MR3415
CON
SET MR3401               ; QR Read 1 & 2 Start
CON
JMP @MR2405
STG @MR2405
MPS
ANB LR1000               ; QR SR-1000
MPS
DW #8 DM30001            ; Port1 送信ﾃﾞｰﾀ数
CON
DW $4C41 DM30002         ; Port1 送信ﾃﾞｰﾀ
CON
DW $4245 DM30003         ; Port1 送信ﾃﾞｰﾀ2
CON
DW $4C53 DM30004         ; Port1 送信ﾃﾞｰﾀ3
MRD
LD<> DM824 #0            ; ST2_1 ﾜｰｸ有無(0=無)
AND<> DM825 #0           ; ST2_2 ﾜｰｸ有無(0=無)
OR R50002                ; STEP
ANL
DW $3D32 DM30005         ; Port1 送信ﾃﾞｰﾀ4
MRD
LD<> DM824 #0            ; ST2_1 ﾜｰｸ有無(0=無)
AND= DM825 #0            ; ST2_2 ﾜｰｸ有無(0=無)
LD= DM824 #0             ; ST2_1 ﾜｰｸ有無(0=無)
AND<> DM825 #0           ; ST2_2 ﾜｰｸ有無(0=無)
ORL
ANL
DW $3D31 DM30005         ; Port1 送信ﾃﾞｰﾀ4
MPP
SET R30101               ; Port1 送信要求
CON
JMP @MR2406
MPP
LD LR1000                ; QR SR-1000
AND MR3403               ; QR Read 1 & 2 Finish
ANL
RES MR3403               ; QR Read 1 & 2 Finish
CON
JMP @MR2504
STG @MR2406
AND R30001               ; Port1 送信完了
RES R30101               ; Port1 送信要求
CON
JMP @MR2407
STG @MR2407
TMH @12 #10
CON
AND @T12
JMP @MR2500              ; QRｺｰﾄﾞ読み取り開始
;QRｺｰﾄﾞ読み取り（東研） / QR code Read
STG @MR2500              ; QRｺｰﾄﾞ読み取り開始
SET R30102               ; Port1 受信ﾃﾞﾀ読出完了
CON
ANB R30002               ; Port1 読出要求
JMP @MR2501
STG @MR2501
RES R34400               ; Port4 通信完了
CON
RES R30102               ; Port1 受信ﾃﾞﾀ読出完了
CON
JMP @MR2502
STG @MR2502
MPS
AND R30400               ; Port1 通信完了
JMP @MR2503
MPP
ANB R30400               ; Port1 通信完了
MSTRT QR_TFIR-31 #15
STG @MR2503
RES R30400               ; Port1 通信完了
CON
JMP @MR2504
STG @MR2504
MPS
ANB LR1000               ; QR SR-1000
MPS
ANB R30401               ; Port1 通信エラー
TMR @32 #2
CON
AND @T32
JMP @MR2507
MPP
AND R30401               ; Port1 通信エラー
RES R30401               ; Port1 通信エラー
CON
RES @MR002               ; PACK set2(QR12)
CON
SET R41905               ; ﾜｰｸ1QRｽｷｬﾝ異常表示
CON
SET R41906               ; ﾜｰｸ2QRｽｷｬﾝ異常表示
CON
JMP @MR2607
MPP
AND LR1000               ; QR SR-1000
MPS
LDB MR3415
ORB CR2003               ; 常時OFF
ANL
TMR @30 #2
CON
AND @T30
JMP @MR2507
MPP
LD MR3415
AND CR2003               ; 常時OFF
ANL
RES MR3415
CON
RES @MR002               ; PACK set2(QR12)
CON
SET R41905               ; ﾜｰｸ1QRｽｷｬﾝ異常表示
CON
SET R41906               ; ﾜｰｸ2QRｽｷｬﾝ異常表示
CON
JMP @MR2607
;Err43 上ﾗﾍﾞﾙQRｺｰﾄﾞｽｷｬﾝ異常 / QR Code Scan Error
STG @MR2505
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
AND @MR315               ; Err46解除完了
SET @MR312               ; Err46
CON
RES @MR315               ; Err46解除完了
CON
JMP @MR2506
STG @MR2506
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
MPS
LD R50002                ; STEP
AND LR40301              ; IND1_ST2 STEP-02
ANL
SET @MR2402              ; QRﾁｪｯｸ12異常終了
CON
JMP @MR2607
MPP
LDB R50002               ; STEP
ORB LR40301              ; IND1_ST2 STEP-02
ANL
MPS
ANB @MR012               ; ﾘﾄﾗｲ処理
SET R41905               ; ﾜｰｸ1QRｽｷｬﾝ異常表示
CON
SET R41906               ; ﾜｰｸ2QRｽｷｬﾝ異常表示
CON
JMP @MR2607
MPP
AND @MR012               ; ﾘﾄﾗｲ処理
RES R41915               ; ﾘﾄﾗｲ要求
CON
JMP @MR2400              ; QRﾁｪｯｸ12開始
;
STG @MR2507
RES @MR002               ; PACK set2(QR12)
CON
JMP @MR2600              ; QRﾁｪｯｸ
;QRｺｰﾄﾞﾃﾞｰﾀ確認（東研） / QR code data check
STG @MR2600              ; QRﾁｪｯｸ
MPS
LD @MR100                ; ﾜｰｸ1処理有
AND @MR101               ; ﾜｰｸ2処理有
ANL
MPS
LD= $4252 DM31520
OR= $4252 DM31510
ANL
SET R41905               ; ﾜｰｸ1QRｽｷｬﾝ異常表示
CON
SET R41906               ; ﾜｰｸ2QRｽｷｬﾝ異常表示
CON
JMP @MR2604
MPP
LD<> $4252 DM31520
AND<> $4252 DM31510
ANL
JMP @MR2602
MRD
LD @MR100                ; ﾜｰｸ1処理有
ANB @MR101               ; ﾜｰｸ2処理有
ANL
MPS
AND= $4252 DM31520
SET R41905               ; ﾜｰｸ1QRｽｷｬﾝ異常表示
CON
JMP @MR2604
MPP
AND<> $4252 DM31520
JMP @MR2602
MPP
LDB @MR100               ; ﾜｰｸ1処理有
AND @MR101               ; ﾜｰｸ2処理有
ANL
MPS
AND= $4252 DM31520
SET R41906               ; ﾜｰｸ2QRｽｷｬﾝ異常表示
CON
JMP @MR2604
MPP
AND<> $4252 DM31520
JMP @MR2602
;'Judge OpusLabel or Not
;
;'Memory Clear
;ZRES(DM31600,DM31609) 'Clear Memory Right 2-Char Case1
;ZRES(DM31610,DM31619) 'Clear Memory Right 5-Char Case1
;ZRES(DM31700,DM31709) 'Clear Memory Right 2-Char Case2
;ZRES(DM31710,DM31719) 'Clear Memory Right 5-Char Case2
;
;'Memory Move Case1
;DM31600.T = RIGHT(DM31520.T,2) 'Store Right 2-Char
;DM31610.T = LEFT(DM31520.T,5) 'Store Left 5-Char
;
;'Memory Move Case2
;DM31700.T = RIGHT(DM31510.T,2) 'Store Right 2-Char
;DM31710.T = LEFT(DM31510.T,5) 'Store Left 5-Char
;
;'Judgement
;IF(DM31600.T = "_O") THEN
;	SET(MR18000) 'Is OpusLabel Case 1
;ELSE
;	RES(MR18000) 'Is Not OpusLabel
;	
;IF(DM31700.T = "_O") THEN
;	SET(MR18100) 'Is OpusLabel Case 2
;ELSE
;	RES(MR18100) 'Is Not OpusLabel
;	
;END IF
;END IF
;	
;'Finish Script 
;SET(@MR1600)
;
;
LD @MR2602
AND LR30001
NCJ #1000
;'Judge OpusLabel or Not
;
;'Memory Clear
;
;ZRES(DM31600,DM31609) 'Clear Memory Right 2-Char Case1
;
LD CR2002                ; 常時ON
ZRES DM31600 DM31609
;ZRES(DM31610,DM31619) 'Clear Memory Right 5-Char Case1
;
LD CR2002                ; 常時ON
ZRES DM31610 DM31619
;ZRES(DM31700,DM31709) 'Clear Memory Right 2-Char Case2
;
LD CR2002                ; 常時ON
ZRES DM31700 DM31709
;ZRES(DM31710,DM31719) 'Clear Memory Right 5-Char Case2
;
LD CR2002                ; 常時ON
ZRES DM31710 DM31719
;'Memory Move Case1
;
;DM31600.T = RIGHT(DM31520.T,2) 'Store Right 2-Char
;
LD CR2002                ; 常時ON
ADRSET VM2 VM0
MOV #0 VM2
MOV.D VM0 @VM0
LD CR2002                ; 常時ON
SRGHT DM31520 *@VM0 #2
LD CR2002                ; 常時ON
SMOV *@VM0 DM31600
;DM31610.T = LEFT(DM31520.T,5) 'Store Left 5-Char
;
LD CR2002                ; 常時ON
ADRSET VM2 VM0
MOV #0 VM2
MOV.D VM0 @VM2
LD CR2002                ; 常時ON
SLEFT DM31520 *@VM2 #5
LD CR2002                ; 常時ON
SMOV *@VM2 DM31610
;'Memory Move Case2
;
;DM31700.T = RIGHT(DM31510.T,2) 'Store Right 2-Char
;
LD CR2002                ; 常時ON
ADRSET VM2 VM0
MOV #0 VM2
MOV.D VM0 @VM4
LD CR2002                ; 常時ON
SRGHT DM31510 *@VM4 #2
LD CR2002                ; 常時ON
SMOV *@VM4 DM31700
;DM31710.T = LEFT(DM31510.T,5) 'Store Left 5-Char
;
LD CR2002                ; 常時ON
ADRSET VM2 VM0
MOV #0 VM2
MOV.D VM0 @VM6
LD CR2002                ; 常時ON
SLEFT DM31510 *@VM6 #5
LD CR2002                ; 常時ON
SMOV *@VM6 DM31710
;'Judgement
;
;IF(DM31600.T = "_O") THEN
;
LD CR2002                ; 常時ON
ADRSET VM2 VM0
MOV #0 VM2
MOV.D VM0 @VM8
SMOV "_O" *@VM8
LD CR2002                ; 常時ON
SCMP DM31600 *@VM8
LD CR2010                ; ＝
NCJ #2000
;	SET(MR18000) 'Is OpusLabel Case 1
;
LD CR2002                ; 常時ON
SET MR18000              ; RB1:動作完了
;ELSE
;
LD CR2002                ; 常時ON
CJ #2001
LABEL #2000
;	RES(MR18000) 'Is Not OpusLabel
;
LD CR2002                ; 常時ON
RES MR18000              ; RB1:動作完了
;IF(DM31700.T = "_O") THEN
;
LD CR2002                ; 常時ON
ADRSET VM2 VM0
MOV #0 VM2
MOV.D VM0 @VM10
SMOV "_O" *@VM10
LD CR2002                ; 常時ON
SCMP DM31700 *@VM10
LD CR2010                ; ＝
NCJ #2002
;	SET(MR18100) 'Is OpusLabel Case 2
;
LD CR2002                ; 常時ON
SET MR18100
;ELSE
;
LD CR2002                ; 常時ON
CJ #2003
LABEL #2002
;	RES(MR18100) 'Is Not OpusLabel
;
LD CR2002                ; 常時ON
RES MR18100
;END IF
;
LABEL #2003
;END IF
;
LABEL #2001
;'Finish Script 
;
;SET(@MR1600)
;
LD CR2002                ; 常時ON
SET @MR1600
LABEL #1000
;
;Check Case 1
STG @MR2602
MPS
LD @MR100                ; ﾜｰｸ1処理有
AND @MR101               ; ﾜｰｸ2処理有
ANL
MPS
LD= DM3015 DM31610       ; QRｺｰﾄﾞ2-1
AND= DM3016 DM31611      ; QRｺｰﾄﾞ2-2
AND= DM3017 DM31612      ; QRｺｰﾄﾞ2-3
AND= DM3018 DM31613      ; QRｺｰﾄﾞ2-4
ANL
JMP @MR2603
MPP
LD<> DM3015 DM31610      ; QRｺｰﾄﾞ2-1
OR<> DM3016 DM31611      ; QRｺｰﾄﾞ2-2
OR<> DM3017 DM31612      ; QRｺｰﾄﾞ2-3
OR<> DM3018 DM31613      ; QRｺｰﾄﾞ2-4
ANL
SET R41910               ; ﾜｰｸ1照合異常表示
CON
JMP @MR2603
MRD
LD @MR100                ; ﾜｰｸ1処理有
ANB @MR101               ; ﾜｰｸ2処理有
ANL
MPS
LD= DM3015 DM31610       ; QRｺｰﾄﾞ2-1
AND= DM3016 DM31611      ; QRｺｰﾄﾞ2-2
AND= DM3017 DM31612      ; QRｺｰﾄﾞ2-3
AND= DM3018 DM31613      ; QRｺｰﾄﾞ2-4
ANL
JMP @MR2604
MPP
LD<> DM3015 DM31610      ; QRｺｰﾄﾞ2-1
OR<> DM3016 DM31611      ; QRｺｰﾄﾞ2-2
OR<> DM3017 DM31612      ; QRｺｰﾄﾞ2-3
OR<> DM3018 DM31613      ; QRｺｰﾄﾞ2-4
ANL
SET R41910               ; ﾜｰｸ1照合異常表示
CON
JMP @MR2604
MRD
LDB @MR100               ; ﾜｰｸ1処理有
AND @MR101               ; ﾜｰｸ2処理有
ANL
JMP @MR2603
MPP
LDB @MR100               ; ﾜｰｸ1処理有
ANB @MR101               ; ﾜｰｸ2処理有
ANL
JMP @MR2604
;Check Case 2
STG @MR2603
MPS
LD @MR100                ; ﾜｰｸ1処理有
AND @MR101               ; ﾜｰｸ2処理有
ANL
MPS
LD= DM3015 DM31710       ; QRｺｰﾄﾞ2-1
AND= DM3016 DM31711      ; QRｺｰﾄﾞ2-2
AND= DM3017 DM31712      ; QRｺｰﾄﾞ2-3
AND= DM3018 DM31713      ; QRｺｰﾄﾞ2-4
ANL
JMP @MR2604
MPP
LD<> DM3015 DM31710      ; QRｺｰﾄﾞ2-1
OR<> DM3016 DM31711      ; QRｺｰﾄﾞ2-2
OR<> DM3017 DM31712      ; QRｺｰﾄﾞ2-3
OR<> DM3018 DM31713      ; QRｺｰﾄﾞ2-4
ANL
SET R41911               ; ﾜｰｸ2照合異常表示
CON
JMP @MR2604
MRD
LDB @MR100               ; ﾜｰｸ1処理有
AND @MR101               ; ﾜｰｸ2処理有
ANL
MPS
LD= DM3015 DM31710       ; QRｺｰﾄﾞ2-1
AND= DM3016 DM31711      ; QRｺｰﾄﾞ2-2
AND= DM3017 DM31712      ; QRｺｰﾄﾞ2-3
AND= DM3018 DM31713      ; QRｺｰﾄﾞ2-4
ANL
JMP @MR2604
MPP
LD<> DM3015 DM31710      ; QRｺｰﾄﾞ2-1
OR<> DM3016 DM31711      ; QRｺｰﾄﾞ2-2
OR<> DM3017 DM31712      ; QRｺｰﾄﾞ2-3
OR<> DM3018 DM31713      ; QRｺｰﾄﾞ2-4
ANL
SET R41911               ; ﾜｰｸ2照合異常表示
CON
JMP @MR2604
MPP
ANB @MR101               ; ﾜｰｸ2処理有
JMP @MR2604
STG @MR2604
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR2605
STG @MR2605
MPS
AND LR311
MPS
LDB R41905               ; ﾜｰｸ1QRｽｷｬﾝ異常表示
ANB R41906               ; ﾜｰｸ2QRｽｷｬﾝ異常表示
ANL
JMP @MR2607
MPP
LD R41905                ; ﾜｰｸ1QRｽｷｬﾝ異常表示
OR R41906                ; ﾜｰｸ2QRｽｷｬﾝ異常表示
ANL
MPS
AND>= @DM4100 DM41
JMP @MR2607
MPP
AND< @DM4100 DM41
TMR @34 #10
CON
AND @T34
JMP @MR2606
MPP
ANB LR311
MPS
LDB R41905               ; ﾜｰｸ1QRｽｷｬﾝ異常表示
ANB R41906               ; ﾜｰｸ2QRｽｷｬﾝ異常表示
ANL
JMP @MR2114
MPP
LD R41905                ; ﾜｰｸ1QRｽｷｬﾝ異常表示
OR R41906                ; ﾜｰｸ2QRｽｷｬﾝ異常表示
ANL
MPS
AND>= @DM4100 DM41
JMP @MR2114
MPP
AND< @DM4100 DM41
TMR @35 #10
CON
AND @T35
JMP @MR2606
STG @MR2606
@INC @DM4100
CON
JMP @MR2400              ; QRﾁｪｯｸ12開始
STG @MR2114
MPS
LD @MR102                ; ﾜｰｸ3処理有
AND R4202                ; IND1 ST2 ﾜｰｸ検出3(中2側)
LD @MR103                ; ﾜｰｸ4処理有
AND R4203                ; IND1 ST2 ﾜｰｸ検出4(ST3側)
ORL
ANL
TMH @17 #100
CON
AND @T17
SET @MR2700              ; QRﾁｪｯｸ34開始
CON
JMP @MR2607
MPP
LDB R4202                ; IND1 ST2 ﾜｰｸ検出3(中2側)
ANB R4203                ; IND1 ST2 ﾜｰｸ検出4(ST3側)
ANL
JMP @MR2607
STG @MR2607
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
SET @MR2915
CON
RES R43213               ; ｻｲｸﾙﾀｲﾑ計測用2-6
CON
RES @MR002               ; PACK set2(QR12)
CON
SET @MR2401              ; QRﾘｰﾀﾞｰﾁｪｯｸ12完了
CON
ENDS
;<h1/>  Cartrigde 3,4
STG @MR2700              ; QRﾁｪｯｸ34開始
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
LD @MR1700
ORB @MR2002
ANL
SET R43214               ; ｻｲｸﾙﾀｲﾑ計測用2-7
CON
@INC @DM4101
CON
SET @MR003               ; PACK set2(QR34)
CON
MPS
ANB LR1000               ; QR SR-1000
RES R34401               ; Port4 通信エラー
CON
JMP @MR2704
MPP
AND LR1000               ; QR SR-1000
RES MR3301               ; QR Read 3&4 Finish
CON
JMP @MR2704
STG @MR2704
MPS
ANB LR1000               ; QR SR-1000
JMP @MR2705
FMOV #0 DM34001 #5       ; Port4 送信ﾃﾞｰﾀ長
MPP
AND LR1000               ; QR SR-1000
RES MR3315
CON
SET MR3300               ; QR Read 3&4 Start
CON
JMP @MR2705
STG @MR2705
MPS
ANB LR1000               ; QR SR-1000
MPS
DW #8 DM34001            ; Port4 送信ﾃﾞｰﾀ長
CON
DW $4C41 DM34002         ; Port4 送信ﾃﾞｰﾀ1
CON
DW $4245 DM34003         ; Port4 送信ﾃﾞｰﾀ2
CON
DW $4C53 DM34004         ; Port4 送信ﾃﾞｰﾀ3
MRD
LD<> DM826 #0            ; ST2_3 ﾜｰｸ有無(0=無)
AND<> DM827 #0           ; ST2_4 ﾜｰｸ有無(0=無)
OR R50002                ; STEP
ANL
DW $3D32 DM34005         ; Port4 送信ﾃﾞｰﾀ4
MRD
LD<> DM826 #0            ; ST2_3 ﾜｰｸ有無(0=無)
AND= DM827 #0            ; ST2_4 ﾜｰｸ有無(0=無)
LD= DM826 #0             ; ST2_3 ﾜｰｸ有無(0=無)
AND<> DM827 #0           ; ST2_4 ﾜｰｸ有無(0=無)
ORL
ANL
DW $3D31 DM34005         ; Port4 送信ﾃﾞｰﾀ4
MPP
SET R34101               ; Port4 送信要求
CON
JMP @MR2706
MPP
LD LR1000                ; QR SR-1000
AND MR3301               ; QR Read 3&4 Finish
ANL
RES MR3301               ; QR Read 3&4 Finish
CON
JMP @MR2804
STG @MR2706
AND R34001               ; Port4 送信完了
RES R34101               ; Port4 送信要求
CON
JMP @MR2707
STG @MR2707
TMH @11 #10
CON
AND @T11
JMP @MR2800              ; QRｺｰﾄﾞ読み取り開始
;QRｺｰﾄﾞ読み取り（東研） / QR code Read
STG @MR2800              ; QRｺｰﾄﾞ読み取り開始
SET R34102               ; Port4 受信ﾃﾞｰﾀ読出完了
CON
ANB R34002               ; Port4 受信ﾃﾞｰﾀ読出要求
JMP @MR2801
STG @MR2801
RES R34400               ; Port4 通信完了
CON
RES R34102               ; Port4 受信ﾃﾞｰﾀ読出完了
CON
JMP @MR2802
STG @MR2802
MPS
AND R34400               ; Port4 通信完了
JMP @MR2803
MPP
ANB R34400               ; Port4 通信完了
MSTRT QR_TFIR-32 #15
STG @MR2803
RES R34400               ; Port4 通信完了
CON
JMP @MR2804
STG @MR2804
MPS
ANB LR1000               ; QR SR-1000
MPS
ANB R34401               ; Port4 通信エラー
TMR @31 #2
CON
AND @T31
JMP @MR2807
MPP
AND R34401               ; Port4 通信エラー
RES R34401               ; Port4 通信エラー
CON
RES @MR003               ; PACK set2(QR34)
CON
SET R41907               ; ﾜｰｸ3QRｽｷｬﾝ異常表示
CON
SET R41908               ; ﾜｰｸ4QRｽｷｬﾝ異常表示
CON
JMP @MR2907
MPP
AND LR1000               ; QR SR-1000
MPS
LDB MR3315
ORB CR2003               ; 常時OFF
ANL
TMR @27 #2
CON
AND @T27
JMP @MR2807
MPP
LD MR3315
AND CR2003               ; 常時OFF
ANL
RES MR3315
CON
RES @MR003               ; PACK set2(QR34)
CON
SET R41907               ; ﾜｰｸ3QRｽｷｬﾝ異常表示
CON
SET R41908               ; ﾜｰｸ4QRｽｷｬﾝ異常表示
CON
JMP @MR2907
;Err43 上ﾗﾍﾞﾙQRｺｰﾄﾞｽｷｬﾝ異常 / QR Code Scan Error
STG @MR2805
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
AND @MR403               ; Err41解除完了
SET @MR400               ; Err41
CON
RES @MR403               ; Err41解除完了
CON
JMP @MR2806
STG @MR2806
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
MPS
LD R50002                ; STEP
AND LR40301              ; IND1_ST2 STEP-02
ANL
SET @MR2702              ; QRﾁｪｯｸ34異常終了
CON
JMP @MR2907
MPP
LDB R50002               ; STEP
ORB LR40301              ; IND1_ST2 STEP-02
ANL
MPS
ANB @MR012               ; ﾘﾄﾗｲ処理
SET R41907               ; ﾜｰｸ3QRｽｷｬﾝ異常表示
CON
SET R41908               ; ﾜｰｸ4QRｽｷｬﾝ異常表示
CON
JMP @MR2907
MPP
AND @MR012               ; ﾘﾄﾗｲ処理
RES R41915               ; ﾘﾄﾗｲ要求
CON
JMP @MR2700              ; QRﾁｪｯｸ34開始
;
STG @MR2807
RES @MR003               ; PACK set2(QR34)
CON
JMP @MR2900              ; QRﾁｪｯｸ
;QRｺｰﾄﾞﾃﾞｰﾀ確認（東研） / QR code data check
STG @MR2900              ; QRﾁｪｯｸ
MPS
LD @MR102                ; ﾜｰｸ3処理有
AND @MR103               ; ﾜｰｸ4処理有
ANL
MPS
LD= $4252 DM35520
OR= $4252 DM35510
ANL
SET R41907               ; ﾜｰｸ3QRｽｷｬﾝ異常表示
CON
SET R41908               ; ﾜｰｸ4QRｽｷｬﾝ異常表示
CON
JMP @MR2904
MPP
LD<> $4252 DM35520
AND<> $4252 DM35510
ANL
JMP @MR2902
MRD
LD @MR102                ; ﾜｰｸ3処理有
ANB @MR103               ; ﾜｰｸ4処理有
ANL
MPS
AND= $4252 DM35520
SET R41907               ; ﾜｰｸ3QRｽｷｬﾝ異常表示
CON
JMP @MR2904
MPP
AND<> $4252 DM35520
JMP @MR2902
MPP
LDB @MR102               ; ﾜｰｸ3処理有
AND @MR103               ; ﾜｰｸ4処理有
ANL
MPS
AND= $4252 DM35520
SET R41908               ; ﾜｰｸ4QRｽｷｬﾝ異常表示
CON
JMP @MR2904
MPP
AND<> $4252 DM35520
JMP @MR2902
;'Judge OpusLabel or Not
;
;'Memory Clear
;ZRES(DM32600,DM32609) 'Clear Memory Right 2-Char Case1
;ZRES(DM32610,DM32619) 'Clear Memory Right 5-Char Case1
;ZRES(DM32700,DM32709) 'Clear Memory Right 2-Char Case2
;ZRES(DM32710,DM32719) 'Clear Memory Right 5-Char Case2
;
;'Memory Move Case1
;DM32600.T = RIGHT(DM35520.T,2) 'Store Right 2-Char
;DM32610.T = LEFT(DM35520.T,5) 'Store Left 5-Char
;
;'Memory Move Case2
;DM32700.T = RIGHT(DM35510.T,2) 'Store Right 2-Char
;DM32710.T = LEFT(DM35510.T,5) 'Store Left 5-Char
;
;'Judgement
;IF(DM32600.T = "_O") THEN
;	SET(MR18000) 'Is OpusLabel Case 1
;ELSE
;	RES(MR18000) 'Is Not OpusLabel
;	
;IF(DM32700.T = "_O") THEN
;	SET(MR18100) 'Is OpusLabel Case 2
;ELSE
;	RES(MR18100) 'Is Not OpusLabel
;	
;END IF
;END IF
;	
;'Finish Script 
;SET(@MR1600)
;
;
LD @MR2902
AND LR30001
NCJ #1001
;'Judge OpusLabel or Not
;
;'Memory Clear
;
;ZRES(DM32600,DM32609) 'Clear Memory Right 2-Char Case1
;
LD CR2002                ; 常時ON
ZRES DM32600 DM32609
;ZRES(DM32610,DM32619) 'Clear Memory Right 5-Char Case1
;
LD CR2002                ; 常時ON
ZRES DM32610 DM32619
;ZRES(DM32700,DM32709) 'Clear Memory Right 2-Char Case2
;
LD CR2002                ; 常時ON
ZRES DM32700 DM32709
;ZRES(DM32710,DM32719) 'Clear Memory Right 5-Char Case2
;
LD CR2002                ; 常時ON
ZRES DM32710 DM32719
;'Memory Move Case1
;
;DM32600.T = RIGHT(DM35520.T,2) 'Store Right 2-Char
;
LD CR2002                ; 常時ON
ADRSET VM2 VM0
MOV #0 VM2
MOV.D VM0 @VM12
LD CR2002                ; 常時ON
SRGHT DM35520 *@VM12 #2
LD CR2002                ; 常時ON
SMOV *@VM12 DM32600
;DM32610.T = LEFT(DM35520.T,5) 'Store Left 5-Char
;
LD CR2002                ; 常時ON
ADRSET VM2 VM0
MOV #0 VM2
MOV.D VM0 @VM14
LD CR2002                ; 常時ON
SLEFT DM35520 *@VM14 #5
LD CR2002                ; 常時ON
SMOV *@VM14 DM32610
;'Memory Move Case2
;
;DM32700.T = RIGHT(DM35510.T,2) 'Store Right 2-Char
;
LD CR2002                ; 常時ON
ADRSET VM2 VM0
MOV #0 VM2
MOV.D VM0 @VM16
LD CR2002                ; 常時ON
SRGHT DM35510 *@VM16 #2
LD CR2002                ; 常時ON
SMOV *@VM16 DM32700
;DM32710.T = LEFT(DM35510.T,5) 'Store Left 5-Char
;
LD CR2002                ; 常時ON
ADRSET VM2 VM0
MOV #0 VM2
MOV.D VM0 @VM18
LD CR2002                ; 常時ON
SLEFT DM35510 *@VM18 #5
LD CR2002                ; 常時ON
SMOV *@VM18 DM32710
;'Judgement
;
;IF(DM32600.T = "_O") THEN
;
LD CR2002                ; 常時ON
ADRSET VM2 VM0
MOV #0 VM2
MOV.D VM0 @VM20
SMOV "_O" *@VM20
LD CR2002                ; 常時ON
SCMP DM32600 *@VM20
LD CR2010                ; ＝
NCJ #2004
;	SET(MR18000) 'Is OpusLabel Case 1
;
LD CR2002                ; 常時ON
SET MR18000              ; RB1:動作完了
;ELSE
;
LD CR2002                ; 常時ON
CJ #2005
LABEL #2004
;	RES(MR18000) 'Is Not OpusLabel
;
LD CR2002                ; 常時ON
RES MR18000              ; RB1:動作完了
;IF(DM32700.T = "_O") THEN
;
LD CR2002                ; 常時ON
ADRSET VM2 VM0
MOV #0 VM2
MOV.D VM0 @VM22
SMOV "_O" *@VM22
LD CR2002                ; 常時ON
SCMP DM32700 *@VM22
LD CR2010                ; ＝
NCJ #2006
;	SET(MR18100) 'Is OpusLabel Case 2
;
LD CR2002                ; 常時ON
SET MR18100
;ELSE
;
LD CR2002                ; 常時ON
CJ #2007
LABEL #2006
;	RES(MR18100) 'Is Not OpusLabel
;
LD CR2002                ; 常時ON
RES MR18100
;END IF
;
LABEL #2007
;END IF
;
LABEL #2005
;'Finish Script 
;
;SET(@MR1600)
;
LD CR2002                ; 常時ON
SET @MR1600
LABEL #1001
;
;Check Case 3
STG @MR2902
MPS
LD @MR102                ; ﾜｰｸ3処理有
AND @MR103               ; ﾜｰｸ4処理有
ANL
MPS
LD= DM3015 DM32610       ; QRｺｰﾄﾞ2-1
AND= DM3016 DM32611      ; QRｺｰﾄﾞ2-2
AND= DM3017 DM32612      ; QRｺｰﾄﾞ2-3
AND= DM3018 DM32613      ; QRｺｰﾄﾞ2-4
ANL
JMP @MR2903
MPP
LD<> DM3015 DM32610      ; QRｺｰﾄﾞ2-1
OR<> DM3016 DM32611      ; QRｺｰﾄﾞ2-2
OR<> DM3017 DM32612      ; QRｺｰﾄﾞ2-3
OR<> DM3018 DM32613      ; QRｺｰﾄﾞ2-4
ANL
SET R41912               ; ﾜｰｸ3照合異常表示
CON
JMP @MR2903
MRD
LD @MR102                ; ﾜｰｸ3処理有
ANB @MR103               ; ﾜｰｸ4処理有
ANL
MPS
LD= DM3015 DM32610       ; QRｺｰﾄﾞ2-1
AND= DM3016 DM32611      ; QRｺｰﾄﾞ2-2
AND= DM3017 DM32612      ; QRｺｰﾄﾞ2-3
AND= DM3018 DM32613      ; QRｺｰﾄﾞ2-4
ANL
JMP @MR2904
MPP
LD<> DM3015 DM32610      ; QRｺｰﾄﾞ2-1
OR<> DM3016 DM32611      ; QRｺｰﾄﾞ2-2
OR<> DM3017 DM32612      ; QRｺｰﾄﾞ2-3
OR<> DM3018 DM32613      ; QRｺｰﾄﾞ2-4
ANL
SET R41912               ; ﾜｰｸ3照合異常表示
CON
JMP @MR2904
MRD
LDB @MR102               ; ﾜｰｸ3処理有
AND @MR103               ; ﾜｰｸ4処理有
ANL
JMP @MR2903
MPP
LDB @MR102               ; ﾜｰｸ3処理有
ANB @MR103               ; ﾜｰｸ4処理有
ANL
JMP @MR2904
;Check Case 4
STG @MR2903
MPS
LD @MR102                ; ﾜｰｸ3処理有
AND @MR103               ; ﾜｰｸ4処理有
ANL
MPS
LD= DM3015 DM32710       ; QRｺｰﾄﾞ2-1
AND= DM3016 DM32711      ; QRｺｰﾄﾞ2-2
AND= DM3017 DM32712      ; QRｺｰﾄﾞ2-3
AND= DM3018 DM32713      ; QRｺｰﾄﾞ2-4
ANL
JMP @MR2904
MPP
LD<> DM3015 DM32710      ; QRｺｰﾄﾞ2-1
OR<> DM3016 DM32711      ; QRｺｰﾄﾞ2-2
OR<> DM3017 DM32712      ; QRｺｰﾄﾞ2-3
OR<> DM3018 DM32713      ; QRｺｰﾄﾞ2-4
ANL
SET R41913               ; ﾜｰｸ4照合異常表示
CON
JMP @MR2904
MRD
LDB @MR102               ; ﾜｰｸ3処理有
AND @MR103               ; ﾜｰｸ4処理有
ANL
MPS
LD= DM3015 DM32710       ; QRｺｰﾄﾞ2-1
AND= DM3016 DM32711      ; QRｺｰﾄﾞ2-2
AND= DM3017 DM32712      ; QRｺｰﾄﾞ2-3
AND= DM3018 DM32713      ; QRｺｰﾄﾞ2-4
ANL
JMP @MR2904
MPP
LD<> DM3015 DM32710      ; QRｺｰﾄﾞ2-1
OR<> DM3016 DM32711      ; QRｺｰﾄﾞ2-2
OR<> DM3017 DM32712      ; QRｺｰﾄﾞ2-3
OR<> DM3018 DM32713      ; QRｺｰﾄﾞ2-4
ANL
SET R41913               ; ﾜｰｸ4照合異常表示
CON
JMP @MR2904
MPP
LDB @MR102               ; ﾜｰｸ3処理有
ANB @MR103               ; ﾜｰｸ4処理有
ANL
JMP @MR2904
STG @MR2904
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR2905
STG @MR2905
MPS
LDB R41907               ; ﾜｰｸ3QRｽｷｬﾝ異常表示
ANB R41908               ; ﾜｰｸ4QRｽｷｬﾝ異常表示
ANL
JMP @MR2907
MPP
LD R41907                ; ﾜｰｸ3QRｽｷｬﾝ異常表示
OR R41908                ; ﾜｰｸ4QRｽｷｬﾝ異常表示
ANL
MPS
AND>= @DM4101 DM41
JMP @MR2907
MPP
AND< @DM4101 DM41
TMR @33 #10
CON
AND @T33
JMP @MR2906
STG @MR2906
@INC @DM4101
CON
JMP @MR2700              ; QRﾁｪｯｸ34開始
STG @MR2907
AND @MR015               ; ST2 ﾎﾟｰｽﾞ & ｴﾗｰ無
RES R43214               ; ｻｲｸﾙﾀｲﾑ計測用2-7
CON
RES @MR003               ; PACK set2(QR34)
CON
SET @MR2701              ; QRﾘｰﾀﾞｰﾁｪｯｸ34完了
CON
ENDS
;
;<h1/>Err
;Err32 ﾜｰｸ浮き
;Err32 Cartridge floating
STG @MR200               ; Err35
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50112               ; Err ST2
CON
JMP @MR201               ; 201
MOV #32 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR201               ; 201
AND R50008               ; Error
JMP @MR202               ; 202
STG @MR202               ; 202
ANB R50008               ; Error
SET @MR203               ; Err35解除完了
CON
ENDS
;Err233-236 ﾘｰｸ検査　ｶｰﾄﾘｯｼﾞ1(1ST側）異常
;Err233-236 Leak Check Error  Cartridge1
STG @MR204               ; Err36
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50112               ; Err ST2
CON
JMP @MR205               ; 205
MOV #233 DM400           ; ﾒｯｾｰｼﾞNo.
STG @MR205               ; 205
AND R50008               ; Error
JMP @MR206               ; 206
STG @MR206               ; 206
MPS
ANB R50008               ; Error
SET @MR207               ; Err36解除完了
CON
ENDS
MPP
LD R50008                ; Error
AND R50015               ; ｴﾗｰﾘｾｯﾄSW ON
AND R40006               ; ｴﾗｰﾘｾｯﾄSW
ANL
TMR @20 #20
CON
AND @T20
ZRES R41900 R41904       ; 検査C1表示灯
;Err237-240 ﾘｰｸ検査  ｶｰﾄﾘｯｼﾞ2(中-手前側）異常
;Err237-240 Leak Check Error  Cartridge2
STG @MR208               ; Err37 ST2 Err7
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50112               ; Err ST2
CON
JMP @MR209               ; 209
MOV #234 DM400           ; ﾒｯｾｰｼﾞNo.
STG @MR209               ; 209
AND R50008               ; Error
JMP @MR210               ; 210
STG @MR210               ; 210
MPS
ANB R50008               ; Error
SET @MR211               ; Err37 ST2 Err7解除完了
CON
ENDS
MPP
LD R50008                ; Error
AND R50015               ; ｴﾗｰﾘｾｯﾄSW ON
AND R40006               ; ｴﾗｰﾘｾｯﾄSW
ANL
TMR @37 #20
CON
AND @T37
ZRES R41900 R41904       ; 検査C1表示灯
;Err241-244 ﾘｰｸ検査  ｶｰﾄﾘｯｼﾞ3(中-奥側）異常
;Err241-244 Leak Check Error  Cartridge3
STG @MR212               ; Err38 ST2 Err8
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50112               ; Err ST2
CON
JMP @MR213               ; 213
MOV #235 DM400           ; ﾒｯｾｰｼﾞNo.
STG @MR213               ; 213
AND R50008               ; Error
JMP @MR214               ; 214
STG @MR214               ; 214
MPS
ANB R50008               ; Error
SET @MR215               ; Err38 ST2 Err8解除完了
CON
ENDS
MPP
LD R50008                ; Error
AND R50015               ; ｴﾗｰﾘｾｯﾄSW ON
AND R40006               ; ｴﾗｰﾘｾｯﾄSW
ANL
TMR @36 #20
CON
AND @T36
ZRES R41900 R41904       ; 検査C1表示灯
;Err245-248 ﾘｰｸ検査  ｶｰﾄﾘｯｼﾞ4(3ST側）異常
;Err245-248 Leak Check Error  Cartridge4
STG @MR300               ; Err43
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50112               ; Err ST2
CON
JMP @MR301               ; 301
MOV #236 DM400           ; ﾒｯｾｰｼﾞNo.
STG @MR301               ; 301
AND R50008               ; Error
JMP @MR302               ; 302
STG @MR302               ; 302
MPS
ANB R50008               ; Error
SET @MR303               ; Err43解除完了
CON
ENDS
MPP
LD R50008                ; Error
AND R50015               ; ｴﾗｰﾘｾｯﾄSW ON
AND R40006               ; ｴﾗｰﾘｾｯﾄSW
ANL
TMR @38 #20
CON
AND @T38
ZRES R41900 R41904       ; 検査C1表示灯
;Err37 ﾘｰｸ検査圧力設定異常
;Err37 Pressure before Leak Check Error 
STG @MR304               ; Err44
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50112               ; Err ST2
CON
JMP @MR305               ; 305
MOV #37 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR305               ; 305
AND R50008               ; Error
JMP @MR306               ; 306
STG @MR306               ; 306
ANB R50008               ; Error
SET @MR307               ; Err44解除完了
CON
ENDS
;Err38 ﾘｰｸ検査前流量計異常
;Err38 Fow Gage before Leak Check Error
;
STG @MR308               ; Err45
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50112               ; Err ST2
CON
JMP @MR309               ; 309
MOV #38 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR309               ; 309
AND R50008               ; Error
JMP @MR310               ; 310
STG @MR310               ; 310
ANB R50008               ; Error
SET @MR311               ; Err45解除完了
CON
ENDS
;Err43 上ﾗﾍﾞﾙQRｺｰﾄﾞｽｷｬﾝ異常
;Err43 QR Code Scan Error
STG @MR312               ; Err46
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50112               ; Err ST2
CON
MPS
DW #1 DM7900
CON
JMP @MR313               ; 313
MPP
MOV #43 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR313               ; 313
AND R50008               ; Error
JMP @MR314               ; 314
STG @MR314               ; 314
ANB R50008               ; Error
SET @MR315               ; Err46解除完了
CON
ENDS
;Err44 上ﾗﾍﾞﾙQRｺｰﾄﾞ3.4ｽｷｬﾝ異常
;Err44 QR Code Scan Error
STG @MR400               ; Err41
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50112               ; Err ST2
CON
JMP @MR401               ; 401
MOV #44 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR401               ; 401
AND R50008               ; Error
JMP @MR402               ; 402
STG @MR402               ; 402
ANB R50008               ; Error
SET @MR403               ; Err41解除完了
CON
ENDS
;Err45 上ﾗﾍﾞﾙQRｺｰﾄﾞ照合異常
;Err45 QR Check Forward Error
STG @MR404               ; Err42
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50112               ; Err ST2
CON
JMP @MR405               ; 405
MOV #45 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR405               ; 405
AND R50008               ; Error
JMP @MR406               ; 406
STG @MR406               ; 406
ANB R50008               ; Error
SET @MR407               ; Err42解除完了
CON
ENDS
;Err41 ﾜｰｸ除材要求&ﾘﾄﾗｲ要求
;Err41 NG Cartridge Remove or Retry Demand
STG @MR412
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50112               ; Err ST2
CON
JMP @MR413
MOV #41 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR413
AND R50008               ; Error
JMP @MR414
STG @MR414
ANB R50008               ; Error
SET @MR415
CON
ENDS
;Err LC1
;Leak Check automaticly Retry
STG @MR500               ; ST2 原点復帰開始
MPS
LD= DM609 #1             ; INDEX位置記憶
ANB R50008               ; Error
ANL
SET R50008               ; Error
CON
SET R50112               ; Err ST2
CON
SET R50208               ; ｴﾗｰ自動解除
CON
JMP @MR501               ; ST2 原点復帰終了
MOV #250 DM400           ; ﾒｯｾｰｼﾞNo.
MRD
LD= DM609 #2             ; INDEX位置記憶
ANB R50008               ; Error
ANL
SET R50008               ; Error
CON
SET R50112               ; Err ST2
CON
SET R50208               ; ｴﾗｰ自動解除
CON
JMP @MR501               ; ST2 原点復帰終了
MOV #251 DM400           ; ﾒｯｾｰｼﾞNo.
MRD
LD= DM609 #3             ; INDEX位置記憶
ANB R50008               ; Error
ANL
SET R50008               ; Error
CON
SET R50112               ; Err ST2
CON
SET R50208               ; ｴﾗｰ自動解除
CON
JMP @MR501               ; ST2 原点復帰終了
MOV #252 DM400           ; ﾒｯｾｰｼﾞNo.
MPP
LD= DM609 #0             ; INDEX位置記憶
ANB R50008               ; Error
ANL
SET R50008               ; Error
CON
SET R50112               ; Err ST2
CON
SET R50208               ; ｴﾗｰ自動解除
CON
JMP @MR501               ; ST2 原点復帰終了
MOV #253 DM400           ; ﾒｯｾｰｼﾞNo.
STG @MR501               ; ST2 原点復帰終了
AND R50008               ; Error
JMP @MR502               ; 1002
STG @MR502               ; 1002
ANB R50008               ; Error
RES R50208               ; ｴﾗｰ自動解除
CON
SET @MR503               ; 1003
CON
ENDS
;Err LC2
;Leak Check automaticly Retry
STG @MR508               ; 1008
MPS
LD= DM609 #1             ; INDEX位置記憶
ANB R50008               ; Error
ANL
SET R50008               ; Error
CON
SET R50112               ; Err ST2
CON
SET R50208               ; ｴﾗｰ自動解除
CON
JMP @MR700               ; ST2 STEP開始
MOV #254 DM400           ; ﾒｯｾｰｼﾞNo.
MRD
LD= DM609 #2             ; INDEX位置記憶
AND CR2002               ; 常時ON
ANB R50008               ; Error
ANL
SET R50008               ; Error
CON
SET R50112               ; Err ST2
CON
SET R50208               ; ｴﾗｰ自動解除
CON
JMP @MR700               ; ST2 STEP開始
MOV #255 DM400           ; ﾒｯｾｰｼﾞNo.
MRD
LD= DM609 #3             ; INDEX位置記憶
AND CR2002               ; 常時ON
ANB R50008               ; Error
ANL
SET R50008               ; Error
CON
SET R50112               ; Err ST2
CON
SET R50208               ; ｴﾗｰ自動解除
CON
JMP @MR700               ; ST2 STEP開始
MOV #256 DM400           ; ﾒｯｾｰｼﾞNo.
MPP
LD= DM609 #0             ; INDEX位置記憶
AND CR2002               ; 常時ON
ANB R50008               ; Error
ANL
SET R50008               ; Error
CON
SET R50112               ; Err ST2
CON
SET R50208               ; ｴﾗｰ自動解除
CON
JMP @MR700               ; ST2 STEP開始
MOV #257 DM400           ; ﾒｯｾｰｼﾞNo.
STG @MR700               ; ST2 STEP開始
AND R50008               ; Error
JMP @MR701               ; ST2 STEP終了
STG @MR701               ; ST2 STEP終了
ANB R50008               ; Error
RES R50208               ; ｴﾗｰ自動解除
CON
SET @MR702               ; 2002
CON
ENDS
;Err LC3
;Leak Check automaticly Retry
STG @MR509
MPS
LD= DM609 #1             ; INDEX位置記憶
ANB R50008               ; Error
ANL
SET R50008               ; Error
CON
SET R50112               ; Err ST2
CON
SET R50208               ; ｴﾗｰ自動解除
CON
JMP @MR703               ; 2003
MOV #258 DM400           ; ﾒｯｾｰｼﾞNo.
MRD
LD= DM609 #2             ; INDEX位置記憶
AND CR2002               ; 常時ON
ANB R50008               ; Error
ANL
SET R50008               ; Error
CON
SET R50112               ; Err ST2
CON
SET R50208               ; ｴﾗｰ自動解除
CON
JMP @MR703               ; 2003
MOV #259 DM400           ; ﾒｯｾｰｼﾞNo.
MRD
LD= DM609 #3             ; INDEX位置記憶
AND CR2002               ; 常時ON
ANB R50008               ; Error
ANL
SET R50008               ; Error
CON
SET R50112               ; Err ST2
CON
SET R50208               ; ｴﾗｰ自動解除
CON
JMP @MR703               ; 2003
MOV #260 DM400           ; ﾒｯｾｰｼﾞNo.
MPP
LD= DM609 #0             ; INDEX位置記憶
AND CR2002               ; 常時ON
ANB R50008               ; Error
ANL
SET R50008               ; Error
CON
SET R50112               ; Err ST2
CON
SET R50208               ; ｴﾗｰ自動解除
CON
JMP @MR703               ; 2003
MOV #261 DM400           ; ﾒｯｾｰｼﾞNo.
STG @MR703               ; 2003
AND R50008               ; Error
JMP @MR704               ; 2004
STG @MR704               ; 2004
ANB R50008               ; Error
RES R50208               ; ｴﾗｰ自動解除
CON
SET @MR705
CON
ENDS
;Err LC4
;Leak Check automaticly Retry
STG @MR510
MPS
LD= DM609 #1             ; INDEX位置記憶
ANB R50008               ; Error
ANL
SET R50008               ; Error
CON
SET R50112               ; Err ST2
CON
SET R50208               ; ｴﾗｰ自動解除
CON
JMP @MR706
MOV #262 DM400           ; ﾒｯｾｰｼﾞNo.
MRD
LD= DM609 #2             ; INDEX位置記憶
AND CR2002               ; 常時ON
ANB R50008               ; Error
ANL
SET R50008               ; Error
CON
SET R50112               ; Err ST2
CON
SET R50208               ; ｴﾗｰ自動解除
CON
JMP @MR706
MOV #263 DM400           ; ﾒｯｾｰｼﾞNo.
MRD
LD= DM609 #3             ; INDEX位置記憶
AND CR2002               ; 常時ON
ANB R50008               ; Error
ANL
SET R50008               ; Error
CON
SET R50112               ; Err ST2
CON
SET R50208               ; ｴﾗｰ自動解除
CON
JMP @MR706
MOV #264 DM400           ; ﾒｯｾｰｼﾞNo.
MPP
LD= DM609 #0             ; INDEX位置記憶
AND CR2002               ; 常時ON
ANB R50008               ; Error
ANL
SET R50008               ; Error
CON
SET R50112               ; Err ST2
CON
SET R50208               ; ｴﾗｰ自動解除
CON
JMP @MR706
MOV #265 DM400           ; ﾒｯｾｰｼﾞNo.
STG @MR706
AND R50008               ; Error
JMP @MR707               ; ﾜｰｸ浮き検出
STG @MR707               ; ﾜｰｸ浮き検出
ANB R50008               ; Error
RES R50208               ; ｴﾗｰ自動解除
CON
SET @MR708               ; STEP終了処理
CON
ENDS
;Err177-178
STG @MR504               ; 1004
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50112               ; Err ST2
CON
JMP @MR505               ; 1005
MPS
ANB @MR006               ; ﾜｰｸ有NG
MOV #177 DM400           ; ﾒｯｾｰｼﾞNo.
MRD
AND @MR006               ; ﾜｰｸ有NG
MOV #178 DM400           ; ﾒｯｾｰｼﾞNo.
MRD
AND @MR100               ; ﾜｰｸ1処理有
DW #2 DM3371             ; ST2-No1 NGﾜｰｸ 0=OK
MRD
AND @MR101               ; ﾜｰｸ2処理有
DW #2 DM3391             ; ST2-No2 NGﾜｰｸ 0=OK
MRD
AND @MR102               ; ﾜｰｸ3処理有
DW #2 DM3411             ; ST2-No3 NGﾜｰｸ 0=OK
MPP
AND @MR103               ; ﾜｰｸ4処理有
DW #2 DM3431             ; ST2-No4 NGﾜｰｸ 0=OK
STG @MR505               ; 1005
AND R50008               ; Error
ANB @MR100               ; ﾜｰｸ1処理有
ANB @MR101               ; ﾜｰｸ2処理有
JMP @MR506               ; 1006
STG @MR506               ; 1006
ANB R50008               ; Error
SET @MR507               ; 1007
CON
ENDS
;ｴﾗｰ表示
; ERROR Display
LD R41900                ; 検査C1表示灯
OR R41901                ; 検査C2表示灯
OR R41902                ; 検査C3表示灯
OR R41903                ; 検査C4表示灯
LD>= DM400 #233          ; ﾒｯｾｰｼﾞNo.
AND<= DM400 #236         ; ﾒｯｾｰｼﾞNo.
OR= DM400 #41            ; ﾒｯｾｰｼﾞNo.
ANL
OUT R51900
LD R41905                ; ﾜｰｸ1QRｽｷｬﾝ異常表示
OR R41906                ; ﾜｰｸ2QRｽｷｬﾝ異常表示
OR R41907                ; ﾜｰｸ3QRｽｷｬﾝ異常表示
OR R41908                ; ﾜｰｸ4QRｽｷｬﾝ異常表示
OR R41910                ; ﾜｰｸ1照合異常表示
OR R41911                ; ﾜｰｸ2照合異常表示
OR R41912                ; ﾜｰｸ3照合異常表示
OR R41913                ; ﾜｰｸ4照合異常表示
LD>= DM400 #43           ; ﾒｯｾｰｼﾞNo.
AND<= DM400 #45          ; ﾒｯｾｰｼﾞNo.
LD= DM400 #41            ; ﾒｯｾｰｼﾞNo.
ANB R51900
ORL
ANL
OUT R51901
LD R41915                ; ﾘﾄﾗｲ要求
OUT @MR012               ; ﾘﾄﾗｲ処理
LD R51901
OR R51900
AND R41915               ; ﾘﾄﾗｲ要求
OUT @MR011               ; ﾘﾄﾗｲ処理2
; PACKｾｯﾄ
;  Pack Set
;
LD @MR001                ; PACK set1(Leak inspection)
OR @MR002                ; PACK set2(QR12)
OR @MR003                ; PACK set2(QR34)
OR MR14808               ; RB10 PCON   移動中
OUT R50102               ; PACK ST2
END
ENDH
