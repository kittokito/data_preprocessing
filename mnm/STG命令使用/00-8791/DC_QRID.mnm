DEVICE:53
;MODULE:DC_QRID
;MODULE_TYPE:0
LD R50010                ; Emergency　Stop
ZRES MR26600 MR26615     ; Seach QRID to DB
CON
ZRES @MR000 @MR115       ; QRID読取開始
;QRID登録確認 / Check Register QRID
;<内容>
;	印字したQRIDをﾃﾞｰﾀﾍﾞｰｽに登録します。
;<ｲﾝﾀｰﾌｪｰｽ / Interface>
;
;<引数>
;
;<戻り値>
;	DM31218:結果ｺｰﾄﾞ
;		#20:OK
;		#21:QRID空欄
;		#22:ﾃﾞｰﾀ登録失敗
;		#21〜#29:Host通信NG(詳細はHostｿﾌﾄ仕様参照)
LD CR2002                ; 常時ON
DW #150 @DM0
STG MR26600              ; Seach QRID to DB
SET MR26602
CON
JMP @MR100
STG @MR100
RES B1EA0
CON
RES B1EA1
CON
DW #0 W1C94
CON
JMP @MR101
STG @MR101
SET B1EA0
CON
JMP @MR102
STG @MR102
MPS
LDB B1EA0
AND B1EA1
ANL
JMP @MR107
MPP
LD B1EA0
ORB B1EA1
ANL
TMR @0 @DM0
CON
AND @T0
DW #30 W1C94
CON
JMP @MR107
STG @MR107
RES B1EA0
CON
RES B1EA1
CON
RES MR26602
CON
SET MR26601              ; Finish  Seach QRID to DB
CON
ENDS
;QRID検査結果登録 / 
;<内容>
;	
;<ｲﾝﾀｰﾌｪｰｽ / Interface>
;
;<引数>
;
;<戻り値>
;	DM31218:結果ｺｰﾄﾞ
;		#20:OK
;		#21:QRID空欄
;		#22:ﾃﾞｰﾀ登録失敗
;		#21〜#29:Host通信NG(詳細はHostｿﾌﾄ仕様参照)
STG MR26604              ; Registor QRID to DB
SET MR26606
CON
JMP @MR108
STG @MR108
RES B1EA3
CON
RES B1EA4
CON
DW #0 W1CAC
CON
JMP @MR109
STG @MR109
SET B1EA3
CON
JMP @MR110
STG @MR110
MPS
LDB B1EA3
AND B1EA4
ANL
JMP @MR115
MPP
LD B1EA3
ORB B1EA4
ANL
TMR @1 @DM0
CON
AND @T1
DW #30 W1CAC
CON
JMP @MR115
STG @MR115
RES B1EA3
CON
RES B1EA4
CON
RES MR26606
CON
SET MR26605              ; Finish Registor QRID to DB
CON
ENDS
END
ENDH
