DEVICE:53
;MODULE:OneSystem3_Console
;MODULE_TYPE:0
;SCRIPT_TYPE:
;OneSystem Master-Module
;
;-----------------------------------------
;ModuleName	:	OneSystem3_Console
;ModuleType	:	Master Module
;Function	:	TP Control
;-----------------------------------------
;
;Copylight(C) 2011 SEIKO EPSON Corp. All rights reserved.
;<OneSystem TP System Memory Area>
;MainTP 	DM3000～DM3019
;SubTP1	DM3020～DM3039
;SubTP2	DM3040～DM3059
;・・・
;SubTP8	DM3160～DM3179
;<h1/>Main Page Change/ﾒｲﾝ画面切替
;・初期画面ならば3秒ﾃﾞｨﾚｲ後にMain画面[#0]へ切替
;・動作開始時に別画面ならばMain画面[#0]へ切替
;・ｻﾌﾞTPﾒﾝﾃ動作選択中[#210～#215]にﾒｲﾝTPでHOME、AUTO押されたらMain画面へ切替(ﾓﾆﾀ時は切り替えない)
;MainTP
LD CR2008                ; 運転開始時1ｽｷｬﾝON
MOV #0 DM3008            ; _MainTP　切替ﾍﾟｰｼﾞNo
LD= DM3000 #0            ; _MainTP　表示中ﾍﾟｰｼﾞNo
TMR @0 #30               ; ﾒｲﾝ画面表示ﾃﾞｨﾚｲ
CON
AND @T0                  ; ﾒｲﾝ画面表示ﾃﾞｨﾚｲ
@MOV #10 DM3008          ; _MainTP　切替ﾍﾟｰｼﾞNo
LDP R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
ORP R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ORP R47500               ; _Group1　ﾒﾝﾃ動作中
AND<> DM3000 #10         ; _MainTP　表示中ﾍﾟｰｼﾞNo
MOV #10 DM3008           ; _MainTP　切替ﾍﾟｰｼﾞNo
;SubTP1
LD R59500                ; _ｻﾌﾞTP1使用有無
MPS
AND CR2008               ; 運転開始時1ｽｷｬﾝON
MOV #0 DM3028            ; _SubTP1_1　切替ﾍﾟｰｼﾞNo
MRD
AND= DM3020 #0           ; _SubTP1_1　表示中ﾍﾟｰｼﾞNo
TMR @1 #30               ; ﾒｲﾝ画面表示ﾃﾞｨﾚｲ
CON
AND @T1                  ; ﾒｲﾝ画面表示ﾃﾞｨﾚｲ
@MOV #10 DM3028          ; _SubTP1_1　切替ﾍﾟｰｼﾞNo
MRD
LDP R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
ORP R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ORP R47501               ; _Group2　ﾒﾝﾃ動作中
AND<> DM3020 #10         ; _SubTP1_1　表示中ﾍﾟｰｼﾞNo
ANL
MOV #10 DM3028           ; _SubTP1_1　切替ﾍﾟｰｼﾞNo
MPP
LDP R46111               ; _AUTOﾓｰﾄﾞ選択中
ORP R46112               ; _HOMEﾓｰﾄﾞ選択中
ORF R46113               ; _MAINTEﾓｰﾄﾞ選択中
AND>= DM3020 #210        ; _SubTP1_1　表示中ﾍﾟｰｼﾞNo
AND<= DM3020 #215        ; _SubTP1_1　表示中ﾍﾟｰｼﾞNo
ANL
MOV #10 DM3028           ; _SubTP1_1　切替ﾍﾟｰｼﾞNo
;SubTP2
LD R59500:#1             ; _ｻﾌﾞTP2使用有無
MPS
AND CR2008               ; 運転開始時1ｽｷｬﾝON
MOV #0 DM3048            ; _SubTP1_2　切替ﾍﾟｰｼﾞNo
MRD
AND= DM3040 #0           ; _SubTP1_2　表示中ﾍﾟｰｼﾞNo
TMR @2 #30               ; ﾒｲﾝ画面表示ﾃﾞｨﾚｲ
CON
AND @T2                  ; ﾒｲﾝ画面表示ﾃﾞｨﾚｲ
@MOV #10 DM3048          ; _SubTP1_2　切替ﾍﾟｰｼﾞNo
MRD
LDP R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
ORP R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ORP R47502               ; _Group3　ﾒﾝﾃ動作中
AND<> DM3040 #10         ; _SubTP1_2　表示中ﾍﾟｰｼﾞNo
ANL
MOV #10 DM3048           ; _SubTP1_2　切替ﾍﾟｰｼﾞNo
MPP
LDP R46111               ; _AUTOﾓｰﾄﾞ選択中
ORP R46112               ; _HOMEﾓｰﾄﾞ選択中
ORF R46113               ; _MAINTEﾓｰﾄﾞ選択中
AND>= DM3040 #210        ; _SubTP1_2　表示中ﾍﾟｰｼﾞNo
AND<= DM3040 #215        ; _SubTP1_2　表示中ﾍﾟｰｼﾞNo
ANL
MOV #10 DM3048           ; _SubTP1_2　切替ﾍﾟｰｼﾞNo
;<h1/>M/C Status/装置状態表示
;・MainTP/SubTP　【定停止中】[#0]
;・MainTP/SubTP	【動作中】[#1]
;・MainTP/SubTP	【定停止移行中】[#2]
;・MainTP		【しばらくお待ち下さい】[#3]
;・SubTP			【ｴﾗｰ中】[#3]
;BringDownのいずれかSTG実行中ならば表示は【しばらくお待ち下さい】を優先とする為の条件まとめ
LD<>.D R40400 $00000000  ; _運転開始ﾕｰｻﾞｰSTG
OR<>.D R40600 $00000000  ; _安全ｶﾊﾞｰ1ﾛｯｸ解除OK
OR<>.D R40800 $00000000  ; _ｴｱｰ元圧低下1ﾕｰｻﾞｰSTG
OUT BringDownExe         ; BringDown実行有り
;定停止中
LD R46103                ; _停止中　ﾓｰﾄﾞﾌﾗｸﾞ
MPS
LDB R46105               ; _ﾊﾟﾗﾒｰﾀ編集中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB BringDownExe         ; BringDown実行有り
ANL
FMOV #0 DM8850 #8        ; _ﾒｲﾝTP装置ｽﾃｰﾀｽ表示
MPP
LD R46105                ; _ﾊﾟﾗﾒｰﾀ編集中　ﾓｰﾄﾞﾌﾗｸﾞ
OR BringDownExe          ; BringDown実行有り
ANL
MOV #3 DM8850            ; _ﾒｲﾝTP装置ｽﾃｰﾀｽ表示
;HOME、AUTO
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
OR R46101                ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
MPS
ANB BringDownExe         ; BringDown実行有り
MPS
ANB R46106               ; _定停止移行中
FMOV #1 DM8850 #8        ; _ﾒｲﾝTP装置ｽﾃｰﾀｽ表示
MPP
AND R46106               ; _定停止移行中
FMOV #2 DM8850 #8        ; _ﾒｲﾝTP装置ｽﾃｰﾀｽ表示
MPP
AND BringDownExe         ; BringDown実行有り
MOV #3 DM8850            ; _ﾒｲﾝTP装置ｽﾃｰﾀｽ表示
;MAINTE
LD R46102                ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
MPS
ANB R47500               ; _Group1　ﾒﾝﾃ動作中
MOV #0 DM8850            ; _ﾒｲﾝTP装置ｽﾃｰﾀｽ表示
MPP
AND R47500               ; _Group1　ﾒﾝﾃ動作中
MPS
ANB BringDownExe         ; BringDown実行有り
MPS
ANB R47800               ; _Group1　ﾒﾝﾃ動作定停止移行中
MOV #1 DM8850            ; _ﾒｲﾝTP装置ｽﾃｰﾀｽ表示
MPP
AND R47800               ; _Group1　ﾒﾝﾃ動作定停止移行中
MOV #2 DM8850            ; _ﾒｲﾝTP装置ｽﾃｰﾀｽ表示
MPP
AND BringDownExe         ; BringDown実行有り
MOV #3 DM8850            ; _ﾒｲﾝTP装置ｽﾃｰﾀｽ表示
;<h1/>Mode Select/運転ﾓｰﾄﾞ選択
;TP側ﾓｰﾄﾞ選択(ﾓﾒﾝﾀﾘ)をPLC側でﾗｯﾁ
;【定停止中】：選択ﾓｰﾄﾞを反映、再度同じﾎﾞﾀﾝを押されたら未選択に
LD R46111                ; _AUTOﾓｰﾄﾞ選択中
ANB R46112               ; _HOMEﾓｰﾄﾞ選択中
ANB R46113               ; _MAINTEﾓｰﾄﾞ選択中
OUT AUTO_Select          ; AUTO選択中
LDB R46111               ; _AUTOﾓｰﾄﾞ選択中
AND R46112               ; _HOMEﾓｰﾄﾞ選択中
ANB R46113               ; _MAINTEﾓｰﾄﾞ選択中
OUT HOME_Select          ; HOME選択中
LDB R46111               ; _AUTOﾓｰﾄﾞ選択中
ANB R46112               ; _HOMEﾓｰﾄﾞ選択中
AND R46113               ; _MAINTEﾓｰﾄﾞ選択中
OUT MAINTE_Select        ; MAINTE選択中
LD R46103                ; _停止中　ﾓｰﾄﾞﾌﾗｸﾞ
MPS
ANP R53000               ; _AUTOﾓｰﾄﾞ押下
MPS
ANB AUTO_Select          ; AUTO選択中
SET R46111               ; _AUTOﾓｰﾄﾞ選択中
CON
RES R46112               ; _HOMEﾓｰﾄﾞ選択中
CON
RES R46113               ; _MAINTEﾓｰﾄﾞ選択中
MPP
AND AUTO_Select          ; AUTO選択中
RES R46111               ; _AUTOﾓｰﾄﾞ選択中
CON
RES R46112               ; _HOMEﾓｰﾄﾞ選択中
CON
RES R46113               ; _MAINTEﾓｰﾄﾞ選択中
MRD
ANP R53001               ; _HOMEﾓｰﾄﾞ押下
MPS
ANB HOME_Select          ; HOME選択中
RES R46111               ; _AUTOﾓｰﾄﾞ選択中
CON
SET R46112               ; _HOMEﾓｰﾄﾞ選択中
CON
RES R46113               ; _MAINTEﾓｰﾄﾞ選択中
MPP
AND HOME_Select          ; HOME選択中
RES R46111               ; _AUTOﾓｰﾄﾞ選択中
CON
RES R46112               ; _HOMEﾓｰﾄﾞ選択中
CON
RES R46113               ; _MAINTEﾓｰﾄﾞ選択中
MPP
ANP R53002               ; _MAINTEﾓｰﾄﾞ押下
MPS
ANB MAINTE_Select        ; MAINTE選択中
RES R46111               ; _AUTOﾓｰﾄﾞ選択中
CON
RES R46112               ; _HOMEﾓｰﾄﾞ選択中
CON
SET R46113               ; _MAINTEﾓｰﾄﾞ選択中
MPP
AND MAINTE_Select        ; MAINTE選択中
RES R46111               ; _AUTOﾓｰﾄﾞ選択中
CON
RES R46112               ; _HOMEﾓｰﾄﾞ選択中
CON
RES R46113               ; _MAINTEﾓｰﾄﾞ選択中
;【ﾓｰﾄﾞOUT時】：ﾓｰﾄﾞ未選択状態に
LDF R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
ORF R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ORP R46104               ; _非常停止中　ﾓｰﾄﾞﾌﾗｸﾞ
RES R46111               ; _AUTOﾓｰﾄﾞ選択中
CON
RES R46112               ; _HOMEﾓｰﾄﾞ選択中
CON
RES R46113               ; _MAINTEﾓｰﾄﾞ選択中
;【ﾒﾝﾃOUT時】：ﾒﾝﾃ選択状態に
LDF R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
RES R46111               ; _AUTOﾓｰﾄﾞ選択中
CON
RES R46112               ; _HOMEﾓｰﾄﾞ選択中
CON
SET R46113               ; _MAINTEﾓｰﾄﾞ選択中
;<h1/>Action Select/動作ﾓｰﾄﾞ選択
;●動作選択画面表示
;・AUTOﾓｰﾄﾞが選択されていれば【AUTO】動作選択[#220]へ
;・MAINTEﾓｰﾄﾞが選択されていれば【MAINTE】動作選択[#221]へ
LD R46111                ; _AUTOﾓｰﾄﾞ選択中
AND R53007               ; _動作選択押下
@MOV #210 DM3008         ; _MainTP　切替ﾍﾟｰｼﾞNo
LD R46113                ; _MAINTEﾓｰﾄﾞ選択中
AND R53007               ; _動作選択押下
@MOV #211 DM3008         ; _MainTP　切替ﾍﾟｰｼﾞNo
;●動作選択ﾎﾞﾀﾝ表示
;・HOME選択中、動作中は非表示[#1]
;・AUTO／MAINTE選択中は表示[#0]
LDB R46103               ; _停止中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
LD R46102                ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND R47500               ; _Group1　ﾒﾝﾃ動作中
ORL
MOV #1 DM8587            ; _動作選択ﾎﾞﾀﾝ表示有無
LD R46103                ; _停止中　ﾓｰﾄﾞﾌﾗｸﾞ
MPS
LDB R46112               ; _HOMEﾓｰﾄﾞ選択中
OR R46112                ; _HOMEﾓｰﾄﾞ選択中
ANB R46111               ; _AUTOﾓｰﾄﾞ選択中
ANB R46113               ; _MAINTEﾓｰﾄﾞ選択中
ANL
MOV #1 DM8587            ; _動作選択ﾎﾞﾀﾝ表示有無
MPP
LD R46111                ; _AUTOﾓｰﾄﾞ選択中
OR R46113                ; _MAINTEﾓｰﾄﾞ選択中
ANL
MOV #0 DM8587            ; _動作選択ﾎﾞﾀﾝ表示有無
LD R46102                ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB R47500               ; _Group1　ﾒﾝﾃ動作中
MOV #0 DM8587            ; _動作選択ﾎﾞﾀﾝ表示有無
;●動作名称表示
;・現在選択中ﾓｰﾄﾞに合わせてMAIN画面の現在選択中動作ﾓｰﾄﾞ名称を変更する
;AUTO動作名称番号 = AUTOAC + #1999
LD R46111                ; _AUTOﾓｰﾄﾞ選択中
MPS
AND= DM5010 #0           ; _AUTO動作番号
FMOV #0 DM8579 #8        ; _ﾒｲﾝTP動作名称表示
MPP
AND<> DM5010 #0          ; _AUTO動作番号
LDA DM5010               ; _AUTO動作番号
CON
ADD #1999
CON
STA Z10
CON
FMOV Z10 DM8579 #8       ; _ﾒｲﾝTP動作名称表示
;MAINTE動作名称番号 = MAINTEAC* + #2099 
LD R46113                ; _MAINTEﾓｰﾄﾞ選択中
MPS
AND= DM4110 #0           ; _Group1　ﾒﾝﾃ動作番号
MOV #0 DM8579            ; _ﾒｲﾝTP動作名称表示
MPP
AND<> DM4110 #0          ; _Group1　ﾒﾝﾃ動作番号
LDA DM4110               ; _Group1　ﾒﾝﾃ動作番号
CON
ADD #2099
CON
STA Z10
CON
MOV Z10 DM8579           ; _ﾒｲﾝTP動作名称表示
;HOME動作名称番号 = #2500
LD R46112                ; _HOMEﾓｰﾄﾞ選択中
FMOV #2500 DM8579 #8     ; _ﾒｲﾝTP動作名称表示
;・ﾓｰﾄﾞ未選択中は非表示[#0]
LDB R46112               ; _HOMEﾓｰﾄﾞ選択中
ANB R46111               ; _AUTOﾓｰﾄﾞ選択中
ANB R46113               ; _MAINTEﾓｰﾄﾞ選択中
MOV #0 DM8579            ; _ﾒｲﾝTP動作名称表示
MOV #0 DM8580            ; _ｻﾌﾞTP1動作名称表示
MOV #0 DM8581            ; _ｻﾌﾞTP2動作名称表示
MOV #0 DM8582            ; _ｻﾌﾞTP3動作名称表示
MOV #0 DM8583            ; _ｻﾌﾞTP4動作名称表示
MOV #0 DM8583            ; _ｻﾌﾞTP4動作名称表示
MOV #0 DM8584            ; _ｻﾌﾞTP5動作名称表示
MOV #0 DM8585            ; _ｻﾌﾞTP6動作名称表示
MOV #0 DM8586            ; _ｻﾌﾞTP7動作名称表示
;<h1/>Action Parameter/動作ﾊﾟﾗﾒｰﾀ
;動作ﾊﾟﾗﾒｰﾀON/OFF状態により表示名称ﾒｯｾｰｼﾞ番号を変更
;'動作ﾊﾟﾗﾒｰﾀON/OFF状態により指定名称番号(ﾒｯｾｰｼﾞ番号)を変更
;'ACPARA_Name[i]に表示ﾒｯｾｰｼﾞNoを格納
;
;'動作ﾊﾟﾗﾒｰﾀbit0～15		OFF時名称表示ﾒｯｾｰｼﾞNo	5600～5615
;'						ON時名称表示ﾒｯｾｰｼﾞNo	5616～5631
;
;FOR i = 0 TO 15		'動作ﾊﾟﾗﾒｰﾀ個数分ﾙｰﾌﾟ
;	IF BLD(ACPARA,i) = OFF THEN		'指定bitOFF?
;		ACPARA_Name[i] = 5600 + i			'OFF表示ﾒｯｾｰｼﾞNo=(5600+bitNo)
;	ELSE IF BLD(ACPARA,i) = ON THEN	'指定bitON?	
;		ACPARA_Name[i] = 5616 + i			'ON表示ﾒｯｾｰｼﾞNo=(5616+bitNo)
;	END IF
;NEXT
;
;'動作ﾊﾟﾗﾒｰﾀbit16～31	OFF時名称表示ﾒｯｾｰｼﾞNo	5632～5647
;'						ON時名称表示ﾒｯｾｰｼﾞNo	5648～5663
;
;FOR i = 16 TO 31
;	IF BLD(ACPARA,i) = OFF THEN
;		ACPARA_Name[i] = 5616 + i
;	ELSE IF BLD(ACPARA,i) = ON THEN
;		ACPARA_Name[i] = 5632 + i
;	END IF
;NEXT 
;	
LD CR2002                ; 常時ON
NCJ #1000
;'動作ﾊﾟﾗﾒｰﾀON/OFF状態により指定名称番号(ﾒｯｾｰｼﾞ番号)を変更
;
;'ACPARA_Name[i]に表示ﾒｯｾｰｼﾞNoを格納
;
;'動作ﾊﾟﾗﾒｰﾀbit0～15		OFF時名称表示ﾒｯｾｰｼﾞNo	5600～5615
;
;'						ON時名称表示ﾒｯｾｰｼﾞNo	5616～5631
;
;FOR i = 0 TO 15		'動作ﾊﾟﾗﾒｰﾀ個数分ﾙｰﾌﾟ
;
LD CR2002                ; 常時ON
MOV #0 i
LABEL #2000
LD> i #15
CJ #2001
;	IF BLD(ACPARA,i) = OFF THEN		'指定bitOFF?
;
BLD.D DM2000 i           ; _動作ﾊﾟﾗﾒｰﾀ
OUT @VB00
LDB @VB00
NCJ #2002
;		ACPARA_Name[i] = 5600 + i			'OFF表示ﾒｯｾｰｼﾞNo=(5600+bitNo)
;
LD CR2002                ; 常時ON
LDA i
CON
EXT
CON
STA.L Z11
CON
LDA i
CON
EXT
CON
ADD.L +5600
CON
STA DM2100:Z11           ; _動作ﾊﾟﾗﾒｰﾀ1名称番号
LD CR2002                ; 常時ON
CJ #2003
LABEL #2002
;	ELSE IF BLD(ACPARA,i) = ON THEN	'指定bitON?	
;
BLD.D DM2000 i           ; _動作ﾊﾟﾗﾒｰﾀ
NCJ #2004
;		ACPARA_Name[i] = 5616 + i			'ON表示ﾒｯｾｰｼﾞNo=(5616+bitNo)
;
LD CR2002                ; 常時ON
LDA i
CON
EXT
CON
STA.L Z11
CON
LDA i
CON
EXT
CON
ADD.L +5616
CON
STA DM2100:Z11           ; _動作ﾊﾟﾗﾒｰﾀ1名称番号
;	END IF
;
LABEL #2004
LABEL #2003
;NEXT
;
LD CR2002                ; 常時ON
INC i
LDB CR2009               ; 演算結果が負
CJ #2000
LABEL #2001
;'動作ﾊﾟﾗﾒｰﾀbit16～31	OFF時名称表示ﾒｯｾｰｼﾞNo	5632～5647
;
;'						ON時名称表示ﾒｯｾｰｼﾞNo	5648～5663
;
;FOR i = 16 TO 31
;
LD CR2002                ; 常時ON
MOV #16 i
LABEL #2005
LD> i #31
CJ #2006
;	IF BLD(ACPARA,i) = OFF THEN
;
BLD.D DM2000 i           ; _動作ﾊﾟﾗﾒｰﾀ
OUT @VB01
LDB @VB01
NCJ #2007
;		ACPARA_Name[i] = 5616 + i
;
LD CR2002                ; 常時ON
LDA i
CON
EXT
CON
STA.L Z11
CON
LDA i
CON
EXT
CON
ADD.L +5616
CON
STA DM2100:Z11           ; _動作ﾊﾟﾗﾒｰﾀ1名称番号
LD CR2002                ; 常時ON
CJ #2008
LABEL #2007
;	ELSE IF BLD(ACPARA,i) = ON THEN
;
BLD.D DM2000 i           ; _動作ﾊﾟﾗﾒｰﾀ
NCJ #2009
;		ACPARA_Name[i] = 5632 + i
;
LD CR2002                ; 常時ON
LDA i
CON
EXT
CON
STA.L Z11
CON
LDA i
CON
EXT
CON
ADD.L +5632
CON
STA DM2100:Z11           ; _動作ﾊﾟﾗﾒｰﾀ1名称番号
;	END IF
;
LABEL #2009
LABEL #2008
;NEXT 
;
LD CR2002                ; 常時ON
INC i
LDB CR2009               ; 演算結果が負
CJ #2005
LABEL #2006
LABEL #1000
;
;<h1/>Parameter Editing/ﾊﾟﾗﾒｰﾀ編集中
;・ﾒｲﾝTPﾒｲﾝ画面から【設定】ﾎﾞﾀﾝ押下にてﾊﾟﾗﾒｰﾀ編集中ﾌﾗｸﾞ(PARADO) ON
;・ﾊﾟﾗﾒｰﾀ編集画面(#200)からﾒｲﾝ画面(#10)に戻ったらData_Distribut起動
;・Data_Distribut終了後、ﾌﾗｸﾞOFF
LDB R46105               ; _ﾊﾟﾗﾒｰﾀ編集中　ﾓｰﾄﾞﾌﾗｸﾞ
AND= DM3000 #10          ; _MainTP　表示中ﾍﾟｰｼﾞNo
SET @R000                ; Main画面表示中
LD @R000                 ; Main画面表示中
AND= DM3000 #200         ; _MainTP　表示中ﾍﾟｰｼﾞNo
RES @R000                ; Main画面表示中
CON
SET R46105               ; _ﾊﾟﾗﾒｰﾀ編集中　ﾓｰﾄﾞﾌﾗｸﾞ
LD R46105                ; _ﾊﾟﾗﾒｰﾀ編集中　ﾓｰﾄﾞﾌﾗｸﾞ
AND= DM3000 #10          ; _MainTP　表示中ﾍﾟｰｼﾞNo
@SET @R001               ; Data_Dist開始
STG @R001                ; Data_Dist開始
SET R40404               ; _ﾊﾟﾗﾒｰﾀ変更後ﾕｰｻﾞｰSTG
CON
JMP @R002                ; Data_Dist終了待ち
STG @R002                ; Data_Dist終了待ち
ANB R40404               ; _ﾊﾟﾗﾒｰﾀ変更後ﾕｰｻﾞｰSTG
RES R46105               ; _ﾊﾟﾗﾒｰﾀ編集中　ﾓｰﾄﾞﾌﾗｸﾞ
CON
ENDS
;<h1/>Parameter Setting Button/設定ﾎﾞﾀﾝ
;●ﾒｲﾝTP【設定】ﾎﾞﾀﾝ有効／無効
;・定停止になったら有効[#0]
;・動作中になったら無効[#1]
LDP R46103               ; _停止中　ﾓｰﾄﾞﾌﾗｸﾞ
MOV #0 DM8570            ; _ﾒｲﾝTP設定SW表示有無
LDF R46103               ; _停止中　ﾓｰﾄﾞﾌﾗｸﾞ
MOV #1 DM8570            ; _ﾒｲﾝTP設定SW表示有無
;<h1/>Mainte Button/ﾒﾝﾃﾎﾞﾀﾝ
;●ｻﾌﾞTP【ﾒﾝﾃ】ﾎﾞﾀﾝ有効／無効
;・ﾒﾝﾃﾓｰﾄﾞ選択にて有効[#0]
;・ﾒﾝﾃﾓｰﾄﾞ未選択、動作中にて無効[#1]
LD R46113                ; _MAINTEﾓｰﾄﾞ選択中
ANB R47501               ; _Group2　ﾒﾝﾃ動作中
MOV #0 DM8571            ; _ｻﾌﾞTP1ﾒﾝﾃSW表示有無
LDB R46113               ; _MAINTEﾓｰﾄﾞ選択中
MOV #1 DM8571            ; _ｻﾌﾞTP1ﾒﾝﾃSW表示有無
MOV #1 DM8572            ; _ｻﾌﾞTP2ﾒﾝﾃSW表示有無
;<h1/>Operator Level Control/ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ制御
;●現在ｵﾍﾟﾚｰﾀﾚﾍﾞﾙに応じて【設定】画面の選択SW可／不可切替
;/////Ver1.0.2/////
;・ﾒｲﾝTP画面Noが200番(設定項目画面)に変更されたらﾎﾞﾀﾝ有効/無効を更新
;FOR i = 0 TO 15
;	'現在のｵﾍﾟﾚｰﾀﾚﾍﾞﾙがﾚﾍﾞﾙ3なら全て許可
;	IF OpeLevel = 2 THEN
;		RES(KtoV_MainTP_SelectSw[i])	'ﾎﾞﾀﾝ有効
;	END IF
;	
;	'現在のｵﾍﾟﾚｰﾀﾚﾍﾞﾙがﾚﾍﾞﾙ2ならﾚﾍﾞﾙ2以下を許可
;	IF OpeLevel = 1 AND Button_OpeLevel[i] <= 2 THEN
;		RES(KtoV_MainTP_SelectSw[i])	'ﾎﾞﾀﾝ有効
;	ELSE IF OpeLevel = 1 AND Button_OpeLevel[i] > 2 THEN
;		SET(KtoV_MainTP_SelectSw[i])	'ﾎﾞﾀﾝ無効
;	END IF
;	
;	'現在のｵﾍﾟﾚｰﾀﾚﾍﾞﾙがﾚﾍﾞﾙ1ならばﾚﾍﾞﾙ1のみを許可
;	IF OpeLevel = 0 AND Button_OpeLevel[i] = 1 THEN
;		RES(KtoV_MainTP_SelectSw[i])	'ﾎﾞﾀﾝ有効
;	ELSE IF OpeLevel = 0 AND Button_OpeLevel[i] <> 1 THEN
;		SET(KtoV_MainTP_SelectSw[i])	'ﾎﾞﾀﾝ無効
;	END IF
;NEXT 
LD= DM3000 #200          ; _MainTP　表示中ﾍﾟｰｼﾞNo
MEP
ORP R46103               ; _停止中　ﾓｰﾄﾞﾌﾗｸﾞ
NCJ #1001
;FOR i = 0 TO 15
;
LD CR2002                ; 常時ON
MOV #0 i
LABEL #2010
LD> i #15
CJ #2011
;	'現在のｵﾍﾟﾚｰﾀﾚﾍﾞﾙがﾚﾍﾞﾙ3なら全て許可
;
;	IF OpeLevel = 2 THEN
;
LD= DM2002 #2            ; _現在ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ番号
NCJ #2012
;		RES(KtoV_MainTP_SelectSw[i])	'ﾎﾞﾀﾝ有効
;
LD CR2002                ; 常時ON
LDA i
CON
EXT
CON
STA.L Z12
RES R54900:Z12           ; _設定内SW選択可／不可
;	END IF
;
LABEL #2012
;	'現在のｵﾍﾟﾚｰﾀﾚﾍﾞﾙがﾚﾍﾞﾙ2ならﾚﾍﾞﾙ2以下を許可
;
;	IF OpeLevel = 1 AND Button_OpeLevel[i] <= 2 THEN
;
LD= DM2002 #1            ; _現在ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ番号
OUT @VB02
LD CR2002                ; 常時ON
LDA i
CON
EXT
CON
STA.L Z12
LD<= DM9253:Z12 #2       ; _設定SWｵﾍﾟﾚｰﾀﾚﾍﾞﾙ
AND @VB02
NCJ #2013
;		RES(KtoV_MainTP_SelectSw[i])	'ﾎﾞﾀﾝ有効
;
LD CR2002                ; 常時ON
LDA i
CON
EXT
CON
STA.L Z12
RES R54900:Z12           ; _設定内SW選択可／不可
LD CR2002                ; 常時ON
CJ #2014
LABEL #2013
;	ELSE IF OpeLevel = 1 AND Button_OpeLevel[i] > 2 THEN
;
LD= DM2002 #1            ; _現在ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ番号
OUT @VB03
LD CR2002                ; 常時ON
LDA i
CON
EXT
CON
STA.L Z12
LD> DM9253:Z12 #2        ; _設定SWｵﾍﾟﾚｰﾀﾚﾍﾞﾙ
AND @VB03
NCJ #2015
;		SET(KtoV_MainTP_SelectSw[i])	'ﾎﾞﾀﾝ無効
;
LD CR2002                ; 常時ON
LDA i
CON
EXT
CON
STA.L Z12
SET R54900:Z12           ; _設定内SW選択可／不可
;	END IF
;
LABEL #2015
LABEL #2014
;	'現在のｵﾍﾟﾚｰﾀﾚﾍﾞﾙがﾚﾍﾞﾙ1ならばﾚﾍﾞﾙ1のみを許可
;
;	IF OpeLevel = 0 AND Button_OpeLevel[i] = 1 THEN
;
LD= DM2002 #0            ; _現在ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ番号
OUT @VB04
LD CR2002                ; 常時ON
LDA i
CON
EXT
CON
STA.L Z12
LD= DM9253:Z12 #1        ; _設定SWｵﾍﾟﾚｰﾀﾚﾍﾞﾙ
AND @VB04
NCJ #2016
;		RES(KtoV_MainTP_SelectSw[i])	'ﾎﾞﾀﾝ有効
;
LD CR2002                ; 常時ON
LDA i
CON
EXT
CON
STA.L Z12
RES R54900:Z12           ; _設定内SW選択可／不可
LD CR2002                ; 常時ON
CJ #2017
LABEL #2016
;	ELSE IF OpeLevel = 0 AND Button_OpeLevel[i] <> 1 THEN
;
LD= DM2002 #0            ; _現在ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ番号
OUT @VB05
LD CR2002                ; 常時ON
LDA i
CON
EXT
CON
STA.L Z12
LD<> DM9253:Z12 #1       ; _設定SWｵﾍﾟﾚｰﾀﾚﾍﾞﾙ
AND @VB05
NCJ #2018
;		SET(KtoV_MainTP_SelectSw[i])	'ﾎﾞﾀﾝ無効
;
LD CR2002                ; 常時ON
LDA i
CON
EXT
CON
STA.L Z12
SET R54900:Z12           ; _設定内SW選択可／不可
;	END IF
;
LABEL #2018
LABEL #2017
;NEXT 
LD CR2002                ; 常時ON
INC i
LDB CR2009               ; 演算結果が負
CJ #2010
LABEL #2011
LABEL #1001
;
;<h1/>Operator Level Change/ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ変更
;●ﾊﾟｽﾜｰﾄﾞ入力画面表示処理
;・現在ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ1の場合、ﾚﾍﾞﾙ2/ﾚﾍﾞﾙ3共にﾊﾟｽﾜｰﾄﾞ入力必要
LD= DM2002 #0            ; _現在ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ番号
AND R54108               ; _ｵﾍﾟﾚﾍﾞ変更確認
MPS
AND R54101               ; _ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ2切替
MOV #1 @EM34             ; 現在変更中ｵﾍﾟﾚﾍﾞ
@SET R54103              ; _ﾊﾟｽﾜｰﾄﾞ入力画面表示
MPP
AND R54102               ; _ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ3切替
MOV #2 @EM34             ; 現在変更中ｵﾍﾟﾚﾍﾞ
@SET R54103              ; _ﾊﾟｽﾜｰﾄﾞ入力画面表示
;・現在ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ2の場合、ﾚﾍﾞﾙ3のみﾊﾟｽﾜｰﾄﾞ入力必要
LD= DM2002 #1            ; _現在ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ番号
AND R54108               ; _ｵﾍﾟﾚﾍﾞ変更確認
MPS
AND R54100               ; _ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ1切替
MOV #0 DM2002            ; _現在ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ番号
MPP
AND R54102               ; _ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ3切替
MOV #2 @EM34             ; 現在変更中ｵﾍﾟﾚﾍﾞ
@SET R54103              ; _ﾊﾟｽﾜｰﾄﾞ入力画面表示
;・現在ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ3の場合、入力不要
LD= DM2002 #2            ; _現在ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ番号
AND R54108               ; _ｵﾍﾟﾚﾍﾞ変更確認
MPS
AND R54100               ; _ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ1切替
MOV #0 DM2002            ; _現在ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ番号
MPP
AND R54101               ; _ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ2切替
MOV #1 DM2002            ; _現在ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ番号
;●入力ﾊﾟｽﾜｰﾄﾞと現在ﾊﾟｽﾜｰﾄﾞ比較
;・OKならばｵﾍﾟﾚｰﾀﾚﾍﾞﾙ変更
;・NGならば変更不可
;・生産技術C用ﾊﾟｽﾜｰﾄﾞ入力の場合、ﾚﾍﾞﾙ3まで開放
LD R54104                ; _ﾊﾟｽﾜｰﾄﾞ入力完了
MPS
AND= @EM34 #1            ; 現在変更中ｵﾍﾟﾚﾍﾞ
MPS
SCMP DM8615 DM8600       ; _入力ﾊﾟｽﾜｰﾄﾞ  _ﾚﾍﾞﾙ2ﾊﾟｽﾜｰﾄﾞ文字列
CON
AND CR2010               ; 演算結果がｾﾞﾛ
MOV #1 DM2002            ; _現在ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ番号
MPP
SCMP DM8615 DM2004       ; _入力ﾊﾟｽﾜｰﾄﾞ  _生技C専用ﾊﾟｽﾜｰﾄﾞ
CON
AND CR2010               ; 演算結果がｾﾞﾛ
MOV #2 DM2002            ; _現在ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ番号
MPP
AND= @EM34 #2            ; 現在変更中ｵﾍﾟﾚﾍﾞ
MPS
SCMP DM8615 DM8603       ; _入力ﾊﾟｽﾜｰﾄﾞ  _ﾚﾍﾞﾙ3ﾊﾟｽﾜｰﾄﾞ文字列
CON
AND CR2010               ; 演算結果がｾﾞﾛ
MOV #2 DM2002            ; _現在ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ番号
MPP
SCMP DM8615 DM2004       ; _入力ﾊﾟｽﾜｰﾄﾞ  _生技C専用ﾊﾟｽﾜｰﾄﾞ
CON
AND CR2010               ; 演算結果がｾﾞﾛ
MOV #2 DM2002            ; _現在ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ番号
LDP R54100               ; _ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ1切替
ORP R54101               ; _ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ2切替
ORP R54102               ; _ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ3切替
SMOV "" DM8615           ; _入力ﾊﾟｽﾜｰﾄﾞ
;<h1/>Passward Change/ﾊﾟｽﾜｰﾄﾞ変更
;●ﾊﾟｽﾜｰﾄﾞ変更画面表示時処理
;・ﾊﾞｯﾌｧﾃﾞﾊﾞｲｽｸﾘｱ
;・ﾚﾍﾞﾙ選択初期値
LD= DM3000 #251          ; _MainTP　表示中ﾍﾟｰｼﾞNo
@SMOV "" DM8615          ; _入力ﾊﾟｽﾜｰﾄﾞ
@SMOV "" DM8606          ; _旧ﾊﾟｽﾜｰﾄﾞ入力文字列
@SMOV "" DM8609          ; _新ﾊﾟｽﾜｰﾄﾞ入力文字列
@SMOV "" DM8612          ; _新ﾊﾟｽﾜｰﾄﾞ確認入力文字列
@MOV #1 DM8618           ; _変更ﾊﾟｽﾜｰﾄﾞﾚﾍﾞﾙ番号
;●ﾊﾟｽﾜｰﾄﾞ文字列長確認
LD= DM3000 #251          ; _MainTP　表示中ﾍﾟｰｼﾞNo
LEN DM8606 @EM35         ; _旧ﾊﾟｽﾜｰﾄﾞ入力文字列  ﾊﾟｽﾜｰﾄﾞ文字列長
LEN DM8609 @EM36         ; _新ﾊﾟｽﾜｰﾄﾞ入力文字列  ﾊﾟｽﾜｰﾄﾞ文字列長
LEN DM8612 @EM37         ; _新ﾊﾟｽﾜｰﾄﾞ確認入力文字列  ﾊﾟｽﾜｰﾄﾞ文字列長
;●ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ2ﾊﾟｽﾜｰﾄﾞ変更
;・ﾊﾟｽﾜｰﾄﾞ文字列長ﾁｪｯｸ(通常は4桁だが、未使用CPUの場合は0桁あり)
;・現在ﾊﾟｽﾜｰﾄﾞと旧ﾊﾟｽﾜｰﾄﾞ文字列比較
;・新ﾊﾟｽﾜｰﾄﾞと新ﾊﾟｽﾜｰﾄﾞ確認文字列比較
LD= DM8618 #1            ; _変更ﾊﾟｽﾜｰﾄﾞﾚﾍﾞﾙ番号
ANP R54105               ; _ﾊﾟｽﾜｰﾄﾞ変更要求
MPS
LD= @EM35 #4             ; ﾊﾟｽﾜｰﾄﾞ文字列長
OR= @EM35 #0             ; ﾊﾟｽﾜｰﾄﾞ文字列長
AND= @EM36 #4            ; ﾊﾟｽﾜｰﾄﾞ文字列長
AND= @EM37 #4            ; ﾊﾟｽﾜｰﾄﾞ文字列長
ANL
SCMP DM8600 DM8606       ; _ﾚﾍﾞﾙ2ﾊﾟｽﾜｰﾄﾞ文字列  _旧ﾊﾟｽﾜｰﾄﾞ入力文字列
CON
MPS
LD CR2010                ; 演算結果がｾﾞﾛ
OR CR2011                ; 演算結果が正
ANL
SET @R100                ; ｵﾍﾟﾚﾍﾞ2ﾊﾟｽﾜｰﾄﾞ変更中
MPP
AND CR2009               ; 演算結果が負
SET R54107               ; _ﾊﾟｽﾜｰﾄﾞ変更不可能
CON
SET @R107                ; ﾊﾞｯﾌｧ初期化
MPP
LD<> @EM35 #0            ; ﾊﾟｽﾜｰﾄﾞ文字列長
AND<> @EM35 #4           ; ﾊﾟｽﾜｰﾄﾞ文字列長
OR<> @EM36 #4            ; ﾊﾟｽﾜｰﾄﾞ文字列長
OR<> @EM37 #4            ; ﾊﾟｽﾜｰﾄﾞ文字列長
ANL
SET R54107               ; _ﾊﾟｽﾜｰﾄﾞ変更不可能
CON
SET @R107                ; ﾊﾞｯﾌｧ初期化
STG @R100                ; ｵﾍﾟﾚﾍﾞ2ﾊﾟｽﾜｰﾄﾞ変更中
SCMP DM8609 DM8612       ; _新ﾊﾟｽﾜｰﾄﾞ入力文字列  _新ﾊﾟｽﾜｰﾄﾞ確認入力文字列
CON
MPS
LD CR2010                ; 演算結果がｾﾞﾛ
OR CR2011                ; 演算結果が正
ANL
SMOV DM8609 DM8600       ; _新ﾊﾟｽﾜｰﾄﾞ入力文字列  _ﾚﾍﾞﾙ2ﾊﾟｽﾜｰﾄﾞ文字列
SET R54106               ; _ﾊﾟｽﾜｰﾄﾞ変更可能
CON
JMP @R107                ; ﾊﾞｯﾌｧ初期化
MPP
AND CR2009               ; 演算結果が負
SET R54107               ; _ﾊﾟｽﾜｰﾄﾞ変更不可能
CON
JMP @R107                ; ﾊﾞｯﾌｧ初期化
;●ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ3ﾊﾟｽﾜｰﾄﾞ変更
;・ﾊﾟｽﾜｰﾄﾞ文字列長ﾁｪｯｸ(通常は4桁だが、未使用CPUの場合は0桁あり)
;・現在ﾊﾟｽﾜｰﾄﾞと旧ﾊﾟｽﾜｰﾄﾞ文字列比較
;・新ﾊﾟｽﾜｰﾄﾞと新ﾊﾟｽﾜｰﾄﾞ確認文字列比較
LD= DM8618 #2            ; _変更ﾊﾟｽﾜｰﾄﾞﾚﾍﾞﾙ番号
ANP R54105               ; _ﾊﾟｽﾜｰﾄﾞ変更要求
MPS
LD= @EM35 #4             ; ﾊﾟｽﾜｰﾄﾞ文字列長
OR= @EM35 #0             ; ﾊﾟｽﾜｰﾄﾞ文字列長
AND= @EM36 #4            ; ﾊﾟｽﾜｰﾄﾞ文字列長
AND= @EM37 #4            ; ﾊﾟｽﾜｰﾄﾞ文字列長
ANL
SCMP DM8603 DM8606       ; _ﾚﾍﾞﾙ3ﾊﾟｽﾜｰﾄﾞ文字列  _旧ﾊﾟｽﾜｰﾄﾞ入力文字列
CON
MPS
LD CR2010                ; 演算結果がｾﾞﾛ
OR CR2011                ; 演算結果が正
ANL
SET @R101                ; ｵﾍﾟﾚﾍﾞ3ﾊﾟｽﾜｰﾄﾞ変更中
MPP
AND CR2009               ; 演算結果が負
SET R54107               ; _ﾊﾟｽﾜｰﾄﾞ変更不可能
CON
SET @R107                ; ﾊﾞｯﾌｧ初期化
MPP
LD<> @EM35 #0            ; ﾊﾟｽﾜｰﾄﾞ文字列長
AND<> @EM35 #4           ; ﾊﾟｽﾜｰﾄﾞ文字列長
OR<> @EM36 #4            ; ﾊﾟｽﾜｰﾄﾞ文字列長
OR<> @EM37 #4            ; ﾊﾟｽﾜｰﾄﾞ文字列長
ANL
SET R54107               ; _ﾊﾟｽﾜｰﾄﾞ変更不可能
CON
SET @R107                ; ﾊﾞｯﾌｧ初期化
STG @R101                ; ｵﾍﾟﾚﾍﾞ3ﾊﾟｽﾜｰﾄﾞ変更中
SCMP DM8609 DM8612       ; _新ﾊﾟｽﾜｰﾄﾞ入力文字列  _新ﾊﾟｽﾜｰﾄﾞ確認入力文字列
CON
MPS
LD CR2010                ; 演算結果がｾﾞﾛ
OR CR2011                ; 演算結果が正
ANL
SMOV DM8609 DM8603       ; _新ﾊﾟｽﾜｰﾄﾞ入力文字列  _ﾚﾍﾞﾙ3ﾊﾟｽﾜｰﾄﾞ文字列
SET R54106               ; _ﾊﾟｽﾜｰﾄﾞ変更可能
CON
JMP @R107                ; ﾊﾞｯﾌｧ初期化
MPP
AND CR2009               ; 演算結果が負
SET R54107               ; _ﾊﾟｽﾜｰﾄﾞ変更不可能
CON
JMP @R107                ; ﾊﾞｯﾌｧ初期化
STG @R107                ; ﾊﾞｯﾌｧ初期化
SMOV "" DM8615           ; _入力ﾊﾟｽﾜｰﾄﾞ
SMOV "" DM8606           ; _旧ﾊﾟｽﾜｰﾄﾞ入力文字列
SMOV "" DM8609           ; _新ﾊﾟｽﾜｰﾄﾞ入力文字列
SMOV "" DM8612           ; _新ﾊﾟｽﾜｰﾄﾞ確認入力文字列
ENDS
;<h1/>-----Data
LD= DM3000 #221          ; _MainTP　表示中ﾍﾟｰｼﾞNo
@LDA DM5260              ; 選択中ｺｰﾄﾞ
CON
@STA DM8640              ; _TP選択中機種ｺｰﾄﾞ
;<h1/>RECIPE MODEL DATA WRITE
LDP R55301               ; Data Setting End
ANB R55308               ; _ﾃﾞｰﾀｺﾋﾟｰ終了
ANB R55309               ; _ﾒﾓﾘｰｶｰﾄﾞｱｸｾｽ禁止
MPS
AND R55307               ; _TPﾃﾞｰﾀ編集/参照
BMOV DM4200 ZF270 #200   ; _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ  _機種分類1　機種別ﾃﾞｰﾀ1
BMOV DM4200 DM400 #200   ; _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ  _機種分類1　機種別ﾃﾞｰﾀ1
BMOV DM50500 ZF0 #270    ; 機種項目1  RBDATA Temporary
BMOV DM50500 DM100 #270  ; 機種項目1  _機種共通ﾃﾞｰﾀ1
BMOV EM10000 ZF470 #19200; RB1目標値（下位）1  RBPOSﾃﾞｰﾀ
RES R55307               ; _TPﾃﾞｰﾀ編集/参照
CON
SET R55308               ; _ﾃﾞｰﾀｺﾋﾟｰ終了
MPP
ANB R55307               ; _TPﾃﾞｰﾀ編集/参照
SET R55309               ; _ﾒﾓﾘｰｶｰﾄﾞｱｸｾｽ禁止
;<h1/>M/C Basic Data/装置基礎ﾃﾞｰﾀ
;装置基礎ﾃﾞｰﾀSW表示(ｵﾍﾟﾚｰﾀﾚﾍﾞﾙがﾚﾍﾞﾙ3の場合のみ)
LD R59907                ; _装置基礎ﾃﾞｰﾀ使用有無
AND= DM2002 #2           ; _現在ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ番号
OUT R55310               ; _装置基礎ﾃﾞｰﾀ編集許可
;<h1/>Model Control/機種管理
;●TP選択中機種管理番号転送
LD CR2002                ; 常時ON
MPS
AND<> DM8640 #0          ; _TP選択中機種ｺｰﾄﾞ
LDA DM8640               ; _TP選択中機種ｺｰﾄﾞ
CON
STA DM8644               ; _選択中機種ｺｰﾄﾞ
MPP
AND= DM8640 #0           ; _TP選択中機種ｺｰﾄﾞ
MOV #0 DM8644            ; _選択中機種ｺｰﾄﾞ
;●機種変更要求
;機種変更方法によってAck分岐(MdlChgSelect=0:TPからの機種切替 <>0=ﾏｸﾛ機種切替)
;・機種処理時に現在機種が変更されてしまう為、TP用作業ﾌｫﾙﾀﾞはﾃﾝﾎﾟﾗﾘとする
;・機種別ﾃﾞｰﾀを一度ﾃﾝﾎﾟﾗﾘに受けてPLCが機種別ﾃﾞｰﾀを変更する
LD= DM9033 #0            ; _機種変更種類
ANP R54807               ; _機種切替要求(From TP)
LD<> DM9033 #0           ; _機種変更種類
AND R54810               ; _機種切替成功
ORL
SET R54808               ; _名称転送要求
LDP R55209               ; 機種切替完了
BMOV ZF0 DM100 #270      ; RBDATA Temporary  _機種共通ﾃﾞｰﾀ1
BMOV ZF270 DM400 #200    ; _機種分類1　機種別ﾃﾞｰﾀ1  _機種分類1　機種別ﾃﾞｰﾀ1
BMOV ZF470 EM10000 #19200; RBPOSﾃﾞｰﾀ  RB1目標値（下位）1
BMOV DM100 DM50500 #270  ; _機種共通ﾃﾞｰﾀ1  機種項目1
BMOV DM400 DM4200 #200   ; _機種分類1　機種別ﾃﾞｰﾀ1  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ
LD R55209                ; 機種切替完了
TMR @10 #2
CON
AND @T10
@INC DM0
CON
RES R55209               ; 機種切替完了
;<h1/>Model Name change
;●現在選択されている機種の機種名変更と削除は禁止とする(To TP)
;IF DM8644<>0 THEN
;	BMOV(D800:((DM8644-1)*8),DM9988,8)'変更機種データ名
;END IF
;
;IF DM9988.D = 0 THEN 
;	SET(R54805)
;ELSE
;	RES(R54805)
;END IF	
;
;IF DM5260<> 0 THEN
;	BMOV(D800:((DM5260-1)*8),DM9980,8)'現在機種データ名
;END IF
;
;IF DM3000 = #233 THEN 'Copy
;	BMOV(D800:((DM5261-1)*8),D896,8)
;	
;END IF
;
LD<= DM3000 #239         ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND>= DM3000 #221        ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD<= DM3000 #399         ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND>= DM3000 #300        ; _MainTP　表示中ﾍﾟｰｼﾞNo
ORL
NCJ #1030
;IF DM8644<>0 THEN
;
LD<> DM8644 #0           ; _選択中機種ｺｰﾄﾞ
NCJ #2019
;	BMOV(D800:((DM8644-1)*8),DM9988,8)'変更機種データ名
;
LD CR2002                ; 常時ON
LDA DM8644               ; _選択中機種ｺｰﾄﾞ
CON
EXT
CON
SUB.L +1
CON
MUL.L +8
CON
STA.L Z12
BMOV DM800:Z12 DM9988 #8 ; 機種1
;END IF
;
LABEL #2019
;IF DM9988.D = 0 THEN 
;
LD=.D DM9988 #0
NCJ #2020
;	SET(R54805)
;
LD CR2002                ; 常時ON
SET R54805               ; 機種切替不可
;ELSE
;
LD CR2002                ; 常時ON
CJ #2021
LABEL #2020
;	RES(R54805)
;
LD CR2002                ; 常時ON
RES R54805               ; 機種切替不可
;END IF	
;
LABEL #2021
;IF DM5260<> 0 THEN
;
LD<> DM5260 #0           ; 選択中ｺｰﾄﾞ
NCJ #2022
;	BMOV(D800:((DM5260-1)*8),DM9980,8)'現在機種データ名
;
LD CR2002                ; 常時ON
LDA DM5260               ; 選択中ｺｰﾄﾞ
CON
EXT
CON
SUB.L +1
CON
MUL.L +8
CON
STA.L Z12
BMOV DM800:Z12 DM9980 #8 ; 機種1
;END IF
;
LABEL #2022
;IF DM3000 = #233 THEN 'Copy
;
LD= DM3000 #233          ; _MainTP　表示中ﾍﾟｰｼﾞNo
NCJ #2023
;	BMOV(D800:((DM5261-1)*8),D896,8)
;
LD CR2002                ; 常時ON
LDA DM5261               ; コピー先機種№
CON
EXT
CON
SUB.L +1
CON
MUL.L +8
CON
STA.L Z12
BMOV DM800:Z12 DM896 #8  ; 機種1
;END IF
;
LABEL #2023
LABEL #1030
;
LD<> DM896 #0
AND<> DM5261 DM8644      ; コピー先機種№  _選択中機種ｺｰﾄﾞ
AND<= DM3000 #239        ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND>= DM3000 #221        ; _MainTP　表示中ﾍﾟｰｼﾞNo
OUT @R003                ; Copy 可能
LD<> DM3000 #230         ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND<> DM3000 #231        ; _MainTP　表示中ﾍﾟｰｼﾞNo
RES R54804               ; 名称登録可能
LD= DM8641 #1            ; _TP機種切替実行分類番号
LD= DM5260 DM8644        ; 選択中ｺｰﾄﾞ  _選択中機種ｺｰﾄﾞ
OR= DM8644 #0            ; _選択中機種ｺｰﾄﾞ
ANL
OR R54805                ; 機種切替不可
OUT R54815               ; _使用中機種をTPで選択中
LD R54805                ; 機種切替不可
OR @R003                 ; Copy 可能
OUT R54806               ; 新規作成許可
;FOR @DM3 = 0 TO 24
;RES(R54804)
; IF DM8698.T = D800.T:(@D3*8) THEN
;	ZRES(DM8698,DM8705) 
;	RES(R54804)
; END IF
;NEXT
;IF DM8698<> 0 THEN
;	SET(R54804)
;END IF
;RES(R54803)
LDP R54803               ; 機種名変更
NCJ #1031
;FOR @DM3 = 0 TO 24
;
LD CR2002                ; 常時ON
MOV #0 @DM3
LABEL #2024
LD> @DM3 #24
CJ #2025
;RES(R54804)
;
LD CR2002                ; 常時ON
RES R54804               ; 名称登録可能
; IF DM8698.T = D800.T:(@D3*8) THEN
;
LD CR2002                ; 常時ON
LDA @DM3
CON
EXT
CON
MUL.L +8
CON
STA.L Z12
CON
SCMP DM8698 DM800:Z12    ; _新規作成機種作成名称  機種1
LD CR2010                ; 演算結果がｾﾞﾛ
NCJ #2026
;	ZRES(DM8698,DM8705) 
;
LD CR2002                ; 常時ON
ZRES DM8698 DM8705       ; _新規作成機種作成名称
;	RES(R54804)
;
LD CR2002                ; 常時ON
RES R54804               ; 名称登録可能
; END IF
;
LABEL #2026
;NEXT
;
LD CR2002                ; 常時ON
INC @DM3
LDB CR2009               ; 演算結果が負
CJ #2024
LABEL #2025
;IF DM8698<> 0 THEN
;
LD<> DM8698 #0           ; _新規作成機種作成名称
NCJ #2027
;	SET(R54804)
;
LD CR2002                ; 常時ON
SET R54804               ; 名称登録可能
;END IF
;
LABEL #2027
;RES(R54803)
LD CR2002                ; 常時ON
RES R54803               ; 機種名変更
LABEL #1031
;
;@DM0=(DM8644-1)*8
;IF DM8698<> 0 THEN
;	BMOV(DM8698,D800:@DM0,8)
;ELSE
;	SET(R54803)
;END IF
LDP R54802               ; 機種名変更要求
NCJ #1002
;@DM0=(DM8644-1)*8
;
LD CR2002                ; 常時ON
LDA DM8644               ; _選択中機種ｺｰﾄﾞ
CON
EXT
CON
SUB.L +1
CON
MUL.L +8
CON
STA @DM0
;IF DM8698<> 0 THEN
;
LD<> DM8698 #0           ; _新規作成機種作成名称
NCJ #2028
;	BMOV(DM8698,D800:@DM0,8)
;
LD CR2002                ; 常時ON
LDA @DM0
CON
EXT
CON
STA.L Z12
BMOV DM8698 DM800:Z12 #8 ; _新規作成機種作成名称  機種1
;ELSE
;
LD CR2002                ; 常時ON
CJ #2029
LABEL #2028
;	SET(R54803)
;
LD CR2002                ; 常時ON
SET R54803               ; 機種名変更
;END IF
LABEL #2029
LABEL #1002
;
;機種データ編集
LD= DM3000 #310          ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #370          ; _MainTP　表示中ﾍﾟｰｼﾞNo
@DW #0 DM50430           ; 機種DATA Offset
LD= DM3000 #311          ; _MainTP　表示中ﾍﾟｰｼﾞNo
@DW #50 DM50430          ; 機種DATA Offset
;MODEL DATA NAME
;DM50420 = DM50430*9
;DM50400 = D50430+1 
;DM50410= #3000+DM50430
LD= DM3000 #370          ; _MainTP　表示中ﾍﾟｰｼﾞNo
NCJ #1029
;DM50420 = DM50430*9
;
LD CR2002                ; 常時ON
LDA DM50430              ; 機種DATA Offset
CON
EXT
CON
MUL.L +9
CON
STA DM50420
;DM50400 = D50430+1 
;
LD CR2002                ; 常時ON
LDA DM50430              ; 機種DATA Offset
CON
EXT
CON
ADD.L +1
CON
STA DM50400
;DM50410= #3000+DM50430
LD CR2002                ; 常時ON
LDA DM50430              ; 機種DATA Offset
CON
EXT
CON
ADD.L +3000
CON
STA DM50410
LABEL #1029
;
;RECIPE DATA NAME
;DM50420 = DM50430*2
;DM50400 = D50430+1 
;DM50410 = #3300+DM50430'データ名称
;DM50411 = #3400+DM50430'単位
LD= DM3000 #310          ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #311          ; _MainTP　表示中ﾍﾟｰｼﾞNo
NCJ #1032
;DM50420 = DM50430*2
;
LD CR2002                ; 常時ON
LDA DM50430              ; 機種DATA Offset
CON
EXT
CON
MUL.L +2
CON
STA DM50420
;DM50400 = D50430+1 
;
LD CR2002                ; 常時ON
LDA DM50430              ; 機種DATA Offset
CON
EXT
CON
ADD.L +1
CON
STA DM50400
;DM50410 = #3300+DM50430'データ名称
;
LD CR2002                ; 常時ON
LDA DM50430              ; 機種DATA Offset
CON
EXT
CON
ADD.L +3300
CON
STA DM50410
;DM50411 = #3400+DM50430'単位
LD CR2002                ; 常時ON
LDA DM50430              ; 機種DATA Offset
CON
EXT
CON
ADD.L +3400
CON
STA DM50411
LABEL #1032
;
;RECIPE DATA NAME
;DM50420 = DM50430*2
;DM50400 = D50430+1 
;DM50410 = #6000+DM50430'データ名称
;DM50411 = #6100+DM50430'単位
LD= DM3000 #380          ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #381          ; _MainTP　表示中ﾍﾟｰｼﾞNo
NCJ #1033
;DM50420 = DM50430*2
;
LD CR2002                ; 常時ON
LDA DM50430              ; 機種DATA Offset
CON
EXT
CON
MUL.L +2
CON
STA DM50420
;DM50400 = D50430+1 
;
LD CR2002                ; 常時ON
LDA DM50430              ; 機種DATA Offset
CON
EXT
CON
ADD.L +1
CON
STA DM50400
;DM50410 = #6000+DM50430'データ名称
;
LD CR2002                ; 常時ON
LDA DM50430              ; 機種DATA Offset
CON
EXT
CON
ADD.L +6000
CON
STA DM50410
;DM50411 = #6100+DM50430'単位
LD CR2002                ; 常時ON
LDA DM50430              ; 機種DATA Offset
CON
EXT
CON
ADD.L +6100
CON
STA DM50411
LABEL #1033
;
;●TP機種切替完了待ち
;機種切替方法により分岐
;・TP機種変更の場合→ﾃﾝﾎﾟﾗﾘﾃﾞﾊﾞｲｽから名称と管理番号を取得
;・名称ﾏｸﾛからの場合→引数を名称に指定、管理番号は取得不可
;・番号ﾏｸﾛからの場合→引数を番号に指定、TP指定機種名を名称に指定
LD= DM9033 #0            ; _機種変更種類
ANP R54809               ; _名称転送完了
LD<> DM9033 #0           ; _機種変更種類
AND R54810               ; _機種切替成功
ORL
AND= DM8641 #1           ; _TP機種切替実行分類番号
AND= DM9033 #0           ; _機種変更種類
SMOV DM4456 DM5212       ; _機種名称　ﾃﾝﾎﾟﾗﾘ  機種名称
MOV DM8644 DM5260        ; _選択中機種ｺｰﾄﾞ  選択中ｺｰﾄﾞ
;●機種新規作成、機種名変更
;I/F用ﾃﾞﾊﾞｲｽｸﾘｱ
;・新規作成画面(#231)
;・機種名変更画面(#230)
LD= DM3000 #231          ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #230          ; _MainTP　表示中ﾍﾟｰｼﾞNo
@SMOV "" DM8681          ; _新規作成検索指定名称
@SMOV "" DM8698          ; _新規作成機種作成名称
@MOV #0 DM8680           ; _新規作成可能機種番号
;新機種作成確認要求待ち(From TP)
;・最大機種数からﾙｰﾌﾟ開始、ﾃﾞｸﾘﾒﾝﾄ
LD R54812                ; _新機種作成要求
MOV #0 DM8679            ; _新規作成機種ｻｰﾁ番号
MOV DM9342 @EM40         ; _最大機種数  検索機種番号DEC用
MPS
AND= DM3000 #231         ; _MainTP　表示中ﾍﾟｰｼﾞNo
RES R54812               ; _新機種作成要求
CON
SET @R300                ; 作成機種番号ｻｰﾁ
MPP
AND= DM3000 #230         ; _MainTP　表示中ﾍﾟｰｼﾞNo
SET @R305                ; 機種名変更ﾌﾗｸﾞ
CON
RES R54812               ; _新機種作成要求
CON
SET @R300                ; 作成機種番号ｻｰﾁ
;●全機種ｻｰﾁ
;・全機種の空き番号検索と同一機種名称検索
;	新機種作成の場合→空き番号が存在し、同一名称が無い事
;	名称変更の場合→同一名称が無い事
;
;(内部処理)
;・全機種検索未終了→検索番号転送でﾒﾓﾘｶｰﾄﾞｱｸｾｽ開始(機種名称取得)
;・全機種検索終了
;		→機種数に空き有り(番号検索できた)ならば可能SET
;		→機種数に空きが無ければ(検索できなかった)不可SET
STG @R300                ; 作成機種番号ｻｰﾁ
MPS
AND<> @EM40 #0           ; 検索機種番号DEC用
MOV @EM40 DM8679         ; 検索機種番号DEC用  _新規作成機種ｻｰﾁ番号
JMP @R301                ; ﾒﾓﾘｶｰﾄﾞｱｸｾｽ開始待ち
MPP
AND= @EM40 #0            ; 検索機種番号DEC用
MPS
AND @R305                ; 機種名変更ﾌﾗｸﾞ
RES @R305                ; 機種名変更ﾌﾗｸﾞ
CON
SET R54813               ; _新機種作成可能
CON
ENDS
MPP
ANB @R305                ; 機種名変更ﾌﾗｸﾞ
MPS
AND<> DM8680 #0          ; _新規作成可能機種番号
SET R54813               ; _新機種作成可能
CON
ENDS
MPP
AND= DM8680 #0           ; _新規作成可能機種番号
SET R54714               ; _機種数Full
CON
SET R54814               ; _新機種作成不可
CON
ENDS
;●機種名称取得
;・ﾒﾓﾘｶｰﾄﾞｱｸｾｽ開始～完了待ち
STG @R301                ; ﾒﾓﾘｶｰﾄﾞｱｸｾｽ開始待ち
BAND DM3006 #5           ; _MainTP　ｽﾃｰﾀｽ
JMP @R302                ; ﾒﾓﾘｶｰﾄﾞｱｸｾｽ終了待ち
STG @R302                ; ﾒﾓﾘｶｰﾄﾞｱｸｾｽ終了待ち
BANB DM3006 #5           ; _MainTP　ｽﾃｰﾀｽ
TMH @16 #2               ; ﾒﾓﾘｶｰﾄﾞｱｸｾｽ終了ﾃﾞｨﾚｲ
CON
AND @T16                 ; ﾒﾓﾘｶｰﾄﾞｱｸｾｽ終了ﾃﾞｨﾚｲ
JMP @R303                ; 同一機種名称ﾁｪｯｸ
;●作成機種名称と検索機種名称が一致したらその機種名では作成不可
STG @R303                ; 同一機種名称ﾁｪｯｸ
SCMP DM8681 DM8698       ; _新規作成検索指定名称  _新規作成機種作成名称
CON
MPS
AND CR2010               ; 演算結果がｾﾞﾛ
RES @R305                ; 機種名変更ﾌﾗｸﾞ
CON
SET R54715               ; _同機種名称有り
CON
SET R54814               ; _新機種作成不可
CON
ENDS
MPP
ANB CR2010               ; 演算結果がｾﾞﾛ
MPS
ANB @R305                ; 機種名変更ﾌﾗｸﾞ
JMP @R304                ; 空白機種番号ﾁｪｯｸ
MPP
AND @R305                ; 機種名変更ﾌﾗｸﾞ
DEC @EM40                ; 検索機種番号DEC用
CON
JMP @R300                ; 作成機種番号ｻｰﾁ
;●検索機種名称が空白(機種が存在しない)ならば作成機種管理番号候補とする
;(最大からのﾃﾞｸﾘﾒﾝﾄなので一番若い番号が最後に残る)
STG @R304                ; 空白機種番号ﾁｪｯｸ
SCMP DM8681 ""           ; _新規作成検索指定名称
CON
MPS
AND CR2010               ; 演算結果がｾﾞﾛ
MOV DM8679 DM8680        ; _新規作成機種ｻｰﾁ番号  _新規作成可能機種番号
MPP
DEC @EM40                ; 検索機種番号DEC用
CON
JMP @R300                ; 作成機種番号ｻｰﾁ
;<h1/>ここまで↑
;<h1/>---Consumer Infomation/消耗品情報
;消耗品情報1
;消耗品情報未使用もしくは最大値未入力
;→ｲﾝｼﾞｹﾞｰﾀ青、100%に固定
LDB R59300               ; _消耗品1使用有無
LD R59300                ; _消耗品1使用有無
AND=.D DM8720 #0         ; _消耗品1最大値
ORL
MOV #100 DM8750          ; _消耗品1現在消費%
MOV.D #0 DM8740          ; _消耗品1現在値
MOV #0 DM8755            ; _消耗品1ｲﾝｼﾞｹﾞｰﾀ切替色
;消耗品値計算
;・最大値 - ﾕｰｻﾞｰｶｳﾝﾄ値から残量を求め、割合演算
;(消耗品情報は100%から開始のﾀﾞｳﾝ方式)
;'消耗品割合(%) = (現在値 / 最大値) * 100
;
;KtoV_CSM_Per[0] = (FLOAT(KtoV_CSM_Val[0])/FLOAT(VtoK_CSM_Max[0])) * 100
LD R59300                ; _消耗品1使用有無
AND<>.D DM8720 #0        ; _消耗品1最大値
MPS
AND>.D DM8720 DM9034     ; _消耗品1最大値  _消耗品1ｶｳﾝﾀ
LDA.D DM8720             ; _消耗品1最大値
CON
SUB.D DM9034             ; _消耗品1ｶｳﾝﾀ
CON
STA.D DM8740             ; _消耗品1現在値
MRD
AND<.D DM8720 DM9034     ; _消耗品1最大値  _消耗品1ｶｳﾝﾀ
MOV #0 DM8750            ; _消耗品1現在消費%
MOV.D #0 DM8740          ; _消耗品1現在値
MPP
AND>=.D DM8740 #0        ; _消耗品1現在値
NCJ #1003
;'消耗品割合(%) = (現在値 / 最大値) * 100
;
;KtoV_CSM_Per[0] = (FLOAT(KtoV_CSM_Val[0])/FLOAT(VtoK_CSM_Max[0])) * 100
LD CR2002                ; 常時ON
LDA.D DM8720             ; _消耗品1最大値
CON
FLOAT.D
CON
STA.F @VM0
CON
LDA.D DM8740             ; _消耗品1現在値
CON
FLOAT.D
CON
DIV.F @VM0
CON
MUL.F +100
CON
INTG
CON
STA DM8750               ; _消耗品1現在消費%
LABEL #1003
;
;消耗品ｲﾝｼﾞｹﾞｰﾀ制御
;・現在%がｲﾝｼﾞｹﾞｰﾀ黄色以上%→ｲﾝｼﾞｹﾞｰﾀ青
;・現在%がｲﾝｼﾞｹﾞｰﾀ黄色%以下、赤色%未満→ｲﾝｼﾞｹﾞｰﾀ黄
;・現在%がｲﾝｼﾞｹﾞｰﾀ赤色%以下→ｲﾝｼﾞｹﾞｰﾀ赤
LD R59300                ; _消耗品1使用有無
AND<>.D DM8720 #0        ; _消耗品1最大値
MPS
AND> DM8750 DM8730       ; _消耗品1現在消費%  _消耗品1ｲﾝｼﾞｹﾞｰﾀ黄色開始%
MOV #0 DM8755            ; _消耗品1ｲﾝｼﾞｹﾞｰﾀ切替色
MRD
LD<= DM8750 DM8730       ; _消耗品1現在消費%  _消耗品1ｲﾝｼﾞｹﾞｰﾀ黄色開始%
AND> DM8750 DM8735       ; _消耗品1現在消費%  _消耗品1ｲﾝｼﾞｹﾞｰﾀ赤色開始%
ANL
MOV #1 DM8755            ; _消耗品1ｲﾝｼﾞｹﾞｰﾀ切替色
MPP
AND<= DM8750 DM8735      ; _消耗品1現在消費%  _消耗品1ｲﾝｼﾞｹﾞｰﾀ赤色開始%
MOV #2 DM8755            ; _消耗品1ｲﾝｼﾞｹﾞｰﾀ切替色
;消耗品情報2
LDB R59300:#1            ; _消耗品2使用有無
LD R59300:#1             ; _消耗品2使用有無
AND=.D DM8720:#2 #0      ; _消耗品2最大値
ORL
MOV #100 DM8750:#1       ; _消耗品2現在消費%
MOV.D #0 DM8740:#2       ; _消耗品2現在値
MOV #0 DM8755:#1         ; _消耗品2ｲﾝｼﾞｹﾞｰﾀ切替色
;'消耗品割合(%) = (現在値 / 最大値) * 100
;
;KtoV_CSM_Per[1] = (FLOAT(KtoV_CSM_Val[1])/FLOAT(VtoK_CSM_Max[1])) * 100
LD R59300:#1             ; _消耗品2使用有無
AND<>.D DM8720:#2 #0     ; _消耗品2最大値
MPS
AND>.D DM8720:#2 DM9036  ; _消耗品2最大値  _消耗品2ｶｳﾝﾀ
LDA.D DM8720:#2          ; _消耗品2最大値
CON
SUB.D DM9036             ; _消耗品2ｶｳﾝﾀ
CON
STA.D DM8740:#2          ; _消耗品2現在値
MRD
AND<.D DM8720:#2 DM9036  ; _消耗品2最大値  _消耗品2ｶｳﾝﾀ
MOV #0 DM8750:#1         ; _消耗品2現在消費%
MOV.D #0 DM8740:#2       ; _消耗品2現在値
MPP
AND>=.D DM8740:#2 #0     ; _消耗品2現在値
NCJ #1004
;'消耗品割合(%) = (現在値 / 最大値) * 100
;
;KtoV_CSM_Per[1] = (FLOAT(KtoV_CSM_Val[1])/FLOAT(VtoK_CSM_Max[1])) * 100
LD CR2002                ; 常時ON
LDA.D DM8720:#2          ; _消耗品2最大値
CON
FLOAT.D
CON
STA.F @VM2
CON
LDA.D DM8740:#2          ; _消耗品2現在値
CON
FLOAT.D
CON
DIV.F @VM2
CON
MUL.F +100
CON
INTG
CON
STA DM8750:#1            ; _消耗品2現在消費%
LABEL #1004
;
LD R59300:#1             ; _消耗品2使用有無
AND<>.D DM8720:#2 #0     ; _消耗品2最大値
MPS
AND> DM8750:#1 DM8730:#1 ; _消耗品2現在消費%  _消耗品2ｲﾝｼﾞｹﾞｰﾀ黄色開始%
MOV #0 DM8755:#1         ; _消耗品2ｲﾝｼﾞｹﾞｰﾀ切替色
MRD
LD<= DM8750:#1 DM8730:#1 ; _消耗品2現在消費%  _消耗品2ｲﾝｼﾞｹﾞｰﾀ黄色開始%
AND> DM8750:#1 DM8735:#1 ; _消耗品2現在消費%  _消耗品2ｲﾝｼﾞｹﾞｰﾀ赤色開始%
ANL
MOV #1 DM8755:#1         ; _消耗品2ｲﾝｼﾞｹﾞｰﾀ切替色
MPP
AND<= DM8750:#1 DM8735:#1; _消耗品2現在消費%  _消耗品2ｲﾝｼﾞｹﾞｰﾀ赤色開始%
MOV #2 DM8755:#1         ; _消耗品2ｲﾝｼﾞｹﾞｰﾀ切替色
;消耗品情報3
LDB R59300:#2            ; _消耗品3使用有無
LD R59300:#2             ; _消耗品3使用有無
AND=.D DM8720:#4 #0      ; _消耗品3最大値
ORL
MOV #100 DM8750:#2       ; _消耗品3現在消費%
MOV.D #0 DM8740:#4       ; _消耗品3現在値
MOV #0 DM8755:#2         ; _消耗品3ｲﾝｼﾞｹﾞｰﾀ切替色
;'消耗品割合(%) = (現在値 / 最大値) * 100
;
;KtoV_CSM_Per[2] = (FLOAT(KtoV_CSM_Val[2])/FLOAT(VtoK_CSM_Max[2])) * 100
LD R59300:#2             ; _消耗品3使用有無
AND<>.D DM8720:#4 #0     ; _消耗品3最大値
MPS
AND>.D DM8720:#4 DM9038  ; _消耗品3最大値  _消耗品3ｶｳﾝﾀ
LDA.D DM8720:#4          ; _消耗品3最大値
CON
SUB.D DM9038             ; _消耗品3ｶｳﾝﾀ
CON
STA.D DM8740:#4          ; _消耗品3現在値
MRD
AND< DM8720:#4 DM9038    ; _消耗品3最大値  _消耗品3ｶｳﾝﾀ
MOV #0 DM8750:#2         ; _消耗品3現在消費%
MOV.D #0 DM8740:#4       ; _消耗品3現在値
MPP
AND>=.D DM8740:#4 #0     ; _消耗品3現在値
NCJ #1005
;'消耗品割合(%) = (現在値 / 最大値) * 100
;
;KtoV_CSM_Per[2] = (FLOAT(KtoV_CSM_Val[2])/FLOAT(VtoK_CSM_Max[2])) * 100
LD CR2002                ; 常時ON
LDA.D DM8720:#4          ; _消耗品3最大値
CON
FLOAT.D
CON
STA.F @VM4
CON
LDA.D DM8740:#4          ; _消耗品3現在値
CON
FLOAT.D
CON
DIV.F @VM4
CON
MUL.F +100
CON
INTG
CON
STA DM8750:#2            ; _消耗品3現在消費%
LABEL #1005
;
LD R59300:#2             ; _消耗品3使用有無
AND<>.D DM8720:#4 #0     ; _消耗品3最大値
MPS
AND> DM8750:#2 DM8730:#2 ; _消耗品3現在消費%  _消耗品3ｲﾝｼﾞｹﾞｰﾀ黄色開始%
MOV #0 DM8755:#2         ; _消耗品3ｲﾝｼﾞｹﾞｰﾀ切替色
MRD
LD<= DM8750:#2 DM8730:#2 ; _消耗品3現在消費%  _消耗品3ｲﾝｼﾞｹﾞｰﾀ黄色開始%
AND> DM8750:#2 DM8735:#2 ; _消耗品3現在消費%  _消耗品3ｲﾝｼﾞｹﾞｰﾀ赤色開始%
ANL
MOV #1 DM8755:#2         ; _消耗品3ｲﾝｼﾞｹﾞｰﾀ切替色
MPP
AND<= DM8750:#2 DM8735:#2; _消耗品3現在消費%  _消耗品3ｲﾝｼﾞｹﾞｰﾀ赤色開始%
MOV #2 DM8755:#2         ; _消耗品3ｲﾝｼﾞｹﾞｰﾀ切替色
;消耗品情報4
LDB R59300:#3            ; _消耗品4使用有無
LD R59300:#3             ; _消耗品4使用有無
AND=.D DM8720:#6 #0      ; _消耗品4最大値
ORL
MOV #100 DM8750:#3       ; _消耗品4現在消費%
MOV.D #0 DM8740:#6       ; _消耗品4現在値
MOV #0 DM8755:#3         ; _消耗品4ｲﾝｼﾞｹﾞｰﾀ切替色
;'消耗品割合(%) = (現在値 / 最大値) * 100
;
;KtoV_CSM_Per[3] = (FLOAT(KtoV_CSM_Val[3])/FLOAT(VtoK_CSM_Max[3])) * 100
LD R59300:#3             ; _消耗品4使用有無
AND<>.D DM8720:#6 #0     ; _消耗品4最大値
MPS
AND>.D DM8720:#6 DM9040  ; _消耗品4最大値  _消耗品4ｶｳﾝﾀ
LDA.D DM8720:#6          ; _消耗品4最大値
CON
SUB.D DM9040             ; _消耗品4ｶｳﾝﾀ
CON
STA.D DM8740:#6          ; _消耗品4現在値
MRD
AND<.D DM8720:#6 DM9040  ; _消耗品4最大値  _消耗品4ｶｳﾝﾀ
MOV #0 DM8750:#3         ; _消耗品4現在消費%
MOV.D #0 DM8740:#6       ; _消耗品4現在値
MPP
AND>=.D DM8740:#6 #0     ; _消耗品4現在値
NCJ #1006
;'消耗品割合(%) = (現在値 / 最大値) * 100
;
;KtoV_CSM_Per[3] = (FLOAT(KtoV_CSM_Val[3])/FLOAT(VtoK_CSM_Max[3])) * 100
LD CR2002                ; 常時ON
LDA.D DM8720:#6          ; _消耗品4最大値
CON
FLOAT.D
CON
STA.F @VM6
CON
LDA.D DM8740:#6          ; _消耗品4現在値
CON
FLOAT.D
CON
DIV.F @VM6
CON
MUL.F +100
CON
INTG
CON
STA DM8750:#3            ; _消耗品4現在消費%
LABEL #1006
;
LD R59300:#3             ; _消耗品4使用有無
AND<>.D DM8720:#6 #0     ; _消耗品4最大値
MPS
AND> DM8750:#3 DM8730:#3 ; _消耗品4現在消費%  _消耗品4ｲﾝｼﾞｹﾞｰﾀ黄色開始%
MOV #0 DM8755:#3         ; _消耗品4ｲﾝｼﾞｹﾞｰﾀ切替色
MRD
LD<= DM8750:#3 DM8730:#2 ; _消耗品4現在消費%  _消耗品3ｲﾝｼﾞｹﾞｰﾀ黄色開始%
AND> DM8750:#3 DM8735:#2 ; _消耗品4現在消費%  _消耗品3ｲﾝｼﾞｹﾞｰﾀ赤色開始%
ANL
MOV #1 DM8755:#3         ; _消耗品4ｲﾝｼﾞｹﾞｰﾀ切替色
MPP
AND<= DM8750:#3 DM8735:#3; _消耗品4現在消費%  _消耗品4ｲﾝｼﾞｹﾞｰﾀ赤色開始%
MOV #2 DM8755:#3         ; _消耗品4ｲﾝｼﾞｹﾞｰﾀ切替色
;消耗品情報5
LDB R59300:#4            ; _消耗品5使用有無
LD R59300:#4             ; _消耗品5使用有無
AND=.D DM8720:#8 #0      ; _消耗品5最大値
ORL
MOV #100 DM8750:#4       ; _消耗品5現在消費%
MOV.D #0 DM8740:#8       ; _消耗品5現在値
MOV #0 DM8755:#4         ; _消耗品5ｲﾝｼﾞｹﾞｰﾀ切替色
;'消耗品割合(%) = (現在値 / 最大値) * 100
;
;KtoV_CSM_Per[4] = (FLOAT(KtoV_CSM_Val[4])/FLOAT(VtoK_CSM_Max[4])) * 100
LD R59300:#4             ; _消耗品5使用有無
AND<>.D DM8720:#8 #0     ; _消耗品5最大値
MPS
AND>.D DM8720:#8 DM9042  ; _消耗品5最大値  _消耗品5ｶｳﾝﾀ
LDA.D DM8720:#8          ; _消耗品5最大値
CON
SUB.D DM9042             ; _消耗品5ｶｳﾝﾀ
CON
STA.D DM8740:#8          ; _消耗品5現在値
MRD
AND<.D DM8720:#8 DM9042  ; _消耗品5最大値  _消耗品5ｶｳﾝﾀ
MOV #0 DM8750:#4         ; _消耗品5現在消費%
MOV.D #0 DM8740:#8       ; _消耗品5現在値
MPP
AND>=.D DM8740:#8 #0     ; _消耗品5現在値
NCJ #1007
;'消耗品割合(%) = (現在値 / 最大値) * 100
;
;KtoV_CSM_Per[4] = (FLOAT(KtoV_CSM_Val[4])/FLOAT(VtoK_CSM_Max[4])) * 100
LD CR2002                ; 常時ON
LDA.D DM8720:#8          ; _消耗品5最大値
CON
FLOAT.D
CON
STA.F @VM8
CON
LDA.D DM8740:#8          ; _消耗品5現在値
CON
FLOAT.D
CON
DIV.F @VM8
CON
MUL.F +100
CON
INTG
CON
STA DM8750:#4            ; _消耗品5現在消費%
LABEL #1007
;
LD R59300:#4             ; _消耗品5使用有無
AND<>.D DM8720:#8 #0     ; _消耗品5最大値
MPS
AND> DM8750:#4 DM8730:#4 ; _消耗品5現在消費%  _消耗品5ｲﾝｼﾞｹﾞｰﾀ黄色開始%
MOV #0 DM8755:#4         ; _消耗品5ｲﾝｼﾞｹﾞｰﾀ切替色
MRD
LD<= DM8750:#4 DM8730:#4 ; _消耗品5現在消費%  _消耗品5ｲﾝｼﾞｹﾞｰﾀ黄色開始%
AND> DM8750:#4 DM8735:#4 ; _消耗品5現在消費%  _消耗品5ｲﾝｼﾞｹﾞｰﾀ赤色開始%
ANL
MOV #1 DM8755:#4         ; _消耗品5ｲﾝｼﾞｹﾞｰﾀ切替色
MPP
AND<= DM8750:#4 DM8735:#4; _消耗品5現在消費%  _消耗品5ｲﾝｼﾞｹﾞｰﾀ赤色開始%
MOV #2 DM8755:#4         ; _消耗品5ｲﾝｼﾞｹﾞｰﾀ切替色
;演算結果ﾕｰｻﾞｰﾃﾞﾊﾞｲｽ格納
LD CR2002                ; 常時ON
MOV.D DM8740 DM9044      ; _消耗品1現在値  _消耗品1残量
MOV.D DM8750 DM9054      ; _消耗品1現在消費%  _消耗品1残量割合
MOV DM8755 DM9059        ; _消耗品1ｲﾝｼﾞｹﾞｰﾀ切替色  _消耗品1現在ｲﾝｼﾞｹﾞｰﾀ
MOV.D DM8740:#2 DM9046   ; _消耗品2現在値  _消耗品2残量
MOV.D DM8750:#1 DM9055   ; _消耗品2現在消費%  _消耗品2残量割合
MOV.D DM8755:#1 DM9060   ; _消耗品2ｲﾝｼﾞｹﾞｰﾀ切替色  _消耗品2現在ｲﾝｼﾞｹﾞｰﾀ
MOV.D DM8740:#4 DM9048   ; _消耗品3現在値  _消耗品3残量
MOV.D DM8750:#2 DM9056   ; _消耗品3現在消費%  _消耗品3残量割合
MOV.D DM8755:#2 DM9061   ; _消耗品3ｲﾝｼﾞｹﾞｰﾀ切替色  _消耗品3現在ｲﾝｼﾞｹﾞｰﾀ
MOV.D DM8740:#6 DM9050   ; _消耗品4現在値  _消耗品4残量
MOV.D DM8750:#3 DM9057   ; _消耗品4現在消費%  _消耗品4残量割合
MOV.D DM8755:#3 DM9061   ; _消耗品4ｲﾝｼﾞｹﾞｰﾀ切替色  _消耗品3現在ｲﾝｼﾞｹﾞｰﾀ
MOV.D DM8740:#8 DM9052   ; _消耗品5現在値  _消耗品5残量
MOV.D DM8750:#4 DM9058   ; _消耗品5現在消費%  _消耗品5残量割合
MOV.D DM8755:#4 DM9063   ; _消耗品5ｲﾝｼﾞｹﾞｰﾀ切替色  _消耗品5現在ｲﾝｼﾞｹﾞｰﾀ
;<h1/>Elapsed Time Infomation/経過情報
;経過情報1
;経過時間ﾘｾｯﾄ
;・記録開始した現在秒を記憶(秒形式、YY/MM/DD/HH/MM/SS形式を1ﾜｰﾄﾞずつ分散)
;・経過時間監視開始
LD R59200                ; _経過情報1使用有無
LDP R52000               ; _経過情報1ﾘｾｯﾄ&ｽﾀｰﾄ
ORP R54300               ; _経過情報1ﾘｾｯﾄ要求
ANL
SEC CM700 DM9074         ; ｶﾚﾝﾀﾞﾀｲﾏ（年）  _経過情報1記録開始秒
RSEC DM9074 DM8800       ; _経過情報1記録開始秒  _経過情報1記録年
MOV.D #0 DM8770          ; _経過情報1現在経過
MOV #0 DM8780            ; _経過情報1現在経過%
MOV #0 DM8785            ; _経過情報1ｲﾝｼﾞｹﾞｰﾀ切替色
MOV.D #0 DM9094          ; _経過情報1経過年数
MOV.D #0 DM9104          ; _経過情報1経過日数
MOV.D #0 DM9114          ; _経過情報1経過時間
SET LR000                ; _経過情報1計測中
;経過時間演算
;@EM60.D = SEC(CM700)				'現在秒数取得
;@EM70.D = Elapsed_Rec1 + 3156000	'INCｻｲｸﾙ取得
;@EM80.D = @EM70.D + ((Elapsed_Year1 + 1) * 3156000)		'+1年後の秒数取得
;
;IF @EM60.D >= @EM80.D THEN		'+1年経過
;	Elapsed_Year1 = Elapsed_Year1 + 1	'演算用年数をINC
;END IF 
LD= DM9290 #0            ; _経過情報1単位
AND LR000                ; _経過情報1計測中
NCJ #1008
;@EM60.D = SEC(CM700)				'現在秒数取得
;
LD CR2002                ; 常時ON
MOV.D #0 @VM10
SEC CM700 @VM10          ; ｶﾚﾝﾀﾞﾀｲﾏ（年）
MOV.D @VM10 @EM60        ; 経過情報1　演算用
;@EM70.D = Elapsed_Rec1 + 3156000	'INCｻｲｸﾙ取得
;
LD CR2002                ; 常時ON
LDA.L DM9074             ; _経過情報1記録開始秒
CON
ADD.L +3156000
CON
STA.D @EM70              ; 経過情報1　演算用
;@EM80.D = @EM70.D + ((Elapsed_Year1 + 1) * 3156000)		'+1年後の秒数取得
;
LD CR2002                ; 常時ON
LDA.L DM9094             ; _経過情報1経過年数
CON
ADD.L +1
CON
MUL.L +3156000
CON
ADD.L @EM70              ; 経過情報1　演算用
CON
STA.D @EM80              ; 経過情報1　演算用
;IF @EM60.D >= @EM80.D THEN		'+1年経過
;
LD>=.D @EM60 @EM80       ; 経過情報1　演算用  経過情報1　演算用
NCJ #2030
;	Elapsed_Year1 = Elapsed_Year1 + 1	'演算用年数をINC
;
LD CR2002                ; 常時ON
LDA.L DM9094             ; _経過情報1経過年数
CON
ADD.L +1
CON
STA.D DM9094             ; _経過情報1経過年数
;END IF 
LABEL #2030
LABEL #1008
;
;@EM60.D = SEC(CM700)				'現在秒数取得
;@EM70.D = Elapsed_Rec1 + 84000		'INCｻｲｸﾙ取得
;@EM80.D = @EM70.D + ((Elapsed_Day1 + 1) * 84000)		'+1日後の秒数取得
;
;IF @EM60.D >= @EM80.D THEN			'+1日経過
;	Elapsed_Day1 = Elapsed_Day1 + 1		'演算用日付をINC
;END IF
LD= DM9290 #1            ; _経過情報1単位
AND LR000                ; _経過情報1計測中
NCJ #1009
;@EM60.D = SEC(CM700)				'現在秒数取得
;
LD CR2002                ; 常時ON
MOV.D #0 @VM12
SEC CM700 @VM12          ; ｶﾚﾝﾀﾞﾀｲﾏ（年）
MOV.D @VM12 @EM60        ; 経過情報1　演算用
;@EM70.D = Elapsed_Rec1 + 84000		'INCｻｲｸﾙ取得
;
LD CR2002                ; 常時ON
LDA.L DM9074             ; _経過情報1記録開始秒
CON
ADD.L +84000
CON
STA.D @EM70              ; 経過情報1　演算用
;@EM80.D = @EM70.D + ((Elapsed_Day1 + 1) * 84000)		'+1日後の秒数取得
;
LD CR2002                ; 常時ON
LDA.L DM9104             ; _経過情報1経過日数
CON
ADD.L +1
CON
MUL.L +84000
CON
ADD.L @EM70              ; 経過情報1　演算用
CON
STA.D @EM80              ; 経過情報1　演算用
;IF @EM60.D >= @EM80.D THEN			'+1日経過
;
LD>=.D @EM60 @EM80       ; 経過情報1　演算用  経過情報1　演算用
NCJ #2031
;	Elapsed_Day1 = Elapsed_Day1 + 1		'演算用日付をINC
;
LD CR2002                ; 常時ON
LDA.L DM9104             ; _経過情報1経過日数
CON
ADD.L +1
CON
STA.D DM9104             ; _経過情報1経過日数
;END IF
LABEL #2031
LABEL #1009
;
;@EM60.D = SEC(CM700)				'現在秒数取得
;@EM70.D = Elapsed_Rec1 + 3600		'INCｻｲｸﾙ取得
;@EM80.D = @EM70.D + ((Elapsed_Hour1 + 1) * 3600)		'+1時間後の秒数取得
;
;IF @EM60.D >= @EM80.D THEN		'+1時間経過
;	Elapsed_Hour1 = Elapsed_Hour1 + 1	'演算用時間をINC
;END IF
LD= DM9290 #2            ; _経過情報1単位
AND LR000                ; _経過情報1計測中
NCJ #1010
;@EM60.D = SEC(CM700)				'現在秒数取得
;
LD CR2002                ; 常時ON
MOV.D #0 @VM14
SEC CM700 @VM14          ; ｶﾚﾝﾀﾞﾀｲﾏ（年）
MOV.D @VM14 @EM60        ; 経過情報1　演算用
;@EM70.D = Elapsed_Rec1 + 3600		'INCｻｲｸﾙ取得
;
LD CR2002                ; 常時ON
LDA.L DM9074             ; _経過情報1記録開始秒
CON
ADD.L +3600
CON
STA.D @EM70              ; 経過情報1　演算用
;@EM80.D = @EM70.D + ((Elapsed_Hour1 + 1) * 3600)		'+1時間後の秒数取得
;
LD CR2002                ; 常時ON
LDA.L DM9114             ; _経過情報1経過時間
CON
ADD.L +1
CON
MUL.L +3600
CON
ADD.L @EM70              ; 経過情報1　演算用
CON
STA.D @EM80              ; 経過情報1　演算用
;IF @EM60.D >= @EM80.D THEN		'+1時間経過
;
LD>=.D @EM60 @EM80       ; 経過情報1　演算用  経過情報1　演算用
NCJ #2032
;	Elapsed_Hour1 = Elapsed_Hour1 + 1	'演算用時間をINC
;
LD CR2002                ; 常時ON
LDA.L DM9114             ; _経過情報1経過時間
CON
ADD.L +1
CON
STA.D DM9114             ; _経過情報1経過時間
;END IF
LABEL #2032
LABEL #1010
;
;'経過割合(%) = (現在値 / 最大値) * 100
;
;KtoV_ELP_Per[0] = (FLOAT(KtoV_ELP_Val[0])/FLOAT(VtoK_ELP_Max[0])) * 100
LD LR000                 ; _経過情報1計測中
MPS
AND= DM9290 #0           ; _経過情報1単位
MOV.D DM9094 DM8770      ; _経過情報1経過年数  _経過情報1現在経過
MRD
AND= DM9290 #1           ; _経過情報1単位
MOV.D DM9104 DM8770      ; _経過情報1経過日数  _経過情報1現在経過
MRD
AND= DM9290 #2           ; _経過情報1単位
MOV.D DM9114 DM8770      ; _経過情報1経過時間  _経過情報1現在経過
MRD
MOV.D DM8770 DM9064      ; _経過情報1現在経過  _経過情報1経過時間
MPP
NCJ #1011
;'経過割合(%) = (現在値 / 最大値) * 100
;
;KtoV_ELP_Per[0] = (FLOAT(KtoV_ELP_Val[0])/FLOAT(VtoK_ELP_Max[0])) * 100
LD CR2002                ; 常時ON
LDA.D DM8760             ; _経過情報1最大値
CON
FLOAT.D
CON
STA.F @VM16
CON
LDA.D DM8770             ; _経過情報1現在経過
CON
FLOAT.D
CON
DIV.F @VM16
CON
MUL.F +100
CON
INTG
CON
STA DM8780               ; _経過情報1現在経過%
LABEL #1011
;
;経過情報ｲﾝｼﾞｹﾞｰﾀ
;・現在%がｲﾝｼﾞｹﾞｰﾀ黄色%以下→ｲﾝｼﾞｹﾞｰﾀ青
;・現在%がｲﾝｼﾞｹﾞｰﾀ黄色%以上、赤色%未満→ｲﾝｼﾞｹﾞｰﾀ黄
;・現在%がｲﾝｼﾞｹﾞｰﾀ赤色%以上→ｲﾝｼﾞｹﾞｰﾀ赤
LDB R59200               ; _経過情報1使用有無
MOV #0 DM8785            ; _経過情報1ｲﾝｼﾞｹﾞｰﾀ切替色
LD R59200                ; _経過情報1使用有無
MPS
AND=.D DM8760 #0         ; _経過情報1最大値
MOV #0 DM8785            ; _経過情報1ｲﾝｼﾞｹﾞｰﾀ切替色
MPP
AND<>.D DM8760 #0        ; _経過情報1最大値
MPS
AND<.D DM8770 DM8830     ; _経過情報1現在経過  _経過情報1ｲﾝｼﾞｹﾞｰﾀ黄色開始
MOV #0 DM8785            ; _経過情報1ｲﾝｼﾞｹﾞｰﾀ切替色
MRD
LD>=.D DM8770 DM8830     ; _経過情報1現在経過  _経過情報1ｲﾝｼﾞｹﾞｰﾀ黄色開始
AND<.D DM8770 DM8840     ; _経過情報1現在経過  _経過情報1ｲﾝｼﾞｹﾞｰﾀ赤色開始
ANL
MOV #1 DM8785            ; _経過情報1ｲﾝｼﾞｹﾞｰﾀ切替色
MPP
AND>=.D DM8770 DM8840    ; _経過情報1現在経過  _経過情報1ｲﾝｼﾞｹﾞｰﾀ赤色開始
MOV #2 DM8785            ; _経過情報1ｲﾝｼﾞｹﾞｰﾀ切替色
;経過情報2
LD R59200:#1             ; _経過情報2使用有無
LDP R52001               ; _経過情報2ﾘｾｯﾄ&ｽﾀｰﾄ
ORP R54301               ; _経過情報2ﾘｾｯﾄ要求
ANL
SEC CM700 DM9076         ; ｶﾚﾝﾀﾞﾀｲﾏ（年）  _経過情報2記録開始秒
RSEC DM9076 DM8806       ; _経過情報2記録開始秒  _経過情報2記録年
MOV.D #0 DM8770:#2       ; _経過情報2現在経過
MOV #0 DM8780:#1         ; _経過情報2現在経過%
MOV #0 DM8785:#1         ; _経過情報2ｲﾝｼﾞｹﾞｰﾀ切替色
MOV.D #0 DM9096          ; _経過情報2経過年数
MOV.D #0 DM9106          ; _経過情報2経過日数
MOV.D #0 DM9116          ; _経過情報2経過時間
SET LR000:#1             ; _経過情報2計測中
;@EM62.D = SEC(CM700)
;@EM72.D = Elapsed_Rec2 + 3156000	'年→秒換算
;
;@EM82.D = @EM72.D + ((Elapsed_Year2 + 1) * 3156000)
;'記録年月より+1年経過
;IF @EM62.D >= @EM82.D THEN
;	Elapsed_Year2 = Elapsed_Year2 + 1	'演算用年数をINC
;END IF 
LD= DM9290:#1 #0         ; _経過情報2単位
AND LR000:#1             ; _経過情報2計測中
NCJ #1012
;@EM62.D = SEC(CM700)
;
LD CR2002                ; 常時ON
MOV.D #0 @VM18
SEC CM700 @VM18          ; ｶﾚﾝﾀﾞﾀｲﾏ（年）
MOV.D @VM18 @EM62        ; 経過情報2　演算用
;@EM72.D = Elapsed_Rec2 + 3156000	'年→秒換算
;
LD CR2002                ; 常時ON
LDA.L DM9076             ; _経過情報2記録開始秒
CON
ADD.L +3156000
CON
STA.D @EM72              ; 経過情報2　演算用
;@EM82.D = @EM72.D + ((Elapsed_Year2 + 1) * 3156000)
;
LD CR2002                ; 常時ON
LDA.L DM9096             ; _経過情報2経過年数
CON
ADD.L +1
CON
MUL.L +3156000
CON
ADD.L @EM72              ; 経過情報2　演算用
CON
STA.D @EM82              ; 経過情報2　演算用
;'記録年月より+1年経過
;
;IF @EM62.D >= @EM82.D THEN
;
LD>=.D @EM62 @EM82       ; 経過情報2　演算用  経過情報2　演算用
NCJ #2033
;	Elapsed_Year2 = Elapsed_Year2 + 1	'演算用年数をINC
;
LD CR2002                ; 常時ON
LDA.L DM9096             ; _経過情報2経過年数
CON
ADD.L +1
CON
STA.D DM9096             ; _経過情報2経過年数
;END IF 
LABEL #2033
LABEL #1012
;
;@EM62.D = SEC(CM700)
;@EM72.D = Elapsed_Rec2 + 84000		'日→秒換算
; 
;@EM82.D = @EM72.D + ((Elapsed_Day2 + 1) * 84000)
;'記録年月より+1日経過
;IF @EM62.D >= @EM82.D THEN
;	Elapsed_Day2 = Elapsed_Day2 + 1		'演算用日付をINC
;END IF
LD= DM9290:#1 #1         ; _経過情報2単位
AND LR000:#1             ; _経過情報2計測中
NCJ #1013
;@EM62.D = SEC(CM700)
;
LD CR2002                ; 常時ON
MOV.D #0 @VM20
SEC CM700 @VM20          ; ｶﾚﾝﾀﾞﾀｲﾏ（年）
MOV.D @VM20 @EM62        ; 経過情報2　演算用
;@EM72.D = Elapsed_Rec2 + 84000		'日→秒換算
;
LD CR2002                ; 常時ON
LDA.L DM9076             ; _経過情報2記録開始秒
CON
ADD.L +84000
CON
STA.D @EM72              ; 経過情報2　演算用
;@EM82.D = @EM72.D + ((Elapsed_Day2 + 1) * 84000)
;
LD CR2002                ; 常時ON
LDA.L DM9106             ; _経過情報2経過日数
CON
ADD.L +1
CON
MUL.L +84000
CON
ADD.L @EM72              ; 経過情報2　演算用
CON
STA.D @EM82              ; 経過情報2　演算用
;'記録年月より+1日経過
;
;IF @EM62.D >= @EM82.D THEN
;
LD>=.D @EM62 @EM82       ; 経過情報2　演算用  経過情報2　演算用
NCJ #2034
;	Elapsed_Day2 = Elapsed_Day2 + 1		'演算用日付をINC
;
LD CR2002                ; 常時ON
LDA.L DM9106             ; _経過情報2経過日数
CON
ADD.L +1
CON
STA.D DM9106             ; _経過情報2経過日数
;END IF
LABEL #2034
LABEL #1013
;
;@EM62.D = SEC(CM700)
;@EM72.D = Elapsed_Rec2 + 3600		'時→秒換算
; 
;@EM82.D = @EM72.D + ((Elapsed_Hour2 + 1) * 3600)
;'記録年月より+1時間経過
;IF @EM62.D >= @EM82.D THEN
;	Elapsed_Hour2 = Elapsed_Hour2 + 1	'演算用時間をINC
;END IF
LD= DM9290:#1 #2         ; _経過情報2単位
AND LR000:#1             ; _経過情報2計測中
NCJ #1014
;@EM62.D = SEC(CM700)
;
LD CR2002                ; 常時ON
MOV.D #0 @VM22
SEC CM700 @VM22          ; ｶﾚﾝﾀﾞﾀｲﾏ（年）
MOV.D @VM22 @EM62        ; 経過情報2　演算用
;@EM72.D = Elapsed_Rec2 + 3600		'時→秒換算
;
LD CR2002                ; 常時ON
LDA.L DM9076             ; _経過情報2記録開始秒
CON
ADD.L +3600
CON
STA.D @EM72              ; 経過情報2　演算用
;@EM82.D = @EM72.D + ((Elapsed_Hour2 + 1) * 3600)
;
LD CR2002                ; 常時ON
LDA.L DM9116             ; _経過情報2経過時間
CON
ADD.L +1
CON
MUL.L +3600
CON
ADD.L @EM72              ; 経過情報2　演算用
CON
STA.D @EM82              ; 経過情報2　演算用
;'記録年月より+1時間経過
;
;IF @EM62.D >= @EM82.D THEN
;
LD>=.D @EM62 @EM82       ; 経過情報2　演算用  経過情報2　演算用
NCJ #2035
;	Elapsed_Hour2 = Elapsed_Hour2 + 1	'演算用時間をINC
;
LD CR2002                ; 常時ON
LDA.L DM9116             ; _経過情報2経過時間
CON
ADD.L +1
CON
STA.D DM9116             ; _経過情報2経過時間
;END IF
LABEL #2035
LABEL #1014
;
;'経過割合(%) = (現在値 / 最大値) * 100
;
;KtoV_ELP_Per[1] = (FLOAT(KtoV_ELP_Val[1])/FLOAT(VtoK_ELP_Max[1])) * 100
LD LR000:#1              ; _経過情報2計測中
MPS
AND= DM9290:#1 #0        ; _経過情報2単位
MOV.D DM9096 DM8770:#2   ; _経過情報2経過年数  _経過情報2現在経過
MRD
AND= DM9290:#1 #1        ; _経過情報2単位
MOV.D DM9106 DM8770:#2   ; _経過情報2経過日数  _経過情報2現在経過
MRD
AND= DM9290:#1 #2        ; _経過情報2単位
MOV.D DM9116 DM8770:#2   ; _経過情報2経過時間  _経過情報2現在経過
MRD
MOV.D DM8770:#2 DM9066   ; _経過情報2現在経過  _経過情報2経過時間
MPP
NCJ #1015
;'経過割合(%) = (現在値 / 最大値) * 100
;
;KtoV_ELP_Per[1] = (FLOAT(KtoV_ELP_Val[1])/FLOAT(VtoK_ELP_Max[1])) * 100
LD CR2002                ; 常時ON
LDA.D DM8760:#2          ; _経過情報2最大値
CON
FLOAT.D
CON
STA.F @VM24
CON
LDA.D DM8770:#2          ; _経過情報2現在経過
CON
FLOAT.D
CON
DIV.F @VM24
CON
MUL.F +100
CON
INTG
CON
STA DM8780:#1            ; _経過情報2現在経過%
LABEL #1015
;
LDB R59200:#1            ; _経過情報2使用有無
MOV #0 DM8785:#1         ; _経過情報2ｲﾝｼﾞｹﾞｰﾀ切替色
LD R59200:#1             ; _経過情報2使用有無
MPS
AND=.D DM8760:#2 #0      ; _経過情報2最大値
MOV #0 DM8785:#1         ; _経過情報2ｲﾝｼﾞｹﾞｰﾀ切替色
MPP
AND<>.D DM8760:#2 #0     ; _経過情報2最大値
MPS
AND<.D DM8770:#2 DM8830:#2;_経過情報2現在経過  _経過情報2ｲﾝｼﾞｹﾞｰﾀ黄色開始
MOV #0 DM8785:#1         ; _経過情報2ｲﾝｼﾞｹﾞｰﾀ切替色
MRD
LD>=.D DM8770:#2 DM8830:#2;_経過情報2現在経過  _経過情報2ｲﾝｼﾞｹﾞｰﾀ黄色開始
AND<.D DM8770:#2 DM8840:#2;_経過情報2現在経過  _経過情報2ｲﾝｼﾞｹﾞｰﾀ赤色開始
ANL
MOV #1 DM8785:#1         ; _経過情報2ｲﾝｼﾞｹﾞｰﾀ切替色
MPP
AND>=.D DM8770:#2 DM8840:#2;_経過情報2現在経過  _経過情報2ｲﾝｼﾞｹﾞｰﾀ赤色開始
MOV #2 DM8785:#1         ; _経過情報2ｲﾝｼﾞｹﾞｰﾀ切替色
;経過情報3
LD R59200:#2             ; _経過情報3使用有無
LDP R52002               ; _経過情報3ﾘｾｯﾄ&ｽﾀｰﾄ
ORP R54302               ; _経過情報3ﾘｾｯﾄ要求
ANL
SEC CM700 DM9078         ; ｶﾚﾝﾀﾞﾀｲﾏ（年）  _経過情報3記録開始秒
RSEC DM9078 DM8812       ; _経過情報3記録開始秒  _経過情報3記録年
MOV.D #0 DM8770:#4       ; _経過情報3現在経過
MOV #0 DM8780:#2         ; _経過情報3現在経過%
MOV #0 DM8785:#2         ; _経過情報3ｲﾝｼﾞｹﾞｰﾀ切替色
MOV.D #0 DM9098          ; _経過情報3経過年数
MOV.D #0 DM9108          ; _経過情報3経過日数
MOV.D #0 DM9118          ; _経過情報3経過時間
SET LR000:#2             ; _経過情報3計測中
;@EM64.D = SEC(CM700)
;@EM74.D = Elapsed_Rec3 + 3156000	'年→秒換算
;
;@EM84.D = @EM74.D + ((Elapsed_Year3 + 1) * 3156000)
;'記録年月より+1年経過
;IF @EM64.D >= @EM84.D THEN
;	Elapsed_Year3 = Elapsed_Year3 + 1	'演算用年数をINC
;END IF 
LD= DM9290:#2 #0         ; _経過情報3単位
AND LR000:#2             ; _経過情報3計測中
NCJ #1016
;@EM64.D = SEC(CM700)
;
LD CR2002                ; 常時ON
MOV.D #0 @VM26
SEC CM700 @VM26          ; ｶﾚﾝﾀﾞﾀｲﾏ（年）
MOV.D @VM26 @EM64        ; 経過情報3　演算用
;@EM74.D = Elapsed_Rec3 + 3156000	'年→秒換算
;
LD CR2002                ; 常時ON
LDA.L DM9078             ; _経過情報3記録開始秒
CON
ADD.L +3156000
CON
STA.D @EM74              ; 経過情報3　演算用
;@EM84.D = @EM74.D + ((Elapsed_Year3 + 1) * 3156000)
;
LD CR2002                ; 常時ON
LDA.L DM9098             ; _経過情報3経過年数
CON
ADD.L +1
CON
MUL.L +3156000
CON
ADD.L @EM74              ; 経過情報3　演算用
CON
STA.D @EM84              ; 経過情報3　演算用
;'記録年月より+1年経過
;
;IF @EM64.D >= @EM84.D THEN
;
LD>=.D @EM64 @EM84       ; 経過情報3　演算用  経過情報3　演算用
NCJ #2036
;	Elapsed_Year3 = Elapsed_Year3 + 1	'演算用年数をINC
;
LD CR2002                ; 常時ON
LDA.L DM9098             ; _経過情報3経過年数
CON
ADD.L +1
CON
STA.D DM9098             ; _経過情報3経過年数
;END IF 
LABEL #2036
LABEL #1016
;
;@EM64.D = SEC(CM700)
;@EM74.D = Elapsed_Rec3 + 84000		'日→秒換算
; 
;@EM84.D = @EM74.D + ((Elapsed_Day3 + 1) * 84000)
;'記録年月より+1日経過
;IF @EM64.D >= @EM84.D THEN
;	Elapsed_Day3 = Elapsed_Day3 + 1		'演算用日付をINC
;END IF
LD= DM9290:#2 #1         ; _経過情報3単位
AND LR000:#2             ; _経過情報3計測中
NCJ #1017
;@EM64.D = SEC(CM700)
;
LD CR2002                ; 常時ON
MOV.D #0 @VM28
SEC CM700 @VM28          ; ｶﾚﾝﾀﾞﾀｲﾏ（年）
MOV.D @VM28 @EM64        ; 経過情報3　演算用
;@EM74.D = Elapsed_Rec3 + 84000		'日→秒換算
;
LD CR2002                ; 常時ON
LDA.L DM9078             ; _経過情報3記録開始秒
CON
ADD.L +84000
CON
STA.D @EM74              ; 経過情報3　演算用
;@EM84.D = @EM74.D + ((Elapsed_Day3 + 1) * 84000)
;
LD CR2002                ; 常時ON
LDA.L DM9108             ; _経過情報3経過日数
CON
ADD.L +1
CON
MUL.L +84000
CON
ADD.L @EM74              ; 経過情報3　演算用
CON
STA.D @EM84              ; 経過情報3　演算用
;'記録年月より+1日経過
;
;IF @EM64.D >= @EM84.D THEN
;
LD>=.D @EM64 @EM84       ; 経過情報3　演算用  経過情報3　演算用
NCJ #2037
;	Elapsed_Day3 = Elapsed_Day3 + 1		'演算用日付をINC
;
LD CR2002                ; 常時ON
LDA.L DM9108             ; _経過情報3経過日数
CON
ADD.L +1
CON
STA.D DM9108             ; _経過情報3経過日数
;END IF
LABEL #2037
LABEL #1017
;
;@EM64.D = SEC(CM700)
;@EM74.D = Elapsed_Rec3 + 3600		'時→秒換算
; 
;@EM84.D = @EM74.D + ((Elapsed_Hour3 + 1) * 3600)
;'記録年月より+1時間経過
;IF @EM64.D >= @EM84.D THEN
;	Elapsed_Hour3 = Elapsed_Hour3 + 1	'演算用時間をINC
;END IF
LD= DM9290:#2 #2         ; _経過情報3単位
AND LR000:#2             ; _経過情報3計測中
NCJ #1018
;@EM64.D = SEC(CM700)
;
LD CR2002                ; 常時ON
MOV.D #0 @VM30
SEC CM700 @VM30          ; ｶﾚﾝﾀﾞﾀｲﾏ（年）
MOV.D @VM30 @EM64        ; 経過情報3　演算用
;@EM74.D = Elapsed_Rec3 + 3600		'時→秒換算
;
LD CR2002                ; 常時ON
LDA.L DM9078             ; _経過情報3記録開始秒
CON
ADD.L +3600
CON
STA.D @EM74              ; 経過情報3　演算用
;@EM84.D = @EM74.D + ((Elapsed_Hour3 + 1) * 3600)
;
LD CR2002                ; 常時ON
LDA.L DM9118             ; _経過情報3経過時間
CON
ADD.L +1
CON
MUL.L +3600
CON
ADD.L @EM74              ; 経過情報3　演算用
CON
STA.D @EM84              ; 経過情報3　演算用
;'記録年月より+1時間経過
;
;IF @EM64.D >= @EM84.D THEN
;
LD>=.D @EM64 @EM84       ; 経過情報3　演算用  経過情報3　演算用
NCJ #2038
;	Elapsed_Hour3 = Elapsed_Hour3 + 1	'演算用時間をINC
;
LD CR2002                ; 常時ON
LDA.L DM9118             ; _経過情報3経過時間
CON
ADD.L +1
CON
STA.D DM9118             ; _経過情報3経過時間
;END IF
LABEL #2038
LABEL #1018
;
;'経過割合(%) = (現在値 / 最大値) * 100
;
;KtoV_ELP_Per[2] = (FLOAT(KtoV_ELP_Val[2])/FLOAT(VtoK_ELP_Max[2])) * 100
LD LR000:#2              ; _経過情報3計測中
MPS
AND= DM9290:#2 #0        ; _経過情報3単位
MOV.D DM9098 DM8770:#4   ; _経過情報3経過年数  _経過情報3現在経過
MRD
AND= DM9290:#2 #1        ; _経過情報3単位
MOV.D DM9108 DM8770:#4   ; _経過情報3経過日数  _経過情報3現在経過
MRD
AND= DM9290:#2 #2        ; _経過情報3単位
MOV.D DM9118 DM8770:#4   ; _経過情報3経過時間  _経過情報3現在経過
MRD
MOV.D DM8770:#4 DM9068   ; _経過情報3現在経過  _経過情報3経過時間
MPP
NCJ #1019
;'経過割合(%) = (現在値 / 最大値) * 100
;
;KtoV_ELP_Per[2] = (FLOAT(KtoV_ELP_Val[2])/FLOAT(VtoK_ELP_Max[2])) * 100
LD CR2002                ; 常時ON
LDA.D DM8760:#4          ; _経過情報3最大値
CON
FLOAT.D
CON
STA.F @VM32
CON
LDA.D DM8770:#4          ; _経過情報3現在経過
CON
FLOAT.D
CON
DIV.F @VM32
CON
MUL.F +100
CON
INTG
CON
STA DM8780:#2            ; _経過情報3現在経過%
LABEL #1019
;
LDB R59200:#2            ; _経過情報3使用有無
MOV #0 DM8785:#2         ; _経過情報3ｲﾝｼﾞｹﾞｰﾀ切替色
LD R59200:#2             ; _経過情報3使用有無
MPS
AND=.D DM8760:#4 #0      ; _経過情報3最大値
MOV #0 DM8785:#2         ; _経過情報3ｲﾝｼﾞｹﾞｰﾀ切替色
MPP
AND<>.D DM8760:#4 #0     ; _経過情報3最大値
MPS
AND<.D DM8770:#4 DM8830:#4;_経過情報3現在経過  _経過情報3ｲﾝｼﾞｹﾞｰﾀ黄色開始
MOV #0 DM8785:#2         ; _経過情報3ｲﾝｼﾞｹﾞｰﾀ切替色
MRD
LD>=.D DM8770:#4 DM8830:#4;_経過情報3現在経過  _経過情報3ｲﾝｼﾞｹﾞｰﾀ黄色開始
AND<.D DM8770:#4 DM8840:#4;_経過情報3現在経過  _経過情報3ｲﾝｼﾞｹﾞｰﾀ赤色開始
ANL
MOV #1 DM8785:#2         ; _経過情報3ｲﾝｼﾞｹﾞｰﾀ切替色
MPP
AND>=.D DM8770:#4 DM8840:#4;_経過情報3現在経過  _経過情報3ｲﾝｼﾞｹﾞｰﾀ赤色開始
MOV #2 DM8785:#2         ; _経過情報3ｲﾝｼﾞｹﾞｰﾀ切替色
;経過情報4
LD R59200:#3             ; _経過情報4使用有無
LDP R52003               ; _経過情報4ﾘｾｯﾄ&ｽﾀｰﾄ
ORP R54303               ; _経過情報4ﾘｾｯﾄ要求
ANL
SEC CM700 DM9080         ; ｶﾚﾝﾀﾞﾀｲﾏ（年）  _経過情報4記録開始秒
RSEC DM9080 DM8818       ; _経過情報4記録開始秒  _経過情報4記録年
MOV.D #0 DM8770:#6       ; _経過情報4現在経過
MOV #0 DM8780:#3         ; _経過情報4現在経過%
MOV #0 DM8785:#3         ; _経過情報4ｲﾝｼﾞｹﾞｰﾀ切替色
MOV.D #0 DM9100          ; _経過情報4経過年数
MOV.D #0 DM9110          ; _経過情報4経過日数
MOV.D #0 DM9120          ; _経過情報4経過時間
SET LR000:#3             ; _経過情報4計測中
;@EM66.D = SEC(CM700)
;@EM76.D = Elapsed_Rec4 + 3156000	'年→秒換算
;
;@EM86.D = @EM76.D + ((Elapsed_Year4 + 1) * 3156000)
;'記録年月より+1年経過
;IF @EM66.D >= @EM86.D THEN
;	Elapsed_Year4 = Elapsed_Year4 + 1	'演算用年数をINC
;END IF 
LD= DM9290:#3 #0         ; _経過情報4単位
AND LR000:#3             ; _経過情報4計測中
NCJ #1020
;@EM66.D = SEC(CM700)
;
LD CR2002                ; 常時ON
MOV.D #0 @VM34
SEC CM700 @VM34          ; ｶﾚﾝﾀﾞﾀｲﾏ（年）
MOV.D @VM34 @EM66        ; 経過情報4　演算用
;@EM76.D = Elapsed_Rec4 + 3156000	'年→秒換算
;
LD CR2002                ; 常時ON
LDA.L DM9080             ; _経過情報4記録開始秒
CON
ADD.L +3156000
CON
STA.D @EM76              ; 経過情報4　演算用
;@EM86.D = @EM76.D + ((Elapsed_Year4 + 1) * 3156000)
;
LD CR2002                ; 常時ON
LDA.L DM9100             ; _経過情報4経過年数
CON
ADD.L +1
CON
MUL.L +3156000
CON
ADD.L @EM76              ; 経過情報4　演算用
CON
STA.D @EM86              ; 経過情報4　演算用
;'記録年月より+1年経過
;
;IF @EM66.D >= @EM86.D THEN
;
LD>=.D @EM66 @EM86       ; 経過情報4　演算用  経過情報4　演算用
NCJ #2039
;	Elapsed_Year4 = Elapsed_Year4 + 1	'演算用年数をINC
;
LD CR2002                ; 常時ON
LDA.L DM9100             ; _経過情報4経過年数
CON
ADD.L +1
CON
STA.D DM9100             ; _経過情報4経過年数
;END IF 
LABEL #2039
LABEL #1020
;
;@EM66.D = SEC(CM700)
;@EM76.D = Elapsed_Rec4 + 84000		'日→秒換算
; 
;@EM86.D = @EM76.D + ((Elapsed_Day4 + 1) * 84000)
;'記録年月より+1日経過
;IF @EM66.D >= @EM86.D THEN
;	Elapsed_Day4 = Elapsed_Day4 + 1		'演算用日付をINC
;END IF
LD= DM9290:#3 #1         ; _経過情報4単位
AND LR000:#3             ; _経過情報4計測中
NCJ #1021
;@EM66.D = SEC(CM700)
;
LD CR2002                ; 常時ON
MOV.D #0 @VM36
SEC CM700 @VM36          ; ｶﾚﾝﾀﾞﾀｲﾏ（年）
MOV.D @VM36 @EM66        ; 経過情報4　演算用
;@EM76.D = Elapsed_Rec4 + 84000		'日→秒換算
;
LD CR2002                ; 常時ON
LDA.L DM9080             ; _経過情報4記録開始秒
CON
ADD.L +84000
CON
STA.D @EM76              ; 経過情報4　演算用
;@EM86.D = @EM76.D + ((Elapsed_Day4 + 1) * 84000)
;
LD CR2002                ; 常時ON
LDA.L DM9110             ; _経過情報4経過日数
CON
ADD.L +1
CON
MUL.L +84000
CON
ADD.L @EM76              ; 経過情報4　演算用
CON
STA.D @EM86              ; 経過情報4　演算用
;'記録年月より+1日経過
;
;IF @EM66.D >= @EM86.D THEN
;
LD>=.D @EM66 @EM86       ; 経過情報4　演算用  経過情報4　演算用
NCJ #2040
;	Elapsed_Day4 = Elapsed_Day4 + 1		'演算用日付をINC
;
LD CR2002                ; 常時ON
LDA.L DM9110             ; _経過情報4経過日数
CON
ADD.L +1
CON
STA.D DM9110             ; _経過情報4経過日数
;END IF
LABEL #2040
LABEL #1021
;
;@EM66.D = SEC(CM700)
;@EM76.D = Elapsed_Rec4 + 3600		'時→秒換算
; 
;@EM86.D = @EM76.D + ((Elapsed_Hour4 + 1) * 3600)
;'記録年月より+1時間経過
;IF @EM66.D >= @EM86.D THEN
;	Elapsed_Hour4 = Elapsed_Hour4 + 1	'演算用時間をINC
;END IF
LD= DM9290:#3 #2         ; _経過情報4単位
AND LR000:#3             ; _経過情報4計測中
NCJ #1022
;@EM66.D = SEC(CM700)
;
LD CR2002                ; 常時ON
MOV.D #0 @VM38
SEC CM700 @VM38          ; ｶﾚﾝﾀﾞﾀｲﾏ（年）
MOV.D @VM38 @EM66        ; 経過情報4　演算用
;@EM76.D = Elapsed_Rec4 + 3600		'時→秒換算
;
LD CR2002                ; 常時ON
LDA.L DM9080             ; _経過情報4記録開始秒
CON
ADD.L +3600
CON
STA.D @EM76              ; 経過情報4　演算用
;@EM86.D = @EM76.D + ((Elapsed_Hour4 + 1) * 3600)
;
LD CR2002                ; 常時ON
LDA.L DM9120             ; _経過情報4経過時間
CON
ADD.L +1
CON
MUL.L +3600
CON
ADD.L @EM76              ; 経過情報4　演算用
CON
STA.D @EM86              ; 経過情報4　演算用
;'記録年月より+1時間経過
;
;IF @EM66.D >= @EM86.D THEN
;
LD>=.D @EM66 @EM86       ; 経過情報4　演算用  経過情報4　演算用
NCJ #2041
;	Elapsed_Hour4 = Elapsed_Hour4 + 1	'演算用時間をINC
;
LD CR2002                ; 常時ON
LDA.L DM9120             ; _経過情報4経過時間
CON
ADD.L +1
CON
STA.D DM9120             ; _経過情報4経過時間
;END IF
LABEL #2041
LABEL #1022
;
;'経過割合(%) = (現在値 / 最大値) * 100
;
;KtoV_ELP_Per[3] = (FLOAT(KtoV_ELP_Val[3])/FLOAT(VtoK_ELP_Max[3])) * 100
LD LR000:#3              ; _経過情報4計測中
MPS
AND= DM9290:#3 #0        ; _経過情報4単位
MOV.D DM9100 DM8770:#6   ; _経過情報4経過年数  _経過情報4現在経過
MRD
AND= DM9290:#3 #1        ; _経過情報4単位
MOV.D DM9110 DM8770:#6   ; _経過情報4経過日数  _経過情報4現在経過
MRD
AND= DM9290:#3 #2        ; _経過情報4単位
MOV.D DM9120 DM8770:#6   ; _経過情報4経過時間  _経過情報4現在経過
MRD
MOV.D DM8770:#6 DM9070   ; _経過情報4現在経過  _経過情報4経過時間
MPP
NCJ #1023
;'経過割合(%) = (現在値 / 最大値) * 100
;
;KtoV_ELP_Per[3] = (FLOAT(KtoV_ELP_Val[3])/FLOAT(VtoK_ELP_Max[3])) * 100
LD CR2002                ; 常時ON
LDA.D DM8760:#6          ; _経過情報4最大値
CON
FLOAT.D
CON
STA.F @VM40
CON
LDA.D DM8770:#6          ; _経過情報4現在経過
CON
FLOAT.D
CON
DIV.F @VM40
CON
MUL.F +100
CON
INTG
CON
STA DM8780:#3            ; _経過情報4現在経過%
LABEL #1023
;
LDB R59200:#3            ; _経過情報4使用有無
MOV #0 DM8785:#3         ; _経過情報4ｲﾝｼﾞｹﾞｰﾀ切替色
LD R59200:#3             ; _経過情報4使用有無
MPS
AND=.D DM8760:#6 #0      ; _経過情報4最大値
MOV #0 DM8785:#3         ; _経過情報4ｲﾝｼﾞｹﾞｰﾀ切替色
MPP
AND<>.D DM8760:#6 #0     ; _経過情報4最大値
MPS
AND<.D DM8770:#6 DM8830:#6;_経過情報4現在経過  _経過情報4ｲﾝｼﾞｹﾞｰﾀ黄色開始
MOV #0 DM8785:#3         ; _経過情報4ｲﾝｼﾞｹﾞｰﾀ切替色
MRD
LD>=.D DM8770:#6 DM8830:#6;_経過情報4現在経過  _経過情報4ｲﾝｼﾞｹﾞｰﾀ黄色開始
AND<.D DM8770:#6 DM8840:#6;_経過情報4現在経過  _経過情報4ｲﾝｼﾞｹﾞｰﾀ赤色開始
ANL
MOV #1 DM8785:#3         ; _経過情報4ｲﾝｼﾞｹﾞｰﾀ切替色
MPP
AND>=.D DM8770:#6 DM8840:#6;_経過情報4現在経過  _経過情報4ｲﾝｼﾞｹﾞｰﾀ赤色開始
MOV #2 DM8785:#3         ; _経過情報4ｲﾝｼﾞｹﾞｰﾀ切替色
;経過情報5
LD R59200:#4             ; _経過情報5使用有無
LDP R52004               ; _経過情報5ﾘｾｯﾄ&ｽﾀｰﾄ
ORP R54304               ; _経過情報5ﾘｾｯﾄ要求
ANL
SEC CM700 DM9082         ; ｶﾚﾝﾀﾞﾀｲﾏ（年）  _経過情報5記録開始秒
RSEC DM9082 DM8824       ; _経過情報5記録開始秒  _経過情報5記録年
MOV.D #0 DM8770:#8       ; _経過情報5現在経過
MOV #0 DM8780:#4         ; _経過情報5現在経過%
MOV #0 DM8785:#4         ; _経過情報5ｲﾝｼﾞｹﾞｰﾀ切替色
MOV.D #0 DM9102          ; _経過情報5経過年数
MOV.D #0 DM9112          ; _経過情報5経過日数
MOV.D #0 DM9122          ; _経過情報5経過時間
SET LR000:#4             ; _経過情報5計測中
;@EM68.D = SEC(CM700)
;@EM78.D = Elapsed_Rec5 + 3156000	'年→秒換算
;
;@EM88.D = @EM78.D + ((Elapsed_Year5 + 1) * 3156000)
;'記録年月より+1年経過
;IF @EM68.D >= @EM88.D THEN
;	Elapsed_Year5 = Elapsed_Year5 + 1	'演算用年数をINC
;END IF 
LD= DM9290:#4 #0         ; _経過情報5単位
AND LR000:#4             ; _経過情報5計測中
NCJ #1024
;@EM68.D = SEC(CM700)
;
LD CR2002                ; 常時ON
MOV.D #0 @VM42
SEC CM700 @VM42          ; ｶﾚﾝﾀﾞﾀｲﾏ（年）
MOV.D @VM42 @EM68        ; 経過情報5　演算用
;@EM78.D = Elapsed_Rec5 + 3156000	'年→秒換算
;
LD CR2002                ; 常時ON
LDA.L DM9082             ; _経過情報5記録開始秒
CON
ADD.L +3156000
CON
STA.D @EM78              ; 経過情報5　演算用
;@EM88.D = @EM78.D + ((Elapsed_Year5 + 1) * 3156000)
;
LD CR2002                ; 常時ON
LDA.L DM9102             ; _経過情報5経過年数
CON
ADD.L +1
CON
MUL.L +3156000
CON
ADD.L @EM78              ; 経過情報5　演算用
CON
STA.D @EM88              ; 経過情報5　演算用
;'記録年月より+1年経過
;
;IF @EM68.D >= @EM88.D THEN
;
LD>=.D @EM68 @EM88       ; 経過情報5　演算用  経過情報5　演算用
NCJ #2042
;	Elapsed_Year5 = Elapsed_Year5 + 1	'演算用年数をINC
;
LD CR2002                ; 常時ON
LDA.L DM9102             ; _経過情報5経過年数
CON
ADD.L +1
CON
STA.D DM9102             ; _経過情報5経過年数
;END IF 
LABEL #2042
LABEL #1024
;
;@EM68.D = SEC(CM700)
;@EM78.D = Elapsed_Rec5 + 84000		'日→秒換算
; 
;@EM88.D = @EM78.D + ((Elapsed_Day5 + 1) * 84000)
;'記録年月より+1日経過
;IF @EM68.D >= @EM88.D THEN
;	Elapsed_Day5 = Elapsed_Day5 + 1		'演算用日付をINC
;END IF
LD= DM9290:#4 #1         ; _経過情報5単位
AND LR000:#4             ; _経過情報5計測中
NCJ #1025
;@EM68.D = SEC(CM700)
;
LD CR2002                ; 常時ON
MOV.D #0 @VM44
SEC CM700 @VM44          ; ｶﾚﾝﾀﾞﾀｲﾏ（年）
MOV.D @VM44 @EM68        ; 経過情報5　演算用
;@EM78.D = Elapsed_Rec5 + 84000		'日→秒換算
;
LD CR2002                ; 常時ON
LDA.L DM9082             ; _経過情報5記録開始秒
CON
ADD.L +84000
CON
STA.D @EM78              ; 経過情報5　演算用
;@EM88.D = @EM78.D + ((Elapsed_Day5 + 1) * 84000)
;
LD CR2002                ; 常時ON
LDA.L DM9112             ; _経過情報5経過日数
CON
ADD.L +1
CON
MUL.L +84000
CON
ADD.L @EM78              ; 経過情報5　演算用
CON
STA.D @EM88              ; 経過情報5　演算用
;'記録年月より+1日経過
;
;IF @EM68.D >= @EM88.D THEN
;
LD>=.D @EM68 @EM88       ; 経過情報5　演算用  経過情報5　演算用
NCJ #2043
;	Elapsed_Day5 = Elapsed_Day5 + 1		'演算用日付をINC
;
LD CR2002                ; 常時ON
LDA.L DM9112             ; _経過情報5経過日数
CON
ADD.L +1
CON
STA.D DM9112             ; _経過情報5経過日数
;END IF
LABEL #2043
LABEL #1025
;
;@EM68.D = SEC(CM700)
;@EM78.D = Elapsed_Rec5 + 3600		'時→秒換算
; 
;@EM88.D = @EM78.D + ((Elapsed_Hour5 + 1) * 3600)
;'記録年月より+1時間経過
;IF @EM68.D >= @EM88.D THEN
;	Elapsed_Hour5 = Elapsed_Hour5 + 1	'演算用時間をINC
;END IF
LD= DM9290:#4 #2         ; _経過情報5単位
AND LR000:#4             ; _経過情報5計測中
NCJ #1026
;@EM68.D = SEC(CM700)
;
LD CR2002                ; 常時ON
MOV.D #0 @VM46
SEC CM700 @VM46          ; ｶﾚﾝﾀﾞﾀｲﾏ（年）
MOV.D @VM46 @EM68        ; 経過情報5　演算用
;@EM78.D = Elapsed_Rec5 + 3600		'時→秒換算
;
LD CR2002                ; 常時ON
LDA.L DM9082             ; _経過情報5記録開始秒
CON
ADD.L +3600
CON
STA.D @EM78              ; 経過情報5　演算用
;@EM88.D = @EM78.D + ((Elapsed_Hour5 + 1) * 3600)
;
LD CR2002                ; 常時ON
LDA.L DM9122             ; _経過情報5経過時間
CON
ADD.L +1
CON
MUL.L +3600
CON
ADD.L @EM78              ; 経過情報5　演算用
CON
STA.D @EM88              ; 経過情報5　演算用
;'記録年月より+1時間経過
;
;IF @EM68.D >= @EM88.D THEN
;
LD>=.D @EM68 @EM88       ; 経過情報5　演算用  経過情報5　演算用
NCJ #2044
;	Elapsed_Hour5 = Elapsed_Hour5 + 1	'演算用時間をINC
;
LD CR2002                ; 常時ON
LDA.L DM9122             ; _経過情報5経過時間
CON
ADD.L +1
CON
STA.D DM9122             ; _経過情報5経過時間
;END IF
LABEL #2044
LABEL #1026
;
;'経過割合(%) = (現在値 / 最大値) * 100
;
;KtoV_ELP_Per[4] = (FLOAT(KtoV_ELP_Val[4])/FLOAT(VtoK_ELP_Max[4])) * 100
LD LR000:#4              ; _経過情報5計測中
MPS
AND= DM9290:#4 #0        ; _経過情報5単位
MOV.D DM9102 DM8770:#8   ; _経過情報5経過年数  _経過情報5現在経過
MRD
AND= DM9290:#4 #1        ; _経過情報5単位
MOV.D DM9112 DM8770:#8   ; _経過情報5経過日数  _経過情報5現在経過
MRD
AND= DM9290:#4 #2        ; _経過情報5単位
MOV.D DM9122 DM8770:#8   ; _経過情報5経過時間  _経過情報5現在経過
MRD
MOV.D DM8770:#8 DM9072   ; _経過情報5現在経過  _経過情報5経過時間
MPP
NCJ #1027
;'経過割合(%) = (現在値 / 最大値) * 100
;
;KtoV_ELP_Per[4] = (FLOAT(KtoV_ELP_Val[4])/FLOAT(VtoK_ELP_Max[4])) * 100
LD CR2002                ; 常時ON
LDA.D DM8760:#8          ; _経過情報5最大値
CON
FLOAT.D
CON
STA.F @VM48
CON
LDA.D DM8770:#8          ; _経過情報5現在経過
CON
FLOAT.D
CON
DIV.F @VM48
CON
MUL.F +100
CON
INTG
CON
STA DM8780:#4            ; _経過情報5現在経過%
LABEL #1027
;
LDB R59200:#4            ; _経過情報5使用有無
MOV #0 DM8785:#4         ; _経過情報5ｲﾝｼﾞｹﾞｰﾀ切替色
LD R59200:#4             ; _経過情報5使用有無
MPS
AND=.D DM8760:#8 #0      ; _経過情報5最大値
MOV #0 DM8785:#4         ; _経過情報5ｲﾝｼﾞｹﾞｰﾀ切替色
MPP
AND<>.D DM8760:#8 #0     ; _経過情報5最大値
MPS
AND<.D DM8770:#8 DM8830:#8;_経過情報5現在経過  _経過情報5ｲﾝｼﾞｹﾞｰﾀ黄色開始
MOV #0 DM8785:#4         ; _経過情報5ｲﾝｼﾞｹﾞｰﾀ切替色
MRD
LD>=.D DM8770:#8 DM8830:#8;_経過情報5現在経過  _経過情報5ｲﾝｼﾞｹﾞｰﾀ黄色開始
AND<.D DM8770:#8 DM8840:#8;_経過情報5現在経過  _経過情報5ｲﾝｼﾞｹﾞｰﾀ赤色開始
ANL
MOV #1 DM8785:#4         ; _経過情報5ｲﾝｼﾞｹﾞｰﾀ切替色
MPP
AND>=.D DM8770:#8 DM8840:#8;_経過情報5現在経過  _経過情報5ｲﾝｼﾞｹﾞｰﾀ赤色開始
MOV #2 DM8785:#4         ; _経過情報5ｲﾝｼﾞｹﾞｰﾀ切替色
;<h1/>Cycle Time Record/装置ｻｲｸﾙﾀｲﾑ計測
;処理時間はmsec単位（DC仕様）
LD R46115                ; _装置ｻｲｸﾙﾀｲﾑ計測中
ANB R46001               ; _装置C/T取得
ANB T100                 ; ｻｲｸﾙﾀｲﾑ計測ﾀｲﾏ
TMS #100 #4294967295     ; ｻｲｸﾙﾀｲﾑ計測ﾀｲﾏ
LDA.D #4294967295
CON
SUB.D T100               ; ｻｲｸﾙﾀｲﾑ計測ﾀｲﾏ
CON
STA.D @EM0               ; 装置CTﾘｱﾙﾀｲﾑ
LDP R46001               ; _装置C/T取得
MOV.D @EM0 DM5040        ; 装置CTﾘｱﾙﾀｲﾑ  _装置ｻｲｸﾙﾀｲﾑ
RES R46001               ; _装置C/T取得
SET R46512               ; _ﾃﾞｰﾀ収集　ｻｲｸﾙﾀｲﾑ要求
;<h1/>Process Time Record/処理時間計測
;処理時間はmsec単位（DC仕様）
;処理計測番号1
LD R47000                ; _処理時間1計測開始
ANB T101                 ; 処理時間1計測ﾀｲﾏ
TMS #101 #4294967295     ; 処理時間1計測ﾀｲﾏ
LDA.D #4294967295
CON
SUB.D T101               ; 処理時間1計測ﾀｲﾏ
CON
STA.D @EM2               ; 処理時間1ﾘｱﾙﾀｲﾑ
LDP R47100               ; _処理時間1取得
MOV.D @EM2 DM5042        ; 処理時間1ﾘｱﾙﾀｲﾑ  _処理計測時間1
RES R47100               ; _処理時間1取得
;処理計測番号2
LD R47001                ; _処理時間2計測開始
ANB T102                 ; 処理時間2計測ﾀｲﾏ
TMS #102 #4294967295     ; 処理時間2計測ﾀｲﾏ
LDA.D #4294967295
CON
SUB.D T102               ; 処理時間2計測ﾀｲﾏ
CON
STA.D @EM4               ; 処理時間2ﾘｱﾙﾀｲﾑ
LDP R47101               ; _処理時間2取得
MOV.D @EM4 DM5044        ; 処理時間2ﾘｱﾙﾀｲﾑ  _処理計測時間2
RES R47101               ; _処理時間2取得
;処理計測番号3
LD R47002                ; _処理時間3計測開始
ANB T103                 ; 処理時間3計測ﾀｲﾏ
TMS #103 #4294967295     ; 処理時間3計測ﾀｲﾏ
LDA.D #4294967295
CON
SUB.D T103               ; 処理時間3計測ﾀｲﾏ
CON
STA.D @EM6               ; 処理時間3ﾘｱﾙﾀｲﾑ
LDP R47102               ; _処理時間3取得
MOV.D @EM6 DM5046        ; 処理時間3ﾘｱﾙﾀｲﾑ  _処理計測時間3
RES R47102               ; _処理時間3取得
;処理計測番号4
LD R47003                ; _処理時間4計測開始
ANB T104                 ; 処理時間4計測ﾀｲﾏ
TMS #104 #4294967295     ; 処理時間4計測ﾀｲﾏ
LDA.D #4294967295
CON
SUB.D T104               ; 処理時間4計測ﾀｲﾏ
CON
STA.D @EM8               ; 処理時間4ﾘｱﾙﾀｲﾑ
LDP R47103               ; _処理時間4取得
MOV.D @EM8 DM5048        ; 処理時間4ﾘｱﾙﾀｲﾑ  _処理計測時間4
RES R47103               ; _処理時間4取得
;処理計測番号5
LD R47004                ; _処理時間5計測開始
ANB T105                 ; 処理時間5計測ﾀｲﾏ
TMS #105 #4294967295     ; 処理時間5計測ﾀｲﾏ
LDA.D #4294967295
CON
SUB.D T105               ; 処理時間5計測ﾀｲﾏ
CON
STA.D @EM10              ; 処理時間5ﾘｱﾙﾀｲﾑ
LDP R47104               ; _処理時間5取得
MOV.D @EM10 DM5050       ; 処理時間5ﾘｱﾙﾀｲﾑ  _処理計測時間5
RES R47104               ; _処理時間5取得
;処理計測番号6
LD R47005                ; _処理時間6計測開始
ANB T106                 ; 処理時間6計測ﾀｲﾏ
TMS #106 #4294967295     ; 処理時間6計測ﾀｲﾏ
LDA.D #4294967295
CON
SUB.D T106               ; 処理時間6計測ﾀｲﾏ
CON
STA.D @EM12              ; 処理時間6ﾘｱﾙﾀｲﾑ
LDP R47105               ; _処理時間6取得
MOV.D @EM12 DM5052       ; 処理時間6ﾘｱﾙﾀｲﾑ  _処理計測時間6
RES R47105               ; _処理時間6取得
;処理計測番号7
LD R47006                ; _処理時間7計測開始
ANB T107                 ; 処理時間7計測ﾀｲﾏ
TMS #107 #4294967295     ; 処理時間7計測ﾀｲﾏ
LDA.D #4294967295
CON
SUB.D T107               ; 処理時間7計測ﾀｲﾏ
CON
STA.D @EM14              ; 処理時間7ﾘｱﾙﾀｲﾑ
LDP R47106               ; _処理時間7取得
MOV.D @EM14 DM5054       ; 処理時間7ﾘｱﾙﾀｲﾑ  _処理計測時間7
RES R47106               ; _処理時間7取得
;処理計測番号8
LD R47007                ; _処理時間8計測開始
ANB T108                 ; 処理時間8計測ﾀｲﾏ
TMS #108 #4294967295     ; 処理時間8計測ﾀｲﾏ
LDA.D #4294967295
CON
SUB.D T108               ; 処理時間8計測ﾀｲﾏ
CON
STA.D @EM16              ; 処理時間8ﾘｱﾙﾀｲﾑ
LDP R47107               ; _処理時間8取得
MOV.D @EM16 DM5056       ; 処理時間8ﾘｱﾙﾀｲﾑ  _処理計測時間8
RES R47107               ; _処理時間8取得
;処理計測番号9
LD R47008                ; _処理時間9計測開始
ANB T109                 ; 処理時間9計測ﾀｲﾏ
TMS #109 #4294967295     ; 処理時間9計測ﾀｲﾏ
LDA.D #4294967295
CON
SUB.D T109               ; 処理時間9計測ﾀｲﾏ
CON
STA.D @EM18              ; 処理時間9ﾘｱﾙﾀｲﾑ
LDP R47108               ; _処理時間9取得
MOV.D @EM18 DM5058       ; 処理時間9ﾘｱﾙﾀｲﾑ  _処理計測時間9
RES R47108               ; _処理時間9取得
;処理計測番号10
LD R47009                ; _処理時間10計測開始
ANB T110                 ; 処理時間10計測ﾀｲﾏ
TMS #110 #4294967295     ; 処理時間10計測ﾀｲﾏ
LDA.D #4294967295
CON
SUB.D T110               ; 処理時間10計測ﾀｲﾏ
CON
STA.D @EM20              ; 処理時間10ﾘｱﾙﾀｲﾑ
LDP R47109               ; _処理時間10取得
MOV.D @EM20 DM5060       ; 処理時間10ﾘｱﾙﾀｲﾑ  _処理計測時間10
RES R47109               ; _処理時間10取得
;処理計測番号11
LD R47010                ; _処理時間11計測開始
ANB T111                 ; 処理時間11計測ﾀｲﾏ
TMS #111 #4294967295     ; 処理時間11計測ﾀｲﾏ
LDA.D #4294967295
CON
SUB.D T111               ; 処理時間11計測ﾀｲﾏ
CON
STA.D @EM22              ; 処理時間11ﾘｱﾙﾀｲﾑ
LDP R47110               ; _処理時間11取得
MOV.D @EM22 DM5062       ; 処理時間11ﾘｱﾙﾀｲﾑ  _処理計測時間11
RES R47110               ; _処理時間11取得
;処理計測番号12
LD R47011                ; _処理時間12計測開始
ANB T112                 ; 処理時間12計測ﾀｲﾏ
TMS #112 #4294967295     ; 処理時間12計測ﾀｲﾏ
LDA.D #4294967295
CON
SUB.D T112               ; 処理時間12計測ﾀｲﾏ
CON
STA.D @EM24              ; 処理時間12ﾘｱﾙﾀｲﾑ
LDP R47111               ; _処理時間12取得
MOV.D @EM24 DM5064       ; 処理時間12ﾘｱﾙﾀｲﾑ  _処理計測時間12
RES R47111               ; _処理時間12取得
;処理計測番号13
LD R47012                ; _処理時間13計測開始
ANB T113                 ; 処理時間13計測ﾀｲﾏ
TMS #113 #4294967295     ; 処理時間13計測ﾀｲﾏ
LDA.D #4294967295
CON
SUB.D T113               ; 処理時間13計測ﾀｲﾏ
CON
STA.D @EM26              ; 処理時間13ﾘｱﾙﾀｲﾑ
LDP R47112               ; _処理時間13取得
MOV.D @EM26 DM5066       ; 処理時間13ﾘｱﾙﾀｲﾑ  _処理計測時間13
RES R47112               ; _処理時間13取得
;処理計測番号14
LD R47013                ; _処理時間14計測開始
ANB T114                 ; 処理時間14計測ﾀｲﾏ
TMS #114 #4294967295     ; 処理時間14計測ﾀｲﾏ
LDA.D #4294967295
CON
SUB.D T114               ; 処理時間14計測ﾀｲﾏ
CON
STA.D @EM28              ; 処理時間14ﾘｱﾙﾀｲﾑ
LDP R47113               ; _処理時間14取得
MOV.D @EM28 DM5068       ; 処理時間14ﾘｱﾙﾀｲﾑ  _処理計測時間14
RES R47113               ; _処理時間14取得
;処理計測番号15
LD R47014                ; _処理時間15計測開始
ANB T115                 ; 処理時間15計測ﾀｲﾏ
TMS #115 #4294967295     ; 処理時間15計測ﾀｲﾏ
LDA.D #4294967295
CON
SUB.D T115               ; 処理時間15計測ﾀｲﾏ
CON
STA.D @EM30              ; 処理時間15ﾘｱﾙﾀｲﾑ
LDP R47114               ; _処理時間15取得
MOV.D @EM30 DM5070       ; 処理時間15ﾘｱﾙﾀｲﾑ  _処理計測時間15
RES R47114               ; _処理時間15取得
;処理計測番号16
LD R47015                ; _処理時間16計測開始
ANB T116                 ; 処理時間16計測ﾀｲﾏ
TMS #116 #4294967295     ; 処理時間16計測ﾀｲﾏ
LDA.D #4294967295
CON
SUB.D T116               ; 処理時間16計測ﾀｲﾏ
CON
STA.D @EM32              ; 処理時間16ﾘｱﾙﾀｲﾑ
LDP R47115               ; _処理時間16取得
MOV.D @EM32 DM5072       ; 処理時間16ﾘｱﾙﾀｲﾑ  _処理計測時間16
RES R47115               ; _処理時間16取得
;<h1/>Product Count/生産ｶｳﾝﾀ
;ｶｳﾝﾀ値範囲外(0～99999999)ならば強制0へ
LD<.D DM5020 #0          ; _生産ｶｳﾝﾀ1
OR>.D DM5020 #99999999   ; _生産ｶｳﾝﾀ1
MOV.D #0 DM5020          ; _生産ｶｳﾝﾀ1
LD<.D DM5022 #0          ; _生産ｶｳﾝﾀ2
OR>.D DM5022 #99999999   ; _生産ｶｳﾝﾀ2
MOV.D #0 DM5022          ; _生産ｶｳﾝﾀ2
LD<.D DM5024 #0          ; _生産ｶｳﾝﾀ3
OR>.D DM5024 #99999999   ; _生産ｶｳﾝﾀ3
MOV.D #0 DM5024          ; _生産ｶｳﾝﾀ3
LD<.D DM5026 #0          ; _生産ｶｳﾝﾀ4
OR>.D DM5026 #99999999   ; _生産ｶｳﾝﾀ4
MOV.D #0 DM5026          ; _生産ｶｳﾝﾀ4
LD<.D DM5028 #0          ; _生産ｶｳﾝﾀ5
OR>.D DM5028 #99999999   ; _生産ｶｳﾝﾀ5
MOV.D #0 DM5028          ; _生産ｶｳﾝﾀ5
LD<.D DM5030 #0          ; _生産ｶｳﾝﾀ6
OR>.D DM5030 #99999999   ; _生産ｶｳﾝﾀ6
MOV.D #0 DM5030          ; _生産ｶｳﾝﾀ6
LD<.D DM5032 #0          ; _生産ｶｳﾝﾀ7
OR>.D DM5032 #99999999   ; _生産ｶｳﾝﾀ7
MOV.D #0 DM5032          ; _生産ｶｳﾝﾀ7
LD<.D DM5034 #0          ; _生産ｶｳﾝﾀ8
OR>.D DM5034 #99999999   ; _生産ｶｳﾝﾀ8
MOV.D #0 DM5034          ; _生産ｶｳﾝﾀ8
LD<.D DM5036 #0          ; _生産ｶｳﾝﾀ9
OR>.D DM5036 #99999999   ; _生産ｶｳﾝﾀ9
MOV.D #0 DM5036          ; _生産ｶｳﾝﾀ9
LD<.D DM5038 #0          ; _生産ｶｳﾝﾀ10
OR>.D DM5038 #99999999   ; _生産ｶｳﾝﾀ10
MOV.D #0 DM5038          ; _生産ｶｳﾝﾀ10
;<h1/>Modify_SW/割り込みSW制御
;割り込みSW動作無効
;・定停止移行中は割り込みSW無効
LD R46101                ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
OR R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND R46106               ; _定停止移行中
LD R46102                ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
LD R47800                ; _Group1　ﾒﾝﾃ動作定停止移行中
OR R47801                ; _Group2　ﾒﾝﾃ動作定停止移行中
OR R47802                ; _Group3　ﾒﾝﾃ動作定停止移行中
OR R47803                ; _Group4　ﾒﾝﾃ動作定停止移行中
OR R47804                ; _Group5　ﾒﾝﾃ動作定停止移行中
OR R47805                ; _Group6　ﾒﾝﾃ動作定停止移行中
OR R47806                ; _Group7　ﾒﾝﾃ動作定停止移行中
OR R47807                ; _Group8　ﾒﾝﾃ動作定停止移行中
ANL
ORL
OUT R54206               ; _割り込みSW押下無効
;割り込みSW ON/OFF状態確認
;・TPﾎﾞﾀﾝ押下をPLC側で保持
;割り込みSW1
LDP R54200               ; _割り込みSW1状態
SET LR100                ; _割り込みSW1　ON/OFF状態
LDF R54200               ; _割り込みSW1状態
RES R54200               ; _割り込みSW1状態
CON
RES LR100                ; _割り込みSW1　ON/OFF状態
;割り込みSW2
LDP R54201               ; _割り込みSW2状態
SET LR101                ; _割り込みSW2　ON/OFF状態
LDF R54201               ; _割り込みSW2状態
RES R54201               ; _割り込みSW2状態
CON
RES LR101                ; _割り込みSW2　ON/OFF状態
;割り込みSW3
LDP R54202               ; _割り込みSW3状態
SET LR102                ; _割り込みSW3　ON/OFF状態
LDF R54202               ; _割り込みSW3状態
RES R54202               ; _割り込みSW3状態
CON
RES LR102                ; _割り込みSW3　ON/OFF状態
;割り込みSW4
LDP R54203               ; _割り込みSW4状態
SET LR103                ; _割り込みSW4　ON/OFF状態
LDF R54203               ; _割り込みSW4状態
RES R54203               ; _割り込みSW4状態
CON
RES LR103                ; _割り込みSW4　ON/OFF状態
;割り込みSW5
LDP R54204               ; _割り込みSW5状態
SET LR104                ; _割り込みSW5　ON/OFF状態
LDF R54204               ; _割り込みSW5状態
RES R54204               ; _割り込みSW5状態
CON
RES LR104                ; _割り込みSW5　ON/OFF状態
;割り込みSW表示／非表示
;・API設定で未使用ならば非表示[#0]
;割り込みSWｵﾝ／ｵﾌ時名称変更
;・名称番号を転送
;	ON時名称番号[#5300+SW番号-1]
;	OFF時名称番号[#5305+SW番号-1]
;割り込みSW1
LD R59400:#0             ; _割り込みSW1使用有無
MOV #0 DM8588            ; _割り込みSW1表示有無
MPS
AND LR100                ; _割り込みSW1　ON/OFF状態
MOV #5300 DM8593         ; _割り込みSW1ON/OFF名称番号
MPP
ANB LR100                ; _割り込みSW1　ON/OFF状態
MOV #5305 DM8593         ; _割り込みSW1ON/OFF名称番号
LDB R59400:#0            ; _割り込みSW1使用有無
MOV #1 DM8588            ; _割り込みSW1表示有無
MOV #0 DM8593            ; _割り込みSW1ON/OFF名称番号
;割り込みSW2
LD R59400:#1             ; _割り込みSW2使用有無
MOV #0 DM8589            ; _割り込みSW2表示有無
MPS
AND LR101                ; _割り込みSW2　ON/OFF状態
MOV #5301 DM8594         ; _割り込みSW2ON/OFF名称番号
MPP
ANB LR101                ; _割り込みSW2　ON/OFF状態
MOV #5306 DM8594         ; _割り込みSW2ON/OFF名称番号
LDB R59400:#1            ; _割り込みSW2使用有無
MOV #1 DM8589            ; _割り込みSW2表示有無
MOV #0 DM8594            ; _割り込みSW2ON/OFF名称番号
;割り込みSW3
LD R59400:#2             ; _割り込みSW3使用有無
MOV #0 DM8590            ; _割り込みSW3表示有無
MPS
AND LR102                ; _割り込みSW3　ON/OFF状態
MOV #5302 DM8595         ; _割り込みSW3ON/OFF名称番号
MPP
ANB LR102                ; _割り込みSW3　ON/OFF状態
MOV #5307 DM8595         ; _割り込みSW3ON/OFF名称番号
LDB R59400:#2            ; _割り込みSW3使用有無
MOV #1 DM8590            ; _割り込みSW3表示有無
MOV #0 DM8595            ; _割り込みSW3ON/OFF名称番号
;割り込みSW4
LD R59400:#3             ; _割り込みSW4使用有無
MOV #0 DM8591            ; _割り込みSW4表示有無
MPS
AND LR103                ; _割り込みSW4　ON/OFF状態
MOV #5303 DM8596         ; _割り込みSW4ON/OFF名称番号
MPP
ANB LR103                ; _割り込みSW4　ON/OFF状態
MOV #5308 DM8596         ; _割り込みSW4ON/OFF名称番号
LDB R59400:#3            ; _割り込みSW4使用有無
MOV #1 DM8591            ; _割り込みSW4表示有無
MOV #0 DM8596            ; _割り込みSW4ON/OFF名称番号
;割り込みSW5
LD R59400:#4             ; _割り込みSW5使用有無
MOV #0 DM8592            ; _割り込みSW5表示有無
MPS
AND LR104                ; _割り込みSW5　ON/OFF状態
MOV #5304 DM8597         ; _割り込みSW5ON/OFF名称番号
MPP
ANB LR104                ; _割り込みSW5　ON/OFF状態
MOV #5309 DM8597         ; _割り込みSW5ON/OFF名称番号
LDB R59400:#4            ; _割り込みSW5使用有無
MOV #1 DM8592            ; _割り込みSW5表示有無
MOV #0 DM8597            ; _割り込みSW5ON/OFF名称番号
;<h1/>Support Macro Control/ｻﾎﾟｰﾄﾏｸﾛ管理
;WARNING_DISP
;TP側で[OK]ﾎﾞﾀﾝが押されたら画面消去&ﾃﾞﾊﾞｲｽ初期化
LD R53600                ; _WARN画面表示
ANP R53608               ; _WARN画面消去
MPS
RES R48208               ; _Group1　ｼｽﾃﾑﾌﾞｻﾞｰ要求1
CON
RES R48408               ; _Group1　ﾗﾝﾌﾟ赤点滅要求1
CON
RES R53600               ; _WARN画面表示
MRD
MOV #0 DM8148            ; _WARNﾒｯｾｰｼﾞ番号
MRD
MOV.D #0 DM9000          ; _WARNING1表示状態
MPP
MOV #0 DM2010            ; _Group1　ﾌﾞｻﾞｰ状態
LD R53601                ; _WARN画面表示
ANP R53609               ; _WARN画面消去
MPS
RES R48212               ; _Group2　ｼｽﾃﾑﾌﾞｻﾞｰ要求1
CON
RES R48412               ; _Group2　ﾗﾝﾌﾟ赤点滅要求1
CON
RES R53601               ; _WARN画面表示
MRD
MOV #0 DM8149            ; _WARNﾒｯｾｰｼﾞ番号
MRD
MOV.D #0 DM9002          ; _WARNING2表示状態
MPP
MOV #0 DM2011            ; _Group2　ﾌﾞｻﾞｰ状態
LD R53602                ; _WARN画面表示
ANP R53610               ; _WARN画面消去
MPS
RES R48300               ; _Group3　ｼｽﾃﾑﾌﾞｻﾞｰ要求1
CON
RES R48500               ; _Group3　ﾗﾝﾌﾟ赤点滅要求1
CON
RES R53602               ; _WARN画面表示
MRD
MOV #0 DM8150            ; _WARNﾒｯｾｰｼﾞ番号
MRD
MOV.D #0 DM9004          ; _WARNING3表示状態
MPP
MOV #0 DM2012            ; _Group3　ﾌﾞｻﾞｰ状態
LD R53603                ; _WARN画面表示
ANP R53611               ; _WARN画面消去
MPS
RES R48304               ; _Group4　ｼｽﾃﾑﾌﾞｻﾞｰ要求1
CON
RES R48504               ; _Group4　ﾗﾝﾌﾟ赤点滅要求1
CON
RES R53603               ; _WARN画面表示
MRD
MOV #0 DM8151            ; _WARNﾒｯｾｰｼﾞ番号
MRD
MOV.D #0 DM9006          ; _WARNING4表示状態
MPP
MOV #0 DM2013            ; _Group4　ﾌﾞｻﾞｰ状態
LD R53604                ; _WARN画面表示
ANP R53612               ; _WARN画面消去
MPS
RES R48308               ; _Group5　ｼｽﾃﾑﾌﾞｻﾞｰ要求1
CON
RES R48508               ; _Group5　ﾗﾝﾌﾟ赤点滅要求1
CON
RES R53604               ; _WARN画面表示
MRD
MOV #0 DM8152            ; _WARNﾒｯｾｰｼﾞ番号
MRD
MOV.D #0 DM9008          ; _WARNING5表示状態
MPP
MOV #0 DM2014            ; _Group5　ﾌﾞｻﾞｰ状態
LD R53605                ; _WARN画面表示
ANP R53613               ; _WARN画面消去
MPS
RES R48312               ; _Group6　ｼｽﾃﾑﾌﾞｻﾞｰ要求1
CON
RES R48512               ; _Group6　ﾗﾝﾌﾟ赤点滅要求1
CON
RES R53605               ; _WARN画面表示
MRD
MOV #0 DM8153            ; _WARNﾒｯｾｰｼﾞ番号
MRD
MOV.D #0 DM9010          ; _WARNING6表示状態
MPP
MOV #0 DM2015            ; _Group6　ﾌﾞｻﾞｰ状態
LD R53606                ; _WARN画面表示
ANP R53614               ; _WARN画面消去
MPS
RES R48400               ; _Group7　ｼｽﾃﾑﾌﾞｻﾞｰ要求1
CON
RES R48600               ; _Group7　ﾗﾝﾌﾟ赤点滅要求1
CON
RES R53606               ; _WARN画面表示
MRD
MOV #0 DM8154            ; _WARNﾒｯｾｰｼﾞ番号
MRD
MOV.D #0 DM9012          ; _WARNING7表示状態
MPP
MOV #0 DM2016            ; _Group7　ﾌﾞｻﾞｰ状態
LD R53607                ; _WARN画面表示
ANP R53615               ; _WARN画面消去
MPS
RES R48404               ; _Group8　ｼｽﾃﾑﾌﾞｻﾞｰ要求1
CON
RES R48604               ; _Group8　ﾗﾝﾌﾟ赤点滅要求1
CON
RES R53607               ; _WARN画面表示
MRD
MOV #0 DM8155            ; _WARNﾒｯｾｰｼﾞ番号
MRD
MOV.D #0 DM9014          ; _WARNING8表示状態
MPP
MOV #0 DM2017            ; _Group8　ﾌﾞｻﾞｰ状態
;MSG_DISP
;TP側で[OK]ﾎﾞﾀﾝが押されたら画面消去&ﾃﾞﾊﾞｲｽ初期化
LD R53500                ; _MSG画面表示
ANP R53508               ; _MSG画面消去
MPS
RES R48209               ; _Group1　ｼｽﾃﾑﾌﾞｻﾞｰ要求2
CON
RES R48409               ; _Group1　ﾗﾝﾌﾟ赤点滅要求2
CON
RES R53500               ; _MSG画面表示
MRD
MOV #0 DM8140            ; _MSGﾒｯｾｰｼﾞ番号
MPP
MOV.D #0 DM9016          ; _MSG_DISP1表示状態
LD R53501                ; _MSG画面表示
ANP R53509               ; _MSG画面消去
MPS
RES R48213               ; _Group2　ｼｽﾃﾑﾌﾞｻﾞｰ要求2
CON
RES R48413               ; _Group2　ﾗﾝﾌﾟ赤点滅要求2
CON
RES R53501               ; _MSG画面表示
MRD
MOV #0 DM8141            ; _MSGﾒｯｾｰｼﾞ番号
MPP
MOV.D #0 DM9018          ; _MSG_DISP2表示状態
LD R53502                ; _MSG画面表示
ANP R53510               ; _MSG画面消去
MPS
RES R48301               ; _Group3　ｼｽﾃﾑﾌﾞｻﾞｰ要求2
CON
RES R48501               ; _Group3　ﾗﾝﾌﾟ赤点滅要求2
CON
RES R53502               ; _MSG画面表示
MRD
MOV #0 DM8142            ; _MSGﾒｯｾｰｼﾞ番号
MPP
MOV.D #0 DM9020          ; _MSG_DISP3表示状態
LD R53503                ; _MSG画面表示
ANP R53511               ; _MSG画面消去
MPS
RES R48305               ; _Group4　ｼｽﾃﾑﾌﾞｻﾞｰ要求2
CON
RES R48505               ; _Group4　ﾗﾝﾌﾟ赤点滅要求2
CON
RES R53503               ; _MSG画面表示
MRD
MOV #0 DM8143            ; _MSGﾒｯｾｰｼﾞ番号
MPP
MOV.D #0 DM9022          ; _MSG_DISP4表示状態
LD R53504                ; _MSG画面表示
ANP R53512               ; _MSG画面消去
MPS
RES R48309               ; _Group5　ｼｽﾃﾑﾌﾞｻﾞｰ要求2
CON
RES R48509               ; _Group5　ﾗﾝﾌﾟ赤点滅要求2
CON
RES R53504               ; _MSG画面表示
MRD
MOV #0 DM8144            ; _MSGﾒｯｾｰｼﾞ番号
MPP
MOV.D #0 DM9024          ; _MSG_DISP5表示状態
LD R53505                ; _MSG画面表示
ANP R53513               ; _MSG画面消去
MPS
RES R48313               ; _Group6　ｼｽﾃﾑﾌﾞｻﾞｰ要求2
CON
RES R48513               ; _Group6　ﾗﾝﾌﾟ赤点滅要求2
CON
RES R53505               ; _MSG画面表示
MRD
MOV #0 DM8145            ; _MSGﾒｯｾｰｼﾞ番号
MPP
MOV.D #0 DM9026          ; _MSG_DISP6表示状態
LD R53506                ; _MSG画面表示
ANP R53514               ; _MSG画面消去
MPS
RES R48401               ; _Group7　ｼｽﾃﾑﾌﾞｻﾞｰ要求2
CON
RES R48601               ; _Group7　ﾗﾝﾌﾟ赤点滅要求2
CON
RES R53506               ; _MSG画面表示
MRD
MOV #0 DM8146            ; _MSGﾒｯｾｰｼﾞ番号
MPP
MOV.D #0 DM9028          ; _MSG_DISP7表示状態
LD R53507                ; _MSG画面表示
ANP R53515               ; _MSG画面消去
MPS
RES R48405               ; _Group8　ｼｽﾃﾑﾌﾞｻﾞｰ要求2
CON
RES R48605               ; _Group8　ﾗﾝﾌﾟ赤点滅要求2
CON
RES R53507               ; _MSG画面表示
MRD
MOV #0 DM8147            ; _MSGﾒｯｾｰｼﾞ番号
MPP
MOV.D #0 DM9030          ; _MSG_DISP8表示状態
;Mainte_NG
;ﾒﾝﾃﾅﾝｽ動作中のみ有効
LDB R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
MPS
AND R47508               ; _Group1　ﾒﾝﾃ開始禁止宣言
RES R47508               ; _Group1　ﾒﾝﾃ開始禁止宣言
MRD
AND R47509               ; _Group2　ﾒﾝﾃ開始禁止宣言
RES R47509               ; _Group2　ﾒﾝﾃ開始禁止宣言
MRD
AND R47510               ; _Group3　ﾒﾝﾃ開始禁止宣言
RES R47510               ; _Group3　ﾒﾝﾃ開始禁止宣言
MRD
AND R47511               ; _Group4　ﾒﾝﾃ開始禁止宣言
RES R47511               ; _Group4　ﾒﾝﾃ開始禁止宣言
MRD
AND R47512               ; _Group5　ﾒﾝﾃ開始禁止宣言
RES R47512               ; _Group5　ﾒﾝﾃ開始禁止宣言
MRD
AND R47513               ; _Group6　ﾒﾝﾃ開始禁止宣言
RES R47513               ; _Group6　ﾒﾝﾃ開始禁止宣言
MRD
AND R47514               ; _Group7　ﾒﾝﾃ開始禁止宣言
RES R47514               ; _Group7　ﾒﾝﾃ開始禁止宣言
MPP
AND R47515               ; _Group8　ﾒﾝﾃ開始禁止宣言
RES R47515               ; _Group8　ﾒﾝﾃ開始禁止宣言
;MODE_INDI
;運転開始時処理
;・【起動時】設定とする[#9]
LD CR2008                ; 運転開始時1ｽｷｬﾝON
MOV #9 DM9032            ; _MODE_INDI指定番号
SET R47401               ; _MODE_INDI変更要求
;定停止中開始時に運転ﾓｰﾄﾞ番号変更処理
;・起動中にﾕｰｻﾞｰ指定[#1～#8]があれば【ﾕｰｻﾞｰ指定番号】設定
;・起動中状態のまま定停止になれば[#11]【通常時】[#10]設定
;・非常停止復帰後は【起動時】設定[#9]
LDP R46104               ; _非常停止中　ﾓｰﾄﾞﾌﾗｸﾞ
MOV #9 DM9032            ; _MODE_INDI指定番号
SET R47401               ; _MODE_INDI変更要求
LD R46103                ; _停止中　ﾓｰﾄﾞﾌﾗｸﾞ
MPS
AND= DM9032 #11          ; _MODE_INDI指定番号
MOV #10 DM9032           ; _MODE_INDI指定番号
SET R47401               ; _MODE_INDI変更要求
MPP
AND<= DM9032 #8          ; _MODE_INDI指定番号
SET R47401               ; _MODE_INDI変更要求
;ﾓｰﾄﾞIN時処理
;・HOME、AUTO、MAINTE全て選択不可設定[#11]
LDP R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ORP R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
ORP R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
MOV #11 DM9032           ; _MODE_INDI指定番号
BRES DM9250 #10          ; _MODE_INDIﾕｰｻﾞｰ指定HOME
CON
BRES DM9251 #10          ; _MODE_INDIﾕｰｻﾞｰ指定AUTO
CON
BRES DM9252 #10          ; _MODE_INDIﾕｰｻﾞｰ指定MAINTE
CON
SET R47401               ; _MODE_INDI変更要求
;MODE_INDIﾒｯｾｰｼﾞ表示
;・ﾕｰｻﾞｰ指定#1～#8のみ表示
;・ｼｽﾃﾑ指定#9～はﾒｯｾｰｼﾞ消去
LD R47401                ; _MODE_INDI変更要求
MPS
LD>= DM9032 #1           ; _MODE_INDI指定番号
AND<= DM9032 #8          ; _MODE_INDI指定番号
ANL
MOV DM9032 DM8378        ; _MODE_INDI指定番号  _INDI　ﾒｯｾｰｼﾞ番号
SET R54205               ; _MODE_INDIﾒｯｾｰｼﾞ表示
MPP
AND>= DM9032 #9          ; _MODE_INDI指定番号
MOV #0 DM8378            ; _INDI　ﾒｯｾｰｼﾞ番号
RES R54205               ; _MODE_INDIﾒｯｾｰｼﾞ表示
;選択可能運転ﾓｰﾄﾞ変更処理
;・HOMEﾎﾞﾀﾝ表示／非表示
;・AUTOﾎﾞﾀﾝ表示／非表示
;・MAINTEﾎﾞﾀﾝ表示／非表示
;
;FOR i = 1 TO 16	'ﾓｰﾄﾞ番号分ﾙｰﾌﾟ
;	IF i = ModeIndi_No THEN		'指定番号？
;		IF BLD(ModeIndi_HOME,i-1) = ON THEN		'ﾕｰｻﾞｰ設定
;			KtoV_INDI_HOME = 0	'HOMEﾎﾞﾀﾝ表示
;		ELSE
;			KtoV_INDI_HOME = 1	'HOMEﾎﾞﾀﾝ非表示
;		END IF
;		IF BLD(ModeIndi_AUTO,i-1) = ON THEN
;			KtoV_INDI_AUTO = 0	'AUTOﾎﾞﾀﾝ表示
;		ELSE
;			KtoV_INDI_AUTO = 1	'AUTOﾎﾞﾀﾝ非表示
;		END IF
;		IF BLD(ModeIndi_MAINTE,i-1) = ON THEN
;			KtoV_INDI_MAINTE = 0	'MAINTEﾎﾞﾀﾝ表示
;		ELSE
;			KtoV_INDI_MAINTE = 1	'MAINTEﾎﾞﾀﾝ非表示
;			IF i <= 8 THEN
;				MODE_MAINTE = 0			'MAINTEﾎﾞﾀﾝ非表示状態に
;			END IF
;		END IF
;		BREAK
;	END IF
;NEXT
;
;RES(ModeIndi_RQ)	'処理完了
LD> DM9032 #0            ; _MODE_INDI指定番号
AND R47401               ; _MODE_INDI変更要求
NCJ #1028
;FOR i = 1 TO 16	'ﾓｰﾄﾞ番号分ﾙｰﾌﾟ
;
LD CR2002                ; 常時ON
MOV #1 i
LABEL #2045
LD> i #16
CJ #2046
;	IF i = ModeIndi_No THEN		'指定番号？
;
LD= i DM9032             ; _MODE_INDI指定番号
NCJ #2047
;		IF BLD(ModeIndi_HOME,i-1) = ON THEN		'ﾕｰｻﾞｰ設定
;
LD CR2002                ; 常時ON
LDA i
CON
EXT
CON
SUB.L +1
CON
STA.L @VM50
BLD DM9250 @VM50         ; _MODE_INDIﾕｰｻﾞｰ指定HOME
NCJ #2048
;			KtoV_INDI_HOME = 0	'HOMEﾎﾞﾀﾝ表示
;
LD CR2002                ; 常時ON
MOV #0 DM8379            ; _INDI　HOME有効／無効
;		ELSE
;
LD CR2002                ; 常時ON
CJ #2049
LABEL #2048
;			KtoV_INDI_HOME = 1	'HOMEﾎﾞﾀﾝ非表示
;
LD CR2002                ; 常時ON
MOV #1 DM8379            ; _INDI　HOME有効／無効
;		END IF
;
LABEL #2049
;		IF BLD(ModeIndi_AUTO,i-1) = ON THEN
;
LD CR2002                ; 常時ON
LDA i
CON
EXT
CON
SUB.L +1
CON
STA.L @VM52
BLD DM9251 @VM52         ; _MODE_INDIﾕｰｻﾞｰ指定AUTO
NCJ #2050
;			KtoV_INDI_AUTO = 0	'AUTOﾎﾞﾀﾝ表示
;
LD CR2002                ; 常時ON
MOV #0 DM8380            ; _INDI　AUTO有効／無効
;		ELSE
;
LD CR2002                ; 常時ON
CJ #2051
LABEL #2050
;			KtoV_INDI_AUTO = 1	'AUTOﾎﾞﾀﾝ非表示
;
LD CR2002                ; 常時ON
MOV #1 DM8380            ; _INDI　AUTO有効／無効
;		END IF
;
LABEL #2051
;		IF BLD(ModeIndi_MAINTE,i-1) = ON THEN
;
LD CR2002                ; 常時ON
LDA i
CON
EXT
CON
SUB.L +1
CON
STA.L @VM54
BLD DM9252 @VM54         ; _MODE_INDIﾕｰｻﾞｰ指定MAINTE
NCJ #2052
;			KtoV_INDI_MAINTE = 0	'MAINTEﾎﾞﾀﾝ表示
;
LD CR2002                ; 常時ON
MOV #0 DM8381            ; _INDI　MAINTE有効／無効
;		ELSE
;
LD CR2002                ; 常時ON
CJ #2053
LABEL #2052
;			KtoV_INDI_MAINTE = 1	'MAINTEﾎﾞﾀﾝ非表示
;
LD CR2002                ; 常時ON
MOV #1 DM8381            ; _INDI　MAINTE有効／無効
;			IF i <= 8 THEN
;
LD<= i #8
NCJ #2054
;				MODE_MAINTE = 0			'MAINTEﾎﾞﾀﾝ非表示状態に
;
LD CR2003                ; 常時OFF
OUT R46113               ; _MAINTEﾓｰﾄﾞ選択中
;			END IF
;
LABEL #2054
;		END IF
;
LABEL #2053
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2055
;	END IF
;
LABEL #2047
;NEXT
;
LD CR2002                ; 常時ON
INC i
LDB CR2009               ; 演算結果が負
CJ #2045
LABEL #2055
LABEL #2046
;RES(ModeIndi_RQ)	'処理完了
LD CR2002                ; 常時ON
RES R47401               ; _MODE_INDI変更要求
LABEL #1028
;
;<h1/>2013/3
;画面No310、311、380、381
;選択Noにおける下限、上限値表示
;ZF30990 = DM50430*4		'選択されている項目ﾍﾟｰｼﾞ
;ZF30996 = 0				'OFFSET
;
;FOR ZF30994 = 1 TO 10	'10項目分
;	ZF30900.L:ZF30996 = ZF30000.L:(ZF30990+ZF30996)	'下限値
;	ZF30902.L:ZF30996 = ZF30002.L:(ZF30990+ZF30996)	'上限値
;	ZF30950.L:ZF30996 = ZF30000.L:(ZF30990+ZF30996)	'下限値
;	ZF30952.L:ZF30996 = ZF30002.L:(ZF30990+ZF30996)	'上限値
;	ZF30996 = ZF30996 + 4	'2ﾜｰﾄﾞ+2ﾜｰﾄﾞ=4ﾜｰﾄﾞ分
;NEXT	
LD= DM3000 #310          ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #311          ; _MainTP　表示中ﾍﾟｰｼﾞNo
NCJ #1034
;ZF30990 = DM50430*4		'選択されている項目ﾍﾟｰｼﾞ
;
LD CR2002                ; 常時ON
LDA DM50430              ; 機種DATA Offset
CON
EXT
CON
MUL.L +4
CON
STA ZF30990
;ZF30996 = 0				'OFFSET
;
LD CR2002                ; 常時ON
MOV #0 ZF30996
;FOR ZF30994 = 1 TO 10	'10項目分
;
LD CR2002                ; 常時ON
MOV #1 ZF30994
LABEL #2056
LD> ZF30994 #10
CJ #2057
;	ZF30900.L:ZF30996 = ZF30000.L:(ZF30990+ZF30996)	'下限値
;
LD CR2002                ; 常時ON
LDA ZF30996
CON
EXT
CON
STA.L Z11
CON
LDA ZF30996
CON
EXT
CON
STA.L @VM56
CON
LDA ZF30990
CON
EXT
CON
ADD.L @VM56
CON
STA.L Z12
CON
MOV.L ZF30000:Z12 ZF30900:Z11
;	ZF30902.L:ZF30996 = ZF30002.L:(ZF30990+ZF30996)	'上限値
;
LD CR2002                ; 常時ON
LDA ZF30996
CON
EXT
CON
STA.L Z11
CON
LDA ZF30996
CON
EXT
CON
STA.L @VM58
CON
LDA ZF30990
CON
EXT
CON
ADD.L @VM58
CON
STA.L Z12
CON
MOV.L ZF30002:Z12 ZF30902:Z11
;	ZF30950.L:ZF30996 = ZF30000.L:(ZF30990+ZF30996)	'下限値
;
LD CR2002                ; 常時ON
LDA ZF30996
CON
EXT
CON
STA.L Z11
CON
LDA ZF30996
CON
EXT
CON
STA.L @VM60
CON
LDA ZF30990
CON
EXT
CON
ADD.L @VM60
CON
STA.L Z12
CON
MOV.L ZF30000:Z12 ZF30950:Z11
;	ZF30952.L:ZF30996 = ZF30002.L:(ZF30990+ZF30996)	'上限値
;
LD CR2002                ; 常時ON
LDA ZF30996
CON
EXT
CON
STA.L Z11
CON
LDA ZF30996
CON
EXT
CON
STA.L @VM62
CON
LDA ZF30990
CON
EXT
CON
ADD.L @VM62
CON
STA.L Z12
CON
MOV.L ZF30002:Z12 ZF30952:Z11
;	ZF30996 = ZF30996 + 4	'2ﾜｰﾄﾞ+2ﾜｰﾄﾞ=4ﾜｰﾄﾞ分
;
LD CR2002                ; 常時ON
LDA ZF30996
CON
EXT
CON
ADD.L +4
CON
STA ZF30996
;NEXT	
LD CR2002                ; 常時ON
INC ZF30994
LDB CR2009               ; 演算結果が負
CJ #2056
LABEL #2057
LABEL #1034
;
;ZF31990 = DM50430*4		'選択されている項目ﾍﾟｰｼﾞ
;ZF31996 = 0				'OFFSET
;
;FOR ZF31994 = 1 TO 10	'10項目分
;	ZF31900.L:ZF31996 = ZF31000.L:(ZF31990+ZF31996)	'下限値
;	ZF31902.L:ZF31996 = ZF31002.L:(ZF31990+ZF31996)	'上限値
;	ZF31950.L:ZF31996 = ZF31000.L:(ZF31990+ZF31996)	'下限値
;	ZF31952.L:ZF31996 = ZF31002.L:(ZF31990+ZF31996)	'上限値
;	ZF31996 = ZF31996 + 4	'2ﾜｰﾄﾞ+2ﾜｰﾄﾞ=4ﾜｰﾄﾞ分
;NEXT	
LD= DM3000 #380          ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #381          ; _MainTP　表示中ﾍﾟｰｼﾞNo
NCJ #1035
;ZF31990 = DM50430*4		'選択されている項目ﾍﾟｰｼﾞ
;
LD CR2002                ; 常時ON
LDA DM50430              ; 機種DATA Offset
CON
EXT
CON
MUL.L +4
CON
STA ZF31990
;ZF31996 = 0				'OFFSET
;
LD CR2002                ; 常時ON
MOV #0 ZF31996
;FOR ZF31994 = 1 TO 10	'10項目分
;
LD CR2002                ; 常時ON
MOV #1 ZF31994
LABEL #2058
LD> ZF31994 #10
CJ #2059
;	ZF31900.L:ZF31996 = ZF31000.L:(ZF31990+ZF31996)	'下限値
;
LD CR2002                ; 常時ON
LDA ZF31996
CON
EXT
CON
STA.L Z11
CON
LDA ZF31996
CON
EXT
CON
STA.L @VM64
CON
LDA ZF31990
CON
EXT
CON
ADD.L @VM64
CON
STA.L Z12
CON
MOV.L ZF31000:Z12 ZF31900:Z11
;	ZF31902.L:ZF31996 = ZF31002.L:(ZF31990+ZF31996)	'上限値
;
LD CR2002                ; 常時ON
LDA ZF31996
CON
EXT
CON
STA.L Z11
CON
LDA ZF31996
CON
EXT
CON
STA.L @VM66
CON
LDA ZF31990
CON
EXT
CON
ADD.L @VM66
CON
STA.L Z12
CON
MOV.L ZF31002:Z12 ZF31902:Z11
;	ZF31950.L:ZF31996 = ZF31000.L:(ZF31990+ZF31996)	'下限値
;
LD CR2002                ; 常時ON
LDA ZF31996
CON
EXT
CON
STA.L Z11
CON
LDA ZF31996
CON
EXT
CON
STA.L @VM68
CON
LDA ZF31990
CON
EXT
CON
ADD.L @VM68
CON
STA.L Z12
CON
MOV.L ZF31000:Z12 ZF31950:Z11
;	ZF31952.L:ZF31996 = ZF31002.L:(ZF31990+ZF31996)	'上限値
;
LD CR2002                ; 常時ON
LDA ZF31996
CON
EXT
CON
STA.L Z11
CON
LDA ZF31996
CON
EXT
CON
STA.L @VM70
CON
LDA ZF31990
CON
EXT
CON
ADD.L @VM70
CON
STA.L Z12
CON
MOV.L ZF31002:Z12 ZF31952:Z11
;	ZF31996 = ZF31996 + 4	'2ﾜｰﾄﾞ+2ﾜｰﾄﾞ=4ﾜｰﾄﾞ分
;
LD CR2002                ; 常時ON
LDA ZF31996
CON
EXT
CON
ADD.L +4
CON
STA ZF31996
;NEXT	
LD CR2002                ; 常時ON
INC ZF31994
LDB CR2009               ; 演算結果が負
CJ #2058
LABEL #2059
LABEL #1035
;
END
ENDH
