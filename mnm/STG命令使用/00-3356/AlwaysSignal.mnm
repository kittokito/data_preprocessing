DEVICE:53
;MODULE:AlwaysSignal
;MODULE_TYPE:0
;OneSystem Sub-Module
;
;---------------------------------------
;ModuleName	:	Always_Signal
;ModuleType	:	Sub Module
;Function	:	条件生成
;---------------------------------------
;<使用方法>
;ﾌﾟﾛｼﾞｪｸﾄ全体に関わる条件ｼｸﾞﾅﾙ生成は本ﾓｼﾞｭｰﾙに記述して下さい
;・ﾓｰｼｮﾝｺﾝﾄﾛｰﾙ動作許可
;・ｺﾐｭﾆｹｰｼｮﾝﾕﾆｯﾄ通信許可
;・ﾋｰﾀｰ電源ON
;など
;TPｶﾚﾝﾀﾞﾀｲﾏ自動同期
LD= CM703 #8             ; ｶﾚﾝﾀﾞﾀｲﾏ（時）
AND= CM704 #0            ; ｶﾚﾝﾀﾞﾀｲﾏ（分）
AND= CM705 #0            ; ｶﾚﾝﾀﾞﾀｲﾏ（秒）
SET @R010
STG @R010
MPS
LDA CM700                ; ｶﾚﾝﾀﾞﾀｲﾏ（年）
CON
ADD #32768
CON
TBCD
CON
STA DM3010               ; _MainTP　ｶﾚﾝﾀﾞﾀｲﾏ（設定値）
MRD
LDA CM701                ; ｶﾚﾝﾀﾞﾀｲﾏ（月）
CON
TBCD
CON
STA DM3011               ; _MainTP　ｶﾚﾝﾀﾞﾀｲﾏ（設定値）
MRD
LDA CM702                ; ｶﾚﾝﾀﾞﾀｲﾏ（日）
CON
TBCD
CON
STA DM3012               ; _MainTP　ｶﾚﾝﾀﾞﾀｲﾏ（設定値）
MRD
LDA CM703                ; ｶﾚﾝﾀﾞﾀｲﾏ（時）
CON
TBCD
CON
STA @DM21
MRD
LDA CM704                ; ｶﾚﾝﾀﾞﾀｲﾏ（分）
CON
TBCD
CON
STA @DM20
MRD
UNIB @DM20 DM3013 #2     ; _MainTP　ｶﾚﾝﾀﾞﾀｲﾏ（設定値）
MPP
JMP @R011
STG @R011
TMH @1 #5
CON
AND @T1
BRES DM3010 #15          ; _MainTP　ｶﾚﾝﾀﾞﾀｲﾏ（設定値）
CON
ENDS
;<h1/>塗布量制御
;Janomeからﾊﾟﾀｰﾝ変更信号が入ったら、塗布ﾊﾟﾀｰﾝを変更する。
LD CR2002                ; 常時ON
MPS
AND R1210                ; 塗布RB1 Prt変更信号0
OUT MR12000              ; 塗布1_DisPrgNo
MRD
AND R1211                ; 塗布RB1 Prt変更信号1
OUT MR12001              ; 塗布1_DisPrgNo
MRD
AND R1212                ; 塗布RB1 Prt変更信号2
OUT MR12002              ; 塗布1_DisPrgNo
MRD
PMOV MR12000 #0 MR7607 #0 #6;塗布1_DisPrgNo  塗布UT1 ﾃﾞｨｽﾍﾟﾝｻｰ1 ﾊﾟﾀｰﾝ番号0
MPP
AND R1209                ; 塗布RB1 Prt変更ｲﾈｰﾌﾞﾙ
TMH @0 #5
CON
AND @T0
SHOT #5 MR7606           ; 塗布UT1 ﾃﾞｨｽﾍﾟﾝｻｰ1 ﾊﾟﾀｰﾝｲﾈｰﾌﾞﾙ
LD CR2002                ; 常時ON
MPS
AND R1410                ; 塗布RB2 Prt変更信号0
OUT MR12100              ; 塗布2_DisPrgNo
MRD
AND R1411                ; 塗布RB2 Prt変更信号1
OUT MR12101              ; 塗布2_DisPrgNo
MRD
AND R1412                ; 塗布RB2 Prt変更信号2
OUT MR12102              ; 塗布2_DisPrgNo
MRD
PMOV MR12100 #0 MR7807 #0 #6;塗布2_DisPrgNo  塗布UT2 ﾃﾞｨｽﾍﾟﾝｻｰ3 ﾊﾟﾀｰﾝ番号0
MPP
AND R1409                ; 塗布RB2 Prt変更ｲﾈｰﾌﾞﾙ
SHOT #5 MR7806           ; 塗布UT2 ﾃﾞｨｽﾍﾟﾝｻｰ3 ﾊﾟﾀｰﾝｲﾈｰﾌﾞﾙ
END
ENDH
