DEVICE:52
;MODULE:Panel_Moni
;MODULE_TYPE:0
;SCRIPT_TYPE:
LD CR2008                ; 運転開始時1ｽｷｬﾝON
ORP T200                 ; 動作中遅延
LDB R51100               ; ｽｷｰｼﾞ(L)原点復帰完了
ANB R51108               ; 転写部(L) HOME完了
ANB R52100               ; ｽｷｰｼﾞ(R)原点復帰完了
ANB R52108               ; 転写部(R) HOME完了
ANB R50003               ; 原点復帰中
ANB R50007               ; 手動制御中
LDF R50006               ; 異常発生中
ORF R50901               ; ｼﾘﾝﾀﾞｰｴﾗｰ
ANL
ORL
MPS
AND LR300                ; 英語表示
MOV #0 DM3001            ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MRD
AND LR301                ; 日本語表示
MOV #100 DM3001          ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MPP
AND LR302                ; 中国語表示
MOV #200 DM3001          ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
LD R40004                ; 原点復帰完了解除
RES R51100               ; ｽｷｰｼﾞ(L)原点復帰完了
CON
RES R51108               ; 転写部(L) HOME完了
CON
RES R52100               ; ｽｷｰｼﾞ(R)原点復帰完了
CON
RES R52108               ; 転写部(R) HOME完了
LDB R50004               ; 動作中
ANB R40006               ; 停止中表示
SET R50005               ; 停止中
LD R50004                ; 動作中
RES R50005               ; 停止中
LD R50000                ; 即停止
OR R50900                ; TRAP
ANB R50004               ; 動作中
OUT R40006               ; 停止中表示
LD R50001                ; 自動中
OUT R40007               ; ﾊﾟﾈﾙ用自動動作中表示
;即停止　で、非常停止画面を表示
;Ｅｍｅｒｇｅｎｃｙ  ｓｃｒｅｅｎ  ｉｓ  ｄｉｓｐｌａｙｅｄ   ａｔ ｔｈｅ  ｔｉｍｅ  ｏｆ  ｃｏｎｔｒｏｌ ｓｔｏｐ.
LD R50000                ; 即停止
MPS
AND LR300                ; 英語表示
MOV #5 DM3001            ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MRD
AND LR301                ; 日本語表示
MOV #105 DM3001          ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MPP
AND LR302                ; 中国語表示
MOV #205 DM3001          ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
;原点復帰完了で、メイン画面に変わる。
;ＭＡＩＮ ｓｃｒｅｅｎ ｉｓ ｄｉｓｐｌａｙｅｄ ａｆｔｅｒ ｒｅｔｕｒｎ ｈｏｍｅ ｐｏｓｉｔｉｏｎ ｆｉｎｉｓｈ
;自動中は、メイン画面にＳＴＡＴＵＳに、自動中表示
;Ｄｉｓｐｌａｙｓ ｏｆ ＡＵＴＯ，ｄｕｒｉｎｇ ａｕｔｏ ｍｏｄｅ ｏｐｅｒａｔｉｏｎ
;異　常
;Ｅｒｒｏｒ
;
LD R55000                ; 即停止/TRAP 入力無し
LD T200                  ; 動作中遅延
OR R49915                ; 表示用　　 TRAP
ANL
LD R50006                ; 異常発生中
OR R50103                ; 警報ｾｯﾄﾌﾗｸﾞ
OR R50901                ; ｼﾘﾝﾀﾞｰｴﾗｰ
OR R50902                ; Trapしない   異常
OR R49915                ; 表示用　　 TRAP
ANL
MPS
AND LR300                ; 英語表示
MOV #10 DM3001           ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MRD
AND LR301                ; 日本語表示
MOV #110 DM3001          ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MPP
AND LR302                ; 中国語表示
MOV #210 DM3001          ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
LDP R50003               ; 原点復帰中
LD R50003                ; 原点復帰中
LDF R50006               ; 異常発生中
ORF R49110               ; ｾﾝｻｴﾗｰ
ANL
ORL
MPS
AND LR300                ; 英語表示
@MOV #2 DM3001           ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MRD
AND LR301                ; 日本語表示
@MOV #102 DM3001         ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MPP
AND LR302                ; 中国語表示
@MOV #202 DM3001         ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
LD R55000                ; 即停止/TRAP 入力無し
AND T200                 ; 動作中遅延
ANB R50006               ; 異常発生中
ANB R50103               ; 警報ｾｯﾄﾌﾗｸﾞ
ANB R50901               ; ｼﾘﾝﾀﾞｰｴﾗｰ
ANB R50902               ; Trapしない   異常
ANB R49915               ; 表示用　　 TRAP
ANB R51101               ; ｽｷｰｼﾞ(L)  原点復帰中
ANB R51109               ; 転写部(L) 原点復帰中
ANB R52101               ; ｽｷｰｼﾞ(R)  原点復帰中
ANB R52109               ; 転写部(R) 原点復帰中
MPS
LDB R50007               ; 手動制御中
AND R51100               ; ｽｷｰｼﾞ(L)原点復帰完了
AND R51108               ; 転写部(L) HOME完了
AND R52100               ; ｽｷｰｼﾞ(R)原点復帰完了
AND R52108               ; 転写部(R) HOME完了
ANL
MPS
AND LR300                ; 英語表示
@MOV #2 DM3001           ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MRD
AND LR301                ; 日本語表示
@MOV #102 DM3001         ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MPP
AND LR302                ; 中国語表示
@MOV #202 DM3001         ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MPP
AND R50007               ; 手動制御中
@MOV DM1080 DM3001       ; 手動制御ﾍﾟｰｼﾞNo.  VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
LD R50901                ; ｼﾘﾝﾀﾞｰｴﾗｰ
OUT R50200               ; ｼﾘﾝﾀﾞｰｴﾗｰ  ｳｨﾝﾄﾞｳ表示
LD<> DM500 #301          ; ｴﾗｰ内容表示
AND<> DM500 #501         ; ｴﾗｰ内容表示
AND<> DM500 #701         ; ｴﾗｰ内容表示
AND<> DM500 #361         ; ｴﾗｰ内容表示
AND<> DM500 #561         ; ｴﾗｰ内容表示
AND<> DM500 #761         ; ｴﾗｰ内容表示
AND<> DM500 #380         ; ｴﾗｰ内容表示
AND<> DM500 #580         ; ｴﾗｰ内容表示
AND<> DM500 #780         ; ｴﾗｰ内容表示
OUB R55200               ; Retry/Removeｳｨﾝﾄﾞｳ表示
LD<> DM500 #360          ; ｴﾗｰ内容表示
AND<> DM500 #560         ; ｴﾗｰ内容表示
AND<> DM500 #760         ; ｴﾗｰ内容表示
OUB R55201               ; Retry/Next levelｳｨﾝﾄﾞｳ表示
LD<> DM500 #369          ; ｴﾗｰ内容表示
AND<> DM500 #569         ; ｴﾗｰ内容表示
AND<> DM500 #769         ; ｴﾗｰ内容表示
AND<> DM500 #370         ; ｴﾗｰ内容表示
AND<> DM500 #570         ; ｴﾗｰ内容表示
AND<> DM500 #770         ; ｴﾗｰ内容表示
OUB R55202               ; Continue/Stopｳｨﾝﾄﾞｳ表示
LD<> DM500 #366          ; ｴﾗｰ内容表示
AND<> DM500 #566         ; ｴﾗｰ内容表示
AND<> DM500 #766         ; ｴﾗｰ内容表示
OUB R55203               ; Next Try/Stopｳｨﾝﾄﾞｳ表示
LD<> DM500 #366          ; ｴﾗｰ内容表示
AND<> DM500 #566         ; ｴﾗｰ内容表示
AND<> DM500 #766         ; ｴﾗｰ内容表示
AND<> DM500 #367         ; ｴﾗｰ内容表示
AND<> DM500 #567         ; ｴﾗｰ内容表示
AND<> DM500 #767         ; ｴﾗｰ内容表示
AND<> DM500 #368         ; ｴﾗｰ内容表示
AND<> DM500 #568         ; ｴﾗｰ内容表示
AND<> DM500 #768         ; ｴﾗｰ内容表示
OUB R55204               ; Next Carrier/Retryｳｨﾝﾄﾞｳ表示
LD<> DM500 #325          ; ｴﾗｰ内容表示
AND<> DM500 #525         ; ｴﾗｰ内容表示
AND<> DM500 #725         ; ｴﾗｰ内容表示
AND<> DM500 #355         ; ｴﾗｰ内容表示
AND<> DM500 #555         ; ｴﾗｰ内容表示
AND<> DM500 #755         ; ｴﾗｰ内容表示
OUB R55205               ; Retry/Wafwe Useｳｨﾝﾄﾞｳ表示
LD<> DM500 #376          ; ｴﾗｰ内容表示
AND<> DM500 #576         ; ｴﾗｰ内容表示
AND<> DM500 #776         ; ｴﾗｰ内容表示
OUB R55207               ; 照合状況ｳｨﾝﾄﾞ表示
;エラータイトル表示
;DM510 = (DM500-300)/16
;DM511 =  DM500-(DM510*16)-300
;Z5 = DM510
;BSET (DM2500:Z5,DM511)
LD R50006                ; 異常発生中
OR R49110                ; ｾﾝｻｴﾗｰ
NCJ #1000
;DM510 = (DM500-300)/16
;
LD CR2002                ; 常時ON
LDA DM500                ; ｴﾗｰ内容表示
CON
EXT
CON
SUB.L +300
CON
EXT.L
CON
DIV.L +16
CON
STA DM510                ; ｴﾗｰNo.表示用(ﾌﾗｸﾞｱﾄﾞﾚｽﾄ)
;DM511 =  DM500-(DM510*16)-300
;
LD CR2002                ; 常時ON
LDA DM510                ; ｴﾗｰNo.表示用(ﾌﾗｸﾞｱﾄﾞﾚｽﾄ)
CON
EXT
CON
MUL.L +16
CON
STA.L @VM0
CON
LDA DM500                ; ｴﾗｰ内容表示
CON
EXT
CON
SUB.L @VM0
CON
SUB.L +300
CON
STA DM511                ; ｴﾗｰNo.表示用(ﾌﾗｸﾞﾋﾟｯﾄ)
;Z5 = DM510
;
LD CR2002                ; 常時ON
LDA DM510                ; ｴﾗｰNo.表示用(ﾌﾗｸﾞｱﾄﾞﾚｽﾄ)
CON
EXT
CON
STA.L Z5
;BSET (DM2500:Z5,DM511)
LD CR2002                ; 常時ON
BSET DM2500:Z5 DM511     ; ERR 1-16  ｴﾗｰNo.表示用(ﾌﾗｸﾞﾋﾟｯﾄ)
LABEL #1000
;
LDB R50006               ; 異常発生中
ANB R49110               ; ｾﾝｻｴﾗｰ
ZRES DM2500 DM2531       ; ERR 1-16
;パラメーター選択画面
;Ｐａｒａｍｅｔｅｒ  Ｓｅｌｅｃｔｉｏｎ 
LD R40000                ; SET UP SW
AND R40005               ; SET UP 　　表示許可
MPS
AND LR300                ; 英語表示
@MOV #3 DM3001           ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MRD
AND LR301                ; 日本語表示
@MOV #103 DM3001         ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MPP
AND LR302                ; 中国語表示
@MOV #203 DM3001         ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
LD R50005                ; 停止中
OUT R40005               ; SET UP 　　表示許可
LD R50007                ; 手動制御中
@RES R52108              ; 転写部(R) HOME完了
CON
@RES R52100              ; ｽｷｰｼﾞ(R)原点復帰完了
CON
@RES R51108              ; 転写部(L) HOME完了
CON
@RES R51100              ; ｽｷｰｼﾞ(L)原点復帰完了
LD R40002                ; SET UP戻SW
MPS
LD R51100                ; ｽｷｰｼﾞ(L)原点復帰完了
AND R51108               ; 転写部(L) HOME完了
AND R52100               ; ｽｷｰｼﾞ(R)原点復帰完了
AND R52108               ; 転写部(R) HOME完了
ANL
MPS
AND LR300                ; 英語表示
@MOV #2 DM3001           ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MRD
AND LR301                ; 日本語表示
@MOV #102 DM3001         ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MPP
AND LR302                ; 中国語表示
@MOV #202 DM3001         ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MPP
LDB R51100               ; ｽｷｰｼﾞ(L)原点復帰完了
ORB R51108               ; 転写部(L) HOME完了
ORB R52100               ; ｽｷｰｼﾞ(R)原点復帰完了
ORB R52108               ; 転写部(R) HOME完了
ANL
MPS
AND LR300                ; 英語表示
MOV #0 DM3001            ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MRD
AND LR301                ; 日本語表示
MOV #100 DM3001          ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MPP
AND LR302                ; 中国語表示
MOV #200 DM3001          ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
;STEP動作選択画面
;STEP Operation Selection 
LDF R50102               ; 手動ﾓｰﾄﾞSW
AND R50005               ; 停止中
AND R51100               ; ｽｷｰｼﾞ(L)原点復帰完了
AND R51108               ; 転写部(L) HOME完了
AND R52100               ; ｽｷｰｼﾞ(R)原点復帰完了
AND R52108               ; 転写部(R) HOME完了
MPS
AND LR300                ; 英語表示
@MOV #24 DM3001          ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MRD
AND LR301                ; 日本語表示
@MOV #124 DM3001         ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MPP
AND LR302                ; 中国語表示
@MOV #224 DM3001         ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
;STEP ｷｬﾘｱ交換画面
;STEP Carrier Change Monitor 
LD R53901                ; ｷｬﾘﾔ交換中
ANB R50006               ; 異常発生中
ANB R49110               ; ｾﾝｻｴﾗｰ
AND R50002               ; 手動中
LD LR104                 ; 手動選択4
OR LR105                 ; 手動選択5
OR LR106                 ; 手動選択6
ANL
TMR @0 #2
CON
AND @T0
MPS
AND LR300                ; 英語表示
@MOV #40 DM3001          ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MRD
AND LR301                ; 日本語表示
@MOV #140 DM3001         ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MPP
AND LR302                ; 中国語表示
@MOV #240 DM3001         ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
LDF R53901               ; ｷｬﾘﾔ交換中
MPS
AND LR300                ; 英語表示
@MOV #2 DM3001           ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MRD
AND LR301                ; 日本語表示
@MOV #102 DM3001         ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MPP
AND LR302                ; 中国語表示
@MOV #202 DM3001         ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
;パネル表示言語選択
;Ｐａｎｅｌ  Ｌａｎｇｕｅｇｅ  Ｓｅｌｅｃｔｉｏｎ
LDB LR301                ; 日本語表示
ANB LR302                ; 中国語表示
ANP T200                 ; 動作中遅延
OR R50208                ; 英語選択 SW
@MOV $0001 LR300         ; 英語表示
LD R50209                ; 日本語選択    SW
@MOV $0002 LR300         ; 英語表示
LD R50210                ; 中国語選択　  SW
@MOV $0004 LR300         ; 英語表示
;エラー
;ＴＲＡＰしないで、異常信号のみ出力
LD CR2003                ; 常時OFF
AND R50503               ; 真空吸着ｴﾗｰ表示中
OR R50606                ; Trapしない   異常
OUT R50902               ; Trapしない   異常
LD R50901                ; ｼﾘﾝﾀﾞｰｴﾗｰ
OR R50902                ; Trapしない   異常
OUT R55100               ; ERROR
END
ENDH
