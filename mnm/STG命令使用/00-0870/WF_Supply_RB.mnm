DEVICE:52
;MODULE:WF_Supply_RB
;MODULE_TYPE:0
;SCRIPT_TYPE:
LD R50000                ; 即停止
OR R50900                ; TRAP
OR R50914                ; HOMEsw ON
ZRES @MR015 @MR5115      ; RB 起動完了
LDB LR201                ; 手動ﾓｰﾄﾞ　   選択
ANB R50003               ; 原点復帰中
OUT MR2307               ; RB Speed_Hight
;RBﾊﾝﾄﾞ吸着確認
;RB Hand Adsorp Confirmation
LDB MR2309               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ真空破壊
AND MR2308               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ吸着
MPS
AND R4800                ; RBﾊﾝﾄﾞ吸着 OUT1
TMR @52 #2               ; ｳｪﾊｰ吸着   検出時間
CON
AND @T52                 ; ｳｪﾊｰ吸着   検出時間
OUT @MR000               ; RBﾊﾝﾄﾞ 吸着検出
MRD
ANB R4800                ; RBﾊﾝﾄﾞ吸着 OUT1
TMR @53 #30              ; ｳｪﾊｰ吸着   未検出時間
CON
AND @T53                 ; ｳｪﾊｰ吸着   未検出時間
OUT @MR001               ; RBﾊﾝﾄﾞ 未吸着検出
MRD
AND R4801                ; RBﾊﾝﾄﾞ吸着 OUT2
TMR @54 #5
CON
AND @T54
OUT @MR002               ; RBﾊﾝﾄﾞ 除材検出
MPP
ANB R4801                ; RBﾊﾝﾄﾞ吸着 OUT2
TMR @55 #10
CON
AND @T55
OUT @MR003               ; RBﾊﾝﾄﾞ 未除材検出
;WF治具(L)吸着確認
;WF Jig(L) Adsorp Confirmation
LDB MR2311               ; ｳｪﾊｰ治具(L)真空破壊
AND MR2310               ; ｳｪﾊｰ治具(L)吸着
MPS
AND R4802                ; 治具(L)吸着 OUT1
TMR @56 #2
CON
AND @T56
OUT @MR004               ; ｳｪﾊｰ治具  吸着検出
MRD
ANB R4802                ; 治具(L)吸着 OUT1
TMR @57 #30
CON
AND @T57
OUT @MR005               ; ｳｪﾊｰ治具  未吸着検出
MRD
AND R4803                ; 治具(L)吸着 OUT2
TMR @58 #10
CON
AND @T58
OUT @MR006               ; ｳｪﾊｰ治具  除材検出
MPP
ANB R4803                ; 治具(L)吸着 OUT2
TMR @59 #10
CON
AND @T59
OUT @MR007               ; ｳｪﾊｰ治具  未除材検出
;RB 旋回可能確認
;RB Turn Confirmation
LD CR2002                ; 常時ON
PMOV R1210 #0 DM1005 #0 #5;RB mode 1  RB ﾓｰﾄﾞNo.ｱﾝｻ
LD<> DM1005 #0           ; RB ﾓｰﾄﾞNo.ｱﾝｻ
AND<> DM1005 #3          ; RB ﾓｰﾄﾞNo.ｱﾝｻ
AND<> DM1005 #4          ; RB ﾓｰﾄﾞNo.ｱﾝｻ
AND<> DM1005 #8          ; RB ﾓｰﾄﾞNo.ｱﾝｻ
AND<> DM1005 #11         ; RB ﾓｰﾄﾞNo.ｱﾝｻ
AND<> DM1005 #12         ; RB ﾓｰﾄﾞNo.ｱﾝｻ
OUT @MR100               ; RB 旋回可能位置
;治具(L)ｳｪﾊｰ受取位置確認
;Wafer Jig(L) receive Confirmation
LD R6000                 ; ｳｪﾊｰ治具(L) 前進(RB側)
ANB R4001                ; 治具(L) 後退限
AND R4000                ; 治具(L) 前進限(RB側)
AND R6003                ; ｳｪﾊｰ治具(L) 左行(RB側)
ANB R4002                ; 治具(L) 転写限（右限）
AND R4003                ; 治具(L) RB側限(左限)
OUT @MR107               ; 治具(L)WF受取OK
;ｷｬﾘｱ(L)ｼｬｯﾀｰ開閉確認
;Carrier Shutter(L) Open/Close Confirmation
LD< DM1005 #3            ; RB ﾓｰﾄﾞNo.ｱﾝｻ
OR> DM1005 #5            ; RB ﾓｰﾄﾞNo.ｱﾝｻ
AND<> DM1005 #0          ; RB ﾓｰﾄﾞNo.ｱﾝｻ
OUT @MR108               ; ｷｬﾘｱ(L)ｼｬｯﾀ閉OK FLG
LD R003                  ; ｷｬﾘﾔ扉入力
ANB R501                 ; ｷｬﾘｱ扉  ﾛｯｸ解除
OUT @MR109               ; ｷｬﾘｱ(L)ｼｬｯﾀ開OK FLG
;ｷｬﾘｱｸﾗﾝﾌﾟ 開閉確認
;Carrier Clamp Open/Close Confirmation
LDB R4602                ; ｷｬﾘﾔｸﾗﾝﾌﾟ1 ｸﾗﾝﾌﾟ側
AND R4603                ; ｷｬﾘﾔｸﾗﾝﾌﾟ1 解除側
ANB R4604                ; ｷｬﾘﾔｸﾗﾝﾌﾟ2 ｸﾗﾝﾌﾟ側
AND R4605                ; ｷｬﾘﾔｸﾗﾝﾌﾟ2 解除側
OUT @MR110               ; ｷｬﾘｱｸﾗﾝﾌﾟ　解除OK　FLG
LD R4602                 ; ｷｬﾘﾔｸﾗﾝﾌﾟ1 ｸﾗﾝﾌﾟ側
ANB R4603                ; ｷｬﾘﾔｸﾗﾝﾌﾟ1 解除側
AND R4604                ; ｷｬﾘﾔｸﾗﾝﾌﾟ2 ｸﾗﾝﾌﾟ側
ANB R4605                ; ｷｬﾘﾔｸﾗﾝﾌﾟ2 解除側
OUT @MR111               ; ｷｬﾘﾔｸﾗﾝﾌﾟ　閉OK　FLG
;ｱﾗｲﾒﾝﾄ 開閉確認
;Alignment Open/Close Confirmation
LDB R4106                ; ｱﾗｲﾒﾝﾄ1 閉限
ANB R4108                ; ｱﾗｲﾒﾝﾄ2 閉限
ANB R4110                ; ｱﾗｲﾒﾝﾄ3 閉限
AND R4107                ; ｱﾗｲﾒﾝﾄ1 開限
AND R4109                ; ｱﾗｲﾒﾝﾄ2 開限
AND R4111                ; ｱﾗｲﾒﾝﾄ3 開限
OUT @MR112               ; ｱﾗｲﾒﾝﾄ 開 OK FLG
LD R4106                 ; ｱﾗｲﾒﾝﾄ1 閉限
AND R4108                ; ｱﾗｲﾒﾝﾄ2 閉限
AND R4110                ; ｱﾗｲﾒﾝﾄ3 閉限
ANB R4107                ; ｱﾗｲﾒﾝﾄ1 開限
ANB R4109                ; ｱﾗｲﾒﾝﾄ2 開限
ANB R4111                ; ｱﾗｲﾒﾝﾄ3 開限
OUT @MR113               ; ｱﾗｲﾒﾝﾄ 閉 OK FLG
;RB ｷｬﾘｱｰ移動確認
;RB Carrier move Confirmation
LDB R53901               ; ｷｬﾘﾔ交換中
LD R4701                 ; ｷｬﾘﾔ 浮き検出 OFF=浮き
OR @MR111                ; ｷｬﾘﾔｸﾗﾝﾌﾟ　閉OK　FLG
ANL
AND R003                 ; ｷｬﾘﾔ扉入力
ANB R501                 ; ｷｬﾘｱ扉  ﾛｯｸ解除
AND R6304                ; ｳｪﾊｰ取出ｼｬｯﾀｰ 開
ANB R4601                ; ｳｪﾊｰ取出しｼｬｯﾀｰ 閉限
AND R4600                ; ｳｪﾊｰ取出しｼｬｯﾀｰ 開限
ANB R6309                ; ｷｬﾘﾔ旋回　ｷｬﾘﾔSET側
AND R6308                ; ｷｬﾘﾔ旋回　WF取出し側
AND @MR111               ; ｷｬﾘﾔｸﾗﾝﾌﾟ　閉OK　FLG
TMH @69 #20
CON
AND @T69
OUT @MR114               ; RB ｷｬﾘﾔ移動OKFLG
;RB ｱﾗｲﾒﾝﾄ移動確認
;RB Alignment move Confirmation
LDB R6106                ; ｱﾗｲﾒﾝﾄ　閉
ANB R4106                ; ｱﾗｲﾒﾝﾄ1 閉限
ANB R4108                ; ｱﾗｲﾒﾝﾄ2 閉限
ANB R4110                ; ｱﾗｲﾒﾝﾄ3 閉限
AND R4107                ; ｱﾗｲﾒﾝﾄ1 開限
AND R4109                ; ｱﾗｲﾒﾝﾄ2 開限
AND R4111                ; ｱﾗｲﾒﾝﾄ3 開限
OUT @MR115               ; RB WFｱﾗｲﾅｰ移動OKFLG
;RB 起動
;RB STRAT
LD CR2002                ; 常時ON
AND CR2007               ; 運転開始時1ｽｷｬﾝOFF
AND R55000               ; 即停止/TRAP 入力無し
ANB R49915               ; 表示用　　 TRAP
ANB @MR015               ; RB 起動完了
@SET @MR200              ; RB起動開始
STG @MR200               ; RB起動開始
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND R003                 ; ｷｬﾘﾔ扉入力
SET MR2204               ; RB stop
CON
TMR @4 #5
CON
AND @T4
JMP @MR201               ; 201
STG @MR201               ; 201
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES MR2204               ; RB stop
CON
SET MR503                ; RBﾗｯﾁ解除
CON
SET MR2207               ; RB reset
CON
TMR @5 #5
CON
AND @T5
JMP @MR202               ; 202
STG @MR202               ; 202
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES MR503                ; RBﾗｯﾁ解除
CON
RES MR2207               ; RB reset
CON
TMR @6 #5
CON
AND @T6
JMP @MR203               ; 203
STG @MR203               ; 203
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND R1200                ; RB Ready
SET MR2200               ; RB start
CON
JMP @MR204               ; 204
STG @MR204               ; 204
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
ANB R1200                ; RB Ready
TMH @100 #5
CON
AND @T100
RES MR2200               ; RB start
CON
JMP @MR205               ; 205
STG @MR205               ; 205
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND R1201                ; RB Running
TMR @101 #20
CON
AND @T101
JMP @MR206               ; 206
STG @MR206               ; 206
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
SET @MR015               ; RB 起動完了
CON
ENDS
;RB 動作
;RB Operation
STG @MR300               ; RB 動作開始
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
TMH @13 #5
CON
AND @T13
SET @MR314               ; RB 動作　指示中
CON
JMP @MR301               ; 301
STG @MR301               ; 301
AND @MR015               ; RB 起動完了
AND R1201                ; RB Running
ANB R1208                ; RB 動作中
TMH @102 #50
CON
AND @T102
SET MR2208               ; RB mode start
CON
JMP @MR302               ; 302
STG @MR302               ; 302
AND R1208                ; RB 動作中
RES MR2208               ; RB mode start
CON
JMP @MR303               ; 303
STG @MR303               ; 303
AND R1209                ; RB 完了
RES @MR314               ; RB 動作　指示中
CON
SET @MR315               ; RB 動作完了
CON
ENDS
;******* RB ｳｪﾊｰ取出し動作  / RB Subroutine ********
;
;RB ｳｪﾊｰ取出し開始
;RB take out Start 
STG R53200               ; RB WF取出し   call
SET R53214               ; RB WF取出しcall 実行中
CON
AND R53214               ; RB WF取出しcall 実行中
JMP @MR2000              ; WF取出し 待機へ
;RB取出し待機位置移動
;RB Move to take out wait
STG @MR2000              ; WF取出し 待機へ
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
SET R53001               ; RB 取出し待機要求
CON
JMP @MR2001              ; 2001
STG @MR2001              ; 2001
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND R53101               ; RB 取出し待機終了
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
RES R53101               ; RB 取出し待機終了
CON
JMP @MR2002              ; 動作前ｳｪﾊｰﾁｪｯｸ
STG @MR2002              ; 動作前ｳｪﾊｰﾁｪｯｸ
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
MPS
ANB R50002               ; 手動中
MPS
LDB R49800               ; ｻｲｸﾙ停止・払出し開始
OR R49710                ; WF 再取出し要求
ANL
JMP @MR2003              ; 2003
MPP
LD R49800                ; ｻｲｸﾙ停止・払出し開始
ANB R49710               ; WF 再取出し要求
ANL
JMP @MR2714              ; 取出失敗終了処理
MPP
AND R50002               ; 手動中
JMP @MR2100              ; ｷｬﾘﾔ確認
;RBﾊﾝﾄﾞ上ｳｪﾊｰﾁｪｯｸ
;Wafer on RB Hand Check 
STG @MR2003              ; 2003
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES MR2309               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ真空破壊
CON
SET MR2308               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ吸着
CON
MPS
AND @MR002               ; RBﾊﾝﾄﾞ 除材検出
JMP @MR2007              ; RBﾊﾝﾄﾞｾﾝｻｰﾁｪｯｸ
MPP
AND @MR003               ; RBﾊﾝﾄﾞ 未除材検出
SET MR700                ; 給材RBﾊﾝﾄﾞﾜｰｸ除材要求
CON
JMP @MR2004              ; RBﾊﾝﾄﾞWF除材要求
;RBﾊﾝﾄﾞ上ｳｪﾊｰ残りの場合
;when Wafer Remain on RB Hand
STG @MR2004              ; RBﾊﾝﾄﾞWF除材要求
ANB MR700                ; 給材RBﾊﾝﾄﾞﾜｰｸ除材要求
AND R50115               ; Err RB UT
AND R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
RES MR2308               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ吸着
CON
SET R51006               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点滅
CON
JMP @MR2005              ; 2005
STG @MR2005              ; 2005
AND R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
JMP @MR2006              ; 2006
STG @MR2006              ; 2006
ANB R50115               ; Err RB UT
ANB R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
ANB R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
SET R51007               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点灯
CON
MPS
AND R50001               ; 自動中
SET MR2308               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ吸着
CON
JMP @MR2003              ; 2003
MPP
AND R50002               ; 手動中
JMP @MR2714              ; 取出失敗終了処理
;RBﾊﾝﾄﾞｾﾝｻｰﾁｪｯｸ
;RB Hand Sensor Check
STG @MR2007              ; RBﾊﾝﾄﾞｾﾝｻｰﾁｪｯｸ
RES MR2308               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ吸着
CON
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES MR2309               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ真空破壊
CON
RES MR2308               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ吸着
CON
MPS
AND R4300                ; RBﾊﾝﾄﾞ ｳｪﾊｰ無し検出　ON=なし
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR2100              ; ｷｬﾘﾔ確認
MPP
ANB R4300                ; RBﾊﾝﾄﾞ ｳｪﾊｰ無し検出　ON=なし
SET MR615                ; 給材RBﾊﾝﾄﾞｾﾝｻｰ異常
CON
JMP @MR2008              ; RBﾊﾝﾄﾞｾﾝｻｰ異常
;RBﾊﾝﾄﾞｳｪﾊｰ検出ｾﾝｻｰ異常の場合
;when Sensor Error
STG @MR2008              ; RBﾊﾝﾄﾞｾﾝｻｰ異常
ANB MR615                ; 給材RBﾊﾝﾄﾞｾﾝｻｰ異常
AND R50115               ; Err RB UT
AND R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
SET R51006               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点滅
CON
JMP @MR2009              ; 2009
STG @MR2009              ; 2009
AND R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
JMP @MR2010              ; 2010
STG @MR2010              ; 2010
ANB R50115               ; Err RB UT
ANB R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
ANB R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
SET R51007               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点灯
CON
MPS
AND R50001               ; 自動中
JMP @MR2007              ; RBﾊﾝﾄﾞｾﾝｻｰﾁｪｯｸ
MPP
AND R50002               ; 手動中
JMP @MR2714              ; 取出失敗終了処理
;ｷｬﾘﾔ状態確認
;Carrier State Check
STG @MR2100              ; ｷｬﾘﾔ確認
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
MPS
LDB R49800               ; ｻｲｸﾙ停止・払出し開始
OR R49710                ; WF 再取出し要求
ANL
MPS
LD @MR114                ; RB ｷｬﾘﾔ移動OKFLG
AND R4700                ; ｷｬﾘﾔ ｳｪﾊｰ検出 ON=有
ANL
TMH @71 #20
CON
AND @T71
JMP @MR2500              ; WF取出し 準備
MPP
LDB @MR114               ; RB ｷｬﾘﾔ移動OKFLG
ORB R4700                ; ｷｬﾘﾔ ｳｪﾊｰ検出 ON=有
ANL
MPS
LD R53901                ; ｷｬﾘﾔ交換中
ORB R003                 ; ｷｬﾘﾔ扉入力
ANL
MPS
TMR #17 DM34             ; ｷｬﾘﾔ交換待ち時間
CON
AND T17
SET MR701                ; ｷｬﾘﾔ交換要求
CON
JMP @MR2408              ; ｷｬﾘﾔ交換ﾀｲﾑｵｰﾊﾞｰ
MPP
AND R50002               ; 手動中
SET MR701                ; ｷｬﾘﾔ交換要求
CON
JMP @MR2408              ; ｷｬﾘﾔ交換ﾀｲﾑｵｰﾊﾞｰ
MPP
LDB R53901               ; ｷｬﾘﾔ交換中
AND R003                 ; ｷｬﾘﾔ扉入力
ANL
MPS
AND R4606                ; ｷｬﾘﾔ旋回 WF取出し側
MPS
AND R4700                ; ｷｬﾘﾔ ｳｪﾊｰ検出 ON=有
MPS
LD @MR111                ; ｷｬﾘﾔｸﾗﾝﾌﾟ　閉OK　FLG
OR R4701                 ; ｷｬﾘﾔ 浮き検出 OFF=浮き
ANL
JMP @MR2400              ; 左扉ﾛｯｸ → ｼｬｯﾀｰ開
MPP
LD CR2003                ; 常時OFF
ANB R4701                ; ｷｬﾘﾔ 浮き検出 OFF=浮き
ANL
JMP @MR2101              ; ｷｬﾘﾔ浮き
MPP
ANB R4700                ; ｷｬﾘﾔ ｳｪﾊｰ検出 ON=有
@SET R50100              ; 自動ﾓｰﾄﾞ停止PLS
CON
JMP @MR2300              ; ｷｬﾘﾔ WF無し
MPP
LDB R4606                ; ｷｬﾘﾔ旋回 WF取出し側
ORB @MR111               ; ｷｬﾘﾔｸﾗﾝﾌﾟ　閉OK　FLG
ANL
JMP @MR2200              ; ｷｬﾘﾔ　未固定
MPP
LD R49800                ; ｻｲｸﾙ停止・払出し開始
ANB R49710               ; WF 再取出し要求
ANL
JMP @MR2714              ; 取出失敗終了処理
;ｷｬﾘﾔ浮き【YES : Retry  /  NO  : Carrier Change】
;Carrier Float Error
STG @MR2101              ; ｷｬﾘﾔ浮き
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND @MR108               ; ｷｬﾘｱ(L)ｼｬｯﾀ閉OK FLG
RES MR6304               ; ｳｪﾊｰ取出しｼｬｯﾀｰ 開
CON
SET MR6305               ; ｳｪﾊｰ取出しｼｬｯﾀｰ 閉
CON
ANB R4600                ; ｳｪﾊｰ取出しｼｬｯﾀｰ 開限
AND R4601                ; ｳｪﾊｰ取出しｼｬｯﾀｰ 閉限
JMP @MR2102              ; 2102
STG @MR2102              ; 2102
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
SET MR501                ; ｷｬﾘｱ扉  ﾛｯｸ解除
CON
SET MR703                ; ｷｬﾘｱ浮き検出
CON
JMP @MR2103              ; 2103
STG @MR2103              ; 2103
ANB MR703                ; ｷｬﾘｱ浮き検出
AND R50115               ; Err RB UT
AND R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
SET R51006               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点滅
CON
JMP @MR2104              ; 2104
STG @MR2104              ; 2104
AND R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
JMP @MR2105              ; 2105
STG @MR2105              ; 2105
ANB R50115               ; Err RB UT
ANB R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
ANB R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
SET R51007               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点灯
CON
MPS
AND R50001               ; 自動中
MPS
ANB R40009               ; ｴﾗｰｳｨﾝﾄﾞｩ YES sw
JMP @MR2100              ; ｷｬﾘﾔ確認
MPP
AND R40009               ; ｴﾗｰｳｨﾝﾄﾞｩ YES sw
JMP @MR2106              ; 2106
MPP
AND R50002               ; 手動中
RES R40009               ; ｴﾗｰｳｨﾝﾄﾞｩ YES sw
CON
JMP @MR2714              ; 取出失敗終了処理
;Retry
STG @MR2106              ; 2106
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES R40009               ; ｴﾗｰｳｨﾝﾄﾞｩ YES sw
CON
RES MR501                ; ｷｬﾘｱ扉  ﾛｯｸ解除
CON
JMP @MR2107
STG @MR2107
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND R003                 ; ｷｬﾘﾔ扉入力
SET R53900               ; ｷｬﾘｱ交換要求
CON
JMP @MR2100              ; ｷｬﾘﾔ確認
;ｷｬﾘﾔｳｪﾊｰ無し
;Carrier No Wafer Error
STG @MR2200              ; ｷｬﾘﾔ　未固定
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES MR501                ; ｷｬﾘｱ扉  ﾛｯｸ解除
CON
RES MR6307               ; ｷｬﾘｱ      固定解除
CON
SET MR6306               ; ｷｬﾘｱ      固定
CON
AND @MR111               ; ｷｬﾘﾔｸﾗﾝﾌﾟ　閉OK　FLG
JMP @MR2201              ; 2201
STG @MR2201              ; 2201
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES MR6309               ; ｷｬﾘﾔ旋回　ｷｬﾘﾔｾｯﾄ側
CON
SET MR6308               ; ｷｬﾘﾔ旋回　WF取出し側
CON
ANB R4607                ; ｷｬﾘﾔ旋回 ｷｬﾘﾔｾｯﾄ側
AND R4606                ; ｷｬﾘﾔ旋回 WF取出し側
JMP @MR2100              ; ｷｬﾘﾔ確認
;ｷｬﾘﾔｳｪﾊｰ無し
;Carrier No Wafer Error
STG @MR2300              ; ｷｬﾘﾔ WF無し
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
SET R53900               ; ｷｬﾘｱ交換要求
CON
JMP @MR2301              ; 2301
STG @MR2301              ; 2301
ANB MR701                ; ｷｬﾘﾔ交換要求
AND R50115               ; Err RB UT
AND R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
JMP @MR2302              ; 2302
STG @MR2302              ; 2302
AND R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
JMP @MR2303              ; 2303
STG @MR2303              ; 2303
ANB R50115               ; Err RB UT
ANB R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
ANB R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
SET R51007               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点灯
CON
JMP @MR2714              ; 取出失敗終了処理
;ｷｬﾘｱ(L)ｼｬｯﾀｰ　開
;Carrier(L) Shutter Open
STG @MR2400              ; 左扉ﾛｯｸ → ｼｬｯﾀｰ開
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES MR501                ; ｷｬﾘｱ扉  ﾛｯｸ解除
CON
JMP @MR2401              ; 2401
STG @MR2401              ; 2401
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND R003                 ; ｷｬﾘﾔ扉入力
AND @MR109               ; ｷｬﾘｱ(L)ｼｬｯﾀ開OK FLG
RES MR6305               ; ｳｪﾊｰ取出しｼｬｯﾀｰ 閉
CON
SET MR6304               ; ｳｪﾊｰ取出しｼｬｯﾀｰ 開
CON
ANB R4601                ; ｳｪﾊｰ取出しｼｬｯﾀｰ 閉限
AND R4600                ; ｳｪﾊｰ取出しｼｬｯﾀｰ 開限
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR2100              ; ｷｬﾘﾔ確認
;ｷｬﾘｱ交換ﾀｲﾑｵｰﾊﾞｰ
;Carrier Change Time Over
STG @MR2408              ; ｷｬﾘﾔ交換ﾀｲﾑｵｰﾊﾞｰ
ANB MR701                ; ｷｬﾘﾔ交換要求
AND R50115               ; Err RB UT
AND R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
SET R51006               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点滅
CON
JMP @MR2410              ; 2410
STG @MR2410              ; 2410
AND R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
JMP @MR2411              ; 2411
STG @MR2411              ; 2411
ANB R50115               ; Err RB UT
ANB R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
ANB R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
SET R51007               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点灯
CON
MPS
AND R50001               ; 自動中
MPS
ANB R40009               ; ｴﾗｰｳｨﾝﾄﾞｩ YES sw
JMP @MR2100              ; ｷｬﾘﾔ確認
MPP
AND R40009               ; ｴﾗｰｳｨﾝﾄﾞｩ YES sw
@SET R50100              ; 自動ﾓｰﾄﾞ停止PLS
CON
JMP @MR2714              ; 取出失敗終了処理
MPP
AND R50002               ; 手動中
JMP @MR2714              ; 取出失敗終了処理
;RB取出し準備移動
;RB Move to take out preparation
STG @MR2500              ; WF取出し 準備
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
SET R55002               ; S.RB_WF取出ｴﾘｱ進入中
CON
SET R53002               ; RB 取出し準備要求
CON
JMP @MR2501              ; 2501
STG @MR2501              ; 2501
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND R53102               ; RB 取出し準備終了
TMR @72 #5
CON
AND @T72
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
RES R53102               ; RB 取出し準備終了
CON
JMP @MR2502              ; RBﾊﾝﾄﾞ吸着
;RB取出し動作
;RB Take out Wafer
STG @MR2502              ; RBﾊﾝﾄﾞ吸着
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
SET R53003               ; RB 取出し動作要求
CON
JMP @MR2503              ; WF取出し 動作
STG @MR2503              ; WF取出し 動作
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND R53103               ; RB 取出し動作終了
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
RES R53103               ; RB 取出し動作終了
CON
JMP @MR2504              ; 2504
STG @MR2504              ; 2504
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES MR2309               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ真空破壊
CON
SET MR2308               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ吸着
CON
TMH @70 #20
CON
AND @T70
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR2505              ; ｳｪﾊｰ吸着確認
;RBﾊﾝﾄﾞｳｪﾊｰ吸着ﾁｪｯｸ
;RB Hand Wafer Adsoption Check
STG @MR2505              ; ｳｪﾊｰ吸着確認
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
MPS
LDB R4300                ; RBﾊﾝﾄﾞ ｳｪﾊｰ無し検出　ON=なし
AND @MR000               ; RBﾊﾝﾄﾞ 吸着検出
OR R50002                ; 手動中
ANL
JMP @MR2700              ; WF取出し 完了動作
MPP
LD R4300                 ; RBﾊﾝﾄﾞ ｳｪﾊｰ無し検出　ON=なし
OR @MR001                ; RBﾊﾝﾄﾞ 未吸着検出
ANB R50002               ; 手動中
ANL
SET MR612                ; 給材RB WF無し
CON
JMP @MR2600              ; RBﾊﾝﾄﾞ吸着異常
;RBﾊﾝﾄﾞｳｪﾊｰ吸着異常の場合　【YES : Try Next Level Wafer  /  NO : Retry】
;RB Hand Wafer adsorption Error
STG @MR2600              ; RBﾊﾝﾄﾞ吸着異常
ANB MR612                ; 給材RB WF無し
AND R50115               ; Err RB UT
AND R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
SET R51006               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点滅
CON
JMP @MR2601              ; 2507
STG @MR2601              ; 2507
AND R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
RES MR2308               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ吸着
CON
JMP @MR2602              ; 2508
STG @MR2602              ; 2508
ANB R50115               ; Err RB UT
ANB R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
ANB R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
SET R51007               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点灯
CON
TMR @12 #10
CON
AND @T12
MPS
ANB R40009               ; ｴﾗｰｳｨﾝﾄﾞｩ YES sw
SET MR2308               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ吸着
CON
JMP @MR2505              ; ｳｪﾊｰ吸着確認
MPP
AND R40009               ; ｴﾗｰｳｨﾝﾄﾞｩ YES sw
JMP @MR2603              ; 次段取出し準備
;RB 次段取出し準備
;RB Next Wafer Take out Preparation
STG @MR2603              ; 次段取出し準備
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES R40009               ; ｴﾗｰｳｨﾝﾄﾞｩ YES sw
CON
RES MR2309               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ真空破壊
CON
SET MR2308               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ吸着
CON
MPS
LD R4300                 ; RBﾊﾝﾄﾞ ｳｪﾊｰ無し検出　ON=なし
AND @MR002               ; RBﾊﾝﾄﾞ 除材検出
ANL
RES MR2308               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ吸着
CON
JMP @MR2604              ; 2510
MPP
LDB R4300                ; RBﾊﾝﾄﾞ ｳｪﾊｰ無し検出　ON=なし
OR @MR003                ; RBﾊﾝﾄﾞ 未除材検出
ANL
SET MR2308               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ吸着
CON
JMP @MR2604              ; 2510
STG @MR2604              ; 2510
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
SET R53004               ; RB 取出し完了要求
CON
JMP @MR2605              ; 2511
STG @MR2605              ; 2511
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND R53104               ; RB 取出し完了終了
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
RES R53104               ; RB 取出し完了終了
CON
JMP @MR2606              ; 2512
;ｳｪﾊｰ残ﾁｪｯｸ
;Wafer rmain check
STG @MR2606              ; 2512
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES MR2309               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ真空破壊
CON
SET MR2308               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ吸着
CON
MPS
LD R4300                 ; RBﾊﾝﾄﾞ ｳｪﾊｰ無し検出　ON=なし
AND @MR002               ; RBﾊﾝﾄﾞ 除材検出
ANL
JMP @MR2607              ; 2513
MPP
LDB R4300                ; RBﾊﾝﾄﾞ ｳｪﾊｰ無し検出　ON=なし
OR @MR003                ; RBﾊﾝﾄﾞ 未除材検出
ANL
RES MR2308               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ吸着
CON
SET MR700                ; 給材RBﾊﾝﾄﾞﾜｰｸ除材要求
CON
JMP @MR2608              ; 2514
STG @MR2607              ; 2513
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES R55002               ; S.RB_WF取出ｴﾘｱ進入中
CON
RES MR2309               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ真空破壊
CON
RES MR2308               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ吸着
CON
INC DM1000               ; ｷｬﾘｱ段No.
CON
JMP @MR2000              ; WF取出し 待機へ
;ｳｪﾊｰ残の時
;when Wafer remain on RB hand
STG @MR2608              ; 2514
ANB MR700                ; 給材RBﾊﾝﾄﾞﾜｰｸ除材要求
AND R50115               ; Err RB UT
AND R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
SET R51006               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点滅
CON
JMP @MR2609              ; 2515
STG @MR2609              ; 2515
AND R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
JMP @MR2610              ; 2600
STG @MR2610              ; 2600
ANB R50115               ; Err RB UT
ANB R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
ANB R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
SET R51007               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点灯
CON
JMP @MR2606              ; 2512
;RB取出し完了移動
;RB Move to take out Finish
STG @MR2700              ; WF取出し 完了動作
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
SET R53004               ; RB 取出し完了要求
CON
JMP @MR2701              ; 2603
STG @MR2701              ; 2603
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND R53104               ; RB 取出し完了終了
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
INC DM1000               ; ｷｬﾘｱ段No.
CON
RES R55002               ; S.RB_WF取出ｴﾘｱ進入中
CON
RES R53104               ; RB 取出し完了終了
CON
JMP @MR2702              ; 取出し後  WF確認
;RBﾊﾝﾄﾞｳｪﾊｰ吸着ﾁｪｯｸ
;RB Hand Wafer Adsoption Check
STG @MR2702              ; 取出し後  WF確認
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
MPS
AND R50001               ; 自動中
SET @MR4000              ; WF吸着確認
CON
JMP @MR2703              ; 2604
MPP
AND R50002               ; 手動中
MPS
AND LR100                ; 通常動作
JMP @MR2704              ; RBｳｪﾊｰ取出し終了
MPP
ANB LR100                ; 通常動作
JMP @MR2706              ; 2608
STG @MR2703              ; 2604
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
MPS
AND @MR4015              ; WF吸着OK
RES @MR4015              ; WF吸着OK
CON
JMP @MR2704              ; RBｳｪﾊｰ取出し終了
MPP
AND @MR4013              ; WF除材済み
RES @MR4013              ; WF除材済み
CON
JMP @MR2000              ; WF取出し 待機へ
;RBﾊﾝﾄﾞ AUTO時ｳｪﾊｰ取出し完了操作
;RB  Wafer take out End process when AUTO
STG @MR2704              ; RBｳｪﾊｰ取出し終了
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES R53214               ; RB WF取出しcall 実行中
CON
SET R53215               ; RB WF取出しcall 完了
CON
ENDS
;RBﾊﾝﾄﾞ STEP時ｳｪﾊｰ取出し完了操作
;RB  Wafer take out End process when STEP
STG @MR2706              ; 2608
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
SET R53001               ; RB 取出し待機要求
CON
JMP @MR2707              ; 2609
STG @MR2707              ; 2609
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND R53101               ; RB 取出し待機終了
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
RES R53214               ; RB WF取出しcall 実行中
CON
SET R53215               ; RB WF取出しcall 完了
CON
RES R53101               ; RB 取出し待機終了
CON
ENDS
;▼▼▼▼▼ ｴﾗｰ処理　ｳｪﾊｰ取出し失敗  / (Error routine) RB Take out Error End  ▼▼▼▼▼
;
STG @MR2714              ; 取出失敗終了処理
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES R40009               ; ｴﾗｰｳｨﾝﾄﾞｩ YES sw
CON
RES MR2309               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ真空破壊
CON
RES MR2308               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ吸着
CON
RES R53214               ; RB WF取出しcall 実行中
CON
SET R53213               ; RB WF取出しcall 異常(除材済)
CON
ENDS
;▲▲▲▲▲
;******* RB ｳｪﾊｰｱﾗｲﾒﾝﾄ動作  / RB Subroutine ********
;
;RB ｱﾗｲﾒﾝﾄ動作開始
;RB Alignment Operation Start 
STG R53300               ; RB ｱﾗｲﾒﾝﾄ call
SET R53314               ; RB ｱﾗｲﾒﾝﾄ call 実行中
CON
AND R53314               ; RB ｱﾗｲﾒﾝﾄ call 実行中
JMP @MR3000              ; ｱﾗｲﾅｰ待機位置へ
;RB ｱﾗｲﾅｰ待機位置へ
;RB Move to Alignment wait position
STG @MR3000              ; ｱﾗｲﾅｰ待機位置へ
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
SET R53006               ; RB ｱﾗｲﾅｰ待機要求
CON
JMP @MR3001              ; 3001
STG @MR3001              ; 3001
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND R53106               ; RB ｱﾗｲﾅｰ待機終了
RES R53106               ; RB ｱﾗｲﾅｰ待機終了
CON
JMP @MR3002              ; 3002
;RB ｱﾗｲﾒﾝﾄ前吸着確認
;RB WF Check before Alignment
STG @MR3002              ; 3002
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
MPS
AND R50001               ; 自動中
SET @MR4000              ; WF吸着確認
CON
JMP @MR3003              ; 3003
MPP
AND R50002               ; 手動中
JMP @MR3004              ; ｱﾗｲﾒﾝﾄ準備位置へ
STG @MR3003              ; 3003
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
MPS
AND @MR4015              ; WF吸着OK
RES @MR4015              ; WF吸着OK
CON
JMP @MR3004              ; ｱﾗｲﾒﾝﾄ準備位置へ
MPP
AND @MR4013              ; WF除材済み
RES @MR4013              ; WF除材済み
CON
JMP @MR3202              ; 除材後動作 待機位置へ
;RB ｱﾗｲﾅｰ準備へ
;RB Move to Alignment preparation
STG @MR3004              ; ｱﾗｲﾒﾝﾄ準備位置へ
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND @MR115               ; RB WFｱﾗｲﾅｰ移動OKFLG
SET R53008               ; RB ｱﾗｲﾅｰ完了要求
CON
JMP @MR3005              ; 3005
STG @MR3005              ; 3005
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND R53108               ; RB ｱﾗｲﾅｰ完了終了
RES R53108               ; RB ｱﾗｲﾅｰ完了終了
CON
JMP @MR3006              ; 3006
;RB ｱﾗｲﾒﾝﾄ直前吸着確認
;RB WF Check2 before Alignment
STG @MR3006              ; 3006
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
MPS
AND R50001               ; 自動中
SET @MR4000              ; WF吸着確認
CON
JMP @MR3007              ; 3007
MPP
AND R50002               ; 手動中
JMP @MR3100              ; 3100
STG @MR3007              ; 3007
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
MPS
AND @MR4015              ; WF吸着OK
RES @MR4015              ; WF吸着OK
CON
JMP @MR3100              ; 3100
MPP
AND @MR4013              ; WF除材済み
RES @MR4013              ; WF除材済み
CON
JMP @MR3200              ; 除材後動作 完了位置へ
;RB ｳｪﾊｰｱﾗｲﾒﾝﾄ
;RB Wafer Alignment
STG @MR3100              ; 3100
RES MR2308               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ吸着
CON
SET MR2309               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ真空破壊
CON
ANB R4800                ; RBﾊﾝﾄﾞ吸着 OUT1
JMP @MR3101              ; 3101
STG @MR3101              ; 3101
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
ANB R4801                ; RBﾊﾝﾄﾞ吸着 OUT2
SET MR2309               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ真空破壊
CON
TMH @64 #10
CON
AND @T64
JMP @MR3102              ; 3102
STG @MR3102              ; 3102
ANB R50302               ; 転写部(L) Pause
MPS
ANB R50115               ; Err RB UT
SET MR6106               ; ｱﾗｲﾒﾝﾄ　閉
CON
AND @MR113               ; ｱﾗｲﾒﾝﾄ 閉 OK FLG
TMR @65 #5
CON
AND @T65
RES @MR104               ; ｱﾗｲﾒﾝﾄﾘﾄﾗｲ
CON
JMP @MR4901              ; 4900
MRD
LD MR4106                ; ｱﾗｲﾒﾝﾄ1 閉異常
OR MR4108                ; ｱﾗｲﾒﾝﾄ2 閉異常
OR MR4110                ; ｱﾗｲﾒﾝﾄ3 閉異常
AND @MR104               ; ｱﾗｲﾒﾝﾄﾘﾄﾗｲ
ANL
RES MR6106               ; ｱﾗｲﾒﾝﾄ　閉
CON
JMP @MR3102              ; 3102
MPP
TMR @73 #30
CON
AND @T73
ANB @MR104               ; ｱﾗｲﾒﾝﾄﾘﾄﾗｲ
SET @MR104               ; ｱﾗｲﾒﾝﾄﾘﾄﾗｲ
CON
RES MR6106               ; ｱﾗｲﾒﾝﾄ　閉
CON
JMP @MR4900
STG @MR4900
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES MR6106               ; ｱﾗｲﾒﾝﾄ　閉
CON
AND @MR112               ; ｱﾗｲﾒﾝﾄ 開 OK FLG
TMR @74 #20
CON
AND @T74
JMP @MR3102              ; 3102
STG @MR4901              ; 4900
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR4902              ; 4901
STG @MR4902              ; 4901
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES MR2309               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ真空破壊
CON
SET MR2308               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ吸着
CON
MPS
AND R4800                ; RBﾊﾝﾄﾞ吸着 OUT1
JMP @MR4903              ; 4902
MPP
TMR @63 #20
CON
AND @T63
JMP @MR4903              ; 4902
STG @MR4903              ; 4902
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES MR6106               ; ｱﾗｲﾒﾝﾄ　閉
CON
AND @MR112               ; ｱﾗｲﾒﾝﾄ 開 OK FLG
JMP @MR4904              ; 4903
STG @MR4904              ; 4903
ANB R50302               ; 転写部(L) Pause
MPS
ANB R50115               ; Err RB UT
RES MR2308               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ吸着
CON
SET MR6106               ; ｱﾗｲﾒﾝﾄ　閉
CON
AND @MR113               ; ｱﾗｲﾒﾝﾄ 閉 OK FLG
SET MR2309               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ真空破壊
CON
TMR @67 #10
CON
AND @T67
JMP @MR4905              ; 4904
MPP
LD MR4106                ; ｱﾗｲﾒﾝﾄ1 閉異常
OR MR4108                ; ｱﾗｲﾒﾝﾄ2 閉異常
OR MR4110                ; ｱﾗｲﾒﾝﾄ3 閉異常
ANL
RES MR6106               ; ｱﾗｲﾒﾝﾄ　閉
CON
JMP @MR4904              ; 4903
STG @MR4905              ; 4904
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR3103              ; 3103
STG @MR3103              ; 3103
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES MR2309               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ真空破壊
CON
SET MR2308               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ吸着
CON
LD R4800                 ; RBﾊﾝﾄﾞ吸着 OUT1
OR R50002                ; 手動中
ANL
TMR @66 #5
CON
AND @T66
JMP @MR3104              ; 3104
STG @MR3104              ; 3104
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES MR6106               ; ｱﾗｲﾒﾝﾄ　閉
CON
AND @MR112               ; ｱﾗｲﾒﾝﾄ 開 OK FLG
JMP @MR3105              ; 3105
;RBﾊﾝﾄﾞ ｱﾗｲﾒﾝﾄ直後吸着確認
;RB Hand Wafer Check after Alignment
STG @MR3105              ; 3105
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
MPS
AND R50001               ; 自動中
SET @MR4000              ; WF吸着確認
CON
JMP @MR3106              ; 3106
MPP
AND R50002               ; 手動中
JMP @MR3107              ; 3107
STG @MR3106              ; 3106
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
MPS
AND @MR4015              ; WF吸着OK
RES @MR4015              ; WF吸着OK
CON
JMP @MR3107              ; 3107
MPP
AND @MR4013              ; WF除材済み
RES @MR4013              ; WF除材済み
CON
JMP @MR3200              ; 除材後動作 完了位置へ
;RB ｱﾗｲﾒﾝﾄ待機位置へ上昇
;RB Move to Alignment wait position
STG @MR3107              ; 3107
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND @MR115               ; RB WFｱﾗｲﾅｰ移動OKFLG
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
SET R53006               ; RB ｱﾗｲﾅｰ待機要求
CON
JMP @MR3108              ; 3108
STG @MR3108              ; 3108
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND R53106               ; RB ｱﾗｲﾅｰ待機終了
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
RES R53106               ; RB ｱﾗｲﾅｰ待機終了
CON
MPS
ANB R50002               ; 手動中
JMP @MR3109              ; 3109
MPP
AND R50002               ; 手動中
MPS
AND LR102                ; ｱﾗｲﾒﾝﾄ
JMP @MR3208              ; 3208
MPP
ANB LR102                ; ｱﾗｲﾒﾝﾄ
JMP @MR3109              ; 3109
;RB 給材待機位置へ
;RB move to Supply waiting position 
STG @MR3109              ; 3109
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
SET R53009               ; RB 給材待機要求
CON
JMP @MR3110              ; 3110
STG @MR3110              ; 3110
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND R53109               ; RB 給材待機終了
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
RES R53109               ; RB 給材待機終了
CON
JMP @MR3111              ; 3111
;RB ｱﾗｲﾒﾝﾄ完了後吸着確認
;RB WF Check2 after Alignment Finished
STG @MR3111              ; 3111
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
MPS
ANB R50002               ; 手動中
SET @MR4000              ; WF吸着確認
CON
JMP @MR3112              ; 3112
MPP
AND R50002               ; 手動中
JMP @MR3113              ; 3113
STG @MR3112              ; 3112
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
MPS
AND @MR4015              ; WF吸着OK
RES @MR4015              ; WF吸着OK
CON
JMP @MR3113              ; 3113
MPP
AND @MR4013              ; WF除材済み
RES @MR4013              ; WF除材済み
CON
JMP @MR3202              ; 除材後動作 待機位置へ
;RBﾊﾝﾄﾞ ｳｪﾊｰｱﾗｲﾒﾝﾄ完了操作
;RB  Wafer Alignment End process
STG @MR3113              ; 3113
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES R53314               ; RB ｱﾗｲﾒﾝﾄ call 実行中
CON
SET R53315               ; RB ｱﾗｲﾒﾝﾄ call 完了
CON
ENDS
;▼▼▼▼▼ ｴﾗｰ処理　ｳｪﾊｰ除材後待機位置へ  / RB Move to Waiting position after remove (Error routine)  ▼▼▼▼▼
;
STG @MR3200              ; 除材後動作 完了位置へ
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
SET R53008               ; RB ｱﾗｲﾅｰ完了要求
CON
JMP @MR3201              ; 3201
STG @MR3201              ; 3201
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND R53108               ; RB ｱﾗｲﾅｰ完了終了
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
RES R53108               ; RB ｱﾗｲﾅｰ完了終了
CON
JMP @MR3202              ; 除材後動作 待機位置へ
STG @MR3202              ; 除材後動作 待機位置へ
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
SET R53001               ; RB 取出し待機要求
CON
JMP @MR3203              ; 3203
STG @MR3203              ; 3203
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND R53101               ; RB 取出し待機終了
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
RES R53101               ; RB 取出し待機終了
CON
JMP @MR3204              ; 3204
STG @MR3204              ; 3204
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES R53314               ; RB ｱﾗｲﾒﾝﾄ call 実行中
CON
SET R53313               ; RB ｱﾗｲﾒﾝﾄ call 異常(除材済)
CON
ENDS
;STEP終了動作
STG @MR3208              ; 3208
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
SET R53001               ; RB 取出し待機要求
CON
JMP @MR3209              ; 3209
STG @MR3209              ; 3209
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND R53101               ; RB 取出し待機終了
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
RES R53101               ; RB 取出し待機終了
CON
JMP @MR3210              ; 3210
STG @MR3210              ; 3210
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES R53314               ; RB ｱﾗｲﾒﾝﾄ call 実行中
CON
SET R53315               ; RB ｱﾗｲﾒﾝﾄ call 完了
CON
ENDS
;▲▲▲▲▲
;******* RB 給材動作  / RB Subroutine ********
;
;RB 給材動作開始
;RB Supply Operation Start
STG R53400               ; RB WF給材 call
SET R53414               ; RB WF給材 call 実行中
CON
AND R53414               ; RB WF給材 call 実行中
JMP @MR3500              ; 3500
;RB 給材待機位置へ
;RB Move to Supply wait position
STG @MR3500              ; 3500
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
SET R53009               ; RB 給材待機要求
CON
JMP @MR3501              ; 3501
STG @MR3501              ; 3501
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND R53109               ; RB 給材待機終了
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
RES R53109               ; RB 給材待機終了
CON
JMP @MR3502              ; 3502
;RB 給材動作前吸着確認
;RB WF Check1 before Supply
STG @MR3502              ; 3502
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
MPS
AND R50001               ; 自動中
SET @MR4000              ; WF吸着確認
CON
JMP @MR3503              ; 3503
MPP
AND R50002               ; 手動中
JMP @MR3504              ; 3504
STG @MR3503              ; 3503
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
MPS
AND @MR4015              ; WF吸着OK
RES @MR4015              ; WF吸着OK
CON
JMP @MR3504              ; 3504
MPP
AND @MR4013              ; WF除材済み
RES @MR4013              ; WF除材済み
CON
JMP @MR3704              ; 取出し待機位置へ
;RB 給材準備へ
;RB Move to Supply preparation
STG @MR3504              ; 3504
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND @MR107               ; 治具(L)WF受取OK
SET R53010               ; RB 給材準備要求
CON
JMP @MR3505              ; 3505
STG @MR3505              ; 3505
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND R53110               ; RB 給材準備終了
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
RES R53110               ; RB 給材準備終了
CON
JMP @MR3506              ; 3506
;RB 給材直前吸着確認
;RB WF Check2 before Supply
STG @MR3506              ; 3506
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
MPS
AND R50001               ; 自動中
SET @MR4000              ; WF吸着確認
CON
JMP @MR3507              ; 3507
MPP
AND R50002               ; 手動中
JMP @MR3508              ; 3508
STG @MR3507              ; 3507
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
MPS
AND @MR4015              ; WF吸着OK
RES @MR4015              ; WF吸着OK
CON
JMP @MR3508              ; 3508
MPP
AND @MR4013              ; WF除材済み
RES @MR4013              ; WF除材済み
CON
JMP @MR3700              ; 除材後給材待機位置へ
;RB ｳｪﾊｰ給材
;RB Supply Wafer to Jig(L)
STG @MR3508              ; 3508
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES MR2309               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ真空破壊
CON
RES MR2308               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ吸着
CON
TMR @68 #20
CON
AND @T68
JMP @MR3509              ; 3509
STG @MR3509              ; 3509
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES MR2311               ; ｳｪﾊｰ治具(L)真空破壊
CON
SET MR2310               ; ｳｪﾊｰ治具(L)吸着
CON
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
JMP @MR3510              ; 3510
STG @MR3510              ; 3510
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND @MR107               ; 治具(L)WF受取OK
SET R53011               ; RB 給材動作要求
CON
JMP @MR3511              ; 3511
STG @MR3511              ; 3511
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND R53111               ; RB 給材動作終了
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
RES R53111               ; RB 給材動作終了
CON
JMP @MR3600              ; 3600
;RB 給材後ｳｪﾊｰ確認
;RB WF Check after Supply
STG @MR3600              ; 3600
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
MPS
ANB R50002               ; 手動中
MPS
AND R4802                ; 治具(L)吸着 OUT1
JMP @MR3610              ; 3610
MPP
ANB R4802                ; 治具(L)吸着 OUT1
TMR @7 #30
CON
AND @T7
SET MR201                ; 治具(L)吸着  異常FLG
CON
JMP @MR3601              ; 3601
MPP
AND R50002               ; 手動中
JMP @MR3610              ; 3610
;ｳｪﾊｰ治具(L)吸着異常の場合　【YES : Wafer remove  /  NO : Retry】
;Wafer Jig(L) Adsoprtion Error
STG @MR3601              ; 3601
ANB MR201                ; 治具(L)吸着  異常FLG
AND R50110               ; Err 転写(L)UT
AND R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
SET R51006               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点滅
CON
JMP @MR3603              ; 3603
;RBﾊﾝﾄﾞ受渡し異常の場合　【YES : Wafer remove  /  NO : Retry】
;RB Hand Wafer Transport Error
STG @MR3602              ; 3602
ANB MR712                ; ｷｬﾘｱ照合NG
AND R50115               ; Err RB UT
AND R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
SET R51006               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点滅
CON
JMP @MR3603              ; 3603
STG @MR3603              ; 3603
AND R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
JMP @MR3604              ; 3604
STG @MR3604              ; 3604
ANB R50115               ; Err RB UT
ANB R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
ANB R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
SET R51007               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点灯
CON
MPS
ANB R40009               ; ｴﾗｰｳｨﾝﾄﾞｩ YES sw
JMP @MR3600              ; 3600
MPP
AND R40009               ; ｴﾗｰｳｨﾝﾄﾞｩ YES sw
JMP @MR3605              ; 3605
;RBﾊﾝﾄﾞ & 治具(L) 除材確認
;RB Hand & Jig(L) Removed Check
STG @MR3605              ; 3605
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES R40009               ; ｴﾗｰｳｨﾝﾄﾞｩ YES sw
CON
RES MR2309               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ真空破壊
CON
SET MR2308               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ吸着
CON
MPS
LD @MR002                ; RBﾊﾝﾄﾞ 除材検出
AND @MR006               ; ｳｪﾊｰ治具  除材検出
ANL
RES MR2308               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ吸着
CON
RES MR2310               ; ｳｪﾊｰ治具(L)吸着
CON
JMP @MR3702              ; 除材後完了位置へ
MRD
AND @MR003               ; RBﾊﾝﾄﾞ 未除材検出
SET MR700                ; 給材RBﾊﾝﾄﾞﾜｰｸ除材要求
CON
JMP @MR3606              ; 3606
MPP
AND @MR007               ; ｳｪﾊｰ治具  未除材検出
SET MR311                ; 治具(L)上WF残り（選択無し）
CON
JMP @MR3607              ; 3607
;RBﾊﾝﾄﾞｳｪﾊｰ残りの場合
;RB Hand Wafer remain Error
STG @MR3606              ; 3606
ANB MR700                ; 給材RBﾊﾝﾄﾞﾜｰｸ除材要求
AND R50115               ; Err RB UT
AND R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
SET R51006               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点滅
CON
JMP @MR3608              ; 3608
STG @MR3607              ; 3607
ANB MR311                ; 治具(L)上WF残り（選択無し）
AND R50110               ; Err 転写(L)UT
AND R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
SET R51006               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点滅
CON
JMP @MR3608              ; 3608
STG @MR3608              ; 3608
AND R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
JMP @MR3609              ; 3609
STG @MR3609              ; 3609
ANB R50115               ; Err RB UT
ANB R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
ANB R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
SET R51007               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点灯
CON
JMP @MR3605              ; 3605
;RB ｳｪﾊｰ給材完了位置へ
;RB Move to Supply End position
STG @MR3610              ; 3610
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES MR2309               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ真空破壊
CON
RES MR2308               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ吸着
CON
AND @MR107               ; 治具(L)WF受取OK
SET R53012               ; RB 給材完了要求
CON
JMP @MR3611              ; 3611
STG @MR3611              ; 3611
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND R53112               ; RB 給材完了終了
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
RES R53112               ; RB 給材完了終了
CON
JMP @MR3612              ; 3612
STG @MR3612              ; 3612
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
SET R53001               ; RB 取出し待機要求
CON
JMP @MR3613              ; 3613
STG @MR3613              ; 3613
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND R53101               ; RB 取出し待機終了
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
RES R53101               ; RB 取出し待機終了
CON
JMP @MR3615              ; 3615
;RB ｳｪﾊｰ給材完了操作
;RB  Wafer Supply End process
STG @MR3615              ; 3615
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES R53414               ; RB WF給材 call 実行中
CON
SET R53415               ; RB WF給材 call 完了
CON
ENDS
;▼▼▼▼▼ ｴﾗｰ処理　ｳｪﾊｰ除材後待機位置へ  / RB Move to Waiting position after remove (Error routine)  ▼▼▼▼▼
;
STG @MR3700              ; 除材後給材待機位置へ
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND @MR107               ; 治具(L)WF受取OK
SET R53009               ; RB 給材待機要求
CON
JMP @MR3701              ; 3701
STG @MR3701              ; 3701
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND R53109               ; RB 給材待機終了
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
RES R53109               ; RB 給材待機終了
CON
JMP @MR3704              ; 取出し待機位置へ
STG @MR3702              ; 除材後完了位置へ
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND @MR107               ; 治具(L)WF受取OK
SET R53012               ; RB 給材完了要求
CON
JMP @MR3703              ; 3703
STG @MR3703              ; 3703
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND R53112               ; RB 給材完了終了
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
RES R53112               ; RB 給材完了終了
CON
JMP @MR3704              ; 取出し待機位置へ
STG @MR3704              ; 取出し待機位置へ
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
SET R53001               ; RB 取出し待機要求
CON
JMP @MR3705              ; 3705
STG @MR3705              ; 3705
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND R53101               ; RB 取出し待機終了
OUT R50400               ; Call Post
CON
AND R50402               ; Post Ok
RES R53101               ; RB 取出し待機終了
CON
JMP @MR3706              ; 給材異常終了
STG @MR3706              ; 給材異常終了
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES R53414               ; RB WF給材 call 実行中
CON
SET R53413               ; RB WF給材 call 異常(除材済)
CON
ENDS
;▲▲▲▲▲
;******* ｻﾌﾞﾙｰﾁﾝ  /  Subroutine ********
;
;******* RBﾊﾝﾄﾞ ｳｪﾊｰ吸着確認ﾙｰﾁﾝ  / RB Wafer Adsorption check routine ********
;
STG @MR4000              ; WF吸着確認
ANB @MR4014              ; WF吸着確認中
JMP @MR4001              ; 4001
STG @MR4001              ; 4001
SET @MR4014              ; WF吸着確認中
CON
AND @MR4014              ; WF吸着確認中
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
MPS
LDB R4300                ; RBﾊﾝﾄﾞ ｳｪﾊｰ無し検出　ON=なし
AND @MR000               ; RBﾊﾝﾄﾞ 吸着検出
OR R50002                ; 手動中
ANL
RES @MR4014              ; WF吸着確認中
CON
SET @MR4015              ; WF吸着OK
CON
ENDS
MPP
LD @MR001                ; RBﾊﾝﾄﾞ 未吸着検出
OR R4300                 ; RBﾊﾝﾄﾞ ｳｪﾊｰ無し検出　ON=なし
ANB R50002               ; 手動中
ANL
TMR @11 #30
CON
AND @T11
SET MR613                ; 給材RBﾊﾝﾄﾞ 吸着異常
CON
JMP @MR4002              ; 取出しWF 吸着異常
;RBﾊﾝﾄﾞｳｪﾊｰ吸着異常の場合　【YES : Wafer remove  /  NO : Retry】
;RB Hand Wafer adsorption Error
STG @MR4002              ; 取出しWF 吸着異常
ANB MR613                ; 給材RBﾊﾝﾄﾞ 吸着異常
AND R50115               ; Err RB UT
AND R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
SET R51006               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点滅
CON
JMP @MR4003              ; 4003
STG @MR4003              ; 4003
AND R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
JMP @MR4004              ; 4004
STG @MR4004              ; 4004
ANB R50115               ; Err RB UT
ANB R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
ANB R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
SET R51007               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点灯
CON
MPS
ANB R40009               ; ｴﾗｰｳｨﾝﾄﾞｩ YES sw
JMP @MR4001              ; 4001
MPP
AND R40009               ; ｴﾗｰｳｨﾝﾄﾞｩ YES sw
JMP @MR4005              ; 4005
;RBﾊﾝﾄﾞ 除材確認
;RB Hand Removed Check 　　　　　　　　ここにきたら除材して終了よ
STG @MR4005              ; 4005
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES R40009               ; ｴﾗｰｳｨﾝﾄﾞｩ YES sw
CON
RES MR2309               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ真空破壊
CON
SET MR2308               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ吸着
CON
MPS
LD R4300                 ; RBﾊﾝﾄﾞ ｳｪﾊｰ無し検出　ON=なし
AND @MR002               ; RBﾊﾝﾄﾞ 除材検出
ANL
JMP @MR4009              ; 4009
MPP
LDB R4300                ; RBﾊﾝﾄﾞ ｳｪﾊｰ無し検出　ON=なし
OR @MR003                ; RBﾊﾝﾄﾞ 未除材検出
ANL
SET MR700                ; 給材RBﾊﾝﾄﾞﾜｰｸ除材要求
CON
JMP @MR4006              ; 4006
;RBﾊﾝﾄﾞｳｪﾊｰ残りの場合
;RB Hand Wafer remain Error
STG @MR4006              ; 4006
ANB MR700                ; 給材RBﾊﾝﾄﾞﾜｰｸ除材要求
AND R50115               ; Err RB UT
AND R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
SET R51006               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点滅
CON
JMP @MR4007              ; 4007
STG @MR4007              ; 4007
AND R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
JMP @MR4008              ; 4008
STG @MR4008              ; 4008
ANB R50115               ; Err RB UT
ANB R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
ANB R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
SET R51007               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点灯
CON
JMP @MR4005              ; 4005
;RBﾊﾝﾄﾞ 除材完了
;RB Hand Remove End
;
STG @MR4009              ; 4009
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES MR2309               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ真空破壊
CON
RES MR2308               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ吸着
CON
SET @MR4013              ; WF除材済み
CON
RES @MR4014              ; WF吸着確認中
CON
ENDS
;******* 各ポジションへの移動ﾙｰﾁﾝ  /  Subroutine ********
;
;RB 原点復帰
;Position No.1
;RB HOME
STG R53000               ; RB 原点復帰要求
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
ANB @MR314               ; RB 動作　指示中
RES R53015               ; RB 原点復帰終了
CON
MPS
ANB R55002               ; S.RB_WF取出ｴﾘｱ進入中
JMP @MR800               ; 800
MPP
AND R55002               ; S.RB_WF取出ｴﾘｱ進入中
INC DM1000               ; ｷｬﾘｱ段No.
CON
RES R55002               ; S.RB_WF取出ｴﾘｱ進入中
CON
JMP @MR800               ; 800
STG @MR800               ; 800
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
MPS
AND R4601                ; ｳｪﾊｰ取出しｼｬｯﾀｰ 閉限
JMP @MR802               ; 802
MPP
ANB R4601                ; ｳｪﾊｰ取出しｼｬｯﾀｰ 閉限
JMP @MR801               ; 801
STG @MR801               ; 801
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES MR6305               ; ｳｪﾊｰ取出しｼｬｯﾀｰ 閉
CON
SET MR6304               ; ｳｪﾊｰ取出しｼｬｯﾀｰ 開
CON
AND R4600                ; ｳｪﾊｰ取出しｼｬｯﾀｰ 開限
JMP @MR802               ; 802
STG @MR802               ; 802
SET MR2209               ; RB mode 1
CON
RES MR2210               ; RB mode 2
CON
RES MR2211               ; RB mode 4
CON
RES MR2212               ; RB mode 8
CON
RES MR2213               ; RB mode16
CON
SET @MR300               ; RB 動作開始
CON
JMP @MR803               ; 803
STG @MR803               ; 803
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND @MR315               ; RB 動作完了
RES @MR315               ; RB 動作完了
CON
JMP @MR804               ; WF飛出しﾁｪｯｸ
STG @MR804               ; WF飛出しﾁｪｯｸ
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
MPS
LD R4704                 ; WFはみ出し検出　ON=正常
ORB R4600                ; ｳｪﾊｰ取出しｼｬｯﾀｰ 開限
ANL
JMP @MR808               ; ｷｬﾘｱｼｬｯﾀｰ閉
MPP
LDB R4704                ; WFはみ出し検出　ON=正常
AND R4600                ; ｳｪﾊｰ取出しｼｬｯﾀｰ 開限
ANL
SET MR708                ; ｼｬｯﾀｰ閉時ｳｪﾊｰ飛出
CON
JMP @MR805               ; WF飛出し異常処理
;/ｳｪﾊｰ飛び出し異常処理
STG @MR805               ; WF飛出し異常処理
ANB MR707                ; ｷｬﾘｱ(L)部扉　開　FLG
AND R50115               ; Err RB UT
AND R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
SET R51006               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点滅
CON
JMP @MR806               ; 806
STG @MR806               ; 806
AND R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
JMP @MR807               ; 807
STG @MR807               ; 807
ANB R50110               ; Err 転写(L)UT
ANB R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
ANB R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
JMP @MR804               ; WF飛出しﾁｪｯｸ
;/
STG @MR808               ; ｷｬﾘｱｼｬｯﾀｰ閉
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES MR6304               ; ｳｪﾊｰ取出しｼｬｯﾀｰ 開
CON
SET MR6305               ; ｳｪﾊｰ取出しｼｬｯﾀｰ 閉
CON
AND R4601                ; ｳｪﾊｰ取出しｼｬｯﾀｰ 閉限
JMP @MR809
STG @MR809
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES MR6307               ; ｷｬﾘｱ      固定解除
CON
SET MR6306               ; ｷｬﾘｱ      固定
CON
AND @MR111               ; ｷｬﾘﾔｸﾗﾝﾌﾟ　閉OK　FLG
MPS
LDB R4607                ; ｷｬﾘﾔ旋回 ｷｬﾘﾔｾｯﾄ側
AND R4606                ; ｷｬﾘﾔ旋回 WF取出し側
ANL
JMP @MR810
MPP
LD R4607                 ; ｷｬﾘﾔ旋回 ｷｬﾘﾔｾｯﾄ側
ORB R4606                ; ｷｬﾘﾔ旋回 WF取出し側
ANL
JMP @MR811
;ｷｬﾘﾔ WF取出し側時　/ Carrier at WF pick up position
STG @MR810
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES MR6309               ; ｷｬﾘﾔ旋回　ｷｬﾘﾔｾｯﾄ側
CON
SET MR6308               ; ｷｬﾘﾔ旋回　WF取出し側
CON
AND R4606                ; ｷｬﾘﾔ旋回 WF取出し側
JMP @MR900               ; ｳｪﾊｰ残ﾁｪｯｸ
;ｷｬﾘﾔ ｾｯﾄ側時　/ Carrier at set position
STG @MR811
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
SET R53905               ; ｷｬﾘｱ交換swON
CON
SET R53900               ; ｷｬﾘｱ交換要求
CON
JMP @MR900               ; ｳｪﾊｰ残ﾁｪｯｸ
;RBﾊﾝﾄﾞ上ｳｪﾊｰ残ﾁｪｯｸ
STG @MR900               ; ｳｪﾊｰ残ﾁｪｯｸ
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES MR2309               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ真空破壊
CON
SET MR2308               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ吸着
CON
MPS
AND @MR002               ; RBﾊﾝﾄﾞ 除材検出
JMP @MR915               ; RB原点復帰終了処理
MPP
AND @MR003               ; RBﾊﾝﾄﾞ 未除材検出
SET MR700                ; 給材RBﾊﾝﾄﾞﾜｰｸ除材要求
CON
RES MR2308               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ吸着
CON
JMP @MR901
STG @MR901
ANB MR700                ; 給材RBﾊﾝﾄﾞﾜｰｸ除材要求
AND R50115               ; Err RB UT
AND R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
SET R51006               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点滅
CON
JMP @MR902
STG @MR902
AND R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
JMP @MR903
STG @MR903
ANB R50115               ; Err RB UT
ANB R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
ANB R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
SET R51007               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点灯
CON
JMP @MR900               ; ｳｪﾊｰ残ﾁｪｯｸ
;RB原点復帰終了処理
STG @MR915               ; RB原点復帰終了処理
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES MR2308               ; ﾛﾎﾞｯﾄﾊﾝﾄﾞ吸着
CON
SET R53015               ; RB 原点復帰終了
CON
ENDS
;RB 取出し待機位置
;Position No.2
;RB Take out wait position
STG R53001               ; RB 取出し待機要求
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
ANB @MR314               ; RB 動作　指示中
AND @MR100               ; RB 旋回可能位置
RES R53101               ; RB 取出し待機終了
CON
JMP @MR1008              ; 1008
STG @MR1008              ; 1008
RES MR2209               ; RB mode 1
CON
SET MR2210               ; RB mode 2
CON
RES MR2211               ; RB mode 4
CON
RES MR2212               ; RB mode 8
CON
RES MR2213               ; RB mode16
CON
SET @MR300               ; RB 動作開始
CON
JMP @MR1009              ; 1009
STG @MR1009              ; 1009
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND @MR315               ; RB 動作完了
RES @MR315               ; RB 動作完了
CON
SET R53101               ; RB 取出し待機終了
CON
ENDS
;RB 取出し待準備置
;Position No.3
;RB Take out Preparation position
STG R53002               ; RB 取出し準備要求
RES R53102               ; RB 取出し準備終了
CON
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
ANB @MR314               ; RB 動作　指示中
AND @MR114               ; RB ｷｬﾘﾔ移動OKFLG
AND= DM1005 #2           ; RB ﾓｰﾄﾞNo.ｱﾝｻ
JMP @MR1100              ; 1100
STG @MR1100              ; 1100
LDA DM1000               ; ｷｬﾘｱ段No.
CON
SUB #1
CON
STA DM1002               ; 指示段数-1ﾃﾞｰﾀ
CON
JMP @MR1101              ; 1101
STG @MR1101              ; 1101
MPS
LD= DM1001 DM1002        ; 前回ｷｬﾘｱ段No.記憶  指示段数-1ﾃﾞｰﾀ
OR= DM1000 #1            ; ｷｬﾘｱ段No.
ANL
JMP @MR1108              ; 1108
MPP
LD<> DM1001 DM1002       ; 前回ｷｬﾘｱ段No.記憶  指示段数-1ﾃﾞｰﾀ
AND<> DM1000 #1          ; ｷｬﾘｱ段No.
ANL
SET MR714                ; 給材RB取出し段数異常
CON
JMP @MR1102              ; 1102
STG @MR1102              ; 1102
ANB MR714                ; 給材RB取出し段数異常
AND R50115               ; Err RB UT
AND R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
SET R51006               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点滅
CON
JMP @MR1103              ; 1103
STG @MR1103              ; 1103
AND R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
JMP @MR1104              ; 1104
STG @MR1104              ; 1104
ANB R50115               ; Err RB UT
ANB R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
ANB R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
RES R51006               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点滅
CON
ENDS
STG @MR1108              ; 1108
MPS
SET MR2209               ; RB mode 1
CON
SET MR2210               ; RB mode 2
CON
RES MR2211               ; RB mode 4
CON
RES MR2212               ; RB mode 8
CON
RES MR2213               ; RB mode16
CON
SET @MR300               ; RB 動作開始
CON
JMP @MR1109              ; 1109
MRD
PMOV DM1000 #0 MR2301 #0 #5;ｷｬﾘｱ段No.  RB carrier 1
MPP
MOV DM1000 DM1001        ; ｷｬﾘｱ段No.  前回ｷｬﾘｱ段No.記憶
STG @MR1109              ; 1109
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND @MR315               ; RB 動作完了
RES @MR315               ; RB 動作完了
CON
SET R53102               ; RB 取出し準備終了
CON
ENDS
;RB 取出し動作
;Position No.4
;RB Take out Operation
STG R53003               ; RB 取出し動作要求
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
ANB @MR314               ; RB 動作　指示中
AND @MR114               ; RB ｷｬﾘﾔ移動OKFLG
AND= DM1005 #3           ; RB ﾓｰﾄﾞNo.ｱﾝｻ
RES R53103               ; RB 取出し動作終了
CON
DIFU @MR1202             ; 投入ｶｳﾝﾄﾊﾟﾙｽ
CON
JMP @MR1200              ; 1200
STG @MR1200              ; 1200
RES MR2209               ; RB mode 1
CON
RES MR2210               ; RB mode 2
CON
SET MR2211               ; RB mode 4
CON
RES MR2212               ; RB mode 8
CON
RES MR2213               ; RB mode16
CON
SET @MR300               ; RB 動作開始
CON
JMP @MR1201              ; 1201
STG @MR1201              ; 1201
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND @MR315               ; RB 動作完了
RES @MR315               ; RB 動作完了
CON
SET R53103               ; RB 取出し動作終了
CON
ENDS
;RB 取出し完了位置へ
;Position No.5
;RB Take out Finish position
STG R53004               ; RB 取出し完了要求
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
ANB @MR314               ; RB 動作　指示中
AND @MR114               ; RB ｷｬﾘﾔ移動OKFLG
AND= DM1005 #4           ; RB ﾓｰﾄﾞNo.ｱﾝｻ
RES R53104               ; RB 取出し完了終了
CON
JMP @MR1208              ; 1208
STG @MR1208              ; 1208
SET MR2209               ; RB mode 1
CON
RES MR2210               ; RB mode 2
CON
SET MR2211               ; RB mode 4
CON
RES MR2212               ; RB mode 8
CON
RES MR2213               ; RB mode16
CON
SET @MR300               ; RB 動作開始
CON
JMP @MR1209              ; 1209
STG @MR1209              ; 1209
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND @MR315               ; RB 動作完了
RES @MR315               ; RB 動作完了
CON
SET R53104               ; RB 取出し完了終了
CON
ENDS
;RB 取出し破棄
;Position No.6
;RB Take out Cancel
STG R53005               ; RB 取出し破棄要求
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
ANB @MR314               ; RB 動作　指示中
AND @MR114               ; RB ｷｬﾘﾔ移動OKFLG
AND= DM1005 #4           ; RB ﾓｰﾄﾞNo.ｱﾝｻ
RES R53105               ; RB 取出し破棄終了
CON
JMP @MR1300              ; 1300
STG @MR1300              ; 1300
RES MR2209               ; RB mode 1
CON
SET MR2210               ; RB mode 2
CON
SET MR2211               ; RB mode 4
CON
RES MR2212               ; RB mode 8
CON
RES MR2213               ; RB mode16
CON
SET @MR300               ; RB 動作開始
CON
JMP @MR1301              ; 1301
STG @MR1301              ; 1301
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND @MR315               ; RB 動作完了
RES @MR315               ; RB 動作完了
CON
SET R53105               ; RB 取出し破棄終了
CON
ENDS
;RB ｱﾗｲﾒﾝﾄ待機位置へ
;Position No.7
;RB Alignment wait position
STG R53006               ; RB ｱﾗｲﾅｰ待機要求
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
ANB @MR314               ; RB 動作　指示中
LD @MR100                ; RB 旋回可能位置
LD @MR115                ; RB WFｱﾗｲﾅｰ移動OKFLG
AND= DM1005 #9           ; RB ﾓｰﾄﾞNo.ｱﾝｻ
ORL
ANL
RES R53106               ; RB ｱﾗｲﾅｰ待機終了
CON
JMP @MR1308              ; 1308
STG @MR1308              ; 1308
SET MR2209               ; RB mode 1
CON
SET MR2210               ; RB mode 2
CON
SET MR2211               ; RB mode 4
CON
RES MR2212               ; RB mode 8
CON
RES MR2213               ; RB mode16
CON
SET @MR300               ; RB 動作開始
CON
JMP @MR1309              ; 1309
STG @MR1309              ; 1309
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND @MR315               ; RB 動作完了
RES @MR315               ; RB 動作完了
CON
SET R53106               ; RB ｱﾗｲﾅｰ待機終了
CON
ENDS
;RB ｱﾗｲﾒﾝﾄ準備位置へ
;Position No.8
;RB Alignment preparation position
STG R53007               ; RB ｱﾗｲﾅｰ準備要求
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
ANB @MR314               ; RB 動作　指示中
AND @MR115               ; RB WFｱﾗｲﾅｰ移動OKFLG
AND= DM1005 #7           ; RB ﾓｰﾄﾞNo.ｱﾝｻ
RES R53107               ; RB ｱﾗｲﾅｰ準備終了
CON
JMP @MR1400              ; 1400
STG @MR1400              ; 1400
RES MR2209               ; RB mode 1
CON
RES MR2210               ; RB mode 2
CON
RES MR2211               ; RB mode 4
CON
SET MR2212               ; RB mode 8
CON
RES MR2213               ; RB mode16
CON
SET @MR300               ; RB 動作開始
CON
JMP @MR1401              ; 1401
STG @MR1401              ; 1401
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND @MR315               ; RB 動作完了
RES @MR315               ; RB 動作完了
CON
SET R53107               ; RB ｱﾗｲﾅｰ準備終了
CON
ENDS
;RB ｱﾗｲﾒﾝﾄ完了位置へ
;Position No.9
;RB Alignment Finish position
STG R53008               ; RB ｱﾗｲﾅｰ完了要求
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
ANB @MR314               ; RB 動作　指示中
AND @MR115               ; RB WFｱﾗｲﾅｰ移動OKFLG
AND= DM1005 #7           ; RB ﾓｰﾄﾞNo.ｱﾝｻ
RES R53108               ; RB ｱﾗｲﾅｰ完了終了
CON
JMP @MR1408              ; 1408
STG @MR1408              ; 1408
SET MR2209               ; RB mode 1
CON
RES MR2210               ; RB mode 2
CON
RES MR2211               ; RB mode 4
CON
SET MR2212               ; RB mode 8
CON
RES MR2213               ; RB mode16
CON
SET @MR300               ; RB 動作開始
CON
JMP @MR1409              ; 1409
STG @MR1409              ; 1409
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND @MR315               ; RB 動作完了
RES @MR315               ; RB 動作完了
CON
SET R53108               ; RB ｱﾗｲﾅｰ完了終了
CON
ENDS
;RB 給材待機位置へ
;Position No.10
;RB Supply wait position
STG R53009               ; RB 給材待機要求
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
ANB @MR314               ; RB 動作　指示中
AND @MR100               ; RB 旋回可能位置
RES R53109               ; RB 給材待機終了
CON
JMP @MR1500              ; 1500
STG @MR1500              ; 1500
RES MR2209               ; RB mode 1
CON
SET MR2210               ; RB mode 2
CON
RES MR2211               ; RB mode 4
CON
SET MR2212               ; RB mode 8
CON
RES MR2213               ; RB mode16
CON
SET @MR300               ; RB 動作開始
CON
JMP @MR1501              ; 1501
STG @MR1501              ; 1501
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND @MR315               ; RB 動作完了
RES @MR315               ; RB 動作完了
CON
SET R53109               ; RB 給材待機終了
CON
ENDS
;RB 給材準備位置へ
;Position No.11
;RB Supply preparation position
STG R53010               ; RB 給材準備要求
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
ANB @MR314               ; RB 動作　指示中
AND= DM1005 #10          ; RB ﾓｰﾄﾞNo.ｱﾝｻ
RES R53110               ; RB 給材準備終了
CON
JMP @MR1508              ; 1508
STG @MR1508              ; 1508
SET MR2209               ; RB mode 1
CON
SET MR2210               ; RB mode 2
CON
RES MR2211               ; RB mode 4
CON
SET MR2212               ; RB mode 8
CON
RES MR2213               ; RB mode16
CON
SET @MR300               ; RB 動作開始
CON
JMP @MR1509              ; 1509
STG @MR1509              ; 1509
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND @MR315               ; RB 動作完了
RES @MR315               ; RB 動作完了
CON
SET R53110               ; RB 給材準備終了
CON
ENDS
;RB 給材動作
;Position No.12
;RB Supply Operation
STG R53011               ; RB 給材動作要求
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
ANB @MR314               ; RB 動作　指示中
AND= DM1005 #11          ; RB ﾓｰﾄﾞNo.ｱﾝｻ
RES R53111               ; RB 給材動作終了
CON
JMP @MR1600              ; 1600
STG @MR1600              ; 1600
RES MR2209               ; RB mode 1
CON
RES MR2210               ; RB mode 2
CON
SET MR2211               ; RB mode 4
CON
SET MR2212               ; RB mode 8
CON
RES MR2213               ; RB mode16
CON
SET @MR300               ; RB 動作開始
CON
JMP @MR1601              ; 1601
STG @MR1601              ; 1601
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND @MR315               ; RB 動作完了
RES @MR315               ; RB 動作完了
CON
SET R53111               ; RB 給材動作終了
CON
ENDS
;RB 給材完了位置へ
;Position No.13
;RB Supply Finish position
STG R53012               ; RB 給材完了要求
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
ANB @MR314               ; RB 動作　指示中
AND= DM1005 #12          ; RB ﾓｰﾄﾞNo.ｱﾝｻ
RES R53112               ; RB 給材完了終了
CON
JMP @MR1608              ; 1608
STG @MR1608              ; 1608
SET MR2209               ; RB mode 1
CON
RES MR2210               ; RB mode 2
CON
SET MR2211               ; RB mode 4
CON
SET MR2212               ; RB mode 8
CON
RES MR2213               ; RB mode16
CON
SET @MR300               ; RB 動作開始
CON
JMP @MR1609              ; 1609
STG @MR1609              ; 1609
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND @MR315               ; RB 動作完了
RES @MR315               ; RB 動作完了
CON
SET R53112               ; RB 給材完了終了
CON
ENDS
;******* 各ｷｬﾘｱ交換ﾙｰﾁﾝ  /  Subroutine ********
;
;ｷｬﾘﾔ交換
;Carrier Change
STG R53900               ; ｷｬﾘｱ交換要求
ANB R53901               ; ｷｬﾘﾔ交換中
JMP @MR400               ; ｷｬﾘｱ交換
STG @MR400               ; ｷｬﾘｱ交換
SET R53901               ; ｷｬﾘﾔ交換中
CON
AND R53901               ; ｷｬﾘﾔ交換中
JMP @MR401               ; 401
STG @MR401               ; 401
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND @MR108               ; ｷｬﾘｱ(L)ｼｬｯﾀ閉OK FLG
RES MR6304               ; ｳｪﾊｰ取出しｼｬｯﾀｰ 開
CON
SET MR6305               ; ｳｪﾊｰ取出しｼｬｯﾀｰ 閉
CON
RES MR6308               ; ｷｬﾘﾔ旋回　WF取出し側
CON
SET MR6309               ; ｷｬﾘﾔ旋回　ｷｬﾘﾔｾｯﾄ側
CON
AND R4607                ; ｷｬﾘﾔ旋回 ｷｬﾘﾔｾｯﾄ側
JMP @MR402               ; 402
STG @MR402               ; 402
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
TMR @21 #8
CON
AND @T21
JMP @MR403               ; 403
STG @MR403               ; 403
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES MR6306               ; ｷｬﾘｱ      固定
CON
SET MR6307               ; ｷｬﾘｱ      固定解除
CON
AND @MR110               ; ｷｬﾘｱｸﾗﾝﾌﾟ　解除OK　FLG
ANB R4600                ; ｳｪﾊｰ取出しｼｬｯﾀｰ 開限
AND R4601                ; ｳｪﾊｰ取出しｼｬｯﾀｰ 閉限
JMP @MR404
STG @MR404
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
SET MR501                ; ｷｬﾘｱ扉  ﾛｯｸ解除
CON
SET R53903               ; ｷｬﾘｱ交換確認
CON
MPS
ANB R53905               ; ｷｬﾘｱ交換swON
SET MR701                ; ｷｬﾘﾔ交換要求
CON
JMP @MR405               ; 404
MPP
AND R53905               ; ｷｬﾘｱ交換swON
ENDS
STG @MR405               ; 404
ANB MR701                ; ｷｬﾘﾔ交換要求
AND R50115               ; Err RB UT
AND R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
MPS
AND R51007               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点灯
SET @MR014               ; ｴﾗｰ前ｽﾀｰﾄﾗﾝﾌﾟ点灯
CON
SET R51006               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点滅
CON
JMP @MR406               ; 405
MPP
ANB R51007               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点灯
RES @MR014               ; ｴﾗｰ前ｽﾀｰﾄﾗﾝﾌﾟ点灯
CON
SET R51006               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点滅
CON
JMP @MR406               ; 405
STG @MR406               ; 405
AND R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
JMP @MR407               ; 406
STG @MR407               ; 406
ANB R50115               ; Err RB UT
ANB R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
ANB R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
MPS
ANB @MR014               ; ｴﾗｰ前ｽﾀｰﾄﾗﾝﾌﾟ点灯
RES R51006               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点滅
CON
JMP @MR408
MPP
AND @MR014               ; ｴﾗｰ前ｽﾀｰﾄﾗﾝﾌﾟ点灯
RES @MR014               ; ｴﾗｰ前ｽﾀｰﾄﾗﾝﾌﾟ点灯
CON
SET R51007               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点灯
CON
JMP @MR408
STG @MR408
ANB R50115               ; Err RB UT
ENDS
;ｷｬﾘﾔ交換確認
;Carrier Change Check
STG R53903               ; ｷｬﾘｱ交換確認
MPS
LDB R53902               ; ｷｬﾘｱ交換　中断
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
AND R4705                ; ﾌﾗｯﾄﾌｧｲﾝﾀﾞｰ上ｷｬﾘﾔ検出　ON=有り
ANL
TMR @8 #10
CON
AND @T8
AND R4810                ; ｷｬﾘﾔ交換sw
JMP @MR500
MPP
AND R53902               ; ｷｬﾘｱ交換　中断
JMP @MR500
STG @MR500
MPS
LDB LR500                ; ﾛｯﾄ照合有
LD LR500                 ; ﾛｯﾄ照合有
AND R42600               ; 照合OK
ORL
ANL
RES MR501                ; ｷｬﾘｱ扉  ﾛｯｸ解除
CON
JMP @MR504               ; 410
MPP
LD LR500                 ; ﾛｯﾄ照合有
ANB R42600               ; 照合OK
ANL
SET MR712                ; ｷｬﾘｱ照合NG
CON
JMP @MR501
;/　照合NG処理　/
STG @MR501
ANB MR712                ; ｷｬﾘｱ照合NG
AND R50115               ; Err RB UT
AND R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
SET R51006               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点滅
CON
JMP @MR502
STG @MR502
AND R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
JMP @MR503
STG @MR503
ANB R50115               ; Err RB UT
ANB R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
ANB R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
RES R51006               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点滅
CON
JMP R53903               ; ｷｬﾘｱ交換確認
;/　/
STG @MR504               ; 410
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
SET R53905               ; ｷｬﾘｱ交換swON
CON
MPS
LDB R53902               ; ｷｬﾘｱ交換　中断
AND R003                 ; ｷｬﾘﾔ扉入力
ANL
MPS
AND R4705                ; ﾌﾗｯﾄﾌｧｲﾝﾀﾞｰ上ｷｬﾘﾔ検出　ON=有り
JMP @MR505               ; ｵﾘﾌﾗ合せ動作
MPP
ANB R4705                ; ﾌﾗｯﾄﾌｧｲﾝﾀﾞｰ上ｷｬﾘﾔ検出　ON=有り
SET MR501                ; ｷｬﾘｱ扉  ﾛｯｸ解除
CON
JMP R53903               ; ｷｬﾘｱ交換確認
MPP
AND R53902               ; ｷｬﾘｱ交換　中断
RES MR501                ; ｷｬﾘｱ扉  ﾛｯｸ解除
CON
RES R53901               ; ｷｬﾘﾔ交換中
CON
ENDS
STG @MR505               ; ｵﾘﾌﾗ合せ動作
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES MR6307               ; ｷｬﾘｱ      固定解除
CON
SET MR6306               ; ｷｬﾘｱ      固定
CON
AND @MR111               ; ｷｬﾘﾔｸﾗﾝﾌﾟ　閉OK　FLG
TMR @1 #2
CON
AND @T1
JMP @MR506
STG @MR506
SET @MR106               ; ﾌﾗｯﾄﾌｧｲﾝﾀﾞｰ回転中
CON
SET MR2004               ; M3(Rewind) CW
CON
JMP @MR507
STG @MR507
MPS
ANB R50302               ; 転写部(L) Pause
TMR #16 DM32             ; ｵﾘﾌﾗ合せ時間  TIM16設定値
CON
AND T16                  ; ｵﾘﾌﾗ合せ時間
RES @MR106               ; ﾌﾗｯﾄﾌｧｲﾝﾀﾞｰ回転中
CON
RES MR2004               ; M3(Rewind) CW
CON
JMP @MR508
MPP
AND R50302               ; 転写部(L) Pause
RES @MR106               ; ﾌﾗｯﾄﾌｧｲﾝﾀﾞｰ回転中
CON
RES MR2004               ; M3(Rewind) CW
CON
JMP @MR505               ; ｵﾘﾌﾗ合せ動作
STG @MR508
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES MR6309               ; ｷｬﾘﾔ旋回　ｷｬﾘﾔｾｯﾄ側
CON
SET MR6308               ; ｷｬﾘﾔ旋回　WF取出し側
CON
AND R4606                ; ｷｬﾘﾔ旋回 WF取出し側
TMR @20 #5
CON
AND @T20
JMP @MR509               ; ｳｪﾊｰ状態ﾁｪｯｸ
STG @MR509               ; ｳｪﾊｰ状態ﾁｪｯｸ
MPS
AND R4700                ; ｷｬﾘﾔ ｳｪﾊｰ検出 ON=有
MPS
LD R4701                 ; ｷｬﾘﾔ 浮き検出 OFF=浮き
OR @MR111                ; ｷｬﾘﾔｸﾗﾝﾌﾟ　閉OK　FLG
ANL
MPS
LD R4702                 ; ｵﾘﾌﾗ検出1　ON=ｵﾘﾌﾗ部検出
AND R4703                ; ｵﾘﾌﾗ検出2　ON=ｵﾘﾌﾗ部検出
AND R4704                ; WFはみ出し検出　ON=正常
ANL
RES @MR105               ; ｵﾘﾌﾗ合せ  ﾘﾄﾗｲ
CON
RES R53905               ; ｷｬﾘｱ交換swON
CON
RES R53901               ; ｷｬﾘﾔ交換中
CON
ENDS
MRD
AND @MR105               ; ｵﾘﾌﾗ合せ  ﾘﾄﾗｲ
MPS
LD R4704                 ; WFはみ出し検出　ON=正常
LDB R4702                ; ｵﾘﾌﾗ検出1　ON=ｵﾘﾌﾗ部検出
ORB R4703                ; ｵﾘﾌﾗ検出2　ON=ｵﾘﾌﾗ部検出
ANL
ANL
JMP @MR602               ; ｵﾘﾌﾗ位置異常
MPP
ANB R4704                ; WFはみ出し検出　ON=正常
JMP @MR604               ; ｳｪﾊｰ飛び出し
MPP
LDB @MR105               ; ｵﾘﾌﾗ合せ  ﾘﾄﾗｲ
LDB R4702                ; ｵﾘﾌﾗ検出1　ON=ｵﾘﾌﾗ部検出
ORB R4703                ; ｵﾘﾌﾗ検出2　ON=ｵﾘﾌﾗ部検出
ORB R4704                ; WFはみ出し検出　ON=正常
ANL
ANL
SET @MR105               ; ｵﾘﾌﾗ合せ  ﾘﾄﾗｲ
CON
JMP @MR600               ; ﾘﾄﾗｲ
MPP
LDB R4701                ; ｷｬﾘﾔ 浮き検出 OFF=浮き
AND CR2003               ; 常時OFF
ANL
JMP @MR606               ; ｷｬﾘﾔ浮き
MPP
ANB R4700                ; ｷｬﾘﾔ ｳｪﾊｰ検出 ON=有
JMP @MR608               ; ｳｪﾊｰ無し
;ｵﾘﾌﾗ合せﾘﾄﾗｲ / Flat find Retry
STG @MR600               ; ﾘﾄﾗｲ
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES MR6308               ; ｷｬﾘﾔ旋回　WF取出し側
CON
SET MR6309               ; ｷｬﾘﾔ旋回　ｷｬﾘﾔｾｯﾄ側
CON
AND R4607                ; ｷｬﾘﾔ旋回 ｷｬﾘﾔｾｯﾄ側
JMP @MR601
STG @MR601
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES MR6306               ; ｷｬﾘｱ      固定
CON
SET MR6307               ; ｷｬﾘｱ      固定解除
CON
AND @MR110               ; ｷｬﾘｱｸﾗﾝﾌﾟ　解除OK　FLG
TMR @15 #5
CON
AND @T15
JMP @MR505               ; ｵﾘﾌﾗ合せ動作
;ｵﾘﾌﾗ位置異常処理
STG @MR602               ; ｵﾘﾌﾗ位置異常
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES @MR105               ; ｵﾘﾌﾗ合せ  ﾘﾄﾗｲ
CON
SET MR702                ; ｷｬﾘｱ ｵﾘﾌﾗ位置異常
CON
JMP @MR603
STG @MR603
ANB MR702                ; ｷｬﾘｱ ｵﾘﾌﾗ位置異常
AND R50115               ; Err RB UT
AND R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
JMP @MR610
;ｳｪﾊｰ飛び出し異常処理
STG @MR604               ; ｳｪﾊｰ飛び出し
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES @MR105               ; ｵﾘﾌﾗ合せ  ﾘﾄﾗｲ
CON
SET MR704                ; ｷｬﾘｱ ｳｪﾊｰ飛出し検出
CON
JMP @MR605
STG @MR605
ANB MR704                ; ｷｬﾘｱ ｳｪﾊｰ飛出し検出
AND R50115               ; Err RB UT
AND R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
JMP @MR610
;ｷｬﾘﾔ浮き異常処理
STG @MR606               ; ｷｬﾘﾔ浮き
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES @MR105               ; ｵﾘﾌﾗ合せ  ﾘﾄﾗｲ
CON
SET MR703                ; ｷｬﾘｱ浮き検出
CON
JMP @MR607
STG @MR607
ANB MR703                ; ｷｬﾘｱ浮き検出
AND R50115               ; Err RB UT
AND R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
JMP @MR610
;ｳｪﾊｰ未検出処理
STG @MR608               ; ｳｪﾊｰ無し
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES @MR105               ; ｵﾘﾌﾗ合せ  ﾘﾄﾗｲ
CON
SET MR705                ; ｷｬﾘｱｳｪﾊｰ無し
CON
JMP @MR609
STG @MR609
ANB MR705                ; ｷｬﾘｱｳｪﾊｰ無し
AND R50115               ; Err RB UT
AND R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
JMP @MR610
;ｴﾗｰ処理共通部分
STG @MR610
MPS
AND R51007               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点灯
SET @MR014               ; ｴﾗｰ前ｽﾀｰﾄﾗﾝﾌﾟ点灯
CON
SET R51006               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点滅
CON
JMP @MR611
MPP
ANB R51007               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点灯
RES @MR014               ; ｴﾗｰ前ｽﾀｰﾄﾗﾝﾌﾟ点灯
CON
SET R51006               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点滅
CON
JMP @MR611
STG @MR611
AND R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
JMP @MR612
STG @MR612
ANB R50115               ; Err RB UT
ANB R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
ANB R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
MPS
ANB @MR014               ; ｴﾗｰ前ｽﾀｰﾄﾗﾝﾌﾟ点灯
RES R51006               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点滅
CON
JMP @MR613
MPP
AND @MR014               ; ｴﾗｰ前ｽﾀｰﾄﾗﾝﾌﾟ点灯
SET R51007               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点灯
CON
RES @MR014               ; ｴﾗｰ前ｽﾀｰﾄﾗﾝﾌﾟ点灯
CON
JMP @MR613
STG @MR613
MPS
ANB R40009               ; ｴﾗｰｳｨﾝﾄﾞｩ YES sw
JMP @MR400               ; ｷｬﾘｱ交換
MPP
AND R40009               ; ｴﾗｰｳｨﾝﾄﾞｩ YES sw
JMP @MR614
;再ﾘﾄﾗｲ / Retry Flat find
STG @MR614
ANB R50302               ; 転写部(L) Pause
ANB R50115               ; Err RB UT
RES R40009               ; ｴﾗｰｳｨﾝﾄﾞｩ YES sw
CON
JMP @MR600               ; ﾘﾄﾗｲ
;RB ｷｬﾘｱ管理
;RB Carrier management
LDB R003                 ; ｷｬﾘﾔ扉入力
ANB R4606                ; ｷｬﾘﾔ旋回 WF取出し側
AND R4607                ; ｷｬﾘﾔ旋回 ｷｬﾘﾔｾｯﾄ側
TMR @14 #10
CON
AND @T14
@DW $2A2A DM1100         ; 取込ﾃﾞｰﾀ1
CON
MPS
@DW $0000 DM1110         ; 照合用取込ﾃﾞｰﾀ
CON
@DW #1 DM1000            ; ｷｬﾘｱ段No.
CON
@DW #1 DM1003            ; 開始段数
CON
@DW #25 DM1004           ; 終了段数
MPP
ANB R31502               ; 仮　NAT 2
FMOV DM1100 DM1101 #4    ; 取込ﾃﾞｰﾀ1  取込ﾃﾞｰﾀ2
LD> DM1000 DM1004        ; ｷｬﾘｱ段No.  終了段数
DW #1 DM1000             ; ｷｬﾘｱ段No.
CON
MPS
SET R53900               ; ｷｬﾘｱ交換要求
MPP
AND R50001               ; 自動中
@SET R50100              ; 自動ﾓｰﾄﾞ停止PLS
LD R4810                 ; ｷｬﾘﾔ交換sw
ANB R53901               ; ｷｬﾘﾔ交換中
ANB R50001               ; 自動中
ANB R50302               ; 転写部(L) Pause
SET R53905               ; ｷｬﾘｱ交換swON
CON
SET R53900               ; ｷｬﾘｱ交換要求
LDB R003                 ; ｷｬﾘﾔ扉入力
LD= DM1005 #3            ; RB ﾓｰﾄﾞNo.ｱﾝｻ
OR= DM1005 #4            ; RB ﾓｰﾄﾞNo.ｱﾝｻ
OR= DM1005 #5            ; RB ﾓｰﾄﾞNo.ｱﾝｻ
OR= DM1005 #6            ; RB ﾓｰﾄﾞNo.ｱﾝｻ
ANL
AND R1208                ; RB 動作中
SET MR505                ; Machine Stop
LD R40012                ; 開始段数設定
MPS
AND> DM1003 DM1004       ; 開始段数  終了段数
MOV DM1004 DM1003        ; 終了段数  開始段数
MPP
RES R40012               ; 開始段数設定
LD R40013                ; 終了段数設定
MPS
AND> DM1003 DM1004       ; 開始段数  終了段数
MOV DM1003 DM1004        ; 開始段数  終了段数
MPP
RES R40013               ; 終了段数設定
;DM1001 = DM1003-1
;DM1000 = DM1003
LD R40014                ; 段数設定終了
NCJ #1000
;DM1001 = DM1003-1
;
LD CR2002                ; 常時ON
LDA DM1003               ; 開始段数
CON
EXT
CON
SUB.L +1
CON
STA DM1001               ; 前回ｷｬﾘｱ段No.記憶
;DM1000 = DM1003
LD CR2002                ; 常時ON
MOV DM1003 DM1000        ; 開始段数  ｷｬﾘｱ段No.
LABEL #1000
;
LD LR1001                ; AUTO PARA1 1枚流動選択
ANF R50001               ; 自動中
SET LR1000               ; AUTO PARA0 通常動作選択
CON
RES LR1001               ; AUTO PARA1 1枚流動選択
;DM1000 = 1
;DM1004 = 25
;
LDF LR1002               ; AUTO PARA2 指定段流動選択
NCJ #1001
;DM1000 = 1
;
LD CR2002                ; 常時ON
MOV #1 DM1000            ; ｷｬﾘｱ段No.
;DM1004 = 25
;
LD CR2002                ; 常時ON
MOV #25 DM1004           ; 終了段数
LABEL #1001
;
;ｴﾗｰ監視
;R1201ではｴﾗｰ出ない
LD R1201                 ; RB Running
ANB R50006               ; 異常発生中
LD R1201                 ; RB Running
AND R31500               ; 仮　NAT
ORL
MC
LD R1203                 ; RB Error
OR R1204                 ; RB E.Stop On
SET MR710                ; 給材RB 異常
CON
@SET @MR5000             ; RB非常停止確認
LD R1205                 ; RB Safeguard On
AND R1208                ; RB 動作中
SET MR713                ; 給材RB移動中ｶﾊﾞｰ開
CON
@SET @MR5008             ; 5009
LD R1206                 ; RB Error
SET MR711                ; 給材RB 故障
CON
@SET @MR5100             ; 5100
LD R1207                 ; RB Warnig
ANB R49800               ; ｻｲｸﾙ停止・払出し開始
TMR @10 #20
CON
AND @T10
SET MR709                ; 給材RB 警報
CON
@SET @MR5108             ; 5108
MCR
;非常停止
;Emergency
STG @MR5000              ; RB非常停止確認
ANB MR710                ; 給材RB 異常
AND R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
JMP @MR5001              ; 5001
STG @MR5001              ; 5001
ANB R50115               ; Err RB UT
ANB R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
ANB R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
SET MR2207               ; RB reset
CON
JMP @MR5002              ; 5002
STG @MR5002              ; 5002
TMR @3 #5
CON
AND @T3
RES MR2207               ; RB reset
CON
ENDS
;RB動作中　ｶﾊﾞｰ開　（閉めてくれれば再開）
;Covor Open when RB Moving
STG @MR5008              ; 5009
ANB MR713                ; 給材RB移動中ｶﾊﾞｰ開
AND R50115               ; Err RB UT
AND R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
SET R51006               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点滅
CON
JMP @MR5009              ; 5010
STG @MR5009              ; 5010
AND R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
JMP @MR5010              ; 5011
STG @MR5010              ; 5011
ANB R50115               ; Err RB UT
ANB R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
ANB R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
SET R51007               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点灯
CON
ENDS
;RB 重大ｴﾗｰ　（ｺﾝﾄﾛｰﾗ再起動必須）
;RB Critical Error (Need Power OFF → Restart)
STG @MR5100              ; 5100
ANB MR711                ; 給材RB 故障
AND R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
JMP @MR5101              ; 5101
STG @MR5101              ; 5101
ANB R50115               ; Err RB UT
ANB R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
ANB R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
JMP @MR5102              ; 5102
STG @MR5102              ; 5102
TMR @2 #5                ; ﾀｲﾐﾝｸﾞﾀｲﾏ
CON
AND @T2                  ; ﾀｲﾐﾝｸﾞﾀｲﾏ
SET MR711                ; 給材RB 故障
CON
JMP @MR5100              ; 5100
;ﾜｰﾆﾝｸﾞ　（ﾀｽｸの実行は通常通り。払出しの移行で）
STG @MR5108              ; 5108
ANB MR709                ; 給材RB 警報
AND R50115               ; Err RB UT
AND R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
SET R51006               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点滅
CON
JMP @MR5109              ; 5109
STG @MR5109              ; 5109
AND R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
JMP @MR5110              ; 5110
STG @MR5110              ; 5110
ANB R50115               ; Err RB UT
ANB R50014               ; 異常発生ｴﾗｰﾘｾｯﾄsw ON
ANB R51301               ; 治具(L)ｴﾗｰﾘｾｯﾄsw ON
SET R51007               ; 治具(L)ｽﾀｰﾄﾗﾝﾌﾟ点灯
CON
ENDS
;PACK
;
LD @MR314                ; RB 動作　指示中
OR R1208                 ; RB 動作中
OR @MR106                ; ﾌﾗｯﾄﾌｧｲﾝﾀﾞｰ回転中
OUT R50611               ; Pack 給材RB
;******* 生産ｶｳﾝﾀｰ  / Wafer Count ********
;
LD R50001                ; 自動中
ANP @MR1202              ; 投入ｶｳﾝﾄﾊﾟﾙｽ
INC DM471                ; 投入ｶｳﾝﾀ
LD R40008                ; 生産ｶｳﾝﾀﾘｾｯﾄ
MOV #0 DM471             ; 投入ｶｳﾝﾀ
END
ENDH
