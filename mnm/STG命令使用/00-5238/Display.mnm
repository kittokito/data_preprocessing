DEVICE:52
;MODULE:Display
;MODULE_TYPE:0
;SCRIPT_TYPE:
;<<フリッカー>>
;<<Flicker>>
LD CR2002                ; 常時ON
FLIK #50 #50 MR400       ; ﾗﾝﾌﾟ点滅用(0.5S)
FLIK #30 #30 MR401       ; ﾗﾝﾌﾟ点滅用(0.3S)
FLIK #10 #10 MR402       ; ﾗﾝﾌﾟ点滅用(0.1S)
FLIK #100 #100 MR403     ; ﾗﾝﾌﾟ点滅用(1.0S)
FLIK #1 #99 MR404        ; ブザー特殊用
;表示　/　Indixation
LD MR102                 ; 動作開始可
LD= EM30000 #811         ; (TP)現在表示中画面No.
ANB MR105                ; ﾐﾆﾏﾉﾒｰﾀｰ ｾﾞﾛﾘｾｯﾄ中
ORL
LD MR300                 ; NG総合
ANB MR303                ; ｴﾗｰﾌﾞｻﾞｰON
AND<> DM146 #8           ; ｴﾗｰｺｰﾄﾞ
LD<> DM146 #6            ; ｴﾗｰｺｰﾄﾞ
LD= DM146 #6             ; ｴﾗｰｺｰﾄﾞ
AND R1006                ; ユニット前後　後退端
ANB R1007                ; プリズムセンサユニット前進確認
ORL
ANL
ORL
OR MR411                 ; スタート待ち
AND MR400                ; ﾗﾝﾌﾟ点滅用(0.5S)
LD MR300                 ; NG総合
LD<> DM146 #8            ; ｴﾗｰｺｰﾄﾞ
AND MR303                ; ｴﾗｰﾌﾞｻﾞｰON
LD= DM146 #6             ; ｴﾗｰｺｰﾄﾞ
LDB R1006                ; ユニット前後　後退端
OR R1007                 ; プリズムセンサユニット前進確認
OR MR303                 ; ｴﾗｰﾌﾞｻﾞｰON
ANL
ORL
ANL
ORL
LD MR101                 ; 自動動作中
OR MR105                 ; ﾐﾆﾏﾉﾒｰﾀｰ ｾﾞﾛﾘｾｯﾄ中
ANB MR300                ; NG総合
ANB MR411                ; スタート待ち
ORL
OR LR000                 ; (ﾜｰｸ1)検査OK
OUT MR1108               ; START スイッチ表示灯
LD MR303                 ; ｴﾗｰﾌﾞｻﾞｰON
OR MR414                 ; 終了ﾌﾞｻﾞｰON
OR LR000                 ; (ﾜｰｸ1)検査OK
LD MR408                 ; プリズム前進要求
OR MR409                 ; 抜き待ち
OR MR410                 ; 差し待ち
AND MR404                ; ブザー特殊用
ORL
OUT MR1115               ; ブザー
;<< タワーランプ >>
;<< Tower lamp >>
LD MR300                 ; NG総合
AND<> DM146 #8           ; ｴﾗｰｺｰﾄﾞ
AND MR400                ; ﾗﾝﾌﾟ点滅用(0.5S)
LD MR300                 ; NG総合
AND= DM146 #8            ; ｴﾗｰｺｰﾄﾞ
ORL
OUT MR1112               ; シグナルタワー　赤
LD MR101                 ; 自動動作中
OR MR105                 ; ﾐﾆﾏﾉﾒｰﾀｰ ｾﾞﾛﾘｾｯﾄ中
LD MR300                 ; NG総合
AND<> DM146 #8           ; ｴﾗｰｺｰﾄﾞ
ANB MR407                ; 除材待ち
ORL
LD LR000                 ; (ﾜｰｸ1)検査OK
ANB MR407                ; 除材待ち
ORL
LD MR407                 ; 除材待ち
AND MR400                ; ﾗﾝﾌﾟ点滅用(0.5S)
ORL
OUT MR1113               ; シグナルタワー　黄
LDB MR101                ; 自動動作中
ANB MR105                ; ﾐﾆﾏﾉﾒｰﾀｰ ｾﾞﾛﾘｾｯﾄ中
ANB MR300                ; NG総合
ANB LR000                ; (ﾜｰｸ1)検査OK
OUT MR1114               ; シグナルタワー　緑
;<<LED表示>>
;<<LED display>>
LDP MR200                ; 検査OK
OR LR000                 ; (ﾜｰｸ1)検査OK
LDB R1006                ; ユニット前後　後退端
OR R1007                 ; プリズムセンサユニット前進確認
ANL
OUT LR000                ; (ﾜｰｸ1)検査OK
LD LR000                 ; (ﾜｰｸ1)検査OK
LD MR300                 ; NG総合
ANB MR303                ; ｴﾗｰﾌﾞｻﾞｰON
AND= DM146 #6            ; ｴﾗｰｺｰﾄﾞ
ORL
OUT MR407                ; 除材待ち
LD LR000                 ; (ﾜｰｸ1)検査OK
OUT MR600                ; OKランプ
LD MR300                 ; NG総合
AND= DM146 #6            ; ｴﾗｰｺｰﾄﾞ
OR LR001                 ; (ﾜｰｸ1)ﾘｰｸ検査 NG
ANPB MR101               ; 自動動作中
OUT LR001                ; (ﾜｰｸ1)ﾘｰｸ検査 NG
LD LR001                 ; (ﾜｰｸ1)ﾘｰｸ検査 NG
OUT MR601                ; NGランプ
;DM18003.S = int(float(DM16001.S) * 5 / 30 +0.0005)
;DM18003.S = int(float(DM16001.S) * 5 / 30 +0.0005)
;;Warning[1103]: "=": (符号付き32ビット整数型->符号付き16ビット整数型) 代入によりデータが欠落する可能性があります。
LD CR2002                ; 常時ON
LDA.S DM16001            ; ch_A0 特殊ﾃﾞｰﾀ
CON
FLOAT.S
CON
MUL.F +5
CON
DIV.F +30
CON
ADD.F +0.0005
CON
INTG.L
CON
STA.S DM18003            ; プリズム電圧
;
LDP MR401                ; ﾗﾝﾌﾟ点滅用(0.3S)
MOV.S DM18003 DM18000    ; プリズム電圧  表示用プリズム電圧
;DM18001.S = int(float(DM16003.S) * 5 / 30 +0.0005)
;DM18002.S = int(float(DM16004.S) * 5 / 30 +0.0005)
LD R17101                ; ch_A0 ﾎｰﾙﾄﾞ
NCJ #1000
;DM18001.S = int(float(DM16003.S) * 5 / 30 +0.0005)
;
;;Warning[1103]: "=": (符号付き32ビット整数型->符号付き16ビット整数型) 代入によりデータが欠落する可能性があります。
LD CR2002                ; 常時ON
LDA.S DM16003            ; ch_A0 ﾋﾟｰｸ値
CON
FLOAT.S
CON
MUL.F +5
CON
DIV.F +30
CON
ADD.F +0.0005
CON
INTG.L
CON
STA.S DM18001            ; ピーク値
;DM18002.S = int(float(DM16004.S) * 5 / 30 +0.0005)
;;Warning[1103]: "=": (符号付き32ビット整数型->符号付き16ビット整数型) 代入によりデータが欠落する可能性があります。
LD CR2002                ; 常時ON
LDA.S DM16004            ; ch_A0 ﾎﾞﾄﾑ値
CON
FLOAT.S
CON
MUL.F +5
CON
DIV.F +30
CON
ADD.F +0.0005
CON
INTG.L
CON
STA.S DM18002            ; ボトム値
LABEL #1000
;
LDB R17101               ; ch_A0 ﾎｰﾙﾄﾞ
MOV.S +0 DM18001         ; ピーク値
MOV.S +0 DM18002         ; ボトム値
LDP MR101                ; 自動動作中
MPS
AND= EM30080 #0          ; 機種番号
SET LR008                ; 結果表示切替
MPP
AND= EM30080 #1          ; 機種番号
RES LR008                ; 結果表示切替
END
ENDH
