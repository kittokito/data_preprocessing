DEVICE:53
;MODULE:Error_NG
;MODULE_TYPE:0
;<h1/>ｴﾗｰ処理部/Error processing unit
LD MR902                 ; error
ANB @MR015
SET @MR015
CON
SET @MR000
;処理開始/Start processing
STG @MR000
MOV DM149 EM2007         ; error screen details message  wrt result8
MOV DM148 EM2008         ; error details  wrt result9
SET MR30115              ; (TP)BzRstSw indicator
CON
JMP @MR001
;ｴﾗｰ画面表示：ﾍﾟｰｼﾞ600/Error screen display: page 600
;解除待ち/Pending wait
STG @MR001
DW #600 EM30001          ; (TP)page screen switching No.
MPS
AND MR911                ; chk NG（key sw rls Err）
MPS
AND MR005                ; Blinking(0.5S)
OUT MR30408              ; (TP) key sw Request LP
MPP
AND R2001                ; key-operated switch
JMP @MR010
MPP
LDB MR911                ; chk NG（key sw rls Err）
AND MR30114              ; (TP)BzRstSw
ANL
JMP @MR002
STG @MR010
AND MR30114              ; (TP)BzRstSw
JMP @MR002
;ｽﾀｰﾄsw入力待ち/Wait for start sw input
STG @MR002
RES MR30115              ; (TP)BzRstSw indicator
CON
SET MR114                ; NG reset process buzzer cancel
CON
OUT MR202                ; Error cancellation request
CON
SET MR002                ; start SW blink request
CON
ANP R2000                ; start SW
ANB MR900                ; severe err：pwr rstr necessary
RES MR002                ; start SW blink request
CON
JMP @MR003
;ｴﾗｰ終了：ﾌﾗｸﾞﾘｾｯﾄ/Error termination: Flag reset
STG @MR003
RES MR902                ; error
CON
RES MR114                ; NG reset process buzzer cancel
CON
DW #0 DM148              ; error details
CON
DW #0 DM149              ; error screen details message
CON
RES @MR015
CON
MPS
AND MR911                ; chk NG（key sw rls Err）
JMP @MR004
MPP
ANB MR911                ; chk NG（key sw rls Err）
JMP @MR005
;TP520：検査結果/TP 520: Inspection result
STG @MR004
DW #520 EM30001          ; (TP)page screen switching No.
CON
RES MR911                ; chk NG（key sw rls Err）
CON
ENDS
;TP500：ﾒｲﾝ画面/TP 500: Main screen
STG @MR005
MPS
ANB MR304                ; origin return in progress
MPS
LDB MR30402              ; TP)equipment leak check mode
ANB MR30100              ; (TP)manual valve ON/OFF
ANL
DW #500 EM30001          ; (TP)page screen switching No.
CON
ENDS
MRD
AND MR30402              ; TP)equipment leak check mode
DW #812 EM30001          ; (TP)page screen switching No.
CON
ENDS
MRD
AND MR30403              ; TP)Bar code reading test
DW #830 EM30001          ; (TP)page screen switching No.
CON
ENDS
MRD
AND MR30100              ; (TP)manual valve ON/OFF
DW #801 EM30001          ; (TP)page screen switching No.
CON
ENDS
MRD
AND MR30403              ; TP)Bar code reading test
DW #823 EM30001          ; (TP)page screen switching No.
CON
ENDS
MPP
AND MR30403              ; TP)Bar code reading test
MPS
ANB MR113                ; dur electro-pneumatic regulator 
DW #840 EM30001          ; (TP)page screen switching No.
CON
ENDS
MPP
AND MR113                ; dur electro-pneumatic regulator 
DW #841 EM30001          ; (TP)page screen switching No.
CON
ENDS
MPP
AND MR304                ; origin return in progress
DW #0 EM30001            ; (TP)page screen switching No.
CON
ENDS
;<h1/>Err1真空ﾎﾟﾝﾌﾟ異常/Err1 Vacuum pump failure
LDB R2011                ; Vacuum pump sensor
ANB MR30100              ; (TP)manual valve ON/OFF
AND MR500                ; Vacuum pump ON
TMR @3 #50
LD @T3
ORB R000                 ; Vacuum pump trip(thermal)
ORB R001                 ; Vacuum pump trip(current)
ANB MR902                ; error
ANB @MR100
DW #1 DM149              ; error screen details message
CON
SET MR902                ; error
CON
RES MR500                ; Vacuum pump ON
CON
SET MR31000              ; Err1Vacuum pump failure
CON
@SET @MR100
;TP画面602：ﾒﾓﾘｰｶｰﾄﾞｴﾗｰ詳細/TP screen 602: Memory card error details
STG @MR100
MPS
LDB R000                 ; Vacuum pump trip(thermal)
ORB R001                 ; Vacuum pump trip(current)
ANL
SET MR900                ; severe err：pwr rstr necessary
MRD
ANP MR30114              ; (TP)BzRstSw
DW #601 EM30001          ; (TP)page screen switching No.
MPP
ANB MR902                ; error
RES MR31000              ; Err1Vacuum pump failure
CON
ENDS
;<h1/>Err2ｸﾘｰﾝﾕﾆｯﾄ異常/Err2 Clean unit err
LDB R2014                ; Air clean unit 1 Alarm 1
ORB R2015                ; Air clean unit 1 Alarm 2
AND T1                   ; Power ON wait
TMR @0 #30
CON
AND @T0
ANB MR902                ; error
ANB @MR101
DW #2 DM149              ; error screen details message
CON
SET MR902                ; error
CON
SET MR31001              ; Err2 Clean unit err
CON
@SET @MR101
STG @MR101
ANB MR902                ; error
RES MR31001              ; Err2 Clean unit err
CON
ENDS
;<h1/>Err4ﾒﾓﾘｰｶｰﾄﾞｴﾗｰ/Err4 Memory card error
LD MR112                 ; memory card error
ORB CR3213               ; with memory card
ANB MR902                ; error
ANB @MR102
DW #4 DM149              ; error screen details message
CON
SET MR902                ; error
CON
SET MR31003              ; Err4 memory card error
CON
@SET @MR102
;TP画面602：ﾒﾓﾘｰｶｰﾄﾞｴﾗｰ詳細/TP screen 602: Memory card error details
STG @MR102
SET MR900                ; severe err：pwr rstr necessary
CON
MPS
ANP MR30114              ; (TP)BzRstSw
DW #602 EM30001          ; (TP)page screen switching No.
MPP
ANB MR902                ; error
RES MR112                ; memory card error
CON
RES MR31003              ; Err4 memory card error
CON
ENDS
;<h1/>Err5通信ｴﾗｰ/Err 5 communication error
;<<通信エラー>>
;<<Communication error>>
LD MR901                 ; comm error
ANB MR902                ; error
ANB @MR103
DW #5 DM149              ; error screen details message
CON
SET MR902                ; error
CON
SET MR31004              ; Err5 comm error
CON
@SET @MR103
;TP画面603：ｴﾗｰ詳細/TP screen 603:error details
STG @MR103
SET MR900                ; severe err：pwr rstr necessary
CON
MPS
ANP MR30114              ; (TP)BzRstSw
DW #603 EM30001          ; (TP)page screen switching No.
MPP
ANB MR902                ; error
RES MR901                ; comm error
CON
RES MR31004              ; Err5 comm error
CON
ENDS
;<h1/>Err6検査条件NG/Err 6 Inspection condition NG
;<<検査条件エラー>>
;<<Inspection condition error>>
LD MR907                 ; check condition error flag
ANB MR902                ; error
ANB @MR104
DW #6 DM149              ; error screen details message
CON
SET MR902                ; error
CON
SET MR31005              ; Err6 check condition NG
CON
@SET @MR104
;TP画面604：検査条件ｴﾗｰ詳細/TP screen 604: inspection condition error details
STG @MR104
MPS
ANP MR30114              ; (TP)BzRstSw
DW #604 EM30001          ; (TP)page screen switching No.
MPP
ANB MR902                ; error
RES MR907                ; check condition error flag
CON
RES MR31005              ; Err6 check condition NG
CON
ENDS
;<h1/>Err7元圧異常/Err 7 source pressure error
;<<元圧異常>>
;<<Main pressure abnormal>>
LDB R2002                ; source air detection
AND T1                   ; Power ON wait
TMR @15 #50
CON
AND @T15
ANB @MR105
ANB MR902                ; error
DW #7 DM149              ; error screen details message
CON
SET MR902                ; error
CON
SET MR31006              ; Err7 source pressure error
CON
@SET @MR105
STG @MR105
MPS
LD MR304                 ; origin return in progress
OR MR306                 ; auto-run during
OR MR307                 ; mainte in action
ANL
SET MR900                ; severe err：pwr rstr necessary
MPP
ANB MR902                ; error
RES MR31006              ; Err7 source pressure error
CON
ENDS
;<h1/>Err13ｼﾘﾝﾀﾞｰｾﾝｻｰｴﾗｰ/Err 13 cylinder sensor error
;<<シリンダセンサエラー>>
;<<Cylinder sensor error>>
;下降:ﾎｰｽ押Vari/針ｼﾘﾝﾀﾞ出口供給継
;Down: Hose push Vari / needle cylinder outlet supply inheritance
LD CR2008                ; 1 scan on at start
DW #0 DM150              ; cylinder error number
LD MR8108                ; Marking pen 1 forward
ANB R2012                ; Marking pen 1 forward limit
LD MR8109                ; Marking pen 1 retreat
AND R2012                ; Marking pen 1 forward limit
ORL
AND= DM150 #0            ; cylinder error number
TMR @1 #30
CON
AND @T1
DW #2012 DM150           ; cylinder error number
LD MR8108                ; Marking pen 1 forward
AND R2013                ; Marking pen 1 retraction limit
LD MR8109                ; Marking pen 1 retreat
ANB R2013                ; Marking pen 1 retraction limit
ORL
AND= DM150 #0            ; cylinder error number
TMR @2 #30
CON
AND @T2
DW #2012 DM150           ; cylinder error number
;ｼﾘﾝﾀﾞｰｾﾝｻｰｴﾗｰ処理/Cylinder sensor error processing
LD<> DM150 #0            ; cylinder error number
ANB MR902                ; error
ANB @MR107
DW #13 DM149             ; error screen details message
CON
SET MR902                ; error
CON
SET MR31012              ; Err13 cylinder sensor error
CON
@SET @MR107
STG @MR107
MPS
ANP MR30114              ; (TP)BzRstSw
DW #606 EM30001          ; (TP)page screen switching No.
MPP
ANB MR902                ; error
DW #0 DM150              ; cylinder error number
CON
RES MR31012              ; Err13 cylinder sensor error
CON
ENDS
END
ENDH
