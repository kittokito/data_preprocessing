DEVICE:53
;MODULE:AlwaysSignal
;MODULE_TYPE:0
;OneSystem Sub-Module
;
;---------------------------------------
;ModuleName	:	Always_Signal
;ModuleType	:	Sub Module
;Function	:	条件生成
;---------------------------------------
;<使用方法>
;ﾌﾟﾛｼﾞｪｸﾄ全体に関わる条件ｼｸﾞﾅﾙ生成は本ﾓｼﾞｭｰﾙに記述して下さい
;・ﾓｰｼｮﾝｺﾝﾄﾛｰﾙ動作許可
;・ｺﾐｭﾆｹｰｼｮﾝﾕﾆｯﾄ通信許可
;・ﾋｰﾀｰ電源ON
;など
;装置切替
;　LR1000=ON　→　洗浄機ﾄﾚﾁｪﾝ大　（DM20000=6）
;　LR1000=OFF →　洗浄機ﾄﾚﾁｪﾝ小　（DM20000=7）
LD LR10000               ; ﾄﾚﾁｪﾝ切替
DW #6 DM20000            ; ﾄﾚﾁｪﾝ機種_TP設定値
LDB LR10000              ; ﾄﾚﾁｪﾝ切替
DW #7 DM20000            ; ﾄﾚﾁｪﾝ機種_TP設定値
;非常停止（インターロック）
LD CR2003                ; 常時OFF
MSTRT F_ERROR_DISP #1
LD CR2003                ; 常時OFF
MSTRT MSG_DEL #1 #1
;システムエラー
LDB R4010                ; BC ｴｱｸﾘｰﾝﾕﾆｯﾄ ｱﾗｰﾑ1
AND MR12000              ; COM_機種_大ﾄﾚｲ(1.3.5)_Flg
LDB R5010                ; SC ｴｱｸﾘｰﾝﾕﾆｯﾄ ｱﾗｰﾑ1
AND MR12001              ; COM_機種_小ﾄﾚｲ(2.4)_Flg
ORL
ANB MR12010              ; COM_洗浄LD_Type_Flg
TMR @1 #300
CON
AND @T1
BANB DM2000 #0           ; _動作ﾊﾟﾗﾒｰﾀ
ANB R39004               ; ｴﾗｰ処理中
SET R39004               ; ｴﾗｰ処理中
CON
DW #2 @DM1               ; ErrorNo /ERROR_DISP
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
@SET @MR100              ; Always ERROR
CON
@SET @R001               ; Always ERROR処理
LDB MR12010              ; COM_洗浄LD_Type_Flg
LDB R4011                ; BC ｴｱｸﾘｰﾝﾕﾆｯﾄ ｱﾗｰﾑ2
AND MR12000              ; COM_機種_大ﾄﾚｲ(1.3.5)_Flg
LDB R5011                ; SC ｴｱｸﾘｰﾝﾕﾆｯﾄ ｱﾗｰﾑ2
AND MR12001              ; COM_機種_小ﾄﾚｲ(2.4)_Flg
ORL
ANL
TMR @2 #300
CON
AND @T2
BANB DM2000 #0           ; _動作ﾊﾟﾗﾒｰﾀ
ANB R39004               ; ｴﾗｰ処理中
SET R39004               ; ｴﾗｰ処理中
CON
DW #3 @DM1               ; ErrorNo /ERROR_DISP
CON
ANB MR12010              ; COM_洗浄LD_Type_Flg
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
@SET @MR100              ; Always ERROR
CON
@SET @R001               ; Always ERROR処理
STG @R001                ; Always ERROR処理
AND @MR101               ; Always ERROR完了
RES @R001                ; Always ERROR処理
CON
RES R39004               ; ｴﾗｰ処理中
CON
ENDS
;<h1/>MyTask Error Process Substance/エラー処理実体
STG @MR100               ; Always ERROR
ANB R39002               ; ERROR_DISP Busy
MPS
ZRES @MR105 @MR108
CON
LDA @DM9                 ; ReturnSW /ERROR_DISP
CON
TBCD
CON
STA @DM10
CON
DISN @DM10 @DM3 #4
MRD
DW #0 @DM0
CON
BMOV @DM0 DM60000 #7     ; TaskNo /ERROR_DISP
MPP
SET R39000               ; ERROR_DISP Start
CON
SET @MR102
CON
JMP @MR103
STG @MR103
AND R39002               ; ERROR_DISP Busy
AND= DM60008 @DM1        ; ReturnNo /ERROR_DISP  ErrorNo /ERROR_DISP
MPS
AND= DM60007 @DM6        ; ReturnSW /ERROR_DISP
SET @MR105
CON
JMP @MR104
MRD
AND= DM60007 @DM5        ; ReturnSW /ERROR_DISP
SET @MR106
CON
JMP @MR104
MRD
AND= DM60007 @DM4        ; ReturnSW /ERROR_DISP
SET @MR107
CON
JMP @MR104
MPP
AND= DM60007 @DM3        ; ReturnSW /ERROR_DISP
SET @MR108
CON
JMP @MR104
STG @MR104
ANB R39002               ; ERROR_DISP Busy
RES @MR102
CON
SET @MR101               ; Always ERROR完了
CON
ENDS
END
ENDH
