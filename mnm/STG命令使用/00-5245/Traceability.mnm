DEVICE:53
;MODULE:Traceability
;MODULE_TYPE:0
;OneSystem UserOpen-Module
;
;-----------------------------------------
;ModuleName	:	Traceability
;ModuleType	:	User Open Module
;Function	:	FTP CLIENT Transfer
;-----------------------------------------
;*1送信毎に送信ﾌｧｲﾙ削除
;Copylight(C) 2011 SEIKO EPSON Corp. All rights reserved.
;トレーサビリティデータ初期化
LD CR2008                ; 運転開始時1ｽｷｬﾝON
DW #0 @DM24              ; 書込み位置
CON
ZRES @R000 @R1115
CON
ZRES DM9170 DM9189       ; Memoryｶｰﾄﾞｴﾗｰ内容
LDP R46104               ; _非常停止中　ﾓｰﾄﾞﾌﾗｸﾞ
ZRES DM25000 DM25101     ; ﾍｯﾄﾞID1，2桁  PCから登録完了
;Auto 停止時トレサビ 起動
LDF R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND<> DM9130 #0          ; 書込み回数
ANB DM2000.0
DW #400 DM9130           ; 書込み回数
CON
SET R42200               ; 上位ﾄﾚｻﾋﾞ送信
CON
SET @R000
STG @R000
AND R42201               ; 上位ﾄﾚｻﾋﾞ送信完了
RES R42201               ; 上位ﾄﾚｻﾋﾞ送信完了
CON
ENDS
;<h1/>処理開始
LD @R102                 ; Traceability　timer
LD CR2003                ; 常時OFF
LD= DM9130 #0            ; 書込み回数
UDT @0 #60000            ; ﾄﾚｻﾋﾞ送信
STG R42000               ; ﾄﾚｻﾋﾞ1開始
ANB R42002               ; ﾄﾚｻﾋﾞ1中
ANB R42202               ; 上位ﾄﾚｻﾋﾞ送信中
ANB CR3214               ; ﾒﾓﾘｶｰﾄﾞ命令実行中
SET R42002               ; ﾄﾚｻﾋﾞ1中
CON
JMP @R103
STG R42200               ; 上位ﾄﾚｻﾋﾞ送信
ANB R42002               ; ﾄﾚｻﾋﾞ1中
ANB R42202               ; 上位ﾄﾚｻﾋﾞ送信中
ANB CR3214               ; ﾒﾓﾘｶｰﾄﾞ命令実行中
SET R42202               ; 上位ﾄﾚｻﾋﾞ送信中
CON
JMP @R213                ; ｱｯﾌﾟﾛｰﾄﾞ
;空き容量チェック
STG @R103
ANB CR3214               ; ﾒﾓﾘｶｰﾄﾞ命令実行中
JMP @R104                ; 容量ﾁｪｯｸ完了
SET @R102                ; Traceability　timer
CON
MFREEK @DM20 @R105       ; 残り容量Kb  容量ﾁｪｯｸ完了
STG @R104                ; 容量ﾁｪｯｸ完了
AND @R105                ; 容量ﾁｪｯｸ完了
MPS
ANB @R106                ; 容量ﾁｪｯｸNG
JMP @R108
MPP
AND @R106                ; 容量ﾁｪｯｸNG
SET @R700                ; ERR200
CON
JMP @R107
STG @R107
AND @R701                ; ERR201
RES @R701                ; ERR201
CON
ZRES @R105 @R106         ; 容量ﾁｪｯｸ完了  容量ﾁｪｯｸNG
CON
JMP @R103
;1MB以下はﾌｫﾙﾀﾞ削除
STG @R108
ZRES @R105 @R106         ; 容量ﾁｪｯｸ完了  容量ﾁｪｯｸNG
CON
MPS
AND>=.D #1000 @DM20      ; 残り容量Kb
JMP @R109                ; 容量不足
MPP
AND<.D #1000 @DM20       ; 残り容量Kb
JMP @R200                ; 容量有
STG @R109                ; 容量不足
MPS
AND= DM9130 #0           ; 書込み回数
JMP @R200                ; 容量有
MPP
AND<> DM9130 #0          ; 書込み回数
SET @R1000               ; 上位ﾄﾚｻﾋﾞ送信
CON
JMP @R110
STG @R110
AND @R1001               ; 上位ﾄﾚｻﾋﾞ送信完了
RES @R1001               ; 上位ﾄﾚｻﾋﾞ送信完了
CON
JMP @R111
;FOLDER 削除
STG @R111
ANB CR3214               ; ﾒﾓﾘｶｰﾄﾞ命令実行中
JMP @R112                ; ﾌｫﾙﾀﾞ削除完了
MRMDIR "Traceability" @R113;ﾌｫﾙﾀﾞ削除完了
STG @R112                ; ﾌｫﾙﾀﾞ削除完了
AND @R113                ; ﾌｫﾙﾀﾞ削除完了
MPS
ANB @R114                ; ﾌｫﾙﾀﾞ削除NG
JMP @R200                ; 容量有
MPP
AND @R114                ; ﾌｫﾙﾀﾞ削除NG
SET @R700                ; ERR200
CON
JMP @R115
STG @R115
AND @R701                ; ERR201
RES @R701                ; ERR201
CON
ZRES @R113 @R114         ; ﾌｫﾙﾀﾞ削除完了  ﾌｫﾙﾀﾞ削除NG
CON
JMP @R111
;ﾌｫﾙﾀﾞ作成
STG @R200                ; 容量有
ZRES @R113 @R114         ; ﾌｫﾙﾀﾞ削除完了  ﾌｫﾙﾀﾞ削除NG
CON
ANB CR3214               ; ﾒﾓﾘｶｰﾄﾞ命令実行中
JMP @R201
MMKDIR "Traceability" @R202;ﾌｫﾙﾀﾞ作成完了
STG @R201
AND @R202                ; ﾌｫﾙﾀﾞ作成完了
MPS
ANB @R203                ; ﾌｫﾙﾀﾞ作成NG
JMP @R205
MPP
AND @R203                ; ﾌｫﾙﾀﾞ作成NG
SET @R700                ; ERR200
CON
JMP @R204
STG @R204
AND @R701                ; ERR201
RES @R701                ; ERR201
CON
ZRES @R202 @R203         ; ﾌｫﾙﾀﾞ作成完了  ﾌｫﾙﾀﾞ作成NG
CON
JMP @R200                ; 容量有
;書込み回数確認
STG @R205
ZRES @R202 @R203         ; ﾌｫﾙﾀﾞ作成完了  ﾌｫﾙﾀﾞ作成NG
CON
MPS
AND= DM9130 #0           ; 書込み回数
ZRES DM9140 DM9169       ; FILE名
CON
JMP @R208
MPP
AND<> DM9130 #0          ; 書込み回数
JMP @R208
;<h1/>DATA書込み開始
STG @R208
@INC DM9130              ; 書込み回数
CON
SET @R300                ; ﾄﾚｻﾋﾞﾃﾞｰﾀ書込み開始
CON
JMP @R209
STG @R209
AND @R301                ; ﾄﾚｻﾋﾞﾃﾞｰﾀ1書込み完了
RES @R301                ; ﾄﾚｻﾋﾞﾃﾞｰﾀ1書込み完了
CON
JMP @R210
STG @R210
MPS
ANB @R303                ; ﾄﾚｻﾋﾞﾃﾞｰﾀ1書込NG
MPS
ANB DM2000.0
JMP @R212                ; ｱｯﾌﾟﾛｰﾄﾞ
MPP
AND DM2000.0
JMP @R215
MPP
AND @R303                ; ﾄﾚｻﾋﾞﾃﾞｰﾀ1書込NG
SET @R800                ; Error201
CON
JMP @R211
STG @R211
RES @R303                ; ﾄﾚｻﾋﾞﾃﾞｰﾀ1書込NG
CON
AND @R801                ; Error201END
RES @R801                ; Error201END
CON
@DEC DM9130              ; 書込み回数
CON
JMP @R208
;--
STG @R212                ; ｱｯﾌﾟﾛｰﾄﾞ
MPS
LDB @T0                  ; ﾄﾚｻﾋﾞ送信
AND< DM9130 #40          ; 書込み回数
ANL
JMP @R215
MPP
LD @T0                   ; ﾄﾚｻﾋﾞ送信
OR>= DM9130 #40          ; 書込み回数
ANL
JMP @R213                ; ｱｯﾌﾟﾛｰﾄﾞ
;10分経過 or 40回書込み FTPアップロード
STG @R213                ; ｱｯﾌﾟﾛｰﾄﾞ
SET @R1000               ; 上位ﾄﾚｻﾋﾞ送信
CON
JMP @R214
STG @R214
AND @R1001               ; 上位ﾄﾚｻﾋﾞ送信完了
RES @R1001               ; 上位ﾄﾚｻﾋﾞ送信完了
CON
JMP @R215
STG @R215
MPS
AND R42002               ; ﾄﾚｻﾋﾞ1中
RES R42002               ; ﾄﾚｻﾋﾞ1中
CON
SET R42001               ; ﾄﾚｻﾋﾞ1完了
CON
ENDS
MPP
AND R42202               ; 上位ﾄﾚｻﾋﾞ送信中
RES R42202               ; 上位ﾄﾚｻﾋﾞ送信中
CON
SET R42201               ; 上位ﾄﾚｻﾋﾞ送信完了
CON
ENDS
;<h1/>-----ﾄﾚｻﾋﾞﾃﾞｰﾀ書込み見本
;工程1
STG @R300                ; ﾄﾚｻﾋﾞﾃﾞｰﾀ書込み開始
DW #0 @DM24              ; 書込み位置
CON
SET @R302                ; ﾄﾚｻﾋﾞﾃﾞｰﾀ1書込み中
CON
JMP @R304
STG @R304
ANB CR3214               ; ﾒﾓﾘｶｰﾄﾞ命令実行中
ZRES R41900 R41901       ; ﾒﾓﾘｶｰﾄﾞ書込み完了  MemoryCard 書込み失敗
CON
JMP @R305
STG @R305
MPS
ANB R41900               ; ﾒﾓﾘｶｰﾄﾞ書込み完了
MPS
AND= @DM24 #0            ; 書込み位置
DW #4 DM9400             ; To Memory Type
CON
DW #0 DM9401             ; To Memory MODE
CON
DW $0000 DM9402          ; To Memory option
CON
MWRIT DM9140 W2000 #1 DM9400 R41900;FILE名  工程No  To Memory Type  ﾒﾓﾘｶｰﾄﾞ書込み完了
MRD
AND= @DM24 #1            ; 書込み位置
DW #8 DM9400             ; To Memory Type
CON
DW #0 DM9401             ; To Memory MODE
CON
DW.D #1 DM9402           ; To Memory option
CON
MWRIT DM9140 DM25000 #7 DM9400 R41900;FILE名  ﾍｯﾄﾞID1，2桁  To Memory Type  ﾒﾓﾘｶｰﾄﾞ書込み完了
MRD
AND= @DM24 #2            ; 書込み位置
DW #4 DM9400             ; To Memory Type
CON
DW #0 DM9401             ; To Memory MODE
CON
DW #1 DM9402             ; To Memory option
CON
MWRIT DM9140 DM25007 #3 DM9400 R41900;FILE名  年月ﾄﾚｻﾋﾞ用  To Memory Type  ﾒﾓﾘｶｰﾄﾞ書込み完了
MRD
AND= @DM24 #3            ; 書込み位置
DW #9 DM9400             ; To Memory Type
CON
DW #0 DM9401             ; To Memory MODE
CON
DW #1 DM9402             ; To Memory option
CON
MWRIT DM9140 DM25010 #4 DM9400 R41900;FILE名  NP面測定結果D(変位ｾﾝｻ1)  To Memory Type  ﾒﾓﾘｶｰﾄﾞ書込み完了
MRD
AND= @DM24 #4            ; 書込み位置
DW #9 DM9400             ; To Memory Type
CON
DW #0 DM9401             ; To Memory MODE
CON
DW #1 DM9402             ; To Memory option
CON
MWRIT DM9140 DM25018 #4 DM9400 R41900;FILE名  算出結果E  To Memory Type  ﾒﾓﾘｶｰﾄﾞ書込み完了
MRD
AND= @DM24 #5            ; 書込み位置
DW #7 DM9400             ; To Memory Type
CON
DW #0 DM9401             ; To Memory MODE
CON
DW #1 DM9402             ; To Memory option
CON
MWRIT DM9140 DM25026 #3 DM9400 R41900;FILE名  平均平面算出値a  To Memory Type  ﾒﾓﾘｶｰﾄﾞ書込み完了
MRD
AND= @DM24 #6            ; 書込み位置
DW #7 DM9400             ; To Memory Type
CON
DW #0 DM9401             ; To Memory MODE
CON
DW #1 DM9402             ; To Memory option
CON
MWRIT DM9140 DM25032 #4 DM9400 R41900;FILE名  M点平均平面高さ(1)  To Memory Type  ﾒﾓﾘｶｰﾄﾞ書込み完了
MRD
AND= @DM24 #7            ; 書込み位置
DW #7 DM9400             ; To Memory Type
CON
DW #0 DM9401             ; To Memory MODE
CON
DW #1 DM9402             ; To Memory option
CON
MWRIT DM9140 DM25040 #4 DM9400 R41900;FILE名  M点ｽﾍﾟｰｻ面測定値(高さ測定1)  To Memory Type  ﾒﾓﾘｶｰﾄﾞ書込み完了
MPP
AND= @DM24 #8            ; 書込み位置
DW #7 DM9400             ; To Memory Type
CON
DW #0 DM9401             ; To Memory MODE
CON
DW #1 DM9402             ; To Memory option
CON
MWRIT DM9140 DM25048 #4 DM9400 R41900;FILE名  M点必要ｼﾑ厚み(1)  To Memory Type  ﾒﾓﾘｶｰﾄﾞ書込み完了
MPP
AND R41900               ; ﾒﾓﾘｶｰﾄﾞ書込み完了
@INC @DM24               ; 書込み位置
CON
MPS
ANB R41901               ; MemoryCard 書込み失敗
JMP @R306
MPP
AND R41901               ; MemoryCard 書込み失敗
SET @R303                ; ﾄﾚｻﾋﾞﾃﾞｰﾀ1書込NG
CON
JMP @R307
STG @R306
MPS
AND< @DM24 #9            ; 書込み位置
JMP @R304
MPP
AND= @DM24 #9            ; 書込み位置
JMP @R307
STG @R307
RES @R302                ; ﾄﾚｻﾋﾞﾃﾞｰﾀ1書込み中
CON
SET @R301                ; ﾄﾚｻﾋﾞﾃﾞｰﾀ1書込み完了
CON
ENDS
;<h1/>上位ﾘﾝｸﾄﾚｻﾋﾞ送信
STG @R1000               ; 上位ﾄﾚｻﾋﾞ送信
ANB CR3214               ; ﾒﾓﾘｶｰﾄﾞ命令実行中
SET @R1002               ; 上位ﾄﾚｻﾋﾞ送信中
CON
JMP @R1003
STG @R1003
@ZRES DM9170 DM9189      ; Memoryｶｰﾄﾞｴﾗｰ内容
CON
JMP @R1004
STG @R1004
DW #1 DM25100            ; PCへ登録要求
CON
JMP @R1005
STG @R1005
MPS
AND= DM25101 #1          ; PCから登録完了
JMP @R1006
MPP
AND<> DM25101 #1         ; PCから登録完了
TMR @1 #300              ; 上位ﾄﾚｻﾋﾞError_wait
CON
AND @T1                  ; 上位ﾄﾚｻﾋﾞError_wait
JMP @R1010
STG @R1006
RES @R102                ; Traceability　timer
CON
DW #0 DM9130             ; 書込み回数
CON
JMP @R1007
STG @R1007
DW #0 DM25100            ; PCへ登録要求
CON
DW #0 DM25101            ; PCから登録完了
CON
SET @R1001               ; 上位ﾄﾚｻﾋﾞ送信完了
CON
RES @R1002               ; 上位ﾄﾚｻﾋﾞ送信中
CON
ENDS
;Err201 :上位ﾄﾚｻﾋﾞ送信ｴﾗｰ
STG @R1010
RES @R1008
CON
SET @R708                ; ERR201
CON
JMP @R1011
STG @R1011
AND @R709                ; ERR201
DW #0 DM25100            ; PCへ登録要求
CON
RES @R709                ; ERR201
CON
JMP @R1000               ; 上位ﾄﾚｻﾋﾞ送信
;<h1/>MyTask Error Process Substance/エラー処理実体
STG @R600                ; Task0 ERROR
ANB R39002               ; ERROR_DISP Busy
MPS
ZRES @R605 @R608         ; SW1  SW4
CON
LDA @DM9                 ; ReturnSW /ERROR_DISP
CON
TBCD
CON
STA @DM10
CON
DISN @DM10 @DM3 #4
MRD
DW #0 @DM0               ; TaskNo /ERROR_DISP
CON
BMOV @DM0 DM60000 #7     ; TaskNo /ERROR_DISP  TaskNo /ERROR_DISP
MPP
SET R39000               ; ERROR_DISP Start
CON
SET @R602                ; Task0 ERROR Busy
CON
JMP @R603
STG @R603
AND R39002               ; ERROR_DISP Busy
AND= DM60008 @DM1        ; ReturnNo /ERROR_DISP  ErrorNo /ERROR_DISP
MPS
AND= DM60007 @DM6        ; ReturnSW /ERROR_DISP
SET @R605                ; SW1
CON
JMP @R604
MRD
AND= DM60007 @DM5        ; ReturnSW /ERROR_DISP
SET @R606                ; SW2
CON
JMP @R604
MRD
AND= DM60007 @DM4        ; ReturnSW /ERROR_DISP
SET @R607                ; SW3
CON
JMP @R604
MPP
AND= DM60007 @DM3        ; ReturnSW /ERROR_DISP
SET @R608                ; SW4
CON
JMP @R604
STG @R604
ANB R39002               ; ERROR_DISP Busy
RES @R602                ; Task0 ERROR Busy
CON
SET @R601                ; Task0 ｴﾗｰ完了
CON
ENDS
;<h1/>ERROR
;ERROR200:MemoryAccess
STG @R700                ; ERR200
ANB R39004               ; ｴﾗｰ中
@ZRES DM9170 DM9189      ; Memoryｶｰﾄﾞｴﾗｰ内容
CON
SET R39005               ; 詳細文字表示
CON
MPS
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #200 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @R600                ; Task0 ERROR
CON
JMP @R702
MRD
AND= CM2390 #1           ; ﾒﾓﾘｶｰﾄﾞ命令用ｴﾗｰｺｰﾄﾞ
SMOV "未挿入" DM9170        ; Memoryｶｰﾄﾞｴﾗｰ内容
MRD
AND= CM2390 #2           ; ﾒﾓﾘｶｰﾄﾞ命令用ｴﾗｰｺｰﾄﾞ
SMOV "ﾌｧｲﾙ名異常" DM9170    ; Memoryｶｰﾄﾞｴﾗｰ内容
MRD
AND= CM2390 #3           ; ﾒﾓﾘｶｰﾄﾞ命令用ｴﾗｰｺｰﾄﾞ
SMOV "ﾌｧｲﾙなし" DM9170     ; Memoryｶｰﾄﾞｴﾗｰ内容
MRD
AND= CM2390 #4           ; ﾒﾓﾘｶｰﾄﾞ命令用ｴﾗｰｺｰﾄﾞ
SMOV "同ﾌｧｲﾙあり" DM9170    ; Memoryｶｰﾄﾞｴﾗｰ内容
MRD
AND= CM2390 #5           ; ﾒﾓﾘｶｰﾄﾞ命令用ｴﾗｰｺｰﾄﾞ
SMOV "読出しｴﾗｰ" DM9170     ; Memoryｶｰﾄﾞｴﾗｰ内容
MRD
AND= CM2390 #6           ; ﾒﾓﾘｶｰﾄﾞ命令用ｴﾗｰｺｰﾄﾞ
SMOV "書込みｴﾗｰ" DM9170     ; Memoryｶｰﾄﾞｴﾗｰ内容
MRD
AND= CM2390 #7           ; ﾒﾓﾘｶｰﾄﾞ命令用ｴﾗｰｺｰﾄﾞ
SMOV "指定位異常" DM9170      ; Memoryｶｰﾄﾞｴﾗｰ内容
MRD
AND= CM2390 #8           ; ﾒﾓﾘｶｰﾄﾞ命令用ｴﾗｰｺｰﾄﾞ
SMOV "容量不足" DM9170       ; Memoryｶｰﾄﾞｴﾗｰ内容
MRD
AND= CM2390 #9           ; ﾒﾓﾘｶｰﾄﾞ命令用ｴﾗｰｺｰﾄﾞ
SMOV "ﾌｫｰﾏｯﾄ異常" DM9170   ; Memoryｶｰﾄﾞｴﾗｰ内容
MRD
AND= CM2390 #10          ; ﾒﾓﾘｶｰﾄﾞ命令用ｴﾗｰｺｰﾄﾞ
SMOV "ｱｸｾｽ競合" DM9170     ; Memoryｶｰﾄﾞｴﾗｰ内容
MPP
AND> CM2390 #10          ; ﾒﾓﾘｶｰﾄﾞ命令用ｴﾗｰｺｰﾄﾞ
SMOV "その他ｴﾗｰ" DM9170     ; Memoryｶｰﾄﾞｴﾗｰ内容
STG @R702
AND @R601                ; Task0 ｴﾗｰ完了
RES @R601                ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES R39005               ; 詳細文字表示
CON
AND @R605                ; SW1
SET @R701                ; ERR201
CON
ENDS
;ERROR122:上位ﾄﾚｻﾋﾞ送信ERROR
STG @R708                ; ERR201
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #2000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #122 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @R600                ; Task0 ERROR
CON
JMP @R711
STG @R711
AND @R601                ; Task0 ｴﾗｰ完了
RES @R601                ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
AND @R605                ; SW1
SET @R709                ; ERR201
CON
ENDS
;ERROR202:Memoryｶｰﾄﾞ書込みエラー
STG @R800                ; Error201
@ZRES DM9170 DM9189      ; Memoryｶｰﾄﾞｴﾗｰ内容
CON
ANB R39004               ; ｴﾗｰ中
SET R39005               ; 詳細文字表示
CON
MPS
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #202 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @R600                ; Task0 ERROR
CON
JMP @R803
MRD
AND= CM2390 #1           ; ﾒﾓﾘｶｰﾄﾞ命令用ｴﾗｰｺｰﾄﾞ
SMOV "未挿入" DM9170        ; Memoryｶｰﾄﾞｴﾗｰ内容
MRD
AND= CM2390 #2           ; ﾒﾓﾘｶｰﾄﾞ命令用ｴﾗｰｺｰﾄﾞ
SMOV "ﾌｧｲﾙ名異常" DM9170    ; Memoryｶｰﾄﾞｴﾗｰ内容
MRD
AND= CM2390 #3           ; ﾒﾓﾘｶｰﾄﾞ命令用ｴﾗｰｺｰﾄﾞ
SMOV "ﾌｧｲﾙなし" DM9170     ; Memoryｶｰﾄﾞｴﾗｰ内容
MRD
AND= CM2390 #4           ; ﾒﾓﾘｶｰﾄﾞ命令用ｴﾗｰｺｰﾄﾞ
SMOV "同ﾌｧｲﾙあり" DM9170    ; Memoryｶｰﾄﾞｴﾗｰ内容
MRD
AND= CM2390 #5           ; ﾒﾓﾘｶｰﾄﾞ命令用ｴﾗｰｺｰﾄﾞ
SMOV "読出しｴﾗｰ" DM9170     ; Memoryｶｰﾄﾞｴﾗｰ内容
MRD
AND= CM2390 #6           ; ﾒﾓﾘｶｰﾄﾞ命令用ｴﾗｰｺｰﾄﾞ
SMOV "書込みｴﾗｰ" DM9170     ; Memoryｶｰﾄﾞｴﾗｰ内容
MRD
AND= CM2390 #7           ; ﾒﾓﾘｶｰﾄﾞ命令用ｴﾗｰｺｰﾄﾞ
SMOV "指定位異常" DM9170      ; Memoryｶｰﾄﾞｴﾗｰ内容
MRD
AND= CM2390 #8           ; ﾒﾓﾘｶｰﾄﾞ命令用ｴﾗｰｺｰﾄﾞ
SMOV "容量不足" DM9170       ; Memoryｶｰﾄﾞｴﾗｰ内容
MRD
AND= CM2390 #9           ; ﾒﾓﾘｶｰﾄﾞ命令用ｴﾗｰｺｰﾄﾞ
SMOV "ﾌｫｰﾏｯﾄ異常" DM9170   ; Memoryｶｰﾄﾞｴﾗｰ内容
MRD
AND= CM2390 #10          ; ﾒﾓﾘｶｰﾄﾞ命令用ｴﾗｰｺｰﾄﾞ
SMOV "ｱｸｾｽ競合" DM9170     ; Memoryｶｰﾄﾞｴﾗｰ内容
MPP
AND> CM2390 #10          ; ﾒﾓﾘｶｰﾄﾞ命令用ｴﾗｰｺｰﾄﾞ
SMOV "その他ｴﾗｰ" DM9170     ; Memoryｶｰﾄﾞｴﾗｰ内容
STG @R803
AND @R601                ; Task0 ｴﾗｰ完了
RES @R601                ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
AND @R605                ; SW1
RES R39005               ; 詳細文字表示
CON
SET @R801                ; Error201END
CON
ENDS
END
ENDH
