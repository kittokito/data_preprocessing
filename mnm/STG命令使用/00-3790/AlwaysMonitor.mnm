DEVICE:53
;MODULE:AlwaysMonitor
;MODULE_TYPE:0
;SCRIPT_TYPE:
;OneSystem Sub-Module
;
;---------------------------------------
;ModuleName	:	AlwaysMonitor
;ModuleType	:	Sub Module
;Function	:	常時監視
;---------------------------------------
;<使用方法>
;常時監視が必要な物は本ﾓｼﾞｭｰﾙ内に記述して下さい
;・ﾋｰﾀｰ過昇温検知による非常停止
;・ﾁｬﾝﾊﾞｰ排気量低下によるｴﾗｰ出力
;など
;<h1/>優先ｴﾗｰ
;元圧低下異常
LD CR2007                ; 運転開始時1ｽｷｬﾝOFF
ANB R44302               ; *Group1　ｴｱｰ元圧検出
MSTRT F_ERROR_DISP #1
;　　上流とのF_ERROR
LDB DM2000.13            ; 上流 H/S 無効
AND B2013                ; ②上流ｾﾙより動作開始通知
ANB B2012                ; 上流ｾﾙよりIL信号
LD= EM1314 #3            ; RB8Target Pos
OR= EM1314 #4            ; RB8Target Pos
ANL
AND DM10563.2            ; MOVE_移動中 RB8
MSTRT F_ERROR_DISP #10
;　　下流とのF_ERROR
LDB DM2000.12            ; 下流 H/S 無効
ANB B2022                ; 下流ｾﾙよりIL信号
AND B2033                ; 下流ｾﾙへ動作開始通知
AND R4810                ; 除材移載PP  下限(4-1側)
AND R4804                ; 除材移載PP 左右 下流側
AND R7805                ; 除材移載PP 左右 上流側
DW #11 @DM20             ; F_ERROR_CODE
;　　ﾄﾚﾁｪﾝとのF_ERROR
LDB DM2000.14            ; T/C H/S 無効
AND B2043                ; ②ﾄﾚﾁｪﾝより動作開始通知
ANB B2042                ; ﾄﾚﾁｪﾝよりIL信号
AND DM10571.2            ; MOVE_移動中 RB9
DW #12 @DM20             ; F_ERROR_CODE
;　　RB8干渉防止
LD R4904                 ; H_ｻﾌﾞ反転移載PP 下限
ANB R4905                ; H_ｻﾌﾞ反転移載PP 上限
AND DM10563.2            ; MOVE_移動中 RB8
ANB R34000               ; Teaching
DW #20 @DM20             ; F_ERROR_CODE
;　　RB1干渉防止
LD R4910                 ; H_ｻﾌﾞ供給PP 下限
ANB R4911                ; H_ｻﾌﾞ供給PP 上限
AND DM10507.2            ; MOVE_移動中 RB1
ANB R34000               ; Teaching
DW #21 @DM20             ; F_ERROR_CODE
;　　RB2干渉防止
LD>=.L DM10532 DM25906   ; RB5POS
ANB T2080                ; RB5_P1_作業原点
ANB T2081                ; RB5_P2_搬送移動位置
ANB T2083                ; RB5_P4_画像撮影位置
AND DM10515.2            ; MOVE_移動中 RB2
ANB R34000               ; Teaching
DW #22 @DM20             ; F_ERROR_CODE
;　　RB3干渉防止
LDB T2100                ; RB6_P1_作業原点
ANB T2101                ; RB6_P2_搬送移動位置
AND DM10523.2            ; MOVE_移動中 RB3
ANB R34000               ; Teaching
DW #23 @DM20             ; F_ERROR_CODE
;　　RB13干渉防止
LD R4215                 ; ｶｼﾒヘッド左右1 上流側
LDB R4203                ; M_ｽﾗ1 ﾜｰｸ押さえ 上限
ORB T2190                ; RB10_P1_作業原点
ANL
LD T2010                 ; RB1_P11_ﾒｲﾝｽﾗｲﾀﾞ1 置き位置
AND T2064                ; RB4_P5_ﾒｲﾝｽﾗｲﾀﾞ1 押込み位置
ORL
LDB T2024                ; RB2_P5_ﾒｲﾝｽﾗｲﾀﾞ1 置き位置(補正後
ANB T2030                ; RB2_P11_ﾒｲﾝｽﾗｲﾀﾞ1 置き位置
INV
AND T2090                ; RB5_P11_ﾒｲﾝｽﾗｲﾀﾞ1 置き位置
ORL
LD T2050                 ; RB3_P11_ﾒｲﾝｽﾗｲﾀﾞ1 取り位置
AND T2110                ; RB6_P11_ﾒｲﾝｽﾗｲﾀﾞ1 取り位置
ORL
AND DM10603.2            ; MOVE_移動中 RB13
ANB R34000               ; Teaching
DW #24 @DM20             ; F_ERROR_CODE
;　　RB14干渉防止
LD R4214                 ; ｶｼﾒヘッド左右1 下流側
LDB R4303                ; M_ｽﾗ2 ﾜｰｸ押さえ 上限
ORB T2190                ; RB10_P1_作業原点
ANL
LD T2011                 ; RB1_P12_ﾒｲﾝｽﾗｲﾀﾞ2 置き位置
AND T2066                ; RB4_P7_ﾒｲﾝｽﾗｲﾀﾞ2 押込み位置
ORL
LDB T2025                ; RB2_P6_ﾒｲﾝｽﾗｲﾀﾞ2 置き位置(補正後
ANB T2031                ; RB2_P12_ﾒｲﾝｽﾗｲﾀﾞ2 置き位置
INV
AND T2091                ; RB5_P12_ﾒｲﾝｽﾗｲﾀﾞ2 置き位置
ORL
LD T2051                 ; RB3_P12_ﾒｲﾝｽﾗｲﾀﾞ2 取り位置
AND T2111                ; RB6_P12_ﾒｲﾝｽﾗｲﾀﾞ2 取り位置
ORL
AND DM10611.2            ; MOVE_移動中 RB14
ANB R34000               ; Teaching
DW #25 @DM20             ; F_ERROR_CODE
;　　RB15干渉防止
LD R4415                 ; ｶｼﾒヘッド左右2 上流側
LDB R4403                ; M_ｽﾗ3 ﾜｰｸ押さえ 上限
ORB T2200                ; RB11_P1_作業原点
ANL
LD T2012                 ; RB1_P13_ﾒｲﾝｽﾗｲﾀﾞ3 置き位置
AND T2068                ; RB4_P9_ﾒｲﾝｽﾗｲﾀﾞ3 押込み位置
ORL
LDB T2026                ; RB2_P7_ﾒｲﾝｽﾗｲﾀﾞ3 置き位置(補正後
ANB T2032                ; RB2_P13_ﾒｲﾝｽﾗｲﾀﾞ3 置き位置
INV
AND T2092                ; RB5_P13_ﾒｲﾝｽﾗｲﾀﾞ3 置き位置
ORL
LD T2052                 ; RB3_P13_ﾒｲﾝｽﾗｲﾀﾞ3 取り位置
AND T2112                ; RB6_P13_ﾒｲﾝｽﾗｲﾀﾞ3 取り位置
ORL
AND DM10619.2            ; MOVE_移動中 RB15
ANB R34000               ; Teaching
DW #26 @DM20             ; F_ERROR_CODE
;　　RB16干渉防止
LD R4414                 ; ｶｼﾒヘッド左右2 下流側
LDB R4503                ; M_ｽﾗ4 ﾜｰｸ押さえ 上限
ORB T2200                ; RB11_P1_作業原点
ANL
LD T2013                 ; RB1_P14_ﾒｲﾝｽﾗｲﾀﾞ4 置き位置
AND T2070                ; RB4_P11_ﾒｲﾝｽﾗｲﾀﾞ4 押込み位置
ORL
LDB T2027                ; RB2_P8_ﾒｲﾝｽﾗｲﾀﾞ4 置き位置(補正後
ANB T2033                ; RB2_P14_ﾒｲﾝｽﾗｲﾀﾞ4 置き位置
INV
AND T2093                ; RB5_P14_ﾒｲﾝｽﾗｲﾀﾞ4 置き位置
ORL
LD T2053                 ; RB3_P14_ﾒｲﾝｽﾗｲﾀﾞ4 取り位置
AND T2113                ; RB6_P14_ﾒｲﾝｽﾗｲﾀﾞ4 取り位置
ORL
AND DM10627.2            ; MOVE_移動中 RB16
ANB R34000               ; Teaching
DW #27 @DM20             ; F_ERROR_CODE
;　　RB17干渉防止
LD R4615                 ; ｶｼﾒヘッド左右3 上流側
LDB R4603                ; M_ｽﾗ5 ﾜｰｸ押さえ 上限
ORB T2210                ; RB12_P1_作業原点
ANL
LD T2014                 ; RB1_P15_ﾒｲﾝｽﾗｲﾀﾞ5 置き位置
AND T2072                ; RB4_P13_ﾒｲﾝｽﾗｲﾀﾞ5 押込み位置
ORL
LDB T2028                ; RB2_P9_ﾒｲﾝｽﾗｲﾀﾞ5 置き位置(補正後
ANB T2034                ; RB2_P15_ﾒｲﾝｽﾗｲﾀﾞ5 置き位置
INV
AND T2094                ; RB5_P15_ﾒｲﾝｽﾗｲﾀﾞ5 置き位置
ORL
LD T2054                 ; RB3_P15_ﾒｲﾝｽﾗｲﾀﾞ5 取り位置
AND T2114                ; RB6_P15_ﾒｲﾝｽﾗｲﾀﾞ5 取り位置
ORL
AND DM10635.2            ; MOVE_移動中 RB17
ANB R34000               ; Teaching
DW #28 @DM20             ; F_ERROR_CODE
;　　RB18干渉防止
LD R4614                 ; ｶｼﾒヘッド左右3 下流側
LDB R4703                ; M_ｽﾗ6 ﾜｰｸ押さえ 上限
ORB T2210                ; RB12_P1_作業原点
ANL
LD T2015                 ; RB1_P16_ﾒｲﾝｽﾗｲﾀﾞ6 置き位置
AND T2074                ; RB4_P15_ﾒｲﾝｽﾗｲﾀﾞ6 押込み位置
ORL
LDB T2029                ; RB2_P10_ﾒｲﾝｽﾗｲﾀﾞ6 置き位置(補正
ANB T2035                ; RB2_P16_ﾒｲﾝｽﾗｲﾀﾞ6 置き位置
INV
AND T2095                ; RB5_P16_ﾒｲﾝｽﾗｲﾀﾞ6 置き位置
ORL
LD T2055                 ; RB3_P16_ﾒｲﾝｽﾗｲﾀﾞ6 取り位置
AND T2115                ; RB6_P16_ﾒｲﾝｽﾗｲﾀﾞ6 取り位置
ORL
AND DM10643.2            ; MOVE_移動中 RB18
ANB R34000               ; Teaching
DW #29 @DM20             ; F_ERROR_CODE
;RB10干渉防止
LDB R4214                ; ｶｼﾒヘッド左右1 下流側
ANB R4215                ; ｶｼﾒヘッド左右1 上流側
AND DM10579.2            ; MOVE_移動中 RB10
DW #30 @DM20             ; F_ERROR_CODE
;RB11干渉防止
LDB R4414                ; ｶｼﾒヘッド左右2 下流側
ANB R4415                ; ｶｼﾒヘッド左右2 上流側
AND DM10587.2            ; MOVE_移動中 RB11
DW #31 @DM20             ; F_ERROR_CODE
;RB12干渉防止
LDB R4614                ; ｶｼﾒヘッド左右3 下流側
ANB R4615                ; ｶｼﾒヘッド左右3 上流側
AND DM10595.2            ; MOVE_移動中 RB12
DW #32 @DM20             ; F_ERROR_CODE
;F_ERRORまとめ
LD CR2007                ; 運転開始時1ｽｷｬﾝOFF
AND<> #0 @DM20           ; F_ERROR_CODE
ANB R53009               ; _優先ｴﾗｰ画面消去
MSTRT F_ERROR_DISP @DM20 ; F_ERROR_CODE
LD CR2008                ; 運転開始時1ｽｷｬﾝON
MOV #0 @DM20             ; F_ERROR_CODE
;<h1/>CELL間 PAUSE 許可
LD R41200                ; _Grp2_Task0_起動中ﾌﾗｸﾞ
ORB R41000               ; _Grp1_Task0_起動中ﾌﾗｸﾞ
LD R41201                ; _Grp2_Task1_起動中ﾌﾗｸﾞ
ORB R41001               ; _Grp1_Task1_起動中ﾌﾗｸﾞ
ANL
LD R41202                ; _Grp2_Task2_起動中ﾌﾗｸﾞ
ORB R41002               ; _Grp1_Task2_起動中ﾌﾗｸﾞ
ANL
LD R41203                ; _Grp2_Task3_起動中ﾌﾗｸﾞ
ORB R41003               ; _Grp1_Task3_起動中ﾌﾗｸﾞ
ANL
LD R41204                ; _Grp2_Task4_起動中ﾌﾗｸﾞ
ORB R41004               ; _Grp1_Task4_起動中ﾌﾗｸﾞ
ANL
LD R41205                ; _Grp2_Task5_起動中ﾌﾗｸﾞ
ORB R41005               ; _Grp1_Task5_起動中ﾌﾗｸﾞ
ANL
LD R41206                ; _Grp2_Task6_起動中ﾌﾗｸﾞ
ORB R41006               ; _Grp1_Task6_起動中ﾌﾗｸﾞ
ANL
LD R41207                ; _Grp2_Task7_起動中ﾌﾗｸﾞ
ORB R41007               ; _Grp1_Task7_起動中ﾌﾗｸﾞ
ANL
LD R41208                ; _Grp2_Task8_起動中ﾌﾗｸﾞ
ORB R41008               ; _Grp1_Task8_起動中ﾌﾗｸﾞ
ANL
LD R41209                ; _Grp2_Task9_起動中ﾌﾗｸﾞ
ORB R41009               ; _Grp1_Task9_起動中ﾌﾗｸﾞ
ANL
LD R41210                ; _Grp2_Task10_起動中ﾌﾗｸﾞ
ORB R41010               ; _Grp1_Task10_起動中ﾌﾗｸﾞ
ANL
OUT B020
;扉開放表示
;@DM0.T = "ｻﾌﾞｶﾊﾞｰ解放中"
LD CR2002                ; 常時ON
NCJ #1000
;@DM0.T = "ｻﾌﾞｶﾊﾞｰ解放中"
LD CR2002                ; 常時ON
SMOV "ｻﾌﾞｶﾊﾞｰ解放中" @DM0
LABEL #1000
;
LDB MR10001              ; ｶｼﾒUT1     ｶﾊﾞｰ開
ANB MR10005              ; ｶｼﾒUT2     ｶﾊﾞｰ開
ANB MR10009              ; ｶｼﾒUT3     ｶﾊﾞｰ開
MPS
MEP
MSTRT BBS_MSG_C #1 #1
MPP
INV
MEP
MSTRT BBS_MSG_W #1 #1 @DM0
;<h1/>ABS_batt低下異常
;RB1 簡易ｱﾌﾞｿﾊﾞｯﾃﾘｰ異常
LD DM10507.3             ; ALM_異常 RB1
LD= DM10506 $00EE        ; RB1Alarm
OR= DM10506 $00EF        ; RB1Alarm
ANL
OR DM10507.7             ; BALM_ﾊﾞｯﾃﾘ低下 RB1
OUT @MR300
CON
DW #1 @DM22              ; WARNING_CODE
;RB2 簡易ｱﾌﾞｿﾊﾞｯﾃﾘｰ異常
LD DM10515.3             ; ALM_異常 RB2
LD= DM10514 $00EE        ; RB2Alarm
OR= DM10514 $00EF        ; RB2Alarm
ANL
OR DM10515.7             ; BALM_ﾊﾞｯﾃﾘ低下 RB2
OUT @MR301
CON
DW #2 @DM22              ; WARNING_CODE
;RB3 簡易ｱﾌﾞｿﾊﾞｯﾃﾘｰ異常
LD DM10523.3             ; ALM_異常 RB3
LD= DM10522 $00EE        ; RB3Alarm
OR= DM10522 $00EF        ; RB3Alarm
ANL
OR DM10523.7             ; BALM_ﾊﾞｯﾃﾘ低下 RB3
OUT @MR302
CON
DW #3 @DM22              ; WARNING_CODE
;RB4 簡易ｱﾌﾞｿﾊﾞｯﾃﾘｰ異常
LD DM10531.3             ; ALM_異常 RB4
LD= DM10530 $00EE        ; RB4Alarm
OR= DM10530 $00EF        ; RB4Alarm
ANL
OUT @MR303
CON
DW #4 @DM22              ; WARNING_CODE
;RB5 簡易ｱﾌﾞｿﾊﾞｯﾃﾘｰ異常
LD DM10539.3             ; ALM_異常 RB5
LD= DM10538 $00EE        ; RB5Alarm
OR= DM10538 $00EF        ; RB5Alarm
ANL
OUT @MR304
CON
DW #5 @DM22              ; WARNING_CODE
;RB6 簡易ｱﾌﾞｿﾊﾞｯﾃﾘｰ異常
LD DM10547.3             ; ALM_異常 RB6
LD= DM10546 $00EE        ; RB6Alarm
OR= DM10546 $00EF        ; RB6Alarm
ANL
OUT @MR305
CON
DW #6 @DM22              ; WARNING_CODE
;RB7 簡易ｱﾌﾞｿﾊﾞｯﾃﾘｰ異常
LD DM10555.3             ; ALM_異常 RB7
LD= DM10554 $00EE        ; RB7Alarm
OR= DM10554 $00EF        ; RB7Alarm
ANL
OUT @MR306
CON
DW #7 @DM22              ; WARNING_CODE
;RB8 簡易ｱﾌﾞｿﾊﾞｯﾃﾘｰ異常
LD DM10563.3             ; ALM_異常 RB8
LD= DM10562 $00EE        ; RB8Alarm
OR= DM10562 $00EF        ; RB8Alarm
ANL
OUT @MR307
CON
DW #8 @DM22              ; WARNING_CODE
;RB9 簡易ｱﾌﾞｿﾊﾞｯﾃﾘｰ異常
LD DM10571.3             ; ALM_異常 RB9
LD= DM10570 $00EE        ; RB9Alarm
OR= DM10570 $00EF        ; RB9Alarm
ANL
OUT @MR308
CON
DW #9 @DM22              ; WARNING_CODE
;RB10 簡易ｱﾌﾞｿﾊﾞｯﾃﾘｰ異常
LD DM10579.3             ; ALM_異常 RB10
LD= DM10578 $00EE        ; RB10Alarm
OR= DM10578 $00EF        ; RB10Alarm
ANL
OUT @MR309
CON
DW #10 @DM22             ; WARNING_CODE
;RB11 簡易ｱﾌﾞｿﾊﾞｯﾃﾘｰ異常
LD DM10587.3             ; ALM_異常 RB11
LD= DM10586 $00EE        ; RB11Alarm
OR= DM10586 $00EF        ; RB11Alarm
ANL
OUT @MR310
CON
DW #11 @DM22             ; WARNING_CODE
;RB12 簡易ｱﾌﾞｿﾊﾞｯﾃﾘｰ異常
LD DM10595.3             ; ALM_異常 RB12
LD= DM10594 $00EE        ; RB12Alarm
OR= DM10594 $00EF        ; RB12Alarm
ANL
OUT @MR311
CON
DW #12 @DM22             ; WARNING_CODE
;RB13 簡易ｱﾌﾞｿﾊﾞｯﾃﾘｰ異常
LD DM10603.3             ; ALM_異常 RB13
LD= DM10602 $00EE        ; RB13Alarm
OR= DM10602 $00EF        ; RB13Alarm
ANL
OUT @MR312
CON
DW #13 @DM22             ; WARNING_CODE
;RB14 簡易ｱﾌﾞｿﾊﾞｯﾃﾘｰ異常
LD DM10611.3             ; ALM_異常 RB14
LD= DM10610 $00EE        ; RB14Alarm
OR= DM10610 $00EF        ; RB14Alarm
ANL
OUT @MR313
CON
DW #14 @DM22             ; WARNING_CODE
;RB15 簡易ｱﾌﾞｿﾊﾞｯﾃﾘｰ異常
LD DM10619.3             ; ALM_異常 RB15
LD= DM10618 $00EE        ; RB15Alarm
OR= DM10618 $00EF        ; RB15Alarm
ANL
OUT @MR314
CON
DW #15 @DM22             ; WARNING_CODE
;RB16 簡易ｱﾌﾞｿﾊﾞｯﾃﾘｰ異常
LD DM10627.3             ; ALM_異常 RB16
LD= DM10626 $00EE        ; RB16Alarm
OR= DM10626 $00EF        ; RB16Alarm
ANL
OUT @MR315
CON
DW #16 @DM22             ; WARNING_CODE
;RB17 簡易ｱﾌﾞｿﾊﾞｯﾃﾘｰ異常
LD DM10635.3             ; ALM_異常 RB17
LD= DM10634 $00EE        ; RB17Alarm
OR= DM10634 $00EF        ; RB17Alarm
ANL
OUT @MR400
CON
DW #17 @DM22             ; WARNING_CODE
;RB18 簡易ｱﾌﾞｿﾊﾞｯﾃﾘｰ異常
LD DM10643.3             ; ALM_異常 RB18
LD= DM10642 $00EE        ; RB18Alarm
OR= DM10642 $00EF        ; RB18Alarm
ANL
OUT @MR401
CON
DW #18 @DM22             ; WARNING_CODE
;　　ﾜｰﾆﾝｸﾞﾒｯｾｰｼﾞ表示
LDB @MR300
ANB @MR301
ANB @MR302
ANB @MR303
ANB @MR304
ANB @MR305
ANB @MR306
ANB @MR307
ANB @MR308
ANB @MR309
ANB @MR310
ANB @MR311
ANB @MR312
ANB @MR313
ANB @MR314
ANB @MR315
ANB @MR400
ANB @MR401
ANB @MR402
ANB @MR403
ANB @MR404
ANB @MR405
ANB @MR406
ANB @MR407
ANB @MR408
ANB @MR409
ANB @MR410
ANB @MR411
ANB @MR412
ANB @MR413
ANB @MR414
INV
OUT @MR415
LD @MR415
ANB R53608               ; _WARN画面消去
MEP
MSTRT WARNING_DISP #1 @DM22 #1 #1;WARNING_CODE
LDF @MR415
MSTRT WARNING_DEL #1 @DM22;WARNING_CODE
;<h1/>MODE MANU選択 異常
LD DM10507.8             ; RMDS_ﾓｰﾄﾞ状態 RB1
DW #21 @DM24
CON
OUT @MR600
LD DM10515.8             ; RMDS_ﾓｰﾄﾞ状態 RB2
DW #22 @DM24
CON
OUT @MR601
LD DM10523.8             ; RMDS_ﾓｰﾄﾞ状態 RB3
DW #23 @DM24
CON
OUT @MR602
LD DM10531.8             ; RMDS_ﾓｰﾄﾞ状態 RB4
DW #24 @DM24
CON
OUT @MR603
LD DM10539.8             ; RMDS_ﾓｰﾄﾞ状態 RB5
DW #25 @DM24
CON
OUT @MR604
LD DM10547.8             ; RMDS_ﾓｰﾄﾞ状態 RB6
DW #26 @DM24
CON
OUT @MR605
LD DM10555.8             ; RMDS_ﾓｰﾄﾞ状態 RB7
DW #27 @DM24
CON
OUT @MR606
LD DM10563.8             ; RMDS_ﾓｰﾄﾞ状態 RB8
DW #28 @DM24
CON
OUT @MR607
LD DM10571.8             ; RMDS_ﾓｰﾄﾞ状態 RB9
DW #29 @DM24
CON
OUT @MR608
LD DM10579.8             ; RMDS_ﾓｰﾄﾞ状態 RB10
DW #30 @DM24
CON
OUT @MR609
LD DM10587.8             ; RMDS_ﾓｰﾄﾞ状態 RB11
DW #31 @DM24
CON
OUT @MR610
LD DM10595.8             ; RMDS_ﾓｰﾄﾞ状態 RB12
DW #32 @DM24
CON
OUT @MR611
LD DM10603.8             ; RMDS_ﾓｰﾄﾞ状態 RB13
DW #33 @DM24
CON
OUT @MR612
LD DM10611.8             ; RMDS_ﾓｰﾄﾞ状態 RB14
DW #34 @DM24
CON
OUT @MR613
LD DM10619.8             ; RMDS_ﾓｰﾄﾞ状態 RB15
DW #35 @DM24
CON
OUT @MR614
LD DM10627.8             ; RMDS_ﾓｰﾄﾞ状態 RB16
DW #36 @DM24
CON
OUT @MR615
LD DM10635.8             ; RMDS_ﾓｰﾄﾞ状態 RB17
DW #37 @DM24
CON
OUT @MR700
LD DM10643.8             ; RMDS_ﾓｰﾄﾞ状態 RB18
DW #38 @DM24
CON
OUT @MR701
;　　ﾜｰﾆﾝｸﾞﾒｯｾｰｼﾞ表示
LDB @MR600
ANB @MR601
ANB @MR602
ANB @MR603
ANB @MR604
ANB @MR605
ANB @MR606
ANB @MR607
ANB @MR608
ANB @MR609
ANB @MR610
ANB @MR611
ANB @MR612
ANB @MR613
ANB @MR614
ANB @MR615
ANB @MR700
ANB @MR701
ANB @MR702
ANB @MR703
ANB @MR704
ANB @MR705
ANB @MR706
ANB @MR707
ANB @MR708
ANB @MR709
ANB @MR710
ANB @MR711
ANB @MR712
ANB @MR713
ANB @MR714
INV
OUT @MR715
LD @MR715
ANB R53608               ; _WARN画面消去
MEP
MSTRT WARNING_DISP #1 @DM24 #1 #1
LDF @MR715
MSTRT WARNING_DEL #1 @DM24
;<h1/>温度監視
;UT1
LD R1200                 ;  ｶｼﾒ U1(I_W) 運転中出力
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
OUT MR1200               ; UT1描画
LD CR2002                ; 常時ON
MPS
AND R1200                ;  ｶｼﾒ U1(I_W) 運転中出力
MPS
LDB MR18001              ; UT1取得中
AND>= EM2000 DM4240      ; TEMP_PV_UT1_#1  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_21
LD>= EM2001 DM4240       ; TEMP_PV_UT1_#2  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_21
OR MR1303                ;  ｶｼﾒ U1(I/W)_2点溶着切替入力
ANL
AND>= EM2002 DM4240      ; TEMP_PV_UT1_#3  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_21
LD>= EM2003 DM4240       ; TEMP_PV_UT1_#4  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_21
OR MR1303                ;  ｶｼﾒ U1(I/W)_2点溶着切替入力
ANL
ANL
@SET MR18000             ; UT1温度取得開始
CON
@SET MR18001             ; UT1取得中
MPP
LD MR18001               ; UT1取得中
AND>= FM2000 #3          ; UT1_格納数
AND< EM2000 DM4240       ; TEMP_PV_UT1_#1  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_21
LD< EM2001 DM4240        ; TEMP_PV_UT1_#2  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_21
OR MR1303                ;  ｶｼﾒ U1(I/W)_2点溶着切替入力
ANL
AND< EM2002 DM4240       ; TEMP_PV_UT1_#3  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_21
LD< EM2003 DM4240        ; TEMP_PV_UT1_#4  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_21
OR MR1303                ;  ｶｼﾒ U1(I/W)_2点溶着切替入力
ANL
ANL
RES MR18000              ; UT1温度取得開始
MPP
ANB R1200                ;  ｶｼﾒ U1(I_W) 運転中出力
RES MR18000              ; UT1温度取得開始
CON
RES MR18001              ; UT1取得中
LDP MR18000              ; UT1温度取得開始
ZRES @DM10 @DM11
CON
DW #0 FM2000             ; UT1_格納数
CON
ZRES FM2100 FM2299       ; UT1_ch1集計格納先
;'ﾃﾞｰﾀ集計の為の格納ｽｸﾘﾌﾟﾄ
;'温調器通信で得た情報を通信ｻｲｸﾙ毎、集計用ﾃﾞﾊﾞｲｽに格納する
;
;IF LDP (R18202) THEN		'通信ﾎﾟｰﾄの読出し回数をｶｳﾝﾄ
;		INC(@DM10)
;		IF @DM10 >= 4 THEN 	'4回に1回格納実行(2chの場合は1/2回）
;			IF FM2000 >= 50 THEN	'格納数制限確認
;				FM2000 = 0			'格納数上限なら頭に戻す
;			END IF
;			@DM11 = FM2000			'ﾃﾞｰﾀ集計格納先を指定
;			FM2100:@DM11 = EM2000	'ﾃﾞｰﾀ集計格納先ここから
;			FM2150:@DM11 = EM2001	
;			FM2200:@DM11 = EM2002	
;			FM2250:@DM11 = EM2003	'ここまで
;			INC (FM2000) 			'格納先をINC
;			@DM10 = 0
;			SET (MR18012)			'ﾛｷﾞﾝｸﾞ要求
;		END IF
;END IF
LD MR18000               ; UT1温度取得開始
NCJ #1001
;'ﾃﾞｰﾀ集計の為の格納ｽｸﾘﾌﾟﾄ
;
;'温調器通信で得た情報を通信ｻｲｸﾙ毎、集計用ﾃﾞﾊﾞｲｽに格納する
;
;IF LDP (R18202) THEN		'通信ﾎﾟｰﾄの読出し回数をｶｳﾝﾄ
;
LDP R18202               ; Port2 受信ﾃﾞｰﾀ読出要求
NCJ #2000
;		INC(@DM10)
;
LD CR2002                ; 常時ON
INC @DM10
;		IF @DM10 >= 4 THEN 	'4回に1回格納実行(2chの場合は1/2回）
;
LD>= @DM10 #4
NCJ #2001
;			IF FM2000 >= 50 THEN	'格納数制限確認
;
LD>= FM2000 #50          ; UT1_格納数
NCJ #2002
;				FM2000 = 0			'格納数上限なら頭に戻す
;
LD CR2002                ; 常時ON
MOV #0 FM2000            ; UT1_格納数
;			END IF
;
LABEL #2002
;			@DM11 = FM2000			'ﾃﾞｰﾀ集計格納先を指定
;
LD CR2002                ; 常時ON
MOV FM2000 @DM11         ; UT1_格納数
;			FM2100:@DM11 = EM2000	'ﾃﾞｰﾀ集計格納先ここから
;
LD CR2002                ; 常時ON
LDA @DM11
CON
EXT
CON
STA.L Z11
CON
MOV EM2000 FM2100:Z11    ; TEMP_PV_UT1_#1  UT1_ch1集計格納先
;			FM2150:@DM11 = EM2001	
;
LD CR2002                ; 常時ON
LDA @DM11
CON
EXT
CON
STA.L Z11
CON
MOV EM2001 FM2150:Z11    ; TEMP_PV_UT1_#2  UT1_ch2集計格納先
;			FM2200:@DM11 = EM2002	
;
LD CR2002                ; 常時ON
LDA @DM11
CON
EXT
CON
STA.L Z11
CON
MOV EM2002 FM2200:Z11    ; TEMP_PV_UT1_#3  UT1_ch3集計格納先
;			FM2250:@DM11 = EM2003	'ここまで
;
LD CR2002                ; 常時ON
LDA @DM11
CON
EXT
CON
STA.L Z11
CON
MOV EM2003 FM2250:Z11    ; TEMP_PV_UT1_#4  UT1_ch4集計格納先
;			INC (FM2000) 			'格納先をINC
;
LD CR2002                ; 常時ON
INC FM2000               ; UT1_格納数
;			@DM10 = 0
;
LD CR2002                ; 常時ON
MOV #0 @DM10
;			SET (MR18012)			'ﾛｷﾞﾝｸﾞ要求
;
LD CR2002                ; 常時ON
SET MR18012              ; UT1-ﾛｷﾞﾝｸﾞ要求
;		END IF
;
LABEL #2001
;END IF
LABEL #2000
LABEL #1001
;
LD> FM2000 #0            ; UT1_格納数
MPS
AVG FM2100 FM2000        ; UT1_ch1集計格納先  UT1_格納数
CON
STA FM2001               ; UT1_ch1平均温度
MRD
AVG FM2150 FM2000        ; UT1_ch2集計格納先  UT1_格納数
CON
STA FM2002               ; UT1_ch2平均温度
MRD
AVG FM2200 FM2000        ; UT1_ch3集計格納先  UT1_格納数
CON
STA FM2003               ; UT1_ch3平均温度
MPP
AVG FM2250 FM2000        ; UT1_ch4集計格納先  UT1_格納数
CON
STA FM2004               ; UT1_ch4平均温度
LDB MR18000              ; UT1温度取得開始
MPS
LD<= FM2001 DM4242       ; UT1_ch1平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_22
AND>= FM2001 DM4244      ; UT1_ch1平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_23
ANL
OUT MR18002              ; UT1-1判定OK
MRD
LD> FM2001 DM4242        ; UT1_ch1平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_22
OR< FM2001 DM4244        ; UT1_ch1平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_23
ANL
OUT MR18003              ; UT1-1判定NG
MRD
LD<= FM2002 DM4242       ; UT1_ch2平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_22
AND>= FM2002 DM4244      ; UT1_ch2平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_23
ANL
OUT MR18004              ; UT1-2判定OK
MRD
LD> FM2002 DM4242        ; UT1_ch2平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_22
OR< FM2002 DM4244        ; UT1_ch2平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_23
ANL
OUT MR18005              ; UT1-2判定NG
MRD
LD<= FM2003 DM4242       ; UT1_ch3平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_22
AND>= FM2003 DM4244      ; UT1_ch3平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_23
ANL
OUT MR18006              ; UT1-3判定OK
MRD
LD> FM2003 DM4242        ; UT1_ch3平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_22
OR< FM2003 DM4244        ; UT1_ch3平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_23
ANL
OUT MR18007              ; UT1-3判定NG
MRD
LD<= FM2004 DM4242       ; UT1_ch4平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_22
AND>= FM2004 DM4244      ; UT1_ch4平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_23
ANL
OUT MR18008              ; UT1-4判定OK
MPP
LD> FM2004 DM4242        ; UT1_ch4平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_22
OR< FM2004 DM4244        ; UT1_ch4平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_23
ANL
OUT MR18009              ; UT1-4判定NG
LD MR18002               ; UT1-1判定OK
ANB MR18003              ; UT1-1判定NG
LD MR18004               ; UT1-2判定OK
ANB MR18005              ; UT1-2判定NG
OR MR1303                ;  ｶｼﾒ U1(I/W)_2点溶着切替入力
ANL
AND MR18006              ; UT1-3判定OK
ANB MR18007              ; UT1-3判定NG
LD MR18008               ; UT1-4判定OK
ANB MR18009              ; UT1-4判定NG
OR MR1303                ;  ｶｼﾒ U1(I/W)_2点溶着切替入力
ANL
OR DM2001.4              ; ｶｼﾒ1動作有無(0：有_1：無)
OUT MR18014              ; UT1-温度判定ALL OK
;UT2
LD R1208                 ;  ｶｼﾒ U2(I_W)_運転中出力
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
OUT MR1201               ; UT2描画
LD CR2002                ; 常時ON
MPS
AND R1208                ;  ｶｼﾒ U2(I_W)_運転中出力
MPS
LDB MR18101              ; UT2取得中
AND>= EM2004 DM4246      ; TEMP_PV_UT2_#1  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_24
LD>= EM2005 DM4246       ; TEMP_PV_UT2_#2  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_24
OR MR1311                ;  ｶｼﾒ U2(I/W)_2点溶着切替入力
ANL
AND>= EM2006 DM4246      ; TEMP_PV_UT2_#3  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_24
LD>= EM2007 DM4246       ; TEMP_PV_UT2_#4  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_24
OR MR1311                ;  ｶｼﾒ U2(I/W)_2点溶着切替入力
ANL
ANL
@SET MR18100             ; UT2温度取得開始
CON
@SET MR18101             ; UT2取得中
MPP
LD MR18101               ; UT2取得中
AND>= FM2008 #3          ; UT2_格納数
AND< EM2004 DM4246       ; TEMP_PV_UT2_#1  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_24
LD< EM2005 DM4246        ; TEMP_PV_UT2_#2  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_24
OR MR1311                ;  ｶｼﾒ U2(I/W)_2点溶着切替入力
ANL
AND< EM2006 DM4246       ; TEMP_PV_UT2_#3  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_24
LD< EM2007 DM4246        ; TEMP_PV_UT2_#4  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_24
OR MR1311                ;  ｶｼﾒ U2(I/W)_2点溶着切替入力
ANL
ANL
RES MR18100              ; UT2温度取得開始
MPP
ANB R1208                ;  ｶｼﾒ U2(I_W)_運転中出力
RES MR18100              ; UT2温度取得開始
CON
RES MR18101              ; UT2取得中
LDP MR18100              ; UT2温度取得開始
ZRES @DM12 @DM13
CON
DW #0 FM2008             ; UT2_格納数
CON
ZRES FM2300 FM2499       ; UT2_ch1集計格納先
;'ﾃﾞｰﾀ集計の為の格納ｽｸﾘﾌﾟﾄ
;'温調器通信で得た情報を通信ｻｲｸﾙ毎、集計用ﾃﾞﾊﾞｲｽに格納する
;
;IF LDP (R18502) THEN		'通信ﾎﾟｰﾄの読出し回数をｶｳﾝﾄ
;		INC(@DM12)
;		IF @DM12 >= 4 THEN 	'4回に1回格納実行(2chの場合は1/2回）
;			IF FM2008 >= 50 THEN	'格納数制限確認
;				FM2008 = 0			'格納数上限なら頭に戻す
;			END IF
;			@DM13 = FM2008			'ﾃﾞｰﾀ集計格納先を指定
;			FM2300:@DM13 = EM2004	'ﾃﾞｰﾀ集計格納先ここから
;			FM2350:@DM13 = EM2005	
;			FM2400:@DM13 = EM2006	
;			FM2450:@DM13 = EM2007	'ここまで
;			INC (FM2008) 			'格納先をINC
;			@DM12 = 0
;			SET (MR18112)			'ﾛｷﾞﾝｸﾞ要求
;		END IF
;END IF
LD MR18100               ; UT2温度取得開始
NCJ #1002
;'ﾃﾞｰﾀ集計の為の格納ｽｸﾘﾌﾟﾄ
;
;'温調器通信で得た情報を通信ｻｲｸﾙ毎、集計用ﾃﾞﾊﾞｲｽに格納する
;
;IF LDP (R18502) THEN		'通信ﾎﾟｰﾄの読出し回数をｶｳﾝﾄ
;
LDP R18502               ; Port2 受信ﾃﾞｰﾀ読出要求
NCJ #2003
;		INC(@DM12)
;
LD CR2002                ; 常時ON
INC @DM12
;		IF @DM12 >= 4 THEN 	'4回に1回格納実行(2chの場合は1/2回）
;
LD>= @DM12 #4
NCJ #2004
;			IF FM2008 >= 50 THEN	'格納数制限確認
;
LD>= FM2008 #50          ; UT2_格納数
NCJ #2005
;				FM2008 = 0			'格納数上限なら頭に戻す
;
LD CR2002                ; 常時ON
MOV #0 FM2008            ; UT2_格納数
;			END IF
;
LABEL #2005
;			@DM13 = FM2008			'ﾃﾞｰﾀ集計格納先を指定
;
LD CR2002                ; 常時ON
MOV FM2008 @DM13         ; UT2_格納数
;			FM2300:@DM13 = EM2004	'ﾃﾞｰﾀ集計格納先ここから
;
LD CR2002                ; 常時ON
LDA @DM13
CON
EXT
CON
STA.L Z11
CON
MOV EM2004 FM2300:Z11    ; TEMP_PV_UT2_#1  UT2_ch1集計格納先
;			FM2350:@DM13 = EM2005	
;
LD CR2002                ; 常時ON
LDA @DM13
CON
EXT
CON
STA.L Z11
CON
MOV EM2005 FM2350:Z11    ; TEMP_PV_UT2_#2  UT2_ch2集計格納先
;			FM2400:@DM13 = EM2006	
;
LD CR2002                ; 常時ON
LDA @DM13
CON
EXT
CON
STA.L Z11
CON
MOV EM2006 FM2400:Z11    ; TEMP_PV_UT2_#3  UT2_ch3集計格納先
;			FM2450:@DM13 = EM2007	'ここまで
;
LD CR2002                ; 常時ON
LDA @DM13
CON
EXT
CON
STA.L Z11
CON
MOV EM2007 FM2450:Z11    ; TEMP_PV_UT2_#4  UT2_ch4集計格納先
;			INC (FM2008) 			'格納先をINC
;
LD CR2002                ; 常時ON
INC FM2008               ; UT2_格納数
;			@DM12 = 0
;
LD CR2002                ; 常時ON
MOV #0 @DM12
;			SET (MR18112)			'ﾛｷﾞﾝｸﾞ要求
;
LD CR2002                ; 常時ON
SET MR18112              ; UT2-ﾛｷﾞﾝｸﾞ要求
;		END IF
;
LABEL #2004
;END IF
LABEL #2003
LABEL #1002
;
LD> FM2008 #0            ; UT2_格納数
MPS
AVG FM2300 FM2008        ; UT2_ch1集計格納先  UT2_格納数
CON
STA FM2009               ; UT2_ch1平均温度
MRD
AVG FM2350 FM2008        ; UT2_ch2集計格納先  UT2_格納数
CON
STA FM2010               ; UT2_ch2平均温度
MRD
AVG FM2400 FM2008        ; UT2_ch3集計格納先  UT2_格納数
CON
STA FM2011               ; UT2_ch3平均温度
MPP
AVG FM2450 FM2008        ; UT2_ch4集計格納先  UT2_格納数
CON
STA FM2012               ; UT2_ch4平均温度
LDB MR18100              ; UT2温度取得開始
MPS
LD<= FM2009 DM4248       ; UT2_ch1平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_25
AND>= FM2009 DM4250      ; UT2_ch1平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_26
ANL
OUT MR18102              ; UT2-1判定OK
MRD
LD> FM2009 DM4248        ; UT2_ch1平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_25
OR< FM2009 DM4250        ; UT2_ch1平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_26
ANL
OUT MR18103              ; UT2-1判定NG
MRD
LD<= FM2010 DM4248       ; UT2_ch2平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_25
AND>= FM2010 DM4250      ; UT2_ch2平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_26
ANL
OUT MR18104              ; UT2-2判定OK
MRD
LD> FM2010 DM4248        ; UT2_ch2平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_25
OR< FM2010 DM4250        ; UT2_ch2平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_26
ANL
OUT MR18105              ; UT2-2判定NG
MRD
LD<= FM2011 DM4248       ; UT2_ch3平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_25
AND>= FM2011 DM4250      ; UT2_ch3平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_26
ANL
OUT MR18106              ; UT2-3判定OK
MRD
LD> FM2011 DM4248        ; UT2_ch3平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_25
OR< FM2011 DM4250        ; UT2_ch3平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_26
ANL
OUT MR18107              ; UT2-3判定NG
MRD
LD<= FM2012 DM4248       ; UT2_ch4平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_25
AND>= FM2012 DM4250      ; UT2_ch4平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_26
ANL
OUT MR18108              ; UT2-4判定OK
MPP
LD> FM2012 DM4248        ; UT2_ch4平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_25
OR< FM2012 DM4250        ; UT2_ch4平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_26
ANL
OUT MR18109              ; UT2-4判定NG
LD MR18102               ; UT2-1判定OK
ANB MR18103              ; UT2-1判定NG
LD MR18104               ; UT2-2判定OK
ANB MR18105              ; UT2-2判定NG
OR MR1311                ;  ｶｼﾒ U2(I/W)_2点溶着切替入力
ANL
AND MR18106              ; UT2-3判定OK
ANB MR18107              ; UT2-3判定NG
LD MR18108               ; UT2-4判定OK
ANB MR18109              ; UT2-4判定NG
OR MR1311                ;  ｶｼﾒ U2(I/W)_2点溶着切替入力
ANL
OR DM2001.5              ; ｶｼﾒ2動作有無(0：有_1：無)
OUT MR18114              ; UT2-温度判定ALL OK
;UT3
LD R1400                 ;  ｶｼﾒ U3(I_W)_運転中出力
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
OUT MR1202               ; UT3描画
LD CR2002                ; 常時ON
MPS
AND R1400                ;  ｶｼﾒ U3(I_W)_運転中出力
MPS
LDB MR18201              ; UT3取得中
AND>= EM2008 DM4252      ; TEMP_PV_UT3_#1  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_27
LD>= EM2009 DM4252       ; TEMP_PV_UT3_#2  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_27
OR MR1503                ;  ｶｼﾒ U3(I/W)_2点溶着切替入力
ANL
AND>= EM2010 DM4252      ; TEMP_PV_UT3_#3  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_27
LD>= EM2011 DM4252       ; TEMP_PV_UT3_#4  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_27
OR MR1503                ;  ｶｼﾒ U3(I/W)_2点溶着切替入力
ANL
ANL
@SET MR18200             ; UT3温度取得開始
CON
@SET MR18201             ; UT3取得中
MPP
LD MR18201               ; UT3取得中
AND>= FM2016 #3          ; UT3_格納数
AND< EM2008 DM4252       ; TEMP_PV_UT3_#1  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_27
LD< EM2009 DM4252        ; TEMP_PV_UT3_#2  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_27
OR MR1503                ;  ｶｼﾒ U3(I/W)_2点溶着切替入力
ANL
AND< EM2010 DM4252       ; TEMP_PV_UT3_#3  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_27
LD< EM2011 DM4252        ; TEMP_PV_UT3_#4  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_27
OR MR1503                ;  ｶｼﾒ U3(I/W)_2点溶着切替入力
ANL
ANL
RES MR18200              ; UT3温度取得開始
MPP
ANB R1400                ;  ｶｼﾒ U3(I_W)_運転中出力
RES MR18200              ; UT3温度取得開始
CON
RES MR18201              ; UT3取得中
LDP MR18200              ; UT3温度取得開始
ZRES @DM14 @DM15
CON
DW #0 FM2016             ; UT3_格納数
CON
ZRES FM2500 FM2699       ; UT3_ch1集計格納先
;'ﾃﾞｰﾀ集計の為の格納ｽｸﾘﾌﾟﾄ
;'温調器通信で得た情報を通信ｻｲｸﾙ毎、集計用ﾃﾞﾊﾞｲｽに格納する
;
;IF LDP (R18802) THEN		'通信ﾎﾟｰﾄの読出し回数をｶｳﾝﾄ
;		INC(@DM14)
;		IF @DM14 >= 4 THEN 	'4回に1回格納実行(2chの場合は1/2回）
;			IF FM2016 >= 50 THEN	'格納数制限確認
;				FM2016 = 0			'格納数上限なら頭に戻す
;			END IF
;			@DM15 = FM2016			'ﾃﾞｰﾀ集計格納先を指定
;			FM2500:@DM15 = EM2008	'ﾃﾞｰﾀ集計格納先ここから
;			FM2550:@DM15 = EM2009	
;			FM2600:@DM15 = EM2010	
;			FM2650:@DM15 = EM2011	'ここまで
;			INC (FM2016) 			'格納先をINC
;			@DM14 = 0
;			SET (MR18212)			'ﾛｷﾞﾝｸﾞ要求
;		END IF
;END IF
LD MR18200               ; UT3温度取得開始
NCJ #1003
;'ﾃﾞｰﾀ集計の為の格納ｽｸﾘﾌﾟﾄ
;
;'温調器通信で得た情報を通信ｻｲｸﾙ毎、集計用ﾃﾞﾊﾞｲｽに格納する
;
;IF LDP (R18802) THEN		'通信ﾎﾟｰﾄの読出し回数をｶｳﾝﾄ
;
LDP R18802               ; Port2 受信ﾃﾞｰﾀ読出要求
NCJ #2006
;		INC(@DM14)
;
LD CR2002                ; 常時ON
INC @DM14
;		IF @DM14 >= 4 THEN 	'4回に1回格納実行(2chの場合は1/2回）
;
LD>= @DM14 #4
NCJ #2007
;			IF FM2016 >= 50 THEN	'格納数制限確認
;
LD>= FM2016 #50          ; UT3_格納数
NCJ #2008
;				FM2016 = 0			'格納数上限なら頭に戻す
;
LD CR2002                ; 常時ON
MOV #0 FM2016            ; UT3_格納数
;			END IF
;
LABEL #2008
;			@DM15 = FM2016			'ﾃﾞｰﾀ集計格納先を指定
;
LD CR2002                ; 常時ON
MOV FM2016 @DM15         ; UT3_格納数
;			FM2500:@DM15 = EM2008	'ﾃﾞｰﾀ集計格納先ここから
;
LD CR2002                ; 常時ON
LDA @DM15
CON
EXT
CON
STA.L Z11
CON
MOV EM2008 FM2500:Z11    ; TEMP_PV_UT3_#1  UT3_ch1集計格納先
;			FM2550:@DM15 = EM2009	
;
LD CR2002                ; 常時ON
LDA @DM15
CON
EXT
CON
STA.L Z11
CON
MOV EM2009 FM2550:Z11    ; TEMP_PV_UT3_#2  UT3_ch2集計格納先
;			FM2600:@DM15 = EM2010	
;
LD CR2002                ; 常時ON
LDA @DM15
CON
EXT
CON
STA.L Z11
CON
MOV EM2010 FM2600:Z11    ; TEMP_PV_UT3_#3  UT3_ch3集計格納先
;			FM2650:@DM15 = EM2011	'ここまで
;
LD CR2002                ; 常時ON
LDA @DM15
CON
EXT
CON
STA.L Z11
CON
MOV EM2011 FM2650:Z11    ; TEMP_PV_UT3_#4  UT3_ch4集計格納先
;			INC (FM2016) 			'格納先をINC
;
LD CR2002                ; 常時ON
INC FM2016               ; UT3_格納数
;			@DM14 = 0
;
LD CR2002                ; 常時ON
MOV #0 @DM14
;			SET (MR18212)			'ﾛｷﾞﾝｸﾞ要求
;
LD CR2002                ; 常時ON
SET MR18212              ; UT3-ﾛｷﾞﾝｸﾞ要求
;		END IF
;
LABEL #2007
;END IF
LABEL #2006
LABEL #1003
;
LD> FM2016 #0            ; UT3_格納数
MPS
AVG FM2500 FM2016        ; UT3_ch1集計格納先  UT3_格納数
CON
STA FM2017               ; UT3_ch1平均温度
MRD
AVG FM2550 FM2016        ; UT3_ch2集計格納先  UT3_格納数
CON
STA FM2018               ; UT3_ch2平均温度
MRD
AVG FM2600 FM2016        ; UT3_ch3集計格納先  UT3_格納数
CON
STA FM2019               ; UT3_ch3平均温度
MPP
AVG FM2650 FM2016        ; UT3_ch4集計格納先  UT3_格納数
CON
STA FM2020               ; UT3_ch4平均温度
LDB MR18200              ; UT3温度取得開始
MPS
LD<= FM2017 DM4254       ; UT3_ch1平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_28
AND>= FM2017 DM4256      ; UT3_ch1平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_29
ANL
OUT MR18202              ; UT3-1判定OK
MRD
LD> FM2017 DM4254        ; UT3_ch1平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_28
OR< FM2017 DM4256        ; UT3_ch1平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_29
ANL
OUT MR18203              ; UT3-1判定NG
MRD
LD<= FM2018 DM4254       ; UT3_ch2平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_28
AND>= FM2018 DM4256      ; UT3_ch2平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_29
ANL
OUT MR18204              ; UT3-2判定OK
MRD
LD> FM2018 DM4254        ; UT3_ch2平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_28
OR< FM2018 DM4256        ; UT3_ch2平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_29
ANL
OUT MR18205              ; UT3-2判定NG
MRD
LD<= FM2019 DM4254       ; UT3_ch3平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_28
AND>= FM2019 DM4256      ; UT3_ch3平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_29
ANL
OUT MR18206              ; UT3-3判定OK
MRD
LD> FM2019 DM4254        ; UT3_ch3平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_28
OR< FM2019 DM4256        ; UT3_ch3平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_29
ANL
OUT MR18207              ; UT3-3判定NG
MRD
LD<= FM2020 DM4254       ; UT3_ch4平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_28
AND>= FM2020 DM4256      ; UT3_ch4平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_29
ANL
OUT MR18208              ; UT3-4判定OK
MPP
LD> FM2020 DM4254        ; UT3_ch4平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_28
OR< FM2020 DM4256        ; UT3_ch4平均温度  _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ_29
ANL
OUT MR18209              ; UT3-4判定NG
LD MR18202               ; UT3-1判定OK
ANB MR18203              ; UT3-1判定NG
LD MR18204               ; UT3-2判定OK
ANB MR18205              ; UT3-2判定NG
OR MR1503                ;  ｶｼﾒ U3(I/W)_2点溶着切替入力
ANL
AND MR18206              ; UT3-3判定OK
ANB MR18207              ; UT3-3判定NG
LD MR18208               ; UT3-4判定OK
ANB MR18209              ; UT3-4判定NG
OR MR1503                ;  ｶｼﾒ U3(I/W)_2点溶着切替入力
ANL
OR DM2001.6              ; ｶｼﾒ3動作有無(0：有_1：無)
OUT MR18214              ; UT3-温度判定ALL OK
;<h1/>温度ﾛｷﾞﾝｸﾞ
;出来る限り1つのﾌｧｲﾙに連続してﾛｷﾞﾝｸﾞさせたいので、
;30分以上取得が途切れない限り、ﾌｧｲﾙを閉じない。
LD MR18000               ; UT1温度取得開始
LD CR000                 ; ﾛｷﾞﾝｸﾞ0実行許可
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ORL
MPS
ANB @T0
OUT CR000                ; ﾛｷﾞﾝｸﾞ0実行許可
MPP
ANB MR18000              ; UT1温度取得開始
TMR @0 #18000
LD MR18100               ; UT2温度取得開始
LD CR100                 ; ﾛｷﾞﾝｸﾞ1実行許可
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ORL
MPS
ANB @T1
OUT CR100                ; ﾛｷﾞﾝｸﾞ1実行許可
MPP
ANB MR18100              ; UT2温度取得開始
TMR @1 #18000
LD MR18200               ; UT3温度取得開始
LD CR200                 ; ﾛｷﾞﾝｸﾞ2実行許可
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ORL
MPS
ANB @T2
OUT CR200                ; ﾛｷﾞﾝｸﾞ2実行許可
MPP
ANB MR18200              ; UT3温度取得開始
TMR @2 #18000
;ﾛｷﾞﾝｸﾞ命令
LD CR3212                ; ﾒﾓﾘｶｰﾄﾞ認識完了
ANB CR002                ; ﾛｷﾞﾝｸﾞ0ﾌｧｲﾙ書込み終了
ANB CR102                ; ﾛｷﾞﾝｸﾞ1ﾌｧｲﾙ書込み終了
ANB CR202                ; ﾛｷﾞﾝｸﾞ2ﾌｧｲﾙ書込み終了
MPS
LD MR18012               ; UT1-ﾛｷﾞﾝｸﾞ要求
AND CR000                ; ﾛｷﾞﾝｸﾞ0実行許可
ANL
RES MR18012              ; UT1-ﾛｷﾞﾝｸﾞ要求
CON
TRGD #0
MPP
ANB MR18012              ; UT1-ﾛｷﾞﾝｸﾞ要求
MPS
LD MR18112               ; UT2-ﾛｷﾞﾝｸﾞ要求
AND CR100                ; ﾛｷﾞﾝｸﾞ1実行許可
ANL
RES MR18112              ; UT2-ﾛｷﾞﾝｸﾞ要求
CON
TRGD #1
MPP
LDB MR18112              ; UT2-ﾛｷﾞﾝｸﾞ要求
AND MR18212              ; UT3-ﾛｷﾞﾝｸﾞ要求
AND CR200                ; ﾛｷﾞﾝｸﾞ2実行許可
ANL
RES MR18212              ; UT3-ﾛｷﾞﾝｸﾞ要求
CON
TRGD #2
;　　真空圧低下異常
LDB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB R46103               ; _停止中　ﾓｰﾄﾞﾌﾗｸﾞ
INV
MC
LDB R008                 ; 元真空検出1
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM59
CON
DW #230 @DM51
CON
DW #0 @DM52
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR500
LDB R010                 ; 元真空検出2
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM59
CON
DW #231 @DM51
CON
DW #0 @DM52
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR500
MCR
;　　照明エラー
LD R5215                 ; 画像検査_OC
ANB R39004               ; ｴﾗｰ中
ANB @MR500
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM59
CON
DW #232 @DM51
CON
DW #5215 @DM52
CON
SET @MR100               ; Task0 ERROR
CON
@SET @MR500
LD R4915                 ; ｶｼﾒ後検査OUT3(ERROR)
ANB R39004               ; ｴﾗｰ中
ANB @MR500
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM59
CON
DW #233 @DM51
CON
DW #4915 @DM52
CON
SET @MR100               ; Task0 ERROR
CON
@SET @MR500
;　　ｴﾗｰ終了処理
STG @MR500
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
ENDS
;<h1/>▽_異常処理
STG @MR100               ; Task0 ERROR
ANB R39002               ; ERROR_DISP Busy
MPS
ZRES @MR105 @MR108       ; SW1
CON
LDA @DM59
CON
TBCD
CON
STA @DM60
CON
DISN @DM60 @DM53 #4
MRD
DW #6 @DM50
CON
BMOV @DM50 DM60000 #7    ; TaskNo /ERROR_DISP
MPP
SET R39000               ; ERROR_DISP Start
CON
SET @MR102               ; Task6 ERROR Busy
CON
JMP @MR103
STG @MR103
AND R39002               ; ERROR_DISP Busy
AND= DM60001 DM60008     ; ErrorNo /ERROR_DISP  ReturnNo /ERROR_DISP
SET @MR105               ; SW1
CON
JMP @MR104
STG @MR104
ANB R39002               ; ERROR_DISP Busy
RES @MR102               ; Task6 ERROR Busy
CON
SET @MR101               ; Task0 ｴﾗｰ完了
CON
ENDS
;ﾃﾞﾊﾞｯｸﾌﾗｸﾞ
LD CR2002                ; 常時ON
OUT LR005                ; SEﾃﾞﾊﾞｯｸﾞ
;PLC立ち上げ時IW異常解除
LD CR2007                ; 運転開始時1ｽｷｬﾝOFF
AND R1508                ; U1_非常停止出力
AND R1509                ; U2_非常停止出力
AND R1510                ; U3_非常停止出力
TMR @3 #10
CON
AND @T3
MEP
SHOT #100 @MR800
LDP @MR800
SET MR1302               ;  ｶｼﾒ U1(I/W)_異常解除入力
CON
SET MR1310               ;  ｶｼﾒ U2(I/W)_異常解除入力
CON
SET MR1502               ;  ｶｼﾒ U3(I/W)_異常解除入力
LDF @MR800
RES MR1302               ;  ｶｼﾒ U1(I/W)_異常解除入力
CON
RES MR1310               ;  ｶｼﾒ U2(I/W)_異常解除入力
CON
RES MR1502               ;  ｶｼﾒ U3(I/W)_異常解除入力
;ｻｲｸﾙﾀｲﾑ
END
ENDH
