DEVICE:53
;MODULE:Index
;MODULE_TYPE:0
;***************************************
; 非常停止
; Emergency Stop 
;***************************************
LD R40013                ; 非常停止
OR @MR000                ; Emergency STOP
ZRES @MR100 @MR4915      ; Err42 INDEX
CON
OUT @MR000               ; Emergency STOP
TMR @39 #5               ; ｳｴｲﾄﾀｲﾏｰ39
LD @T39                  ; ｳｴｲﾄﾀｲﾏｰ39
MDSTOP Index
;動作ﾊﾟﾗﾒｰﾀ
;Operation Parameter
LD= DM1402 #1
OUT @MR013               ; INDEX AUTO Parameter OK
;***************************************
; ﾎﾟｰｽﾞ ･ ｴﾗｰ 監視
; Pause ･ Error Check 
;***************************************
LDB R40005               ; ﾎﾟｰｽﾞ中
ANB R41015               ; TASK16 ERROR中
OUT @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
;***************************************
; INDEXｼﾘﾝﾀﾞｲﾝﾀｰﾛｯｸﾁｪｯｸ
; INDEX Cylinder Interlock Check 
;***************************************
LD CR2002                ; 常時ON
OUT @MR001               ; ST1 干渉ｼﾘﾝﾀﾞ全て逃げ
LDB R4304                ; 溶着ﾍｯﾄﾞ 下降限
AND R4305                ; 溶着ﾍｯﾄﾞ 上昇限
ANB R6302                ; 溶着ﾍｯﾄﾞ 下降
ANB R4214                ; ﾌｨﾙﾑ吸着ﾍｯﾄﾞ上下 下降限
AND R4215                ; ﾌｨﾙﾑ吸着ﾍｯﾄﾞ上下 上昇限
ANB R6214                ; ﾌｨﾙﾑ吸着ﾍｯﾄﾞ上下 下降
LDB R6300                ; 吸着溶着ﾍｯﾄﾞ 溶着側行
AND R6301                ; 吸着溶着ﾍｯﾄﾞ 切出側行
AND R4303                ; 吸着溶着ﾍｯﾄﾞ (CL)切出側行限
ORL
LDB R6300                ; 吸着溶着ﾍｯﾄﾞ 溶着側行
AND R6301                ; 吸着溶着ﾍｯﾄﾞ 切出側行
AND R4306                ; 吸着溶着ﾍｯﾄﾞ (BK)切出側行限
ORL
OUT @MR002               ; ST2 干渉ｼﾘﾝﾀﾞ全て逃げ
LDB R6402                ; 剥離ﾌｨﾙﾑ折曲げ 下降
ANB R4502                ; 剥離ﾌｨﾙﾑ折曲げ 下降限
AND R4503                ; 剥離ﾌｨﾙﾑ折曲げ 上昇限
ANB R6400                ; 側面溶着ﾍｯﾄﾞ 前進
ANB R4500                ; 側面溶着ﾍｯﾄﾞ 出限
AND R4501                ; 側面溶着ﾍｯﾄﾞ 戻限
OUT @MR003               ; ST3 干渉ｼﾘﾝﾀﾞ全て逃げ
LDB R6410                ; 封止ﾍｯﾄﾞ 下降
ANB R4604                ; 減圧封止ﾍｯﾄﾞ上下 下降限
AND R4605                ; 減圧封止ﾍｯﾄﾞ上下 上昇限
ANB R6408                ; 封止ﾍｯﾄﾞ+ﾁｬﾝﾊﾞｰ上下 下降
AND R6409                ; 封止ﾍｯﾄﾞ+ﾁｬﾝﾊﾞｰ上下 上昇
ANB R4602                ; 減圧ﾁｬﾝﾊﾞ上下 下降限
AND R4603                ; 減圧ﾁｬﾝﾊﾞ上下 上昇限
LD R2014                 ; ﾒﾝﾃ ﾁｬﾝﾊﾞ上下 上昇
ANB R4601                ; 減圧封止ﾍｯﾄﾞﾒﾝﾃﾅﾝｽ上下 下降限
AND R4600                ; 減圧封止ﾍｯﾄﾞﾒﾝﾃﾅﾝｽ上下 上昇限
ORL
OUT @MR004               ; ST4 干渉ｼﾘﾝﾀﾞ全て逃げ
LD @MR001                ; ST1 干渉ｼﾘﾝﾀﾞ全て逃げ
AND @MR002               ; ST2 干渉ｼﾘﾝﾀﾞ全て逃げ
AND @MR003               ; ST3 干渉ｼﾘﾝﾀﾞ全て逃げ
AND @MR004               ; ST4 干渉ｼﾘﾝﾀﾞ全て逃げ
ANB R6012                ; INDEX位置決め上下 上昇
AND R6013                ; INDEX位置決め上下 下降
ANB R4100                ; INDEX 位置決め上下 上昇限
AND R4101                ; INDEX 位置決め上下 下降限
ANB R6010                ; 治具ｴｱｰ供給上下 上昇
ANB R4102                ; INDEX 1ST 治具ｴｱｰ上下 上昇限
AND R4103                ; INDEX 1ST 治具ｴｱｰ上下 下降限
ANB R4104                ; INDEX 2ST 治具ｴｱｰ上下 上昇限
AND R4105                ; INDEX 2ST 治具ｴｱｰ上下 下降限
ANB R4106                ; INDEX 3ST 治具ｴｱｰ上下 上昇限
AND R4107                ; INDEX 3ST 治具ｴｱｰ上下 下降限
ANB R4108                ; INDEX 4ST 治具ｴｱｰ上下 上昇限
AND R4109                ; INDEX 4ST 治具ｴｱｰ上下 下降限
OUT @MR005               ; INDEX干渉ｼﾘﾝﾀﾞ全て逃げ
;<h1/>原点復帰 / Homing
STG R41215               ; TASK16原点復帰起動
SET R40315               ; TASK16動作中
CON
AND R40400               ; 動作開始
JMP @MR1000              ; INDEX 原点復帰開始
STG @MR1000              ; INDEX 原点復帰開始
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
ZRES DM1350 DM1357       ; prohibit use of DM1350  prohibit use of DM1357
CON
MPS
AND= FM287 #1            ; ModelIdentficationNumber
DW #8 DM1358             ; 原点復帰時INDEX回転回数
CON
JMP @MR1001
MPP
AND= FM287 #2            ; ModelIdentficationNumber
DW #8 DM1358             ; 原点復帰時INDEX回転回数
CON
JMP @MR1001
STG @MR1001
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
AND R42300               ; ST1 1ｻｲｸﾙ終了
AND R42301               ; ST2 1ｻｲｸﾙ終了
AND R42302               ; ST3 1ｻｲｸﾙ終了
AND R42303               ; ST4 1ｻｲｸﾙ終了
ZRES R42300 R42303       ; ST1 1ｻｲｸﾙ終了  ST4 1ｻｲｸﾙ終了
CON
JMP @MR1002
STG @MR1002
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
MPS
AND CR2002               ; 常時ON
RES R42207               ; 両手ｽﾀｰﾄSWﾗﾝﾌﾟ点灯
CON
SET R42206               ; 両手ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
AND R42006               ; L_R_START SW ON
RES R42206               ; 両手ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
SET R42207               ; 両手ｽﾀｰﾄSWﾗﾝﾌﾟ点灯
CON
SET R42201               ; ｻｲｸﾙ動作中
CON
JMP @MR1003
MPP
ANB CR2002               ; 常時ON
RES R42206               ; 両手ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
SET R42201               ; ｻｲｸﾙ動作中
CON
JMP @MR1003
STG @MR1003
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
AND MR28001              ; INDEX 位置決め上下 下降ｲﾝﾀｰﾛｯｸ
RES MR6012               ; INDEX位置決め上下 上昇
CON
SET MR6013               ; INDEX位置決め上下 下降
CON
SET MR6006               ; ST1 治具ｸﾗﾝﾌﾟ開 ON
CON
JMP @MR1004
STG @MR1004
TMH @19 #10              ; ｳｴｲﾄﾀｲﾏｰ19
CON
AND @T19                 ; ｳｴｲﾄﾀｲﾏｰ19
RES MR6006               ; ST1 治具ｸﾗﾝﾌﾟ開 ON
CON
JMP @MR1005
STG @MR1005
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
AND MR28003              ; 治具ｴｱｰ供給上下-下降ｲﾝﾀｰﾛｯｸ
RES MR6010               ; 治具ｴｱｰ供給上下 上昇
CON
AND R4103                ; INDEX 1ST 治具ｴｱｰ上下 下降限
AND R4105                ; INDEX 2ST 治具ｴｱｰ上下 下降限
AND R4107                ; INDEX 3ST 治具ｴｱｰ上下 下降限
AND R4109                ; INDEX 4ST 治具ｴｱｰ上下 下降限
AND R4101                ; INDEX 位置決め上下 下降限
JMP @MR1006
STG @MR1006
MPS
AND @MR005               ; INDEX干渉ｼﾘﾝﾀﾞ全て逃げ
JMP @MR1009
MPP
ANB @MR005               ; INDEX干渉ｼﾘﾝﾀﾞ全て逃げ
TMR @6 #10               ; ｳｴｲﾄﾀｲﾏｰ06
CON
AND @T6                  ; ｳｴｲﾄﾀｲﾏｰ06
SET @MR412               ; Err43 INDEX
CON
JMP @MR1007
;Err43 ｲﾝﾃﾞｯｸｽ干渉ｱｸﾁｭｴｰﾀ有り / Index,Intarfare Actuater
STG @MR1007
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
AND @MR415               ; Err43 INDEX解除完了
JMP @MR1008
STG @MR1008
RES @MR415               ; Err43 INDEX解除完了
CON
JMP @MR1003
;
STG @MR1009
SET R42212               ; INDEX監視1
CON
SET R40215               ; ﾎﾟｰｽﾞ禁止16
CON
JMP @MR1010
STG @MR1010
MPS
AND R2103                ; ｲﾝﾃﾞｯｸｽ電源ON
SET @MR4000              ; INDEX原点復帰SUB
CON
JMP @MR1011
MPP
ANB R2103                ; ｲﾝﾃﾞｯｸｽ電源ON
TMR #700 #60             ; Index再投入ﾃﾞｨﾚｲ
CON
AND T700                 ; Index再投入ﾃﾞｨﾚｲ
SET @MR4000              ; INDEX原点復帰SUB
CON
JMP @MR1011
STG @MR1011
MPS
AND @MR4001              ; INDEX原点復帰完了
SET R42214               ; INDEX原点復帰完了
CON
RES R42212               ; INDEX監視1
CON
JMP @MR1012
MPP
LDB @MR4001              ; INDEX原点復帰完了
AND R42209               ; HOME完了前LC遮光
ANL
JMP @MR1013
STG @MR1013
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
@SET R40104              ; ﾐｭｰﾃｨﾝｸﾞﾘｾｯﾄ
CON
ZRES @MR4000 @MR4009     ; INDEX原点復帰SUB
CON
RES R42201               ; ｻｲｸﾙ動作中
CON
RES R42207               ; 両手ｽﾀｰﾄSWﾗﾝﾌﾟ点灯
CON
RES R40215               ; ﾎﾟｰｽﾞ禁止16
CON
ANB MR9914
RES R42209               ; HOME完了前LC遮光
CON
TMR @18 #2               ; ｳｴｲﾄﾀｲﾏｰ18
CON
AND @T18                 ; ｳｴｲﾄﾀｲﾏｰ18
ANB R40104               ; ﾐｭｰﾃｨﾝｸﾞﾘｾｯﾄ
JMP @MR1002
STG @MR1012
SET R40104               ; ﾐｭｰﾃｨﾝｸﾞﾘｾｯﾄ
CON
RES @MR4001              ; INDEX原点復帰完了
CON
RES R42201               ; ｻｲｸﾙ動作中
CON
RES R42207               ; 両手ｽﾀｰﾄSWﾗﾝﾌﾟ点灯
CON
RES R40215               ; ﾎﾟｰｽﾞ禁止16
CON
JMP @MR1102
;
STG @MR1100
RES R42201               ; ｻｲｸﾙ動作中
CON
TMR @1 #3                ; ｳｴｲﾄﾀｲﾏｰ01
CON
AND @T1                  ; ｳｴｲﾄﾀｲﾏｰ01
RES R40215               ; ﾎﾟｰｽﾞ禁止16
CON
JMP @MR1101
STG @MR1101
JMP @MR1102
;ケースチェック
;Check the Case
;UT1のﾜｰｸﾁｪｯｸﾌﾗｸﾞ
;UT1 Work Check Flag
LDB R4000                ; INDEX 1ST ｶｰﾄﾘｯｼﾞ有無確認
AND R4001                ; INDEX 1ST ｶｰﾄﾘｯｼﾞ浮き(内)
AND R4002                ; INDEX 1ST ｶｰﾄﾘｯｼﾞ浮き(外)
OUT @MR010               ; ST1にｹｰｽ無し
;
STG @MR1102
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
SET R42215               ; ｹｰｽ確認動作中
CON
MPS
LD @MR010                ; ST1にｹｰｽ無し
OR= DM1358 #8            ; 原点復帰時INDEX回転回数
ANL
MPS
AND= DM1358 #0           ; 原点復帰時INDEX回転回数
MPS
AND= FM287 #1            ; ModelIdentficationNumber
JMP @MR1300
MPP
AND= FM287 #2            ; ModelIdentficationNumber
JMP @MR1103
MPP
AND<> DM1358 #0          ; 原点復帰時INDEX回転回数
SET R40215               ; ﾎﾟｰｽﾞ禁止16
CON
JMP @MR1200
MPP
LDB @MR010               ; ST1にｹｰｽ無し
AND<> DM1358 #8          ; 原点復帰時INDEX回転回数
ANL
JMP @MR1106
STG @MR1103
RES @MR4101              ; INDEX CW回転Fin
CON
RES R42201               ; ｻｲｸﾙ動作中
CON
JMP @MR1104
STG @MR1104
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
SET MR6010               ; 治具ｴｱｰ供給上下 上昇
CON
AND R4102                ; INDEX 1ST 治具ｴｱｰ上下 上昇限
AND R4104                ; INDEX 2ST 治具ｴｱｰ上下 上昇限
AND R4106                ; INDEX 3ST 治具ｴｱｰ上下 上昇限
AND R4108                ; INDEX 4ST 治具ｴｱｰ上下 上昇限
JMP @MR1105
STG @MR1105
SET R42315               ; INDEX 1ｻｲｸﾙ完了
CON
JMP @MR1315
;INDEX ST1ワーク残り　エラー解除・除材
STG @MR1106
SET MR6010               ; 治具ｴｱｰ供給上下 上昇
CON
AND R4102                ; INDEX 1ST 治具ｴｱｰ上下 上昇限
AND R4104                ; INDEX 2ST 治具ｴｱｰ上下 上昇限
AND R4106                ; INDEX 3ST 治具ｴｱｰ上下 上昇限
AND R4108                ; INDEX 4ST 治具ｴｱｰ上下 上昇限
RES MR6008               ; ST1 治具ｸﾗﾝﾌﾟ閉 ON
CON
SET MR6006               ; ST1 治具ｸﾗﾝﾌﾟ開 ON
CON
SET @MR104               ; Err44 INDEX
CON
JMP @MR1107
STG @MR1107
TMH @25 #10              ; ｳｴｲﾄﾀｲﾏｰ25
CON
AND @T25                 ; ｳｴｲﾄﾀｲﾏｰ25
RES MR6006               ; ST1 治具ｸﾗﾝﾌﾟ開 ON
CON
JMP @MR1108
STG @MR1108
RES MR6008               ; ST1 治具ｸﾗﾝﾌﾟ閉 ON
CON
RES MR6006               ; ST1 治具ｸﾗﾝﾌﾟ開 ON
CON
RES MR6010               ; 治具ｴｱｰ供給上下 上昇
CON
AND R4103                ; INDEX 1ST 治具ｴｱｰ上下 下降限
AND R4105                ; INDEX 2ST 治具ｴｱｰ上下 下降限
AND R4107                ; INDEX 3ST 治具ｴｱｰ上下 下降限
AND R4109                ; INDEX 4ST 治具ｴｱｰ上下 下降限
RES @MR107               ; Err44 INDEX解除完了
CON
JMP @MR1100
;INDEX ワーク残りの為､INDEX回転
STG @MR1200
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
RES R42207               ; 両手ｽﾀｰﾄSWﾗﾝﾌﾟ点灯
CON
SET R42206               ; 両手ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
AND R42006               ; L_R_START SW ON
JMP @MR1201
STG @MR1201
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
RES R42206               ; 両手ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
SET @MR2200              ; ﾜｰｸ浮きﾁｪｯｸ開始
CON
RES MR6010               ; 治具ｴｱｰ供給上下 上昇
CON
RES MR6008               ; ST1 治具ｸﾗﾝﾌﾟ閉 ON
CON
RES MR6006               ; ST1 治具ｸﾗﾝﾌﾟ開 ON
CON
RES MR6004               ; ST2 治具ｸﾗﾝﾌﾟ閉 ON
CON
RES MR6002               ; ST3 治具ｸﾗﾝﾌﾟ閉 ON
CON
RES MR6000               ; ST4 治具ｸﾗﾝﾌﾟ閉 ON
CON
AND R4103                ; INDEX 1ST 治具ｴｱｰ上下 下降限
AND R4105                ; INDEX 2ST 治具ｴｱｰ上下 下降限
AND R4107                ; INDEX 3ST 治具ｴｱｰ上下 下降限
AND R4107                ; INDEX 3ST 治具ｴｱｰ上下 下降限
JMP @MR1203
STG @MR1203
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
AND @MR2201              ; ﾜｰｸ浮きﾁｪｯｸ完了
RES @MR2201              ; ﾜｰｸ浮きﾁｪｯｸ完了
CON
JMP @MR1204
STG @MR1204
MPS
AND @MR005               ; INDEX干渉ｼﾘﾝﾀﾞ全て逃げ
SET R42212               ; INDEX監視1
CON
SET @MR4100              ; INDEX CW回転SUB
CON
SET R40104               ; ﾐｭｰﾃｨﾝｸﾞﾘｾｯﾄ
CON
SET R42201               ; ｻｲｸﾙ動作中
CON
@DEC DM1358              ; 原点復帰時INDEX回転回数
CON
JMP @MR1208
MPP
ANB @MR005               ; INDEX干渉ｼﾘﾝﾀﾞ全て逃げ
TMR @9 #10               ; ｳｴｲﾄﾀｲﾏｰ09
CON
AND @T9                  ; ｳｴｲﾄﾀｲﾏｰ09
SET @MR412               ; Err43 INDEX
CON
JMP @MR1205
;Err43 ｲﾝﾃﾞｯｸｽ干渉ｱｸﾁｭｴｰﾀ有り / Index,Intarfare Actuater
STG @MR1205
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
AND @MR415               ; Err43 INDEX解除完了
JMP @MR1206
STG @MR1206
RES @MR415               ; Err43 INDEX解除完了
CON
JMP @MR1204
;
STG @MR1208
MPS
AND @MR4101              ; INDEX CW回転Fin
RES @MR4101              ; INDEX CW回転Fin
CON
RES R42212               ; INDEX監視1
CON
JMP @MR1100
MPP
LDB @MR4101              ; INDEX CW回転Fin
AND R42209               ; HOME完了前LC遮光
ANL
JMP @MR1112
STG @MR1112
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
@SET R40104              ; ﾐｭｰﾃｨﾝｸﾞﾘｾｯﾄ
CON
ZRES @MR4100 @MR4415     ; INDEX CW回転SUB
CON
RES R42201               ; ｻｲｸﾙ動作中
CON
RES R42207               ; 両手ｽﾀｰﾄSWﾗﾝﾌﾟ点灯
CON
RES R40215               ; ﾎﾟｰｽﾞ禁止16
CON
ANB MR9914
RES R42209               ; HOME完了前LC遮光
CON
TMR @24 #2               ; ｳｴｲﾄﾀｲﾏｰ24
CON
AND @T24                 ; ｳｴｲﾄﾀｲﾏｰ24
ANB R40104               ; ﾐｭｰﾃｨﾝｸﾞﾘｾｯﾄ
JMP @MR1113
STG @MR1113
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
ZRES DM1350 DM1357       ; prohibit use of DM1350  prohibit use of DM1357
CON
MPS
AND= FM287 #1            ; ModelIdentficationNumber
DW #8 DM1358             ; 原点復帰時INDEX回転回数
CON
JMP @MR1002
MPP
AND= FM287 #2            ; ModelIdentficationNumber
DW #8 DM1358             ; 原点復帰時INDEX回転回数
CON
JMP @MR1002
STG @MR1111
ANB R42202               ; ﾗｲﾄｶｰﾃﾝ遮光記憶
SET MR2110               ; INDEX EMERGENCY STOP
CON
SET MR2103               ; ｲﾝﾃﾞｯｸｽ電源ON
CON
TMR @4 #30               ; ｳｴｲﾄﾀｲﾏｰ04
CON
AND @T4                  ; ｳｴｲﾄﾀｲﾏｰ04
SET MR2107               ; INDEX RESET
CON
AND R1105                ; INDEX起動待ち
RES MR2107               ; INDEX RESET
CON
JMP @MR1201
STG @MR1300
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
RES R42207               ; 両手ｽﾀｰﾄSWﾗﾝﾌﾟ点灯
CON
SET R42206               ; 両手ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
AND R42006               ; L_R_START SW ON
JMP @MR1301
STG @MR1301
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
RES R42206               ; 両手ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
SET @MR2200              ; ﾜｰｸ浮きﾁｪｯｸ開始
CON
JMP @MR1302
STG @MR1302
AND @MR2201              ; ﾜｰｸ浮きﾁｪｯｸ完了
RES @MR2201              ; ﾜｰｸ浮きﾁｪｯｸ完了
CON
JMP @MR1303
STG @MR1303
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
MPS
AND @MR005               ; INDEX干渉ｼﾘﾝﾀﾞ全て逃げ
SET @MR4300              ; INDEX CW回転SUB
CON
SET R40104               ; ﾐｭｰﾃｨﾝｸﾞﾘｾｯﾄ
CON
SET R42201               ; ｻｲｸﾙ動作中
CON
JMP @MR1308
MPP
ANB @MR005               ; INDEX干渉ｼﾘﾝﾀﾞ全て逃げ
TMR @21 #10              ; ｳｴｲﾄﾀｲﾏｰ21
CON
AND @T21                 ; ｳｴｲﾄﾀｲﾏｰ21
SET @MR412               ; Err43 INDEX
CON
JMP @MR1304
;Err43 ｲﾝﾃﾞｯｸｽ干渉ｱｸﾁｭｴｰﾀ有り / Index,Intarfare Actuater
STG @MR1304
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
AND @MR415               ; Err43 INDEX解除完了
JMP @MR1305
STG @MR1305
RES @MR415               ; Err43 INDEX解除完了
CON
JMP @MR1303
STG @MR1308
AND @MR4301              ; INDEX CW回転Fin
RES @MR4301              ; INDEX CW回転Fin
CON
JMP @MR1103
;
STG @MR1315
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
RES R42215               ; ｹｰｽ確認動作中
CON
RES R40315               ; TASK16動作中
CON
ENDS
;<h1/>自動運転 / AUTO OERATION
STG R41315               ; TASK16 AUTO起動
SET R40315               ; TASK16動作中
CON
AND R40400               ; 動作開始
JMP @MR1500              ; INDEX AUTO開始
; 動作パラメーター確認
; Operating Parameter Check
STG @MR1500              ; INDEX AUTO開始
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
MPS
AND @MR013               ; INDEX AUTO Parameter OK
SET R40403               ; サイクルタイム計測
CON
SET R42205               ; Indexより動作開始指示
CON
JMP @MR1502
MPP
ANB @MR013               ; INDEX AUTO Parameter OK
JMP @MR1501
;動作パラメーター設定不良
;Parameter Set NG
STG @MR1501
SET R40012               ; HOLD要求
CON
SET R42315               ; INDEX 1ｻｲｸﾙ完了
CON
ENDS
;STｻｲｸﾙ完了待ち / Waiting Cycle Finish
STG @MR1502
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
AND R42300               ; ST1 1ｻｲｸﾙ終了
AND R42301               ; ST2 1ｻｲｸﾙ終了
AND R42302               ; ST3 1ｻｲｸﾙ終了
AND R42303               ; ST4 1ｻｲｸﾙ終了
SET R40507               ; 処理時間8計測開始
CON
RES R42205               ; Indexより動作開始指示
CON
JMP @MR1503
STG @MR1503
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
ZRES R42300 R42303       ; ST1 1ｻｲｸﾙ終了  ST4 1ｻｲｸﾙ終了
CON
JMP @MR1504
;位置決め下降 / Positioning Down
STG @MR1504
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
SET @MR2200              ; ﾜｰｸ浮きﾁｪｯｸ開始
CON
RES MR6010               ; 治具ｴｱｰ供給上下 上昇
CON
RES MR6012               ; INDEX位置決め上下 上昇
CON
SET MR6013               ; INDEX位置決め上下 下降
CON
RES MR6008               ; ST1 治具ｸﾗﾝﾌﾟ閉 ON
CON
RES MR6006               ; ST1 治具ｸﾗﾝﾌﾟ開 ON
CON
RES MR6004               ; ST2 治具ｸﾗﾝﾌﾟ閉 ON
CON
RES MR6002               ; ST3 治具ｸﾗﾝﾌﾟ閉 ON
CON
RES MR6000               ; ST4 治具ｸﾗﾝﾌﾟ閉 ON
CON
JMP @MR1505
STG @MR1505
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
AND @MR2201              ; ﾜｰｸ浮きﾁｪｯｸ完了
AND R4103                ; INDEX 1ST 治具ｴｱｰ上下 下降限
AND R4105                ; INDEX 2ST 治具ｴｱｰ上下 下降限
AND R4107                ; INDEX 3ST 治具ｴｱｰ上下 下降限
AND R4107                ; INDEX 3ST 治具ｴｱｰ上下 下降限
AND R4101                ; INDEX 位置決め上下 下降限
RES @MR2201              ; ﾜｰｸ浮きﾁｪｯｸ完了
CON
JMP @MR1506
STG @MR1506
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
MPS
AND @MR005               ; INDEX干渉ｼﾘﾝﾀﾞ全て逃げ
JMP @MR1600
MPP
ANB @MR005               ; INDEX干渉ｼﾘﾝﾀﾞ全て逃げ
TMR @5 #10               ; ｳｴｲﾄﾀｲﾏｰ05
CON
AND @T5                  ; ｳｴｲﾄﾀｲﾏｰ05
SET @MR412               ; Err43 INDEX
CON
JMP @MR1514
;Err43 ｲﾝﾃﾞｯｸｽ干渉ｱｸﾁｭｴｰﾀ有り / Index,Intarfare Actuater
STG @MR1514
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
AND @MR415               ; Err43 INDEX解除完了
JMP @MR1515
STG @MR1515
RES @MR415               ; Err43 INDEX解除完了
CON
JMP @MR1504
;Index回転前ﾜｰｸﾁｪｯｸ / Case Check before index
STG @MR1600
SET R40515               ; 処理時間16計測開始
CON
SET R40215               ; ﾎﾟｰｽﾞ禁止16
CON
SET R40104               ; ﾐｭｰﾃｨﾝｸﾞﾘｾｯﾄ
CON
SET @MR4400              ; ｹｰｽ記憶開始
CON
JMP @MR1601
STG @MR1601
AND @MR4401              ; ｹｰｽ記憶完了
JMP @MR1602
STG @MR1602
RES @MR4401              ; ｹｰｽ記憶完了
CON
SET @MR4100              ; INDEX CW回転SUB
CON
JMP @MR1603
STG @MR1603
MPS
AND @MR4101              ; INDEX CW回転Fin
JMP @MR1700
MPP
AND R42211               ; ﾗｲﾄｶｰﾃﾝ遮光
SET R40006               ; PAUSE要求
CON
JMP @MR1604
;ﾗｲﾄｶｰﾃﾝ遮光時 / When Light Curtaion Blinking
STG @MR1604
AND R40005               ; ﾎﾟｰｽﾞ中
ANB R1003                ; ｽﾀｰﾄSW L
ANB R1004                ; ｽﾀｰﾄSW R
ANB R42006               ; L_R_START SW ON
RES R42201               ; ｻｲｸﾙ動作中
CON
RES R40215               ; ﾎﾟｰｽﾞ禁止16
CON
JMP @MR1605
STG @MR1605
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
JMP @MR1606
STG @MR1606
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
RES R42207               ; 両手ｽﾀｰﾄSWﾗﾝﾌﾟ点灯
CON
SET R42206               ; 両手ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
AND R42006               ; L_R_START SW ON
JMP @MR1607
STG @MR1607
SET R40215               ; ﾎﾟｰｽﾞ禁止16
CON
RES R42206               ; 両手ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
SET R40104               ; ﾐｭｰﾃｨﾝｸﾞﾘｾｯﾄ
CON
SET R42201               ; ｻｲｸﾙ動作中
CON
JMP @MR1602
;
STG @MR1700
RES @MR4101              ; INDEX CW回転Fin
CON
RES R42201               ; ｻｲｸﾙ動作中
CON
JMP @MR1701
STG @MR1701
TMR @7 #1                ; ｳｴｲﾄﾀｲﾏｰ07
CON
AND @T7                  ; ｳｴｲﾄﾀｲﾏｰ07
RES R40215               ; ﾎﾟｰｽﾞ禁止16
CON
AND R1106                ; INDEX Alarm1 正常=ON
AND R1107                ; INDEX Alarm2 正常=ON
JMP @MR1702
STG @MR1702
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
SET MR6010               ; 治具ｴｱｰ供給上下 上昇
CON
AND R4102                ; INDEX 1ST 治具ｴｱｰ上下 上昇限
AND R4104                ; INDEX 2ST 治具ｴｱｰ上下 上昇限
AND R4106                ; INDEX 3ST 治具ｴｱｰ上下 上昇限
AND R4108                ; INDEX 4ST 治具ｴｱｰ上下 上昇限
JMP @MR1703
STG @MR1703
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
RES MR6008               ; ST1 治具ｸﾗﾝﾌﾟ閉 ON
CON
SET MR6006               ; ST1 治具ｸﾗﾝﾌﾟ開 ON
CON
JMP @MR1704
STG @MR1704
TMH @26 #10              ; ｳｴｲﾄﾀｲﾏｰ26
CON
AND @T26                 ; ｳｴｲﾄﾀｲﾏｰ26
RES MR6006               ; ST1 治具ｸﾗﾝﾌﾟ開 ON
CON
JMP @MR1705
STG @MR1705
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
MPS
AND @MR010               ; ST1にｹｰｽ無し
DW #0 DM1355             ; INDEX-NGﾜｰｸﾁｪｯｸ
CON
JMP @MR1800
MPP
ANB @MR010               ; ST1にｹｰｽ無し
MPS
AND= DM1355 #2           ; INDEX-NGﾜｰｸﾁｪｯｸ
@INC.D DM1604            ; 生産カウンタ3
CON
SET @MR108               ; Err45 INDEX
CON
JMP @MR1706
MRD
AND= DM1355 #3           ; INDEX-NGﾜｰｸﾁｪｯｸ
@INC.D DM1606            ; 生産カウンタ4
CON
SET @MR112               ; Err46 INDEX
CON
JMP @MR1706
MRD
AND= DM1355 #4           ; INDEX-NGﾜｰｸﾁｪｯｸ
@INC.D DM1608            ; 生産カウンタ5
CON
SET @MR200               ; Err47 INDEX
CON
JMP @MR1706
MPP
AND= DM1355 #0           ; INDEX-NGﾜｰｸﾁｪｯｸ
@INC.D DM1602            ; 生産カウンタ2
CON
DW #0 DM1355             ; INDEX-NGﾜｰｸﾁｪｯｸ
CON
JMP @MR1800
STG @MR1706
TMR @8 #2                ; ｳｴｲﾄﾀｲﾏｰ08
CON
AND @T8                  ; ｳｴｲﾄﾀｲﾏｰ08
MPS
LD= DM1355 #2            ; INDEX-NGﾜｰｸﾁｪｯｸ
AND @MR111               ; Err45 INDEX解除完了
ANL
RES @MR111               ; Err45 INDEX解除完了
CON
JMP @MR1704
MRD
LD= DM1355 #3            ; INDEX-NGﾜｰｸﾁｪｯｸ
AND @MR115               ; Err46 INDEX解除完了
ANL
RES @MR115               ; Err46 INDEX解除完了
CON
JMP @MR1704
MPP
LD= DM1355 #4            ; INDEX-NGﾜｰｸﾁｪｯｸ
AND @MR203               ; Err47 INDEX解除完了
ANL
RES @MR203               ; Err47 INDEX解除完了
CON
JMP @MR1704
;動作終了
STG @MR1800
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
SET @MR4408              ; 到着ｹｰｽﾁｪｯｸ
CON
JMP @MR1801
STG @MR1801
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
AND @MR4409              ; 到着ｹｰｽﾁｪｯｸ完了
JMP @MR1802
STG @MR1802
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
SET R40404               ; ｻｲｸﾙﾀｲﾑ取得
CON
SET R40607               ; 処理時間8取得
CON
RES R42201               ; ｻｲｸﾙ動作中
CON
SET R42315               ; INDEX 1ｻｲｸﾙ完了
CON
RES @MR4409              ; 到着ｹｰｽﾁｪｯｸ完了
CON
JMP @MR1803
STG @MR1803
MPS
AND R40011               ; HOLD
JMP @MR2900              ; AUTO終了処理
MPP
ANB R40011               ; HOLD
RES R42206               ; 両手ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
RES R42207               ; 両手ｽﾀｰﾄSWﾗﾝﾌﾟ点灯
CON
SET R42205               ; Indexより動作開始指示
CON
JMP @MR1502
;AUTO 終了処理
;AUTO Finish Operation
STG @MR2900              ; AUTO終了処理
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
RES R40315               ; TASK16動作中
CON
ENDS
;<h1/>ｽﾃｯﾌﾟ運転 / STEP OERATION
STG R41415               ; TASK16 STEP起動
SET R40315               ; TASK16動作中
CON
AND R40400               ; 動作開始
JMP @MR3000              ; INDEX STEP開始
;TASK1 STEP CONDITION CHECK
STG @MR3000              ; INDEX STEP開始
MPS
AND= DM1404 #16
MPS
AND= DM1405 #1
JMP @MR3001
MPP
AND<> DM1405 #1
JMP @MR3200
MPP
AND<> DM1404 #16
JMP @MR3200
;Index 1区画回転 / Turn Index
STG @MR3001
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
RES R42207               ; 両手ｽﾀｰﾄSWﾗﾝﾌﾟ点灯
CON
SET R42206               ; 両手ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
AND R42206               ; 両手ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
JMP @MR3002
STG @MR3002
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
RES R42206               ; 両手ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
SET MR6010               ; 治具ｴｱｰ供給上下 上昇
CON
RES MR6012               ; INDEX位置決め上下 上昇
CON
SET MR6013               ; INDEX位置決め上下 下降
CON
AND R4102                ; INDEX 1ST 治具ｴｱｰ上下 上昇限
AND R4104                ; INDEX 2ST 治具ｴｱｰ上下 上昇限
AND R4106                ; INDEX 3ST 治具ｴｱｰ上下 上昇限
AND R4108                ; INDEX 4ST 治具ｴｱｰ上下 上昇限
JMP @MR3003
STG @MR3003
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
SET MR6008               ; ST1 治具ｸﾗﾝﾌﾟ閉 ON
CON
RES MR6006               ; ST1 治具ｸﾗﾝﾌﾟ開 ON
CON
SET MR6004               ; ST2 治具ｸﾗﾝﾌﾟ閉 ON
CON
SET MR6002               ; ST3 治具ｸﾗﾝﾌﾟ閉 ON
CON
SET MR6000               ; ST4 治具ｸﾗﾝﾌﾟ閉 ON
CON
JMP @MR3004
STG @MR3004
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
TMH @20 #30              ; ｳｴｲﾄﾀｲﾏｰ20
CON
AND @T20                 ; ｳｴｲﾄﾀｲﾏｰ20
RES MR6008               ; ST1 治具ｸﾗﾝﾌﾟ閉 ON
CON
RES MR6006               ; ST1 治具ｸﾗﾝﾌﾟ開 ON
CON
RES MR6004               ; ST2 治具ｸﾗﾝﾌﾟ閉 ON
CON
RES MR6002               ; ST3 治具ｸﾗﾝﾌﾟ閉 ON
CON
RES MR6000               ; ST4 治具ｸﾗﾝﾌﾟ閉 ON
CON
SET @MR2200              ; ﾜｰｸ浮きﾁｪｯｸ開始
CON
JMP @MR3005
STG @MR3005
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
AND @MR2201              ; ﾜｰｸ浮きﾁｪｯｸ完了
RES @MR2201              ; ﾜｰｸ浮きﾁｪｯｸ完了
CON
JMP @MR3006
STG @MR3006
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
RES MR6010               ; 治具ｴｱｰ供給上下 上昇
CON
RES MR6012               ; INDEX位置決め上下 上昇
CON
SET MR6013               ; INDEX位置決め上下 下降
CON
AND R4103                ; INDEX 1ST 治具ｴｱｰ上下 下降限
AND R4105                ; INDEX 2ST 治具ｴｱｰ上下 下降限
AND R4107                ; INDEX 3ST 治具ｴｱｰ上下 下降限
AND R4109                ; INDEX 4ST 治具ｴｱｰ上下 下降限
AND R4101                ; INDEX 位置決め上下 下降限
JMP @MR3007
STG @MR3007
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
MPS
AND @MR005               ; INDEX干渉ｼﾘﾝﾀﾞ全て逃げ
JMP @MR3100
MPP
ANB @MR005               ; INDEX干渉ｼﾘﾝﾀﾞ全て逃げ
SET @MR412               ; Err43 INDEX
CON
JMP @MR3008
;Err43 ｲﾝﾃﾞｯｸｽ干渉ｱｸﾁｭｴｰﾀ有り / Index,Intarfare Actuater
STG @MR3008
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
AND @MR415               ; Err43 INDEX解除完了
JMP @MR3009
STG @MR3009
RES @MR415               ; Err43 INDEX解除完了
CON
JMP @MR3004
;
STG @MR3100
SET R40215               ; ﾎﾟｰｽﾞ禁止16
CON
SET R40104               ; ﾐｭｰﾃｨﾝｸﾞﾘｾｯﾄ
CON
SET R42201               ; ｻｲｸﾙ動作中
CON
JMP @MR3101
STG @MR3101
SET @MR4100              ; INDEX CW回転SUB
CON
JMP @MR3102
STG @MR3102
MPS
AND @MR4101              ; INDEX CW回転Fin
JMP @MR3104
MPP
AND R42211               ; ﾗｲﾄｶｰﾃﾝ遮光
SET R40006               ; PAUSE要求
CON
JMP @MR3103
STG @MR3103
AND R40005               ; ﾎﾟｰｽﾞ中
ANB R42206               ; 両手ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
RES R42206               ; 両手ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
RES R40215               ; ﾎﾟｰｽﾞ禁止16
CON
JMP @MR3001
;
STG @MR3104
RES @MR4101              ; INDEX CW回転Fin
CON
RES R42201               ; ｻｲｸﾙ動作中
CON
JMP @MR3105
STG @MR3105
TMR @10 #5               ; ｳｴｲﾄﾀｲﾏｰ10
CON
AND @T10                 ; ｳｴｲﾄﾀｲﾏｰ10
RES R40215               ; ﾎﾟｰｽﾞ禁止16
CON
AND R1106                ; INDEX Alarm1 正常=ON
AND R1107                ; INDEX Alarm2 正常=ON
JMP @MR3106
STG @MR3106
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
SET MR6010               ; 治具ｴｱｰ供給上下 上昇
CON
AND R4102                ; INDEX 1ST 治具ｴｱｰ上下 上昇限
AND R4104                ; INDEX 2ST 治具ｴｱｰ上下 上昇限
AND R4106                ; INDEX 3ST 治具ｴｱｰ上下 上昇限
AND R4108                ; INDEX 4ST 治具ｴｱｰ上下 上昇限
JMP @MR3107
STG @MR3107
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
RES MR6008               ; ST1 治具ｸﾗﾝﾌﾟ閉 ON
CON
SET MR6006               ; ST1 治具ｸﾗﾝﾌﾟ開 ON
CON
JMP @MR3112
STG @MR3112
TMH @16 #10              ; ｳｴｲﾄﾀｲﾏｰ16
CON
AND @T16                 ; ｳｴｲﾄﾀｲﾏｰ16
RES MR6008               ; ST1 治具ｸﾗﾝﾌﾟ閉 ON
CON
RES MR6006               ; ST1 治具ｸﾗﾝﾌﾟ開 ON
CON
JMP @MR3108
STG @MR3108
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
MPS
LD @MR010                ; ST1にｹｰｽ無し
OR CR2002                ; 常時ON
ANL
JMP @MR3200
MPP
LDB @MR010               ; ST1にｹｰｽ無し
ANB CR2002               ; 常時ON
ANL
SET @MR104               ; Err44 INDEX
CON
JMP @MR3109
;INDEX UT1到着ワーク不良品 エラー・除材
STG @MR3109
TMR @11 #2               ; ｳｴｲﾄﾀｲﾏｰ11
CON
AND @T11                 ; ｳｴｲﾄﾀｲﾏｰ11
AND @MR107               ; Err44 INDEX解除完了
JMP @MR3110
STG @MR3110
RES @MR107               ; Err44 INDEX解除完了
CON
JMP @MR3108
;
;STEP終了処理
STG @MR3200
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
JMP @MR3201
STG @MR3201
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
SET R40012               ; HOLD要求
CON
JMP @MR3202
STG @MR3202
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
RES R40315               ; TASK16動作中
CON
ENDS
;<h1/>ｻﾌﾞﾙｰﾁﾝ / Sub Routing
;<h1/>INDEX 原点復帰動作
;INDEX HOME
;The starting point return of an index is program No.5.  
;By 4 division specification, it moves to a starting point position by the shortest. 
;/ ｲﾝﾃﾞｯｸｽの原点復帰は、ﾌﾟﾛｸﾞﾗﾑNo.6　4分割指定で、近周りで原点位置へ移動する
STG @MR4000              ; INDEX原点復帰SUB
SET MR2110               ; INDEX EMERGENCY STOP
CON
SET MR2107               ; INDEX RESET
CON
TMH @3 #30               ; ｳｴｲﾄﾀｲﾏｰ03
CON
AND @T3                  ; ｳｴｲﾄﾀｲﾏｰ03
SET MR2103               ; ｲﾝﾃﾞｯｸｽ電源ON
CON
JMP @MR4003
STG @MR4003
MPS
LD R1105                 ; INDEX起動待ち
AND R1106                ; INDEX Alarm1 正常=ON
AND R1107                ; INDEX Alarm2 正常=ON
ANL
RES MR2107               ; INDEX RESET
CON
ZRES MR2111 MR2115       ; INDEX 0bit  INDEX 4bit
CON
SET MR2115               ; INDEX 4bit
CON
TMH @12 #20              ; ｳｴｲﾄﾀｲﾏｰ12
CON
AND @T12                 ; ｳｴｲﾄﾀｲﾏｰ12
JMP @MR4004
MPP
ANB R1105                ; INDEX起動待ち
TMR @27 #30              ; ｳｴｲﾄﾀｲﾏｰ27
CON
AND @T27                 ; ｳｴｲﾄﾀｲﾏｰ27
RES MR2110               ; INDEX EMERGENCY STOP
CON
RES MR2107               ; INDEX RESET
CON
TMR @28 #5               ; ｳｴｲﾄﾀｲﾏｰ28
CON
AND @T28                 ; ｳｴｲﾄﾀｲﾏｰ28
JMP @MR4000              ; INDEX原点復帰SUB
STG @MR4004
SET MR2106               ; ｲﾝﾃﾞｯｸｽ 1桁目
CON
TMH @13 #20              ; ｳｴｲﾄﾀｲﾏｰ13
CON
AND @T13                 ; ｳｴｲﾄﾀｲﾏｰ13
SET R42203               ; INDEX回転中（SET/RST）
CON
SET MR2108               ; INDEX STARTING
CON
JMP @MR4005
STG @MR4005
ANB R1105                ; INDEX起動待ち
JMP @MR4006
STG @MR4006
RES MR2108               ; INDEX STARTING
CON
RES MR2106               ; ｲﾝﾃﾞｯｸｽ 1桁目
CON
ZRES MR2111 MR2115       ; INDEX 0bit  INDEX 4bit
CON
JMP @MR4007
STG @MR4007
AND R1104                ; INDEX位置決め完了
SET MR2109               ; INDEX ANSER
CON
JMP @MR4008
STG @MR4008
ANB R1104                ; INDEX位置決め完了
RES MR2109               ; INDEX ANSER
CON
RES R42203               ; INDEX回転中（SET/RST）
CON
DW #0 DM1359             ; INDEX位置記憶
CON
JMP @MR4009
STG @MR4009
SET @MR4001              ; INDEX原点復帰完了
CON
ENDS
;<h1/>Index Turn / Index正転
;90 degrees positive rotation of an index chooses program No.0 to 3 in order, and starts it. 
;By 4 division specification, it moves to the following position of four positions. 
;If movement is completed, the following specification will be written in DM. 
; / ｲﾝﾃﾞｯｸｽの90度正回転は、ﾌﾟﾛｸﾞﾗﾑNo．０から３を順に選択し起動する
;4分割指定で、4位置の次位置へ移動する、移動が完了したらDMに次の指定を書込む
LD R42212                ; INDEX監視1
AND R42211               ; ﾗｲﾄｶｰﾃﾝ遮光
RES R42212               ; INDEX監視1
CON
RES MR2108               ; INDEX STARTING
CON
RES MR2109               ; INDEX ANSER
CON
RES MR2106               ; ｲﾝﾃﾞｯｸｽ 1桁目
CON
ZRES MR2111 MR2115       ; INDEX 0bit  INDEX 4bit
CON
RES @MR4100              ; INDEX CW回転SUB
CON
ZRES @MR4100 @MR4203     ; INDEX CW回転SUB
STG @MR4100              ; INDEX CW回転SUB
ANB R42211               ; ﾗｲﾄｶｰﾃﾝ遮光
SET R42212               ; INDEX監視1
CON
SET MR2110               ; INDEX EMERGENCY STOP
CON
SET MR2107               ; INDEX RESET
CON
TMH @17 #30              ; ｳｴｲﾄﾀｲﾏｰ17
CON
AND @T17                 ; ｳｴｲﾄﾀｲﾏｰ17
JMP @MR4103
STG @MR4103
AND R1105                ; INDEX起動待ち
RES MR2107               ; INDEX RESET
CON
MPS
LD R40001                ; 自動動作中
OR R40002                ; ﾒﾝﾃﾅﾝｽ動作中
ANL
MPS
AND R42400               ; INDEX BK選択中
JMP @MR4104
MPP
ANB R42400               ; INDEX BK選択中
JMP @MR4105
MPP
AND R40003               ; 原点復帰中
JMP @MR4106
;AUTO/MAINTE BK選択の場合
;回転プログラム番号は3,7,11,15
STG @MR4104
MPS
AND= DM1359 #3           ; INDEX位置記憶
SET MR2111               ; INDEX 0bit
CON
SET MR2112               ; INDEX 1bit
CON
SET MR2113               ; INDEX 2bit
CON
RES MR2114               ; INDEX 3bit
CON
RES MR2115               ; INDEX 4bit
CON
JMP @MR4108
MRD
AND= DM1359 #7           ; INDEX位置記憶
SET MR2111               ; INDEX 0bit
CON
SET MR2112               ; INDEX 1bit
CON
RES MR2113               ; INDEX 2bit
CON
SET MR2114               ; INDEX 3bit
CON
RES MR2115               ; INDEX 4bit
CON
JMP @MR4108
MRD
AND= DM1359 #11          ; INDEX位置記憶
SET MR2111               ; INDEX 0bit
CON
SET MR2112               ; INDEX 1bit
CON
SET MR2113               ; INDEX 2bit
CON
SET MR2114               ; INDEX 3bit
CON
RES MR2115               ; INDEX 4bit
CON
JMP @MR4108
MPP
AND= DM1359 #15          ; INDEX位置記憶
SET MR2111               ; INDEX 0bit
CON
SET MR2112               ; INDEX 1bit
CON
RES MR2113               ; INDEX 2bit
CON
RES MR2114               ; INDEX 3bit
CON
RES MR2115               ; INDEX 4bit
CON
JMP @MR4108
;AUTO/MAINTE COL選択の場合
;回転プログラム番号は0,4,8,12
STG @MR4105
MPS
AND= DM1359 #0           ; INDEX位置記憶
RES MR2111               ; INDEX 0bit
CON
RES MR2112               ; INDEX 1bit
CON
SET MR2113               ; INDEX 2bit
CON
RES MR2114               ; INDEX 3bit
CON
RES MR2115               ; INDEX 4bit
CON
JMP @MR4108
MRD
AND= DM1359 #4           ; INDEX位置記憶
RES MR2111               ; INDEX 0bit
CON
RES MR2112               ; INDEX 1bit
CON
RES MR2113               ; INDEX 2bit
CON
SET MR2114               ; INDEX 3bit
CON
RES MR2115               ; INDEX 4bit
CON
JMP @MR4108
MRD
AND= DM1359 #8           ; INDEX位置記憶
RES MR2111               ; INDEX 0bit
CON
RES MR2112               ; INDEX 1bit
CON
SET MR2113               ; INDEX 2bit
CON
SET MR2114               ; INDEX 3bit
CON
RES MR2115               ; INDEX 4bit
CON
JMP @MR4108
MPP
AND= DM1359 #12          ; INDEX位置記憶
RES MR2111               ; INDEX 0bit
CON
RES MR2112               ; INDEX 1bit
CON
RES MR2113               ; INDEX 2bit
CON
RES MR2114               ; INDEX 3bit
CON
RES MR2115               ; INDEX 4bit
CON
JMP @MR4108
;HOMEDOの場合
;0,3,4,7,8,11,12,15まで実行
STG @MR4106
MPS
AND= DM1359 #0           ; INDEX位置記憶
SET MR2111               ; INDEX 0bit
CON
SET MR2112               ; INDEX 1bit
CON
RES MR2113               ; INDEX 2bit
CON
RES MR2114               ; INDEX 3bit
CON
RES MR2115               ; INDEX 4bit
CON
JMP @MR4108
MRD
AND= DM1359 #3           ; INDEX位置記憶
RES MR2111               ; INDEX 0bit
CON
RES MR2112               ; INDEX 1bit
CON
SET MR2113               ; INDEX 2bit
CON
RES MR2114               ; INDEX 3bit
CON
RES MR2115               ; INDEX 4bit
CON
JMP @MR4108
MRD
AND= DM1359 #4           ; INDEX位置記憶
SET MR2111               ; INDEX 0bit
CON
SET MR2112               ; INDEX 1bit
CON
SET MR2113               ; INDEX 2bit
CON
RES MR2114               ; INDEX 3bit
CON
RES MR2115               ; INDEX 4bit
CON
JMP @MR4108
MRD
AND= DM1359 #7           ; INDEX位置記憶
RES MR2111               ; INDEX 0bit
CON
RES MR2112               ; INDEX 1bit
CON
RES MR2113               ; INDEX 2bit
CON
SET MR2114               ; INDEX 3bit
CON
RES MR2115               ; INDEX 4bit
CON
JMP @MR4108
MRD
AND= DM1359 #8           ; INDEX位置記憶
SET MR2111               ; INDEX 0bit
CON
SET MR2112               ; INDEX 1bit
CON
RES MR2113               ; INDEX 2bit
CON
SET MR2114               ; INDEX 3bit
CON
RES MR2115               ; INDEX 4bit
CON
JMP @MR4108
MRD
AND= DM1359 #11          ; INDEX位置記憶
RES MR2111               ; INDEX 0bit
CON
RES MR2112               ; INDEX 1bit
CON
SET MR2113               ; INDEX 2bit
CON
SET MR2114               ; INDEX 3bit
CON
RES MR2115               ; INDEX 4bit
CON
JMP @MR4108
MRD
AND= DM1359 #12          ; INDEX位置記憶
SET MR2111               ; INDEX 0bit
CON
SET MR2112               ; INDEX 1bit
CON
SET MR2113               ; INDEX 2bit
CON
SET MR2114               ; INDEX 3bit
CON
RES MR2115               ; INDEX 4bit
CON
JMP @MR4108
MPP
AND= DM1359 #15          ; INDEX位置記憶
RES MR2111               ; INDEX 0bit
CON
RES MR2112               ; INDEX 1bit
CON
RES MR2113               ; INDEX 2bit
CON
RES MR2114               ; INDEX 3bit
CON
RES MR2115               ; INDEX 4bit
CON
JMP @MR4108
STG @MR4108
TMH @14 #3               ; ｳｴｲﾄﾀｲﾏｰ14
CON
AND @T14                 ; ｳｴｲﾄﾀｲﾏｰ14
SET MR2106               ; ｲﾝﾃﾞｯｸｽ 1桁目
CON
JMP @MR4109
STG @MR4109
TMH @15 #3               ; ｳｴｲﾄﾀｲﾏｰ15
CON
AND @T15                 ; ｳｴｲﾄﾀｲﾏｰ15
SET R42203               ; INDEX回転中（SET/RST）
CON
SET MR2108               ; INDEX STARTING
CON
JMP @MR4112
STG @MR4112
ANB R1105                ; INDEX起動待ち
RES MR2108               ; INDEX STARTING
CON
RES MR2106               ; ｲﾝﾃﾞｯｸｽ 1桁目
CON
ZRES MR2111 MR2115       ; INDEX 0bit  INDEX 4bit
CON
JMP @MR4113
STG @MR4113
AND R1104                ; INDEX位置決め完了
SET MR2109               ; INDEX ANSER
CON
JMP @MR4114
STG @MR4114
ANB R1104                ; INDEX位置決め完了
RES MR2109               ; INDEX ANSER
CON
RES R42203               ; INDEX回転中（SET/RST）
CON
AND R40008               ; ﾐｭｰﾃｨﾝｸﾞ中
RES R42212               ; INDEX監視1
CON
JMP @MR4115
;機種によってインクリメント方式を変える
STG @MR4115
MPS
ANB R40003               ; 原点復帰中
MPS
AND= FM287 #1            ; ModelIdentficationNumber
MPS
AND< DM1359 #15          ; INDEX位置記憶
JMP @MR4200
MPP
AND>= DM1359 #15         ; INDEX位置記憶
DW #3 DM1359             ; INDEX位置記憶
CON
JMP @MR4205
MPP
AND= FM287 #2            ; ModelIdentficationNumber
MPS
AND< DM1359 #12          ; INDEX位置記憶
JMP @MR4200
MPP
AND>= DM1359 #12         ; INDEX位置記憶
DW #0 DM1359             ; INDEX位置記憶
CON
JMP @MR4205
MPP
AND R40003               ; 原点復帰中
MPS
AND= DM1359 #0           ; INDEX位置記憶
JMP @MR4206
MRD
AND= DM1359 #3           ; INDEX位置記憶
JMP @MR4207
MRD
AND= DM1359 #4           ; INDEX位置記憶
JMP @MR4208
MRD
AND= DM1359 #7           ; INDEX位置記憶
JMP @MR4209
MRD
AND= DM1359 #8           ; INDEX位置記憶
JMP @MR4210
MRD
AND= DM1359 #11          ; INDEX位置記憶
JMP @MR4211
MRD
AND= DM1359 #12          ; INDEX位置記憶
JMP @MR4212
MPP
AND= DM1359 #15          ; INDEX位置記憶
JMP @MR4213
STG @MR4206
DW #3 DM1359             ; INDEX位置記憶
CON
JMP @MR4205
STG @MR4207
DW #4 DM1359             ; INDEX位置記憶
CON
JMP @MR4205
STG @MR4208
DW #7 DM1359             ; INDEX位置記憶
CON
JMP @MR4205
STG @MR4209
DW #8 DM1359             ; INDEX位置記憶
CON
JMP @MR4205
STG @MR4210
DW #11 DM1359            ; INDEX位置記憶
CON
JMP @MR4205
STG @MR4211
DW #12 DM1359            ; INDEX位置記憶
CON
JMP @MR4205
STG @MR4212
DW #15 DM1359            ; INDEX位置記憶
CON
JMP @MR4205
STG @MR4213
DW #0 DM1359             ; INDEX位置記憶
CON
JMP @MR4205
STG @MR4200
CAL+ #4 DM1359 DM1359    ; INDEX位置記憶  INDEX位置記憶
JMP @MR4205
STG @MR4201
CAL+ #4 DM1359 DM1359    ; INDEX位置記憶  INDEX位置記憶
JMP @MR4205
STG @MR4205
MPS
SET @MR4101              ; INDEX CW回転Fin
CON
ENDS
MRD
WSR DM1352 #3 #1         ; NGﾜｰｸﾌﾗｸﾞ ST2
MPP
WSR DM1360 #3 #1         ; ST1 Work Memory
;<h1/>Index Turn BK1-Posishon / Index正転 (BK-1へ）
LD R42212                ; INDEX監視1
AND R42211               ; ﾗｲﾄｶｰﾃﾝ遮光
RES R42212               ; INDEX監視1
CON
RES MR2108               ; INDEX STARTING
CON
RES MR2109               ; INDEX ANSER
CON
RES MR2106               ; ｲﾝﾃﾞｯｸｽ 1桁目
CON
ZRES MR2111 MR2115       ; INDEX 0bit  INDEX 4bit
CON
RES @MR4100              ; INDEX CW回転SUB
CON
ZRES @MR4100 @MR4203     ; INDEX CW回転SUB
STG @MR4300              ; INDEX CW回転SUB
ANB R42211               ; ﾗｲﾄｶｰﾃﾝ遮光
SET R42212               ; INDEX監視1
CON
SET MR2110               ; INDEX EMERGENCY STOP
CON
JMP @MR4303
STG @MR4303
AND R1105                ; INDEX起動待ち
JMP @MR4306
STG @MR4306
SET MR2111               ; INDEX 0bit
CON
SET MR2112               ; INDEX 1bit
CON
SET MR2113               ; INDEX 2bit
CON
SET MR2114               ; INDEX 3bit
CON
RES MR2115               ; INDEX 4bit
CON
JMP @MR4308
STG @MR4308
TMH @22 #3               ; ｳｴｲﾄﾀｲﾏｰ22
CON
AND @T22                 ; ｳｴｲﾄﾀｲﾏｰ22
SET MR2106               ; ｲﾝﾃﾞｯｸｽ 1桁目
CON
JMP @MR4309
STG @MR4309
TMH @23 #3               ; ｳｴｲﾄﾀｲﾏｰ23
CON
AND @T23                 ; ｳｴｲﾄﾀｲﾏｰ23
SET R42203               ; INDEX回転中（SET/RST）
CON
SET MR2108               ; INDEX STARTING
CON
JMP @MR4312
STG @MR4312
ANB R1105                ; INDEX起動待ち
RES MR2108               ; INDEX STARTING
CON
RES MR2106               ; ｲﾝﾃﾞｯｸｽ 1桁目
CON
ZRES MR2111 MR2115       ; INDEX 0bit  INDEX 4bit
CON
JMP @MR4313
STG @MR4313
AND R1104                ; INDEX位置決め完了
SET MR2109               ; INDEX ANSER
CON
JMP @MR4314
STG @MR4314
ANB R1104                ; INDEX位置決め完了
RES MR2109               ; INDEX ANSER
CON
RES R42203               ; INDEX回転中（SET/RST）
CON
AND R40008               ; ﾐｭｰﾃｨﾝｸﾞ中
RES R42212               ; INDEX監視1
CON
JMP @MR4315
STG @MR4315
DW #15 DM1359            ; INDEX位置記憶
CON
SET @MR4301              ; INDEX CW回転Fin
CON
ENDS
;<h1/>INDEX Case Memory / INDEX上ｹｰｽ記憶　
STG @MR4400              ; ｹｰｽ記憶開始
SET @MR4402              ; ｹｰｽ記憶処理中
CON
MPS
AND R4000                ; INDEX 1ST ｶｰﾄﾘｯｼﾞ有無確認
BSET DM1360 #0           ; ST1 Work Memory
CON
JMP @MR4403
MPP
ANB R4000                ; INDEX 1ST ｶｰﾄﾘｯｼﾞ有無確認
BRES DM1360 #0           ; ST1 Work Memory
CON
JMP @MR4403
STG @MR4403
MPS
AND R4003                ; INDEX 2ST ｶｰﾄﾘｯｼﾞ有無確認
BSET DM1361 #0           ; ST2 Work Memory
CON
JMP @MR4404
MPP
ANB R4003                ; INDEX 2ST ｶｰﾄﾘｯｼﾞ有無確認
BRES DM1361 #0           ; ST2 Work Memory
CON
JMP @MR4404
STG @MR4404
MPS
AND R4006                ; INDEX 3ST ｶｰﾄﾘｯｼﾞ有無確認
BSET DM1362 #0           ; ST3 Work Memory
CON
JMP @MR4405
MPP
ANB R4006                ; INDEX 3ST ｶｰﾄﾘｯｼﾞ有無確認
BRES DM1362 #0           ; ST3 Work Memory
CON
JMP @MR4405
STG @MR4405
MPS
AND R4009                ; INDEX 4ST ｶｰﾄﾘｯｼﾞ有無確認
BSET DM1363 #0           ; ST4 Work Memory
CON
JMP @MR4406
MPP
ANB R4009                ; INDEX 4ST ｶｰﾄﾘｯｼﾞ有無確認
BRES DM1363 #0           ; ST4 Work Memory
CON
JMP @MR4406
STG @MR4406
SET @MR4401              ; ｹｰｽ記憶完了
CON
ENDS
;<h1/>Arrival Case Check / 到着ｹｰｽﾁｪｯｸ
STG @MR4408              ; 到着ｹｰｽﾁｪｯｸ
MPS
AND R4003                ; INDEX 2ST ｶｰﾄﾘｯｼﾞ有無確認
MPS
AND= DM1361 #1           ; ST2 Work Memory
JMP @MR4411
MPP
AND= DM1361 #0           ; ST2 Work Memory
SET @MR400               ; Err55 INDEX
CON
JMP @MR4508
MPP
ANB R4003                ; INDEX 2ST ｶｰﾄﾘｯｼﾞ有無確認
MPS
AND= DM1361 #0           ; ST2 Work Memory
JMP @MR4411
MPP
AND= DM1361 #1           ; ST2 Work Memory
SET @MR300               ; Err51 INDEX
CON
JMP @MR4508
STG @MR4411
MPS
AND R4006                ; INDEX 3ST ｶｰﾄﾘｯｼﾞ有無確認
MPS
AND= DM1362 #1           ; ST3 Work Memory
JMP @MR4412
MPP
AND= DM1362 #0           ; ST3 Work Memory
SET @MR404               ; Err56 INDEX
CON
JMP @MR4509
MPP
ANB R4006                ; INDEX 3ST ｶｰﾄﾘｯｼﾞ有無確認
MPS
AND= DM1362 #0           ; ST3 Work Memory
JMP @MR4412
MPP
AND= DM1362 #1           ; ST3 Work Memory
SET @MR304               ; Err52 INDEX
CON
JMP @MR4509
STG @MR4412
MPS
AND R4009                ; INDEX 4ST ｶｰﾄﾘｯｼﾞ有無確認
MPS
AND= DM1363 #1           ; ST4 Work Memory
JMP @MR4413
MPP
AND= DM1363 #0           ; ST4 Work Memory
SET @MR408               ; Err57 INDEX
CON
JMP @MR4510
MPP
ANB R4009                ; INDEX 4ST ｶｰﾄﾘｯｼﾞ有無確認
MPS
AND= DM1363 #0           ; ST4 Work Memory
JMP @MR4413
MPP
AND= DM1363 #1           ; ST4 Work Memory
SET @MR308               ; Err53 INDEX
CON
JMP @MR4510
STG @MR4413
SET @MR4409              ; 到着ｹｰｽﾁｪｯｸ完了
CON
ENDS
;
STG @MR4508
LD @MR403                ; Err55 INDEX解除完了
OR @MR303                ; Err51 INDEX解除完了
ANL
RES @MR403               ; Err55 INDEX解除完了
CON
RES @MR303               ; Err51 INDEX解除完了
CON
MPS
ANB R4003                ; INDEX 2ST ｶｰﾄﾘｯｼﾞ有無確認
DW #0 DM1361             ; ST2 Work Memory
CON
JMP @MR4408              ; 到着ｹｰｽﾁｪｯｸ
MPP
AND R4003                ; INDEX 2ST ｶｰﾄﾘｯｼﾞ有無確認
DW #1 DM1361             ; ST2 Work Memory
CON
DW #2 DM1352             ; NGﾜｰｸﾌﾗｸﾞ ST2
CON
JMP @MR4408              ; 到着ｹｰｽﾁｪｯｸ
STG @MR4509
LD @MR407                ; Err56 INDEX解除完了
OR @MR307                ; Err52 INDEX解除完了
ANL
RES @MR407               ; Err56 INDEX解除完了
CON
RES @MR307               ; Err52 INDEX解除完了
CON
MPS
ANB R4006                ; INDEX 3ST ｶｰﾄﾘｯｼﾞ有無確認
DW #0 DM1362             ; ST3 Work Memory
CON
JMP @MR4411
MPP
AND R4006                ; INDEX 3ST ｶｰﾄﾘｯｼﾞ有無確認
DW #1 DM1362             ; ST3 Work Memory
CON
DW #3 DM1353             ; NGﾜｰｸﾌﾗｸﾞ ST3
CON
JMP @MR4411
STG @MR4510
LD @MR411                ; Err57 INDEX解除完了
OR @MR311                ; Err53 INDEX解除完了
ANL
RES @MR411               ; Err57 INDEX解除完了
CON
RES @MR311               ; Err53 INDEX解除完了
CON
MPS
ANB R4009                ; INDEX 4ST ｶｰﾄﾘｯｼﾞ有無確認
DW #0 DM1363             ; ST4 Work Memory
CON
JMP @MR4412
MPP
AND R4009                ; INDEX 4ST ｶｰﾄﾘｯｼﾞ有無確認
DW #1 DM1363             ; ST4 Work Memory
CON
DW #4 DM1354             ; NGﾜｰｸﾌﾗｸﾞ ST4
CON
JMP @MR4412
;
STG @MR2200              ; ﾜｰｸ浮きﾁｪｯｸ開始
MPS
LD R4001                 ; INDEX 1ST ｶｰﾄﾘｯｼﾞ浮き(内)
AND R4002                ; INDEX 1ST ｶｰﾄﾘｯｼﾞ浮き(外)
OR LR1000                ; 浮き検出無視
ANL
JMP @MR2202
MPP
LDB R4001                ; INDEX 1ST ｶｰﾄﾘｯｼﾞ浮き(内)
ORB R4002                ; INDEX 1ST ｶｰﾄﾘｯｼﾞ浮き(外)
ANB LR1000               ; 浮き検出無視
ANL
SET @MR504               ; Err58 INDEX
CON
JMP @MR2206
STG @MR2202
MPS
LD R4004                 ; INDEX 2ST ｶｰﾄﾘｯｼﾞ浮き(内)
AND R4005                ; INDEX 2ST ｶｰﾄﾘｯｼﾞ浮き(外)
OR LR1000                ; 浮き検出無視
ANL
JMP @MR2203
MPP
LDB R4004                ; INDEX 2ST ｶｰﾄﾘｯｼﾞ浮き(内)
ORB R4005                ; INDEX 2ST ｶｰﾄﾘｯｼﾞ浮き(外)
ANB LR1000               ; 浮き検出無視
ANL
SET @MR508               ; Err59 INDEX
CON
JMP @MR2207
STG @MR2203
MPS
LD R4007                 ; INDEX 3ST ｶｰﾄﾘｯｼﾞ浮き(内)
AND R4008                ; INDEX 3ST ｶｰﾄﾘｯｼﾞ浮き(外)
OR LR1000                ; 浮き検出無視
ANL
JMP @MR2204
MPP
LDB R4007                ; INDEX 3ST ｶｰﾄﾘｯｼﾞ浮き(内)
ORB R4008                ; INDEX 3ST ｶｰﾄﾘｯｼﾞ浮き(外)
ANB LR1000               ; 浮き検出無視
ANL
SET @MR512               ; Err60 INDEX
CON
JMP @MR2208
STG @MR2204
MPS
LD R4010                 ; INDEX 4ST ｶｰﾄﾘｯｼﾞ浮き(内)
AND R4011                ; INDEX 4ST ｶｰﾄﾘｯｼﾞ浮き(外)
OR LR1000                ; 浮き検出無視
ANL
JMP @MR2205
MPP
LDB R4010                ; INDEX 4ST ｶｰﾄﾘｯｼﾞ浮き(内)
ORB R4011                ; INDEX 4ST ｶｰﾄﾘｯｼﾞ浮き(外)
ANB LR1000               ; 浮き検出無視
ANL
SET @MR600               ; Err61 INDEX 
CON
JMP @MR2209
STG @MR2205
SET @MR2201              ; ﾜｰｸ浮きﾁｪｯｸ完了
CON
ENDS
STG @MR2206
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
AND @MR507               ; Err58 INDEX解除完了
RES @MR507               ; Err58 INDEX解除完了
CON
JMP @MR2200              ; ﾜｰｸ浮きﾁｪｯｸ開始
STG @MR2207
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
AND @MR511               ; Err59 INDEX解除完了
RES @MR511               ; Err59 INDEX解除完了
CON
JMP @MR2200              ; ﾜｰｸ浮きﾁｪｯｸ開始
STG @MR2208
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
AND @MR515               ; Err60 INDEX解除完了
RES @MR515               ; Err60 INDEX解除完了
CON
JMP @MR2200              ; ﾜｰｸ浮きﾁｪｯｸ開始
STG @MR2209
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
AND @MR603               ; Err61 INDEX解除完了
RES @MR603               ; Err61 INDEX解除完了
CON
JMP @MR2200              ; ﾜｰｸ浮きﾁｪｯｸ開始
;<h1/>ｴﾗｰ / Error 
;
STG @MR100               ; Err42 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_NONE DM1203        ; ERROR_SW_NONE
CON
DW SW_REMOVE DM1204      ; ERROR_SW_REMOVE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE
CON
JMP @MR101
MOV #42 DM1200           ; 通常ｴﾗｰ番号
STG @MR101
AND R40010               ; ERROR
JMP @MR102
STG @MR102
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR103               ; Err42 INDEX解除完了
CON
ENDS
;Err44 Remove the case on Index / Indexﾜｰｸ除材要求
STG @MR104               ; Err44 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE
CON
JMP @MR105
MOV #44 DM1200           ; 通常ｴﾗｰ番号
STG @MR105
AND R40010               ; ERROR
JMP @MR106
STG @MR106
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR107               ; Err44 INDEX解除完了
CON
ENDS
;Err45 Remove Defect case by UT2 / Index到着ﾜｰｸ不良(UT2)
STG @MR108               ; Err45 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE
CON
JMP @MR109
MOV #45 DM1200           ; 通常ｴﾗｰ番号
STG @MR109
AND R40010               ; ERROR
JMP @MR110
STG @MR110
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR111               ; Err45 INDEX解除完了
CON
ENDS
;Err46　Remove Defect case by UT3 / Index到着ﾜｰｸ不良(UT3)
STG @MR112               ; Err46 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE
CON
JMP @MR113
MOV #46 DM1200           ; 通常ｴﾗｰ番号
STG @MR113
AND R40010               ; ERROR
JMP @MR114
STG @MR114
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR115               ; Err46 INDEX解除完了
CON
ENDS
;Err47 Remove Defect case by UT4 / Index到着ﾜｰｸ不良(UT4)
STG @MR200               ; Err47 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE
CON
JMP @MR201
MOV #47 DM1200           ; 通常ｴﾗｰ番号
STG @MR201
AND R40010               ; ERROR
JMP @MR202
STG @MR202
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR203               ; Err47 INDEX解除完了
CON
ENDS
;Err48 
STG @MR204               ; Err48 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE
CON
JMP @MR205
MOV #48 DM1200           ; 通常ｴﾗｰ番号
STG @MR205
AND R40010               ; ERROR
JMP @MR206
STG @MR206
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR207               ; Err48 INDEX解除完了
CON
ENDS
;
STG @MR208               ; Err49 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_NONE DM1203        ; ERROR_SW_NONE
CON
DW SW_REMOVE DM1204      ; ERROR_SW_REMOVE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE
CON
JMP @MR209
MOV #49 DM1200           ; 通常ｴﾗｰ番号
STG @MR209
AND R40010               ; ERROR
JMP @MR210
STG @MR210
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR211               ; Err49 INDEX解除完了
CON
ENDS
;Err50 ST1 Work Infomation Error(Lost) / ST1 ﾜｰｸ情報不一致(無くなった）
STG @MR212               ; Err50 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE
CON
JMP @MR213
MOV #50 DM1200           ; 通常ｴﾗｰ番号
STG @MR213
AND R40010               ; ERROR
JMP @MR214
STG @MR214
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR215               ; Err50 INDEX解除完了
CON
ENDS
;Err51 ST2 Work Infomation Error(Lost) / ST2 ﾜｰｸ情報不一致(無くなった）
STG @MR300               ; Err51 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE
CON
JMP @MR301
MOV #51 DM1200           ; 通常ｴﾗｰ番号
STG @MR301
AND R40010               ; ERROR
JMP @MR302
STG @MR302
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR303               ; Err51 INDEX解除完了
CON
ENDS
;Err52 ST3 Work Infomation Error(Lost) / ST3 ﾜｰｸ情報不一致(無くなった）
STG @MR304               ; Err52 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE
CON
JMP @MR305
MOV #52 DM1200           ; 通常ｴﾗｰ番号
STG @MR305
AND R40010               ; ERROR
JMP @MR306
STG @MR306
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR307               ; Err52 INDEX解除完了
CON
ENDS
;Err53 ST4 Work Infomation Error(Lost) / ST4 ﾜｰｸ情報不一致(無くなった）
STG @MR308               ; Err53 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE
CON
JMP @MR309
MOV #53 DM1200           ; 通常ｴﾗｰ番号
STG @MR309
AND R40010               ; ERROR
JMP @MR310
STG @MR310
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR311               ; Err53 INDEX解除完了
CON
ENDS
;Err54 ST1 Work Infomation Error(Born) / ST1 ﾜｰｸ情報不一致(増えた）
STG @MR312               ; Err54 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE
CON
JMP @MR313
MOV #54 DM1200           ; 通常ｴﾗｰ番号
STG @MR313
AND R40010               ; ERROR
JMP @MR314
STG @MR314
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR315               ; Err54 INDEX解除完了
CON
ENDS
;Err55 ST2 Work Infomation Error(Born) / ST2 ﾜｰｸ情報不一致(増えた)
STG @MR400               ; Err55 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE
CON
JMP @MR401
MOV #55 DM1200           ; 通常ｴﾗｰ番号
STG @MR401
AND R40010               ; ERROR
JMP @MR402
STG @MR402
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR403               ; Err55 INDEX解除完了
CON
ENDS
;Err56 ST3 Work Infomation Error(Born) / ST3 ﾜｰｸ情報不一致(増えた)
STG @MR404               ; Err56 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE
CON
JMP @MR405
MOV #56 DM1200           ; 通常ｴﾗｰ番号
STG @MR405
AND R40010               ; ERROR
JMP @MR406
STG @MR406
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR407               ; Err56 INDEX解除完了
CON
ENDS
;Err57 ST4 Work Infomation Error(Born) / ST4 ﾜｰｸ情報不一致(増えた)
STG @MR408               ; Err57 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE
CON
JMP @MR409
MOV #57 DM1200           ; 通常ｴﾗｰ番号
STG @MR409
AND R40010               ; ERROR
JMP @MR410
STG @MR410
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR411               ; Err57 INDEX解除完了
CON
ENDS
;Err43 Index 干渉ｱｸﾁｭｴｰﾀ有り / Index, interfere Actuater
STG @MR412               ; Err43 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE
CON
JMP @MR413
MOV #43 DM1200           ; 通常ｴﾗｰ番号
STG @MR413
AND R40010               ; ERROR
JMP @MR414
STG @MR414
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR415               ; Err43 INDEX解除完了
CON
ENDS
;Err48 1ST 不明ﾜｰｸ有り / 1ST ? Cartridge Presented
STG @MR500               ; Err48 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE
CON
JMP @MR501
MOV #48 DM1200           ; 通常ｴﾗｰ番号
STG @MR501
AND R40010               ; ERROR
JMP @MR502
STG @MR502
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR503               ; Err48 INDEX解除完了
CON
ENDS
;Err58 ST1 ﾜｰｸ浮き検出
STG @MR504               ; Err58 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE
CON
JMP @MR505
MOV #58 DM1200           ; 通常ｴﾗｰ番号
STG @MR505
AND R40010               ; ERROR
JMP @MR506
STG @MR506
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR507               ; Err58 INDEX解除完了
CON
ENDS
;Err59 ST2 ﾜｰｸ浮き検出
STG @MR508               ; Err59 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE
CON
JMP @MR509
MOV #59 DM1200           ; 通常ｴﾗｰ番号
STG @MR509
AND R40010               ; ERROR
JMP @MR510
STG @MR510
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR511               ; Err59 INDEX解除完了
CON
ENDS
;Err60 ST3 ﾜｰｸ浮き検出
STG @MR512               ; Err60 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE
CON
JMP @MR513
MOV #60 DM1200           ; 通常ｴﾗｰ番号
STG @MR513
AND R40010               ; ERROR
JMP @MR514
STG @MR514
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR515               ; Err60 INDEX解除完了
CON
ENDS
;Err61 ST4 ﾜｰｸ浮き検出
STG @MR600               ; Err61 INDEX 
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE
CON
JMP @MR601               ; 601
MOV #61 DM1200           ; 通常ｴﾗｰ番号
STG @MR601               ; 601
AND R40010               ; ERROR
JMP @MR602               ; 602
STG @MR602               ; 602
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR603               ; Err61 INDEX解除完了
CON
ENDS
;PACKｾｯﾄ
;Pack Set
LD @MR900                ; PACK16-1
OUT R40215               ; ﾎﾟｰｽﾞ禁止16
END
ENDH
