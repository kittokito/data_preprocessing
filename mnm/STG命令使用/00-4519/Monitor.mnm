DEVICE:53
;MODULE:Monitor
;MODULE_TYPE:0
LD R40013                ; 非常停止
ZRES @R000 @R915         ; ﾋｰﾀｰ適温外  915
;動作中MAIN AIR OFFｴﾗｰ ｴﾗｰ2 / Main AIR off during operation error. Error2 Output.
;
LD R40004                ; TASKDO
ANB R42008
ANB R40010               ; ERROR
ANB R40005               ; ﾎﾟｰｽﾞ中
@SET @R800               ; 動作中Main Air OFF
STG @R800                ; 動作中Main Air OFF
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY
CON
JMP @R802                ; 802
MOV #2 DM1200            ; 通常ｴﾗｰ番号
STG @R802                ; 802
AND R40010               ; ERROR
JMP @R803                ; 803
STG @R803                ; 803
ANB R40010               ; ERROR
RES @R801                ; 801
CON
ENDS
;原点復帰完了　ﾋｰﾀｰ電源ON / After the Home Position , Heater 1 〜 3 Power ON.
;
LD R40009                ; 原点復帰完了
LD R507                  ; 減圧封止　CL選択
OR R506                  ; 減圧封止　BK選択
ANL
@SET MR500               ; 剥離ﾌｨﾙﾑ 上溶着ﾋｰﾀ電源ON
CON
@SET MR501               ; 剥離ﾌｨﾙﾑ 側面溶着ﾋｰﾀ電源ON
CON
@SET MR502               ; 減圧封止ﾋｰﾀ電源ON
;ﾋｰﾀｰ1 状態出力 / Heater-1 Output of State.
;
LD MR500                 ; 剥離ﾌｨﾙﾑ 上溶着ﾋｰﾀ電源ON
MPS
TMR @0 #10               ; ﾋｰﾀｰ1電源ON後ﾃﾞｨﾚｲ
CON
AND @T0                  ; ﾋｰﾀｰ1電源ON後ﾃﾞｨﾚｲ
ANB R010                 ; ﾋｰﾀｰ1 ｵｰﾊﾞｰﾋｰﾄ
TMH @1 #10               ; ﾋｰﾀｰ1 ｵｰﾊﾞｰﾋｰﾄﾃﾞｨﾚｲ
CON
AND @T1                  ; ﾋｰﾀｰ1 ｵｰﾊﾞｰﾋｰﾄﾃﾞｨﾚｲ
OUT @MR005               ; ﾋｰﾀｰ1 過昇温
MPP
LD R010                  ; ﾋｰﾀｰ1 ｵｰﾊﾞｰﾋｰﾄ
ANB R000                 ; ﾋｰﾀｰ1 ALM1 低温
AND R001                 ; ﾋｰﾀｰ1 ALM2 適温
ANL
OUT @MR004               ; ﾋｰﾀｰ1 適温
;ﾋｰﾀｰ2 状態出力 / Heater-2 Output of State.
;
LD MR501                 ; 剥離ﾌｨﾙﾑ 側面溶着ﾋｰﾀ電源ON
MPS
TMR @4 #10               ; ﾋｰﾀｰ2電源ON後ﾃﾞｨﾚｲ
CON
AND @T4                  ; ﾋｰﾀｰ2電源ON後ﾃﾞｨﾚｲ
ANB R011                 ; ﾋｰﾀｰ2 ｵｰﾊﾞｰﾋｰﾄ
TMH @5 #10               ; ﾋｰﾀｰ2 ｵｰﾊﾞｰﾋｰﾄﾃﾞｨﾚｲ
CON
AND @T5                  ; ﾋｰﾀｰ2 ｵｰﾊﾞｰﾋｰﾄﾃﾞｨﾚｲ
OUT @MR007               ; ﾋｰﾀｰ2 過昇温
MPP
LD R011                  ; ﾋｰﾀｰ2 ｵｰﾊﾞｰﾋｰﾄ
ANB R002                 ; ﾋｰﾀｰ2 ALM1 低温
AND R003                 ; ﾋｰﾀｰ2 ALM2 適温
ANL
OUT @MR006               ; ﾋｰﾀｰ2 適温
;ﾋｰﾀｰ3 状態出力 / Heater-3 Output of State.
;
LD MR502                 ; 減圧封止ﾋｰﾀ電源ON
MPS
TMR @8 #10               ; ﾋｰﾀｰ3電源ON後ﾃﾞｨﾚｲ
CON
AND @T8                  ; ﾋｰﾀｰ3電源ON後ﾃﾞｨﾚｲ
ANB R012                 ; ﾋｰﾀｰ3 ｵｰﾊﾞｰﾋｰﾄ
TMH @9 #10               ; ﾋｰﾀｰ3 ｵｰﾊﾞｰﾋｰﾄﾃﾞｨﾚｲ
CON
AND @T9                  ; ﾋｰﾀｰ3 ｵｰﾊﾞｰﾋｰﾄﾃﾞｨﾚｲ
OUT @MR010               ; ﾋｰﾀｰ3 過昇温
MPP
AND R012                 ; ﾋｰﾀｰ3 ｵｰﾊﾞｰﾋｰﾄ
MPS
LD R42400                ; INDEX BK選択中
ANB R004                 ; ﾋｰﾀｰ3(BK) ALM1 低温
AND R005                 ; ﾋｰﾀｰ3(BK) ALM2 適温
ANL
OUT @MR008               ; ﾋｰﾀｰ3(BK) 適温
MPP
LDB R42400               ; INDEX BK選択中
ANB R006                 ; ﾋｰﾀｰ3(CL) ALM1 低温
AND R007                 ; ﾋｰﾀｰ3(CL) ALM2 適温
ANL
OUT @MR009               ; ﾋｰﾀｰ3(CL) 適温
;ﾋｰﾀｰ適温出力 / Heater Fit Temperature.
;
LD R50510                ; ﾋｰﾀｰ1 適温
AND R50511               ; ﾋｰﾀｰ2 適温
LD R50512                ; ﾋｰﾀｰ3(BK) 適温
OR R50513                ; ﾋｰﾀｰ3(CL) 適温
ANL
OUT R50515               ; 全ﾋｰﾀｰ 適温
LD @MR004                ; ﾋｰﾀｰ1 適温
ANB @MR000               ; ﾋｰﾀｰ適温外
OUT R50510               ; ﾋｰﾀｰ1 適温
LD @MR006                ; ﾋｰﾀｰ2 適温
ANB @MR000               ; ﾋｰﾀｰ適温外
OUT R50511               ; ﾋｰﾀｰ2 適温
LD @MR008                ; ﾋｰﾀｰ3(BK) 適温
ANB @MR000               ; ﾋｰﾀｰ適温外
OUT R50512               ; ﾋｰﾀｰ3(BK) 適温
LD @MR009                ; ﾋｰﾀｰ3(CL) 適温
ANB @MR000               ; ﾋｰﾀｰ適温外
OUT R50513               ; ﾋｰﾀｰ3(CL) 適温
;ﾋｰﾀｰ適温外 ｴﾗｰ14 / Heater Not Fit Temperature. Error14 Output.
;
LD R40001                ; 自動動作中
ANB R50515               ; 全ﾋｰﾀｰ 適温
ANB @MR000               ; ﾋｰﾀｰ適温外
TMH @18 #10              ; 全ﾋｰﾀｰ適温外ﾃﾞｨﾚｲ
LD @T18                  ; 全ﾋｰﾀｰ適温外ﾃﾞｨﾚｲ
ANB R40010               ; ERROR
SET @MR000               ; ﾋｰﾀｰ適温外
CON
SET R40010               ; ERROR
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY
CON
SET @R808                ; ﾋｰﾀｰ適温外
MOV #14 DM1200           ; 通常ｴﾗｰ番号
STG @R808                ; ﾋｰﾀｰ適温外
AND R40010               ; ERROR
JMP @R809
STG @R809
ANB R40010               ; ERROR
RES @MR000               ; ﾋｰﾀｰ適温外
CON
ENDS
;ﾋｰﾀｰ1過昇温 ｴﾗｰ4 / Heater-1 Over Heat. Error4 Output.
;
LD @MR005                ; ﾋｰﾀｰ1 過昇温
TMH @23 #10              ; ﾋｰﾀｰ1過昇温ﾃﾞｨﾚｲ
LD @T23                  ; ﾋｰﾀｰ1過昇温ﾃﾞｨﾚｲ
ANB R40010               ; ERROR
RES MR500                ; 剥離ﾌｨﾙﾑ 上溶着ﾋｰﾀ電源ON
CON
SET R40010               ; ERROR
CON
DW SW_REMOVE DM1203      ; ERROR_SW_REMOVE
CON
SET @R900                ; ﾋｰﾀｰ1過昇温
MOV #4 DM1200            ; 通常ｴﾗｰ番号
STG @R900                ; ﾋｰﾀｰ1過昇温
AND R40010               ; ERROR
JMP @R901                ; 901
STG @R901                ; 901
ANB R40010               ; ERROR
SET R40014               ; TRAP
CON
ENDS
;ﾋｰﾀｰ2過昇温 ｴﾗｰ5 / Heater-2 Over Heat. Error5 Output.
;
LD @MR007                ; ﾋｰﾀｰ2 過昇温
TMH @24 #10              ; ﾋｰﾀｰ2過昇温ﾃﾞｨﾚｲ
LD @T24                  ; ﾋｰﾀｰ2過昇温ﾃﾞｨﾚｲ
ANB R40010               ; ERROR
RES MR501                ; 剥離ﾌｨﾙﾑ 側面溶着ﾋｰﾀ電源ON
CON
SET R40010               ; ERROR
CON
DW SW_REMOVE DM1203      ; ERROR_SW_REMOVE
CON
SET @R904                ; ﾋｰﾀｰ2過昇温
MOV #5 DM1200            ; 通常ｴﾗｰ番号
STG @R904                ; ﾋｰﾀｰ2過昇温
AND R40010               ; ERROR
JMP @R905
STG @R905
ANB R40010               ; ERROR
SET R40014               ; TRAP
CON
ENDS
;ﾋｰﾀｰ3過昇温 ｴﾗｰ6 / Heater-3 Over Heat. Error6 Output.
;
LD @MR010                ; ﾋｰﾀｰ3 過昇温
TMH @25 #10              ; ﾋｰﾀｰ3過昇温ﾃﾞｨﾚｲ
LD @T25                  ; ﾋｰﾀｰ3過昇温ﾃﾞｨﾚｲ
ANB R40010               ; ERROR
RES MR502                ; 減圧封止ﾋｰﾀ電源ON
CON
SET R40010               ; ERROR
CON
DW SW_REMOVE DM1203      ; ERROR_SW_REMOVE
CON
SET @R908                ; ﾋｰﾀｰ3過昇温
MOV #6 DM1200            ; 通常ｴﾗｰ番号
STG @R908                ; ﾋｰﾀｰ3過昇温
AND R40010               ; ERROR
JMP @R909                ; 909
STG @R909                ; 909
ANB R40010               ; ERROR
SET R40014               ; TRAP
CON
ENDS
;ﾋｰﾀｰ1断線異常 ｴﾗｰ9 / Heater-1 Shapping of Wire. Error9 Output.
;
LD R50301                ; ﾋｰﾀｰ1断線
ANB @MR005               ; ﾋｰﾀｰ1 過昇温
TMH @30 #10              ; ﾋｰﾀｰ1断線ﾃﾞｨﾚｲ
LD @T30                  ; ﾋｰﾀｰ1断線ﾃﾞｨﾚｲ
ANB R40010               ; ERROR
RES MR500                ; 剥離ﾌｨﾙﾑ 上溶着ﾋｰﾀ電源ON
CON
SET R40010               ; ERROR
CON
DW SW_REMOVE DM1203      ; ERROR_SW_REMOVE
CON
SET @MR700
MOV #9 DM1200            ; 通常ｴﾗｰ番号
STG @R700                ; 温調器ST読み出し開始
AND R40010               ; ERROR
JMP @R701                ; 701
STG @R701                ; 701
ANB R40010               ; ERROR
SET R40014               ; TRAP
CON
ENDS
;ﾋｰﾀｰ2断線異常 ｴﾗｰ10 / Heater-2 Shapping of Wire. Error10 Output.
;
LD R50302                ; ﾋｰﾀｰ2断線
ANB @MR007               ; ﾋｰﾀｰ2 過昇温
TMH @31 #10              ; ﾋｰﾀｰ2断線ﾃﾞｨﾚｲ
LD @T31                  ; ﾋｰﾀｰ2断線ﾃﾞｨﾚｲ
ANB R40010               ; ERROR
RES MR501                ; 剥離ﾌｨﾙﾑ 側面溶着ﾋｰﾀ電源ON
CON
SET R40010               ; ERROR
CON
DW SW_REMOVE DM1203      ; ERROR_SW_REMOVE
CON
SET @MR704               ; ﾋｰﾀｰ2断線
MOV #10 DM1200           ; 通常ｴﾗｰ番号
STG @MR704               ; ﾋｰﾀｰ2断線
AND R40010               ; ERROR
JMP @R705
STG @R705
ANB R40010               ; ERROR
SET R40014               ; TRAP
CON
ENDS
;ﾋｰﾀｰ3断線異常 ｴﾗｰ11 / Heater-3 Shapping of Wire. Error11 Output.
;
LD R50303                ; ﾋｰﾀｰ3断線
ANB @MR010               ; ﾋｰﾀｰ3 過昇温
TMH @32 #10              ; ﾋｰﾀｰ3断線ﾃﾞｨﾚｲ
LD @T32                  ; ﾋｰﾀｰ3断線ﾃﾞｨﾚｲ
ANB R40010               ; ERROR
RES MR502                ; 減圧封止ﾋｰﾀ電源ON
CON
SET R40010               ; ERROR
CON
DW SW_REMOVE DM1203      ; ERROR_SW_REMOVE
CON
SET @MR708               ; ﾋｰﾀｰ3断線
MOV #11 DM1200           ; 通常ｴﾗｰ番号
STG @MR708               ; ﾋｰﾀｰ3断線
AND R40010               ; ERROR
JMP @R709                ; 709
STG @R709                ; 709
ANB R40010               ; ERROR
SET R40014               ; TRAP
CON
ENDS
;温調器ｽﾃｰﾀｽ読出し / Temperature controller status reading
;
LD R40009                ; 原点復帰完了
TMR @20 #20              ; 原点復帰ﾃﾞｨﾚｲ
LD @T20                  ; 原点復帰ﾃﾞｨﾚｲ
@SET @MR400              ; 温調器ST読み出し開始
STG @MR400               ; 温調器ST読み出し開始
ANB R50214               ; 通信中
JMP @MR401
STG @MR401
SET R50214               ; 通信中
CON
MPS
AND R30600               ; Port2 通信完了
JMP @MR402
MPP
ANB R30600               ; Port2 通信完了
MSTRT TEMP_ST #26
STG @MR402
RES R30600               ; Port2 通信完了
CON
RES R50214               ; 通信中
CON
MPS
ANB R30601               ; Port2 通信エラー
JMP @MR404
MPP
AND R30601               ; Port2 通信エラー
SET @MR408               ; 温調器通信ｴﾗｰ
CON
RES R30601               ; Port2 通信エラー
CON
JMP @MR403
STG @MR403
AND @MR411               ; err18 解除完了
RES @MR411               ; err18 解除完了
CON
JMP @MR404
STG @MR404
TMR @21 #100             ; Port2 繰り返しﾃﾞｨﾚｲ
CON
AND @T21                 ; Port2 繰り返しﾃﾞｨﾚｲ
JMP @MR400               ; 温調器ST読み出し開始
;温調器PV値読出し / Temperature controller PV value reading
;
LD= @DM0 #0
MPS
AND R50500               ; ﾋｰﾀｰ1溶着開始
DW #21 @DM0
MPP
ANB R50500               ; ﾋｰﾀｰ1溶着開始
MPS
AND R50501               ; ﾋｰﾀｰ2溶着開始
DW #22 @DM0
MPP
LDB R50501               ; ﾋｰﾀｰ2溶着開始
AND R50502               ; ﾋｰﾀｰ3溶着開始
ANL
MPS
AND R506                 ; 減圧封止　BK選択
DW #23 @DM0
MPP
AND R507                 ; 減圧封止　CL選択
DW #24 @DM0
LD R50500                ; ﾋｰﾀｰ1溶着開始
OR R50501                ; ﾋｰﾀｰ2溶着開始
OR R50502                ; ﾋｰﾀｰ3溶着開始
ANB @MR507               ; PV値読出し中
@SET @MR500
STG @MR500
SET @MR507               ; PV値読出し中
CON
ANB R50214               ; 通信中
JMP @MR501
STG @MR501
SET R50214               ; 通信中
CON
MPS
AND R30600               ; Port2 通信完了
JMP @MR502
MPP
ANB R30600               ; Port2 通信完了
MSTRT TEMP_PV @DM0
STG @MR502
RES R30600               ; Port2 通信完了
CON
MPS
ANB R30601               ; Port2 通信エラー
MPS
AND= #21 @DM0
RES R50500               ; ﾋｰﾀｰ1溶着開始
CON
DW #0 @DM0
CON
JMP @MR503
MRD
AND= #22 @DM0
RES R50501               ; ﾋｰﾀｰ2溶着開始
CON
DW #0 @DM0
CON
JMP @MR503
MRD
AND= #23 @DM0
RES R50502               ; ﾋｰﾀｰ3溶着開始
CON
DW #0 @DM0
CON
JMP @MR503
MPP
AND= #24 @DM0
RES R50502               ; ﾋｰﾀｰ3溶着開始
CON
DW #0 @DM0
CON
JMP @MR503
MPP
AND R30601               ; Port2 通信エラー
SET @MR408               ; 温調器通信ｴﾗｰ
CON
RES R30601               ; Port2 通信エラー
CON
JMP @MR504
STG @MR503
RES R30600               ; Port2 通信完了
CON
MPS
LDB R50500               ; ﾋｰﾀｰ1溶着開始
ANB R50501               ; ﾋｰﾀｰ2溶着開始
ANB R50502               ; ﾋｰﾀｰ3溶着開始
ANL
RES R50214               ; 通信中
CON
RES @MR507               ; PV値読出し中
CON
SET @MR509
CON
ENDS
MRD
AND R50500               ; ﾋｰﾀｰ1溶着開始
JMP @MR501
MRD
AND R50501               ; ﾋｰﾀｰ2溶着開始
JMP @MR501
MPP
AND R50502               ; ﾋｰﾀｰ3溶着開始
JMP @MR501
STG @MR504
AND @MR411               ; err18 解除完了
RES @MR411               ; err18 解除完了
CON
JMP @MR503
;温度データ比較・出力・格納 / Temperature Data Compare / Output / Store
;
STG @MR509
MPS
LD<> DM4260 DM4280       ; 温調器-1 温度  温調器-1 前回温度記憶
OR<> DM4262 DM4282       ; 温調器-2 温度  温調器-2 前回温度記憶
OR<> DM4264 DM4284       ; 温調器-3 BK 温度  温調器-3 BK 前回温度記憶
OR<> DM4266 DM4286       ; 温調器-3 CL 温度  温調器-3 CL 前回温度記憶
ANL
SET R50307               ; 温度ﾃﾞｰﾀ出力
CON
JMP @MR510
MPP
LD= DM4260 DM4280        ; 温調器-1 温度  温調器-1 前回温度記憶
AND= DM4262 DM4282       ; 温調器-2 温度  温調器-2 前回温度記憶
AND= DM4264 DM4284       ; 温調器-3 BK 温度  温調器-3 BK 前回温度記憶
AND= DM4266 DM4286       ; 温調器-3 CL 温度  温調器-3 CL 前回温度記憶
ANL
JMP @MR510
STG @MR510
BMOV DM4260 DM4280 #8    ; 温調器-1 温度  温調器-1 前回温度記憶
ENDS
LDP R40001               ; 自動動作中
FMOV #0 DM4280 #8        ; 温調器-1 前回温度記憶
;温調器通信ｴﾗｰ ｴﾗｰ18 / Heater Controller communication error.  Error18 Output.
;
STG @MR408               ; 温調器通信ｴﾗｰ
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY
CON
JMP @MR409
MOV #18 DM1200           ; 通常ｴﾗｰ番号
STG @MR409
AND R40010               ; ERROR
JMP @R410                ; 410
STG @R410                ; 410
ANB R40010               ; ERROR
SET @MR411               ; err18 解除完了
CON
ENDS
;INDEX ｻｰﾓｽﾀｯﾄ作動 ｴﾗｰ49 / Index Over Heat Detection.  Error49 Output.
;
LD CR2002                ; 常時ON
TMR @10 #40              ; ｳｪｲﾄﾀｲﾏ
LDB R1108                ; INDEX ｻｰﾓｽﾀｯﾄ
AND @T10                 ; ｳｪｲﾄﾀｲﾏ
ANB R40010               ; ERROR
TMR @12 #10              ; ｻｰﾓｽﾀｯﾄ作動確認ｳｪｲﾄ
LD @T12                  ; ｻｰﾓｽﾀｯﾄ作動確認ｳｪｲﾄ
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
RES MR2103               ; ｲﾝﾃﾞｯｸｽ電源ON
CON
ZRES MR2106 MR2115       ; ｲﾝﾃﾞｯｸｽ 1桁目  INDEX 4bit
CON
DW SW_REMOVE DM1203      ; ERROR_SW_REMOVE
CON
SET @MR412
MOV #49 DM1200           ; 通常ｴﾗｰ番号
STG @MR412
AND R40010               ; ERROR
JMP @R413
STG @R413
ANB R40010               ; ERROR
SET R40014               ; TRAP
CON
ENDS
;INDEX ﾄﾞﾗｲﾊﾞｱﾗｰﾑ ｴﾗｰ42 / Index Driver Alarm Detaction.  Error42 Output.
;
LD R2103                 ; ｲﾝﾃﾞｯｸｽ電源ON
AND R1102                ; ｶﾊﾞｰ閉確認
AND R1101                ; ﾗｲﾄｶｰﾃﾝ
AND R1108                ; INDEX ｻｰﾓｽﾀｯﾄ
LDB R1106                ; INDEX Alarm1 正常=ON
ORB R1107                ; INDEX Alarm2 正常=ON
ANL
ANB @MR515               ; ﾋｰﾀｰ動作STｻｲｸﾙ停止中
TMR @11 #100             ; ﾄﾞﾗｲﾊﾞｱﾗｰﾑ検出ﾃﾞｨﾚｲ
LDP @T11                 ; ﾄﾞﾗｲﾊﾞｱﾗｰﾑ検出ﾃﾞｨﾚｲ
MPS
LDB R1106                ; INDEX Alarm1 正常=ON
ANB R1107                ; INDEX Alarm2 正常=ON
ORB R1106                ; INDEX Alarm1 正常=ON
ANL
SET @MR515               ; ﾋｰﾀｰ動作STｻｲｸﾙ停止中
CON
SET @MR512               ; ﾄﾞﾗｲﾊﾞｱﾗｰﾑ検出
MPP
LD R1106                 ; INDEX Alarm1 正常=ON
ANB R1107                ; INDEX Alarm2 正常=ON
ANL
SET R42210               ; INDEX非常停止遮断
STG @MR512               ; ﾄﾞﾗｲﾊﾞｱﾗｰﾑ検出
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
RES MR2103               ; ｲﾝﾃﾞｯｸｽ電源ON
CON
ZRES MR2106 MR2115       ; ｲﾝﾃﾞｯｸｽ 1桁目  INDEX 4bit
CON
DW SW_REMOVE DM1203      ; ERROR_SW_REMOVE
CON
JMP @MR513
MOV #42 DM1200           ; 通常ｴﾗｰ番号
STG @MR513
AND R40010               ; ERROR
JMP @R514
STG @R514
ANB R40010               ; ERROR
RES @MR515               ; ﾋｰﾀｰ動作STｻｲｸﾙ停止中
CON
SET R40014               ; TRAP
CON
ENDS
END
ENDH
