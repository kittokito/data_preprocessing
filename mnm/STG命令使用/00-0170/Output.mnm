DEVICE:51
;MODULE:Output
;MODULE_TYPE:0
;出力回路 MR9000-MR9115
;Motor
LD CR2002                ; 常時ON
MPS
ANP MR5300               ; ｶｳﾝﾄINC
INC DM358
MRD
LD R2000                 ; ｽﾀｰﾄSW
AND R2002                ; ﾎﾟｰｽﾞSW
ANL
TMR #358 #35
MPP
AND T358
MOV #0 DM358
LDB MR6500               ; ｴﾗｰ中
AWNUM DM358
LDP MR9000               ; CW　Rotation
ORP R2004                ; CW　RotationSW
OR R500                  ; CW　Rotation
LD MR9000                ; CW　Rotation
OR R2004                 ; CW　RotationSW
ANL
AND R2001                ; ｽﾄｯﾌﾟSW
OUT R500                 ; CW　Rotation
LDP MR9001               ; CCW　Rotation
ORP R2005
OR R501                  ; CCW　Rotation
LD MR9001                ; CCW　Rotation
OR R2005
ANL
AND R2001                ; ｽﾄｯﾌﾟSW
OUT R501                 ; CCW　Rotation
LD MR3501                ; 原点復帰中
OR MR5501                ; 自動運転中
OR MR8501                ; ステップ運転中
OR MR3011                ; SS-ﾌｨﾙﾑJOG送り
OR MR3012                ; SS-ﾌｨﾙﾑ送り
OR MR3012                ; SS-ﾌｨﾙﾑ送り
LDB MR3012               ; SS-ﾌｨﾙﾑ送り
AND R502                 ; A_W_OFF
AND MR3012               ; SS-ﾌｨﾙﾑ送り
ORL
OUB R502                 ; A_W_OFF
;Heter Lamp
LDB MR6500               ; ｴﾗｰ中
OUT R503                 ; Heater Power ON
;Cover
LD MR9004                ; Cover Open
OUT R504                 ; Cover Open
;TMR
LD MR9005                ; TMR1 RESET
@RES MR9006              ; TMR1 SET
CON
ANB R506                 ; TMR1 SET
OUT R505                 ; TMR1 RESET
LD MR9006                ; TMR1 SET
@RES MR9005              ; TMR1 RESET
CON
ANB R505                 ; TMR1 RESET
OUT R506                 ; TMR1 SET
;Lamp
LD MR6500                ; ｴﾗｰ中
OUT R507                 ; Error Reset Lamp
LD MR3010                ; AUTO
LD MR3100                ; 自動運転起動可
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
LD MR5501                ; 自動運転中
LDB MR6502               ; ｼｰｹﾝｽSTOP
LD MR6502                ; ｼｰｹﾝｽSTOP
AND MR6505               ; ｼｰｹﾝｽSTOP完了
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
ORL
ANL
ORL
ANL
LD MR3013                ; SS-STEP
LD MR8503                ; 1ｽﾃｯﾌﾟ動作完了
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
LD MR8501                ; ステップ運転中
ANB MR8503               ; 1ｽﾃｯﾌﾟ動作完了
ORL
LD MR3101                ; STEP運転起動可
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
ORL
ANL
ORL
LDB MR3502               ; 原点復帰完了FLG
LD CR2006                ; 1sｸﾛｯｸﾊﾟﾙｽ
LD MR3010                ; AUTO
OR MR3013                ; SS-STEP
ANL
OR MR3501                ; 原点復帰中
ANL
ORL
LD MR3014                ; SS-溶着
LD MR8503                ; 1ｽﾃｯﾌﾟ動作完了
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
LD MR8101                ; SS-溶着中
ANB MR8503               ; 1ｽﾃｯﾌﾟ動作完了
ORL
ANL
ORL
LD MR3015                ; SS-ｼｰﾄ切断ﾓｰﾄﾞ
LD MR8503                ; 1ｽﾃｯﾌﾟ動作完了
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
LD MR8201                ; SS-ｼｰﾄ切断動作中
ANB MR8503               ; 1ｽﾃｯﾌﾟ動作完了
ORL
ANL
ORL
OUT R4000                ; ｽﾀｰﾄswﾗﾝﾌﾟ
LD MR3010                ; AUTO
LD MR5501                ; 自動運転中
AND MR6502               ; ｼｰｹﾝｽSTOP
LDB MR6505               ; ｼｰｹﾝｽSTOP完了
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR MR6505                ; ｼｰｹﾝｽSTOP完了
ANL
LD MR3502                ; 原点復帰完了FLG
ANB MR5501               ; 自動運転中
AND MR3000               ; 原点位置１
ANB MR3001               ; 起動条件OK
ANB MR3501               ; 原点復帰中
ORL
ANL
LDB MR3502               ; 原点復帰完了FLG
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
LD MR3010                ; AUTO
OR MR3013                ; SS-STEP
ANL
ANB MR3501               ; 原点復帰中
ORL
OUT R4001                ; ﾎﾟｰｽﾞswﾗﾝﾌﾟ
;ワークセット治具前後
;
LD MR9102                ; ワークセット治具前後　前進
@RES MR9103              ; ワークセット治具前後　後退
CON
ANB R4003                ; ワークセット治具前後　後退
OUT R4002                ; ワークセット治具前後　前進
LD MR9103                ; ワークセット治具前後　後退
@RES MR9102              ; ワークセット治具前後　前進
CON
ANB R4002                ; ワークセット治具前後　前進
OUT R4003                ; ワークセット治具前後　後退
;カッター前後
;
LD MR9104                ; カッター前後　前進
@RES MR9105              ; カッター前後　後退
CON
ANB R4005                ; カッター前後　後退
OUT R4004                ; カッター前後　前進
LD MR9105                ; カッター前後　後退
@RES MR9104              ; カッター前後　前進
CON
ANB R4004                ; カッター前後　前進
OUT R4005                ; カッター前後　後退
;溶着ヘッド上下
;
LD MR9106                ; 溶着ヘッド上下　下降
AND T26                  ; 溶着後シートだれ防止上下　上昇限
ANB T18                  ; 溶着ヘッド上下　ｾﾝｻｰｴﾗｰ
OUT R4006                ; 溶着ヘッド上下　下降
;穴開けヘッド上下　下降
;
LD MR9107                ; 穴開けヘッド上下　下降
AND R4006                ; 溶着ヘッド上下　下降
OUT R4007                ; 穴開けヘッド上下　下降
;溶着前シートだれ防止上下
LD MR9108                ; 溶着前シートだれ防止上下　上昇
OUT R4008                ; 溶着前シートだれ防止上下　上昇
;溶着後シートだれ防止上下　下降
LD MR9109                ; 溶着後シートだれ防止上下　下降
OUT R4009                ; 溶着後シートだれ防止上下　下降
;ワーククランプ　前進
LD MR9110                ; ワーククランプ　前進
@RES MR9111              ; ワーククランプ　後退
CON
ANB R4012                ; ワーククランプ　後退
OUT R4010                ; ワーククランプ　前進
LD MR9111                ; ワーククランプ　後退
@RES MR9110              ; ワーククランプ　前進
CON
ANB R4010                ; ワーククランプ　前進
OUT R4012                ; ワーククランプ　後退
;ブザー
LD MR6500                ; ｴﾗｰ中
OR MR11000               ; 急停止
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
LD R2000                 ; ｽﾀｰﾄSW
LDB MR3000               ; 原点位置１
ORB MR3001               ; 起動条件OK
ANL
ORL
LD MR9007                ; 溶着完了　取出し警告ﾌﾞｻﾞｰON
AND MR006                ; FLK200
ORL
LD CR2003                ; 常時OFF
AND MR6400               ; 温度NG
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
ORL
OUT R4011                ; ﾌﾞｻﾞｰ
LDB R2001                ; ｽﾄｯﾌﾟSW
@RES CR3009              ; X軸ﾊﾟﾙｽ出力中/緊急停止
LDP R2001                ; ｽﾄｯﾌﾟSW
@RES CR3007              ; X軸ｴﾗｰ/ｴﾗｰｸﾘｱ
LDP R2001                ; ｽﾄｯﾌﾟSW
RES MR9106               ; 溶着ヘッド上下　下降
END
ENDH
