DEVICE:51
;MODULE:SS-ｼｰﾄ切断
;MODULE_TYPE:0
STG MR8200               ; SS-ｼｰﾄ切断ﾓｰﾄﾞ
SET MR8201               ; SS-ｼｰﾄ切断動作中
CON
JMP @MR000
STG @MR000
RES MR9004               ; Cover Open
CON
MPS
AND @T10                 ; 遅延
JMP @MR002
MPP
TMR @10 #5               ; 遅延
STG @MR002
MPS
AND T40                  ; ワーク有無検出（有）
SET @MR501               ; ワーク有無検出（有）STG
CON
ENDS
MPP
AND T41                  ; ワーク有無検出（無）
SET @MR502               ; ワーク有無検出（無）STG
CON
ENDS
STG @MR501               ; ワーク有無検出（有）STG
SET MR9102               ; ワークセット治具前後　前進
CON
SET MR9108               ; 溶着前シートだれ防止上下　上昇
CON
JMP @MR003
STG @MR003
AND T10                  ; ワークセット治具前後　前進限
AND T22                  ; 溶着前シートだれ防止上下　上昇限
TMR @0 #2
CON
AND @T0
JMP @MR004
STG @MR004
SET MR9110               ; ワーククランプ　前進
CON
JMP @MR007
STG @MR007
AND T28                  ; ワーククランプ　前進限
SET MR9109               ; 溶着後シートだれ防止上下　下降
CON
JMP @MR008
STG @MR008
AND T25                  ; 溶着後シートだれ防止上下　下降限
JMP @MR009
STG @MR009
@SET @MR505              ; ﾌｨﾙﾑ送り　STEP2(位置決め)
CON
JMP @MR015
STG @MR015
AND CR3006               ; X軸位置決め完了ﾘﾚｰ
RES @MR505               ; ﾌｨﾙﾑ送り　STEP2(位置決め)
CON
JMP @MR100
STG @MR100
@SET @MR503              ; ﾌｨﾙﾑ送り　STEP1（JOG）
CON
TMR @5 #10
CON
AND @T5
RES MR9108               ; 溶着前シートだれ防止上下　上昇
CON
JMP @MR102
STG @MR102
AND MR113                ; ｼｰﾄ検出
RES @MR503               ; ﾌｨﾙﾑ送り　STEP1（JOG）
CON
AND T23                  ; 溶着前シートだれ防止上下　下降限
JMP @MR103
STG @MR103
RES MR9109               ; 溶着後シートだれ防止上下　下降
CON
AND T26                  ; 溶着後シートだれ防止上下　上昇限
JMP @MR106
STG @MR106
SET MR9111               ; ワーククランプ　後退
CON
AND T29                  ; ワーククランプ　後退限
JMP @MR107
STG @MR107
SET MR9110               ; ワーククランプ　前進
CON
AND T28                  ; ワーククランプ　前進限
JMP @MR108
STG @MR108
SET MR9108               ; 溶着前シートだれ防止上下　上昇
CON
AND T22                  ; 溶着前シートだれ防止上下　上昇限
JMP @MR208
STG @MR208
SET MR9104               ; カッター前後　前進
CON
AND T13                  ; カッター前後　前進限
JMP @MR212
STG @MR212
SET MR9105               ; カッター前後　後退
CON
AND T14                  ; カッター前後　後退限
JMP @MR300
STG @MR300
RES MR9108               ; 溶着前シートだれ防止上下　上昇
CON
JMP @MR301
STG @MR301
AND T23                  ; 溶着前シートだれ防止上下　下降限
JMP @MR302
STG @MR302
SET MR9111               ; ワーククランプ　後退
CON
JMP @MR303
STG @MR303
AND T29                  ; ワーククランプ　後退限
SET @MR502               ; ワーク有無検出（無）STG
CON
ENDS
STG @MR502               ; ワーク有無検出（無）STG
SET MR9103               ; ワークセット治具前後　後退
CON
ANB R2000                ; ｽﾀｰﾄSW
JMP @MR312
STG @MR312
AND T11                  ; ワークセット治具前後　後退限
OUT MR8503               ; 1ｽﾃｯﾌﾟ動作完了
CON
ANP R2000                ; ｽﾀｰﾄSW
JMP @MR403
STG @MR403
SET MR9004               ; Cover Open
CON
JMP @MR404
STG @MR404
RES MR8201               ; SS-ｼｰﾄ切断動作中
CON
SET MR8202               ; SS-ｼｰﾄ切断動作完了
CON
ENDS
;停止センサがＯＮするまで、ＪＯＧ運転
LDB CR2002               ; 常時ON
LD @MR503                ; ﾌｨﾙﾑ送り　STEP1（JOG）
ANB CR3303               ; ｱﾗｰﾑ3
LDB CR2002               ; 常時ON
JOGX
;僅かにバックさせる
;＃1=　+800
;＃2=
;＃3=
;＃4=
;＃5=
;＃6=
LD @MR504                ; ﾌｨﾙﾑ送り　STEP2（微戻り）
PLSX #1
LD @MR505                ; ﾌｨﾙﾑ送り　STEP2(位置決め)
PLSX #2
LD @MR503                ; ﾌｨﾙﾑ送り　STEP1（JOG）
TMR #55 #30              ; 送り時間監視ﾀｲﾏ(STEP)
CON
AND T55                  ; 送り時間監視ﾀｲﾏ(STEP)
SET MR503                ; ﾌｨﾙﾑ送り　監視異常
CON
RES @MR503               ; ﾌｨﾙﾑ送り　STEP1（JOG）
LDF MR8501               ; ステップ運転中
OR MR11000               ; 急停止
ZRES @MR000 @MR515
CON
ZRES @MR501 @MR505       ; ワーク有無検出（有）STG  ﾌｨﾙﾑ送り　STEP2(位置決め)
END
ENDH
