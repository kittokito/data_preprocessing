DEVICE:53
;MODULE:Group1_Task4
;MODULE_TYPE:0
;SCRIPT_TYPE:
;OneSystem Main-Module
;
;-----------------------------------------
;ModuleName	:	Group1_Task4
;ModuleType	:	Main Module
;Line		:　	μTFP-2ﾎﾙﾀﾞｰAssyﾗｲﾝ
;Cell		:	3-4(ｶｼﾒ溶接機)
;Function	:	AUTO(Main1)ﾒｲﾝｽﾗｲﾀﾞｰ（R17）上流側　：AUTO(Main2)ﾒｲﾝｽﾗｲﾀﾞｰ（R18）下流側
;-----------------------------------------
;<<Task LocalDevice>>
;/*項目			/*割付ｴﾘｱ				/*備考
;---------------------------------------------------------------------			
;Emergency		@MR000〜@MR015			Emergency処理時RESET禁止ｴﾘｱ
;Free			@MR100〜@MR915			ﾕｰｻﾞｰﾌﾘｰｴﾘｱ
;HOME			@MR1000〜@MR1515		HOME動作時使用ｴﾘｱ
;MAINTENANCE		@MR2000〜@MR2915		MAINTE動作時使用ｴﾘｱ
;AUTO(Main1)		@MR3000〜@MR3915		AUTO(Main1)動作時使用ｴﾘｱ
;	(Main2)		@MR4000〜@MR4915		AUTO(Main2)動作時使用ｴﾘｱ
;SubRoutine		@MR5000〜@MR6415		ｻﾌﾞﾙｰﾁﾝ共通動作使用ｴﾘｱ
;----------------------------------------------------------------------
;<h1/>Device_Init/ﾃﾞﾊﾞｲｽ初期化
;[内容]
;・非常停止、優先ｴﾗｰ発生時に初期化したいﾃﾞﾊﾞｲｽを指定して下さい
;※本Taskで使用するﾛｰｶﾙﾃﾞﾊﾞｲｽなど
;※STG〜JMPにて使用しているﾃﾞﾊﾞｲｽは必須
LDP R46104               ; _非常停止中　ﾓｰﾄﾞﾌﾗｸﾞ
ZRES @MR100 @MR6401      ; Task0 ERROR  ***_Sub実行完了
;<h1/>Task_Monitor/ﾀｽｸﾓﾆﾀｰ
LD CR2002                ; 常時ON
FLIK #50 #50 @MR000
;ON STG Main1
;TYPE EM632.U,EM633.U,@MR000.U,@MR3000.U
;
;FOR EM632 = EM632 TO 160 STEP 16
;	IF @MR3000:EM632 <> 0 THEN
;		BREAK
;	END IF	
;NEXT
;	
;IF EM632 < 160 THEN
;	EM633 = (EM632 / 16) * 100 + DMX(@MR3000:EM632) + #3000
;END IF		
;		
;EM632 = EM632 + 16		
;IF EM632 > 160 THEN		
;	EM632 = 0		
;END IF
LDP @MR000
NCJ #1000
;TYPE EM632.U,EM633.U,@MR000.U,@MR3000.U
;
;FOR EM632 = EM632 TO 160 STEP 16
;
LD CR2002                ; 常時ON
MOV EM632 EM632          ; Task4 Main1@MR  Task4 Main1@MR
LABEL #2000
LD> EM632 #160           ; Task4 Main1@MR
CJ #2001
;	IF @MR3000:EM632 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM632                ; Task4 Main1@MR
CON
EXT
CON
STA.L Z12
LD<> @MR3000:Z12 #0      ; AUTO Main1
NCJ #2002
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2003
;	END IF	
;
LABEL #2002
;NEXT
;
LD CR2002                ; 常時ON
LDA EM632                ; Task4 Main1@MR
CON
ADD #16
CON
STA EM632                ; Task4 Main1@MR
LDB CR2009               ; 演算結果が負
CJ #2000
LABEL #2003
LABEL #2001
;IF EM632 < 160 THEN
;
LD< EM632 #160           ; Task4 Main1@MR
NCJ #2004
;	EM633 = (EM632 / 16) * 100 + DMX(@MR3000:EM632) + #3000
;
LD CR2002                ; 常時ON
LDA EM632                ; Task4 Main1@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR3000:Z12          ; AUTO Main1
CON
DMX
CON
STA @VM0
CON
LDA EM632                ; Task4 Main1@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM1
CON
LDA @VM0
CON
EXT
CON
ADD.L @VM1
CON
ADD.L +3000
CON
STA EM633                ; Task4 Main1@MR
;END IF		
;
LABEL #2004
;EM632 = EM632 + 16		
;
LD CR2002                ; 常時ON
LDA EM632                ; Task4 Main1@MR
CON
EXT
CON
ADD.L +16
CON
STA EM632                ; Task4 Main1@MR
;IF EM632 > 160 THEN		
;
LD> EM632 #160           ; Task4 Main1@MR
NCJ #2005
;	EM632 = 0		
;
LD CR2002                ; 常時ON
MOV #0 EM632             ; Task4 Main1@MR
;END IF
LABEL #2005
LABEL #1000
;
;ON STG Main2
;TYPE EM634.U,EM635.U,@MR4000.U
;
;FOR EM634 = EM634 TO 80 STEP 16
;	IF @MR4000:EM634 <> 0 THEN
;		BREAK
;	END IF	
;NEXT	
;
;IF EM634 < 80 THEN
;	EM635 = (EM634 / 16) * 100 + DMX(@MR4000:EM634) + #4000
;END IF
;
;EM634 = EM634 + 16		
;
;IF EM634 > 80 THEN
;	EM634 = 0	
;END IF
LDP @MR000
NCJ #1001
;TYPE EM634.U,EM635.U,@MR4000.U
;
;FOR EM634 = EM634 TO 80 STEP 16
;
LD CR2002                ; 常時ON
MOV EM634 EM634          ; Task4 Main2@MR  Task4 Main2@MR
LABEL #2006
LD> EM634 #80            ; Task4 Main2@MR
CJ #2007
;	IF @MR4000:EM634 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM634                ; Task4 Main2@MR
CON
EXT
CON
STA.L Z12
LD<> @MR4000:Z12 #0      ; AUTO Main2
NCJ #2008
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2009
;	END IF	
;
LABEL #2008
;NEXT	
;
LD CR2002                ; 常時ON
LDA EM634                ; Task4 Main2@MR
CON
ADD #16
CON
STA EM634                ; Task4 Main2@MR
LDB CR2009               ; 演算結果が負
CJ #2006
LABEL #2009
LABEL #2007
;IF EM634 < 80 THEN
;
LD< EM634 #80            ; Task4 Main2@MR
NCJ #2010
;	EM635 = (EM634 / 16) * 100 + DMX(@MR4000:EM634) + #4000
;
LD CR2002                ; 常時ON
LDA EM634                ; Task4 Main2@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR4000:Z12          ; AUTO Main2
CON
DMX
CON
STA @VM3
CON
LDA EM634                ; Task4 Main2@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM4
CON
LDA @VM3
CON
EXT
CON
ADD.L @VM4
CON
ADD.L +4000
CON
STA EM635                ; Task4 Main2@MR
;END IF
;
LABEL #2010
;EM634 = EM634 + 16		
;
LD CR2002                ; 常時ON
LDA EM634                ; Task4 Main2@MR
CON
EXT
CON
ADD.L +16
CON
STA EM634                ; Task4 Main2@MR
;IF EM634 > 80 THEN
;
LD> EM634 #80            ; Task4 Main2@MR
NCJ #2011
;	EM634 = 0	
;
LD CR2002                ; 常時ON
MOV #0 EM634             ; Task4 Main2@MR
;END IF
LABEL #2011
LABEL #1001
;
;ON STG SubRoutine
;TYPE EM636.U,EM637.U,@MR4500.U
;	
;FOR EM636 = EM636 TO 320 STEP 16
;	IF @MR4500:EM636 <> 0 THEN
;		BREAK
;	END IF	
;NEXT
;		
;IF EM636 < 320 THEN
;	EM637 = (EM636 / 16) * 100 + DMX(@MR4500:EM636) + #4500
;END IF
;		
;EM636 = EM636 + 16	
;
;IF EM636 > 320 THEN
;   EM636 = 0	
;END IF
LDP @MR000
NCJ #1002
;TYPE EM636.U,EM637.U,@MR4500.U
;
;FOR EM636 = EM636 TO 320 STEP 16
;
LD CR2002                ; 常時ON
MOV EM636 EM636          ; Task4 Sub@MR  Task4 Sub@MR
LABEL #2012
LD> EM636 #320           ; Task4 Sub@MR
CJ #2013
;	IF @MR4500:EM636 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM636                ; Task4 Sub@MR
CON
EXT
CON
STA.L Z12
LD<> @MR4500:Z12 #0
NCJ #2014
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2015
;	END IF	
;
LABEL #2014
;NEXT
;
LD CR2002                ; 常時ON
LDA EM636                ; Task4 Sub@MR
CON
ADD #16
CON
STA EM636                ; Task4 Sub@MR
LDB CR2009               ; 演算結果が負
CJ #2012
LABEL #2015
LABEL #2013
;IF EM636 < 320 THEN
;
LD< EM636 #320           ; Task4 Sub@MR
NCJ #2016
;	EM637 = (EM636 / 16) * 100 + DMX(@MR4500:EM636) + #4500
;
LD CR2002                ; 常時ON
LDA EM636                ; Task4 Sub@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR4500:Z12
CON
DMX
CON
STA @VM6
CON
LDA EM636                ; Task4 Sub@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM7
CON
LDA @VM6
CON
EXT
CON
ADD.L @VM7
CON
ADD.L +4500
CON
STA EM637                ; Task4 Sub@MR
;END IF
;
LABEL #2016
;EM636 = EM636 + 16	
;
LD CR2002                ; 常時ON
LDA EM636                ; Task4 Sub@MR
CON
EXT
CON
ADD.L +16
CON
STA EM636                ; Task4 Sub@MR
;IF EM636 > 320 THEN
;
LD> EM636 #320           ; Task4 Sub@MR
NCJ #2017
;   EM636 = 0	
;
LD CR2002                ; 常時ON
MOV #0 EM636             ; Task4 Sub@MR
;END IF
LABEL #2017
LABEL #1002
;
;<h1/>Task_Init/ﾀｽｸ初期化
;[本STG内容]
;・本Task起動時に必要な初期化処理を記述して下さい
;・起動Taskの全Init処理終了後、Task_StartのSTGが起動します
STG LR804                ; _Grp1_Task4_Init.STG
ENDS
;<h1/>Task_Start/ﾀｽｸ開始
;[本STG内容]
;・Task起動後、以下運転ﾓｰﾄﾞに従い、各STGにJMPします
;【HOME】	→	LR5200
;【AUTO】	→	LR5400
;【MAINTE】	→	LR5600
;・本STGは追記、修正不要です
STG LR404                ; _Grp1_Task4_Start.STG
MPS
AND R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5204               ; _Grp1_Task4_HOME.STG
MRD
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5404               ; _Grp1_Task4_AUTO.STG
MPP
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5604               ; _Grp1_Task4_MAINTE.STG
;<h1/>Task_Finish/ﾀｽｸ終了
;[本STG内容]
;・各Taskの終了STGになります
;・運転ﾓｰﾄﾞに係わらず終了時は本STGを経由して終了して下さい
;・本STGは追記、修正不要です
STG LR604                ; _Grp1_Task4_Fin.STG
RES R41004               ; _Grp1_Task4_起動中ﾌﾗｸﾞ
CON
ENDS
;<h1/>HOME/原点復帰
;[本STG内容]
;・STG @MR1000の続きから各Taskの原点復帰動作を記述する
;・動作終了時は@MR1515にJMPする事
STG LR5204               ; _Grp1_Task4_HOME.STG
SET @MR1002              ; HOME中
CON
JMP @MR1000              ; HOME
STG @MR1000              ; HOME
MPS
ANB CR2002               ; 常時ON
JMP @MR1005
MPP
AND CR2002               ; 常時ON
JMP @MR1515              ; HOME END
STG @MR1005
MPS
ANB DM2000.6
RES MR1500
CON
ANB R1400
ANB R1401
MPS
ANB R1403
MPS
AND R1402
JMP @MR1006
MPP
ANB R1402
SET MR13603              ; ﾑﾈｶﾀ      異常出力_UT3
CON
ENDS
MPP
AND R1403
SET MR1502
CON
JMP @MR1007
MPP
AND DM2000.6
JMP @MR1101
STG @MR1007
ANB R1403
RES MR1502
CON
TMH #704 #10
CON
AND T704
JMP @MR1005
;溶着中ﾜｰｸの判断
STG @MR1006
MPS
LD R4615                 ; 基板搬送 基板上下 上限
ANB R4614                ; 基板搬送 基板上下 下限
ANL
MPS
LDB DM11215.3            ; RB17 ｶｼﾒ中 記憶FLG
LD DM11215.3             ; RB17 ｶｼﾒ中 記憶FLG
AND DM11215.4            ; RB17 ｶｼﾒ完了 記憶FLG
ORL
ANL
JMP @MR1100              ; ★
MPP
LD DM11215.3             ; RB17 ｶｼﾒ中 記憶FLG
ANB DM11215.4            ; RB17 ｶｼﾒ完了 記憶FLG
ANL
JMP @MR1008
MPP
LD R4614                 ; 基板搬送 基板上下 下限
ANB R4615                ; 基板搬送 基板上下 上限
ANL
MPS
LDB DM11216.3            ; RB18 ｶｼﾒ中 記憶FLG
LD DM11216.3             ; RB18 ｶｼﾒ中 記憶FLG
AND DM11216.4            ; RB18 ｶｼﾒ完了 記憶FLG
ORL
ANL
JMP @MR1100              ; ★
MPP
LD DM11216.3             ; RB18 ｶｼﾒ中 記憶FLG
ANB DM11216.4            ; RB18 ｶｼﾒ完了 記憶FLG
ANL
JMP @MR1008
;
STG @MR1008
MPS
LDB DM10595.3            ; ALM_異常 RB12
ANB DM10595.7            ; ALM 軽故障 RB12
AND DM10595.14           ; PWR_準備完了 RB12
ANB DM10595.15           ; MGS_非常停止 RB12
ANL
JMP @MR1009
MPP
AND DM10595.3            ; ALM_異常 RB12
SET DM10795.3            ; RES(ﾘｾｯﾄ) RB12
CON
JMP @MR1008
STG @MR1009
ANB R36110               ; During RB12 HOME
RES DM10779.3            ; RES(ﾘｾｯﾄ) RB10
CON
SET DM10779.4            ; SON(ｻｰﾎﾞON指令) RB10
CON
JMP @MR1010
STG @MR1010
AND DM10595.4            ; SV_ｻｰﾎﾞON中 RB12
SET MR1501
CON
JMP @MR1011
STG @MR1011
AND R1401
AND MR3011               ; RB12 起動IL　ON=起動可能
RES MR18411              ; 【sw1】RB12_HOME_ALM
CON
RES MR1501
CON
SET R36108               ; RB12 HOME
CON
JMP @MR1012
STG @MR1012
ANB R36110               ; During RB12 HOME
AND R36109               ; RB12 HOME END
MPS
LDB R36103               ; RB12Alarm
ANB MR18411              ; 【sw1】RB12_HOME_ALM
ANL
RES R36109               ; RB12 HOME END
CON
JMP @MR1013
MPP
AND R36103               ; RB12Alarm
@SET MR13212             ; RB12原点復帰ｴﾗｰ
CON
AND MR18411              ; 【sw1】RB12_HOME_ALM
RES R36109               ; RB12 HOME END
CON
JMP @MR1011
STG @MR1013
ANB R1403
AND R1402
JMP @MR1014
STG @MR1014
JMP @MR1100              ; ★
;RB12原点復帰
STG @MR1100              ; ★
MPS
LDB DM10595.3            ; ALM_異常 RB12
ANB DM10595.7            ; ALM 軽故障 RB12
AND DM10595.14           ; PWR_準備完了 RB12
ANB DM10595.15           ; MGS_非常停止 RB12
ANL
JMP @MR1101
MPP
AND DM10595.3            ; ALM_異常 RB12
SET DM10795.3            ; RES(ﾘｾｯﾄ) RB12
CON
JMP @MR1100              ; ★
STG @MR1101
ANB R36110               ; During RB12 HOME
SET DM10795.4            ; SON(ｻｰﾎﾞON指令) RB12
CON
JMP @MR1102
STG @MR1102
AND DM10595.4            ; SV_ｻｰﾎﾞON中 RB12
ANB R36108               ; RB12 HOME
ANB R36110               ; During RB12 HOME
MPS
LDB DM10595.1            ; HEND_原復完了 RB12
OR MR18411               ; 【sw1】RB12_HOME_ALM
AND MR3011               ; RB12 起動IL　ON=起動可能
ANL
SET R36108               ; RB12 HOME
CON
JMP @MR1103              ; ■■
MPP
LD DM10595.1             ; HEND_原復完了 RB12
ANB MR18411              ; 【sw1】RB12_HOME_ALM
ANL
JMP @MR1110
STG @MR1103              ; ■■
AND R36110               ; During RB12 HOME
RES MR18411              ; 【sw1】RB12_HOME_ALM
CON
JMP @MR1104
STG @MR1104
ANB R36110               ; During RB12 HOME
AND R36109               ; RB12 HOME END
MPS
LDB R36103               ; RB12Alarm
ANB MR18411              ; 【sw1】RB12_HOME_ALM
ANL
RES R36109               ; RB12 HOME END
CON
JMP @MR1110
MPP
AND R36103               ; RB12Alarm
@SET MR13212             ; RB12原点復帰ｴﾗｰ
CON
AND MR18411              ; 【sw1】RB12_HOME_ALM
RES R36109               ; RB12 HOME END
CON
JMP @MR1102
;
STG @MR1110
TMH #737 #3              ; RB12
CON
AND T737                 ; RB12
JMP @MR1111
STG @MR1111
RES MR11211              ; 【SW1_Retry】ALM_RES_RB12
CON
ANB R36100               ; RB12 MOVE
ANB R36102               ; During RB12 MOVE
MPS
LD= #1 EM1322            ; RB12Target Pos
AND MR3011               ; RB12 起動IL　ON=起動可能
ANL
SET R36100               ; RB12 MOVE
CON
JMP @MR1112
MPP
DW #1 EM1322             ; RB12Target Pos
STG @MR1112
AND R36101               ; RB12 MOVE END
MPS
LDB R36103               ; RB12Alarm
AND T2210                ; RB12 Pos.1
ANPB R36101              ; RB12 MOVE END
ANB MR11211              ; 【SW1_Retry】ALM_RES_RB12
ANL
RES R36101               ; RB12 MOVE END
CON
JMP @MR1113
MPP
AND R36103               ; RB12Alarm
@SET MR16812             ; RB12ｴﾗｰ検出
CON
AND MR11211              ; 【SW1_Retry】ALM_RES_RB12
RES R36101               ; RB12 MOVE END
CON
JMP @MR1111
STG @MR1113
MPS
ANB MR4609               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退限err
SET MR7609               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退
CON
RES MR7608               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進
CON
AND R4609                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退限
ANB R4608                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進限
JMP @MR1209
MPP
LD MR4609                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退限err
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR1209
MPS
ANB MR4703               ; -err
SET MR7703               ; -
CON
RES MR7702               ; -
CON
AND R4703                ; -
ANB R4702                ; -
JMP @MR1210
MPP
LD MR4703                ; -err
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR1210
JMP @MR1211
STG @MR1211
JMP @MR1212
STG @MR1212
JMP @MR1213
;
STG @MR1213
MPS
ANB MR4611               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 左右 左限(上流側)e
RES MR7610               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 左右 右(下流)
CON
AND R4611                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 左右 左限(上流側)
ANB R4610                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 左右 右限(下流側)
JMP @MR1106
MPP
LD MR4611                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 左右 左限(上流側)e
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
ANL
SET @MR1900              ; Main1 HALT許可
;
STG @MR1106
MPS
ANB MR4209               ; M/S1 COFｶﾞｲﾄﾞ上下 上限err
RES MR7700               ; 基板搬送 COF挿入確認ｾﾝｻ上下 下降
CON
AND R4209                ; M/S1 COFｶﾞｲﾄﾞ上下 上限
ANB R4208                ; M/S1 COFｶﾞｲﾄﾞ上下 下限
JMP @MR1107
MPP
LD MR4209                ; M/S1 COFｶﾞｲﾄﾞ上下 上限err
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
ANL
SET @MR1900              ; Main1 HALT許可
;
STG @MR1107
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANB R41000               ; _Grp1_Task0_起動中ﾌﾗｸﾞ
AND T2060                ; RB4 Pos.1　作業原点高さ
ANB R41001               ; _Grp1_Task1_起動中ﾌﾗｸﾞ
ANB R41005               ; _Grp1_Task5_起動中ﾌﾗｸﾞ
AND T2100                ; RB6 Pos.1 作業原点
AND T2210                ; RB12 Pos.1
ANL
JMP @MR1108
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR1108
JMP @MR1109
STG @MR1109
LD T2100                 ; RB6 Pos.1 作業原点
OR T2101                 ; RB6 Pos.2 搬送高さ
ANL
LD T2060                 ; RB4 Pos.1　作業原点高さ
OR T2061                 ; RB4 Pos.2　搬送高さ
ANL
JMP @MR1114
;RB17原点復帰
STG @MR1114
MPS
ANB MR4607               ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 開限err
SET MR7613               ; 基板搬送 COFｶﾞｲﾄﾞ上下 上昇
CON
RES MR7612               ; 基板搬送 COFｶﾞｲﾄﾞ上下 下降
CON
AND R4607                ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 開限
ANB R4606                ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 閉限
JMP @MR1200
MPP
LD MR4607                ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 開限err
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR1200
MPS
LDB DM10635.3            ; ALM_異常 RB17
ANB DM10635.7            ; ALM 軽故障 RB17
AND DM10635.14           ; PWR_準備完了 RB17
ANB DM10635.15           ; MGS_非常停止 RB17
ANL
JMP @MR1201
MPP
AND DM10635.3            ; ALM_異常 RB17
SET DM10835.3            ; RES(ﾘｾｯﾄ) RB17
CON
JMP @MR1200
STG @MR1201
ANB R36610               ; During RB17 HOME
RES DM10835.3            ; RES(ﾘｾｯﾄ) RB17
CON
SET DM10835.4            ; SON(ｻｰﾎﾞON指令) RB17
CON
JMP @MR1202
STG @MR1202
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
AND DM10635.4            ; SV_ｻｰﾎﾞON中 RB17
ANB R36608               ; RB17 HOME
ANB R36610               ; During RB17 HOME
ANL
MPS
LDB DM10635.1            ; HEND_原復完了 RB17
OR MR18500               ; 【sw1】RB17_HOME_ALM
AND MR3100               ; RB17 起動IL　ON=起動可能
ANL
SET R36608               ; RB17 HOME
CON
JMP @MR1203
MPP
LD DM10635.1             ; HEND_原復完了 RB17
ANB MR18500              ; 【sw1】RB17_HOME_ALM
ANL
JMP @MR1205
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR1203
AND R36610               ; During RB17 HOME
RES MR18500              ; 【sw1】RB17_HOME_ALM
CON
JMP @MR1204
STG @MR1204
ANB R36610               ; During RB17 HOME
AND R36609               ; RB17 HOME END
MPS
LDB R36603               ; RB17Alarm
ANB MR18500              ; 【sw1】RB17_HOME_ALM
ANL
RES R36609               ; RB17 HOME END
CON
JMP @MR1205
MPP
AND R36603               ; RB17Alarm
@SET MR13301             ; RB17原点復帰ｴﾗｰ
CON
AND MR18500              ; 【sw1】RB17_HOME_ALM
RES R36609               ; RB17 HOME END
CON
JMP @MR1202
;
STG @MR1205
ANPB @MR1205
TMH #738 #10             ; RB17
CON
AND T738                 ; RB17
JMP @MR1206
STG @MR1206
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
RES MR11300              ; 【SW1_Retry】ALM_RES_RB17
CON
ANB R36600               ; RB17 MOVE
ANB R36602               ; During RB17 MOVE
ANB R36601               ; RB17 MOVE END
MPS
LD= #1 EM1332            ; RB17Target Pos
AND MR3100               ; RB17 起動IL　ON=起動可能
ANL
SET R36600               ; RB17 MOVE
CON
JMP @MR1207
MPP
DW #1 EM1332             ; RB17Target Pos
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR1207
AND R36601               ; RB17 MOVE END
MPS
LDB R36603               ; RB17Alarm
AND T2300                ; RB17 Pos.1
ANB MR11300              ; 【SW1_Retry】ALM_RES_RB17
ANL
RES R36601               ; RB17 MOVE END
CON
JMP @MR1208
MPP
AND R36603               ; RB17Alarm
@SET MR16901             ; RB17ｴﾗｰ検出
CON
AND MR11300              ; 【SW1_Retry】ALM_RES_RB17
RES R36601               ; RB17 MOVE END
CON
JMP @MR1206
STG @MR1208
JMP @MR1300
;RB18原点復帰
STG @MR1215
MPS
ANB MR4711               ; -err
SET MR7713               ; -
CON
RES MR7712               ; -
CON
AND R4711                ; -
ANB R4710                ; -
JMP @MR1300
MPP
LD MR4711                ; -err
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR1300
MPS
LDB DM10643.3            ; ALM_異常 RB18
ANB DM10643.7            ; ALM 軽故障 RB18
AND DM10643.14           ; PWR_準備完了 RB18
ANB DM10643.15           ; MGS_非常停止 RB18
ANL
JMP @MR1301
MPP
AND DM10643.3            ; ALM_異常 RB18
SET DM10843.3            ; RES(ﾘｾｯﾄ) RB18
CON
JMP @MR1300
STG @MR1301
ANB R36710               ; During RB18 HOME
RES DM10843.3            ; RES(ﾘｾｯﾄ) RB18
CON
SET DM10843.4            ; SON(ｻｰﾎﾞON指令) RB18
CON
JMP @MR1302
STG @MR1302
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
AND DM10643.4            ; SV_ｻｰﾎﾞON中 RB18
ANB R36708               ; RB18 HOME
ANB R36710               ; During RB18 HOME
ANL
MPS
LDB DM10643.1            ; HEND_原復完了 RB18
OR MR18501               ; 【sw1】RB18_HOME_ALM
AND MR3101               ; RB18 起動IL　ON=起動可能
ANL
SET R36708               ; RB18 HOME
CON
JMP @MR1303
MPP
LD DM10643.1             ; HEND_原復完了 RB18
ANB MR18501              ; 【sw1】RB18_HOME_ALM
ANL
JMP @MR1314
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR1303
AND R36710               ; During RB18 HOME
RES MR18501              ; 【sw1】RB18_HOME_ALM
CON
JMP @MR1304
STG @MR1304
ANB R36710               ; During RB18 HOME
AND R36709               ; RB18 HOME END
MPS
LDB R36703               ; RB18Alarm
ANB MR18501              ; 【sw1】RB18_HOME_ALM
ANL
RES R36709               ; RB18 HOME END
CON
JMP @MR1314
MPP
AND R36703               ; RB18Alarm
@SET MR13302             ; RB18原点復帰ｴﾗｰ
CON
AND MR18501              ; 【sw1】RB18_HOME_ALM
RES R36709               ; RB18 HOME END
CON
JMP @MR1302
;
STG @MR1314
ANPB @MR1314
TMH #739 #10             ; RB18
CON
AND T739                 ; RB18
JMP @MR1315
STG @MR1315
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
RES MR11301              ; 【SW1_Retry】ALM_RES_RB18
CON
ANB R36700               ; RB18 MOVE
ANB R36702               ; During RB18 MOVE
ANB R36701               ; RB18 MOVE END
MPS
LD= #1 EM1334            ; RB18Target Pos
AND MR3101               ; RB18 起動IL　ON=起動可能
ANL
SET R36700               ; RB18 MOVE
CON
JMP @MR1400
MPP
DW #1 EM1334             ; RB18Target Pos
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR1400
AND R36701               ; RB18 MOVE END
MPS
LDB R36703               ; RB18Alarm
AND T2320                ; RB18 Pos.1
ANB MR11301              ; 【SW1_Retry】ALM_RES_RB18
ANL
RES R36701               ; RB18 MOVE END
CON
JMP @MR1305
MPP
AND R36703               ; RB18Alarm
@SET MR16902             ; RB18ｴﾗｰ検出
CON
AND MR11301              ; 【SW1_Retry】ALM_RES_RB18
RES R36701               ; RB18 MOVE END
CON
JMP @MR1315
;【ｽﾗｲﾀﾞｰ5のﾜｰｸｽﾃｰﾀｽ】
;
;DM11215.0 : ﾍｯﾄﾞｻﾌﾞ有無（1:有 2:無)
;       .1 : ﾎﾙﾀﾞｰｻﾌﾞ組込中
;       .2 : ﾎﾙﾀﾞｰｻﾌﾞ組込完了
;       .3 : ｶｼﾒ中
;       .4 : ｶｼﾒ完了
;       
;       
;       .15：廃棄必要
;       
;       
;M_ｽﾗ5　↓
LD DM2001.12             ; 無条件 ﾜｰｸ 排出ｽﾗｲﾀﾞｰ上
OUT @MR1309              ; 無条件 ﾜｰｸ排出FLG
STG @MR1305
MPS
AND R4613                ; 基板搬送 COFｶﾞｲﾄﾞ上下 上限
MPS
LD DM11215.0             ; RB17 ﾍｯﾄﾞSub　受取完了　記憶
AND DM11215.1            ; RB17 ﾎﾙﾀﾞｰSub　組込中
AND DM11215.2            ; RB17 ﾎﾙﾀﾞｰSub　組込完了
ANB @MR1309              ; 無条件 ﾜｰｸ排出FLG
ANL
JMP @MR1312
MPP
LDB DM11215.0            ; RB17 ﾍｯﾄﾞSub　受取完了　記憶
ORB DM11215.1            ; RB17 ﾎﾙﾀﾞｰSub　組込中
ORB DM11215.2            ; RB17 ﾎﾙﾀﾞｰSub　組込完了
OR @MR1309               ; 無条件 ﾜｰｸ排出FLG
ANL
SET DM11215.15           ; RB17 不良品 記憶FLG
CON
JMP @MR1405
MPP
ANB R4613                ; 基板搬送 COFｶﾞｲﾄﾞ上下 上限
JMP @MR1307
; Ho-Subがない時
STG @MR1307
SET MR12505              ; ﾒｲﾝｽﾗｲﾀﾞ5 He-subﾜｰｸ有無確認
CON
JMP @MR1308
STG @MR1308
ANB MR12505              ; ﾒｲﾝｽﾗｲﾀﾞ5 He-subﾜｰｸ有無確認
AND MR12508              ; ﾜｰｸ有無確認Sub_End
MPS
AND MR12509              ; ﾒｲﾝｽﾗｲﾀﾞ5 ﾜｰｸ有
MPS
LD DM11215.0             ; RB17 ﾍｯﾄﾞSub　受取完了　記憶
ANB @MR1309              ; 無条件 ﾜｰｸ排出FLG
ANL
SET @MR5100              ; Heｻﾌﾞのみ　Sub-5
CON
JMP @MR1311
MPP
LDB DM11215.0            ; RB17 ﾍｯﾄﾞSub　受取完了　記憶
OR @MR1309               ; 無条件 ﾜｰｸ排出FLG
ANL
SET DM11215.15           ; RB17 不良品 記憶FLG
CON
JMP @MR1405
MPP
AND MR12510              ; ﾒｲﾝｽﾗｲﾀﾞ5 ﾜｰｸ無
SET @MR5108              ; He-SubとHo−Sub　両方無し-5
CON
JMP @MR1310
; He-ｻﾌﾞとHo−ｻﾌﾞ　両方なし
STG @MR1310
ANB @MR5108              ; He-SubとHo−Sub　両方無し-5
AND @MR5109              ; He-SubとHo−Sub　両方無し-5_End
DW #0 DM11215            ; MS-5 ﾜｰｸ状況ｽﾃｰﾀｽ
CON
RES @MR5109              ; He-SubとHo−Sub　両方無し-5_End
CON
JMP @MR1402              ; Next
;He-ｻﾌﾞのみ有
STG @MR1311
ANB @MR5100              ; Heｻﾌﾞのみ　Sub-5
AND @MR5101              ; Heｻﾌﾞのみ　Sub-5_End
RES @MR5101              ; Heｻﾌﾞのみ　Sub-5_End
CON
JMP @MR1402              ; Next
;Ho-ｻﾌﾞ有の時
STG @MR1312
SET @MR5104              ; Ho-ｻﾌﾞ有-5 _Sub
CON
JMP @MR1313
STG @MR1313
ANB @MR5104              ; Ho-ｻﾌﾞ有-5 _Sub
AND @MR5105              ; Ho-ｻﾌﾞ有-5 _SubEnd
RES @MR5105              ; Ho-ｻﾌﾞ有-5 _SubEnd
CON
JMP @MR1402              ; Next
STG @MR1402              ; Next
RES MR7606               ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 閉
CON
SET MR7607               ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 開
CON
JMP @MR1405
;OK品／NG品判定
STG @MR1405
AND CR2002               ; 常時ON
MPS
ANB DM11215.15           ; RB17 不良品 記憶FLG
JMP @MR1510
MPP
AND DM11215.15           ; RB17 不良品 記憶FLG
SET @MR5400              ; MS-5ﾜｰｸ排出_Sub
CON
JMP @MR1505
STG @MR1505
AND @MR5402              ; MS-5ﾜｰｸ排出_Sub　実行中
AND @MR5401              ; MS-5ﾜｰｸ排出_Sub実行完了
RES @MR5401              ; MS-5ﾜｰｸ排出_Sub実行完了
CON
JMP @MR1506
STG @MR1506
ANB @MR5402              ; MS-5ﾜｰｸ排出_Sub　実行中
JMP @MR1507
STG @MR1507
JMP @MR1508
STG @MR1508
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
RES MR11300              ; 【SW1_Retry】ALM_RES_RB17
CON
ANB R36600               ; RB17 MOVE
ANB R36602               ; During RB17 MOVE
ANB R36601               ; RB17 MOVE END
MPS
LD= #1 EM1332            ; RB17Target Pos
AND MR3100               ; RB17 起動IL　ON=起動可能
ANL
SET R36600               ; RB17 MOVE
CON
JMP @MR1509
MPP
DW #1 EM1332             ; RB17Target Pos
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR1509
AND R36601               ; RB17 MOVE END
MPS
LDB R36603               ; RB17Alarm
AND T2300                ; RB17 Pos.1
ANB MR11300              ; 【SW1_Retry】ALM_RES_RB17
ANL
RES R36601               ; RB17 MOVE END
CON
JMP @MR1510
MPP
AND R36603               ; RB17Alarm
@SET MR16901             ; RB17ｴﾗｰ検出
CON
AND MR11300              ; 【SW1_Retry】ALM_RES_RB17
RES R36601               ; RB17 MOVE END
CON
JMP @MR1508
;【ｽﾗｲﾀﾞｰ6のﾜｰｸｽﾃｰﾀｽ】
;
;DM11216.0 : ﾍｯﾄﾞｻﾌﾞ有無（1:有 2:無)
;       .1 : ﾎﾙﾀﾞｰｻﾌﾞ組込中
;       .2 : ﾎﾙﾀﾞｰｻﾌﾞ組込完了
;       .3 : ｶｼﾒ中
;       .4 : ｶｼﾒ完了
;       
;       
;       .15：廃棄必要
;       
;       
;M_ｽﾗ6　↓
LD DM2001.12             ; 無条件 ﾜｰｸ 排出ｽﾗｲﾀﾞｰ上
OUT @MR1511              ; 無条件 ﾜｰｸ排出FLG
STG @MR1510
MPS
AND R4713                ; -
MPS
LD DM11216.0             ; RB18 ﾍｯﾄﾞSub　受取完了 記憶FLG
AND DM11216.1            ; RB18 ﾎﾙﾀﾞｰSub　組込中 記憶FLG
AND DM11216.2            ; RB18 ﾎﾙﾀﾞｰSub　組込完了 記憶FLG
ANB @MR1511              ; 無条件 ﾜｰｸ排出FLG
ANL
JMP @MR1412
MPP
LDB DM11216.0            ; RB18 ﾍｯﾄﾞSub　受取完了 記憶FLG
ORB DM11216.1            ; RB18 ﾎﾙﾀﾞｰSub　組込中 記憶FLG
ORB DM11216.2            ; RB18 ﾎﾙﾀﾞｰSub　組込完了 記憶FLG
OR @MR1511               ; 無条件 ﾜｰｸ排出FLG
ANL
SET DM11216.15           ; RB18 不良品 記憶FLG
CON
JMP @MR1503
MPP
ANB R4713                ; -
JMP @MR1407
; Ho-Subがない時
STG @MR1407
SET MR12605              ; ﾒｲﾝｽﾗｲﾀﾞ6 He-subﾜｰｸ有無確認
CON
JMP @MR1408
STG @MR1408
ANB MR12605              ; ﾒｲﾝｽﾗｲﾀﾞ6 He-subﾜｰｸ有無確認
AND MR12608              ; ﾜｰｸ有無確認Sub_End
MPS
AND MR12609              ; ﾒｲﾝｽﾗｲﾀﾞ6 ﾜｰｸ有
MPS
LD DM11216.0             ; RB18 ﾍｯﾄﾞSub　受取完了 記憶FLG
ANB @MR1511              ; 無条件 ﾜｰｸ排出FLG
ANL
SET @MR5102              ; Heｻﾌﾞのみ　Sub-6
CON
JMP @MR1411
MPP
LDB DM11216.0            ; RB18 ﾍｯﾄﾞSub　受取完了 記憶FLG
OR @MR1511               ; 無条件 ﾜｰｸ排出FLG
ANL
SET DM11216.15           ; RB18 不良品 記憶FLG
CON
JMP @MR1503
MPP
AND MR12610              ; ﾒｲﾝｽﾗｲﾀﾞ6 ﾜｰｸ無
SET @MR5110              ; He-SubとHo−Sub　両方無し-6
CON
JMP @MR1410
; He-ｻﾌﾞとHo−ｻﾌﾞ　両方なし
STG @MR1410
ANB @MR5110              ; He-SubとHo−Sub　両方無し-6
AND @MR5111              ; He-SubとHo−Sub　両方無し-6_End
DW #0 DM11216            ; MS-6 ﾜｰｸ状況ｽﾃｰﾀｽ
CON
RES @MR5111              ; He-SubとHo−Sub　両方無し-6_End
CON
JMP @MR1502              ; Next
;He-ｻﾌﾞのみ有
STG @MR1411
ANB @MR5102              ; Heｻﾌﾞのみ　Sub-6
AND @MR5103              ; Heｻﾌﾞのみ　Sub-6_End
RES @MR5103              ; Heｻﾌﾞのみ　Sub-6_End
CON
JMP @MR1502              ; Next
;Ho-ｻﾌﾞ有の時
STG @MR1412
SET @MR5106              ; Ho-ｻﾌﾞ有-6 _Sub
CON
JMP @MR1413
STG @MR1413
ANB @MR5106              ; Ho-ｻﾌﾞ有-6 _Sub
AND @MR5107              ; Ho-ｻﾌﾞ有-6 _SubEnd
RES @MR5107              ; Ho-ｻﾌﾞ有-6 _SubEnd
CON
JMP @MR1502              ; Next
STG @MR1502              ; Next
RES MR7710               ; -
CON
SET MR7711               ; -
CON
JMP @MR1503
;OK品／NG品判定
STG @MR1503
AND CR2002               ; 常時ON
MPS
ANB DM11216.15           ; RB18 不良品 記憶FLG
JMP @MR1606
MPP
AND DM11216.15           ; RB18 不良品 記憶FLG
SET @MR5800              ; MS-6ﾜｰｸ排出_Sub
CON
JMP @MR1601
STG @MR1601
AND @MR5802              ; MS-6ﾜｰｸ排出_Sub　実行中
AND @MR5801              ; MS-6ﾜｰｸ排出_Sub実行完了
RES @MR5801              ; MS-6ﾜｰｸ排出_Sub実行完了
CON
JMP @MR1602
STG @MR1602
ANB @MR5802              ; MS-6ﾜｰｸ排出_Sub　実行中
JMP @MR1603
STG @MR1603
JMP @MR1604
STG @MR1604
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
RES MR11301              ; 【SW1_Retry】ALM_RES_RB18
CON
ANB R36700               ; RB18 MOVE
ANB R36702               ; During RB18 MOVE
ANB R36701               ; RB18 MOVE END
MPS
LD= #1 EM1334            ; RB18Target Pos
AND MR3101               ; RB18 起動IL　ON=起動可能
ANL
SET R36700               ; RB18 MOVE
CON
JMP @MR1605
MPP
DW #1 EM1334             ; RB18Target Pos
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR1605
AND R36701               ; RB18 MOVE END
MPS
LDB R36703               ; RB18Alarm
AND T2320                ; RB18 Pos.1
ANB MR11301              ; 【SW1_Retry】ALM_RES_RB18
ANL
RES R36701               ; RB18 MOVE END
CON
JMP @MR1606
MPP
AND R36703               ; RB18Alarm
@SET MR16902             ; RB18ｴﾗｰ検出
CON
AND MR11301              ; 【SW1_Retry】ALM_RES_RB18
RES R36701               ; RB18 MOVE END
CON
JMP @MR1604
;FIFOﾃｰﾌﾞﾙ更新
;ﾃｰﾌﾞﾙの中にRB17なら５、RB18なら６が入っていてるのに、
;ﾜｰｸ自体が無い場合は、該当のFIFOﾃｰﾌﾞﾙをｸﾘｱする。
;ﾜｰｸがあれば、ｽﾙｰ。
STG @MR1606
MPS
AND DM11215.0            ; RB17 ﾍｯﾄﾞSub　受取完了　記憶
JMP @MR1614
MPP
ANB DM11215.0            ; RB17 ﾍｯﾄﾞSub　受取完了　記憶
MPS
AND= DM50 #5             ; 基板指定No.
DW #0 DM50               ; 基板指定No.
CON
JMP @MR1608
MPP
AND<> DM50 #5            ; 基板指定No.
JMP @MR1608
STG @MR1608
MPS
AND= DM51 #5             ; FIFOﾃｰﾌﾞﾙ 1個目
DW #0 DM51               ; FIFOﾃｰﾌﾞﾙ 1個目
CON
JMP @MR1609
MPP
AND<> DM51 #5            ; FIFOﾃｰﾌﾞﾙ 1個目
JMP @MR1609
STG @MR1609
MPS
AND= DM52 #5             ; FIFOﾃｰﾌﾞﾙ 2個目
DW #0 DM52               ; FIFOﾃｰﾌﾞﾙ 2個目
CON
JMP @MR1610
MPP
AND<> DM52 #5            ; FIFOﾃｰﾌﾞﾙ 2個目
JMP @MR1610
STG @MR1610
MPS
AND= DM53 #5             ; FIFOﾃｰﾌﾞﾙ 3個目
DW #0 DM53               ; FIFOﾃｰﾌﾞﾙ 3個目
CON
JMP @MR1611
MPP
AND<> DM53 #5            ; FIFOﾃｰﾌﾞﾙ 3個目
JMP @MR1611
STG @MR1611
MPS
AND= DM54 #5             ; FIFOﾃｰﾌﾞﾙ 4個目
DW #0 DM54               ; FIFOﾃｰﾌﾞﾙ 4個目
CON
JMP @MR1612
MPP
AND<> DM54 #5            ; FIFOﾃｰﾌﾞﾙ 4個目
JMP @MR1612
STG @MR1612
MPS
AND= DM55 #5             ; FIFOﾃｰﾌﾞﾙ 5個目
DW #0 DM55               ; FIFOﾃｰﾌﾞﾙ 5個目
CON
JMP @MR1613
MPP
AND<> DM55 #5            ; FIFOﾃｰﾌﾞﾙ 5個目
JMP @MR1613
STG @MR1613
MPS
AND= DM56 #5             ; FIFOﾃｰﾌﾞﾙ 6個目
DW #0 DM56               ; FIFOﾃｰﾌﾞﾙ 6個目
CON
JMP @MR1614
MPP
AND<> DM56 #5            ; FIFOﾃｰﾌﾞﾙ 6個目
JMP @MR1614
;
STG @MR1614
MPS
AND DM11216.0            ; RB18 ﾍｯﾄﾞSub　受取完了 記憶FLG
JMP @MR1500              ; HOME ENDへ
MPP
ANB DM11216.0            ; RB18 ﾍｯﾄﾞSub　受取完了 記憶FLG
MPS
AND= DM50 #6             ; 基板指定No.
DW #0 DM50               ; 基板指定No.
CON
JMP @MR1615
MPP
AND<> DM50 #6            ; 基板指定No.
JMP @MR1615
STG @MR1615
MPS
AND= DM51 #6             ; FIFOﾃｰﾌﾞﾙ 1個目
DW #0 DM51               ; FIFOﾃｰﾌﾞﾙ 1個目
CON
JMP @MR1700
MPP
AND<> DM51 #6            ; FIFOﾃｰﾌﾞﾙ 1個目
JMP @MR1700
STG @MR1700
MPS
AND= DM52 #6             ; FIFOﾃｰﾌﾞﾙ 2個目
DW #0 DM52               ; FIFOﾃｰﾌﾞﾙ 2個目
CON
JMP @MR1701
MPP
AND<> DM52 #6            ; FIFOﾃｰﾌﾞﾙ 2個目
JMP @MR1701
STG @MR1701
MPS
AND= DM53 #6             ; FIFOﾃｰﾌﾞﾙ 3個目
DW #0 DM53               ; FIFOﾃｰﾌﾞﾙ 3個目
CON
JMP @MR1702
MPP
AND<> DM53 #6            ; FIFOﾃｰﾌﾞﾙ 3個目
JMP @MR1702
STG @MR1702
MPS
AND= DM54 #6             ; FIFOﾃｰﾌﾞﾙ 4個目
DW #0 DM54               ; FIFOﾃｰﾌﾞﾙ 4個目
CON
JMP @MR1703
MPP
AND<> DM54 #6            ; FIFOﾃｰﾌﾞﾙ 4個目
JMP @MR1703
STG @MR1703
MPS
AND= DM55 #6             ; FIFOﾃｰﾌﾞﾙ 5個目
DW #0 DM55               ; FIFOﾃｰﾌﾞﾙ 5個目
CON
JMP @MR1704
MPP
AND<> DM55 #6            ; FIFOﾃｰﾌﾞﾙ 5個目
JMP @MR1704
STG @MR1704
MPS
AND= DM56 #6             ; FIFOﾃｰﾌﾞﾙ 6個目
DW #0 DM56               ; FIFOﾃｰﾌﾞﾙ 6個目
CON
JMP @MR1705
MPP
AND<> DM56 #6            ; FIFOﾃｰﾌﾞﾙ 6個目
JMP @MR1705
STG @MR1705
JMP @MR1500              ; HOME ENDへ
STG @MR1500              ; HOME ENDへ
JMP @MR1515              ; HOME END
STG @MR1515              ; HOME END
RES @MR1002              ; HOME中
CON
JMP LR604                ; _Grp1_Task4_Fin.STG
;<h1/>AUTO/自動動作
STG LR5404               ; _Grp1_Task4_AUTO.STG
JMP @MR3000              ; AUTO Main1
;<h1/>Auto-Main1/Autoﾒｲﾝﾙｰﾁﾝ1
;<h1/>■ﾒｲﾝｽﾗｲﾀﾞｰ（R17）上流側■
;[本STG内容]
;・各TaskのAUTO動作を記述して下さい
;・動作ﾓｰﾄﾞは「AUTOAC」に格納されています(1〜32)
;・@MR3000:AUTO_Main1開始、@MR3001:AUTO_Main1完了、@MR3002:AUTO_Main1動作中
STG @MR3000              ; AUTO Main1
AND CR2002               ; 常時ON
SET @MR3002              ; AUTO Main1 Busy
CON
SET @MR4000              ; AUTO Main2
CON
JMP @MR3003              ; RepeatA
;<h1/>ｶｼﾒUT1_ﾒﾝﾃﾅﾝｽ移行監視回路１
LD @MR3002               ; AUTO Main1 Busy
ANP B048                 ; ｶｼﾒUT3_上流ﾒﾝﾃﾓｰﾄﾞ移行開始SW
OR MR11012               ; ｶｼﾒUT3_上流ﾒﾝﾃﾓｰﾄﾞ移行待ち
ANB MR11014              ; ｶｼﾒUT3_上流ﾒﾝﾃﾓｰﾄﾞ終了
MPS
OUT MR11012              ; ｶｼﾒUT3_上流ﾒﾝﾃﾓｰﾄﾞ移行待ち
MPP
LD CR2006                ; 1sｸﾛｯｸﾊﾟﾙｽ
OR MR11013               ; ｶｼﾒUT3_上流ﾒﾝﾃﾓｰﾄﾞ移行中
ANL
OUT B049                 ; ｶｼﾒUT3_上流ﾒﾝﾃﾓｰﾄﾞ移行中LP
STG @MR3003              ; RepeatA
JMP @MR3306
STG @MR3306
MPS
LD CR2003                ; 常時OFF
ANB DM2000.6
ANL
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
JMP @MR3004
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
MPP
LD DM2000.6
OR CR2002                ; 常時ON
ANL
MPS
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
MPP
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
LD R46106                ; _定停止移行中
OR R47800                ; _Group1　ﾒﾝﾃ動作定停止移行中
ANL
ANL
SET @MR3801              ; 継続可不可確認sub_
CON
JMP @MR3900              ; Main1 END
;<h1/>Pause処理
;【ｽﾗｲﾀﾞｰ5のﾜｰｸｽﾃｰﾀｽ】
;
;DM11215.0 : ﾍｯﾄﾞｻﾌﾞ有無（1:有 2:無)
;       .1 : ﾎﾙﾀﾞｰｻﾌﾞ組込中
;       .2 : ﾎﾙﾀﾞｰｻﾌﾞ組込完了
;       .3 : ｶｼﾒ中
;       .4 : ｶｼﾒ完了
;       .5 : 画像検査中
;       .6 : 画像検査完了
;       .7 : 画像検査PASS
;       
;       .15：廃棄必要
;       
;       
STG @MR3004
MPS
AND R4613                ; 基板搬送 COFｶﾞｲﾄﾞ上下 上限
MPS
LD DM11215.2             ; RB17 ﾎﾙﾀﾞｰSub　組込完了
ANB DM11215.15           ; RB17 不良品 記憶FLG
ANL
MPS
ANB DM11215.3            ; RB17 ｶｼﾒ中 記憶FLG
JMP @MR3501              ; R17 熱ｶｼﾒ前、待機位置へ
MPP
AND DM11215.3            ; RB17 ｶｼﾒ中 記憶FLG
MPS
AND DM11215.4            ; RB17 ｶｼﾒ完了 記憶FLG
JMP @MR3610              ; 完成品排出位置へ
MPP
ANB DM11215.4            ; RB17 ｶｼﾒ完了 記憶FLG
JMP @MR3203              ; ﾜｰｸ除材
MPP
LDB DM11215.2            ; RB17 ﾎﾙﾀﾞｰSub　組込完了
OR DM11215.15            ; RB17 不良品 記憶FLG
ANL
JMP @MR3203              ; ﾜｰｸ除材
MPP
ANB R4613                ; 基板搬送 COFｶﾞｲﾄﾞ上下 上限
MPS
AND R5312                ; -
MPS
LD DM11215.0             ; RB17 ﾍｯﾄﾞSub　受取完了　記憶
ANB DM11215.15           ; RB17 不良品 記憶FLG
ANL
JMP @MR3300              ; ﾎﾙﾀﾞｰSub受取待機位置へ移動
MPP
LDB DM11215.0            ; RB17 ﾍｯﾄﾞSub　受取完了　記憶
OR DM11215.15            ; RB17 不良品 記憶FLG
ANL
JMP @MR3203              ; ﾜｰｸ除材
MPP
ANB R5312                ; -
MPS
LD DM11215.0             ; RB17 ﾍｯﾄﾞSub　受取完了　記憶
ANB DM11215.15           ; RB17 不良品 記憶FLG
ANL
SET MR16108              ; ﾒｲﾝｽﾗｲﾀﾞｰ5_吸着ON 未確定
CON
JMP @MR3005              ; ｵﾍﾟﾚｰﾀ判断
MRD
LDB DM11215.0            ; RB17 ﾍｯﾄﾞSub　受取完了　記憶
ANB DM11215.15           ; RB17 不良品 記憶FLG
ANL
JMP @MR3007              ; ﾍｯﾄﾞSub受取待機位置へ移動
MPP
AND DM11215.15           ; RB17 不良品 記憶FLG
JMP @MR3203              ; ﾜｰｸ除材
STG @MR3005              ; ｵﾍﾟﾚｰﾀ判断
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR16108              ; ﾒｲﾝｽﾗｲﾀﾞｰ5_吸着ON 未確定
ANL
MPS
AND MR16109              ; SW1 ｢再確認] からのｽﾀｰﾄ
SET MR12505              ; ﾒｲﾝｽﾗｲﾀﾞ5 He-subﾜｰｸ有無確認
CON
JMP @MR3006
MPP
AND MR16110              ; SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
JMP @MR3203              ; ﾜｰｸ除材
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
STG @MR3006
ANB MR12505              ; ﾒｲﾝｽﾗｲﾀﾞ5 He-subﾜｰｸ有無確認
AND MR12508              ; ﾜｰｸ有無確認Sub_End
JMP @MR3004
;<<行コメント編集：Ctrl+Enter/Escで確定>>
STG @MR3007              ; ﾍｯﾄﾞSub受取待機位置へ移動
JMP @MR3008
;<h1/>受取前待機位置へ
STG @MR3008
MPS
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
RES MR11300              ; 【SW1_Retry】ALM_RES_RB17
CON
ANB R36600               ; RB17 MOVE
ANB R36602               ; During RB17 MOVE
ANB R36601               ; RB17 MOVE END
MPS
LD= #1 EM1332            ; RB17Target Pos
AND MR3100               ; RB17 起動IL　ON=起動可能
ANL
SET R36600               ; RB17 MOVE
CON
JMP @MR3009
MPP
DW #1 EM1332             ; RB17Target Pos
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
STG @MR3009
AND R36601               ; RB17 MOVE END
MPS
LDB R36603               ; RB17Alarm
AND T2300                ; RB17 Pos.1
ANB MR11300              ; 【SW1_Retry】ALM_RES_RB17
ANL
RES R36601               ; RB17 MOVE END
CON
JMP @MR3010
MPP
AND R36603               ; RB17Alarm
@SET MR16901             ; RB17ｴﾗｰ検出
CON
AND MR11300              ; 【SW1_Retry】ALM_RES_RB17
RES R36601               ; RB17 MOVE END
CON
ENDS
STG @MR3010
MPS
ANB MR4609               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退限err
SET MR7609               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退
CON
RES MR7608               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進
CON
AND R4609                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退限
ANB R4608                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進限
JMP @MR3011
MPP
LD MR4609                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退限err
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3011
JMP @MR3014              ; Repeat_P1
;<h1/>ﾒﾝﾃﾓｰﾄﾞ移行有無確認
STG @MR3014              ; Repeat_P1
JMP @MR3902
STG @MR3902
MPS
ANB MR11012              ; ｶｼﾒUT3_上流ﾒﾝﾃﾓｰﾄﾞ移行待ち
JMP @MR3906
MPP
AND MR11012              ; ｶｼﾒUT3_上流ﾒﾝﾃﾓｰﾄﾞ移行待ち
SET MR11013              ; ｶｼﾒUT3_上流ﾒﾝﾃﾓｰﾄﾞ移行中
CON
JMP @MR3903
STG @MR3903
ANP B048                 ; ｶｼﾒUT3_上流ﾒﾝﾃﾓｰﾄﾞ移行開始SW
JMP @MR3904
STG @MR3904
SET MR11014              ; ｶｼﾒUT3_上流ﾒﾝﾃﾓｰﾄﾞ終了
CON
JMP @MR3905
STG @MR3905
ANB MR11012              ; ｶｼﾒUT3_上流ﾒﾝﾃﾓｰﾄﾞ移行待ち
RES MR11014              ; ｶｼﾒUT3_上流ﾒﾝﾃﾓｰﾄﾞ終了
CON
RES MR11013              ; ｶｼﾒUT3_上流ﾒﾝﾃﾓｰﾄﾞ移行中
CON
JMP @MR3014              ; Repeat_P1
;<h1/>L-REQ発砲　RB2へ（ﾍｯﾄﾞ要求）
STG @MR3906
SET B0620                ; RB17置台給材要求 (L-REQ)
CON
JMP @MR3015
STG @MR3015
MPS
AND B0623                ; RB2ﾊﾝﾄﾞ 要求応答 (T-REQ)
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
JMP @MR3100
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
MRD
LDB B0623                ; RB2ﾊﾝﾄﾞ 要求応答 (T-REQ)
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
AND MR11012              ; ｶｼﾒUT3_上流ﾒﾝﾃﾓｰﾄﾞ移行待ち
ANL
RES B0590                ; RB13置台 給材要求 (L-REQ)
CON
JMP @MR3014              ; Repeat_P1
MPP
ANB B0623                ; RB2ﾊﾝﾄﾞ 要求応答 (T-REQ)
MPS
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
MPP
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
AND R46106               ; _定停止移行中
ANL
RES B0620                ; RB17置台給材要求 (L-REQ)
CON
SET @MR3801              ; 継続可不可確認sub_
CON
JMP @MR3900              ; Main1 END
;<h1/>RB2よりﾍｯﾄﾞ受取前準備
STG @MR3100
SET @MR5200              ; RB17補正量算出_Sub
CON
JMP @MR3103
STG @MR3103
AND @MR5202              ; RB17補正量算出_Sub　実行中
AND @MR5201              ; RB17補正量算出_Sub実行完了
RES @MR5201              ; RB17補正量算出_Sub実行完了
CON
JMP @MR3104
STG @MR3104
ANB @MR5202              ; RB17補正量算出_Sub　実行中
JMP @MR3105
STG @MR3105
MPS
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
RES MR11300              ; 【SW1_Retry】ALM_RES_RB17
CON
ANB R36600               ; RB17 MOVE
ANB R36602               ; During RB17 MOVE
ANB R36601               ; RB17 MOVE END
MPS
LD= #3 EM1332            ; RB17Target Pos
AND MR3100               ; RB17 起動IL　ON=起動可能
ANL
SET R36600               ; RB17 MOVE
CON
JMP @MR3106
MPP
DW #3 EM1332             ; RB17Target Pos
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
STG @MR3106
AND R36601               ; RB17 MOVE END
MPS
LDB R36603               ; RB17Alarm
AND T2302                ; RB17 Pos.3
ANB MR11300              ; 【SW1_Retry】ALM_RES_RB17
ANL
RES R36601               ; RB17 MOVE END
CON
JMP @MR3108
MPP
AND R36603               ; RB17Alarm
@SET MR16901             ; RB17ｴﾗｰ検出
CON
AND MR11300              ; 【SW1_Retry】ALM_RES_RB17
RES R36601               ; RB17 MOVE END
CON
JMP @MR3105
STG @MR3108
ANPB @MR3108
JMP @MR3109
;<h1/>RB2よりﾍｯﾄﾞ受取中
STG @MR3109
SET B0621                ; RB17置台開始許可 (READY)
CON
JMP @MR3110
STG @MR3110
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
AND B0624                ; RB2ﾊﾝﾄﾞ 実行中 (BUSY)
ANL
JMP @MR3112
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
STG @MR3112
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
AND B0625                ; RB2ﾊﾝﾄﾞ 補開始要求 (COMP)
ANL
JMP @MR3113
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
STG @MR3113
JMP @MR3114
STG @MR3114
JMP @MR3115
STG @MR3115
RES B0620                ; RB17置台給材要求 (L-REQ)
CON
RES B0621                ; RB17置台開始許可 (READY)
CON
RES B0622
CON
JMP @MR3200
STG @MR3200
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B0623                ; RB2ﾊﾝﾄﾞ 要求応答 (T-REQ)
ANB B0624                ; RB2ﾊﾝﾄﾞ 実行中 (BUSY)
ANB B0625                ; RB2ﾊﾝﾄﾞ 補開始要求 (COMP)
ANL
JMP @MR3201              ; Repeat 吸着確認
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
;<h1/>ﾍｯﾄﾞ受取後の吸着確認
STG @MR3201              ; Repeat 吸着確認
SET MR12500              ; ﾒｲﾝｽﾗｲﾀﾞ5 吸着確認
CON
JMP @MR3202
STG @MR3202
ANB MR12500              ; ﾒｲﾝｽﾗｲﾀﾞ5 吸着確認
AND MR12501              ; 吸着確認　_End
MPS
LD MR12502               ; 吸着ｾﾝｻON 確認
ANB DM11215.15           ; RB17 不良品 記憶FLG
ANL
SET DM11215.0            ; RB17 ﾍｯﾄﾞSub　受取完了　記憶
CON
JMP @MR3208              ; ﾒｲﾝｽﾗｲﾀﾞ5 ﾍｯﾄﾞｻﾌﾞ有 継続
MPP
LD MR12503               ; 吸着ｾﾝｻOFF確認
OR DM11215.15            ; RB17 不良品 記憶FLG
ANL
JMP @MR3203              ; ﾜｰｸ除材
;NG排出処理へ
STG @MR3203              ; ﾜｰｸ除材
SET @MR5400              ; MS-5ﾜｰｸ排出_Sub
CON
JMP @MR3907
STG @MR3907
AND @MR5402              ; MS-5ﾜｰｸ排出_Sub　実行中
AND @MR5401              ; MS-5ﾜｰｸ排出_Sub実行完了
RES @MR5401              ; MS-5ﾜｰｸ排出_Sub実行完了
CON
JMP @MR3908
STG @MR3908
ANB @MR5402              ; MS-5ﾜｰｸ排出_Sub　実行中
JMP @MR3003              ; RepeatA
;NG排出処理へ
;NG処理後の確認
STG @MR3208              ; ﾒｲﾝｽﾗｲﾀﾞ5 ﾍｯﾄﾞｻﾌﾞ有 継続
MPS
ANB MR4608               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進限err
SET MR7608               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進
CON
RES MR7609               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退
CON
AND R4608                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進限
ANB R4609                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退限
JMP @MR3210
MPP
LD MR4608                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進限err
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3210
JMP @MR3212
STG @MR3212
JMP @MR3300              ; ﾎﾙﾀﾞｰSub受取待機位置へ移動
;<h1/>ﾎﾙﾀﾞｰSub受取位置へ移動
STG @MR3300              ; ﾎﾙﾀﾞｰSub受取待機位置へ移動
MPS
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
RES MR11300              ; 【SW1_Retry】ALM_RES_RB17
CON
ANB R36600               ; RB17 MOVE
ANB R36602               ; During RB17 MOVE
ANB R36601               ; RB17 MOVE END
MPS
LD= #4 EM1332            ; RB17Target Pos
AND MR3100               ; RB17 起動IL　ON=起動可能
ANL
SET R36600               ; RB17 MOVE
CON
JMP @MR3302
MPP
DW #4 EM1332             ; RB17Target Pos
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
STG @MR3302
AND R36601               ; RB17 MOVE END
MPS
LDB R36603               ; RB17Alarm
AND T2303                ; RB17 Pos.4
ANB MR11300              ; 【SW1_Retry】ALM_RES_RB17
ANL
RES R36601               ; RB17 MOVE END
CON
JMP @MR3303
MPP
AND R36603               ; RB17Alarm
@SET MR16901             ; RB17ｴﾗｰ検出
CON
AND MR11300              ; 【SW1_Retry】ALM_RES_RB17
RES R36601               ; RB17 MOVE END
CON
JMP @MR3300              ; ﾎﾙﾀﾞｰSub受取待機位置へ移動
;FIFOﾃｰﾌﾞﾙ、既にｴﾝﾄﾘｰされているかの確認
;（ﾍｯﾄﾞｻﾌﾞがある状態で、自動運転起動されると、再びｴﾝﾄﾘｰとなるので、避けるため）
STG @MR3303
MPS
LD<> DM50 #5             ; 基板指定No.
AND<> DM51 #5            ; FIFOﾃｰﾌﾞﾙ 1個目
AND<> DM52 #5            ; FIFOﾃｰﾌﾞﾙ 2個目
AND<> DM53 #5            ; FIFOﾃｰﾌﾞﾙ 3個目
AND<> DM54 #5            ; FIFOﾃｰﾌﾞﾙ 4個目
AND<> DM55 #5            ; FIFOﾃｰﾌﾞﾙ 5個目
ANL
JMP @MR3309              ; ｴﾝﾄﾘｰなし
MPP
LD= DM50 #5              ; 基板指定No.
OR= DM51 #5              ; FIFOﾃｰﾌﾞﾙ 1個目
OR= DM52 #5              ; FIFOﾃｰﾌﾞﾙ 2個目
OR= DM53 #5              ; FIFOﾃｰﾌﾞﾙ 3個目
OR= DM54 #5              ; FIFOﾃｰﾌﾞﾙ 4個目
OR= DM55 #5              ; FIFOﾃｰﾌﾞﾙ 5個目
ANL
JMP @MR3310              ; ｴﾝﾄﾘｰあり
STG @MR3309              ; ｴﾝﾄﾘｰなし
TMR #1204 #2
CON
AND T1204
LD= DM50 #0              ; 基板指定No.
OR= DM51 #0              ; FIFOﾃｰﾌﾞﾙ 1個目
OR= DM52 #0              ; FIFOﾃｰﾌﾞﾙ 2個目
OR= DM53 #0              ; FIFOﾃｰﾌﾞﾙ 3個目
OR= DM54 #0              ; FIFOﾃｰﾌﾞﾙ 4個目
OR= DM55 #0              ; FIFOﾃｰﾌﾞﾙ 5個目
OR= DM56 #0              ; FIFOﾃｰﾌﾞﾙ 6個目
ANL
ANB MR405                ; FIFO書き込みTrig
ANB MR17301              ; 書き込み実行中
@SET MR405               ; FIFO書き込みTrig
CON
JMP @MR3304              ; Repeat
;<h1/>FIFOﾃｰﾌﾞﾙへ書き込み
STG @MR3304              ; Repeat
AND MR17301              ; 書き込み実行中
RES MR405                ; FIFO書き込みTrig
CON
MPS
ANP MR17310              ; 書き込みOK　DM50へ
DW #5 DM50               ; 基板指定No.
CON
RES MR17310              ; 書き込みOK　DM50へ
CON
JMP @MR3305
MRD
ANP MR17311              ; 書き込みOK　DM51へ
DW #5 DM51               ; FIFOﾃｰﾌﾞﾙ 1個目
CON
RES MR17311              ; 書き込みOK　DM51へ
CON
JMP @MR3305
MRD
ANP MR17312              ; 書き込みOK　DM52へ
DW #5 DM52               ; FIFOﾃｰﾌﾞﾙ 2個目
CON
RES MR17312              ; 書き込みOK　DM52へ
CON
JMP @MR3305
MRD
ANP MR17313              ; 書き込みOK　DM53へ
DW #5 DM53               ; FIFOﾃｰﾌﾞﾙ 3個目
CON
RES MR17313              ; 書き込みOK　DM53へ
CON
JMP @MR3305
MRD
ANP MR17314              ; 書き込みOK　DM54へ
DW #5 DM54               ; FIFOﾃｰﾌﾞﾙ 4個目
CON
RES MR17314              ; 書き込みOK　DM54へ
CON
JMP @MR3305
MRD
ANP MR17315              ; 書き込みOK　DM55へ
DW #5 DM55               ; FIFOﾃｰﾌﾞﾙ 5個目
CON
RES MR17315              ; 書き込みOK　DM55へ
CON
JMP @MR3305
MPP
ANP MR17400              ; 書き込みOK　DM56へ
DW #5 DM56               ; FIFOﾃｰﾌﾞﾙ 6個目
CON
RES MR17400              ; 書き込みOK　DM56へ
CON
JMP @MR3305
STG @MR3310              ; ｴﾝﾄﾘｰあり
JMP @MR3305
;<h1/>L-REQ発砲　RB2へ　
STG @MR3305
ANB MR17301              ; 書き込み実行中
JMP @MR3312
STG @MR3312
SET B0570                ; RB17置台給材要求 (L-REQ)
CON
JMP @MR3400
STG @MR3400
MPS
LD B0573                 ; RB1ﾊﾝﾄﾞ 要求応答 (T-REQ)
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
JMP @MR3401
MPP
ANB B0573                ; RB1ﾊﾝﾄﾞ 要求応答 (T-REQ)
MPS
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
MPP
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
AND R46106               ; _定停止移行中
ANL
RES B0570                ; RB17置台給材要求 (L-REQ)
CON
JMP @MR3900              ; Main1 END
;<h1/>RB17 ﾎﾙﾀﾞｰｻﾌﾞ組付け位置移動
STG @MR3401
MPS
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
RES MR11300              ; 【SW1_Retry】ALM_RES_RB17
CON
ANB R36600               ; RB17 MOVE
ANB R36602               ; During RB17 MOVE
ANB R36601               ; RB17 MOVE END
MPS
LD= #5 EM1332            ; RB17Target Pos
AND MR3100               ; RB17 起動IL　ON=起動可能
ANL
SET R36600               ; RB17 MOVE
CON
JMP @MR3408
MPP
DW #5 EM1332             ; RB17Target Pos
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
STG @MR3408
ANB MR407                ; 20130626　ho-sub組込藤沢
SET MR7612               ; 基板搬送 COFｶﾞｲﾄﾞ上下 下降
CON
RES MR7613               ; 基板搬送 COFｶﾞｲﾄﾞ上下 上昇
CON
SET MR7600               ; ﾎﾙﾀﾞｻﾌﾞ供給PP ﾊﾝﾄﾞ 閉
CON
RES MR7601               ; ﾎﾙﾀﾞｻﾌﾞ供給PP ﾊﾝﾄﾞ 開
CON
AND R36601               ; RB17 MOVE END
MPS
LDB R36603               ; RB17Alarm
AND T2304                ; RB17 Pos.5
ANB MR11300              ; 【SW1_Retry】ALM_RES_RB17
ANL
RES R36601               ; RB17 MOVE END
CON
JMP @MR3409
MPP
AND R36603               ; RB17Alarm
@SET MR16901             ; RB17ｴﾗｰ検出
CON
AND MR11300              ; 【SW1_Retry】ALM_RES_RB17
RES R36601               ; RB17 MOVE END
CON
JMP @MR3401
STG @MR3409
TMR #1018 #0
CON
AND T1018
SET B0571                ; RB17置台開始許可 (READY)
CON
JMP @MR3410
STG @MR3410
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
AND B0574                ; RB1ﾊﾝﾄﾞ 実行中 (BUSY)
ANL
SET DM11215.15           ; RB17 不良品 記憶FLG
CON
SET DM11215.1            ; RB17 ﾎﾙﾀﾞｰSub　組込中
CON
JMP @MR3411
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
STG @MR3411
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
AND B0575                ; RB1ﾊﾝﾄﾞ 補開始要求 (COMP)
ANL
RES B0571                ; RB17置台開始許可 (READY)
CON
RES B0570                ; RB17置台給材要求 (L-REQ)
CON
JMP @MR3412
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
;<h1/>ﾜｰｸ受取完了　RB2へﾜｰｸ受渡完了
STG @MR3412
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B0573                ; RB1ﾊﾝﾄﾞ 要求応答 (T-REQ)
ANB B0574                ; RB1ﾊﾝﾄﾞ 実行中 (BUSY)
ANB B0575                ; RB1ﾊﾝﾄﾞ 補開始要求 (COMP)
ANL
RES DM11215.15           ; RB17 不良品 記憶FLG
CON
SET DM11215.2            ; RB17 ﾎﾙﾀﾞｰSub　組込完了
CON
JMP @MR3413
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
STG @MR3413
AND CR2002               ; 常時ON
JMP @MR3415
STG @MR3415
JMP @MR3501              ; R17 熱ｶｼﾒ前、待機位置へ
;<<行コメント編集：Ctrl+Enter/Escで確定>>
STG @MR3501              ; R17 熱ｶｼﾒ前、待機位置へ
MPS
AND CR2002               ; 常時ON
JMP @MR3506              ; ｶｼﾒあり
MPP
ANB CR2002               ; 常時ON
JMP @MR3610              ; 完成品排出位置へ
;<h1/>熱ｶｼﾒ前、待機位置へ
STG @MR3506              ; ｶｼﾒあり
MPS
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
RES MR11300              ; 【SW1_Retry】ALM_RES_RB17
CON
ANB R36600               ; RB17 MOVE
ANB R36602               ; During RB17 MOVE
ANB R36601               ; RB17 MOVE END
MPS
LD= #6 EM1332            ; RB17Target Pos
AND MR3100               ; RB17 起動IL　ON=起動可能
ANL
SET R36600               ; RB17 MOVE
CON
JMP @MR3503
MPP
DW #6 EM1332             ; RB17Target Pos
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
STG @MR3503
AND R36601               ; RB17 MOVE END
MPS
LDB R36603               ; RB17Alarm
AND T2305                ; RB17 Pos.6
ANB MR11300              ; 【SW1_Retry】ALM_RES_RB17
ANL
RES R36601               ; RB17 MOVE END
CON
JMP @MR3505
MPP
AND R36603               ; RB17Alarm
@SET MR16901             ; RB17ｴﾗｰ検出
CON
AND MR11300              ; 【SW1_Retry】ALM_RES_RB17
RES R36601               ; RB17 MOVE END
CON
JMP @MR3506              ; ｶｼﾒあり
STG @MR3505
ANPB @MR3505
TMR #1205 #0
CON
AND T1205
MPS
AND CR2002               ; 常時ON
JMP @MR3508              ; Repeat
MPP
ANB CR2002               ; 常時ON
JMP @MR3610              ; 完成品排出位置へ
;<h1/>RB17置台 L-REQ発砲
STG @MR3508              ; Repeat
SET B06E0                ; RB17置台熱ｶｼﾒ要求 (L-REQ)
CON
JMP @MR3509
STG @MR3509
MPS
LD B06E3                 ; ｶｼﾒUT1要求応答 (T-REQ)
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
JMP @MR3513
MPP
ANB B06E3                ; ｶｼﾒUT1要求応答 (T-REQ)
MPS
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
MPP
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
AND R46106               ; _定停止移行中
ANL
RES B06E0                ; RB17置台熱ｶｼﾒ要求 (L-REQ)
CON
JMP @MR3900              ; Main1 END
;<h1/>ｶｼﾒ位置へ移動
STG @MR3513
MPS
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
RES MR11300              ; 【SW1_Retry】ALM_RES_RB17
CON
ANB R36600               ; RB17 MOVE
ANB R36602               ; During RB17 MOVE
ANB R36601               ; RB17 MOVE END
MPS
LD= #7 EM1332            ; RB17Target Pos
AND MR3100               ; RB17 起動IL　ON=起動可能
ANL
SET R36600               ; RB17 MOVE
CON
JMP @MR3514
MPP
DW #7 EM1332             ; RB17Target Pos
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
STG @MR3514
AND R36601               ; RB17 MOVE END
MPS
LDB R36603               ; RB17Alarm
AND T2306                ; RB17 Pos.7
ANB MR11300              ; 【SW1_Retry】ALM_RES_RB17
ANL
RES R36601               ; RB17 MOVE END
CON
JMP @MR3515
MPP
AND R36603               ; RB17Alarm
@SET MR16901             ; RB17ｴﾗｰ検出
CON
AND MR11300              ; 【SW1_Retry】ALM_RES_RB17
RES R36601               ; RB17 MOVE END
CON
JMP @MR3513
;<h1/>READY発砲
;ｶｼﾒ位置へ移動したら、すぐに押さえを下降させる　　20130625　藤沢
STG @MR3515
MPS
AND MR412                ; 20130625　　MS押え下降　藤沢
SET B06E1                ; RB17置台開始許可 (READY)
CON
JMP @MR3600
MPP
ANB MR412                ; 20130625　　MS押え下降　藤沢
SET MR7608               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進
CON
RES MR7609               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退
CON
SET B06E1                ; RB17置台開始許可 (READY)
CON
JMP @MR3600
STG @MR3600
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
AND B06E4                ; ｶｼﾒUT3-1実行中 (BUSY)
ANL
SET DM11215.15           ; RB17 不良品 記憶FLG
CON
SET DM11215.3            ; RB17 ｶｼﾒ中 記憶FLG
CON
JMP @MR3601
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
;<h1/>COMP受信
;不良品記憶FLGは、「ｶｼﾒ動作実行_Sub」の中で判断する
STG @MR3601
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
AND B06E5                ; ｶｼﾒUT1補開始要求 (COMP)
ANL
MPS
ANB CR2002               ; 常時ON
RES DM11215.15           ; RB17 不良品 記憶FLG
CON
SET DM11215.4            ; RB17 ｶｼﾒ完了 記憶FLG
CON
RES B06E0                ; RB17置台熱ｶｼﾒ要求 (L-REQ)
CON
RES B06E1                ; RB17置台開始許可 (READY)
CON
JMP @MR3602
MPP
SET DM11215.4            ; RB17 ｶｼﾒ完了 記憶FLG
CON
RES B06E0                ; RB17置台熱ｶｼﾒ要求 (L-REQ)
CON
RES B06E1                ; RB17置台開始許可 (READY)
CON
JMP @MR3602
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
STG @MR3602
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B06E3                ; ｶｼﾒUT1要求応答 (T-REQ)
ANB B06E4                ; ｶｼﾒUT3-1実行中 (BUSY)
ANB B06E5                ; ｶｼﾒUT1補開始要求 (COMP)
ANL
JMP @MR3603
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
STG @MR3603
JMP @MR3604
;<h1/>ｶｼﾒ後判定回路
STG @MR3604
MPS
ANB DM11215.15           ; RB17 不良品 記憶FLG
JMP @MR3610              ; 完成品排出位置へ
MPP
AND DM11215.15           ; RB17 不良品 記憶FLG
SET @MR5400              ; MS-5ﾜｰｸ排出_Sub
CON
JMP @MR3605
STG @MR3605
AND @MR5402              ; MS-5ﾜｰｸ排出_Sub　実行中
AND @MR5401              ; MS-5ﾜｰｸ排出_Sub実行完了
RES @MR5401              ; MS-5ﾜｰｸ排出_Sub実行完了
CON
JMP @MR3606
STG @MR3606
ANB @MR5402              ; MS-5ﾜｰｸ排出_Sub　実行中
JMP @MR3802              ; 再確認回路へ
;<h1/>完成品排出位置へ
STG @MR3610              ; 完成品排出位置へ
MPS
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
RES MR11300              ; 【SW1_Retry】ALM_RES_RB17
CON
ANB R36600               ; RB17 MOVE
ANB R36602               ; During RB17 MOVE
ANB R36601               ; RB17 MOVE END
MPS
LD= #11 EM1332           ; RB17Target Pos
AND MR3100               ; RB17 起動IL　ON=起動可能
ANL
SET R36600               ; RB17 MOVE
CON
JMP @MR3612
MPP
DW #11 EM1332            ; RB17Target Pos
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
STG @MR3612
AND R36601               ; RB17 MOVE END
MPS
LDB R36603               ; RB17Alarm
AND T2310                ; RB17 Pos.11
ANB MR11300              ; 【SW1_Retry】ALM_RES_RB17
ANL
RES R36601               ; RB17 MOVE END
CON
JMP @MR3614
MPP
AND R36603               ; RB17Alarm
@SET MR16901             ; RB17ｴﾗｰ検出
CON
AND MR11300              ; 【SW1_Retry】ALM_RES_RB17
RES R36601               ; RB17 MOVE END
CON
JMP @MR3610              ; 完成品排出位置へ
STG @MR3614
ANPB @MR3614
TMR #1207 #0
CON
AND T1207
JMP @MR3700              ; Repeat
;<h1/>完成品排出要求　RB3
STG @MR3700              ; Repeat
SET B0630                ; RB17置台除材要求 (L-REQ)
CON
JMP @MR3702
STG @MR3702
MPS
LD B0633                 ; RB3ﾊﾝﾄﾞ要求応答 (T-REQ)
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
JMP @MR3704
MPP
ANB B0633                ; RB3ﾊﾝﾄﾞ要求応答 (T-REQ)
MPS
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
MPP
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
AND R46106               ; _定停止移行中
ANL
RES B0630                ; RB17置台除材要求 (L-REQ)
CON
JMP @MR3900              ; Main1 END
;<<行コメント編集：Ctrl+Enter/Escで確定>>
STG @MR3704
RES MR8303               ; -
CON
SET MR8304               ; -
CON
RES MR8305               ; -
CON
SET B0631                ; RB17置台開始許可 (READY)
CON
JMP @MR3705
STG @MR3705
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
AND B0634                ; RB3ﾊﾝﾄﾞ実行中 (BUSY)
ANL
JMP @MR3712
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
STG @MR3712
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
AND B0635                ; RB3ﾊﾝﾄﾞ補開始要求 (COMP)
ANL
RES B0630                ; RB17置台除材要求 (L-REQ)
CON
RES B0631                ; RB17置台開始許可 (READY)
CON
JMP @MR3714
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
;<h1/>完成品排出完了
STG @MR3714
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B0633                ; RB3ﾊﾝﾄﾞ要求応答 (T-REQ)
ANB B0634                ; RB3ﾊﾝﾄﾞ実行中 (BUSY)
ANB B0635                ; RB3ﾊﾝﾄﾞ補開始要求 (COMP)
ANL
JMP @MR3800
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
STG @MR3800
JMP @MR3909
;<h1/>画像判定NG
;画像判定NGの場合は、除材されずに、まだｽﾗｲﾀﾞｰ上にある
STG @MR3909
MPS
ANB DM11215.15           ; RB17 不良品 記憶FLG
JMP @MR3802              ; 再確認回路へ
MPP
AND DM11215.15           ; RB17 不良品 記憶FLG
SET @MR5400              ; MS-5ﾜｰｸ排出_Sub
CON
JMP @MR3910
STG @MR3910
AND @MR5402              ; MS-5ﾜｰｸ排出_Sub　実行中
AND @MR5401              ; MS-5ﾜｰｸ排出_Sub実行完了
RES @MR5401              ; MS-5ﾜｰｸ排出_Sub実行完了
CON
JMP @MR3911
STG @MR3911
ANB @MR5402              ; MS-5ﾜｰｸ排出_Sub　実行中
MPS
ANB DM11215.7            ; RB17 画像検査　PASS
JMP @MR3802              ; 再確認回路へ
MPP
AND DM11215.7            ; RB17 画像検査　PASS
JMP @MR3610              ; 完成品排出位置へ
;<h1/>ｸﾘｰﾆﾝｸﾞ前再確認回路
STG @MR3802              ; 再確認回路へ
SET MR12505              ; ﾒｲﾝｽﾗｲﾀﾞ5 He-subﾜｰｸ有無確認
CON
JMP @MR3803
STG @MR3803
ANB MR12505              ; ﾒｲﾝｽﾗｲﾀﾞ5 He-subﾜｰｸ有無確認
AND MR12508              ; ﾜｰｸ有無確認Sub_End
MPS
LD MR12509               ; ﾒｲﾝｽﾗｲﾀﾞ5 ﾜｰｸ有
OR R4613                 ; 基板搬送 COFｶﾞｲﾄﾞ上下 上限
ANL
SET DM11215.15           ; RB17 不良品 記憶FLG
CON
JMP @MR3205
MPP
LD MR12510               ; ﾒｲﾝｽﾗｲﾀﾞ5 ﾜｰｸ無
ANB R4613                ; 基板搬送 COFｶﾞｲﾄﾞ上下 上限
ANL
DW #0 DM11215            ; MS-5 ﾜｰｸ状況ｽﾃｰﾀｽ
CON
JMP @MR3804              ; ｸﾘｰﾆﾝｸﾞへ
STG @MR3205
SET @MR5400              ; MS-5ﾜｰｸ排出_Sub
CON
JMP @MR3206
STG @MR3206
AND @MR5402              ; MS-5ﾜｰｸ排出_Sub　実行中
AND @MR5401              ; MS-5ﾜｰｸ排出_Sub実行完了
RES @MR5401              ; MS-5ﾜｰｸ排出_Sub実行完了
CON
JMP @MR3207
STG @MR3207
ANB @MR5402              ; MS-5ﾜｰｸ排出_Sub　実行中
JMP @MR3804              ; ｸﾘｰﾆﾝｸﾞへ
;<h1/>ｸﾘｰﾆﾝｸﾞ_Sub
;ｸﾘｰﾆﾝｸﾞ有無モードの追加　20130625　藤沢
STG @MR3804              ; ｸﾘｰﾆﾝｸﾞへ
ANB MR414                ; 20130625　　ｸﾘｰﾆﾝｸﾞ有無藤沢
MPS
ANB DM2001.8             ; COF挿入確認(0_有/1_無)
SET @MR5300              ; ｸﾘｰﾆﾝｸﾞ_Sub
CON
JMP @MR3805
MPP
AND DM2001.8             ; COF挿入確認(0_有/1_無)
JMP @MR3808
STG @MR3805
AND @MR5302              ; ｸﾘｰﾆﾝｸﾞ_Sub 実行中
AND @MR5301              ; ｸﾘｰﾆﾝｸﾞ_Sub 実行完了
RES @MR5301              ; ｸﾘｰﾆﾝｸﾞ_Sub 実行完了
CON
JMP @MR3806
STG @MR3806
ANB @MR5302              ; ｸﾘｰﾆﾝｸﾞ_Sub 実行中
JMP @MR3808
STG @MR3808
JMP @MR3810
STG @MR3810
JMP @MR3812
STG @MR3812
JMP @MR3814
STG @MR3814
JMP @MR3003              ; RepeatA
;Auto終了処理
STG @MR3900              ; Main1 END
AND @MR4001              ; Main2 END
AND CR2002               ; 常時ON
RES @MR4001              ; Main2 END
CON
JMP @MR3915              ; AUTO END
STG @MR3915              ; AUTO END
ZRES @MR6400 @MR6415     ; 熱ｶｼﾒ部3 管理_Sub  ★１_Repeat
CON
ZRES @MR100 @MR6415      ; Task0 ERROR  ★１_Repeat
CON
JMP LR604                ; _Grp1_Task4_Fin.STG
;<h1/>Auto-Main2/Autoﾒｲﾝﾙｰﾁﾝ2
;<h1/>■ﾒｲﾝｽﾗｲﾀﾞｰ（R18）下流側■
;[本STG内容]
;・@MR4000の起動はMain1にて行う事
;・@MR4000:AUTO_Main2開始、@MR4001:AUTO_Main2完了、@MR4002:AUTO_Main2動作中
STG @MR4000              ; AUTO Main2
SET @MR4002              ; Main2 Busy
CON
JMP @MR4003              ; RepeatA
;<h1/>ｶｼﾒUT1_ﾒﾝﾃﾅﾝｽ移行監視回路１
LD @MR4002               ; Main2 Busy
ANP B04A                 ; ｶｼﾒUT3_下流ﾒﾝﾃﾓｰﾄﾞ移行開始SW
OR MR11015               ; ｶｼﾒUT3_下流ﾒﾝﾃﾓｰﾄﾞ移行待ち
ANB MR11101              ; ｶｼﾒUT3_下流ﾒﾝﾃﾓｰﾄﾞ終了
MPS
OUT MR11015              ; ｶｼﾒUT3_下流ﾒﾝﾃﾓｰﾄﾞ移行待ち
MPP
LD CR2006                ; 1sｸﾛｯｸﾊﾟﾙｽ
OR MR11100               ; ｶｼﾒUT3_下流ﾒﾝﾃﾓｰﾄﾞ移行中
ANL
OUT B04B                 ; ｶｼﾒUT3_下流ﾒﾝﾃﾓｰﾄﾞ移行中LP
STG @MR4003              ; RepeatA
JMP @MR4306
;<<行コメント編集：Ctrl+Enter/Escで確定>>
STG @MR4306
MPS
LD CR2003                ; 常時OFF
ANB DM2000.6
ANL
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
JMP @MR4004
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
SET @MR1901              ; Main2 HALT許可
MPP
LD DM2000.6
OR CR2002                ; 常時ON
ANL
MPS
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
SET @MR1901              ; Main2 HALT許可
MPP
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
LD R46106                ; _定停止移行中
OR R47800                ; _Group1　ﾒﾝﾃ動作定停止移行中
ANL
ANL
SET @MR4801
CON
JMP @MR4914              ; Main2 ENDへ
STG @MR4914              ; Main2 ENDへ
JMP @MR4915              ; Main2 END
STG @MR4915              ; Main2 END
SET @MR4001              ; Main2 END
CON
RES @MR4002              ; Main2 Busy
CON
ENDS
;<h1/>MAINTE/ﾒﾝﾃﾅﾝｽ動作
;[本STG内容]
;・各TaskのMAINTE動作を記述して下さい
;・動作ﾓｰﾄﾞは「MAINTEAC*」に格納されています(1〜32)
;・動作終了時は@MR2915にJMPして下さい
STG LR5604               ; _Grp1_Task4_MAINTE.STG
JMP @MR2000              ; Mainte
STG @MR2000              ; Mainte
MPS
AND CR2003               ; 常時OFF
SET @MR2002              ; Mainte中
CON
JMP @MR2003
MPP
JMP @MR2003
LD @MR2002               ; Mainte中
AND CR2003               ; 常時OFF
MPS
AND= DM4110 #29          ; _Group1　ﾒﾝﾃ動作番号
@DW #2000 DM3008         ; _MainTP　切替ﾍﾟｰｼﾞNo
MRD
AND= DM4110 #21          ; _Group1　ﾒﾝﾃ動作番号
SET @MR2010              ; ﾒｲﾝｽﾗｲﾀﾞｰ 5_FLG
CON
RES @MR2011              ; ﾒｲﾝｽﾗｲﾀﾞｰ 6_FLG
CON
@SET @MR2015
MRD
AND= DM4110 #22          ; _Group1　ﾒﾝﾃ動作番号
SET @MR2011              ; ﾒｲﾝｽﾗｲﾀﾞｰ 6_FLG
CON
RES @MR2010              ; ﾒｲﾝｽﾗｲﾀﾞｰ 5_FLG
CON
@SET @MR2015
MPP
AND= DM4110 #4           ; _Group1　ﾒﾝﾃ動作番号
@SET @MR2411
STG @MR2003
MPS
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
SET @MR1901              ; Main2 HALT許可
MPP
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
MPS
AND CR2003               ; 常時OFF
MPS
AND= DM4110 #1           ; _Group1　ﾒﾝﾃ動作番号
JMP @MR2100
MRD
LD= DM4110 #26           ; _Group1　ﾒﾝﾃ動作番号
ANP R44915               ; Teaching End
ANL
JMP @MR2110
MPP
LD= DM4110 #29           ; _Group1　ﾒﾝﾃ動作番号
ANF R45015               ; 単動終了
ANL
JMP @MR2110
MPP
AND R47800               ; _Group1　ﾒﾝﾃ動作定停止移行中
JMP @MR2110
;<h1/> ｶｼﾒ動作UT3
LD @MR2010               ; ﾒｲﾝｽﾗｲﾀﾞｰ 5_FLG
AND R4613                ; 基板搬送 COFｶﾞｲﾄﾞ上下 上限
AND R4607                ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 開限
ANB R4606                ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 閉限
LD @MR2011               ; ﾒｲﾝｽﾗｲﾀﾞｰ 6_FLG
AND R4713                ; -
AND R4711                ; -
ANB R4710                ; -
ORL
OUT @MR2014              ; 実行条件
STG @MR2015
MPS
AND @MR2014              ; 実行条件
RES MR11300              ; 【SW1_Retry】ALM_RES_RB17
CON
RES MR11301              ; 【SW1_Retry】ALM_RES_RB18
CON
JMP @MR2004
MPP
ANB @MR2014              ; 実行条件
JMP @MR2110
STG @MR2004
MPS
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
MPS
AND @MR2010              ; ﾒｲﾝｽﾗｲﾀﾞｰ 5_FLG
MPS
LD R4613                 ; 基板搬送 COFｶﾞｲﾄﾞ上下 上限
ANB R36600               ; RB17 MOVE
ANB R36602               ; During RB17 MOVE
ANB R36601               ; RB17 MOVE END
ANL
MPS
LD= #7 EM1332            ; RB17Target Pos
AND MR3100               ; RB17 起動IL　ON=起動可能
ANL
SET R36600               ; RB17 MOVE
CON
JMP @MR2005
MPP
DW #7 EM1332             ; RB17Target Pos
MPP
ANB R4613                ; 基板搬送 COFｶﾞｲﾄﾞ上下 上限
JMP @MR2110
MPP
AND @MR2011              ; ﾒｲﾝｽﾗｲﾀﾞｰ 6_FLG
MPS
LD R4713                 ; -
ANB R36700               ; RB18 MOVE
ANB R36702               ; During RB18 MOVE
ANB R36701               ; RB18 MOVE END
ANL
MPS
LD= #7 EM1334            ; RB18Target Pos
AND MR3101               ; RB18 起動IL　ON=起動可能
ANL
SET R36700               ; RB18 MOVE
CON
JMP @MR2005
MPP
DW #7 EM1334             ; RB18Target Pos
MPP
ANB R4713                ; -
JMP @MR2110
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
CON
SET @MR1901              ; Main2 HALT許可
STG @MR2005
MPS
LD @MR2010               ; ﾒｲﾝｽﾗｲﾀﾞｰ 5_FLG
AND R36601               ; RB17 MOVE END
ANL
MPS
LDB R36603               ; RB17Alarm
AND T2306                ; RB17 Pos.7
ANB MR11300              ; 【SW1_Retry】ALM_RES_RB17
ANL
RES R36601               ; RB17 MOVE END
CON
JMP @MR2006
MPP
AND R36603               ; RB17Alarm
@SET MR16901             ; RB17ｴﾗｰ検出
CON
AND MR11300              ; 【SW1_Retry】ALM_RES_RB17
RES R36601               ; RB17 MOVE END
CON
JMP @MR2015
MPP
LD @MR2011               ; ﾒｲﾝｽﾗｲﾀﾞｰ 6_FLG
AND R36701               ; RB18 MOVE END
ANL
MPS
LDB R36703               ; RB18Alarm
AND T2326                ; RB18 Pos.7
ANB MR11301              ; 【SW1_Retry】ALM_RES_RB18
ANL
RES R36701               ; RB18 MOVE END
CON
JMP @MR2006
MPP
AND R36703               ; RB18Alarm
@SET MR16902             ; RB18ｴﾗｰ検出
CON
AND MR11301              ; 【SW1_Retry】ALM_RES_RB18
RES R36701               ; RB18 MOVE END
CON
JMP @MR2015
STG @MR2006
MPS
AND @MR2010              ; ﾒｲﾝｽﾗｲﾀﾞｰ 5_FLG
SET MR7615               ; 基板搬送 基板上下 上昇
CON
RES MR7614               ; 基板搬送 基板上下 下降
CON
AND R4615                ; 基板搬送 基板上下 上限
ANB R4614                ; 基板搬送 基板上下 下限
SET @MR6100              ; ｶｼﾒ動作実行_Sub
CON
JMP @MR2007
MPP
AND @MR2011              ; ﾒｲﾝｽﾗｲﾀﾞｰ 6_FLG
SET MR7614               ; 基板搬送 基板上下 下降
CON
RES MR7615               ; 基板搬送 基板上下 上昇
CON
AND R4614                ; 基板搬送 基板上下 下限
ANB R4615                ; 基板搬送 基板上下 上限
SET @MR6100              ; ｶｼﾒ動作実行_Sub
CON
JMP @MR2007
STG @MR2007
AND @MR6102              ; ｶｼﾒ動作実行_Sub　実行中
AND @MR6101              ; ｶｼﾒ動作実行_Sub実行完了
RES @MR6101              ; ｶｼﾒ動作実行_Sub実行完了
CON
JMP @MR2008
STG @MR2008
ANB @MR6102              ; ｶｼﾒ動作実行_Sub　実行中
RES MR11300              ; 【SW1_Retry】ALM_RES_RB17
CON
RES MR11301              ; 【SW1_Retry】ALM_RES_RB18
CON
JMP @MR2009
STG @MR2009
MPS
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
MPS
LD @MR2010               ; ﾒｲﾝｽﾗｲﾀﾞｰ 5_FLG
ANB R36600               ; RB17 MOVE
ANB R36602               ; During RB17 MOVE
ANB R36601               ; RB17 MOVE END
ANL
MPS
LD= #10 EM1332           ; RB17Target Pos
AND MR3100               ; RB17 起動IL　ON=起動可能
ANL
SET R36600               ; RB17 MOVE
CON
JMP @MR2012
MPP
DW #10 EM1332            ; RB17Target Pos
MPP
LD @MR2011               ; ﾒｲﾝｽﾗｲﾀﾞｰ 6_FLG
ANB R36700               ; RB18 MOVE
ANB R36702               ; During RB18 MOVE
ANB R36701               ; RB18 MOVE END
ANL
MPS
LD= #10 EM1334           ; RB18Target Pos
AND MR3101               ; RB18 起動IL　ON=起動可能
ANL
SET R36700               ; RB18 MOVE
CON
JMP @MR2012
MPP
DW #10 EM1334            ; RB18Target Pos
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
CON
SET @MR1901              ; Main2 HALT許可
STG @MR2012
MPS
LD @MR2010               ; ﾒｲﾝｽﾗｲﾀﾞｰ 5_FLG
AND R36601               ; RB17 MOVE END
ANL
MPS
LDB R36603               ; RB17Alarm
AND T2309                ; RB17 Pos.10
ANB MR11300              ; 【SW1_Retry】ALM_RES_RB17
ANL
RES R36601               ; RB17 MOVE END
CON
JMP @MR2013
MPP
AND R36603               ; RB17Alarm
@SET MR16901             ; RB17ｴﾗｰ検出
CON
AND MR11300              ; 【SW1_Retry】ALM_RES_RB17
RES R36601               ; RB17 MOVE END
CON
JMP @MR2008
MPP
LD @MR2011               ; ﾒｲﾝｽﾗｲﾀﾞｰ 6_FLG
AND R36701               ; RB18 MOVE END
ANL
MPS
LDB R36703               ; RB18Alarm
AND T2329                ; RB18 Pos.10
ANB MR11301              ; 【SW1_Retry】ALM_RES_RB18
ANL
RES R36701               ; RB18 MOVE END
CON
JMP @MR2013
MPP
AND R36703               ; RB18Alarm
@SET MR16902             ; RB18ｴﾗｰ検出
CON
AND MR11301              ; 【SW1_Retry】ALM_RES_RB18
RES R36701               ; RB18 MOVE END
CON
JMP @MR2008
STG @MR2013
JMP @MR2110
;<h1/> ｶｼﾒ加重測定動作
LD R4607                 ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 開限
ANB R4606                ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 閉限
AND= EM1332 #7           ; RB17Target Pos
AND MR3100               ; RB17 起動IL　ON=起動可能
OUT @MR2410              ; 起動条件OK
;RB移動先ｾｯﾄ
STG @MR2411
DW #7 EM1332             ; RB17Target Pos
CON
TMR #784 #5
CON
AND T784
JMP @MR2412
;ﾒｲﾝｽﾗｲﾀﾞ移動
STG @MR2412
MPS
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
MPS
LD @MR2410               ; 起動条件OK
ANB R36600               ; RB17 MOVE
ANB R36602               ; During RB17 MOVE
ANB R36601               ; RB17 MOVE END
AND= #7 EM1332           ; RB17Target Pos
AND MR3100               ; RB17 起動IL　ON=起動可能
ANL
SET R36600               ; RB17 MOVE
CON
JMP @MR2413
MPP
ANB @MR2410              ; 起動条件OK
JMP @MR2110
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
CON
SET @MR1901              ; Main2 HALT許可
STG @MR2413
AND R36601               ; RB17 MOVE END
ANB R36603               ; RB17Alarm
AND T2306                ; RB17 Pos.7
RES R36601               ; RB17 MOVE END
CON
JMP @MR2414
STG @MR2414
MPS
ANB MR4615               ; 基板搬送 基板上下 上限err
SET MR7615               ; 基板搬送 基板上下 上昇
CON
RES MR7614               ; 基板搬送 基板上下 下降
CON
AND R4615                ; 基板搬送 基板上下 上限
ANB R4614                ; 基板搬送 基板上下 下限
JMP @MR2415
MPP
LD MR4615                ; 基板搬送 基板上下 上限err
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR2415
MPS
ANB MR4608               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進限err
SET MR7608               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進
CON
RES MR7609               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退
CON
AND R4608                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進限
ANB R4609                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退限
JMP @MR2500
MPP
LD MR4608                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進限err
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
;加重値設定
STG @MR2500
MPS
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
MPS
AND MR415                ; 半田変更
LDA DM4526               ; 押付け電流(%)(U3)
CON
MUL #25500
CON
DIV #10000
CON
STA DM10794              ; RB12Current
CON
JMP @MR2501
MPP
ANB MR415                ; 半田変更
LDA DM4216               ; _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ RB17
CON
MUL #25500
CON
DIV #10000
CON
STA DM10794              ; RB12Current
CON
JMP @MR2501
MPP
ANB R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
LDA DM4216               ; _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ RB17
CON
MUL #25500
CON
DIV #10000
CON
STA DM10794              ; RB12Current
CON
JMP @MR2501
;RB12 WD_PUSH
STG @MR2501
RES MR11211              ; 【SW1_Retry】ALM_RES_RB12
CON
ANB R36100               ; RB12 MOVE
ANB R36102               ; During RB12 MOVE
ANB R36101               ; RB12 MOVE END
MPS
LD= #7 EM1322            ; RB12Target Pos
AND MR3011               ; RB12 起動IL　ON=起動可能
ANL
SET R36104               ; RB12 WD_PUSH
CON
JMP @MR2502
MPP
DW #7 EM1322             ; RB12Target Pos
STG @MR2502
JMP @MR2503
STG @MR2503
LD R002                  ; 操作BOX START SWﾗﾝﾌﾟ (正面)
OR R1000                 ;  操作BOX START SW (裏面)
ANL
OUT MR11604              ;  ｶｼﾒ U3(I_W) 離脱出力 (END1)
CON
JMP @MR2504
STG @MR2504
MPS
LDB R36102               ; During RB12 MOVE
AND R36105               ; RB12 PUSH END
ANB R36103               ; RB12Alarm
ANB MR11211              ; 【SW1_Retry】ALM_RES_RB12
ANL
RES R36105               ; RB12 PUSH END
CON
JMP @MR2505
MPP
AND R36103               ; RB12Alarm
@SET MR16812             ; RB12ｴﾗｰ検出
CON
AND MR11211              ; 【SW1_Retry】ALM_RES_RB12
RES R36105               ; RB12 PUSH END
CON
JMP @MR2501
;IAI 原点位置移動
STG @MR2505
RES MR11211              ; 【SW1_Retry】ALM_RES_RB12
CON
ANB R36100               ; RB12 MOVE
ANB R36102               ; During RB12 MOVE
ANB R1400
MPS
LD= #1 EM1322            ; RB12Target Pos
AND MR3011               ; RB12 起動IL　ON=起動可能
ANL
SET R36100               ; RB12 MOVE
CON
JMP @MR2506
MPP
DW #1 EM1322             ; RB12Target Pos
STG @MR2506
AND R36101               ; RB12 MOVE END
MPS
LDB R36103               ; RB12Alarm
AND T2210                ; RB12 Pos.1
ANB MR11211              ; 【SW1_Retry】ALM_RES_RB12
ANL
RES R36101               ; RB12 MOVE END
CON
JMP @MR2507
MPP
AND R36103               ; RB12Alarm
@SET MR16812             ; RB12ｴﾗｰ検出
CON
AND MR11211              ; 【SW1_Retry】ALM_RES_RB12
RES R36101               ; RB12 MOVE END
CON
JMP @MR2505
STG @MR2507
MPS
ANB MR4609               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退限err
SET MR7609               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退
CON
RES MR7608               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進
CON
AND R4609                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退限
ANB R4608                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進限
JMP @MR2508
MPP
LD MR4609                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退限err
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
;ﾒｲﾝｽﾗｲﾀﾞ移動
STG @MR2508
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB R36600               ; RB17 MOVE
ANB R36602               ; During RB17 MOVE
ANB R36601               ; RB17 MOVE END
ANL
MPS
LD= #10 EM1332           ; RB17Target Pos
AND MR3100               ; RB17 起動IL　ON=起動可能
ANL
SET R36600               ; RB17 MOVE
CON
JMP @MR2509
MPP
DW #10 EM1332            ; RB17Target Pos
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
CON
SET @MR1901              ; Main2 HALT許可
STG @MR2509
AND R36601               ; RB17 MOVE END
ANB R36603               ; RB17Alarm
AND T2309                ; RB17 Pos.10
RES R36601               ; RB17 MOVE END
CON
JMP @MR2510
STG @MR2510
JMP @MR2110
;<h1/>_MainTP　表示中ﾍﾟｰｼﾞNo2025
LD @MR2002               ; Mainte中
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10009              ; ｶｼﾒUT3     ｶﾊﾞｰ開
MC
LD @MR2002               ; Mainte中
AND= DM3000 #2025        ; _MainTP　表示中ﾍﾟｰｼﾞNo
MPS
ANP MR21900              ; M_ｽﾗ5 ｸﾘｰﾆﾝｸﾞﾛｰﾗ上下 上昇
RES MR7610               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 左右 右(下流)
MRD
ANP MR21901              ; M_ｽﾗ5 ｸﾘｰﾆﾝｸﾞﾛｰﾗ上下 下降
SET MR7610               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 左右 右(下流)
MRD
ANP MR21902              ; M_ｽﾗ5 ﾜｰｸ押さえ 下降
SET MR7608               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進
CON
RES MR7609               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退
MRD
ANP MR21903              ; M_ｽﾗ5 ﾜｰｸ押さえ 上昇
RES MR7608               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進
CON
SET MR7609               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退
MRD
ANP MR21904              ; M_ｽﾗ 5ﾍｯﾄﾞｻﾌﾞ位置決めﾋﾟﾝ下降
SET MR7608               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進
CON
RES MR7609               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退
MRD
ANP MR21905              ; M_ｽﾗ 5ﾍｯﾄﾞｻﾌﾞ位置決めﾋﾟﾝ上昇
RES MR7608               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進
CON
SET MR7609               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退
MRD
ANP MR21906              ; M_ｽﾗ5 H_ｻﾌﾞ 受けﾋﾟﾝ 下降
SET MR7613               ; 基板搬送 COFｶﾞｲﾄﾞ上下 上昇
CON
RES MR7612               ; 基板搬送 COFｶﾞｲﾄﾞ上下 下降
MRD
ANP MR21907              ; M_ｽﾗ5 H_ｻﾌﾞ 受けﾋﾟﾝ 上昇
RES MR7613               ; 基板搬送 COFｶﾞｲﾄﾞ上下 上昇
CON
SET MR7612               ; 基板搬送 COFｶﾞｲﾄﾞ上下 下降
MRD
LDP MR21908              ; M_ｽﾗ  ｽﾃｰｼﾞ5 吸着ON
ANB R8305                ; -
ANL
RES MR8304               ; -
CON
RES MR8305               ; -
CON
SET MR8303               ; -
MRD
ANP MR21909              ; M_ｽﾗ  ｽﾃｰｼﾞ5 吸着OFF
RES MR8303               ; -
CON
RES MR8305               ; -
CON
SET MR8304               ; -
MRD
LDP MR21910              ; M_ｽﾗ  ｽﾃｰｼﾞ5 破壊ON
ANB R8303                ; -
ANL
RES MR8303               ; -
CON
SET MR8304               ; -
CON
SET MR8305               ; -
MPP
ANP MR21911              ; M_ｽﾗ  ｽﾃｰｼﾞ5 破壊OFF
RES MR8303               ; -
CON
SET MR8304               ; -
CON
RES MR8305               ; -
LD @MR2002               ; Mainte中
AND= DM3000 #2025        ; _MainTP　表示中ﾍﾟｰｼﾞNo
MPS
ANP MR21912              ; RB17 Pos.1
DW #1 EM1332             ; RB17Target Pos
MRD
ANP MR21914              ; RB17 Pos.2
DW #2 EM1332             ; RB17Target Pos
MRD
ANP MR22000              ; RB17 Pos.3
DW #3 EM1332             ; RB17Target Pos
MRD
ANP MR22002              ; RB17 Pos.4
DW #4 EM1332             ; RB17Target Pos
MRD
ANP MR22004              ; RB17 Pos.5
DW #5 EM1332             ; RB17Target Pos
MRD
ANP MR22006              ; RB17 Pos.6
DW #6 EM1332             ; RB17Target Pos
MRD
ANP MR22008              ; RB17 Pos.7
DW #7 EM1332             ; RB17Target Pos
MRD
ANP MR22010              ; RB17 Pos.8
DW #8 EM1332             ; RB17Target Pos
MRD
ANP MR22012              ; RB17 Pos.9
DW #9 EM1332             ; RB17Target Pos
MRD
ANP MR22014              ; RB17 Pos.10
DW #10 EM1332            ; RB17Target Pos
MRD
ANP MR18800              ; RB17 Pos.11
DW #11 EM1332            ; RB17Target Pos
MRD
ANP MR17108              ; RB17 Pos.12
DW #12 EM1332            ; RB17Target Pos
MRD
LDP MR24600              ; RB起動
AND MR3100               ; RB17 起動IL　ON=起動可能
ANB R36610               ; During RB17 HOME
ANL
SET R36600               ; RB17 MOVE
CON
SET @MR2200              ; RB17 Pos.1
MPP
LDP MR24602              ; RB　原点復帰PB
AND MR3100               ; RB17 起動IL　ON=起動可能
ANB R36602               ; During RB17 MOVE
ANL
SET R36608               ; RB17 HOME
CON
SET @MR2201              ; RB17 Pos.2
STG @MR2200              ; RB17 Pos.1
AND R36601               ; RB17 MOVE END
RES R36601               ; RB17 MOVE END
CON
ENDS
STG @MR2201              ; RB17 Pos.2
AND R36609               ; RB17 HOME END
RES R36609               ; RB17 HOME END
CON
ENDS
;<h1/>_MainTP　表示中ﾍﾟｰｼﾞNo2026
LD @MR2002               ; Mainte中
AND= DM3000 #2026        ; _MainTP　表示中ﾍﾟｰｼﾞNo
MPS
ANP MR22100
RES MR7700               ; 基板搬送 COF挿入確認ｾﾝｻ上下 下降
MRD
ANP MR22101
SET MR7700               ; 基板搬送 COF挿入確認ｾﾝｻ上下 下降
MRD
ANP MR22102
SET MR7702               ; -
CON
RES MR7703               ; -
MRD
ANP MR22103
RES MR7702               ; -
CON
SET MR7703               ; -
MRD
ANP MR22104
SET MR7708               ; -
CON
RES MR7709               ; -
MRD
ANP MR22105
RES MR7708               ; -
CON
SET MR7709               ; -
MRD
ANP MR22106
SET MR7713               ; -
CON
RES MR7712               ; -
MRD
ANP MR22107
RES MR7713               ; -
CON
SET MR7712               ; -
MRD
LDP MR22108
ANB R8308                ; -
ANL
RES MR8307               ; -
CON
RES MR8308               ; -
CON
SET MR8306               ; -
MRD
ANP MR22109
RES MR8306               ; -
CON
RES MR8308               ; -
CON
SET MR8307               ; -
MRD
LDP MR22110
ANB R8306                ; -
ANL
RES MR8306               ; -
CON
SET MR8307               ; -
CON
SET MR8308               ; -
MPP
ANP MR22111
RES MR8306               ; -
CON
SET MR8307               ; -
CON
RES MR8308               ; -
LD @MR2002               ; Mainte中
AND= DM3000 #2026        ; _MainTP　表示中ﾍﾟｰｼﾞNo
MPS
ANP MR22112
DW #1 EM1334             ; RB18Target Pos
MRD
ANP MR22114
DW #2 EM1334             ; RB18Target Pos
MRD
ANP MR22200
DW #3 EM1334             ; RB18Target Pos
MRD
ANP MR22202
DW #4 EM1334             ; RB18Target Pos
MRD
ANP MR22204
DW #5 EM1334             ; RB18Target Pos
MRD
ANP MR22206
DW #6 EM1334             ; RB18Target Pos
MRD
ANP MR22208
DW #7 EM1334             ; RB18Target Pos
MRD
ANP MR22210
DW #8 EM1334             ; RB18Target Pos
MRD
ANP MR22212
DW #9 EM1334             ; RB18Target Pos
MRD
ANP MR22214
DW #10 EM1334            ; RB18Target Pos
MRD
ANP MR18802              ; RB18 Pos.11
DW #11 EM1334            ; RB18Target Pos
MRD
ANP MR17110              ; RB18 Pos.12
DW #12 EM1334            ; RB18Target Pos
MRD
LDP MR24600              ; RB起動
AND MR3101               ; RB18 起動IL　ON=起動可能
ANB R36710               ; During RB18 HOME
ANL
SET R36700               ; RB18 MOVE
CON
SET @MR2300              ; RB18 Pos.1
MPP
LDP MR24602              ; RB　原点復帰PB
AND MR3101               ; RB18 起動IL　ON=起動可能
ANB R36702               ; During RB18 MOVE
ANL
SET R36708               ; RB18 HOME
CON
SET @MR2301              ; RB18 Pos.2
STG @MR2300              ; RB18 Pos.1
AND R36701               ; RB18 MOVE END
RES R36701               ; RB18 MOVE END
CON
ENDS
STG @MR2301              ; RB18 Pos.2
AND R36709               ; RB18 HOME END
RES R36709               ; RB18 HOME END
CON
ENDS
;<h1/>_MainTP　表示中ﾍﾟｰｼﾞNo2029
LD @MR2002               ; Mainte中
AND= DM3000 #2029        ; _MainTP　表示中ﾍﾟｰｼﾞNo
MPS
LDP MR22700
AND T2210                ; RB12 Pos.1
ANL
SET MR7615               ; 基板搬送 基板上下 上昇
CON
RES MR7614               ; 基板搬送 基板上下 下降
MRD
LDP MR22701
AND T2210                ; RB12 Pos.1
ANL
RES MR7615               ; 基板搬送 基板上下 上昇
CON
SET MR7614               ; 基板搬送 基板上下 下降
MRD
AND MR22702
SET MR1500
MRD
ANB MR22702
RES MR1500
MRD
AND MR22703
SET MR1501
MRD
ANB MR22703
RES MR1501
MRD
AND MR22704
SET MR1502
MPP
ANB MR22704
RES MR1502
LD @MR2002               ; Mainte中
ANB R36102               ; During RB12 MOVE
ANB R36110               ; During RB12 HOME
AND= DM3000 #2029        ; _MainTP　表示中ﾍﾟｰｼﾞNo
MPS
ANP MR22709
DW #1 EM1322             ; RB12Target Pos
MRD
ANP MR22711
DW #2 EM1322             ; RB12Target Pos
MRD
ANP MR22713
DW #3 EM1322             ; RB12Target Pos
MRD
ANP MR22715
DW #4 EM1322             ; RB12Target Pos
MRD
ANP MR22801
DW #5 EM1322             ; RB12Target Pos
MRD
ANP MR22803
DW #6 EM1322             ; RB12Target Pos
MRD
ANP MR22805
DW #7 EM1322             ; RB12Target Pos
MRD
LDP MR24600              ; RB起動
AND MR3011               ; RB12 起動IL　ON=起動可能
ANL
SET R36100               ; RB12 MOVE
CON
SET @MR2400              ; RB12 Pos.1
MPP
LDP MR24602              ; RB　原点復帰PB
AND MR3011               ; RB12 起動IL　ON=起動可能
ANL
SET R36108               ; RB12 HOME
CON
SET @MR2401              ; RB12 Pos.2
STG @MR2400              ; RB12 Pos.1
AND R36101               ; RB12 MOVE END
RES R36101               ; RB12 MOVE END
CON
ENDS
STG @MR2401              ; RB12 Pos.2
AND R36109               ; RB12 HOME END
RES R36109               ; RB12 HOME END
CON
ENDS
;<h1/>_MainTP　表示中ﾍﾟｰｼﾞNo2044
LD @MR2002               ; Mainte中
AND= DM3000 #2044        ; _MainTP　表示中ﾍﾟｰｼﾞNo
MPS
ANP MR19700
SET MR7606               ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 閉
CON
RES MR7607               ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 開
MPP
ANP MR19701
RES MR7606               ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 閉
CON
SET MR7607               ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 開
;<h1/>_MainTP　表示中ﾍﾟｰｼﾞNo2045
LD @MR2002               ; Mainte中
AND= DM3000 #2045        ; _MainTP　表示中ﾍﾟｰｼﾞNo
MPS
ANP MR19800
SET MR7710               ; -
CON
RES MR7711               ; -
MPP
ANP MR19801
RES MR7710               ; -
CON
SET MR7711               ; -
MCR
;STEP　通常動作
STG @MR2100
SET @MR2102              ; STEP
CON
JMP @MR2103
STG @MR2103
MPS
MSTRT SELECT_POST #1 #0 #0 @MR1800;selectEND
MPP
AND @MR1800              ; selectEND
JMP @MR2105
STG @MR2105
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
SET @MR3204
CON
SET @MR4000              ; AUTO Main2
CON
JMP @MR2106
STG @MR2106
AND @MR2107              ; STEP　END
ANB @MR4002              ; Main2 Busy
RES @MR2102              ; STEP
CON
JMP @MR2108
;Maintenance　終了
STG @MR2108
ANB R39104               ; SELECT_Y_N Interlock
SET R39104               ; SELECT_Y_N Interlock
CON
DW #7 @DM21              ; ScreenNo /SELECT_Y_N
CON
DW #0 @DM22              ; Bz_Use /SELECT_Y_N
CON
SET @MR300               ; Task0 SELECT_Y_N
CON
JMP @MR2109
STG @MR2109
AND @MR301               ; Task0 Y/N END
RES @MR301               ; Task0 Y/N END
CON
RES R39104               ; SELECT_Y_N Interlock
CON
MPS
AND @MR306               ; Task0 Y/N
JMP @MR2000              ; Mainte
MPP
ANB @MR306               ; Task0 Y/N
JMP @MR2110
STG @MR2110
MCALL HOLD_REQUEST #1
JMP @MR2914
STG @MR2914
MPS
MCALL MODE_INDI #2
MPP
ANB @MR001               ; TASK0 ERROR
MPS
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
MPP
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
RES @MR2002              ; Mainte中
CON
JMP @MR2915
STG @MR2915
JMP LR604                ; _Grp1_Task4_Fin.STG
;<h1/>ERROR
;//*Error Sample
;[使用方法]
;・@DM1にERROR番号を代入
;・@DM2にSensor番号を代入(センサ無しエラーの場合は0)
;・@DM9に復帰SW番号(1〜9、0はSW無し)をdegit単位で4桁入力
;・Task0 ERROR SET(@MR100)でエラー処理開始
;・エラー復帰でTask0 ERROR END(@MR101)がON
;・押下復帰SW番号により左から対応した@MR105,@MR106,@MR107,@MR108のいずれかがON
;・上記ONが成立したらJMPするSTGに対応する処理を記述
;Error0を左側から1,2,3,4の番号に対応した復帰選択SWを出力する
;Error Sample *//
;Error Sample *//
;＠DM1のSW内容
;1:「ErrorReset」
;2:「再検出」
;3:「再検査」
;4:「動作継続」
;5:「定停止」
;6:「ﾜｰｸ除去」
;7:「電源断要求」
;8:「Retry」
;9:「再確認」
;RB17原点復帰ｴﾗｰ
LD MR13301               ; RB17原点復帰ｴﾗｰ
ANB R39004               ; ｴﾗｰ中
SET DM10835.3            ; RES(ﾘｾｯﾄ) RB17
CON
RES MR18500              ; 【sw1】RB17_HOME_ALM
CON
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #58 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR500
STG @MR500
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR13301              ; RB17原点復帰ｴﾗｰ
CON
AND @MR105               ; SW1
RES DM10835.3            ; RES(ﾘｾｯﾄ) RB17
CON
SET MR18500              ; 【sw1】RB17_HOME_ALM
CON
RES R36603               ; RB17Alarm
CON
ENDS
;RB18原点復帰ｴﾗｰ
LD MR13302               ; RB18原点復帰ｴﾗｰ
ANB R39004               ; ｴﾗｰ中
SET DM10843.3            ; RES(ﾘｾｯﾄ) RB18
CON
RES MR18501              ; 【sw1】RB18_HOME_ALM
CON
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #61 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR501
STG @MR501
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR13302              ; RB18原点復帰ｴﾗｰ
CON
AND @MR105               ; SW1
RES DM10843.3            ; RES(ﾘｾｯﾄ) RB18
CON
SET MR18501              ; 【sw1】RB18_HOME_ALM
CON
RES R36703               ; RB18Alarm
CON
ENDS
;RB12原点復帰ｴﾗｰ
LD MR13212               ; RB12原点復帰ｴﾗｰ
ANB R39004               ; ｴﾗｰ中
SET DM10795.3            ; RES(ﾘｾｯﾄ) RB12
CON
RES MR18411              ; 【sw1】RB12_HOME_ALM
CON
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #43 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR502
STG @MR502
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR13212              ; RB12原点復帰ｴﾗｰ
CON
AND @MR105               ; SW1
RES DM10795.3            ; RES(ﾘｾｯﾄ) RB12
CON
SET MR18411              ; 【sw1】RB12_HOME_ALM
CON
RES R36103               ; RB12Alarm
CON
ENDS
;RB12溶着RBｴﾗｰ
LD MR13515               ; 溶着RB12 動作ｴﾗｰ
ANB R39004               ; ｴﾗｰ中
ZRES MR13600 MR13601     ; SW1 溶着RB12 動作ｴﾗｰ  SW2 溶着RB12 動作ｴﾗｰ
CON
SET R39004               ; ｴﾗｰ中
CON
DW #1500 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #41 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR503
STG @MR503
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR13515              ; 溶着RB12 動作ｴﾗｰ
CON
MPS
AND @MR105               ; SW1
SET MR13600              ; SW1 溶着RB12 動作ｴﾗｰ
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR13601              ; SW2 溶着RB12 動作ｴﾗｰ
CON
ENDS
;ﾑﾈｶﾀ      異常出力_UT3
LD MR13603               ; ﾑﾈｶﾀ      異常出力_UT3
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1500 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #81 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR504
STG @MR504
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR13602              ; ﾑﾈｶﾀ_Alarm_UT3
CON
RES MR13603              ; ﾑﾈｶﾀ      異常出力_UT3
CON
ENDS
;溶着RB &ﾑﾈｶﾀ同時 ｴﾗｰ_UT3
LD MR13604               ; 溶着RB &ﾑﾈｶﾀ同時 ｴﾗｰ_UT3
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1500 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #86 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR505
STG @MR505
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR13602              ; ﾑﾈｶﾀ_Alarm_UT3
CON
RES MR13604              ; 溶着RB &ﾑﾈｶﾀ同時 ｴﾗｰ_UT3
CON
ENDS
;ﾒｲﾝｽﾗｲﾀﾞ5_受取り 未確定
LD MR14810               ; ﾒｲﾝｽﾗｲﾀﾞ5_受取り 未確定
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR14811 MR14812     ; SW1_再検査からｽﾀｰﾄ  SW2_ﾜｰｸ除去からｽﾀｰﾄ
CON
DW #3600 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #117 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #4613 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR506
STG @MR506
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR14810              ; ﾒｲﾝｽﾗｲﾀﾞ5_受取り 未確定
CON
MPS
AND @MR105               ; SW1
SET MR14811              ; SW1_再検査からｽﾀｰﾄ
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR14812              ; SW2_ﾜｰｸ除去からｽﾀｰﾄ
CON
ENDS
;ﾒｲﾝｽﾗｲﾀﾞ5_受渡し 未確定
LD MR14815               ; ﾒｲﾝｽﾗｲﾀﾞ5_受渡し 未確定
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR14900 MR14901     ; SW1_再検査からｽﾀｰﾄ  SW2_ﾜｰｸ除去からｽﾀｰﾄ
CON
DW #3600 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #118 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #4613 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR507
STG @MR507
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR14815              ; ﾒｲﾝｽﾗｲﾀﾞ5_受渡し 未確定
CON
MPS
AND @MR105               ; SW1
SET MR14900              ; SW1_再検査からｽﾀｰﾄ
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR14901              ; SW2_ﾜｰｸ除去からｽﾀｰﾄ
CON
ENDS
;ﾒｲﾝｽﾗｲﾀﾞ6_受取り 未確定
LD MR14905               ; ﾒｲﾝｽﾗｲﾀﾞ6_受取り 未確定
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR14906 MR14907     ; SW1_再検査からｽﾀｰﾄ  SW2_ﾜｰｸ除去からｽﾀｰﾄ
CON
DW #3600 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #120 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #4713 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR508
STG @MR508
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR14905              ; ﾒｲﾝｽﾗｲﾀﾞ6_受取り 未確定
CON
MPS
AND @MR105               ; SW1
SET MR14906              ; SW1_再検査からｽﾀｰﾄ
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR14907              ; SW2_ﾜｰｸ除去からｽﾀｰﾄ
CON
ENDS
;ﾒｲﾝｽﾗｲﾀﾞ6_受渡し 未確定
LD MR14910               ; ﾒｲﾝｽﾗｲﾀﾞ6_受渡し 未確定
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR14911 MR14912     ; SW1_再検査からｽﾀｰﾄ  SW2_ﾜｰｸ除去からｽﾀｰﾄ
CON
DW #3600 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #121 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #4713 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR509
STG @MR509
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR14910              ; ﾒｲﾝｽﾗｲﾀﾞ6_受渡し 未確定
CON
MPS
AND @MR105               ; SW1
SET MR14911              ; SW1_再検査からｽﾀｰﾄ
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR14912              ; SW2_ﾜｰｸ除去からｽﾀｰﾄ
CON
ENDS
;ﾒｲﾝｽﾗｲﾀﾞ5_Head-Sub 受取未確定
LD MR15600               ; ﾒｲﾝｽﾗｲﾀﾞ5_Head-Sub 受取未確定
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR15601 MR15602     ; SW1 ｢再確認] からのｽﾀｰﾄ  SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
CON
DW #9600 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #155 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #5312 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR510
STG @MR510
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR15600              ; ﾒｲﾝｽﾗｲﾀﾞ5_Head-Sub 受取未確定
CON
MPS
AND @MR105               ; SW1
SET MR15601              ; SW1 ｢再確認] からのｽﾀｰﾄ
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR15602              ; SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
CON
ENDS
;ﾒｲﾝｽﾗｲﾀﾞ6_Head-Sub 受取未確定
LD MR15510               ; ﾒｲﾝｽﾗｲﾀﾞ6_Head-Sub 受取未確定
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR15511 MR15512     ; SW1 ｢再確認] からのｽﾀｰﾄ  SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
CON
DW #9600 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #156 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #5314 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR511
STG @MR511
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR15510              ; ﾒｲﾝｽﾗｲﾀﾞ6_Head-Sub 受取未確定
CON
MPS
AND @MR105               ; SW1
SET MR15511              ; SW1 ｢再確認] からのｽﾀｰﾄ
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR15512              ; SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
CON
ENDS
;ﾒｲﾝｽﾗｲﾀﾞｰ5_吸着ON 未確定
LD MR16108               ; ﾒｲﾝｽﾗｲﾀﾞｰ5_吸着ON 未確定
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR16109 MR16110     ; SW1 ｢再確認] からのｽﾀｰﾄ  SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
CON
DW #9600 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #165 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #5312 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR512
STG @MR512
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR16108              ; ﾒｲﾝｽﾗｲﾀﾞｰ5_吸着ON 未確定
CON
MPS
AND @MR105               ; SW1
SET MR16109              ; SW1 ｢再確認] からのｽﾀｰﾄ
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR16110              ; SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
CON
ENDS
;ﾒｲﾝｽﾗｲﾀﾞｰ5_吸着OFF 未確定
LD MR16114               ; ﾒｲﾝｽﾗｲﾀﾞｰ5_吸着OFF 未確定
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR16115 MR16200     ; SW1 ｢再確認] からのｽﾀｰﾄ  SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
CON
DW #9600 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #165 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #5313 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR513
STG @MR513
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR16114              ; ﾒｲﾝｽﾗｲﾀﾞｰ5_吸着OFF 未確定
CON
MPS
AND @MR105               ; SW1
SET MR16115              ; SW1 ｢再確認] からのｽﾀｰﾄ
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR16200              ; SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
CON
ENDS
;ﾒｲﾝｽﾗｲﾀﾞｰ6_吸着ON 未確定
LD MR16203               ; ﾒｲﾝｽﾗｲﾀﾞｰ6_吸着ON 未確定
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR16204 MR16205     ; SW1 ｢再確認] からのｽﾀｰﾄ  SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
CON
DW #9600 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #166 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #5314 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR514
STG @MR514
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR16203              ; ﾒｲﾝｽﾗｲﾀﾞｰ6_吸着ON 未確定
CON
MPS
AND @MR105               ; SW1
SET MR16204              ; SW1 ｢再確認] からのｽﾀｰﾄ
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR16205              ; SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
CON
ENDS
;ﾒｲﾝｽﾗｲﾀﾞｰ6_吸着OFF 未確定
LD MR16208
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR16209 MR16210
CON
DW #9600 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #166 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #5315 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR515
STG @MR515
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR16208
CON
MPS
AND @MR105               ; SW1
SET MR16209
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR16210
CON
ENDS
;画像頭飛びALM発生 MS-5用
LD MR16213               ; 画像頭飛びALM発生 MS-5用
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR16214 MR16215     ; SW1 ｢動作継続] からのｽﾀｰﾄ  SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
CON
DW #4600 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #183 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR600
STG @MR600
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR16213              ; 画像頭飛びALM発生 MS-5用
CON
MPS
AND @MR105               ; SW1
SET MR16214              ; SW1 ｢動作継続] からのｽﾀｰﾄ
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR16215              ; SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
CON
ENDS
;画像頭飛びALM発生 MS-6用
LD MR16302               ; 画像頭飛びALM発生 MS-6用
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR16303 MR16304     ; SW1 ｢動作継続] からのｽﾀｰﾄ  SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
CON
DW #4600 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #184 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR601
STG @MR601
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR16302              ; 画像頭飛びALM発生 MS-6用
CON
MPS
AND @MR105               ; SW1
SET MR16303              ; SW1 ｢動作継続] からのｽﾀｰﾄ
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR16304              ; SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
CON
ENDS
;M-ｽﾗｲﾀﾞｰ5 ﾜｰｸ状況不確定
LD MR16505               ; M-ｽﾗｲﾀﾞｰ5 ﾜｰｸ状況不確定
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR16506 MR16507     ; SW1(5) ｢ﾜｰｸ除去]からのｽﾀｰﾄ　
CON
DW #6000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #171 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR602
STG @MR602
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR16505              ; M-ｽﾗｲﾀﾞｰ5 ﾜｰｸ状況不確定
CON
MPS
AND @MR105               ; SW1
SET MR16506              ; SW1(5) ｢ﾜｰｸ除去]からのｽﾀｰﾄ　
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR16507
CON
ENDS
;M-ｽﾗｲﾀﾞｰ6 ﾜｰｸ状況不確定
LD MR16510               ; M-ｽﾗｲﾀﾞｰ6 ﾜｰｸ状況不確定
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR16511 MR16512     ; SW1(6) ｢ﾜｰｸ除去]からのｽﾀｰﾄ　
CON
DW #6000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #172 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR603
STG @MR603
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR16510              ; M-ｽﾗｲﾀﾞｰ6 ﾜｰｸ状況不確定
CON
MPS
AND @MR105               ; SW1
SET MR16511              ; SW1(6) ｢ﾜｰｸ除去]からのｽﾀｰﾄ　
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR16512
CON
ENDS
;M-ｽﾗｲﾀﾞｰ5 ﾜｰｸ除去
LD MR16700               ; M-ｽﾗｲﾀﾞｰ5 ﾜｰｸ除去
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR16701 MR16702     ; SW1(5) ｢ﾜｰｸ除去]からのｽﾀｰﾄ　  SW2
CON
DW #6000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #177 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR604
STG @MR604
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR16700              ; M-ｽﾗｲﾀﾞｰ5 ﾜｰｸ除去
CON
MPS
AND @MR105               ; SW1
SET MR16701              ; SW1(5) ｢ﾜｰｸ除去]からのｽﾀｰﾄ　
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR16702              ; SW2
CON
ENDS
;M-ｽﾗｲﾀﾞｰ6 ﾜｰｸ除去
LD MR16704
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR16705 MR16706
CON
DW #6000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #178 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR605
STG @MR605
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR16704
CON
MPS
AND @MR105               ; SW1
SET MR16705
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR16706
CON
ENDS
;RB12 ｴﾗｰ
LD MR16812               ; RB12ｴﾗｰ検出
ANB R39004               ; ｴﾗｰ中
SET DM10795.3            ; RES(ﾘｾｯﾄ) RB12
CON
RES MR11211              ; 【SW1_Retry】ALM_RES_RB12
CON
SET R39004               ; ｴﾗｰ中
CON
DW #8000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #41 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR606
STG @MR606
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR16812              ; RB12ｴﾗｰ検出
CON
AND @MR105               ; SW1
RES DM10795.3            ; RES(ﾘｾｯﾄ) RB12
CON
SET MR11211              ; 【SW1_Retry】ALM_RES_RB12
CON
RES R36103               ; RB12Alarm
CON
ENDS
;RB17 ｴﾗｰ
LD MR16901               ; RB17ｴﾗｰ検出
ANB R39004               ; ｴﾗｰ中
SET DM10835.3            ; RES(ﾘｾｯﾄ) RB17
CON
RES MR11300              ; 【SW1_Retry】ALM_RES_RB17
CON
SET R39004               ; ｴﾗｰ中
CON
DW #8000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #56 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR607
STG @MR607
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR16901              ; RB17ｴﾗｰ検出
CON
AND @MR105               ; SW1
RES DM10835.3            ; RES(ﾘｾｯﾄ) RB17
CON
SET MR11300              ; 【SW1_Retry】ALM_RES_RB17
CON
RES R36603               ; RB17Alarm
CON
ENDS
;RB18 ｴﾗｰ
LD MR16902               ; RB18ｴﾗｰ検出
ANB R39004               ; ｴﾗｰ中
SET DM10843.3            ; RES(ﾘｾｯﾄ) RB18
CON
RES MR11301              ; 【SW1_Retry】ALM_RES_RB18
CON
SET R39004               ; ｴﾗｰ中
CON
DW #8000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #59 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR608
STG @MR608
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR16902              ; RB18ｴﾗｰ検出
CON
AND @MR105               ; SW1
RES DM10843.3            ; RES(ﾘｾｯﾄ) RB18
CON
SET MR11301              ; 【SW1_Retry】ALM_RES_RB18
CON
RES R36703               ; RB18Alarm
CON
ENDS
;MyTask Error Process Substance/エラー処理実体
STG @MR100               ; Task0 ERROR
ANB R39002               ; ERROR_DISP Busy
MPS
ZRES @MR105 @MR108       ; SW1
CON
LDA @DM9                 ; ReturnSW /ERROR_DISP
CON
TBCD
CON
STA @DM10
CON
DISN @DM10 @DM3 #4
MRD
DW #4 @DM0               ; TaskNo /ERROR_DISP
CON
BMOV @DM0 DM60000 #7     ; TaskNo /ERROR_DISP  TaskNo /ERROR_DISP
MPP
SET R39000               ; ERROR_DISP Start
CON
SET @MR102               ; Task4 ERROR Busy
CON
JMP @MR103
STG @MR103
AND R39002               ; ERROR_DISP Busy
AND= DM60008 @DM1        ; ReturnNo /ERROR_DISP  ErrorNo /ERROR_DISP
MPS
AND= DM60007 @DM6        ; ReturnSW /ERROR_DISP
SET @MR105               ; SW1
CON
JMP @MR104
MRD
AND= DM60007 @DM5        ; ReturnSW /ERROR_DISP
SET @MR106               ; SW2
CON
JMP @MR104
MRD
AND= DM60007 @DM4        ; ReturnSW /ERROR_DISP
SET @MR107               ; SW3
CON
JMP @MR104
MPP
AND= DM60007 @DM3        ; ReturnSW /ERROR_DISP
SET @MR108
CON
JMP @MR104
STG @MR104
ANB R39002               ; ERROR_DISP Busy
RES @MR102               ; Task4 ERROR Busy
CON
SET @MR101               ; Task0 ｴﾗｰ完了
CON
ENDS
;<h1/>SELECT_ACT
;//*Select_ACT Sample
;画面番号33をブザー有りで選択SW番号を左から#5,#10,#0(無し),#34の並びで表示する
STG @MR108
ANB R39204               ; SELECT_ACT Interlock
SET R39204               ; SELECT_ACT Interlock
CON
MPS
DW #33 @DM31             ; ScreenNo /SELECT_ACT
CON
DW #1 @DM32              ; Bz_Use /SELECT_ACT
CON
DW #5 @DM33              ; SW1_No /SELECT_ACT
CON
DW #10 @DM34             ; SW2_No /SELECT_ACT
CON
DW #0 @DM35              ; SW3_No /SELECT_ACT
CON
DW #34 @DM36             ; SW4_No /SELECT_ACT
MPP
SET @MR200               ; Task4 SELECT_ACT
CON
JMP @MR109
STG @MR109
AND @MR201               ; Task4 SEL_ACT END
RES @MR201               ; Task4 SEL_ACT END
CON
RES R39204               ; SELECT_ACT Interlock
CON
MPS
AND @MR205               ; SW1
JMP @MR110
MRD
AND @MR206               ; SW2
JMP @MR111
MRD
AND @MR207               ; SW3
JMP @MR112
MPP
AND @MR208
JMP @MR113
;Select_ACT Sample *//
;MyTask Select_ACT Process Substance/SELECT_ACT処理実体
STG @MR200               ; Task4 SELECT_ACT
ANB R39202               ; SELECT_ACT Busy
MPS
ZRES @MR205 @MR208       ; SW1
CON
DW #4 @DM30              ; TaskNo /SELECT_ACT
CON
BMOV @DM30 DM60030 #7    ; TaskNo /SELECT_ACT  TaskNo /SELECT_ACT
MPP
SET R39200               ; SELECT_ACT Start
CON
SET @MR202               ; Task4 SEL_ACT Busy
CON
JMP @MR203
STG @MR203
AND R39202               ; SELECT_ACT Busy
AND<> DM60037 #0         ; SelectSW /SELECT_ACT
MPS
AND= DM60037 #1          ; SelectSW /SELECT_ACT
SET @MR205               ; SW1
CON
JMP @MR204
MRD
AND= DM60037 #2          ; SelectSW /SELECT_ACT
SET @MR206               ; SW2
CON
JMP @MR204
MRD
AND= DM60037 #3          ; SelectSW /SELECT_ACT
SET @MR207               ; SW3
CON
JMP @MR204
MPP
AND= DM60037 #4          ; SelectSW /SELECT_ACT
SET @MR208
CON
JMP @MR204
STG @MR204
ANB R39202               ; SELECT_ACT Busy
RES @MR202               ; Task4 SEL_ACT Busy
CON
SET @MR201               ; Task4 SEL_ACT END
CON
ENDS
;<h1/>SELECT_Y_N
;//*Select_Y_N Sample
STG @MR208
ANB R39104               ; SELECT_Y_N Interlock
SET R39104               ; SELECT_Y_N Interlock
CON
DW #7 @DM21              ; ScreenNo /SELECT_Y_N
CON
DW #0 @DM22              ; Bz_Use /SELECT_Y_N
CON
SET @MR300               ; Task0 SELECT_Y_N
CON
JMP @MR209
STG @MR209
AND @MR301               ; Task0 Y/N END
RES @MR301               ; Task0 Y/N END
CON
RES R39104               ; SELECT_Y_N Interlock
CON
MPS
AND @MR306               ; Task0 Y/N
JMP @MR210
MPP
ANB @MR306               ; Task0 Y/N
JMP @MR211
;*Select_Y_N Sample//
;MyTask Select_Y_N Process Substance/SELECT_Y_N処理実体
STG @MR300               ; Task0 SELECT_Y_N
ANB R39102               ; SELECT_Y_N Busy
MPS
ZRES @MR306 @MR307       ; Task0 Y/N
CON
DW #4 @DM20              ; TaskNo /SELECT_Y_N
CON
BMOV @DM20 DM60020 #3    ; TaskNo /SELECT_Y_N  TaskNo /SELECT_Y_N
MPP
SET R39100               ; SELECT_Y_N Start
CON
SET @MR302               ; Task4 Y_N Busy
CON
JMP @MR303
STG @MR303
AND R39102               ; SELECT_Y_N Busy
MPS
AND= DM60023 #1          ; Y_N /SELECT_Y_N
SET @MR306               ; Task0 Y/N
CON
JMP @MR304
MPP
AND= DM60023 #2          ; Y_N /SELECT_Y_N
RES @MR306               ; Task0 Y/N
CON
JMP @MR304
STG @MR304
ANB R39102               ; SELECT_Y_N Busy
RES @MR302               ; Task4 Y_N Busy
CON
SET @MR301               ; Task0 Y/N END
CON
ENDS
;<h1/>TIMEUP_ERROR
;//*TIMEUP_ERROR Sample
;サンプルセンサ:MR5000=ON AND MR5001 = OFF のいずれかが5sタイムアップしたらTIMEUP_ERROR出力
;エラー復帰後、再度センサ確認
STG @MR308
MPS
LD MR5000                ; FFU(NG排出)ALM1err
ANB MR5001               ; FFU(NG排出)ALM2err
ANL
JMP @MR315
MPP
LDB MR5000               ; FFU(NG排出)ALM1err
OR MR5001                ; FFU(NG排出)ALM2err
ANL
TMR @0 #50
CON
AND @T0
JMP @MR309
STG @MR309
ANB R39304               ; TIMEUP_ERR Interlock
SET R39304               ; TIMEUP_ERR Interlock
CON
DW #16 @DM41             ; SensorNo /TIMEUP_ERR
CON
SET @MR400               ; Task4 TIMEUP_ERR
CON
JMP @MR310
STG @MR310
AND @MR401               ; Task4 TIMEUP_END
RES R39304               ; TIMEUP_ERR Interlock
CON
RES @MR401               ; Task4 TIMEUP_END
CON
JMP @MR308
;TIMEUP_ERROR Sample *//
;MyTask TIMEUP_ERROR Process Substance/TIMEUP_ERROR処理実体
STG @MR400               ; Task4 TIMEUP_ERR
ANB R39302               ; TIMEUP_ERR Busy
MPS
DW #4 @DM40              ; TaskNo /TIMEUP_ERR
CON
BMOV @DM40 DM60040 #2    ; TaskNo /TIMEUP_ERR  TaskNo /TIMEUP_ERR
MPP
SET R39300               ; TIMEUP_ERR Start
CON
SET @MR402               ; Task4 TIMEUP Busy
CON
JMP @MR403
STG @MR403
AND R39302               ; TIMEUP_ERR Busy
JMP @MR404
STG @MR404
ANB R39302               ; TIMEUP_ERR Busy
RES @MR402               ; Task4 TIMEUP Busy
CON
SET @MR401               ; Task4 TIMEUP_END
CON
ENDS
;<h1/>HALT
LD @MR1900               ; Main1 HALT許可
LD @MR1901               ; Main2 HALT許可
ORB @MR4002              ; Main2 Busy
ANL
LD @MR1002               ; HOME中
LD @MR1900               ; Main1 HALT許可
OR @MR1901               ; Main2 HALT許可
ANL
ORL
LDB R46103               ; _停止中　ﾓｰﾄﾞﾌﾗｸﾞ
AND R41004               ; _Grp1_Task4_起動中ﾌﾗｸﾞ
ORL
MPS
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
TMR @2 #2
CON
AND @T2
SET R42604               ; _Grp1_Task4_ﾎﾟｰｽﾞ許可
MPP
AND MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
TMR @9 #2
CON
AND @T9
SET MR10010              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ許可
LD R42604                ; _Grp1_Task4_ﾎﾟｰｽﾞ許可
OR MR10010               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ許可
RES @MR1900              ; Main1 HALT許可
CON
RES @MR1901              ; Main2 HALT許可
LD CR2003                ; 常時OFF
MC
;<h1/>SubRoutines/ｻﾌﾞﾙｰﾁﾝ
;[記述方法]
;・ｻﾌﾞﾙｰﾁﾝは本ﾌﾞｯｸﾏｰｸから下に記述していって下さい
;・ｻﾌﾞﾙｰﾁﾝは必ずﾌﾞｯｸﾏｰｸを挿入して処理内容を明確にする事
;<h1/>01_5000_Pause処理1
STG @MR5000              ; Pause処理1_Sub_START
SET @MR5002              ; Pause処理_　Sub_Exc
CON
JMP @MR5015
STG @MR5015
SET @MR1900              ; Main1 HALT許可
CON
JMP @MR5003
STG @MR5003
AND R42602               ; _Grp1_Task2_ﾎﾟｰｽﾞ許可
JMP @MR5004
STG @MR5004
AND R42600               ; _Grp1_Task0_ﾎﾟｰｽﾞ許可
AND R42601               ; _Grp1_Task1_ﾎﾟｰｽﾞ許可
AND R42602               ; _Grp1_Task2_ﾎﾟｰｽﾞ許可
AND R42603               ; _Grp1_Task3_ﾎﾟｰｽﾞ許可
AND R42604               ; _Grp1_Task4_ﾎﾟｰｽﾞ許可
AND R42605               ; _Grp1_Task5_ﾎﾟｰｽﾞ許可
AND R42606               ; _Grp1_Task6_ﾎﾟｰｽﾞ許可
AND R42607               ; _Grp1_Task7_ﾎﾟｰｽﾞ許可
AND R42608               ; _Grp1_Task8_ﾎﾟｰｽﾞ許可
AND R42609               ; _Grp1_Task9_ﾎﾟｰｽﾞ許可
JMP @MR5005
STG @MR5005
RES @MR1900              ; Main1 HALT許可
CON
JMP @MR5006
STG @MR5006
ANB R42600               ; _Grp1_Task0_ﾎﾟｰｽﾞ許可
ANB R42601               ; _Grp1_Task1_ﾎﾟｰｽﾞ許可
ANB R42602               ; _Grp1_Task2_ﾎﾟｰｽﾞ許可
ANB R42603               ; _Grp1_Task3_ﾎﾟｰｽﾞ許可
ANB R42604               ; _Grp1_Task4_ﾎﾟｰｽﾞ許可
ANB R42605               ; _Grp1_Task5_ﾎﾟｰｽﾞ許可
ANB R42606               ; _Grp1_Task6_ﾎﾟｰｽﾞ許可
ANB R42607               ; _Grp1_Task7_ﾎﾟｰｽﾞ許可
ANB R42608               ; _Grp1_Task8_ﾎﾟｰｽﾞ許可
ANB R42609               ; _Grp1_Task9_ﾎﾟｰｽﾞ許可
JMP @MR5007
STG @MR5007
JMP @MR5008
STG @MR5008
JMP @MR5009
STG @MR5009
JMP @MR5010
STG @MR5010
JMP @MR5011
STG @MR5011
JMP @MR5012
STG @MR5012
JMP @MR5013
STG @MR5013
JMP @MR5014
STG @MR5014
@SET @MR5001             ; PAUSE処理 Sub_End
CON
ANB @MR5001              ; PAUSE処理 Sub_End
RES @MR5002              ; Pause処理_　Sub_Exc
CON
ENDS
;<h1/>02_5100 原点復帰用
;He-Subのみ有
STG @MR5100              ; Heｻﾌﾞのみ　Sub-5
MPS
LDB MR4607               ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 開限err
ANB MR4609               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退限err
ANL
SET MR7613               ; 基板搬送 COFｶﾞｲﾄﾞ上下 上昇
CON
RES MR7612               ; 基板搬送 COFｶﾞｲﾄﾞ上下 下降
CON
SET MR7609               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退
CON
RES MR7608               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進
CON
AND R4607                ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 開限
ANB R4606                ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 閉限
AND R4609                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退限
ANB R4608                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進限
SET @MR5101              ; Heｻﾌﾞのみ　Sub-5_End
CON
ENDS
MPP
LD MR4607                ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 開限err
OR MR4609                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退限err
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR5102              ; Heｻﾌﾞのみ　Sub-6
MPS
LDB MR4711               ; -err
ANB MR4709               ; -err
ANL
SET MR7713               ; -
CON
RES MR7712               ; -
CON
SET MR7709               ; -
CON
RES MR7708               ; -
CON
AND R4711                ; -
ANB R4710                ; -
AND R4709                ; -
ANB R4708                ; -
SET @MR5103              ; Heｻﾌﾞのみ　Sub-6_End
CON
ENDS
MPP
LD MR4711                ; -err
OR MR4709                ; -err
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
;Ho-Sub有の時
STG @MR5104              ; Ho-ｻﾌﾞ有-5 _Sub
MPS
LDB MR4607               ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 開限err
ANB MR4608               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進限err
ANL
SET MR7613               ; 基板搬送 COFｶﾞｲﾄﾞ上下 上昇
CON
RES MR7612               ; 基板搬送 COFｶﾞｲﾄﾞ上下 下降
CON
SET MR7608               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進
CON
RES MR7609               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退
CON
AND R4607                ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 開限
ANB R4606                ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 閉限
AND R4608                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進限
ANB R4609                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退限
SET @MR5105              ; Ho-ｻﾌﾞ有-5 _SubEnd
CON
ENDS
MPP
LD MR4607                ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 開限err
OR MR4608                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進限err
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR5106              ; Ho-ｻﾌﾞ有-6 _Sub
MPS
LDB MR4711               ; -err
ANB MR4708               ; -err
ANL
SET MR7713               ; -
CON
RES MR7712               ; -
CON
SET MR7708               ; -
CON
RES MR7709               ; -
CON
AND R4711                ; -
ANB R4710                ; -
AND R4708                ; -
ANB R4709                ; -
SET @MR5107              ; Ho-ｻﾌﾞ有-6 _SubEnd
CON
ENDS
MPP
LD MR4711                ; -err
OR MR4708                ; -err
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANL
SET MR7712               ; -
CON
RES MR7713               ; -
CON
SET @MR1900              ; Main1 HALT許可
; He-SubとHo−Sub　両方なし
STG @MR5108              ; He-SubとHo−Sub　両方無し-5
MPS
LDB MR4607               ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 開限err
ANB MR4608               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進限err
ANL
SET MR7613               ; 基板搬送 COFｶﾞｲﾄﾞ上下 上昇
CON
RES MR7612               ; 基板搬送 COFｶﾞｲﾄﾞ上下 下降
CON
SET MR7608               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進
CON
RES MR7609               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退
CON
AND R4607                ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 開限
ANB R4606                ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 閉限
AND R4608                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進限
ANB R4609                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退限
SET @MR5109              ; He-SubとHo−Sub　両方無し-5_End
CON
ENDS
MPP
LD MR4607                ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 開限err
OR MR4608                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進限err
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR5110              ; He-SubとHo−Sub　両方無し-6
MPS
LDB MR4711               ; -err
ANB MR4708               ; -err
ANL
SET MR7713               ; -
CON
RES MR7712               ; -
CON
SET MR7708               ; -
CON
RES MR7709               ; -
CON
AND R4711                ; -
ANB R4710                ; -
AND R4708                ; -
ANB R4709                ; -
SET @MR5111              ; He-SubとHo−Sub　両方無し-6_End
CON
ENDS
MPP
LD MR4711                ; -err
OR MR4708                ; -err
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR5113
JMP @MR5114
STG @MR5114
@SET @MR5115             ; ***_Sub実行完了
CON
ANB @MR5115              ; ***_Sub実行完了
RES @MR5101              ; Heｻﾌﾞのみ　Sub-5_End
CON
ENDS
;<h1/>03_5200 R17補正量算出_Sub
STG @MR5200              ; RB17補正量算出_Sub
SET @MR5202              ; RB17補正量算出_Sub　実行中
CON
JMP @MR5215
STG @MR5215
JMP @MR5203
STG @MR5203
MPS
ANB CR2002               ; 常時ON
LDA EM19606              ; RB17目標値（下位）2
CON
ADD #0
CON
STA EM19612              ; RB17目標値（下位）3
CON
JMP @MR5204
MPP
JMP @MR5204
STG @MR5204
JMP @MR5205
STG @MR5205
JMP @MR5206
STG @MR5206
JMP @MR5207
STG @MR5207
JMP @MR5208
STG @MR5208
JMP @MR5209
STG @MR5209
JMP @MR5210
STG @MR5210
JMP @MR5211
STG @MR5211
JMP @MR5212
STG @MR5212
JMP @MR5213
STG @MR5213
JMP @MR5214
STG @MR5214
@SET @MR5201             ; RB17補正量算出_Sub実行完了
CON
ANB @MR5201              ; RB17補正量算出_Sub実行完了
RES @MR5202              ; RB17補正量算出_Sub　実行中
CON
ENDS
;<h1/>04_5300　ｸﾘｰﾆﾝｸﾞ_Sub
STG @MR5300              ; ｸﾘｰﾆﾝｸﾞ_Sub
SET @MR5302              ; ｸﾘｰﾆﾝｸﾞ_Sub 実行中
CON
JMP @MR5315
STG @MR5315
JMP @MR5303
STG @MR5303
MPS
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
RES MR11300              ; 【SW1_Retry】ALM_RES_RB17
CON
ANB R36600               ; RB17 MOVE
ANB R36602               ; During RB17 MOVE
ANB R36601               ; RB17 MOVE END
MPS
LD= #8 EM1332            ; RB17Target Pos
AND MR3100               ; RB17 起動IL　ON=起動可能
ANL
SET R36600               ; RB17 MOVE
CON
JMP @MR5304
MPP
DW #8 EM1332             ; RB17Target Pos
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
STG @MR5304
AND R36601               ; RB17 MOVE END
MPS
LDB R36603               ; RB17Alarm
AND T2307                ; RB17 Pos.8
ANB MR11300              ; 【SW1_Retry】ALM_RES_RB17
ANL
RES R36601               ; RB17 MOVE END
CON
JMP @MR5305
MPP
AND R36603               ; RB17Alarm
@SET MR16901             ; RB17ｴﾗｰ検出
CON
AND MR11300              ; 【SW1_Retry】ALM_RES_RB17
RES R36601               ; RB17 MOVE END
CON
JMP @MR5303
STG @MR5305
JMP @MR5306
STG @MR5306
MPS
ANB MR4610               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 左右 右限(下流側)e
SET MR7610               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 左右 右(下流)
CON
AND R4610                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 左右 右限(下流側)
ANB R4611                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 左右 左限(上流側)
JMP @MR5307
MPP
LD MR4610                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 左右 右限(下流側)e
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR5307
JMP @MR5308
STG @MR5308
MPS
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
RES MR11300              ; 【SW1_Retry】ALM_RES_RB17
CON
ANB R36600               ; RB17 MOVE
ANB R36602               ; During RB17 MOVE
ANB R36601               ; RB17 MOVE END
MPS
LD= #9 EM1332            ; RB17Target Pos
AND MR3100               ; RB17 起動IL　ON=起動可能
ANL
SET R36600               ; RB17 MOVE
CON
JMP @MR5309
MPP
DW #9 EM1332             ; RB17Target Pos
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
STG @MR5309
AND R36601               ; RB17 MOVE END
MPS
LDB R36603               ; RB17Alarm
AND T2308                ; RB17 Pos.9
ANB MR11300              ; 【SW1_Retry】ALM_RES_RB17
ANL
RES R36601               ; RB17 MOVE END
CON
JMP @MR5310
MPP
AND R36603               ; RB17Alarm
@SET MR16901             ; RB17ｴﾗｰ検出
CON
AND MR11300              ; 【SW1_Retry】ALM_RES_RB17
RES R36601               ; RB17 MOVE END
CON
JMP @MR5308
STG @MR5310
JMP @MR5311
STG @MR5311
MPS
ANB MR4611               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 左右 左限(上流側)e
RES MR7610               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 左右 右(下流)
CON
AND R4611                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 左右 左限(上流側)
ANB R4610                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 左右 右限(下流側)
JMP @MR5312
MPP
LD MR4611                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 左右 左限(上流側)e
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR5312
JMP @MR5313
STG @MR5313
JMP @MR5314
STG @MR5314
@SET @MR5301             ; ｸﾘｰﾆﾝｸﾞ_Sub 実行完了
CON
ANB @MR5301              ; ｸﾘｰﾆﾝｸﾞ_Sub 実行完了
RES @MR5302              ; ｸﾘｰﾆﾝｸﾞ_Sub 実行中
CON
ENDS
;<h1/>05_5400 MS-5ﾜｰｸ排出_Sub
STG @MR5400              ; MS-5ﾜｰｸ排出_Sub
SET @MR5402              ; MS-5ﾜｰｸ排出_Sub　実行中
CON
JMP @MR5415
STG @MR5415
MPS
ANB MR4607               ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 開限err
SET MR7613               ; 基板搬送 COFｶﾞｲﾄﾞ上下 上昇
CON
RES MR7612               ; 基板搬送 COFｶﾞｲﾄﾞ上下 下降
CON
AND R4607                ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 開限
ANB R4606                ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 閉限
JMP @MR5412
MPP
LD MR4607                ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 開限err
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR5412
MPS
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
RES MR11300              ; 【SW1_Retry】ALM_RES_RB17
CON
ANB R36600               ; RB17 MOVE
ANB R36602               ; During RB17 MOVE
ANB R36601               ; RB17 MOVE END
MPS
LD= #10 EM1332           ; RB17Target Pos
AND MR3100               ; RB17 起動IL　ON=起動可能
ANL
SET R36600               ; RB17 MOVE
CON
JMP @MR5403
MPP
DW #10 EM1332            ; RB17Target Pos
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
STG @MR5403
AND R36601               ; RB17 MOVE END
MPS
LDB R36603               ; RB17Alarm
AND T2309                ; RB17 Pos.10
ANB MR11300              ; 【SW1_Retry】ALM_RES_RB17
ANL
RES R36601               ; RB17 MOVE END
CON
JMP @MR5404              ; Repeat ALM発砲
MPP
AND R36603               ; RB17Alarm
@SET MR16901             ; RB17ｴﾗｰ検出
CON
AND MR11300              ; 【SW1_Retry】ALM_RES_RB17
RES R36601               ; RB17 MOVE END
CON
JMP @MR5412
;ALM発砲
STG @MR5404              ; Repeat ALM発砲
SET MR12512              ; MS-5 強制吸着OFF
CON
SET MR16710              ; ｶｼﾒUT3ドア開有効
CON
MPS
ANB DM11215.5            ; RB17 画像検査中
SET MR16700              ; M-ｽﾗｲﾀﾞｰ5 ﾜｰｸ除去
CON
JMP @MR5405
MPP
AND DM11215.5            ; RB17 画像検査中
SET MR16213              ; 画像頭飛びALM発生 MS-5用
CON
JMP @MR5409
STG @MR5405
MPS
LDB MR16700              ; M-ｽﾗｲﾀﾞｰ5 ﾜｰｸ除去
AND MR16701              ; SW1(5) ｢ﾜｰｸ除去]からのｽﾀｰﾄ　
ANL
JMP @MR5406
MPP
LD MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
OR MR10010               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ許可
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR5406
MPS
LDB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANB MR10010              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ許可
ANL
SET MR12505              ; ﾒｲﾝｽﾗｲﾀﾞ5 He-subﾜｰｸ有無確認
CON
JMP @MR5407
MPP
LD MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
OR MR10010               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ許可
ANL
JMP @MR5404              ; Repeat ALM発砲
STG @MR5407
ANB MR12505              ; ﾒｲﾝｽﾗｲﾀﾞ5 He-subﾜｰｸ有無確認
MPS
LD MR12509               ; ﾒｲﾝｽﾗｲﾀﾞ5 ﾜｰｸ有
OR R4613                 ; 基板搬送 COFｶﾞｲﾄﾞ上下 上限
ANL
JMP @MR5404              ; Repeat ALM発砲
MPP
LD MR12510               ; ﾒｲﾝｽﾗｲﾀﾞ5 ﾜｰｸ無
ANB R4613                ; 基板搬送 COFｶﾞｲﾄﾞ上下 上限
ANL
DW #0 DM11215            ; MS-5 ﾜｰｸ状況ｽﾃｰﾀｽ
CON
JMP @MR5408
STG @MR5408
RES @MR1900              ; Main1 HALT許可
CON
RES MR16710              ; ｶｼﾒUT3ドア開有効
CON
JMP @MR5414
;画像頭飛びALM発生時
STG @MR5409
MPS
LDB MR16213              ; 画像頭飛びALM発生 MS-5用
LD MR16214               ; SW1 ｢動作継続] からのｽﾀｰﾄ
OR MR16215               ; SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
ANL
ANL
JMP @MR5410
MPP
LD MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
OR MR10010               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ許可
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR5410
MPS
LD MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
OR MR10010               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ許可
ANL
JMP @MR5404              ; Repeat ALM発砲
MPP
LDB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
MPS
AND MR16214              ; SW1 ｢動作継続] からのｽﾀｰﾄ
MPS
AND R4613                ; 基板搬送 COFｶﾞｲﾄﾞ上下 上限
BSET DM11215 #7          ; MS-5 ﾜｰｸ状況ｽﾃｰﾀｽ
CON
BRES DM11215 #15         ; MS-5 ﾜｰｸ状況ｽﾃｰﾀｽ
CON
JMP @MR5411
MPP
ANB R4613                ; 基板搬送 COFｶﾞｲﾄﾞ上下 上限
JMP @MR5404              ; Repeat ALM発砲
MPP
AND MR16215              ; SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
MPS
ANB R4613                ; 基板搬送 COFｶﾞｲﾄﾞ上下 上限
DW #0 DM11215            ; MS-5 ﾜｰｸ状況ｽﾃｰﾀｽ
CON
JMP @MR5411
MPP
AND R4613                ; 基板搬送 COFｶﾞｲﾄﾞ上下 上限
JMP @MR5404              ; Repeat ALM発砲
STG @MR5411
RES @MR1900              ; Main1 HALT許可
CON
RES MR16710              ; ｶｼﾒUT3ドア開有効
CON
JMP @MR5413
STG @MR5413
JMP @MR5414
STG @MR5414
@SET @MR5401             ; MS-5ﾜｰｸ排出_Sub実行完了
CON
ANB @MR5401              ; MS-5ﾜｰｸ排出_Sub実行完了
RES @MR5402              ; MS-5ﾜｰｸ排出_Sub　実行中
CON
ENDS
;<h1/>06_5500 RB17在荷確認_Sub
STG @MR5500              ; RB17在荷確認_Sub
SET @MR5502              ; RB17在荷確認_Sub　実行中
CON
JMP @MR5503
STG @MR5503
SET MR12505              ; ﾒｲﾝｽﾗｲﾀﾞ5 He-subﾜｰｸ有無確認
CON
JMP @MR5504
STG @MR5504
ANB MR12505              ; ﾒｲﾝｽﾗｲﾀﾞ5 He-subﾜｰｸ有無確認
MPS
AND MR12509              ; ﾒｲﾝｽﾗｲﾀﾞ5 ﾜｰｸ有
MPS
AND DM11215.0            ; RB17 ﾍｯﾄﾞSub　受取完了　記憶
JMP @MR5505
MPP
ANB DM11215.0            ; RB17 ﾍｯﾄﾞSub　受取完了　記憶
JMP @MR5511
MPP
AND MR12510              ; ﾒｲﾝｽﾗｲﾀﾞ5 ﾜｰｸ無
MPS
ANB DM11215.0            ; RB17 ﾍｯﾄﾞSub　受取完了　記憶
JMP @MR5514
MPP
LD DM11215.0             ; RB17 ﾍｯﾄﾞSub　受取完了　記憶
OR R4613                 ; 基板搬送 COFｶﾞｲﾄﾞ上下 上限
ANL
JMP @MR5511
STG @MR5505
MPS
ANB R4613                ; 基板搬送 COFｶﾞｲﾄﾞ上下 上限
MPS
ANB DM11215.1            ; RB17 ﾎﾙﾀﾞｰSub　組込中
JMP @MR5514
MPP
AND DM11215.1            ; RB17 ﾎﾙﾀﾞｰSub　組込中
JMP @MR5511
MPP
AND R4613                ; 基板搬送 COFｶﾞｲﾄﾞ上下 上限
MPS
ANB DM11215.1            ; RB17 ﾎﾙﾀﾞｰSub　組込中
JMP @MR5514
MPP
AND DM11215.1            ; RB17 ﾎﾙﾀﾞｰSub　組込中
MPS
ANB DM11215.2            ; RB17 ﾎﾙﾀﾞｰSub　組込完了
JMP @MR5511
MPP
AND DM11215.2            ; RB17 ﾎﾙﾀﾞｰSub　組込完了
JMP @MR5506
STG @MR5506
AND R4613                ; 基板搬送 COFｶﾞｲﾄﾞ上下 上限
MPS
ANB DM11215.3            ; RB17 ｶｼﾒ中 記憶FLG
JMP @MR5514
MPP
AND DM11215.3            ; RB17 ｶｼﾒ中 記憶FLG
MPS
ANB DM11215.4            ; RB17 ｶｼﾒ完了 記憶FLG
JMP @MR5511
MPP
AND DM11215.4            ; RB17 ｶｼﾒ完了 記憶FLG
JMP @MR5507
STG @MR5507
AND R4613                ; 基板搬送 COFｶﾞｲﾄﾞ上下 上限
MPS
ANB DM11215.5            ; RB17 画像検査中
JMP @MR5514
MPP
AND DM11215.5            ; RB17 画像検査中
MPS
ANB DM11215.6            ; RB17 画像検査完了
JMP @MR5508
MPP
AND DM11215.6            ; RB17 画像検査完了
JMP @MR5508
STG @MR5508
AND R4613                ; 基板搬送 COFｶﾞｲﾄﾞ上下 上限
MPS
AND DM11215.15           ; RB17 不良品 記憶FLG
JMP @MR5511
MPP
ANB DM11215.15           ; RB17 不良品 記憶FLG
JMP @MR5509
STG @MR5509
JMP @MR5510
STG @MR5510
JMP @MR5511
STG @MR5511
SET MR16505              ; M-ｽﾗｲﾀﾞｰ5 ﾜｰｸ状況不確定
CON
JMP @MR5512
STG @MR5512
ANB MR16505              ; M-ｽﾗｲﾀﾞｰ5 ﾜｰｸ状況不確定
AND MR16506              ; SW1(5) ｢ﾜｰｸ除去]からのｽﾀｰﾄ　
JMP @MR5503
STG @MR5513
JMP @MR5514
STG @MR5514
@SET @MR5501             ; RB17在荷確認_Sub実行完了
CON
ANB @MR5501              ; RB17在荷確認_Sub実行完了
RES @MR5502              ; RB17在荷確認_Sub　実行中
CON
ENDS
;<h1/>07_5600 RB18在荷確認_Sub
STG @MR5600              ; RB18在荷確認_Sub
SET @MR5602              ; RB18在荷確認_Sub実行中
CON
JMP @MR5603
STG @MR5603
SET MR12605              ; ﾒｲﾝｽﾗｲﾀﾞ6 He-subﾜｰｸ有無確認
CON
JMP @MR5604
STG @MR5604
ANB MR12605              ; ﾒｲﾝｽﾗｲﾀﾞ6 He-subﾜｰｸ有無確認
MPS
AND MR12609              ; ﾒｲﾝｽﾗｲﾀﾞ6 ﾜｰｸ有
MPS
AND DM11216.0            ; RB18 ﾍｯﾄﾞSub　受取完了 記憶FLG
JMP @MR5605
MPP
ANB DM11216.0            ; RB18 ﾍｯﾄﾞSub　受取完了 記憶FLG
JMP @MR5611
MPP
AND MR12610              ; ﾒｲﾝｽﾗｲﾀﾞ6 ﾜｰｸ無
MPS
ANB DM11216.0            ; RB18 ﾍｯﾄﾞSub　受取完了 記憶FLG
JMP @MR5614
MPP
LD DM11216.0             ; RB18 ﾍｯﾄﾞSub　受取完了 記憶FLG
OR R4713                 ; -
ANL
JMP @MR5611
STG @MR5605
MPS
ANB R4713                ; -
MPS
ANB DM11216.1            ; RB18 ﾎﾙﾀﾞｰSub　組込中 記憶FLG
JMP @MR5614
MPP
AND DM11216.1            ; RB18 ﾎﾙﾀﾞｰSub　組込中 記憶FLG
JMP @MR5611
MPP
AND R4713                ; -
MPS
ANB DM11216.1            ; RB18 ﾎﾙﾀﾞｰSub　組込中 記憶FLG
JMP @MR5614
MPP
AND DM11216.1            ; RB18 ﾎﾙﾀﾞｰSub　組込中 記憶FLG
MPS
ANB DM11216.2            ; RB18 ﾎﾙﾀﾞｰSub　組込完了 記憶FLG
JMP @MR5611
MPP
AND DM11216.2            ; RB18 ﾎﾙﾀﾞｰSub　組込完了 記憶FLG
JMP @MR5606
STG @MR5606
AND R4713                ; -
MPS
ANB DM11216.3            ; RB18 ｶｼﾒ中 記憶FLG
JMP @MR5614
MPP
AND DM11216.3            ; RB18 ｶｼﾒ中 記憶FLG
MPS
ANB DM11216.4            ; RB18 ｶｼﾒ完了 記憶FLG
JMP @MR5611
MPP
AND DM11216.4            ; RB18 ｶｼﾒ完了 記憶FLG
JMP @MR5607
STG @MR5607
AND R4713                ; -
MPS
ANB DM11216.5            ; RB18 画像検査中 記憶FLG
JMP @MR5614
MPP
AND DM11216.5            ; RB18 画像検査中 記憶FLG
MPS
ANB DM11216.6            ; RB18 画像検査完了 記憶FLG
JMP @MR5608
MPP
AND DM11216.6            ; RB18 画像検査完了 記憶FLG
JMP @MR5608
STG @MR5608
AND R4713                ; -
MPS
AND DM11216.15           ; RB18 不良品 記憶FLG
JMP @MR5611
MPP
ANB DM11216.15           ; RB18 不良品 記憶FLG
JMP @MR5609
STG @MR5609
JMP @MR5610
STG @MR5610
JMP @MR5611
STG @MR5611
SET MR16510              ; M-ｽﾗｲﾀﾞｰ6 ﾜｰｸ状況不確定
CON
JMP @MR5612
STG @MR5612
ANB MR16510              ; M-ｽﾗｲﾀﾞｰ6 ﾜｰｸ状況不確定
AND MR16511              ; SW1(6) ｢ﾜｰｸ除去]からのｽﾀｰﾄ　
JMP @MR5603
STG @MR5613
JMP @MR5614
STG @MR5614
@SET @MR5601             ; RB18在荷確認_Sub 実行完了
CON
ANB @MR5601              ; RB18在荷確認_Sub 実行完了
RES @MR5602              ; RB18在荷確認_Sub実行中
CON
ENDS
;<h1/>08_5700_Pause処理2　
STG @MR5700              ; Pause処理2_Sub_Start
SET @MR5702              ; Pause処理2_Sub_EXC
CON
JMP @MR5715
STG @MR5715
SET @MR1901              ; Main2 HALT許可
CON
JMP @MR5703
STG @MR5703
AND R42603               ; _Grp1_Task3_ﾎﾟｰｽﾞ許可
JMP @MR5704
STG @MR5704
AND R42600               ; _Grp1_Task0_ﾎﾟｰｽﾞ許可
AND R42601               ; _Grp1_Task1_ﾎﾟｰｽﾞ許可
AND R42602               ; _Grp1_Task2_ﾎﾟｰｽﾞ許可
AND R42603               ; _Grp1_Task3_ﾎﾟｰｽﾞ許可
AND R42604               ; _Grp1_Task4_ﾎﾟｰｽﾞ許可
AND R42605               ; _Grp1_Task5_ﾎﾟｰｽﾞ許可
AND R42606               ; _Grp1_Task6_ﾎﾟｰｽﾞ許可
AND R42607               ; _Grp1_Task7_ﾎﾟｰｽﾞ許可
AND R42608               ; _Grp1_Task8_ﾎﾟｰｽﾞ許可
AND R42609               ; _Grp1_Task9_ﾎﾟｰｽﾞ許可
JMP @MR5705
STG @MR5705
RES @MR1901              ; Main2 HALT許可
CON
JMP @MR5706
STG @MR5706
ANB R42600               ; _Grp1_Task0_ﾎﾟｰｽﾞ許可
ANB R42601               ; _Grp1_Task1_ﾎﾟｰｽﾞ許可
ANB R42602               ; _Grp1_Task2_ﾎﾟｰｽﾞ許可
ANB R42603               ; _Grp1_Task3_ﾎﾟｰｽﾞ許可
ANB R42604               ; _Grp1_Task4_ﾎﾟｰｽﾞ許可
ANB R42605               ; _Grp1_Task5_ﾎﾟｰｽﾞ許可
ANB R42606               ; _Grp1_Task6_ﾎﾟｰｽﾞ許可
ANB R42607               ; _Grp1_Task7_ﾎﾟｰｽﾞ許可
ANB R42608               ; _Grp1_Task8_ﾎﾟｰｽﾞ許可
ANB R42609               ; _Grp1_Task9_ﾎﾟｰｽﾞ許可
JMP @MR5707
STG @MR5707
JMP @MR5708
STG @MR5708
JMP @MR5709
STG @MR5709
JMP @MR5710
STG @MR5710
JMP @MR5711
STG @MR5711
JMP @MR5712
STG @MR5712
JMP @MR5713
STG @MR5713
JMP @MR5714
STG @MR5714
@SET @MR5701             ; Pause処理2_Sub_END
CON
ANB @MR5701              ; Pause処理2_Sub_END
RES @MR5702              ; Pause処理2_Sub_EXC
CON
ENDS
;<h1/>09_5800 MS-6ﾜｰｸ排出_Sub
STG @MR5800              ; MS-6ﾜｰｸ排出_Sub
SET @MR5802              ; MS-6ﾜｰｸ排出_Sub　実行中
CON
JMP @MR5815
STG @MR5815
MPS
ANB MR4711               ; -err
SET MR7713               ; -
CON
RES MR7712               ; -
CON
AND R4711                ; -
ANB R4710                ; -
JMP @MR5812
MPP
LD MR4711                ; -err
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANL
SET @MR1901              ; Main2 HALT許可
STG @MR5812
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB R36700               ; RB18 MOVE
ANB R36702               ; During RB18 MOVE
ANB R36701               ; RB18 MOVE END
ANL
MPS
LD= #10 EM1334           ; RB18Target Pos
AND MR3101               ; RB18 起動IL　ON=起動可能
ANL
SET R36700               ; RB18 MOVE
CON
JMP @MR5803
MPP
DW #10 EM1334            ; RB18Target Pos
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1901              ; Main2 HALT許可
STG @MR5803
AND R36701               ; RB18 MOVE END
ANB R36703               ; RB18Alarm
AND T2329                ; RB18 Pos.10
RES R36701               ; RB18 MOVE END
CON
JMP @MR5804              ; Repeat ALM発砲
;ALM発砲
STG @MR5804              ; Repeat ALM発砲
SET MR12612              ; MS-6 強制吸着OFF
CON
SET MR16710              ; ｶｼﾒUT3ドア開有効
CON
MPS
ANB DM11216.5            ; RB18 画像検査中 記憶FLG
SET MR16704
CON
JMP @MR5805
MPP
AND DM11216.5            ; RB18 画像検査中 記憶FLG
SET MR16302              ; 画像頭飛びALM発生 MS-6用
CON
JMP @MR5809
STG @MR5805
MPS
LDB MR16704
AND MR16705
ANL
JMP @MR5806
MPP
LD MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
OR MR10010               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ許可
ANL
SET @MR1901              ; Main2 HALT許可
STG @MR5806
MPS
LDB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANB MR10010              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ許可
ANL
SET MR12605              ; ﾒｲﾝｽﾗｲﾀﾞ6 He-subﾜｰｸ有無確認
CON
JMP @MR5807
MPP
LD MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
OR MR10010               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ許可
ANL
JMP @MR5804              ; Repeat ALM発砲
STG @MR5807
ANB MR12605              ; ﾒｲﾝｽﾗｲﾀﾞ6 He-subﾜｰｸ有無確認
MPS
LD MR12609               ; ﾒｲﾝｽﾗｲﾀﾞ6 ﾜｰｸ有
OR R4713                 ; -
ANL
JMP @MR5804              ; Repeat ALM発砲
MPP
LD MR12610               ; ﾒｲﾝｽﾗｲﾀﾞ6 ﾜｰｸ無
ANB R4713                ; -
ANL
DW #0 DM11216            ; MS-6 ﾜｰｸ状況ｽﾃｰﾀｽ
CON
JMP @MR5808
STG @MR5808
RES @MR1901              ; Main2 HALT許可
CON
RES MR16710              ; ｶｼﾒUT3ドア開有効
CON
JMP @MR5814
;画像頭飛びALM発生時
STG @MR5809
MPS
LDB MR16302              ; 画像頭飛びALM発生 MS-6用
LD MR16303               ; SW1 ｢動作継続] からのｽﾀｰﾄ
OR MR16304               ; SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
ANL
ANL
JMP @MR5810
MPP
LD MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
OR MR10010               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ許可
ANL
SET @MR1901              ; Main2 HALT許可
STG @MR5810
MPS
LD MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
OR MR10010               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ許可
ANL
JMP @MR5804              ; Repeat ALM発砲
MPP
LDB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANB MR10010              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ許可
ANL
MPS
AND MR16303              ; SW1 ｢動作継続] からのｽﾀｰﾄ
MPS
AND R4713                ; -
BSET DM11216 #7          ; MS-6 ﾜｰｸ状況ｽﾃｰﾀｽ
CON
BRES DM11216 #15         ; MS-6 ﾜｰｸ状況ｽﾃｰﾀｽ
CON
JMP @MR5811
MPP
ANB R4713                ; -
JMP @MR5804              ; Repeat ALM発砲
MPP
AND MR16304              ; SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
MPS
ANB R4713                ; -
DW #0 DM11216            ; MS-6 ﾜｰｸ状況ｽﾃｰﾀｽ
CON
JMP @MR5811
MPP
AND R4713                ; -
JMP @MR5804              ; Repeat ALM発砲
STG @MR5811
RES @MR1901              ; Main2 HALT許可
CON
RES MR16710              ; ｶｼﾒUT3ドア開有効
CON
JMP @MR5813
STG @MR5813
JMP @MR5814
STG @MR5814
@SET @MR5801             ; MS-6ﾜｰｸ排出_Sub実行完了
CON
ANB @MR5801              ; MS-6ﾜｰｸ排出_Sub実行完了
RES @MR5802              ; MS-6ﾜｰｸ排出_Sub　実行中
CON
ENDS
;<h1/>10_5900 R18補正量算出_Sub
STG @MR5900              ; 補正量算出_Sub
SET @MR5902              ; 補正量算出_Sub　実行中
CON
JMP @MR5915
STG @MR5915
JMP @MR5903
STG @MR5903
MPS
ANB CR2002               ; 常時ON
LDA EM20206              ; RB18目標値（下位）2
CON
ADD #0
CON
STA EM20212              ; RB18目標値（下位）3
CON
JMP @MR5904
MPP
JMP @MR5904
STG @MR5904
JMP @MR5905
STG @MR5905
JMP @MR5906
STG @MR5906
JMP @MR5907
STG @MR5907
JMP @MR5908
STG @MR5908
JMP @MR5909
STG @MR5909
JMP @MR5910
STG @MR5910
JMP @MR5911
STG @MR5911
JMP @MR5912
STG @MR5912
JMP @MR5913
STG @MR5913
JMP @MR5914
STG @MR5914
@SET @MR5901             ; 補正量算出_Sub実行完了
CON
ANB @MR5901              ; 補正量算出_Sub実行完了
RES @MR5902              ; 補正量算出_Sub　実行中
CON
ENDS
;<h1/>11_6000 ｸﾘｰﾆﾝｸﾞ_Sub
STG @MR6000              ; ｸﾘｰﾆﾝｸﾞ_Sub
SET @MR6002              ; ｸﾘｰﾆﾝｸﾞ_Sub　実行中
CON
JMP @MR6015
STG @MR6015
JMP @MR6003
STG @MR6003
MPS
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
RES MR11301              ; 【SW1_Retry】ALM_RES_RB18
CON
ANB R36700               ; RB18 MOVE
ANB R36702               ; During RB18 MOVE
ANB R36701               ; RB18 MOVE END
MPS
LD= #8 EM1334            ; RB18Target Pos
AND MR3101               ; RB18 起動IL　ON=起動可能
ANL
SET R36700               ; RB18 MOVE
CON
JMP @MR6004
MPP
DW #8 EM1334             ; RB18Target Pos
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1901              ; Main2 HALT許可
STG @MR6004
AND R36701               ; RB18 MOVE END
MPS
LDB R36703               ; RB18Alarm
AND T2327                ; RB18 Pos.8
ANB MR11301              ; 【SW1_Retry】ALM_RES_RB18
ANL
RES R36701               ; RB18 MOVE END
CON
JMP @MR6005
MPP
AND R36703               ; RB18Alarm
@SET MR16902             ; RB18ｴﾗｰ検出
CON
AND MR11301              ; 【SW1_Retry】ALM_RES_RB18
RES R36701               ; RB18 MOVE END
CON
JMP @MR6003
STG @MR6005
JMP @MR6006
STG @MR6006
MPS
ANB MR4208               ; M/S1 COFｶﾞｲﾄﾞ上下 下限err
SET MR7700               ; 基板搬送 COF挿入確認ｾﾝｻ上下 下降
CON
AND R4208                ; M/S1 COFｶﾞｲﾄﾞ上下 下限
ANB R4209                ; M/S1 COFｶﾞｲﾄﾞ上下 上限
JMP @MR6007
MPP
LD MR4208                ; M/S1 COFｶﾞｲﾄﾞ上下 下限err
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANL
SET @MR1901              ; Main2 HALT許可
STG @MR6007
JMP @MR6008
STG @MR6008
MPS
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
RES MR11301              ; 【SW1_Retry】ALM_RES_RB18
CON
ANB R36700               ; RB18 MOVE
ANB R36702               ; During RB18 MOVE
ANB R36701               ; RB18 MOVE END
MPS
LD= #9 EM1334            ; RB18Target Pos
AND MR3101               ; RB18 起動IL　ON=起動可能
ANL
SET R36700               ; RB18 MOVE
CON
JMP @MR6009
MPP
DW #9 EM1334             ; RB18Target Pos
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1901              ; Main2 HALT許可
STG @MR6009
AND R36701               ; RB18 MOVE END
MPS
LDB R36703               ; RB18Alarm
AND T2328                ; RB18 Pos.9
ANB MR11301              ; 【SW1_Retry】ALM_RES_RB18
ANL
RES R36701               ; RB18 MOVE END
CON
JMP @MR6010
MPP
AND R36703               ; RB18Alarm
@SET MR16902             ; RB18ｴﾗｰ検出
CON
AND MR11301              ; 【SW1_Retry】ALM_RES_RB18
RES R36701               ; RB18 MOVE END
CON
JMP @MR6008
STG @MR6010
JMP @MR6011
STG @MR6011
MPS
ANB MR4209               ; M/S1 COFｶﾞｲﾄﾞ上下 上限err
RES MR7700               ; 基板搬送 COF挿入確認ｾﾝｻ上下 下降
CON
AND R4209                ; M/S1 COFｶﾞｲﾄﾞ上下 上限
ANB R4208                ; M/S1 COFｶﾞｲﾄﾞ上下 下限
JMP @MR6012
MPP
LD MR4209                ; M/S1 COFｶﾞｲﾄﾞ上下 上限err
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANL
SET @MR1901              ; Main2 HALT許可
STG @MR6012
JMP @MR6013
STG @MR6013
JMP @MR6014
STG @MR6014
@SET @MR6001             ; ｸﾘｰﾆﾝｸﾞ_Sub　実行完了
CON
ANB @MR6001              ; ｸﾘｰﾆﾝｸﾞ_Sub　実行完了
RES @MR6002              ; ｸﾘｰﾆﾝｸﾞ_Sub　実行中
CON
ENDS
;<h1/>13_6100 ｶｼﾒ動作実行_Sub
LDF @MR6100              ; ｶｼﾒ動作実行_Sub
SET R47107               ; _処理時間8取得
LDP @MR6100              ; ｶｼﾒ動作実行_Sub
SET R47007               ; _処理時間8計測開始
LDF R47107               ; _処理時間8取得
RES R47007               ; _処理時間8計測開始
STG @MR6100              ; ｶｼﾒ動作実行_Sub
SET @MR6102              ; ｶｼﾒ動作実行_Sub　実行中
CON
MPS
ANB DM2001.6
JMP @MR6103
MPP
AND DM2001.6
TMR #779 #150
CON
AND T779
JMP @MR6314
STG @MR6103
MPS
LD MR11805               ; RB17置台 L-REQ発砲　記憶
OR R4615                 ; 基板搬送 基板上下 上限
AND R4615                ; 基板搬送 基板上下 上限
ANL
MPS
ANB MR4608               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進限err
SET MR7608               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進
CON
RES MR7609               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退
CON
AND R4608                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進限
ANB R4609                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退限
JMP @MR6104
MRD
TMR #807 #30
CON
AND T807
ANB R4608                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進限
JMP @MR6313              ; M_ｽﾗ 5/6ﾜｰｸ押さえ 上昇
MPP
LDB CR2002               ; 常時ON
AND MR4608               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進限err
ANL
SET MR7609               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退
CON
RES MR7608               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進
CON
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
MPP
LD MR11806               ; RB18置台 L-REQ発砲　記憶
OR R4614                 ; 基板搬送 基板上下 下限
AND R4614                ; 基板搬送 基板上下 下限
ANL
MPS
ANB MR4702               ; -err
SET MR7702               ; -
CON
RES MR7703               ; -
CON
AND R4702                ; -
ANB R4703                ; -
JMP @MR6104
MRD
TMR #808 #30
CON
AND T808
ANB R4702                ; -
JMP @MR6313              ; M_ｽﾗ 5/6ﾜｰｸ押さえ 上昇
MPP
LDB CR2002               ; 常時ON
AND MR4702               ; -err
ANL
SET MR7703               ; -
CON
RES MR7702               ; -
CON
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
;IAI ｶｼﾒ前位置移動
STG @MR6104
RES MR11211              ; 【SW1_Retry】ALM_RES_RB12
CON
ANB R36100               ; RB12 MOVE
ANB R36102               ; During RB12 MOVE
MPS
LD MR11805               ; RB17置台 L-REQ発砲　記憶
OR R4615                 ; 基板搬送 基板上下 上限
AND R4615                ; 基板搬送 基板上下 上限
ANL
MPS
LD= #2 EM1322            ; RB12Target Pos
AND MR3011               ; RB12 起動IL　ON=起動可能
ANL
SET R36100               ; RB12 MOVE
CON
JMP @MR6203
MPP
ZRES DM5420 DM5433       ; _ﾃﾞｰﾀ収集　ﾕｰｻﾞｰﾃﾞｰﾀ7_1
CON
DW #2 EM1322             ; RB12Target Pos
MPP
LD MR11806               ; RB18置台 L-REQ発砲　記憶
OR R4614                 ; 基板搬送 基板上下 下限
AND R4614                ; 基板搬送 基板上下 下限
ANL
MPS
LD= #5 EM1322            ; RB12Target Pos
AND MR3011               ; RB12 起動IL　ON=起動可能
ANL
SET R36100               ; RB12 MOVE
CON
JMP @MR6203
MPP
ZRES DM5440 DM5453       ; _ﾃﾞｰﾀ収集　ﾕｰｻﾞｰﾃﾞｰﾀ8_1
CON
DW #5 EM1322             ; RB12Target Pos
STG @MR6203
AND R36101               ; RB12 MOVE END
MPS
LDB R36103               ; RB12Alarm
LD= #2 EM1322            ; RB12Target Pos
AND T2211                ; RB12 Pos.2
LD= #5 EM1322            ; RB12Target Pos
AND T2214                ; RB12 Pos.5
ORL
ANL
ANB MR11211              ; 【SW1_Retry】ALM_RES_RB12
ANL
JMP @MR6204
MPP
AND R36103               ; RB12Alarm
@SET MR16812             ; RB12ｴﾗｰ検出
CON
AND MR11211              ; 【SW1_Retry】ALM_RES_RB12
RES R36101               ; RB12 MOVE END
CON
JMP @MR6104
STG @MR6204
ANB R36100               ; RB12 MOVE
AND R36101               ; RB12 MOVE END
MPS
LDB R36103               ; RB12Alarm
ANB MR11211              ; 【SW1_Retry】ALM_RES_RB12
ANL
RES R36101               ; RB12 MOVE END
CON
JMP @MR6205
MPP
AND R36103               ; RB12Alarm
@SET MR16812             ; RB12ｴﾗｰ検出
CON
AND MR11211              ; 【SW1_Retry】ALM_RES_RB12
RES R36101               ; RB12 MOVE END
CON
JMP @MR6206
STG @MR6206
ANB MR13515              ; 溶着RB12 動作ｴﾗｰ
MPS
AND CR2002               ; 常時ON
SET DM10803.3            ; RES(ﾘｾｯﾄ) RB13
CON
ENDS
MPP
AND CR2002               ; 常時ON
ENDS
;ﾑﾈｶﾀ起動 / MUNEKATA Start
STG @MR6205
AND CR2002               ; 常時ON
ANB R1400
ANB R1401
MPS
LD R1402
ANB R1403
ANB @MR6303
ANL
SET MR1501
CON
JMP @MR6207
MPP
LD R1403
ORB R1402
ANB @MR6207
ANL
@SET MR1502
CON
JMP @MR6303
STG @MR6303
ANB R1403
TMH #753 #10
CON
AND T753
RES MR1502
CON
JMP @MR6205
STG @MR6207
AND R1400
TMR #787 #1
CON
AND T787
RES MR1501
CON
JMP @MR6208
LDP R1400
INC.D DM5028             ; _生産ｶｳﾝﾀ5
;押付け電流制限値(単位:%)
;DM5006 = 0〜100% ※RCP4はMAX70%まで
;MAXを超えた値を入力するとｴﾗｰとなります
;→ｺﾝﾄﾛｰﾗへは0〜255で出力(DM5007)
LD CR2002                ; 常時ON
MPS
LD MR11805               ; RB17置台 L-REQ発砲　記憶
ANB MR11806              ; RB18置台 L-REQ発砲　記憶
LD R4615                 ; 基板搬送 基板上下 上限
ANB R4614                ; 基板搬送 基板上下 下限
ORL
ANL
MPS
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
MPS
AND MR415                ; 半田変更
LDA DM4526               ; 押付け電流(%)(U3)
CON
MUL #25500
CON
DIV #10000
CON
STA DM10794              ; RB12Current
MPP
ANB MR415                ; 半田変更
LDA DM4216               ; _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ RB17
CON
MUL #25500
CON
DIV #10000
CON
STA DM10794              ; RB12Current
MPP
ANB R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
LDA DM4216               ; _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ RB17
CON
MUL #25500
CON
DIV #10000
CON
STA DM10794              ; RB12Current
MPP
LD MR11806               ; RB18置台 L-REQ発砲　記憶
ANB MR11805              ; RB17置台 L-REQ発砲　記憶
LD R4614                 ; 基板搬送 基板上下 下限
ANB R4615                ; 基板搬送 基板上下 上限
ORL
ANL
MPS
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
MPS
AND MR415                ; 半田変更
LDA DM4526               ; 押付け電流(%)(U3)
CON
MUL #25500
CON
DIV #10000
CON
STA DM10794              ; RB12Current
MPP
ANB MR415                ; 半田変更
LDA DM4218               ; _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ RB18
CON
MUL #25500
CON
DIV #10000
CON
STA DM10794              ; RB12Current
MPP
ANB R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
LDA DM4218               ; _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ RB18
CON
MUL #25500
CON
DIV #10000
CON
STA DM10794              ; RB12Current
;IAI ｶｼﾒ動作
STG @MR6208
ANB R36104               ; RB12 WD_PUSH
ANB R36106               ; During RB12 PUSH
AND MR3011               ; RB12 起動IL　ON=起動可能
MPS
LD MR11805               ; RB17置台 L-REQ発砲　記憶
ANB MR11806              ; RB18置台 L-REQ発砲　記憶
LD R4615                 ; 基板搬送 基板上下 上限
ANB R4614                ; 基板搬送 基板上下 下限
ORL
ANL
MPS
AND= #3 EM1322           ; RB12Target Pos
SET R36104               ; RB12 WD_PUSH
CON
JMP @MR6209
MPP
DW #3 EM1322             ; RB12Target Pos
MPP
LD MR11806               ; RB18置台 L-REQ発砲　記憶
ANB MR11805              ; RB17置台 L-REQ発砲　記憶
LD R4614                 ; 基板搬送 基板上下 下限
ANB R4615                ; 基板搬送 基板上下 上限
ORL
ANL
MPS
AND= #6 EM1322           ; RB12Target Pos
SET R36104               ; RB12 WD_PUSH
CON
JMP @MR6209
MPP
DW #6 EM1322             ; RB12Target Pos
STG @MR6209
AND R36106               ; During RB12 PUSH
AND R1400
SET LR10004              ; 溶着中ﾌﾗｸﾞ5 ON=完了
CON
JMP @MR6210
STG @MR6210
MPS
LDB R36106               ; During RB12 PUSH
AND R36105               ; RB12 PUSH END
ANL
JMP @MR6211
MPP
AND R1403
SET MR13602              ; ﾑﾈｶﾀ_Alarm_UT3
STG @MR6211
AND CR2002               ; 常時ON
MPS
LDB R36103               ; RB12Alarm
ANB MR13602              ; ﾑﾈｶﾀ_Alarm_UT3
ANL
RES R36105               ; RB12 PUSH END
CON
JMP @MR6212
MRD
LD R36103                ; RB12Alarm
ANB MR13602              ; ﾑﾈｶﾀ_Alarm_UT3
ANL
SET MR13515              ; 溶着RB12 動作ｴﾗｰ
CON
RES R36105               ; RB12 PUSH END
CON
ENDS
MRD
LDB R36103               ; RB12Alarm
AND MR13602              ; ﾑﾈｶﾀ_Alarm_UT3
ANL
SET MR13603              ; ﾑﾈｶﾀ      異常出力_UT3
CON
RES R36105               ; RB12 PUSH END
CON
ENDS
MPP
LD R36103                ; RB12Alarm
AND MR13602              ; ﾑﾈｶﾀ_Alarm_UT3
ANL
SET MR13604              ; 溶着RB &ﾑﾈｶﾀ同時 ｴﾗｰ_UT3
CON
RES R36105               ; RB12 PUSH END
CON
ENDS
;IAI 離脱待機位置移動
;離脱待機位置はその都度演算
;押込み完了位置(×0.01o) - 離脱量(×0.01o)
STG @MR6212
ANB R36100               ; RB12 MOVE
ANB R36102               ; During RB12 MOVE
LDA.D DM4520             ; 溶着完了  高さ記憶(U3)
CON
SUB.D DM4502             ; 離脱量(0.01mm)(U1)
CON
STA.D EM16618            ; RB12目標値（下位）4
CON
MPS
LD= #4 EM1322            ; RB12Target Pos
AND MR3011               ; RB12 起動IL　ON=起動可能
ANL
SET R36100               ; RB12 MOVE
CON
JMP @MR6213
MRD
DW #4 EM1322             ; RB12Target Pos
MRD
LD MR11805               ; RB17置台 L-REQ発砲　記憶
ANB MR11806              ; RB18置台 L-REQ発砲　記憶
LD R4615                 ; 基板搬送 基板上下 上限
ANB R4614                ; 基板搬送 基板上下 下限
ORL
ANL
LDA.D DM4520             ; 溶着完了  高さ記憶(U3)
CON
FLOAT
CON
STA.F DM5420             ; _ﾃﾞｰﾀ収集　ﾕｰｻﾞｰﾃﾞｰﾀ7_1
MPP
LD MR11806               ; RB18置台 L-REQ発砲　記憶
ANB MR11805              ; RB17置台 L-REQ発砲　記憶
LD R4614                 ; 基板搬送 基板上下 下限
ANB R4615                ; 基板搬送 基板上下 上限
ORL
ANL
LDA.D DM4520             ; 溶着完了  高さ記憶(U3)
CON
FLOAT
CON
STA.F DM5440             ; _ﾃﾞｰﾀ収集　ﾕｰｻﾞｰﾃﾞｰﾀ8_1
STG @MR6213
AND R36102               ; During RB12 MOVE
ANB R36103               ; RB12Alarm
RES LR10004              ; 溶着中ﾌﾗｸﾞ5 ON=完了
CON
JMP @MR6214
STG @MR6214
MPS
LDB R36100               ; RB12 MOVE
AND R36101               ; RB12 MOVE END
ANB R36103               ; RB12Alarm
ANL
RES R36101               ; RB12 MOVE END
CON
JMP @MR6300
MPP
AND R36103               ; RB12Alarm
SET MR13515              ; 溶着RB12 動作ｴﾗｰ
CON
RES R36101               ; RB12 MOVE END
CON
JMP @MR6215
STG @MR6215
ANB MR13515              ; 溶着RB12 動作ｴﾗｰ
MPS
AND MR13600              ; SW1 溶着RB12 動作ｴﾗｰ
SET DM10803.3            ; RES(ﾘｾｯﾄ) RB13
CON
ENDS
MPP
AND MR13601              ; SW2 溶着RB12 動作ｴﾗｰ
ENDS
;IAI 原点位置移動
;原点（Pos.1）への上昇は、R1400（カシメ運転中）のOFFを待たずに上昇させる　20130625　藤沢
STG @MR6300
RES MR11211              ; 【SW1_Retry】ALM_RES_RB12
CON
ANB R36100               ; RB12 MOVE
ANB R36102               ; During RB12 MOVE
MPS
LDB R1400
LDB MR413                ; 20130625　　ｶｼﾒRB上昇　藤沢
AND T1052                ; 上昇遅延
AND CR2002               ; 常時ON
ORL
ANL
MPS
LD= #1 EM1322            ; RB12Target Pos
AND MR3011               ; RB12 起動IL　ON=起動可能
ANL
SET R36100               ; RB12 MOVE
CON
JMP @MR6301
MPP
DW #1 EM1322             ; RB12Target Pos
MPP
TMR #1052 #10            ; 上昇遅延
STG @MR6301
AND R36101               ; RB12 MOVE END
MPS
LDB R36103               ; RB12Alarm
AND T2210                ; RB12 Pos.1
ANB MR11211              ; 【SW1_Retry】ALM_RES_RB12
ANL
JMP @MR6302
MPP
AND R36103               ; RB12Alarm
@SET MR16812             ; RB12ｴﾗｰ検出
CON
AND MR11211              ; 【SW1_Retry】ALM_RES_RB12
RES R36101               ; RB12 MOVE END
CON
JMP @MR6300
STG @MR6302
MPS
LDB R36100               ; RB12 MOVE
AND R36101               ; RB12 MOVE END
ANB R36103               ; RB12Alarm
ANB MR11211              ; 【SW1_Retry】ALM_RES_RB12
ANL
RES R36101               ; RB12 MOVE END
CON
JMP @MR6304
MPP
AND R36103               ; RB12Alarm
@SET MR16812             ; RB12ｴﾗｰ検出
CON
AND MR11211              ; 【SW1_Retry】ALM_RES_RB12
RES R36101               ; RB12 MOVE END
CON
JMP @MR6300
;この時点で、OK品扱いとする。
STG @MR6304
LDB R1400
ORB MR413                ; 20130625　　ｶｼﾒRB上昇　藤沢
ANL
MPS
AND R4615                ; 基板搬送 基板上下 上限
RES DM11215.15           ; RB17 不良品 記憶FLG
CON
JMP @MR6313              ; M_ｽﾗ 5/6ﾜｰｸ押さえ 上昇
MPP
AND R4614                ; 基板搬送 基板上下 下限
RES DM11216.15           ; RB18 不良品 記憶FLG
CON
JMP @MR6313              ; M_ｽﾗ 5/6ﾜｰｸ押さえ 上昇
STG @MR6313              ; M_ｽﾗ 5/6ﾜｰｸ押さえ 上昇
MPS
LD MR11805               ; RB17置台 L-REQ発砲　記憶
OR R4615                 ; 基板搬送 基板上下 上限
AND R4615                ; 基板搬送 基板上下 上限
ANL
MPS
ANB MR4609               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退限err
SET MR7609               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退
CON
RES MR7608               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進
CON
AND R4609                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退限
ANB R4608                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進限
JMP @MR6314
MPP
AND MR4609               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退限err
SET MR7608               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 前進
CON
RES MR7609               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前後 後退
CON
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
MPS
ANB @MR2002              ; Mainte中
SET @MR1900              ; Main1 HALT許可
MPP
AND @MR2002              ; Mainte中
SET @MR1900              ; Main1 HALT許可
CON
SET @MR1901              ; Main2 HALT許可
MPP
LD MR11806               ; RB18置台 L-REQ発砲　記憶
OR R4614                 ; 基板搬送 基板上下 下限
AND R4614                ; 基板搬送 基板上下 下限
ANL
MPS
ANB MR4703               ; -err
SET MR7703               ; -
CON
RES MR7702               ; -
CON
AND R4703                ; -
ANB R4702                ; -
JMP @MR6314
MPP
AND MR4703               ; -err
SET MR7702               ; -
CON
RES MR7703               ; -
CON
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
MPS
ANB @MR2002              ; Mainte中
SET @MR1900              ; Main1 HALT許可
MPP
AND @MR2002              ; Mainte中
SET @MR1900              ; Main1 HALT許可
CON
SET @MR1901              ; Main2 HALT許可
STG @MR6314
@SET @MR6101             ; ｶｼﾒ動作実行_Sub実行完了
CON
ANB @MR6101              ; ｶｼﾒ動作実行_Sub実行完了
RES @MR6102              ; ｶｼﾒ動作実行_Sub　実行中
CON
ENDS
;<h1/>15_6400 熱ｶｼﾒ部3 管理_Sub
STG @MR6400              ; 熱ｶｼﾒ部3 管理_Sub
SET @MR6402              ; ***_Sub　実行中
CON
JMP @MR6415              ; ★１_Repeat
;RB17側
STG @MR6415              ; ★１_Repeat
LD R1402
ANB R1400
OR MR413                 ; 20130625　　ｶｼﾒRB上昇　藤沢
ANL
MPS
AND B06E0                ; RB17置台熱ｶｼﾒ要求 (L-REQ)
SET MR11805              ; RB17置台 L-REQ発砲　記憶
CON
SET B06E3                ; ｶｼﾒUT1要求応答 (T-REQ)
CON
JMP @MR6403
MPP
ANB B06E0                ; RB17置台熱ｶｼﾒ要求 (L-REQ)
JMP @MR6406              ; ★2_Repeat
STG @MR6403
AND B06E1                ; RB17置台開始許可 (READY)
JMP @MR6404
STG @MR6404
MPS
ANB MR4615               ; 基板搬送 基板上下 上限err
SET MR7615               ; 基板搬送 基板上下 上昇
CON
RES MR7614               ; 基板搬送 基板上下 下降
CON
AND R4615                ; 基板搬送 基板上下 上限
ANB R4614                ; 基板搬送 基板上下 下限
JMP @MR6405
MPP
LD MR4615                ; 基板搬送 基板上下 上限err
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
ANL
MPS
ANB @MR2002              ; Mainte中
SET @MR1900              ; Main1 HALT許可
MPP
AND @MR2002              ; Mainte中
SET @MR1900              ; Main1 HALT許可
CON
SET @MR1901              ; Main2 HALT許可
STG @MR6405
SET B06E4                ; ｶｼﾒUT3-1実行中 (BUSY)
CON
JMP @MR6409
;RB18側
STG @MR6406              ; ★2_Repeat
LD R1402
ANB R1400
OR MR413                 ; 20130625　　ｶｼﾒRB上昇　藤沢
ANL
MPS
AND B06F0                ; RB18置台熱ｶｼﾒ要求 (L-REQ)
SET MR11806              ; RB18置台 L-REQ発砲　記憶
CON
SET B06F3                ; ｶｼﾒUT1要求応答 (T-REQ)
CON
JMP @MR6407
MPP
ANB B06F0                ; RB18置台熱ｶｼﾒ要求 (L-REQ)
JMP @MR6415              ; ★１_Repeat
STG @MR6407
MPS
ANB MR4614               ; 基板搬送 基板上下 下限err
SET MR7614               ; 基板搬送 基板上下 下降
CON
RES MR7615               ; 基板搬送 基板上下 上昇
CON
AND R4614                ; 基板搬送 基板上下 下限
ANB R4615                ; 基板搬送 基板上下 上限
JMP @MR6408
MPP
LD MR4614                ; 基板搬送 基板上下 下限err
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
ANL
MPS
ANB @MR2002              ; Mainte中
SET @MR1900              ; Main1 HALT許可
MPP
AND @MR2002              ; Mainte中
SET @MR1900              ; Main1 HALT許可
CON
SET @MR1901              ; Main2 HALT許可
STG @MR6408
AND B06F1                ; RB18置台開始許可 (READY)
SET B06F4                ; ｶｼﾒUT3-2実行中 (BUSY)
CON
JMP @MR6409
STG @MR6409
SET @MR6100              ; ｶｼﾒ動作実行_Sub
CON
JMP @MR6309
STG @MR6309
AND @MR6102              ; ｶｼﾒ動作実行_Sub　実行中
AND @MR6101              ; ｶｼﾒ動作実行_Sub実行完了
RES @MR6101              ; ｶｼﾒ動作実行_Sub実行完了
CON
JMP @MR6410
STG @MR6410
ANB @MR6102              ; ｶｼﾒ動作実行_Sub　実行中
MPS
AND MR11805              ; RB17置台 L-REQ発砲　記憶
SET B06E5                ; ｶｼﾒUT1補開始要求 (COMP)
CON
JMP @MR6411
MPP
AND MR11806              ; RB18置台 L-REQ発砲　記憶
SET B06F5                ; ｶｼﾒUT1補開始要求 (COMP)
CON
JMP @MR6411
STG @MR6411
MPS
LD MR11805               ; RB17置台 L-REQ発砲　記憶
ANB R4614                ; 基板搬送 基板上下 下限
ANB B06E1                ; RB17置台開始許可 (READY)
ANL
RES B06E3                ; ｶｼﾒUT1要求応答 (T-REQ)
CON
RES B06E4                ; ｶｼﾒUT3-1実行中 (BUSY)
CON
RES B06E5                ; ｶｼﾒUT1補開始要求 (COMP)
CON
JMP @MR6412
MPP
LD MR11806               ; RB18置台 L-REQ発砲　記憶
ANB R4615                ; 基板搬送 基板上下 上限
ANB B06F1                ; RB18置台開始許可 (READY)
ANL
RES B06F3                ; ｶｼﾒUT1要求応答 (T-REQ)
CON
RES B06F4                ; ｶｼﾒUT3-2実行中 (BUSY)
CON
RES B06F5                ; ｶｼﾒUT1補開始要求 (COMP)
CON
JMP @MR6412
STG @MR6412
RES MR11805              ; RB17置台 L-REQ発砲　記憶
CON
RES MR11806              ; RB18置台 L-REQ発砲　記憶
CON
JMP @MR6413
;先行して、反対側にヘッドを振っておく　20130626　熱ｶｼﾒ左右　藤沢
STG @MR6413
JMP @MR6415              ; ★１_Repeat
STG @MR6414
@SET @MR6401             ; ***_Sub実行完了
CON
ANB @MR6401              ; ***_Sub実行完了
RES @MR6402              ; ***_Sub　実行中
CON
ENDS
;<h1/>Vacuum and Air release/吸着＆真空破壊
STG MR12500              ; ﾒｲﾝｽﾗｲﾀﾞ5 吸着確認
ZRES MR12501 MR12503     ; 吸着確認　_End  吸着ｾﾝｻOFF確認
CON
RES MR8304               ; -
CON
RES MR8305               ; -
CON
SET MR8303               ; -
CON
JMP @MR900
STG @MR900
MPS
AND R5312                ; -
SET MR12501              ; 吸着確認　_End
CON
SET MR12502              ; 吸着ｾﾝｻON 確認
CON
ENDS
MPP
ANB R5312                ; -
TMR @3 #15
CON
AND @T3
SET MR12501              ; 吸着確認　_End
CON
SET MR12503              ; 吸着ｾﾝｻOFF確認
CON
ENDS
STG MR12505              ; ﾒｲﾝｽﾗｲﾀﾞ5 He-subﾜｰｸ有無確認
ZRES MR12506 MR12510     ; 給材部ﾜｰｸ 吸着破壊OK  ﾒｲﾝｽﾗｲﾀﾞ5 ﾜｰｸ無
CON
RES MR8304               ; -
CON
RES MR8305               ; -
CON
SET MR8303               ; -
CON
JMP @MR901
STG @MR901
MPS
AND R5312                ; -
SET MR12508              ; ﾜｰｸ有無確認Sub_End
CON
SET MR12509              ; ﾒｲﾝｽﾗｲﾀﾞ5 ﾜｰｸ有
CON
ENDS
MPP
ANB R5312                ; -
TMR @4 #10
CON
AND @T4
RES MR8303               ; -
CON
SET MR8304               ; -
CON
SET MR8305               ; -
CON
JMP @MR902
STG @MR902
TMR @5 #10
CON
AND @T5
RES MR8305               ; -
CON
SET MR12508              ; ﾜｰｸ有無確認Sub_End
CON
SET MR12510              ; ﾒｲﾝｽﾗｲﾀﾞ5 ﾜｰｸ無
CON
ENDS
;MS-5 強制吸着OFF
STG MR12512              ; MS-5 強制吸着OFF
RES MR12513              ; MS-5 強制吸着OFF END
CON
RES MR8303               ; -
CON
SET MR8304               ; -
CON
SET MR8305               ; -
CON
JMP @MR906
STG @MR906
TMH #765 #3
CON
AND T765
RES MR8305               ; -
CON
SET MR12513              ; MS-5 強制吸着OFF END
CON
ENDS
;<<行コメント編集：Ctrl+Enter/Escで確定>>
STG MR12600              ; ﾒｲﾝｽﾗｲﾀﾞ6 吸着確認
ZRES MR12601 MR12603     ; 吸着確認Sub_End  吸着ｾﾝｻOFF確認
CON
RES MR8307               ; -
CON
RES MR8308               ; -
CON
SET MR8306               ; -
CON
JMP @MR903
STG @MR903
MPS
AND R5314                ; -
SET MR12601              ; 吸着確認Sub_End
CON
SET MR12602              ; 吸着ｾﾝｻON 確認
CON
ENDS
MPP
ANB R5314                ; -
TMR @6 #15
CON
AND @T6
SET MR12601              ; 吸着確認Sub_End
CON
SET MR12603              ; 吸着ｾﾝｻOFF確認
CON
ENDS
STG MR12605              ; ﾒｲﾝｽﾗｲﾀﾞ6 He-subﾜｰｸ有無確認
ZRES MR12606 MR12610     ; 給材部ﾜｰｸ 吸着破壊OK  ﾒｲﾝｽﾗｲﾀﾞ6 ﾜｰｸ無
CON
RES MR8307               ; -
CON
RES MR8308               ; -
CON
SET MR8306               ; -
CON
JMP @MR904
STG @MR904
MPS
AND R5314                ; -
SET MR12608              ; ﾜｰｸ有無確認Sub_End
CON
SET MR12609              ; ﾒｲﾝｽﾗｲﾀﾞ6 ﾜｰｸ有
CON
ENDS
MPP
ANB R5314                ; -
TMR @7 #10
CON
AND @T7
RES MR8306               ; -
CON
SET MR8307               ; -
CON
SET MR8308               ; -
CON
JMP @MR905
STG @MR905
TMR @8 #10
CON
AND @T8
RES MR8308               ; -
CON
SET MR12608              ; ﾜｰｸ有無確認Sub_End
CON
SET MR12610              ; ﾒｲﾝｽﾗｲﾀﾞ6 ﾜｰｸ無
CON
ENDS
;MS-6 強制吸着OFF
STG MR12612              ; MS-6 強制吸着OFF
RES MR12613              ; MS-6 強制吸着OFF END
CON
RES MR8306               ; -
CON
SET MR8307               ; -
CON
SET MR8308               ; -
CON
JMP @MR907
STG @MR907
TMH #766 #3
CON
AND T766
RES MR8308               ; -
CON
SET MR12613              ; MS-6 強制吸着OFF END
CON
ENDS
MCR
END
ENDH
