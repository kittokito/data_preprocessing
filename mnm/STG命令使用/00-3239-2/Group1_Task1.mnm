DEVICE:53
;MODULE:Group1_Task1
;MODULE_TYPE:0
;SCRIPT_TYPE:
;OneSystem Main-Module
;
;-----------------------------------------
;ModuleName	:	Group1_Task1
;ModuleType	:	Main Module
;Line		:	
;Cell		:	
;Function	:	
;-----------------------------------------
;<<Task LocalDevice>>
;/*項目			/*割付ｴﾘｱ				/*備考
;---------------------------------------------------------------------			
;Emergency		@MR000〜@MR015			Emergency処理時RESET禁止ｴﾘｱ
;Free			@MR100〜@MR915			ﾕｰｻﾞｰﾌﾘｰｴﾘｱ
;HOME			@MR1000〜@MR1515		HOME動作時使用ｴﾘｱ
;MAINTENANCE		@MR2000〜@MR2915		MAINTE動作時使用ｴﾘｱ
;AUTO(Main1)		@MR3000〜@MR3915		AUTO(Main1)動作時使用ｴﾘｱ
;	(Main2)		@MR4000〜@MR4915		AUTO(Main2)動作時使用ｴﾘｱ
;SubRoutine		@MR4500〜@MR6415		ｻﾌﾞﾙｰﾁﾝ共通動作使用ｴﾘｱ
;----------------------------------------------------------------------
;<h1/>Device_Init/ﾃﾞﾊﾞｲｽ初期化
;[内容]
;・非常停止、優先ｴﾗｰ発生時に初期化したいﾃﾞﾊﾞｲｽを指定して下さい
;※本Taskで使用するﾛｰｶﾙﾃﾞﾊﾞｲｽなど
;※STG〜JMPにて使用しているﾃﾞﾊﾞｲｽは必須
LDP R46104               ; _非常停止中　ﾓｰﾄﾞﾌﾗｸﾞ
ZRES @MR100 @MR6415      ; Task0 ERROR
;<h1/>Task_Monitor/ﾀｽｸﾓﾆﾀｰ
LD CR2002                ; 常時ON
FLIK #50 #50 @MR000
;ON STG Main1
;TYPE EM608.U,EM609.U,@MR000.U,@MR3000.U
;
;FOR EM608 = EM608 TO 160 STEP 16
;	IF @MR3000:EM608 <> 0 THEN
;		BREAK
;	END IF	
;NEXT
;	
;IF EM608 < 160 THEN
;	EM609 = (EM608 / 16) * 100 + DMX(@MR3000:EM608) + #3000
;END IF		
;		
;EM608 = EM608 + 16		
;IF EM608 > 160 THEN		
;	EM608 = 0		
;END IF
LDP @MR000
NCJ #1000
;TYPE EM608.U,EM609.U,@MR000.U,@MR3000.U
;
;FOR EM608 = EM608 TO 160 STEP 16
;
LD CR2002                ; 常時ON
MOV EM608 EM608          ; Task1 Main1@MR  Task1 Main1@MR
LABEL #2000
LD> EM608 #160           ; Task1 Main1@MR
CJ #2001
;	IF @MR3000:EM608 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM608                ; Task1 Main1@MR
CON
EXT
CON
STA.L Z12
LD<> @MR3000:Z12 #0      ; AUTO Main1
NCJ #2002
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2003
;	END IF	
;
LABEL #2002
;NEXT
;
LD CR2002                ; 常時ON
LDA EM608                ; Task1 Main1@MR
CON
ADD #16
CON
STA EM608                ; Task1 Main1@MR
LDB CR2009               ; 演算結果が負
CJ #2000
LABEL #2003
LABEL #2001
;IF EM608 < 160 THEN
;
LD< EM608 #160           ; Task1 Main1@MR
NCJ #2004
;	EM609 = (EM608 / 16) * 100 + DMX(@MR3000:EM608) + #3000
;
LD CR2002                ; 常時ON
LDA EM608                ; Task1 Main1@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR3000:Z12          ; AUTO Main1
CON
DMX
CON
STA @VM0
CON
LDA EM608                ; Task1 Main1@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM1
CON
LDA @VM0
CON
EXT
CON
ADD.L @VM1
CON
ADD.L +3000
CON
STA EM609                ; Task1 Main1@MR
;END IF		
;
LABEL #2004
;EM608 = EM608 + 16		
;
LD CR2002                ; 常時ON
LDA EM608                ; Task1 Main1@MR
CON
EXT
CON
ADD.L +16
CON
STA EM608                ; Task1 Main1@MR
;IF EM608 > 160 THEN		
;
LD> EM608 #160           ; Task1 Main1@MR
NCJ #2005
;	EM608 = 0		
;
LD CR2002                ; 常時ON
MOV #0 EM608             ; Task1 Main1@MR
;END IF
LABEL #2005
LABEL #1000
;
;ON STG Main2
;TYPE EM610.U,EM611.U,@MR4000.U
;
;FOR EM610 = EM610 TO 80 STEP 16
;	IF @MR4000:EM610 <> 0 THEN
;		BREAK
;	END IF	
;NEXT	
;
;IF EM610 < 80 THEN
;	EM611 = (EM610 / 16) * 100 + DMX(@MR4000:EM610) + #4000
;END IF
;
;EM610 = EM610 + 16		
;
;IF EM610 > 80 THEN
;	EM610 = 0	
;END IF
LDP @MR000
NCJ #1001
;TYPE EM610.U,EM611.U,@MR4000.U
;
;FOR EM610 = EM610 TO 80 STEP 16
;
LD CR2002                ; 常時ON
MOV EM610 EM610          ; Task1 Main2@MR  Task1 Main2@MR
LABEL #2006
LD> EM610 #80            ; Task1 Main2@MR
CJ #2007
;	IF @MR4000:EM610 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM610                ; Task1 Main2@MR
CON
EXT
CON
STA.L Z12
LD<> @MR4000:Z12 #0
NCJ #2008
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2009
;	END IF	
;
LABEL #2008
;NEXT	
;
LD CR2002                ; 常時ON
LDA EM610                ; Task1 Main2@MR
CON
ADD #16
CON
STA EM610                ; Task1 Main2@MR
LDB CR2009               ; 演算結果が負
CJ #2006
LABEL #2009
LABEL #2007
;IF EM610 < 80 THEN
;
LD< EM610 #80            ; Task1 Main2@MR
NCJ #2010
;	EM611 = (EM610 / 16) * 100 + DMX(@MR4000:EM610) + #4000
;
LD CR2002                ; 常時ON
LDA EM610                ; Task1 Main2@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR4000:Z12
CON
DMX
CON
STA @VM3
CON
LDA EM610                ; Task1 Main2@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM4
CON
LDA @VM3
CON
EXT
CON
ADD.L @VM4
CON
ADD.L +4000
CON
STA EM611                ; Task1 Main2@MR
;END IF
;
LABEL #2010
;EM610 = EM610 + 16		
;
LD CR2002                ; 常時ON
LDA EM610                ; Task1 Main2@MR
CON
EXT
CON
ADD.L +16
CON
STA EM610                ; Task1 Main2@MR
;IF EM610 > 80 THEN
;
LD> EM610 #80            ; Task1 Main2@MR
NCJ #2011
;	EM610 = 0	
;
LD CR2002                ; 常時ON
MOV #0 EM610             ; Task1 Main2@MR
;END IF
LABEL #2011
LABEL #1001
;
;ON STG SubRoutine
;TYPE EM612.U,EM613.U,@MR4500.U
;	
;FOR EM612 = EM612 TO 320 STEP 16
;	IF @MR4500:EM612 <> 0 THEN
;		BREAK
;	END IF	
;NEXT
;		
;IF EM612 < 320 THEN
;	EM613 = (EM612 / 16) * 100 + DMX(@MR4500:EM612) + #4500
;END IF
;		
;EM612 = EM612 + 16	
;
;IF EM612 > 320 THEN
;   EM612 = 0	
;END IF
LDP @MR000
NCJ #1002
;TYPE EM612.U,EM613.U,@MR4500.U
;
;FOR EM612 = EM612 TO 320 STEP 16
;
LD CR2002                ; 常時ON
MOV EM612 EM612          ; Task1 Sub@MR  Task1 Sub@MR
LABEL #2012
LD> EM612 #320           ; Task1 Sub@MR
CJ #2013
;	IF @MR4500:EM612 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM612                ; Task1 Sub@MR
CON
EXT
CON
STA.L Z12
LD<> @MR4500:Z12 #0      ; RB2動作指令Sub Start
NCJ #2014
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2015
;	END IF	
;
LABEL #2014
;NEXT
;
LD CR2002                ; 常時ON
LDA EM612                ; Task1 Sub@MR
CON
ADD #16
CON
STA EM612                ; Task1 Sub@MR
LDB CR2009               ; 演算結果が負
CJ #2012
LABEL #2015
LABEL #2013
;IF EM612 < 320 THEN
;
LD< EM612 #320           ; Task1 Sub@MR
NCJ #2016
;	EM613 = (EM612 / 16) * 100 + DMX(@MR4500:EM612) + #4500
;
LD CR2002                ; 常時ON
LDA EM612                ; Task1 Sub@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR4500:Z12          ; RB2動作指令Sub Start
CON
DMX
CON
STA @VM6
CON
LDA EM612                ; Task1 Sub@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM7
CON
LDA @VM6
CON
EXT
CON
ADD.L @VM7
CON
ADD.L +4500
CON
STA EM613                ; Task1 Sub@MR
;END IF
;
LABEL #2016
;EM612 = EM612 + 16	
;
LD CR2002                ; 常時ON
LDA EM612                ; Task1 Sub@MR
CON
EXT
CON
ADD.L +16
CON
STA EM612                ; Task1 Sub@MR
;IF EM612 > 320 THEN
;
LD> EM612 #320           ; Task1 Sub@MR
NCJ #2017
;   EM612 = 0	
;
LD CR2002                ; 常時ON
MOV #0 EM612             ; Task1 Sub@MR
;END IF
LABEL #2017
LABEL #1002
;
;<h1/>Task_Init/ﾀｽｸ初期化
;[本STG内容]
;・本Task起動時に必要な初期化処理を記述して下さい
;・起動Taskの全Init処理終了後、Task_StartのSTGが起動します
STG LR801                ; _Grp1_Task1_Init.STG
ENDS
;<h1/>Task_Start/ﾀｽｸ開始
;[本STG内容]
;・Task起動後、以下運転ﾓｰﾄﾞに従い、各STGにJMPします
;【HOME】	→	LR5200
;【AUTO】	→	LR5400
;【MAINTE】	→	LR5600
;・本STGは追記、修正不要です
STG LR401                ; _Grp1_Task1_Start.STG
MPS
AND R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5201               ; _Grp1_Task1_HOME.STG
MRD
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5401               ; _Grp1_Task1_AUTO.STG
MPP
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5601               ; _Grp1_Task1_MAINTE.STG
;<h1/>Task_Finish/ﾀｽｸ終了
;[本STG内容]
;・各Taskの終了STGになります
;・運転ﾓｰﾄﾞに係わらず終了時は本STGを経由して終了して下さい
;・本STGは追記、修正不要です
STG LR601                ; _Grp1_Task1_Fin.STG
RES R41001               ; _Grp1_Task1_起動中ﾌﾗｸﾞ
CON
ENDS
;<h1/>HOME/原点復帰
;[本STG内容]
;・STG @MR1000の続きから各Taskの原点復帰動作を記述する
;・動作終了時は@MR1515にJMPする事
STG LR5201               ; _Grp1_Task1_HOME.STG
JMP @MR1000              ; HOME
STG @MR1000              ; HOME
JMP @MR1515              ; HOME END
STG @MR1515              ; HOME END
MPS
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET MR16001              ; TASK1終了可
CON
AND MR16000              ; TASK0より終了可
JMP LR601                ; _Grp1_Task1_Fin.STG
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
@SET @MR1900             ; Main1 HALT許可
;<h1/>AUTO/自動動作
STG LR5401               ; _Grp1_Task1_AUTO.STG
JMP @MR3000              ; AUTO Main1
;<h1/>Auto-Main1/Autoﾒｲﾝﾙｰﾁﾝ1
;[本STG内容]
;・各TaskのAUTO動作を記述して下さい
;・動作ﾓｰﾄﾞは「AUTOAC」に格納されています(1〜32)
;・@MR3000:AUTO_Main1開始、@MR3001:AUTO_Main1完了、@MR3002:AUTO_Main1動作中
STG @MR3000              ; AUTO Main1
JMP @MR3003
STG @MR3003
MPS
LDB R46106               ; _定停止移行中
OR MR12000               ; ｽｶﾗｰRBﾊﾝﾄﾞﾜｰｸ2ヶ有り
ANL
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
AND MR9000               ; 洗浄機供給開始task1
ANL
SET MR9002               ; 洗浄機供給中task1
CON
JMP @MR3005
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
@SET @MR1900             ; Main1 HALT許可
MPP
LD R46106                ; _定停止移行中
AND MR12001              ; ｽｶﾗｰRBﾊﾝﾄﾞﾜｰｸ無し
ANL
JMP @MR3900
STG @MR3005
MPS
LDB MR8400               ; 洗浄機1ﾚｰﾝ供給済み
AND B20B4                ; 洗浄1動作選択
ANL
JMP @MR3006
MPP
LD MR8400                ; 洗浄機1ﾚｰﾝ供給済み
AND B20B5                ; 洗浄2動作選択
ANL
JMP @MR3010
STG @MR3006
AND MR3100               ; RB2 移動IL(ON=起動可能)
DW #205 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
JMP @MR3007
STG @MR3007
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR3008
STG @MR3008
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND= EM1013 #205         ; RB2 動作ｽﾃｰﾀｽ1
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR3015
STG @MR3010
AND MR3100               ; RB2 移動IL(ON=起動可能)
DW #225 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
JMP @MR3011
STG @MR3011
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR3012
STG @MR3012
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND= EM1013 #225         ; RB2 動作ｽﾃｰﾀｽ1
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR3015
STG @MR3015
MPS
LDB R46106               ; _定停止移行中
OR MR12000               ; ｽｶﾗｰRBﾊﾝﾄﾞﾜｰｸ2ヶ有り
ANL
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
AND B208B                ; 洗浄機よりｽﾃｰﾀｽ(AUTO)
ANL
MPS
LD B2091                 ; 洗浄機より給材1ﾗｲﾝ動作開始許可
ANB MR8400               ; 洗浄機1ﾚｰﾝ供給済み
LD B2091                 ; 洗浄機より給材1ﾗｲﾝ動作開始許可
ANB B2099                ; 洗浄機より給材2ﾗｲﾝ動作開始許可
AND MR8400               ; 洗浄機1ﾚｰﾝ供給済み
ORL
ANL
JMP @MR3100              ; 洗浄機1ﾚｰﾝ供給
MPP
LD B2099                 ; 洗浄機より給材2ﾗｲﾝ動作開始許可
AND MR8400               ; 洗浄機1ﾚｰﾝ供給済み
LDB B2091                ; 洗浄機より給材1ﾗｲﾝ動作開始許可
AND B2099                ; 洗浄機より給材2ﾗｲﾝ動作開始許可
ANB MR8400               ; 洗浄機1ﾚｰﾝ供給済み
ORL
ANL
JMP @MR3500              ; 洗浄機2ﾚｰﾝ供給
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
@SET @MR1900             ; Main1 HALT許可
MPP
LD R46106                ; _定停止移行中
AND MR12001              ; ｽｶﾗｰRBﾊﾝﾄﾞﾜｰｸ無し
ANL
JMP @MR3900
LDP B2091                ; 洗浄機より給材1ﾗｲﾝ動作開始許可
RES R47000               ; _処理時間1計測開始
CON
SET R47100               ; _処理時間1取得
LDP B2099                ; 洗浄機より給材2ﾗｲﾝ動作開始許可
RES R47001               ; _処理時間2計測開始
CON
SET R47101               ; _処理時間2取得
;洗浄機1ﾚｰﾝ供給ﾊﾝﾄﾞ1
STG @MR3100              ; 洗浄機1ﾚｰﾝ供給
ANB @MR5400              ; 洗浄機I/F 1ﾚｰﾝ投入開始処理
ANB @MR5401              ; 洗浄機I/F 1ﾚｰﾝ投入開始処理完了
ANB @MR5402              ; 洗浄機I/F 1ﾚｰﾝ投入開始処理中
SET @MR5400              ; 洗浄機I/F 1ﾚｰﾝ投入開始処理
CON
JMP @MR3101
STG @MR3101
ANB @MR5400              ; 洗浄機I/F 1ﾚｰﾝ投入開始処理
AND @MR5401              ; 洗浄機I/F 1ﾚｰﾝ投入開始処理完了
ANB @MR5402              ; 洗浄機I/F 1ﾚｰﾝ投入開始処理中
RES @MR5401              ; 洗浄機I/F 1ﾚｰﾝ投入開始処理完了
CON
JMP @MR3102
STG @MR3102
MPS
ANB B20B5                ; 洗浄2動作選択
RES MR8400               ; 洗浄機1ﾚｰﾝ供給済み
MRD
AND B20B5                ; 洗浄2動作選択
SET MR8400               ; 洗浄機1ﾚｰﾝ供給済み
MPP
AND MR3100               ; RB2 移動IL(ON=起動可能)
DW #201 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
JMP @MR3103
STG @MR3103
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR3104
STG @MR3104
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND= EM1013 #201         ; RB2 動作ｽﾃｰﾀｽ1
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR3105
;ﾜｰｸ吸着時の条件変更 2013.6.26 Y.Shimofuruta
STG @MR3105
MPS
LD R4408                 ; ﾊﾝﾄﾞ1吸着確認
AND R4409                ; ﾊﾝﾄﾞ2吸着確認
ANL
JMP @MR3106
MPP
LDB R4408                ; ﾊﾝﾄﾞ1吸着確認
ORB R4409                ; ﾊﾝﾄﾞ2吸着確認
ANL
JMP @MR4800
STG @MR4800
@SET @MR1900             ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #6000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #12 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR4801
STG @MR4801
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES @MR1900              ; Main1 HALT許可
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR4802
STG @MR4802
RES MR7608               ; RB2ﾊﾝﾄﾞ1吸着ON
CON
RES MR7611               ; TRB2ﾊﾝﾄﾞ2吸着ON
CON
SET MR7609               ; RB2ﾊﾝﾄﾞ1吸着OFF
CON
SET MR7612               ; RB2ﾊﾝﾄﾞ2吸着OFF
CON
TMH @4 #7
CON
AND @T4
SET MR7610               ; RB2ﾊﾝﾄﾞ1吸着破壊ON
CON
SET MR7613               ; RB2ﾊﾝﾄﾞ2吸着破壊
CON
TMH @5 #10
CON
AND @T5
JMP @MR4803
STG @MR4803
MPS
@LDA DM5024              ; _生産ｶｳﾝﾀ3
CON
ADD #2
CON
@STA DM5024              ; _生産ｶｳﾝﾀ3
MPP
RES MR7609               ; RB2ﾊﾝﾄﾞ1吸着OFF
CON
RES MR7612               ; RB2ﾊﾝﾄﾞ2吸着OFF
CON
RES MR7610               ; RB2ﾊﾝﾄﾞ1吸着破壊ON
CON
RES MR7613               ; RB2ﾊﾝﾄﾞ2吸着破壊
CON
JMP @MR4804
STG @MR4804
SET MR8113               ; 洗浄機1ﾚｰﾝ動作失敗
CON
AND B2091                ; 洗浄機より給材1ﾗｲﾝ動作開始許可
RES MR8113               ; 洗浄機1ﾚｰﾝ動作失敗
CON
JMP @MR3900
STG @MR3106
ANB @MR5000              ; 洗浄機ﾊﾝﾄﾞ1供給
ANB @MR5001              ; 洗浄機ﾊﾝﾄﾞ1供給完了
ANB @MR5002              ; 洗浄機ﾊﾝﾄﾞ1供給中
AND B20B0                ; ｱﾗｲﾒﾝﾄ1開限
RES MR8100               ; 洗浄機1ﾗｲﾝへｲﾝﾀｰﾛｯｸON
CON
SET @MR5000              ; 洗浄機ﾊﾝﾄﾞ1供給
CON
JMP @MR3107
STG @MR3107
ANB @MR5000              ; 洗浄機ﾊﾝﾄﾞ1供給
AND @MR5001              ; 洗浄機ﾊﾝﾄﾞ1供給完了
ANB @MR5002              ; 洗浄機ﾊﾝﾄﾞ1供給中
RES @MR5001              ; 洗浄機ﾊﾝﾄﾞ1供給完了
CON
JMP @MR3108
STG @MR3108
JMP @MR3109
STG @MR3109
AND MR3100               ; RB2 移動IL(ON=起動可能)
DW #202 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
JMP @MR3110
STG @MR3110
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR3111
STG @MR3111
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND= EM1013 #202         ; RB2 動作ｽﾃｰﾀｽ1
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR3112
STG @MR3112
ANB @MR5100              ; 洗浄機ﾊﾝﾄﾞ2供給
ANB @MR5101              ; 洗浄機ﾊﾝﾄﾞ2供給完了
ANB @MR5102              ; 洗浄機ﾊﾝﾄﾞ2供給中
RES MR8100               ; 洗浄機1ﾗｲﾝへｲﾝﾀｰﾛｯｸON
CON
SET @MR5100              ; 洗浄機ﾊﾝﾄﾞ2供給
CON
JMP @MR3113
STG @MR3113
ANB @MR5100              ; 洗浄機ﾊﾝﾄﾞ2供給
AND @MR5101              ; 洗浄機ﾊﾝﾄﾞ2供給完了
ANB @MR5102              ; 洗浄機ﾊﾝﾄﾞ2供給中
RES @MR5101              ; 洗浄機ﾊﾝﾄﾞ2供給完了
CON
JMP @MR3114
STG @MR3114
MPS
@LDA DM5020              ; _生産ｶｳﾝﾀ1
CON
@ADD #2
CON
@STA DM5020              ; _生産ｶｳﾝﾀ1
MPP
JMP @MR3115              ; AUTO END
STG @MR3115              ; AUTO END
MOV #0 DM15004           ; 洗浄1吸着ﾘﾄﾗｲｶｳﾝﾄ
MOV #0 DM15008           ; 洗浄1-1ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ
MPS
MOV #0 DM15009           ; 洗浄1-2ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ
MPP
LD= DM15004 #0           ; 洗浄1吸着ﾘﾄﾗｲｶｳﾝﾄ
AND= DM15008 #0          ; 洗浄1-1ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ
AND= DM15009 #0          ; 洗浄1-2ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ
ANL
JMP @MR3200
;ｱﾗｲﾒﾝﾄ1動作
STG @MR3200
RES MR8104               ; ｱﾗｲﾒﾝﾄ1吸着ON
CON
ANB B20B9                ; 洗浄機1ﾚｰﾝ吸着状態　SOL
ANB B20BA                ; 洗浄機1ﾚｰﾝ吸着破壊状態　SOL
JMP @MR3201
STG @MR3201
AND MR3100               ; RB2 移動IL(ON=起動可能)
RES MR8011               ; 洗浄機1ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
SET MR8010               ; 洗浄機1ﾚｰﾝｱﾗｲﾒﾝﾄ閉指示
CON
MPS
LDB MR4601               ; ｱﾗｲﾒﾝﾄ1閉限Err
AND B20B1                ; ｱﾗｲﾒﾝﾄ1閉限
ANL
RES MR8010               ; 洗浄機1ﾚｰﾝｱﾗｲﾒﾝﾄ閉指示
CON
JMP @MR3202
MPP
AND MR4601               ; ｱﾗｲﾒﾝﾄ1閉限Err
JMP @MR4404
STG @MR4404
@SET @MR1900             ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #21 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR4405
STG @MR4405
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES @MR1900              ; Main1 HALT許可
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR3201
STG @MR3202
RES MR8105               ; ｱﾗｲﾒﾝﾄ1吸着破壊ON
CON
SET MR8104               ; ｱﾗｲﾒﾝﾄ1吸着ON
CON
AND B20B9                ; 洗浄機1ﾚｰﾝ吸着状態　SOL
ANB B20BA                ; 洗浄機1ﾚｰﾝ吸着破壊状態　SOL
JMP @MR3203
STG @MR3203
RES MR8104               ; ｱﾗｲﾒﾝﾄ1吸着ON
CON
AND MR3100               ; RB2 移動IL(ON=起動可能)
RES MR8010               ; 洗浄機1ﾚｰﾝｱﾗｲﾒﾝﾄ閉指示
CON
SET MR8011               ; 洗浄機1ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
MPS
LDB MR4600               ; ｱﾗｲﾒﾝﾄ1開限Err
AND B20B0                ; ｱﾗｲﾒﾝﾄ1開限
ANL
JMP @MR3300
MPP
AND MR4600               ; ｱﾗｲﾒﾝﾄ1開限Err
JMP @MR4408
STG @MR4408
@SET @MR1900             ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #21 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR4409
STG @MR4409
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES @MR1900              ; Main1 HALT許可
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR3203
;洗浄機1ﾚｰﾝﾜｰｸ押え
STG @MR3300
RES MR8011               ; 洗浄機1ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
MPS
LD B20B8                 ; 洗浄機1ﾚｰﾝ吸着状態
AND< DM15004 DM7010      ; 洗浄1吸着ﾘﾄﾗｲｶｳﾝﾄ  装置基礎ﾃﾞｰﾀ6
AND< DM15008 DM7010      ; 洗浄1-1ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ  装置基礎ﾃﾞｰﾀ6
AND< DM15009 DM7010      ; 洗浄1-2ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ  装置基礎ﾃﾞｰﾀ6
ANL
JMP @MR3314
MPP
LDB B20B8                ; 洗浄機1ﾚｰﾝ吸着状態
OR>= DM15004 DM7010      ; 洗浄1吸着ﾘﾄﾗｲｶｳﾝﾄ  装置基礎ﾃﾞｰﾀ6
OR>= DM15008 DM7012      ; 洗浄1-1ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ  装置基礎ﾃﾞｰﾀ7
OR>= DM15009 DM7012      ; 洗浄1-2ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ  装置基礎ﾃﾞｰﾀ7
ANL
JMP @MR3303
STG @MR3303
AND MR3100               ; RB2 移動IL(ON=起動可能)
DW #203 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
JMP @MR3304
STG @MR3304
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR3305
STG @MR3305
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND= EM1013 #203         ; RB2 動作ｽﾃｰﾀｽ1
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR3306
STG @MR3306
ANB @MR5800              ; 洗浄機供給ﾊﾝﾄﾞ1押え処理
ANB @MR5801              ; 洗浄機供給ﾊﾝﾄﾞ1押え処理完了
ANB @MR5802              ; 洗浄機供給ﾊﾝﾄﾞ1押え処理中
RES MR8100               ; 洗浄機1ﾗｲﾝへｲﾝﾀｰﾛｯｸON
CON
SET @MR5800              ; 洗浄機供給ﾊﾝﾄﾞ1押え処理
CON
JMP @MR3307
STG @MR3307
ANB @MR5800              ; 洗浄機供給ﾊﾝﾄﾞ1押え処理
AND @MR5801              ; 洗浄機供給ﾊﾝﾄﾞ1押え処理完了
ANB @MR5802              ; 洗浄機供給ﾊﾝﾄﾞ1押え処理中
RES @MR5801              ; 洗浄機供給ﾊﾝﾄﾞ1押え処理完了
CON
JMP @MR3308
STG @MR3308
JMP @MR3309
STG @MR3309
AND MR3100               ; RB2 移動IL(ON=起動可能)
DW #204 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
JMP @MR3310
STG @MR3310
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR3311
STG @MR3311
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND= EM1013 #204         ; RB2 動作ｽﾃｰﾀｽ1
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR3312
STG @MR3312
ANB @MR5900              ; 洗浄機供給ﾊﾝﾄﾞ2押え処理
ANB @MR5901              ; 洗浄機供給ﾊﾝﾄﾞ2押え処理完了
ANB @MR5902              ; 洗浄機供給ﾊﾝﾄﾞ2押え処理中
RES MR8100               ; 洗浄機1ﾗｲﾝへｲﾝﾀｰﾛｯｸON
CON
SET @MR5900              ; 洗浄機供給ﾊﾝﾄﾞ2押え処理
CON
JMP @MR3313
STG @MR3313
ANB @MR5900              ; 洗浄機供給ﾊﾝﾄﾞ2押え処理
AND @MR5901              ; 洗浄機供給ﾊﾝﾄﾞ2押え処理完了
ANB @MR5902              ; 洗浄機供給ﾊﾝﾄﾞ2押え処理中
RES @MR5901              ; 洗浄機供給ﾊﾝﾄﾞ2押え処理完了
CON
JMP @MR3314
STG @MR3314
AND MR3100               ; RB2 移動IL(ON=起動可能)
SET MR8008               ; ｱﾗｲﾒﾝﾄ1ﾚｰﾝXY同時閉
CON
RES MR8011               ; 洗浄機1ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
SET MR8010               ; 洗浄機1ﾚｰﾝｱﾗｲﾒﾝﾄ閉指示
CON
MPS
LDB MR4601               ; ｱﾗｲﾒﾝﾄ1閉限Err
AND B20B1                ; ｱﾗｲﾒﾝﾄ1閉限
ANL
JMP @MR3315
MPP
AND MR4601               ; ｱﾗｲﾒﾝﾄ1閉限Err
JMP @MR4412
STG @MR4412
@SET @MR1900             ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #21 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR4413
STG @MR4413
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES @MR1900              ; Main1 HALT許可
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR3314
STG @MR3315
RES MR8008               ; ｱﾗｲﾒﾝﾄ1ﾚｰﾝXY同時閉
CON
RES MR8010               ; 洗浄機1ﾚｰﾝｱﾗｲﾒﾝﾄ閉指示
CON
MPS
AND B20B8                ; 洗浄機1ﾚｰﾝ吸着状態
JMP @MR3400
MPP
ANB B20B8                ; 洗浄機1ﾚｰﾝ吸着状態
MPS
AND>= DM15004 DM7010     ; 洗浄1吸着ﾘﾄﾗｲｶｳﾝﾄ  装置基礎ﾃﾞｰﾀ6
JMP @MR4100              ; RB2動作指令Sub Start
MPP
AND< DM15004 DM7010      ; 洗浄1吸着ﾘﾄﾗｲｶｳﾝﾄ  装置基礎ﾃﾞｰﾀ6
JMP @MR4700
STG @MR4700
AND MR3100               ; RB2 移動IL(ON=起動可能)
RES MR8010               ; 洗浄機1ﾚｰﾝｱﾗｲﾒﾝﾄ閉指示
CON
SET MR8011               ; 洗浄機1ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
RES MR8104               ; ｱﾗｲﾒﾝﾄ1吸着ON
CON
SET MR8106               ; ｱﾗｲﾒﾝﾄ1吸着破壊OFF
CON
ANB B20B9                ; 洗浄機1ﾚｰﾝ吸着状態　SOL
ANB B20BA                ; 洗浄機1ﾚｰﾝ吸着破壊状態　SOL
AND B20B0                ; ｱﾗｲﾒﾝﾄ1開限
JMP @MR4701
STG @MR4701
RES MR8011               ; 洗浄機1ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
RES MR8106               ; ｱﾗｲﾒﾝﾄ1吸着破壊OFF
CON
@INC DM15004             ; 洗浄1吸着ﾘﾄﾗｲｶｳﾝﾄ
CON
JMP @MR3200
STG @MR4100              ; RB2動作指令Sub Start
AND MR3100               ; RB2 移動IL(ON=起動可能)
DW #206 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR4101              ; RB2動作指令Sub End
STG @MR4101              ; RB2動作指令Sub End
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND= EM1013 #206         ; RB2 動作ｽﾃｰﾀｽ1
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR4102
STG @MR4102
@SET @MR1900             ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #8600 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #23 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR4103
STG @MR4103
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES @MR1900              ; Main1 HALT許可
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR105               ; SW1
JMP @MR4400
MPP
AND @MR106               ; SW2
JMP @MR4104
STG @MR4400
AND MR3100               ; RB2 移動IL(ON=起動可能)
RES MR8010               ; 洗浄機1ﾚｰﾝｱﾗｲﾒﾝﾄ閉指示
CON
SET MR8011               ; 洗浄機1ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
RES MR8104               ; ｱﾗｲﾒﾝﾄ1吸着ON
CON
SET MR8106               ; ｱﾗｲﾒﾝﾄ1吸着破壊OFF
CON
ANB B20B9                ; 洗浄機1ﾚｰﾝ吸着状態　SOL
ANB B20BA                ; 洗浄機1ﾚｰﾝ吸着破壊状態　SOL
AND B20B0                ; ｱﾗｲﾒﾝﾄ1開限
JMP @MR4401
STG @MR4401
RES MR8011               ; 洗浄機1ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
RES MR8106               ; ｱﾗｲﾒﾝﾄ1吸着破壊OFF
CON
JMP @MR3200
STG @MR4104
MPS
@LDA DM5024              ; _生産ｶｳﾝﾀ3
CON
ADD #2
CON
@STA DM5024              ; _生産ｶｳﾝﾀ3
MPP
AND MR3100               ; RB2 移動IL(ON=起動可能)
RES MR8010               ; 洗浄機1ﾚｰﾝｱﾗｲﾒﾝﾄ閉指示
CON
SET MR8011               ; 洗浄機1ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
RES MR8104               ; ｱﾗｲﾒﾝﾄ1吸着ON
CON
SET MR8106               ; ｱﾗｲﾒﾝﾄ1吸着破壊OFF
CON
ANB B20B9                ; 洗浄機1ﾚｰﾝ吸着状態　SOL
ANB B20BA                ; 洗浄機1ﾚｰﾝ吸着破壊状態　SOL
AND B20B0                ; ｱﾗｲﾒﾝﾄ1開限
JMP @MR4105
STG @MR4105
RES MR8011               ; 洗浄機1ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
RES MR8106               ; ｱﾗｲﾒﾝﾄ1吸着破壊OFF
CON
SET MR8113               ; 洗浄機1ﾚｰﾝ動作失敗
CON
AND B2091                ; 洗浄機より給材1ﾗｲﾝ動作開始許可
RES MR8113               ; 洗浄機1ﾚｰﾝ動作失敗
CON
JMP @MR3900
;洗浄機1ﾚｰﾝｶﾒﾗ検査1
STG @MR3400
AND MR3100               ; RB2 移動IL(ON=起動可能)
DW #211 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
JMP @MR3401
STG @MR3401
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR3402              ; Main2 Busy
STG @MR3402              ; Main2 Busy
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND= EM1013 #211         ; RB2 動作ｽﾃｰﾀｽ1
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR3403
STG @MR3403
ANB @MR5200              ; ｶﾒﾗ検査処理Sub
ANB @MR5201              ; ｶﾒﾗ検査処理Sub　End
ANB @MR5202              ; ｶﾒﾗ検査処理Sub処理中
SET @MR5200              ; ｶﾒﾗ検査処理Sub
CON
JMP @MR3404
STG @MR3404
ANB @MR5200              ; ｶﾒﾗ検査処理Sub
AND @MR5201              ; ｶﾒﾗ検査処理Sub　End
ANB @MR5202              ; ｶﾒﾗ検査処理Sub処理中
RES @MR5201              ; ｶﾒﾗ検査処理Sub　End
CON
JMP @MR3405
STG @MR3405
MPS
LD MR18110               ; 画像検査OK
ANB MR18111              ; 画像検査NG
ANL
JMP @MR3406
MPP
AND MR18111              ; 画像検査NG
MPS
AND>= DM15008 DM7012     ; 洗浄1-1ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ  装置基礎ﾃﾞｰﾀ7
JMP @MR4200
MPP
AND< DM15008 DM7012      ; 洗浄1-1ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ  装置基礎ﾃﾞｰﾀ7
JMP @MR4706
STG @MR4706
AND MR3100               ; RB2 移動IL(ON=起動可能)
RES MR8010               ; 洗浄機1ﾚｰﾝｱﾗｲﾒﾝﾄ閉指示
CON
SET MR8011               ; 洗浄機1ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
RES MR8104               ; ｱﾗｲﾒﾝﾄ1吸着ON
CON
SET MR8106               ; ｱﾗｲﾒﾝﾄ1吸着破壊OFF
CON
ANB B20B9                ; 洗浄機1ﾚｰﾝ吸着状態　SOL
ANB B20BA                ; 洗浄機1ﾚｰﾝ吸着破壊状態　SOL
AND B20B0                ; ｱﾗｲﾒﾝﾄ1開限
JMP @MR4707
STG @MR4707
RES MR8011               ; 洗浄機1ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
RES MR8106               ; ｱﾗｲﾒﾝﾄ1吸着破壊OFF
CON
DW #0 DM15004            ; 洗浄1吸着ﾘﾄﾗｲｶｳﾝﾄ
CON
DW #0 DM15009            ; 洗浄1-2ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ
CON
@INC DM15008             ; 洗浄1-1ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ
CON
JMP @MR3200
STG @MR4200
AND MR3100               ; RB2 移動IL(ON=起動可能)
DW #206 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR4201              ; ﾜｰｸｾｯﾄ完了
STG @MR4201              ; ﾜｰｸｾｯﾄ完了
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND= EM1013 #206         ; RB2 動作ｽﾃｰﾀｽ1
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR4202
STG @MR4202
@SET @MR1900             ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #3864 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #25 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR4203
STG @MR4203
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES @MR1900              ; Main1 HALT許可
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR105               ; SW1
JMP @MR3400
MRD
AND @MR106               ; SW2
JMP @MR4706
MRD
AND @MR107               ; SW3
JMP @MR4204
MPP
AND @MR108               ; SW4
JMP @MR3406
STG @MR4204
MPS
@LDA DM5024              ; _生産ｶｳﾝﾀ3
CON
ADD #2
CON
@STA DM5024              ; _生産ｶｳﾝﾀ3
MPP
AND MR3100               ; RB2 移動IL(ON=起動可能)
RES MR8010               ; 洗浄機1ﾚｰﾝｱﾗｲﾒﾝﾄ閉指示
CON
SET MR8011               ; 洗浄機1ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
RES MR8104               ; ｱﾗｲﾒﾝﾄ1吸着ON
CON
SET MR8106               ; ｱﾗｲﾒﾝﾄ1吸着破壊OFF
CON
ANB B20B9                ; 洗浄機1ﾚｰﾝ吸着状態　SOL
ANB B20BA                ; 洗浄機1ﾚｰﾝ吸着破壊状態　SOL
AND B20B0                ; ｱﾗｲﾒﾝﾄ1開限
JMP @MR4205
STG @MR4205
RES MR8011               ; 洗浄機1ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
RES MR8106               ; ｱﾗｲﾒﾝﾄ1吸着破壊OFF
CON
SET MR8113               ; 洗浄機1ﾚｰﾝ動作失敗
CON
AND B2091                ; 洗浄機より給材1ﾗｲﾝ動作開始許可
RES MR8113               ; 洗浄機1ﾚｰﾝ動作失敗
CON
JMP @MR3900
STG @MR3406
JMP @MR3407
;洗浄機1ﾚｰﾝｶﾒﾗ検査2
STG @MR3407
AND MR3100               ; RB2 移動IL(ON=起動可能)
DW #212 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
JMP @MR3408
STG @MR3408
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR3409
STG @MR3409
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND= EM1013 #212         ; RB2 動作ｽﾃｰﾀｽ1
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR3410
STG @MR3410
ANB @MR5200              ; ｶﾒﾗ検査処理Sub
ANB @MR5201              ; ｶﾒﾗ検査処理Sub　End
ANB @MR5202              ; ｶﾒﾗ検査処理Sub処理中
SET @MR5200              ; ｶﾒﾗ検査処理Sub
CON
JMP @MR3411
STG @MR3411
ANB @MR5200              ; ｶﾒﾗ検査処理Sub
AND @MR5201              ; ｶﾒﾗ検査処理Sub　End
ANB @MR5202              ; ｶﾒﾗ検査処理Sub処理中
RES @MR5201              ; ｶﾒﾗ検査処理Sub　End
CON
JMP @MR3412
STG @MR3412
MPS
LD MR18110               ; 画像検査OK
ANB MR18111              ; 画像検査NG
ANL
JMP @MR3413
MPP
AND MR18111              ; 画像検査NG
MPS
AND>= DM15009 DM7012     ; 洗浄1-2ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ  装置基礎ﾃﾞｰﾀ7
JMP @MR4206
MPP
AND< DM15009 DM7012      ; 洗浄1-2ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ  装置基礎ﾃﾞｰﾀ7
JMP @MR4708
STG @MR4708
AND MR3100               ; RB2 移動IL(ON=起動可能)
RES MR8010               ; 洗浄機1ﾚｰﾝｱﾗｲﾒﾝﾄ閉指示
CON
SET MR8011               ; 洗浄機1ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
RES MR8104               ; ｱﾗｲﾒﾝﾄ1吸着ON
CON
SET MR8106               ; ｱﾗｲﾒﾝﾄ1吸着破壊OFF
CON
ANB B20B9                ; 洗浄機1ﾚｰﾝ吸着状態　SOL
ANB B20BA                ; 洗浄機1ﾚｰﾝ吸着破壊状態　SOL
AND B20B0                ; ｱﾗｲﾒﾝﾄ1開限
JMP @MR4709
STG @MR4709
RES MR8011               ; 洗浄機1ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
RES MR8106               ; ｱﾗｲﾒﾝﾄ1吸着破壊OFF
CON
DW #0 DM15004            ; 洗浄1吸着ﾘﾄﾗｲｶｳﾝﾄ
CON
DW #0 DM15008            ; 洗浄1-1ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ
CON
@INC DM15009             ; 洗浄1-2ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ
CON
JMP @MR3200
STG @MR4206
AND MR3100               ; RB2 移動IL(ON=起動可能)
DW #206 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR4207
STG @MR4207
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND= EM1013 #206         ; RB2 動作ｽﾃｰﾀｽ1
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR4208
STG @MR4208
@SET @MR1900             ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #3864 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #26 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR4209
STG @MR4209
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES @MR1900              ; Main1 HALT許可
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR105               ; SW1
JMP @MR3407
MRD
AND @MR106               ; SW2
JMP @MR4708
MRD
AND @MR107               ; SW3
JMP @MR4210
MPP
AND @MR108               ; SW4
JMP @MR3413
STG @MR4210
MPS
@LDA DM5024              ; _生産ｶｳﾝﾀ3
CON
ADD #2
CON
@STA DM5024              ; _生産ｶｳﾝﾀ3
MPP
AND MR3100               ; RB2 移動IL(ON=起動可能)
RES MR8010               ; 洗浄機1ﾚｰﾝｱﾗｲﾒﾝﾄ閉指示
CON
SET MR8011               ; 洗浄機1ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
RES MR8104               ; ｱﾗｲﾒﾝﾄ1吸着ON
CON
SET MR8106               ; ｱﾗｲﾒﾝﾄ1吸着破壊OFF
CON
ANB B20B9                ; 洗浄機1ﾚｰﾝ吸着状態　SOL
ANB B20BA                ; 洗浄機1ﾚｰﾝ吸着破壊状態　SOL
AND B20B0                ; ｱﾗｲﾒﾝﾄ1開限
JMP @MR4211
STG @MR4211
RES MR8011               ; 洗浄機1ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
RES MR8106               ; ｱﾗｲﾒﾝﾄ1吸着破壊OFF
CON
SET MR8113               ; 洗浄機1ﾚｰﾝ動作失敗
CON
AND B2091                ; 洗浄機より給材1ﾗｲﾝ動作開始許可
RES MR8113               ; 洗浄機1ﾚｰﾝ動作失敗
CON
JMP @MR3900
STG @MR3413
ANB @MR5500              ; 洗浄機I/F 1ﾚｰﾝ投入終了処理
ANB @MR5501              ; 洗浄機I/F 1ﾚｰﾝ投入終了処理完了
ANB @MR5502              ; 洗浄機I/F 1ﾚｰﾝ投入終了処理中
SET R47000               ; _処理時間1計測開始
CON
SET @MR5500              ; 洗浄機I/F 1ﾚｰﾝ投入終了処理
CON
JMP @MR3414
STG @MR3414
ANB @MR5500              ; 洗浄機I/F 1ﾚｰﾝ投入終了処理
AND @MR5501              ; 洗浄機I/F 1ﾚｰﾝ投入終了処理完了
ANB @MR5502              ; 洗浄機I/F 1ﾚｰﾝ投入終了処理中
RES @MR5501              ; 洗浄機I/F 1ﾚｰﾝ投入終了処理完了
CON
JMP @MR3415
STG @MR3415
RES MR9000               ; 洗浄機供給開始task1
CON
RES MR9002               ; 洗浄機供給中task1
CON
SET MR9001               ; 洗浄機供給完了task1
CON
SET MR8100               ; 洗浄機1ﾗｲﾝへｲﾝﾀｰﾛｯｸON
CON
JMP @MR3900
;洗浄機2ﾚｰﾝ供給ﾊﾝﾄﾞ1
STG @MR3500              ; 洗浄機2ﾚｰﾝ供給
ANB @MR5600              ; 洗浄機I/F 2ﾚｰﾝ投入開始処理
ANB @MR5601              ; 洗浄機I/F 2ﾚｰﾝ投入開始処理完了
ANB @MR5602              ; 洗浄機I/F 2ﾚｰﾝ投入開始処理中
SET @MR5600              ; 洗浄機I/F 2ﾚｰﾝ投入開始処理
CON
JMP @MR3501
STG @MR3501
ANB @MR5600              ; 洗浄機I/F 2ﾚｰﾝ投入開始処理
AND @MR5601              ; 洗浄機I/F 2ﾚｰﾝ投入開始処理完了
ANB @MR5602              ; 洗浄機I/F 2ﾚｰﾝ投入開始処理中
RES @MR5601              ; 洗浄機I/F 2ﾚｰﾝ投入開始処理完了
CON
JMP @MR3502
STG @MR3502
MPS
ANB B20B4                ; 洗浄1動作選択
SET MR8400               ; 洗浄機1ﾚｰﾝ供給済み
MRD
AND B20B4                ; 洗浄1動作選択
RES MR8400               ; 洗浄機1ﾚｰﾝ供給済み
MPP
AND MR3100               ; RB2 移動IL(ON=起動可能)
DW #221 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
JMP @MR3503
STG @MR3503
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR3504
STG @MR3504
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND= EM1013 #221         ; RB2 動作ｽﾃｰﾀｽ1
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR3505
;ﾜｰｸ吸着時の条件変更 2013.6.26 Y.Shimofuruta
STG @MR3505
MPS
LD R4408                 ; ﾊﾝﾄﾞ1吸着確認
AND R4409                ; ﾊﾝﾄﾞ2吸着確認
ANL
JMP @MR3506
MPP
LDB R4408                ; ﾊﾝﾄﾞ1吸着確認
ORB R4409                ; ﾊﾝﾄﾞ2吸着確認
ANL
JMP @MR4806
STG @MR4806
@SET @MR1900             ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #6000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #12 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR4807
STG @MR4807
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES @MR1900              ; Main1 HALT許可
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR4808
STG @MR4808
RES MR7608               ; RB2ﾊﾝﾄﾞ1吸着ON
CON
RES MR7611               ; TRB2ﾊﾝﾄﾞ2吸着ON
CON
SET MR7609               ; RB2ﾊﾝﾄﾞ1吸着OFF
CON
SET MR7612               ; RB2ﾊﾝﾄﾞ2吸着OFF
CON
TMH @6 #20
CON
AND @T6
SET MR7610               ; RB2ﾊﾝﾄﾞ1吸着破壊ON
CON
SET MR7613               ; RB2ﾊﾝﾄﾞ2吸着破壊
CON
TMH @7 #20
CON
AND @T7
JMP @MR4809
STG @MR4809
MPS
@LDA DM5024              ; _生産ｶｳﾝﾀ3
CON
ADD #2
CON
@STA DM5024              ; _生産ｶｳﾝﾀ3
MPP
RES MR7609               ; RB2ﾊﾝﾄﾞ1吸着OFF
CON
RES MR7612               ; RB2ﾊﾝﾄﾞ2吸着OFF
CON
RES MR7610               ; RB2ﾊﾝﾄﾞ1吸着破壊ON
CON
RES MR7613               ; RB2ﾊﾝﾄﾞ2吸着破壊
CON
JMP @MR4810
STG @MR4810
SET MR8114               ; 洗浄機2ﾚｰﾝ動作失敗
CON
AND B2099                ; 洗浄機より給材2ﾗｲﾝ動作開始許可
RES MR8114               ; 洗浄機2ﾚｰﾝ動作失敗
CON
JMP @MR3900
STG @MR3506
ANB @MR5000              ; 洗浄機ﾊﾝﾄﾞ1供給
ANB @MR5001              ; 洗浄機ﾊﾝﾄﾞ1供給完了
ANB @MR5002              ; 洗浄機ﾊﾝﾄﾞ1供給中
AND B20B2                ; ｱﾗｲﾒﾝﾄ2開限
RES MR8102               ; 洗浄機2ﾗｲﾝへｲﾝﾀｰﾛｯｸON
CON
SET @MR5000              ; 洗浄機ﾊﾝﾄﾞ1供給
CON
JMP @MR3507
STG @MR3507
ANB @MR5000              ; 洗浄機ﾊﾝﾄﾞ1供給
AND @MR5001              ; 洗浄機ﾊﾝﾄﾞ1供給完了
ANB @MR5002              ; 洗浄機ﾊﾝﾄﾞ1供給中
RES @MR5001              ; 洗浄機ﾊﾝﾄﾞ1供給完了
CON
SET MR8102               ; 洗浄機2ﾗｲﾝへｲﾝﾀｰﾛｯｸON
CON
JMP @MR3508
STG @MR3508
JMP @MR3509
;洗浄機2ﾚｰﾝ供給ﾊﾝﾄﾞ2
STG @MR3509
AND MR3100               ; RB2 移動IL(ON=起動可能)
DW #222 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
JMP @MR3510
STG @MR3510
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR3511
STG @MR3511
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND= EM1013 #222         ; RB2 動作ｽﾃｰﾀｽ1
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR3512
STG @MR3512
ANB @MR5100              ; 洗浄機ﾊﾝﾄﾞ2供給
ANB @MR5101              ; 洗浄機ﾊﾝﾄﾞ2供給完了
ANB @MR5102              ; 洗浄機ﾊﾝﾄﾞ2供給中
RES MR8102               ; 洗浄機2ﾗｲﾝへｲﾝﾀｰﾛｯｸON
CON
SET @MR5100              ; 洗浄機ﾊﾝﾄﾞ2供給
CON
JMP @MR3513
STG @MR3513
ANB @MR5100              ; 洗浄機ﾊﾝﾄﾞ2供給
AND @MR5101              ; 洗浄機ﾊﾝﾄﾞ2供給完了
ANB @MR5102              ; 洗浄機ﾊﾝﾄﾞ2供給中
RES @MR5101              ; 洗浄機ﾊﾝﾄﾞ2供給完了
CON
SET MR8102               ; 洗浄機2ﾗｲﾝへｲﾝﾀｰﾛｯｸON
CON
JMP @MR3514
STG @MR3514
MPS
@LDA DM5020              ; _生産ｶｳﾝﾀ1
CON
@ADD #2
CON
@STA DM5020              ; _生産ｶｳﾝﾀ1
MPP
JMP @MR3515
STG @MR3515
MOV #0 DM15006           ; 洗浄2吸着ﾘﾄﾗｲｶｳﾝﾄ
MOV #0 DM15010           ; 洗浄2-1ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ
MPS
MOV #0 DM15011           ; 洗浄2-2ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ
MPP
LD= DM15006 #0           ; 洗浄2吸着ﾘﾄﾗｲｶｳﾝﾄ
AND= DM15010 #0          ; 洗浄2-1ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ
AND= DM15011 #0          ; 洗浄2-2ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ
ANL
JMP @MR3600
;ｱﾗｲﾒﾝﾄ2動作
STG @MR3600
RES MR8107               ; ｱﾗｲﾒﾝﾄ2吸着ON
CON
ANB B20BC                ; 洗浄機2ﾚｰﾝ吸着状態　SOL
ANB B20BD                ; 洗浄機2ﾚｰﾝ吸着破壊状態　SOL
JMP @MR3601
STG @MR3601
AND MR3100               ; RB2 移動IL(ON=起動可能)
RES MR8013               ; 洗浄機2ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
SET MR8012               ; 洗浄機2ﾚｰﾝｱﾗｲﾒﾝﾄ閉指示
CON
MPS
LDB MR4603               ; ｱﾗｲﾒﾝﾄ2閉限Err
AND B20B3                ; ｱﾗｲﾒﾝﾄ2閉限
ANL
JMP @MR3602
MPP
AND MR4603               ; ｱﾗｲﾒﾝﾄ2閉限Err
@SET @MR1900             ; Main1 HALT許可
STG @MR3602
RES MR8012               ; 洗浄機2ﾚｰﾝｱﾗｲﾒﾝﾄ閉指示
CON
RES MR8108               ; ｱﾗｲﾒﾝﾄ2吸着破壊ON
CON
SET MR8107               ; ｱﾗｲﾒﾝﾄ2吸着ON
CON
AND B20BC                ; 洗浄機2ﾚｰﾝ吸着状態　SOL
ANB B20BD                ; 洗浄機2ﾚｰﾝ吸着破壊状態　SOL
JMP @MR3603
STG @MR3603
RES MR8107               ; ｱﾗｲﾒﾝﾄ2吸着ON
CON
AND MR3100               ; RB2 移動IL(ON=起動可能)
RES MR8012               ; 洗浄機2ﾚｰﾝｱﾗｲﾒﾝﾄ閉指示
CON
SET MR8013               ; 洗浄機2ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
MPS
LDB MR4602               ; ｱﾗｲﾒﾝﾄ2開限Err
AND B20B2                ; ｱﾗｲﾒﾝﾄ2開限
ANL
JMP @MR3700
MPP
AND MR4602               ; ｱﾗｲﾒﾝﾄ2開限Err
@SET @MR1900             ; Main1 HALT許可
;洗浄機2ﾚｰﾝ ﾜｰｸ押え
;
STG @MR3700
RES MR8012               ; 洗浄機2ﾚｰﾝｱﾗｲﾒﾝﾄ閉指示
CON
MPS
LD B20BB                 ; 洗浄機2ﾚｰﾝ吸着状態
AND< DM15006 DM7010      ; 洗浄2吸着ﾘﾄﾗｲｶｳﾝﾄ  装置基礎ﾃﾞｰﾀ6
AND< DM15010 DM7010      ; 洗浄2-1ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ  装置基礎ﾃﾞｰﾀ6
AND< DM15011 DM7010      ; 洗浄2-2ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ  装置基礎ﾃﾞｰﾀ6
ANL
JMP @MR3714
MPP
LDB B20BB                ; 洗浄機2ﾚｰﾝ吸着状態
OR>= DM15006 DM7010      ; 洗浄2吸着ﾘﾄﾗｲｶｳﾝﾄ  装置基礎ﾃﾞｰﾀ6
OR>= DM15010 DM7012      ; 洗浄2-1ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ  装置基礎ﾃﾞｰﾀ7
OR>= DM15011 DM7012      ; 洗浄2-2ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ  装置基礎ﾃﾞｰﾀ7
ANL
JMP @MR3702
STG @MR3702
JMP @MR3703
STG @MR3703
AND MR3100               ; RB2 移動IL(ON=起動可能)
DW #223 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
JMP @MR3704
STG @MR3704
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR3705
STG @MR3705
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND= EM1013 #223         ; RB2 動作ｽﾃｰﾀｽ1
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR3706
STG @MR3706
ANB @MR5800              ; 洗浄機供給ﾊﾝﾄﾞ1押え処理
ANB @MR5801              ; 洗浄機供給ﾊﾝﾄﾞ1押え処理完了
ANB @MR5802              ; 洗浄機供給ﾊﾝﾄﾞ1押え処理中
RES MR8102               ; 洗浄機2ﾗｲﾝへｲﾝﾀｰﾛｯｸON
CON
SET @MR5800              ; 洗浄機供給ﾊﾝﾄﾞ1押え処理
CON
JMP @MR3707
STG @MR3707
ANB @MR5800              ; 洗浄機供給ﾊﾝﾄﾞ1押え処理
AND @MR5801              ; 洗浄機供給ﾊﾝﾄﾞ1押え処理完了
ANB @MR5802              ; 洗浄機供給ﾊﾝﾄﾞ1押え処理中
RES @MR5801              ; 洗浄機供給ﾊﾝﾄﾞ1押え処理完了
CON
SET MR8102               ; 洗浄機2ﾗｲﾝへｲﾝﾀｰﾛｯｸON
CON
JMP @MR3708
STG @MR3708
JMP @MR3709
STG @MR3709
AND MR3100               ; RB2 移動IL(ON=起動可能)
DW #224 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
JMP @MR3710
STG @MR3710
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR3711
STG @MR3711
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND= EM1013 #224         ; RB2 動作ｽﾃｰﾀｽ1
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR3712
STG @MR3712
ANB @MR5900              ; 洗浄機供給ﾊﾝﾄﾞ2押え処理
ANB @MR5901              ; 洗浄機供給ﾊﾝﾄﾞ2押え処理完了
ANB @MR5902              ; 洗浄機供給ﾊﾝﾄﾞ2押え処理中
RES MR8102               ; 洗浄機2ﾗｲﾝへｲﾝﾀｰﾛｯｸON
CON
SET @MR5900              ; 洗浄機供給ﾊﾝﾄﾞ2押え処理
CON
JMP @MR3713
STG @MR3713
ANB @MR5900              ; 洗浄機供給ﾊﾝﾄﾞ2押え処理
AND @MR5901              ; 洗浄機供給ﾊﾝﾄﾞ2押え処理完了
ANB @MR5902              ; 洗浄機供給ﾊﾝﾄﾞ2押え処理中
RES @MR5901              ; 洗浄機供給ﾊﾝﾄﾞ2押え処理完了
CON
SET MR8102               ; 洗浄機2ﾗｲﾝへｲﾝﾀｰﾛｯｸON
CON
JMP @MR3714
STG @MR3714
AND MR3100               ; RB2 移動IL(ON=起動可能)
SET MR8009               ; ｱﾗｲﾒﾝﾄ2ﾚｰﾝXY同時閉
CON
SET MR8009               ; ｱﾗｲﾒﾝﾄ2ﾚｰﾝXY同時閉
CON
RES MR8013               ; 洗浄機2ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
SET MR8012               ; 洗浄機2ﾚｰﾝｱﾗｲﾒﾝﾄ閉指示
CON
MPS
LDB MR4603               ; ｱﾗｲﾒﾝﾄ2閉限Err
AND B20B3                ; ｱﾗｲﾒﾝﾄ2閉限
ANL
JMP @MR3715
MPP
AND MR4603               ; ｱﾗｲﾒﾝﾄ2閉限Err
@SET @MR1900             ; Main1 HALT許可
STG @MR3715
RES MR8009               ; ｱﾗｲﾒﾝﾄ2ﾚｰﾝXY同時閉
CON
RES MR8012               ; 洗浄機2ﾚｰﾝｱﾗｲﾒﾝﾄ閉指示
CON
MPS
AND B20BB                ; 洗浄機2ﾚｰﾝ吸着状態
JMP @MR3800
MPP
ANB B20BB                ; 洗浄機2ﾚｰﾝ吸着状態
MPS
AND>= DM15006 DM7010     ; 洗浄2吸着ﾘﾄﾗｲｶｳﾝﾄ  装置基礎ﾃﾞｰﾀ6
JMP @MR4106
MPP
AND< DM15006 DM7010      ; 洗浄2吸着ﾘﾄﾗｲｶｳﾝﾄ  装置基礎ﾃﾞｰﾀ6
JMP @MR4702
STG @MR4702
AND MR3100               ; RB2 移動IL(ON=起動可能)
RES MR8012               ; 洗浄機2ﾚｰﾝｱﾗｲﾒﾝﾄ閉指示
CON
SET MR8013               ; 洗浄機2ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
RES MR8107               ; ｱﾗｲﾒﾝﾄ2吸着ON
CON
SET MR8109               ; ｱﾗｲﾒﾝﾄ2吸着破壊OFF
CON
ANB B20BC                ; 洗浄機2ﾚｰﾝ吸着状態　SOL
ANB B20BD                ; 洗浄機2ﾚｰﾝ吸着破壊状態　SOL
AND B20B2                ; ｱﾗｲﾒﾝﾄ2開限
JMP @MR4703
STG @MR4703
RES MR8013               ; 洗浄機2ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
RES MR8109               ; ｱﾗｲﾒﾝﾄ2吸着破壊OFF
CON
@INC DM15006             ; 洗浄2吸着ﾘﾄﾗｲｶｳﾝﾄ
CON
JMP @MR3600
STG @MR4106
AND MR3100               ; RB2 移動IL(ON=起動可能)
DW #226 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR4107
STG @MR4107
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND= EM1013 #226         ; RB2 動作ｽﾃｰﾀｽ1
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR4108
STG @MR4108
@SET @MR1900             ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #8600 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #24 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR4109
STG @MR4109
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES @MR1900              ; Main1 HALT許可
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR105               ; SW1
JMP @MR4402
MPP
AND @MR106               ; SW2
JMP @MR4110
STG @MR4402
AND MR3100               ; RB2 移動IL(ON=起動可能)
RES MR8012               ; 洗浄機2ﾚｰﾝｱﾗｲﾒﾝﾄ閉指示
CON
SET MR8013               ; 洗浄機2ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
RES MR8107               ; ｱﾗｲﾒﾝﾄ2吸着ON
CON
SET MR8109               ; ｱﾗｲﾒﾝﾄ2吸着破壊OFF
CON
ANB B20BC                ; 洗浄機2ﾚｰﾝ吸着状態　SOL
ANB B20BD                ; 洗浄機2ﾚｰﾝ吸着破壊状態　SOL
AND B20B2                ; ｱﾗｲﾒﾝﾄ2開限
JMP @MR4403
STG @MR4403
RES MR8013               ; 洗浄機2ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
RES MR8109               ; ｱﾗｲﾒﾝﾄ2吸着破壊OFF
CON
JMP @MR3600
STG @MR4110
MPS
@LDA DM5024              ; _生産ｶｳﾝﾀ3
CON
ADD #2
CON
@STA DM5024              ; _生産ｶｳﾝﾀ3
MPP
AND MR3100               ; RB2 移動IL(ON=起動可能)
RES MR8012               ; 洗浄機2ﾚｰﾝｱﾗｲﾒﾝﾄ閉指示
CON
SET MR8013               ; 洗浄機2ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
RES MR8107               ; ｱﾗｲﾒﾝﾄ2吸着ON
CON
SET MR8109               ; ｱﾗｲﾒﾝﾄ2吸着破壊OFF
CON
ANB B20BC                ; 洗浄機2ﾚｰﾝ吸着状態　SOL
ANB B20BD                ; 洗浄機2ﾚｰﾝ吸着破壊状態　SOL
AND B20B2                ; ｱﾗｲﾒﾝﾄ2開限
JMP @MR4011
STG @MR4011
RES MR8013               ; 洗浄機2ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
RES MR8109               ; ｱﾗｲﾒﾝﾄ2吸着破壊OFF
CON
SET MR8114               ; 洗浄機2ﾚｰﾝ動作失敗
CON
AND B2099                ; 洗浄機より給材2ﾗｲﾝ動作開始許可
RES MR8114               ; 洗浄機2ﾚｰﾝ動作失敗
CON
JMP @MR3900
;洗浄機2ﾚｰﾝｶﾒﾗ検査1
STG @MR3800
AND MR3100               ; RB2 移動IL(ON=起動可能)
DW #231 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
JMP @MR3801
STG @MR3801
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR3802
STG @MR3802
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND= EM1013 #231         ; RB2 動作ｽﾃｰﾀｽ1
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR3803
STG @MR3803
ANB @MR5200              ; ｶﾒﾗ検査処理Sub
ANB @MR5201              ; ｶﾒﾗ検査処理Sub　End
ANB @MR5202              ; ｶﾒﾗ検査処理Sub処理中
SET @MR5200              ; ｶﾒﾗ検査処理Sub
CON
JMP @MR3804
STG @MR3804
ANB @MR5200              ; ｶﾒﾗ検査処理Sub
AND @MR5201              ; ｶﾒﾗ検査処理Sub　End
ANB @MR5202              ; ｶﾒﾗ検査処理Sub処理中
RES @MR5201              ; ｶﾒﾗ検査処理Sub　End
CON
JMP @MR3805
STG @MR3805
MPS
LD MR18110               ; 画像検査OK
ANB MR18111              ; 画像検査NG
ANL
JMP @MR3806
MPP
AND MR18111              ; 画像検査NG
MPS
AND>= DM15010 DM7012     ; 洗浄2-1ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ  装置基礎ﾃﾞｰﾀ7
JMP @MR4300
MPP
AND< DM15010 DM7012      ; 洗浄2-1ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ  装置基礎ﾃﾞｰﾀ7
JMP @MR4710
STG @MR4710
AND MR3100               ; RB2 移動IL(ON=起動可能)
RES MR8012               ; 洗浄機2ﾚｰﾝｱﾗｲﾒﾝﾄ閉指示
CON
SET MR8013               ; 洗浄機2ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
RES MR8107               ; ｱﾗｲﾒﾝﾄ2吸着ON
CON
SET MR8109               ; ｱﾗｲﾒﾝﾄ2吸着破壊OFF
CON
ANB B20BC                ; 洗浄機2ﾚｰﾝ吸着状態　SOL
ANB B20BD                ; 洗浄機2ﾚｰﾝ吸着破壊状態　SOL
AND B20B2                ; ｱﾗｲﾒﾝﾄ2開限
JMP @MR4711
STG @MR4711
RES MR8013               ; 洗浄機2ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
RES MR8109               ; ｱﾗｲﾒﾝﾄ2吸着破壊OFF
CON
DW #0 DM15006            ; 洗浄2吸着ﾘﾄﾗｲｶｳﾝﾄ
CON
DW #0 DM15011            ; 洗浄2-2ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ
CON
@INC DM15010             ; 洗浄2-1ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ
CON
JMP @MR3600
STG @MR4300
AND MR3100               ; RB2 移動IL(ON=起動可能)
DW #226 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR4301
STG @MR4301
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND= EM1013 #226         ; RB2 動作ｽﾃｰﾀｽ1
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR4302
STG @MR4302
@SET @MR1900             ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #3864 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #27 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR4303
STG @MR4303
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES @MR1900              ; Main1 HALT許可
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR105               ; SW1
JMP @MR3800
MRD
AND @MR106               ; SW2
JMP @MR4710
MRD
AND @MR107               ; SW3
JMP @MR4304
MPP
AND @MR108               ; SW4
JMP @MR3806
STG @MR4304
MPS
@LDA DM5024              ; _生産ｶｳﾝﾀ3
CON
ADD #2
CON
@STA DM5024              ; _生産ｶｳﾝﾀ3
MPP
AND MR3100               ; RB2 移動IL(ON=起動可能)
RES MR8012               ; 洗浄機2ﾚｰﾝｱﾗｲﾒﾝﾄ閉指示
CON
SET MR8013               ; 洗浄機2ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
RES MR8107               ; ｱﾗｲﾒﾝﾄ2吸着ON
CON
SET MR8109               ; ｱﾗｲﾒﾝﾄ2吸着破壊OFF
CON
ANB B20BC                ; 洗浄機2ﾚｰﾝ吸着状態　SOL
ANB B20BD                ; 洗浄機2ﾚｰﾝ吸着破壊状態　SOL
AND B20B2                ; ｱﾗｲﾒﾝﾄ2開限
JMP @MR4305
STG @MR4305
RES MR8013               ; 洗浄機2ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
RES MR8109               ; ｱﾗｲﾒﾝﾄ2吸着破壊OFF
CON
SET MR8114               ; 洗浄機2ﾚｰﾝ動作失敗
CON
AND B2099                ; 洗浄機より給材2ﾗｲﾝ動作開始許可
RES MR8114               ; 洗浄機2ﾚｰﾝ動作失敗
CON
JMP @MR3900
STG @MR3806
JMP @MR3807
;洗浄機2ﾚｰﾝｶﾒﾗ検査2
STG @MR3807
AND MR3100               ; RB2 移動IL(ON=起動可能)
DW #232 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
JMP @MR3808
STG @MR3808
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR3809
STG @MR3809
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND= EM1013 #232         ; RB2 動作ｽﾃｰﾀｽ1
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR3810
STG @MR3810
ANB @MR5200              ; ｶﾒﾗ検査処理Sub
ANB @MR5201              ; ｶﾒﾗ検査処理Sub　End
ANB @MR5202              ; ｶﾒﾗ検査処理Sub処理中
SET @MR5200              ; ｶﾒﾗ検査処理Sub
CON
JMP @MR3811
STG @MR3811
ANB @MR5200              ; ｶﾒﾗ検査処理Sub
AND @MR5201              ; ｶﾒﾗ検査処理Sub　End
ANB @MR5202              ; ｶﾒﾗ検査処理Sub処理中
RES @MR5201              ; ｶﾒﾗ検査処理Sub　End
CON
JMP @MR3812
STG @MR3812
MPS
LD MR18110               ; 画像検査OK
ANB MR18111              ; 画像検査NG
ANL
JMP @MR3813
MPP
AND MR18111              ; 画像検査NG
MPS
AND>= DM15011 DM7012     ; 洗浄2-2ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ  装置基礎ﾃﾞｰﾀ7
JMP @MR4306
MPP
AND< DM15011 DM7012      ; 洗浄2-2ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ  装置基礎ﾃﾞｰﾀ7
JMP @MR4712
STG @MR4712
AND MR3100               ; RB2 移動IL(ON=起動可能)
RES MR8012               ; 洗浄機2ﾚｰﾝｱﾗｲﾒﾝﾄ閉指示
CON
SET MR8013               ; 洗浄機2ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
RES MR8107               ; ｱﾗｲﾒﾝﾄ2吸着ON
CON
SET MR8109               ; ｱﾗｲﾒﾝﾄ2吸着破壊OFF
CON
ANB B20BC                ; 洗浄機2ﾚｰﾝ吸着状態　SOL
ANB B20BD                ; 洗浄機2ﾚｰﾝ吸着破壊状態　SOL
AND B20B2                ; ｱﾗｲﾒﾝﾄ2開限
JMP @MR4713
STG @MR4713
RES MR8013               ; 洗浄機2ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
RES MR8109               ; ｱﾗｲﾒﾝﾄ2吸着破壊OFF
CON
DW #0 DM15006            ; 洗浄2吸着ﾘﾄﾗｲｶｳﾝﾄ
CON
DW #0 DM15010            ; 洗浄2-1ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ
CON
@INC DM15011             ; 洗浄2-2ｶﾒﾗﾘﾄﾗｲｶｳﾝﾄ
CON
JMP @MR3600
STG @MR4306
AND MR3100               ; RB2 移動IL(ON=起動可能)
DW #226 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR4307
STG @MR4307
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND= EM1013 #226         ; RB2 動作ｽﾃｰﾀｽ1
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR4308
STG @MR4308
@SET @MR1900             ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #3864 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #28 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR4309
STG @MR4309
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES @MR1900              ; Main1 HALT許可
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR105               ; SW1
JMP @MR3807
MRD
AND @MR106               ; SW2
JMP @MR4712
MRD
AND @MR107               ; SW3
JMP @MR4310
MPP
AND @MR108               ; SW4
JMP @MR3813
STG @MR4310
MPS
@LDA DM5024              ; _生産ｶｳﾝﾀ3
CON
ADD #2
CON
@STA DM5024              ; _生産ｶｳﾝﾀ3
MPP
AND MR3100               ; RB2 移動IL(ON=起動可能)
RES MR8012               ; 洗浄機2ﾚｰﾝｱﾗｲﾒﾝﾄ閉指示
CON
SET MR8013               ; 洗浄機2ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
RES MR8107               ; ｱﾗｲﾒﾝﾄ2吸着ON
CON
SET MR8109               ; ｱﾗｲﾒﾝﾄ2吸着破壊OFF
CON
ANB B20BC                ; 洗浄機2ﾚｰﾝ吸着状態　SOL
ANB B20BD                ; 洗浄機2ﾚｰﾝ吸着破壊状態　SOL
AND B20B2                ; ｱﾗｲﾒﾝﾄ2開限
JMP @MR4311
STG @MR4311
RES MR8013               ; 洗浄機2ﾚｰﾝｱﾗｲﾒﾝﾄ開指示
CON
RES MR8109               ; ｱﾗｲﾒﾝﾄ2吸着破壊OFF
CON
SET MR8114               ; 洗浄機2ﾚｰﾝ動作失敗
CON
AND B2099                ; 洗浄機より給材2ﾗｲﾝ動作開始許可
RES MR8114               ; 洗浄機2ﾚｰﾝ動作失敗
CON
JMP @MR3900
STG @MR3813
ANB @MR5700              ; 洗浄機I/F 2ﾚｰﾝ投入終了処理
ANB @MR5701              ; 洗浄機I/F 2ﾚｰﾝ投入終了処理完了
ANB @MR5702              ; 洗浄機I/F 2ﾚｰﾝ投入終了処理中
SET R47001               ; _処理時間2計測開始
CON
SET @MR5700              ; 洗浄機I/F 2ﾚｰﾝ投入終了処理
CON
JMP @MR3814
STG @MR3814
ANB @MR5700              ; 洗浄機I/F 2ﾚｰﾝ投入終了処理
AND @MR5701              ; 洗浄機I/F 2ﾚｰﾝ投入終了処理完了
ANB @MR5702              ; 洗浄機I/F 2ﾚｰﾝ投入終了処理中
RES @MR5701              ; 洗浄機I/F 2ﾚｰﾝ投入終了処理完了
CON
JMP @MR3815
STG @MR3815
RES MR9000               ; 洗浄機供給開始task1
CON
RES MR9002               ; 洗浄機供給中task1
CON
SET MR9001               ; 洗浄機供給完了task1
CON
SET MR8102               ; 洗浄機2ﾗｲﾝへｲﾝﾀｰﾛｯｸON
CON
JMP @MR3900
;Auto終了処理
STG @MR3900
MPS
LDB R46106               ; _定停止移行中
OR MR12000               ; ｽｶﾗｰRBﾊﾝﾄﾞﾜｰｸ2ヶ有り
ANL
RES MR9000               ; 洗浄機供給開始task1
CON
RES MR9002               ; 洗浄機供給中task1
CON
SET MR9001               ; 洗浄機供給完了task1
CON
ANB MR9000               ; 洗浄機供給開始task1
AND MR9001               ; 洗浄機供給完了task1
ANB MR9002               ; 洗浄機供給中task1
JMP @MR3914
MPP
LD R46106                ; _定停止移行中
AND MR12001              ; ｽｶﾗｰRBﾊﾝﾄﾞﾜｰｸ無し
ANL
RES MR9000               ; 洗浄機供給開始task1
CON
RES MR9002               ; 洗浄機供給中task1
CON
SET MR9001               ; 洗浄機供給完了task1
CON
ANB MR9000               ; 洗浄機供給開始task1
JMP @MR3915              ; AUTO END
STG @MR3914
ANB @MR001               ; TASK1 ERROR
MPS
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
MPS
LDB R46106               ; _定停止移行中
OR MR12000               ; ｽｶﾗｰRBﾊﾝﾄﾞﾜｰｸ2ヶ有り
ANL
JMP @MR3003
MPP
LD R46106                ; _定停止移行中
AND MR12001              ; ｽｶﾗｰRBﾊﾝﾄﾞﾜｰｸ無し
ANL
JMP @MR3915              ; AUTO END
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
@SET @MR1900             ; Main1 HALT許可
STG @MR3915              ; AUTO END
MPS
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET MR16001              ; TASK1終了可
CON
AND MR16000              ; TASK0より終了可
JMP LR601                ; _Grp1_Task1_Fin.STG
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
@SET @MR1900             ; Main1 HALT許可
;<h1/>Auto-Main2/Autoﾒｲﾝﾙｰﾁﾝ2
;[本STG内容]
;・@MR4000の起動はMain1にて行う事
;・@MR4000:AUTO_Main2開始、@MR4001:AUTO_Main2完了、@MR4002:AUTO_Main2動作中
STG @MR4000
SET @MR4002
CON
JMP @MR4003
STG @MR4003
JMP @MR4015              ; Main2 END
STG @MR4015              ; Main2 END
SET @MR4001
CON
RES @MR4002
CON
ENDS
;<h1/>MAINTE/ﾒﾝﾃﾅﾝｽ動作
;[本STG内容]
;・各TaskのMAINTE動作を記述して下さい
;・動作ﾓｰﾄﾞは「MAINTEAC*」に格納されています(1〜32)
;・動作終了時は@MR2915にJMPして下さい
STG LR5601               ; _Grp1_Task1_MAINTE.STG
JMP @MR2000              ; Mainte
STG @MR2000              ; Mainte
JMP @MR2915              ; Mainte END
STG @MR2915              ; Mainte END
MPS
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET MR16001              ; TASK1終了可
CON
AND MR16000              ; TASK0より終了可
JMP LR601                ; _Grp1_Task1_Fin.STG
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
@SET @MR1900             ; Main1 HALT許可
;<h1/>ERROR
;//*Error Sample
;[使用方法]
;・@DM1にERROR番号を代入
;・@DM2にSensor番号を代入(センサ無しエラーの場合は0)
;・@DM9に復帰SW番号(1〜9、0はSW無し)をdegit単位で4桁入力
;・Task0 ERROR SET(@MR100)でエラー処理開始
;・エラー復帰でTask0 ERROR END(@MR101)がON
;・押下復帰SW番号により左から対応した@MR105,@MR106,@MR107,@MR108のいずれかがON
;・上記ONが成立したらJMPするSTGに対応する処理を記述
;Error0を左側から1,2,3,4の番号に対応した復帰選択SWを出力する
;Error Sample *//
;MyTask Error Process Substance/エラー処理実体
STG @MR100               ; Task0 ERROR
ANB R39002               ; ERROR_DISP Busy
MPS
ZRES @MR105 @MR108       ; SW1  SW4
CON
LDA @DM9                 ; ReturnSW /ERROR_DISP
CON
TBCD
CON
STA @DM10
CON
DISN @DM10 @DM3 #4
MRD
DW #1 @DM0               ; TaskNo /ERROR_DISP
CON
BMOV @DM0 DM60000 #7     ; TaskNo /ERROR_DISP  TaskNo /ERROR_DISP
MPP
SET R39000               ; ERROR_DISP Start
CON
SET @MR102               ; Task1 ERROR Busy
CON
JMP @MR103
STG @MR103
AND R39002               ; ERROR_DISP Busy
AND= DM60008 @DM1        ; ReturnNo /ERROR_DISP  ErrorNo /ERROR_DISP
MPS
AND= DM60007 @DM6        ; ReturnSW /ERROR_DISP
SET @MR105               ; SW1
CON
JMP @MR104
MRD
AND= DM60007 @DM5        ; ReturnSW /ERROR_DISP
SET @MR106               ; SW2
CON
JMP @MR104
MRD
AND= DM60007 @DM4        ; ReturnSW /ERROR_DISP
SET @MR107               ; SW3
CON
JMP @MR104
MPP
AND= DM60007 @DM3        ; ReturnSW /ERROR_DISP
SET @MR108               ; SW4
CON
JMP @MR104
STG @MR104
ANB R39002               ; ERROR_DISP Busy
RES @MR102               ; Task1 ERROR Busy
CON
SET @MR101               ; Task0 ｴﾗｰ完了
CON
ENDS
;<h1/>SELECT_ACT
;//*Select_ACT Sample
;画面番号33をブザー有りで選択SW番号を左から#5,#10,#0(無し),#34の並びで表示する
;Select_ACT Sample *//
;MyTask Select_ACT Process Substance/SELECT_ACT処理実体
STG @MR200               ; Task1 SELECT_ACT
ANB R39202               ; SELECT_ACT Busy
MPS
ZRES @MR205 @MR208       ; SW1  SW4
CON
DW #1 @DM30              ; TaskNo /SELECT_ACT
CON
BMOV @DM30 DM60030 #7    ; TaskNo /SELECT_ACT  TaskNo /SELECT_ACT
MPP
SET R39200               ; SELECT_ACT Start
CON
SET @MR202               ; Task1 SEL_ACT Busy
CON
JMP @MR203
STG @MR203
AND R39202               ; SELECT_ACT Busy
AND<> DM60037 #0         ; SelectSW /SELECT_ACT
MPS
AND= DM60037 #1          ; SelectSW /SELECT_ACT
SET @MR205               ; SW1
CON
JMP @MR204
MRD
AND= DM60037 #2          ; SelectSW /SELECT_ACT
SET @MR206               ; SW2
CON
JMP @MR204
MRD
AND= DM60037 #3          ; SelectSW /SELECT_ACT
SET @MR207               ; SW3
CON
JMP @MR204
MPP
AND= DM60037 #4          ; SelectSW /SELECT_ACT
SET @MR208               ; SW4
CON
JMP @MR204
STG @MR204
ANB R39202               ; SELECT_ACT Busy
RES @MR202               ; Task1 SEL_ACT Busy
CON
SET @MR201               ; Task1 SEL_ACT END
CON
ENDS
;<h1/>SELECT_Y_N
;//*Select_Y_N Sample
;*Select_Y_N Sample//
;MyTask Select_Y_N Process Substance/SELECT_Y_N処理実体
STG @MR300               ; Task1 SELECT_Y_N
ANB R39102               ; SELECT_Y_N Busy
MPS
ZRES @MR306 @MR307       ; Task1 Y/N
CON
DW #1 @DM20              ; TaskNo /SELECT_Y_N
CON
BMOV @DM20 DM60020 #3    ; TaskNo /SELECT_Y_N  TaskNo /SELECT_Y_N
MPP
SET R39100               ; SELECT_Y_N Start
CON
SET @MR302               ; Task1 Y_N Busy
CON
JMP @MR303
STG @MR303
AND R39102               ; SELECT_Y_N Busy
MPS
AND= DM60023 #1          ; Y_N /SELECT_Y_N
SET @MR306               ; Task1 Y/N
CON
JMP @MR304
MPP
AND= DM60023 #2          ; Y_N /SELECT_Y_N
RES @MR306               ; Task1 Y/N
CON
JMP @MR304
STG @MR304
ANB R39102               ; SELECT_Y_N Busy
RES @MR302               ; Task1 Y_N Busy
CON
SET @MR301               ; Task1 Y/N END
CON
ENDS
;<h1/>TIMEUP_ERROR
;//*TIMEUP_ERROR Sample
;サンプルセンサ:MR5000=ON AND MR5001 = OFF のいずれかが5sタイムアップしたらTIMEUP_ERROR出力
;エラー復帰後、再度センサ確認
;TIMEUP_ERROR Sample *//
;MyTask TIMEUP_ERROR Process Substance/TIMEUP_ERROR処理実体
STG @MR400               ; Task1 TIMEUP_ERR
ANB R39302               ; TIMEUP_ERR Busy
MPS
DW #1 @DM40              ; TaskNo /TIMEUP_ERR
CON
BMOV @DM40 DM60040 #2    ; TaskNo /TIMEUP_ERR  TaskNo /TIMEUP_ERR
MPP
SET R39300               ; TIMEUP_ERR Start
CON
SET @MR402               ; Task1 TIMEUP Busy
CON
JMP @MR403
STG @MR403
AND R39302               ; TIMEUP_ERR Busy
JMP @MR404
STG @MR404
ANB R39302               ; TIMEUP_ERR Busy
RES @MR402               ; Task1 TIMEUP Busy
CON
SET @MR401               ; Task1 TIMEUP_END
CON
ENDS
;<h1/>SubRoutines/ｻﾌﾞﾙｰﾁﾝ
;[記述方法]
;・ｻﾌﾞﾙｰﾁﾝは本ﾌﾞｯｸﾏｰｸから下に記述していって下さい
;・ｻﾌﾞﾙｰﾁﾝは必ずﾌﾞｯｸﾏｰｸを挿入して処理内容を明確にする事
;<h1/> RB2　 動作指令
STG @MR4500              ; RB2動作指令Sub Start
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB R35102               ; During RB2 MOVE
ANB R35106               ; During RB2 RECOVERY MOVE
ANL
SET @MR4502              ; RB2動作指令Sub中
CON
SET R35100               ; RB2 MOVE
CON
JMP @MR4505
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
@SET @MR1900             ; Main1 HALT許可
STG @MR4505
LD R35101                ; RB2 MOVE END
OR R35105                ; RB2 RECOVERY MOVE END
ANL
MPS
LDB R35103               ; RB2 Status Alarm
ANB R35107               ; RB2 Moving Alarm
ANL
RES R35101               ; RB2 MOVE END
CON
RES R35105               ; RB2 RECOVERY MOVE END
CON
JMP @MR4506
MRD
AND R35103               ; RB2 Status Alarm
MPS
LD= EM1013 #1            ; RB2 動作ｽﾃｰﾀｽ1
AND CR2003               ; 常時OFF
ANL
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #61 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4600
MPP
LD= EM1013 #5            ; RB2 動作ｽﾃｰﾀｽ1
OR CR2002                ; 常時ON
AND CR2003               ; 常時OFF
ANL
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #65 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4600
MPP
AND R35107               ; RB2 Moving Alarm
JMP @MR4604
STG @MR4506
MPS
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR4501              ; RB2動作指令Sub End
CON
RES @MR4502              ; RB2動作指令Sub中
CON
ENDS
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
@SET @MR1900             ; Main1 HALT許可
; 動作終了時の異常処理
STG @MR4600
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
RES R35101               ; RB2 MOVE END
CON
RES R35105               ; RB2 RECOVERY MOVE END
CON
RES R35103               ; RB2 Status Alarm
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR4601              ; ﾜｰｸｾｯﾄ完了
STG @MR4601              ; ﾜｰｸｾｯﾄ完了
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR105               ; SW1
JMP @MR4506
MRD
AND @MR106               ; SW2
JMP @MR4500              ; RB2動作指令Sub Start
MRD
LD @MR107                ; SW3
ANB R35104               ; RB2 RECOVERY MOVE
ANL
SET R35104               ; RB2 RECOVERY MOVE
CON
JMP @MR4505
MPP
AND @MR108               ; SW4
JMP @MR4500              ; RB2動作指令Sub Start
; 動作中異常発生時の異常処理
STG @MR4604
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
RES R35101               ; RB2 MOVE END
CON
RES R35105               ; RB2 RECOVERY MOVE END
CON
RES R35107               ; RB2 Moving Alarm
CON
SET @MR100               ; Task0 ERROR
CON
JMP @MR4605
STG @MR4605
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
LD @MR106                ; SW2
ANB R35100               ; RB2 MOVE
ANL
SET R35104               ; RB2 RECOVERY MOVE
CON
JMP @MR4505
MRD
LD @MR107                ; SW3
ANB R35100               ; RB2 MOVE
ANL
SET R35104               ; RB2 RECOVERY MOVE
CON
JMP @MR4505
MPP
AND @MR108               ; SW4
SET @MR4503              ; RB2動作指令Sub HOLD End
CON
ANB R35100               ; RB2 MOVE
SET R35104               ; RB2 RECOVERY MOVE
CON
JMP @MR4505
;洗浄機供給ﾊﾝﾄﾞ1処理
STG @MR5000              ; 洗浄機ﾊﾝﾄﾞ1供給
ANB @MR5001              ; 洗浄機ﾊﾝﾄﾞ1供給完了
ANB @MR5002              ; 洗浄機ﾊﾝﾄﾞ1供給中
MPS
ANB CR2002               ; 常時ON
RES MR8105               ; ｱﾗｲﾒﾝﾄ1吸着破壊ON
CON
SET MR8104               ; ｱﾗｲﾒﾝﾄ1吸着ON
CON
AND B2074                ; 洗浄機へｱﾗｲﾒﾝﾄ1吸着ON
SET @MR5002              ; 洗浄機ﾊﾝﾄﾞ1供給中
CON
JMP @MR5005
MPP
AND CR2002               ; 常時ON
SET @MR5002              ; 洗浄機ﾊﾝﾄﾞ1供給中
CON
JMP @MR5005
STG @MR5005
RES MR7600               ; ﾊﾝﾄﾞ1上昇SOL
CON
SET MR7601               ; ﾊﾝﾄﾞ1下降SOL
CON
MPS
LDB MR4400               ; ﾊﾝﾄﾞ1下降端Err
AND R4400                ; RB2ﾊﾝﾄﾞ1下降限
ANL
JMP @MR5006
MPP
LD MR4400                ; ﾊﾝﾄﾞ1下降端Err
AND R41201               ; CELL間 TASK1 PAUSE要求
ANL
@SET @MR1900             ; Main1 HALT許可
STG @MR5006
JMP @MR5007
STG @MR5007
RES MR7608               ; RB2ﾊﾝﾄﾞ1吸着ON
CON
SET MR7609               ; RB2ﾊﾝﾄﾞ1吸着OFF
CON
TMH @22 #10
CON
AND @T22
SET MR7610               ; RB2ﾊﾝﾄﾞ1吸着破壊ON
CON
TMH @23 #10
CON
AND @T23
JMP @MR5008
STG @MR5008
RES MR7601               ; ﾊﾝﾄﾞ1下降SOL
CON
SET MR7600               ; ﾊﾝﾄﾞ1上昇SOL
CON
MPS
LDB MR4401               ; ﾊﾝﾄﾞ1上昇端Err
AND R4401                ; RB2ﾊﾝﾄﾞ1上昇限
ANL
RES MR7610               ; RB2ﾊﾝﾄﾞ1吸着破壊ON
CON
JMP @MR5009
MPP
LD MR4401                ; ﾊﾝﾄﾞ1上昇端Err
AND R41201               ; CELL間 TASK1 PAUSE要求
ANL
@SET @MR1900             ; Main1 HALT許可
STG @MR5009
RES MR7605               ; ﾊﾝﾄﾞ1押え下降SOL
CON
SET MR7604               ; ﾊﾝﾄﾞ1押え上昇SOL
CON
MPS
LDB MR4405               ; ﾊﾝﾄﾞ1押え上昇端Err
AND R4405                ; ﾊﾝﾄﾞ1押え上昇端
ANL
RES @MR5002              ; 洗浄機ﾊﾝﾄﾞ1供給中
CON
SET @MR5001              ; 洗浄機ﾊﾝﾄﾞ1供給完了
CON
ENDS
MPP
LD MR4405                ; ﾊﾝﾄﾞ1押え上昇端Err
AND R41201               ; CELL間 TASK1 PAUSE要求
ANL
@SET @MR1900             ; Main1 HALT許可
;洗浄機供給ﾊﾝﾄﾞ2処理
STG @MR5100              ; 洗浄機ﾊﾝﾄﾞ2供給
ANB @MR5101              ; 洗浄機ﾊﾝﾄﾞ2供給完了
ANB @MR5102              ; 洗浄機ﾊﾝﾄﾞ2供給中
MPS
ANB CR2002               ; 常時ON
RES MR8108               ; ｱﾗｲﾒﾝﾄ2吸着破壊ON
CON
SET MR8107               ; ｱﾗｲﾒﾝﾄ2吸着ON
CON
AND B2076                ; 洗浄機へｱﾗｲﾒﾝﾄ1吸着破壊OFF
SET @MR5102              ; 洗浄機ﾊﾝﾄﾞ2供給中
CON
JMP @MR5105
MPP
AND CR2002               ; 常時ON
SET @MR5102              ; 洗浄機ﾊﾝﾄﾞ2供給中
CON
JMP @MR5105
STG @MR5105
RES MR7602               ; ﾊﾝﾄﾞ2上昇SOL
CON
SET MR7603               ; ﾊﾝﾄﾞ2下降SOL
CON
MPS
LDB MR4402               ; ﾊﾝﾄﾞ2下降端Err
AND R4402                ; RB2ﾊﾝﾄﾞ2下降限
ANL
JMP @MR5106
MPP
LD MR4402                ; ﾊﾝﾄﾞ2下降端Err
AND R41201               ; CELL間 TASK1 PAUSE要求
ANL
@SET @MR1900             ; Main1 HALT許可
STG @MR5106
JMP @MR5107
STG @MR5107
RES MR7611               ; TRB2ﾊﾝﾄﾞ2吸着ON
CON
SET MR7612               ; RB2ﾊﾝﾄﾞ2吸着OFF
CON
TMH @26 #10
CON
AND @T26
SET MR7613               ; RB2ﾊﾝﾄﾞ2吸着破壊
CON
TMH @27 #10
CON
AND @T27
JMP @MR5108
STG @MR5108
RES MR7603               ; ﾊﾝﾄﾞ2下降SOL
CON
SET MR7602               ; ﾊﾝﾄﾞ2上昇SOL
CON
MPS
LDB MR4403               ; ﾊﾝﾄﾞ2上昇端Err
AND R4403                ; RB2ﾊﾝﾄﾞ2上昇限
ANL
RES MR7613               ; RB2ﾊﾝﾄﾞ2吸着破壊
CON
JMP @MR5109
MPP
LD MR4403                ; ﾊﾝﾄﾞ2上昇端Err
AND R41201               ; CELL間 TASK1 PAUSE要求
ANL
@SET @MR1900             ; Main1 HALT許可
STG @MR5109
RES MR7607               ; ﾊﾝﾄﾞ2押え下降SOL
CON
SET MR7606               ; ﾊﾝﾄﾞ2押え上昇SOL
CON
MPS
LDB MR4407               ; ﾊﾝﾄﾞ2押え上昇端Err
AND R4407                ; ﾊﾝﾄﾞ2押え上昇端
ANL
RES @MR5102              ; 洗浄機ﾊﾝﾄﾞ2供給中
CON
SET @MR5101              ; 洗浄機ﾊﾝﾄﾞ2供給完了
CON
ENDS
MPP
LD MR4407                ; ﾊﾝﾄﾞ2押え上昇端Err
AND R41201               ; CELL間 TASK1 PAUSE要求
ANL
@SET @MR1900             ; Main1 HALT許可
;ｶﾒﾗ確認処理
STG @MR5200              ; ｶﾒﾗ検査処理Sub
ANB @MR5201              ; ｶﾒﾗ検査処理Sub　End
ANB @MR5202              ; ｶﾒﾗ検査処理Sub処理中
SET @MR5202              ; ｶﾒﾗ検査処理Sub処理中
CON
JMP @MR5205
STG @MR5205
RES MR18110              ; 画像検査OK
CON
RES MR18111              ; 画像検査NG
CON
ANB MR18110              ; 画像検査OK
ANB MR18111              ; 画像検査NG
JMP @MR5206
STG @MR5206
ANB R4501                ; 画像ﾋﾞｼﾞｰ
AND R4502                ; 画像ｴﾗｰ
JMP @MR5207
STG @MR5207
SET MR7700               ; 画像ﾄﾘｶﾞｰ
CON
AND R4501                ; 画像ﾋﾞｼﾞｰ
RES MR7700               ; 画像ﾄﾘｶﾞｰ
CON
JMP @MR5208
STG @MR5208
ANB R4501                ; 画像ﾋﾞｼﾞｰ
TMR @40 #3
CON
AND @T40
JMP @MR5209
STG @MR5209
MPS
AND R4500                ; 画像判定OK
SET MR18110              ; 画像検査OK
CON
JMP @MR5212
MPP
AND R4503                ; 画像判定NG
SET MR18111              ; 画像検査NG
CON
JMP @MR5212
STG @MR5212
RES @MR5202              ; ｶﾒﾗ検査処理Sub処理中
CON
SET @MR5201              ; ｶﾒﾗ検査処理Sub　End
CON
ENDS
;洗浄機I/F 1ﾚｰﾝ投入開始処理
STG @MR5400              ; 洗浄機I/F 1ﾚｰﾝ投入開始処理
ANB @MR5401              ; 洗浄機I/F 1ﾚｰﾝ投入開始処理完了
ANB @MR5402              ; 洗浄機I/F 1ﾚｰﾝ投入開始処理中
SET @MR5402              ; 洗浄機I/F 1ﾚｰﾝ投入開始処理中
CON
JMP @MR5405
STG @MR5405
AND B2091                ; 洗浄機より給材1ﾗｲﾝ動作開始許可
SET MR8200               ; 洗浄機ﾍ給材1ﾗｲﾝ動作開始通知
CON
AND B2050                ; 洗浄機給材1ﾗｲﾝ側動作開始通知
JMP @MR5406
STG @MR5406
ANB B2091                ; 洗浄機より給材1ﾗｲﾝ動作開始許可
RES MR8200               ; 洗浄機ﾍ給材1ﾗｲﾝ動作開始通知
CON
JMP @MR5407
STG @MR5407
RES @MR5402              ; 洗浄機I/F 1ﾚｰﾝ投入開始処理中
CON
SET @MR5401              ; 洗浄機I/F 1ﾚｰﾝ投入開始処理完了
CON
ENDS
;洗浄機I/F 1ﾚｰﾝ投入終了処理
STG @MR5500              ; 洗浄機I/F 1ﾚｰﾝ投入終了処理
ANB @MR5501              ; 洗浄機I/F 1ﾚｰﾝ投入終了処理完了
ANB @MR5502              ; 洗浄機I/F 1ﾚｰﾝ投入終了処理中
SET @MR5502              ; 洗浄機I/F 1ﾚｰﾝ投入終了処理中
CON
JMP @MR5505
STG @MR5505
SET MR8201               ; 洗浄機ﾍ給材1ﾗｲﾝ動作完了通知
CON
AND B2056                ; 洗浄機へ給材1ﾗｲﾝ側動作完了通知
JMP @MR5506
STG @MR5506
AND B2096                ; 洗浄機給材1ﾗｲﾝ側動作完了確認通知
RES MR8201               ; 洗浄機ﾍ給材1ﾗｲﾝ動作完了通知
CON
JMP @MR5507
STG @MR5507
ANB B2096                ; 洗浄機給材1ﾗｲﾝ側動作完了確認通知
JMP @MR5508
STG @MR5508
RES @MR5502              ; 洗浄機I/F 1ﾚｰﾝ投入終了処理中
CON
SET @MR5501              ; 洗浄機I/F 1ﾚｰﾝ投入終了処理完了
CON
ENDS
;洗浄機I/F 2ﾚｰﾝ投入開始処理
STG @MR5600              ; 洗浄機I/F 2ﾚｰﾝ投入開始処理
ANB @MR5601              ; 洗浄機I/F 2ﾚｰﾝ投入開始処理完了
ANB @MR5602              ; 洗浄機I/F 2ﾚｰﾝ投入開始処理中
SET @MR5602              ; 洗浄機I/F 2ﾚｰﾝ投入開始処理中
CON
JMP @MR5605
STG @MR5605
AND B2099                ; 洗浄機より給材2ﾗｲﾝ動作開始許可
SET MR8202               ; 洗浄機ﾍ給材2ﾗｲﾝ動作開始通知
CON
AND B2058                ; 洗浄機へ給材2ﾗｲﾝ側動作開始通知
JMP @MR5606
STG @MR5606
ANB B2099                ; 洗浄機より給材2ﾗｲﾝ動作開始許可
RES MR8202               ; 洗浄機ﾍ給材2ﾗｲﾝ動作開始通知
CON
JMP @MR5607
STG @MR5607
RES @MR5602              ; 洗浄機I/F 2ﾚｰﾝ投入開始処理中
CON
SET @MR5601              ; 洗浄機I/F 2ﾚｰﾝ投入開始処理完了
CON
ENDS
;洗浄機I/F 2ﾚｰﾝ投入終了処理
STG @MR5700              ; 洗浄機I/F 2ﾚｰﾝ投入終了処理
ANB @MR5701              ; 洗浄機I/F 2ﾚｰﾝ投入終了処理完了
ANB @MR5702              ; 洗浄機I/F 2ﾚｰﾝ投入終了処理中
SET @MR5702              ; 洗浄機I/F 2ﾚｰﾝ投入終了処理中
CON
JMP @MR5705
STG @MR5705
SET MR8203               ; 洗浄機給材2ﾗｲﾝ側動作完了確認通知
CON
AND B205E                ; 洗浄機給材2ﾗｲﾝ側動作完了確通知
JMP @MR5706
STG @MR5706
AND B209E                ; 洗浄機給材2ﾗｲﾝ側動作完了確認通知
RES MR8203               ; 洗浄機給材2ﾗｲﾝ側動作完了確認通知
CON
ANB B205E                ; 洗浄機給材2ﾗｲﾝ側動作完了確通知
JMP @MR5707
STG @MR5707
ANB B209E                ; 洗浄機給材2ﾗｲﾝ側動作完了確認通知
JMP @MR5708
STG @MR5708
RES @MR5702              ; 洗浄機I/F 2ﾚｰﾝ投入終了処理中
CON
RES @MR5702              ; 洗浄機I/F 2ﾚｰﾝ投入終了処理中
CON
SET @MR5701              ; 洗浄機I/F 2ﾚｰﾝ投入終了処理完了
CON
ENDS
;洗浄機供給ﾊﾝﾄﾞ1押え処理
STG @MR5800              ; 洗浄機供給ﾊﾝﾄﾞ1押え処理
ANB @MR5801              ; 洗浄機供給ﾊﾝﾄﾞ1押え処理完了
ANB @MR5802              ; 洗浄機供給ﾊﾝﾄﾞ1押え処理中
SET @MR5802              ; 洗浄機供給ﾊﾝﾄﾞ1押え処理中
CON
JMP @MR5803
STG @MR5803
RES MR7600               ; ﾊﾝﾄﾞ1上昇SOL
CON
SET MR7601               ; ﾊﾝﾄﾞ1下降SOL
CON
RES MR7604               ; ﾊﾝﾄﾞ1押え上昇SOL
CON
SET MR7605               ; ﾊﾝﾄﾞ1押え下降SOL
CON
MPS
LDB MR4400               ; ﾊﾝﾄﾞ1下降端Err
ANB MR4404               ; ﾊﾝﾄﾞ1押え下降端Err
AND R4400                ; RB2ﾊﾝﾄﾞ1下降限
AND R4404                ; RB2ﾊﾝﾄﾞ1押え下降限
ANL
JMP @MR5804
MPP
LD MR4400                ; ﾊﾝﾄﾞ1下降端Err
OR MR4404                ; ﾊﾝﾄﾞ1押え下降端Err
AND R41201               ; CELL間 TASK1 PAUSE要求
ANL
@SET @MR1900             ; Main1 HALT許可
STG @MR5804
TMH @30 #5
CON
AND @T30
JMP @MR5805
STG @MR5805
SET MR7610               ; RB2ﾊﾝﾄﾞ1吸着破壊ON
CON
TMH @32 #10
CON
AND @T32
JMP @MR5806
STG @MR5806
RES MR7601               ; ﾊﾝﾄﾞ1下降SOL
CON
RES MR7605               ; ﾊﾝﾄﾞ1押え下降SOL
CON
SET MR7604               ; ﾊﾝﾄﾞ1押え上昇SOL
CON
SET MR7600               ; ﾊﾝﾄﾞ1上昇SOL
CON
MPS
LDB MR4401               ; ﾊﾝﾄﾞ1上昇端Err
AND R4401                ; RB2ﾊﾝﾄﾞ1上昇限
ANL
RES MR7610               ; RB2ﾊﾝﾄﾞ1吸着破壊ON
CON
JMP @MR5807
MPP
LD MR4401                ; ﾊﾝﾄﾞ1上昇端Err
AND R41201               ; CELL間 TASK1 PAUSE要求
ANL
@SET @MR1900             ; Main1 HALT許可
STG @MR5807
RES MR7605               ; ﾊﾝﾄﾞ1押え下降SOL
CON
SET MR7604               ; ﾊﾝﾄﾞ1押え上昇SOL
CON
MPS
LDB MR4403               ; ﾊﾝﾄﾞ2上昇端Err
AND R4403                ; RB2ﾊﾝﾄﾞ2上昇限
ANL
RES @MR5802              ; 洗浄機供給ﾊﾝﾄﾞ1押え処理中
CON
SET @MR5801              ; 洗浄機供給ﾊﾝﾄﾞ1押え処理完了
CON
ENDS
MPP
LD MR4403                ; ﾊﾝﾄﾞ2上昇端Err
AND R41201               ; CELL間 TASK1 PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
;洗浄機供給ﾊﾝﾄﾞ2押え処理
STG @MR5900              ; 洗浄機供給ﾊﾝﾄﾞ2押え処理
ANB @MR5901              ; 洗浄機供給ﾊﾝﾄﾞ2押え処理完了
ANB @MR5902              ; 洗浄機供給ﾊﾝﾄﾞ2押え処理中
SET @MR5902              ; 洗浄機供給ﾊﾝﾄﾞ2押え処理中
CON
JMP @MR5903
STG @MR5903
RES MR7602               ; ﾊﾝﾄﾞ2上昇SOL
CON
SET MR7603               ; ﾊﾝﾄﾞ2下降SOL
CON
RES MR7606               ; ﾊﾝﾄﾞ2押え上昇SOL
CON
SET MR7607               ; ﾊﾝﾄﾞ2押え下降SOL
CON
MPS
LDB MR4402               ; ﾊﾝﾄﾞ2下降端Err
ANB MR4406               ; ﾊﾝﾄﾞ2押え下降端Err
AND R4402                ; RB2ﾊﾝﾄﾞ2下降限
AND R4406                ; RB2ﾊﾝﾄﾞ2押え下降限
ANL
JMP @MR5904
MPP
LD MR4402                ; ﾊﾝﾄﾞ2下降端Err
OR MR4406                ; ﾊﾝﾄﾞ2押え下降端Err
AND R41201               ; CELL間 TASK1 PAUSE要求
ANL
@SET @MR1900             ; Main1 HALT許可
STG @MR5904
TMH @34 #5
CON
AND @T34
JMP @MR5905
STG @MR5905
SET MR7613               ; RB2ﾊﾝﾄﾞ2吸着破壊
CON
TMH @36 #10
CON
AND @T36
JMP @MR5906
STG @MR5906
RES MR7603               ; ﾊﾝﾄﾞ2下降SOL
CON
RES MR7607               ; ﾊﾝﾄﾞ2押え下降SOL
CON
SET MR7606               ; ﾊﾝﾄﾞ2押え上昇SOL
CON
SET MR7602               ; ﾊﾝﾄﾞ2上昇SOL
CON
MPS
LDB MR4403               ; ﾊﾝﾄﾞ2上昇端Err
AND R4403                ; RB2ﾊﾝﾄﾞ2上昇限
ANL
RES MR7613               ; RB2ﾊﾝﾄﾞ2吸着破壊
CON
JMP @MR5907
MPP
LD MR4403                ; ﾊﾝﾄﾞ2上昇端Err
AND R41201               ; CELL間 TASK1 PAUSE要求
ANL
@SET @MR1900             ; Main1 HALT許可
STG @MR5907
RES MR7607               ; ﾊﾝﾄﾞ2押え下降SOL
CON
SET MR7606               ; ﾊﾝﾄﾞ2押え上昇SOL
CON
MPS
LDB MR4407               ; ﾊﾝﾄﾞ2押え上昇端Err
AND R4407                ; ﾊﾝﾄﾞ2押え上昇端
ANL
RES @MR5902              ; 洗浄機供給ﾊﾝﾄﾞ2押え処理中
CON
SET @MR5901              ; 洗浄機供給ﾊﾝﾄﾞ2押え処理完了
CON
ENDS
MPP
LD MR4407                ; ﾊﾝﾄﾞ2押え上昇端Err
AND R41201               ; CELL間 TASK1 PAUSE要求
ANL
@SET @MR1900             ; Main1 HALT許可
;<h1/>HALT
LD R41201                ; CELL間 TASK1 PAUSE要求
AND @MR1900              ; Main1 HALT許可
LD @MR1901               ; Main2 HALT許可
ORB @MR4002
ANL
TMR @2 #2
CON
AND @T2
@SET R42601              ; _Grp1_Task1_ﾎﾟｰｽﾞ許可
LD R42601                ; _Grp1_Task1_ﾎﾟｰｽﾞ許可
RES @MR1900              ; Main1 HALT許可
CON
RES @MR1901              ; Main2 HALT許可
END
ENDH
