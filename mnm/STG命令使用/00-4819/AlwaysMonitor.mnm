DEVICE:53
;MODULE:AlwaysMonitor
;MODULE_TYPE:0
;SCRIPT_TYPE:
;OneSystem Sub-Module
;
;---------------------------------------
;ModuleName	:	AlwaysMonitor
;ModuleType	:	Sub Module
;Function	:	常時監視
;---------------------------------------
;<使用方法>
;常時監視が必要な物は本ﾓｼﾞｭｰﾙ内に記述して下さい
;・ﾋｰﾀｰ過昇温検知による非常停止
;・ﾁｬﾝﾊﾞｰ排気量低下によるｴﾗｰ出力
;など
;<h1/>ﾛｯﾄ内CAV残数計測
;IF DM20012.S < 0 THEN											'残数が0以下になったら
;  DM20012.S= 0													'0に強制変更
;END IF
;'----------------------------------------------------------------------------------------------
;IF (LR10101 = 1) or (LR10102 = 1) or (LR10106 = 1) then			'USｸﾘｰﾆﾝｸﾞ在荷ｶｳﾝﾄ
;  @DM10 = DM7022
;ELSE
;  @DM10 = 0
;END IF
;'----------------------------------------------------------------------------------------------
;IF R4310 = 1 THEN												'剥離CAVｶｳﾝﾄ
;  @DM11 = DM7022 + 1 - DM20030
;ELSE
;  @DM11 = 0
;END IF
;'----------------------------------------------------------------------------------------------
;IF (MR20209 = 0) AND (MR20212 = 0) AND(LR10103 = 1) THEN		'CAV搬送RB把握数ｶｳﾝﾄ
;  @DM12 = 1
;ELSE
;  @DM12 = 0
;END IF
;'----------------------------------------------------------------------------------------------
;IF (MR20405 = 0) AND (LR10104 = 1) THEN							'反転搬送RB把握数ｶｳﾝﾄ
;  @DM13 = 1
;ELSE
;  @DM13 = 0
;END IF
;'----------------------------------------------------------------------------------------------
;DM20014 = @DM10 + @DM11 + @DM12 + @DM13							'装置内合計
;'----------------------------------------------------------------------------------------------
;IF DM22220.L < 0 THEN											'残数が0以下になったら
;  DM22220.L= 0													'0に強制変更
;END IF
;'----------------------------------------------------------------------------------------------
;IF DM2000.2 = 0 THEN											'下流ON-LINEなら
;  IF (AUTODO = 1) THEN											'
;    W2011 = DM22220												'
;  END IF
;ELSE															'下流OFF-LINEなら
;  W2011 = 0														'残CAV数を"0"にする
;END IF
;'----------------------------------------------------------------------------------------------
;IF (HOLD = 1) AND (DM20012 < DM7022) THEN						'ｻｲｸﾙ停止になり、残りCAVがﾗｽﾄ1枚以下になったら
;  DM20012 = DM20014												'概算値も機内残CAV数に同化
;END IF
;'----------------------------------------------------------------------------------------------
;DM5036.D = W2010.U												'ﾊﾟﾈﾙ表示用
;DM5038.D = DM20012.U											'ﾊﾟﾈﾙ表示用
;IF DM20012.S < 0 THEN											'残数が0以下になったら
;
LD<.S DM20012 +0         ; 残CAV数概算値
NCJ #2000
;  DM20012.S= 0													'0に強制変更
;
LD CR2002                ; 常時ON
MOV.S +0 DM20012         ; 残CAV数概算値
;END IF
;
LABEL #2000
;'----------------------------------------------------------------------------------------------
;
;IF (LR10101 = 1) or (LR10102 = 1) or (LR10106 = 1) then			'USｸﾘｰﾆﾝｸﾞ在荷ｶｳﾝﾄ
;
LD LR10101               ; MGから取出しﾜｰｸ記憶
OUT @VB00
LD LR10102               ; USｸﾘｰﾅから取出しﾜｰｸ記憶
OR @VB00
OUT @VB01
LD LR10106               ; USｸﾘｰﾆﾝｸﾞ在荷記憶
OR @VB01
NCJ #2001
;  @DM10 = DM7022
;
LD CR2002                ; 常時ON
MOV DM7022 @DM10         ; 装置基礎ﾃﾞｰﾀ12 CAV数/ﾘﾝｸﾞ
;ELSE
;
LD CR2002                ; 常時ON
CJ #2002
LABEL #2001
;  @DM10 = 0
;
LD CR2002                ; 常時ON
MOV #0 @DM10
;END IF
;
LABEL #2002
;'----------------------------------------------------------------------------------------------
;
;IF R4310 = 1 THEN												'剥離CAVｶｳﾝﾄ
;
LD R4310                 ; CAV剥離 ﾌﾚｰﾑ到着検出
NCJ #2003
;  @DM11 = DM7022 + 1 - DM20030
;
LD CR2002                ; 常時ON
LDA DM20030              ; CAV取出しﾎﾟｼﾞｼｮﾝNo.
CON
EXT
CON
STA.L @VM0
CON
LDA DM7022               ; 装置基礎ﾃﾞｰﾀ12 CAV数/ﾘﾝｸﾞ
CON
EXT
CON
ADD.L +1
CON
SUB.L @VM0
CON
STA @DM11
;ELSE
;
LD CR2002                ; 常時ON
CJ #2004
LABEL #2003
;  @DM11 = 0
;
LD CR2002                ; 常時ON
MOV #0 @DM11
;END IF
;
LABEL #2004
;'----------------------------------------------------------------------------------------------
;
;IF (MR20209 = 0) AND (MR20212 = 0) AND(LR10103 = 1) THEN		'CAV搬送RB把握数ｶｳﾝﾄ
;
LDB MR20209              ; Task3→4 取出し動作受動中
OUT @VB02
LDB MR20212              ; Task4→3 取出し動作完了
AND @VB02
OUT @VB03
LD LR10103               ; CAV_RB ﾜｰｸ記憶
AND @VB03
NCJ #2005
;  @DM12 = 1
;
LD CR2002                ; 常時ON
MOV #1 @DM12
;ELSE
;
LD CR2002                ; 常時ON
CJ #2006
LABEL #2005
;  @DM12 = 0
;
LD CR2002                ; 常時ON
MOV #0 @DM12
;END IF
;
LABEL #2006
;'----------------------------------------------------------------------------------------------
;
;IF (MR20405 = 0) AND (LR10104 = 1) THEN							'反転搬送RB把握数ｶｳﾝﾄ
;
LDB MR20405              ; Task4→5 給材動作中
OUT @VB04
LD LR10104               ; 反転搬送 ﾜｰｸ記憶
AND @VB04
NCJ #2007
;  @DM13 = 1
;
LD CR2002                ; 常時ON
MOV #1 @DM13
;ELSE
;
LD CR2002                ; 常時ON
CJ #2008
LABEL #2007
;  @DM13 = 0
;
LD CR2002                ; 常時ON
MOV #0 @DM13
;END IF
;
LABEL #2008
;'----------------------------------------------------------------------------------------------
;
;DM20014 = @DM10 + @DM11 + @DM12 + @DM13							'装置内合計
;
LD CR2002                ; 常時ON
LDA @DM11
CON
EXT
CON
STA.L @VM2
CON
LDA @DM10
CON
EXT
CON
ADD.L @VM2
CON
STA.L @VM4
CON
LDA @DM12
CON
EXT
CON
ADD.L @VM4
CON
STA.L @VM6
CON
LDA @DM13
CON
EXT
CON
ADD.L @VM6
CON
STA DM20014              ; 装置内C残AV数
;'----------------------------------------------------------------------------------------------
;
;IF DM22220.L < 0 THEN											'残数が0以下になったら
;
LD<.L DM22220 +0         ; 残CAV数_装置_1ﾛｯﾄ_通信用
NCJ #2009
;  DM22220.L= 0													'0に強制変更
;
LD CR2002                ; 常時ON
MOV.L +0 DM22220         ; 残CAV数_装置_1ﾛｯﾄ_通信用
;END IF
;
LABEL #2009
;'----------------------------------------------------------------------------------------------
;
;IF DM2000.2 = 0 THEN											'下流ON-LINEなら
;
LDB DM2000.2             ; 下流 OFF-LINE
NCJ #2010
;  IF (AUTODO = 1) THEN											'
;
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
NCJ #2011
;    W2011 = DM22220												'
;
LD CR2002                ; 常時ON
MOV DM22220 W2011        ; 残CAV数_装置_1ﾛｯﾄ_通信用  残りCAV数
;  END IF
;
LABEL #2011
;ELSE															'下流OFF-LINEなら
;
LD CR2002                ; 常時ON
CJ #2012
LABEL #2010
;  W2011 = 0														'残CAV数を"0"にする
;
LD CR2002                ; 常時ON
MOV #0 W2011             ; 残りCAV数
;END IF
;
LABEL #2012
;'----------------------------------------------------------------------------------------------
;
;IF (HOLD = 1) AND (DM20012 < DM7022) THEN						'ｻｲｸﾙ停止になり、残りCAVがﾗｽﾄ1枚以下になったら
;
LD R46106                ; _定停止移行中
OUT @VB05
LD< DM20012 DM7022       ; 残CAV数概算値  装置基礎ﾃﾞｰﾀ12 CAV数/ﾘﾝｸﾞ
AND @VB05
NCJ #2013
;  DM20012 = DM20014												'概算値も機内残CAV数に同化
;
LD CR2002                ; 常時ON
MOV DM20014 DM20012      ; 装置内C残AV数  残CAV数概算値
;END IF
;
LABEL #2013
;'----------------------------------------------------------------------------------------------
;
;DM5036.D = W2010.U												'ﾊﾟﾈﾙ表示用
;
LD CR2002                ; 常時ON
LDA W2010
CON
EXT
CON
STA.D DM5036             ; _生産ｶｳﾝﾀ9
;DM5038.D = DM20012.U											'ﾊﾟﾈﾙ表示用
LD CR2002                ; 常時ON
LDA DM20012              ; 残CAV数概算値
CON
EXT
CON
STA.D DM5038             ; _生産ｶｳﾝﾀ10
;
;DM20018 = @DM12 + @DM13
;DM20018 = @DM12 + @DM13
LD CR2002                ; 常時ON
LDA @DM13
CON
EXT
CON
STA.L @VM8
CON
LDA @DM12
CON
EXT
CON
ADD.L @VM8
CON
STA DM20018              ; 内部留保CAV個数
;
;<h1/>ﾏｶﾞｼﾞﾝﾗｯｸ 取り出し監視
LDB R4104                ; MGｾｯﾄ部 ﾏｶﾞｼﾞﾝ検出
AND R1114                ; MG部扉 開
ANB R1005                ; MGｾｯﾄ扉 閉検出
RES MR20510              ; 初期取出し位置確認記憶
;<h1/>SUSﾘﾝｸﾞ収納BOX 取り出し監視
;BOXが検出されない場合、記憶してある排出高さをﾘｾｯﾄ
LDB R4412                ; SUSﾘﾝｸﾞ収納 BOX検出
AND R1115                ; SUSﾘﾝｸﾞ部扉 開
ANB R1006                ; SUSﾘﾝｸﾞ扉 閉検出
DW.L +0 EM13114          ; RB6 P20 POS(LO)
;<h1/>PZT_cell 生存確認
LDPB B3510               ; 転写PLC通信確認
ANFB B3510               ; 転写PLC通信確認
TMR #500 #20             ; PZT_通信途絶
LD T500                  ; PZT_通信途絶
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB DM2000.2             ; 下流 OFF-LINE
ANB MR20500              ; PZT_cell 通信異常
SET MR20500              ; PZT_cell 通信異常
;Err51 PZT転写装置通信途絶
STG MR20500              ; PZT_cell 通信異常
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #0 @DM0
CON
DW #51 @DM1
CON
DW #0 @DM2
CON
DW $1000 @DM9
CON
SET @MR100
CON
JMP @R201
STG @R201
AND @MR101
AND @MR105
RES @MR101
CON
RES R39004               ; ｴﾗｰ中
CON
ENDS
;<h1/>ｸﾘｰﾝｴｱﾕﾆｯﾄ監視
LD CR2007                ; 運転開始時1ｽｷｬﾝOFF
TMR @0 #100
LD @T0
ANB R1008                ; ｸﾘｰﾝﾕﾆｯﾄｱﾗｰﾑ1
TMR @10 #20
CON
AND @T10
SET MR20501              ; ｴｱｸﾘｰﾝﾕﾆｯﾄ異常
;Err53 ｴｱｸﾘｰﾝﾕﾆｯﾄｱﾗｰﾑ
STG MR20501              ; ｴｱｸﾘｰﾝﾕﾆｯﾄ異常
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #0 @DM0
CON
DW #53 @DM1
CON
DW #0 @DM2
CON
DW $1000 @DM9
CON
SET @MR100
CON
JMP @R203
STG @R203
AND @MR101
AND @MR105
RES @MR101
CON
RES R39004               ; ｴﾗｰ中
CON
ENDS
;<h1/>CELL間 PAUSE 許可
LD R44200                ; Grp1 ﾎﾟｰｽﾞ要求
OUT R41200               ; TASK0 PAUSE 要求
LD R44200                ; Grp1 ﾎﾟｰｽﾞ要求
OUT R41201               ; TASK1 PAUSE 要求
LD R44200                ; Grp1 ﾎﾟｰｽﾞ要求
OUT R41202               ; TASK2 PAUSE 要求
LD R44200                ; Grp1 ﾎﾟｰｽﾞ要求
OUT R41203               ; TASK3 PAUSE 要求
LD R44200                ; Grp1 ﾎﾟｰｽﾞ要求
OUT R41204               ; TASK4 PAUSE 要求
LD R44200                ; Grp1 ﾎﾟｰｽﾞ要求
OUT R41205               ; TASK5 PAUSE 要求
LD R44200                ; Grp1 ﾎﾟｰｽﾞ要求
OUT R41206               ; TASK6 PAUSE 要求
LD R44200                ; Grp1 ﾎﾟｰｽﾞ要求
OUT R41207               ; TASK7 PAUSE 要求
LD R44200                ; Grp1 ﾎﾟｰｽﾞ要求
OUT R41208               ; TASK8 PAUSE 要求
LD R44200                ; Grp1 ﾎﾟｰｽﾞ要求
OUT R41209               ; TASK9 PAUSE 要求
LD R44200                ; Grp1 ﾎﾟｰｽﾞ要求
OUT R41210               ; TASK10 PAUSE 要求
;<h1/>※隣接ｾﾙへのPAUSE許可
;隣接ｾﾙへのPAUSE許可記述例：下流ｾﾙよりﾎﾟｰｽﾞ要求　停止必要TaskがTASK2とした場合は以下のように記述してください。
;　　　　　　　　　　　　 ：例ではﾛｰｶﾙﾗﾍﾞﾙを使用していますが実際はラベルを使用せず記述してください。
LD R42602                ; Grp1_Task2_ﾎﾟｰｽﾞ許可
ORB R41002               ; Grp1_Task2_起動中ﾌﾗｸﾞ
OR DM2000.1              ; 上流 OFF-LINE
AND PAUSE_RQ1            ; CELL_1_PAUSE要求
OUT PAUSE_1_OK           ; CELL_1_PAUSE許可
LD R42602                ; Grp1_Task2_ﾎﾟｰｽﾞ許可
ANB R41202               ; TASK2 PAUSE 要求
RES R42602               ; Grp1_Task2_ﾎﾟｰｽﾞ許可
;<h1/>サイクルタイム
;全体 Cycleを取り込みたいﾀｲﾐﾝｸﾞでMR000 OUTを実行してください。
LDB MR000                ; Cycleﾀｲﾑｶｳﾝﾄ
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
OUT R46115               ; _装置ｻｲｸﾙﾀｲﾑ計測中
LDF R46115               ; _装置ｻｲｸﾙﾀｲﾑ計測中
MPS
RES MR000                ; Cycleﾀｲﾑｶｳﾝﾄ
MPP
AND MR21000              ; 仮 NAT
SET R46001               ; _装置C/T取得
;<h1/>払い出しフラグ：TASKにより停止する順番ある場合使用。
LD R46106                ; _定停止移行中
OR R47800                ; _Group1　ﾒﾝﾃ動作定停止移行中
MPS
AND R44401               ; *Group1　ｽﾄｯﾌﾟSW
TMR @9 #80
MPP
ANB R46103               ; _停止中　ﾓｰﾄﾞﾌﾗｸﾞ
MPS
SET R57307               ; Task7 停止要求
CON
SET R57308               ; Task8 停止要求
CON
SET R57309               ; Task9 停止要求
MRD
LDB LR100                ; _割り込みSW1　ON/OFF状態
AND MR20003              ; Task0 次ﾘﾝｸﾞ準備開始
OR LR100                 ; _割り込みSW1　ON/OFF状態
OR @T9
ANL
SET R57300               ; Task0 停止要求
MRD
SET R57301               ; Task1 停止要求
MRD
ANB R41000               ; _Grp1_Task0_起動中ﾌﾗｸﾞ
SET R57302               ; Task2 停止要求
MRD
LDB LR100                ; _割り込みSW1　ON/OFF状態
AND MR20108              ; Task3→0 給材要求
ANB R41000               ; _Grp1_Task0_起動中ﾌﾗｸﾞ
LD LR100                 ; _割り込みSW1　ON/OFF状態
OR @T9
OR MR20411               ; Task3→ﾛｯﾄｻｲｸﾙ停止完了
ANB MR20109              ; Task3→0 給材動作受動中
ANB MR20511              ; SUSﾘﾝｸﾞ搬送中
ORL
ANL
SET R57303               ; Task3 停止要求
MRD
ANB R41003               ; _Grp1_Task3_起動中ﾌﾗｸﾞ
SET R57304               ; Task4 停止要求
SET R57306               ; Task6 停止要求
MRD
LDB MR20410              ; Task1→ﾛｯﾄｻｲｸﾙ停止中
LDB LR100                ; _割り込みSW1　ON/OFF状態
ANB LR10104              ; 反転搬送 ﾜｰｸ記憶
OR LR100                 ; _割り込みSW1　ON/OFF状態
ANL
LD MR20410               ; Task1→ﾛｯﾄｻｲｸﾙ停止中
ANB LR10104              ; 反転搬送 ﾜｰｸ記憶
ORL
ANB R41004               ; _Grp1_Task4_起動中ﾌﾗｸﾞ
ANL
SET R57305               ; Task5 停止要求
MPP
LDB R41000               ; _Grp1_Task0_起動中ﾌﾗｸﾞ
ANB R41002               ; Grp1_Task2_起動中ﾌﾗｸﾞ
ANL
MEP
ANB LR100                ; _割り込みSW1　ON/OFF状態
ANB MR20410              ; Task1→ﾛｯﾄｻｲｸﾙ停止中
MPS
ANB LR10104              ; 反転搬送 ﾜｰｸ記憶
LDA.L DM22214            ; 残CAV数_剥離
CON
STA.L DM22220            ; 残CAV数_装置_1ﾛｯﾄ_通信用
MPP
AND LR10104              ; 反転搬送 ﾜｰｸ記憶
LDA.L DM22214            ; 残CAV数_剥離
CON
ADD.L +1
CON
STA.L DM22220            ; 残CAV数_装置_1ﾛｯﾄ_通信用
LDB R40100               ; _Group1起動中ﾌﾗｸﾞ
ZRES R57300 R57315       ; Task0 停止要求  受入れTask 受入れ停止要求
;<h1/>※ Message BBS 必要に応じてPAUSE要求修正してください。
LD R58500                ; DEVICEﾈｯﾄ登録ﾉｰﾄﾞ一致
MC
LD R46114                ; _装置原点復帰待ち
MEP
SMOV "原点復帰要求" DM3600     ; _BBS1行目表示文字列
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND R57315               ; 受入れTask 受入れ停止要求
MEP
SMOV "停止処理中" DM3600      ; _BBS1行目表示文字列
LD R46103                ; _停止中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB R46114               ; _装置原点復帰待ち
MEP
SMOV "定停止中" DM3600       ; _BBS1行目表示文字列
LDB R46114               ; _装置原点復帰待ち
MEP
LDB R46103               ; _停止中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB R46114               ; _装置原点復帰待ち
MEP
ORL
FMOV #0 DM3600 #20       ; _BBS1行目表示文字列
;Message3表示
LDB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
MEP
FMOV #0 DM3642 #20       ; _BBS3行目表示文字列
MCR
;自動動作選択異常
STG R54402               ; ﾊﾟﾗﾒｰﾀNG
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #0 @DM0
CON
DW #50 @DM1
CON
DW #0 @DM2
CON
DW $1000 @DM9
CON
SET @MR100
CON
JMP @R200
STG @R200
AND @MR101
AND @MR105
RES @MR101
CON
RES R39004               ; ｴﾗｰ中
CON
SET R54403               ; ﾊﾟﾗﾒｰﾀ設定ｴﾗｰ解除
CON
ENDS
;<h1/>機種照合NG
STG MR21500              ; 機種設定確認
SET @R302
CON
JMP @R303
;
;@DM20.T=SMID(DM5220.T,0,1)'LOT番号切取
;D5228.T=SMID(DM5220.T,13,4)'LOT数切取
;SET (@r306)
LD @R303
NCJ #1000
;@DM20.T=SMID(DM5220.T,0,1)'LOT番号切取
;
LD CR2002                ; 常時ON
ADRSET VM2 VM0
MOV #0 VM2
MOV.D VM0 @VM10
LD CR2002                ; 常時ON
SMID DM5220 *@VM10 #0 #1 ; _機種分類2機種名称
LD CR2002                ; 常時ON
SMOV *@VM10 @DM20
;D5228.T=SMID(DM5220.T,13,4)'LOT数切取
;
LD CR2002                ; 常時ON
ADRSET VM2 VM0
MOV #0 VM2
MOV.D VM0 @VM12
LD CR2002                ; 常時ON
SMID DM5220 *@VM12 #13 #4; _機種分類2機種名称
LD CR2002                ; 常時ON
SMOV *@VM12 DM5228       ; _機種分類3機種名称
;SET (@r306)
LD CR2002                ; 常時ON
SET @R306
LABEL #1000
;
STG @R303
AND @R306
MPS
AND= DM50500 @DM20       ; 機種項目1
DW #20 DM20002           ; 機種照合結果
CON
JMP @R307
MPP
AND<> DM50500 @DM20      ; 機種項目1
JMP @R304
STG @R304
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #0 @DM0
CON
DW #55 @DM1
CON
DW #0 @DM2
CON
DW $D00E @DM9
CON
SET @MR100
CON
JMP @R305
STG @R305
AND @MR101
RES @MR101
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR105
DW #100 DM20002          ; 機種照合結果
CON
JMP @R307
MPP
AND @MR108
DW #101 DM20002          ; 機種照合結果
CON
JMP @R307
STG @R307
RES @R306
CON
RES @R302
CON
SET MR21501              ; 機種確認完了
CON
ENDS
;機種切替したら読込済みLotデータクリア
LDP R54807               ; _機種切替要求(From TP)
@ZRES DM5220 DM5236      ; _機種分類2機種名称  _機種分類4機種名称
;<h1/>ERROR
;MyTask Error Process Substance/エラー処理実体
STG @MR100
ANB R39002               ; ERROR_DISP Busy
MPS
ZRES @MR105 @MR108
CON
DISN @DM9 @DM3 #4
MRD
BMOV @DM0 DM60000 #7     ; TaskNo /ERROR_DISP
MPP
SET R39000               ; ERROR_DISP Start
CON
SET @MR102
CON
JMP @MR103
STG @MR103
AND R39002               ; ERROR_DISP Busy
AND= DM60008 @DM1        ; ReturnNo /ERROR_DISP
MPS
AND= DM60007 @DM6        ; ReturnSW /ERROR_DISP
SET @MR105
CON
JMP @MR104
MRD
AND= DM60007 @DM5        ; ReturnSW /ERROR_DISP
SET @MR106
CON
JMP @MR104
MRD
AND= DM60007 @DM4        ; ReturnSW /ERROR_DISP
SET @MR107
CON
JMP @MR104
MPP
AND= DM60007 @DM3        ; ReturnSW /ERROR_DISP
SET @MR108
CON
JMP @MR104
STG @MR104
ANB R39002               ; ERROR_DISP Busy
RES @MR102
CON
SET @MR101
CON
ENDS
END
ENDH
