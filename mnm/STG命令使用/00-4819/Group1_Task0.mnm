DEVICE:53
;MODULE:Group1_Task0
;MODULE_TYPE:0
;SCRIPT_TYPE:
;OneSystem Main-Module
;
;-----------------------------------------
;ModuleName	:	Group1_Task0
;ModuleType	:	Main Module
;Line		:	
;Cell		: 
;Function	: 	SUSﾘﾝｸﾞ搬送
;-----------------------------------------
;<<Task LocalDevice>>
;/*項目			/*割付ｴﾘｱ				/*備考
;---------------------------------------------------------------------			
;Emergency		@MR000～@MR015			Emergency処理時RESET禁止ｴﾘｱ
;Free			@MR100～@MR915			ﾕｰｻﾞｰﾌﾘｰｴﾘｱ
;HOME			@MR1000～@MR1515		HOME動作時使用ｴﾘｱ
;MAINTENANCE		@MR2000～@MR2915		MAINTE動作時使用ｴﾘｱ
;AUTO(Main1)		@MR3000～@MR3915		AUTO(Main1)動作時使用ｴﾘｱ
;	(Main2)		@MR4000～@MR4415		AUTO(Main2)動作時使用ｴﾘｱ
;SubRoutine		@MR4500～@MR6415		ｻﾌﾞﾙｰﾁﾝ共通動作使用ｴﾘｱ　※状況により増設してください。
;----------------------------------------------------------------------
;<h1/>Device_Init/ﾃﾞﾊﾞｲｽ初期化
;[内容]
;・非常停止、優先ｴﾗｰ発生時に初期化したいﾃﾞﾊﾞｲｽを指定して下さい
;※本Taskで使用するﾛｰｶﾙﾃﾞﾊﾞｲｽなど
;※STG～JMPにて使用しているﾃﾞﾊﾞｲｽは必須
LDP R46104               ; _非常停止中　ﾓｰﾄﾞﾌﾗｸﾞ
ZRES @MR100 @MR6415
;<h1/>Task_Monitor/ﾀｽｸﾓﾆﾀｰ
LD CR2002                ; 常時ON
FLIK #50 #50 @MR000
LD= DM60000 MyTask       ; TaskNo /ERROR_DISP  自ﾀｽｸ番号
AND R46208               ; _Group1　ｴﾗｰ発生中
OUT @MR001
;ON STG Main1
;TYPE EM600.U,EM601.U,@MR000.U,@MR3000.U
;
;FOR EM600 = EM600 TO 160 STEP 16
;	IF @MR3000:EM600 <> 0 THEN
;		BREAK
;	END IF	
;NEXT
;	
;IF EM600 < 160 THEN
;	EM601 = (EM600 / 16) * 100 + DMX(@MR3000:EM600) + #3000
;END IF		
;		
;EM600 = EM600 + 16		
;IF EM600 > 160 THEN		
;	EM600 = 0	
;END IF
LDP @MR000
NCJ #1000
;TYPE EM600.U,EM601.U,@MR000.U,@MR3000.U
;
;FOR EM600 = EM600 TO 160 STEP 16
;
LD CR2002                ; 常時ON
MOV EM600 EM600          ; Task0 Main1@MR  Task0 Main1@MR
LABEL #2000
LD> EM600 #160           ; Task0 Main1@MR
CJ #2001
;	IF @MR3000:EM600 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM600                ; Task0 Main1@MR
CON
EXT
CON
STA.L Z12
LD<> @MR3000:Z12 #0
NCJ #2002
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2003
;	END IF	
;
LABEL #2002
;NEXT
;
LD CR2002                ; 常時ON
LDA EM600                ; Task0 Main1@MR
CON
ADD #16
CON
STA EM600                ; Task0 Main1@MR
LDB CR2009               ; 演算結果が負
CJ #2000
LABEL #2003
LABEL #2001
;IF EM600 < 160 THEN
;
LD< EM600 #160           ; Task0 Main1@MR
NCJ #2004
;	EM601 = (EM600 / 16) * 100 + DMX(@MR3000:EM600) + #3000
;
LD CR2002                ; 常時ON
LDA EM600                ; Task0 Main1@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR3000:Z12
CON
DMX
CON
STA @VM0
CON
LDA EM600                ; Task0 Main1@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM1
CON
LDA @VM0
CON
EXT
CON
ADD.L @VM1
CON
ADD.L +3000
CON
STA EM601                ; Task0 Main1@MR
;END IF		
;
LABEL #2004
;EM600 = EM600 + 16		
;
LD CR2002                ; 常時ON
LDA EM600                ; Task0 Main1@MR
CON
EXT
CON
ADD.L +16
CON
STA EM600                ; Task0 Main1@MR
;IF EM600 > 160 THEN		
;
LD> EM600 #160           ; Task0 Main1@MR
NCJ #2005
;	EM600 = 0	
;
LD CR2002                ; 常時ON
MOV #0 EM600             ; Task0 Main1@MR
;END IF
LABEL #2005
LABEL #1000
;
;ON STG Main2
;TYPE EM602.U,EM603.U,@MR4000.U
;
;FOR EM602 = EM602 TO 80 STEP 16
;	IF @MR4000:EM602 <> 0 THEN
;		BREAK
;	END IF	
;NEXT	
;
;IF EM602 < 80 THEN
;	EM603 = (EM602 / 16) * 100 + DMX(@MR4000:EM602) + #4000
;END IF
;
;EM602 = EM602 + 16		
;
;IF EM602 > 80 THEN
;	EM602 = 0	
;END IF
LDP @MR000
NCJ #1001
;TYPE EM602.U,EM603.U,@MR4000.U
;
;FOR EM602 = EM602 TO 80 STEP 16
;
LD CR2002                ; 常時ON
MOV EM602 EM602          ; Task0 Main2@MR  Task0 Main2@MR
LABEL #2006
LD> EM602 #80            ; Task0 Main2@MR
CJ #2007
;	IF @MR4000:EM602 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM602                ; Task0 Main2@MR
CON
EXT
CON
STA.L Z12
LD<> @MR4000:Z12 #0
NCJ #2008
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2009
;	END IF	
;
LABEL #2008
;NEXT	
;
LD CR2002                ; 常時ON
LDA EM602                ; Task0 Main2@MR
CON
ADD #16
CON
STA EM602                ; Task0 Main2@MR
LDB CR2009               ; 演算結果が負
CJ #2006
LABEL #2009
LABEL #2007
;IF EM602 < 80 THEN
;
LD< EM602 #80            ; Task0 Main2@MR
NCJ #2010
;	EM603 = (EM602 / 16) * 100 + DMX(@MR4000:EM602) + #4000
;
LD CR2002                ; 常時ON
LDA EM602                ; Task0 Main2@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR4000:Z12
CON
DMX
CON
STA @VM3
CON
LDA EM602                ; Task0 Main2@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM4
CON
LDA @VM3
CON
EXT
CON
ADD.L @VM4
CON
ADD.L +4000
CON
STA EM603                ; Task0 Main2@MR
;END IF
;
LABEL #2010
;EM602 = EM602 + 16		
;
LD CR2002                ; 常時ON
LDA EM602                ; Task0 Main2@MR
CON
EXT
CON
ADD.L +16
CON
STA EM602                ; Task0 Main2@MR
;IF EM602 > 80 THEN
;
LD> EM602 #80            ; Task0 Main2@MR
NCJ #2011
;	EM602 = 0	
;
LD CR2002                ; 常時ON
MOV #0 EM602             ; Task0 Main2@MR
;END IF
LABEL #2011
LABEL #1001
;
;ON STG SubRoutine
;TYPE EM604.U,EM605.U,@MR4500.U
;	
;FOR EM604 = EM604 TO 320 STEP 16
;	IF @MR4500:EM604 <> 0 THEN
;		BREAK
;	END IF	
;NEXT
;		
;IF EM604 < 320 THEN
;	EM605 = (EM604 / 16) * 100 + DMX(@MR4500:EM604) + #4500
;END IF
;		
;EM604 = EM604 + 16	
;
;IF EM604 > 320 THEN
;   EM604 = 0
;END IF
LDP @MR000
NCJ #1002
;TYPE EM604.U,EM605.U,@MR4500.U
;
;FOR EM604 = EM604 TO 320 STEP 16
;
LD CR2002                ; 常時ON
MOV EM604 EM604          ; Task0 Sub@MR  Task0 Sub@MR
LABEL #2012
LD> EM604 #320           ; Task0 Sub@MR
CJ #2013
;	IF @MR4500:EM604 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM604                ; Task0 Sub@MR
CON
EXT
CON
STA.L Z12
LD<> @MR4500:Z12 #0
NCJ #2014
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2015
;	END IF	
;
LABEL #2014
;NEXT
;
LD CR2002                ; 常時ON
LDA EM604                ; Task0 Sub@MR
CON
ADD #16
CON
STA EM604                ; Task0 Sub@MR
LDB CR2009               ; 演算結果が負
CJ #2012
LABEL #2015
LABEL #2013
;IF EM604 < 320 THEN
;
LD< EM604 #320           ; Task0 Sub@MR
NCJ #2016
;	EM605 = (EM604 / 16) * 100 + DMX(@MR4500:EM604) + #4500
;
LD CR2002                ; 常時ON
LDA EM604                ; Task0 Sub@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR4500:Z12
CON
DMX
CON
STA @VM6
CON
LDA EM604                ; Task0 Sub@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM7
CON
LDA @VM6
CON
EXT
CON
ADD.L @VM7
CON
ADD.L +4500
CON
STA EM605                ; Task0 Sub@MR
;END IF
;
LABEL #2016
;EM604 = EM604 + 16	
;
LD CR2002                ; 常時ON
LDA EM604                ; Task0 Sub@MR
CON
EXT
CON
ADD.L +16
CON
STA EM604                ; Task0 Sub@MR
;IF EM604 > 320 THEN
;
LD> EM604 #320           ; Task0 Sub@MR
NCJ #2017
;   EM604 = 0
;
LD CR2002                ; 常時ON
MOV #0 EM604             ; Task0 Sub@MR
;END IF
LABEL #2017
LABEL #1002
;
;<h1/>Task_Init/ﾀｽｸ初期化
;[本STG内容]
;・本Task起動時に必要な初期化処理を記述して下さい
;・起動Taskの全Init処理終了後、Task_StartのSTGが起動します
STG LR800                ; _Grp1_Task0_Init.STG
ENDS
;<h1/>Task_Start/ﾀｽｸ開始
;[本STG内容]
;・Task起動後、以下運転ﾓｰﾄﾞに従い、各STGにJMPします
;【HOME】	→	LR5200
;【AUTO】	→	LR5400
;【MAINTE】	→	LR5600
;・本STGは追記、修正不要です
STG LR400                ; _Grp1_Task0_Start.STG
MPS
AND R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5200               ; _Grp1_Task0_HOME.STG
MRD
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5400               ; _Grp1_Task0_AUTO.STG
MPP
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5600               ; _Grp1_Task0_MAINTE.STG
;<h1/>Task_Finish/ﾀｽｸ終了
;[本STG内容]
;・各Taskの終了STGになります
;・運転ﾓｰﾄﾞに係わらず終了時は本STGを経由して終了して下さい
;・本STGは追記、修正不要です
STG LR600                ; _Grp1_Task0_Fin.STG
MPS
LDB R41200               ; TASK0 PAUSE 要求
ANB @MR001
ANL
RES R41000               ; _Grp1_Task0_起動中ﾌﾗｸﾞ
CON
ENDS
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
;<h1/>HOME/原点復帰
;[本STG内容]
;・STG @MR1000の続きから各Taskの原点復帰動作を記述する
;・動作終了時は@MR1515にJMPする事
STG LR5200               ; _Grp1_Task0_HOME.STG
JMP @MR1000
STG @MR1000
SET @MR1002
CON
JMP @MR1014
STG @MR1014
SET MR1108               ; RB4 非常停止
CON
SET MR1102               ; RB4 Power ON
CON
JMP @MR1015
STG @MR1015
TMR @10 #5
CON
AND @T10
JMP @MR1100
STG @MR1100
MPS
ANB R41200               ; TASK0 PAUSE 要求
MPS
AND MR20706              ; RB4 MG取出し領域
JMP @MR1101
MRD
LD MR20707               ; RB4 待機領域
OR MR20708               ; RB4 USｸﾘｰﾅ領域
ANL
JMP @MR1200
MPP
AND MR20709              ; RB4 剥離領域
JMP @MR1300
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
;<h1/>  ①MG取出し領域から
STG @MR1101
SET @MR5800
CON
JMP @MR1102
STG @MR1102
AND @MR5801
RES LR10101              ; MGから取出しﾜｰｸ記憶
CON
RES @MR5801
CON
JMP @MR1103
STG @MR1103
MPS
ANB R41200               ; TASK0 PAUSE 要求
DW #1 EM1306             ; RB4Target Pos
CON
SET @MR5900
CON
JMP @MR1104
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
STG @MR1104
AND @MR5901
RES @MR5901
CON
JMP @MR1105
STG @MR1105
MPS
ANB R41200               ; TASK0 PAUSE 要求
MPS
AND R4103                ; MG ﾌﾚｰﾑ飛出検出【ON=正常】
JMP @MR1500
MPP
ANB R4103                ; MG ﾌﾚｰﾑ飛出検出【ON=正常】
TMR @11 #30
CON
AND @T11
JMP @MR1106
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
;*** Error 81 MGﾌﾚｰﾑ飛出し検出
STG @MR1106
SET @MR1900
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #81 @DM1
CON
DW #4103 @DM2
CON
DW $1000 @DM9
CON
SET @MR100
CON
JMP @MR1107
STG @MR1107
SET @MR1900
CON
AND @MR101
AND @MR105
RES @MR101
CON
RES R39004               ; ｴﾗｰ中
CON
JMP @MR1105
;***
;<h1/>  ②待機領域  or  USｸﾘｰﾅ領域
STG @MR1200
MPS
ANB R41200               ; TASK0 PAUSE 要求
MPS
LDB LR10101              ; MGから取出しﾜｰｸ記憶
AND @MR5711
ANB R4108                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ1(上) 閉じ端
ANL
JMP @MR1500
MPP
LD LR10101               ; MGから取出しﾜｰｸ記憶
ORB @MR5711
OR R4108                 ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ1(上) 閉じ端
ANL
JMP @MR1201
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
;*** Error 61 MG取出し中ﾜｰｸ残
STG @MR1201
SET @MR1900
CON
ANB R39004               ; ｴﾗｰ中
MPS
SET R39004               ; ｴﾗｰ中
CON
DW #61 @DM1
CON
DW #4109 @DM2
CON
DW $0004 @DM9
CON
SET @MR100
CON
JMP @MR1202
MPP
RES MR7508               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ(上)閉じ
CON
SET MR7509               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ(上)開き
CON
SET MR7307               ; SUSﾘﾝｸﾞ搬送部 SUSﾘﾝｸﾞ押え 開き
CON
RES MR7306               ; SUSﾘﾝｸﾞ搬送部 SUSﾘﾝｸﾞ押え 閉じ
CON
SET MR7309               ; SUSﾘﾝｸﾞ搬送部 吸着ﾌﾟﾚｰﾄ 下降
CON
RES MR7308               ; SUSﾘﾝｸﾞ搬送部 吸着ﾌﾟﾚｰﾄ 上昇
STG @MR1202
SET @MR1900
CON
AND @MR101
AND @MR108
RES @MR101
CON
RES R39004               ; ｴﾗｰ中
CON
JMP @MR1203
STG @MR1203
RES LR10101              ; MGから取出しﾜｰｸ記憶
CON
RES @MR5711
CON
MPS
AND R4108                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ1(上) 閉じ端
JMP @MR1201
MPP
ANB R4108                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ1(上) 閉じ端
JMP @MR1204
;***
;ﾊﾝﾄﾞ退避  引掛け防止
STG @MR1204
SET @MR5700
CON
JMP @MR1205
STG @MR1205
AND @MR5701
RES @MR5701
CON
JMP @MR1207
STG @MR1207
MPS
AND>.L DM11024 +49000    ; RB4現在位置
JMP @MR1500
MPP
AND<=.L DM11024 +49000   ; RB4現在位置
LDA.L DM11024            ; RB4現在位置
CON
ADD.L +3000
CON
STA.L EM11914            ; RB4 P20 POS(LO)
CON
JMP @MR1208
STG @MR1208
MPS
ANB R41200               ; TASK0 PAUSE 要求
DW #20 EM1306            ; RB4Target Pos
CON
SET @MR5900
CON
JMP @MR1209
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
STG @MR1209
AND @MR5901
RES @MR5901
CON
JMP @MR1500
;<h1/>  ③剥離領域
STG @MR1300
MPS
LDB R41200               ; TASK0 PAUSE 要求
AND MR10008              ; Task4 HOME完了
ANL
MPS
LDB LR10102              ; USｸﾘｰﾅから取出しﾜｰｸ記憶
ANB R4108                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ1(上) 閉じ端
AND R4109                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ1(上) 開き端
ANL
JMP @MR1500
MPP
LD LR10102               ; USｸﾘｰﾅから取出しﾜｰｸ記憶
OR R4108                 ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ1(上) 閉じ端
ORB R4109                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ1(上) 開き端
ANL
JMP @MR1301
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
;*** Error 62 剥離供給中ﾜｰｸ残
STG @MR1301
SET @MR1900
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #62 @DM1
CON
DW #4109 @DM2
CON
DW $0078 @DM9
CON
SET @MR100
CON
JMP @MR1302
STG @MR1302
SET @MR1900
CON
AND @MR101
RES @MR101
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR107
JMP @MR1303
MPP
AND @MR108
JMP @MR1410
;***
;③-1 ﾜｰｸを剥離へ給材
STG @MR1303
SET @MR5708
CON
JMP @MR1304
STG @MR1304
AND @MR5709
RES @MR5709
CON
JMP @MR1305
STG @MR1305
MPS
ANB R41200               ; TASK0 PAUSE 要求
MPS
AND<.L DM11024 +79000    ; RB4現在位置
SET MR10004              ; Task0→2 押え開き要求
CON
SET MR10005              ; Task0→3 押え開き要求
CON
JMP @MR1306
MPP
AND>=.L DM11024 +79000   ; RB4現在位置
SET MR10005              ; Task0→3 押え開き要求
CON
JMP @MR1307
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
STG @MR1306
ANB MR4201               ; SUSﾘﾝｸﾞ押え1(左) 開側異常
ANB MR4203               ; SUSﾘﾝｸﾞ押え2(右) 開側異常
ANB R4200                ; SUSﾘﾝｸﾞ搬送 ﾘﾝｸﾞ押え1(左) 閉側
AND R4201                ; SUSﾘﾝｸﾞ搬送 ﾘﾝｸﾞ押え1(左) 開側
ANB R4202                ; SUSﾘﾝｸﾞ搬送 ﾘﾝｸﾞ押え2(右) 閉側
AND R4203                ; SUSﾘﾝｸﾞ搬送 ﾘﾝｸﾞ押え2(右) 開側
JMP @MR1307
STG @MR1307
ANB MR4307               ; CAV剥離 F押えｴｽｹｰﾌﾟ1逃げ側端異常
ANB MR4309               ; CAV剥離 F押えｴｽｹｰﾌﾟ2逃げ側端異常
ANB R4306                ; CAV剥離 ﾌﾚｰﾑ押えｴｽｹｰﾌﾟ1 押え側端
AND R4307                ; CAV剥離 ﾌﾚｰﾑ押えｴｽｹｰﾌﾟ1 逃げ側端
ANB R4308                ; CAV剥離 ﾌﾚｰﾑ押えｴｽｹｰﾌﾟ2 押え側端
AND R4309                ; CAV剥離 ﾌﾚｰﾑ押えｴｽｹｰﾌﾟ2 逃げ側端
JMP @MR1308
STG @MR1308
RES MR7511               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ下降
CON
SET MR7510               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ上昇
CON
MPS
LDB MR4112               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端異常
ANB R4113                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 下降端
AND R4112                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端
ANL
SET MR10003              ; Task0→3 剥離へﾜｰｸ給材待機中
CON
JMP @MR1309
MPP
LD MR4112                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端異常
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900
STG @MR1309
RES MR7512               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ退避
CON
SET MR7513               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ戻し
CON
MPS
LDB MR4115               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ待避 戻り側異常
ANB R4114                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ待避 待避側
AND R4115                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ待避 戻り側
ANL
JMP @MR1310
MPP
LD MR4115                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ待避 戻り側異常
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900
STG @MR1310
MPS
ANB R41200               ; TASK0 PAUSE 要求
MPS
LD MR10007               ; Task3→0 給材準備完了
AND R4411                ; SUSﾘﾝｸﾞ収納 吸着ﾊﾝﾄﾞ後退端(収納)
AND R4403                ; CAV剥離 剥離ｶﾊﾞｰ 下降端
ANL
DW #7 EM1306             ; RB4Target Pos
CON
SET @MR5900
CON
JMP @MR1311
MPP
AND MR10009              ; Task3→0 仕掛ﾜｰｸ有り
RES MR10003              ; Task0→3 剥離へﾜｰｸ給材待機中
CON
JMP @MR1400
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
STG @MR1311
AND @MR5901
RES @MR5901
CON
JMP @MR1312
STG @MR1312
RES MR7510               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ上昇
CON
SET MR7511               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ下降
CON
MPS
LDB MR4113               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 下降端異常
ANB R4112                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端
AND R4113                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 下降端
ANL
SET MR10006              ; Task0→3 押え要求
CON
JMP @MR1313
MPP
LD MR4113                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 下降端異常
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900
STG @MR1313
ANB MR4302               ; CAV剥離 ﾌﾚｰﾑ押え1 押え端異常
ANB MR4304               ; CAV剥離 ﾌﾚｰﾑ押え2 押え端異常
ANB R4303                ; CAV剥離 ﾌﾚｰﾑ押え1 戻り端
AND R4302                ; CAV剥離 ﾌﾚｰﾑ押え1 押え端
ANB R4305                ; CAV剥離 ﾌﾚｰﾑ押え2 戻り端
AND R4304                ; CAV剥離 ﾌﾚｰﾑ押え2 押え端
AND R4306                ; CAV剥離 ﾌﾚｰﾑ押えｴｽｹｰﾌﾟ1 押え側端
AND R4308                ; CAV剥離 ﾌﾚｰﾑ押えｴｽｹｰﾌﾟ2 押え側端
JMP @MR1410
;Task3に仕掛ﾜｰｸ有り  搬送ﾜｰｸ除材
;*** Error 63 搬送ﾜｰｸ除材要求
STG @MR1400
SET @MR1900
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #63 @DM1
CON
DW #4310 @DM2
CON
DW $4000 @DM9
CON
SET @MR100
CON
JMP @MR1402
LD @MR1400
ANB R506                 ; ｾｰﾌﾃｨｶﾊﾞｰ ﾛｯｸ
ANB R007                 ; ｾｰﾌﾃｨｰｶﾊﾞｰ 確認
ANB R4108                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ1(上) 閉じ端
AND R4109                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ1(上) 開き端
ANB R4110                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ2(下) 閉じ端
AND R4111                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ2(下) 開き端
SET @MR1401
STG @MR1402
SET @MR1900
CON
AND @MR101
RES @MR101
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
ANB @MR1401
JMP @MR1400
MPP
AND @MR1401
JMP @MR1403
STG @MR1403
RES @MR1401
CON
JMP @MR1500
;***
;③-2 ﾜｰｸをﾘﾘｰｽ
STG @MR1410
SET @MR5800
CON
JMP @MR1411
STG @MR1411
AND @MR5801
RES @MR5801
CON
JMP @MR1412
STG @MR1412
RES MR7513               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ戻し
CON
SET MR7512               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ退避
CON
MPS
LDB MR4114               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ待避 待避側異常
ANB R4115                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ待避 戻り側
AND R4114                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ待避 待避側
ANL
JMP @MR1500
MPP
LD MR4114                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ待避 待避側異常
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900
;<h1/>  ★ﾊﾝﾄﾞ上昇して待機位置へ移動
STG @MR1500
SET @MR5800
CON
JMP @MR1501
STG @MR1501
AND @MR5801
RES @MR5801
CON
JMP @MR1502
STG @MR1502
RES MR7511               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ下降
CON
SET MR7510               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ上昇
CON
MPS
LDB MR4112               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端異常
ANB R4113                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 下降端
AND R4112                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端
ANL
JMP @MR1503
MPP
LD MR4112                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端異常
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900
STG @MR1503
RES MR7512               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ退避
CON
SET MR7513               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ戻し
CON
MPS
LDB MR4115               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ待避 戻り側異常
ANB R4114                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ待避 待避側
AND R4115                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ待避 戻り側
ANL
JMP @MR1504
MPP
LD MR4115                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ待避 戻り側異常
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900
;USｸﾘｰﾆﾝｸﾞ在荷判断待ち
STG @MR1504
SET MR10000              ; Task0 HOME退避完了
CON
JMP @MR1505
STG @MR1505
MPS
ANB R41200               ; TASK0 PAUSE 要求
MPS
AND MR10002              ; Task2→0 保持ﾌﾚｰﾑ有り
JMP @MR1506
MPP
AND MR10001              ; Task2→0 保持ﾌﾚｰﾑ無し
JMP @MR1510
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
;在荷有り
STG @MR1506
MPS
LDB R41200               ; TASK0 PAUSE 要求
AND R4411                ; SUSﾘﾝｸﾞ収納 吸着ﾊﾝﾄﾞ後退端(収納)
ANL
DW #6 EM1306             ; RB4Target Pos
CON
SET @MR5900
CON
JMP @MR1507
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
STG @MR1507
AND @MR5901
RES @MR5901
CON
JMP @MR1508
STG @MR1508
SET @MR5708
CON
JMP @MR1509
STG @MR1509
AND @MR5709
RES @MR5709
CON
JMP @MR1515
;在荷無し
STG @MR1510
MPS
LDB R41200               ; TASK0 PAUSE 要求
AND R4411                ; SUSﾘﾝｸﾞ収納 吸着ﾊﾝﾄﾞ後退端(収納)
ANL
DW #1 EM1306             ; RB4Target Pos
CON
SET @MR5900
CON
JMP @MR1511
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
STG @MR1511
AND @MR5901
RES @MR5901
CON
JMP @MR1515
;HOME END
STG @MR1515
MPS
LDB R41200               ; TASK0 PAUSE 要求
ANB @MR001
ANL
RES @MR1002
CON
JMP LR600                ; _Grp1_Task0_Fin.STG
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
;<h1/>AUTO/自動動作
STG LR5400               ; _Grp1_Task0_AUTO.STG
JMP @MR3000
;<h1/>Auto-Main1/Autoﾒｲﾝﾙｰﾁﾝ1
;[本STG内容]
;・各TaskのAUTO動作を記述して下さい
;・動作ﾓｰﾄﾞは「AUTOAC」に格納されています(1～32)
;・@MR3000:AUTO_Main1開始、@MR3001:AUTO_Main1完了、@MR3002:AUTO_Main1動作中
STG @MR3000
MPS
ANB R47800               ; _Group1　ﾒﾝﾃ動作定停止移行中
MPS
ANB R57300               ; Task0 停止要求
SET @MR3002
CON
JMP @MR3003
MPP
AND R57300               ; Task0 停止要求
JMP @MR3915
MPP
AND R47800               ; _Group1　ﾒﾝﾃ動作定停止移行中
JMP @MR3915
;仕掛ｼｰﾄﾁｪｯｸ
STG @MR3003
MPS
LDB R4209                ; USｸﾘｰﾆﾝｸﾞ ﾘﾝｸﾞ到着検出
ANB LR10106              ; USｸﾘｰﾆﾝｸﾞ在荷記憶
ANB R4200                ; SUSﾘﾝｸﾞ搬送 ﾘﾝｸﾞ押え1(左) 閉側
AND R4201                ; SUSﾘﾝｸﾞ搬送 ﾘﾝｸﾞ押え1(左) 開側
ANB R4202                ; SUSﾘﾝｸﾞ搬送 ﾘﾝｸﾞ押え2(右) 閉側
AND R4203                ; SUSﾘﾝｸﾞ搬送 ﾘﾝｸﾞ押え2(右) 開側
ANL
JMP @MR3100
MPP
LD R4209                 ; USｸﾘｰﾆﾝｸﾞ ﾘﾝｸﾞ到着検出
OR LR10106               ; USｸﾘｰﾆﾝｸﾞ在荷記憶
OR R4200                 ; SUSﾘﾝｸﾞ搬送 ﾘﾝｸﾞ押え1(左) 閉側
ORB R4201                ; SUSﾘﾝｸﾞ搬送 ﾘﾝｸﾞ押え1(左) 開側
OR R4202                 ; SUSﾘﾝｸﾞ搬送 ﾘﾝｸﾞ押え2(右) 閉側
ORB R4203                ; SUSﾘﾝｸﾞ搬送 ﾘﾝｸﾞ押え2(右) 開側
ANL
JMP @MR3008
;USｸﾘｰﾆﾝｸﾞ仕掛ﾜｰｸ有り   USｸﾘｰﾆﾝｸﾞ中待機位置へ移動
STG @MR3008
SET @MR5708
CON
JMP @MR3009
STG @MR3009
AND @MR5709
RES @MR5709
CON
JMP @MR3010
STG @MR3010
RES MR7511               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ下降
CON
SET MR7510               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ上昇
CON
MPS
LDB MR4112               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端異常
ANB R4113                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 下降端
AND R4112                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端
ANL
JMP @MR3011
MPP
LD MR4112                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端異常
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900
STG @MR3011
MPS
ANB R41200               ; TASK0 PAUSE 要求
MPS
AND MR20900              ; Task2→AUTO_START_ﾘﾝｸﾞ給材
RES MR20900              ; Task2→AUTO_START_ﾘﾝｸﾞ給材
CON
JMP @MR3012
MPP
LD MR20901               ; Task2→AUTO_START_USｸﾘｰﾆﾝｸﾞ
ANB @MR3012
ANL
RES MR20901              ; Task2→AUTO_START_USｸﾘｰﾆﾝｸﾞ
CON
JMP @MR3014
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
STG @MR3012
AND MR20800              ; USｸﾘｰﾅ MG取出し干渉外
JMP @MR3800
STG @MR3014
DW #6 EM1306             ; RB4Target Pos
CON
SET @MR5900
CON
JMP @MR3015
STG @MR3015
AND @MR5901
RES @MR5901
CON
JMP @MR3200
;<h1/> MGより取出してUSｸﾘｰﾅに給材
STG @MR3100
MPS
ANB R57300               ; Task0 停止要求
MPS
LDB R41200               ; TASK0 PAUSE 要求
AND MR20800              ; USｸﾘｰﾅ MG取出し干渉外
AND MR20000              ; Task1→0 取出し要求
AND MR20008              ; Task2→0 給材要求
ANL
SET @MR4500
CON
JMP @MR3101
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
MRD
AND R57300               ; Task0 停止要求
JMP @MR3915
MPP
ANB @MR3101
OUT MR20003              ; Task0 次ﾘﾝｸﾞ準備開始
STG @MR3101
AND @MR4501
RES @MR4501
CON
MPS
LDB @MR4503
ANB @MR4504
ANL
JMP @MR3200
MPP
LD @MR4503
OR @MR4504
ANL
JMP @MR3102
STG @MR3102
RES @MR4503
CON
RES @MR4504
CON
JMP @MR3800
;<h1/> USｸﾘｰﾅから取出し
STG @MR3200
MPS
ANB R57300               ; Task0 停止要求
MPS
ANB R41200               ; TASK0 PAUSE 要求
MPS
LDB MR20103              ; Task2→0 再取出し要求
AND MR20801              ; USｸﾘｰﾅ 取出し要求領域
AND MR20100              ; Task2→0 取出し要求
AND MR20108              ; Task3→0 給材要求
ANL
SET MR20511              ; SUSﾘﾝｸﾞ搬送中
CON
SET @MR5000
CON
JMP @MR3201
MPP
AND MR20103              ; Task2→0 再取出し要求
RES MR20103              ; Task2→0 再取出し要求
CON
JMP @MR3208
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
MPP
AND R57300               ; Task0 停止要求
JMP @MR3915
LD @MR3100
OR @MR3200
OUT MR20412              ; Task0→除材要求待ち
STG @MR3201
AND @MR5001
RES @MR5001
CON
MPS
LDB @MR5003
ANB @MR5004
ANL
JMP @MR3300
MRD
AND @MR5003
RES MR20511              ; SUSﾘﾝｸﾞ搬送中
CON
JMP @MR3202
MPP
AND @MR5004
RES MR20511              ; SUSﾘﾝｸﾞ搬送中
CON
JMP @MR3203
STG @MR3202
RES @MR5003
CON
JMP @MR3200
STG @MR3203
RES @MR5004
CON
JMP @MR3800
STG @MR3208
AND MR20800              ; USｸﾘｰﾅ MG取出し干渉外
JMP @MR3800
;<h1/> 剥離ｽﾃｰｼﾞへ給材
LD DM11151.14            ; 剥離側干渉外(RC→PLC侵入許可)
ANB MR7402               ; CAV剥離 ｶﾊﾞｰ 前進
AND MR7403               ; CAV剥離 ｶﾊﾞｰ 後退
ANB R4404                ; CAV剥離 剥離ｶﾊﾞｰ 前進端
AND R4405                ; CAV剥離 剥離ｶﾊﾞｰ 後退端
ANB MR7400               ; CAV剥離 ｶﾊﾞｰ 上昇
AND MR7401               ; CAV剥離 ｶﾊﾞｰ 下降
ANB R4402                ; CAV剥離 剥離ｶﾊﾞｰ 上昇端
AND R4403                ; CAV剥離 剥離ｶﾊﾞｰ 下降端
ANB MR7600               ; SUSﾘﾝｸﾞ収納 吸着ﾊﾝﾄﾞ前進(受取側)
AND MR7601               ; SUSﾘﾝｸﾞ収納 吸着ﾊﾝﾄﾞ後退(収納側)
ANB R4410                ; SUSﾘﾝｸﾞ収納 吸着ﾊﾝﾄﾞ前進端(受取)
AND R4411                ; SUSﾘﾝｸﾞ収納 吸着ﾊﾝﾄﾞ後退端(収納)
ANB MR7400               ; CAV剥離 ｶﾊﾞｰ 上昇
AND MR7401               ; CAV剥離 ｶﾊﾞｰ 下降
ANB R4402                ; CAV剥離 剥離ｶﾊﾞｰ 上昇端
AND R4403                ; CAV剥離 剥離ｶﾊﾞｰ 下降端
OUT @MR800
STG @MR3300
MPS
ANB R57300               ; Task0 停止要求
MPS
LDB R41200               ; TASK0 PAUSE 要求
AND @MR800
AND MR20108              ; Task3→0 給材要求
ANL
SET @MR5300
CON
JMP @MR3301
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
MPP
AND R57300               ; Task0 停止要求
JMP @MR3915
STG @MR3301
AND @MR5301
RES @MR5301
CON
RES MR20511              ; SUSﾘﾝｸﾞ搬送中
CON
MPS
LDB @MR5303
ANB @MR5304
ANL
JMP @MR3800
MRD
AND @MR5303
JMP @MR3302
MPP
AND @MR5304
JMP @MR3303
STG @MR3302
RES @MR5303
CON
JMP @MR3300
STG @MR3303
RES @MR5304
CON
JMP @MR3800
;□□□  原点位置へ移動
STG @MR3800
MPS
ANB R41200               ; TASK0 PAUSE 要求
MPS
ANB MR20700              ; RB4 MG干渉外
JMP @MR3804
MPP
AND MR20700              ; RB4 MG干渉外
JMP @MR3801
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
STG @MR3801
MPS
ANB R41200               ; TASK0 PAUSE 要求
SET @MR5708
CON
JMP @MR3802
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
STG @MR3802
AND @MR5709
RES @MR5709
CON
JMP @MR3803
STG @MR3803
RES MR7511               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ下降
CON
SET MR7510               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ上昇
CON
MPS
LDB MR4112               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端異常
ANB R4113                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 下降端
AND R4112                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端
ANL
JMP @MR3804
MPP
LD MR4112                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端異常
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900
STG @MR3804
MPS
ANB R41200               ; TASK0 PAUSE 要求
DW #1 EM1306             ; RB4Target Pos
CON
SET @MR5900
CON
JMP @MR3805
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
STG @MR3805
AND @MR5901
RES @MR5901
CON
JMP @MR3100
;□□□
;<h1/>Auto終了処理
STG @MR3915
MPS
LDB R41200               ; TASK0 PAUSE 要求
ANB @MR001
ANB @MR4002
ANL
RES @MR3002
CON
JMP LR600                ; _Grp1_Task0_Fin.STG
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
;<h1/>Auto-Main2/Autoﾒｲﾝﾙｰﾁﾝ2
;[本STG内容]
;・@MR4000の起動はMain1にて行う事
;・@MR4000:AUTO_Main2開始、@MR4001:AUTO_Main2完了、@MR4002:AUTO_Main2動作中
STG @MR4000
SET @MR4002
CON
JMP @MR4003
STG @MR4003
JMP @MR4415
STG @MR4415
SET @MR4001
CON
RES @MR4002
CON
ENDS
;<h1/>MAINTE/ﾒﾝﾃﾅﾝｽ動作
;[本STG内容]
;・各TaskのMAINTE動作を記述して下さい
;・動作ﾓｰﾄﾞは「MAINTEAC*」に格納されています(1～32)
;・動作終了時は@MR2915にJMPして下さい
STG LR5600               ; _Grp1_Task0_MAINTE.STG
JMP @MR2000
STG @MR2000
SET @MR2002
CON
JMP @MR2003
STG @MR2003
MPS
LD= DM4110 #3            ; _Group1　ﾒﾝﾃ動作番号
OR= DM4110 #5            ; _Group1　ﾒﾝﾃ動作番号
ANL
JMP @MR2004
MPP
LD<> DM4110 #3           ; _Group1　ﾒﾝﾃ動作番号
AND<> DM4110 #5          ; _Group1　ﾒﾝﾃ動作番号
ANL
JMP @MR2915
;ｽﾃｯﾌﾟor通常　か選択
STG @MR2004
MPS
AND= DM4110 #3           ; _Group1　ﾒﾝﾃ動作番号
MPS
SET @MR1900
CON
MSTRT SELECT_POST #1 MyTask #0 MR11003;自ﾀｽｸ番号  Mainte_Select_03
MPP
AND MR11003              ; Mainte_Select_03
JMP @MR2100
MPP
AND= DM4110 #5           ; _Group1　ﾒﾝﾃ動作番号
MPS
SET @MR1900
CON
MSTRT SELECT_POST #1 MyTask #0 MR11005;自ﾀｽｸ番号  Mainte_Select_05
MPP
AND MR11005              ; Mainte_Select_05
JMP @MR2200
;<h1/>  STEP3 ﾗｯｸから取出し
STG @MR2100
SET @MR4500
CON
JMP @MR2101
STG @MR2101
AND @MR4501
RES @MR4501
CON
JMP @MR2914
;<h1/>  STEP5 USｸﾘｰﾅ→剥離 移載
;USｸﾘｰﾅよりﾘﾝｸﾞ取出し
STG @MR2200
SET @MR5000
CON
JMP @MR2201
STG @MR2201
AND @MR5001
RES @MR5001
CON
MPS
LDB @MR5003
ANB @MR5004
ANL
JMP @MR2203
MPP
LD @MR5003
OR @MR5004
ANL
JMP @MR2202
STG @MR2202
RES @MR5003
CON
RES @MR5004
CON
JMP @MR2914
;剥離ｽﾃｰｼﾞへ給材
STG @MR2203
SET @MR5300
CON
JMP @MR2204
STG @MR2204
AND @MR5301
RES @MR5303
CON
RES @MR5304
CON
RES @MR5301
CON
JMP @MR2914
;Maintenance 終了
STG @MR2914
MCALL MODE_INDI #2
MCALL HOLD_REQUEST MyGroup;自ｸﾞﾙｰﾌﾟ番号
RES MR11003              ; Mainte_Select_03
CON
RES MR11005              ; Mainte_Select_05
CON
JMP @MR2915
STG @MR2915
MPS
LD R41200                ; TASK0 PAUSE 要求
ANB @MR001
ANL
SET @MR1900
MPP
ANB R41200               ; TASK0 PAUSE 要求
RES @MR2002
CON
JMP LR600                ; _Grp1_Task0_Fin.STG
;<h1/>SubRoutines/ｻﾌﾞﾙｰﾁﾝ
;<h1/> MGより取出しUSｸﾘｰﾅへ給材動作   @MR4500
STG @MR4500
SET @MR4502
CON
JMP @MR4505
;MG取出し前位置  移動
STG @MR4505
MPS
ANB R41200               ; TASK0 PAUSE 要求
MPS
ANB MR20700              ; RB4 MG干渉外
JMP @MR4509
MPP
AND MR20700              ; RB4 MG干渉外
JMP @MR4506
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
STG @MR4506
MPS
ANB R41200               ; TASK0 PAUSE 要求
SET @MR5708
CON
JMP @MR4507
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
STG @MR4507
AND @MR5709
RES @MR5709
CON
JMP @MR4508
STG @MR4508
RES MR7511               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ下降
CON
SET MR7510               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ上昇
CON
MPS
LDB MR4112               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端異常
ANB R4113                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 下降端
AND R4112                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端
ANL
JMP @MR4509
MPP
LD MR4112                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端異常
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900
STG @MR4509
MPS
ANB R41200               ; TASK0 PAUSE 要求
DW #1 EM1306             ; RB4Target Pos
CON
SET @MR5900
CON
JMP @MR4510
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
STG @MR4510
AND @MR5901
RES @MR5901
CON
JMP @MR4511
STG @MR4511
MPS
ANB R57300               ; Task0 停止要求
MPS
LDB R41200               ; TASK0 PAUSE 要求
AND MR20800              ; USｸﾘｰﾅ MG取出し干渉外
AND MR20000              ; Task1→0 取出し要求
AND MR20008              ; Task2→0 給材要求
ANL
JMP @MR4512
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
MPP
AND R57300               ; Task0 停止要求
SET @MR4503
CON
JMP @MR4815
STG @MR4512
RES MR7510               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ上昇
CON
SET MR7511               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ下降
CON
RES MR7508               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ(上)閉じ
CON
SET MR7509               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ(上)開き
CON
RES MR7603               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ(下)開き
CON
SET MR7602               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ(下)閉じ
CON
MPS
LDB MR4113               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 下降端異常
ANB MR4109               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ1(上) 開き端異常
ANB MR4110               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ2(下) 閉じ端異常
ANB R4108                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ1(上) 閉じ端
AND R4109                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ1(上) 開き端
ANB R4111                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ2(下) 開き端
AND R4110                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ2(下) 閉じ端
ANB R4112                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端
AND R4113                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 下降端
ANL
JMP @MR4513
MPP
LD MR4113                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 下降端異常
OR MR4109                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ1(上) 開き端異常
OR MR4110                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ2(下) 閉じ端異常
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900
STG @MR4513
MPS
ANB R41200               ; TASK0 PAUSE 要求
SET @MR5800
CON
JMP @MR4514
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
STG @MR4514
AND @MR5801
RES @MR5801
CON
JMP @MR4600
;Task1 H/S
STG @MR4600
MPS
ANB R57300               ; Task0 停止要求
MPS
LDB R41200               ; TASK0 PAUSE 要求
AND MR20000              ; Task1→0 取出し要求
AND MR20008              ; Task2→0 給材要求
ANL
SET MR20005              ; Task0→1 取り出し動作中
CON
JMP @MR4601
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
MPP
AND R57300               ; Task0 停止要求
SET @MR4503
CON
JMP @MR4815
STG @MR4601
MPS
AND MR20001              ; Task1→0 取出し動作受動中
SET MR20013              ; Task0→2 給材動作中
CON
JMP @MR4602
MPP
LDB MR20001              ; Task1→0 取出し動作受動中
ANB MR20000              ; Task1→0 取出し要求
ANL
RES MR20005              ; Task0→1 取り出し動作中
CON
JMP @MR4600
STG @MR4602
AND MR20009              ; Task2→0 給材動作受動中
JMP @MR4608
;搬送ﾊﾝﾄﾞ MG取出し位置へ
STG @MR4608
DW #2 EM1306             ; RB4Target Pos
CON
SET @MR5900
CON
JMP @MR4609
STG @MR4609
AND @MR5901
RES @MR5901
CON
JMP @MR4610
;ﾁｬｯｸ閉じ
STG @MR4610
SET @MR5708
CON
JMP @MR4611
STG @MR4611
AND @MR5709
SET LR10101              ; MGから取出しﾜｰｸ記憶
CON
RES @MR5709
CON
JMP @MR4612
;搬送ﾊﾝﾄﾞ MG逃げ位置へ
STG @MR4612
DW #3 EM1306             ; RB4Target Pos
CON
SET @MR5900
CON
JMP @MR4613
STG @MR4613
AND @MR5901
RES @MR5901
CON
JMP @MR4614
;MG逃げ要求
STG @MR4614
SET MR20006              ; Task0→1 MG逃げ要求
CON
JMP @MR4615
STG @MR4615
AND MR20002              ; Task1→0 MG逃げ完了
JMP @MR4700
;USｸﾘｰﾅへｼｰﾄ搬送
STG @MR4700
DW #4 EM1306             ; RB4Target Pos
CON
SET @MR5900
CON
JMP @MR4701
;移動途中だけどTask1へ終了のH/S
STG @MR4701
AND MR20704              ; RB4 ｼｰﾄ引出済み領域
RES MR20005              ; Task0→1 取り出し動作中
CON
RES MR20006              ; Task0→1 MG逃げ要求
CON
RES MR20007              ; Task0→1 取り出し動作ｴﾗｰ
CON
SET MR20004              ; Task0→1 取出し動作完了
CON
JMP @MR4702
STG @MR4702
ANB MR20000              ; Task1→0 取出し要求
ANB MR20001              ; Task1→0 取出し動作受動中
ANB MR20002              ; Task1→0 MG逃げ完了
RES MR20004              ; Task0→1 取出し動作完了
CON
RES MR20007              ; Task0→1 取り出し動作ｴﾗｰ
CON
JMP @MR4703
;移動完了待ち
STG @MR4703
AND @MR5901
RES @MR5901
CON
JMP @MR4704
;USｸﾘｰﾅ上在荷ﾁｪｯｸ
STG @MR4704
MPS
AND R4209                ; USｸﾘｰﾆﾝｸﾞ ﾘﾝｸﾞ到着検出
JMP @MR4800
MPP
ANB R4209                ; USｸﾘｰﾆﾝｸﾞ ﾘﾝｸﾞ到着検出
JMP @MR4705
;*** Error 64 USｸﾘｰﾅ上ﾜｰｸ搬送異常
STG @MR4705
SET @MR1900
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #64 @DM1
CON
DW #4209 @DM2
CON
DW $2400 @DM9
CON
SET @MR100
CON
JMP @MR4706
STG @MR4706
SET @MR1900
CON
AND @MR101
RES @MR101
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR105
JMP @MR4704
MPP
AND @MR106
JMP @MR4707
;***ﾜｰｸ除材選択
;*** Err103 USｸﾘｰﾅ上ﾜｰｸ残
STG @MR4707
SET @MR1900
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #103 @DM1
CON
DW #4209 @DM2
CON
DW $2000 @DM9
CON
SET @MR100
CON
JMP @MR4708
STG @MR4708
SET @MR1900
CON
AND @MR101
RES @MR101
CON
RES R39004               ; ｴﾗｰ中
CON
JMP @MR4709
STG @MR4709
MPS
ANB R4209                ; USｸﾘｰﾆﾝｸﾞ ﾘﾝｸﾞ到着検出
SET MR20015              ; Task0→2 給材ｴﾗｰ
CON
JMP @MR4802
MPP
AND R4209                ; USｸﾘｰﾆﾝｸﾞ ﾘﾝｸﾞ到着検出
JMP @MR4707
;***
;ﾜｰｸｸﾗﾝﾌﾟ要求
STG @MR4800
SET MR20014              ; Task0→2 ﾜｰｸ固定要求
CON
JMP @MR4801
STG @MR4801
MPS
LDB R41200               ; TASK0 PAUSE 要求
AND MR20010              ; Task2→0 ﾜｰｸ固定完了
ANL
JMP @MR4802
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
;ｼｰﾄﾘﾘｰｽ
STG @MR4802
SET @MR5700
CON
JMP @MR4803
STG @MR4803
AND @MR5701
RES @MR5701
CON
JMP @MR4804
STG @MR4804
DW #5 EM1306             ; RB4Target Pos
CON
SET @MR5900
CON
JMP @MR4805
STG @MR4805
AND @MR5901
RES LR10101              ; MGから取出しﾜｰｸ記憶
CON
RES @MR5901
CON
MPS
ANB MR20015              ; Task0→2 給材ｴﾗｰ
JMP @MR4806
MPP
AND MR20015              ; Task0→2 給材ｴﾗｰ
JMP @MR4811
;搬送ﾍｯﾄﾞ ｸﾘｰﾆﾝｸﾞ中待機位置へ
STG @MR4806
SET @MR5708
CON
JMP @MR4807
STG @MR4807
RES MR7511               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ下降
CON
SET MR7510               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ上昇
CON
MPS
LDB MR4112               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端異常
ANB R4113                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 下降端
AND R4112                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端
ANL
JMP @MR4808
MPP
LD MR4112                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端異常
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900
STG @MR4808
AND @MR5709
RES @MR5709
CON
JMP @MR4809
STG @MR4809
DW #6 EM1306             ; RB4Target Pos
CON
SET @MR5900
CON
JMP @MR4810
STG @MR4810
AND @MR5901
RES @MR5901
CON
JMP @MR4811
;Task2へ終了のH/S
STG @MR4811
RES MR20013              ; Task0→2 給材動作中
CON
RES MR20014              ; Task0→2 ﾜｰｸ固定要求
CON
SET MR20012              ; Task0→2 給材完了
CON
JMP @MR4812
STG @MR4812
ANB MR20008              ; Task2→0 給材要求
ANB MR20009              ; Task2→0 給材動作受動中
ANB MR20010              ; Task2→0 ﾜｰｸ固定完了
RES MR20012              ; Task0→2 給材完了
CON
MPS
ANB MR20015              ; Task0→2 給材ｴﾗｰ
JMP @MR4815
MPP
AND MR20015              ; Task0→2 給材ｴﾗｰ
JMP @MR4813
STG @MR4813
RES MR20015              ; Task0→2 給材ｴﾗｰ
CON
SET @MR4504
CON
JMP @MR4815
STG @MR4815
MPS
ANB R41200               ; TASK0 PAUSE 要求
SET @MR4501
CON
RES @MR4502
CON
ENDS
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
;<h1/> USｸﾘｰﾅより取出し動作   @MR5000
;ｸﾘｰﾆﾝｸﾞ中待機位置へ
STG @MR5000
SET @MR5002
CON
JMP @MR5005
STG @MR5005
MPS
ANB R41200               ; TASK0 PAUSE 要求
SET @MR5708
CON
JMP @MR5006
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
STG @MR5006
AND @MR5709
RES @MR5709
CON
JMP @MR5007
STG @MR5007
RES MR7511               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ下降
CON
SET MR7510               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ上昇
CON
MPS
LDB MR4112               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端異常
ANB R4113                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 下降端
AND R4112                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端
ANL
JMP @MR5008
MPP
LD MR4112                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端異常
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900
STG @MR5008
MPS
ANB R41200               ; TASK0 PAUSE 要求
DW #6 EM1306             ; RB4Target Pos
CON
SET @MR5900
CON
JMP @MR5009
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
STG @MR5009
AND @MR5901
RES @MR5901
CON
JMP @MR5010
;Task2 H/S
STG @MR5010
MPS
ANB R57300               ; Task0 停止要求
MPS
LDB R41200               ; TASK0 PAUSE 要求
AND MR20100              ; Task2→0 取出し要求
ANL
SET MR20105              ; Task0→2 取出し動作中
CON
JMP @MR5011
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
MPP
AND R57300               ; Task0 停止要求
SET @MR5003
CON
JMP @MR5207
STG @MR5011
MPS
LD MR20100               ; Task2→0 取出し要求
AND MR20101              ; Task2→0 取出し動作受動中
ANL
JMP @MR5100
MPP
ANB MR20100              ; Task2→0 取出し要求
RES MR20105              ; Task0→2 取出し動作中
CON
JMP @MR5010
;ﾊﾝﾄﾞ 下降 ＆ 開き
STG @MR5100
SET @MR5700
CON
JMP @MR5101
STG @MR5101
RES MR7510               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ上昇
CON
SET MR7511               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ下降
CON
MPS
LDB MR4113               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 下降端異常
ANB R4112                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端
AND R4113                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 下降端
ANL
JMP @MR5102
MPP
LD MR4113                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 下降端異常
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900
STG @MR5102
AND @MR5701
RES @MR5701
CON
JMP @MR5103
;ﾊﾝﾄﾞ 取出し位置移動
STG @MR5103
MPS
ANB R41200               ; TASK0 PAUSE 要求
SET LR10102              ; USｸﾘｰﾅから取出しﾜｰｸ記憶
CON
DW #7 EM1306             ; RB4Target Pos
CON
SET @MR5900
CON
JMP @MR5104
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
STG @MR5104
AND @MR5901
RES @MR5901
CON
JMP @MR5105
;ﾁｬｯｸ閉じ
STG @MR5105
MPS
ANB R41200               ; TASK0 PAUSE 要求
SET @MR5708
CON
JMP @MR5106
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
STG @MR5106
AND @MR5709
RES @MR5709
CON
JMP @MR5107
;Task2 ｸﾗﾝﾌﾟ解除要求
STG @MR5107
SET MR20106              ; Task0→2 ﾜｰｸ解放要求
CON
JMP @MR5108
STG @MR5108
MPS
LDB R41200               ; TASK0 PAUSE 要求
AND MR20102              ; Task2→0 ﾜｰｸ解放完了
ANL
JMP @MR5109
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
;ﾊﾝﾄﾞ 上昇
STG @MR5109
RES MR7511               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ下降
CON
SET MR7510               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ上昇
CON
MPS
LDB MR4112               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端異常
ANB R4113                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 下降端
AND R4112                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端
ANL
JMP @MR5200
MPP
LD MR4112                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端異常
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900
;ﾜｰｸ在荷ﾁｪｯｸ
STG @MR5200
MPS
ANB R4209                ; USｸﾘｰﾆﾝｸﾞ ﾘﾝｸﾞ到着検出
JMP @MR5204
MPP
AND R4209                ; USｸﾘｰﾆﾝｸﾞ ﾘﾝｸﾞ到着検出
JMP @MR5201
;*** Error 65 USｸﾘｰﾅ上ﾜｰｸ取出し異常
STG @MR5201
SET @MR1900
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #65 @DM1
CON
DW #4209 @DM2
CON
DW $4000 @DM9
CON
SET @MR100
CON
JMP @MR5202
STG @MR5202
SET @MR1900
CON
AND @MR101
AND @MR105
RES @MR101
CON
RES R39004               ; ｴﾗｰ中
CON
JMP @MR5200
;***
;Task2へ終了のH/S
STG @MR5204
RES MR20105              ; Task0→2 取出し動作中
CON
RES MR20106              ; Task0→2 ﾜｰｸ解放要求
CON
SET MR20104              ; Task0→2 取出し完了
CON
JMP @MR5205
STG @MR5205
MPS
LDB R41200               ; TASK0 PAUSE 要求
ANB MR20100              ; Task2→0 取出し要求
ANB MR20101              ; Task2→0 取出し動作受動中
ANB MR20102              ; Task2→0 ﾜｰｸ解放完了
ANL
RES MR20104              ; Task0→2 取出し完了
CON
MPS
ANB MR20107              ; Task0→2 取出しｴﾗｰ
JMP @MR5207
MPP
AND MR20107              ; Task0→2 取出しｴﾗｰ
JMP @MR5206
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
STG @MR5206
RES MR20107              ; Task0→2 取出しｴﾗｰ
CON
SET @MR5004
CON
JMP @MR5207
STG @MR5207
MPS
ANB R41200               ; TASK0 PAUSE 要求
SET @MR5001
CON
RES @MR5002
CON
ENDS
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
;<h1/> 剥離へ給材動作   @MR5300
;ｸﾘｰﾆﾝｸﾞ中待機位置へ
STG @MR5300
SET @MR5302
CON
JMP @MR5306
;RB4 剥離給材位置へ
STG @MR5306
RES MR7511               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ下降
CON
SET MR7510               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ上昇
CON
MPS
LDB MR4112               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端異常
ANB R4113                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 下降端
AND R4112                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端
ANL
JMP @MR5307
MPP
LD MR4112                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端異常
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900
STG @MR5307
RES MR7512               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ退避
CON
SET MR7513               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ戻し
CON
MPS
LDB MR4115               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ待避 戻り側異常
ANB R4114                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ待避 待避側
AND R4115                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ待避 戻り側
ANL
JMP @MR5308
MPP
LD MR4115                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ待避 戻り側異常
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900
STG @MR5308
MPS
LDB R41200               ; TASK0 PAUSE 要求
AND DM11151.14           ; 剥離側干渉外(RC→PLC侵入許可)
AND R4405                ; CAV剥離 剥離ｶﾊﾞｰ 後退端
AND R4403                ; CAV剥離 剥離ｶﾊﾞｰ 下降端
AND R4411                ; SUSﾘﾝｸﾞ収納 吸着ﾊﾝﾄﾞ後退端(収納)
ANL
DW #8 EM1306             ; RB4Target Pos
CON
SET @MR5900
CON
JMP @MR5309
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
STG @MR5309
AND @MR5901
RES @MR5901
CON
JMP @MR5400
;Task3 H/S
STG @MR5400
MPS
LDB R41200               ; TASK0 PAUSE 要求
AND MR20108              ; Task3→0 給材要求
ANL
SET MR20113              ; Task0→3 給材動作中
CON
JMP @MR5401
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
STG @MR5401
MPS
LD MR20108               ; Task3→0 給材要求
AND MR20109              ; Task3→0 給材動作受動中
ANL
JMP @MR5402
MPP
ANB MR20108              ; Task3→0 給材要求
RES MR20113              ; Task0→3 給材動作中
CON
JMP @MR5400
;搬送ﾊﾝﾄﾞ 下降
STG @MR5402
RES MR7510               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ上昇
CON
SET MR7511               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ下降
CON
MPS
LDB MR4113               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 下降端異常
ANB R4112                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端
AND R4113                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 下降端
ANL
JMP @MR5403
MPP
LD MR4113                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 下降端異常
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900
;RB4 ﾋﾟﾝにﾜｰｸ押し当て位置へ
STG @MR5403
MPS
ANB R41200               ; TASK0 PAUSE 要求
DW #9 EM1306             ; RB4Target Pos
CON
SET @MR5900
CON
JMP @MR5404
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
STG @MR5404
AND @MR5901
RES @MR5901
CON
JMP @MR5500
;Task3へ ｼｰﾄｸﾗﾝﾌﾟ要求
STG @MR5500
SET MR20114              ; Task0→3 ﾜｰｸ固定要求
CON
JMP @MR5501
STG @MR5501
MPS
LDB R41200               ; TASK0 PAUSE 要求
AND MR20110              ; Task3→0 ﾜｰｸ固定完了
ANL
JMP @MR5502
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
;ﾊﾝﾄﾞ 開き
STG @MR5502
SET @MR5800
CON
JMP @MR5503
STG @MR5503
AND @MR5801
RES @MR5801
CON
JMP @MR5504
;搬送ﾁｬｯｸ 退避  （RBｽﾄﾛｰｸ不足のためｼﾘﾝﾀﾞ動作）
STG @MR5504
RES MR7513               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ戻し
CON
SET MR7512               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ退避
CON
MPS
LDB MR4114               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ待避 待避側異常
ANB R4115                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ待避 戻り側
AND R4114                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ待避 待避側
ANL
JMP @MR5505
MPP
LD MR4114                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ待避 待避側異常
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900
STG @MR5505
RES LR10102              ; USｸﾘｰﾅから取出しﾜｰｸ記憶
CON
JMP @MR5506
;搬送ﾊﾝﾄﾞ 上昇 ＆ 閉じ
STG @MR5506
RES MR7511               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ下降
CON
SET MR7510               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ上昇
CON
RES MR7508               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ(上)閉じ
CON
SET MR7509               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ(上)開き
CON
RES MR7603               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ(下)開き
CON
SET MR7602               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ(下)閉じ
CON
MPS
LDB MR4112               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端異常
ANB MR4109               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ1(上) 開き端異常
ANB MR4110               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ2(下) 閉じ端異常
ANB R4113                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 下降端
AND R4112                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端
ANB R4108                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ1(上) 閉じ端
AND R4109                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ1(上) 開き端
ANB R4111                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ2(下) 開き端
AND R4110                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ2(下) 閉じ端
ANL
JMP @MR5508
MPP
LD MR4112                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端異常
OR MR4109                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ1(上) 開き端異常
OR MR4110                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ2(下) 閉じ端異常
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900
;在荷確認
STG @MR5508
MPS
AND R4310                ; CAV剥離 ﾌﾚｰﾑ到着検出
JMP @MR5600
MPP
ANB R4310                ; CAV剥離 ﾌﾚｰﾑ到着検出
JMP @MR5509
;*** Error 66 剥離治具 給材異常
STG @MR5509
SET @MR1900
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #66 @DM1
CON
DW #4310 @DM2
CON
DW $2400 @DM9
CON
SET @MR100
CON
JMP @MR5510
STG @MR5510
SET @MR1900
CON
AND @MR101
RES @MR101
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR105
JMP @MR5508
MPP
AND @MR106
JMP @MR5511
;***ﾜｰｸ除材選択
STG @MR5511
MPS
ANB R4310                ; CAV剥離 ﾌﾚｰﾑ到着検出
SET MR20115              ; Task0→3 給材ｴﾗｰ
CON
JMP @MR5608
MPP
AND R4310                ; CAV剥離 ﾌﾚｰﾑ到着検出
JMP @MR5509
;***
;Task3 ｶﾞｲﾄﾞ下降要求
STG @MR5600
SET MR20204              ; Task0→3 ｶﾞｲﾄﾞ下降要求
CON
JMP @MR5601
STG @MR5601
AND MR20200              ; Task3→0 ｶﾞｲﾄﾞ下降完了
JMP @MR5602
;RB4 待機位置移動
STG @MR5602
MPS
ANB R41200               ; TASK0 PAUSE 要求
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
DW #1 EM1306             ; RB4Target Pos
CON
SET @MR5900
CON
JMP @MR5603
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
;搬送ﾁｬｯｸ 退避戻し 
STG @MR5603
RES MR7512               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ退避
CON
SET MR7513               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ戻し
CON
MPS
LDB MR4115               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ待避 戻り側異常
ANB R4114                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ待避 待避側
AND R4115                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ待避 戻り側
ANL
JMP @MR5604
MPP
LD MR4115                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ待避 戻り側異常
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900
STG @MR5604
AND<=.L DM11024 +41000   ; RB4現在位置
JMP @MR5608
;Task3へ終了のH/S
STG @MR5608
RES MR20113              ; Task0→3 給材動作中
CON
RES MR20114              ; Task0→3 ﾜｰｸ固定要求
CON
RES MR20204              ; Task0→3 ｶﾞｲﾄﾞ下降要求
CON
SET MR20112              ; Task0→3 給材完了
CON
JMP @MR5609
STG @MR5609
ANB MR20108              ; Task3→0 給材要求
ANB MR20109              ; Task3→0 給材動作受動中
ANB MR20110              ; Task3→0 ﾜｰｸ固定完了
RES MR20112              ; Task0→3 給材完了
CON
MPS
ANB MR20115              ; Task0→3 給材ｴﾗｰ
JMP @MR5611
MPP
AND MR20115              ; Task0→3 給材ｴﾗｰ
JMP @MR5610
STG @MR5610
RES MR20115              ; Task0→3 給材ｴﾗｰ
CON
SET @MR5304
CON
JMP @MR5612
;正常時 RB4 動作完了待ち
STG @MR5611
AND @MR5901
RES @MR5901
CON
JMP @MR5612
;終了
STG @MR5612
MPS
ANB R41200               ; TASK0 PAUSE 要求
SET @MR5301
CON
RES @MR5302
CON
ENDS
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
;<h1/>  搬送ﾁｬｯｸ開き動作①   @MR5700
;  		上下両ｼﾘﾝﾀﾞ動作
STG @MR5700
SET @MR5702
CON
JMP @MR5703
STG @MR5703
RES MR7508               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ(上)閉じ
CON
SET MR7509               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ(上)開き
CON
RES MR7602               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ(下)閉じ
CON
SET MR7603               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ(下)開き
CON
MPS
LDB MR4109               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ1(上) 開き端異常
ANB MR4111               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ2(下) 開き端異常
ANB R4108                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ1(上) 閉じ端
AND R4109                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ1(上) 開き端
ANB R4110                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ2(下) 閉じ端
AND R4111                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ2(下) 開き端
ANL
JMP @MR5704
MPP
LD MR4109                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ1(上) 開き端異常
OR MR4111                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ2(下) 開き端異常
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900
STG @MR5704
MPS
ANB R41200               ; TASK0 PAUSE 要求
SET @MR5701
CON
RES @MR5702
CON
ENDS
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
;<h1/>  搬送ﾁｬｯｸ閉じ動作     @MR5708
;  		上下両ｼﾘﾝﾀﾞ動作
STG @MR5708
SET @MR5710
CON
JMP @MR5712
STG @MR5712
RES MR7509               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ(上)開き
CON
SET MR7508               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ(上)閉じ
CON
RES MR7603               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ(下)開き
CON
SET MR7602               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ(下)閉じ
CON
MPS
LDB MR4108               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ1(上) 閉じ端異常
ANB MR4110               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ2(下) 閉じ端異常
ANB R4109                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ1(上) 開き端
ANB R4111                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ2(下) 開き端
AND R4110                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ2(下) 閉じ端
ANL
JMP @MR5713
MPP
LD MR4108                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ1(上) 閉じ端異常
OR MR4110                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ2(下) 閉じ端異常
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900
STG @MR5713
TMH @12 #30
CON
AND @T12
MPS
AND R4108                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ1(上) 閉じ端
RES @MR5711
CON
JMP @MR5714
MPP
ANB R4108                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ1(上) 閉じ端
SET @MR5711
CON
JMP @MR5714
STG @MR5714
SET @MR5709
CON
RES @MR5710
CON
ENDS
;<h1/>  搬送ﾁｬｯｸ開き動作②   @MR5800
;  		上ｼﾘﾝﾀﾞのみ動作
STG @MR5800
SET @MR5802
CON
JMP @MR5803
STG @MR5803
RES MR7508               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ(上)閉じ
CON
SET MR7509               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ(上)開き
CON
RES MR7603               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ(下)開き
CON
SET MR7602               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ(下)閉じ
CON
MPS
LDB MR4109               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ1(上) 開き端異常
ANB MR4110               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ2(下) 閉じ端異常
ANB R4108                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ1(上) 閉じ端
AND R4109                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ1(上) 開き端
ANB R4111                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ2(下) 開き端
AND R4110                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ2(下) 閉じ端
ANL
JMP @MR5804
MPP
LD MR4109                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ1(上) 開き端異常
OR MR4110                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ2(下) 閉じ端異常
AND R41200               ; TASK0 PAUSE 要求
ANL
SET @MR1900
STG @MR5804
MPS
ANB R41200               ; TASK0 PAUSE 要求
SET @MR5801
CON
RES @MR5802
CON
ENDS
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
;<h1/>  RB4 SUSﾘﾝｸﾞ搬送RB 移動
STG @MR5900
SET @MR5902
CON
JMP @MR5903
STG @MR5903
MPS
SET DM11231.3            ; RB4 RES
CON
ANB DM11031.3            ; RB4 ALM
SET DM11231.4            ; RB4 SON
CON
AND DM11031.4            ; RB4 SV
RES DM11231.3            ; RB4 RES
CON
JMP @MR5904
MPP
TMR @49 #20
CON
AND @T49
RES DM11231.3            ; RB4 RES
CON
RES DM11231.4            ; RB4 SON
CON
JMP @MR700
STG @MR5904
SET R35300               ; RB4 MOVE
CON
JMP @MR5905
STG @MR5905
AND R35301               ; RB4 MOVE END
RES R35301               ; RB4 MOVE END
CON
JMP @MR5906
STG @MR5906
MPS
ANB R35303               ; RB4 Alarm
JMP @MR5907
MPP
AND R35303               ; RB4 Alarm
RES R35303               ; RB4 Alarm
CON
JMP @MR700
STG @MR5907
SET @MR5901
CON
RES @MR5902
CON
ENDS
;<h1/>  RB4 SUSﾘﾝｸﾞ搬送RB HOME
STG @MR5908
SET @MR5910
CON
JMP @MR5911
STG @MR5911
MPS
SET DM11231.3            ; RB4 RES
CON
ANB DM11031.3            ; RB4 ALM
SET DM11231.4            ; RB4 SON
CON
AND DM11031.4            ; RB4 SV
RES DM11231.3            ; RB4 RES
CON
JMP @MR5912
MPP
TMR @47 #20
CON
AND @T47
RES DM11231.3            ; RB4 RES
CON
RES DM11231.4            ; RB4 SON
CON
JMP @MR700
STG @MR5912
MPS
AND DM11031.1            ; RB4 HEND
JMP @MR5915
MPP
ANB DM11031.1            ; RB4 HEND
SET R35308               ; RB4 HOME
CON
JMP @MR5913
STG @MR5913
AND R35309               ; RB4 HOME END
RES R35309               ; RB4 HOME END
CON
JMP @MR5914
STG @MR5914
MPS
ANB R35303               ; RB4 Alarm
JMP @MR5915
MPP
AND R35303               ; RB4 Alarm
RES R35303               ; RB4 Alarm
CON
JMP @MR700
STG @MR5915
SET @MR5909
CON
RES @MR5910
CON
ENDS
;Error 4 RB4動作異常
STG @MR700
ANB R39900               ; RB動作中
MPS
LDB R41200               ; TASK0 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
MPS
DW #4 @DM1
CON
DW #4004 @DM2
CON
DW $1000 @DM9
CON
SET @MR100
CON
JMP @MR701
MPP
SET B3990                ; ｱﾗｰﾑ詳細表示
CON
LDA DM11030              ; RB4 ｱﾗｰﾑｺｰﾄﾞ
CON
STA DM50310              ; RB ｱﾗｰﾑ表示
MPP
AND R41200               ; TASK0 PAUSE 要求
SET @MR1900
STG @MR701
SET @MR1900
CON
AND @MR101
RES @MR101
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105
RES B3990                ; ｱﾗｰﾑ詳細表示
CON
DW #0 DM50310            ; RB ｱﾗｰﾑ表示
CON
MPS
AND @MR5910
JMP @MR5911
MPP
AND @MR5902
JMP @MR5903
;<h1/>I/F
LD>=.L DM11024 +2400     ; RB4現在位置
OUT MR20700              ; RB4 MG干渉外
LD>=.L DM11024 +49000    ; RB4現在位置
LDB MR7511               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ下降
AND MR7510               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ上昇
ANB R4113                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 下降端
AND R4112                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端
ANB MR7603               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ(下)開き
AND MR7602               ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ(下)閉じ
ANB R4111                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ2(下) 開き端
AND R4110                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ2(下) 閉じ端
ORL
OUT MR20701              ; RB4 USｸﾘｰﾅ干渉外
LD<=.L DM11024 +41700    ; RB4現在位置
LD MR7510                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ上昇
ANB R4113                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 下降端
AND R4112                ; SUSﾘﾝｸﾞ搬送 ﾁｬｯｸ 上昇端
ORL
OUT MR20702              ; RB4 剥離干渉外
LD<=.L DM11024 +41700    ; RB4現在位置
OUT MR20703              ; RB4 SUSﾘﾝｸﾞ収納干渉外
LD>=.L DM11024 +24000    ; RB4現在位置
OUT MR20704              ; RB4 ｼｰﾄ引出済み領域
LD @MR5302
OUT MR20705              ; RB4 CAV-RB干渉域侵入
;-----------------------------------------------------------
LD<=.L DM11024 +10000    ; RB4現在位置
OUT MR20706              ; RB4 MG取出し領域
LD<=.L DM11024 +15000    ; RB4現在位置
ANB MR20706              ; RB4 MG取出し領域
OUT MR20707              ; RB4 待機領域
LD<=.L DM11024 +49000    ; RB4現在位置
ANB MR20706              ; RB4 MG取出し領域
ANB MR20707              ; RB4 待機領域
OUT MR20708              ; RB4 USｸﾘｰﾅ領域
LDB MR20708              ; RB4 USｸﾘｰﾅ領域
ANB MR20706              ; RB4 MG取出し領域
ANB MR20707              ; RB4 待機領域
ANB MR20708              ; RB4 USｸﾘｰﾅ領域
OUT MR20709              ; RB4 剥離領域
;<h1/>-----------------------------------------------------------
;<h1/>*ERROR
;MyTask Error Process Substance/エラー処理実体
STG @MR100
ANB R39002               ; ERROR_DISP Busy
MPS
ZRES @MR105 @MR108
CON
DISN @DM9 @DM3 #4
MRD
DW MyTask @DM0           ; 自ﾀｽｸ番号
CON
BMOV @DM0 DM60000 #7     ; TaskNo /ERROR_DISP
MPP
SET R39000               ; ERROR_DISP Start
CON
SET @MR102
CON
JMP @MR103
STG @MR103
AND R39002               ; ERROR_DISP Busy
AND= DM60008 @DM1        ; ReturnNo /ERROR_DISP
MPS
AND= DM60007 @DM6        ; ReturnSW /ERROR_DISP
SET @MR105
CON
JMP @MR104
MRD
AND= DM60007 @DM5        ; ReturnSW /ERROR_DISP
SET @MR106
CON
JMP @MR104
MRD
AND= DM60007 @DM4        ; ReturnSW /ERROR_DISP
SET @MR107
CON
JMP @MR104
MPP
AND= DM60007 @DM3        ; ReturnSW /ERROR_DISP
SET @MR108
CON
JMP @MR104
STG @MR104
ANB R39002               ; ERROR_DISP Busy
RES @MR102
CON
SET @MR101
CON
ENDS
;<h1/>*Select_Y_N 
;MyTask Select_Y_N Process Substance/SELECT_Y_N処理実体
STG @MR300
ANB R39102               ; SELECT_Y_N Busy
MPS
ZRES @MR306 @MR307
CON
DW #0 @DM20
CON
BMOV @DM20 DM60020 #3    ; TaskNo /SELECT_Y_N
MPP
SET R39100               ; SELECT_Y_N Start
CON
SET @MR302
CON
JMP @MR303
STG @MR303
AND R39102               ; SELECT_Y_N Busy
MPS
AND= DM60023 #1          ; Y_N /SELECT_Y_N
SET @MR306
CON
JMP @MR304
MPP
AND= DM60023 #2          ; Y_N /SELECT_Y_N
RES @MR306
CON
JMP @MR304
STG @MR304
ANB R39102               ; SELECT_Y_N Busy
RES @MR302
CON
SET @MR301
CON
ENDS
;<h1/>*TIMEUP ERROR
;MyTask TIMEUP_ERROR Process Substance/TIMEUP_ERROR処理実体
STG @MR400
ANB R39302               ; TIMEUP_ERR Busy
MPS
DW #0 @DM40
CON
BMOV @DM40 DM60040 #2    ; TaskNo /TIMEUP_ERR
MPP
SET R39300               ; TIMEUP_ERR Start
CON
SET @MR402
CON
JMP @MR403
STG @MR403
AND R39302               ; TIMEUP_ERR Busy
JMP @MR404
STG @MR404
ANB R39302               ; TIMEUP_ERR Busy
RES @MR402
CON
SET @MR401
CON
ENDS
;<h1/>*Select_ACT 
;MyTask Select_ACT Process Substance/SELECT_ACT処理実体
STG @MR200
ANB R39202               ; SELECT_ACT Busy
MPS
ZRES @MR205 @MR208
CON
DW #0 @DM30
CON
BMOV @DM30 DM60030 #7    ; TaskNo /SELECT_ACT
MPP
SET R39200               ; SELECT_ACT Start
CON
SET @MR202
CON
JMP @MR203
STG @MR203
AND R39202               ; SELECT_ACT Busy
AND<> DM60037 #0         ; SelectSW /SELECT_ACT
MPS
AND= DM60037 #1          ; SelectSW /SELECT_ACT
SET @MR205
CON
JMP @MR204
MRD
AND= DM60037 #2          ; SelectSW /SELECT_ACT
SET @MR206
CON
JMP @MR204
MRD
AND= DM60037 #3          ; SelectSW /SELECT_ACT
SET @MR207
CON
JMP @MR204
MPP
AND= DM60037 #4          ; SelectSW /SELECT_ACT
SET @MR208
CON
JMP @MR204
STG @MR204
ANB R39202               ; SELECT_ACT Busy
RES @MR202
CON
SET @MR201
CON
ENDS
;<h1/>HALT
LD R41200                ; TASK0 PAUSE 要求
AND @MR1900
LD @MR1901
ORB @MR4002
ANL
TMR @40 #5
CON
AND @T40
SET R42600               ; Grp1_Task0_ﾎﾟｰｽﾞ許可
LD R42600                ; Grp1_Task0_ﾎﾟｰｽﾞ許可
ORB R41200               ; TASK0 PAUSE 要求
ANB @MR001
RES @MR1900
CON
RES @MR1901
END
ENDH
