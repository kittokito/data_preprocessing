DEVICE:53
;MODULE:Inspection
;MODULE_TYPE:0
;検査ﾓｼﾞｭｰﾙ強制終了条件/Inspection module forced termination condition
LDP MR30500              ; (TP)検査強制終了
ORP MR900                ; 重度異常：電源再投入必要
MPS
RES MR103                ; ﾘｰｸ検査中
CON
RES MR104                ; 逆止弁検査中
CON
RES MR012                ; 閉塞検査中
CON
RES MR014                ; 誤配管検査中
CON
RES MR100                ; 検査動作中
CON
ZRES @MR000 @MR3215      ; ﾜｰｸ無し誤配管検査ﾊﾟｽ
MPP
MDSTOP Inspection
;<h1/>初期化/Initialize
LD @CR2008
ZRES ZF19994 ZF25999     ; ﾘｰｸ検査1ﾃﾞｰﾀ取得数  ﾘｰｸ検査6測定中差圧1000
SET MR100                ; 検査動作中
CON
SET @MR400
;針ｼﾘﾝﾀﾞ有効？/Needle cylinder valid?
STG @MR400
MPS
AND MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
JMP @MR1500
MPP
ANB MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
MPS
ANB DM824.5              ; 針ｼﾘﾝﾀﾞ上下有効(=ON
JMP @MR500
MPP
AND DM824.5              ; 針ｼﾘﾝﾀﾞ上下有効(=ON
JMP @MR401
;針ｼﾘﾝﾀﾞ下降/Needle cylinder down
STG @MR401
ANB MR902                ; ｴﾗｰ
MPS
AND MR700                ; ﾜｰｸ1有り記憶
RES MR8401               ; 上昇:ﾎｰｽ押(Vari/針ｼﾘﾝﾀﾞ(出口供給
CON
SET MR8400               ; 下降:ﾎｰｽ押(Vari/針ｼﾘﾝﾀﾞ(出口供給
MRD
AND MR701                ; ﾜｰｸ2有り記憶
RES MR8403               ; 針ｼﾘﾝﾀﾞ2上昇(出口供給継手)
CON
SET MR8402               ; 針ｼﾘﾝﾀﾞ2下降(出口供給継手)
MRD
AND MR702                ; ﾜｰｸ3有り記憶
RES MR8405               ; 針ｼﾘﾝﾀﾞ3上昇(出口供給継手)
CON
SET MR8404               ; 針ｼﾘﾝﾀﾞ3下降(出口供給継手)
MPP
JMP @MR402
STG @MR402
ANB MR902                ; ｴﾗｰ
LD R2100                 ; 下限:ﾎｰｽ押(Vari/針ｼﾘﾝﾀﾞ(出口供給
ANB R2101                ; 上限:ﾎｰｽ押(Vari/針ｼﾘﾝﾀﾞ(出口供給
ORB MR700                ; ﾜｰｸ1有り記憶
ANL
LD R2102                 ; 針ｼﾘﾝﾀﾞ2下限(出口供給継手)
ANB R2103                ; 針ｼﾘﾝﾀﾞ2上限(出口供給継手)
ORB MR701                ; ﾜｰｸ2有り記憶
ANL
LD R2104                 ; 針ｼﾘﾝﾀﾞ3下限(出口供給継手)
ANB R2105                ; 針ｼﾘﾝﾀﾞ3上限(出口供給継手)
ORB MR702                ; ﾜｰｸ3有り記憶
ANL
JMP @MR500
;<h1/>△誤配管検査/Channel confirmation
;※出口供給継手は無し
;※ Exit supply fitting is pass
;誤配管検査有効？/Channel confirmation effective?
;EM10:Z1誤配管検査回路結果=1 無効
;EM 10: Z 1 Misconductive piping test result = 1 invalid
STG @MR500
MPS
LDB DM820.0              ; 検査_流路確認(誤配管(ON=有
OR MR106                 ; ﾒﾝﾃ_装置ﾘｰｸ検査中
ANL
FMOV #1 EM10 #20         ; 誤配管検査回路1結果
DW #1 EM502              ; 誤配管検査総ﾗﾝﾌﾟ_0未2動作3OK4NG
CON
JMP @MR1500
MPP
LD DM820.0               ; 検査_流路確認(誤配管(ON=有
ANB MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
ANL
SET MR014                ; 誤配管検査中
CON
DW #1 EM511              ; 誤配管検査回数(1〜20)
CON
DW #2 EM502              ; 誤配管検査総ﾗﾝﾌﾟ_0未2動作3OK4NG
CON
JMP @MR501
;検査回数ﾙｰﾌﾟ先頭/Inspection count loop head
STG @MR501
DW #1 EM512              ; 誤配管検査出口側切替No.(1-5)
CON
JMP @MR502
;検査ﾁｬﾝﾈﾙﾙｰﾌﾟ先頭/Inspection channel loop head
;上下流ﾊﾞﾙﾌﾞ設定実行/Execution of upstream and downstream valve setting
STG @MR502
ANB MR902                ; ｴﾗｰ
MDSTRT Set
JMP @MR503
STG @MR503
ANF _Set
JMP @MR504
;EM10:Z1誤配管検査回路結果
;=1 無効
;=2 実行中
;EM 10: Z 1 mis-piping inspection circuit result
;= 1 invalid
;= 2 Running
STG @MR504
MPS
LD<> EM520 #0            ; 誤配管検査入口側 流路 No.
AND<> EM521 #0           ; 誤配管検査出口側 流路 No.
ANL
JMP @MR505
MPP
LD= EM520 #0             ; 誤配管検査入口側 流路 No.
OR= EM521 #0             ; 誤配管検査出口側 流路 No.
ANL
MPS
LDA EM511                ; 誤配管検査回数(1〜20)
CON
SUB #1
CON
STA Z1
CON
AND= EM10:Z1 #0          ; 誤配管検査回路1結果
DW #1 EM10:Z1            ; 誤配管検査回路1結果
MPP
JMP @MR602
;出口供給継手かつ装置ﾘｰｸ検査でない？
;Is not an outlet supply fitting and a device leak test?
STG @MR505
MPS
LDB MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
AND> DM827 #1            ; 現設定_同時検査ﾜｰｸ最大数(1-3)
ANL
JMP @MR506
MPP
LD<= DM827 #1            ; 現設定_同時検査ﾜｰｸ最大数(1-3)
OR MR106                 ; ﾒﾝﾃ_装置ﾘｰｸ検査中
ANL
JMP @MR507
;出口供給継手の場合はﾜｰｸ有無状況によって変化
;※装置ﾘｰｸ検査時はﾜｰｸ3個として対応
;In the case of the outlet supply joint, it varies depending on the product availability situation
;※ When equipment leak inspection is conducted as three products
;EM10:Z1誤配管検査回路結果
;=1 無効
;=2 実行中
;EM 10: Z 1 mis-piping inspection circuit result
;= 1 invalid
;= 2 Running
LD @MR506
LD< EM511 DM828          ; 誤配管検査回数(1〜20)  現設定_ﾜｰｸ2個目開始番号
ANB MR700                ; ﾜｰｸ1有り記憶
LD>= EM511 DM828         ; 誤配管検査回数(1〜20)  現設定_ﾜｰｸ2個目開始番号
AND< EM511 DM829         ; 誤配管検査回数(1〜20)  現設定_ﾜｰｸ3個目開始番号
ANB MR701                ; ﾜｰｸ2有り記憶
ORL
LD>= EM511 DM829         ; 誤配管検査回数(1〜20)  現設定_ﾜｰｸ3個目開始番号
ANB MR702                ; ﾜｰｸ3有り記憶
ORL
ANL
OUT @MR000               ; ﾜｰｸ無し誤配管検査ﾊﾟｽ
STG @MR506
MPS
ANB @MR000               ; ﾜｰｸ無し誤配管検査ﾊﾟｽ
JMP @MR507
MPP
AND @MR000               ; ﾜｰｸ無し誤配管検査ﾊﾟｽ
LDA EM511                ; 誤配管検査回数(1〜20)
CON
SUB #1
CON
STA Z1
CON
DW #1 EM10:Z1            ; 誤配管検査回路1結果
CON
JMP @MR602
;EM10:Z1誤配管検査回路結果
;=2 実行中
;EM 10: Z 1 mis-piping inspection circuit result
;= 2 Running
STG @MR507
LDA EM511                ; 誤配管検査回数(1〜20)
CON
SUB #1
CON
STA Z1
CON
DW #2 EM10:Z1            ; 誤配管検査回路1結果
CON
JMP @MR508
;回路ﾊﾞﾙﾌﾞ開閉処理/Circuit valve opening / closing process
;23：ﾘｰｸﾃｽﾀ入口
;24：ﾘｰｸﾃｽﾀ出口
;25：流量ｾﾝｻ入口
;26：流量ｾﾝｻ出口
;27：上流大気開放
;23: Leak tester entrance
;24: Leak tester exit
;25: Flow sensor inlet
;26: Flow sensor outlet
;27: Upstream air release
STG @MR508
RES MR8104               ; 上流側流路切替ﾊﾞﾙﾌﾞ 23(ON=開)
CON
RES MR8105               ; 上流側流路切替ﾊﾞﾙﾌﾞ 24(ON=開)
CON
SET MR8106               ; 上流側流路切替ﾊﾞﾙﾌﾞ 25(ON=開)
CON
SET MR8107               ; 上流側流路切替ﾊﾞﾙﾌﾞ 26(ON=開)
CON
RES MR8108               ; 上流側流路切替ﾊﾞﾙﾌﾞ 27(ON=開)
CON
SET MR400                ; 上下流_ﾊﾞﾙﾌﾞ一括切替(OFF全閉
CON
TMR @0 DM845             ; 誤配管検査初期充填時間  現設定_誤配管検査初期充填時間
CON
AND @T0                  ; 誤配管検査初期充填時間
JMP @MR509
;安定待ち&流量値書込み/Stabilization wait & flow value write
STG @MR509
TMR @1 DM847             ; 誤配管検査安定待ち時間  現設定_誤配管検査安定待ち時間
CON
AND @T1                  ; 誤配管検査安定待ち時間
JMP @MR510
STG @MR510
MPS
AND>.S DM10600 +0        ; A-A/D1_1流量ｾﾝｻ値
LDA.S DM10600            ; A-A/D1_1流量ｾﾝｻ値
CON
MUL.S +10
CON
DIV.S +592
CON
STA.S @DM6               ; 誤配管流量計ｱﾅﾛｸﾞﾃﾞｰﾀ変換値
CON
JMP @MR511
MPP
AND<=.S DM10600 +0       ; A-A/D1_1流量ｾﾝｻ値
DW #0 @DM6               ; 誤配管流量計ｱﾅﾛｸﾞﾃﾞｰﾀ変換値
CON
JMP @MR511
STG @MR511
LDA EM511                ; 誤配管検査回数(1〜20)
CON
SUB #1
CON
MUL #5
CON
ADD EM512                ; 誤配管検査出口側切替No.(1-5)
CON
SUB #1
CON
STA Z1
CON
LDA.S @DM6               ; 誤配管流量計ｱﾅﾛｸﾞﾃﾞｰﾀ変換値
CON
STA.S EM30:Z1            ; 誤配管検査回路1-1流量値
CON
JMP @MR600
;流量値判定/Flow rate value determination
STG @MR600
MPS
LD>=.S DM840 @DM6        ; 現設定_誤配管検査_判定値上  誤配管流量計ｱﾅﾛｸﾞﾃﾞｰﾀ変換値
AND<=.S DM841 @DM6       ; 現設定_誤配管検査_判定値下  誤配管流量計ｱﾅﾛｸﾞﾃﾞｰﾀ変換値
ANL
JMP @MR602
MPP
LD<.S DM840 @DM6         ; 現設定_誤配管検査_判定値上  誤配管流量計ｱﾅﾛｸﾞﾃﾞｰﾀ変換値
OR>.S DM841 @DM6         ; 現設定_誤配管検査_判定値下  誤配管流量計ｱﾅﾛｸﾞﾃﾞｰﾀ変換値
ANL
JMP @MR601
;誤配管検査NGﾌﾗｸﾞ書込み/Mis-piping inspection NG flag write
;EM10:Z1誤配管検査回路結果
;=4 NG
;EM 10: Z 1 mis-piping inspection circuit result
;= 4 NG
STG @MR601
MPS
LDA EM511                ; 誤配管検査回数(1〜20)
CON
SUB #1
CON
STA Z1
CON
DW #4 EM10:Z1            ; 誤配管検査回路1結果
MRD
AND MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
LDA EM30010              ; (TP)機種選択番号(1-10)
CON
SUB #1
CON
MUL #25
CON
ADD DM5                  ; 現在部品番号(1〜25）
CON
SUB #1
CON
STA Z1
CON
RES LR000:Z1             ; 機種1部品1装置ﾘｰｸ検査OK
MPP
DW #84 EM2007            ; 結果書込8
CON
DW #84 EM2008            ; 結果書込9
CON
DW #4 EM502              ; 誤配管検査総ﾗﾝﾌﾟ_0未2動作3OK4NG
CON
SET MR31503              ; Err84誤配管検査 NG
CON
SET @MR002               ; 終了時NG発報予約
CON
JMP @MR602
;検査chﾁｪｯｸ/Check Channel confirmation counter
;※検査NG＆NG時終了設定時は終了処理へ
;* When inspection NG & NG end setting is set to end processing
STG @MR602
MPS
AND< EM512 #5            ; 誤配管検査出口側切替No.(1-5)
MPS
LD>= EM30014 #1          ; 判定方法 確認用(1でNG時続行)
ORB MR31503              ; Err84誤配管検査 NG
ANL
JMP @MR603
MPP
LD< EM30014 #1           ; 判定方法 確認用(1でNG時続行)
AND MR31503              ; Err84誤配管検査 NG
ANL
JMP @MR700
MPP
AND>= EM512 #5           ; 誤配管検査出口側切替No.(1-5)
JMP @MR604
STG @MR603
INC EM512                ; 誤配管検査出口側切替No.(1-5)
CON
JMP @MR502
;誤配管検査OK/Mis-piping inspection OK
;EM10:Z1誤配管検査回路結果
;=3 OK
;EM 10: Z 1 mis-piping inspection circuit result
;= 3 OK
STG @MR604
MPS
LDA EM511                ; 誤配管検査回数(1〜20)
CON
SUB #1
CON
STA Z1
CON
AND<> EM10:Z1 #4         ; 誤配管検査回路1結果
AND<> EM10:Z1 #1         ; 誤配管検査回路1結果
DW #3 EM10:Z1            ; 誤配管検査回路1結果
MPP
JMP @MR605
;検査回数ﾁｪｯｸ/Check Channel confirmation counter
;※検査NG＆NG時終了設定時は終了処理へ
;* When inspection NG & NG end setting is set to end processing
STG @MR605
MPS
AND< EM511 #20           ; 誤配管検査回数(1〜20)
JMP @MR606
MPP
AND>= EM511 #20          ; 誤配管検査回数(1〜20)
JMP @MR700
STG @MR606
INC EM511                ; 誤配管検査回数(1〜20)
CON
JMP @MR501
;誤配管検査終了/Misdiagnosed piping inspection end
;検査回路大気開放
;流量ｾﾝｻ入口閉、上流1〜20は全閉、上流側大気開放開
;下流1〜20は全開
;Inspection circuit Atmospheric release
;Flow sensor inlet closed, upstream 1 - 20 fully closed, upstream atmospheric open open
;Downstream 1 - 20 are fully open
;23：ﾘｰｸﾃｽﾀ入口
;24：ﾘｰｸﾃｽﾀ出口
;25：流量ｾﾝｻ入口
;26：流量ｾﾝｻ出口
;27：上流大気開放
;23: Leak tester entrance
;24: Leak tester exit
;25: Flow sensor inlet
;26: Flow sensor outlet
;27: Upstream air release
STG @MR700
FMOV #0 DM19900 #20      ; 上流側流路切替ﾊﾞﾙﾌﾞ1 (0=閉/1=開)
FMOV #1 DM19930 #20      ; 下流側流路切替ﾊﾞﾙﾌﾞ1 (0=閉/1=開
RES MR8104               ; 上流側流路切替ﾊﾞﾙﾌﾞ 23(ON=開)
CON
RES MR8105               ; 上流側流路切替ﾊﾞﾙﾌﾞ 24(ON=開)
CON
RES MR8106               ; 上流側流路切替ﾊﾞﾙﾌﾞ 25(ON=開)
CON
SET MR8107               ; 上流側流路切替ﾊﾞﾙﾌﾞ 26(ON=開)
CON
SET MR8108               ; 上流側流路切替ﾊﾞﾙﾌﾞ 27(ON=開)
CON
SET MR400                ; 上下流_ﾊﾞﾙﾌﾞ一括切替(OFF全閉
CON
JMP @MR701
STG @MR701
TMR @2 DM843             ; 誤配管検査大気開放時間  現設定_誤配管検査大気開放時間
CON
AND @T2                  ; 誤配管検査大気開放時間
JMP @MR702
STG @MR702
RES MR8107               ; 上流側流路切替ﾊﾞﾙﾌﾞ 26(ON=開)
CON
RES MR400                ; 上下流_ﾊﾞﾙﾌﾞ一括切替(OFF全閉
CON
JMP @MR703
LD @MR703
ANB MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
SET TM90.1               ; ｻｲｸﾙ測定_誤配管検査
STG @MR703
RES MR014                ; 誤配管検査中
CON
MPS
AND= EM502 #2            ; 誤配管検査総ﾗﾝﾌﾟ_0未2動作3OK4NG
MPS
AND MR31503              ; Err84誤配管検査 NG
DW #4 EM502              ; 誤配管検査総ﾗﾝﾌﾟ_0未2動作3OK4NG
MPP
ANB MR31503              ; Err84誤配管検査 NG
DW #3 EM502              ; 誤配管検査総ﾗﾝﾌﾟ_0未2動作3OK4NG
MRD
LD>= EM30014 #1          ; 判定方法 確認用(1でNG時続行)
ORB MR31503              ; Err84誤配管検査 NG
ANL
JMP @MR1500
MPP
LD< EM30014 #1           ; 判定方法 確認用(1でNG時続行)
AND MR31503              ; Err84誤配管検査 NG
ANL
JMP @MR3000
;<h1/>△ﾘｰｸ検査/Leak inspection
;<h1/> -ﾘｰｸ検査前初期加圧動作/Initial pressure application before leak test
;出口jointAssy
;入口jointAssy
;→4経路を一括測定(3ｾｯﾄ/計12本)
;
;出口供給継手
;→
;出口供給継手：1回につき最大3個まで検査可能。
;1,2個で検査する場合有り
;
;Tubeｱｾﾝﾌﾞﾘ
;各経路について測定
;Exit jointAssy
;Entry jointAssy
;→ collectively measure 4 routes (3 sets / total of 12)
;
;Outlet supply fitting
;→
;Outlet Supply Fitting: Up to 3 pieces can be inspected at a time.
;There are cases when inspection is required with 1 or 2 items
;
;Tube assembly
;Measure for each route
;ﾘｰｸ検査有効？/Leak inspection effective?
STG @MR1500
MPS
ANB DM820.1              ; 検査_ﾘｰｸ検査(ON=有
FMOV #1 EM130 #5         ; ﾘｰｸ検査部位1結果(0未1-2中3良4不
DW #1 EM500              ; ﾘｰｸ検査総合状態LP(0未1-2中3良4不
CON
JMP @MR2700
MPP
AND DM820.1              ; 検査_ﾘｰｸ検査(ON=有
DW #1 EM510              ; 現在ﾘｰｸ検査部位数(1-6)
CON
SET MR103                ; ﾘｰｸ検査中
CON
MPS
ANB MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
DW #2 EM500              ; ﾘｰｸ検査総合状態LP(0未1-2中3良4不
CON
JMP @MR1501
MPP
AND MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
DW #2 EM504              ; M/Cﾘｰｸ 状態LP(0未1-2中3良4不
CON
JMP @MR1501
;ﾎｰｽｸﾗﾝﾌﾟ有効？Hose clamp valid?
STG @MR1501
MPS
LD MR106                 ; ﾒﾝﾃ_装置ﾘｰｸ検査中
ORB DM824.4              ; ﾎｰｽｸﾗﾝﾌﾟ有効(=ON
ANL
JMP @MR1503
MPP
LDB MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
ANB MR902                ; ｴﾗｰ
AND DM824.4              ; ﾎｰｽｸﾗﾝﾌﾟ有効(=ON
ANL
SET MR8400               ; 下降:ﾎｰｽ押(Vari/針ｼﾘﾝﾀﾞ(出口供給
CON
RES MR8401               ; 上昇:ﾎｰｽ押(Vari/針ｼﾘﾝﾀﾞ(出口供給
CON
MPS
LD<> DM150 #2100         ; ｼﾘﾝﾀﾞｰｴﾗｰ番号
AND R2100                ; 下限:ﾎｰｽ押(Vari/針ｼﾘﾝﾀﾞ(出口供給
ANB R2101                ; 上限:ﾎｰｽ押(Vari/針ｼﾘﾝﾀﾞ(出口供給
ANL
JMP @MR1503
MPP
AND= DM150 #2100         ; ｼﾘﾝﾀﾞｰｴﾗｰ番号
JMP @MR1502
STG @MR1502
ANB MR902                ; ｴﾗｰ
RES MR8400               ; 下降:ﾎｰｽ押(Vari/針ｼﾘﾝﾀﾞ(出口供給
CON
SET MR8401               ; 上昇:ﾎｰｽ押(Vari/針ｼﾘﾝﾀﾞ(出口供給
CON
TMR @9 #1
CON
AND @T9
JMP @MR1501
;検査ﾁｬﾝﾈﾙﾙｰﾌﾟ先頭/Inspection channel loop head
;上下流ﾊﾞﾙﾌﾞ設定実行/Execution of upstream and downstream valve setting
STG @MR1503
ANB MR902                ; ｴﾗｰ
MDSTRT Set
JMP @MR1504
STG @MR1504
ANF _Set
JMP @MR1505
;現在のﾘｰｸ検査部位で有効な回路設定があったか？
;Have there been valid circuit settings at the current leak inspection site?
STG @MR1505
MPS
AND MR508                ; 現ﾘｰｸ検査部位 有効回路無し
LDA EM510                ; 現在ﾘｰｸ検査部位数(1-6)
CON
SUB #1
CON
STA Z1
CON
MPS
ANB MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
DW #1 EM130:Z1           ; ﾘｰｸ検査部位1結果(0未1-2中3良4不
CON
JMP @MR2602
MPP
AND MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
DW #1 EM1000:Z1          ; MCﾘｰｸ1結果(0未1-2中3良4不
CON
JMP @MR2602
MPP
ANB MR508                ; 現ﾘｰｸ検査部位 有効回路無し
JMP @MR1506
;出口供給継手かつ装置ﾘｰｸ検査でない？/Is not an outlet supply fitting and a device leak test?
;現在機種
;3=出口供給継手
;Current model
;3 = outlet supply fitting
STG @MR1506
MPS
LDB MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
OR MR208                 ; ﾒﾝﾃ_ﾘｰｸﾃｽﾀNG調整中
AND> DM827 #1            ; 現設定_同時検査ﾜｰｸ最大数(1-3)
ANL
JMP @MR1507
MPP
LD<= DM827 #1            ; 現設定_同時検査ﾜｰｸ最大数(1-3)
LDB MR208                ; ﾒﾝﾃ_ﾘｰｸﾃｽﾀNG調整中
AND MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
ORL
ANL
JMP @MR1508
;出口供給継手の場合はﾜｰｸ有無状況によって変化
;ﾜｰｸ1が無し→ﾘｰｸ検査部位1,2実行不可
;ﾜｰｸ2が無し→ﾘｰｸ検査部位3,4実行不可
;ﾜｰｸ3が無し→ﾘｰｸ検査部位5,6実行不可
;※装置ﾘｰｸ検査時はﾜｰｸ3個として対応
;In the case of the outlet supply joint, it varies depending on the product availability situation
;No Product 1 → Leak Inspection Part 1, 2 Not Executable
;No Product 2 → Leak Inspection Part 3, 4 Not Executable
;Product 3 is not available → leak inspection site 5, 6 not executable
;※ When equipment leak inspection is conducted as three products
LD @MR1507
LD< EM510 DM828          ; 現在ﾘｰｸ検査部位数(1-6)  現設定_ﾜｰｸ2個目開始番号
ANB MR700                ; ﾜｰｸ1有り記憶
LD>= EM510 DM828         ; 現在ﾘｰｸ検査部位数(1-6)  現設定_ﾜｰｸ2個目開始番号
AND< EM510 DM829         ; 現在ﾘｰｸ検査部位数(1-6)  現設定_ﾜｰｸ3個目開始番号
ANB MR701                ; ﾜｰｸ2有り記憶
ORL
LD>= EM510 DM829         ; 現在ﾘｰｸ検査部位数(1-6)  現設定_ﾜｰｸ3個目開始番号
ANB MR702                ; ﾜｰｸ3有り記憶
ORL
ANL
OUT @MR003               ; ﾜｰｸ無しﾘｰｸ検査ﾊﾟｽ
STG @MR1507
MPS
AND @MR003               ; ﾜｰｸ無しﾘｰｸ検査ﾊﾟｽ
LDA EM510                ; 現在ﾘｰｸ検査部位数(1-6)
CON
SUB #1
CON
STA Z1
CON
MPS
ANB MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
DW #1 EM130:Z1           ; ﾘｰｸ検査部位1結果(0未1-2中3良4不
CON
JMP @MR2602
MPP
AND MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
DW #1 EM1000:Z1          ; MCﾘｰｸ1結果(0未1-2中3良4不
CON
JMP @MR2602
MPP
ANB @MR003               ; ﾜｰｸ無しﾘｰｸ検査ﾊﾟｽ
JMP @MR1508
;ﾘｰｸ検査状態ﾗﾝﾌﾟ書込み：実行中/Leak inspection status lamp write: running
STG @MR1508
LDA EM510                ; 現在ﾘｰｸ検査部位数(1-6)
CON
SUB #1
CON
STA Z1
CON
MPS
ANB MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
DW #2 EM130:Z1           ; ﾘｰｸ検査部位1結果(0未1-2中3良4不
CON
JMP @MR1509
MPP
AND MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
DW #2 EM1000:Z1          ; MCﾘｰｸ1結果(0未1-2中3良4不
CON
JMP @MR1509
;EM30029:(TP)装置ﾘｰｸ検査表示用
;2：加圧中
;EM30029: (TP) For device leak inspection display
;2: Under pressurization
LD @MR1509
AND MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
ANB MR208                ; ﾒﾝﾃ_ﾘｰｸﾃｽﾀNG調整中
DW #2 EM30029            ; (TP)装置ﾘｰｸ検査表示用
;現在のﾘｰｸ検査部位に対応する回路ﾊﾞﾙﾌﾞを開設定する
;※ﾀｲﾏは検査毎に設定値有り
;Open the circuit valves corresponding to the current leak inspection site
;* Timer has setting value for each inspection
;23：ﾘｰｸﾃｽﾀ入口
;24：ﾘｰｸﾃｽﾀ出口
;25：流量ｾﾝｻ入口
;26：流量ｾﾝｻ出口
;27：上流大気開放
;23: Leak tester entrance
;24: Leak tester exit
;25: Flow sensor inlet
;26: Flow sensor outlet
;27: Upstream air release
STG @MR1509
SET MR8104               ; 上流側流路切替ﾊﾞﾙﾌﾞ 23(ON=開)
CON
SET MR8105               ; 上流側流路切替ﾊﾞﾙﾌﾞ 24(ON=開)
CON
RES MR8106               ; 上流側流路切替ﾊﾞﾙﾌﾞ 25(ON=開)
CON
RES MR8107               ; 上流側流路切替ﾊﾞﾙﾌﾞ 26(ON=開)
CON
RES MR8108               ; 上流側流路切替ﾊﾞﾙﾌﾞ 27(ON=開)
CON
SET MR400                ; 上下流_ﾊﾞﾙﾌﾞ一括切替(OFF全閉
CON
MPS
AND CR2003               ; 常時OFF
LDA EM510                ; 現在ﾘｰｸ検査部位数(1-6)
CON
SUB #1
CON
MUL #2
CON
STA Z1
CON
TMR @3 DM880:Z1          ; ﾘｰｸ検査初期加圧時間  現設定_ﾘｰｸ検査1初期加圧時間
CON
AND @T3                  ; ﾘｰｸ検査初期加圧時間
JMP @MR1510
MPP
AND CR2002               ; 常時ON
JMP @MR1510
;ﾘｰｸ検査初期加圧安定時間待ち
;※ﾀｲﾏは検査毎に設定値有り
;Leak inspection Initial pressurization Waiting for settling time
;* Timer has setting value for each inspection
STG @MR1510
LDA EM510                ; 現在ﾘｰｸ検査部位数(1-6)
CON
SUB #1
CON
MUL #2
CON
STA Z1
CON
TMR @4 DM892:Z1          ; ﾘｰｸ検査初期加圧安定時間  現設定_ﾘｰｸ検査1初期加圧安定時間
CON
AND @T4                  ; ﾘｰｸ検査初期加圧安定時間
JMP @MR1511
STG @MR1511
MPS
LDA EM510                ; 現在ﾘｰｸ検査部位数(1-6)
CON
SUB #1
CON
STA Z1
CON
MPS
ANB MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
LDA DM874:Z1             ; 現設定_ﾘｰｸ検査1検査圧力設定値
CON
STA EM136:Z1             ; ﾘｰｸ検査1 初期圧
MPP
AND MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
MPS
AND CR2003               ; 常時OFF
LDA EM1162:Z1            ; MCﾘｰｸ検査1 検査圧
CON
STA EM1006:Z1            ; MCﾘｰｸ結果 基準圧1
MPP
AND CR2002               ; 常時ON
LDA DM874:Z1             ; 現設定_ﾘｰｸ検査1検査圧力設定値
CON
STA EM1006:Z1            ; MCﾘｰｸ結果 基準圧1
MPP
JMP @MR2400
;<h1/> -ﾘｰｸ検査/Leak inspection
STG @MR2400
SET MR20500              ; ﾘｰｸﾃｽﾀ-実行要求
CON
JMP @MR2401
;EM30029:(TP)装置ﾘｰｸ検査表示用
;3：装置体ﾘｰｸ検査中
;EM30029: (TP) For device leak inspection display
;3: Under leak inspection
LD @MR2401
AND MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
ANB MR208                ; ﾒﾝﾃ_ﾘｰｸﾃｽﾀNG調整中
DW #3 EM30029            ; (TP)装置ﾘｰｸ検査表示用
;完了待ち/Wait for completion
STG @MR2401
AND MR20501              ; ﾘｰｸﾃｽﾀ-実行完了
RES MR20501              ; ﾘｰｸﾃｽﾀ-実行完了
CON
JMP @MR2402
STG @MR2402
MPS
ANB MR20502              ; ﾘｰｸﾃｽﾀｰ処理異常有
MPS
AND= DM20020 #1          ; ﾘｰｸﾃｽﾀｰ結果ｺｰﾄﾞ(1=OK)
JMP @MR2403
MPP
AND<> DM20020 #1         ; ﾘｰｸﾃｽﾀｰ結果ｺｰﾄﾞ(1=OK)
LDA EM510                ; 現在ﾘｰｸ検査部位数(1-6)
CON
SUB #1
CON
STA Z1
CON
MPS
ANB MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
DW.S +32767 EM154:Z1     ; ﾘｰｸ検査1 ﾘｰｸ量(補正後)
CON
JMP @MR2406
MPP
AND MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
DW.S +32767 EM1018:Z1    ; MCﾘｰｸ結果 ﾘｰｸ量1
CON
JMP @MR2406
MPP
AND MR20502              ; ﾘｰｸﾃｽﾀｰ処理異常有
RES MR20502              ; ﾘｰｸﾃｽﾀｰ処理異常有
CON
JMP @MR2400
;ﾘｰｸ量(補正後)算出/Leak amount (after correction) calculated
STG @MR2403
LDA EM510                ; 現在ﾘｰｸ検査部位数(1-6)
CON
SUB #1
CON
STA Z1
CON
LDA.S EM148:Z1           ; ﾘｰｸ検査1 ﾘｰｸ量(補正前)
CON
MPS
ANB MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
SUB.S DM868:Z1           ; 現設定_ﾘｰｸ検査1補正量
CON
STA.S EM154:Z1           ; ﾘｰｸ検査1 ﾘｰｸ量(補正後)
CON
JMP @MR2404
MPP
AND MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
STA.S EM1018:Z1          ; MCﾘｰｸ結果 ﾘｰｸ量1
CON
JMP @MR2404
;ﾘｰｸ検査判断/Leak inspection judgment
STG @MR2404
LDA EM510                ; 現在ﾘｰｸ検査部位数(1-6)
CON
SUB #1
CON
STA Z1
CON
MPS
ANB MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
MPS
AND<.S EM154:Z1 DM856:Z1 ; ﾘｰｸ検査1 ﾘｰｸ量(補正後)  現設定_ﾘｰｸ検査1判定値(ﾘｰｸ量)
JMP @MR2405
MPP
AND>=.S EM154:Z1 DM856:Z1; ﾘｰｸ検査1 ﾘｰｸ量(補正後)  現設定_ﾘｰｸ検査1判定値(ﾘｰｸ量)
JMP @MR2406
MPP
AND MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
MPS
AND<.S EM1018:Z1 EM1156:Z1;MCﾘｰｸ結果 ﾘｰｸ量1  MCﾘｰｸ検査1 判定値(ﾘｰｸ量)
JMP @MR2405
MPP
AND>=.S EM1018:Z1 EM1156:Z1;MCﾘｰｸ結果 ﾘｰｸ量1  MCﾘｰｸ検査1 判定値(ﾘｰｸ量)
JMP @MR2406
;ﾘｰｸ検査OK/Leak inspection OK
STG @MR2405
LDA EM510                ; 現在ﾘｰｸ検査部位数(1-6)
CON
SUB #1
CON
STA Z1
CON
MPS
ANB MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
DW #3 EM130:Z1           ; ﾘｰｸ検査部位1結果(0未1-2中3良4不
CON
JMP @MR2600
MPP
AND MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
DW #3 EM1000:Z1          ; MCﾘｰｸ1結果(0未1-2中3良4不
CON
JMP @MR2600
;ﾘｰｸ検査圧異常/Leak inspection pressure error
;EM(230+(X-1)):ﾘｰｸ検査Xの異常履歴
;bit6:ﾘｰｸ検査圧異常
;EM (230+ (X - 1)): Anomaly history of leakage inspection X
;bit 6: leak inspection pressure abnormality
STG @MR2406
MPS
LDA EM510                ; 現在ﾘｰｸ検査部位数(1-6)
CON
SUB #1
CON
STA Z1
CON
MPS
ANB MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
DW #4 EM130:Z1           ; ﾘｰｸ検査部位1結果(0未1-2中3良4不
CON
BSET EM166:Z1 #6         ; ﾘｰｸ検査1 異常履歴(bit参照)
MPP
AND MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
DW #4 EM1000:Z1          ; MCﾘｰｸ1結果(0未1-2中3良4不
CON
BSET EM1024:Z1 #6        ; MCﾘｰｸ検査1 異常履歴(bit参照)
MRD
ANB MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
DW #4 EM500              ; ﾘｰｸ検査総合状態LP(0未1-2中3良4不
MRD
AND MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
LDA EM30010              ; (TP)機種選択番号(1-10)
CON
SUB #1
CON
MUL #25
CON
ADD DM5                  ; 現在部品番号(1〜25）
CON
SUB #1
CON
STA Z1
CON
RES LR000:Z1             ; 機種1部品1装置ﾘｰｸ検査OK
MPP
DW #82 EM2007            ; 結果書込8
CON
DW #82 EM2008            ; 結果書込9
CON
SET MR31501              ; Err82ﾘｰｸ検査 ﾘｰｸNG
CON
SET @MR002               ; 終了時NG発報予約
CON
JMP @MR2600
;<h1/> -ﾘｰｸ検査終了処理/Leak inspection end processing
;EM30029:(TP)装置ﾘｰｸ検査表示用
;4：大気開放中
;EM30029: (TP) For device leak inspection display
;4: Under atmosphere opening
LD @MR2600
AND MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
ANB MR208                ; ﾒﾝﾃ_ﾘｰｸﾃｽﾀNG調整中
DW #4 EM30029            ; (TP)装置ﾘｰｸ検査表示用
;23：ﾘｰｸﾃｽﾀ入口
;24：ﾘｰｸﾃｽﾀ出口
;25：流量ｾﾝｻ入口
;26：流量ｾﾝｻ出口
;27：上流大気開放
;23: Leak tester entrance
;24: Leak tester exit
;25: Flow sensor inlet
;26: Flow sensor outlet
;27: Upstream air release
STG @MR2600
FMOV #1 DM19900 #20      ; 上流側流路切替ﾊﾞﾙﾌﾞ1 (0=閉/1=開)
FMOV #1 DM19930 #20      ; 下流側流路切替ﾊﾞﾙﾌﾞ1 (0=閉/1=開
SET MR402                ; 大気開放中
CON
SET MR400                ; 上下流_ﾊﾞﾙﾌﾞ一括切替(OFF全閉
CON
SET MR8104               ; 上流側流路切替ﾊﾞﾙﾌﾞ 23(ON=開)
CON
SET MR8105               ; 上流側流路切替ﾊﾞﾙﾌﾞ 24(ON=開)
CON
SET MR8106               ; 上流側流路切替ﾊﾞﾙﾌﾞ 25(ON=開)
CON
SET MR8107               ; 上流側流路切替ﾊﾞﾙﾌﾞ 26(ON=開)
CON
SET MR8108               ; 上流側流路切替ﾊﾞﾙﾌﾞ 27(ON=開)
CON
JMP @MR2601
STG @MR2601
TMR @7 #10               ; ﾘｰｸ検査後大気開放ｳｪｲﾄ
CON
AND @T7                  ; ﾘｰｸ検査後大気開放ｳｪｲﾄ
RES MR402                ; 大気開放中
CON
RES MR8104               ; 上流側流路切替ﾊﾞﾙﾌﾞ 23(ON=開)
CON
RES MR8105               ; 上流側流路切替ﾊﾞﾙﾌﾞ 24(ON=開)
CON
RES MR8106               ; 上流側流路切替ﾊﾞﾙﾌﾞ 25(ON=開)
CON
RES MR8107               ; 上流側流路切替ﾊﾞﾙﾌﾞ 26(ON=開)
CON
JMP @MR2602
;ﾘｰｸ検査全部位(1〜6)終了？
;Leak inspection All parts (1 to 6) end?
;※検査NG＆NG時終了設定時は終了処理へ
;* When inspection NG & NG end setting is set to end processing
STG @MR2602
MPS
AND> EM510 #5            ; 現在ﾘｰｸ検査部位数(1-6)
JMP @MR2604
MPP
AND<= EM510 #5           ; 現在ﾘｰｸ検査部位数(1-6)
MPS
LD< EM30014 #1           ; 判定方法 確認用(1でNG時続行)
LD MR31500               ; Err81ﾘｰｸ検査 基準圧NG
OR MR31501               ; Err82ﾘｰｸ検査 ﾘｰｸNG
OR MR31502               ; Err83ﾘｰｸ検査 大気開放NG
ANL
ANL
JMP @MR2604
MPP
LD>= EM30014 #1          ; 判定方法 確認用(1でNG時続行)
LDB MR31500              ; Err81ﾘｰｸ検査 基準圧NG
ANB MR31501              ; Err82ﾘｰｸ検査 ﾘｰｸNG
ANB MR31502              ; Err83ﾘｰｸ検査 大気開放NG
ORL
ANL
JMP @MR2603
STG @MR2603
INC EM510                ; 現在ﾘｰｸ検査部位数(1-6)
CON
JMP @MR1503
;ﾘｰｸ検査総合状態LP書込み/Leak inspection overall state LP writing
LD @MR2604
ANB MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
SET TM90.2               ; ｻｲｸﾙ測定_ﾘｰｸ検査
STG @MR2604
RES MR103                ; ﾘｰｸ検査中
CON
MPS
LDB MR31500              ; Err81ﾘｰｸ検査 基準圧NG
ANB MR31501              ; Err82ﾘｰｸ検査 ﾘｰｸNG
ANB MR31502              ; Err83ﾘｰｸ検査 大気開放NG
ANL
MPS
ANB MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
DW #3 EM500              ; ﾘｰｸ検査総合状態LP(0未1-2中3良4不
CON
JMP @MR2605
MPP
AND MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
DW #3 EM504              ; M/Cﾘｰｸ 状態LP(0未1-2中3良4不
CON
JMP @MR2605
MPP
LD MR31500               ; Err81ﾘｰｸ検査 基準圧NG
OR MR31501               ; Err82ﾘｰｸ検査 ﾘｰｸNG
OR MR31502               ; Err83ﾘｰｸ検査 大気開放NG
ANL
MPS
ANB MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
DW #4 EM500              ; ﾘｰｸ検査総合状態LP(0未1-2中3良4不
MRD
AND MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
DW #4 EM504              ; M/Cﾘｰｸ 状態LP(0未1-2中3良4不
MRD
AND< EM30014 #1          ; 判定方法 確認用(1でNG時続行)
JMP @MR3000
MPP
AND>= EM30014 #1         ; 判定方法 確認用(1でNG時続行)
JMP @MR2605
;ﾎｰｽｸﾗﾝﾌﾟ有効？Hose clamp valid?
STG @MR2605
MPS
LD MR106                 ; ﾒﾝﾃ_装置ﾘｰｸ検査中
ORB DM824.4              ; ﾎｰｽｸﾗﾝﾌﾟ有効(=ON
ANL
JMP @MR2700
MPP
LDB MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
AND DM824.4              ; ﾎｰｽｸﾗﾝﾌﾟ有効(=ON
ANL
SET MR8401               ; 上昇:ﾎｰｽ押(Vari/針ｼﾘﾝﾀﾞ(出口供給
CON
RES MR8400               ; 下降:ﾎｰｽ押(Vari/針ｼﾘﾝﾀﾞ(出口供給
CON
ANB R2100                ; 下限:ﾎｰｽ押(Vari/針ｼﾘﾝﾀﾞ(出口供給
AND R2101                ; 上限:ﾎｰｽ押(Vari/針ｼﾘﾝﾀﾞ(出口供給
JMP @MR2700
;<h1/>△逆止弁検査/Check reverse valve
;出口供給継手のみ/Exit supply fitting only
STG @MR2700
MPS
AND MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
JMP @MR2900
MPP
ANB MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
MPS
ANB DM820.3              ; 検査_逆止弁検査(ON=有
FMOV #1 EM172 #5         ; 逆止弁検査部1結果(0未1-2中3良4不
DW #1 EM503              ; 逆止弁検査総ﾗﾝﾌﾟ_0未2動作3OK4NG
CON
JMP @MR2900
MPP
AND DM820.3              ; 検査_逆止弁検査(ON=有
SET MR104                ; 逆止弁検査中
CON
DW #2 EM503              ; 逆止弁検査総ﾗﾝﾌﾟ_0未2動作3OK4NG
CON
DW #1 DM21               ; 現在逆止弁検査部位(1-6)
CON
JMP @MR2701
;針ｼﾘﾝﾀﾞ上限/Needle cylinder upper limit
STG @MR2701
MPS
ANB DM824.5              ; 針ｼﾘﾝﾀﾞ上下有効(=ON
JMP @MR2703
MPP
LD DM824.5               ; 針ｼﾘﾝﾀﾞ上下有効(=ON
ANB MR902                ; ｴﾗｰ
ANL
MPS
AND MR700                ; ﾜｰｸ1有り記憶
RES MR8400               ; 下降:ﾎｰｽ押(Vari/針ｼﾘﾝﾀﾞ(出口供給
CON
SET MR8401               ; 上昇:ﾎｰｽ押(Vari/針ｼﾘﾝﾀﾞ(出口供給
MRD
AND MR701                ; ﾜｰｸ2有り記憶
RES MR8402               ; 針ｼﾘﾝﾀﾞ2下降(出口供給継手)
CON
SET MR8403               ; 針ｼﾘﾝﾀﾞ2上昇(出口供給継手)
MRD
AND MR702                ; ﾜｰｸ3有り記憶
RES MR8404               ; 針ｼﾘﾝﾀﾞ3下降(出口供給継手)
CON
SET MR8405               ; 針ｼﾘﾝﾀﾞ3上昇(出口供給継手)
MPP
JMP @MR2702
STG @MR2702
ANB MR902                ; ｴﾗｰ
LDB R2100                ; 下限:ﾎｰｽ押(Vari/針ｼﾘﾝﾀﾞ(出口供給
AND R2101                ; 上限:ﾎｰｽ押(Vari/針ｼﾘﾝﾀﾞ(出口供給
ORB MR700                ; ﾜｰｸ1有り記憶
ANL
LDB R2102                ; 針ｼﾘﾝﾀﾞ2下限(出口供給継手)
AND R2103                ; 針ｼﾘﾝﾀﾞ2上限(出口供給継手)
ORB MR701                ; ﾜｰｸ2有り記憶
ANL
LDB R2104                ; 針ｼﾘﾝﾀﾞ3下限(出口供給継手)
AND R2105                ; 針ｼﾘﾝﾀﾞ3上限(出口供給継手)
ORB MR702                ; ﾜｰｸ3有り記憶
ANL
JMP @MR2703
;出口供給継手の場合はﾜｰｸ有無状況によって変化
;ﾜｰｸ1が無し→ﾘｰｸ検査部位1,2実行不可
;ﾜｰｸ2が無し→ﾘｰｸ検査部位3,4実行不可
;ﾜｰｸ3が無し→ﾘｰｸ検査部位5,6実行不可
;※装置ﾘｰｸ検査時はﾜｰｸ3個として対応
;In the case of the outlet supply joint, it varies depending on the product availability situation
;No Product 1 → Leak Inspection Part 1, 2 Not Executable
;No Product 2 → Leak Inspection Part 3, 4 Not Executable
;Product 3 is not available → leak inspection site 5, 6 not executable
;※ When equipment leak inspection is conducted as three products
LD @MR2703
LD>= DM21 #1             ; 現在逆止弁検査部位(1-6)
AND<= DM21 #2            ; 現在逆止弁検査部位(1-6)
ANB MR700                ; ﾜｰｸ1有り記憶
LD>= DM21 #3             ; 現在逆止弁検査部位(1-6)
AND<= DM21 #4            ; 現在逆止弁検査部位(1-6)
ANB MR701                ; ﾜｰｸ2有り記憶
ORL
LD>= DM21 #5             ; 現在逆止弁検査部位(1-6)
AND<= DM21 #6            ; 現在逆止弁検査部位(1-6)
ANB MR702                ; ﾜｰｸ3有り記憶
ORL
ANL
OUT @MR004               ; ﾜｰｸ無し逆止弁検査ﾊﾟｽ
STG @MR2703
LDA DM21                 ; 現在逆止弁検査部位(1-6)
CON
SUB #1
CON
STA Z1
CON
MPS
AND @MR004               ; ﾜｰｸ無し逆止弁検査ﾊﾟｽ
DW #1 EM172:Z1           ; 逆止弁検査部1結果(0未1-2中3良4不
CON
JMP @MR2803
MPP
ANB @MR004               ; ﾜｰｸ無し逆止弁検査ﾊﾟｽ
DW #2 EM172:Z1           ; 逆止弁検査部1結果(0未1-2中3良4不
CON
JMP @MR2704
;検査部位に応じた流路準備/Flow path preparation according to the inspection site
;検査ﾙｰﾌﾟ先頭/Inspection loop head
;上下流流路切替ﾊﾞﾙﾌﾞ設定をｸﾘｱ(全て閉設定に初期化)
;Clear upstream / downstream flow path switching valve setting (initialized to closed setting all)
STG @MR2704
ANB MR902                ; ｴﾗｰ
ZRES DM19900 DM19949     ; 上流側流路切替ﾊﾞﾙﾌﾞ1 (0=閉/1=開)  下流側流路切替ﾊﾞﾙﾌﾞ20 (0=閉/1=開
CON
JMP @MR2705
STG @MR2705
LDA DM21                 ; 現在逆止弁検査部位(1-6)
CON
SUB #1
CON
STA Z1
CON
DW #1 DM19900:Z1         ; 上流側流路切替ﾊﾞﾙﾌﾞ1 (0=閉/1=開)
CON
JMP @MR2706
;回路ﾊﾞﾙﾌﾞ開閉処理/Circuit valve opening / closing process
;23：ﾘｰｸﾃｽﾀ入口
;24：ﾘｰｸﾃｽﾀ出口
;25：流量ｾﾝｻ入口
;26：流量ｾﾝｻ出口
;27：上流大気開放
;23: Leak tester entrance
;24: Leak tester exit
;25: Flow sensor inlet
;26: Flow sensor outlet
;27: Upstream air release
LD CR2003                ; 常時OFF
OUT MR815                ; 逆止弁流量で測定
LDB MR815                ; 逆止弁流量で測定
AND MR104                ; 逆止弁検査中
OUT MR814                ; 逆止弁圧力値測定書込み
STG @MR2706
MPS
AND MR815                ; 逆止弁流量で測定
RES MR8104               ; 上流側流路切替ﾊﾞﾙﾌﾞ 23(ON=開)
CON
RES MR8105               ; 上流側流路切替ﾊﾞﾙﾌﾞ 24(ON=開)
CON
SET MR8106               ; 上流側流路切替ﾊﾞﾙﾌﾞ 25(ON=開)
CON
SET MR8107               ; 上流側流路切替ﾊﾞﾙﾌﾞ 26(ON=開)
MRD
ANB MR815                ; 逆止弁流量で測定
SET MR8104               ; 上流側流路切替ﾊﾞﾙﾌﾞ 23(ON=開)
CON
SET MR8105               ; 上流側流路切替ﾊﾞﾙﾌﾞ 24(ON=開)
CON
RES MR8106               ; 上流側流路切替ﾊﾞﾙﾌﾞ 25(ON=開)
CON
RES MR8107               ; 上流側流路切替ﾊﾞﾙﾌﾞ 26(ON=開)
MPP
RES MR8108               ; 上流側流路切替ﾊﾞﾙﾌﾞ 27(ON=開)
CON
SET MR400                ; 上下流_ﾊﾞﾙﾌﾞ一括切替(OFF全閉
CON
JMP @MR2707
STG @MR2707
LDA DM21                 ; 現在逆止弁検査部位(1-6)
CON
SUB #1
CON
MUL #2
CON
STA Z1
CON
TMR @8 DM946:Z1          ; 逆止弁検査安定時間  現設定_逆止弁検査1安定時間
CON
AND @T8                  ; 逆止弁検査安定時間
MPS
AND MR815                ; 逆止弁流量で測定
JMP @MR2708
MPP
ANB MR815                ; 逆止弁流量で測定
JMP @MR2711
;<h1/>逆止弁流量
;流量値書込み/Flow value write
STG @MR2708
MPS
AND>.S DM10600 +0        ; A-A/D1_1流量ｾﾝｻ値
LDA.S DM10600            ; A-A/D1_1流量ｾﾝｻ値
CON
MUL.S +10
CON
DIV.S +592
CON
STA.S @DM7               ; 逆止弁流量計ｱﾅﾛｸﾞﾃﾞｰﾀ変換値
CON
JMP @MR2709
MPP
AND<=.S DM10600 +0       ; A-A/D1_1流量ｾﾝｻ値
DW #0 @DM7               ; 逆止弁流量計ｱﾅﾛｸﾞﾃﾞｰﾀ変換値
CON
JMP @MR2709
STG @MR2709
LDA DM21                 ; 現在逆止弁検査部位(1-6)
CON
SUB #1
CON
STA Z1
CON
LDA.S @DM7               ; 逆止弁流量計ｱﾅﾛｸﾞﾃﾞｰﾀ変換値
CON
STA.S EM178:Z1           ; 逆止弁検査部位1流量値
CON
JMP @MR2710
;逆止弁判定/reverse valve judgment
STG @MR2710
LDA DM21                 ; 現在逆止弁検査部位(1-6)
CON
SUB #1
CON
MUL #2
CON
STA Z1
CON
MPS
LD>=.S DM934 @DM7        ; 現設定_逆止弁検査1_判定値上  逆止弁流量計ｱﾅﾛｸﾞﾃﾞｰﾀ変換値
AND<=.S DM945 @DM7       ; 現設定_逆止弁検査6_判定値下  逆止弁流量計ｱﾅﾛｸﾞﾃﾞｰﾀ変換値
ANL
JMP @MR2801
MPP
LD<.S DM934 @DM7         ; 現設定_逆止弁検査1_判定値上  逆止弁流量計ｱﾅﾛｸﾞﾃﾞｰﾀ変換値
OR>.S DM945 @DM7         ; 現設定_逆止弁検査6_判定値下  逆止弁流量計ｱﾅﾛｸﾞﾃﾞｰﾀ変換値
ANL
JMP @MR2802
;<h1/>逆止弁ﾘｰｸﾃｽﾀｰ
STG @MR2711
LDA DM21                 ; 現在逆止弁検査部位(1-6)
CON
SUB #1
CON
STA Z1
CON
LDA DM874:Z1             ; 現設定_ﾘｰｸ検査1検査圧力設定値
CON
STA EM185:Z1             ; 逆止弁1 検査圧
CON
JMP @MR2712
STG @MR2712
FMOV #0 ZF26999 #1001    ; 逆止弁検査ﾃﾞｰﾀ取得数
SET MR20500              ; ﾘｰｸﾃｽﾀ-実行要求
CON
JMP @MR2713
;完了待ち/Wait for completion
STG @MR2713
AND MR20501              ; ﾘｰｸﾃｽﾀ-実行完了
RES MR20501              ; ﾘｰｸﾃｽﾀ-実行完了
CON
JMP @MR2714
STG @MR2714
MPS
ANB MR20502              ; ﾘｰｸﾃｽﾀｰ処理異常有
MPS
AND= DM20020 #1          ; ﾘｰｸﾃｽﾀｰ結果ｺｰﾄﾞ(1=OK)
JMP @MR2715
MPP
AND<> DM20020 #1         ; ﾘｰｸﾃｽﾀｰ結果ｺｰﾄﾞ(1=OK)
LDA DM21                 ; 現在逆止弁検査部位(1-6)
CON
SUB #1
CON
STA Z1
CON
DW.S +32767 EM197:Z1     ; 逆止弁1 ﾘｰｸ量(補正後)
CON
JMP @MR2406
MPP
AND MR20502              ; ﾘｰｸﾃｽﾀｰ処理異常有
RES MR20502              ; ﾘｰｸﾃｽﾀｰ処理異常有
CON
JMP @MR2712
;ﾘｰｸ量(補正後)算出/Leak amount (after correction) calculated
;※逆止弁補正値
STG @MR2715
LDA DM21                 ; 現在逆止弁検査部位(1-6)
CON
SUB #1
CON
STA Z1
CON
LDA.S EM191:Z1           ; 逆止弁1 ﾘｰｸ量(補正前)
CON
SUB.S DM958:Z1           ; 現設定_逆止弁検査1ﾘｰｸ補正値
CON
STA.S EM197:Z1           ; 逆止弁1 ﾘｰｸ量(補正後)
CON
JMP @MR2800
;ﾘｰｸ検査判断/Leak inspection judgment
STG @MR2800
LDA DM21                 ; 現在逆止弁検査部位(1-6)
CON
SUB #1
CON
STA Z1
CON
MPS
AND<.S EM197:Z1 DM964:Z1 ; 逆止弁1 ﾘｰｸ量(補正後)  現設定_逆止弁検査1ﾘｰｸ判定値
JMP @MR2801
MPP
AND>=.S EM197:Z1 DM964:Z1; 逆止弁1 ﾘｰｸ量(補正後)  現設定_逆止弁検査1ﾘｰｸ判定値
JMP @MR2802
;<h1/>共通
;逆止弁検査OK/reverse valve judgment OK
;EM172:Z1逆止弁検査結果
;=3 OK
;EM172: Z1 Rcheck valve chk part1 sts
;= 3 OK
STG @MR2801
LDA DM21                 ; 現在逆止弁検査部位(1-6)
CON
SUB #1
CON
STA Z1
CON
DW #3 EM172:Z1           ; 逆止弁検査部1結果(0未1-2中3良4不
CON
JMP @MR2803
;逆止弁検査NGﾌﾗｸﾞ書込み
;Check valve check NG flag write
;EM172:Z1逆止弁検査結果
;=4 NG
;EM172: Z1 Rcheck valve chk part1 sts
;= 4 NG
STG @MR2802
MPS
LDA DM21                 ; 現在逆止弁検査部位(1-6)
CON
SUB #1
CON
STA Z1
CON
DW #4 EM172:Z1           ; 逆止弁検査部1結果(0未1-2中3良4不
MPP
DW #85 EM2007            ; 結果書込8
CON
DW #85 EM2008            ; 結果書込9
CON
DW #4 EM503              ; 逆止弁検査総ﾗﾝﾌﾟ_0未2動作3OK4NG
CON
SET MR31504              ; Err85逆止弁検査NG
CON
SET @MR002               ; 終了時NG発報予約
CON
JMP @MR2803
;検査回数ﾁｪｯｸ/Check Channel confirmation counter
;※検査NG＆NG時終了設定時は終了処理へ
;* When inspection NG & NG end setting is set to end processing
LDP @MR2803
RES MR400                ; 上下流_ﾊﾞﾙﾌﾞ一括切替(OFF全閉
CON
RES MR8104               ; 上流側流路切替ﾊﾞﾙﾌﾞ 23(ON=開)
CON
RES MR8105               ; 上流側流路切替ﾊﾞﾙﾌﾞ 24(ON=開)
CON
RES MR8106               ; 上流側流路切替ﾊﾞﾙﾌﾞ 25(ON=開)
CON
RES MR8107               ; 上流側流路切替ﾊﾞﾙﾌﾞ 26(ON=開)
;<h1/> ﾃﾞｰﾀ記録/Data recording
;DM410：ﾒﾓﾘｰｶｰﾄﾞ書き込み
;0bit目 結果書き込み無効
;1bit目 測定書き込み無効
;
;DM 410: Memory card write
;0 bit Result write invalid
;1st bit Measurement write invalid
STG @MR2803
MPS
LDB DM504.1              ; ﾒﾓﾘｰｶｰﾄﾞ書込_測定ﾃﾞｰﾀ無効(=ON
ANB MR902                ; ｴﾗｰ
ANL
JMP @MR2804
MPP
AND DM504.1              ; ﾒﾓﾘｰｶｰﾄﾞ書込_測定ﾃﾞｰﾀ無効(=ON
JMP @MR2813
;<h1/>測定ﾃﾞｰﾀ書き込み/Write measurement data
STG @MR2804
ANB MR902                ; ｴﾗｰ
AND T0                   ; ﾒﾓﾘｶｰﾄﾞ書込中(排他ﾌﾗｸﾞ）OFF
SET MR109                ; ﾒﾓﾘｶｰﾄﾞ書込中(排他ﾌﾗｸﾞ）
CON
JMP @MR2805
STG @MR2805
MDSTRT MemoryCard_Access
JMP @MR2806
STG @MR2806
AND _MemoryCard_Access
ANF MR111                ; ﾒﾓﾘｶｰﾄﾞ書込中
MDSTOP MemoryCard_Access
RES MR109                ; ﾒﾓﾘｶｰﾄﾞ書込中(排他ﾌﾗｸﾞ）
CON
JMP @MR2813
;END?
STG @MR2813
MPS
AND<= DM21 #5            ; 現在逆止弁検査部位(1-6)
MPS
LD>= EM30014 #1          ; 判定方法 確認用(1でNG時続行)
ORB MR31504              ; Err85逆止弁検査NG
ANL
JMP @MR2814
MPP
LD< EM30014 #1           ; 判定方法 確認用(1でNG時続行)
AND MR31504              ; Err85逆止弁検査NG
ANL
JMP @MR2815
MPP
AND> DM21 #5             ; 現在逆止弁検査部位(1-6)
JMP @MR2815
STG @MR2814
INC DM21                 ; 現在逆止弁検査部位(1-6)
CON
JMP @MR2703
;逆止弁検査終了/End:reverse valve check
LDP @MR2815
RES MR400                ; 上下流_ﾊﾞﾙﾌﾞ一括切替(OFF全閉
CON
RES MR8104               ; 上流側流路切替ﾊﾞﾙﾌﾞ 23(ON=開)
CON
RES MR8105               ; 上流側流路切替ﾊﾞﾙﾌﾞ 24(ON=開)
CON
RES MR8106               ; 上流側流路切替ﾊﾞﾙﾌﾞ 25(ON=開)
CON
RES MR8107               ; 上流側流路切替ﾊﾞﾙﾌﾞ 26(ON=開)
STG @MR2815
SET TM90.3               ; ｻｲｸﾙ測定_逆止弁検査
CON
RES MR104                ; 逆止弁検査中
CON
MPS
AND MR31504              ; Err85逆止弁検査NG
DW #4 EM503              ; 逆止弁検査総ﾗﾝﾌﾟ_0未2動作3OK4NG
MPS
AND>= EM30014 #1         ; 判定方法 確認用(1でNG時続行)
JMP @MR2900
MPP
AND< EM30014 #1          ; 判定方法 確認用(1でNG時続行)
JMP @MR3000
MPP
ANB MR31504              ; Err85逆止弁検査NG
DW #3 EM503              ; 逆止弁検査総ﾗﾝﾌﾟ_0未2動作3OK4NG
JMP @MR2900
;<h1/>△漏液ｾﾝｻ検査/Leak sensor inspection
STG @MR2900
MPS
AND MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
JMP @MR2914
MPP
ANB MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
MPS
ANB DM820.4              ; 検査_漏液ｾﾝｻ検査(ON=有
JMP @MR2914
MPP
AND DM820.4              ; 検査_漏液ｾﾝｻ検査(ON=有
JMP @MR2901
;※漏液ｾﾝｻ検査→本装置では無し/※ Liquid sensor inspection → No in this device
STG @MR2901
JMP @MR2914
;<h1/>△閉塞有無検査/Check for obstruction
STG @MR2914
MPS
AND MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
JMP @MR3000
MPP
ANB MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
MPS
ANB DM820.5              ; 検査_閉塞有無(ON=有
JMP @MR3000
MPP
AND DM820.5              ; 検査_閉塞有無(ON=有
JMP @MR2915
;※閉塞有無検査→本装置では無し
;* Clogging presence check → No in this device
STG @MR2915
JMP @MR3000
;<h1/>△良品ﾏｰｷﾝｸﾞ/Good product marking
STG @MR3000
MPS
LD MR106                 ; ﾒﾝﾃ_装置ﾘｰｸ検査中
OR MR208                 ; ﾒﾝﾃ_ﾘｰｸﾃｽﾀNG調整中
ANL
JMP @MR3200
MPP
LDB MR208                ; ﾒﾝﾃ_ﾘｰｸﾃｽﾀNG調整中
ANB MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
ANL
MPS
LDB DM824.1              ; ﾏｰｷﾝｸﾞﾍﾟﾝ1有効(=ON
ANB DM824.2              ; ﾏｰｷﾝｸﾞﾍﾟﾝ2有効(=ON
ANB DM824.3              ; ﾏｰｷﾝｸﾞﾍﾟﾝ3有効(=ON
ANL
JMP @MR3200
MPP
LD DM824.1               ; ﾏｰｷﾝｸﾞﾍﾟﾝ1有効(=ON
OR DM824.2               ; ﾏｰｷﾝｸﾞﾍﾟﾝ2有効(=ON
OR DM824.3               ; ﾏｰｷﾝｸﾞﾍﾟﾝ3有効(=ON
ANL
JMP @MR3102
;※装置ﾘｰｸはﾏｰｷﾝｸﾞ動作無し/※ There is no marking operation for equipment leak
;NGﾜｰｸでない？/NG products?
STG @MR3102
MPS
AND<= DM827 #1           ; 現設定_同時検査ﾜｰｸ最大数(1-3)
MPS
AND @MR002               ; 終了時NG発報予約
JMP @MR3200
MPP
ANB @MR002               ; 終了時NG発報予約
JMP @MR3103
MPP
AND> DM827 #1            ; 現設定_同時検査ﾜｰｸ最大数(1-3)
MPS
LD @MR002                ; 終了時NG発報予約
AND<> EM130 #3           ; ﾘｰｸ検査部位1結果(0未1-2中3良4不
AND<> EM131 #3           ; ﾘｰｸ検査部位2結果(0未1-2中3良4不
AND<> EM132 #3           ; ﾘｰｸ検査部位3結果(0未1-2中3良4不
ANL
JMP @MR3200
MPP
LDB @MR002               ; 終了時NG発報予約
OR= EM130 #3             ; ﾘｰｸ検査部位1結果(0未1-2中3良4不
OR= EM131 #3             ; ﾘｰｸ検査部位2結果(0未1-2中3良4不
OR= EM132 #3             ; ﾘｰｸ検査部位3結果(0未1-2中3良4不
ANL
JMP @MR3104
;<h1/> -ﾜｰｸ1個機種の場合/For one product type
;ﾏｰｷﾝｸﾞ前進/Advance marking
STG @MR3103
ANB MR902                ; ｴﾗｰ
SET MR8406               ; ﾏｰｷﾝｸﾞ ﾍﾟﾝ1 前進(共通)
CON
RES MR8407               ; ﾏｰｷﾝｸﾞ ﾍﾟﾝ1 後退(共通)
CON
AND R2106                ; ﾏｰｷﾝｸﾞﾍﾟﾝ1前進限(共通)
ANB R2107                ; ﾏｰｷﾝｸﾞﾍﾟﾝ1後退限(共通)
JMP @MR3106
;<h1/> -ﾜｰｸ複数個機種の場合/For multiple products
STG @MR3104
ANB MR902                ; ｴﾗｰ
MPS
LD MR700                 ; ﾜｰｸ1有り記憶
AND= EM130 #3            ; ﾘｰｸ検査部位1結果(0未1-2中3良4不
ANL
SET MR8406               ; ﾏｰｷﾝｸﾞ ﾍﾟﾝ1 前進(共通)
CON
RES MR8407               ; ﾏｰｷﾝｸﾞ ﾍﾟﾝ1 後退(共通)
MRD
LD MR701                 ; ﾜｰｸ2有り記憶
AND= EM131 #3            ; ﾘｰｸ検査部位2結果(0未1-2中3良4不
ANL
SET MR8408               ; ﾏｰｷﾝｸﾞ ﾍﾟﾝ2 前進(出口供給継手)
CON
RES MR8409               ; ﾏｰｷﾝｸﾞ ﾍﾟﾝ2 後退(出口供給継手)
MRD
LD MR702                 ; ﾜｰｸ3有り記憶
AND= EM132 #3            ; ﾘｰｸ検査部位3結果(0未1-2中3良4不
ANL
SET MR8410               ; ﾏｰｷﾝｸﾞ ﾍﾟﾝ3 前進(出口供給継手)
CON
RES MR8411               ; ﾏｰｷﾝｸﾞ ﾍﾟﾝ3 後退(出口供給継手)
MPP
JMP @MR3105
STG @MR3105
ANB MR902                ; ｴﾗｰ
LD MR700                 ; ﾜｰｸ1有り記憶
AND= EM130 #3            ; ﾘｰｸ検査部位1結果(0未1-2中3良4不
AND R2106                ; ﾏｰｷﾝｸﾞﾍﾟﾝ1前進限(共通)
ANB R2107                ; ﾏｰｷﾝｸﾞﾍﾟﾝ1後退限(共通)
ORB MR700                ; ﾜｰｸ1有り記憶
OR<> EM130 #3            ; ﾘｰｸ検査部位1結果(0未1-2中3良4不
ANL
LD MR701                 ; ﾜｰｸ2有り記憶
AND= EM131 #3            ; ﾘｰｸ検査部位2結果(0未1-2中3良4不
AND R2108                ; ﾏｰｷﾝｸﾞﾍﾟﾝ2前進限(出口供給継手)
ANB R2109                ; ﾏｰｷﾝｸﾞﾍﾟﾝ2後退限(出口供給継手)
ORB MR701                ; ﾜｰｸ2有り記憶
OR<> EM131 #3            ; ﾘｰｸ検査部位2結果(0未1-2中3良4不
ANL
LD MR702                 ; ﾜｰｸ3有り記憶
AND= EM132 #3            ; ﾘｰｸ検査部位3結果(0未1-2中3良4不
AND R2110                ; ﾏｰｷﾝｸﾞﾍﾟﾝ3前進限(出口供給継手)
ANB R2111                ; ﾏｰｷﾝｸﾞﾍﾟﾝ3後退限(出口供給継手)
ORB MR702                ; ﾜｰｸ3有り記憶
OR<> EM132 #3            ; ﾘｰｸ検査部位3結果(0未1-2中3良4不
ANL
JMP @MR3106
;ﾏｰｷﾝｸﾞ時間/Marking time
STG @MR3106
TMR @15 #10              ; ﾏｰｷﾝｸﾞ時間
CON
AND @T15                 ; ﾏｰｷﾝｸﾞ時間
JMP @MR3107
;ﾏｰｷﾝｸﾞﾍﾟﾝ後退/Marking pen back
STG @MR3107
ANB MR902                ; ｴﾗｰ
SET MR8407               ; ﾏｰｷﾝｸﾞ ﾍﾟﾝ1 後退(共通)
CON
RES MR8406               ; ﾏｰｷﾝｸﾞ ﾍﾟﾝ1 前進(共通)
CON
SET MR8409               ; ﾏｰｷﾝｸﾞ ﾍﾟﾝ2 後退(出口供給継手)
CON
RES MR8408               ; ﾏｰｷﾝｸﾞ ﾍﾟﾝ2 前進(出口供給継手)
CON
SET MR8411               ; ﾏｰｷﾝｸﾞ ﾍﾟﾝ3 後退(出口供給継手)
CON
RES MR8410               ; ﾏｰｷﾝｸﾞ ﾍﾟﾝ3 前進(出口供給継手)
CON
JMP @MR3108
STG @MR3108
ANB MR902                ; ｴﾗｰ
ANB R2106                ; ﾏｰｷﾝｸﾞﾍﾟﾝ1前進限(共通)
AND R2107                ; ﾏｰｷﾝｸﾞﾍﾟﾝ1後退限(共通)
LD> DM827 #1             ; 現設定_同時検査ﾜｰｸ最大数(1-3)
ANB R2108                ; ﾏｰｷﾝｸﾞﾍﾟﾝ2前進限(出口供給継手)
AND R2109                ; ﾏｰｷﾝｸﾞﾍﾟﾝ2後退限(出口供給継手)
ANB R2110                ; ﾏｰｷﾝｸﾞﾍﾟﾝ3前進限(出口供給継手)
AND R2111                ; ﾏｰｷﾝｸﾞﾍﾟﾝ3後退限(出口供給継手)
OR<= DM827 #1            ; 現設定_同時検査ﾜｰｸ最大数(1-3)
ANL
JMP @MR3200
;<h1/>■ﾓｼﾞｭｰﾙ終了/End module
STG @MR3200
JMP @MR3201
;ﾜｰｸ良品？/Good product？
;TP520：検査結果/TP 520: Inspection result
STG @MR3201
ANB MR902                ; ｴﾗｰ
MPS
ANB @MR002               ; 終了時NG発報予約
MPS
AND MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
MPS
LDA EM30010              ; (TP)機種選択番号(1-10)
CON
SUB #1
CON
MUL #25
CON
ADD DM5                  ; 現在部品番号(1〜25）
CON
SUB #1
CON
STA Z1
MPP
SET LR000:Z1             ; 機種1部品1装置ﾘｰｸ検査OK
MRD
ANB MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
DW #520 EM30001          ; (TP)ﾍﾟｰｼﾞ画面切替用No.
CON
SET MR003                ; ﾜｰｸ良品
MPP
JMP @MR3203
MPP
AND @MR002               ; 終了時NG発報予約
MPS
ANB MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
SET MR004                ; ﾜｰｸ不良品
CON
SET MR911                ; 検査NG（ｷｰsw解除必要Err）
MPP
DW #80 DM149             ; ｴﾗｰ画面詳細ﾒｯｾｰｼﾞ
CON
SET MR902                ; ｴﾗｰ
CON
JMP @MR3202
;ｴﾗｰ解除待ち/Waiting for error cancellation
STG @MR3202
RES @MR002               ; 終了時NG発報予約
CON
ANB MR902                ; ｴﾗｰ
RES MR31500              ; Err81ﾘｰｸ検査 基準圧NG
CON
RES MR31501              ; Err82ﾘｰｸ検査 ﾘｰｸNG
CON
RES MR31502              ; Err83ﾘｰｸ検査 大気開放NG
CON
RES MR31503              ; Err84誤配管検査 NG
CON
RES MR31504              ; Err85逆止弁検査NG
CON
JMP @MR3203
;針ｼﾘﾝﾀﾞ上限/Needle cylinder upper limit
;※検査NG終了の場合、ここで上昇させる
;通常は逆止弁検査で上昇
;※ In case of inspection NG termination, raise here
;Usually it is checked by check valve check
STG @MR3203
MPS
ANB DM824.5              ; 針ｼﾘﾝﾀﾞ上下有効(=ON
JMP @MR3205
MPP
AND DM824.5              ; 針ｼﾘﾝﾀﾞ上下有効(=ON
MPS
AND MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
JMP @MR3205
MPP
LDB MR106                ; ﾒﾝﾃ_装置ﾘｰｸ検査中
ANB MR902                ; ｴﾗｰ
ANL
RES MR8400               ; 下降:ﾎｰｽ押(Vari/針ｼﾘﾝﾀﾞ(出口供給
CON
SET MR8401               ; 上昇:ﾎｰｽ押(Vari/針ｼﾘﾝﾀﾞ(出口供給
CON
RES MR8402               ; 針ｼﾘﾝﾀﾞ2下降(出口供給継手)
CON
SET MR8403               ; 針ｼﾘﾝﾀﾞ2上昇(出口供給継手)
CON
RES MR8404               ; 針ｼﾘﾝﾀﾞ3下降(出口供給継手)
CON
SET MR8405               ; 針ｼﾘﾝﾀﾞ3上昇(出口供給継手)
CON
JMP @MR3204
STG @MR3204
ANB MR902                ; ｴﾗｰ
ANB R2100                ; 下限:ﾎｰｽ押(Vari/針ｼﾘﾝﾀﾞ(出口供給
AND R2101                ; 上限:ﾎｰｽ押(Vari/針ｼﾘﾝﾀﾞ(出口供給
ANB R2102                ; 針ｼﾘﾝﾀﾞ2下限(出口供給継手)
AND R2103                ; 針ｼﾘﾝﾀﾞ2上限(出口供給継手)
ANB R2104                ; 針ｼﾘﾝﾀﾞ3下限(出口供給継手)
AND R2105                ; 針ｼﾘﾝﾀﾞ3上限(出口供給継手)
JMP @MR3205
;終了/end
STG @MR3205
RES MR100                ; 検査動作中
CON
MDSTOP Inspection
ENDS
;<h1/>■ｻﾌﾞﾙｰﾁﾝ/Subroutine
END
ENDH
