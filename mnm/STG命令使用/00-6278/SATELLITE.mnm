DEVICE:53
;MODULE:SATELLITE
;MODULE_TYPE:0
LD R50010                ; Emergency　Stop
OR @MR001
ZRES @MR002 @MR12015     ; 背面SW動作終了記憶
CON
ZRES DM750 DM789         ; (Y)ｲﾝｸ循環回数
CON
OUT @MR001
TMR @0 #5
LD @T0
MDSTOP SATELLITE
LDB @MR1209              ; KD交換完了待ち
ANB @MR3209              ; KD交換完了待ち
ANB @MR5209              ; KD交換完了待ち
ANB @MR7209              ; KD交換完了待ち
INV
OUT MR12100              ; 交換完了sw表示
;<h1/>ｻﾌﾞﾀﾝｸ制御
;Subtank control
;ｲﾝｸ循環確認
LD MR1305                ; (YELLOW)  ｲﾝｸ循環要求
OR @MR2314               ; Yｲﾝｸ循環開始記憶
MPS
OUT @MR2314              ; Yｲﾝｸ循環開始記憶
MPP
AND @MR2301              ; ｲﾝｸ循環完了 YELLOW
SET @MR2315              ; Yｲﾝｸ循環完了
LD MR1505                ; (MAGENTA) ｲﾝｸ循環要求
OR @MR4314               ; Mｲﾝｸ循環開始記憶
MPS
OUT @MR4314              ; Mｲﾝｸ循環開始記憶
MPP
AND @MR4301              ; ｲﾝｸ循環完了 MAGENTA
SET @MR4315              ; Mｲﾝｸ循環完了
LD MR1705                ; (CYAN)ｲﾝｸ循環要求
OR @MR6314               ; Cｲﾝｸ循環開始記憶
MPS
OUT @MR6314              ; Cｲﾝｸ循環開始記憶
MPP
AND @MR6301              ; ｲﾝｸ循環完了 CYAN
SET @MR6315              ; Cｲﾝｸ循環完了
LD MR1905                ; (BLACK)ｲﾝｸ循環要求
OR @MR8314               ; Bｲﾝｸ循環開始記憶
MPS
OUT @MR8314              ; Bｲﾝｸ循環開始記憶
MPP
AND @MR8301              ; ｲﾝｸ循環完了 BLACK
SET @MR8315              ; Bｲﾝｸ循環完了
LD= DM287 #1             ; ModelIdentficationNumber
AND @MR8315              ; Bｲﾝｸ循環完了
LD= DM287 #2             ; ModelIdentficationNumber
AND @MR2315              ; Yｲﾝｸ循環完了
AND @MR4315              ; Mｲﾝｸ循環完了
AND @MR6315              ; Cｲﾝｸ循環完了
ORL
LD= DM287 #3             ; ModelIdentficationNumber
AND @MR2315              ; Yｲﾝｸ循環完了
AND @MR4315              ; Mｲﾝｸ循環完了
AND @MR6315              ; Cｲﾝｸ循環完了
AND @MR8315              ; Bｲﾝｸ循環完了
ORL
SET MR2902               ; ｻﾌﾞﾀﾝｸｲﾝｸ循環完了FLG
;ｻﾌﾞﾀﾝｸ撹拌確認
LD MR1304                ; (Y) ｻﾌﾞﾀﾝｸ攪拌要求
OR @MR2214               ; Yｻﾌﾞﾀﾝｸ撹拌開始記憶
MPS
OUT @MR2214              ; Yｻﾌﾞﾀﾝｸ撹拌開始記憶
MPP
AND @MR2201              ; ｻﾌﾞﾀﾝｸ撹拌完了
SET @MR2215              ; Yﾊﾞﾌﾞﾘﾝｸﾞ完了
LD MR1504                ; (M) ｻﾌﾞﾀﾝｸ攪拌要求
OR @MR4214               ; Mｻﾌﾞﾀﾝｸ撹拌開始記憶
MPS
OUT @MR4214              ; Mｻﾌﾞﾀﾝｸ撹拌開始記憶
MPP
AND @MR4201              ; ｻﾌﾞﾀﾝｸ撹拌完了
SET @MR4215              ; Mﾊﾞﾌﾞﾘﾝｸﾞ完了
LD MR1704                ; (C) ｻﾌﾞﾀﾝｸ攪拌要求
OR @MR6214               ; Cｻﾌﾞﾀﾝｸ撹拌開始記憶
MPS
OUT @MR6214              ; Cｻﾌﾞﾀﾝｸ撹拌開始記憶
MPP
AND @MR6201              ; ｻﾌﾞﾀﾝｸ撹拌完了
SET @MR6215              ; Cﾊﾞﾌﾞﾘﾝｸﾞ完了
LD MR1904                ; (B) ｻﾌﾞﾀﾝｸ攪拌要求
OR @MR8214               ; Bｻﾌﾞﾀﾝｸ撹拌開始記憶
MPS
OUT @MR8214              ; Bｻﾌﾞﾀﾝｸ撹拌開始記憶
MPP
AND @MR8201              ; ｻﾌﾞﾀﾝｸ撹拌完了
SET @MR8215              ; Bﾊﾞﾌﾞﾘﾝｸﾞ完了
LD= DM287 #1             ; ModelIdentficationNumber
AND @MR8215              ; Bﾊﾞﾌﾞﾘﾝｸﾞ完了
LD= DM287 #2             ; ModelIdentficationNumber
AND @MR2215              ; Yﾊﾞﾌﾞﾘﾝｸﾞ完了
AND @MR4215              ; Mﾊﾞﾌﾞﾘﾝｸﾞ完了
AND @MR6215              ; Cﾊﾞﾌﾞﾘﾝｸﾞ完了
ORL
LD= DM287 #3             ; ModelIdentficationNumber
AND @MR2215              ; Yﾊﾞﾌﾞﾘﾝｸﾞ完了
AND @MR4215              ; Mﾊﾞﾌﾞﾘﾝｸﾞ完了
AND @MR6215              ; Cﾊﾞﾌﾞﾘﾝｸﾞ完了
AND @MR8215              ; Bﾊﾞﾌﾞﾘﾝｸﾞ完了
ORL
OUT MR805                ; ﾊﾞﾌﾞﾘﾝｸﾞ 終了
;KDﾄﾞﾗﾑ撹拌確認
LD MR1303                ; (Y) KDﾄﾞﾗﾑ攪拌要求
OR @MR2114               ; Y KDﾄﾞﾗﾑ撹拌開始記憶
MPS
ANB @MR200               ; (Y)KDﾄﾞﾗﾑ交換表示へ
OUT @MR2114              ; Y KDﾄﾞﾗﾑ撹拌開始記憶
MPP
AND @MR2101              ; KDﾄﾞﾗﾑ撹拌完了
SET @MR2115              ; Y KDﾄﾞﾗﾑ撹拌完了
LD MR1503                ; (M) KDﾄﾞﾗﾑ攪拌要求
OR @MR4114               ; M KDﾄﾞﾗﾑ撹拌開始記憶
MPS
ANB @MR300               ; (M)KDﾄﾞﾗﾑ交換表示へ
OUT @MR4114              ; M KDﾄﾞﾗﾑ撹拌開始記憶
MPP
AND @MR4101              ; KDﾄﾞﾗﾑ撹拌完了
SET @MR4115              ; M KDﾄﾞﾗﾑ撹拌完了
LD MR1703                ; (C) KDﾄﾞﾗﾑ攪拌要求
OR @MR6114               ; C KDﾄﾞﾗﾑ撹拌開始記憶
MPS
ANB @MR400               ; (C)KDﾄﾞﾗﾑ交換表示へ
OUT @MR6114              ; C KDﾄﾞﾗﾑ撹拌開始記憶
MPP
AND @MR6101              ; KDﾄﾞﾗﾑ撹拌完了
SET @MR6115              ; C KDﾄﾞﾗﾑ撹拌完了
LD MR1903                ; (B) KDﾄﾞﾗﾑ攪拌要求
OR @MR8114               ; B KDﾄﾞﾗﾑ撹拌開始記憶
MPS
ANB @MR500               ; (B)KDﾄﾞﾗﾑ交換表示へ
OUT @MR8114              ; B KDﾄﾞﾗﾑ撹拌開始記憶
MPP
AND @MR8101              ; KDﾄﾞﾗﾑ撹拌完了
SET @MR8115              ; B KDﾄﾞﾗﾑ撹拌完了
LD= DM287 #1             ; ModelIdentficationNumber
AND @MR8115              ; B KDﾄﾞﾗﾑ撹拌完了
LD= DM287 #2             ; ModelIdentficationNumber
AND @MR2115              ; Y KDﾄﾞﾗﾑ撹拌完了
AND @MR4115              ; M KDﾄﾞﾗﾑ撹拌完了
AND @MR6115              ; C KDﾄﾞﾗﾑ撹拌完了
ORL
LD= DM287 #3             ; ModelIdentficationNumber
AND @MR2115              ; Y KDﾄﾞﾗﾑ撹拌完了
AND @MR4115              ; M KDﾄﾞﾗﾑ撹拌完了
AND @MR6115              ; C KDﾄﾞﾗﾑ撹拌完了
AND @MR8115              ; B KDﾄﾞﾗﾑ撹拌完了
ORL
@SET MR2901              ; KDﾄﾞﾗﾑ攪拌完了FLG
;<h1/>■■■  YELLOW  ■■■
LD R50004                ; TASKDO
LDB R50002               ; STEP
LD R50002                ; STEP
AND LR40102              ; STEP 注入UT
ORL
ANL
OR MR12014               ; 背面ｲﾝｸ吐出起動中
LDB R50004               ; TASKDO
AND R50007               ; 原点復帰　完了
LD MR1209                ; (Y) 照合要求FLG
OR MR1210                ; (Y) KDﾄﾞﾗﾑ交換検出FLG
LDB MR1209               ; (Y) 照合要求FLG
ANB MR1210               ; (Y) KDﾄﾞﾗﾑ交換検出FLG
LD MR1303                ; (Y) KDﾄﾞﾗﾑ攪拌要求
OR MR1304                ; (Y) ｻﾌﾞﾀﾝｸ攪拌要求
OR MR1305                ; (YELLOW)  ｲﾝｸ循環要求
ANL
ORL
ANL
ORL
ANB MR39911              ; ｻﾃﾗｲﾄ無し
ANB @MR1002              ; (Y) ｻﾌﾞﾀﾝｸ制御実行中
ANB MR1211               ; (Y) KDﾄﾞﾗﾑ攪拌中
ANB @MR2002              ; ｲﾝｸ供給中
ANB MR1212               ; (Y) ｻﾌﾞﾀﾝｸ攪拌中
ANB MR1213               ; (YELLOW)  ｲﾝｸ循環中
SET @MR1000              ; (Y) ｻﾌﾞﾀﾝｸ制御開始
STG @MR1000              ; (Y) ｻﾌﾞﾀﾝｸ制御開始
TMR @39 #1               ; (Y)制御開始ﾃﾞｨﾚｲ
CON
AND @T39                 ; (Y)制御開始ﾃﾞｨﾚｲ
SET @MR1002              ; (Y) ｻﾌﾞﾀﾝｸ制御実行中
CON
AND @MR1002              ; (Y) ｻﾌﾞﾀﾝｸ制御実行中
JMP @MR1003              ; 照合要求ﾁｪｯｸ
STG @MR1003              ; 照合要求ﾁｪｯｸ
MPS
ANB MR010                ; AP10 ON=BCR照合無効
MPS
LDB MR1209               ; (Y) 照合要求FLG
ANB MR1210               ; (Y) KDﾄﾞﾗﾑ交換検出FLG
ANL
JMP @MR1004
MRD
LD MR1209                ; (Y) 照合要求FLG
ANB MR1210               ; (Y) KDﾄﾞﾗﾑ交換検出FLG
ANL
JMP @MR1100              ; 初回ｺｰﾄﾞﾁｪｯｸ
MPP
AND MR1210               ; (Y) KDﾄﾞﾗﾑ交換検出FLG
JMP @MR1200              ; KDﾄﾞﾗﾑ交換ﾊﾞｰｺｰﾄﾞﾁｪｯｸ 1st
MPP
AND MR010                ; AP10 ON=BCR照合無効
RES MR1209               ; (Y) 照合要求FLG
CON
RES MR1210               ; (Y) KDﾄﾞﾗﾑ交換検出FLG
CON
JMP @MR1004
STG @MR1004
MPS
ANB LR1000               ; Yｻﾌﾞﾀﾝｸ無効
MPS
ANB R50003               ; HOME
MPS
ANB MR1303               ; (Y) KDﾄﾞﾗﾑ攪拌要求
JMP @MR1005
MPP
AND MR1303               ; (Y) KDﾄﾞﾗﾑ攪拌要求
JMP @MR1400              ; KDﾄﾞﾗﾑ撹拌
MPP
AND R50003               ; HOME
JMP @MR1012              ; HOME時処理へ
MPP
AND LR1000               ; Yｻﾌﾞﾀﾝｸ無効
RES MR1303               ; (Y) KDﾄﾞﾗﾑ攪拌要求
CON
RES MR1304               ; (Y) ｻﾌﾞﾀﾝｸ攪拌要求
CON
RES MR1305               ; (YELLOW)  ｲﾝｸ循環要求
CON
SET MR1302               ; (Y)ｻﾌﾞﾀﾝｸｲﾝｸ供給OK
CON
JMP @MR1015              ; 終了処理
STG @MR1012              ; HOME時処理へ
ANB @MR2002              ; ｲﾝｸ供給中
SET @MR2000              ; ｲﾝｸ供給制御
CON
JMP @MR1013
STG @MR1013
AND @MR2001              ; ｲﾝｸ供給完了
RES @MR2001              ; ｲﾝｸ供給完了
CON
JMP @MR1015              ; 終了処理
STG @MR1005
ANB @MR2002              ; ｲﾝｸ供給中
SET @MR2000              ; ｲﾝｸ供給制御
CON
JMP @MR1006
STG @MR1006
AND @MR2001              ; ｲﾝｸ供給完了
RES @MR2001              ; ｲﾝｸ供給完了
CON
JMP @MR1007
STG @MR1007
MPS
ANB MR1304               ; (Y) ｻﾌﾞﾀﾝｸ攪拌要求
JMP @MR1008
MPP
AND MR1304               ; (Y) ｻﾌﾞﾀﾝｸ攪拌要求
JMP @MR1600              ; ｻﾌﾞﾀﾝｸ撹拌
STG @MR1008
MPS
ANB MR1305               ; (YELLOW)  ｲﾝｸ循環要求
JMP @MR1015              ; 終了処理
MPP
AND MR1305               ; (YELLOW)  ｲﾝｸ循環要求
JMP @MR1700              ; ｲﾝｸ循環
;
STG @MR1015              ; 終了処理
RES @MR1002              ; (Y) ｻﾌﾞﾀﾝｸ制御実行中
CON
ENDS
;<h1/>  初回ﾊﾞｰｺｰﾄﾞ照合
;  Barcode check
STG @MR1100              ; 初回ｺｰﾄﾞﾁｪｯｸ
AND @MR9801              ; 全色ｲﾝｸｺｰﾄﾞ照合要求中
JMP @MR1101              ; Next step
STG @MR1101              ; Next step
ANB R50008               ; Error
JMP @MR1102              ; Next step
STG @MR1102              ; Next step
ANB MR1205               ; Y 照合中  
SET MR1200               ; Y 照合要求(HOME)
CON
JMP @MR1103              ; Next step
STG @MR1103              ; Next step
AND MR1204               ; Y 照合完了
RES MR1200               ; Y 照合要求(HOME)
CON
RES MR1204               ; Y 照合完了
CON
MPS
AND MR1207               ; Y 照合OK  
RES MR12103              ; ｲﾝｸ照合処理中
CON
RES MR1207               ; Y 照合OK  
CON
JMP @MR1108              ; ｻﾃﾗｲﾄ情報切替
MPP
AND MR1206               ; Y 照合異常
JMP @MR1104              ; 照合異常
;*** 照合NG
STG @MR1104              ; 照合異常
RES MR1206               ; Y 照合異常
CON
SET @MR104               ; Err79 ｲﾝｸ照合NG表示へ
CON
JMP @MR1105              ; Next step
STG @MR1105              ; Next step
AND @MR107               ; Err79 Release
RES @MR107               ; Err79 Release
CON
JMP @MR1106              ; Next step
STG @MR1106              ; Next step
JMP @MR1100              ; 初回ｺｰﾄﾞﾁｪｯｸ
;***
;ｻﾃﾗｲﾄ情報切替
STG @MR1108              ; ｻﾃﾗｲﾄ情報切替
MPS
AND R51300               ; Offline mode
JMP @MR1115              ; 終了処理
MPP
ANB R51300               ; Offline mode
JMP @MR1109
STG @MR1109
ANB B042                 ; Sub:ｻﾃﾗｲﾄ切替中
MPS
SET B040                 ; Sub:ｻﾃﾗｲﾄ切替開始
CON
JMP @MR1110
MRD
MOV #3 W0B               ; 色番号
MPP
BMOV DM257 W0D #6        ; Y InkCode1  Ink Code 1
STG @MR1110
AND B041                 ; Sub:ｻﾃﾗｲﾄ切替完了
RES B041                 ; Sub:ｻﾃﾗｲﾄ切替完了
CON
MPS
AND= W016 #20            ; Result Code
JMP @MR1115              ; 終了処理
MPP
AND<> W016 #20           ; Result Code
SET @MR108               ; Err186:ｻﾃﾗｲﾄ切替NG
CON
JMP @MR1111
STG @MR1111
AND @MR111               ; Err186 Release
RES @MR111               ; Err186 Release
CON
JMP @MR1112
STG @MR1112
JMP @MR1100              ; 初回ｺｰﾄﾞﾁｪｯｸ
;初回照合終了処理
STG @MR1115              ; 終了処理
RES MR1209               ; (Y) 照合要求FLG
CON
ANB MR1209               ; (Y) 照合要求FLG
SET MR1303               ; (Y) KDﾄﾞﾗﾑ攪拌要求
CON
SET MR1304               ; (Y) ｻﾌﾞﾀﾝｸ攪拌要求
CON
SET MR1305               ; (YELLOW)  ｲﾝｸ循環要求
CON
JMP @MR1015              ; 終了処理
;<h1/>　KDﾄﾞﾗﾑ交換ﾊﾞｰｺｰﾄﾞ照合
;　Barcode check for KD drum change
;1St check
STG @MR1200              ; KDﾄﾞﾗﾑ交換ﾊﾞｰｺｰﾄﾞﾁｪｯｸ 1st
ANB MR1102               ; BCR照合中
SET MR12103              ; ｲﾝｸ照合処理中
CON
SET @MR9900              ; Err75 Yｲﾝｸ照合表示へ
CON
JMP @MR1201
STG @MR1201
AND @MR9903              ; Err75 Release
RES @MR9903              ; Err75 Release
CON
JMP @MR1202              ; 1st照合
STG @MR1202              ; 1st照合
ANB MR1205               ; Y 照合中  
JMP @MR1203
STG @MR1203
SET MR1201               ; Y 照合要求(KD交換1)
CON
AND MR1205               ; Y 照合中  
JMP @MR1204
STG @MR1204
AND MR1204               ; Y 照合完了
MPS
AND MR1207               ; Y 照合OK  
RES MR12103              ; ｲﾝｸ照合処理中
CON
JMP @MR1208
MPP
AND MR1206               ; Y 照合異常
JMP @MR1205              ; 照合異常
;*** 照合NG
STG @MR1205              ; 照合異常
RES MR1201               ; Y 照合要求(KD交換1)
CON
RES MR1204               ; Y 照合完了
CON
RES MR1206               ; Y 照合異常
CON
SET @MR104               ; Err79 ｲﾝｸ照合NG表示へ
CON
JMP @MR1206
STG @MR1206
AND @MR107               ; Err79 Release
RES @MR107               ; Err79 Release
CON
JMP @MR1202              ; 1st照合
;***
;交換完了待ち
STG @MR1208
RES MR1201               ; Y 照合要求(KD交換1)
CON
RES MR1204               ; Y 照合完了
CON
RES MR1207               ; Y 照合OK  
CON
ANB MR1201               ; Y 照合要求(KD交換1)
ANB MR1204               ; Y 照合完了
ANB MR1207               ; Y 照合OK  
JMP @MR1209              ; KD交換完了待ち
STG @MR1209              ; KD交換完了待ち
AND MR12101              ; TPより交換終了SW
JMP @MR1300              ; KDﾄﾞﾗﾑ交換ﾊﾞｰｺｰﾄﾞﾁｪｯｸ 2nd
;2nd check
STG @MR1300              ; KDﾄﾞﾗﾑ交換ﾊﾞｰｺｰﾄﾞﾁｪｯｸ 2nd
ANB MR1102               ; BCR照合中
SET MR12103              ; ｲﾝｸ照合処理中
CON
SET @MR9900              ; Err75 Yｲﾝｸ照合表示へ
CON
JMP @MR1301
STG @MR1301
AND @MR9903              ; Err75 Release
RES @MR9903              ; Err75 Release
CON
JMP @MR1302              ; 2nd照合
STG @MR1302              ; 2nd照合
ANB MR1205               ; Y 照合中  
JMP @MR1303
STG @MR1303
SET MR1202               ; Y 照合要求(KD交換2)
CON
AND MR1205               ; Y 照合中  
JMP @MR1304
STG @MR1304
AND MR1204               ; Y 照合完了
MPS
AND MR1207               ; Y 照合OK  
RES MR12103              ; ｲﾝｸ照合処理中
CON
JMP @MR1308
MPP
AND MR1206               ; Y 照合異常
JMP @MR1305              ; 照合NG
;*** 照合NG
STG @MR1305              ; 照合NG
RES MR1202               ; Y 照合要求(KD交換2)
CON
RES MR1204               ; Y 照合完了
CON
RES MR1206               ; Y 照合異常
CON
SET @MR104               ; Err79 ｲﾝｸ照合NG表示へ
CON
JMP @MR1306
STG @MR1306
AND @MR107               ; Err79 Release
RES @MR107               ; Err79 Release
CON
JMP @MR1302              ; 2nd照合
;***
;交換完了表示
STG @MR1308
RES MR1202               ; Y 照合要求(KD交換2)
CON
RES MR1204               ; Y 照合完了
CON
RES MR1207               ; Y 照合OK  
CON
ANB MR1202               ; Y 照合要求(KD交換2)
ANB MR1204               ; Y 照合完了
ANB MR1207               ; Y 照合OK  
JMP @MR1309
STG @MR1309
SET @MR208               ; Err87
CON
JMP @MR1310
STG @MR1310
AND @MR215               ; Err87解除完了
RES @MR215               ; Err87解除完了
CON
JMP @MR1315              ; 終了処理
;交換照合終了処理
STG @MR1315              ; 終了処理
RES MR1210               ; (Y) KDﾄﾞﾗﾑ交換検出FLG
CON
SET MR1303               ; (Y) KDﾄﾞﾗﾑ攪拌要求
CON
JMP @MR1015              ; 終了処理
;<h1/>　KDﾄﾞﾗﾑ 撹拌
;　KD drum Bubbling
STG @MR1400              ; KDﾄﾞﾗﾑ撹拌
ANB MR1211               ; (Y) KDﾄﾞﾗﾑ攪拌中
SET @MR2100              ; KDﾄﾞﾗﾑ攪拌
CON
JMP @MR1401
STG @MR1401
AND @MR2101              ; KDﾄﾞﾗﾑ撹拌完了
RES MR1303               ; (Y) KDﾄﾞﾗﾑ攪拌要求
CON
RES MR1210               ; (Y) KDﾄﾞﾗﾑ交換検出FLG
CON
RES @MR2101              ; KDﾄﾞﾗﾑ撹拌完了
CON
JMP @MR1015              ; 終了処理
;<h1/>　ｻﾌﾞﾀﾝｸ 撹拌
;　Subtank Bubbling
STG @MR1600              ; ｻﾌﾞﾀﾝｸ撹拌
ANB MR1212               ; (Y) ｻﾌﾞﾀﾝｸ攪拌中
SET @MR2200              ; Yｻﾌﾞﾀﾝｸ撹拌
CON
JMP @MR1601
STG @MR1601
AND @MR2201              ; ｻﾌﾞﾀﾝｸ撹拌完了
RES MR1304               ; (Y) ｻﾌﾞﾀﾝｸ攪拌要求
CON
RES @MR2201              ; ｻﾌﾞﾀﾝｸ撹拌完了
CON
JMP @MR1015              ; 終了処理
;<h1/>　ｲﾝｸ循環
;　Ink Circuration
STG @MR1700              ; ｲﾝｸ循環
ANB DM753                ; (Y)連続循環中画面表示
SET @MR2300              ; Yｲﾝｸ循環
CON
JMP @MR1701
STG @MR1701
AND @MR2301              ; ｲﾝｸ循環完了 YELLOW
RES MR1305               ; (YELLOW)  ｲﾝｸ循環要求
CON
RES @MR2301              ; ｲﾝｸ循環完了 YELLOW
CON
JMP @MR1015              ; 終了処理
;<h1/>　　Subroutine
;ｲﾝｸ供給制御
;Ink suppy control
;<h1/>201412 液面検出変更
STG @MR2000              ; ｲﾝｸ供給制御
SET @MR2002              ; ｲﾝｸ供給中
CON
JMP @MR2003
STG @MR2003
MPS
LDB R4600                ; (Y)液面1(最下)ｲﾝｸｴﾝﾄﾞ
ORB R4601                ; (Y)液面2(中下)KDﾄﾞﾗﾑ交換
ANL
JMP @MR2004
MPP
LD R4600                 ; (Y)液面1(最下)ｲﾝｸｴﾝﾄﾞ
AND R4601                ; (Y)液面2(中下)KDﾄﾞﾗﾑ交換
ANL
RES MR6606               ; (Y) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
SET MR1302               ; (Y)ｻﾌﾞﾀﾝｸｲﾝｸ供給OK
CON
JMP @MR2007
STG @MR2004
SET MR1310               ; (Y)ｻﾌﾞﾀﾝｸ大気開放(Subtank)
CON
SET MR6600               ; (Y) ｻﾌﾞﾀﾝｸ ｲﾝｸ供給　開
CON
RES MR6601               ; (Y) ｻﾌﾞﾀﾝｸ撹拌
CON
RES MR6602               ; (Y) KDﾄﾞﾗﾑ撹拌 開
CON
SET MR6603               ; (Y) ｻﾌﾞﾀﾝｸ ｲﾝｸ開閉
CON
RES MR6604               ; (Y) ｻﾌﾞﾀﾝｸ 循環回収
CON
TMH @35 #10              ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T35                 ; ｳｴｲﾄﾀｲﾏｰ
JMP @MR2006
STG @MR2006
SET MR6606               ; (Y) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
LD R4600                 ; (Y)液面1(最下)ｲﾝｸｴﾝﾄﾞ
AND R4601                ; (Y)液面2(中下)KDﾄﾞﾗﾑ交換
AND R4602                ; (Y)液面3(中上)供給制御
OR MR1210                ; (Y) KDﾄﾞﾗﾑ交換検出FLG
OR @MR615                ; YｻﾌﾞﾀﾝｸHI検出表示中
ANL
TMR @36 #10              ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T36                 ; ｳｴｲﾄﾀｲﾏｰ
JMP @MR2007
STG @MR2007
RES MR6606               ; (Y) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
TMH @37 #10              ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T37                 ; ｳｴｲﾄﾀｲﾏｰ
RES MR1310               ; (Y)ｻﾌﾞﾀﾝｸ大気開放(Subtank)
CON
RES MR6600               ; (Y) ｻﾌﾞﾀﾝｸ ｲﾝｸ供給　開
CON
RES MR6603               ; (Y) ｻﾌﾞﾀﾝｸ ｲﾝｸ開閉
CON
JMP @MR2008
STG @MR2008
RES @MR2002              ; ｲﾝｸ供給中
CON
SET @MR2001              ; ｲﾝｸ供給完了
CON
ENDS
;KDﾄﾞﾗﾑ 撹拌
;KD drum Bubbling
STG @MR2100              ; KDﾄﾞﾗﾑ攪拌
MPS
DW.D #0 DM800            ; (Y)KDﾄﾞﾗﾑ撹拌設定時間
CON
JMP @MR2102              ; Next step
MRD
LD MR1300                ; (Y) 染料ｲﾝｸ
AND<> DM4008 #60         ; TP 切り替え画面No
ANL
MOV.D @T23 DM800         ; KDﾄﾞﾗﾑ染料攪拌時間  (Y)KDﾄﾞﾗﾑ撹拌設定時間
MPP
LD MR1301                ; (Y) 顔料ｲﾝｸ
OR= DM4008 #60           ; TP 切り替え画面No
ANL
MOV.D T89 DM800          ; KDﾄﾞﾗﾑ撹拌時間 Y (0.1s)  (Y)KDﾄﾞﾗﾑ撹拌設定時間
STG @MR2102              ; Next step
MPS
AND<> DM800 #0           ; (Y)KDﾄﾞﾗﾑ撹拌設定時間
SET MR1211               ; (Y) KDﾄﾞﾗﾑ攪拌中
CON
JMP @MR2103              ; Next step
MPP
AND= DM800 #0            ; (Y)KDﾄﾞﾗﾑ撹拌設定時間
DW.D #0 DM802            ; (Y)KDﾄﾞﾗﾑ撹拌実行時間(表示用)
CON
JMP @MR2106              ; Next step
STG @MR2103              ; Next step
RES MR6601               ; (Y) ｻﾌﾞﾀﾝｸ撹拌
CON
SET MR6602               ; (Y) KDﾄﾞﾗﾑ撹拌 開
CON
RES MR6603               ; (Y) ｻﾌﾞﾀﾝｸ ｲﾝｸ開閉
CON
JMP @MR2104              ; Next step
STG @MR2104              ; Next step
TMR @20 #10              ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T20                 ; ｳｴｲﾄﾀｲﾏｰ
SET MR6600               ; (Y) ｻﾌﾞﾀﾝｸ ｲﾝｸ供給　開
CON
SET MR6606               ; (Y) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
JMP @MR2105              ; Next step
STG @MR2105              ; Next step
MPS
LD MR1300                ; (Y) 染料ｲﾝｸ
AND<> DM4008 #60         ; TP 切り替え画面No
ANL
TMR @23 #0               ; KDﾄﾞﾗﾑ染料攪拌時間
CON
MPS
AND @T23                 ; KDﾄﾞﾗﾑ染料攪拌時間
JMP @MR2106              ; Next step
MPP
MOV.D @T23 DM802         ; KDﾄﾞﾗﾑ染料攪拌時間  (Y)KDﾄﾞﾗﾑ撹拌実行時間(表示用)
MRD
LD MR1301                ; (Y) 顔料ｲﾝｸ
OR= DM4008 #60           ; TP 切り替え画面No
ANL
TMR #89 #9999            ; KDﾄﾞﾗﾑ撹拌時間 Y (0.1s)
CON
MPS
AND T89                  ; KDﾄﾞﾗﾑ撹拌時間 Y (0.1s)
JMP @MR2106              ; Next step
MPP
MOV.D T89 DM802          ; KDﾄﾞﾗﾑ撹拌時間 Y (0.1s)  (Y)KDﾄﾞﾗﾑ撹拌実行時間(表示用)
MPP
LDB MR1300               ; (Y) 染料ｲﾝｸ
ANB MR1301               ; (Y) 顔料ｲﾝｸ
OR MR12115               ; ﾊﾞﾌﾞﾘﾝｸﾞ回避
ANL
JMP @MR2106              ; Next step
STG @MR2106              ; Next step
RES MR6606               ; (Y) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
TMR @24 #10              ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T24                 ; ｳｴｲﾄﾀｲﾏｰ
JMP @MR2107              ; Next step
STG @MR2107              ; Next step
RES MR6602               ; (Y) KDﾄﾞﾗﾑ撹拌 開
CON
RES MR6600               ; (Y) ｻﾌﾞﾀﾝｸ ｲﾝｸ供給　開
CON
RES MR1211               ; (Y) KDﾄﾞﾗﾑ攪拌中
CON
SET @MR2101              ; KDﾄﾞﾗﾑ撹拌完了
CON
ENDS
;ｻﾌﾞﾀﾝｸ 撹拌
;Subtank Bubbling
STG @MR2200              ; Yｻﾌﾞﾀﾝｸ撹拌
MPS
DW.D #0 DM816            ; (Y)ｻﾌﾞﾀﾝｸ撹拌設定時間
CON
JMP @MR2202              ; Next step
MRD
AND MR1300               ; (Y) 染料ｲﾝｸ
MOV.D @T28 DM816         ; ｻﾌﾞﾀﾝｸ染料攪拌時間  (Y)ｻﾌﾞﾀﾝｸ撹拌設定時間
MPP
AND MR1301               ; (Y) 顔料ｲﾝｸ
MOV.D T93 DM816          ; ｻﾌﾞﾀﾝｸ撹拌時間 Y (0.1s)  (Y)ｻﾌﾞﾀﾝｸ撹拌設定時間
STG @MR2202              ; Next step
MPS
AND<> DM816 #0           ; (Y)ｻﾌﾞﾀﾝｸ撹拌設定時間
SET MR1212               ; (Y) ｻﾌﾞﾀﾝｸ攪拌中
CON
JMP @MR2203              ; Next step
MPP
AND= DM816 #0            ; (Y)ｻﾌﾞﾀﾝｸ撹拌設定時間
DW.D #0 DM818            ; (Y)ｻﾌﾞﾀﾝｸ撹拌実行時間(表示用)
CON
JMP @MR2206              ; Next step
STG @MR2203              ; Next step
RES MR6600               ; (Y) ｻﾌﾞﾀﾝｸ ｲﾝｸ供給　開
CON
RES MR6602               ; (Y) KDﾄﾞﾗﾑ撹拌 開
CON
SET MR6603               ; (Y) ｻﾌﾞﾀﾝｸ ｲﾝｸ開閉
CON
JMP @MR2204              ; Next step
STG @MR2204              ; Next step
TMR @25 #10              ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T25                 ; ｳｴｲﾄﾀｲﾏｰ
SET MR6601               ; (Y) ｻﾌﾞﾀﾝｸ撹拌
CON
SET MR6606               ; (Y) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
JMP @MR2205              ; Next step
STG @MR2205              ; Next step
MPS
AND MR1300               ; (Y) 染料ｲﾝｸ
MPS
TMR @28 #0               ; ｻﾌﾞﾀﾝｸ染料攪拌時間
CON
AND @T28                 ; ｻﾌﾞﾀﾝｸ染料攪拌時間
JMP @MR2206              ; Next step
MPP
MOV.D @T28 DM818         ; ｻﾌﾞﾀﾝｸ染料攪拌時間  (Y)ｻﾌﾞﾀﾝｸ撹拌実行時間(表示用)
MRD
AND MR1301               ; (Y) 顔料ｲﾝｸ
MPS
TMR #93 #9999            ; ｻﾌﾞﾀﾝｸ撹拌時間 Y (0.1s)
CON
AND T93                  ; ｻﾌﾞﾀﾝｸ撹拌時間 Y (0.1s)
JMP @MR2206              ; Next step
MPP
MOV.D T93 DM818          ; ｻﾌﾞﾀﾝｸ撹拌時間 Y (0.1s)  (Y)ｻﾌﾞﾀﾝｸ撹拌実行時間(表示用)
MPP
LDB MR1300               ; (Y) 染料ｲﾝｸ
ANB MR1301               ; (Y) 顔料ｲﾝｸ
OR MR12115               ; ﾊﾞﾌﾞﾘﾝｸﾞ回避
ANL
JMP @MR2206              ; Next step
STG @MR2206              ; Next step
RES MR6606               ; (Y) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
TMR @29 #10              ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T29                 ; ｳｴｲﾄﾀｲﾏｰ
JMP @MR2207              ; Next step
STG @MR2207              ; Next step
RES MR6603               ; (Y) ｻﾌﾞﾀﾝｸ ｲﾝｸ開閉
CON
RES MR6601               ; (Y) ｻﾌﾞﾀﾝｸ撹拌
CON
RES MR1212               ; (Y) ｻﾌﾞﾀﾝｸ攪拌中
CON
SET @MR2201              ; ｻﾌﾞﾀﾝｸ撹拌完了
CON
ENDS
;ｲﾝｸ循環
;Ink Circulation
STG @MR2300              ; Yｲﾝｸ循環
MPS
SET MR1213               ; (YELLOW)  ｲﾝｸ循環中
CON
JMP @MR2302              ; Next step
MPP
MOV #0 DM750             ; (Y)ｲﾝｸ循環回数
STG @MR2302              ; Next step
SET DM753                ; (Y)連続循環中画面表示
CON
@INC DM750               ; (Y)ｲﾝｸ循環回数
CON
JMP @MR2303              ; Next step
STG @MR2303              ; Next step
TMR @30 #5               ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T30                 ; ｳｴｲﾄﾀｲﾏｰ
AND R4110                ; ﾃﾞｼｹｰﾀｰ内 圧力検出1(ﾓｼﾞｭｰﾙ用)
AND R4111                ; ﾃﾞｼｹｰﾀｰ内 圧力検出2(ﾓｼﾞｭｰﾙ用)
ANB MR36314              ; ﾌﾟﾗﾝｼﾞｬｰ1(Y) 吐出引込実行中
ANB MR36315              ; ﾌﾟﾗﾝｼﾞｬｰ1(Y)  吐出引込call完了
SET MR36300              ; ﾌﾟﾗﾝｼﾞｬｰ1(Y)  吐出引込call FLG
CON
JMP @MR2304              ; Next step
STG @MR2304              ; Next step
AND MR36315              ; ﾌﾟﾗﾝｼﾞｬｰ1(Y)  吐出引込call完了
RES MR36315              ; ﾌﾟﾗﾝｼﾞｬｰ1(Y)  吐出引込call完了
CON
JMP @MR2305              ; Next step
STG @MR2305              ; Next step
MPS
LD< DM750 DM751          ; (Y)ｲﾝｸ循環回数  (Y)ｲﾝｸ循環回数(設定値)
ANB MR12115              ; ﾊﾞﾌﾞﾘﾝｸﾞ回避
ANL
JMP @MR2302              ; Next step
MPP
LD>= DM750 DM751         ; (Y)ｲﾝｸ循環回数  (Y)ｲﾝｸ循環回数(設定値)
OR MR12115               ; ﾊﾞﾌﾞﾘﾝｸﾞ回避
ANL
JMP @MR2306              ; Next step
STG @MR2306              ; Next step
RES DM753                ; (Y)連続循環中画面表示
CON
RES MR1213               ; (YELLOW)  ｲﾝｸ循環中
CON
SET @MR2301              ; ｲﾝｸ循環完了 YELLOW
CON
ENDS
;<h1/>■■■  MAGENTA  ■■■
LD R50004                ; TASKDO
LDB R50002               ; STEP
LD R50002                ; STEP
AND LR40102              ; STEP 注入UT
ORL
ANL
OR MR12014               ; 背面ｲﾝｸ吐出起動中
LDB R50004               ; TASKDO
AND R50007               ; 原点復帰　完了
LD MR1409                ; (M) 照合要求FLG
OR MR1410                ; (M) KDﾄﾞﾗﾑ交換検出FLG
LDB MR1409               ; (M) 照合要求FLG
ANB MR1410               ; (M) KDﾄﾞﾗﾑ交換検出FLG
LD MR1503                ; (M) KDﾄﾞﾗﾑ攪拌要求
OR MR1504                ; (M) ｻﾌﾞﾀﾝｸ攪拌要求
OR MR1505                ; (MAGENTA) ｲﾝｸ循環要求
ANL
ORL
ANL
ORL
ANB MR39911              ; ｻﾃﾗｲﾄ無し
ANB @MR3002              ; (M) ｻﾌﾞﾀﾝｸ制御実行中
ANB MR1411               ; (M) KDﾄﾞﾗﾑ攪拌中
ANB @MR4002              ; ｲﾝｸ供給中
ANB MR1412               ; (M) ｻﾌﾞﾀﾝｸ攪拌中
ANB MR1413               ; (MAGENTA) ｲﾝｸ循環中
SET @MR3000              ; (M) ｻﾌﾞﾀﾝｸ制御開始
STG @MR3000              ; (M) ｻﾌﾞﾀﾝｸ制御開始
SET @MR3002              ; (M) ｻﾌﾞﾀﾝｸ制御実行中
CON
AND @MR3002              ; (M) ｻﾌﾞﾀﾝｸ制御実行中
TMR @59 #2               ; (M)制御開始ﾃﾞｨﾚｲ
CON
AND @T59                 ; (M)制御開始ﾃﾞｨﾚｲ
JMP @MR3003              ; 照合要求ﾁｪｯｸ
STG @MR3003              ; 照合要求ﾁｪｯｸ
MPS
ANB MR010                ; AP10 ON=BCR照合無効
MPS
LDB MR1409               ; (M) 照合要求FLG
ANB MR1410               ; (M) KDﾄﾞﾗﾑ交換検出FLG
ANL
JMP @MR3004
MRD
LD MR1409                ; (M) 照合要求FLG
ANB MR1410               ; (M) KDﾄﾞﾗﾑ交換検出FLG
ANL
JMP @MR3100              ; 初回ｺｰﾄﾞﾁｪｯｸ
MPP
AND MR1410               ; (M) KDﾄﾞﾗﾑ交換検出FLG
JMP @MR3200              ; KDﾄﾞﾗﾑ交換ﾊﾞｰｺｰﾄﾞﾁｪｯｸ 1st
MPP
AND MR010                ; AP10 ON=BCR照合無効
RES MR1409               ; (M) 照合要求FLG
CON
RES MR1410               ; (M) KDﾄﾞﾗﾑ交換検出FLG
CON
JMP @MR3004
STG @MR3004
MPS
ANB LR1001               ; Mｻﾌﾞﾀﾝｸ無効
MPS
ANB R50003               ; HOME
MPS
ANB MR1503               ; (M) KDﾄﾞﾗﾑ攪拌要求
JMP @MR3005
MPP
AND MR1503               ; (M) KDﾄﾞﾗﾑ攪拌要求
JMP @MR3400              ; KDﾄﾞﾗﾑ撹拌
MPP
AND R50003               ; HOME
JMP @MR3012              ; HOME時処理へ
MPP
AND LR1001               ; Mｻﾌﾞﾀﾝｸ無効
RES MR1503               ; (M) KDﾄﾞﾗﾑ攪拌要求
CON
RES MR1504               ; (M) ｻﾌﾞﾀﾝｸ攪拌要求
CON
RES MR1505               ; (MAGENTA) ｲﾝｸ循環要求
CON
SET MR1502               ; (M)ｻﾌﾞﾀﾝｸｲﾝｸ供給OK
CON
JMP @MR3015              ; 終了処理
STG @MR3012              ; HOME時処理へ
ANB @MR4002              ; ｲﾝｸ供給中
SET @MR4000              ; ｲﾝｸ供給制御
CON
JMP @MR3013
STG @MR3013
AND @MR4001              ; ｲﾝｸ供給完了
RES @MR4001              ; ｲﾝｸ供給完了
CON
JMP @MR3015              ; 終了処理
STG @MR3005
ANB @MR4002              ; ｲﾝｸ供給中
SET @MR4000              ; ｲﾝｸ供給制御
CON
JMP @MR3006
STG @MR3006
AND @MR4001              ; ｲﾝｸ供給完了
RES @MR4001              ; ｲﾝｸ供給完了
CON
JMP @MR3007
STG @MR3007
MPS
ANB MR1504               ; (M) ｻﾌﾞﾀﾝｸ攪拌要求
JMP @MR3008
MPP
AND MR1504               ; (M) ｻﾌﾞﾀﾝｸ攪拌要求
JMP @MR3600              ; ｻﾌﾞﾀﾝｸ撹拌
STG @MR3008
MPS
ANB MR1505               ; (MAGENTA) ｲﾝｸ循環要求
JMP @MR3015              ; 終了処理
MPP
AND MR1505               ; (MAGENTA) ｲﾝｸ循環要求
JMP @MR3700              ; ｲﾝｸ循環
;
STG @MR3015              ; 終了処理
RES @MR3002              ; (M) ｻﾌﾞﾀﾝｸ制御実行中
CON
ENDS
;<h1/>  初回ﾊﾞｰｺｰﾄﾞ照合
;  Barcode check
STG @MR3100              ; 初回ｺｰﾄﾞﾁｪｯｸ
AND @MR9801              ; 全色ｲﾝｸｺｰﾄﾞ照合要求中
JMP @MR3101              ; Next step
STG @MR3101              ; Next step
ANB R50008               ; Error
JMP @MR3102              ; Next step
STG @MR3102              ; Next step
ANB MR1405               ; M 照合中  
SET MR1400               ; M 照合要求(HOME)
CON
JMP @MR3103              ; Next step
STG @MR3103              ; Next step
AND MR1404               ; M 照合完了
RES MR1400               ; M 照合要求(HOME)
CON
RES MR1404               ; M 照合完了
CON
MPS
AND MR1407               ; M 照合OK  
RES MR12103              ; ｲﾝｸ照合処理中
CON
RES MR1407               ; M 照合OK  
CON
JMP @MR3108              ; ｻﾃﾗｲﾄ情報切替
MPP
AND MR1406               ; M 照合異常
JMP @MR3104              ; 照合異常
;*** 照合NG
STG @MR3104              ; 照合異常
RES MR1406               ; M 照合異常
CON
SET @MR104               ; Err79 ｲﾝｸ照合NG表示へ
CON
JMP @MR3105              ; Next step
STG @MR3105              ; Next step
AND @MR107               ; Err79 Release
RES @MR107               ; Err79 Release
CON
JMP @MR3106              ; Next step
STG @MR3106              ; Next step
JMP @MR3100              ; 初回ｺｰﾄﾞﾁｪｯｸ
;***
;ｻﾃﾗｲﾄ情報切替
STG @MR3108              ; ｻﾃﾗｲﾄ情報切替
MPS
AND R51300               ; Offline mode
JMP @MR3115              ; 終了処理
MPP
ANB R51300               ; Offline mode
JMP @MR3109
STG @MR3109
ANB B042                 ; Sub:ｻﾃﾗｲﾄ切替中
MPS
SET B040                 ; Sub:ｻﾃﾗｲﾄ切替開始
CON
JMP @MR3110
MRD
MOV #2 W0B               ; 色番号
MPP
BMOV DM241 W0D #6        ; M InkCode1  Ink Code 1
STG @MR3110
AND B041                 ; Sub:ｻﾃﾗｲﾄ切替完了
RES B041                 ; Sub:ｻﾃﾗｲﾄ切替完了
CON
MPS
AND= W016 #20            ; Result Code
JMP @MR3115              ; 終了処理
MPP
AND<> W016 #20           ; Result Code
SET @MR108               ; Err186:ｻﾃﾗｲﾄ切替NG
CON
JMP @MR3111
STG @MR3111
AND @MR111               ; Err186 Release
RES @MR111               ; Err186 Release
CON
JMP @MR3112
STG @MR3112
JMP @MR3100              ; 初回ｺｰﾄﾞﾁｪｯｸ
;初回照合終了処理
STG @MR3115              ; 終了処理
RES MR1409               ; (M) 照合要求FLG
CON
ANB MR1409               ; (M) 照合要求FLG
SET MR1503               ; (M) KDﾄﾞﾗﾑ攪拌要求
CON
SET MR1504               ; (M) ｻﾌﾞﾀﾝｸ攪拌要求
CON
SET MR1505               ; (MAGENTA) ｲﾝｸ循環要求
CON
JMP @MR3015              ; 終了処理
;<h1/>　KDﾄﾞﾗﾑ交換ﾊﾞｰｺｰﾄﾞ照合
;　Barcode check for KD drum change
;1St check
STG @MR3200              ; KDﾄﾞﾗﾑ交換ﾊﾞｰｺｰﾄﾞﾁｪｯｸ 1st
ANB MR1102               ; BCR照合中
SET MR12103              ; ｲﾝｸ照合処理中
CON
SET @MR9904              ; Err76 Mｲﾝｸ照合表示へ
CON
JMP @MR3201
STG @MR3201
AND @MR9907              ; Err76 Release
RES @MR9907              ; Err76 Release
CON
JMP @MR3202              ; 1st照合
STG @MR3202              ; 1st照合
ANB MR1405               ; M 照合中  
JMP @MR3203
STG @MR3203
SET MR1401               ; M 照合要求(KD交換1)
CON
AND MR1405               ; M 照合中  
JMP @MR3204
STG @MR3204
AND MR1404               ; M 照合完了
MPS
AND MR1407               ; M 照合OK  
RES MR12103              ; ｲﾝｸ照合処理中
CON
JMP @MR3208
MPP
AND MR1406               ; M 照合異常
JMP @MR3205              ; 照合異常
;*** 照合NG
STG @MR3205              ; 照合異常
RES MR1401               ; M 照合要求(KD交換1)
CON
RES MR1404               ; M 照合完了
CON
RES MR1406               ; M 照合異常
CON
SET @MR104               ; Err79 ｲﾝｸ照合NG表示へ
CON
JMP @MR3206
STG @MR3206
AND @MR107               ; Err79 Release
RES @MR107               ; Err79 Release
CON
JMP @MR3202              ; 1st照合
;***
;交換完了待ち
STG @MR3208
RES MR1401               ; M 照合要求(KD交換1)
CON
RES MR1404               ; M 照合完了
CON
RES MR1407               ; M 照合OK  
CON
ANB MR1401               ; M 照合要求(KD交換1)
ANB MR1404               ; M 照合完了
ANB MR1407               ; M 照合OK  
JMP @MR3209              ; KD交換完了待ち
STG @MR3209              ; KD交換完了待ち
AND MR12101              ; TPより交換終了SW
JMP @MR3300              ; KDﾄﾞﾗﾑ交換ﾊﾞｰｺｰﾄﾞﾁｪｯｸ 2nd
;2nd check
STG @MR3300              ; KDﾄﾞﾗﾑ交換ﾊﾞｰｺｰﾄﾞﾁｪｯｸ 2nd
ANB MR1102               ; BCR照合中
SET MR12103              ; ｲﾝｸ照合処理中
CON
SET @MR9904              ; Err76 Mｲﾝｸ照合表示へ
CON
JMP @MR3301
STG @MR3301
AND @MR9907              ; Err76 Release
RES @MR9907              ; Err76 Release
CON
JMP @MR3302              ; 2nd照合
STG @MR3302              ; 2nd照合
ANB MR1405               ; M 照合中  
JMP @MR3303
STG @MR3303
SET MR1402               ; M 照合要求(KD交換2)
CON
AND MR1405               ; M 照合中  
JMP @MR3304
STG @MR3304
AND MR1404               ; M 照合完了
MPS
AND MR1407               ; M 照合OK  
RES MR12103              ; ｲﾝｸ照合処理中
CON
JMP @MR3308
MPP
AND MR1406               ; M 照合異常
JMP @MR3305              ; 照合NG
;*** 照合NG
STG @MR3305              ; 照合NG
RES MR1402               ; M 照合要求(KD交換2)
CON
RES MR1404               ; M 照合完了
CON
RES MR1406               ; M 照合異常
CON
SET @MR104               ; Err79 ｲﾝｸ照合NG表示へ
CON
JMP @MR3306
STG @MR3306
AND @MR107               ; Err79 Release
RES @MR107               ; Err79 Release
CON
JMP @MR3302              ; 2nd照合
;***
;交換完了表示
STG @MR3308
RES MR1402               ; M 照合要求(KD交換2)
CON
RES MR1404               ; M 照合完了
CON
RES MR1407               ; M 照合OK  
CON
ANB MR1402               ; M 照合要求(KD交換2)
ANB MR1404               ; M 照合完了
ANB MR1407               ; M 照合OK  
JMP @MR3309
STG @MR3309
SET @MR308               ; Err89
CON
JMP @MR3310
STG @MR3310
AND @MR315               ; Err89解除完了
RES @MR315               ; Err89解除完了
CON
JMP @MR3315              ; 終了処理
;交換照合終了処理
STG @MR3315              ; 終了処理
RES MR1410               ; (M) KDﾄﾞﾗﾑ交換検出FLG
CON
SET MR1503               ; (M) KDﾄﾞﾗﾑ攪拌要求
CON
JMP @MR3015              ; 終了処理
;<h1/>　KDﾄﾞﾗﾑ 撹拌
;　KD drum Bubbling
STG @MR3400              ; KDﾄﾞﾗﾑ撹拌
ANB MR1411               ; (M) KDﾄﾞﾗﾑ攪拌中
SET @MR4100              ; KDﾄﾞﾗﾑ攪拌
CON
JMP @MR3401
STG @MR3401
AND @MR4101              ; KDﾄﾞﾗﾑ撹拌完了
RES @MR4101              ; KDﾄﾞﾗﾑ撹拌完了
CON
JMP @MR3402
STG @MR3402
RES MR1503               ; (M) KDﾄﾞﾗﾑ攪拌要求
CON
ANB MR1503               ; (M) KDﾄﾞﾗﾑ攪拌要求
TMR @58 #10              ; ｳｪｲﾄ
CON
AND @T58                 ; ｳｪｲﾄ
JMP @MR3403
STG @MR3403
RES MR1410               ; (M) KDﾄﾞﾗﾑ交換検出FLG
CON
JMP @MR3015              ; 終了処理
;<h1/>　ｻﾌﾞﾀﾝｸ 撹拌
;　Subtank Bubbling
STG @MR3600              ; ｻﾌﾞﾀﾝｸ撹拌
ANB MR1412               ; (M) ｻﾌﾞﾀﾝｸ攪拌中
SET @MR4200              ; ｻﾌﾞﾀﾝｸ撹拌
CON
JMP @MR3601
STG @MR3601
AND @MR4201              ; ｻﾌﾞﾀﾝｸ撹拌完了
RES MR1504               ; (M) ｻﾌﾞﾀﾝｸ攪拌要求
CON
RES @MR4201              ; ｻﾌﾞﾀﾝｸ撹拌完了
CON
JMP @MR3015              ; 終了処理
;<h1/>　ｲﾝｸ循環
;　Ink Circuration
STG @MR3700              ; ｲﾝｸ循環
ANB DM763                ; (M)連続循環中画面表示
SET @MR4300              ; Mｲﾝｸ循環
CON
JMP @MR3701
STG @MR3701
AND @MR4301              ; ｲﾝｸ循環完了 MAGENTA
RES MR1505               ; (MAGENTA) ｲﾝｸ循環要求
CON
RES @MR4301              ; ｲﾝｸ循環完了 MAGENTA
CON
JMP @MR3015              ; 終了処理
;<h1/>　　Subroutine
;ｲﾝｸ供給制御
;Ink suppy control
;<h1/>201412 液面検出変更
STG @MR4000              ; ｲﾝｸ供給制御
SET @MR4002              ; ｲﾝｸ供給中
CON
JMP @MR4003
STG @MR4003
MPS
LDB R4608                ; (M)液面1(最下)ｲﾝｸｴﾝﾄﾞ
ORB R4609                ; (M)液面2(中下)KDﾄﾞﾗﾑ交換
ANL
JMP @MR4004
MPP
LD R4608                 ; (M)液面1(最下)ｲﾝｸｴﾝﾄﾞ
AND R4609                ; (M)液面2(中下)KDﾄﾞﾗﾑ交換
ANL
RES MR6614               ; (M) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
SET MR1502               ; (M)ｻﾌﾞﾀﾝｸｲﾝｸ供給OK
CON
JMP @MR4007
STG @MR4004
SET MR1510               ; (M)ｻﾌﾞﾀﾝｸ大気開放(Subtank)
CON
SET MR6608               ; (M) ｻﾌﾞﾀﾝｸ ｲﾝｸ供給　開
CON
RES MR6609               ; (M) ｻﾌﾞﾀﾝｸ撹拌
CON
RES MR6610               ; (M) KDﾄﾞﾗﾑ撹拌 開
CON
SET MR6611               ; (M) ｻﾌﾞﾀﾝｸ ｲﾝｸ開閉
CON
RES MR6612               ; (M) ｻﾌﾞﾀﾝｸ 循環回収
CON
TMH @55 #10              ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T55                 ; ｳｴｲﾄﾀｲﾏｰ
JMP @MR4006
STG @MR4006
SET MR6614               ; (M) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
LD R4608                 ; (M)液面1(最下)ｲﾝｸｴﾝﾄﾞ
AND R4609                ; (M)液面2(中下)KDﾄﾞﾗﾑ交換
AND R4610                ; (M)液面3(中上)供給制御
OR MR1410                ; (M) KDﾄﾞﾗﾑ交換検出FLG
OR @MR715                ; MｻﾌﾞﾀﾝｸHI検出表示中
ANL
TMR @56 #10              ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T56                 ; ｳｴｲﾄﾀｲﾏｰ
JMP @MR4007
STG @MR4007
RES MR6614               ; (M) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
TMH @57 #10              ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T57                 ; ｳｴｲﾄﾀｲﾏｰ
RES MR1510               ; (M)ｻﾌﾞﾀﾝｸ大気開放(Subtank)
CON
RES MR6608               ; (M) ｻﾌﾞﾀﾝｸ ｲﾝｸ供給　開
CON
RES MR6611               ; (M) ｻﾌﾞﾀﾝｸ ｲﾝｸ開閉
CON
JMP @MR4008
STG @MR4008
RES @MR4002              ; ｲﾝｸ供給中
CON
SET @MR4001              ; ｲﾝｸ供給完了
CON
ENDS
;KDﾄﾞﾗﾑ 撹拌
;KD drum Bubbling
STG @MR4100              ; KDﾄﾞﾗﾑ攪拌
MPS
DW.D #0 DM804            ; (M)KDﾄﾞﾗﾑ撹拌設定時間
CON
JMP @MR4102              ; Next step
MRD
LD MR1500                ; (M) 染料ｲﾝｸ
AND<> DM4008 #60         ; TP 切り替え画面No
ANL
MOV.D @T43 DM804         ; KDﾄﾞﾗﾑ染料攪拌時間  (M)KDﾄﾞﾗﾑ撹拌設定時間
MPP
LD MR1501                ; (M) 顔料ｲﾝｸ
OR= DM4008 #60           ; TP 切り替え画面No
ANL
MOV.D T90 DM804          ; KDﾄﾞﾗﾑ撹拌時間 M (0.1s)  (M)KDﾄﾞﾗﾑ撹拌設定時間
STG @MR4102              ; Next step
MPS
AND<> DM804 #0           ; (M)KDﾄﾞﾗﾑ撹拌設定時間
SET MR1411               ; (M) KDﾄﾞﾗﾑ攪拌中
CON
JMP @MR4103              ; Next step
MPP
AND= DM804 #0            ; (M)KDﾄﾞﾗﾑ撹拌設定時間
DW.D #0 DM806            ; (M)KDﾄﾞﾗﾑ撹拌実行時間(表示用)
CON
JMP @MR4106              ; Next step
STG @MR4103              ; Next step
RES MR6609               ; (M) ｻﾌﾞﾀﾝｸ撹拌
CON
SET MR6610               ; (M) KDﾄﾞﾗﾑ撹拌 開
CON
RES MR6611               ; (M) ｻﾌﾞﾀﾝｸ ｲﾝｸ開閉
CON
JMP @MR4104              ; Next step
STG @MR4104              ; Next step
TMR @40 #10              ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T40                 ; ｳｴｲﾄﾀｲﾏｰ
SET MR6608               ; (M) ｻﾌﾞﾀﾝｸ ｲﾝｸ供給　開
CON
SET MR6614               ; (M) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
JMP @MR4105              ; Next step
STG @MR4105              ; Next step
MPS
LD MR1500                ; (M) 染料ｲﾝｸ
AND<> DM4008 #60         ; TP 切り替え画面No
ANL
MPS
TMR @43 #0               ; KDﾄﾞﾗﾑ染料攪拌時間
CON
AND @T43                 ; KDﾄﾞﾗﾑ染料攪拌時間
JMP @MR4106              ; Next step
MPP
MOV.D @T43 DM806         ; KDﾄﾞﾗﾑ染料攪拌時間  (M)KDﾄﾞﾗﾑ撹拌実行時間(表示用)
MRD
LD MR1501                ; (M) 顔料ｲﾝｸ
OR= DM4008 #60           ; TP 切り替え画面No
ANL
MPS
TMR #90 #9999            ; KDﾄﾞﾗﾑ撹拌時間 M (0.1s)
CON
AND T90                  ; KDﾄﾞﾗﾑ撹拌時間 M (0.1s)
JMP @MR4106              ; Next step
MPP
MOV.D T90 DM806          ; KDﾄﾞﾗﾑ撹拌時間 M (0.1s)  (M)KDﾄﾞﾗﾑ撹拌実行時間(表示用)
MPP
LDB MR1500               ; (M) 染料ｲﾝｸ
ANB MR1501               ; (M) 顔料ｲﾝｸ
OR MR12115               ; ﾊﾞﾌﾞﾘﾝｸﾞ回避
ANL
JMP @MR4106              ; Next step
STG @MR4106              ; Next step
RES MR6614               ; (M) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
TMR @44 #10              ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T44                 ; ｳｴｲﾄﾀｲﾏｰ
JMP @MR4107              ; Next step
STG @MR4107              ; Next step
RES MR6610               ; (M) KDﾄﾞﾗﾑ撹拌 開
CON
RES MR6608               ; (M) ｻﾌﾞﾀﾝｸ ｲﾝｸ供給　開
CON
RES MR1411               ; (M) KDﾄﾞﾗﾑ攪拌中
CON
SET @MR4101              ; KDﾄﾞﾗﾑ撹拌完了
CON
ENDS
;ｻﾌﾞﾀﾝｸ 撹拌
;Subtank Bubbling
STG @MR4200              ; ｻﾌﾞﾀﾝｸ撹拌
MPS
DW.D #0 DM820            ; (M)ｻﾌﾞﾀﾝｸ撹拌設定時間
CON
JMP @MR4202              ; Next step
MRD
AND MR1500               ; (M) 染料ｲﾝｸ
MOV.D @T48 DM820         ; ｻﾌﾞﾀﾝｸ染料攪拌時間  (M)ｻﾌﾞﾀﾝｸ撹拌設定時間
MPP
AND MR1501               ; (M) 顔料ｲﾝｸ
MOV.D T94 DM820          ; ｻﾌﾞﾀﾝｸ撹拌時間 M (0.1s)  (M)ｻﾌﾞﾀﾝｸ撹拌設定時間
STG @MR4202              ; Next step
MPS
AND<> DM820 #0           ; (M)ｻﾌﾞﾀﾝｸ撹拌設定時間
SET MR1412               ; (M) ｻﾌﾞﾀﾝｸ攪拌中
CON
JMP @MR4203              ; Next step
MPP
AND= DM820 #0            ; (M)ｻﾌﾞﾀﾝｸ撹拌設定時間
DW.D #0 DM822            ; (M)ｻﾌﾞﾀﾝｸ撹拌実行時間(表示用)
CON
JMP @MR4206              ; Next step
STG @MR4203              ; Next step
RES MR6608               ; (M) ｻﾌﾞﾀﾝｸ ｲﾝｸ供給　開
CON
RES MR6610               ; (M) KDﾄﾞﾗﾑ撹拌 開
CON
SET MR6611               ; (M) ｻﾌﾞﾀﾝｸ ｲﾝｸ開閉
CON
JMP @MR4204              ; Next step
STG @MR4204              ; Next step
TMR @45 #10              ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T45                 ; ｳｴｲﾄﾀｲﾏｰ
SET MR6609               ; (M) ｻﾌﾞﾀﾝｸ撹拌
CON
SET MR6614               ; (M) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
JMP @MR4205              ; Next step
STG @MR4205              ; Next step
MPS
AND MR1500               ; (M) 染料ｲﾝｸ
MPS
TMR @48 #0               ; ｻﾌﾞﾀﾝｸ染料攪拌時間
CON
AND @T48                 ; ｻﾌﾞﾀﾝｸ染料攪拌時間
JMP @MR4206              ; Next step
MPP
MOV.D @T48 DM822         ; ｻﾌﾞﾀﾝｸ染料攪拌時間  (M)ｻﾌﾞﾀﾝｸ撹拌実行時間(表示用)
MRD
AND MR1501               ; (M) 顔料ｲﾝｸ
MPS
TMR #94 #9999            ; ｻﾌﾞﾀﾝｸ撹拌時間 M (0.1s)
CON
AND T94                  ; ｻﾌﾞﾀﾝｸ撹拌時間 M (0.1s)
JMP @MR4206              ; Next step
MPP
MOV.D T94 DM822          ; ｻﾌﾞﾀﾝｸ撹拌時間 M (0.1s)  (M)ｻﾌﾞﾀﾝｸ撹拌実行時間(表示用)
MPP
LDB MR1500               ; (M) 染料ｲﾝｸ
ANB MR1501               ; (M) 顔料ｲﾝｸ
OR MR12115               ; ﾊﾞﾌﾞﾘﾝｸﾞ回避
ANL
JMP @MR4206              ; Next step
STG @MR4206              ; Next step
RES MR6614               ; (M) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
TMR @49 #10              ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T49                 ; ｳｴｲﾄﾀｲﾏｰ
JMP @MR4207              ; Next step
STG @MR4207              ; Next step
RES MR6611               ; (M) ｻﾌﾞﾀﾝｸ ｲﾝｸ開閉
CON
RES MR6609               ; (M) ｻﾌﾞﾀﾝｸ撹拌
CON
RES MR1412               ; (M) ｻﾌﾞﾀﾝｸ攪拌中
CON
SET @MR4201              ; ｻﾌﾞﾀﾝｸ撹拌完了
CON
ENDS
;ｲﾝｸ循環
;Ink Circulation
STG @MR4300              ; Mｲﾝｸ循環
MPS
SET MR1413               ; (MAGENTA) ｲﾝｸ循環中
CON
JMP @MR4302              ; Next step
MPP
MOV #0 DM760             ; (M)ｲﾝｸ循環回数
STG @MR4302              ; Next step
SET DM763                ; (M)連続循環中画面表示
CON
@INC DM760               ; (M)ｲﾝｸ循環回数
CON
JMP @MR4303              ; Next step
STG @MR4303              ; Next step
TMR @50 #5               ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T50                 ; ｳｴｲﾄﾀｲﾏｰ
AND R4110                ; ﾃﾞｼｹｰﾀｰ内 圧力検出1(ﾓｼﾞｭｰﾙ用)
AND R4111                ; ﾃﾞｼｹｰﾀｰ内 圧力検出2(ﾓｼﾞｭｰﾙ用)
ANB MR36414              ; ﾌﾟﾗﾝｼﾞｬｰ2(M) 吐出引込実行中
ANB MR36415              ; ﾌﾟﾗﾝｼﾞｬｰ2(M) 吐出引込call完了
SET MR36400              ; ﾌﾟﾗﾝｼﾞｬｰ2(M)  吐出引込call FLG
CON
JMP @MR4304              ; Next step
STG @MR4304              ; Next step
AND MR36415              ; ﾌﾟﾗﾝｼﾞｬｰ2(M) 吐出引込call完了
RES MR36415              ; ﾌﾟﾗﾝｼﾞｬｰ2(M) 吐出引込call完了
CON
JMP @MR4305              ; Next step
STG @MR4305              ; Next step
MPS
LD< DM760 DM761          ; (M)ｲﾝｸ循環回数  (M)ｲﾝｸ循環回数(設定値)
ANB MR12115              ; ﾊﾞﾌﾞﾘﾝｸﾞ回避
ANL
JMP @MR4302              ; Next step
MPP
LD>= DM760 DM761         ; (M)ｲﾝｸ循環回数  (M)ｲﾝｸ循環回数(設定値)
OR MR12115               ; ﾊﾞﾌﾞﾘﾝｸﾞ回避
ANL
JMP @MR4306              ; Next step
STG @MR4306              ; Next step
RES DM763                ; (M)連続循環中画面表示
CON
RES MR1413               ; (MAGENTA) ｲﾝｸ循環中
CON
SET @MR4301              ; ｲﾝｸ循環完了 MAGENTA
CON
ENDS
;<h1/>■■■  CYAN  ■■■
LD R50004                ; TASKDO
LDB R50002               ; STEP
LD R50002                ; STEP
AND LR40102              ; STEP 注入UT
ORL
ANL
OR MR12014               ; 背面ｲﾝｸ吐出起動中
LDB R50004               ; TASKDO
AND R50007               ; 原点復帰　完了
LD MR1609                ; (C) 照合要求FLG
OR MR1610                ; (C) KDﾄﾞﾗﾑ交換検出FLG
LDB MR1609               ; (C) 照合要求FLG
ANB MR1610               ; (C) KDﾄﾞﾗﾑ交換検出FLG
LD MR1703                ; (C) KDﾄﾞﾗﾑ攪拌要求
OR MR1704                ; (C) ｻﾌﾞﾀﾝｸ攪拌要求
OR MR1705                ; (CYAN)ｲﾝｸ循環要求
ANL
ORL
ANL
ORL
ANB MR39911              ; ｻﾃﾗｲﾄ無し
ANB @MR5002              ; (C) ｻﾌﾞﾀﾝｸ制御実行中
ANB MR1611               ; (C) KDﾄﾞﾗﾑ攪拌中
ANB @MR6002              ; ｲﾝｸ供給中
ANB MR1612               ; (C) ｻﾌﾞﾀﾝｸ攪拌中
ANB MR1613               ; (CYAN)ｲﾝｸ循環中
SET @MR5000              ; (C) ｻﾌﾞﾀﾝｸ制御開始
STG @MR5000              ; (C) ｻﾌﾞﾀﾝｸ制御開始
TMR @79 #1               ; (C)制御開始ﾃﾞｨﾚｲ
CON
AND @T79                 ; (C)制御開始ﾃﾞｨﾚｲ
SET @MR5002              ; (C) ｻﾌﾞﾀﾝｸ制御実行中
CON
AND @MR5002              ; (C) ｻﾌﾞﾀﾝｸ制御実行中
JMP @MR5003              ; 照合要求ﾁｪｯｸ
STG @MR5003              ; 照合要求ﾁｪｯｸ
MPS
ANB MR010                ; AP10 ON=BCR照合無効
MPS
LDB MR1609               ; (C) 照合要求FLG
ANB MR1610               ; (C) KDﾄﾞﾗﾑ交換検出FLG
ANL
JMP @MR5004
MRD
LD MR1609                ; (C) 照合要求FLG
ANB MR1610               ; (C) KDﾄﾞﾗﾑ交換検出FLG
ANL
JMP @MR5100              ; 初回ｺｰﾄﾞﾁｪｯｸ
MPP
AND MR1610               ; (C) KDﾄﾞﾗﾑ交換検出FLG
JMP @MR5200              ; KDﾄﾞﾗﾑ交換ﾊﾞｰｺｰﾄﾞﾁｪｯｸ 1st
MPP
AND MR010                ; AP10 ON=BCR照合無効
RES MR1609               ; (C) 照合要求FLG
CON
RES MR1610               ; (C) KDﾄﾞﾗﾑ交換検出FLG
CON
JMP @MR5004
STG @MR5004
MPS
ANB LR1002               ; Cｻﾌﾞﾀﾝｸ無効
MPS
ANB R50003               ; HOME
MPS
ANB MR1703               ; (C) KDﾄﾞﾗﾑ攪拌要求
JMP @MR5005
MPP
AND MR1703               ; (C) KDﾄﾞﾗﾑ攪拌要求
JMP @MR5400              ; KDﾄﾞﾗﾑ撹拌
MPP
AND R50003               ; HOME
JMP @MR5012              ; HOME時処理へ
MPP
AND LR1002               ; Cｻﾌﾞﾀﾝｸ無効
RES MR1703               ; (C) KDﾄﾞﾗﾑ攪拌要求
CON
RES MR1704               ; (C) ｻﾌﾞﾀﾝｸ攪拌要求
CON
RES MR1705               ; (CYAN)ｲﾝｸ循環要求
CON
SET MR1702               ; (C)ｻﾌﾞﾀﾝｸｲﾝｸ供給OK
CON
JMP @MR5015              ; 終了処理
STG @MR5012              ; HOME時処理へ
ANB @MR6002              ; ｲﾝｸ供給中
SET @MR6000              ; ｲﾝｸ供給制御
CON
JMP @MR5013
STG @MR5013
AND @MR6001              ; ｲﾝｸ供給完了
RES @MR6001              ; ｲﾝｸ供給完了
CON
JMP @MR5015              ; 終了処理
STG @MR5005
ANB @MR6002              ; ｲﾝｸ供給中
SET @MR6000              ; ｲﾝｸ供給制御
CON
JMP @MR5006
STG @MR5006
AND @MR6001              ; ｲﾝｸ供給完了
RES @MR6001              ; ｲﾝｸ供給完了
CON
JMP @MR5007
STG @MR5007
MPS
ANB MR1704               ; (C) ｻﾌﾞﾀﾝｸ攪拌要求
JMP @MR5008
MPP
AND MR1704               ; (C) ｻﾌﾞﾀﾝｸ攪拌要求
JMP @MR5600              ; ｻﾌﾞﾀﾝｸ撹拌
STG @MR5008
MPS
ANB MR1705               ; (CYAN)ｲﾝｸ循環要求
JMP @MR5015              ; 終了処理
MPP
AND MR1705               ; (CYAN)ｲﾝｸ循環要求
JMP @MR5700              ; ｲﾝｸ循環
;
STG @MR5015              ; 終了処理
RES @MR5002              ; (C) ｻﾌﾞﾀﾝｸ制御実行中
CON
ENDS
;<h1/>  初回ﾊﾞｰｺｰﾄﾞ照合
;  Barcode check
STG @MR5100              ; 初回ｺｰﾄﾞﾁｪｯｸ
AND @MR9801              ; 全色ｲﾝｸｺｰﾄﾞ照合要求中
JMP @MR5101              ; Next step
STG @MR5101              ; Next step
ANB R50008               ; Error
JMP @MR5102              ; Next step
STG @MR5102              ; Next step
ANB MR1605               ; C 照合中  
SET MR1600               ; C 照合要求(HOME)
CON
JMP @MR5103              ; Next step
STG @MR5103              ; Next step
AND MR1604               ; C 照合完了
RES MR1600               ; C 照合要求(HOME)
CON
RES MR1604               ; C 照合完了
CON
MPS
AND MR1607               ; C 照合OK  
RES MR12103              ; ｲﾝｸ照合処理中
CON
RES MR1607               ; C 照合OK  
CON
JMP @MR5108              ; ｻﾃﾗｲﾄ情報切替
MPP
AND MR1606               ; C 照合異常
JMP @MR5104              ; 照合異常
;*** 照合NG
STG @MR5104              ; 照合異常
RES MR1606               ; C 照合異常
CON
SET @MR104               ; Err79 ｲﾝｸ照合NG表示へ
CON
JMP @MR5105              ; Next step
STG @MR5105              ; Next step
AND @MR107               ; Err79 Release
RES @MR107               ; Err79 Release
CON
JMP @MR5106              ; Next step
STG @MR5106              ; Next step
JMP @MR5100              ; 初回ｺｰﾄﾞﾁｪｯｸ
;***
;ｻﾃﾗｲﾄ情報切替
STG @MR5108              ; ｻﾃﾗｲﾄ情報切替
MPS
AND R51300               ; Offline mode
JMP @MR5115              ; 終了処理
MPP
ANB R51300               ; Offline mode
JMP @MR5109
STG @MR5109
ANB B042                 ; Sub:ｻﾃﾗｲﾄ切替中
MPS
SET B040                 ; Sub:ｻﾃﾗｲﾄ切替開始
CON
JMP @MR5110
MRD
MOV #1 W0B               ; 色番号
MPP
BMOV DM225 W0D #6        ; C InkCode1  Ink Code 1
STG @MR5110
AND B041                 ; Sub:ｻﾃﾗｲﾄ切替完了
RES B041                 ; Sub:ｻﾃﾗｲﾄ切替完了
CON
MPS
AND= W016 #20            ; Result Code
JMP @MR5115              ; 終了処理
MPP
AND<> W016 #20           ; Result Code
SET @MR108               ; Err186:ｻﾃﾗｲﾄ切替NG
CON
JMP @MR5111
STG @MR5111
AND @MR111               ; Err186 Release
RES @MR111               ; Err186 Release
CON
JMP @MR5112
STG @MR5112
JMP @MR5100              ; 初回ｺｰﾄﾞﾁｪｯｸ
;初回照合終了処理
STG @MR5115              ; 終了処理
RES MR1609               ; (C) 照合要求FLG
CON
ANB MR1609               ; (C) 照合要求FLG
SET MR1703               ; (C) KDﾄﾞﾗﾑ攪拌要求
CON
SET MR1704               ; (C) ｻﾌﾞﾀﾝｸ攪拌要求
CON
SET MR1705               ; (CYAN)ｲﾝｸ循環要求
CON
JMP @MR5015              ; 終了処理
;<h1/>　KDﾄﾞﾗﾑ交換ﾊﾞｰｺｰﾄﾞ照合
;　Barcode check for KD drum change
;1St check
STG @MR5200              ; KDﾄﾞﾗﾑ交換ﾊﾞｰｺｰﾄﾞﾁｪｯｸ 1st
ANB MR1102               ; BCR照合中
SET MR12103              ; ｲﾝｸ照合処理中
CON
SET @MR9908              ; Err77 Cｲﾝｸ照合表示へ
CON
JMP @MR5201
STG @MR5201
AND @MR9911              ; Err77 Release
RES @MR9911              ; Err77 Release
CON
JMP @MR5202              ; 1st照合
STG @MR5202              ; 1st照合
ANB MR1605               ; C 照合中  
ANB MR1604               ; C 照合完了
JMP @MR5203
STG @MR5203
SET MR1601               ; C 照合要求(KD交換1)
CON
AND MR1605               ; C 照合中  
JMP @MR5204
STG @MR5204
AND MR1604               ; C 照合完了
MPS
AND MR1607               ; C 照合OK  
RES MR12103              ; ｲﾝｸ照合処理中
CON
JMP @MR5208
MPP
AND MR1606               ; C 照合異常
JMP @MR5205              ; 照合異常
;*** 照合NG
STG @MR5205              ; 照合異常
RES MR1601               ; C 照合要求(KD交換1)
CON
RES MR1604               ; C 照合完了
CON
RES MR1606               ; C 照合異常
CON
SET @MR104               ; Err79 ｲﾝｸ照合NG表示へ
CON
JMP @MR5206
STG @MR5206
AND @MR107               ; Err79 Release
RES @MR107               ; Err79 Release
CON
JMP @MR5202              ; 1st照合
;***
;交換完了待ち
STG @MR5208
RES MR1601               ; C 照合要求(KD交換1)
CON
RES MR1604               ; C 照合完了
CON
RES MR1607               ; C 照合OK  
CON
ANB MR1604               ; C 照合完了
ANB MR1601               ; C 照合要求(KD交換1)
ANB MR1607               ; C 照合OK  
JMP @MR5209              ; KD交換完了待ち
STG @MR5209              ; KD交換完了待ち
AND MR12101              ; TPより交換終了SW
JMP @MR5300              ; KDﾄﾞﾗﾑ交換ﾊﾞｰｺｰﾄﾞﾁｪｯｸ 2nd
;2nd check
STG @MR5300              ; KDﾄﾞﾗﾑ交換ﾊﾞｰｺｰﾄﾞﾁｪｯｸ 2nd
ANB MR1102               ; BCR照合中
SET MR12103              ; ｲﾝｸ照合処理中
CON
SET @MR9908              ; Err77 Cｲﾝｸ照合表示へ
CON
JMP @MR5301
STG @MR5301
AND @MR9911              ; Err77 Release
RES @MR9911              ; Err77 Release
CON
JMP @MR5302              ; 2nd照合
STG @MR5302              ; 2nd照合
ANB MR1605               ; C 照合中  
ANB MR1604               ; C 照合完了
JMP @MR5303
STG @MR5303
SET MR1602               ; C 照合要求(KD交換2)
CON
AND MR1605               ; C 照合中  
JMP @MR5304
STG @MR5304
AND MR1604               ; C 照合完了
MPS
AND MR1607               ; C 照合OK  
RES MR12103              ; ｲﾝｸ照合処理中
CON
JMP @MR5308
MPP
AND MR1606               ; C 照合異常
JMP @MR5305              ; 照合NG
;*** 照合NG
STG @MR5305              ; 照合NG
RES MR1602               ; C 照合要求(KD交換2)
CON
RES MR1604               ; C 照合完了
CON
RES MR1606               ; C 照合異常
CON
SET @MR104               ; Err79 ｲﾝｸ照合NG表示へ
CON
JMP @MR5306
STG @MR5306
AND @MR107               ; Err79 Release
RES @MR107               ; Err79 Release
CON
JMP @MR5302              ; 2nd照合
;***
;交換完了表示
STG @MR5308
RES MR1602               ; C 照合要求(KD交換2)
CON
RES MR1604               ; C 照合完了
CON
RES MR1607               ; C 照合OK  
CON
ANB MR1602               ; C 照合要求(KD交換2)
ANB MR1604               ; C 照合完了
ANB MR1607               ; C 照合OK  
JMP @MR5309
STG @MR5309
SET @MR408               ; Err91
CON
JMP @MR5310
STG @MR5310
AND @MR415               ; Err91解除完了
RES @MR415               ; Err91解除完了
CON
JMP @MR5315              ; 終了処理
;交換照合終了処理
STG @MR5315              ; 終了処理
RES MR1610               ; (C) KDﾄﾞﾗﾑ交換検出FLG
CON
SET MR1703               ; (C) KDﾄﾞﾗﾑ攪拌要求
CON
JMP @MR5015              ; 終了処理
;<h1/>　KDﾄﾞﾗﾑ 撹拌
;　KD drum Bubbling
STG @MR5400              ; KDﾄﾞﾗﾑ撹拌
ANB MR1611               ; (C) KDﾄﾞﾗﾑ攪拌中
SET @MR6100              ; KDﾄﾞﾗﾑ攪拌
CON
JMP @MR5401
STG @MR5401
AND @MR6101              ; KDﾄﾞﾗﾑ撹拌完了
RES MR1703               ; (C) KDﾄﾞﾗﾑ攪拌要求
CON
RES @MR6101              ; KDﾄﾞﾗﾑ撹拌完了
CON
JMP @MR5015              ; 終了処理
;<h1/>　ｻﾌﾞﾀﾝｸ 撹拌
;　Subtank Bubbling
STG @MR5600              ; ｻﾌﾞﾀﾝｸ撹拌
ANB MR1612               ; (C) ｻﾌﾞﾀﾝｸ攪拌中
SET @MR6200              ; ｻﾌﾞﾀﾝｸ撹拌
CON
JMP @MR5601
STG @MR5601
AND @MR6201              ; ｻﾌﾞﾀﾝｸ撹拌完了
RES MR1704               ; (C) ｻﾌﾞﾀﾝｸ攪拌要求
CON
RES @MR6201              ; ｻﾌﾞﾀﾝｸ撹拌完了
CON
JMP @MR5015              ; 終了処理
;<h1/>　ｲﾝｸ循環
;　Ink Circuration
STG @MR5700              ; ｲﾝｸ循環
ANB DM773                ; (C)連続循環中画面表示
SET @MR6300              ; Cｲﾝｸ循環
CON
JMP @MR5701
STG @MR5701
AND @MR6301              ; ｲﾝｸ循環完了 CYAN
RES MR1705               ; (CYAN)ｲﾝｸ循環要求
CON
RES @MR6301              ; ｲﾝｸ循環完了 CYAN
CON
JMP @MR5015              ; 終了処理
;<h1/>　　Subroutine
;ｲﾝｸ供給制御
;Ink suppy control
;<h1/>201412 液面検出変更
STG @MR6000              ; ｲﾝｸ供給制御
SET @MR6002              ; ｲﾝｸ供給中
CON
JMP @MR6003
STG @MR6003
MPS
LDB R4700                ; (C)液面1(最下)ｲﾝｸｴﾝﾄﾞ
ORB R4701                ; (C)液面2(中下)KDﾄﾞﾗﾑ交換
ANL
JMP @MR6004
MPP
LD R4700                 ; (C)液面1(最下)ｲﾝｸｴﾝﾄﾞ
AND R4701                ; (C)液面2(中下)KDﾄﾞﾗﾑ交換
ANL
RES MR6706               ; (C) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
SET MR1702               ; (C)ｻﾌﾞﾀﾝｸｲﾝｸ供給OK
CON
JMP @MR6007
STG @MR6004
SET MR1710               ; (C)ｻﾌﾞﾀﾝｸ大気開放(Subtank)
CON
SET MR6700               ; (C) ｻﾌﾞﾀﾝｸ ｲﾝｸ供給　開
CON
RES MR6701               ; (C) ｻﾌﾞﾀﾝｸ撹拌
CON
RES MR6702               ; (C) KDﾄﾞﾗﾑ撹拌 開
CON
SET MR6703               ; (C) ｻﾌﾞﾀﾝｸ ｲﾝｸ開閉
CON
RES MR6704               ; (C) ｻﾌﾞﾀﾝｸ 循環回収
CON
TMH @75 #10              ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T75                 ; ｳｴｲﾄﾀｲﾏｰ
JMP @MR6006
STG @MR6006
SET MR6706               ; (C) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
LD R4700                 ; (C)液面1(最下)ｲﾝｸｴﾝﾄﾞ
AND R4701                ; (C)液面2(中下)KDﾄﾞﾗﾑ交換
AND R4702                ; (C)液面3(中上)供給制御
OR MR1610                ; (C) KDﾄﾞﾗﾑ交換検出FLG
OR @MR815                ; CｻﾌﾞﾀﾝｸHI検出表示中
ANL
TMR @76 #10              ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T76                 ; ｳｴｲﾄﾀｲﾏｰ
JMP @MR6007
STG @MR6007
RES MR6706               ; (C) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
TMH @77 #10              ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T77                 ; ｳｴｲﾄﾀｲﾏｰ
RES MR1710               ; (C)ｻﾌﾞﾀﾝｸ大気開放(Subtank)
CON
RES MR6700               ; (C) ｻﾌﾞﾀﾝｸ ｲﾝｸ供給　開
CON
RES MR6703               ; (C) ｻﾌﾞﾀﾝｸ ｲﾝｸ開閉
CON
JMP @MR6008
STG @MR6008
RES @MR6002              ; ｲﾝｸ供給中
CON
SET @MR6001              ; ｲﾝｸ供給完了
CON
ENDS
;KDﾄﾞﾗﾑ 撹拌
;KD drum Bubbling
STG @MR6100              ; KDﾄﾞﾗﾑ攪拌
MPS
DW.D #0 DM808            ; (C)KDﾄﾞﾗﾑ撹拌設定時間
CON
JMP @MR6102              ; Next step
MRD
LD MR1700                ; (C) 染料ｲﾝｸ
AND<> DM4008 #60         ; TP 切り替え画面No
ANL
MOV.D @T63 DM808         ; KDﾄﾞﾗﾑ染料攪拌時間  (C)KDﾄﾞﾗﾑ撹拌設定時間
MPP
LD MR1701                ; (C) 顔料ｲﾝｸ
OR= DM4008 #60           ; TP 切り替え画面No
ANL
MOV.D T91 DM808          ; KDﾄﾞﾗﾑ撹拌時間 C (0.1s)  (C)KDﾄﾞﾗﾑ撹拌設定時間
STG @MR6102              ; Next step
MPS
AND<> DM808 #0           ; (C)KDﾄﾞﾗﾑ撹拌設定時間
SET MR1611               ; (C) KDﾄﾞﾗﾑ攪拌中
CON
JMP @MR6103              ; Next step
MPP
AND= DM808 #0            ; (C)KDﾄﾞﾗﾑ撹拌設定時間
DW.D #0 DM810            ; (C)KDﾄﾞﾗﾑ撹拌実行時間(表示用)
CON
JMP @MR6106              ; Next step
STG @MR6103              ; Next step
RES MR6701               ; (C) ｻﾌﾞﾀﾝｸ撹拌
CON
SET MR6702               ; (C) KDﾄﾞﾗﾑ撹拌 開
CON
RES MR6703               ; (C) ｻﾌﾞﾀﾝｸ ｲﾝｸ開閉
CON
JMP @MR6104              ; Next step
STG @MR6104              ; Next step
TMR @60 #10              ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T60                 ; ｳｴｲﾄﾀｲﾏｰ
SET MR6700               ; (C) ｻﾌﾞﾀﾝｸ ｲﾝｸ供給　開
CON
SET MR6706               ; (C) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
JMP @MR6105              ; Next step
STG @MR6105              ; Next step
MPS
LD MR1700                ; (C) 染料ｲﾝｸ
AND<> DM4008 #60         ; TP 切り替え画面No
ANL
MPS
TMR @63 #0               ; KDﾄﾞﾗﾑ染料攪拌時間
CON
AND @T63                 ; KDﾄﾞﾗﾑ染料攪拌時間
JMP @MR6106              ; Next step
MPP
MOV.D @T63 DM810         ; KDﾄﾞﾗﾑ染料攪拌時間  (C)KDﾄﾞﾗﾑ撹拌実行時間(表示用)
MRD
LD MR1701                ; (C) 顔料ｲﾝｸ
OR= DM4008 #60           ; TP 切り替え画面No
ANL
MPS
TMR #91 #9999            ; KDﾄﾞﾗﾑ撹拌時間 C (0.1s)
CON
AND T91                  ; KDﾄﾞﾗﾑ撹拌時間 C (0.1s)
JMP @MR6106              ; Next step
MPP
MOV.D T91 DM810          ; KDﾄﾞﾗﾑ撹拌時間 C (0.1s)  (C)KDﾄﾞﾗﾑ撹拌実行時間(表示用)
MPP
LDB MR1700               ; (C) 染料ｲﾝｸ
ANB MR1701               ; (C) 顔料ｲﾝｸ
OR MR12115               ; ﾊﾞﾌﾞﾘﾝｸﾞ回避
ANL
JMP @MR6106              ; Next step
STG @MR6106              ; Next step
RES MR6706               ; (C) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
TMR @64 #10              ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T64                 ; ｳｴｲﾄﾀｲﾏｰ
JMP @MR6107              ; Next step
STG @MR6107              ; Next step
RES MR6702               ; (C) KDﾄﾞﾗﾑ撹拌 開
CON
RES MR6700               ; (C) ｻﾌﾞﾀﾝｸ ｲﾝｸ供給　開
CON
RES MR1611               ; (C) KDﾄﾞﾗﾑ攪拌中
CON
SET @MR6101              ; KDﾄﾞﾗﾑ撹拌完了
CON
ENDS
;ｻﾌﾞﾀﾝｸ 撹拌
;Subtank Bubbling
STG @MR6200              ; ｻﾌﾞﾀﾝｸ撹拌
MPS
DW.D #0 DM824            ; (C)ｻﾌﾞﾀﾝｸ撹拌設定時間
CON
JMP @MR6202              ; Next step
MRD
AND MR1700               ; (C) 染料ｲﾝｸ
MOV.D @T68 DM824         ; ｻﾌﾞﾀﾝｸ染料攪拌時間  (C)ｻﾌﾞﾀﾝｸ撹拌設定時間
MPP
AND MR1701               ; (C) 顔料ｲﾝｸ
MOV.D T95 DM824          ; ｻﾌﾞﾀﾝｸ撹拌時間 C (0.1s)  (C)ｻﾌﾞﾀﾝｸ撹拌設定時間
STG @MR6202              ; Next step
MPS
AND<> DM824 #0           ; (C)ｻﾌﾞﾀﾝｸ撹拌設定時間
SET MR1612               ; (C) ｻﾌﾞﾀﾝｸ攪拌中
CON
JMP @MR6203              ; Next step
MPP
AND= DM824 #0            ; (C)ｻﾌﾞﾀﾝｸ撹拌設定時間
DW.D #0 DM826            ; (C)ｻﾌﾞﾀﾝｸ撹拌実行時間(表示用)
CON
JMP @MR6206              ; Next step
STG @MR6203              ; Next step
RES MR6700               ; (C) ｻﾌﾞﾀﾝｸ ｲﾝｸ供給　開
CON
RES MR6702               ; (C) KDﾄﾞﾗﾑ撹拌 開
CON
SET MR6703               ; (C) ｻﾌﾞﾀﾝｸ ｲﾝｸ開閉
CON
JMP @MR6204              ; Next step
STG @MR6204              ; Next step
TMR @65 #10              ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T65                 ; ｳｴｲﾄﾀｲﾏｰ
SET MR6701               ; (C) ｻﾌﾞﾀﾝｸ撹拌
CON
SET MR6706               ; (C) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
JMP @MR6205              ; Next step
STG @MR6205              ; Next step
MPS
AND MR1700               ; (C) 染料ｲﾝｸ
MPS
TMR @68 #0               ; ｻﾌﾞﾀﾝｸ染料攪拌時間
CON
AND @T68                 ; ｻﾌﾞﾀﾝｸ染料攪拌時間
JMP @MR6206              ; Next step
MPP
MOV.D @T68 DM826         ; ｻﾌﾞﾀﾝｸ染料攪拌時間  (C)ｻﾌﾞﾀﾝｸ撹拌実行時間(表示用)
MRD
AND MR1701               ; (C) 顔料ｲﾝｸ
MPS
TMR #95 #9999            ; ｻﾌﾞﾀﾝｸ撹拌時間 C (0.1s)
CON
AND T95                  ; ｻﾌﾞﾀﾝｸ撹拌時間 C (0.1s)
JMP @MR6206              ; Next step
MPP
MOV.D T95 DM826          ; ｻﾌﾞﾀﾝｸ撹拌時間 C (0.1s)  (C)ｻﾌﾞﾀﾝｸ撹拌実行時間(表示用)
MPP
LDB MR1700               ; (C) 染料ｲﾝｸ
ANB MR1701               ; (C) 顔料ｲﾝｸ
OR MR12115               ; ﾊﾞﾌﾞﾘﾝｸﾞ回避
ANL
JMP @MR6206              ; Next step
STG @MR6206              ; Next step
RES MR6706               ; (C) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
TMR @69 #10              ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T69                 ; ｳｴｲﾄﾀｲﾏｰ
JMP @MR6207              ; Next step
STG @MR6207              ; Next step
RES MR6703               ; (C) ｻﾌﾞﾀﾝｸ ｲﾝｸ開閉
CON
RES MR6701               ; (C) ｻﾌﾞﾀﾝｸ撹拌
CON
RES MR1612               ; (C) ｻﾌﾞﾀﾝｸ攪拌中
CON
SET @MR6201              ; ｻﾌﾞﾀﾝｸ撹拌完了
CON
ENDS
;ｲﾝｸ循環
;Ink Circulation
STG @MR6300              ; Cｲﾝｸ循環
MPS
SET MR1613               ; (CYAN)ｲﾝｸ循環中
CON
JMP @MR6302              ; Next step
MPP
MOV #0 DM770             ; (C)ｲﾝｸ循環回数
STG @MR6302              ; Next step
SET DM773                ; (C)連続循環中画面表示
CON
@INC DM770               ; (C)ｲﾝｸ循環回数
CON
JMP @MR6303              ; Next step
STG @MR6303              ; Next step
TMR @70 #5               ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T70                 ; ｳｴｲﾄﾀｲﾏｰ
AND R4110                ; ﾃﾞｼｹｰﾀｰ内 圧力検出1(ﾓｼﾞｭｰﾙ用)
AND R4111                ; ﾃﾞｼｹｰﾀｰ内 圧力検出2(ﾓｼﾞｭｰﾙ用)
ANB MR36514              ; ﾌﾟﾗﾝｼﾞｬｰ3(C) 吐出引込実行中
ANB MR36515              ; ﾌﾟﾗﾝｼﾞｬｰ3(C) 吐出引込call完了
SET MR36500              ; ﾌﾟﾗﾝｼﾞｬｰ3(C) 吐出引込call FLG
CON
JMP @MR6304              ; Next step
STG @MR6304              ; Next step
AND MR36515              ; ﾌﾟﾗﾝｼﾞｬｰ3(C) 吐出引込call完了
RES MR36515              ; ﾌﾟﾗﾝｼﾞｬｰ3(C) 吐出引込call完了
CON
JMP @MR6305              ; Next step
STG @MR6305              ; Next step
MPS
LD< DM770 DM771          ; (C)ｲﾝｸ循環回数  (C)ｲﾝｸ循環回数(設定値)
ANB MR12115              ; ﾊﾞﾌﾞﾘﾝｸﾞ回避
ANL
JMP @MR6302              ; Next step
MPP
LD>= DM770 DM771         ; (C)ｲﾝｸ循環回数  (C)ｲﾝｸ循環回数(設定値)
OR MR12115               ; ﾊﾞﾌﾞﾘﾝｸﾞ回避
ANL
JMP @MR6306              ; Next step
STG @MR6306              ; Next step
RES DM773                ; (C)連続循環中画面表示
CON
RES MR1613               ; (CYAN)ｲﾝｸ循環中
CON
SET @MR6301              ; ｲﾝｸ循環完了 CYAN
CON
ENDS
;<h1/>■■■  BLACK  ■■■
LD R50004                ; TASKDO
LDB R50002               ; STEP
LD R50002                ; STEP
AND LR40102              ; STEP 注入UT
ORL
ANL
OR MR12014               ; 背面ｲﾝｸ吐出起動中
LDB R50004               ; TASKDO
AND R50007               ; 原点復帰　完了
LD MR1809                ; (B) 照合要求FLG
OR MR1810                ; (B) KDﾄﾞﾗﾑ交換検出FLG
LDB MR1809               ; (B) 照合要求FLG
ANB MR1810               ; (B) KDﾄﾞﾗﾑ交換検出FLG
LD MR1903                ; (B) KDﾄﾞﾗﾑ攪拌要求
OR MR1904                ; (B) ｻﾌﾞﾀﾝｸ攪拌要求
OR MR1905                ; (BLACK)ｲﾝｸ循環要求
ANL
ORL
ANL
ORL
ANB MR39911              ; ｻﾃﾗｲﾄ無し
ANB @MR7002              ; (B) ｻﾌﾞﾀﾝｸ制御実行中
ANB MR1811               ; (B) KDﾄﾞﾗﾑ攪拌中
ANB @MR8002              ; ｲﾝｸ供給中
ANB MR1812               ; (B) ｻﾌﾞﾀﾝｸ攪拌中
ANB MR1813               ; (BLACK)ｲﾝｸ循環中
SET @MR7000              ; (B) ｻﾌﾞﾀﾝｸ制御開始
STG @MR7000              ; (B) ｻﾌﾞﾀﾝｸ制御開始
TMR @99 #1               ; (B)制御開始ﾃﾞｨﾚｲ
CON
AND @T99                 ; (B)制御開始ﾃﾞｨﾚｲ
SET @MR7002              ; (B) ｻﾌﾞﾀﾝｸ制御実行中
CON
AND @MR7002              ; (B) ｻﾌﾞﾀﾝｸ制御実行中
JMP @MR7003              ; 照合要求ﾁｪｯｸ
STG @MR7003              ; 照合要求ﾁｪｯｸ
MPS
ANB MR010                ; AP10 ON=BCR照合無効
MPS
LDB MR1809               ; (B) 照合要求FLG
ANB MR1810               ; (B) KDﾄﾞﾗﾑ交換検出FLG
ANL
JMP @MR7004
MRD
LD MR1809                ; (B) 照合要求FLG
ANB MR1810               ; (B) KDﾄﾞﾗﾑ交換検出FLG
ANL
JMP @MR7100              ; 初回ｺｰﾄﾞﾁｪｯｸ
MPP
AND MR1810               ; (B) KDﾄﾞﾗﾑ交換検出FLG
JMP @MR7200              ; KDﾄﾞﾗﾑ交換ﾊﾞｰｺｰﾄﾞﾁｪｯｸ 1st
MPP
AND MR010                ; AP10 ON=BCR照合無効
RES MR1809               ; (B) 照合要求FLG
CON
RES MR1810               ; (B) KDﾄﾞﾗﾑ交換検出FLG
CON
JMP @MR7004
STG @MR7004
MPS
ANB LR1003               ; Bｻﾌﾞﾀﾝｸ無効
MPS
ANB R50003               ; HOME
MPS
ANB MR1903               ; (B) KDﾄﾞﾗﾑ攪拌要求
JMP @MR7005
MPP
AND MR1903               ; (B) KDﾄﾞﾗﾑ攪拌要求
JMP @MR7400              ; KDﾄﾞﾗﾑ撹拌
MPP
AND R50003               ; HOME
JMP @MR7012              ; HOME時処理へ
MPP
AND LR1003               ; Bｻﾌﾞﾀﾝｸ無効
RES MR1903               ; (B) KDﾄﾞﾗﾑ攪拌要求
CON
RES MR1904               ; (B) ｻﾌﾞﾀﾝｸ攪拌要求
CON
RES MR1905               ; (BLACK)ｲﾝｸ循環要求
CON
SET MR1902               ; (B)ｻﾌﾞﾀﾝｸｲﾝｸ供給OK
CON
JMP @MR7015              ; 終了処理
STG @MR7012              ; HOME時処理へ
ANB @MR8002              ; ｲﾝｸ供給中
SET @MR8000              ; ｲﾝｸ供給制御
CON
JMP @MR7013
STG @MR7013
AND @MR8001              ; ｲﾝｸ供給完了
RES @MR8001              ; ｲﾝｸ供給完了
CON
JMP @MR7015              ; 終了処理
STG @MR7005
ANB @MR8002              ; ｲﾝｸ供給中
SET @MR8000              ; ｲﾝｸ供給制御
CON
JMP @MR7006
STG @MR7006
AND @MR8001              ; ｲﾝｸ供給完了
RES @MR8001              ; ｲﾝｸ供給完了
CON
JMP @MR7007
STG @MR7007
MPS
ANB MR1904               ; (B) ｻﾌﾞﾀﾝｸ攪拌要求
JMP @MR7008
MPP
AND MR1904               ; (B) ｻﾌﾞﾀﾝｸ攪拌要求
JMP @MR7600              ; ｻﾌﾞﾀﾝｸ撹拌
STG @MR7008
MPS
ANB MR1905               ; (BLACK)ｲﾝｸ循環要求
JMP @MR7015              ; 終了処理
MPP
AND MR1905               ; (BLACK)ｲﾝｸ循環要求
JMP @MR7700
;
STG @MR7015              ; 終了処理
RES @MR7002              ; (B) ｻﾌﾞﾀﾝｸ制御実行中
CON
ENDS
;<h1/>  初回ﾊﾞｰｺｰﾄﾞ照合
;  Barcode check
STG @MR7100              ; 初回ｺｰﾄﾞﾁｪｯｸ
AND @MR9801              ; 全色ｲﾝｸｺｰﾄﾞ照合要求中
JMP @MR7101              ; Next step
STG @MR7101              ; Next step
ANB R50008               ; Error
JMP @MR7102              ; Next step
STG @MR7102              ; Next step
ANB MR1805               ; B 照合中  
SET MR1800               ; B 照合要求(HOME)
CON
JMP @MR7103              ; Next step
STG @MR7103              ; Next step
AND MR1804               ; B 照合完了  
RES MR1800               ; B 照合要求(HOME)
CON
RES MR1804               ; B 照合完了  
CON
MPS
AND MR1807               ; B 照合OK  
RES MR12103              ; ｲﾝｸ照合処理中
CON
JMP @MR7108              ; ｻﾃﾗｲﾄ情報切替
MPP
AND MR1806               ; B 照合異常
JMP @MR7104              ; 照合異常
;*** 照合NG
STG @MR7104              ; 照合異常
RES MR1806               ; B 照合異常
CON
SET @MR104               ; Err79 ｲﾝｸ照合NG表示へ
CON
JMP @MR7105              ; Next step
STG @MR7105              ; Next step
AND @MR107               ; Err79 Release
RES @MR107               ; Err79 Release
CON
JMP @MR7106              ; Next step
STG @MR7106              ; Next step
JMP @MR7100              ; 初回ｺｰﾄﾞﾁｪｯｸ
;***
;ｻﾃﾗｲﾄ情報切替
STG @MR7108              ; ｻﾃﾗｲﾄ情報切替
MPS
AND R51300               ; Offline mode
JMP @MR7115              ; 終了処理
MPP
ANB R51300               ; Offline mode
JMP @MR7109
STG @MR7109
ANB B042                 ; Sub:ｻﾃﾗｲﾄ切替中
MPS
SET B040                 ; Sub:ｻﾃﾗｲﾄ切替開始
CON
JMP @MR7110
MRD
MOV #4 W0B               ; 色番号
MPP
BMOV DM237 W0D #6        ; C InkWeightMin1  Ink Code 1
STG @MR7110
AND B041                 ; Sub:ｻﾃﾗｲﾄ切替完了
RES B041                 ; Sub:ｻﾃﾗｲﾄ切替完了
CON
MPS
AND= W016 #20            ; Result Code
JMP @MR7115              ; 終了処理
MPP
AND<> W016 #20           ; Result Code
SET @MR108               ; Err186:ｻﾃﾗｲﾄ切替NG
CON
JMP @MR7111
STG @MR7111
AND @MR111               ; Err186 Release
RES @MR111               ; Err186 Release
CON
JMP @MR7112
STG @MR7112
JMP @MR7100              ; 初回ｺｰﾄﾞﾁｪｯｸ
;初回照合終了処理
STG @MR7115              ; 終了処理
RES MR1809               ; (B) 照合要求FLG
CON
ANB MR1809               ; (B) 照合要求FLG
SET MR1903               ; (B) KDﾄﾞﾗﾑ攪拌要求
CON
SET MR1904               ; (B) ｻﾌﾞﾀﾝｸ攪拌要求
CON
SET MR1905               ; (BLACK)ｲﾝｸ循環要求
CON
JMP @MR7015              ; 終了処理
;<h1/>　KDﾄﾞﾗﾑ交換ﾊﾞｰｺｰﾄﾞ照合
;　Barcode check for KD drum change
;1St check
STG @MR7200              ; KDﾄﾞﾗﾑ交換ﾊﾞｰｺｰﾄﾞﾁｪｯｸ 1st
ANB MR1102               ; BCR照合中
SET MR12103              ; ｲﾝｸ照合処理中
CON
SET @MR9912              ; Err78 Bｲﾝｸ照合表示へ
CON
JMP @MR7201
STG @MR7201
AND @MR9915              ; Err78 Release
RES @MR9915              ; Err78 Release
CON
JMP @MR7202              ; 1st照合
STG @MR7202              ; 1st照合
ANB MR1805               ; B 照合中  
JMP @MR7203
STG @MR7203
SET MR1801               ; B 照合要求(KD交換1)
CON
AND MR1805               ; B 照合中  
JMP @MR7204
STG @MR7204
AND MR1804               ; B 照合完了  
MPS
AND MR1807               ; B 照合OK  
RES MR12103              ; ｲﾝｸ照合処理中
CON
JMP @MR7208
MPP
AND MR1806               ; B 照合異常
JMP @MR7205              ; 照合異常
;*** 照合NG
STG @MR7205              ; 照合異常
RES MR1801               ; B 照合要求(KD交換1)
CON
RES MR1804               ; B 照合完了  
CON
RES MR1806               ; B 照合異常
CON
SET @MR104               ; Err79 ｲﾝｸ照合NG表示へ
CON
JMP @MR7206
STG @MR7206
AND @MR107               ; Err79 Release
RES @MR107               ; Err79 Release
CON
JMP @MR7202              ; 1st照合
;***
;交換完了待ち
STG @MR7208
RES MR1801               ; B 照合要求(KD交換1)
CON
RES MR1804               ; B 照合完了  
CON
RES MR1807               ; B 照合OK  
CON
ANB MR1801               ; B 照合要求(KD交換1)
ANB MR1804               ; B 照合完了  
ANB MR1807               ; B 照合OK  
JMP @MR7209              ; KD交換完了待ち
STG @MR7209              ; KD交換完了待ち
AND MR12101              ; TPより交換終了SW
JMP @MR7300              ; KDﾄﾞﾗﾑ交換ﾊﾞｰｺｰﾄﾞﾁｪｯｸ 2nd
;2nd check
STG @MR7300              ; KDﾄﾞﾗﾑ交換ﾊﾞｰｺｰﾄﾞﾁｪｯｸ 2nd
ANB MR1102               ; BCR照合中
SET MR12103              ; ｲﾝｸ照合処理中
CON
SET @MR9912              ; Err78 Bｲﾝｸ照合表示へ
CON
JMP @MR7301
STG @MR7301
AND @MR9915              ; Err78 Release
RES @MR9915              ; Err78 Release
CON
JMP @MR7302              ; 2nd照合
STG @MR7302              ; 2nd照合
ANB MR1805               ; B 照合中  
JMP @MR7303
STG @MR7303
SET MR1802               ; B 照合要求(KD交換2)
CON
AND MR1805               ; B 照合中  
JMP @MR7304
STG @MR7304
AND MR1804               ; B 照合完了  
MPS
AND MR1807               ; B 照合OK  
RES MR12103              ; ｲﾝｸ照合処理中
CON
JMP @MR7308
MPP
AND MR1806               ; B 照合異常
JMP @MR7305              ; 照合NG
;*** 照合NG
STG @MR7305              ; 照合NG
RES MR1802               ; B 照合要求(KD交換2)
CON
RES MR1804               ; B 照合完了  
CON
RES MR1806               ; B 照合異常
CON
SET @MR104               ; Err79 ｲﾝｸ照合NG表示へ
CON
JMP @MR7306
STG @MR7306
AND @MR107               ; Err79 Release
RES @MR107               ; Err79 Release
CON
JMP @MR7302              ; 2nd照合
;***
;交換完了表示
STG @MR7308
RES MR1802               ; B 照合要求(KD交換2)
CON
RES MR1804               ; B 照合完了  
CON
RES MR1807               ; B 照合OK  
CON
ANB MR1802               ; B 照合要求(KD交換2)
ANB MR1804               ; B 照合完了  
ANB MR1807               ; B 照合OK  
JMP @MR7309
STG @MR7309
SET @MR508               ; Err93
CON
JMP @MR7310
STG @MR7310
AND @MR515               ; Err93解除完了
RES @MR515               ; Err93解除完了
CON
JMP @MR7315              ; 終了処理
;交換照合終了処理
STG @MR7315              ; 終了処理
RES MR1810               ; (B) KDﾄﾞﾗﾑ交換検出FLG
CON
SET MR1903               ; (B) KDﾄﾞﾗﾑ攪拌要求
CON
JMP @MR7015              ; 終了処理
;<h1/>　KDﾄﾞﾗﾑ 撹拌
;　KD drum Bubbling
STG @MR7400              ; KDﾄﾞﾗﾑ撹拌
ANB MR1811               ; (B) KDﾄﾞﾗﾑ攪拌中
SET @MR8100              ; KDﾄﾞﾗﾑ攪拌
CON
JMP @MR7401
STG @MR7401
AND @MR8101              ; KDﾄﾞﾗﾑ撹拌完了
RES MR1903               ; (B) KDﾄﾞﾗﾑ攪拌要求
CON
RES MR1810               ; (B) KDﾄﾞﾗﾑ交換検出FLG
CON
RES @MR8101              ; KDﾄﾞﾗﾑ撹拌完了
CON
JMP @MR7015              ; 終了処理
;<h1/>　ｻﾌﾞﾀﾝｸ 撹拌
;　Subtank Bubbling
STG @MR7600              ; ｻﾌﾞﾀﾝｸ撹拌
ANB MR1812               ; (B) ｻﾌﾞﾀﾝｸ攪拌中
SET @MR8200              ; ｻﾌﾞﾀﾝｸ撹拌
CON
JMP @MR7601
STG @MR7601
AND @MR8201              ; ｻﾌﾞﾀﾝｸ撹拌完了
RES MR1904               ; (B) ｻﾌﾞﾀﾝｸ攪拌要求
CON
RES @MR8201              ; ｻﾌﾞﾀﾝｸ撹拌完了
CON
JMP @MR7015              ; 終了処理
;<h1/>　ｲﾝｸ循環
;　Ink Circuration
STG @MR7700
ANB DM783                ; (B)連続循環中画面表示
SET @MR8300              ; Bｲﾝｸ循環
CON
JMP @MR7701
STG @MR7701
AND @MR8301              ; ｲﾝｸ循環完了 BLACK
RES MR1905               ; (BLACK)ｲﾝｸ循環要求
CON
RES @MR8301              ; ｲﾝｸ循環完了 BLACK
CON
JMP @MR7015              ; 終了処理
;<h1/>　　Subroutine
;ｲﾝｸ供給制御
;Ink suppy control
;<h1/>201412 液面検出変更
STG @MR8000              ; ｲﾝｸ供給制御
SET @MR8002              ; ｲﾝｸ供給中
CON
JMP @MR8003
STG @MR8003
MPS
LDB R4708                ; (B)液面1(最下)ｲﾝｸｴﾝﾄﾞ
ORB R4709                ; (B)液面2(中下)KDﾄﾞﾗﾑ交換
ANL
JMP @MR8004
MPP
LD R4708                 ; (B)液面1(最下)ｲﾝｸｴﾝﾄﾞ
AND R4709                ; (B)液面2(中下)KDﾄﾞﾗﾑ交換
ANL
RES MR6714               ; (B) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
SET MR1902               ; (B)ｻﾌﾞﾀﾝｸｲﾝｸ供給OK
CON
JMP @MR8007
STG @MR8004
SET MR1910               ; (B)ｻﾌﾞﾀﾝｸ大気開放(Subtank)
CON
SET MR6708               ; (B) ｻﾌﾞﾀﾝｸ ｲﾝｸ供給　開
CON
RES MR6709               ; (B) ｻﾌﾞﾀﾝｸ撹拌
CON
RES MR6710               ; (B) KDﾄﾞﾗﾑ撹拌 開
CON
SET MR6711               ; (B) ｻﾌﾞﾀﾝｸ ｲﾝｸ開閉
CON
RES MR6712               ; (B) ｻﾌﾞﾀﾝｸ 循環回収
CON
TMH @95 #10              ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T95                 ; ｳｴｲﾄﾀｲﾏｰ
JMP @MR8006
STG @MR8006
SET MR6714               ; (B) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
LD R4708                 ; (B)液面1(最下)ｲﾝｸｴﾝﾄﾞ
AND R4709                ; (B)液面2(中下)KDﾄﾞﾗﾑ交換
AND R4710                ; (B)液面3(中上)供給制御
OR MR1810                ; (B) KDﾄﾞﾗﾑ交換検出FLG
OR @MR915                ; BｻﾌﾞﾀﾝｸHI検出表示中
ANL
TMR @96 #10              ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T96                 ; ｳｴｲﾄﾀｲﾏｰ
JMP @MR8007
STG @MR8007
RES MR6714               ; (B) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
TMH @97 #10              ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T97                 ; ｳｴｲﾄﾀｲﾏｰ
RES MR1910               ; (B)ｻﾌﾞﾀﾝｸ大気開放(Subtank)
CON
RES MR6708               ; (B) ｻﾌﾞﾀﾝｸ ｲﾝｸ供給　開
CON
RES MR6711               ; (B) ｻﾌﾞﾀﾝｸ ｲﾝｸ開閉
CON
JMP @MR8008
STG @MR8008
RES @MR8002              ; ｲﾝｸ供給中
CON
SET @MR8001              ; ｲﾝｸ供給完了
CON
ENDS
;KDﾄﾞﾗﾑ 撹拌
;KD drum Bubbling
STG @MR8100              ; KDﾄﾞﾗﾑ攪拌
MPS
DW.D #0 DM812            ; (B)KDﾄﾞﾗﾑ撹拌設定時間
CON
JMP @MR8102              ; Next step
MRD
LD MR1900                ; (B) 染料ｲﾝｸ
AND<> DM4008 #60         ; TP 切り替え画面No
ANL
MOV.D @T83 DM812         ; KDﾄﾞﾗﾑ染料攪拌時間  (B)KDﾄﾞﾗﾑ撹拌設定時間
MPP
LD MR1901                ; (B) 顔料ｲﾝｸ
OR= DM4008 #60           ; TP 切り替え画面No
ANL
MOV.D T92 DM812          ; KDﾄﾞﾗﾑ撹拌時間 B (0.1s)  (B)KDﾄﾞﾗﾑ撹拌設定時間
STG @MR8102              ; Next step
MPS
AND<> DM812 #0           ; (B)KDﾄﾞﾗﾑ撹拌設定時間
SET MR1811               ; (B) KDﾄﾞﾗﾑ攪拌中
CON
JMP @MR8103              ; Next step
MPP
AND= DM812 #0            ; (B)KDﾄﾞﾗﾑ撹拌設定時間
DW.D #0 DM814            ; (B)KDﾄﾞﾗﾑ撹拌実行時間(表示用)
CON
JMP @MR8106              ; Next step
STG @MR8103              ; Next step
RES MR6709               ; (B) ｻﾌﾞﾀﾝｸ撹拌
CON
SET MR6710               ; (B) KDﾄﾞﾗﾑ撹拌 開
CON
RES MR6711               ; (B) ｻﾌﾞﾀﾝｸ ｲﾝｸ開閉
CON
JMP @MR8104              ; Next step
STG @MR8104              ; Next step
TMR @80 #10              ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T80                 ; ｳｴｲﾄﾀｲﾏｰ
SET MR6708               ; (B) ｻﾌﾞﾀﾝｸ ｲﾝｸ供給　開
CON
SET MR6714               ; (B) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
JMP @MR8105              ; Next step
STG @MR8105              ; Next step
MPS
LD MR1900                ; (B) 染料ｲﾝｸ
AND<> DM4008 #60         ; TP 切り替え画面No
ANL
MPS
TMR @83 #0               ; KDﾄﾞﾗﾑ染料攪拌時間
CON
AND @T83                 ; KDﾄﾞﾗﾑ染料攪拌時間
JMP @MR8106              ; Next step
MPP
MOV.D @T83 DM814         ; KDﾄﾞﾗﾑ染料攪拌時間  (B)KDﾄﾞﾗﾑ撹拌実行時間(表示用)
MRD
LD MR1901                ; (B) 顔料ｲﾝｸ
OR= DM4008 #60           ; TP 切り替え画面No
ANL
MPS
TMR #92 #9999            ; KDﾄﾞﾗﾑ撹拌時間 B (0.1s)
CON
AND T92                  ; KDﾄﾞﾗﾑ撹拌時間 B (0.1s)
JMP @MR8106              ; Next step
MPP
MOV.D T92 DM814          ; KDﾄﾞﾗﾑ撹拌時間 B (0.1s)  (B)KDﾄﾞﾗﾑ撹拌実行時間(表示用)
MPP
LDB MR1900               ; (B) 染料ｲﾝｸ
ANB MR1901               ; (B) 顔料ｲﾝｸ
OR MR12115               ; ﾊﾞﾌﾞﾘﾝｸﾞ回避
ANL
JMP @MR8106              ; Next step
STG @MR8106              ; Next step
RES MR6714               ; (B) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
TMR @84 #10              ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T84                 ; ｳｴｲﾄﾀｲﾏｰ
JMP @MR8107              ; Next step
STG @MR8107              ; Next step
RES MR6710               ; (B) KDﾄﾞﾗﾑ撹拌 開
CON
RES MR6708               ; (B) ｻﾌﾞﾀﾝｸ ｲﾝｸ供給　開
CON
RES MR1811               ; (B) KDﾄﾞﾗﾑ攪拌中
CON
SET @MR8101              ; KDﾄﾞﾗﾑ撹拌完了
CON
ENDS
;ｻﾌﾞﾀﾝｸ 撹拌
;Subtank Bubbling
STG @MR8200              ; ｻﾌﾞﾀﾝｸ撹拌
MPS
DW.D #0 DM828            ; (B)ｻﾌﾞﾀﾝｸ撹拌設定時間
CON
JMP @MR8202              ; Next step
MRD
AND MR1900               ; (B) 染料ｲﾝｸ
MOV.D @T88 DM828         ; ｻﾌﾞﾀﾝｸ染料攪拌時間  (B)ｻﾌﾞﾀﾝｸ撹拌設定時間
MPP
AND MR1901               ; (B) 顔料ｲﾝｸ
MOV.D T96 DM828          ; ｻﾌﾞﾀﾝｸ撹拌時間 B (0.1s)  (B)ｻﾌﾞﾀﾝｸ撹拌設定時間
STG @MR8202              ; Next step
MPS
AND<> DM828 #0           ; (B)ｻﾌﾞﾀﾝｸ撹拌設定時間
SET MR1812               ; (B) ｻﾌﾞﾀﾝｸ攪拌中
CON
JMP @MR8203              ; Next step
MPP
AND= DM828 #0            ; (B)ｻﾌﾞﾀﾝｸ撹拌設定時間
DW.D #0 DM830            ; (B)ｻﾌﾞﾀﾝｸ撹拌実行時間(表示用)
CON
JMP @MR8206              ; Next step
STG @MR8203              ; Next step
RES MR6708               ; (B) ｻﾌﾞﾀﾝｸ ｲﾝｸ供給　開
CON
RES MR6710               ; (B) KDﾄﾞﾗﾑ撹拌 開
CON
SET MR6711               ; (B) ｻﾌﾞﾀﾝｸ ｲﾝｸ開閉
CON
JMP @MR8204              ; Next step
STG @MR8204              ; Next step
TMR @85 #10              ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T85                 ; ｳｴｲﾄﾀｲﾏｰ
SET MR6709               ; (B) ｻﾌﾞﾀﾝｸ撹拌
CON
SET MR6714               ; (B) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
JMP @MR8205              ; Next step
STG @MR8205              ; Next step
MPS
AND MR1900               ; (B) 染料ｲﾝｸ
MPS
TMR @88 #0               ; ｻﾌﾞﾀﾝｸ染料攪拌時間
CON
AND @T88                 ; ｻﾌﾞﾀﾝｸ染料攪拌時間
JMP @MR8206              ; Next step
MPP
MOV.D @T88 DM830         ; ｻﾌﾞﾀﾝｸ染料攪拌時間  (B)ｻﾌﾞﾀﾝｸ撹拌実行時間(表示用)
MRD
AND MR1901               ; (B) 顔料ｲﾝｸ
MPS
TMR #96 #9999            ; ｻﾌﾞﾀﾝｸ撹拌時間 B (0.1s)
CON
AND T96                  ; ｻﾌﾞﾀﾝｸ撹拌時間 B (0.1s)
JMP @MR8206              ; Next step
MPP
MOV.D T96 DM830          ; ｻﾌﾞﾀﾝｸ撹拌時間 B (0.1s)  (B)ｻﾌﾞﾀﾝｸ撹拌実行時間(表示用)
MPP
LDB MR1900               ; (B) 染料ｲﾝｸ
ANB MR1901               ; (B) 顔料ｲﾝｸ
OR MR12115               ; ﾊﾞﾌﾞﾘﾝｸﾞ回避
ANL
JMP @MR8206              ; Next step
STG @MR8206              ; Next step
RES MR6714               ; (B) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
TMR @89 #10              ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T89                 ; ｳｴｲﾄﾀｲﾏｰ
JMP @MR8207              ; Next step
STG @MR8207              ; Next step
RES MR6711               ; (B) ｻﾌﾞﾀﾝｸ ｲﾝｸ開閉
CON
RES MR6709               ; (B) ｻﾌﾞﾀﾝｸ撹拌
CON
RES MR1812               ; (B) ｻﾌﾞﾀﾝｸ攪拌中
CON
SET @MR8201              ; ｻﾌﾞﾀﾝｸ撹拌完了
CON
ENDS
;ｲﾝｸ循環
;Ink Circulation
STG @MR8300              ; Bｲﾝｸ循環
MPS
SET MR1813               ; (BLACK)ｲﾝｸ循環中
CON
JMP @MR8302              ; Next step
MPP
MOV #0 DM780             ; (B)ｲﾝｸ循環回数
STG @MR8302              ; Next step
SET DM783                ; (B)連続循環中画面表示
CON
@INC DM780               ; (B)ｲﾝｸ循環回数
CON
JMP @MR8303              ; Next step
STG @MR8303              ; Next step
TMR @90 #5               ; ｳｴｲﾄﾀｲﾏｰ
CON
AND @T90                 ; ｳｴｲﾄﾀｲﾏｰ
AND R4110                ; ﾃﾞｼｹｰﾀｰ内 圧力検出1(ﾓｼﾞｭｰﾙ用)
AND R4111                ; ﾃﾞｼｹｰﾀｰ内 圧力検出2(ﾓｼﾞｭｰﾙ用)
ANB MR36614              ; ﾌﾟﾗﾝｼﾞｬｰ4(B) 吐出引込実行中
ANB MR36615              ; ﾌﾟﾗﾝｼﾞｬｰ4(B) 吐出引込call完了
SET MR36600              ; ﾌﾟﾗﾝｼﾞｬｰ4(B) 吐出引込call FLG
CON
JMP @MR8304              ; Next step
STG @MR8304              ; Next step
AND MR36615              ; ﾌﾟﾗﾝｼﾞｬｰ4(B) 吐出引込call完了
RES MR36615              ; ﾌﾟﾗﾝｼﾞｬｰ4(B) 吐出引込call完了
CON
JMP @MR8305              ; Next step
STG @MR8305              ; Next step
MPS
LD< DM780 DM781          ; (B)ｲﾝｸ循環回数  (B)ｲﾝｸ循環回数(設定値)
ANB MR12115              ; ﾊﾞﾌﾞﾘﾝｸﾞ回避
ANL
JMP @MR8302              ; Next step
MPP
LD>= DM780 DM781         ; (B)ｲﾝｸ循環回数  (B)ｲﾝｸ循環回数(設定値)
OR MR12115               ; ﾊﾞﾌﾞﾘﾝｸﾞ回避
ANL
JMP @MR8306              ; Next step
STG @MR8306              ; Next step
RES DM783                ; (B)連続循環中画面表示
CON
RES MR1813               ; (BLACK)ｲﾝｸ循環中
CON
SET @MR8301              ; ｲﾝｸ循環完了 BLACK
CON
ENDS
;<h1/>★　背面操作
;***** 背面用 ｲﾝｸ吐出  ﾃﾞｼﾞ SW 処理  / Ink discharge digital sw check ******
;
LDP CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
ANB MR12014              ; 背面ｲﾝｸ吐出起動中
PMOV R1012 #0 DM1490 #0 #4;Digi-sw-1  ﾃﾞｼﾞSW NO ORG
;***** 背面SW 有効画面表示  / Rear discharge sw display ******
;
;背面SW起動時はﾃﾞｼｹｰﾀ圧OUT2がONになるまで待機(画面に減圧中の表示をする)まだ背面SWは使えない
;OUT2がONになると背面SW使用可(ﾃﾞｼｹｰﾀ圧を常時監視する)
LDP R41107               ; AUTO PARA08 SW
SET R41000               ; 背面SW有効表示
LDF R41015               ; 背面有効表示閉SW
OR R1002                 ; 操作BOX ﾎﾟｰｽﾞSW
OR R1006                 ; Rear PAUSE sw
ORP MR19004              ; 流路1 圧力異常
ORP MR19005              ; 流路2 圧力異常
ORP MR19006              ; 流路3 圧力異常
ORP MR19007              ; 流路4 圧力異常
ORF R50000               ; HOLD
ORF LR41107              ; AUTO-7 背面sw有効
AND R41000               ; 背面SW有効表示
ZRES DM738 DM739         ; KDﾊﾞﾌﾞﾘﾝｸﾞ中画面表示  ｻﾌﾞﾀﾝｸﾊﾞﾌﾞﾘﾝｸﾞ中画面表示
CON
ZRES DM748 DM749         ; ｲﾝｸ捨て出し中画面表示  ｲﾝｸ捨て出し回数画面表示
CON
RES DM738                ; KDﾊﾞﾌﾞﾘﾝｸﾞ中画面表示
CON
RES DM725                ; 脱気用ﾃﾞｼｹｰﾀ減圧中
CON
RES MR12014              ; 背面ｲﾝｸ吐出起動中
CON
RES MR306                ; 脱気用ﾃﾞｼｹｰﾀ起動
CON
ZRES @MR10001 @MR10004
CON
RES R41000               ; 背面SW有効表示
LD LR41107               ; AUTO-7 背面sw有効
AND R41000               ; 背面SW有効表示
SET MR306                ; 脱気用ﾃﾞｼｹｰﾀ起動
CON
@SET @MR10001
STG @MR10001
ANB R50008               ; Error
SET DM725                ; 脱気用ﾃﾞｼｹｰﾀ減圧中
CON
LD R4111                 ; ﾃﾞｼｹｰﾀｰ内 圧力検出2(ﾓｼﾞｭｰﾙ用)
OR R610                  ; 出荷前debug用
ANL
RES DM725                ; 脱気用ﾃﾞｼｹｰﾀ減圧中
CON
SET @MR10002             ; 背面SW起動時圧力OK
CON
ENDS
LD @MR10002              ; 背面SW起動時圧力OK
MPS
LD MR2104                ; ﾓｼﾞｭｰﾙ用真空ﾎﾟﾝﾌﾟ ON
AND R4111                ; ﾃﾞｼｹｰﾀｰ内 圧力検出2(ﾓｼﾞｭｰﾙ用)
OR R610                  ; 出荷前debug用
ANL
OUT @MR10015             ; 背面SW動作OK
MPP
LDB MR2104               ; ﾓｼﾞｭｰﾙ用真空ﾎﾟﾝﾌﾟ ON
ORB R4111                ; ﾃﾞｼｹｰﾀｰ内 圧力検出2(ﾓｼﾞｭｰﾙ用)
ANL
TMR @4 #10
CON
AND @T4
ANB R610                 ; 出荷前debug用
RES @MR10002             ; 背面SW起動時圧力OK
CON
SET @MR9400              ; Err23　ﾃﾞｼｹｰﾀ圧NG
CON
@SET @MR10003
;ERR65 ﾃﾞｼｹｰﾀUT異常 / DC-UT Error
STG @MR10003
ANB R50008               ; Error
AND @MR9403              ; Err23 解除完了
JMP @MR10004
STG @MR10004
RES R41000               ; 背面SW有効表示
CON
RES MR306                ; 脱気用ﾃﾞｼｹｰﾀ起動
CON
RES @MR9403              ; Err23 解除完了
CON
ENDS
;
LD @MR10015              ; 背面SW動作OK
ANB R50113               ; Err ST3
ANB MR12014              ; 背面ｲﾝｸ吐出起動中
ANP R1011                ; START sw(Rear Single)
MPS
AND= DM1490 #0           ; ﾃﾞｼﾞSW NO ORG
ZRES MR19004 MR19007     ; 流路1 圧力異常  流路4 圧力異常
CON
SET MR12014              ; 背面ｲﾝｸ吐出起動中
CON
@SET MR12000             ; 背面SWBOX_1-4
MRD
AND= DM1490 #1           ; ﾃﾞｼﾞSW NO ORG
RES MR19004              ; 流路1 圧力異常
CON
SET MR12014              ; 背面ｲﾝｸ吐出起動中
CON
@SET MR12001             ; 背面SWBOX_1
MRD
AND= DM1490 #2           ; ﾃﾞｼﾞSW NO ORG
RES MR19005              ; 流路2 圧力異常
CON
SET MR12014              ; 背面ｲﾝｸ吐出起動中
CON
@SET MR12002             ; 背面SWBOX_2
MRD
AND= DM1490 #3           ; ﾃﾞｼﾞSW NO ORG
RES MR19006              ; 流路3 圧力異常
CON
SET MR12014              ; 背面ｲﾝｸ吐出起動中
CON
@SET MR12003             ; 背面SWBOX_3
MRD
AND= DM1490 #4           ; ﾃﾞｼﾞSW NO ORG
RES MR19007              ; 流路4 圧力異常
CON
SET MR12014              ; 背面ｲﾝｸ吐出起動中
CON
@SET MR12004             ; 背面SWBOX_4
MRD
AND= DM1490 #5           ; ﾃﾞｼﾞSW NO ORG
SET MR12014              ; 背面ｲﾝｸ吐出起動中
CON
RES MR2902               ; ｻﾌﾞﾀﾝｸｲﾝｸ循環完了FLG
CON
@SET @MR11100            ; ｲﾝｸ循環処理
MRD
AND= DM1490 #6           ; ﾃﾞｼﾞSW NO ORG
MPS
SET MR12014              ; 背面ｲﾝｸ吐出起動中
CON
RES MR2900               ; 連続吐出完了FLG
CON
@SET @MR11500            ; 連続吐出動作
MPP
MOV #0 DM745             ; ｲﾝｸ捨て出し回数
MRD
LD= DM1490 #7            ; ﾃﾞｼﾞSW NO ORG
ANB MR3001               ; KDｲﾝｸ循環時間Call実行中
ANL
MPS
SET MR12014              ; 背面ｲﾝｸ吐出起動中
CON
RES MR2901               ; KDﾄﾞﾗﾑ攪拌完了FLG
CON
@SET @MR11700            ; KDﾄﾞﾗﾑ攪拌
MPP
MOV #0 DM735             ; ｲﾝｸ循環時間
MRD
AND= DM1490 #8           ; ﾃﾞｼﾞSW NO ORG
SET MR12400              ; ｷｬﾘﾌﾞﾚｰｼｮﾝ動作中
CON
SET MR12014              ; 背面ｲﾝｸ吐出起動中
CON
@SET @MR12000            ; ｷｬﾘﾌﾞﾚｰｼｮﾝ動作　Y
MRD
AND= DM1490 #9           ; ﾃﾞｼﾞSW NO ORG
SET MR12400              ; ｷｬﾘﾌﾞﾚｰｼｮﾝ動作中
CON
SET MR12014              ; 背面ｲﾝｸ吐出起動中
CON
@SET @MR12004            ; ｷｬﾘﾌﾞﾚｰｼｮﾝ動作　M
MRD
AND= DM1490 #10          ; ﾃﾞｼﾞSW NO ORG
SET MR12400              ; ｷｬﾘﾌﾞﾚｰｼｮﾝ動作中
CON
SET MR12014              ; 背面ｲﾝｸ吐出起動中
CON
@SET @MR12008            ; ｷｬﾘﾌﾞﾚｰｼｮﾝ動作　C
MPP
AND= DM1490 #11          ; ﾃﾞｼﾞSW NO ORG
SET MR12400              ; ｷｬﾘﾌﾞﾚｰｼｮﾝ動作中
CON
SET MR12014              ; 背面ｲﾝｸ吐出起動中
CON
@SET @MR12012            ; ｷｬﾘﾌﾞﾚｰｼｮﾝ動作　B
;<h1/>　　1回吐出動作
;　　Single Discharge
LD CR2002                ; 常時ON
MPS
AND MR12000              ; 背面SWBOX_1-4
SET MR36000              ; ﾌﾟﾗﾝｼﾞｬｰ1-4吐出引込call FLG
CON
@SET @MR11001            ; 次ｽﾃｯﾌﾟへ
MRD
AND MR12001              ; 背面SWBOX_1
SET MR36300              ; ﾌﾟﾗﾝｼﾞｬｰ1(Y)  吐出引込call FLG
CON
@SET @MR11001            ; 次ｽﾃｯﾌﾟへ
MRD
AND MR12002              ; 背面SWBOX_2
SET MR36400              ; ﾌﾟﾗﾝｼﾞｬｰ2(M)  吐出引込call FLG
CON
@SET @MR11001            ; 次ｽﾃｯﾌﾟへ
MRD
AND MR12003              ; 背面SWBOX_3
SET MR36500              ; ﾌﾟﾗﾝｼﾞｬｰ3(C) 吐出引込call FLG
CON
@SET @MR11001            ; 次ｽﾃｯﾌﾟへ
MPP
AND MR12004              ; 背面SWBOX_4
SET MR36600              ; ﾌﾟﾗﾝｼﾞｬｰ4(B) 吐出引込call FLG
CON
@SET @MR11001            ; 次ｽﾃｯﾌﾟへ
STG @MR11001             ; 次ｽﾃｯﾌﾟへ
LD MR36014               ; ﾌﾟﾗﾝｼﾞｬｰ1-4吐出引込実行中
OR MR36314               ; ﾌﾟﾗﾝｼﾞｬｰ1(Y) 吐出引込実行中
OR MR36414               ; ﾌﾟﾗﾝｼﾞｬｰ2(M) 吐出引込実行中
OR MR36514               ; ﾌﾟﾗﾝｼﾞｬｰ3(C) 吐出引込実行中
OR MR36614               ; ﾌﾟﾗﾝｼﾞｬｰ4(B) 吐出引込実行中
ANL
RES MR12000              ; 背面SWBOX_1-4
CON
RES MR12001              ; 背面SWBOX_1
CON
RES MR12002              ; 背面SWBOX_2
CON
RES MR12003              ; 背面SWBOX_3
CON
RES MR12004              ; 背面SWBOX_4
CON
JMP @MR11002             ; 次ｽﾃｯﾌﾟへ
STG @MR11002             ; 次ｽﾃｯﾌﾟへ
LD MR36015               ; ﾌﾟﾗﾝｼﾞｬｰ1-4吐出引込call完了
OR MR36315               ; ﾌﾟﾗﾝｼﾞｬｰ1(Y)  吐出引込call完了
OR MR36415               ; ﾌﾟﾗﾝｼﾞｬｰ2(M) 吐出引込call完了
OR MR36515               ; ﾌﾟﾗﾝｼﾞｬｰ3(C) 吐出引込call完了
OR MR36615               ; ﾌﾟﾗﾝｼﾞｬｰ4(B) 吐出引込call完了
ANL
JMP @MR11003             ; 次ｽﾃｯﾌﾟへ
STG @MR11003             ; 次ｽﾃｯﾌﾟへ
MPS
RES MR36015              ; ﾌﾟﾗﾝｼﾞｬｰ1-4吐出引込call完了
CON
RES MR36315              ; ﾌﾟﾗﾝｼﾞｬｰ1(Y)  吐出引込call完了
CON
RES MR36415              ; ﾌﾟﾗﾝｼﾞｬｰ2(M) 吐出引込call完了
CON
RES MR36515              ; ﾌﾟﾗﾝｼﾞｬｰ3(C) 吐出引込call完了
CON
RES MR36615              ; ﾌﾟﾗﾝｼﾞｬｰ4(B) 吐出引込call完了
CON
RES MR12014              ; 背面ｲﾝｸ吐出起動中
CON
ENDS
MRD
LDB MR19004              ; 流路1 圧力異常
ANB MR19005              ; 流路2 圧力異常
ANB MR19006              ; 流路3 圧力異常
ANB MR19007              ; 流路4 圧力異常
ANL
RES MR19008              ; 注入圧力異常記憶
MPP
AND MR17004
RES MR17004
;<h1/>　　ｲﾝｸ循環→吐出3回動作 (All colors)
;　　Ink Circuration & Discharge 3 times
;背面SW有効時のみ吐出ループを行う。吐出完了時ｴﾗｰをだし、定停止となる
;ｲﾝｸ循環処理 / Ink circuration
STG @MR11100             ; ｲﾝｸ循環処理
JMP @MR11101
MOV #0 DM745             ; ｲﾝｸ捨て出し回数
MOV #3 DM746             ; ｲﾝｸ捨て出し回数(設定値)
STG @MR11101
ANB DM753                ; (Y)連続循環中画面表示
ANB DM763                ; (M)連続循環中画面表示
ANB DM773                ; (C)連続循環中画面表示
ANB DM783                ; (B)連続循環中画面表示
JMP @MR11102
STG @MR11102
MPS
AND= DM287 #1            ; ModelIdentficationNumber
SET @MR8300              ; Bｲﾝｸ循環
CON
JMP @MR11103
MRD
AND= DM287 #2            ; ModelIdentficationNumber
SET @MR2300              ; Yｲﾝｸ循環
CON
SET @MR4300              ; Mｲﾝｸ循環
CON
SET @MR6300              ; Cｲﾝｸ循環
CON
JMP @MR11103
MPP
AND= DM287 #3            ; ModelIdentficationNumber
SET @MR2300              ; Yｲﾝｸ循環
CON
SET @MR4300              ; Mｲﾝｸ循環
CON
SET @MR6300              ; Cｲﾝｸ循環
CON
SET @MR8300              ; Bｲﾝｸ循環
CON
JMP @MR11103
STG @MR11103
MPS
AND R41000               ; 背面SW有効表示
MPS
LD= DM287 #1             ; ModelIdentficationNumber
AND @MR8301              ; ｲﾝｸ循環完了 BLACK
ANL
JMP @MR11115             ; 循環終了
MRD
LD= DM287 #2             ; ModelIdentficationNumber
AND @MR2301              ; ｲﾝｸ循環完了 YELLOW
AND @MR4301              ; ｲﾝｸ循環完了 MAGENTA
AND @MR6301              ; ｲﾝｸ循環完了 CYAN
ANL
JMP @MR11115             ; 循環終了
MPP
LD= DM287 #3             ; ModelIdentficationNumber
AND @MR2301              ; ｲﾝｸ循環完了 YELLOW
AND @MR4301              ; ｲﾝｸ循環完了 MAGENTA
AND @MR6301              ; ｲﾝｸ循環完了 CYAN
AND @MR8301              ; ｲﾝｸ循環完了 BLACK
ANL
JMP @MR11115             ; 循環終了
MPP
ANB R41000               ; 背面SW有効表示
SET MR12115              ; ﾊﾞﾌﾞﾘﾝｸﾞ回避
CON
JMP @MR11110             ; 循環中止
STG @MR11110             ; 循環中止
LD @MR2301               ; ｲﾝｸ循環完了 YELLOW
AND @MR4301              ; ｲﾝｸ循環完了 MAGENTA
AND @MR6301              ; ｲﾝｸ循環完了 CYAN
OR= DM287 #1             ; ModelIdentficationNumber
ANL
LD @MR8301               ; ｲﾝｸ循環完了 BLACK
OR= DM287 #2             ; ModelIdentficationNumber
ANL
RES @MR2301              ; ｲﾝｸ循環完了 YELLOW
CON
RES @MR4301              ; ｲﾝｸ循環完了 MAGENTA
CON
RES @MR6301              ; ｲﾝｸ循環完了 CYAN
CON
RES @MR8301              ; ｲﾝｸ循環完了 BLACK
CON
JMP @MR11312             ; 未完了終了
STG @MR11115             ; 循環終了
RES @MR2301              ; ｲﾝｸ循環完了 YELLOW
CON
RES @MR4301              ; ｲﾝｸ循環完了 MAGENTA
CON
RES @MR6301              ; ｲﾝｸ循環完了 CYAN
CON
RES @MR8301              ; ｲﾝｸ循環完了 BLACK
CON
JMP @MR11200             ; 吐出処理
;ｲﾝｸ吐出 / Ink Discharge
STG @MR11200             ; 吐出処理
SET DM748                ; ｲﾝｸ捨て出し中画面表示
CON
@INC DM745               ; ｲﾝｸ捨て出し回数
CON
JMP @MR11201
STG @MR11201
MPS
LD= DM287 #1             ; ModelIdentficationNumber
ANB MR36614              ; ﾌﾟﾗﾝｼﾞｬｰ4(B) 吐出引込実行中
ANL
SET MR36600              ; ﾌﾟﾗﾝｼﾞｬｰ4(B) 吐出引込call FLG
CON
JMP @MR11202
MRD
LD= DM287 #2             ; ModelIdentficationNumber
ANB MR36714              ; ﾌﾟﾗﾝｼﾞｬｰ1-3吐出引込実行中
ANL
SET MR36700              ; ﾌﾟﾗﾝｼﾞｬｰ1-3吐出引込call FLG
CON
JMP @MR11202
MPP
LD= DM287 #3             ; ModelIdentficationNumber
ANB MR36014              ; ﾌﾟﾗﾝｼﾞｬｰ1-4吐出引込実行中
ANL
SET MR36000              ; ﾌﾟﾗﾝｼﾞｬｰ1-4吐出引込call FLG
CON
JMP @MR11202
STG @MR11202
MPS
LD= DM287 #1             ; ModelIdentficationNumber
ANB MR36614              ; ﾌﾟﾗﾝｼﾞｬｰ4(B) 吐出引込実行中
AND MR36615              ; ﾌﾟﾗﾝｼﾞｬｰ4(B) 吐出引込call完了
ANL
RES MR36615              ; ﾌﾟﾗﾝｼﾞｬｰ4(B) 吐出引込call完了
CON
JMP @MR11203
MRD
LD= DM287 #2             ; ModelIdentficationNumber
ANB MR36714              ; ﾌﾟﾗﾝｼﾞｬｰ1-3吐出引込実行中
AND MR36715              ; ﾌﾟﾗﾝｼﾞｬｰ1-3吐出引込call完了
ANL
RES MR36715              ; ﾌﾟﾗﾝｼﾞｬｰ1-3吐出引込call完了
CON
JMP @MR11203
MPP
LD= DM287 #3             ; ModelIdentficationNumber
ANB MR36014              ; ﾌﾟﾗﾝｼﾞｬｰ1-4吐出引込実行中
AND MR36015              ; ﾌﾟﾗﾝｼﾞｬｰ1-4吐出引込call完了
ANL
RES MR36015              ; ﾌﾟﾗﾝｼﾞｬｰ1-4吐出引込call完了
CON
JMP @MR11203
STG @MR11203
MPS
AND< DM745 DM746         ; ｲﾝｸ捨て出し回数  ｲﾝｸ捨て出し回数(設定値)
MPS
AND R41000               ; 背面SW有効表示
JMP @MR11200             ; 吐出処理
MPP
ANB R41000               ; 背面SW有効表示
JMP @MR11312             ; 未完了終了
MPP
AND>= DM745 DM746        ; ｲﾝｸ捨て出し回数  ｲﾝｸ捨て出し回数(設定値)
JMP @MR11314             ; 連続循環 完了
;未完了
STG @MR11312             ; 未完了終了
RES MR12115              ; ﾊﾞﾌﾞﾘﾝｸﾞ回避
CON
RES MR2902               ; ｻﾌﾞﾀﾝｸｲﾝｸ循環完了FLG
CON
SET @MR9104              ; Err81 連続吐出未完了
CON
JMP @MR11313             ; 3110
STG @MR11313             ; 3110
AND @MR9107              ; Err81 Release
RES @MR9107              ; Err81 Release
CON
JMP @MR11315             ; 終了処理
;連続循環完了
STG @MR11314             ; 連続循環 完了
SET MR2900               ; 連続吐出完了FLG
CON
SET MR2902               ; ｻﾌﾞﾀﾝｸｲﾝｸ循環完了FLG
CON
JMP @MR11315             ; 終了処理
;
STG @MR11315             ; 終了処理
SET @MR002               ; 背面SW動作終了記憶
CON
RES MR12014              ; 背面ｲﾝｸ吐出起動中
CON
ANB MR12014              ; 背面ｲﾝｸ吐出起動中
RES DM748                ; ｲﾝｸ捨て出し中画面表示
CON
ENDS
;<h1/>　　連続吐出動作　　
;　　Continuous Discharge
STG @MR11500             ; 連続吐出動作
JMP @MR11501             ; 吐出開始
MOV #0 DM745             ; ｲﾝｸ捨て出し回数
MOV FM400 DM746          ; 連続捨てだし回数  ｲﾝｸ捨て出し回数(設定値)
STG @MR11501             ; 吐出開始
SET DM748                ; ｲﾝｸ捨て出し中画面表示
CON
@INC DM745               ; ｲﾝｸ捨て出し回数
CON
JMP @MR11502
STG @MR11502
MPS
LD= DM287 #1             ; ModelIdentficationNumber
ANB MR36614              ; ﾌﾟﾗﾝｼﾞｬｰ4(B) 吐出引込実行中
ANL
SET MR36600              ; ﾌﾟﾗﾝｼﾞｬｰ4(B) 吐出引込call FLG
CON
JMP @MR11503
MRD
LD= DM287 #2             ; ModelIdentficationNumber
ANB MR36714              ; ﾌﾟﾗﾝｼﾞｬｰ1-3吐出引込実行中
ANL
SET MR36700              ; ﾌﾟﾗﾝｼﾞｬｰ1-3吐出引込call FLG
CON
JMP @MR11503
MPP
LD= DM287 #3             ; ModelIdentficationNumber
ANB MR36014              ; ﾌﾟﾗﾝｼﾞｬｰ1-4吐出引込実行中
ANL
SET MR36000              ; ﾌﾟﾗﾝｼﾞｬｰ1-4吐出引込call FLG
CON
JMP @MR11503
STG @MR11503
MPS
LD= DM287 #1             ; ModelIdentficationNumber
ANB MR36614              ; ﾌﾟﾗﾝｼﾞｬｰ4(B) 吐出引込実行中
AND MR36615              ; ﾌﾟﾗﾝｼﾞｬｰ4(B) 吐出引込call完了
ANL
RES MR36615              ; ﾌﾟﾗﾝｼﾞｬｰ4(B) 吐出引込call完了
CON
JMP @MR11504
MRD
LD= DM287 #2             ; ModelIdentficationNumber
ANB MR36714              ; ﾌﾟﾗﾝｼﾞｬｰ1-3吐出引込実行中
AND MR36715              ; ﾌﾟﾗﾝｼﾞｬｰ1-3吐出引込call完了
ANL
RES MR36715              ; ﾌﾟﾗﾝｼﾞｬｰ1-3吐出引込call完了
CON
JMP @MR11504
MPP
LD= DM287 #3             ; ModelIdentficationNumber
ANB MR36014              ; ﾌﾟﾗﾝｼﾞｬｰ1-4吐出引込実行中
AND MR36015              ; ﾌﾟﾗﾝｼﾞｬｰ1-4吐出引込call完了
ANL
RES MR36015              ; ﾌﾟﾗﾝｼﾞｬｰ1-4吐出引込call完了
CON
JMP @MR11504
STG @MR11504
MPS
AND< DM745 DM746         ; ｲﾝｸ捨て出し回数  ｲﾝｸ捨て出し回数(設定値)
MPS
AND R41000               ; 背面SW有効表示
JMP @MR11501             ; 吐出開始
MPP
ANB R41000               ; 背面SW有効表示
JMP @MR11512             ; 未完終了
MPP
AND>= DM745 DM746        ; ｲﾝｸ捨て出し回数  ｲﾝｸ捨て出し回数(設定値)
JMP @MR11514             ; 正常終了
;未完了
STG @MR11512             ; 未完終了
RES MR2900               ; 連続吐出完了FLG
CON
SET @MR9112              ; Err83 連続捨て出し未完了
CON
JMP @MR11513
STG @MR11513
AND @MR9115              ; Err83 Release
RES @MR9115              ; Err83 Release
CON
JMP @MR11515
;連続吐出完了
STG @MR11514             ; 正常終了
SET MR2900               ; 連続吐出完了FLG
CON
JMP @MR11515
;
STG @MR11515
SET @MR002               ; 背面SW動作終了記憶
CON
RES MR12014              ; 背面ｲﾝｸ吐出起動中
CON
ANB MR12014              ; 背面ｲﾝｸ吐出起動中
RES DM748                ; ｲﾝｸ捨て出し中画面表示
CON
ENDS
;<h1/>　　KDﾄﾞﾗﾑ撹拌動作
;　　KD drum bubling
STG @MR11700             ; KDﾄﾞﾗﾑ攪拌
SET MR3001               ; KDｲﾝｸ循環時間Call実行中
CON
JMP @MR11701
STG @MR11701
ANB MR1211               ; (Y) KDﾄﾞﾗﾑ攪拌中
ANB MR1411               ; (M) KDﾄﾞﾗﾑ攪拌中
ANB MR1611               ; (C) KDﾄﾞﾗﾑ攪拌中
ANB MR1811               ; (B) KDﾄﾞﾗﾑ攪拌中
SET @MR2100              ; KDﾄﾞﾗﾑ攪拌
CON
SET @MR4100              ; KDﾄﾞﾗﾑ攪拌
CON
SET @MR6100              ; KDﾄﾞﾗﾑ攪拌
CON
SET @MR8100              ; KDﾄﾞﾗﾑ攪拌
CON
JMP @MR11702
STG @MR11702
MPS
LD @MR2101               ; KDﾄﾞﾗﾑ撹拌完了
AND @MR4101              ; KDﾄﾞﾗﾑ撹拌完了
AND @MR6101              ; KDﾄﾞﾗﾑ撹拌完了
AND @MR8101              ; KDﾄﾞﾗﾑ撹拌完了
ANL
RES @MR2101              ; KDﾄﾞﾗﾑ撹拌完了
CON
RES @MR4101              ; KDﾄﾞﾗﾑ撹拌完了
CON
RES @MR6101              ; KDﾄﾞﾗﾑ撹拌完了
CON
RES @MR8101              ; KDﾄﾞﾗﾑ撹拌完了
CON
JMP @MR11714             ; 正常終了
MPP
ANB R41000               ; 背面SW有効表示
SET MR12115              ; ﾊﾞﾌﾞﾘﾝｸﾞ回避
CON
JMP @MR11703             ; 途中終了
STG @MR11703             ; 途中終了
AND @MR2101              ; KDﾄﾞﾗﾑ撹拌完了
AND @MR4101              ; KDﾄﾞﾗﾑ撹拌完了
AND @MR6101              ; KDﾄﾞﾗﾑ撹拌完了
AND @MR8101              ; KDﾄﾞﾗﾑ撹拌完了
RES @MR2101              ; KDﾄﾞﾗﾑ撹拌完了
CON
RES @MR4101              ; KDﾄﾞﾗﾑ撹拌完了
CON
RES @MR6101              ; KDﾄﾞﾗﾑ撹拌完了
CON
RES @MR8101              ; KDﾄﾞﾗﾑ撹拌完了
CON
JMP @MR11712             ; 未完了
;未完了
STG @MR11712             ; 未完了
RES MR3001               ; KDｲﾝｸ循環時間Call実行中
CON
RES MR2901               ; KDﾄﾞﾗﾑ攪拌完了FLG
CON
SET @MR9204              ; Err85 KDｲﾝｸ循環未完了
CON
JMP @MR11713
STG @MR11713
AND @MR9207              ; Err85 Release
RES @MR9207              ; Err85 Release
CON
JMP @MR11715             ; 終了処理
;KDﾄﾞﾗﾑ攪拌完了
STG @MR11714             ; 正常終了
RES MR3001               ; KDｲﾝｸ循環時間Call実行中
CON
SET MR2901               ; KDﾄﾞﾗﾑ攪拌完了FLG
CON
JMP @MR11715             ; 終了処理
;終了
STG @MR11715             ; 終了処理
SET @MR002               ; 背面SW動作終了記憶
CON
RES MR12014              ; 背面ｲﾝｸ吐出起動中
CON
ANB MR12014              ; 背面ｲﾝｸ吐出起動中
ENDS
;<h1/>　　Yellow FCL ｷｬﾘﾌﾞﾚｰｼｮﾝ動作
;　　Yellow FCL calibration
STG @MR12000             ; ｷｬﾘﾌﾞﾚｰｼｮﾝ動作　Y
ANB R1011                ; START sw(Rear Single)
SET MR6402               ; ｲﾝｸ開閉1 開
CON
SET MR6403               ; ｲﾝｸ注入1 開
CON
JMP @MR12001
STG @MR12001
ANP R1011                ; START sw(Rear Single)
RES MR6402               ; ｲﾝｸ開閉1 開
CON
RES MR6403               ; ｲﾝｸ注入1 開
CON
JMP @MR12002
STG @MR12002
TMR #83 #9999            ; 注入安定時間 Y
CON
AND T83                  ; 注入安定時間 Y
JMP @MR12003
STG @MR12003
SET @MR002               ; 背面SW動作終了記憶
CON
RES MR12400              ; ｷｬﾘﾌﾞﾚｰｼｮﾝ動作中
CON
RES MR12014              ; 背面ｲﾝｸ吐出起動中
CON
ANB MR12400              ; ｷｬﾘﾌﾞﾚｰｼｮﾝ動作中
ANB MR12014              ; 背面ｲﾝｸ吐出起動中
ENDS
;<h1/>　　Magenta FCL ｷｬﾘﾌﾞﾚｰｼｮﾝ動作
;　　Magenta FCL calibration
STG @MR12004             ; ｷｬﾘﾌﾞﾚｰｼｮﾝ動作　M
ANB R1011                ; START sw(Rear Single)
SET MR6406               ; ｲﾝｸ開閉2 開
CON
SET MR6407               ; ｲﾝｸ注入2 開
CON
JMP @MR12005
STG @MR12005
ANP R1011                ; START sw(Rear Single)
RES MR6406               ; ｲﾝｸ開閉2 開
CON
RES MR6407               ; ｲﾝｸ注入2 開
CON
JMP @MR12006
STG @MR12006
TMR #84 #9999            ; 注入安定時間 M
CON
AND T84                  ; 注入安定時間 M
JMP @MR12007
STG @MR12007
SET @MR002               ; 背面SW動作終了記憶
CON
RES MR12400              ; ｷｬﾘﾌﾞﾚｰｼｮﾝ動作中
CON
RES MR12014              ; 背面ｲﾝｸ吐出起動中
CON
ANB MR12400              ; ｷｬﾘﾌﾞﾚｰｼｮﾝ動作中
ANB MR12014              ; 背面ｲﾝｸ吐出起動中
ENDS
;<h1/>　　Cyan FCL ｷｬﾘﾌﾞﾚｰｼｮﾝ動作
;　　Cyan FCL calibration
STG @MR12008             ; ｷｬﾘﾌﾞﾚｰｼｮﾝ動作　C
ANB R1011                ; START sw(Rear Single)
SET MR6410               ; ｲﾝｸ開閉3 開
CON
SET MR6411               ; ｲﾝｸ注入3 開
CON
JMP @MR12009
STG @MR12009
ANP R1011                ; START sw(Rear Single)
RES MR6410               ; ｲﾝｸ開閉3 開
CON
RES MR6411               ; ｲﾝｸ注入3 開
CON
JMP @MR12010
STG @MR12010
TMR #85 #9999            ; 注入安定時間 C
CON
AND T85                  ; 注入安定時間 C
JMP @MR12011
STG @MR12011
SET @MR002               ; 背面SW動作終了記憶
CON
RES MR12400              ; ｷｬﾘﾌﾞﾚｰｼｮﾝ動作中
CON
RES MR12014              ; 背面ｲﾝｸ吐出起動中
CON
ANB MR12400              ; ｷｬﾘﾌﾞﾚｰｼｮﾝ動作中
ANB MR12014              ; 背面ｲﾝｸ吐出起動中
ENDS
;<h1/>　　Black FCL ｷｬﾘﾌﾞﾚｰｼｮﾝ動作
;　　Black FCL calibration
STG @MR12012             ; ｷｬﾘﾌﾞﾚｰｼｮﾝ動作　B
ANB R1011                ; START sw(Rear Single)
SET MR6414               ; ｲﾝｸ開閉4 開
CON
SET MR6415               ; ｲﾝｸ注入4 開
CON
JMP @MR12013
STG @MR12013
ANP R1011                ; START sw(Rear Single)
RES MR6414               ; ｲﾝｸ開閉4 開
CON
RES MR6415               ; ｲﾝｸ注入4 開
CON
JMP @MR12014
STG @MR12014
TMR #86 #9999            ; 注入安定時間 B
CON
AND T86                  ; 注入安定時間 B
JMP @MR12015
STG @MR12015
SET @MR002               ; 背面SW動作終了記憶
CON
RES MR12400              ; ｷｬﾘﾌﾞﾚｰｼｮﾝ動作中
CON
RES MR12014              ; 背面ｲﾝｸ吐出起動中
CON
ANB MR12400              ; ｷｬﾘﾌﾞﾚｰｼｮﾝ動作中
ANB MR12014              ; 背面ｲﾝｸ吐出起動中
ENDS
;背面ｽｲｯﾁ動作終了時お知らせﾌﾞｻﾞｰ
LDP @MR002               ; 背面SW動作終了記憶
OR R42106                ; 背面ｽｲｯﾁ動作終了ﾌﾞｻﾞｰON
ANB T726                 ; 背面sw動作終了動作
MPS
RES @MR002               ; 背面SW動作終了記憶
CON
OUT R42106               ; 背面ｽｲｯﾁ動作終了ﾌﾞｻﾞｰON
MPP
TMR #726 #10             ; 背面sw動作終了動作
;<h1/>***** 流量計 *****
;***** Flowmeter*****
;**** 測定ﾏｸﾛ開始 *****
;**** Measurement macro beginning *****
;代官山からのﾃﾞｰﾀを格納
;Data from Daikanyama is stored. 
;YELLOW
LD CR2002                ; 常時ON
MPS
DW #0 DM2704             ; 注入量上限値変換ｴﾘｱ5(Null) Y
CON
BMOV DM267 DM2700 #2     ; Y InkWeightMax1  注入量上限値変換ｴﾘｱ1 Y
MRD
RDASC.D DM2700 DM2705    ; 注入量上限値変換ｴﾘｱ1 Y  注入量上限値変換結果1 Y
MRD
DW #0 DM2714             ; 注入量下限値変換ｴﾘｱ5(Null) Y
CON
BMOV DM269 DM2710 #2     ; Y InkWeightMin1  注入量下限値変換ｴﾘｱ1 Y
MRD
RDASC.D DM2710 DM2715    ; 注入量下限値変換ｴﾘｱ1 Y  注入量下限値変換結果1 Y
MPP
LDA.D DM2705             ; 注入量上限値変換結果1 Y
CON
STA.D DM2800             ; Y 上限規格
CON
LDA.D DM2715             ; 注入量下限値変換結果1 Y
CON
STA.D DM2802             ; Y 下限規格
CON
LDA.D DM357              ; Y FC1Y 1
CON
STA.D DM2804             ; Y 係数 a
CON
LDA.L DM359              ; Y FC1B 1
CON
STA.L DM2806             ; Y 係数 b
;MAGENTA
LD CR2002                ; 常時ON
MPS
DW #0 DM2724             ; 注入量上限値変換ｴﾘｱ5(Null) M
CON
BMOV DM251 DM2720 #2     ; M InkWeightMax1  注入量上限値変換ｴﾘｱ1 M
MRD
RDASC.D DM2720 DM2725    ; 注入量上限値変換ｴﾘｱ1 M  注入量上限値変換結果1 M
MRD
DW #0 DM2734             ; 注入量下限値変換ｴﾘｱ5(Null) M
CON
BMOV DM253 DM2730 #2     ; M InkWeightMin1  注入量下限値変換ｴﾘｱ1 M
MRD
RDASC.D DM2730 DM2735    ; 注入量下限値変換ｴﾘｱ1 M  注入量下限値変換結果1 M
MPP
LDA.D DM2725             ; 注入量上限値変換結果1 M
CON
STA.D DM2820             ; M 上限規格
CON
LDA.D DM2735             ; 注入量下限値変換結果1 M
CON
STA.D DM2822             ; M 下限規格
CON
LDA.D DM347              ; M FC1M 1
CON
STA.D DM2824             ; M 係数 a
CON
LDA.L DM349              ; M FC1B 1
CON
STA.L DM2826             ; M 係数 b
;CYAN
LD CR2002                ; 常時ON
MPS
DW #0 DM2744             ; 注入量上限値変換ｴﾘｱ5(Null) C
CON
BMOV DM235 DM2740 #2     ; C InkWeightMax1  注入量上限値変換ｴﾘｱ1 C
MRD
RDASC.D DM2740 DM2745    ; 注入量上限値変換ｴﾘｱ1 C  注入量上限値変換結果1 C
MRD
DW #0 DM2754             ; 注入量下限値変換ｴﾘｱ5(Null) C
CON
BMOV DM237 DM2750 #2     ; C InkWeightMin1  注入量下限値変換ｴﾘｱ1 C
MRD
RDASC.D DM2750 DM2755    ; 注入量下限値変換ｴﾘｱ1 C  注入量下限値変換結果1 C
MPP
LDA.D DM2745             ; 注入量上限値変換結果1 C
CON
STA.D DM2840             ; C 上限規格
CON
LDA.D DM2755             ; 注入量下限値変換結果1 C
CON
STA.D DM2842             ; C 下限規格
CON
LDA.D DM337              ; C FC1C 1
CON
STA.D DM2844             ; C 係数 a
CON
LDA.L DM339              ; C FC1B 1
CON
STA.L DM2846             ; C 係数 b
;BLACK
LD CR2002                ; 常時ON
MPS
DW #0 DM2764             ; 注入量上限値変換ｴﾘｱ5(Null) B
CON
BMOV DM283 DM2760 #2     ; BK InkWeightMax1  注入量上限値変換ｴﾘｱ1 B
MRD
RDASC.D DM2760 DM2765    ; 注入量上限値変換ｴﾘｱ1 B  注入量上限値変換結果1 B
MRD
DW #0 DM2774             ; 注入量下限値変換ｴﾘｱ5(Null) B
CON
BMOV DM285 DM2770 #2     ; BK InkWeightMin1  注入量下限値変換ｴﾘｱ1 B
MRD
RDASC.D DM2770 DM2775    ; 注入量下限値変換ｴﾘｱ1 B  注入量下限値変換結果1 B
MPP
LDA.D DM2765             ; 注入量上限値変換結果1 B
CON
STA.D DM2860             ; B 上限規格
CON
LDA.D DM2775             ; 注入量下限値変換結果1 B
CON
STA.D DM2862             ; B 下限規格
CON
LDA.D DM367              ; BK FC1BK 1
CON
STA.D DM2864             ; B 係数 a
CON
LDA.L DM369              ; BK FC1B 1
CON
STA.L DM2866             ; B 係数 b
;<h1/>ﾃﾞｰﾀ保存用
;For data storage
;サンプリング設定
;流量値、圧力値、RB指令電流値をサンプリングする。
LD LR105                 ; ｻﾝﾌﾟﾘﾝｸﾞon
MC
LD CR2002                ; 常時ON
PMOV DM1663 #0 DM1661 #0 #8;SAMP03_CSV保存ｺﾝﾄﾛｰﾙ  SAMP03CSV保存CTL
PMOV DM1661 #8 DM1664 #0 #8;SAMP03CSV保存CTL  SAMP03_CSV保存ｽﾃｰﾀｽ
PMOV DM1668 #0 DM1666 #0 #8;SAMP04_csv保存ｺﾝﾄﾛｰﾙ  SAMP04CSV保存CTL
PMOV DM1666 #8 DM1669 #0 #8;SAMP04CSV保存CTL  SAMP04_csv保存ｽﾃｰﾀｽ
LDF MR9804               ; ｻﾝﾌﾟﾘﾝｸﾞ開始
DW #1 DM1663             ; SAMP03_CSV保存ｺﾝﾄﾛｰﾙ
LD= DM1663 #1            ; SAMP03_CSV保存ｺﾝﾄﾛｰﾙ
TMR @18 #2
CON
AND @T18
AND= DM1664 #0           ; SAMP03_CSV保存ｽﾃｰﾀｽ
@INC DM1662              ; ﾌｧｲﾙ番号
CON
OFDL #10 MR9800          ; ﾃﾞｰﾀ1ｸﾘｱ
CON
DW #0 DM1663             ; SAMP03_CSV保存ｺﾝﾄﾛｰﾙ
LDF MR9805               ; ｻﾝﾌﾟﾘﾝｸﾞ開始
DW #1 DM1668             ; SAMP04_csv保存ｺﾝﾄﾛｰﾙ
LD= DM1668 #1            ; SAMP04_csv保存ｺﾝﾄﾛｰﾙ
TMR @19 #2
CON
AND @T19
AND= DM1669 #0           ; SAMP04_csv保存ｽﾃｰﾀｽ
OFDL #10 MR9801          ; ﾃﾞ-ﾀ2ｸﾘｱ
CON
@INC DM1667              ; ﾌｧｲﾙ番号
CON
DW #0 DM1668             ; SAMP04_csv保存ｺﾝﾄﾛｰﾙ
MCR
;<h1/>Error
;
;***** 連続循環未完了表示  ERROR NO 81  /  Consective discharge non-finishing display  *****
;
STG @MR9104              ; Err81 連続吐出未完了
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
SET LR49914              ; ｴﾗｰﾘｾｯﾄｷｰ要求
CON
JMP @MR9105              ; 105
MOV #81 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR9105              ; 105
AND R50008               ; Error
JMP @MR9106              ; 106
STG @MR9106              ; 106
ANB R50008               ; Error
SET @MR9107              ; Err81 Release
CON
ENDS
;***** 連続吐出未完了表示  ERROR NO 83  /  Consective discharge non-finishing display  *****
;
STG @MR9112              ; Err83 連続捨て出し未完了
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
SET LR49914              ; ｴﾗｰﾘｾｯﾄｷｰ要求
CON
JMP @MR9113              ; 113
MOV #83 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR9113              ; 113
AND R50008               ; Error
JMP @MR9114              ; 114
STG @MR9114              ; 114
ANB R50008               ; Error
SET @MR9115              ; Err83 Release
CON
ENDS
;***** ｻﾌﾞﾀﾝｸ撹拌未完了表示  ERROR NO 84  /  Subtank bubking non-finishing display  *****
;
STG @MR9200              ; Err84 KDｲﾝｸ循環完了
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
SET LR49914              ; ｴﾗｰﾘｾｯﾄｷｰ要求
CON
JMP @MR9201              ; 201
MOV #84 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR9201              ; 201
AND R50008               ; Error
JMP @MR9202              ; 202
STG @MR9202              ; 202
ANB R50008               ; Error
SET @MR9203              ; Err84 Release
CON
ENDS
;***** KDﾄﾞﾗﾑ撹拌未完了表示  ERROR NO 85  /  KD drum bubking non-finishing display  *****
;
STG @MR9204              ; Err85 KDｲﾝｸ循環未完了
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
SET LR49914              ; ｴﾗｰﾘｾｯﾄｷｰ要求
CON
JMP @MR9205              ; 205
MOV #85 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR9205              ; 205
AND R50008               ; Error
JMP @MR9206              ; 206
STG @MR9206              ; 206
ANB R50008               ; Error
SET @MR9207              ; Err85 Release
CON
ENDS
;Err23 ﾃﾞｼｹｰﾀUT 圧NGｴﾗｰ
;Err23DC-UT pressure NG
STG @MR9400              ; Err23　ﾃﾞｼｹｰﾀ圧NG
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
JMP @MR9401              ; Next step
MOV #23 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR9401              ; Next step
AND R50008               ; Error
JMP @MR9402              ; Next step
STG @MR9402              ; Next step
ANB R50008               ; Error
SET @MR9403              ; Err23 解除完了
CON
ENDS
;***** 全色ｲﾝｸ照合要求表示 ERROR No.74  /  All colors Ink CODE COLLATION display  *****
;
LD R50004                ; TASKDO
LDB R50002               ; STEP
LD R50002                ; STEP
AND LR40102              ; STEP 注入UT
ORL
ANL
OR MR12014               ; 背面ｲﾝｸ吐出起動中
LDB R50004               ; TASKDO
AND R50007               ; 原点復帰　完了
ORL
LD MR1209                ; (Y) 照合要求FLG
OR MR1409                ; (M) 照合要求FLG
OR MR1609                ; (C) 照合要求FLG
OR MR1809                ; (B) 照合要求FLG
ANL
ANB MR39911              ; ｻﾃﾗｲﾄ無し
ANB R50008               ; Error
ANB @MR9801              ; 全色ｲﾝｸｺｰﾄﾞ照合要求中
SET @MR9800              ; Err74 全色ｲﾝｸｺｰﾄﾞ照合要求
STG @MR9800              ; Err74 全色ｲﾝｸｺｰﾄﾞ照合要求
ANB R50008               ; Error
SET @MR9801              ; 全色ｲﾝｸｺｰﾄﾞ照合要求中
CON
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
JMP @MR9802              ; 次ｽﾃｯﾌﾟへ
MOV #74 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR9802              ; 次ｽﾃｯﾌﾟへ
AND R50008               ; Error
JMP @MR9803              ; 次ｽﾃｯﾌﾟへ
STG @MR9803              ; 次ｽﾃｯﾌﾟへ
ANB R50008               ; Error
JMP @MR9804              ; 次ｽﾃｯﾌﾟへ
STG @MR9804              ; 次ｽﾃｯﾌﾟへ
ANB MR1209               ; (Y) 照合要求FLG
ANB MR1409               ; (M) 照合要求FLG
ANB MR1609               ; (C) 照合要求FLG
ANB MR1809               ; (B) 照合要求FLG
RES @MR9801              ; 全色ｲﾝｸｺｰﾄﾞ照合要求中
CON
ENDS
;***** YELLOWｲﾝｸ照合要求表示 ERROR No.75  /  Yellow Ink CODE COLLATION display  *****
;
STG @MR9900              ; Err75 Yｲﾝｸ照合表示へ
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
JMP @MR9901              ; 次ｽﾃｯﾌﾟへ
MOV #75 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR9901              ; 次ｽﾃｯﾌﾟへ
AND R50008               ; Error
JMP @MR9902              ; 次ｽﾃｯﾌﾟへ
STG @MR9902              ; 次ｽﾃｯﾌﾟへ
ANB R50008               ; Error
SET @MR9903              ; Err75 Release
CON
ENDS
;***** Magenta ｲﾝｸ照合要求表示 ERROR No.76  /  Magenta Ink CODE COLLATION display  *****
;
STG @MR9904              ; Err76 Mｲﾝｸ照合表示へ
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
JMP @MR9905              ; 次ｽﾃｯﾌﾟへ
MOV #76 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR9905              ; 次ｽﾃｯﾌﾟへ
AND R50008               ; Error
JMP @MR9906              ; 次ｽﾃｯﾌﾟへ
STG @MR9906              ; 次ｽﾃｯﾌﾟへ
ANB R50008               ; Error
SET @MR9907              ; Err76 Release
CON
ENDS
;***** Cyan ｲﾝｸ照合要求表示 ERROR No.77  /  Cyan Ink CODE COLLATION display  *****
;
STG @MR9908              ; Err77 Cｲﾝｸ照合表示へ
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
JMP @MR9909              ; 次ｽﾃｯﾌﾟへ
MOV #77 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR9909              ; 次ｽﾃｯﾌﾟへ
AND R50008               ; Error
JMP @MR9910              ; 次ｽﾃｯﾌﾟへ
STG @MR9910              ; 次ｽﾃｯﾌﾟへ
ANB R50008               ; Error
SET @MR9911              ; Err77 Release
CON
ENDS
;***** Black ｲﾝｸ照合要求表示 ERROR No.78  /  Black Ink CODE COLLATION display  *****
;
STG @MR9912              ; Err78 Bｲﾝｸ照合表示へ
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
JMP @MR9913              ; 次ｽﾃｯﾌﾟへ
MOV #78 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR9913              ; 次ｽﾃｯﾌﾟへ
AND R50008               ; Error
JMP @MR9914              ; 次ｽﾃｯﾌﾟへ
STG @MR9914              ; 次ｽﾃｯﾌﾟへ
ANB R50008               ; Error
SET @MR9915              ; Err78 Release
CON
ENDS
;***** ｲﾝｸ照合NG表示 ERROR No.79  /  Ink CODE NG display  *****
;
STG @MR104               ; Err79 ｲﾝｸ照合NG表示へ
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
JMP @MR105               ; 次ｽﾃｯﾌﾟへ
MOV #79 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR105               ; 次ｽﾃｯﾌﾟへ
AND R50008               ; Error
JMP @MR106               ; 次ｽﾃｯﾌﾟへ
STG @MR106               ; 次ｽﾃｯﾌﾟへ
ANB R50008               ; Error
SET @MR107               ; Err79 Release
CON
ENDS
;Err80〜85はPLUNGERで使用
;***** (Y) KDﾄﾞﾗﾑ交換表示 ERROR NO.86  /  (Y) KD DRUM CHANGE display  *****
;
;<h1/>201412 液面検出変更
LDB R50003               ; HOME
ANB R4601                ; (Y)液面2(中下)KDﾄﾞﾗﾑ交換
ANB MR39911              ; ｻﾃﾗｲﾄ無し
ANB MR12114              ; KDﾄﾞﾗﾑ交換要求画面表示
ANB @MR201               ; (Y)KDﾄﾞﾗﾑ交換表示中
AND R50004               ; TASKDO
LD= DM287 #2             ; ModelIdentficationNumber
OR= DM287 #3             ; ModelIdentficationNumber
ANL
TMR @6 #300              ; KDﾄﾞﾗﾑ交換
LD @T6                   ; KDﾄﾞﾗﾑ交換
RES MR2905               ; ﾀﾝｸ交換時継続選択
CON
SET @MR200               ; (Y)KDﾄﾞﾗﾑ交換表示へ
STG @MR200               ; (Y)KDﾄﾞﾗﾑ交換表示へ
ANB R50008               ; Error
AND R50007               ; 原点復帰　完了
MPS
SET @MR201               ; (Y)KDﾄﾞﾗﾑ交換表示中
CON
SET LR49914              ; ｴﾗｰﾘｾｯﾄｷｰ要求
CON
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
JMP @MR202               ; 次ｽﾃｯﾌﾟへ
MPP
MOV #86 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR202               ; 次ｽﾃｯﾌﾟへ
AND R50008               ; Error
JMP @MR203               ; 次ｽﾃｯﾌﾟへ
STG @MR203               ; 次ｽﾃｯﾌﾟへ
ANB R50008               ; Error
MPS
AND MR2905               ; ﾀﾝｸ交換時継続選択
RES @MR201               ; (Y)KDﾄﾞﾗﾑ交換表示中
CON
ENDS
MPP
ANB MR2905               ; ﾀﾝｸ交換時継続選択
RES MR2901               ; KDﾄﾞﾗﾑ攪拌完了FLG
CON
RES @MR2115              ; Y KDﾄﾞﾗﾑ撹拌完了
CON
SET MR1210               ; (Y) KDﾄﾞﾗﾑ交換検出FLG
CON
JMP @MR204               ; 次ｽﾃｯﾌﾟへ
STG @MR204               ; 次ｽﾃｯﾌﾟへ
ANB MR1210               ; (Y) KDﾄﾞﾗﾑ交換検出FLG
RES @MR201               ; (Y)KDﾄﾞﾗﾑ交換表示中
CON
ENDS
;***** (Y) KDﾄﾞﾗﾑ交換完了確認 ERROR NO.87  /  (Y) KD Drum Change end　Check  *****
;
STG @MR208               ; Err87
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
JMP @MR209               ; 次ｽﾃｯﾌﾟへ
MOV #87 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR209               ; 次ｽﾃｯﾌﾟへ
AND R50008               ; Error
JMP @MR210               ; 次ｽﾃｯﾌﾟへ
STG @MR210               ; 次ｽﾃｯﾌﾟへ
ANB R50008               ; Error
SET @MR215               ; Err87解除完了
CON
ENDS
;***** (M) KDﾄﾞﾗﾑ交換表示 ERROR No.88  /  (M) KD DRUM CHANGE display  *****
;
;<h1/>201412 液面検出変更
LDB R50003               ; HOME
ANB R4609                ; (M)液面2(中下)KDﾄﾞﾗﾑ交換
ANB MR39911              ; ｻﾃﾗｲﾄ無し
ANB MR12114              ; KDﾄﾞﾗﾑ交換要求画面表示
ANB @MR301               ; (M)KDﾄﾞﾗﾑ交換表示中
AND R50004               ; TASKDO
LD= DM287 #2             ; ModelIdentficationNumber
OR= DM287 #3             ; ModelIdentficationNumber
ANL
TMR @7 #300              ; KDﾄﾞﾗﾑ交換
LD @T7                   ; KDﾄﾞﾗﾑ交換
RES MR2905               ; ﾀﾝｸ交換時継続選択
CON
SET @MR300               ; (M)KDﾄﾞﾗﾑ交換表示へ
STG @MR300               ; (M)KDﾄﾞﾗﾑ交換表示へ
ANB R50008               ; Error
AND R50007               ; 原点復帰　完了
MPS
SET @MR301               ; (M)KDﾄﾞﾗﾑ交換表示中
CON
SET LR49914              ; ｴﾗｰﾘｾｯﾄｷｰ要求
CON
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
JMP @MR302               ; 次ｽﾃｯﾌﾟへ
MPP
MOV #88 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR302               ; 次ｽﾃｯﾌﾟへ
AND R50008               ; Error
JMP @MR303               ; 次ｽﾃｯﾌﾟへ
STG @MR303               ; 次ｽﾃｯﾌﾟへ
ANB R50008               ; Error
MPS
AND MR2905               ; ﾀﾝｸ交換時継続選択
RES @MR301               ; (M)KDﾄﾞﾗﾑ交換表示中
CON
ENDS
MPP
ANB MR2905               ; ﾀﾝｸ交換時継続選択
RES MR2901               ; KDﾄﾞﾗﾑ攪拌完了FLG
CON
RES @MR4115              ; M KDﾄﾞﾗﾑ撹拌完了
CON
SET MR1410               ; (M) KDﾄﾞﾗﾑ交換検出FLG
CON
JMP @MR304               ; 次ｽﾃｯﾌﾟへ
STG @MR304               ; 次ｽﾃｯﾌﾟへ
ANB MR1410               ; (M) KDﾄﾞﾗﾑ交換検出FLG
RES @MR301               ; (M)KDﾄﾞﾗﾑ交換表示中
CON
ENDS
;***** (M) KDﾄﾞﾗﾑ交換完了確認 ERROR No.89  /  (M) KD Drum Change end　Check  *****
;
STG @MR308               ; Err89
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
JMP @MR309               ; 次ｽﾃｯﾌﾟへ
MOV #89 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR309               ; 次ｽﾃｯﾌﾟへ
AND R50008               ; Error
JMP @MR310               ; 次ｽﾃｯﾌﾟへ
STG @MR310               ; 次ｽﾃｯﾌﾟへ
ANB R50008               ; Error
SET @MR315               ; Err89解除完了
CON
ENDS
;***** (C) KDﾄﾞﾗﾑ交換表示 ERROR No.90  /  (C) KD DRUM CHANGE display  *****
;
;<h1/>201412 液面検出変更
LDB R50003               ; HOME
ANB R4701                ; (C)液面2(中下)KDﾄﾞﾗﾑ交換
ANB MR39911              ; ｻﾃﾗｲﾄ無し
ANB MR12114              ; KDﾄﾞﾗﾑ交換要求画面表示
ANB @MR401               ; (C)KDﾄﾞﾗﾑ交換表示中
AND R50004               ; TASKDO
LD= DM287 #2             ; ModelIdentficationNumber
OR= DM287 #3             ; ModelIdentficationNumber
ANL
TMR @8 #300              ; KDﾄﾞﾗﾑ交換
LD @T8                   ; KDﾄﾞﾗﾑ交換
RES MR2905               ; ﾀﾝｸ交換時継続選択
CON
SET @MR400               ; (C)KDﾄﾞﾗﾑ交換表示へ
STG @MR400               ; (C)KDﾄﾞﾗﾑ交換表示へ
ANB R50008               ; Error
AND R50007               ; 原点復帰　完了
MPS
SET @MR401               ; (C)KDﾄﾞﾗﾑ交換表示中
CON
SET LR49914              ; ｴﾗｰﾘｾｯﾄｷｰ要求
CON
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
JMP @MR402               ; 次ｽﾃｯﾌﾟへ
MPP
MOV #90 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR402               ; 次ｽﾃｯﾌﾟへ
AND R50008               ; Error
JMP @MR403               ; 次ｽﾃｯﾌﾟへ
STG @MR403               ; 次ｽﾃｯﾌﾟへ
ANB R50008               ; Error
MPS
AND MR2905               ; ﾀﾝｸ交換時継続選択
RES @MR401               ; (C)KDﾄﾞﾗﾑ交換表示中
CON
ENDS
MPP
ANB MR2905               ; ﾀﾝｸ交換時継続選択
RES MR2901               ; KDﾄﾞﾗﾑ攪拌完了FLG
CON
RES @MR6115              ; C KDﾄﾞﾗﾑ撹拌完了
CON
SET MR1610               ; (C) KDﾄﾞﾗﾑ交換検出FLG
CON
JMP @MR404               ; 次ｽﾃｯﾌﾟへ
STG @MR404               ; 次ｽﾃｯﾌﾟへ
ANB MR1610               ; (C) KDﾄﾞﾗﾑ交換検出FLG
RES @MR401               ; (C)KDﾄﾞﾗﾑ交換表示中
CON
ENDS
;***** (C) KDﾄﾞﾗﾑ交換完了確認 ERROR No.91  /  (C) KD Drum Change end　Check  *****
;
STG @MR408               ; Err91
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
JMP @MR409               ; 次ｽﾃｯﾌﾟへ
MOV #91 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR409               ; 次ｽﾃｯﾌﾟへ
AND R50008               ; Error
JMP @MR410               ; 次ｽﾃｯﾌﾟへ
STG @MR410               ; 次ｽﾃｯﾌﾟへ
ANB R50008               ; Error
SET @MR415               ; Err91解除完了
CON
ENDS
;***** (B) KDﾄﾞﾗﾑ交換表示 ERROR No.92  /  (B) KD DRUM CHANGE display  *****
;
;<h1/>201412 液面検出変更
LDB R50003               ; HOME
ANB R4709                ; (B)液面2(中下)KDﾄﾞﾗﾑ交換
ANB MR39911              ; ｻﾃﾗｲﾄ無し
ANB MR12114              ; KDﾄﾞﾗﾑ交換要求画面表示
ANB @MR501               ; (B)KDﾄﾞﾗﾑ交換表示中
AND R50004               ; TASKDO
LD= DM287 #1             ; ModelIdentficationNumber
OR= DM287 #3             ; ModelIdentficationNumber
ANL
TMR @9 #300              ; KDﾄﾞﾗﾑ交換
LD @T9                   ; KDﾄﾞﾗﾑ交換
RES MR2905               ; ﾀﾝｸ交換時継続選択
CON
SET @MR500               ; (B)KDﾄﾞﾗﾑ交換表示へ
STG @MR500               ; (B)KDﾄﾞﾗﾑ交換表示へ
ANB R50008               ; Error
AND R50007               ; 原点復帰　完了
MPS
SET @MR501               ; (B)KDﾄﾞﾗﾑ交換表示中
CON
SET LR49914              ; ｴﾗｰﾘｾｯﾄｷｰ要求
CON
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
JMP @MR502               ; 次ｽﾃｯﾌﾟへ
MPP
MOV #92 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR502               ; 次ｽﾃｯﾌﾟへ
AND R50008               ; Error
JMP @MR503               ; 次ｽﾃｯﾌﾟへ
STG @MR503               ; 次ｽﾃｯﾌﾟへ
ANB R50008               ; Error
MPS
AND MR2905               ; ﾀﾝｸ交換時継続選択
RES @MR501               ; (B)KDﾄﾞﾗﾑ交換表示中
CON
ENDS
MPP
ANB MR2905               ; ﾀﾝｸ交換時継続選択
RES MR2901               ; KDﾄﾞﾗﾑ攪拌完了FLG
CON
RES @MR8115              ; B KDﾄﾞﾗﾑ撹拌完了
CON
SET MR1810               ; (B) KDﾄﾞﾗﾑ交換検出FLG
CON
JMP @MR504               ; 次ｽﾃｯﾌﾟへ
STG @MR504               ; 次ｽﾃｯﾌﾟへ
ANB MR1810               ; (B) KDﾄﾞﾗﾑ交換検出FLG
RES @MR501               ; (B)KDﾄﾞﾗﾑ交換表示中
CON
ENDS
;***** (B) KDﾄﾞﾗﾑ交換完了確認 ERROR No.93  /  (B) KD Drum Change end　Check  *****
;
STG @MR508               ; Err93
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
JMP @MR509               ; 次ｽﾃｯﾌﾟへ
MOV #93 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR509               ; 次ｽﾃｯﾌﾟへ
AND R50008               ; Error
JMP @MR510               ; 次ｽﾃｯﾌﾟへ
STG @MR510               ; 次ｽﾃｯﾌﾟへ
ANB R50008               ; Error
SET @MR515               ; Err93解除完了
CON
ENDS
;***** (Y) ｻﾌﾞﾀﾝｸ LO ERROR No.94  /  (Y) Subtank LO error display  *****
;
LDB R50003               ; HOME
AND R50004               ; TASKDO
ANB MR39911              ; ｻﾃﾗｲﾄ無し
ANB R4600                ; (Y)液面1(最下)ｲﾝｸｴﾝﾄﾞ
AND R50007               ; 原点復帰　完了
ANB R50008               ; Error
ANB @MR601               ; YｻﾌﾞﾀﾝｸLO検出表示中
TMR @10 #10              ; ｻﾌﾞﾀﾝｸLO検出
LD @T10                  ; ｻﾌﾞﾀﾝｸLO検出
RES MR1302               ; (Y)ｻﾌﾞﾀﾝｸｲﾝｸ供給OK
CON
SET @MR600               ; YｻﾌﾞﾀﾝｸLO検出表示へ
STG @MR600               ; YｻﾌﾞﾀﾝｸLO検出表示へ
ANB R50008               ; Error
SET @MR601               ; YｻﾌﾞﾀﾝｸLO検出表示中
CON
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
JMP @MR602               ; 次ｽﾃｯﾌﾟへ
MOV #94 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR602               ; 次ｽﾃｯﾌﾟへ
AND R50008               ; Error
JMP @MR603               ; 次ｽﾃｯﾌﾟへ
STG @MR603               ; 次ｽﾃｯﾌﾟへ
ANB R50008               ; Error
JMP @MR604               ; 次ｽﾃｯﾌﾟへ
STG @MR604               ; 次ｽﾃｯﾌﾟへ
OUT MR1214               ; (Y) ｻﾌﾞﾀﾝｸLO検出中
CON
AND MR1302               ; (Y)ｻﾌﾞﾀﾝｸｲﾝｸ供給OK
RES @MR601               ; YｻﾌﾞﾀﾝｸLO検出表示中
CON
ENDS
;***** (Y) ｻﾌﾞﾀﾝｸ HI ERROR No.95  /  (Y) Subtank HI error display  *****
;
LDB MR39911              ; ｻﾃﾗｲﾄ無し
AND R50004               ; TASKDO
ANB R50008               ; Error
ANB R4603                ; (Y)液面4(最上)ｵｰﾊﾞｰﾌﾛｰ
ANB @MR615               ; YｻﾌﾞﾀﾝｸHI検出表示中
TMR @14 #20              ; ｻﾌﾞﾀﾝｸHI検出
LD @T14                  ; ｻﾌﾞﾀﾝｸHI検出
RES MR6606               ; (Y) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
RES MR6600               ; (Y) ｻﾌﾞﾀﾝｸ ｲﾝｸ供給　開
CON
RES MR6603               ; (Y) ｻﾌﾞﾀﾝｸ ｲﾝｸ開閉
CON
SET @MR608               ; YｻﾌﾞﾀﾝｸHI検出表示へ
STG @MR608               ; YｻﾌﾞﾀﾝｸHI検出表示へ
ANB R50008               ; Error
SET @MR615               ; YｻﾌﾞﾀﾝｸHI検出表示中
CON
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
JMP @MR610               ; 次ｽﾃｯﾌﾟへ
MOV #95 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR610               ; 次ｽﾃｯﾌﾟへ
AND R50008               ; Error
JMP @MR611               ; 次ｽﾃｯﾌﾟへ
STG @MR611               ; 次ｽﾃｯﾌﾟへ
ANB R50008               ; Error
SET R50011               ; TRAP
CON
RES @MR615               ; YｻﾌﾞﾀﾝｸHI検出表示中
CON
ENDS
;***** (M) ｻﾌﾞﾀﾝｸ LO ERROR No.96  /  (M) Subtank LO error display  *****
;
LDB R50003               ; HOME
AND R50004               ; TASKDO
ANB MR39911              ; ｻﾃﾗｲﾄ無し
ANB R4608                ; (M)液面1(最下)ｲﾝｸｴﾝﾄﾞ
AND R50007               ; 原点復帰　完了
ANB R50008               ; Error
ANB @MR701               ; MｻﾌﾞﾀﾝｸLO検出表示中
TMR @11 #10              ; ｻﾌﾞﾀﾝｸLO検出
LD @T11                  ; ｻﾌﾞﾀﾝｸLO検出
RES MR1502               ; (M)ｻﾌﾞﾀﾝｸｲﾝｸ供給OK
CON
SET @MR700               ; MｻﾌﾞﾀﾝｸLO検出表示へ
STG @MR700               ; MｻﾌﾞﾀﾝｸLO検出表示へ
ANB R50008               ; Error
SET @MR701               ; MｻﾌﾞﾀﾝｸLO検出表示中
CON
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
JMP @MR702               ; 次ｽﾃｯﾌﾟへ
MOV #96 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR702               ; 次ｽﾃｯﾌﾟへ
AND R50008               ; Error
JMP @MR703               ; 次ｽﾃｯﾌﾟへ
STG @MR703               ; 次ｽﾃｯﾌﾟへ
ANB R50008               ; Error
JMP @MR704               ; 次ｽﾃｯﾌﾟへ
STG @MR704               ; 次ｽﾃｯﾌﾟへ
OUT MR1414               ; (M) ｻﾌﾞﾀﾝｸLO検出中
CON
AND MR1502               ; (M)ｻﾌﾞﾀﾝｸｲﾝｸ供給OK
RES @MR701               ; MｻﾌﾞﾀﾝｸLO検出表示中
CON
ENDS
;***** (M) ｻﾌﾞﾀﾝｸ HI ERROR No.97  /  (M) Subtank HI error display  *****
;
LDB MR39911              ; ｻﾃﾗｲﾄ無し
AND R50004               ; TASKDO
ANB R50008               ; Error
ANB R4611                ; (M)液面4(最上)ｵｰﾊﾞｰﾌﾛｰ
ANB @MR715               ; MｻﾌﾞﾀﾝｸHI検出表示中
TMR @15 #20              ; ｻﾌﾞﾀﾝｸHI検出
LD @T15                  ; ｻﾌﾞﾀﾝｸHI検出
RES MR6614               ; (M) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
RES MR6608               ; (M) ｻﾌﾞﾀﾝｸ ｲﾝｸ供給　開
CON
RES MR6611               ; (M) ｻﾌﾞﾀﾝｸ ｲﾝｸ開閉
CON
SET @MR708               ; MｻﾌﾞﾀﾝｸHI検出表示へ
STG @MR708               ; MｻﾌﾞﾀﾝｸHI検出表示へ
ANB R50008               ; Error
SET @MR715               ; MｻﾌﾞﾀﾝｸHI検出表示中
CON
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
JMP @MR710               ; 次ｽﾃｯﾌﾟへ
MOV #97 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR710               ; 次ｽﾃｯﾌﾟへ
AND R50008               ; Error
JMP @MR711               ; 次ｽﾃｯﾌﾟへ
STG @MR711               ; 次ｽﾃｯﾌﾟへ
ANB R50008               ; Error
SET R50011               ; TRAP
CON
RES @MR715               ; MｻﾌﾞﾀﾝｸHI検出表示中
CON
ENDS
;***** (C) ｻﾌﾞﾀﾝｸ LO ERROR No.98  /  (C) Subtank LO error display  *****
;
LDB R50003               ; HOME
AND R50004               ; TASKDO
ANB MR39911              ; ｻﾃﾗｲﾄ無し
ANB R4700                ; (C)液面1(最下)ｲﾝｸｴﾝﾄﾞ
AND R50007               ; 原点復帰　完了
ANB R50008               ; Error
ANB @MR801               ; CｻﾌﾞﾀﾝｸLO検出表示中
TMR @12 #10              ; ｻﾌﾞﾀﾝｸLO検出
LD @T12                  ; ｻﾌﾞﾀﾝｸLO検出
RES MR1702               ; (C)ｻﾌﾞﾀﾝｸｲﾝｸ供給OK
CON
SET @MR800               ; CｻﾌﾞﾀﾝｸLO検出表示へ
STG @MR800               ; CｻﾌﾞﾀﾝｸLO検出表示へ
ANB R50008               ; Error
SET @MR801               ; CｻﾌﾞﾀﾝｸLO検出表示中
CON
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
JMP @MR802               ; 次ｽﾃｯﾌﾟへ
MOV #98 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR802               ; 次ｽﾃｯﾌﾟへ
AND R50008               ; Error
JMP @MR803               ; 次ｽﾃｯﾌﾟへ
STG @MR803               ; 次ｽﾃｯﾌﾟへ
ANB R50008               ; Error
JMP @MR804               ; 次ｽﾃｯﾌﾟへ
STG @MR804               ; 次ｽﾃｯﾌﾟへ
OUT MR1614               ; (C) ｻﾌﾞﾀﾝｸLO検出中
CON
AND MR1702               ; (C)ｻﾌﾞﾀﾝｸｲﾝｸ供給OK
RES @MR801               ; CｻﾌﾞﾀﾝｸLO検出表示中
CON
ENDS
;***** (C) ｻﾌﾞﾀﾝｸ HI ERROR No.99  /  (C) Subtank HI error display  *****
;
LDB MR39911              ; ｻﾃﾗｲﾄ無し
AND R50004               ; TASKDO
ANB R50008               ; Error
ANB R4703                ; (C)液面4(最上)ｵｰﾊﾞｰﾌﾛｰ
ANB @MR815               ; CｻﾌﾞﾀﾝｸHI検出表示中
TMR @16 #20              ; ｻﾌﾞﾀﾝｸHI検出
LD @T16                  ; ｻﾌﾞﾀﾝｸHI検出
RES MR6706               ; (C) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
RES MR6700               ; (C) ｻﾌﾞﾀﾝｸ ｲﾝｸ供給　開
CON
RES MR6703               ; (C) ｻﾌﾞﾀﾝｸ ｲﾝｸ開閉
CON
SET @MR808               ; CｻﾌﾞﾀﾝｸHI検出表示へ
STG @MR808               ; CｻﾌﾞﾀﾝｸHI検出表示へ
ANB R50008               ; Error
SET @MR815               ; CｻﾌﾞﾀﾝｸHI検出表示中
CON
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
JMP @MR810               ; 次ｽﾃｯﾌﾟへ
MOV #99 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR810               ; 次ｽﾃｯﾌﾟへ
AND R50008               ; Error
JMP @MR811               ; 次ｽﾃｯﾌﾟへ
STG @MR811               ; 次ｽﾃｯﾌﾟへ
ANB R50008               ; Error
SET R50011               ; TRAP
CON
RES @MR815               ; CｻﾌﾞﾀﾝｸHI検出表示中
CON
ENDS
;***** (B) ｻﾌﾞﾀﾝｸ LO ERROR No.100  /  (B) Subtank LO error display  *****
;
LDB R50003               ; HOME
AND R50004               ; TASKDO
ANB MR39911              ; ｻﾃﾗｲﾄ無し
ANB R4708                ; (B)液面1(最下)ｲﾝｸｴﾝﾄﾞ
AND R50007               ; 原点復帰　完了
ANB R50008               ; Error
ANB @MR901               ; BｻﾌﾞﾀﾝｸLO検出表示中
TMR @13 #10              ; ｻﾌﾞﾀﾝｸLO検出
LD @T13                  ; ｻﾌﾞﾀﾝｸLO検出
RES MR1902               ; (B)ｻﾌﾞﾀﾝｸｲﾝｸ供給OK
CON
SET @MR900               ; BｻﾌﾞﾀﾝｸLO検出表示へ
STG @MR900               ; BｻﾌﾞﾀﾝｸLO検出表示へ
ANB R50008               ; Error
SET @MR901               ; BｻﾌﾞﾀﾝｸLO検出表示中
CON
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
JMP @MR902               ; 次ｽﾃｯﾌﾟへ
MOV #100 DM400           ; ﾒｯｾｰｼﾞNo.
STG @MR902               ; 次ｽﾃｯﾌﾟへ
AND R50008               ; Error
JMP @MR903               ; 次ｽﾃｯﾌﾟへ
STG @MR903               ; 次ｽﾃｯﾌﾟへ
ANB R50008               ; Error
JMP @MR904               ; 次ｽﾃｯﾌﾟへ
STG @MR904               ; 次ｽﾃｯﾌﾟへ
OUT MR1814               ; (B) ｻﾌﾞﾀﾝｸLO検出中
CON
AND MR1902               ; (B)ｻﾌﾞﾀﾝｸｲﾝｸ供給OK
RES @MR901               ; BｻﾌﾞﾀﾝｸLO検出表示中
CON
ENDS
;***** (B) ｻﾌﾞﾀﾝｸ HI ERROR No.101  /  (B) Subtank HI error display  *****
;
LDB MR39911              ; ｻﾃﾗｲﾄ無し
AND R50004               ; TASKDO
ANB R50008               ; Error
ANB R4711                ; (B)液面4(最上)ｵｰﾊﾞｰﾌﾛｰ
ANB @MR915               ; BｻﾌﾞﾀﾝｸHI検出表示中
TMR @17 #20              ; ｻﾌﾞﾀﾝｸHI検出
LD @T17                  ; ｻﾌﾞﾀﾝｸHI検出
RES MR6714               ; (B) ﾀﾞｲﾔﾌﾗﾑﾎﾟﾝﾌﾟ ON
CON
RES MR6708               ; (B) ｻﾌﾞﾀﾝｸ ｲﾝｸ供給　開
CON
RES MR6711               ; (B) ｻﾌﾞﾀﾝｸ ｲﾝｸ開閉
CON
SET @MR908               ; BｻﾌﾞﾀﾝｸHI検出表示へ
STG @MR908               ; BｻﾌﾞﾀﾝｸHI検出表示へ
ANB R50008               ; Error
SET @MR915               ; BｻﾌﾞﾀﾝｸHI検出表示中
CON
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
JMP @MR910               ; 次ｽﾃｯﾌﾟへ
MOV #101 DM400           ; ﾒｯｾｰｼﾞNo.
STG @MR910               ; 次ｽﾃｯﾌﾟへ
AND R50008               ; Error
JMP @MR911               ; 次ｽﾃｯﾌﾟへ
STG @MR911               ; 次ｽﾃｯﾌﾟへ
ANB R50008               ; Error
SET R50011               ; TRAP
CON
RES @MR915               ; BｻﾌﾞﾀﾝｸHI検出表示中
CON
ENDS
;***** ｻﾃﾗｲﾄ切替NG ERROR No.186  /  Satelite Change NG  *****
;
STG @MR108               ; Err186:ｻﾃﾗｲﾄ切替NG
ANB R50008               ; Error
SET R50008               ; Error
CON
SET R50113               ; Err ST3
CON
SET LR49914              ; ｴﾗｰﾘｾｯﾄｷｰ要求
CON
JMP @MR109               ; 次ｽﾃｯﾌﾟへ
MOV #186 DM400           ; ﾒｯｾｰｼﾞNo.
STG @MR109               ; 次ｽﾃｯﾌﾟへ
AND R50008               ; Error
JMP @MR110               ; 次ｽﾃｯﾌﾟへ
STG @MR110               ; 次ｽﾃｯﾌﾟへ
ANB R50008               ; Error
SET @MR111               ; Err186 Release
CON
ENDS
END
ENDH
