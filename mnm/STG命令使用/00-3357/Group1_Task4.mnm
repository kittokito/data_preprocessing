DEVICE:53
;MODULE:Group1_Task4
;MODULE_TYPE:0
;SCRIPT_TYPE:
;OneSystem Main-Module
;
;-----------------------------------------
;ModuleName	:	Group1_Task4
;ModuleType	:	Main Module
;Line		:　	μTFP-2ﾎﾙﾀﾞｰAssyﾗｲﾝ
;Cell		:	3-2(ｶｼﾒ溶接機)
;Function	:	AUTO(Main1)ﾒｲﾝｽﾗｲﾀﾞｰ（R17）上流側　：AUTO(Main2)ﾒｲﾝｽﾗｲﾀﾞｰ（R18）下流側
;-----------------------------------------
;<<Task LocalDevice>>
;/*項目			/*割付ｴﾘｱ				/*備考
;---------------------------------------------------------------------			
;Emergency		@MR000〜@MR015			Emergency処理時RESET禁止ｴﾘｱ
;Free			@MR100〜@MR915			ﾕｰｻﾞｰﾌﾘｰｴﾘｱ
;HOME			@MR1000〜@MR1515		HOME動作時使用ｴﾘｱ
;MAINTENANCE		@MR2000〜@MR2915		MAINTE動作時使用ｴﾘｱ
;AUTO(Main1)		@MR3000〜@MR3915		AUTO(Main1)動作時使用ｴﾘｱ
;	(Main2)		@MR4000〜@MR4915		AUTO(Main2)動作時使用ｴﾘｱ
;SubRoutine		@MR5000〜@MR6415		ｻﾌﾞﾙｰﾁﾝ共通動作使用ｴﾘｱ
;----------------------------------------------------------------------
;<h1/>Device_Init/ﾃﾞﾊﾞｲｽ初期化
;[内容]
;・非常停止、優先ｴﾗｰ発生時に初期化したいﾃﾞﾊﾞｲｽを指定して下さい
;※本Taskで使用するﾛｰｶﾙﾃﾞﾊﾞｲｽなど
;※STG〜JMPにて使用しているﾃﾞﾊﾞｲｽは必須
LDP R46104               ; _非常停止中　ﾓｰﾄﾞﾌﾗｸﾞ
ZRES @MR100 @MR6401      ; Task0 ERROR  ***_Sub実行完了
;<h1/>Task_Monitor/ﾀｽｸﾓﾆﾀｰ
LD CR2002                ; 常時ON
FLIK #50 #50 @MR000
;ON STG Main1
;TYPE EM632.U,EM633.U,@MR000.U,@MR3000.U
;
;FOR EM632 = EM632 TO 160 STEP 16
;	IF @MR3000:EM632 <> 0 THEN
;		BREAK
;	END IF	
;NEXT
;	
;IF EM632 < 160 THEN
;	EM633 = (EM632 / 16) * 100 + DMX(@MR3000:EM632) + #3000
;END IF		
;		
;EM632 = EM632 + 16		
;IF EM632 > 160 THEN		
;	EM632 = 0		
;END IF
LDP @MR000
NCJ #1000
;TYPE EM632.U,EM633.U,@MR000.U,@MR3000.U
;
;FOR EM632 = EM632 TO 160 STEP 16
;
LD CR2002                ; 常時ON
MOV EM632 EM632          ; Task4 Main1@MR  Task4 Main1@MR
LABEL #2000
LD> EM632 #160           ; Task4 Main1@MR
CJ #2001
;	IF @MR3000:EM632 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM632                ; Task4 Main1@MR
CON
EXT
CON
STA.L Z12
LD<> @MR3000:Z12 #0      ; AUTO Main1
NCJ #2002
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2003
;	END IF	
;
LABEL #2002
;NEXT
;
LD CR2002                ; 常時ON
LDA EM632                ; Task4 Main1@MR
CON
ADD #16
CON
STA EM632                ; Task4 Main1@MR
LDB CR2009               ; 演算結果が負
CJ #2000
LABEL #2003
LABEL #2001
;IF EM632 < 160 THEN
;
LD< EM632 #160           ; Task4 Main1@MR
NCJ #2004
;	EM633 = (EM632 / 16) * 100 + DMX(@MR3000:EM632) + #3000
;
LD CR2002                ; 常時ON
LDA EM632                ; Task4 Main1@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR3000:Z12          ; AUTO Main1
CON
DMX
CON
STA @VM0
CON
LDA EM632                ; Task4 Main1@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM1
CON
LDA @VM0
CON
EXT
CON
ADD.L @VM1
CON
ADD.L +3000
CON
STA EM633                ; Task4 Main1@MR
;END IF		
;
LABEL #2004
;EM632 = EM632 + 16		
;
LD CR2002                ; 常時ON
LDA EM632                ; Task4 Main1@MR
CON
EXT
CON
ADD.L +16
CON
STA EM632                ; Task4 Main1@MR
;IF EM632 > 160 THEN		
;
LD> EM632 #160           ; Task4 Main1@MR
NCJ #2005
;	EM632 = 0		
;
LD CR2002                ; 常時ON
MOV #0 EM632             ; Task4 Main1@MR
;END IF
LABEL #2005
LABEL #1000
;
;ON STG Main2
;TYPE EM634.U,EM635.U,@MR4000.U
;
;FOR EM634 = EM634 TO 80 STEP 16
;	IF @MR4000:EM634 <> 0 THEN
;		BREAK
;	END IF	
;NEXT	
;
;IF EM634 < 80 THEN
;	EM635 = (EM634 / 16) * 100 + DMX(@MR4000:EM634) + #4000
;END IF
;
;EM634 = EM634 + 16		
;
;IF EM634 > 80 THEN
;	EM634 = 0	
;END IF
LDP @MR000
NCJ #1001
;TYPE EM634.U,EM635.U,@MR4000.U
;
;FOR EM634 = EM634 TO 80 STEP 16
;
LD CR2002                ; 常時ON
MOV EM634 EM634          ; Task4 Main2@MR  Task4 Main2@MR
LABEL #2006
LD> EM634 #80            ; Task4 Main2@MR
CJ #2007
;	IF @MR4000:EM634 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM634                ; Task4 Main2@MR
CON
EXT
CON
STA.L Z12
LD<> @MR4000:Z12 #0      ; AUTO Main2
NCJ #2008
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2009
;	END IF	
;
LABEL #2008
;NEXT	
;
LD CR2002                ; 常時ON
LDA EM634                ; Task4 Main2@MR
CON
ADD #16
CON
STA EM634                ; Task4 Main2@MR
LDB CR2009               ; 演算結果が負
CJ #2006
LABEL #2009
LABEL #2007
;IF EM634 < 80 THEN
;
LD< EM634 #80            ; Task4 Main2@MR
NCJ #2010
;	EM635 = (EM634 / 16) * 100 + DMX(@MR4000:EM634) + #4000
;
LD CR2002                ; 常時ON
LDA EM634                ; Task4 Main2@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR4000:Z12          ; AUTO Main2
CON
DMX
CON
STA @VM3
CON
LDA EM634                ; Task4 Main2@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM4
CON
LDA @VM3
CON
EXT
CON
ADD.L @VM4
CON
ADD.L +4000
CON
STA EM635                ; Task4 Main2@MR
;END IF
;
LABEL #2010
;EM634 = EM634 + 16		
;
LD CR2002                ; 常時ON
LDA EM634                ; Task4 Main2@MR
CON
EXT
CON
ADD.L +16
CON
STA EM634                ; Task4 Main2@MR
;IF EM634 > 80 THEN
;
LD> EM634 #80            ; Task4 Main2@MR
NCJ #2011
;	EM634 = 0	
;
LD CR2002                ; 常時ON
MOV #0 EM634             ; Task4 Main2@MR
;END IF
LABEL #2011
LABEL #1001
;
;ON STG SubRoutine
;TYPE EM636.U,EM637.U,@MR4500.U
;	
;FOR EM636 = EM636 TO 320 STEP 16
;	IF @MR4500:EM636 <> 0 THEN
;		BREAK
;	END IF	
;NEXT
;		
;IF EM636 < 320 THEN
;	EM637 = (EM636 / 16) * 100 + DMX(@MR4500:EM636) + #4500
;END IF
;		
;EM636 = EM636 + 16	
;
;IF EM636 > 320 THEN
;   EM636 = 0	
;END IF
LDP @MR000
NCJ #1002
;TYPE EM636.U,EM637.U,@MR4500.U
;
;FOR EM636 = EM636 TO 320 STEP 16
;
LD CR2002                ; 常時ON
MOV EM636 EM636          ; Task4 Sub@MR  Task4 Sub@MR
LABEL #2012
LD> EM636 #320           ; Task4 Sub@MR
CJ #2013
;	IF @MR4500:EM636 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM636                ; Task4 Sub@MR
CON
EXT
CON
STA.L Z12
LD<> @MR4500:Z12 #0
NCJ #2014
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2015
;	END IF	
;
LABEL #2014
;NEXT
;
LD CR2002                ; 常時ON
LDA EM636                ; Task4 Sub@MR
CON
ADD #16
CON
STA EM636                ; Task4 Sub@MR
LDB CR2009               ; 演算結果が負
CJ #2012
LABEL #2015
LABEL #2013
;IF EM636 < 320 THEN
;
LD< EM636 #320           ; Task4 Sub@MR
NCJ #2016
;	EM637 = (EM636 / 16) * 100 + DMX(@MR4500:EM636) + #4500
;
LD CR2002                ; 常時ON
LDA EM636                ; Task4 Sub@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR4500:Z12
CON
DMX
CON
STA @VM6
CON
LDA EM636                ; Task4 Sub@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM7
CON
LDA @VM6
CON
EXT
CON
ADD.L @VM7
CON
ADD.L +4500
CON
STA EM637                ; Task4 Sub@MR
;END IF
;
LABEL #2016
;EM636 = EM636 + 16	
;
LD CR2002                ; 常時ON
LDA EM636                ; Task4 Sub@MR
CON
EXT
CON
ADD.L +16
CON
STA EM636                ; Task4 Sub@MR
;IF EM636 > 320 THEN
;
LD> EM636 #320           ; Task4 Sub@MR
NCJ #2017
;   EM636 = 0	
;
LD CR2002                ; 常時ON
MOV #0 EM636             ; Task4 Sub@MR
;END IF
LABEL #2017
LABEL #1002
;
;<h1/>Task_Init/ﾀｽｸ初期化
;[本STG内容]
;・本Task起動時に必要な初期化処理を記述して下さい
;・起動Taskの全Init処理終了後、Task_StartのSTGが起動します
STG LR804                ; _Grp1_Task4_Init.STG
ENDS
;<h1/>Task_Start/ﾀｽｸ開始
;[本STG内容]
;・Task起動後、以下運転ﾓｰﾄﾞに従い、各STGにJMPします
;【HOME】	→	LR5200
;【AUTO】	→	LR5400
;【MAINTE】	→	LR5600
;・本STGは追記、修正不要です
STG LR404                ; _Grp1_Task4_Start.STG
MPS
AND R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5204               ; _Grp1_Task4_HOME.STG
MRD
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5404               ; _Grp1_Task4_AUTO.STG
MPP
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5604               ; _Grp1_Task4_MAINTE.STG
;<h1/>Task_Finish/ﾀｽｸ終了
;[本STG内容]
;・各Taskの終了STGになります
;・運転ﾓｰﾄﾞに係わらず終了時は本STGを経由して終了して下さい
;・本STGは追記、修正不要です
STG LR604                ; _Grp1_Task4_Fin.STG
RES R41004               ; _Grp1_Task4_起動中ﾌﾗｸﾞ
CON
ENDS
;<h1/>HOME/原点復帰
;[本STG内容]
;・STG @MR1000の続きから各Taskの原点復帰動作を記述する
;・動作終了時は@MR1515にJMPする事
STG LR5204               ; _Grp1_Task4_HOME.STG
SET @MR1002              ; HOME中
CON
JMP @MR1000              ; HOME
STG @MR1000              ; HOME
MPS
ANB CR2002               ; 常時ON
JMP @MR1005
MPP
AND CR2002               ; 常時ON
JMP @MR1515              ; HOME END
STG @MR1005
MPS
ANB DM2000.6             ; ｽﾗｲﾀﾞ1_ｶｼﾒ後目視検査(0_無/1_有)
RES MR1500               ;  ｶｼﾒ U3(I/W)_非常停止(STOP停止)
CON
ANB R1400                ;  ｶｼﾒ U3(I_W)_運転中出力
ANB R1401                ;  ｶｼﾒ U3(I_W)_離脱出力(END3)
MPS
ANB R1403                ;  ｶｼﾒ U3(I_W)_異常出力
MPS
AND R1402                ;  ｶｼﾒ U3(I_W)_運転終了出力(END3)
JMP @MR1006
MPP
ANB R1402                ;  ｶｼﾒ U3(I_W)_運転終了出力(END3)
SET MR13603              ; ﾑﾈｶﾀ      異常出力_UT3
CON
ENDS
MPP
AND R1403                ;  ｶｼﾒ U3(I_W)_異常出力
SET MR1502               ;  ｶｼﾒ U3(I/W)_異常解除入力
CON
JMP @MR1007
MPP
AND DM2000.6             ; ｽﾗｲﾀﾞ1_ｶｼﾒ後目視検査(0_無/1_有)
JMP @MR1101
STG @MR1007
ANB R1403                ;  ｶｼﾒ U3(I_W)_異常出力
RES MR1502               ;  ｶｼﾒ U3(I/W)_異常解除入力
CON
TMH #704 #10
CON
AND T704
JMP @MR1005
;溶着中ﾜｰｸの判断
STG @MR1006
MPS
LD R4615                 ; -
ANB R4614                ; -
ANL
MPS
LDB DM11215.3            ; RB17 ｶｼﾒ中 記憶FLG
LD DM11215.3             ; RB17 ｶｼﾒ中 記憶FLG
AND DM11215.4            ; RB17 ｶｼﾒ完了 記憶FLG
ORL
ANL
JMP @MR1100              ; ★
MPP
LD DM11215.3             ; RB17 ｶｼﾒ中 記憶FLG
ANB DM11215.4            ; RB17 ｶｼﾒ完了 記憶FLG
ANL
JMP @MR1008
MPP
LD R4614                 ; -
ANB R4615                ; -
ANL
MPS
LDB DM11216.3            ; RB18 ｶｼﾒ中 記憶FLG
LD DM11216.3             ; RB18 ｶｼﾒ中 記憶FLG
AND DM11216.4            ; RB18 ｶｼﾒ完了 記憶FLG
ORL
ANL
JMP @MR1100              ; ★
MPP
LD DM11216.3             ; RB18 ｶｼﾒ中 記憶FLG
ANB DM11216.4            ; RB18 ｶｼﾒ完了 記憶FLG
ANL
JMP @MR1008
;
STG @MR1008
MPS
LDB DM10595.3            ; ALM_異常 RB12
ANB DM10595.7            ; ALM 軽故障 RB12
AND DM10595.14           ; PWR_準備完了 RB12
ANB DM10595.15           ; MGS_非常停止 RB12
ANL
JMP @MR1009
MPP
AND DM10595.3            ; ALM_異常 RB12
SET DM10795.3            ; RES(ﾘｾｯﾄ) RB12
CON
JMP @MR1008
STG @MR1009
ANB R36110               ; During RB12 HOME
RES DM10779.3            ; RES(ﾘｾｯﾄ) RB10
CON
SET DM10779.4            ; SON(ｻｰﾎﾞON指令) RB10
CON
JMP @MR1010
STG @MR1010
AND DM10595.4            ; SV_ｻｰﾎﾞON中 RB12
SET MR1501               ;  ｶｼﾒ U3(I/W)_起動入力(START始動)
CON
JMP @MR1011
STG @MR1011
AND R1401                ;  ｶｼﾒ U3(I_W)_離脱出力(END3)
AND MR3011               ; RB12 起動IL　ON=起動可能
RES MR18411              ; 【sw1】RB12_HOME_ALM
CON
RES MR1501               ;  ｶｼﾒ U3(I/W)_起動入力(START始動)
CON
SET R36108               ; RB12 HOME
CON
JMP @MR1012
STG @MR1012
ANB R36110               ; During RB12 HOME
AND R36109               ; RB12 HOME END
MPS
LDB R36103               ; RB12Alarm
ANB MR18411              ; 【sw1】RB12_HOME_ALM
ANL
RES R36109               ; RB12 HOME END
CON
JMP @MR1013
MPP
AND R36103               ; RB12Alarm
@SET MR13212             ; RB12原点復帰ｴﾗｰ
CON
AND MR18411              ; 【sw1】RB12_HOME_ALM
RES R36109               ; RB12 HOME END
CON
JMP @MR1011
STG @MR1013
ANB R1403                ;  ｶｼﾒ U3(I_W)_異常出力
AND R1402                ;  ｶｼﾒ U3(I_W)_運転終了出力(END3)
JMP @MR1014
STG @MR1014
JMP @MR1100              ; ★
;RB12原点復帰
STG @MR1100              ; ★
MPS
LDB DM10595.3            ; ALM_異常 RB12
ANB DM10595.7            ; ALM 軽故障 RB12
AND DM10595.14           ; PWR_準備完了 RB12
ANB DM10595.15           ; MGS_非常停止 RB12
ANL
JMP @MR1101
MPP
AND DM10595.3            ; ALM_異常 RB12
SET DM10795.3            ; RES(ﾘｾｯﾄ) RB12
CON
JMP @MR1100              ; ★
STG @MR1101
ANB R36110               ; During RB12 HOME
SET DM10795.4            ; SON(ｻｰﾎﾞON指令) RB12
CON
JMP @MR1102
STG @MR1102
AND DM10595.4            ; SV_ｻｰﾎﾞON中 RB12
ANB R36108               ; RB12 HOME
ANB R36110               ; During RB12 HOME
MPS
LDB DM10595.1            ; HEND_原復完了 RB12
OR MR18411               ; 【sw1】RB12_HOME_ALM
AND MR3011               ; RB12 起動IL　ON=起動可能
ANL
SET R36108               ; RB12 HOME
CON
JMP @MR1103              ; ■■
MPP
LD DM10595.1             ; HEND_原復完了 RB12
ANB MR18411              ; 【sw1】RB12_HOME_ALM
ANL
JMP @MR1110
STG @MR1103              ; ■■
AND R36110               ; During RB12 HOME
RES MR18411              ; 【sw1】RB12_HOME_ALM
CON
JMP @MR1104
STG @MR1104
ANB R36110               ; During RB12 HOME
AND R36109               ; RB12 HOME END
MPS
LDB R36103               ; RB12Alarm
ANB MR18411              ; 【sw1】RB12_HOME_ALM
ANL
RES R36109               ; RB12 HOME END
CON
JMP @MR1110
MPP
AND R36103               ; RB12Alarm
@SET MR13212             ; RB12原点復帰ｴﾗｰ
CON
AND MR18411              ; 【sw1】RB12_HOME_ALM
RES R36109               ; RB12 HOME END
CON
JMP @MR1102
;
STG @MR1110
TMH #737 #3              ; RB12
CON
AND T737                 ; RB12
JMP @MR1111
STG @MR1111
RES MR11211              ; 【SW1_Retry】ALM_RES_RB12
CON
ANB R36100               ; RB12 MOVE
ANB R36102               ; During RB12 MOVE
MPS
LD= #1 EM1322            ; RB12Target Pos
AND MR3011               ; RB12 起動IL　ON=起動可能
ANL
SET R36100               ; RB12 MOVE
CON
JMP @MR1112
MPP
DW #1 EM1322             ; RB12Target Pos
STG @MR1112
AND R36101               ; RB12 MOVE END
MPS
LDB R36103               ; RB12Alarm
AND T2210                ; RB12 Pos.1
ANPB R36101              ; RB12 MOVE END
ANB MR11211              ; 【SW1_Retry】ALM_RES_RB12
ANL
RES R36101               ; RB12 MOVE END
CON
JMP @MR1113
MPP
AND R36103               ; RB12Alarm
@SET MR16812             ; RB12ｴﾗｰ検出
CON
AND MR11211              ; 【SW1_Retry】ALM_RES_RB12
RES R36101               ; RB12 MOVE END
CON
JMP @MR1111
STG @MR1113
MPS
ANB MR4603               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 後退限ERR
SET MR7603               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 後退限
CON
RES MR7602               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前進限
CON
AND R4603                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 後退限
ANB R4602                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 前進限
JMP @MR1209
MPP
LD MR4603                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 後退限ERR
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR1209
MPS
ANB MR4703               ; M/S2 COFｶﾞｲﾄﾞ上下 下限ERR
SET MR7703               ; -
CON
RES MR7702               ; -
CON
AND R4703                ; M/S2 COFｶﾞｲﾄﾞ上下 下限
ANB R4702                ; M/S2 COFｶﾞｲﾄﾞ上下 上限
JMP @MR1210
MPP
LD MR4703                ; M/S2 COFｶﾞｲﾄﾞ上下 下限ERR
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR1210
JMP @MR1211
STG @MR1211
JMP @MR1212
STG @MR1212
JMP @MR1213
;
STG @MR1213
MPS
ANB MR4601               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 上流側限ERR
RES MR7600               ; 下流ｾﾙ間ｽﾗｲﾀﾞ 下流側限
CON
AND R4601                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 上流側限
ANB R4600                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 下流側限
JMP @MR1106
MPP
LD MR4601                ; 下流ｾﾙ間ｽﾗｲﾀﾞ 上流側限ERR
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
ANL
SET @MR1900              ; Main1 HALT許可
;
STG @MR1106
MPS
ANB MR4701               ; M/S1 COFｶﾞｲﾄﾞ上下 下限ERR
RES MR7700               ; -
CON
AND R4701                ; M/S1 COFｶﾞｲﾄﾞ上下 下限
ANB R4700                ; M/S1 COFｶﾞｲﾄﾞ上下 上限
JMP @MR1107
MPP
LD MR4701                ; M/S1 COFｶﾞｲﾄﾞ上下 下限ERR
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
ANL
SET @MR1900              ; Main1 HALT許可
;
STG @MR1107
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANB R41000               ; _Grp1_Task0_起動中ﾌﾗｸﾞ
AND T2060                ; RB4 Pos.1　作業原点高さ
ANB R41001               ; _Grp1_Task1_起動中ﾌﾗｸﾞ
AND T2080                ; RB5 Pos.1　作業原点高さ
ANB R41005               ; _Grp1_Task5_起動中ﾌﾗｸﾞ
AND T2100                ; RB6 Pos.1 作業原点
AND T2210                ; RB12 Pos.1
ANL
JMP @MR1108
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR1108
JMP @MR1109
STG @MR1109
LD T2080                 ; RB5 Pos.1　作業原点高さ
OR T2081                 ; RB5 Pos.2　 搬送高さ
ANL
LD T2100                 ; RB6 Pos.1 作業原点
OR T2101                 ; RB6 Pos.2 搬送高さ
ANL
LD T2060                 ; RB4 Pos.1　作業原点高さ
OR T2061                 ; RB4 Pos.2　搬送高さ
ANL
JMP @MR1114
;RB17原点復帰
STG @MR1114
MPS
ANB MR4611               ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 開限ERR
SET MR7613               ; -
CON
RES MR7612               ; ﾎﾙﾀﾞｻﾌﾞ給材pp上下_低速切替
CON
AND R4611                ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 開限
ANB MR10602              ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 閉限
JMP @MR1200
MPP
LD MR4611                ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 開限ERR
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR1200
MPS
LDB DM10635.3            ; ALM_異常 RB17
ANB DM10635.7            ; ALM 軽故障 RB17
AND DM10635.14           ; PWR_準備完了 RB17
ANB DM10635.15           ; MGS_非常停止 RB17
ANL
JMP @MR1201
MPP
AND DM10635.3            ; ALM_異常 RB17
SET DM10835.3            ; RES(ﾘｾｯﾄ) RB17
CON
JMP @MR1200
STG @MR1201
ANB R36610               ; During RB17 HOME
RES DM10835.3            ; RES(ﾘｾｯﾄ) RB17
CON
SET DM10835.4            ; SON(ｻｰﾎﾞON指令) RB17
CON
JMP @MR1202
STG @MR1202
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
AND DM10635.4            ; SV_ｻｰﾎﾞON中 RB17
ANB R36608               ; RB17 HOME
ANB R36610               ; During RB17 HOME
ANL
MPS
LDB DM10635.1            ; HEND_原復完了 RB17
OR MR18500               ; 【sw1】RB17_HOME_ALM
AND MR3100               ; RB17 起動IL　ON=起動可能
ANL
SET R36608               ; RB17 HOME
CON
JMP @MR1203
MPP
LD DM10635.1             ; HEND_原復完了 RB17
ANB MR18500              ; 【sw1】RB17_HOME_ALM
ANL
JMP @MR1205
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR1203
AND R36610               ; During RB17 HOME
RES MR18500              ; 【sw1】RB17_HOME_ALM
CON
JMP @MR1204
STG @MR1204
ANB R36610               ; During RB17 HOME
AND R36609               ; RB17 HOME END
MPS
LDB R36603               ; RB17Alarm
ANB MR18500              ; 【sw1】RB17_HOME_ALM
ANL
RES R36609               ; RB17 HOME END
CON
JMP @MR1205
MPP
AND R36603               ; RB17Alarm
@SET MR13301             ; RB17原点復帰ｴﾗｰ
CON
AND MR18500              ; 【sw1】RB17_HOME_ALM
RES R36609               ; RB17 HOME END
CON
JMP @MR1202
;
STG @MR1205
ANPB @MR1205
TMH #738 #10             ; RB17
CON
AND T738                 ; RB17
JMP @MR1206
STG @MR1206
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
RES MR11300              ; 【SW1_Retry】ALM_RES_RB17
CON
ANB R36600               ; RB17 MOVE
ANB R36602               ; During RB17 MOVE
ANB R36601               ; RB17 MOVE END
MPS
LD= #1 EM1332            ; RB17Target Pos
AND MR3100               ; RB17 起動IL　ON=起動可能
ANL
SET R36600               ; RB17 MOVE
CON
JMP @MR1207
MPP
DW #1 EM1332             ; RB17Target Pos
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR1207
AND R36601               ; RB17 MOVE END
MPS
LDB R36603               ; RB17Alarm
AND T2300                ; RB17 Pos.1
ANB MR11300              ; 【SW1_Retry】ALM_RES_RB17
ANL
RES R36601               ; RB17 MOVE END
CON
JMP @MR1208
MPP
AND R36603               ; RB17Alarm
@SET MR16901             ; RB17ｴﾗｰ検出
CON
AND MR11300              ; 【SW1_Retry】ALM_RES_RB17
RES R36601               ; RB17 MOVE END
CON
JMP @MR1206
STG @MR1208
JMP @MR1300
;RB18原点復帰
STG @MR1215
MPS
ANB MR4711               ; -ERR
SET MR7713               ; -
CON
RES MR7712               ; -
CON
AND R4711                ; -
ANB R4710                ; -
JMP @MR1300
MPP
LD MR4711                ; -ERR
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR1300
MPS
LDB DM10643.3            ; ALM_異常 RB18
ANB DM10643.7            ; ALM 軽故障 RB18
AND DM10643.14           ; PWR_準備完了 RB18
ANB DM10643.15           ; MGS_非常停止 RB18
ANL
JMP @MR1301
MPP
AND DM10643.3            ; ALM_異常 RB18
SET DM10843.3            ; RES(ﾘｾｯﾄ) RB18
CON
JMP @MR1300
STG @MR1301
ANB R36710               ; During RB18 HOME
RES DM10843.3            ; RES(ﾘｾｯﾄ) RB18
CON
SET DM10843.4            ; SON(ｻｰﾎﾞON指令) RB18
CON
JMP @MR1302
STG @MR1302
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
AND DM10643.4            ; SV_ｻｰﾎﾞON中 RB18
ANB R36708               ; RB18 HOME
ANB R36710               ; During RB18 HOME
ANL
MPS
LDB DM10643.1            ; HEND_原復完了 RB18
OR MR18501               ; 【sw1】RB18_HOME_ALM
AND MR3101               ; RB18 起動IL　ON=起動可能
ANL
SET R36708               ; RB18 HOME
CON
JMP @MR1303
MPP
LD DM10643.1             ; HEND_原復完了 RB18
ANB MR18501              ; 【sw1】RB18_HOME_ALM
ANL
JMP @MR1314
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR1303
AND R36710               ; During RB18 HOME
RES MR18501              ; 【sw1】RB18_HOME_ALM
CON
JMP @MR1304
STG @MR1304
ANB R36710               ; During RB18 HOME
AND R36709               ; RB18 HOME END
MPS
LDB R36703               ; RB18Alarm
ANB MR18501              ; 【sw1】RB18_HOME_ALM
ANL
RES R36709               ; RB18 HOME END
CON
JMP @MR1314
MPP
AND R36703               ; RB18Alarm
@SET MR13302             ; RB18原点復帰ｴﾗｰ
CON
AND MR18501              ; 【sw1】RB18_HOME_ALM
RES R36709               ; RB18 HOME END
CON
JMP @MR1302
;
STG @MR1314
ANPB @MR1314
TMH #739 #10             ; RB18
CON
AND T739                 ; RB18
JMP @MR1315
STG @MR1315
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
RES MR11301              ; 【SW1_Retry】ALM_RES_RB18
CON
ANB R36700               ; RB18 MOVE
ANB R36702               ; During RB18 MOVE
ANB R36701               ; RB18 MOVE END
MPS
LD= #1 EM1334            ; RB18Target Pos
AND MR3101               ; RB18 起動IL　ON=起動可能
ANL
SET R36700               ; RB18 MOVE
CON
JMP @MR1400
MPP
DW #1 EM1334             ; RB18Target Pos
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR1400
AND R36701               ; RB18 MOVE END
MPS
LDB R36703               ; RB18Alarm
AND T2320                ; RB18 Pos.1
ANB MR11301              ; 【SW1_Retry】ALM_RES_RB18
ANL
RES R36701               ; RB18 MOVE END
CON
JMP @MR1305
MPP
AND R36703               ; RB18Alarm
@SET MR16902             ; RB18ｴﾗｰ検出
CON
AND MR11301              ; 【SW1_Retry】ALM_RES_RB18
RES R36701               ; RB18 MOVE END
CON
JMP @MR1315
;【ｽﾗｲﾀﾞｰ5のﾜｰｸｽﾃｰﾀｽ】
;
;DM11215.0 : ﾍｯﾄﾞｻﾌﾞ有無（1:有 2:無)
;       .1 : ﾎﾙﾀﾞｰｻﾌﾞ組込中
;       .2 : ﾎﾙﾀﾞｰｻﾌﾞ組込完了
;       .3 : ｶｼﾒ中
;       .4 : ｶｼﾒ完了
;       
;       
;       .15：廃棄必要
;       
;       
;M_ｽﾗ5　↓
LD DM2001.12             ; 無条件 ﾜｰｸ 排出ｽﾗｲﾀﾞｰ上
OUT @MR1309              ; 無条件 ﾜｰｸ排出FLG
STG @MR1305
MPS
AND R4613                ; -
MPS
LD DM11215.0             ; RB17 ﾍｯﾄﾞSub　受取完了　記憶
AND DM11215.1            ; RB17 ﾎﾙﾀﾞｰSub　組込中
AND DM11215.2            ; RB17 ﾎﾙﾀﾞｰSub　組込完了
ANB @MR1309              ; 無条件 ﾜｰｸ排出FLG
ANL
JMP @MR1312
MPP
LDB DM11215.0            ; RB17 ﾍｯﾄﾞSub　受取完了　記憶
ORB DM11215.1            ; RB17 ﾎﾙﾀﾞｰSub　組込中
ORB DM11215.2            ; RB17 ﾎﾙﾀﾞｰSub　組込完了
OR @MR1309               ; 無条件 ﾜｰｸ排出FLG
ANL
SET DM11215.15           ; RB17 不良品 記憶FLG
CON
JMP @MR1405
MPP
ANB R4613                ; -
JMP @MR1307
; Ho-Subがない時
STG @MR1307
SET MR12505              ; ﾒｲﾝｽﾗｲﾀﾞ5 He-subﾜｰｸ有無確認
CON
JMP @MR1308
STG @MR1308
ANB MR12505              ; ﾒｲﾝｽﾗｲﾀﾞ5 He-subﾜｰｸ有無確認
AND MR12508              ; ﾜｰｸ有無確認Sub_End
MPS
AND MR12509              ; ﾒｲﾝｽﾗｲﾀﾞ5 ﾜｰｸ有
MPS
LD DM11215.0             ; RB17 ﾍｯﾄﾞSub　受取完了　記憶
ANB @MR1309              ; 無条件 ﾜｰｸ排出FLG
ANL
SET @MR5100              ; Heｻﾌﾞのみ　Sub-5
CON
JMP @MR1311
MPP
LDB DM11215.0            ; RB17 ﾍｯﾄﾞSub　受取完了　記憶
OR @MR1309               ; 無条件 ﾜｰｸ排出FLG
ANL
SET DM11215.15           ; RB17 不良品 記憶FLG
CON
JMP @MR1405
MPP
AND MR12510              ; ﾒｲﾝｽﾗｲﾀﾞ5 ﾜｰｸ無
SET @MR5108              ; He-SubとHo−Sub　両方無し-5
CON
JMP @MR1310
; He-ｻﾌﾞとHo−ｻﾌﾞ　両方なし
STG @MR1310
ANB @MR5108              ; He-SubとHo−Sub　両方無し-5
AND @MR5109              ; He-SubとHo−Sub　両方無し-5_End
DW #0 DM11215            ; MS-5 ﾜｰｸ状況ｽﾃｰﾀｽ
CON
RES @MR5109              ; He-SubとHo−Sub　両方無し-5_End
CON
JMP @MR1402              ; Next
;He-ｻﾌﾞのみ有
STG @MR1311
ANB @MR5100              ; Heｻﾌﾞのみ　Sub-5
AND @MR5101              ; Heｻﾌﾞのみ　Sub-5_End
RES @MR5101              ; Heｻﾌﾞのみ　Sub-5_End
CON
JMP @MR1402              ; Next
;Ho-ｻﾌﾞ有の時
STG @MR1312
SET @MR5104              ; Ho-ｻﾌﾞ有-5 _Sub
CON
JMP @MR1313
STG @MR1313
ANB @MR5104              ; Ho-ｻﾌﾞ有-5 _Sub
AND @MR5105              ; Ho-ｻﾌﾞ有-5 _SubEnd
RES @MR5105              ; Ho-ｻﾌﾞ有-5 _SubEnd
CON
JMP @MR1402              ; Next
STG @MR1402              ; Next
RES MR7610               ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 閉
CON
SET MR7611               ; ﾎﾙﾀﾞｻﾌﾞ除材PPﾊﾝﾄﾞ 開
CON
JMP @MR1405
;OK品／NG品判定
STG @MR1405
AND CR2002               ; 常時ON
MPS
ANB DM11215.15           ; RB17 不良品 記憶FLG
JMP @MR1510
MPP
AND DM11215.15           ; RB17 不良品 記憶FLG
SET @MR5400              ; MS-5ﾜｰｸ排出_Sub
CON
JMP @MR1505
STG @MR1505
AND @MR5402              ; MS-5ﾜｰｸ排出_Sub　実行中
AND @MR5401              ; MS-5ﾜｰｸ排出_Sub実行完了
RES @MR5401              ; MS-5ﾜｰｸ排出_Sub実行完了
CON
JMP @MR1506
STG @MR1506
ANB @MR5402              ; MS-5ﾜｰｸ排出_Sub　実行中
JMP @MR1507
STG @MR1507
JMP @MR1508
STG @MR1508
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
RES MR11300              ; 【SW1_Retry】ALM_RES_RB17
CON
ANB R36600               ; RB17 MOVE
ANB R36602               ; During RB17 MOVE
ANB R36601               ; RB17 MOVE END
MPS
LD= #1 EM1332            ; RB17Target Pos
AND MR3100               ; RB17 起動IL　ON=起動可能
ANL
SET R36600               ; RB17 MOVE
CON
JMP @MR1509
MPP
DW #1 EM1332             ; RB17Target Pos
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR1509
AND R36601               ; RB17 MOVE END
MPS
LDB R36603               ; RB17Alarm
AND T2300                ; RB17 Pos.1
ANB MR11300              ; 【SW1_Retry】ALM_RES_RB17
ANL
RES R36601               ; RB17 MOVE END
CON
JMP @MR1510
MPP
AND R36603               ; RB17Alarm
@SET MR16901             ; RB17ｴﾗｰ検出
CON
AND MR11300              ; 【SW1_Retry】ALM_RES_RB17
RES R36601               ; RB17 MOVE END
CON
JMP @MR1508
;【ｽﾗｲﾀﾞｰ6のﾜｰｸｽﾃｰﾀｽ】
;
;DM11216.0 : ﾍｯﾄﾞｻﾌﾞ有無（1:有 2:無)
;       .1 : ﾎﾙﾀﾞｰｻﾌﾞ組込中
;       .2 : ﾎﾙﾀﾞｰｻﾌﾞ組込完了
;       .3 : ｶｼﾒ中
;       .4 : ｶｼﾒ完了
;       
;       
;       .15：廃棄必要
;       
;       
;M_ｽﾗ6　↓
LD DM2001.12             ; 無条件 ﾜｰｸ 排出ｽﾗｲﾀﾞｰ上
OUT @MR1511              ; 無条件 ﾜｰｸ排出FLG
STG @MR1510
MPS
AND R4713                ; -
MPS
LD DM11216.0             ; RB18 ﾍｯﾄﾞSub　受取完了 記憶FLG
AND DM11216.1            ; RB18 ﾎﾙﾀﾞｰSub　組込中 記憶FLG
AND DM11216.2            ; RB18 ﾎﾙﾀﾞｰSub　組込完了 記憶FLG
ANB @MR1511              ; 無条件 ﾜｰｸ排出FLG
ANL
JMP @MR1412
MPP
LDB DM11216.0            ; RB18 ﾍｯﾄﾞSub　受取完了 記憶FLG
ORB DM11216.1            ; RB18 ﾎﾙﾀﾞｰSub　組込中 記憶FLG
ORB DM11216.2            ; RB18 ﾎﾙﾀﾞｰSub　組込完了 記憶FLG
OR @MR1511               ; 無条件 ﾜｰｸ排出FLG
ANL
SET DM11216.15           ; RB18 不良品 記憶FLG
CON
JMP @MR1503
MPP
ANB R4713                ; -
JMP @MR1407
; Ho-Subがない時
STG @MR1407
SET MR12605              ; ﾒｲﾝｽﾗｲﾀﾞ6 He-subﾜｰｸ有無確認
CON
JMP @MR1408
STG @MR1408
ANB MR12605              ; ﾒｲﾝｽﾗｲﾀﾞ6 He-subﾜｰｸ有無確認
AND MR12608              ; ﾜｰｸ有無確認Sub_End
MPS
AND MR12609              ; ﾒｲﾝｽﾗｲﾀﾞ6 ﾜｰｸ有
MPS
LD DM11216.0             ; RB18 ﾍｯﾄﾞSub　受取完了 記憶FLG
ANB @MR1511              ; 無条件 ﾜｰｸ排出FLG
ANL
SET @MR5102              ; Heｻﾌﾞのみ　Sub-6
CON
JMP @MR1411
MPP
LDB DM11216.0            ; RB18 ﾍｯﾄﾞSub　受取完了 記憶FLG
OR @MR1511               ; 無条件 ﾜｰｸ排出FLG
ANL
SET DM11216.15           ; RB18 不良品 記憶FLG
CON
JMP @MR1503
MPP
AND MR12610              ; ﾒｲﾝｽﾗｲﾀﾞ6 ﾜｰｸ無
SET @MR5110              ; He-SubとHo−Sub　両方無し-6
CON
JMP @MR1410
; He-ｻﾌﾞとHo−ｻﾌﾞ　両方なし
STG @MR1410
ANB @MR5110              ; He-SubとHo−Sub　両方無し-6
AND @MR5111              ; He-SubとHo−Sub　両方無し-6_End
DW #0 DM11216            ; MS-6 ﾜｰｸ状況ｽﾃｰﾀｽ
CON
RES @MR5111              ; He-SubとHo−Sub　両方無し-6_End
CON
JMP @MR1502              ; Next
;He-ｻﾌﾞのみ有
STG @MR1411
ANB @MR5102              ; Heｻﾌﾞのみ　Sub-6
AND @MR5103              ; Heｻﾌﾞのみ　Sub-6_End
RES @MR5103              ; Heｻﾌﾞのみ　Sub-6_End
CON
JMP @MR1502              ; Next
;Ho-ｻﾌﾞ有の時
STG @MR1412
SET @MR5106              ; Ho-ｻﾌﾞ有-6 _Sub
CON
JMP @MR1413
STG @MR1413
ANB @MR5106              ; Ho-ｻﾌﾞ有-6 _Sub
AND @MR5107              ; Ho-ｻﾌﾞ有-6 _SubEnd
RES @MR5107              ; Ho-ｻﾌﾞ有-6 _SubEnd
CON
JMP @MR1502              ; Next
STG @MR1502              ; Next
RES MR7710               ; -
CON
SET MR7711               ; -
CON
JMP @MR1503
;OK品／NG品判定
STG @MR1503
AND CR2002               ; 常時ON
MPS
ANB DM11216.15           ; RB18 不良品 記憶FLG
JMP @MR1606
MPP
AND DM11216.15           ; RB18 不良品 記憶FLG
SET @MR5800              ; MS-6ﾜｰｸ排出_Sub
CON
JMP @MR1601
STG @MR1601
AND @MR5802              ; MS-6ﾜｰｸ排出_Sub　実行中
AND @MR5801              ; MS-6ﾜｰｸ排出_Sub実行完了
RES @MR5801              ; MS-6ﾜｰｸ排出_Sub実行完了
CON
JMP @MR1602
STG @MR1602
ANB @MR5802              ; MS-6ﾜｰｸ排出_Sub　実行中
JMP @MR1603
STG @MR1603
JMP @MR1604
STG @MR1604
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
RES MR11301              ; 【SW1_Retry】ALM_RES_RB18
CON
ANB R36700               ; RB18 MOVE
ANB R36702               ; During RB18 MOVE
ANB R36701               ; RB18 MOVE END
MPS
LD= #1 EM1334            ; RB18Target Pos
AND MR3101               ; RB18 起動IL　ON=起動可能
ANL
SET R36700               ; RB18 MOVE
CON
JMP @MR1605
MPP
DW #1 EM1334             ; RB18Target Pos
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR1605
AND R36701               ; RB18 MOVE END
MPS
LDB R36703               ; RB18Alarm
AND T2320                ; RB18 Pos.1
ANB MR11301              ; 【SW1_Retry】ALM_RES_RB18
ANL
RES R36701               ; RB18 MOVE END
CON
JMP @MR1606
MPP
AND R36703               ; RB18Alarm
@SET MR16902             ; RB18ｴﾗｰ検出
CON
AND MR11301              ; 【SW1_Retry】ALM_RES_RB18
RES R36701               ; RB18 MOVE END
CON
JMP @MR1604
;FIFOﾃｰﾌﾞﾙ更新
;ﾃｰﾌﾞﾙの中にRB17なら５、RB18なら６が入っていてるのに、
;ﾜｰｸ自体が無い場合は、該当のFIFOﾃｰﾌﾞﾙをｸﾘｱする。
;ﾜｰｸがあれば、ｽﾙｰ。
STG @MR1606
MPS
AND DM11215.0            ; RB17 ﾍｯﾄﾞSub　受取完了　記憶
JMP @MR1614
MPP
ANB DM11215.0            ; RB17 ﾍｯﾄﾞSub　受取完了　記憶
MPS
AND= DM50 #5             ; ﾎﾙﾀﾞｻﾌﾞ指定No.
DW #0 DM50               ; ﾎﾙﾀﾞｻﾌﾞ指定No.
CON
JMP @MR1608
MPP
AND<> DM50 #5            ; ﾎﾙﾀﾞｻﾌﾞ指定No.
JMP @MR1608
STG @MR1608
MPS
AND= DM51 #5             ; FIFOﾃｰﾌﾞﾙ 1個目
DW #0 DM51               ; FIFOﾃｰﾌﾞﾙ 1個目
CON
JMP @MR1609
MPP
AND<> DM51 #5            ; FIFOﾃｰﾌﾞﾙ 1個目
JMP @MR1609
STG @MR1609
MPS
AND= DM52 #5             ; FIFOﾃｰﾌﾞﾙ 2個目
DW #0 DM52               ; FIFOﾃｰﾌﾞﾙ 2個目
CON
JMP @MR1610
MPP
AND<> DM52 #5            ; FIFOﾃｰﾌﾞﾙ 2個目
JMP @MR1610
STG @MR1610
MPS
AND= DM53 #5             ; FIFOﾃｰﾌﾞﾙ 3個目
DW #0 DM53               ; FIFOﾃｰﾌﾞﾙ 3個目
CON
JMP @MR1611
MPP
AND<> DM53 #5            ; FIFOﾃｰﾌﾞﾙ 3個目
JMP @MR1611
STG @MR1611
MPS
AND= DM54 #5             ; FIFOﾃｰﾌﾞﾙ 4個目
DW #0 DM54               ; FIFOﾃｰﾌﾞﾙ 4個目
CON
JMP @MR1612
MPP
AND<> DM54 #5            ; FIFOﾃｰﾌﾞﾙ 4個目
JMP @MR1612
STG @MR1612
MPS
AND= DM55 #5             ; FIFOﾃｰﾌﾞﾙ 5個目
DW #0 DM55               ; FIFOﾃｰﾌﾞﾙ 5個目
CON
JMP @MR1613
MPP
AND<> DM55 #5            ; FIFOﾃｰﾌﾞﾙ 5個目
JMP @MR1613
STG @MR1613
MPS
AND= DM56 #5             ; FIFOﾃｰﾌﾞﾙ 6個目
DW #0 DM56               ; FIFOﾃｰﾌﾞﾙ 6個目
CON
JMP @MR1614
MPP
AND<> DM56 #5            ; FIFOﾃｰﾌﾞﾙ 6個目
JMP @MR1614
;
STG @MR1614
MPS
AND DM11216.0            ; RB18 ﾍｯﾄﾞSub　受取完了 記憶FLG
JMP @MR1500              ; HOME ENDへ
MPP
ANB DM11216.0            ; RB18 ﾍｯﾄﾞSub　受取完了 記憶FLG
MPS
AND= DM50 #6             ; ﾎﾙﾀﾞｻﾌﾞ指定No.
DW #0 DM50               ; ﾎﾙﾀﾞｻﾌﾞ指定No.
CON
JMP @MR1615
MPP
AND<> DM50 #6            ; ﾎﾙﾀﾞｻﾌﾞ指定No.
JMP @MR1615
STG @MR1615
MPS
AND= DM51 #6             ; FIFOﾃｰﾌﾞﾙ 1個目
DW #0 DM51               ; FIFOﾃｰﾌﾞﾙ 1個目
CON
JMP @MR1700
MPP
AND<> DM51 #6            ; FIFOﾃｰﾌﾞﾙ 1個目
JMP @MR1700
STG @MR1700
MPS
AND= DM52 #6             ; FIFOﾃｰﾌﾞﾙ 2個目
DW #0 DM52               ; FIFOﾃｰﾌﾞﾙ 2個目
CON
JMP @MR1701
MPP
AND<> DM52 #6            ; FIFOﾃｰﾌﾞﾙ 2個目
JMP @MR1701
STG @MR1701
MPS
AND= DM53 #6             ; FIFOﾃｰﾌﾞﾙ 3個目
DW #0 DM53               ; FIFOﾃｰﾌﾞﾙ 3個目
CON
JMP @MR1702
MPP
AND<> DM53 #6            ; FIFOﾃｰﾌﾞﾙ 3個目
JMP @MR1702
STG @MR1702
MPS
AND= DM54 #6             ; FIFOﾃｰﾌﾞﾙ 4個目
DW #0 DM54               ; FIFOﾃｰﾌﾞﾙ 4個目
CON
JMP @MR1703
MPP
AND<> DM54 #6            ; FIFOﾃｰﾌﾞﾙ 4個目
JMP @MR1703
STG @MR1703
MPS
AND= DM55 #6             ; FIFOﾃｰﾌﾞﾙ 5個目
DW #0 DM55               ; FIFOﾃｰﾌﾞﾙ 5個目
CON
JMP @MR1704
MPP
AND<> DM55 #6            ; FIFOﾃｰﾌﾞﾙ 5個目
JMP @MR1704
STG @MR1704
MPS
AND= DM56 #6             ; FIFOﾃｰﾌﾞﾙ 6個目
DW #0 DM56               ; FIFOﾃｰﾌﾞﾙ 6個目
CON
JMP @MR1705
MPP
AND<> DM56 #6            ; FIFOﾃｰﾌﾞﾙ 6個目
JMP @MR1705
STG @MR1705
JMP @MR1500              ; HOME ENDへ
STG @MR1500              ; HOME ENDへ
JMP @MR1515              ; HOME END
STG @MR1515              ; HOME END
RES @MR1002              ; HOME中
CON
JMP LR604                ; _Grp1_Task4_Fin.STG
;<h1/>AUTO/自動動作
STG LR5404               ; _Grp1_Task4_AUTO.STG
JMP @MR3000              ; AUTO Main1
;<h1/>Auto-Main1/Autoﾒｲﾝﾙｰﾁﾝ1
;[本STG内容]
;・各TaskのAUTO動作を記述して下さい
;・動作ﾓｰﾄﾞは「AUTOAC」に格納されています(1〜32)
;・@MR3000:AUTO_Main1開始、@MR3001:AUTO_Main1完了、@MR3002:AUTO_Main1動作中
STG @MR3000              ; AUTO Main1
AND CR2002               ; 常時ON
SET @MR3002              ; AUTO Main1 Busy
CON
SET @MR4000              ; AUTO Main2
CON
JMP @MR3003              ; RepeatA
;<h1/>ｶｼﾒUT1_ﾒﾝﾃﾅﾝｽ移行監視回路１
LD @MR3002               ; AUTO Main1 Busy
ANP B048                 ; ｶｼﾒUT3_上流ﾒﾝﾃﾓｰﾄﾞ移行開始SW
OR MR11012               ; ｶｼﾒUT3_上流ﾒﾝﾃﾓｰﾄﾞ移行待ち
ANB MR11014              ; ｶｼﾒUT3_上流ﾒﾝﾃﾓｰﾄﾞ終了
MPS
OUT MR11012              ; ｶｼﾒUT3_上流ﾒﾝﾃﾓｰﾄﾞ移行待ち
MPP
LD CR2006                ; 1sｸﾛｯｸﾊﾟﾙｽ
OR MR11013               ; ｶｼﾒUT3_上流ﾒﾝﾃﾓｰﾄﾞ移行中
ANL
OUT B049                 ; ｶｼﾒUT3_上流ﾒﾝﾃﾓｰﾄﾞ移行中LP
STG @MR3003              ; RepeatA
JMP @MR3306
STG @MR3306
AND CR2002               ; 常時ON
MPS
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
MPP
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
AND R46106               ; _定停止移行中
ANL
SET @MR3801              ; 継続可不可確認sub_
CON
JMP @MR3900              ; Main1 END
;Auto終了処理
STG @MR3900              ; Main1 END
AND @MR4001              ; Main2 END
AND CR2002               ; 常時ON
RES @MR4001              ; Main2 END
CON
JMP @MR3915              ; AUTO END
STG @MR3915              ; AUTO END
ZRES @MR6400 @MR6415     ; 熱ｶｼﾒ部3 管理_Sub  ★１_Repeat
CON
ZRES @MR100 @MR6415      ; Task0 ERROR  ★１_Repeat
CON
JMP LR604                ; _Grp1_Task4_Fin.STG
;<h1/>Auto-Main2/Autoﾒｲﾝﾙｰﾁﾝ2
;[本STG内容]
;・@MR4000の起動はMain1にて行う事
;・@MR4000:AUTO_Main2開始、@MR4001:AUTO_Main2完了、@MR4002:AUTO_Main2動作中
STG @MR4000              ; AUTO Main2
SET @MR4002              ; Main2 Busy
CON
JMP @MR4003              ; RepeatA
;<h1/>ｶｼﾒUT1_ﾒﾝﾃﾅﾝｽ移行監視回路１
LD @MR4002               ; Main2 Busy
ANP B04A                 ; ｶｼﾒUT3_下流ﾒﾝﾃﾓｰﾄﾞ移行開始SW
OR MR11015               ; ｶｼﾒUT3_下流ﾒﾝﾃﾓｰﾄﾞ移行待ち
ANB MR11101              ; ｶｼﾒUT3_下流ﾒﾝﾃﾓｰﾄﾞ終了
MPS
OUT MR11015              ; ｶｼﾒUT3_下流ﾒﾝﾃﾓｰﾄﾞ移行待ち
MPP
LD CR2006                ; 1sｸﾛｯｸﾊﾟﾙｽ
OR MR11100               ; ｶｼﾒUT3_下流ﾒﾝﾃﾓｰﾄﾞ移行中
ANL
OUT B04B                 ; ｶｼﾒUT3_下流ﾒﾝﾃﾓｰﾄﾞ移行中LP
STG @MR4003              ; RepeatA
JMP @MR4306
;<<行コメント編集：Ctrl+Enter/Escで確定>>
STG @MR4306
AND CR2002               ; 常時ON
MPS
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
SET @MR1901              ; Main2 HALT許可
MPP
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
AND R46106               ; _定停止移行中
ANL
SET @MR4801
CON
JMP @MR4914              ; Main2 ENDへ
STG @MR4914              ; Main2 ENDへ
JMP @MR4915              ; Main2 END
STG @MR4915              ; Main2 END
SET @MR4001              ; Main2 END
CON
RES @MR4002              ; Main2 Busy
CON
ENDS
;<h1/>MAINTE/ﾒﾝﾃﾅﾝｽ動作
;[本STG内容]
;・各TaskのMAINTE動作を記述して下さい
;・動作ﾓｰﾄﾞは「MAINTEAC*」に格納されています(1〜32)
;・動作終了時は@MR2915にJMPして下さい
STG LR5604               ; _Grp1_Task4_MAINTE.STG
JMP @MR2000              ; Mainte
STG @MR2000              ; Mainte
MPS
AND CR2003               ; 常時OFF
SET @MR2002              ; Mainte中
CON
JMP @MR2003
MPP
JMP @MR2003
LD @MR2002               ; Mainte中
AND CR2003               ; 常時OFF
MPS
AND= DM4110 #29          ; _Group1　ﾒﾝﾃ動作番号
@DW #2000 DM3008         ; _MainTP　切替ﾍﾟｰｼﾞNo
MRD
AND= DM4110 #21          ; _Group1　ﾒﾝﾃ動作番号
SET @MR2010              ; ﾒｲﾝｽﾗｲﾀﾞｰ 5_FLG
CON
RES @MR2011              ; ﾒｲﾝｽﾗｲﾀﾞｰ 6_FLG
CON
@SET @MR2015
MRD
AND= DM4110 #22          ; _Group1　ﾒﾝﾃ動作番号
SET @MR2011              ; ﾒｲﾝｽﾗｲﾀﾞｰ 6_FLG
CON
RES @MR2010              ; ﾒｲﾝｽﾗｲﾀﾞｰ 5_FLG
CON
@SET @MR2015
MPP
AND= DM4110 #4           ; _Group1　ﾒﾝﾃ動作番号
@SET @MR2411
STG @MR2003
MPS
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
SET @MR1901              ; Main2 HALT許可
MPP
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
MPS
AND CR2003               ; 常時OFF
MPS
AND= DM4110 #1           ; _Group1　ﾒﾝﾃ動作番号
JMP @MR2100
MRD
LD= DM4110 #26           ; _Group1　ﾒﾝﾃ動作番号
ANP R44915               ; Teaching End
ANL
JMP @MR2110
MPP
LD= DM4110 #29           ; _Group1　ﾒﾝﾃ動作番号
ANF R45015               ; 単動終了
ANL
JMP @MR2110
MPP
AND R47800               ; _Group1　ﾒﾝﾃ動作定停止移行中
JMP @MR2110
;STEP　通常動作
STG @MR2100
SET @MR2102              ; STEP
CON
JMP @MR2103
STG @MR2103
MPS
MSTRT SELECT_POST #1 #0 #0 @MR1800;selectEND
MPP
AND @MR1800              ; selectEND
JMP @MR2105
STG @MR2105
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
SET @MR3204
CON
SET @MR4000              ; AUTO Main2
CON
JMP @MR2106
STG @MR2106
AND @MR2107              ; STEP　END
ANB @MR4002              ; Main2 Busy
RES @MR2102              ; STEP
CON
JMP @MR2108
;Maintenance　終了
STG @MR2108
ANB R39104               ; SELECT_Y_N Interlock
SET R39104               ; SELECT_Y_N Interlock
CON
DW #7 @DM21              ; ScreenNo /SELECT_Y_N
CON
DW #0 @DM22              ; Bz_Use /SELECT_Y_N
CON
SET @MR300               ; Task0 SELECT_Y_N
CON
JMP @MR2109
STG @MR2109
AND @MR301               ; Task0 Y/N END
RES @MR301               ; Task0 Y/N END
CON
RES R39104               ; SELECT_Y_N Interlock
CON
MPS
AND @MR306               ; Task0 Y/N
JMP @MR2000              ; Mainte
MPP
ANB @MR306               ; Task0 Y/N
JMP @MR2110
STG @MR2110
MCALL HOLD_REQUEST #1
JMP @MR2914
STG @MR2914
MPS
MCALL MODE_INDI #2
MPP
ANB @MR001               ; TASK0 ERROR
MPS
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR MR10008               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
MPP
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
RES @MR2002              ; Mainte中
CON
JMP @MR2915
STG @MR2915
JMP LR604                ; _Grp1_Task4_Fin.STG
;<h1/>ERROR
;//*Error Sample
;[使用方法]
;・@DM1にERROR番号を代入
;・@DM2にSensor番号を代入(センサ無しエラーの場合は0)
;・@DM9に復帰SW番号(1〜9、0はSW無し)をdegit単位で4桁入力
;・Task0 ERROR SET(@MR100)でエラー処理開始
;・エラー復帰でTask0 ERROR END(@MR101)がON
;・押下復帰SW番号により左から対応した@MR105,@MR106,@MR107,@MR108のいずれかがON
;・上記ONが成立したらJMPするSTGに対応する処理を記述
;Error0を左側から1,2,3,4の番号に対応した復帰選択SWを出力する
;Error Sample *//
;Error Sample *//
;＠DM1のSW内容
;1:「ErrorReset」
;2:「再検出」
;3:「再検査」
;4:「動作継続」
;5:「定停止」
;6:「ﾜｰｸ除去」
;7:「電源断要求」
;8:「Retry」
;9:「再確認」
;RB17原点復帰ｴﾗｰ
LD MR13301               ; RB17原点復帰ｴﾗｰ
ANB R39004               ; ｴﾗｰ中
SET DM10835.3            ; RES(ﾘｾｯﾄ) RB17
CON
RES MR18500              ; 【sw1】RB17_HOME_ALM
CON
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #58 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR500
STG @MR500
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR13301              ; RB17原点復帰ｴﾗｰ
CON
AND @MR105               ; SW1
RES DM10835.3            ; RES(ﾘｾｯﾄ) RB17
CON
SET MR18500              ; 【sw1】RB17_HOME_ALM
CON
RES R36603               ; RB17Alarm
CON
JMP @MR3915              ; AUTO END
;RB18原点復帰ｴﾗｰ
LD MR13302               ; RB18原点復帰ｴﾗｰ
ANB R39004               ; ｴﾗｰ中
SET DM10843.3            ; RES(ﾘｾｯﾄ) RB18
CON
RES MR18501              ; 【sw1】RB18_HOME_ALM
CON
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #61 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR501
STG @MR501
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR13302              ; RB18原点復帰ｴﾗｰ
CON
AND @MR105               ; SW1
RES DM10843.3            ; RES(ﾘｾｯﾄ) RB18
CON
SET MR18501              ; 【sw1】RB18_HOME_ALM
CON
RES R36703               ; RB18Alarm
CON
JMP @MR3915              ; AUTO END
;RB12原点復帰ｴﾗｰ
LD MR13212               ; RB12原点復帰ｴﾗｰ
ANB R39004               ; ｴﾗｰ中
SET DM10795.3            ; RES(ﾘｾｯﾄ) RB12
CON
RES MR18411              ; 【sw1】RB12_HOME_ALM
CON
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #43 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR502
STG @MR502
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR13212              ; RB12原点復帰ｴﾗｰ
CON
AND @MR105               ; SW1
RES DM10795.3            ; RES(ﾘｾｯﾄ) RB12
CON
SET MR18411              ; 【sw1】RB12_HOME_ALM
CON
RES R36103               ; RB12Alarm
CON
JMP @MR3915              ; AUTO END
;RB12溶着RBｴﾗｰ
LD MR13515               ; 溶着RB12 動作ｴﾗｰ
ANB R39004               ; ｴﾗｰ中
ZRES MR13600 MR13601     ; SW1 溶着RB12 動作ｴﾗｰ  SW2 溶着RB12 動作ｴﾗｰ
CON
SET R39004               ; ｴﾗｰ中
CON
DW #1500 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #41 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR503
STG @MR503
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR13515              ; 溶着RB12 動作ｴﾗｰ
CON
MPS
AND @MR105               ; SW1
SET MR13600              ; SW1 溶着RB12 動作ｴﾗｰ
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR13601              ; SW2 溶着RB12 動作ｴﾗｰ
CON
ENDS
;ﾑﾈｶﾀ      異常出力_UT3
LD MR13603               ; ﾑﾈｶﾀ      異常出力_UT3
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1500 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #81 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR504
STG @MR504
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR13602              ; ﾑﾈｶﾀ_Alarm_UT3
CON
RES MR13603              ; ﾑﾈｶﾀ      異常出力_UT3
CON
ENDS
;溶着RB &ﾑﾈｶﾀ同時 ｴﾗｰ_UT3
LD MR13604               ; 溶着RB &ﾑﾈｶﾀ同時 ｴﾗｰ_UT3
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1500 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #86 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR505
STG @MR505
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR13602              ; ﾑﾈｶﾀ_Alarm_UT3
CON
RES MR13604              ; 溶着RB &ﾑﾈｶﾀ同時 ｴﾗｰ_UT3
CON
ENDS
;ﾒｲﾝｽﾗｲﾀﾞ5_受取り 未確定
LD MR14810               ; ﾒｲﾝｽﾗｲﾀﾞ5_受取り 未確定
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR14811 MR14812     ; SW1_再検査からｽﾀｰﾄ  SW2_ﾜｰｸ除去からｽﾀｰﾄ
CON
DW #3600 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #117 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #4613 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR506
STG @MR506
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR14810              ; ﾒｲﾝｽﾗｲﾀﾞ5_受取り 未確定
CON
MPS
AND @MR105               ; SW1
SET MR14811              ; SW1_再検査からｽﾀｰﾄ
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR14812              ; SW2_ﾜｰｸ除去からｽﾀｰﾄ
CON
ENDS
;ﾒｲﾝｽﾗｲﾀﾞ5_受渡し 未確定
LD MR14815               ; ﾒｲﾝｽﾗｲﾀﾞ5_受渡し 未確定
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR14900 MR14901     ; SW1_再検査からｽﾀｰﾄ  SW2_ﾜｰｸ除去からｽﾀｰﾄ
CON
DW #3600 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #118 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #4613 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR507
STG @MR507
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR14815              ; ﾒｲﾝｽﾗｲﾀﾞ5_受渡し 未確定
CON
MPS
AND @MR105               ; SW1
SET MR14900              ; SW1_再検査からｽﾀｰﾄ
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR14901              ; SW2_ﾜｰｸ除去からｽﾀｰﾄ
CON
ENDS
;ﾒｲﾝｽﾗｲﾀﾞ6_受取り 未確定
LD MR14905               ; ﾒｲﾝｽﾗｲﾀﾞ6_受取り 未確定
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR14906 MR14907     ; SW1_再検査からｽﾀｰﾄ  SW2_ﾜｰｸ除去からｽﾀｰﾄ
CON
DW #3600 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #120 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #4713 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR508
STG @MR508
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR14905              ; ﾒｲﾝｽﾗｲﾀﾞ6_受取り 未確定
CON
MPS
AND @MR105               ; SW1
SET MR14906              ; SW1_再検査からｽﾀｰﾄ
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR14907              ; SW2_ﾜｰｸ除去からｽﾀｰﾄ
CON
ENDS
;ﾒｲﾝｽﾗｲﾀﾞ6_受渡し 未確定
LD MR14910               ; ﾒｲﾝｽﾗｲﾀﾞ6_受渡し 未確定
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR14911 MR14912     ; SW1_再検査からｽﾀｰﾄ  SW2_ﾜｰｸ除去からｽﾀｰﾄ
CON
DW #3600 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #121 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #4713 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR509
STG @MR509
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR14910              ; ﾒｲﾝｽﾗｲﾀﾞ6_受渡し 未確定
CON
MPS
AND @MR105               ; SW1
SET MR14911              ; SW1_再検査からｽﾀｰﾄ
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR14912              ; SW2_ﾜｰｸ除去からｽﾀｰﾄ
CON
ENDS
;ﾒｲﾝｽﾗｲﾀﾞ5_Head-Sub 受取未確定
LD MR15600               ; ﾒｲﾝｽﾗｲﾀﾞ5_Head-Sub 受取未確定
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR15601 MR15602     ; SW1 ｢再確認] からのｽﾀｰﾄ  SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
CON
DW #9600 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #155 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #5312 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR510
STG @MR510
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR15600              ; ﾒｲﾝｽﾗｲﾀﾞ5_Head-Sub 受取未確定
CON
MPS
AND @MR105               ; SW1
SET MR15601              ; SW1 ｢再確認] からのｽﾀｰﾄ
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR15602              ; SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
CON
ENDS
;ﾒｲﾝｽﾗｲﾀﾞ6_Head-Sub 受取未確定
LD MR15510               ; ﾒｲﾝｽﾗｲﾀﾞ6_Head-Sub 受取未確定
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR15511 MR15512     ; SW1 ｢再確認] からのｽﾀｰﾄ  SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
CON
DW #9600 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #156 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #5314 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR511
STG @MR511
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR15510              ; ﾒｲﾝｽﾗｲﾀﾞ6_Head-Sub 受取未確定
CON
MPS
AND @MR105               ; SW1
SET MR15511              ; SW1 ｢再確認] からのｽﾀｰﾄ
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR15512              ; SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
CON
ENDS
;ﾒｲﾝｽﾗｲﾀﾞｰ5_吸着ON 未確定
LD MR16108               ; ﾒｲﾝｽﾗｲﾀﾞｰ5_吸着ON 未確定
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR16109 MR16110     ; SW1 ｢再確認] からのｽﾀｰﾄ  SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
CON
DW #9600 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #165 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #5312 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR512
STG @MR512
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR16108              ; ﾒｲﾝｽﾗｲﾀﾞｰ5_吸着ON 未確定
CON
MPS
AND @MR105               ; SW1
SET MR16109              ; SW1 ｢再確認] からのｽﾀｰﾄ
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR16110              ; SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
CON
ENDS
;ﾒｲﾝｽﾗｲﾀﾞｰ5_吸着OFF 未確定
LD MR16114               ; ﾒｲﾝｽﾗｲﾀﾞｰ5_吸着OFF 未確定
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR16115 MR16200     ; SW1 ｢再確認] からのｽﾀｰﾄ  SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
CON
DW #9600 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #165 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #5313 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR513
STG @MR513
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR16114              ; ﾒｲﾝｽﾗｲﾀﾞｰ5_吸着OFF 未確定
CON
MPS
AND @MR105               ; SW1
SET MR16115              ; SW1 ｢再確認] からのｽﾀｰﾄ
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR16200              ; SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
CON
ENDS
;ﾒｲﾝｽﾗｲﾀﾞｰ6_吸着ON 未確定
LD MR16203               ; ﾒｲﾝｽﾗｲﾀﾞｰ6_吸着ON 未確定
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR16204 MR16205     ; SW1 ｢再確認] からのｽﾀｰﾄ  SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
CON
DW #9600 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #166 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #5314 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR514
STG @MR514
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR16203              ; ﾒｲﾝｽﾗｲﾀﾞｰ6_吸着ON 未確定
CON
MPS
AND @MR105               ; SW1
SET MR16204              ; SW1 ｢再確認] からのｽﾀｰﾄ
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR16205              ; SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
CON
ENDS
;ﾒｲﾝｽﾗｲﾀﾞｰ6_吸着OFF 未確定
LD MR16208
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR16209 MR16210
CON
DW #9600 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #166 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #5315 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR515
STG @MR515
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR16208
CON
MPS
AND @MR105               ; SW1
SET MR16209
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR16210
CON
ENDS
;画像頭飛びALM発生 MS-5用
LD MR16213               ; 画像頭飛びALM発生 MS-5用
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR16214 MR16215     ; SW1 ｢動作継続] からのｽﾀｰﾄ  SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
CON
DW #4600 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #183 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR600
STG @MR600
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR16213              ; 画像頭飛びALM発生 MS-5用
CON
MPS
AND @MR105               ; SW1
SET MR16214              ; SW1 ｢動作継続] からのｽﾀｰﾄ
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR16215              ; SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
CON
ENDS
;画像頭飛びALM発生 MS-6用
LD MR16302               ; 画像頭飛びALM発生 MS-6用
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR16303 MR16304     ; SW1 ｢動作継続] からのｽﾀｰﾄ  SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
CON
DW #4600 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #184 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR601
STG @MR601
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR16302              ; 画像頭飛びALM発生 MS-6用
CON
MPS
AND @MR105               ; SW1
SET MR16303              ; SW1 ｢動作継続] からのｽﾀｰﾄ
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR16304              ; SW2 ｢ﾜｰｸ除去]からのｽﾀｰﾄ
CON
ENDS
;M-ｽﾗｲﾀﾞｰ5 ﾜｰｸ状況不確定
LD MR16505
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR16506 MR16507
CON
DW #6000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #171 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR602
STG @MR602
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR16505
CON
MPS
AND @MR105               ; SW1
SET MR16506
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR16507
CON
ENDS
;M-ｽﾗｲﾀﾞｰ6 ﾜｰｸ状況不確定
LD MR16510
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR16511 MR16512
CON
DW #6000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #172 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR603
STG @MR603
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR16510
CON
MPS
AND @MR105               ; SW1
SET MR16511
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR16512
CON
ENDS
;M-ｽﾗｲﾀﾞｰ5 ﾜｰｸ除去
LD MR16700               ; M-ｽﾗｲﾀﾞｰ5 ﾜｰｸ除去
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR16701 MR16702     ; SW1(5) ｢ﾜｰｸ除去]からのｽﾀｰﾄ　  SW2
CON
DW #6000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #177 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR604
STG @MR604
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR16700              ; M-ｽﾗｲﾀﾞｰ5 ﾜｰｸ除去
CON
MPS
AND @MR105               ; SW1
SET MR16701              ; SW1(5) ｢ﾜｰｸ除去]からのｽﾀｰﾄ　
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR16702              ; SW2
CON
ENDS
;M-ｽﾗｲﾀﾞｰ6 ﾜｰｸ除去
LD MR16704
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
ZRES MR16705 MR16706
CON
DW #6000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #178 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR605
STG @MR605
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR16704
CON
MPS
AND @MR105               ; SW1
SET MR16705
CON
ENDS
MPP
AND @MR106               ; SW2
SET MR16706
CON
ENDS
;RB12 ｴﾗｰ
LD MR16812               ; RB12ｴﾗｰ検出
ANB R39004               ; ｴﾗｰ中
SET DM10795.3            ; RES(ﾘｾｯﾄ) RB12
CON
RES MR11211              ; 【SW1_Retry】ALM_RES_RB12
CON
SET R39004               ; ｴﾗｰ中
CON
DW #8000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #41 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR606
STG @MR606
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR16812              ; RB12ｴﾗｰ検出
CON
AND @MR105               ; SW1
RES DM10795.3            ; RES(ﾘｾｯﾄ) RB12
CON
SET MR11211              ; 【SW1_Retry】ALM_RES_RB12
CON
RES R36103               ; RB12Alarm
CON
JMP @MR3915              ; AUTO END
;RB17 ｴﾗｰ
LD MR16901               ; RB17ｴﾗｰ検出
ANB R39004               ; ｴﾗｰ中
SET DM10835.3            ; RES(ﾘｾｯﾄ) RB17
CON
RES MR11300              ; 【SW1_Retry】ALM_RES_RB17
CON
SET R39004               ; ｴﾗｰ中
CON
DW #8000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #56 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR607
STG @MR607
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR16901              ; RB17ｴﾗｰ検出
CON
AND @MR105               ; SW1
RES DM10835.3            ; RES(ﾘｾｯﾄ) RB17
CON
SET MR11300              ; 【SW1_Retry】ALM_RES_RB17
CON
RES R36603               ; RB17Alarm
CON
JMP @MR3915              ; AUTO END
;RB18 ｴﾗｰ
LD MR16902               ; RB18ｴﾗｰ検出
ANB R39004               ; ｴﾗｰ中
SET DM10843.3            ; RES(ﾘｾｯﾄ) RB18
CON
RES MR11301              ; 【SW1_Retry】ALM_RES_RB18
CON
SET R39004               ; ｴﾗｰ中
CON
DW #8000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #59 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task0 ERROR
CON
SET @MR608
STG @MR608
AND @MR101               ; Task0 ｴﾗｰ完了
RES @MR101               ; Task0 ｴﾗｰ完了
CON
RES R39004               ; ｴﾗｰ中
CON
RES MR16902              ; RB18ｴﾗｰ検出
CON
AND @MR105               ; SW1
RES DM10843.3            ; RES(ﾘｾｯﾄ) RB18
CON
SET MR11301              ; 【SW1_Retry】ALM_RES_RB18
CON
RES R36703               ; RB18Alarm
CON
JMP @MR3915              ; AUTO END
;MyTask Error Process Substance/エラー処理実体
STG @MR100               ; Task0 ERROR
ANB R39002               ; ERROR_DISP Busy
MPS
ZRES @MR105 @MR108       ; SW1
CON
LDA @DM9                 ; ReturnSW /ERROR_DISP
CON
TBCD
CON
STA @DM10
CON
DISN @DM10 @DM3 #4
MRD
DW #4 @DM0               ; TaskNo /ERROR_DISP
CON
BMOV @DM0 DM60000 #7     ; TaskNo /ERROR_DISP  TaskNo /ERROR_DISP
MPP
SET R39000               ; ERROR_DISP Start
CON
SET @MR102               ; Task4 ERROR Busy
CON
JMP @MR103
STG @MR103
AND R39002               ; ERROR_DISP Busy
AND= DM60008 @DM1        ; ReturnNo /ERROR_DISP  ErrorNo /ERROR_DISP
MPS
AND= DM60007 @DM6        ; ReturnSW /ERROR_DISP
SET @MR105               ; SW1
CON
JMP @MR104
MRD
AND= DM60007 @DM5        ; ReturnSW /ERROR_DISP
SET @MR106               ; SW2
CON
JMP @MR104
MRD
AND= DM60007 @DM4        ; ReturnSW /ERROR_DISP
SET @MR107               ; SW3
CON
JMP @MR104
MPP
AND= DM60007 @DM3        ; ReturnSW /ERROR_DISP
SET @MR108
CON
JMP @MR104
STG @MR104
ANB R39002               ; ERROR_DISP Busy
RES @MR102               ; Task4 ERROR Busy
CON
SET @MR101               ; Task0 ｴﾗｰ完了
CON
ENDS
;<h1/>SELECT_ACT
;//*Select_ACT Sample
;画面番号33をブザー有りで選択SW番号を左から#5,#10,#0(無し),#34の並びで表示する
STG @MR108
ANB R39204               ; SELECT_ACT Interlock
SET R39204               ; SELECT_ACT Interlock
CON
MPS
DW #33 @DM31             ; ScreenNo /SELECT_ACT
CON
DW #1 @DM32              ; Bz_Use /SELECT_ACT
CON
DW #5 @DM33              ; SW1_No /SELECT_ACT
CON
DW #10 @DM34             ; SW2_No /SELECT_ACT
CON
DW #0 @DM35              ; SW3_No /SELECT_ACT
CON
DW #34 @DM36             ; SW4_No /SELECT_ACT
MPP
SET @MR200               ; Task4 SELECT_ACT
CON
JMP @MR109
STG @MR109
AND @MR201               ; Task4 SEL_ACT END
RES @MR201               ; Task4 SEL_ACT END
CON
RES R39204               ; SELECT_ACT Interlock
CON
MPS
AND @MR205               ; SW1
JMP @MR110
MRD
AND @MR206               ; SW2
JMP @MR111
MRD
AND @MR207               ; SW3
JMP @MR112
MPP
AND @MR208
JMP @MR113
;Select_ACT Sample *//
;MyTask Select_ACT Process Substance/SELECT_ACT処理実体
STG @MR200               ; Task4 SELECT_ACT
ANB R39202               ; SELECT_ACT Busy
MPS
ZRES @MR205 @MR208       ; SW1
CON
DW #4 @DM30              ; TaskNo /SELECT_ACT
CON
BMOV @DM30 DM60030 #7    ; TaskNo /SELECT_ACT  TaskNo /SELECT_ACT
MPP
SET R39200               ; SELECT_ACT Start
CON
SET @MR202               ; Task4 SEL_ACT Busy
CON
JMP @MR203
STG @MR203
AND R39202               ; SELECT_ACT Busy
AND<> DM60037 #0         ; SelectSW /SELECT_ACT
MPS
AND= DM60037 #1          ; SelectSW /SELECT_ACT
SET @MR205               ; SW1
CON
JMP @MR204
MRD
AND= DM60037 #2          ; SelectSW /SELECT_ACT
SET @MR206               ; SW2
CON
JMP @MR204
MRD
AND= DM60037 #3          ; SelectSW /SELECT_ACT
SET @MR207               ; SW3
CON
JMP @MR204
MPP
AND= DM60037 #4          ; SelectSW /SELECT_ACT
SET @MR208
CON
JMP @MR204
STG @MR204
ANB R39202               ; SELECT_ACT Busy
RES @MR202               ; Task4 SEL_ACT Busy
CON
SET @MR201               ; Task4 SEL_ACT END
CON
ENDS
;<h1/>SELECT_Y_N
;//*Select_Y_N Sample
STG @MR208
ANB R39104               ; SELECT_Y_N Interlock
SET R39104               ; SELECT_Y_N Interlock
CON
DW #7 @DM21              ; ScreenNo /SELECT_Y_N
CON
DW #0 @DM22              ; Bz_Use /SELECT_Y_N
CON
SET @MR300               ; Task0 SELECT_Y_N
CON
JMP @MR209
STG @MR209
AND @MR301               ; Task0 Y/N END
RES @MR301               ; Task0 Y/N END
CON
RES R39104               ; SELECT_Y_N Interlock
CON
MPS
AND @MR306               ; Task0 Y/N
JMP @MR210
MPP
ANB @MR306               ; Task0 Y/N
JMP @MR211
;*Select_Y_N Sample//
;MyTask Select_Y_N Process Substance/SELECT_Y_N処理実体
STG @MR300               ; Task0 SELECT_Y_N
ANB R39102               ; SELECT_Y_N Busy
MPS
ZRES @MR306 @MR307       ; Task0 Y/N
CON
DW #4 @DM20              ; TaskNo /SELECT_Y_N
CON
BMOV @DM20 DM60020 #3    ; TaskNo /SELECT_Y_N  TaskNo /SELECT_Y_N
MPP
SET R39100               ; SELECT_Y_N Start
CON
SET @MR302               ; Task4 Y_N Busy
CON
JMP @MR303
STG @MR303
AND R39102               ; SELECT_Y_N Busy
MPS
AND= DM60023 #1          ; Y_N /SELECT_Y_N
SET @MR306               ; Task0 Y/N
CON
JMP @MR304
MPP
AND= DM60023 #2          ; Y_N /SELECT_Y_N
RES @MR306               ; Task0 Y/N
CON
JMP @MR304
STG @MR304
ANB R39102               ; SELECT_Y_N Busy
RES @MR302               ; Task4 Y_N Busy
CON
SET @MR301               ; Task0 Y/N END
CON
ENDS
;<h1/>TIMEUP_ERROR
;//*TIMEUP_ERROR Sample
;サンプルセンサ:MR5000=ON AND MR5001 = OFF のいずれかが5sタイムアップしたらTIMEUP_ERROR出力
;エラー復帰後、再度センサ確認
STG @MR308
MPS
LD MR5000                ; -ERR
ANB MR5001               ; -ERR
ANL
JMP @MR315
MPP
LDB MR5000               ; -ERR
OR MR5001                ; -ERR
ANL
TMR @0 #50
CON
AND @T0
JMP @MR309
STG @MR309
ANB R39304               ; TIMEUP_ERR Interlock
SET R39304               ; TIMEUP_ERR Interlock
CON
DW #16 @DM41             ; SensorNo /TIMEUP_ERR
CON
SET @MR400               ; Task4 TIMEUP_ERR
CON
JMP @MR310
STG @MR310
AND @MR401               ; Task4 TIMEUP_END
RES R39304               ; TIMEUP_ERR Interlock
CON
RES @MR401               ; Task4 TIMEUP_END
CON
JMP @MR308
;TIMEUP_ERROR Sample *//
;MyTask TIMEUP_ERROR Process Substance/TIMEUP_ERROR処理実体
STG @MR400               ; Task4 TIMEUP_ERR
ANB R39302               ; TIMEUP_ERR Busy
MPS
DW #4 @DM40              ; TaskNo /TIMEUP_ERR
CON
BMOV @DM40 DM60040 #2    ; TaskNo /TIMEUP_ERR  TaskNo /TIMEUP_ERR
MPP
SET R39300               ; TIMEUP_ERR Start
CON
SET @MR402               ; Task4 TIMEUP Busy
CON
JMP @MR403
STG @MR403
AND R39302               ; TIMEUP_ERR Busy
JMP @MR404
STG @MR404
ANB R39302               ; TIMEUP_ERR Busy
RES @MR402               ; Task4 TIMEUP Busy
CON
SET @MR401               ; Task4 TIMEUP_END
CON
ENDS
;<h1/>HALT
LD @MR1900               ; Main1 HALT許可
LD @MR1901               ; Main2 HALT許可
ORB @MR4002              ; Main2 Busy
ANL
LD @MR1002               ; HOME中
LD @MR1900               ; Main1 HALT許可
OR @MR1901               ; Main2 HALT許可
ANL
ORL
LDB R46103               ; _停止中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB R46106               ; _定停止移行中
ORL
MPS
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
TMR @2 #2
CON
AND @T2
SET R42604               ; _Grp1_Task4_ﾎﾟｰｽﾞ許可
MPP
AND MR10008              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ要求
TMR @9 #2
CON
AND @T9
SET MR10010              ; ｶｼﾒUT3     ﾎﾟｰｽﾞ許可
LDB R46103               ; _停止中　ﾓｰﾄﾞﾌﾗｸﾞ
AND R46106               ; _定停止移行中
AND R41004               ; _Grp1_Task4_起動中ﾌﾗｸﾞ
AND R42604               ; _Grp1_Task4_ﾎﾟｰｽﾞ許可
RES R42604               ; _Grp1_Task4_ﾎﾟｰｽﾞ許可
LD R42604                ; _Grp1_Task4_ﾎﾟｰｽﾞ許可
OR MR10010               ; ｶｼﾒUT3     ﾎﾟｰｽﾞ許可
RES @MR1900              ; Main1 HALT許可
CON
RES @MR1901              ; Main2 HALT許可
;<h1/>SubRoutines/ｻﾌﾞﾙｰﾁﾝ
;[記述方法]
;・ｻﾌﾞﾙｰﾁﾝは本ﾌﾞｯｸﾏｰｸから下に記述していって下さい
;・ｻﾌﾞﾙｰﾁﾝは必ずﾌﾞｯｸﾏｰｸを挿入して処理内容を明確にする事
END
ENDH
