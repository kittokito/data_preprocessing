DEVICE:52
;MODULE:ID_読取り
;MODULE_TYPE:0
;SCRIPT_TYPE:
;***** 画像検査ｱｸﾃｨﾌﾞ OPEN　処理 *****
;DM10=9000　  '自ﾎﾟｰﾄ番号
;DM11=172　　 '通信先IPｱﾄﾞﾚｽ1ﾊﾞｲﾄ目
;DM12=168　　 '通信先IPｱﾄﾞﾚｽ2ﾊﾞｲﾄ目
;DM13=0　　　 '通信先IPｱﾄﾞﾚｽ3ﾊﾞｲﾄ目
;DM14=100　　　'通信先IPｱﾄﾞﾚｽ4ﾊﾞｲﾄ目　
;DM15=9877 　 '通信先ﾎﾟｰﾄ番号
;DM16=5000 　 '要求ﾀｲﾑｱｳﾄ時間(ms)
LDP MR18604              ; WF_ID読み込みｱｸﾃｨﾌﾞOPEN
ANB R30102               ; TCP1 ｱｸﾃｨﾌﾞｵｰﾌﾟﾝ要求
NCJ #1000
;DM10=9000　  '自ﾎﾟｰﾄ番号
;
LD CR2002                ; 常時ON
MOV #9000 DM10
;DM11=172　　 '通信先IPｱﾄﾞﾚｽ1ﾊﾞｲﾄ目
;
LD CR2002                ; 常時ON
MOV #172 DM11
;DM12=168　　 '通信先IPｱﾄﾞﾚｽ2ﾊﾞｲﾄ目
;
LD CR2002                ; 常時ON
MOV #168 DM12
;DM13=0　　　 '通信先IPｱﾄﾞﾚｽ3ﾊﾞｲﾄ目
;
LD CR2002                ; 常時ON
MOV #0 DM13
;DM14=100　　　'通信先IPｱﾄﾞﾚｽ4ﾊﾞｲﾄ目　
;
LD CR2002                ; 常時ON
MOV #100 DM14
;DM15=9877 　 '通信先ﾎﾟｰﾄ番号
;
LD CR2002                ; 常時ON
MOV #9877 DM15
;DM16=5000 　 '要求ﾀｲﾑｱｳﾄ時間(ms)
LD CR2002                ; 常時ON
MOV #5000 DM16
LABEL #1000
;
LDP MR18604              ; WF_ID読み込みｱｸﾃｨﾌﾞOPEN
ANB R30102               ; TCP1 ｱｸﾃｨﾌﾞｵｰﾌﾟﾝ要求
U_SOPEN #0 #1 DM10
LDB R30102               ; TCP1 ｱｸﾃｨﾌﾞｵｰﾌﾟﾝ要求
AND R31102               ; TCP1 ｱｸﾃｨﾌﾞｵｰﾌﾟﾝ完了
MPS
ANB R31103               ; TCP1 ｱｸﾃｨﾌﾞｵｰﾌﾟﾝ失敗
SET MR200                ; ｵｰﾌﾟﾝ成功
MPP
AND R31103               ; TCP1 ｱｸﾃｨﾌﾞｵｰﾌﾟﾝ失敗
U_SSTAT #0 #1 DM350
SET MR201                ; ｵｰﾌﾟﾝ失敗
LDP MR18604              ; WF_ID読み込みｱｸﾃｨﾌﾞOPEN
OR R30102                ; TCP1 ｱｸﾃｨﾌﾞｵｰﾌﾟﾝ要求
ANB R31102               ; TCP1 ｱｸﾃｨﾌﾞｵｰﾌﾟﾝ完了
OUT R30102               ; TCP1 ｱｸﾃｨﾌﾞｵｰﾌﾟﾝ要求
LD CR2002                ; 常時ON
LEN DM940 DM932          ; LOT　No.記憶
CAL- DM932 #1 DM934
CAL+ DM934 #18 DM930
;***** WF_IDﾃﾞｰﾀ保存先ﾎﾙﾀﾞ指定 *****
;d601.T="UNITDATA 1 LOTNO$ "+D4050.T　  '保存先ﾎﾙﾀﾞｰ名指定
LDP MR18610              ; WF_IDﾃﾞｰﾀ保存先ﾎﾙﾀﾞ指定
ANB MR30100              ; ｿｹｯﾄ1 送信要求１
NCJ #1001
;d601.T="UNITDATA 1 LOTNO$ "+D4050.T　  '保存先ﾎﾙﾀﾞｰ名指定
LD CR2002                ; 常時ON
ADRSET VM2 VM0
MOV #0 VM2
MOV.D VM0 @VM0
SMOV "UNITDATA 1 LOTNO$ " *@VM0
LD CR2002                ; 常時ON
SADD *@VM0 DM4050 *@VM0  ; WF_ID読み込み用LOT No.
SMOV *@VM0 DM601
LABEL #1001
;
LDP MR18610              ; WF_IDﾃﾞｰﾀ保存先ﾎﾙﾀﾞ指定
ANB MR30100              ; ｿｹｯﾄ1 送信要求１
MOV DM930 DM600
U_SWRBUF #0 #1 DM600
LD MR30100               ; ｿｹｯﾄ1 送信要求１
AND R31106               ; ｿｹｯﾄ1 送信完了
MPS
ANB R31107               ; ｿｹｯﾄ1 送信失敗
SET MR202                ; WF_IDﾃﾞｰﾀ保存先ﾎﾙﾀﾞ指定成功
MPP
AND R31107               ; ｿｹｯﾄ1 送信失敗
U_SSTAT #0 #1 DM350
SET MR203                ; WF_IDﾃﾞｰﾀ保存先ﾎﾙﾀﾞ指定失敗
LDP MR18610              ; WF_IDﾃﾞｰﾀ保存先ﾎﾙﾀﾞ指定
OR MR30100               ; ｿｹｯﾄ1 送信要求１
ANB R31106               ; ｿｹｯﾄ1 送信完了
OUT MR30100              ; ｿｹｯﾄ1 送信要求１
;***** WF_ID読取り実行 *****
LDP MR18800              ;  WF_ID読取り実行
ANB MR30102              ; ｿｹｯﾄ1 送信要求３
MOV #1 DM610
SMOV "M" DM611
U_SWRBUF #0 #1 DM650
LD MR30102               ; ｿｹｯﾄ1 送信要求３
AND R31106               ; ｿｹｯﾄ1 送信完了
MPS
ANB R31107               ; ｿｹｯﾄ1 送信失敗
SET MR204                ; WF_ID読取り実行成功
MPP
AND R31107               ; ｿｹｯﾄ1 送信失敗
U_SSTAT #0 #1 DM350
SET MR205                ; WF_ID読取り実行失敗
LDP MR18800              ;  WF_ID読取り実行
OR MR30102               ; ｿｹｯﾄ1 送信要求３
ANB R31106               ; ｿｹｯﾄ1 送信完了
OUT MR30102              ; ｿｹｯﾄ1 送信要求３
;***** WF_ID上読取り結果ﾕﾆｯﾄ指定 *****
;DM621.T="UNITDATA 21 ACTIDNO$"  'WF ID上読取り結果ﾕﾆｯﾄ指定
LDP MR18810              ; WF_ID上読取り結果読出し
ANB MR30103              ; ｿｹｯﾄ1 送信要求４
NCJ #1003
;DM621.T="UNITDATA 21 ACTIDNO$"  'WF ID上読取り結果ﾕﾆｯﾄ指定
LD CR2002                ; 常時ON
SMOV "UNITDATA 21 ACTIDNO$" DM621
LABEL #1003
;
LDP MR18810              ; WF_ID上読取り結果読出し
ANB MR30103              ; ｿｹｯﾄ1 送信要求４
MOV #20 DM620
U_SWRBUF #0 #1 DM620
LD MR30103               ; ｿｹｯﾄ1 送信要求４
AND R31106               ; ｿｹｯﾄ1 送信完了
MPS
ANB R31107               ; ｿｹｯﾄ1 送信失敗
SET MR206                ; WF_ID上読取り結果成功
MPP
AND R31107               ; ｿｹｯﾄ1 送信失敗
U_SSTAT #0 #1 DM350
SET MR207                ; WF_ID上読取り結果失敗
LDP MR18810              ; WF_ID上読取り結果読出し
OR MR30103               ; ｿｹｯﾄ1 送信要求４
ANB R31106               ; ｿｹｯﾄ1 送信完了
OUT MR30103              ; ｿｹｯﾄ1 送信要求４
LDB MR30100              ; ｿｹｯﾄ1 送信要求１
ANB MR30101              ; ｿｹｯﾄ1 送信要求２
ANB MR30102              ; ｿｹｯﾄ1 送信要求３
ANB MR30103              ; ｿｹｯﾄ1 送信要求４
INV
OUT R30106               ; ｿｹｯﾄ1 送信要求
;***** WF_ID下読取り結果ﾕﾆｯﾄ指定 *****
;DM631.T="UNITDATA 21 FUSIDNO$"  'WF ID下読取り結果指定
LDP MR18904
ANB MR30103              ; ｿｹｯﾄ1 送信要求４
NCJ #1002
;DM631.T="UNITDATA 21 FUSIDNO$"  'WF ID下読取り結果指定
LD CR2002                ; 常時ON
SMOV "UNITDATA 21 FUSIDNO$" DM631
LABEL #1002
;
LDP MR18904
ANB MR30103              ; ｿｹｯﾄ1 送信要求４
MOV #20 DM630
U_SWRBUF #0 #1 DM630
LD MR30104               ; ｿｹｯﾄ1 送信要求５
AND R31106               ; ｿｹｯﾄ1 送信完了
MPS
ANB R31107               ; ｿｹｯﾄ1 送信失敗
SET MR208                ; WF_ID下読取り結果成功
MPP
AND R31107               ; ｿｹｯﾄ1 送信失敗
U_SSTAT #0 #1 DM350
SET MR209                ; WF_ID下読取り結果失敗
LDP MR18904
OR MR30104               ; ｿｹｯﾄ1 送信要求５
ANB R31106               ; ｿｹｯﾄ1 送信完了
OUT MR30104              ; ｿｹｯﾄ1 送信要求５
LDB MR30100              ; ｿｹｯﾄ1 送信要求１
ANB MR30101              ; ｿｹｯﾄ1 送信要求２
ANB MR30102              ; ｿｹｯﾄ1 送信要求３
ANB MR30103              ; ｿｹｯﾄ1 送信要求４
ANB MR30104              ; ｿｹｯﾄ1 送信要求５
INV
OUT R30106               ; ｿｹｯﾄ1 送信要求
;***** 受信処理 *****
LDB MR18700              ; ｿｹｯﾄ1 受信要求ON
ANB MR18805              ; ｿｹｯﾄ1 受信要求
ANB MR18815              ; ｿｹｯﾄ1 受信要求ON
ANB MR18909              ; ｿｹｯﾄ1 受信要求
INV
OUT MR18514              ; 受信処理起動集合
LDP MR18514              ; 受信処理起動集合
ANB R30108               ; ｿｹｯﾄ1 受信要求
ANB R31108               ; ｿｹｯﾄ1 受信完了
MOV DM660 DM640          ; WF_ID読出し文字数  WF_ID読出し文字数
MOV #0 DM641             ; WF_ID読出しOFFｾｯﾄ
U_SRCVNP #0 #1 DM640     ; WF_ID読出し文字数
LD R30108                ; ｿｹｯﾄ1 受信要求
AND R31108               ; ｿｹｯﾄ1 受信完了
MPS
ANB R31109               ; ｿｹｯﾄ1 受信失敗
U_SRDBUF #0 #1 DM750
SET MR210                ; 受信処理成功
MPP
AND R31109               ; ｿｹｯﾄ1 受信失敗
U_SSTAT #0 #1 DM350
SET MR211                ; 受信処理失敗
LDP MR18514              ; 受信処理起動集合
OR R30108                ; ｿｹｯﾄ1 受信要求
ANB R31108               ; ｿｹｯﾄ1 受信完了
OUT R30108               ; ｿｹｯﾄ1 受信要求
;***** ｸﾛｰｽﾞ処理 *****
LD R30112                ; ｿｹｯﾄ1 ｸﾛｰｽﾞ要求
AND R31112               ; ｿｹｯﾄ1 ｸﾛｰｽﾞ完了
U_SSTAT #0 #1 DM350
MPS
AND= DM360 #0
SET MR212                ; ｸﾛｰｽﾞ成功
MPP
AND<> DM360 #0
SET MR213                ; ｸﾛｰｽﾞ失敗
LDP MR18914              ; ｸﾛｰｽﾞ処理開始
OR R30112                ; ｿｹｯﾄ1 ｸﾛｰｽﾞ要求
ANB R31112               ; ｿｹｯﾄ1 ｸﾛｰｽﾞ完了
OUT R30112               ; ｿｹｯﾄ1 ｸﾛｰｽﾞ要求
;***** ID読取り一連 *****
LD MR18602               ; WF_ID照明ON
OR MR18515               ; WF_ID照明ON
AND MR18600              ; WF_ID読取り中
OUT MR18515              ; WF_ID照明ON
LD R4004                 ; WF No.読取り要求
LD R46404                ; 手動ID画像処理ﾄﾘｶﾞｰSW
ANB LR800                ; 自動ﾓｰﾄﾞSW選択
ORL
ANB MR18600              ; WF_ID読取り中
ANB MR8600               ; 外観画像検査動作中
AND= DM101 #0            ; PCへLot終了要求
AND= DM103 #0            ; PCへWF_ID読込み要求
OUT MR18601              ; ID画像読取り起動集合
LDP MR18601              ; ID画像読取り起動集合
OR MR18600               ; WF_ID読取り中
ANB MR19015              ; WF_ID読取り完了
OUT MR18600              ; WF_ID読取り中
TMH #182 #2
LDP T182
SET MR18602              ; WF_ID照明ON
STG MR18602              ; WF_ID照明ON
@FMOV #0 DM350 #20
@FMOV #0 DM750 #20
@FMOV #0 DM950 #3
@FMOV #0 DM970 #3
MPS
@FMOV #0 MR200 #1        ; ｵｰﾌﾟﾝ成功
MPP
AND MR18515              ; WF_ID照明ON
RES MR311                ; 送受信失敗
CON
RES MR312                ; 判定NG
CON
ANB MR311                ; 送受信失敗
ANB MR312                ; 判定NG
JMP MR18603
STG MR18603
MPS
ANB MR310                ; ｱｸﾃｨﾌﾞOPEN済
JMP MR18604              ; WF_ID読み込みｱｸﾃｨﾌﾞOPEN
MPP
AND MR310                ; ｱｸﾃｨﾌﾞOPEN済
JMP MR18608
STG MR18604              ; WF_ID読み込みｱｸﾃｨﾌﾞOPEN
AND R30102               ; TCP1 ｱｸﾃｨﾌﾞｵｰﾌﾟﾝ要求
JMP MR18605
STG MR18605
ANB R30102               ; TCP1 ｱｸﾃｨﾌﾞｵｰﾌﾟﾝ要求
JMP MR18606              ; WF_ID読み込みｱｸﾃｨﾌﾞOPEN確認
STG MR18606              ; WF_ID読み込みｱｸﾃｨﾌﾞOPEN確認
MPS
AND MR200                ; ｵｰﾌﾟﾝ成功
SET MR311                ; 送受信失敗
CON
AND MR311                ; 送受信失敗
JMP MR18608
MPP
AND MR201                ; ｵｰﾌﾟﾝ失敗
SET MR312                ; 判定NG
CON
AND MR312                ; 判定NG
JMP MR18607
STG MR18607
JMP MR18608
STG MR18608
@FMOV #0 DM350 #15
RES MR200                ; ｵｰﾌﾟﾝ成功
CON
RES MR201                ; ｵｰﾌﾟﾝ失敗
CON
JMP MR18609
STG MR18609
@BMOV DM940 DM4050 #5    ; LOT　No.記憶  WF_ID読み込み用LOT No.
JMP MR18610              ; WF_IDﾃﾞｰﾀ保存先ﾎﾙﾀﾞ指定
STG MR18610              ; WF_IDﾃﾞｰﾀ保存先ﾎﾙﾀﾞ指定
AND MR30100              ; ｿｹｯﾄ1 送信要求１
JMP MR18611
STG MR18611
ANB MR30100              ; ｿｹｯﾄ1 送信要求１
JMP MR18612
STG MR18612
MPS
AND MR202                ; WF_IDﾃﾞｰﾀ保存先ﾎﾙﾀﾞ指定成功
JMP MR18614
MPP
AND MR203                ; WF_IDﾃﾞｰﾀ保存先ﾎﾙﾀﾞ指定失敗
SET MR311                ; 送受信失敗
CON
AND MR311                ; 送受信失敗
JMP MR18613
STG MR18613
JMP MR18614
STG MR18614
@FMOV #0 DM350 #20
@FMOV #0 DM750 #20
RES MR202                ; WF_IDﾃﾞｰﾀ保存先ﾎﾙﾀﾞ指定成功
CON
RES MR203                ; WF_IDﾃﾞｰﾀ保存先ﾎﾙﾀﾞ指定失敗
CON
JMP MR18615
STG MR18615
@MOV #0 DM660            ; WF_ID読出し文字数
JMP MR18700              ; ｿｹｯﾄ1 受信要求ON
STG MR18700              ; ｿｹｯﾄ1 受信要求ON
AND R30108               ; ｿｹｯﾄ1 受信要求
JMP MR18701
STG MR18701
ANB R30108               ; ｿｹｯﾄ1 受信要求
JMP MR18702              ; ｿｹｯﾄ1 受信判断
STG MR18702              ; ｿｹｯﾄ1 受信判断
MPS
LD MR210                 ; 受信処理成功
AND= DM751 $4F4B
ANL
JMP MR18715
MPP
LD MR211                 ; 受信処理失敗
OR= DM751 $4552
ANL
JMP MR18703
STG MR18703
MPS
AND MR211                ; 受信処理失敗
SET MR311                ; 送受信失敗
CON
AND MR311                ; 送受信失敗
JMP MR18704
MPP
AND= DM751 $4552
SET MR312                ; 判定NG
CON
AND MR312                ; 判定NG
JMP MR18704
STG MR18704
JMP MR18715
STG MR18715
@FMOV #0 DM350 #20
@FMOV #0 DM750 #20
RES MR210                ; 受信処理成功
CON
RES MR211                ; 受信処理失敗
CON
JMP MR18800              ;  WF_ID読取り実行
STG MR18800              ;  WF_ID読取り実行
AND MR30102              ; ｿｹｯﾄ1 送信要求３
JMP MR18801
STG MR18801
ANB MR30102              ; ｿｹｯﾄ1 送信要求３
JMP MR18802
STG MR18802
MPS
AND MR204                ; WF_ID読取り実行成功
JMP MR18804
MPP
AND MR205                ; WF_ID読取り実行失敗
SET MR311                ; 送受信失敗
CON
AND MR311                ; 送受信失敗
JMP MR18803
STG MR18803
JMP MR18804
STG MR18804
@FMOV #0 DM350 #20
@FMOV #0 DM750 #20
RES MR204                ; WF_ID読取り実行成功
CON
RES MR205                ; WF_ID読取り実行失敗
CON
JMP MR18805              ; ｿｹｯﾄ1 受信要求
STG MR18805              ; ｿｹｯﾄ1 受信要求
AND R30108               ; ｿｹｯﾄ1 受信要求
JMP MR18806
STG MR18806
ANB R30108               ; ｿｹｯﾄ1 受信要求
JMP MR18807
STG MR18807
MPS
LD MR210                 ; 受信処理成功
AND= DM751 $4F4B
ANL
JMP MR18809
MPP
LD MR211                 ; 受信処理失敗
OR= DM751 $4552
ANL
JMP MR18808
STG MR18808
MPS
AND MR211                ; 受信処理失敗
SET MR311                ; 送受信失敗
CON
AND MR311                ; 送受信失敗
JMP MR18809
MPP
AND= DM751 $4552
SET MR312                ; 判定NG
CON
AND MR312                ; 判定NG
JMP MR18809
STG MR18809
@FMOV #0 DM350 #15
@FMOV #0 DM750 #15
RES MR210                ; 受信処理成功
CON
RES MR211                ; 受信処理失敗
CON
JMP MR18810              ; WF_ID上読取り結果読出し
STG MR18810              ; WF_ID上読取り結果読出し
AND MR30103              ; ｿｹｯﾄ1 送信要求４
JMP MR18811
STG MR18811
ANB MR30103              ; ｿｹｯﾄ1 送信要求４
JMP MR18812
STG MR18812
MPS
AND MR206                ; WF_ID上読取り結果成功
JMP MR18814
MPP
AND MR207                ; WF_ID上読取り結果失敗
SET MR311                ; 送受信失敗
CON
AND MR311                ; 送受信失敗
JMP MR18813
STG MR18813
JMP MR18814
STG MR18814
@FMOV #0 DM350 #20
@FMOV #0 DM750 #20
@MOV #11 DM660           ; WF_ID読出し文字数
RES MR206                ; WF_ID上読取り結果成功
CON
RES MR207                ; WF_ID上読取り結果失敗
CON
JMP MR18815              ; ｿｹｯﾄ1 受信要求ON
STG MR18815              ; ｿｹｯﾄ1 受信要求ON
AND R30108               ; ｿｹｯﾄ1 受信要求
JMP MR18900
STG MR18900
ANB R30108               ; ｿｹｯﾄ1 受信要求
JMP MR18901
STG MR18901
MPS
LD MR210                 ; 受信処理成功
AND= DM755 $4F4B
ANL
@BMOV DM751 DM950 #3
JMP MR18903
MPP
LD MR211                 ; 受信処理失敗
OR= DM751 $4552
ANL
JMP MR18902
STG MR18902
MPS
AND MR211                ; 受信処理失敗
SET MR311                ; 送受信失敗
CON
AND MR311                ; 送受信失敗
JMP MR18903
MPP
AND= DM751 $4552
SET MR312                ; 判定NG
CON
AND MR312                ; 判定NG
JMP MR18903
STG MR18903
@FMOV #0 DM350 #20
@FMOV #0 DM750 #20
RES MR210                ; 受信処理成功
CON
RES MR211                ; 受信処理失敗
CON
JMP MR18904
STG MR18904
AND MR30104              ; ｿｹｯﾄ1 送信要求５
JMP MR18905
STG MR18905
ANB MR30104              ; ｿｹｯﾄ1 送信要求５
JMP MR18906
STG MR18906
MPS
AND MR208                ; WF_ID下読取り結果成功
JMP MR18908
MPP
AND MR209                ; WF_ID下読取り結果失敗
SET MR311                ; 送受信失敗
CON
AND MR311                ; 送受信失敗
JMP MR18907
STG MR18907
JMP MR18908
STG MR18908
@FMOV #0 DM350 #20
@FMOV #0 DM750 #20
@FMOV #0 DM970 #3
RES MR208                ; WF_ID下読取り結果成功
CON
RES MR209                ; WF_ID下読取り結果失敗
CON
JMP MR18909              ; ｿｹｯﾄ1 受信要求
STG MR18909              ; ｿｹｯﾄ1 受信要求
AND R30108               ; ｿｹｯﾄ1 受信要求
JMP MR18910
STG MR18910
ANB R30108               ; ｿｹｯﾄ1 受信要求
JMP MR18911
STG MR18911
MPS
LD MR210                 ; 受信処理成功
AND= DM755 $4F4B
ANL
@BMOV DM751 DM970 #3
JMP MR18913
MPP
LD MR211                 ; 受信処理失敗
OR= DM751 $4552
ANL
JMP MR18912
STG MR18912
MPS
AND MR211                ; 受信処理失敗
SET MR311                ; 送受信失敗
CON
AND MR311                ; 送受信失敗
JMP MR18913
MPP
AND= DM751 $4552
SET MR312                ; 判定NG
CON
AND MR312                ; 判定NG
JMP MR18913
STG MR18913
RES MR210                ; 受信処理成功
CON
RES MR211                ; 受信処理失敗
CON
JMP MR18914              ; ｸﾛｰｽﾞ処理開始
STG MR18914              ; ｸﾛｰｽﾞ処理開始
AND R30112               ; ｿｹｯﾄ1 ｸﾛｰｽﾞ要求
JMP MR18915
STG MR18915
ANB R30112               ; ｿｹｯﾄ1 ｸﾛｰｽﾞ要求
JMP MR19000
STG MR19000
MPS
AND MR212                ; ｸﾛｰｽﾞ成功
RES MR310                ; ｱｸﾃｨﾌﾞOPEN済
CON
ANB MR310                ; ｱｸﾃｨﾌﾞOPEN済
JMP MR19002
MPP
AND MR213                ; ｸﾛｰｽﾞ失敗
SET MR311                ; 送受信失敗
CON
AND MR311                ; 送受信失敗
JMP MR19001
STG MR19001
JMP MR19002
STG MR19002
@FMOV #0 DM350 #15
@FMOV #0 DM750 #15
RES MR212                ; ｸﾛｰｽﾞ成功
CON
RES MR213                ; ｸﾛｰｽﾞ失敗
CON
JMP MR19003
STG MR19003
JMP MR19004
STG MR19004
MPS
AND R4008                ; WF No.読取り最終ACT
JMP MR19005
MPP
ANB R4008                ; WF No.読取り最終ACT
JMP MR19006
STG MR19005
SET MR912                ; WF No.読取り最終ACT
CON
AND MR912                ; WF No.読取り最終ACT
JMP MR19006
STG MR19006
SET MR913                ; WF_ID読取り完了
CON
AND R6005                ; WF　No.読取り完了
JMP MR19007
STG MR19007
ANB R4004                ; WF No.読取り要求
RES MR913                ; WF_ID読取り完了
CON
ANB MR913                ; WF_ID読取り完了
AND= DM103 #0            ; PCへWF_ID読込み要求
JMP MR19008              ; PCへWF_No.読込み要求
STG MR19008              ; PCへWF_No.読込み要求
AND= DM103 #1            ; PCへWF_ID読込み要求
JMP MR19009
STG MR19009
AND= DM103 #0            ; PCへWF_ID読込み要求
JMP MR19010
STG MR19010
MPS
LD MR912                 ; WF No.読取り最終ACT
AND= DM101 #0            ; PCへLot終了要求
ANL
TMR #80 #3               ; PCへLot終了要求ﾃﾞｨﾚｰ時間
CON
AND T80                  ; PCへLot終了要求ﾃﾞｨﾚｰ時間
JMP MR19011              ; PCへLot終了
MPP
ANB MR912                ; WF No.読取り最終ACT
JMP MR19015              ; WF_ID読取り完了
STG MR19011              ; PCへLot終了
AND= DM101 #1            ; PCへLot終了要求
JMP MR19012
STG MR19012
AND= DM101 #0            ; PCへLot終了要求
JMP MR19014
STG MR19014
RES MR912                ; WF No.読取り最終ACT
CON
ANB MR912                ; WF No.読取り最終ACT
JMP MR19015              ; WF_ID読取り完了
STG MR19015              ; WF_ID読取り完了
ANB MR18600              ; WF_ID読取り中
ENDS
LDB MR18600              ; WF_ID読取り中
ZRES MR18603 MR18915
END
ENDH
