DEVICE:52
;MODULE:ﾊﾞｰｺｰﾄﾞ
;MODULE_TYPE:0
LD CR2002                ; 常時ON
AND T100                 ; 動作遅延ﾀｲﾏ-
OUT R39600               ; Port1 動作許可
;***** 通信異常、異常解除 ******
LDB R40902               ; Port1 受信待ちﾀｲﾑｱｳﾄｴﾗｰ
ANB R40903               ; Port1 受信完了ﾀｲﾑｱｳﾄｴﾗｰ
ANB R40904               ; Port1 ﾌﾚｰﾐﾝｸﾞｴﾗｰ
ANB R40905               ; Port1 ﾊﾟﾘﾃｨｴﾗｰ
ANB R40906               ; Port1 ｵｰﾊﾞｰﾗﾝｴﾗｰ
ANB R40907               ; Port1 受信ﾌﾞﾛｯｸｴﾗｰ
ANB R40908               ; Port1 受信照合不一致ｴﾗｰ
ANB R40909               ; Port1 受信ﾊﾞｯﾌｧｵｰﾊﾞｰﾌﾛｰ
ANB R40910               ; Port1 ﾏｸﾛ実行ｴﾗｰ
ANB R40911               ; Port1 ﾏｸﾛﾃﾞｰﾀｴﾗｰ
INV
OUT MR7101               ; ﾊﾞｰｺｰﾄﾞ通信異常
LD MR7101                ; ﾊﾞｰｺｰﾄﾞ通信異常
ANF R42010               ; ｱﾗｰﾑﾘｾｯﾄSW(TP)
OR MR7102                ; ﾊﾞｰｺｰﾄﾞ通信異常ｸﾘｱ
ANB MR7103               ; ﾊﾞｰｺｰﾄﾞ通信異常ｸﾘｱ完了
OUT MR7102               ; ﾊﾞｰｺｰﾄﾞ通信異常ｸﾘｱ
OUT R39601               ; Port1 ｴﾗｰｸﾘｱ要求
LD MR7102                ; ﾊﾞｰｺｰﾄﾞ通信異常ｸﾘｱ
AND R40901               ; Port1 ｴﾗｰｸﾘｱ完了
OUT MR7103               ; ﾊﾞｰｺｰﾄﾞ通信異常ｸﾘｱ完了
;***** ﾃﾞｰﾀ読込み ******
LD R111                  ; ﾊﾞｰｺｰﾄﾞ読込みSW
ANB LR100                ; ﾊﾞｰｺｰﾄﾞ読込み済みFLG
AND MR5800               ; 転写装置連動ﾓｰﾄﾞ
DIFU MR7015              ; ﾊﾞｰｺｰﾄﾞ読込みSWﾊﾟﾙｽ
LD MR7015                ; ﾊﾞｰｺｰﾄﾞ読込みSWﾊﾟﾙｽ
ANB MR7000               ; ﾊﾞｰｺｰﾄﾞ読込み開始
LDB MR7015               ; ﾊﾞｰｺｰﾄﾞ読込みSWﾊﾟﾙｽ
AND MR7000               ; ﾊﾞｰｺｰﾄﾞ読込み開始
ORL
ANB MR7011               ; ﾊﾞｰｺｰﾄﾞ読込み完了
OUT MR7000               ; ﾊﾞｰｺｰﾄﾞ読込み開始
OUT R311                 ; ﾊﾞｰｺｰﾄﾞ読込みPL
TMH #400 #5
LDP T400
SET MR7001               ; ﾊﾞｰｺｰﾄﾞ読込み開始ﾃﾞｰﾀｸﾘｱ
STG MR7001               ; ﾊﾞｰｺｰﾄﾞ読込み開始ﾃﾞｰﾀｸﾘｱ
@FMOV #0 DM900 #30       ; LOT番号読出し値
MPS
@UWRIT #2 #0 #0 #50
MPP
AND R40900               ; Port1 動作可能
RES MR901                ; ﾊﾞｰｺｰﾄﾞLot_No.読込み完了
CON
RES MR902                ; ﾚｼﾋﾟ_No.読込み完了
CON
RES MR903                ; 作業者_No.読込み完了
CON
ANB MR901                ; ﾊﾞｰｺｰﾄﾞLot_No.読込み完了
ANB MR902                ; ﾚｼﾋﾟ_No.読込み完了
ANB MR903                ; 作業者_No.読込み完了
JMP MR7002               ; ﾊﾞｰｺｰﾄﾞ読込みﾏｸﾛON
STG MR7002               ; ﾊﾞｰｺｰﾄﾞ読込みﾏｸﾛON
MPS
OUT MR7012               ; ﾊﾞｰｺｰﾄﾞ読込み1回目ﾏｸﾛON
MPP
LD R40300                ; Port1 受信読出要求1
AND R39700               ; Port1 受信照合1
ANL
JMP MR7003               ; ﾊﾞｰｺｰﾄﾞ読込みﾃﾞｰﾀ読出し
STG MR7003               ; ﾊﾞｰｺｰﾄﾞ読込みﾃﾞｰﾀ読出し
@UREAD #2 #0 DM900 #10   ; LOT番号読出し値
TMH #401 #5
CON
AND T401
SET MR901                ; ﾊﾞｰｺｰﾄﾞLot_No.読込み完了
CON
AND MR901                ; ﾊﾞｰｺｰﾄﾞLot_No.読込み完了
BMOV DM900 DM940 #5      ; LOT番号読出し値  LOT　No.記憶
JMP MR7004               ; ﾊﾞｯﾌｧ内ｸﾘｱ
STG MR7004               ; ﾊﾞｯﾌｧ内ｸﾘｱ
MPS
@UWRIT #2 #0 #0 #50
MPP
AND R40900               ; Port1 動作可能
JMP MR7005               ; ﾊﾞｰｺｰﾄﾞ読込みﾏｸﾛON
STG MR7005               ; ﾊﾞｰｺｰﾄﾞ読込みﾏｸﾛON
MPS
OUT MR7013               ; ﾊﾞｰｺｰﾄﾞ読込み2回目ﾏｸﾛON
MPP
LD R40300                ; Port1 受信読出要求1
AND R39700               ; Port1 受信照合1
ANL
JMP MR7006               ; ﾊﾞｰｺｰﾄﾞ読込みﾃﾞｰﾀ読出し
STG MR7006               ; ﾊﾞｰｺｰﾄﾞ読込みﾃﾞｰﾀ読出し
@UREAD #2 #0 DM910 #10   ; ﾚｼﾋﾟ番号
TMH #402 #5
CON
AND T402
SET MR902                ; ﾚｼﾋﾟ_No.読込み完了
CON
AND MR902                ; ﾚｼﾋﾟ_No.読込み完了
JMP MR7007               ; ﾊﾞｯﾌｧ内ｸﾘｱ
STG MR7007               ; ﾊﾞｯﾌｧ内ｸﾘｱ
MPS
@UWRIT #2 #0 #0 #50
MPP
AND R40900               ; Port1 動作可能
JMP MR7008               ; ﾊﾞｰｺｰﾄﾞ読込みﾏｸﾛON
STG MR7008               ; ﾊﾞｰｺｰﾄﾞ読込みﾏｸﾛON
MPS
OUT MR7014               ; ﾊﾞｰｺｰﾄﾞ読込み3回目ﾏｸﾛON
MPP
LD R40300                ; Port1 受信読出要求1
AND R39700               ; Port1 受信照合1
ANL
JMP MR7009               ; ﾊﾞｰｺｰﾄﾞ読込みﾃﾞｰﾀ読出し
STG MR7009               ; ﾊﾞｰｺｰﾄﾞ読込みﾃﾞｰﾀ読出し
@UREAD #2 #0 DM920 #10
TMH #403 #5
CON
AND T403
SET MR903                ; 作業者_No.読込み完了
CON
AND MR903                ; 作業者_No.読込み完了
JMP MR7010               ; ﾚｼﾋﾟ番号ﾁｪｯｸ
STG MR7010               ; ﾚｼﾋﾟ番号ﾁｪｯｸ
MPS
LD MR400                 ; ﾚｼﾋﾟ番号OK
ANB MR403                ; ﾚｼﾋﾟ番号10
ANL
LDA DM910                ; ﾚｼﾋﾟ番号
CON
RASC
CON
STA DM5502               ; ﾚｼﾋﾟ番号
CON
JMP MR7011               ; ﾊﾞｰｺｰﾄﾞ読込み完了
MRD
LD MR400                 ; ﾚｼﾋﾟ番号OK
AND MR403                ; ﾚｼﾋﾟ番号10
ANL
@MOV #10 DM5502          ; ﾚｼﾋﾟ番号
JMP MR7011               ; ﾊﾞｰｺｰﾄﾞ読込み完了
MPP
ANB MR400                ; ﾚｼﾋﾟ番号OK
SET MR405                ; ﾚｼﾋﾟ番号異常
CON
AND MR405                ; ﾚｼﾋﾟ番号異常
JMP MR7011               ; ﾊﾞｰｺｰﾄﾞ読込み完了
STG MR7011               ; ﾊﾞｰｺｰﾄﾞ読込み完了
ANB MR7000               ; ﾊﾞｰｺｰﾄﾞ読込み開始
ENDS
LDB MR7000               ; ﾊﾞｰｺｰﾄﾞ読込み開始
ZRES MR7001 MR7010       ; ﾊﾞｰｺｰﾄﾞ読込み開始ﾃﾞｰﾀｸﾘｱ  ﾚｼﾋﾟ番号ﾁｪｯｸ
LDB MR7012               ; ﾊﾞｰｺｰﾄﾞ読込み1回目ﾏｸﾛON
ANB MR7013               ; ﾊﾞｰｺｰﾄﾞ読込み2回目ﾏｸﾛON
ANB MR7014               ; ﾊﾞｰｺｰﾄﾞ読込み3回目ﾏｸﾛON
INV
OUT R39000               ; Port1 ﾏｸﾛ開始1
LD= DM910 $3031          ; ﾚｼﾋﾟ番号
OR= DM910 $3032          ; ﾚｼﾋﾟ番号
OR= DM910 $3033          ; ﾚｼﾋﾟ番号
OR= DM910 $3034          ; ﾚｼﾋﾟ番号
OR= DM910 $3035          ; ﾚｼﾋﾟ番号
OUT MR401                ; ﾚｼﾋﾟ番号OK-1
LD= DM910 $3036          ; ﾚｼﾋﾟ番号
OR= DM910 $3037          ; ﾚｼﾋﾟ番号
OR= DM910 $3038          ; ﾚｼﾋﾟ番号
OR= DM910 $3039          ; ﾚｼﾋﾟ番号
OR= DM910 $3130          ; ﾚｼﾋﾟ番号
OUT MR402                ; ﾚｼﾋﾟ番号OK-2
LD= DM910 $3130          ; ﾚｼﾋﾟ番号
OUT MR403                ; ﾚｼﾋﾟ番号10
LDB MR401                ; ﾚｼﾋﾟ番号OK-1
ANB MR402                ; ﾚｼﾋﾟ番号OK-2
INV
OUT MR400                ; ﾚｼﾋﾟ番号OK
END
ENDH
