DEVICE:52
;MODULE:外観画像処理
;MODULE_TYPE:0
;SCRIPT_TYPE:
;***** 画像検査ｱｸﾃｨﾌﾞ OPEN　処理 *****
;DM0=9000　  '自ﾎﾟｰﾄ番号
;DM1=172　　 '通信先IPｱﾄﾞﾚｽ1ﾊﾞｲﾄ目
;DM2=168　　 '通信先IPｱﾄﾞﾚｽ2ﾊﾞｲﾄ目
;DM3=0　　　 '通信先IPｱﾄﾞﾚｽ3ﾊﾞｲﾄ目
;DM4=100　　　'通信先IPｱﾄﾞﾚｽ4ﾊﾞｲﾄ目　
;DM5=9876 　 '通信先ﾎﾟｰﾄ番号
;DM6=5000 　 '要求ﾀｲﾑｱｳﾄ時間(ms)
LDP MR8604               ; 画像処理ｱｸﾃｨﾌﾞOPEN
ORP MR9004               ; 外観検査結果TCP0 ｱｸﾃｨﾌﾞｵｰﾌﾟﾝ要求
ANB R30002               ; TCP0 ｱｸﾃｨﾌﾞｵｰﾌﾟﾝ要求
NCJ #1000
;DM0=9000　  '自ﾎﾟｰﾄ番号
;
LD CR2002                ; 常時ON
MOV #9000 DM0
;DM1=172　　 '通信先IPｱﾄﾞﾚｽ1ﾊﾞｲﾄ目
;
LD CR2002                ; 常時ON
MOV #172 DM1
;DM2=168　　 '通信先IPｱﾄﾞﾚｽ2ﾊﾞｲﾄ目
;
LD CR2002                ; 常時ON
MOV #168 DM2
;DM3=0　　　 '通信先IPｱﾄﾞﾚｽ3ﾊﾞｲﾄ目
;
LD CR2002                ; 常時ON
MOV #0 DM3
;DM4=100　　　'通信先IPｱﾄﾞﾚｽ4ﾊﾞｲﾄ目　
;
LD CR2002                ; 常時ON
MOV #100 DM4
;DM5=9876 　 '通信先ﾎﾟｰﾄ番号
;
LD CR2002                ; 常時ON
MOV #9876 DM5
;DM6=5000 　 '要求ﾀｲﾑｱｳﾄ時間(ms)
LD CR2002                ; 常時ON
MOV #5000 DM6
LABEL #1000
;
LDP MR8604               ; 画像処理ｱｸﾃｨﾌﾞOPEN
ORP MR9004               ; 外観検査結果TCP0 ｱｸﾃｨﾌﾞｵｰﾌﾟﾝ要求
ANB R30002               ; TCP0 ｱｸﾃｨﾌﾞｵｰﾌﾟﾝ要求
U_SOPEN #0 #0 DM0
LD R30002                ; TCP0 ｱｸﾃｨﾌﾞｵｰﾌﾟﾝ要求
AND R31002               ; TCP0 ｱｸﾃｨﾌﾞｵｰﾌﾟﾝ完了
MPS
ANB R31003               ; TCP0 ｱｸﾃｨﾌﾞｵｰﾌﾟﾝ失敗
SET MR100                ; ｵｰﾌﾟﾝ成功
MPP
AND R31003               ; TCP0 ｱｸﾃｨﾌﾞｵｰﾌﾟﾝ失敗
U_SSTAT #0 #0 DM300
SET MR101                ; ｵｰﾌﾟﾝ失敗
LDP MR8604               ; 画像処理ｱｸﾃｨﾌﾞOPEN
ORP MR9004               ; 外観検査結果TCP0 ｱｸﾃｨﾌﾞｵｰﾌﾟﾝ要求
OR R30002                ; TCP0 ｱｸﾃｨﾌﾞｵｰﾌﾟﾝ要求
ANB R31002               ; TCP0 ｱｸﾃｨﾌﾞｵｰﾌﾟﾝ完了
OUT R30002               ; TCP0 ｱｸﾃｨﾌﾞｵｰﾌﾟﾝ要求
;***** 画像ﾃﾞｰﾀ保存先ﾎﾙﾀﾞ指定 *****
; '保存先ﾎﾙﾀﾞｰ名指定
;d501.T="UNITDATA 1 LOTNO$ "+D4000.T
LDP MR8610               ; 画像ﾃﾞｰﾀ保存先ﾎﾙﾀﾞ指定
ANB MR30000              ; ｿｹｯﾄ0 送信要求１
NCJ #1001
; '保存先ﾎﾙﾀﾞｰ名指定
;
;d501.T="UNITDATA 1 LOTNO$ "+D4000.T
LD CR2002                ; 常時ON
ADRSET VM2 VM0
MOV #0 VM2
MOV.D VM0 @VM0
SMOV "UNITDATA 1 LOTNO$ " *@VM0
LD CR2002                ; 常時ON
SADD *@VM0 DM4000 *@VM0  ; ﾌｫﾙﾀﾞｰ名
SMOV *@VM0 DM501
LABEL #1001
;
LDP MR8610               ; 画像ﾃﾞｰﾀ保存先ﾎﾙﾀﾞ指定
ANB MR30000              ; ｿｹｯﾄ0 送信要求１
MOV DM930 DM500
U_SWRBUF #0 #0 DM500
LD MR30000               ; ｿｹｯﾄ0 送信要求１
AND R31006               ; ｿｹｯﾄ0 送信完了
MPS
ANB R31007               ; ｿｹｯﾄ0 送信失敗
SET MR102                ; 画像ﾃﾞｰﾀ保存先ﾎﾙﾀﾞ指定成功
MPP
AND R31007               ; ｿｹｯﾄ0 送信失敗
U_SSTAT #0 #0 DM300
SET MR103                ; 画像ﾃﾞｰﾀ保存先ﾎﾙﾀﾞ指定失敗
LDP MR8610               ; 画像ﾃﾞｰﾀ保存先ﾎﾙﾀﾞ指定
OR MR30000               ; ｿｹｯﾄ0 送信要求１
ANB R31006               ; ｿｹｯﾄ0 送信完了
OUT MR30000              ; ｿｹｯﾄ0 送信要求１
;***** 画像ｼｰﾝNo.指定 *****
;DM531.T="S "+D4011.T　  'ｼｰﾝNo.指定
LDP MR8706               ; 画像ｼｰﾝNo.指定送信
ANB MR30001              ; ｿｹｯﾄ0 送信要求２
NCJ #1002
;DM531.T="S "+D4011.T　  'ｼｰﾝNo.指定
LD CR2002                ; 常時ON
ADRSET VM2 VM0
MOV #0 VM2
MOV.D VM0 @VM2
SMOV "S " *@VM2
LD CR2002                ; 常時ON
SADD *@VM2 DM4011 *@VM2
SMOV *@VM2 DM531
LABEL #1002
;
LDP MR8706               ; 画像ｼｰﾝNo.指定送信
ANB MR30001              ; ｿｹｯﾄ0 送信要求２
MOV #4 DM530
U_SWRBUF #0 #0 DM530
LD MR30001               ; ｿｹｯﾄ0 送信要求２
AND R31006               ; ｿｹｯﾄ0 送信完了
MPS
ANB R31007               ; ｿｹｯﾄ0 送信失敗
SET MR104                ; 画像ｼｰﾝNo.指定成功
MPP
AND R31007               ; ｿｹｯﾄ0 送信失敗
U_SSTAT #0 #0 DM300
SET MR105                ; 画像ｼｰﾝNo.指定失敗
LDP MR8706               ; 画像ｼｰﾝNo.指定送信
OR MR30001               ; ｿｹｯﾄ0 送信要求２
ANB R31006               ; ｿｹｯﾄ0 送信完了
OUT MR30001              ; ｿｹｯﾄ0 送信要求２
;***** 画像検査実行 *****
LDP MR8800               ; 画像検査実行
ANB MR30002              ; ｿｹｯﾄ0 送信要求３
MOV #1 DM550
SMOV "M" DM551
U_SWRBUF #0 #0 DM550
LD MR30002               ; ｿｹｯﾄ0 送信要求３
AND R31006               ; ｿｹｯﾄ0 送信完了
MPS
ANB R31007               ; ｿｹｯﾄ0 送信失敗
SET MR106                ; 画像検査実行成功
MPP
AND R31007               ; ｿｹｯﾄ0 送信失敗
U_SSTAT #0 #0 DM300
SET MR107                ; 画像検査実行失敗
LDP MR8800               ; 画像検査実行
OR MR30002               ; ｿｹｯﾄ0 送信要求３
ANB R31006               ; ｿｹｯﾄ0 送信完了
OUT MR30002              ; ｿｹｯﾄ0 送信要求３
;***** WF検査結果ﾕﾆｯﾄ指定 *****
;DM561.T="UNITDATA 29 136"　  'WF検査結果ﾕﾆｯﾄ指定
LDP MR9010               ; WF検査結果ﾕﾆｯﾄ指定
ANB MR30003              ; ｿｹｯﾄ0 送信要求４
NCJ #1003
;DM561.T="UNITDATA 29 136"　  'WF検査結果ﾕﾆｯﾄ指定
LD CR2002                ; 常時ON
SMOV "UNITDATA 29 136" DM561
LABEL #1003
;
LDP MR9010               ; WF検査結果ﾕﾆｯﾄ指定
ANB MR30003              ; ｿｹｯﾄ0 送信要求４
MOV #15 DM560
U_SWRBUF #0 #0 DM560
LD MR30003               ; ｿｹｯﾄ0 送信要求４
AND R31006               ; ｿｹｯﾄ0 送信完了
MPS
ANB R31007               ; ｿｹｯﾄ0 送信失敗
SET MR108                ; WF検査結果ﾕﾆｯﾄ指定成功
MPP
AND R31007               ; ｿｹｯﾄ0 送信失敗
U_SSTAT #0 #0 DM300
SET MR109                ; WF検査結果ﾕﾆｯﾄ指定失敗
LDP MR9010               ; WF検査結果ﾕﾆｯﾄ指定
OR MR30003               ; ｿｹｯﾄ0 送信要求４
ANB R31006               ; ｿｹｯﾄ0 送信完了
OUT MR30003              ; ｿｹｯﾄ0 送信要求４
LDB MR30000              ; ｿｹｯﾄ0 送信要求１
ANB MR30001              ; ｿｹｯﾄ0 送信要求２
ANB MR30002              ; ｿｹｯﾄ0 送信要求３
ANB MR30003              ; ｿｹｯﾄ0 送信要求４
INV
OUT R30006               ; ｿｹｯﾄ0 送信要求
;***** 受信処理 *****
LDB MR8700               ; ﾌｫﾙﾀﾞ.指定受信処理
ANB MR8711               ; 画像ｼｰﾝNo.指定結果受信
ANB MR8805               ; 画像検査実行結果受信
ANB MR9100               ; WF検査結果受信要求
INV
OUT MR8514               ; 受信処理起動集合
LDP MR8514               ; 受信処理起動集合
ANB R30008               ; ｿｹｯﾄ0 受信要求
ANB R31008               ; ｿｹｯﾄ0 受信完了
MOV DM590 DM580          ; 外観検査受信読出し文字数  外観検査受信読出し文字数
MOV #0 DM581             ; 外観検査受信読出しOFFｾｯﾄ
U_SRCVNP #0 #0 DM580     ; 外観検査受信読出し文字数
LD R30008                ; ｿｹｯﾄ0 受信要求
AND R31008               ; ｿｹｯﾄ0 受信完了
MPS
ANB R31009               ; ｿｹｯﾄ0 受信失敗
U_SRDBUF #0 #0 DM700
SET MR110                ; 受信処理成功
MPP
AND R31009               ; ｿｹｯﾄ0 受信失敗
U_SSTAT #0 #0 DM300
SET MR111                ; 受信処理失敗
LDP MR8514               ; 受信処理起動集合
OR R30008                ; ｿｹｯﾄ0 受信要求
ANB R31008               ; ｿｹｯﾄ0 受信完了
OUT R30008               ; ｿｹｯﾄ0 受信要求
;***** ｸﾛｰｽﾞ処理 *****
LD R30012                ; ｿｹｯﾄ0 ｸﾛｰｽﾞ要求
AND R31012               ; ｿｹｯﾄ0 ｸﾛｰｽﾞ完了
U_SSTAT #0 #0 DM300
MPS
AND= DM310 #0
SET MR112                ; ｸﾛｰｽﾞ成功
MPP
AND<> DM310 #0
SET MR113                ; ｸﾛｰｽﾞ失敗
LDP MR8904               ;  ｸﾛｰｽﾞ処理
ORP MR9105               ; ｿｹｯﾄ0 ｸﾛｰｽﾞ要求
OR R30012                ; ｿｹｯﾄ0 ｸﾛｰｽﾞ要求
ANB R31012               ; ｿｹｯﾄ0 ｸﾛｰｽﾞ完了
OUT R30012               ; ｿｹｯﾄ0 ｸﾛｰｽﾞ要求
;***** 外観画像検査一連 *****
LD CR2002                ; 常時ON
MOV DM1020 DM1022        ; 外観検査ﾛﾎﾞｯﾄﾎﾟｲﾝﾄNo.  外観画像検査ﾎﾟｲﾝﾄNo.
LD MR8602                ; 外観画像照明ON
OR MR8515                ; 外観画像照明ON
AND MR8600               ; 外観画像検査動作中
OUT MR8515               ; 外観画像照明ON
LDB MR10704              ; 外観画像検査動作実行
ANB MR10709              ; 外観画像検査実行
ANB MR10715              ; 外観画像検査実行
ANB MR10804              ; 外観画像検査実行
INV
AND LR800                ; 自動ﾓｰﾄﾞSW選択
LDB MR10810              ; 外観画像検査実行
ANB MR10815              ; 外観画像検査実行
ANB MR10905              ; 外観画像検査実行
ANB MR10910              ; 外観画像検査実行
INV
AND LR800                ; 自動ﾓｰﾄﾞSW選択
ORL
LD R46402                ; 手動画像処理ﾄﾘｶﾞｰSW
ANB LR800                ; 自動ﾓｰﾄﾞSW選択
ORL
ANB MR8600               ; 外観画像検査動作中
OUT MR8601               ; 外観画像検査起動集合
LDP MR8601               ; 外観画像検査起動集合
OR MR8600                ; 外観画像検査動作中
ANB MR8915
OUT MR8600               ; 外観画像検査動作中
TMH #172 #5
LDP T172
SET MR8602               ; 外観画像照明ON
STG MR8602               ; 外観画像照明ON
@FMOV #0 DM300 #15
@FMOV #0 DM700 #15
@FMOV #0 MR100 #1        ; ｵｰﾌﾟﾝ成功
MPS
@MOV #0 DM590            ; 外観検査受信読出し文字数
MPP
AND MR8515               ; 外観画像照明ON
RES MR311                ; 送受信失敗
CON
RES MR312                ; 判定NG
CON
ANB MR311                ; 送受信失敗
ANB MR312                ; 判定NG
JMP MR8603
STG MR8603
MPS
ANB MR300                ; ｱｸﾃｨﾌﾞOPEN済
JMP MR8604               ; 画像処理ｱｸﾃｨﾌﾞOPEN
MPP
AND MR300                ; ｱｸﾃｨﾌﾞOPEN済
JMP MR8608
STG MR8604               ; 画像処理ｱｸﾃｨﾌﾞOPEN
AND R30002               ; TCP0 ｱｸﾃｨﾌﾞｵｰﾌﾟﾝ要求
JMP MR8605
STG MR8605
ANB R30002               ; TCP0 ｱｸﾃｨﾌﾞｵｰﾌﾟﾝ要求
JMP MR8606
STG MR8606
MPS
AND MR100                ; ｵｰﾌﾟﾝ成功
SET MR300                ; ｱｸﾃｨﾌﾞOPEN済
CON
AND MR300                ; ｱｸﾃｨﾌﾞOPEN済
JMP MR8608
MPP
AND MR101                ; ｵｰﾌﾟﾝ失敗
JMP MR8607
STG MR8607
JMP MR8608
STG MR8608
@FMOV #0 DM300 #15
RES MR100                ; ｵｰﾌﾟﾝ成功
CON
RES MR101                ; ｵｰﾌﾟﾝ失敗
CON
JMP MR8609
STG MR8609
@BMOV DM900 DM4000 #5    ; LOT番号読出し値  ﾌｫﾙﾀﾞｰ名
JMP MR8610               ; 画像ﾃﾞｰﾀ保存先ﾎﾙﾀﾞ指定
STG MR8610               ; 画像ﾃﾞｰﾀ保存先ﾎﾙﾀﾞ指定
AND MR30000              ; ｿｹｯﾄ0 送信要求１
JMP MR8611
STG MR8611
ANB MR30000              ; ｿｹｯﾄ0 送信要求１
JMP MR8612
STG MR8612
MPS
AND MR102                ; 画像ﾃﾞｰﾀ保存先ﾎﾙﾀﾞ指定成功
JMP MR8614
MPP
AND MR103                ; 画像ﾃﾞｰﾀ保存先ﾎﾙﾀﾞ指定失敗
JMP MR8613
STG MR8613
JMP MR8614
STG MR8614
@FMOV #0 DM300 #15
@FMOV #0 DM700 #15
RES MR102                ; 画像ﾃﾞｰﾀ保存先ﾎﾙﾀﾞ指定成功
CON
RES MR103                ; 画像ﾃﾞｰﾀ保存先ﾎﾙﾀﾞ指定失敗
CON
JMP MR8615
STG MR8615
JMP MR8700               ; ﾌｫﾙﾀﾞ.指定受信処理
STG MR8700               ; ﾌｫﾙﾀﾞ.指定受信処理
AND R30008               ; ｿｹｯﾄ0 受信要求
JMP MR8701
STG MR8701
ANB R30008               ; ｿｹｯﾄ0 受信要求
JMP MR8702
STG MR8702
MPS
LD= DM701 $4F4B
AND MR110                ; 受信処理成功
ANL
JMP MR8704
MPP
LD MR111                 ; 受信処理失敗
OR= DM701 $4552
ANL
JMP MR8703
STG MR8703
JMP MR8704
STG MR8704
@FMOV #0 DM300 #15
@FMOV #0 DM700 #15
RES MR110                ; 受信処理成功
CON
RES MR111                ; 受信処理失敗
CON
JMP MR8705
STG MR8705
MPS
AND LR800                ; 自動ﾓｰﾄﾞSW選択
@CAL- DM1022 #1 DM410    ; 外観画像検査ﾎﾟｲﾝﾄNo.
MRD
ANB LR800                ; 自動ﾓｰﾄﾞSW選択
@CAL- DM1004 #1 DM410    ; 手動画像位置設定No.
MRD
@CAL* DM410 #10 DM420
MRD
@DASC DM420 DM4010       ; ｼｰﾝNo.
MPP
JMP MR8706               ; 画像ｼｰﾝNo.指定送信
STG MR8706               ; 画像ｼｰﾝNo.指定送信
AND MR30001              ; ｿｹｯﾄ0 送信要求２
JMP MR8707
STG MR8707
ANB MR30001              ; ｿｹｯﾄ0 送信要求２
JMP MR8708
STG MR8708
MPS
AND MR104                ; 画像ｼｰﾝNo.指定成功
JMP MR8710
MPP
AND MR105                ; 画像ｼｰﾝNo.指定失敗
JMP MR8709
STG MR8709
JMP MR8710
STG MR8710
@FMOV #0 DM300 #15
@FMOV #0 DM700 #15
RES MR104                ; 画像ｼｰﾝNo.指定成功
CON
RES MR105                ; 画像ｼｰﾝNo.指定失敗
CON
JMP MR8711               ; 画像ｼｰﾝNo.指定結果受信
STG MR8711               ; 画像ｼｰﾝNo.指定結果受信
AND R30008               ; ｿｹｯﾄ0 受信要求
JMP MR8712
STG MR8712
ANB R30008               ; ｿｹｯﾄ0 受信要求
JMP MR8713
STG MR8713
MPS
LD= DM701 $4F4B
AND MR110                ; 受信処理成功
ANL
JMP MR8715
MPP
LD MR111                 ; 受信処理失敗
OR= DM701 $4552
ANL
JMP MR8714
STG MR8714
JMP MR8715
STG MR8715
@FMOV #0 DM300 #15
@FMOV #0 DM700 #15
RES MR110                ; 受信処理成功
CON
RES MR111                ; 受信処理失敗
CON
JMP MR8800               ; 画像検査実行
STG MR8800               ; 画像検査実行
AND MR30002              ; ｿｹｯﾄ0 送信要求３
JMP MR8801
STG MR8801
ANB MR30002              ; ｿｹｯﾄ0 送信要求３
JMP MR8802
STG MR8802
MPS
AND MR106                ; 画像検査実行成功
JMP MR8804
MPP
AND MR107                ; 画像検査実行失敗
JMP MR8803
STG MR8803
JMP MR8804
STG MR8804
@FMOV #0 DM300 #15
@FMOV #0 DM700 #15
RES MR106                ; 画像検査実行成功
CON
RES MR107                ; 画像検査実行失敗
CON
JMP MR8805               ; 画像検査実行結果受信
STG MR8805               ; 画像検査実行結果受信
AND R30008               ; ｿｹｯﾄ0 受信要求
JMP MR8806
STG MR8806
ANB R30008               ; ｿｹｯﾄ0 受信要求
JMP MR8807
STG MR8807
MPS
LD MR110                 ; 受信処理成功
AND= DM701 $4F4B
ANL
JMP MR8809
MPP
LD MR111                 ; 受信処理失敗
OR= DM701 $4552
ANL
JMP MR8808
STG MR8808
JMP MR8903
STG MR8809
JMP MR8903
STG MR8903
@FMOV #0 DM300 #15
@FMOV #0 DM700 #15
RES MR110                ; 受信処理成功
CON
RES MR111                ; 受信処理失敗
CON
JMP MR8904               ;  ｸﾛｰｽﾞ処理
STG MR8904               ;  ｸﾛｰｽﾞ処理
AND R30012               ; ｿｹｯﾄ0 ｸﾛｰｽﾞ要求
JMP MR8905
STG MR8905
ANB R30012               ; ｿｹｯﾄ0 ｸﾛｰｽﾞ要求
JMP MR8906
STG MR8906
MPS
AND MR112                ; ｸﾛｰｽﾞ成功
RES MR300                ; ｱｸﾃｨﾌﾞOPEN済
CON
ANB MR300                ; ｱｸﾃｨﾌﾞOPEN済
JMP MR8908
MPP
AND MR113                ; ｸﾛｰｽﾞ失敗
JMP MR8907
STG MR8907
JMP MR8908
STG MR8908
@FMOV #0 DM300 #15
@FMOV #0 DM700 #15
RES MR112                ; ｸﾛｰｽﾞ成功
CON
RES MR113                ; ｸﾛｰｽﾞ失敗
CON
JMP MR8909
STG MR8909
JMP MR8915
STG MR8915
ANB MR8600               ; 外観画像検査動作中
ENDS
LDB MR8600               ; 外観画像検査動作中
ZRES MR8602 MR8915       ; 外観画像照明ON
;***** 外観画像検査結果受信一連 *****
LD R46403                ; 手動画像検査結果SW
AND= DM1300 #116         ; 外観検査ﾛﾎﾞｯﾄﾎﾟｲﾝﾄNo.
OR MR11002               ; WF検査結果受信起動
ANB MR9000               ; 外観画像検査結果受信起動
OUT MR9001               ; 外観画像検査結果受信起動集合
LDP MR9001               ; 外観画像検査結果受信起動集合
OR MR9000                ; 外観画像検査結果受信起動
ANB MR9115               ; 外観画像検査結果受信完了
OUT MR9000               ; 外観画像検査結果受信起動
OUT R48403               ; 外観画像検査結果受信起動PL
TMH #173 #5
LDP T173
SET MR9002
STG MR9002
@FMOV #0 DM300 #15
@FMOV #0 DM700 #15
@FMOV #0 MR100 #1        ; ｵｰﾌﾟﾝ成功
@MOV #7 DM590            ; 外観検査受信読出し文字数
RES MR314                ; 外観検査結果OK
CON
RES MR315                ; 外観検査結果NG
CON
RES MR307                ; 外観検査結果送受信失敗
CON
RES MR308                ; 外観検査結果送受信NG
CON
RES MR313                ; 外観検査結果送受異常
CON
AND MR9200
JMP MR9003               ; ｱｸﾃｨﾌﾞOPEN済判断
LDB MR314                ; 外観検査結果OK
ANB MR315                ; 外観検査結果NG
ANB MR307                ; 外観検査結果送受信失敗
ANB MR308                ; 外観検査結果送受信NG
ANB MR313                ; 外観検査結果送受異常
OUT MR9200
STG MR9003               ; ｱｸﾃｨﾌﾞOPEN済判断
MPS
ANB MR300                ; ｱｸﾃｨﾌﾞOPEN済
JMP MR9004               ; 外観検査結果TCP0 ｱｸﾃｨﾌﾞｵｰﾌﾟﾝ要求
MPP
AND MR300                ; ｱｸﾃｨﾌﾞOPEN済
JMP MR9008
STG MR9004               ; 外観検査結果TCP0 ｱｸﾃｨﾌﾞｵｰﾌﾟﾝ要求
AND R30002               ; TCP0 ｱｸﾃｨﾌﾞｵｰﾌﾟﾝ要求
JMP MR9005
STG MR9005
ANB R30002               ; TCP0 ｱｸﾃｨﾌﾞｵｰﾌﾟﾝ要求
JMP MR9006
STG MR9006
MPS
AND MR100                ; ｵｰﾌﾟﾝ成功
SET MR300                ; ｱｸﾃｨﾌﾞOPEN済
CON
AND MR300                ; ｱｸﾃｨﾌﾞOPEN済
JMP MR9008
MPP
AND MR101                ; ｵｰﾌﾟﾝ失敗
JMP MR9007
STG MR9007
SET MR307                ; 外観検査結果送受信失敗
CON
AND MR307                ; 外観検査結果送受信失敗
JMP MR9008
STG MR9008
@FMOV #0 DM300 #15
RES MR100                ; ｵｰﾌﾟﾝ成功
CON
RES MR101                ; ｵｰﾌﾟﾝ失敗
CON
JMP MR9009
STG MR9009
JMP MR9010               ; WF検査結果ﾕﾆｯﾄ指定
STG MR9010               ; WF検査結果ﾕﾆｯﾄ指定
AND MR30003              ; ｿｹｯﾄ0 送信要求４
JMP MR9011
STG MR9011
ANB MR30003              ; ｿｹｯﾄ0 送信要求４
JMP MR9012
STG MR9012
MPS
AND MR108                ; WF検査結果ﾕﾆｯﾄ指定成功
JMP MR9015
MPP
AND MR109                ; WF検査結果ﾕﾆｯﾄ指定失敗
SET MR307                ; 外観検査結果送受信失敗
CON
AND MR307                ; 外観検査結果送受信失敗
JMP MR9013
STG MR9013
JMP MR9014
STG MR9014
JMP MR9015
STG MR9015
@FMOV #0 DM300 #15
@FMOV #0 DM700 #15
RES MR108                ; WF検査結果ﾕﾆｯﾄ指定成功
CON
RES MR109                ; WF検査結果ﾕﾆｯﾄ指定失敗
CON
JMP MR9100               ; WF検査結果受信要求
STG MR9100               ; WF検査結果受信要求
AND R30008               ; ｿｹｯﾄ0 受信要求
JMP MR9101
STG MR9101
ANB R30008               ; ｿｹｯﾄ0 受信要求
JMP MR9102
STG MR9102
MPS
LD MR110                 ; 受信処理成功
AND= DM703 $4F4B
ANL
MPS
AND= DM701 $4F4B
SET MR314                ; 外観検査結果OK
CON
AND MR314                ; 外観検査結果OK
JMP MR9104
MPP
AND= DM701 $4E47
SET MR315                ; 外観検査結果NG
CON
AND MR315                ; 外観検査結果NG
JMP MR9104
MPP
LD MR111                 ; 受信処理失敗
OR= DM703 $4552
OR= DM703 $4E47
ANL
JMP MR9103
STG MR9103
MPS
AND MR111                ; 受信処理失敗
SET MR307                ; 外観検査結果送受信失敗
CON
AND MR307                ; 外観検査結果送受信失敗
SET MR313                ; 外観検査結果送受異常
CON
AND MR313                ; 外観検査結果送受異常
JMP MR9104
MPP
LD= DM703 $4552
OR= DM703 $4E47
ANL
SET MR308                ; 外観検査結果送受信NG
CON
AND MR308                ; 外観検査結果送受信NG
SET MR313                ; 外観検査結果送受異常
CON
AND MR313                ; 外観検査結果送受異常
JMP MR9104
STG MR9104
@FMOV #0 DM300 #15
@FMOV #0 DM700 #15
RES MR110                ; 受信処理成功
CON
RES MR111                ; 受信処理失敗
CON
JMP MR9105               ; ｿｹｯﾄ0 ｸﾛｰｽﾞ要求
STG MR9105               ; ｿｹｯﾄ0 ｸﾛｰｽﾞ要求
AND R30012               ; ｿｹｯﾄ0 ｸﾛｰｽﾞ要求
JMP MR9106
STG MR9106
ANB R30012               ; ｿｹｯﾄ0 ｸﾛｰｽﾞ要求
JMP MR9107
STG MR9107
MPS
AND MR112                ; ｸﾛｰｽﾞ成功
RES MR300                ; ｱｸﾃｨﾌﾞOPEN済
CON
ANB MR300                ; ｱｸﾃｨﾌﾞOPEN済
JMP MR9109
MPP
AND MR113                ; ｸﾛｰｽﾞ失敗
JMP MR9108
STG MR9108
JMP MR9109
STG MR9109
@FMOV #0 DM300 #15
@FMOV #0 DM700 #15
RES MR112                ; ｸﾛｰｽﾞ成功
CON
RES MR113                ; ｸﾛｰｽﾞ失敗
CON
JMP MR9110
STG MR9110
MPS
LDB MR307                ; 外観検査結果送受信失敗
ANB MR308                ; 外観検査結果送受信NG
ANL
JMP MR9115               ; 外観画像検査結果受信完了
MPP
LD MR307                 ; 外観検査結果送受信失敗
OR MR308                 ; 外観検査結果送受信NG
ANL
JMP MR9111
STG MR9111
SET MR315                ; 外観検査結果NG
CON
AND MR315                ; 外観検査結果NG
JMP MR9115               ; 外観画像検査結果受信完了
STG MR9115               ; 外観画像検査結果受信完了
ANB MR9000               ; 外観画像検査結果受信起動
ENDS
LDB MR9000               ; 外観画像検査結果受信起動
ZRES MR9003 MR9115       ; ｱｸﾃｨﾌﾞOPEN済判断  外観画像検査結果受信完了
END
ENDH
