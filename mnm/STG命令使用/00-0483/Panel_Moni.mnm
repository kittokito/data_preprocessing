DEVICE:50
;MODULE:Panel_Moni
;MODULE_TYPE:0
LD CR2008                ; 運転開始  1ｽｷｬﾝだけON
MOV #0 DM3001            ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
LDP T200                 ; 動作中遅延
MOV #0 DM3001            ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
LDB R50004               ;    動作中
ANB R40006               ; 停止中表示
SET R50005               ;   停止中
LD R50004                ;    動作中
RES R50005               ;   停止中
LD R50000                ;    即停止
OR R55000                ;     TRAP
ANB R50004               ;    動作中
OUT R40006               ; 停止中表示
LD R50001                ;   自動中
OUT R40007               ; ﾊﾟﾈﾙ用自動動作中表示
;即停止　で、非常停止画面を表示
;Ｅｍｅｒｇｅｎｃｙ  ｓｃｒｅｅｎ  ｉｓ  ｄｉｓｐｌａｙｅｄ   ａｔ ｔｈｅ  ｔｉｍｅ  ｏｆ  ｃｏｎｔｒｏｌ ｓｔｏｐ.
LD R50000                ;    即停止
MPS
AND LR300                ; 英語表示
@MOV #5 DM3001           ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MRD
AND LR301                ; 日本語表示
@MOV #105 DM3001         ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MPP
AND LR302                ; 中国語表示
@MOV #205 DM3001         ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
;原点復帰完了で、メイン画面に変わる。
;ＭＡＩＮ ｓｃｒｅｅｎ ｉｓ ｄｉｓｐｌａｙｅｄ ａｆｔｅｒ ｒｅｔｕｒｎ ｈｏｍｅ ｐｏｓｉｔｉｏｎ ｆｉｎｉｓｈ
;自動中は、メイン画面にＳＴＡＴＵＳに、自動中表示
;Ｄｉｓｐｌａｙｓ ｏｆ ＡＵＴＯ，ｄｕｒｉｎｇ ａｕｔｏ ｍｏｄｅ ｏｐｅｒａｔｉｏｎ
;異　常
;Ｅｒｒｏｒ
;
LDB R50000               ;    即停止
ANB R55000               ;     TRAP
LD T200                  ; 動作中遅延
OR R49915                ; 　表示用　　 TRAP
ANL
LD R50006                ; 異常発生中
OR R50103                ; 警報ｾｯﾄﾌﾗｸﾞ
OR R55001                ; ｼﾘﾝﾀﾞｰｴﾗｰ
OR R55002                ; Trapしない   異常
OR R49915                ; 　表示用　　 TRAP
ANL
MPS
AND LR300                ; 英語表示
@MOV #10 DM3001          ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MRD
AND LR301                ; 日本語表示
@MOV #110 DM3001         ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MPP
AND LR302                ; 中国語表示
@MOV #210 DM3001         ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
LDP R50003               ; 原点復帰中
ANB R50006               ; 異常発生中
MPS
AND LR300                ; 英語表示
@MOV #2 DM3001           ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MRD
AND LR301                ; 日本語表示
@MOV #102 DM3001         ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MPP
AND LR302                ; 中国語表示
@MOV #202 DM3001         ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
LDB R50000               ;    即停止
ANB R55000               ;     TRAP
AND T200                 ; 動作中遅延
ANB R50006               ; 異常発生中
ANB R50103               ; 警報ｾｯﾄﾌﾗｸﾞ
ANB R55001               ; ｼﾘﾝﾀﾞｰｴﾗｰ
ANB R55002               ; Trapしない   異常
ANB R49915               ; 　表示用　　 TRAP
ANB R50303               ;    ｽｷｰｼﾞ   原点復帰中
ANB R50304               ;   治具部  原点復帰中
MPS
LD R50007                ; 　ｽｷｰｼﾞ　　原点復帰　   完了
AND R50307               ; 　治具部　  原点復帰　　 完了
ANL
MPS
AND LR300                ; 英語表示
@MOV #2 DM3001           ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MRD
AND LR301                ; 日本語表示
@MOV #102 DM3001         ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MPP
AND LR302                ; 中国語表示
@MOV #202 DM3001         ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MPP
LDB R50007               ; 　ｽｷｰｼﾞ　　原点復帰　   完了
ORB R50307               ; 　治具部　  原点復帰　　 完了
ANL
@MOV #0 DM3001           ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
LD R55001                ; ｼﾘﾝﾀﾞｰｴﾗｰ
OUT R50115               ; ｼﾘﾝﾀﾞｰｴﾗｰ  ｳｨﾝﾄﾞｳ表示
;パラメーター選択画面
;Ｐａｒａｍｅｔｅｒ  Ｓｅｌｅｃｔｉｏｎ 
LD R40000                ; SET UP SW
AND R40005               ; SET UP 　　表示許可
MPS
AND LR300                ; 英語表示
@MOV #3 DM3001           ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MRD
AND LR301                ; 日本語表示
@MOV #103 DM3001         ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MPP
AND LR302                ; 中国語表示
@MOV #203 DM3001         ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
LD R50005                ;   停止中
OUT R40005               ; SET UP 　　表示許可
LD R40002                ; SET UP戻SW
MPS
LD R50007                ; 　ｽｷｰｼﾞ　　原点復帰　   完了
AND R50307               ; 　治具部　  原点復帰　　 完了
ANL
MPS
AND LR300                ; 英語表示
@MOV #2 DM3001           ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MRD
AND LR301                ; 日本語表示
@MOV #102 DM3001         ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MPP
AND LR302                ; 中国語表示
@MOV #202 DM3001         ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
MPP
LDB R50007               ; 　ｽｷｰｼﾞ　　原点復帰　   完了
ORB R50307               ; 　治具部　  原点復帰　　 完了
ANL
@MOV #0 DM3001           ; VTﾍﾟｰｼﾞ　　変更ｱﾄﾞﾚｽ
;パネル表示言語選択
;Ｐａｎｅｌ  Ｌａｎｇｕｅｇｅ  Ｓｅｌｅｃｔｉｏｎ
LDB LR301                ; 日本語表示
ANB LR302                ; 中国語表示
ANP T200                 ; 動作中遅延
OR R50208                ; 英語選択 SW
@MOV $0001 LR300         ; 英語表示
LD R50209                ; 日本語選択    SW
@MOV $0002 LR300         ; 英語表示
LD R50210                ; 中国語選択　  SW
@MOV $0004 LR300         ; 英語表示
;エラー
;ＴＲＡＰしないで、異常信号のみ出力
LD R50606                ; Trapしない   異常
OUT R55002               ; Trapしない   異常
LD R55001                ; ｼﾘﾝﾀﾞｰｴﾗｰ
OR R55002                ; Trapしない   異常
OUT R55100               ;   ERROR
END
ENDH
