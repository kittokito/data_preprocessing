DEVICE:53
;MODULE:TEMP_ST
;MODULE_TYPE:1
;Temperature Controller Status
LD= V0 #21               ; 
OR= V0 #22               ; 
OR= V0 #23               ; 
OR= V0 #24               ; 
OR= V0 #25               ; 
AND @CR2008
LDA V0                   ; 
CON
SUB #20
CON
STA TM4
CON
DW #0 TM5
CON
SET @MR000
STG @MR000
JMP @MR001
FMOV #0 DM20258 #30      ; Port2 受信ﾃﾞｰﾀ長
STG @MR001
DW #24 DM20001           ; Port2 送信ﾃﾞｰﾀ長
CON
DW $0230 DM20002         ; Port2 送信ﾃﾞｰﾀ1
CON
DW $3030 DM20004         ; Port2 送信ﾃﾞｰﾀ3
CON
DW $3031 DM20005         ; Port2 送信ﾃﾞｰﾀ4
CON
DW $3031 DM20006         ; Port2 送信ﾃﾞｰﾀ5
CON
DW $4330 DM20007         ; Port2 送信ﾃﾞｰﾀ6
CON
DW $3030 DM20008         ; Port2 送信ﾃﾞｰﾀ7
CON
DW $3031 DM20009         ; Port2 送信ﾃﾞｰﾀ8
CON
DW $3030 DM20010         ; Port2 送信ﾃﾞｰﾀ9
CON
DW $3030 DM20011         ; Port2 送信ﾃﾞｰﾀ10
CON
DW $3031 DM20012         ; Port2 送信ﾃﾞｰﾀ11
CON
INC TM5
CON
JMP @MR002
STG @MR002
MPS
AND= TM5 #1
DW $3130 DM20003         ; Port2 送信ﾃﾞｰﾀ2
CON
DW $0341 DM20013         ; Port2 送信ﾃﾞｰﾀ12
CON
SET R20201               ; Port2 送信要求
CON
JMP @MR003
MRD
AND= TM5 #2
DW $3230 DM20003         ; Port2 送信ﾃﾞｰﾀ2
CON
DW $0342 DM20013         ; Port2 送信ﾃﾞｰﾀ12
CON
SET R20201               ; Port2 送信要求
CON
JMP @MR003
MRD
AND= TM5 #3
DW $3330 DM20003         ; Port2 送信ﾃﾞｰﾀ2
CON
DW $0343 DM20013         ; Port2 送信ﾃﾞｰﾀ12
CON
SET R20201               ; Port2 送信要求
CON
JMP @MR003
MRD
AND= TM5 #4
DW $3430 DM20003         ; Port2 送信ﾃﾞｰﾀ2
CON
DW $0344 DM20013         ; Port2 送信ﾃﾞｰﾀ12
CON
SET R20201               ; Port2 送信要求
CON
JMP @MR003
MPP
AND= TM5 #5
DW $3530 DM20003         ; Port2 送信ﾃﾞｰﾀ2
CON
DW $0345 DM20013         ; Port2 送信ﾃﾞｰﾀ12
CON
SET R20201               ; Port2 送信要求
CON
JMP @MR003
STG @MR003
AND R20101               ; Port2 送信完了
RES R20201               ; Port2 送信要求
CON
JMP @MR004
STG @MR004
MPS
AND R20102               ; Port2 受信ﾃﾞｰﾀ読出要求
SET R20202               ; Port2 受信ﾃﾞｰﾀ読出完了
CON
JMP @MR005
MPP
TMR @0 #10
CON
AND @T0
SET R75001               ; 通信異常
CON
JMP @MR005
STG @MR005
MPS
ANB R75001               ; 通信異常
JMP @MR006
LDA DM20268              ; Port2 受信ﾃﾞｰﾀ10
CON
ANDA $0005
CON
CMP $0005
CON
AND CR2010               ; 演算結果がｾﾞﾛ
MPS
AND= TM5 #1
SET R50301               ; ﾋｰﾀｰ1断線
MRD
AND= TM5 #2
SET R50302               ; ﾋｰﾀｰ2断線
MRD
AND= TM5 #3
SET R50303               ; ﾋｰﾀｰ3断線
MRD
AND= TM5 #4
SET R50304               ; ﾋｰﾀｰ4断線
MPP
AND= TM5 #5
SET R50305               ; 温度ﾃﾞｰﾀ出力
MPP
AND R75001               ; 通信異常
JMP @MR007
STG @MR006
TMR @1 #1
CON
AND @T1
RES R20202               ; Port2 受信ﾃﾞｰﾀ読出完了
CON
MPS
AND<> TM5 TM4
JMP @MR000
MPP
AND= TM5 TM4
JMP @MR007
STG @MR007
SET R20202               ; Port2 受信ﾃﾞｰﾀ読出完了
CON
ANB R20102               ; Port2 受信ﾃﾞｰﾀ読出要求
RES R20202               ; Port2 受信ﾃﾞｰﾀ読出完了
CON
SET R75000               ; 通信実行中
CON
ENDS
LD R50010                ; Emergency　Stop
ZRES @MR000 @MR015
LD R75000                ; 通信実行中
OR R50010                ; Emergency　Stop
MEND
END
ENDH
