DEVICE:53
;MODULE:Group1_Task1
;MODULE_TYPE:0
;SCRIPT_TYPE:
;OneSystem Main-Module
;
;-----------------------------------------
;ModuleName	:	Group1_Task1
;ModuleType	:	Main Module
;Line		:	
;Cell		:	
;Function	:	
;-----------------------------------------
;<<Task LocalDevice>>
;/*項目			/*割付ｴﾘｱ				/*備考
;---------------------------------------------------------------------			
;Emergency		@MR000〜@MR015			Emergency処理時RESET禁止ｴﾘｱ
;Free			@MR100〜@MR915			ﾕｰｻﾞｰﾌﾘｰｴﾘｱ
;HOME			@MR1000〜@MR1515		HOME動作時使用ｴﾘｱ
;MAINTENANCE		@MR2000〜@MR2915		MAINTE動作時使用ｴﾘｱ
;AUTO(Main1)		@MR3000〜@MR3915		AUTO(Main1)動作時使用ｴﾘｱ
;	(Main2)		@MR4000〜@MR4915		AUTO(Main2)動作時使用ｴﾘｱ
;SubRoutine		@MR4500〜@MR6415		ｻﾌﾞﾙｰﾁﾝ共通動作使用ｴﾘｱ
;----------------------------------------------------------------------
;<h1/>Device_Init/ﾃﾞﾊﾞｲｽ初期化
;[内容]
;・非常停止、優先ｴﾗｰ発生時に初期化したいﾃﾞﾊﾞｲｽを指定して下さい
;※本Taskで使用するﾛｰｶﾙﾃﾞﾊﾞｲｽなど
;※STG〜JMPにて使用しているﾃﾞﾊﾞｲｽは必須
LDP R46104               ; _非常停止中　ﾓｰﾄﾞﾌﾗｸﾞ
RES MR9900               ; 洗浄ﾜｰｸｾｯﾄ部4ｹ無し
CON
ZRES @MR100 @MR6415      ; Task1 ERROR
;<h1/>Task_Monitor/ﾀｽｸﾓﾆﾀｰ
LD CR2002                ; 常時ON
FLIK #50 #50 @MR000
LD= DM60000 #1           ; TaskNo /ERROR_DISP
AND R46208               ; _Group1　ｴﾗｰ発生中
OUT @MR001               ; TASK1 ERROR
;ON STG Main1
;TYPE EM608.U,EM609.U,@MR000.U,@MR3000.U
;
;FOR EM608 = EM608 TO 160 STEP 16
;	IF @MR3000:EM608 <> 0 THEN
;		BREAK
;	END IF	
;NEXT
;	
;IF EM608 < 160 THEN
;	EM609 = (EM608 / 16) * 100 + DMX(@MR3000:EM608) + #3000
;END IF		
;		
;EM608 = EM608 + 16		
;IF EM608 > 160 THEN		
;	EM608 = 0		
;END IF
LDP @MR000
NCJ #1000
;TYPE EM608.U,EM609.U,@MR000.U,@MR3000.U
;
;FOR EM608 = EM608 TO 160 STEP 16
;
LD CR2002                ; 常時ON
MOV EM608 EM608          ; Task1 Main1@MR  Task1 Main1@MR
LABEL #2000
LD> EM608 #160           ; Task1 Main1@MR
CJ #2001
;	IF @MR3000:EM608 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM608                ; Task1 Main1@MR
CON
EXT
CON
STA.L Z12
LD<> @MR3000:Z12 #0      ; AUTO Main1
NCJ #2002
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2003
;	END IF	
;
LABEL #2002
;NEXT
;
LD CR2002                ; 常時ON
LDA EM608                ; Task1 Main1@MR
CON
ADD #16
CON
STA EM608                ; Task1 Main1@MR
LDB CR2009               ; 演算結果が負
CJ #2000
LABEL #2003
LABEL #2001
;IF EM608 < 160 THEN
;
LD< EM608 #160           ; Task1 Main1@MR
NCJ #2004
;	EM609 = (EM608 / 16) * 100 + DMX(@MR3000:EM608) + #3000
;
LD CR2002                ; 常時ON
LDA EM608                ; Task1 Main1@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR3000:Z12          ; AUTO Main1
CON
DMX
CON
STA @VM0
CON
LDA EM608                ; Task1 Main1@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM1
CON
LDA @VM0
CON
EXT
CON
ADD.L @VM1
CON
ADD.L +3000
CON
STA EM609                ; Task1 Main1@MR
;END IF		
;
LABEL #2004
;EM608 = EM608 + 16		
;
LD CR2002                ; 常時ON
LDA EM608                ; Task1 Main1@MR
CON
EXT
CON
ADD.L +16
CON
STA EM608                ; Task1 Main1@MR
;IF EM608 > 160 THEN		
;
LD> EM608 #160           ; Task1 Main1@MR
NCJ #2005
;	EM608 = 0		
;
LD CR2002                ; 常時ON
MOV #0 EM608             ; Task1 Main1@MR
;END IF
LABEL #2005
LABEL #1000
;
;ON STG Main2
;TYPE EM610.U,EM611.U,@MR4000.U
;
;FOR EM610 = EM610 TO 80 STEP 16
;	IF @MR4000:EM610 <> 0 THEN
;		BREAK
;	END IF	
;NEXT	
;
;IF EM610 < 80 THEN
;	EM611 = (EM610 / 16) * 100 + DMX(@MR4000:EM610) + #4000
;END IF
;
;EM610 = EM610 + 16		
;
;IF EM610 > 80 THEN
;	EM610 = 0	
;END IF
LDP @MR000
NCJ #1001
;TYPE EM610.U,EM611.U,@MR4000.U
;
;FOR EM610 = EM610 TO 80 STEP 16
;
LD CR2002                ; 常時ON
MOV EM610 EM610          ; Task1 Main2@MR  Task1 Main2@MR
LABEL #2006
LD> EM610 #80            ; Task1 Main2@MR
CJ #2007
;	IF @MR4000:EM610 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM610                ; Task1 Main2@MR
CON
EXT
CON
STA.L Z12
LD<> @MR4000:Z12 #0      ; AUTO Main2
NCJ #2008
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2009
;	END IF	
;
LABEL #2008
;NEXT	
;
LD CR2002                ; 常時ON
LDA EM610                ; Task1 Main2@MR
CON
ADD #16
CON
STA EM610                ; Task1 Main2@MR
LDB CR2009               ; 演算結果が負
CJ #2006
LABEL #2009
LABEL #2007
;IF EM610 < 80 THEN
;
LD< EM610 #80            ; Task1 Main2@MR
NCJ #2010
;	EM611 = (EM610 / 16) * 100 + DMX(@MR4000:EM610) + #4000
;
LD CR2002                ; 常時ON
LDA EM610                ; Task1 Main2@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR4000:Z12          ; AUTO Main2
CON
DMX
CON
STA @VM3
CON
LDA EM610                ; Task1 Main2@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM4
CON
LDA @VM3
CON
EXT
CON
ADD.L @VM4
CON
ADD.L +4000
CON
STA EM611                ; Task1 Main2@MR
;END IF
;
LABEL #2010
;EM610 = EM610 + 16		
;
LD CR2002                ; 常時ON
LDA EM610                ; Task1 Main2@MR
CON
EXT
CON
ADD.L +16
CON
STA EM610                ; Task1 Main2@MR
;IF EM610 > 80 THEN
;
LD> EM610 #80            ; Task1 Main2@MR
NCJ #2011
;	EM610 = 0	
;
LD CR2002                ; 常時ON
MOV #0 EM610             ; Task1 Main2@MR
;END IF
LABEL #2011
LABEL #1001
;
;ON STG SubRoutine
;TYPE EM612.U,EM613.U,@MR4500.U
;	
;FOR EM612 = EM612 TO 320 STEP 16
;	IF @MR4500:EM612 <> 0 THEN
;		BREAK
;	END IF	
;NEXT
;		
;IF EM612 < 320 THEN
;	EM613 = (EM612 / 16) * 100 + DMX(@MR4500:EM612) + #4500
;END IF
;		
;EM612 = EM612 + 16	
;
;IF EM612 > 320 THEN
;   EM612 = 0	
;END IF
LDP @MR000
NCJ #1002
;TYPE EM612.U,EM613.U,@MR4500.U
;
;FOR EM612 = EM612 TO 320 STEP 16
;
LD CR2002                ; 常時ON
MOV EM612 EM612          ; Task1 Sub@MR  Task1 Sub@MR
LABEL #2012
LD> EM612 #320           ; Task1 Sub@MR
CJ #2013
;	IF @MR4500:EM612 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM612                ; Task1 Sub@MR
CON
EXT
CON
STA.L Z12
LD<> @MR4500:Z12 #0      ; RB1 動作指令 Sub Start
NCJ #2014
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2015
;	END IF	
;
LABEL #2014
;NEXT
;
LD CR2002                ; 常時ON
LDA EM612                ; Task1 Sub@MR
CON
ADD #16
CON
STA EM612                ; Task1 Sub@MR
LDB CR2009               ; 演算結果が負
CJ #2012
LABEL #2015
LABEL #2013
;IF EM612 < 320 THEN
;
LD< EM612 #320           ; Task1 Sub@MR
NCJ #2016
;	EM613 = (EM612 / 16) * 100 + DMX(@MR4500:EM612) + #4500
;
LD CR2002                ; 常時ON
LDA EM612                ; Task1 Sub@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR4500:Z12          ; RB1 動作指令 Sub Start
CON
DMX
CON
STA @VM6
CON
LDA EM612                ; Task1 Sub@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM7
CON
LDA @VM6
CON
EXT
CON
ADD.L @VM7
CON
ADD.L +4500
CON
STA EM613                ; Task1 Sub@MR
;END IF
;
LABEL #2016
;EM612 = EM612 + 16	
;
LD CR2002                ; 常時ON
LDA EM612                ; Task1 Sub@MR
CON
EXT
CON
ADD.L +16
CON
STA EM612                ; Task1 Sub@MR
;IF EM612 > 320 THEN
;
LD> EM612 #320           ; Task1 Sub@MR
NCJ #2017
;   EM612 = 0	
;
LD CR2002                ; 常時ON
MOV #0 EM612             ; Task1 Sub@MR
;END IF
LABEL #2017
LABEL #1002
;
;<h1/>Task_Init/ﾀｽｸ初期化
;[本STG内容]
;・本Task起動時に必要な初期化処理を記述して下さい
;・起動Taskの全Init処理終了後、Task_StartのSTGが起動します
STG LR801                ; _Grp1_Task1_Init.STG
ENDS
;<h1/>Task_Start/ﾀｽｸ開始
;[本STG内容]
;・Task起動後、以下運転ﾓｰﾄﾞに従い、各STGにJMPします
;【HOME】	→	LR5200
;【AUTO】	→	LR5400
;【MAINTE】	→	LR5600
;・本STGは追記、修正不要です
STG LR401                ; _Grp1_Task1_Start.STG
MPS
AND R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5201               ; _Grp1_Task1_HOME.STG
MRD
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5401               ; _Grp1_Task1_AUTO.STG
MPP
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5601               ; _Grp1_Task1_MAINTE.STG
;<h1/>Task_Finish/ﾀｽｸ終了
;[本STG内容]
;・各Taskの終了STGになります
;・運転ﾓｰﾄﾞに係わらず終了時は本STGを経由して終了して下さい
;・本STGは追記、修正不要です
STG LR601                ; _Grp1_Task1_Fin.STG
RES R41001               ; _Grp1_Task1_起動中ﾌﾗｸﾞ
CON
ENDS
;<h1/>HOME/原点復帰
;[本STG内容]
;・STG @MR1000の続きから各Taskの原点復帰動作を記述する
;・動作終了時は@MR1515にJMPする事
STG LR5201               ; _Grp1_Task1_HOME.STG
RES MR9901               ; 洗浄機原点復帰可
CON
RES R35011               ; RB1 動作正常終了
CON
JMP @MR1000              ; HOME
STG @MR1000              ; HOME
AND DM10501.8            ; RB1 RB_READY
ANB DM10501.9            ; RB1 RB_BUSY
ANB @MR1002              ; HOME中
ANB DM10501.11           ; RB1 Ctr_READY
AND DM10501.8            ; RB1 RB_READY
RES MR101                ; TASK1 原点復帰完了
CON
SET @MR1002              ; HOME中
CON
JMP @MR1003
;<h1/> RB1 初期設定
STG @MR1003
ANB @MR4700              ; RB初期設定 Sub Start
ANB @MR4701              ; RB初期設定 Sub END
ANB @MR4702              ; RB初期設定 Sub中
SET @MR4700              ; RB初期設定 Sub Start
CON
JMP @MR1004
STG @MR1004
ANB @MR4700              ; RB初期設定 Sub Start
AND @MR4701              ; RB初期設定 Sub END
ANB @MR4702              ; RB初期設定 Sub中
RES @MR4701              ; RB初期設定 Sub END
CON
JMP @MR1200
;<h1/> RB1 ﾊﾝﾄﾞ上昇
STG @MR1100
ANB @MR4500              ; RB1 動作指令 Sub Start
ANB @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
DW #53 EM1000            ; RB1 動作ｺﾏﾝﾄ
CON
DW #3 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR1101
STG @MR1101
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
MPS
ANB @MR4503              ; RB1 動作指令 Sub HOLD End
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR1200
MPP
AND @MR4503              ; RB1 動作指令 Sub HOLD End
MCALL MODE_INDI #2
RES @MR4501              ; RB1 動作指令 Sub End
CON
RES @MR4503              ; RB1 動作指令 Sub HOLD End
CON
JMP @MR1800
;<h1/> RB1 原点位置移動
STG @MR1200
ANB @MR4500              ; RB1 動作指令 Sub Start
ANB @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
DW #5 EM1000             ; RB1 動作ｺﾏﾝﾄ
CON
DW #0 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR1201
STG @MR1201
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
MPS
ANB @MR4503              ; RB1 動作指令 Sub HOLD End
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR1400
MPP
AND @MR4503              ; RB1 動作指令 Sub HOLD End
MCALL MODE_INDI #2
RES @MR4501              ; RB1 動作指令 Sub End
CON
RES @MR4503              ; RB1 動作指令 Sub HOLD End
CON
JMP @MR1800
;<h1/> RB1 ﾊﾝﾄﾞｽﾃｰﾀｽ確認
STG @MR1300
ANB R35000               ; RB1 MOVE
ANB R35001               ; RB1 MOVE END
ANB R35002               ; During RB1 MOVE 
DW #10 EM1000            ; RB1 動作ｺﾏﾝﾄ
CON
DW #0 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET R35000               ; RB1 MOVE
CON
JMP @MR1301
;動作ｽﾃｰﾀｽ  Bit0  吸着  0:Off  1:On
;動作ｽﾃｰﾀｽ  Bit1  ﾁｬｯｸ上下  0:Up  1:Down
;動作ｽﾃｰﾀｽ  Bit2  吸着ｾﾝｻ 吸着(OUT1)吸着確認  0:Off  1:On
;動作ｽﾃｰﾀｽ  Bit3  吸着ｾﾝｻ 吸着(OUT2)破壊確認  0:Off  1:On
STG @MR1301
AND R35001               ; RB1 MOVE END
DW #0 EM1005             ; RB1 動作ｽﾃｰﾀｽ1
CON
RES R35001               ; RB1 MOVE END
CON
JMP @MR1400
;<h1/> RB1 ﾜｰｸ回収動作
STG @MR1400
ANB @MR4500              ; RB1 動作指令 Sub Start
ANB @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
DW #128 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #0 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR1401
STG @MR1401
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
MPS
ANB @MR4503              ; RB1 動作指令 Sub HOLD End
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR1600
MPP
AND @MR4503              ; RB1 動作指令 Sub HOLD End
MCALL MODE_INDI #2
RES @MR4501              ; RB1 動作指令 Sub End
CON
RES @MR4503              ; RB1 動作指令 Sub HOLD End
CON
JMP @MR1800
;<h1/> RB1 待機位置移動
STG @MR1600
ANB @MR4500              ; RB1 動作指令 Sub Start
ANB @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
DW #130 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #0 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR1601
STG @MR1601
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
MPS
ANB @MR4503              ; RB1 動作指令 Sub HOLD End
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR1700
MPP
AND @MR4503              ; RB1 動作指令 Sub HOLD End
MCALL MODE_INDI #2
RES @MR4501              ; RB1 動作指令 Sub End
CON
RES @MR4503              ; RB1 動作指令 Sub HOLD End
CON
JMP @MR1800
;<h1/> 仮置き台上昇
STG @MR1700
AND B2087                ; 洗浄機よりﾀｯﾁﾊﾟﾈﾙ　ﾒｲﾝ画面
LD MR9901                ; 洗浄機原点復帰可
OR CR2002                ; 常時ON
ANL
SET B207A                ; 洗浄機へ原点復帰要求
CON
LD B208C                 ; 洗浄機よりｽﾃｰﾀｽ(HOME)
OR CR2002                ; 常時ON
ANL
JMP @MR1701
STG @MR1701
AND MR3200               ; LD反転 仮置台 上昇IL
RES MR2001               ; LD反転 仮置き台 下降
CON
SET MR2000               ; LD反転 仮置き台 上昇
CON
AND B20B2                ; 洗浄機より LD反転 仮置台 上昇限
ANB B20B3                ; 洗浄機より LD反転 仮置台 下降限
ANB MR4000               ; LD反転 仮置台 上昇限Err
ANB MR4001               ; LD反転 仮置台 下降限Err
JMP @MR1702
STG @MR1702
MPS
LDB B20B0                ; 洗浄機より LD反転 仮置台 在荷1
ANB B20B1                ; 洗浄機より LD反転 仮置台 在荷2
ANL
JMP @MR1703
MRD
AND B20B0                ; 洗浄機より LD反転 仮置台 在荷1
MCALL MODE_INDI #2
DW #4100 DM60009         ; Sensor ERROR No.
CON
SET MR4102               ; LD仮置台 在荷有異常
CON
RES @MR1002              ; HOME中
CON
JMP @MR1800
MPP
AND B20B1                ; 洗浄機より LD反転 仮置台 在荷2
MCALL MODE_INDI #2
DW #4101 DM60009         ; Sensor ERROR No.
CON
SET MR4102               ; LD仮置台 在荷有異常
CON
RES @MR1002              ; HOME中
CON
JMP @MR1800
STG @MR1703
TMR #300 #5              ; ｳｪｲﾄﾀｲﾏ
CON
AND T300                 ; ｳｪｲﾄﾀｲﾏ
ANB B208C                ; 洗浄機よりｽﾃｰﾀｽ(HOME)
AND B2088                ; 洗浄機より洗浄機原点復帰完了
RES B207A                ; 洗浄機へ原点復帰要求
CON
JMP @MR1800
;<h1/>ワーク確認
STG @MR1800
MPS
LDB DM30000.0
ANB DM30000.1
LD DM30000.0
AND DM30000.1
ORL
ANL
JMP @MR1808
MPP
LD DM30000.0
ANB DM30000.1
LDB DM30000.0
AND DM30000.1
ORL
ANL
JMP @MR1801
STG @MR1801
SET MR14007              ; ﾜｰｸ有無記憶ﾘｾｯﾄ1
CON
JMP @MR1808
STG @MR1808
MPS
LDB DM30001.0
ANB DM30001.1
LD DM30001.0
AND DM30001.1
ORL
ANL
JMP @MR1515              ; HOME END
MPP
LD DM30001.0
ANB DM30001.1
LDB DM30001.0
AND DM30001.1
ORL
ANL
JMP @MR1809
STG @MR1809
SET MR14008              ; ﾜｰｸ有無記憶ﾘｾｯﾄ2
CON
JMP @MR1515              ; HOME END
;<h1/> RB1 原点復帰終了処理
STG @MR1515              ; HOME END
ANB @MR001               ; TASK1 ERROR
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
ANL
RES MR1000               ; ﾊﾝﾄﾞ1ﾜｰｸ有り
CON
RES MR1001               ; ﾊﾝﾄﾞ2ﾜｰｸ有り
CON
SET MR101                ; TASK1 原点復帰完了
CON
RES MR9901               ; 洗浄機原点復帰可
CON
RES @MR1002              ; HOME中
CON
JMP LR601                ; _Grp1_Task1_Fin.STG
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
;<h1/>AUTO/自動動作
STG LR5401               ; _Grp1_Task1_AUTO.STG
RES MR1000               ; ﾊﾝﾄﾞ1ﾜｰｸ有り
CON
RES MR1001               ; ﾊﾝﾄﾞ2ﾜｰｸ有り
CON
RES MR14000              ; 終了処理
CON
RES B207F                ; 洗浄機へ通知
CON
JMP @MR3000              ; AUTO Main1
;<h1/>Auto-Main1/Autoﾒｲﾝﾙｰﾁﾝ1
;[本STG内容]
;・各TaskのAUTO動作を記述して下さい
;・動作ﾓｰﾄﾞは「AUTOAC」に格納されています(1〜32)
;・@MR3000:AUTO_Main1開始、@MR3001:AUTO_Main1完了、@MR3002:AUTO_Main1動作中
STG @MR3000              ; AUTO Main1
JMP @MR3001              ; 洗浄機確認
;<h1/>洗浄機状態確認
STG @MR3001              ; 洗浄機確認
MPS
AND B2097                ; 元真空圧確認
JMP @MR3010
MPP
ANB B2097                ; 元真空圧確認
RES MR9902               ; 洗浄機動作OK
CON
JMP @MR3008
STG @MR3008
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #5000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #7 @DM1               ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task1 ERROR
CON
JMP @MR3009
STG @MR3009
AND @MR101               ; Task1 ERROR_End
RES @MR101               ; Task1 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
SET R46107               ; _定停止要求
CON
JMP @MR3915              ; ﾀｽｸ終了
STG @MR3010
MPS
AND B20BD                ; 洗浄機より自動運転可
SET MR9902               ; 洗浄機動作OK
CON
SET @MR3002              ; AUTO Main1 Busy
CON
JMP @MR3003              ; RB1 初期設定
MPP
ANB B20BD                ; 洗浄機より自動運転可
SET B207F                ; 洗浄機へ通知
CON
RES MR9902               ; 洗浄機動作OK
CON
JMP @MR3011
STG @MR3011
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #5000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #80 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task1 ERROR
CON
JMP @MR3012
STG @MR3012
AND @MR101               ; Task1 ERROR_End
RES @MR101               ; Task1 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
SET R46107               ; _定停止要求
CON
RES B207F                ; 洗浄機へ通知
CON
JMP @MR3915              ; ﾀｽｸ終了
;<h1/> RB1 初期設定実行
STG @MR3003              ; RB1 初期設定
ANB @MR4700              ; RB初期設定 Sub Start
ANB @MR4701              ; RB初期設定 Sub END
ANB @MR4702              ; RB初期設定 Sub中
SET @MR4700              ; RB初期設定 Sub Start
CON
JMP @MR3004
STG @MR3004
ANB @MR4700              ; RB初期設定 Sub Start
AND @MR4701              ; RB初期設定 Sub END
ANB @MR4702              ; RB初期設定 Sub中
RES @MR4701              ; RB初期設定 Sub END
CON
JMP @MR3005
STG @MR3005
MPS
LD= DM35102 #0           ; RB1 洗浄ﾗｲﾝ
OR>= DM35102 #3          ; RB1 洗浄ﾗｲﾝ
ANL
MOV #1 DM35102           ; RB1 洗浄ﾗｲﾝ
MRD
LD= DM35104 #0           ; RB1 洗浄治具
OR>= DM35104 #3          ; RB1 洗浄治具
ANL
MOV #1 DM35104           ; RB1 洗浄治具
MRD
LD= DM35100 #0           ; RB1 ﾜｰｸ取出位置
OR>= DM35100 DM35050     ; RB1 ﾜｰｸ取出位置  ﾊﾟﾚｯﾄ収納個数
ANL
MOV #1 DM35100           ; RB1 ﾜｰｸ取出位置
MPP
JMP @MR3006
;実行中STG確認
STG @MR3006
MPS
LD=.L @MR3100 +0         ; RB1ﾊﾝﾄﾞ1 ﾜｰｸ取出1 (検出)
AND=.L @MR3300 +0
AND=.L @MR3500 +0        ; 洗浄機 投入後H/S
AND=.L @MR3700 +0        ; LD ﾄﾚｰﾁｪﾝｼﾞ
ANL
RES B207D
CON
RES B207E
CON
JMP @MR3007              ; 洗浄ﾗｲﾝ1 在荷照合
MPP
LD<>.L @MR3100 +0        ; RB1ﾊﾝﾄﾞ1 ﾜｰｸ取出1 (検出)
OR<>.L @MR3300 +0
OR<>.L @MR3500 +0        ; 洗浄機 投入後H/S
OR<>.L @MR3700 +0        ; LD ﾄﾚｰﾁｪﾝｼﾞ
ANL
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
AND R46106               ; _定停止移行中
ANL
JMP @MR3915              ; ﾀｽｸ終了
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
;<h1/> RB1 洗浄治具ワーク検出
STG @MR3007              ; 洗浄ﾗｲﾝ1 在荷照合
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
ANB @MR4500              ; RB1 動作指令 Sub Start
ANB @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
ANL
DW #176 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #5 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR3305
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3305
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
MPS
ANB @MR4503              ; RB1 動作指令 Sub HOLD End
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR3306              ; 洗浄ﾗｲﾝ1 在荷照合 確認
MPP
AND @MR4503              ; RB1 動作指令 Sub HOLD End
RES @MR4501              ; RB1 動作指令 Sub End
CON
RES @MR4503              ; RB1 動作指令 Sub HOLD End
CON
JMP @MR3914              ; 処理中中断
STG @MR3306              ; 洗浄ﾗｲﾝ1 在荷照合 確認
MPS
LDB DM30000.0
ANB DM30000.1
AND= DM36014 #0          ; RB1 動作終了 ｽﾃｰﾀｽ2表示
ANL
RES B207D
CON
SET @MR3307              ; 洗浄ﾗｲﾝ1 在荷照合OK
MRD
LD DM30000.0
ANB DM30000.1
AND= DM36014 #5          ; RB1 動作終了 ｽﾃｰﾀｽ2表示
ANL
SET B207D
CON
SET @MR3307              ; 洗浄ﾗｲﾝ1 在荷照合OK
MRD
AND @MR3307              ; 洗浄ﾗｲﾝ1 在荷照合OK
TMR #700 #2
CON
AND T700
RES B207D
CON
JMP @MR3308              ; 洗浄ﾗｲﾝ2 在荷照合
MPP
ANB @MR3307              ; 洗浄ﾗｲﾝ1 在荷照合OK
JMP @MR3314              ; 洗浄ﾗｲﾝ1 在荷照合 異常
STG @MR3308              ; 洗浄ﾗｲﾝ2 在荷照合
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
ANB @MR4500              ; RB1 動作指令 Sub Start
ANB @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
ANL
DW #177 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #5 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
RES @MR3307              ; 洗浄ﾗｲﾝ1 在荷照合OK
CON
JMP @MR3309
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3309
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
MPS
ANB @MR4503              ; RB1 動作指令 Sub HOLD End
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR3310              ; 洗浄ﾗｲﾝ2 在荷照合 確認
MPP
AND @MR4503              ; RB1 動作指令 Sub HOLD End
RES @MR4501              ; RB1 動作指令 Sub End
CON
RES @MR4503              ; RB1 動作指令 Sub HOLD End
CON
JMP @MR3914              ; 処理中中断
STG @MR3310              ; 洗浄ﾗｲﾝ2 在荷照合 確認
MPS
LDB DM30001.0
ANB DM30001.1
AND= DM36014 #0          ; RB1 動作終了 ｽﾃｰﾀｽ2表示
ANL
RES B207E
CON
SET @MR3311              ; 洗浄ﾗｲﾝ2 在荷照合OK
MRD
LD DM30001.0
ANB DM30001.1
AND= DM36014 #5          ; RB1 動作終了 ｽﾃｰﾀｽ2表示
ANL
SET B207E
CON
SET @MR3311              ; 洗浄ﾗｲﾝ2 在荷照合OK
MRD
AND @MR3311              ; 洗浄ﾗｲﾝ2 在荷照合OK
TMR #701 #2
CON
AND T701
RES B207E
CON
JMP @MR3312              ; 洗浄ﾗｲﾝ 在荷照合 完了
MPP
ANB @MR3311              ; 洗浄ﾗｲﾝ2 在荷照合OK
JMP @MR3314              ; 洗浄ﾗｲﾝ1 在荷照合 異常
STG @MR3314              ; 洗浄ﾗｲﾝ1 在荷照合 異常
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #5000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #70 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task1 ERROR
CON
JMP @MR3315
STG @MR3315
AND @MR101               ; Task1 ERROR_End
RES @MR101               ; Task1 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
SET MR14000              ; 終了処理
CON
SET R46107               ; _定停止要求
CON
JMP @MR3605              ; 待機位置 移動
STG @MR3312              ; 洗浄ﾗｲﾝ 在荷照合 完了
MPS
ANB R46106               ; _定停止移行中
SET MR3900               ; 洗浄機へ 自動運転
CON
RES @MR3311              ; 洗浄ﾗｲﾝ2 在荷照合OK
CON
JMP @MR3015              ; Auto Loop先頭
MPP
AND R46106               ; _定停止移行中
RES @MR3311              ; 洗浄ﾗｲﾝ2 在荷照合OK
CON
JMP @MR3605              ; 待機位置 移動
LDB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
RES MR3900               ; 洗浄機へ 自動運転
;<h1/> RB1 Auto Loop先頭　LD投入ﾁｪｯｸ
STG @MR3015              ; Auto Loop先頭
MPS
LDB R46106               ; _定停止移行中
LDB R46106               ; _定停止移行中
LD @MR3910               ; 払出停止 ﾜｰｸ投入要求
OR<> DM35104 #1          ; RB1 洗浄治具
ANL
ORL
LD R46106                ; _定停止移行中
AND= DM35104 #2          ; RB1 洗浄治具
ORL
ANL
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
LD B2010                 ; LDより PLC電源状態
AND B2011                ; LDより 非常停止
ANB B201E                ; LDより定停止移行中又はﾎﾟｰｽﾞ
AND B2012                ; LDより ｲﾝﾀｰﾛｯｸ信号
AND B2013                ; LDより 取出可
OR MR9013                ; LDなし
ANL
ANB @MR4000              ; AUTO Main2
ANB @MR4001              ; Main2 END
ANB @MR4002              ; Main2 Busy
AND<= DM35100 DM35050    ; RB1 ﾜｰｸ取出位置  ﾊﾟﾚｯﾄ収納個数
ANB R35015               ; RB1 中断受付
ANL
SET @MR3203              ; LD仮置き台下降要求
CON
JMP @MR3100              ; RB1ﾊﾝﾄﾞ1 ﾜｰｸ取出1 (検出)
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
MRD
AND R46106               ; _定停止移行中
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
ANL
MPS
LDB MR14000              ; 終了処理
AND= DM35104 #1          ; RB1 洗浄治具
ANL
RES MR9900               ; 洗浄ﾜｰｸｾｯﾄ部4ｹ無し
CON
JMP @MR3915              ; ﾀｽｸ終了
MPP
AND MR14000              ; 終了処理
RES MR9900               ; 洗浄ﾜｰｸｾｯﾄ部4ｹ無し
CON
JMP @MR3915              ; ﾀｽｸ終了
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
MPP
AND R35015               ; RB1 中断受付
MCALL MODE_INDI #2
RES R35015               ; RB1 中断受付
CON
JMP @MR3915              ; ﾀｽｸ終了
STG @MR3101
DW #1 DM35100            ; RB1 ﾜｰｸ取出位置
CON
SET MR9900               ; 洗浄ﾜｰｸｾｯﾄ部4ｹ無し
CON
SET @MR3203              ; LD仮置き台下降要求
CON
JMP @MR3100              ; RB1ﾊﾝﾄﾞ1 ﾜｰｸ取出1 (検出)
;<h1/> RB1　ﾊﾝﾄﾞ1　ﾜｰｸ取出動作1(検出)
STG @MR3100              ; RB1ﾊﾝﾄﾞ1 ﾜｰｸ取出1 (検出)
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
ANB @MR4500              ; RB1 動作指令 Sub Start
ANB @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
ANL
MPS
LDB R46106               ; _定停止移行中
OR= DM35104 #2           ; RB1 洗浄治具
ANB B201E                ; LDより定停止移行中又はﾎﾟｰｽﾞ
AND B201B                ; LDより ｽﾃｰﾀｽ(AUTO)
AND MR3000               ; RB1 ﾄﾚﾁｪﾝ進入IL
AND B2012                ; LDより ｲﾝﾀｰﾛｯｸ信号
AND B2013                ; LDより 取出可
ANL
RES R47003               ; _処理時間4計測開始
CON
SET R47103               ; _処理時間4取得
CON
DW #100 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
LDA DM35100              ; RB1 ﾜｰｸ取出位置
CON
STA EM1001               ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR3102
MPP
LD R46106                ; _定停止移行中
AND<> DM35104 #2         ; RB1 洗浄治具
ANL
JMP @MR3605              ; 待機位置 移動
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3102
ANB R47103               ; _処理時間4取得
SET R47003               ; _処理時間4計測開始
CON
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
MPS
ANB @MR4503              ; RB1 動作指令 Sub HOLD End
MPS
AND= EM1005 #4           ; RB1 動作ｽﾃｰﾀｽ1
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR3103              ; RB1ﾊﾝﾄﾞ1 ﾜｰｸ取出2 (取出)
MPP
AND= EM1005 #3           ; RB1 動作ｽﾃｰﾀｽ1
JMP @MR3104
MPP
AND @MR4503              ; RB1 動作指令 Sub HOLD End
RES @MR4501              ; RB1 動作指令 Sub End
CON
RES @MR4503              ; RB1 動作指令 Sub HOLD End
CON
JMP @MR3914              ; 処理中中断
LD B2091                 ; 洗浄給材 ﾗｲﾝ1より  動作開始 許可
AND<> DM35104 #1         ; RB1 洗浄治具
LD B2099                 ; 洗浄給材 ﾗｲﾝ2より  動作開始 許可
AND<> DM35204 #1         ; RB2 洗浄治具
ORL
OUT MR20010              ; 動作許可ﾌﾗｸﾞ
STG @MR3104
MPS
AND MR20010              ; 動作許可ﾌﾗｸﾞ
TMR #880 #2
CON
AND T880
@INC DM35100             ; RB1 ﾜｰｸ取出位置
CON
MPS
AND<= DM35100 DM35050    ; RB1 ﾜｰｸ取出位置  ﾊﾟﾚｯﾄ収納個数
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR3100              ; RB1ﾊﾝﾄﾞ1 ﾜｰｸ取出1 (検出)
MPP
AND> DM35100 DM35050     ; RB1 ﾜｰｸ取出位置  ﾊﾟﾚｯﾄ収納個数
MPS
ANB LR15000              ; ﾄﾚﾁｪﾝ時 Z軸上昇動作
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR3700              ; LD ﾄﾚｰﾁｪﾝｼﾞ
MPP
AND LR15000              ; ﾄﾚﾁｪﾝ時 Z軸上昇動作
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR3508
MPP
ANB MR20010              ; 動作許可ﾌﾗｸﾞ
MPS
ANB R46106               ; _定停止移行中
@INC DM35100             ; RB1 ﾜｰｸ取出位置
CON
MPS
AND<= DM35100 DM35050    ; RB1 ﾜｰｸ取出位置  ﾊﾟﾚｯﾄ収納個数
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR3100              ; RB1ﾊﾝﾄﾞ1 ﾜｰｸ取出1 (検出)
MPP
AND> DM35100 DM35050     ; RB1 ﾜｰｸ取出位置  ﾊﾟﾚｯﾄ収納個数
MPS
ANB LR15000              ; ﾄﾚﾁｪﾝ時 Z軸上昇動作
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR3700              ; LD ﾄﾚｰﾁｪﾝｼﾞ
MPP
AND LR15000              ; ﾄﾚﾁｪﾝ時 Z軸上昇動作
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR3508
MPP
AND R46106               ; _定停止移行中
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR3605              ; 待機位置 移動
STG @MR3508
ANB @MR4500              ; RB1 動作指令 Sub Start
ANB @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
DW #119 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #0 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR3509
STG @MR3509
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR3700              ; LD ﾄﾚｰﾁｪﾝｼﾞ
STG @MR3700              ; LD ﾄﾚｰﾁｪﾝｼﾞ
ANB @MR4000              ; AUTO Main2
ANB @MR4001              ; Main2 END
ANB @MR4002              ; Main2 Busy
SET @MR4000              ; AUTO Main2
CON
JMP @MR3701
STG @MR3701
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
ANB @MR4000              ; AUTO Main2
AND @MR4001              ; Main2 END
ANB @MR4002              ; Main2 Busy
ANL
RES @MR4001              ; Main2 END
CON
JMP @MR3100              ; RB1ﾊﾝﾄﾞ1 ﾜｰｸ取出1 (検出)
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
;<h1/> RB1　ﾊﾝﾄﾞ1　ﾜｰｸ取出動作2(取出)
STG @MR3103              ; RB1ﾊﾝﾄﾞ1 ﾜｰｸ取出2 (取出)
ANB @MR4500              ; RB1 動作指令 Sub Start
ANB @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
AND MR3000               ; RB1 ﾄﾚﾁｪﾝ進入IL
DW #101 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
LDA DM35100              ; RB1 ﾜｰｸ取出位置
CON
STA EM1001               ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR3105
STG @MR3105
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
MPS
ANB @MR4503              ; RB1 動作指令 Sub HOLD End
MPS
AND<> EM1005 #3          ; RB1 動作ｽﾃｰﾀｽ1
SET MR1000               ; ﾊﾝﾄﾞ1ﾜｰｸ有り
CON
@INC DM35100             ; RB1 ﾜｰｸ取出位置
CON
@INC.L DM5020            ; _生産ｶｳﾝﾀ1
CON
MPS
AND<= DM35100 DM35050    ; RB1 ﾜｰｸ取出位置  ﾊﾟﾚｯﾄ収納個数
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR3106              ; RB1ﾊﾝﾄﾞ2 ﾜｰｸ取出1 (検出)
MPP
AND> DM35100 DM35050     ; RB1 ﾜｰｸ取出位置  ﾊﾟﾚｯﾄ収納個数
MPS
ANB LR15000              ; ﾄﾚﾁｪﾝ時 Z軸上昇動作
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR3702              ; LD ﾄﾚｰﾁｪﾝｼﾞ
MPP
AND LR15000              ; ﾄﾚﾁｪﾝ時 Z軸上昇動作
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR3510
MPP
AND= EM1005 #3           ; RB1 動作ｽﾃｰﾀｽ1
JMP @MR3104
MPP
AND @MR4503              ; RB1 動作指令 Sub HOLD End
RES @MR4501              ; RB1 動作指令 Sub End
CON
RES @MR4503              ; RB1 動作指令 Sub HOLD End
CON
JMP @MR3914              ; 処理中中断
STG @MR3510
ANB @MR4500              ; RB1 動作指令 Sub Start
ANB @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
DW #119 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #0 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR3511
STG @MR3511
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR3702              ; LD ﾄﾚｰﾁｪﾝｼﾞ
STG @MR3702              ; LD ﾄﾚｰﾁｪﾝｼﾞ
ANB @MR4000              ; AUTO Main2
ANB @MR4001              ; Main2 END
ANB @MR4002              ; Main2 Busy
SET @MR4000              ; AUTO Main2
CON
JMP @MR3703
STG @MR3703
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
ANB @MR4000              ; AUTO Main2
AND @MR4001              ; Main2 END
ANB @MR4002              ; Main2 Busy
ANL
RES @MR4001              ; Main2 END
CON
JMP @MR3106              ; RB1ﾊﾝﾄﾞ2 ﾜｰｸ取出1 (検出)
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3111
MPS
AND R200                 ; RB1 ﾊﾝﾄﾞ1 吸着圧OK
JMP @MR3106              ; RB1ﾊﾝﾄﾞ2 ﾜｰｸ取出1 (検出)
MPP
ANB R200                 ; RB1 ﾊﾝﾄﾞ1 吸着圧OK
TMR #900 #30             ; ﾊﾝﾄﾞ1 吸着圧OK確認
CON
AND T900                 ; ﾊﾝﾄﾞ1 吸着圧OK確認
JMP @MR3112
STG @MR3112
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #36 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task1 ERROR
CON
JMP @MR3113
STG @MR3113
AND @MR101               ; Task1 ERROR_End
RES @MR101               ; Task1 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR3800
STG @MR3800
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
ANB @MR4500              ; RB1 動作指令 Sub Start
ANB @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
ANL
DW #130 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #0 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR3801
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3801
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
ANB @MR4503              ; RB1 動作指令 Sub HOLD End
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR3802
STG @MR3802
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
ANB @MR4500              ; RB1 動作指令 Sub Start
ANB @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
ANL
DW #128 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #0 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR3803
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3803
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
ANB @MR4503              ; RB1 動作指令 Sub HOLD End
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR3015              ; Auto Loop先頭
;<h1/> RB1　ﾊﾝﾄﾞ2　ﾜｰｸ取出動作1(検出)
STG @MR3106              ; RB1ﾊﾝﾄﾞ2 ﾜｰｸ取出1 (検出)
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
ANB @MR4500              ; RB1 動作指令 Sub Start
ANB @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
ANL
MPS
LDB R46106               ; _定停止移行中
AND MR3000               ; RB1 ﾄﾚﾁｪﾝ進入IL
LD R46106                ; _定停止移行中
AND<= DM35100 DM35050    ; RB1 ﾜｰｸ取出位置  ﾊﾟﾚｯﾄ収納個数
ORL
LD B201B                 ; LDより ｽﾃｰﾀｽ(AUTO)
AND B2012                ; LDより ｲﾝﾀｰﾛｯｸ信号
AND B2013                ; LDより 取出可
OR MR9013                ; LDなし
ANL
ANL
DW #105 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
LDA DM35100              ; RB1 ﾜｰｸ取出位置
CON
STA EM1001               ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR3108
MPP
LD R46106                ; _定停止移行中
AND> DM35100 DM35050     ; RB1 ﾜｰｸ取出位置  ﾊﾟﾚｯﾄ収納個数
ANL
JMP @MR3107
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3107
DW #1 DM35100            ; RB1 ﾜｰｸ取出位置
CON
MPS
LD B201B                 ; LDより ｽﾃｰﾀｽ(AUTO)
AND B2012                ; LDより ｲﾝﾀｰﾛｯｸ信号
AND B2013                ; LDより 取出可
ANL
DW #105 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
LDA DM35100              ; RB1 ﾜｰｸ取出位置
CON
STA EM1001               ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR3108
MPP
ANB B201B                ; LDより ｽﾃｰﾀｽ(AUTO)
MPS
AND R46106               ; _定停止移行中
JMP @MR3605              ; 待機位置 移動
MCALL MODE_INDI #2
MPP
LDB R46106               ; _定停止移行中
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3108
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
MPS
ANB @MR4503              ; RB1 動作指令 Sub HOLD End
MPS
AND= EM1005 #4           ; RB1 動作ｽﾃｰﾀｽ1
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR3109              ; RB1ﾊﾝﾄﾞ2 ﾜｰｸ取出2 (取出)
MPP
AND= EM1005 #3           ; RB1 動作ｽﾃｰﾀｽ1
@INC DM35100             ; RB1 ﾜｰｸ取出位置
CON
MPS
AND<= DM35100 DM35050    ; RB1 ﾜｰｸ取出位置  ﾊﾟﾚｯﾄ収納個数
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR3106              ; RB1ﾊﾝﾄﾞ2 ﾜｰｸ取出1 (検出)
MPP
AND> DM35100 DM35050     ; RB1 ﾜｰｸ取出位置  ﾊﾟﾚｯﾄ収納個数
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR3704
MPP
LD @MR4503               ; RB1 動作指令 Sub HOLD End
AND CR2003               ; 常時OFF
ANL
RES @MR4501              ; RB1 動作指令 Sub End
CON
RES @MR4503              ; RB1 動作指令 Sub HOLD End
CON
JMP @MR3914              ; 処理中中断
STG @MR3704
ANB @MR4000              ; AUTO Main2
ANB @MR4001              ; Main2 END
ANB @MR4002              ; Main2 Busy
SET @MR4000              ; AUTO Main2
CON
JMP @MR3705
STG @MR3705
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
ANB @MR4000              ; AUTO Main2
AND @MR4001              ; Main2 END
ANB @MR4002              ; Main2 Busy
ANL
RES @MR4001              ; Main2 END
CON
JMP @MR3106              ; RB1ﾊﾝﾄﾞ2 ﾜｰｸ取出1 (検出)
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
;<h1/> RB1　ﾊﾝﾄﾞ2　ﾜｰｸ取出動作2(取出)
STG @MR3109              ; RB1ﾊﾝﾄﾞ2 ﾜｰｸ取出2 (取出)
ANB @MR4500              ; RB1 動作指令 Sub Start
ANB @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
AND MR3000               ; RB1 ﾄﾚﾁｪﾝ進入IL
DW #106 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
LDA DM35100              ; RB1 ﾜｰｸ取出位置
CON
STA EM1001               ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR3110
STG @MR3110
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
MPS
ANB @MR4503              ; RB1 動作指令 Sub HOLD End
MPS
AND<> EM1005 #3          ; RB1 動作ｽﾃｰﾀｽ1
SET MR1001               ; ﾊﾝﾄﾞ2ﾜｰｸ有り
CON
@INC DM35100             ; RB1 ﾜｰｸ取出位置
CON
@INC.L DM5020            ; _生産ｶｳﾝﾀ1
CON
MPS
AND<= DM35100 DM35050    ; RB1 ﾜｰｸ取出位置  ﾊﾟﾚｯﾄ収納個数
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR3200              ; 反転UT (上状態) ﾜｰｸ仮置き
MPP
AND> DM35100 DM35050     ; RB1 ﾜｰｸ取出位置  ﾊﾟﾚｯﾄ収納個数
RES @MR4501              ; RB1 動作指令 Sub End
CON
SET @MR3706              ; LDﾄﾚｲﾁｪﾝｼﾞ要求
CON
JMP @MR3200              ; 反転UT (上状態) ﾜｰｸ仮置き
MPP
AND= EM1005 #3           ; RB1 動作ｽﾃｰﾀｽ1
JMP @MR3108
MPP
AND @MR4503              ; RB1 動作指令 Sub HOLD End
RES @MR4501              ; RB1 動作指令 Sub End
CON
RES @MR4503              ; RB1 動作指令 Sub HOLD End
CON
JMP @MR3914              ; 処理中中断
LD @MR3706               ; LDﾄﾚｲﾁｪﾝｼﾞ要求
ANB @MR4000              ; AUTO Main2
ANB @MR4001              ; Main2 END
ANB @MR4002              ; Main2 Busy
SET @MR4000              ; AUTO Main2
CON
RES @MR3706              ; LDﾄﾚｲﾁｪﾝｼﾞ要求
CON
SET @MR3707
LD @MR3707
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
ANB @MR4000              ; AUTO Main2
AND @MR4001              ; Main2 END
ANB @MR4002              ; Main2 Busy
ANL
RES @MR4001              ; Main2 END
CON
RES @MR3707
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3711
MPS
AND R201                 ; RB1 ﾊﾝﾄﾞ2 吸着圧OK
JMP @MR3200              ; 反転UT (上状態) ﾜｰｸ仮置き
MPP
ANB R201                 ; RB1 ﾊﾝﾄﾞ2 吸着圧OK
TMR #901 #30             ; ﾊﾝﾄﾞ2 吸着圧OK確認
CON
AND T901                 ; ﾊﾝﾄﾞ2 吸着圧OK確認
JMP @MR3712
STG @MR3712
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #46 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task1 ERROR
CON
JMP @MR3713
STG @MR3713
AND @MR101               ; Task1 ERROR_End
RES @MR101               ; Task1 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR3807
STG @MR3807
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
ANB @MR4500              ; RB1 動作指令 Sub Start
ANB @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
ANL
DW #130 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #0 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR3808              ; 段積ﾄﾚｲ搬出処理
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3808              ; 段積ﾄﾚｲ搬出処理
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
ANB @MR4503              ; RB1 動作指令 Sub HOLD End
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR3809
STG @MR3809
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
ANB @MR4500              ; RB1 動作指令 Sub Start
ANB @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
ANL
DW #128 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #0 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR3810
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3810
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
ANB @MR4503              ; RB1 動作指令 Sub HOLD End
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR3015              ; Auto Loop先頭
;<h1/> RB1 反転UT ﾜｰｸ仮置き
STG @MR3200              ; 反転UT (上状態) ﾜｰｸ仮置き
ANB @MR4500              ; RB1 動作指令 Sub Start
ANB @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
MPS
LDB B20B0                ; 洗浄機より LD反転 仮置台 在荷1
ANB B20B1                ; 洗浄機より LD反転 仮置台 在荷2
ANB B20B6                ; ﾜｰｸ浮き検出
ANB MR4100               ; LD仮置台 在荷1異常
ANB MR4101               ; LD仮置台 在荷2異常
ANL
SET @MR3203              ; LD仮置き台下降要求
CON
AND MR3002               ; RB1 仮置台 下降時 進入IL
DW #129 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #0 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR3201
MRD
AND B20B0                ; 洗浄機より LD反転 仮置台 在荷1
DW #4800 DM60009         ; Sensor ERROR No.
CON
SET MR4100               ; LD仮置台 在荷1異常
CON
JMP @MR3209
MRD
AND B20B1                ; 洗浄機より LD反転 仮置台 在荷2
DW #4801 DM60009         ; Sensor ERROR No.
CON
SET MR4101               ; LD仮置台 在荷2異常
CON
JMP @MR3209
MPP
AND B20B6                ; ﾜｰｸ浮き検出
DW #4802 DM60009         ; Sensor ERROR No.
CON
SET MR4100               ; LD仮置台 在荷1異常
CON
SET MR4101               ; LD仮置台 在荷2異常
CON
JMP @MR3209
STG @MR3209
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #4 @DM1               ; ErrorNo /ERROR_DISP
CON
SET @MR100               ; Task1 ERROR
CON
JMP @MR3210
STG @MR3210
AND @MR101               ; Task1 ERROR_End
RES @MR101               ; Task1 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
RES MR4100               ; LD仮置台 在荷1異常
CON
RES MR4101               ; LD仮置台 在荷2異常
CON
JMP @MR3200              ; 反転UT (上状態) ﾜｰｸ仮置き
STG @MR3201
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
ANL
MPS
ANB @MR4503              ; RB1 動作指令 Sub HOLD End
MPS
LD B20B0                 ; 洗浄機より LD反転 仮置台 在荷1
AND B20B1                ; 洗浄機より LD反転 仮置台 在荷2
OR MR9015                ; ﾜｰｸなし運転
ANB MR4100               ; LD仮置台 在荷1異常
ANB MR4101               ; LD仮置台 在荷2異常
ANB LR20003              ; RB1 仮置き台 ｱｸｾｽ中
ANL
RES @MR4501              ; RB1 動作指令 Sub End
CON
RES MR1000               ; ﾊﾝﾄﾞ1ﾜｰｸ有り
CON
RES MR1001               ; ﾊﾝﾄﾞ2ﾜｰｸ有り
CON
JMP @MR3206              ; 反転UT (下状態) ﾜｰｸ取出し
MRD
LDB B20B0                ; 洗浄機より LD反転 仮置台 在荷1
AND B20B1                ; 洗浄機より LD反転 仮置台 在荷2
ANB MR9015               ; ﾜｰｸなし運転
ANL
DW #4800 DM60009         ; Sensor ERROR No.
CON
SET MR4100               ; LD仮置台 在荷1異常
CON
JMP @MR3408
MRD
LDB B20B1                ; 洗浄機より LD反転 仮置台 在荷2
AND B20B0                ; 洗浄機より LD反転 仮置台 在荷1
ANB MR9015               ; ﾜｰｸなし運転
ANL
DW #4801 DM60009         ; Sensor ERROR No.
CON
SET MR4101               ; LD仮置台 在荷2異常
CON
JMP @MR3408
MPP
LDB B20B1                ; 洗浄機より LD反転 仮置台 在荷2
ANB B20B0                ; 洗浄機より LD反転 仮置台 在荷1
ANB MR9015               ; ﾜｰｸなし運転
ANL
DW #4801 DM60009         ; Sensor ERROR No.
CON
SET MR4100               ; LD仮置台 在荷1異常
CON
SET MR4101               ; LD仮置台 在荷2異常
CON
JMP @MR3408
MPP
AND @MR4503              ; RB1 動作指令 Sub HOLD End
RES @MR4501              ; RB1 動作指令 Sub End
CON
RES @MR4503              ; RB1 動作指令 Sub HOLD End
CON
JMP @MR3914              ; 処理中中断
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3408
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #2 @DM1               ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task1 ERROR
CON
JMP @MR3409
STG @MR3409
AND @MR101               ; Task1 ERROR_End
RES @MR101               ; Task1 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR105               ; SW1
RES MR4100               ; LD仮置台 在荷1異常
CON
RES MR4101               ; LD仮置台 在荷2異常
CON
JMP @MR3201
MPP
AND @MR108               ; SW4
RES MR4100               ; LD仮置台 在荷1異常
CON
RES MR4101               ; LD仮置台 在荷2異常
CON
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR3410
STG @MR3410
ANB @MR4500              ; RB1 動作指令 Sub Start
ANB @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
DW #121 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #0 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR3411
STG @MR3411
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
MPS
ANB @MR4503              ; RB1 動作指令 Sub HOLD End
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR3605              ; 待機位置 移動
MPP
AND @MR4503              ; RB1 動作指令 Sub HOLD End
RES @MR4501              ; RB1 動作指令 Sub End
CON
RES @MR4503              ; RB1 動作指令 Sub HOLD End
CON
JMP @MR3914              ; 処理中中断
;<h1/> RB1 ｱｰﾑ切替
STG @MR3202              ; ｱｰﾑ切替
AND CR2003               ; 常時OFF
ANB @MR4500              ; RB1 動作指令 Sub Start
ANB @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
DW #121 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #0 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR3204
STG @MR3204
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
MPS
ANB @MR4503              ; RB1 動作指令 Sub HOLD End
SET @MR3203              ; LD仮置き台下降要求
CON
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR3205
MPP
AND @MR4503              ; RB1 動作指令 Sub HOLD End
RES @MR4501              ; RB1 動作指令 Sub End
CON
RES @MR4503              ; RB1 動作指令 Sub HOLD End
CON
JMP @MR3914              ; 処理中中断
;<h1/> 反転UT 下降
LD @MR3203               ; LD仮置き台下降要求
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
AND MR3201               ; LD反転 仮置台 下降IL
ANB MR4000               ; LD反転 仮置台 上昇限Err
ANB MR4001               ; LD反転 仮置台 下降限Err
ANL
RES MR2000               ; LD反転 仮置き台 上昇
CON
SET MR2001               ; LD反転 仮置き台 下降
CON
RES @MR3203              ; LD仮置き台下降要求
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3205
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
ANB B20B2                ; 洗浄機より LD反転 仮置台 上昇限
AND B20B3                ; 洗浄機より LD反転 仮置台 下降限
LD B20B0                 ; 洗浄機より LD反転 仮置台 在荷1
AND B20B1                ; 洗浄機より LD反転 仮置台 在荷2
OR MR9015                ; ﾜｰｸなし運転
OR CR2002                ; 常時ON
ANL
ANL
RES MR1010               ; ﾜｰｸ無し異常
CON
JMP @MR3206              ; 反転UT (下状態) ﾜｰｸ取出し
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
;<h1/> RB1 反転UT(下状態) ﾜｰｸ取出し
STG @MR3206              ; 反転UT (下状態) ﾜｰｸ取出し
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
ANB @MR4500              ; RB1 動作指令 Sub Start
ANB @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
AND MR3002               ; RB1 仮置台 下降時 進入IL
ANL
DW #122 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #0 EM1001             ; RB1 数値指定1
CON
RES MR1002               ; ﾊﾝﾄﾞ1ﾜｰｸ有り
CON
RES MR1003               ; ﾊﾝﾄﾞ2ﾜｰｸ有り
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR3207
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3207
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
ANB @MR4500              ; RB1 動作指令 Sub Start
ANL
MPS
LD @MR4501               ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
ANL
MPS
ANB @MR4503              ; RB1 動作指令 Sub HOLD End
MPS
ANB @MR4611              ; ﾘﾄﾗｲ
RES @MR4501              ; RB1 動作指令 Sub End
CON
ANB MR4100               ; LD仮置台 在荷1異常
ANB MR4101               ; LD仮置台 在荷2異常
ANB LR20003              ; RB1 仮置き台 ｱｸｾｽ中
SET MR1002               ; ﾊﾝﾄﾞ1ﾜｰｸ有り
CON
SET MR1003               ; ﾊﾝﾄﾞ2ﾜｰｸ有り
CON
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR4200
MPP
AND @MR4611              ; ﾘﾄﾗｲ
RES @MR4501              ; RB1 動作指令 Sub End
CON
RES @MR4611              ; ﾘﾄﾗｲ
CON
JMP @MR3206              ; 反転UT (下状態) ﾜｰｸ取出し
MPP
AND @MR4503              ; RB1 動作指令 Sub HOLD End
RES @MR4501              ; RB1 動作指令 Sub End
CON
RES @MR4503              ; RB1 動作指令 Sub HOLD End
CON
JMP @MR3914              ; 処理中中断
MPP
LD= EM1007 #85           ; RB1 動作中ｴﾗｰｺｰﾄﾞ
OR= EM1007 #95           ; RB1 動作中ｴﾗｰｺｰﾄﾞ
ANL
SET MR1010               ; ﾜｰｸ無し異常
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR4200
ANB R39104               ; SELECT_Y_N Interlock
MPS
LDB @MR4613              ; ﾜｰｸ確認
ANB @MR4615              ; ﾜｰｸ取出し
ANL
JMP @MR3303              ; 洗浄機 投入前H/S
MRD
LD @MR4613               ; ﾜｰｸ確認
ANB @MR4615              ; ﾜｰｸ取出し
ANL
JMP @MR4201
MPP
LD @MR4615               ; ﾜｰｸ取出し
ANB @MR4613              ; ﾜｰｸ確認
ANL
JMP @MR4203
STG @MR4201
SET R39104               ; SELECT_Y_N Interlock
CON
DW #8 @DM21              ; ScreenNo /SELECT_Y_N
CON
DW #0 @DM22              ; Bz_Use /SELECT_Y_N
CON
SET @MR300               ; Task1 SELECT_Y_N
CON
JMP @MR4202
STG @MR4202
AND @MR301               ; Task1 Y/N END
RES @MR301               ; Task1 Y/N END
CON
RES R39104               ; SELECT_Y_N Interlock
CON
MPS
AND @MR306               ; Task1 Y/N
ZRES @MR4611 @MR4615     ; ﾘﾄﾗｲ  ﾜｰｸ取出し
CON
JMP @MR3303              ; 洗浄機 投入前H/S
MPP
ANB @MR306               ; Task1 Y/N
JMP @MR4203
STG @MR4203
ZRES @MR4611 @MR4615     ; ﾘﾄﾗｲ  ﾜｰｸ取出し
CON
ANB @MR4500              ; RB1 動作指令 Sub Start
ANB @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
DW #5 EM1000             ; RB1 動作ｺﾏﾝﾄ
CON
DW #0 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR4204
STG @MR4204
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
ANB @MR4503              ; RB1 動作指令 Sub HOLD End
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR4205
STG @MR4205
ANB @MR4500              ; RB1 動作指令 Sub Start
ANB @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
DW #128 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #0 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR4206
STG @MR4206
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
ANB @MR4503              ; RB1 動作指令 Sub HOLD End
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR4207
STG @MR4207
ANB @MR4500              ; RB1 動作指令 Sub Start
ANB @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
DW #130 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #0 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR4208
STG @MR4208
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
ANB @MR4503              ; RB1 動作指令 Sub HOLD End
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR3015              ; Auto Loop先頭
;<h1/> 反転UT 上昇
;<h1/> 洗浄機投入前　H/S
STG @MR3303              ; 洗浄機 投入前H/S
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
ANL
MPS
LD B2091                 ; 洗浄給材 ﾗｲﾝ1より  動作開始 許可
AND= DM35102 #1          ; RB1 洗浄ﾗｲﾝ
ANL
SET B2050                ; 洗浄給材 ﾗｲﾝ1へ 動作開始 通知
CON
JMP @MR3304
MRD
LD B2099                 ; 洗浄給材 ﾗｲﾝ2より  動作開始 許可
AND= DM35102 #2          ; RB1 洗浄ﾗｲﾝ
ANL
SET B2058                ; 洗浄給材 ﾗｲﾝ2へ 動作開始 通知
CON
JMP @MR3304
MRD
LD B2091                 ; 洗浄給材 ﾗｲﾝ1より  動作開始 許可
ANB B2099                ; 洗浄給材 ﾗｲﾝ2より  動作開始 許可
AND= DM35102 #2          ; RB1 洗浄ﾗｲﾝ
ANL
MOV #1 DM35102           ; RB1 洗浄ﾗｲﾝ
MPP
LD B2099                 ; 洗浄給材 ﾗｲﾝ2より  動作開始 許可
ANB B2091                ; 洗浄給材 ﾗｲﾝ1より  動作開始 許可
AND= DM35102 #1          ; RB1 洗浄ﾗｲﾝ
ANL
MOV #2 DM35102           ; RB1 洗浄ﾗｲﾝ
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3304
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
ANL
MPS
LDB B2091                ; 洗浄給材 ﾗｲﾝ1より  動作開始 許可
AND= DM35102 #1          ; RB1 洗浄ﾗｲﾝ
ANL
RES B2050                ; 洗浄給材 ﾗｲﾝ1へ 動作開始 通知
CON
RES B2057                ; 洗浄機へ ﾗｲﾝ1 ﾜｰｸ投入1回目
CON
JMP @MR3400              ; 洗浄治具へ ﾜｰｸｾｯﾄ
MPP
LDB B2099                ; 洗浄給材 ﾗｲﾝ2より  動作開始 許可
AND= DM35102 #2          ; RB1 洗浄ﾗｲﾝ
ANL
RES B2058                ; 洗浄給材 ﾗｲﾝ2へ 動作開始 通知
CON
RES B205F                ; 洗浄機へ ﾗｲﾝ2 ﾜｰｸ取出1回目
CON
JMP @MR3400              ; 洗浄治具へ ﾜｰｸｾｯﾄ
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
;<h1/> RB1 洗浄治具へﾜｰｸｾｯﾄ
STG @MR3400              ; 洗浄治具へ ﾜｰｸｾｯﾄ
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
ANB @MR4500              ; RB1 動作指令 Sub Start
ANB @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
LD= DM35102 #1           ; RB1 洗浄ﾗｲﾝ
AND MR3003               ; RB1 洗浄ｼｬﾄﾙ1 進入IL
LD= DM35102 #2           ; RB1 洗浄ﾗｲﾝ
AND MR3004               ; RB1 洗浄ｼｬﾄﾙ2 進入IL
ORL
ANL
ANL
DW #126 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
RES MR1000               ; ﾊﾝﾄﾞ1ﾜｰｸ有り
CON
RES MR1001               ; ﾊﾝﾄﾞ2ﾜｰｸ有り
CON
LDA DM35102              ; RB1 洗浄ﾗｲﾝ
CON
STA EM1001               ; RB1 数値指定1
CON
LDA DM35104              ; RB1 洗浄治具
CON
STA EM1002               ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR3401
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3401
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
MPS
LD MR1002                ; ﾊﾝﾄﾞ1ﾜｰｸ有り
AND MR1003               ; ﾊﾝﾄﾞ2ﾜｰｸ有り
ANL
MPS
ANB @MR4503              ; RB1 動作指令 Sub HOLD End
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR3402
MPP
AND @MR4503              ; RB1 動作指令 Sub HOLD End
RES @MR4501              ; RB1 動作指令 Sub End
CON
RES @MR4503              ; RB1 動作指令 Sub HOLD End
CON
JMP @MR3914              ; 処理中中断
MPP
LD MR1002                ; ﾊﾝﾄﾞ1ﾜｰｸ有り
ANB MR1003               ; ﾊﾝﾄﾞ2ﾜｰｸ有り
LDB MR1002               ; ﾊﾝﾄﾞ1ﾜｰｸ有り
AND MR1003               ; ﾊﾝﾄﾞ2ﾜｰｸ有り
ORL
LDB MR1002               ; ﾊﾝﾄﾞ1ﾜｰｸ有り
ANB MR1003               ; ﾊﾝﾄﾞ2ﾜｰｸ有り
ORL
ANL
JMP @MR3403
STG @MR3403
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #6 @DM1               ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task1 ERROR
CON
JMP @MR3404
STG @MR3404
AND @MR101               ; Task1 ERROR_End
RES @MR101               ; Task1 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
SET MR1002               ; ﾊﾝﾄﾞ1ﾜｰｸ有り
CON
SET MR1003               ; ﾊﾝﾄﾞ2ﾜｰｸ有り
CON
RES MR4100               ; LD仮置台 在荷1異常
CON
RES MR4101               ; LD仮置台 在荷2異常
CON
JMP @MR3401
STG @MR3402
MPS
AND= DM35102 #1          ; RB1 洗浄ﾗｲﾝ
RES MR1002               ; ﾊﾝﾄﾞ1ﾜｰｸ有り
CON
RES MR1003               ; ﾊﾝﾄﾞ2ﾜｰｸ有り
CON
DW #1 DM30000            ; 洗浄ﾗｲﾝ1 在荷
CON
JMP @MR3500              ; 洗浄機 投入後H/S
MPP
AND= DM35102 #2          ; RB1 洗浄ﾗｲﾝ
RES MR1002               ; ﾊﾝﾄﾞ1ﾜｰｸ有り
CON
RES MR1003               ; ﾊﾝﾄﾞ2ﾜｰｸ有り
CON
DW #1 DM30001            ; 洗浄ﾗｲﾝ2 在荷
CON
JMP @MR3500              ; 洗浄機 投入後H/S
;<h1/> 洗浄機投入後　H/S
STG @MR3500              ; 洗浄機 投入後H/S
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
ANL
MPS
ANB MR1010               ; ﾜｰｸ無し異常
MPS
AND= DM35102 #1          ; RB1 洗浄ﾗｲﾝ
SET B2056                ; 洗浄給材 ﾗｲﾝ1へ 動作完了 通知
CON
AND B2096                ; 洗浄給材 ﾗｲﾝ1より  動作完了 確認
JMP @MR3501
MPP
AND= DM35102 #2          ; RB1 洗浄ﾗｲﾝ
SET B205E                ; 洗浄給材 ﾗｲﾝ2へ 動作完了 通知
CON
AND B209E                ; 洗浄給材 ﾗｲﾝ2より  動作完了 確認
JMP @MR3501
MPP
AND MR1010               ; ﾜｰｸ無し異常
JMP @MR3505
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3505
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #6 @DM1               ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task1 ERROR
CON
JMP @MR3506
STG @MR3506
AND @MR101               ; Task1 ERROR_End
RES @MR101               ; Task1 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
RES MR1011               ; No.34ｱﾗｰﾑ出力済み
CON
RES MR1012               ; No.44ｱﾗｰﾑ出力済み
CON
RES MR1010               ; ﾜｰｸ無し異常
CON
JMP @MR3500              ; 洗浄機 投入後H/S
STG @MR3501
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
ANB B20B2                ; 洗浄機より LD反転 仮置台 上昇限
AND B20B3                ; 洗浄機より LD反転 仮置台 下降限
ANL
MPS
AND= DM35102 #1          ; RB1 洗浄ﾗｲﾝ
RES B2056                ; 洗浄給材 ﾗｲﾝ1へ 動作完了 通知
CON
ANB B2096                ; 洗浄給材 ﾗｲﾝ1より  動作完了 確認
JMP @MR3502
SET R47000               ; _処理時間1計測開始
MPP
AND= DM35102 #2          ; RB1 洗浄ﾗｲﾝ
RES B205E                ; 洗浄給材 ﾗｲﾝ2へ 動作完了 通知
CON
ANB B209E                ; 洗浄給材 ﾗｲﾝ2より  動作完了 確認
JMP @MR3502
SET R47001               ; _処理時間2計測開始
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3502
MPS
AND= DM35102 #1          ; RB1 洗浄ﾗｲﾝ
JMP @MR3603
MPP
AND= DM35102 #2          ; RB1 洗浄ﾗｲﾝ
JMP @MR3604
STG @MR3600
MPS
ANB MR1010               ; ﾜｰｸ無し異常
@INC DM35104             ; RB1 洗浄治具
CON
JMP @MR3605              ; 待機位置 移動
MPP
AND MR1010               ; ﾜｰｸ無し異常
JMP @MR3610
STG @MR3610
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #6 @DM1               ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task1 ERROR
CON
JMP @MR3611
STG @MR3611
AND @MR101               ; Task1 ERROR_End
RES @MR101               ; Task1 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
RES MR1011               ; No.34ｱﾗｰﾑ出力済み
CON
RES MR1012               ; No.44ｱﾗｰﾑ出力済み
CON
RES MR1010               ; ﾜｰｸ無し異常
CON
JMP @MR3600
STG @MR3601
DW #1 DM35104            ; RB1 洗浄治具
CON
@INC DM35102             ; RB1 洗浄ﾗｲﾝ
CON
JMP @MR3605              ; 待機位置 移動
STG @MR3602
DW #1 DM35104            ; RB1 洗浄治具
CON
DW #1 DM35102            ; RB1 洗浄ﾗｲﾝ
CON
JMP @MR3605              ; 待機位置 移動
STG @MR3603
@INC DM35102             ; RB1 洗浄ﾗｲﾝ
CON
JMP @MR3605              ; 待機位置 移動
STG @MR3604
DW #1 DM35102            ; RB1 洗浄ﾗｲﾝ
CON
JMP @MR3605              ; 待機位置 移動
;<h1/> RB1 待機位置移動
STG @MR3605              ; 待機位置 移動
ANB @MR4500              ; RB1 動作指令 Sub Start
ANB @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
DW #130 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #0 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR3606
STG @MR3606
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
MPS
ANB @MR4503              ; RB1 動作指令 Sub HOLD End
RES @MR4501              ; RB1 動作指令 Sub End
CON
SET @MR3208              ; LD仮置き台上昇要求
CON
JMP @MR3015              ; Auto Loop先頭
MPP
AND @MR4503              ; RB1 動作指令 Sub HOLD End
RES @MR4501              ; RB1 動作指令 Sub End
CON
RES @MR4503              ; RB1 動作指令 Sub HOLD End
CON
JMP @MR3914              ; 処理中中断
;<h1/> 反転UT 上昇
LD @MR3208               ; LD仮置き台上昇要求
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
AND MR3200               ; LD反転 仮置台 上昇IL
ANB MR4000               ; LD反転 仮置台 上昇限Err
ANB MR4001               ; LD反転 仮置台 下降限Err
ANL
RES @MR3208              ; LD仮置き台上昇要求
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
;処理中中断
STG @MR3914              ; 処理中中断
RES MR1002               ; ﾊﾝﾄﾞ1ﾜｰｸ有り
CON
RES MR1003               ; ﾊﾝﾄﾞ2ﾜｰｸ有り
CON
ANB @MR001               ; TASK1 ERROR
RES @MR3203              ; LD仮置き台下降要求
CON
RES @MR3208              ; LD仮置き台上昇要求
CON
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
ANL
MPS
AND<> @DM1 #11           ; ErrorNo /ERROR_DISP
JMP @MR3015              ; Auto Loop先頭
MPP
AND= @DM1 #11            ; ErrorNo /ERROR_DISP
MCALL HOLD_REQUEST #1
TMR @0 #2
CON
AND @T0
JMP @MR3015              ; Auto Loop先頭
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
;ﾀｽｸ終了
STG @MR3915              ; ﾀｽｸ終了
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
ANL
RES R35015               ; RB1 中断受付
CON
RES @MR3203              ; LD仮置き台下降要求
CON
RES @MR3208              ; LD仮置き台上昇要求
CON
RES @MR3002              ; AUTO Main1 Busy
CON
ANB @MR3707
RES MR14000              ; 終了処理
CON
JMP LR601                ; _Grp1_Task1_Fin.STG
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
LD T10
SET @MR3915              ; ﾀｽｸ終了
;<h1/>Auto-Main2/Autoﾒｲﾝﾙｰﾁﾝ2
;[本STG内容]
;・@MR4000の起動はMain1にて行う事
;・@MR4000:AUTO_Main2開始、@MR4001:AUTO_Main2完了、@MR4002:AUTO_Main2動作中
STG @MR4000              ; AUTO Main2
SET @MR4002              ; Main2 Busy
CON
JMP @MR4003
STG @MR4003
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
LD B2010                 ; LDより PLC電源状態
AND B2011                ; LDより 非常停止
OR MR9013                ; LDなし
ANL
ANL
SET B2005                ; LDへ ﾄﾚｲﾁｪﾝｼﾞ 要求
CON
LDB B2013                ; LDより 取出可
OR MR9013                ; LDなし
ANL
LD B2014                 ; LDより 動作開始 通知
ORB B201B                ; LDより ｽﾃｰﾀｽ(AUTO)
ANL
JMP @MR4004
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1901              ; Main2 HALT許可
STG @MR4004
RES B2005                ; LDへ ﾄﾚｲﾁｪﾝｼﾞ 要求
CON
ANB B2014                ; LDより 動作開始 通知
SET MR10000              ; LD ﾄﾚｲﾁｪﾝｼﾞ中
CON
JMP @MR4005
STG @MR4005
MPS
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
MPS
LD B201B                 ; LDより ｽﾃｰﾀｽ(AUTO)
ANB B2019                ; LDより PAUSE要求
AND B2010                ; LDより PLC電源状態
AND B2011                ; LDより 非常停止
ANL
MPS
LD B2012                 ; LDより ｲﾝﾀｰﾛｯｸ信号
AND B2013                ; LDより 取出可
ANL
DW #1 DM35100            ; RB1 ﾜｰｸ取出位置
CON
RES MR10000              ; LD ﾄﾚｲﾁｪﾝｼﾞ中
CON
JMP @MR4007
MPP
LDB B2012                ; LDより ｲﾝﾀｰﾛｯｸ信号
ORB B2013                ; LDより 取出可
AND R46106               ; _定停止移行中
ANL
RES MR10000              ; LD ﾄﾚｲﾁｪﾝｼﾞ中
CON
JMP @MR4007
MRD
ANB B201B                ; LDより ｽﾃｰﾀｽ(AUTO)
DW #1 DM35100            ; RB1 ﾜｰｸ取出位置
CON
RES MR10000              ; LD ﾄﾚｲﾁｪﾝｼﾞ中
CON
JMP @MR4007
MPP
AND MR9013               ; LDなし
DW #1 DM35100            ; RB1 ﾜｰｸ取出位置
CON
RES MR10000              ; LD ﾄﾚｲﾁｪﾝｼﾞ中
CON
JMP @MR4007
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1901              ; Main2 HALT許可
STG @MR4007
JMP @MR4415              ; Main2 END
STG @MR4415              ; Main2 END
SET @MR4001              ; Main2 END
CON
RES @MR4002              ; Main2 Busy
CON
ENDS
;<h1/>MAINTE/ﾒﾝﾃﾅﾝｽ動作
;[本STG内容]
;・各TaskのMAINTE動作を記述して下さい
;・動作ﾓｰﾄﾞは「MAINTEAC*」に格納されています(1〜32)
;・動作終了時は@MR2915にJMPして下さい
STG LR5601               ; _Grp1_Task1_MAINTE.STG
JMP @MR2000              ; Mainte
STG @MR2000              ; Mainte
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
ANL
MPS
LDB DM10501.11           ; RB1 Ctr_READY
AND DM10501.8            ; RB1 RB_READY
ANL
SET @MR2002              ; Mainte中
CON
JMP @MR2010
MRD
AND DM10501.11           ; RB1 Ctr_READY
RES R35014               ; RB1 Prg_STOP
MPP
LD MR23400               ; 単独終了(TP SW)
ORP R44915               ; Teaching End
ORP MR23401              ; Teaching End（No）
ANL
RES @MR2002              ; Mainte中
CON
JMP @MR2910
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR2010
ANB @MR4700              ; RB初期設定 Sub Start
ANB @MR4701              ; RB初期設定 Sub END
ANB @MR4702              ; RB初期設定 Sub中
SET @MR4700              ; RB初期設定 Sub Start
CON
JMP @MR2011
STG @MR2011
ANB @MR4700              ; RB初期設定 Sub Start
AND @MR4701              ; RB初期設定 Sub END
ANB @MR4702              ; RB初期設定 Sub中
RES @MR4701              ; RB初期設定 Sub END
CON
JMP @MR2003
STG @MR2003
MPS
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
MPP
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
ANL
MPS
AND= DM4110 #1           ; _Group1　ﾒﾝﾃ動作番号
JMP @MR2100
MRD
AND= DM4110 #29          ; _Group1　ﾒﾝﾃ動作番号
@DW #2101 DM3008         ; _MainTP　切替ﾍﾟｰｼﾞNo
CON
AND MR23400              ; 単独終了(TP SW)
JMP @MR2910
MRD
AND= DM4110 #30          ; _Group1　ﾒﾝﾃ動作番号
@DW #2150 DM3008         ; _MainTP　切替ﾍﾟｰｼﾞNo
CON
MPS
LDP R44915               ; Teaching End
ORP MR23401              ; Teaching End（No）
ANL
RES R35014               ; RB1 Prg_STOP
CON
JMP @MR2910
MPP
@SET R35014              ; RB1 Prg_STOP
MPP
AND R47800               ; _Group1　ﾒﾝﾃ動作定停止移行中
JMP @MR2910
;<h1/> MainTP 表示中ﾍﾟｰｼﾞNo2107
LD @MR2002               ; Mainte中
AND= DM3000 #2107        ; _MainTP　表示中ﾍﾟｰｼﾞNo
MPS
ANP MR21000              ; TPSW ﾗｲﾝ1選択
RES MR22001              ; TPSW ﾗｲﾝ2選択 ﾗﾝﾌﾟ
CON
SET MR22000              ; TPSW ﾗｲﾝ1選択 ﾗﾝﾌﾟ
MPP
ANP MR21001              ; TPSW ﾗｲﾝ2選択
RES MR22000              ; TPSW ﾗｲﾝ1選択 ﾗﾝﾌﾟ
CON
SET MR22001              ; TPSW ﾗｲﾝ2選択 ﾗﾝﾌﾟ
LD @MR2002               ; Mainte中
AND= DM3000 #2107        ; _MainTP　表示中ﾍﾟｰｼﾞNo
MPS
ANP MR21002              ; TPSW ﾊﾝﾄﾞ1選択
RES MR22003              ; TPSW ﾊﾝﾄﾞ2選択 ﾗﾝﾌﾟ
CON
SET MR22002              ; TPSW ﾊﾝﾄﾞ1選択 ﾗﾝﾌﾟ
MPP
ANP MR21003              ; TPSW ﾊﾝﾄﾞ2選択
RES MR22002              ; TPSW ﾊﾝﾄﾞ1選択 ﾗﾝﾌﾟ
CON
SET MR22003              ; TPSW ﾊﾝﾄﾞ2選択 ﾗﾝﾌﾟ
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
MC
LD @MR2002               ; Mainte中
AND= DM3000 #2101        ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANB R35002               ; During RB1 MOVE 
ANP MR21114              ; TPSW 機種切替位置
AND MR24101              ; RB1 待機位置
DW #173 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #0 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
LD @MR2002               ; Mainte中
AND= DM3000 #2107        ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANB R35002               ; During RB1 MOVE 
MPS
ANP MR21100              ; TPSW 待機位置
ZRES MR22404 MR22411     ; TPSW ﾜｰｸｻｰﾁ 治具1-1ﾗﾝﾌﾟ  TPSW ﾜｰｸｻｰﾁ 治具2-4ﾗﾝﾌﾟ
CON
DW #130 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #0 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MRD
LDP MR21115              ; TPSW 回収動作
AND MR24101              ; RB1 待機位置
ANL
DW #128 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #0 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MPP
LDP MR21114              ; TPSW 機種切替位置
AND MR24101              ; RB1 待機位置
ANL
DW #173 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #0 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
LD @MR2002               ; Mainte中
AND= DM3000 #2107        ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANB R35002               ; During RB1 MOVE 
AND MR3000               ; RB1 ﾄﾚﾁｪﾝ進入IL
LD MR24101               ; RB1 待機位置
LD MR24102               ; RB1 ﾊﾝﾄﾞ1 ﾜｰｸ取出位置
AND CR2003               ; 常時OFF
ORL
LD MR24103               ; RB1 ﾊﾝﾄﾞ2 ﾜｰｸ取出位置
AND CR2003               ; 常時OFF
ORL
OR MR24200               ; RB1 ｱｰﾑ切替1 0°位置
OR MR24206               ; RB1 ｱｰﾑ切替2 0°位置
ANL
MPS
ANP MR21101              ; TPSW ﾊﾝﾄﾞ1 ﾜｰｸ取出
DW #140 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #1 EM1001             ; RB1 数値指定1
MRD
ANP MR21102              ; TPSW ﾊﾝﾄﾞ2 ﾜｰｸ取出
DW #140 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #2 EM1001             ; RB1 数値指定1
MPP
AND= #140 EM1000         ; RB1 動作ｺﾏﾝﾄ
LDA DM50950              ; TP ﾜｰｸ取出 位置設定
CON
STA EM1002               ; RB1 数値指定2
LD @MR2002               ; Mainte中
AND= DM3000 #2107        ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANB R35002               ; During RB1 MOVE 
ANP MR21103              ; TPSW ｱｰﾑ切替 0°
LD MR24101               ; RB1 待機位置
OR MR24102               ; RB1 ﾊﾝﾄﾞ1 ﾜｰｸ取出位置
OR MR24103               ; RB1 ﾊﾝﾄﾞ2 ﾜｰｸ取出位置
OR MR24200               ; RB1 ｱｰﾑ切替1 0°位置
OR MR24206               ; RB1 ｱｰﾑ切替2 0°位置
OR MR24210               ; RB1 反転UT下 受渡上空位置(受渡)
ANL
DW #160 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #0 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
LD @MR2002               ; Mainte中
AND= DM3000 #2107        ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANB R35002               ; During RB1 MOVE 
AND MR3002               ; RB1 仮置台 下降時 進入IL
MPS
LDP MR21110              ; TPSW 反転UT下降 受渡上空
LD MR24101               ; RB1 待機位置
OR MR24200               ; RB1 ｱｰﾑ切替1 0°位置
OR MR24211               ; RB1 反転UT下 受渡位置 (受渡)
ANL
ANL
DW #174 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #0 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MPP
LDP MR21111              ; TPSW 反転UT下降 受渡
AND MR24210              ; RB1 反転UT下 受渡上空位置(受渡)
ANL
DW #175 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #0 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
LD @MR2002               ; Mainte中
AND= DM3000 #2107        ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANB R35002               ; During RB1 MOVE 
LD MR3003                ; RB1 洗浄ｼｬﾄﾙ1 進入IL
OR CR2002                ; 常時ON
ANL
AND MR22000              ; TPSW ﾗｲﾝ1選択 ﾗﾝﾌﾟ
MPS
LDP MR21200              ; TPSW ﾊﾝﾄﾞ1 治具1上空
LD MR24408               ; RB1ﾊﾝﾄﾞ 上空位置
OR MR24308               ; RB1_ﾗｲﾝ1 ﾊﾝﾄﾞ1治具1 上空5mm
OR MR24400               ; RB1_ﾗｲﾝ1 ﾊﾝﾄﾞ1治具1 下降位置
OR MR24101               ; RB1 待機位置
ANL
ANL
DW #1 DM50951            ; TP RB選択 位置表示
CON
DW #170 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #1 EM1001             ; RB1 数値指定1
CON
DW #1 EM1002             ; RB1 数値指定2
MRD
LDP MR21201              ; TPSW RB1 ﾊﾝﾄﾞ1 治具1下降1
AND MR24300              ; RB1_ﾗｲﾝ1 ﾊﾝﾄﾞ1治具1 上空位置
ANL
DW #2 DM50951            ; TP RB選択 位置表示
CON
DW #171 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #1 EM1001             ; RB1 数値指定1
CON
DW #1 EM1002             ; RB1 数値指定2
MPP
LDP MR21202              ; TPSW ﾊﾝﾄﾞ1 治具1下降2
AND MR24308              ; RB1_ﾗｲﾝ1 ﾊﾝﾄﾞ1治具1 上空5mm
ANL
DW #3 DM50951            ; TP RB選択 位置表示
CON
DW #172 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #1 EM1001             ; RB1 数値指定1
CON
DW #1 EM1002             ; RB1 数値指定2
LD @MR2002               ; Mainte中
AND= DM3000 #2107        ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANB R35002               ; During RB1 MOVE 
AND MR3003               ; RB1 洗浄ｼｬﾄﾙ1 進入IL
AND MR22000              ; TPSW ﾗｲﾝ1選択 ﾗﾝﾌﾟ
MPS
LDP MR21206              ; TPSW ﾊﾝﾄﾞ1 治具3上空
LD MR24408               ; RB1ﾊﾝﾄﾞ 上空位置
OR MR24310               ; RB1_ﾗｲﾝ1 ﾊﾝﾄﾞ2治具3 上空5mm
OR MR24402               ; RB1_ﾗｲﾝ1 ﾊﾝﾄﾞ2治具3 下降位置
OR MR24101               ; RB1 待機位置
ANL
ANL
DW #7 DM50951            ; TP RB選択 位置表示
CON
DW #170 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #1 EM1001             ; RB1 数値指定1
CON
DW #3 EM1002             ; RB1 数値指定2
MRD
LDP MR21207              ; TPSW RB1 ﾊﾝﾄﾞ1 治具3下降1
AND MR24302              ; RB1_ﾗｲﾝ1 ﾊﾝﾄﾞ2治具3 上空位置
ANL
DW #8 DM50951            ; TP RB選択 位置表示
CON
DW #171 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #1 EM1001             ; RB1 数値指定1
CON
DW #3 EM1002             ; RB1 数値指定2
MPP
LDP MR21208              ; TPSW ﾊﾝﾄﾞ1 治具3下降2
AND MR24310              ; RB1_ﾗｲﾝ1 ﾊﾝﾄﾞ2治具3 上空5mm
ANL
DW #9 DM50951            ; TP RB選択 位置表示
CON
DW #172 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #1 EM1001             ; RB1 数値指定1
CON
DW #3 EM1002             ; RB1 数値指定2
LD @MR2002               ; Mainte中
AND= DM3000 #2107        ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANB R35002               ; During RB1 MOVE 
AND MR3004               ; RB1 洗浄ｼｬﾄﾙ2 進入IL
AND MR22001              ; TPSW ﾗｲﾝ2選択 ﾗﾝﾌﾟ
MPS
LDP MR21200              ; TPSW ﾊﾝﾄﾞ1 治具1上空
LD MR24408               ; RB1ﾊﾝﾄﾞ 上空位置
OR MR24312               ; RB1_ﾗｲﾝ2 ﾊﾝﾄﾞ1治具1 上空5mm
OR MR24404               ; RB1_ﾗｲﾝ2 ﾊﾝﾄﾞ1治具1 下降位置
OR MR24101               ; RB1 待機位置
ANL
ANL
DW #1 DM50951            ; TP RB選択 位置表示
CON
DW #170 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #2 EM1001             ; RB1 数値指定1
CON
DW #1 EM1002             ; RB1 数値指定2
MRD
LDP MR21201              ; TPSW RB1 ﾊﾝﾄﾞ1 治具1下降1
AND MR24304              ; RB1_ﾗｲﾝ2 ﾊﾝﾄﾞ1治具1 上空位置
ANL
DW #2 DM50951            ; TP RB選択 位置表示
CON
DW #171 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #2 EM1001             ; RB1 数値指定1
CON
DW #1 EM1002             ; RB1 数値指定2
MPP
LDP MR21202              ; TPSW ﾊﾝﾄﾞ1 治具1下降2
AND MR24312              ; RB1_ﾗｲﾝ2 ﾊﾝﾄﾞ1治具1 上空5mm
ANL
DW #3 DM50951            ; TP RB選択 位置表示
CON
DW #172 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #2 EM1001             ; RB1 数値指定1
CON
DW #1 EM1002             ; RB1 数値指定2
LD @MR2002               ; Mainte中
AND= DM3000 #2107        ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANB R35002               ; During RB1 MOVE 
AND MR3004               ; RB1 洗浄ｼｬﾄﾙ2 進入IL
AND MR22001              ; TPSW ﾗｲﾝ2選択 ﾗﾝﾌﾟ
MPS
LDP MR21206              ; TPSW ﾊﾝﾄﾞ1 治具3上空
LD MR24408               ; RB1ﾊﾝﾄﾞ 上空位置
OR MR24314               ; RB1_ﾗｲﾝ2 ﾊﾝﾄﾞ2治具3 上空5mm
OR MR24406               ; RB1_ﾗｲﾝ2 ﾊﾝﾄﾞ2治具3 下降位置
OR MR24101               ; RB1 待機位置
ANL
ANL
DW #7 DM50951            ; TP RB選択 位置表示
CON
DW #170 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #2 EM1001             ; RB1 数値指定1
CON
DW #3 EM1002             ; RB1 数値指定2
MRD
LDP MR21207              ; TPSW RB1 ﾊﾝﾄﾞ1 治具3下降1
AND MR24306              ; RB1_ﾗｲﾝ2 ﾊﾝﾄﾞ2治具3 上空位置
ANL
DW #8 DM50951            ; TP RB選択 位置表示
CON
DW #171 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #2 EM1001             ; RB1 数値指定1
CON
DW #3 EM1002             ; RB1 数値指定2
MPP
LDP MR21208              ; TPSW ﾊﾝﾄﾞ1 治具3下降2
AND MR24314              ; RB1_ﾗｲﾝ2 ﾊﾝﾄﾞ2治具3 上空5mm
ANL
DW #9 DM50951            ; TP RB選択 位置表示
CON
DW #172 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #2 EM1001             ; RB1 数値指定1
CON
DW #3 EM1002             ; RB1 数値指定2
LD @MR2002               ; Mainte中
AND= DM3000 #2107        ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR22000               ; TPSW ﾗｲﾝ1選択 ﾗﾝﾌﾟ
ANB MR3003               ; RB1 洗浄ｼｬﾄﾙ1 進入IL
LD MR22001               ; TPSW ﾗｲﾝ2選択 ﾗﾝﾌﾟ
ANB MR3004               ; RB1 洗浄ｼｬﾄﾙ2 進入IL
ORL
ANL
DW #0 DM50951            ; TP RB選択 位置表示
LD @MR2002               ; Mainte中
AND= DM3000 #2107        ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANB R35002               ; During RB1 MOVE 
MPS
AND MR22002              ; TPSW ﾊﾝﾄﾞ1選択 ﾗﾝﾌﾟ
MPS
ANP MR21300              ; TPSW ﾊﾝﾄﾞ上昇
DW #1 DM50952            ; TP RBﾊﾝﾄﾞ 選択表示
CON
DW #53 EM1000            ; RB1 動作ｺﾏﾝﾄ
CON
DW #1 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MPP
LDP MR21301              ; TPSW ﾊﾝﾄﾞ下降
AND MR24410              ; RB1ﾊﾝﾄﾞ1 ﾁｬｯｸ下降 可位置
ANL
DW #2 DM50952            ; TP RBﾊﾝﾄﾞ 選択表示
CON
DW #54 EM1000            ; RB1 動作ｺﾏﾝﾄ
CON
DW #1 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MPP
AND MR22003              ; TPSW ﾊﾝﾄﾞ2選択 ﾗﾝﾌﾟ
MPS
ANP MR21300              ; TPSW ﾊﾝﾄﾞ上昇
DW #1 DM50952            ; TP RBﾊﾝﾄﾞ 選択表示
CON
DW #53 EM1000            ; RB1 動作ｺﾏﾝﾄ
CON
DW #2 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MPP
LDP MR21301              ; TPSW ﾊﾝﾄﾞ下降
AND MR24411              ; RB1ﾊﾝﾄﾞ2 ﾁｬｯｸ下降 可位置
ANL
DW #2 DM50952            ; TP RBﾊﾝﾄﾞ 選択表示
CON
DW #54 EM1000            ; RB1 動作ｺﾏﾝﾄ
CON
DW #2 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
LD @MR2002               ; Mainte中
AND= DM3000 #2107        ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANB R35002               ; During RB1 MOVE 
AND MR24409              ; RB1ﾊﾝﾄﾞ ﾁｬｯｸ開閉 可位置
MPS
AND MR22002              ; TPSW ﾊﾝﾄﾞ1選択 ﾗﾝﾌﾟ
MPS
ANP MR21302              ; TPSW 吸着ON
DW #3 DM50952            ; TP RBﾊﾝﾄﾞ 選択表示
CON
DW #55 EM1000            ; RB1 動作ｺﾏﾝﾄ
CON
DW #1 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MRD
ANP MR21303              ; TPSW 吸着OFF
DW #4 DM50952            ; TP RBﾊﾝﾄﾞ 選択表示
CON
DW #56 EM1000            ; RB1 動作ｺﾏﾝﾄ
CON
DW #1 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MPP
ANP MR21304              ; TPSW ﾊｶｲON
DW #5 DM50952            ; TP RBﾊﾝﾄﾞ 選択表示
CON
DW #57 EM1000            ; RB1 動作ｺﾏﾝﾄ
CON
DW #1 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MPP
AND MR22003              ; TPSW ﾊﾝﾄﾞ2選択 ﾗﾝﾌﾟ
MPS
ANP MR21302              ; TPSW 吸着ON
DW #3 DM50952            ; TP RBﾊﾝﾄﾞ 選択表示
CON
DW #55 EM1000            ; RB1 動作ｺﾏﾝﾄ
CON
DW #2 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MRD
ANP MR21303              ; TPSW 吸着OFF
DW #4 DM50952            ; TP RBﾊﾝﾄﾞ 選択表示
CON
DW #56 EM1000            ; RB1 動作ｺﾏﾝﾄ
CON
DW #2 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MPP
ANP MR21304              ; TPSW ﾊｶｲON
DW #5 DM50952            ; TP RBﾊﾝﾄﾞ 選択表示
CON
DW #57 EM1000            ; RB1 動作ｺﾏﾝﾄ
CON
DW #2 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
LD @MR2002               ; Mainte中
AND= DM3000 #2107        ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR22002               ; TPSW ﾊﾝﾄﾞ1選択 ﾗﾝﾌﾟ
ANB MR24410              ; RB1ﾊﾝﾄﾞ1 ﾁｬｯｸ下降 可位置
LD MR22003               ; TPSW ﾊﾝﾄﾞ2選択 ﾗﾝﾌﾟ
ANB MR24411              ; RB1ﾊﾝﾄﾞ2 ﾁｬｯｸ下降 可位置
ORL
ANL
AND<= #1 DM50952         ; TP RBﾊﾝﾄﾞ 選択表示
AND>= #2 DM50952         ; TP RBﾊﾝﾄﾞ 選択表示
DW #0 DM50952            ; TP RBﾊﾝﾄﾞ 選択表示
LD @MR2002               ; Mainte中
AND= DM3000 #2107        ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANB R35002               ; During RB1 MOVE 
MPS
LDP MR20000              ; TPSW 反転UT 上昇
AND MR3200               ; LD反転 仮置台 上昇IL
LD MR24100               ; RB1 原点位置
OR MR24101               ; RB1 待機位置
ANL
ANL
RES MR2001               ; LD反転 仮置き台 下降
CON
SET MR2000               ; LD反転 仮置き台 上昇
MPP
LDP MR20001              ; TPSW 反転UT 下降
AND MR3201               ; LD反転 仮置台 下降IL
ANL
RES MR2000               ; LD反転 仮置き台 上昇
CON
SET MR2001               ; LD反転 仮置き台 下降
LD @MR2002               ; Mainte中
AND= DM3000 #2107        ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANB R35002               ; During RB1 MOVE 
LD MR24101               ; RB1 待機位置
OR MR22304               ; TPSW ﾜｰｸｻｰﾁ 治具1-1ﾗﾝﾌﾟ
OR MR22305               ; TPSW ﾜｰｸｻｰﾁ 治具1-2ﾗﾝﾌﾟ
OR MR22306               ; TPSW ﾜｰｸｻｰﾁ 治具1-3ﾗﾝﾌﾟ
OR MR22307               ; TPSW ﾜｰｸｻｰﾁ 治具1-4ﾗﾝﾌﾟ
OR MR22308               ; TPSW ﾜｰｸｻｰﾁ 治具2-1ﾗﾝﾌﾟ
OR MR22309               ; TPSW ﾜｰｸｻｰﾁ 治具2-2ﾗﾝﾌﾟ
OR MR22310               ; TPSW ﾜｰｸｻｰﾁ 治具2-3ﾗﾝﾌﾟ
OR MR22311               ; TPSW ﾜｰｸｻｰﾁ 治具2-4ﾗﾝﾌﾟ
ANL
MPS
ANP MR21400              ; TPSW ﾜｰｸｻｰﾁ 治具1-1
ZRES MR22404 MR22411     ; TPSW ﾜｰｸｻｰﾁ 治具1-1ﾗﾝﾌﾟ  TPSW ﾜｰｸｻｰﾁ 治具2-4ﾗﾝﾌﾟ
CON
SET MR22404              ; TPSW ﾜｰｸｻｰﾁ 治具1-1ﾗﾝﾌﾟ
CON
DW #176 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #1 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MRD
ANP MR21401              ; TPSW ﾜｰｸｻｰﾁ 治具1-2
ZRES MR22404 MR22411     ; TPSW ﾜｰｸｻｰﾁ 治具1-1ﾗﾝﾌﾟ  TPSW ﾜｰｸｻｰﾁ 治具2-4ﾗﾝﾌﾟ
CON
SET MR22405              ; TPSW ﾜｰｸｻｰﾁ 治具1-2ﾗﾝﾌﾟ
CON
DW #176 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #2 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MRD
ANP MR21402              ; TPSW ﾜｰｸｻｰﾁ 治具1-3
ZRES MR22404 MR22411     ; TPSW ﾜｰｸｻｰﾁ 治具1-1ﾗﾝﾌﾟ  TPSW ﾜｰｸｻｰﾁ 治具2-4ﾗﾝﾌﾟ
CON
SET MR22406              ; TPSW ﾜｰｸｻｰﾁ 治具1-3ﾗﾝﾌﾟ
CON
DW #176 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #4 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MRD
ANP MR21403              ; TPSW ﾜｰｸｻｰﾁ 治具1-4
ZRES MR22404 MR22411     ; TPSW ﾜｰｸｻｰﾁ 治具1-1ﾗﾝﾌﾟ  TPSW ﾜｰｸｻｰﾁ 治具2-4ﾗﾝﾌﾟ
CON
SET MR22407              ; TPSW ﾜｰｸｻｰﾁ 治具1-4ﾗﾝﾌﾟ
CON
DW #176 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #8 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MRD
ANP MR21404              ; TPSW ﾜｰｸｻｰﾁ 治具2-1
ZRES MR22404 MR22411     ; TPSW ﾜｰｸｻｰﾁ 治具1-1ﾗﾝﾌﾟ  TPSW ﾜｰｸｻｰﾁ 治具2-4ﾗﾝﾌﾟ
CON
SET MR22408              ; TPSW ﾜｰｸｻｰﾁ 治具2-1ﾗﾝﾌﾟ
CON
DW #177 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #1 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MRD
ANP MR21405              ; TPSW ﾜｰｸｻｰﾁ 治具2-2
ZRES MR22404 MR22411     ; TPSW ﾜｰｸｻｰﾁ 治具1-1ﾗﾝﾌﾟ  TPSW ﾜｰｸｻｰﾁ 治具2-4ﾗﾝﾌﾟ
CON
SET MR22409              ; TPSW ﾜｰｸｻｰﾁ 治具2-2ﾗﾝﾌﾟ
CON
DW #177 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #2 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MRD
ANP MR21406              ; TPSW ﾜｰｸｻｰﾁ 治具2-3
ZRES MR22404 MR22411     ; TPSW ﾜｰｸｻｰﾁ 治具1-1ﾗﾝﾌﾟ  TPSW ﾜｰｸｻｰﾁ 治具2-4ﾗﾝﾌﾟ
CON
SET MR22410              ; TPSW ﾜｰｸｻｰﾁ 治具2-3ﾗﾝﾌﾟ
CON
DW #177 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #4 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MPP
ANP MR21407              ; TPSW ﾜｰｸｻｰﾁ 治具2-4
ZRES MR22404 MR22411     ; TPSW ﾜｰｸｻｰﾁ 治具1-1ﾗﾝﾌﾟ  TPSW ﾜｰｸｻｰﾁ 治具2-4ﾗﾝﾌﾟ
CON
SET MR22411              ; TPSW ﾜｰｸｻｰﾁ 治具2-4ﾗﾝﾌﾟ
CON
DW #177 EM1000           ; RB1 動作ｺﾏﾝﾄ
CON
DW #8 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
LD @MR2002               ; Mainte中
AND= DM3000 #2107        ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANP R35002               ; During RB1 MOVE 
ZRES MR22304 MR22311     ; TPSW ﾜｰｸｻｰﾁ 治具1-1ﾗﾝﾌﾟ  TPSW ﾜｰｸｻｰﾁ 治具2-4ﾗﾝﾌﾟ
LD @MR2002               ; Mainte中
AND= DM3000 #2107        ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANF R35002               ; During RB1 MOVE 
MPS
LD= #176 EM1000          ; RB1 動作ｺﾏﾝﾄ
AND= #1 EM1001           ; RB1 数値指定1
ANL
SET MR22304              ; TPSW ﾜｰｸｻｰﾁ 治具1-1ﾗﾝﾌﾟ
MRD
LD= #176 EM1000          ; RB1 動作ｺﾏﾝﾄ
AND= #2 EM1001           ; RB1 数値指定1
ANL
SET MR22305              ; TPSW ﾜｰｸｻｰﾁ 治具1-2ﾗﾝﾌﾟ
MRD
LD= #176 EM1000          ; RB1 動作ｺﾏﾝﾄ
AND= #4 EM1001           ; RB1 数値指定1
ANL
SET MR22306              ; TPSW ﾜｰｸｻｰﾁ 治具1-3ﾗﾝﾌﾟ
MRD
LD= #176 EM1000          ; RB1 動作ｺﾏﾝﾄ
AND= #8 EM1001           ; RB1 数値指定1
ANL
SET MR22307              ; TPSW ﾜｰｸｻｰﾁ 治具1-4ﾗﾝﾌﾟ
MRD
LD= #177 EM1000          ; RB1 動作ｺﾏﾝﾄ
AND= #1 EM1001           ; RB1 数値指定1
ANL
SET MR22308              ; TPSW ﾜｰｸｻｰﾁ 治具2-1ﾗﾝﾌﾟ
MRD
LD= #177 EM1000          ; RB1 動作ｺﾏﾝﾄ
AND= #2 EM1001           ; RB1 数値指定1
ANL
SET MR22309              ; TPSW ﾜｰｸｻｰﾁ 治具2-2ﾗﾝﾌﾟ
MRD
LD= #177 EM1000          ; RB1 動作ｺﾏﾝﾄ
AND= #4 EM1001           ; RB1 数値指定1
ANL
SET MR22310              ; TPSW ﾜｰｸｻｰﾁ 治具2-3ﾗﾝﾌﾟ
MPP
LD= #177 EM1000          ; RB1 動作ｺﾏﾝﾄ
AND= #8 EM1001           ; RB1 数値指定1
ANL
SET MR22311              ; TPSW ﾜｰｸｻｰﾁ 治具2-4ﾗﾝﾌﾟ
LD @MR2002               ; Mainte中
AND= DM3000 #2107        ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND R35002               ; During RB1 MOVE 
MPS
LD= #176 EM1000          ; RB1 動作ｺﾏﾝﾄ
AND= #1 EM1001           ; RB1 数値指定1
ANL
MPS
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
SET MR22304              ; TPSW ﾜｰｸｻｰﾁ 治具1-1ﾗﾝﾌﾟ
MPP
ANB CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
RES MR22304              ; TPSW ﾜｰｸｻｰﾁ 治具1-1ﾗﾝﾌﾟ
MRD
LD= #176 EM1000          ; RB1 動作ｺﾏﾝﾄ
AND= #2 EM1001           ; RB1 数値指定1
ANL
MPS
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
SET MR22305              ; TPSW ﾜｰｸｻｰﾁ 治具1-2ﾗﾝﾌﾟ
MPP
ANB CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
RES MR22305              ; TPSW ﾜｰｸｻｰﾁ 治具1-2ﾗﾝﾌﾟ
MRD
LD= #176 EM1000          ; RB1 動作ｺﾏﾝﾄ
AND= #4 EM1001           ; RB1 数値指定1
ANL
MPS
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
SET MR22306              ; TPSW ﾜｰｸｻｰﾁ 治具1-3ﾗﾝﾌﾟ
MPP
ANB CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
RES MR22306              ; TPSW ﾜｰｸｻｰﾁ 治具1-3ﾗﾝﾌﾟ
MRD
LD= #176 EM1000          ; RB1 動作ｺﾏﾝﾄ
AND= #8 EM1001           ; RB1 数値指定1
ANL
MPS
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
SET MR22307              ; TPSW ﾜｰｸｻｰﾁ 治具1-4ﾗﾝﾌﾟ
MPP
ANB CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
RES MR22307              ; TPSW ﾜｰｸｻｰﾁ 治具1-4ﾗﾝﾌﾟ
MRD
LD= #177 EM1000          ; RB1 動作ｺﾏﾝﾄ
AND= #1 EM1001           ; RB1 数値指定1
ANL
MPS
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
SET MR22308              ; TPSW ﾜｰｸｻｰﾁ 治具2-1ﾗﾝﾌﾟ
MPP
ANB CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
RES MR22308              ; TPSW ﾜｰｸｻｰﾁ 治具2-1ﾗﾝﾌﾟ
MRD
LD= #177 EM1000          ; RB1 動作ｺﾏﾝﾄ
AND= #2 EM1001           ; RB1 数値指定1
ANL
MPS
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
SET MR22309              ; TPSW ﾜｰｸｻｰﾁ 治具2-2ﾗﾝﾌﾟ
MPP
ANB CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
RES MR22309              ; TPSW ﾜｰｸｻｰﾁ 治具2-2ﾗﾝﾌﾟ
MRD
LD= #177 EM1000          ; RB1 動作ｺﾏﾝﾄ
AND= #4 EM1001           ; RB1 数値指定1
ANL
MPS
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
SET MR22310              ; TPSW ﾜｰｸｻｰﾁ 治具2-3ﾗﾝﾌﾟ
MPP
ANB CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
RES MR22310              ; TPSW ﾜｰｸｻｰﾁ 治具2-3ﾗﾝﾌﾟ
MPP
LD= #177 EM1000          ; RB1 動作ｺﾏﾝﾄ
AND= #8 EM1001           ; RB1 数値指定1
ANL
MPS
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
SET MR22311              ; TPSW ﾜｰｸｻｰﾁ 治具2-4ﾗﾝﾌﾟ
MPP
ANB CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
RES MR22311              ; TPSW ﾜｰｸｻｰﾁ 治具2-4ﾗﾝﾌﾟ
;<h1/> MainTP 表示中ﾍﾟｰｼﾞNo2108
LD @MR2002               ; Mainte中
AND= DM3000 #2108        ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANB R35002               ; During RB1 MOVE 
MPS
ANP MR21900              ; TPSW RB2 定量移動X+
MPS
ANB MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #6 EM1000             ; RB1 動作ｺﾏﾝﾄ
CON
DW #1 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MPP
AND MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #7 EM1000             ; RB1 動作ｺﾏﾝﾄ
CON
DW #1 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MRD
ANP MR21901              ; TPSW RB2 定量移動X-
MPS
ANB MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #8 EM1000             ; RB1 動作ｺﾏﾝﾄ
CON
DW #1 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MPP
AND MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #9 EM1000             ; RB1 動作ｺﾏﾝﾄ
CON
DW #1 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MRD
ANP MR21902              ; TPSW RB2 定量移動Y+
MPS
ANB MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #6 EM1000             ; RB1 動作ｺﾏﾝﾄ
CON
DW #2 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MPP
AND MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #7 EM1000             ; RB1 動作ｺﾏﾝﾄ
CON
DW #2 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MRD
ANP MR21903              ; TPSW RB2 定量移動Y-
MPS
ANB MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #8 EM1000             ; RB1 動作ｺﾏﾝﾄ
CON
DW #2 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MPP
AND MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #9 EM1000             ; RB1 動作ｺﾏﾝﾄ
CON
DW #2 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MRD
ANP MR21904              ; TPSW RB2 定量移動Z+
MPS
ANB MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #6 EM1000             ; RB1 動作ｺﾏﾝﾄ
CON
DW #3 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MPP
AND MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #7 EM1000             ; RB1 動作ｺﾏﾝﾄ
CON
DW #3 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MRD
ANP MR21905              ; TPSW RB2 定量移動Z-
MPS
ANB MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #8 EM1000             ; RB1 動作ｺﾏﾝﾄ
CON
DW #3 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MPP
AND MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #9 EM1000             ; RB1 動作ｺﾏﾝﾄ
CON
DW #3 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MRD
ANP MR21906              ; TPSW RB2 定量移動θ+
MPS
ANB MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #6 EM1000             ; RB1 動作ｺﾏﾝﾄ
CON
DW #4 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MPP
AND MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #7 EM1000             ; RB1 動作ｺﾏﾝﾄ
CON
DW #4 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MPP
ANP MR21907              ; TPSW RB2 定量移動θ-
MPS
ANB MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #8 EM1000             ; RB1 動作ｺﾏﾝﾄ
CON
DW #4 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
MPP
AND MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #9 EM1000             ; RB1 動作ｺﾏﾝﾄ
CON
DW #4 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
LD @MR2002               ; Mainte中
LD= DM3000 #2105         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2106         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2107         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2108         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2115         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2116         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
ANB R35002               ; During RB1 MOVE 
ANB @MR4500              ; RB1 動作指令 Sub Start
ANB @MR4502              ; RB1 動作指令 Sub中
MPS
LDP MR23104              ; TPSW RB2起動SW
AND<> EM1000 #0          ; RB1 動作ｺﾏﾝﾄ
ANL
SET @MR2114
MPP
ANP MR23106              ; TPSW RB2原点復帰SW
DW #5 EM1000             ; RB1 動作ｺﾏﾝﾄ
CON
DW #0 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR2114
LD @MR2002               ; Mainte中
LD= DM3000 #2100         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2101         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
ANB R35002               ; During RB1 MOVE 
ANB @MR4500              ; RB1 動作指令 Sub Start
ANB @MR4502              ; RB1 動作指令 Sub中
AND MR21114              ; TPSW 機種切替位置
TMR #390 #10
CON
AND T390
AND<> EM1000 #0          ; RB1 動作ｺﾏﾝﾄ
SET @MR2114
MCR
STG @MR2114
ANB @MR4500              ; RB1 動作指令 Sub Start
ANB @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR2115
STG @MR2115
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
RES @MR4501              ; RB1 動作指令 Sub End
CON
RES @MR4503              ; RB1 動作指令 Sub HOLD End
CON
ENDS
;ﾍﾟｰｼﾞ切替時ｺﾏﾝﾄﾞ初期化
LD>= DM3000 #2105        ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND<= DM3000 #2116       ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND<> DM3000 DM3008      ; _MainTP　表示中ﾍﾟｰｼﾞNo  _MainTP　切替ﾍﾟｰｼﾞNo
DW #0 DM50950            ; TP ﾜｰｸ取出 位置設定
CON
DW #0 DM50951            ; TP RB選択 位置表示
CON
DW #0 DM50952            ; TP RBﾊﾝﾄﾞ 選択表示
CON
ZRES MR22000 MR22003     ; TPSW ﾗｲﾝ1選択 ﾗﾝﾌﾟ  TPSW ﾊﾝﾄﾞ2選択 ﾗﾝﾌﾟ
CON
DW #0 EM1000             ; RB1 動作ｺﾏﾝﾄ
CON
DW #0 EM1001             ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
LD<> DM50951 #0          ; TP RB選択 位置表示
OR<> DM50952 #0          ; TP RBﾊﾝﾄﾞ 選択表示
LDA MR21100              ; TPSW 待機位置
CON
CMP #0
CON
ANB CR2010               ; 演算結果がｾﾞﾛ
DW #0 DM50951            ; TP RB選択 位置表示
CON
DW #0 DM50952            ; TP RBﾊﾝﾄﾞ 選択表示
LD<> DM50951 #0          ; TP RB選択 位置表示
LDA MR21300              ; TPSW ﾊﾝﾄﾞ上昇
CON
CMP #0
CON
ANB CR2010               ; 演算結果がｾﾞﾛ
DW #0 DM50951            ; TP RB選択 位置表示
LD<> DM50952 #0          ; TP RBﾊﾝﾄﾞ 選択表示
LDA MR21200              ; TPSW ﾊﾝﾄﾞ1 治具1上空
CON
CMP #0
CON
ANB CR2010               ; 演算結果がｾﾞﾛ
DW #0 DM50952            ; TP RBﾊﾝﾄﾞ 選択表示
LDF MR22000              ; TPSW ﾗｲﾝ1選択 ﾗﾝﾌﾟ
ORF MR22001              ; TPSW ﾗｲﾝ2選択 ﾗﾝﾌﾟ
DW #0 DM50951            ; TP RB選択 位置表示
LDF MR22002              ; TPSW ﾊﾝﾄﾞ1選択 ﾗﾝﾌﾟ
ORF MR22003              ; TPSW ﾊﾝﾄﾞ2選択 ﾗﾝﾌﾟ
DW #0 DM50952            ; TP RBﾊﾝﾄﾞ 選択表示
;Maintenance　終了
STG @MR2908
ANB R39104               ; SELECT_Y_N Interlock
SET R39104               ; SELECT_Y_N Interlock
CON
DW #7 @DM21              ; ScreenNo /SELECT_Y_N
CON
DW #0 @DM22              ; Bz_Use /SELECT_Y_N
CON
SET @MR300               ; Task1 SELECT_Y_N
CON
JMP @MR2909
STG @MR2909
AND @MR301               ; Task1 Y/N END
RES @MR301               ; Task1 Y/N END
CON
RES R39104               ; SELECT_Y_N Interlock
CON
MPS
AND @MR306               ; Task1 Y/N
JMP @MR2000              ; Mainte
MPP
ANB @MR306               ; Task1 Y/N
JMP @MR2910
STG @MR2910
MCALL HOLD_REQUEST #1
JMP @MR2915              ; Mainte END
STG @MR2915              ; Mainte END
MPS
MCALL MODE_INDI #2
MPP
ANB @MR001               ; TASK1 ERROR
MPS
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
MPP
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
ANL
RES @MR2002              ; Mainte中
CON
JMP LR601                ; _Grp1_Task1_Fin.STG
;<h1/>ERROR
;MyTask Error Process Substance/エラー処理実体
STG @MR100               ; Task1 ERROR
ANB R39002               ; ERROR_DISP Busy
MPS
ZRES @MR105 @MR108       ; SW1  SW4
CON
LDA @DM9                 ; ReturnSW /ERROR_DISP
CON
TBCD
CON
STA @DM10
CON
DISN @DM10 @DM3 #4
MRD
DW #1 @DM0               ; TaskNo /ERROR_DISP
CON
BMOV @DM0 DM60000 #7     ; TaskNo /ERROR_DISP  TaskNo /ERROR_DISP
MPP
SET R39000               ; ERROR_DISP Start
CON
SET @MR102               ; Task1 ERROR Busy
CON
JMP @MR103
STG @MR103
AND R39002               ; ERROR_DISP Busy
AND= DM60008 @DM1        ; ReturnNo /ERROR_DISP  ErrorNo /ERROR_DISP
MPS
AND= DM60007 @DM6        ; ReturnSW /ERROR_DISP
SET @MR105               ; SW1
CON
JMP @MR104
MRD
AND= DM60007 @DM5        ; ReturnSW /ERROR_DISP
SET @MR106               ; SW2
CON
JMP @MR104
MRD
AND= DM60007 @DM4        ; ReturnSW /ERROR_DISP
SET @MR107               ; SW3
CON
JMP @MR104
MPP
AND= DM60007 @DM3        ; ReturnSW /ERROR_DISP
SET @MR108               ; SW4
CON
JMP @MR104
STG @MR104
ANB R39002               ; ERROR_DISP Busy
RES @MR102               ; Task1 ERROR Busy
CON
SET @MR101               ; Task1 ERROR_End
CON
ENDS
;<h1/>SELECT_ACT
;MyTask Select_ACT Process Substance/SELECT_ACT処理実体
STG @MR200               ; Task1 SELECT_ACT
ANB R39202               ; SELECT_ACT Busy
MPS
ZRES @MR205 @MR208       ; SW1  SW4
CON
DW #1 @DM30              ; TaskNo /SELECT_ACT
CON
BMOV @DM30 DM60030 #7    ; TaskNo /SELECT_ACT  TaskNo /SELECT_ACT
MPP
SET R39200               ; SELECT_ACT Start
CON
SET @MR202               ; Task1 SEL_ACT Busy
CON
JMP @MR203
STG @MR203
AND R39202               ; SELECT_ACT Busy
AND<> DM60037 #0         ; SelectSW /SELECT_ACT
MPS
AND= DM60037 #1          ; SelectSW /SELECT_ACT
SET @MR205               ; SW1
CON
JMP @MR204
MRD
AND= DM60037 #2          ; SelectSW /SELECT_ACT
SET @MR206               ; SW2
CON
JMP @MR204
MRD
AND= DM60037 #3          ; SelectSW /SELECT_ACT
SET @MR207               ; SW3
CON
JMP @MR204
MPP
AND= DM60037 #4          ; SelectSW /SELECT_ACT
SET @MR208               ; SW4
CON
JMP @MR204
STG @MR204
ANB R39202               ; SELECT_ACT Busy
RES @MR202               ; Task1 SEL_ACT Busy
CON
SET @MR201               ; Task1 SEL_ACT END
CON
ENDS
;<h1/>SELECT_Y_N
;MyTask Select_Y_N Process Substance/SELECT_Y_N処理実体
STG @MR300               ; Task1 SELECT_Y_N
ANB R39102               ; SELECT_Y_N Busy
MPS
ZRES @MR306 @MR307       ; Task1 Y/N
CON
DW #1 @DM20              ; TaskNo /SELECT_Y_N
CON
BMOV @DM20 DM60020 #3    ; TaskNo /SELECT_Y_N  TaskNo /SELECT_Y_N
MPP
SET R39100               ; SELECT_Y_N Start
CON
SET @MR302               ; Task1 Y_N Busy
CON
JMP @MR303
STG @MR303
AND R39102               ; SELECT_Y_N Busy
MPS
AND= DM60023 #1          ; Y_N /SELECT_Y_N
SET @MR306               ; Task1 Y/N
CON
JMP @MR304
MPP
AND= DM60023 #2          ; Y_N /SELECT_Y_N
RES @MR306               ; Task1 Y/N
CON
JMP @MR304
STG @MR304
ANB R39102               ; SELECT_Y_N Busy
RES @MR302               ; Task1 Y_N Busy
CON
SET @MR301               ; Task1 Y/N END
CON
ENDS
;<h1/>TIMEUP_ERROR
;MyTask TIMEUP_ERROR Process Substance/TIMEUP_ERROR処理実体
STG @MR400               ; Task1 TIMEUP_ERR
ANB R39302               ; TIMEUP_ERR Busy
MPS
DW #1 @DM40              ; TaskNo /TIMEUP_ERR
CON
BMOV @DM40 DM60040 #2    ; TaskNo /TIMEUP_ERR  TaskNo /TIMEUP_ERR
MPP
SET R39300               ; TIMEUP_ERR Start
CON
SET @MR402               ; Task1 TIMEUP Busy
CON
JMP @MR403
STG @MR403
AND R39302               ; TIMEUP_ERR Busy
JMP @MR404
STG @MR404
ANB R39302               ; TIMEUP_ERR Busy
RES @MR402               ; Task1 TIMEUP Busy
CON
SET @MR401               ; Task1 TIMEUP_END
CON
ENDS
;<h1/>SubRoutines/ｻﾌﾞﾙｰﾁﾝ
;[記述方法]
;・ｻﾌﾞﾙｰﾁﾝは本ﾌﾞｯｸﾏｰｸから下に記述していって下さい
;・ｻﾌﾞﾙｰﾁﾝは必ずﾌﾞｯｸﾏｰｸを挿入して処理内容を明確にする事
;<h1/> RB1 動作指令
STG @MR4500              ; RB1 動作指令 Sub Start
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
OR CR2002                ; 常時ON
ANB R35002               ; During RB1 MOVE 
ANB R35006               ; During RB1 RECOVERY MOVE
ANL
SET @MR4502              ; RB1 動作指令 Sub中
CON
SET R35000               ; RB1 MOVE
CON
JMP @MR4505
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANB CR2002               ; 常時ON
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR4505
LD R35001                ; RB1 MOVE END
OR R35005                ; RB1 RECOVERY MOVE END
ANL
MPS
LDB R35003               ; RB1 Status Alarm
ANB R35007               ; RB1 Moving Alarm
ANL
MPS
ANB R35015               ; RB1 中断受付
RES R35001               ; RB1 MOVE END
CON
RES R35005               ; RB1 RECOVERY MOVE END
CON
SET R35011               ; RB1 動作正常終了
CON
JMP @MR4506
MPP
AND R35015               ; RB1 中断受付
DW #8406 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #47 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4608
MRD
LDB R35015               ; RB1 中断受付
AND R35003               ; RB1 Status Alarm
ANL
MPS
AND= EM1005 #2           ; RB1 動作ｽﾃｰﾀｽ1
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #12 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4600
MRD
AND= EM1005 #1           ; RB1 動作ｽﾃｰﾀｽ1
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #11 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4600
MPP
AND= EM1005 #5           ; RB1 動作ｽﾃｰﾀｽ1
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #10 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4600
MPP
LDB R35015               ; RB1 中断受付
AND R35007               ; RB1 Moving Alarm
ANL
MPS
AND= EM1007 #80          ; RB1 動作中ｴﾗｰｺｰﾄﾞ
DW #8000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #30 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4604
MRD
AND= EM1007 #81          ; RB1 動作中ｴﾗｰｺｰﾄﾞ
DW #8000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #31 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4604
MRD
AND= EM1007 #82          ; RB1 動作中ｴﾗｰｺｰﾄﾞ
DW #8400 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #32 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4604
MRD
AND= EM1007 #83          ; RB1 動作中ｴﾗｰｺｰﾄﾞ
DW #8400 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #33 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4604
MRD
AND= EM1007 #85          ; RB1 動作中ｴﾗｰｺｰﾄﾞ
DW #8400 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #34 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4604
MRD
AND= EM1007 #86          ; RB1 動作中ｴﾗｰｺｰﾄﾞ
DW #8400 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #35 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4604
MRD
AND= EM1007 #90          ; RB1 動作中ｴﾗｰｺｰﾄﾞ
DW #8400 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #40 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4604
MRD
AND= EM1007 #91          ; RB1 動作中ｴﾗｰｺｰﾄﾞ
DW #8000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #41 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4604
MRD
AND= EM1007 #92          ; RB1 動作中ｴﾗｰｺｰﾄﾞ
DW #8400 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #42 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4604
MRD
AND= EM1007 #93          ; RB1 動作中ｴﾗｰｺｰﾄﾞ
DW #8400 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #43 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4604
MRD
AND= EM1007 #95          ; RB1 動作中ｴﾗｰｺｰﾄﾞ
DW #8400 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #44 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4604
MPP
AND= EM1007 #96          ; RB1 動作中ｴﾗｰｺｰﾄﾞ
DW #8400 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #45 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4604
STG @MR4506
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
OR CR2002                ; 常時ON
ANL
SET @MR4501              ; RB1 動作指令 Sub End
CON
RES @MR4502              ; RB1 動作指令 Sub中
CON
ENDS
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
ANB CR2002               ; 常時ON
ANL
SET @MR1900              ; Main1 HALT許可
; 動作終了時の異常処理
STG @MR4600
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
MCALL MODE_INDI #2
SET R39004               ; ｴﾗｰ中
CON
RES R35001               ; RB1 MOVE END
CON
RES R35005               ; RB1 RECOVERY MOVE END
CON
RES R35003               ; RB1 Status Alarm
CON
SET @MR100               ; Task1 ERROR
CON
JMP @MR4601
STG @MR4601
AND @MR101               ; Task1 ERROR_End
RES @MR101               ; Task1 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
SET @MR4503              ; RB1 動作指令 Sub HOLD End
CON
JMP @MR4506
; 動作中異常発生時の異常処理
STG @MR4604
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
RES R35001               ; RB1 MOVE END
CON
RES R35005               ; RB1 RECOVERY MOVE END
CON
RES R35007               ; RB1 Moving Alarm
CON
SET @MR100               ; Task1 ERROR
CON
JMP @MR4605
STG @MR4605
AND @MR101               ; Task1 ERROR_End
RES @MR101               ; Task1 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR105               ; SW1
DW #1 EM1003             ; RB1 復帰ｺﾏﾝﾄﾞ
CON
ANB R35000               ; RB1 MOVE
SET R35004               ; RB1 RECOVERY MOVE
CON
JMP @MR4505
MRD
AND @MR106               ; SW2
DW #2 EM1003             ; RB1 復帰ｺﾏﾝﾄﾞ
CON
ANB R35000               ; RB1 MOVE
SET R35004               ; RB1 RECOVERY MOVE
CON
JMP @MR4505
MPP
AND @MR107               ; SW3
SET @MR4503              ; RB1 動作指令 Sub HOLD End
CON
DW #3 EM1003             ; RB1 復帰ｺﾏﾝﾄﾞ
CON
ANB R35000               ; RB1 MOVE
SET R35004               ; RB1 RECOVERY MOVE
CON
JMP @MR4505
;<h1/>吸着失敗処理
STG @MR4608
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
RES R35001               ; RB1 MOVE END
CON
RES R35005               ; RB1 RECOVERY MOVE END
CON
RES R35003               ; RB1 Status Alarm
CON
SET @MR100               ; Task1 ERROR
CON
JMP @MR4609
STG @MR4609
AND @MR101               ; Task1 ERROR_End
RES @MR101               ; Task1 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR105               ; SW1
JMP @MR4610
MRD
AND @MR106               ; SW2
JMP @MR4612
MPP
AND @MR108               ; SW4
JMP @MR4614
STG @MR4610
RES R35015               ; RB1 中断受付
CON
SET @MR4611              ; ﾘﾄﾗｲ
CON
RES @MR4613              ; ﾜｰｸ確認
CON
RES @MR4615              ; ﾜｰｸ取出し
CON
SET @MR4501              ; RB1 動作指令 Sub End
CON
RES @MR4502              ; RB1 動作指令 Sub中
CON
SET R35011               ; RB1 動作正常終了
CON
ENDS
STG @MR4612
RES R35015               ; RB1 中断受付
CON
SET @MR4613              ; ﾜｰｸ確認
CON
RES @MR4611              ; ﾘﾄﾗｲ
CON
RES @MR4615              ; ﾜｰｸ取出し
CON
SET @MR4501              ; RB1 動作指令 Sub End
CON
RES @MR4502              ; RB1 動作指令 Sub中
CON
SET R35011               ; RB1 動作正常終了
CON
ENDS
STG @MR4614
RES R35015               ; RB1 中断受付
CON
SET @MR4615              ; ﾜｰｸ取出し
CON
RES @MR4611              ; ﾘﾄﾗｲ
CON
RES @MR4613              ; ﾜｰｸ確認
CON
SET @MR4501              ; RB1 動作指令 Sub End
CON
RES @MR4502              ; RB1 動作指令 Sub中
CON
SET R35011               ; RB1 動作正常終了
CON
ENDS
;<h1/> RB1 初期設定
STG @MR4700              ; RB初期設定 Sub Start
ANB @MR4500              ; RB1 動作指令 Sub Start
ANB @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
ANB @MR4702              ; RB初期設定 Sub中
SET @MR4702              ; RB初期設定 Sub中
CON
JMP @MR4710
; Command 33 ﾄﾚｲ分割数設定
STG @MR4710
DW #33 EM1000            ; RB1 動作ｺﾏﾝﾄ
CON
LDA DM402                ; ﾄﾚｲ分割数Y(1-128)
CON
STA EM1001               ; RB1 数値指定1
CON
LDA DM400                ; ﾄﾚｲ分割数X(1-128)
CON
STA EM1002               ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR4711
STG @MR4711
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR4712
; Command 35 機種初期設定
STG @MR4712
DW #35 EM1000            ; RB1 動作ｺﾏﾝﾄ
CON
LDA DM5260               ; 選択中ｺｰﾄﾞ
CON
STA EM1001               ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR4807
STG @MR4807
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR4808
; Command 36 動作ﾓｰﾄﾞ設定
STG @MR4808
DW #36 EM1000            ; RB1 動作ｺﾏﾝﾄ
CON
LDA DM7018               ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
CON
STA EM1001               ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR4715
STG @MR4715
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR4800
; Command 1 ﾛﾎﾞｯﾄ速度設定
STG @MR4800
MPS
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
OR R46101                ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
ANL
DW #1 EM1000             ; RB1 動作ｺﾏﾝﾄ
CON
LDA DM7000               ; RB1 速度設定(1-100%)
CON
STA EM1001               ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR4809
MPP
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
DW #1 EM1000             ; RB1 動作ｺﾏﾝﾄ
CON
LDA DM7020               ; ﾒﾝﾃ RB1 速度設定(1-100%)
CON
STA EM1001               ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR4809
STG @MR4809
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR4810
; Command 2 ﾛﾎﾞｯﾄ加減速設定
STG @MR4810
MPS
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
OR R46101                ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
ANL
DW #2 EM1000             ; RB1 動作ｺﾏﾝﾄ
CON
LDA DM7002               ; RB1 加減速設定(1-100%)
CON
STA EM1001               ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR4811
MPP
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
DW #2 EM1000             ; RB1 動作ｺﾏﾝﾄ
CON
LDA DM7022               ; ﾒﾝﾃ RB1 加減速設定(1-100%)
CON
STA EM1001               ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR4811
STG @MR4811
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR4812
; Command 3 ﾛﾎﾞｯﾄ速度(直線補間)設定
STG @MR4812
MPS
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
OR R46101                ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
ANL
DW #3 EM1000             ; RB1 動作ｺﾏﾝﾄ
CON
LDA DM7004               ; RB1 速度(直線補間)設定(1-200)
CON
STA EM1001               ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR4813
MPP
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
DW #3 EM1000             ; RB1 動作ｺﾏﾝﾄ
CON
LDA DM7024               ; ﾒﾝﾃ RB1 速度(直線補間)設定(1-200
CON
STA EM1001               ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR4813
STG @MR4813
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
RES @MR4501              ; RB1 動作指令 Sub End
CON
JMP @MR4814
; Command 4 ﾛﾎﾞｯﾄ加減速(直線補間)設定
STG @MR4814
MPS
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
OR R46101                ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
ANL
DW #4 EM1000             ; RB1 動作ｺﾏﾝﾄ
CON
LDA DM7006               ; RB1 加減速(直線補間)設定(1-250)
CON
STA EM1001               ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR4815
MPP
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
DW #4 EM1000             ; RB1 動作ｺﾏﾝﾄ
CON
LDA DM7026               ; ﾒﾝﾃ RB1 加減速(直線補間)設定(1-2
CON
STA EM1001               ; RB1 数値指定1
CON
DW #0 EM1002             ; RB1 数値指定2
CON
SET @MR4500              ; RB1 動作指令 Sub Start
CON
JMP @MR4815
STG @MR4815
ANB @MR4500              ; RB1 動作指令 Sub Start
AND @MR4501              ; RB1 動作指令 Sub End
ANB @MR4502              ; RB1 動作指令 Sub中
RES @MR4501              ; RB1 動作指令 Sub End
CON
SET @MR4701              ; RB初期設定 Sub END
CON
RES @MR4702              ; RB初期設定 Sub中
CON
ENDS
;<h1/>HALT
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2019                 ; LDより PAUSE要求
AND @MR1900              ; Main1 HALT許可
LD @MR1901               ; Main2 HALT許可
ORB @MR4002              ; Main2 Busy
ANL
TMR @2 #2
CON
AND @T2
OUT @MR005
CON
@SET R42601              ; _Grp1_Task1_ﾎﾟｰｽﾞ許可
LD @MR005
ANB R42602               ; _Grp1_Task2_ﾎﾟｰｽﾞ許可
LD=.D #4 R42600          ; _Grp1_Task0_ﾎﾟｰｽﾞ許可
OR=.D #0 R42600          ; _Grp1_Task0_ﾎﾟｰｽﾞ許可
ANL
TMR #500 #30
CON
AND T500
@SET R42601              ; _Grp1_Task1_ﾎﾟｰｽﾞ許可
LD R42601                ; _Grp1_Task1_ﾎﾟｰｽﾞ許可
ANB @MR001               ; TASK1 ERROR
ORF @MR001               ; TASK1 ERROR
MPS
RES @MR1900              ; Main1 HALT許可
CON
RES @MR1901              ; Main2 HALT許可
MPP
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2019                ; LDより PAUSE要求
ANL
RES R42601               ; _Grp1_Task1_ﾎﾟｰｽﾞ許可
END
ENDH
