DEVICE:53
;MODULE:R_Cycletime
;MODULE_TYPE:0
;<h1/>ｻｲｸﾙﾀｲﾑ計測/Cycle time measurement
;初期化/Initialize
LDP MR201                ; Rｻｲｸﾙﾀｲﾑ測定ﾌﾗｸﾞ
FMOV #0 TM30 #20         ; R全検査ｻｲｸﾙﾀｲﾑ
DW #0 @TM0               ; ｻｲｸﾙﾀｲﾑ一時保存(100ms)
CON
DW #0 TM91               ; R各検査ｻｲｸﾙ測定用ﾌﾗｸﾞ
CON
DW #0 @EM0               ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)
;経過時間記録/Elapsed time record
LD MR201                 ; Rｻｲｸﾙﾀｲﾑ測定ﾌﾗｸﾞ
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
@INC @EM0                ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)
;各工程時間記録/Each process time record
LD MR201                 ; Rｻｲｸﾙﾀｲﾑ測定ﾌﾗｸﾞ
MPS
ANP TM91.0
MPS
RES TM91.0
CON
MOV @EM0 TM31            ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)  R検査開始準備動作
MPP
MOV @EM0 @TM0            ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)  ｻｲｸﾙﾀｲﾑ一時保存(100ms)
MRD
ANP TM91.1
MPS
RES TM91.1
CON
LDA.S @EM0               ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)
CON
SUB.S @TM0               ; ｻｲｸﾙﾀｲﾑ一時保存(100ms)
CON
STA.S TM32               ; R誤配管検査 ｻｲｸﾙﾀｲﾑ
MPP
MOV @EM0 @TM0            ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)  ｻｲｸﾙﾀｲﾑ一時保存(100ms)
MRD
ANP TM91.2
MPS
RES TM91.2
CON
LDA.S @EM0               ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)
CON
SUB.S @TM0               ; ｻｲｸﾙﾀｲﾑ一時保存(100ms)
CON
STA.S TM33               ; Rﾘｰｸ検査 ｻｲｸﾙﾀｲﾑ
MPP
MOV @EM0 @TM0            ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)  ｻｲｸﾙﾀｲﾑ一時保存(100ms)
MRD
ANP TM91.3
MPS
RES TM91.3
CON
LDA.S @EM0               ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)
CON
SUB.S @TM0               ; ｻｲｸﾙﾀｲﾑ一時保存(100ms)
CON
STA.S TM34               ; R逆止弁検査 ｻｲｸﾙﾀｲﾑ
MPP
MOV @EM0 @TM0            ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)  ｻｲｸﾙﾀｲﾑ一時保存(100ms)
MRD
ANP TM91.4
MPS
RES TM91.4
CON
LDA.S @EM0               ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)
CON
SUB.S @TM0               ; ｻｲｸﾙﾀｲﾑ一時保存(100ms)
CON
STA.S TM35               ; R工程5 ｻｲｸﾙﾀｲﾑ
MPP
MOV @EM0 @TM0            ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)  ｻｲｸﾙﾀｲﾑ一時保存(100ms)
MPP
ANP TM91.5
MPS
RES TM91.5
CON
LDA.S @EM0               ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)
CON
SUB.S @TM0               ; ｻｲｸﾙﾀｲﾑ一時保存(100ms)
CON
STA.S TM36               ; R工程6 ｻｲｸﾙﾀｲﾑ
MPP
MOV @EM0 @TM0            ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)  ｻｲｸﾙﾀｲﾑ一時保存(100ms)
;ｻｲｸﾙﾀｲﾑ計測終了/Cycle time measurement end
LDF MR201                ; Rｻｲｸﾙﾀｲﾑ測定ﾌﾗｸﾞ
MPS
LDA.S @EM0               ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)
CON
SUB.S @TM0               ; ｻｲｸﾙﾀｲﾑ一時保存(100ms)
CON
STA.S TM40               ; R検査終了動作
MPP
MOV @EM0 TM30            ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)  R全検査ｻｲｸﾙﾀｲﾑ
END
ENDH
