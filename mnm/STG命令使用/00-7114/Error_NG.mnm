DEVICE:53
;MODULE:Error_NG
;MODULE_TYPE:0
;<h1/>ｴﾗｰ処理部/Error processing unit
LD MR902                 ; ｴﾗｰ
ANB @MR015               ; ｴﾗｰ処理中
SET @MR015               ; ｴﾗｰ処理中
CON
SET @MR000               ; ｴﾗｰ処理開始
;処理開始/Start processing
STG @MR000               ; ｴﾗｰ処理開始
SET MR30115              ; TP)BzRstSw 表示灯
CON
JMP @MR001
LDP MR30114              ; TP)BzRstSw
RES MR30115              ; TP)BzRstSw 表示灯
;ｴﾗｰ画面表示：ﾍﾟｰｼﾞ600/Error screen display: page 600
;解除待ち/Pending wait
STG @MR001
DW #600 EM30001          ; TP)ﾍﾟｰｼﾞ画面切替用No.
MPS
AND MR30114              ; TP)BzRstSw
SET MR114                ; NGﾘｾｯﾄ処理ﾌﾞｻﾞｰ解除
MRD
AND MR911                ; 検査NG（ｷｰsw解除必要Err）
MPS
AND MR005                ; ﾗﾝﾌﾟ点滅用(0.5S)
OUT MR30408              ; (TP)ｷｰsw要求LP
MPP
AND R2001                ; ｷｰｽｲｯﾁ_L 
RES MR30115              ; TP)BzRstSw 表示灯
CON
SET MR114                ; NGﾘｾｯﾄ処理ﾌﾞｻﾞｰ解除
CON
JMP @MR002
MPP
LDB MR911                ; 検査NG（ｷｰsw解除必要Err）
AND MR30114              ; TP)BzRstSw
ANL
JMP @MR002
;ｽﾀｰﾄsw入力待ち/Wait for start sw input
STG @MR002
OUT MR202                ; ｴﾗｰ解除要求L
CON
ANP R2000                ; ｽﾀｰﾄSW_L 
ANB MR900                ; 重度異常：電源再投入必要
JMP @MR003
;ｴﾗｰ終了：ﾌﾗｸﾞﾘｾｯﾄ/Error termination: Flag reset
STG @MR003
RES MR902                ; ｴﾗｰ
CON
RES MR114                ; NGﾘｾｯﾄ処理ﾌﾞｻﾞｰ解除
CON
DW #0 DM148              ; ｴﾗｰ詳細
CON
DW #0 DM149              ; ｴﾗｰ画面詳細ﾒｯｾｰｼﾞ
CON
RES @MR015               ; ｴﾗｰ処理中
CON
MPS
AND MR911                ; 検査NG（ｷｰsw解除必要Err）
JMP @MR004
MPP
ANB MR911                ; 検査NG（ｷｰsw解除必要Err）
JMP @MR005
;TP520：検査結果/TP 520: Inspection result
STG @MR004
DW #520 EM30001          ; TP)ﾍﾟｰｼﾞ画面切替用No.
CON
RES MR911                ; 検査NG（ｷｰsw解除必要Err）
CON
ENDS
;TP500：ﾒｲﾝ画面/TP 500: Main screen
STG @MR005
MPS
ANB MR304                ; 原点復帰中
MPS
LDB MR30402              ; TP)装置ﾘｰｸ検査ﾓｰﾄﾞ
ANB MR30404              ; (TP)ﾘｰｸﾃｽﾀｰ公正ﾓｰﾄﾞ
ANB MR30406              ; (TP)ﾘｰｸﾃｽﾀｰNG調整ﾓｰﾄﾞ
ANB MR30100              ; TP)手動ﾊﾞﾙﾌﾞON/OFF
ANL
DW #500 EM30001          ; TP)ﾍﾟｰｼﾞ画面切替用No.
CON
ENDS
MRD
AND MR30402              ; TP)装置ﾘｰｸ検査ﾓｰﾄﾞ
MPS
ANB LR1915               ; New MC leak
DW #812 EM30001          ; TP)ﾍﾟｰｼﾞ画面切替用No.
CON
ENDS
MPP
AND LR1915               ; New MC leak
DW #821 EM30001          ; TP)ﾍﾟｰｼﾞ画面切替用No.
CON
ENDS
MRD
AND MR30404              ; (TP)ﾘｰｸﾃｽﾀｰ公正ﾓｰﾄﾞ
DW #817 EM30001          ; TP)ﾍﾟｰｼﾞ画面切替用No.
CON
ENDS
MRD
AND MR30406              ; (TP)ﾘｰｸﾃｽﾀｰNG調整ﾓｰﾄﾞ
DW #818 EM30001          ; TP)ﾍﾟｰｼﾞ画面切替用No.
CON
ENDS
MPP
AND MR30100              ; TP)手動ﾊﾞﾙﾌﾞON/OFF
DW #801 EM30001          ; TP)ﾍﾟｰｼﾞ画面切替用No.
CON
ENDS
MPP
AND MR304                ; 原点復帰中
DW #0 EM30001            ; TP)ﾍﾟｰｼﾞ画面切替用No.
CON
ENDS
;<h1/>Err4ﾒﾓﾘｰｶｰﾄﾞｴﾗｰ/Err4 Memory card error
LD MR112                 ; ﾒﾓﾘｶｰﾄﾞｴﾗｰ
ORB CR3213               ; ﾒﾓﾘｶｰﾄﾞあり
ANB MR902                ; ｴﾗｰ
ANB @MR100
DW #4 DM149              ; ｴﾗｰ画面詳細ﾒｯｾｰｼﾞ
CON
SET MR902                ; ｴﾗｰ
CON
SET MR31003              ; Err4ﾒﾓﾘｰｶｰﾄﾞｴﾗｰ
CON
@SET @MR100
;TP画面602：ﾒﾓﾘｰｶｰﾄﾞｴﾗｰ詳細/TP screen 602: Memory card error details
STG @MR100
SET MR900                ; 重度異常：電源再投入必要
CON
MPS
ANP MR30114              ; TP)BzRstSw
DW #602 EM30001          ; TP)ﾍﾟｰｼﾞ画面切替用No.
MPP
ANB MR902                ; ｴﾗｰ
RES MR112                ; ﾒﾓﾘｶｰﾄﾞｴﾗｰ
CON
RES MR31003              ; Err4ﾒﾓﾘｰｶｰﾄﾞｴﾗｰ
CON
ENDS
;<h1/>Err7元圧異常/Err 7 source pressure error
;<<元圧異常>>
;<<Main pressure abnormal>>
LDB R2002                ; 元圧空検出_L 
TMR @15 #50
CON
AND @T15
ANB @MR103
ANB MR902                ; ｴﾗｰ
DW #7 DM149              ; ｴﾗｰ画面詳細ﾒｯｾｰｼﾞ
CON
SET MR902                ; ｴﾗｰ
CON
SET MR31006              ; Err7元圧異常
CON
@SET @MR103
STG @MR103
MPS
LD MR304                 ; 原点復帰中
OR MR306                 ; 自動運転中
OR MR307                 ; ﾒﾝﾃ動作中
ANL
SET MR900                ; 重度異常：電源再投入必要
MPP
ANB MR902                ; ｴﾗｰ
RES MR31006              ; Err7元圧異常
CON
ENDS
;<h1/>Err13ｼﾘﾝﾀﾞｰｾﾝｻｰｴﾗｰ/Err 13 cylinder sensor error
;<<シリンダセンサエラー>>
;<<Cylinder sensor error>>
;ｼﾘﾝﾀﾞｰｾﾝｻｰｴﾗｰ処理/Cylinder sensor error processing
LD CR2008                ; 運転開始時1ｽｷｬﾝON
DW #0 DM150              ; ｼﾘﾝﾀﾞｰｴﾗｰ番号
LDB MR306                ; 自動運転中
CJ #1
LD MR8400                ; ﾏｰｷﾝｸﾞ ﾍﾟﾝL前進
ANB R2114                ; ﾏｰｷﾝｸﾞ ﾍﾟﾝL前進
LD MR8400                ; ﾏｰｷﾝｸﾞ ﾍﾟﾝL前進
AND R2115                ; ﾏｰｷﾝｸﾞ ﾍﾟﾝL後退
ORL
AND DM824.1              ; ﾏｰｷﾝｸﾞﾍﾟﾝ1有効(=ON
AND= DM150 #0            ; ｼﾘﾝﾀﾞｰｴﾗｰ番号
TMR @0 #50
CON
AND @T0
DW #2114 DM150           ; ｼﾘﾝﾀﾞｰｴﾗｰ番号
LD MR8401                ; ﾏｰｷﾝｸﾞ ﾍﾟﾝL後退
AND R2114                ; ﾏｰｷﾝｸﾞ ﾍﾟﾝL前進
LD MR8401                ; ﾏｰｷﾝｸﾞ ﾍﾟﾝL後退
ANB R2115                ; ﾏｰｷﾝｸﾞ ﾍﾟﾝL後退
ORL
AND DM824.1              ; ﾏｰｷﾝｸﾞﾍﾟﾝ1有効(=ON
AND= DM150 #0            ; ｼﾘﾝﾀﾞｰｴﾗｰ番号
TMR @1 #50
CON
AND @T1
DW #2115 DM150           ; ｼﾘﾝﾀﾞｰｴﾗｰ番号
LABEL #1
LD<> DM150 #0            ; ｼﾘﾝﾀﾞｰｴﾗｰ番号
ANB MR902                ; ｴﾗｰ
ANB @MR105
DW #13 DM149             ; ｴﾗｰ画面詳細ﾒｯｾｰｼﾞ
CON
SET MR902                ; ｴﾗｰ
CON
SET MR31012              ; Err13ｼﾘﾝﾀﾞｰｾﾝｻｰｴﾗｰ
CON
@SET @MR105
STG @MR105
MPS
ANP MR30114              ; TP)BzRstSw
DW #606 EM30001          ; TP)ﾍﾟｰｼﾞ画面切替用No.
MPP
ANB MR902                ; ｴﾗｰ
DW #0 DM150              ; ｼﾘﾝﾀﾞｰｴﾗｰ番号
CON
RES MR31012              ; Err13ｼﾘﾝﾀﾞｰｾﾝｻｰｴﾗｰ
CON
ENDS
END
ENDH
