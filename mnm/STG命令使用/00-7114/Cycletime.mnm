DEVICE:53
;MODULE:Cycletime
;MODULE_TYPE:0
;<h1/>ｻｲｸﾙﾀｲﾑ計測/Cycle time measurement
;初期化/Initialize
LDP MR200                ; ｻｲｸﾙﾀｲﾑ測定ﾌﾗｸﾞ
FMOV #0 TM50 #20         ; 全検査ｻｲｸﾙﾀｲﾑ
DW #0 @TM0               ; ｻｲｸﾙﾀｲﾑ一時保存(100ms)
CON
DW #0 TM90               ; 各検査ｻｲｸﾙ測定用ﾌﾗｸﾞ
CON
DW #0 @EM0               ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)
;経過時間記録/Elapsed time record
LD MR200                 ; ｻｲｸﾙﾀｲﾑ測定ﾌﾗｸﾞ
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
@INC @EM0                ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)
;各工程時間記録/Each process time record
LD MR200                 ; ｻｲｸﾙﾀｲﾑ測定ﾌﾗｸﾞ
MPS
ANP TM90.0               ; ｻｲｸﾙ測定_検査開始準備動作
MPS
RES TM90.0               ; ｻｲｸﾙ測定_検査開始準備動作
CON
MOV @EM0 TM51            ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)  検査開始準備動作
MPP
MOV @EM0 @TM0            ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)  ｻｲｸﾙﾀｲﾑ一時保存(100ms)
MRD
ANP TM90.1               ; ｻｲｸﾙ測定_誤配管検査
MPS
RES TM90.1               ; ｻｲｸﾙ測定_誤配管検査
CON
LDA.S @EM0               ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)
CON
SUB.S @TM0               ; ｻｲｸﾙﾀｲﾑ一時保存(100ms)
CON
STA.S TM52               ; 誤配管検査 ｻｲｸﾙﾀｲﾑ
MPP
MOV @EM0 @TM0            ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)  ｻｲｸﾙﾀｲﾑ一時保存(100ms)
MRD
ANP TM90.2               ; ｻｲｸﾙ測定_ﾘｰｸ検査
MPS
RES TM90.2               ; ｻｲｸﾙ測定_ﾘｰｸ検査
CON
LDA.S @EM0               ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)
CON
SUB.S @TM0               ; ｻｲｸﾙﾀｲﾑ一時保存(100ms)
CON
STA.S TM53               ; ﾘｰｸ検査 ｻｲｸﾙﾀｲﾑ
MPP
MOV @EM0 @TM0            ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)  ｻｲｸﾙﾀｲﾑ一時保存(100ms)
MRD
ANP TM90.3               ; ｻｲｸﾙ測定_逆止弁検査
MPS
RES TM90.3               ; ｻｲｸﾙ測定_逆止弁検査
CON
LDA.S @EM0               ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)
CON
SUB.S @TM0               ; ｻｲｸﾙﾀｲﾑ一時保存(100ms)
CON
STA.S TM54               ; 逆止弁検査 ｻｲｸﾙﾀｲﾑ
MPP
MOV @EM0 @TM0            ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)  ｻｲｸﾙﾀｲﾑ一時保存(100ms)
MRD
ANP TM90.4               ; ｻｲｸﾙ測定_
MPS
RES TM90.4               ; ｻｲｸﾙ測定_
CON
LDA.S @EM0               ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)
CON
SUB.S @TM0               ; ｻｲｸﾙﾀｲﾑ一時保存(100ms)
CON
STA.S TM55               ; 工程5 ｻｲｸﾙﾀｲﾑ
MPP
MOV @EM0 @TM0            ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)  ｻｲｸﾙﾀｲﾑ一時保存(100ms)
MPP
ANP TM90.5               ; ｻｲｸﾙ測定_
MPS
RES TM90.5               ; ｻｲｸﾙ測定_
CON
LDA.S @EM0               ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)
CON
SUB.S @TM0               ; ｻｲｸﾙﾀｲﾑ一時保存(100ms)
CON
STA.S TM56               ; 工程6 ｻｲｸﾙﾀｲﾑ
MPP
MOV @EM0 @TM0            ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)  ｻｲｸﾙﾀｲﾑ一時保存(100ms)
;ｻｲｸﾙﾀｲﾑ計測終了/Cycle time measurement end
LDF MR200                ; ｻｲｸﾙﾀｲﾑ測定ﾌﾗｸﾞ
MPS
LDA.S @EM0               ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)
CON
SUB.S @TM0               ; ｻｲｸﾙﾀｲﾑ一時保存(100ms)
CON
STA.S TM60               ; 検査終了動作
MPP
MOV @EM0 TM50            ; ｻｲｸﾙﾀｲﾑ計測用現在経過時間(100ms)  全検査ｻｲｸﾙﾀｲﾑ
END
ENDH
