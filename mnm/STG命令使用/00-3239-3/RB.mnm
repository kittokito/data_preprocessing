DEVICE:53
;MODULE:RB
;MODULE_TYPE:0
;SCRIPT_TYPE:
LDP R46104               ; _非常停止中　ﾓｰﾄﾞﾌﾗｸﾞ
DW #0 DM10700            ; RB2 動作ｺﾏﾝﾄﾞ/数値指定1
CON
DW #0 DM10701            ; RB2 数値指定2/制御出力
CON
ZRES R35000 R35115       ; RB1 MOVE
CON
ZRES @R100 @R2915
;動作MONITOR
LD= R35000 #0            ; RB1 MOVE
AND= R35100 #0           ; RB2 MOVE
AND= R35200 #0           ; RB3 MOVE
AND= R35300 #0           ; RB4 MOVE
AND= R35400 #0           ; RB5 MOVE
AND= R35500 #0           ; RB6 MOVE
AND= R35600 #0           ; RB7 MOVE
AND= R35700 #0           ; RB8 MOVE
AND= R35800 #0           ; RB9 MOVE
AND= R35900 #0           ; RB10 MOVE
AND= R36000 #0           ; RB11 MOVE
AND= R36100 #0           ; RB12 MOVE
AND= R36200 #0           ; RB13 MOVE
AND= R36300 #0           ; RB14 MOVE
AND= R36400 #0           ; RB15 MOVE
AND= R36500 #0           ; RB16 MOVE
AND= R36600 #0           ; RB17 MOVE
AND= R36700 #0           ; RB18 MOVE
AND= R36800 #0           ; RB19 MOVE
AND= R36900 #0           ; RB20 MOVE
INV
OUT R39900               ; RB動作中
;<h1/>RB2制御
;<h1/> RB2 プログラム起動
LDB DM10501.11           ; RB2 Ctr_READY
AND DM10501.8            ; RB2 RB_READY
INV
FLIK #50 #50 @MR215
LD @MR215
OUT DM10701.9            ; RB2 Prg_START
LD MR012
OUT DM10701.15           ; RB2 Reset
;<h1/> RB2 動作コマンド
STG R35100               ; RB2 MOVE
AND DM10501.8            ; RB2 RB_READY
ANB DM10501.9            ; RB2 RB_BUSY
ANB DM10501.11           ; RB2 Ctr_READY
ANB R35102               ; During RB2 MOVE
ANB R35106               ; During RB2 RECOVERY MOVE
ZRES EM1013 EM1015       ; RB2 動作ｽﾃｰﾀｽ1  RB2 動作中ｴﾗｰｺｰﾄﾞ
CON
SET R35102               ; During RB2 MOVE
CON
JMP @R200
STG @R200
AND @R201
JMP @R202
;TYPE EM1008-EM1010.U,DM10700.U,DM10701.U
;
;DM10700 = ANDA(EM1008,$00FF)
;DM10700 = ORA(DM10700,SLA(EM1009,8))
;DM10701 = ANDA(EM1010,$00FF)
;SET (@R201)
LD @R200
NCJ #1001
;TYPE EM1008-EM1010.U,DM10700.U,DM10701.U
;
;DM10700 = ANDA(EM1008,$00FF)
;
LD CR2002                ; 常時ON
LDA EM1008               ; RB2 動作ｺﾏﾝﾄﾞ
CON
ANDA $00FF
CON
STA DM10700              ; RB2 動作ｺﾏﾝﾄﾞ/数値指定1
;DM10700 = ORA(DM10700,SLA(EM1009,8))
;
LD CR2002                ; 常時ON
LDA EM1009               ; RB2 数値指定1
CON
SLA #8
CON
STA @VM0
CON
LDA DM10700              ; RB2 動作ｺﾏﾝﾄﾞ/数値指定1
CON
ORA @VM0
CON
STA DM10700              ; RB2 動作ｺﾏﾝﾄﾞ/数値指定1
;DM10701 = ANDA(EM1010,$00FF)
;
LD CR2002                ; 常時ON
LDA EM1010               ; RB2 数値指定2
CON
ANDA $00FF
CON
STA DM10701              ; RB2 数値指定2/制御出力
;SET (@R201)
LD CR2002                ; 常時ON
SET @R201
LABEL #1001
;
STG @R202
DW #0 EM1013             ; RB2 動作ｽﾃｰﾀｽ1
CON
DW #0 EM1014             ; RB2 動作ｽﾃｰﾀｽ2
CON
DW #0 EM1015             ; RB2 動作中ｴﾗｰｺｰﾄﾞ
CON
RES @R201
CON
SET DM10701.8            ; RB2 RB_START
CON
JMP @R203
STG @R203
AND DM10501.9            ; RB2 RB_BUSY
RES DM10701.8            ; RB2 RB_START
CON
JMP @R204
STG @R204
LDB DM10501.9            ; RB2 RB_BUSY
ANB DM10501.10           ; RB2 RB_ERROR
LD DM10501.9             ; RB2 RB_BUSY
AND DM10501.10           ; RB2 RB_ERROR
ORL
ANL
MPS
LDB DM10501.9            ; RB2 RB_BUSY
ANB DM10501.10           ; RB2 RB_ERROR
ANL
LDA DM10500              ; RB1 現在位置
CON
ANDA $00FF
CON
STA EM1013               ; RB2 動作ｽﾃｰﾀｽ1
MRD
LDA DM10501              ; RB1 現在位置
CON
ANDA $00FF
CON
STA EM1014               ; RB2 動作ｽﾃｰﾀｽ2
MRD
LD DM10501.9             ; RB2 RB_BUSY
AND DM10501.10           ; RB2 RB_ERROR
AND CR2003               ; 常時OFF
ANL
LDA DM10500              ; RB1 現在位置
CON
SRA #8
CON
STA EM1015               ; RB2 動作中ｴﾗｰｺｰﾄﾞ
MRD
LDB DM10501.9            ; RB2 RB_BUSY
AND= EM1013 #0           ; RB2 動作ｽﾃｰﾀｽ1
AND CR2003               ; 常時OFF
ANL
SET R35103               ; RB2 Status Alarm
MRD
LD DM10501.9             ; RB2 RB_BUSY
AND DM10501.10           ; RB2 RB_ERROR
ANL
SET R35107               ; RB2 Moving Alarm
MPP
JMP @R205
STG @R205
RES R35100               ; RB2 MOVE
CON
RES R35102               ; During RB2 MOVE
CON
SET R35101               ; RB2 MOVE END
CON
ENDS
;<h1/> RB2 エラー復帰コマンド
STG R35104               ; RB2 RECOVERY MOVE
AND DM10501.8            ; RB2 RB_READY
AND DM10501.9            ; RB2 RB_BUSY
ANB R35102               ; During RB2 MOVE
ANB R35106               ; During RB2 RECOVERY MOVE
ZRES EM1013 EM1015       ; RB2 動作ｽﾃｰﾀｽ1  RB2 動作中ｴﾗｰｺｰﾄﾞ
CON
SET R35106               ; During RB2 RECOVERY MOVE
CON
JMP @R208
STG @R208
AND @R209
JMP @R210
;TYPE EM1008.U,EM1011.U,DM10700.U
;
;DM10700 = ANDA(EM1008,$00FF)
;DM10700 = ORA(DM10700,SLA(EM1011,8))
;SET (@R209)
LD @R208
NCJ #1023
;TYPE EM1008.U,EM1011.U,DM10700.U
;
;DM10700 = ANDA(EM1008,$00FF)
;
LD CR2002                ; 常時ON
LDA EM1008               ; RB2 動作ｺﾏﾝﾄﾞ
CON
ANDA $00FF
CON
STA DM10700              ; RB2 動作ｺﾏﾝﾄﾞ/数値指定1
;DM10700 = ORA(DM10700,SLA(EM1011,8))
;
LD CR2002                ; 常時ON
LDA EM1011               ; RB2 復帰ｺﾏﾝﾄﾞ
CON
SLA #8
CON
STA @VM1
CON
LDA DM10700              ; RB2 動作ｺﾏﾝﾄﾞ/数値指定1
CON
ORA @VM1
CON
STA DM10700              ; RB2 動作ｺﾏﾝﾄﾞ/数値指定1
;SET (@R209)
LD CR2002                ; 常時ON
SET @R209
LABEL #1023
;
STG @R210
DW #0 EM1013             ; RB2 動作ｽﾃｰﾀｽ1
CON
DW #0 EM1014             ; RB2 動作ｽﾃｰﾀｽ2
CON
DW #0 EM1015             ; RB2 動作中ｴﾗｰｺｰﾄﾞ
CON
RES @R209
CON
SET DM10701.8            ; RB2 RB_START
CON
JMP @R211
STG @R211
ANB DM10501.10           ; RB2 RB_ERROR
RES DM10701.8            ; RB2 RB_START
CON
JMP @R212
STG @R212
LDB DM10501.9            ; RB2 RB_BUSY
ANB DM10501.10           ; RB2 RB_ERROR
LD DM10501.9             ; RB2 RB_BUSY
AND DM10501.10           ; RB2 RB_ERROR
ORL
ANL
MPS
LDB DM10501.9            ; RB2 RB_BUSY
ANB DM10501.10           ; RB2 RB_ERROR
ANL
LDA DM10500              ; RB1 現在位置
CON
ANDA $00FF
CON
STA EM1013               ; RB2 動作ｽﾃｰﾀｽ1
MRD
LDA DM10501              ; RB1 現在位置
CON
ANDA $00FF
CON
STA EM1014               ; RB2 動作ｽﾃｰﾀｽ2
MRD
LD DM10501.9             ; RB2 RB_BUSY
AND DM10501.10           ; RB2 RB_ERROR
ANL
LDA DM10500              ; RB1 現在位置
CON
SRA #8
CON
STA EM1015               ; RB2 動作中ｴﾗｰｺｰﾄﾞ
MRD
LDB DM10501.9            ; RB2 RB_BUSY
AND= EM1013 #0           ; RB2 動作ｽﾃｰﾀｽ1
AND CR2003               ; 常時OFF
ANL
SET R35103               ; RB2 Status Alarm
MRD
LD DM10501.9             ; RB2 RB_BUSY
AND DM10501.10           ; RB2 RB_ERROR
ANL
SET R35107               ; RB2 Moving Alarm
MPP
JMP @R213
STG @R213
RES R35106               ; During RB2 RECOVERY MOVE
CON
SET R35105               ; RB2 RECOVERY MOVE END
CON
ENDS
;<h1/>RB2 位置管理
LD>= EM1013 #101         ; RB2 動作ｽﾃｰﾀｽ1
AND<= EM1013 #120        ; RB2 動作ｽﾃｰﾀｽ1
LD>= EM1008 #101         ; RB2 動作ｺﾏﾝﾄﾞ
AND<= EM1008 #120        ; RB2 動作ｺﾏﾝﾄﾞ
ORL
ANB DM10501.9            ; RB2 RB_BUSY
ANB DM10501.10           ; RB2 RB_ERROR
OUT MR24000              ; RB2ﾍｯﾄﾞ1 ﾄﾚｲｻｰﾁPos.
OUT MR22400              ; RB2ﾍｯﾄﾞ1 ﾄﾚｲｻｰﾁPos.PL
LD>= EM1013 #151         ; RB2 動作ｽﾃｰﾀｽ1
AND<= EM1013 #170        ; RB2 動作ｽﾃｰﾀｽ1
LD>= EM1008 #151         ; RB2 動作ｺﾏﾝﾄﾞ
AND<= EM1008 #170        ; RB2 動作ｺﾏﾝﾄﾞ
ORL
ANB DM10501.9            ; RB2 RB_BUSY
ANB DM10501.10           ; RB2 RB_ERROR
OUT MR24001              ; RB2ﾍｯﾄﾞﾄﾚｲ取出しPos.
OUT MR22401              ; RB2ﾍｯﾄﾞﾄﾚｲ取出しPos.PL
LD= EM1008 #191          ; RB2 動作ｺﾏﾝﾄﾞ
AND= EM1013 #191         ; RB2 動作ｽﾃｰﾀｽ1
ANB DM10501.9            ; RB2 RB_BUSY
ANB DM10501.10           ; RB2 RB_ERROR
OUT MR24002              ; RB2仮置きﾊﾝﾄﾞ1Ｐｏｓ．
LD= EM1008 #192          ; RB2 動作ｺﾏﾝﾄﾞ
AND= EM1013 #192         ; RB2 動作ｽﾃｰﾀｽ1
ANB DM10501.9            ; RB2 RB_BUSY
ANB DM10501.10           ; RB2 RB_ERROR
OUT MR24003              ; RB2仮置きﾊﾝﾄﾞ2Ｐｏｓ．
LD= EM1008 #201          ; RB2 動作ｺﾏﾝﾄﾞ
AND= EM1013 #201         ; RB2 動作ｽﾃｰﾀｽ1
ANB DM10501.9            ; RB2 RB_BUSY
ANB DM10501.10           ; RB2 RB_ERROR
OUT MR24004              ; RB2洗浄機1ﾚｰﾝﾊﾝﾄﾞ1Pos.
LD= EM1008 #202          ; RB2 動作ｺﾏﾝﾄﾞ
AND= EM1013 #202         ; RB2 動作ｽﾃｰﾀｽ1
ANB DM10501.9            ; RB2 RB_BUSY
ANB DM10501.10           ; RB2 RB_ERROR
OUT MR24005              ; RB2洗浄機1ﾚｰﾝﾊﾝﾄﾞ2Pos.
LD= EM1008 #211          ; RB2 動作ｺﾏﾝﾄﾞ
AND= EM1013 #211         ; RB2 動作ｽﾃｰﾀｽ1
ANB DM10501.9            ; RB2 RB_BUSY
ANB DM10501.10           ; RB2 RB_ERROR
OUT MR24006              ; RB2洗浄機1ﾚｰﾝｶﾒﾗ1Pos.
LD= EM1008 #212          ; RB2 動作ｺﾏﾝﾄﾞ
AND= EM1013 #212         ; RB2 動作ｽﾃｰﾀｽ1
ANB DM10501.9            ; RB2 RB_BUSY
ANB DM10501.10           ; RB2 RB_ERROR
OUT MR24007              ; RB2洗浄機1ﾚｰﾝｶﾒﾗ2Pos.
LD= EM1008 #221          ; RB2 動作ｺﾏﾝﾄﾞ
AND= EM1013 #221         ; RB2 動作ｽﾃｰﾀｽ1
ANB DM10501.9            ; RB2 RB_BUSY
ANB DM10501.10           ; RB2 RB_ERROR
OUT MR24008              ; RB2洗浄機2ﾚｰﾝﾊﾝﾄﾞ1Pos.
LD= EM1008 #222          ; RB2 動作ｺﾏﾝﾄﾞ
AND= EM1013 #222         ; RB2 動作ｽﾃｰﾀｽ1
ANB DM10501.9            ; RB2 RB_BUSY
ANB DM10501.10           ; RB2 RB_ERROR
OUT MR24009              ; RB2洗浄機2ﾚｰﾝﾊﾝﾄﾞ2Pos.
LD= EM1008 #231          ; RB2 動作ｺﾏﾝﾄﾞ
AND= EM1013 #231         ; RB2 動作ｽﾃｰﾀｽ1
ANB DM10501.9            ; RB2 RB_BUSY
ANB DM10501.10           ; RB2 RB_ERROR
OUT MR24010              ; RB2洗浄機2ﾚｰﾝｶﾒﾗ1Pos.
LD= EM1008 #232          ; RB2 動作ｺﾏﾝﾄﾞ
AND= EM1013 #232         ; RB2 動作ｽﾃｰﾀｽ1
ANB DM10501.9            ; RB2 RB_BUSY
ANB DM10501.10           ; RB2 RB_ERROR
OUT MR24011              ; RB2洗浄機2ﾚｰﾝｶﾒﾗ2Pos.
LD= EM1008 #50           ; RB2 動作ｺﾏﾝﾄﾞ
AND= EM1013 #50          ; RB2 動作ｽﾃｰﾀｽ1
ANB DM10501.9            ; RB2 RB_BUSY
ANB DM10501.10           ; RB2 RB_ERROR
OUT MR24012              ; RB2上昇Pos.
LD= EM1008 #193          ; RB2 動作ｺﾏﾝﾄﾞ
AND= EM1013 #193         ; RB2 動作ｽﾃｰﾀｽ1
ANB DM10501.9            ; RB2 RB_BUSY
ANB DM10501.10           ; RB2 RB_ERROR
OUT MR24100              ; ＲＢ仮置きﾊﾝﾄﾞ1取出しPos.
LD= EM1008 #194          ; RB2 動作ｺﾏﾝﾄﾞ
AND= EM1013 #194         ; RB2 動作ｽﾃｰﾀｽ1
ANB DM10501.9            ; RB2 RB_BUSY
ANB DM10501.10           ; RB2 RB_ERROR
OUT MR24101              ; ＲＢ仮置きﾊﾝﾄﾞ2取出しPos.
LD= EM1008 #203          ; RB2 動作ｺﾏﾝﾄﾞ
AND= EM1013 #203         ; RB2 動作ｽﾃｰﾀｽ1
ANB DM10501.9            ; RB2 RB_BUSY
ANB DM10501.10           ; RB2 RB_ERROR
OUT MR24102              ; ＲＢ1ﾚｰﾝきﾊﾝﾄﾞ1押えPos.
LD= EM1008 #204          ; RB2 動作ｺﾏﾝﾄﾞ
AND= EM1013 #204         ; RB2 動作ｽﾃｰﾀｽ1
ANB DM10501.9            ; RB2 RB_BUSY
ANB DM10501.10           ; RB2 RB_ERROR
OUT MR24103              ; ＲＢ 1ﾚｰﾝﾊﾝﾄﾞ2押えPos.
LD= EM1008 #223          ; RB2 動作ｺﾏﾝﾄﾞ
AND= EM1013 #223         ; RB2 動作ｽﾃｰﾀｽ1
ANB DM10501.9            ; RB2 RB_BUSY
ANB DM10501.10           ; RB2 RB_ERROR
OUT MR24104              ; ＲＢ 2ﾚｰﾝﾊﾝﾄﾞ1押えPos.
LD= EM1008 #224          ; RB2 動作ｺﾏﾝﾄﾞ
AND= EM1013 #224         ; RB2 動作ｽﾃｰﾀｽ1
ANB DM10501.9            ; RB2 RB_BUSY
ANB DM10501.10           ; RB2 RB_ERROR
OUT MR24105              ; ＲＢ2ﾚｰﾝきﾊﾝﾄﾞ2押えPos.
LD MR21015               ; RBﾌﾟﾛｸﾞﾗﾑ停止SW
DIFU MR21014             ; RBﾌﾟﾛｸﾞﾗﾑ停止SWﾊﾟﾙｽ
LD MR21014               ; RBﾌﾟﾛｸﾞﾗﾑ停止SWﾊﾟﾙｽ
ANB MR22015              ; RBﾌﾟﾛｸﾞﾗﾑ停止PL
LDB MR21014              ; RBﾌﾟﾛｸﾞﾗﾑ停止SWﾊﾟﾙｽ
AND MR22015              ; RBﾌﾟﾛｸﾞﾗﾑ停止PL
ORL
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
OUT MR22015              ; RBﾌﾟﾛｸﾞﾗﾑ停止PL
LD MR22015               ; RBﾌﾟﾛｸﾞﾗﾑ停止PL
OUT DM10701.10           ; RB2 Prg_STOP
END
ENDH
