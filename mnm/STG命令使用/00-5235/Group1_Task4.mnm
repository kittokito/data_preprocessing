DEVICE:53
;MODULE:Group1_Task4
;MODULE_TYPE:0
;SCRIPT_TYPE:
;OneSystem Main-Module
;
;-----------------------------------------
;ModuleName	:	Group1_Task4
;ModuleType	:	Main Module
;Line		:	
;Cell		:	
;Function	:	ばね搬送/ばねトレイ
;-----------------------------------------
;<<Task LocalDevice>>
;/*項目			/*割付ｴﾘｱ				/*備考
;---------------------------------------------------------------------			
;Emergency		@MR000～@MR015			Emergency処理時RESET禁止ｴﾘｱ
;Free			@MR100～@MR915			ﾕｰｻﾞｰﾌﾘｰｴﾘｱ
;HOME			@MR1000～@MR1515		HOME動作時使用ｴﾘｱ
;MAINTENANCE		@MR2000～@MR2915		MAINTE動作時使用ｴﾘｱ
;AUTO(Main1)		@MR3000～@MR3915		AUTO(Main1)動作時使用ｴﾘｱ
;	(Main2)		@MR4000～@MR4415		AUTO(Main2)動作時使用ｴﾘｱ
;SubRoutine		@MR4500～@MR6415		ｻﾌﾞﾙｰﾁﾝ共通動作使用ｴﾘｱ　※状況により増設してください。
;----------------------------------------------------------------------
;<h1/>Device_Init/ﾃﾞﾊﾞｲｽ初期化
;[内容]
;・非常停止、優先ｴﾗｰ発生時に初期化したいﾃﾞﾊﾞｲｽを指定して下さい
;※本Taskで使用するﾛｰｶﾙﾃﾞﾊﾞｲｽなど
;※STG～JMPにて使用しているﾃﾞﾊﾞｲｽは必須
LDP R46104               ; _非常停止中　ﾓｰﾄﾞﾌﾗｸﾞ
ZRES @MR100 @MR6415      ; Task4 ERROR
LD= DM60000 MyTask       ; TaskNo /ERROR_DISP  自ﾀｽｸ番号
AND R46208               ; _Group1　ｴﾗｰ発生中
OUT @MR001               ; TASK4　ERROR
;<h1/>wait
LD R4301                 ; 圧縮ばね吸着上昇端
TMH @11 #10              ; R4301安定
;<h1/>Task_Monitor/ﾀｽｸﾓﾆﾀｰ
LD CR2002                ; 常時ON
FLIK #50 #50 @MR000
;ON STG Main1
;TYPE EM632.U,EM633.U,@MR000.U,@MR3000.U
;
;FOR EM632 = EM632 TO 160 STEP 16
;	IF @MR3000:EM632 <> 0 THEN
;		BREAK
;	END IF	
;NEXT
;	
;IF EM632 < 160 THEN
;	EM633 = (EM632 / 16) * 100 + DMX(@MR3000:EM632) + #3000
;END IF		
;		
;EM632 = EM632 + 16		
;IF EM632 > 160 THEN		
;	EM632 = 0		
;END IF
LDP @MR000
NCJ #1000
;TYPE EM632.U,EM633.U,@MR000.U,@MR3000.U
;
;FOR EM632 = EM632 TO 160 STEP 16
;
LD CR2002                ; 常時ON
MOV EM632 EM632          ; Task4 Main1@MR  Task4 Main1@MR
LABEL #2000
LD> EM632 #160           ; Task4 Main1@MR
CJ #2001
;	IF @MR3000:EM632 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM632                ; Task4 Main1@MR
CON
EXT
CON
STA.L Z12
LD<> @MR3000:Z12 #0      ; AUTO Main1
NCJ #2002
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2003
;	END IF	
;
LABEL #2002
;NEXT
;
LD CR2002                ; 常時ON
LDA EM632                ; Task4 Main1@MR
CON
ADD #16
CON
STA EM632                ; Task4 Main1@MR
LDB CR2009               ; 演算結果が負
CJ #2000
LABEL #2003
LABEL #2001
;IF EM632 < 160 THEN
;
LD< EM632 #160           ; Task4 Main1@MR
NCJ #2004
;	EM633 = (EM632 / 16) * 100 + DMX(@MR3000:EM632) + #3000
;
;;Warning[1103]: "=": (符号付き32ビット整数型->符号無し16ビット整数型) 代入によりデータが欠落する可能性があります。
LD CR2002                ; 常時ON
LDA EM632                ; Task4 Main1@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR3000:Z12          ; AUTO Main1
CON
DMX
CON
STA @VM0
CON
LDA EM632                ; Task4 Main1@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM1
CON
LDA @VM0
CON
EXT
CON
ADD.L @VM1
CON
ADD.L +3000
CON
STA EM633                ; Task4 Main1@MR
;END IF		
;
LABEL #2004
;EM632 = EM632 + 16		
;
;;Warning[1103]: "=": (符号付き32ビット整数型->符号無し16ビット整数型) 代入によりデータが欠落する可能性があります。
LD CR2002                ; 常時ON
LDA EM632                ; Task4 Main1@MR
CON
EXT
CON
ADD.L +16
CON
STA EM632                ; Task4 Main1@MR
;IF EM632 > 160 THEN		
;
LD> EM632 #160           ; Task4 Main1@MR
NCJ #2005
;	EM632 = 0		
;
LD CR2002                ; 常時ON
MOV #0 EM632             ; Task4 Main1@MR
;END IF
LABEL #2005
LABEL #1000
;
;ON STG Main2
;TYPE EM634.U,EM635.U,@MR4000.U
;
;FOR EM634 = EM634 TO 80 STEP 16
;	IF @MR4000:EM634 <> 0 THEN
;		BREAK
;	END IF	
;NEXT	
;
;IF EM634 < 80 THEN
;	EM635 = (EM634 / 16) * 100 + DMX(@MR4000:EM634) + #4000
;END IF
;
;EM634 = EM634 + 16		
;
;IF EM634 > 80 THEN
;	EM634 = 0	
;END IF
LDP @MR000
NCJ #1001
;TYPE EM634.U,EM635.U,@MR4000.U
;
;FOR EM634 = EM634 TO 80 STEP 16
;
LD CR2002                ; 常時ON
MOV EM634 EM634          ; Task4 Main2@MR  Task4 Main2@MR
LABEL #2006
LD> EM634 #80            ; Task4 Main2@MR
CJ #2007
;	IF @MR4000:EM634 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM634                ; Task4 Main2@MR
CON
EXT
CON
STA.L Z12
LD<> @MR4000:Z12 #0      ; AUTO Main2
NCJ #2008
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2009
;	END IF	
;
LABEL #2008
;NEXT	
;
LD CR2002                ; 常時ON
LDA EM634                ; Task4 Main2@MR
CON
ADD #16
CON
STA EM634                ; Task4 Main2@MR
LDB CR2009               ; 演算結果が負
CJ #2006
LABEL #2009
LABEL #2007
;IF EM634 < 80 THEN
;
LD< EM634 #80            ; Task4 Main2@MR
NCJ #2010
;	EM635 = (EM634 / 16) * 100 + DMX(@MR4000:EM634) + #4000
;
;;Warning[1103]: "=": (符号付き32ビット整数型->符号無し16ビット整数型) 代入によりデータが欠落する可能性があります。
LD CR2002                ; 常時ON
LDA EM634                ; Task4 Main2@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR4000:Z12          ; AUTO Main2
CON
DMX
CON
STA @VM3
CON
LDA EM634                ; Task4 Main2@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM4
CON
LDA @VM3
CON
EXT
CON
ADD.L @VM4
CON
ADD.L +4000
CON
STA EM635                ; Task4 Main2@MR
;END IF
;
LABEL #2010
;EM634 = EM634 + 16		
;
;;Warning[1103]: "=": (符号付き32ビット整数型->符号無し16ビット整数型) 代入によりデータが欠落する可能性があります。
LD CR2002                ; 常時ON
LDA EM634                ; Task4 Main2@MR
CON
EXT
CON
ADD.L +16
CON
STA EM634                ; Task4 Main2@MR
;IF EM634 > 80 THEN
;
LD> EM634 #80            ; Task4 Main2@MR
NCJ #2011
;	EM634 = 0	
;
LD CR2002                ; 常時ON
MOV #0 EM634             ; Task4 Main2@MR
;END IF
LABEL #2011
LABEL #1001
;
;ON STG SubRoutine
;TYPE EM636.U,EM637.U,@MR4500.U
;	
;FOR EM636 = EM636 TO 320 STEP 16
;	IF @MR4500:EM636 <> 0 THEN
;		BREAK
;	END IF	
;NEXT
;		
;IF EM636 < 320 THEN
;	EM637 = (EM636 / 16) * 100 + DMX(@MR4500:EM636) + #4500
;END IF
;		
;EM636 = EM636 + 16	
;
;IF EM636 > 320 THEN
;   EM636 = 0	
;END IF
LDP @MR000
NCJ #1002
;TYPE EM636.U,EM637.U,@MR4500.U
;
;FOR EM636 = EM636 TO 320 STEP 16
;
LD CR2002                ; 常時ON
MOV EM636 EM636          ; Task4 Sub@MR  Task4 Sub@MR
LABEL #2012
LD> EM636 #320           ; Task4 Sub@MR
CJ #2013
;	IF @MR4500:EM636 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM636                ; Task4 Sub@MR
CON
EXT
CON
STA.L Z12
LD<> @MR4500:Z12 #0      ; ①SUB_RB4/Move
NCJ #2014
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2015
;	END IF	
;
LABEL #2014
;NEXT
;
LD CR2002                ; 常時ON
LDA EM636                ; Task4 Sub@MR
CON
ADD #16
CON
STA EM636                ; Task4 Sub@MR
LDB CR2009               ; 演算結果が負
CJ #2012
LABEL #2015
LABEL #2013
;IF EM636 < 320 THEN
;
LD< EM636 #320           ; Task4 Sub@MR
NCJ #2016
;	EM637 = (EM636 / 16) * 100 + DMX(@MR4500:EM636) + #4500
;
;;Warning[1103]: "=": (符号付き32ビット整数型->符号無し16ビット整数型) 代入によりデータが欠落する可能性があります。
LD CR2002                ; 常時ON
LDA EM636                ; Task4 Sub@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR4500:Z12          ; ①SUB_RB4/Move
CON
DMX
CON
STA @VM6
CON
LDA EM636                ; Task4 Sub@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM7
CON
LDA @VM6
CON
EXT
CON
ADD.L @VM7
CON
ADD.L +4500
CON
STA EM637                ; Task4 Sub@MR
;END IF
;
LABEL #2016
;EM636 = EM636 + 16	
;
;;Warning[1103]: "=": (符号付き32ビット整数型->符号無し16ビット整数型) 代入によりデータが欠落する可能性があります。
LD CR2002                ; 常時ON
LDA EM636                ; Task4 Sub@MR
CON
EXT
CON
ADD.L +16
CON
STA EM636                ; Task4 Sub@MR
;IF EM636 > 320 THEN
;
LD> EM636 #320           ; Task4 Sub@MR
NCJ #2017
;   EM636 = 0	
;
LD CR2002                ; 常時ON
MOV #0 EM636             ; Task4 Sub@MR
;END IF
LABEL #2017
LABEL #1002
;
;<h1/>Task_Init/ﾀｽｸ初期化
;[本STG内容]
;・本Task起動時に必要な初期化処理を記述して下さい
;・起動Taskの全Init処理終了後、Task_StartのSTGが起動します
STG LR804                ; _Grp1_Task4_Init.STG
ENDS
;<h1/>Task_Start/ﾀｽｸ開始
;[本STG内容]
;・Task起動後、以下運転ﾓｰﾄﾞに従い、各STGにJMPします
;【HOME】	→	LR5200
;【AUTO】	→	LR5400
;【MAINTE】	→	LR5600
;・本STGは追記、修正不要です
STG LR404                ; _Grp1_Task4_Start.STG
MPS
AND R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5204               ; _Grp1_Task4_HOME.STG
MRD
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5404               ; _Grp1_Task4_AUTO.STG
MPP
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5604               ; _Grp1_Task4_MAINTE.STG
;<h1/>Task_Finish/ﾀｽｸ終了
;[本STG内容]
;・各Taskの終了STGになります
;・運転ﾓｰﾄﾞに係わらず終了時は本STGを経由して終了して下さい
;・本STGは追記、修正不要です
STG LR604                ; _Grp1_Task4_Fin.STG
MPS
LDB R41204               ; TASK4 PAUSE 要求
ANB @MR001               ; TASK4　ERROR
ANL
RES R42604               ; Grp1_Task4_ﾎﾟｰｽﾞ許可
CON
RES R41004               ; _Grp1_Task4_起動中ﾌﾗｸﾞ
CON
ENDS
MPP
AND R41204               ; TASK4 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;<h1/>HOME/原点復帰
;[本STG内容]
;・STG @MR1000の続きから各Taskの原点復帰動作を記述する
;・動作終了時は@MR1515にJMPする事
STG LR5204               ; _Grp1_Task4_HOME.STG
JMP @MR1000              ; HOME
STG @MR1000              ; HOME
RES MR20004              ; TASK4復帰完了
CON
SET @MR1002              ; HOME中
CON
JMP @MR1003
;ばね吸着上昇
STG @MR1003
SET MR7401               ; 圧縮ばね吸着上昇
CON
RES MR7400               ; 圧縮ばね吸着下降
CON
MPS
LDB MR4301               ; 圧縮ばね吸着上昇端ERR
ANB R4300                ; 圧縮ばね吸着下降端
AND R4301                ; 圧縮ばね吸着上昇端
AND @T11                 ; R4301安定
ANL
JMP @MR1004
MPP
LD MR4301                ; 圧縮ばね吸着上昇端ERR
AND R41204               ; TASK4 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;RB8_ばね搬送PP/原点復帰
STG @MR1004
SET @MR4800              ; ④SUB_RB8/Home
CON
JMP @MR1005
STG @MR1005
AND @MR4801              ; ④SUB_RB8/Home完了
RES @MR4801              ; ④SUB_RB8/Home完了
CON
JMP @MR1006
;RB8_ばね搬送PP 移動 待機位置
STG @MR1006
DW #1 EM1314             ; RB8Target Pos
CON
SET @MR4700              ; ③SUB_RB8/Move
CON
JMP @MR1007
STG @MR1007
AND @MR4701              ; ③SUB_RB8/Move完了
RES @MR4701              ; ③SUB_RB8/Move完了
CON
JMP @MR1008
;吸着確認
STG @MR1008
SET @MR5200              ; ⑦SUB_ばね搬送PP吸着&有無確認
CON
JMP @MR1009
STG @MR1009
AND @MR5201              ; ⑦SUB_ばね搬送PP吸着&有無確完了
RES @MR5201              ; ⑦SUB_ばね搬送PP吸着&有無確完了
CON
JMP @MR1010
STG @MR1010
MPS
LD DM2000.3              ; ﾄﾞﾗｲ運転有効/無効(ON有効)
ANB LR10004              ; デバッグ用ばねCHECK
ANL
JMP @MR1013
MPP
LDB DM2000.3             ; ﾄﾞﾗｲ運転有効/無効(ON有効)
OR LR10004               ; デバッグ用ばねCHECK
ANL
MPS
AND= DM20035 #0          ; ばね搬送有無記憶(1=有り)
JMP @MR1013
MPP
AND= DM20035 #1          ; ばね搬送有無記憶(1=有り)
JMP @MR1011
;Error 145 ばね除材要求(RB8搬送PP)
STG @MR1011
ANB R39900               ; RB動作中
MPS
LDB R41204               ; TASK4 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
DW $7000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #145 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #4414 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task4 ERROR
CON
JMP @MR1012
MPP
AND R41204               ; TASK4 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR1012
SET @MR1900              ; Main1 HALT許可
CON
AND @MR101               ; Task4 ERROR_End
RES @MR101               ; Task4 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
SET MR7713               ; ばね吸着ﾄﾗﾝｽﾎﾟｰﾄ吸着OFF
CON
RES MR7712               ; ばね吸着ﾄﾗﾝｽﾎﾟｰﾄ吸着ON
CON
RES MR7714               ; ばね吸着ﾄﾗﾝｽﾎﾟｰﾄ真空破壊ON
CON
JMP @MR1008
;搬送PP吸着OFF
STG @MR1013
SET MR7713               ; ばね吸着ﾄﾗﾝｽﾎﾟｰﾄ吸着OFF
CON
RES MR7712               ; ばね吸着ﾄﾗﾝｽﾎﾟｰﾄ吸着ON
CON
RES MR7714               ; ばね吸着ﾄﾗﾝｽﾎﾟｰﾄ真空破壊ON
CON
JMP @MR1100
;RB4 圧縮ばねトレイ搬送 原点復帰
STG @MR1100
SET @MR4600              ; ②SUB_RB4/Home
CON
JMP @MR1101
STG @MR1101
AND @MR4601              ; ②SUB_RB4/Home完了
RES @MR4601              ; ②SUB_RB4/Home完了
CON
JMP @MR1102
;RB4 圧縮ばねトレイ搬送 移動 待機位置
STG @MR1102
DW #1 EM1306             ; RB4Target Pos
CON
SET @MR4500              ; ①SUB_RB4/Move
CON
JMP @MR1103
STG @MR1103
AND @MR4501              ; ①SUB_RB4/Move完了
RES @MR4501              ; ①SUB_RB4/Move完了
CON
JMP @MR1515              ; HOME END
;終了
STG @MR1515              ; HOME END
MPS
LDB R41204               ; TASK4 PAUSE 要求
ANB @MR001               ; TASK4　ERROR
ANL
SET MR20004              ; TASK4復帰完了
CON
RES @MR1002              ; HOME中
CON
JMP LR604                ; _Grp1_Task4_Fin.STG
MPP
AND R41204               ; TASK4 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;<h1/>AUTO/自動動作
STG LR5404               ; _Grp1_Task4_AUTO.STG
RES MR20604              ; Task4 ｽﾀｰﾄﾌﾗｸﾞ
CON
MPS
AND>.L DM20026 DM20048   ; ばね取出し番号  ばねトレイ2枚合計全数
DW.L +1 DM20026          ; ばね取出し番号
MPP
DW.L +0 DM20054          ; ばね取り出し連続NG数
CON
@DW.S +0 DM20041         ; ばね投入数(ﾌﾚｰﾑに)
CON
JMP @MR3000              ; AUTO Main1
;<h1/>Auto-Main1/Autoﾒｲﾝﾙｰﾁﾝ1
;[本STG内容]
;・各TaskのAUTO動作を記述して下さい
;・動作ﾓｰﾄﾞは「AUTOAC」に格納されています(1～32)
;・@MR3000:AUTO_Main1開始、@MR3001:AUTO_Main1完了、@MR3002:AUTO_Main1動作中
STG @MR3000              ; AUTO Main1
MPS
ANB R47800               ; _Group1　ﾒﾝﾃ動作定停止移行中
MPS
ANB R57304               ; Task4 停止要求
SET @MR4000              ; AUTO Main2
CON
SET @MR3002              ; AUTO Main1 Busy
CON
JMP @MR3003
MPP
AND R57304               ; Task4 停止要求
JMP @MR3915              ; AUTO END
MPP
AND R47800               ; _Group1　ﾒﾝﾃ動作定停止移行中
JMP @MR3915              ; AUTO END
LD<.S DM20041 +0         ; ばね投入数(ﾌﾚｰﾑに)
@DW.S +0 DM20041         ; ばね投入数(ﾌﾚｰﾑに)
;RB4圧縮ばねトレイ搬送 ﾄﾚｲ交換位置
STG @MR3003
DW #2 EM1306             ; RB4Target Pos
CON
SET @MR4500              ; ①SUB_RB4/Move
CON
JMP @MR3004
STG @MR3004
AND @MR4501              ; ①SUB_RB4/Move完了
RES @MR4501              ; ①SUB_RB4/Move完了
CON
JMP @MR3005
;ﾄﾚｲ有無確認
STG @MR3005
MPS
LD R4500                 ; ばねﾄﾚｲ(前)有無検出ON有り
OR R4503                 ; ばねﾄﾚｲ(奥)有無検出ON有り
OR DM2000.3              ; ﾄﾞﾗｲ運転有効/無効(ON有効)
ANL
JMP @MR3008
MPP
LDB R4500                ; ばねﾄﾚｲ(前)有無検出ON有り
ANB R4503                ; ばねﾄﾚｲ(奥)有無検出ON有り
ANB DM2000.3             ; ﾄﾞﾗｲ運転有効/無効(ON有効)
ANL
TMR @9 #5                ; wait
CON
AND @T9                  ; wait
JMP @MR3006
;<h1/> ばねﾄﾚｲ給材要求
STG @MR3006
MPS
AND R41204               ; TASK4 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
MPP
ANB R41204               ; TASK4 PAUSE 要求
MPS
OUT MR20104              ; ばねﾄﾚｲ交換要求
MPP
LD R4500                 ; ばねﾄﾚｲ(前)有無検出ON有り
OR R4503                 ; ばねﾄﾚｲ(奥)有無検出ON有り
LD DM2000.3              ; ﾄﾞﾗｲ運転有効/無効(ON有効)
ANB LR10004              ; デバッグ用ばねCHECK
ORL
AND R008                 ; ｾｰﾌﾃｨｰｶﾊﾞｰ 確認
ANL
MPS
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OUT MR2002               ; ばねﾄﾚｲｽﾀｰﾄSWﾗﾝﾌﾟ
MPP
ANP R1002                ; ばねﾄﾚｲｽﾀｰﾄSW
DW.L +1 DM20026          ; ばね取出し番号
CON
JMP @MR3008
;ﾄﾚｲ浮き確認
STG @MR3008
MPS
LD R4501                 ; ばねﾄﾚｲ(前) 浮き検出(前)ONOK
AND R4502                ; ばねﾄﾚｲ(前) 浮き検出(奥)ONOK
AND R4504                ; ばねﾄﾚｲ(奥)浮き検出(前)ONOK
AND R4505                ; ばねﾄﾚｲ(奥)浮き検出(奥)ONOK
ANL
JMP @MR3011
MPP
LDB R4501                ; ばねﾄﾚｲ(前) 浮き検出(前)ONOK
ORB R4502                ; ばねﾄﾚｲ(前) 浮き検出(奥)ONOK
ORB R4504                ; ばねﾄﾚｲ(奥)浮き検出(前)ONOK
ORB R4505                ; ばねﾄﾚｲ(奥)浮き検出(奥)ONOK
ANL
TMR @10 #5               ; wait
CON
AND @T10                 ; wait
JMP @MR3009
;Error 146 ばねﾄﾚｲ浮き検出
LD @MR3009
ANB R39004               ; ｴﾗｰ中
MPS
ANB R4501                ; ばねﾄﾚｲ(前) 浮き検出(前)ONOK
DW #4501 @DM2            ; SensorNo /ERROR_DISP
MRD
ANB R4502                ; ばねﾄﾚｲ(前) 浮き検出(奥)ONOK
DW #4502 @DM2            ; SensorNo /ERROR_DISP
MRD
ANB R4504                ; ばねﾄﾚｲ(奥)浮き検出(前)ONOK
DW #4504 @DM2            ; SensorNo /ERROR_DISP
MPP
ANB R4505                ; ばねﾄﾚｲ(奥)浮き検出(奥)ONOK
DW #4505 @DM2            ; SensorNo /ERROR_DISP
STG @MR3009
ANB R39900               ; RB動作中
MPS
LDB R41204               ; TASK4 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
DW $7000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #146 @DM1             ; ErrorNo /ERROR_DISP
CON
SET @MR100               ; Task4 ERROR
CON
JMP @MR3010
MPP
AND R41204               ; TASK4 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR3010
SET @MR1900              ; Main1 HALT許可
CON
AND @MR101               ; Task4 ERROR_End
RES @MR101               ; Task4 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR3008
;ﾄﾚｲ枚数有無_取出し番号変更
STG @MR3011
MPS
LD R4500                 ; ばねﾄﾚｲ(前)有無検出ON有り
AND R4503                ; ばねﾄﾚｲ(奥)有無検出ON有り
LD DM2000.3              ; ﾄﾞﾗｲ運転有効/無効(ON有効)
ANB LR10004              ; デバッグ用ばねCHECK
ORL
ANL
RES @MR903               ; 2枚目ﾄﾚｲ無し
CON
JMP @MR3100
MRD
LD R4500                 ; ばねﾄﾚｲ(前)有無検出ON有り
ANB R4503                ; ばねﾄﾚｲ(奥)有無検出ON有り
LDB DM2000.3             ; ﾄﾞﾗｲ運転有効/無効(ON有効)
OR LR10004               ; デバッグ用ばねCHECK
ANL
ANL
SET @MR903               ; 2枚目ﾄﾚｲ無し
CON
MPS
AND<= DM20026 DM20046    ; ばね取出し番号  ばねトレイ全数
JMP @MR3100
MPP
AND> DM20026 DM20046     ; ばね取出し番号  ばねトレイ全数
DW.L +1 DM20026          ; ばね取出し番号
CON
JMP @MR3100
MRD
LDB R4500                ; ばねﾄﾚｲ(前)有無検出ON有り
AND R4503                ; ばねﾄﾚｲ(奥)有無検出ON有り
LDB DM2000.3             ; ﾄﾞﾗｲ運転有効/無効(ON有効)
OR LR10004               ; デバッグ用ばねCHECK
ANL
ANL
RES @MR903               ; 2枚目ﾄﾚｲ無し
CON
MPS
AND> DM20026 DM20046     ; ばね取出し番号  ばねトレイ全数
JMP @MR3100
MPP
AND<= DM20026 DM20046    ; ばね取出し番号  ばねトレイ全数
LDA.L DM20046            ; ばねトレイ全数
CON
ADD.L +1
CON
STA.L DM20026            ; ばね取出し番号
CON
JMP @MR3100
MPP
LDB R4500                ; ばねﾄﾚｲ(前)有無検出ON有り
ANB R4503                ; ばねﾄﾚｲ(奥)有無検出ON有り
LDB DM2000.3             ; ﾄﾞﾗｲ運転有効/無効(ON有効)
OR LR10004               ; デバッグ用ばねCHECK
ANL
ANL
DW.L +1 DM20026          ; ばね取出し番号
CON
JMP @MR3006
;<h1/> ばねﾊﾟﾚﾀｲｽﾞ(ﾄﾚｲ側)
STG @MR3100
JMP @MR3103
LDP @MR3103
AND DM2000.6             ; ﾀﾞﾐｰﾄﾚｲ有効
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
MPS
LD> DM20026 #39          ; ばね取出し番号
AND< DM20026 #144        ; ばね取出し番号
ANL
DW.L +144 DM20026        ; ばね取出し番号
MPP
LD> DM20026 #182         ; ばね取出し番号
AND< DM20026 #300        ; ばね取出し番号
ANL
DW.L +300 DM20026        ; ばね取出し番号
;RB4圧縮ばねﾄﾚｲ搬送 取出し位置移動(算出)_POS10 
STG @MR3103
LDA.L DM20026            ; ばね取出し番号
CON
ADD.L +19
CON
STA.S EM1306             ; RB4Target Pos
CON
SET @MR4500              ; ①SUB_RB4/Move
CON
JMP @MR3104
STG @MR3104
AND @MR4501              ; ①SUB_RB4/Move完了
RES @MR4501              ; ①SUB_RB4/Move完了
CON
MPS
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP @MR3106
MPP
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP @MR2403
;Main1→2ばね取出し要求
STG @MR3106
SET @MR900               ; Main1→2ばね取出し要求
CON
JMP @MR3107
STG @MR3107
MPS
ANB R41204               ; TASK4 PAUSE 要求
MPS
LD R57304                ; Task4 停止要求
ANB R41003               ; _Grp1_Task3_起動中ﾌﾗｸﾞ
ANB @MR4002              ; Main2 Busy
ANL
RES @MR900               ; Main1→2ばね取出し要求
CON
JMP @MR3915              ; AUTO END
MPP
LDB R57304               ; Task4 停止要求
OR R41003                ; _Grp1_Task3_起動中ﾌﾗｸﾞ
OR @MR4002               ; Main2 Busy
AND @MR901               ; Main2→1ばね取出し中
ANL
JMP @MR3108
MPP
AND R41204               ; TASK4 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR3108
MPS
LDB R41204               ; TASK4 PAUSE 要求
ANB @MR901               ; Main2→1ばね取出し中
ANL
RES @MR900               ; Main1→2ばね取出し要求
CON
JMP @MR3109
MPP
AND R41204               ; TASK4 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;ﾊﾟﾚﾀｲｽﾞﾁｪｯｸ
STG @MR3109
MPS
AND @MR903               ; 2枚目ﾄﾚｲ無し
MPS
AND<= DM20026 DM20046    ; ばね取出し番号  ばねトレイ全数
JMP @MR3200
MPP
AND> DM20026 DM20046     ; ばね取出し番号  ばねトレイ全数
JMP @MR3110
MPP
ANB @MR903               ; 2枚目ﾄﾚｲ無し
MPS
AND<= DM20026 DM20048    ; ばね取出し番号  ばねトレイ2枚合計全数
JMP @MR3200
MPP
AND> DM20026 DM20048     ; ばね取出し番号  ばねトレイ2枚合計全数
JMP @MR3110
STG @MR3110
DW.L +1 DM20026          ; ばね取出し番号
CON
JMP @MR3111
;RB4圧縮ばねﾄﾚｲ搬送 ﾄﾚｲ交換位置
STG @MR3111
DW #2 EM1306             ; RB4Target Pos
CON
SET @MR4500              ; ①SUB_RB4/Move
CON
JMP @MR3112
STG @MR3112
AND @MR4501              ; ①SUB_RB4/Move完了
RES @MR4501              ; ①SUB_RB4/Move完了
CON
JMP @MR3006
;<h1/> 先頭へ
STG @MR3200
JMP @MR3100
;<h1/>Auto終了処理
STG @MR3915              ; AUTO END
RES @MR3002              ; AUTO Main1 Busy
CON
MPS
LDB R41204               ; TASK4 PAUSE 要求
ANB @MR001               ; TASK4　ERROR
ANB @MR4002              ; Main2 Busy
ANL
ZRES @MR900 @MR915       ; Main1→2ばね取出し要求
CON
JMP LR604                ; _Grp1_Task4_Fin.STG
MPP
AND R41204               ; TASK4 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;<h1/>Auto-Main2/Autoﾒｲﾝﾙｰﾁﾝ2
;[本STG内容]
;・@MR4000の起動はMain1にて行う事
;・@MR4000:AUTO_Main2開始、@MR4001:AUTO_Main2完了、@MR4002:AUTO_Main2動作中
STG @MR4000              ; AUTO Main2
SET @MR4002              ; Main2 Busy
CON
JMP @MR4003
STG @MR4003
MPS
ANB R41204               ; TASK4 PAUSE 要求
JMP @MR4004
MPP
AND R41204               ; TASK4 PAUSE 要求
SET @MR1901              ; Main2 HALT許可
;Main1→2ばね取出し要求分岐
STG @MR4004
MPS
LDB R41204               ; TASK4 PAUSE 要求
AND @MR900               ; Main1→2ばね取出し要求
ANL
JMP @MR4005
MPP
AND R41204               ; TASK4 PAUSE 要求
SET @MR1901              ; Main2 HALT許可
;ﾊﾟﾚﾀｲｽﾞ計算
STG @MR4005
JMP @MR4008
LDP @MR4008
AND DM2000.6             ; ﾀﾞﾐｰﾄﾚｲ有効
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
MPS
LD> DM20026 #39          ; ばね取出し番号
AND< DM20026 #144        ; ばね取出し番号
ANL
DW.L +144 DM20026        ; ばね取出し番号
MPP
LD> DM20026 #182         ; ばね取出し番号
AND< DM20026 #300        ; ばね取出し番号
ANL
DW.L +300 DM20026        ; ばね取出し番号
STG @MR4008
LDA.L DM20026            ; ばね取出し番号
CON
ADD.L +19
CON
STA.S EM1314             ; RB8Target Pos
CON
SET @MR4700              ; ③SUB_RB8/Move
CON
JMP @MR4009
STG @MR4009
AND @MR4701              ; ③SUB_RB8/Move完了
RES @MR4701              ; ③SUB_RB8/Move完了
CON
MPS
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP @MR4011
MPP
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP @MR2504
;Task4 ｽﾀｰﾄﾌﾗｸﾞ待ち
STG @MR4011
MPS
ANB R41204               ; TASK4 PAUSE 要求
MPS
LD R57304                ; Task4 停止要求
ANB R41003               ; _Grp1_Task3_起動中ﾌﾗｸﾞ
ANL
JMP @MR4415              ; Main2 END
MPP
LDB R57304               ; Task4 停止要求
OR R41003                ; _Grp1_Task3_起動中ﾌﾗｸﾞ
AND @MR900               ; Main1→2ばね取出し要求
AND MR20604              ; Task4 ｽﾀｰﾄﾌﾗｸﾞ
LDB DM2000.7             ; 片面溶着有効/無効(ON有効)
AND<.S DM20041 +2        ; ばね投入数(ﾌﾚｰﾑに)
LD DM2000.7              ; 片面溶着有効/無効(ON有効)
AND<.S DM20041 +1        ; ばね投入数(ﾌﾚｰﾑに)
ORL
ANL
ANL
SET @MR901               ; Main2→1ばね取出し中
CON
JMP @MR4012
MPP
AND R41204               ; TASK4 PAUSE 要求
SET @MR1901              ; Main2 HALT許可
;圧縮ばね吸着下降
STG @MR4012
SET MR7400               ; 圧縮ばね吸着下降
CON
RES MR7401               ; 圧縮ばね吸着上昇
CON
MPS
LDB MR4300               ; 圧縮ばね吸着下降端ERR
AND R4300                ; 圧縮ばね吸着下降端
ANB R4301                ; 圧縮ばね吸着上昇端
ANL
JMP @MR4013
MPP
LD MR4300                ; 圧縮ばね吸着下降端ERR
AND R41204               ; TASK4 PAUSE 要求
ANL
SET @MR1901              ; Main2 HALT許可
;ばね吸着ﾄﾗﾝｽﾎﾟｰﾄ吸着ON
STG @MR4013
SET MR7712               ; ばね吸着ﾄﾗﾝｽﾎﾟｰﾄ吸着ON
CON
RES MR7713               ; ばね吸着ﾄﾗﾝｽﾎﾟｰﾄ吸着OFF
CON
RES MR7714               ; ばね吸着ﾄﾗﾝｽﾎﾟｰﾄ真空破壊ON
CON
TMR @6 #15               ; wait
CON
AND @T6                  ; wait
JMP @MR4014
;圧縮ばね吸着上昇
STG @MR4014
SET MR7401               ; 圧縮ばね吸着上昇
CON
RES MR7400               ; 圧縮ばね吸着下降
CON
MPS
LDB MR4301               ; 圧縮ばね吸着上昇端ERR
ANB MR4300               ; 圧縮ばね吸着下降端ERR
AND R4301                ; 圧縮ばね吸着上昇端
ANB R4300                ; 圧縮ばね吸着下降端
AND @T11                 ; R4301安定
ANL
JMP @MR4100
MPP
LD MR4301                ; 圧縮ばね吸着上昇端ERR
OR MR4300                ; 圧縮ばね吸着下降端ERR
AND R41204               ; TASK4 PAUSE 要求
ANL
SET @MR1901              ; Main2 HALT許可
;ばね搬送PP吸着&有無確認
STG @MR4100
SET @MR5200              ; ⑦SUB_ばね搬送PP吸着&有無確認
CON
JMP @MR4101
STG @MR4101
AND @MR5201              ; ⑦SUB_ばね搬送PP吸着&有無確完了
RES @MR5201              ; ⑦SUB_ばね搬送PP吸着&有無確完了
CON
JMP @MR4102
STG @MR4102
MPS
LD DM2000.3              ; ﾄﾞﾗｲ運転有効/無効(ON有効)
ANB LR10004              ; デバッグ用ばねCHECK
ANL
JMP @MR4110
MPP
LDB DM2000.3             ; ﾄﾞﾗｲ運転有効/無効(ON有効)
OR LR10004               ; デバッグ用ばねCHECK
ANL
MPS
AND= DM20035 #1          ; ばね搬送有無記憶(1=有り)
DW.L +0 DM20054          ; ばね取り出し連続NG数
CON
JMP @MR4110
MPP
AND= DM20035 #0          ; ばね搬送有無記憶(1=有り)
@INC.L DM20054           ; ばね取り出し連続NG数
CON
MPS
AND>=.L DM20054 DM7044   ; ばね取り出し連続NG数  装置基礎ﾃﾞｰﾀ23
JMP @MR4103
MPP
AND<.L DM20054 DM7044    ; ばね取り出し連続NG数  装置基礎ﾃﾞｰﾀ23
SET @MR902               ; 再取出し
CON
JMP @MR4107
;Error 137.ばね取り出し連続NG
STG @MR4103
ANB R39900               ; RB動作中
MPS
LDB R41204               ; TASK4 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
DW $6A50 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #137 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #4414 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task4 ERROR
CON
JMP @MR4104
MPP
AND R41204               ; TASK4 PAUSE 要求
SET @MR1901              ; Main2 HALT許可
STG @MR4104
SET @MR1901              ; Main2 HALT許可
CON
AND @MR101               ; Task4 ERROR_End
RES @MR101               ; Task4 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR105               ; SW1
DW.L +0 DM20054          ; ばね取り出し連続NG数
CON
SET @MR902               ; 再取出し
CON
JMP @MR4107
MRD
AND @MR106               ; SW2
DW.L +0 DM20054          ; ばね取り出し連続NG数
CON
SET @MR902               ; 再取出し
CON
JMP @MR4105
MPP
AND @MR107               ; SW3
DW.L +0 DM20054          ; ばね取り出し連続NG数
CON
LDA.L DM20046            ; ばねトレイ全数
CON
STA.L DM20026            ; ばね取出し番号
CON
DW.L +0 DM20054          ; ばね取り出し連続NG数
CON
SET @MR902               ; 再取出し
CON
JMP @MR4107
;画面切り替え
STG @MR4105
DW #2301 DM3008          ; _MainTP　切替ﾍﾟｰｼﾞNo
CON
JMP @MR4106
STG @MR4106
MPS
LDB R41204               ; TASK4 PAUSE 要求
AND MR20102              ; TP選択終了SW
ANL
@DEC.S DM20026           ; ばね取出し番号
CON
SET @MR902               ; 再取出し
CON
JMP @MR4107
MPP
AND R41204               ; TASK4 PAUSE 要求
SET @MR1901              ; Main2 HALT許可
STG @MR4107
SET MR7400               ; 圧縮ばね吸着下降
CON
RES MR7401               ; 圧縮ばね吸着上昇
CON
MPS
LDB MR4300               ; 圧縮ばね吸着下降端ERR
AND R4300                ; 圧縮ばね吸着下降端
ANB R4301                ; 圧縮ばね吸着上昇端
ANL
JMP @MR4108
MPP
LD MR4301                ; 圧縮ばね吸着上昇端ERR
AND R41204               ; TASK4 PAUSE 要求
ANL
SET @MR1901              ; Main2 HALT許可
;ばね吸着ﾄﾗﾝｽﾎﾟｰﾄ真空破壊ON
STG @MR4108
RES MR7712               ; ばね吸着ﾄﾗﾝｽﾎﾟｰﾄ吸着ON
CON
SET MR7713               ; ばね吸着ﾄﾗﾝｽﾎﾟｰﾄ吸着OFF
CON
SET MR7714               ; ばね吸着ﾄﾗﾝｽﾎﾟｰﾄ真空破壊ON
CON
TMR @12 #20
CON
AND @T12
JMP @MR4109
;圧縮ばね吸着上昇
STG @MR4109
SET MR7401               ; 圧縮ばね吸着上昇
CON
RES MR7400               ; 圧縮ばね吸着下降
CON
MPS
LDB MR4301               ; 圧縮ばね吸着上昇端ERR
AND R4301                ; 圧縮ばね吸着上昇端
ANB R4300                ; 圧縮ばね吸着下降端
AND @T11                 ; R4301安定
ANL
JMP @MR4110
MPP
LD MR4301                ; 圧縮ばね吸着上昇端ERR
AND R41204               ; TASK4 PAUSE 要求
ANL
SET @MR1901              ; Main2 HALT許可
;取出し番号加算
STG @MR4110
INC.L DM20026            ; ばね取出し番号
CON
JMP @MR4111
;Main2→1ばね取出し中OFF
STG @MR4111
RES @MR901               ; Main2→1ばね取出し中
CON
JMP @MR4112
STG @MR4112
MPS
LDB R41204               ; TASK4 PAUSE 要求
ANB @MR900               ; Main1→2ばね取出し要求
ANL
JMP @MR4113
MPP
AND R41204               ; TASK4 PAUSE 要求
SET @MR1901              ; Main2 HALT許可
;再取り出し分岐
STG @MR4113
MPS
ANB @MR902               ; 再取出し
JMP @MR4200
MPP
AND @MR902               ; 再取出し
JMP @MR4114
STG @MR4114
RES @MR902               ; 再取出し
CON
JMP @MR4004
;RB8ばね搬送PP フレームセット位置へ
STG @MR4200
DW #2 EM1314             ; RB8Target Pos
CON
SET @MR4700              ; ③SUB_RB8/Move
CON
JMP @MR4203
STG @MR4203
AND @MR4701              ; ③SUB_RB8/Move完了
RES @MR4701              ; ③SUB_RB8/Move完了
CON
JMP @MR4204
;TASK3→4 ばね給材要求待ち
STG @MR4204
MPS
LDB R41204               ; TASK4 PAUSE 要求
AND MR20312              ; TASK3→4 ばね給材要求
ANL
JMP @MR4205
MPP
AND R41204               ; TASK4 PAUSE 要求
SET @MR1901              ; Main2 HALT許可
;給材前ばね確認
STG @MR4205
MPS
LD R4414                 ; ばね有無ｾﾝｻ(ON有)
OR DM2000.3              ; ﾄﾞﾗｲ運転有効/無効(ON有効)
ANL
JMP @MR4208
MPP
LDB R4414                ; ばね有無ｾﾝｻ(ON有)
ANB DM2000.3             ; ﾄﾞﾗｲ運転有効/無効(ON有効)
ANL
TMR @20 #10              ; wait
CON
AND @T20                 ; wait
JMP @MR4206
;Error 143 ばね未検出(RB8ばね搬送PP)
STG @MR4206
ANB R39900               ; RB動作中
MPS
LDB R41204               ; TASK4 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
DW $7400 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #143 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #4414 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task4 ERROR
CON
JMP @MR4207
MPP
AND R41204               ; TASK4 PAUSE 要求
SET @MR1901              ; Main2 HALT許可
STG @MR4207
SET @MR1901              ; Main2 HALT許可
CON
AND @MR101               ; Task4 ERROR_End
RES @MR101               ; Task4 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR105               ; SW1
JMP @MR4205
MPP
AND @MR106               ; SW2
MPS
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP @MR4302
MPP
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP @MR2704
;圧縮ばね吸着下降
STG @MR4208
SET MR7400               ; 圧縮ばね吸着下降
CON
RES MR7401               ; 圧縮ばね吸着上昇
CON
MPS
LDB MR4300               ; 圧縮ばね吸着下降端ERR
AND R4300                ; 圧縮ばね吸着下降端
ANB R4301                ; 圧縮ばね吸着上昇端
ANL
JMP @MR4209
MPP
LD MR4301                ; 圧縮ばね吸着上昇端ERR
AND R41204               ; TASK4 PAUSE 要求
ANL
SET @MR1901              ; Main2 HALT許可
;ばね吸着ﾄﾗﾝｽﾎﾟｰﾄ真空破壊ON
STG @MR4209
RES MR7712               ; ばね吸着ﾄﾗﾝｽﾎﾟｰﾄ吸着ON
CON
SET MR7713               ; ばね吸着ﾄﾗﾝｽﾎﾟｰﾄ吸着OFF
CON
SET MR7714               ; ばね吸着ﾄﾗﾝｽﾎﾟｰﾄ真空破壊ON
CON
TMR @7 #5                ; wait
CON
AND @T7                  ; wait
JMP @MR4210
;圧縮ばね吸着上昇
STG @MR4210
SET MR7401               ; 圧縮ばね吸着上昇
CON
RES MR7400               ; 圧縮ばね吸着下降
CON
MPS
LDB MR4301               ; 圧縮ばね吸着上昇端ERR
AND R4301                ; 圧縮ばね吸着上昇端
ANB R4300                ; 圧縮ばね吸着下降端
AND @T11                 ; R4301安定
ANL
JMP @MR4211
MPP
LD MR4301                ; 圧縮ばね吸着上昇端ERR
AND R41204               ; TASK4 PAUSE 要求
ANL
SET @MR1901              ; Main2 HALT許可
;ばね搬送PP吸着&有無確認
STG @MR4211
SET @MR5200              ; ⑦SUB_ばね搬送PP吸着&有無確認
CON
JMP @MR4212
STG @MR4212
AND @MR5201              ; ⑦SUB_ばね搬送PP吸着&有無確完了
RES @MR5201              ; ⑦SUB_ばね搬送PP吸着&有無確完了
CON
JMP @MR4213
STG @MR4213
MPS
LD DM2000.3              ; ﾄﾞﾗｲ運転有効/無効(ON有効)
ANB LR10004              ; デバッグ用ばねCHECK
ANL
MPS
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP @MR4300
MPP
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP @MR2704
MPP
LDB DM2000.3             ; ﾄﾞﾗｲ運転有効/無効(ON有効)
OR LR10004               ; デバッグ用ばねCHECK
ANL
MPS
AND= DM20035 #1          ; ばね搬送有無記憶(1=有り)
JMP @MR4214
MPP
AND= DM20035 #0          ; ばね搬送有無記憶(1=有り)
MPS
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP @MR4300
MPP
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP @MR2704
;Error 144 ばね受渡し失敗(RB8ばね搬送PP)
STG @MR4214
ANB R39900               ; RB動作中
MPS
LDB R41204               ; TASK4 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
DW $7200 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #144 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #4414 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task4 ERROR
CON
JMP @MR4215
MPP
AND R41204               ; TASK4 PAUSE 要求
SET @MR1901              ; Main2 HALT許可
STG @MR4215
SET @MR1901              ; Main2 HALT許可
CON
AND @MR101               ; Task4 ERROR_End
RES @MR101               ; Task4 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR105               ; SW1
JMP @MR4211
MPP
AND @MR106               ; SW2
MPS
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP @MR4204
MPP
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP @MR2704
;TASK4→3 ばね給材中OFF
STG @MR4300
SET MR20313              ; TASK4→3 ばね給材完了
CON
JMP @MR4301
;TASK4→3 ばね給材中OFF
STG @MR4301
MPS
LDB R41204               ; TASK4 PAUSE 要求
ANB MR20312              ; TASK3→4 ばね給材要求
ANL
RES MR20313              ; TASK4→3 ばね給材完了
CON
@INC.S DM20041           ; ばね投入数(ﾌﾚｰﾑに)
CON
JMP @MR4302
MPP
AND R41204               ; TASK4 PAUSE 要求
SET @MR1901              ; Main2 HALT許可
;Main1→2ばね取出し要求分岐
STG @MR4302
MPS
AND @MR900               ; Main1→2ばね取出し要求
JMP @MR4315
MPP
ANB @MR900               ; Main1→2ばね取出し要求
JMP @MR4303
;RB8ばね搬送PP 待機位置へ
STG @MR4303
DW #1 EM1314             ; RB8Target Pos
CON
SET @MR4700              ; ③SUB_RB8/Move
CON
JMP @MR4304
STG @MR4304
AND @MR4701              ; ③SUB_RB8/Move完了
RES @MR4701              ; ③SUB_RB8/Move完了
CON
JMP @MR4315
;先頭へ
STG @MR4315
JMP @MR4004
;終了
STG @MR4415              ; Main2 END
SET @MR4001              ; Main2 END
CON
RES @MR4002              ; Main2 Busy
CON
ENDS
;<h1/>MAINTE/ﾒﾝﾃﾅﾝｽ動作
;[本STG内容]
;・各TaskのMAINTE動作を記述して下さい
;・動作ﾓｰﾄﾞは「MAINTEAC*」に格納されています(1～32)
;・動作終了時は@MR2915にJMPして下さい
STG LR5604               ; _Grp1_Task4_MAINTE.STG
JMP @MR2000              ; Mainte
STG @MR2000              ; Mainte
SET @MR2002              ; ﾒﾝﾃ中
CON
JMP @MR2003
STG @MR2003
MPS
AND= DM4110 #3           ; _Group1　ﾒﾝﾃ動作番号
JMP @MR2100
MRD
AND= DM4110 #4           ; _Group1　ﾒﾝﾃ動作番号
JMP @MR2103
MPP
LD<> DM4110 #3           ; _Group1　ﾒﾝﾃ動作番号
AND<> DM4110 #4          ; _Group1　ﾒﾝﾃ動作番号
ANL
JMP @MR2915              ; Mainte END
STG @MR2100
JMP @MR2101
;ばねトレイ動作
;[[ﾄﾚｲｾｯﾄ]]ﾄﾚｲｾｯﾄ位置へ移動します。
;[[ﾊﾟﾚﾀｲｽﾞ]]ﾊﾟﾚﾀｲｽﾞ位置へ移動します。
;[[一連]]パレタイズからばね供給まで行います。
;[[定停止]]動作を終了します。
STG @MR2101
ANB R39204               ; SELECT_ACT Interlock
SET R39204               ; SELECT_ACT Interlock
CON
MPS
SET @MR1900              ; Main1 HALT許可
CON
DW #5 @DM31              ; ScreenNo /SELECT_ACT
CON
DW #4 @DM32              ; SW1_No /SELECT_ACT
CON
DW #5 @DM33              ; SW2_No /SELECT_ACT
CON
DW #29 @DM34             ; SW3_No /SELECT_ACT
CON
DW #3 @DM35              ; SW4_No /SELECT_ACT
CON
DW #0 @DM36              ; Bz_Use /SELECT_ACT
MPP
SET @MR200               ; Task4 SELECT_ACT
CON
JMP @MR2102
STG @MR2102
SET @MR1900              ; Main1 HALT許可
CON
AND @MR201               ; Task4 SEL_ACT END
RES @MR201               ; Task4 SEL_ACT END
CON
RES R39204               ; SELECT_ACT Interlock
CON
MPS
AND @MR205               ; SW1
DW #1 @DM10              ; ﾒﾝﾃ動作ｺｰﾄﾞ
CON
JMP @MR2200
MRD
AND @MR206               ; SW2
DW #2 @DM10              ; ﾒﾝﾃ動作ｺｰﾄﾞ
CON
JMP @MR2200
MRD
AND @MR207               ; SW3
DW #6 @DM10              ; ﾒﾝﾃ動作ｺｰﾄﾞ
CON
JMP @MR2200
MPP
AND @MR208               ; SW4
DW #0 @DM10              ; ﾒﾝﾃ動作ｺｰﾄﾞ
CON
JMP @MR2914
STG @MR2103
JMP @MR2104
;ばね搬送PP動作
;[[ﾊﾟﾚﾀｲｽﾞ]]ﾊﾟﾚﾀｲｽﾞ位置へ移動します。
;[[取出]]ばねを取出します。
;[[受渡し]]ばねを受け渡します。
;[[定停止]]動作を終了します。
STG @MR2104
ANB R39204               ; SELECT_ACT Interlock
SET R39204               ; SELECT_ACT Interlock
CON
MPS
SET @MR1900              ; Main1 HALT許可
CON
DW #6 @DM31              ; ScreenNo /SELECT_ACT
CON
DW #5 @DM32              ; SW1_No /SELECT_ACT
CON
DW #6 @DM33              ; SW2_No /SELECT_ACT
CON
DW #9 @DM34              ; SW3_No /SELECT_ACT
CON
DW #3 @DM35              ; SW4_No /SELECT_ACT
CON
DW #0 @DM36              ; Bz_Use /SELECT_ACT
MPP
SET @MR200               ; Task4 SELECT_ACT
CON
JMP @MR2105
STG @MR2105
SET @MR1900              ; Main1 HALT許可
CON
AND @MR201               ; Task4 SEL_ACT END
RES @MR201               ; Task4 SEL_ACT END
CON
RES R39204               ; SELECT_ACT Interlock
CON
MPS
AND @MR205               ; SW1
DW #3 @DM10              ; ﾒﾝﾃ動作ｺｰﾄﾞ
CON
JMP @MR2200
MRD
AND @MR206               ; SW2
DW #4 @DM10              ; ﾒﾝﾃ動作ｺｰﾄﾞ
CON
JMP @MR2200
MRD
AND @MR207               ; SW3
DW #5 @DM10              ; ﾒﾝﾃ動作ｺｰﾄﾞ
CON
JMP @MR2200
MPP
AND @MR208               ; SW4
DW #0 @DM10              ; ﾒﾝﾃ動作ｺｰﾄﾞ
CON
JMP @MR2914
;ｽﾃｯﾌﾟor通常　か選択
STG @MR2200
MPS
MSTRT SELECT_POST #1 MyTask #0 @MR2005;自ﾀｽｸ番号
MPP
AND @MR2005
RES @MR2005
CON
JMP @MR2202
LD= @DM10 #1             ; ﾒﾝﾃ動作ｺｰﾄﾞ
OR= @DM10 #6             ; ﾒﾝﾃ動作ｺｰﾄﾞ
AND DM11031.1
LDB R4300                ; 圧縮ばね吸着下降端
AND R4301                ; 圧縮ばね吸着上昇端
LD DM11063.1
AND<=.L DM11056 +17700   ; RB8 現在位置
ORL
ANL
OUT @MR500               ; ﾒﾝﾃｺｰﾄﾞ1条件OK
LD= @DM10 #2             ; ﾒﾝﾃ動作ｺｰﾄﾞ
OR= @DM10 #6             ; ﾒﾝﾃ動作ｺｰﾄﾞ
AND DM11031.1
LDB R4300                ; 圧縮ばね吸着下降端
AND R4301                ; 圧縮ばね吸着上昇端
LD DM11063.1
AND<=.L DM11056 +17700   ; RB8 現在位置
ORL
ANL
OUT @MR501               ; ﾒﾝﾃｺｰﾄﾞ2条件OK
LD= @DM10 #3             ; ﾒﾝﾃ動作ｺｰﾄﾞ
OR= @DM10 #6             ; ﾒﾝﾃ動作ｺｰﾄﾞ
OUT @MR502               ; ﾒﾝﾃｺｰﾄﾞ3条件OK
LD= @DM10 #4             ; ﾒﾝﾃ動作ｺｰﾄﾞ
OR= @DM10 #6             ; ﾒﾝﾃ動作ｺｰﾄﾞ
AND DM11063.1
LD>= EM1315 #20          ; RB8Now Pos
OR= @DM10 #6             ; ﾒﾝﾃ動作ｺｰﾄﾞ
ANL
ANB R4414                ; ばね有無ｾﾝｻ(ON有)
OUT @MR503               ; ﾒﾝﾃｺｰﾄﾞ4条件OK
LD= @DM10 #5             ; ﾒﾝﾃ動作ｺｰﾄﾞ
OR= @DM10 #6             ; ﾒﾝﾃ動作ｺｰﾄﾞ
AND DM11087.1
AND= EM1321 #2           ; RB11Now Pos
LD R4511                 ; ﾌﾚｰﾑ有無検出(ON有り)
OR DM2000.3              ; ﾄﾞﾗｲ運転有効/無効(ON有効)
ANL
AND R4512                ; ﾌﾚｰﾑ浮き検出1(ONOK)
AND R4513                ; ﾌﾚｰﾑ浮き検出2(ONOK)
OUT @MR504               ; ﾒﾝﾃｺｰﾄﾞ5条件OK
STG @MR2202
MPS
TMR @39 #10              ; ﾒﾝﾃ条件NG
CON
AND @T39                 ; ﾒﾝﾃ条件NG
JMP @MR2810
MPP
ANB @T39                 ; ﾒﾝﾃ条件NG
MPS
LD= @DM10 #1             ; ﾒﾝﾃ動作ｺｰﾄﾞ
AND @MR500               ; ﾒﾝﾃｺｰﾄﾞ1条件OK
ANL
JMP @MR2300
MRD
LD= @DM10 #2             ; ﾒﾝﾃ動作ｺｰﾄﾞ
AND @MR501               ; ﾒﾝﾃｺｰﾄﾞ2条件OK
ANL
JMP @MR2400
MRD
LD= @DM10 #3             ; ﾒﾝﾃ動作ｺｰﾄﾞ
AND @MR502               ; ﾒﾝﾃｺｰﾄﾞ3条件OK
ANL
JMP @MR2500
MRD
LD= @DM10 #4             ; ﾒﾝﾃ動作ｺｰﾄﾞ
AND @MR503               ; ﾒﾝﾃｺｰﾄﾞ4条件OK
ANL
JMP @MR2600
MRD
LD= @DM10 #5             ; ﾒﾝﾃ動作ｺｰﾄﾞ
AND @MR504               ; ﾒﾝﾃｺｰﾄﾞ5条件OK
ANL
JMP @MR2700
MPP
LD= @DM10 #6             ; ﾒﾝﾃ動作ｺｰﾄﾞ
AND @MR501               ; ﾒﾝﾃｺｰﾄﾞ2条件OK
AND @MR502               ; ﾒﾝﾃｺｰﾄﾞ3条件OK
AND @MR503               ; ﾒﾝﾃｺｰﾄﾞ4条件OK
AND @MR504               ; ﾒﾝﾃｺｰﾄﾞ5条件OK
ANL
JMP @MR2800
;<h1/> ﾒﾝﾃｺｰﾄﾞ1動作/Maintenance code 1 Operation
STG @MR2300
JMP @MR2301
STG @MR2301
MPS
ANB R41204               ; TASK4 PAUSE 要求
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
DW #2 EM1306             ; RB4Target Pos
CON
SET @MR4500              ; ①SUB_RB4/Move
CON
JMP @MR2302
MPP
AND R41204               ; TASK4 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR2302
AND @MR4501              ; ①SUB_RB4/Move完了
RES @MR4501              ; ①SUB_RB4/Move完了
CON
JMP @MR2100
;<h1/> ﾒﾝﾃｺｰﾄﾞ2動作/Maintenance code 2 Operation
STG @MR2400
DW #2301 DM3008          ; _MainTP　切替ﾍﾟｰｼﾞNo
CON
JMP @MR2401
STG @MR2401
MPS
LDB R41204               ; TASK4 PAUSE 要求
AND MR20102              ; TP選択終了SW
ANL
JMP @MR2402
MPP
AND R41204               ; TASK4 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;ﾊﾟﾚﾀｲｽﾞ計算
STG @MR2402
JMP @MR3100
STG @MR2403
MPS
AND<> @DM10 #6           ; ﾒﾝﾃ動作ｺｰﾄﾞ
JMP @MR2100
MPP
AND= @DM10 #6            ; ﾒﾝﾃ動作ｺｰﾄﾞ
JMP @MR2502
;<h1/> ﾒﾝﾃｺｰﾄﾞ3動作/Maintenance code 3 Operation
STG @MR2500
DW #2301 DM3008          ; _MainTP　切替ﾍﾟｰｼﾞNo
CON
JMP @MR2501
STG @MR2501
MPS
LDB R41204               ; TASK4 PAUSE 要求
AND MR20102              ; TP選択終了SW
ANL
JMP @MR2502
MPP
AND R41204               ; TASK4 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
;圧縮ばね吸着上昇
STG @MR2502
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
SET MR7401               ; 圧縮ばね吸着上昇
CON
RES MR7400               ; 圧縮ばね吸着下降
CON
MPS
LDB MR4301               ; 圧縮ばね吸着上昇端ERR
ANB R4300                ; 圧縮ばね吸着下降端
AND R4301                ; 圧縮ばね吸着上昇端
AND @T11                 ; R4301安定
ANL
JMP @MR2503
MPP
LD MR4301                ; 圧縮ばね吸着上昇端ERR
AND R41204               ; TASK4 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;ﾊﾟﾚﾀｲｽﾞ計算
STG @MR2503
JMP @MR4005
STG @MR2504
MPS
AND<> @DM10 #6           ; ﾒﾝﾃ動作ｺｰﾄﾞ
JMP @MR2103
MPP
AND= @DM10 #6            ; ﾒﾝﾃ動作ｺｰﾄﾞ
JMP @MR2600
;<h1/> ﾒﾝﾃｺｰﾄﾞ4動作/Maintenance code 4 Operation
;圧縮ばね吸着下降
STG @MR2600
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
SET MR7400               ; 圧縮ばね吸着下降
CON
RES MR7401               ; 圧縮ばね吸着上昇
CON
MPS
LDB MR4300               ; 圧縮ばね吸着下降端ERR
AND R4300                ; 圧縮ばね吸着下降端
ANB R4301                ; 圧縮ばね吸着上昇端
ANL
JMP @MR2601
MPP
LD MR4300                ; 圧縮ばね吸着下降端ERR
AND R41204               ; TASK4 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR2601
SET MR7712               ; ばね吸着ﾄﾗﾝｽﾎﾟｰﾄ吸着ON
CON
RES MR7713               ; ばね吸着ﾄﾗﾝｽﾎﾟｰﾄ吸着OFF
CON
RES MR7714               ; ばね吸着ﾄﾗﾝｽﾎﾟｰﾄ真空破壊ON
CON
TMR @21 #10              ; wait
CON
AND @T21                 ; wait
JMP @MR2603
;圧縮ばね吸着上昇
STG @MR2603
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
SET MR7401               ; 圧縮ばね吸着上昇
CON
RES MR7400               ; 圧縮ばね吸着下降
CON
MPS
LDB MR4301               ; 圧縮ばね吸着上昇端ERR
ANB R4300                ; 圧縮ばね吸着下降端
AND R4301                ; 圧縮ばね吸着上昇端
AND @T11                 ; R4301安定
ANL
JMP @MR2604
MPP
LD MR4301                ; 圧縮ばね吸着上昇端ERR
AND R41204               ; TASK4 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;ばね搬送PP有無確認
STG @MR2604
SET @MR5200              ; ⑦SUB_ばね搬送PP吸着&有無確認
CON
JMP @MR2605
STG @MR2605
AND @MR5201              ; ⑦SUB_ばね搬送PP吸着&有無確完了
RES @MR5201              ; ⑦SUB_ばね搬送PP吸着&有無確完了
CON
JMP @MR2606
STG @MR2606
MPS
AND= DM20035 #1          ; ばね搬送有無記憶(1=有り)
JMP @MR2609
MPP
AND= DM20035 #0          ; ばね搬送有無記憶(1=有り)
JMP @MR2607
;Error 143 ばね取出し失敗(RB8ばね搬送PP)
STG @MR2607
ANB R39900               ; RB動作中
MPS
LDB R41204               ; TASK4 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
DW $7240 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #143 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #4706 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task4 ERROR
CON
JMP @MR2608
MPP
AND R41204               ; TASK4 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR2608
SET @MR1900              ; Main1 HALT許可
CON
AND @MR101               ; Task4 ERROR_End
RES @MR101               ; Task4 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR105               ; SW1
JMP @MR2604
MRD
AND @MR106               ; SW2
SET MR7713               ; ばね吸着ﾄﾗﾝｽﾎﾟｰﾄ吸着OFF
CON
RES MR7712               ; ばね吸着ﾄﾗﾝｽﾎﾟｰﾄ吸着ON
CON
RES MR7714               ; ばね吸着ﾄﾗﾝｽﾎﾟｰﾄ真空破壊ON
CON
JMP @MR2600
MPP
AND @MR107               ; SW3
SET MR7713               ; ばね吸着ﾄﾗﾝｽﾎﾟｰﾄ吸着OFF
CON
RES MR7712               ; ばね吸着ﾄﾗﾝｽﾎﾟｰﾄ吸着ON
CON
RES MR7714               ; ばね吸着ﾄﾗﾝｽﾎﾟｰﾄ真空破壊ON
CON
MPS
AND<> @DM10 #6           ; ﾒﾝﾃ動作ｺｰﾄﾞ
JMP @MR2609
MPP
AND= @DM10 #6            ; ﾒﾝﾃ動作ｺｰﾄﾞ
JMP @MR2801
;終了
STG @MR2609
MPS
AND<> @DM10 #6           ; ﾒﾝﾃ動作ｺｰﾄﾞ
JMP @MR2103
MPP
AND= @DM10 #6            ; ﾒﾝﾃ動作ｺｰﾄﾞ
JMP @MR2700
;<h1/> ﾒﾝﾃｺｰﾄﾞ5動作/Maintenance code 5 Operation
;ばね給材
;圧縮ばね吸着上昇
STG @MR2700
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
SET MR7401               ; 圧縮ばね吸着上昇
CON
RES MR7400               ; 圧縮ばね吸着下降
CON
MPS
LDB MR4301               ; 圧縮ばね吸着上昇端ERR
ANB R4300                ; 圧縮ばね吸着下降端
AND R4301                ; 圧縮ばね吸着上昇端
AND @T11                 ; R4301安定
ANL
JMP @MR2701
MPP
LD MR4301                ; 圧縮ばね吸着上昇端ERR
AND R41204               ; TASK4 PAUSE 要求
ANL
SET @MR1900              ; Main1 HALT許可
;RB8ばね搬送PP フレームセット位置移動(算出)_POS2
STG @MR2701
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
DW #2 EM1314             ; RB8Target Pos
CON
SET @MR4700              ; ③SUB_RB8/Move
CON
JMP @MR2702
STG @MR2702
AND @MR4701              ; ③SUB_RB8/Move完了
RES @MR4701              ; ③SUB_RB8/Move完了
CON
JMP @MR2703
STG @MR2703
JMP @MR4205
;終了
STG @MR2704
MPS
AND<> @DM10 #6           ; ﾒﾝﾃ動作ｺｰﾄﾞ
JMP @MR2103
MPP
AND= @DM10 #6            ; ﾒﾝﾃ動作ｺｰﾄﾞ
JMP @MR2801
;<h1/> ﾒﾝﾃｺｰﾄﾞ6動作/Maintenance code 6 Operation
STG @MR2800
JMP @MR2400
STG @MR2801
DW #1 EM1314             ; RB8Target Pos
CON
SET @MR4700              ; ③SUB_RB8/Move
CON
JMP @MR2802
STG @MR2802
AND @MR4701              ; ③SUB_RB8/Move完了
RES @MR4701              ; ③SUB_RB8/Move完了
CON
JMP @MR2100
;<h1/> ﾒﾝﾃﾅﾝｽｲﾝﾀｰﾛｯｸ
STG @MR2810
ANB R39900               ; RB動作中
MPS
LDB R41204               ; TASK4 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
DW $3000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #52 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task4 ERROR
CON
JMP @MR2811
MPP
AND R41204               ; TASK4 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR2811
SET @MR1900              ; Main1 HALT許可
CON
AND @MR101               ; Task4 ERROR_End
RES @MR101               ; Task4 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR2003
;Maintenance 終了
STG @MR2914
MCALL MODE_INDI #2
MCALL HOLD_REQUEST MyGroup;自ｸﾞﾙｰﾌﾟ番号
DW #211 DM3008           ; _MainTP　切替ﾍﾟｰｼﾞNo
CON
JMP @MR2915              ; Mainte END
STG @MR2915              ; Mainte END
MPS
LD R41204                ; TASK4 PAUSE 要求
ANB @MR001               ; TASK4　ERROR
ANL
SET @MR1900              ; Main1 HALT許可
MPP
ANB R41204               ; TASK4 PAUSE 要求
RES @MR2002              ; ﾒﾝﾃ中
CON
JMP LR604                ; _Grp1_Task4_Fin.STG
;<h1/>SubRoutines/ｻﾌﾞﾙｰﾁﾝ
;[記述方法]
;・ｻﾌﾞﾙｰﾁﾝは本ﾌﾞｯｸﾏｰｸから下に記述していって下さい
;・ｻﾌﾞﾙｰﾁﾝは必ずﾌﾞｯｸﾏｰｸを挿入して処理内容を明確にする事
;<h1/> ①SUB_RB4/Move
STG @MR4500              ; ①SUB_RB4/Move
SET @MR4502              ; ①SUB_RB4/Move中
CON
JMP @MR4503
;ｱﾗｰﾑﾘｾｯﾄ &ｻｰﾎﾞON　ｱﾗｰﾑﾘｾｯﾄできない場合は、ｻｰﾎﾞOFFしError発生
STG @MR4503
MPS
BSET DM11231 #3          ; RB4 制御信号
CON
BANB DM11031 #3          ; RB4 状態信号
BSET DM11231 #4          ; RB4 制御信号
CON
BAND DM11031 #4          ; RB4 状態信号
BRES DM11231 #3          ; RB4 制御信号
CON
JMP @MR4504
MPP
TMR @0 #20               ; RB4Moveｴﾗｰ
CON
AND @T0                  ; RB4Moveｴﾗｰ
BRES DM11231 #3          ; RB4 制御信号
CON
BRES DM11231 #4          ; RB4 制御信号
CON
JMP @MR4614
STG @MR4504
SET R35300               ; RB4 MOVE
CON
JMP @MR4505
STG @MR4505
AND R35301               ; RB4 MOVE END
RES R35301               ; RB4 MOVE END
CON
JMP @MR4506
STG @MR4506
MPS
ANB R35303               ; RB4 Alarm
JMP @MR4507
MPP
AND R35303               ; RB4 Alarm
RES R35303               ; RB4 Alarm
CON
JMP @MR4614
;END
STG @MR4507
SET @MR4501              ; ①SUB_RB4/Move完了
CON
RES @MR4502              ; ①SUB_RB4/Move中
CON
ENDS
;<h1/> ②SUB_RB4/Home
STG @MR4600              ; ②SUB_RB4/Home
DW #0 EM1307             ; RB4Now Pos
CON
SET @MR4602              ; ②SUB_RB4/Home中
CON
JMP @MR4603
;ｱﾗｰﾑﾘｾｯﾄ &ｻｰﾎﾞON　ｱﾗｰﾑﾘｾｯﾄできない場合は、ｻｰﾎﾞOFFしError発生
STG @MR4603
MPS
BSET DM11231 #3          ; RB4 制御信号
CON
BANB DM11031 #3          ; RB4 状態信号
BSET DM11231 #4          ; RB4 制御信号
CON
BAND DM11031 #4          ; RB4 状態信号
BRES DM11231 #3          ; RB4 制御信号
CON
JMP @MR4604
MPP
TMR @1 #20               ; RB4Homeｴﾗｰ
CON
AND @T1                  ; RB4Homeｴﾗｰ
BRES DM11231 #3          ; RB4 制御信号
CON
BRES DM11231 #4          ; RB4 制御信号
CON
JMP @MR4614
STG @MR4604
MPS
BAND DM11031 #1          ; RB4 状態信号
JMP @MR4607
MPP
BANB DM11031 #1          ; RB4 状態信号
SET R35308               ; RB4 HOME
CON
JMP @MR4605
STG @MR4605
AND R35309               ; RB4 HOME END
RES R35309               ; RB4 HOME END
CON
JMP @MR4606
STG @MR4606
MPS
ANB R35303               ; RB4 Alarm
JMP @MR4607
MPP
AND R35303               ; RB4 Alarm
RES R35303               ; RB4 Alarm
CON
JMP @MR4614
;END
STG @MR4607
SET @MR4601              ; ②SUB_RB4/Home完了
CON
RES @MR4602              ; ②SUB_RB4/Home中
CON
ENDS
;Error 4 RB4動作異常
STG @MR4614
ANB R39900               ; RB動作中
MPS
LDB R41204               ; TASK4 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
MPS
DW $1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #4 @DM1               ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task4 ERROR
CON
JMP @MR4615
MPP
SET B3990                ; ｱﾗｰﾑ詳細表示
CON
LDA DM11030              ; RB4 ｱﾗｰﾑｺｰﾄﾞ
CON
STA DM50310              ; RB ｱﾗｰﾑ表示
MPP
AND R41204               ; TASK4 PAUSE 要求
SET @MR1900              ; Main1 HALT許可
STG @MR4615
SET @MR1900              ; Main1 HALT許可
CON
AND @MR101               ; Task4 ERROR_End
RES @MR101               ; Task4 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
RES B3990                ; ｱﾗｰﾑ詳細表示
CON
DW #0 DM50310            ; RB ｱﾗｰﾑ表示
CON
MPS
AND @MR4602              ; ②SUB_RB4/Home中
JMP @MR4603
MPP
AND @MR4502              ; ①SUB_RB4/Move中
JMP @MR4503
;<h1/> ③SUB_RB8/Move
STG @MR4700              ; ③SUB_RB8/Move
SET @MR4702              ; ③SUB_RB8/Move中
CON
JMP @MR4703
;ｱﾗｰﾑﾘｾｯﾄ &ｻｰﾎﾞON　ｱﾗｰﾑﾘｾｯﾄできない場合は、ｻｰﾎﾞOFFしError発生
STG @MR4703
MPS
BSET DM11263 #3          ; RB8 制御信号
CON
BANB DM11063 #3          ; RB8 状態信号
BSET DM11263 #4          ; RB8 制御信号
CON
BAND DM11063 #4          ; RB8 状態信号
BRES DM11263 #3          ; RB8 制御信号
CON
JMP @MR4704
MPP
TMR @2 #20               ; RB8Moveｴﾗｰ
CON
AND @T2                  ; RB8Moveｴﾗｰ
BRES DM11263 #3          ; RB8 制御信号
CON
BRES DM11263 #4          ; RB8 制御信号
CON
JMP @MR4814
STG @MR4704
SET R35700               ; RB8 MOVE
CON
JMP @MR4705
STG @MR4705
AND R35701               ; RB8 MOVE END
RES R35701               ; RB8 MOVE END
CON
JMP @MR4706
STG @MR4706
MPS
ANB R35703               ; RB8 Alarm
JMP @MR4707
MPP
AND R35703               ; RB8 Alarm
RES R35703               ; RB8 Alarm
CON
JMP @MR4814
;END
STG @MR4707
SET @MR4701              ; ③SUB_RB8/Move完了
CON
RES @MR4702              ; ③SUB_RB8/Move中
CON
ENDS
;<h1/> ④SUB_RB8/Home
STG @MR4800              ; ④SUB_RB8/Home
DW #0 EM1315             ; RB8Now Pos
CON
SET @MR4802              ; ④SUB_RB8/Home中
CON
JMP @MR4803
;ｱﾗｰﾑﾘｾｯﾄ &ｻｰﾎﾞON　ｱﾗｰﾑﾘｾｯﾄできない場合は、ｻｰﾎﾞOFFしError発生
STG @MR4803
MPS
BSET DM11263 #3          ; RB8 制御信号
CON
BANB DM11063 #3          ; RB8 状態信号
BSET DM11263 #4          ; RB8 制御信号
CON
BAND DM11063 #4          ; RB8 状態信号
BRES DM11263 #3          ; RB8 制御信号
CON
JMP @MR4804
MPP
TMR @3 #20               ; RB8Homeｴﾗｰ
CON
AND @T3                  ; RB8Homeｴﾗｰ
BRES DM11263 #3          ; RB8 制御信号
CON
BRES DM11263 #4          ; RB8 制御信号
CON
JMP @MR4814
STG @MR4804
MPS
BAND DM11063 #1          ; RB8 状態信号
JMP @MR4807
MPP
BANB DM11063 #1          ; RB8 状態信号
SET R35708               ; RB8 HOME
CON
JMP @MR4805
STG @MR4805
AND R35709               ; RB8 HOME END
RES R35709               ; RB8 HOME END
CON
JMP @MR4806
STG @MR4806
MPS
ANB R35703               ; RB8 Alarm
JMP @MR4807
MPP
AND R35703               ; RB8 Alarm
RES R35703               ; RB8 Alarm
CON
JMP @MR4814
;END
STG @MR4807
SET @MR4801              ; ④SUB_RB8/Home完了
CON
RES @MR4802              ; ④SUB_RB8/Home中
CON
ENDS
;Error 8 RB8動作異常
STG @MR4814
ANB R39900               ; RB動作中
MPS
LDB R41204               ; TASK4 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
MPS
DW $1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #8 @DM1               ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task4 ERROR
CON
JMP @MR4815
MPP
SET B3990                ; ｱﾗｰﾑ詳細表示
CON
LDA DM11062              ; RB8 ｱﾗｰﾑｺｰﾄﾞ
CON
STA DM50310              ; RB ｱﾗｰﾑ表示
MPP
AND R41204               ; TASK4 PAUSE 要求
MPS
ANB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
SET @MR1900              ; Main1 HALT許可
MPP
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
SET @MR1901              ; Main2 HALT許可
STG @MR4815
MPS
ANB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
SET @MR1900              ; Main1 HALT許可
MRD
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
SET @MR1901              ; Main2 HALT許可
MPP
AND @MR101               ; Task4 ERROR_End
RES @MR101               ; Task4 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
RES B3990                ; ｱﾗｰﾑ詳細表示
CON
DW #0 DM50310            ; RB ｱﾗｰﾑ表示
CON
MPS
AND @MR4802              ; ④SUB_RB8/Home中
JMP @MR4803
MPP
AND @MR4702              ; ③SUB_RB8/Move中
JMP @MR4703
;<h1/>未使用 ⑤SUB_ばねﾊﾟﾚﾀｲｽﾞ(ﾄﾚｲ搬送側)
STG @MR4900              ; ⑤SUB_ばねﾊﾟﾚﾀｲｽﾞ(ﾄﾚｲ側)
SET @MR4902              ; ⑤SUB_ばねﾊﾟﾚﾀｲｽﾞ(ﾄﾚｲ側)中
CON
JMP @MR4903
;ﾊﾟﾚﾀｲｼﾞﾝｸﾞﾊﾟﾗﾒｰﾀｰ/Palletizing parameters
;P11>P13 & P14>P16：ﾊﾟﾚﾀｲｽﾞ値正常
LD>.L EM16360 EM16372    ; RB4 P11 POS(LO)  RB4 P13 POS(LO)
AND>.L EM16378 EM16390   ; RB4 P14 POS(LO)  RB4 P16 POS(LO)
OUT @MR600               ; ﾄﾚｲ搬送ﾊﾟﾚﾀｲｽﾞ値正常
;ﾄﾚｲ1
;P11=P12：X方向ﾋﾟｯﾁ変更無し
LD=.L EM16360 EM16366    ; RB4 P11 POS(LO)  RB4 P12 POS(LO)
OUT @MR601               ; ﾄﾚｲ搬送ﾄﾚｲ1X方向ﾋﾟｯﾁ変更無し
;P11<P12：X方向ﾋﾟｯﾁ増加
LD<.L EM16360 EM16366    ; RB4 P11 POS(LO)  RB4 P12 POS(LO)
OUT @MR602               ; ﾄﾚｲ搬送ﾄﾚｲ1X方向ﾋﾟｯﾁ増加
;P11>P12：X方向ﾋﾟｯﾁ減少
LD>.L EM16360 EM16366    ; RB4 P11 POS(LO)  RB4 P12 POS(LO)
OUT @MR603               ; ﾄﾚｲ搬送ﾄﾚｲ1X方向ﾋﾟｯﾁ減少
;ﾄﾚｲ2
;P14=P15：X方向ﾋﾟｯﾁ変更無し
LD=.L EM16378 EM16384    ; RB4 P14 POS(LO)  RB4 P15 POS(LO)
OUT @MR604               ; ﾄﾚｲ搬送ﾄﾚｲ2X方向ﾋﾟｯﾁ変更無し
;P14<P15：X方向ﾋﾟｯﾁ増加
LD<.L EM16378 EM16384    ; RB4 P14 POS(LO)  RB4 P15 POS(LO)
OUT @MR605               ; ﾄﾚｲ搬送ﾄﾚｲ2X方向ﾋﾟｯﾁ増加
;P14>P15：X方向ﾋﾟｯﾁ減少
LD>.L EM16378 EM16384    ; RB4 P14 POS(LO)  RB4 P15 POS(LO)
OUT @MR606               ; ﾄﾚｲ搬送ﾄﾚｲ2X方向ﾋﾟｯﾁ減少
;ﾊﾟﾚﾀｲｽﾞ座標ﾁｪｯｸ/palletizing coordinate check
STG @MR4903
MPS
ANB @MR600               ; ﾄﾚｲ搬送ﾊﾟﾚﾀｲｽﾞ値正常
SET @MR607               ; ⑤SUB_ﾊﾟﾚﾀｲｽﾞ異常
CON
JMP @MR4913
MPP
AND @MR600               ; ﾄﾚｲ搬送ﾊﾟﾚﾀｲｽﾞ値正常
JMP @MR4904
;ﾄﾚｲ搬送Y方向ﾋﾟｯﾁ計算：
;ﾄﾚｲ1Y方向ﾋﾟｯﾁ＝(P11-P13)/(ﾄﾚｲ行数-1)
;ﾄﾚｲ2Y方向ﾋﾟｯﾁ＝(P14-P16)/(ﾄﾚｲ行数-1)
;DM20012.L=(EM16360.L-EM16372.L)/(DM7038.L-1)
;DM20016.L=(EM16378.L-EM16390.L)/(DM7038.L-1)
;SET(CR2002,@MR608)'算出完了
LD @MR4904
ANB @MR608               ; ⑤SUB_算出完了
NCJ #1003
;DM20012.L=(EM16360.L-EM16372.L)/(DM7038.L-1)
;
LD CR2002                ; 常時ON
LDA.L DM7038             ; 装置基礎ﾃﾞｰﾀ20
CON
SUB.L +1
CON
STA.L @VM9
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L EM16372            ; RB4 P13 POS(LO)
CON
EXT.L
CON
DIV.L @VM9
CON
STA.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
;DM20016.L=(EM16378.L-EM16390.L)/(DM7038.L-1)
;
LD CR2002                ; 常時ON
LDA.L DM7038             ; 装置基礎ﾃﾞｰﾀ20
CON
SUB.L +1
CON
STA.L @VM11
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L EM16390            ; RB4 P16 POS(LO)
CON
EXT.L
CON
DIV.L @VM11
CON
STA.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
;SET(CR2002,@MR608)'算出完了
LD CR2002                ; 常時ON
SET @MR608               ; ⑤SUB_算出完了
LABEL #1003
;
STG @MR4904
AND @MR608               ; ⑤SUB_算出完了
RES @MR608               ; ⑤SUB_算出完了
CON
JMP @MR4905
;ﾄﾚｲ搬送X方向ﾋﾟｯﾁ計算
;ﾄﾚｲ1枚目
;ﾋﾟｯﾁ変更無し：X方向ﾋﾟｯﾁ＝0
;ﾋﾟｯﾁ増加：X方向ﾋﾟｯﾁ＝(P12-P11)/(ﾄﾚｲ列数-1)
;ﾋﾟｯﾁ減少：X方向ﾋﾟｯﾁ＝(P11-P12)/(ﾄﾚｲ列数-1)
;DM20010.L=0
;SET(CR2002,@MR608)'算出完了
LD @MR4905
AND @MR601               ; ﾄﾚｲ搬送ﾄﾚｲ1X方向ﾋﾟｯﾁ変更無し
ANB @MR608               ; ⑤SUB_算出完了
NCJ #1004
;DM20010.L=0
;
LD CR2002                ; 常時ON
MOV.L +0 DM20010         ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1X方向ﾋﾟｯﾁ
;SET(CR2002,@MR608)'算出完了
LD CR2002                ; 常時ON
SET @MR608               ; ⑤SUB_算出完了
LABEL #1004
;
;DM20010.L=(EM16366.L-EM16360.L)/(DM7040.L-1)
;SET(CR2002,@MR608)'算出完了
LD @MR4905
AND @MR602               ; ﾄﾚｲ搬送ﾄﾚｲ1X方向ﾋﾟｯﾁ増加
ANB @MR608               ; ⑤SUB_算出完了
NCJ #1005
;DM20010.L=(EM16366.L-EM16360.L)/(DM7040.L-1)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
SUB.L +1
CON
STA.L @VM13
CON
LDA.L EM16366            ; RB4 P12 POS(LO)
CON
SUB.L EM16360            ; RB4 P11 POS(LO)
CON
EXT.L
CON
DIV.L @VM13
CON
STA.L DM20010            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1X方向ﾋﾟｯﾁ
;SET(CR2002,@MR608)'算出完了
LD CR2002                ; 常時ON
SET @MR608               ; ⑤SUB_算出完了
LABEL #1005
;
;DM20010.L=(EM16360.L-EM16366.L)/(DM7040.L-1)
;SET(CR2002,@MR608)'算出完了
LD @MR4905
AND @MR602               ; ﾄﾚｲ搬送ﾄﾚｲ1X方向ﾋﾟｯﾁ増加
ANB @MR608               ; ⑤SUB_算出完了
NCJ #1006
;DM20010.L=(EM16360.L-EM16366.L)/(DM7040.L-1)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
SUB.L +1
CON
STA.L @VM15
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L EM16366            ; RB4 P12 POS(LO)
CON
EXT.L
CON
DIV.L @VM15
CON
STA.L DM20010            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1X方向ﾋﾟｯﾁ
;SET(CR2002,@MR608)'算出完了
LD CR2002                ; 常時ON
SET @MR608               ; ⑤SUB_算出完了
LABEL #1006
;
STG @MR4905
AND @MR608               ; ⑤SUB_算出完了
RES @MR608               ; ⑤SUB_算出完了
CON
JMP @MR4906
;ﾄﾚｲ搬送X方向ﾋﾟｯﾁ計算
;ﾄﾚｲ2枚目
;ﾋﾟｯﾁ変更無し：X方向ﾋﾟｯﾁ＝0
;ﾋﾟｯﾁ増加：X方向ﾋﾟｯﾁ＝(P15-P14)/(ﾄﾚｲ列数-1)
;ﾋﾟｯﾁ減少：X方向ﾋﾟｯﾁ＝(P14-P15)/(ﾄﾚｲ列数-1)
;DM20014.L=0
;SET(CR2002,@MR608)'算出完了
LD @MR4906
AND @MR604               ; ﾄﾚｲ搬送ﾄﾚｲ2X方向ﾋﾟｯﾁ変更無し
ANB @MR608               ; ⑤SUB_算出完了
NCJ #1017
;DM20014.L=0
;
LD CR2002                ; 常時ON
MOV.L +0 DM20014         ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2X方向ﾋﾟｯﾁ
;SET(CR2002,@MR608)'算出完了
LD CR2002                ; 常時ON
SET @MR608               ; ⑤SUB_算出完了
LABEL #1017
;
;DM20014.L=(EM16384.L-EM16378.L)/(DM7040.L-1)
;SET(CR2002,@MR608)'算出完了
LD @MR4906
AND @MR605               ; ﾄﾚｲ搬送ﾄﾚｲ2X方向ﾋﾟｯﾁ増加
ANB @MR608               ; ⑤SUB_算出完了
NCJ #1018
;DM20014.L=(EM16384.L-EM16378.L)/(DM7040.L-1)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
SUB.L +1
CON
STA.L @VM17
CON
LDA.L EM16384            ; RB4 P15 POS(LO)
CON
SUB.L EM16378            ; RB4 P14 POS(LO)
CON
EXT.L
CON
DIV.L @VM17
CON
STA.L DM20014            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2X方向ﾋﾟｯﾁ
;SET(CR2002,@MR608)'算出完了
LD CR2002                ; 常時ON
SET @MR608               ; ⑤SUB_算出完了
LABEL #1018
;
;DM20014.L=(EM16378.L-EM16384.L)/(DM7040.L-1)
;SET(CR2002,@MR608)'算出完了
LD @MR4906
AND @MR606               ; ﾄﾚｲ搬送ﾄﾚｲ2X方向ﾋﾟｯﾁ減少
ANB @MR608               ; ⑤SUB_算出完了
NCJ #1019
;DM20014.L=(EM16378.L-EM16384.L)/(DM7040.L-1)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
SUB.L +1
CON
STA.L @VM19
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L EM16384            ; RB4 P15 POS(LO)
CON
EXT.L
CON
DIV.L @VM19
CON
STA.L DM20014            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2X方向ﾋﾟｯﾁ
;SET(CR2002,@MR608)'算出完了
LD CR2002                ; 常時ON
SET @MR608               ; ⑤SUB_算出完了
LABEL #1019
;
STG @MR4906
AND @MR608               ; ⑤SUB_算出完了
RES @MR608               ; ⑤SUB_算出完了
CON
JMP @MR4907
;ばね取出し番号確認
LD CR2002                ; 常時ON
MPS
LDA.L DM7038             ; 装置基礎ﾃﾞｰﾀ20
CON
MUL.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
STA.L DM20046            ; ばねトレイ全数
MPP
LDA.L DM7038             ; 装置基礎ﾃﾞｰﾀ20
CON
MUL.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +2
CON
STA.L DM20048            ; ばねトレイ2枚合計全数
STG @MR4907
MPS
AND<=.L DM20026 DM20048  ; ばね取出し番号  ばねトレイ2枚合計全数
MPS
AND<=.L DM20026 DM20046  ; ばね取出し番号  ばねトレイ全数
JMP @MR4908
MPP
AND>.L DM20026 DM20046   ; ばね取出し番号  ばねトレイ全数
JMP @MR4909
MPP
AND>.L DM20026 DM20048   ; ばね取出し番号  ばねトレイ2枚合計全数
SET @MR607               ; ⑤SUB_ﾊﾟﾚﾀｲｽﾞ異常
CON
JMP @MR4913
;POS10_取出し位置算出
;1枚目ﾄﾚｲ
;'取出し位置の算出
;'ﾊﾟﾚﾀｲｽﾞ基準1(P0_POS11)-Y方向ﾋﾟｯﾁ
;
;IF DM20026.L<=DM7040.L THEN
;EM16354.L=EM16360.L
;END IF
;
;IF DM20026.L>DM7040.L AND DM20026.L<=(DM7040.L*2) THEN
;EM16354.L=EM16360.L-DM20012.L
;END IF
;
;IF DM20026.L>(DM7040.L*2) AND DM20026.L<=(DM7040.L*3) THEN
;EM16354.L=EM16360.L-(DM20012.L*2)
;END IF
;
;IF DM20026.L>(DM7040.L*3) AND DM20026.L<=(DM7040.L*4) THEN
;EM16354.L=EM16360.L-(DM20012.L*3)
;END IF
;
;IF DM20026.L>(DM7040.L*4) AND DM20026.L<=(DM7040.L*5) THEN
;EM16354.L=EM16360.L-(DM20012.L*4)
;END IF
;
;IF DM20026.L>(DM7040.L*5) AND DM20026.L<=(DM7040.L*6) THEN
;EM16354.L=EM16360.L-(DM20012.L*5)
;END IF
;
;IF DM20026.L>(DM7040.L*6) AND DM20026.L<=(DM7040.L*7) THEN
;EM16354.L=EM16360.L-(DM20012.L*6)
;END IF
;
;IF DM20026.L>(DM7040.L*7) AND DM20026.L<=(DM7040.L*8) THEN
;EM16354.L=EM16360.L-(DM20012.L*7)
;END IF
;
;IF DM20026.L>(DM7040.L*8) AND DM20026.L<=(DM7040.L*9) THEN
;EM16354.L=EM16360.L-(DM20012.L*8)
;END IF
;
;IF DM20026.L>(DM7040.L*9) AND DM20026.L<=(DM7040.L*10) THEN
;EM16354.L=EM16360.L-(DM20012.L*9)
;END IF
;
;IF DM20026.L>(DM7040.L*10) AND DM20026.L<=(DM7040.L*11) THEN
;EM16354.L=EM16360.L-(DM20012.L*10)
;END IF
;
;IF DM20026.L>(DM7040.L*11) AND DM20026.L<=(DM7040.L*12) THEN
;EM16354.L=EM16360.L-(DM20012.L*11)
;END IF
;
;SET(CR2002,@MR608)
;
LD @MR4908
AND @MR601               ; ﾄﾚｲ搬送ﾄﾚｲ1X方向ﾋﾟｯﾁ変更無し
ANB @MR608               ; ⑤SUB_算出完了
NCJ #1007
;'取出し位置の算出
;
;'ﾊﾟﾚﾀｲｽﾞ基準1(P0_POS11)-Y方向ﾋﾟｯﾁ
;
;IF DM20026.L<=DM7040.L THEN
;
LD<=.L DM20026 DM7040    ; ばね取出し番号  装置基礎ﾃﾞｰﾀ21
NCJ #2018
;EM16354.L=EM16360.L
;
LD CR2002                ; 常時ON
MOV.L EM16360 EM16354    ; RB4 P11 POS(LO)  RB4 P10 POS(LO)
;END IF
;
LABEL #2018
;IF DM20026.L>DM7040.L AND DM20026.L<=(DM7040.L*2) THEN
;
LD>.L DM20026 DM7040     ; ばね取出し番号  装置基礎ﾃﾞｰﾀ21
OUT @VB00
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +2
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB00
NCJ #2019
;EM16354.L=EM16360.L-DM20012.L
;
LD CR2002                ; 常時ON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2019
;IF DM20026.L>(DM7040.L*2) AND DM20026.L<=(DM7040.L*3) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +2
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB01
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +3
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB01
NCJ #2020
;EM16354.L=EM16360.L-(DM20012.L*2)
;
LD CR2002                ; 常時ON
LDA.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +2
CON
STA.L @VM21
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L @VM21
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2020
;IF DM20026.L>(DM7040.L*3) AND DM20026.L<=(DM7040.L*4) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +3
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB02
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +4
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB02
NCJ #2021
;EM16354.L=EM16360.L-(DM20012.L*3)
;
LD CR2002                ; 常時ON
LDA.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +3
CON
STA.L @VM23
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L @VM23
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2021
;IF DM20026.L>(DM7040.L*4) AND DM20026.L<=(DM7040.L*5) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +4
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB03
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +5
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB03
NCJ #2022
;EM16354.L=EM16360.L-(DM20012.L*4)
;
LD CR2002                ; 常時ON
LDA.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +4
CON
STA.L @VM25
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L @VM25
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2022
;IF DM20026.L>(DM7040.L*5) AND DM20026.L<=(DM7040.L*6) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +5
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB04
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +6
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB04
NCJ #2023
;EM16354.L=EM16360.L-(DM20012.L*5)
;
LD CR2002                ; 常時ON
LDA.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +5
CON
STA.L @VM27
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L @VM27
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2023
;IF DM20026.L>(DM7040.L*6) AND DM20026.L<=(DM7040.L*7) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +6
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB05
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +7
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB05
NCJ #2024
;EM16354.L=EM16360.L-(DM20012.L*6)
;
LD CR2002                ; 常時ON
LDA.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +6
CON
STA.L @VM29
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L @VM29
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2024
;IF DM20026.L>(DM7040.L*7) AND DM20026.L<=(DM7040.L*8) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +7
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB06
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +8
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB06
NCJ #2025
;EM16354.L=EM16360.L-(DM20012.L*7)
;
LD CR2002                ; 常時ON
LDA.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +7
CON
STA.L @VM31
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L @VM31
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2025
;IF DM20026.L>(DM7040.L*8) AND DM20026.L<=(DM7040.L*9) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +8
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB07
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +9
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB07
NCJ #2026
;EM16354.L=EM16360.L-(DM20012.L*8)
;
LD CR2002                ; 常時ON
LDA.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +8
CON
STA.L @VM33
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L @VM33
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2026
;IF DM20026.L>(DM7040.L*9) AND DM20026.L<=(DM7040.L*10) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +9
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB08
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +10
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB08
NCJ #2027
;EM16354.L=EM16360.L-(DM20012.L*9)
;
LD CR2002                ; 常時ON
LDA.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +9
CON
STA.L @VM35
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L @VM35
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2027
;IF DM20026.L>(DM7040.L*10) AND DM20026.L<=(DM7040.L*11) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +10
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB09
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +11
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB09
NCJ #2028
;EM16354.L=EM16360.L-(DM20012.L*10)
;
LD CR2002                ; 常時ON
LDA.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +10
CON
STA.L @VM37
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L @VM37
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2028
;IF DM20026.L>(DM7040.L*11) AND DM20026.L<=(DM7040.L*12) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +11
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB0A
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +12
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB0A
NCJ #2029
;EM16354.L=EM16360.L-(DM20012.L*11)
;
LD CR2002                ; 常時ON
LDA.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +11
CON
STA.L @VM39
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L @VM39
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2029
;SET(CR2002,@MR608)
;
LD CR2002                ; 常時ON
SET @MR608               ; ⑤SUB_算出完了
LABEL #1007
;
;'取出し位置の算出
;'ﾊﾟﾚﾀｲｽﾞ基準1(P0_POS11)-Y方向ﾋﾟｯﾁ＋X方向ﾋﾟｯﾁ
;
;IF DM20026.L<=DM7040.L THEN
;EM16354.L=EM16360.L+((DM20026.L-1)*DM20010.L)
;END IF
;
;IF DM20026.L>DM7040.L AND DM20026.L<=(DM7040.L*2) THEN
;EM16354.L=EM16360.L-DM20012.L+((DM20026.L-(DM7040.L+1))*DM20010.L)
;END IF
;
;IF DM20026.L>(DM7040.L*2) AND DM20026.L<=(DM7040.L*3) THEN
;EM16354.L=EM16360.L-(DM20012.L*2)+((DM20026.L-((DM7040.L*2)+1))*DM20010.L)
;END IF
;
;IF DM20026.L>(DM7040.L*3) AND DM20026.L<=(DM7040.L*4) THEN
;EM16354.L=EM16360.L-(DM20012.L*3)+((DM20026.L-((DM7040.L*3)+1))*DM20010.L)
;END IF
;
;IF DM20026.L>(DM7040.L*4) AND DM20026.L<=(DM7040.L*5) THEN
;EM16354.L=EM16360.L-(DM20012.L*4)+((DM20026.L-((DM7040.L*4)+1))*DM20010.L)
;END IF
;
;IF DM20026.L>(DM7040.L*5) AND DM20026.L<=(DM7040.L*6) THEN
;EM16354.L=EM16360.L-(DM20012.L*5)+((DM20026.L-((DM7040.L*5)+1))*DM20010.L)
;END IF
;
;IF DM20026.L>(DM7040.L*6) AND DM20026.L<=(DM7040.L*7) THEN
;EM16354.L=EM16360.L-(DM20012.L*6)+((DM20026.L-((DM7040.L*6)+1))*DM20010.L)
;END IF
;
;IF DM20026.L>(DM7040.L*7) AND DM20026.L<=(DM7040.L*8) THEN
;EM16354.L=EM16360.L-(DM20012.L*7)+((DM20026.L-((DM7040.L*7)+1))*DM20010.L)
;END IF
;
;IF DM20026.L>(DM7040.L*8) AND DM20026.L<=(DM7040.L*9) THEN
;EM16354.L=EM16360.L-(DM20012.L*8)+((DM20026.L-((DM7040.L*8)+1))*DM20010.L)
;END IF
;
;IF DM20026.L>(DM7040.L*9) AND DM20026.L<=(DM7040.L*10) THEN
;EM16354.L=EM16360.L-(DM20012.L*9)+((DM20026.L-((DM7040.L*9)+1))*DM20010.L)
;END IF
;
;IF DM20026.L>(DM7040.L*10) AND DM20026.L<=(DM7040.L*11) THEN
;EM16354.L=EM16360.L-(DM20012.L*10)+((DM20026.L-((DM7040.L*10)+1))*DM20010.L)
;END IF
;
;IF DM20026.L>(DM7040.L*11) AND DM20026.L<=(DM7040.L*12) THEN
;EM16354.L=EM16360.L-(DM20012.L*11)+((DM20026.L-((DM7040.L*11)+1))*DM20010.L)
;END IF
;
;SET(CR2002,@MR608)
;
LD @MR4908
AND @MR602               ; ﾄﾚｲ搬送ﾄﾚｲ1X方向ﾋﾟｯﾁ増加
ANB @MR608               ; ⑤SUB_算出完了
NCJ #1029
;'取出し位置の算出
;
;'ﾊﾟﾚﾀｲｽﾞ基準1(P0_POS11)-Y方向ﾋﾟｯﾁ＋X方向ﾋﾟｯﾁ
;
;IF DM20026.L<=DM7040.L THEN
;
LD<=.L DM20026 DM7040    ; ばね取出し番号  装置基礎ﾃﾞｰﾀ21
NCJ #2030
;EM16354.L=EM16360.L+((DM20026.L-1)*DM20010.L)
;
LD CR2002                ; 常時ON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L +1
CON
MUL.L DM20010            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM16360            ; RB4 P11 POS(LO)
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2030
;IF DM20026.L>DM7040.L AND DM20026.L<=(DM7040.L*2) THEN
;
LD>.L DM20026 DM7040     ; ばね取出し番号  装置基礎ﾃﾞｰﾀ21
OUT @VB0B
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +2
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB0B
NCJ #2031
;EM16354.L=EM16360.L-DM20012.L+((DM20026.L-(DM7040.L+1))*DM20010.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
ADD.L +1
CON
STA.L @VM41
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM41
CON
MUL.L DM20010            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
STA.L @VM43
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
ADD.L @VM43
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2031
;IF DM20026.L>(DM7040.L*2) AND DM20026.L<=(DM7040.L*3) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +2
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB0C
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +3
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB0C
NCJ #2032
;EM16354.L=EM16360.L-(DM20012.L*2)+((DM20026.L-((DM7040.L*2)+1))*DM20010.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +2
CON
ADD.L +1
CON
STA.L @VM45
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM45
CON
MUL.L DM20010            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
STA.L @VM47
CON
LDA.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +2
CON
STA.L @VM49
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L @VM49
CON
ADD.L @VM47
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2032
;IF DM20026.L>(DM7040.L*3) AND DM20026.L<=(DM7040.L*4) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +3
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB0D
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +4
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB0D
NCJ #2033
;EM16354.L=EM16360.L-(DM20012.L*3)+((DM20026.L-((DM7040.L*3)+1))*DM20010.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +3
CON
ADD.L +1
CON
STA.L @VM51
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM51
CON
MUL.L DM20010            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
STA.L @VM53
CON
LDA.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +3
CON
STA.L @VM55
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L @VM55
CON
ADD.L @VM53
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2033
;IF DM20026.L>(DM7040.L*4) AND DM20026.L<=(DM7040.L*5) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +4
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB0E
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +5
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB0E
NCJ #2034
;EM16354.L=EM16360.L-(DM20012.L*4)+((DM20026.L-((DM7040.L*4)+1))*DM20010.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +4
CON
ADD.L +1
CON
STA.L @VM57
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM57
CON
MUL.L DM20010            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
STA.L @VM59
CON
LDA.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +4
CON
STA.L @VM61
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L @VM61
CON
ADD.L @VM59
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2034
;IF DM20026.L>(DM7040.L*5) AND DM20026.L<=(DM7040.L*6) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +5
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB0F
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +6
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB0F
NCJ #2035
;EM16354.L=EM16360.L-(DM20012.L*5)+((DM20026.L-((DM7040.L*5)+1))*DM20010.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +5
CON
ADD.L +1
CON
STA.L @VM63
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM63
CON
MUL.L DM20010            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
STA.L @VM65
CON
LDA.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +5
CON
STA.L @VM67
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L @VM67
CON
ADD.L @VM65
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2035
;IF DM20026.L>(DM7040.L*6) AND DM20026.L<=(DM7040.L*7) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +6
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB010
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +7
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB010
NCJ #2036
;EM16354.L=EM16360.L-(DM20012.L*6)+((DM20026.L-((DM7040.L*6)+1))*DM20010.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +6
CON
ADD.L +1
CON
STA.L @VM69
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM69
CON
MUL.L DM20010            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
STA.L @VM71
CON
LDA.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +6
CON
STA.L @VM73
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L @VM73
CON
ADD.L @VM71
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2036
;IF DM20026.L>(DM7040.L*7) AND DM20026.L<=(DM7040.L*8) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +7
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB011
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +8
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB011
NCJ #2037
;EM16354.L=EM16360.L-(DM20012.L*7)+((DM20026.L-((DM7040.L*7)+1))*DM20010.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +7
CON
ADD.L +1
CON
STA.L @VM75
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM75
CON
MUL.L DM20010            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
STA.L @VM77
CON
LDA.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +7
CON
STA.L @VM79
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L @VM79
CON
ADD.L @VM77
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2037
;IF DM20026.L>(DM7040.L*8) AND DM20026.L<=(DM7040.L*9) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +8
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB012
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +9
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB012
NCJ #2038
;EM16354.L=EM16360.L-(DM20012.L*8)+((DM20026.L-((DM7040.L*8)+1))*DM20010.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +8
CON
ADD.L +1
CON
STA.L @VM81
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM81
CON
MUL.L DM20010            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
STA.L @VM83
CON
LDA.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +8
CON
STA.L @VM85
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L @VM85
CON
ADD.L @VM83
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2038
;IF DM20026.L>(DM7040.L*9) AND DM20026.L<=(DM7040.L*10) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +9
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB013
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +10
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB013
NCJ #2039
;EM16354.L=EM16360.L-(DM20012.L*9)+((DM20026.L-((DM7040.L*9)+1))*DM20010.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +9
CON
ADD.L +1
CON
STA.L @VM87
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM87
CON
MUL.L DM20010            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
STA.L @VM89
CON
LDA.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +9
CON
STA.L @VM91
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L @VM91
CON
ADD.L @VM89
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2039
;IF DM20026.L>(DM7040.L*10) AND DM20026.L<=(DM7040.L*11) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +10
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB014
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +11
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB014
NCJ #2040
;EM16354.L=EM16360.L-(DM20012.L*10)+((DM20026.L-((DM7040.L*10)+1))*DM20010.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +10
CON
ADD.L +1
CON
STA.L @VM93
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM93
CON
MUL.L DM20010            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
STA.L @VM95
CON
LDA.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +10
CON
STA.L @VM97
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L @VM97
CON
ADD.L @VM95
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2040
;IF DM20026.L>(DM7040.L*11) AND DM20026.L<=(DM7040.L*12) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +11
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB015
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +12
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB015
NCJ #2041
;EM16354.L=EM16360.L-(DM20012.L*11)+((DM20026.L-((DM7040.L*11)+1))*DM20010.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +11
CON
ADD.L +1
CON
STA.L @VM99
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM99
CON
MUL.L DM20010            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
STA.L @VM101
CON
LDA.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +11
CON
STA.L @VM103
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L @VM103
CON
ADD.L @VM101
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2041
;SET(CR2002,@MR608)
;
LD CR2002                ; 常時ON
SET @MR608               ; ⑤SUB_算出完了
LABEL #1029
;
;'取出し位置の算出
;'ﾊﾟﾚﾀｲｽﾞ基準1(P0_POS11)-Y方向ﾋﾟｯﾁ-X方向ﾋﾟｯﾁ
;
;IF DM20026.L<=DM7040.L THEN
;EM16354.L=EM16360.L-((DM20026.L-1)*DM20010.L)
;END IF
;
;IF DM20026.L>DM7040.L AND DM20026.L<=(DM7040.L*2) THEN
;EM16354.L=EM16360.L-DM20012.L-((DM20026.L-(DM7040.L+1))*DM20010.L)
;END IF
;
;IF DM20026.L>(DM7040.L*2) AND DM20026.L<=(DM7040.L*3) THEN
;EM16354.L=EM16360.L-(DM20012.L*2)-((DM20026.L-((DM7040.L*2)+1))*DM20010.L)
;END IF
;
;IF DM20026.L>(DM7040.L*3) AND DM20026.L<=(DM7040.L*4) THEN
;EM16354.L=EM16360.L-(DM20012.L*3)-((DM20026.L-((DM7040.L*3)+1))*DM20010.L)
;END IF
;
;IF DM20026.L>(DM7040.L*4) AND DM20026.L<=(DM7040.L*5) THEN
;EM16354.L=EM16360.L-(DM20012.L*4)-((DM20026.L-((DM7040.L*4)+1))*DM20010.L)
;END IF
;
;IF DM20026.L>(DM7040.L*5) AND DM20026.L<=(DM7040.L*6) THEN
;EM16354.L=EM16360.L-(DM20012.L*5)-((DM20026.L-((DM7040.L*5)+1))*DM20010.L)
;END IF
;
;IF DM20026.L>(DM7040.L*6) AND DM20026.L<=(DM7040.L*7) THEN
;EM16354.L=EM16360.L-(DM20012.L*6)-((DM20026.L-((DM7040.L*6)+1))*DM20010.L)
;END IF
;
;IF DM20026.L>(DM7040.L*7) AND DM20026.L<=(DM7040.L*8) THEN
;EM16354.L=EM16360.L-(DM20012.L*7)-((DM20026.L-((DM7040.L*7)+1))*DM20010.L)
;END IF
;
;IF DM20026.L>(DM7040.L*8) AND DM20026.L<=(DM7040.L*9) THEN
;EM16354.L=EM16360.L-(DM20012.L*8)-((DM20026.L-((DM7040.L*8)+1))*DM20010.L)
;END IF
;
;IF DM20026.L>(DM7040.L*9) AND DM20026.L<=(DM7040.L*10) THEN
;EM16354.L=EM16360.L-(DM20012.L*9)-((DM20026.L-((DM7040.L*9)+1))*DM20010.L)
;END IF
;
;IF DM20026.L>(DM7040.L*10) AND DM20026.L<=(DM7040.L*11) THEN
;EM16354.L=EM16360.L-(DM20012.L*10)-((DM20026.L-((DM7040.L*10)+1))*DM20010.L)
;END IF
;
;IF DM20026.L>(DM7040.L*11) AND DM20026.L<=(DM7040.L*12) THEN
;EM16354.L=EM16360.L-(DM20012.L*11)-((DM20026.L-((DM7040.L*11)+1))*DM20010.L)
;END IF
;
;SET(CR2002,@MR608)
;
LD @MR4908
AND @MR603               ; ﾄﾚｲ搬送ﾄﾚｲ1X方向ﾋﾟｯﾁ減少
ANB @MR608               ; ⑤SUB_算出完了
NCJ #1008
;'取出し位置の算出
;
;'ﾊﾟﾚﾀｲｽﾞ基準1(P0_POS11)-Y方向ﾋﾟｯﾁ-X方向ﾋﾟｯﾁ
;
;IF DM20026.L<=DM7040.L THEN
;
LD<=.L DM20026 DM7040    ; ばね取出し番号  装置基礎ﾃﾞｰﾀ21
NCJ #2042
;EM16354.L=EM16360.L-((DM20026.L-1)*DM20010.L)
;
LD CR2002                ; 常時ON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L +1
CON
MUL.L DM20010            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
STA.L @VM105
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L @VM105
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2042
;IF DM20026.L>DM7040.L AND DM20026.L<=(DM7040.L*2) THEN
;
LD>.L DM20026 DM7040     ; ばね取出し番号  装置基礎ﾃﾞｰﾀ21
OUT @VB016
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +2
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB016
NCJ #2043
;EM16354.L=EM16360.L-DM20012.L-((DM20026.L-(DM7040.L+1))*DM20010.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
ADD.L +1
CON
STA.L @VM107
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM107
CON
MUL.L DM20010            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
STA.L @VM109
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
SUB.L @VM109
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2043
;IF DM20026.L>(DM7040.L*2) AND DM20026.L<=(DM7040.L*3) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +2
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB017
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +3
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB017
NCJ #2044
;EM16354.L=EM16360.L-(DM20012.L*2)-((DM20026.L-((DM7040.L*2)+1))*DM20010.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +2
CON
ADD.L +1
CON
STA.L @VM111
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM111
CON
MUL.L DM20010            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
STA.L @VM113
CON
LDA.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +2
CON
STA.L @VM115
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L @VM115
CON
SUB.L @VM113
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2044
;IF DM20026.L>(DM7040.L*3) AND DM20026.L<=(DM7040.L*4) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +3
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB018
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +4
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB018
NCJ #2045
;EM16354.L=EM16360.L-(DM20012.L*3)-((DM20026.L-((DM7040.L*3)+1))*DM20010.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +3
CON
ADD.L +1
CON
STA.L @VM117
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM117
CON
MUL.L DM20010            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
STA.L @VM119
CON
LDA.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +3
CON
STA.L @VM121
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L @VM121
CON
SUB.L @VM119
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2045
;IF DM20026.L>(DM7040.L*4) AND DM20026.L<=(DM7040.L*5) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +4
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB019
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +5
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB019
NCJ #2046
;EM16354.L=EM16360.L-(DM20012.L*4)-((DM20026.L-((DM7040.L*4)+1))*DM20010.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +4
CON
ADD.L +1
CON
STA.L @VM123
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM123
CON
MUL.L DM20010            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
STA.L @VM125
CON
LDA.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +4
CON
STA.L @VM127
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L @VM127
CON
SUB.L @VM125
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2046
;IF DM20026.L>(DM7040.L*5) AND DM20026.L<=(DM7040.L*6) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +5
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB01A
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +6
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB01A
NCJ #2047
;EM16354.L=EM16360.L-(DM20012.L*5)-((DM20026.L-((DM7040.L*5)+1))*DM20010.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +5
CON
ADD.L +1
CON
STA.L @VM129
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM129
CON
MUL.L DM20010            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
STA.L @VM131
CON
LDA.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +5
CON
STA.L @VM133
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L @VM133
CON
SUB.L @VM131
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2047
;IF DM20026.L>(DM7040.L*6) AND DM20026.L<=(DM7040.L*7) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +6
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB01B
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +7
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB01B
NCJ #2048
;EM16354.L=EM16360.L-(DM20012.L*6)-((DM20026.L-((DM7040.L*6)+1))*DM20010.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +6
CON
ADD.L +1
CON
STA.L @VM135
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM135
CON
MUL.L DM20010            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
STA.L @VM137
CON
LDA.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +6
CON
STA.L @VM139
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L @VM139
CON
SUB.L @VM137
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2048
;IF DM20026.L>(DM7040.L*7) AND DM20026.L<=(DM7040.L*8) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +7
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB01C
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +8
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB01C
NCJ #2049
;EM16354.L=EM16360.L-(DM20012.L*7)-((DM20026.L-((DM7040.L*7)+1))*DM20010.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +7
CON
ADD.L +1
CON
STA.L @VM141
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM141
CON
MUL.L DM20010            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
STA.L @VM143
CON
LDA.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +7
CON
STA.L @VM145
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L @VM145
CON
SUB.L @VM143
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2049
;IF DM20026.L>(DM7040.L*8) AND DM20026.L<=(DM7040.L*9) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +8
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB01D
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +9
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB01D
NCJ #2050
;EM16354.L=EM16360.L-(DM20012.L*8)-((DM20026.L-((DM7040.L*8)+1))*DM20010.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +8
CON
ADD.L +1
CON
STA.L @VM147
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM147
CON
MUL.L DM20010            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
STA.L @VM149
CON
LDA.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +8
CON
STA.L @VM151
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L @VM151
CON
SUB.L @VM149
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2050
;IF DM20026.L>(DM7040.L*9) AND DM20026.L<=(DM7040.L*10) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +9
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB01E
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +10
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB01E
NCJ #2051
;EM16354.L=EM16360.L-(DM20012.L*9)-((DM20026.L-((DM7040.L*9)+1))*DM20010.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +9
CON
ADD.L +1
CON
STA.L @VM153
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM153
CON
MUL.L DM20010            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
STA.L @VM155
CON
LDA.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +9
CON
STA.L @VM157
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L @VM157
CON
SUB.L @VM155
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2051
;IF DM20026.L>(DM7040.L*10) AND DM20026.L<=(DM7040.L*11) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +10
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB01F
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +11
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB01F
NCJ #2052
;EM16354.L=EM16360.L-(DM20012.L*10)-((DM20026.L-((DM7040.L*10)+1))*DM20010.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +10
CON
ADD.L +1
CON
STA.L @VM159
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM159
CON
MUL.L DM20010            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
STA.L @VM161
CON
LDA.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +10
CON
STA.L @VM163
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L @VM163
CON
SUB.L @VM161
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2052
;IF DM20026.L>(DM7040.L*11) AND DM20026.L<=(DM7040.L*12) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +11
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB020
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +12
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB020
NCJ #2053
;EM16354.L=EM16360.L-(DM20012.L*11)-((DM20026.L-((DM7040.L*11)+1))*DM20010.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +11
CON
ADD.L +1
CON
STA.L @VM165
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM165
CON
MUL.L DM20010            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
STA.L @VM167
CON
LDA.L DM20012            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +11
CON
STA.L @VM169
CON
LDA.L EM16360            ; RB4 P11 POS(LO)
CON
SUB.L @VM169
CON
SUB.L @VM167
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2053
;SET(CR2002,@MR608)
;
LD CR2002                ; 常時ON
SET @MR608               ; ⑤SUB_算出完了
LABEL #1008
;
STG @MR4908
AND @MR608               ; ⑤SUB_算出完了
RES @MR608               ; ⑤SUB_算出完了
CON
JMP @MR4915
;2枚目ﾄﾚｲ
;'取出し位置の算出
;'ﾊﾟﾚﾀｲｽﾞ基準1(P0_POS14)-Y方向ﾋﾟｯﾁ
;
;IF DM20026.L<=(DM7040.L*13) THEN
;EM16354.L=EM16378.L
;END IF
;
;IF DM20026.L>(DM7040.L*13) AND DM20026.L<=(DM7040.L*14) THEN
;EM16354.L=EM16378.L-DM20016.L
;END IF
;
;IF DM20026.L>(DM7040.L*14) AND DM20026.L<=(DM7040.L*15) THEN
;EM16354.L=EM16378.L-(DM20016.L*2)
;END IF
;
;IF DM20026.L>(DM7040.L*15) AND DM20026.L<=(DM7040.L*16) THEN
;EM16354.L=EM16378.L-(DM20016.L*3)
;END IF
;
;IF DM20026.L>(DM7040.L*16) AND DM20026.L<=(DM7040.L*17) THEN
;EM16354.L=EM16378.L-(DM20016.L*4)
;END IF
;
;IF DM20026.L>(DM7040.L*17) AND DM20026.L<=(DM7040.L*18) THEN
;EM16354.L=EM16378.L-(DM20016.L*5)
;END IF
;
;IF DM20026.L>(DM7040.L*18) AND DM20026.L<=(DM7040.L*19) THEN
;EM16354.L=EM16378.L-(DM20016.L*6)
;END IF
;
;IF DM20026.L>(DM7040.L*19) AND DM20026.L<=(DM7040.L*20) THEN
;EM16354.L=EM16378.L-(DM20016.L*7)
;END IF
;
;IF DM20026.L>(DM7040.L*20) AND DM20026.L<=(DM7040.L*21) THEN
;EM16354.L=EM16378.L-(DM20016.L*8)
;END IF
;
;IF DM20026.L>(DM7040.L*21) AND DM20026.L<=(DM7040.L*22) THEN
;EM16354.L=EM16378.L-(DM20016.L*9)
;END IF
;
;IF DM20026.L>(DM7040.L*22) AND DM20026.L<=(DM7040.L*23) THEN
;EM16354.L=EM16378.L-(DM20016.L*10)
;END IF
;
;IF DM20026.L>(DM7040.L*23) AND DM20026.L<=(DM7040.L*24) THEN
;EM16354.L=EM16378.L-(DM20016.L*11)
;END IF
;
;SET(CR2002,@MR608)
;
LD @MR4909
AND @MR604               ; ﾄﾚｲ搬送ﾄﾚｲ2X方向ﾋﾟｯﾁ変更無し
ANB @MR608               ; ⑤SUB_算出完了
NCJ #1020
;'取出し位置の算出
;
;'ﾊﾟﾚﾀｲｽﾞ基準1(P0_POS14)-Y方向ﾋﾟｯﾁ
;
;IF DM20026.L<=(DM7040.L*13) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +13
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
NCJ #2054
;EM16354.L=EM16378.L
;
LD CR2002                ; 常時ON
MOV.L EM16378 EM16354    ; RB4 P14 POS(LO)  RB4 P10 POS(LO)
;END IF
;
LABEL #2054
;IF DM20026.L>(DM7040.L*13) AND DM20026.L<=(DM7040.L*14) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +13
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB021
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +14
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB021
NCJ #2055
;EM16354.L=EM16378.L-DM20016.L
;
LD CR2002                ; 常時ON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2055
;IF DM20026.L>(DM7040.L*14) AND DM20026.L<=(DM7040.L*15) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +14
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB022
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +15
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB022
NCJ #2056
;EM16354.L=EM16378.L-(DM20016.L*2)
;
LD CR2002                ; 常時ON
LDA.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +2
CON
STA.L @VM171
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L @VM171
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2056
;IF DM20026.L>(DM7040.L*15) AND DM20026.L<=(DM7040.L*16) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +15
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB023
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +16
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB023
NCJ #2057
;EM16354.L=EM16378.L-(DM20016.L*3)
;
LD CR2002                ; 常時ON
LDA.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +3
CON
STA.L @VM173
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L @VM173
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2057
;IF DM20026.L>(DM7040.L*16) AND DM20026.L<=(DM7040.L*17) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +16
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB024
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +17
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB024
NCJ #2058
;EM16354.L=EM16378.L-(DM20016.L*4)
;
LD CR2002                ; 常時ON
LDA.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +4
CON
STA.L @VM175
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L @VM175
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2058
;IF DM20026.L>(DM7040.L*17) AND DM20026.L<=(DM7040.L*18) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +17
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB025
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +18
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB025
NCJ #2059
;EM16354.L=EM16378.L-(DM20016.L*5)
;
LD CR2002                ; 常時ON
LDA.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +5
CON
STA.L @VM177
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L @VM177
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2059
;IF DM20026.L>(DM7040.L*18) AND DM20026.L<=(DM7040.L*19) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +18
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB026
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +19
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB026
NCJ #2060
;EM16354.L=EM16378.L-(DM20016.L*6)
;
LD CR2002                ; 常時ON
LDA.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +6
CON
STA.L @VM179
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L @VM179
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2060
;IF DM20026.L>(DM7040.L*19) AND DM20026.L<=(DM7040.L*20) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +19
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB027
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +20
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB027
NCJ #2061
;EM16354.L=EM16378.L-(DM20016.L*7)
;
LD CR2002                ; 常時ON
LDA.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +7
CON
STA.L @VM181
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L @VM181
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2061
;IF DM20026.L>(DM7040.L*20) AND DM20026.L<=(DM7040.L*21) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +20
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB028
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +21
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB028
NCJ #2062
;EM16354.L=EM16378.L-(DM20016.L*8)
;
LD CR2002                ; 常時ON
LDA.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +8
CON
STA.L @VM183
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L @VM183
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2062
;IF DM20026.L>(DM7040.L*21) AND DM20026.L<=(DM7040.L*22) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +21
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB029
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +22
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB029
NCJ #2063
;EM16354.L=EM16378.L-(DM20016.L*9)
;
LD CR2002                ; 常時ON
LDA.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +9
CON
STA.L @VM185
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L @VM185
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2063
;IF DM20026.L>(DM7040.L*22) AND DM20026.L<=(DM7040.L*23) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +22
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB02A
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +23
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB02A
NCJ #2064
;EM16354.L=EM16378.L-(DM20016.L*10)
;
LD CR2002                ; 常時ON
LDA.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +10
CON
STA.L @VM187
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L @VM187
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2064
;IF DM20026.L>(DM7040.L*23) AND DM20026.L<=(DM7040.L*24) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +23
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB02B
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +24
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB02B
NCJ #2065
;EM16354.L=EM16378.L-(DM20016.L*11)
;
LD CR2002                ; 常時ON
LDA.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +11
CON
STA.L @VM189
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L @VM189
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2065
;SET(CR2002,@MR608)
;
LD CR2002                ; 常時ON
SET @MR608               ; ⑤SUB_算出完了
LABEL #1020
;
;'取出し位置の算出
;'ﾊﾟﾚﾀｲｽﾞ基準1(P0_POS14)-Y方向ﾋﾟｯﾁ＋X方向ﾋﾟｯﾁ
;
;IF DM20026.L<=(DM7040.L*13) THEN
;EM16354.L=EM16378.L+((DM20026.L-(DM7040.L*12)+1)*DM20014.L)
;END IF
;
;IF DM20026.L>(DM7040.L*13) AND DM20026.L<=(DM7040.L*14) THEN
;EM16354.L=EM16378.L-DM20016.L+((DM20026.L-(DM7040.L*13)+1)*DM20014.L)
;END IF
;
;IF DM20026.L>(DM7040.L*14) AND DM20026.L<=(DM7040.L*15) THEN
;EM16354.L=EM16378.L-(DM20016.L*2)+((DM20026.L-(DM7040.L*14)+1)*DM20014.L)
;END IF
;
;IF DM20026.L>(DM7040.L*15) AND DM20026.L<=(DM7040.L*16) THEN
;EM16354.L=EM16378.L-(DM20016.L*3)+((DM20026.L-(DM7040.L*15)+1)*DM20014.L)
;END IF
;
;IF DM20026.L>(DM7040.L*16) AND DM20026.L<=(DM7040.L*17) THEN
;EM16354.L=EM16378.L-(DM20016.L*4)+((DM20026.L-(DM7040.L*16)+1)*DM20014.L)
;END IF
;
;IF DM20026.L>(DM7040.L*17) AND DM20026.L<=(DM7040.L*18) THEN
;EM16354.L=EM16378.L-(DM20016.L*5)+((DM20026.L-(DM7040.L*17)+1)*DM20014.L)
;END IF
;
;IF DM20026.L>(DM7040.L*18) AND DM20026.L<=(DM7040.L*19) THEN
;EM16354.L=EM16378.L-(DM20016.L*6)+((DM20026.L-(DM7040.L*18)+1)*DM20014.L)
;END IF
;
;IF DM20026.L>(DM7040.L*19) AND DM20026.L<=(DM7040.L*20) THEN
;EM16354.L=EM16378.L-(DM20016.L*7)+((DM20026.L-(DM7040.L*19)+1)*DM20014.L)
;END IF
;
;IF DM20026.L>(DM7040.L*20) AND DM20026.L<=(DM7040.L*21) THEN
;EM16354.L=EM16378.L-(DM20016.L*8)+((DM20026.L-(DM7040.L*20)+1)*DM20014.L)
;END IF
;
;IF DM20026.L>(DM7040.L*21) AND DM20026.L<=(DM7040.L*22) THEN
;EM16354.L=EM16378.L-(DM20016.L*9)+((DM20026.L-(DM7040.L*21)+1)*DM20014.L)
;END IF
;
;IF DM20026.L>(DM7040.L*22) AND DM20026.L<=(DM7040.L*23) THEN
;EM16354.L=EM16378.L-(DM20016.L*10)+((DM20026.L-(DM7040.L*22)+1)*DM20014.L)
;END IF
;
;IF DM20026.L>(DM7040.L*23) AND DM20026.L<=(DM7040.L*24) THEN
;EM16354.L=EM16378.L-(DM20016.L*11)+((DM20026.L-(DM7040.L*23)+1)*DM20014.L)
;END IF
;
;SET(CR2002,@MR608)
;
LD @MR4909
AND @MR605               ; ﾄﾚｲ搬送ﾄﾚｲ2X方向ﾋﾟｯﾁ増加
ANB @MR608               ; ⑤SUB_算出完了
NCJ #1009
;'取出し位置の算出
;
;'ﾊﾟﾚﾀｲｽﾞ基準1(P0_POS14)-Y方向ﾋﾟｯﾁ＋X方向ﾋﾟｯﾁ
;
;IF DM20026.L<=(DM7040.L*13) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +13
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
NCJ #2066
;EM16354.L=EM16378.L+((DM20026.L-(DM7040.L*12)+1)*DM20014.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +12
CON
STA.L @VM191
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM191
CON
ADD.L +1
CON
MUL.L DM20014            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM16378            ; RB4 P14 POS(LO)
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2066
;IF DM20026.L>(DM7040.L*13) AND DM20026.L<=(DM7040.L*14) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +13
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB02C
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +14
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB02C
NCJ #2067
;EM16354.L=EM16378.L-DM20016.L+((DM20026.L-(DM7040.L*13)+1)*DM20014.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +13
CON
STA.L @VM193
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM193
CON
ADD.L +1
CON
MUL.L DM20014            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
STA.L @VM195
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
ADD.L @VM195
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2067
;IF DM20026.L>(DM7040.L*14) AND DM20026.L<=(DM7040.L*15) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +14
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB02D
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +15
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB02D
NCJ #2068
;EM16354.L=EM16378.L-(DM20016.L*2)+((DM20026.L-(DM7040.L*14)+1)*DM20014.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +14
CON
STA.L @VM197
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM197
CON
ADD.L +1
CON
MUL.L DM20014            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
STA.L @VM199
CON
LDA.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +2
CON
STA.L @VM201
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L @VM201
CON
ADD.L @VM199
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2068
;IF DM20026.L>(DM7040.L*15) AND DM20026.L<=(DM7040.L*16) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +15
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB02E
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +16
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB02E
NCJ #2069
;EM16354.L=EM16378.L-(DM20016.L*3)+((DM20026.L-(DM7040.L*15)+1)*DM20014.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +15
CON
STA.L @VM203
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM203
CON
ADD.L +1
CON
MUL.L DM20014            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
STA.L @VM205
CON
LDA.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +3
CON
STA.L @VM207
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L @VM207
CON
ADD.L @VM205
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2069
;IF DM20026.L>(DM7040.L*16) AND DM20026.L<=(DM7040.L*17) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +16
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB02F
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +17
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB02F
NCJ #2070
;EM16354.L=EM16378.L-(DM20016.L*4)+((DM20026.L-(DM7040.L*16)+1)*DM20014.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +16
CON
STA.L @VM209
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM209
CON
ADD.L +1
CON
MUL.L DM20014            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
STA.L @VM211
CON
LDA.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +4
CON
STA.L @VM213
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L @VM213
CON
ADD.L @VM211
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2070
;IF DM20026.L>(DM7040.L*17) AND DM20026.L<=(DM7040.L*18) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +17
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB030
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +18
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB030
NCJ #2071
;EM16354.L=EM16378.L-(DM20016.L*5)+((DM20026.L-(DM7040.L*17)+1)*DM20014.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +17
CON
STA.L @VM215
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM215
CON
ADD.L +1
CON
MUL.L DM20014            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
STA.L @VM217
CON
LDA.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +5
CON
STA.L @VM219
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L @VM219
CON
ADD.L @VM217
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2071
;IF DM20026.L>(DM7040.L*18) AND DM20026.L<=(DM7040.L*19) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +18
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB031
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +19
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB031
NCJ #2072
;EM16354.L=EM16378.L-(DM20016.L*6)+((DM20026.L-(DM7040.L*18)+1)*DM20014.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +18
CON
STA.L @VM221
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM221
CON
ADD.L +1
CON
MUL.L DM20014            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
STA.L @VM223
CON
LDA.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +6
CON
STA.L @VM225
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L @VM225
CON
ADD.L @VM223
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2072
;IF DM20026.L>(DM7040.L*19) AND DM20026.L<=(DM7040.L*20) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +19
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB032
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +20
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB032
NCJ #2073
;EM16354.L=EM16378.L-(DM20016.L*7)+((DM20026.L-(DM7040.L*19)+1)*DM20014.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +19
CON
STA.L @VM227
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM227
CON
ADD.L +1
CON
MUL.L DM20014            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
STA.L @VM229
CON
LDA.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +7
CON
STA.L @VM231
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L @VM231
CON
ADD.L @VM229
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2073
;IF DM20026.L>(DM7040.L*20) AND DM20026.L<=(DM7040.L*21) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +20
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB033
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +21
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB033
NCJ #2074
;EM16354.L=EM16378.L-(DM20016.L*8)+((DM20026.L-(DM7040.L*20)+1)*DM20014.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +20
CON
STA.L @VM233
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM233
CON
ADD.L +1
CON
MUL.L DM20014            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
STA.L @VM235
CON
LDA.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +8
CON
STA.L @VM237
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L @VM237
CON
ADD.L @VM235
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2074
;IF DM20026.L>(DM7040.L*21) AND DM20026.L<=(DM7040.L*22) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +21
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB034
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +22
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB034
NCJ #2075
;EM16354.L=EM16378.L-(DM20016.L*9)+((DM20026.L-(DM7040.L*21)+1)*DM20014.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +21
CON
STA.L @VM239
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM239
CON
ADD.L +1
CON
MUL.L DM20014            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
STA.L @VM241
CON
LDA.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +9
CON
STA.L @VM243
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L @VM243
CON
ADD.L @VM241
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2075
;IF DM20026.L>(DM7040.L*22) AND DM20026.L<=(DM7040.L*23) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +22
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB035
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +23
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB035
NCJ #2076
;EM16354.L=EM16378.L-(DM20016.L*10)+((DM20026.L-(DM7040.L*22)+1)*DM20014.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +22
CON
STA.L @VM245
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM245
CON
ADD.L +1
CON
MUL.L DM20014            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
STA.L @VM247
CON
LDA.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +10
CON
STA.L @VM249
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L @VM249
CON
ADD.L @VM247
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2076
;IF DM20026.L>(DM7040.L*23) AND DM20026.L<=(DM7040.L*24) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +23
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB036
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +24
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB036
NCJ #2077
;EM16354.L=EM16378.L-(DM20016.L*11)+((DM20026.L-(DM7040.L*23)+1)*DM20014.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +23
CON
STA.L @VM251
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM251
CON
ADD.L +1
CON
MUL.L DM20014            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
STA.L @VM253
CON
LDA.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +11
CON
STA.L @VM255
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L @VM255
CON
ADD.L @VM253
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2077
;SET(CR2002,@MR608)
;
LD CR2002                ; 常時ON
SET @MR608               ; ⑤SUB_算出完了
LABEL #1009
;
;'取出し位置の算出
;'ﾊﾟﾚﾀｲｽﾞ基準1(P0_POS14)-Y方向ﾋﾟｯﾁ-X方向ﾋﾟｯﾁ
;
;IF DM20026.L<=(DM7040.L*13) THEN
;EM16354.L=EM16378.L-((DM20026.L-(DM7040.L*12)+1)*DM20014.L)
;END IF
;
;IF DM20026.L>(DM7040.L*13) AND DM20026.L<=(DM7040.L*14) THEN
;EM16354.L=EM16378.L-DM20016.L-((DM20026.L-(DM7040.L*13)+1)*DM20014.L)
;END IF
;
;IF DM20026.L>(DM7040.L*14) AND DM20026.L<=(DM7040.L*15) THEN
;EM16354.L=EM16378.L-(DM20016.L*2)-((DM20026.L-(DM7040.L*14)+1)*DM20014.L)
;END IF
;
;IF DM20026.L>(DM7040.L*15) AND DM20026.L<=(DM7040.L*16) THEN
;EM16354.L=EM16378.L-(DM20016.L*3)-((DM20026.L-(DM7040.L*15)+1)*DM20014.L)
;END IF
;
;IF DM20026.L>(DM7040.L*16) AND DM20026.L<=(DM7040.L*17) THEN
;EM16354.L=EM16378.L-(DM20016.L*4)-((DM20026.L-(DM7040.L*16)+1)*DM20014.L)
;END IF
;
;IF DM20026.L>(DM7040.L*17) AND DM20026.L<=(DM7040.L*18) THEN
;EM16354.L=EM16378.L-(DM20016.L*5)-((DM20026.L-(DM7040.L*17)+1)*DM20014.L)
;END IF
;
;IF DM20026.L>(DM7040.L*18) AND DM20026.L<=(DM7040.L*19) THEN
;EM16354.L=EM16378.L-(DM20016.L*6)-((DM20026.L-(DM7040.L*18)+1)*DM20014.L)
;END IF
;
;IF DM20026.L>(DM7040.L*19) AND DM20026.L<=(DM7040.L*20) THEN
;EM16354.L=EM16378.L-(DM20016.L*7)-((DM20026.L-(DM7040.L*19)+1)*DM20014.L)
;END IF
;
;IF DM20026.L>(DM7040.L*20) AND DM20026.L<=(DM7040.L*21) THEN
;EM16354.L=EM16378.L-(DM20016.L*8)-((DM20026.L-(DM7040.L*20)+1)*DM20014.L)
;END IF
;
;IF DM20026.L>(DM7040.L*21) AND DM20026.L<=(DM7040.L*22) THEN
;EM16354.L=EM16378.L-(DM20016.L*9)-((DM20026.L-(DM7040.L*21)+1)*DM20014.L)
;END IF
;
;IF DM20026.L>(DM7040.L*22) AND DM20026.L<=(DM7040.L*23) THEN
;EM16354.L=EM16378.L-(DM20016.L*10)-((DM20026.L-(DM7040.L*22)+1)*DM20014.L)
;END IF
;
;IF DM20026.L>(DM7040.L*23) AND DM20026.L<=(DM7040.L*24) THEN
;EM16354.L=EM16378.L-(DM20016.L*11)-((DM20026.L-(DM7040.L*23)+1)*DM20014.L)
;END IF
;
;SET(CR2002,@MR608)
;
LD @MR4909
AND @MR606               ; ﾄﾚｲ搬送ﾄﾚｲ2X方向ﾋﾟｯﾁ減少
ANB @MR608               ; ⑤SUB_算出完了
NCJ #1021
;'取出し位置の算出
;
;'ﾊﾟﾚﾀｲｽﾞ基準1(P0_POS14)-Y方向ﾋﾟｯﾁ-X方向ﾋﾟｯﾁ
;
;IF DM20026.L<=(DM7040.L*13) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +13
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
NCJ #2078
;EM16354.L=EM16378.L-((DM20026.L-(DM7040.L*12)+1)*DM20014.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +12
CON
STA.L @VM257
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM257
CON
ADD.L +1
CON
MUL.L DM20014            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
STA.L @VM259
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L @VM259
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2078
;IF DM20026.L>(DM7040.L*13) AND DM20026.L<=(DM7040.L*14) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +13
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB037
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +14
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB037
NCJ #2079
;EM16354.L=EM16378.L-DM20016.L-((DM20026.L-(DM7040.L*13)+1)*DM20014.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +13
CON
STA.L @VM261
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM261
CON
ADD.L +1
CON
MUL.L DM20014            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
STA.L @VM263
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
SUB.L @VM263
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2079
;IF DM20026.L>(DM7040.L*14) AND DM20026.L<=(DM7040.L*15) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +14
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB038
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +15
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB038
NCJ #2080
;EM16354.L=EM16378.L-(DM20016.L*2)-((DM20026.L-(DM7040.L*14)+1)*DM20014.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +14
CON
STA.L @VM265
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM265
CON
ADD.L +1
CON
MUL.L DM20014            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
STA.L @VM267
CON
LDA.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +2
CON
STA.L @VM269
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L @VM269
CON
SUB.L @VM267
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2080
;IF DM20026.L>(DM7040.L*15) AND DM20026.L<=(DM7040.L*16) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +15
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB039
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +16
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB039
NCJ #2081
;EM16354.L=EM16378.L-(DM20016.L*3)-((DM20026.L-(DM7040.L*15)+1)*DM20014.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +15
CON
STA.L @VM271
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM271
CON
ADD.L +1
CON
MUL.L DM20014            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
STA.L @VM273
CON
LDA.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +3
CON
STA.L @VM275
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L @VM275
CON
SUB.L @VM273
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2081
;IF DM20026.L>(DM7040.L*16) AND DM20026.L<=(DM7040.L*17) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +16
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB03A
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +17
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB03A
NCJ #2082
;EM16354.L=EM16378.L-(DM20016.L*4)-((DM20026.L-(DM7040.L*16)+1)*DM20014.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +16
CON
STA.L @VM277
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM277
CON
ADD.L +1
CON
MUL.L DM20014            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
STA.L @VM279
CON
LDA.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +4
CON
STA.L @VM281
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L @VM281
CON
SUB.L @VM279
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2082
;IF DM20026.L>(DM7040.L*17) AND DM20026.L<=(DM7040.L*18) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +17
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB03B
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +18
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB03B
NCJ #2083
;EM16354.L=EM16378.L-(DM20016.L*5)-((DM20026.L-(DM7040.L*17)+1)*DM20014.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +17
CON
STA.L @VM283
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM283
CON
ADD.L +1
CON
MUL.L DM20014            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
STA.L @VM285
CON
LDA.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +5
CON
STA.L @VM287
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L @VM287
CON
SUB.L @VM285
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2083
;IF DM20026.L>(DM7040.L*18) AND DM20026.L<=(DM7040.L*19) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +18
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB03C
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +19
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB03C
NCJ #2084
;EM16354.L=EM16378.L-(DM20016.L*6)-((DM20026.L-(DM7040.L*18)+1)*DM20014.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +18
CON
STA.L @VM289
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM289
CON
ADD.L +1
CON
MUL.L DM20014            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
STA.L @VM291
CON
LDA.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +6
CON
STA.L @VM293
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L @VM293
CON
SUB.L @VM291
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2084
;IF DM20026.L>(DM7040.L*19) AND DM20026.L<=(DM7040.L*20) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +19
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB03D
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +20
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB03D
NCJ #2085
;EM16354.L=EM16378.L-(DM20016.L*7)-((DM20026.L-(DM7040.L*19)+1)*DM20014.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +19
CON
STA.L @VM295
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM295
CON
ADD.L +1
CON
MUL.L DM20014            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
STA.L @VM297
CON
LDA.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +7
CON
STA.L @VM299
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L @VM299
CON
SUB.L @VM297
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2085
;IF DM20026.L>(DM7040.L*20) AND DM20026.L<=(DM7040.L*21) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +20
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB03E
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +21
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB03E
NCJ #2086
;EM16354.L=EM16378.L-(DM20016.L*8)-((DM20026.L-(DM7040.L*20)+1)*DM20014.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +20
CON
STA.L @VM301
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM301
CON
ADD.L +1
CON
MUL.L DM20014            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
STA.L @VM303
CON
LDA.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +8
CON
STA.L @VM305
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L @VM305
CON
SUB.L @VM303
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2086
;IF DM20026.L>(DM7040.L*21) AND DM20026.L<=(DM7040.L*22) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +21
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB03F
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +22
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB03F
NCJ #2087
;EM16354.L=EM16378.L-(DM20016.L*9)-((DM20026.L-(DM7040.L*21)+1)*DM20014.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +21
CON
STA.L @VM307
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM307
CON
ADD.L +1
CON
MUL.L DM20014            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
STA.L @VM309
CON
LDA.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +9
CON
STA.L @VM311
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L @VM311
CON
SUB.L @VM309
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2087
;IF DM20026.L>(DM7040.L*22) AND DM20026.L<=(DM7040.L*23) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +22
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB040
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +23
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB040
NCJ #2088
;EM16354.L=EM16378.L-(DM20016.L*10)-((DM20026.L-(DM7040.L*22)+1)*DM20014.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +22
CON
STA.L @VM313
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM313
CON
ADD.L +1
CON
MUL.L DM20014            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
STA.L @VM315
CON
LDA.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +10
CON
STA.L @VM317
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L @VM317
CON
SUB.L @VM315
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2088
;IF DM20026.L>(DM7040.L*23) AND DM20026.L<=(DM7040.L*24) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +23
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB041
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +24
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB041
NCJ #2089
;EM16354.L=EM16378.L-(DM20016.L*11)-((DM20026.L-(DM7040.L*23)+1)*DM20014.L)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +23
CON
STA.L @VM319
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM319
CON
ADD.L +1
CON
MUL.L DM20014            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
STA.L @VM321
CON
LDA.L DM20016            ; RB4板押圧ﾄﾚｲ_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +11
CON
STA.L @VM323
CON
LDA.L EM16378            ; RB4 P14 POS(LO)
CON
SUB.L @VM323
CON
SUB.L @VM321
CON
STA.L EM16354            ; RB4 P10 POS(LO)
;END IF
;
LABEL #2089
;SET(CR2002,@MR608)
;
LD CR2002                ; 常時ON
SET @MR608               ; ⑤SUB_算出完了
LABEL #1021
;
STG @MR4909
AND @MR608               ; ⑤SUB_算出完了
RES @MR608               ; ⑤SUB_算出完了
CON
JMP @MR4915
;Error<140>ﾊﾟﾚﾀｲｽﾞ異常(RB4ばねﾄﾚｲ搬送)
STG @MR4913
ANB R39900               ; RB動作中
MPS
LDB R41204               ; TASK4 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
DW $3000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #140 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task4 ERROR
CON
JMP @MR4914
MPP
AND R41204               ; TASK4 PAUSE 要求
SET @MR1908
STG @MR4914
SET @MR1908
CON
AND @MR101               ; Task4 ERROR_End
RES @MR101               ; Task4 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR4915
;END
STG @MR4915
SET @MR4901              ; ⑤SUB_板押圧ﾊﾟﾚﾀｲｽﾞ(ﾄﾚｲ側)完了
CON
RES @MR4902              ; ⑤SUB_ばねﾊﾟﾚﾀｲｽﾞ(ﾄﾚｲ側)中
CON
ENDS
;<h1/>未使用 ⑥SUB_ばねﾊﾟﾚﾀｲｽﾞ(PP側)
STG @MR5100              ; ⑥SUB_ばねﾊﾟﾚﾀｲｽﾞ(PP側)
SET @MR5102              ; ⑥SUB_ばねﾊﾟﾚﾀｲｽﾞ(PP側)中
CON
JMP @MR5103
;ﾊﾟﾚﾀｲｼﾞﾝｸﾞﾊﾟﾗﾒｰﾀｰ/Palletizing parameters
;P11<P12 & P14<15：ﾊﾟﾚﾀｲｽﾞ値正常
LD<.L EM24760 EM24766    ; RB8 P11 POS(LO)  RB8 P12 POS(LO)
AND<.L EM24778 EM24784   ; RB8 P14 POS(LO)  RB8 P15 POS(LO)
OUT @MR609               ; 搬送PPﾊﾟﾚﾀｲｽﾞ値正常
;ﾄﾚｲ1
;P11=P13：Y方向ﾋﾟｯﾁ変更無し
LD=.L EM24760 EM24772    ; RB8 P11 POS(LO)  RB8 P13 POS(LO)
OUT @MR610               ; 搬送PPﾄﾚｲ1Y方向ﾋﾟｯﾁ変更無し
;P11<P13：Y方向ﾋﾟｯﾁ増加
LD<.L EM24760 EM24772    ; RB8 P11 POS(LO)  RB8 P13 POS(LO)
OUT @MR611               ; 搬送PPﾄﾚｲ1Y方向ﾋﾟｯﾁ増加
;P11>P13：Y方向ﾋﾟｯﾁ減少
LD>.L EM24760 EM24772    ; RB8 P11 POS(LO)  RB8 P13 POS(LO)
OUT @MR612               ; 搬送PPﾄﾚｲ1Y方向ﾋﾟｯﾁ減少
;ﾄﾚｲ2
;P14=P15：X方向ﾋﾟｯﾁ変更無し
LD=.L EM24778 EM24784    ; RB8 P14 POS(LO)  RB8 P15 POS(LO)
OUT @MR613               ; 搬送PPﾄﾚｲ2Y方向ﾋﾟｯﾁ変更無し
;P14<P15：X方向ﾋﾟｯﾁ増加
LD<.L EM24778 EM24784    ; RB8 P14 POS(LO)  RB8 P15 POS(LO)
OUT @MR614               ; 搬送PPﾄﾚｲ2Y方向ﾋﾟｯﾁ増加
;P14>P15：X方向ﾋﾟｯﾁ減少
LD>.L EM24778 EM24784    ; RB8 P14 POS(LO)  RB8 P15 POS(LO)
OUT @MR615               ; 搬送PPﾄﾚｲ2Y方向ﾋﾟｯﾁ減少
;ﾊﾟﾚﾀｲｽﾞ座標ﾁｪｯｸ/palletizing coordinate check
STG @MR5103
MPS
ANB @MR609               ; 搬送PPﾊﾟﾚﾀｲｽﾞ値正常
SET @MR700               ; ⑥SUB_ﾊﾟﾚﾀｲｽﾞ異常
CON
JMP @MR5113
MPP
AND @MR609               ; 搬送PPﾊﾟﾚﾀｲｽﾞ値正常
JMP @MR5104
;X方向ﾋﾟｯﾁ計算：
;ﾄﾚｲ1X方向ﾋﾟｯﾁ＝(P12-P11)/(ﾄﾚｲ列数-1)
;ﾄﾚｲ2X方向ﾋﾟｯﾁ＝(P15-P14)/(ﾄﾚｲ列数-1)
;DM20018.L=(EM24766.L-EM24760.L)/(DM7040.L-1)
;DM20022.L=(EM24784.L-EM24778.L)/(DM7040.L-1)
;SET(CR2002,@MR701)'算出完了
LD @MR5104
ANB @MR701               ; ⑥SUB_算出完了
NCJ #1010
;DM20018.L=(EM24766.L-EM24760.L)/(DM7040.L-1)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
SUB.L +1
CON
STA.L @VM325
CON
LDA.L EM24766            ; RB8 P12 POS(LO)
CON
SUB.L EM24760            ; RB8 P11 POS(LO)
CON
EXT.L
CON
DIV.L @VM325
CON
STA.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
;DM20022.L=(EM24784.L-EM24778.L)/(DM7040.L-1)
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
SUB.L +1
CON
STA.L @VM327
CON
LDA.L EM24784            ; RB8 P15 POS(LO)
CON
SUB.L EM24778            ; RB8 P14 POS(LO)
CON
EXT.L
CON
DIV.L @VM327
CON
STA.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
;SET(CR2002,@MR701)'算出完了
LD CR2002                ; 常時ON
SET @MR701               ; ⑥SUB_算出完了
LABEL #1010
;
STG @MR5104
AND @MR701               ; ⑥SUB_算出完了
RES @MR701               ; ⑥SUB_算出完了
CON
JMP @MR5105
;搬送PP_Y方向ﾋﾟｯﾁ計算
;ﾄﾚｲ1枚目
;ﾋﾟｯﾁ変更無し：Y方向ﾋﾟｯﾁ＝0
;ﾋﾟｯﾁ増加：Y方向ﾋﾟｯﾁ＝(P13-P11)/(ﾄﾚｲ行数-1)
;ﾋﾟｯﾁ減少：Y方向ﾋﾟｯﾁ＝(P11-P13)/(ﾄﾚｲ行数-1)
;DM20020.L=0
;SET(CR2002,@MR701)'算出完了
LD @MR5105
AND @MR610               ; 搬送PPﾄﾚｲ1Y方向ﾋﾟｯﾁ変更無し
ANB @MR701               ; ⑥SUB_算出完了
NCJ #1011
;DM20020.L=0
;
LD CR2002                ; 常時ON
MOV.L +0 DM20020         ; RB8板押圧PP_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
;SET(CR2002,@MR701)'算出完了
LD CR2002                ; 常時ON
SET @MR701               ; ⑥SUB_算出完了
LABEL #1011
;
;DM20020.L=(EM24772.L-EM24760)/(DM7038.L-1)
;SET(CR2002,@MR701)'算出完了
LD @MR5105
AND @MR611               ; 搬送PPﾄﾚｲ1Y方向ﾋﾟｯﾁ増加
ANB @MR701               ; ⑥SUB_算出完了
NCJ #1012
;DM20020.L=(EM24772.L-EM24760)/(DM7038.L-1)
;
LD CR2002                ; 常時ON
LDA.L DM7038             ; 装置基礎ﾃﾞｰﾀ20
CON
SUB.L +1
CON
STA.L @VM329
CON
LDA EM24760              ; RB8 P11 POS(LO)
CON
EXT
CON
STA.L @VM331
CON
LDA.L EM24772            ; RB8 P13 POS(LO)
CON
SUB.L @VM331
CON
EXT.L
CON
DIV.L @VM329
CON
STA.L DM20020            ; RB8板押圧PP_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
;SET(CR2002,@MR701)'算出完了
LD CR2002                ; 常時ON
SET @MR701               ; ⑥SUB_算出完了
LABEL #1012
;
;DM20020.L=(EM24760.L-EM24772)/(DM7038.L-1)
;SET(CR2002,@MR701)'算出完了
LD @MR5105
AND @MR612               ; 搬送PPﾄﾚｲ1Y方向ﾋﾟｯﾁ減少
ANB @MR701               ; ⑥SUB_算出完了
NCJ #1013
;DM20020.L=(EM24760.L-EM24772)/(DM7038.L-1)
;
LD CR2002                ; 常時ON
LDA.L DM7038             ; 装置基礎ﾃﾞｰﾀ20
CON
SUB.L +1
CON
STA.L @VM333
CON
LDA EM24772              ; RB8 P13 POS(LO)
CON
EXT
CON
STA.L @VM335
CON
LDA.L EM24760            ; RB8 P11 POS(LO)
CON
SUB.L @VM335
CON
EXT.L
CON
DIV.L @VM333
CON
STA.L DM20020            ; RB8板押圧PP_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
;SET(CR2002,@MR701)'算出完了
LD CR2002                ; 常時ON
SET @MR701               ; ⑥SUB_算出完了
LABEL #1013
;
STG @MR5105
AND @MR701               ; ⑥SUB_算出完了
RES @MR701               ; ⑥SUB_算出完了
CON
JMP @MR5106
;搬送PP_Y方向ﾋﾟｯﾁ計算
;ﾄﾚｲ2枚目
;ﾋﾟｯﾁ変更無し：Y方向ﾋﾟｯﾁ＝0
;ﾋﾟｯﾁ増加：Y方向ﾋﾟｯﾁ＝(P16-P14)/(ﾄﾚｲ行数-1)
;ﾋﾟｯﾁ減少：Y方向ﾋﾟｯﾁ＝(P14-P16)/(ﾄﾚｲ行数-1)
;DM20024.L=0
;SET(CR2002,@MR701)'算出完了
LD @MR5106
AND @MR610               ; 搬送PPﾄﾚｲ1Y方向ﾋﾟｯﾁ変更無し
ANB @MR701               ; ⑥SUB_算出完了
NCJ #1023
;DM20024.L=0
;
LD CR2002                ; 常時ON
MOV.L +0 DM20024         ; RB8板押圧PP_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
;SET(CR2002,@MR701)'算出完了
LD CR2002                ; 常時ON
SET @MR701               ; ⑥SUB_算出完了
LABEL #1023
;
;DM20024.L=(EM24790.L-EM24778)/(DM7038.L-1)
;SET(CR2002,@MR701)'算出完了
LD @MR5106
AND @MR611               ; 搬送PPﾄﾚｲ1Y方向ﾋﾟｯﾁ増加
ANB @MR701               ; ⑥SUB_算出完了
NCJ #1024
;DM20024.L=(EM24790.L-EM24778)/(DM7038.L-1)
;
LD CR2002                ; 常時ON
LDA.L DM7038             ; 装置基礎ﾃﾞｰﾀ20
CON
SUB.L +1
CON
STA.L @VM337
CON
LDA EM24778              ; RB8 P14 POS(LO)
CON
EXT
CON
STA.L @VM339
CON
LDA.L EM24790            ; RB8 P16 POS(LO)
CON
SUB.L @VM339
CON
EXT.L
CON
DIV.L @VM337
CON
STA.L DM20024            ; RB8板押圧PP_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
;SET(CR2002,@MR701)'算出完了
LD CR2002                ; 常時ON
SET @MR701               ; ⑥SUB_算出完了
LABEL #1024
;
;DM20024.L=(EM24778.L-EM24790)/(DM7038.L-1)
;SET(CR2002,@MR701)'算出完了
LD @MR5106
AND @MR612               ; 搬送PPﾄﾚｲ1Y方向ﾋﾟｯﾁ減少
ANB @MR701               ; ⑥SUB_算出完了
NCJ #1025
;DM20024.L=(EM24778.L-EM24790)/(DM7038.L-1)
;
LD CR2002                ; 常時ON
LDA.L DM7038             ; 装置基礎ﾃﾞｰﾀ20
CON
SUB.L +1
CON
STA.L @VM341
CON
LDA EM24790              ; RB8 P16 POS(LO)
CON
EXT
CON
STA.L @VM343
CON
LDA.L EM24778            ; RB8 P14 POS(LO)
CON
SUB.L @VM343
CON
EXT.L
CON
DIV.L @VM341
CON
STA.L DM20024            ; RB8板押圧PP_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
;SET(CR2002,@MR701)'算出完了
LD CR2002                ; 常時ON
SET @MR701               ; ⑥SUB_算出完了
LABEL #1025
;
STG @MR5106
AND @MR701               ; ⑥SUB_算出完了
RES @MR701               ; ⑥SUB_算出完了
CON
JMP @MR5107
;ばね取出し番号確認
STG @MR5107
MPS
AND<=.L DM20026 DM20048  ; ばね取出し番号  ばねトレイ2枚合計全数
MPS
AND<=.L DM20026 DM20046  ; ばね取出し番号  ばねトレイ全数
JMP @MR5108
MPP
AND>.L DM20026 DM20046   ; ばね取出し番号  ばねトレイ全数
JMP @MR5109
MPP
AND>.L DM20026 DM20048   ; ばね取出し番号  ばねトレイ2枚合計全数
SET @MR700               ; ⑥SUB_ﾊﾟﾚﾀｲｽﾞ異常
CON
JMP @MR5113
;POS10_取出し位置算出
;1枚目ﾄﾚｲ
;'取出し位置の算出
;'ﾊﾟﾚﾀｲｽﾞ基準1(P0_POS11)+X方向ﾋﾟｯﾁ
;
;IF DM20026.L<=DM7040.L THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-1))
;END IF
;
;IF DM20026.L>DM7040.L AND DM20026.L<=(DM7040.L*2) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-(DM7040.L+1)))
;END IF
;
;IF DM20026.L>(DM7040.L*2) AND DM20026.L<=(DM7040.L*3) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*2)+1)))
;END IF
;
;IF DM20026.L>(DM7040.L*3) AND DM20026.L<=(DM7040.L*4) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*3)+1)))
;END IF
;
;IF DM20026.L>(DM7040.L*4) AND DM20026.L<=(DM7040.L*5) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*4)+1)))
;END IF
;
;IF DM20026.L>(DM7040.L*5) AND DM20026.L<=(DM7040.L*6) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*5)+1)))
;END IF
;
;IF DM20026.L>(DM7040.L*6) AND DM20026.L<=(DM7040.L*7) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*6)+1)))
;END IF
;
;IF DM20026.L>(DM7040.L*7) AND DM20026.L<=(DM7040.L*8) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*7)+1)))
;END IF
;
;IF DM20026.L>(DM7040.L*8) AND DM20026.L<=(DM7040.L*9) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*8)+1)))
;END IF
;
;IF DM20026.L>(DM7040.L*9) AND DM20026.L<=(DM7040.L*10) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*9)+1)))
;END IF
;
;IF DM20026.L>(DM7040.L*10) AND DM20026.L<=(DM7040.L*11) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*10)+1)))
;END IF
;
;IF DM20026.L>(DM7040.L*11) AND DM20026.L<=(DM7040.L*12) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*11)+1)))
;END IF
;
;SET(CR2002,@MR701)
;
LD @MR5108
AND @MR610               ; 搬送PPﾄﾚｲ1Y方向ﾋﾟｯﾁ変更無し
ANB @MR701               ; ⑥SUB_算出完了
NCJ #1014
;'取出し位置の算出
;
;'ﾊﾟﾚﾀｲｽﾞ基準1(P0_POS11)+X方向ﾋﾟｯﾁ
;
;IF DM20026.L<=DM7040.L THEN
;
LD<=.L DM20026 DM7040    ; ばね取出し番号  装置基礎ﾃﾞｰﾀ21
NCJ #2090
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-1))
;
LD CR2002                ; 常時ON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L +1
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2090
;IF DM20026.L>DM7040.L AND DM20026.L<=(DM7040.L*2) THEN
;
LD>.L DM20026 DM7040     ; ばね取出し番号  装置基礎ﾃﾞｰﾀ21
OUT @VB042
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +2
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB042
NCJ #2091
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-(DM7040.L+1)))
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
ADD.L +1
CON
STA.L @VM345
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM345
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2091
;IF DM20026.L>(DM7040.L*2) AND DM20026.L<=(DM7040.L*3) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +2
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB043
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +3
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB043
NCJ #2092
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*2)+1)))
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +2
CON
ADD.L +1
CON
STA.L @VM347
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM347
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2092
;IF DM20026.L>(DM7040.L*3) AND DM20026.L<=(DM7040.L*4) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +3
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB044
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +4
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB044
NCJ #2093
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*3)+1)))
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +3
CON
ADD.L +1
CON
STA.L @VM349
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM349
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2093
;IF DM20026.L>(DM7040.L*4) AND DM20026.L<=(DM7040.L*5) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +4
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB045
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +5
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB045
NCJ #2094
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*4)+1)))
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +4
CON
ADD.L +1
CON
STA.L @VM351
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM351
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2094
;IF DM20026.L>(DM7040.L*5) AND DM20026.L<=(DM7040.L*6) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +5
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB046
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +6
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB046
NCJ #2095
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*5)+1)))
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +5
CON
ADD.L +1
CON
STA.L @VM353
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM353
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2095
;IF DM20026.L>(DM7040.L*6) AND DM20026.L<=(DM7040.L*7) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +6
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB047
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +7
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB047
NCJ #2096
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*6)+1)))
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +6
CON
ADD.L +1
CON
STA.L @VM355
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM355
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2096
;IF DM20026.L>(DM7040.L*7) AND DM20026.L<=(DM7040.L*8) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +7
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB048
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +8
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB048
NCJ #2097
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*7)+1)))
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +7
CON
ADD.L +1
CON
STA.L @VM357
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM357
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2097
;IF DM20026.L>(DM7040.L*8) AND DM20026.L<=(DM7040.L*9) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +8
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB049
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +9
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB049
NCJ #2098
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*8)+1)))
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +8
CON
ADD.L +1
CON
STA.L @VM359
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM359
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2098
;IF DM20026.L>(DM7040.L*9) AND DM20026.L<=(DM7040.L*10) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +9
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB04A
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +10
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB04A
NCJ #2099
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*9)+1)))
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +9
CON
ADD.L +1
CON
STA.L @VM361
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM361
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2099
;IF DM20026.L>(DM7040.L*10) AND DM20026.L<=(DM7040.L*11) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +10
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB04B
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +11
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB04B
NCJ #2100
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*10)+1)))
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +10
CON
ADD.L +1
CON
STA.L @VM363
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM363
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2100
;IF DM20026.L>(DM7040.L*11) AND DM20026.L<=(DM7040.L*12) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +11
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB04C
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +12
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB04C
NCJ #2101
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*11)+1)))
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +11
CON
ADD.L +1
CON
STA.L @VM365
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM365
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2101
;SET(CR2002,@MR701)
;
LD CR2002                ; 常時ON
SET @MR701               ; ⑥SUB_算出完了
LABEL #1014
;
;'取出し位置の算出
;'ﾊﾟﾚﾀｲｽﾞ基準1(P0_POS11)+X方向ﾋﾟｯﾁ＋Y方向ﾋﾟｯﾁ
;
;IF DM20026.L<=DM7040.L THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-1))
;END IF
;
;IF DM20026.L>DM7040.L AND DM20026.L<=(DM7040.L*2) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-(DM7040.L+1)))+DM20020.L
;END IF
;
;IF DM20026.L>(DM7040.L*2) AND DM20026.L<=(DM7040.L*3) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*2)+1)))+(DM20020.L*2)
;END IF
;
;IF DM20026.L>(DM7040.L*3) AND DM20026.L<=(DM7040.L*4) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*3)+1)))+(DM20020.L*3)
;END IF
;
;IF DM20026.L>(DM7040.L*4) AND DM20026.L<=(DM7040.L*5) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*4)+1)))+(DM20020.L*4)
;END IF
;
;IF DM20026.L>(DM7040.L*5) AND DM20026.L<=(DM7040.L*6) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*5)+1)))+(DM20020.L*5)
;END IF
;
;IF DM20026.L>(DM7040.L*6) AND DM20026.L<=(DM7040.L*7) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*6)+1)))+(DM20020.L*6)
;END IF
;
;IF DM20026.L>(DM7040.L*7) AND DM20026.L<=(DM7040.L*8) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*7)+1)))+(DM20020.L*7)
;END IF
;
;IF DM20026.L>(DM7040.L*8) AND DM20026.L<=(DM7040.L*9) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*8)+1)))+(DM20020.L*8)
;END IF
;
;IF DM20026.L>(DM7040.L*9) AND DM20026.L<=(DM7040.L*10) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*9)+1)))+(DM20020.L*9)
;END IF
;
;IF DM20026.L>(DM7040.L*10) AND DM20026.L<=(DM7040.L*11) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*10)+1)))+(DM20020.L*10)
;END IF
;
;IF DM20026.L>(DM7040.L*11) AND DM20026.L<=(DM7040.L*12) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*11)+1)))+(DM20020.L*11)
;END IF
;
;SET(CR2002,@MR701)
;
LD @MR5108
AND @MR611               ; 搬送PPﾄﾚｲ1Y方向ﾋﾟｯﾁ増加
ANB @MR701               ; ⑥SUB_算出完了
NCJ #1022
;'取出し位置の算出
;
;'ﾊﾟﾚﾀｲｽﾞ基準1(P0_POS11)+X方向ﾋﾟｯﾁ＋Y方向ﾋﾟｯﾁ
;
;IF DM20026.L<=DM7040.L THEN
;
LD<=.L DM20026 DM7040    ; ばね取出し番号  装置基礎ﾃﾞｰﾀ21
NCJ #2102
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-1))
;
LD CR2002                ; 常時ON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L +1
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2102
;IF DM20026.L>DM7040.L AND DM20026.L<=(DM7040.L*2) THEN
;
LD>.L DM20026 DM7040     ; ばね取出し番号  装置基礎ﾃﾞｰﾀ21
OUT @VB04D
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +2
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB04D
NCJ #2103
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-(DM7040.L+1)))+DM20020.L
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
ADD.L +1
CON
STA.L @VM367
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM367
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
ADD.L DM20020            ; RB8板押圧PP_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2103
;IF DM20026.L>(DM7040.L*2) AND DM20026.L<=(DM7040.L*3) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +2
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB04E
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +3
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB04E
NCJ #2104
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*2)+1)))+(DM20020.L*2)
;
LD CR2002                ; 常時ON
LDA.L DM20020            ; RB8板押圧PP_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +2
CON
STA.L @VM369
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +2
CON
ADD.L +1
CON
STA.L @VM371
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM371
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
ADD.L @VM369
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2104
;IF DM20026.L>(DM7040.L*3) AND DM20026.L<=(DM7040.L*4) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +3
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB04F
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +4
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB04F
NCJ #2105
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*3)+1)))+(DM20020.L*3)
;
LD CR2002                ; 常時ON
LDA.L DM20020            ; RB8板押圧PP_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +3
CON
STA.L @VM373
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +3
CON
ADD.L +1
CON
STA.L @VM375
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM375
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
ADD.L @VM373
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2105
;IF DM20026.L>(DM7040.L*4) AND DM20026.L<=(DM7040.L*5) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +4
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB050
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +5
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB050
NCJ #2106
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*4)+1)))+(DM20020.L*4)
;
LD CR2002                ; 常時ON
LDA.L DM20020            ; RB8板押圧PP_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +4
CON
STA.L @VM377
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +4
CON
ADD.L +1
CON
STA.L @VM379
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM379
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
ADD.L @VM377
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2106
;IF DM20026.L>(DM7040.L*5) AND DM20026.L<=(DM7040.L*6) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +5
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB051
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +6
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB051
NCJ #2107
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*5)+1)))+(DM20020.L*5)
;
LD CR2002                ; 常時ON
LDA.L DM20020            ; RB8板押圧PP_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +5
CON
STA.L @VM381
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +5
CON
ADD.L +1
CON
STA.L @VM383
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM383
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
ADD.L @VM381
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2107
;IF DM20026.L>(DM7040.L*6) AND DM20026.L<=(DM7040.L*7) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +6
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB052
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +7
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB052
NCJ #2108
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*6)+1)))+(DM20020.L*6)
;
LD CR2002                ; 常時ON
LDA.L DM20020            ; RB8板押圧PP_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +6
CON
STA.L @VM385
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +6
CON
ADD.L +1
CON
STA.L @VM387
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM387
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
ADD.L @VM385
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2108
;IF DM20026.L>(DM7040.L*7) AND DM20026.L<=(DM7040.L*8) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +7
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB053
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +8
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB053
NCJ #2109
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*7)+1)))+(DM20020.L*7)
;
LD CR2002                ; 常時ON
LDA.L DM20020            ; RB8板押圧PP_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +7
CON
STA.L @VM389
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +7
CON
ADD.L +1
CON
STA.L @VM391
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM391
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
ADD.L @VM389
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2109
;IF DM20026.L>(DM7040.L*8) AND DM20026.L<=(DM7040.L*9) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +8
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB054
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +9
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB054
NCJ #2110
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*8)+1)))+(DM20020.L*8)
;
LD CR2002                ; 常時ON
LDA.L DM20020            ; RB8板押圧PP_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +8
CON
STA.L @VM393
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +8
CON
ADD.L +1
CON
STA.L @VM395
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM395
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
ADD.L @VM393
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2110
;IF DM20026.L>(DM7040.L*9) AND DM20026.L<=(DM7040.L*10) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +9
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB055
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +10
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB055
NCJ #2111
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*9)+1)))+(DM20020.L*9)
;
LD CR2002                ; 常時ON
LDA.L DM20020            ; RB8板押圧PP_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +9
CON
STA.L @VM397
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +9
CON
ADD.L +1
CON
STA.L @VM399
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM399
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
ADD.L @VM397
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2111
;IF DM20026.L>(DM7040.L*10) AND DM20026.L<=(DM7040.L*11) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +10
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB056
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +11
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB056
NCJ #2112
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*10)+1)))+(DM20020.L*10)
;
LD CR2002                ; 常時ON
LDA.L DM20020            ; RB8板押圧PP_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +10
CON
STA.L @VM401
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +10
CON
ADD.L +1
CON
STA.L @VM403
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM403
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
ADD.L @VM401
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2112
;IF DM20026.L>(DM7040.L*11) AND DM20026.L<=(DM7040.L*12) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +11
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB057
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +12
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB057
NCJ #2113
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*11)+1)))+(DM20020.L*11)
;
LD CR2002                ; 常時ON
LDA.L DM20020            ; RB8板押圧PP_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +11
CON
STA.L @VM405
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +11
CON
ADD.L +1
CON
STA.L @VM407
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM407
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
ADD.L @VM405
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2113
;SET(CR2002,@MR701)
;
LD CR2002                ; 常時ON
SET @MR701               ; ⑥SUB_算出完了
LABEL #1022
;
;'取出し位置の算出
;'ﾊﾟﾚﾀｲｽﾞ基準1(P0_POS11)+X方向ﾋﾟｯﾁ-Y方向ﾋﾟｯﾁ
;
;IF DM20026.L<=DM7040.L THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-1))
;END IF
;
;IF DM20026.L>DM7040.L AND DM20026.L<=(DM7040.L*2) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-(DM7040.L+1)))-DM20020.L
;END IF
;
;IF DM20026.L>(DM7040.L*2) AND DM20026.L<=(DM7040.L*3) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*2)+1)))-(DM20020.L*2)
;END IF
;
;IF DM20026.L>(DM7040.L*3) AND DM20026.L<=(DM7040.L*4) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*3)+1)))-(DM20020.L*3)
;END IF
;
;IF DM20026.L>(DM7040.L*4) AND DM20026.L<=(DM7040.L*5) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*4)+1)))-(DM20020.L*4)
;END IF
;
;IF DM20026.L>(DM7040.L*5) AND DM20026.L<=(DM7040.L*6) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*5)+1)))-(DM20020.L*5)
;END IF
;
;IF DM20026.L>(DM7040.L*6) AND DM20026.L<=(DM7040.L*7) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*6)+1)))-(DM20020.L*6)
;END IF
;
;IF DM20026.L>(DM7040.L*7) AND DM20026.L<=(DM7040.L*8) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*7)+1)))-(DM20020.L*7)
;END IF
;
;IF DM20026.L>(DM7040.L*8) AND DM20026.L<=(DM7040.L*9) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*8)+1)))-(DM20020.L*8)
;END IF
;
;IF DM20026.L>(DM7040.L*9) AND DM20026.L<=(DM7040.L*10) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*9)+1)))-(DM20020.L*9)
;END IF
;
;IF DM20026.L>(DM7040.L*10) AND DM20026.L<=(DM7040.L*11) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*10)+1)))-(DM20020.L*10)
;END IF
;
;IF DM20026.L>(DM7040.L*11) AND DM20026.L<=(DM7040.L*12) THEN
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*11)+1)))-(DM20020.L*11)
;END IF
;
;SET(CR2002,@MR701)
;
LD @MR5108
AND @MR612               ; 搬送PPﾄﾚｲ1Y方向ﾋﾟｯﾁ減少
ANB @MR701               ; ⑥SUB_算出完了
NCJ #1015
;'取出し位置の算出
;
;'ﾊﾟﾚﾀｲｽﾞ基準1(P0_POS11)+X方向ﾋﾟｯﾁ-Y方向ﾋﾟｯﾁ
;
;IF DM20026.L<=DM7040.L THEN
;
LD<=.L DM20026 DM7040    ; ばね取出し番号  装置基礎ﾃﾞｰﾀ21
NCJ #2114
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-1))
;
LD CR2002                ; 常時ON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L +1
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2114
;IF DM20026.L>DM7040.L AND DM20026.L<=(DM7040.L*2) THEN
;
LD>.L DM20026 DM7040     ; ばね取出し番号  装置基礎ﾃﾞｰﾀ21
OUT @VB058
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +2
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB058
NCJ #2115
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-(DM7040.L+1)))-DM20020.L
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
ADD.L +1
CON
STA.L @VM409
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM409
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
SUB.L DM20020            ; RB8板押圧PP_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2115
;IF DM20026.L>(DM7040.L*2) AND DM20026.L<=(DM7040.L*3) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +2
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB059
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +3
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB059
NCJ #2116
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*2)+1)))-(DM20020.L*2)
;
LD CR2002                ; 常時ON
LDA.L DM20020            ; RB8板押圧PP_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +2
CON
STA.L @VM411
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +2
CON
ADD.L +1
CON
STA.L @VM413
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM413
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
SUB.L @VM411
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2116
;IF DM20026.L>(DM7040.L*3) AND DM20026.L<=(DM7040.L*4) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +3
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB05A
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +4
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB05A
NCJ #2117
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*3)+1)))-(DM20020.L*3)
;
LD CR2002                ; 常時ON
LDA.L DM20020            ; RB8板押圧PP_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +3
CON
STA.L @VM415
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +3
CON
ADD.L +1
CON
STA.L @VM417
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM417
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
SUB.L @VM415
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2117
;IF DM20026.L>(DM7040.L*4) AND DM20026.L<=(DM7040.L*5) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +4
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB05B
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +5
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB05B
NCJ #2118
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*4)+1)))-(DM20020.L*4)
;
LD CR2002                ; 常時ON
LDA.L DM20020            ; RB8板押圧PP_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +4
CON
STA.L @VM419
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +4
CON
ADD.L +1
CON
STA.L @VM421
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM421
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
SUB.L @VM419
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2118
;IF DM20026.L>(DM7040.L*5) AND DM20026.L<=(DM7040.L*6) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +5
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB05C
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +6
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB05C
NCJ #2119
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*5)+1)))-(DM20020.L*5)
;
LD CR2002                ; 常時ON
LDA.L DM20020            ; RB8板押圧PP_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +5
CON
STA.L @VM423
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +5
CON
ADD.L +1
CON
STA.L @VM425
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM425
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
SUB.L @VM423
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2119
;IF DM20026.L>(DM7040.L*6) AND DM20026.L<=(DM7040.L*7) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +6
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB05D
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +7
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB05D
NCJ #2120
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*6)+1)))-(DM20020.L*6)
;
LD CR2002                ; 常時ON
LDA.L DM20020            ; RB8板押圧PP_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +6
CON
STA.L @VM427
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +6
CON
ADD.L +1
CON
STA.L @VM429
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM429
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
SUB.L @VM427
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2120
;IF DM20026.L>(DM7040.L*7) AND DM20026.L<=(DM7040.L*8) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +7
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB05E
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +8
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB05E
NCJ #2121
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*7)+1)))-(DM20020.L*7)
;
LD CR2002                ; 常時ON
LDA.L DM20020            ; RB8板押圧PP_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +7
CON
STA.L @VM431
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +7
CON
ADD.L +1
CON
STA.L @VM433
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM433
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
SUB.L @VM431
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2121
;IF DM20026.L>(DM7040.L*8) AND DM20026.L<=(DM7040.L*9) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +8
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB05F
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +9
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB05F
NCJ #2122
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*8)+1)))-(DM20020.L*8)
;
LD CR2002                ; 常時ON
LDA.L DM20020            ; RB8板押圧PP_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +8
CON
STA.L @VM435
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +8
CON
ADD.L +1
CON
STA.L @VM437
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM437
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
SUB.L @VM435
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2122
;IF DM20026.L>(DM7040.L*9) AND DM20026.L<=(DM7040.L*10) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +9
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB060
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +10
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB060
NCJ #2123
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*9)+1)))-(DM20020.L*9)
;
LD CR2002                ; 常時ON
LDA.L DM20020            ; RB8板押圧PP_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +9
CON
STA.L @VM439
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +9
CON
ADD.L +1
CON
STA.L @VM441
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM441
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
SUB.L @VM439
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2123
;IF DM20026.L>(DM7040.L*10) AND DM20026.L<=(DM7040.L*11) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +10
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB061
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +11
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB061
NCJ #2124
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*10)+1)))-(DM20020.L*10)
;
LD CR2002                ; 常時ON
LDA.L DM20020            ; RB8板押圧PP_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +10
CON
STA.L @VM443
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +10
CON
ADD.L +1
CON
STA.L @VM445
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM445
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
SUB.L @VM443
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2124
;IF DM20026.L>(DM7040.L*11) AND DM20026.L<=(DM7040.L*12) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +11
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB062
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +12
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB062
NCJ #2125
; EM24754.L=EM24760.L+(DM20018.L*(DM20026.L-((DM7040.L*11)+1)))-(DM20020.L*11)
;
LD CR2002                ; 常時ON
LDA.L DM20020            ; RB8板押圧PP_ﾄﾚｲ1Y方向ﾋﾟｯﾁ
CON
MUL.L +11
CON
STA.L @VM447
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +11
CON
ADD.L +1
CON
STA.L @VM449
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM449
CON
MUL.L DM20018            ; RB8板押圧PP_ﾄﾚｲ1X方向ﾋﾟｯﾁ
CON
ADD.L EM24760            ; RB8 P11 POS(LO)
CON
SUB.L @VM447
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2125
;SET(CR2002,@MR701)
;
LD CR2002                ; 常時ON
SET @MR701               ; ⑥SUB_算出完了
LABEL #1015
;
STG @MR5108
AND @MR701               ; ⑥SUB_算出完了
RES @MR701               ; ⑥SUB_算出完了
CON
JMP @MR5115
;2枚目ﾄﾚｲ
;'取出し位置の算出
;'ﾊﾟﾚﾀｲｽﾞ基準1(P0_POS14)+X方向ﾋﾟｯﾁ
;
;IF DM20026.L<=(DM7040.L*13) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*12)+1)))
;END IF
;
;IF DM20026.L>(DM7040.L*13)  AND DM20026.L<=(DM7040.L*14) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*13)+1)))
;END IF
;
;IF DM20026.L>(DM7040.L*14) AND DM20026.L<=(DM7040.L*15) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*14)+1)))
;END IF
;
;IF DM20026.L>(DM7040.L*15) AND DM20026.L<=(DM7040.L*16) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*15)+1)))
;END IF
;
;IF DM20026.L>(DM7040.L*16) AND DM20026.L<=(DM7040.L*17) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*16)+1)))
;END IF
;
;IF DM20026.L>(DM7040.L*17) AND DM20026.L<=(DM7040.L*18) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*17)+1)))
;END IF
;
;IF DM20026.L>(DM7040.L*18) AND DM20026.L<=(DM7040.L*19) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*18)+1)))
;END IF
;
;IF DM20026.L>(DM7040.L*19) AND DM20026.L<=(DM7040.L*20) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*19)+1)))
;END IF
;
;IF DM20026.L>(DM7040.L*20) AND DM20026.L<=(DM7040.L*21) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*20)+1)))
;END IF
;
;IF DM20026.L>(DM7040.L*21) AND DM20026.L<=(DM7040.L*22) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*21)+1)))
;END IF
;
;IF DM20026.L>(DM7040.L*22) AND DM20026.L<=(DM7040.L*23) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*22)+1)))
;END IF
;
;IF DM20026.L>(DM7040.L*23) AND DM20026.L<=(DM7040.L*24) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*23)+1)))
;END IF
;
;SET(CR2002,@MR701)
;
LD @MR5109
AND @MR613               ; 搬送PPﾄﾚｲ2Y方向ﾋﾟｯﾁ変更無し
ANB @MR701               ; ⑥SUB_算出完了
NCJ #1026
;'取出し位置の算出
;
;'ﾊﾟﾚﾀｲｽﾞ基準1(P0_POS14)+X方向ﾋﾟｯﾁ
;
;IF DM20026.L<=(DM7040.L*13) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +13
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
NCJ #2126
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*12)+1)))
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +12
CON
ADD.L +1
CON
STA.L @VM451
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM451
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2126
;IF DM20026.L>(DM7040.L*13)  AND DM20026.L<=(DM7040.L*14) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +13
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB063
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +14
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB063
NCJ #2127
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*13)+1)))
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +13
CON
ADD.L +1
CON
STA.L @VM453
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM453
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2127
;IF DM20026.L>(DM7040.L*14) AND DM20026.L<=(DM7040.L*15) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +14
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB064
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +15
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB064
NCJ #2128
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*14)+1)))
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +14
CON
ADD.L +1
CON
STA.L @VM455
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM455
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2128
;IF DM20026.L>(DM7040.L*15) AND DM20026.L<=(DM7040.L*16) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +15
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB065
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +16
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB065
NCJ #2129
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*15)+1)))
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +15
CON
ADD.L +1
CON
STA.L @VM457
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM457
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2129
;IF DM20026.L>(DM7040.L*16) AND DM20026.L<=(DM7040.L*17) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +16
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB066
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +17
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB066
NCJ #2130
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*16)+1)))
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +16
CON
ADD.L +1
CON
STA.L @VM459
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM459
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2130
;IF DM20026.L>(DM7040.L*17) AND DM20026.L<=(DM7040.L*18) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +17
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB067
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +18
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB067
NCJ #2131
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*17)+1)))
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +17
CON
ADD.L +1
CON
STA.L @VM461
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM461
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2131
;IF DM20026.L>(DM7040.L*18) AND DM20026.L<=(DM7040.L*19) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +18
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB068
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +19
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB068
NCJ #2132
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*18)+1)))
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +18
CON
ADD.L +1
CON
STA.L @VM463
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM463
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2132
;IF DM20026.L>(DM7040.L*19) AND DM20026.L<=(DM7040.L*20) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +19
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB069
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +20
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB069
NCJ #2133
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*19)+1)))
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +19
CON
ADD.L +1
CON
STA.L @VM465
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM465
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2133
;IF DM20026.L>(DM7040.L*20) AND DM20026.L<=(DM7040.L*21) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +20
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB06A
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +21
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB06A
NCJ #2134
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*20)+1)))
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +20
CON
ADD.L +1
CON
STA.L @VM467
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM467
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2134
;IF DM20026.L>(DM7040.L*21) AND DM20026.L<=(DM7040.L*22) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +21
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB06B
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +22
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB06B
NCJ #2135
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*21)+1)))
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +21
CON
ADD.L +1
CON
STA.L @VM469
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM469
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2135
;IF DM20026.L>(DM7040.L*22) AND DM20026.L<=(DM7040.L*23) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +22
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB06C
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +23
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB06C
NCJ #2136
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*22)+1)))
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +22
CON
ADD.L +1
CON
STA.L @VM471
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM471
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2136
;IF DM20026.L>(DM7040.L*23) AND DM20026.L<=(DM7040.L*24) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +23
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB06D
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +24
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB06D
NCJ #2137
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*23)+1)))
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +23
CON
ADD.L +1
CON
STA.L @VM473
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM473
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2137
;SET(CR2002,@MR701)
;
LD CR2002                ; 常時ON
SET @MR701               ; ⑥SUB_算出完了
LABEL #1026
;
;'取出し位置の算出
;'ﾊﾟﾚﾀｲｽﾞ基準1(P0_POS14)+X方向ﾋﾟｯﾁ＋Y方向ﾋﾟｯﾁ
;
;IF DM20026.L<=(DM7040.L*13) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*12)+1)))
;END IF
;
;IF DM20026.L>(DM7040.L*13)  AND DM20026.L<=(DM7040.L*14) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*13)+1)))+DM20024.L
;END IF
;
;IF DM20026.L>(DM7040.L*14) AND DM20026.L<=(DM7040.L*15) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*14)+1)))+(DM20024.L*2)
;END IF
;
;IF DM20026.L>(DM7040.L*15) AND DM20026.L<=(DM7040.L*16) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*15)+1)))+(DM20024.L*3)
;END IF
;
;IF DM20026.L>(DM7040.L*16) AND DM20026.L<=(DM7040.L*17) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*16)+1)))+(DM20024.L*4)
;END IF
;
;IF DM20026.L>(DM7040.L*17) AND DM20026.L<=(DM7040.L*18) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*17)+1)))+(DM20024.L*5)
;END IF
;
;IF DM20026.L>(DM7040.L*18) AND DM20026.L<=(DM7040.L*19) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*18)+1)))+(DM20024.L*6)
;END IF
;
;IF DM20026.L>(DM7040.L*19) AND DM20026.L<=(DM7040.L*20) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*19)+1)))+(DM20024.L*7)
;END IF
;
;IF DM20026.L>(DM7040.L*20) AND DM20026.L<=(DM7040.L*21) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*20)+1)))+(DM20024.L*8)
;END IF
;
;IF DM20026.L>(DM7040.L*21) AND DM20026.L<=(DM7040.L*22) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*21)+1)))+(DM20024.L*9)
;END IF
;
;IF DM20026.L>(DM7040.L*22) AND DM20026.L<=(DM7040.L*23) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*22)+1)))+(DM20024.L*10)
;END IF
;
;IF DM20026.L>(DM7040.L*23) AND DM20026.L<=(DM7040.L*24) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*23)+1)))+(DM20024.L*11)
;END IF
;
;SET(CR2002,@MR701)
;
LD @MR5109
AND @MR614               ; 搬送PPﾄﾚｲ2Y方向ﾋﾟｯﾁ増加
ANB @MR701               ; ⑥SUB_算出完了
NCJ #1016
;'取出し位置の算出
;
;'ﾊﾟﾚﾀｲｽﾞ基準1(P0_POS14)+X方向ﾋﾟｯﾁ＋Y方向ﾋﾟｯﾁ
;
;IF DM20026.L<=(DM7040.L*13) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +13
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
NCJ #2138
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*12)+1)))
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +12
CON
ADD.L +1
CON
STA.L @VM475
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM475
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2138
;IF DM20026.L>(DM7040.L*13)  AND DM20026.L<=(DM7040.L*14) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +13
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB06E
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +14
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB06E
NCJ #2139
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*13)+1)))+DM20024.L
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +13
CON
ADD.L +1
CON
STA.L @VM477
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM477
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
ADD.L DM20024            ; RB8板押圧PP_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2139
;IF DM20026.L>(DM7040.L*14) AND DM20026.L<=(DM7040.L*15) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +14
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB06F
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +15
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB06F
NCJ #2140
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*14)+1)))+(DM20024.L*2)
;
LD CR2002                ; 常時ON
LDA.L DM20024            ; RB8板押圧PP_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +2
CON
STA.L @VM479
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +14
CON
ADD.L +1
CON
STA.L @VM481
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM481
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
ADD.L @VM479
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2140
;IF DM20026.L>(DM7040.L*15) AND DM20026.L<=(DM7040.L*16) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +15
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB070
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +16
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB070
NCJ #2141
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*15)+1)))+(DM20024.L*3)
;
LD CR2002                ; 常時ON
LDA.L DM20024            ; RB8板押圧PP_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +3
CON
STA.L @VM483
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +15
CON
ADD.L +1
CON
STA.L @VM485
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM485
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
ADD.L @VM483
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2141
;IF DM20026.L>(DM7040.L*16) AND DM20026.L<=(DM7040.L*17) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +16
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB071
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +17
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB071
NCJ #2142
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*16)+1)))+(DM20024.L*4)
;
LD CR2002                ; 常時ON
LDA.L DM20024            ; RB8板押圧PP_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +4
CON
STA.L @VM487
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +16
CON
ADD.L +1
CON
STA.L @VM489
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM489
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
ADD.L @VM487
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2142
;IF DM20026.L>(DM7040.L*17) AND DM20026.L<=(DM7040.L*18) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +17
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB072
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +18
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB072
NCJ #2143
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*17)+1)))+(DM20024.L*5)
;
LD CR2002                ; 常時ON
LDA.L DM20024            ; RB8板押圧PP_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +5
CON
STA.L @VM491
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +17
CON
ADD.L +1
CON
STA.L @VM493
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM493
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
ADD.L @VM491
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2143
;IF DM20026.L>(DM7040.L*18) AND DM20026.L<=(DM7040.L*19) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +18
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB073
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +19
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB073
NCJ #2144
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*18)+1)))+(DM20024.L*6)
;
LD CR2002                ; 常時ON
LDA.L DM20024            ; RB8板押圧PP_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +6
CON
STA.L @VM495
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +18
CON
ADD.L +1
CON
STA.L @VM497
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM497
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
ADD.L @VM495
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2144
;IF DM20026.L>(DM7040.L*19) AND DM20026.L<=(DM7040.L*20) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +19
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB074
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +20
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB074
NCJ #2145
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*19)+1)))+(DM20024.L*7)
;
LD CR2002                ; 常時ON
LDA.L DM20024            ; RB8板押圧PP_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +7
CON
STA.L @VM499
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +19
CON
ADD.L +1
CON
STA.L @VM501
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM501
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
ADD.L @VM499
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2145
;IF DM20026.L>(DM7040.L*20) AND DM20026.L<=(DM7040.L*21) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +20
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB075
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +21
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB075
NCJ #2146
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*20)+1)))+(DM20024.L*8)
;
LD CR2002                ; 常時ON
LDA.L DM20024            ; RB8板押圧PP_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +8
CON
STA.L @VM503
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +20
CON
ADD.L +1
CON
STA.L @VM505
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM505
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
ADD.L @VM503
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2146
;IF DM20026.L>(DM7040.L*21) AND DM20026.L<=(DM7040.L*22) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +21
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB076
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +22
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB076
NCJ #2147
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*21)+1)))+(DM20024.L*9)
;
LD CR2002                ; 常時ON
LDA.L DM20024            ; RB8板押圧PP_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +9
CON
STA.L @VM507
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +21
CON
ADD.L +1
CON
STA.L @VM509
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM509
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
ADD.L @VM507
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2147
;IF DM20026.L>(DM7040.L*22) AND DM20026.L<=(DM7040.L*23) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +22
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB077
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +23
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB077
NCJ #2148
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*22)+1)))+(DM20024.L*10)
;
LD CR2002                ; 常時ON
LDA.L DM20024            ; RB8板押圧PP_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +10
CON
STA.L @VM511
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +22
CON
ADD.L +1
CON
STA.L @VM513
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM513
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
ADD.L @VM511
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2148
;IF DM20026.L>(DM7040.L*23) AND DM20026.L<=(DM7040.L*24) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +23
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB078
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +24
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB078
NCJ #2149
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*23)+1)))+(DM20024.L*11)
;
LD CR2002                ; 常時ON
LDA.L DM20024            ; RB8板押圧PP_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +11
CON
STA.L @VM515
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +23
CON
ADD.L +1
CON
STA.L @VM517
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM517
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
ADD.L @VM515
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2149
;SET(CR2002,@MR701)
;
LD CR2002                ; 常時ON
SET @MR701               ; ⑥SUB_算出完了
LABEL #1016
;
;'取出し位置の算出
;'ﾊﾟﾚﾀｲｽﾞ基準1(P0_POS14)+X方向ﾋﾟｯﾁ-Y方向ﾋﾟｯﾁ
;
;IF DM20026.L<=(DM7040.L*13) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*12)+1)))
;END IF
;
;IF DM20026.L>(DM7040.L*13)  AND DM20026.L<=(DM7040.L*14) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*13)+1)))-DM20024.L
;END IF
;
;IF DM20026.L>(DM7040.L*14) AND DM20026.L<=(DM7040.L*15) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*14)+1)))-(DM20024.L*2)
;END IF
;
;IF DM20026.L>(DM7040.L*15) AND DM20026.L<=(DM7040.L*16) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*15)+1)))-(DM20024.L*3)
;END IF
;
;IF DM20026.L>(DM7040.L*16) AND DM20026.L<=(DM7040.L*17) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*16)+1)))-(DM20024.L*4)
;END IF
;
;IF DM20026.L>(DM7040.L*17) AND DM20026.L<=(DM7040.L*18) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*17)+1)))-(DM20024.L*5)
;END IF
;
;IF DM20026.L>(DM7040.L*18) AND DM20026.L<=(DM7040.L*19) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*18)+1)))-(DM20024.L*6)
;END IF
;
;IF DM20026.L>(DM7040.L*19) AND DM20026.L<=(DM7040.L*20) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*19)+1)))-(DM20024.L*7)
;END IF
;
;IF DM20026.L>(DM7040.L*20) AND DM20026.L<=(DM7040.L*21) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*20)+1)))-(DM20024.L*8)
;END IF
;
;IF DM20026.L>(DM7040.L*21) AND DM20026.L<=(DM7040.L*22) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*21)+1)))-(DM20024.L*9)
;END IF
;
;IF DM20026.L>(DM7040.L*22) AND DM20026.L<=(DM7040.L*23) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*22)+1)))-(DM20024.L*10)
;END IF
;
;IF DM20026.L>(DM7040.L*23) AND DM20026.L<=(DM7040.L*24) THEN
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*23)+1)))-(DM20024.L*11)
;END IF
;
;SET(CR2002,@MR701)
;
LD @MR5109
AND @MR615               ; 搬送PPﾄﾚｲ2Y方向ﾋﾟｯﾁ減少
ANB @MR701               ; ⑥SUB_算出完了
NCJ #1027
;'取出し位置の算出
;
;'ﾊﾟﾚﾀｲｽﾞ基準1(P0_POS14)+X方向ﾋﾟｯﾁ-Y方向ﾋﾟｯﾁ
;
;IF DM20026.L<=(DM7040.L*13) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +13
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
NCJ #2150
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*12)+1)))
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +12
CON
ADD.L +1
CON
STA.L @VM519
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM519
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2150
;IF DM20026.L>(DM7040.L*13)  AND DM20026.L<=(DM7040.L*14) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +13
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB079
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +14
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB079
NCJ #2151
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*13)+1)))-DM20024.L
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +13
CON
ADD.L +1
CON
STA.L @VM521
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM521
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
SUB.L DM20024            ; RB8板押圧PP_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2151
;IF DM20026.L>(DM7040.L*14) AND DM20026.L<=(DM7040.L*15) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +14
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB07A
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +15
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB07A
NCJ #2152
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*14)+1)))-(DM20024.L*2)
;
LD CR2002                ; 常時ON
LDA.L DM20024            ; RB8板押圧PP_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +2
CON
STA.L @VM523
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +14
CON
ADD.L +1
CON
STA.L @VM525
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM525
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
SUB.L @VM523
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2152
;IF DM20026.L>(DM7040.L*15) AND DM20026.L<=(DM7040.L*16) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +15
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB07B
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +16
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB07B
NCJ #2153
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*15)+1)))-(DM20024.L*3)
;
LD CR2002                ; 常時ON
LDA.L DM20024            ; RB8板押圧PP_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +3
CON
STA.L @VM527
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +15
CON
ADD.L +1
CON
STA.L @VM529
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM529
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
SUB.L @VM527
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2153
;IF DM20026.L>(DM7040.L*16) AND DM20026.L<=(DM7040.L*17) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +16
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB07C
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +17
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB07C
NCJ #2154
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*16)+1)))-(DM20024.L*4)
;
LD CR2002                ; 常時ON
LDA.L DM20024            ; RB8板押圧PP_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +4
CON
STA.L @VM531
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +16
CON
ADD.L +1
CON
STA.L @VM533
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM533
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
SUB.L @VM531
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2154
;IF DM20026.L>(DM7040.L*17) AND DM20026.L<=(DM7040.L*18) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +17
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB07D
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +18
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB07D
NCJ #2155
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*17)+1)))-(DM20024.L*5)
;
LD CR2002                ; 常時ON
LDA.L DM20024            ; RB8板押圧PP_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +5
CON
STA.L @VM535
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +17
CON
ADD.L +1
CON
STA.L @VM537
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM537
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
SUB.L @VM535
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2155
;IF DM20026.L>(DM7040.L*18) AND DM20026.L<=(DM7040.L*19) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +18
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB07E
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +19
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB07E
NCJ #2156
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*18)+1)))-(DM20024.L*6)
;
LD CR2002                ; 常時ON
LDA.L DM20024            ; RB8板押圧PP_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +6
CON
STA.L @VM539
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +18
CON
ADD.L +1
CON
STA.L @VM541
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM541
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
SUB.L @VM539
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2156
;IF DM20026.L>(DM7040.L*19) AND DM20026.L<=(DM7040.L*20) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +19
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB07F
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +20
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB07F
NCJ #2157
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*19)+1)))-(DM20024.L*7)
;
LD CR2002                ; 常時ON
LDA.L DM20024            ; RB8板押圧PP_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +7
CON
STA.L @VM543
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +19
CON
ADD.L +1
CON
STA.L @VM545
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM545
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
SUB.L @VM543
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2157
;IF DM20026.L>(DM7040.L*20) AND DM20026.L<=(DM7040.L*21) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +20
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB080
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +21
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB080
NCJ #2158
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*20)+1)))-(DM20024.L*8)
;
LD CR2002                ; 常時ON
LDA.L DM20024            ; RB8板押圧PP_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +8
CON
STA.L @VM547
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +20
CON
ADD.L +1
CON
STA.L @VM549
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM549
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
SUB.L @VM547
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2158
;IF DM20026.L>(DM7040.L*21) AND DM20026.L<=(DM7040.L*22) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +21
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB081
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +22
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB081
NCJ #2159
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*21)+1)))-(DM20024.L*9)
;
LD CR2002                ; 常時ON
LDA.L DM20024            ; RB8板押圧PP_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +9
CON
STA.L @VM551
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +21
CON
ADD.L +1
CON
STA.L @VM553
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM553
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
SUB.L @VM551
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2159
;IF DM20026.L>(DM7040.L*22) AND DM20026.L<=(DM7040.L*23) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +22
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB082
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +23
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB082
NCJ #2160
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*22)+1)))-(DM20024.L*10)
;
LD CR2002                ; 常時ON
LDA.L DM20024            ; RB8板押圧PP_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +10
CON
STA.L @VM555
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +22
CON
ADD.L +1
CON
STA.L @VM557
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM557
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
SUB.L @VM555
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2160
;IF DM20026.L>(DM7040.L*23) AND DM20026.L<=(DM7040.L*24) THEN
;
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +23
CON
CMP.L DM20026            ; ばね取出し番号
LD CR2009                ; 演算結果が負
OUT @VB083
LD CR2002                ; 常時ON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +24
CON
CMP.L DM20026            ; ばね取出し番号
LDB CR2009               ; 演算結果が負
AND @VB083
NCJ #2161
; EM24754.L=EM24778.L+(DM20022.L*(DM20026.L-((DM7040.L*23)+1)))-(DM20024.L*11)
;
LD CR2002                ; 常時ON
LDA.L DM20024            ; RB8板押圧PP_ﾄﾚｲ2Y方向ﾋﾟｯﾁ
CON
MUL.L +11
CON
STA.L @VM559
CON
LDA.L DM7040             ; 装置基礎ﾃﾞｰﾀ21
CON
MUL.L +23
CON
ADD.L +1
CON
STA.L @VM561
CON
LDA.L DM20026            ; ばね取出し番号
CON
SUB.L @VM561
CON
MUL.L DM20022            ; RB8板押圧PP_ﾄﾚｲ2X方向ﾋﾟｯﾁ
CON
ADD.L EM24778            ; RB8 P14 POS(LO)
CON
SUB.L @VM559
CON
STA.L EM24754            ; RB8 P10 POS(LO)
;END IF
;
LABEL #2161
;SET(CR2002,@MR701)
;
LD CR2002                ; 常時ON
SET @MR701               ; ⑥SUB_算出完了
LABEL #1027
;
STG @MR5109
AND @MR701               ; ⑥SUB_算出完了
RES @MR701               ; ⑥SUB_算出完了
CON
JMP @MR5115
;Error<141>ﾊﾟﾚﾀｲｽﾞ異常(RB8板押圧搬送PP)
STG @MR5113
ANB R39900               ; RB動作中
MPS
LDB R41204               ; TASK4 PAUSE 要求
ANB R39004               ; ｴﾗｰ中
ANL
SET R39004               ; ｴﾗｰ中
CON
DW $3000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #141 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task4 ERROR
CON
JMP @MR5114
MPP
AND R41204               ; TASK4 PAUSE 要求
MPS
ANB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
SET @MR1900              ; Main1 HALT許可
MPP
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
SET @MR1901              ; Main2 HALT許可
STG @MR5114
MPS
ANB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
SET @MR1900              ; Main1 HALT許可
MRD
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
SET @MR1901              ; Main2 HALT許可
MPP
AND @MR101               ; Task4 ERROR_End
RES @MR101               ; Task4 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR5115
;END
STG @MR5115
SET @MR5101              ; ⑥SUB_ばねﾊﾟﾚﾀｲｽﾞ(PP側)完了
CON
RES @MR5102              ; ⑥SUB_ばねﾊﾟﾚﾀｲｽﾞ(PP側)中
CON
ENDS
;<h1/> ⑦SUB_ばね搬送PP吸着&有無確認
STG @MR5200              ; ⑦SUB_ばね搬送PP吸着&有無確認
SET @MR5202              ; ⑦SUB_ばね搬送PP吸着&有無確認中
CON
JMP @MR5207
;搬送PP吸着ON
;吸着圧力確認
;Error 142 吸着圧力異常(RB8ばね搬送PP)
;有無状態書込み
;※PP下降時_有無ｾﾝｻ判断不可
STG @MR5207
MPS
LD R4300                 ; 圧縮ばね吸着下降端
ANB R4301                ; 圧縮ばね吸着上昇端
ANL
JMP @MR5215
MPP
LDB R4300                ; 圧縮ばね吸着下降端
AND R4301                ; 圧縮ばね吸着上昇端
ANL
TMR @8 #5                ; wait
CON
AND @T8                  ; wait
MPS
AND R4414                ; ばね有無ｾﾝｻ(ON有)
DW #1 DM20035            ; ばね搬送有無記憶(1=有り)
CON
JMP @MR5215
MPP
ANB R4414                ; ばね有無ｾﾝｻ(ON有)
DW #0 DM20035            ; ばね搬送有無記憶(1=有り)
CON
JMP @MR5215
;END
STG @MR5215
SET @MR5201              ; ⑦SUB_ばね搬送PP吸着&有無確完了
CON
RES @MR5202              ; ⑦SUB_ばね搬送PP吸着&有無確認中
CON
ENDS
;<h1/>-----------------------------------------------------------
;<h1/>*ERROR
;MyTask Error Process Substance/エラー処理実体
STG @MR100               ; Task4 ERROR
ANB R39002               ; ERROR_DISP Busy
MPS
ZRES @MR105 @MR108       ; SW1  SW4
CON
DISN @DM9 @DM3 #4        ; ReturnSW /ERROR_DISP
MRD
DW MyTask @DM0           ; 自ﾀｽｸ番号  TaskNo /ERROR_DISP
CON
BMOV @DM0 DM60000 #7     ; TaskNo /ERROR_DISP  TaskNo /ERROR_DISP
MPP
SET R39000               ; ERROR_DISP Start
CON
SET @MR102               ; Task4 ERROR Busy
CON
JMP @MR103
STG @MR103
AND R39002               ; ERROR_DISP Busy
AND= DM60008 @DM1        ; ReturnNo /ERROR_DISP  ErrorNo /ERROR_DISP
MPS
AND= DM60007 @DM6        ; ReturnSW /ERROR_DISP
SET @MR105               ; SW1
CON
JMP @MR104
MRD
AND= DM60007 @DM5        ; ReturnSW /ERROR_DISP
SET @MR106               ; SW2
CON
JMP @MR104
MRD
AND= DM60007 @DM4        ; ReturnSW /ERROR_DISP
SET @MR107               ; SW3
CON
JMP @MR104
MPP
AND= DM60007 @DM3        ; ReturnSW /ERROR_DISP
SET @MR108               ; SW4
CON
JMP @MR104
STG @MR104
ANB R39002               ; ERROR_DISP Busy
RES @MR102               ; Task4 ERROR Busy
CON
SET @MR101               ; Task4 ERROR_End
CON
ENDS
;<h1/>*Select_Y_N 
;MyTask Select_Y_N Process Substance/SELECT_Y_N処理実体
STG @MR300               ; Task4 SELECT_Y_N
ANB R39102               ; SELECT_Y_N Busy
MPS
ZRES @MR306 @MR307       ; Task4 Y/N
CON
DW #0 @DM20              ; TaskNo /SELECT_Y_N
CON
BMOV @DM20 DM60020 #3    ; TaskNo /SELECT_Y_N  TaskNo /SELECT_Y_N
MPP
SET R39100               ; SELECT_Y_N Start
CON
SET @MR302               ; Task4 Y_N Busy
CON
JMP @MR303
STG @MR303
AND R39102               ; SELECT_Y_N Busy
MPS
AND= DM60023 #1          ; Y_N /SELECT_Y_N
SET @MR306               ; Task4 Y/N
CON
JMP @MR304
MPP
AND= DM60023 #2          ; Y_N /SELECT_Y_N
RES @MR306               ; Task4 Y/N
CON
JMP @MR304
STG @MR304
ANB R39102               ; SELECT_Y_N Busy
RES @MR302               ; Task4 Y_N Busy
CON
SET @MR301               ; Task4 Y/N END
CON
ENDS
;<h1/>*TIMEUP ERROR
;MyTask TIMEUP_ERROR Process Substance/TIMEUP_ERROR処理実体
STG @MR400               ; Task4 TIMEUP_ERR
ANB R39302               ; TIMEUP_ERR Busy
MPS
DW #0 @DM40
CON
BMOV @DM40 DM60040 #2    ; TaskNo /TIMEUP_ERR
MPP
SET R39300               ; TIMEUP_ERR Start
CON
SET @MR402               ; Task4 TIMEUP Busy
CON
JMP @MR403
STG @MR403
AND R39302               ; TIMEUP_ERR Busy
JMP @MR404
STG @MR404
ANB R39302               ; TIMEUP_ERR Busy
RES @MR402               ; Task4 TIMEUP Busy
CON
SET @MR401               ; Task4 TIMEUP_END
CON
ENDS
;<h1/>*Select_ACT 
;MyTask Select_ACT Process Substance/SELECT_ACT処理実体
STG @MR200               ; Task4 SELECT_ACT
ANB R39202               ; SELECT_ACT Busy
MPS
ZRES @MR205 @MR208       ; SW1  SW4
CON
DW #0 @DM30              ; TaskNo /SELECT_ACT
CON
BMOV @DM30 DM60030 #7    ; TaskNo /SELECT_ACT  TaskNo /SELECT_ACT
MPP
SET R39200               ; SELECT_ACT Start
CON
SET @MR202               ; Task4 SEL_ACT Busy
CON
JMP @MR203
STG @MR203
AND R39202               ; SELECT_ACT Busy
AND<> DM60037 #0         ; SelectSW /SELECT_ACT
MPS
AND= DM60037 #1          ; SelectSW /SELECT_ACT
SET @MR205               ; SW1
CON
JMP @MR204
MRD
AND= DM60037 #2          ; SelectSW /SELECT_ACT
SET @MR206               ; SW2
CON
JMP @MR204
MRD
AND= DM60037 #3          ; SelectSW /SELECT_ACT
SET @MR207               ; SW3
CON
JMP @MR204
MPP
AND= DM60037 #4          ; SelectSW /SELECT_ACT
SET @MR208               ; SW4
CON
JMP @MR204
STG @MR204
ANB R39202               ; SELECT_ACT Busy
RES @MR202               ; Task4 SEL_ACT Busy
CON
SET @MR201               ; Task4 SEL_ACT END
CON
ENDS
;<h1/>※機能Macro呼出し見本- 削除して下さい。-------------------------------------
;<h1/>※Error:記述見本
;ERR163 "****Error"
;<h1/>※SELECT_ACT　:記述見本
;画面番号33をブザー有りで選択SW番号を左から#5,#10,#0(無し),#34の並びで表示する
;<h1/>※ SELECT_Y_N　記述見本
;//*Select_Y_N
;<h1/>HALT
LD R41204                ; TASK4 PAUSE 要求
AND @MR1900              ; Main1 HALT許可
LD @MR1901               ; Main2 HALT許可
ORB @MR4002              ; Main2 Busy
ANL
TMR @40 #5               ; HALT許可 遅延
CON
AND @T40                 ; HALT許可 遅延
SET R42604               ; Grp1_Task4_ﾎﾟｰｽﾞ許可
LD R42604                ; Grp1_Task4_ﾎﾟｰｽﾞ許可
ORB R41204               ; TASK4 PAUSE 要求
ANB @MR001               ; TASK4　ERROR
RES @MR1900              ; Main1 HALT許可
CON
RES @MR1901              ; Main2 HALT許可
END
ENDH
