DEVICE:53
;MODULE:UserIO
;MODULE_TYPE:0
;SCRIPT_TYPE:
;OneSystem Sub Module
;
;---------------------------------------
;ModuleName	:	UserIO
;ModuleType	:	Sub Module
;Function	:	ﾕｰｻﾞｰ入出力まとめ
;---------------------------------------
;ｼﾐｭﾚｰﾀﾓｰﾄﾞ時ﾕｰｻﾞｰI/O無効用
;↓↓ Please not delete.
LD R59915                ; _運転ﾓｰﾄﾞ指定
CJ #0
;<h1/>装置設定等
;側面扉状態TP表示用
LDB R44310               ; *Group1　安全ｶﾊﾞｰﾛｯｸ
ANB MR12710              ; COM_MAIN_PAUSE許可
OUT MR10306              ; 隣ｾﾙﾎﾟｰｽﾞ許可待ち中
;ﾜｰｸ1個分ｻｲｸﾙﾀｲﾑ計算
;強制終了SW選択時、自動運転不可に
LDB R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND MR10004              ; 要再原点復帰
MOV #1 DM8380            ; _INDI　AUTO有効／無効
RES MR10004              ; 要再原点復帰
;ｸﾞﾛｰﾊﾞﾙﾃﾞﾊﾞｲｽﾌﾗｸﾞ_ｸﾘｱ処理
;'定停止時ﾌﾗｸﾞﾘｾｯﾄ
;res (CR2002,lr100) '割り込みSW1
;res (CR2002,lr101) '割り込みSW2
;res (CR2002,mr10006) 'ﾄﾚｲ戻りSub_Busy
;res (CR2002,mr10007) 'ﾄﾚｲ搬送戻りSub_End
;res (CR2002,mr10014) '動ﾊﾟﾗ変更後ｷｬﾝｾﾙ
;res (CR2002,mr10015) '動ﾊﾟﾗ変更後実行
;res (CR2002,mr10102) 'ｴﾚﾍﾞｰﾀ待機位置移動完了
;res (CR2002,mr10109) 'ｴﾚﾍﾞｰﾀ  待機位置移動要求
;res (CR2002,mr10110) 'MCｱﾗｰﾑｸﾘｱ
;res (CR2002,mr10113) '下段移載ﾄﾚｲ受け取りOK
;res (CR2002,mr10207) 'ｴﾚﾍﾞｰﾀ受渡し完了
;res (CR2002,mr10208) 'ｴﾚﾍﾞｰﾀ段積み移動
;res (CR2002,mr10209) '段ﾊﾞﾗｼSub_Busy
;res (CR2002,mr10211) 'ﾒﾝﾃﾄﾚｲ排出_ｴﾚﾍﾞｰﾀ要求
;res (CR2002,mr10212) 'ﾒﾝﾃ_ﾄﾚｲ排出完了
;res (CR2002,mr10213) 'ﾒﾝﾃ_ｴﾚﾍﾞｰﾀ受渡し完了
;res (CR2002,mr10215) 'ﾒﾝﾃ_ｴﾚﾍﾞｰﾀ_下段移載_受渡済
;res (CR2002,mr10300) 'ﾒﾝﾃ_下段移載処理完了
;res (CR2002,mr10301) 'ﾒﾝﾃ_ﾄﾚｲ排出_上段無し
;res (CR2002,mr10302) 'ﾒﾝﾃ_満杯ﾄﾚｲ先排出中
;res (CR2002,mr10303) 'ﾒﾝﾃ_満杯先排出END
;res (CR2002,mr10308) 'Auto_上段ﾄﾚｲ搬送先行
;res (CR2002,mr13501) 'T1_ﾄﾚｲｼﾌﾄ中_IL
;res (CR2002,mr13700) 'ﾄﾚｲｼﾌﾄSub_Busy
;
LDB R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
NCJ #1000
;'定停止時ﾌﾗｸﾞﾘｾｯﾄ
;
;res (CR2002,lr100) '割り込みSW1
;
LD CR2002                ; 常時ON
RES LR100                ; _割り込みSW1　ON/OFF状態
;res (CR2002,lr101) '割り込みSW2
;
LD CR2002                ; 常時ON
RES LR101                ; _割り込みSW2　ON/OFF状態
;res (CR2002,mr10006) 'ﾄﾚｲ戻りSub_Busy
;
LD CR2002                ; 常時ON
RES MR10006              ; ﾄﾚｲ戻りSub_Busy
;res (CR2002,mr10007) 'ﾄﾚｲ搬送戻りSub_End
;
LD CR2002                ; 常時ON
RES MR10007              ; ﾄﾚｲ搬送戻りSub_End
;res (CR2002,mr10014) '動ﾊﾟﾗ変更後ｷｬﾝｾﾙ
;
LD CR2002                ; 常時ON
RES MR10014              ; 動ﾊﾟﾗ変更後ｷｬﾝｾﾙ
;res (CR2002,mr10015) '動ﾊﾟﾗ変更後実行
;
LD CR2002                ; 常時ON
RES MR10015              ; 動ﾊﾟﾗ変更後実行
;res (CR2002,mr10102) 'ｴﾚﾍﾞｰﾀ待機位置移動完了
;
LD CR2002                ; 常時ON
RES MR10102              ; ｴﾚﾍﾞｰﾀ待機位置移動完了
;res (CR2002,mr10109) 'ｴﾚﾍﾞｰﾀ  待機位置移動要求
;
LD CR2002                ; 常時ON
RES MR10109              ; ｴﾚﾍﾞｰﾀ　待機位置移動要求
;res (CR2002,mr10110) 'MCｱﾗｰﾑｸﾘｱ
;
LD CR2002                ; 常時ON
RES MR10110              ; MCｱﾗｰﾑｸﾘｱ
;res (CR2002,mr10113) '下段移載ﾄﾚｲ受け取りOK
;
LD CR2002                ; 常時ON
RES MR10113              ; 下段移載ﾄﾚｲ受け取りOK
;res (CR2002,mr10207) 'ｴﾚﾍﾞｰﾀ受渡し完了
;
LD CR2002                ; 常時ON
RES MR10207              ; ｴﾚﾍﾞｰﾀ受渡し完了
;res (CR2002,mr10208) 'ｴﾚﾍﾞｰﾀ段積み移動
;
LD CR2002                ; 常時ON
RES MR10208              ; ｴﾚﾍﾞｰﾀ段積み移動
;res (CR2002,mr10209) '段ﾊﾞﾗｼSub_Busy
;
LD CR2002                ; 常時ON
RES MR10209              ; 段ﾊﾞﾗｼSub_Busy
;res (CR2002,mr10211) 'ﾒﾝﾃﾄﾚｲ排出_ｴﾚﾍﾞｰﾀ要求
;
LD CR2002                ; 常時ON
RES MR10211              ; ﾒﾝﾃﾄﾚｲ排出_ｴﾚﾍﾞｰﾀ要求
;res (CR2002,mr10212) 'ﾒﾝﾃ_ﾄﾚｲ排出完了
;
LD CR2002                ; 常時ON
RES MR10212              ; ﾒﾝﾃ_ﾄﾚｲ排出完了
;res (CR2002,mr10213) 'ﾒﾝﾃ_ｴﾚﾍﾞｰﾀ受渡し完了
;
LD CR2002                ; 常時ON
RES MR10213              ; ﾒﾝﾃ_ｴﾚﾍﾞｰﾀ受渡し完了
;res (CR2002,mr10215) 'ﾒﾝﾃ_ｴﾚﾍﾞｰﾀ_下段移載_受渡済
;
LD CR2002                ; 常時ON
RES MR10215              ; ﾒﾝﾃ_ｴﾚﾍﾞｰﾀ_下段移載_受渡済
;res (CR2002,mr10300) 'ﾒﾝﾃ_下段移載処理完了
;
LD CR2002                ; 常時ON
RES MR10300              ; ﾒﾝﾃ_下段移載処理完了
;res (CR2002,mr10301) 'ﾒﾝﾃ_ﾄﾚｲ排出_上段無し
;
LD CR2002                ; 常時ON
RES MR10301              ; ﾒﾝﾃ_ﾄﾚｲ排出_上段無し
;res (CR2002,mr10302) 'ﾒﾝﾃ_満杯ﾄﾚｲ先排出中
;
LD CR2002                ; 常時ON
RES MR10302              ; ﾒﾝﾃ_満杯ﾄﾚｲ先排出中
;res (CR2002,mr10303) 'ﾒﾝﾃ_満杯先排出END
;
LD CR2002                ; 常時ON
RES MR10303              ; ﾒﾝﾃ_満杯先排出END
;res (CR2002,mr10308) 'Auto_上段ﾄﾚｲ搬送先行
;
LD CR2002                ; 常時ON
RES MR10308              ; Auto_上段ﾄﾚｲ搬送先行
;res (CR2002,mr13501) 'T1_ﾄﾚｲｼﾌﾄ中_IL
;
LD CR2002                ; 常時ON
RES MR13501              ; T1_ﾄﾚｲｼﾌﾄ中_IL
;res (CR2002,mr13700) 'ﾄﾚｲｼﾌﾄSub_Busy
;
LD CR2002                ; 常時ON
RES MR13700              ; ﾄﾚｲｼﾌﾄSub_Busy
LABEL #1000
;
;Auto_不可中_ﾃﾞﾊﾞｲｽ化(ﾀｯﾁﾊﾟﾈﾙ用）
LD= DM8380 #1            ; _INDI　AUTO有効／無効
OUT MR10202              ; AUTO不可中
;扉開放中_各動作選択禁止(扉確認無視中除く）
LDB R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
OR CR2002                ; 常時ON
LDB R4007                ; 上扉_閉確認
ORB R4008                ; 下扉_閉確認
ORB R007                 ; 側面扉閉じ
ANL
BANB DM2000 #1           ; _動作ﾊﾟﾗﾒｰﾀ
AND= DM3000 #10          ; _MainTP　表示中ﾍﾟｰｼﾞNo
MPS
RES R46111               ; _AUTOﾓｰﾄﾞ選択中
CON
RES R46112               ; _HOMEﾓｰﾄﾞ選択中
CON
RES R46113               ; _MAINTEﾓｰﾄﾞ選択中
MPP
OUT MR10309              ; ｶﾊﾞｰ開TP表示用
;動作ﾊﾟﾗﾒｰﾀ変更通知
BLD DM2000 #0            ; _動作ﾊﾟﾗﾒｰﾀ
BOR DM2000 #1            ; _動作ﾊﾟﾗﾒｰﾀ
OUT MR10008              ; 動作ﾊﾟﾗﾒｰﾀ変更中
;段ﾊﾞﾗｼ一連/STEP動作用_ﾀｯﾁﾊﾟﾈﾙｲﾝﾀｰﾛｯｸ用
LD R4210                 ; 段ﾊﾞﾗｼ 上限(右)
AND R4710                ; 段ﾊﾞﾗｼ 上限(左)
AND R4205                ; 上段移載 ﾄﾚｲ搬送 戻限
ANB R4204                ; 上段移載 ﾄﾚｲ搬送 行限
AND R4201                ; ｾﾊﾟﾚｰﾀ 後限(右前)
AND R4203                ; ｾﾊﾟﾚｰﾀ 後限(右奥)
AND R4701                ; ｾﾊﾟﾚｰﾀ 後限(左前)
AND R4703                ; ｾﾊﾟﾚｰﾀ 後限(左奥)
ANB R4514                ; 下段 過積載
AND R4308                ; ﾄﾚｲ逆入れ検知(ON正常)
ANB R4206                ; 上段移載 ﾄﾚｲ搬送 ﾄﾚｲ有無
OUT MR10304              ; 段ﾊﾞﾗｼ原点条件
LDB MR10304              ; 段ﾊﾞﾗｼ原点条件
AND= DM3000 #211         ; _MainTP　表示中ﾍﾟｰｼﾞNo
@DW #0 DM4110            ; _Group1　ﾒﾝﾃ動作番号
;ﾄﾚｲｼﾌﾄ一連/STEP動作用_ﾀｯﾁﾊﾟﾈﾙｲﾝﾀｰﾛｯｸ用
LDB R5015                ; 下段 ﾄﾚｲ検出
AND R4307                ; ﾄﾚｲｼﾌﾄ 上限(右)
AND R4807                ; ﾄﾚｲｼﾌﾄ 上限(左)
ANB R4306                ; ﾄﾚｲｼﾌﾄ 下限(右)
ANB R4806                ; ﾄﾚｲｼﾌﾄ 下限(左)
AND MR10203              ; ﾄﾚｲ投入状態OK
OUT MR10305              ; 一連/STEPﾄﾚｲｼﾌﾄ条件
LDB MR10305              ; 一連/STEPﾄﾚｲｼﾌﾄ条件
AND= DM3000 #211         ; _MainTP　表示中ﾍﾟｰｼﾞNo
@DW #0 DM4110            ; _Group1　ﾒﾝﾃ動作番号
;ﾊﾟﾈﾙ管理
LD R4104                 ; 下段移載 ﾄﾚｲ搬送戻限
ANB R4103                ; 下段移載 ﾄﾚｲ搬送奥行限
AND R4100                ; 下段移載 出口ﾄﾚｲ有無検出
OUT MR10201              ; TP用下段移載 出口ﾄﾚｲ有無検出
LDB R4104                ; 下段移載 ﾄﾚｲ搬送戻限
ANB R4103                ; 下段移載 ﾄﾚｲ搬送奥行限
OUT MR10205              ; 下段ｽﾗｲﾀﾞ移動中
LD LR101                 ; _割り込みSW2　ON/OFF状態
OR R54206                ; _割り込みSW押下無効
OUT MR10206              ; 割り込みSW１禁止
LD LR100                 ; _割り込みSW1　ON/OFF状態
OR R54206                ; _割り込みSW押下無効
OUT MR10210              ; 割り込みSW２禁止
;ﾄﾚｲ投入状態
LDB R4508                ; 上段 過積載
LDB R4510                ; 中上段 過積載
ANB R4512                ; 中下段 過積載
ANB R4514                ; 下段 過積載
OR MR13501               ; T1_ﾄﾚｲｼﾌﾄ中_IL
ANL
AND R4308                ; ﾄﾚｲ逆入れ検知(ON正常)
AND R4007                ; 上扉_閉確認
RES MR10204              ; ﾄﾚｲ投入状態OK_TP表示用
CON
OUT MR10203              ; ﾄﾚｲ投入状態OK
LDB MR10203              ; ﾄﾚｲ投入状態OK
MPS
TMR @1 #60
CON
AND @T1
SET MR10204              ; ﾄﾚｲ投入状態OK_TP表示用
MPP
LD MR12300               ; COM_Tm_覚え(常時OFF)
ANB R4308                ; ﾄﾚｲ逆入れ検知(ON正常)
LD R4205                 ; 上段移載 ﾄﾚｲ搬送 戻限
OR R4204                 ; 上段移載 ﾄﾚｲ搬送 行限
ANL
ANL
TMR @2 #30
CON
AND @T2
SET MR10204              ; ﾄﾚｲ投入状態OK_TP表示用
LDB MR10203              ; ﾄﾚｲ投入状態OK
ANB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
SET MR10204              ; ﾄﾚｲ投入状態OK_TP表示用
;ﾄﾚｲ満杯確認
LD=.D DM52292 EM10000    ; ｴﾚﾍﾞｰﾀ_現在位置  RB1目標値（下位）1
AND R4013                ; ｴﾚﾍﾞｰﾀ頭出し(ｻｰﾁ)
OUT MR14601              ; T3_ﾄﾚｲ満杯_Flg
;オペレータレベル制限
LD= DM2002 #0            ; _現在ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ番号
OUT R54900               ; _設定内SW選択可／不可
OUT R54901               ; _設定内SW選択可／不可
LD= DM2002 #0            ; _現在ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ番号
OR= DM2002 #1            ; _現在ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ番号
OUT R54902               ; _設定内SW選択可／不可
LD= DM2002 #0            ; _現在ｵﾍﾟﾚｰﾀﾚﾍﾞﾙ番号
OUT R54904               ; _設定内SW選択可／不可
OUT R54905               ; _設定内SW選択可／不可
OUT R54906               ; _設定内SW選択可／不可
;<h1/>User_Input/ﾕｰｻﾞｰ入力まとめ
;<h1/>User_Output/ﾕｰｻﾞｰ出力まとめ
LD MR7007
OUT R7007
LD MR7008                ; ｻﾌﾞSWBOX(ﾄﾚｲ交換上段 ｽﾀｰﾄﾗﾝﾌﾟ
AND R100                 ; 0.5s ｸﾛｯｸ
OUT R7008                ; 上扉 ｽﾀｰﾄSWﾗﾝﾌﾟ
LD MR7009                ; ｻﾌﾞSWBOX(ﾄﾚｲ交換上段 ﾎﾟｰｽﾞﾗﾝﾌﾟ
OUT R7009                ; 上扉 ﾎﾟｰｽﾞSWﾗﾝﾌﾟ
LD MR7010                ; ｻﾌﾞSWBOX(ﾄﾚｲ交換下段 ｽﾀｰﾄﾗﾝﾌﾟ
LD CR2003                ; 常時OFF
AND MR7013               ; 下扉開
ORL
AND R100                 ; 0.5s ｸﾛｯｸ
OUT R7010                ; 下扉 ｽﾀｰﾄSWﾗﾝﾌﾟ
LD MR7011                ; ｻﾌﾞSWBOX(ﾄﾚｲ交換下段 ﾎﾟｰｽﾞﾗﾝﾌﾟ
OUT R7011                ; 下扉 ﾎﾟｰｽﾞSWﾗﾝﾌﾟ
LDP R4004                ; 上扉_ﾎﾟｰｽﾞSW
ANB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
LDP R4004                ; 上扉_ﾎﾟｰｽﾞSW
AND R39004               ; ｴﾗｰ処理中
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ORL
LDP @T11                 ; 上扉ﾛｯｸON確認時間
ANB R4007                ; 上扉_閉確認
ORL
ORP MR10307              ; カバー開Shot
OR MR9000                ; 上扉ﾎﾟｰｽﾞ受付
ANB MR9011               ; 上扉ﾛｯｸONﾊﾟﾙｽ
OUT MR9000               ; 上扉ﾎﾟｰｽﾞ受付
LD MR9000                ; 上扉ﾎﾟｰｽﾞ受付
OR MR9001                ; 上扉ﾎﾟｰｽﾞON
ANB MR9011               ; 上扉ﾛｯｸONﾊﾟﾙｽ
OUT MR9001               ; 上扉ﾎﾟｰｽﾞON
TMR @10 #2               ; 上扉ﾎﾟｰｽﾞONディﾚｰ
LDP @T10                 ; 上扉ﾎﾟｰｽﾞONディﾚｰ
MPS
SET MR7008               ; ｻﾌﾞSWBOX(ﾄﾚｲ交換上段 ｽﾀｰﾄﾗﾝﾌﾟ
CON
SET MR7009               ; ｻﾌﾞSWBOX(ﾄﾚｲ交換上段 ﾎﾟｰｽﾞﾗﾝﾌﾟ
CON
SET MR7012               ; 上扉開
MPP
RES MR7308               ; 上段 ﾄﾚｲｶﾞｲﾄﾞ前進
CON
RES MR7310               ; 中上段 ﾄﾚｲｶﾞｲﾄﾞ前進
CON
RES MR7312               ; 中下段ﾄﾚｲｶﾞｲﾄﾞ前進
CON
RES MR7314               ; 下段 ﾄﾚｲｶﾞｲﾄﾞ前進
LDP R4003                ; 上扉_ｽﾀｰﾄSW
LD R44502                ; *Group1　ｶﾊﾞｰ開要求SWﾗﾝﾌﾟ
LDP R002                 ; 操作BOX START SW
ORP R4000                ; 背面_ｽﾀｰﾄSW
ANL
ORL
ANB R4007                ; 上扉_閉確認
AND @T10                 ; 上扉ﾎﾟｰｽﾞONディﾚｰ
OR MR9010                ; 上扉ﾛｯｸON
ANB @T11                 ; 上扉ﾛｯｸON確認時間
OUT MR9010               ; 上扉ﾛｯｸON
DIFU MR9011              ; 上扉ﾛｯｸONﾊﾟﾙｽ
TMR @11 #3               ; 上扉ﾛｯｸON確認時間
LDP MR9010               ; 上扉ﾛｯｸON
RES MR7008               ; ｻﾌﾞSWBOX(ﾄﾚｲ交換上段 ｽﾀｰﾄﾗﾝﾌﾟ
CON
RES MR7009               ; ｻﾌﾞSWBOX(ﾄﾚｲ交換上段 ﾎﾟｰｽﾞﾗﾝﾌﾟ
CON
RES MR7012               ; 上扉開
LD MR7012                ; 上扉開
OR R506                  ; 安全ｶﾊﾞｰ ﾛｯｸ
OUT R7012                ; 上扉開
LDP R4006                ; 下扉_ﾎﾟｰｽﾞSW
LDB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
OR R4104                 ; 下段移載 ﾄﾚｲ搬送戻限
ANL
LDP R4006                ; 下扉_ﾎﾟｰｽﾞSW
AND R39004               ; ｴﾗｰ処理中
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ORL
ORP MR10307              ; カバー開Shot
LDP @T13                 ; 下扉ﾛｯｸﾞON確認時間
ANB R4008                ; 下扉_閉確認
ORL
OR MR9100                ; 下扉ﾎﾟｰｽﾞ受付
ANB MR9111               ; 下扉ﾛｯｸﾞONﾊﾟﾙｽ
OUT MR9100               ; 下扉ﾎﾟｰｽﾞ受付
LD MR9100                ; 下扉ﾎﾟｰｽﾞ受付
OR MR9101                ; 下扉ﾎﾟｰｽﾞON
ANB MR9111               ; 下扉ﾛｯｸﾞONﾊﾟﾙｽ
OUT MR9101               ; 下扉ﾎﾟｰｽﾞON
TMR @12 #2               ; 下扉ﾎﾟｰｽﾞONディﾚｰ
LDP @T12                 ; 下扉ﾎﾟｰｽﾞONディﾚｰ
SET MR7010               ; ｻﾌﾞSWBOX(ﾄﾚｲ交換下段 ｽﾀｰﾄﾗﾝﾌﾟ
CON
SET MR7011               ; ｻﾌﾞSWBOX(ﾄﾚｲ交換下段 ﾎﾟｰｽﾞﾗﾝﾌﾟ
CON
SET MR7013               ; 下扉開
LDP R4005                ; 下扉_ｽﾀｰﾄSW
LD R44502                ; *Group1　ｶﾊﾞｰ開要求SWﾗﾝﾌﾟ
LDP R002                 ; 操作BOX START SW
ORP R4000                ; 背面_ｽﾀｰﾄSW
ANL
ORL
ANB R4008                ; 下扉_閉確認
AND @T12                 ; 下扉ﾎﾟｰｽﾞONディﾚｰ
OR MR9110                ; 下扉ﾛｯｸﾞON
ANB @T13                 ; 下扉ﾛｯｸﾞON確認時間
OUT MR9110               ; 下扉ﾛｯｸﾞON
DIFU MR9111              ; 下扉ﾛｯｸﾞONﾊﾟﾙｽ
TMR @13 #3               ; 下扉ﾛｯｸﾞON確認時間
LDP MR9110               ; 下扉ﾛｯｸﾞON
RES MR7010               ; ｻﾌﾞSWBOX(ﾄﾚｲ交換下段 ｽﾀｰﾄﾗﾝﾌﾟ
CON
RES MR7011               ; ｻﾌﾞSWBOX(ﾄﾚｲ交換下段 ﾎﾟｰｽﾞﾗﾝﾌﾟ
CON
RES MR7013               ; 下扉開
LD MR7013                ; 下扉開
OUT R7013                ; 下扉開
LD MR7100                ; ﾄﾚｲ受渡し前進
OUT R7100                ; ﾄﾚｲ受渡し前進
LD MR7101                ; ﾄﾚｲ受渡し後退
OUT R7101                ; ﾄﾚｲ受渡し後退
LD MR7102                ; ﾄﾚｲ受渡し下降
OUT R7102                ; ﾄﾚｲ受渡し下降
LD MR7103                ; ﾄﾚｲ受渡し上昇
OUT R7103                ; ﾄﾚｲ受渡し上昇
LD MR7104                ; ﾄﾚｲ押え 下降
OUT R7104                ; ﾄﾚｲ押え 下降
LD MR7105                ; ﾄﾚｲ押え 上昇
OUT R7105                ; ﾄﾚｲ押え 上昇
LD MR7106                ; ｾﾊﾟﾚｰﾀ 前進
OUT R7106                ; ｾﾊﾟﾚｰﾀ 前進
LD MR7107                ; ｾﾊﾟﾚｰﾀ 後退
OUT R7107                ; ｾﾊﾟﾚｰﾀ 後退
LD MR7108
OUT R7108
LD MR7109
OUT R7109
LD MR7110
OUT R7110
LD MR7111
OUT R7111
LD MR7112
OUT R7112
LD MR7113
OUT R7113
LD MR7114
OUT R7114
LD MR7115
OUT R7115
LD MR7200                ; ﾄﾚｲｼﾌﾄ受ﾂﾒ前進
OUT R7200                ; ﾄﾚｲｼﾌﾄ受ﾂﾒ前進
LD MR7201                ; ﾄﾚｲｼﾌﾄ受ﾂﾒ後退
OUT R7201                ; ﾄﾚｲｼﾌﾄ受ﾂﾒ後退
LD MR7202                ; ﾄﾚｲｼﾌﾄ下降
OUT R7202                ; ﾄﾚｲｼﾌﾄ下降
LD MR7203                ; ﾄﾚｲｼﾌﾄ上昇
OUT R7203                ; ﾄﾚｲｼﾌﾄ上昇
LD MR7204                ; ﾄﾚｲ段ﾊﾞﾗｼ ﾂﾒ下降
OUT R7204                ; 段ﾊﾞﾗｼ 下降
LD MR7205                ; ﾄﾚｲ段ﾊﾞﾗｼ ﾂﾒ上昇
OUT R7205                ; 段ﾊﾞﾗｼ 上昇
LD MR7206                ; ﾄﾚｲ段ﾊﾞﾗｼ 中間ｽﾄｯﾊﾟｰ下降
OUT R7206                ; 段ﾊﾞﾗｼ 中間ｽﾄｯﾊﾟｰ下降
LD MR7207                ; ﾄﾚｲ段ﾊﾞﾗｼ 中間ｽﾄｯﾊﾟｰ上昇
OUT R7207                ; 段ﾊﾞﾗｼ 中間ｽﾄｯﾊﾟｰ上昇
LD MR7208                ; ﾄﾚｲ段ﾊﾞﾗｼ ﾂﾒ前進
OUT R7208                ; 段ﾊﾞﾗｼ 前進
LD MR7209                ; ﾄﾚｲ段ﾊﾞﾗｼ ﾂﾒ後退
OUT R7209                ; 段ﾊﾞﾗｼ 後退
LD MR7210                ; 下段移載 ﾄﾚｲ搬送奥行
OUT R7210                ; 下段移載 ﾄﾚｲ搬送　行
LD MR7211                ; 下段移載 ﾄﾚｲ搬送 戻
OUT R7211                ; 下段移載 ﾄﾚｲ搬送　戻
LD MR7212                ; 上段移載 ﾄﾚｲ搬送行
OUT R7212                ; 上段移載 ﾄﾚｲ搬送　行
LD MR7213                ; 上段移載ﾄﾚｲ搬送　戻り
OUT R7213                ; 上段移載 ﾄﾚｲ搬送　戻
LD MR7214
OUT R7214
LD MR7215
OUT R7215
LD MR7300                ; 上段 ﾄﾚｲ受けﾂﾒ後退
OUT R7300                ; 上段 ﾄﾚｲ受けﾂﾒ後退
LD MR7301                ; 上段ﾄﾚｲ受けﾂﾒ前進
OUT R7301                ; 上段 ﾄﾚｲ受けﾂﾒ前進
LD MR7302                ; 中上段ﾄﾚｲ受けﾂﾒ後退
OUT R7302                ; 中上段 ﾄﾚｲ受けﾂﾒ後退
LD MR7303                ; 中上段ﾄﾚｲ受けﾂﾒ前進
OUT R7303                ; 中上段 ﾄﾚｲ受けﾂﾒ前進
LD MR7304                ; 中下段 ﾄﾚｲ受けﾂﾒ後退
OUT R7304                ; 中下段 ﾄﾚｲ受けﾂﾒ後退
LD MR7305                ; 中下段 ﾄﾚｲ受けﾂﾒ前進
OUT R7305                ; 中下段 ﾄﾚｲ受けﾂﾒ前進
LD MR7306                ; 下段 ﾄﾚｲ受けﾂﾒ後退
OUT R7306                ; 下段 ﾄﾚｲ受けﾂﾒ後退
LD MR7307                ; 下段 ﾄﾚｲ受けﾂﾒ前進
OUT R7307                ; 下段 ﾄﾚｲ受けﾂﾒ前進
LD MR7308                ; 上段 ﾄﾚｲｶﾞｲﾄﾞ前進
OUT R7308                ; 上段 ﾄﾚｲｶﾞｲﾄﾞ前進
LD MR7309
OUT R7309
LD MR7310                ; 中上段 ﾄﾚｲｶﾞｲﾄﾞ前進
OUT R7310                ; 中上段 ﾄﾚｲｶﾞｲﾄﾞ前進
LD MR7311
OUT R7311
LD MR7312                ; 中下段ﾄﾚｲｶﾞｲﾄﾞ前進
OUT R7312                ; 中下段ﾄﾚｲｶﾞｲﾄﾞ前進
LD MR7313
OUT R7313
LD MR7314                ; 下段 ﾄﾚｲｶﾞｲﾄﾞ前進
OUT R7314                ; 下段 ﾄﾚｲｶﾞｲﾄﾞ前進
LD MR7315
OUT R7315
;<h1/>UsrIO_ﾘﾝｸ信号(下流入力装置)
LD B2000                 ; MC_自PLC電源状態
ANB MR12600              ; COM_下流装置_ダミー
LD CR2003                ; 常時OFF
AND MR12600              ; COM_下流装置_ダミー
ORL
OUT MR12700              ; COM_MAIN_自PLC電源状態
LD B2001                 ; MC_非常停止
ANB MR12600              ; COM_下流装置_ダミー
LD CR2003                ; 常時OFF
AND MR12600              ; COM_下流装置_ダミー
ORL
OUT MR12701              ; COM_MAIN_非常停止
LD B2002                 ; MC_ｲﾝﾀｰﾛｯｸ信号
ANB MR12600              ; COM_下流装置_ダミー
OR MR12600               ; COM_下流装置_ダミー
OUT MR12702              ; COM_MAIN_ｲﾝﾀｰﾛｯｸ信号
LD B2003                 ; MC_動作開始通知
ANB MR12600              ; COM_下流装置_ダミー
LD MR12703               ; COM_MAIN_動作開始通知
AND MR12600              ; COM_下流装置_ダミー
ORL
MPS
ANB @T20                 ; 下流取出完了_ダミー
OUT MR12703              ; COM_MAIN_動作開始通知
MPP
AND MR12600              ; COM_下流装置_ダミー
TMR @20 #20              ; 下流取出完了_ダミー
LD B2004                 ; MC_動作開始許可
ANB MR12600              ; COM_下流装置_ダミー
LDB MR14101              ; ﾒｲﾝへﾜｰｸ取出し可
AND MR12600              ; COM_下流装置_ダミー
ORL
OUT MR12704              ; COM_MAIN_動作開始許可
LD B2005                 ; ﾒｲﾝよりﾄﾚｲﾁｪﾝｼﾞ動作要求
OR LR101                 ; _割り込みSW2　ON/OFF状態
OUT MR12705              ; ﾒｲﾝよりﾄﾚｲﾁｪﾝｼﾞ動作要求
LD B2006                 ; MC_補助動作開始要求
ANB MR12600              ; COM_下流装置_ダミー
LD CR2003                ; 常時OFF
AND MR12600              ; COM_下流装置_ダミー
ORL
OUT MR12706              ; COM_MAIN_補助動作開始要求
LD B2007                 ; MC_補助動作開始完了(旧許可)
ANB MR12600              ; COM_下流装置_ダミー
LD CR2003                ; 常時OFF
AND MR12600              ; COM_下流装置_ダミー
ORL
OUT MR12707              ; COM_MAIN_補助動作完了(旧許可)
LD B2008                 ; MC_補助動作失敗
ANB MR12600              ; COM_下流装置_ダミー
LD CR2003                ; 常時OFF
AND MR12600              ; COM_下流装置_ダミー
ORL
OUT MR12708              ; COM_MAIN_補助動作失敗
LD B2009                 ; MC_PAUSE要求
ANB MR12600              ; COM_下流装置_ダミー
OR MR12600               ; COM_下流装置_ダミー
OUT MR12709              ; COM_MAIN_PAUSE要求
LD B200A                 ; MC_PAUSE許可
OR B200E                 ; MC_ｽﾃｰﾀｽ(PAUSE)
ANB MR12600              ; COM_下流装置_ダミー
OR MR12600               ; COM_下流装置_ダミー
OUT MR12710              ; COM_MAIN_PAUSE許可
LD B200B                 ; MC_ｽﾃｰﾀｽ(AUTO)
ANB MR12600              ; COM_下流装置_ダミー
LD CR2003                ; 常時OFF
AND MR12600              ; COM_下流装置_ダミー
ORL
OUT MR12711              ; COM_MAIN_ｽﾃｰﾀｽ(AUTO)
LD B200C                 ; MC_ｽﾃｰﾀｽ(HOME)
ANB MR12600              ; COM_下流装置_ダミー
LD CR2003                ; 常時OFF
AND MR12600              ; COM_下流装置_ダミー
ORL
OUT MR12712              ; COM_MAIN_ｽﾃｰﾀｽ(HOME)
LD B200D                 ; MC_ｽﾃｰﾀｽ(MAINTE)
ANB MR12600              ; COM_下流装置_ダミー
LD CR2003                ; 常時OFF
AND MR12600              ; COM_下流装置_ダミー
ORL
OUT MR12713              ; COM_MAIN_ｽﾃｰﾀｽ(MAINTE)
LD B200E                 ; MC_ｽﾃｰﾀｽ(PAUSE)
ANB MR12600              ; COM_下流装置_ダミー
LD CR2003                ; 常時OFF
AND MR12600              ; COM_下流装置_ダミー
ORL
OUT MR12714              ; COM_MAIN_ｽﾃｰﾀｽ(PAUSE)
LD B200F
ANB MR12600              ; COM_下流装置_ダミー
LD CR2003                ; 常時OFF
AND MR12600              ; COM_下流装置_ダミー
ORL
OUT MR12715              ; MAIN_予備
;<h1/>UsrIO_ﾘﾝｸ信号(下流出力装置)
LD CR2002                ; 常時ON
ANB MR12600              ; COM_下流装置_ダミー
OUT B2010                ; ﾒｲﾝへ自PLC電源状態
LD R001                  ; 非常停止
ANB MR12600              ; COM_下流装置_ダミー
OUT B2011                ; ﾒｲﾝへ非常停止
LD R4204                 ; 上段移載 ﾄﾚｲ搬送 行限
ANB R4205                ; 上段移載 ﾄﾚｲ搬送 戻限
ANB R4111                ; ﾄﾚｲ受渡し上限(右)
ANB R4611                ; ﾄﾚｲ受渡し上限(左)
AND R4110                ; ﾄﾚｲ受渡し下限(右)
AND R4610                ; ﾄﾚｲ受渡し下限(左)
AND R4112                ; ﾄﾚｲ押え 下限(右前)
AND R4612                ; ﾄﾚｲ押え 下限(左前)
ANB R4113                ; ﾄﾚｲ押え 上限(右前)
ANB R4613                ; ﾄﾚｲ押え 上限(左前)
ANB MR12600              ; COM_下流装置_ダミー
OUT B2012                ; ﾒｲﾝへｲﾝﾀｰﾛｯｸ信号
LD MR14101               ; ﾒｲﾝへﾜｰｸ取出し可
ANB MR12600              ; COM_下流装置_ダミー
OUT B2013                ; ﾒｲﾝへﾜｰｸ取出し可
LD MR16102               ; ﾒｲﾝへ動作開始通知
ANB MR12600              ; COM_下流装置_ダミー
OUT B2014                ; ﾒｲﾝへ動作開始通知
LD CR2003                ; 常時OFF
ANB MR12600              ; COM_下流装置_ダミー
OUT B2015                ; ﾒｲﾝへ動作完了通知
LDB R44310               ; *Group1　安全ｶﾊﾞｰﾛｯｸ
ANB MR12600              ; COM_下流装置_ダミー
OUT B2019                ; ﾒｲﾝへPAUSE要求
LD MR12202               ; COM_装置PAUSE中_下流へ
ANB MR12600              ; COM_下流装置_ダミー
OUT B201A                ; ﾒｲﾝへPAUSE許可
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB MR12600              ; COM_下流装置_ダミー
OUT B201B                ; ﾒｲﾝへｽﾃｰﾀｽ(AUTO)
LD R46101                ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB MR12600              ; COM_下流装置_ダミー
OUT B201C                ; ﾒｲﾝへｽﾃｰﾀｽ(HOME)
LD R46102                ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB MR12600              ; COM_下流装置_ダミー
OUT B201D                ; ﾒｲﾝへｽﾃｰﾀｽ(MAINTE)
LDB R007                 ; 側面扉閉じ
ANB MR12600              ; COM_下流装置_ダミー
OUT B201E                ; ﾒｲﾝへｽﾃｰﾀｽ(PAUSE)
;<h1/>保守管理_FLG、機能切替_FLG
LD CR2003                ; 常時OFF
OUT MR12300              ; COM_Tm_覚え(常時OFF)
OUT MR12301              ; COM_2_覚え(常時OFF)
OUT MR12302              ; COM_3_覚え(常時OFF)
OUT MR12303              ; COM_4_覚え(常時OFF)
BLD DM2000 #0            ; _動作ﾊﾟﾗﾒｰﾀ
MPS
OUT MR12600              ; COM_下流装置_ダミー
MPP
AND CR2008               ; 運転開始時1ｽｷｬﾝON
MOV #0 DM20020           ; COM_下流装置_ダミー
LD<> DM20021 #0          ; 無効ﾌﾗｸﾞ_2
OUT MR12601              ; COM_無効ﾌﾗｸﾞ_2
LD<> DM20022 #0          ; 無効ﾌﾗｸﾞ_3
OUT MR12602              ; COM_無効ﾌﾗｸﾞ_3
LD<> DM20023 #0          ; 無効ﾌﾗｸﾞ_4
OUT MR12603              ; COM_無効ﾌﾗｸﾞ_4
;<h1/>ﾃｽﾄﾄﾗｲ
;'ﾍｯﾄﾞｻﾌﾞ_ﾊﾟﾚﾀｲｽﾞPos生成
;DM22002.S = (DM21090.S -1) / 2
;DM22003.S = DM21090.S + DM22002.S
;DM22004.S = DM22002.S MOD 2
;
;DM21092.S = DM22003.S + DM22004.S + 10
;
;'ﾍｯﾄﾞｻﾌﾞ_ﾊﾟﾚﾀｲｽﾞPos生成
;
;DM22002.S = (DM21090.S -1) / 2
;
LD CR2002                ; 常時ON
LDA.S DM21090            ; ﾃｽﾄ用_削除可能
CON
EXT.S
CON
SUB.L +1
CON
EXT.L
CON
DIV.L +2
CON
STA.S DM22002
;DM22003.S = DM21090.S + DM22002.S
;
LD CR2002                ; 常時ON
LDA.S DM22002
CON
EXT.S
CON
STA.L @VM0
CON
LDA.S DM21090            ; ﾃｽﾄ用_削除可能
CON
EXT.S
CON
ADD.L @VM0
CON
STA.S DM22003
;DM22004.S = DM22002.S MOD 2
;
LD CR2002                ; 常時ON
LDA.S DM22002
CON
EXT.S
CON
EXT.L
CON
DIV.L +2
CON
LDA.L TM2
CON
STA.S DM22004
;DM21092.S = DM22003.S + DM22004.S + 10
;
LD CR2002                ; 常時ON
LDA.S DM22004
CON
EXT.S
CON
STA.L @VM2
CON
LDA.S DM22003
CON
EXT.S
CON
ADD.L @VM2
CON
ADD.L +10
CON
STA.S DM21092            ; ﾃｽﾄ用_削除可能
;
;ｼﾐｭﾚｰﾀﾓｰﾄﾞ時ﾕｰｻﾞｰI/O無効用
;↓↓ Please not delete.
LABEL #0
END
ENDH
