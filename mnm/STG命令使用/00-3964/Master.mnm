DEVICE:51
;MODULE:Master
;MODULE_TYPE:0
;<h1/>ＣＰＵ起動時、モジュール起動
;Ｍｏｄｕｌｅ  Ｓｔａｒｔｓ  ａｔ  ｔｈｅ  Ｔｉｍｅ  ｏｆ  ＣＰＵ  Ｓｔａｒｔｉｎｇ
LD CR2002                ; 常時ON
AND CR2007               ; 運転開始時1ｽｷｬﾝOFF
ANB R50000               ; E.STOP
ANB R55000               ; TRAP
TMR #200 #10             ; 起動遅延
MDSTRT TANK
MDSTRT WATER
;<h1/>スタートスイッチ管理
;Ｍａｎａｇｅｍｅｎｔ  ｏｆ  Ｓｔａｒｔ  ＳＷ
LD R1000                 ; START1sw
SHOT #30 @MR003          ; ｽﾀｰﾄ1 ON
LD R1001                 ; START2sw
SHOT #30 @MR004          ; ｽﾀｰﾄ2 ON
LD @MR003                ; ｽﾀｰﾄ1 ON
OR CR2002                ; 常時ON
AND @MR004               ; ｽﾀｰﾄ2 ON
AND _TANK
AND _WATER
DIFU @MR000              ; ｽﾀｰﾄSW ON PLS
LD @MR000                ; ｽﾀｰﾄSW ON PLS
OR @MR001                ; ｽﾀｰﾄSW ON
ANB @MR002               ; ｽﾀｰﾄSW OFF
OUT @MR001               ; ｽﾀｰﾄSW ON
LD @MR001                ; ｽﾀｰﾄSW ON
ANB R1000                ; START1sw
ANB R1001                ; START2sw
OUT @MR002               ; ｽﾀｰﾄSW OFF
LD @MR001                ; ｽﾀｰﾄSW ON
DIFD R50100              ; ｽﾀｰﾄSW ON_PLS
LDB R1004                ; Area Sensor
AND R1000                ; START1sw
AND R1001                ; START2sw
ANB R50000               ; E.STOP
ANB R55000               ; TRAP
ANB R50006               ; 異常発生中
LD T200                  ; 起動遅延
ANB MR1000               ; ﾌﾞｻﾞｰON
ANB R50007               ; 原点復帰完了
LD @MR300                ; ﾒｲﾝ画面表示_英語
OR @MR306                ; ﾒｲﾝ画面表示_日本語
OR @MR307                ; ﾒｲﾝ画面表示_中国語
AND LR200                ; 自動ﾓｰﾄﾞ 選択
AND LR1000               ; 自動 ﾊﾟﾗﾒｰﾀ_0
AND R50007               ; 原点復帰完了
ANB @MR305               ; 自動終了
ORL
ANL
OUT R50107               ; ﾌﾞｻﾞｰ要求
;<h1/>ＨＯＭＥ
LDB R50007               ; 原点復帰完了
ANB R50001               ; 自動中
ANB R50002               ; 手動中
OUT @MR100               ; 原点復帰条件
LD @MR100                ; 原点復帰条件
AND R50100               ; ｽﾀｰﾄSW ON_PLS
AND R1004                ; Area Sensor
OR R50003                ; 原点復帰中
AND T200                 ; 起動遅延
ANB R50000               ; E.STOP
ANB R50006               ; 異常発生中
ANB R55000               ; TRAP
ANB MR1000               ; ﾌﾞｻﾞｰON
ANB R50007               ; 原点復帰完了
OUT R50003               ; 原点復帰中
LD R50003                ; 原点復帰中
DIFU @MR101              ; 原点復帰ｽﾀｰﾄPLS
LD @MR101                ; 原点復帰ｽﾀｰﾄPLS
OR @MR102                ; 原点復帰ｽﾀｰﾄ確認
AND R50003               ; 原点復帰中
ANB @MR103               ; 各ﾀｽｸ動作中
OUT @MR102               ; 原点復帰ｽﾀｰﾄ確認
LD @MR102                ; 原点復帰ｽﾀｰﾄ確認
LD R50200                ; ﾀﾝｸﾕﾆｯﾄ 動作中
OR R50201                ; WATER UT 自動中
ANL
OR @MR103                ; 各ﾀｽｸ動作中
AND R50003               ; 原点復帰中
ANB @MR104               ; 原点復帰終了
OUT @MR103               ; 各ﾀｽｸ動作中
LD @MR103                ; 各ﾀｽｸ動作中
ANB R50200               ; ﾀﾝｸﾕﾆｯﾄ 動作中
ANB R50201               ; WATER UT 自動中
SET R50007               ; 原点復帰完了
CON
OUT @MR104               ; 原点復帰終了
;<h1/>モード選択
;Ｍｏｄｅ  Ｓｅｌｅｃｔｉｏｎ
LD R50101                ; 自動ﾓｰﾄﾞ
AND R50005               ; ｻｲｸﾙ停止
DIFU @MR200              ; 自動ﾓｰﾄﾞ 選択PLS
LD @MR200                ; 自動ﾓｰﾄﾞ 選択PLS
SET LR200                ; 自動ﾓｰﾄﾞ 選択
CON
RES LR201                ; 手動ﾓｰﾄﾞ 選択
LD R50102                ; 手動ﾓｰﾄﾞ
AND R50005               ; ｻｲｸﾙ停止
ANB MR1010               ; ﾀﾝｸ1 水戻中
ANB MR1013               ; ﾀﾝｸ2 水戻中
DIFU @MR201              ; 手動ﾓｰﾄﾞ 選択PLS
LD @MR201                ; 手動ﾓｰﾄﾞ 選択PLS
SET LR201                ; 手動ﾓｰﾄﾞ 選択
CON
RES LR200                ; 自動ﾓｰﾄﾞ 選択
;ＡＵＴＯ
LD CR2002                ; 常時ON
LDA DM3000               ; 表示中ﾍﾟｰｼﾞNo.
CON
CMP #2
CON
AND CR2010               ; 演算結果がｾﾞﾛ
OUT @MR300               ; ﾒｲﾝ画面表示_英語
LD CR2002                ; 常時ON
LDA DM3000               ; 表示中ﾍﾟｰｼﾞNo.
CON
CMP #102
CON
AND CR2010               ; 演算結果がｾﾞﾛ
OUT @MR306               ; ﾒｲﾝ画面表示_日本語
LD CR2002                ; 常時ON
LDA DM3000               ; 表示中ﾍﾟｰｼﾞNo.
CON
CMP #202
CON
AND CR2010               ; 演算結果がｾﾞﾛ
OUT @MR307               ; ﾒｲﾝ画面表示_中国語
LD @MR300                ; ﾒｲﾝ画面表示_英語
OR @MR306                ; ﾒｲﾝ画面表示_日本語
OR @MR307                ; ﾒｲﾝ画面表示_中国語
AND LR200                ; 自動ﾓｰﾄﾞ 選択
AND LR1000               ; 自動 ﾊﾟﾗﾒｰﾀ_0
AND R50100               ; ｽﾀｰﾄSW ON_PLS
AND R1004                ; Area Sensor
DIFU @MR301              ; 自動ｽﾀｰﾄ 起動PLS
LD @MR301                ; 自動ｽﾀｰﾄ 起動PLS
OR R50001                ; 自動中
ANB R50000               ; E.STOP
ANB R55000               ; TRAP
LDB R50006               ; 異常発生中
OR CR2002                ; 常時ON
ANL
AND R50007               ; 原点復帰完了
ANB @MR305               ; 自動終了
ANB R55005               ; ﾀﾝｸ 水無ｴﾗｰ
OUT R50001               ; 自動中
LD R50001                ; 自動中
DIFU @MR302              ; 自動ｽﾀｰﾄPLS
LD @MR302                ; 自動ｽﾀｰﾄPLS
OR @MR303                ; 自動ｽﾀｰﾄ 確認
AND R50001               ; 自動中
ANB @MR304               ; 各ﾀｽｸ動作中
OUT @MR303               ; 自動ｽﾀｰﾄ 確認
LD @MR303                ; 自動ｽﾀｰﾄ 確認
LD R50200                ; ﾀﾝｸﾕﾆｯﾄ 動作中
OR R50201                ; WATER UT 自動中
ANL
OR @MR304                ; 各ﾀｽｸ動作中
AND R50001               ; 自動中
ANB @MR305               ; 自動終了
OUT @MR304               ; 各ﾀｽｸ動作中
LD @MR304                ; 各ﾀｽｸ動作中
ANB R50200               ; ﾀﾝｸﾕﾆｯﾄ 動作中
ANB R50201               ; WATER UT 自動中
OUT @MR305               ; 自動終了
;<h1/>ＭＡＮＵ
LD @MR300                ; ﾒｲﾝ画面表示_英語
OR @MR306                ; ﾒｲﾝ画面表示_日本語
OR @MR307                ; ﾒｲﾝ画面表示_中国語
AND R50100               ; ｽﾀｰﾄSW ON_PLS
AND LR201                ; 手動ﾓｰﾄﾞ 選択
DIFU @MR401              ; 手動ｽﾀｰﾄ 起動PLS
LD @MR401                ; 手動ｽﾀｰﾄ 起動PLS
OR R50002                ; 手動中
ANB R50000               ; E.STOP
ANB R55000               ; TRAP
ANB R50006               ; 異常発生中
AND R50007               ; 原点復帰完了
ANB @MR405               ; 手動終了
OUT R50002               ; 手動中
LD R50002                ; 手動中
DIFU @MR402              ; 手動ｽﾀｰﾄPLS
LD @MR402                ; 手動ｽﾀｰﾄPLS
OR @MR403                ; 手動ｽﾀｰﾄ 確認
AND R50002               ; 手動中
ANB @MR404               ; 各ﾀｽｸ動作中
OUT @MR403               ; 手動ｽﾀｰﾄ 確認
LD @MR403                ; 手動ｽﾀｰﾄ 確認
LD R50200                ; ﾀﾝｸﾕﾆｯﾄ 動作中
OR R50201                ; WATER UT 自動中
ANL
OR @MR404                ; 各ﾀｽｸ動作中
AND R50002               ; 手動中
ANB @MR405               ; 手動終了
OUT @MR404               ; 各ﾀｽｸ動作中
LD @MR404                ; 各ﾀｽｸ動作中
ANB R50200               ; ﾀﾝｸﾕﾆｯﾄ 動作中
ANB R50201               ; WATER UT 自動中
OUT @MR405               ; 手動終了
;<h1/>動作中
;Ｄｕｒｉｎｇ  Ｏｐｅｒａｔｉｏｎ
LD R50001                ; 自動中
OR R50002                ; 手動中
OR R50003                ; 原点復帰中
OUT R50004               ; 動作中
LD R50006                ; 異常発生中
LDB MR200                ; ｼﾘﾝﾀﾞｰｴﾗｰ中
OR CR2002                ; 常時ON
ANL
ANB MR201                ; ﾜｰｸｾｯﾄｴﾗｰ中
OUT R50105               ; ｴﾗｰ出力 OFF
END
ENDH
