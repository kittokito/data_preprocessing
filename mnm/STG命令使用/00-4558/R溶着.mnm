DEVICE:53
;MODULE:R溶着
;MODULE_TYPE:0
;非常停止
;Emergency Stop
LD R50000                ; 即停止
OR R50900                ; TRAP
OR R50010                ; 非常停止
ZRES @MR002 @MR1915
LDB R50300               ; PAUSE中
ANB R50114               ; R側COF接合部ｴﾗｰ中
ANB R50108               ; ｴﾗｰ発生中
OUT @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
LD R53109                ; Line-B（右） 溶着動作要求
OR R53209                ; Line-B（右） 溶着動作要求
ANB R53211               ; R側溶着ｻｲｸﾙ動作中
RES @MR700               ; R溶着温度　適温外
CON
SET @MR100               ; 溶着動作開始
CON
RES R53109               ; Line-B（右） 溶着動作要求
CON
RES R53209               ; Line-B（右） 溶着動作要求
STG @MR100               ; 溶着動作開始
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
MPS
LD R1006                 ; R_HEATER READY
ANB R1007                ; R_HEATER ERROR
ANL
DW #0 DM15002
CON
SET R53211               ; R側溶着ｻｲｸﾙ動作中
CON
RES R53109               ; Line-B（右） 溶着動作要求
CON
RES R53209               ; Line-B（右） 溶着動作要求
CON
JMP @MR101
MPP
LDB R1006                ; R_HEATER READY
OR R1007                 ; R_HEATER ERROR
ANL
DW #0 DM15002
CON
RES R53209               ; Line-B（右） 溶着動作要求
CON
RES R53109               ; Line-B（右） 溶着動作要求
CON
RES R53209               ; Line-B（右） 溶着動作要求
CON
SET MR2801               ; R側ﾊﾟﾙｽﾋｰﾀ異常
CON
ENDS
STG @MR101
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
SET MR6510               ; R_ﾃｰﾌﾟ上下 上昇端
CON
ANB R4601                ; R_ﾃｰﾌﾟ上昇端
AND R4600                ; R_ﾃｰﾌﾟ下降端
JMP @MR102
STG @MR102
DW.D #0 DM580            ; R 加熱時間
CON
DW.D #0 DM584            ; R 冷却時間
CON
DW #2 DM550              ; R側　RB 指令ﾎﾟｼﾞｼｮﾝNo.
CON
SET MR6512               ; R_段差ﾛｰﾗﾛｯｸ 前進端
CON
SET MR1400               ; R溶着RBｽﾀｰﾄ
CON
JMP @MR103
STG @MR103
AND R4514                ; R_段差ﾛｰﾗﾛｯｸ 前進端
AND MR1401               ; R溶着RB移動完了
AND= DM551 #2            ; R側　RB 完了ﾎﾟｼﾞｼｮﾝNo.
RES MR1401               ; R溶着RB移動完了
CON
JMP @MR104
STG @MR104
AND R1006                ; R_HEATER READY
ANB R1007                ; R_HEATER ERROR
SET @MR105               ; 一時停止不可
CON
JMP @MR106
STG @MR106
SET MR2004               ; R_HEATER ACTUATE
CON
JMP @MR107
STG @MR107
AND R1005                ; R_HEATER ON
RES MR2004               ; R_HEATER ACTUATE
CON
SET MR21104              ; 圧着開始点
CON
JMP @MR108
STG @MR108
ANB R1005                ; R_HEATER ON
SET MR21105              ; R 圧着中間点
CON
SET @MR210               ; 加熱温度ﾁｪｯｸ
CON
SET MR6500               ; R_冷却ｴｱﾌﾞﾛｰ
CON
JMP @MR109
STG @MR109
AND R1008                ; R_HEATER SOLOD POINT1
SET MR21106              ; R 圧着終了点
CON
RES MR6500               ; R_冷却ｴｱﾌﾞﾛｰ
CON
RES @MR105               ; 一時停止不可
CON
JMP @MR110
STG @MR110
DW #3 DM550              ; R側　RB 指令ﾎﾟｼﾞｼｮﾝNo.
CON
SET MR1400               ; R溶着RBｽﾀｰﾄ
CON
JMP @MR111
STG @MR111
AND MR1401               ; R溶着RB移動完了
AND= DM551 #3            ; R側　RB 完了ﾎﾟｼﾞｼｮﾝNo.
RES MR21105              ; R 圧着中間点
CON
RES MR21106              ; R 圧着終了点
CON
RES MR1401               ; R溶着RB移動完了
CON
JMP @MR112
STG @MR112
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
RES MR6510               ; R_ﾃｰﾌﾟ上下 上昇端
CON
ANB R4600                ; R_ﾃｰﾌﾟ下降端
AND R4601                ; R_ﾃｰﾌﾟ上昇端
JMP @MR113
STG @MR113
AND @MR010               ; ｺﾝﾍﾞｱ 一時停止ｴﾗｰ無し
RES MR6512               ; R_段差ﾛｰﾗﾛｯｸ 前進端
CON
ANB R4514                ; R_段差ﾛｰﾗﾛｯｸ 前進端
AND R4515                ; R_段差ﾛｰﾗﾛｯｸ 後退端
MPS
AND R50011               ; AUTO MODE
MPS
AND>= DM252 DM102
SET R53310               ; R側ﾌｨﾙﾑ送り開始
CON
DW #1 DM252
CON
SET R53111               ; Line-B（右） 溶着動作完了
CON
JMP @MR114
MPP
AND< DM252 DM102
@INC DM252
CON
SET R53111               ; Line-B（右） 溶着動作完了
CON
JMP @MR115
MPP
ANB R50011               ; AUTO MODE
SET R53111               ; Line-B（右） 溶着動作完了
CON
JMP @MR200
STG @MR114
AND R53311               ; R側ﾌｨﾙﾑ巻取り完了
@INC.D DM356             ; R側生産数
CON
RES R53311               ; R側ﾌｨﾙﾑ巻取り完了
CON
RES R53211               ; R側溶着ｻｲｸﾙ動作中
CON
JMP @MR201
STG @MR115
@INC.D DM356             ; R側生産数
CON
RES R53311               ; R側ﾌｨﾙﾑ巻取り完了
CON
RES R53211               ; R側溶着ｻｲｸﾙ動作中
CON
JMP @MR201
STG @MR200
RES R53311               ; R側ﾌｨﾙﾑ巻取り完了
CON
RES R53211               ; R側溶着ｻｲｸﾙ動作中
CON
JMP @MR201
STG @MR201
MPS
ANB @MR700               ; R溶着温度　適温外
ENDS
MPP
AND @MR700               ; R溶着温度　適温外
JMP @MR202
STG @MR202
SET MR2015               ; ﾊﾟﾄﾗｲﾄ_BZ
CON
DW #9 DM514
CON
TMR #291 #10
CON
AND T291
JMP @MR203
STG @MR203
RES MR2015               ; ﾊﾟﾄﾗｲﾄ_BZ
CON
RES R53311               ; R側ﾌｨﾙﾑ巻取り完了
CON
RES R53211               ; R側溶着ｻｲｸﾙ動作中
CON
ENDS
LDP @MR210               ; 加熱温度ﾁｪｯｸ
MPS
LD< DM654 DM588          ; R側温度監視上限  R ﾋｰﾀ温度
OR> DM656 DM588          ; R側温度監視下限  R ﾋｰﾀ温度
ANL
SET @MR700               ; R溶着温度　適温外
MOV DM588 DM476          ; R ﾋｰﾀ温度
MPP
RES @MR210               ; 加熱温度ﾁｪｯｸ
LD @MR105                ; 一時停止不可
OUT R51111               ; 予備 PACK
LD R53211                ; R側溶着ｻｲｸﾙ動作中
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
@INC DM15002
LDF R53211               ; R側溶着ｻｲｸﾙ動作中
MOV DM15002 DM15200
DW #0 DM15002
LD R53211                ; R側溶着ｻｲｸﾙ動作中
AND R1005                ; R_HEATER ON
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
@INC DM15040
LD R53211                ; R側溶着ｻｲｸﾙ動作中
ANF R1005                ; R_HEATER ON
MOV DM15040 DM15202
DW #0 DM15040
LD R53211                ; R側溶着ｻｲｸﾙ動作中
AND MR6500               ; R_冷却ｴｱﾌﾞﾛｰ
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
@INC DM15042
LD R53211                ; R側溶着ｻｲｸﾙ動作中
ANF MR6500               ; R_冷却ｴｱﾌﾞﾛｰ
MOV DM15042 DM15204
DW #0 DM15042
END
ENDH
