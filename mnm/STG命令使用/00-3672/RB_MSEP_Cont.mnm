DEVICE:53
;MODULE:RB_MSEP_Cont
;MODULE_TYPE:0
;SCRIPT_TYPE:
;OneSystem Master-Module
;
;-----------------------------------------
;ModuleName	:	RB_MSEP_Cont
;ModuleType	:	Master Module
;Function	:	Robot Control
;-----------------------------------------
;
;Emergency Stop
LDP R46104               ; _非常停止中　ﾓｰﾄﾞﾌﾗｸﾞ
ZRES @R000 @R1015
CON
ZRES @MR004 @MR3715
LD CR2008                ; 運転開始時1ｽｷｬﾝON
BSET DM10771 #4          ; MSEP Axis-7 制御信号
CON
BSET DM10763 #4          ; MSEP Axis-6 制御信号
CON
BSET DM10755 #4          ; MSEP Axis-5 制御信号
CON
BSET DM10747 #4          ; MSEP Axis-4 制御信号
CON
BSET DM10739 #4          ; MSEP Axis-3 制御信号
CON
BSET DM10731 #4          ; MSEP Axis-2 制御信号
CON
BSET DM10723 #4          ; MSEP Axis-1 制御信号
CON
BSET DM10715 #4          ; MSEP Axis-0 制御信号
CON
SET @MR002               ; 運転開始時ｳｪｲﾄ
LD @MR002                ; 運転開始時ｳｪｲﾄ
TMR @0 #20
CON
AND @T0
@SET @MR003              ; MSEP動作可
LD CR2008                ; 運転開始時1ｽｷｬﾝON
SET MR605                ; 給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝｻｰﾎﾞｵﾝ ﾗﾝﾌﾟ
CON
SET MR3304               ; 除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝｻｰﾎﾞｵﾝ ﾗﾝﾌﾟ
CON
SET MR2904               ; 搬送Z軸RBｻｰﾎﾞｵﾝ ﾗﾝﾌﾟ
CON
SET MR3103               ; 反転RBｻｰﾎﾞｵﾝ ﾗﾝﾌﾟ
CON
SET MR3109               ; 搬送θ軸RBｻｰﾎﾞｵﾝ ﾗﾝﾌﾟ
LD CR2002                ; 常時ON
FLIK #30 #30 @MR000      ; ﾌﾘｯｶ
LD CR2002                ; 常時ON
DW.D #10 DM10710         ; MSEP Axis-0 位置決め幅（下位8bit
CON
DW.D #10 DM10718         ; MSEP Axis-1 位置決め幅（下位8bit
CON
DW.D #10 DM10726         ; MSEP Axis-2 位置決め幅（下位8bit
CON
DW.D #10 DM10734         ; MSEP Axis-3 位置決め幅（下位8bit
CON
DW.D #10 DM10742         ; MSEP Axis-4 位置決め幅（下位8bit
CON
DW.D #10 DM10750         ; MSEP Axis-5 位置決め幅（下位8bit
CON
DW.D #10 DM10758         ; MSEP Axis-6 位置決め幅（下位8bit
CON
DW.D #10 DM10766         ; MSEP Axis-7 位置決め幅（下位8bit
LD CR2002                ; 常時ON
DW #30 DM10713           ; MSEP Axis-0 加減速度
CON
DW #30 DM10721           ; MSEP Axis-1 加減速度
CON
DW #30 DM10729           ; MSEP Axis-2 加減速度
CON
DW #30 DM10737           ; MSEP Axis-3 加減速度
CON
DW #30 DM10745           ; MSEP Axis-4 加減速度
CON
DW #30 DM10753           ; MSEP Axis-5 加減速度
CON
DW #30 DM10761           ; MSEP Axis-6 加減速度
CON
DW #30 DM10769           ; MSEP Axis-7 加減速度
;<h1/>MSEP Gateway Check
LD CR2002                ; 常時ON
PMOV DM10500 #0 DM10900 #0 #7;MSEP ｹﾞｰﾄｳｪｲ状態0  MSEP Gateway Eoor
LD CR2003                ; 常時OFF
BAND DM10700 #15         ; MSEP ｹﾞｰﾄｳｪｲ制御1
MPS
BANB DM10500 #15         ; MSEP ｹﾞｰﾄｳｪｲ状態0
OUT MR6200               ; MSEPｹﾞｰﾄｳｪｲ異常
MRD
BAND DM10500 #13         ; MSEP ｹﾞｰﾄｳｪｲ状態0
OUT MR6201               ; MSEPｹﾞｰﾄｳｪｲ通信異常
MPP
BLD DM10500 #15          ; MSEP ｹﾞｰﾄｳｪｲ状態0
BANB DM10500 #13         ; MSEP ｹﾞｰﾄｳｪｲ状態0
ANL
MPS
BAND DM10500 #10         ; MSEP ｹﾞｰﾄｳｪｲ状態0
OUT MR6202               ; MSEPｹﾞｰﾄｳｪｲ軽度異常
MPP
BAND DM10500 #11         ; MSEP ｹﾞｰﾄｳｪｲ状態0
OUT MR6203               ; MSEPｹﾞｰﾄｳｪｲ重度異常
LDP MR6200               ; MSEPｹﾞｰﾄｳｪｲ異常
ANB R39004               ; ｴﾗｰ中
SET @MR007               ; RB5ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #96 @DM1
CON
DW #0 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
LDA DM10900              ; MSEP Gateway Eoor
CON
STA DM20030              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET @R200
LDP MR6201               ; MSEPｹﾞｰﾄｳｪｲ通信異常
ANB R39004               ; ｴﾗｰ中
SET @MR007               ; RB5ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #97 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
LDA DM10900              ; MSEP Gateway Eoor
CON
STA DM20030              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET @R200
LDP MR6202               ; MSEPｹﾞｰﾄｳｪｲ軽度異常
ANB R39004               ; ｴﾗｰ中
SET @MR007               ; RB5ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #98 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
LDA DM10900              ; MSEP Gateway Eoor
CON
STA DM20030              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET @R200
LDP MR6203               ; MSEPｹﾞｰﾄｳｪｲ重度異常
ANB R39004               ; ｴﾗｰ中
SET @MR007               ; RB5ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #99 @DM1
CON
DW #0 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
LDA DM10900              ; MSEP Gateway Eoor
CON
STA DM20030              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET @R200
STG @R200
AND @R101
RES @R101
CON
DW #0 DM60009
CON
AND @R105                ; SW1
DW #0 DM20030            ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET MR18100              ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @R201
STG @R201
TMR #1936 #10
CON
AND T1936
RES @R100                ; MSEP_ｱﾗｰﾑ発生
CON
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
RES @MR007               ; RB5ｱﾗｰﾑON
CON
RES R39004               ; ｴﾗｰ中
CON
ENDS
;<h1/>RB5 (反転) MSEP-Axis6
BLD DM10563 #3           ; MSEP Axis-6 状態信号
OUT @MR100               ; MSEP_Axis6 ｱﾗｰﾑ発生
LDP MR3103               ; 反転RBｻｰﾎﾞｵﾝ ﾗﾝﾌﾟ
ORP MR605                ; 給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝｻｰﾎﾞｵﾝ ﾗﾝﾌﾟ
BSET DM10763 #4          ; MSEP Axis-6 制御信号
LDF MR3103               ; 反転RBｻｰﾎﾞｵﾝ ﾗﾝﾌﾟ
ORF MR605                ; 給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝｻｰﾎﾞｵﾝ ﾗﾝﾌﾟ
BRES DM10763 #4          ; MSEP Axis-6 制御信号
BLD DM10763 #4           ; MSEP Axis-6 制御信号
OUT MR17704              ; 反転軸ｻｰﾎﾞON表示
CON
OUT MR17705              ; 給材ﾊﾞｯｸｱｯﾌﾟ軸ｻｰﾎﾞON表示
BLD DM10563 #4           ; MSEP Axis-6 状態信号
BAND DM10563 #14         ; MSEP Axis-6 状態信号
BANB DM10563 #15         ; MSEP Axis-6 状態信号
OUT @MR101               ; MSEP_Axis6 移動可
BLD DM10563 #0           ; MSEP Axis-6 状態信号
OUT MR18015              ; RB5:位置決め完了
LDB R46114               ; _装置原点復帰待ち
BAND DM10563 #3          ; MSEP Axis-6 状態信号
ANB @MR007               ; RB5ｱﾗｰﾑON
ANB R46114               ; _装置原点復帰待ち
OUT MR18013              ; RB5:ｱﾗｰﾑ出力
LDP MR18013              ; RB5:ｱﾗｰﾑ出力
ANB R39004               ; ｴﾗｰ中
SET @MR007               ; RB5ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #15 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
LDA DM10562              ; MSEP Axis-6 ｱﾗｰﾑｺｰﾄﾞ
CON
STA DM20030              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET @R000
STG @R000
AND @R101
RES @R101
CON
DW #0 DM60009
CON
AND @R105                ; SW1
DW #0 DM20030            ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET MR18100              ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @R001
STG @R001
TMR #1930 #10
CON
AND T1930
RES @R100                ; MSEP_ｱﾗｰﾑ発生
CON
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
RES @MR007               ; RB5ｱﾗｰﾑON
CON
RES R39004               ; ｴﾗｰ中
CON
ENDS
;RB5 (反転) MSEP-Axis6　原点復帰開始
LD MR3004                ; 反転RB原点復帰 SW
OR MR506                 ; 給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ 原点復帰 SW
OR MR18004               ; RB5:HOME
AND<= DM10548 #10000     ; MSEP Axis-5 現在位置（下位8bit）
ANB @MR1001              ; 原点復帰中
AND @MR101               ; MSEP_Axis6 移動可
RES MR609                ; 給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ 原点復帰済 ﾗﾝﾌﾟ
CON
RES MR3112               ; 反転RB原点復帰済み ﾗﾝﾌﾟ
CON
RES MR18002              ; RB5:原点復帰完了
CON
SET @MR1001              ; 原点復帰中
CON
RES MR3004               ; 反転RB原点復帰 SW
CON
RES MR506                ; 給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ 原点復帰 SW
CON
RES MR18004              ; RB5:HOME
CON
SET @MR1000              ; 原点復帰開始
STG @MR1000              ; 原点復帰開始
ANB @MR100               ; MSEP_Axis6 ｱﾗｰﾑ発生
AND @MR003               ; MSEP動作可
BRES DM10763 #0          ; MSEP Axis-6 制御信号
CON
BRES DM10763 #2          ; MSEP Axis-6 制御信号
CON
BRES DM10763 #3          ; MSEP Axis-6 制御信号
CON
BSET DM10763 #4          ; MSEP Axis-6 制御信号
CON
JMP @MR1003
STG @MR1003
ANB @MR100               ; MSEP_Axis6 ｱﾗｰﾑ発生
MPS
LD @MR101                ; MSEP_Axis6 移動可
BANB DM10563 #2          ; MSEP Axis-6 状態信号
ANL
JMP @MR1004
MPP
ANB @MR101               ; MSEP_Axis6 移動可
TMR #880 #20             ; MSEP_Axis6_ｳｪｲﾄﾀｲﾏ
CON
AND T880                 ; MSEP_Axis6_ｳｪｲﾄﾀｲﾏ
RES @MR1001              ; 原点復帰中
CON
BRES DM10763 #4          ; MSEP Axis-6 制御信号
CON
SET @R500                ; MSEP_Axis2 ｱﾗｰﾑ発生
CON
ENDS
STG @MR1004
ANB @MR100               ; MSEP_Axis6 ｱﾗｰﾑ発生
BSET DM10763 #1          ; MSEP Axis-6 制御信号
CON
JMP @MR1005
STG @MR1005
ANB @MR100               ; MSEP_Axis6 ｱﾗｰﾑ発生
MPS
BANB DM10563 #0          ; MSEP Axis-6 状態信号
BRES DM10763 #1          ; MSEP Axis-6 制御信号
CON
JMP @MR1006
MPP
BAND DM10563 #0          ; MSEP Axis-6 状態信号
TMR #881 #300            ; MSEP_Axis6_ｳｪｲﾄﾀｲﾏ
CON
AND T881                 ; MSEP_Axis6_ｳｪｲﾄﾀｲﾏ
RES @MR1001              ; 原点復帰中
CON
BRES DM10763 #4          ; MSEP Axis-6 制御信号
CON
SET @R501                ; MSEP_Axis2 ｱﾗｰﾑ発生
CON
ENDS
STG @MR1006
ANB @MR100               ; MSEP_Axis6 ｱﾗｰﾑ発生
MPS
BLDB DM10563 #2          ; MSEP Axis-6 状態信号
BAND DM10563 #0          ; MSEP Axis-6 状態信号
ANL
JMP @MR1007
MPP
BANB DM10563 #0          ; MSEP Axis-6 状態信号
TMR #882 #300            ; MSEP_Axis6_ｳｪｲﾄﾀｲﾏ
CON
AND T882                 ; MSEP_Axis6_ｳｪｲﾄﾀｲﾏ
RES @MR1001              ; 原点復帰中
CON
BRES DM10763 #4          ; MSEP Axis-6 制御信号
CON
SET @R502                ; MSEP_Axis2 ｱﾗｰﾑ発生
CON
ENDS
STG @MR1007
ANB @MR100               ; MSEP_Axis6 ｱﾗｰﾑ発生
DW.D #0 DM11002          ; RB5 現在位置1
CON
DW #0 DM11004            ; RB5 現在ﾎﾟｼﾞｼｮﾝ番号
CON
JMP @MR1008
STG @MR1008
RES @MR1001              ; 原点復帰中
CON
SET MR609                ; 給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ 原点復帰済 ﾗﾝﾌﾟ
CON
SET MR3112               ; 反転RB原点復帰済み ﾗﾝﾌﾟ
CON
SET MR18002              ; RB5:原点復帰完了
CON
ENDS
LD @R500                 ; MSEP_Axis2 ｱﾗｰﾑ発生
ANB MR18013              ; RB5:ｱﾗｰﾑ出力
ANB R39004               ; ｴﾗｰ中
SET @MR007               ; RB5ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #85 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
SET @R510                ; MSEP_Axis2 ｱﾗｰﾑ発生
LD @R501                 ; MSEP_Axis2 ｱﾗｰﾑ発生
OR @R502                 ; MSEP_Axis2 ｱﾗｰﾑ発生
ANB MR18013              ; RB5:ｱﾗｰﾑ出力
ANB R39004               ; ｴﾗｰ中
SET @MR007               ; RB5ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #85 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
SET @R510                ; MSEP_Axis2 ｱﾗｰﾑ発生
STG @R510                ; MSEP_Axis2 ｱﾗｰﾑ発生
ZRES @R500 @R502         ; MSEP_Axis2 ｱﾗｰﾑ発生  MSEP_Axis2 ｱﾗｰﾑ発生
CON
AND @R101
RES @R101
CON
DW #0 DM60009
CON
AND @R105                ; SW1
SET MR18100              ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @R511
STG @R511
TMR #1950 #10
CON
AND T1950
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
RES @R100                ; MSEP_ｱﾗｰﾑ発生
CON
RES R39004               ; ｴﾗｰ中
CON
SET @MR1000              ; 原点復帰開始
CON
RES @MR007               ; RB5ｱﾗｰﾑON
CON
ENDS
;RB5 (反転) MSEP-Axis6　ﾎﾟｲﾝﾄﾃﾞｰﾀｾｯﾄ→移動
LDP MR18005              ; RB5:反転軸　MOVE
ANB @MR2001              ; 動作中
RES MR18005              ; RB5:反転軸　MOVE
CON
SET MR4912               ; MOVE SW 表示
CON
SET @MR2001              ; 動作中
CON
SET @MR2000              ; 動作開始
STG @MR2000              ; 動作開始
ANB @MR100               ; MSEP_Axis6 ｱﾗｰﾑ発生
MPS
LD @MR101                ; MSEP_Axis6 移動可
BANB DM10563 #2          ; MSEP Axis-6 状態信号
ANL
BRES DM10763 #2          ; MSEP Axis-6 制御信号
CON
BRES DM10763 #3          ; MSEP Axis-6 制御信号
CON
JMP @MR2003
MPP
LDB @MR101               ; MSEP_Axis6 移動可
BOR DM10563 #2           ; MSEP Axis-6 状態信号
ANL
TMR #883 #20             ; MSEP_Axis6_ｳｪｲﾄﾀｲﾏ
CON
AND T883                 ; MSEP_Axis6_ｳｪｲﾄﾀｲﾏ
RES MR4912               ; MOVE SW 表示
CON
BRES DM10763 #2          ; MSEP Axis-6 制御信号
CON
BRES DM10763 #3          ; MSEP Axis-6 制御信号
CON
RES MR18014              ; RB5:MOVE-STOP
CON
RES @MR2001              ; 動作中
CON
SET @R503                ; MSEP_Axis2 ｱﾗｰﾑ発生
CON
ENDS
STG @MR2003
ANB @MR100               ; MSEP_Axis6 ｱﾗｰﾑ発生
MPS
AND= DM11008 #1          ; RB5 　反転軸　目標ﾎﾟｲﾝﾄ番号
MOV.L EM2000 DM10756     ; RB5 P1 目標位置（下位bit）  MSEP Axis-6 目標位置（下位8bit）
MOV EM2002 DM10760       ; RB5 P1 指令速度  MSEP Axis-6 速度
MRD
AND= DM11008 #2          ; RB5 　反転軸　目標ﾎﾟｲﾝﾄ番号
MOV.L EM2003 DM10756     ; RB5 P2 目標位置（下位bit）  MSEP Axis-6 目標位置（下位8bit）
MOV EM2005 DM10760       ; RB5 P2 指令速度  MSEP Axis-6 速度
MRD
AND= DM11008 #3          ; RB5 　反転軸　目標ﾎﾟｲﾝﾄ番号
MOV.L EM2006 DM10756     ; RB5 P3 目標位置（下位bit）  MSEP Axis-6 目標位置（下位8bit）
MOV EM2008 DM10760       ; RB5 P3 指令速度  MSEP Axis-6 速度
MRD
AND= DM11008 #4          ; RB5 　反転軸　目標ﾎﾟｲﾝﾄ番号
MOV.L EM2009 DM10756     ; RB5 P4 目標位置（下位bit）  MSEP Axis-6 目標位置（下位8bit）
MOV EM2011 DM10760       ; RB5 P4 指令速度  MSEP Axis-6 速度
MRD
AND= DM11008 #5          ; RB5 　反転軸　目標ﾎﾟｲﾝﾄ番号
MOV.L EM2012 DM10756     ; RB5 P5 目標位置（下位bit）  MSEP Axis-6 目標位置（下位8bit）
MOV EM2014 DM10760       ; RB5 P5 指令速度  MSEP Axis-6 速度
MPP
TMR #884 #2              ; MSEP_Axis6_ｳｪｲﾄﾀｲﾏ
CON
AND T884                 ; MSEP_Axis6_ｳｪｲﾄﾀｲﾏ
JMP @MR2004
STG @MR2004
ANB @MR100               ; MSEP_Axis6 ｱﾗｰﾑ発生
BSET DM10763 #0          ; MSEP Axis-6 制御信号
CON
JMP @MR2005
STG @MR2005
ANB @MR100               ; MSEP_Axis6 ｱﾗｰﾑ発生
MPS
BANB DM10563 #0          ; MSEP Axis-6 状態信号
BRES DM10763 #0          ; MSEP Axis-6 制御信号
CON
JMP @MR2006
MPP
BAND DM10563 #0          ; MSEP Axis-6 状態信号
TMR #885 #300            ; MSEP_Axis6_ｳｪｲﾄﾀｲﾏ
CON
AND T885                 ; MSEP_Axis6_ｳｪｲﾄﾀｲﾏ
BRES DM10763 #0          ; MSEP Axis-6 制御信号
CON
RES MR4912               ; MOVE SW 表示
CON
BRES DM10763 #2          ; MSEP Axis-6 制御信号
CON
BRES DM10763 #3          ; MSEP Axis-6 制御信号
CON
RES MR18005              ; RB5:反転軸　MOVE
CON
RES MR18014              ; RB5:MOVE-STOP
CON
RES @MR2001              ; 動作中
CON
SET @R504                ; MSEP_Axis2 ｱﾗｰﾑ発生
CON
ENDS
STG @MR2006
ANB @MR100               ; MSEP_Axis6 ｱﾗｰﾑ発生
MPS
BLDB DM10563 #2          ; MSEP Axis-6 状態信号
BAND DM10563 #0          ; MSEP Axis-6 状態信号
ANL
TMH #886 #10             ; MSEP_Axis6_ｳｪｲﾄﾀｲﾏ
CON
AND T886                 ; MSEP_Axis6_ｳｪｲﾄﾀｲﾏ
JMP @MR2007
MRD
BLD DM10563 #2           ; MSEP Axis-6 状態信号
AND MR18014              ; RB5:MOVE-STOP
ANL
JMP @MR2008
MPP
BANB DM10563 #2          ; MSEP Axis-6 状態信号
TMR #887 #600            ; MSEP_Axis6_ｳｪｲﾄﾀｲﾏ
CON
AND T887                 ; MSEP_Axis6_ｳｪｲﾄﾀｲﾏ
RES MR4912               ; MOVE SW 表示
CON
BRES DM10763 #2          ; MSEP Axis-6 制御信号
CON
BRES DM10763 #3          ; MSEP Axis-6 制御信号
CON
RES MR18005              ; RB5:反転軸　MOVE
CON
RES MR18014              ; RB5:MOVE-STOP
CON
RES @MR2001              ; 動作中
CON
SET @R505                ; MSEP_Axis2 ｱﾗｰﾑ発生
CON
ENDS
STG @MR2008
BSET DM10763 #2          ; MSEP Axis-6 制御信号
CON
BANB DM10563 #2          ; MSEP Axis-6 状態信号
JMP @MR2009
STG @MR2009
BSET DM10763 #3          ; MSEP Axis-6 制御信号
CON
TMH #888 #7              ; MSEP_Axis6_ｳｪｲﾄﾀｲﾏ
CON
AND T888                 ; MSEP_Axis6_ｳｪｲﾄﾀｲﾏ
BRES DM10763 #2          ; MSEP Axis-6 制御信号
CON
BRES DM10763 #3          ; MSEP Axis-6 制御信号
CON
JMP @MR2010
STG @MR2010
MPS
BAND DM10563 #0          ; MSEP Axis-6 状態信号
JMP @MR2007
MPP
BANB DM10563 #0          ; MSEP Axis-6 状態信号
TMR #889 #300            ; MSEP_Axis6_ｳｪｲﾄﾀｲﾏ
CON
AND T889                 ; MSEP_Axis6_ｳｪｲﾄﾀｲﾏ
BRES DM10763 #0          ; MSEP Axis-6 制御信号
CON
RES MR4912               ; MOVE SW 表示
CON
BRES DM10763 #2          ; MSEP Axis-6 制御信号
CON
BRES DM10763 #3          ; MSEP Axis-6 制御信号
CON
RES MR18005              ; RB5:反転軸　MOVE
CON
RES MR18014              ; RB5:MOVE-STOP
CON
RES @MR2001              ; 動作中
CON
SET @R506                ; MSEP_Axis2 ｱﾗｰﾑ発生
CON
ENDS
STG @MR2007
ANB @MR100               ; MSEP_Axis6 ｱﾗｰﾑ発生
MOV.L DM10548 DM11002    ; MSEP Axis-5 現在位置（下位8bit）  RB5 現在位置1
MOV DM11008 DM11004      ; RB5 　反転軸　目標ﾎﾟｲﾝﾄ番号  RB5 現在ﾎﾟｼﾞｼｮﾝ番号
RES MR4912               ; MOVE SW 表示
CON
BRES DM10763 #2          ; MSEP Axis-6 制御信号
CON
BRES DM10763 #3          ; MSEP Axis-6 制御信号
CON
RES MR18005              ; RB5:反転軸　MOVE
CON
RES MR18014              ; RB5:MOVE-STOP
CON
RES @MR2001              ; 動作中
CON
ENDS
LD @R503                 ; MSEP_Axis2 ｱﾗｰﾑ発生
ANB MR18013              ; RB5:ｱﾗｰﾑ出力
ANB R39004               ; ｴﾗｰ中
SET @MR007               ; RB5ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #85 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
SET @R512                ; MSEP_Axis2 ｱﾗｰﾑ発生
LD @R504                 ; MSEP_Axis2 ｱﾗｰﾑ発生
OR @R505                 ; MSEP_Axis2 ｱﾗｰﾑ発生
OR @R506                 ; MSEP_Axis2 ｱﾗｰﾑ発生
ANB MR18013              ; RB5:ｱﾗｰﾑ出力
ANB R39004               ; ｴﾗｰ中
SET @MR007               ; RB5ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #85 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
SET @R512                ; MSEP_Axis2 ｱﾗｰﾑ発生
STG @R512                ; MSEP_Axis2 ｱﾗｰﾑ発生
ZRES @R503 @R506         ; MSEP_Axis2 ｱﾗｰﾑ発生  MSEP_Axis2 ｱﾗｰﾑ発生
CON
AND @R101
RES @R101
CON
DW #0 DM60009
CON
AND @R105                ; SW1
SET MR18100              ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @R513
STG @R513
TMR #1951 #10
CON
AND T1951
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
RES @R100                ; MSEP_ｱﾗｰﾑ発生
CON
RES @MR007               ; RB5ｱﾗｰﾑON
CON
RES R39004               ; ｴﾗｰ中
CON
SET MR18005              ; RB5:反転軸　MOVE
CON
ENDS
;RB5 (反転) MSEP-Axis6　JOG/INCHING
LD= DM3000 #1917         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1904         ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND MR3112               ; 反転RB原点復帰済み ﾗﾝﾌﾟ
AND @MR101               ; MSEP_Axis6 移動可
ANB @MR1001              ; 原点復帰中
ANB @MR2001              ; 動作中
MPS
ANB MR18007              ; RB5:JOG/INCH
OUT @MR3000              ; JOG　動作
MPP
AND MR18007              ; RB5:JOG/INCH
OUT @MR3007              ; INCHING　動作
LDP @MR3007              ; INCHING　動作
BSET DM10763 #5          ; MSEP Axis-6 制御信号
LDF @MR3007              ; INCHING　動作
BRES DM10763 #5          ; MSEP Axis-6 制御信号
LD @MR3000               ; JOG　動作
OR @MR3007               ; INCHING　動作
MPS
LD MR18011               ; RB5:JOG+動作
ANB MR18012              ; RB5:JOG-動作
ANL
BOUT DM10763 #8          ; MSEP Axis-6 制御信号
MPP
LD MR18012               ; RB5:JOG-動作
ANB MR18011              ; RB5:JOG+動作
ANL
BOUT DM10763 #7          ; MSEP Axis-6 制御信号
;RB5 (反転) MSEP-Axis6　Point Data Write
LD CR2002                ; 常時ON
LD MR3112                ; 反転RB原点復帰済み ﾗﾝﾌﾟ
OR CR2002                ; 常時ON
ANL
MPS
ANP MR5000               ; CR反転_NR給材 P1 選択
DW #1 DM11008            ; RB5 　反転軸　目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14000 MR14004     ; NR_給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P1  NR_給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P5
CON
ZRES MR13500 MR13504     ; CR_除材搬送_旋回軸_P1  CR_除材搬送_旋回軸_P5
CON
SET MR13500              ; CR_除材搬送_旋回軸_P1
CON
SET MR14000              ; NR_給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P1
MRD
ANP MR5001               ; CR反転_NR給材 P2 選択
DW #2 DM11008            ; RB5 　反転軸　目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14000 MR14004     ; NR_給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P1  NR_給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P5
CON
ZRES MR13500 MR13504     ; CR_除材搬送_旋回軸_P1  CR_除材搬送_旋回軸_P5
CON
SET MR13501              ; CR_除材搬送_旋回軸_P2
CON
SET MR14001              ; NR_給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P2
MRD
ANP MR5002               ; CR反転_NR給材 P3 選択
DW #3 DM11008            ; RB5 　反転軸　目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14000 MR14004     ; NR_給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P1  NR_給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P5
CON
ZRES MR13500 MR13504     ; CR_除材搬送_旋回軸_P1  CR_除材搬送_旋回軸_P5
CON
SET MR13502              ; CR_除材搬送_旋回軸_P3
CON
SET MR14002              ; NR_給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P3
MRD
ANP MR5003               ; CR反転_NR給材 P4 選択
DW #4 DM11008            ; RB5 　反転軸　目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14000 MR14004     ; NR_給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P1  NR_給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P5
CON
ZRES MR13500 MR13504     ; CR_除材搬送_旋回軸_P1  CR_除材搬送_旋回軸_P5
CON
SET MR13503              ; CR_除材搬送_旋回軸_P4
CON
SET MR14003              ; NR_給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P4
MPP
ANP MR5004               ; CR反転_NR給材 P5 選択
DW #5 DM11008            ; RB5 　反転軸　目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14000 MR14004     ; NR_給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P1  NR_給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P5
CON
ZRES MR13500 MR13504     ; CR_除材搬送_旋回軸_P1  CR_除材搬送_旋回軸_P5
CON
SET MR13504              ; CR_除材搬送_旋回軸_P5
CON
SET MR14004              ; NR_給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P5
LD= DM3000 #1904         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1917         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR3112                ; 反転RB原点復帰済み ﾗﾝﾌﾟ
OR CR2002                ; 常時ON
ANL
MPS
ANP MR5000               ; CR反転_NR給材 P1 選択
MOV.L EM2000 EM1900      ; RB5 P1 目標位置（下位bit）  RB5 目標位置（下位bit）表示用
MOV EM2002 EM1902        ; RB5 P1 指令速度  RB5 指令速度表示用
MRD
ANP MR5001               ; CR反転_NR給材 P2 選択
MOV.L EM2003 EM1900      ; RB5 P2 目標位置（下位bit）  RB5 目標位置（下位bit）表示用
MOV EM2005 EM1902        ; RB5 P2 指令速度  RB5 指令速度表示用
MRD
ANP MR5002               ; CR反転_NR給材 P3 選択
MOV.L EM2006 EM1900      ; RB5 P3 目標位置（下位bit）  RB5 目標位置（下位bit）表示用
MOV EM2008 EM1902        ; RB5 P3 指令速度  RB5 指令速度表示用
MRD
ANP MR5003               ; CR反転_NR給材 P4 選択
MOV.L EM2009 EM1900      ; RB5 P4 目標位置（下位bit）  RB5 目標位置（下位bit）表示用
MOV EM2011 EM1902        ; RB5 P4 指令速度  RB5 指令速度表示用
MPP
ANP MR5004               ; CR反転_NR給材 P5 選択
MOV.L EM2012 EM1900      ; RB5 P5 目標位置（下位bit）  RB5 目標位置（下位bit）表示用
MOV EM2014 EM1902        ; RB5 P5 指令速度  RB5 指令速度表示用
LD= DM3000 #1904         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1917         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR13500               ; CR_除材搬送_旋回軸_P1
OR MR14000               ; NR_給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P1
ANL
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10556 EM2000     ; MSEP Axis-6 現在位置（下位8bit）  RB5 P1 目標位置（下位bit）
MOV EM1902 EM2002        ; RB5 指令速度表示用  RB5 P1 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1900 EM2000      ; RB5 目標位置（下位bit）表示用  RB5 P1 目標位置（下位bit）
MOV EM1902 EM2002        ; RB5 指令速度表示用  RB5 P1 指令速度
LD= DM3000 #1904         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1917         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR13501               ; CR_除材搬送_旋回軸_P2
OR MR14001               ; NR_給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P2
ANL
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10556 EM2003     ; MSEP Axis-6 現在位置（下位8bit）  RB5 P2 目標位置（下位bit）
MOV EM1902 EM2005        ; RB5 指令速度表示用  RB5 P2 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1900 EM2003      ; RB5 目標位置（下位bit）表示用  RB5 P2 目標位置（下位bit）
MOV EM1902 EM2005        ; RB5 指令速度表示用  RB5 P2 指令速度
LD= DM3000 #1904         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1917         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR13502               ; CR_除材搬送_旋回軸_P3
OR MR14002               ; NR_給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P3
ANL
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10556 EM2006     ; MSEP Axis-6 現在位置（下位8bit）  RB5 P3 目標位置（下位bit）
MOV EM1902 EM2008        ; RB5 指令速度表示用  RB5 P3 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1900 EM2006      ; RB5 目標位置（下位bit）表示用  RB5 P3 目標位置（下位bit）
MOV EM1902 EM2008        ; RB5 指令速度表示用  RB5 P3 指令速度
LD= DM3000 #1904         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1917         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR13503               ; CR_除材搬送_旋回軸_P4
OR MR14003               ; NR_給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P4
ANL
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10556 EM2009     ; MSEP Axis-6 現在位置（下位8bit）  RB5 P4 目標位置（下位bit）
MOV EM1902 EM2011        ; RB5 指令速度表示用  RB5 P4 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1900 EM2009      ; RB5 目標位置（下位bit）表示用  RB5 P4 目標位置（下位bit）
MOV EM1902 EM2011        ; RB5 指令速度表示用  RB5 P4 指令速度
LD= DM3000 #1904         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1917         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR13504               ; CR_除材搬送_旋回軸_P5
OR MR14004               ; NR_給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P5
ANL
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10556 EM2012     ; MSEP Axis-6 現在位置（下位8bit）  RB5 P5 目標位置（下位bit）
MOV EM1902 EM2014        ; RB5 指令速度表示用  RB5 P5 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1900 EM2012      ; RB5 目標位置（下位bit）表示用  RB5 P5 目標位置（下位bit）
MOV EM1902 EM2014        ; RB5 指令速度表示用  RB5 P5 指令速度
;EM42000.l = em2000.l - 2
;EM43000.l = em2000.l + 2
;EM42003.l = em2003.l - 2
;EM43003.l = em2003.l + 2
;EM42006.l = em2006.l - 2
;EM43006.l = em2006.l + 2
;EM42009.l = em2009.l - 2
;EM43009.l = em2009.l + 2
;EM42012.l = em2012.l - 2
;EM43012.l = em2012.l + 2
;EM42015.l = em2015.l - 2
;EM43015.l = em2015.l + 2
LD CR2002                ; 常時ON
NCJ #1000
;EM42000.l = em2000.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2000             ; RB5 P1 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42000            ; 自動中非常停止によるﾃｰﾌﾞﾙ2状態
;EM43000.l = em2000.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2000             ; RB5 P1 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43000            ; 自動中非常停止によるﾃｰﾌﾞﾙ3状態
;EM42003.l = em2003.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2003             ; RB5 P2 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42003
;EM43003.l = em2003.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2003             ; RB5 P2 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43003
;EM42006.l = em2006.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2006             ; RB5 P3 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42006
;EM43006.l = em2006.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2006             ; RB5 P3 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43006
;EM42009.l = em2009.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2009             ; RB5 P4 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42009
;EM43009.l = em2009.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2009             ; RB5 P4 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43009
;EM42012.l = em2012.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2012             ; RB5 P5 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42012
;EM43012.l = em2012.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2012             ; RB5 P5 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43012
;EM42015.l = em2015.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2015             ; RB5 P6 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42015
;EM43015.l = em2015.l + 2
LD CR2002                ; 常時ON
LDA.L EM2015             ; RB5 P6 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43015
LABEL #1000
;
LD CR2002                ; 常時ON
AND MR3112               ; 反転RB原点復帰済み ﾗﾝﾌﾟ
MPS
LD<=.L EM42000 DM10556   ; 自動中非常停止によるﾃｰﾌﾞﾙ2状態  MSEP Axis-6 現在位置（下位8bit）
AND<=.L DM10556 EM43000  ; MSEP Axis-6 現在位置（下位8bit）  自動中非常停止によるﾃｰﾌﾞﾙ3状態
LD>.L EM42000 DM10556    ; 自動中非常停止によるﾃｰﾌﾞﾙ2状態  MSEP Axis-6 現在位置（下位8bit）
OR>.L DM10556 EM43000    ; MSEP Axis-6 現在位置（下位8bit）  自動中非常停止によるﾃｰﾌﾞﾙ3状態
AND @MR000               ; ﾌﾘｯｶ
LD MR14000               ; NR_給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P1
OR MR13500               ; CR_除材搬送_旋回軸_P1
ANL
ORL
ANL
OUT MR23500              ; 旋回軸_給材PIN_P1
MRD
LD<=.L EM42003 DM10556   ; MSEP Axis-6 現在位置（下位8bit）
AND<=.L DM10556 EM43003  ; MSEP Axis-6 現在位置（下位8bit）
LD>.L EM42003 DM10556    ; MSEP Axis-6 現在位置（下位8bit）
OR>.L DM10556 EM43003    ; MSEP Axis-6 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
LD MR14001               ; NR_給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P2
OR MR13501               ; CR_除材搬送_旋回軸_P2
ANL
ORL
ANL
OUT MR23501              ; 旋回軸_給材PIN_P2
MRD
LD<=.L EM42006 DM10556   ; MSEP Axis-6 現在位置（下位8bit）
AND<=.L DM10556 EM43006  ; MSEP Axis-6 現在位置（下位8bit）
LD>.L EM42006 DM10556    ; MSEP Axis-6 現在位置（下位8bit）
OR>.L DM10556 EM43006    ; MSEP Axis-6 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
LD MR14002               ; NR_給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P3
OR MR13502               ; CR_除材搬送_旋回軸_P3
ANL
ORL
ANL
OUT MR23502              ; 旋回軸_給材PIN_P3
MRD
LD<=.L EM42009 DM10556   ; MSEP Axis-6 現在位置（下位8bit）
AND<=.L DM10556 EM43009  ; MSEP Axis-6 現在位置（下位8bit）
LD>.L EM42009 DM10556    ; MSEP Axis-6 現在位置（下位8bit）
OR>.L DM10556 EM43009    ; MSEP Axis-6 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
LD MR14003               ; NR_給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P4
OR MR13503               ; CR_除材搬送_旋回軸_P4
ANL
ORL
ANL
OUT MR23503              ; 旋回軸_給材PIN_P4
MPP
LD<=.L EM42012 DM10556   ; MSEP Axis-6 現在位置（下位8bit）
AND<=.L DM10556 EM43012  ; MSEP Axis-6 現在位置（下位8bit）
LD>.L EM42012 DM10556    ; MSEP Axis-6 現在位置（下位8bit）
OR>.L DM10556 EM43012    ; MSEP Axis-6 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
LD MR14004               ; NR_給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P5
OR MR13504               ; CR_除材搬送_旋回軸_P5
ANL
ORL
ANL
OUT MR23504              ; 旋回軸_給材PIN_P5
LD CR2002                ; 常時ON
AND MR3112               ; 反転RB原点復帰済み ﾗﾝﾌﾟ
MPS
LD MR14000               ; NR_給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P1
OR MR13500               ; CR_除材搬送_旋回軸_P1
LD>.L EM42000 DM10556    ; 自動中非常停止によるﾃｰﾌﾞﾙ2状態  MSEP Axis-6 現在位置（下位8bit）
OR>.L DM10556 EM43000    ; MSEP Axis-6 現在位置（下位8bit）  自動中非常停止によるﾃｰﾌﾞﾙ3状態
ANL
ANB @MR2001              ; 動作中
AND MR001                ; ｲﾝﾃﾞｯｸｽ原点復帰完了
ANP MR4913               ; MOVE SW
ANL
SET MR18005              ; RB5:反転軸　MOVE
MRD
LD MR14001               ; NR_給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P2
OR MR13501               ; CR_除材搬送_旋回軸_P2
LD>.L EM42003 DM10556    ; MSEP Axis-6 現在位置（下位8bit）
OR>.L DM10556 EM43003    ; MSEP Axis-6 現在位置（下位8bit）
ANL
ANB @MR2001              ; 動作中
AND MR001                ; ｲﾝﾃﾞｯｸｽ原点復帰完了
ANP MR4913               ; MOVE SW
ANL
SET MR18005              ; RB5:反転軸　MOVE
MRD
LD MR14002               ; NR_給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P3
OR MR13502               ; CR_除材搬送_旋回軸_P3
LD>.L EM42006 DM10556    ; MSEP Axis-6 現在位置（下位8bit）
OR>.L DM10556 EM43006    ; MSEP Axis-6 現在位置（下位8bit）
ANL
ANB @MR2001              ; 動作中
AND MR001                ; ｲﾝﾃﾞｯｸｽ原点復帰完了
ANP MR4913               ; MOVE SW
ANL
SET MR18005              ; RB5:反転軸　MOVE
MRD
LD MR14003               ; NR_給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P4
OR MR13503               ; CR_除材搬送_旋回軸_P4
LD>.L EM42009 DM10556    ; MSEP Axis-6 現在位置（下位8bit）
OR>.L DM10556 EM43009    ; MSEP Axis-6 現在位置（下位8bit）
ANL
ANB @MR2001              ; 動作中
AND MR001                ; ｲﾝﾃﾞｯｸｽ原点復帰完了
ANP MR4913               ; MOVE SW
ANL
SET MR18005              ; RB5:反転軸　MOVE
MPP
LD MR14004               ; NR_給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P5
OR MR13504               ; CR_除材搬送_旋回軸_P5
LD>.L EM42012 DM10556    ; MSEP Axis-6 現在位置（下位8bit）
OR>.L DM10556 EM43012    ; MSEP Axis-6 現在位置（下位8bit）
ANL
ANB @MR2001              ; 動作中
AND MR001                ; ｲﾝﾃﾞｯｸｽ原点復帰完了
ANP MR4913               ; MOVE SW
ANL
SET MR18005              ; RB5:反転軸　MOVE
;RB5 (反転) MSEP-Axis6　ｱﾗｰﾑﾘｾｯﾄ
STG MR18100              ; ｱﾗｰﾑﾘｾｯﾄ要求
SET MR18101              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
JMP MR18102
STG MR18102
SET MR18009              ; RB5:ARMRST
CON
JMP MR18103
STG MR18103
AND MR18000              ; RB5:動作完了
RES MR18101              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
RES MR18000              ; RB5:動作完了
CON
ENDS
LDP MR18009              ; RB5:ARMRST
ANB @MR3011              ; ｱﾗｰﾑﾘｾｯﾄ中
RES MR18009              ; RB5:ARMRST
CON
SET @MR3011              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
SET @MR3010              ; ｱﾗｰﾑﾘｾｯﾄ開始
STG @MR3010              ; ｱﾗｰﾑﾘｾｯﾄ開始
BSET DM10763 #3          ; MSEP Axis-6 制御信号
CON
MPS
BANB DM10563 #3          ; MSEP Axis-6 状態信号
JMP @MR3013
MPP
BAND DM10563 #3          ; MSEP Axis-6 状態信号
TMH #890 #50             ; MSEP_Axis6_ｳｪｲﾄﾀｲﾏ
CON
AND T890                 ; MSEP_Axis6_ｳｪｲﾄﾀｲﾏ
JMP @MR3012
STG @MR3012
ZRES MR18100 MR18103     ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
RES MR18009              ; RB5:ARMRST
CON
RES @MR3011              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
SET @R507                ; MSEP_Axis2 ｱﾗｰﾑ発生
CON
ENDS
STG @MR3013
MPS
BLDB DM10563 #3          ; MSEP Axis-6 状態信号
BAND DM10563 #4          ; MSEP Axis-6 状態信号
BAND DM10563 #14         ; MSEP Axis-6 状態信号
ANL
JMP @MR3014
MPP
BLD DM10563 #3           ; MSEP Axis-6 状態信号
BORB DM10563 #4          ; MSEP Axis-6 状態信号
BORB DM10563 #14         ; MSEP Axis-6 状態信号
ANL
TMR #891 #100            ; MSEP_Axis6_ｳｪｲﾄﾀｲﾏ
CON
AND T891                 ; MSEP_Axis6_ｳｪｲﾄﾀｲﾏ
JMP @MR3015
STG @MR3014
RES MR18009              ; RB5:ARMRST
CON
RES @MR3011              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
SET MR18000              ; RB5:動作完了
CON
ENDS
STG @MR3015
ZRES MR18100 MR18103     ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
RES MR18009              ; RB5:ARMRST
CON
RES @MR3011              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
SET @R508                ; MSEP_Axis2 ｱﾗｰﾑ発生
CON
ENDS
LD @R507                 ; MSEP_Axis2 ｱﾗｰﾑ発生
OR @R508                 ; MSEP_Axis2 ｱﾗｰﾑ発生
ANB R39004               ; ｴﾗｰ中
SET @MR007               ; RB5ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #85 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
SET @R514
STG @R514
ZRES @R507 @R508         ; MSEP_Axis2 ｱﾗｰﾑ発生  MSEP_Axis2 ｱﾗｰﾑ発生
CON
AND @R101
RES @R101
CON
DW #0 DM60009
CON
AND @R105                ; SW1
SET MR18100              ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @R515
STG @R515
TMR #1952 #10
CON
AND T1952
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
RES @R100                ; MSEP_ｱﾗｰﾑ発生
CON
RES @MR007               ; RB5ｱﾗｰﾑON
CON
RES R39004               ; ｴﾗｰ中
CON
ENDS
;<h1/>RB6 (未使用) MSEP-Axis7 
BLD DM10571 #3           ; MSEP Axis-7 状態信号
OUT @MR200               ; MSEP_Axis7 ｱﾗｰﾑ発生
BLD DM10571 #4           ; MSEP Axis-7 状態信号
BAND DM10571 #14         ; MSEP Axis-7 状態信号
BANB DM10571 #15         ; MSEP Axis-7 状態信号
OUT @MR201               ; MSEP_Axis7 移動可
BLD DM10571 #0           ; MSEP Axis-7 状態信号
OUT MR18215              ; RB6:位置決め完了
BLD DM10571 #3           ; MSEP Axis-7 状態信号
ANB @MR008               ; RB6ｱﾗｰﾑON
ANB R46114               ; _装置原点復帰待ち
OUT MR18213              ; RB6:ｱﾗｰﾑ出力
LDP MR18213              ; RB6:ｱﾗｰﾑ出力
ANB R39004               ; ｴﾗｰ中
SET @MR008               ; RB6ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #10 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
LDA DM10570              ; MSEP Axis-7 ｱﾗｰﾑｺｰﾄﾞ
CON
STA DM20030              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET @R002
STG @R002
AND @R101
RES @R101
CON
DW #0 DM60009
CON
AND @R105                ; SW1
DW #0 DM20030            ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET MR18300              ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @R003
STG @R003
TMR #1931 #10
CON
AND T1931
RES @R100                ; MSEP_ｱﾗｰﾑ発生
CON
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
RES @MR008               ; RB6ｱﾗｰﾑON
CON
RES R39004               ; ｴﾗｰ中
CON
ENDS
LDP MR3304               ; 除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝｻｰﾎﾞｵﾝ ﾗﾝﾌﾟ
BSET DM10771 #4          ; MSEP Axis-7 制御信号
LDF MR3304               ; 除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝｻｰﾎﾞｵﾝ ﾗﾝﾌﾟ
BRES DM10771 #4          ; MSEP Axis-7 制御信号
BLD DM10771 #4           ; MSEP Axis-7 制御信号
OUT MR17708              ; 除材ﾊﾞｯｸｱｯﾌﾟ軸ｻｰﾎﾞON表示
;RB6 (未使用) MSEP-Axis7 　原点復帰開始
LDP MR3205               ; 除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ 原点復帰 SW
ORP MR18204              ; RB6:HOME
ANB @MR1101              ; 原点復帰中
AND @MR201               ; MSEP_Axis7 移動可
RES MR3307               ; 除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ 原点復帰済
CON
RES MR18202              ; RB6:原点復帰完了
CON
RES MR3205               ; 除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ 原点復帰 SW
CON
RES MR18204              ; RB6:HOME
CON
SET @MR1101              ; 原点復帰中
CON
SET @MR1100              ; 原点復帰開始
STG @MR1100              ; 原点復帰開始
ANB @MR200               ; MSEP_Axis7 ｱﾗｰﾑ発生
AND @MR003               ; MSEP動作可
BRES DM10771 #0          ; MSEP Axis-7 制御信号
CON
BRES DM10771 #2          ; MSEP Axis-7 制御信号
CON
BRES DM10771 #3          ; MSEP Axis-7 制御信号
CON
BSET DM10771 #4          ; MSEP Axis-7 制御信号
CON
JMP @MR1103
STG @MR1103
ANB @MR200               ; MSEP_Axis7 ｱﾗｰﾑ発生
MPS
LD @MR201                ; MSEP_Axis7 移動可
BANB DM10571 #2          ; MSEP Axis-7 状態信号
ANL
JMP @MR1104
MPP
ANB @MR201               ; MSEP_Axis7 移動可
TMR #900 #300            ; MSEP_Axis7_ｳｪｲﾄﾀｲﾏ
CON
AND T900                 ; MSEP_Axis7_ｳｪｲﾄﾀｲﾏ
RES @MR1101              ; 原点復帰中
CON
BRES DM10771 #4          ; MSEP Axis-7 制御信号
CON
SET @R600                ; MSEP_Axis7 ｱﾗｰﾑ発生
CON
ENDS
STG @MR1104
ANB @MR200               ; MSEP_Axis7 ｱﾗｰﾑ発生
BSET DM10771 #1          ; MSEP Axis-7 制御信号
CON
JMP @MR1105
STG @MR1105
ANB @MR200               ; MSEP_Axis7 ｱﾗｰﾑ発生
MPS
BANB DM10571 #0          ; MSEP Axis-7 状態信号
BRES DM10771 #1          ; MSEP Axis-7 制御信号
CON
JMP @MR1106
MPP
BAND DM10571 #0          ; MSEP Axis-7 状態信号
TMR #901 #300            ; MSEP_Axis7_ｳｪｲﾄﾀｲﾏ
CON
AND T901                 ; MSEP_Axis7_ｳｪｲﾄﾀｲﾏ
RES @MR1101              ; 原点復帰中
CON
BRES DM10771 #4          ; MSEP Axis-7 制御信号
CON
SET @R601                ; MSEP_Axis7 ｱﾗｰﾑ発生
CON
ENDS
STG @MR1106
ANB @MR200               ; MSEP_Axis7 ｱﾗｰﾑ発生
MPS
BLDB DM10571 #2          ; MSEP Axis-7 状態信号
BAND DM10571 #0          ; MSEP Axis-7 状態信号
ANL
JMP @MR1107
MPP
BANB DM10571 #0          ; MSEP Axis-7 状態信号
TMR #902 #300            ; MSEP_Axis7_ｳｪｲﾄﾀｲﾏ
CON
AND T902                 ; MSEP_Axis7_ｳｪｲﾄﾀｲﾏ
RES @MR1101              ; 原点復帰中
CON
BRES DM10771 #4          ; MSEP Axis-7 制御信号
CON
SET @R602                ; MSEP_Axis7 ｱﾗｰﾑ発生
CON
ENDS
STG @MR1107
ANB @MR200               ; MSEP_Axis7 ｱﾗｰﾑ発生
DW.D #0 DM11022          ; RB6 現在位置1
CON
DW #0 DM11024            ; RB6 現在ﾎﾟｼﾞｼｮﾝ番号
CON
JMP @MR1108
STG @MR1108
RES @MR1101              ; 原点復帰中
CON
SET MR3307               ; 除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ 原点復帰済
CON
SET MR18202              ; RB6:原点復帰完了
CON
ENDS
LD @R600                 ; MSEP_Axis7 ｱﾗｰﾑ発生
ANB MR18213              ; RB6:ｱﾗｰﾑ出力
ANB R39004               ; ｴﾗｰ中
SET @MR008               ; RB6ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #80 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
SET @R610                ; MSEP_Axis7 ｱﾗｰﾑ発生
LD @R601                 ; MSEP_Axis7 ｱﾗｰﾑ発生
OR @R602                 ; MSEP_Axis7 ｱﾗｰﾑ発生
ANB MR18213              ; RB6:ｱﾗｰﾑ出力
ANB R39004               ; ｴﾗｰ中
SET @MR008               ; RB6ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #80 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
SET @R610                ; MSEP_Axis7 ｱﾗｰﾑ発生
STG @R610                ; MSEP_Axis7 ｱﾗｰﾑ発生
ZRES @R600 @R602         ; MSEP_Axis7 ｱﾗｰﾑ発生  MSEP_Axis7 ｱﾗｰﾑ発生
CON
AND @R101
RES @R101
CON
DW #0 DM60009
CON
AND @R105                ; SW1
SET MR18300              ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @R611
STG @R611
TMR #1954 #10
CON
AND T1954
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
RES @R100                ; MSEP_ｱﾗｰﾑ発生
CON
RES R39004               ; ｴﾗｰ中
CON
SET @MR1100              ; 原点復帰開始
CON
RES @MR008               ; RB6ｱﾗｰﾑON
CON
ENDS
;RB6 (未使用) MSEP-Axis7 ﾎﾟｲﾝﾄﾃﾞｰﾀｾｯﾄ→移動
LDP MR18205              ; RB6:MOVE
ANB @MR2101              ; 動作中
RES MR18205              ; RB6:MOVE
CON
SET MR5012               ; MOVE SW 表示
CON
SET @MR2101              ; 動作中
CON
SET @MR2100              ; 動作開始
STG @MR2100              ; 動作開始
ANB @MR200               ; MSEP_Axis7 ｱﾗｰﾑ発生
MPS
LD @MR201                ; MSEP_Axis7 移動可
BANB DM10571 #2          ; MSEP Axis-7 状態信号
ANL
BRES DM10771 #2          ; MSEP Axis-7 制御信号
CON
BRES DM10771 #3          ; MSEP Axis-7 制御信号
CON
JMP @MR2103
MPP
ANB @MR201               ; MSEP_Axis7 移動可
TMR #903 #300            ; MSEP_Axis7_ｳｪｲﾄﾀｲﾏ
CON
AND T903                 ; MSEP_Axis7_ｳｪｲﾄﾀｲﾏ
RES MR5012               ; MOVE SW 表示
CON
BRES DM10771 #2          ; MSEP Axis-7 制御信号
CON
BRES DM10771 #3          ; MSEP Axis-7 制御信号
CON
RES MR18205              ; RB6:MOVE
CON
RES MR18214              ; RB6:MOVE-STOP
CON
RES @MR2101              ; 動作中
CON
SET @R603                ; MSEP_Axis7 ｱﾗｰﾑ発生
CON
ENDS
STG @MR2103
ANB @MR200               ; MSEP_Axis7 ｱﾗｰﾑ発生
MPS
AND= DM11028 #1          ; RB6 目標ﾎﾟｲﾝﾄ番号
MOV.L EM2030 DM10764     ; RB6 P1 目標位置（下位bit）  MSEP Axis-7 目標位置（下位8bit）
MOV EM2032 DM10768       ; RB6 P1 指令速度  MSEP Axis-7 速度
MRD
AND= DM11028 #2          ; RB6 目標ﾎﾟｲﾝﾄ番号
MOV.L EM2033 DM10764     ; RB6 P2 目標位置（下位bit）  MSEP Axis-7 目標位置（下位8bit）
MOV EM2035 DM10768       ; RB6 P2 指令速度  MSEP Axis-7 速度
MRD
AND= DM11028 #3          ; RB6 目標ﾎﾟｲﾝﾄ番号
MOV.L EM2036 DM10764     ; RB6 P3 目標位置（下位bit）  MSEP Axis-7 目標位置（下位8bit）
MOV EM2038 DM10768       ; RB6 P3 指令速度  MSEP Axis-7 速度
MRD
AND= DM11028 #4          ; RB6 目標ﾎﾟｲﾝﾄ番号
MOV.L EM2039 DM10764     ; RB6 P4 目標位置（下位bit）  MSEP Axis-7 目標位置（下位8bit）
MOV EM2041 DM10768       ; RB6 P4 指令速度  MSEP Axis-7 速度
MRD
AND= DM11028 #5          ; RB6 目標ﾎﾟｲﾝﾄ番号
MOV.L EM2042 DM10764     ; RB6 P5 目標位置（下位bit）  MSEP Axis-7 目標位置（下位8bit）
MOV EM2044 DM10768       ; RB6 P5 指令速度  MSEP Axis-7 速度
MPP
TMR #904 #2              ; MSEP_Axis7_ｳｪｲﾄﾀｲﾏ
CON
AND T904                 ; MSEP_Axis7_ｳｪｲﾄﾀｲﾏ
JMP @MR2104
STG @MR2104
ANB @MR200               ; MSEP_Axis7 ｱﾗｰﾑ発生
BSET DM10771 #0          ; MSEP Axis-7 制御信号
CON
JMP @MR2105
STG @MR2105
ANB @MR200               ; MSEP_Axis7 ｱﾗｰﾑ発生
MPS
BANB DM10571 #0          ; MSEP Axis-7 状態信号
BRES DM10771 #0          ; MSEP Axis-7 制御信号
CON
JMP @MR2106
MPP
BAND DM10571 #0          ; MSEP Axis-7 状態信号
TMR #905 #300            ; MSEP_Axis7_ｳｪｲﾄﾀｲﾏ
CON
AND T905                 ; MSEP_Axis7_ｳｪｲﾄﾀｲﾏ
BRES DM10771 #0          ; MSEP Axis-7 制御信号
CON
RES MR5012               ; MOVE SW 表示
CON
BRES DM10771 #2          ; MSEP Axis-7 制御信号
CON
BRES DM10771 #3          ; MSEP Axis-7 制御信号
CON
RES MR18205              ; RB6:MOVE
CON
RES MR18214              ; RB6:MOVE-STOP
CON
RES @MR2101              ; 動作中
CON
SET @R604                ; MSEP_Axis7 ｱﾗｰﾑ発生
CON
ENDS
STG @MR2106
ANB @MR200               ; MSEP_Axis7 ｱﾗｰﾑ発生
MPS
BLDB DM10571 #2          ; MSEP Axis-7 状態信号
BAND DM10571 #0          ; MSEP Axis-7 状態信号
ANL
TMH #906 #10             ; MSEP_Axis7_ｳｪｲﾄﾀｲﾏ
CON
AND T906                 ; MSEP_Axis7_ｳｪｲﾄﾀｲﾏ
JMP @MR2107
MRD
BLD DM10571 #2           ; MSEP Axis-7 状態信号
AND MR18214              ; RB6:MOVE-STOP
ANL
JMP @MR2108
MPP
BANB DM10571 #2          ; MSEP Axis-7 状態信号
TMR #907 #600            ; MSEP_Axis7_ｳｪｲﾄﾀｲﾏ
CON
AND T907                 ; MSEP_Axis7_ｳｪｲﾄﾀｲﾏ
RES MR5012               ; MOVE SW 表示
CON
BRES DM10771 #2          ; MSEP Axis-7 制御信号
CON
BRES DM10771 #3          ; MSEP Axis-7 制御信号
CON
RES MR18205              ; RB6:MOVE
CON
RES MR18214              ; RB6:MOVE-STOP
CON
RES @MR2101              ; 動作中
CON
SET @R605                ; MSEP_Axis7 ｱﾗｰﾑ発生
CON
ENDS
STG @MR2108
BSET DM10771 #2          ; MSEP Axis-7 制御信号
CON
BANB DM10571 #2          ; MSEP Axis-7 状態信号
JMP @MR2109
STG @MR2109
BSET DM10771 #3          ; MSEP Axis-7 制御信号
CON
TMH #908 #7              ; MSEP_Axis7_ｳｪｲﾄﾀｲﾏ
CON
AND T908                 ; MSEP_Axis7_ｳｪｲﾄﾀｲﾏ
BRES DM10771 #2          ; MSEP Axis-7 制御信号
CON
BRES DM10771 #3          ; MSEP Axis-7 制御信号
CON
JMP @MR2110
STG @MR2110
MPS
BAND DM10571 #0          ; MSEP Axis-7 状態信号
JMP @MR2107
MPP
BANB DM10571 #0          ; MSEP Axis-7 状態信号
TMR #909 #300            ; MSEP_Axis7_ｳｪｲﾄﾀｲﾏ
CON
AND T909                 ; MSEP_Axis7_ｳｪｲﾄﾀｲﾏ
BRES DM10771 #0          ; MSEP Axis-7 制御信号
CON
RES MR5012               ; MOVE SW 表示
CON
BRES DM10771 #2          ; MSEP Axis-7 制御信号
CON
BRES DM10771 #3          ; MSEP Axis-7 制御信号
CON
RES MR18205              ; RB6:MOVE
CON
RES MR18214              ; RB6:MOVE-STOP
CON
RES @MR2101              ; 動作中
CON
SET @R606                ; MSEP_Axis7 ｱﾗｰﾑ発生
CON
ENDS
STG @MR2107
ANB @MR200               ; MSEP_Axis7 ｱﾗｰﾑ発生
MOV.L DM10564 DM11022    ; MSEP Axis-7 現在位置（下位8bit）  RB6 現在位置1
MOV DM11028 DM11024      ; RB6 目標ﾎﾟｲﾝﾄ番号  RB6 現在ﾎﾟｼﾞｼｮﾝ番号
RES MR5012               ; MOVE SW 表示
CON
BRES DM10771 #2          ; MSEP Axis-7 制御信号
CON
BRES DM10771 #3          ; MSEP Axis-7 制御信号
CON
RES MR18205              ; RB6:MOVE
CON
RES MR18214              ; RB6:MOVE-STOP
CON
RES @MR2101              ; 動作中
CON
ENDS
LD @R603                 ; MSEP_Axis7 ｱﾗｰﾑ発生
ANB MR18213              ; RB6:ｱﾗｰﾑ出力
ANB R39004               ; ｴﾗｰ中
SET @MR008               ; RB6ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #80 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
SET @R612                ; MSEP_Axis7 ｱﾗｰﾑ発生
LD @R604                 ; MSEP_Axis7 ｱﾗｰﾑ発生
OR @R605                 ; MSEP_Axis7 ｱﾗｰﾑ発生
OR @R606                 ; MSEP_Axis7 ｱﾗｰﾑ発生
ANB MR18213              ; RB6:ｱﾗｰﾑ出力
ANB R39004               ; ｴﾗｰ中
SET @MR008               ; RB6ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #80 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
SET @R612                ; MSEP_Axis7 ｱﾗｰﾑ発生
STG @R612                ; MSEP_Axis7 ｱﾗｰﾑ発生
ZRES @R603 @R606         ; MSEP_Axis7 ｱﾗｰﾑ発生  MSEP_Axis7 ｱﾗｰﾑ発生
CON
AND @R101
RES @R101
CON
DW #0 DM60009
CON
AND @R105                ; SW1
SET MR18300              ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @R613
STG @R613
TMR #1955 #10
CON
AND T1955
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
RES @R100                ; MSEP_ｱﾗｰﾑ発生
CON
RES @MR008               ; RB6ｱﾗｰﾑON
CON
RES R39004               ; ｴﾗｰ中
CON
SET MR18205              ; RB6:MOVE
CON
ENDS
;RB6 (未使用) MSEP-Axis7 JOG/INCHING
LD= DM3000 #1918         ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND MR3307               ; 除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ 原点復帰済
AND @MR201               ; MSEP_Axis7 移動可
ANB @MR1101              ; 原点復帰中
ANB @MR2101              ; 動作中
MPS
ANB MR18207              ; RB6:JOG/INCH
OUT @MR3100              ; JOG　動作
MPP
AND MR18207              ; RB6:JOG/INCH
OUT @MR3107              ; INCHING　動作
LDP @MR3107              ; INCHING　動作
BSET DM10771 #5          ; MSEP Axis-7 制御信号
LDF @MR3107              ; INCHING　動作
BRES DM10771 #5          ; MSEP Axis-7 制御信号
LD @MR3100               ; JOG　動作
OR @MR3107               ; INCHING　動作
MPS
LD MR18211               ; RB6:JOG+動作
ANB MR18212              ; RB6:JOG-動作
ANL
BOUT DM10771 #8          ; MSEP Axis-7 制御信号
MPP
LD MR18212               ; RB6:JOG-動作
ANB MR18211              ; RB6:JOG+動作
ANL
BOUT DM10771 #7          ; MSEP Axis-7 制御信号
;RB6 (未使用) MSEP-Axis7 Point Data Write
LD CR2002                ; 常時ON
AND MR3307               ; 除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ 原点復帰済
MPS
ANP MR5100               ; NR除材 P1 選択
DW #1 DM11028            ; RB6 目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14600 MR14604     ; NR_除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P1  NR_除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P5
CON
SET MR14600              ; NR_除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P1
MRD
ANP MR5101               ; NR除材 P2 選択
DW #2 DM11028            ; RB6 目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14600 MR14604     ; NR_除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P1  NR_除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P5
CON
SET MR14601              ; NR_除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P2
MRD
ANP MR5102               ; NR除材 P3 選択
DW #3 DM11028            ; RB6 目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14600 MR14604     ; NR_除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P1  NR_除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P5
CON
SET MR14602              ; NR_除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P3
MRD
ANP MR5103               ; NR除材 P4 選択
DW #4 DM11028            ; RB6 目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14600 MR14604     ; NR_除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P1  NR_除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P5
CON
SET MR14603              ; NR_除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P4
MPP
ANP MR5104               ; NR除材 P5 選択
DW #5 DM11028            ; RB6 目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14600 MR14604     ; NR_除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P1  NR_除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P5
CON
SET MR14604              ; NR_除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P5
LD= DM3000 #1918         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR3307                ; 除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ 原点復帰済
OR CR2002                ; 常時ON
ANL
MPS
ANP MR5100               ; NR除材 P1 選択
MOV.L EM2030 EM1903      ; RB6 P1 目標位置（下位bit）  RB6 目標位置（下位bit）表示用
MOV EM2032 EM1905        ; RB6 P1 指令速度  RB6 指令速度表示用
MRD
ANP MR5101               ; NR除材 P2 選択
MOV.L EM2033 EM1903      ; RB6 P2 目標位置（下位bit）  RB6 目標位置（下位bit）表示用
MOV EM2035 EM1905        ; RB6 P2 指令速度  RB6 指令速度表示用
MRD
ANP MR5102               ; NR除材 P3 選択
MOV.L EM2036 EM1903      ; RB6 P3 目標位置（下位bit）  RB6 目標位置（下位bit）表示用
MOV EM2038 EM1905        ; RB6 P3 指令速度  RB6 指令速度表示用
MRD
ANP MR5103               ; NR除材 P4 選択
MOV.L EM2039 EM1903      ; RB6 P4 目標位置（下位bit）  RB6 目標位置（下位bit）表示用
MOV EM2041 EM1905        ; RB6 P4 指令速度  RB6 指令速度表示用
MPP
ANP MR5104               ; NR除材 P5 選択
MOV.L EM2042 EM1903      ; RB6 P5 目標位置（下位bit）  RB6 目標位置（下位bit）表示用
MOV EM2044 EM1905        ; RB6 P5 指令速度  RB6 指令速度表示用
LD= DM3000 #1918         ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND MR14600              ; NR_除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P1
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10564 EM2030     ; MSEP Axis-7 現在位置（下位8bit）  RB6 P1 目標位置（下位bit）
MOV EM1905 EM2032        ; RB6 指令速度表示用  RB6 P1 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1903 EM2030      ; RB6 目標位置（下位bit）表示用  RB6 P1 目標位置（下位bit）
MOV EM1905 EM2032        ; RB6 指令速度表示用  RB6 P1 指令速度
LD= DM3000 #1918         ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND MR14601              ; NR_除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P2
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10564 EM2033     ; MSEP Axis-7 現在位置（下位8bit）  RB6 P2 目標位置（下位bit）
MOV EM1905 EM2035        ; RB6 指令速度表示用  RB6 P2 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1903 EM2033      ; RB6 目標位置（下位bit）表示用  RB6 P2 目標位置（下位bit）
MOV EM1905 EM2035        ; RB6 指令速度表示用  RB6 P2 指令速度
LD= DM3000 #1918         ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND MR14602              ; NR_除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P3
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10564 EM2036     ; MSEP Axis-7 現在位置（下位8bit）  RB6 P3 目標位置（下位bit）
MOV EM1905 EM2038        ; RB6 指令速度表示用  RB6 P3 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1903 EM2036      ; RB6 目標位置（下位bit）表示用  RB6 P3 目標位置（下位bit）
MOV EM1905 EM2038        ; RB6 指令速度表示用  RB6 P3 指令速度
LD= DM3000 #1918         ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND MR14603              ; NR_除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P4
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10564 EM2039     ; MSEP Axis-7 現在位置（下位8bit）  RB6 P4 目標位置（下位bit）
MOV EM1905 EM2041        ; RB6 指令速度表示用  RB6 P4 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1903 EM2039      ; RB6 目標位置（下位bit）表示用  RB6 P4 目標位置（下位bit）
MOV EM1905 EM2041        ; RB6 指令速度表示用  RB6 P4 指令速度
LD= DM3000 #1918         ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND MR14604              ; NR_除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P5
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10564 EM2042     ; MSEP Axis-7 現在位置（下位8bit）  RB6 P5 目標位置（下位bit）
MOV EM1905 EM2044        ; RB6 指令速度表示用  RB6 P5 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1903 EM2042      ; RB6 目標位置（下位bit）表示用  RB6 P5 目標位置（下位bit）
MOV EM1905 EM2044        ; RB6 指令速度表示用  RB6 P5 指令速度
;EM42030.l = em2030.l - 2
;EM43030.l = em2030.l + 2
;EM42033.l = em2033.l - 2
;EM43033.l = em2033.l + 2
;EM42036.l = em2036.l - 2
;EM43036.l = em2036.l + 2
;EM42039.l = em2039.l - 2
;EM43039.l = em2039.l + 2
;EM42042.l = em2042.l - 2
;EM43042.l = em2042.l + 2
;EM42045.l = em2045.l - 2
;EM43045.l = em2045.l + 2
LD CR2002                ; 常時ON
NCJ #1001
;EM42030.l = em2030.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2030             ; RB6 P1 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42030
;EM43030.l = em2030.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2030             ; RB6 P1 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43030
;EM42033.l = em2033.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2033             ; RB6 P2 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42033
;EM43033.l = em2033.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2033             ; RB6 P2 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43033
;EM42036.l = em2036.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2036             ; RB6 P3 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42036
;EM43036.l = em2036.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2036             ; RB6 P3 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43036
;EM42039.l = em2039.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2039             ; RB6 P4 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42039
;EM43039.l = em2039.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2039             ; RB6 P4 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43039
;EM42042.l = em2042.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2042             ; RB6 P5 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42042
;EM43042.l = em2042.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2042             ; RB6 P5 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43042
;EM42045.l = em2045.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2045             ; RB6 P6 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42045
;EM43045.l = em2045.l + 2
LD CR2002                ; 常時ON
LDA.L EM2045             ; RB6 P6 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43045
LABEL #1001
;
LD CR2002                ; 常時ON
AND MR3307               ; 除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ 原点復帰済
MPS
LD<=.L EM42030 DM10564   ; MSEP Axis-7 現在位置（下位8bit）
AND<=.L DM10564 EM43030  ; MSEP Axis-7 現在位置（下位8bit）
LD>.L EM42030 DM10564    ; MSEP Axis-7 現在位置（下位8bit）
OR>.L DM10564 EM43030    ; MSEP Axis-7 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
AND MR14600              ; NR_除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P1
ORL
ANL
OUT MR24600              ; 除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P1
MRD
LD<=.L EM42033 DM10564   ; MSEP Axis-7 現在位置（下位8bit）
AND<=.L DM10564 EM43033  ; MSEP Axis-7 現在位置（下位8bit）
LD>.L EM42033 DM10564    ; MSEP Axis-7 現在位置（下位8bit）
OR>.L DM10564 EM43033    ; MSEP Axis-7 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
AND MR14601              ; NR_除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P2
ORL
ANL
OUT MR24601              ; 除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P2
MRD
LD<=.L EM42036 DM10564   ; MSEP Axis-7 現在位置（下位8bit）
AND<=.L DM10564 EM43036  ; MSEP Axis-7 現在位置（下位8bit）
LD>.L EM42036 DM10564    ; MSEP Axis-7 現在位置（下位8bit）
OR>.L DM10564 EM43036    ; MSEP Axis-7 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
AND MR14602              ; NR_除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P3
ORL
ANL
OUT MR24602              ; 除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P3
MRD
LD<=.L EM42039 DM10564   ; MSEP Axis-7 現在位置（下位8bit）
AND<=.L DM10564 EM43039  ; MSEP Axis-7 現在位置（下位8bit）
LD>.L EM42039 DM10564    ; MSEP Axis-7 現在位置（下位8bit）
OR>.L DM10564 EM43039    ; MSEP Axis-7 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
AND MR14603              ; NR_除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P4
ORL
ANL
OUT MR24603              ; 除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P4
MPP
LD<=.L EM42042 DM10564   ; MSEP Axis-7 現在位置（下位8bit）
AND<=.L DM10564 EM43042  ; MSEP Axis-7 現在位置（下位8bit）
LD>.L EM42042 DM10564    ; MSEP Axis-7 現在位置（下位8bit）
OR>.L DM10564 EM43042    ; MSEP Axis-7 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
AND MR14604              ; NR_除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P5
ORL
ANL
OUT MR24604              ; 除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P5
LD CR2002                ; 常時ON
AND MR3307               ; 除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ 原点復帰済
MPS
LD MR14600               ; NR_除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P1
LD>.L EM42030 DM10564    ; MSEP Axis-7 現在位置（下位8bit）
OR>.L DM10564 EM43030    ; MSEP Axis-7 現在位置（下位8bit）
ANL
ANB @MR2101              ; 動作中
ANP MR5013               ; MOVE SW
ANL
DW #1 DM11028            ; RB6 目標ﾎﾟｲﾝﾄ番号
CON
SET MR18205              ; RB6:MOVE
MRD
LD MR14601               ; NR_除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P2
LD>.L EM42033 DM10564    ; MSEP Axis-7 現在位置（下位8bit）
OR>.L DM10564 EM43033    ; MSEP Axis-7 現在位置（下位8bit）
ANL
ANB @MR2101              ; 動作中
ANP MR5013               ; MOVE SW
ANL
DW #2 DM11028            ; RB6 目標ﾎﾟｲﾝﾄ番号
CON
SET MR18205              ; RB6:MOVE
MRD
LD MR14602               ; NR_除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P3
LD>.L EM42036 DM10564    ; MSEP Axis-7 現在位置（下位8bit）
OR>.L DM10564 EM43036    ; MSEP Axis-7 現在位置（下位8bit）
ANL
ANB @MR2101              ; 動作中
ANP MR5013               ; MOVE SW
ANL
DW #3 DM11028            ; RB6 目標ﾎﾟｲﾝﾄ番号
CON
SET MR18205              ; RB6:MOVE
MRD
LD MR14603               ; NR_除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P4
LD>.L EM42039 DM10564    ; MSEP Axis-7 現在位置（下位8bit）
OR>.L DM10564 EM43039    ; MSEP Axis-7 現在位置（下位8bit）
ANL
ANB @MR2101              ; 動作中
ANP MR5013               ; MOVE SW
ANL
DW #4 DM11028            ; RB6 目標ﾎﾟｲﾝﾄ番号
CON
SET MR18205              ; RB6:MOVE
MPP
LD MR14604               ; NR_除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P5
LD>.L EM42042 DM10564    ; MSEP Axis-7 現在位置（下位8bit）
OR>.L DM10564 EM43042    ; MSEP Axis-7 現在位置（下位8bit）
ANL
ANB @MR2101              ; 動作中
ANP MR5013               ; MOVE SW
ANL
DW #5 DM11028            ; RB6 目標ﾎﾟｲﾝﾄ番号
CON
SET MR18205              ; RB6:MOVE
;RB6 (未使用) MSEP-Axis7　ｱﾗｰﾑﾘｾｯﾄ
STG MR18300              ; ｱﾗｰﾑﾘｾｯﾄ要求
SET MR18301              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
JMP MR18302
STG MR18302
SET MR18209              ; RB6:ARMRST
CON
JMP MR18303
STG MR18303
AND MR18200              ; RB6:動作完了
RES MR18301              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
RES MR18200              ; RB6:動作完了
CON
ENDS
LDP MR18209              ; RB6:ARMRST
ANB @MR3111              ; ｱﾗｰﾑﾘｾｯﾄ中
RES MR18209              ; RB6:ARMRST
CON
SET @MR3111              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
SET @MR3110              ; ｱﾗｰﾑﾘｾｯﾄ開始
STG @MR3110              ; ｱﾗｰﾑﾘｾｯﾄ開始
BSET DM10771 #3          ; MSEP Axis-7 制御信号
CON
MPS
BANB DM10571 #3          ; MSEP Axis-7 状態信号
JMP @MR3113
MPP
BAND DM10571 #3          ; MSEP Axis-7 状態信号
TMH #910 #50             ; MSEP_Axis7_ｳｪｲﾄﾀｲﾏ
CON
AND T910                 ; MSEP_Axis7_ｳｪｲﾄﾀｲﾏ
JMP @MR3112
STG @MR3112
ZRES MR18200 MR18203     ; RB6:動作完了  RB6:ﾏｸﾛ強制終了
CON
RES MR18209              ; RB6:ARMRST
CON
RES @MR3111              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
SET @R607                ; MSEP_Axis7 ｱﾗｰﾑ発生
CON
ENDS
STG @MR3113
MPS
BLDB DM10571 #3          ; MSEP Axis-7 状態信号
BAND DM10571 #4          ; MSEP Axis-7 状態信号
BAND DM10571 #14         ; MSEP Axis-7 状態信号
ANL
JMP @MR3114
MPP
BLD DM10571 #3           ; MSEP Axis-7 状態信号
BORB DM10571 #4          ; MSEP Axis-7 状態信号
BORB DM10571 #14         ; MSEP Axis-7 状態信号
ANL
TMR #911 #100            ; MSEP_Axis7_ｳｪｲﾄﾀｲﾏ
CON
AND T911                 ; MSEP_Axis7_ｳｪｲﾄﾀｲﾏ
JMP @MR3115
STG @MR3114
RES MR18209              ; RB6:ARMRST
CON
RES @MR3111              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
SET MR18200              ; RB6:動作完了
CON
ENDS
STG @MR3115
ZRES MR18200 MR18203     ; RB6:動作完了  RB6:ﾏｸﾛ強制終了
CON
RES MR18209              ; RB6:ARMRST
CON
RES @MR3111              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
SET @R608                ; MSEP_Axis7 ｱﾗｰﾑ発生
CON
ENDS
LD @R607                 ; MSEP_Axis7 ｱﾗｰﾑ発生
OR @R608                 ; MSEP_Axis7 ｱﾗｰﾑ発生
ANB R39004               ; ｴﾗｰ中
SET @MR008               ; RB6ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #80 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
SET @R614
STG @R614
ZRES @R607 @R608         ; MSEP_Axis7 ｱﾗｰﾑ発生  MSEP_Axis7 ｱﾗｰﾑ発生
CON
AND @R101
RES @R101
CON
DW #0 DM60009
CON
AND @R105                ; SW1
SET MR18300              ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @R615
STG @R615
TMR #1956 #10
CON
AND T1956
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
RES @R100                ; MSEP_ｱﾗｰﾑ発生
CON
RES @MR008               ; RB6ｱﾗｰﾑON
CON
RES R39004               ; ｴﾗｰ中
CON
ENDS
;<h1/>RB1 (ｽｷｰｼﾞ) MSEP-Axis0
BLD DM10515 #3           ; MSEP Axis-0 状態信号
OUT @MR300               ; MSEP_Axis0 ｱﾗｰﾑ発生
BLD DM10515 #4           ; MSEP Axis-0 状態信号
BAND DM10515 #14         ; MSEP Axis-0 状態信号
BANB DM10515 #15         ; MSEP Axis-0 状態信号
OUT @MR301               ; MSEP_Axis0 移動可
BLD DM10515 #0           ; MSEP Axis-0 状態信号
OUT MR18415              ; RB1:位置決め完了
BLD DM10515 #3           ; MSEP Axis-0 状態信号
ANB @MR010               ; RB2ｱﾗｰﾑON
ANB R46114               ; _装置原点復帰待ち
OUT MR18413              ; RB1:ｱﾗｰﾑ出力
LDP MR18413              ; RB1:ｱﾗｰﾑ出力
ANB R39004               ; ｴﾗｰ中
SET @MR009               ; RB1ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #12 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
LDA DM10514              ; MSEP Axis-0 ｱﾗｰﾑｺｰﾄﾞ
CON
STA DM20030              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET @R004
STG @R004
AND @R101
RES @R101
CON
DW #0 DM60009
CON
AND @R105                ; SW1
DW #0 DM20030            ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET MR18500              ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @R005
STG @R005
TMR #1932 #5
CON
AND T1932
RES @R100                ; MSEP_ｱﾗｰﾑ発生
CON
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
RES @MR009               ; RB1ｱﾗｰﾑON
CON
RES R39004               ; ｴﾗｰ中
CON
ENDS
LDP MR1303               ; ｽｷｰｼﾞRB ｻｰﾎﾞｵﾝ ﾗﾝﾌﾟ
BSET DM10715 #4          ; MSEP Axis-0 制御信号
LDF MR1303               ; ｽｷｰｼﾞRB ｻｰﾎﾞｵﾝ ﾗﾝﾌﾟ
BRES DM10715 #4          ; MSEP Axis-0 制御信号
BLD DM10715 #4           ; MSEP Axis-0 制御信号
OUT MR17707              ; ｽｷｰｼﾞ軸ｻｰﾎﾞON表示
;RB1 (ｽｷｰｼﾞ) MSEP-Axis0　原点復帰開始
LDP MR1200               ; ｽｷｰｼﾞRB原点復帰 SW
ORP MR18404              ; RB1:HOME
ANB @MR1201              ; 原点復帰中
AND @MR301               ; MSEP_Axis0 移動可
RES MR1306               ; ｽｷｰｼﾞRB 原点復帰済み ﾗﾝﾌﾟ
CON
RES MR18402              ; RB1:原点復帰完了
CON
RES MR18404              ; RB1:HOME
CON
SET @MR1201              ; 原点復帰中
CON
SET @MR1200              ; 原点復帰開始
STG @MR1200              ; 原点復帰開始
ANB @MR300               ; MSEP_Axis0 ｱﾗｰﾑ発生
AND @MR003               ; MSEP動作可
BRES DM10715 #0          ; MSEP Axis-0 制御信号
CON
BRES DM10715 #2          ; MSEP Axis-0 制御信号
CON
BRES DM10715 #3          ; MSEP Axis-0 制御信号
CON
BSET DM10715 #4          ; MSEP Axis-0 制御信号
CON
JMP @MR1203
STG @MR1203
ANB @MR300               ; MSEP_Axis0 ｱﾗｰﾑ発生
MPS
LD @MR301                ; MSEP_Axis0 移動可
BANB DM10515 #2          ; MSEP Axis-0 状態信号
ANL
JMP @MR1204
MPP
ANB @MR301               ; MSEP_Axis0 移動可
TMR #920 #300            ; MSEP_Axis0_ｳｪｲﾄﾀｲﾏ
CON
AND T920                 ; MSEP_Axis0_ｳｪｲﾄﾀｲﾏ
RES @MR1201              ; 原点復帰中
CON
BRES DM10715 #4          ; MSEP Axis-0 制御信号
CON
SET @R700                ; MSEP_Axis0 ｱﾗｰﾑ発生
CON
ENDS
STG @MR1204
ANB @MR300               ; MSEP_Axis0 ｱﾗｰﾑ発生
BSET DM10715 #1          ; MSEP Axis-0 制御信号
CON
JMP @MR1205
STG @MR1205
ANB @MR300               ; MSEP_Axis0 ｱﾗｰﾑ発生
MPS
BANB DM10515 #0          ; MSEP Axis-0 状態信号
BRES DM10715 #1          ; MSEP Axis-0 制御信号
CON
JMP @MR1206
MPP
BAND DM10515 #0          ; MSEP Axis-0 状態信号
TMR #921 #300            ; MSEP_Axis0_ｳｪｲﾄﾀｲﾏ
CON
AND T921                 ; MSEP_Axis0_ｳｪｲﾄﾀｲﾏ
RES @MR1201              ; 原点復帰中
CON
BRES DM10715 #4          ; MSEP Axis-0 制御信号
CON
SET @R701                ; MSEP_Axis0 ｱﾗｰﾑ発生
CON
ENDS
STG @MR1206
ANB @MR300               ; MSEP_Axis0 ｱﾗｰﾑ発生
MPS
BLDB DM10515 #2          ; MSEP Axis-0 状態信号
BAND DM10515 #0          ; MSEP Axis-0 状態信号
ANL
JMP @MR1207
MPP
BANB DM10515 #0          ; MSEP Axis-0 状態信号
TMR #922 #300            ; MSEP_Axis0_ｳｪｲﾄﾀｲﾏ
CON
AND T922                 ; MSEP_Axis0_ｳｪｲﾄﾀｲﾏ
RES @MR1201              ; 原点復帰中
CON
BRES DM10715 #4          ; MSEP Axis-0 制御信号
CON
SET @R702                ; MSEP_Axis0 ｱﾗｰﾑ発生
CON
ENDS
STG @MR1207
ANB @MR300               ; MSEP_Axis0 ｱﾗｰﾑ発生
DW.D #0 DM11042          ; RB1 現在位置1
CON
DW #0 DM11044            ; RB1 現在ﾎﾟｼﾞｼｮﾝ番号
CON
JMP @MR1208
STG @MR1208
RES @MR1201              ; 原点復帰中
CON
SET MR1306               ; ｽｷｰｼﾞRB 原点復帰済み ﾗﾝﾌﾟ
CON
SET MR18402              ; RB1:原点復帰完了
CON
ENDS
LD @R700                 ; MSEP_Axis0 ｱﾗｰﾑ発生
ANB MR18413              ; RB1:ｱﾗｰﾑ出力
ANB R39004               ; ｴﾗｰ中
SET @MR009               ; RB1ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #82 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
SET @R710                ; MSEP_Axis0 ｱﾗｰﾑ発生
LD @R701                 ; MSEP_Axis0 ｱﾗｰﾑ発生
OR @R702                 ; MSEP_Axis0 ｱﾗｰﾑ発生
ANB MR18413              ; RB1:ｱﾗｰﾑ出力
ANB R39004               ; ｴﾗｰ中
SET @MR009               ; RB1ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #82 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
SET @R710                ; MSEP_Axis0 ｱﾗｰﾑ発生
STG @R710                ; MSEP_Axis0 ｱﾗｰﾑ発生
ZRES @R700 @R702         ; MSEP_Axis0 ｱﾗｰﾑ発生  MSEP_Axis0 ｱﾗｰﾑ発生
CON
AND @R101
RES @R101
CON
DW #0 DM60009
CON
AND @R105                ; SW1
SET MR18500              ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @R711
STG @R711
TMR #1958 #10
CON
AND T1958
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
RES @R100                ; MSEP_ｱﾗｰﾑ発生
CON
RES R39004               ; ｴﾗｰ中
CON
SET @MR1200              ; 原点復帰開始
CON
RES @MR009               ; RB1ｱﾗｰﾑON
CON
ENDS
;RB1 (ｽｷｰｼﾞ) MSEP-Axis0　ﾎﾟｲﾝﾄﾃﾞｰﾀｾｯﾄ→移動
LDP MR18405              ; RB1:MOVE
ANB @MR2201              ; 動作中
RES MR18405              ; RB1:MOVE
CON
SET MR5112               ; MOVE SW 表示
CON
SET @MR2201              ; 動作中
CON
SET @MR2200              ; 動作開始
STG @MR2200              ; 動作開始
ANB @MR300               ; MSEP_Axis0 ｱﾗｰﾑ発生
MPS
LD @MR301                ; MSEP_Axis0 移動可
BANB DM10515 #2          ; MSEP Axis-0 状態信号
ANL
BRES DM10715 #2          ; MSEP Axis-0 制御信号
CON
BRES DM10715 #3          ; MSEP Axis-0 制御信号
CON
JMP @MR2203
MPP
ANB @MR301               ; MSEP_Axis0 移動可
TMR #923 #300            ; MSEP_Axis0_ｳｪｲﾄﾀｲﾏ
CON
AND T923                 ; MSEP_Axis0_ｳｪｲﾄﾀｲﾏ
RES MR5112               ; MOVE SW 表示
CON
BRES DM10715 #2          ; MSEP Axis-0 制御信号
CON
BRES DM10715 #3          ; MSEP Axis-0 制御信号
CON
RES MR18405              ; RB1:MOVE
CON
RES MR18414              ; RB1:MOVE-STOP
CON
RES @MR2201              ; 動作中
CON
SET @R703                ; MSEP_Axis0 ｱﾗｰﾑ発生
CON
ENDS
STG @MR2203
ANB @MR300               ; MSEP_Axis0 ｱﾗｰﾑ発生
MPS
AND= DM11048 #1          ; RB1 目標ﾎﾟｲﾝﾄ番号
MOV.L EM2060 DM10708     ; RB1 P1 目標位置（下位bit）  MSEP Axis-0 目標位置（下位8bit）
MOV EM2062 DM10712       ; RB1 P1 指令速度  MSEP Axis-0 速度
MRD
AND= DM11048 #2          ; RB1 目標ﾎﾟｲﾝﾄ番号
MOV.L EM2063 DM10708     ; RB1 P2 目標位置（下位bit）  MSEP Axis-0 目標位置（下位8bit）
MOV EM2065 DM10712       ; RB1 P2 指令速度  MSEP Axis-0 速度
MRD
AND= DM11048 #3          ; RB1 目標ﾎﾟｲﾝﾄ番号
MOV.L EM2066 DM10708     ; RB1 P3 目標位置（下位bit）  MSEP Axis-0 目標位置（下位8bit）
MOV EM2068 DM10712       ; RB1 P3 指令速度  MSEP Axis-0 速度
MRD
AND= DM11048 #4          ; RB1 目標ﾎﾟｲﾝﾄ番号
MOV.L EM2069 DM10708     ; RB1 P4 目標位置（下位bit）  MSEP Axis-0 目標位置（下位8bit）
MOV EM2071 DM10712       ; RB1 P4 指令速度  MSEP Axis-0 速度
MRD
AND= DM11048 #5          ; RB1 目標ﾎﾟｲﾝﾄ番号
MOV.L EM2072 DM10708     ; RB1 P5 目標位置（下位bit）  MSEP Axis-0 目標位置（下位8bit）
MOV EM2074 DM10712       ; RB1 P5 指令速度  MSEP Axis-0 速度
MPP
TMR #924 #2              ; MSEP_Axis0_ｳｪｲﾄﾀｲﾏ
CON
AND T924                 ; MSEP_Axis0_ｳｪｲﾄﾀｲﾏ
JMP @MR2204
STG @MR2204
ANB @MR300               ; MSEP_Axis0 ｱﾗｰﾑ発生
BSET DM10715 #0          ; MSEP Axis-0 制御信号
CON
JMP @MR2205
STG @MR2205
ANB @MR300               ; MSEP_Axis0 ｱﾗｰﾑ発生
MPS
BANB DM10515 #0          ; MSEP Axis-0 状態信号
BRES DM10715 #0          ; MSEP Axis-0 制御信号
CON
JMP @MR2206
MPP
BAND DM10515 #0          ; MSEP Axis-0 状態信号
TMR #925 #50             ; MSEP_Axis0_ｳｪｲﾄﾀｲﾏ
CON
AND T925                 ; MSEP_Axis0_ｳｪｲﾄﾀｲﾏ
BRES DM10715 #0          ; MSEP Axis-0 制御信号
CON
RES MR5112               ; MOVE SW 表示
CON
BRES DM10715 #2          ; MSEP Axis-0 制御信号
CON
BRES DM10715 #3          ; MSEP Axis-0 制御信号
CON
RES MR18405              ; RB1:MOVE
CON
RES MR18414              ; RB1:MOVE-STOP
CON
RES @MR2201              ; 動作中
CON
SET @R704                ; MSEP_Axis0 ｱﾗｰﾑ発生
CON
ENDS
STG @MR2206
ANB @MR300               ; MSEP_Axis0 ｱﾗｰﾑ発生
MPS
BLDB DM10515 #2          ; MSEP Axis-0 状態信号
BAND DM10515 #0          ; MSEP Axis-0 状態信号
ANL
TMH #926 #10             ; MSEP_Axis0_ｳｪｲﾄﾀｲﾏ
CON
AND T926                 ; MSEP_Axis0_ｳｪｲﾄﾀｲﾏ
JMP @MR2207
MRD
BLD DM10515 #2           ; MSEP Axis-0 状態信号
AND MR18414              ; RB1:MOVE-STOP
ANL
JMP @MR2208
MPP
BANB DM10515 #2          ; MSEP Axis-0 状態信号
TMR #927 #600            ; MSEP_Axis0_ｳｪｲﾄﾀｲﾏ
CON
AND T927                 ; MSEP_Axis0_ｳｪｲﾄﾀｲﾏ
RES MR5112               ; MOVE SW 表示
CON
BRES DM10715 #2          ; MSEP Axis-0 制御信号
CON
BRES DM10715 #3          ; MSEP Axis-0 制御信号
CON
RES MR18405              ; RB1:MOVE
CON
RES MR18414              ; RB1:MOVE-STOP
CON
RES @MR2201              ; 動作中
CON
SET @R705                ; MSEP_Axis0 ｱﾗｰﾑ発生
CON
ENDS
STG @MR2208
BSET DM10715 #2          ; MSEP Axis-0 制御信号
CON
BANB DM10515 #2          ; MSEP Axis-0 状態信号
JMP @MR2209
STG @MR2209
BSET DM10715 #3          ; MSEP Axis-0 制御信号
CON
TMH #928 #7              ; MSEP_Axis0_ｳｪｲﾄﾀｲﾏ
CON
AND T928                 ; MSEP_Axis0_ｳｪｲﾄﾀｲﾏ
BRES DM10715 #2          ; MSEP Axis-0 制御信号
CON
BRES DM10715 #3          ; MSEP Axis-0 制御信号
CON
JMP @MR2210
STG @MR2210
MPS
BAND DM10515 #0          ; MSEP Axis-0 状態信号
JMP @MR2207
MPP
BANB DM10515 #0          ; MSEP Axis-0 状態信号
TMR #929 #50             ; MSEP_Axis0_ｳｪｲﾄﾀｲﾏ
CON
AND T929                 ; MSEP_Axis0_ｳｪｲﾄﾀｲﾏ
BRES DM10715 #0          ; MSEP Axis-0 制御信号
CON
RES MR5112               ; MOVE SW 表示
CON
BRES DM10715 #2          ; MSEP Axis-0 制御信号
CON
BRES DM10715 #3          ; MSEP Axis-0 制御信号
CON
RES MR18405              ; RB1:MOVE
CON
RES MR18414              ; RB1:MOVE-STOP
CON
RES @MR2201              ; 動作中
CON
SET @R706                ; MSEP_Axis0 ｱﾗｰﾑ発生
CON
ENDS
STG @MR2207
ANB @MR300               ; MSEP_Axis0 ｱﾗｰﾑ発生
MOV.L DM10508 DM11042    ; MSEP Axis-0 現在位置（下位8bit）  RB1 現在位置1
MOV DM11048 DM11044      ; RB1 目標ﾎﾟｲﾝﾄ番号  RB1 現在ﾎﾟｼﾞｼｮﾝ番号
RES MR5112               ; MOVE SW 表示
CON
BRES DM10715 #2          ; MSEP Axis-0 制御信号
CON
BRES DM10715 #3          ; MSEP Axis-0 制御信号
CON
RES MR18405              ; RB1:MOVE
CON
RES MR18414              ; RB1:MOVE-STOP
CON
RES @MR2201              ; 動作中
CON
ENDS
LD @R703                 ; MSEP_Axis0 ｱﾗｰﾑ発生
ANB R39004               ; ｴﾗｰ中
SET @MR009               ; RB1ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #82 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
SET @R712                ; MSEP_Axis0 ｱﾗｰﾑ発生
LD @R704                 ; MSEP_Axis0 ｱﾗｰﾑ発生
OR @R705                 ; MSEP_Axis0 ｱﾗｰﾑ発生
OR @R706                 ; MSEP_Axis0 ｱﾗｰﾑ発生
ANB MR18413              ; RB1:ｱﾗｰﾑ出力
ANB R39004               ; ｴﾗｰ中
SET @MR009               ; RB1ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #82 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
SET @R712                ; MSEP_Axis0 ｱﾗｰﾑ発生
STG @R712                ; MSEP_Axis0 ｱﾗｰﾑ発生
ZRES @R703 @R706         ; MSEP_Axis0 ｱﾗｰﾑ発生  MSEP_Axis0 ｱﾗｰﾑ発生
CON
AND @R101
RES @R101
CON
DW #0 DM60009
CON
AND @R105                ; SW1
SET MR18500              ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @R713
STG @R713
TMR #1959 #10
CON
AND T1959
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
RES @R100                ; MSEP_ｱﾗｰﾑ発生
CON
RES @MR009               ; RB1ｱﾗｰﾑON
CON
RES R39004               ; ｴﾗｰ中
CON
SET MR18405              ; RB1:MOVE
CON
ENDS
;RB1 (ｽｷｰｼﾞ) MSEP-Axis0　JOG/INCHING
LD= DM3000 #1916         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1907         ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND MR1306               ; ｽｷｰｼﾞRB 原点復帰済み ﾗﾝﾌﾟ
AND @MR301               ; MSEP_Axis0 移動可
ANB @MR1201              ; 原点復帰中
ANB @MR2201              ; 動作中
MPS
ANB MR18407              ; RB1:JOG/INCH
OUT @MR3200              ; JOG　動作
MPP
AND MR18407              ; RB1:JOG/INCH
OUT @MR3207              ; INCHING　動作
LDP @MR3207              ; INCHING　動作
BSET DM10715 #5          ; MSEP Axis-0 制御信号
LDF @MR3207              ; INCHING　動作
BRES DM10715 #5          ; MSEP Axis-0 制御信号
LD @MR3200               ; JOG　動作
OR @MR3207               ; INCHING　動作
MPS
LD MR18411               ; RB1:JOG+動作
ANB MR18412              ; RB1:JOG-動作
ANL
BOUT DM10715 #8          ; MSEP Axis-0 制御信号
MPP
LD MR18412               ; RB1:JOG-動作
ANB MR18411              ; RB1:JOG+動作
ANL
BOUT DM10715 #7          ; MSEP Axis-0 制御信号
;RB1 (ｽｷｰｼﾞ) MSEP-Axis0 Point Data Write
LD CR2002                ; 常時ON
LD MR1306                ; ｽｷｰｼﾞRB 原点復帰済み ﾗﾝﾌﾟ
OR CR2002                ; 常時ON
ANL
MPS
ANP MR5200               ; ｽｷｰｼﾞ P1 選択
DW #1 DM11048            ; RB1 目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14800 MR14804     ; NR_ｽｷｰｼﾞ_P1  NR_ｽｷｰｼﾞ_P5
CON
ZRES MR13700 MR13704     ; CR_ｽｷｰｼﾞ_P1  CR_ｽｷｰｼﾞ_P5
CON
SET MR13700              ; CR_ｽｷｰｼﾞ_P1
CON
SET MR14800              ; NR_ｽｷｰｼﾞ_P1
MRD
ANP MR5201               ; ｽｷｰｼﾞ P2 選択
DW #2 DM11048            ; RB1 目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14800 MR14804     ; NR_ｽｷｰｼﾞ_P1  NR_ｽｷｰｼﾞ_P5
CON
ZRES MR13700 MR13704     ; CR_ｽｷｰｼﾞ_P1  CR_ｽｷｰｼﾞ_P5
CON
SET MR13701              ; CR_ｽｷｰｼﾞ_P2
CON
SET MR14801              ; NR_ｽｷｰｼﾞ_P2
MRD
ANP MR5202               ; ｽｷｰｼﾞ P3 選択
DW #3 DM11048            ; RB1 目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14800 MR14804     ; NR_ｽｷｰｼﾞ_P1  NR_ｽｷｰｼﾞ_P5
CON
ZRES MR13700 MR13704     ; CR_ｽｷｰｼﾞ_P1  CR_ｽｷｰｼﾞ_P5
CON
SET MR13702              ; CR_ｽｷｰｼﾞ_P3
CON
SET MR14802              ; NR_ｽｷｰｼﾞ_P3
MRD
ANP MR5203               ; ｽｷｰｼﾞ P4 選択
DW #4 DM11048            ; RB1 目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14800 MR14804     ; NR_ｽｷｰｼﾞ_P1  NR_ｽｷｰｼﾞ_P5
CON
ZRES MR13700 MR13704     ; CR_ｽｷｰｼﾞ_P1  CR_ｽｷｰｼﾞ_P5
CON
SET MR13703              ; CR_ｽｷｰｼﾞ_P4
CON
SET MR14803              ; NR_ｽｷｰｼﾞ_P4
MPP
ANP MR5204               ; ｽｷｰｼﾞ P5 選択
DW #5 DM11048            ; RB1 目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14800 MR14804     ; NR_ｽｷｰｼﾞ_P1  NR_ｽｷｰｼﾞ_P5
CON
ZRES MR13700 MR13704     ; CR_ｽｷｰｼﾞ_P1  CR_ｽｷｰｼﾞ_P5
CON
SET MR13704              ; CR_ｽｷｰｼﾞ_P5
CON
SET MR14804              ; NR_ｽｷｰｼﾞ_P5
LD= DM3000 #1907         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1916         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR1306                ; ｽｷｰｼﾞRB 原点復帰済み ﾗﾝﾌﾟ
OR CR2002                ; 常時ON
ANL
MPS
ANP MR5200               ; ｽｷｰｼﾞ P1 選択
MOV.L EM2060 EM1906      ; RB1 P1 目標位置（下位bit）  RB1 目標位置（下位bit）表示用
MOV EM2062 EM1908        ; RB1 P1 指令速度  RB1 指令速度表示用
MRD
ANP MR5201               ; ｽｷｰｼﾞ P2 選択
MOV.L EM2063 EM1906      ; RB1 P2 目標位置（下位bit）  RB1 目標位置（下位bit）表示用
MOV EM2065 EM1908        ; RB1 P2 指令速度  RB1 指令速度表示用
MRD
ANP MR5202               ; ｽｷｰｼﾞ P3 選択
MOV.L EM2066 EM1906      ; RB1 P3 目標位置（下位bit）  RB1 目標位置（下位bit）表示用
MOV EM2068 EM1908        ; RB1 P3 指令速度  RB1 指令速度表示用
MRD
ANP MR5203               ; ｽｷｰｼﾞ P4 選択
MOV.L EM2069 EM1906      ; RB1 P4 目標位置（下位bit）  RB1 目標位置（下位bit）表示用
MOV EM2071 EM1908        ; RB1 P4 指令速度  RB1 指令速度表示用
MPP
ANP MR5204               ; ｽｷｰｼﾞ P5 選択
MOV.L EM2072 EM1906      ; RB1 P5 目標位置（下位bit）  RB1 目標位置（下位bit）表示用
MOV EM2074 EM1908        ; RB1 P5 指令速度  RB1 指令速度表示用
LD= DM3000 #1907         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1916         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR13700               ; CR_ｽｷｰｼﾞ_P1
OR MR14800               ; NR_ｽｷｰｼﾞ_P1
ANL
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10508 EM2060     ; MSEP Axis-0 現在位置（下位8bit）  RB1 P1 目標位置（下位bit）
MOV EM1908 EM2062        ; RB1 指令速度表示用  RB1 P1 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1906 EM2060      ; RB1 目標位置（下位bit）表示用  RB1 P1 目標位置（下位bit）
MOV EM1908 EM2062        ; RB1 指令速度表示用  RB1 P1 指令速度
LD= DM3000 #1907         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1916         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR13701               ; CR_ｽｷｰｼﾞ_P2
OR MR14801               ; NR_ｽｷｰｼﾞ_P2
ANL
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10508 EM2063     ; MSEP Axis-0 現在位置（下位8bit）  RB1 P2 目標位置（下位bit）
MOV EM1908 EM2065        ; RB1 指令速度表示用  RB1 P2 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1906 EM2063      ; RB1 目標位置（下位bit）表示用  RB1 P2 目標位置（下位bit）
MOV EM1908 EM2065        ; RB1 指令速度表示用  RB1 P2 指令速度
LD= DM3000 #1907         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1916         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR13702               ; CR_ｽｷｰｼﾞ_P3
OR MR14802               ; NR_ｽｷｰｼﾞ_P3
ANL
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10508 EM2066     ; MSEP Axis-0 現在位置（下位8bit）  RB1 P3 目標位置（下位bit）
MOV EM1908 EM2068        ; RB1 指令速度表示用  RB1 P3 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1906 EM2066      ; RB1 目標位置（下位bit）表示用  RB1 P3 目標位置（下位bit）
MOV EM1908 EM2068        ; RB1 指令速度表示用  RB1 P3 指令速度
LD= DM3000 #1907         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1916         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR13703               ; CR_ｽｷｰｼﾞ_P4
OR MR14803               ; NR_ｽｷｰｼﾞ_P4
ANL
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10508 EM2069     ; MSEP Axis-0 現在位置（下位8bit）  RB1 P4 目標位置（下位bit）
MOV EM1908 EM2071        ; RB1 指令速度表示用  RB1 P4 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1906 EM2069      ; RB1 目標位置（下位bit）表示用  RB1 P4 目標位置（下位bit）
MOV EM1908 EM2071        ; RB1 指令速度表示用  RB1 P4 指令速度
LD= DM3000 #1907         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1916         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR13704               ; CR_ｽｷｰｼﾞ_P5
OR MR14804               ; NR_ｽｷｰｼﾞ_P5
ANL
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10508 EM2072     ; MSEP Axis-0 現在位置（下位8bit）  RB1 P5 目標位置（下位bit）
MOV EM1908 EM2074        ; RB1 指令速度表示用  RB1 P5 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1906 EM2072      ; RB1 目標位置（下位bit）表示用  RB1 P5 目標位置（下位bit）
MOV EM1908 EM2074        ; RB1 指令速度表示用  RB1 P5 指令速度
;EM42060.l = em2060.l - 2
;EM43060.l = em2060.l + 2
;EM42063.l = em2063.l - 2
;EM43063.l = em2063.l + 2
;EM42066.l = em2066.l - 2
;EM43066.l = em2066.l + 2
;EM42069.l = em2069.l - 2
;EM43069.l = em2069.l + 2
;EM42072.l = em2072.l - 2
;EM43072.l = em2072.l + 2
;EM42075.l = em2075.l - 2
;EM43075.l = em2075.l + 2
LD CR2002                ; 常時ON
NCJ #1002
;EM42060.l = em2060.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2060             ; RB1 P1 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42060
;EM43060.l = em2060.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2060             ; RB1 P1 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43060
;EM42063.l = em2063.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2063             ; RB1 P2 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42063
;EM43063.l = em2063.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2063             ; RB1 P2 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43063
;EM42066.l = em2066.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2066             ; RB1 P3 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42066
;EM43066.l = em2066.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2066             ; RB1 P3 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43066
;EM42069.l = em2069.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2069             ; RB1 P4 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42069
;EM43069.l = em2069.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2069             ; RB1 P4 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43069
;EM42072.l = em2072.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2072             ; RB1 P5 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42072
;EM43072.l = em2072.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2072             ; RB1 P5 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43072
;EM42075.l = em2075.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2075             ; RB1 P6 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42075
;EM43075.l = em2075.l + 2
LD CR2002                ; 常時ON
LDA.L EM2075             ; RB1 P6 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43075
LABEL #1002
;
LD MR1303                ; ｽｷｰｼﾞRB ｻｰﾎﾞｵﾝ ﾗﾝﾌﾟ
AND MR1306               ; ｽｷｰｼﾞRB 原点復帰済み ﾗﾝﾌﾟ
BANB DM10515 #2          ; MSEP Axis-0 状態信号
AND MR1011               ; 接着剤塗布RB 原点復帰済み ﾗﾝﾌﾟ
AND MR1006               ; 接着剤塗布RB ｻｰﾎﾞｵﾝ ﾗﾝﾌﾟ
BANB DM10531 #2          ; MSEP Axis-2 状態信号
LD MR23600               ; 接着剤塗布_P1
OR CR2002                ; 常時ON
ANL
ANB R7602                ; 接着剤塗布部 ﾍｯﾄﾞ 前限
AND R7603                ; 接着剤塗布部 ﾍｯﾄﾞ 後限
AND MR20107              ; MC 軸1ｻｰﾎﾞON
AND MR20307              ; MC 軸2ｻｰﾎﾞON
ANB MR21110              ; MC 軸1BUSY
ANB MR21310              ; MC 軸2BUSY
OUT MR1304               ; ｽｷｰｼﾞRB ｲﾝﾀｰﾛｯｸ ﾗﾝﾌﾟ
LD MR1306                ; ｽｷｰｼﾞRB 原点復帰済み ﾗﾝﾌﾟ
BANB DM10515 #2          ; MSEP Axis-0 状態信号
AND MR1011               ; 接着剤塗布RB 原点復帰済み ﾗﾝﾌﾟ
BANB DM10531 #2          ; MSEP Axis-2 状態信号
ANB R7602                ; 接着剤塗布部 ﾍｯﾄﾞ 前限
AND R7603                ; 接着剤塗布部 ﾍｯﾄﾞ 後限
ANB MR21110              ; MC 軸1BUSY
ANB MR21310              ; MC 軸2BUSY
LD R7406                 ; ｽｷｰｼﾞ部 ｽｸﾚｰﾊﾟｰ（小） 下限
OR R7408                 ; ｽｷｰｼﾞ部 ｽｸﾚｰﾊﾟｰ（大） 下限
AND<= DM10524 #220       ; MSEP Axis-2 現在位置（下位8bit）
AND>= DM21790 #26500     ; 軸1 現在座標
LD R7407                 ; ｽｷｰｼﾞ部 ｽｸﾚｰﾊﾟｰ（小） 上限
AND R7409                ; ｽｷｰｼﾞ部 ｽｸﾚｰﾊﾟｰ（大） 上限
ORL
ANL
OUT MR1304               ; ｽｷｰｼﾞRB ｲﾝﾀｰﾛｯｸ ﾗﾝﾌﾟ
LD CR2002                ; 常時ON
AND MR1306               ; ｽｷｰｼﾞRB 原点復帰済み ﾗﾝﾌﾟ
MPS
LD<=.L EM42060 DM10508   ; MSEP Axis-0 現在位置（下位8bit）
AND<=.L DM10508 EM43060  ; MSEP Axis-0 現在位置（下位8bit）
LD>.L EM42060 DM10508    ; MSEP Axis-0 現在位置（下位8bit）
OR>.L DM10508 EM43060    ; MSEP Axis-0 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
LD MR14800               ; NR_ｽｷｰｼﾞ_P1
OR MR13700               ; CR_ｽｷｰｼﾞ_P1
ANL
ORL
ANL
OUT MR23700              ; ｽｷｰｼﾞ_P1
MRD
LD<=.L EM42063 DM10508   ; MSEP Axis-0 現在位置（下位8bit）
AND<=.L DM10508 EM43063  ; MSEP Axis-0 現在位置（下位8bit）
LD>.L EM42063 DM10508    ; MSEP Axis-0 現在位置（下位8bit）
OR>.L DM10508 EM43063    ; MSEP Axis-0 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
LD MR14801               ; NR_ｽｷｰｼﾞ_P2
OR MR13701               ; CR_ｽｷｰｼﾞ_P2
ANL
ORL
ANL
OUT MR23701              ; ｽｷｰｼﾞ_P2
MRD
LD<=.L EM42066 DM10508   ; MSEP Axis-0 現在位置（下位8bit）
AND<=.L DM10508 EM43066  ; MSEP Axis-0 現在位置（下位8bit）
LD>.L EM42066 DM10508    ; MSEP Axis-0 現在位置（下位8bit）
OR>.L DM10508 EM43066    ; MSEP Axis-0 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
LD MR14802               ; NR_ｽｷｰｼﾞ_P3
OR MR13702               ; CR_ｽｷｰｼﾞ_P3
ANL
ORL
ANL
OUT MR23702              ; ｽｷｰｼﾞ_P3
MRD
LD<=.L EM42069 DM10508   ; MSEP Axis-0 現在位置（下位8bit）
AND<=.L DM10508 EM43069  ; MSEP Axis-0 現在位置（下位8bit）
LD>.L EM42069 DM10508    ; MSEP Axis-0 現在位置（下位8bit）
OR>.L DM10508 EM43069    ; MSEP Axis-0 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
LD MR14803               ; NR_ｽｷｰｼﾞ_P4
OR MR13703               ; CR_ｽｷｰｼﾞ_P4
ANL
ORL
ANL
OUT MR23703              ; ｽｷｰｼﾞ_P4
MPP
LD<=.L EM42072 DM10508   ; MSEP Axis-0 現在位置（下位8bit）
AND<=.L DM10508 EM43072  ; MSEP Axis-0 現在位置（下位8bit）
LD>.L EM42072 DM10508    ; MSEP Axis-0 現在位置（下位8bit）
OR>.L DM10508 EM43072    ; MSEP Axis-0 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
LD MR14804               ; NR_ｽｷｰｼﾞ_P5
OR MR13704               ; CR_ｽｷｰｼﾞ_P5
ANL
ORL
ANL
OUT MR23704              ; ｽｷｰｼﾞ_P5
LD CR2002                ; 常時ON
AND MR1306               ; ｽｷｰｼﾞRB 原点復帰済み ﾗﾝﾌﾟ
MPS
LD MR14800               ; NR_ｽｷｰｼﾞ_P1
OR MR13700               ; CR_ｽｷｰｼﾞ_P1
LD>.L EM42060 DM10508    ; MSEP Axis-0 現在位置（下位8bit）
OR>.L DM10508 EM43060    ; MSEP Axis-0 現在位置（下位8bit）
ANL
ANB @MR2201              ; 動作中
AND MR1304               ; ｽｷｰｼﾞRB ｲﾝﾀｰﾛｯｸ ﾗﾝﾌﾟ
ANP MR5113               ; MOVE SW
ANL
SET MR18405              ; RB1:MOVE
MRD
LD MR14801               ; NR_ｽｷｰｼﾞ_P2
OR MR13701               ; CR_ｽｷｰｼﾞ_P2
LD>.L EM42063 DM10508    ; MSEP Axis-0 現在位置（下位8bit）
OR>.L DM10508 EM43063    ; MSEP Axis-0 現在位置（下位8bit）
ANL
ANB @MR2201              ; 動作中
AND MR1304               ; ｽｷｰｼﾞRB ｲﾝﾀｰﾛｯｸ ﾗﾝﾌﾟ
ANP MR5113               ; MOVE SW
ANL
SET MR18405              ; RB1:MOVE
MRD
LD MR14802               ; NR_ｽｷｰｼﾞ_P3
OR MR13702               ; CR_ｽｷｰｼﾞ_P3
LD>.L EM42066 DM10508    ; MSEP Axis-0 現在位置（下位8bit）
OR>.L DM10508 EM43066    ; MSEP Axis-0 現在位置（下位8bit）
ANL
ANB @MR2201              ; 動作中
AND MR1304               ; ｽｷｰｼﾞRB ｲﾝﾀｰﾛｯｸ ﾗﾝﾌﾟ
ANP MR5113               ; MOVE SW
ANL
SET MR18405              ; RB1:MOVE
MRD
LD MR14803               ; NR_ｽｷｰｼﾞ_P4
OR MR13703               ; CR_ｽｷｰｼﾞ_P4
LD>.L EM42069 DM10508    ; MSEP Axis-0 現在位置（下位8bit）
OR>.L DM10508 EM43069    ; MSEP Axis-0 現在位置（下位8bit）
ANL
ANB @MR2201              ; 動作中
AND MR1304               ; ｽｷｰｼﾞRB ｲﾝﾀｰﾛｯｸ ﾗﾝﾌﾟ
ANP MR5113               ; MOVE SW
ANL
SET MR18405              ; RB1:MOVE
MPP
LD MR14804               ; NR_ｽｷｰｼﾞ_P5
OR MR13704               ; CR_ｽｷｰｼﾞ_P5
LD>.L EM42072 DM10508    ; MSEP Axis-0 現在位置（下位8bit）
OR>.L DM10508 EM43072    ; MSEP Axis-0 現在位置（下位8bit）
ANL
ANB @MR2201              ; 動作中
AND MR1304               ; ｽｷｰｼﾞRB ｲﾝﾀｰﾛｯｸ ﾗﾝﾌﾟ
ANP MR5113               ; MOVE SW
ANL
SET MR18405              ; RB1:MOVE
;RB1 (ｽｷｰｼﾞ) MSEP-Axis0 ｱﾗｰﾑﾘｾｯﾄ
STG MR18500              ; ｱﾗｰﾑﾘｾｯﾄ要求
SET MR18501              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
JMP MR18502
STG MR18502
SET MR18409              ; RB1:ARMRST
CON
JMP MR18503
STG MR18503
AND MR18400              ; RB1:動作完了
RES MR18501              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
RES MR18400              ; RB1:動作完了
CON
ENDS
LDP MR18409              ; RB1:ARMRST
ANB @MR3211              ; ｱﾗｰﾑﾘｾｯﾄ中
RES MR18409              ; RB1:ARMRST
CON
SET @MR3211              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
SET @MR3210              ; ｱﾗｰﾑﾘｾｯﾄ開始
STG @MR3210              ; ｱﾗｰﾑﾘｾｯﾄ開始
BSET DM10715 #3          ; MSEP Axis-0 制御信号
CON
MPS
BANB DM10515 #3          ; MSEP Axis-0 状態信号
JMP @MR3213
MPP
BAND DM10515 #3          ; MSEP Axis-0 状態信号
TMH #930 #50             ; MSEP_Axis0_ｳｪｲﾄﾀｲﾏ
CON
AND T930                 ; MSEP_Axis0_ｳｪｲﾄﾀｲﾏ
JMP @MR3212
STG @MR3212
ZRES MR18500 MR18503     ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
RES MR18409              ; RB1:ARMRST
CON
RES @MR3211              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
SET @R707                ; MSEP_Axis0 ｱﾗｰﾑ発生
CON
ENDS
STG @MR3213
MPS
BLDB DM10515 #3          ; MSEP Axis-0 状態信号
BAND DM10515 #4          ; MSEP Axis-0 状態信号
BAND DM10515 #14         ; MSEP Axis-0 状態信号
ANL
JMP @MR3214
MPP
BLD DM10515 #3           ; MSEP Axis-0 状態信号
BORB DM10515 #4          ; MSEP Axis-0 状態信号
BORB DM10515 #14         ; MSEP Axis-0 状態信号
ANL
TMR #931 #100            ; MSEP_Axis0_ｳｪｲﾄﾀｲﾏ
CON
AND T931                 ; MSEP_Axis0_ｳｪｲﾄﾀｲﾏ
JMP @MR3215
STG @MR3214
RES MR18409              ; RB1:ARMRST
CON
RES @MR3211              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
SET MR18400              ; RB1:動作完了
CON
ENDS
STG @MR3215
ZRES MR18500 MR18503     ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
RES MR18409              ; RB1:ARMRST
CON
RES @MR3211              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
SET @R708                ; MSEP_Axis0 ｱﾗｰﾑ発生
CON
ENDS
LD @R707                 ; MSEP_Axis0 ｱﾗｰﾑ発生
OR @R708                 ; MSEP_Axis0 ｱﾗｰﾑ発生
ANB R39004               ; ｴﾗｰ中
SET @MR009               ; RB1ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #82 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
SET @R714
STG @R714
ZRES @R707 @R708         ; MSEP_Axis0 ｱﾗｰﾑ発生  MSEP_Axis0 ｱﾗｰﾑ発生
CON
AND @R101
RES @R101
CON
DW #0 DM60009
CON
AND @R105                ; SW1
SET MR18500              ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @R715
STG @R715
TMR #1960 #10
CON
AND T1960
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
RES @R100                ; MSEP_ｱﾗｰﾑ発生
CON
RES @MR009               ; RB1ｱﾗｰﾑON
CON
RES R39004               ; ｴﾗｰ中
CON
ENDS
;<h1/>RB2 (接着剤塗布) MSEP-Axis2
BLD DM10531 #3           ; MSEP Axis-2 状態信号
OUT @MR500               ; MSEP_Axis2 ｱﾗｰﾑ発生
BLD DM10531 #4           ; MSEP Axis-2 状態信号
BAND DM10531 #14         ; MSEP Axis-2 状態信号
BANB DM10531 #15         ; MSEP Axis-2 状態信号
AND R7407                ; ｽｷｰｼﾞ部 ｽｸﾚｰﾊﾟｰ（小） 上限
AND R7409                ; ｽｷｰｼﾞ部 ｽｸﾚｰﾊﾟｰ（大） 上限
OUT @MR501               ; MSEP_Axis2 移動可
BLD DM10531 #0           ; MSEP Axis-2 状態信号
OUT MR18615              ; RB2:位置決め完了
BLD DM10531 #3           ; MSEP Axis-2 状態信号
ANB @MR010               ; RB2ｱﾗｰﾑON
ANB R46114               ; _装置原点復帰待ち
OUT MR18613              ; RB2:ｱﾗｰﾑ出力
LDP MR18613              ; RB2:ｱﾗｰﾑ出力
ANB R39004               ; ｴﾗｰ中
SET @MR010               ; RB2ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #11 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
LDA DM10530              ; MSEP Axis-2 ｱﾗｰﾑｺｰﾄﾞ
CON
STA DM20030              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET @R006
STG @R006
AND @R101
RES @R101
CON
DW #0 DM60009
CON
AND @R105                ; SW1
DW #0 DM20030            ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET MR18700              ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @R007
STG @R007
TMR #1933 #10
CON
AND T1933
RES @R100                ; MSEP_ｱﾗｰﾑ発生
CON
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
RES @MR010               ; RB2ｱﾗｰﾑON
CON
RES R39004               ; ｴﾗｰ中
CON
ENDS
LDP MR1006               ; 接着剤塗布RB ｻｰﾎﾞｵﾝ ﾗﾝﾌﾟ
BSET DM10731 #4          ; MSEP Axis-2 制御信号
LDF MR1006               ; 接着剤塗布RB ｻｰﾎﾞｵﾝ ﾗﾝﾌﾟ
BRES DM10731 #4          ; MSEP Axis-2 制御信号
BLD DM10731 #4           ; MSEP Axis-2 制御信号
OUT MR17706              ; 塗布軸ｻｰﾎﾞON表示
;RB2 (接着剤塗布) MSEP-Axis2 原点復帰開始
LDP MR913                ; 接着剤塗布RB原点復帰 SW
OR MR18604               ; RB2:HOME
ANB @MR1401              ; 原点復帰中
AND @MR501               ; MSEP_Axis2 移動可
RES MR1011               ; 接着剤塗布RB 原点復帰済み ﾗﾝﾌﾟ
CON
RES MR18602              ; RB2:原点復帰完了
CON
RES MR913                ; 接着剤塗布RB原点復帰 SW
CON
RES MR18604              ; RB2:HOME
CON
SET @MR1401              ; 原点復帰中
CON
SET @MR1400              ; 原点復帰開始
STG @MR1400              ; 原点復帰開始
ANB @MR500               ; MSEP_Axis2 ｱﾗｰﾑ発生
AND @MR003               ; MSEP動作可
BRES DM10731 #0          ; MSEP Axis-2 制御信号
CON
BRES DM10731 #2          ; MSEP Axis-2 制御信号
CON
BRES DM10731 #3          ; MSEP Axis-2 制御信号
CON
BSET DM10731 #4          ; MSEP Axis-2 制御信号
CON
JMP @MR1403
STG @MR1403
ANB @MR500               ; MSEP_Axis2 ｱﾗｰﾑ発生
MPS
LD @MR501                ; MSEP_Axis2 移動可
BANB DM10531 #2          ; MSEP Axis-2 状態信号
ANL
JMP @MR1404
MPP
ANB @MR501               ; MSEP_Axis2 移動可
TMR #940 #300            ; MSEP_Axis2_ｳｪｲﾄﾀｲﾏ
CON
AND T940                 ; MSEP_Axis2_ｳｪｲﾄﾀｲﾏ
RES @MR1401              ; 原点復帰中
CON
BRES DM10731 #4          ; MSEP Axis-2 制御信号
CON
SET @R800                ; MSEP_Axis2 ｱﾗｰﾑ発生
CON
ENDS
STG @MR1404
ANB @MR500               ; MSEP_Axis2 ｱﾗｰﾑ発生
BSET DM10731 #1          ; MSEP Axis-2 制御信号
CON
JMP @MR1405
STG @MR1405
ANB @MR500               ; MSEP_Axis2 ｱﾗｰﾑ発生
MPS
BANB DM10531 #0          ; MSEP Axis-2 状態信号
BRES DM10731 #1          ; MSEP Axis-2 制御信号
CON
JMP @MR1406
MPP
BAND DM10531 #0          ; MSEP Axis-2 状態信号
TMR #941 #300            ; MSEP_Axis2_ｳｪｲﾄﾀｲﾏ
CON
AND T941                 ; MSEP_Axis2_ｳｪｲﾄﾀｲﾏ
RES @MR1401              ; 原点復帰中
CON
BRES DM10731 #4          ; MSEP Axis-2 制御信号
CON
SET @R801                ; MSEP_Axis2 ｱﾗｰﾑ発生
CON
ENDS
STG @MR1406
ANB @MR500               ; MSEP_Axis2 ｱﾗｰﾑ発生
MPS
BLDB DM10531 #2          ; MSEP Axis-2 状態信号
BAND DM10531 #0          ; MSEP Axis-2 状態信号
ANL
JMP @MR1407
MPP
BANB DM10531 #0          ; MSEP Axis-2 状態信号
TMR #942 #300            ; MSEP_Axis2_ｳｪｲﾄﾀｲﾏ
CON
AND T942                 ; MSEP_Axis2_ｳｪｲﾄﾀｲﾏ
RES @MR1401              ; 原点復帰中
CON
BRES DM10731 #4          ; MSEP Axis-2 制御信号
CON
SET @R802                ; MSEP_Axis2 ｱﾗｰﾑ発生
CON
ENDS
STG @MR1407
ANB @MR500               ; MSEP_Axis2 ｱﾗｰﾑ発生
DW.D #0 DM11062          ; RB2 現在位置1
CON
DW #0 DM11064            ; RB2 現在ﾎﾟｼﾞｼｮﾝ番号
CON
JMP @MR1408
STG @MR1408
RES @MR1401              ; 原点復帰中
CON
SET MR1011               ; 接着剤塗布RB 原点復帰済み ﾗﾝﾌﾟ
CON
SET MR18602              ; RB2:原点復帰完了
CON
ENDS
LD @R800                 ; MSEP_Axis2 ｱﾗｰﾑ発生
OR @R802                 ; MSEP_Axis2 ｱﾗｰﾑ発生
ANB MR18613              ; RB2:ｱﾗｰﾑ出力
ANB R39004               ; ｴﾗｰ中
SET @MR010               ; RB2ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #81 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
SET @R810                ; MSEP_Axis2 ｱﾗｰﾑ発生
STG @R810                ; MSEP_Axis2 ｱﾗｰﾑ発生
ZRES @R800 @R802         ; MSEP_Axis2 ｱﾗｰﾑ発生  MSEP_Axis2 ｱﾗｰﾑ発生
CON
AND @R101
RES @R101
CON
DW #0 DM60009
CON
AND @R105                ; SW1
SET MR18700              ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @R811
STG @R811
TMR #1962 #10
CON
AND T1962
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
RES @R100                ; MSEP_ｱﾗｰﾑ発生
CON
RES R39004               ; ｴﾗｰ中
CON
SET @MR1400              ; 原点復帰開始
CON
RES @MR010               ; RB2ｱﾗｰﾑON
CON
ENDS
;RB2 (接着剤塗布) MSEP-Axis2 ﾎﾟｲﾝﾄﾃﾞｰﾀｾｯﾄ→移動
LDP MR18605              ; RB2:MOVE
ANB @MR2401              ; 動作中
RES MR18605              ; RB2:MOVE
CON
SET MR5212               ; MOVE SW 表示
CON
SET @MR2401              ; 動作中
CON
SET @MR2400              ; 動作開始
STG @MR2400              ; 動作開始
ANB @MR500               ; MSEP_Axis2 ｱﾗｰﾑ発生
MPS
LD @MR501                ; MSEP_Axis2 移動可
BANB DM10531 #2          ; MSEP Axis-2 状態信号
ANL
BRES DM10731 #2          ; MSEP Axis-2 制御信号
CON
BRES DM10731 #3          ; MSEP Axis-2 制御信号
CON
JMP @MR2403
MPP
ANB @MR501               ; MSEP_Axis2 移動可
TMR #943 #50             ; MSEP_Axis2_ｳｪｲﾄﾀｲﾏ
CON
AND T943                 ; MSEP_Axis2_ｳｪｲﾄﾀｲﾏ
RES MR5212               ; MOVE SW 表示
CON
BRES DM10731 #2          ; MSEP Axis-2 制御信号
CON
BRES DM10731 #3          ; MSEP Axis-2 制御信号
CON
RES MR18605              ; RB2:MOVE
CON
RES MR18614              ; RB2:MOVE-STOP
CON
RES @MR2401              ; 動作中
CON
SET @R803                ; MSEP_Axis2 ｱﾗｰﾑ発生
CON
ENDS
STG @MR2403
ANB @MR500               ; MSEP_Axis2 ｱﾗｰﾑ発生
MPS
AND= DM11068 #1          ; RB2 目標ﾎﾟｲﾝﾄ番号
MOV.L EM2090 DM10724     ; RB2 P1 目標位置（下位bit）  MSEP Axis-2 目標位置（下位8bit）
MOV EM2092 DM10728       ; RB2 P1 指令速度  MSEP Axis-2 速度
MRD
AND= DM11068 #2          ; RB2 目標ﾎﾟｲﾝﾄ番号
MOV.L EM2093 DM10724     ; RB2 P2 目標位置（下位bit）  MSEP Axis-2 目標位置（下位8bit）
MOV EM2095 DM10728       ; RB2 P2 指令速度  MSEP Axis-2 速度
MRD
AND= DM11068 #3          ; RB2 目標ﾎﾟｲﾝﾄ番号
MOV.L EM2096 DM10724     ; RB2 P3 目標位置（下位bit）  MSEP Axis-2 目標位置（下位8bit）
MOV EM2098 DM10728       ; RB2 P3 指令速度  MSEP Axis-2 速度
MRD
AND= DM11068 #4          ; RB2 目標ﾎﾟｲﾝﾄ番号
MOV.L EM2099 DM10724     ; RB2 P4 目標位置（下位bit）  MSEP Axis-2 目標位置（下位8bit）
MOV EM2101 DM10728       ; RB2 P4 指令速度  MSEP Axis-2 速度
MRD
AND= DM11068 #5          ; RB2 目標ﾎﾟｲﾝﾄ番号
MOV.L EM2102 DM10724     ; RB2 P5 目標位置（下位bit）  MSEP Axis-2 目標位置（下位8bit）
MOV EM2104 DM10728       ; RB2 P5 指令速度  MSEP Axis-2 速度
MPP
TMR #944 #2              ; MSEP_Axis2_ｳｪｲﾄﾀｲﾏ
CON
AND T944                 ; MSEP_Axis2_ｳｪｲﾄﾀｲﾏ
JMP @MR2404
STG @MR2404
ANB @MR500               ; MSEP_Axis2 ｱﾗｰﾑ発生
BSET DM10731 #0          ; MSEP Axis-2 制御信号
CON
JMP @MR2405
STG @MR2405
ANB @MR500               ; MSEP_Axis2 ｱﾗｰﾑ発生
MPS
BANB DM10531 #0          ; MSEP Axis-2 状態信号
BRES DM10731 #0          ; MSEP Axis-2 制御信号
CON
JMP @MR2406
MPP
BAND DM10531 #0          ; MSEP Axis-2 状態信号
TMR #945 #300            ; MSEP_Axis2_ｳｪｲﾄﾀｲﾏ
CON
AND T945                 ; MSEP_Axis2_ｳｪｲﾄﾀｲﾏ
BRES DM10731 #0          ; MSEP Axis-2 制御信号
CON
RES MR5212               ; MOVE SW 表示
CON
BRES DM10731 #2          ; MSEP Axis-2 制御信号
CON
BRES DM10731 #3          ; MSEP Axis-2 制御信号
CON
RES MR18605              ; RB2:MOVE
CON
RES MR18614              ; RB2:MOVE-STOP
CON
RES @MR2401              ; 動作中
CON
SET @R804                ; MSEP_Axis2 ｱﾗｰﾑ発生
CON
ENDS
STG @MR2406
ANB @MR500               ; MSEP_Axis2 ｱﾗｰﾑ発生
MPS
BLDB DM10531 #2          ; MSEP Axis-2 状態信号
BAND DM10531 #0          ; MSEP Axis-2 状態信号
ANL
TMH #946 #10             ; MSEP_Axis2_ｳｪｲﾄﾀｲﾏ
CON
AND T946                 ; MSEP_Axis2_ｳｪｲﾄﾀｲﾏ
JMP @MR2407
MRD
BLD DM10531 #2           ; MSEP Axis-2 状態信号
AND MR18614              ; RB2:MOVE-STOP
ANL
JMP @MR2408              ; ﾌｨﾙﾑ巻出し動作中
MPP
BANB DM10531 #2          ; MSEP Axis-2 状態信号
TMR #947 #600            ; MSEP_Axis2_ｳｪｲﾄﾀｲﾏ
CON
AND T947                 ; MSEP_Axis2_ｳｪｲﾄﾀｲﾏ
RES MR5212               ; MOVE SW 表示
CON
BRES DM10731 #2          ; MSEP Axis-2 制御信号
CON
BRES DM10731 #3          ; MSEP Axis-2 制御信号
CON
RES MR18605              ; RB2:MOVE
CON
RES MR18614              ; RB2:MOVE-STOP
CON
RES @MR2401              ; 動作中
CON
SET @R805                ; MSEP_Axis2 ｱﾗｰﾑ発生
CON
ENDS
STG @MR2408              ; ﾌｨﾙﾑ巻出し動作中
BSET DM10731 #2          ; MSEP Axis-2 制御信号
CON
BANB DM10531 #2          ; MSEP Axis-2 状態信号
JMP @MR2409
STG @MR2409
BSET DM10731 #3          ; MSEP Axis-2 制御信号
CON
TMH #948 #7              ; MSEP_Axis2_ｳｪｲﾄﾀｲﾏ
CON
AND T948                 ; MSEP_Axis2_ｳｪｲﾄﾀｲﾏ
BRES DM10731 #2          ; MSEP Axis-2 制御信号
CON
BRES DM10731 #3          ; MSEP Axis-2 制御信号
CON
JMP @MR2410              ; ﾎﾟｲﾝﾄ10移動中
STG @MR2410              ; ﾎﾟｲﾝﾄ10移動中
MPS
BAND DM10531 #0          ; MSEP Axis-2 状態信号
JMP @MR2407
MPP
BANB DM10531 #0          ; MSEP Axis-2 状態信号
TMR #949 #50             ; MSEP_Axis2_ｳｪｲﾄﾀｲﾏ
CON
AND T949                 ; MSEP_Axis2_ｳｪｲﾄﾀｲﾏ
BRES DM10731 #0          ; MSEP Axis-2 制御信号
CON
RES MR5212               ; MOVE SW 表示
CON
BRES DM10731 #2          ; MSEP Axis-2 制御信号
CON
BRES DM10731 #3          ; MSEP Axis-2 制御信号
CON
RES MR18605              ; RB2:MOVE
CON
RES MR18614              ; RB2:MOVE-STOP
CON
RES @MR2401              ; 動作中
CON
SET @R806                ; MSEP_Axis2 ｱﾗｰﾑ発生
CON
ENDS
STG @MR2407
ANB @MR500               ; MSEP_Axis2 ｱﾗｰﾑ発生
MOV.L DM10524 DM11062    ; MSEP Axis-2 現在位置（下位8bit）  RB2 現在位置1
MOV DM11068 DM11064      ; RB2 目標ﾎﾟｲﾝﾄ番号  RB2 現在ﾎﾟｼﾞｼｮﾝ番号
RES MR5212               ; MOVE SW 表示
CON
BRES DM10731 #2          ; MSEP Axis-2 制御信号
CON
BRES DM10731 #3          ; MSEP Axis-2 制御信号
CON
RES MR18605              ; RB2:MOVE
CON
RES MR18614              ; RB2:MOVE-STOP
CON
RES @MR2401              ; 動作中
CON
ENDS
LD @R803                 ; MSEP_Axis2 ｱﾗｰﾑ発生
ANB MR18613              ; RB2:ｱﾗｰﾑ出力
ANB R39004               ; ｴﾗｰ中
SET @MR010               ; RB2ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #81 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
SET @R812                ; MSEP_Axis2 ｱﾗｰﾑ発生
LD @R804                 ; MSEP_Axis2 ｱﾗｰﾑ発生
OR @R805                 ; MSEP_Axis2 ｱﾗｰﾑ発生
OR @R806                 ; MSEP_Axis2 ｱﾗｰﾑ発生
ANB MR18613              ; RB2:ｱﾗｰﾑ出力
ANB R39004               ; ｴﾗｰ中
SET @MR010               ; RB2ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #81 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
SET @R812                ; MSEP_Axis2 ｱﾗｰﾑ発生
STG @R812                ; MSEP_Axis2 ｱﾗｰﾑ発生
ZRES @R803 @R806         ; MSEP_Axis2 ｱﾗｰﾑ発生  MSEP_Axis2 ｱﾗｰﾑ発生
CON
AND @R101
RES @R101
CON
DW #0 DM60009
CON
AND @R105                ; SW1
SET MR18700              ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @R813
STG @R813
TMR #1963 #30
CON
AND T1963
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
RES @R100                ; MSEP_ｱﾗｰﾑ発生
CON
RES @MR010               ; RB2ｱﾗｰﾑON
CON
RES R39004               ; ｴﾗｰ中
CON
SET MR18605              ; RB2:MOVE
CON
ENDS
;RB2 (接着剤塗布) MSEP-Axis2 JOG/INCHING
LD= DM3000 #1914         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1905         ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND MR1011               ; 接着剤塗布RB 原点復帰済み ﾗﾝﾌﾟ
AND @MR501               ; MSEP_Axis2 移動可
ANB @MR1401              ; 原点復帰中
ANB @MR2401              ; 動作中
MPS
ANB MR18607              ; RB2:JOG/INCH
OUT @MR3400              ; JOG　動作
MPP
AND MR18607              ; RB2:JOG/INCH
OUT @MR3407              ; INCHING　動作
LDP @MR3407              ; INCHING　動作
BSET DM10731 #5          ; MSEP Axis-2 制御信号
LDF @MR3407              ; INCHING　動作
BRES DM10731 #5          ; MSEP Axis-2 制御信号
LD @MR3400               ; JOG　動作
OR @MR3407               ; INCHING　動作
MPS
LD MR18611               ; RB2:JOG+動作
ANB MR18612              ; RB2:JOG-動作
ANL
BOUT DM10731 #8          ; MSEP Axis-2 制御信号
MPP
LD MR18612               ; RB2:JOG-動作
ANB MR18611              ; RB2:JOG+動作
ANL
BOUT DM10731 #7          ; MSEP Axis-2 制御信号
;RB2 (接着剤塗布) MSEP-Axis2 Point Data Write
LD CR2002                ; 常時ON
LD MR17706               ; 塗布軸ｻｰﾎﾞON表示
OR CR2002                ; 常時ON
ANL
MPS
ANP MR5300               ; 接着剤塗布 P1 選択
DW #1 DM11068            ; RB2 目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14700 MR14704     ; NR_接着剤塗布_P1  NR_接着剤塗布_P5
CON
ZRES MR13600 MR13604     ; CR_接着剤塗布_P1  CR_接着剤塗布_P5
CON
SET MR13600              ; CR_接着剤塗布_P1
CON
SET MR14700              ; NR_接着剤塗布_P1
MRD
ANP MR5301               ; 接着剤塗布 P2 選択
DW #2 DM11068            ; RB2 目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14700 MR14704     ; NR_接着剤塗布_P1  NR_接着剤塗布_P5
CON
ZRES MR13600 MR13604     ; CR_接着剤塗布_P1  CR_接着剤塗布_P5
CON
SET MR13601              ; CR_接着剤塗布_P2
CON
SET MR14701              ; NR_接着剤塗布_P2
MRD
ANP MR5302               ; 接着剤塗布 P3 選択
DW #3 DM11068            ; RB2 目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14700 MR14704     ; NR_接着剤塗布_P1  NR_接着剤塗布_P5
CON
ZRES MR13600 MR13604     ; CR_接着剤塗布_P1  CR_接着剤塗布_P5
CON
SET MR13602              ; CR_接着剤塗布_P3
CON
SET MR14702              ; NR_接着剤塗布_P3
MRD
ANP MR5303               ; 接着剤塗布 P4 選択
DW #4 DM11068            ; RB2 目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14700 MR14704     ; NR_接着剤塗布_P1  NR_接着剤塗布_P5
CON
ZRES MR13600 MR13604     ; CR_接着剤塗布_P1  CR_接着剤塗布_P5
CON
SET MR13603              ; CR_接着剤塗布_P4
CON
SET MR14703              ; NR_接着剤塗布_P4
MPP
ANP MR5304               ; 接着剤塗布 P5 選択
DW #5 DM11068            ; RB2 目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14700 MR14704     ; NR_接着剤塗布_P1  NR_接着剤塗布_P5
CON
ZRES MR13600 MR13604     ; CR_接着剤塗布_P1  CR_接着剤塗布_P5
CON
SET MR13604              ; CR_接着剤塗布_P5
CON
SET MR14704              ; NR_接着剤塗布_P5
LD= DM3000 #1905         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1914         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR17706               ; 塗布軸ｻｰﾎﾞON表示
OR CR2002                ; 常時ON
ANL
MPS
ANP MR5300               ; 接着剤塗布 P1 選択
MOV.L EM2090 EM1909      ; RB2 P1 目標位置（下位bit）  RB2 目標位置（下位bit）表示用
MOV EM2092 EM1911        ; RB2 P1 指令速度  RB2 指令速度表示用
MRD
ANP MR5301               ; 接着剤塗布 P2 選択
MOV.L EM2093 EM1909      ; RB2 P2 目標位置（下位bit）  RB2 目標位置（下位bit）表示用
MOV EM2095 EM1911        ; RB2 P2 指令速度  RB2 指令速度表示用
MRD
ANP MR5302               ; 接着剤塗布 P3 選択
MOV.L EM2096 EM1909      ; RB2 P3 目標位置（下位bit）  RB2 目標位置（下位bit）表示用
MOV EM2098 EM1911        ; RB2 P3 指令速度  RB2 指令速度表示用
MRD
ANP MR5303               ; 接着剤塗布 P4 選択
MOV.L EM2099 EM1909      ; RB2 P4 目標位置（下位bit）  RB2 目標位置（下位bit）表示用
MOV EM2101 EM1911        ; RB2 P4 指令速度  RB2 指令速度表示用
MPP
ANP MR5304               ; 接着剤塗布 P5 選択
MOV.L EM2102 EM1909      ; RB2 P5 目標位置（下位bit）  RB2 目標位置（下位bit）表示用
MOV EM2104 EM1911        ; RB2 P5 指令速度  RB2 指令速度表示用
LD= DM3000 #1905         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1914         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR13600               ; CR_接着剤塗布_P1
OR MR14700               ; NR_接着剤塗布_P1
ANL
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10524 EM2090     ; MSEP Axis-2 現在位置（下位8bit）  RB2 P1 目標位置（下位bit）
MOV EM1911 EM2092        ; RB2 指令速度表示用  RB2 P1 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1909 EM2090      ; RB2 目標位置（下位bit）表示用  RB2 P1 目標位置（下位bit）
MOV EM1911 EM2092        ; RB2 指令速度表示用  RB2 P1 指令速度
LD= DM3000 #1905         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1914         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR13601               ; CR_接着剤塗布_P2
OR MR14701               ; NR_接着剤塗布_P2
ANL
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10524 EM2093     ; MSEP Axis-2 現在位置（下位8bit）  RB2 P2 目標位置（下位bit）
MOV EM1911 EM2095        ; RB2 指令速度表示用  RB2 P2 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1909 EM2093      ; RB2 目標位置（下位bit）表示用  RB2 P2 目標位置（下位bit）
MOV EM1911 EM2095        ; RB2 指令速度表示用  RB2 P2 指令速度
LD= DM3000 #1905         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1914         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR13602               ; CR_接着剤塗布_P3
OR MR14702               ; NR_接着剤塗布_P3
ANL
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10524 EM2096     ; MSEP Axis-2 現在位置（下位8bit）  RB2 P3 目標位置（下位bit）
MOV EM1911 EM2098        ; RB2 指令速度表示用  RB2 P3 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1909 EM2096      ; RB2 目標位置（下位bit）表示用  RB2 P3 目標位置（下位bit）
MOV EM1911 EM2098        ; RB2 指令速度表示用  RB2 P3 指令速度
LD= DM3000 #1905         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1914         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR13603               ; CR_接着剤塗布_P4
OR MR14703               ; NR_接着剤塗布_P4
ANL
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10524 EM2099     ; MSEP Axis-2 現在位置（下位8bit）  RB2 P4 目標位置（下位bit）
MOV EM1911 EM2101        ; RB2 指令速度表示用  RB2 P4 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1909 EM2099      ; RB2 目標位置（下位bit）表示用  RB2 P4 目標位置（下位bit）
MOV EM1911 EM2101        ; RB2 指令速度表示用  RB2 P4 指令速度
LD CR2002                ; 常時ON
LDA.L EM2099             ; RB2 P4 目標位置（下位bit）
CON
ADD.L EM2290
CON
STA.L EM2102             ; RB2 P5 目標位置（下位bit）
;EM42090.l = em2090.l - 2
;EM43090.l = em2090.l + 2
;EM42093.l = em2093.l - 2
;EM43093.l = em2093.l + 2
;EM42096.l = em2096.l - 2
;EM43096.l = em2096.l + 2
;EM42099.l = em2099.l - 2
;EM43099.l = em2099.l + 2
;EM42102.l = em2102.l - 2
;EM43102.l = em2102.l + 2
;EM42105.l = em2105.l - 2
;EM43105.l = em2105.l + 2
;
;EM43110.l = em2096.l
;EM43112.l = em2093.l - 100
;
;
LD CR2002                ; 常時ON
NCJ #1003
;EM42090.l = em2090.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2090             ; RB2 P1 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42090
;EM43090.l = em2090.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2090             ; RB2 P1 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43090
;EM42093.l = em2093.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2093             ; RB2 P2 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42093
;EM43093.l = em2093.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2093             ; RB2 P2 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43093
;EM42096.l = em2096.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2096             ; RB2 P3 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42096
;EM43096.l = em2096.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2096             ; RB2 P3 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43096
;EM42099.l = em2099.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2099             ; RB2 P4 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42099
;EM43099.l = em2099.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2099             ; RB2 P4 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43099
;EM42102.l = em2102.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2102             ; RB2 P5 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42102
;EM43102.l = em2102.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2102             ; RB2 P5 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43102
;EM42105.l = em2105.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2105             ; RB2 P6 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42105
;EM43105.l = em2105.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2105             ; RB2 P6 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43105
;EM43110.l = em2096.l
;
LD CR2002                ; 常時ON
MOV.L EM2096 EM43110     ; RB2 P3 目標位置（下位bit）
;EM43112.l = em2093.l - 100
;
LD CR2002                ; 常時ON
LDA.L EM2093             ; RB2 P2 目標位置（下位bit）
CON
SUB.L +100
CON
STA.L EM43112
LABEL #1003
;
LD MR1011                ; 接着剤塗布RB 原点復帰済み ﾗﾝﾌﾟ
AND MR17706              ; 塗布軸ｻｰﾎﾞON表示
BANB DM10531 #2          ; MSEP Axis-2 状態信号
AND MR17707              ; ｽｷｰｼﾞ軸ｻｰﾎﾞON表示
AND MR1306               ; ｽｷｰｼﾞRB 原点復帰済み ﾗﾝﾌﾟ
BANB DM10515 #2          ; MSEP Axis-0 状態信号
LD MR23700               ; ｽｷｰｼﾞ_P1
OR CR2002                ; 常時ON
ANL
ANB R7406                ; ｽｷｰｼﾞ部 ｽｸﾚｰﾊﾟｰ（小） 下限
AND R7407                ; ｽｷｰｼﾞ部 ｽｸﾚｰﾊﾟｰ（小） 上限
ANB R7408                ; ｽｷｰｼﾞ部 ｽｸﾚｰﾊﾟｰ（大） 下限
AND R7409                ; ｽｷｰｼﾞ部 ｽｸﾚｰﾊﾟｰ（大） 上限
LD MR20107               ; MC 軸1ｻｰﾎﾞON
AND MR20307              ; MC 軸2ｻｰﾎﾞON
OR CR2002                ; 常時ON
ANL
ANB MR21110              ; MC 軸1BUSY
ANB MR21310              ; MC 軸2BUSY
OUT MR1007               ; 接着剤塗布RB ｲﾝﾀｰﾛｯｸ ﾗﾝﾌﾟ
LD CR2002                ; 常時ON
AND MR1011               ; 接着剤塗布RB 原点復帰済み ﾗﾝﾌﾟ
MPS
LD<=.L EM42090 DM10524   ; MSEP Axis-2 現在位置（下位8bit）
AND<=.L DM10524 EM43090  ; MSEP Axis-2 現在位置（下位8bit）
LD>.L EM42090 DM10524    ; MSEP Axis-2 現在位置（下位8bit）
OR>.L DM10524 EM43090    ; MSEP Axis-2 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
LD MR14700               ; NR_接着剤塗布_P1
OR MR13600               ; CR_接着剤塗布_P1
ANL
ORL
ANL
OUT MR23600              ; 接着剤塗布_P1
MRD
LD<=.L EM42093 DM10524   ; MSEP Axis-2 現在位置（下位8bit）
AND<=.L DM10524 EM43093  ; MSEP Axis-2 現在位置（下位8bit）
LD>.L EM42093 DM10524    ; MSEP Axis-2 現在位置（下位8bit）
OR>.L DM10524 EM43093    ; MSEP Axis-2 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
LD MR14701               ; NR_接着剤塗布_P2
OR MR13601               ; CR_接着剤塗布_P2
ANL
ORL
ANL
OUT MR23601              ; 接着剤塗布_P2
MRD
LD<=.L EM42096 DM10524   ; MSEP Axis-2 現在位置（下位8bit）
AND<=.L DM10524 EM43096  ; MSEP Axis-2 現在位置（下位8bit）
LD>.L EM42096 DM10524    ; MSEP Axis-2 現在位置（下位8bit）
OR>.L DM10524 EM43096    ; MSEP Axis-2 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
LD MR14702               ; NR_接着剤塗布_P3
OR MR13602               ; CR_接着剤塗布_P3
ANL
ORL
ANL
OUT MR23602              ; 接着剤塗布_P3
MRD
LD<=.L EM42099 DM10524   ; MSEP Axis-2 現在位置（下位8bit）
AND<=.L DM10524 EM43099  ; MSEP Axis-2 現在位置（下位8bit）
LD>.L EM42099 DM10524    ; MSEP Axis-2 現在位置（下位8bit）
OR>.L DM10524 EM43099    ; MSEP Axis-2 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
LD MR14703               ; NR_接着剤塗布_P4
OR MR13603               ; CR_接着剤塗布_P4
ANL
ORL
ANL
OUT MR23603              ; 接着剤塗布_P4
MPP
LD<=.L EM42102 DM10524   ; MSEP Axis-2 現在位置（下位8bit）
AND<=.L DM10524 EM43102  ; MSEP Axis-2 現在位置（下位8bit）
LD>.L EM42102 DM10524    ; MSEP Axis-2 現在位置（下位8bit）
OR>.L DM10524 EM43102    ; MSEP Axis-2 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
LD MR14704               ; NR_接着剤塗布_P5
OR MR13604               ; CR_接着剤塗布_P5
ANL
ORL
ANL
OUT MR23604              ; 接着剤塗布_P5
LD CR2002                ; 常時ON
AND MR1011               ; 接着剤塗布RB 原点復帰済み ﾗﾝﾌﾟ
MPS
LD MR14700               ; NR_接着剤塗布_P1
OR MR13600               ; CR_接着剤塗布_P1
LD>.L EM42090 DM10524    ; MSEP Axis-2 現在位置（下位8bit）
OR>.L DM10524 EM43090    ; MSEP Axis-2 現在位置（下位8bit）
ANL
ANB @MR2401              ; 動作中
AND MR1007               ; 接着剤塗布RB ｲﾝﾀｰﾛｯｸ ﾗﾝﾌﾟ
LD<= DM21790 #500        ; 軸1 現在座標
OR>= DM21790 #26500      ; 軸1 現在座標
ANL
ANP MR5213               ; MOVE SW
ANL
SET MR18605              ; RB2:MOVE
MRD
LD MR14701               ; NR_接着剤塗布_P2
OR MR13601               ; CR_接着剤塗布_P2
LD>.L EM42093 DM10524    ; MSEP Axis-2 現在位置（下位8bit）
OR>.L DM10524 EM43093    ; MSEP Axis-2 現在位置（下位8bit）
ANL
ANB @MR2401              ; 動作中
AND MR1007               ; 接着剤塗布RB ｲﾝﾀｰﾛｯｸ ﾗﾝﾌﾟ
LD<= DM21790 #500        ; 軸1 現在座標
OR>= DM21790 #26500      ; 軸1 現在座標
ANL
ANP MR5213               ; MOVE SW
ANL
SET MR18605              ; RB2:MOVE
MRD
LD MR14702               ; NR_接着剤塗布_P3
OR MR13602               ; CR_接着剤塗布_P3
LD>.L EM42096 DM10524    ; MSEP Axis-2 現在位置（下位8bit）
OR>.L DM10524 EM43096    ; MSEP Axis-2 現在位置（下位8bit）
ANL
ANB @MR2401              ; 動作中
AND MR1007               ; 接着剤塗布RB ｲﾝﾀｰﾛｯｸ ﾗﾝﾌﾟ
LD<= DM21790 #500        ; 軸1 現在座標
OR>= DM21790 #26500      ; 軸1 現在座標
ANL
ANP MR5213               ; MOVE SW
ANL
SET MR18605              ; RB2:MOVE
MRD
LD MR14703               ; NR_接着剤塗布_P4
OR MR13603               ; CR_接着剤塗布_P4
LD>.L EM42099 DM10524    ; MSEP Axis-2 現在位置（下位8bit）
OR>.L DM10524 EM43099    ; MSEP Axis-2 現在位置（下位8bit）
ANL
ANB @MR2401              ; 動作中
AND MR1007               ; 接着剤塗布RB ｲﾝﾀｰﾛｯｸ ﾗﾝﾌﾟ
ANP MR5213               ; MOVE SW
ANL
SET MR18605              ; RB2:MOVE
MPP
LD CR2003                ; 常時OFF
AND MR14704              ; NR_接着剤塗布_P5
LD CR2003                ; 常時OFF
AND MR13604              ; CR_接着剤塗布_P5
ORL
LD>.L EM42102 DM10524    ; MSEP Axis-2 現在位置（下位8bit）
OR>.L DM10524 EM43102    ; MSEP Axis-2 現在位置（下位8bit）
ANL
ANB @MR2401              ; 動作中
AND MR1007               ; 接着剤塗布RB ｲﾝﾀｰﾛｯｸ ﾗﾝﾌﾟ
ANP MR5213               ; MOVE SW
ANL
SET MR18605              ; RB2:MOVE
;RB2 (接着剤塗布) MSEP-Axis2 ｱﾗｰﾑﾘｾｯﾄ
STG MR18700              ; ｱﾗｰﾑﾘｾｯﾄ要求
SET MR18701              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
JMP MR18702
STG MR18702
SET MR18609              ; RB2:ARMRST
CON
JMP MR18703
STG MR18703
AND MR18600              ; RB2:動作完了
RES MR18701              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
RES MR18600              ; RB2:動作完了
CON
ENDS
LDP MR18609              ; RB2:ARMRST
ANB @MR3411              ; ｱﾗｰﾑﾘｾｯﾄ中
RES MR18609              ; RB2:ARMRST
CON
SET @MR3411              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
SET @MR3410              ; ｱﾗｰﾑﾘｾｯﾄ開始
STG @MR3410              ; ｱﾗｰﾑﾘｾｯﾄ開始
BSET DM10731 #3          ; MSEP Axis-2 制御信号
CON
MPS
BANB DM10531 #3          ; MSEP Axis-2 状態信号
JMP @MR3413
MPP
BAND DM10531 #3          ; MSEP Axis-2 状態信号
TMH #950 #50             ; MSEP_Axis2_ｳｪｲﾄﾀｲﾏ
CON
AND T950                 ; MSEP_Axis2_ｳｪｲﾄﾀｲﾏ
JMP @MR3412
STG @MR3412
ZRES MR18700 MR18703     ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
RES MR18609              ; RB2:ARMRST
CON
RES @MR3411              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
SET @R807                ; MSEP_Axis2 ｱﾗｰﾑ発生
CON
ENDS
STG @MR3413
MPS
BLDB DM10531 #3          ; MSEP Axis-2 状態信号
BAND DM10531 #4          ; MSEP Axis-2 状態信号
BAND DM10531 #14         ; MSEP Axis-2 状態信号
ANL
JMP @MR3414
MPP
BLD DM10531 #3           ; MSEP Axis-2 状態信号
BORB DM10531 #4          ; MSEP Axis-2 状態信号
BORB DM10531 #14         ; MSEP Axis-2 状態信号
ANL
TMR #951 #100            ; MSEP_Axis2_ｳｪｲﾄﾀｲﾏ
CON
AND T951                 ; MSEP_Axis2_ｳｪｲﾄﾀｲﾏ
JMP @MR3415
STG @MR3414
RES MR18609              ; RB2:ARMRST
CON
RES @MR3411              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
SET MR18600              ; RB2:動作完了
CON
ENDS
STG @MR3415
ZRES MR18700 MR18703     ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
RES MR18609              ; RB2:ARMRST
CON
RES @MR3411              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
SET @R808                ; MSEP_Axis2 ｱﾗｰﾑ発生
CON
ENDS
LD @R807                 ; MSEP_Axis2 ｱﾗｰﾑ発生
OR @R808                 ; MSEP_Axis2 ｱﾗｰﾑ発生
ANB R39004               ; ｴﾗｰ中
SET @MR010               ; RB2ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #81 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
SET @R814
STG @R814
ZRES @R807 @R808         ; MSEP_Axis2 ｱﾗｰﾑ発生  MSEP_Axis2 ｱﾗｰﾑ発生
CON
AND @R101
RES @R101
CON
DW #0 DM60009
CON
AND @R105                ; SW1
SET MR18700              ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @R815
STG @R815
TMR #1964 #10
CON
AND T1964
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
RES @R100                ; MSEP_ｱﾗｰﾑ発生
CON
RES @MR010               ; RB2ｱﾗｰﾑON
CON
RES R39004               ; ｴﾗｰ中
CON
ENDS
;<h1/>RB3 (除材θ軸) MSEP-Axis4
BLD DM10547 #3           ; MSEP Axis-4 状態信号
OUT @MR700               ; MSEP_Axis4 ｱﾗｰﾑ発生
BLD DM10547 #4           ; MSEP Axis-4 状態信号
BAND DM10547 #14         ; MSEP Axis-4 状態信号
BANB DM10547 #15         ; MSEP Axis-4 状態信号
OUT @MR701               ; MSEP_Axis4 移動可
BLD DM10547 #0           ; MSEP Axis-4 状態信号
OUT MR18815              ; RB3:位置決め完了
BLD DM10547 #3           ; MSEP Axis-4 状態信号
ANB @MR011               ; RB3ｱﾗｰﾑON
ANB R46114               ; _装置原点復帰待ち
OUT MR18813              ; RB3:ｱﾗｰﾑ出力
LDP MR18813              ; RB3:ｱﾗｰﾑ出力
ANB R39004               ; ｴﾗｰ中
SET @MR011               ; RB3ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #14 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
LDA DM10546              ; MSEP Axis-4 ｱﾗｰﾑｺｰﾄﾞ
CON
STA DM20030              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET @R008
STG @R008
AND @R101
RES @R101
CON
DW #0 DM60009
CON
AND @R105                ; SW1
DW #0 DM20030            ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET MR18900              ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @R009
STG @R009
TMR #1934 #10
CON
AND T1934
RES @R100                ; MSEP_ｱﾗｰﾑ発生
CON
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
RES @MR011               ; RB3ｱﾗｰﾑON
CON
RES R39004               ; ｴﾗｰ中
CON
ENDS
LDP MR3109               ; 搬送θ軸RBｻｰﾎﾞｵﾝ ﾗﾝﾌﾟ
BSET DM10747 #4          ; MSEP Axis-4 制御信号
LDF MR3109               ; 搬送θ軸RBｻｰﾎﾞｵﾝ ﾗﾝﾌﾟ
BRES DM10747 #4          ; MSEP Axis-4 制御信号
BLD DM10747 #4           ; MSEP Axis-4 制御信号
OUT MR17703              ; θ軸ｻｰﾎﾞON表示
;RB3 (除材θ軸) MSEP-Axis4 原点復帰開始
LDP MR18804              ; RB3:HOME
ORP MR3010               ; 搬送θ軸RB原点復帰 SW
ANB @MR1601              ; 原点復帰中
AND @MR701               ; MSEP_Axis4 移動可
RES MR3113               ; 搬送θ軸RB原点復帰済み ﾗﾝﾌﾟ
CON
RES MR18802              ; RB3:原点復帰完了
CON
RES MR3010               ; 搬送θ軸RB原点復帰 SW
CON
SET @MR1601              ; 原点復帰中
CON
SET @MR1600              ; 原点復帰開始
STG @MR1600              ; 原点復帰開始
ANB @MR700               ; MSEP_Axis4 ｱﾗｰﾑ発生
AND @MR003               ; MSEP動作可
BRES DM10747 #0          ; MSEP Axis-4 制御信号
CON
BRES DM10747 #2          ; MSEP Axis-4 制御信号
CON
BRES DM10747 #3          ; MSEP Axis-4 制御信号
CON
BSET DM10747 #4          ; MSEP Axis-4 制御信号
CON
JMP @MR1603
STG @MR1603
ANB @MR700               ; MSEP_Axis4 ｱﾗｰﾑ発生
MPS
LD @MR701                ; MSEP_Axis4 移動可
BANB DM10547 #2          ; MSEP Axis-4 状態信号
ANL
JMP @MR1604
MPP
ANB @MR701               ; MSEP_Axis4 移動可
TMR #960 #300            ; MSEP_Axis4_ｳｪｲﾄﾀｲﾏ
CON
AND T960                 ; MSEP_Axis4_ｳｪｲﾄﾀｲﾏ
RES MR18804              ; RB3:HOME
CON
RES @MR1601              ; 原点復帰中
CON
BRES DM10747 #4          ; MSEP Axis-4 制御信号
CON
SET @R900                ; MSEP_Axis3 ｱﾗｰﾑ発生
CON
ENDS
STG @MR1604
ANB @MR700               ; MSEP_Axis4 ｱﾗｰﾑ発生
BSET DM10747 #1          ; MSEP Axis-4 制御信号
CON
JMP @MR1605
STG @MR1605
ANB @MR700               ; MSEP_Axis4 ｱﾗｰﾑ発生
MPS
BANB DM10547 #0          ; MSEP Axis-4 状態信号
BRES DM10747 #1          ; MSEP Axis-4 制御信号
CON
JMP @MR1606
MPP
BAND DM10547 #0          ; MSEP Axis-4 状態信号
TMR #961 #50             ; MSEP_Axis4_ｳｪｲﾄﾀｲﾏ
CON
AND T961                 ; MSEP_Axis4_ｳｪｲﾄﾀｲﾏ
RES MR18804              ; RB3:HOME
CON
RES @MR1601              ; 原点復帰中
CON
BRES DM10747 #4          ; MSEP Axis-4 制御信号
CON
SET @R901                ; MSEP_Axis3 ｱﾗｰﾑ発生
CON
ENDS
STG @MR1606
ANB @MR700               ; MSEP_Axis4 ｱﾗｰﾑ発生
MPS
BLDB DM10547 #2          ; MSEP Axis-4 状態信号
BAND DM10547 #0          ; MSEP Axis-4 状態信号
ANL
JMP @MR1607
MPP
BANB DM10547 #0          ; MSEP Axis-4 状態信号
TMR #962 #200            ; MSEP_Axis4_ｳｪｲﾄﾀｲﾏ
CON
AND T962                 ; MSEP_Axis4_ｳｪｲﾄﾀｲﾏ
RES MR18804              ; RB3:HOME
CON
RES @MR1601              ; 原点復帰中
CON
BRES DM10747 #4          ; MSEP Axis-4 制御信号
CON
SET @R902                ; MSEP_Axis3 ｱﾗｰﾑ発生
CON
ENDS
STG @MR1607
ANB @MR700               ; MSEP_Axis4 ｱﾗｰﾑ発生
DW.D #0 DM11082          ; RB3 現在位置1
CON
DW #0 DM11084            ; RB3 現在ﾎﾟｼﾞｼｮﾝ番号
CON
JMP @MR1608
STG @MR1608
RES @MR1601              ; 原点復帰中
CON
RES MR18804              ; RB3:HOME
CON
SET MR3113               ; 搬送θ軸RB原点復帰済み ﾗﾝﾌﾟ
CON
SET MR18802              ; RB3:原点復帰完了
CON
ENDS
LD @R900                 ; MSEP_Axis3 ｱﾗｰﾑ発生
OR @R901                 ; MSEP_Axis3 ｱﾗｰﾑ発生
OR @R902                 ; MSEP_Axis3 ｱﾗｰﾑ発生
ANB MR18813              ; RB3:ｱﾗｰﾑ出力
ANB R39004               ; ｴﾗｰ中
SET @MR011               ; RB3ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #84 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
SET @R910                ; MSEP_Axis3 ｱﾗｰﾑ発生
STG @R910                ; MSEP_Axis3 ｱﾗｰﾑ発生
ZRES @R900 @R902         ; MSEP_Axis3 ｱﾗｰﾑ発生  MSEP_Axis3 ｱﾗｰﾑ発生
CON
AND @R101
RES @R101
CON
DW #0 DM60009
CON
AND @R105                ; SW1
SET MR18900              ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @R911
STG @R911
TMR #1966 #10
CON
AND T1966
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
RES @R100                ; MSEP_ｱﾗｰﾑ発生
CON
RES R39004               ; ｴﾗｰ中
CON
RES @MR011               ; RB3ｱﾗｰﾑON
CON
SET MR18804              ; RB3:HOME
CON
ENDS
;RB3 (除材θ軸) MSEP-Axis4 ﾎﾟｲﾝﾄﾃﾞｰﾀｾｯﾄ→移動
LDP MR18805              ; RB3:θ軸　MOVE
ANB @MR2601              ; 動作中
SET MR5312               ; MOVE SW 表示
CON
SET @MR2601              ; 動作中
CON
SET @MR2600              ; 動作開始
STG @MR2600              ; 動作開始
ANB @MR700               ; MSEP_Axis4 ｱﾗｰﾑ発生
MPS
LD @MR701                ; MSEP_Axis4 移動可
BANB DM10547 #2          ; MSEP Axis-4 状態信号
ANL
BRES DM10747 #2          ; MSEP Axis-4 制御信号
CON
BRES DM10747 #3          ; MSEP Axis-4 制御信号
CON
JMP @MR2603
MPP
ANB @MR701               ; MSEP_Axis4 移動可
TMR #963 #50             ; MSEP_Axis4_ｳｪｲﾄﾀｲﾏ
CON
AND T963                 ; MSEP_Axis4_ｳｪｲﾄﾀｲﾏ
RES MR5312               ; MOVE SW 表示
CON
BRES DM10747 #2          ; MSEP Axis-4 制御信号
CON
BRES DM10747 #3          ; MSEP Axis-4 制御信号
CON
RES MR18814              ; RB3:MOVE-STOP
CON
SET @R903                ; MSEP_Axis3 ｱﾗｰﾑ発生
CON
ENDS
STG @MR2603
ANB @MR700               ; MSEP_Axis4 ｱﾗｰﾑ発生
MPS
AND= DM11088 #1          ; RB3 θ軸　目標ﾎﾟｲﾝﾄ番号
MOV.L EM2120 DM10740     ; RB3 P1 目標位置（下位bit）  MSEP Axis-4 目標位置（下位8bit）
MOV EM2122 DM10744       ; RB3 P1 指令速度  MSEP Axis-4 速度
MRD
AND= DM11088 #2          ; RB3 θ軸　目標ﾎﾟｲﾝﾄ番号
MOV.L EM2123 DM10740     ; RB3 P2 目標位置（下位bit）  MSEP Axis-4 目標位置（下位8bit）
MOV EM2125 DM10744       ; RB3 P2 指令速度  MSEP Axis-4 速度
MRD
AND= DM11088 #3          ; RB3 θ軸　目標ﾎﾟｲﾝﾄ番号
MOV.L EM2126 DM10740     ; RB3 P3 目標位置（下位bit）  MSEP Axis-4 目標位置（下位8bit）
MOV EM2128 DM10744       ; RB3 P3 指令速度  MSEP Axis-4 速度
MRD
AND= DM11088 #4          ; RB3 θ軸　目標ﾎﾟｲﾝﾄ番号
MOV.L EM2129 DM10740     ; RB3 P4 目標位置（下位bit）  MSEP Axis-4 目標位置（下位8bit）
MOV EM2131 DM10744       ; RB3 P4 指令速度  MSEP Axis-4 速度
MRD
AND= DM11088 #5          ; RB3 θ軸　目標ﾎﾟｲﾝﾄ番号
MOV.L EM2132 DM10740     ; RB3 P5 目標位置（下位bit）  MSEP Axis-4 目標位置（下位8bit）
MOV EM2134 DM10744       ; RB3 P5 指令速度  MSEP Axis-4 速度
MPP
TMR #964 #2              ; MSEP_Axis4_ｳｪｲﾄﾀｲﾏ
CON
AND T964                 ; MSEP_Axis4_ｳｪｲﾄﾀｲﾏ
JMP @MR2604
STG @MR2604
ANB @MR700               ; MSEP_Axis4 ｱﾗｰﾑ発生
BSET DM10747 #0          ; MSEP Axis-4 制御信号
CON
JMP @MR2605
STG @MR2605
ANB @MR700               ; MSEP_Axis4 ｱﾗｰﾑ発生
MPS
BANB DM10547 #0          ; MSEP Axis-4 状態信号
BRES DM10747 #0          ; MSEP Axis-4 制御信号
CON
JMP @MR2606
MPP
BAND DM10547 #0          ; MSEP Axis-4 状態信号
TMR #965 #50             ; MSEP_Axis4_ｳｪｲﾄﾀｲﾏ
CON
AND T965                 ; MSEP_Axis4_ｳｪｲﾄﾀｲﾏ
BRES DM10747 #0          ; MSEP Axis-4 制御信号
CON
RES MR5312               ; MOVE SW 表示
CON
BRES DM10747 #2          ; MSEP Axis-4 制御信号
CON
BRES DM10747 #3          ; MSEP Axis-4 制御信号
CON
RES MR18814              ; RB3:MOVE-STOP
CON
SET @R904                ; MSEP_Axis3 ｱﾗｰﾑ発生
CON
ENDS
STG @MR2606
ANB @MR700               ; MSEP_Axis4 ｱﾗｰﾑ発生
MPS
BLDB DM10547 #2          ; MSEP Axis-4 状態信号
BAND DM10547 #0          ; MSEP Axis-4 状態信号
ANL
TMH #966 #10             ; MSEP_Axis4_ｳｪｲﾄﾀｲﾏ
CON
AND T966                 ; MSEP_Axis4_ｳｪｲﾄﾀｲﾏ
JMP @MR2607
MRD
BLD DM10547 #2           ; MSEP Axis-4 状態信号
AND MR18814              ; RB3:MOVE-STOP
ANL
JMP @MR2608
MPP
BANB DM10547 #2          ; MSEP Axis-4 状態信号
TMR #967 #600            ; MSEP_Axis4_ｳｪｲﾄﾀｲﾏ
CON
AND T967                 ; MSEP_Axis4_ｳｪｲﾄﾀｲﾏ
RES MR5312               ; MOVE SW 表示
CON
BRES DM10747 #2          ; MSEP Axis-4 制御信号
CON
BRES DM10747 #3          ; MSEP Axis-4 制御信号
CON
RES MR18814              ; RB3:MOVE-STOP
CON
SET @R905                ; MSEP_Axis3 ｱﾗｰﾑ発生
CON
ENDS
STG @MR2608
BSET DM10747 #2          ; MSEP Axis-4 制御信号
CON
BANB DM10547 #2          ; MSEP Axis-4 状態信号
JMP @MR2609
STG @MR2609
BSET DM10747 #3          ; MSEP Axis-4 制御信号
CON
TMH #968 #7              ; MSEP_Axis4_ｳｪｲﾄﾀｲﾏ
CON
AND T968                 ; MSEP_Axis4_ｳｪｲﾄﾀｲﾏ
BRES DM10747 #2          ; MSEP Axis-4 制御信号
CON
BRES DM10747 #3          ; MSEP Axis-4 制御信号
CON
JMP @MR2610
STG @MR2610
MPS
BAND DM10547 #0          ; MSEP Axis-4 状態信号
JMP @MR2607
MPP
BANB DM10547 #0          ; MSEP Axis-4 状態信号
TMR #969 #50             ; MSEP_Axis4_ｳｪｲﾄﾀｲﾏ
CON
AND T969                 ; MSEP_Axis4_ｳｪｲﾄﾀｲﾏ
BRES DM10747 #0          ; MSEP Axis-4 制御信号
CON
RES MR5312               ; MOVE SW 表示
CON
BRES DM10747 #2          ; MSEP Axis-4 制御信号
CON
BRES DM10747 #3          ; MSEP Axis-4 制御信号
CON
RES MR18814              ; RB3:MOVE-STOP
CON
SET @R906                ; MSEP_Axis3 ｱﾗｰﾑ発生
CON
ENDS
STG @MR2607
ANB @MR700               ; MSEP_Axis4 ｱﾗｰﾑ発生
MOV.L DM10540 DM11082    ; MSEP Axis-4 現在位置（下位8bit）  RB3 現在位置1
MOV DM11088 DM11084      ; RB3 θ軸　目標ﾎﾟｲﾝﾄ番号  RB3 現在ﾎﾟｼﾞｼｮﾝ番号
RES MR5312               ; MOVE SW 表示
CON
BRES DM10747 #2          ; MSEP Axis-4 制御信号
CON
BRES DM10747 #3          ; MSEP Axis-4 制御信号
CON
RES MR18805              ; RB3:θ軸　MOVE
CON
RES MR18814              ; RB3:MOVE-STOP
CON
RES @MR2601              ; 動作中
CON
ENDS
LD @R903                 ; MSEP_Axis3 ｱﾗｰﾑ発生
OR @R904                 ; MSEP_Axis3 ｱﾗｰﾑ発生
OR @R905                 ; MSEP_Axis3 ｱﾗｰﾑ発生
OR @R906                 ; MSEP_Axis3 ｱﾗｰﾑ発生
ANB MR18813              ; RB3:ｱﾗｰﾑ出力
ANB R39004               ; ｴﾗｰ中
SET @MR011               ; RB3ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #84 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
SET @R912                ; MSEP_Axis3 ｱﾗｰﾑ発生
STG @R912                ; MSEP_Axis3 ｱﾗｰﾑ発生
ZRES @R903 @R906         ; MSEP_Axis3 ｱﾗｰﾑ発生  MSEP_Axis3 ｱﾗｰﾑ発生
CON
AND @R101
RES @R101
CON
DW #0 DM60009
CON
AND @R105                ; SW1
SET MR18900              ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @R913
STG @R913
TMR #1967 #10
CON
AND T1967
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
RES @R100                ; MSEP_ｱﾗｰﾑ発生
CON
RES R39004               ; ｴﾗｰ中
CON
RES @MR011               ; RB3ｱﾗｰﾑON
CON
JMP @MR2600              ; 動作開始
;RB3 (除材θ軸) MSEP-Axis4 JOG/INCHING
LD= DM3000 #1913         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1903         ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND MR3113               ; 搬送θ軸RB原点復帰済み ﾗﾝﾌﾟ
AND @MR701               ; MSEP_Axis4 移動可
ANB @MR1601              ; 原点復帰中
ANB @MR2601              ; 動作中
MPS
ANB MR18807              ; RB3:JOG/INCH
OUT @MR3600              ; JOG　動作
MPP
AND MR18807              ; RB3:JOG/INCH
OUT @MR3607              ; INCHING　動作
LDP @MR3607              ; INCHING　動作
BSET DM10747 #5          ; MSEP Axis-4 制御信号
LDF @MR3607              ; INCHING　動作
BRES DM10747 #5          ; MSEP Axis-4 制御信号
LD @MR3600               ; JOG　動作
OR @MR3607               ; INCHING　動作
MPS
LD MR18811               ; RB3:JOG+動作
ANB MR18812              ; RB3:JOG-動作
ANL
BOUT DM10747 #8          ; MSEP Axis-4 制御信号
MPP
LD MR18812               ; RB3:JOG-動作
ANB MR18811              ; RB3:JOG+動作
ANL
BOUT DM10747 #7          ; MSEP Axis-4 制御信号
;RB3 (除材θ軸) MSEP-Axis4 Point Data Write
LD CR2002                ; 常時ON
LD MR3113                ; 搬送θ軸RB原点復帰済み ﾗﾝﾌﾟ
OR CR2002                ; 常時ON
ANL
MPS
ANP MR5400               ; 除材θ P1 選択
DW #1 DM11088            ; RB3 θ軸　目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14500 MR14504     ; NR_除材搬送_θ軸_P1  NR_除材搬送_θ軸_P5
CON
ZRES MR13400 MR13404     ; CR_除材搬送_θ軸_P1  CR_除材搬送_θ軸_P5
CON
SET MR13400              ; CR_除材搬送_θ軸_P1
CON
SET MR14500              ; NR_除材搬送_θ軸_P1
MRD
ANP MR5401               ; 除材θ P2 選択
DW #2 DM11088            ; RB3 θ軸　目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14500 MR14504     ; NR_除材搬送_θ軸_P1  NR_除材搬送_θ軸_P5
CON
ZRES MR13400 MR13404     ; CR_除材搬送_θ軸_P1  CR_除材搬送_θ軸_P5
CON
SET MR13401              ; CR_除材搬送_θ軸_P2
CON
SET MR14501              ; NR_除材搬送_θ軸_P2
MRD
ANP MR5402               ; 除材θ P3 選択
DW #3 DM11088            ; RB3 θ軸　目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14500 MR14504     ; NR_除材搬送_θ軸_P1  NR_除材搬送_θ軸_P5
CON
ZRES MR13400 MR13404     ; CR_除材搬送_θ軸_P1  CR_除材搬送_θ軸_P5
CON
SET MR13402              ; CR_除材搬送_θ軸_P3
CON
SET MR14502              ; NR_除材搬送_θ軸_P3
MRD
ANP MR5403               ; 除材θ P4 選択
DW #4 DM11088            ; RB3 θ軸　目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14500 MR14504     ; NR_除材搬送_θ軸_P1  NR_除材搬送_θ軸_P5
CON
ZRES MR13400 MR13404     ; CR_除材搬送_θ軸_P1  CR_除材搬送_θ軸_P5
CON
SET MR13403              ; CR_除材搬送_θ軸_P4
CON
SET MR14503              ; NR_除材搬送_θ軸_P4
MPP
ANP MR5404               ; 除材θ P5 選択
DW #5 DM11088            ; RB3 θ軸　目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14500 MR14504     ; NR_除材搬送_θ軸_P1  NR_除材搬送_θ軸_P5
CON
ZRES MR13400 MR13404     ; CR_除材搬送_θ軸_P1  CR_除材搬送_θ軸_P5
CON
SET MR13404              ; CR_除材搬送_θ軸_P5
CON
SET MR14504              ; NR_除材搬送_θ軸_P5
LD CR2002                ; 常時ON
MOV.L EM2120 EM38300     ; RB3 P1 目標位置（下位bit）
LD= DM3000 #1903         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1913         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR3113                ; 搬送θ軸RB原点復帰済み ﾗﾝﾌﾟ
OR CR2002                ; 常時ON
ANL
MPS
ANP MR5400               ; 除材θ P1 選択
MOV.L EM2120 EM1912      ; RB3 P1 目標位置（下位bit）  RB3 目標位置（下位bit）表示用
MOV EM2122 EM1914        ; RB3 P1 指令速度  RB3 指令速度表示用
MRD
ANP MR5401               ; 除材θ P2 選択
MOV.L EM2123 EM1912      ; RB3 P2 目標位置（下位bit）  RB3 目標位置（下位bit）表示用
MOV EM2125 EM1914        ; RB3 P2 指令速度  RB3 指令速度表示用
MRD
ANP MR5402               ; 除材θ P3 選択
MOV.L EM2126 EM1912      ; RB3 P3 目標位置（下位bit）  RB3 目標位置（下位bit）表示用
MOV EM2128 EM1914        ; RB3 P3 指令速度  RB3 指令速度表示用
MRD
ANP MR5403               ; 除材θ P4 選択
MOV.L EM2129 EM1912      ; RB3 P4 目標位置（下位bit）  RB3 目標位置（下位bit）表示用
MOV EM2131 EM1914        ; RB3 P4 指令速度  RB3 指令速度表示用
MPP
ANP MR5404               ; 除材θ P5 選択
MOV.L EM2132 EM1912      ; RB3 P5 目標位置（下位bit）  RB3 目標位置（下位bit）表示用
MOV EM2134 EM1914        ; RB3 P5 指令速度  RB3 指令速度表示用
LD= DM3000 #1903         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1913         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR13400               ; CR_除材搬送_θ軸_P1
OR MR14500               ; NR_除材搬送_θ軸_P1
ANL
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10540 EM2120     ; MSEP Axis-4 現在位置（下位8bit）  RB3 P1 目標位置（下位bit）
MOV EM1914 EM2122        ; RB3 指令速度表示用  RB3 P1 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1912 EM2120      ; RB3 目標位置（下位bit）表示用  RB3 P1 目標位置（下位bit）
MOV EM1914 EM2122        ; RB3 指令速度表示用  RB3 P1 指令速度
LD= DM3000 #1903         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1913         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR13401               ; CR_除材搬送_θ軸_P2
OR MR14501               ; NR_除材搬送_θ軸_P2
ANL
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10540 EM2123     ; MSEP Axis-4 現在位置（下位8bit）  RB3 P2 目標位置（下位bit）
MOV EM1914 EM2125        ; RB3 指令速度表示用  RB3 P2 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1912 EM2123      ; RB3 目標位置（下位bit）表示用  RB3 P2 目標位置（下位bit）
MOV EM1914 EM2125        ; RB3 指令速度表示用  RB3 P2 指令速度
LD= DM3000 #1903         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1913         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR13402               ; CR_除材搬送_θ軸_P3
OR MR14502               ; NR_除材搬送_θ軸_P3
ANL
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10540 EM2126     ; MSEP Axis-4 現在位置（下位8bit）  RB3 P3 目標位置（下位bit）
MOV EM1914 EM2128        ; RB3 指令速度表示用  RB3 P3 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1912 EM2126      ; RB3 目標位置（下位bit）表示用  RB3 P3 目標位置（下位bit）
MOV EM1914 EM2128        ; RB3 指令速度表示用  RB3 P3 指令速度
LD= DM3000 #1903         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1913         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR13403               ; CR_除材搬送_θ軸_P4
OR MR14503               ; NR_除材搬送_θ軸_P4
ANL
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10540 EM2129     ; MSEP Axis-4 現在位置（下位8bit）  RB3 P4 目標位置（下位bit）
MOV EM1914 EM2131        ; RB3 指令速度表示用  RB3 P4 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1912 EM2129      ; RB3 目標位置（下位bit）表示用  RB3 P4 目標位置（下位bit）
MOV EM1914 EM2131        ; RB3 指令速度表示用  RB3 P4 指令速度
;EM2132.L = +5000
;EM2134 = #200
LD CR2002                ; 常時ON
NCJ #1006
;EM2132.L = +5000
;
LD CR2002                ; 常時ON
MOV.L +5000 EM2132       ; RB3 P5 目標位置（下位bit）
;EM2134 = #200
LD CR2002                ; 常時ON
MOV #200 EM2134          ; RB3 P5 指令速度
LABEL #1006
;
LD= DM3000 #1903         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1913         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR13404               ; CR_除材搬送_θ軸_P5
OR MR14504               ; NR_除材搬送_θ軸_P5
ANL
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10540 EM2132     ; MSEP Axis-4 現在位置（下位8bit）  RB3 P5 目標位置（下位bit）
MOV EM1914 EM2134        ; RB3 指令速度表示用  RB3 P5 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1912 EM2132      ; RB3 目標位置（下位bit）表示用  RB3 P5 目標位置（下位bit）
MOV EM1914 EM2134        ; RB3 指令速度表示用  RB3 P5 指令速度
;EM42120.l = em2120.l - 2
;EM43120.l = em2120.l + 2
;EM42123.l = em2123.l - 2
;EM43123.l = em2123.l + 2
;EM42126.l = em2126.l - 2
;EM43126.l = em2126.l + 2
;EM42129.l = em2129.l - 2
;EM43129.l = em2129.l + 2
;EM42132.l = em2132.l - 2
;EM43132.l = em2132.l + 2
;EM42135.l = em2135.l - 2
;EM43135.l = em2135.l + 2
LD CR2002                ; 常時ON
NCJ #1004
;EM42120.l = em2120.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2120             ; RB3 P1 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42120
;EM43120.l = em2120.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2120             ; RB3 P1 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43120
;EM42123.l = em2123.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2123             ; RB3 P2 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42123
;EM43123.l = em2123.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2123             ; RB3 P2 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43123
;EM42126.l = em2126.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2126             ; RB3 P3 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42126
;EM43126.l = em2126.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2126             ; RB3 P3 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43126
;EM42129.l = em2129.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2129             ; RB3 P4 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42129
;EM43129.l = em2129.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2129             ; RB3 P4 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43129
;EM42132.l = em2132.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2132             ; RB3 P5 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42132
;EM43132.l = em2132.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2132             ; RB3 P5 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43132
;EM42135.l = em2135.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2135             ; RB3 P6 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42135
;EM43135.l = em2135.l + 2
LD CR2002                ; 常時ON
LDA.L EM2135             ; RB3 P6 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43135
LABEL #1004
;
LD CR2002                ; 常時ON
AND MR3113               ; 搬送θ軸RB原点復帰済み ﾗﾝﾌﾟ
MPS
LD<=.L EM42120 DM10540   ; MSEP Axis-4 現在位置（下位8bit）
AND<=.L DM10540 EM43120  ; MSEP Axis-4 現在位置（下位8bit）
LD>.L EM42120 DM10540    ; MSEP Axis-4 現在位置（下位8bit）
OR>.L DM10540 EM43120    ; MSEP Axis-4 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
LD MR14500               ; NR_除材搬送_θ軸_P1
OR MR13400               ; CR_除材搬送_θ軸_P1
ANL
ORL
ANL
OUT MR23400              ; 除材搬送_θ軸_P1
MRD
LD<=.L EM42123 DM10540   ; MSEP Axis-4 現在位置（下位8bit）
AND<=.L DM10540 EM43123  ; MSEP Axis-4 現在位置（下位8bit）
LD>.L EM42123 DM10540    ; MSEP Axis-4 現在位置（下位8bit）
OR>.L DM10540 EM43123    ; MSEP Axis-4 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
LD MR14501               ; NR_除材搬送_θ軸_P2
OR MR13401               ; CR_除材搬送_θ軸_P2
ANL
ORL
ANL
OUT MR23401              ; 除材搬送_θ軸_P2
MRD
LD<=.L EM42126 DM10540   ; MSEP Axis-4 現在位置（下位8bit）
AND<=.L DM10540 EM43126  ; MSEP Axis-4 現在位置（下位8bit）
LD>.L EM42126 DM10540    ; MSEP Axis-4 現在位置（下位8bit）
OR>.L DM10540 EM43126    ; MSEP Axis-4 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
LD MR14502               ; NR_除材搬送_θ軸_P3
OR MR13402               ; CR_除材搬送_θ軸_P3
ANL
ORL
ANL
OUT MR23402              ; 除材搬送_θ軸_P3
MRD
LD<=.L EM42129 DM10540   ; MSEP Axis-4 現在位置（下位8bit）
AND<=.L DM10540 EM43129  ; MSEP Axis-4 現在位置（下位8bit）
LD>.L EM42129 DM10540    ; MSEP Axis-4 現在位置（下位8bit）
OR>.L DM10540 EM43129    ; MSEP Axis-4 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
LD MR14503               ; NR_除材搬送_θ軸_P4
OR MR13403               ; CR_除材搬送_θ軸_P4
ANL
ORL
ANL
OUT MR23403              ; 除材搬送_θ軸_P4
MPP
LD<=.L EM42132 DM10540   ; MSEP Axis-4 現在位置（下位8bit）
AND<=.L DM10540 EM43132  ; MSEP Axis-4 現在位置（下位8bit）
LD>.L EM42132 DM10540    ; MSEP Axis-4 現在位置（下位8bit）
OR>.L DM10540 EM43132    ; MSEP Axis-4 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
LD MR14504               ; NR_除材搬送_θ軸_P5
OR MR13404               ; CR_除材搬送_θ軸_P5
ANL
ORL
ANL
OUT MR23404              ; 除材搬送_θ軸_P5
LD CR2002                ; 常時ON
AND MR3113               ; 搬送θ軸RB原点復帰済み ﾗﾝﾌﾟ
MPS
LD MR14500               ; NR_除材搬送_θ軸_P1
OR MR13400               ; CR_除材搬送_θ軸_P1
LD>.L EM42120 DM10540    ; MSEP Axis-4 現在位置（下位8bit）
OR>.L DM10540 EM43120    ; MSEP Axis-4 現在位置（下位8bit）
ANL
ANB @MR2601              ; 動作中
ANP MR5313               ; MOVE SW
ANL
SET MR18805              ; RB3:θ軸　MOVE
MRD
LD MR14501               ; NR_除材搬送_θ軸_P2
OR MR13401               ; CR_除材搬送_θ軸_P2
LD>.L EM42123 DM10540    ; MSEP Axis-4 現在位置（下位8bit）
OR>.L DM10540 EM43123    ; MSEP Axis-4 現在位置（下位8bit）
ANL
ANB @MR2601              ; 動作中
ANP MR5313               ; MOVE SW
ANL
SET MR18805              ; RB3:θ軸　MOVE
MRD
LD MR14502               ; NR_除材搬送_θ軸_P3
OR MR13402               ; CR_除材搬送_θ軸_P3
LD>.L EM42126 DM10540    ; MSEP Axis-4 現在位置（下位8bit）
OR>.L DM10540 EM43126    ; MSEP Axis-4 現在位置（下位8bit）
ANL
ANB @MR2601              ; 動作中
ANP MR5313               ; MOVE SW
ANL
SET MR18805              ; RB3:θ軸　MOVE
MRD
LD MR14503               ; NR_除材搬送_θ軸_P4
OR MR13403               ; CR_除材搬送_θ軸_P4
LD>.L EM42129 DM10540    ; MSEP Axis-4 現在位置（下位8bit）
OR>.L DM10540 EM43129    ; MSEP Axis-4 現在位置（下位8bit）
ANL
ANB @MR2601              ; 動作中
ANP MR5313               ; MOVE SW
ANL
SET MR18805              ; RB3:θ軸　MOVE
MPP
LD MR14504               ; NR_除材搬送_θ軸_P5
OR MR13404               ; CR_除材搬送_θ軸_P5
LD>.L EM42132 DM10540    ; MSEP Axis-4 現在位置（下位8bit）
OR>.L DM10540 EM43132    ; MSEP Axis-4 現在位置（下位8bit）
ANL
ANB @MR2601              ; 動作中
ANP MR5313               ; MOVE SW
ANL
SET MR18805              ; RB3:θ軸　MOVE
;RB3 (除材θ軸) MSEP-Axis4 ｱﾗｰﾑﾘｾｯﾄ
STG MR18900              ; ｱﾗｰﾑﾘｾｯﾄ要求
SET MR18901              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
JMP MR18902
STG MR18902
SET MR18809              ; RB3:ARMRST
CON
JMP MR18903
STG MR18903
AND MR18800              ; RB3:動作完了
RES MR18901              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
RES MR18800              ; RB3:動作完了
CON
ENDS
LDP MR18809              ; RB3:ARMRST
ANB @MR3611              ; ｱﾗｰﾑﾘｾｯﾄ中
RES MR18809              ; RB3:ARMRST
CON
SET @MR3611              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
SET @MR3610              ; ｱﾗｰﾑﾘｾｯﾄ開始
STG @MR3610              ; ｱﾗｰﾑﾘｾｯﾄ開始
BSET DM10747 #3          ; MSEP Axis-4 制御信号
CON
MPS
BANB DM10547 #3          ; MSEP Axis-4 状態信号
JMP @MR3613
MPP
BAND DM10547 #3          ; MSEP Axis-4 状態信号
TMH #970 #50             ; MSEP_Axis4_ｳｪｲﾄﾀｲﾏ
CON
AND T970                 ; MSEP_Axis4_ｳｪｲﾄﾀｲﾏ
JMP @MR3612
STG @MR3612
ZRES MR18900 MR18903     ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
RES MR18809              ; RB3:ARMRST
CON
RES @MR3611              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
SET @R907                ; MSEP_Axis3 ｱﾗｰﾑ発生
CON
ENDS
STG @MR3613
MPS
BLDB DM10547 #3          ; MSEP Axis-4 状態信号
BAND DM10547 #4          ; MSEP Axis-4 状態信号
BAND DM10547 #14         ; MSEP Axis-4 状態信号
ANL
JMP @MR3614
MPP
BLD DM10547 #3           ; MSEP Axis-4 状態信号
BORB DM10547 #4          ; MSEP Axis-4 状態信号
BORB DM10547 #14         ; MSEP Axis-4 状態信号
ANL
TMR #971 #100            ; MSEP_Axis4_ｳｪｲﾄﾀｲﾏ
CON
AND T971                 ; MSEP_Axis4_ｳｪｲﾄﾀｲﾏ
JMP @MR3615
STG @MR3614
RES MR18809              ; RB3:ARMRST
CON
RES @MR3611              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
SET MR18800              ; RB3:動作完了
CON
ENDS
STG @MR3615
ZRES MR18900 MR18903     ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
RES MR18809              ; RB3:ARMRST
CON
RES @MR3611              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
SET @R908                ; MSEP_Axis3 ｱﾗｰﾑ発生
CON
ENDS
LD @R907                 ; MSEP_Axis3 ｱﾗｰﾑ発生
OR @R908                 ; MSEP_Axis3 ｱﾗｰﾑ発生
ANB R39004               ; ｴﾗｰ中
SET @MR011               ; RB3ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #84 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
SET @R914
STG @R914
ZRES @R907 @R908         ; MSEP_Axis3 ｱﾗｰﾑ発生  MSEP_Axis3 ｱﾗｰﾑ発生
CON
AND @R101
RES @R101
CON
DW #0 DM60009
CON
AND @R105                ; SW1
SET MR18900              ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @R915
STG @R915
TMR #1968 #10
CON
AND T1964
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
RES @R100                ; MSEP_ｱﾗｰﾑ発生
CON
RES @MR011               ; RB3ｱﾗｰﾑON
CON
RES R39004               ; ｴﾗｰ中
CON
ENDS
;<h1/>RB4 (除材Z軸) MSEP-Axis5
BLD DM10555 #3           ; MSEP Axis-5 状態信号
OUT @MR800               ; MSEP_Axis5 ｱﾗｰﾑ発生
BLD DM10555 #4           ; MSEP Axis-5 状態信号
BAND DM10555 #14         ; MSEP Axis-5 状態信号
BANB DM10555 #15         ; MSEP Axis-5 状態信号
OUT @MR801               ; MSEP_Axis5 移動可
BLD DM10555 #0           ; MSEP Axis-5 状態信号
OUT MR19015              ; RB4:位置決め完了
BLD DM10555 #3           ; MSEP Axis-5 状態信号
ANB @MR012               ; RB4ｱﾗｰﾑON
ANB R46114               ; _装置原点復帰待ち
OUT MR19013              ; RB4:ｱﾗｰﾑ出力
LDP MR19013              ; RB4:ｱﾗｰﾑ出力
ANB R39004               ; ｴﾗｰ中
SET @MR012               ; RB4ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #13 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
LDA DM10554              ; MSEP Axis-5 ｱﾗｰﾑｺｰﾄﾞ
CON
STA DM20030              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET @R010
STG @R010
AND @R101
RES @R101
CON
DW #0 DM60009
CON
AND @R105                ; SW1
DW #0 DM20030            ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET MR19100              ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @R011
STG @R011
TMR #1935 #10
CON
AND T1935
RES @R100                ; MSEP_ｱﾗｰﾑ発生
CON
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
RES @MR012               ; RB4ｱﾗｰﾑON
CON
RES R39004               ; ｴﾗｰ中
CON
ENDS
LDP MR2904               ; 搬送Z軸RBｻｰﾎﾞｵﾝ ﾗﾝﾌﾟ
BSET DM10755 #4          ; MSEP Axis-5 制御信号
LDF MR2904               ; 搬送Z軸RBｻｰﾎﾞｵﾝ ﾗﾝﾌﾟ
BRES DM10755 #4          ; MSEP Axis-5 制御信号
BLD DM10755 #4           ; MSEP Axis-5 制御信号
OUT MR17702              ; Z軸ｻｰﾎﾞON表示
;RB4 (除材Z軸) MSEP-Axis5 原点復帰開始
LDP MR2705               ; 搬送Z軸RB原点復帰 SW
ORP MR19004              ; RB4:HOME
ANB @MR1701              ; 原点復帰中
AND @MR801               ; MSEP_Axis5 移動可
RES MR2909               ; 搬送Z軸RB原点復帰済み ﾗﾝﾌﾟ
CON
RES MR19002              ; RB4:原点復帰完了
CON
RES MR19004              ; RB4:HOME
CON
RES MR2705               ; 搬送Z軸RB原点復帰 SW
CON
SET @MR1701              ; 原点復帰中
CON
SET @MR1700              ; 原点復帰開始
STG @MR1700              ; 原点復帰開始
ANB @MR800               ; MSEP_Axis5 ｱﾗｰﾑ発生
AND @MR003               ; MSEP動作可
BRES DM10755 #0          ; MSEP Axis-5 制御信号
CON
BRES DM10755 #2          ; MSEP Axis-5 制御信号
CON
BRES DM10755 #3          ; MSEP Axis-5 制御信号
CON
BSET DM10755 #4          ; MSEP Axis-5 制御信号
CON
JMP @MR1703
STG @MR1703
ANB @MR800               ; MSEP_Axis5 ｱﾗｰﾑ発生
MPS
LD @MR801                ; MSEP_Axis5 移動可
BANB DM10555 #2          ; MSEP Axis-5 状態信号
ANL
JMP @MR1704
MPP
ANB @MR801               ; MSEP_Axis5 移動可
TMR #980 #300            ; MSEP_Axis5_ｳｪｲﾄﾀｲﾏ
CON
AND T980                 ; MSEP_Axis5_ｳｪｲﾄﾀｲﾏ
RES @MR1701              ; 原点復帰中
CON
BRES DM10755 #4          ; MSEP Axis-5 制御信号
CON
SET @R1000               ; MSEP_Axis4 ｱﾗｰﾑ発生
CON
ENDS
STG @MR1704
ANB @MR800               ; MSEP_Axis5 ｱﾗｰﾑ発生
BSET DM10755 #1          ; MSEP Axis-5 制御信号
CON
JMP @MR1705
STG @MR1705
ANB @MR800               ; MSEP_Axis5 ｱﾗｰﾑ発生
MPS
BANB DM10555 #0          ; MSEP Axis-5 状態信号
BRES DM10755 #1          ; MSEP Axis-5 制御信号
CON
JMP @MR1706
MPP
BAND DM10555 #0          ; MSEP Axis-5 状態信号
TMR #981 #300            ; MSEP_Axis5_ｳｪｲﾄﾀｲﾏ
CON
AND T981                 ; MSEP_Axis5_ｳｪｲﾄﾀｲﾏ
RES @MR1701              ; 原点復帰中
CON
BRES DM10755 #4          ; MSEP Axis-5 制御信号
CON
SET @R1001               ; MSEP_Axis4 ｱﾗｰﾑ発生
CON
ENDS
STG @MR1706
ANB @MR800               ; MSEP_Axis5 ｱﾗｰﾑ発生
MPS
BLDB DM10555 #2          ; MSEP Axis-5 状態信号
BAND DM10555 #0          ; MSEP Axis-5 状態信号
ANL
JMP @MR1707
MPP
BANB DM10555 #0          ; MSEP Axis-5 状態信号
TMR #982 #300            ; MSEP_Axis5_ｳｪｲﾄﾀｲﾏ
CON
AND T982                 ; MSEP_Axis5_ｳｪｲﾄﾀｲﾏ
RES @MR1701              ; 原点復帰中
CON
BRES DM10755 #4          ; MSEP Axis-5 制御信号
CON
SET @R1002               ; MSEP_Axis4 ｱﾗｰﾑ発生
CON
ENDS
STG @MR1707
ANB @MR800               ; MSEP_Axis5 ｱﾗｰﾑ発生
DW.D #0 DM11102          ; RB4 現在位置1
CON
DW #0 DM11104            ; RB4 現在ﾎﾟｼﾞｼｮﾝ番号
CON
JMP @MR1708
STG @MR1708
RES @MR1701              ; 原点復帰中
CON
SET MR2909               ; 搬送Z軸RB原点復帰済み ﾗﾝﾌﾟ
CON
SET MR19002              ; RB4:原点復帰完了
CON
ENDS
LD @R1000                ; MSEP_Axis4 ｱﾗｰﾑ発生
ANB MR19013              ; RB4:ｱﾗｰﾑ出力
ANB R39004               ; ｴﾗｰ中
SET @MR012               ; RB4ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #83 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
SET @R1010               ; MSEP_Axis4 ｱﾗｰﾑ発生
LD @R1001                ; MSEP_Axis4 ｱﾗｰﾑ発生
OR @R1002                ; MSEP_Axis4 ｱﾗｰﾑ発生
ANB MR19013              ; RB4:ｱﾗｰﾑ出力
ANB R39004               ; ｴﾗｰ中
SET @MR012               ; RB4ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #83 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
SET @R1010               ; MSEP_Axis4 ｱﾗｰﾑ発生
STG @R1010               ; MSEP_Axis4 ｱﾗｰﾑ発生
ZRES @R1000 @R1002       ; MSEP_Axis4 ｱﾗｰﾑ発生  MSEP_Axis4 ｱﾗｰﾑ発生
CON
AND @R101
RES @R101
CON
DW #0 DM60009
CON
AND @R105                ; SW1
SET MR19100              ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @R1011
STG @R1011
TMR #1969 #10
CON
AND T1969
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
RES @R100                ; MSEP_ｱﾗｰﾑ発生
CON
RES R39004               ; ｴﾗｰ中
CON
SET @MR1700              ; 原点復帰開始
CON
RES @MR012               ; RB4ｱﾗｰﾑON
CON
ENDS
;RB4 (除材Z軸) MSEP-Axis5 ﾎﾟｲﾝﾄﾃﾞｰﾀｾｯﾄ→移動
LDP MR19005              ; RB4:Z軸  MOVE
ANB @MR2701              ; 動作中
RES MR19005              ; RB4:Z軸  MOVE
CON
SET MR5412               ; MOVE SW 表示
CON
SET @MR2701              ; 動作中
CON
SET @MR2700              ; 動作開始
STG @MR2700              ; 動作開始
ANB @MR800               ; MSEP_Axis5 ｱﾗｰﾑ発生
MPS
LD @MR801                ; MSEP_Axis5 移動可
BANB DM10555 #2          ; MSEP Axis-5 状態信号
ANL
BRES DM10755 #2          ; MSEP Axis-5 制御信号
CON
BRES DM10755 #3          ; MSEP Axis-5 制御信号
CON
JMP @MR2703
MPP
ANB @MR801               ; MSEP_Axis5 移動可
TMR #983 #50             ; MSEP_Axis5_ｳｪｲﾄﾀｲﾏ
CON
AND T983                 ; MSEP_Axis5_ｳｪｲﾄﾀｲﾏ
RES MR5412               ; MOVE SW 表示
CON
BRES DM10755 #2          ; MSEP Axis-5 制御信号
CON
BRES DM10755 #3          ; MSEP Axis-5 制御信号
CON
RES MR19005              ; RB4:Z軸  MOVE
CON
RES MR19014              ; RB4:MOVE-STOP
CON
RES @MR2701              ; 動作中
CON
SET @R1003               ; MSEP_Axis4 ｱﾗｰﾑ発生
CON
ENDS
STG @MR2703
ANB @MR800               ; MSEP_Axis5 ｱﾗｰﾑ発生
MPS
AND= DM11108 #1          ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
MOV.L EM2150 DM10748     ; RB4 P1 目標位置（下位bit）  MSEP Axis-5 目標位置（下位8bit）
MOV EM2152 DM10752       ; RB4 P1 指令速度  MSEP Axis-5 速度
MRD
AND= DM11108 #2          ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
MOV.L EM2153 DM10748     ; RB4 P2 目標位置（下位bit）  MSEP Axis-5 目標位置（下位8bit）
MOV EM2155 DM10752       ; RB4 P2 指令速度  MSEP Axis-5 速度
MRD
AND= DM11108 #3          ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
MOV.L EM2156 DM10748     ; RB4 P3 目標位置（下位bit）  MSEP Axis-5 目標位置（下位8bit）
MOV EM2158 DM10752       ; RB4 P3 指令速度  MSEP Axis-5 速度
MRD
AND= DM11108 #4          ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
MOV.L EM2159 DM10748     ; RB4 P4 目標位置（下位bit）  MSEP Axis-5 目標位置（下位8bit）
MOV EM2161 DM10752       ; RB4 P4 指令速度  MSEP Axis-5 速度
MRD
AND= DM11108 #5          ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
MOV.L EM2162 DM10748     ; RB4 P5 目標位置（下位bit）  MSEP Axis-5 目標位置（下位8bit）
MOV EM2164 DM10752       ; RB4 P5 指令速度  MSEP Axis-5 速度
MRD
AND= DM11108 #6          ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
MOV.L EM2165 DM10748     ; RB4 P6 目標位置（下位bit）  MSEP Axis-5 目標位置（下位8bit）
MOV EM2167 DM10752       ; RB4 P6 指令速度  MSEP Axis-5 速度
MRD
AND= DM11108 #7          ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
MOV.L EM2168 DM10748     ; RB4 P7 目標位置（下位bit）  MSEP Axis-5 目標位置（下位8bit）
MOV EM2170 DM10752       ; RB4 P7 指令速度  MSEP Axis-5 速度
MRD
AND= DM11108 #8          ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
MOV.L EM2171 DM10748     ; RB4 P8 目標位置（下位bit）  MSEP Axis-5 目標位置（下位8bit）
MOV EM2173 DM10752       ; RB4 P8 指令速度  MSEP Axis-5 速度
MRD
AND= DM11108 #10         ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
MOV.L EM2177 DM10748     ; RB4 P10 目標位置（下位bit）  MSEP Axis-5 目標位置（下位8bit）
MOV EM2179 DM10752       ; RB4 P10 指令速度  MSEP Axis-5 速度
MPP
TMR #984 #2              ; MSEP_Axis5_ｳｪｲﾄﾀｲﾏ
CON
AND T984                 ; MSEP_Axis5_ｳｪｲﾄﾀｲﾏ
JMP @MR2704
STG @MR2704
ANB @MR800               ; MSEP_Axis5 ｱﾗｰﾑ発生
BSET DM10755 #0          ; MSEP Axis-5 制御信号
CON
JMP @MR2705
STG @MR2705
ANB @MR800               ; MSEP_Axis5 ｱﾗｰﾑ発生
MPS
BANB DM10555 #0          ; MSEP Axis-5 状態信号
BRES DM10755 #0          ; MSEP Axis-5 制御信号
CON
JMP @MR2706
MPP
BAND DM10555 #0          ; MSEP Axis-5 状態信号
TMR #985 #50             ; MSEP_Axis5_ｳｪｲﾄﾀｲﾏ
CON
AND T985                 ; MSEP_Axis5_ｳｪｲﾄﾀｲﾏ
BRES DM10755 #0          ; MSEP Axis-5 制御信号
CON
RES MR5412               ; MOVE SW 表示
CON
BRES DM10755 #2          ; MSEP Axis-5 制御信号
CON
BRES DM10755 #3          ; MSEP Axis-5 制御信号
CON
RES MR19005              ; RB4:Z軸  MOVE
CON
RES MR19014              ; RB4:MOVE-STOP
CON
RES @MR2701              ; 動作中
CON
SET @R1004               ; MSEP_Axis4 ｱﾗｰﾑ発生
CON
ENDS
STG @MR2706
ANB @MR800               ; MSEP_Axis5 ｱﾗｰﾑ発生
MPS
BLDB DM10555 #2          ; MSEP Axis-5 状態信号
BAND DM10555 #0          ; MSEP Axis-5 状態信号
ANL
TMH #986 #10             ; MSEP_Axis5_ｳｪｲﾄﾀｲﾏ
CON
AND T986                 ; MSEP_Axis5_ｳｪｲﾄﾀｲﾏ
JMP @MR2707
MRD
BLD DM10555 #2           ; MSEP Axis-5 状態信号
AND MR18814              ; RB3:MOVE-STOP
ANL
JMP @MR2708
MPP
BANB DM10555 #2          ; MSEP Axis-5 状態信号
TMR #987 #600            ; MSEP_Axis5_ｳｪｲﾄﾀｲﾏ
CON
AND T987                 ; MSEP_Axis5_ｳｪｲﾄﾀｲﾏ
RES MR5412               ; MOVE SW 表示
CON
BRES DM10755 #2          ; MSEP Axis-5 制御信号
CON
BRES DM10755 #3          ; MSEP Axis-5 制御信号
CON
RES MR19005              ; RB4:Z軸  MOVE
CON
RES MR19014              ; RB4:MOVE-STOP
CON
RES @MR2701              ; 動作中
CON
SET @R1005               ; MSEP_Axis4 ｱﾗｰﾑ発生
CON
ENDS
STG @MR2708
BSET DM10755 #2          ; MSEP Axis-5 制御信号
CON
BANB DM10555 #2          ; MSEP Axis-5 状態信号
JMP @MR2709
STG @MR2709
BSET DM10755 #3          ; MSEP Axis-5 制御信号
CON
TMH #988 #7              ; MSEP_Axis5_ｳｪｲﾄﾀｲﾏ
CON
AND T988                 ; MSEP_Axis5_ｳｪｲﾄﾀｲﾏ
BRES DM10755 #2          ; MSEP Axis-5 制御信号
CON
BRES DM10755 #3          ; MSEP Axis-5 制御信号
CON
JMP @MR2710
STG @MR2710
MPS
BAND DM10555 #0          ; MSEP Axis-5 状態信号
JMP @MR2707
MPP
BANB DM10555 #0          ; MSEP Axis-5 状態信号
TMR #989 #50             ; MSEP_Axis5_ｳｪｲﾄﾀｲﾏ
CON
AND T989                 ; MSEP_Axis5_ｳｪｲﾄﾀｲﾏ
BRES DM10755 #0          ; MSEP Axis-5 制御信号
CON
RES MR5412               ; MOVE SW 表示
CON
BRES DM10755 #2          ; MSEP Axis-5 制御信号
CON
BRES DM10755 #3          ; MSEP Axis-5 制御信号
CON
RES MR19005              ; RB4:Z軸  MOVE
CON
RES MR19014              ; RB4:MOVE-STOP
CON
RES @MR2701              ; 動作中
CON
SET @R1006               ; MSEP_Axis4 ｱﾗｰﾑ発生
CON
ENDS
STG @MR2707
ANB @MR800               ; MSEP_Axis5 ｱﾗｰﾑ発生
MOV.L DM10548 DM11102    ; MSEP Axis-5 現在位置（下位8bit）  RB4 現在位置1
MOV DM11108 DM11104      ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号  RB4 現在ﾎﾟｼﾞｼｮﾝ番号
RES MR5412               ; MOVE SW 表示
CON
BRES DM10755 #2          ; MSEP Axis-5 制御信号
CON
BRES DM10755 #3          ; MSEP Axis-5 制御信号
CON
RES MR19005              ; RB4:Z軸  MOVE
CON
RES MR19014              ; RB4:MOVE-STOP
CON
RES @MR2701              ; 動作中
CON
ENDS
LD @R1003                ; MSEP_Axis4 ｱﾗｰﾑ発生
ANB MR19013              ; RB4:ｱﾗｰﾑ出力
ANB R39004               ; ｴﾗｰ中
SET @MR012               ; RB4ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #83 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
SET @R1012               ; MSEP_Axis4 ｱﾗｰﾑ発生
LD @R1004                ; MSEP_Axis4 ｱﾗｰﾑ発生
OR @R1005                ; MSEP_Axis4 ｱﾗｰﾑ発生
OR @R1006                ; MSEP_Axis4 ｱﾗｰﾑ発生
ANB MR19013              ; RB4:ｱﾗｰﾑ出力
ANB R39004               ; ｴﾗｰ中
SET @MR012               ; RB4ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #83 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
SET @R1012               ; MSEP_Axis4 ｱﾗｰﾑ発生
STG @R1012               ; MSEP_Axis4 ｱﾗｰﾑ発生
ZRES @R1003 @R1006       ; MSEP_Axis4 ｱﾗｰﾑ発生  MSEP_Axis4 ｱﾗｰﾑ発生
CON
AND @R101
RES @R101
CON
DW #0 DM60009
CON
AND @R105                ; SW1
SET MR19100              ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @R1013
STG @R1013
TMR #1970 #10
CON
AND T1970
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
RES @R100                ; MSEP_ｱﾗｰﾑ発生
CON
SET MR19805
CON
RES @MR012               ; RB4ｱﾗｰﾑON
CON
RES R39004               ; ｴﾗｰ中
CON
ENDS
;RB4 (除材Z軸) MSEP-Axis5 JOG/INCHING
LD= DM3000 #1912         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1902         ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND MR2909               ; 搬送Z軸RB原点復帰済み ﾗﾝﾌﾟ
AND @MR801               ; MSEP_Axis5 移動可
ANB @MR1701              ; 原点復帰中
ANB @MR2701              ; 動作中
MPS
ANB MR19007              ; RB4:JOG/INCH
OUT @MR3700              ; JOG　動作
MPP
AND MR19007              ; RB4:JOG/INCH
OUT @MR3707              ; INCHING　動作
LDP @MR3707              ; INCHING　動作
BSET DM10755 #5          ; MSEP Axis-5 制御信号
LDF @MR3707              ; INCHING　動作
BRES DM10755 #5          ; MSEP Axis-5 制御信号
LD @MR3700               ; JOG　動作
OR @MR3707               ; INCHING　動作
MPS
LD MR19011               ; RB4:JOG+動作
ANB MR19012              ; RB4:JOG-動作
ANL
BOUT DM10755 #8          ; MSEP Axis-5 制御信号
MPP
LD MR19012               ; RB4:JOG-動作
ANB MR19011              ; RB4:JOG+動作
ANL
BOUT DM10755 #7          ; MSEP Axis-5 制御信号
;RB4 (除材Z軸) MSEP-Axis5 Point Data Write
LD CR2002                ; 常時ON
LD MR2909                ; 搬送Z軸RB原点復帰済み ﾗﾝﾌﾟ
OR CR2002                ; 常時ON
ANL
MPS
ANP MR5500               ; 除材Z P1 選択
DW #1 DM11108            ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14400 MR14409     ; NR_除材搬送_Z軸_P1  NR_除材搬送_Z軸_P10
CON
ZRES MR13300 MR13309     ; CR_除材搬送_Z軸_P1  CR_除材搬送_Z軸_P10
CON
SET MR13300              ; CR_除材搬送_Z軸_P1
CON
SET MR14400              ; NR_除材搬送_Z軸_P1
MRD
ANP MR5501               ; 除材Z P2 選択
DW #2 DM11108            ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14400 MR14409     ; NR_除材搬送_Z軸_P1  NR_除材搬送_Z軸_P10
CON
ZRES MR13300 MR13309     ; CR_除材搬送_Z軸_P1  CR_除材搬送_Z軸_P10
CON
SET MR13301              ; CR_除材搬送_Z軸_P2
CON
SET MR14401              ; NR_除材搬送_Z軸_P2
MRD
ANP MR5502               ; 除材Z P3 選択
DW #3 DM11108            ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14400 MR14409     ; NR_除材搬送_Z軸_P1  NR_除材搬送_Z軸_P10
CON
ZRES MR13300 MR13309     ; CR_除材搬送_Z軸_P1  CR_除材搬送_Z軸_P10
CON
SET MR13302              ; CR_除材搬送_Z軸_P3
CON
SET MR14402              ; NR_除材搬送_Z軸_P3
MRD
ANP MR5503               ; 除材Z P4 選択
DW #4 DM11108            ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14400 MR14409     ; NR_除材搬送_Z軸_P1  NR_除材搬送_Z軸_P10
CON
ZRES MR13300 MR13309     ; CR_除材搬送_Z軸_P1  CR_除材搬送_Z軸_P10
CON
SET MR13303              ; CR_除材搬送_Z軸_P4
CON
SET MR14403              ; NR_除材搬送_Z軸_P4
MRD
ANP MR5504               ; 除材Z P5 選択
DW #5 DM11108            ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14400 MR14409     ; NR_除材搬送_Z軸_P1  NR_除材搬送_Z軸_P10
CON
ZRES MR13300 MR13309     ; CR_除材搬送_Z軸_P1  CR_除材搬送_Z軸_P10
CON
SET MR13304              ; CR_除材搬送_Z軸_P5
CON
SET MR14404              ; NR_除材搬送_Z軸_P5
MRD
ANP MR5505               ; 除材Z P6 選択
DW #6 DM11108            ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14400 MR14409     ; NR_除材搬送_Z軸_P1  NR_除材搬送_Z軸_P10
CON
ZRES MR13300 MR13309     ; CR_除材搬送_Z軸_P1  CR_除材搬送_Z軸_P10
CON
SET MR13305              ; CR_除材搬送_Z軸_P6
CON
SET MR14405              ; NR_除材搬送_Z軸_P6
MRD
ANP MR5506               ; 除材Z P7 選択
DW #7 DM11108            ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14400 MR14409     ; NR_除材搬送_Z軸_P1  NR_除材搬送_Z軸_P10
CON
ZRES MR13300 MR13309     ; CR_除材搬送_Z軸_P1  CR_除材搬送_Z軸_P10
CON
SET MR13306              ; CR_除材搬送_Z軸_P7
CON
SET MR14406              ; NR_除材搬送_Z軸_P7
MRD
ANP MR5507               ; 除材Z P8 選択
DW #8 DM11108            ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14400 MR14409     ; NR_除材搬送_Z軸_P1  NR_除材搬送_Z軸_P10
CON
ZRES MR13300 MR13309     ; CR_除材搬送_Z軸_P1  CR_除材搬送_Z軸_P10
CON
SET MR13307              ; CR_除材搬送_Z軸_P8
CON
SET MR14407              ; NR_除材搬送_Z軸_P8
MPP
ANP MR5509               ; 除材Z P10 選択
DW #10 DM11108           ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
CON
ZRES MR14400 MR14409     ; NR_除材搬送_Z軸_P1  NR_除材搬送_Z軸_P10
CON
ZRES MR13300 MR13309     ; CR_除材搬送_Z軸_P1  CR_除材搬送_Z軸_P10
CON
SET MR13309              ; CR_除材搬送_Z軸_P10
CON
SET MR14409              ; NR_除材搬送_Z軸_P10
LD= DM3000 #1902         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1912         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR2909                ; 搬送Z軸RB原点復帰済み ﾗﾝﾌﾟ
OR CR2002                ; 常時ON
ANL
MPS
ANP MR5500               ; 除材Z P1 選択
MOV.L EM2150 EM1915      ; RB4 P1 目標位置（下位bit）  RB4 目標位置（下位bit）表示用
MOV EM2152 EM1917        ; RB4 P1 指令速度  RB4 指令速度表示用
MRD
ANP MR5501               ; 除材Z P2 選択
MOV.L EM2153 EM1915      ; RB4 P2 目標位置（下位bit）  RB4 目標位置（下位bit）表示用
MOV EM2155 EM1917        ; RB4 P2 指令速度  RB4 指令速度表示用
MRD
ANP MR5502               ; 除材Z P3 選択
MOV.L EM2156 EM1915      ; RB4 P3 目標位置（下位bit）  RB4 目標位置（下位bit）表示用
MOV EM2158 EM1917        ; RB4 P3 指令速度  RB4 指令速度表示用
MRD
ANP MR5503               ; 除材Z P4 選択
MOV.L EM2159 EM1915      ; RB4 P4 目標位置（下位bit）  RB4 目標位置（下位bit）表示用
MOV EM2161 EM1917        ; RB4 P4 指令速度  RB4 指令速度表示用
MRD
ANP MR5504               ; 除材Z P5 選択
MOV.L EM2162 EM1915      ; RB4 P5 目標位置（下位bit）  RB4 目標位置（下位bit）表示用
MOV EM2164 EM1917        ; RB4 P5 指令速度  RB4 指令速度表示用
MRD
ANP MR5505               ; 除材Z P6 選択
MOV.L EM2165 EM1915      ; RB4 P6 目標位置（下位bit）  RB4 目標位置（下位bit）表示用
MOV EM2167 EM1917        ; RB4 P6 指令速度  RB4 指令速度表示用
MRD
ANP MR5506               ; 除材Z P7 選択
MOV.L EM2168 EM1915      ; RB4 P7 目標位置（下位bit）  RB4 目標位置（下位bit）表示用
MOV EM2170 EM1917        ; RB4 P7 指令速度  RB4 指令速度表示用
MRD
ANP MR5507               ; 除材Z P8 選択
MOV.L EM2171 EM1915      ; RB4 P8 目標位置（下位bit）  RB4 目標位置（下位bit）表示用
MOV EM2173 EM1917        ; RB4 P8 指令速度  RB4 指令速度表示用
MPP
ANP MR5509               ; 除材Z P10 選択
MOV.L EM2177 EM1915      ; RB4 P10 目標位置（下位bit）  RB4 目標位置（下位bit）表示用
MOV EM2179 EM1917        ; RB4 P10 指令速度  RB4 指令速度表示用
LD= DM3000 #1902         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1912         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR13300               ; CR_除材搬送_Z軸_P1
OR MR14400               ; NR_除材搬送_Z軸_P1
ANL
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10548 EM2150     ; MSEP Axis-5 現在位置（下位8bit）  RB4 P1 目標位置（下位bit）
MOV EM1917 EM2152        ; RB4 指令速度表示用  RB4 P1 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1915 EM2150      ; RB4 目標位置（下位bit）表示用  RB4 P1 目標位置（下位bit）
MOV EM1917 EM2152        ; RB4 指令速度表示用  RB4 P1 指令速度
LD= DM3000 #1902         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1912         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR13301               ; CR_除材搬送_Z軸_P2
OR MR14401               ; NR_除材搬送_Z軸_P2
ANL
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10548 EM2153     ; MSEP Axis-5 現在位置（下位8bit）  RB4 P2 目標位置（下位bit）
MOV EM1917 EM2155        ; RB4 指令速度表示用  RB4 P2 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1915 EM2153      ; RB4 目標位置（下位bit）表示用  RB4 P2 目標位置（下位bit）
MOV EM1917 EM2155        ; RB4 指令速度表示用  RB4 P2 指令速度
LD= DM3000 #1902         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1912         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR13302               ; CR_除材搬送_Z軸_P3
OR MR14402               ; NR_除材搬送_Z軸_P3
ANL
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10548 EM2156     ; MSEP Axis-5 現在位置（下位8bit）  RB4 P3 目標位置（下位bit）
MOV EM1917 EM2158        ; RB4 指令速度表示用  RB4 P3 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1915 EM2156      ; RB4 目標位置（下位bit）表示用  RB4 P3 目標位置（下位bit）
MOV EM1917 EM2158        ; RB4 指令速度表示用  RB4 P3 指令速度
LD= DM3000 #1902         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1912         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR13303               ; CR_除材搬送_Z軸_P4
OR MR14403               ; NR_除材搬送_Z軸_P4
ANL
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10548 EM2159     ; MSEP Axis-5 現在位置（下位8bit）  RB4 P4 目標位置（下位bit）
MOV EM1917 EM2161        ; RB4 指令速度表示用  RB4 P4 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1915 EM2159      ; RB4 目標位置（下位bit）表示用  RB4 P4 目標位置（下位bit）
MOV EM1917 EM2161        ; RB4 指令速度表示用  RB4 P4 指令速度
LD= DM3000 #1902         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1912         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR13304               ; CR_除材搬送_Z軸_P5
OR MR14404               ; NR_除材搬送_Z軸_P5
ANL
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10548 EM2162     ; MSEP Axis-5 現在位置（下位8bit）  RB4 P5 目標位置（下位bit）
MOV EM1917 EM2164        ; RB4 指令速度表示用  RB4 P5 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1915 EM2162      ; RB4 目標位置（下位bit）表示用  RB4 P5 目標位置（下位bit）
MOV EM1917 EM2164        ; RB4 指令速度表示用  RB4 P5 指令速度
LD= DM3000 #1902         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1912         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR13305               ; CR_除材搬送_Z軸_P6
OR MR14405               ; NR_除材搬送_Z軸_P6
ANL
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10548 EM2165     ; MSEP Axis-5 現在位置（下位8bit）  RB4 P6 目標位置（下位bit）
MOV EM1917 EM2167        ; RB4 指令速度表示用  RB4 P6 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1915 EM2165      ; RB4 目標位置（下位bit）表示用  RB4 P6 目標位置（下位bit）
MOV EM1917 EM2167        ; RB4 指令速度表示用  RB4 P6 指令速度
LD= DM3000 #1902         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1912         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR13306               ; CR_除材搬送_Z軸_P7
OR MR14406               ; NR_除材搬送_Z軸_P7
ANL
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10548 EM2168     ; MSEP Axis-5 現在位置（下位8bit）  RB4 P7 目標位置（下位bit）
MOV EM1917 EM2170        ; RB4 指令速度表示用  RB4 P7 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1915 EM2168      ; RB4 目標位置（下位bit）表示用  RB4 P7 目標位置（下位bit）
MOV EM1917 EM2170        ; RB4 指令速度表示用  RB4 P7 指令速度
LD= DM3000 #1902         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1912         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR13307               ; CR_除材搬送_Z軸_P8
OR MR14407               ; NR_除材搬送_Z軸_P8
ANL
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10548 EM2171     ; MSEP Axis-5 現在位置（下位8bit）  RB4 P8 目標位置（下位bit）
MOV EM1917 EM2173        ; RB4 指令速度表示用  RB4 P8 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1915 EM2171      ; RB4 目標位置（下位bit）表示用  RB4 P8 目標位置（下位bit）
MOV EM1917 EM2173        ; RB4 指令速度表示用  RB4 P8 指令速度
LD= DM3000 #1902         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #1912         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD MR13309               ; CR_除材搬送_Z軸_P10
OR MR14409               ; NR_除材搬送_Z軸_P10
ANL
MPS
AND MR4915               ; 現在地書込SW
MOV.L DM10548 EM2177     ; MSEP Axis-5 現在位置（下位8bit）  RB4 P10 目標位置（下位bit）
MOV EM1917 EM2179        ; RB4 指令速度表示用  RB4 P10 指令速度
MPP
AND MR4914               ; 確定SW
MOV.L EM1915 EM2177      ; RB4 目標位置（下位bit）表示用  RB4 P10 目標位置（下位bit）
MOV EM1917 EM2179        ; RB4 指令速度表示用  RB4 P10 指令速度
;EM42150.l = em2150.l - 2
;EM43150.l = em2150.l + 2
;EM42153.l = em2153.l - 2
;EM43153.l = em2153.l + 2
;EM42156.l = em2156.l - 2
;EM43156.l = em2156.l + 2
;EM42159.l = em2159.l - 2
;EM43159.l = em2159.l + 2
;EM42162.l = em2162.l - 2
;EM43162.l = em2162.l + 2
;EM42165.l = em2165.l - 2
;EM43165.l = em2165.l + 2
;EM42168.l = em2168.l - 2
;EM43168.l = em2168.l + 2
;EM42171.l = em2171.l - 2
;EM43171.l = em2171.l + 2
;EM42174.l = em2174.l - 2
;EM43174.l = em2174.l + 2
;EM42177.l = em2177.l - 2
;EM43177.l = em2177.l + 2
;
;
LD CR2002                ; 常時ON
NCJ #1005
;EM42150.l = em2150.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2150             ; RB4 P1 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42150
;EM43150.l = em2150.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2150             ; RB4 P1 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43150
;EM42153.l = em2153.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2153             ; RB4 P2 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42153
;EM43153.l = em2153.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2153             ; RB4 P2 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43153
;EM42156.l = em2156.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2156             ; RB4 P3 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42156
;EM43156.l = em2156.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2156             ; RB4 P3 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43156
;EM42159.l = em2159.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2159             ; RB4 P4 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42159
;EM43159.l = em2159.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2159             ; RB4 P4 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43159
;EM42162.l = em2162.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2162             ; RB4 P5 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42162
;EM43162.l = em2162.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2162             ; RB4 P5 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43162
;EM42165.l = em2165.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2165             ; RB4 P6 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42165
;EM43165.l = em2165.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2165             ; RB4 P6 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43165
;EM42168.l = em2168.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2168             ; RB4 P7 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42168
;EM43168.l = em2168.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2168             ; RB4 P7 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43168
;EM42171.l = em2171.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2171             ; RB4 P8 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42171
;EM43171.l = em2171.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2171             ; RB4 P8 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43171
;EM42174.l = em2174.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2174             ; RB4 P9 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42174
;EM43174.l = em2174.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2174             ; RB4 P9 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43174
;EM42177.l = em2177.l - 2
;
LD CR2002                ; 常時ON
LDA.L EM2177             ; RB4 P10 目標位置（下位bit）
CON
SUB.L +2
CON
STA.L EM42177
;EM43177.l = em2177.l + 2
;
LD CR2002                ; 常時ON
LDA.L EM2177             ; RB4 P10 目標位置（下位bit）
CON
ADD.L +2
CON
STA.L EM43177
LABEL #1005
;
LD CR2002                ; 常時ON
AND MR2909               ; 搬送Z軸RB原点復帰済み ﾗﾝﾌﾟ
MPS
LD<=.L EM42150 DM10548   ; MSEP Axis-5 現在位置（下位8bit）
AND<=.L DM10548 EM43150  ; MSEP Axis-5 現在位置（下位8bit）
LD>.L EM42150 DM10548    ; MSEP Axis-5 現在位置（下位8bit）
OR>.L DM10548 EM43150    ; MSEP Axis-5 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
LD MR14400               ; NR_除材搬送_Z軸_P1
OR MR13300               ; CR_除材搬送_Z軸_P1
ANL
ORL
ANL
OUT MR23300              ; 除材搬送_Z軸_P1
MRD
LD<=.L EM42153 DM10548   ; MSEP Axis-5 現在位置（下位8bit）
AND<=.L DM10548 EM43153  ; MSEP Axis-5 現在位置（下位8bit）
LD>.L EM42153 DM10548    ; MSEP Axis-5 現在位置（下位8bit）
OR>.L DM10548 EM43153    ; MSEP Axis-5 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
LD MR14401               ; NR_除材搬送_Z軸_P2
OR MR13301               ; CR_除材搬送_Z軸_P2
ANL
ORL
ANL
OUT MR23301              ; 除材搬送_Z軸_P2
MRD
LD<=.L EM42156 DM10548   ; MSEP Axis-5 現在位置（下位8bit）
AND<=.L DM10548 EM43156  ; MSEP Axis-5 現在位置（下位8bit）
LD>.L EM42156 DM10548    ; MSEP Axis-5 現在位置（下位8bit）
OR>.L DM10548 EM43156    ; MSEP Axis-5 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
LD MR14402               ; NR_除材搬送_Z軸_P3
OR MR13302               ; CR_除材搬送_Z軸_P3
ANL
ORL
ANL
OUT MR23302              ; 除材搬送_Z軸_P3
MRD
LD<=.L EM42159 DM10548   ; MSEP Axis-5 現在位置（下位8bit）
AND<=.L DM10548 EM43159  ; MSEP Axis-5 現在位置（下位8bit）
LD>.L EM42159 DM10548    ; MSEP Axis-5 現在位置（下位8bit）
OR>.L DM10548 EM43159    ; MSEP Axis-5 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
LD MR14403               ; NR_除材搬送_Z軸_P4
OR MR13303               ; CR_除材搬送_Z軸_P4
ANL
ORL
ANL
OUT MR23303              ; 除材搬送_Z軸_P4
MRD
LD<=.L EM42162 DM10548   ; MSEP Axis-5 現在位置（下位8bit）
AND<=.L DM10548 EM43162  ; MSEP Axis-5 現在位置（下位8bit）
LD>.L EM42162 DM10548    ; MSEP Axis-5 現在位置（下位8bit）
OR>.L DM10548 EM43162    ; MSEP Axis-5 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
LD MR14404               ; NR_除材搬送_Z軸_P5
OR MR13304               ; CR_除材搬送_Z軸_P5
ANL
ORL
ANL
OUT MR23304              ; 除材搬送_Z軸_P5
MRD
LD<=.L EM42165 DM10548   ; MSEP Axis-5 現在位置（下位8bit）
AND<=.L DM10548 EM43165  ; MSEP Axis-5 現在位置（下位8bit）
LD>.L EM42165 DM10548    ; MSEP Axis-5 現在位置（下位8bit）
OR>.L DM10548 EM43165    ; MSEP Axis-5 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
LD MR14405               ; NR_除材搬送_Z軸_P6
OR MR13305               ; CR_除材搬送_Z軸_P6
ANL
ORL
ANL
OUT MR23305              ; 除材搬送_Z軸_P6
MRD
LD<=.L EM42168 DM10548   ; MSEP Axis-5 現在位置（下位8bit）
AND<=.L DM10548 EM43168  ; MSEP Axis-5 現在位置（下位8bit）
LD>.L EM42168 DM10548    ; MSEP Axis-5 現在位置（下位8bit）
OR>.L DM10548 EM43168    ; MSEP Axis-5 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
LD MR14406               ; NR_除材搬送_Z軸_P7
OR MR13306               ; CR_除材搬送_Z軸_P7
ANL
ORL
ANL
OUT MR23306              ; 除材搬送_Z軸_P7
MRD
LD<=.L EM42171 DM10548   ; MSEP Axis-5 現在位置（下位8bit）
AND<=.L DM10548 EM43171  ; MSEP Axis-5 現在位置（下位8bit）
LD>.L EM42171 DM10548    ; MSEP Axis-5 現在位置（下位8bit）
OR>.L DM10548 EM43171    ; MSEP Axis-5 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
LD MR14407               ; NR_除材搬送_Z軸_P8
OR MR13307               ; CR_除材搬送_Z軸_P8
ANL
ORL
ANL
OUT MR23307              ; 除材搬送_Z軸_P8
MPP
LD<=.L EM42177 DM10548   ; MSEP Axis-5 現在位置（下位8bit）
AND<=.L DM10548 EM43177  ; MSEP Axis-5 現在位置（下位8bit）
LD>.L EM42177 DM10548    ; MSEP Axis-5 現在位置（下位8bit）
OR>.L DM10548 EM43177    ; MSEP Axis-5 現在位置（下位8bit）
AND @MR000               ; ﾌﾘｯｶ
LD MR14409               ; NR_除材搬送_Z軸_P10
OR MR13309               ; CR_除材搬送_Z軸_P10
ANL
ORL
ANL
OUT MR23309              ; 除材搬送_Z軸_P10
LD CR2002                ; 常時ON
AND MR2909               ; 搬送Z軸RB原点復帰済み ﾗﾝﾌﾟ
MPS
LD MR14400               ; NR_除材搬送_Z軸_P1
OR MR13300               ; CR_除材搬送_Z軸_P1
LD>.L EM42150 DM10548    ; MSEP Axis-5 現在位置（下位8bit）
OR>.L DM10548 EM43150    ; MSEP Axis-5 現在位置（下位8bit）
ANL
ANB @MR2701              ; 動作中
ANP MR5413               ; MOVE SW
ANL
SET MR19005              ; RB4:Z軸  MOVE
MRD
LD MR14401               ; NR_除材搬送_Z軸_P2
OR MR13301               ; CR_除材搬送_Z軸_P2
LD>.L EM42153 DM10548    ; MSEP Axis-5 現在位置（下位8bit）
OR>.L DM10548 EM43153    ; MSEP Axis-5 現在位置（下位8bit）
ANL
ANB @MR2701              ; 動作中
ANP MR5413               ; MOVE SW
ANL
SET MR19005              ; RB4:Z軸  MOVE
MRD
LD MR14402               ; NR_除材搬送_Z軸_P3
OR MR13302               ; CR_除材搬送_Z軸_P3
LD>.L EM42156 DM10548    ; MSEP Axis-5 現在位置（下位8bit）
OR>.L DM10548 EM43156    ; MSEP Axis-5 現在位置（下位8bit）
ANL
ANB @MR2701              ; 動作中
ANP MR5413               ; MOVE SW
ANL
SET MR19005              ; RB4:Z軸  MOVE
MRD
LD MR14403               ; NR_除材搬送_Z軸_P4
OR MR13303               ; CR_除材搬送_Z軸_P4
LD>.L EM42159 DM10548    ; MSEP Axis-5 現在位置（下位8bit）
OR>.L DM10548 EM43159    ; MSEP Axis-5 現在位置（下位8bit）
ANL
ANB @MR2701              ; 動作中
ANP MR5413               ; MOVE SW
ANL
SET MR19005              ; RB4:Z軸  MOVE
MRD
LD MR14404               ; NR_除材搬送_Z軸_P5
OR MR13304               ; CR_除材搬送_Z軸_P5
LD>.L EM42162 DM10548    ; MSEP Axis-5 現在位置（下位8bit）
OR>.L DM10548 EM43162    ; MSEP Axis-5 現在位置（下位8bit）
ANL
ANB @MR2701              ; 動作中
ANP MR5413               ; MOVE SW
ANL
SET MR19005              ; RB4:Z軸  MOVE
MRD
LD MR14405               ; NR_除材搬送_Z軸_P6
OR MR13305               ; CR_除材搬送_Z軸_P6
LD>.L EM42165 DM10548    ; MSEP Axis-5 現在位置（下位8bit）
OR>.L DM10548 EM43165    ; MSEP Axis-5 現在位置（下位8bit）
ANL
ANB @MR2701              ; 動作中
ANP MR5413               ; MOVE SW
ANL
SET MR19005              ; RB4:Z軸  MOVE
MRD
LD MR14406               ; NR_除材搬送_Z軸_P7
OR MR13306               ; CR_除材搬送_Z軸_P7
LD>.L EM42168 DM10548    ; MSEP Axis-5 現在位置（下位8bit）
OR>.L DM10548 EM43168    ; MSEP Axis-5 現在位置（下位8bit）
ANL
ANB @MR2701              ; 動作中
ANP MR5413               ; MOVE SW
ANL
SET MR19005              ; RB4:Z軸  MOVE
MRD
LD MR14407               ; NR_除材搬送_Z軸_P8
OR MR13307               ; CR_除材搬送_Z軸_P8
LD>.L EM42171 DM10548    ; MSEP Axis-5 現在位置（下位8bit）
OR>.L DM10548 EM43171    ; MSEP Axis-5 現在位置（下位8bit）
ANL
ANB @MR2701              ; 動作中
ANP MR5413               ; MOVE SW
ANL
SET MR19005              ; RB4:Z軸  MOVE
MPP
LD MR14409               ; NR_除材搬送_Z軸_P10
OR MR13309               ; CR_除材搬送_Z軸_P10
LD>.L EM42177 DM10548    ; MSEP Axis-5 現在位置（下位8bit）
OR>.L DM10548 EM43177    ; MSEP Axis-5 現在位置（下位8bit）
ANL
ANB @MR2701              ; 動作中
ANP MR5413               ; MOVE SW
ANL
SET MR19005              ; RB4:Z軸  MOVE
;RB4 (除材Z軸) MSEP-Axis5 ｱﾗｰﾑﾘｾｯﾄ
STG MR19100              ; ｱﾗｰﾑﾘｾｯﾄ要求
SET MR19101              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
JMP MR19102
STG MR19102
SET MR19009              ; RB4:ARMRST
CON
JMP MR19103
STG MR19103
AND MR19000              ; RB4:動作完了
RES MR19101              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
RES MR19000              ; RB4:動作完了
CON
ENDS
LDP MR19009              ; RB4:ARMRST
ANB @MR3711              ; ｱﾗｰﾑﾘｾｯﾄ中
RES MR19009              ; RB4:ARMRST
CON
SET @MR3711              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
SET @MR3710              ; ｱﾗｰﾑﾘｾｯﾄ開始
STG @MR3710              ; ｱﾗｰﾑﾘｾｯﾄ開始
BSET DM10755 #3          ; MSEP Axis-5 制御信号
CON
MPS
BANB DM10555 #3          ; MSEP Axis-5 状態信号
BRES DM10755 #3          ; MSEP Axis-5 制御信号
CON
JMP @MR3713
MPP
BAND DM10555 #3          ; MSEP Axis-5 状態信号
TMH #990 #50             ; MSEP_Axis5_ｳｪｲﾄﾀｲﾏ
CON
AND T990                 ; MSEP_Axis5_ｳｪｲﾄﾀｲﾏ
JMP @MR3712
STG @MR3712
BRES DM10755 #3          ; MSEP Axis-5 制御信号
CON
ZRES MR19100 MR19103     ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
RES MR19009              ; RB4:ARMRST
CON
RES @MR3711              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
SET @R1007               ; MSEP_Axis4 ｱﾗｰﾑ発生
CON
ENDS
STG @MR3713
MPS
BLDB DM10555 #3          ; MSEP Axis-5 状態信号
BAND DM10555 #4          ; MSEP Axis-5 状態信号
BAND DM10555 #14         ; MSEP Axis-5 状態信号
ANL
JMP @MR3714
MPP
BLD DM10555 #3           ; MSEP Axis-5 状態信号
BORB DM10555 #4          ; MSEP Axis-5 状態信号
BORB DM10555 #14         ; MSEP Axis-5 状態信号
ANL
TMR #991 #100            ; MSEP_Axis5_ｳｪｲﾄﾀｲﾏ
CON
AND T991                 ; MSEP_Axis5_ｳｪｲﾄﾀｲﾏ
JMP @MR3715
STG @MR3714
RES MR19009              ; RB4:ARMRST
CON
RES @MR3711              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
SET MR19000              ; RB4:動作完了
CON
ENDS
STG @MR3715
ZRES MR19100 MR19103     ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
RES MR19009              ; RB4:ARMRST
CON
RES @MR3711              ; ｱﾗｰﾑﾘｾｯﾄ中
CON
SET @R1008               ; MSEP_Axis4 ｱﾗｰﾑ発生
CON
ENDS
LD @R1007                ; MSEP_Axis4 ｱﾗｰﾑ発生
OR @R1008                ; MSEP_Axis4 ｱﾗｰﾑ発生
ANB R39004               ; ｴﾗｰ中
SET @MR012               ; RB4ｱﾗｰﾑON
CON
SET R39004               ; ｴﾗｰ中
CON
DW #83 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100                ; MSEP_ｱﾗｰﾑ発生
CON
SET @R1014
STG @R1014
ZRES @R1007 @R1008       ; MSEP_Axis4 ｱﾗｰﾑ発生  MSEP_Axis4 ｱﾗｰﾑ発生
CON
AND @R101
RES @R101
CON
DW #0 DM60009
CON
AND @R105                ; SW1
SET MR19100              ; ｱﾗｰﾑﾘｾｯﾄ要求
CON
JMP @R1015
STG @R1015
TMR #1971 #10
CON
AND T1971
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
RES @R100                ; MSEP_ｱﾗｰﾑ発生
CON
RES @MR012               ; RB4ｱﾗｰﾑON
CON
RES R39004               ; ｴﾗｰ中
CON
ENDS
;MyTask Error Process Substance/ｴﾗｰ処理実体
STG @R100                ; MSEP_ｱﾗｰﾑ発生
ANB R39002               ; ERROR_DISP Busy
MPS
ZRES @R105 @R108         ; SW1
CON
LDA @DM9
CON
TBCD
CON
STA @DM10
CON
DISN @DM10 @DM3 #4
MRD
AND CR2002               ; 常時ON
MPS
LD @MR007                ; RB5ｱﾗｰﾑON
OR @MR011                ; RB3ｱﾗｰﾑON
OR @MR012                ; RB4ｱﾗｰﾑON
ANL
DW #3 @DM0
CON
BMOV @DM0 DM60000 #7     ; TaskNo /ERROR_DISP
MPP
LD @MR009                ; RB1ｱﾗｰﾑON
OR @MR010                ; RB2ｱﾗｰﾑON
ANL
DW #5 @DM0
CON
BMOV @DM0 DM60000 #7     ; TaskNo /ERROR_DISP
MPP
SET R39000               ; ERROR_DISP Start
CON
SET @R102
CON
JMP @R103
STG @R103
AND R39002               ; ERROR_DISP Busy
AND= DM60008 @DM1        ; ReturnNo /ERROR_DISP
AND= DM60007 @DM6        ; ReturnSW /ERROR_DISP
SET @R105                ; SW1
CON
JMP @R104
STG @R104
ANB R39002               ; ERROR_DISP Busy
RES @R102
CON
SET @R101
CON
ENDS
;
END
ENDH
