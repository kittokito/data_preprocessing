DEVICE:53
;MODULE:Panel
;MODULE_TYPE:0
;SCRIPT_TYPE:
LD CR2002                ; 常時ON
FLIK #50 #50 MR9015      ; 0.5秒ﾌﾘｯｶ
;ﾀｯﾁﾊﾟﾈﾙ表示
LD R54206                ; _割り込みSW押下無効
OR MR20210               ; ﾄﾚｲ交換無し選択ﾌﾗｸﾞ
OR MR20212               ; ﾄﾚｲ給材無し
OUT MR20214              ; 割り込みSW押下無効補助
LD MR20210               ; ﾄﾚｲ交換無し選択ﾌﾗｸﾞ
OR MR20212               ; ﾄﾚｲ給材無し
OUT MR20213              ; ﾊﾟﾈﾙ表示
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ORB MR913
MC
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB R4108                ; 上段ﾄﾗﾝｽﾌｧ ﾄﾚｲ有無-1
ANB R4109                ; 上段ﾄﾗﾝｽﾌｧ ﾄﾚｲ有無-2
ANB R4110                ; 上段ﾄﾗﾝｽﾌｧ ﾄﾚｲ有無-3
ANB R4111                ; 上段ﾄﾗﾝｽﾌｧ ﾄﾚｲ有無-4
ANB R4112                ; 上段ﾄﾗﾝｽﾌｧ ﾄﾚｲ有無-5
ANB R4113                ; 上段ﾄﾗﾝｽﾌｧ ﾄﾚｲ有無-6
AND MR9015               ; 0.5秒ﾌﾘｯｶ
OUT MR9000
LD R4113                 ; 上段ﾄﾗﾝｽﾌｧ ﾄﾚｲ有無-6
OUT MR9001               ; 上段ﾄﾚｲ ﾄﾚｲ有無表示-1
LD R4112                 ; 上段ﾄﾗﾝｽﾌｧ ﾄﾚｲ有無-5
OUT MR9002               ; 上段ﾄﾚｲ ﾄﾚｲ有無表示-2
LD R4111                 ; 上段ﾄﾗﾝｽﾌｧ ﾄﾚｲ有無-4
OUT MR9003               ; 上段ﾄﾚｲ ﾄﾚｲ有無表示-3
LD R4110                 ; 上段ﾄﾗﾝｽﾌｧ ﾄﾚｲ有無-3
OUT MR9004               ; 上段ﾄﾚｲ ﾄﾚｲ有無表示-4
LD R4109                 ; 上段ﾄﾗﾝｽﾌｧ ﾄﾚｲ有無-2
OUT MR9005               ; 上段ﾄﾚｲ ﾄﾚｲ有無表示-5
LD R4108                 ; 上段ﾄﾗﾝｽﾌｧ ﾄﾚｲ有無-1
OUT MR9006               ; 上段ﾄﾚｲ ﾄﾚｲ有無表示-6
LDB R4114                ; 分離ﾂﾒ ﾄﾚｲ有無
OUT MR9007               ; ﾄﾚｲ分離部 ﾄﾚｲ有無
LD B2013                 ; ﾒｲﾝへﾜｰｸ取込み可
OUT MR9008               ; ﾜｰｸ受取り部 ﾄﾚｲ有無
LD R4413                 ; ｴﾚﾍﾞｰﾀ ﾄﾚｲ有無確認
AND<> #0 DM15000         ; ｴﾚﾍﾞｰﾀﾄﾚｲ枚数
OUT MR9009               ; ｴﾚﾍﾞｰﾀ部 ﾄﾚｲ有無
LD CR2003                ; 常時OFF
OUT MR9010
LD CR2003                ; 常時OFF
OUT MR9011
LD R500                  ; 除給材ｶﾊﾞｰ開
OUT MR9012               ; 除給材ｶﾊﾞｰ開
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
OR CR2002                ; 常時ON
AND R4508                ; 引出し 閉確認
AND MR7108               ; 引出し位置決め上下 上昇
OUB MR9013               ; 引出し 閉
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND R4510                ; 下段ﾄﾗﾝｽﾌｧ ﾄﾚｲ満杯 1個前
AND MR7108               ; 引出し位置決め上下 上昇
AND MR9015               ; 0.5秒ﾌﾘｯｶ
OUT MR9014               ; 下段ﾄﾗﾝｽﾌｧ ﾄﾚｲ満杯 1個前警告
LD CR2003                ; 常時OFF
OUT MR9100               ; ﾜｰｸ受け取り中表示
LD CR2003                ; 常時OFF
OUT MR9101               ; ﾄﾚｲ交換中表示
LD CR2003                ; 常時OFF
OUT MR9102
LD CR2003                ; 常時OFF
OUT MR9103
LD CR2003                ; 常時OFF
OUT MR9104
LD CR2003                ; 常時OFF
OUT MR9105
LD CR2003                ; 常時OFF
OUT MR9106
LD CR2003                ; 常時OFF
OUT MR9107
LD CR2003                ; 常時OFF
OUT MR9108
LD CR2003                ; 常時OFF
OUT MR9109
LD CR2003                ; 常時OFF
OUT MR9110
LD CR2003                ; 常時OFF
OUT MR9111
LD CR2003                ; 常時OFF
OUT MR9112
LD CR2003                ; 常時OFF
OUT MR9113
LD CR2003                ; 常時OFF
OUT MR9114
LD CR2003                ; 常時OFF
OUT MR9115
MCR
;'ﾄﾚｲ 無検出用
;DM29000.L = EM31000.L - 800
;DM29002.L = dm29000.L
;
LD CR2002                ; 常時ON
NCJ #1002
;'ﾄﾚｲ 無検出用
;
;DM29000.L = EM31000.L - 800
;
LD CR2002                ; 常時ON
LDA.L EM31000            ; ﾄﾚｲ1枚時 ﾄﾚｲ有無位置座標ﾊﾞｯﾌｧ
CON
SUB.L +800
CON
STA.L DM29000
;DM29002.L = dm29000.L
;
LD CR2002                ; 常時ON
MOV.L DM29000 DM29002
LABEL #1002
;
LDB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ZRES LR100 LR103         ; _割り込みSW1　ON/OFF状態  _割り込みSW4　ON/OFF状態
LD MR21910               ; 手 ｻｰﾎﾞ P1移動SW表示灯
OR MR21911               ; 手 ｻｰﾎﾞ P5移動SW表示灯
OR MR21912               ; 手 ｻｰﾎﾞ P6移動SW表示灯
OR MR21915               ; 手 RB ｻｰﾁ動作SW表示灯
OUT MR21715              ; 手動　動作中
;ｻｲｸﾙﾀｲﾑ計測
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND MR19910              ; ｻｲｸﾙﾀｲﾑ計測開始
AND CR2004               ; 10msｸﾛｯｸﾊﾟﾙｽ
@INC.D DM20050           ; ｻｲｸﾙﾀｲﾑ計測
LDF MR19910              ; ｻｲｸﾙﾀｲﾑ計測開始
LDA.D DM20050            ; ｻｲｸﾙﾀｲﾑ計測
CON
MUL.D #10
CON
STA.D DM5040             ; _装置ｻｲｸﾙﾀｲﾑ
LD MR24210               ; ｻｲｸﾙﾀｲﾑ計測ON
ANP MR24200              ; ｻｲｸﾙﾀｲﾑｶｳﾝﾄ開始
LDA.D DM5056             ; _処理計測時間8
CON
STA.D DM20100
CON
LDA.D DM5054             ; _処理計測時間7
CON
STA.D DM5056             ; _処理計測時間8
CON
LDA.D DM5052             ; _処理計測時間6
CON
STA.D DM5054             ; _処理計測時間7
CON
LDA.D DM5050             ; _処理計測時間5
CON
STA.D DM5052             ; _処理計測時間6
CON
LDA.D DM5048             ; _処理計測時間4
CON
STA.D DM5050             ; _処理計測時間5
CON
LDA.D DM5046             ; _処理計測時間3
CON
STA.D DM5048             ; _処理計測時間4
CON
LDA.D DM5044             ; _処理計測時間2
CON
STA.D DM5046             ; _処理計測時間3
CON
LDA.D DM5042             ; _処理計測時間1
CON
STA.D DM5044             ; _処理計測時間2
;dm5058.d = (dm5042.d + dm5044.d + dm5046.d + dm5048.d + dm5050.d + dm5052.d + dm5054.d + dm5056.d )/8
;
LD MR24210               ; ｻｲｸﾙﾀｲﾑ計測ON
ANP MR24200              ; ｻｲｸﾙﾀｲﾑｶｳﾝﾄ開始
NCJ #1000
;dm5058.d = (dm5042.d + dm5044.d + dm5046.d + dm5048.d + dm5050.d + dm5052.d + dm5054.d + dm5056.d )/8
;
LD CR2002                ; 常時ON
LDA.L DM5042             ; _処理計測時間1
CON
ADD.L DM5044             ; _処理計測時間2
CON
ADD.L DM5046             ; _処理計測時間3
CON
ADD.L DM5048             ; _処理計測時間4
CON
ADD.L DM5050             ; _処理計測時間5
CON
ADD.L DM5052             ; _処理計測時間6
CON
ADD.L DM5054             ; _処理計測時間7
CON
ADD.L DM5056             ; _処理計測時間8
CON
EXT.L
CON
DIV.L +8
CON
STA.D DM5058             ; _処理計測時間9
LABEL #1000
;
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND MR24200              ; ｻｲｸﾙﾀｲﾑｶｳﾝﾄ開始
@DW.D #0 DM20060
CON
AND CR2004               ; 10msｸﾛｯｸﾊﾟﾙｽ
RES MR24210              ; ｻｲｸﾙﾀｲﾑ計測ON
CON
@INC.D DM20060
LDF MR24200              ; ｻｲｸﾙﾀｲﾑｶｳﾝﾄ開始
SET MR24210              ; ｻｲｸﾙﾀｲﾑ計測ON
CON
LDA.D DM20060
CON
MUL.D #10
CON
STA.D DM5042             ; _処理計測時間1
LDP MR24202              ; ｻｲｸﾙﾀｲﾑﾘｾｯﾄ
DW.D #0 DM5042           ; _処理計測時間1
CON
DW.D #0 DM5044           ; _処理計測時間2
CON
DW.D #0 DM5046           ; _処理計測時間3
CON
DW.D #0 DM5048           ; _処理計測時間4
CON
DW.D #0 DM5050           ; _処理計測時間5
CON
DW.D #0 DM5052           ; _処理計測時間6
CON
DW.D #0 DM5054           ; _処理計測時間7
CON
DW.D #0 DM5056           ; _処理計測時間8
CON
DW.D #0 DM5058           ; _処理計測時間9
LDF R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
RES MR24210              ; ｻｲｸﾙﾀｲﾑ計測ON
LDB R7300                ; ﾄﾚｲ分離UT 分離上下L 下降
AND R7301                ; ﾄﾚｲ分離UT 分離上下L 上昇
ANB R7302                ; ﾄﾚｲ分離UT 分離中下L 下降
AND R7303                ; ﾄﾚｲ分離UT 分離中下L 上昇
ANB R7400                ; ﾄﾚｲ分離UT 分離上下R 下降
AND R7401                ; ﾄﾚｲ分離UT 分離上下R 上昇
ANB R7402                ; ﾄﾚｲ分離UT 分離中下R 下降
AND R7403                ; ﾄﾚｲ分離UT 分離中下R 上昇
OUT MR16810              ; 分離UT上昇位置有り
LDB R7300                ; ﾄﾚｲ分離UT 分離上下L 下降
AND R7301                ; ﾄﾚｲ分離UT 分離上下L 上昇
AND R7302                ; ﾄﾚｲ分離UT 分離中下L 下降
ANB R7303                ; ﾄﾚｲ分離UT 分離中下L 上昇
ANB R7400                ; ﾄﾚｲ分離UT 分離上下R 下降
AND R7401                ; ﾄﾚｲ分離UT 分離上下R 上昇
AND R7402                ; ﾄﾚｲ分離UT 分離中下R 下降
ANB R7403                ; ﾄﾚｲ分離UT 分離中下R 上昇
OUT MR16811              ; 分離UT中間位置有り
LD R7300                 ; ﾄﾚｲ分離UT 分離上下L 下降
ANB R7301                ; ﾄﾚｲ分離UT 分離上下L 上昇
AND R7302                ; ﾄﾚｲ分離UT 分離中下L 下降
ANB R7303                ; ﾄﾚｲ分離UT 分離中下L 上昇
AND R7400                ; ﾄﾚｲ分離UT 分離上下R 下降
ANB R7401                ; ﾄﾚｲ分離UT 分離上下R 上昇
AND R7402                ; ﾄﾚｲ分離UT 分離中下R 下降
ANB R7403                ; ﾄﾚｲ分離UT 分離中下R 上昇
OUT MR16812              ; 分離UT下降位置有り
END
ENDH
