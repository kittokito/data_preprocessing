DEVICE:53
;MODULE:Group1_Task2
;MODULE_TYPE:0
;SCRIPT_TYPE:
;OneSystem Main-Module
;
;-----------------------------------------
;ModuleName	:	Group1_Task2
;ModuleType	:	Main Module
;Line		:	μTFP CAV Plate Assembly Line
;Cell		:	<NR> 2Cell
;Function	:	ｲﾝﾃﾞｯｸｽへの給材
;-----------------------------------------
;<<Task LocalDevice>>
;/*項目			/*割付ｴﾘｱ				/*備考
;---------------------------------------------------------------------			
;Emergency		@MR000〜@MR015			Emergency処理時RESET禁止ｴﾘｱ
;Free			@MR100〜@MR915			ﾕｰｻﾞｰﾌﾘｰｴﾘｱ
;Home			@MR1000〜@MR1515		HOME動作時使用ｴﾘｱ
;Maintenance		@MR2000〜@MR2915		MAINTE動作時使用ｴﾘｱ
;Auto(Main1)		@MR3000〜@MR3915		AUTO(Main1)動作時使用ｴﾘｱ
;	(Main2)		@MR4000〜@MR4415		AUTO(Main2)動作時使用ｴﾘｱ
;Subroutine		@MR4500〜@MR5915		ｻﾌﾞﾙｰﾁﾝ共通動作使用ｴﾘｱ
;----------------------------------------------------------------------
;<h1/>Device_Init/ﾃﾞﾊﾞｲｽ初期化
;[内容]
;・非常停止、優先ｴﾗｰ発生時に初期化したいﾃﾞﾊﾞｲｽを指定して下さい
;※本Taskで使用するﾛｰｶﾙﾃﾞﾊﾞｲｽなど
;※STG〜JMPにて使用しているﾃﾞﾊﾞｲｽは必須
LDP R46104               ; _非常停止中　ﾓｰﾄﾞﾌﾗｸﾞ
RES MR24410              ; 自動動作中
CON
RES MR6601               ; ﾜｰｸ給材中 ｻｲｸﾙﾀｲﾑ計測用
CON
RES B061                 ; ｾﾙ1へ動作開始許可
CON
RES MR24908              ; 給材開始
CON
RES MR609                ; 給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ 原点復帰済 ﾗﾝﾌﾟ
CON
ZRES @MR100 @MR5915      ; Task2 ERROR
LD CR2002                ; 常時ON
LDA DM452                ; 装置基礎ﾃﾞｰﾀ30
CON
STA T1990
CON
STA T1992
CON
STA T1993
CON
STA T1994
;<h1/>Task_Monitor/ﾀｽｸﾓﾆﾀｰ
LD CR2002                ; 常時ON
FLIK #50 #50 @MR000      ; ﾌﾘｯｶ
LD CR2002                ; 常時ON
FLIK #30 #30 @MR004      ; ﾌﾘｯｶ_0.3
LD= DM60000 #2           ; TaskNo /ERROR_DISP
AND R46208               ; _Group1　ｴﾗｰ発生中
OUT @MR001               ; TASK2 ERROR
;ON STG Main1
;TYPE EM616.U,EM617.U,@MR000.U,@MR3000.U
;
;FOR EM616 = EM616 TO 160 STEP 16
;	IF @MR3000:EM616 <> 0 THEN
;		BREAK
;	END IF	
;NEXT
;	
;IF EM616 < 160 THEN
;	EM617 = (EM616 / 16) * 100 + DMX(@MR3000:EM616) + #3000
;END IF		
;		
;EM616 = EM616 + 16		
;IF EM616 > 160 THEN		
;	EM616 = 0		
;END IF
LDP @MR000               ; ﾌﾘｯｶ
NCJ #1000
;TYPE EM616.U,EM617.U,@MR000.U,@MR3000.U
;
;FOR EM616 = EM616 TO 160 STEP 16
;
LD CR2002                ; 常時ON
MOV EM616 EM616          ; Task2 Main1@MR  Task2 Main1@MR
LABEL #2000
LD> EM616 #160           ; Task2 Main1@MR
CJ #2001
;	IF @MR3000:EM616 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM616                ; Task2 Main1@MR
CON
EXT
CON
STA.L Z12
LD<> @MR3000:Z12 #0      ; AUTO Main1
NCJ #2002
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2003
;	END IF	
;
LABEL #2002
;NEXT
;
LD CR2002                ; 常時ON
LDA EM616                ; Task2 Main1@MR
CON
ADD #16
CON
STA EM616                ; Task2 Main1@MR
LDB CR2009               ; 演算結果が負
CJ #2000
LABEL #2003
LABEL #2001
;IF EM616 < 160 THEN
;
LD< EM616 #160           ; Task2 Main1@MR
NCJ #2004
;	EM617 = (EM616 / 16) * 100 + DMX(@MR3000:EM616) + #3000
;
LD CR2002                ; 常時ON
LDA EM616                ; Task2 Main1@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR3000:Z12          ; AUTO Main1
CON
DMX
CON
STA @VM0
CON
LDA EM616                ; Task2 Main1@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM1
CON
LDA @VM0
CON
EXT
CON
ADD.L @VM1
CON
ADD.L +3000
CON
STA EM617                ; Task2 Main1@MR
;END IF		
;
LABEL #2004
;EM616 = EM616 + 16		
;
LD CR2002                ; 常時ON
LDA EM616                ; Task2 Main1@MR
CON
EXT
CON
ADD.L +16
CON
STA EM616                ; Task2 Main1@MR
;IF EM616 > 160 THEN		
;
LD> EM616 #160           ; Task2 Main1@MR
NCJ #2005
;	EM616 = 0		
;
LD CR2002                ; 常時ON
MOV #0 EM616             ; Task2 Main1@MR
;END IF
LABEL #2005
LABEL #1000
;
;ON STG Main2
;TYPE EM618.U,EM619.U,@MR4000.U
;
;FOR EM618 = EM618 TO 80 STEP 16
;	IF @MR4000:EM618 <> 0 THEN
;		BREAK
;	END IF	
;NEXT	
;
;IF EM618 < 80 THEN
;	EM619 = (EM618 / 16) * 100 + DMX(@MR4000:EM618) + #4000
;END IF
;
;EM618 = EM618 + 16		
;
;IF EM618 > 80 THEN
;	EM618 = 0	
;END IF
LDP @MR000               ; ﾌﾘｯｶ
NCJ #1001
;TYPE EM618.U,EM619.U,@MR4000.U
;
;FOR EM618 = EM618 TO 80 STEP 16
;
LD CR2002                ; 常時ON
MOV EM618 EM618          ; Task2 Main2@MR  Task2 Main2@MR
LABEL #2006
LD> EM618 #80            ; Task2 Main2@MR
CJ #2007
;	IF @MR4000:EM618 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM618                ; Task2 Main2@MR
CON
EXT
CON
STA.L Z12
LD<> @MR4000:Z12 #0
NCJ #2008
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2009
;	END IF	
;
LABEL #2008
;NEXT	
;
LD CR2002                ; 常時ON
LDA EM618                ; Task2 Main2@MR
CON
ADD #16
CON
STA EM618                ; Task2 Main2@MR
LDB CR2009               ; 演算結果が負
CJ #2006
LABEL #2009
LABEL #2007
;IF EM618 < 80 THEN
;
LD< EM618 #80            ; Task2 Main2@MR
NCJ #2010
;	EM619 = (EM618 / 16) * 100 + DMX(@MR4000:EM618) + #4000
;
LD CR2002                ; 常時ON
LDA EM618                ; Task2 Main2@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR4000:Z12
CON
DMX
CON
STA @VM3
CON
LDA EM618                ; Task2 Main2@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM4
CON
LDA @VM3
CON
EXT
CON
ADD.L @VM4
CON
ADD.L +4000
CON
STA EM619                ; Task2 Main2@MR
;END IF
;
LABEL #2010
;EM618 = EM618 + 16		
;
LD CR2002                ; 常時ON
LDA EM618                ; Task2 Main2@MR
CON
EXT
CON
ADD.L +16
CON
STA EM618                ; Task2 Main2@MR
;IF EM618 > 80 THEN
;
LD> EM618 #80            ; Task2 Main2@MR
NCJ #2011
;	EM618 = 0	
;
LD CR2002                ; 常時ON
MOV #0 EM618             ; Task2 Main2@MR
;END IF
LABEL #2011
LABEL #1001
;
;ON STG SubRoutine
;TYPE EM620.U,EM621.U,@MR4500.U
;	
;FOR EM620 = EM620 TO 320 STEP 16
;	IF @MR4500:EM620 <> 0 THEN
;		BREAK
;	END IF	
;NEXT
;		
;IF EM620 < 320 THEN
;	EM621 = (EM620 / 16) * 100 + DMX(@MR4500:EM620) + #4500
;END IF
;		
;EM620 = EM620 + 16	
;
;IF EM620 > 320 THEN
;   EM620 = 0	
;END IF
LDP @MR000               ; ﾌﾘｯｶ
NCJ #1002
;TYPE EM620.U,EM621.U,@MR4500.U
;
;FOR EM620 = EM620 TO 320 STEP 16
;
LD CR2002                ; 常時ON
MOV EM620 EM620          ; Task2 Sub@MR  Task2 Sub@MR
LABEL #2012
LD> EM620 #320           ; Task2 Sub@MR
CJ #2013
;	IF @MR4500:EM620 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM620                ; Task2 Sub@MR
CON
EXT
CON
STA.L Z12
LD<> @MR4500:Z12 #0      ; 給材準備開始
NCJ #2014
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2015
;	END IF	
;
LABEL #2014
;NEXT
;
LD CR2002                ; 常時ON
LDA EM620                ; Task2 Sub@MR
CON
ADD #16
CON
STA EM620                ; Task2 Sub@MR
LDB CR2009               ; 演算結果が負
CJ #2012
LABEL #2015
LABEL #2013
;IF EM620 < 320 THEN
;
LD< EM620 #320           ; Task2 Sub@MR
NCJ #2016
;	EM621 = (EM620 / 16) * 100 + DMX(@MR4500:EM620) + #4500
;
LD CR2002                ; 常時ON
LDA EM620                ; Task2 Sub@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR4500:Z12          ; 給材準備開始
CON
DMX
CON
STA @VM6
CON
LDA EM620                ; Task2 Sub@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM7
CON
LDA @VM6
CON
EXT
CON
ADD.L @VM7
CON
ADD.L +4500
CON
STA EM621                ; Task2 Sub@MR
;END IF
;
LABEL #2016
;EM620 = EM620 + 16	
;
LD CR2002                ; 常時ON
LDA EM620                ; Task2 Sub@MR
CON
EXT
CON
ADD.L +16
CON
STA EM620                ; Task2 Sub@MR
;IF EM620 > 320 THEN
;
LD> EM620 #320           ; Task2 Sub@MR
NCJ #2017
;   EM620 = 0	
;
LD CR2002                ; 常時ON
MOV #0 EM620             ; Task2 Sub@MR
;END IF
LABEL #2017
LABEL #1002
;
;<h1/>Task_Init/ﾀｽｸ初期化
;[本STG内容]
;・本Task起動時に必要な初期化処理を記述して下さい
;・起動Taskの全Init処理終了後、Task_StartのSTGが起動します
STG LR802                ; _Grp1_Task2_Init.STG
ENDS
;<h1/>Task_Start/ﾀｽｸ開始
;[本STG内容]
;・Task起動後、以下運転ﾓｰﾄﾞに従い、各STGにJMPします
;【HOME】	→	LR5200
;【AUTO】	→	LR5400
;【MAINTE】	→	LR5600
;・本STGは追記、修正不要です
STG LR402                ; _Grp1_Task2_Start.STG
MPS
AND R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5202               ; _Grp1_Task2_HOME.STG
MRD
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
RES MR6601               ; ﾜｰｸ給材中 ｻｲｸﾙﾀｲﾑ計測用
CON
JMP LR5402               ; _Grp1_Task2_AUTO.STG
MPP
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5602               ; _Grp1_Task2_MAINTE.STG
;<h1/>Task_Finish/ﾀｽｸ終了
;[本STG内容]
;・各Taskの終了STGになります
;・運転ﾓｰﾄﾞに係わらず終了時は本STGを経由して終了して下さい
;・本STGは追記、修正不要です
STG LR602                ; _Grp1_Task2_Fin.STG
MPS
LDB R41202               ; TASK2  PAUSE 
ANB @MR001               ; TASK2 ERROR
ANL
RES MR22602              ; TASK0→TASK2 HOLD
CON
RES R41002               ; _Grp1_Task2_起動中ﾌﾗｸﾞ
CON
ENDS
MPP
AND R41202               ; TASK2  PAUSE 
SET @MR1900              ; Main1 HALT許可
;<h1/>HOME
;[本STG内容]
;・STG @MR1000の続きから各Taskの原点復帰動作を記述する
;・動作終了時は@MR1515にJMPする事
STG LR5202               ; _Grp1_Task2_HOME.STG
JMP @MR1000              ; HOME
STG @MR1000              ; HOME
ANB @MR001               ; TASK2 ERROR
MPS
ANB R41202               ; TASK2  PAUSE 
JMP @MR1100
MPP
AND R41202               ; TASK2  PAUSE 
SET @MR1900              ; Main1 HALT許可
;原点復帰は、除材搬送Y軸(RB9)が原点復帰完了 及び ﾎﾟｲﾝﾄ0 or 1 の状態である事が必要
STG @MR1100
ANB @MR1001              ; TASK2　原点復帰動作中
RES MR18002              ; RB5:原点復帰完了
CON
RES MR18000              ; RB5:動作完了
CON
RES MR609                ; 給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ 原点復帰済 ﾗﾝﾌﾟ
CON
LD<=.L DM11142 EM2210    ; RB9 現在位置1  RB9 P1 目標位置（下位bit）
OR CR2002                ; 常時ON
ANL
SET @MR1001              ; TASK2　原点復帰動作中
CON
JMP @MR1102
STG @MR1102
SET MR18009              ; RB5:ARMRST
CON
JMP @MR1103
STG @MR1103
MPS
AND MR18000              ; RB5:動作完了
RES MR18000              ; RB5:動作完了
CON
JMP @MR1108
MPP
ANB MR18000              ; RB5:動作完了
TMR @100 #50
CON
AND @T100
RES MR18000              ; RB5:動作完了
CON
JMP @MR1100
STG @MR1108
SET MR18004              ; RB5:HOME
CON
JMP @MR1109
STG @MR1109
MPS
AND MR18002              ; RB5:原点復帰完了
SET MR609                ; 給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ 原点復帰済 ﾗﾝﾌﾟ
CON
RES MR18002              ; RB5:原点復帰完了
CON
JMP @MR1200
MPP
ANB MR18002              ; RB5:原点復帰完了
TMR @101 #300
CON
AND @T101
RES MR18002              ; RB5:原点復帰完了
CON
JMP @MR1100
STG @MR1200
DW #1 DM11008            ; RB5 　反転軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @MR5900              ; RB5動作
CON
JMP @MR1201
STG @MR1201
AND @MR5901              ; RB5動作完了
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
RES @MR5901              ; RB5動作完了
CON
JMP @MR1515              ; HOME END
STG @MR1515              ; HOME END
ANB @MR001               ; TASK2 ERROR
RES @MR1001              ; TASK2　原点復帰動作中
CON
SET MR006                ; TASK2原点復帰完了
CON
JMP LR602                ; _Grp1_Task2_Fin.STG
;<h1/>AUTO/自動動作
STG LR5402               ; _Grp1_Task2_AUTO.STG
JMP @MR3000              ; AUTO Main1
;<h1/>Auto (Main1)
;[本STG内容]
;・各TaskのAUTO動作を記述して下さい
;・動作ﾓｰﾄﾞは「AUTOAC」に格納されています(1〜32)
;・@MR3000:AUTO_Main1開始、@MR3001:AUTO_Main1完了、@MR3002:AUTO_Main1動作中
STG @MR3000              ; AUTO Main1
ANB @MR001               ; TASK2 ERROR
MPS
LDB R41202               ; TASK2  PAUSE 
ANB MR24911              ; 1ST　動作完了
ANL
MPS
AND MR22502              ; TASK0→TASK2 START
SET MR24410              ; 自動動作中
CON
SET @MR3002              ; AUTO Main1 Busy
CON
RES MR22502              ; TASK0→TASK2 START
CON
JMP @MR3908
MPP
AND MR22602              ; TASK0→TASK2 HOLD
RES MR24410              ; 自動動作中
CON
RES @MR3002              ; AUTO Main1 Busy
CON
JMP @MR3909
MPP
AND R41202               ; TASK2  PAUSE 
SET @MR1900              ; Main1 HALT許可
STG @MR3909
TMR @0 #1
CON
AND @T0
RES MR22502              ; TASK0→TASK2 START
CON
RES MR22602              ; TASK0→TASK2 HOLD
CON
JMP @MR3915
STG @MR3908
TMR @1 #1
CON
AND @T1
RES MR22502              ; TASK0→TASK2 START
CON
JMP @MR3003
STG @MR3003
MPS
AND= DM35000 #0          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
LDB MR9101               ; INDEX_治具-1上ﾜｰｸ全て有り
ANB LR102                ; _割り込みSW3　ON/OFF状態
ANL
JMP @MR3004
MRD
LD MR9101                ; INDEX_治具-1上ﾜｰｸ全て有り
ANB LR102                ; _割り込みSW3　ON/OFF状態
ANL
JMP @MR3500
MPP
AND LR102                ; _割り込みSW3　ON/OFF状態
JMP @MR3900
MRD
AND= DM35000 #1          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
LDB MR9102               ; INDEX_治具-2上ﾜｰｸ全て有り
ANB LR102                ; _割り込みSW3　ON/OFF状態
ANL
JMP @MR3004
MRD
LD MR9102                ; INDEX_治具-2上ﾜｰｸ全て有り
ANB LR102                ; _割り込みSW3　ON/OFF状態
ANL
JMP @MR3500
MPP
AND LR102                ; _割り込みSW3　ON/OFF状態
JMP @MR3900
MRD
AND= DM35000 #2          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
LDB MR9103               ; INDEX_治具-3上ﾜｰｸ全て有り
ANB LR102                ; _割り込みSW3　ON/OFF状態
ANL
JMP @MR3004
MRD
LD MR9103                ; INDEX_治具-3上ﾜｰｸ全て有り
ANB LR102                ; _割り込みSW3　ON/OFF状態
ANL
JMP @MR3500
MPP
AND LR102                ; _割り込みSW3　ON/OFF状態
JMP @MR3900
MPP
AND= DM35000 #3          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
LDB MR9104               ; INDEX_治具-4上ﾜｰｸ全て有り
ANB LR102                ; _割り込みSW3　ON/OFF状態
ANL
JMP @MR3004
MRD
LD MR9104                ; INDEX_治具-4上ﾜｰｸ全て有り
ANB LR102                ; _割り込みSW3　ON/OFF状態
ANL
JMP @MR3500
MPP
AND LR102                ; _割り込みSW3　ON/OFF状態
JMP @MR3900
STG @MR3004
MPS
AND LR10011              ; 給材ﾜｰｸ有無画像 使用/未使用
JMP @MR3300              ; ﾜｰｸ無し確認
MPP
ANB LR10011              ; 給材ﾜｰｸ有無画像 使用/未使用
JMP @MR3307
STG @MR3300              ; ﾜｰｸ無し確認
RES @MR3315              ; ﾜｰｸ無し
CON
SET R18000               ; 画像　給材部ﾜｰｸ検査要求
CON
JMP @MR3301
STG @MR3301
AND R18001               ; 画像　給材部ﾜｰｸ検査完了
RES R18001               ; 画像　給材部ﾜｰｸ検査完了
CON
JMP @MR3302              ; ﾜｰｸ有無確認
LD @MR3302               ; ﾜｰｸ有無確認
AND R18201               ; ﾜｰｸ1　無し
AND R18203               ; ﾜｰｸ2　無し
AND R18205               ; ﾜｰｸ3　無し
AND R18207               ; ﾜｰｸ4　無し
AND R18209               ; ﾜｰｸ5　無し
AND R18211               ; ﾜｰｸ6　無し
AND R18213               ; ﾜｰｸ7　無し
AND R18215               ; ﾜｰｸ8　無し
AND R18301               ; ﾜｰｸ9　無し
AND R18303               ; ﾜｰｸ10　無し
SET @MR3315              ; ﾜｰｸ無し
STG @MR3302              ; ﾜｰｸ有無確認
MPS
AND= DM35000 #0          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
AND @MR3315              ; ﾜｰｸ無し
JMP @MR3307
MPP
ANB @MR3315              ; ﾜｰｸ無し
TMR #1255 #10
CON
AND T1255
DW #6004 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #32 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task2 ERROR
CON
JMP @MR3303
MRD
AND= DM35000 #1          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
AND @MR3315              ; ﾜｰｸ無し
JMP @MR3307
MPP
ANB @MR3315              ; ﾜｰｸ無し
TMR #1256 #10
CON
AND T1256
DW #6004 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #33 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task2 ERROR
CON
JMP @MR3303
MRD
AND= DM35000 #2          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
AND @MR3315              ; ﾜｰｸ無し
JMP @MR3307
MPP
ANB @MR3315              ; ﾜｰｸ無し
TMR #1257 #10
CON
AND T1257
DW #6004 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #34 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task2 ERROR
CON
JMP @MR3303
MPP
AND= DM35000 #3          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
AND @MR3315              ; ﾜｰｸ無し
JMP @MR3307
MPP
ANB @MR3315              ; ﾜｰｸ無し
TMR #1258 #10
CON
AND T1258
DW #6004 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #35 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task2 ERROR
CON
JMP @MR3303
STG @MR3303
DW #1024 DM29050
CON
RES @MR3315              ; ﾜｰｸ無し
CON
SET @MR1900              ; Main1 HALT許可
CON
AND @MR101               ; Task2 ERROR_End
RES @MR101               ; Task2 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
JMP @MR3304
STG @MR3304
MPS
AND @MR105               ; SW1
DW #0 DM29050
CON
JMP @MR3300              ; ﾜｰｸ無し確認
MPP
AND @MR108               ; SW4
DW #0 DM29050
CON
JMP @MR3307
STG @MR3307
SET MR6601               ; ﾜｰｸ給材中 ｻｲｸﾙﾀｲﾑ計測用
CON
SET @MR4500              ; 給材準備開始
CON
JMP @MR3308
STG @MR3308
AND @MR4501              ; 給材準備動作完了
DW #1 EM40000            ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
CON
DW #0 EM30000            ; 1stﾜｰｸ情報
CON
TMR @6 #1
CON
AND @T6
RES @MR4501              ; 給材準備動作完了
CON
JMP @MR3005
;上流よりﾜｰｸﾃﾞｰﾀが入らず、1度もﾜｰｸ給材動作しない状態が設定時間有れば、1STはﾜｰｸ無しのまま
;終了とする
STG @MR3005
MPS
LDB R41202               ; TASK2  PAUSE 
ANB @MR001               ; TASK2 ERROR
ANL
LDA EM40001
CON
STA W08E
CON
TMH @2 #5
CON
AND @T2
MPS
ANB DM2000.14            ; 上流ﾊﾝﾄﾞｼｪｲｸ 有効/無効
SET B061                 ; ｾﾙ1へ動作開始許可
CON
JMP @MR3107
MPP
AND DM2000.14            ; 上流ﾊﾝﾄﾞｼｪｲｸ 有効/無効
RES B061                 ; ｾﾙ1へ動作開始許可
CON
JMP @MR3107
MPP
AND R41202               ; TASK2  PAUSE 
SET @MR1900              ; Main1 HALT許可
STG @MR3107
MPS
ANB MR24908              ; 給材開始
JMP @MR3108
MPP
AND MR24908              ; 給材開始
JMP @MR3109
STG @MR3108
MPS
LDB R41202               ; TASK2  PAUSE 
OR B030                  ; ｾﾙ2へ動作開始通知
ANL
MPS
LD B030                  ; ｾﾙ2へ動作開始通知
LD DM2000.14             ; 上流ﾊﾝﾄﾞｼｪｲｸ 有効/無効
ANB R39004               ; ｴﾗｰ中
ANP R002                 ; ｽﾀｰﾄSW
ORL
ANB R46106               ; _定停止移行中
ANL
SET MR24908              ; 給材開始
CON
JMP @MR3007
MPP
LDB B030                 ; ｾﾙ2へ動作開始通知
AND R46106               ; _定停止移行中
ANL
JMP @MR3009
MPP
LD R41202                ; TASK2  PAUSE 
ANB B030                 ; ｾﾙ2へ動作開始通知
ANB @MR3007
ANL
SET @MR1900              ; Main1 HALT許可
;H/S ｷｬﾝｾﾙ処理
STG @MR3009
SET B062                 ; 給材要求ｷｬﾝｾﾙ
CON
LD B031                  ; ｷｬﾝｾﾙOK
ORB B04A                 ; ｾﾙ1 ｽﾃｰﾀｽAUTO
ANL
JMP @MR3010
STG @MR3010
RES B062                 ; 給材要求ｷｬﾝｾﾙ
CON
LDB B031                 ; ｷｬﾝｾﾙOK
ORB B04A                 ; ｾﾙ1 ｽﾃｰﾀｽAUTO
ANL
RES B061                 ; ｾﾙ1へ動作開始許可
CON
ANB B030                 ; ｾﾙ2へ動作開始通知
SET MR24907              ; 1STﾜｰｸ無し終了
CON
JMP @MR3500
;--
STG @MR3109
MPS
LDB R41202               ; TASK2  PAUSE 
LD B030                  ; ｾﾙ2へ動作開始通知
LD DM2000.14             ; 上流ﾊﾝﾄﾞｼｪｲｸ 有効/無効
ANB R39004               ; ｴﾗｰ中
ANP R002                 ; ｽﾀｰﾄSW
ORL
ANL
ANL
JMP @MR3007
MPP
LD R41202                ; TASK2  PAUSE 
ANB B030                 ; ｾﾙ2へ動作開始通知
ANB @MR3007
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3007
LD= DM5010 #1            ; _AUTO動作番号
OR= DM5010 #4            ; _AUTO動作番号
ANL
MPS
AND= EM40000 #1          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
DW #1 DM35100            ; ﾃｰﾌﾞﾙ　ﾜｰｸ要求番号
CON
JMP @MR3008
MRD
AND= EM40000 #2          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
DW #2 DM35100            ; ﾃｰﾌﾞﾙ　ﾜｰｸ要求番号
CON
JMP @MR3008
MRD
AND= EM40000 #3          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
DW #3 DM35100            ; ﾃｰﾌﾞﾙ　ﾜｰｸ要求番号
CON
JMP @MR3008
MRD
AND= EM40000 #4          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
DW #4 DM35100            ; ﾃｰﾌﾞﾙ　ﾜｰｸ要求番号
CON
JMP @MR3008
MRD
AND= EM40000 #5          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
DW #5 DM35100            ; ﾃｰﾌﾞﾙ　ﾜｰｸ要求番号
CON
JMP @MR3008
MRD
AND= EM40000 #6          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
DW #6 DM35100            ; ﾃｰﾌﾞﾙ　ﾜｰｸ要求番号
CON
JMP @MR3008
MRD
AND= EM40000 #7          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
DW #7 DM35100            ; ﾃｰﾌﾞﾙ　ﾜｰｸ要求番号
CON
JMP @MR3008
MRD
AND= EM40000 #8          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
DW #8 DM35100            ; ﾃｰﾌﾞﾙ　ﾜｰｸ要求番号
CON
JMP @MR3008
MRD
AND= EM40000 #9          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
DW #9 DM35100            ; ﾃｰﾌﾞﾙ　ﾜｰｸ要求番号
CON
JMP @MR3008
MPP
AND= EM40000 #10         ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
DW #10 DM35100           ; ﾃｰﾌﾞﾙ　ﾜｰｸ要求番号
CON
JMP @MR3008
STG @MR3008
SET MR114                ; from 給材P&P Data Shift Request
CON
MPS
ANB CR2002               ; 常時ON
SET @MR5507              ; ﾜｰｸ機種照合
CON
JMP @MR3013
MPP
AND CR2002               ; 常時ON
TMR @3 #1
CON
AND @T3
JMP @MR3100
STG @MR3013
AND @MR5508              ; ﾜｰｸ照合完了
MPS
LD @MR5515               ; 機種OK
ANB @MR5514              ; 機種間違い
ANL
RES @MR5508              ; ﾜｰｸ照合完了
CON
RES @MR5515              ; 機種OK
CON
JMP @MR3100
MPP
LD @MR5514               ; 機種間違い
ANB @MR5515              ; 機種OK
ANL
RES @MR5508              ; ﾜｰｸ照合完了
CON
RES @MR5515              ; 機種OK
CON
JMP @MR3011
;機種間違いは、給材停止とする
STG @MR3011
ZRES @MR5600 @MR5602     ; 画像検査要求  受け取り（吸着）ﾐｽ
CON
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #8004 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #37 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task2 ERROR
CON
JMP @MR3012
STG @MR3012
SET @MR1900              ; Main1 HALT許可
CON
AND @MR101               ; Task2 ERROR_End
RES @MR101               ; Task2 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
JMP @MR3015
STG @MR3015
MPS
AND @MR105               ; SW1
SET @MR3014              ; 除材要求後定停止
CON
JMP @MR3100
MPP
AND @MR108               ; SW4
JMP @MR3100
;受け取りﾊﾝﾄﾞｼｪｰｸ
STG @MR3100
MPS
ANB DM2000.14            ; 上流ﾊﾝﾄﾞｼｪｲｸ 有効/無効
RES B061                 ; ｾﾙ1へ動作開始許可
CON
JMP @MR3101
MPP
AND DM2000.14            ; 上流ﾊﾝﾄﾞｼｪｲｸ 有効/無効
JMP @MR3102
STG @MR3101
MPS
AND B03A                 ; ｾﾙ2へ補助動作要求
JMP @MR3102
MPP
LDB B03A                 ; ｾﾙ2へ補助動作要求
ANB B04A                 ; ｾﾙ1 ｽﾃｰﾀｽAUTO
ANL
MPS
AND= EM40000 #1          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
RES MR24908              ; 給材開始
CON
JMP @MR3005
MPP
AND> EM40000 #1          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
JMP @MR3005
STG @MR3102
RES MR114                ; from 給材P&P Data Shift Request
CON
RES B06C                 ; ｾﾙ1へ補助動作失敗
CON
SET B06B                 ; ｾﾙ1へ補助動作完了
CON
JMP @MR3103
STG @MR3103
ANB B03A                 ; ｾﾙ2へ補助動作要求
RES B06B                 ; ｾﾙ1へ補助動作完了
CON
JMP @MR3104
STG @MR3104
ANB B030                 ; ｾﾙ2へ動作開始通知
MPS
AND LR10011              ; 給材ﾜｰｸ有無画像 使用/未使用
RES @MR3200              ; 画像より　ﾜｰｸ状態OK
CON
SET R18000               ; 画像　給材部ﾜｰｸ検査要求
CON
JMP @MR3105
MPP
ANB LR10011              ; 給材ﾜｰｸ有無画像 使用/未使用
JMP @MR3400
STG @MR3105
AND R18001               ; 画像　給材部ﾜｰｸ検査完了
RES R18001               ; 画像　給材部ﾜｰｸ検査完了
CON
JMP @MR3106              ; ﾜｰｸ確認
LD @MR3106               ; ﾜｰｸ確認
MPS
AND= EM40000 #1          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
DW #1 DM29050
CON
AND R18200               ; ﾜｰｸ1　有り
SET @MR3200              ; 画像より　ﾜｰｸ状態OK
MRD
AND= EM40000 #2          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
DW #2 DM29050
CON
AND R18202               ; ﾜｰｸ2　有り
SET @MR3200              ; 画像より　ﾜｰｸ状態OK
MRD
AND= EM40000 #3          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
DW #4 DM29050
CON
AND R18204               ; ﾜｰｸ3　有り
SET @MR3200              ; 画像より　ﾜｰｸ状態OK
MRD
AND= EM40000 #4          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
DW #8 DM29050
CON
AND R18206               ; ﾜｰｸ4　有り
SET @MR3200              ; 画像より　ﾜｰｸ状態OK
MRD
AND= EM40000 #5          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
DW #16 DM29050
CON
AND R18208               ; ﾜｰｸ5　有り
SET @MR3200              ; 画像より　ﾜｰｸ状態OK
MRD
AND= EM40000 #6          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
DW #32 DM29050
CON
AND R18210               ; ﾜｰｸ6　有り
SET @MR3200              ; 画像より　ﾜｰｸ状態OK
MRD
AND= EM40000 #7          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
DW #64 DM29050
CON
AND R18212               ; ﾜｰｸ7　有り
SET @MR3200              ; 画像より　ﾜｰｸ状態OK
MRD
AND= EM40000 #8          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
DW #128 DM29050
CON
AND R18214               ; ﾜｰｸ8　有り
SET @MR3200              ; 画像より　ﾜｰｸ状態OK
MRD
AND= EM40000 #9          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
DW #256 DM29050
CON
AND R18300               ; ﾜｰｸ9　有り
SET @MR3200              ; 画像より　ﾜｰｸ状態OK
MPP
AND= EM40000 #10         ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
DW #512 DM29050
CON
AND R18302               ; ﾜｰｸ10　有り
SET @MR3200              ; 画像より　ﾜｰｸ状態OK
STG @MR3106              ; ﾜｰｸ確認
MPS
AND @MR3200              ; 画像より　ﾜｰｸ状態OK
JMP @MR3110
MPP
ANB @MR3200              ; 画像より　ﾜｰｸ状態OK
TMR #1250 #10
CON
AND T1250
JMP @MR4000
STG @MR3110
DW #0 DM29050
CON
RES @MR3200              ; 画像より　ﾜｰｸ状態OK
CON
JMP @MR3400
;画像よりﾜｰｸ状態NG判定ならば、ﾘﾄﾗｲか除材再投入を選択
STG @MR4000
RES @MR3114              ; 画像より　ﾜｰｸ除材OK
CON
RES @MR3200              ; 画像より　ﾜｰｸ状態OK
CON
ZRES MR12100 MR12515     ; 給材部ﾜｰｸ1 吸着確認開始
CON
JMP @MR4001
STG @MR4001
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1064 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #36 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task2 ERROR
CON
JMP @MR4002
STG @MR4002
SET @MR1900              ; Main1 HALT許可
CON
AND @MR101               ; Task2 ERROR_End
RES @MR101               ; Task2 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
JMP @MR4003
STG @MR4003
MPS
AND @MR105               ; SW1
DW #0 DM29050
CON
JMP @MR3104
MRD
AND @MR107               ; SW3
DW #0 DM29050
CON
JMP @MR3111
MPP
AND @MR108               ; SW4
DW #0 DM29050
CON
JMP @MR3110
STG @MR3111
MPS
AND LR10011              ; 給材ﾜｰｸ有無画像 使用/未使用
RES @MR3200              ; 画像より　ﾜｰｸ状態OK
CON
SET R18000               ; 画像　給材部ﾜｰｸ検査要求
CON
JMP @MR3112
MPP
ANB LR10011              ; 給材ﾜｰｸ有無画像 使用/未使用
JMP @MR3005
STG @MR3112
AND R18001               ; 画像　給材部ﾜｰｸ検査完了
RES R18001               ; 画像　給材部ﾜｰｸ検査完了
CON
JMP @MR3113              ; ﾜｰｸ除材確認
LD @MR3113               ; ﾜｰｸ除材確認
MPS
AND= EM40000 #1          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
DW #1 DM29050
CON
AND R18201               ; ﾜｰｸ1　無し
SET @MR3114              ; 画像より　ﾜｰｸ除材OK
MRD
AND= EM40000 #2          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
DW #2 DM29050
CON
AND R18203               ; ﾜｰｸ2　無し
SET @MR3114              ; 画像より　ﾜｰｸ除材OK
MRD
AND= EM40000 #3          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
DW #4 DM29050
CON
AND R18205               ; ﾜｰｸ3　無し
SET @MR3114              ; 画像より　ﾜｰｸ除材OK
MRD
AND= EM40000 #4          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
DW #8 DM29050
CON
AND R18207               ; ﾜｰｸ4　無し
SET @MR3114              ; 画像より　ﾜｰｸ除材OK
MRD
AND= EM40000 #5          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
DW #16 DM29050
CON
AND R18209               ; ﾜｰｸ5　無し
SET @MR3114              ; 画像より　ﾜｰｸ除材OK
MRD
AND= EM40000 #6          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
DW #32 DM29050
CON
AND R18211               ; ﾜｰｸ6　無し
SET @MR3114              ; 画像より　ﾜｰｸ除材OK
MRD
AND= EM40000 #7          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
DW #64 DM29050
CON
AND R18213               ; ﾜｰｸ7　無し
SET @MR3114              ; 画像より　ﾜｰｸ除材OK
MRD
AND= EM40000 #8          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
DW #128 DM29050
CON
AND R18215               ; ﾜｰｸ8　無し
SET @MR3114              ; 画像より　ﾜｰｸ除材OK
MRD
AND= EM40000 #9          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
DW #256 DM29050
CON
AND R18301               ; ﾜｰｸ9　無し
SET @MR3114              ; 画像より　ﾜｰｸ除材OK
MPP
AND= EM40000 #10         ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
DW #512 DM29050
CON
AND R18303               ; ﾜｰｸ10　無し
SET @MR3114              ; 画像より　ﾜｰｸ除材OK
STG @MR3113              ; ﾜｰｸ除材確認
MPS
AND @MR3114              ; 画像より　ﾜｰｸ除材OK
DW #0 DM29050
CON
JMP @MR3115
MPP
ANB @MR3114              ; 画像より　ﾜｰｸ除材OK
TMR #1251 #10
CON
AND T1251
JMP @MR4007
STG @MR4007
RES @MR3114              ; 画像より　ﾜｰｸ除材OK
CON
RES @MR3200              ; 画像より　ﾜｰｸ状態OK
CON
ZRES MR12100 MR12515     ; 給材部ﾜｰｸ1 吸着確認開始
CON
JMP @MR4008
STG @MR4008
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1060 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #36 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task2 ERROR
CON
JMP @MR4002
STG @MR3115
RES @MR3114              ; 画像より　ﾜｰｸ除材OK
CON
RES @MR3200              ; 画像より　ﾜｰｸ状態OK
CON
JMP @MR3005
;吸着OK 次のﾜｰｸ給材か給材終了かの判定
STG @MR3400
@INC.D DM5020            ; _生産ｶｳﾝﾀ1
CON
MPS
AND>= EM40000 #10        ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
MPS
AND= DM35000 #0          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
DW #10 EM30000           ; 1stﾜｰｸ情報
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12010              ; INDEX_治具1 ﾜｰｸ有無-10
CON
JMP @MR3500
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30465          ; WORK DATA
CON
DW #10 EM30000           ; 1stﾜｰｸ情報
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12010              ; INDEX_治具1 ﾜｰｸ有無-10
CON
JMP @MR3500
MRD
AND= DM35000 #1          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
DW #10 EM30000           ; 1stﾜｰｸ情報
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12110              ; INDEX_治具2 ﾜｰｸ有無-10
CON
JMP @MR3500
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30465          ; WORK DATA
CON
DW #10 EM30000           ; 1stﾜｰｸ情報
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12110              ; INDEX_治具2 ﾜｰｸ有無-10
CON
JMP @MR3500
MRD
AND= DM35000 #2          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
DW #10 EM30000           ; 1stﾜｰｸ情報
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12210              ; INDEX_治具3 ﾜｰｸ有無-10
CON
JMP @MR3500
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30465          ; WORK DATA
CON
DW #10 EM30000           ; 1stﾜｰｸ情報
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12210              ; INDEX_治具3 ﾜｰｸ有無-10
CON
JMP @MR3500
MPP
AND= DM35000 #3          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
DW #10 EM30000           ; 1stﾜｰｸ情報
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12310              ; INDEX_治具4 ﾜｰｸ有無-10
CON
JMP @MR3500
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30465          ; WORK DATA
CON
DW #10 EM30000           ; 1stﾜｰｸ情報
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12310              ; INDEX_治具4 ﾜｰｸ有無-10
CON
JMP @MR3500
MPP
AND< EM40000 #10         ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
MPS
AND= EM40000 #1          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
MPS
AND= DM35000 #0          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12001              ; INDEX_治具1 ﾜｰｸ有無-1
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30015          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12001              ; INDEX_治具1 ﾜｰｸ有無-1
CON
JMP @MR3404
MRD
AND= DM35000 #1          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12101              ; INDEX_治具2 ﾜｰｸ有無-1
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30015          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12101              ; INDEX_治具2 ﾜｰｸ有無-1
CON
JMP @MR3404
MRD
AND= DM35000 #2          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12201              ; INDEX_治具3 ﾜｰｸ有無-1
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30015          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12201              ; INDEX_治具3 ﾜｰｸ有無-1
CON
JMP @MR3404
MPP
AND= DM35000 #3          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12301              ; INDEX_治具4 ﾜｰｸ有無-1
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30015          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12301              ; INDEX_治具4 ﾜｰｸ有無-1
CON
JMP @MR3404
MRD
AND= EM40000 #2          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
MPS
AND= DM35000 #0          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12002              ; INDEX_治具1 ﾜｰｸ有無-2
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30065          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12002              ; INDEX_治具1 ﾜｰｸ有無-2
CON
JMP @MR3404
MRD
AND= DM35000 #1          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12102              ; INDEX_治具2 ﾜｰｸ有無-2
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30065          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12102              ; INDEX_治具2 ﾜｰｸ有無-2
CON
JMP @MR3404
MRD
AND= DM35000 #2          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12202              ; INDEX_治具3 ﾜｰｸ有無-2
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30065          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12202              ; INDEX_治具3 ﾜｰｸ有無-2
CON
JMP @MR3404
MPP
AND= DM35000 #3          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12302              ; INDEX_治具4 ﾜｰｸ有無-2
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30065          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12302              ; INDEX_治具4 ﾜｰｸ有無-2
CON
JMP @MR3404
MRD
AND= EM40000 #3          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
MPS
AND= DM35000 #0          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12003              ; INDEX_治具1 ﾜｰｸ有無-3
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30115          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12003              ; INDEX_治具1 ﾜｰｸ有無-3
CON
JMP @MR3404
MRD
AND= DM35000 #1          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12103              ; INDEX_治具2 ﾜｰｸ有無-3
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30115          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12103              ; INDEX_治具2 ﾜｰｸ有無-3
CON
JMP @MR3404
MRD
AND= DM35000 #2          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12203              ; INDEX_治具3 ﾜｰｸ有無-3
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30115          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12203              ; INDEX_治具3 ﾜｰｸ有無-3
CON
JMP @MR3404
MPP
AND= DM35000 #3          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12303              ; INDEX_治具4 ﾜｰｸ有無-3
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30115          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12303              ; INDEX_治具4 ﾜｰｸ有無-3
CON
JMP @MR3404
MRD
AND= EM40000 #4          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
MPS
AND= DM35000 #0          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12004              ; INDEX_治具1 ﾜｰｸ有無-4
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30165          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12004              ; INDEX_治具1 ﾜｰｸ有無-4
CON
JMP @MR3404
MRD
AND= DM35000 #1          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12104              ; INDEX_治具2 ﾜｰｸ有無-4
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30165          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12104              ; INDEX_治具2 ﾜｰｸ有無-4
CON
JMP @MR3404
MRD
AND= DM35000 #2          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12204              ; INDEX_治具3 ﾜｰｸ有無-4
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30165          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12204              ; INDEX_治具3 ﾜｰｸ有無-4
CON
JMP @MR3404
MPP
AND= DM35000 #3          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12304              ; INDEX_治具4 ﾜｰｸ有無-4
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30165          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12304              ; INDEX_治具4 ﾜｰｸ有無-4
CON
JMP @MR3404
MRD
AND= EM40000 #5          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
MPS
AND= DM35000 #0          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12005              ; INDEX_治具1 ﾜｰｸ有無-5
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30215          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12005              ; INDEX_治具1 ﾜｰｸ有無-5
CON
JMP @MR3404
MRD
AND= DM35000 #1          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12105              ; INDEX_治具2 ﾜｰｸ有無-5
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30215          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12105              ; INDEX_治具2 ﾜｰｸ有無-5
CON
JMP @MR3404
MRD
AND= DM35000 #2          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12205              ; INDEX_治具3 ﾜｰｸ有無-5
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30215          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12205              ; INDEX_治具3 ﾜｰｸ有無-5
CON
JMP @MR3404
MPP
AND= DM35000 #3          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12305              ; INDEX_治具4 ﾜｰｸ有無-5
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30215          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12305              ; INDEX_治具4 ﾜｰｸ有無-5
CON
JMP @MR3404
MRD
AND= EM40000 #6          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
MPS
AND= DM35000 #0          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12006              ; INDEX_治具1 ﾜｰｸ有無-6
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30265          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12006              ; INDEX_治具1 ﾜｰｸ有無-6
CON
JMP @MR3404
MRD
AND= DM35000 #1          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12106              ; INDEX_治具2 ﾜｰｸ有無-6
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30265          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12106              ; INDEX_治具2 ﾜｰｸ有無-6
CON
JMP @MR3404
MRD
AND= DM35000 #2          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12206              ; INDEX_治具3 ﾜｰｸ有無-6
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30265          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12206              ; INDEX_治具3 ﾜｰｸ有無-6
CON
JMP @MR3404
MPP
AND= DM35000 #3          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12306              ; INDEX_治具4 ﾜｰｸ有無-6
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30265          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12306              ; INDEX_治具4 ﾜｰｸ有無-6
CON
JMP @MR3404
MRD
AND= EM40000 #7          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
MPS
AND= DM35000 #0          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12007              ; INDEX_治具1 ﾜｰｸ有無-7
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30315          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12007              ; INDEX_治具1 ﾜｰｸ有無-7
CON
JMP @MR3404
MRD
AND= DM35000 #1          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12107              ; INDEX_治具2 ﾜｰｸ有無-7
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30315          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12107              ; INDEX_治具2 ﾜｰｸ有無-7
CON
JMP @MR3404
MRD
AND= DM35000 #2          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12207              ; INDEX_治具3 ﾜｰｸ有無-7
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30315          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12207              ; INDEX_治具3 ﾜｰｸ有無-7
CON
JMP @MR3404
MPP
AND= DM35000 #3          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12307              ; INDEX_治具4 ﾜｰｸ有無-7
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30315          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12307              ; INDEX_治具4 ﾜｰｸ有無-7
CON
JMP @MR3404
MRD
AND= EM40000 #8          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
MPS
AND= DM35000 #0          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12008              ; INDEX_治具1 ﾜｰｸ有無-8
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30365          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12008              ; INDEX_治具1 ﾜｰｸ有無-8
CON
JMP @MR3404
MRD
AND= DM35000 #1          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12108              ; INDEX_治具2 ﾜｰｸ有無-8
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30365          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12108              ; INDEX_治具2 ﾜｰｸ有無-8
CON
JMP @MR3404
MRD
AND= DM35000 #2          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12208              ; INDEX_治具3 ﾜｰｸ有無-8
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30365          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12208              ; INDEX_治具3 ﾜｰｸ有無-8
CON
JMP @MR3404
MPP
AND= DM35000 #3          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12308              ; INDEX_治具4 ﾜｰｸ有無-8
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30365          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12308              ; INDEX_治具4 ﾜｰｸ有無-8
CON
JMP @MR3404
MPP
AND= EM40000 #9          ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
MPS
AND= DM35000 #0          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12009              ; INDEX_治具1 ﾜｰｸ有無-9
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30415          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12009              ; INDEX_治具1 ﾜｰｸ有無-9
CON
JMP @MR3404
MRD
AND= DM35000 #1          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12109              ; INDEX_治具2 ﾜｰｸ有無-9
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30415          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12109              ; INDEX_治具2 ﾜｰｸ有無-9
CON
JMP @MR3404
MRD
AND= DM35000 #2          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12209              ; INDEX_治具3 ﾜｰｸ有無-9
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30415          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12209              ; INDEX_治具3 ﾜｰｸ有無-9
CON
JMP @MR3404
MPP
AND= DM35000 #3          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
ANB @MR3014              ; 除材要求後定停止
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12309              ; INDEX_治具4 ﾜｰｸ有無-9
CON
JMP @MR3404
MPP
AND @MR3014              ; 除材要求後定停止
DW #200 EM30415          ; WORK DATA
CON
INC DM29000              ; 装置内ﾜｰｸ個数
CON
SET LR12309              ; INDEX_治具4 ﾜｰｸ有無-9
CON
JMP @MR3404
;10個に到達していない為次のﾜｰｸ給材要求
STG @MR3404
@INC EM40000             ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
CON
TMR @4 #1
CON
AND @T4
JMP @MR3005
;10個に到達したので終了処理
STG @MR3500
ANB MR114                ; from 給材P&P Data Shift Request
SET @MR4600              ; 給材完了開始
CON
JMP @MR3501
STG @MR3501
AND @MR4601              ; 給材完了
MPS
AND= DM35000 #0          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
LD MR9101                ; INDEX_治具-1上ﾜｰｸ全て有り
OR MR24907               ; 1STﾜｰｸ無し終了
ANL
RES MR6601               ; ﾜｰｸ給材中 ｻｲｸﾙﾀｲﾑ計測用
CON
RES @MR4601              ; 給材完了
CON
JMP @MR3900
MPP
LDB MR9101               ; INDEX_治具-1上ﾜｰｸ全て有り
ANB MR24907              ; 1STﾜｰｸ無し終了
ANL
JMP @MR3502
MRD
AND= DM35000 #1          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
LD MR9102                ; INDEX_治具-2上ﾜｰｸ全て有り
OR MR24907               ; 1STﾜｰｸ無し終了
ANL
RES MR6601               ; ﾜｰｸ給材中 ｻｲｸﾙﾀｲﾑ計測用
CON
RES @MR4601              ; 給材完了
CON
JMP @MR3900
MPP
LDB MR9102               ; INDEX_治具-2上ﾜｰｸ全て有り
ANB MR24907              ; 1STﾜｰｸ無し終了
ANL
JMP @MR3503
MRD
AND= DM35000 #2          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
LD MR9103                ; INDEX_治具-3上ﾜｰｸ全て有り
OR MR24907               ; 1STﾜｰｸ無し終了
ANL
RES MR6601               ; ﾜｰｸ給材中 ｻｲｸﾙﾀｲﾑ計測用
CON
RES @MR4601              ; 給材完了
CON
JMP @MR3900
MPP
LDB MR9103               ; INDEX_治具-3上ﾜｰｸ全て有り
ANB MR24907              ; 1STﾜｰｸ無し終了
ANL
JMP @MR3504
MPP
AND= DM35000 #3          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
LD MR9104                ; INDEX_治具-4上ﾜｰｸ全て有り
OR MR24907               ; 1STﾜｰｸ無し終了
ANL
RES MR6601               ; ﾜｰｸ給材中 ｻｲｸﾙﾀｲﾑ計測用
CON
RES @MR4601              ; 給材完了
CON
JMP @MR3900
MPP
LDB MR9104               ; INDEX_治具-4上ﾜｰｸ全て有り
ANB MR24907              ; 1STﾜｰｸ無し終了
ANL
JMP @MR3505
STG @MR3502
SET LR12001              ; INDEX_治具1 ﾜｰｸ有無-1
CON
SET LR12002              ; INDEX_治具1 ﾜｰｸ有無-2
CON
SET LR12003              ; INDEX_治具1 ﾜｰｸ有無-3
CON
SET LR12004              ; INDEX_治具1 ﾜｰｸ有無-4
CON
SET LR12005              ; INDEX_治具1 ﾜｰｸ有無-5
CON
SET LR12006              ; INDEX_治具1 ﾜｰｸ有無-6
CON
SET LR12007              ; INDEX_治具1 ﾜｰｸ有無-7
CON
SET LR12008              ; INDEX_治具1 ﾜｰｸ有無-8
CON
SET LR12009              ; INDEX_治具1 ﾜｰｸ有無-9
CON
SET LR12010              ; INDEX_治具1 ﾜｰｸ有無-10
CON
JMP @MR3501
STG @MR3503
SET LR12101              ; INDEX_治具2 ﾜｰｸ有無-1
CON
SET LR12102              ; INDEX_治具2 ﾜｰｸ有無-2
CON
SET LR12103              ; INDEX_治具2 ﾜｰｸ有無-3
CON
SET LR12104              ; INDEX_治具2 ﾜｰｸ有無-4
CON
SET LR12105              ; INDEX_治具2 ﾜｰｸ有無-5
CON
SET LR12106              ; INDEX_治具2 ﾜｰｸ有無-6
CON
SET LR12107              ; INDEX_治具2 ﾜｰｸ有無-7
CON
SET LR12108              ; INDEX_治具2 ﾜｰｸ有無-8
CON
SET LR12109              ; INDEX_治具2 ﾜｰｸ有無-9
CON
SET LR12110              ; INDEX_治具2 ﾜｰｸ有無-10
CON
JMP @MR3501
STG @MR3504
SET LR12201              ; INDEX_治具3 ﾜｰｸ有無-1
CON
SET LR12202              ; INDEX_治具3 ﾜｰｸ有無-2
CON
SET LR12203              ; INDEX_治具3 ﾜｰｸ有無-3
CON
SET LR12204              ; INDEX_治具3 ﾜｰｸ有無-4
CON
SET LR12205              ; INDEX_治具3 ﾜｰｸ有無-5
CON
SET LR12206              ; INDEX_治具3 ﾜｰｸ有無-6
CON
SET LR12207              ; INDEX_治具3 ﾜｰｸ有無-7
CON
SET LR12208              ; INDEX_治具3 ﾜｰｸ有無-8
CON
SET LR12209              ; INDEX_治具3 ﾜｰｸ有無-9
CON
SET LR12210              ; INDEX_治具3 ﾜｰｸ有無-10
CON
JMP @MR3501
STG @MR3505
SET LR12301              ; INDEX_治具4 ﾜｰｸ有無-1
CON
SET LR12302              ; INDEX_治具4 ﾜｰｸ有無-2
CON
SET LR12303              ; INDEX_治具4 ﾜｰｸ有無-3
CON
SET LR12304              ; INDEX_治具4 ﾜｰｸ有無-4
CON
SET LR12305              ; INDEX_治具4 ﾜｰｸ有無-5
CON
SET LR12306              ; INDEX_治具4 ﾜｰｸ有無-6
CON
SET LR12307              ; INDEX_治具4 ﾜｰｸ有無-7
CON
SET LR12308              ; INDEX_治具4 ﾜｰｸ有無-8
CON
SET LR12309              ; INDEX_治具4 ﾜｰｸ有無-9
CON
SET LR12310              ; INDEX_治具4 ﾜｰｸ有無-10
CON
JMP @MR3501
;Auto終了処理
STG @MR3900
ANB @MR001               ; TASK2 ERROR
MPS
ANB R41202               ; TASK2  PAUSE 
MPS
ANB @MR3014              ; 除材要求後定停止
JMP @MR3901
MPP
AND @MR3014              ; 除材要求後定停止
JMP @MR3902
MPP
AND R41202               ; TASK2  PAUSE 
SET @MR1900              ; Main1 HALT許可
STG @MR3901
DW #0 DM35100            ; ﾃｰﾌﾞﾙ　ﾜｰｸ要求番号
CON
DW #1 EM40000            ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
CON
RES B061                 ; ｾﾙ1へ動作開始許可
CON
RES @MR3002              ; AUTO Main1 Busy
CON
SET MR24911              ; 1ST　動作完了
CON
RES MR24908              ; 給材開始
CON
RES @MR3014              ; 除材要求後定停止
CON
JMP @MR3000              ; AUTO Main1
STG @MR3902
DW #0 DM35100            ; ﾃｰﾌﾞﾙ　ﾜｰｸ要求番号
CON
DW #1 EM40000            ; ﾜｰｸ給材ﾎﾟｼﾞｼｮﾝ
CON
RES B061                 ; ｾﾙ1へ動作開始許可
CON
RES @MR3002              ; AUTO Main1 Busy
CON
SET MR24911              ; 1ST　動作完了
CON
RES MR24908              ; 給材開始
CON
SET MR24910              ; 定停止要求
CON
JMP @MR3903
STG @MR3903
AND R44401               ; *Group1　ｽﾄｯﾌﾟSW
RES MR24910              ; 定停止要求
CON
RES @MR3014              ; 除材要求後定停止
CON
JMP @MR3000              ; AUTO Main1
STG @MR3915
MPS
LDB R41202               ; TASK2  PAUSE 
ANB @MR001               ; TASK2 ERROR
ANL
JMP LR602                ; _Grp1_Task2_Fin.STG
MPP
AND R41202               ; TASK2  PAUSE 
SET @MR1900              ; Main1 HALT許可
;<h1/>Maintenance
;[本STG内容]
;・各TaskのMAINTE動作を記述して下さい
;・動作ﾓｰﾄﾞは「MAINTEAC*」に格納されています(1〜32)
;・動作終了時は@MR2915にJMPして下さい
STG LR5602               ; _Grp1_Task2_MAINTE.STG
JMP @MR2000              ; Mainte
STG @MR2000              ; Mainte
JMP @MR2100
STG @MR2100
SET MR23914              ; ﾒﾝﾃﾅﾝｽ中
CON
JMP @MR2101
STG @MR2101
LD> #2000 DM3000         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR> DM3000 #2118         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD<= #2000 DM3000        ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND<= DM3000 #2118       ; _MainTP　表示中ﾍﾟｰｼﾞNo
ORL
ANL
MPS
AND R41202               ; TASK2  PAUSE 
SET @MR1900              ; Main1 HALT許可
MRD
ANB R41202               ; TASK2  PAUSE 
MPS
LD= DM4110 #25           ; _Group1　ﾒﾝﾃ動作番号
AND R45015               ; 単動終了
ANL
JMP @MR2915              ; Mainte END
MPP
LD= DM4110 #26           ; _Group1　ﾒﾝﾃ動作番号
AND R44914               ; *Group3　ｴﾘｱｾﾝｻ継続実行SW2ﾗﾝﾌﾟ
ANL
JMP @MR2915              ; Mainte END
MPP
AND R47800               ; _Group1　ﾒﾝﾃ動作定停止移行中
JMP @MR2110
LD MR23914               ; ﾒﾝﾃﾅﾝｽ中
AND= DM3000 #2001        ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND MR001                ; ｲﾝﾃﾞｯｸｽ原点復帰完了
OUT @MR2300              ; 全吸着操作用条件1
LD @MR2300               ; 全吸着操作用条件1
MPS
LD= DM35000 #0           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ANP MR102                ; 給材 仮吸着 全吸着 吸着ON SW
ANB MR103                ; 給材 仮吸着 全吸着 吸着OFF SW
ANB MR104                ; 給材 仮吸着 全吸着 破壊ON SW
ANL
SET MR10609              ; ST1ﾜｰｸ吸着 吸着ON
CON
RES MR10610              ; ST1ﾜｰｸ吸着 吸着OFF
CON
RES MR10611              ; ST1ﾜｰｸ吸着 破壊ON
MRD
LD= DM35000 #1           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ANP MR102                ; 給材 仮吸着 全吸着 吸着ON SW
ANB MR103                ; 給材 仮吸着 全吸着 吸着OFF SW
ANB MR104                ; 給材 仮吸着 全吸着 破壊ON SW
ANL
SET MR10612              ; ST2ﾜｰｸ吸着 吸着ON
CON
RES MR10613              ; ST2ﾜｰｸ吸着 吸着OFF
CON
RES MR10614              ; ST2ﾜｰｸ吸着 破壊ON
MRD
LD= DM35000 #2           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ANP MR102                ; 給材 仮吸着 全吸着 吸着ON SW
ANB MR103                ; 給材 仮吸着 全吸着 吸着OFF SW
ANB MR104                ; 給材 仮吸着 全吸着 破壊ON SW
ANL
SET MR10700              ; ST3ﾜｰｸ吸着 吸着ON
CON
RES MR10701              ; ST3ﾜｰｸ吸着 吸着OFF
CON
RES MR10702              ; ST3ﾜｰｸ吸着 破壊ON
MRD
LD= DM35000 #3           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ANP MR102                ; 給材 仮吸着 全吸着 吸着ON SW
ANB MR103                ; 給材 仮吸着 全吸着 吸着OFF SW
ANB MR104                ; 給材 仮吸着 全吸着 破壊ON SW
ANL
SET MR10703              ; ST4ﾜｰｸ吸着 吸着ON
CON
RES MR10704              ; ST4ﾜｰｸ吸着 吸着OFF
CON
RES MR10705              ; ST4ﾜｰｸ吸着 破壊ON
MRD
LD= DM35000 #0           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ANB MR102                ; 給材 仮吸着 全吸着 吸着ON SW
ANP MR103                ; 給材 仮吸着 全吸着 吸着OFF SW
ANB MR104                ; 給材 仮吸着 全吸着 破壊ON SW
ANL
RES MR10609              ; ST1ﾜｰｸ吸着 吸着ON
CON
SET MR10610              ; ST1ﾜｰｸ吸着 吸着OFF
CON
RES MR10611              ; ST1ﾜｰｸ吸着 破壊ON
MRD
LD= DM35000 #1           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ANB MR102                ; 給材 仮吸着 全吸着 吸着ON SW
ANP MR103                ; 給材 仮吸着 全吸着 吸着OFF SW
ANB MR104                ; 給材 仮吸着 全吸着 破壊ON SW
ANL
RES MR10612              ; ST2ﾜｰｸ吸着 吸着ON
CON
SET MR10613              ; ST2ﾜｰｸ吸着 吸着OFF
CON
RES MR10614              ; ST2ﾜｰｸ吸着 破壊ON
MRD
LD= DM35000 #2           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ANB MR102                ; 給材 仮吸着 全吸着 吸着ON SW
ANP MR103                ; 給材 仮吸着 全吸着 吸着OFF SW
ANB MR104                ; 給材 仮吸着 全吸着 破壊ON SW
ANL
RES MR10700              ; ST3ﾜｰｸ吸着 吸着ON
CON
SET MR10701              ; ST3ﾜｰｸ吸着 吸着OFF
CON
RES MR10702              ; ST3ﾜｰｸ吸着 破壊ON
MPP
LD= DM35000 #3           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ANB MR102                ; 給材 仮吸着 全吸着 吸着ON SW
ANP MR103                ; 給材 仮吸着 全吸着 吸着OFF SW
ANB MR104                ; 給材 仮吸着 全吸着 破壊ON SW
ANL
RES MR10703              ; ST4ﾜｰｸ吸着 吸着ON
CON
SET MR10704              ; ST4ﾜｰｸ吸着 吸着OFF
CON
RES MR10705              ; ST4ﾜｰｸ吸着 破壊ON
LD @MR2300               ; 全吸着操作用条件1
MPS
LD= DM35000 #0           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ANB MR102                ; 給材 仮吸着 全吸着 吸着ON SW
ANB MR103                ; 給材 仮吸着 全吸着 吸着OFF SW
ANP MR104                ; 給材 仮吸着 全吸着 破壊ON SW
ANL
SET MR12604              ; 給材部ﾃｰﾌﾞﾙ1 破壊確認開始
CON
SET @MR2210
MRD
LD= DM35000 #1           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ANB MR102                ; 給材 仮吸着 全吸着 吸着ON SW
ANB MR103                ; 給材 仮吸着 全吸着 吸着OFF SW
ANP MR104                ; 給材 仮吸着 全吸着 破壊ON SW
ANL
SET MR12612              ; 給材部ﾃｰﾌﾞﾙ2 破壊確認開始
CON
SET @MR2211
MRD
LD= DM35000 #2           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ANB MR102                ; 給材 仮吸着 全吸着 吸着ON SW
ANB MR103                ; 給材 仮吸着 全吸着 吸着OFF SW
ANP MR104                ; 給材 仮吸着 全吸着 破壊ON SW
ANL
SET MR12704              ; 給材部ﾃｰﾌﾞﾙ3 破壊確認開始
CON
SET @MR2212
MPP
LD= DM35000 #3           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ANB MR102                ; 給材 仮吸着 全吸着 吸着ON SW
ANB MR103                ; 給材 仮吸着 全吸着 吸着OFF SW
ANP MR104                ; 給材 仮吸着 全吸着 破壊ON SW
ANL
SET MR12712              ; 給材部ﾃｰﾌﾞﾙ4 破壊確認開始
CON
SET @MR2213
STG @MR2210
AND MR12605              ; 給材部ﾃｰﾌﾞﾙ1 吸着破壊OK
RES MR12605              ; 給材部ﾃｰﾌﾞﾙ1 吸着破壊OK
CON
ENDS
STG @MR2211
AND MR12613              ; 給材部ﾃｰﾌﾞﾙ2 吸着破壊OK
RES MR12613              ; 給材部ﾃｰﾌﾞﾙ2 吸着破壊OK
CON
ENDS
STG @MR2212
AND MR12705              ; 給材部ﾃｰﾌﾞﾙ3 吸着破壊OK
RES MR12705              ; 給材部ﾃｰﾌﾞﾙ3 吸着破壊OK
CON
ENDS
STG @MR2213
AND MR12713              ; 給材部ﾃｰﾌﾞﾙ4 吸着破壊OK
RES MR12713              ; 給材部ﾃｰﾌﾞﾙ4 吸着破壊OK
CON
ENDS
LD CR2002                ; 常時ON
LD= DM35000 #0           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND MR10609              ; ST1ﾜｰｸ吸着 吸着ON
LD= DM35000 #1           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND MR10612              ; ST2ﾜｰｸ吸着 吸着ON
ORL
LD= DM35000 #2           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND MR10700              ; ST3ﾜｰｸ吸着 吸着ON
ORL
LD= DM35000 #3           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND MR10703              ; ST4ﾜｰｸ吸着 吸着ON
ORL
ANL
OUT MR105                ; ｾｯﾄ治具吸着 吸着ON LP
LD CR2002                ; 常時ON
LD= DM35000 #0           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND MR10610              ; ST1ﾜｰｸ吸着 吸着OFF
ANB MR10611              ; ST1ﾜｰｸ吸着 破壊ON
LD= DM35000 #1           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND MR10613              ; ST2ﾜｰｸ吸着 吸着OFF
ANB MR10614              ; ST2ﾜｰｸ吸着 破壊ON
ORL
LD= DM35000 #2           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND MR10701              ; ST3ﾜｰｸ吸着 吸着OFF
ANB MR10702              ; ST3ﾜｰｸ吸着 破壊ON
ORL
LD= DM35000 #3           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND MR10704              ; ST4ﾜｰｸ吸着 吸着OFF
ANB MR10705              ; ST4ﾜｰｸ吸着 破壊ON
ORL
ANL
OUT MR106                ; ｾｯﾄ治具吸着 吸着OFF LP
LD CR2002                ; 常時ON
LD= DM35000 #0           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND MR10611              ; ST1ﾜｰｸ吸着 破壊ON
LD= DM35000 #1           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND MR10614              ; ST2ﾜｰｸ吸着 破壊ON
ORL
LD= DM35000 #2           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND MR10702              ; ST3ﾜｰｸ吸着 破壊ON
ORL
LD= DM35000 #3           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND MR10705              ; ST4ﾜｰｸ吸着 破壊ON
ORL
ANL
OUT MR107                ; ｾｯﾄ治具吸着 破壊ON LP
LD CR2002                ; 常時ON
LD= DM35000 #0           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND R7502                ; ﾜｰｸｾｯﾄ部 ST1 圧力1
LD= DM35000 #1           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND R7504                ; ﾜｰｸｾｯﾄ部 ST2 圧力1
ORL
LD= DM35000 #2           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND R7506                ; ﾜｰｸｾｯﾄ部 ST3 圧力1
ORL
LD= DM35000 #3           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND R7508                ; ﾜｰｸｾｯﾄ部 ST4 圧力1
ORL
ANL
OUT MR108                ; ｾｯﾄ治具吸着圧力計OUT1　LP
LD CR2002                ; 常時ON
LD= DM35000 #0           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND R7503                ; ﾜｰｸｾｯﾄ部 ST1 圧力2
LD= DM35000 #1           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND R7505                ; ﾜｰｸｾｯﾄ部 ST2 圧力2
ORL
LD= DM35000 #2           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND R7507                ; ﾜｰｸｾｯﾄ部 ST3 圧力2
ORL
LD= DM35000 #3           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND R7509                ; ﾜｰｸｾｯﾄ部 ST4 圧力2
ORL
ANL
OUT MR108                ; ｾｯﾄ治具吸着圧力計OUT1　LP
LD @MR2300               ; 全吸着操作用条件1
ANB MR18001              ; RB5:動作中
AND MR609                ; 給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ 原点復帰済 ﾗﾝﾌﾟ
ANB @MR2401              ; 移動中
MPS
ANP MR500                ; 給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ P1 SW
SET @MR2311              ; ﾎﾟｲﾝﾄ1移動中
CON
SET @MR2402              ; 手動ﾎﾟｲﾝﾄ-1移動
MRD
ANP MR501                ; 給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ P2 SW
SET @MR2312              ; ﾎﾟｲﾝﾄ2移動中
CON
SET @MR2403              ; 手動ﾎﾟｲﾝﾄ-2移動
MRD
ANP MR502                ; 給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ P3 SW
SET @MR2313              ; ﾎﾟｲﾝﾄ3移動中
CON
SET @MR2404              ; 手動ﾎﾟｲﾝﾄ-3移動
MRD
ANP MR503                ; 給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ P4 SW
SET @MR2314              ; ﾎﾟｲﾝﾄ4移動中
CON
SET @MR2405              ; 手動ﾎﾟｲﾝﾄ-4移動
MPP
ANP MR507                ; 給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ P5 SW
SET @MR2315
CON
SET @MR2406              ; 手動ﾎﾟｲﾝﾄ-5移動
STG @MR2402              ; 手動ﾎﾟｲﾝﾄ-1移動
DW #1 DM11008            ; RB5 　反転軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @MR2401              ; 移動中
CON
SET @MR5900              ; RB5動作
CON
JMP @MR2408
STG @MR2403              ; 手動ﾎﾟｲﾝﾄ-2移動
DW #2 DM11008            ; RB5 　反転軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @MR2401              ; 移動中
CON
SET @MR5900              ; RB5動作
CON
JMP @MR2408
STG @MR2404              ; 手動ﾎﾟｲﾝﾄ-3移動
DW #3 DM11008            ; RB5 　反転軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @MR2401              ; 移動中
CON
SET @MR5900              ; RB5動作
CON
JMP @MR2408
STG @MR2405              ; 手動ﾎﾟｲﾝﾄ-4移動
DW #4 DM11008            ; RB5 　反転軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @MR2401              ; 移動中
CON
SET @MR5900              ; RB5動作
CON
JMP @MR2408
STG @MR2406              ; 手動ﾎﾟｲﾝﾄ-5移動
DW #5 DM11008            ; RB5 　反転軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @MR2401              ; 移動中
CON
SET @MR5900              ; RB5動作
CON
JMP @MR2408
STG @MR2408
AND @MR5901              ; RB5動作完了
RES @MR5901              ; RB5動作完了
CON
ZRES @MR2311 @MR2315     ; ﾎﾟｲﾝﾄ1移動中
CON
RES @MR2401              ; 移動中
CON
ENDS
LD= DM11004 #1           ; RB5 現在ﾎﾟｼﾞｼｮﾝ番号
ANB @MR2401              ; 移動中
LD @MR2311               ; ﾎﾟｲﾝﾄ1移動中
AND @MR2401              ; 移動中
AND @MR004               ; ﾌﾘｯｶ_0.3
ORL
OUT MR600                ; 給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ P1 ﾗﾝﾌﾟ
LD= DM11004 #2           ; RB5 現在ﾎﾟｼﾞｼｮﾝ番号
ANB @MR2401              ; 移動中
LD @MR2312               ; ﾎﾟｲﾝﾄ2移動中
AND @MR2401              ; 移動中
AND @MR004               ; ﾌﾘｯｶ_0.3
ORL
OUT MR601                ; 給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ P2 ﾗﾝﾌﾟ
LD= DM11004 #3           ; RB5 現在ﾎﾟｼﾞｼｮﾝ番号
ANB @MR2401              ; 移動中
LD @MR2313               ; ﾎﾟｲﾝﾄ3移動中
AND @MR2401              ; 移動中
AND @MR004               ; ﾌﾘｯｶ_0.3
ORL
OUT MR602                ; 給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ P3 ﾗﾝﾌﾟ
LD= DM11004 #4           ; RB5 現在ﾎﾟｼﾞｼｮﾝ番号
ANB @MR2401              ; 移動中
LD @MR2314               ; ﾎﾟｲﾝﾄ4移動中
AND @MR2401              ; 移動中
AND @MR004               ; ﾌﾘｯｶ_0.3
ORL
OUT MR603                ; 給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ P4 ﾗﾝﾌﾟ
LD= DM11004 #5           ; RB5 現在ﾎﾟｼﾞｼｮﾝ番号
ANB @MR2401              ; 移動中
LD @MR2315
AND @MR2401              ; 移動中
AND @MR004               ; ﾌﾘｯｶ_0.3
ORL
OUT MR607                ; 給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ P5 ﾗﾝﾌﾟ
LD @MR2300               ; 全吸着操作用条件1
ANB MR18001              ; RB5:動作中
ANB @MR2411              ; 原点復帰中
ANP MR506                ; 給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ 原点復帰 SW
RES MR609                ; 給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ 原点復帰済 ﾗﾝﾌﾟ
CON
SET @MR2410              ; 手動原点復帰
STG @MR2410              ; 手動原点復帰
SET @MR2411              ; 原点復帰中
CON
SET MR18004              ; RB5:HOME
CON
JMP @MR2412              ; ﾎﾟｲﾝﾄ2移動中
STG @MR2412              ; ﾎﾟｲﾝﾄ2移動中
MPS
AND MR18002              ; RB5:原点復帰完了
SET MR609                ; 給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ 原点復帰済 ﾗﾝﾌﾟ
CON
RES MR18002              ; RB5:原点復帰完了
CON
RES @MR2411              ; 原点復帰中
CON
ENDS
MPP
ANB MR18002              ; RB5:原点復帰完了
TMR @5 #300
CON
AND @T5
RES MR18002              ; RB5:原点復帰完了
CON
RES @MR2411              ; 原点復帰中
CON
ENDS
LD MR23914               ; ﾒﾝﾃﾅﾝｽ中
MPS
ANB MR001                ; ｲﾝﾃﾞｯｸｽ原点復帰完了
OUT MR606                ; 給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝｲﾝﾀｰﾛｯｸ ﾗﾝﾌﾟ
MPP
LD MR609                 ; 給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ 原点復帰済 ﾗﾝﾌﾟ
LDB MR609                ; 給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ 原点復帰済 ﾗﾝﾌﾟ
AND @MR2411              ; 原点復帰中
AND @MR004               ; ﾌﾘｯｶ_0.3
ORL
ANL
OUT MR608                ; 給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ 原点復帰 ﾗﾝﾌﾟ
LD MR23914               ; ﾒﾝﾃﾅﾝｽ中
MPS
ANB MR001                ; ｲﾝﾃﾞｯｸｽ原点復帰完了
OUT MR3309               ; 除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝｲﾝﾀｰﾛｯｸ ﾗﾝﾌﾟ
MPP
LD MR3307                ; 除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ 原点復帰済
LDB MR3307               ; 除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ 原点復帰済
AND @MR2411              ; 原点復帰中
AND @MR004               ; ﾌﾘｯｶ_0.3
ORL
ANL
OUT MR3310               ; 除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ原点復帰 ﾗﾝﾌﾟ
STG @MR2110
MCALL HOLD_REQUEST #1
JMP @MR2915              ; Mainte END
STG @MR2915              ; Mainte END
MPS
MCALL MODE_INDI #2
MPP
ANB @MR001               ; TASK2 ERROR
MPS
ANB R41202               ; TASK2  PAUSE 
RES MR23914              ; ﾒﾝﾃﾅﾝｽ中
CON
SET R46103               ; _停止中　ﾓｰﾄﾞﾌﾗｸﾞ
CON
JMP LR602                ; _Grp1_Task2_Fin.STG
MPP
AND R41202               ; TASK2  PAUSE 
SET @MR1900              ; Main1 HALT許可
;<h1/>ERROR
;//*Error Sample
;[使用方法]
;・@DM1にERROR番号を代入
;・@DM2にSensor番号を代入(ｾﾝｻ無しｴﾗｰの場合は0)
;・@DM9に復帰SW番号(1〜9、0はSW無し)をdegit単位で4桁入力
;・Task0 ERROR SET(@MR100)でｴﾗｰ処理開始
;・ｴﾗｰ復帰でTask0 ERROR END(@MR101)がON
;・押下復帰SW番号により左から対応した@MR105,@MR106,@MR107,@MR108のいずれかがON
;・上記ONが成立したらJMPするSTGに対応する処理を記述
;Error0を左側から1,2,3,4の番号に対応した復帰選択SWを出力する
;Error Sample *//
;MyTask Error Process Substance/ｴﾗｰ処理実体
STG @MR100               ; Task2 ERROR
ANB R39002               ; ERROR_DISP Busy
MPS
ZRES @MR105 @MR108       ; SW1  SW4
CON
LDA @DM9                 ; ReturnSW /ERROR_DISP
CON
TBCD
CON
STA @DM10
CON
DISN @DM10 @DM3 #4
MRD
DW #2 @DM0               ; TaskNo /ERROR_DISP
CON
BMOV @DM0 DM60000 #7     ; TaskNo /ERROR_DISP  TaskNo /ERROR_DISP
MPP
SET R39000               ; ERROR_DISP Start
CON
SET @MR102               ; Task2 ERROR Busy
CON
JMP @MR103
STG @MR103
AND R39002               ; ERROR_DISP Busy
AND= DM60008 @DM1        ; ReturnNo /ERROR_DISP  ErrorNo /ERROR_DISP
MPS
AND= DM60007 @DM6        ; ReturnSW /ERROR_DISP
SET @MR105               ; SW1
CON
JMP @MR104
MRD
AND= DM60007 @DM5        ; ReturnSW /ERROR_DISP
SET @MR106               ; SW2
CON
JMP @MR104
MRD
AND= DM60007 @DM4        ; ReturnSW /ERROR_DISP
SET @MR107               ; SW3
CON
JMP @MR104
MPP
AND= DM60007 @DM3        ; ReturnSW /ERROR_DISP
SET @MR108               ; SW4
CON
JMP @MR104
STG @MR104
ANB R39002               ; ERROR_DISP Busy
RES @MR102               ; Task2 ERROR Busy
CON
SET @MR101               ; Task2 ERROR_End
CON
ENDS
;<h1/>SELECT_ACT
;//*Select_ACT Sample
;画面番号33をﾌﾞｻﾞｰ有りで選択SW番号を左から#5,#10,#0(無し),#34の並びで表示する
STG @MR4104
ANB R39204               ; SELECT_ACT Interlock
SET R39204               ; SELECT_ACT Interlock
CON
MPS
DW #33 @DM31             ; ScreenNo /SELECT_ACT
CON
DW #1 @DM32              ; Bz_Use /SELECT_ACT
CON
DW #5 @DM33              ; SW1_No /SELECT_ACT
CON
DW #10 @DM34             ; SW2_No /SELECT_ACT
CON
DW #0 @DM35              ; SW3_No /SELECT_ACT
CON
DW #34 @DM36             ; SW4_No /SELECT_ACT
MPP
SET @MR200               ; Task2 SELECT_ACT
CON
JMP @MR4105
STG @MR4105
AND @MR201               ; Task2 SEL_ACT END
RES @MR201               ; Task2 SEL_ACT END
CON
RES R39204               ; SELECT_ACT Interlock
CON
MPS
AND @MR205               ; SW1
JMP @MR4106
MRD
AND @MR206               ; SW2
JMP @MR4107
MRD
AND @MR207               ; SW3
JMP @MR4108
MPP
AND @MR208               ; SW4
JMP @MR4109
;Select_ACT Sample *//
;MyTask Select_ACT Process Substance/SELECT_ACT処理実体
STG @MR200               ; Task2 SELECT_ACT
ANB R39202               ; SELECT_ACT Busy
MPS
ZRES @MR205 @MR208       ; SW1  SW4
CON
DW #2 @DM30              ; TaskNo /SELECT_ACT
CON
BMOV @DM30 DM60030 #7    ; TaskNo /SELECT_ACT
MPP
SET R39200               ; SELECT_ACT Start
CON
SET @MR202               ; Task2 SEL_ACT Busy
CON
JMP @MR203
STG @MR203
AND R39202               ; SELECT_ACT Busy
AND<> DM60037 #0         ; SelectSW /SELECT_ACT
MPS
AND= DM60037 #1          ; SelectSW /SELECT_ACT
SET @MR205               ; SW1
CON
JMP @MR204
MRD
AND= DM60037 #2          ; SelectSW /SELECT_ACT
SET @MR206               ; SW2
CON
JMP @MR204
MRD
AND= DM60037 #3          ; SelectSW /SELECT_ACT
SET @MR207               ; SW3
CON
JMP @MR204
MPP
AND= DM60037 #4          ; SelectSW /SELECT_ACT
SET @MR208               ; SW4
CON
JMP @MR204
STG @MR204
ANB R39202               ; SELECT_ACT Busy
RES @MR202               ; Task2 SEL_ACT Busy
CON
SET @MR201               ; Task2 SEL_ACT END
CON
ENDS
;<h1/>SELECT_Y_N
;//*Select_Y_N Sample
STG @MR4203
ANB R39104               ; SELECT_Y_N Interlock
SET R39104               ; SELECT_Y_N Interlock
CON
DW #7 @DM21              ; ScreenNo /SELECT_Y_N
CON
DW #0 @DM22              ; Bz_Use /SELECT_Y_N
CON
SET @MR300               ; Task2 SELECT_Y_N
CON
JMP @MR4204
STG @MR4204
AND @MR301               ; Task2 Y/N END
RES @MR301               ; Task2 Y/N END
CON
RES R39104               ; SELECT_Y_N Interlock
CON
MPS
AND @MR306               ; Task2 Y/N
JMP @MR4205
MPP
ANB @MR306               ; Task2 Y/N
JMP @MR4206
;*Select_Y_N Sample//
;MyTask Select_Y_N Process Substance/SELECT_Y_N処理実体
STG @MR300               ; Task2 SELECT_Y_N
ANB R39102               ; SELECT_Y_N Busy
MPS
ZRES @MR306 @MR307       ; Task2 Y/N
CON
DW #2 @DM20              ; TaskNo /SELECT_Y_N
CON
BMOV @DM20 DM60020 #3    ; TaskNo /SELECT_Y_N  TaskNo /SELECT_Y_N
MPP
SET R39100               ; SELECT_Y_N Start
CON
SET @MR302               ; Task2 Y_N Busy
CON
JMP @MR303
STG @MR303
AND R39102               ; SELECT_Y_N Busy
MPS
AND= DM60023 #1          ; Y_N /SELECT_Y_N
SET @MR306               ; Task2 Y/N
CON
JMP @MR304
MPP
AND= DM60023 #2          ; Y_N /SELECT_Y_N
RES @MR306               ; Task2 Y/N
CON
JMP @MR304
STG @MR304
ANB R39102               ; SELECT_Y_N Busy
RES @MR302               ; Task2 Y_N Busy
CON
SET @MR301               ; Task2 Y/N END
CON
ENDS
;<h1/>TIMEUP_ERROR
;//*TIMEUP_ERROR Sample
;ｻﾝﾌﾟﾙｾﾝｻ:MR5000=ON AND MR5001 = OFF のいずれかが5sﾀｲﾑｱｯﾌﾟしたらTIMEUP_ERROR出力
;ｴﾗｰ復帰後、再度ｾﾝｻ確認
;TIMEUP_ERROR Sample *//
;MyTask TIMEUP_ERROR Process Substance/TIMEUP_ERROR処理実体
STG @MR400               ; Task2 TIMEUP_ERR
ANB R39302               ; TIMEUP_ERR Busy
MPS
DW #2 @DM40              ; TaskNo /TIMEUP_ERR
CON
BMOV @DM40 DM60040 #2    ; TaskNo /TIMEUP_ERR  TaskNo /TIMEUP_ERR
MPP
SET R39300               ; TIMEUP_ERR Start
CON
SET @MR402               ; Task2 TIMEUP Busy
CON
JMP @MR403
STG @MR403
AND R39302               ; TIMEUP_ERR Busy
JMP @MR404
STG @MR404
ANB R39302               ; TIMEUP_ERR Busy
RES @MR402               ; Task2 TIMEUP Busy
CON
SET @MR401               ; Task2 TIMEUP_END
CON
ENDS
;<h1/>Subroutines/ｻﾌﾞﾙｰﾁﾝ
;[記述方法]
;・ｻﾌﾞﾙｰﾁﾝは本ﾌﾞｯｸﾏｰｸから下に記述していって下さい
;・ｻﾌﾞﾙｰﾁﾝは必ずﾌﾞｯｸﾏｰｸを挿入して処理内容を明確にする事
;<h1/>ｲﾝﾃﾞｯｸｽ部給材準備ｻﾌﾞﾙｰﾁﾝ
STG @MR4500              ; 給材準備開始
JMP @MR4503
STG @MR4503
DW #2 DM11008            ; RB5 　反転軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @MR5900              ; RB5動作
CON
JMP @MR4504
STG @MR4504
AND @MR5901              ; RB5動作完了
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
RES @MR5901              ; RB5動作完了
CON
JMP @MR4506
STG @MR4506
DW #3 DM11008            ; RB5 　反転軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @MR5900              ; RB5動作
CON
JMP @MR4507
STG @MR4507
AND @MR5901              ; RB5動作完了
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
RES @MR5901              ; RB5動作完了
CON
JMP @MR4515
STG @MR4515
SET @MR4501              ; 給材準備動作完了
CON
ENDS
;<h1/>ｲﾝﾃﾞｯｸｽ部給材動作完了ｻﾌﾞﾙｰﾁﾝ
STG @MR4600              ; 給材完了開始
JMP @MR4603
STG @MR4603
MPS
ANB MR24907              ; 1STﾜｰｸ無し終了
JMP @MR4604
MPP
AND MR24907              ; 1STﾜｰｸ無し終了
JMP @MR4707              ; 終了へ
STG @MR4604
DW #4 DM11008            ; RB5 　反転軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @MR5900              ; RB5動作
CON
JMP @MR4605
STG @MR4605
AND @MR5901              ; RB5動作完了
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
RES @MR5901              ; RB5動作完了
CON
JMP @MR4606
STG @MR4606
MPS
AND= DM5010 #1           ; _AUTO動作番号
MPS
AND= DM35000 #0          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
RES MR10610              ; ST1ﾜｰｸ吸着 吸着OFF
CON
RES MR10611              ; ST1ﾜｰｸ吸着 破壊ON
CON
TMH @40 #3
CON
AND @T40
SET MR10609              ; ST1ﾜｰｸ吸着 吸着ON
CON
JMP @MR4800
MRD
AND= DM35000 #1          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
RES MR10613              ; ST2ﾜｰｸ吸着 吸着OFF
CON
RES MR10614              ; ST2ﾜｰｸ吸着 破壊ON
CON
TMH @41 #3
CON
AND @T41
SET MR10612              ; ST2ﾜｰｸ吸着 吸着ON
CON
JMP @MR4801
MRD
AND= DM35000 #2          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
RES MR10701              ; ST3ﾜｰｸ吸着 吸着OFF
CON
RES MR10702              ; ST3ﾜｰｸ吸着 破壊ON
CON
TMH @42 #3
CON
AND @T42
SET MR10700              ; ST3ﾜｰｸ吸着 吸着ON
CON
JMP @MR4802
MPP
AND= DM35000 #3          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
RES MR10704              ; ST4ﾜｰｸ吸着 吸着OFF
CON
RES MR10705              ; ST4ﾜｰｸ吸着 破壊ON
CON
TMH @43 #3
CON
AND @T43
SET MR10703              ; ST4ﾜｰｸ吸着 吸着ON
CON
JMP @MR4803
MPP
AND= DM5010 #4           ; _AUTO動作番号
JMP @MR4607
STG @MR4800
MPS
LD R7502                 ; ﾜｰｸｾｯﾄ部 ST1 圧力1
ANB @MR4900
ANL
JMP @MR4607
MPP
ANB R7502                ; ﾜｰｸｾｯﾄ部 ST1 圧力1
TMR @10 #20
CON
AND @T10
ANB @MR4607
JMP @MR4900
STG @MR4801
MPS
LD R7504                 ; ﾜｰｸｾｯﾄ部 ST2 圧力1
ANB @MR4901
ANL
JMP @MR4607
MPP
ANB R7504                ; ﾜｰｸｾｯﾄ部 ST2 圧力1
TMR @11 #20
CON
AND @T11
ANB @MR4607
JMP @MR4901
STG @MR4802
MPS
LD R7506                 ; ﾜｰｸｾｯﾄ部 ST3 圧力1
ANB @MR4902
ANL
JMP @MR4607
MPP
ANB R7506                ; ﾜｰｸｾｯﾄ部 ST3 圧力1
TMR @12 #20
CON
AND @T12
ANB @MR4607
JMP @MR4902
STG @MR4803
MPS
LD R7508                 ; ﾜｰｸｾｯﾄ部 ST4 圧力1
ANB @MR4903
ANL
JMP @MR4607
MPP
ANB R7508                ; ﾜｰｸｾｯﾄ部 ST4 圧力1
TMR @13 #20
CON
AND @T13
ANB @MR4607
JMP @MR4903
STG @MR4900
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1003 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #40 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #7502 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task2 ERROR
CON
JMP @MR4806
STG @MR4901
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1003 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #41 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #7504 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task2 ERROR
CON
JMP @MR4806
STG @MR4902
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1003 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #42 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #7506 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task2 ERROR
CON
JMP @MR4806
STG @MR4903
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1003 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #43 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #7508 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task2 ERROR
CON
JMP @MR4806
STG @MR4806
SET @MR1900              ; Main1 HALT許可
CON
AND @MR101               ; Task2 ERROR_End
RES @MR101               ; Task2 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
JMP @MR4807
STG @MR4807
MPS
AND @MR105               ; SW1
JMP @MR4808
MPP
AND @MR108               ; SW4
JMP @MR4810              ; 再確認
STG @MR4808
MPS
AND= DM35000 #0          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
RES MR10609              ; ST1ﾜｰｸ吸着 吸着ON
CON
RES MR10611              ; ST1ﾜｰｸ吸着 破壊ON
CON
TMH @45 #3
CON
AND @T45
SET MR10610              ; ST1ﾜｰｸ吸着 吸着OFF
CON
JMP @MR4809
MRD
AND= DM35000 #1          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
RES MR10612              ; ST2ﾜｰｸ吸着 吸着ON
CON
RES MR10614              ; ST2ﾜｰｸ吸着 破壊ON
CON
TMH @46 #3
CON
AND @T46
SET MR10613              ; ST2ﾜｰｸ吸着 吸着OFF
CON
JMP @MR4809
MRD
AND= DM35000 #2          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
RES MR10700              ; ST3ﾜｰｸ吸着 吸着ON
CON
RES MR10702              ; ST3ﾜｰｸ吸着 破壊ON
CON
TMH @47 #3
CON
AND @T47
SET MR10701              ; ST3ﾜｰｸ吸着 吸着OFF
CON
JMP @MR4809
MPP
AND= DM35000 #3          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
RES MR10703              ; ST4ﾜｰｸ吸着 吸着ON
CON
RES MR10705              ; ST4ﾜｰｸ吸着 破壊ON
CON
TMH @48 #3
CON
AND @T48
SET MR10704              ; ST4ﾜｰｸ吸着 吸着OFF
CON
JMP @MR4809
STG @MR4809
TMR #1534 #10
CON
AND T1534
JMP @MR4606
;再確認動作  一旦上昇
STG @MR4810              ; 再確認
MPS
AND= DM35000 #0          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
RES MR10609              ; ST1ﾜｰｸ吸着 吸着ON
CON
RES MR10611              ; ST1ﾜｰｸ吸着 破壊ON
CON
TMH @50 #3
CON
AND @T50
SET MR10610              ; ST1ﾜｰｸ吸着 吸着OFF
CON
JMP @MR4811
MRD
AND= DM35000 #1          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
RES MR10612              ; ST2ﾜｰｸ吸着 吸着ON
CON
RES MR10614              ; ST2ﾜｰｸ吸着 破壊ON
CON
TMH @51 #3
CON
AND @T51
SET MR10613              ; ST2ﾜｰｸ吸着 吸着OFF
CON
JMP @MR4811
MRD
AND= DM35000 #2          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
RES MR10700              ; ST3ﾜｰｸ吸着 吸着ON
CON
RES MR10702              ; ST3ﾜｰｸ吸着 破壊ON
CON
TMH @52 #3
CON
AND @T52
SET MR10701              ; ST3ﾜｰｸ吸着 吸着OFF
CON
JMP @MR4811
MPP
AND= DM35000 #3          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
RES MR10703              ; ST4ﾜｰｸ吸着 吸着ON
CON
RES MR10705              ; ST4ﾜｰｸ吸着 破壊ON
CON
TMH @53 #3
CON
AND @T53
SET MR10704              ; ST4ﾜｰｸ吸着 吸着OFF
CON
JMP @MR4811
STG @MR4811
TMR @14 #10
CON
AND @T14
JMP @MR4812
;上昇
STG @MR4812
DW #3 DM11008            ; RB5 　反転軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @MR5900              ; RB5動作
CON
JMP @MR4813
STG @MR4813
AND @MR5901              ; RB5動作完了
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
RES @MR5901              ; RB5動作完了
CON
JMP @MR4814
STG @MR4814
TMR @15 #5
CON
AND @T15
JMP @MR4604
;下降
STG @MR4607
DW #5 DM11008            ; RB5 　反転軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @MR5900              ; RB5動作
CON
JMP @MR4608
STG @MR4608
AND @MR5901              ; RB5動作完了
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
RES @MR5901              ; RB5動作完了
CON
JMP @MR4610
STG @MR4610
MPS
LD= DM5010 #1            ; _AUTO動作番号
OR R46102                ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANL
MPS
AND= DM35000 #0          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
SET MR12600              ; 給材部ﾃｰﾌﾞﾙ1 吸着確認開始
CON
MPS
LD MR12601               ; 給材部ﾃｰﾌﾞﾙ1 吸着確認-ON
ANB MR12602              ; 給材部ﾃｰﾌﾞﾙ1 吸着確認-OFF
ANL
ZRES MR12600 MR12715     ; 給材部ﾃｰﾌﾞﾙ1 吸着確認開始
CON
JMP @MR4707              ; 終了へ
MPP
LD MR12602               ; 給材部ﾃｰﾌﾞﾙ1 吸着確認-OFF
ANB MR12601              ; 給材部ﾃｰﾌﾞﾙ1 吸着確認-ON
ANL
JMP @MR4611
MRD
AND= DM35000 #1          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
SET MR12608              ; 給材部ﾃｰﾌﾞﾙ2 吸着確認開始
CON
MPS
LD MR12609               ; 給材部ﾃｰﾌﾞﾙ2 吸着確認-ON
ANB MR12610              ; 給材部ﾃｰﾌﾞﾙ2 吸着確認-OFF
ANL
ZRES MR12600 MR12715     ; 給材部ﾃｰﾌﾞﾙ1 吸着確認開始
CON
JMP @MR4707              ; 終了へ
MPP
LD MR12610               ; 給材部ﾃｰﾌﾞﾙ2 吸着確認-OFF
ANB MR12609              ; 給材部ﾃｰﾌﾞﾙ2 吸着確認-ON
ANL
JMP @MR4611
MRD
AND= DM35000 #2          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
SET MR12700              ; 給材部ﾃｰﾌﾞﾙ3 吸着確認開始
CON
MPS
LD MR12701               ; 給材部ﾃｰﾌﾞﾙ3 吸着確認-ON
ANB MR12702              ; 給材部ﾃｰﾌﾞﾙ3 吸着確認-OFF
ANL
ZRES MR12600 MR12715     ; 給材部ﾃｰﾌﾞﾙ1 吸着確認開始
CON
JMP @MR4707              ; 終了へ
MPP
LD MR12702               ; 給材部ﾃｰﾌﾞﾙ3 吸着確認-OFF
ANB MR12701              ; 給材部ﾃｰﾌﾞﾙ3 吸着確認-ON
ANL
JMP @MR4611
MPP
AND= DM35000 #3          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
SET MR12708              ; 給材部ﾃｰﾌﾞﾙ4 吸着確認開始
CON
MPS
LD MR12709               ; 給材部ﾃｰﾌﾞﾙ4 吸着確認-ON
ANB MR12710              ; 給材部ﾃｰﾌﾞﾙ4 吸着確認-OFF
ANL
ZRES MR12600 MR12715     ; 給材部ﾃｰﾌﾞﾙ1 吸着確認開始
CON
JMP @MR4707              ; 終了へ
MPP
LD MR12710               ; 給材部ﾃｰﾌﾞﾙ4 吸着確認-OFF
ANB MR12709              ; 給材部ﾃｰﾌﾞﾙ4 吸着確認-ON
ANL
JMP @MR4611
MPP
LD= DM5010 #4            ; _AUTO動作番号
ANB R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANL
JMP @MR4707              ; 終了へ
;吸着直前高さ
STG @MR4611
DW #4 DM11008            ; RB5 　反転軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @MR5900              ; RB5動作
CON
JMP @MR4612
STG @MR4612
AND @MR5901              ; RB5動作完了
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
RES @MR5901              ; RB5動作完了
CON
JMP @MR4614
STG @MR4614
MPS
AND= DM35000 #0          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
SET MR12604              ; 給材部ﾃｰﾌﾞﾙ1 破壊確認開始
CON
JMP @MR4615
MRD
AND= DM35000 #1          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
SET MR12612              ; 給材部ﾃｰﾌﾞﾙ2 破壊確認開始
CON
JMP @MR4615
MRD
AND= DM35000 #2          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
SET MR12704              ; 給材部ﾃｰﾌﾞﾙ3 破壊確認開始
CON
JMP @MR4615
MPP
AND= DM35000 #3          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
SET MR12712              ; 給材部ﾃｰﾌﾞﾙ4 破壊確認開始
CON
JMP @MR4615
STG @MR4615
MPS
LD= DM35000 #0           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND MR12605              ; 給材部ﾃｰﾌﾞﾙ1 吸着破壊OK
ANL
ZRES MR12600 MR12715     ; 給材部ﾃｰﾌﾞﾙ1 吸着確認開始
CON
JMP @MR4904
MRD
LD= DM35000 #1           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND MR12613              ; 給材部ﾃｰﾌﾞﾙ2 吸着破壊OK
ANL
ZRES MR12600 MR12715     ; 給材部ﾃｰﾌﾞﾙ1 吸着確認開始
CON
JMP @MR4905
MRD
LD= DM35000 #2           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND MR12705              ; 給材部ﾃｰﾌﾞﾙ3 吸着破壊OK
ANL
ZRES MR12600 MR12715     ; 給材部ﾃｰﾌﾞﾙ1 吸着確認開始
CON
JMP @MR4906
MPP
LD= DM35000 #3           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND MR12713              ; 給材部ﾃｰﾌﾞﾙ4 吸着破壊OK
ANL
ZRES MR12600 MR12715     ; 給材部ﾃｰﾌﾞﾙ1 吸着確認開始
CON
JMP @MR4907
STG @MR4904
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #40 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #7502 @DM2            ; SensorNo /ERROR_DISP
CON
SET MR15800              ; ｽｲｯﾁﾒｸﾗ
CON
SET @MR100               ; Task2 ERROR
CON
JMP @MR4703
STG @MR4905
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #41 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #7504 @DM2            ; SensorNo /ERROR_DISP
CON
SET MR15800              ; ｽｲｯﾁﾒｸﾗ
CON
SET @MR100               ; Task2 ERROR
CON
JMP @MR4703
STG @MR4906
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #42 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #7506 @DM2            ; SensorNo /ERROR_DISP
CON
SET MR15800              ; ｽｲｯﾁﾒｸﾗ
CON
SET @MR100               ; Task2 ERROR
CON
JMP @MR4703
STG @MR4907
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #43 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #7508 @DM2            ; SensorNo /ERROR_DISP
CON
SET MR15800              ; ｽｲｯﾁﾒｸﾗ
CON
SET @MR100               ; Task2 ERROR
CON
JMP @MR4703
STG @MR4703
SET @MR1900              ; Main1 HALT許可
CON
AND @MR101               ; Task2 ERROR_End
RES @MR101               ; Task2 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
JMP @MR4704
STG @MR4704
AND @MR105               ; SW1
RES MR15800              ; ｽｲｯﾁﾒｸﾗ
CON
JMP @MR4606
;終了
STG @MR4707              ; 終了へ
DW #1 DM11008            ; RB5 　反転軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @MR5900              ; RB5動作
CON
JMP @MR4708
STG @MR4708
AND @MR5901              ; RB5動作完了
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
RES @MR5901              ; RB5動作完了
CON
JMP @MR4715
STG @MR4715
SET @MR4601              ; 給材完了
CON
ENDS
;<h1/>画像検査要求ｻﾌﾞﾙｰﾁﾝ
;DM16000（仮割付）：給材ｶﾒﾗ状態信号
;bit0:FLG　　ｺﾏﾝﾄﾞ実行完了時ON
;bit1:BUSY　 制御ｺﾏﾝﾄﾞ実行中ON
;bit2:READY　ONでｺﾏﾝﾄﾞ実行可能
;bit3:OR　　 判定結果NGでON
;bit4:RUN　　ｶﾒﾗ運転ﾓｰﾄﾞ中にON
;bit15:ERR　 異常時ON
;
;DM16040：給材ｶﾒﾗ制御信号
;bit0:EXE　　制御ｺﾏﾝﾄﾞ実行
;bit1:TRG　　計測実行
;bit15:ERCLR ｴﾗｰｸﾘｱ
BLD DM16000 #15
ANB @MR003               ; 給材ｶﾒﾗｱﾗｰﾑ
OUT @MR5603              ; 給材部　画像ﾜｰｸ有無検査開始
;最新ｴﾗｰ情報取得 ｺﾏﾝﾄﾞｺｰﾄﾞ：00205000
;下位4桁 DM16042→5000＝0101,0000,0000,0000（10進数：#20480）
;上位4桁 DM16043→0020＝0000,0000,0010,0000 (10進数：＃32）
LDP @MR5603              ; 給材部　画像ﾜｰｸ有無検査開始
ANB R39004               ; ｴﾗｰ中
SET @MR003               ; 給材ｶﾒﾗｱﾗｰﾑ
CON
SET R39004               ; ｴﾗｰ中
CON
MOV #20480 DM16042
MOV #32 DM16043
SET @MR5604              ; 給材部 画像ﾜｰｸ有無検査 ｺﾏﾝﾄﾞ実行
;給材ｶﾒﾗ制御ｺﾏﾝﾄﾞ実行
STG @MR5604              ; 給材部 画像ﾜｰｸ有無検査 ｺﾏﾝﾄﾞ実行
BSET DM16040 #0
CON
BRES DM16040 #1
CON
BAND DM16000 #1
JMP @MR5605
STG @MR5605
BAND DM16000 #0
BRES DM16040 #0
CON
JMP @MR5606              ; 給材部 画像ﾜｰｸ有無検査 計測実行
;給材ｶﾒﾗ計測実行
STG @MR5606              ; 給材部 画像ﾜｰｸ有無検査 計測実行
BRES DM16040 #0
CON
BSET DM16040 #1
CON
BAND DM16000 #1
JMP @MR5608
STG @MR5608
BRES DM16040 #1
CON
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #50 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task2 ERROR
CON
JMP @MR5610
STG @MR5610
SET @MR1900              ; Main1 HALT許可
CON
AND @MR101               ; Task2 ERROR_End
RES @MR101               ; Task2 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
JMP @MR5611
STG @MR5611
AND @MR105               ; SW1
BSET DM16040 #15
CON
BANB DM16000 #15
JMP @MR5612
STG @MR5612
TMR @98 #5
CON
AND @T98
BRES DM16040 #15
CON
RES @MR003               ; 給材ｶﾒﾗｱﾗｰﾑ
CON
ENDS
;<h1/>RB5動作ｻﾌﾞﾙｰﾁﾝ
STG @MR5900              ; RB5動作
ANB @MR5902              ; RB5動作中
SET @MR5902              ; RB5動作中
CON
JMP @MR5903
STG @MR5903
TMH @20 #5
CON
AND @T20
SET MR18005              ; RB5:反転軸　MOVE
CON
JMP @MR5904
STG @MR5904
AND= DM11008 DM11004     ; RB5 　反転軸　目標ﾎﾟｲﾝﾄ番号  RB5 現在ﾎﾟｼﾞｼｮﾝ番号
ANB MR18005              ; RB5:反転軸　MOVE
TMH @21 #5
CON
AND @T21
RES @MR5902              ; RB5動作中
CON
SET @MR5901              ; RB5動作完了
CON
ENDS
;<h1/>HALT
LD R41202                ; TASK2  PAUSE 
AND @MR1900              ; Main1 HALT許可
ANB @MR5902              ; RB5動作中
TMR @190 #2
CON
AND @T190
SET R42602               ; _Grp1_Task2_ﾎﾟｰｽﾞ許可
LDB R41202               ; TASK2  PAUSE 
RES @MR1900              ; Main1 HALT許可
CON
RES R42602               ; _Grp1_Task2_ﾎﾟｰｽﾞ許可
;
END
ENDH
