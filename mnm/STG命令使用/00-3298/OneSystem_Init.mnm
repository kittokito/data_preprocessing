DEVICE:53
;MODULE:OneSystem_Init
;MODULE_TYPE:0
;SCRIPT_TYPE:
;OneSystem Init-Module
;
;---------------------------------------
;ModuleName	:	OneSystem_Init
;ModuleType	:	Init Module
;Function	:	OneSystem Initialize
;---------------------------------------
;
;Copylight(C) 2011 SEIKO EPSON Corp. All rights reserved.
;<h1/>OneSystem Version/OneSystemﾊﾞｰｼﾞｮﾝ管理
;<OneSystemPLC Version Infomation>
;==========================================
;Ver.1.0.0		2012/01/31
;Ver.1.0.1		2012/03/06
;Ver.1.0.2		2012/05/10
;Ver.1.0.3		2012/10/17
;==========================================
;Ver.1.1.0		2012/11/02
;OS_Ver = "01.01.00"			'OneSystemﾊﾞｰｼﾞｮﾝ
;OS_Ver = "01.01.00"			'OneSystemﾊﾞｰｼﾞｮﾝ
LD CR2002                ; 常時ON
SMOV "01.01.00" OS_Ver   ; _OneSystemﾊﾞｰｼﾞｮﾝ情報
;
;<h1/>Constant Definition/定数定義
;'OneSystem定数(変更禁止)
;
;GroupFullNum = 8								'最大ｸﾞﾙｰﾌﾟ数
;TaskFullNum = 32								'最大ﾀｽｸ数
;ModelFullNum = 100								'最大機種数
;ModelPageDisp = 20								'1ﾍﾟｰｼﾞ当たり表示機種数
;ModelPageMax = ModelFullNum - ModelPageDisp		'右ﾍﾟｰｼﾞ送り無効機種管理番号
;
;PEC_Passward = "4645"							'生産技術ｾﾝﾀｰﾊﾟｽﾜｰﾄﾞ
;
;JAPAN = 0										'日本語
;ENGLISH = 1										'英語
;CHINA = 2										'中国語
;
;OS_relay_delay = 5								'安全回路ﾘﾚｰ反応時間(x100msec)
;OS_cover_wait = 5								'安全ｶﾊﾞｰﾛｯｸ確認時間(x100msec)
;OS_air_wait = 3									'ｴｱｰﾗｯﾁ解除時間(x100msec)
;OS_area_wait = 3								'ｴﾘｱｾﾝｻﾗｯﾁ解除時間(x100msec)
;OS_task_delay = 5								'Task起動ﾃﾞｨﾚｲ(x100msec)
;'OneSystem定数(変更禁止)
;
;GroupFullNum = 8								'最大ｸﾞﾙｰﾌﾟ数
;
LD CR2002                ; 常時ON
MOV #8 GroupFullNum      ; _最大ｸﾞﾙｰﾌﾟ数
;TaskFullNum = 32								'最大ﾀｽｸ数
;
LD CR2002                ; 常時ON
MOV #32 TaskFullNum      ; _最大ﾀｽｸ数
;ModelFullNum = 100								'最大機種数
;
LD CR2002                ; 常時ON
MOV #100 ModelFullNum    ; _最大機種数
;ModelPageDisp = 20								'1ﾍﾟｰｼﾞ当たり表示機種数
;
LD CR2002                ; 常時ON
MOV #20 ModelPageDisp    ; _1ﾍﾟｰｼﾞ表示最大機種数
;ModelPageMax = ModelFullNum - ModelPageDisp		'右ﾍﾟｰｼﾞ送り無効機種管理番号
;
LD CR2002                ; 常時ON
LDA ModelPageDisp        ; _1ﾍﾟｰｼﾞ表示最大機種数
CON
EXT
CON
STA.L @VM0
CON
LDA ModelFullNum         ; _最大機種数
CON
EXT
CON
SUB.L @VM0
CON
STA ModelPageMax         ; _機種ﾍﾟｰｼﾞ表示最大数
;PEC_Passward = "4645"							'生産技術ｾﾝﾀｰﾊﾟｽﾜｰﾄﾞ
;
LD CR2002                ; 常時ON
SMOV "4645" PEC_Passward ; _生技C専用ﾊﾟｽﾜｰﾄﾞ
;JAPAN = 0										'日本語
;
LD CR2002                ; 常時ON
MOV #0 JAPAN             ; _日本語
;ENGLISH = 1										'英語
;
LD CR2002                ; 常時ON
MOV #1 ENGLISH           ; _英語
;CHINA = 2										'中国語
;
LD CR2002                ; 常時ON
MOV #2 CHINA             ; _中国語
;OS_relay_delay = 5								'安全回路ﾘﾚｰ反応時間(x100msec)
;
LD CR2002                ; 常時ON
MOV.D #5 OS_relay_delay  ; _安全回路ﾘﾚｰ反応時間
;OS_cover_wait = 5								'安全ｶﾊﾞｰﾛｯｸ確認時間(x100msec)
;
LD CR2002                ; 常時ON
MOV.D #5 OS_cover_wait   ; _安全ｶﾊﾞｰﾛｯｸ確認時間
;OS_air_wait = 3									'ｴｱｰﾗｯﾁ解除時間(x100msec)
;
LD CR2002                ; 常時ON
MOV.D #3 OS_air_wait     ; _ｴｱｰﾗｯﾁ解除確認時間
;OS_area_wait = 3								'ｴﾘｱｾﾝｻﾗｯﾁ解除時間(x100msec)
;
LD CR2002                ; 常時ON
MOV.D #3 OS_area_wait    ; _ｴﾘｱｾﾝｻﾗｯﾁ解除確認時間
;OS_task_delay = 5								'Task起動ﾃﾞｨﾚｲ(x100msec)
LD CR2002                ; 常時ON
MOV.D #5 OS_task_delay   ; _ﾃﾞｰﾀ収集ﾘｾｯﾄﾃﾞｨﾚｲ
;
;<h1/>BitDevice Init/ﾋﾞｯﾄﾃﾞﾊﾞｲｽ初期化
LD CR2008                ; 運転開始時1ｽｷｬﾝON
ZRES Task_Start1 LR9915  ; _Grp1_Task0_Start.STG  _Grp8_Task31_MAINTE.STG
;<h1/>WordDevice Init/ﾜｰﾄﾞﾃﾞﾊﾞｲｽ初期化
LD CR2008                ; 運転開始時1ｽｷｬﾝON
MOV #0 Estop_Factor      ; _非常停止要因
MOV #0 Air_Factor        ; _ｴｱｰ圧低下時ﾀｽｸ起動状態
FMOV #0 KtoV_ERR_ALM #256; _通常ｴﾗｰ(ID0)ｱﾗｰﾑ検出ﾜｰﾄﾞﾋﾞｯﾄ
FMOV #0 KtoV_TERR_ALM #256;_ﾀｲﾑｱｯﾌﾟｴﾗｰ(ID1)ｱﾗｰﾑ検出ﾜｰﾄﾞﾋﾞｯﾄ
FMOV #0 DM6100 #256
FMOV #0 DM6400 #256
FMOV #0 KtoV_ERR1_ERR #400;_通常ｴﾗｰ　ｴﾗｰ番号
FMOV.D #0 Warning_Chk1 #8; _WARNING1表示状態
FMOV.D #0 Msg_Chk1 #8    ; _MSG_DISP1表示状態
FMOV #0 BBS1_MsgBox1 #503; BBS1_MsgBox1
END
ENDH
