DEVICE:53
;MODULE:Group1_Task2
;MODULE_TYPE:0
;SCRIPT_TYPE:
;OneSystem Main-Module
;
;-----------------------------------------
;ModuleName	:	Group1_Task2
;ModuleType	:	Main Module
;Line		:	
;Cell		:	
;Function	:	
;-----------------------------------------
;<<Task LocalDevice>>
;/*項目			/*割付ｴﾘｱ				/*備考
;---------------------------------------------------------------------			
;Emergency		@MR000〜@MR015			Emergency処理時RESET禁止ｴﾘｱ
;Free			@MR100〜@MR915			ﾕｰｻﾞｰﾌﾘｰｴﾘｱ
;HOME			@MR1000〜@MR1515		HOME動作時使用ｴﾘｱ
;MAINTENANCE		@MR2000〜@MR2915		MAINTE動作時使用ｴﾘｱ
;AUTO(Main1)		@MR3000〜@MR3915		AUTO(Main1)動作時使用ｴﾘｱ
;	(Main2)		@MR4000〜@MR4915		AUTO(Main2)動作時使用ｴﾘｱ
;SubRoutine		@MR4500〜@MR6415		ｻﾌﾞﾙｰﾁﾝ共通動作使用ｴﾘｱ
;----------------------------------------------------------------------
;<h1/>Device_Init/ﾃﾞﾊﾞｲｽ初期化
;[内容]
;・非常停止、優先ｴﾗｰ発生時に初期化したいﾃﾞﾊﾞｲｽを指定して下さい
;※本Taskで使用するﾛｰｶﾙﾃﾞﾊﾞｲｽなど
;※STG〜JMPにて使用しているﾃﾞﾊﾞｲｽは必須
LDP R46104               ; _非常停止中　ﾓｰﾄﾞﾌﾗｸﾞ
ZRES @MR100 @MR6415      ; Task2 ERROR
;<h1/>Task_Monitor/ﾀｽｸﾓﾆﾀｰ
LD CR2002                ; 常時ON
FLIK #50 #50 @MR000
LD= DM60000 #2           ; TaskNo /ERROR_DISP
AND R46208               ; _Group1　ｴﾗｰ発生中
OUT @MR001               ; TASK2 ERROR
;ON STG Main1
;TYPE EM616.U,EM617.U,@MR000.U,@MR3000.U
;
;FOR EM616 = EM616 TO 160 STEP 16
;	IF @MR3000:EM616 <> 0 THEN
;		BREAK
;	END IF	
;NEXT
;	
;IF EM616 < 160 THEN
;	EM617 = (EM616 / 16) * 100 + DMX(@MR3000:EM616) + #3000
;END IF		
;		
;EM616 = EM616 + 16		
;IF EM616 > 160 THEN		
;	EM616 = 0		
;END IF
LDP @MR000
NCJ #1000
;TYPE EM616.U,EM617.U,@MR000.U,@MR3000.U
;
;FOR EM616 = EM616 TO 160 STEP 16
;
LD CR2002                ; 常時ON
MOV EM616 EM616          ; Task2 Main1@MR  Task2 Main1@MR
LABEL #2000
LD> EM616 #160           ; Task2 Main1@MR
CJ #2001
;	IF @MR3000:EM616 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM616                ; Task2 Main1@MR
CON
EXT
CON
STA.L Z12
LD<> @MR3000:Z12 #0      ; AUTO Main1
NCJ #2002
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2003
;	END IF	
;
LABEL #2002
;NEXT
;
LD CR2002                ; 常時ON
LDA EM616                ; Task2 Main1@MR
CON
ADD #16
CON
STA EM616                ; Task2 Main1@MR
LDB CR2009               ; 演算結果が負
CJ #2000
LABEL #2003
LABEL #2001
;IF EM616 < 160 THEN
;
LD< EM616 #160           ; Task2 Main1@MR
NCJ #2004
;	EM617 = (EM616 / 16) * 100 + DMX(@MR3000:EM616) + #3000
;
LD CR2002                ; 常時ON
LDA EM616                ; Task2 Main1@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR3000:Z12          ; AUTO Main1
CON
DMX
CON
STA @VM0
CON
LDA EM616                ; Task2 Main1@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM1
CON
LDA @VM0
CON
EXT
CON
ADD.L @VM1
CON
ADD.L +3000
CON
STA EM617                ; Task2 Main1@MR
;END IF		
;
LABEL #2004
;EM616 = EM616 + 16		
;
LD CR2002                ; 常時ON
LDA EM616                ; Task2 Main1@MR
CON
EXT
CON
ADD.L +16
CON
STA EM616                ; Task2 Main1@MR
;IF EM616 > 160 THEN		
;
LD> EM616 #160           ; Task2 Main1@MR
NCJ #2005
;	EM616 = 0		
;
LD CR2002                ; 常時ON
MOV #0 EM616             ; Task2 Main1@MR
;END IF
LABEL #2005
LABEL #1000
;
;ON STG Main2
;TYPE EM618.U,EM619.U,@MR4000.U
;
;FOR EM618 = EM618 TO 80 STEP 16
;	IF @MR4000:EM618 <> 0 THEN
;		BREAK
;	END IF	
;NEXT	
;
;IF EM618 < 80 THEN
;	EM619 = (EM618 / 16) * 100 + DMX(@MR4000:EM618) + #4000
;END IF
;
;EM618 = EM618 + 16		
;
;IF EM618 > 80 THEN
;	EM618 = 0	
;END IF
LDP @MR000
NCJ #1001
;TYPE EM618.U,EM619.U,@MR4000.U
;
;FOR EM618 = EM618 TO 80 STEP 16
;
LD CR2002                ; 常時ON
MOV EM618 EM618          ; Task2 Main2@MR  Task2 Main2@MR
LABEL #2006
LD> EM618 #80            ; Task2 Main2@MR
CJ #2007
;	IF @MR4000:EM618 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM618                ; Task2 Main2@MR
CON
EXT
CON
STA.L Z12
LD<> @MR4000:Z12 #0      ; AUTO Main2
NCJ #2008
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2009
;	END IF	
;
LABEL #2008
;NEXT	
;
LD CR2002                ; 常時ON
LDA EM618                ; Task2 Main2@MR
CON
ADD #16
CON
STA EM618                ; Task2 Main2@MR
LDB CR2009               ; 演算結果が負
CJ #2006
LABEL #2009
LABEL #2007
;IF EM618 < 80 THEN
;
LD< EM618 #80            ; Task2 Main2@MR
NCJ #2010
;	EM619 = (EM618 / 16) * 100 + DMX(@MR4000:EM618) + #4000
;
LD CR2002                ; 常時ON
LDA EM618                ; Task2 Main2@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR4000:Z12          ; AUTO Main2
CON
DMX
CON
STA @VM3
CON
LDA EM618                ; Task2 Main2@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM4
CON
LDA @VM3
CON
EXT
CON
ADD.L @VM4
CON
ADD.L +4000
CON
STA EM619                ; Task2 Main2@MR
;END IF
;
LABEL #2010
;EM618 = EM618 + 16		
;
LD CR2002                ; 常時ON
LDA EM618                ; Task2 Main2@MR
CON
EXT
CON
ADD.L +16
CON
STA EM618                ; Task2 Main2@MR
;IF EM618 > 80 THEN
;
LD> EM618 #80            ; Task2 Main2@MR
NCJ #2011
;	EM618 = 0	
;
LD CR2002                ; 常時ON
MOV #0 EM618             ; Task2 Main2@MR
;END IF
LABEL #2011
LABEL #1001
;
;ON STG SubRoutine
;TYPE EM620.U,EM621.U,@MR4500.U
;	
;FOR EM620 = EM620 TO 320 STEP 16
;	IF @MR4500:EM620 <> 0 THEN
;		BREAK
;	END IF	
;NEXT
;		
;IF EM620 < 320 THEN
;	EM621 = (EM620 / 16) * 100 + DMX(@MR4500:EM620) + #4500
;END IF
;		
;EM620 = EM620 + 16	
;
;IF EM620 > 320 THEN
;   EM620 = 0	
;END IF
LDP @MR000
NCJ #1002
;TYPE EM620.U,EM621.U,@MR4500.U
;
;FOR EM620 = EM620 TO 320 STEP 16
;
LD CR2002                ; 常時ON
MOV EM620 EM620          ; Task2 Sub@MR  Task2 Sub@MR
LABEL #2012
LD> EM620 #320           ; Task2 Sub@MR
CJ #2013
;	IF @MR4500:EM620 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM620                ; Task2 Sub@MR
CON
EXT
CON
STA.L Z12
LD<> @MR4500:Z12 #0      ; RB2 動作指令 Sub Start
NCJ #2014
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2015
;	END IF	
;
LABEL #2014
;NEXT
;
LD CR2002                ; 常時ON
LDA EM620                ; Task2 Sub@MR
CON
ADD #16
CON
STA EM620                ; Task2 Sub@MR
LDB CR2009               ; 演算結果が負
CJ #2012
LABEL #2015
LABEL #2013
;IF EM620 < 320 THEN
;
LD< EM620 #320           ; Task2 Sub@MR
NCJ #2016
;	EM621 = (EM620 / 16) * 100 + DMX(@MR4500:EM620) + #4500
;
LD CR2002                ; 常時ON
LDA EM620                ; Task2 Sub@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR4500:Z12          ; RB2 動作指令 Sub Start
CON
DMX
CON
STA @VM6
CON
LDA EM620                ; Task2 Sub@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM7
CON
LDA @VM6
CON
EXT
CON
ADD.L @VM7
CON
ADD.L +4500
CON
STA EM621                ; Task2 Sub@MR
;END IF
;
LABEL #2016
;EM620 = EM620 + 16	
;
LD CR2002                ; 常時ON
LDA EM620                ; Task2 Sub@MR
CON
EXT
CON
ADD.L +16
CON
STA EM620                ; Task2 Sub@MR
;IF EM620 > 320 THEN
;
LD> EM620 #320           ; Task2 Sub@MR
NCJ #2017
;   EM620 = 0	
;
LD CR2002                ; 常時ON
MOV #0 EM620             ; Task2 Sub@MR
;END IF
LABEL #2017
LABEL #1002
;
;<h1/>Task_Init/ﾀｽｸ初期化
;[本STG内容]
;・本Task起動時に必要な初期化処理を記述して下さい
;・起動Taskの全Init処理終了後、Task_StartのSTGが起動します
STG LR802                ; _Grp1_Task2_Init.STG
ENDS
;<h1/>Task_Start/ﾀｽｸ開始
;[本STG内容]
;・Task起動後、以下運転ﾓｰﾄﾞに従い、各STGにJMPします
;【HOME】	→	LR5200
;【AUTO】	→	LR5400
;【MAINTE】	→	LR5600
;・本STGは追記、修正不要です
STG LR402                ; _Grp1_Task2_Start.STG
MPS
AND R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5202               ; _Grp1_Task2_HOME.STG
MRD
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5402               ; _Grp1_Task2_AUTO.STG
MPP
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5602               ; _Grp1_Task2_MAINTE.STG
;<h1/>Task_Finish/ﾀｽｸ終了
;[本STG内容]
;・各Taskの終了STGになります
;・運転ﾓｰﾄﾞに係わらず終了時は本STGを経由して終了して下さい
;・本STGは追記、修正不要です
STG LR602                ; _Grp1_Task2_Fin.STG
RES R41002               ; _Grp1_Task2_起動中ﾌﾗｸﾞ
CON
ENDS
;<h1/>HOME/原点復帰
;[本STG内容]
;・STG @MR1000の続きから各Taskの原点復帰動作を記述する
;・動作終了時は@MR1515にJMPする事
STG LR5202               ; _Grp1_Task2_HOME.STG
RES R35111               ; RB2 動作正常終了
CON
JMP @MR1000              ; HOME
STG @MR1000              ; HOME
AND DM10505.8            ; RB2 RB_READY
ANB DM10505.9            ; RB2 RB_BUSY
ANB @MR1002              ; HOME中
ANB DM10505.11           ; RB2 Ctr_READY
AND DM10505.8            ; RB2 RB_READY
RES MR102                ; TASK2 原点復帰完了
CON
SET @MR1002              ; HOME中
CON
JMP @MR1003
;<h1/> RB2 初期設定
STG @MR1003
ANB @MR4700              ; RB初期設定 Sub Start
ANB @MR4701              ; RB初期設定 Sub END
ANB @MR4702              ; RB初期設定 Sub中
SET @MR4700              ; RB初期設定 Sub Start
CON
JMP @MR1004
STG @MR1004
ANB @MR4700              ; RB初期設定 Sub Start
AND @MR4701              ; RB初期設定 Sub END
ANB @MR4702              ; RB初期設定 Sub中
RES @MR4701              ; RB初期設定 Sub END
CON
JMP @MR1100
;<h1/> RB2 ﾊﾝﾄﾞ上昇
STG @MR1100
ANB MR9901               ; 洗浄機原点復帰可
ANB @MR4500              ; RB2 動作指令 Sub Start
ANB @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
DW #53 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #3 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2 動作指令 Sub Start
CON
JMP @MR1101
STG @MR1101
ANB @MR4500              ; RB2 動作指令 Sub Start
AND @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
MPS
ANB @MR4503              ; RB2 動作指令 Sub HOLD End
RES @MR4501              ; RB2 動作指令 Sub End
CON
JMP @MR1200
MPP
AND @MR4503              ; RB2 動作指令 Sub HOLD End
MCALL MODE_INDI #2
RES @MR4501              ; RB2 動作指令 Sub End
CON
RES @MR4503              ; RB2 動作指令 Sub HOLD End
CON
JMP @MR1515              ; HOME END
;<h1/> RB2 原点位置移動
STG @MR1200
ANB @MR4500              ; RB2 動作指令 Sub Start
ANB @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
DW #5 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2 動作指令 Sub Start
CON
JMP @MR1201
STG @MR1201
ANB @MR4500              ; RB2 動作指令 Sub Start
AND @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
MPS
ANB @MR4503              ; RB2 動作指令 Sub HOLD End
RES @MR4501              ; RB2 動作指令 Sub End
CON
JMP @MR1400
MPP
AND @MR4503              ; RB2 動作指令 Sub HOLD End
MCALL MODE_INDI #2
RES @MR4501              ; RB2 動作指令 Sub End
CON
RES @MR4503              ; RB2 動作指令 Sub HOLD End
CON
JMP @MR1515              ; HOME END
;<h1/> RB2 ﾊﾝﾄﾞｽﾃｰﾀｽ確認
STG @MR1300
ANB R35100               ; RB2 MOVE
ANB R35101               ; RB2 MOVE END
ANB R35102               ; During RB2 MOVE
DW #10 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET R35100               ; RB2 MOVE
CON
JMP @MR1301
;動作ｽﾃｰﾀｽ　Bit0　ﾁｬｯｸ開閉　0:Close　1:Open
;動作ｽﾃｰﾀｽ　Bit1　ﾁｬｯｸ上下　0:Up　1:Down
;動作ｽﾃｰﾀｽ　Bit2　ﾜｰｸ検出ｾﾝｻ　0:Off　1:On
STG @MR1301
AND R35101               ; RB2 MOVE END
MPS
LD DM10504.0             ; RB2 動作ｽﾃｰﾀｽ1(1)
AND DM10505.0            ; RB2 動作ｽﾃｰﾀｽ2(1)
ANL
DW #0 EM1013             ; RB2 動作ｽﾃｰﾀｽ1
CON
RES R35101               ; RB2 MOVE END
CON
JMP @MR1700
MPP
LDB DM10504.0            ; RB2 動作ｽﾃｰﾀｽ1(1)
ORB DM10505.0            ; RB2 動作ｽﾃｰﾀｽ2(1)
ANL
MPS
LD DM10504.2             ; RB2 動作ｽﾃｰﾀｽ1(4)
OR DM10505.2             ; RB2 動作ｽﾃｰﾀｽ2(4)
ANL
DW #0 EM1013             ; RB2 動作ｽﾃｰﾀｽ1
CON
RES R35101               ; RB2 MOVE END
CON
JMP @MR1400
MPP
LDB DM10504.2            ; RB2 動作ｽﾃｰﾀｽ1(4)
ANB DM10505.2            ; RB2 動作ｽﾃｰﾀｽ2(4)
ANL
DW #0 EM1013             ; RB2 動作ｽﾃｰﾀｽ1
CON
RES R35101               ; RB2 MOVE END
CON
JMP @MR1500
;<h1/> RB2 ﾜｰｸ回収動作
STG @MR1400
ANB @MR4500              ; RB2 動作指令 Sub Start
ANB @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
DW #128 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2 動作指令 Sub Start
CON
JMP @MR1401
STG @MR1401
ANB @MR4500              ; RB2 動作指令 Sub Start
AND @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
MPS
ANB @MR4503              ; RB2 動作指令 Sub HOLD End
RES @MR4501              ; RB2 動作指令 Sub End
CON
JMP @MR1600
MPP
AND @MR4503              ; RB2 動作指令 Sub HOLD End
MCALL MODE_INDI #2
RES @MR4501              ; RB2 動作指令 Sub End
CON
RES @MR4503              ; RB2 動作指令 Sub HOLD End
CON
JMP @MR1515              ; HOME END
;<h1/> RB2 ﾁｬｯｸ開動作
STG @MR1500
ANB @MR4500              ; RB2 動作指令 Sub Start
ANB @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
DW #51 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #3 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2 動作指令 Sub Start
CON
JMP @MR1501
STG @MR1501
ANB @MR4500              ; RB2 動作指令 Sub Start
AND @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
MPS
ANB @MR4503              ; RB2 動作指令 Sub HOLD End
RES @MR4501              ; RB2 動作指令 Sub End
CON
JMP @MR1700
MPP
AND @MR4503              ; RB2 動作指令 Sub HOLD End
MCALL MODE_INDI #2
RES @MR4501              ; RB2 動作指令 Sub End
CON
RES @MR4503              ; RB2 動作指令 Sub HOLD End
CON
JMP @MR1515              ; HOME END
;<h1/> RB2 待機位置移動
STG @MR1600
ANB @MR4500              ; RB2 動作指令 Sub Start
ANB @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
DW #130 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2 動作指令 Sub Start
CON
JMP @MR1601
STG @MR1601
ANB @MR4500              ; RB2 動作指令 Sub Start
AND @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
MPS
ANB @MR4503              ; RB2 動作指令 Sub HOLD End
RES @MR4501              ; RB2 動作指令 Sub End
CON
JMP @MR1700
MPP
AND @MR4503              ; RB2 動作指令 Sub HOLD End
MCALL MODE_INDI #2
RES @MR4501              ; RB2 動作指令 Sub End
CON
RES @MR4503              ; RB2 動作指令 Sub HOLD End
CON
JMP @MR1515              ; HOME END
;<h1/> 仮置き台下降
STG @MR1700
SET MR9901               ; 洗浄機原点復帰可
CON
AND MR3203               ; ULD反転 仮置台 下降IL
RES MR2008               ; ULD反転 仮置き台 上昇
CON
SET MR2009               ; ULD反転 仮置き台 下降
CON
ANB B20BA                ; 洗浄機より ULD反転 仮置台 上昇限
AND B20BB                ; 洗浄機より ULD反転 仮置台 下降限
ANB MR4200               ; ULD反転 仮置台 上昇限Err
ANB MR4201               ; ULD反転 仮置台 下降限Err
JMP @MR1701
STG @MR1701
MPS
LD= DM4208 #0            ; _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ
LD= DM4208 #1            ; _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ
AND= DM4206 #0           ; _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ
ORL
ANL
MPS
LDB B20B8                ; 洗浄機より ULD反転 仮置台 在荷1
ANB B20B9                ; 洗浄機より ULD反転 仮置台 在荷2
ANL
JMP @MR1515              ; HOME END
MRD
AND B20B8                ; 洗浄機より ULD反転 仮置台 在荷1
MCALL MODE_INDI #2
DW #4300 DM60009         ; Sensor ERROR No.
CON
SET MR4302               ; ULD仮置台 在荷有異常
CON
RES @MR1002              ; HOME中
CON
JMP @MR1515              ; HOME END
MPP
AND B20B9                ; 洗浄機より ULD反転 仮置台 在荷2
MCALL MODE_INDI #2
DW #4301 DM60009         ; Sensor ERROR No.
CON
SET MR4302               ; ULD仮置台 在荷有異常
CON
RES @MR1002              ; HOME中
CON
JMP @MR1515              ; HOME END
MPP
LD= DM4208 #1            ; _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ
AND= DM4206 #1           ; _機種別ﾃﾞｰﾀ　ﾃﾝﾎﾟﾗﾘ
ANL
JMP @MR1515              ; HOME END
;<h1/> RB2 原点復帰終了処理
STG @MR1515              ; HOME END
ANB @MR001               ; TASK2 ERROR
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2039                ; ULDより PAUSE要求
ANL
SET MR102                ; TASK2 原点復帰完了
CON
RES @MR1002              ; HOME中
CON
JMP LR602                ; _Grp1_Task2_Fin.STG
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
;<h1/>AUTO/自動動作
STG LR5402               ; _Grp1_Task2_AUTO.STG
JMP @MR3000              ; AUTO Main1
;<h1/>Auto-Main1/Autoﾒｲﾝﾙｰﾁﾝ1
;[本STG内容]
;・各TaskのAUTO動作を記述して下さい
;・動作ﾓｰﾄﾞは「AUTOAC」に格納されています(1〜32)
;・@MR3000:AUTO_Main1開始、@MR3001:AUTO_Main1完了、@MR3002:AUTO_Main1動作中
STG @MR3000              ; AUTO Main1
MPS
AND MR9902               ; 洗浄機動作OK
SET @MR3002              ; AUTO Main1 Busy
CON
JMP @MR3003              ; RB1 初期設定
MPP
ANB MR9902               ; 洗浄機動作OK
MPS
LD R46106                ; _定停止移行中
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2039                ; ULDより PAUSE要求
ANL
JMP @MR3915              ; ﾀｽｸ終了
MPP
LDB R46106               ; _定停止移行中
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANL
ANL
SET @MR1900              ; Main1 HALT許可
;<h1/> RB2 初期設定実行
STG @MR3003              ; RB1 初期設定
ANB @MR4700              ; RB初期設定 Sub Start
ANB @MR4701              ; RB初期設定 Sub END
ANB @MR4702              ; RB初期設定 Sub中
SET @MR4700              ; RB初期設定 Sub Start
CON
JMP @MR3004
STG @MR3004
ANB @MR4700              ; RB初期設定 Sub Start
AND @MR4701              ; RB初期設定 Sub END
ANB @MR4702              ; RB初期設定 Sub中
RES @MR4701              ; RB初期設定 Sub END
CON
JMP @MR3005
STG @MR3005
MPS
LD= DM35202 #0           ; RB2 洗浄ﾗｲﾝ
OR>= DM35202 #3          ; RB2 洗浄ﾗｲﾝ
ANL
MOV #1 DM35202           ; RB2 洗浄ﾗｲﾝ
MRD
LD= DM35204 #0           ; RB2 洗浄治具
OR>= DM35204 #3          ; RB2 洗浄治具
ANL
MOV #1 DM35204           ; RB2 洗浄治具
MRD
LD= DM35200 #0           ; RB2 ﾜｰｸ取込位置
OR>= DM35200 DM35050     ; RB2 ﾜｰｸ取込位置  ﾊﾟﾚｯﾄ収納個数
ANL
MOV #1 DM35200           ; RB2 ﾜｰｸ取込位置
MPP
JMP @MR3006
;実行中STG確認
STG @MR3006
MPS
LD=.L @MR3100 +0         ; 洗浄機 取出前H/S
AND=.L @MR3300 +0        ; 洗浄機 取出後H/S
AND=.L @MR3500 +0        ; ﾜｰｸ反転有無判断
AND=.L @MR3700 +0
ANL
JMP @MR3007
MPP
LD<>.L @MR3100 +0        ; 洗浄機 取出前H/S
OR<>.L @MR3300 +0        ; 洗浄機 取出後H/S
OR<>.L @MR3500 +0        ; ﾜｰｸ反転有無判断
OR<>.L @MR3700 +0
ANL
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
AND R46106               ; _定停止移行中
ANL
JMP @MR3915              ; ﾀｽｸ終了
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
;<h1/> 起動時ステージ分岐
STG @MR3007
MPS
AND MR3900               ; 洗浄機へ 自動運転
JMP @MR3015              ; Auto Loop先頭
MPP
ANB MR3900               ; 洗浄機へ 自動運転
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
AND R46106               ; _定停止移行中
ANL
JMP @MR3915              ; ﾀｽｸ終了
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
;<h1/> RB2 Auto Loop先頭
STG @MR3015              ; Auto Loop先頭
MPS
LDB R46106               ; _定停止移行中
OR MR20200               ; 払出定停止 ﾓｰﾄﾞ
ANL
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2039                ; ULDより PAUSE要求
ANB B20BA                ; 洗浄機より ULD反転 仮置台 上昇限
AND B20BB                ; 洗浄機より ULD反転 仮置台 下降限
ANB R35115               ; RB2 中断受付
LD B20A1                 ; 洗浄除材 ﾗｲﾝ1より  動作開始 許可
OR B20A9                 ; 洗浄除材 ﾗｲﾝ2より  動作開始 許可
ANL
ANL
JMP @MR3100              ; 洗浄機 取出前H/S
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
MRD
AND R46106               ; _定停止移行中
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2039                ; ULDより PAUSE要求
LD LR100                 ; _割り込みSW1　ON/OFF状態
LDB LR100                ; _割り込みSW1　ON/OFF状態
ANB R41001               ; _Grp1_Task1_起動中ﾌﾗｸﾞ
AND= DM30000 #0          ; 洗浄ﾗｲﾝ1 在荷
AND= DM30001 #0          ; 洗浄ﾗｲﾝ2 在荷
ORL
ANL
ANL
JMP @MR3915              ; ﾀｽｸ終了
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
MPP
AND R35115               ; RB2 中断受付
MCALL MODE_INDI #2
RES R35115               ; RB2 中断受付
CON
JMP @MR3915              ; ﾀｽｸ終了
LD R46106                ; _定停止移行中
MPS
LDB LR100                ; _割り込みSW1　ON/OFF状態
LD<> DM30000 #0          ; 洗浄ﾗｲﾝ1 在荷
OR<> DM30001 #0          ; 洗浄ﾗｲﾝ2 在荷
OR R41001                ; _Grp1_Task1_起動中ﾌﾗｸﾞ
ANL
ANL
OUT MR20200              ; 払出定停止 ﾓｰﾄﾞ
MPP
AND LR100                ; _割り込みSW1　ON/OFF状態
OUT MR20201              ; ｻｲｸﾙ停止 ﾓｰﾄﾞ
;<h1/> 洗浄機取出前　H/S
STG @MR3100              ; 洗浄機 取出前H/S
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2039                ; ULDより PAUSE要求
ANL
MPS
LD B20A1                 ; 洗浄除材 ﾗｲﾝ1より  動作開始 許可
AND= DM35202 #1          ; RB2 洗浄ﾗｲﾝ
ANL
MPS
SET B2060                ; 洗浄除材 ﾗｲﾝ1へ 動作開始 通知
CON
JMP @MR3101
MPP
LD MR9000                ; 洗浄ｼｬﾄﾙ 4個入れ
AND= DM35204 #1          ; RB2 洗浄治具
ANL
SET B2067                ; 洗浄機へ ﾗｲﾝ1 ﾜｰｸ取出1回目
MRD
LD B20A9                 ; 洗浄除材 ﾗｲﾝ2より  動作開始 許可
AND= DM35202 #2          ; RB2 洗浄ﾗｲﾝ
ANL
MPS
SET B2068                ; 洗浄除材 ﾗｲﾝ2へ 動作開始 通知
CON
JMP @MR3101
MPP
LD MR9000                ; 洗浄ｼｬﾄﾙ 4個入れ
AND= DM35204 #1          ; RB2 洗浄治具
ANL
SET B206F                ; 洗浄機へ ﾗｲﾝ2 ﾜｰｸ取出1回目
MRD
LD B20A1                 ; 洗浄除材 ﾗｲﾝ1より  動作開始 許可
ANB B20A9                ; 洗浄除材 ﾗｲﾝ2より  動作開始 許可
AND= DM35202 #2          ; RB2 洗浄ﾗｲﾝ
ANL
MOV #1 DM35202           ; RB2 洗浄ﾗｲﾝ
MPP
LD B20A9                 ; 洗浄除材 ﾗｲﾝ2より  動作開始 許可
ANB B20A1                ; 洗浄除材 ﾗｲﾝ1より  動作開始 許可
AND= DM35202 #1          ; RB2 洗浄ﾗｲﾝ
ANL
MOV #2 DM35202           ; RB2 洗浄ﾗｲﾝ
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3101
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2039                ; ULDより PAUSE要求
ANL
MPS
LDB B20A1                ; 洗浄除材 ﾗｲﾝ1より  動作開始 許可
AND= DM35202 #1          ; RB2 洗浄ﾗｲﾝ
ANL
RES B2060                ; 洗浄除材 ﾗｲﾝ1へ 動作開始 通知
CON
RES B2067                ; 洗浄機へ ﾗｲﾝ1 ﾜｰｸ取出1回目
CON
JMP @MR3200              ; ﾊﾝﾄﾞ　ﾜｰｸ取出
MPP
LDB B20A9                ; 洗浄除材 ﾗｲﾝ2より  動作開始 許可
AND= DM35202 #2          ; RB2 洗浄ﾗｲﾝ
ANL
RES B2068                ; 洗浄除材 ﾗｲﾝ2へ 動作開始 通知
CON
RES B206F                ; 洗浄機へ ﾗｲﾝ2 ﾜｰｸ取出1回目
CON
JMP @MR3200              ; ﾊﾝﾄﾞ　ﾜｰｸ取出
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
;<h1/> RB2　ﾊﾝﾄﾞ　ﾜｰｸ取出
STG @MR3200              ; ﾊﾝﾄﾞ　ﾜｰｸ取出
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2039                ; ULDより PAUSE要求
ANB @MR4700              ; RB初期設定 Sub Start
ANB @MR4701              ; RB初期設定 Sub END
ANB @MR4702              ; RB初期設定 Sub中
LD= DM35202 #1           ; RB2 洗浄ﾗｲﾝ
AND MR3103               ; RB2 洗浄ｼｬﾄﾙ1 進入IL
LD= DM35202 #2           ; RB2 洗浄ﾗｲﾝ
AND MR3104               ; RB2 洗浄ｼｬﾄﾙ2 進入IL
ORL
ANL
ANL
DW #127 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
MPS
LDA DM35202              ; RB2 洗浄ﾗｲﾝ
CON
STA EM1009               ; RB2 数値指定1
CON
LDA DM35204              ; RB2 洗浄治具
CON
STA EM1010               ; RB2 数値指定2
CON
SET @MR4500              ; RB2 動作指令 Sub Start
CON
JMP @MR3201
MPP
MCALL CYCLE_RECORD
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3201
ANB @MR4500              ; RB2 動作指令 Sub Start
AND @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
MPS
ANB @MR4503              ; RB2 動作指令 Sub HOLD End
RES @MR4501              ; RB2 動作指令 Sub End
CON
JMP @MR3202
MPP
AND @MR4503              ; RB2 動作指令 Sub HOLD End
RES @MR4501              ; RB2 動作指令 Sub End
CON
RES @MR4503              ; RB2 動作指令 Sub HOLD End
CON
JMP @MR3914              ; 処理中中断
STG @MR3202
MPS
AND MR9000               ; 洗浄ｼｬﾄﾙ 4個入れ
MPS
LD= DM35204 #1           ; RB2 洗浄治具
AND= DM35202 #1          ; RB2 洗浄ﾗｲﾝ
ANL
DW #2 DM30000            ; 洗浄ﾗｲﾝ1 在荷
CON
JMP @MR3400
MRD
LD= DM35204 #1           ; RB2 洗浄治具
AND= DM35202 #2          ; RB2 洗浄ﾗｲﾝ
ANL
DW #2 DM30001            ; 洗浄ﾗｲﾝ2 在荷
CON
JMP @MR3400
MRD
LD= DM35204 #2           ; RB2 洗浄治具
AND= DM35202 #1          ; RB2 洗浄ﾗｲﾝ
ANL
DW #0 DM30000            ; 洗浄ﾗｲﾝ1 在荷
CON
JMP @MR3300              ; 洗浄機 取出後H/S
MPP
LD= DM35204 #2           ; RB2 洗浄治具
AND= DM35202 #2          ; RB2 洗浄ﾗｲﾝ
ANL
DW #0 DM30001            ; 洗浄ﾗｲﾝ2 在荷
CON
JMP @MR3300              ; 洗浄機 取出後H/S
MPP
AND MR9001               ; 洗浄ｼｬﾄﾙ 2個入れ
MPS
AND= DM35202 #1          ; RB2 洗浄ﾗｲﾝ
DW #0 DM30000            ; 洗浄ﾗｲﾝ1 在荷
CON
JMP @MR3300              ; 洗浄機 取出後H/S
MPP
AND= DM35202 #2          ; RB2 洗浄ﾗｲﾝ
DW #0 DM30001            ; 洗浄ﾗｲﾝ2 在荷
CON
JMP @MR3300              ; 洗浄機 取出後H/S
;<h1/> 洗浄機取出後　H/S
STG @MR3300              ; 洗浄機 取出後H/S
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2039                ; ULDより PAUSE要求
ANL
MPS
AND= DM35202 #1          ; RB2 洗浄ﾗｲﾝ
SET B2066                ; 洗浄除材 ﾗｲﾝ1へ 動作完了 通知
CON
AND B20A6                ; 洗浄除材 ﾗｲﾝ1より  動作完了 確認
JMP @MR3301
MPP
AND= DM35202 #2          ; RB2 洗浄ﾗｲﾝ
SET B206E                ; 洗浄除材 ﾗｲﾝ2へ 動作完了 通知
CON
AND B20AE                ; 洗浄除材 ﾗｲﾝ2より  動作完了 確認
JMP @MR3301
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3301
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2039                ; ULDより PAUSE要求
ANL
MPS
AND= DM35202 #1          ; RB2 洗浄ﾗｲﾝ
RES B2066                ; 洗浄除材 ﾗｲﾝ1へ 動作完了 通知
CON
ANB B20A6                ; 洗浄除材 ﾗｲﾝ1より  動作完了 確認
JMP @MR3302
MPP
AND= DM35202 #2          ; RB2 洗浄ﾗｲﾝ
RES B206E                ; 洗浄除材 ﾗｲﾝ2へ 動作完了 通知
CON
ANB B20AE                ; 洗浄除材 ﾗｲﾝ2より  動作完了 確認
JMP @MR3302
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3302
MPS
AND MR9000               ; 洗浄ｼｬﾄﾙ 4個入れ
MPS
AND= DM35202 #1          ; RB2 洗浄ﾗｲﾝ
JMP @MR3401
MPP
AND= DM35202 #2          ; RB2 洗浄ﾗｲﾝ
JMP @MR3402
MPP
AND MR9001               ; 洗浄ｼｬﾄﾙ 2個入れ
MPS
AND= DM35202 #1          ; RB2 洗浄ﾗｲﾝ
JMP @MR3403
MPP
AND= DM35202 #2          ; RB2 洗浄ﾗｲﾝ
JMP @MR3404
STG @MR3400
@INC DM35204             ; RB2 洗浄治具
CON
JMP @MR3500              ; ﾜｰｸ反転有無判断
STG @MR3401
DW #1 DM35204            ; RB2 洗浄治具
CON
@INC DM35202             ; RB2 洗浄ﾗｲﾝ
CON
JMP @MR3500              ; ﾜｰｸ反転有無判断
STG @MR3402
DW #1 DM35204            ; RB2 洗浄治具
CON
DW #1 DM35202            ; RB2 洗浄ﾗｲﾝ
CON
JMP @MR3500              ; ﾜｰｸ反転有無判断
STG @MR3403
@INC DM35202             ; RB2 洗浄ﾗｲﾝ
CON
JMP @MR3500              ; ﾜｰｸ反転有無判断
STG @MR3404
DW #1 DM35202            ; RB2 洗浄ﾗｲﾝ
CON
JMP @MR3500              ; ﾜｰｸ反転有無判断
STG @MR3500              ; ﾜｰｸ反転有無判断
MPS
AND MR9010               ; ﾜｰｸ反転 動作有
JMP @MR3405              ; 反転UT (下状態) ﾜｰｸ仮置き
MPP
AND MR9011               ; ﾜｰｸ反転 動作無
JMP @MR3510              ; ULD投入ﾁｪｯｸ
;<h1/> RB2 反転UT(下状態) ﾜｰｸ仮置き
STG @MR3405              ; 反転UT (下状態) ﾜｰｸ仮置き
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2039                ; ULDより PAUSE要求
ANB @MR4500              ; RB2 動作指令 Sub Start
ANB @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
AND MR3102               ; RB2 仮置台 下降時 進入IL
ANL
MPS
LDB B20B8                ; 洗浄機より ULD反転 仮置台 在荷1
ANB B20B9                ; 洗浄機より ULD反転 仮置台 在荷2
ANB MR4300               ; ULD仮置台 在荷1異常
ANB MR4301               ; ULD仮置台 在荷2異常
ANL
DW #123 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2 動作指令 Sub Start
CON
JMP @MR3501
MRD
AND B20B8                ; 洗浄機より ULD反転 仮置台 在荷1
DW #4300 DM60009         ; Sensor ERROR No.
CON
SET MR4300               ; ULD仮置台 在荷1異常
MPP
AND B20B9                ; 洗浄機より ULD反転 仮置台 在荷2
DW #4301 DM60009         ; Sensor ERROR No.
CON
SET MR4301               ; ULD仮置台 在荷2異常
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3501
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2039                ; ULDより PAUSE要求
ANB @MR4500              ; RB2 動作指令 Sub Start
AND @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
ANL
MPS
ANB @MR4503              ; RB2 動作指令 Sub HOLD End
MPS
LD B20B8                 ; 洗浄機より ULD反転 仮置台 在荷1
AND B20B9                ; 洗浄機より ULD反転 仮置台 在荷2
OR MR9015                ; ﾜｰｸなし運転
ANB MR4300               ; ULD仮置台 在荷1異常
ANB MR4301               ; ULD仮置台 在荷2異常
ANB LR20103              ; RB2 仮置き台 ｱｸｾｽ中
ANL
RES @MR4501              ; RB2 動作指令 Sub End
CON
JMP @MR3502              ; ｱｰﾑ切替
MRD
LDB B20B8                ; 洗浄機より ULD反転 仮置台 在荷1
ANB MR9015               ; ﾜｰｸなし運転
ANL
DW #4300 DM60009         ; Sensor ERROR No.
CON
SET MR4300               ; ULD仮置台 在荷1異常
MPP
LDB B20B9                ; 洗浄機より ULD反転 仮置台 在荷2
ANB MR9015               ; ﾜｰｸなし運転
ANL
DW #4301 DM60009         ; Sensor ERROR No.
CON
SET MR4301               ; ULD仮置台 在荷2異常
MPP
AND @MR4503              ; RB2 動作指令 Sub HOLD End
RES @MR4501              ; RB2 動作指令 Sub End
CON
RES @MR4503              ; RB2 動作指令 Sub HOLD End
CON
JMP @MR3914              ; 処理中中断
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANB @MR4500              ; RB2 動作指令 Sub Start
AND @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
ANL
SET @MR1900              ; Main1 HALT許可
;<h1/> RB2 ｱｰﾑ切替
STG @MR3502              ; ｱｰﾑ切替
ANB @MR4500              ; RB2 動作指令 Sub Start
ANB @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
DW #124 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2 動作指令 Sub Start
CON
SET @MR3503              ; ULD仮置台 上昇要求
CON
JMP @MR3504
STG @MR3504
ANB @MR4500              ; RB2 動作指令 Sub Start
AND @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
MPS
ANB @MR4503              ; RB2 動作指令 Sub HOLD End
RES @MR4501              ; RB2 動作指令 Sub End
CON
JMP @MR3505
MPP
AND @MR4503              ; RB2 動作指令 Sub HOLD End
RES @MR4501              ; RB2 動作指令 Sub End
CON
RES @MR4503              ; RB2 動作指令 Sub HOLD End
CON
JMP @MR3914              ; 処理中中断
;<h1/> 反転UT 上昇
LD @MR3503               ; ULD仮置台 上昇要求
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2039                ; ULDより PAUSE要求
AND MR3202               ; ULD反転 仮置台 上昇IL
ANB MR4200               ; ULD反転 仮置台 上昇限Err
ANB MR4201               ; ULD反転 仮置台 下降限Err
ANL
RES MR2009               ; ULD反転 仮置き台 下降
CON
SET MR2008               ; ULD反転 仮置き台 上昇
CON
RES @MR3503              ; ULD仮置台 上昇要求
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3505
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2039                ; ULDより PAUSE要求
AND B20BA                ; 洗浄機より ULD反転 仮置台 上昇限
ANB B20BB                ; 洗浄機より ULD反転 仮置台 下降限
LD B20B8                 ; 洗浄機より ULD反転 仮置台 在荷1
AND B20B9                ; 洗浄機より ULD反転 仮置台 在荷2
OR MR9015                ; ﾜｰｸなし運転
ANL
ANL
JMP @MR3506              ; 反転UT (上状態) ﾜｰｸ取出し
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
;<h1/> RB2 反転UT(上状態) ﾜｰｸ取出し
STG @MR3506              ; 反転UT (上状態) ﾜｰｸ取出し
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2039                ; ULDより PAUSE要求
ANB @MR4500              ; RB2 動作指令 Sub Start
ANB @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
AND MR3101               ; RB2 仮置台 上昇時 進入IL
ANL
DW #125 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2 動作指令 Sub Start
CON
JMP @MR3507
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3507
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2039                ; ULDより PAUSE要求
ANB @MR4500              ; RB2 動作指令 Sub Start
AND @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
ANL
MPS
ANB @MR4503              ; RB2 動作指令 Sub HOLD End
MPS
LDB B20B8                ; 洗浄機より ULD反転 仮置台 在荷1
ANB B20B9                ; 洗浄機より ULD反転 仮置台 在荷2
ANB MR4300               ; ULD仮置台 在荷1異常
ANB MR4301               ; ULD仮置台 在荷2異常
ANB LR20103              ; RB2 仮置き台 ｱｸｾｽ中
ANL
SET @MR3508              ; ULD仮置台下降要求
CON
RES @MR4501              ; RB2 動作指令 Sub End
CON
JMP @MR3510              ; ULD投入ﾁｪｯｸ
MRD
AND B20B8                ; 洗浄機より ULD反転 仮置台 在荷1
DW #4300 DM60009         ; Sensor ERROR No.
CON
SET MR4300               ; ULD仮置台 在荷1異常
MPP
AND B20B9                ; 洗浄機より ULD反転 仮置台 在荷2
DW #4301 DM60009         ; Sensor ERROR No.
CON
SET MR4301               ; ULD仮置台 在荷2異常
MPP
AND @MR4503              ; RB2 動作指令 Sub HOLD End
RES @MR4501              ; RB2 動作指令 Sub End
CON
RES @MR4503              ; RB2 動作指令 Sub HOLD End
CON
JMP @MR3914              ; 処理中中断
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANB @MR4500              ; RB2 動作指令 Sub Start
AND @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
ANL
SET @MR1900              ; Main1 HALT許可
;<h1/> 反転UT 下降　ULD投入ﾁｪｯｸ
LD @MR3508               ; ULD仮置台下降要求
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2039                ; ULDより PAUSE要求
AND MR3203               ; ULD反転 仮置台 下降IL
ANB MR4200               ; ULD反転 仮置台 上昇限Err
ANB MR4201               ; ULD反転 仮置台 下降限Err
ANL
RES MR2008               ; ULD反転 仮置き台 上昇
CON
SET MR2009               ; ULD反転 仮置き台 下降
CON
RES @MR3508              ; ULD仮置台下降要求
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3510              ; ULD投入ﾁｪｯｸ
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2039                ; ULDより PAUSE要求
ANL
MPS
LD B2030                 ; ULDより PLC電源状態
AND B2031                ; ULDより 非常停止
AND B2032                ; ULDより ｲﾝﾀｰﾛｯｸ信号
AND B2033                ; ULDより 取込可
OR MR9014                ; ULDなし
ANB @MR4000              ; AUTO Main2
ANB @MR4001              ; Main2 END
ANB @MR4002              ; Main2 Busy
AND<= DM35200 DM35050    ; RB2 ﾜｰｸ取込位置  ﾊﾟﾚｯﾄ収納個数
ANL
JMP @MR3600              ; ﾊﾝﾄﾞ1 ﾜｰｸ収納
MPP
LD B2030                 ; ULDより PLC電源状態
AND B2031                ; ULDより 非常停止
LDB B2032                ; ULDより ｲﾝﾀｰﾛｯｸ信号
OR CR2002                ; 常時ON
ANL
ANB B2033                ; ULDより 取込可
AND B2038                ; ULDより 収納位置 ｶｳﾝﾀ ﾘｾｯﾄ要求
ANL
JMP @MR3511              ; ULD ｶｳﾝﾀﾘｾｯﾄ
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
;ＵＬＤ強制トレー交換時　収納位置カウンタリセット
STG @MR3511              ; ULD ｶｳﾝﾀﾘｾｯﾄ
DW #1 DM35200            ; RB2 ﾜｰｸ取込位置
CON
SET B2028                ; ULDへ 収納位置 ｶｳﾝﾀ ﾘｾｯﾄ完了
CON
JMP @MR3512
STG @MR3512
ANB B2038                ; ULDより 収納位置 ｶｳﾝﾀ ﾘｾｯﾄ要求
RES B2028                ; ULDへ 収納位置 ｶｳﾝﾀ ﾘｾｯﾄ完了
CON
JMP @MR3510              ; ULD投入ﾁｪｯｸ
;<h1/> RB2 ﾊﾝﾄﾞ1 ﾜｰｸ収納
STG @MR3600              ; ﾊﾝﾄﾞ1 ﾜｰｸ収納
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2039                ; ULDより PAUSE要求
ANB @MR4500              ; RB2 動作指令 Sub Start
ANB @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
AND MR3100               ; RB2 ﾄﾚﾁｪﾝ進入IL
LD MR3102                ; RB2 仮置台 下降時 進入IL
OR MR9011                ; ﾜｰｸ反転 動作無
OR CR2002                ; 常時ON
ANL
ANL
DW #110 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM35200              ; RB2 ﾜｰｸ取込位置
CON
STA EM1009               ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
AND<= DM35200 DM35050    ; RB2 ﾜｰｸ取込位置  ﾊﾟﾚｯﾄ収納個数
SET @MR4500              ; RB2 動作指令 Sub Start
CON
JMP @MR3605
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3605
@INC DM35200             ; RB2 ﾜｰｸ取込位置
CON
@INC.L DM5022            ; _生産ｶｳﾝﾀ2
CON
JMP @MR3601
STG @MR3601
ANB @MR4500              ; RB2 動作指令 Sub Start
AND @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
MPS
ANB @MR4503              ; RB2 動作指令 Sub HOLD End
MPS
AND<= DM35200 DM35050    ; RB2 ﾜｰｸ取込位置  ﾊﾟﾚｯﾄ収納個数
RES @MR4501              ; RB2 動作指令 Sub End
CON
JMP @MR3602              ; ﾊﾝﾄﾞ2 ﾜｰｸ収納
MPP
AND> DM35200 DM35050     ; RB2 ﾜｰｸ取込位置  ﾊﾟﾚｯﾄ収納個数
RES @MR4501              ; RB2 動作指令 Sub End
CON
JMP @MR3700
MPP
AND @MR4503              ; RB2 動作指令 Sub HOLD End
RES @MR4501              ; RB2 動作指令 Sub End
CON
RES @MR4503              ; RB2 動作指令 Sub HOLD End
CON
JMP @MR3914              ; 処理中中断
STG @MR3700
ANB @MR4000              ; AUTO Main2
ANB @MR4001              ; Main2 END
ANB @MR4002              ; Main2 Busy
SET @MR4000              ; AUTO Main2
CON
JMP @MR3701
STG @MR3701
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2039                ; ULDより PAUSE要求
ANB @MR4000              ; AUTO Main2
AND @MR4001              ; Main2 END
ANB @MR4002              ; Main2 Busy
ANL
RES @MR4001              ; Main2 END
CON
JMP @MR3602              ; ﾊﾝﾄﾞ2 ﾜｰｸ収納
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
;<h1/> RB2 ﾊﾝﾄﾞ2 ﾜｰｸ収納
STG @MR3602              ; ﾊﾝﾄﾞ2 ﾜｰｸ収納
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2039                ; ULDより PAUSE要求
ANB @MR4500              ; RB2 動作指令 Sub Start
ANB @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
AND MR3100               ; RB2 ﾄﾚﾁｪﾝ進入IL
ANL
DW #115 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM35200              ; RB2 ﾜｰｸ取込位置
CON
STA EM1009               ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2 動作指令 Sub Start
CON
JMP @MR3606
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3606
@INC DM35200             ; RB2 ﾜｰｸ取込位置
CON
@INC.L DM5022            ; _生産ｶｳﾝﾀ2
CON
JMP @MR3603
STG @MR3603
ANB @MR4500              ; RB2 動作指令 Sub Start
AND @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
MPS
ANB @MR4503              ; RB2 動作指令 Sub HOLD End
RES @MR4501              ; RB2 動作指令 Sub End
CON
JMP @MR3604
MPP
AND @MR4503              ; RB2 動作指令 Sub HOLD End
RES @MR4501              ; RB2 動作指令 Sub End
CON
RES @MR4503              ; RB2 動作指令 Sub HOLD End
CON
JMP @MR3914              ; 処理中中断
STG @MR3604
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2039                ; ULDより PAUSE要求
ANB B20BA                ; 洗浄機より ULD反転 仮置台 上昇限
AND B20BB                ; 洗浄機より ULD反転 仮置台 下降限
ANL
MPS
AND<= DM35200 DM35050    ; RB2 ﾜｰｸ取込位置  ﾊﾟﾚｯﾄ収納個数
JMP @MR3800              ; 待機位置 移動
MPP
AND> DM35200 DM35050     ; RB2 ﾜｰｸ取込位置  ﾊﾟﾚｯﾄ収納個数
SET @MR3706              ; ULD ﾄﾚｲﾁｪﾝｼﾞ 要求
CON
JMP @MR3800              ; 待機位置 移動
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
LD @MR3706               ; ULD ﾄﾚｲﾁｪﾝｼﾞ 要求
ANB @MR4000              ; AUTO Main2
ANB @MR4001              ; Main2 END
ANB @MR4002              ; Main2 Busy
SET @MR4000              ; AUTO Main2
CON
RES @MR3706              ; ULD ﾄﾚｲﾁｪﾝｼﾞ 要求
CON
SET @MR3707
LD @MR3707
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2039                ; ULDより PAUSE要求
ANB @MR4000              ; AUTO Main2
AND @MR4001              ; Main2 END
ANB @MR4002              ; Main2 Busy
ANL
RES @MR4001              ; Main2 END
CON
RES @MR3707
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
;<h1/> RB2 待機位置移動
STG @MR3800              ; 待機位置 移動
ANB @MR4500              ; RB2 動作指令 Sub Start
ANB @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
DW #166 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2 動作指令 Sub Start
CON
JMP @MR3801
STG @MR3801
ANB @MR4500              ; RB2 動作指令 Sub Start
AND @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
MPS
ANB @MR4503              ; RB2 動作指令 Sub HOLD End
RES @MR4501              ; RB2 動作指令 Sub End
CON
JMP @MR3015              ; Auto Loop先頭
MPP
AND @MR4503              ; RB2 動作指令 Sub HOLD End
RES @MR4501              ; RB2 動作指令 Sub End
CON
RES @MR4503              ; RB2 動作指令 Sub HOLD End
CON
JMP @MR3914              ; 処理中中断
;処理中中断
STG @MR3914              ; 処理中中断
ANB @MR001               ; TASK2 ERROR
RES @MR3503              ; ULD仮置台 上昇要求
CON
RES @MR3508              ; ULD仮置台下降要求
CON
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2039                ; ULDより PAUSE要求
ANL
JMP @MR3015              ; Auto Loop先頭
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
;ﾀｽｸ終了
STG @MR3915              ; ﾀｽｸ終了
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2039                ; ULDより PAUSE要求
ANL
RES R35115               ; RB2 中断受付
CON
RES @MR3503              ; ULD仮置台 上昇要求
CON
RES @MR3508              ; ULD仮置台下降要求
CON
RES @MR3002              ; AUTO Main1 Busy
CON
JMP LR602                ; _Grp1_Task2_Fin.STG
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
LD T10
SET @MR3915              ; ﾀｽｸ終了
;<h1/>Auto-Main2/Autoﾒｲﾝﾙｰﾁﾝ2
;[本STG内容]
;・@MR4000の起動はMain1にて行う事
;・@MR4000:AUTO_Main2開始、@MR4001:AUTO_Main2完了、@MR4002:AUTO_Main2動作中
STG @MR4000              ; AUTO Main2
SET @MR4002              ; Main2 Busy
CON
JMP @MR4003
STG @MR4003
LD B2030                 ; ULDより PLC電源状態
AND B2031                ; ULDより 非常停止
OR MR9014                ; ULDなし
ANL
SET B2025                ; ULDへ ﾄﾚｲﾁｪﾝｼﾞ 要求
CON
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2039                ; ULDより PAUSE要求
ANL
SET @MR4002              ; Main2 Busy
CON
LDB B2033                ; ULDより 取込可
OR MR9014                ; ULDなし
ANL
AND B2034                ; ULDより 動作開始 通知
JMP @MR4004
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANL
SET @MR1901              ; Main2 HALT許可
STG @MR4004
RES B2025                ; ULDへ ﾄﾚｲﾁｪﾝｼﾞ 要求
CON
ANB B2034                ; ULDより 動作開始 通知
SET MR10001              ; ULD ﾄﾚｲﾁｪﾝｼﾞ中
CON
JMP @MR4005
STG @MR4005
MPS
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
MPS
LD B203B                 ; ULDより ｽﾃｰﾀｽ(AUTO)
AND B2030                ; ULDより PLC電源状態
AND B2031                ; ULDより 非常停止
ANL
MPS
LD B2032                 ; ULDより ｲﾝﾀｰﾛｯｸ信号
AND B203B                ; ULDより ｽﾃｰﾀｽ(AUTO)
AND B2033                ; ULDより 取込可
ANL
DW #1 DM35200            ; RB2 ﾜｰｸ取込位置
CON
RES MR10001              ; ULD ﾄﾚｲﾁｪﾝｼﾞ中
CON
JMP @MR4006
MPP
LD B2032                 ; ULDより ｲﾝﾀｰﾛｯｸ信号
AND B2033                ; ULDより 取込可
ANL
RES @MR4002              ; Main2 Busy
CON
JMP @MR4007
MRD
ANB B203B                ; ULDより ｽﾃｰﾀｽ(AUTO)
DW #1 DM35200            ; RB2 ﾜｰｸ取込位置
CON
RES MR10001              ; ULD ﾄﾚｲﾁｪﾝｼﾞ中
CON
JMP @MR4006
MPP
AND MR9014               ; ULDなし
DW #1 DM35200            ; RB2 ﾜｰｸ取込位置
CON
RES MR10001              ; ULD ﾄﾚｲﾁｪﾝｼﾞ中
CON
JMP @MR4006
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANL
SET @MR1901              ; Main2 HALT許可
STG @MR4007
AND B203B                ; ULDより ｽﾃｰﾀｽ(AUTO)
AND B2030                ; ULDより PLC電源状態
AND B2031                ; ULDより 非常停止
AND B2032                ; ULDより ｲﾝﾀｰﾛｯｸ信号
AND B203B                ; ULDより ｽﾃｰﾀｽ(AUTO)
AND B2033                ; ULDより 取込可
DW #1 DM35200            ; RB2 ﾜｰｸ取込位置
CON
RES MR10001              ; ULD ﾄﾚｲﾁｪﾝｼﾞ中
CON
JMP @MR4006
STG @MR4006
JMP @MR4415              ; Main2 END
STG @MR4415              ; Main2 END
SET @MR4001              ; Main2 END
CON
RES @MR4002              ; Main2 Busy
CON
ENDS
;<h1/>MAINTE/ﾒﾝﾃﾅﾝｽ動作
;[本STG内容]
;・各TaskのMAINTE動作を記述して下さい
;・動作ﾓｰﾄﾞは「MAINTEAC*」に格納されています(1〜32)
;・動作終了時は@MR2915にJMPして下さい
STG LR5602               ; _Grp1_Task2_MAINTE.STG
JMP @MR2000              ; Mainte
STG @MR2000              ; Mainte
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2039                ; ULDより PAUSE要求
ANL
MPS
LDB DM10505.11           ; RB2 Ctr_READY
AND DM10505.8            ; RB2 RB_READY
ANL
SET @MR2002              ; Mainte中
CON
JMP @MR2010
MRD
AND DM10505.11           ; RB2 Ctr_READY
RES R35114               ; RB2 Prg_STOP
MPP
LD MR23400               ; 単独終了(TP SW)
ORP R44915               ; Teaching End
ORP MR23401              ; Teaching End（No）
ANL
RES @MR2002              ; Mainte中
CON
JMP @MR2910
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR2010
ANB @MR4700              ; RB初期設定 Sub Start
ANB @MR4701              ; RB初期設定 Sub END
ANB @MR4702              ; RB初期設定 Sub中
SET @MR4700              ; RB初期設定 Sub Start
CON
JMP @MR2011
STG @MR2011
ANB @MR4700              ; RB初期設定 Sub Start
AND @MR4701              ; RB初期設定 Sub END
ANB @MR4702              ; RB初期設定 Sub中
RES @MR4701              ; RB初期設定 Sub END
CON
JMP @MR2003
STG @MR2003
MPS
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
MPP
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2039                ; ULDより PAUSE要求
ANL
MPS
AND= DM4110 #1           ; _Group1　ﾒﾝﾃ動作番号
JMP @MR2100
MRD
AND= DM4110 #29          ; _Group1　ﾒﾝﾃ動作番号
MPS
AND MR9000               ; 洗浄ｼｬﾄﾙ 4個入れ
@DW #2100 DM3008         ; _MainTP　切替ﾍﾟｰｼﾞNo
CON
AND MR23400              ; 単独終了(TP SW)
JMP @MR2910
MPP
AND MR9001               ; 洗浄ｼｬﾄﾙ 2個入れ
@DW #2101 DM3008         ; _MainTP　切替ﾍﾟｰｼﾞNo
CON
AND MR23400              ; 単独終了(TP SW)
JMP @MR2910
MRD
AND= DM4110 #30          ; _Group1　ﾒﾝﾃ動作番号
@DW #2150 DM3008         ; _MainTP　切替ﾍﾟｰｼﾞNo
CON
MPS
LDP R44915               ; Teaching End
ORP MR23401              ; Teaching End（No）
ANL
RES R35114               ; RB2 Prg_STOP
CON
JMP @MR2910
MPP
@SET R35114              ; RB2 Prg_STOP
MPP
AND R47800               ; _Group1　ﾒﾝﾃ動作定停止移行中
JMP @MR2910
;<h1/> MainTP 表示中ﾍﾟｰｼﾞNo2110
;
LD @MR2002               ; Mainte中
LD= DM3000 #2110         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2112         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
MPS
ANP MR21000              ; TPSW ﾗｲﾝ1選択
RES MR22001              ; TPSW ﾗｲﾝ2選択 ﾗﾝﾌﾟ
CON
SET MR22000              ; TPSW ﾗｲﾝ1選択 ﾗﾝﾌﾟ
MPP
ANP MR21001              ; TPSW ﾗｲﾝ2選択
RES MR22000              ; TPSW ﾗｲﾝ1選択 ﾗﾝﾌﾟ
CON
SET MR22001              ; TPSW ﾗｲﾝ2選択 ﾗﾝﾌﾟ
LD @MR2002               ; Mainte中
LD= DM3000 #2110         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2112         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
MPS
ANP MR21002              ; TPSW ﾊﾝﾄﾞ1選択
RES MR22003              ; TPSW ﾊﾝﾄﾞ2選択 ﾗﾝﾌﾟ
CON
SET MR22002              ; TPSW ﾊﾝﾄﾞ1選択 ﾗﾝﾌﾟ
MPP
ANP MR21003              ; TPSW ﾊﾝﾄﾞ2選択
RES MR22002              ; TPSW ﾊﾝﾄﾞ1選択 ﾗﾝﾌﾟ
CON
SET MR22003              ; TPSW ﾊﾝﾄﾞ2選択 ﾗﾝﾌﾟ
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
MC
LD @MR2002               ; Mainte中
LD= DM3000 #2100         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2101         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
ANB R35102               ; During RB2 MOVE
ANP MR21114              ; TPSW 機種切替位置
AND MR24601              ; RB2 待機位置
DW #173 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
LD @MR2002               ; Mainte中
LD= DM3000 #2110         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2112         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
ANB R35102               ; During RB2 MOVE
MPS
ANP MR21100              ; TPSW 待機位置
DW #130 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
LDP MR21115              ; TPSW 回収動作
AND MR24601              ; RB2 待機位置
ANL
DW #128 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
LDP MR21114              ; TPSW 機種切替位置
AND MR24601              ; RB2 待機位置
ANL
DW #173 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
LD @MR2002               ; Mainte中
LD= DM3000 #2110         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2112         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
ANB R35102               ; During RB2 MOVE
AND MR3100               ; RB2 ﾄﾚﾁｪﾝ進入IL
LD MR24601               ; RB2 待機位置
OR MR24602               ; RB2 ﾊﾝﾄﾞ1 ﾜｰｸ収納位置
OR MR24603               ; RB2 ﾊﾝﾄﾞ2 ﾜｰｸ収納位置
OR MR24700               ; RB2 ｱｰﾑ切替1 0°位置
OR MR24908               ; RB2ﾊﾝﾄﾞ 上空位置
ANL
MPS
ANP MR21101              ; TPSW ﾊﾝﾄﾞ1 ﾜｰｸ取出
DW #150 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #1 EM1009             ; RB2 数値指定1
MRD
ANP MR21102              ; TPSW ﾊﾝﾄﾞ2 ﾜｰｸ取出
DW #150 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #2 EM1009             ; RB2 数値指定1
MPP
AND= #150 EM1008         ; RB2 動作ｺﾏﾝﾄﾞ
LDA DM50950              ; TP ﾜｰｸ取出 位置設定
CON
STA EM1010               ; RB2 数値指定2
LD @MR2002               ; Mainte中
LD= DM3000 #2110         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2112         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
ANB R35102               ; During RB2 MOVE
MPS
LDP MR21103              ; TPSW ｱｰﾑ切替1 0°
AND MR24701              ; RB2 ｱｰﾑ切替1 180°位置
ANL
DW #160 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
LDP MR21104              ; TPSW ｱｰﾑ切替1 180°
AND MR24702              ; RB2 反転UT上 受渡 待機位置
ANL
DW #161 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
LDP MR21105              ; TPSW 反転UT上昇 受渡待機
LD MR24707               ; RB2 ｱｰﾑ切替2 180°位置
OR MR24703               ; RB2 反転UT上 受渡 上空位置
ANL
ANL
DW #162 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
LDP MR21106              ; TPSW 反転UT上昇 受渡上空
AND MR3101               ; RB2 仮置台 上昇時 進入IL
LD MR24702               ; RB2 反転UT上 受渡 待機位置
OR MR24704               ; RB2 反転UT上 受渡位置
ANL
ANL
DW #163 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
LDP MR21107              ; TPSW 反転UT上昇 受渡
AND MR3101               ; RB2 仮置台 上昇時 進入IL
AND MR24703              ; RB2 反転UT上 受渡 上空位置
ANL
DW #164 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
LDP MR21108              ; TPSW ｱｰﾑ切替2 180°
AND MR24706              ; RB2 ｱｰﾑ切替2 0°位置
ANL
DW #167 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
LDP MR21109              ; TPSW ｱｰﾑ切替2 0°
LD MR24708               ; RB2 反転UT下 受渡 上空位置
OR MR24601               ; RB2 待機位置
OR MR24707               ; RB2 ｱｰﾑ切替2 180°位置
ANL
ANL
DW #166 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
LD @MR2002               ; Mainte中
LD= DM3000 #2110         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2112         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
ANB R35102               ; During RB2 MOVE
AND MR3102               ; RB2 仮置台 下降時 進入IL
MPS
LDP MR21110              ; TPSW 反転UT下降 受渡上空
LD MR24908               ; RB2ﾊﾝﾄﾞ 上空位置
OR MR24709               ; RB2 反転UT下 受渡位置
OR MR24601               ; RB2 待機位置
ANL
ANL
DW #168 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
LDP MR21111              ; TPSW 反転UT下降 受渡
AND MR24708              ; RB2 反転UT下 受渡 上空位置
ANL
DW #169 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
LD @MR2002               ; Mainte中
LD= DM3000 #2110         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2112         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
ANB R35102               ; During RB2 MOVE
AND MR3103               ; RB2 洗浄ｼｬﾄﾙ1 進入IL
AND MR22000              ; TPSW ﾗｲﾝ1選択 ﾗﾝﾌﾟ
MPS
LDP MR21200              ; TPSW ﾊﾝﾄﾞ1 治具1上空
LD MR24601               ; RB2 待機位置
OR MR24908               ; RB2ﾊﾝﾄﾞ 上空位置
OR MR24900               ; RB2_ﾗｲﾝ1 ﾊﾝﾄﾞ1治具1 下降位置
ANL
ANL
DW #1 DM50951            ; TP RB選択 位置表示
CON
DW #170 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #1 EM1009             ; RB2 数値指定1
CON
DW #1 EM1010             ; RB2 数値指定2
MPP
LDP MR21202              ; TPSW ﾊﾝﾄﾞ1 治具1下降2
AND MR24800              ; RB2_ﾗｲﾝ1 ﾊﾝﾄﾞ1治具1 上空位置
ANL
DW #3 DM50951            ; TP RB選択 位置表示
CON
DW #172 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #1 EM1009             ; RB2 数値指定1
CON
DW #1 EM1010             ; RB2 数値指定2
LD @MR2002               ; Mainte中
LD= DM3000 #2110         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2112         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
ANB R35102               ; During RB2 MOVE
AND MR3103               ; RB2 洗浄ｼｬﾄﾙ1 進入IL
AND MR22000              ; TPSW ﾗｲﾝ1選択 ﾗﾝﾌﾟ
MPS
LDP MR21203              ; TPSW ﾊﾝﾄﾞ1 治具2上空
LD MR24601               ; RB2 待機位置
OR MR24908               ; RB2ﾊﾝﾄﾞ 上空位置
OR MR24901               ; RB2_ﾗｲﾝ1 ﾊﾝﾄﾞ1治具2 下降位置
ANL
ANL
DW #4 DM50951            ; TP RB選択 位置表示
CON
DW #170 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #1 EM1009             ; RB2 数値指定1
CON
DW #2 EM1010             ; RB2 数値指定2
MPP
LDP MR21205              ; TPSW ﾊﾝﾄﾞ1 治具2下降2
AND MR24801              ; RB2_ﾗｲﾝ1 ﾊﾝﾄﾞ1治具2 上空位置
ANL
DW #6 DM50951            ; TP RB選択 位置表示
CON
DW #172 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #1 EM1009             ; RB2 数値指定1
CON
DW #2 EM1010             ; RB2 数値指定2
LD @MR2002               ; Mainte中
LD= DM3000 #2110         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2112         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
ANB R35102               ; During RB2 MOVE
AND MR3103               ; RB2 洗浄ｼｬﾄﾙ1 進入IL
AND MR22000              ; TPSW ﾗｲﾝ1選択 ﾗﾝﾌﾟ
MPS
LDP MR21206              ; TPSW ﾊﾝﾄﾞ1 治具3上空
LD MR24601               ; RB2 待機位置
OR MR24908               ; RB2ﾊﾝﾄﾞ 上空位置
OR MR24902               ; RB2_ﾗｲﾝ1 ﾊﾝﾄﾞ2治具3 下降位置
ANL
ANL
DW #7 DM50951            ; TP RB選択 位置表示
CON
DW #170 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #1 EM1009             ; RB2 数値指定1
CON
DW #3 EM1010             ; RB2 数値指定2
MPP
LDP MR21208              ; TPSW ﾊﾝﾄﾞ1 治具3下降2
AND MR24802              ; RB2_ﾗｲﾝ1 ﾊﾝﾄﾞ2治具3 上空位置
ANL
DW #9 DM50951            ; TP RB選択 位置表示
CON
DW #172 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #1 EM1009             ; RB2 数値指定1
CON
DW #3 EM1010             ; RB2 数値指定2
LD @MR2002               ; Mainte中
LD= DM3000 #2110         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2112         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
ANB R35102               ; During RB2 MOVE
AND MR3103               ; RB2 洗浄ｼｬﾄﾙ1 進入IL
AND MR22000              ; TPSW ﾗｲﾝ1選択 ﾗﾝﾌﾟ
MPS
LDP MR21209              ; TPSW ﾊﾝﾄﾞ1 治具4上空
LD MR24601               ; RB2 待機位置
OR MR24908               ; RB2ﾊﾝﾄﾞ 上空位置
OR MR24903               ; RB2_ﾗｲﾝ1 ﾊﾝﾄﾞ2治具4 下降位置
ANL
ANL
DW #10 DM50951           ; TP RB選択 位置表示
CON
DW #170 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #1 EM1009             ; RB2 数値指定1
CON
DW #4 EM1010             ; RB2 数値指定2
MPP
LDP MR21211              ; TPSW ﾊﾝﾄﾞ1 治具4下降2
AND MR24803              ; RB2_ﾗｲﾝ1 ﾊﾝﾄﾞ2治具4 上空位置
ANL
DW #12 DM50951           ; TP RB選択 位置表示
CON
DW #172 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #1 EM1009             ; RB2 数値指定1
CON
DW #4 EM1010             ; RB2 数値指定2
LD @MR2002               ; Mainte中
LD= DM3000 #2110         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2112         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
ANB R35102               ; During RB2 MOVE
AND MR3104               ; RB2 洗浄ｼｬﾄﾙ2 進入IL
AND MR22001              ; TPSW ﾗｲﾝ2選択 ﾗﾝﾌﾟ
MPS
LDP MR21200              ; TPSW ﾊﾝﾄﾞ1 治具1上空
LD MR24601               ; RB2 待機位置
OR MR24908               ; RB2ﾊﾝﾄﾞ 上空位置
OR MR24904               ; RB2_ﾗｲﾝ2 ﾊﾝﾄﾞ1治具1 下降位置
ANL
ANL
DW #1 DM50951            ; TP RB選択 位置表示
CON
DW #170 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #2 EM1009             ; RB2 数値指定1
CON
DW #1 EM1010             ; RB2 数値指定2
MPP
LDP MR21202              ; TPSW ﾊﾝﾄﾞ1 治具1下降2
AND MR24804              ; RB2_ﾗｲﾝ2 ﾊﾝﾄﾞ1治具1 上空位置
ANL
DW #3 DM50951            ; TP RB選択 位置表示
CON
DW #172 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #2 EM1009             ; RB2 数値指定1
CON
DW #1 EM1010             ; RB2 数値指定2
LD @MR2002               ; Mainte中
LD= DM3000 #2110         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2112         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
ANB R35102               ; During RB2 MOVE
AND MR3104               ; RB2 洗浄ｼｬﾄﾙ2 進入IL
AND MR22001              ; TPSW ﾗｲﾝ2選択 ﾗﾝﾌﾟ
MPS
LDP MR21203              ; TPSW ﾊﾝﾄﾞ1 治具2上空
LD MR24601               ; RB2 待機位置
OR MR24908               ; RB2ﾊﾝﾄﾞ 上空位置
OR MR24905               ; RB2_ﾗｲﾝ2 ﾊﾝﾄﾞ1治具2 下降位置
ANL
ANL
DW #4 DM50951            ; TP RB選択 位置表示
CON
DW #170 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #2 EM1009             ; RB2 数値指定1
CON
DW #2 EM1010             ; RB2 数値指定2
MPP
LDP MR21205              ; TPSW ﾊﾝﾄﾞ1 治具2下降2
AND MR24805              ; RB2_ﾗｲﾝ2 ﾊﾝﾄﾞ1治具2 上空位置
ANL
DW #6 DM50951            ; TP RB選択 位置表示
CON
DW #172 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #2 EM1009             ; RB2 数値指定1
CON
DW #2 EM1010             ; RB2 数値指定2
LD @MR2002               ; Mainte中
LD= DM3000 #2110         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2112         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
ANB R35102               ; During RB2 MOVE
AND MR3104               ; RB2 洗浄ｼｬﾄﾙ2 進入IL
AND MR22001              ; TPSW ﾗｲﾝ2選択 ﾗﾝﾌﾟ
MPS
LDP MR21206              ; TPSW ﾊﾝﾄﾞ1 治具3上空
LD MR24601               ; RB2 待機位置
OR MR24908               ; RB2ﾊﾝﾄﾞ 上空位置
OR MR24906               ; RB2_ﾗｲﾝ2 ﾊﾝﾄﾞ2治具3 下降位置
ANL
ANL
DW #7 DM50951            ; TP RB選択 位置表示
CON
DW #170 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #2 EM1009             ; RB2 数値指定1
CON
DW #3 EM1010             ; RB2 数値指定2
MPP
LDP MR21208              ; TPSW ﾊﾝﾄﾞ1 治具3下降2
AND MR24806              ; RB2_ﾗｲﾝ2 ﾊﾝﾄﾞ2治具3 上空位置
ANL
DW #9 DM50951            ; TP RB選択 位置表示
CON
DW #172 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #2 EM1009             ; RB2 数値指定1
CON
DW #3 EM1010             ; RB2 数値指定2
LD @MR2002               ; Mainte中
LD= DM3000 #2110         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2112         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
ANB R35102               ; During RB2 MOVE
AND MR3104               ; RB2 洗浄ｼｬﾄﾙ2 進入IL
AND MR22001              ; TPSW ﾗｲﾝ2選択 ﾗﾝﾌﾟ
MPS
LDP MR21209              ; TPSW ﾊﾝﾄﾞ1 治具4上空
LD MR24601               ; RB2 待機位置
OR MR24908               ; RB2ﾊﾝﾄﾞ 上空位置
OR MR24907               ; RB2_ﾗｲﾝ2 ﾊﾝﾄﾞ2治具4 下降位置
ANL
ANL
DW #10 DM50951           ; TP RB選択 位置表示
CON
DW #170 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #2 EM1009             ; RB2 数値指定1
CON
DW #4 EM1010             ; RB2 数値指定2
MPP
LDP MR21211              ; TPSW ﾊﾝﾄﾞ1 治具4下降2
AND MR24807              ; RB2_ﾗｲﾝ2 ﾊﾝﾄﾞ2治具4 上空位置
ANL
DW #12 DM50951           ; TP RB選択 位置表示
CON
DW #172 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #2 EM1009             ; RB2 数値指定1
CON
DW #4 EM1010             ; RB2 数値指定2
LD @MR2002               ; Mainte中
LD= DM3000 #2110         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2112         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
LD MR22000               ; TPSW ﾗｲﾝ1選択 ﾗﾝﾌﾟ
ANB MR3103               ; RB2 洗浄ｼｬﾄﾙ1 進入IL
LD MR22001               ; TPSW ﾗｲﾝ2選択 ﾗﾝﾌﾟ
ANB MR3104               ; RB2 洗浄ｼｬﾄﾙ2 進入IL
ORL
ANL
DW #0 DM50951            ; TP RB選択 位置表示
LD @MR2002               ; Mainte中
LD= DM3000 #2110         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2112         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
ANB R35102               ; During RB2 MOVE
MPS
AND MR22002              ; TPSW ﾊﾝﾄﾞ1選択 ﾗﾝﾌﾟ
MPS
ANP MR21300              ; TPSW ﾊﾝﾄﾞ上昇
DW #1 DM50952            ; TP RBﾊﾝﾄﾞ 選択表示
CON
DW #53 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #1 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
LDP MR21301              ; TPSW ﾊﾝﾄﾞ下降
AND MR24910              ; RB2ﾊﾝﾄﾞ1 ﾁｬｯｸ下降 可位置
ANL
DW #2 DM50952            ; TP RBﾊﾝﾄﾞ 選択表示
CON
DW #54 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #1 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
AND MR22003              ; TPSW ﾊﾝﾄﾞ2選択 ﾗﾝﾌﾟ
MPS
ANP MR21300              ; TPSW ﾊﾝﾄﾞ上昇
DW #1 DM50952            ; TP RBﾊﾝﾄﾞ 選択表示
CON
DW #53 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #2 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
LDP MR21301              ; TPSW ﾊﾝﾄﾞ下降
AND MR24911              ; RB2ﾊﾝﾄﾞ2 ﾁｬｯｸ下降 可位置
ANL
DW #2 DM50952            ; TP RBﾊﾝﾄﾞ 選択表示
CON
DW #54 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #2 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
LD @MR2002               ; Mainte中
LD= DM3000 #2110         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2112         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
ANB R35102               ; During RB2 MOVE
AND MR24909              ; RB2ﾊﾝﾄﾞ ﾁｬｯｸ開閉 可位置
MPS
AND MR22002              ; TPSW ﾊﾝﾄﾞ1選択 ﾗﾝﾌﾟ
MPS
ANP MR21302              ; TPSW ﾊﾝﾄﾞ開
DW #3 DM50952            ; TP RBﾊﾝﾄﾞ 選択表示
CON
DW #51 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #1 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
ANP MR21303              ; TPSW ﾊﾝﾄﾞ閉
DW #4 DM50952            ; TP RBﾊﾝﾄﾞ 選択表示
CON
DW #52 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #1 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
AND MR22003              ; TPSW ﾊﾝﾄﾞ2選択 ﾗﾝﾌﾟ
MPS
ANP MR21302              ; TPSW ﾊﾝﾄﾞ開
DW #3 DM50952            ; TP RBﾊﾝﾄﾞ 選択表示
CON
DW #51 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #2 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
ANP MR21303              ; TPSW ﾊﾝﾄﾞ閉
DW #4 DM50952            ; TP RBﾊﾝﾄﾞ 選択表示
CON
DW #52 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #2 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
LD @MR2002               ; Mainte中
LD= DM3000 #2110         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2112         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
LD MR22002               ; TPSW ﾊﾝﾄﾞ1選択 ﾗﾝﾌﾟ
ANB MR24910              ; RB2ﾊﾝﾄﾞ1 ﾁｬｯｸ下降 可位置
LD MR22003               ; TPSW ﾊﾝﾄﾞ2選択 ﾗﾝﾌﾟ
ANB MR24911              ; RB2ﾊﾝﾄﾞ2 ﾁｬｯｸ下降 可位置
ORL
AND<= #1 DM50952         ; TP RBﾊﾝﾄﾞ 選択表示
AND>= #2 DM50952         ; TP RBﾊﾝﾄﾞ 選択表示
LDB MR24909              ; RB2ﾊﾝﾄﾞ ﾁｬｯｸ開閉 可位置
AND<= #3 DM50952         ; TP RBﾊﾝﾄﾞ 選択表示
AND>= #4 DM50952         ; TP RBﾊﾝﾄﾞ 選択表示
ORL
ANL
DW #0 DM50952            ; TP RBﾊﾝﾄﾞ 選択表示
LD @MR2002               ; Mainte中
LD= DM3000 #2110         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2112         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
ANB R35102               ; During RB2 MOVE
MPS
LDP MR20000              ; TPSW 反転UT 上昇
AND MR3202               ; ULD反転 仮置台 上昇IL
ANL
RES MR2009               ; ULD反転 仮置き台 下降
CON
SET MR2008               ; ULD反転 仮置き台 上昇
MPP
LDP MR20001              ; TPSW 反転UT 下降
AND MR3203               ; ULD反転 仮置台 下降IL
ANL
RES MR2008               ; ULD反転 仮置き台 上昇
CON
SET MR2009               ; ULD反転 仮置き台 下降
;<h1/> MainTP 表示中ﾍﾟｰｼﾞNo2111
LD @MR2002               ; Mainte中
LD= DM3000 #2111         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2113         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
ANB R35002               ; During RB1 MOVE 
MPS
ANP MR21900              ; TPSW RB2 定量移動X+
MPS
ANB MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #6 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #1 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
AND MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #7 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #1 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
ANP MR21901              ; TPSW RB2 定量移動X-
MPS
ANB MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #8 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #1 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
AND MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #9 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #1 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
ANP MR21902              ; TPSW RB2 定量移動Y+
MPS
ANB MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #6 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #2 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
AND MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #7 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #2 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
ANP MR21903              ; TPSW RB2 定量移動Y-
MPS
ANB MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #8 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #2 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
AND MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #9 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #2 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
ANP MR21904              ; TPSW RB2 定量移動Z+
MPS
ANB MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #6 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #3 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
AND MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #7 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #3 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
ANP MR21905              ; TPSW RB2 定量移動Z-
MPS
ANB MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #8 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #3 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
AND MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #9 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #3 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
ANP MR21906              ; TPSW RB2 定量移動θ+
MPS
ANB MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #6 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #4 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
AND MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #7 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #4 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
ANP MR21907              ; TPSW RB2 定量移動θ-
MPS
ANB MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #8 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #4 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
AND MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #9 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #4 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
LD @MR2002               ; Mainte中
LD= DM3000 #2110         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2111         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2112         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2113         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
ANB R35102               ; During RB2 MOVE
ANB @MR4500              ; RB2 動作指令 Sub Start
ANB @MR4502              ; RB2 動作指令 Sub中
MPS
LDP MR23104              ; TPSW RB2起動SW
AND<> EM1008 #0          ; RB2 動作ｺﾏﾝﾄﾞ
ANL
SET @MR2114
MPP
ANP MR23106              ; TPSW RB2原点復帰SW
DW #5 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR2114
LD @MR2002               ; Mainte中
LD= DM3000 #2100         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2101         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
ANB R35102               ; During RB2 MOVE
ANB @MR4500              ; RB2 動作指令 Sub Start
ANB @MR4502              ; RB2 動作指令 Sub中
AND T390
AND<> EM1008 #0          ; RB2 動作ｺﾏﾝﾄﾞ
SET @MR2114
MCR
STG @MR2114
ANB @MR4500              ; RB2 動作指令 Sub Start
ANB @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
SET @MR4500              ; RB2 動作指令 Sub Start
CON
JMP @MR2115
STG @MR2115
ANB @MR4500              ; RB2 動作指令 Sub Start
AND @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
RES @MR4501              ; RB2 動作指令 Sub End
CON
RES @MR4503              ; RB2 動作指令 Sub HOLD End
CON
ENDS
;ﾍﾟｰｼﾞ切替時ｺﾏﾝﾄﾞ初期化
LD>= DM3000 #2110        ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND<= DM3000 #2113       ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND<> DM3000 DM3008      ; _MainTP　表示中ﾍﾟｰｼﾞNo  _MainTP　切替ﾍﾟｰｼﾞNo
DW #0 DM50950            ; TP ﾜｰｸ取出 位置設定
CON
DW #0 DM50951            ; TP RB選択 位置表示
CON
DW #0 DM50952            ; TP RBﾊﾝﾄﾞ 選択表示
CON
ZRES MR22000 MR22003     ; TPSW ﾗｲﾝ1選択 ﾗﾝﾌﾟ  TPSW ﾊﾝﾄﾞ2選択 ﾗﾝﾌﾟ
CON
DW #0 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
LD<> DM50951 #0          ; TP RB選択 位置表示
OR<> DM50952 #0          ; TP RBﾊﾝﾄﾞ 選択表示
LDA MR21100              ; TPSW 待機位置
CON
CMP #0
CON
ANB CR2010               ; 演算結果がｾﾞﾛ
DW #0 DM50951            ; TP RB選択 位置表示
CON
DW #0 DM50952            ; TP RBﾊﾝﾄﾞ 選択表示
LD<> DM50951 #0          ; TP RB選択 位置表示
LDA MR21300              ; TPSW ﾊﾝﾄﾞ上昇
CON
CMP #0
CON
ANB CR2010               ; 演算結果がｾﾞﾛ
DW #0 DM50951            ; TP RB選択 位置表示
LD<> DM50952 #0          ; TP RBﾊﾝﾄﾞ 選択表示
LDA MR21200              ; TPSW ﾊﾝﾄﾞ1 治具1上空
CON
CMP #0
CON
ANB CR2010               ; 演算結果がｾﾞﾛ
DW #0 DM50952            ; TP RBﾊﾝﾄﾞ 選択表示
LDF MR22000              ; TPSW ﾗｲﾝ1選択 ﾗﾝﾌﾟ
ORF MR22001              ; TPSW ﾗｲﾝ2選択 ﾗﾝﾌﾟ
DW #0 DM50951            ; TP RB選択 位置表示
LDF MR22002              ; TPSW ﾊﾝﾄﾞ1選択 ﾗﾝﾌﾟ
ORF MR22003              ; TPSW ﾊﾝﾄﾞ2選択 ﾗﾝﾌﾟ
DW #0 DM50952            ; TP RBﾊﾝﾄﾞ 選択表示
;Maintenance　終了
STG @MR2108
ANB R39104               ; SELECT_Y_N Interlock
SET R39104               ; SELECT_Y_N Interlock
CON
DW #7 @DM21              ; ScreenNo /SELECT_Y_N
CON
DW #0 @DM22              ; Bz_Use /SELECT_Y_N
CON
SET @MR300               ; Task2 SELECT_Y_N
CON
JMP @MR2909
STG @MR2909
AND @MR301               ; Task2 Y/N END
RES @MR301               ; Task2 Y/N END
CON
RES R39104               ; SELECT_Y_N Interlock
CON
MPS
AND @MR306               ; Task2 Y/N
JMP @MR2000              ; Mainte
MPP
ANB @MR306               ; Task2 Y/N
JMP @MR2910
STG @MR2910
MCALL HOLD_REQUEST #1
JMP @MR2915              ; Mainte END
STG @MR2915              ; Mainte END
MPS
MCALL MODE_INDI #2
MPP
ANB @MR001               ; TASK2 ERROR
MPS
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
MPP
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2039                ; ULDより PAUSE要求
ANL
RES @MR2002              ; Mainte中
CON
JMP LR602                ; _Grp1_Task2_Fin.STG
;<h1/>ERROR
;MyTask Error Process Substance/エラー処理実体
STG @MR100               ; Task2 ERROR
ANB R39002               ; ERROR_DISP Busy
MPS
ZRES @MR105 @MR108       ; SW1  SW4
CON
LDA @DM9                 ; ReturnSW /ERROR_DISP
CON
TBCD
CON
STA @DM10
CON
DISN @DM10 @DM3 #4
MRD
DW #2 @DM0               ; TaskNo /ERROR_DISP
CON
BMOV @DM0 DM60000 #7     ; TaskNo /ERROR_DISP  TaskNo /ERROR_DISP
MPP
SET R39000               ; ERROR_DISP Start
CON
SET @MR102               ; Task2 ERROR Busy
CON
JMP @MR103
STG @MR103
AND R39002               ; ERROR_DISP Busy
AND= DM60008 @DM1        ; ReturnNo /ERROR_DISP  ErrorNo /ERROR_DISP
MPS
AND= DM60007 @DM6        ; ReturnSW /ERROR_DISP
SET @MR105               ; SW1
CON
JMP @MR104
MRD
AND= DM60007 @DM5        ; ReturnSW /ERROR_DISP
SET @MR106               ; SW2
CON
JMP @MR104
MRD
AND= DM60007 @DM4        ; ReturnSW /ERROR_DISP
SET @MR107               ; SW3
CON
JMP @MR104
MPP
AND= DM60007 @DM3        ; ReturnSW /ERROR_DISP
SET @MR108               ; SW4
CON
JMP @MR104
STG @MR104
ANB R39002               ; ERROR_DISP Busy
RES @MR102               ; Task2 ERROR Busy
CON
SET @MR101               ; Task2 ERROR_End
CON
ENDS
;<h1/>SELECT_ACT
;MyTask Select_ACT Process Substance/SELECT_ACT処理実体
STG @MR200               ; Task2 SELECT_ACT
ANB R39202               ; SELECT_ACT Busy
MPS
ZRES @MR205 @MR208       ; SW1  SW4
CON
DW #2 @DM30              ; TaskNo /SELECT_ACT
CON
BMOV @DM30 DM60030 #7    ; TaskNo /SELECT_ACT  TaskNo /SELECT_ACT
MPP
SET R39200               ; SELECT_ACT Start
CON
SET @MR202               ; Task2 SEL_ACT Busy
CON
JMP @MR203
STG @MR203
AND R39202               ; SELECT_ACT Busy
AND<> DM60037 #0         ; SelectSW /SELECT_ACT
MPS
AND= DM60037 #1          ; SelectSW /SELECT_ACT
SET @MR205               ; SW1
CON
JMP @MR204
MRD
AND= DM60037 #2          ; SelectSW /SELECT_ACT
SET @MR206               ; SW2
CON
JMP @MR204
MRD
AND= DM60037 #3          ; SelectSW /SELECT_ACT
SET @MR207               ; SW3
CON
JMP @MR204
MPP
AND= DM60037 #4          ; SelectSW /SELECT_ACT
SET @MR208               ; SW4
CON
JMP @MR204
STG @MR204
ANB R39202               ; SELECT_ACT Busy
RES @MR202               ; Task2 SEL_ACT Busy
CON
SET @MR201               ; Task2 SEL_ACT END
CON
ENDS
;<h1/>SELECT_Y_N
;MyTask Select_Y_N Process Substance/SELECT_Y_N処理実体
STG @MR300               ; Task2 SELECT_Y_N
ANB R39102               ; SELECT_Y_N Busy
MPS
ZRES @MR306 @MR307       ; Task2 Y/N
CON
DW #2 @DM20              ; TaskNo /SELECT_Y_N
CON
BMOV @DM20 DM60020 #3    ; TaskNo /SELECT_Y_N  TaskNo /SELECT_Y_N
MPP
SET R39100               ; SELECT_Y_N Start
CON
SET @MR302               ; Task2 Y_N Busy
CON
JMP @MR303
STG @MR303
AND R39102               ; SELECT_Y_N Busy
MPS
AND= DM60023 #1          ; Y_N /SELECT_Y_N
SET @MR306               ; Task2 Y/N
CON
JMP @MR304
MPP
AND= DM60023 #2          ; Y_N /SELECT_Y_N
RES @MR306               ; Task2 Y/N
CON
JMP @MR304
STG @MR304
ANB R39102               ; SELECT_Y_N Busy
RES @MR302               ; Task2 Y_N Busy
CON
SET @MR301               ; Task2 Y/N END
CON
ENDS
;<h1/>TIMEUP_ERROR
;MyTask TIMEUP_ERROR Process Substance/TIMEUP_ERROR処理実体
STG @MR400               ; Task2 TIMEUP_ERR
ANB R39302               ; TIMEUP_ERR Busy
MPS
DW #2 @DM40              ; TaskNo /TIMEUP_ERR
CON
BMOV @DM40 DM60040 #2    ; TaskNo /TIMEUP_ERR  TaskNo /TIMEUP_ERR
MPP
SET R39300               ; TIMEUP_ERR Start
CON
SET @MR402               ; Task2 TIMEUP Busy
CON
JMP @MR403
STG @MR403
AND R39302               ; TIMEUP_ERR Busy
JMP @MR404
STG @MR404
ANB R39302               ; TIMEUP_ERR Busy
RES @MR402               ; Task2 TIMEUP Busy
CON
SET @MR401               ; Task2 TIMEUP_END
CON
ENDS
;<h1/>SubRoutines/ｻﾌﾞﾙｰﾁﾝ
;[記述方法]
;・ｻﾌﾞﾙｰﾁﾝは本ﾌﾞｯｸﾏｰｸから下に記述していって下さい
;・ｻﾌﾞﾙｰﾁﾝは必ずﾌﾞｯｸﾏｰｸを挿入して処理内容を明確にする事
;<h1/> RB2 動作指令
STG @MR4500              ; RB2 動作指令 Sub Start
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2039                ; ULDより PAUSE要求
ANB R35102               ; During RB2 MOVE
ANB R35106               ; During RB2 RECOVERY MOVE
ANL
SET @MR4502              ; RB2 動作指令 Sub中
CON
SET R35100               ; RB2 MOVE
CON
JMP @MR4505
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR4505
LD R35101                ; RB2 MOVE END
OR R35105                ; RB2 RECOVERY MOVE END
ANL
MPS
LDB R35103               ; RB2 Status Alarm
ANB R35107               ; RB2 Moving Alarm
ANL
RES R35101               ; RB2 MOVE END
CON
RES R35105               ; RB2 RECOVERY MOVE END
CON
SET R35111               ; RB2 動作正常終了
CON
JMP @MR4506
MRD
AND R35103               ; RB2 Status Alarm
MPS
AND= EM1013 #2           ; RB2 動作ｽﾃｰﾀｽ1
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #22 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4600
MRD
AND= EM1013 #1           ; RB2 動作ｽﾃｰﾀｽ1
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #21 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4600
MPP
AND= EM1013 #5           ; RB2 動作ｽﾃｰﾀｽ1
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #20 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4600
MPP
AND R35107               ; RB2 Moving Alarm
MPS
AND= EM1015 #80          ; RB2 動作中ｴﾗｰｺｰﾄﾞ
DW #8000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #50 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4604
MRD
AND= EM1015 #81          ; RB2 動作中ｴﾗｰｺｰﾄﾞ
DW #8000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #51 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4604
MRD
AND= EM1015 #82          ; RB2 動作中ｴﾗｰｺｰﾄﾞ
DW #8400 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #52 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4604
MRD
AND= EM1015 #83          ; RB2 動作中ｴﾗｰｺｰﾄﾞ
DW #8400 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #53 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4604
MRD
AND= EM1015 #85          ; RB2 動作中ｴﾗｰｺｰﾄﾞ
DW #8400 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #54 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4604
MRD
AND= EM1015 #86          ; RB2 動作中ｴﾗｰｺｰﾄﾞ
DW #8400 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #55 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4604
MRD
AND= EM1015 #90          ; RB2 動作中ｴﾗｰｺｰﾄﾞ
DW #8000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #60 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4604
MRD
AND= EM1015 #91          ; RB2 動作中ｴﾗｰｺｰﾄﾞ
DW #8000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #61 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4604
MRD
AND= EM1015 #92          ; RB2 動作中ｴﾗｰｺｰﾄﾞ
DW #8400 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #62 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4604
MRD
AND= EM1015 #93          ; RB2 動作中ｴﾗｰｺｰﾄﾞ
DW #8400 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #63 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4604
MRD
AND= EM1015 #95          ; RB2 動作中ｴﾗｰｺｰﾄﾞ
DW #8400 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #64 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4604
MPP
AND= EM1015 #96          ; RB2 動作中ｴﾗｰｺｰﾄﾞ
DW #8400 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #65 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4604
STG @MR4506
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2039                ; ULDより PAUSE要求
OR CR2002                ; 常時ON
ANL
SET @MR4501              ; RB2 動作指令 Sub End
CON
RES @MR4502              ; RB2 動作指令 Sub中
CON
ENDS
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
ANB CR2002               ; 常時ON
ANL
SET @MR1900              ; Main1 HALT許可
; 動作終了時の異常処理
STG @MR4600
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
RES R35101               ; RB2 MOVE END
CON
RES R35105               ; RB2 RECOVERY MOVE END
CON
RES R35103               ; RB2 Status Alarm
CON
SET @MR100               ; Task2 ERROR
CON
JMP @MR4601
STG @MR4601
AND @MR101               ; Task2 ERROR_End
RES @MR101               ; Task2 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR4506
; 動作中異常発生時の異常処理
STG @MR4604
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
RES R35101               ; RB2 MOVE END
CON
RES R35105               ; RB2 RECOVERY MOVE END
CON
RES R35107               ; RB2 Moving Alarm
CON
SET @MR100               ; Task2 ERROR
CON
JMP @MR4605
STG @MR4605
AND @MR101               ; Task2 ERROR_End
RES @MR101               ; Task2 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR105               ; SW1
DW #1 EM1011             ; RB2 復帰ｺﾏﾝﾄﾞ
CON
ANB R35100               ; RB2 MOVE
SET R35104               ; RB2 RECOVERY MOVE
CON
JMP @MR4505
MRD
AND @MR106               ; SW2
DW #2 EM1011             ; RB2 復帰ｺﾏﾝﾄﾞ
CON
ANB R35100               ; RB2 MOVE
SET R35104               ; RB2 RECOVERY MOVE
CON
JMP @MR4505
MPP
AND @MR107               ; SW3
SET @MR4503              ; RB2 動作指令 Sub HOLD End
CON
DW #3 EM1011             ; RB2 復帰ｺﾏﾝﾄﾞ
CON
ANB R35100               ; RB2 MOVE
SET R35104               ; RB2 RECOVERY MOVE
CON
JMP @MR4505
;<h1/> RB2 初期設定
STG @MR4700              ; RB初期設定 Sub Start
ANB @MR4500              ; RB2 動作指令 Sub Start
ANB @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
ANB @MR4702              ; RB初期設定 Sub中
SET @MR4702              ; RB初期設定 Sub中
CON
JMP @MR4710
; Command 33 ﾄﾚｲ分割数設定
STG @MR4710
DW #33 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM402                ; ﾄﾚｲ分割数Y(1-128)
CON
STA EM1009               ; RB2 数値指定1
CON
LDA DM400                ; ﾄﾚｲ分割数X(1-128)
CON
STA EM1010               ; RB2 数値指定2
CON
SET @MR4500              ; RB2 動作指令 Sub Start
CON
JMP @MR4711
STG @MR4711
ANB @MR4500              ; RB2 動作指令 Sub Start
AND @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
RES @MR4501              ; RB2 動作指令 Sub End
CON
JMP @MR4712
; Command 35 機種初期設定
STG @MR4712
DW #35 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM5260               ; 選択中ｺｰﾄﾞ
CON
STA EM1009               ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2 動作指令 Sub Start
CON
JMP @MR4807
STG @MR4807
ANB @MR4500              ; RB2 動作指令 Sub Start
AND @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
RES @MR4501              ; RB2 動作指令 Sub End
CON
JMP @MR4808
; Command 36 動作ﾓｰﾄﾞ設定
STG @MR4808
DW #36 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM7018               ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
CON
STA EM1009               ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2 動作指令 Sub Start
CON
JMP @MR4715
STG @MR4715
ANB @MR4500              ; RB2 動作指令 Sub Start
AND @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
RES @MR4501              ; RB2 動作指令 Sub End
CON
JMP @MR4800
; Command 1 ﾛﾎﾞｯﾄ速度設定
STG @MR4800
MPS
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
OR R46101                ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
ANL
DW #1 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM7008               ; RB2 速度設定(1-100%)
CON
STA EM1009               ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2 動作指令 Sub Start
CON
JMP @MR4809
MPP
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
DW #1 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM7028               ; ﾒﾝﾃ RB2 速度設定(1-100%)
CON
STA EM1009               ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2 動作指令 Sub Start
CON
JMP @MR4809
STG @MR4809
ANB @MR4500              ; RB2 動作指令 Sub Start
AND @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
RES @MR4501              ; RB2 動作指令 Sub End
CON
JMP @MR4810
; Command 2 ﾛﾎﾞｯﾄ加減速設定
STG @MR4810
MPS
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
OR R46101                ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
ANL
DW #2 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM7010               ; RB2 加減速設定(1-100%)
CON
STA EM1009               ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2 動作指令 Sub Start
CON
JMP @MR4811
MPP
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
DW #2 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM7030               ; ﾒﾝﾃ RB2 加減速設定(1-100%)
CON
STA EM1009               ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2 動作指令 Sub Start
CON
JMP @MR4811
STG @MR4811
ANB @MR4500              ; RB2 動作指令 Sub Start
AND @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
RES @MR4501              ; RB2 動作指令 Sub End
CON
JMP @MR4812
; Command 3 ﾛﾎﾞｯﾄ速度(直線補間)設定
STG @MR4812
MPS
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
OR R46101                ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
ANL
DW #3 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM7012               ; RB2 速度(直線補間)設定(1-200)
CON
STA EM1009               ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2 動作指令 Sub Start
CON
JMP @MR4813
MPP
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
DW #3 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM7032               ; ﾒﾝﾃ RB2 速度(直線補間)設定(1-200
CON
STA EM1009               ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2 動作指令 Sub Start
CON
JMP @MR4813
STG @MR4813
ANB @MR4500              ; RB2 動作指令 Sub Start
AND @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
RES @MR4501              ; RB2 動作指令 Sub End
CON
JMP @MR4814
; Command 4 ﾛﾎﾞｯﾄ加減速(直線補間)設定
STG @MR4814
MPS
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
OR R46101                ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
ANL
DW #4 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM7014               ; RB2 加減速(直線補間)設定(1-250)
CON
STA EM1009               ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2 動作指令 Sub Start
CON
JMP @MR4815
MPP
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
DW #4 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM7034               ; ﾒﾝﾃ RB2 加減速(直線補間)設定(1-2
CON
STA EM1009               ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2 動作指令 Sub Start
CON
JMP @MR4815
STG @MR4815
ANB @MR4500              ; RB2 動作指令 Sub Start
AND @MR4501              ; RB2 動作指令 Sub End
ANB @MR4502              ; RB2 動作指令 Sub中
RES @MR4501              ; RB2 動作指令 Sub End
CON
SET @MR4701              ; RB初期設定 Sub END
CON
RES @MR4702              ; RB初期設定 Sub中
CON
ENDS
;<h1/>HALT
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
OR B2039                 ; ULDより PAUSE要求
AND @MR1900              ; Main1 HALT許可
LD @MR1901               ; Main2 HALT許可
ORB @MR4002              ; Main2 Busy
ANL
TMR @2 #2
CON
AND @T2
OUT @MR005
CON
@SET R42602              ; _Grp1_Task2_ﾎﾟｰｽﾞ許可
LD @MR005
ANB R42602               ; _Grp1_Task2_ﾎﾟｰｽﾞ許可
LD=.D #2 R42600          ; _Grp1_Task0_ﾎﾟｰｽﾞ許可
OR=.D #0 R42600          ; _Grp1_Task0_ﾎﾟｰｽﾞ許可
ANL
TMR #501 #30
CON
AND T501
@SET R42602              ; _Grp1_Task2_ﾎﾟｰｽﾞ許可
LD R42602                ; _Grp1_Task2_ﾎﾟｰｽﾞ許可
ANB @MR001               ; TASK2 ERROR
ORF @MR001               ; TASK2 ERROR
MPS
RES @MR1900              ; Main1 HALT許可
CON
RES @MR1901              ; Main2 HALT許可
MPP
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB B2039                ; ULDより PAUSE要求
ANL
RES R42602               ; _Grp1_Task2_ﾎﾟｰｽﾞ許可
END
ENDH
