DEVICE:53
;MODULE:Group1_Task4
;MODULE_TYPE:0
;SCRIPT_TYPE:
;OneSystem Main-Module
;
;-----------------------------------------
;ModuleName	:	Group1_Task4
;ModuleType	:	Main Module
;Line		:	Sanjo組立ﾗｲﾝ
;Cell		:	固定板ｺﾏ転写装置
;Function	:	転写台UT
;-----------------------------------------
;<<Task LocalDevice>>
;/*項目			/*割付ｴﾘｱ				/*備考
;---------------------------------------------------------------------			
;Emergency		@MR000〜@MR015			Emergency処理時RESET禁止ｴﾘｱ
;Free			@MR100〜@MR915			ﾕｰｻﾞｰﾌﾘｰｴﾘｱ
;HOME			@MR1000〜@MR1515		HOME動作時使用ｴﾘｱ
;MAINTENANCE		@MR2000〜@MR2915		MAINTE動作時使用ｴﾘｱ
;AUTO(Main1)		@MR3000〜@MR3915		AUTO(Main1)動作時使用ｴﾘｱ
;	(Main2)		@MR4000〜@MR4915		AUTO(Main2)動作時使用ｴﾘｱ
;SubRoutine		@MR4500〜@MR6415		ｻﾌﾞﾙｰﾁﾝ共通動作使用ｴﾘｱ
;----------------------------------------------------------------------
;<h1/>Device_Init/ﾃﾞﾊﾞｲｽ初期化
;[内容]
;・非常停止、優先ｴﾗｰ発生時に初期化したいﾃﾞﾊﾞｲｽを指定して下さい
;※本Taskで使用するﾛｰｶﾙﾃﾞﾊﾞｲｽなど
;※STG〜JMPにて使用しているﾃﾞﾊﾞｲｽは必須
LDP R46104
ZRES @MR100 @MR6415
;<h1/>Task_Monitor/ﾀｽｸﾓﾆﾀｰ
LD CR2002
FLIK #50 #50 @MR000
;ON STG Main1
;TYPE EM632.U,EM633.U,@MR000.U,@MR3000.U
;
;FOR EM632 = EM632 TO 160 STEP 16
;	IF @MR3000:EM632 <> 0 THEN
;		BREAK
;	END IF	
;NEXT
;	
;IF EM632 < 160 THEN
;	EM633 = (EM632 / 16) * 100 + DMX(@MR3000:EM632) + #3000
;END IF		
;		
;EM632 = EM632 + 16		
;IF EM632 > 160 THEN		
;	EM632 = 0		
;END IF
LDP @MR000
NCJ #1000
;TYPE EM632.U,EM633.U,@MR000.U,@MR3000.U
;
;FOR EM632 = EM632 TO 160 STEP 16
;
LD CR2002
MOV EM632 EM632
LABEL #2000
LD> EM632 #160
CJ #2001
;	IF @MR3000:EM632 <> 0 THEN
;
LD CR2002
LDA EM632
CON
EXT
CON
STA.L Z12
LD<> @MR3000:Z12 #0
NCJ #2002
;		BREAK
;
LD CR2002
CJ #2003
;	END IF	
;
LABEL #2002
;NEXT
;
LD CR2002
LDA EM632
CON
ADD #16
CON
STA EM632
LDB CR2009
CJ #2000
LABEL #2003
LABEL #2001
;IF EM632 < 160 THEN
;
LD< EM632 #160
NCJ #2004
;	EM633 = (EM632 / 16) * 100 + DMX(@MR3000:EM632) + #3000
;
LD CR2002
LDA EM632
CON
EXT
CON
STA.L Z12
CON
LDA @MR3000:Z12
CON
DMX
CON
STA @VM0
CON
LDA EM632
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM1
CON
LDA @VM0
CON
EXT
CON
ADD.L @VM1
CON
ADD.L +3000
CON
STA EM633
;END IF		
;
LABEL #2004
;EM632 = EM632 + 16		
;
LD CR2002
LDA EM632
CON
EXT
CON
ADD.L +16
CON
STA EM632
;IF EM632 > 160 THEN		
;
LD> EM632 #160
NCJ #2005
;	EM632 = 0		
;
LD CR2002
MOV #0 EM632
;END IF
LABEL #2005
LABEL #1000
;
;ON STG Main2
;TYPE EM634.U,EM635.U,@MR4000.U
;
;FOR EM634 = EM634 TO 80 STEP 16
;	IF @MR4000:EM634 <> 0 THEN
;		BREAK
;	END IF	
;NEXT	
;
;IF EM634 < 80 THEN
;	EM635 = (EM634 / 16) * 100 + DMX(@MR4000:EM634) + #4000
;END IF
;
;EM634 = EM634 + 16		
;
;IF EM634 > 80 THEN
;	EM634 = 0	
;END IF
LDP @MR000
NCJ #1001
;TYPE EM634.U,EM635.U,@MR4000.U
;
;FOR EM634 = EM634 TO 80 STEP 16
;
LD CR2002
MOV EM634 EM634
LABEL #2006
LD> EM634 #80
CJ #2007
;	IF @MR4000:EM634 <> 0 THEN
;
LD CR2002
LDA EM634
CON
EXT
CON
STA.L Z12
LD<> @MR4000:Z12 #0
NCJ #2008
;		BREAK
;
LD CR2002
CJ #2009
;	END IF	
;
LABEL #2008
;NEXT	
;
LD CR2002
LDA EM634
CON
ADD #16
CON
STA EM634
LDB CR2009
CJ #2006
LABEL #2009
LABEL #2007
;IF EM634 < 80 THEN
;
LD< EM634 #80
NCJ #2010
;	EM635 = (EM634 / 16) * 100 + DMX(@MR4000:EM634) + #4000
;
LD CR2002
LDA EM634
CON
EXT
CON
STA.L Z12
CON
LDA @MR4000:Z12
CON
DMX
CON
STA @VM3
CON
LDA EM634
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM4
CON
LDA @VM3
CON
EXT
CON
ADD.L @VM4
CON
ADD.L +4000
CON
STA EM635
;END IF
;
LABEL #2010
;EM634 = EM634 + 16		
;
LD CR2002
LDA EM634
CON
EXT
CON
ADD.L +16
CON
STA EM634
;IF EM634 > 80 THEN
;
LD> EM634 #80
NCJ #2011
;	EM634 = 0	
;
LD CR2002
MOV #0 EM634
;END IF
LABEL #2011
LABEL #1001
;
;ON STG SubRoutine
;TYPE EM636.U,EM637.U,@MR4500.U
;	
;FOR EM636 = EM636 TO 320 STEP 16
;	IF @MR4500:EM636 <> 0 THEN
;		BREAK
;	END IF	
;NEXT
;		
;IF EM636 < 320 THEN
;	EM637 = (EM636 / 16) * 100 + DMX(@MR4500:EM636) + #4500
;END IF
;		
;EM636 = EM636 + 16	
;
;IF EM636 > 320 THEN
;   EM636 = 0	
;END IF
LDP @MR000
NCJ #1002
;TYPE EM636.U,EM637.U,@MR4500.U
;
;FOR EM636 = EM636 TO 320 STEP 16
;
LD CR2002
MOV EM636 EM636
LABEL #2012
LD> EM636 #320
CJ #2013
;	IF @MR4500:EM636 <> 0 THEN
;
LD CR2002
LDA EM636
CON
EXT
CON
STA.L Z12
LD<> @MR4500:Z12 #0
NCJ #2014
;		BREAK
;
LD CR2002
CJ #2015
;	END IF	
;
LABEL #2014
;NEXT
;
LD CR2002
LDA EM636
CON
ADD #16
CON
STA EM636
LDB CR2009
CJ #2012
LABEL #2015
LABEL #2013
;IF EM636 < 320 THEN
;
LD< EM636 #320
NCJ #2016
;	EM637 = (EM636 / 16) * 100 + DMX(@MR4500:EM636) + #4500
;
LD CR2002
LDA EM636
CON
EXT
CON
STA.L Z12
CON
LDA @MR4500:Z12
CON
DMX
CON
STA @VM6
CON
LDA EM636
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM7
CON
LDA @VM6
CON
EXT
CON
ADD.L @VM7
CON
ADD.L +4500
CON
STA EM637
;END IF
;
LABEL #2016
;EM636 = EM636 + 16	
;
LD CR2002
LDA EM636
CON
EXT
CON
ADD.L +16
CON
STA EM636
;IF EM636 > 320 THEN
;
LD> EM636 #320
NCJ #2017
;   EM636 = 0	
;
LD CR2002
MOV #0 EM636
;END IF
LABEL #2017
LABEL #1002
;
;<h1/>Task_Init/ﾀｽｸ初期化
;[本STG内容]
;・本Task起動時に必要な初期化処理を記述して下さい
;・起動Taskの全Init処理終了後、Task_StartのSTGが起動します
STG LR804
ENDS
;<h1/>Task_Start/ﾀｽｸ開始
;[本STG内容]
;・Task起動後、以下運転ﾓｰﾄﾞに従い、各STGにJMPします
;【HOME】	→	LR5200
;【AUTO】	→	LR5400
;【MAINTE】	→	LR5600
;・本STGは追記、修正不要です
STG LR404
MPS
AND R46101
JMP LR5204
MRD
AND R46100
JMP LR5404
MPP
AND R46102
JMP LR5604
;<h1/>Task_Finish/ﾀｽｸ終了
;[本STG内容]
;・各Taskの終了STGになります
;・運転ﾓｰﾄﾞに係わらず終了時は本STGを経由して終了して下さい
;・本STGは追記、修正不要です
STG LR604
RES R41004
CON
ENDS
;<h1/>HOME/原点復帰
;[本STG内容]
;・STG @MR1000の続きから各Taskの原点復帰動作を記述する
;・動作終了時は@MR1515にJMPする事
STG LR5204
JMP @MR1000
STG @MR1000
RES MR104
CON
SET @MR1002
CON
JMP @MR1100
STG @MR1100
LD MR16201
OR MR16210
ANL
JMP @MR1101
STG @MR1101
MPS
ANB R44200
MPS
ANB MR3205
JMP @MR1102
MPP
AND MR3205
JMP @MR1515
MPP
AND R44200
@SET @MR1900
STG @MR1102
RES MR7208
CON
SET MR7209
CON
MPS
LDB MR4205
AND R4205
ANL
JMP @MR1103
MPP
LD MR4205
AND R44200
ANL
@SET @MR1900
STG @MR1103
MPS
ANB R44200
JMP @MR1104
MPP
AND R44200
@SET @MR1900
STG @MR1104
RES MR7206
CON
SET MR7207
CON
MPS
LDB MR4201
ANB MR4203
AND R4201
AND R4203
ANL
JMP @MR1105
MPP
LD MR4201
OR MR4203
AND R44200
ANL
@SET @MR1900
STG @MR1105
MPS
ANB R44200
JMP @MR1106
MPP
AND R44200
@SET @MR1900
STG @MR1106
RES MR7213
CON
RES MR7215
CON
SET MR7214
CON
SET MR7300
CON
MPS
LDB MR4008
ANB MR4010
AND R4008
AND R4010
ANL
JMP @MR1107
MPP
LD MR4010
OR MR4008
AND R44200
ANL
@SET @MR1900
STG @MR1107
RES MR7000
CON
RES MR7003
CON
RES MR7006
CON
RES MR7009
CON
RES MR7012
CON
SET MR7001
CON
SET MR7004
CON
SET MR7007
CON
SET MR7010
CON
SET MR7013
CON
JMP @MR1108
STG @MR1108
SET MR7002
CON
SET MR7005
CON
SET MR7008
CON
SET MR7011
CON
SET MR7014
CON
JMP @MR1109
STG @MR1109
ANB R4300
ANB R4301
ANB R4302
ANB R4303
ANB R4304
ANB R4305
ANB R4306
ANB R4307
ANB R4308
ANB R4309
JMP @MR1110
STG @MR1110
RES MR7002
CON
RES MR7005
CON
RES MR7008
CON
RES MR7011
CON
RES MR7014
CON
JMP @MR1111
STG @MR1111
RES MR8315
CON
RES MR8505
CON
SET MR8506
CON
JMP @MR1515
;Task4原点復帰終了処理
STG @MR1514
MPS
ANB R44200
RES @MR1002
CON
SET MR15004
CON
AND MR15000
JMP LR604
MPP
AND R44200
@SET @MR1900
STG @MR1515
MPS
ANB R44200
SET MR104
CON
RES @MR1002
CON
SET MR15004
CON
AND MR15000
JMP LR604
MPP
AND R44200
@SET @MR1900
;<h1/>AUTO/自動動作
STG LR5404
JMP @MR3000
;<h1/>Auto-Main1/Autoﾒｲﾝﾙｰﾁﾝ1
;[本STG内容]
;・各TaskのAUTO動作を記述して下さい
;・動作ﾓｰﾄﾞは「AUTOAC」に格納されています(1〜32)
;・@MR3000:AUTO_Main1開始、@MR3001:AUTO_Main1完了、@MR3002:AUTO_Main1動作中
STG @MR3000
SET @MR3002
CON
JMP @MR3003
STG @MR3003
MPS
ANB LR101
JMP @MR3100
MPP
AND LR101
JMP @MR3900
;<h1/>転写台　AUTO　Loop先頭
STG @MR3100
MPS
ANB R44200
MPS
ANB MR8005
MPS
AND MR8303
JMP @MR3200
MPP
AND MR8304
JMP @MR3400
MPP
AND MR8005
JMP @MR3400
MPP
AND R44200
@SET @MR1900
;<h1/>ﾙﾐﾗｰ吸着動作
STG @MR3200
AND R4205
RES MR8505
CON
RES MR8506
CON
SET MR8503
CON
JMP @MR3201
STG @MR3201
MPS
ANB R44200
JMP @MR3202
MPP
AND R44200
@SET @MR1900
STG @MR3202
RES MR7207
CON
SET MR7206
CON
MPS
LDB MR4200
ANB MR4202
AND R4200
AND R4202
ANL
TMR @10 #3
CON
AND @T10
JMP @MR3203
MPP
LD MR4200
OR MR4202
AND R44200
ANL
@SET @MR1900
STG @MR3203
MPS
ANB R44200
JMP @MR3204
MPP
AND R44200
@SET @MR1900
STG @MR3204
RES MR7209
CON
SET MR7208
CON
MPS
LD R7208
ANB MR4204
ANL
JMP @MR3205
MPP
LD MR4204
AND R44200
AND CR2003
ANL
@SET @MR1900
STG @MR3205
MPS
ANB R44200
JMP @MR3206
MPP
AND R44200
@SET @MR1900
STG @MR3206
RES MR7214
CON
RES MR7300
CON
SET MR7213
CON
SET MR7215
CON
MPS
LDB MR4007
ANB MR4009
AND R4007
AND R4009
ANL
JMP @MR3207
MPP
LD MR4007
OR MR4009
AND R44200
ANL
@SET @MR1900
STG @MR3207
TMR @11 #2
CON
AND @T11
JMP @MR3208
STG @MR3208
MPS
ANB R44200
JMP @MR3209
MPP
AND R44200
@SET @MR1900
STG @MR3209
RES MR7209
CON
SET MR7208
CON
AND R7208
TMR @12 #3
CON
AND @T12
JMP @MR3210
STG @MR3210
RES MR7008
CON
RES MR7007
CON
SET MR7006
CON
TMH @13 #5
CON
AND @T13
JMP @MR3211
STG @MR3211
RES MR7005
CON
RES MR7004
CON
SET MR7003
CON
TMH @14 #5
CON
AND @T14
JMP @MR3212
STG @MR3212
RES MR7011
CON
RES MR7010
CON
SET MR7009
CON
TMH @15 #5
CON
AND @T15
JMP @MR3213
STG @MR3213
RES MR7002
CON
RES MR7001
CON
SET MR7000
CON
TMH @16 #5
CON
AND @T16
JMP @MR3214
STG @MR3214
RES MR7014
CON
RES MR7013
CON
SET MR7012
CON
TMH @17 #5
CON
AND @T17
JMP @MR3215
STG @MR3215
JMP @MR3300
STG @MR3300
MPS
LDB MR4300
ANB MR4302
ANB MR4304
ANB MR4306
ANB MR4308
AND R4300
AND R4302
AND R4304
AND R4306
AND R4308
ANL
JMP @MR3301
MPP
LD MR4300
OR MR4302
OR MR4304
OR MR4306
OR MR4308
AND R44200
ANL
@SET @MR1900
STG @MR3301
SET MR8505
CON
RES MR8503
CON
ANB MR8303
ANB MR8304
JMP @MR3302
STG @MR3302
MPS
AND R46100
JMP @MR3100
MPP
AND R46102
JMP @MR3303
STG @MR3303
ENDS
;<h1/>ﾙﾐﾗｰ吸着解除動作
STG @MR3400
RES MR8315
CON
RES MR8505
CON
RES MR8506
CON
SET MR8504
CON
JMP @MR3401
STG @MR3401
MPS
ANB R44200
JMP @MR3402
MPP
AND R44200
@SET @MR1900
STG @MR3402
RES MR7213
CON
RES MR7215
CON
SET MR7214
CON
SET MR7300
CON
MPS
LDB MR4008
ANB MR4010
AND R4008
AND R4010
ANL
JMP @MR3403
MPP
LD MR4008
OR MR4010
AND R44200
ANL
@SET @MR1900
STG @MR3403
MPS
ANB R44200
JMP @MR3404
MPP
AND R44200
@SET @MR1900
STG @MR3404
RES MR7208
CON
SET MR7209
CON
MPS
LDB MR4205
AND R4205
ANL
JMP @MR3405
MPP
LD MR4205
AND R44200
ANL
@SET @MR1900
STG @MR3405
MPS
ANB R44200
JMP @MR3406
MPP
AND R44200
@SET @MR1900
STG @MR3406
RES MR7206
CON
SET MR7207
CON
MPS
LDB MR4201
ANB MR4203
AND R4201
AND R4203
ANL
JMP @MR3407
MPP
LD MR4201
OR MR4203
AND R44200
ANL
@SET @MR1900
STG @MR3407
MPS
ANB R44200
JMP @MR3408
MPP
AND R44200
@SET @MR1900
STG @MR3408
RES MR7000
CON
RES MR7003
CON
RES MR7006
CON
RES MR7009
CON
RES MR7012
CON
JMP @MR3409
STG @MR3409
SET MR7001
CON
SET MR7004
CON
SET MR7007
CON
SET MR7010
CON
SET MR7013
CON
JMP @MR3410
STG @MR3410
SET MR7002
CON
SET MR7005
CON
SET MR7008
CON
SET MR7011
CON
SET MR7014
CON
JMP @MR3411
STG @MR3411
TMR @20 #3
CON
AND @T20
JMP @MR3412
STG @MR3412
ANB R4301
ANB R4303
ANB R4305
ANB R4307
ANB R4309
JMP @MR3413
STG @MR3413
RES MR7002
CON
RES MR7005
CON
RES MR7008
CON
RES MR7011
CON
RES MR7014
CON
JMP @MR3414
STG @MR3414
RES MR7001
CON
RES MR7004
CON
RES MR7007
CON
RES MR7010
CON
RES MR7013
CON
JMP @MR3415
STG @MR3415
SET MR8506
CON
RES MR8504
CON
ANB MR8303
ANB MR8304
JMP @MR3500
STG @MR3500
MPS
LD R46100
ANB MR8005
ANL
JMP @MR3100
MRD
AND R46102
JMP @MR3501
MPP
AND MR8005
JMP @MR3900
STG @MR3501
ENDS
;Auto終了処理
STG @MR3900
RES @MR4001
CON
JMP @MR3915
STG @MR3915
MPS
ANB R44200
RES @MR3002
CON
SET MR15004
CON
AND MR15000
JMP LR604
MPP
AND R44200
@SET @MR1900
;<h1/>Auto-Main2/Autoﾒｲﾝﾙｰﾁﾝ2
;[本STG内容]
;・@MR4000の起動はMain1にて行う事
;・@MR4000:AUTO_Main2開始、@MR4001:AUTO_Main2完了、@MR4002:AUTO_Main2動作中
STG @MR4000
SET @MR4002
CON
JMP @MR4003
STG @MR4003
JMP @MR4415
STG @MR4415
SET @MR4001
CON
RES @MR4002
CON
ENDS
;<h1/>MAINTE/ﾒﾝﾃﾅﾝｽ動作
;[本STG内容]
;・各TaskのMAINTE動作を記述して下さい
;・動作ﾓｰﾄﾞは「MAINTEAC*」に格納されています(1〜32)
;・動作終了時は@MR2915にJMPして下さい
STG LR5604
JMP @MR2000
STG @MR2000
SET @MR2002
CON
JMP @MR2003
STG @MR2003
MPS
AND R44200
@SET @MR1900
MPP
ANB R44200
MPS
LD= DM4110 #1
AND CR2003
ANL
JMP @MR2100
MRD
AND= DM4110 #29
@DW #2000 DM3008
CON
AND MR23400
JMP @MR2910
MRD
AND= DM4110 #30
@DW #2150 DM3008
CON
LDP R44915
ORP MR23401
ANL
JMP @MR2910
MPP
AND R47800
JMP @MR2910
;Maintenance　終了
STG @MR2910
MCALL HOLD_REQUEST #1
JMP @MR2915
STG @MR2915
MPS
ANB R44200
SET MR15004
CON
AND MR15000
JMP LR604
MPP
AND R44200
@SET @MR1900
;<h1/> MainTP 表示中ﾍﾟｰｼﾞNo2003
;ｼﾘﾝﾀﾞｰ動作
LD @MR2002
AND= DM3000 #2003
AND R007
MC
LDP MR20200
AND R4205
RES MR7207
CON
SET MR7206
LDP MR20201
RES MR7206
CON
SET MR7207
LDP MR20202
AND R4200
AND R4202
RES MR7209
CON
SET MR7208
LDP MR20203
RES MR7208
CON
SET MR7209
LDP MR20300
RES MR7002
CON
RES MR7001
CON
SET MR7000
LDP MR20301
RES MR7000
CON
SET MR7001
CON
SET MR7002
LD MR7002
TMR @4 #5
CON
AND @T4
RES MR7001
CON
RES MR7002
LDP MR20302
RES MR7005
CON
RES MR7004
CON
SET MR7003
LDP MR20303
RES MR7003
CON
SET MR7004
CON
SET MR7005
LD MR7005
TMR @5 #5
CON
AND @T5
RES MR7004
CON
RES MR7005
LDP MR20304
RES MR7008
CON
RES MR7007
CON
SET MR7006
LDP MR20305
RES MR7006
CON
SET MR7007
CON
SET MR7008
LD MR7008
TMR @6 #5
CON
AND @T6
RES MR7007
CON
RES MR7008
LDP MR20306
RES MR7011
CON
RES MR7010
CON
SET MR7009
LDP MR20307
RES MR7009
CON
SET MR7010
CON
SET MR7011
LD MR7011
TMR @7 #5
CON
AND @T7
RES MR7010
CON
RES MR7011
LDP MR20308
RES MR7014
CON
RES MR7013
CON
SET MR7012
LDP MR20309
RES MR7012
CON
SET MR7013
CON
SET MR7014
LD MR7014
TMR @9 #5
CON
AND @T9
RES MR7013
CON
RES MR7014
LDP MR20204
AND R4201
AND R4203
AND R4205
ANB MR8503
ANB MR8504
SET @MR2100
STG @MR2100
SET @MR3200
CON
AND MR8503
ANB MR8505
JMP @MR2101
STG @MR2101
ANB MR8503
AND MR8505
ANB MR8500
ANB MR8501
ENDS
LDP MR20205
ANB MR8503
ANB MR8504
SET @MR2102
STG @MR2102
SET @MR3400
CON
AND MR8504
ANB MR8506
JMP @MR2103
STG @MR2103
ANB MR8504
AND MR8506
ANB MR8500
ANB MR8501
ENDS
LD MR8503
OUT MR21204
LD MR8504
OUT MR21205
MCR
;<h1/>ERROR
;//*Error Sample
;[使用方法]
;・@DM1にERROR番号を代入
;・@DM2にSensor番号を代入(センサ無しエラーの場合は0)
;・@DM9に復帰SW番号(1〜9、0はSW無し)をdegit単位で4桁入力
;・Task0 ERROR SET(@MR100)でエラー処理開始
;・エラー復帰でTask0 ERROR END(@MR101)がON
;・押下復帰SW番号により左から対応した@MR105,@MR106,@MR107,@MR108のいずれかがON
;・上記ONが成立したらJMPするSTGに対応する処理を記述
;Error0を左側から1,2,3,4の番号に対応した復帰選択SWを出力する
;Error Sample *//
;MyTask Error Process Substance/エラー処理実体
STG @MR100
ANB R39002
MPS
ZRES @MR105 @MR108
CON
LDA @DM9
CON
TBCD
CON
STA @DM10
CON
DISN @DM10 @DM3 #4
MRD
DW #4 @DM0
CON
BMOV @DM0 DM60000 #7
MPP
SET R39000
CON
SET @MR102
CON
JMP @MR103
STG @MR103
AND R39002
AND= DM60008 @DM1
MPS
AND= DM60007 @DM6
SET @MR105
CON
JMP @MR104
MRD
AND= DM60007 @DM5
SET @MR106
CON
JMP @MR104
MRD
AND= DM60007 @DM4
SET @MR107
CON
JMP @MR104
MPP
AND= DM60007 @DM3
SET @MR108
CON
JMP @MR104
STG @MR104
ANB R39002
RES @MR102
CON
SET @MR101
CON
ENDS
;<h1/>SELECT_ACT
;//*Select_ACT Sample
;画面番号33をブザー有りで選択SW番号を左から#5,#10,#0(無し),#34の並びで表示する
STG @MR4104
ANB R39204
SET R39204
CON
MPS
DW #33 @DM31
CON
DW #1 @DM32
CON
DW #5 @DM33
CON
DW #10 @DM34
CON
DW #0 @DM35
CON
DW #34 @DM36
MPP
SET @MR200
CON
JMP @MR4105
STG @MR4105
AND @MR201
RES @MR201
CON
RES R39204
CON
MPS
AND @MR205
JMP @MR4106
MRD
AND @MR206
JMP @MR4107
MRD
AND @MR207
JMP @MR4108
MPP
AND @MR208
JMP @MR4109
;Select_ACT Sample *//
;MyTask Select_ACT Process Substance/SELECT_ACT処理実体
STG @MR200
ANB R39202
MPS
ZRES @MR205 @MR208
CON
DW #4 @DM30
CON
BMOV @DM30 DM60030 #7
MPP
SET R39200
CON
SET @MR202
CON
JMP @MR203
STG @MR203
AND R39202
AND<> DM60037 #0
MPS
AND= DM60037 #1
SET @MR205
CON
JMP @MR204
MRD
AND= DM60037 #2
SET @MR206
CON
JMP @MR204
MRD
AND= DM60037 #3
SET @MR207
CON
JMP @MR204
MPP
AND= DM60037 #4
SET @MR208
CON
JMP @MR204
STG @MR204
ANB R39202
RES @MR202
CON
SET @MR201
CON
ENDS
;<h1/>SELECT_Y_N
;//*Select_Y_N Sample
STG @MR4203
ANB R39104
SET R39104
CON
DW #7 @DM21
CON
DW #0 @DM22
CON
SET @MR300
CON
JMP @MR4204
STG @MR4204
AND @MR301
RES @MR301
CON
RES R39104
CON
MPS
AND @MR306
JMP @MR4205
MPP
ANB @MR306
JMP @MR4206
;*Select_Y_N Sample//
;MyTask Select_Y_N Process Substance/SELECT_Y_N処理実体
STG @MR300
ANB R39102
MPS
ZRES @MR306 @MR307
CON
DW #4 @DM20
CON
BMOV @DM20 DM60020 #3
MPP
SET R39100
CON
SET @MR302
CON
JMP @MR303
STG @MR303
AND R39102
MPS
AND= DM60023 #1
SET @MR306
CON
JMP @MR304
MPP
AND= DM60023 #2
RES @MR306
CON
JMP @MR304
STG @MR304
ANB R39102
RES @MR302
CON
SET @MR301
CON
ENDS
;<h1/>TIMEUP_ERROR
;//*TIMEUP_ERROR Sample
;サンプルセンサ:MR5000=ON AND MR5001 = OFF のいずれかが5sタイムアップしたらTIMEUP_ERROR出力
;エラー復帰後、再度センサ確認
STG @MR4208
MPS
LD MR5000
ANB MR5001
ANL
JMP @MR4215
MPP
LDB MR5000
OR MR5001
ANL
TMR @0 #50
CON
AND @T0
JMP @MR4209
STG @MR4209
ANB R39304
SET R39304
CON
DW #16 @DM41
CON
SET @MR400
CON
JMP @MR4210
STG @MR4210
AND @MR401
RES R39304
CON
RES @MR401
CON
JMP @MR4208
;TIMEUP_ERROR Sample *//
;MyTask TIMEUP_ERROR Process Substance/TIMEUP_ERROR処理実体
STG @MR400
ANB R39302
MPS
DW #4 @DM40
CON
BMOV @DM40 DM60040 #2
MPP
SET R39300
CON
SET @MR402
CON
JMP @MR403
STG @MR403
AND R39302
JMP @MR404
STG @MR404
ANB R39302
RES @MR402
CON
SET @MR401
CON
ENDS
;<h1/>SubRoutines/ｻﾌﾞﾙｰﾁﾝ
;[記述方法]
;・ｻﾌﾞﾙｰﾁﾝは本ﾌﾞｯｸﾏｰｸから下に記述していって下さい
;・ｻﾌﾞﾙｰﾁﾝは必ずﾌﾞｯｸﾏｰｸを挿入して処理内容を明確にする事
;<h1/>HALT
LD R44200
AND @MR1900
LD @MR1901
ORB @MR4002
ANL
TMR @2 #2
CON
AND @T2
@SET R42604
LD R42604
RES @MR1900
CON
RES @MR1901
END
ENDH
