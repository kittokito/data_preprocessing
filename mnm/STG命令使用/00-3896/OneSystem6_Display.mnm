DEVICE:53
;MODULE:OneSystem6_Display
;MODULE_TYPE:0
;OneSystem Master-Module
;
;-----------------------------------------
;ModuleName	:	OneSystem6_Display
;ModuleType	:	Master Module
;Function	:	Lamp/Buzzer
;-----------------------------------------
;
;Copylight(C) 2011 SEIKO EPSON Corp. All rights reserved.
;<h1/>*Lamp and Buzzer/ﾗﾝﾌﾟ|ﾌﾞｻﾞｰ制御
;<h1/>Group1/ｸﾞﾙｰﾌﾟ1
;StartSw_Lamp/ｽﾀｰﾄSWﾗﾝﾌﾟ
;・点灯：動作中
;・点滅：ｴﾗｰ発生中、安全ｶﾊﾞｰﾛｯｸ解除中、ｴｱｰ圧低下中、ﾒﾝﾃﾅﾝｽ動作Post中
LD R46208
OR R46200
OR R50700
AND CR2006
LDB R46103
LD R46100
OR R46101
ANB R46208
ANB R46200
ANB R50700
LD R47500
LD= DM2020 #1
ANB R46208
ANB R46200
ANB R50700
LD= DM2020 #2
AND CR2006
ORL
ANL
ORL
ANL
ORL
OUT R44500
;StopSw_Lamp/ｽﾄｯﾌﾟSWﾗﾝﾌﾟ
;・点灯：定停止移行中
LDB R46104
ANB R46103
LD R46101
OR R46100
AND R46106
LD R46102
AND R47800
ORL
ANL
OUT R44501
;CoverSw_Lamp/ｶﾊﾞｰSWﾗﾝﾌﾟ
;・点灯：安全ｶﾊﾞｰ開中
;・点滅：安全ｶﾊﾞｰ開処理中
LD R46700
LDB R46200
AND CR2006
OR R46200
ANL
OUT R44502
OUT R44511
;AreaSw_Lamp/ｴﾘｱｾﾝｻ復帰SWﾗﾝﾌﾟ
;・点滅：ｴﾘｱｾﾝｻ遮断処理中
LD R40300
ANB R46104
AND R46300
MPS
LD<= DM9211 #2
AND CR2006
ANL
OUT R44505
MPP
LD= DM9211 #2
AND CR2006
ANL
OUT R44506
;Continue StartSw_Lamp/3連ｽﾀｰﾄSWﾗﾝﾌﾟ
;・点滅：安全ｶﾊﾞｰ開中
LD R46200
AND CR2006
OUT R44510
;Post/ﾒﾝﾃ動作区切り
;・ﾒﾝﾃ動作時のみ有効
;・Post SETでｽﾀｰﾄSW待ち状態
;・ｽﾀｰﾄSW押下でPost_OK成立
LDB R46102
LDB R46208
ANB R46200
ANB R46300
ANB R50700
AND R47600
LD R44400
OR R50800
ANL
ORL
OUT R47608
LD R46102
MPS
LD R47600
ANB R47608
ANL
MOV #2 DM2020
MPP
LDB R47600
OR R50800
ANL
MOV #1 DM2020
;Buzzer/ﾌﾞｻﾞｰ処理
;・非常停止、ｴｱｰ元圧低下などCPU全体に係わるﾌﾞｻﾞｰ出力はﾒｲﾝTP管轄のみ
;<ﾌﾞｻﾞｰOFF要求>
LDP R44403
ORF R46104
ORF R50700
ORF R46208
ORF R46300
ORF R47700
LDF R48208
AND= DM2010 #0
ORL
ORF R48209
ORF R48210
ORF R48211
RES @R100
LDF R48208
AND @R200
ORP R44403
RES @R200
;<ﾌﾞｻﾞｰON要求>
LDP R46104
ORP R50700
ORP R46208
LDP R46300
AND R59700
ORL
ORP R47700
LDP R48208
AND= DM2010 #0
ORL
ORP R48209
ORP R48210
ORP R48211
SET @R100
LDP R48208
AND= DM2010 #1
SET @R200
;ﾌﾞｻﾞｰは出力ONが優先とする
;ﾌﾞｻﾞｰﾌﾘｯｶ要求(WARNING_DISP)中に別ﾌﾞｻﾞｰON要求が来たらそちらを優先
LD @R100
OR @R200
MPS
AND CR2006
OUT R44503
MPP
LDB @R100
AND CR2006
OR @R100
ANL
OUT R44504
;<h1/>*Tower Lamp/ﾀﾜｰﾗﾝﾌﾟ制御
;指定範囲外ﾁｪｯｸ(異常値ならJIS準拠に)
LD< DM9210 #0
OR> DM9210 #10
MOV #0 DM9210
;●標準ﾀﾜｰﾗﾝﾌﾟ(JIS準拠)
;ﾕｰｻﾞｰｶｽﾀﾑﾀﾜｰﾗﾝﾌﾟ未使用時に使用
LD= DM9210 #0
MC
;<h1/>Red/ﾀﾜｰﾗﾝﾌﾟ赤
;・点灯：非常停止中
;・点滅：ｴﾗｰ発生中、ｴｱｰ圧低下中
LD R46104
OR R46208
OR R48408
OR R48409
OR R48410
OR R48411
OUT R44507
;<h1/>Green/ﾀﾜｰﾗﾝﾌﾟ緑
;・点灯：定停止中
;・点滅：安全ｶﾊﾞｰﾛｯｸ解除中、ｴﾘｱｾﾝｻ遮断QP、ｴｱｰ圧低下QP
LDB R46104
AND R46103
ANB R46200
ANB R46300
ANB R50700
LD R46200
OR R46300
OR R50700
AND CR2006
ORL
OUT R44508
;<h1/>Yellow/ﾀﾜｰﾗﾝﾌﾟ黄
;・点灯：動作中
;・点滅：ｵｰﾊﾞｰﾌﾛｰ状態（AUTOのみ）
LDB R46104
LD R46100
LD R47708
AND CR2006
ORB R47708
ANL
OR R46101
LD R46102
AND R47500
ORL
ANL
OUT R44509
MCR
END
ENDH
