DEVICE:53
;MODULE:Group1_Task1
;MODULE_TYPE:0
;SCRIPT_TYPE:
;OneSystem Main-Module
;
;-----------------------------------------
;ModuleName	:	Group1_Task1
;ModuleType	:	Main Module
;Line		:	Sanjo組立ﾗｲﾝ
;Cell		:	固定板ｺﾏ転写装置
;Function	:	転写UT
;-----------------------------------------
;<<Task LocalDevice>>
;/*項目			/*割付ｴﾘｱ				/*備考
;---------------------------------------------------------------------			
;Emergency		@MR000〜@MR015			Emergency処理時RESET禁止ｴﾘｱ
;Free			@MR100〜@MR915			ﾕｰｻﾞｰﾌﾘｰｴﾘｱ
;HOME			@MR1000〜@MR1515		HOME動作時使用ｴﾘｱ
;MAINTENANCE		@MR2000〜@MR2915		MAINTE動作時使用ｴﾘｱ
;AUTO(Main1)		@MR3000〜@MR3915		AUTO(Main1)動作時使用ｴﾘｱ
;	(Main2)		@MR4000〜@MR4915		AUTO(Main2)動作時使用ｴﾘｱ
;SubRoutine		@MR4500〜@MR6415		ｻﾌﾞﾙｰﾁﾝ共通動作使用ｴﾘｱ
;----------------------------------------------------------------------
;<h1/>Device_Init/ﾃﾞﾊﾞｲｽ初期化
;[内容]
;・非常停止、優先ｴﾗｰ発生時に初期化したいﾃﾞﾊﾞｲｽを指定して下さい
;※本Taskで使用するﾛｰｶﾙﾃﾞﾊﾞｲｽなど
;※STG〜JMPにて使用しているﾃﾞﾊﾞｲｽは必須
LDP R46104
ZRES @MR100 @MR6415
;<h1/>Task_Monitor/ﾀｽｸﾓﾆﾀｰ
LD CR2002
FLIK #50 #50 @MR000
;ON STG Main1
;TYPE EM608.U,EM609.U,@MR000.U,@MR3000.U
;
;FOR EM608 = EM608 TO 160 STEP 16
;	IF @MR3000:EM608 <> 0 THEN
;		BREAK
;	END IF	
;NEXT
;	
;IF EM608 < 160 THEN
;	EM609 = (EM608 / 16) * 100 + DMX(@MR3000:EM608) + #3000
;END IF		
;		
;EM608 = EM608 + 16		
;IF EM608 > 160 THEN		
;	EM608 = 0		
;END IF
LDP @MR000
NCJ #1000
;TYPE EM608.U,EM609.U,@MR000.U,@MR3000.U
;
;FOR EM608 = EM608 TO 160 STEP 16
;
LD CR2002
MOV EM608 EM608
LABEL #2000
LD> EM608 #160
CJ #2001
;	IF @MR3000:EM608 <> 0 THEN
;
LD CR2002
LDA EM608
CON
EXT
CON
STA.L Z12
LD<> @MR3000:Z12 #0
NCJ #2002
;		BREAK
;
LD CR2002
CJ #2003
;	END IF	
;
LABEL #2002
;NEXT
;
LD CR2002
LDA EM608
CON
ADD #16
CON
STA EM608
LDB CR2009
CJ #2000
LABEL #2003
LABEL #2001
;IF EM608 < 160 THEN
;
LD< EM608 #160
NCJ #2004
;	EM609 = (EM608 / 16) * 100 + DMX(@MR3000:EM608) + #3000
;
LD CR2002
LDA EM608
CON
EXT
CON
STA.L Z12
CON
LDA @MR3000:Z12
CON
DMX
CON
STA @VM0
CON
LDA EM608
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM1
CON
LDA @VM0
CON
EXT
CON
ADD.L @VM1
CON
ADD.L +3000
CON
STA EM609
;END IF		
;
LABEL #2004
;EM608 = EM608 + 16		
;
LD CR2002
LDA EM608
CON
EXT
CON
ADD.L +16
CON
STA EM608
;IF EM608 > 160 THEN		
;
LD> EM608 #160
NCJ #2005
;	EM608 = 0		
;
LD CR2002
MOV #0 EM608
;END IF
LABEL #2005
LABEL #1000
;
;ON STG Main2
;TYPE EM610.U,EM611.U,@MR4000.U
;
;FOR EM610 = EM610 TO 80 STEP 16
;	IF @MR4000:EM610 <> 0 THEN
;		BREAK
;	END IF	
;NEXT	
;
;IF EM610 < 80 THEN
;	EM611 = (EM610 / 16) * 100 + DMX(@MR4000:EM610) + #4000
;END IF
;
;EM610 = EM610 + 16		
;
;IF EM610 > 80 THEN
;	EM610 = 0	
;END IF
LDP @MR000
NCJ #1001
;TYPE EM610.U,EM611.U,@MR4000.U
;
;FOR EM610 = EM610 TO 80 STEP 16
;
LD CR2002
MOV EM610 EM610
LABEL #2006
LD> EM610 #80
CJ #2007
;	IF @MR4000:EM610 <> 0 THEN
;
LD CR2002
LDA EM610
CON
EXT
CON
STA.L Z12
LD<> @MR4000:Z12 #0
NCJ #2008
;		BREAK
;
LD CR2002
CJ #2009
;	END IF	
;
LABEL #2008
;NEXT	
;
LD CR2002
LDA EM610
CON
ADD #16
CON
STA EM610
LDB CR2009
CJ #2006
LABEL #2009
LABEL #2007
;IF EM610 < 80 THEN
;
LD< EM610 #80
NCJ #2010
;	EM611 = (EM610 / 16) * 100 + DMX(@MR4000:EM610) + #4000
;
LD CR2002
LDA EM610
CON
EXT
CON
STA.L Z12
CON
LDA @MR4000:Z12
CON
DMX
CON
STA @VM3
CON
LDA EM610
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM4
CON
LDA @VM3
CON
EXT
CON
ADD.L @VM4
CON
ADD.L +4000
CON
STA EM611
;END IF
;
LABEL #2010
;EM610 = EM610 + 16		
;
LD CR2002
LDA EM610
CON
EXT
CON
ADD.L +16
CON
STA EM610
;IF EM610 > 80 THEN
;
LD> EM610 #80
NCJ #2011
;	EM610 = 0	
;
LD CR2002
MOV #0 EM610
;END IF
LABEL #2011
LABEL #1001
;
;ON STG SubRoutine
;TYPE EM612.U,EM613.U,@MR4500.U
;	
;FOR EM612 = EM612 TO 320 STEP 16
;	IF @MR4500:EM612 <> 0 THEN
;		BREAK
;	END IF	
;NEXT
;		
;IF EM612 < 320 THEN
;	EM613 = (EM612 / 16) * 100 + DMX(@MR4500:EM612) + #4500
;END IF
;		
;EM612 = EM612 + 16	
;
;IF EM612 > 320 THEN
;   EM612 = 0	
;END IF
LDP @MR000
NCJ #1002
;TYPE EM612.U,EM613.U,@MR4500.U
;
;FOR EM612 = EM612 TO 320 STEP 16
;
LD CR2002
MOV EM612 EM612
LABEL #2012
LD> EM612 #320
CJ #2013
;	IF @MR4500:EM612 <> 0 THEN
;
LD CR2002
LDA EM612
CON
EXT
CON
STA.L Z12
LD<> @MR4500:Z12 #0
NCJ #2014
;		BREAK
;
LD CR2002
CJ #2015
;	END IF	
;
LABEL #2014
;NEXT
;
LD CR2002
LDA EM612
CON
ADD #16
CON
STA EM612
LDB CR2009
CJ #2012
LABEL #2015
LABEL #2013
;IF EM612 < 320 THEN
;
LD< EM612 #320
NCJ #2016
;	EM613 = (EM612 / 16) * 100 + DMX(@MR4500:EM612) + #4500
;
LD CR2002
LDA EM612
CON
EXT
CON
STA.L Z12
CON
LDA @MR4500:Z12
CON
DMX
CON
STA @VM6
CON
LDA EM612
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM7
CON
LDA @VM6
CON
EXT
CON
ADD.L @VM7
CON
ADD.L +4500
CON
STA EM613
;END IF
;
LABEL #2016
;EM612 = EM612 + 16	
;
LD CR2002
LDA EM612
CON
EXT
CON
ADD.L +16
CON
STA EM612
;IF EM612 > 320 THEN
;
LD> EM612 #320
NCJ #2017
;   EM612 = 0	
;
LD CR2002
MOV #0 EM612
;END IF
LABEL #2017
LABEL #1002
;
;<h1/>Task_Init/ﾀｽｸ初期化
;[本STG内容]
;・本Task起動時に必要な初期化処理を記述して下さい
;・起動Taskの全Init処理終了後、Task_StartのSTGが起動します
STG LR801
ENDS
;<h1/>Task_Start/ﾀｽｸ開始
;[本STG内容]
;・Task起動後、以下運転ﾓｰﾄﾞに従い、各STGにJMPします
;【HOME】	→	LR5200
;【AUTO】	→	LR5400
;【MAINTE】	→	LR5600
;・本STGは追記、修正不要です
STG LR401
MPS
AND R46101
JMP LR5201
MRD
AND R46100
JMP LR5401
MPP
AND R46102
JMP LR5601
;<h1/>Task_Finish/ﾀｽｸ終了
;[本STG内容]
;・各Taskの終了STGになります
;・運転ﾓｰﾄﾞに係わらず終了時は本STGを経由して終了して下さい
;・本STGは追記、修正不要です
STG LR601
RES R41001
CON
ENDS
;<h1/>HOME/原点復帰
;[本STG内容]
;・STG @MR1000の続きから各Taskの原点復帰動作を記述する
;・動作終了時は@MR1515にJMPする事
STG LR5201
JMP @MR1000
STG @MR1000
AND MR3002
RES MR201
CON
RES MR101
CON
SET MR9001
CON
SET @MR1002
CON
JMP @MR1100
;RB3 原点位置移動
STG @MR1100
RES MR7210
CON
MPS
LDB MR4502
AND R4502
ANL
JMP @MR1101
MPP
LD MR4502
AND R44200
ANL
@SET @MR1900
STG @MR1101
@SET DM10723.4
@RES DM10723.15
JMP @MR1102
STG @MR1102
AND MR3002
ANB R35208
ANB R35209
ANB R35210
JMP @MR1103
STG @MR1103
SET R35208
CON
JMP @MR1104
STG @MR1104
ANB R35210
AND R35209
RES R35208
CON
RES R35209
CON
JMP @MR1105
STG @MR1105
MPS
ANB R35203
JMP @MR1106
MPP
AND R35203
JMP @MR4200
STG @MR4200
@SET @MR1900
CON
ANB R39004
SET R39004
CON
DW #1000 @DM9
CON
DW #21 @DM1
CON
DW #0 @DM2
CON
SET @MR100
CON
JMP @MR4201
STG @MR4201
AND @MR101
RES @MR101
CON
RES @MR1900
CON
RES R39004
CON
JMP @MR4202
STG @MR4202
RES R35203
CON
AND @MR105
JMP @MR1102
STG @MR1106
SET MR201
CON
JMP @MR1107
;RB3 待機位置移動
STG @MR1107
AND MR3002
AND DM10523.1
ANB R35208
ANB R35209
ANB R35210
JMP @MR1108
STG @MR1108
DW #10 EM1304
CON
SET R35200
CON
JMP @MR1109
STG @MR1109
ANB R35202
AND R35201
RES R35200
CON
RES R35201
CON
JMP @MR1110
STG @MR1110
MPS
ANB R35203
MPS
AND MR16210
JMP @MR1111
MPP
ANB MR16210
TMR @5 #3
CON
AND @T5
JMP @MR1107
MPP
AND R35203
JMP @MR4203
STG @MR4203
@SET @MR1900
CON
ANB R39004
SET R39004
CON
DW #1000 @DM9
CON
DW #21 @DM1
CON
DW #0 @DM2
CON
SET @MR100
CON
JMP @MR4204
STG @MR4204
AND @MR101
RES @MR101
CON
RES @MR1900
CON
RES R39004
CON
JMP @MR4205
STG @MR4205
RES R35203
CON
AND @MR105
JMP @MR1107
STG @MR1111
JMP @MR1200
;RB2 原点位置移動
STG @MR1200
@SET DM10715.4
JMP @MR1201
STG @MR1201
AND MR3001
LD MR16201
OR MR16210
ANL
ANB R35108
ANB R35109
ANB R35110
JMP @MR1202
STG @MR1202
SET R35108
CON
JMP @MR1203
STG @MR1203
ANB R35110
AND R35109
RES R35108
CON
RES R35109
CON
JMP @MR1204
STG @MR1204
MPS
ANB R35103
JMP @MR1205
MPP
AND R35103
JMP @MR4206
STG @MR4206
@SET @MR1900
CON
ANB R39004
SET R39004
CON
DW #1000 @DM9
CON
DW #20 @DM1
CON
DW #0 @DM2
CON
SET @MR100
CON
JMP @MR4207
STG @MR4207
AND @MR101
RES @MR101
CON
RES @MR1900
CON
RES R39004
CON
JMP @MR4208
STG @MR4208
RES R35103
CON
AND @MR105
JMP @MR1201
STG @MR1205
JMP @MR1206
;RB2 待機位置移動
STG @MR1206
JMP @MR1207
STG @MR1207
AND MR3001
AND DM10515.1
ANB R35100
ANB R35101
ANB R35102
JMP @MR1208
STG @MR1208
DW #15 EM1302
CON
SET R35100
CON
JMP @MR1209
STG @MR1209
ANB R35102
AND R35101
RES R35100
CON
RES R35101
CON
JMP @MR1210
STG @MR1210
MPS
ANB R35103
MPS
AND MR16115
JMP @MR1211
MPP
ANB MR16115
TMR @6 #3
CON
AND @T6
JMP @MR1207
MPP
AND R35103
JMP @MR4209
STG @MR4209
@SET @MR1900
CON
ANB R39004
SET R39004
CON
DW #1000 @DM9
CON
DW #20 @DM1
CON
DW #0 @DM2
CON
SET @MR100
CON
JMP @MR4210
STG @MR4210
AND @MR101
RES @MR101
CON
RES @MR1900
CON
RES R39004
CON
JMP @MR4211
STG @MR4211
RES R35103
CON
AND @MR105
JMP @MR1207
STG @MR1211
JMP @MR1515
;Task1原点復帰終了処理
STG @MR1514
MPS
ANB R44200
RES @MR1002
CON
SET MR15001
CON
AND MR15000
JMP LR601
MPP
AND R44200
@SET @MR1900
STG @MR1515
MPS
ANB R44200
SET MR101
CON
RES @MR1002
CON
SET MR15001
CON
AND MR15000
JMP LR601
MPP
AND R44200
@SET @MR1900
;<h1/>AUTO/自動動作
STG LR5401
JMP @MR3000
;<h1/>Auto-Main1/Autoﾒｲﾝﾙｰﾁﾝ1
;[本STG内容]
;・各TaskのAUTO動作を記述して下さい
;・動作ﾓｰﾄﾞは「AUTOAC」に格納されています(1〜32)
;・@MR3000:AUTO_Main1開始、@MR3001:AUTO_Main1完了、@MR3002:AUTO_Main1動作中
STG @MR3000
SET @MR3002
CON
JMP @MR3003
STG @MR3003
MPS
ANB LR101
JMP @MR3100
MPP
AND LR101
JMP @MR3900
;<h1/>転写ﾍｯﾄﾞ　AUTO　Loop先頭
STG @MR3100
MPS
ANB R44200
MPS
LDB MR8005
AND MR8100
AND< DM3520 #10
AND< DM3522 #20
ANB MR8203
ANB MR8204
AND MR8315
ANL
JMP @MR3200
MPP
AND MR8005
JMP @MR3900
MPP
AND R44200
@SET @MR1900
STG @MR3200
SET R47000
CON
SET MR8202
CON
JMP @MR3201
STG @MR3201
AND MR3001
AND DM10515.1
AND DM10515.0
ANB DM10515.2
ANB R35100
ANB R35101
ANB R35102
JMP @MR3202
STG @MR3202
@CAL+ DM3520 #1 EM1302
JMP @MR3203
STG @MR3203
SET R35100
CON
AND R35102
JMP @MR3204
STG @MR3204
ANB R35102
AND R35101
RES R35100
CON
RES R35101
CON
JMP @MR3205
STG @MR3205
MPS
ANB R35103
MPS
AND MR3014
JMP @MR3206
MPP
ANB MR3014
TMR @7 #3
CON
AND @T7
JMP @MR3201
MPP
AND R35103
JMP @MR4300
STG @MR4300
@SET @MR1900
CON
ANB R39004
SET R39004
CON
DW #1000 @DM9
CON
DW #20 @DM1
CON
DW #0 @DM2
CON
SET @MR100
CON
JMP @MR4301
STG @MR4301
AND @MR101
RES @MR101
CON
RES @MR1900
CON
RES R39004
CON
JMP @MR4302
STG @MR4302
RES R35103
CON
AND @MR105
JMP @MR3201
STG @MR3206
JMP @MR3207
STG @MR3207
JMP @MR3208
STG @MR3208
JMP @MR3300
STG @MR3300
JMP @MR3301
STG @MR3301
ANB MR8115
MPS
LDB R44200
AND< DM3520 #10
AND< DM3522 #20
AND MR3205
AND MR8315
ANL
JMP @MR3302
MPP
AND R44200
@SET @MR1900
STG @MR3302
AND MR3002
AND DM10523.1
ANB R35208
ANB R35209
ANB R35210
JMP @MR3303
STG @MR3303
DW #2 EM1304
CON
SET R35200
CON
AND R35202
JMP @MR3304
STG @MR3304
ANB R35202
AND R35201
RES R35200
CON
RES R35201
CON
JMP @MR3305
STG @MR3305
MPS
ANB R35203
MPS
AND MR16202
JMP @MR3306
MPP
ANB MR16202
TMR @8 #3
CON
AND @T8
JMP @MR3302
MPP
AND R35203
JMP @MR4303
STG @MR4303
@SET @MR1900
CON
ANB R39004
SET R39004
CON
DW #1000 @DM9
CON
DW #21 @DM1
CON
DW #0 @DM2
CON
SET @MR100
CON
JMP @MR4304
STG @MR4304
AND @MR101
RES @MR101
CON
RES @MR1900
CON
RES R39004
CON
JMP @MR4305
STG @MR4305
RES R35203
CON
AND @MR105
JMP @MR3302
STG @MR3306
JMP @MR3307
STG @MR3307
AND MR3002
AND DM10523.1
ANB R35208
ANB R35209
ANB R35210
JMP @MR3308
STG @MR3308
DW #3 EM1304
CON
SET R35200
CON
AND R35202
JMP @MR3309
STG @MR3309
ANB R35202
AND R35201
RES R35200
CON
RES R35201
CON
JMP @MR3310
STG @MR3310
MPS
ANB R35203
MPS
AND MR16203
JMP @MR3311
MPP
ANB MR16203
TMR @9 #3
CON
AND @T9
JMP @MR3307
MPP
AND R35203
JMP @MR4306
STG @MR4306
@SET @MR1900
CON
ANB R39004
SET R39004
CON
DW #1000 @DM9
CON
DW #21 @DM1
CON
DW #0 @DM2
CON
SET @MR100
CON
JMP @MR4307
STG @MR4307
AND @MR101
RES @MR101
CON
RES @MR1900
CON
RES R39004
CON
JMP @MR4308
STG @MR4308
RES R35203
CON
AND @MR105
JMP @MR3307
STG @MR3311
JMP @MR3312
STG @MR3312
TMR @20 DM7004
CON
AND @T20
JMP @MR3313
STG @MR3313
AND MR3002
AND DM10523.1
ANB R35208
ANB R35209
ANB R35210
JMP @MR3314
STG @MR3314
DW #4 EM1304
CON
SET R35200
CON
AND R35202
JMP @MR3315
STG @MR3315
ANB R35202
AND R35201
RES R35200
CON
RES R35201
CON
JMP @MR3400
STG @MR3400
MPS
ANB R35203
MPS
AND MR16204
JMP @MR3401
MPP
ANB MR16204
TMR @10 #3
CON
AND @T10
JMP @MR3313
MPP
AND R35203
JMP @MR4309
STG @MR4309
@SET @MR1900
CON
ANB R39004
SET R39004
CON
DW #1000 @DM9
CON
DW #21 @DM1
CON
DW #0 @DM2
CON
SET @MR100
CON
JMP @MR4310
STG @MR4310
AND @MR101
RES @MR101
CON
RES @MR1900
CON
RES R39004
CON
JMP @MR4311
STG @MR4311
RES R35203
CON
AND @MR105
JMP @MR3313
STG @MR3401
JMP @MR3402
STG @MR3402
AND MR3002
AND DM10523.1
ANB R35208
ANB R35209
ANB R35210
JMP @MR3403
STG @MR3403
DW #1 EM1304
CON
SET R35200
CON
AND R35202
JMP @MR3404
STG @MR3404
ANB R35202
AND R35201
RES R35200
CON
RES R35201
CON
JMP @MR3405
STG @MR3405
MPS
ANB R35203
MPS
AND MR16201
@INC DM3520
@INC DM3522
JMP @MR3406
MPP
ANB MR16201
TMR @11 #3
CON
AND @T11
JMP @MR3402
MPP
AND R35203
JMP @MR4312
STG @MR4312
@SET @MR1900
CON
ANB R39004
SET R39004
CON
DW #1000 @DM9
CON
DW #21 @DM1
CON
DW #0 @DM2
CON
SET @MR100
CON
JMP @MR4310
STG @MR4313
AND @MR101
RES @MR101
CON
RES @MR1900
CON
RES R39004
CON
JMP @MR4311
STG @MR4314
RES R35203
CON
AND @MR105
JMP @MR3402
STG @MR3406
MPS
AND>= DM3522 #20
JMP @MR3408
MPP
AND< DM3522 #20
JMP @MR3407
STG @MR3407
MPS
AND>= DM3520 #10
JMP @MR3409
MPP
AND< DM3520 #10
JMP @MR3410
STG @MR3408
RES MR8315
CON
SET MR8204
CON
JMP @MR3410
STG @MR3409
RES MR8315
CON
SET MR8203
CON
JMP @MR3410
STG @MR3410
JMP @MR3411
STG @MR3411
MPS
LDB R44200
AND MR8101
ANL
JMP @MR3412
MPP
AND R44200
@SET @MR1900
STG @MR3412
AND MR3001
AND DM10515.1
AND DM10515.0
ANB DM10515.2
ANB R35100
ANB R35101
ANB R35102
JMP @MR3413
STG @MR3413
MPS
AND MR16001
@MOV #11 EM1302
MRD
AND MR16002
@MOV #12 EM1302
MRD
AND MR16003
@MOV #13 EM1302
MRD
AND MR16004
@MOV #14 EM1302
MPP
SET R35100
CON
AND R35102
JMP @MR3414
STG @MR3414
ANB R35102
AND R35101
RES R35100
CON
RES R35101
CON
JMP @MR3415
STG @MR3415
MPS
ANB R35203
MPS
AND MR3015
JMP @MR3500
MPP
ANB MR3015
TMR @12 #3
CON
AND @T12
JMP @MR3412
MPP
AND R35203
JMP @MR4400
STG @MR4400
@SET @MR1900
CON
ANB R39004
SET R39004
CON
DW #1000 @DM9
CON
DW #20 @DM1
CON
DW #0 @DM2
CON
SET @MR100
CON
JMP @MR4401
STG @MR4401
AND @MR101
RES @MR101
CON
RES @MR1900
CON
RES R39004
CON
JMP @MR4402
STG @MR4402
RES R35203
CON
AND @MR105
JMP @MR3412
STG @MR3500
JMP @MR3501
STG @MR3501
MPS
LDB R44200
AND MR8100
AND R4406
ANL
JMP @MR3502
MPP
AND R44200
@SET @MR1900
STG @MR3502
AND MR3002
AND DM10523.1
ANB R35208
ANB R35209
ANB R35210
JMP @MR3503
STG @MR3503
DW #6 EM1304
CON
SET R35200
CON
AND R35202
JMP @MR3504
STG @MR3504
ANB R35202
AND R35201
RES R35200
CON
RES R35201
CON
JMP @MR3505
STG @MR3505
MPS
ANB R35203
MPS
AND MR16206
JMP @MR3506
MPP
ANB MR16206
TMR @13 #3
CON
AND @T13
JMP @MR3502
MPP
AND R35203
JMP @MR4403
STG @MR4403
@SET @MR1900
CON
ANB R39004
SET R39004
CON
DW #1000 @DM9
CON
DW #21 @DM1
CON
DW #0 @DM2
CON
SET @MR100
CON
JMP @MR4404
STG @MR4404
AND @MR101
RES @MR101
CON
RES @MR1900
CON
RES R39004
CON
JMP @MR4405
STG @MR4405
RES R35203
CON
AND @MR105
JMP @MR3502
STG @MR3506
JMP @MR3507
STG @MR3507
AND MR3002
AND DM10523.1
ANB R35208
ANB R35209
ANB R35210
JMP @MR3508
STG @MR3508
DW #7 EM1304
CON
SET R35200
CON
AND R35202
JMP @MR3509
STG @MR3509
ANB R35202
AND R35201
RES R35200
CON
RES R35201
CON
JMP @MR3510
STG @MR3510
MPS
ANB R35203
MPS
AND MR16207
JMP @MR3511
MPP
ANB MR16207
TMR @14 #3
CON
AND @T14
JMP @MR3507
MPP
AND R35203
JMP @MR4406
STG @MR4406
@SET @MR1900
CON
ANB R39004
SET R39004
CON
DW #1000 @DM9
CON
DW #21 @DM1
CON
DW #0 @DM2
CON
SET @MR100
CON
JMP @MR4407
STG @MR4407
AND @MR101
RES @MR101
CON
RES @MR1900
CON
RES R39004
CON
JMP @MR4408
STG @MR4408
RES R35203
CON
AND @MR105
JMP @MR3507
STG @MR3511
JMP @MR3512
STG @MR3512
TMR @21 DM7006
CON
AND @T21
JMP @MR3513
STG @MR3513
AND MR3002
AND DM10523.1
ANB R35208
ANB R35209
ANB R35210
JMP @MR3514
STG @MR3514
DW #8 EM1304
CON
SET R35200
CON
AND R35202
JMP @MR3515
STG @MR3515
ANB R35202
AND R35201
RES R35200
CON
RES R35201
CON
JMP @MR3600
STG @MR3600
MPS
ANB R35203
MPS
AND MR16208
JMP @MR3601
MPP
ANB MR16208
TMR @15 #3
CON
AND @T15
JMP @MR3513
MPP
AND R35203
JMP @MR4409
STG @MR4409
@SET @MR1900
CON
ANB R39004
SET R39004
CON
DW #1000 @DM9
CON
DW #21 @DM1
CON
DW #0 @DM2
CON
SET @MR100
CON
JMP @MR4410
STG @MR4410
AND @MR101
RES @MR101
CON
RES @MR1900
CON
RES R39004
CON
JMP @MR4411
STG @MR4411
RES R35203
CON
AND @MR105
JMP @MR3513
STG @MR3601
JMP @MR3602
STG @MR3602
AND MR3002
AND DM10523.1
ANB R35208
ANB R35209
ANB R35210
JMP @MR3603
STG @MR3603
DW #5 EM1304
CON
SET R35200
CON
AND R35202
JMP @MR3604
STG @MR3604
ANB R35202
AND R35201
RES R35200
CON
RES R35201
CON
JMP @MR3605
STG @MR3605
MPS
ANB R35203
MPS
AND MR16205
JMP @MR3606
MPP
ANB MR16205
TMR @16 #3
CON
AND @T16
JMP @MR3602
MPP
AND R35203
JMP @MR4412
STG @MR4412
@SET @MR1900
CON
ANB R39004
SET R39004
CON
DW #1000 @DM9
CON
DW #21 @DM1
CON
DW #0 @DM2
CON
SET @MR100
CON
JMP @MR4410
STG @MR4413
AND @MR101
RES @MR101
CON
RES @MR1900
CON
RES R39004
CON
JMP @MR4411
STG @MR4414
RES R35203
CON
AND @MR105
JMP @MR3602
STG @MR3606
JMP @MR3607
STG @MR3607
RES MR8202
CON
JMP @MR3608
STG @MR3608
MPS
ANB R44200
MPS
OUT MR8200
MPP
ANB MR8100
JMP @MR3609
MPP
AND R44200
@SET @MR1900
STG @MR3609
SET R47100
CON
RES R47000
CON
JMP @MR3100
;Auto終了処理
STG @MR3900
RES @MR4001
CON
JMP @MR3915
STG @MR3915
MPS
ANB R44200
RES @MR3002
CON
SET MR15001
CON
AND MR15000
JMP LR601
MPP
AND R44200
@SET @MR1900
;<h1/>Auto-Main2/Autoﾒｲﾝﾙｰﾁﾝ2
;[本STG内容]
;・@MR4000の起動はMain1にて行う事
;・@MR4000:AUTO_Main2開始、@MR4001:AUTO_Main2完了、@MR4002:AUTO_Main2動作中
STG @MR4000
SET @MR4002
CON
JMP @MR4003
STG @MR4003
JMP @MR4015
STG @MR4015
SET @MR4001
CON
RES @MR4002
CON
ENDS
;<h1/>MAINTE/ﾒﾝﾃﾅﾝｽ動作
;[本STG内容]
;・各TaskのMAINTE動作を記述して下さい
;・動作ﾓｰﾄﾞは「MAINTEAC*」に格納されています(1〜32)
;・動作終了時は@MR2915にJMPして下さい
STG LR5601
JMP @MR2000
STG @MR2000
SET @MR2002
CON
JMP @MR2003
STG @MR2003
MPS
AND R44200
@SET @MR1900
MPP
ANB R44200
MPS
LD= DM4110 #1
AND CR2003
ANL
JMP @MR2100
MRD
AND= DM4110 #29
@DW #2000 DM3008
CON
AND MR23400
JMP @MR2910
MRD
AND= DM4110 #30
@DW #2150 DM3008
CON
LDP R44915
ORP MR23401
ANL
JMP @MR2910
MPP
AND R47800
JMP @MR2910
;Maintenance　終了
STG @MR2910
MCALL HOLD_REQUEST #1
JMP @MR2915
STG @MR2915
MPS
ANB R44200
SET MR15001
CON
AND MR15000
JMP LR601
MPP
AND R44200
@SET @MR1900
;<h1/> MainTP 表示中ﾍﾟｰｼﾞNo2005
;ｼﾘﾝﾀﾞｰ動作
LD @MR2002
AND= DM3000 #2005
AND R007
MC
LDP MR20500
SET MR7210
LDP MR20501
RES MR7210
;転写ﾍｯﾄﾞRB2Y軸原点復帰
LD MR3001
ANB R35108
ANB R35109
ANB R35110
ANP MR20502
SET @MR2200
STG @MR2200
SET R35108
CON
AND R35110
JMP @MR2201
STG @MR2201
ANB R35110
AND R35109
RES R35108
CON
RES R35109
CON
ENDS
LDB @MR2200
ANB @MR2201
INV
OUT MR21502
;転写ﾍｯﾄﾞRB2Y軸待機位置移動
LD MR3001
AND DM10515.1
AND DM10515.0
ANB DM10515.2
ANB R35100
ANB R35101
ANB R35102
ANP MR20503
SET @MR2203
STG @MR2203
DW #1 EM1302
CON
SET R35100
CON
AND R35102
JMP @MR2204
STG @MR2204
ANB R35102
AND R35101
RES R35100
CON
RES R35101
CON
ENDS
LDB @MR2203
ANB @MR2204
INV
OUT MR21503
;転写ﾍｯﾄﾞRB2Y軸転写台位置移動
LD MR3001
AND DM10515.1
AND DM10515.0
ANB DM10515.2
ANB R35100
ANB R35101
ANB R35102
AND>= DM3504 #1
ANP MR20504
SET @MR2206
STG @MR2206
@MOV DM3504 EM1302
JMP @MR2207
STG @MR2207
SET R35100
CON
AND R35102
JMP @MR2208
STG @MR2208
ANB R35102
AND R35101
RES R35100
CON
RES R35101
CON
ENDS
LDB @MR2206
ANB @MR2207
ANB @MR2208
INV
OUT MR21504
;転写ﾍｯﾄﾞRB2Y軸転写位置移動
LD MR3001
AND DM10515.1
AND DM10515.0
ANB DM10515.2
ANB R35100
ANB R35101
ANB R35102
AND>= DM3506 #1
ANP MR20506
SET @MR2211
STG @MR2211
MPS
AND= DM3506 #1
DW #11 EM1302
CON
JMP @MR2212
MRD
AND= DM3506 #2
DW #12 EM1302
CON
JMP @MR2212
MRD
AND= DM3506 #3
DW #13 EM1302
CON
JMP @MR2212
MPP
AND= DM3506 #4
DW #14 EM1302
CON
JMP @MR2212
STG @MR2212
SET R35100
CON
AND R35102
JMP @MR2213
STG @MR2213
ANB R35102
AND R35101
RES R35100
CON
RES R35101
CON
ENDS
LDB @MR2211
ANB @MR2212
ANB @MR2213
INV
OUT MR21506
LD= DM3536 #1
DW #4 DM3506
LD= DM3536 #2
DW #3 DM3506
LD= DM3536 #3
DW #2 DM3506
LD= DM3536 #4
DW #1 DM3506
;転写ﾍｯﾄﾞRB2Y軸清掃位置移動
LD MR3000
AND DM10515.1
AND DM10515.0
ANB DM10515.2
ANB R35100
ANB R35101
ANB R35102
ANP MR20514
SET @MR2300
STG @MR2300
DW #15 EM1302
CON
SET R35100
CON
AND R35102
JMP @MR2301
STG @MR2301
ANB R35102
AND R35101
RES R35100
CON
RES R35101
CON
ENDS
LDB @MR2300
ANB @MR2301
INV
OUT MR21514
MCR
;<h1/> MainTP 表示中ﾍﾟｰｼﾞNo2006
;ｼﾘﾝﾀﾞｰ動作
LD @MR2002
AND= DM3000 #2006
AND R007
MC
LDP MR20600
SET MR7210
LDP MR20601
RES MR7210
;転写ﾍｯﾄﾞRB3Z軸原点復帰
LD MR3306
ANB R35208
ANB R35209
ANB R35210
ANP MR20602
SET @MR2400
STG @MR2400
SET R35208
CON
AND R35210
JMP @MR2401
STG @MR2401
JMP @MR2402
STG @MR2402
ANB R35210
AND R35209
RES R35208
CON
RES R35209
CON
ENDS
LDB @MR2400
ANB @MR2401
ANB @MR2402
INV
OUT MR21602
;転写ﾍｯﾄﾞRB3 Z軸待機位置移動
LD MR3306
AND DM10523.1
ANB R35208
ANB R35209
ANB R35210
ANP MR20603
SET @MR2403
STG @MR2403
DW #1 EM1304
CON
SET R35200
CON
AND R35202
JMP @MR2404
STG @MR2404
ANB R35202
AND R35201
RES R35200
CON
RES R35201
CON
ENDS
LDB @MR2403
ANB @MR2404
INV
OUT MR21603
;転写ﾍｯﾄﾞRB3 Z軸転写台位置移動
LDB MR16101
ANB MR16102
ANB MR16103
ANB MR16104
ANB MR16105
ANB MR16106
ANB MR16107
ANB MR16108
ANB MR16109
ANB MR16110
INV
OUT MR21900
LD MR3002
AND DM10523.1
ANB R35208
ANB R35209
ANB R35210
AND R4200
AND R4202
AND>= DM3508 #1
AND MR21900
ANP MR20604
SET @MR2407
STG @MR2407
MPS
AND= DM3508 #1
DW #1 EM1304
CON
SET R35200
CON
AND R35202
JMP @MR2408
MRD
AND= DM3508 #2
DW #2 EM1304
CON
SET R35200
CON
AND R35202
JMP @MR2408
MRD
AND= DM3508 #3
DW #3 EM1304
CON
SET R35200
CON
AND R35202
JMP @MR2408
MPP
AND= DM3508 #4
DW #4 EM1304
CON
SET R35200
CON
AND R35202
JMP @MR2408
STG @MR2408
ANB R35202
AND R35201
RES R35200
CON
RES R35201
CON
ENDS
LDB @MR2407
ANB @MR2408
INV
OUT MR21604
;転写ﾍｯﾄﾞRB3 Z軸転写位置移動
LD MR16111
AND MR16001
LD MR16112
AND MR16002
ORL
LD MR16113
AND MR16003
ORL
LD MR16114
AND MR16004
ORL
OR= DM3510 #1
OR= DM3510 #5
OUT MR21901
LD MR3002
AND DM10523.1
ANB R35208
ANB R35209
ANB R35210
AND>= DM3510 #1
AND MR21901
ANP MR20606
SET @MR2500
STG @MR2500
MPS
AND= DM3510 #1
DW #5 EM1304
CON
SET R35200
CON
AND R35202
JMP @MR2501
MRD
AND= DM3510 #2
DW #6 EM1304
CON
SET R35200
CON
AND R35202
JMP @MR2501
MRD
AND= DM3510 #3
DW #7 EM1304
CON
SET R35200
CON
AND R35202
JMP @MR2501
MPP
AND= DM3510 #4
DW #8 EM1304
CON
SET R35200
CON
AND R35202
JMP @MR2501
STG @MR2501
ANB R35202
AND R35201
RES R35200
CON
RES R35201
CON
ENDS
LDB @MR2500
ANB @MR2501
INV
OUT MR21606
;転写ﾍｯﾄﾞRB3 Z軸原点位置移動
LD MR3306
AND DM10523.1
ANB R35208
ANB R35209
ANB R35210
ANP MR20614
SET @MR2502
STG @MR2502
DW #10 EM1304
CON
SET R35200
CON
AND R35202
JMP @MR2503
STG @MR2503
ANB R35202
AND R35201
RES R35200
CON
RES R35201
CON
ENDS
LDB @MR2502
ANB @MR2503
INV
OUT MR21614
MCR
;<h1/>ERROR
;//*Error Sample
;[使用方法]
;・@DM1にERROR番号を代入
;・@DM2にSensor番号を代入(センサ無しエラーの場合は0)
;・@DM9に復帰SW番号(1〜9、0はSW無し)をdegit単位で4桁入力
;・Task0 ERROR SET(@MR100)でエラー処理開始
;・エラー復帰でTask0 ERROR END(@MR101)がON
;・押下復帰SW番号により左から対応した@MR105,@MR106,@MR107,@MR108のいずれかがON
;・上記ONが成立したらJMPするSTGに対応する処理を記述
;Error0を左側から1,2,3,4の番号に対応した復帰選択SWを出力する
;Error Sample *//
;MyTask Error Process Substance/エラー処理実体
STG @MR100
ANB R39002
MPS
ZRES @MR105 @MR108
CON
LDA @DM9
CON
TBCD
CON
STA @DM10
CON
DISN @DM10 @DM3 #4
MRD
DW #1 @DM0
CON
BMOV @DM0 DM60000 #7
MPP
SET R39000
CON
SET @MR102
CON
JMP @MR103
STG @MR103
AND R39002
AND= DM60008 @DM1
MPS
AND= DM60007 @DM6
SET @MR105
CON
JMP @MR104
MRD
AND= DM60007 @DM5
SET @MR106
CON
JMP @MR104
MRD
AND= DM60007 @DM4
SET @MR107
CON
JMP @MR104
MPP
AND= DM60007 @DM3
SET @MR108
CON
JMP @MR104
STG @MR104
ANB R39002
RES @MR102
CON
SET @MR101
CON
ENDS
;<h1/>SELECT_ACT
;//*Select_ACT Sample
;画面番号33をブザー有りで選択SW番号を左から#5,#10,#0(無し),#34の並びで表示する
;Select_ACT Sample *//
;MyTask Select_ACT Process Substance/SELECT_ACT処理実体
STG @MR200
ANB R39202
MPS
ZRES @MR205 @MR208
CON
DW #1 @DM30
CON
BMOV @DM30 DM60030 #7
MPP
SET R39200
CON
SET @MR202
CON
JMP @MR203
STG @MR203
AND R39202
AND<> DM60037 #0
MPS
AND= DM60037 #1
SET @MR205
CON
JMP @MR204
MRD
AND= DM60037 #2
SET @MR206
CON
JMP @MR204
MRD
AND= DM60037 #3
SET @MR207
CON
JMP @MR204
MPP
AND= DM60037 #4
SET @MR208
CON
JMP @MR204
STG @MR204
ANB R39202
RES @MR202
CON
SET @MR201
CON
ENDS
;<h1/>SELECT_Y_N
;//*Select_Y_N Sample
;*Select_Y_N Sample//
;MyTask Select_Y_N Process Substance/SELECT_Y_N処理実体
STG @MR300
ANB R39102
MPS
ZRES @MR306 @MR307
CON
DW #1 @DM20
CON
BMOV @DM20 DM60020 #3
MPP
SET R39100
CON
SET @MR302
CON
JMP @MR303
STG @MR303
AND R39102
MPS
AND= DM60023 #1
SET @MR306
CON
JMP @MR304
MPP
AND= DM60023 #2
RES @MR306
CON
JMP @MR304
STG @MR304
ANB R39102
RES @MR302
CON
SET @MR301
CON
ENDS
;<h1/>TIMEUP_ERROR
;//*TIMEUP_ERROR Sample
;サンプルセンサ:MR5000=ON AND MR5001 = OFF のいずれかが5sタイムアップしたらTIMEUP_ERROR出力
;エラー復帰後、再度センサ確認
;TIMEUP_ERROR Sample *//
;MyTask TIMEUP_ERROR Process Substance/TIMEUP_ERROR処理実体
STG @MR400
ANB R39302
MPS
DW #1 @DM40
CON
BMOV @DM40 DM60040 #2
MPP
SET R39300
CON
SET @MR402
CON
JMP @MR403
STG @MR403
AND R39302
JMP @MR404
STG @MR404
ANB R39302
RES @MR402
CON
SET @MR401
CON
ENDS
;<h1/>SubRoutines/ｻﾌﾞﾙｰﾁﾝ
;[記述方法]
;・ｻﾌﾞﾙｰﾁﾝは本ﾌﾞｯｸﾏｰｸから下に記述していって下さい
;・ｻﾌﾞﾙｰﾁﾝは必ずﾌﾞｯｸﾏｰｸを挿入して処理内容を明確にする事
;<h1/>HALT
LD R44200
AND @MR1900
LD @MR1901
ORB @MR4002
ANL
TMR @2 #2
CON
AND @T2
@SET R42601
LD R42601
RES @MR1900
CON
RES @MR1901
END
ENDH
