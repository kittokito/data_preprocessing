DEVICE:53
;MODULE:RB
;MODULE_TYPE:0
;SCRIPT_TYPE:
LDP R46104
ZRES @R100 @R2915
BLD DM10507 #3
@SET @MR002
CON
LDA DM10506
CON
STA DM20030
BLD DM10515 #3
@SET @MR002
CON
LDA DM10514
CON
STA DM20030
BLD DM10523 #3
@SET @MR002
CON
LDA DM10522
CON
STA DM20030
BLD DM10531 #3
@SET @MR002
CON
LDA DM10530
CON
STA DM20030
BLD DM10539 #3
@SET @MR002
CON
LDA DM10538
CON
STA DM20030
BLD DM10547 #3
@SET @MR002
CON
LDA DM10546
CON
STA DM20030
LD @MR002
MPS
AND= $0000 DM20030
DW #24096 DM50316
MRD
AND= $0080 DM20030
DW #24224 DM50316
MRD
AND= $0082 DM20030
DW #24226 DM50316
MRD
AND= $0083 DM20030
DW #24227 DM50316
MRD
AND= $0084 DM20030
DW #24228 DM50316
MRD
AND= $0085 DM20030
DW #24229 DM50316
MRD
AND= $0090 DM20030
DW #24230 DM50316
MRD
AND= $0091 DM20030
DW #24241 DM50316
MRD
AND= $0092 DM20030
DW #24242 DM50316
MRD
AND= $0093 DM20030
DW #24243 DM50316
MRD
AND= $00A1 DM20030
DW #24257 DM50316
MRD
AND= $00A2 DM20030
DW #24258 DM50316
MRD
AND= $00A3 DM20030
DW #24259 DM50316
MRD
AND= $00A5 DM20030
DW #24261 DM50316
MRD
AND= $00A6 DM20030
DW #24262 DM50316
MRD
AND= $00A7 DM20030
DW #24263 DM50316
MRD
AND= $00A8 DM20030
DW #24264 DM50316
MRD
AND= $00B4 DM20030
DW #24276 DM50316
MRD
AND= $00B5 DM20030
DW #24277 DM50316
MRD
AND= $00B7 DM20030
DW #24279 DM50316
MRD
AND= $00B8 DM20030
DW #24280 DM50316
MRD
AND= $00BA DM20030
DW #24282 DM50316
MRD
AND= $00BE DM20030
DW #24286 DM50316
MRD
AND= $00BF DM20030
DW #24287 DM50316
MRD
AND= $00C0 DM20030
DW #24288 DM50316
MRD
AND= $00C2 DM20030
DW #24290 DM50316
MRD
AND= $00C8 DM20030
DW #24296 DM50316
MRD
AND= $00C9 DM20030
DW #24297 DM50316
MRD
AND= $00CA DM20030
DW #24298 DM50316
MRD
AND= $00CB DM20030
DW #24299 DM50316
MRD
AND= $00CC DM20030
DW #24300 DM50316
MRD
AND= $00CD DM20030
DW #24301 DM50316
MRD
AND= $00CE DM20030
DW #24302 DM50316
MRD
AND= $00CF DM20030
DW #24303 DM50316
MRD
AND= $00D2 DM20030
DW #24306 DM50316
MRD
AND= $00D3 DM20030
DW #24307 DM50316
MRD
AND= $00D7 DM20030
DW #24311 DM50316
MRD
AND= $00D8 DM20030
DW #24312 DM50316
MRD
AND= $00D9 DM20030
DW #24313 DM50316
MRD
AND= $00DA DM20030
DW #24314 DM50316
MRD
AND= $00DC DM20030
DW #24316 DM50316
MRD
AND= $00E0 DM20030
DW #24320 DM50316
MRD
AND= $00E5 DM20030
DW #24325 DM50316
MRD
AND= $00E6 DM20030
DW #24326 DM50316
MRD
AND= $00E7 DM20030
DW #24327 DM50316
MRD
AND= $00E8 DM20030
DW #24328 DM50316
MRD
AND= $00E9 DM20030
DW #24329 DM50316
MRD
AND= $00EA DM20030
DW #24330 DM50316
MRD
AND= $00ED DM20030
DW #24333 DM50316
MRD
AND= $00EE DM20030
DW #24334 DM50316
MRD
AND= $00EF DM20030
DW #24335 DM50316
MRD
AND= $00F0 DM20030
DW #24336 DM50316
MRD
AND= $00F2 DM20030
DW #24338 DM50316
MRD
AND= $00F3 DM20030
DW #24339 DM50316
MRD
AND= $00F4 DM20030
DW #24340 DM50316
MRD
AND= $00F5 DM20030
DW #24341 DM50316
MRD
AND= $00F6 DM20030
DW #24342 DM50316
MRD
AND= $00F8 DM20030
DW #24344 DM50316
MRD
AND= $00FA DM20030
DW #24346 DM50316
MRD
AND= $00FB DM20030
DW #24347 DM50316
MRD
AND= $00FC DM20030
DW #24348 DM50316
MPP
BANB DM10507 #3
RES @MR002
;動作MONITOR
BLDB DM10507 #2
BANB DM10515 #2
BANB DM10523 #2
BANB DM10531 #2
INV
OUT R39900
;<h1/>RB Teaching　Dyisplay
;DATA Display
;TYPE D50300.U,D50302-D50304.L,D50306.U,D50307.U,D50312.U,DM50318.U,DM50323.U,@DM0-@DM2.U,EM10000.L
;
;DM50318=DM50300-1+(DM50312*100)+#10100 'Position Messag 表示
;
;'DATA表示
;@DM0 = ((D50300-1)*6)+(D50312*600)
;DM50302 = EM10000:(@DM0) 'Position
;DM50306 = EM10004:(@DM0) 'SPEED
;DM50307 = EM10005:(@DM0) 'ACC/DEC
;D4=((D50300+@DM1-1)*6)+(D50312*600)
;
;DM50323 = @DM0 / 2
;
;IF D3000 = #2220 THEN
;
;	IF DM50312 <> D50319-1 THEN    'POSI No.= 1
;	   DM50300 = 1
;	END IF
;	
;IF R39900 = OFF THEN	'MONITOR画面 RB 切り替え
;	DM50312 = DM50319-1
;END IF
;	
;	FOR @DM1 = 0 TO 9
;		@DM2=(((D50300+@DM1)-1)*6)+(D50312*600)			
;  		D50350:(@D1*4) = EM10000:@DM2'point
;		D50352:(@D1*4) = EM10004:@DM2'SPEED
;		D50353:(@D1*4) = EM10005:@DM2'ACC/DCC
;	NEXT
;
;END IF
LD<= DM3000 #2220
AND>= DM3000 #2150
NCJ #1016
;TYPE D50300.U,D50302-D50304.L,D50306.U,D50307.U,D50312.U,DM50318.U,DM50323.U,@DM0-@DM2.U,EM10000.L
;
;DM50318=DM50300-1+(DM50312*100)+#10100 'Position Messag 表示
;
LD CR2002
LDA DM50312
CON
EXT
CON
MUL.L +100
CON
STA.L @VM0
CON
LDA DM50300
CON
EXT
CON
SUB.L +1
CON
ADD.L @VM0
CON
ADD.L +10100
CON
STA DM50318
;'DATA表示
;
;@DM0 = ((D50300-1)*6)+(D50312*600)
;
LD CR2002
LDA DM50312
CON
EXT
CON
MUL.L +600
CON
STA.L @VM2
CON
LDA DM50300
CON
EXT
CON
SUB.L +1
CON
MUL.L +6
CON
ADD.L @VM2
CON
STA @DM0
;DM50302 = EM10000:(@DM0) 'Position
;
LD CR2002
LDA @DM0
CON
EXT
CON
STA.L Z12
CON
MOV.L EM10000:Z12 DM50302
;DM50306 = EM10004:(@DM0) 'SPEED
;
LD CR2002
LDA @DM0
CON
EXT
CON
STA.L Z12
CON
MOV EM10004:Z12 DM50306
;DM50307 = EM10005:(@DM0) 'ACC/DEC
;
LD CR2002
LDA @DM0
CON
EXT
CON
STA.L Z12
CON
MOV EM10005:Z12 DM50307
;D4=((D50300+@DM1-1)*6)+(D50312*600)
;
LD CR2002
LDA DM50312
CON
EXT
CON
MUL.L +600
CON
STA.L @VM4
CON
LDA @DM1
CON
EXT
CON
STA.L @VM6
CON
LDA DM50300
CON
EXT
CON
ADD.L @VM6
CON
SUB.L +1
CON
MUL.L +6
CON
ADD.L @VM4
CON
STA DM4
;DM50323 = @DM0 / 2
;
LD CR2002
LDA @DM0
CON
EXT
CON
EXT.L
CON
DIV.L +2
CON
STA DM50323
;IF D3000 = #2220 THEN
;
LD= DM3000 #2220
NCJ #2000
;	IF DM50312 <> D50319-1 THEN    'POSI No.= 1
;
LD CR2002
LDA DM50319
CON
EXT
CON
SUB.L +1
CON
STA.L @VM8
CON
LDA DM50312
CON
EXT
CON
CMP.L @VM8
LDB CR2010
NCJ #2001
;	   DM50300 = 1
;
LD CR2002
MOV #1 DM50300
;	END IF
;
LABEL #2001
;IF R39900 = OFF THEN	'MONITOR画面 RB 切り替え
;
LDB R39900
NCJ #2002
;	DM50312 = DM50319-1
;
LD CR2002
LDA DM50319
CON
EXT
CON
SUB.L +1
CON
STA DM50312
;END IF
;
LABEL #2002
;	FOR @DM1 = 0 TO 9
;
LD CR2002
MOV #0 @DM1
LABEL #2003
LD> @DM1 #9
CJ #2004
;		@DM2=(((D50300+@DM1)-1)*6)+(D50312*600)			
;
LD CR2002
LDA DM50312
CON
EXT
CON
MUL.L +600
CON
STA.L @VM10
CON
LDA @DM1
CON
EXT
CON
STA.L @VM12
CON
LDA DM50300
CON
EXT
CON
ADD.L @VM12
CON
SUB.L +1
CON
MUL.L +6
CON
ADD.L @VM10
CON
STA @DM2
;  		D50350:(@D1*4) = EM10000:@DM2'point
;
LD CR2002
LDA @DM1
CON
EXT
CON
MUL.L +4
CON
STA.L Z11
CON
LDA @DM2
CON
EXT
CON
STA.L Z12
CON
MOV EM10000:Z12 DM50350:Z11
;		D50352:(@D1*4) = EM10004:@DM2'SPEED
;
LD CR2002
LDA @DM1
CON
EXT
CON
MUL.L +4
CON
STA.L Z11
CON
LDA @DM2
CON
EXT
CON
STA.L Z12
CON
MOV EM10004:Z12 DM50352:Z11
;		D50353:(@D1*4) = EM10005:@DM2'ACC/DCC
;
LD CR2002
LDA @DM1
CON
EXT
CON
MUL.L +4
CON
STA.L Z11
CON
LDA @DM2
CON
EXT
CON
STA.L Z12
CON
MOV EM10005:Z12 DM50353:Z11
;	NEXT
;
LD CR2002
INC @DM1
LDB CR2009
CJ #2003
LABEL #2004
;END IF
LABEL #2000
LABEL #1016
;
LDP R44915
BMOV EM10000 ZF470 #19200
SET @R2505
STG @R2505
OUT R45010
CON
TMR @10 #5
CON
AND @T10
ENDS
;DATA Write
;TYPE D50312.U,D50320.L,DM10500.L
;'現在値 表示
;DM50320 = DM10500:((D50312)*8) 'Now Position
LD<= DM3000 #2220
AND>= DM3000 #2150
NCJ #1019
;TYPE D50312.U,D50320.L,DM10500.L
;
;'現在値 表示
;
;DM50320 = DM10500:((D50312)*8) 'Now Position
LD CR2002
LDA DM50312
CON
EXT
CON
MUL.L +8
CON
STA.L Z12
CON
MOV.L DM10500:Z12 DM50320
LABEL #1019
;
;TYPE D50300.U,D50312.U,@DM0.U,D50320.L,DM10500.L
;
;'DATA 格納
;IF R34000 = 1 THEN
;	@DM0 = ((D50300-1)*6)+(D50312*600)
;	IF R34002 = 1 THEN 
;		EM10000.D:(@DM0) = DM50320.D	'Position
;	    EM10004:(@DM0) = DM50326.U	'SPEED
;        EM10005:(@DM0) = DM50327.U	'ACC/DEC
;    ELSE
;		EM10000.D:(@DM0) = DM50302.D	'Direct Position
;		EM10004:(@DM0) = DM50306.U	'SPEED
;        EM10005:(@DM0) = DM50307.U	'ACC/DEC
;    END IF
;	RES (R34002)
;END IF
LD<= DM3000 #2220
AND>= DM3000 #2150
ANP R34002
NCJ #1017
;TYPE D50300.U,D50312.U,@DM0.U,D50320.L,DM10500.L
;
;'DATA 格納
;
;IF R34000 = 1 THEN
;
LD R34000
NCJ #2005
;	@DM0 = ((D50300-1)*6)+(D50312*600)
;
LD CR2002
LDA DM50312
CON
EXT
CON
MUL.L +600
CON
STA.L @VM14
CON
LDA DM50300
CON
EXT
CON
SUB.L +1
CON
MUL.L +6
CON
ADD.L @VM14
CON
STA @DM0
;	IF R34002 = 1 THEN 
;
LD R34002
NCJ #2006
;		EM10000.D:(@DM0) = DM50320.D	'Position
;
LD CR2002
LDA @DM0
CON
EXT
CON
STA.L Z11
CON
MOV.D DM50320 EM10000:Z11
;	    EM10004:(@DM0) = DM50326.U	'SPEED
;
LD CR2002
LDA @DM0
CON
EXT
CON
STA.L Z11
CON
MOV DM50326 EM10004:Z11
;        EM10005:(@DM0) = DM50327.U	'ACC/DEC
;
LD CR2002
LDA @DM0
CON
EXT
CON
STA.L Z11
CON
MOV DM50327 EM10005:Z11
;    ELSE
;
LD CR2002
CJ #2007
LABEL #2006
;		EM10000.D:(@DM0) = DM50302.D	'Direct Position
;
LD CR2002
LDA @DM0
CON
EXT
CON
STA.L Z11
CON
MOV.D DM50302 EM10000:Z11
;		EM10004:(@DM0) = DM50306.U	'SPEED
;
LD CR2002
LDA @DM0
CON
EXT
CON
STA.L Z11
CON
MOV DM50306 EM10004:Z11
;        EM10005:(@DM0) = DM50307.U	'ACC/DEC
;
LD CR2002
LDA @DM0
CON
EXT
CON
STA.L Z11
CON
MOV DM50307 EM10005:Z11
;    END IF
;
LABEL #2007
;	RES (R34002)
;
LD CR2002
RES R34002
;END IF
LABEL #2005
LABEL #1017
;
;'Position Edit OffSet
;IF DM21060.U < 1 OR DM21060.U > 32 THEN
;	DM21060.U = 1
;END IF
;
;IF DM21062.U < 1 OR DM21062 > 100 THEN
;	DM21062 = 1
;END IF
;
;DM21064.U = ((DM21060.U - 1 ) * 4)
;DM21066.U = ((DM21060.U - 1) * 600 + (DM21062.U -1) *6)/2
;DM21068.U = (DM21060.U - 1) * 600 + (DM21062.U -1) *6
LD CR2002
NCJ #1018
;'Position Edit OffSet
;
;IF DM21060.U < 1 OR DM21060.U > 32 THEN
;
LD< DM21060 #1
OUT @VB00
LD> DM21060 #32
OR @VB00
NCJ #2008
;	DM21060.U = 1
;
LD CR2002
MOV #1 DM21060
;END IF
;
LABEL #2008
;IF DM21062.U < 1 OR DM21062 > 100 THEN
;
LD< DM21062 #1
OUT @VB01
LD> DM21062 #100
OR @VB01
NCJ #2009
;	DM21062 = 1
;
LD CR2002
MOV #1 DM21062
;END IF
;
LABEL #2009
;DM21064.U = ((DM21060.U - 1 ) * 4)
;
LD CR2002
LDA DM21060
CON
EXT
CON
SUB.L +1
CON
MUL.L +4
CON
STA DM21064
;DM21066.U = ((DM21060.U - 1) * 600 + (DM21062.U -1) *6)/2
;
LD CR2002
LDA DM21062
CON
EXT
CON
SUB.L +1
CON
MUL.L +6
CON
STA.L @VM16
CON
LDA DM21060
CON
EXT
CON
SUB.L +1
CON
MUL.L +600
CON
ADD.L @VM16
CON
EXT.L
CON
DIV.L +2
CON
STA DM21066
;DM21068.U = (DM21060.U - 1) * 600 + (DM21062.U -1) *6
LD CR2002
LDA DM21062
CON
EXT
CON
SUB.L +1
CON
MUL.L +6
CON
STA.L @VM18
CON
LDA DM21060
CON
EXT
CON
SUB.L +1
CON
MUL.L +600
CON
ADD.L @VM18
CON
STA DM21068
LABEL #1018
;
;<h1/>Panel Control
;移動方向カーソル設定
;1=通常X 2=ﾘﾊﾞｰｽX 3通常Y,Z 4ﾘﾊﾞｰｽY,Z
;RB1 固定板搬送軸 SW名称
LD= DM50312 #0
AND R34000
BRES DM50317 #1
CON
BRES DM50317 #2
CON
BRES DM50317 #3
CON
BRES DM50317 #4
CON
BSET DM50317 #15
CON
BRES DM50317 #15
CON
BSET DM50317 #2
;'SW名称
;'2200:前進 2201:後退 2202:上昇 2203:下降 
;'2204:ON   2205:OFF  2206:開   2207:閉
;DM1940 = 2207 'ｼﾘﾝﾀﾞ1_SW1名称
;DM1941 = 2206 'ｼﾘﾝﾀﾞ1_SW2名称
;DM1942 = 2200 'ｼﾘﾝﾀﾞ2_SW1名称
;DM1943 = 2201 'ｼﾘﾝﾀﾞ2_SW2名称
;DM1944 = 2203 'ｼﾘﾝﾀﾞ3_SW1名称
;DM1945 = 2202 'ｼﾘﾝﾀﾞ3_SW2名称
;DM1946 = 0 'ｼﾘﾝﾀﾞ4_SW1名称
;DM1947 = 0 'ｼﾘﾝﾀﾞ4_SW2名称
;
LD= DM50312 #0
NCJ #1000
;'SW名称
;
;'2200:前進 2201:後退 2202:上昇 2203:下降 
;
;'2204:ON   2205:OFF  2206:開   2207:閉
;
;DM1940 = 2207 'ｼﾘﾝﾀﾞ1_SW1名称
;
LD CR2002
MOV #2207 DM1940
;DM1941 = 2206 'ｼﾘﾝﾀﾞ1_SW2名称
;
LD CR2002
MOV #2206 DM1941
;DM1942 = 2200 'ｼﾘﾝﾀﾞ2_SW1名称
;
LD CR2002
MOV #2200 DM1942
;DM1943 = 2201 'ｼﾘﾝﾀﾞ2_SW2名称
;
LD CR2002
MOV #2201 DM1943
;DM1944 = 2203 'ｼﾘﾝﾀﾞ3_SW1名称
;
LD CR2002
MOV #2203 DM1944
;DM1945 = 2202 'ｼﾘﾝﾀﾞ3_SW2名称
;
LD CR2002
MOV #2202 DM1945
;DM1946 = 0 'ｼﾘﾝﾀﾞ4_SW1名称
;
LD CR2002
MOV #0 DM1946
;DM1947 = 0 'ｼﾘﾝﾀﾞ4_SW2名称
;
LD CR2002
MOV #0 DM1947
LABEL #1000
;
;'ｼﾘﾝﾀﾞ名称
;DM1950 = 2220 'ｼﾘﾝﾀﾞ1_名称
;DM1951 = 2221 'ｼﾘﾝﾀﾞ2_名称
;DM1952 = 2222 'ｼﾘﾝﾀﾞ3_名称
;DM1953 = 0 'ｼﾘﾝﾀﾞ4_名称
;
LD= DM50312 #0
NCJ #1001
;'ｼﾘﾝﾀﾞ名称
;
;DM1950 = 2220 'ｼﾘﾝﾀﾞ1_名称
;
LD CR2002
MOV #2220 DM1950
;DM1951 = 2221 'ｼﾘﾝﾀﾞ2_名称
;
LD CR2002
MOV #2221 DM1951
;DM1952 = 2222 'ｼﾘﾝﾀﾞ3_名称
;
LD CR2002
MOV #2222 DM1952
;DM1953 = 0 'ｼﾘﾝﾀﾞ4_名称
;
LD CR2002
MOV #0 DM1953
LABEL #1001
;
;RB2 転写ヘッドＹ軸 SW名称
LD= DM50312 #1
AND R34000
BRES DM50317 #1
CON
BRES DM50317 #2
CON
BRES DM50317 #3
CON
BRES DM50317 #4
CON
BSET DM50317 #15
CON
BRES DM50317 #15
CON
BSET DM50317 #4
;'SW名称
;'2200:前進 2201:後退 2202:上昇 2203:下降 
;'2204:ON   2205:OFF  2206:開   2207:閉
;DM1940 = 2207 'ｼﾘﾝﾀﾞ1_SW1名称
;DM1941 = 2206 'ｼﾘﾝﾀﾞ1_SW2名称
;DM1942 = 2200 'ｼﾘﾝﾀﾞ2_SW1名称
;DM1943 = 2201 'ｼﾘﾝﾀﾞ2_SW2名称
;DM1944 = 2200 'ｼﾘﾝﾀﾞ3_SW1名称
;DM1945 = 2201 'ｼﾘﾝﾀﾞ3_SW2名称
;DM1946 = 2203 'ｼﾘﾝﾀﾞ4_SW1名称
;DM1947 = 2202 'ｼﾘﾝﾀﾞ4_SW2名称
;
LD= DM50312 #1
NCJ #1028
;'SW名称
;
;'2200:前進 2201:後退 2202:上昇 2203:下降 
;
;'2204:ON   2205:OFF  2206:開   2207:閉
;
;DM1940 = 2207 'ｼﾘﾝﾀﾞ1_SW1名称
;
LD CR2002
MOV #2207 DM1940
;DM1941 = 2206 'ｼﾘﾝﾀﾞ1_SW2名称
;
LD CR2002
MOV #2206 DM1941
;DM1942 = 2200 'ｼﾘﾝﾀﾞ2_SW1名称
;
LD CR2002
MOV #2200 DM1942
;DM1943 = 2201 'ｼﾘﾝﾀﾞ2_SW2名称
;
LD CR2002
MOV #2201 DM1943
;DM1944 = 2200 'ｼﾘﾝﾀﾞ3_SW1名称
;
LD CR2002
MOV #2200 DM1944
;DM1945 = 2201 'ｼﾘﾝﾀﾞ3_SW2名称
;
LD CR2002
MOV #2201 DM1945
;DM1946 = 2203 'ｼﾘﾝﾀﾞ4_SW1名称
;
LD CR2002
MOV #2203 DM1946
;DM1947 = 2202 'ｼﾘﾝﾀﾞ4_SW2名称
;
LD CR2002
MOV #2202 DM1947
LABEL #1028
;
;'ｼﾘﾝﾀﾞ名称
;DM1950 = 2220 'ｼﾘﾝﾀﾞ1_名称
;DM1951 = 2221 'ｼﾘﾝﾀﾞ2_名称
;DM1952 = 2223 'ｼﾘﾝﾀﾞ3_名称
;DM1953 = 2224 'ｼﾘﾝﾀﾞ4_名称
;
LD= DM50312 #1
NCJ #1010
;'ｼﾘﾝﾀﾞ名称
;
;DM1950 = 2220 'ｼﾘﾝﾀﾞ1_名称
;
LD CR2002
MOV #2220 DM1950
;DM1951 = 2221 'ｼﾘﾝﾀﾞ2_名称
;
LD CR2002
MOV #2221 DM1951
;DM1952 = 2223 'ｼﾘﾝﾀﾞ3_名称
;
LD CR2002
MOV #2223 DM1952
;DM1953 = 2224 'ｼﾘﾝﾀﾞ4_名称
;
LD CR2002
MOV #2224 DM1953
LABEL #1010
;
;RB3 転写ヘッドＺ軸 SW名称
LD= DM50312 #2
AND R34000
BRES DM50317 #1
CON
BRES DM50317 #2
CON
BRES DM50317 #3
CON
BRES DM50317 #4
CON
BSET DM50317 #15
CON
BRES DM50317 #15
CON
BSET DM50317 #4
;'SW名称
;'2200:前進 2201:後退 2202:上昇 2203:下降 
;'2204:ON   2205:OFF  2206:開   2207:閉
;DM1940 = 2207 'ｼﾘﾝﾀﾞ1_SW1名称
;DM1941 = 2206 'ｼﾘﾝﾀﾞ1_SW2名称
;DM1942 = 2200 'ｼﾘﾝﾀﾞ2_SW1名称
;DM1943 = 2201 'ｼﾘﾝﾀﾞ2_SW2名称
;DM1944 = 0 'ｼﾘﾝﾀﾞ3_SW1名称
;DM1945 = 0 'ｼﾘﾝﾀﾞ3_SW2名称
;DM1946 = 0 'ｼﾘﾝﾀﾞ4_SW1名称
;DM1947 = 0 'ｼﾘﾝﾀﾞ4_SW2名称
;
LD= DM50312 #2
NCJ #1012
;'SW名称
;
;'2200:前進 2201:後退 2202:上昇 2203:下降 
;
;'2204:ON   2205:OFF  2206:開   2207:閉
;
;DM1940 = 2207 'ｼﾘﾝﾀﾞ1_SW1名称
;
LD CR2002
MOV #2207 DM1940
;DM1941 = 2206 'ｼﾘﾝﾀﾞ1_SW2名称
;
LD CR2002
MOV #2206 DM1941
;DM1942 = 2200 'ｼﾘﾝﾀﾞ2_SW1名称
;
LD CR2002
MOV #2200 DM1942
;DM1943 = 2201 'ｼﾘﾝﾀﾞ2_SW2名称
;
LD CR2002
MOV #2201 DM1943
;DM1944 = 0 'ｼﾘﾝﾀﾞ3_SW1名称
;
LD CR2002
MOV #0 DM1944
;DM1945 = 0 'ｼﾘﾝﾀﾞ3_SW2名称
;
LD CR2002
MOV #0 DM1945
;DM1946 = 0 'ｼﾘﾝﾀﾞ4_SW1名称
;
LD CR2002
MOV #0 DM1946
;DM1947 = 0 'ｼﾘﾝﾀﾞ4_SW2名称
;
LD CR2002
MOV #0 DM1947
LABEL #1012
;
;'ｼﾘﾝﾀﾞ名称
;DM1950 = 2225 'ｼﾘﾝﾀﾞ1_名称
;DM1951 = 2226 'ｼﾘﾝﾀﾞ2_名称
;DM1952 = 0 'ｼﾘﾝﾀﾞ3_名称
;DM1953 = 0 'ｼﾘﾝﾀﾞ4_名称
;
LD= DM50312 #2
NCJ #1013
;'ｼﾘﾝﾀﾞ名称
;
;DM1950 = 2225 'ｼﾘﾝﾀﾞ1_名称
;
LD CR2002
MOV #2225 DM1950
;DM1951 = 2226 'ｼﾘﾝﾀﾞ2_名称
;
LD CR2002
MOV #2226 DM1951
;DM1952 = 0 'ｼﾘﾝﾀﾞ3_名称
;
LD CR2002
MOV #0 DM1952
;DM1953 = 0 'ｼﾘﾝﾀﾞ4_名称
;
LD CR2002
MOV #0 DM1953
LABEL #1013
;
;RB4 スクレーパ SW名称
LD= DM50312 #3
AND R34000
BRES DM50317 #1
CON
BRES DM50317 #2
CON
BRES DM50317 #3
CON
BRES DM50317 #4
CON
BSET DM50317 #15
CON
BRES DM50317 #15
CON
BSET DM50317 #2
;'SW名称
;'2200:前進 2201:後退 2202:上昇 2203:下降 
;'2204:ON   2205:OFF  2206:開   2207:閉
;DM1940 = 2207 'ｼﾘﾝﾀﾞ1_SW1名称
;DM1941 = 2206 'ｼﾘﾝﾀﾞ1_SW2名称
;DM1942 = 2200 'ｼﾘﾝﾀﾞ2_SW1名称
;DM1943 = 2201 'ｼﾘﾝﾀﾞ2_SW2名称
;DM1944 = 0 'ｼﾘﾝﾀﾞ3_SW1名称
;DM1945 = 0 'ｼﾘﾝﾀﾞ3_SW2名称
;DM1946 = 0 'ｼﾘﾝﾀﾞ4_SW1名称
;DM1947 = 0 'ｼﾘﾝﾀﾞ4_SW2名称
;
LD= DM50312 #3
NCJ #1011
;'SW名称
;
;'2200:前進 2201:後退 2202:上昇 2203:下降 
;
;'2204:ON   2205:OFF  2206:開   2207:閉
;
;DM1940 = 2207 'ｼﾘﾝﾀﾞ1_SW1名称
;
LD CR2002
MOV #2207 DM1940
;DM1941 = 2206 'ｼﾘﾝﾀﾞ1_SW2名称
;
LD CR2002
MOV #2206 DM1941
;DM1942 = 2200 'ｼﾘﾝﾀﾞ2_SW1名称
;
LD CR2002
MOV #2200 DM1942
;DM1943 = 2201 'ｼﾘﾝﾀﾞ2_SW2名称
;
LD CR2002
MOV #2201 DM1943
;DM1944 = 0 'ｼﾘﾝﾀﾞ3_SW1名称
;
LD CR2002
MOV #0 DM1944
;DM1945 = 0 'ｼﾘﾝﾀﾞ3_SW2名称
;
LD CR2002
MOV #0 DM1945
;DM1946 = 0 'ｼﾘﾝﾀﾞ4_SW1名称
;
LD CR2002
MOV #0 DM1946
;DM1947 = 0 'ｼﾘﾝﾀﾞ4_SW2名称
;
LD CR2002
MOV #0 DM1947
LABEL #1011
;
;'ｼﾘﾝﾀﾞ名称
;DM1950 = 2225 'ｼﾘﾝﾀﾞ1_名称
;DM1951 = 2226 'ｼﾘﾝﾀﾞ2_名称
;DM1952 = 0 'ｼﾘﾝﾀﾞ3_名称
;DM1953 = 0 'ｼﾘﾝﾀﾞ4_名称
;
LD= DM50312 #3
NCJ #1014
;'ｼﾘﾝﾀﾞ名称
;
;DM1950 = 2225 'ｼﾘﾝﾀﾞ1_名称
;
LD CR2002
MOV #2225 DM1950
;DM1951 = 2226 'ｼﾘﾝﾀﾞ2_名称
;
LD CR2002
MOV #2226 DM1951
;DM1952 = 0 'ｼﾘﾝﾀﾞ3_名称
;
LD CR2002
MOV #0 DM1952
;DM1953 = 0 'ｼﾘﾝﾀﾞ4_名称
;
LD CR2002
MOV #0 DM1953
LABEL #1014
;
;<h1/>Teaching MOVE
LDB R34000
BAND DM50314 #0
LDA DM50312
CON
MUL #16
CON
STA Z3
CON
LDA DM50312
CON
MUL #8
CON
STA Z4
CON
LDA DM50312
CON
MUL #2
CON
STA Z5
BLD DM50314 #0
MEP
ANB R35002:Z3
LD= DM50312 #0
AND MR3000
LD= DM50312 #1
AND MR3001
ORL
LD= DM50312 #2
AND MR3002
ORL
LD= DM50312 #3
AND MR3003
ORL
ANL
LDA DM50300
CON
STA EM1300:Z5
CON
SET R35000:Z3
CON
SET @R2500
STG @R2500
AND R35001:Z3
RES R35001:Z3
CON
ENDS
;Teaching HOME
LD= DM3000 #2150
BAND DM50314 #1
LDA DM50312
CON
MUL #16
CON
STA Z3
CON
LDA DM50312
CON
MUL #8
CON
STA Z4
CON
LDA DM50312
CON
MUL #2
CON
STA Z5
BLD DM50314 #1
MEP
ANB R35010:Z3
LD= DM50312 #0
AND MR3000
LD= DM50312 #1
AND MR3001
ORL
LD= DM50312 #2
AND MR3002
ORL
LD= DM50312 #3
AND MR3003
ORL
ANL
SET R35008:Z3
CON
SET @MR2502
STG @MR2502
AND R35009:Z3
RES R35009:Z3
CON
ENDS
;Teaching HOME Lamp
BLD DM10507:Z4 #1
OUT MR23005
;JOG/INC
LD<> DM50314 #0
MPS
LDA DM50312
CON
MUL #8
CON
STA Z4
MPP
LDA DM50312
CON
MUL #128
CON
STA DM50315
;Servo ON
BLD DM50314 #4
MEP
MPS
BAND DM10507:Z4 #4
OUT @R2504
CON
BRES DM10707:Z4 #4
MPP
BLDB DM10507:Z4 #4
ANB @R2504
ANL
BSET DM10707:Z4 #4
;Servo ON Lamp
BLD DM10507:Z4 #4
OUT MR23000
;Alarm Code
LD= DM50312 #0
LDA DM10506
CON
STA DM50310
LD= DM50312 #1
LDA DM10514
CON
STA DM50310
LD= DM50312 #2
LDA DM10522
CON
STA DM50310
LD= DM50312 #3
LDA DM10530
CON
STA DM50310
;Alarm RESET
LDB MR11005
ANB MR12005
ANB MR13000
ANB MR13005
OUT @MR001
BLD DM50314 #3
ANB @MR001
BSET DM10707:Z4 #3
BLDB DM50314 #3
ANB @MR001
BRES DM10707:Z4 #3
;Alarm RESET Lamp
BLD DM10507:Z4 #3
OUT MR23001
;Brake Release
BLD DM50314 #15
MEP
MPS
BAND DM10707:Z4 #15
OUT @MR2505
CON
BRES DM10707:Z4 #15
MPP
BLDB DM10707:Z4 #15
ANB @MR2505
ANL
BSET DM10707:Z4 #15
;Brake Release Lamp
BLD DM10707:Z4 #15
OUT MR23003
;<h1/>ｼﾞｮｸﾞ/ｲﾝﾁﾝｸﾞ出力
LD R44300
MC
;RB1_固定板搬送
; #5:JISL_ｼﾞｮｸﾞ/ｲﾝﾁﾝｸﾞ切替え #6:JVEL_ｼﾞｮｸﾞ速度/ｲﾝﾁﾝｸﾞ距離切替え #7:JOG-_-ｼﾞｮｸﾞ #8:JOG+_+ｼﾞｮｸﾞ
LD= DM50312 #0
MPS
AND DM50314.5
OUT DM10707.5
MRD
AND DM50314.6
OUT DM10707.6
MRD
LD DM50314.7
AND R007
ANL
OUT DM10707.7
MPP
LD DM50314.8
AND R007
ANL
OUT DM10707.8
;RB2_転写ヘッドＹ軸
; #5:JISL_ｼﾞｮｸﾞ/ｲﾝﾁﾝｸﾞ切替え #6:JVEL_ｼﾞｮｸﾞ速度/ｲﾝﾁﾝｸﾞ距離切替え #7:JOG-_-ｼﾞｮｸﾞ #8:JOG+_+ｼﾞｮｸﾞ
LD DM50314.5
OUT @MR105
LD DM50314.6
OUT @MR106
LD DM50314.7
OUT @MR107
LD DM50314.8
OUT @MR108
LD= DM50312 #1
MPS
AND @MR105
OUT DM10715.5
MRD
AND @MR106
OUT DM10715.6
MRD
AND @MR107
OUT DM10715.7
MPP
AND @MR108
OUT DM10715.8
;RB3_転写ﾍｯﾄﾞＺ軸
; #5:JISL_ｼﾞｮｸﾞ/ｲﾝﾁﾝｸﾞ切替え #6:JVEL_ｼﾞｮｸﾞ速度/ｲﾝﾁﾝｸﾞ距離切替え #7:JOG-_-ｼﾞｮｸﾞ #8:JOG+_+ｼﾞｮｸﾞ
LD= DM50312 #2
MPS
AND DM50314.5
OUT DM10723.5
MRD
AND DM50314.6
OUT DM10723.6
MRD
LD DM50314.7
AND R007
ANL
OUT DM10723.7
MPP
LD DM50314.8
AND R007
ANL
OUT DM10723.8
;RB4_転写ヘッド（Z)
; #5:JISL_ｼﾞｮｸﾞ/ｲﾝﾁﾝｸﾞ切替え #6:JVEL_ｼﾞｮｸﾞ速度/ｲﾝﾁﾝｸﾞ距離切替え #7:JOG-_-ｼﾞｮｸﾞ #8:JOG+_+ｼﾞｮｸﾞ
LD= DM50312 #3
MPS
AND DM50314.5
OUT DM10731.5
MRD
AND DM50314.6
OUT DM10731.6
MRD
LD DM50314.7
AND R007
ANL
OUT DM10731.7
MPP
LD DM50314.8
AND R007
ANL
OUT DM10731.8
MCR
;<h1/>RB1移動
;RB1_現在位置の確認
LD CR2002
MPS
CAL-.L EM10000 DM10500 DM22050
MPP
LD>=.L DM22050 -1
AND<=.L DM22050 +1
ANL
OUT MR16001
LD CR2002
MPS
CAL-.L EM10006 DM10500 DM22052
MPP
LD>=.L DM22052 -1
AND<=.L DM22052 +1
ANL
OUT MR16002
LD CR2002
MPS
CAL-.L EM10012 DM10500 DM22054
MPP
LD>=.L DM22054 -1
AND<=.L DM22054 +1
ANL
OUT MR16003
LD CR2002
MPS
CAL-.L EM10018 DM10500 DM22056
MPP
LD>=.L DM22056 -1
AND<=.L DM22056 +1
ANL
OUT MR16004
LD CR2002
MPS
CAL-.L EM10024 DM10500 DM22058
MPP
LD>=.L DM22058 -1
AND<=.L DM22058 +1
ANL
OUT MR16005
LD CR2002
MPS
CAL-.L EM10030 DM10500 DM22060
MPP
LD>=.L DM22060 -1
AND<=.L DM22060 +1
ANL
OUT MR16006
LD CR2002
MPS
CAL-.L EM10036 DM10500 DM22062
MPP
LD>=.L DM22062 -1
AND<=.L DM22062 +1
ANL
OUT MR16007
LD CR2002
MPS
CAL-.L EM10042 DM10500 DM22064
MPP
LD>=.L DM22064 -1
AND<=.L DM22064 +1
ANL
OUT MR16008
LD CR2002
MPS
CAL-.L EM10048 DM10500 DM22069
MPP
LD>=.L DM22069 -1
AND<=.L DM22069 +1
ANL
OUT MR16009
LD CR2002
MPS
CAL-.L EM10054 DM10500 DM22068
MPP
LD>=.L DM22068 -1
AND<=.L DM22068 +1
ANL
OUT MR16010
;RB1_MOVE_先頭
STG R35000
SET R35002
CON
JMP @R100
STG @R100
AND @R101
DW #0 @DM10
CON
JMP @R102
;TYPE EM1000.U,EM1300.U,EM10000.U   
;BMOV(EM10000:((EM1300-1)*6),EM1000,#6)	'指定されたPOSをEM1000へ格納
;SET (@R101)
LD @R100
NCJ #1002
;TYPE EM1000.U,EM1300.U,EM10000.U   
;
;BMOV(EM10000:((EM1300-1)*6),EM1000,#6)	'指定されたPOSをEM1000へ格納
;
LD CR2002
LDA EM1300
CON
EXT
CON
SUB.L +1
CON
MUL.L +6
CON
STA.L Z12
BMOV EM10000:Z12 EM1000 #6
;SET (@R101)
LD CR2002
SET @R101
LABEL #1002
;
LDP @R102
RES @R101
CON
MSTRT CON_MOVE EM1000 EM1004 EM1005 DM10500 DM10700 @DM10
STG @R102
MPS
AND= @DM10 #20
JMP @R103
MPP
LD<> @DM10 #20
AND<> @DM10 #0
ANL
SET R35003
CON
JMP @R103
STG @R103
RES R35002
CON
SET R35001
CON
ENDS
;RB1 PUSH
STG R35004
SET R35006
CON
JMP @R104
STG @R104
AND @R105
DW #0 @DM11
CON
JMP @R106
;TYPE EM1000.U,EM1300.U,EM10000.U   
;BMOV(EM10000:((EM1300-1)*6),EM1000,#6)	'指定されたPOSをEM1000へ格納
;SET (@R105)
LD @R104
NCJ #1003
;TYPE EM1000.U,EM1300.U,EM10000.U   
;
;BMOV(EM10000:((EM1300-1)*6),EM1000,#6)	'指定されたPOSをEM1000へ格納
;
LD CR2002
LDA EM1300
CON
EXT
CON
SUB.L +1
CON
MUL.L +6
CON
STA.L Z12
BMOV EM10000:Z12 EM1000 #6
;SET (@R105)
LD CR2002
SET @R105
LABEL #1003
;
;PUSH ﾏｸﾛは2種類準備しています（任意で選択して下さい）
;CON_PUSH	押付け動作用
;CON_WD_PUSH	溶着向け動作用
;
;注1)速度(SPEED)はPUSH開始位置へ移動するまでの速度。
;注2)押付け動作中速度はRBﾊﾟﾗﾒｰﾀにて設定してください。
;注3)PUSH動作ではPush Wideが押付け幅となります。
;注4)PUSH動作には電流値も必要です。
;	※押付け電流制限値（単位：%）
;	0〜100％　※RCP4はMAX70％まで
;	MAXを超えた値を入力するとｴﾗｰとなります。
;	→ｺﾝﾄﾛｰﾗへは0〜255で入力
;注5)WD_PUSHマクロは、Break offが入力されると位置情報(PUSH_Result)が格納され終了となります。
;	ﾀﾞﾐｰ接点を任意のﾃﾞﾊﾞｲｽに変更して下さい。
;
;Push_Result一時保管ﾃﾞﾊﾞｲｽ	@DM100〜@DM138(2ﾜｰﾄﾞ)
LDP @R106
RES @R105
CON
MPS
LDA #70
CON
MUL #25500
CON
DIV #10000
CON
STA EM1006
MPP
MSTRT CON_PUSH EM1000 EM1002 EM1004 EM1005 EM1006 DM10500 DM10700 @DM11
STG @R106
MPS
AND= @DM11 #20
JMP @R107
MPP
LD<> @DM11 #20
AND<> @DM11 #0
ANL
SET R35003
CON
JMP @R107
STG @R107
RES R35006
CON
SET R35005
CON
ENDS
;RB1 HOME
STG R35008
DW #0 @DM12
CON
SET R35010
CON
JMP @R108
;原点復帰ﾏｸﾛは2種類準備しています（任意で選択して下さい）
;CON_HOME	通常用
;CON_HOME2	原点確認仕様用
;			→原点ｾﾝｻｰをSensor_INに指定してください。ｾﾝｻｰはA接点を想定しています。
;			#20	=	正常終了
;			#21	=	RB応答なし
;			#22	=	ｽﾃｰﾀｽ異常
;			#25	=	原点異常
;			#26	=	原点ｾﾝｻｰ異常
LDP @R108
MPS
MSTRT CON_HOME DM10500 DM10700 @DM12
MPP
AND MR9915
MSTRT CON_HOME2 DM10500 DM10700 @DM12 R8001
STG @R108
MPS
AND= @DM12 #20
JMP @R109
MPP
LD<> @DM12 #20
AND<> @DM12 #0
ANL
SET R35003
CON
JMP @R109
STG @R109
SET R35009
CON
RES R35010
CON
ENDS
;<h1/>RB2移動
;RB2_現在位置の確認
LD CR2002
MPS
CAL-.L EM10600 DM10508 DM25050
MPP
LD>=.L DM25050 -1
AND<=.L DM25050 +1
ANL
OUT MR16101
LD CR2002
MPS
CAL-.L EM10606 DM10508 DM25052
MPP
LD>=.L DM25052 -1
AND<=.L DM25052 +1
ANL
OUT MR16102
LD CR2002
MPS
CAL-.L EM10612 DM10508 DM25054
MPP
LD>=.L DM25054 -1
AND<=.L DM25054 +1
ANL
OUT MR16103
LD CR2002
MPS
CAL-.L EM10618 DM10508 DM25056
MPP
LD>=.L DM25056 -1
AND<=.L DM25056 +1
ANL
OUT MR16104
LD CR2002
MPS
CAL-.L EM10624 DM10508 DM25058
MPP
LD>=.L DM25058 -1
AND<=.L DM25058 +1
ANL
OUT MR16105
LD CR2002
MPS
CAL-.L EM10630 DM10508 DM25060
MPP
LD>=.L DM25060 -1
AND<=.L DM25060 +1
ANL
OUT MR16106
LD CR2002
MPS
CAL-.L EM10636 DM10508 DM25062
MPP
LD>=.L DM25062 -1
AND<=.L DM25062 +1
ANL
OUT MR16107
LD CR2002
MPS
CAL-.L EM10642 DM10508 DM25064
MPP
LD>=.L DM25064 -1
AND<=.L DM25064 +1
ANL
OUT MR16108
LD CR2002
MPS
CAL-.L EM10648 DM10508 DM25066
MPP
LD>=.L DM25066 -1
AND<=.L DM25066 +1
ANL
OUT MR16109
LD CR2002
MPS
CAL-.L EM10654 DM10508 DM25068
MPP
LD>=.L DM25068 -1
AND<=.L DM25068 +1
ANL
OUT MR16110
LD CR2002
MPS
CAL-.L EM10660 DM10508 DM25070
MPP
LD>=.L DM25070 -1
AND<=.L DM25070 +1
ANL
OUT MR16111
LD CR2002
MPS
CAL-.L EM10666 DM10508 DM25072
MPP
LD>=.L DM25072 -1
AND<=.L DM25072 +1
ANL
OUT MR16112
LD CR2002
MPS
CAL-.L EM10672 DM10508 DM25074
MPP
LD>=.L DM25074 -1
AND<=.L DM25074 +1
ANL
OUT MR16113
LD CR2002
MPS
CAL-.L EM10678 DM10508 DM25076
MPP
LD>=.L DM25076 -1
AND<=.L DM25076 +1
ANL
OUT MR16114
LD CR2002
MPS
CAL-.L EM10684 DM10508 DM25078
MPP
LD>=.L DM25078 -1
AND<=.L DM25078 +1
ANL
OUT MR16115
;RB2_MOVE_先頭
STG R35100
SET R35102
CON
JMP @R200
STG @R200
AND @R201
DW #0 @DM13
CON
JMP @R202
;TYPE EM1008.U,EM1302.U,EM10600.U   
;BMOV(EM10600:((EM1302-1)*6),EM1008,#6)	'指定されたPOSをEM1008へ格納
;SET (@R201)
LD @R200
NCJ #1004
;TYPE EM1008.U,EM1302.U,EM10600.U   
;
;BMOV(EM10600:((EM1302-1)*6),EM1008,#6)	'指定されたPOSをEM1008へ格納
;
LD CR2002
LDA EM1302
CON
EXT
CON
SUB.L +1
CON
MUL.L +6
CON
STA.L Z12
BMOV EM10600:Z12 EM1008 #6
;SET (@R201)
LD CR2002
SET @R201
LABEL #1004
;
LDP @R202
RES @R201
CON
MSTRT CON_MOVE EM1008 EM1012 EM1013 DM10508 DM10708 @DM13
STG @R202
MPS
AND= @DM13 #20
JMP @R203
MPP
LD<> @DM13 #20
AND<> @DM13 #0
ANL
SET R35103
CON
JMP @R203
STG @R203
RES R35102
CON
SET R35101
CON
ENDS
;RB2 PUSH
STG R35104
SET R35106
CON
JMP @R204
STG @R204
AND @R205
DW #0 @DM14
CON
JMP @R206
;TYPE EM1008.U,EM1302.U,EM10600.U   
;BMOV(EM10600:((EM1302-1)*6),EM1008,#6)	'指定されたPOSをEM1008へ格納
;SET (@R205)
LD @R204
NCJ #1005
;TYPE EM1008.U,EM1302.U,EM10600.U   
;
;BMOV(EM10600:((EM1302-1)*6),EM1008,#6)	'指定されたPOSをEM1008へ格納
;
LD CR2002
LDA EM1302
CON
EXT
CON
SUB.L +1
CON
MUL.L +6
CON
STA.L Z12
BMOV EM10600:Z12 EM1008 #6
;SET (@R205)
LD CR2002
SET @R205
LABEL #1005
;
LDP @R206
RES @R205
CON
MPS
LDA #70
CON
MUL #25500
CON
DIV #10000
CON
STA EM1014
MPP
MSTRT CON_PUSH EM1008 EM1010 EM1012 EM1013 EM1014 DM10508 DM10708 @DM14
STG @R206
MPS
AND= @DM14 #20
JMP @R207
MPP
LD<> @DM14 #20
AND<> @DM14 #0
ANL
SET R35103
CON
JMP @R207
STG @R207
RES R35106
CON
SET R35105
CON
ENDS
;RB2 HOME
STG R35108
DW #0 @DM15
CON
SET R35110
CON
JMP @R208
LDP @R208
MPS
MSTRT CON_HOME DM10508 DM10708 @DM15
MPP
AND MR9915
MSTRT CON_HOME2 DM10508 DM10708 @DM15 R8002
STG @R208
MPS
AND= @DM15 #20
JMP @R209
MPP
LD<> @DM15 #20
AND<> @DM15 #0
ANL
SET R35103
CON
JMP @R209
STG @R209
SET R35109
CON
RES R35110
CON
ENDS
;<h1/>RB3移動
;RB3_現在位置の確認
;
LD CR2002
MPS
CAL-.L EM11200 DM10516 DM24050
MPP
LD>=.L DM24050 -2
AND<=.L DM24050 +2
ANL
OUT MR16201
LD CR2002
MPS
CAL-.L EM11206 DM10516 DM24052
MPP
LD>=.L DM24052 -2
AND<=.L DM24052 +2
ANL
OUT MR16202
LD CR2002
MPS
CAL-.L EM11212 DM10516 DM24054
MPP
LD>=.L DM24054 -2
AND<=.L DM24054 +2
ANL
OUT MR16203
LD CR2002
MPS
CAL-.L EM11218 DM10516 DM24056
MPP
LD>=.L DM24056 -2
AND<=.L DM24056 +2
ANL
OUT MR16204
LD CR2002
MPS
CAL-.L EM11224 DM10516 DM24058
MPP
LD>=.L DM24058 -2
AND<=.L DM24058 +2
ANL
OUT MR16205
LD CR2002
MPS
CAL-.L EM11230 DM10516 DM24060
MPP
LD>=.L DM24060 -2
AND<=.L DM24060 +2
ANL
OUT MR16206
LD CR2002
MPS
CAL-.L EM11236 DM10516 DM24062
MPP
LD>=.L DM24062 -2
AND<=.L DM24062 +2
ANL
OUT MR16207
LD CR2002
MPS
CAL-.L EM11242 DM10516 DM24064
MPP
LD>=.L DM24064 -2
AND<=.L DM24064 +2
ANL
OUT MR16208
LD CR2002
MPS
CAL-.L EM11254 DM10516 DM24068
MPP
LD>=.L DM24068 -2
AND<=.L DM24068 +2
ANL
OUT MR16210
;RB3_MOVE_先頭
STG R35200
SET R35202
CON
JMP @R300
STG @R300
AND @R301
DW #0 @DM16
CON
JMP @R302
;TYPE EM1016.U,EM1304.U,EM12000.U  
;BMOV(EM11200:((EM1304-1)*6),EM1016,#6)	'指定されたPOSをEM1016へ格納
;SET (@R301)
LD @R300
NCJ #1006
;TYPE EM1016.U,EM1304.U,EM12000.U  
;
;BMOV(EM11200:((EM1304-1)*6),EM1016,#6)	'指定されたPOSをEM1016へ格納
;
LD CR2002
LDA EM1304
CON
EXT
CON
SUB.L +1
CON
MUL.L +6
CON
STA.L Z12
BMOV EM11200:Z12 EM1016 #6
;SET (@R301)
LD CR2002
SET @R301
LABEL #1006
;
LDP @R302
RES @R301
CON
MSTRT CON_MOVE EM1016 EM1020 EM1021 DM10516 DM10716 @DM16
STG @R302
MPS
AND= @DM16 #20
JMP @R303
MPP
LD<> @DM16 #20
AND<> @DM16 #0
ANL
SET R35203
CON
JMP @R303
STG @R303
RES R35202
CON
SET R35201
CON
ENDS
;RB3 PUSH
STG R35204
SET R35206
CON
JMP @R304
STG @R304
AND @R305
DW #0 @DM17
CON
JMP @R306
;TYPE EM1016.U,EM1304.U,EM12000.U  
;BMOV(EM11200:((EM1304-1)*6),EM1016,#6)	'指定されたPOSをEM1016へ格納
;SET (@R305)
LD @R304
NCJ #1007
;TYPE EM1016.U,EM1304.U,EM12000.U  
;
;BMOV(EM11200:((EM1304-1)*6),EM1016,#6)	'指定されたPOSをEM1016へ格納
;
LD CR2002
LDA EM1304
CON
EXT
CON
SUB.L +1
CON
MUL.L +6
CON
STA.L Z12
BMOV EM11200:Z12 EM1016 #6
;SET (@R305)
LD CR2002
SET @R305
LABEL #1007
;
LDP @R306
RES @R305
CON
MPS
LDA #70
CON
MUL #25500
CON
DIV #10000
CON
STA EM1022
MPP
MSTRT CON_PUSH EM1016 EM1018 EM1020 EM1021 EM1022 DM10516 DM10716 @DM17
STG @R306
MPS
AND= @DM17 #20
JMP @R307
MPP
LD<> @DM17 #20
AND<> @DM17 #0
ANL
SET R35203
CON
JMP @R307
STG @R307
RES R35206
CON
SET R35205
CON
ENDS
;RB3 HOME
STG R35208
DW #0 @DM18
CON
SET R35210
CON
JMP @R308
LDP @R308
MPS
AND MR9915
MSTRT CON_HOME DM10516 DM10716 @DM18
MPP
MSTRT CON_HOME2 DM10516 DM10716 @DM18 R4500
STG @R308
MPS
AND= @DM18 #20
JMP @R309
MPP
LD<> @DM18 #20
AND<> @DM18 #0
ANL
SET R35203
CON
JMP @R309
STG @R309
SET R35209
CON
RES R35210
CON
ENDS
;<h1/>RB4移動
;RB4_現在位置確認
LD CR2002
MPS
CAL-.L EM11800 DM10524 DM24070
MPP
LD>=.L DM24070 -2
AND<=.L DM24070 +2
ANL
OUT MR16301
LD CR2002
MPS
CAL-.L EM11806 DM10524 DM24072
MPP
LD>=.L DM24072 -2
AND<=.L DM24072 +2
ANL
OUT MR16302
LD CR2002
MPS
CAL-.L EM11812 DM10524 DM24074
MPP
LD>=.L DM24074 -3
AND<=.L DM24074 +3
ANL
OUT MR16303
;RB4_MOVE_先頭
STG R35300
SET R35302
CON
JMP @R400
STG @R400
AND @R401
DW #0 @DM19
CON
JMP @R402
;TYPE EM1024.U,EM1306.U,EM13000.U   
;BMOV(EM11800:((EM1306-1)*6),EM1024,#6)	'指定されたPOSをEM1024へ格納
;SET (@R401)
LD @R400
NCJ #1008
;TYPE EM1024.U,EM1306.U,EM13000.U   
;
;BMOV(EM11800:((EM1306-1)*6),EM1024,#6)	'指定されたPOSをEM1024へ格納
;
LD CR2002
LDA EM1306
CON
EXT
CON
SUB.L +1
CON
MUL.L +6
CON
STA.L Z12
BMOV EM11800:Z12 EM1024 #6
;SET (@R401)
LD CR2002
SET @R401
LABEL #1008
;
LDP @R402
RES @R401
CON
MSTRT CON_MOVE EM1024 EM1028 EM1029 DM10524 DM10724 @DM19
STG @R402
MPS
AND= @DM19 #20
JMP @R403
MPP
LD<> @DM19 #20
AND<> @DM19 #0
ANL
SET R35303
CON
JMP @R403
STG @R403
RES R35302
CON
SET R35301
CON
ENDS
;RB4 PUSH
STG R35304
SET R35306
CON
JMP @R404
STG @R404
AND @R405
DW #0 @DM20
CON
JMP @R406
;TYPE EM1024.U,EM1306.U,EM13000.U   
;BMOV(EM11800:((EM1306-1)*6),EM1024,#6)	'指定されたPOSをEM1024へ格納
;SET (@R405)
LD @R404
NCJ #1009
;TYPE EM1024.U,EM1306.U,EM13000.U   
;
;BMOV(EM11800:((EM1306-1)*6),EM1024,#6)	'指定されたPOSをEM1024へ格納
;
LD CR2002
LDA EM1306
CON
EXT
CON
SUB.L +1
CON
MUL.L +6
CON
STA.L Z12
BMOV EM11800:Z12 EM1024 #6
;SET (@R405)
LD CR2002
SET @R405
LABEL #1009
;
LDP @R406
RES @R405
CON
MPS
LDA #70
CON
MUL #25500
CON
DIV #10000
CON
STA EM1030
MPP
MSTRT CON_PUSH EM1024 EM1026 EM1028 EM1029 EM1030 DM10524 DM10724 @DM20
STG @R406
MPS
AND= @DM20 #20
JMP @R407
MPP
LD<> @DM20 #20
AND<> @DM20 #0
ANL
SET R35303
CON
JMP @R407
STG @R407
RES R35306
CON
SET R35305
CON
ENDS
;RB4 HOME
STG R35308
DW #0 @DM21
CON
SET R35310
CON
JMP @R408
LDP @R408
MPS
AND MR9915
MSTRT CON_HOME DM10524 DM10724 @DM21
MPP
MSTRT CON_HOME2 DM10524 DM10724 @DM21 R4100
STG @R408
MPS
AND= @DM21 #20
JMP @R409
MPP
LD<> @DM21 #20
AND<> @DM21 #0
ANL
SET R35303
CON
JMP @R409
STG @R409
SET R35309
CON
RES R35310
CON
ENDS
END
ENDH
