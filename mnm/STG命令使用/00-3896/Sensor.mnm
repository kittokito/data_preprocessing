DEVICE:53
;MODULE:Sensor
;MODULE_TYPE:0
;<h1/>TASK 0　ｼﾘﾝﾀﾞｰ ｾﾝｻｰ監視
LD R41000
ANB @R001
ANB R59915
MC
LD MR7303
LDB R4400
LD R4401
AND R4400
ORL
ANL
ANB R39004
TMR @1 #50
CON
AND @T1
DW #4400 DM60009
CON
SET MR4400
LDB MR7303
LDB R4401
LD R4401
AND R4400
ORL
ANL
ANB R39004
TMR @2 #50
CON
AND @T2
DW #4401 DM60009
CON
SET MR4401
LD MR7304
LDB R4402
LD R4403
AND R4402
ORL
ANL
ANB R39004
TMR @3 #50
CON
AND @T3
DW #4402 DM60009
CON
SET MR4402
LDB MR7304
LDB R4403
LD R4403
AND R4402
ORL
ANL
ANB R39004
TMR @4 #50
CON
AND @T4
DW #4403 DM60009
CON
SET MR4403
LD MR7305
LDB R4404
LD R4405
AND R4404
ORL
ANL
ANB R39004
TMR @5 #50
CON
AND @T5
DW #4404 DM60009
CON
SET MR4404
LDB MR7305
LDB R4405
LD R4405
AND R4404
ORL
ANL
ANB R39004
TMR @6 #50
CON
AND @T6
DW #4405 DM60009
CON
SET MR4405
MCR
;TASK0 Sensor ERROR
LD>= DM60009 #4400
AND<= DM60009 #4406
ANB R39004
SET R39004
CON
DW #1 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R100
CON
SET @R000
STG @R000
AND @R101
RES @R101
CON
RES R39004
CON
ZRES MR4400 MR4406
CON
DW #0 DM60009
CON
OUT @R001
CON
ENDS
;MyTask0 Error Process Substance/エラー処理実体
STG @R100
ANB R39002
MPS
ZRES @R105 @R108
CON
LDA @DM9
CON
TBCD
CON
STA @DM10
CON
DISN @DM10 @DM3 #4
MRD
DW #0 @DM0
CON
BMOV @DM0 DM60000 #7
MPP
SET R39000
CON
SET @R102
CON
JMP @R103
STG @R103
AND R39002
AND= DM60008 @DM1
JMP @R104
STG @R104
ANB R39002
RES @R102
CON
SET @R101
CON
ENDS
;<h1/>TASK 1　ｼﾘﾝﾀﾞｰ ｾﾝｻｰ監視
LD R41001
ANB @R003
ANB R59915
MC
LD R7210
LDB R4501
LD R4501
AND R4502
ORL
ANL
ANB R39004
TMR @11 #50
CON
AND @T11
DW #4501 DM60009
CON
SET MR4501
LDB R7210
LDB R4502
LD R4501
AND R4502
ORL
ANL
ANB R39004
TMR @12 #50
CON
AND @T12
DW #4502 DM60009
CON
SET MR4502
MCR
;TASK1 Sensor ERROR
LD>= DM60009 #4501
AND<= DM60009 #4502
ANB R39004
SET R39004
CON
DW #1 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R200
CON
SET @R002
STG @R002
AND @R201
RES @R201
CON
RES R39004
CON
ZRES MR4501 MR4502
CON
DW #0 DM60009
CON
OUT @R003
CON
ENDS
;MyTask1 Error Process Substance/エラー処理実体
STG @R200
ANB R39002
MPS
ZRES @R105 @R108
CON
LDA @DM9
CON
TBCD
CON
STA @DM10
CON
DISN @DM10 @DM3 #4
MRD
DW #0 @DM0
CON
BMOV @DM0 DM60000 #7
MPP
SET R39000
CON
SET @R202
CON
JMP @R203
STG @R203
AND R39002
AND= DM60008 @DM1
JMP @R204
STG @R204
ANB R39002
RES @R202
CON
SET @R201
CON
ENDS
;<h1/>TASK 2　ｼﾘﾝﾀﾞｰ ｾﾝｻｰ監視
LD R41002
ANB @R005
ANB R59915
MC
LD R7211
LDB R4005
LD R4005
AND R4006
ORL
ANL
ANB R39004
TMR @21 #50
CON
AND @T21
DW #4005 DM60009
CON
SET MR4005
LD R7212
LDB R4006
LD R4005
AND R4006
ORL
ANL
ANB R39004
TMR @22 #50
CON
AND @T22
DW #4006 DM60009
CON
SET MR4006
LD R7213
LDB R4007
LD R4007
AND R4008
ORL
ANL
ANB R39004
TMR @23 #50
CON
AND @T23
DW #4007 DM60009
CON
SET MR4007
LD R7214
LDB R4008
LD R4007
AND R4008
ORL
ANL
ANB R39004
TMR @24 #50
CON
AND @T24
DW #4008 DM60009
CON
SET MR4008
LD R7215
LDB R4009
LD R4009
AND R4010
ORL
ANL
ANB R39004
TMR @25 #50
CON
AND @T25
DW #4009 DM60009
CON
SET MR4009
LD R7300
LDB R4010
LD R4009
AND R4010
ORL
ANL
ANB R39004
TMR @26 #50
CON
AND @T26
DW #4010 DM60009
CON
SET MR4010
LDB R1104
ANB R1106
INV
ANB R4012
TMR @30 #50
CON
AND @T30
DW #4012 DM60009
CON
SET MR4012
LDB R1103
ANB R1107
INV
ANB R4013
TMR @31 #50
CON
AND @T31
DW #4013 DM60009
CON
SET MR4013
LD CR2003
AND R4101
ANB R39004
TMR @27 #5
CON
AND @T27
DW #4101 DM60009
CON
SET MR4101
LD CR2003
AND R4102
ANB R39004
TMR @28 #5
CON
AND @T28
DW #4102 DM60009
CON
SET MR4102
LD R46112
AND R1106
AND R4014
ANB R39004
TMR @29 #50
CON
AND @T29
DW #4014 DM60009
CON
SET MR4014
MCR
;TASK2 Sensor ERROR
LD>= DM60009 #4005
AND<= DM60009 #4010
LD>= DM60009 #4101
AND<= DM60009 #4102
ORL
LD>= DM60009 #4012
AND<= DM60009 #4014
ORL
ANB R39004
SET R39004
CON
DW #1 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R300
CON
SET @R004
STG @R004
AND @R301
RES @R301
CON
RES R39004
CON
RES MR4014
CON
ZRES MR4005 MR4012
CON
ZRES MR4101 MR4102
CON
DW #0 DM60009
CON
OUT @R005
CON
ENDS
;MyTask2 Error Process Substance/エラー処理実体
STG @R300
ANB R39002
MPS
ZRES @R105 @R108
CON
LDA @DM9
CON
TBCD
CON
STA @DM10
CON
DISN @DM10 @DM3 #4
MRD
DW #0 @DM0
CON
BMOV @DM0 DM60000 #7
MPP
SET R39000
CON
SET @R302
CON
JMP @R303
STG @R303
AND R39002
AND= DM60008 @DM1
JMP @R304
STG @R304
ANB R39002
RES @R302
CON
SET @R301
CON
ENDS
;<h1/>TASK 3　ｼﾘﾝﾀﾞｰ ｾﾝｻｰ監視
LD R41003
ANB @R007
ANB R59915
MC
LD R7202
LDB R4001
LD R4002
AND R4001
ORL
ANL
ANB R39004
TMR @32 #50
CON
AND @T32
DW #4001 DM60009
CON
SET MR4001
LDB R7202
LDB R4002
LD R4002
AND R4001
ORL
ANL
ANB R39004
TMR @33 #50
CON
AND @T33
DW #4002 DM60009
CON
SET MR4002
LD R7204
LDB R4003
LD R4004
AND R4003
ORL
ANL
ANB R39004
TMR @34 #50
CON
AND @T34
DW #4003 DM60009
CON
SET MR4003
LDB R7204
LDB R4004
LD R4004
AND R4003
ORL
ANL
ANB R39004
TMR @35 #50
CON
AND @T35
DW #4004 DM60009
CON
SET MR4004
MCR
;TASK3 Sensor ERROR
LD>= DM60009 #4001
AND<= DM60009 #4004
OR= DM60009 #4115
ANB R39004
SET R39004
CON
DW #1 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R400
CON
SET @R006
STG @R006
AND @R401
RES @R401
CON
RES R39004
CON
RES MR4115
CON
ZRES MR4001 MR4004
CON
DW #0 DM60009
CON
OUT @R007
CON
ENDS
;MyTask3 Error Process Substance/エラー処理実体
STG @R400
ANB R39002
MPS
ZRES @R105 @R108
CON
LDA @DM9
CON
TBCD
CON
STA @DM10
CON
DISN @DM10 @DM3 #4
MRD
DW #0 @DM0
CON
BMOV @DM0 DM60000 #7
MPP
SET R39000
CON
SET @R402
CON
JMP @R403
STG @R403
AND R39002
AND= DM60008 @DM1
JMP @R404
STG @R404
ANB R39002
RES @R402
CON
SET @R401
CON
ENDS
;<h1/>TASK 4　ｼﾘﾝﾀﾞｰ ｾﾝｻｰ監視
LD R41004
ANB @R009
ANB R59915
MC
LD R7206
LDB R4200
LD R4200
AND R4201
ORL
ANL
ANB R39004
TMR @41 #50
CON
AND @T41
DW #4200 DM60009
CON
SET MR4200
LD R7207
LDB R4201
LD R4200
AND R4201
ORL
ANL
ANB R39004
TMR @42 #50
CON
AND @T42
DW #4201 DM60009
CON
SET MR4201
LD R7206
LDB R4202
LD R4203
AND R4202
ORL
ANL
ANB R39004
TMR @43 #50
CON
AND @T43
DW #4202 DM60009
CON
SET MR4202
LD R7207
LDB R4203
LD R4203
AND R4202
ORL
ANL
ANB R39004
TMR @44 #50
CON
AND @T44
DW #4203 DM60009
CON
SET MR4203
LD R7208
LDB R4204
LD R4205
AND R4204
ORL
ANL
ANB R39004
TMR @45 #50
CON
AND @T45
AND CR2003
DW #4204 DM60009
CON
SET MR4204
LD R7209
LDB R4205
LD R4205
AND R4204
ORL
ANL
ANB R39004
TMR @46 #50
CON
AND @T46
DW #4205 DM60009
CON
SET MR4205
MCR
;TASK4 Sensor ERROR
LD>= DM60009 #4200
AND<= DM60009 #4205
LD>= DM60009 #4300
AND<= DM60009 #4308
ORL
ANB R39004
SET R39004
CON
DW #1 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R500
CON
SET @R008
STG @R008
AND @R501
RES @R501
CON
RES R39004
CON
ZRES MR4200 MR4205
CON
ZRES MR4300 MR4308
CON
DW #0 DM60009
CON
OUT @R009
CON
ENDS
;MyTask4 Error Process Substance/エラー処理実体
STG @R500
ANB R39002
MPS
ZRES @R105 @R108
CON
LDA @DM9
CON
TBCD
CON
STA @DM10
CON
DISN @DM10 @DM3 #4
MRD
DW #0 @DM0
CON
BMOV @DM0 DM60000 #7
MPP
SET R39000
CON
SET @R502
CON
JMP @R503
STG @R503
AND R39002
AND= DM60008 @DM1
JMP @R504
STG @R504
ANB R39002
RES @R502
CON
SET @R501
CON
ENDS
;<h1/>TASK 5　ｼﾘﾝﾀﾞｰ ｾﾝｻｰ監視
LD R41005
ANB @R011
ANB R59915
MC
LD R7301
LDB R4408
LD R4409
AND R4408
ORL
ANL
ANB R39004
TMR @52 #100
CON
AND @T52
DW #4408 DM60009
CON
SET MR4408
LD R7302
LDB R4409
LD R4409
AND R4408
ORL
ANL
ANB R39004
TMR @53 #100
CON
AND @T53
DW #4409 DM60009
CON
SET MR4409
MCR
;TASK5 Sensor ERROR
LD>= DM60009 #4408
AND<= DM60009 #4409
ANB R39004
SET R39004
CON
DW #1 @DM1
CON
DW #1000 @DM9
CON
LDA DM60009
CON
STA @DM2
CON
SET @R600
CON
SET @R010
STG @R010
AND @R601
RES @R601
CON
RES R39004
CON
ZRES MR4408 MR4409
CON
DW #0 DM60009
CON
OUT @R011
CON
ENDS
;MyTask5 Error Process Substance/エラー処理実体
STG @R600
ANB R39002
MPS
ZRES @R105 @R108
CON
LDA @DM9
CON
TBCD
CON
STA @DM10
CON
DISN @DM10 @DM3 #4
MRD
DW #0 @DM0
CON
BMOV @DM0 DM60000 #7
MPP
SET R39000
CON
SET @R602
CON
JMP @R603
STG @R603
AND R39002
AND= DM60008 @DM1
JMP @R604
STG @R604
ANB R39002
RES @R602
CON
SET @R601
CON
ENDS
;<h1/>ﾙﾐﾗｰ残検出・満杯検出　WarningDisp
;2014.12.25 shinta　WARNING追加
LD CR2002
MPS
ANB MR9700
MPS
AND R4000
RES @R700
MPP
ANB R4000
TMR @7 #50
CON
AND @T7
ANB @R700
MPS
MSTRT WARNING_DISP #1 #1 #1 #0
MPP
BAND.D DM9000 #1
SET @R700
MPP
ANB MR9701
MPS
ANB R4011
RES @R701
MPP
AND R4011
TMR @8 #50
CON
AND @T8
ANB @R701
MPS
MSTRT WARNING_DISP #1 #2 #1 #0
MPP
BAND.D DM9000 #2
SET @R701
END
ENDH
