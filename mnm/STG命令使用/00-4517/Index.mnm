DEVICE:53
;MODULE:Index
;MODULE_TYPE:0
;***************************************
; 非常停止
; Emergency Stop 
;***************************************
LD R40013                ; 非常停止
OR @MR000                ; Emergency STOP
ZRES @MR100 @MR4915      ; Err281 INDEX
CON
OUT @MR000               ; Emergency STOP
TMR @39 #5               ; ｳｴｲﾄﾀｲﾏｰ39
LD @T39                  ; ｳｴｲﾄﾀｲﾏｰ39
MDSTOP Index
;Flags
;UT1のﾜｰｸﾁｪｯｸﾌﾗｸﾞ
;UT1 Work Check Flag
LDB R4000                ; INDEX 1ST ｶｰﾄﾘｯｼﾞ有
AND R4001                ; INDEX 1ST ｶｰﾄﾘｯｼﾞ浮き確認 (外)
AND R4002                ; INDEX 1ST ｶｰﾄﾘｯｼﾞ浮き確認 (内)
OUT @MR010               ; 1STにｹｰｽ無し
;動作ﾊﾟﾗﾒｰﾀ
;Operation Parameter
LD= DM1402 #1            ; AUTO_PARAMETER
OUT @MR013               ; INDEX AUTO Parameter OK
;***************************************
; ﾎﾟｰｽﾞ ･ ｴﾗｰ 監視
; Pause ･ Error Check 
;***************************************
LDB R40005               ; ﾎﾟｰｽﾞ中
ANB R41015               ; TASK16 ERROR中
OUT @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
LD R42212                ; INDEX監視1
AND R42211               ; ﾗｲﾄｶｰﾃﾝ遮光
RES R42212               ; INDEX監視1
CON
RES MR2108               ; INDEX 起動
CON
RES MR2109               ; INDEX ｱﾝｻ
CON
RES MR2106               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 1桁目
CON
ZRES MR2111 MR2115       ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 0ﾋﾞｯﾄ  1  INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 4ﾋﾞｯﾄ　16
CON
RES @MR4100              ; INDEX 90°CW回転SUB
CON
ZRES @MR4000 @MR4215     ; INDEX原点復帰SUB
;***************************************
; INDEXｼﾘﾝﾀﾞｲﾝﾀｰﾛｯｸﾁｪｯｸ
; INDEX Cylinder Interlock Check 
;***************************************
LDB MR6702               ; 1ST ﾌｫｰﾑ検出上下 下降
ANB R4204                ; 1ST ﾌｫｰﾑ検出上下 下降端
AND R4205                ; 1ST ﾌｫｰﾑ検出上下 上昇端
OUT @MR001               ; ST1 干渉ｼﾘﾝﾀﾞ全て逃げ
LDB MR6410               ; 2ST Color ﾘｰｸ検査 検査ﾍｯﾄﾞ下降
ANB R4302                ; 2ST Color ﾘｰｸ検査 検査ﾍｯﾄﾞ下降端
AND R4303                ; 2ST Color ﾘｰｸ検査 検査ﾍｯﾄﾞ上昇端
ANB MR6412               ; 2ST Black ﾘｰｸ検査 検査ﾍｯﾄﾞ下降
ANB R4304                ; 2ST Black ﾘｰｸ検査 検査ﾍｯﾄﾞ下降端
AND R4305                ; 2ST Black ﾘｰｸ検査 検査ﾍｯﾄﾞ上昇端
OUT @MR002               ; ST2 干渉ｼﾘﾝﾀﾞ全て逃げ
LDB MR6202               ; 3ST ｶｰﾄﾘｯｼﾞｶﾞｲﾄﾞ (BK) 下降
AND MR6203               ; 3ST ｶｰﾄﾘｯｼﾞｶﾞｲﾄﾞ(BK) 上昇
ANB R4606                ; 3ST ｶｰﾄﾘｯｼﾞｶﾞｲﾄﾞ (BK) 下降端
AND R4607                ; 3ST ｶｰﾄﾘｯｼﾞｶﾞｲﾄﾞ (BK) 上昇端
ANB MR6200               ; 3ST ｶｰﾄﾘｯｼﾞｶﾞｲﾄﾞ (CL) 下降
AND MR6201               ; 3ST ｶｰﾄﾘｯｼﾞｶﾞｲﾄﾞ(CL) 上昇
ANB R4608                ; 3ST ｶｰﾄﾘｯｼﾞｶﾞｲﾄﾞ (CL) 下降端
AND R4609                ; 3ST ｶｰﾄﾘｯｼﾞｶﾞｲﾄﾞ (CL) 上昇端
ANB MR6206               ; 3ST Color 注入部上下 下降
AND MR6207               ; 3ST Color 注入部上下 上昇
ANB R4502                ; 3ST Color 注入部上下 下降端
AND R4503                ; 3ST Color 注入部上下 上昇端
ANB MR6208               ; 3ST Black 注入部上下 下降
AND MR6209               ; 3ST Black 注入部上下 上昇
ANB R4500                ; 3ST Black 注入部上下 下降端
AND R4501                ; 3ST Black 注入部上下 上昇端
OUT @MR003               ; ST3 干渉ｼﾘﾝﾀﾞ全て逃げ
LDB MR6810               ; 4ST 除材ﾊﾝﾄﾞ 下降
AND MR6811               ; 4ST 除材ﾊﾝﾄﾞ 上昇
ANB R4702                ; 4ST 除材ﾊﾝﾄﾞ 下降端
AND R4703                ; 4ST 除材ﾊﾝﾄﾞ 上昇端
ANB MR6800               ; 4ST IC書込 書込ﾍｯﾄﾞ 前進
ANB R4712                ; 4ST IC書込 書込ﾍｯﾄﾞ 前進端
AND R4713                ; 4ST IC書込 書込ﾍｯﾄﾞ 後退端
ANB MR6804               ; 4ST IC書込 ｶｰﾄﾘｯｼﾞ押さえ 下降
ANB R4708                ; 4ST IC書込 ｶｰﾄﾘｯｼﾞ押さえ 下降端
AND R4709                ; 4ST IC書込 ｶｰﾄﾘｯｼﾞ押さえ 上昇端
OUT @MR004               ; ST4 干渉ｼﾘﾝﾀﾞ全て逃げ
LD @MR001                ; ST1 干渉ｼﾘﾝﾀﾞ全て逃げ
AND @MR002               ; ST2 干渉ｼﾘﾝﾀﾞ全て逃げ
AND @MR003               ; ST3 干渉ｼﾘﾝﾀﾞ全て逃げ
AND @MR004               ; ST4 干渉ｼﾘﾝﾀﾞ全て逃げ
ANB MR6600               ; INDEX 位置決め上下 上昇
AND MR6601               ; INDEX 位置決め上下 下降
ANB R4100                ; INDEX 位置決め上下 上昇端
AND R4101                ; INDEX 位置決め上下 下降端
ANB MR6614               ; INDEX 治具ｴｱｰ上下 上昇
ANB R4102                ; INDEX 1ST 治具ｴｱｰ上下 上昇端
AND R4103                ; INDEX 1ST 治具ｴｱｰ上下 下降端
ANB R4104                ; INDEX 2ST 治具ｴｱｰ上下 上昇端
AND R4105                ; INDEX 2ST 治具ｴｱｰ上下 下降端
ANB R4106                ; INDEX 3ST 治具ｴｱｰ上下 上昇端
AND R4107                ; INDEX 3ST 治具ｴｱｰ上下 下降端
ANB R4108                ; INDEX 4ST 治具ｴｱｰ上下 上昇端
AND R4109                ; INDEX 4ST 治具ｴｱｰ上下 下降端
ANB R2102                ; ﾐｭｰﾃｨﾝｸﾞ中
OUT @MR005               ; INDEX干渉ｼﾘﾝﾀﾞ全て逃げ
;<h1/>原点復帰 / Homing
STG R41215               ; TASK16原点復帰起動
SET R40315               ; TASK16動作中
CON
AND R40400               ; 動作開始
JMP @MR1000              ; INDEX 原点復帰開始
STG @MR1000              ; INDEX 原点復帰開始
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
ZRES DM1350 DM1357       ; prohibit use of DM1350  prohibit use of DM1357
CON
MPS
AND R42500               ; Black 選択
DW #8 DM1358             ; 原点復帰時INDEX回転回数
CON
JMP @MR1001
MPP
ANB R42500               ; Black 選択
DW #9 DM1358             ; 原点復帰時INDEX回転回数
CON
JMP @MR1001
STG @MR1001
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
AND R42300               ; ST1 1ｻｲｸﾙ終了
AND R42301               ; ST2 1ｻｲｸﾙ終了
AND R42302               ; ST3 1ｻｲｸﾙ終了
AND R42303               ; ST4 1ｻｲｸﾙ終了
ZRES R42300 R42303       ; ST1 1ｻｲｸﾙ終了  ST4 1ｻｲｸﾙ終了
CON
JMP @MR1002
STG @MR1002
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
SET R42200               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
AND R42006               ; STARTsw ON
RES R42200               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
SET R42201               ; ｻｲｸﾙ動作中
CON
JMP @MR1003
STG @MR1003
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
RES MR6600               ; INDEX 位置決め上下 上昇
CON
SET MR6601               ; INDEX 位置決め上下 下降
CON
RES MR6612               ; 1ST 治具  Close
CON
RES MR6610               ; 1ST 治具  Open 
CON
RES MR6608               ; 2ST 治具  Close
CON
RES MR6606               ; 3ST 治具  Close
CON
RES MR6604               ; 4ST 治具  Close
CON
RES MR6602               ; 4ST 治具  Open 
CON
JMP @MR1004
STG @MR1004
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
TMH @19 #10              ; ｳｴｲﾄﾀｲﾏｰ19
CON
AND @T19                 ; ｳｴｲﾄﾀｲﾏｰ19
JMP @MR1005
STG @MR1005
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
RES MR6614               ; INDEX 治具ｴｱｰ上下 上昇
CON
AND R4103                ; INDEX 1ST 治具ｴｱｰ上下 下降端
AND R4105                ; INDEX 2ST 治具ｴｱｰ上下 下降端
AND R4107                ; INDEX 3ST 治具ｴｱｰ上下 下降端
AND R4109                ; INDEX 4ST 治具ｴｱｰ上下 下降端
AND R4101                ; INDEX 位置決め上下 下降端
JMP @MR1006
STG @MR1006
MPS
AND @MR005               ; INDEX干渉ｼﾘﾝﾀﾞ全て逃げ
JMP @MR1100
MPP
ANB @MR005               ; INDEX干渉ｼﾘﾝﾀﾞ全て逃げ
TMR @6 #10               ; ｳｴｲﾄﾀｲﾏｰ06
CON
AND @T6                  ; ｳｴｲﾄﾀｲﾏｰ06
SET @MR512               ; Err300 INDEX干渉有り
CON
JMP @MR1007
;*** Err180
STG @MR1007
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
AND @MR515               ; Err300 INDEX解除完了
RES @MR515               ; Err300 INDEX解除完了
CON
JMP @MR1003
;***
STG @MR1100
SET @MR900               ; PACK16-1
CON
JMP @MR1101
STG @MR1101
LD R2103                 ; INDEX Power ON
ORB R18500               ; INDEX Power Cool down
ANL
AND @MR005               ; INDEX干渉ｼﾘﾝﾀﾞ全て逃げ
SET @MR4000              ; INDEX原点復帰SUB
CON
JMP @MR1102
STG @MR1102
MPS
AND @MR4001              ; INDEX原点復帰完了
SET R42214               ; INDEX原点復帰完了
CON
SET R40104               ; ﾐｭｰﾃｨﾝｸﾞﾘｾｯﾄ
CON
JMP @MR1103
MPP
LDB @MR4001              ; INDEX原点復帰完了
AND R42211               ; ﾗｲﾄｶｰﾃﾝ遮光
ANL
JMP @MR1108
STG @MR1103
RES @MR4001              ; INDEX原点復帰完了
CON
RES R42201               ; ｻｲｸﾙ動作中
CON
RES @MR900               ; PACK16-1
CON
JMP @MR1300              ; INDEX回転
;ﾗｲﾄｶｰﾃﾝ遮光時 / When Light Curtaion Blinking
STG @MR1108
AND R40005               ; ﾎﾟｰｽﾞ中
ANB R42006               ; STARTsw ON
RES R42201               ; ｻｲｸﾙ動作中
CON
RES @MR900               ; PACK16-1
CON
JMP @MR1109
STG @MR1109
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
JMP @MR1110
STG @MR1110
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
SET R42200               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
AND R42006               ; STARTsw ON
JMP @MR1111
STG @MR1111
SET @MR900               ; PACK16-1
CON
RES R42200               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
SET R40104               ; ﾐｭｰﾃｨﾝｸﾞﾘｾｯﾄ
CON
SET R42201               ; ｻｲｸﾙ動作中
CON
JMP @MR1101
;ケースチェック
;Check the Case
STG @MR1200              ; ｹｰｽﾁｪｯｸ
RES R42201               ; ｻｲｸﾙ動作中
CON
TMR @1 #3                ; ｳｴｲﾄﾀｲﾏｰ01
CON
AND @T1                  ; ｳｴｲﾄﾀｲﾏｰ01
RES @MR900               ; PACK16-1
CON
JMP @MR1201
STG @MR1201
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
MPS
AND @MR010               ; 1STにｹｰｽ無し
MPS
AND= DM1358 #0           ; 原点復帰時INDEX回転回数
JMP @MR1202
MPP
AND<> DM1358 #0          ; 原点復帰時INDEX回転回数
JMP @MR1300              ; INDEX回転
MPP
ANB @MR010               ; 1STにｹｰｽ無し
SET @MR108               ; Err283 INDEX
CON
JMP @MR1205
STG @MR1202
RES @MR4101              ; INDEX CW回転Fin
CON
RES R42201               ; ｻｲｸﾙ動作中
CON
JMP @MR1203
STG @MR1203
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
SET MR6614               ; INDEX 治具ｴｱｰ上下 上昇
CON
AND R4102                ; INDEX 1ST 治具ｴｱｰ上下 上昇端
AND R4104                ; INDEX 2ST 治具ｴｱｰ上下 上昇端
AND R4106                ; INDEX 3ST 治具ｴｱｰ上下 上昇端
AND R4108                ; INDEX 4ST 治具ｴｱｰ上下 上昇端
JMP @MR1204
STG @MR1204
SET R42315               ; INDEX 1ｻｲｸﾙ完了
CON
JMP @MR1315              ; HOME終了処理
;INDEX ST1ワーク残り　エラー解除・除材
STG @MR1205
SET MR6614               ; INDEX 治具ｴｱｰ上下 上昇
CON
ANB R4103                ; INDEX 1ST 治具ｴｱｰ上下 下降端
AND R4102                ; INDEX 1ST 治具ｴｱｰ上下 上昇端
RES MR6612               ; 1ST 治具  Close
CON
SET MR6610               ; 1ST 治具  Open 
CON
AND @MR111               ; Err283 INDEX解除完了
JMP @MR1206
STG @MR1206
RES MR6610               ; 1ST 治具  Open 
CON
RES MR6612               ; 1ST 治具  Close
CON
RES MR6614               ; INDEX 治具ｴｱｰ上下 上昇
CON
ANB R4102                ; INDEX 1ST 治具ｴｱｰ上下 上昇端
AND R4103                ; INDEX 1ST 治具ｴｱｰ上下 下降端
RES @MR111               ; Err283 INDEX解除完了
CON
JMP @MR1200              ; ｹｰｽﾁｪｯｸ
;INDEX ワーク残りの為､INDEX回転
STG @MR1300              ; INDEX回転
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
ANB @MR2201              ; ﾜｰｸ浮きﾁｪｯｸ終了
AND R1101                ; ﾗｲﾄｶｰﾃﾝ
SET R42200               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
AND R42006               ; STARTsw ON
SET @MR2200              ; ﾜｰｸ浮きﾁｪｯｸ開始
CON
RES R42200               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
JMP @MR1301
STG @MR1301
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
AND @MR2201              ; ﾜｰｸ浮きﾁｪｯｸ終了
RES @MR2201              ; ﾜｰｸ浮きﾁｪｯｸ終了
CON
JMP @MR1302
STG @MR1302
MPS
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
RES MR6614               ; INDEX 治具ｴｱｰ上下 上昇
CON
RES MR6612               ; 1ST 治具  Close
CON
RES MR6610               ; 1ST 治具  Open 
CON
RES MR6608               ; 2ST 治具  Close
CON
RES MR6606               ; 3ST 治具  Close
CON
RES MR6604               ; 4ST 治具  Close
CON
RES MR6602               ; 4ST 治具  Open 
CON
AND R4103                ; INDEX 1ST 治具ｴｱｰ上下 下降端
AND R4105                ; INDEX 2ST 治具ｴｱｰ上下 下降端
AND R4107                ; INDEX 3ST 治具ｴｱｰ上下 下降端
AND R4109                ; INDEX 4ST 治具ｴｱｰ上下 下降端
JMP @MR1304
MPP
ANB @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
JMP @MR1311
STG @MR1304
MPS
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
MPS
AND @MR005               ; INDEX干渉ｼﾘﾝﾀﾞ全て逃げ
SET @MR900               ; PACK16-1
CON
SET @MR4100              ; INDEX 90°CW回転SUB
CON
SET R40104               ; ﾐｭｰﾃｨﾝｸﾞﾘｾｯﾄ
CON
SET R42201               ; ｻｲｸﾙ動作中
CON
DEC DM1358               ; 原点復帰時INDEX回転回数
CON
JMP @MR1308
MPP
ANB @MR005               ; INDEX干渉ｼﾘﾝﾀﾞ全て逃げ
TMR @4 #10               ; ｳｴｲﾄﾀｲﾏｰ04
CON
AND @T4                  ; ｳｴｲﾄﾀｲﾏｰ04
SET @MR512               ; Err300 INDEX干渉有り
CON
JMP @MR1305
MPP
ANB @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
JMP @MR1306
STG @MR1306
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
TMR @21 #100             ; ｳｴｲﾄﾀｲﾏｰ21
CON
AND @T21                 ; ｳｴｲﾄﾀｲﾏｰ21
JMP @MR1302
;Err290
STG @MR1305
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
AND @MR515               ; Err300 INDEX解除完了
RES @MR515               ; Err300 INDEX解除完了
CON
JMP @MR1304
;
STG @MR1308
MPS
AND @MR4101              ; INDEX CW回転Fin
RES @MR4101              ; INDEX CW回転Fin
CON
JMP @MR1200              ; ｹｰｽﾁｪｯｸ
MPP
LDB @MR4101              ; INDEX CW回転Fin
AND R42211               ; ﾗｲﾄｶｰﾃﾝ遮光
ANL
INC DM1358               ; 原点復帰時INDEX回転回数
CON
JMP @MR1309
;ﾗｲﾄｶｰﾃﾝ遮光時 / When Light Curtaion Blinking
STG @MR1309
AND R40005               ; ﾎﾟｰｽﾞ中
ANB R42006               ; STARTsw ON
RES R42201               ; ｻｲｸﾙ動作中
CON
RES @MR900               ; PACK16-1
CON
JMP @MR1310
STG @MR1310
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
JMP @MR1311
STG @MR1311
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
SET R42200               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
AND R42006               ; STARTsw ON
JMP @MR1312
STG @MR1312
RES R42200               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
JMP @MR1302
;End
STG @MR1315              ; HOME終了処理
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
RES R40315               ; TASK16動作中
CON
ENDS
;<h1/>自動運転 / AUTO OERATION
STG R41315               ; TASK16 AUTO起動
SET R40315               ; TASK16動作中
CON
AND R40400               ; 動作開始
JMP @MR1500              ; INDEX AUTO開始
; 動作パラメーター確認
; Operating Parameter Check
STG @MR1500              ; INDEX AUTO開始
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
MPS
AND @MR013               ; INDEX AUTO Parameter OK
SET R40403               ; サイクルタイム計測
CON
SET R42205               ; Indexより動作開始指示
CON
JMP @MR1502
MPP
ANB @MR013               ; INDEX AUTO Parameter OK
JMP @MR1501
;動作パラメーター設定不良
;Parameter Set NG
STG @MR1501
SET R40012               ; HOLD要求
CON
SET R42315               ; INDEX 1ｻｲｸﾙ完了
CON
ENDS
;STｻｲｸﾙ完了待ち / Waiting Cycle Finish
STG @MR1502
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
AND R42300               ; ST1 1ｻｲｸﾙ終了
AND R42301               ; ST2 1ｻｲｸﾙ終了
AND R42302               ; ST3 1ｻｲｸﾙ終了
AND R42303               ; ST4 1ｻｲｸﾙ終了
RES R42205               ; Indexより動作開始指示
CON
JMP @MR1503
STG @MR1503
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
SET R40507               ; 処理時間8計測開始
CON
ZRES R42300 R42303       ; ST1 1ｻｲｸﾙ終了  ST4 1ｻｲｸﾙ終了
CON
JMP @MR1504
;位置決め下降 / Positioning Down
STG @MR1504
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
ANB @MR2201              ; ﾜｰｸ浮きﾁｪｯｸ終了
SET @MR2200              ; ﾜｰｸ浮きﾁｪｯｸ開始
CON
RES MR6600               ; INDEX 位置決め上下 上昇
CON
SET MR6601               ; INDEX 位置決め上下 下降
CON
RES MR6612               ; 1ST 治具  Close
CON
RES MR6610               ; 1ST 治具  Open 
CON
RES MR6608               ; 2ST 治具  Close
CON
RES MR6606               ; 3ST 治具  Close
CON
RES MR6604               ; 4ST 治具  Close
CON
RES MR6602               ; 4ST 治具  Open 
CON
JMP @MR1505
STG @MR1505
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
AND @MR2201              ; ﾜｰｸ浮きﾁｪｯｸ終了
RES @MR2201              ; ﾜｰｸ浮きﾁｪｯｸ終了
CON
JMP @MR1506
STG @MR1506
MPS
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
RES MR6614               ; INDEX 治具ｴｱｰ上下 上昇
CON
AND R4103                ; INDEX 1ST 治具ｴｱｰ上下 下降端
AND R4105                ; INDEX 2ST 治具ｴｱｰ上下 下降端
AND R4107                ; INDEX 3ST 治具ｴｱｰ上下 下降端
AND R4109                ; INDEX 4ST 治具ｴｱｰ上下 下降端
AND R4101                ; INDEX 位置決め上下 下降端
JMP @MR1507
MPP
ANB @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
JMP @MR1606
STG @MR1507
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
MPS
AND @MR005               ; INDEX干渉ｼﾘﾝﾀﾞ全て逃げ
JMP @MR1600
MPP
ANB @MR005               ; INDEX干渉ｼﾘﾝﾀﾞ全て逃げ
TMR @5 #10               ; ｳｴｲﾄﾀｲﾏｰ05
CON
AND @T5                  ; ｳｴｲﾄﾀｲﾏｰ05
SET @MR512               ; Err300 INDEX干渉有り
CON
JMP @MR1514
;Err180 Release
STG @MR1514
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
AND @MR515               ; Err300 INDEX解除完了
RES @MR515               ; Err300 INDEX解除完了
CON
JMP @MR1504
;Index回転前ﾜｰｸﾁｪｯｸ / Case Check before index
STG @MR1600
SET R40515               ; 処理時間16計測開始
CON
SET @MR900               ; PACK16-1
CON
SET R40104               ; ﾐｭｰﾃｨﾝｸﾞﾘｾｯﾄ
CON
SET @MR4400              ; ｹｰｽ記憶開始
CON
JMP @MR1601
STG @MR1601
AND @MR4401              ; ｹｰｽ記憶完了
JMP @MR1602
STG @MR1602
RES @MR4401              ; ｹｰｽ記憶完了
CON
SET @MR4100              ; INDEX 90°CW回転SUB
CON
JMP @MR1603
STG @MR1603
MPS
AND @MR4101              ; INDEX CW回転Fin
JMP @MR1700
MPP
LDB @MR4101              ; INDEX CW回転Fin
AND R42211               ; ﾗｲﾄｶｰﾃﾝ遮光
ANL
JMP @MR1604
;ﾗｲﾄｶｰﾃﾝ遮光時 / When Light Curtaion Blinking
STG @MR1604
AND R40005               ; ﾎﾟｰｽﾞ中
ANB R42006               ; STARTsw ON
RES @MR900               ; PACK16-1
CON
JMP @MR1605
STG @MR1605
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
JMP @MR1606
STG @MR1606
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
SET R42200               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
AND R42006               ; STARTsw ON
JMP @MR1607
STG @MR1607
RES R42200               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
JMP @MR1602
;
STG @MR1700
RES @MR4101              ; INDEX CW回転Fin
CON
RES R42201               ; ｻｲｸﾙ動作中
CON
JMP @MR1701
STG @MR1701
SET MR6614               ; INDEX 治具ｴｱｰ上下 上昇
CON
AND R4102                ; INDEX 1ST 治具ｴｱｰ上下 上昇端
AND R4104                ; INDEX 2ST 治具ｴｱｰ上下 上昇端
AND R4106                ; INDEX 3ST 治具ｴｱｰ上下 上昇端
AND R4108                ; INDEX 4ST 治具ｴｱｰ上下 上昇端
JMP @MR1702
STG @MR1702
TMR @7 #1                ; ｳｴｲﾄﾀｲﾏｰ07
CON
AND @T7                  ; ｳｴｲﾄﾀｲﾏｰ07
RES @MR900               ; PACK16-1
CON
AND R1106                ; INDEX Alarm1 正常=ON
MPS
AND R1107                ; INDEX Alarm2 正常=ON
JMP @MR1704
MPP
LDB R1107                ; INDEX Alarm2 正常=ON
AND R1101                ; ﾗｲﾄｶｰﾃﾝ
ANB R40005               ; ﾎﾟｰｽﾞ中
ANL
JMP @MR1703
STG @MR1703
SET MR2107               ; INDEX ﾘｾｯﾄ
CON
AND R1106                ; INDEX Alarm1 正常=ON
AND R1107                ; INDEX Alarm2 正常=ON
SET MR2107               ; INDEX ﾘｾｯﾄ
CON
JMP @MR1701
STG @MR1704
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
RES MR6612               ; 1ST 治具  Close
CON
SET MR6610               ; 1ST 治具  Open 
CON
RES MR6604               ; 4ST 治具  Close
CON
SET MR6602               ; 4ST 治具  Open 
CON
JMP @MR1705
STG @MR1705
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
MPS
AND @MR010               ; 1STにｹｰｽ無し
JMP @MR1800
MPP
ANB @MR010               ; 1STにｹｰｽ無し
SET @MR112               ; Err284 INDEX
CON
JMP @MR1706
;ＩＮＤＥＸ　ＵＴ１到着ワーク不良品 エラー・除材
STG @MR1706
TMR @8 #2                ; ｳｴｲﾄﾀｲﾏｰ08
CON
AND @T8                  ; ｳｴｲﾄﾀｲﾏｰ08
AND @MR115               ; Err284 INDEX解除完了
RES @MR115               ; Err284 INDEX解除完了
CON
JMP @MR1700
;動作終了
STG @MR1800
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
SET @MR4408              ; 到着ｹｰｽﾁｪｯｸ
CON
JMP @MR1801
STG @MR1801
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
AND @MR4409              ; 到着ｹｰｽﾁｪｯｸ完了
JMP @MR1802
STG @MR1802
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
SET R40607               ; 処理時間8取得
CON
SET R40404               ; ｻｲｸﾙﾀｲﾑ取得
CON
RES R42201               ; ｻｲｸﾙ動作中
CON
SET R42315               ; INDEX 1ｻｲｸﾙ完了
CON
RES @MR4409              ; 到着ｹｰｽﾁｪｯｸ完了
CON
JMP @MR1803
STG @MR1803
MPS
AND R40011               ; HOLD
JMP @MR2900              ; AUTO終了処理
MPP
ANB R40011               ; HOLD
SET R42205               ; Indexより動作開始指示
CON
JMP @MR1502
;AUTO 終了処理
;AUTO Finish Operation
STG @MR2900              ; AUTO終了処理
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
RES R40403               ; サイクルタイム計測
CON
RES R40315               ; TASK16動作中
CON
ENDS
;<h1/>ｽﾃｯﾌﾟ運転 / STEP OERATION
STG R41415               ; TASK16 STEP起動
SET R40315               ; TASK16動作中
CON
AND R40400               ; 動作開始
JMP @MR3000              ; INDEX STEP開始
;TASK1 STEP CONDITION CHECK
STG @MR3000              ; INDEX STEP開始
MPS
AND= DM1404 #16          ; STEP Group selection
MPS
AND= DM1405 #1           ; STEP Action selection
JMP @MR3001
MPP
AND<> DM1405 #1          ; STEP Action selection
JMP @MR3104
MPP
AND<> DM1404 #16         ; STEP Group selection
JMP @MR3104
;Index 1区画回転 / Turn Index
STG @MR3001
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
SET R42200               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
AND R42006               ; STARTsw ON
JMP @MR3002
STG @MR3002
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
RES R42200               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
SET MR6614               ; INDEX 治具ｴｱｰ上下 上昇
CON
RES MR6600               ; INDEX 位置決め上下 上昇
CON
SET MR6601               ; INDEX 位置決め上下 下降
CON
AND R4101                ; INDEX 位置決め上下 下降端
AND R4102                ; INDEX 1ST 治具ｴｱｰ上下 上昇端
AND R4104                ; INDEX 2ST 治具ｴｱｰ上下 上昇端
AND R4106                ; INDEX 3ST 治具ｴｱｰ上下 上昇端
AND R4108                ; INDEX 4ST 治具ｴｱｰ上下 上昇端
JMP @MR3003
STG @MR3003
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
SET MR6612               ; 1ST 治具  Close
CON
RES MR6610               ; 1ST 治具  Open 
CON
SET MR6608               ; 2ST 治具  Close
CON
SET MR6606               ; 3ST 治具  Close
CON
SET MR6604               ; 4ST 治具  Close
CON
RES MR6602               ; 4ST 治具  Open 
CON
JMP @MR3004
STG @MR3004
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
TMH @20 #30              ; ｳｴｲﾄﾀｲﾏｰ20
CON
AND @T20                 ; ｳｴｲﾄﾀｲﾏｰ20
RES MR6612               ; 1ST 治具  Close
CON
RES MR6608               ; 2ST 治具  Close
CON
RES MR6606               ; 3ST 治具  Close
CON
RES MR6604               ; 4ST 治具  Close
CON
ANB @MR2201              ; ﾜｰｸ浮きﾁｪｯｸ終了
SET @MR2200              ; ﾜｰｸ浮きﾁｪｯｸ開始
CON
JMP @MR3005
STG @MR3005
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
AND @MR2201              ; ﾜｰｸ浮きﾁｪｯｸ終了
RES @MR2201              ; ﾜｰｸ浮きﾁｪｯｸ終了
CON
JMP @MR3006
STG @MR3006
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
RES MR6614               ; INDEX 治具ｴｱｰ上下 上昇
CON
AND R4103                ; INDEX 1ST 治具ｴｱｰ上下 下降端
AND R4105                ; INDEX 2ST 治具ｴｱｰ上下 下降端
AND R4107                ; INDEX 3ST 治具ｴｱｰ上下 下降端
AND R4109                ; INDEX 4ST 治具ｴｱｰ上下 下降端
AND R4101                ; INDEX 位置決め上下 下降端
JMP @MR3007
STG @MR3007
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
MPS
AND @MR005               ; INDEX干渉ｼﾘﾝﾀﾞ全て逃げ
JMP @MR3100
MPP
ANB @MR005               ; INDEX干渉ｼﾘﾝﾀﾞ全て逃げ
SET @MR304               ; Err290 INDEX
CON
JMP @MR3008
;Err180 Release
STG @MR3008
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
AND @MR307               ; Err290 INDEX解除完了
RES @MR307               ; Err290 INDEX解除完了
CON
JMP @MR3004
;
STG @MR3100
SET @MR900               ; PACK16-1
CON
SET R40104               ; ﾐｭｰﾃｨﾝｸﾞﾘｾｯﾄ
CON
SET R42201               ; ｻｲｸﾙ動作中
CON
JMP @MR3101
STG @MR3101
SET @MR4100              ; INDEX 90°CW回転SUB
CON
JMP @MR3102
STG @MR3102
MPS
AND @MR4101              ; INDEX CW回転Fin
JMP @MR3104
MPP
LDB @MR4101              ; INDEX CW回転Fin
AND R42211               ; ﾗｲﾄｶｰﾃﾝ遮光
ANL
MPS
JMP @MR3103
MPP
AND CR2003               ; 常時OFF
SET R40006               ; PAUSE要求
STG @MR3103
AND R40005               ; ﾎﾟｰｽﾞ中
ANB R42006               ; STARTsw ON
RES R42006               ; STARTsw ON
CON
RES @MR900               ; PACK16-1
CON
JMP @MR3001
;
STG @MR3104
RES @MR4101              ; INDEX CW回転Fin
CON
RES R42201               ; ｻｲｸﾙ動作中
CON
JMP @MR3105
STG @MR3105
TMR @10 #5               ; ｳｴｲﾄﾀｲﾏｰ10
CON
AND @T10                 ; ｳｴｲﾄﾀｲﾏｰ10
RES @MR900               ; PACK16-1
CON
AND R1106                ; INDEX Alarm1 正常=ON
AND R1107                ; INDEX Alarm2 正常=ON
JMP @MR3106
STG @MR3106
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
SET MR6614               ; INDEX 治具ｴｱｰ上下 上昇
CON
AND R4102                ; INDEX 1ST 治具ｴｱｰ上下 上昇端
AND R4104                ; INDEX 2ST 治具ｴｱｰ上下 上昇端
AND R4106                ; INDEX 3ST 治具ｴｱｰ上下 上昇端
AND R4108                ; INDEX 4ST 治具ｴｱｰ上下 上昇端
JMP @MR3107
STG @MR3107
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
RES MR6612               ; 1ST 治具  Close
CON
SET MR6610               ; 1ST 治具  Open 
CON
RES MR6604               ; 4ST 治具  Close
CON
SET MR6602               ; 4ST 治具  Open 
CON
JMP @MR3108
STG @MR3108
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
MPS
LD @MR010                ; 1STにｹｰｽ無し
OR= DM1355 #0            ; INDEX-NGﾜｰｸﾁｪｯｸ
ANL
JMP @MR3200
MPP
LDB @MR010               ; 1STにｹｰｽ無し
AND<> DM1355 #0          ; INDEX-NGﾜｰｸﾁｪｯｸ
ANL
SET @MR112               ; Err284 INDEX
CON
JMP @MR3109
;INDEX UT1到着ワーク不良品 エラー・除材
STG @MR3109
TMR @11 #2               ; ｳｴｲﾄﾀｲﾏｰ11
CON
AND @T11                 ; ｳｴｲﾄﾀｲﾏｰ11
AND @MR115               ; Err284 INDEX解除完了
RES @MR115               ; Err284 INDEX解除完了
CON
JMP @MR3108
;STEP終了処理
STG @MR3200
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
JMP @MR3201
STG @MR3201
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
SET R40012               ; HOLD要求
CON
JMP @MR3202
STG @MR3202
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
RES R40315               ; TASK16動作中
CON
ENDS
;<h1/>ｻﾌﾞﾙｰﾁﾝ / Sub Routing
;<h1/>INDEX 原点復帰動作
;INDEX HOME
;The starting point return of an index is program No.16.  
;By 16 division specification, it moves to a starting point position by the shortest. 
;/ ｲﾝﾃﾞｯｸｽの原点復帰は、ﾌﾟﾛｸﾞﾗﾑNo.16　16分割指定で、近周りで原点位置へ移動する
STG @MR4000              ; INDEX原点復帰SUB
SET MR2110               ; INDEX 非常停止
CON
SET MR2107               ; INDEX ﾘｾｯﾄ
CON
TMH @3 #30               ; ｳｴｲﾄﾀｲﾏｰ03
CON
AND @T3                  ; ｳｴｲﾄﾀｲﾏｰ03
SET MR2103               ; INDEX Power ON
CON
JMP @MR4003
STG @MR4003
MPS
AND R1105                ; INDEX 起動入力待ち
RES MR2107               ; INDEX ﾘｾｯﾄ
CON
RES MR2111               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 0ﾋﾞｯﾄ  1
CON
RES MR2112               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 1ﾋﾞｯﾄ　　2
CON
RES MR2113               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 2ﾋﾞｯﾄ　　4
CON
RES MR2114               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 3ﾋﾞｯﾄ　　8
CON
SET MR2115               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 4ﾋﾞｯﾄ　16
CON
TMH @12 #20              ; ｳｴｲﾄﾀｲﾏｰ12
CON
AND @T12                 ; ｳｴｲﾄﾀｲﾏｰ12
JMP @MR4004
MPP
LDB R1105                ; INDEX 起動入力待ち
ANB R40005               ; ﾎﾟｰｽﾞ中
AND R1101                ; ﾗｲﾄｶｰﾃﾝ
AND R1106                ; INDEX Alarm1 正常=ON
ANB R1107                ; INDEX Alarm2 正常=ON
ANL
TMH @16 #30              ; ｳｴｲﾄﾀｲﾏｰ16
CON
AND @T16                 ; ｳｴｲﾄﾀｲﾏｰ16
JMP @MR4004
STG @MR4004
SET MR2106               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 1桁目
CON
TMH @13 #20              ; ｳｴｲﾄﾀｲﾏｰ13
CON
AND @T13                 ; ｳｴｲﾄﾀｲﾏｰ13
JMP @MR4005
STG @MR4005
ANB R42211               ; ﾗｲﾄｶｰﾃﾝ遮光
AND @MR005               ; INDEX干渉ｼﾘﾝﾀﾞ全て逃げ
SET R42212               ; INDEX監視1
CON
SET R42203               ; INDEX回転中（SET/RST）
CON
SET MR2108               ; INDEX 起動
CON
JMP @MR4006
STG @MR4006
ANB R1105                ; INDEX 起動入力待ち
JMP @MR4007
STG @MR4007
RES MR2108               ; INDEX 起動
CON
RES MR2106               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 1桁目
CON
ZRES MR2111 MR2115       ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 0ﾋﾞｯﾄ  1  INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 4ﾋﾞｯﾄ　16
CON
JMP @MR4008
STG @MR4008
AND R1104                ; INDEX 位置決め完了
SET MR2109               ; INDEX ｱﾝｻ
CON
JMP @MR4009
STG @MR4009
ANB R1104                ; INDEX 位置決め完了
RES R42212               ; INDEX監視1
CON
RES MR2109               ; INDEX ｱﾝｻ
CON
RES R42203               ; INDEX回転中（SET/RST）
CON
DW #0 DM1359             ; INDEX位置記憶
CON
JMP @MR4010
STG @MR4010
SET @MR4001              ; INDEX原点復帰完了
CON
ENDS
;<h1/>Index Turn / Index正転
;90 degrees positive rotation of an index chooses program No.0 to 3 in order, and starts it. 
;By 4 division specification, it moves to the following position of four positions. 
;If movement is completed, the following specification will be written in DM. 
; / ｲﾝﾃﾞｯｸｽの90度正回転は、ﾌﾟﾛｸﾞﾗﾑNo．０から３を順に選択し起動する
;4分割指定で、4位置の次位置へ移動する、移動が完了したらDMに次の指定を書込む
LD R42212                ; INDEX監視1
AND R42211               ; ﾗｲﾄｶｰﾃﾝ遮光
RES R42212               ; INDEX監視1
CON
RES MR2108               ; INDEX 起動
CON
RES MR2109               ; INDEX ｱﾝｻ
CON
RES MR2106               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 1桁目
CON
ZRES MR2111 MR2115       ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 0ﾋﾞｯﾄ  1  INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 4ﾋﾞｯﾄ　16
CON
RES @MR4100              ; INDEX 90°CW回転SUB
CON
ZRES @MR4100 @MR4215     ; INDEX 90°CW回転SUB
STG @MR4100              ; INDEX 90°CW回転SUB
ANB R42211               ; ﾗｲﾄｶｰﾃﾝ遮光
AND @MR005               ; INDEX干渉ｼﾘﾝﾀﾞ全て逃げ
SET R42212               ; INDEX監視1
CON
SET MR2110               ; INDEX 非常停止
CON
JMP @MR4102
STG @MR4102
MPS
AND R1105                ; INDEX 起動入力待ち
JMP @MR4104
MPP
LDB R1105                ; INDEX 起動入力待ち
ANB R40005               ; ﾎﾟｰｽﾞ中
AND R1101                ; ﾗｲﾄｶｰﾃﾝ
AND R1106                ; INDEX Alarm1 正常=ON
ANB R1107                ; INDEX Alarm2 正常=ON
ANL
TMR @9 #20               ; ｳｴｲﾄﾀｲﾏｰ09
CON
AND @T9                  ; ｳｴｲﾄﾀｲﾏｰ09
SET MR2107               ; INDEX ﾘｾｯﾄ
CON
JMP @MR4103
STG @MR4103
AND R1105                ; INDEX 起動入力待ち
RES MR2107               ; INDEX ﾘｾｯﾄ
CON
JMP @MR4104
STG @MR4104
MPS
LD R40001                ; 自動動作中
OR R40002                ; ﾒﾝﾃﾅﾝｽ動作中
ANL
MPS
AND R42500               ; Black 選択
JMP @MR4105
MPP
ANB R42500               ; Black 選択
JMP @MR4106
MPP
AND R40003               ; 原点復帰中
JMP @MR4107
;AUTO/MAINTE BK選択の場合
;回転プログラム番号は0,4,8,12
STG @MR4105
MPS
AND= DM1359 #0           ; INDEX位置記憶
RES MR2111               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 0ﾋﾞｯﾄ  1
CON
RES MR2112               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 1ﾋﾞｯﾄ　　2
CON
SET MR2113               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 2ﾋﾞｯﾄ　　4
CON
RES MR2114               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 3ﾋﾞｯﾄ　　8
CON
RES MR2115               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 4ﾋﾞｯﾄ　16
CON
JMP @MR4108
MRD
AND= DM1359 #4           ; INDEX位置記憶
RES MR2111               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 0ﾋﾞｯﾄ  1
CON
RES MR2112               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 1ﾋﾞｯﾄ　　2
CON
RES MR2113               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 2ﾋﾞｯﾄ　　4
CON
SET MR2114               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 3ﾋﾞｯﾄ　　8
CON
RES MR2115               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 4ﾋﾞｯﾄ　16
CON
JMP @MR4108
MRD
AND= DM1359 #8           ; INDEX位置記憶
RES MR2111               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 0ﾋﾞｯﾄ  1
CON
RES MR2112               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 1ﾋﾞｯﾄ　　2
CON
SET MR2113               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 2ﾋﾞｯﾄ　　4
CON
SET MR2114               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 3ﾋﾞｯﾄ　　8
CON
RES MR2115               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 4ﾋﾞｯﾄ　16
CON
JMP @MR4108
MPP
AND= DM1359 #12          ; INDEX位置記憶
RES MR2111               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 0ﾋﾞｯﾄ  1
CON
RES MR2112               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 1ﾋﾞｯﾄ　　2
CON
RES MR2113               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 2ﾋﾞｯﾄ　　4
CON
RES MR2114               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 3ﾋﾞｯﾄ　　8
CON
RES MR2115               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 4ﾋﾞｯﾄ　16
CON
JMP @MR4108
;AUTO/MAINTE COL選択の場合
;回転プログラム番号は2,6,10,14
STG @MR4106
MPS
AND= DM1359 #2           ; INDEX位置記憶
RES MR2111               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 0ﾋﾞｯﾄ  1
CON
SET MR2112               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 1ﾋﾞｯﾄ　　2
CON
SET MR2113               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 2ﾋﾞｯﾄ　　4
CON
RES MR2114               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 3ﾋﾞｯﾄ　　8
CON
RES MR2115               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 4ﾋﾞｯﾄ　16
CON
JMP @MR4108
MRD
AND= DM1359 #6           ; INDEX位置記憶
RES MR2111               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 0ﾋﾞｯﾄ  1
CON
SET MR2112               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 1ﾋﾞｯﾄ　　2
CON
RES MR2113               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 2ﾋﾞｯﾄ　　4
CON
SET MR2114               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 3ﾋﾞｯﾄ　　8
CON
RES MR2115               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 4ﾋﾞｯﾄ　16
CON
JMP @MR4108
MRD
AND= DM1359 #10          ; INDEX位置記憶
RES MR2111               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 0ﾋﾞｯﾄ  1
CON
SET MR2112               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 1ﾋﾞｯﾄ　　2
CON
SET MR2113               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 2ﾋﾞｯﾄ　　4
CON
SET MR2114               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 3ﾋﾞｯﾄ　　8
CON
RES MR2115               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 4ﾋﾞｯﾄ　16
CON
JMP @MR4108
MPP
AND= DM1359 #14          ; INDEX位置記憶
RES MR2111               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 0ﾋﾞｯﾄ  1
CON
SET MR2112               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 1ﾋﾞｯﾄ　　2
CON
RES MR2113               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 2ﾋﾞｯﾄ　　4
CON
RES MR2114               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 3ﾋﾞｯﾄ　　8
CON
RES MR2115               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 4ﾋﾞｯﾄ　16
CON
JMP @MR4108
;HOMEDOの場合
;回転プログラム番号は0,2,4,6,8,10,12,14
STG @MR4107
MPS
AND= DM1359 #0           ; INDEX位置記憶
RES MR2111               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 0ﾋﾞｯﾄ  1
CON
SET MR2112               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 1ﾋﾞｯﾄ　　2
CON
RES MR2113               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 2ﾋﾞｯﾄ　　4
CON
RES MR2114               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 3ﾋﾞｯﾄ　　8
CON
RES MR2115               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 4ﾋﾞｯﾄ　16
CON
JMP @MR4108
MRD
AND= DM1359 #2           ; INDEX位置記憶
RES MR2111               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 0ﾋﾞｯﾄ  1
CON
RES MR2112               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 1ﾋﾞｯﾄ　　2
CON
SET MR2113               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 2ﾋﾞｯﾄ　　4
CON
RES MR2114               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 3ﾋﾞｯﾄ　　8
CON
RES MR2115               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 4ﾋﾞｯﾄ　16
CON
JMP @MR4108
MRD
AND= DM1359 #4           ; INDEX位置記憶
RES MR2111               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 0ﾋﾞｯﾄ  1
CON
SET MR2112               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 1ﾋﾞｯﾄ　　2
CON
SET MR2113               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 2ﾋﾞｯﾄ　　4
CON
RES MR2114               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 3ﾋﾞｯﾄ　　8
CON
RES MR2115               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 4ﾋﾞｯﾄ　16
CON
JMP @MR4108
MRD
AND= DM1359 #6           ; INDEX位置記憶
RES MR2111               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 0ﾋﾞｯﾄ  1
CON
RES MR2112               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 1ﾋﾞｯﾄ　　2
CON
RES MR2113               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 2ﾋﾞｯﾄ　　4
CON
SET MR2114               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 3ﾋﾞｯﾄ　　8
CON
RES MR2115               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 4ﾋﾞｯﾄ　16
CON
JMP @MR4108
MRD
AND= DM1359 #8           ; INDEX位置記憶
RES MR2111               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 0ﾋﾞｯﾄ  1
CON
SET MR2112               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 1ﾋﾞｯﾄ　　2
CON
RES MR2113               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 2ﾋﾞｯﾄ　　4
CON
SET MR2114               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 3ﾋﾞｯﾄ　　8
CON
RES MR2115               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 4ﾋﾞｯﾄ　16
CON
JMP @MR4108
MRD
AND= DM1359 #10          ; INDEX位置記憶
RES MR2111               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 0ﾋﾞｯﾄ  1
CON
RES MR2112               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 1ﾋﾞｯﾄ　　2
CON
SET MR2113               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 2ﾋﾞｯﾄ　　4
CON
SET MR2114               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 3ﾋﾞｯﾄ　　8
CON
RES MR2115               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 4ﾋﾞｯﾄ　16
CON
JMP @MR4108
MRD
AND= DM1359 #12          ; INDEX位置記憶
RES MR2111               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 0ﾋﾞｯﾄ  1
CON
SET MR2112               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 1ﾋﾞｯﾄ　　2
CON
SET MR2113               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 2ﾋﾞｯﾄ　　4
CON
SET MR2114               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 3ﾋﾞｯﾄ　　8
CON
RES MR2115               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 4ﾋﾞｯﾄ　16
CON
JMP @MR4108
MPP
AND= DM1359 #14          ; INDEX位置記憶
RES MR2111               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 0ﾋﾞｯﾄ  1
CON
RES MR2112               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 1ﾋﾞｯﾄ　　2
CON
RES MR2113               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 2ﾋﾞｯﾄ　　4
CON
RES MR2114               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 3ﾋﾞｯﾄ　　8
CON
RES MR2115               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 4ﾋﾞｯﾄ　16
CON
JMP @MR4108
STG @MR4108
TMH @14 #3               ; ｳｴｲﾄﾀｲﾏｰ14
CON
AND @T14                 ; ｳｴｲﾄﾀｲﾏｰ14
SET MR2106               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 1桁目
CON
JMP @MR4109
STG @MR4109
TMH @15 #3               ; ｳｴｲﾄﾀｲﾏｰ15
CON
AND @T15                 ; ｳｴｲﾄﾀｲﾏｰ15
SET R42203               ; INDEX回転中（SET/RST）
CON
SET MR2108               ; INDEX 起動
CON
JMP @MR4112
STG @MR4112
ANB R1105                ; INDEX 起動入力待ち
RES MR2108               ; INDEX 起動
CON
RES MR2106               ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 1桁目
CON
ZRES MR2111 MR2115       ; INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 0ﾋﾞｯﾄ  1  INDEX ﾌﾟﾛｸﾞﾗﾑNo.指定 4ﾋﾞｯﾄ　16
CON
JMP @MR4113
STG @MR4113
AND R1104                ; INDEX 位置決め完了
SET MR2109               ; INDEX ｱﾝｻ
CON
JMP @MR4114
STG @MR4114
ANB R1104                ; INDEX 位置決め完了
RES MR2109               ; INDEX ｱﾝｻ
CON
RES R42203               ; INDEX回転中（SET/RST）
CON
SET MR6614               ; INDEX 治具ｴｱｰ上下 上昇
CON
AND R4102                ; INDEX 1ST 治具ｴｱｰ上下 上昇端
AND R4104                ; INDEX 2ST 治具ｴｱｰ上下 上昇端
AND R4106                ; INDEX 3ST 治具ｴｱｰ上下 上昇端
AND R4108                ; INDEX 4ST 治具ｴｱｰ上下 上昇端
JMP @MR4115
STG @MR4115
AND R40008               ; ﾐｭｰﾃｨﾝｸﾞ中
RES R42212               ; INDEX監視1
CON
JMP @MR4200
;機種によってインクリメント方式を変える
STG @MR4200
MPS
ANB R40003               ; 原点復帰中
MPS
AND R42500               ; Black 選択
MPS
AND< DM1359 #12          ; INDEX位置記憶
JMP @MR4201              ; +4
MPP
AND>= DM1359 #12         ; INDEX位置記憶
JMP @MR4203              ; =0
MPP
ANB R42500               ; Black 選択
MPS
AND< DM1359 #14          ; INDEX位置記憶
JMP @MR4201              ; +4
MPP
AND>= DM1359 #14         ; INDEX位置記憶
JMP @MR4204              ; =2
MPP
AND R40003               ; 原点復帰中
MPS
AND< DM1359 #14          ; INDEX位置記憶
JMP @MR4202              ; +2
MPP
AND>= DM1359 #14         ; INDEX位置記憶
JMP @MR4203              ; =0
STG @MR4201              ; +4
CAL+ #4 DM1359 DM1359    ; INDEX位置記憶  INDEX位置記憶
JMP @MR4206
STG @MR4202              ; +2
CAL+ #2 DM1359 DM1359    ; INDEX位置記憶  INDEX位置記憶
JMP @MR4206
STG @MR4203              ; =0
DW #0 DM1359             ; INDEX位置記憶
CON
JMP @MR4206
STG @MR4204              ; =2
DW #2 DM1359             ; INDEX位置記憶
CON
JMP @MR4206
STG @MR4206
MPS
SET @MR4101              ; INDEX CW回転Fin
CON
ENDS
MRD
WSR DM1352 #3 #1         ; NGﾜｰｸﾌﾗｸﾞ ST2
MPP
WSR DM1360 #3 #1         ; ST1 Work Memory
;<h1/>INDEX Case Memory / INDEX上ｹｰｽ記憶　
STG @MR4400              ; ｹｰｽ記憶開始
SET @MR4402              ; ｹｰｽ記憶処理中
CON
MPS
AND R4000                ; INDEX 1ST ｶｰﾄﾘｯｼﾞ有
BSET DM1360 #0           ; ST1 Work Memory
CON
JMP @MR4403
MPP
ANB R4000                ; INDEX 1ST ｶｰﾄﾘｯｼﾞ有
BRES DM1360 #0           ; ST1 Work Memory
CON
JMP @MR4403
STG @MR4403
MPS
AND R4003                ; INDEX 2ST ｶｰﾄﾘｯｼﾞ有
BSET DM1361 #0           ; ST2 Work Memory
CON
JMP @MR4404
MPP
ANB R4003                ; INDEX 2ST ｶｰﾄﾘｯｼﾞ有
BRES DM1361 #0           ; ST2 Work Memory
CON
JMP @MR4404
STG @MR4404
MPS
AND R4006                ; INDEX 3ST ｶｰﾄﾘｯｼﾞ有
BSET DM1362 #0           ; ST3 Work Memory
CON
JMP @MR4405
MPP
ANB R4006                ; INDEX 3ST ｶｰﾄﾘｯｼﾞ有
BRES DM1362 #0           ; ST3 Work Memory
CON
JMP @MR4405
STG @MR4405
MPS
AND R4009                ; INDEX 4ST ｶｰﾄﾘｯｼﾞ有
BSET DM1363 #0           ; ST4 Work Memory
CON
JMP @MR4406
MPP
ANB R4009                ; INDEX 4ST ｶｰﾄﾘｯｼﾞ有
BRES DM1363 #0           ; ST4 Work Memory
CON
JMP @MR4406
STG @MR4406
SET @MR4401              ; ｹｰｽ記憶完了
CON
ENDS
;<h1/>Arrival Case Check / 到着ｹｰｽﾁｪｯｸ
STG @MR4408              ; 到着ｹｰｽﾁｪｯｸ
MPS
AND R4003                ; INDEX 2ST ｶｰﾄﾘｯｼﾞ有
MPS
AND= DM1361 #1           ; ST2 Work Memory
JMP @MR4411
MPP
AND= DM1361 #0           ; ST2 Work Memory
SET @MR400               ; Err293 INDEX
CON
JMP @MR4508
MPP
ANB R4003                ; INDEX 2ST ｶｰﾄﾘｯｼﾞ有
MPS
AND= DM1361 #0           ; ST2 Work Memory
JMP @MR4411
MPP
AND= DM1361 #1           ; ST2 Work Memory
SET @MR300               ; Err289 INDEX
CON
JMP @MR4508
STG @MR4411
MPS
AND R4006                ; INDEX 3ST ｶｰﾄﾘｯｼﾞ有
MPS
AND= DM1362 #1           ; ST3 Work Memory
JMP @MR4412
MPP
AND= DM1362 #0           ; ST3 Work Memory
SET @MR404               ; Err294 INDEX
CON
JMP @MR4509
MPP
ANB R4006                ; INDEX 3ST ｶｰﾄﾘｯｼﾞ有
MPS
AND= DM1362 #0           ; ST3 Work Memory
JMP @MR4412
MPP
AND= DM1362 #1           ; ST3 Work Memory
SET @MR304               ; Err290 INDEX
CON
JMP @MR4509
STG @MR4412
MPS
AND R4009                ; INDEX 4ST ｶｰﾄﾘｯｼﾞ有
MPS
AND= DM1363 #1           ; ST4 Work Memory
JMP @MR4413
MPP
AND= DM1363 #0           ; ST4 Work Memory
SET @MR408               ; Err295 INDEX
CON
JMP @MR4510
MPP
ANB R4009                ; INDEX 4ST ｶｰﾄﾘｯｼﾞ有
MPS
AND= DM1363 #0           ; ST4 Work Memory
JMP @MR4413
MPP
AND= DM1363 #1           ; ST4 Work Memory
SET @MR308               ; Err291 INDEX
CON
JMP @MR4510
STG @MR4413
SET @MR4409              ; 到着ｹｰｽﾁｪｯｸ完了
CON
ENDS
;
STG @MR4508
LD @MR403                ; Err293 INDEX解除完了
OR @MR303                ; Err289 INDEX解除完了
ANL
RES @MR403               ; Err293 INDEX解除完了
CON
RES @MR303               ; Err289 INDEX解除完了
CON
MPS
ANB R4003                ; INDEX 2ST ｶｰﾄﾘｯｼﾞ有
DW #0 DM1361             ; ST2 Work Memory
CON
JMP @MR4408              ; 到着ｹｰｽﾁｪｯｸ
MPP
AND R4003                ; INDEX 2ST ｶｰﾄﾘｯｼﾞ有
DW #1 DM1361             ; ST2 Work Memory
CON
DW #3 DM1352             ; NGﾜｰｸﾌﾗｸﾞ ST2
CON
JMP @MR4408              ; 到着ｹｰｽﾁｪｯｸ
STG @MR4509
LD @MR407                ; Err294 INDEX解除完了
OR @MR307                ; Err290 INDEX解除完了
ANL
RES @MR407               ; Err294 INDEX解除完了
CON
RES @MR307               ; Err290 INDEX解除完了
CON
MPS
ANB R4006                ; INDEX 3ST ｶｰﾄﾘｯｼﾞ有
DW #0 DM1362             ; ST3 Work Memory
CON
JMP @MR4411
MPP
AND R4006                ; INDEX 3ST ｶｰﾄﾘｯｼﾞ有
DW #1 DM1362             ; ST3 Work Memory
CON
DW #3 DM1353             ; NGﾜｰｸﾌﾗｸﾞ ST3
CON
JMP @MR4411
STG @MR4510
LD @MR411                ; Err295 INDEX解除完了
OR @MR311                ; Err291 INDEX解除完了
ANL
RES @MR411               ; Err295 INDEX解除完了
CON
RES @MR311               ; Err291 INDEX解除完了
CON
MPS
ANB R4009                ; INDEX 4ST ｶｰﾄﾘｯｼﾞ有
DW #0 DM1363             ; ST4 Work Memory
CON
JMP @MR4412
MPP
AND R4009                ; INDEX 4ST ｶｰﾄﾘｯｼﾞ有
DW #1 DM1363             ; ST4 Work Memory
CON
DW #3 DM1354             ; NGﾜｰｸﾌﾗｸﾞ ST4
CON
JMP @MR4412
;<h1/>Floating check
STG @MR2200              ; ﾜｰｸ浮きﾁｪｯｸ開始
MPS
LD R4001                 ; INDEX 1ST ｶｰﾄﾘｯｼﾞ浮き確認 (外)
AND R4002                ; INDEX 1ST ｶｰﾄﾘｯｼﾞ浮き確認 (内)
ANL
JMP @MR2202
MPP
LDB R4001                ; INDEX 1ST ｶｰﾄﾘｯｼﾞ浮き確認 (外)
ORB R4002                ; INDEX 1ST ｶｰﾄﾘｯｼﾞ浮き確認 (内)
ANL
SET @MR412               ; Err296 INDEX 1ST Floating
CON
JMP @MR2206              ; 1ST浮き
STG @MR2202
MPS
LD R4004                 ; INDEX 2ST ｶｰﾄﾘｯｼﾞ浮き確認 (外)
AND R4005                ; INDEX 2ST ｶｰﾄﾘｯｼﾞ浮き確認 (内)
ANL
JMP @MR2203
MPP
LDB R4004                ; INDEX 2ST ｶｰﾄﾘｯｼﾞ浮き確認 (外)
ORB R4005                ; INDEX 2ST ｶｰﾄﾘｯｼﾞ浮き確認 (内)
ANL
SET @MR500               ; Err297 INDEX 2ST Floating
CON
JMP @MR2207              ; 2ST浮き
STG @MR2203
MPS
LD R4007                 ; INDEX 3ST ｶｰﾄﾘｯｼﾞ浮き確認 (外)
AND R4008                ; INDEX 3ST ｶｰﾄﾘｯｼﾞ浮き確認 (内)
ANL
JMP @MR2204
MPP
LDB R4007                ; INDEX 3ST ｶｰﾄﾘｯｼﾞ浮き確認 (外)
ORB R4008                ; INDEX 3ST ｶｰﾄﾘｯｼﾞ浮き確認 (内)
ANL
SET @MR504               ; Err298 INDEX 3ST Floating
CON
JMP @MR2208              ; 3ST浮き
STG @MR2204
MPS
LD R4010                 ; INDEX 4ST ｶｰﾄﾘｯｼﾞ浮き確認 (外)
AND R4011                ; INDEX 4ST ｶｰﾄﾘｯｼﾞ浮き確認 (内)
ANL
JMP @MR2205
MPP
LDB R4010                ; INDEX 4ST ｶｰﾄﾘｯｼﾞ浮き確認 (外)
ORB R4011                ; INDEX 4ST ｶｰﾄﾘｯｼﾞ浮き確認 (内)
ANL
SET @MR508               ; Err299 INDEX 4ST Floating
CON
JMP @MR2209              ; 4ST浮き
STG @MR2205
SET @MR2201              ; ﾜｰｸ浮きﾁｪｯｸ終了
CON
ENDS
;Err296-299 Cartridge Floating Detection Before turn
STG @MR2206              ; 1ST浮き
AND @MR415               ; Err296 INDEX解除完了
RES @MR415               ; Err296 INDEX解除完了
CON
JMP @MR2210
STG @MR2207              ; 2ST浮き
AND @MR503               ; Err297 INDEX解除完了
RES @MR503               ; Err297 INDEX解除完了
CON
JMP @MR2210
STG @MR2208              ; 3ST浮き
AND @MR507               ; Err298 INDEX解除完了
RES @MR507               ; Err298 INDEX解除完了
CON
JMP @MR2210
STG @MR2209              ; 4ST浮き
AND @MR511               ; Err299 INDEX解除完了
RES @MR511               ; Err299 INDEX解除完了
CON
JMP @MR2210
STG @MR2210
AND @MR015               ; INDEX ﾎﾟｰｽﾞ&ｴﾗｰ無
SET R42200               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
AND R42006               ; STARTsw ON
RES R42200               ; ｽﾀｰﾄSWﾗﾝﾌﾟ点滅
CON
JMP @MR2200              ; ﾜｰｸ浮きﾁｪｯｸ開始
;<h1/>ｴﾗｰ / Error 
;Err281 Index Driver Alarm / ｲﾝﾃﾞｯｸｽﾄﾞﾗｲﾊﾞｰｱﾗｰﾑ
LD R2103                 ; INDEX Power ON
AND R1101                ; ﾗｲﾄｶｰﾃﾝ
AND<> DM1200 #281        ; 通常ｴﾗｰ番号
AND R1108                ; INDEX ｻｰﾓｽﾀｯﾄ
ANB R1106                ; INDEX Alarm1 正常=ON
TMR @17 #20              ; ｳｴｲﾄﾀｲﾏｰ17
CON
AND @T17                 ; ｳｴｲﾄﾀｲﾏｰ17
@SET @MR100              ; Err281 INDEX
STG @MR100               ; Err281 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY  Err_sw_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE  Err_sw_REMOVE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE  Err_sw_RECHECK
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE  Err_sw_CONTINUE
CON
JMP @MR101
MOV #281 DM1200          ; 通常ｴﾗｰ番号
STG @MR101
AND R40010               ; ERROR
JMP @MR102
STG @MR102
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR103               ; Err281 INDEX解除完了
CON
ENDS
;Err282 Remove the case on Index / Indexﾜｰｸ除材要求
STG @MR104               ; Err282 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY  Err_sw_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE  Err_sw_REMOVE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE  Err_sw_RECHECK
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE  Err_sw_CONTINUE
CON
JMP @MR105
MOV #282 DM1200          ; 通常ｴﾗｰ番号
STG @MR105
AND R40010               ; ERROR
JMP @MR106
STG @MR106
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR107               ; Err282 INDEX解除完了
CON
ENDS
;Err283 Remove Defect case by UT1 / Index到着ﾜｰｸ不良(UT1)
STG @MR108               ; Err283 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY  Err_sw_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE  Err_sw_REMOVE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE  Err_sw_RECHECK
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE  Err_sw_CONTINUE
CON
JMP @MR109
MOV #283 DM1200          ; 通常ｴﾗｰ番号
STG @MR109
AND R40010               ; ERROR
JMP @MR110
STG @MR110
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR111               ; Err283 INDEX解除完了
CON
ENDS
;Err284　Remove Defect case by UT2 / Index到着ﾜｰｸ不良(UT2)
STG @MR112               ; Err284 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY  Err_sw_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE  Err_sw_REMOVE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE  Err_sw_RECHECK
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE  Err_sw_CONTINUE
CON
JMP @MR113
MOV #284 DM1200          ; 通常ｴﾗｰ番号
STG @MR113
AND R40010               ; ERROR
JMP @MR114
STG @MR114
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR115               ; Err284 INDEX解除完了
CON
ENDS
;Err285 Remove Defect case by UT3 / Index到着ﾜｰｸ不良(UT3)
STG @MR200               ; Err285 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY  Err_sw_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE  Err_sw_REMOVE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE  Err_sw_RECHECK
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE  Err_sw_CONTINUE
CON
JMP @MR201
MOV #285 DM1200          ; 通常ｴﾗｰ番号
STG @MR201
AND R40010               ; ERROR
JMP @MR202
STG @MR202
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR203               ; Err285 INDEX解除完了
CON
ENDS
;Err286 Remove Defect case by UT4 / Index到着ﾜｰｸ不良(UT4)
STG @MR204               ; Err286 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY  Err_sw_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE  Err_sw_REMOVE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE  Err_sw_RECHECK
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE  Err_sw_CONTINUE
CON
JMP @MR205
MOV #286 DM1200          ; 通常ｴﾗｰ番号
STG @MR205
AND R40010               ; ERROR
JMP @MR206
STG @MR206
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR207               ; Err286 INDEX解除完了
CON
ENDS
;Err287 Index Thormostat Opeating / ｲﾝﾃﾞｯｸｽｻｰﾓｽﾀｯﾄ作動
STG @MR208               ; Err287 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY  Err_sw_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE  Err_sw_REMOVE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE  Err_sw_RECHECK
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE  Err_sw_CONTINUE
CON
JMP @MR209
MOV #287 DM1200          ; 通常ｴﾗｰ番号
STG @MR209
AND R40010               ; ERROR
JMP @MR210
STG @MR210
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR211               ; Err287 INDEX解除完了
CON
ENDS
;Err288 ST1 Work Infomation Error(Lost) / ST1 ﾜｰｸ情報不一致(無くなった）
STG @MR212               ; Err288 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY  Err_sw_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE  Err_sw_REMOVE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE  Err_sw_RECHECK
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE  Err_sw_CONTINUE
CON
JMP @MR213
MOV #288 DM1200          ; 通常ｴﾗｰ番号
STG @MR213
AND R40010               ; ERROR
JMP @MR214
STG @MR214
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR215               ; Err288 INDEX解除完了
CON
ENDS
;Err289 ST2 Work Infomation Error(Lost) / ST2 ﾜｰｸ情報不一致(無くなった）
STG @MR300               ; Err289 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY  Err_sw_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE  Err_sw_REMOVE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE  Err_sw_RECHECK
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE  Err_sw_CONTINUE
CON
JMP @MR301
MOV #289 DM1200          ; 通常ｴﾗｰ番号
STG @MR301
AND R40010               ; ERROR
JMP @MR302
STG @MR302
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR303               ; Err289 INDEX解除完了
CON
ENDS
;Err290 ST3 Work Infomation Error(Lost) / ST3 ﾜｰｸ情報不一致(無くなった）
STG @MR304               ; Err290 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY  Err_sw_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE  Err_sw_REMOVE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE  Err_sw_RECHECK
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE  Err_sw_CONTINUE
CON
JMP @MR305
MOV #290 DM1200          ; 通常ｴﾗｰ番号
STG @MR305
AND R40010               ; ERROR
JMP @MR306
STG @MR306
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR307               ; Err290 INDEX解除完了
CON
ENDS
;Err291 ST4 Work Infomation Error(Lost) / ST4 ﾜｰｸ情報不一致(無くなった）
STG @MR308               ; Err291 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY  Err_sw_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE  Err_sw_REMOVE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE  Err_sw_RECHECK
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE  Err_sw_CONTINUE
CON
JMP @MR309
MOV #291 DM1200          ; 通常ｴﾗｰ番号
STG @MR309
AND R40010               ; ERROR
JMP @MR310
STG @MR310
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR311               ; Err291 INDEX解除完了
CON
ENDS
;Err292 ST1 Work Infomation Error(Born) / ST1 ﾜｰｸ情報不一致(増えた）
STG @MR312               ; Err292 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY  Err_sw_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE  Err_sw_REMOVE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE  Err_sw_RECHECK
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE  Err_sw_CONTINUE
CON
JMP @MR313
MOV #292 DM1200          ; 通常ｴﾗｰ番号
STG @MR313
AND R40010               ; ERROR
JMP @MR314
STG @MR314
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR315               ; Err292 INDEX解除完了
CON
ENDS
;Err293 ST2 Work Infomation Error(Born) / ST2 ﾜｰｸ情報不一致(増えた)
STG @MR400               ; Err293 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY  Err_sw_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE  Err_sw_REMOVE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE  Err_sw_RECHECK
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE  Err_sw_CONTINUE
CON
JMP @MR401
MOV #293 DM1200          ; 通常ｴﾗｰ番号
STG @MR401
AND R40010               ; ERROR
JMP @MR402
STG @MR402
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR403               ; Err293 INDEX解除完了
CON
ENDS
;Err294 ST3 Work Infomation Error(Born) / ST3 ﾜｰｸ情報不一致(増えた)
STG @MR404               ; Err294 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY  Err_sw_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE  Err_sw_REMOVE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE  Err_sw_RECHECK
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE  Err_sw_CONTINUE
CON
JMP @MR405
MOV #294 DM1200          ; 通常ｴﾗｰ番号
STG @MR405
AND R40010               ; ERROR
JMP @MR406
STG @MR406
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR407               ; Err294 INDEX解除完了
CON
ENDS
;Err295 ST4 Work Infomation Error(Born) / ST4 ﾜｰｸ情報不一致(増えた)
STG @MR408               ; Err295 INDEX
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY  Err_sw_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE  Err_sw_REMOVE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE  Err_sw_RECHECK
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE  Err_sw_CONTINUE
CON
JMP @MR409
MOV #295 DM1200          ; 通常ｴﾗｰ番号
STG @MR409
AND R40010               ; ERROR
JMP @MR410
STG @MR410
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR411               ; Err295 INDEX解除完了
CON
ENDS
;Err296 1ST Cartridge floating / 1ST ｶｰﾄﾘｯｼﾞ浮き
STG @MR412               ; Err296 INDEX 1ST Floating
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY  Err_sw_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE  Err_sw_REMOVE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE  Err_sw_RECHECK
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE  Err_sw_CONTINUE
CON
JMP @MR413
MOV #296 DM1200          ; 通常ｴﾗｰ番号
STG @MR413
AND R40010               ; ERROR
JMP @MR414
STG @MR414
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR415               ; Err296 INDEX解除完了
CON
ENDS
;Err297 2ST Cartridge floating / 2ST ｶｰﾄﾘｯｼﾞ浮き
STG @MR500               ; Err297 INDEX 2ST Floating
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY  Err_sw_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE  Err_sw_REMOVE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE  Err_sw_RECHECK
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE  Err_sw_CONTINUE
CON
JMP @MR501
MOV #297 DM1200          ; 通常ｴﾗｰ番号
STG @MR501
AND R40010               ; ERROR
JMP @MR502
STG @MR502
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR503               ; Err297 INDEX解除完了
CON
ENDS
;Err298 3ST Cartridge floating / 3ST ｶｰﾄﾘｯｼﾞ浮き
STG @MR504               ; Err298 INDEX 3ST Floating
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY  Err_sw_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE  Err_sw_REMOVE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE  Err_sw_RECHECK
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE  Err_sw_CONTINUE
CON
JMP @MR505
MOV #298 DM1200          ; 通常ｴﾗｰ番号
STG @MR505
AND R40010               ; ERROR
JMP @MR506
STG @MR506
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR507               ; Err298 INDEX解除完了
CON
ENDS
;Err299 4ST Cartridge floating / 4ST ｶｰﾄﾘｯｼﾞ浮き
STG @MR508               ; Err299 INDEX 4ST Floating
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY  Err_sw_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE  Err_sw_REMOVE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE  Err_sw_RECHECK
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE  Err_sw_CONTINUE
CON
JMP @MR509
MOV #299 DM1200          ; 通常ｴﾗｰ番号
STG @MR509
AND R40010               ; ERROR
JMP @MR510
STG @MR510
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR511               ; Err299 INDEX解除完了
CON
ENDS
;Err300
STG @MR512               ; Err300 INDEX干渉有り
ANB R40010               ; ERROR
SET R40010               ; ERROR
CON
SET R41015               ; TASK16 ERROR中
CON
DW SW_RETRY DM1203       ; ERROR_SW_RETRY  Err_sw_RETRY
CON
DW SW_NONE DM1204        ; ERROR_SW_NONE  Err_sw_REMOVE
CON
DW SW_NONE DM1205        ; ERROR_SW_NONE  Err_sw_RECHECK
CON
DW SW_NONE DM1206        ; ERROR_SW_NONE  Err_sw_CONTINUE
CON
JMP @MR513
MOV #300 DM1200          ; 通常ｴﾗｰ番号
STG @MR513
AND R40010               ; ERROR
JMP @MR514
STG @MR514
ANB R40010               ; ERROR
RES R41015               ; TASK16 ERROR中
CON
SET @MR515               ; Err300 INDEX解除完了
CON
ENDS
;PACKｾｯﾄ
;Pack Set
LD @MR900                ; PACK16-1
OUT R40215               ; ﾎﾟｰｽﾞ禁止16
END
ENDH
