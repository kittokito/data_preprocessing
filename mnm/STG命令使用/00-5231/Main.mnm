DEVICE:51
;MODULE:Main
;MODULE_TYPE:0
;SCRIPT_TYPE:
;非常停止　出力クリア
;
;Emergency Stop Output Clear
LDP R50000               ; 即停止
ORP R55000               ; TRAP
ORP R55001               ; TRAP2
SET MR1815               ; ﾛｰｶﾙｸﾘｱ
CON
ZRES @MR000 @MR4915
;原点復帰
;
;Moving Home Position
LD R50003                ; 原点復帰中
SET R35000               ; ﾋｰﾀｰ1 ON
CON
DIFU @MR000
LD @MR000
SET @MR001
STG @MR001
AND R50003               ; 原点復帰中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
ANB R50100               ; ｽﾀｰﾄSW PLS
JMP @MR002
STG @MR002
AND R50003               ; 原点復帰中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
SET R50200               ; ﾒｲﾝ動作中
CON
SET MR2000               ; ｴﾘｱｾﾝｻｰ　有効中
CON
JMP @MR003
STG @MR003
AND R50003               ; 原点復帰中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
RES R35002               ; 巻取り開始M1
CON
RES R30008               ; ﾋｰﾀｰ 下降
CON
SET R35000               ; ﾋｰﾀｰ1 ON
CON
AND R1008                ; ﾋｰﾀｰ 上限
JMP @MR004
STG @MR004
AND R50003               ; 原点復帰中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
OUT MR4004               ; ﾃﾝｼｮﾝF    原点復帰
CON
RES R30113               ; ﾃﾝｼｮﾝF 送出し側 上昇
CON
RES R30112               ; ﾃﾝｼｮﾝF 巻取り側 下降
CON
ANB R1112                ; ﾃﾝｼｮﾝF 送出し側 上限
ANB R1110                ; ﾃﾝｼｮﾝF 巻取り側 下限
JMP @MR005
STG @MR005
AND R50003               ; 原点復帰中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
TMR #400 #5
CON
AND T400
JMP @MR006
STG @MR006
AND R50003               ; 原点復帰中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
OUT MR3105               ; YｽﾗｲﾄﾞRB 原点復帰
CON
TMR @10 #2
CON
AND @T10
AND R1306                ; 2-原点復帰完了
JMP @MR007
STG @MR007
AND R50003               ; 原点復帰中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
OUT MR3005               ; X搬送RB    原点復帰
CON
TMR @11 #2
CON
AND @T11
AND R1208                ; 1-原点復帰完了
JMP @MR008
STG @MR008
AND R50003               ; 原点復帰中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
OUT MR4000               ; ﾃｰﾌﾟ送り出し 原点復帰
CON
RES R30009               ; ﾃｰﾌﾟ送り出し 下降
CON
AND R1010                ; ﾃｰﾌﾟ送り出し 上限
TMR #402 #5
CON
AND T402
JMP @MR009
STG @MR009
AND R50003               ; 原点復帰中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
LDA DM500                ; 1-ﾜｰｸｾｯﾄ位置ﾎﾟｲﾝﾄNo.
CON
STA R40000               ; X搬送RB　位置指令1
CON
LDA DM500                ; 1-ﾜｰｸｾｯﾄ位置ﾎﾟｲﾝﾄNo.
CON
STA R40100               ; YｽﾗｲﾄﾞRB　位置指令1
CON
TMR #403 #2
CON
AND T403
JMP @MR010
STG @MR010
AND R50003               ; 原点復帰中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
OUT MR3000               ; X搬送RB    ｽﾀｰﾄ
CON
TMR @12 #2
CON
AND @T12
AND R1209                ; 1-位置決め完了
JMP @MR011
STG @MR011
AND R50003               ; 原点復帰中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
OUT MR3100               ; YｽﾗｲﾄﾞRB ｽﾀｰﾄ
CON
TMR @13 #2
CON
AND @T13
AND R1305                ; 2-位置決め完了
JMP @MR012
STG @MR012
AND R50003               ; 原点復帰中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
TMR #404 #1
CON
AND T404
JMP @MR013
STG @MR013
AND R50003               ; 原点復帰中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
ANB R1206                ; 1-移動中
LDA R40200               ; X搬送RB 完了POS1
CON
STA DM1010               ; 1-RB移動ﾎﾟｲﾝﾄ
CON
MPS
AND= DM500 DM1010        ; 1-ﾜｰｸｾｯﾄ位置ﾎﾟｲﾝﾄNo.  1-RB移動ﾎﾟｲﾝﾄ
JMP @MR014
MPP
AND<> DM500 DM1010       ; 1-ﾜｰｸｾｯﾄ位置ﾎﾟｲﾝﾄNo.  1-RB移動ﾎﾟｲﾝﾄ
SET @MR3500
CON
ENDS
STG @MR014
AND R50003               ; 原点復帰中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
ANB R1304                ; 2-移動中
LDA R40300               ; YｽﾗｲﾄﾞRB 完了POS1
CON
STA DM1011               ; 2-RB移動ﾎﾟｲﾝﾄ
CON
MPS
AND= DM500 DM1011        ; 1-ﾜｰｸｾｯﾄ位置ﾎﾟｲﾝﾄNo.  2-RB移動ﾎﾟｲﾝﾄ
JMP @MR015
MPP
AND<> DM500 DM1011       ; 1-ﾜｰｸｾｯﾄ位置ﾎﾟｲﾝﾄNo.  2-RB移動ﾎﾟｲﾝﾄ
SET @MR3500
CON
ENDS
STG @MR015
AND R50003               ; 原点復帰中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
RES R30108               ; ﾜｰｸｸﾗﾝﾌﾟ 閉
CON
SET R30109               ; ﾜｰｸｸﾗﾝﾌﾟ 開
CON
AND R1107                ; ﾜｰｸｸﾗﾝﾌﾟ左 開限
ANB R1106                ; ﾜｰｸｸﾗﾝﾌﾟ左 閉限
AND R1109                ; ﾜｰｸｸﾗﾝﾌﾟ右 開限
ANB R1108                ; ﾜｰｸｸﾗﾝﾌﾟ右 閉限
JMP @MR100
STG @MR100
AND R50003               ; 原点復帰中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
RES R30104               ; ﾜｰｸ押込 前進
CON
ANB R1104                ; ﾜｰｸ押込 前進限
TMR #474 #3
CON
AND T474
JMP @MR105
STG @MR105
AND R50003               ; 原点復帰中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
ANB R1112                ; ﾃﾝｼｮﾝF 送出し側 上限
ANB R1110                ; ﾃﾝｼｮﾝF 巻取り側 下限
DW #0 DM1000             ; 溶着ｶｳﾝﾄ
CON
JMP @MR106
STG @MR106
AND R50003               ; 原点復帰中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
RES MR2000               ; ｴﾘｱｾﾝｻｰ　有効中
CON
LDB R1004                ; ｴﾘｱｾﾝｻｰ
OR CR2002                ; 常時ON
ANL
TMR #50 #2
CON
AND T50
JMP @MR107
STG @MR107
AND R50003               ; 原点復帰中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
LD R1004                 ; ｴﾘｱｾﾝｻｰ
OR CR2002                ; 常時ON
ANL
TMR #51 #2
CON
AND T51
JMP @MR200
STG @MR200
AND R50003               ; 原点復帰中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
RES MR2000               ; ｴﾘｱｾﾝｻｰ　有効中
CON
RES R50200               ; ﾒｲﾝ動作中
CON
ENDS
;自動運転
;
;Automatic Driving
LD R50001                ; 自動中
MPS
ANB R1105                ; 調整ﾓｰﾄﾞ
DIFU @MR1000             ; AUTO START PLS
MPP
AND R1105                ; 調整ﾓｰﾄﾞ
DIFU @MR2000
LD @MR1000               ; AUTO START PLS
MPS
AND> DM550 DM1001        ; 巻取回数  溶着ｶｳﾝﾄ
SET @MR1001
MPP
AND<= DM550 DM1001       ; 巻取回数  溶着ｶｳﾝﾄ
DW #0 DM1001             ; 溶着ｶｳﾝﾄ
CON
SET @MR1001
;@EM100.D = 0
;@EM102.D = 0
;@EM104.D = 0
;@EM106.D = 0
;
LD @MR1000               ; AUTO START PLS
NCJ #1001
;@EM100.D = 0
;
LD CR2002                ; 常時ON
MOV.D #0 @EM100
;@EM102.D = 0
;
LD CR2002                ; 常時ON
MOV.D #0 @EM102
;@EM104.D = 0
;
LD CR2002                ; 常時ON
MOV.D #0 @EM104
;@EM106.D = 0
;
LD CR2002                ; 常時ON
MOV.D #0 @EM106
LABEL #1001
;
STG @MR1001
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
ANB R50100               ; ｽﾀｰﾄSW PLS
JMP @MR1002
STG @MR1002
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
MPS
AND R001                 ; ﾋｰﾀｰ適温
JMP @MR1013
MPP
ANB R001                 ; ﾋｰﾀｰ適温
MPS
LD CR2003                ; 常時OFF
ANB R20110               ; 調整ﾓｰﾄﾞﾌﾗｸﾞ
ANL
SET MR2100               ; ﾋｰﾀｰ温度範囲外
CON
ENDS
MPP
AND CR2002               ; 常時ON
SET MR2200               ; ﾋｰﾀｰ温度範囲外ｽﾀｰﾄBZ警告
CON
ENDS
STG @MR1013
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
MPS
ANB R1115                ; ｶｳﾝﾄUP信号
JMP @MR1012
MPP
AND R1115                ; ｶｳﾝﾄUP信号
SET MR2101               ; ﾃｰﾌﾟｶｳﾝﾄUP 警告
CON
ENDS
STG @MR1012
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
SET R50200               ; ﾒｲﾝ動作中
CON
SET MR2000               ; ｴﾘｱｾﾝｻｰ　有効中
CON
JMP @MR1003
STG @MR1003
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
OUT MR4007               ; ﾜｰｸ押込 自動
CON
SET R30104               ; ﾜｰｸ押込 前進
CON
AND R1104                ; ﾜｰｸ押込 前進限
TMR #476 #3
CON
AND T476
JMP @MR1004
STG @MR1004
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
OUT MR4005               ; ﾜｰｸｸﾗﾝﾌﾟ 自動
CON
RES R30109               ; ﾜｰｸｸﾗﾝﾌﾟ 開
CON
SET R30108               ; ﾜｰｸｸﾗﾝﾌﾟ 閉
CON
ANB R1107                ; ﾜｰｸｸﾗﾝﾌﾟ左 開限
AND R1106                ; ﾜｰｸｸﾗﾝﾌﾟ左 閉限
ANB R1109                ; ﾜｰｸｸﾗﾝﾌﾟ右 開限
AND R1108                ; ﾜｰｸｸﾗﾝﾌﾟ右 閉限
TMR #475 #3
CON
AND T475
JMP @MR1100
;ワーク搬送行き
;Work transportation
STG @MR1100
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
LDA DM1000               ; 溶着ｶｳﾝﾄ
CON
STA.S Z7
CON
SET @MR1700
CON
JMP @MR1101
STG @MR1101
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
MPS
AND= DM100 #0            ; 機種選択
MPS
LD>= DM501:Z7 #1         ; 溶着ﾎﾟｲﾝﾄ1(BK-Stratos)
AND<= DM501:Z7 DM551     ; 溶着ﾎﾟｲﾝﾄ1(BK-Stratos)  溶着位置数(BK-Stratos)
ANL
JMP @MR4500
MPP
LD< DM501:Z7 #1          ; 溶着ﾎﾟｲﾝﾄ1(BK-Stratos)
OR> DM501:Z7 DM551       ; 溶着ﾎﾟｲﾝﾄ1(BK-Stratos)  溶着位置数(BK-Stratos)
ANL
SET @MR3905              ; ERROR 19 SET
CON
ENDS
MRD
AND= DM100 #1            ; 機種選択
MPS
LD>= DM511:Z7 #1         ; 溶着ﾎﾟｲﾝﾄ1(BK-Seed)
AND<= DM511:Z7 DM552     ; 溶着ﾎﾟｲﾝﾄ1(BK-Seed)  溶着位置数(BK-Seed)
ANL
JMP @MR4500
MPP
LD< DM511:Z7 #1          ; 溶着ﾎﾟｲﾝﾄ1(BK-Seed)
OR> DM511:Z7 DM552       ; 溶着ﾎﾟｲﾝﾄ1(BK-Seed)  溶着位置数(BK-Seed)
ANL
SET @MR3905              ; ERROR 19 SET
CON
ENDS
MPP
AND= DM100 #2            ; 機種選択
MPS
LD>= DM521:Z7 #1         ; 溶着ﾎﾟｲﾝﾄ1(CL-Stratos)
AND<= DM521:Z7 DM553     ; 溶着ﾎﾟｲﾝﾄ1(CL-Stratos)  溶着位置数(CL-Stratos)
ANL
JMP @MR4500
MPP
LD< DM521:Z7 #1          ; 溶着ﾎﾟｲﾝﾄ1(CL-Stratos)
OR> DM521:Z7 DM553       ; 溶着ﾎﾟｲﾝﾄ1(CL-Stratos)  溶着位置数(CL-Stratos)
ANL
SET @MR3905              ; ERROR 19 SET
CON
ENDS
;溶着位置移動
STG @MR4500
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
MPS
AND= DM100 #0            ; 機種選択
LDA DM501:Z7             ; 溶着ﾎﾟｲﾝﾄ1(BK-Stratos)
CON
STA R40000               ; X搬送RB　位置指令1
CON
LDA DM501:Z7             ; 溶着ﾎﾟｲﾝﾄ1(BK-Stratos)
CON
STA R40100               ; YｽﾗｲﾄﾞRB　位置指令1
CON
JMP @MR1102
MRD
AND= DM100 #1            ; 機種選択
LDA DM511:Z7             ; 溶着ﾎﾟｲﾝﾄ1(BK-Seed)
CON
STA R40000               ; X搬送RB　位置指令1
CON
LDA DM511:Z7             ; 溶着ﾎﾟｲﾝﾄ1(BK-Seed)
CON
STA R40100               ; YｽﾗｲﾄﾞRB　位置指令1
CON
JMP @MR1102
MPP
AND= DM100 #2            ; 機種選択
LDA DM521:Z7             ; 溶着ﾎﾟｲﾝﾄ1(CL-Stratos)
CON
STA R40000               ; X搬送RB　位置指令1
CON
LDA DM521:Z7             ; 溶着ﾎﾟｲﾝﾄ1(CL-Stratos)
CON
STA R40100               ; YｽﾗｲﾄﾞRB　位置指令1
CON
JMP @MR1102
STG @MR1102
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
OUT MR4010               ; ﾀｲﾏ値変更
CON
TMR #452 #2
CON
AND T452
JMP @MR1103
STG @MR1103
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
OUT MR3003               ; X搬送RB    ｽﾀｰﾄ
CON
TMR @14 #2
CON
AND @T14
AND R1209                ; 1-位置決め完了
JMP @MR1104
STG @MR1104
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
OUT MR3101               ; YｽﾗｲﾄﾞRB ｽﾀｰﾄ
CON
TMR @15 #2
CON
AND @T15
AND R1305                ; 2-位置決め完了
TMR #453 #2
CON
AND T453
JMP @MR1105
STG @MR1105
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
ANB R1206                ; 1-移動中
LDA R40200               ; X搬送RB 完了POS1
CON
STA DM1010               ; 1-RB移動ﾎﾟｲﾝﾄ
CON
MPS
AND= DM100 #0            ; 機種選択
MPS
AND= DM501:Z7 DM1010     ; 溶着ﾎﾟｲﾝﾄ1(BK-Stratos)  1-RB移動ﾎﾟｲﾝﾄ
JMP @MR1106
MPP
AND<> DM501:Z7 DM1010    ; 溶着ﾎﾟｲﾝﾄ1(BK-Stratos)  1-RB移動ﾎﾟｲﾝﾄ
SET @MR3500
CON
ENDS
MRD
AND= DM100 #1            ; 機種選択
MPS
AND= DM511:Z7 DM1010     ; 溶着ﾎﾟｲﾝﾄ1(BK-Seed)  1-RB移動ﾎﾟｲﾝﾄ
JMP @MR1106
MPP
AND<> DM511:Z7 DM1010    ; 溶着ﾎﾟｲﾝﾄ1(BK-Seed)  1-RB移動ﾎﾟｲﾝﾄ
SET @MR3500
CON
ENDS
MPP
AND= DM100 #2            ; 機種選択
MPS
AND= DM521:Z7 DM1010     ; 溶着ﾎﾟｲﾝﾄ1(CL-Stratos)  1-RB移動ﾎﾟｲﾝﾄ
JMP @MR1106
MPP
AND<> DM521:Z7 DM1010    ; 溶着ﾎﾟｲﾝﾄ1(CL-Stratos)  1-RB移動ﾎﾟｲﾝﾄ
SET @MR3500
CON
ENDS
STG @MR1106
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
ANB R1304                ; 2-移動中
LDA R40300               ; YｽﾗｲﾄﾞRB 完了POS1
CON
STA DM1011               ; 2-RB移動ﾎﾟｲﾝﾄ
CON
MPS
AND= DM100 #0            ; 機種選択
MPS
AND= DM501:Z7 DM1011     ; 溶着ﾎﾟｲﾝﾄ1(BK-Stratos)  2-RB移動ﾎﾟｲﾝﾄ
JMP @MR1107
MPP
AND<> DM501:Z7 DM1011    ; 溶着ﾎﾟｲﾝﾄ1(BK-Stratos)  2-RB移動ﾎﾟｲﾝﾄ
SET @MR3500
CON
ENDS
MRD
AND= DM100 #1            ; 機種選択
MPS
AND= DM511:Z7 DM1011     ; 溶着ﾎﾟｲﾝﾄ1(BK-Seed)  2-RB移動ﾎﾟｲﾝﾄ
JMP @MR1107
MPP
AND<> DM511:Z7 DM1011    ; 溶着ﾎﾟｲﾝﾄ1(BK-Seed)  2-RB移動ﾎﾟｲﾝﾄ
SET @MR3500
CON
ENDS
MPP
AND= DM100 #2            ; 機種選択
MPS
AND= DM521:Z7 DM1011     ; 溶着ﾎﾟｲﾝﾄ1(CL-Stratos)  2-RB移動ﾎﾟｲﾝﾄ
JMP @MR1107
MPP
AND<> DM521:Z7 DM1011    ; 溶着ﾎﾟｲﾝﾄ1(CL-Stratos)  2-RB移動ﾎﾟｲﾝﾄ
SET @MR3500
CON
ENDS
STG @MR1107
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
TMR #478 #5
CON
AND T478
AND @MR1701
RES @MR1701
CON
JMP @MR1108
STG @MR1108
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
TMR #479 #1
CON
AND T479
JMP @MR1200
;ヒーター下降
STG @MR1200
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
MPS
AND= DM100 #0            ; 機種選択
MPS
LD>= DM501:Z7 #0         ; 溶着ﾎﾟｲﾝﾄ1(BK-Stratos)
AND<= DM501:Z7 #9        ; 溶着ﾎﾟｲﾝﾄ1(BK-Stratos)
ANL
JMP @MR1201
MPP
LD< DM501:Z7 #0          ; 溶着ﾎﾟｲﾝﾄ1(BK-Stratos)
OR> DM501:Z7 #9          ; 溶着ﾎﾟｲﾝﾄ1(BK-Stratos)
ANL
JMP @MR1300
MRD
AND= DM100 #1            ; 機種選択
MPS
LD>= DM511:Z7 #0         ; 溶着ﾎﾟｲﾝﾄ1(BK-Seed)
AND<= DM511:Z7 #9        ; 溶着ﾎﾟｲﾝﾄ1(BK-Seed)
ANL
JMP @MR1201
MPP
LD< DM511:Z7 #0          ; 溶着ﾎﾟｲﾝﾄ1(BK-Seed)
OR> DM511:Z7 #9          ; 溶着ﾎﾟｲﾝﾄ1(BK-Seed)
ANL
JMP @MR1300
MPP
AND= DM100 #2            ; 機種選択
MPS
LD>= DM521:Z7 #0         ; 溶着ﾎﾟｲﾝﾄ1(CL-Stratos)
AND<= DM521:Z7 #9        ; 溶着ﾎﾟｲﾝﾄ1(CL-Stratos)
ANL
JMP @MR1201
MPP
LD< DM521:Z7 #0          ; 溶着ﾎﾟｲﾝﾄ1(CL-Stratos)
OR> DM521:Z7 #9          ; 溶着ﾎﾟｲﾝﾄ1(CL-Stratos)
ANL
JMP @MR1300
STG @MR1201
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
AND R001                 ; ﾋｰﾀｰ適温
JMP @MR1202
STG @MR1202
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
MPS
ANB MR15006              ; ﾋｰﾀｰ下限  異常
SET R30008               ; ﾋｰﾀｰ 下降
CON
MPS
LD R1009                 ; ﾋｰﾀｰ 下限
OR CR2002                ; 常時ON
ANL
RES MR5000               ; 変位センサ値OK
CON
SET R30010               ; ﾂｰﾙ 下降
CON
JMP @MR1203
MPP
TMH #9 DM18              ; ツール下降時間管理  ツール下降時間管理
CON
AND T9                   ; ツール下降時間管理
SET @MR1114              ; Welding error
CON
SET @MR1500              ; Tool down time NG
CON
JMP @MR1204
MPP
AND MR15006              ; ﾋｰﾀｰ下限  異常
RES R30008               ; ﾋｰﾀｰ 下降
CON
ENDS
;@EM100.D = DM18.D - T9.D
LDP @MR1203
NCJ #1000
;@EM100.D = DM18.D - T9.D
;;Warning[1104]: "T9": (符号無し32ビット整数型->符号付き32ビット整数型) 演算によりデータが欠落する可能性があります。
;;Warning[1104]: "-": (符号無し32ビット整数型->符号付き32ビット整数型) 演算によりデータが欠落する可能性があります。
;;Warning[1103]: "=": (符号付き32ビット整数型->符号無し32ビット整数型) 代入によりデータが欠落する可能性があります。
LD CR2002                ; 常時ON
LDA.L DM18               ; ツール下降時間管理
CON
SUB.L T9                 ; ツール下降時間管理
CON
STA.D @EM100
LABEL #1000
;
LD R50001                ; 自動中
ANB R50009               ; 一時停止中
ANB R1105                ; 調整ﾓｰﾄﾞ
AND R30008               ; ﾋｰﾀｰ 下降
TMH #40 DM80             ; ﾃﾝｼｮﾝF送出し上限補助  ﾃﾝｼｮﾝF送出し上限補助
CON
MPS
AND T40                  ; ﾃﾝｼｮﾝF送出し上限補助
SET R30113               ; ﾃﾝｼｮﾝF 送出し側 上昇
CON
MPS
ANP R1112                ; ﾃﾝｼｮﾝF 送出し側 上限
SET @MR1600              ; 送出しﾃﾝｼｮﾝFｼﾘﾝﾀﾞﾁｪｯｸ
OUT @MR1602
MPP
TMH #11 DM22             ; ﾃﾝｼｮﾝFｼﾘﾝﾀﾞ上昇時間管理  ﾃﾝｼｮﾝFｼﾘﾝﾀﾞ上昇時間管理
CON
AND T11                  ; ﾃﾝｼｮﾝFｼﾘﾝﾀﾞ上昇時間管理
SET @MR1604
MPP
LD CR2003                ; 常時OFF
AND R1009                ; ﾋｰﾀｰ 下限
ANB @MR1600              ; 送出しﾃﾝｼｮﾝFｼﾘﾝﾀﾞﾁｪｯｸ
ANB R1105                ; 調整ﾓｰﾄﾞ
ANL
SET @MR1114              ; Welding error
CON
SET @MR3808              ; ERROR 17 　SET
;@EM104.D = DM22.D - T11.D
LDP @MR1602
NCJ #1002
;@EM104.D = DM22.D - T11.D
;;Warning[1104]: "T11": (符号無し32ビット整数型->符号付き32ビット整数型) 演算によりデータが欠落する可能性があります。
;;Warning[1104]: "-": (符号無し32ビット整数型->符号付き32ビット整数型) 演算によりデータが欠落する可能性があります。
;;Warning[1103]: "=": (符号付き32ビット整数型->符号無し32ビット整数型) 代入によりデータが欠落する可能性があります。
LD CR2002                ; 常時ON
LDA.L DM22               ; ﾃﾝｼｮﾝFｼﾘﾝﾀﾞ上昇時間管理
CON
SUB.L T11                ; ﾃﾝｼｮﾝFｼﾘﾝﾀﾞ上昇時間管理
CON
STA.D @EM104
LABEL #1002
;
LD R50001                ; 自動中
ANB R50009               ; 一時停止中
ANB R1105                ; 調整ﾓｰﾄﾞ
AND R30008               ; ﾋｰﾀｰ 下降
TMH #41 DM82             ; ﾃﾝｼｮﾝF巻取り下限補助  ﾃﾝｼｮﾝF巻取り下限補助
CON
MPS
AND T41                  ; ﾃﾝｼｮﾝF巻取り下限補助
SET R30112               ; ﾃﾝｼｮﾝF 巻取り側 下降
CON
MPS
ANP R1110                ; ﾃﾝｼｮﾝF 巻取り側 下限
SET @MR1601              ; 巻取りﾃﾝｼｮﾝFｼﾘﾝﾀﾞﾁｪｯｸ
OUT @MR1603
MPP
TMH #12 DM24             ; ﾃﾝｼｮﾝFｼﾘﾝﾀﾞ下降時間管理  ﾃﾝｼｮﾝFｼﾘﾝﾀﾞ下降時間管理
CON
AND T12                  ; ﾃﾝｼｮﾝFｼﾘﾝﾀﾞ下降時間管理
SET @MR1605
MPP
LD CR2003                ; 常時OFF
AND R1009                ; ﾋｰﾀｰ 下限
ANB @MR1601              ; 巻取りﾃﾝｼｮﾝFｼﾘﾝﾀﾞﾁｪｯｸ
ANB R1105                ; 調整ﾓｰﾄﾞ
ANL
SET @MR1114              ; Welding error
CON
SET @MR3900              ; ERROR 18 　SET
;@EM106.D = DM24.D - T12.D
LDP @MR1603
NCJ #1003
;@EM106.D = DM24.D - T12.D
;;Warning[1104]: "T12": (符号無し32ビット整数型->符号付き32ビット整数型) 演算によりデータが欠落する可能性があります。
;;Warning[1104]: "-": (符号無し32ビット整数型->符号付き32ビット整数型) 演算によりデータが欠落する可能性があります。
;;Warning[1103]: "=": (符号付き32ビット整数型->符号無し32ビット整数型) 代入によりデータが欠落する可能性があります。
LD CR2002                ; 常時ON
LDA.L DM24               ; ﾃﾝｼｮﾝFｼﾘﾝﾀﾞ下降時間管理
CON
SUB.L T12                ; ﾃﾝｼｮﾝFｼﾘﾝﾀﾞ下降時間管理
CON
STA.D @EM106
LABEL #1003
;
;ヒーター上昇
;2016/2/15 ヒーター上昇条件を変位センサの値を参照するように変更 NAT Kashi
STG @MR1203
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
LD R1009                 ; ﾋｰﾀｰ 下限
OR CR2002                ; 常時ON
ANL
MPS
AND MR5000               ; 変位センサ値OK
TMR #15 DM10             ; 溶着時間  溶着時間実態
CON
AND T15                  ; 溶着時間
RES @MR1604
CON
RES @MR1605
CON
JMP @MR1204
MPP
TMR #6 #100
CON
AND T6
RES R30008               ; ﾋｰﾀｰ 下降
CON
SET @MR1114              ; Welding error
CON
JMP @MR1204
STG @MR1204
RES R30008               ; ﾋｰﾀｰ 下降
CON
RES R30010               ; ﾂｰﾙ 下降
CON
MPS
AND R1008                ; ﾋｰﾀｰ 上限
RES @MR1600              ; 送出しﾃﾝｼｮﾝFｼﾘﾝﾀﾞﾁｪｯｸ
CON
RES @MR1601              ; 巻取りﾃﾝｼｮﾝFｼﾘﾝﾀﾞﾁｪｯｸ
CON
JMP @MR1205
MPP
TMH #10 DM20             ; ツール上昇時間管理  ツール上昇時間管理
CON
AND T10                  ; ツール上昇時間管理
SET @MR1114              ; Welding error
CON
SET @MR1501              ; Tool up time NG
CON
JMP @MR1205
;@EM102.D = DM20.D - T10.D
LDP @MR1205
NCJ #1004
;@EM102.D = DM20.D - T10.D
;;Warning[1104]: "T10": (符号無し32ビット整数型->符号付き32ビット整数型) 演算によりデータが欠落する可能性があります。
;;Warning[1104]: "-": (符号無し32ビット整数型->符号付き32ビット整数型) 演算によりデータが欠落する可能性があります。
;;Warning[1103]: "=": (符号付き32ビット整数型->符号無し32ビット整数型) 代入によりデータが欠落する可能性があります。
LD CR2002                ; 常時ON
LDA.L DM20               ; ツール上昇時間管理
CON
SUB.L T10                ; ツール上昇時間管理
CON
STA.D @EM102
LABEL #1004
;
STG @MR1205
OUT MR4006               ; ﾃﾝｼｮﾝF 自動
CON
ANB R50009               ; 一時停止中
TMR #461 #1
CON
AND T461
TMH #30 DM60             ; 溶着後保持  溶着後保持
CON
AND T30                  ; 溶着後保持
RES R30112               ; ﾃﾝｼｮﾝF 巻取り側 下降
CON
TMH #21 DM42             ; ﾃﾝｼｮﾝF巻取り上限補助  ﾃﾝｼｮﾝF巻取り上限補助
CON
AND T21                  ; ﾃﾝｼｮﾝF巻取り上限補助
RES R30113               ; ﾃﾝｼｮﾝF 送出し側 上昇
CON
ANB R1110                ; ﾃﾝｼｮﾝF 巻取り側 下限
ANB R1112                ; ﾃﾝｼｮﾝF 送出し側 上限
JMP @MR1206
STG @MR1206
OUT @MR1115
CON
TMR #462 #2
CON
AND T462
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
MPS
ANB @MR1114              ; Welding error
LDA DM1000               ; 溶着ｶｳﾝﾄ
CON
STA.S Z8
CON
MPS
AND< DM1000 #9           ; 溶着ｶｳﾝﾄ
MPS
AND= DM100 #0            ; 機種選択
MPS
AND<> DM501:Z8 #0        ; 溶着ﾎﾟｲﾝﾄ1(BK-Stratos)
RES @MR1114              ; Welding error
CON
JMP @MR1100
MPP
AND= DM501:Z8 #0         ; 溶着ﾎﾟｲﾝﾄ1(BK-Stratos)
RES @MR1114              ; Welding error
CON
JMP @MR1300
MRD
AND= DM100 #1            ; 機種選択
MPS
AND<> DM511:Z8 #0        ; 溶着ﾎﾟｲﾝﾄ1(BK-Seed)
RES @MR1114              ; Welding error
CON
JMP @MR1100
MPP
AND= DM511:Z8 #0         ; 溶着ﾎﾟｲﾝﾄ1(BK-Seed)
RES @MR1114              ; Welding error
CON
JMP @MR1300
MPP
AND= DM100 #2            ; 機種選択
MPS
AND<> DM521:Z8 #0        ; 溶着ﾎﾟｲﾝﾄ1(CL-Stratos)
RES @MR1114              ; Welding error
CON
JMP @MR1100
MPP
AND= DM521:Z8 #0         ; 溶着ﾎﾟｲﾝﾄ1(CL-Stratos)
RES @MR1114              ; Welding error
CON
JMP @MR1300
MPP
AND>= DM1000 #9          ; 溶着ｶｳﾝﾄ
RES @MR1114              ; Welding error
CON
JMP @MR1300
MPP
LD @MR1114               ; Welding error
AND R1008                ; ﾋｰﾀｰ 上限
ANL
JMP @MR1300
LDP @MR1203
SET @MR1207
STG @MR1207
SET R28100               ; Port2 ﾏｸﾛ開始1
CON
AND R29100               ; Port2 送信完了1
JMP @MR1208
STG @MR1208
MPS
AND R28901               ; Port2 受信読出要求2
SET R28301               ; Port2 受信読出完了2
CON
SET @MR1114              ; Welding error
CON
JMP @MR1204
MRD
ANB R28900               ; Port2 受信読出要求1
TMR @1 #5
CON
AND @T1
RES R28100               ; Port2 ﾏｸﾛ開始1
CON
RES R28300               ; Port2 受信読出完了1
CON
JMP @MR1207
MPP
AND R28900               ; Port2 受信読出要求1
SET R28300               ; Port2 受信読出完了1
CON
MPS
AND<=.L DM10260 DM12     ; Port2 ﾏｸﾛ変数先頭  溶着位置設定
RES R28100               ; Port2 ﾏｸﾛ開始1
CON
AND @MR1203
JMP @MR1207
MRD
AND>.L DM10260 DM12      ; Port2 ﾏｸﾛ変数先頭  溶着位置設定
RES R28100               ; Port2 ﾏｸﾛ開始1
CON
AND @MR1203
JMP @MR1209
MPP
ANB @MR1203
RES R28100               ; Port2 ﾏｸﾛ開始1
CON
RES R28300               ; Port2 受信読出完了1
CON
ENDS
STG @MR1209
SET MR5000               ; 変位センサ値OK
CON
RES R28300               ; Port2 受信読出完了1
CON
ENDS
;Ｔｏｏｌ上昇／下降時間監視
LD @MR1000               ; AUTO START PLS
ORP @MR1203
ORP @MR1205
ORP @MR1602
ORP @MR1603
OR @MR101
ANB R50006               ; 異常発生中
ANB @MR1000              ; AUTO START PLS
OUT @MR101
;@EM108.T = "TD " + right(dasc(@EM100.d,2),3) + "CD "  + right(dasc(@EM106.d,2),3)+ "TU " + right(dasc(@EM102.d,2),3)+ "CU "  + right(dasc(@EM104.d,2),3)
LD @MR101
NCJ #1005
;@EM108.T = "TD " + right(dasc(@EM100.d,2),3) + "CD "  + right(dasc(@EM106.d,2),3)+ "TU " + right(dasc(@EM102.d,2),3)+ "CU "  + right(dasc(@EM104.d,2),3)
LD CR2002                ; 常時ON
ADRSET VM2 VM0
MOV #0 VM2
MOV.D VM0 @VM1
LD CR2002                ; 常時ON
MOV CR2814 @VM0          ; ASCII変換ｾﾞﾛｻﾌﾟﾚｽ設定
LDA #2
CON
STA CR2814               ; ASCII変換ｾﾞﾛｻﾌﾟﾚｽ設定
LD CR2002                ; 常時ON
DASC.D @EM104 *@VM1
LDA @VM0
CON
STA CR2814               ; ASCII変換ｾﾞﾛｻﾌﾟﾚｽ設定
LD CR2002                ; 常時ON
LEN *VM0 @VM3
LD CR2002                ; 常時ON
LDA @VM3
CON
SRA #1
CON
STA @VM3
CON
INC @VM3
CON
ADRADD.S @VM3 VM0
LD CR2002                ; 常時ON
MOV.D VM0 @VM4
LD CR2002                ; 常時ON
SRGHT *@VM1 *@VM4 #3
LD CR2002                ; 常時ON
LEN *VM0 @VM7
LD CR2002                ; 常時ON
LDA @VM7
CON
SRA #1
CON
STA @VM7
CON
INC @VM7
CON
ADRADD.S @VM7 VM0
LD CR2002                ; 常時ON
MOV.D VM0 @VM8
LD CR2002                ; 常時ON
MOV CR2814 @VM6          ; ASCII変換ｾﾞﾛｻﾌﾟﾚｽ設定
LDA #2
CON
STA CR2814               ; ASCII変換ｾﾞﾛｻﾌﾟﾚｽ設定
LD CR2002                ; 常時ON
DASC.D @EM102 *@VM8
LDA @VM6
CON
STA CR2814               ; ASCII変換ｾﾞﾛｻﾌﾟﾚｽ設定
LD CR2002                ; 常時ON
LEN *VM0 @VM10
LD CR2002                ; 常時ON
LDA @VM10
CON
SRA #1
CON
STA @VM10
CON
INC @VM10
CON
ADRADD.S @VM10 VM0
LD CR2002                ; 常時ON
MOV.D VM0 @VM11
LD CR2002                ; 常時ON
SRGHT *@VM8 *@VM11 #3
LD CR2002                ; 常時ON
LEN *VM0 @VM14
LD CR2002                ; 常時ON
LDA @VM14
CON
SRA #1
CON
STA @VM14
CON
INC @VM14
CON
ADRADD.S @VM14 VM0
LD CR2002                ; 常時ON
MOV.D VM0 @VM15
LD CR2002                ; 常時ON
MOV CR2814 @VM13         ; ASCII変換ｾﾞﾛｻﾌﾟﾚｽ設定
LDA #2
CON
STA CR2814               ; ASCII変換ｾﾞﾛｻﾌﾟﾚｽ設定
LD CR2002                ; 常時ON
DASC.D @EM106 *@VM15
LDA @VM13
CON
STA CR2814               ; ASCII変換ｾﾞﾛｻﾌﾟﾚｽ設定
LD CR2002                ; 常時ON
LEN *VM0 @VM17
LD CR2002                ; 常時ON
LDA @VM17
CON
SRA #1
CON
STA @VM17
CON
INC @VM17
CON
ADRADD.S @VM17 VM0
LD CR2002                ; 常時ON
MOV.D VM0 @VM18
LD CR2002                ; 常時ON
SRGHT *@VM15 *@VM18 #3
LD CR2002                ; 常時ON
LEN *VM0 @VM21
LD CR2002                ; 常時ON
LDA @VM21
CON
SRA #1
CON
STA @VM21
CON
INC @VM21
CON
ADRADD.S @VM21 VM0
LD CR2002                ; 常時ON
MOV.D VM0 @VM22
LD CR2002                ; 常時ON
MOV CR2814 @VM20         ; ASCII変換ｾﾞﾛｻﾌﾟﾚｽ設定
LDA #2
CON
STA CR2814               ; ASCII変換ｾﾞﾛｻﾌﾟﾚｽ設定
LD CR2002                ; 常時ON
DASC.D @EM100 *@VM22
LDA @VM20
CON
STA CR2814               ; ASCII変換ｾﾞﾛｻﾌﾟﾚｽ設定
LD CR2002                ; 常時ON
LEN *VM0 @VM24
LD CR2002                ; 常時ON
LDA @VM24
CON
SRA #1
CON
STA @VM24
CON
INC @VM24
CON
ADRADD.S @VM24 VM0
LD CR2002                ; 常時ON
MOV.D VM0 @VM25
LD CR2002                ; 常時ON
SRGHT *@VM22 *@VM25 #3
LD CR2002                ; 常時ON
LEN *VM0 @VM27
LD CR2002                ; 常時ON
LDA @VM27
CON
SRA #1
CON
STA @VM27
CON
INC @VM27
CON
ADRADD.S @VM27 VM0
LD CR2002                ; 常時ON
MOV.D VM0 @VM28
SMOV "TD " *@VM28
LD CR2002                ; 常時ON
SADD *@VM28 *@VM25 *@VM28
SADD *@VM28 "CD " *@VM28
SADD *@VM28 *@VM18 *@VM28
SADD *@VM28 "TU " *@VM28
SADD *@VM28 *@VM11 *@VM28
SADD *@VM28 "CU " *@VM28
SADD *@VM28 *@VM4 *@VM28
SMOV *@VM28 @EM108
LABEL #1005
;
LD @MR101
AWMSG @EM108
;溶着終了　戻り
;
;Returns after the Welding Ends
STG @MR1300
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
JMP @MR1301
STG @MR1301
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
JMP @MR1304
STG @MR1304
AND R50001               ; 自動中
MPS
LDB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
ANL
SET R35002               ; 巻取り開始M1
CON
AND R1013                ; ﾃｰﾌﾟ 上限
RES R35002               ; 巻取り開始M1
CON
JMP @MR1305
MRD
LD R50009                ; 一時停止中
OR R50006                ; 異常発生中
ANL
RES R35002               ; 巻取り開始M1
CON
JMP @MR1304
MPP
AND MR108                ; Err MAIN-8
RES R35002               ; 巻取り開始M1
CON
ENDS
STG @MR1305
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
RES R30009               ; ﾃｰﾌﾟ送り出し 下降
CON
AND R1010                ; ﾃｰﾌﾟ送り出し 上限
SET @MR1400
CON
AND @MR1401
JMP @MR1306
STG @MR1306
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
JMP @MR1307
STG @MR1307
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
JMP @MR1308
STG @MR1308
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
MPS
ANB @MR1114              ; Welding error
JMP @MR1309
MPP
AND @MR1114              ; Welding error
MPS
LDB @MR1500              ; Tool down time NG
ANB @MR1501              ; Tool up time NG
ANL
RES @MR1114              ; Welding error
CON
SET @MR3608
CON
ENDS
MRD
AND @MR1500              ; Tool down time NG
RES @MR1114              ; Welding error
CON
RES @MR1500              ; Tool down time NG
CON
RES @MR1501              ; Tool up time NG
CON
SET @MR3708              ; ERROR 15 　SET
CON
ENDS
MPP
LDB @MR1500              ; Tool down time NG
AND @MR1501              ; Tool up time NG
ANL
RES @MR1114              ; Welding error
CON
RES @MR1500              ; Tool down time NG
CON
RES @MR1501              ; Tool up time NG
CON
SET @MR3800              ; ERROR 16 　SET
CON
ENDS
STG @MR1309
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
JMP @MR1310
STG @MR1310
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
ANB R1004                ; ｴﾘｱｾﾝｻｰ
TMR #2 #2
CON
AND T2
JMP @MR1311
STG @MR1311
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
AND R1004                ; ｴﾘｱｾﾝｻｰ
TMR #3 #2
CON
AND T3
JMP @MR1312
STG @MR1312
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
SET R30114               ; ｶｳﾝﾄ出力
CON
TMR #495 #2
CON
AND T495
RES R30114               ; ｶｳﾝﾄ出力
CON
JMP @MR1313
STG @MR1313
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
RES @MR1015
CON
RES R50200               ; ﾒｲﾝ動作中
CON
ENDS
;// 搬送ロボット戻り
;// Robot Return
STG @MR1400
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
LDA DM500                ; 1-ﾜｰｸｾｯﾄ位置ﾎﾟｲﾝﾄNo.
CON
STA R40000               ; X搬送RB　位置指令1
CON
LDA DM500                ; 1-ﾜｰｸｾｯﾄ位置ﾎﾟｲﾝﾄNo.
CON
STA R40100               ; YｽﾗｲﾄﾞRB　位置指令1
CON
TMR #470 #1
CON
AND T470
JMP @MR1402
STG @MR1402
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
OUT MR3006               ; X搬送RB    ｽﾀｰﾄ
CON
OUT MR3102               ; YｽﾗｲﾄﾞRB ｽﾀｰﾄ
CON
TMR @16 #2
CON
AND @T16
AND R1209                ; 1-位置決め完了
AND R1305                ; 2-位置決め完了
JMP @MR1403
STG @MR1403
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
TMR #471 #1
CON
AND T471
JMP @MR1404
STG @MR1404
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
ANB R1206                ; 1-移動中
LDA R40200               ; X搬送RB 完了POS1
CON
STA DM1010               ; 1-RB移動ﾎﾟｲﾝﾄ
CON
MPS
AND= DM500 DM1010        ; 1-ﾜｰｸｾｯﾄ位置ﾎﾟｲﾝﾄNo.  1-RB移動ﾎﾟｲﾝﾄ
JMP @MR1405
MPP
AND<> DM500 DM1010       ; 1-ﾜｰｸｾｯﾄ位置ﾎﾟｲﾝﾄNo.  1-RB移動ﾎﾟｲﾝﾄ
SET @MR3500
CON
ENDS
STG @MR1405
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
ANB R1304                ; 2-移動中
LDA R40300               ; YｽﾗｲﾄﾞRB 完了POS1
CON
STA DM1011               ; 2-RB移動ﾎﾟｲﾝﾄ
CON
MPS
AND= DM500 DM1011        ; 1-ﾜｰｸｾｯﾄ位置ﾎﾟｲﾝﾄNo.  2-RB移動ﾎﾟｲﾝﾄ
JMP @MR1406
MPP
AND<> DM500 DM1011       ; 1-ﾜｰｸｾｯﾄ位置ﾎﾟｲﾝﾄNo.  2-RB移動ﾎﾟｲﾝﾄ
SET @MR3500
CON
ENDS
STG @MR1406
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
SET R30109               ; ﾜｰｸｸﾗﾝﾌﾟ 開
CON
RES R30108               ; ﾜｰｸｸﾗﾝﾌﾟ 閉
CON
ANB R1106                ; ﾜｰｸｸﾗﾝﾌﾟ左 閉限
AND R1107                ; ﾜｰｸｸﾗﾝﾌﾟ左 開限
ANB R1108                ; ﾜｰｸｸﾗﾝﾌﾟ右 閉限
AND R1109                ; ﾜｰｸｸﾗﾝﾌﾟ右 開限
JMP @MR1407
STG @MR1407
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
RES R30104               ; ﾜｰｸ押込 前進
CON
ANB R1104                ; ﾜｰｸ押込 前進限
JMP @MR1408
STG @MR1408
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
TMR #472 #1
CON
AND T472
DW #0 DM1000             ; 溶着ｶｳﾝﾄ
CON
JMP @MR1409
STG @MR1409
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
TMR #473 #3
CON
AND T473
RES MR2000               ; ｴﾘｱｾﾝｻｰ　有効中
CON
SET @MR1015
CON
SET @MR1401
CON
ENDS
;ワーク除材要求
;
;The demand to take out the material is done.
LD @MR1015
AND R50200               ; ﾒｲﾝ動作中
OUT R50105               ; 除材要求
;溶着回数カウント
;
;Count of Welded frequency
LD R50200                ; ﾒｲﾝ動作中
ANP @MR1115
INC DM1000               ; 溶着ｶｳﾝﾄ
LDP MR4010               ; ﾀｲﾏ値変更
MPS
AND= DM1000 #0           ; 溶着ｶｳﾝﾄ
MPS
AND= DM100 #0            ; 機種選択
MOV DM30 DM10            ; Str_溶着時間1  溶着時間実態
MOV DM130 DM60           ; Str_溶着後時間1  溶着後保持
MOV.L DM70 DM12          ; Str_溶着位置1  溶着位置設定
MPP
AND= DM100 #1            ; 機種選択
MOV DM50 DM10            ; Seed_溶着時間1  溶着時間実態
MOV DM150 DM60           ; Seed_溶着後時間1  溶着後保持
MOV.L DM90 DM12          ; Seed_溶着位置1  溶着位置設定
MRD
AND= DM1000 #1           ; 溶着ｶｳﾝﾄ
MPS
AND= DM100 #0            ; 機種選択
MOV DM32 DM10            ; Str_溶着時間2  溶着時間実態
MOV DM132 DM60           ; Str_溶着後時間2  溶着後保持
MOV.L DM72 DM12          ; Str_溶着位置2  溶着位置設定
MPP
AND= DM100 #1            ; 機種選択
MOV DM52 DM10            ; Seed_溶着時間2  溶着時間実態
MOV DM152 DM60           ; Seed_溶着後時間2  溶着後保持
MOV.L DM92 DM12          ; Seed_溶着位置2  溶着位置設定
MRD
AND= DM1000 #2           ; 溶着ｶｳﾝﾄ
MPS
AND= DM100 #0            ; 機種選択
MOV DM34 DM10            ; Str_溶着時間3  溶着時間実態
MOV DM134 DM60           ; Str_溶着後時間3  溶着後保持
MOV.L DM74 DM12          ; Str_溶着位置3  溶着位置設定
MPP
AND= DM100 #1            ; 機種選択
MOV DM54 DM10            ; Seed_溶着時間3  溶着時間実態
MOV DM154 DM60           ; Seed_溶着後時間3  溶着後保持
MOV.L DM94 DM12          ; Seed_溶着位置3  溶着位置設定
MPP
AND= DM1000 #3           ; 溶着ｶｳﾝﾄ
MPS
AND= DM100 #0            ; 機種選択
MOV DM36 DM10            ; Str_溶着時間4  溶着時間実態
MOV DM136 DM60           ; Str_溶着後時間4  溶着後保持
MOV.L DM76 DM12          ; Str_溶着位置4  溶着位置設定
MPP
AND= DM100 #1            ; 機種選択
MOV DM56 DM10            ; Seed_溶着時間4  溶着時間実態
MOV DM156 DM60           ; Seed_溶着後時間4  溶着後保持
MOV.L DM96 DM12          ; Seed_溶着位置4  溶着位置設定
;テープ準備
;
;Tape Setting
STG @MR1700
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
INC DM1001               ; 溶着ｶｳﾝﾄ
CON
JMP @MR1702
STG @MR1702
AND R50001               ; 自動中
ANB R50006               ; 異常発生中
MPS
ANB R1015                ; ﾃｰﾌﾟ 終了
MPS
AND= DM550 DM1001        ; 巻取回数  溶着ｶｳﾝﾄ
JMP @MR1703
MPP
AND<> DM550 DM1001       ; 巻取回数  溶着ｶｳﾝﾄ
JMP @MR1705
MPP
AND R1013                ; ﾃｰﾌﾟ 上限
MPS
AND= DM550 DM1001        ; 巻取回数  溶着ｶｳﾝﾄ
JMP @MR1703
MPP
AND<> DM550 DM1001       ; 巻取回数  溶着ｶｳﾝﾄ
JMP @MR1705
STG @MR1703
AND R50001               ; 自動中
MPS
LDB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
ANL
SET R35002               ; 巻取り開始M1
CON
AND R1013                ; ﾃｰﾌﾟ 上限
RES R35002               ; 巻取り開始M1
CON
JMP @MR1704
MRD
LD R50009                ; 一時停止中
OR R50006                ; 異常発生中
ANL
RES R35002               ; 巻取り開始M1
CON
JMP @MR1703
MPP
AND MR108                ; Err MAIN-8
RES R35002               ; 巻取り開始M1
CON
ENDS
STG @MR1704
RES R35002               ; 巻取り開始M1
CON
DW #0 DM1001             ; 溶着ｶｳﾝﾄ
CON
JMP @MR1706
STG @MR1705
RES R35002               ; 巻取り開始M1
CON
INC DM1001               ; 溶着ｶｳﾝﾄ
CON
JMP @MR1706
STG @MR1706
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
OUT MR4001               ; ﾃｰﾌﾟ送り出し 下降 自動
CON
SET R30009               ; ﾃｰﾌﾟ送り出し 下降
CON
AND R1011                ; ﾃｰﾌﾟ送り出し 下限
AND R1014                ; ﾃｰﾌﾟ 下限
TMR #1 #1
CON
AND T1
JMP @MR1707
STG @MR1707
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
OUT MR4002               ; ﾃｰﾌﾟ送り出し 上昇 自動
CON
RES R30009               ; ﾃｰﾌﾟ送り出し 下降
CON
AND R1010                ; ﾃｰﾌﾟ送り出し 上限
TMR #450 #1
CON
AND T450
SET @MR1701
CON
ENDS
;--- 通信開始 (測定終了) ---  --- Connection start (Measure finish) ---
;送信コマンド  Transmission command :
; O0
;受信コマンド  Received command :
; O0
;
;--- 通信終了 (測定開始) ---  --- Connection finish (Measure start) ---
;送信コマンド  Transmission command :
; R0
;受信コマンド  Received command :
; R0
;
;--- 測定データ転送 ---  --- Measure data forward ---
;送信コマンド  Transmission command :
; SW,aH,******* (符号，小数点を含む) (A mark, a decimal point are included)
;               (EX: +0.0000 +9999.9 -0.0001 -9999.9)
;受信コマンド  Received command :
; SW,aH
;調整モード
;Adjustment mode
LD @MR2000
SET @MR2001
STG @MR2001
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
ANB R50100               ; ｽﾀｰﾄSW PLS
SET R30104               ; ﾜｰｸ押込 前進
CON
LD R1104                 ; ﾜｰｸ押込 前進限
OR R20110                ; 調整ﾓｰﾄﾞﾌﾗｸﾞ
ANL
TMR #700 #3
CON
AND T700
JMP @MR2002
STG @MR2002
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
RES R30109               ; ﾜｰｸｸﾗﾝﾌﾟ 開
CON
SET R30108               ; ﾜｰｸｸﾗﾝﾌﾟ 閉
CON
ANB R1107                ; ﾜｰｸｸﾗﾝﾌﾟ左 開限
AND R1106                ; ﾜｰｸｸﾗﾝﾌﾟ左 閉限
ANB R1109                ; ﾜｰｸｸﾗﾝﾌﾟ右 開限
AND R1108                ; ﾜｰｸｸﾗﾝﾌﾟ右 閉限
TMR #701 #3
CON
AND T701
SET MR2003
CON
SET MR2000               ; ｴﾘｱｾﾝｻｰ　有効中
CON
SET R50200               ; ﾒｲﾝ動作中
CON
JMP @MR2003
STG @MR2003
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
LDA DM1000               ; 溶着ｶｳﾝﾄ
CON
STA.S Z9
CON
JMP @MR2004
STG @MR2004
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
MPS
AND= DM100 #0            ; 機種選択
MPS
LD>= DM501:Z9 #1         ; 溶着ﾎﾟｲﾝﾄ1(BK-Stratos)
AND<= DM501:Z9 DM551     ; 溶着ﾎﾟｲﾝﾄ1(BK-Stratos)  溶着位置数(BK-Stratos)
ANL
JMP @MR2005
MPP
LD< DM501:Z9 #1          ; 溶着ﾎﾟｲﾝﾄ1(BK-Stratos)
OR> DM501:Z9 DM551       ; 溶着ﾎﾟｲﾝﾄ1(BK-Stratos)  溶着位置数(BK-Stratos)
ANL
SET @MR3905              ; ERROR 19 SET
CON
ENDS
MRD
AND= DM100 #1            ; 機種選択
MPS
LD>= DM511:Z9 #1         ; 溶着ﾎﾟｲﾝﾄ1(BK-Seed)
AND<= DM511:Z9 DM552     ; 溶着ﾎﾟｲﾝﾄ1(BK-Seed)  溶着位置数(BK-Seed)
ANL
JMP @MR2005
MPP
LD< DM511:Z9 #1          ; 溶着ﾎﾟｲﾝﾄ1(BK-Seed)
OR> DM511:Z9 DM552       ; 溶着ﾎﾟｲﾝﾄ1(BK-Seed)  溶着位置数(BK-Seed)
ANL
SET @MR3905              ; ERROR 19 SET
CON
ENDS
MPP
AND= DM100 #2            ; 機種選択
MPS
LD>= DM521:Z9 #1         ; 溶着ﾎﾟｲﾝﾄ1(CL-Stratos)
AND<= DM521:Z9 DM553     ; 溶着ﾎﾟｲﾝﾄ1(CL-Stratos)  溶着位置数(CL-Stratos)
ANL
JMP @MR2005
MPP
LD< DM521:Z9 #1          ; 溶着ﾎﾟｲﾝﾄ1(CL-Stratos)
OR> DM521:Z9 DM553       ; 溶着ﾎﾟｲﾝﾄ1(CL-Stratos)  溶着位置数(CL-Stratos)
ANL
SET @MR3905              ; ERROR 19 SET
CON
ENDS
STG @MR2005
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
MPS
AND= DM100 #0            ; 機種選択
LDA DM501:Z9             ; 溶着ﾎﾟｲﾝﾄ1(BK-Stratos)
CON
STA R40000               ; X搬送RB　位置指令1
CON
LDA DM501:Z9             ; 溶着ﾎﾟｲﾝﾄ1(BK-Stratos)
CON
STA R40100               ; YｽﾗｲﾄﾞRB　位置指令1
CON
JMP @MR2006
MRD
AND= DM100 #1            ; 機種選択
LDA DM511:Z9             ; 溶着ﾎﾟｲﾝﾄ1(BK-Seed)
CON
STA R40000               ; X搬送RB　位置指令1
CON
LDA DM511:Z9             ; 溶着ﾎﾟｲﾝﾄ1(BK-Seed)
CON
STA R40100               ; YｽﾗｲﾄﾞRB　位置指令1
CON
JMP @MR2006
MPP
AND= DM100 #2            ; 機種選択
LDA DM521:Z9             ; 溶着ﾎﾟｲﾝﾄ1(CL-Stratos)
CON
STA R40000               ; X搬送RB　位置指令1
CON
LDA DM521:Z9             ; 溶着ﾎﾟｲﾝﾄ1(CL-Stratos)
CON
STA R40100               ; YｽﾗｲﾄﾞRB　位置指令1
CON
JMP @MR2006
STG @MR2006
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
TMR #702 #2
CON
AND T702
JMP @MR2007
STG @MR2007
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
OUT MR3007               ; X搬送RB    ｽﾀｰﾄ
CON
TMR @17 #2
CON
AND @T17
AND R1209                ; 1-位置決め完了
JMP @MR2008
STG @MR2008
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
OUT MR3107               ; YｽﾗｲﾄﾞRB ｽﾀｰﾄ
CON
TMR @18 #2
CON
AND @T18
AND R1305                ; 2-位置決め完了
TMR #703 #2
CON
AND T703
JMP @MR2009
STG @MR2009
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
ANB R1206                ; 1-移動中
LDA R40200               ; X搬送RB 完了POS1
CON
STA DM1010               ; 1-RB移動ﾎﾟｲﾝﾄ
CON
MPS
AND= DM100 #0            ; 機種選択
MPS
AND= DM501:Z9 DM1010     ; 溶着ﾎﾟｲﾝﾄ1(BK-Stratos)  1-RB移動ﾎﾟｲﾝﾄ
JMP @MR2010
MPP
AND<> DM501:Z9 DM1010    ; 溶着ﾎﾟｲﾝﾄ1(BK-Stratos)  1-RB移動ﾎﾟｲﾝﾄ
SET @MR3500
CON
ENDS
MRD
AND= DM100 #1            ; 機種選択
MPS
AND= DM511:Z9 DM1010     ; 溶着ﾎﾟｲﾝﾄ1(BK-Seed)  1-RB移動ﾎﾟｲﾝﾄ
JMP @MR2010
MPP
AND<> DM511:Z9 DM1010    ; 溶着ﾎﾟｲﾝﾄ1(BK-Seed)  1-RB移動ﾎﾟｲﾝﾄ
SET @MR3500
CON
ENDS
MPP
AND= DM100 #2            ; 機種選択
MPS
AND= DM521:Z9 DM1010     ; 溶着ﾎﾟｲﾝﾄ1(CL-Stratos)  1-RB移動ﾎﾟｲﾝﾄ
JMP @MR2010
MPP
AND<> DM521:Z9 DM1010    ; 溶着ﾎﾟｲﾝﾄ1(CL-Stratos)  1-RB移動ﾎﾟｲﾝﾄ
SET @MR3500
CON
ENDS
STG @MR2010
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
ANB R1304                ; 2-移動中
LDA R40300               ; YｽﾗｲﾄﾞRB 完了POS1
CON
STA DM1011               ; 2-RB移動ﾎﾟｲﾝﾄ
CON
MPS
AND= DM100 #0            ; 機種選択
MPS
AND= DM501:Z9 DM1011     ; 溶着ﾎﾟｲﾝﾄ1(BK-Stratos)  2-RB移動ﾎﾟｲﾝﾄ
JMP @MR2011
MPP
AND<> DM501:Z9 DM1011    ; 溶着ﾎﾟｲﾝﾄ1(BK-Stratos)  2-RB移動ﾎﾟｲﾝﾄ
SET @MR3500
CON
ENDS
MRD
AND= DM100 #1            ; 機種選択
MPS
AND= DM511:Z9 DM1011     ; 溶着ﾎﾟｲﾝﾄ1(BK-Seed)  2-RB移動ﾎﾟｲﾝﾄ
JMP @MR2011
MPP
AND<> DM511:Z9 DM1011    ; 溶着ﾎﾟｲﾝﾄ1(BK-Seed)  2-RB移動ﾎﾟｲﾝﾄ
SET @MR3500
CON
ENDS
MPP
AND= DM100 #2            ; 機種選択
MPS
AND= DM521:Z9 DM1011     ; 溶着ﾎﾟｲﾝﾄ1(CL-Stratos)  2-RB移動ﾎﾟｲﾝﾄ
JMP @MR2011
MPP
AND<> DM521:Z9 DM1011    ; 溶着ﾎﾟｲﾝﾄ1(CL-Stratos)  2-RB移動ﾎﾟｲﾝﾄ
SET @MR3500
CON
ENDS
STG @MR2011
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
TMR #704 #5
CON
AND T704
JMP @MR2012
STG @MR2012
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
RES MR2000               ; ｴﾘｱｾﾝｻｰ　有効中
CON
OUT R50104               ; ｽﾀｰﾄSW 要求
CON
AND R50100               ; ｽﾀｰﾄSW PLS
SET MR2000               ; ｴﾘｱｾﾝｻｰ　有効中
CON
JMP @MR2013
STG @MR2013
ANB R50100               ; ｽﾀｰﾄSW PLS
SET R30008               ; ﾋｰﾀｰ 下降
CON
JMP @MR2014
STG @MR2014
MPS
LDB MR15006              ; ﾋｰﾀｰ下限  異常
AND R1009                ; ﾋｰﾀｰ 下限
ANL
JMP @MR2015
MPP
AND MR15006              ; ﾋｰﾀｰ下限  異常
RES R30008               ; ﾋｰﾀｰ 下降
CON
RES R30113               ; ﾃﾝｼｮﾝF 送出し側 上昇
CON
RES R30112               ; ﾃﾝｼｮﾝF 巻取り側 下降
CON
ENDS
STG @MR2015
MPS
LD R50100                ; ｽﾀｰﾄSW PLS
OR T705
ANL
RES R30008               ; ﾋｰﾀｰ 下降
CON
RES R30113               ; ﾃﾝｼｮﾝF 送出し側 上昇
CON
RES R30112               ; ﾃﾝｼｮﾝF 巻取り側 下降
CON
JMP @MR2100
MRD
TMH #705 #6000
MPP
OUT R50104               ; ｽﾀｰﾄSW 要求
STG @MR2100
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
AND R1008                ; ﾋｰﾀｰ 上限
ANB R1112                ; ﾃﾝｼｮﾝF 送出し側 上限
ANB R1110                ; ﾃﾝｼｮﾝF 巻取り側 下限
RES R30008               ; ﾋｰﾀｰ 下降
CON
JMP @MR2101
STG @MR2101
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
RES MR2000               ; ｴﾘｱｾﾝｻｰ　有効中
CON
OUT R50104               ; ｽﾀｰﾄSW 要求
CON
AND R50100               ; ｽﾀｰﾄSW PLS
SET MR2000               ; ｴﾘｱｾﾝｻｰ　有効中
CON
JMP @MR2102
STG @MR2102
@INC DM1000              ; 溶着ｶｳﾝﾄ
CON
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
LDA DM1000               ; 溶着ｶｳﾝﾄ
CON
STA.S Z10
CON
MPS
AND< DM1000 #9           ; 溶着ｶｳﾝﾄ
MPS
AND= DM100 #0            ; 機種選択
MPS
AND<> DM501:Z10 #0       ; 溶着ﾎﾟｲﾝﾄ1(BK-Stratos)
JMP @MR2003
MPP
AND= DM501:Z10 #0        ; 溶着ﾎﾟｲﾝﾄ1(BK-Stratos)
JMP @MR2103
MRD
AND= DM100 #1            ; 機種選択
MPS
AND<> DM511:Z10 #0       ; 溶着ﾎﾟｲﾝﾄ1(BK-Seed)
JMP @MR2003
MPP
AND= DM511:Z10 #0        ; 溶着ﾎﾟｲﾝﾄ1(BK-Seed)
JMP @MR2103
MPP
AND= DM100 #2            ; 機種選択
MPS
AND<> DM521:Z10 #0       ; 溶着ﾎﾟｲﾝﾄ1(CL-Stratos)
JMP @MR2003
MPP
AND= DM521:Z10 #0        ; 溶着ﾎﾟｲﾝﾄ1(CL-Stratos)
JMP @MR2103
MPP
AND>= DM1000 #9          ; 溶着ｶｳﾝﾄ
JMP @MR2103
STG @MR2103
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
LDA DM500                ; 1-ﾜｰｸｾｯﾄ位置ﾎﾟｲﾝﾄNo.
CON
STA R40000               ; X搬送RB　位置指令1
CON
LDA DM500                ; 1-ﾜｰｸｾｯﾄ位置ﾎﾟｲﾝﾄNo.
CON
STA R40100               ; YｽﾗｲﾄﾞRB　位置指令1
CON
TMR #706 #1
CON
AND T706
JMP @MR2104
STG @MR2104
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
OUT MR3008               ; X搬送RB    ｽﾀｰﾄ
CON
OUT MR3108               ; YｽﾗｲﾄﾞRB ｽﾀｰﾄ
CON
TMR @19 #2
CON
AND @T19
AND R1209                ; 1-位置決め完了
AND R1305                ; 2-位置決め完了
JMP @MR2105
STG @MR2105
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
TMR #707 #1
CON
AND T707
JMP @MR2106
STG @MR2106
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
ANB R1206                ; 1-移動中
LDA R40200               ; X搬送RB 完了POS1
CON
STA DM1010               ; 1-RB移動ﾎﾟｲﾝﾄ
CON
MPS
AND= DM500 DM1010        ; 1-ﾜｰｸｾｯﾄ位置ﾎﾟｲﾝﾄNo.  1-RB移動ﾎﾟｲﾝﾄ
JMP @MR2107
MPP
AND<> DM500 DM1010       ; 1-ﾜｰｸｾｯﾄ位置ﾎﾟｲﾝﾄNo.  1-RB移動ﾎﾟｲﾝﾄ
SET @MR3500
CON
ENDS
STG @MR2107
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
ANB R1304                ; 2-移動中
LDA R40300               ; YｽﾗｲﾄﾞRB 完了POS1
CON
STA DM1011               ; 2-RB移動ﾎﾟｲﾝﾄ
CON
MPS
AND= DM500 DM1011        ; 1-ﾜｰｸｾｯﾄ位置ﾎﾟｲﾝﾄNo.  2-RB移動ﾎﾟｲﾝﾄ
JMP @MR2108
MPP
AND<> DM500 DM1011       ; 1-ﾜｰｸｾｯﾄ位置ﾎﾟｲﾝﾄNo.  2-RB移動ﾎﾟｲﾝﾄ
SET @MR3500
CON
ENDS
STG @MR2108
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
RES R30108               ; ﾜｰｸｸﾗﾝﾌﾟ 閉
CON
SET R30109               ; ﾜｰｸｸﾗﾝﾌﾟ 開
CON
AND R1107                ; ﾜｰｸｸﾗﾝﾌﾟ左 開限
ANB R1106                ; ﾜｰｸｸﾗﾝﾌﾟ左 閉限
AND R1109                ; ﾜｰｸｸﾗﾝﾌﾟ右 開限
ANB R1108                ; ﾜｰｸｸﾗﾝﾌﾟ右 閉限
JMP @MR2109
STG @MR2109
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
RES R30104               ; ﾜｰｸ押込 前進
CON
ANB R1104                ; ﾜｰｸ押込 前進限
DW #0 DM1000             ; 溶着ｶｳﾝﾄ
CON
JMP @MR2110
STG @MR2110
AND R50001               ; 自動中
ANB R50009               ; 一時停止中
ANB R50006               ; 異常発生中
TMR #708 #6
CON
AND T708
RES MR2003
CON
RES MR2000               ; ｴﾘｱｾﾝｻｰ　有効中
CON
RES R50200               ; ﾒｲﾝ動作中
CON
ENDS
;搬送指令位置セット
;
;Transportation order position set
LD R40000                ; X搬送RB　位置指令1
OUT R30200               ; 1-ﾎﾟｼﾞｼｮﾝ指令1
LD R40001                ; 搬送RB　位置指令2
OUT R30201               ; 1-ﾎﾟｼﾞｼｮﾝ指令2
LD R40002                ; 搬送RB 位置指令4
OUT R30202               ; 1-ﾎﾟｼﾞｼｮﾝ指令4
LD R40003                ; 搬送RB　位置指令8
OUT R30203               ; 1-ﾎﾟｼﾞｼｮﾝ指令8
LD R40100                ; YｽﾗｲﾄﾞRB　位置指令1
OUT R30300               ; 2-ﾎﾟｼﾞｼｮﾝ指令1
LD R40101                ; YｽﾗｲﾄﾞRB　位置指令2
OUT R30301               ; 2-ﾎﾟｼﾞｼｮﾝ指令2
LD R40102                ; YｽﾗｲﾄﾞRB 位置指令4
OUT R30302               ; 2-ﾎﾟｼﾞｼｮﾝ指令4
LD R40103                ; YｽﾗｲﾄﾞRB　位置指令8
OUT R30303               ; 2-ﾎﾟｼﾞｼｮﾝ指令8
LD CR2002                ; 常時ON
ZRES R40004 R40015       ; 使用不可  使用不可
LD CR2002                ; 常時ON
ZRES R40104 R40115       ; 使用不可  使用不可
;搬送完了位置セット
;
;Transportation completion position set
LD R1200                 ; 1-完了後 ﾎﾟｼﾞｼｮﾝ1
OUT R40200               ; X搬送RB 完了POS1
LD R1201                 ; 1-完了後 ﾎﾟｼﾞｼｮﾝ2
OUT R40201               ; 搬送RB 完了POS2
LD R1202                 ; 1-完了後 ﾎﾟｼﾞｼｮﾝ4
OUT R40202               ; 搬送RB 完了POS4
LD R1203                 ; 1-完了後 ﾎﾟｼﾞｼｮﾝ8
OUT R40203               ; 搬送RB 完了POS8
LD R1300                 ; 2-完了後 ﾎﾟｼﾞｼｮﾝ1
OUT R40300               ; YｽﾗｲﾄﾞRB 完了POS1
LD R1301                 ; 2-完了後 ﾎﾟｼﾞｼｮﾝ2
OUT R40301               ; YｽﾗｲﾄﾞRB 完了POS2
LD R1302                 ; 2-完了後 ﾎﾟｼﾞｼｮﾝ4
OUT R40302               ; YｽﾗｲﾄﾞRB 完了POS4
LD R1303                 ; 2-完了後ﾎﾟｼﾞｼｮﾝ8
OUT R40303               ; YｽﾗｲﾄﾞRB 完了POS8
LD CR2002                ; 常時ON
ZRES R40204 R40215       ; 使用不可  使用不可
LD CR2002                ; 常時ON
ZRES R40304 R40315       ; 使用不可  使用不可
;搬送ロボット スタート
;
;Transportation Robot START
LDP MR3000               ; X搬送RB    ｽﾀｰﾄ
ORP MR3003               ; X搬送RB    ｽﾀｰﾄ
ORP MR3006               ; X搬送RB    ｽﾀｰﾄ
ORP MR3007               ; X搬送RB    ｽﾀｰﾄ
ORP MR3008               ; X搬送RB    ｽﾀｰﾄ
OR R30209                ; 1-ｽﾀｰﾄ
ANB T500
OUT R30209               ; 1-ｽﾀｰﾄ
TMH #500 #5
;Y軸スライド ロボット スタート
;
;
LDP MR3100               ; YｽﾗｲﾄﾞRB ｽﾀｰﾄ
ORP MR3101               ; YｽﾗｲﾄﾞRB ｽﾀｰﾄ
ORP MR3102               ; YｽﾗｲﾄﾞRB ｽﾀｰﾄ
ORP MR3107               ; YｽﾗｲﾄﾞRB ｽﾀｰﾄ
ORP MR3108               ; YｽﾗｲﾄﾞRB ｽﾀｰﾄ
OR R30305                ; 2-ｽﾀｰﾄ
ANB T600
OUT R30305               ; 2-ｽﾀｰﾄ
TMH #600 #5
;搬送ロボット 原点復帰
;
;Transportation Robot HOME POSITION MOVING
LDP MR3005               ; X搬送RB    原点復帰
OR R30207                ; 1-原点復帰
ANB T501
OUT R30207               ; 1-原点復帰
TMH #501 #5
;Y軸スライドロボット 原点復帰
;
;
LDP MR3105               ; YｽﾗｲﾄﾞRB 原点復帰
OR R30306                ; 2-原点復帰
ANB T601
OUT R30306               ; 2-原点復帰
TMH #601 #5
;搬送ロボット 即停止
;
;Transportation Robot STOP
LD CR2002                ; 常時ON
OUT R30211               ; 1-ｻｰﾎﾞ ON
LDB R50000               ; 即停止
ANB R50006               ; 異常発生中
ANB R55000               ; TRAP
OUT R35004               ; X搬送ﾛﾎﾞｯﾄ 非常停止
LD R50009                ; 一時停止中
OUT R30208               ; 1-一時停止
;Y軸スライドロボット 即停止
;
;
LD CR2002                ; 常時ON
OUT R30307               ; 2-ｻｰﾎﾞ ON
LDB R50000               ; 即停止
ANB R50006               ; 異常発生中
ANB R55000               ; TRAP
OUT R35104               ; Yｽﾗｲﾄﾞ ﾛﾎﾞｯﾄ 非常停止
LD R50009                ; 一時停止中
OUT R30304               ; 2-一時停止
;搬送ロボット リセット
;
;Transportation Robot Reset
LDP R35004               ; X搬送ﾛﾎﾞｯﾄ 非常停止
OR R30210                ; 1-ﾘｾｯﾄ
ANB T486
OUT R30210               ; 1-ﾘｾｯﾄ
TMH #486 #5
;Y軸スライドロボット リセット
;
;
LDP R35104               ; Yｽﾗｲﾄﾞ ﾛﾎﾞｯﾄ 非常停止
OR R30308                ; 2-ﾘｾｯﾄ
ANB T487
OUT R30308               ; 2-ﾘｾｯﾄ
TMH #487 #5
;エラー　０
;シリンダー動作確認
;確認方法としては
;電磁弁がＯＮしている時に、タイマー時間内に、対象センサーがＯＮしなければエラー
;
;ERROR 0
;Confirming the operation of cylinder
;
;The confirm method makes an error if the object sensor is not turned on in the time of 
;the timer when the electromagnetic valve has been turned on
LDB R50000               ; 即停止
ANB R55000               ; TRAP
ANB R50006               ; 異常発生中
MPS
LD R30009                ; ﾃｰﾌﾟ送り出し 下降
ANB R1011                ; ﾃｰﾌﾟ送り出し 下限
ANL
TMR #550 #50
CON
AND T550
SET MR15000              ; ﾃｰﾌﾟ送り  下限異常
MRD
LDB R30009               ; ﾃｰﾌﾟ送り出し 下降
ANB R1010                ; ﾃｰﾌﾟ送り出し 上限
ANL
TMR #551 #50
CON
AND T551
SET MR15001              ; ﾃｰﾌﾟ送り  上限異常
MRD
LD R30104                ; ﾜｰｸ押込 前進
ANB R1104                ; ﾜｰｸ押込 前進限
ANB R1105                ; 調整ﾓｰﾄﾞ
LDB R30104               ; ﾜｰｸ押込 前進
AND R1104                ; ﾜｰｸ押込 前進限
ORL
ANL
TMR #552 #50
CON
AND T552
SET MR15002              ; ﾜｰｸ押込　前進異常
MRD
AND R30108               ; ﾜｰｸｸﾗﾝﾌﾟ 閉
MPS
ANB R1106                ; ﾜｰｸｸﾗﾝﾌﾟ左 閉限
TMR #559 #50
CON
AND T559
SET MR15008              ; ﾜｰｸｸﾗﾝﾌﾟ左閉異常
MPP
ANB R1108                ; ﾜｰｸｸﾗﾝﾌﾟ右 閉限
TMR #565 #50
CON
AND T565
SET MR15010              ; ﾜｰｸｸﾗﾝﾌﾟ右閉異常
MRD
AND R30109               ; ﾜｰｸｸﾗﾝﾌﾟ 開
MPS
ANB R1107                ; ﾜｰｸｸﾗﾝﾌﾟ左 開限
TMR #562 #50
CON
AND T562
SET MR15009              ; ﾜｰｸｸﾗﾝﾌﾟ左開異常
MPP
ANB R1109                ; ﾜｰｸｸﾗﾝﾌﾟ右 開限
TMR #566 #50
CON
AND T566
SET MR15011              ; ﾜｰｸｸﾗﾝﾌﾟ右開異常
MRD
LD R30113                ; ﾃﾝｼｮﾝF 送出し側 上昇
ANB R1112                ; ﾃﾝｼｮﾝF 送出し側 上限
LDB R30113               ; ﾃﾝｼｮﾝF 送出し側 上昇
AND R1112                ; ﾃﾝｼｮﾝF 送出し側 上限
ORL
ANL
TMR #563 #50
CON
AND T563
SET MR15012              ; ﾃﾝｼｮﾝF送出し側上昇異常
MRD
LD R30112                ; ﾃﾝｼｮﾝF 巻取り側 下降
ANB R1110                ; ﾃﾝｼｮﾝF 巻取り側 下限
LDB R30112               ; ﾃﾝｼｮﾝF 巻取り側 下降
AND R1110                ; ﾃﾝｼｮﾝF 巻取り側 下限
ORL
ANL
TMR #564 #50
CON
AND T564
SET MR15013              ; ﾃﾝｼｮﾝF巻取り側下降異常
MRD
LD R30009                ; ﾃｰﾌﾟ送り出し 下降
ANB R1014                ; ﾃｰﾌﾟ 下限
ANL
TMR #554 #50
CON
AND T554
SET MR15004              ; ﾃｰﾌﾟ送り  下降異常
MRD
LDB R30008               ; ﾋｰﾀｰ 下降
LD @MR003
AND R35000               ; ﾋｰﾀｰ1 ON
ORL
ANB R1008                ; ﾋｰﾀｰ 上限
ANL
TMR #555 #50
CON
AND T555
SET MR15005              ; ﾋｰﾀｰ上限  異常
MPP
LD R30008                ; ﾋｰﾀｰ 下降
ANB R1009                ; ﾋｰﾀｰ 下限
ANL
TMR #556 #50
CON
AND T556
SET MR15006              ; ﾋｰﾀｰ下限  異常
LD MR15000               ; ﾃｰﾌﾟ送り  下限異常
OR MR15001               ; ﾃｰﾌﾟ送り  上限異常
OR MR15002               ; ﾜｰｸ押込　前進異常
OR MR15004               ; ﾃｰﾌﾟ送り  下降異常
OR MR15005               ; ﾋｰﾀｰ上限  異常
OR MR15006               ; ﾋｰﾀｰ下限  異常
OR MR15008               ; ﾜｰｸｸﾗﾝﾌﾟ左閉異常
OR MR15009               ; ﾜｰｸｸﾗﾝﾌﾟ左開異常
OR MR15010               ; ﾜｰｸｸﾗﾝﾌﾟ右閉異常
OR MR15011               ; ﾜｰｸｸﾗﾝﾌﾟ右開異常
OR MR15012               ; ﾃﾝｼｮﾝF送出し側上昇異常
OR MR15013               ; ﾃﾝｼｮﾝF巻取り側下降異常
ANB R50006               ; 異常発生中
RES MR2000               ; ｴﾘｱｾﾝｻｰ　有効中
CON
SET @MR3000
CON
SET R50006               ; 異常発生中
CON
SET R50109               ; Err MAIN
CON
SET MR100                ; Err MAIN-0
CON
RES R35002               ; 巻取り開始M1
CON
RES R30008               ; ﾋｰﾀｰ 下降
CON
RES R30112               ; ﾃﾝｼｮﾝF 巻取り側 下降
CON
RES R30009               ; ﾃｰﾌﾟ送り出し 下降
CON
SET @MR3001
STG @MR3001
AND R50006               ; 異常発生中
AWNUM #0
CON
AND R50014               ; 異常ﾌﾞｻﾞｰ 停止
JMP @MR3003
STG @MR3003
SET @MR3002
CON
AND R50015               ; ｴﾗｰﾘｾｯﾄON
RES @MR3002
CON
RES R35000               ; ﾋｰﾀｰ1 ON
CON
RES R50109               ; Err MAIN
CON
RES MR100                ; Err MAIN-0
CON
SET R55000               ; TRAP
CON
ENDS
;ユーザーメッセージ２に　不良センサー　Ｎｏ表示
;
;No of a defective sensor is displayed to user message 2
;
;『ＳＱ−１０１１』表示
;
;'SQ-1011' is displayed
LD @MR3002
AND MR15000              ; ﾃｰﾌﾟ送り  下限異常
AWMSG "SQ-1011"
;『ＳＱ−１０１０』表示
;
;'SQ-1010' is displayed
LD @MR3002
AND MR15001              ; ﾃｰﾌﾟ送り  上限異常
AWMSG "SQ-1010"
;『ＳＱ−１１０４』表示
;
;'SQ-1104' is displayed
LD @MR3002
AND MR15002              ; ﾜｰｸ押込　前進異常
AWMSG "SQ-1104"
;『ＳＱ−１０１４』表示
;
;'SQ-1014' is displayed
LD @MR3002
AND MR15004              ; ﾃｰﾌﾟ送り  下降異常
AWMSG "SQ-1014"
;『ＳＱ−１００８』表示
;
;'SQ-1008' is displayed
LD @MR3002
AND MR15005              ; ﾋｰﾀｰ上限  異常
AWMSG "SQ-1008"
;『ＳＱ−１００９』表示
;
;'SQ-1009' is displayed
LD @MR3002
AND MR15006              ; ﾋｰﾀｰ下限  異常
AWMSG "SQ-1009"
;『ＳＱ−１１０６』表示
;
;'SQ-1106' is displayed
LD @MR3002
AND MR15008              ; ﾜｰｸｸﾗﾝﾌﾟ左閉異常
AWMSG "SQ-1106"
;『ＳＱ−１１０７』表示
;
;'SQ-1107' is displayed
LD @MR3002
AND MR15009              ; ﾜｰｸｸﾗﾝﾌﾟ左開異常
AWMSG "SQ-1107"
;『ＳＱ−１１０８』表示
;
;'SQ-1108' is displayed
LD @MR3002
AND MR15010              ; ﾜｰｸｸﾗﾝﾌﾟ右閉異常
AWMSG "SQ-1108"
;『ＳＱ−１１０９』表示
;
;'SQ-1109' is displayed
LD @MR3002
AND MR15011              ; ﾜｰｸｸﾗﾝﾌﾟ右開異常
AWMSG "SQ-1109"
;『ＳＱ−１１１２』表示
;
;'SQ-1112' is displayed
LD @MR3002
AND MR15012              ; ﾃﾝｼｮﾝF送出し側上昇異常
AWMSG "SQ-1112"
;『ＳＱ−１１１０』表示
;
;'SQ-1110' is displayed
LD @MR3002
AND MR15013              ; ﾃﾝｼｮﾝF巻取り側下降異常
AWMSG "SQ-1110"
;エラー４
;元圧エアーエラー
;
;ERROR 4
;MAIN AIR ERROR
LDB R1003                ; Air sw
TMR #650 #1
CON
AND T650
SET @MR3201
STG @MR3201
ANB R50006               ; 異常発生中
SET R50006               ; 異常発生中
CON
SET R50109               ; Err MAIN
CON
SET MR104                ; Err MAIN-4
CON
RES MR2000               ; ｴﾘｱｾﾝｻｰ　有効中
CON
JMP @MR3202
STG @MR3202
AND R50006               ; 異常発生中
AWNUM #4
CON
AND R50014               ; 異常ﾌﾞｻﾞｰ 停止
JMP @MR3204
STG @MR3204
SET @MR3203
CON
AND R50015               ; ｴﾗｰﾘｾｯﾄON
RES @MR3203
CON
RES R50109               ; Err MAIN
CON
RES MR104                ; Err MAIN-4
CON
SET R55000               ; TRAP
CON
ENDS
;『ＡＩＲ　ＰＲＥＳＳＵＲＥ　ＤＯＷＮ』表示
;
;'AIR PRESSURE DOWN' is displayed
LD @MR3203
AWMSG "AIR PRESSURE DOWN"
;エラー６
;テープ巻取り要求
;
;ERROR 6
;WIND REQUEST
LD CR2003                ; 常時OFF
DIFU @MR3300
LD @MR3300
SET @MR3301
STG @MR3301
ANB R50006               ; 異常発生中
SET R50006               ; 異常発生中
CON
SET R50109               ; Err MAIN
CON
SET MR106                ; Err MAIN-6
CON
RES MR2000               ; ｴﾘｱｾﾝｻｰ　有効中
CON
JMP @MR3302
STG @MR3302
AND R50006               ; 異常発生中
AWNUM #6
CON
AND R50014               ; 異常ﾌﾞｻﾞｰ 停止
JMP @MR3304
STG @MR3304
SET @MR3303
CON
AND R50015               ; ｴﾗｰﾘｾｯﾄON
RES @MR3303
CON
RES R50109               ; Err MAIN
CON
RES MR106                ; Err MAIN-6
CON
ENDS
;『ＷＩＮＤ　ＲＥＱＵＥＳＴ』表示
;
;'WIND REQUEST' is displayed
LD @MR3303
AWMSG "WIND REQUEST"
;エラー７
;テープ無し・テープ切断
;
;ERROR 7
;Tape not here / Tape Cut Off
LD R50001                ; 自動中
ANB R50100               ; ｽﾀｰﾄSW PLS
AND R1015                ; ﾃｰﾌﾟ 終了
AND T200
ANB MR107                ; Err MAIN-7
ANB R20110               ; 調整ﾓｰﾄﾞﾌﾗｸﾞ
DIFU @MR3308
LD @MR3308
SET @MR3309
STG @MR3309
ANB R50006               ; 異常発生中
SET R50006               ; 異常発生中
CON
SET R50109               ; Err MAIN
CON
SET MR107                ; Err MAIN-7
CON
RES MR2000               ; ｴﾘｱｾﾝｻｰ　有効中
CON
RES R35002               ; 巻取り開始M1
CON
JMP @MR3310
STG @MR3310
AND R50006               ; 異常発生中
AWNUM #7
CON
AND R50014               ; 異常ﾌﾞｻﾞｰ 停止
JMP @MR3312
STG @MR3312
SET @MR3311
CON
AND R50015               ; ｴﾗｰﾘｾｯﾄON
RES @MR3311
CON
RES R35000               ; ﾋｰﾀｰ1 ON
CON
RES R50109               ; Err MAIN
CON
RES MR107                ; Err MAIN-7
CON
SET R55000               ; TRAP
CON
ENDS
;『ＴＡＰＥ　ＣＵＴ　ＯＦＦ』表示
;
;'TAPE CUT OFF' is displayed
LD @MR3311
AWMSG "TAPE CUT OFF"
;エラー８
;巻取りモータ異常
;
;ERROR 8
;WIND-UP MOTOR ERROR
LD R35002                ; 巻取り開始M1
TMR #5 #50
CON
AND T5
OUT @MR3400
LDB R008                 ; 巻取りﾓｰﾀｰｻｰﾓｽﾀｯﾄ
OR @MR3400
AND T200
DIFU @MR3401
LD @MR3401
RES R35002               ; 巻取り開始M1
CON
SET @MR3402
STG @MR3402
ANB R50006               ; 異常発生中
SET R50006               ; 異常発生中
CON
SET R50109               ; Err MAIN
CON
SET MR108                ; Err MAIN-8
CON
RES MR2000               ; ｴﾘｱｾﾝｻｰ　有効中
CON
JMP @MR3403
STG @MR3403
MPS
LD R50006                ; 異常発生中
AND R1013                ; ﾃｰﾌﾟ 上限
ANL
AWNUM #8
CON
AND R50014               ; 異常ﾌﾞｻﾞｰ 停止
JMP @MR3405
MPP
LD R50006                ; 異常発生中
ANB R1013                ; ﾃｰﾌﾟ 上限
ANL
AWNUM #13
CON
AND R50014               ; 異常ﾌﾞｻﾞｰ 停止
JMP @MR3405
STG @MR3405
MPS
SET @MR3404
CON
AND R1013                ; ﾃｰﾌﾟ 上限
AND R50015               ; ｴﾗｰﾘｾｯﾄON
RES @MR3404
CON
RES R50109               ; Err MAIN
CON
RES MR108                ; Err MAIN-8
CON
SET R55000               ; TRAP
CON
ENDS
MPP
SET @MR3410
CON
ANB R1013                ; ﾃｰﾌﾟ 上限
AND R50015               ; ｴﾗｰﾘｾｯﾄON
RES @MR3410
CON
RES R50109               ; Err MAIN
CON
RES MR108                ; Err MAIN-8
CON
SET R55000               ; TRAP
CON
ENDS
;『ＭＯＴＯＲ　ＴＲＯＵＢＬＥ』表示
;
;'MOTOR TROUBLE' is displayed
LD @MR3404
AWMSG "MOTOR       TROUBLE"
LD @MR3410
AWMSG "TAPE WINDING ERROR"
;エラー１０
;搬送ロボット アラーム
;
;ERROR 10
;Alarm of transportation robot
LDB R1210                ; 1-運転準備完了
AND R35004               ; X搬送ﾛﾎﾞｯﾄ 非常停止
LDB R1307                ; 2-運転準備完了
AND R35104               ; Yｽﾗｲﾄﾞ ﾛﾎﾞｯﾄ 非常停止
ORL
AND T200
TMR #560 #100
CON
AND T560
ANB R50006               ; 異常発生中
DIFU @MR3501
LDB R1211                ; 1-ｱﾗｰﾑ
ORB R1308                ; 2-ｱﾗｰﾑ
OR @MR3501
AND T200
ANB R50006               ; 異常発生中
DIFU @MR3502
LD @MR3502
SET @MR3503
LD @MR3500
RES @MR3500
CON
SET @MR3503
STG @MR3503
ANB R50006               ; 異常発生中
SET R50006               ; 異常発生中
CON
SET R50109               ; Err MAIN
CON
SET MR110                ; Err MAIN-10
CON
RES MR2000               ; ｴﾘｱｾﾝｻｰ　有効中
CON
JMP @MR3504
STG @MR3504
AND R50006               ; 異常発生中
AWNUM #10
CON
AND R50014               ; 異常ﾌﾞｻﾞｰ 停止
JMP @MR3506
STG @MR3506
SET @MR3505
CON
AND R50015               ; ｴﾗｰﾘｾｯﾄON
RES @MR3505
CON
RES R50109               ; Err MAIN
CON
RES MR110                ; Err MAIN-10
CON
SET R55000               ; TRAP
CON
ENDS
;『ＲＯＢＯＴ ＡＬＡＲＭ』表示
;
;'ROBOT ALARM' is displayed
LD @MR3505
AWMSG "ROBOT ALARM"
;エラー１１
;エリアセンサー遮断 アラーム
;
;ERROR 11
;Area sensor Alarm
LDB R50000               ; 即停止
ANB R55000               ; TRAP
ANB R50006               ; 異常発生中
AND R50008               ; ｴﾘｱｾﾝｻｰ　　有効中
AND T200
ANB R50011               ; RB 動作中
AND R30008               ; ﾋｰﾀｰ 下降
ANB R1004                ; ｴﾘｱｾﾝｻｰ
DIFU @MR3508
LD @MR3508
RES R35002               ; 巻取り開始M1
CON
RES R30008               ; ﾋｰﾀｰ 下降
CON
RES R30009               ; ﾃｰﾌﾟ送り出し 下降
CON
SET @MR3509
STG @MR3509
ANB R50006               ; 異常発生中
SET R50006               ; 異常発生中
CON
SET R50109               ; Err MAIN
CON
SET MR111                ; Err MAIN-11
CON
RES MR2000               ; ｴﾘｱｾﾝｻｰ　有効中
CON
JMP @MR3510
STG @MR3510
AND R50006               ; 異常発生中
AWNUM #11
CON
AND R50014               ; 異常ﾌﾞｻﾞｰ 停止
JMP @MR3512
STG @MR3512
SET @MR3511
CON
AND R50015               ; ｴﾗｰﾘｾｯﾄON
RES @MR3511
CON
RES R50109               ; Err MAIN
CON
RES MR111                ; Err MAIN-11
CON
SET R55000               ; TRAP
CON
ENDS
;『ＡＲＥＡ　ＳＥＮＳＯＲ　ＡＬＡＲＭ』表示
;
;'AREA SENSOR ALARM' is displayed
LD @MR3511
AWMSG "AREA SENSOR ALARM"
;エラー１２
;テープ カウントUP 警告
;
;ERROR 12
;Tape Count Up Warning
;
LD MR2101                ; ﾃｰﾌﾟｶｳﾝﾄUP 警告
DIFU @MR3600
LD @MR3600
RES MR2101               ; ﾃｰﾌﾟｶｳﾝﾄUP 警告
CON
RES R35002               ; 巻取り開始M1
CON
RES R30008               ; ﾋｰﾀｰ 下降
CON
RES R30009               ; ﾃｰﾌﾟ送り出し 下降
CON
SET @MR3601
STG @MR3601
ANB R50306               ; 警告発生中
SET R50306               ; 警告発生中
CON
RES MR2000               ; ｴﾘｱｾﾝｻｰ　有効中
CON
JMP @MR3602
STG @MR3602
AND R50306               ; 警告発生中
AWNUM #12
CON
AND R50314               ; 警告ﾌﾞｻﾞｰ 停止
JMP @MR3604
STG @MR3604
SET @MR3603
CON
AND R50315               ; 警告ﾘｾｯﾄON
RES @MR3603
CON
JMP @MR3605
STG @MR3605
SET R30115               ; ﾘｾｯﾄ出力
CON
TMR #561 #5
CON
AND T561
RES R30115               ; ﾘｾｯﾄ出力
CON
RES R50306               ; 警告発生中
CON
ENDS
;『ＴＡＰＥ ＣＯＵＮＴ ＵＰ』表示
;
;'TAPE COUNT UP' is displayed
LD @MR3603
AWMSG "TAPE COUNT  UP ALARM"
;エラー１３
;溶着エラー
;
;ERROR 13
;Welding error
LD @MR3608
RES R30008               ; ﾋｰﾀｰ 下降
CON
RES @MR3608
CON
SET @MR3609
STG @MR3609
ANB R50006               ; 異常発生中
SET R50006               ; 異常発生中
CON
SET R50109               ; Err MAIN
CON
SET MR113                ; Err MAIN-13
CON
RES MR2000               ; ｴﾘｱｾﾝｻｰ　有効中
CON
JMP @MR3610
STG @MR3610
AND R50006               ; 異常発生中
AWNUM #13
CON
AND R50014               ; 異常ﾌﾞｻﾞｰ 停止
JMP @MR3612
STG @MR3612
SET @MR3611
CON
AND R50015               ; ｴﾗｰﾘｾｯﾄON
RES @MR3611
CON
RES R50109               ; Err MAIN
CON
RES MR113                ; Err MAIN-13
CON
SET R55000               ; TRAP
CON
ENDS
;『ＷＥＬＤ　ＥＲＲＯＲ』表示
;
;'WELD ERROR' is displayed
LD @MR3611
AWMSG "WELD ERROR"
;エラー１４
;変位計通信エラー
;
;ERROR 14
;Displacement communication error
;『ＤＩＳＰＬＡＣＥＭＥＮＴ　ＥＲＲＯＲ』表示
;
;'DISPLACEMENT ERROR' is displayed
;エラー１５　ヒーター下降時間タイムアウトエラー
;
;ERROR 15
;Heater DOWN TIME OVER
LD @MR3708               ; ERROR 15 　SET
RES R30008               ; ﾋｰﾀｰ 下降
CON
RES @MR3708              ; ERROR 15 　SET
CON
SET @MR3709
STG @MR3709
ANB R50006               ; 異常発生中
SET R50006               ; 異常発生中
CON
SET R50109               ; Err MAIN
CON
SET MR115                ; Err MAIN-15
CON
RES MR2000               ; ｴﾘｱｾﾝｻｰ　有効中
CON
JMP @MR3710
STG @MR3710
AND R50006               ; 異常発生中
AWNUM #15
CON
AND R50014               ; 異常ﾌﾞｻﾞｰ 停止
JMP @MR3712
STG @MR3712
SET @MR3711
CON
AND R50015               ; ｴﾗｰﾘｾｯﾄON
RES @MR3711
CON
RES R50109               ; Err MAIN
CON
RES MR115                ; Err MAIN-15
CON
SET R55000               ; TRAP
CON
ENDS
;『Heater DOWN TIME OVER』表示
;
;'Heater DOWN TIME OVER' is displayed
LD @MR3711
AWMSG "Heater DOWN TIME OVER"
;エラー１６　ヒーター上昇時間タイムアウトエラー
;
;ERROR 16
;Heater UP TIME OVER
LD @MR3800               ; ERROR 16 　SET
RES R30008               ; ﾋｰﾀｰ 下降
CON
RES @MR3800              ; ERROR 16 　SET
CON
SET @MR3801
STG @MR3801
ANB R50006               ; 異常発生中
SET R50006               ; 異常発生中
CON
SET R50109               ; Err MAIN
CON
SET MR200                ; Err MAIN-16
CON
RES MR2000               ; ｴﾘｱｾﾝｻｰ　有効中
CON
JMP @MR3802
STG @MR3802
AND R50006               ; 異常発生中
AWNUM #16
CON
AND R50014               ; 異常ﾌﾞｻﾞｰ 停止
JMP @MR3804
STG @MR3804
SET @MR3803
CON
AND R50015               ; ｴﾗｰﾘｾｯﾄON
RES @MR3803
CON
RES R50109               ; Err MAIN
CON
RES MR200                ; Err MAIN-16
CON
SET R55000               ; TRAP
CON
ENDS
;『Ｈｅａｔｅｒ　ＵＰ　ＴＩＭＥ　ＯＶＥＲ』表示
;
;'Heater UP TIME OVER' is displayed
LD @MR3803
AWMSG "Heater UP   TIME OVER"
;エラー１７　テンションフリー用送出し側シリンダ上昇時間タイムアウトエラー
;
;ERROR 17
;Tension Free Feed Cylinder UP TIME OVER
LD @MR3808               ; ERROR 17 　SET
RES R30008               ; ﾋｰﾀｰ 下降
CON
RES @MR3808              ; ERROR 17 　SET
CON
SET @MR3809
STG @MR3809
ANB R50006               ; 異常発生中
SET R50006               ; 異常発生中
CON
SET R50109               ; Err MAIN
CON
SET MR201                ; Err MAIN-17
CON
RES MR2000               ; ｴﾘｱｾﾝｻｰ　有効中
CON
JMP @MR3810
STG @MR3810
AND R50006               ; 異常発生中
AWNUM #17
CON
AND R50014               ; 異常ﾌﾞｻﾞｰ 停止
JMP @MR3812
STG @MR3812
SET @MR3811
CON
AND R50015               ; ｴﾗｰﾘｾｯﾄON
RES @MR3811
CON
RES R50109               ; Err MAIN
CON
RES MR201                ; Err MAIN-17
CON
SET R55000               ; TRAP
CON
ENDS
;『Ｔｅｎｓｉｏｎ　Ｆｒｅｅ　Ｆｅｅｄ　Ｃｙｌｉｎｄｅｒ　ＵＰ　ＴＩＭＥ　ＯＶＥＲ』表示
;
;'T･F Feef UP Time Over' is displayed
LD @MR3811
AWMSG "T･F Feed UP TIME OVER"
;エラー１８　テンションフリー用巻取り側シリンダ下降時間タイムアウトエラー
;
;ERROR 18
;Tension Free Remove Cylinder Down TIME OVER
LD @MR3900               ; ERROR 18 　SET
RES R30008               ; ﾋｰﾀｰ 下降
CON
RES @MR3900              ; ERROR 18 　SET
CON
SET @MR3901
STG @MR3901
ANB R50006               ; 異常発生中
SET R50006               ; 異常発生中
CON
SET R50109               ; Err MAIN
CON
SET MR202                ; Err MAIN-18
CON
RES MR2000               ; ｴﾘｱｾﾝｻｰ　有効中
CON
JMP @MR3902
STG @MR3902
AND R50006               ; 異常発生中
AWNUM #18
CON
AND R50014               ; 異常ﾌﾞｻﾞｰ 停止
JMP @MR3904
STG @MR3904
SET @MR3903
CON
AND R50015               ; ｴﾗｰﾘｾｯﾄON
RES @MR3903
CON
RES R50109               ; Err MAIN
CON
RES MR202                ; Err MAIN-18
CON
SET R55000               ; TRAP
CON
ENDS
;『Ｔｅｎｓｉｏｎ　Ｆｒｅｅ　Ｒｅｍｏｖｅ　Ｃｙｌｉｎｄｅｒ　Ｄｏｗｎ　ＴＩＭＥ　ＯＶＥＲ』表示
;
;'T･F REMOVE Down TIME OVER' is displayed
LD @MR3903
AWMSG "T･F REMOVE Down TIME OVER"
;エラー１９　溶着順パラメータ 設定エラー
;
;ERROR 19
;WELDING FLG SET ERROR
;
LD @MR3905               ; ERROR 19 SET
RES @MR3905              ; ERROR 19 SET
CON
SET @MR3906
STG @MR3906
ANB R50006               ; 異常発生中
SET R50006               ; 異常発生中
CON
SET R50109               ; Err MAIN
CON
SET MR203                ; Err MAIN-19
CON
RES MR2000               ; ｴﾘｱｾﾝｻｰ　有効中
CON
JMP @MR3907
STG @MR3907
AND R50006               ; 異常発生中
AWNUM #19
CON
AND R50014               ; 異常ﾌﾞｻﾞｰ 停止
JMP @MR3909
STG @MR3909
SET @MR3908
CON
AND R50015               ; ｴﾗｰﾘｾｯﾄON
RES @MR3908
CON
RES R50109               ; Err MAIN
CON
RES MR203                ; Err MAIN-19
CON
SET R55000               ; TRAP
CON
ENDS
;『ＷＥＬＤＩＮＧ　ＦＬＧ　ＳＥＴ　ＥＲＲＯＲ』表示
;
;'WELDING FLG SET ERROR' is displayed
LD @MR3908
AWMSG "WELDING FLG SET ERROR"
;エラー２０
;イオナイザーエラー
;
;ERROR 20
;IONIZER ERROR
LDB R1006                ; Ionizer ALM (NC)
AND T201
AND R300
DIFU @MR4000
LD @MR4000
RES R35002               ; 巻取り開始M1
CON
RES R30008               ; ﾋｰﾀｰ 下降
CON
RES R30009               ; ﾃｰﾌﾟ送り出し 下降
CON
SET @MR4001
STG @MR4001
ANB R50006               ; 異常発生中
SET R50006               ; 異常発生中
CON
SET R50109               ; Err MAIN
CON
SET MR204                ; Err MAIN-20
CON
RES MR2000               ; ｴﾘｱｾﾝｻｰ　有効中
CON
JMP @MR4002
STG @MR4002
AND R50006               ; 異常発生中
AWNUM #20
CON
AND R50014               ; 異常ﾌﾞｻﾞｰ 停止
JMP @MR4004
STG @MR4004
SET @MR4003
CON
AND R50015               ; ｴﾗｰﾘｾｯﾄON
RES @MR4003
CON
RES R50109               ; Err MAIN
CON
RES MR204                ; Err MAIN-20
CON
SET R55000               ; TRAP
CON
ENDS
;『ＩＯＮＩＺＥＲ　ＥＲＲＯＲ』表示
;
;'IONIZER ERROR' is displayed
LD @MR4003
AWMSG "IONIZER ERROR"
;エラー２１
;ＨＥＰＡフィルターエラー
;
;ERROR 21
;HEPA FILTER ERROR
LDB R1005                ; HepaALM (NC)
AND T201
AND R300
DIFU @MR4008
LD @MR4008
RES R35002               ; 巻取り開始M1
CON
RES R30008               ; ﾋｰﾀｰ 下降
CON
RES R30009               ; ﾃｰﾌﾟ送り出し 下降
CON
SET @MR4009
STG @MR4009
ANB R50006               ; 異常発生中
SET R50006               ; 異常発生中
CON
SET R50109               ; Err MAIN
CON
SET MR205                ; Err MAIN-21
CON
RES MR2000               ; ｴﾘｱｾﾝｻｰ　有効中
CON
JMP @MR4010
STG @MR4010
AND R50006               ; 異常発生中
AWNUM #21
CON
AND R50014               ; 異常ﾌﾞｻﾞｰ 停止
JMP @MR4012
STG @MR4012
SET @MR4011
CON
AND R50015               ; ｴﾗｰﾘｾｯﾄON
RES @MR4011
CON
RES R50109               ; Err MAIN
CON
RES MR205                ; Err MAIN-21
CON
SET R55000               ; TRAP
CON
ENDS
;『ＨＥＰＡ　ＦＩＬＴＥＲ　ＥＲＲＯＲ』表示
;
;'HEPA FILTER ERROR' is displayed
LD @MR4011
AWMSG "HEPA FILTER ERROR"
;調整モードFLG
LD R1105                 ; 調整ﾓｰﾄﾞ
SET R20110               ; 調整ﾓｰﾄﾞﾌﾗｸﾞ
LDB R1105                ; 調整ﾓｰﾄﾞ
TMR #8 #50               ; 温調器立上り待ち
CON
AND T8                   ; 温調器立上り待ち
RES R20110               ; 調整ﾓｰﾄﾞﾌﾗｸﾞ
END
ENDH
