DEVICE:51
;MODULE:位置決め
;MODULE_TYPE:0
;非常停止
LD R50010                ; 非常停止
OR @MR001
ZRES @MR002 @MR3915
CON
ZRES MR1300 MR1515       ; 位置決め開始ﾌﾗｸﾞ
CON
OUT @MR001
TMR @0 #5
LD @T0
MDSTOP 位置決め
LDB R50300               ; 一時停止中
ANB R50008               ; 全体ERROR
OUT @MR012
;ﾒｲﾝ動作
LD R50001                ; 自動運転中
AND MR2000               ; AUTO：各ﾓｼﾞｭｰﾙ開始
@SET @MR2300
STG @MR2300
MPS
LD MR1300                ; 位置決め開始ﾌﾗｸﾞ
ANB R1910                ; 回転位置決め　ﾜｰｸ有無確認
ANB MR606                ; 位置決め動作中
ANL
SET MR1505               ; 給材要求
CON
RES MR1300               ; 位置決め開始ﾌﾗｸﾞ
CON
JMP @MR2305
MPP
AND MR1306               ; 位置決め停止ﾌﾗｸﾞ
SET MR1307               ; 位置決め停止ﾌﾗｸﾞ
CON
RES MR1306               ; 位置決め停止ﾌﾗｸﾞ
CON
ENDS
STG @MR2305
MPS
LD MR1600                ; 給材動作中
ANB T0                   ; 給材動作完了待ち
ANB @MR2307
ANL
JMP @MR2306
MPP
LDB MR1600               ; 給材動作中
ANB MR1700               ; PP給材動作　ﾜｰｸ搬送中
ANB MR1701               ; CVより取出し中
ANL
TMR #0 #9999             ; 給材動作完了待ち
CON
AND T0                   ; 給材動作完了待ち
ANB @MR2306
JMP @MR2307
STG @MR2307
RES MR1505               ; 給材要求
CON
RES MR1610               ; 給材動作完了ﾜｰｸ有り
CON
JMP @MR2309
STG @MR2306
RES MR1505               ; 給材要求
CON
JMP @MR2308
STG @MR2308
AND MR1610               ; 給材動作完了ﾜｰｸ有り
ANB MR1707               ; 定位置ｾﾝｻによる位置決め開始
ANB MR1708               ; 停止ｾﾝｻによる位置決め開始
JMP @MR2300
STG @MR2309
SET MR1309               ; ﾜｰｸ無し
CON
JMP @MR2300
;位置決め動作
END
ENDH
