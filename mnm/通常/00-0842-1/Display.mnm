DEVICE:51
;MODULE:Display
;MODULE_TYPE:0
;
LD CR2002                ; 常時ON
FLIK #30 #30 @MR000
LD CR2002                ; 常時ON
FLIK #500 #1000 @MR001
LD CR2002                ; 常時ON
FLIK #20 #20 @MR003
;
LD R1014                 ; 装置　電源ON
MC
LD R50010                ; 非常停止
LDB R50007               ; 原点復帰　完了
ANB R50004               ; TASKDO
OR R50008                ; 全体ERROR
AND @MR000
ORL
OUT MR2411               ; ｼｸﾞﾅﾙﾀﾜｰ　R表示
LD R50004                ; TASKDO
LD R50001                ; 自動運転中
ANB R50010               ; 非常停止
LDB R1209                ; ｼｬﾌﾄ圧入機より　CV満杯検出　排出
LD R1209                 ; ｼｬﾌﾄ圧入機より　CV満杯検出　排出
AND @MR000
ORL
ANL
LD R50002                ; STEP　MODE
ANB R50010               ; 非常停止
ORL
ANL
OUT MR2412               ; ｼｸﾞﾅﾙﾀﾜｰ　Y表示
LD R1208                 ; ｼｬﾌﾄ圧入機より　自動運転中
ANB R1211                ; ｼｬﾌﾄ圧入機より　ｴﾗｰ発生中
OUT R12002               ; TP_ｼｬﾌﾄ圧入機_自動運転中表示
LDB R1208                ; ｼｬﾌﾄ圧入機より　自動運転中
OUT R12003               ; TP_ｼｬﾌﾄ圧入機_定停止中表示
LD R1208                 ; ｼｬﾌﾄ圧入機より　自動運転中
AND R1211                ; ｼｬﾌﾄ圧入機より　ｴﾗｰ発生中
OUT R12004               ; TP_ｼｬﾌﾄ圧入機_ｴﾗｰ発生中表示
LDB R50004               ; TASKDO
ANB R50300               ; 一時停止中
LD R50300                ; 一時停止中
AND @MR000
ORL
ANB R50010               ; 非常停止
OUT MR2413               ; ｼｸﾞﾅﾙﾀﾜｰ　G表示
LD R50010                ; 非常停止
LD R50008                ; 全体ERROR
AND R50108               ; エラー中
ANB R50015               ; ｴﾗｰﾘｾｯﾄSWON
ORL
OUT MR2414               ; ﾌﾞｻﾞｰ1
LD R50300                ; 一時停止中
ANB MR412                ; 一時停止ｽｲｯﾁON
LD MR412                 ; 一時停止ｽｲｯﾁON
AND @MR000
ORL
OUT MR2404               ; PL.操作BOX    一時停止表示灯
;AUTO 動作可能条件
LD R21200                ; 反転P&P部原点位置有り
AND R21500               ; 回転位置決め部原点位置有り
AND R21800               ; 厚み検査部原点位置有り
AND R23800               ; 搬送RB部原点位置有り
OUT R24000               ; 原点位置有り
LDF R1001                ; SW.操作BOX    手/自切替”手動”
AND R50007               ; 原点復帰　完了
MPS
AND R24000               ; 原点位置有り
SET R50006               ; 自動運転可能
MPP
ANB R24000               ; 原点位置有り
RES R50007               ; 原点復帰　完了
LDP R1001                ; SW.操作BOX    手/自切替”手動”
RES R50006               ; 自動運転可能
LD R50006                ; 自動運転可能
OR R50001                ; 自動運転中
ANB R1001                ; SW.操作BOX    手/自切替”手動”
OUT MR2406               ; 運転準備OKｽｲｯﾁ
LD MR1115                ; ｴﾘｱｾﾝｻ遮光有り
LDB MR3601               ; 平打ちﾌﾟﾚｽ動作中
AND MR3600               ; 平打ちﾌﾟﾚｽ動作可
ORL
OR MR2406                ; 運転準備OKｽｲｯﾁ
AND @MR000
LD R50001                ; 自動運転中
ANB MR1115               ; ｴﾘｱｾﾝｻ遮光有り
ANB MR410                ; 一時停止解除待ち表示
ORL
OR MR3601                ; 平打ちﾌﾟﾚｽ動作中
LD R50001                ; 自動運転中
ANB MR410                ; 一時停止解除待ち表示
AND MR1115               ; ｴﾘｱｾﾝｻ遮光有り
AND @MR000
ORL
LD MR410                 ; 一時停止解除待ち表示
AND @MR000
ORL
OUT MR2402               ; PL.操作BOX    運転開始表示灯
LD R50210                ; 原点復帰中
AND MR100                ; ﾌﾘｯｶｰﾘﾚｰ1
OR R50003                ; 原点復帰
OUT MR2400               ; PL.操作BOX    原点復帰表示灯
LD R50001                ; 自動運転中
ANB R50008               ; 全体ERROR
ANB R50300               ; 一時停止中
LDB R50001               ; 自動運転中
LD MR3601                ; 平打ちﾌﾟﾚｽ動作中
LD R50007                ; 原点復帰　完了
ANB R1107                ; RB　PEND　位置決め完了
ORL
ANL
ORL
OUT MR2515               ; ｴﾘｱｾﾝｻ 作業表示灯
;品種設定
;
LD<> DM6500 #1           ; 品種設定
ANP R10105               ; 一時立ち上がり品選択ON
DW #1 EM100
CON
ZRES R11000 R11003       ; 一時立上がり品選択  Cell1 投入数 H/S from Host
CON
SET R11000               ; 一時立上がり品選択
LD<> DM6500 #2           ; 品種設定
ANP R10106               ; 二時立ち上がり品選択ON
DW #2 EM100
CON
ZRES R11000 R11003       ; 一時立上がり品選択  Cell1 投入数 H/S from Host
CON
SET R11001               ; 二時立上がり品選択
LD<> DM6500 #3           ; 品種設定
ANP R10107
DW #3 EM100
CON
ZRES R11000 R11003       ; 一時立上がり品選択  Cell1 投入数 H/S from Host
CON
SET R11002
LD<> DM6500 #4           ; 品種設定
ANP R10108
DW #4 EM100
CON
ZRES R11000 R11003       ; 一時立上がり品選択  Cell1 投入数 H/S from Host
CON
SET R11003               ; Cell1 投入数 H/S from Host
LD R11000                ; 一時立上がり品選択
MPS
ANP R10705               ; 品種確定ｽｲｯﾁ
LDA #1
CON
STA DM6500               ; 品種設定
CON
ZRES R11000 R11003       ; 一時立上がり品選択  Cell1 投入数 H/S from Host
MPP
ANP R10706               ; 品種確定ｷｬﾝｾﾙｽｲｯﾁ
ZRES R11000 R11003       ; 一時立上がり品選択  Cell1 投入数 H/S from Host
LD R11001                ; 二時立上がり品選択
MPS
ANP R10705               ; 品種確定ｽｲｯﾁ
LDA #2
CON
STA DM6500               ; 品種設定
CON
ZRES R11000 R11003       ; 一時立上がり品選択  Cell1 投入数 H/S from Host
MPP
ANP R10706               ; 品種確定ｷｬﾝｾﾙｽｲｯﾁ
ZRES R11000 R11003       ; 一時立上がり品選択  Cell1 投入数 H/S from Host
LD R11002
MPS
ANP R10705               ; 品種確定ｽｲｯﾁ
LDA #3
CON
STA DM6500               ; 品種設定
CON
ZRES R11000 R11003       ; 一時立上がり品選択  Cell1 投入数 H/S from Host
MPP
ANP R10706               ; 品種確定ｷｬﾝｾﾙｽｲｯﾁ
ZRES R11000 R11003       ; 一時立上がり品選択  Cell1 投入数 H/S from Host
LD R11003                ; Cell1 投入数 H/S from Host
MPS
ANP R10705               ; 品種確定ｽｲｯﾁ
LDA #4
CON
STA DM6500               ; 品種設定
CON
ZRES R11000 R11003       ; 一時立上がり品選択  Cell1 投入数 H/S from Host
MPP
ANP R10706               ; 品種確定ｷｬﾝｾﾙｽｲｯﾁ
ZRES R11000 R11003       ; 一時立上がり品選択  Cell1 投入数 H/S from Host
LD= DM6500 #1            ; 品種設定
ANB R11001               ; 二時立上がり品選択
ANB R11002
ANB R11003               ; Cell1 投入数 H/S from Host
LD R11000                ; 一時立上がり品選択
AND @MR000
ORL
OUT R12000               ; L選択確定
LD= DM6500 #2            ; 品種設定
ANB R11000               ; 一時立上がり品選択
ANB R11002
ANB R11003               ; Cell1 投入数 H/S from Host
LD R11001                ; 二時立上がり品選択
AND @MR000
ORL
OUT R12001               ; S選択確定
LD= DM6500 #3            ; 品種設定
ANB R11000               ; 一時立上がり品選択
ANB R11001               ; 二時立上がり品選択
ANB R11003               ; Cell1 投入数 H/S from Host
LD R11002
AND @MR000
ORL
OUT R12010
LD= DM6500 #4            ; 品種設定
ANB R11000               ; 一時立上がり品選択
ANB R11001               ; 二時立上がり品選択
ANB R11002
LD R11003                ; Cell1 投入数 H/S from Host
AND @MR000
ORL
OUT R12011
LD CR2002                ; 常時ON
FLIK #480 #1500 @MR002
LD R50004                ; TASKDO
AND CR2003               ; 常時OFF
OUT MR2415               ; ﾌﾞｻﾞｰ2
LD R50001                ; 自動運転中
MPS
ANB R1209                ; ｼｬﾌﾄ圧入機より　CV満杯検出　排出
LDA #500
CON
STA DM100                ; ﾒｯｾｰｼﾞ表示
MPP
AND R1209                ; ｼｬﾌﾄ圧入機より　CV満杯検出　排出
LDA #506
CON
STA DM100                ; ﾒｯｾｰｼﾞ表示
LDF R50001               ; 自動運転中
ORF R50002               ; STEP　MODE
LDA #0
CON
STA DM100                ; ﾒｯｾｰｼﾞ表示
LD R12000                ; L選択確定
MOV.D DM900 DM940        ; 厚み基準値　ｽﾃｰﾀ Lｻｲｽﾞ　MAX  厚み基準値　ｽﾃｰﾀ Lｻｲｽﾞ　MAX
MOV.D DM902 DM942        ; 厚み基準値　ｽﾃｰﾀ Lｻｲｽﾞ　MIN  厚み基準値　ｽﾃｰﾀ Lｻｲｽﾞ　MIN
MOV.D DM908 DM944        ; 厚み基準値　ﾛｰﾀ Lｻｲｽﾞ　MAX  厚み基準値　ﾛｰﾀ Lｻｲｽﾞ　MAX
MOV.D DM910 DM946        ; 厚み基準値　ﾛｰﾀ Lｻｲｽﾞ　MIN  厚み基準値　ﾛｰﾀ Lｻｲｽﾞ　MIN
LD R12001                ; S選択確定
MOV.D DM904 DM940        ; 厚み基準値　ｽﾃｰﾀ Sｻｲｽﾞ　MAX  厚み基準値　ｽﾃｰﾀ Lｻｲｽﾞ　MAX
MOV.D DM906 DM942        ; 厚み基準値　ｽﾃｰﾀ Sｻｲｽﾞ　MIN  厚み基準値　ｽﾃｰﾀ Lｻｲｽﾞ　MIN
MOV.D DM912 DM944        ; 厚み基準値　ﾛｰﾀ Sｻｲｽﾞ　MAX  厚み基準値　ﾛｰﾀ Lｻｲｽﾞ　MAX
MOV.D DM914 DM946        ; 厚み基準値　ﾛｰﾀ Sｻｲｽﾞ　MIN  厚み基準値　ﾛｰﾀ Lｻｲｽﾞ　MIN
LD R12010
MOV.D DM1900 DM940       ; 厚み基準値　ｽﾃｰﾀ Lｻｲｽﾞ　MAX
MOV.D DM1902 DM942       ; 厚み基準値　ｽﾃｰﾀ Lｻｲｽﾞ　MIN
MOV.D DM1908 DM944       ; 厚み基準値　ﾛｰﾀ Lｻｲｽﾞ　MAX
MOV.D DM1910 DM946       ; 厚み基準値　ﾛｰﾀ Lｻｲｽﾞ　MIN
LD R12011
MOV.D DM1904 DM940       ; 厚み基準値　ｽﾃｰﾀ Lｻｲｽﾞ　MAX
MOV.D DM1906 DM942       ; 厚み基準値　ｽﾃｰﾀ Lｻｲｽﾞ　MIN
MOV.D DM1912 DM944       ; 厚み基準値　ﾛｰﾀ Lｻｲｽﾞ　MAX
MOV.D DM1914 DM946       ; 厚み基準値　ﾛｰﾀ Lｻｲｽﾞ　MIN
LD R1100                 ; RB　P1　移動完了　排出位置　
OUT R23110               ; 搬送RB　完成品排出側行(P1)PL
LD R1101                 ; RB　P2　移動完了　位置決め側
OUT R23112               ; 搬送RB　位置決め側行(P2)PL
LD R1102                 ; RB　P3　移動完了　中間　NG排出側
OUT R23111               ; 搬送RB　NG排出側行(P3)PL
;HMXﾌﾟﾚｽ機への 表示灯処理
;
;R2713  R2714  R2715  
; ○     ○     ○    薄いオーシャンブルー
; ○     ○     ×    オーシャンブルー
; ○     ×     ○    蛍光色っぽい黄
; ×     ○     ○    紫
; ×     ×     ○    ピンク
; ×     ○     ×    蛍光色っぽい青
; ○     ×     ×    蛍光色っぽい緑
; 
; 自動運転中　ｷ　（ﾀﾞｲﾀﾞｲ＋ﾐﾄﾞﾘ）
; 停止中　　  ｱｵ
; ｴﾗｰ発生　　ｱｶ・ｷ点滅
; 設定点停止要求中　ｱｶ
; 　　
; 　
LD R1208                 ; ｼｬﾌﾄ圧入機より　自動運転中
AND R50001               ; 自動運転中
LD R1208                 ; ｼｬﾌﾄ圧入機より　自動運転中
ANB R50001               ; 自動運転中
LDB R1208                ; ｼｬﾌﾄ圧入機より　自動運転中
AND R50001               ; 自動運転中
ORL
AND @MR000
ORL
ANB R50008               ; 全体ERROR
AND R2708                ; HMXﾌﾟﾚｽへ　設定点停止
ANB MR2212               ; 2個落下防止ｼｮｰﾄﾋﾟﾝ有り
LD R50008                ; 全体ERROR
AND R2708                ; HMXﾌﾟﾚｽへ　設定点停止
ORL
ORB R2708                ; HMXﾌﾟﾚｽへ　設定点停止
OUT MR2715               ; HMXへの表示灯　ﾀﾞｲﾀﾞｲ
LD R1208                 ; ｼｬﾌﾄ圧入機より　自動運転中
AND R50001               ; 自動運転中
LD R1208                 ; ｼｬﾌﾄ圧入機より　自動運転中
ANB R50001               ; 自動運転中
LDB R1208                ; ｼｬﾌﾄ圧入機より　自動運転中
AND R50001               ; 自動運転中
ORL
AND @MR000
ORL
ANB R50008               ; 全体ERROR
AND R2708                ; HMXﾌﾟﾚｽへ　設定点停止
ANB MR2212               ; 2個落下防止ｼｮｰﾄﾋﾟﾝ有り
LD R50008                ; 全体ERROR
AND @MR000
AND R2708                ; HMXﾌﾟﾚｽへ　設定点停止
ORL
LDB R50001               ; 自動運転中
ANB R50008               ; 全体ERROR
AND R2708                ; HMXﾌﾟﾚｽへ　設定点停止
ANB MR2212               ; 2個落下防止ｼｮｰﾄﾋﾟﾝ有り
ORL
OUT MR2713               ; HMXへの表示灯　ﾐﾄﾞﾘ
LDB R50001               ; 自動運転中
ANB R50008               ; 全体ERROR
AND R2708                ; HMXﾌﾟﾚｽへ　設定点停止
AND CR2003               ; 常時OFF
OUT MR2714               ; HMXへの表示灯　ｱｵ
LD R2212                 ; ﾛｰﾀ2個落下防止ｼｮｰﾄﾋﾟﾝ有り
OR R2213                 ; ｽﾃｰﾀ2個落下防止ｼｮｰﾄﾋﾟﾝ有り
AND @MR000
OUT MR2212               ; 2個落下防止ｼｮｰﾄﾋﾟﾝ有り
LD= DM150 #1             ; 位置決め部ｽﾃｰﾀﾜｰｸ有無
OUT R100                 ; 位置決め部ｽﾃｰﾀﾜｰｸ有無
LD= DM151 #1             ; 位置決め部ﾛｰﾀﾜｰｸ有無
OUT R101                 ; 位置決め部ﾛｰﾀﾜｰｸ有無
LD= DM152 #1             ; 平打ち部ｽﾃｰﾀﾜｰｸ有無
OUT R102                 ; 平打ち部ｽﾃｰﾀﾜｰｸ有無
LD= DM153 #1             ; 平打ち部ﾛｰﾀﾜｰｸ有無
OUT R103                 ; 平打ち部ﾛｰﾀﾜｰｸ有無
LD= DM154 #1             ; 検査部ｽﾃｰﾀﾜｰｸ有無
OUT R104                 ; 検査部ｽﾃｰﾀﾜｰｸ有無
LD= DM155 #1             ; 検査部ﾛｰﾀﾜｰｸ有無
OUT R105                 ; 検査部ﾛｰﾀﾜｰｸ有無
LD= DM156 #1             ; 排出部ｽﾃｰﾀﾜｰｸ有無
OUT R106                 ; 排出部ｽﾃｰﾀﾜｰｸ有無
LD= DM157 #1             ; 排出部ﾛｰﾀﾜｰｸ有無
OUT R107                 ; 排出部ﾛｰﾀﾜｰｸ有無
LD= DM158 #1             ; 排出ｺﾝﾍﾞｱ上ｽﾃｰﾀ有無
OUT R108                 ; 排出ｺﾝﾍﾞｱ上ｽﾃｰﾀ有無
LD= DM159 #1             ; 排出ｺﾝﾍﾞｱ上ﾛｰﾀ有無
OUT R109                 ; 排出ｺﾝﾍﾞｱ上ﾛｰﾀ有無
LD= DM160 #1             ; 位置決めPPﾁｬｯｸ_ｽﾃｰﾀ
OUT R110                 ; 位置決めPPﾁｬｯｸ_ｽﾃｰﾀ
LD= DM161 #1             ; 位置決めPPﾁｬｯｸ_ﾛｰﾀ
OUT R111                 ; 位置決めPPﾁｬｯｸ_ﾛｰﾀ
MCR
;反転移載部ｼｸﾞﾅﾙﾀﾜｰ表示
;
LD R50001                ; 自動運転中
ANB R50115               ; Err 反転P&P
OUT R50303               ; 反転移載用ｼｸﾞﾅﾙ_Y
LD R50115                ; Err 反転P&P
OUT R50304               ; 反転移載用ｼｸﾞﾅﾙ_R
LDB R50001               ; 自動運転中
ANB R50115               ; Err 反転P&P
OUT R50305               ; 反転移載用ｼｸﾞﾅﾙ_G
LD R50303                ; 反転移載用ｼｸﾞﾅﾙ_Y
OR R50305                ; 反転移載用ｼｸﾞﾅﾙ_G
OUT MR3013               ; 反転PP部 表示灯 緑
LD R50303                ; 反転移載用ｼｸﾞﾅﾙ_Y
OR R50304                ; 反転移載用ｼｸﾞﾅﾙ_R
OUT MR3015               ; 反転PP部 表示灯 橙
;機種名称
LD CR2002                ; 常時ON
MPS
AND= EM101 #1
SMOV EM20 EM200
MRD
AND= EM101 #2
SMOV EM30 EM200
MRD
AND= EM101 #3
SMOV EM40 EM200
MPP
AND= EM101 #4
SMOV EM50 EM200
LD CR2002                ; 常時ON
MPS
AND R12000               ; L選択確定
SMOV EM20 EM10
MRD
AND R12001               ; S選択確定
SMOV EM30 EM10
MRD
AND R12010
SMOV EM40 EM10
MPP
AND R12011
SMOV EM50 EM10
LD CR2002                ; 常時ON
ANP MR110
MPS
AND= EM101 #1
SMOV EM0 EM20
MRD
AND= EM101 #2
SMOV EM0 EM30
MRD
AND= EM101 #3
SMOV EM0 EM40
MPP
AND= EM101 #4
SMOV EM0 EM50
END
ENDH
