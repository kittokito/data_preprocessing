DEVICE:51
;MODULE:Monitor
;MODULE_TYPE:0
;非常停止 / Emergency stop
;
LD R50010                ; 非常停止
ZRES @MR000 @MR1515      ; Err122解除OK  ERR31解除OK
;Error60 ｽﾃｰﾀ ﾌﾟﾚｽ後搬送CV ｱﾗｰﾑ
;
LD T230                  ; 電源ON後ｳｪｲﾄ
ANB R1200                ; HMXﾌﾟﾚｽ　製品取出しｽﾃｰﾀCV　ALM
@SET @MR100              ; Err60
LD @MR100                ; Err60
ANB R50008               ; 全体ERROR
SET R50008               ; 全体ERROR
CON
SET R51000               ; 反転 P&P部
CON
SET R50812               ; ERR60
CON
SET @MR102               ; 102
MOV #60 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR102               ; 102
AND R50008               ; 全体ERROR
JMP @MR103
STG @MR103
ANB R50008               ; 全体ERROR
SET R50011               ; TRAP
CON
ENDS
;Error61 ﾛｰﾀ ﾌﾟﾚｽ後搬送CV ｱﾗｰﾑ
;
LD T230                  ; 電源ON後ｳｪｲﾄ
ANB R1201                ; HMXﾌﾟﾚｽ　製品取出しﾛｰﾀCV　ALM
@SET @MR108              ; Err61
LD @MR108                ; Err61
ANB R50008               ; 全体ERROR
SET R50008               ; 全体ERROR
CON
SET R51000               ; 反転 P&P部
CON
SET R50813               ; ERR61
CON
SET @MR110               ; 110
MOV #61 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR110               ; 110
AND R50008               ; 全体ERROR
JMP @MR111
STG @MR111
ANB R50008               ; 全体ERROR
SET R50011               ; TRAP
CON
ENDS
;Error62 反転移載前CV ｱﾗｰﾑ
;
LD T230                  ; 電源ON後ｳｪｲﾄ
ANB R1202                ; 反転移載前CV　ALM
@SET @MR200              ; Err62
STG @MR200               ; Err62
ANB R50008               ; 全体ERROR
SET R50008               ; 全体ERROR
CON
SET R51000               ; 反転 P&P部
CON
SET R50814               ; ERR62
CON
JMP @MR202
MOV #62 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR202
AND R50008               ; 全体ERROR
JMP @MR203
STG @MR203
ANB R50008               ; 全体ERROR
SET R50011               ; TRAP
CON
ENDS
;Error63 回転位置決め前CV ｱﾗｰﾑ
;
LD T230                  ; 電源ON後ｳｪｲﾄ
ANB R1203                ; 平打ち装置前CV　ALM
@SET @MR208              ; Err63
STG @MR208               ; Err63
ANB R50008               ; 全体ERROR
SET R50008               ; 全体ERROR
CON
SET R51000               ; 反転 P&P部
CON
SET R50815               ; ERR63
CON
JMP @MR210
MOV #62 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR210
AND R50008               ; 全体ERROR
JMP @MR211
STG @MR211
ANB R50008               ; 全体ERROR
SET R50011               ; TRAP
CON
ENDS
;Error64 HMXﾌﾟﾚｽ部　ﾛｰﾀ2個落下検出
;
LDB R2214                ; ﾛｰﾀ2個落下検出
TMR #560 #10             ; ﾛｰﾀ2個落下検出ﾀｲﾏ
CON
AND T560                 ; ﾛｰﾀ2個落下検出ﾀｲﾏ
@SET @MR300              ; Err64
STG @MR300               ; Err64
ANB R50008               ; 全体ERROR
SET R50008               ; 全体ERROR
CON
SET R51000               ; 反転 P&P部
CON
SET R50900               ; ERR64
CON
JMP @MR302               ; 302
MOV #64 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR302               ; 302
AND R50008               ; 全体ERROR
JMP @MR303
STG @MR303
ANB R50008               ; 全体ERROR
ENDS
;Error65 HMXﾌﾟﾚｽ部　ｽﾃｰﾀ2個落下検出
;
LDB R2215                ; ｽﾃｰﾀ2個落下検出
TMR #561 #10             ; ｽﾃｰﾀ2個落下検出ﾀｲﾏ
CON
AND T561                 ; ｽﾃｰﾀ2個落下検出ﾀｲﾏ
@SET @MR308              ; Err65
STG @MR308               ; Err65
ANB R50008               ; 全体ERROR
SET R50008               ; 全体ERROR
CON
SET R51000               ; 反転 P&P部
CON
SET R50901               ; ERR65
CON
JMP @MR310               ; 310
MOV #65 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR310               ; 310
AND R50008               ; 全体ERROR
JMP @MR311
STG @MR311
ANB R50008               ; 全体ERROR
ENDS
;搬送RB動作可能条件
;
;　　-右ﾊﾝﾄﾞｰ
LDB MR3304               ; 搬送　右ﾁｬｯｸ前後　前進
AND MR3305               ; 搬送　右ﾁｬｯｸ前後　後退
ANB R2300                ; 搬送ｽﾃｰﾀ　右ﾁｬｯｸ前後　前進限
AND R2301                ; 搬送ｽﾃｰﾀ　右ﾁｬｯｸ前後　後退限
ANB R2302                ; 搬送ﾛｰﾀ　右ﾁｬｯｸ前後　前進限
AND R2303                ; 搬送ﾛｰﾀ　右ﾁｬｯｸ前後　後退限
OUT MR9000               ; 右ﾊﾝﾄﾞ_RB動作可1
LD MR3304                ; 搬送　右ﾁｬｯｸ前後　前進
ANB MR3305               ; 搬送　右ﾁｬｯｸ前後　後退
AND R2300                ; 搬送ｽﾃｰﾀ　右ﾁｬｯｸ前後　前進限
ANB R2301                ; 搬送ｽﾃｰﾀ　右ﾁｬｯｸ前後　後退限
AND R2302                ; 搬送ﾛｰﾀ　右ﾁｬｯｸ前後　前進限
ANB R2303                ; 搬送ﾛｰﾀ　右ﾁｬｯｸ前後　後退限
ANB MR3412               ; 搬送右ﾁｬｯｸ上下　下降
AND MR3413               ; 搬送右ﾁｬｯｸ上下　上昇
ANB R2012                ; 搬送右ﾁｬｯｸ上下　下降限
AND R2013                ; 搬送右ﾁｬｯｸ上下　上昇限
OUT MR9001               ; 右ﾊﾝﾄﾞ_RB動作可2
;　　-中ﾊﾝﾄﾞｰ
LDB MR3306               ; 搬送　中ﾁｬｯｸ前後　前進
AND MR3307               ; 搬送　中ﾁｬｯｸ前後　後退
ANB R2304                ; 搬送ｽﾃｰﾀ　中ﾁｬｯｸ前後　前進限
AND R2305                ; 搬送ｽﾃｰﾀ　中ﾁｬｯｸ前後　後退限
ANB R2306                ; 搬送ﾛｰﾀ　中ﾁｬｯｸ前後　前進限
AND R2307                ; 搬送ﾛｰﾀ　中ﾁｬｯｸ前後　後退限
OUT MR9004               ; 中ﾊﾝﾄﾞ_RB動作可1
LD MR3306                ; 搬送　中ﾁｬｯｸ前後　前進
ANB MR3307               ; 搬送　中ﾁｬｯｸ前後　後退
AND R2304                ; 搬送ｽﾃｰﾀ　中ﾁｬｯｸ前後　前進限
ANB R2305                ; 搬送ｽﾃｰﾀ　中ﾁｬｯｸ前後　後退限
AND R2306                ; 搬送ﾛｰﾀ　中ﾁｬｯｸ前後　前進限
ANB R2307                ; 搬送ﾛｰﾀ　中ﾁｬｯｸ前後　後退限
ANB MR3414               ; 搬送中ﾁｬｯｸ上下　下降
AND MR3415               ; 搬送中ﾁｬｯｸ上下　上昇
ANB R2014                ; 搬送中ﾁｬｯｸ上下　下降限
AND R2015                ; 搬送中ﾁｬｯｸ上下　上昇限
OUT MR9005               ; 中ﾊﾝﾄﾞ_RB動作可2
;　　-左ﾊﾝﾄﾞｰ
LDB MR3308               ; 搬送　左ﾁｬｯｸ前後　前進
AND MR3309               ; 搬送　左ﾁｬｯｸ前後　後退
ANB R2308                ; 搬送ｽﾃｰﾀ　左ﾁｬｯｸ前後　前進限
AND R2309                ; 搬送ｽﾃｰﾀ　左ﾁｬｯｸ前後　後退限
ANB R2310                ; 搬送ﾛｰﾀ　左ﾁｬｯｸ前後　前進限
AND R2311                ; 搬送ﾛｰﾀ　左ﾁｬｯｸ前後　後退限
OUT MR9008               ; 左ﾊﾝﾄﾞ_RB動作可1
LD MR3308                ; 搬送　左ﾁｬｯｸ前後　前進
ANB MR3309               ; 搬送　左ﾁｬｯｸ前後　後退
AND R2308                ; 搬送ｽﾃｰﾀ　左ﾁｬｯｸ前後　前進限
ANB R2309                ; 搬送ｽﾃｰﾀ　左ﾁｬｯｸ前後　後退限
AND R2310                ; 搬送ﾛｰﾀ　左ﾁｬｯｸ前後　前進限
ANB R2311                ; 搬送ﾛｰﾀ　左ﾁｬｯｸ前後　後退限
ANB MR3500               ; 搬送左ﾁｬｯｸ上下　下降
AND MR3501               ; 搬送左ﾁｬｯｸ上下　上昇
ANB R2100                ; 搬送左ﾁｬｯｸ上下　下降限
AND R2101                ; 搬送左ﾁｬｯｸ上下　上昇限
OUT MR9009               ; 左ﾊﾝﾄﾞ_RB動作可2
;　　ｰ完成品押出しｰ
LDB MR3510               ; 排出部 ﾜｰｸ押出 出
AND R2201                ; 排出部 ﾜｰｸ押出 戻限
OUT MR9013               ; 完成品押出し_RB動作可
;　　ｰNG排出ｰ
LDB MR3508               ; NGﾄﾚｰ前後　取出し
AND MR3509               ; NGﾄﾚｰ前後　戻し
AND R2109                ; NGﾄﾚｰ前後　戻し側
ANB R2110                ; NGﾄﾚｰ前後　取出し側
OUT MR9014               ; NG排出_RB動作可
;　　ｰ厚み検査、平打ちｰ
LD R1113                 ; 油圧ﾌﾟﾚｽ　上死点確認
ANB MR3502               ; 厚み検査部　変位ｾﾝｻ上下　下降
ANB R2103                ; 厚み検査部　変位ｾﾝｻ上下　下降限
AND R2104                ; 厚み検査部　変位ｾﾝｻ上下　上昇限
OUT MR9015               ; 厚み検査平打ち_RB動作可
;　　ｰまとめｰ
LD MR9000                ; 右ﾊﾝﾄﾞ_RB動作可1
OR MR9001                ; 右ﾊﾝﾄﾞ_RB動作可2
LD MR9004                ; 中ﾊﾝﾄﾞ_RB動作可1
OR MR9005                ; 中ﾊﾝﾄﾞ_RB動作可2
ANL
LD MR9008                ; 左ﾊﾝﾄﾞ_RB動作可1
OR MR9009                ; 左ﾊﾝﾄﾞ_RB動作可2
ANL
LD MR9013                ; 完成品押出し_RB動作可
AND MR9014               ; NG排出_RB動作可
AND MR9015               ; 厚み検査平打ち_RB動作可
OR CR2002                ; 常時ON
ANL
OUT MR9100               ; 搬送RB動作可
LD R1101                 ; RB　P2　移動完了　位置決め側
LD R2300                 ; 搬送ｽﾃｰﾀ　右ﾁｬｯｸ前後　前進限
OR R2302                 ; 搬送ﾛｰﾀ　右ﾁｬｯｸ前後　前進限
ANL
ANB R1112                ; RB　ZONE1　ｿﾞｰﾝ1
OUT R47100               ; 搬送P&P下降不可
;180523 err42でプレス機を止めないように変更
LD CR2002                ; 常時ON
ANB MR1908               ; HMXﾌﾟﾚｽ後　ﾛｰﾀ満杯
ANB MR1909               ; HMXﾌﾟﾚｽ後　ｽﾃｰﾀ満杯
LDB R50710               ; ERR42
OR CR2002                ; 常時ON
ANL
ANB R50812               ; ERR60
ANB R50813               ; ERR61
ANB R50900               ; ERR64
ANB R50901               ; ERR65
AND R1014                ; 装置　電源ON
OUT MR2708               ; HMXﾌﾟﾚｽへ　設定点停止
END
ENDH
