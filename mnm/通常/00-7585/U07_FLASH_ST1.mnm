DEVICE:53
;MODULE:U07_FLASH_ST1
;MODULE_TYPE:0
;SCRIPT_TYPE:
;<h1/>Global -> Local
;入力
LD X1280                 ; ST1下治具位置決め(L)下降端(ﾛｯｸ)
OUT @R000                ; ﾌｨｸｽﾁｬ位置決め 固定端
LD X1281                 ; ST1下治具位置決め(L)上昇端(ｱﾝﾛｯｸ
OUT @R001                ; ﾌｨｸｽﾁｬ位置決め 解除端
LD X1282                 ; ST1下治具位置決め(R)下降端(ﾛｯｸ)
OUT @R002                ; ﾌｨｸｽﾁｬ位置決め 固定端
LD X1283                 ; ST1下治具位置決め(R)上昇端(ｱﾝﾛｯｸ
OUT @R003                ; ﾌｨｸｽﾁｬ位置決め 解除端
LD X1284                 ; ST1上治具位置決め(L)上昇端(ﾛｯｸ)
OUT @R004                ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 固定端
LD X1285                 ; ST1上治具位置決め(L)下降端(ｱﾝﾛｯｸ
OUT @R005                ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 解除端
LD X1286                 ; ST1上治具位置決め(R)上昇端(ﾛｯｸ)
OUT @R006                ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 固定端
LD X1287                 ; ST1上治具位置決め(R)下降端(ｱﾝﾛｯｸ
OUT @R007                ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 解除端
LD X1288                 ; ST1BCR READER上下下降端
OUT @R008                ; ST BCR READER上下下降端
LD X1289                 ; ST1BCR READER上下上昇端
OUT @R009                ; ST BCR READER上下上昇端
LDB CR2002               ; 常時ON
OUT @R012                ; 基板受取上下 上昇端
LD CR2002                ; 常時ON
OUT @R013                ; 基板受取上下 下降端
LD CR2003                ; 常時OFF
OUT @R015                ; ﾌｨｸｽﾁｬ検出(ON=無)
LD CR2002                ; 常時ON
OUT @R100                ; ﾌｨｸｽﾁｬ基板受取下降確認1
LD CR2002                ; 常時ON
OUT @R101                ; ﾌｨｸｽﾁｬ基板受取下降確認2
LD X1299                 ; ST1 下治具基板確認
OUT @R102                ; ﾌｨｸｽﾁｬ基板確認(ON=有/OFF=無)
LD R2205                 ; ST3 Check floating1
OUT @R103                ; ﾌｨｸｽﾁｬ基板浮き確認1
LD R2206                 ; ST3 Check floating2
OUT @R104                ; ﾌｨｸｽﾁｬ基板浮き確認2
LD X1295                 ; ST1下治具DLｺﾈｸﾀﾛｯｸ確認
OUT @R105                ; DL156-1 接続確認
TMR @29 K10              ; ｾﾝｻ電源ONﾀｲﾏ
LD CR2002                ; 常時ON
OUT @R106                ; DL156-2 接続確認
LD CR2002                ; 常時ON
OUT @R107                ; DL156-3 接続確認
LD X129A                 ; ST1上治具ID1
OUT @R108                ; 上治具判別ID 1
LD X129B                 ; ST1上治具ID2
OUT @R109                ; 上治具判別ID 2
LD X129C                 ; ST1上治具ID3
OUT @R110                ; 上治具判別ID 3
LD CR2003                ; 常時OFF
OUT @R111                ; 上治具判別ID 4
LD X129D                 ; ST1下治具ID1
OUT @R112                ; 下治具判別ID 1
LD X129E                 ; ST1下治具ID2
OUT @R113                ; 下治具判別ID 2
LD X129F                 ; ST1下治具ID3
OUT @R114                ; 下治具判別ID 3
LD CR2003                ; 常時OFF
OUT @R115                ; 下治具判別ID 4
LD X1309                 ; ST1 BACKUP BOARD 固定/解除 SW
OUT @R200                ; 上治具ﾛｯｸ/ｱﾝﾛｯｸSW
LD X130A                 ; ST1 FIXTURE 固定/解除 SW
OUT @R201                ; 下治具ﾛｯｸ/ｱﾝﾛｯｸSW
LD X1305                 ; ST1 ENABLE/DISABLE SW
OR X130B                 ; ST1 Enable/Disable_SW(R)
OUT @R202                ; ST有効/無効選択SW
LD X1304                 ; ST1 NG RESET SW
OUT @R204                ; NG品 RESET SW
LD X130D                 ; ST1 Ionizer  Ion level alarm
OUT @R213                ; ST Ionizer  Ion level alarm
LD X130E                 ; ST1 Ionizer condition alarm
OUT @R214                ; ST Ionizer condition alarm
LD X130F                 ; ST1 Ionizer alarm
OUT @R215                ; ST Ionizer alarm
LD X1308                 ; ST1 START SW
OUT @R203                ; ST書込み開始SW
LD X132C                 ; ST1 FIXTURE IGP1電源ON確認
OUT @R300                ; ﾌｨｸｽﾁｬ 電源ON確認1
LD X132D                 ; ST1 FIXTURE IGP2電源ON確認
OUT @R301                ; ﾌｨｸｽﾁｬ 電源ON確認2
LD CR2002                ; 常時ON
OUT @R302                ; ﾌｨｸｽﾁｬ 電源ON確認3
LD CR2002                ; 常時ON
OUT @R303                ; ﾌｨｸｽﾁｬ 電源ON確認4
LD X06                   ; DRL1 ﾄﾞｱﾛｯｸ確認OSSD1
OUT @R700                ; DOOR閉
LD CR2002                ; 常時ON
MOV.D B11C0 @R400        ; M)下治具位置決め上下 下降SW
;□RB2-1 B/B上下RB
LD CR2002                ; 常時ON
MOV W0220 @D200          ; RBC3 ST3上下 状態信号  RB_状態信号
MOV.D W0222 @D202        ; RBC3 ST3上下 現在位置(0.01mm)(L)  RB_現在位置座標L
;from Main
LD X1306                 ; ST1 BACKUP BOARD UP SW
OUT @R600                ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上昇SW
LD X1307                 ; ST1 BACKUP BOARD DOWN SW
OUT @R601                ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ下降SW
;from PC
LD W02.0                 ; 書込み状態#1
OUT @R800                ; fromPC) ｽﾃｰｼﾞ状態(ON=書込み中)
LD W02.4                 ; 書込み結果#1
OUT @R801                ; fromPC) 書込み結果(ON=OK)
LD W02.8                 ; ﾘﾄﾗｲ要求#1
OUT @R802                ; fromPC) ﾘﾄﾗｲ要求
LD W03.0                 ; IGP ON/OFF#1-1
OUT @R803                ; fromPC) IGP ON指示1
LD W03.1                 ; IGP ON/OFF#1-2
OUT @R804                ; fromPC) IGP ON指示2
LD CR2003                ; 常時OFF
OUT @R805                ; fromPC) IGP ON指示3
LD CR2003                ; 常時OFF
OUT @R806                ; fromPC) IGP ON指示4
LD CR2003                ; 常時OFF
DIFU @R807               ; fromPC) ｽﾃｰｼﾞ有効/無効選択Sw
LD CR2003                ; 常時OFF
OUT @R808                ; fromPC) ｽﾃｰｼﾞ無効切替要求(ﾗｲﾀ異
LD W01.0                 ; 基板読取完了#1
OUT @R809                ; fromPC) BCR完了
LD W01.1                 ; 基板投入不可#1
OUT @R810                ; fromPC) 基板投入不可(PCB ERROR)
LDB M5498                ; U9(ST2) NG処理中ﾌﾗｸﾞ
ANB M6498                ; U11(ST3) NG処理中ﾌﾗｸﾞ
INV
OUT @M400                ; 他ST NG処理中ﾌﾗｸﾞ
;<h1/>▽_入力受け
;関連する入力受け(ｾﾝｻのﾃﾞｨﾚｲﾀｲﾏ等)を必要があれば作成する。
;通常は入力ﾕﾆｯﾄに入力時定数(ﾃﾞｨﾚｲ)があるので直接使用しても問題は無い。
LD M123                  ; 安全扉正常
AND M124                 ; ｴﾘｱｾﾝｻ正常
ANB B0320                ; 800)_安全扉開
TMH @1 K20               ; 安全ｶﾊﾞｰ正常
TMR @4 K20               ; 安全ｶﾊﾞｰ正常(遅い版)
LD<> @D35 K0             ; 下治具ID ｾﾝｻｰ状態
AND @T30                 ; ﾌｨｸｽﾁｬ位置決め 固定端
AND @T32                 ; ﾌｨｸｽﾁｬ位置決め 固定端
OUT @M403                ; 下治具 固定状態
LD<> @D34 K0             ; 上治具ID ｾﾝｻｰ状態
AND @T34                 ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 固定端
AND @T36                 ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 固定端
AND @M380                ; RB_上昇位置(P1)
OUT @M402                ; 上治具 固定状態
LDB @R202                ; ST有効/無効選択SW
ANB @R501                ; M)有効･無効選択SW
ANB @R807                ; fromPC) ｽﾃｰｼﾞ有効/無効選択Sw
INV
MEP
OUT @M407                ; ST有効/無効選択SW受け
;　　CLｾﾝｻｰﾀｲﾏｰ受け
LD @R000                 ; ﾌｨｸｽﾁｬ位置決め 固定端
TMH @30 K10              ; ﾌｨｸｽﾁｬ位置決め 固定端
LD @R001                 ; ﾌｨｸｽﾁｬ位置決め 解除端
TMH @31 K10              ; ﾌｨｸｽﾁｬ位置決め 解除端
LD @R002                 ; ﾌｨｸｽﾁｬ位置決め 固定端
TMH @32 K10              ; ﾌｨｸｽﾁｬ位置決め 固定端
LD @R003                 ; ﾌｨｸｽﾁｬ位置決め 解除端
TMH @33 K10              ; ﾌｨｸｽﾁｬ位置決め 解除端
LD @R004                 ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 固定端
TMH @34 K10              ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 固定端
LD @R005                 ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 解除端
TMH @35 K10              ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 解除端
LD @R006                 ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 固定端
TMH @36 K10              ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 固定端
LD @R007                 ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 解除端
TMH @37 K10              ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 解除端
LD @R008                 ; ST BCR READER上下下降端
TMH @38 K30              ; ST BCR READER上下下降端
LD @R009                 ; ST BCR READER上下上昇端
TMH @39 K30              ; ST BCR READER上下上昇端
LD @R010
TMH @40 K0
LD @R011
TMH @41 K10
LD @R012                 ; 基板受取上下 上昇端
TMH @42 K0               ; 下治具基板受取 上昇端
LD @R013                 ; 基板受取上下 下降端
TMH @43 K0               ; 下治具基板受取 下降端
LD @R014
TMH @44 K10
LD @R015                 ; ﾌｨｸｽﾁｬ検出(ON=無)
TMH @45 K10              ; ﾌｨｸｽﾁｬ 無
LD CR2002                ; 常時ON
TMS @46 K10              ; ST除材給材無
;<h1/>____□治具ID No.
;上治具
LD @R108                 ; 上治具判別ID 1
OUT @D34.0
LD @R109                 ; 上治具判別ID 2
OUT @D34.1
LD @R110                 ; 上治具判別ID 3
OUT @D34.2
LD @R111                 ; 上治具判別ID 4
OUT @D34.3
;上治具ＩＤ保持
LD @M380                 ; RB_上昇位置(P1)
AND @T34                 ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 固定端
AND @T36                 ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 固定端
TMR @20 K5               ; 上治具ID 更新DLY
LD @T20                  ; 上治具ID 更新DLY
LD @M412                 ; ST_ID保持ﾄﾘｶﾞ
AND @T34                 ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 固定端
AND @T36                 ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 固定端
ORL
OUT @M412                ; ST_ID保持ﾄﾘｶﾞ
LD @T20                  ; 上治具ID 更新DLY
MOV @D34 @D30            ; 上治具ID ｾﾝｻｰ状態  上治具ID
LDB @M412                ; ST_ID保持ﾄﾘｶﾞ
MOV K0 @D30              ; 上治具ID
;下治具
LD @R112                 ; 下治具判別ID 1
OUT @D35.0
LD @R113                 ; 下治具判別ID 2
OUT @D35.1
LD @R114                 ; 下治具判別ID 3
OUT @D35.2
LD @R115                 ; 下治具判別ID 4
OUT @D35.3
;下治具ＩＤ保持
LD @T30                  ; ﾌｨｸｽﾁｬ位置決め 固定端
AND @T32                 ; ﾌｨｸｽﾁｬ位置決め 固定端
TMR @21 K5               ; 下治具ID 更新DLY
LD @T21                  ; 下治具ID 更新DLY
MOV @D35 @D31            ; 下治具ID ｾﾝｻｰ状態  下治具ID
LDB @T21                 ; 下治具ID 更新DLY
MOV K0 @D31              ; 下治具ID
LD @R102                 ; ﾌｨｸｽﾁｬ基板確認(ON=有/OFF=無)
LD M35                   ; 空運転ﾓｰﾄﾞ
AND M30                  ; 自動ﾓｰﾄﾞ
AND= @D51 K1             ; ﾜｰｸ有無記憶
ORL
OUT @M320                ; 下治具基板確認(ON=有 OFF=無)
;<h1/>____□ST治具有効/無効選択
;段取り状態中ﾌﾗｸﾞの追加
;自動中は段取り状態中に、ST上のﾜｰｸ無、RBﾊﾝﾄﾞﾜｰｸ無し、供給部ﾜｰｸ無しにて無効状態OKとなる
LDB M41                  ; 全ﾕﾆｯﾄ起動中
LDB @M74                 ; Ux-1 起動中
AND @T46                 ; ST除材給材無
AND M41                  ; 全ﾕﾆｯﾄ起動中
ORL
OUT @M408                ; ST無効OK条件
LD @M409                 ; ST無効予約(自動運転)
ANB @M410                ; ST無効中
AND @M407                ; ST有効/無効選択SW受け
OUT @M411                ; ST予約ｷｬﾝｾﾙ
LD @M407                 ; ST有効/無効選択SW受け
AND M41                  ; 全ﾕﾆｯﾄ起動中
OR @R808                 ; fromPC) ｽﾃｰｼﾞ無効切替要求(ﾗｲﾀ異
AND @L0                  ; 有効状態
ANB @M409                ; ST無効予約(自動運転)
LD @M409                 ; ST無効予約(自動運転)
ANB @M410                ; ST無効中
ANB @M411                ; ST予約ｷｬﾝｾﾙ
ORL
OUT @M409                ; ST無効予約(自動運転)
LD @M409                 ; ST無効予約(自動運転)
AND @M408                ; ST無効OK条件
LD @M407                 ; ST有効/無効選択SW受け
ANB M41                  ; 全ﾕﾆｯﾄ起動中
ORL
LDB @R1001               ; ﾌｨｸｽﾁｬ位置決め 上昇(Unlock)
ANB @R1003               ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 下降(Unloc
ANB @M440                ; 有効時下治具ｺﾈｸﾀ挿入確認NG
ANB B0EA                 ; 234)_ST1 上治具ID異常
ANB B0EB                 ; 235)_ST1 下治具ID異常
INV
MEP
ORL
LDB B0F6                 ; 246)_ST1 BCR 上下下降ｾﾝｻ異常
ANB B0F7                 ; 247)_ST1 BCR 上下上昇ｾﾝｻ異常
INV
ORL
LD @M410                 ; ST無効中
ORP T41                  ; 無効確認
ANB @L0                  ; 有効状態
ORL
AND T30                  ; ｴﾗｰ監視開始ﾀｲﾏ
AND CR2007               ; 運転開始時1ｽｷｬﾝOFF
OUT @M410                ; ST無効中
;<h1/>____□ST有効処理
LD @M407                 ; ST有効/無効選択SW受け
LD<> @D34 K0             ; 上治具ID ｾﾝｻｰ状態
AND<> @D35 K0            ; 下治具ID ｾﾝｻｰ状態
AND @M403                ; 下治具 固定状態
AND @M402                ; 上治具 固定状態
LD M35                   ; 空運転ﾓｰﾄﾞ
AND= @D34 K0             ; 上治具ID ｾﾝｻｰ状態
AND= @D35 K0             ; 下治具ID ｾﾝｻｰ状態
ORL
ANL
ANB @L0                  ; 有効状態
LD @L0                   ; 有効状態
LDB @M410                ; ST無効中
ORB T30                  ; ｴﾗｰ監視開始ﾀｲﾏ
ANL
ORL
OUT @L0                  ; 有効状態
;____ｺﾈｸﾀｾｯﾄ確認
LD T30                   ; ｴﾗｰ監視開始ﾀｲﾏ
AND @L0                  ; 有効状態
LDB @R105                ; DL156-1 接続確認
ORB @R106                ; DL156-2 接続確認
ORB @R107                ; DL156-3 接続確認
ANL
OR @M440                 ; 有効時下治具ｺﾈｸﾀ挿入確認NG
ANB @M441                ; 下治具ｺﾈｸﾀ挿入確認終了
ANB M35                  ; 空運転ﾓｰﾄﾞ
AND T30                  ; ｴﾗｰ監視開始ﾀｲﾏ
OUT @M440                ; 有効時下治具ｺﾈｸﾀ挿入確認NG
LD @M440                 ; 有効時下治具ｺﾈｸﾀ挿入確認NG
ANB @L0                  ; 有効状態
OUT @M441                ; 下治具ｺﾈｸﾀ挿入確認終了
;____▼_BCR読取りCYL下降
LD @M420                 ; 上治具 LOCK指令
MPS
LD @R700                 ; DOOR閉
ANB @M451                ; BCR 読取りCYL下降完了
ANL
OUT @M450                ; BCR 読取りCYL下降指令
MPP
LD @M450                 ; BCR 読取りCYL下降指令
AND @T38                 ; ST BCR READER上下下降端
OR @M451                 ; BCR 読取りCYL下降完了
ANL
OUT @M451                ; BCR 読取りCYL下降完了
;____▼_BCR読取りCYL上昇
LD @M421                 ; 上治具 UNLOCK指令
MPS
LD @R700                 ; DOOR閉
ANB @M461                ; BCR 読取りCYL上昇完了
ANL
OUT @M460                ; BCR 読取りCYL上昇指令
MPP
LD @M460                 ; BCR 読取りCYL上昇指令
AND @T39                 ; ST BCR READER上下上昇端
OR @M461                 ; BCR 読取りCYL上昇完了
ANL
OUT @M461                ; BCR 読取りCYL上昇完了
;　□治具LOCK/UNLOCK
;　　上治具
LDP @R200                ; 上治具ﾛｯｸ/ｱﾝﾛｯｸSW
AND @T1                  ; 安全ｶﾊﾞｰ正常
AND<> @D34 K0            ; 上治具ID ｾﾝｻｰ状態
ANB @L0                  ; 有効状態
ANB @M415                ; 上治具 LOCK指令
AND @M304                ; 上治具位置決め LOCK OK
LD @M415                 ; 上治具 LOCK指令
ANB @M416                ; 上治具 UNLOCK指令
ORL
AND M50                  ; 運転準備
OUT @M415                ; 上治具 LOCK指令
LD @M415                 ; 上治具 LOCK指令
LD @R700                 ; DOOR閉
OR @M420                 ; 上治具 LOCK指令
ANL
OUT @M420                ; 上治具 LOCK指令
LDP @R200                ; 上治具ﾛｯｸ/ｱﾝﾛｯｸSW
AND @T1                  ; 安全ｶﾊﾞｰ正常
ANB @L0                  ; 有効状態
ANB @M416                ; 上治具 UNLOCK指令
AND @M306                ; 上治具位置決め UNLOCK OK
LD @M416                 ; 上治具 UNLOCK指令
ANB @M415                ; 上治具 LOCK指令
ORL
AND M50                  ; 運転準備
OUT @M416                ; 上治具 UNLOCK指令
LD @M416                 ; 上治具 UNLOCK指令
LD @R700                 ; DOOR閉
OR @M421                 ; 上治具 UNLOCK指令
ANL
OUT @M421                ; 上治具 UNLOCK指令
;　　下治具
LDP @R201                ; 下治具ﾛｯｸ/ｱﾝﾛｯｸSW
AND @T1                  ; 安全ｶﾊﾞｰ正常
AND<> @D35 K0            ; 下治具ID ｾﾝｻｰ状態
ANB @L0                  ; 有効状態
ANB @M417                ; 下治具 LOCK指令
AND @M300                ; 下治具位置決め 下降OK
LD @M417                 ; 下治具 LOCK指令
ANB @M418                ; 下治具UNLOCK指令
ORL
OUT @M417                ; 下治具 LOCK指令
LDP @R201                ; 下治具ﾛｯｸ/ｱﾝﾛｯｸSW
AND @T1                  ; 安全ｶﾊﾞｰ正常
ANB @L0                  ; 有効状態
ANB @M418                ; 下治具UNLOCK指令
AND @M302                ; 下治具位置決め 上昇OK
LD @M418                 ; 下治具UNLOCK指令
ANB @M417                ; 下治具 LOCK指令
ORL
OUT @M418                ; 下治具UNLOCK指令
;JIG_ID一致確認
LD @R200                 ; 上治具ﾛｯｸ/ｱﾝﾛｯｸSW
ANB @T1                  ; 安全ｶﾊﾞｰ正常
LD @R201                 ; 下治具ﾛｯｸ/ｱﾝﾛｯｸSW
ANB @T1                  ; 安全ｶﾊﾞｰ正常
ORL
OUT @M414                ; ｾｯﾄ不可ﾌﾞｻﾞｰ(ｴﾘｱｾﾝｻ検出中)
;<h1/>▽_装置状態・動作条件
;ﾕﾆｯﾄまとめ
LD @M70                  ; Ux-1 原点
AND @M230                ; Ux-3 原点
OUT @M480                ; Ux 原点
;□ 非常停止
LDB @M71                 ; Ux-1 全異常
ANB @M231                ; Ux-3 全異常
INV
OUT @M481                ; Ux 即停止異常
;□ 起動OFF
LDB M50                  ; 運転準備
OR T15                   ; 強制停止
OUT @M483                ; Ux 起動OFF
;□ 原点復帰
LD M82                   ; 原点復帰 開始指令
ANB M84                  ; 原点復帰 装置全原点確認
OUT @M484                ; Ux 原点復帰中
;□ 起動中
LDB @M74                 ; Ux-1 起動中
ANB @M234                ; Ux-3 Flash検査起動中
INV
OUT @M485                ; Ux 起動中
;□ ｻｲｸﾙ停止異常
LDB @M75                 ; Ux-1 ｻｲｸﾙ停止異常
ANB @M235                ; Ux-3 ｻｲｸﾙ停止異常
INV
LD @M486                 ; Ux ｻｲｸﾙ停止異常
AND M73                  ; 各工程起動指令
ORL
OUT @M486                ; Ux ｻｲｸﾙ停止異常
;□ 払出停止異常
LDB CR2003               ; 常時OFF
INV
OUT @M487                ; Ux 払出停止異常
;□ 警報補助
LDB B0F2                 ; 242)_ST1 Ionizer Ion level alarm
ANB B0F3                 ; 243)_ST1 Ionizer condition alarm
ANB B0F4                 ; 244)_ST1 Ionizer condition alarm
INV
OUT @M488                ; Ux 警報補助
;□ 機器準備確認
LDB CR2003               ; 常時OFF
OUT @M490                ; Ux 機器準備完了
;□ ｴﾗｰ発生　一時停止
LDB @M76                 ; Ux-1 ｴﾗｰ発生
ANB @M236                ; Ux-3 ｴﾗｰ発生
INV
OUT @M491                ; Ux ｴﾗｰ発生
;□ 動作中ﾕﾆｯﾄ無し
LD @M77                  ; Ux-1 動作無し
AND @M237                ; Ux-3 動作無し
OUT @M492                ; Ux 動作無し確認
;□ 払出しﾜｰｸ無し
LDB @M320                ; 下治具基板確認(ON=有 OFF=無)
TMR @14 K10
LD @T14
OUT @M493                ; Ux 基板無し
;□ ｽﾃｯﾌﾟ起動
LD M30                   ; 自動ﾓｰﾄﾞ
OR M31                   ; 手動ﾓｰﾄﾞ
AND @T1                  ; 安全ｶﾊﾞｰ正常
ANB M130                 ; 一時停止指令
ANB M60                  ; ｴﾗｰ発生
OUT @M479                ; Ux ｽﾃｯﾌﾟ動作
;<h1/>▽_自動回路
;<h1/>▼_UTx-1状態・動作条件(補助)
LD @R100                 ; ﾌｨｸｽﾁｬ基板受取下降確認1
AND @R101                ; ﾌｨｸｽﾁｬ基板受取下降確認2
LD= @D35 K0              ; 下治具ID ｾﾝｻｰ状態
AND @T45                 ; ﾌｨｸｽﾁｬ 無
ORL
AND @M380                ; RB_上昇位置(P1)
AND @T43                 ; 下治具基板受取 下降端
LDB @M320                ; 下治具基板確認(ON=有 OFF=無)
OR M73                   ; 各工程起動指令
ANL
AND= @D51 K0             ; ﾜｰｸ有無記憶
OUT @M70                 ; Ux-1 原点
;@M71は即停止異常
LDB B0EA                 ; 234)_ST1 上治具ID異常
ANB B0EB                 ; 235)_ST1 下治具ID異常
ANB B0EC                 ; 236)_ST1_基板検知異常
ANB B0E2                 ; 226)_ST1 基板検知異常
ANB B0E4                 ; 228)_ST1 上治具下降RBｱﾗｰﾑ
INV
OUT @M71                 ; Ux-1 全異常
LD @M70                  ; Ux-1 原点
ANB @M74                 ; Ux-1 起動中
AND @M479                ; Ux ｽﾃｯﾌﾟ動作
AND @L0                  ; 有効状態
AND @R008                ; ST BCR READER上下下降端
ANB @M409                ; ST無効予約(自動運転)
AND @M412                ; ST_ID保持ﾄﾘｶﾞ
ANB @R808                ; fromPC) ｽﾃｰｼﾞ無効切替要求(ﾗｲﾀ異
ANB @M495                ; Ux ｻｲｸﾙ停止完了
AND M123                 ; 安全扉正常
OUT @M72                 ; Ux-1 起動条件
LDB M50                  ; 運転準備
OR @M486                 ; Ux ｻｲｸﾙ停止異常
OR T15                   ; 強制停止
OUT @M73                 ; Ux-1 起動OFF
LD M73                   ; 各工程起動指令
AND @M72                 ; Ux-1 起動条件
OR @M74                  ; Ux-1 起動中
ANB @M73                 ; Ux-1 起動OFF
ANB @M63                 ; Ux-1 ｻｲｸﾙ終了
OUT @M74                 ; Ux-1 起動中
;UTxx-1 ｻｲｸﾙ停止異常
LDB B0E0                 ; 224)_ST1 下治具位置決ﾛｯｸ側CL異常
ANB B0E1                 ; 225)_ST1 上治具位置決ﾛｯｸ側CL異常
ANB B0E8                 ; 232)_RBC1 運転ﾓｰﾄﾞAUTO切替要求
ANB B0F0                 ; 240)_ST1 下治具位置決解側CL異常
ANB B0F1                 ; 241)_ST1 上治具位置決解側CL異常
INV
OUT @M75                 ; Ux-1 ｻｲｸﾙ停止異常
;UTxx-1 ｴﾗｰ発生まとめ
LDB B0E3                 ; 227)_ST1 基板受渡上下CLS異常
ANB B0E7                 ; 231)_ST1 基板投入不可
ANB B0E9                 ; 233)_ST1 基板浮き検出異常
ANB B0EF                 ; 239)_ST1 NG置き場ﾜｰｸ取出し要求
ANB B0F6                 ; 246)_ST1 BCR 上下下降ｾﾝｻ異常
ANB B0F7                 ; 247)_ST1 BCR 上下上昇ｾﾝｻ異常
LDB @D42.0               ; 基板除去要求
OR @M74                  ; Ux-1 起動中
ANL
ANB @D42.1               ; ROM書込み中
ANB @D42.2               ; 下治具ｺﾈｸﾀ挿入確認
ANB @D42.3               ; 治具をﾛｯｸしてください
INV
OUT @M76                 ; Ux-1 ｴﾗｰ発生
;UTxx-1 停止判定
LD= @D0 @D5              ; Ux-1 自動運転ｽﾃｯﾌﾟ  Ux-1 動作中判定
ORB @M74                 ; Ux-1 起動中
TMR @10 K20              ; U7-1動作無し
LD CR2002                ; 常時ON
MOV @D0 @D5              ; Ux-1 自動運転ｽﾃｯﾌﾟ  Ux-1 動作中判定
LD @T10                  ; U7-1動作無し
OUT @M77                 ; Ux-1 動作無し
;□
;□  UTxx-1 自動運転ステップ開始
;□
LD CR2002                ; 常時ON
FMOV K0 @M0 K4           ; Ux-1(S00)
LDB @M74                 ; Ux-1 起動中
MOV K0 @D0               ; Ux-1 自動運転ｽﾃｯﾌﾟ
@FMOV K0 @D50 K100       ; INDEX NO.
LD @M74                  ; Ux-1 起動中
MOV @D0 Z1               ; Ux-1 自動運転ｽﾃｯﾌﾟ
SET @M0:Z1               ; Ux-1(S00)
;<h1/>____▼_S000_CYCLE START
LD @M0                   ; Ux-1(S00)
MPS
LD M129                  ; 安全入力OK
AND @R102                ; ﾌｨｸｽﾁｬ基板確認(ON=有/OFF=無)
ANL
MPS
LD @R103                 ; ﾌｨｸｽﾁｬ基板浮き確認1
AND @R104                ; ﾌｨｸｽﾁｬ基板浮き確認2
ANL
MPS
AND @R203                ; ST書込み開始SW
DW K1 @D51               ; ﾜｰｸ有無記憶
CON
INC @D0                  ; Ux-1 自動運転ｽﾃｯﾌﾟ
MRD
TMR @26 K100             ; ﾜｰｸ投入要求時間
MPP
OUT @M433                ; START押し待ち
MPP
LDB @R103                ; ﾌｨｸｽﾁｬ基板浮き確認1
ORB @R104                ; ﾌｨｸｽﾁｬ基板浮き確認2
ANL
MOV K41 @D0              ; Ux-1 自動運転ｽﾃｯﾌﾟ
MRD
LD M36                   ; 払出ﾓｰﾄﾞ
AND @M493                ; Ux 基板無し
ANL
MOV K60 @D0              ; Ux-1 自動運転ｽﾃｯﾌﾟ
MPP
AND @M409                ; ST無効予約(自動運転)
MOV K63 @D0              ; Ux-1 自動運転ｽﾃｯﾌﾟ
;<h1/>____▼_S001_SW OFF 確認
LD @M1                   ; Ux-1(S01)投入完了
ANB @R203                ; ST書込み開始SW
INC @D0                  ; Ux-1 自動運転ｽﾃｯﾌﾟ
LD @M1                   ; Ux-1(S01)投入完了
OR @M434                 ; ST使用中
AND @M74                 ; Ux-1 起動中
ANB @M32                 ; Ux-1(S32) ﾜｰｸ除去確認
ANB @M57                 ; Ux-1(S57) ﾜｰｸ　NG置き場移動要求
OUT @M434                ; ST使用中
;　　ｺﾈｸﾀ挿入確認
LD @R105                 ; DL156-1 接続確認
AND @R106                ; DL156-2 接続確認
AND @R107                ; DL156-3 接続確認
OUT @M65                 ; DLｺﾈｸﾀ挿入OK
LD @M2                   ; Ux-1(S02)DLｺﾈｸﾀ挿入確認
MPS
AND @M65                 ; DLｺﾈｸﾀ挿入OK
INC @D0                  ; Ux-1 自動運転ｽﾃｯﾌﾟ
MPP
ANB @M65                 ; DLｺﾈｸﾀ挿入OK
MOV K45 @D0              ; Ux-1 自動運転ｽﾃｯﾌﾟ
LD @M45                  ; Ux-1(S45)ｺﾈｸﾀ挿入確認
AND @D42.2               ; 下治具ｺﾈｸﾀ挿入確認
INC @D0                  ; Ux-1 自動運転ｽﾃｯﾌﾟ
LD @M46                  ; Ux-1(S46)
ANB @D42.2               ; 下治具ｺﾈｸﾀ挿入確認
MOV K63 @D0              ; Ux-1 自動運転ｽﾃｯﾌﾟ
;　　ﾜｰｸ確認
LD @M3                   ; Ux-1(S03)
INC @D0                  ; Ux-1 自動運転ｽﾃｯﾌﾟ
LD @M4                   ; Ux-1(S04)
MPS
TMR @2 K3                ; 基板確認ﾀｲﾏ
MPP
AND @T2                  ; 基板確認ﾀｲﾏ
MPS
LD @M320                 ; 下治具基板確認(ON=有 OFF=無)
OR M35                   ; 空運転ﾓｰﾄﾞ
ANL
INC @D0                  ; Ux-1 自動運転ｽﾃｯﾌﾟ
MPP
LDB @M320                ; 下治具基板確認(ON=有 OFF=無)
ANB M35                  ; 空運転ﾓｰﾄﾞ
ANL
MOV K40 @D0              ; Ux-1 自動運転ｽﾃｯﾌﾟ
;____▼_S040_ﾜｰｸ検知異常(ﾜｰｸ受取異常は、即停止へ変更)
LD @M40                  ; Ux-1(S40)基板受取異常
AND B0E2                 ; 226)_ST1 基板検知異常
MOV K63 @D0              ; Ux-1 自動運転ｽﾃｯﾌﾟ
;    浮き確認
LD @M5                   ; Ux-1(S05)基板浮き確認
MPS
LD @R103                 ; ﾌｨｸｽﾁｬ基板浮き確認1
AND @R104                ; ﾌｨｸｽﾁｬ基板浮き確認2
OR M35                   ; 空運転ﾓｰﾄﾞ
ANL
MOV K8 @D0               ; Ux-1 自動運転ｽﾃｯﾌﾟ
MPP
LDB @R103                ; ﾌｨｸｽﾁｬ基板浮き確認1
ORB @R104                ; ﾌｨｸｽﾁｬ基板浮き確認2
ANB M35                  ; 空運転ﾓｰﾄﾞ
ANL
MOV K41 @D0              ; Ux-1 自動運転ｽﾃｯﾌﾟ
;____▼_S041_基板浮き検知
LD @M41                  ; Ux-1(S41)基板浮き異常
AND B0E9                 ; 233)_ST1 基板浮き検出異常
INC @D0                  ; Ux-1 自動運転ｽﾃｯﾌﾟ
LD @M42                  ; Ux-1(S42)
AND @M479                ; Ux ｽﾃｯﾌﾟ動作
ANB B0E9                 ; 233)_ST1 基板浮き検出異常
MOV K0 @D0               ; Ux-1 自動運転ｽﾃｯﾌﾟ
;<h1/>____▼_S008_BCR
LD @M8                   ; Ux-1(S08)BCR SUB 起動
AND @M80                 ; BCR SUB起動 
AND @M81                 ; BCR 完了
MPS
LD @M180                 ; 投入OK PCB
ANB @M181                ; 投入NG PCB
ANL
INC @D0                  ; Ux-1 自動運転ｽﾃｯﾌﾟ
MPP
LD @M181                 ; 投入NG PCB
ANB @M180                ; 投入OK PCB
ANL
MOV K63 @D0              ; Ux-1 自動運転ｽﾃｯﾌﾟ
LD @M9                   ; Ux-1(S09)
INC @D0                  ; Ux-1 自動運転ｽﾃｯﾌﾟ
LD @M9                   ; Ux-1(S09)
OR @M432                 ; 基板監視中ﾌﾗｸﾞ
ANB @M19                 ; Ux-1(S19)Flash書込開始
AND @M74                 ; Ux-1 起動中
OUT @M432                ; 基板監視中ﾌﾗｸﾞ
;<h1/>____▼_S010_ﾌﾗｯｼｭ書込み処理
;　　ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ下降
LD @M10                  ; Ux-1(S10)
AND @M373                ; RBC_位置決め起動条件
INC @D0                  ; Ux-1 自動運転ｽﾃｯﾌﾟ
LD @M11                  ; Ux-1(S11)
AND @M350                ; B/B下降Sub起動開始
AND @M351                ; B/B下降Sub起動完了
AND @M382                ; RB_下降位置(@D216)
INC @D0                  ; Ux-1 自動運転ｽﾃｯﾌﾟ
;	上治具下降完了
LD @M12                  ; Ux-1(S12)
AND @M382                ; RB_下降位置(@D216)
MOV K19 @D0              ; Ux-1 自動運転ｽﾃｯﾌﾟ
;<h1/>____▼_S019_ﾌﾗｯｼｭ書込み開始 →PC書込み
LD @M19                  ; Ux-1(S19)Flash書込開始
AND @M234                ; Ux-3 Flash検査起動中
INC @D0                  ; Ux-1 自動運転ｽﾃｯﾌﾟ
LD @M20                  ; Ux-1(S20)
ANB @M234                ; Ux-3 Flash検査起動中
MPS
ANB @M430                ; Flash書込みﾘﾄﾗｲﾌﾗｸﾞ
MOV K21 @D0              ; Ux-1 自動運転ｽﾃｯﾌﾟ
MPP
AND @M430                ; Flash書込みﾘﾄﾗｲﾌﾗｸﾞ
MOV K23 @D0              ; Ux-1 自動運転ｽﾃｯﾌﾟ
LD @M21                  ; Ux-1(S21)
@INC @D20                ; flash書込み回数
MPS
AND= @D53 K1             ; ﾌﾗｯｼｭ書込結果(1=OK_2=NG)
MOV K30 @D0              ; Ux-1 自動運転ｽﾃｯﾌﾟ
MPP
LD= @D53 K2              ; ﾌﾗｯｼｭ書込結果(1=OK_2=NG)
ANB @M400                ; 他ST NG処理中ﾌﾗｸﾞ
ANL
MOV K50 @D0              ; Ux-1 自動運転ｽﾃｯﾌﾟ
LD @M21                  ; Ux-1(S21)
AND= @D53 K2             ; ﾌﾗｯｼｭ書込結果(1=OK_2=NG)
ANB @M400                ; 他ST NG処理中ﾌﾗｸﾞ
OR @M431                 ; NG処理中ﾌﾗｸﾞ
AND @M74                 ; Ux-1 起動中
OUT @M431                ; NG処理中ﾌﾗｸﾞ
LDB M71                  ; 自動運転開始BZ
MOV K0 @D20              ; flash書込み回数
;ﾘﾄﾗｲ時に上昇時速度切替位置へ移動
LD @M23                  ; Ux-1(S23)
AND @M479                ; Ux ｽﾃｯﾌﾟ動作
AND @M373                ; RBC_位置決め起動条件
INC @D0                  ; Ux-1 自動運転ｽﾃｯﾌﾟ
MOV @D217 @D220          ; RB_上昇時速度切替位置  指令PosNo.
LD @M24                  ; Ux-1(S24)上昇時速度切替位置移動
AND @M370                ; RB_位置決め起動中
AND @M371                ; RB_位置決め起動完了
AND @M383                ; RB_上昇時速度切替位置(@D217)
INC @D0                  ; Ux-1 自動運転ｽﾃｯﾌﾟ
LD @M25                  ; Ux-1(S25)
MOV K10 @D0              ; Ux-1 自動運転ｽﾃｯﾌﾟ
LD @M25                  ; Ux-1(S25)
OR @M95                  ; ﾘﾄﾗｲ記憶
AND @M74                 ; Ux-1 起動中
OUT @M95                 ; ﾘﾄﾗｲ記憶
;<h1/>____▼_S030_書込みOK時 ﾜｰｸ除去要求
;上治具上昇指令
LD @M30                  ; Ux-1(S30)_
AND @M479                ; Ux ｽﾃｯﾌﾟ動作
AND @M373                ; RBC_位置決め起動条件
INC @D0                  ; Ux-1 自動運転ｽﾃｯﾌﾟ
LD @M31                  ; Ux-1(S31) 上治具上昇指令
AND @M360                ; B/B上昇Sub起動開始
AND @M361                ; B/B上昇Sub起動完了
AND @M380                ; RB_上昇位置(P1)
INC @D0                  ; Ux-1 自動運転ｽﾃｯﾌﾟ
LD @M32                  ; Ux-1(S32) ﾜｰｸ除去確認
MPS
LD @M479                 ; Ux ｽﾃｯﾌﾟ動作
ANB @R102                ; ﾌｨｸｽﾁｬ基板確認(ON=有/OFF=無)
AND @R103                ; ﾌｨｸｽﾁｬ基板浮き確認1
AND @R104                ; ﾌｨｸｽﾁｬ基板浮き確認2
ANL
DW K0 @D51               ; ﾜｰｸ有無記憶
CON
INC @D0                  ; Ux-1 自動運転ｽﾃｯﾌﾟ
MPP
TMR @25 K100             ; ﾜｰｸ取出し要求時間
LD @M33                  ; Ux-1(S33)
MOV K63 @D0              ; Ux-1 自動運転ｽﾃｯﾌﾟ
;<h1/>____▼_S050_書込みNG時 ﾜｰｸ除去要求
;	NG置場ﾜｰｸ有無確認
LD @M50                  ; Ux-1(S50) 
MPS
AND T90                  ; NG置き場ﾜｰｸ無時間
MOV K53 @D0              ; Ux-1 自動運転ｽﾃｯﾌﾟ
MPP
AND T91                  ; NG置き場ﾜｰｸ有時間
MOV K51 @D0              ; Ux-1 自動運転ｽﾃｯﾌﾟ
;		NG置き場ﾜｰｸ取出し要求
LD @M51                  ; Ux-1(S51)NG置き場ﾜｰｸ取出し要求
AND B0EF                 ; 239)_ST1 NG置き場ﾜｰｸ取出し要求
INC @D0                  ; Ux-1 自動運転ｽﾃｯﾌﾟ
LD @M52                  ; Ux-1(S52)
ANB B0EF                 ; 239)_ST1 NG置き場ﾜｰｸ取出し要求
AND T90                  ; NG置き場ﾜｰｸ無時間
INC @D0                  ; Ux-1 自動運転ｽﾃｯﾌﾟ
;	書込みNG発報
LD @M53                  ; Ux-1(S53) 書込みNG
AND B0F8                 ; 248)_ST1 書込みNG
INC @D0                  ; Ux-1 自動運転ｽﾃｯﾌﾟ
LD @M54                  ; Ux-1(S54) NGSW待ち
AND @R204                ; NG品 RESET SW
INC @D0                  ; Ux-1 自動運転ｽﾃｯﾌﾟ
;上治具上昇指令
LD @M55                  ; Ux-1(S55)
AND @M479                ; Ux ｽﾃｯﾌﾟ動作
AND @M373                ; RBC_位置決め起動条件
INC @D0                  ; Ux-1 自動運転ｽﾃｯﾌﾟ
LD @M55                  ; Ux-1(S55)
OR @M67                  ; ﾜｰｸNGﾌﾗｸﾞ
ANB @M59                 ; Ux-1(S59)
AND @M74                 ; Ux-1 起動中
OUT @M67                 ; ﾜｰｸNGﾌﾗｸﾞ
LD @M56                  ; Ux-1(S56) 上治具上昇指令
AND @M360                ; B/B上昇Sub起動開始
AND @M361                ; B/B上昇Sub起動完了
AND @M380                ; RB_上昇位置(P1)
INC @D0                  ; Ux-1 自動運転ｽﾃｯﾌﾟ
;		NG置き場へﾜｰｸ移動要求
LD @M57                  ; Ux-1(S57) ﾜｰｸ　NG置き場移動要求
AND B0F5                 ; 245)_ST1ﾜｰｸをNG置き場へ移動要求
INC @D0                  ; Ux-1 自動運転ｽﾃｯﾌﾟ
LD @M58                  ; Ux-1(S58)
AND @M479                ; Ux ｽﾃｯﾌﾟ動作
ANB B0F5                 ; 245)_ST1ﾜｰｸをNG置き場へ移動要求
ANB @R102                ; ﾌｨｸｽﾁｬ基板確認(ON=有/OFF=無)
AND @R103                ; ﾌｨｸｽﾁｬ基板浮き確認1
AND @R104                ; ﾌｨｸｽﾁｬ基板浮き確認2
DW K0 @D51               ; ﾜｰｸ有無記憶
CON
INC @D0                  ; Ux-1 自動運転ｽﾃｯﾌﾟ
LD @M59                  ; Ux-1(S59)
MOV K63 @D0              ; Ux-1 自動運転ｽﾃｯﾌﾟ
;____▼_S60_Cycle Stop 
LD @M60                  ; Ux-1(S60) cycle stop flg on
LDB M36                  ; 払出ﾓｰﾄﾞ
OR @M495                 ; Ux ｻｲｸﾙ停止完了
ANL
MOV K63 @D0              ; Ux-1 自動運転ｽﾃｯﾌﾟ
LD @M60                  ; Ux-1(S60) cycle stop flg on
AND @M493                ; Ux 基板無し
LD @M410                 ; ST無効中
ANB @L0                  ; 有効状態
ANB @M485                ; Ux 起動中
ORL
OR @M495                 ; Ux ｻｲｸﾙ停止完了
AND M36                  ; 払出ﾓｰﾄﾞ
OR @M486                 ; Ux ｻｲｸﾙ停止異常
OUT @M495                ; Ux ｻｲｸﾙ停止完了
;<h1/>▼_UTx-2 BCR
LD @M8                   ; Ux-1(S08)BCR SUB 起動
OUT @M80                 ; BCR SUB起動 
LD @M179                 ; S29_STEP END
OUT @M81                 ; BCR 完了
;____▼_STEP開始
LD CR2002                ; 常時ON
ZRES @M150 @M179         ; S00_FLG OFF確認  S29_STEP END
LDB @M80                 ; BCR SUB起動 
MOV K0 @D3               ; BCR STEP
LD @M80                  ; BCR SUB起動 
MOV @D3 Z1               ; BCR STEP
SET @M150:Z1             ; S00_FLG OFF確認
LD @M150                 ; S00_FLG OFF確認
ANB @M180                ; 投入OK PCB
INC @D3                  ; BCR STEP
LD @M151                 ; S01_BCR要求
MPS
ANB M3                   ; OFFLINE_MODE
MPS
OUT @R901                ; toPC) BCR要求
MPP
AND @R809                ; fromPC) BCR完了
INC @D3                  ; BCR STEP
MPP
AND M3                   ; OFFLINE_MODE
INC @D3                  ; BCR STEP
LD @M152                 ; S02_
MPS
ANB M3                   ; OFFLINE_MODE
MPS
ANB @R810                ; fromPC) 基板投入不可(PCB ERROR)
MOV K3 @D3               ; BCR STEP
MPP
AND @R810                ; fromPC) 基板投入不可(PCB ERROR)
MOV K10 @D3              ; BCR STEP
MPP
AND M3                   ; OFFLINE_MODE
MOV K3 @D3               ; BCR STEP
;____▼_投入OK / READ OK
LD @M153                 ; S03_BCR投入OK
OR @M180                 ; 投入OK PCB
AND @M485                ; Ux 起動中
ANB @M150                ; S00_FLG OFF確認
OUT @M180                ; 投入OK PCB
LD @M153                 ; S03_BCR投入OK
AND @M180                ; 投入OK PCB
INC @D3                  ; BCR STEP
LD @M154                 ; S04_STEP END
MOV K29 @D3              ; BCR STEP
;____▼_投入NG / READ NG
LD @M160                 ; S10_BCR READ NG
OR @M181                 ; 投入NG PCB
AND @M485                ; Ux 起動中
ANB @M150                ; S00_FLG OFF確認
OUT @M181                ; 投入NG PCB
LD @M160                 ; S10_BCR READ NG
AND @M181                ; 投入NG PCB
INC @D3                  ; BCR STEP
LD @M161                 ; S11_PCB投入異常
AND B0E7                 ; 231)_ST1 基板投入不可
INC @D3                  ; BCR STEP
LD @M162                 ; S12_
ANB B0E7                 ; 231)_ST1 基板投入不可
MOV K29 @D3              ; BCR STEP
;<h1/>▼_UTx-3FLASH書込み_状態・動作条件(補助)
LDB @R800                ; fromPC) ｽﾃｰｼﾞ状態(ON=書込み中)
LD @R300                 ; ﾌｨｸｽﾁｬ 電源ON確認1
ORB @R1200               ; ﾌｨｸｽﾁｬ 電源ON1
ANL
LD @R301                 ; ﾌｨｸｽﾁｬ 電源ON確認2
ORB @R1201               ; ﾌｨｸｽﾁｬ 電源ON2
ANL
LD @R302                 ; ﾌｨｸｽﾁｬ 電源ON確認3
ORB @R1202               ; ﾌｨｸｽﾁｬ 電源ON3
ANL
LD @R303                 ; ﾌｨｸｽﾁｬ 電源ON確認4
ORB @R1203               ; ﾌｨｸｽﾁｬ 電源ON4
ANL
OUT @M230                ; Ux-3 原点
LDB B0E5                 ; 229)_ST1 基板1CP Trip異常
ANB B0E6                 ; 230)_ST1 基板2CP Trip異常
ANB B0ED                 ; 237)_ST1_基板3CP Trip異常
ANB B0EE                 ; 238)_ST1_基板4CP Trip異常
INV
OUT @M231                ; Ux-3 全異常
LD @M230                 ; Ux-3 原点
ANB @M234                ; Ux-3 Flash検査起動中
AND @M479                ; Ux ｽﾃｯﾌﾟ動作
OUT @M232                ; Ux-3 起動条件
LDB M50                  ; 運転準備
OR @M486                 ; Ux ｻｲｸﾙ停止異常
OR T15                   ; 強制停止
OUT @M233                ; Ux-3 起動OFF
LD @M19                  ; Ux-1(S19)Flash書込開始
AND @M232                ; Ux-3 起動条件
OR @M234                 ; Ux-3 Flash検査起動中
ANB @M233                ; Ux-3 起動OFF
ANB @M131                ; Ux-3 ｻｲｸﾙ終了
OUT @M234                ; Ux-3 Flash検査起動中
LD CR2002                ; 常時ON
DW K0 @D49               ; ST状態
LD @M234                 ; Ux-3 Flash検査起動中
DW K1 @D49               ; ST状態
LD= @D53 K1              ; ﾌﾗｯｼｭ書込結果(1=OK_2=NG)
DW K2 @D49               ; ST状態
LD= @D53 K2              ; ﾌﾗｯｼｭ書込結果(1=OK_2=NG)
DW K3 @D49               ; ST状態
;ﾕﾆｯﾄ1-3ｻｲｸﾙ停止異常
LD CR2002                ; 常時ON
INV
OUT @M235                ; Ux-3 ｻｲｸﾙ停止異常
;ﾕﾆｯﾄ1-3ｴﾗｰ発生まとめ
LDB CR2003               ; 常時OFF
INV
OUT @M236                ; Ux-3 ｴﾗｰ発生
;ﾕﾆｯﾄ1-3停止判定
LD= @D2 @D7              ; Ux-3 自動運転ｽﾃｯﾌﾟ  Ux-3 動作中判定
TMR @12 K20              ; U7-3動作無し
LD CR2002                ; 常時ON
MOV @D2 @D7              ; Ux-3 自動運転ｽﾃｯﾌﾟ  Ux-3 動作中判定
LD @T12                  ; U7-3動作無し
ORB @M234                ; Ux-3 Flash検査起動中
OUT @M237                ; Ux-3 動作無し
;□  ﾕﾆｯﾄ1-3自動運転ステップ開始
LD CR2002                ; 常時ON
FMOV K0 @M100 K2         ; Ux-3(S00)
LDB @M234                ; Ux-3 Flash検査起動中
MOV K0 @D2               ; Ux-3 自動運転ｽﾃｯﾌﾟ
LD @M234                 ; Ux-3 Flash検査起動中
MOV @D2 Z1               ; Ux-3 自動運転ｽﾃｯﾌﾟ
SET @M100:Z1             ; Ux-3(S00)
;検査開始
LD @M100                 ; Ux-3(S00)
INC @D2                  ; Ux-3 自動運転ｽﾃｯﾌﾟ
RES @M430                ; Flash書込みﾘﾄﾗｲﾌﾗｸﾞ
LD @M101                 ; Ux-3(S01)
MPS
ANB M3                   ; OFFLINE_MODE
INC @D2                  ; Ux-3 自動運転ｽﾃｯﾌﾟ
MPP
AND M3                   ; OFFLINE_MODE
MPS
AND @T24                 ; 書込時間
MOV K7 @D2               ; Ux-3 自動運転ｽﾃｯﾌﾟ
MPP
TMR @24 D10              ; 書込時間  Offline Write time
;　　ｲﾝﾃﾞｯｸｽNOｾｯﾄ
LD @M102                 ; Ux-3(S02)
INC @D2                  ; Ux-3 自動運転ｽﾃｯﾌﾟ
LD @M103                 ; Ux-3(S03)
INC @D2                  ; Ux-3 自動運転ｽﾃｯﾌﾟ
LD @M104                 ; Ux-3(S04)
INC @D2                  ; Ux-3 自動運転ｽﾃｯﾌﾟ
;　　書込み開始ON　→　書込み状態ON
LD @M105                 ; Ux-3(S05)PCへFlash書込要求
MPS
LD @R900                 ; toPC) 書込み開始要求
AND @R800                ; fromPC) ｽﾃｰｼﾞ状態(ON=書込み中)
ANB @R801                ; fromPC) 書込み結果(ON=OK)
ANL
INC @D2                  ; Ux-3 自動運転ｽﾃｯﾌﾟ
MPP
OUT @R900                ; toPC) 書込み開始要求
;　　書込み開始OFF　→　書込み完了待ち
LD @M106                 ; Ux-3(S06)
ANB @R800                ; fromPC) ｽﾃｰｼﾞ状態(ON=書込み中)
MPS
ANB @R802                ; fromPC) ﾘﾄﾗｲ要求
INC @D2                  ; Ux-3 自動運転ｽﾃｯﾌﾟ
MPP
AND @R802                ; fromPC) ﾘﾄﾗｲ要求
MOV K10 @D2              ; Ux-3 自動運転ｽﾃｯﾌﾟ
SET @M430                ; Flash書込みﾘﾄﾗｲﾌﾗｸﾞ
LD @M107                 ; Ux-3(S07)
INC @D2                  ; Ux-3 自動運転ｽﾃｯﾌﾟ
MPS
LDB M3                   ; OFFLINE_MODE
AND @R801                ; fromPC) 書込み結果(ON=OK)
LD M3                    ; OFFLINE_MODE
AND B100F                ; OFFLINE時FLASH OK/NG選択(1:OK)
ORL
ANL
MOV K1 @D53              ; ﾌﾗｯｼｭ書込結果(1=OK_2=NG)
MPP
LDB M3                   ; OFFLINE_MODE
ANB @R801                ; fromPC) 書込み結果(ON=OK)
LD M3                    ; OFFLINE_MODE
ANB B100F                ; OFFLINE時FLASH OK/NG選択(1:OK)
ORL
ANL
MOV K2 @D53              ; ﾌﾗｯｼｭ書込結果(1=OK_2=NG)
LD @M108                 ; Ux-3(S08)
INC @D2                  ; Ux-3 自動運転ｽﾃｯﾌﾟ
LD @M109                 ; Ux-3(S09)
INC @D2                  ; Ux-3 自動運転ｽﾃｯﾌﾟ
LD @M110                 ; Ux-3(S10)
MOV K31 @D2              ; Ux-3 自動運転ｽﾃｯﾌﾟ
;<h1/>▽_原点復帰
LD CR2002                ; 常時ON
FMOV K0 @M250 K3         ; Ux-ORG(S00)
LDB @M484                ; Ux 原点復帰中
MOV K0 @D10              ; Ux 原点復帰ｽﾃｯﾌﾟ
LD @M484                 ; Ux 原点復帰中
MOV @D10 Z1              ; Ux 原点復帰ｽﾃｯﾌﾟ
SET @M250:Z1             ; Ux-ORG(S00)
;原点復帰ｻｲｸﾙ監視
LD @M484                 ; Ux 原点復帰中
ANB @M297                ; Ux-ORG STEP END
TMR @0 K200              ; ORG TIMEOUT
;原点復帰ステップ開始
LD @M250                 ; Ux-ORG(S00)
INC @D10                 ; Ux 原点復帰ｽﾃｯﾌﾟ
LD @M251                 ; Ux-ORG(S01)
INC @D10                 ; Ux 原点復帰ｽﾃｯﾌﾟ
LD @M252                 ; Ux-ORG(S02)
INC @D10                 ; Ux 原点復帰ｽﾃｯﾌﾟ
;	上治具上昇
LD @M253                 ; Ux-ORG(S03)上治具上昇指令
AND @M373                ; RBC_位置決め起動条件
MOV K1 @D220             ; 指令PosNo.
INC @D10                 ; Ux 原点復帰ｽﾃｯﾌﾟ
LD @M254                 ; Ux-ORG(S04) B/B上昇指令
AND @M370                ; RB_位置決め起動中
AND @M371                ; RB_位置決め起動完了
AND @M380                ; RB_上昇位置(P1)
INC @D10                 ; Ux 原点復帰ｽﾃｯﾌﾟ
LD @M255                 ; Ux-ORG(S05)
MPS
LD @M403                 ; 下治具 固定状態
OR CR2002                ; 常時ON
ANL
MOV K7 @D10              ; Ux 原点復帰ｽﾃｯﾌﾟ
MPP
LDB @M403                ; 下治具 固定状態
ANB CR2002               ; 常時ON
ANL
MOV K10 @D10             ; Ux 原点復帰ｽﾃｯﾌﾟ
;　　ﾜｰｸ有無確認
LD @M257                 ; Ux-ORG(S07)
MPS
ANB @M320                ; 下治具基板確認(ON=有 OFF=無)
MOV K10 @D10             ; Ux 原点復帰ｽﾃｯﾌﾟ
MPP
AND @M320                ; 下治具基板確認(ON=有 OFF=無)
MOV K8 @D10              ; Ux 原点復帰ｽﾃｯﾌﾟ
;　　ﾜｰｸ除去要求
LD @M258                 ; Ux-ORG(S08)基板除去要求
AND @D42.0               ; 基板除去要求
INC @D10                 ; Ux 原点復帰ｽﾃｯﾌﾟ
LD @M259                 ; Ux-ORG(S09)
ANB @D42.0               ; 基板除去要求
MOV K47 @D10             ; Ux 原点復帰ｽﾃｯﾌﾟ
;　ﾜｰｸ無し
LD @M260                 ; Ux-ORG(S10)
INC @D10                 ; Ux 原点復帰ｽﾃｯﾌﾟ
LD @M261                 ; Ux-ORG(S11)
INC @D10                 ; Ux 原点復帰ｽﾃｯﾌﾟ
LD @M262                 ; Ux-ORG(S12)
INC @D10                 ; Ux 原点復帰ｽﾃｯﾌﾟ
LD @M263                 ; Ux-ORG(S13)
INC @D10                 ; Ux 原点復帰ｽﾃｯﾌﾟ
LD @M264                 ; Ux-ORG(S14)
INC @D10                 ; Ux 原点復帰ｽﾃｯﾌﾟ
LD @M265                 ; Ux-ORG(S15)
MPS
AND @M480                ; Ux 原点
@MOV K46 @D10            ; Ux 原点復帰ｽﾃｯﾌﾟ
MPP
@FMOV K0 @D50 K100       ; INDEX NO.
LD @M296                 ; Ux-ORG(S46)
@MOV K47 @D10            ; Ux 原点復帰ｽﾃｯﾌﾟ
;<h1/>▽_手動
LD M31                   ; 手動ﾓｰﾄﾞ
LD M30                   ; 自動ﾓｰﾄﾞ
ANB @L0                  ; 有効状態
ORL
AND M32                  ; ﾒｲﾝ手動操作可能条件
ANB @M485                ; Ux 起動中
ANB @M484                ; Ux 原点復帰中
MC
;ﾌｨｸｽﾁｬｰ位置決め上下
LD M129                  ; 安全入力OK
AND<> @D35 K0            ; 下治具ID ｾﾝｻｰ状態
OR M37                   ; ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
OUT @M300                ; 下治具位置決め 下降OK
LDP B2047                ; F8 Handy Function SW
AND @R400                ; M)下治具位置決め上下 下降SW
AND @M300                ; 下治具位置決め 下降OK
LD @M301                 ; 下治具位置決め 下降指令
ANB @M303                ; 下治具位置決め 上昇指令
ORL
OUT @M301                ; 下治具位置決め 下降指令
LD @M380                 ; RB_上昇位置(P1)
OR M37                   ; ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
OUT @M302                ; 下治具位置決め 上昇OK
LDP B2047                ; F8 Handy Function SW
AND @R401                ; M)下治具位置決め上下 上昇SW
AND @M302                ; 下治具位置決め 上昇OK
LD @M303                 ; 下治具位置決め 上昇指令
ANB @M301                ; 下治具位置決め 下降指令
ORL
OUT @M303                ; 下治具位置決め 上昇指令
;ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め上下
LD M129                  ; 安全入力OK
AND<> @D34 K0            ; 上治具ID ｾﾝｻｰ状態
OR M37                   ; ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
OUT @M304                ; 上治具位置決め LOCK OK
LDP B2047                ; F8 Handy Function SW
AND @R402                ; M)上治具位置決め 上昇SW
AND @M304                ; 上治具位置決め LOCK OK
LD @M305                 ; 上治具位置決め LOCK指令
ANB @M307                ; 上治具位置決め UNLOCK指令
ORL
OUT @M305                ; 上治具位置決め LOCK指令
LD @M380                 ; RB_上昇位置(P1)
OR<> @D34 K0             ; 上治具ID ｾﾝｻｰ状態
OR M37                   ; ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
OUT @M306                ; 上治具位置決め UNLOCK OK
LDP B2047                ; F8 Handy Function SW
AND @R403                ; M)上治具位置決め 下降SW
AND @M306                ; 上治具位置決め UNLOCK OK
LD @M307                 ; 上治具位置決め UNLOCK指令
ANB @M305                ; 上治具位置決め LOCK指令
ORL
OUT @M307                ; 上治具位置決め UNLOCK指令
;ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上下
LD M129                  ; 安全入力OK
AND @T43                 ; 下治具基板受取 下降端
LD @M403                 ; 下治具 固定状態
LD @R103                 ; ﾌｨｸｽﾁｬ基板浮き確認1
AND @R104                ; ﾌｨｸｽﾁｬ基板浮き確認2
LD>=.L @D202 +23000      ; RB_現在位置座標L
AND @D200.10             ; RBC ST上下 原点復帰完了 HEND
ORL
ANL
OR @T45                  ; ﾌｨｸｽﾁｬ 無
ANL
AND @M373                ; RBC_位置決め起動条件
ANB @M341                ; 上治具 上昇指令
AND<> @D30 K0            ; 上治具ID
OUT @M325                ; 上治具 下降OK
;  押している間のみ下がるMODE
LDP B2047                ; F8 Handy Function SW
ORP @R601                ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ下降SW
OR @M328                 ; 上治具 下降ﾓｰﾒﾝﾀﾘ記憶
LD @R404                 ; M)上治具下降SW(MNU)
AND B2047                ; F8 Handy Function SW
LD @R601                 ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ下降SW
AND M124                 ; ｴﾘｱｾﾝｻ正常
ORL
ANL
OUT @M328                ; 上治具 下降ﾓｰﾒﾝﾀﾘ記憶
LD @M328                 ; 上治具 下降ﾓｰﾒﾝﾀﾘ記憶
AND @M326                ; 上治具 下降指令
OR @M329                 ; 上治具 下降ﾓｰﾒﾝﾀﾘ指令ON
ANB @M334                ; 上治具 下降完了
ANB @M327                ; 上治具 下降完了
OUT @M329                ; 上治具 下降ﾓｰﾒﾝﾀﾘ指令ON
LD @M329                 ; 上治具 下降ﾓｰﾒﾝﾀﾘ指令ON
LDB @M328                ; 上治具 下降ﾓｰﾒﾝﾀﾘ記憶
OR @M330                 ; 上治具 下降ﾓｰﾒﾝﾀﾘ指令OFF
ANL
OUT @M330                ; 上治具 下降ﾓｰﾒﾝﾀﾘ指令OFF
LD @M330                 ; 上治具 下降ﾓｰﾒﾝﾀﾘ指令OFF
LDB @M326                ; 上治具 下降指令
ANB @M350                ; B/B下降Sub起動開始
ANB @M351                ; B/B下降Sub起動完了
ANB @M370                ; RB_位置決め起動中
ANB @M371                ; RB_位置決め起動完了
OR @M331                 ; 上治具 下降指令OFF確認&STOP入力
ANL
OUT @M331                ; 上治具 下降指令OFF確認&STOP入力
LD @M331                 ; 上治具 下降指令OFF確認&STOP入力
LDB @D200.6              ; RBC ST上下 移動中信号 MOVE
OR @M332                 ; 上治具 下降指令STOP確認&移動量ｷｬ
ANL
OUT @M332                ; 上治具 下降指令STOP確認&移動量ｷｬ
LD @M332                 ; 上治具 下降指令STOP確認&移動量ｷｬ
LD @D210.14              ; RBC ST上下 ﾘｾｯﾄ RES
OR @M333                 ; 上治具 下降移動量ｷｬﾝｾﾙ完了
ANL
OUT @M333                ; 上治具 下降移動量ｷｬﾝｾﾙ完了
TMH @16 K3               ; RSET時間
LD @T16                  ; RSET時間
OUT @M334                ; 上治具 下降完了
;  ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ下降
LDP @M328                ; 上治具 下降ﾓｰﾒﾝﾀﾘ記憶
LDP B2047                ; F8 Handy Function SW
AND @R412                ; M)上治具下降SW(ALT)
ORL
ANB @R405                ; M)上治具上昇SW
AND @M325                ; 上治具 下降OK
ANB @M326                ; 上治具 下降指令
LD @M326                 ; 上治具 下降指令
ANB @M327                ; 上治具 下降完了
ORL
ANB @M330                ; 上治具 下降ﾓｰﾒﾝﾀﾘ指令OFF
OUT @M326                ; 上治具 下降指令
LD @M326                 ; 上治具 下降指令
LD @M350                 ; B/B下降Sub起動開始
AND @M351                ; B/B下降Sub起動完了
AND @M382                ; RB_下降位置(@D216)
OR @M327                 ; 上治具 下降完了
ANL
OUT @M327                ; 上治具 下降完了
;	ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上昇
LD M129                  ; 安全入力OK
ANB @R800                ; fromPC) ｽﾃｰｼﾞ状態(ON=書込み中)
ANB @M326                ; 上治具 下降指令
AND @M373                ; RBC_位置決め起動条件
ANB @M380                ; RB_上昇位置(P1)
OUT @M340                ; 上治具 上昇OK
;  押している間のみ下がるMODE
LDP B2047                ; F8 Handy Function SW
ORP @R600                ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上昇SW
OR @M390                 ; 上治具 上昇ﾓｰﾒﾝﾀﾘ記憶
LD @R405                 ; M)上治具上昇SW
AND B2047                ; F8 Handy Function SW
LD @R600                 ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上昇SW
AND M124                 ; ｴﾘｱｾﾝｻ正常
ORL
ANL
OUT @M390                ; 上治具 上昇ﾓｰﾒﾝﾀﾘ記憶
LD @M390                 ; 上治具 上昇ﾓｰﾒﾝﾀﾘ記憶
AND @M341                ; 上治具 上昇指令
OR @M391                 ; 上治具 上昇ﾓｰﾒﾝﾀﾘ指令ON
ANB @M396                ; 上治具 上昇完了
OUT @M391                ; 上治具 上昇ﾓｰﾒﾝﾀﾘ指令ON
LD @M391                 ; 上治具 上昇ﾓｰﾒﾝﾀﾘ指令ON
LDB @M390                ; 上治具 上昇ﾓｰﾒﾝﾀﾘ記憶
OR @M392                 ; 上治具 上昇ﾓｰﾒﾝﾀﾘ指令OFF
ANL
OUT @M392                ; 上治具 上昇ﾓｰﾒﾝﾀﾘ指令OFF
LD @M392                 ; 上治具 上昇ﾓｰﾒﾝﾀﾘ指令OFF
LDB @M341                ; 上治具 上昇指令
ANB @M360                ; B/B上昇Sub起動開始
ANB @M361                ; B/B上昇Sub起動完了
ANB @M370                ; RB_位置決め起動中
ANB @M371                ; RB_位置決め起動完了
OR @M393                 ; 上治具 上昇指令OFF確認&STOP入力
ANL
OUT @M393                ; 上治具 上昇指令OFF確認&STOP入力
LD @M393                 ; 上治具 上昇指令OFF確認&STOP入力
LDB @D200.6              ; RBC ST上下 移動中信号 MOVE
OR @M394                 ; 上治具 上昇指令STOP確認&移動量ｷｬ
ANL
OUT @M394                ; 上治具 上昇指令STOP確認&移動量ｷｬ
LD @M394                 ; 上治具 上昇指令STOP確認&移動量ｷｬ
LD @D210.14              ; RBC ST上下 ﾘｾｯﾄ RES
OR @M395                 ; 上治具 上昇移動量ｷｬﾝｾﾙ完了
ANL
OUT @M395                ; 上治具 上昇移動量ｷｬﾝｾﾙ完了
TMH @18 K3               ; RSET時間
LD @T18                  ; RSET時間
OUT @M396                ; 上治具 上昇完了
LD @M390                 ; 上治具 上昇ﾓｰﾒﾝﾀﾘ記憶
ANB @R404                ; M)上治具下降SW(MNU)
ANB @R412                ; M)上治具下降SW(ALT)
AND @M340                ; 上治具 上昇OK
ANB @M341                ; 上治具 上昇指令
LD @M341                 ; 上治具 上昇指令
ANB @M342                ; 上治具 上昇完了
ORL
ANB @M392                ; 上治具 上昇ﾓｰﾒﾝﾀﾘ指令OFF
OUT @M341                ; 上治具 上昇指令
LD @M341                 ; 上治具 上昇指令
LD @M360                 ; B/B上昇Sub起動開始
AND @M361                ; B/B上昇Sub起動完了
AND @M380                ; RB_上昇位置(P1)
OR @M342                 ; 上治具 上昇完了
ANL
OUT @M342                ; 上治具 上昇完了
;ﾌｨｸｽﾁｬ電源
LDP B2047                ; F8 Handy Function SW
AND @R408                ; M)IGP1 Power ON SW
OR @M316                 ; IGP1 Power_ON
ANB @R409                ; M)IGP1 Power OFF SW
OUT @M316                ; IGP1 Power_ON
LD @R300                 ; ﾌｨｸｽﾁｬ 電源ON確認1
LD @R1200                ; ﾌｨｸｽﾁｬ 電源ON1
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
ORL
OUT @R1308               ; IGP1 Power ON PL
LDB @R300                ; ﾌｨｸｽﾁｬ 電源ON確認1
ORB @R1200               ; ﾌｨｸｽﾁｬ 電源ON1
OUT @R1309               ; IGP1 Power OFF PL
LDP B2047                ; F8 Handy Function SW
AND @R410                ; M)IGP2 Power ON SW
OR @M317                 ; IGP2 Power_ON
ANB @R411                ; M)IGP2 Power Off SW
OUT @M317                ; IGP2 Power_ON
LD @R1201                ; ﾌｨｸｽﾁｬ 電源ON2
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR @R301                 ; ﾌｨｸｽﾁｬ 電源ON確認2
OUT @R1310               ; IGP2 Power ON PL
LDB @R301                ; ﾌｨｸｽﾁｬ 電源ON確認2
ORB @R1201               ; ﾌｨｸｽﾁｬ 電源ON2
OUT @R1311               ; IGP2 Power OFF PL
LDP B2047                ; F8 Handy Function SW
AND @R413                ; M)IGP3 Power ON SW
OR @M321                 ; IGP3 Power_ON
ANB @R414                ; M)IGP3 Power OFF SW
OUT @M321                ; IGP3 Power_ON
LD @R1202                ; ﾌｨｸｽﾁｬ 電源ON3
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR @R302                 ; ﾌｨｸｽﾁｬ 電源ON確認3
OUT @R1405               ; IGP3 Power ON PL
LDB @R302                ; ﾌｨｸｽﾁｬ 電源ON確認3
ORB @R1202               ; ﾌｨｸｽﾁｬ 電源ON3
OUT @R1406               ; IGP3 Power OFF PL
LDP B2047                ; F8 Handy Function SW
AND @R415                ; M)IGP4 Power ON SW
OR @M322                 ; IGP4 Power_ON
ANB @R500                ; M)IGP4 Power Off SW
OUT @M322                ; IGP4 Power_ON
LD @R1203                ; ﾌｨｸｽﾁｬ 電源ON4
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR @R303                 ; ﾌｨｸｽﾁｬ 電源ON確認4
OUT @R1407               ; IGP4 Power ON PL
LDB @R303                ; ﾌｨｸｽﾁｬ 電源ON確認4
ORB @R1203               ; ﾌｨｸｽﾁｬ 電源ON4
OUT @R1408               ; IGP4 Power OFF PL
MCR
;<h1/>□_ｻﾌﾞﾙｰﾁﾝ
;<h1/>__ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ下降Sub
LDB @M326                ; 上治具 下降指令
ANB @M11                 ; Ux-1(S11)
INV
OUT @M350                ; B/B下降Sub起動開始
LD @M357                 ; B/B下降Sub_SUB起動OFF確認
OUT @M351                ; B/B下降Sub起動完了
LD @M350                 ; B/B下降Sub起動開始
MPS
@MOV @D215 @D220         ; RB_下降時速度切替位置  指令PosNo.
MPP
LD @M373                 ; RBC_位置決め起動条件
OR @M352                 ; B/B下降Sub_下降時速度切替位置(@D
ANL
OUT @M352                ; B/B下降Sub_下降時速度切替位置(@D
LD @M352                 ; B/B下降Sub_下降時速度切替位置(@D
LD @M370                 ; RB_位置決め起動中
AND @M371                ; RB_位置決め起動完了
AND @M381                ; RB_下降時速度切替位置(@D215)
OR @M353                 ; B/B下降Sub_下降時速度切替位置(@D
ANL
OUT @M353                ; B/B下降Sub_下降時速度切替位置(@D
LD @M353                 ; B/B下降Sub_下降時速度切替位置(@D
LDB @M370                ; RB_位置決め起動中
ANB @M371                ; RB_位置決め起動完了
OR @M354                 ; B/B下降Sub_SUB起動OFF確認
ANL
OUT @M354                ; B/B下降Sub_SUB起動OFF確認
LD @M354                 ; B/B下降Sub_SUB起動OFF確認
MPS
@MOV @D216 @D220         ; RB_下降位置  指令PosNo.
MPP
LD @M373                 ; RBC_位置決め起動条件
OR @M355                 ; B/B下降Sub_下降時位置(@D216)移動
ANL
OUT @M355                ; B/B下降Sub_下降時位置(@D216)移動
LD @M355                 ; B/B下降Sub_下降時位置(@D216)移動
LD @M370                 ; RB_位置決め起動中
AND @M371                ; RB_位置決め起動完了
AND @M382                ; RB_下降位置(@D216)
OR @M356                 ; B/B下降Sub_下降時位置(@D216)移動
ANL
OUT @M356                ; B/B下降Sub_下降時位置(@D216)移動
LD @M356                 ; B/B下降Sub_下降時位置(@D216)移動
LDB @M370                ; RB_位置決め起動中
ANB @M371                ; RB_位置決め起動完了
OR @M357                 ; B/B下降Sub_SUB起動OFF確認
ANL
OUT @M357                ; B/B下降Sub_SUB起動OFF確認
;<h1/>__ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上昇Sub
LDB @M341                ; 上治具 上昇指令
INV
OUT @M345                ; B/B上昇Sub 上昇位置まで一気に上
LDB @M31                 ; Ux-1(S31) 上治具上昇指令
ANB @M56                 ; Ux-1(S56) 上治具上昇指令
INV
OUT @M346                ; B/B上昇Sub 書込み後の上り動作
LD @M345                 ; B/B上昇Sub 上昇位置まで一気に上
OR @M346                 ; B/B上昇Sub 書込み後の上り動作
OUT @M360                ; B/B上昇Sub起動開始
LD @M367                 ; B/B上昇Sub_SUB起動OFF確認
OUT @M361                ; B/B上昇Sub起動完了
LD @M346                 ; B/B上昇Sub 書込み後の上り動作
AND @M360                ; B/B上昇Sub起動開始
MPS
@MOV @D217 @D220         ; RB_上昇時速度切替位置  指令PosNo.
MPP
LD @M373                 ; RBC_位置決め起動条件
OR @M362                 ; B/B上昇Sub_上昇時速度切替位置(@D
ANL
OUT @M362                ; B/B上昇Sub_上昇時速度切替位置(@D
LD @M362                 ; B/B上昇Sub_上昇時速度切替位置(@D
LD @M370                 ; RB_位置決め起動中
AND @M371                ; RB_位置決め起動完了
AND @M383                ; RB_上昇時速度切替位置(@D217)
OR @M363                 ; B/B上昇Sub_上昇時速度切替位置(@D
ANL
OUT @M363                ; B/B上昇Sub_上昇時速度切替位置(@D
LD @M363                 ; B/B上昇Sub_上昇時速度切替位置(@D
LDB @M370                ; RB_位置決め起動中
ANB @M371                ; RB_位置決め起動完了
OR @M364                 ; B/B上昇Sub_SUB起動OFF確認
ANL
OUT @M364                ; B/B上昇Sub_SUB起動OFF確認
LD @M364                 ; B/B上昇Sub_SUB起動OFF確認
LD @M345                 ; B/B上昇Sub 上昇位置まで一気に上
AND @M360                ; B/B上昇Sub起動開始
ORL
MPS
@MOV K1 @D220            ; 指令PosNo.
MPP
LD @M373                 ; RBC_位置決め起動条件
OR @M365                 ; B/B上昇Sub_上昇時位置(P1)移動指
ANL
OUT @M365                ; B/B上昇Sub_上昇時位置(P1)移動指
LD @M365                 ; B/B上昇Sub_上昇時位置(P1)移動指
LD @M370                 ; RB_位置決め起動中
AND @M371                ; RB_位置決め起動完了
AND @M380                ; RB_上昇位置(P1)
OR @M366                 ; B/B上昇Sub_上昇時位置(P1)移動完
ANL
OUT @M366                ; B/B上昇Sub_上昇時位置(P1)移動完
LD @M366                 ; B/B上昇Sub_上昇時位置(P1)移動完
LDB @M370                ; RB_位置決め起動中
ANB @M371                ; RB_位置決め起動完了
OR @M367                 ; B/B上昇Sub_SUB起動OFF確認
ANL
OUT @M367                ; B/B上昇Sub_SUB起動OFF確認
;<h1/>□RB動作処理(PCON 64点ﾓｰﾄﾞ)
;<h1/>  □RB ST PRESS
;  RBC起動条件
LD @D200.14              ; RBC ST上下 ｱﾗｰﾑ *ALM
AND @D200.13             ; RBC ST上下 非常停止正常 *EMGS
OUT @M372                ; RBC_ｼｽﾃﾑ起動OK
LD @M372                 ; RBC_ｼｽﾃﾑ起動OK
LD @D200.11              ; RBC ST上下 位置決完了 PEND
AND @D200.12             ; RBC ST上下 運転準備完了 SV
OR CR2002                ; 常時ON
ANL
ANB @M370                ; RB_位置決め起動中
AND M129                 ; 安全入力OK
OUT @M373                ; RBC_位置決め起動条件
;位置決め指令
LDB @M352                ; B/B下降Sub_下降時速度切替位置(@D
OR @M353                 ; B/B下降Sub_下降時速度切替位置(@D
LDB @M355                ; B/B下降Sub_下降時位置(@D216)移動
OR @M356                 ; B/B下降Sub_下降時位置(@D216)移動
ANL
LDB @M362                ; B/B上昇Sub_上昇時速度切替位置(@D
OR @M363                 ; B/B上昇Sub_上昇時速度切替位置(@D
ANL
LDB @M365                ; B/B上昇Sub_上昇時位置(P1)移動指
OR @M366                 ; B/B上昇Sub_上昇時位置(P1)移動完
ANL
ANB @M254                ; Ux-ORG(S04) B/B上昇指令
ANB @M24                 ; Ux-1(S24)上昇時速度切替位置移動
INV
LD @M373                 ; RBC_位置決め起動条件
OR @M370                 ; RB_位置決め起動中
ANL
OUT @M374                ; RB_位置決め起動指令
LD @M374                 ; RB_位置決め起動指令
AND M50                  ; 運転準備
AND @D200.14             ; RBC ST上下 ｱﾗｰﾑ *ALM
AND @D200.13             ; RBC ST上下 非常停止正常 *EMGS
MC
;<h1/>____▼_位置決め処理
LD @M374                 ; RB_位置決め起動指令
OR @M370                 ; RB_位置決め起動中
OUT @M370                ; RB_位置決め起動中
LD @M370                 ; RB_位置決め起動中
TMH @17 K50              ; 運転ﾓｰﾄﾞ確認時間
MPS
LDB @D200.9              ; RBC ST上下 運転ﾓｰﾄﾞ状態 RMDS
OR @M375                 ; 運転ﾓｰﾄﾞ確認OK
ANB @M376                ; 運転ﾓｰﾄﾞ確認NG
ANL
OUT @M375                ; 運転ﾓｰﾄﾞ確認OK
MPP
LD @T17                  ; 運転ﾓｰﾄﾞ確認時間
AND @D200.9              ; RBC ST上下 運転ﾓｰﾄﾞ状態 RMDS
OR @M376                 ; 運転ﾓｰﾄﾞ確認NG
ANB @M375                ; 運転ﾓｰﾄﾞ確認OK
ANL
OUT @M376                ; 運転ﾓｰﾄﾞ確認NG
LD @M375                 ; 運転ﾓｰﾄﾞ確認OK
AND @D210.12             ; RBC ST上下 一時停止でない *STP
AND @D200.11             ; RBC ST上下 位置決完了 PEND
AND @D200.12             ; RBC ST上下 運転準備完了 SV
TMH @15 K10              ; ﾃﾞｰﾀ転送ﾃﾞｨﾚｲ
LD @T15                  ; ﾃﾞｰﾀ転送ﾃﾞｨﾚｲ
OR @M377                 ; RB_位置決め開始指令
OUT @M377                ; RB_位置決め開始指令
LD @M377                 ; RB_位置決め開始指令
AND @D210.13             ; RBC ST上下 位置決めｽﾀｰﾄ CSTR
ANB @D200.11             ; RBC ST上下 位置決完了 PEND
OR @M378                 ; RB_位置決め起動確認
OUT @M378                ; RB_位置決め起動確認
LD @M378                 ; RB_位置決め起動確認
ANB @D210.13             ; RBC ST上下 位置決めｽﾀｰﾄ CSTR
AND @D200.11             ; RBC ST上下 位置決完了 PEND
AND= @D220 @D204         ; 指令PosNo.  RB_現在POS NO.
OR @M379                 ; RB_位置決め完了
OUT @M371                ; RB_位置決め起動完了
LD @M371                 ; RB_位置決め起動完了
ANB @M374                ; RB_位置決め起動指令
OUT @M379                ; RB_位置決め完了
MCR
;<h1/>____▼_RB出力
LD @D220.0
OUT @D210.0              ; RBC ST上下 指令Pos PC1
LD @D220.1
OUT @D210.1              ; RBC ST上下 指令Pos PC2
LD @D220.2
OUT @D210.2              ; RBC ST上下 指令Pos PC4
LD @D220.3
OUT @D210.3              ; RBC ST上下 指令Pos PC8
LD @D220.4
OUT @D210.4              ; RBC ST上下 指令Pos PC16
LD @D220.5
OUT @D210.5              ; RBC ST上下 指令Pos PC32
LD CR2003                ; 常時OFF
OUT @D210.9              ; RBC ST上下 ﾌﾞﾚｰｷ強制解除 BKRL
LDB M73                  ; 各工程起動指令
ANB @M370                ; RB_位置決め起動中
ANB @L0                  ; 有効状態
OUT @D210.10             ; RBC ST上下 運転ﾓｰﾄﾞ RMOD
LD CR2003                ; 常時OFF
OUT @D210.11             ; RBC ST上下 原点復帰 HEND
LD M129                  ; 安全入力OK
ORB @M378                ; RB_位置決め起動確認
ANB M130                 ; 一時停止指令
ANB @M331                ; 上治具 下降指令OFF確認&STOP入力
ANB @M393                ; 上治具 上昇指令OFF確認&STOP入力
OUT @D210.12             ; RBC ST上下 一時停止でない *STP
LD @M377                 ; RB_位置決め開始指令
ANB @M378                ; RB_位置決め起動確認
OUT @D210.13             ; RBC ST上下 位置決めｽﾀｰﾄ CSTR
LD M16                   ; ﾘｾｯﾄPB
ANB @D200.14             ; RBC ST上下 ｱﾗｰﾑ *ALM
LD @M332                 ; 上治具 下降指令STOP確認&移動量ｷｬ
OR @M394                 ; 上治具 上昇指令STOP確認&移動量ｷｬ
AND @D200.14             ; RBC ST上下 ｱﾗｰﾑ *ALM
ORL
OUT @D210.14             ; RBC ST上下 ﾘｾｯﾄ RES
LD M50                   ; 運転準備
ANB M51                  ; 即停止異常(緊急停止)
OUT @D210.15             ; RBC ST上下 ｻｰﾎﾞON指令 SON
;
;'/// point 演算
;
;@D215.U = ( @D30 - K1 ) * 3 + K11 
;@D216.U = @D215.U + K1
;@D217.U = @D215.U + K2
LD CR2002                ; 常時ON
NCJ K1000
;'/// point 演算
;
;@D215.U = ( @D30 - K1 ) * 3 + K11 
;
LD CR2002                ; 常時ON
LDA @D30                 ; 上治具ID
CON
EXT
CON
SUB.L +1
CON
MUL.L +3
CON
ADD.L +11
CON
STA @D215                ; RB_下降時速度切替位置
;@D216.U = @D215.U + K1
;
LD CR2002                ; 常時ON
LDA @D215                ; RB_下降時速度切替位置
CON
EXT
CON
ADD.L +1
CON
STA @D216                ; RB_下降位置
;@D217.U = @D215.U + K2
LD CR2002                ; 常時ON
LDA @D215                ; RB_下降時速度切替位置
CON
EXT
CON
ADD.L +2
CON
STA @D217                ; RB_上昇時速度切替位置
LABEL K1000
;
LD @D200.11              ; RBC ST上下 位置決完了 PEND
OR @D210.12              ; RBC ST上下 一時停止でない *STP
AND @D200.10             ; RBC ST上下 原点復帰完了 HEND
MPS
LDA @D200                ; RB_状態信号
CON
ANDA H003F
CON
STA @D204                ; RB_現在POS NO.
MRD
INV
MOV K0 @D204             ; RB_現在POS NO.
MRD
AND= @D204 K1            ; RB_現在POS NO.
OUT @M380                ; RB_上昇位置(P1)
MRD
AND= @D215 @D204         ; RB_下降時速度切替位置  RB_現在POS NO.
OUT @M381                ; RB_下降時速度切替位置(@D215)
MRD
AND= @D216 @D204         ; RB_下降位置  RB_現在POS NO.
OUT @M382                ; RB_下降位置(@D216)
MPP
AND= @D217 @D204         ; RB_上昇時速度切替位置  RB_現在POS NO.
OUT @M383                ; RB_上昇時速度切替位置(@D217)
;<h1/>▽_出力
;SOL
;ﾌｨｸｽﾁｬ位置決め
LDP @M301                ; 下治具位置決め 下降指令
ORP @M417                ; 下治具 LOCK指令
AND @M300                ; 下治具位置決め 下降OK
LD @R1000                ; ﾌｨｸｽﾁｬ位置決め 下降(Lock)
ANB @R1001               ; ﾌｨｸｽﾁｬ位置決め 上昇(Unlock)
ORL
AND M50                  ; 運転準備
OUT @R1000               ; ﾌｨｸｽﾁｬ位置決め 下降(Lock)
LDP @M303                ; 下治具位置決め 上昇指令
ORP @M418                ; 下治具UNLOCK指令
AND @M302                ; 下治具位置決め 上昇OK
LD @R1001                ; ﾌｨｸｽﾁｬ位置決め 上昇(Unlock)
ANB @R1000               ; ﾌｨｸｽﾁｬ位置決め 下降(Lock)
ORL
AND M50                  ; 運転準備
OUT @R1001               ; ﾌｨｸｽﾁｬ位置決め 上昇(Unlock)
;ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め
LDP @M305                ; 上治具位置決め LOCK指令
ORP @M415                ; 上治具 LOCK指令
AND @M304                ; 上治具位置決め LOCK OK
LD @R1002                ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 上昇(Lock)
ANB @R1003               ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 下降(Unloc
ORL
AND M50                  ; 運転準備
OUT @R1002               ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 上昇(Lock)
LDP @M307                ; 上治具位置決め UNLOCK指令
ORP @M421                ; 上治具 UNLOCK指令
AND @M306                ; 上治具位置決め UNLOCK OK
LD @R1003                ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 下降(Unloc
ANB @R1002               ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 上昇(Lock)
ORL
AND M50                  ; 運転準備
OUT @R1003               ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 下降(Unloc
;BCR読取りCYL上下
LD @M450                 ; BCR 読取りCYL下降指令
AND M123                 ; 安全扉正常
AND T80                  ; ｴﾘｱｾﾝｻ正常
LD @R1004                ; BCR READER上下下降
ANB @R1005               ; BCR READER上下上昇
AND @T38                 ; ST BCR READER上下下降端
ORL
AND M50                  ; 運転準備
OUT @R1004               ; BCR READER上下下降
LD @M460                 ; BCR 読取りCYL上昇指令
AND M123                 ; 安全扉正常
AND T80                  ; ｴﾘｱｾﾝｻ正常
LD @R1005                ; BCR READER上下上昇
ANB @R1004               ; BCR READER上下下降
AND @T39                 ; ST BCR READER上下上昇端
ORL
AND M50                  ; 運転準備
OUT @R1005               ; BCR READER上下上昇
;基板受取上下
LD CR2003                ; 常時OFF
LD @R1008                ; 基板受取上下 上昇
ANB @R1009               ; 基板受取上下 下降
ORL
AND M50                  ; 運転準備
OUT @R1008               ; 基板受取上下 上昇
LD CR2003                ; 常時OFF
LD @R1009                ; 基板受取上下 下降
ANB @R1008               ; 基板受取上下 上昇
ORL
AND M50                  ; 運転準備
OUT @R1009               ; 基板受取上下 下降
;■ﾗﾝﾌﾟ表示
LD @T34                  ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 固定端
AND @T36                 ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 固定端
LD<> @D34 K0             ; 上治具ID ｾﾝｻｰ状態
AND M530                 ; FLIKER 0.3s
ORL
AND M50                  ; 運転準備
OUT @R1100               ; 上治具ﾛｯｸ/ｱﾝﾛｯｸPL
LD @T30                  ; ﾌｨｸｽﾁｬ位置決め 固定端
AND @T32                 ; ﾌｨｸｽﾁｬ位置決め 固定端
LD<> @D35 K0             ; 下治具ID ｾﾝｻｰ状態
AND M530                 ; FLIKER 0.3s
ORL
AND M50                  ; 運転準備
OUT @R1101               ; 下治具ﾛｯｸ/ｱﾝﾛｯｸPL
LD @M409                 ; ST無効予約(自動運転)
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
LD @L0                   ; 有効状態
ANB @M409                ; ST無効予約(自動運転)
ORL
OUT @R1102               ; ST有効/無効PL
LD @M433                 ; START押し待ち
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR @M434                 ; ST使用中
OUT @R1103               ; START LAMP 点灯
;■ﾌﾞｻﾞｰ
LDP @M1                  ; Ux-1(S01)投入完了
OR @M435                 ; 投入ﾌﾞｻﾞｰ起動中
SHOT K20 @M435           ; 投入ﾌﾞｻﾞｰ起動中
FLIK K5 K5 @M436         ; 投入ﾌﾞｻﾞｰ起動指令
;<h1/>____▼ ｲｵﾅｲｻﾞｰ出力 / Ionizer output
LD @L0                   ; 有効状態
AND M73                  ; 各工程起動指令
ANB @M382                ; RB_下降位置(@D216)
AND M123                 ; 安全扉正常
OUT @R1110               ; IONIZER ON
;■その他制御出力
;PC_I/O
LD @R803                 ; fromPC) IGP ON指示1
OR @M316                 ; IGP1 Power_ON
OUT @R1200               ; ﾌｨｸｽﾁｬ 電源ON1
LD @R804                 ; fromPC) IGP ON指示2
OR @M317                 ; IGP2 Power_ON
OUT @R1201               ; ﾌｨｸｽﾁｬ 電源ON2
LD @R805                 ; fromPC) IGP ON指示3
OR @M321                 ; IGP3 Power_ON
OUT @R1202               ; ﾌｨｸｽﾁｬ 電源ON3
LD @R806                 ; fromPC) IGP ON指示4
OR @M322                 ; IGP4 Power_ON
OUT @R1203               ; ﾌｨｸｽﾁｬ 電源ON4
LD @R1200                ; ﾌｨｸｽﾁｬ 電源ON1
TMR @5 K2                ; 下治具基板1電源ONﾀｲﾏ
LD @R1201                ; ﾌｨｸｽﾁｬ 電源ON2
TMR @6 K2                ; 下治具基板2電源ONﾀｲﾏ
LD @R1202                ; ﾌｨｸｽﾁｬ 電源ON3
TMR @7 K2                ; 下治具基板3電源ONﾀｲﾏ
LD @R1203                ; ﾌｨｸｽﾁｬ 電源ON4
TMR @8 K2                ; 下治具基板4電源ONﾀｲﾏ
LD @M67                  ; ﾜｰｸNGﾌﾗｸﾞ
LDB B0F5                 ; 245)_ST1ﾜｰｸをNG置き場へ移動要求
LD B0F5                  ; 245)_ST1ﾜｰｸをNG置き場へ移動要求
AND T91                  ; NG置き場ﾜｰｸ有時間
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
ORL
ANL
LD @M54                  ; Ux-1(S54) NGSW待ち
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
ORL
LD @M68                  ; 0.8sON 1.2sOFF
AND @M69                 ; 0.1sON 0.3sOFF
ORL
OUT @R1204               ; NG RESET LAMP
LD B0F5                  ; 245)_ST1ﾜｰｸをNG置き場へ移動要求
ANB T91                  ; NG置き場ﾜｰｸ有時間
FLIK K80 K120 @M68       ; 0.8sON 1.2sOFF
FLIK K10 K30 @M69        ; 0.1sON 0.3sOFF
LD @L0                   ; 有効状態
LDB @L0                  ; 有効状態
LD @M415                 ; 上治具 LOCK指令
ANB @M451                ; BCR 読取りCYL下降完了
LD @M416                 ; 上治具 UNLOCK指令
ANB @M461                ; BCR 読取りCYL上昇完了
ORL
ANL
ANB B0F7                 ; 247)_ST1 BCR 上下上昇ｾﾝｻ異常
ORL
OUT @R1205               ; DOOR LOCK
;□□　　パネル表示　　□□
LD @R1000                ; ﾌｨｸｽﾁｬ位置決め 下降(Lock)
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
LD @T30                  ; ﾌｨｸｽﾁｬ位置決め 固定端
AND @T32                 ; ﾌｨｸｽﾁｬ位置決め 固定端
ORL
OUT @R1300               ; 下治具位置決め上下 下降PL
LD @R1001                ; ﾌｨｸｽﾁｬ位置決め 上昇(Unlock)
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
LD @T31                  ; ﾌｨｸｽﾁｬ位置決め 解除端
AND @T33                 ; ﾌｨｸｽﾁｬ位置決め 解除端
ORL
OUT @R1301               ; 下治具位置決め上下 上昇PL
LD @R1002                ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 上昇(Lock)
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
LD @T34                  ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 固定端
AND @T36                 ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 固定端
ORL
OUT @R1302               ; 上治具位置決め 上昇PL
LD @R1003                ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 下降(Unloc
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
LD @T35                  ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 解除端
AND @T37                 ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 解除端
ORL
OUT @R1303               ; 上治具位置決め 下降PL
LD @M329                 ; 上治具 下降ﾓｰﾒﾝﾀﾘ指令ON
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR @M382                 ; RB_下降位置(@D216)
LDB M71                  ; 自動運転開始BZ
ORB @L0                  ; 有効状態
ANL
OUT @R1304               ; 上治具 下降PL(MNU)
LD @M391                 ; 上治具 上昇ﾓｰﾒﾝﾀﾘ指令ON
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR @M380                 ; RB_上昇位置(P1)
LDB M71                  ; 自動運転開始BZ
ORB @L0                  ; 有効状態
ANL
OUT @R1305               ; 上治具 上昇PL
LD @R1008                ; 基板受取上下 上昇
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR @T42                  ; 下治具基板受取 上昇端
OUT @R1306               ; 基板受取 上昇PL
LD @R1009                ; 基板受取上下 下降
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR @T43                  ; 下治具基板受取 下降端
OUT @R1307               ; 基板受取 下降PL
LD @M234                 ; Ux-3 Flash検査起動中
AND M3                   ; OFFLINE_MODE
OR @R800                 ; fromPC) ｽﾃｰｼﾞ状態(ON=書込み中)
OUT @R1400               ; ST状態表示
LD @R1102                ; ST有効/無効PL
OUT @R1401               ; ST有効･無効選択PL
LD @R1100                ; 上治具ﾛｯｸ/ｱﾝﾛｯｸPL
OUT @R1414               ; 上治具 固定状態PL
LD @R1101                ; 下治具ﾛｯｸ/ｱﾝﾛｯｸPL
OUT @R1415               ; 下治具 固定状態PL
;<h1/>▽_異常
;00) 下治具位置決め(LOCK)CL異常
LD @R1000                ; ﾌｨｸｽﾁｬ位置決め 下降(Lock)
LDB @T30                 ; ﾌｨｸｽﾁｬ位置決め 固定端
ORB @T32                 ; ﾌｨｸｽﾁｬ位置決め 固定端
ANL
LD @T30                  ; ﾌｨｸｽﾁｬ位置決め 固定端
AND @T31                 ; ﾌｨｸｽﾁｬ位置決め 解除端
ORL
LD @T32                  ; ﾌｨｸｽﾁｬ位置決め 固定端
AND @T33                 ; ﾌｨｸｽﾁｬ位置決め 解除端
ORL
TMR @50 K50              ; CLSﾀｲﾑｱｳﾄ
LD @T50                  ; CLSﾀｲﾑｱｳﾄ
LDB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0E0                 ; 224)_ST1 下治具位置決ﾛｯｸ側CL異常
ORL
OUT B0E0                 ; 224)_ST1 下治具位置決ﾛｯｸ側CL異常
;01) 上治具位置決めCL異常
LD @R1002                ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 上昇(Lock)
LDB @T34                 ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 固定端
ORB @T36                 ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 固定端
ANL
LD @T34                  ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 固定端
AND @T35                 ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 解除端
ORL
LD @T36                  ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 固定端
AND @T37                 ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 解除端
ORL
TMR @51 K50              ; CLSﾀｲﾑｱｳﾄ
LD @T51                  ; CLSﾀｲﾑｱｳﾄ
LDB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0E1                 ; 225)_ST1 上治具位置決ﾛｯｸ側CL異常
ORL
OUT B0E1                 ; 225)_ST1 上治具位置決ﾛｯｸ側CL異常
;02) 基板受取異常
LD @M40                  ; Ux-1(S40)基板受取異常
LDB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0E2                 ; 226)_ST1 基板検知異常
ORL
OUT B0E2                 ; 226)_ST1 基板検知異常
;03) 基板受渡上下CL異常
LD @R1008                ; 基板受取上下 上昇
ANB @T42                 ; 下治具基板受取 上昇端
LD @R1009                ; 基板受取上下 下降
ANB @T43                 ; 下治具基板受取 下降端
ORL
LD @T42                  ; 下治具基板受取 上昇端
AND @T43                 ; 下治具基板受取 下降端
ORL
TMR @55 K50              ; CLﾀｲﾏｱｳﾄ
LD @T55                  ; CLﾀｲﾏｱｳﾄ
LDB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0E3                 ; 227)_ST1 基板受渡上下CLS異常
ORL
OUT B0E3                 ; 227)_ST1 基板受渡上下CLS異常
;04) 上治具下降RBｱﾗｰﾑ
LDB @D200.14             ; RBC ST上下 ｱﾗｰﾑ *ALM
AND T30                  ; ｴﾗｰ監視開始ﾀｲﾏ
LDB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0E4                 ; 228)_ST1 上治具下降RBｱﾗｰﾑ
ORL
OUT B0E4                 ; 228)_ST1 上治具下降RBｱﾗｰﾑ
;05) 基板1ｻｰｷｯﾄﾄﾘｯﾌﾟ異常
LDB @R300                ; ﾌｨｸｽﾁｬ 電源ON確認1
AND @R1200               ; ﾌｨｸｽﾁｬ 電源ON1
TMR @53 K10              ; FLASH1電源OFF異常
LD @T53                  ; FLASH1電源OFF異常
LDB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0E5                 ; 229)_ST1 基板1CP Trip異常
ORL
OUT B0E5                 ; 229)_ST1 基板1CP Trip異常
;06) 基板2ｻｰｷｯﾄﾄﾘｯﾌﾟ異常
LDB @R301                ; ﾌｨｸｽﾁｬ 電源ON確認2
AND @R1201               ; ﾌｨｸｽﾁｬ 電源ON2
TMR @54 K10              ; FLASH2電源OFF異常
LD @T54                  ; FLASH2電源OFF異常
LDB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0E6                 ; 230)_ST1 基板2CP Trip異常
ORL
OUT B0E6                 ; 230)_ST1 基板2CP Trip異常
;**) 基板3ｻｰｷｯﾄﾄﾘｯﾌﾟ異常
LDB @R302                ; ﾌｨｸｽﾁｬ 電源ON確認3
AND @R1202               ; ﾌｨｸｽﾁｬ 電源ON3
TMR @56 K10              ; FLASH3電源OFF異常
LD @T56                  ; FLASH3電源OFF異常
LDB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0ED                 ; 237)_ST1_基板3CP Trip異常
ORL
OUT B0ED                 ; 237)_ST1_基板3CP Trip異常
;**) 基板4ｻｰｷｯﾄﾄﾘｯﾌﾟ異常
LDB @R303                ; ﾌｨｸｽﾁｬ 電源ON確認4
AND @R1203               ; ﾌｨｸｽﾁｬ 電源ON4
TMR @57 K10              ; FLASH4電源OFF異常
LD @T57                  ; FLASH4電源OFF異常
LDB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0EE                 ; 238)_ST1_基板4CP Trip異常
ORL
OUT B0EE                 ; 238)_ST1_基板4CP Trip異常
;07) 
LD @M161                 ; S11_PCB投入異常
LDB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0E7                 ; 231)_ST1 基板投入不可
ORL
OUT B0E7                 ; 231)_ST1 基板投入不可
;08) 
LD @M376                 ; 運転ﾓｰﾄﾞ確認NG
LDB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0E8                 ; 232)_RBC1 運転ﾓｰﾄﾞAUTO切替要求
ORL
OUT B0E8                 ; 232)_RBC1 運転ﾓｰﾄﾞAUTO切替要求
;09) 基板浮き異常
LD @M41                  ; Ux-1(S41)基板浮き異常
LDB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
ORB @R103                ; ﾌｨｸｽﾁｬ基板浮き確認1
ORB @R104                ; ﾌｨｸｽﾁｬ基板浮き確認2
AND B0E9                 ; 233)_ST1 基板浮き検出異常
ORL
OUT B0E9                 ; 233)_ST1 基板浮き検出異常
;10) 上治具ID異常
LD @L0                   ; 有効状態
AND @T4                  ; 安全ｶﾊﾞｰ正常(遅い版)
AND @M380                ; RB_上昇位置(P1)
AND @T20                 ; 上治具ID 更新DLY
AND<> @D30 @D34          ; 上治具ID  上治具ID ｾﾝｻｰ状態
LDB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0EA                 ; 234)_ST1 上治具ID異常
ORL
OUT B0EA                 ; 234)_ST1 上治具ID異常
;11) 下治具ID異常    
LD @L0                   ; 有効状態
AND @T21                 ; 下治具ID 更新DLY
AND<> @D31 @D35          ; 下治具ID  下治具ID ｾﾝｻｰ状態
LDB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0EB                 ; 235)_ST1 下治具ID異常
ORL
AND T0                   ; 電源投入0Nﾃﾞｨﾚｲ
OUT B0EB                 ; 235)_ST1 下治具ID異常
;12) ﾜｰｸｾﾝｻｰ検知異常
LD M71                   ; 自動運転開始BZ
ANB M35                  ; 空運転ﾓｰﾄﾞ
AND M124                 ; ｴﾘｱｾﾝｻ正常
AND<=.L @D202 +23000     ; RB_現在位置座標L
AND @D200.10             ; RBC ST上下 原点復帰完了 HEND
AND @D51.0
LDB @M320                ; 下治具基板確認(ON=有 OFF=無)
ORB @R103                ; ﾌｨｸｽﾁｬ基板浮き確認1
ORB @R104                ; ﾌｨｸｽﾁｬ基板浮き確認2
ANL
AND @M432                ; 基板監視中ﾌﾗｸﾞ
LDB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0EC                 ; 236)_ST1_基板検知異常
ORL
OUT B0EC                 ; 236)_ST1_基板検知異常
;15) 
LD @M51                  ; Ux-1(S51)NG置き場ﾜｰｸ取出し要求
LDB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
OR T91                   ; NG置き場ﾜｰｸ有時間
AND B0EF                 ; 239)_ST1 NG置き場ﾜｰｸ取出し要求
ORL
OUT B0EF                 ; 239)_ST1 NG置き場ﾜｰｸ取出し要求
;16) 下治具位置決解側CL異常
LD @R1001                ; ﾌｨｸｽﾁｬ位置決め 上昇(Unlock)
LDB @T31                 ; ﾌｨｸｽﾁｬ位置決め 解除端
ORB @T33                 ; ﾌｨｸｽﾁｬ位置決め 解除端
ANL
LD @T30                  ; ﾌｨｸｽﾁｬ位置決め 固定端
AND @T31                 ; ﾌｨｸｽﾁｬ位置決め 解除端
ORL
LD @T32                  ; ﾌｨｸｽﾁｬ位置決め 固定端
AND @T33                 ; ﾌｨｸｽﾁｬ位置決め 解除端
ORL
TMR @58 K50              ; CLS監視ﾀｲﾏ
LD @T58                  ; CLS監視ﾀｲﾏ
LDB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0F0                 ; 240)_ST1 下治具位置決解側CL異常
ORL
OUT B0F0                 ; 240)_ST1 下治具位置決解側CL異常
;17) 上治具位置決め解除CL異常
LD @R1003                ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 下降(Unloc
LDB @T35                 ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 解除端
ORB @T37                 ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 解除端
ANL
LD @T34                  ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 固定端
AND @T35                 ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 解除端
ORL
LD @T36                  ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 固定端
AND @T37                 ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 解除端
ORL
TMR @59 K50              ; CLSﾀｲﾑｱｳﾄ
LD @T59                  ; CLSﾀｲﾑｱｳﾄ
LDB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0F1                 ; 241)_ST1 上治具位置決解側CL異常
ORL
OUT B0F1                 ; 241)_ST1 上治具位置決解側CL異常
;
LD @R213                 ; ST Ionizer  Ion level alarm
AND @R1110               ; IONIZER ON
LDB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0F2                 ; 242)_ST1 Ionizer Ion level alarm
ORL
OUT B0F2                 ; 242)_ST1 Ionizer Ion level alarm
;
LD @R214                 ; ST Ionizer condition alarm
AND @R1110               ; IONIZER ON
LDB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0F3                 ; 243)_ST1 Ionizer condition alarm
ORL
OUT B0F3                 ; 243)_ST1 Ionizer condition alarm
;
LD @R214                 ; ST Ionizer condition alarm
AND @R1110               ; IONIZER ON
LDB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0F4                 ; 244)_ST1 Ionizer condition alarm
ORL
OUT B0F4                 ; 244)_ST1 Ionizer condition alarm
;
LD @M57                  ; Ux-1(S57) ﾜｰｸ　NG置き場移動要求
LDPB @R204               ; NG品 RESET SW
ORB T91                  ; NG置き場ﾜｰｸ有時間
OR @R102                 ; ﾌｨｸｽﾁｬ基板確認(ON=有/OFF=無)
AND B0F5                 ; 245)_ST1ﾜｰｸをNG置き場へ移動要求
ORL
OUT B0F5                 ; 245)_ST1ﾜｰｸをNG置き場へ移動要求
;
LD @R1004                ; BCR READER上下下降
ANB @R008                ; ST BCR READER上下下降端
LD @R008                 ; ST BCR READER上下下降端
AND @R009                ; ST BCR READER上下上昇端
ORL
TMR @60 K50              ; CLSﾀｲﾑｱｳﾄ
LD @T60                  ; CLSﾀｲﾑｱｳﾄ
LDB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0F6                 ; 246)_ST1 BCR 上下下降ｾﾝｻ異常
ORL
OUT B0F6                 ; 246)_ST1 BCR 上下下降ｾﾝｻ異常
;
LD @R1005                ; BCR READER上下上昇
ANB @R009                ; ST BCR READER上下上昇端
LD @R008                 ; ST BCR READER上下下降端
AND @R009                ; ST BCR READER上下上昇端
ORL
TMR @61 K50              ; CLSﾀｲﾑｱｳﾄ
LD @T61                  ; CLSﾀｲﾑｱｳﾄ
LDB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0F7                 ; 247)_ST1 BCR 上下上昇ｾﾝｻ異常
ORL
OUT B0F7                 ; 247)_ST1 BCR 上下上昇ｾﾝｻ異常
;
LD @M53                  ; Ux-1(S53) 書込みNG
LDPB @R204               ; NG品 RESET SW
AND B0F8                 ; 248)_ST1 書込みNG
ORL
OUT B0F8                 ; 248)_ST1 書込みNG
;<h1/>▽_警報
;基板除去要求
LD @M258                 ; Ux-ORG(S08)基板除去要求
ORP @T25                 ; ﾜｰｸ取出し要求時間
ORP @M181                ; 投入NG PCB
LD @R102                 ; ﾌｨｸｽﾁｬ基板確認(ON=有/OFF=無)
ORB M124                 ; ｴﾘｱｾﾝｻ正常
AND @D42.0               ; 基板除去要求
ORL
OUT @D42.0               ; 基板除去要求
;ROM書込み中
LD @R800                 ; fromPC) ｽﾃｰｼﾞ状態(ON=書込み中)
AND M31                  ; 手動ﾓｰﾄﾞ
LDP M17                  ; 原点復帰PB
ORB CR2003               ; 常時OFF
ANL
LDB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND @D42.1               ; ROM書込み中
AND CR2003               ; 常時OFF
ORL
OUT @D42.1               ; ROM書込み中
;B32B ST1 下治具 ｺﾈｸﾀ挿入確認    
LDB @M440                ; 有効時下治具ｺﾈｸﾀ挿入確認NG
ANB @M45                 ; Ux-1(S45)ｺﾈｸﾀ挿入確認
INV
LDB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND @D42.2               ; 下治具ｺﾈｸﾀ挿入確認
ORL
AND T0                   ; 電源投入0Nﾃﾞｨﾚｲ
OUT @D42.2               ; 下治具ｺﾈｸﾀ挿入確認
;
LDB @M402                ; 上治具 固定状態
AND @M380                ; RB_上昇位置(P1)
ORB @M403                ; 下治具 固定状態
ANP @R202                ; ST有効/無効選択SW
LDB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND @D42.3               ; 治具をﾛｯｸしてください
ORL
ANB @L0                  ; 有効状態
OUT @D42.3               ; 治具をﾛｯｸしてください
;
LD @T26                  ; ﾜｰｸ投入要求時間
OUT @D42.4               ; ﾜｰｸ投入要求
;異常ﾌﾞｻﾞｰまとめ
LD<>.D B0E0 @D12         ; 224)_ST1 下治具位置決ﾛｯｸ側CL異常  異常BzOFF記憶
AND<>.D B0E0 K0          ; 224)_ST1 下治具位置決ﾛｯｸ側CL異常
LD<>.D @D42 @D14         ; 警報(0-15)  警報BzOFF記憶
AND<>.D @D42 K0          ; 警報(0-15)
ORL
OUT @M489                ; Ux 異常BZ補助
LDB M110                 ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
ANB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
INV
MOV.D B0E0 @D12          ; 224)_ST1 下治具位置決ﾛｯｸ側CL異常  異常BzOFF記憶
MOV.D @D42 @D14          ; 警報(0-15)  警報BzOFF記憶
LD=.D B0E0 K0            ; 224)_ST1 下治具位置決ﾛｯｸ側CL異常
MOV.D K0 @D12            ; 異常BzOFF記憶
LD=.D @D42 K0            ; 警報(0-15)
MOV.D K0 @D14            ; 警報BzOFF記憶
;<h1/>Local -> Global
;ﾌﾗｸﾞ
LD @L0                   ; 有効状態
OUT L700                 ; ST1_有効状態
LD @M414                 ; ｾｯﾄ不可ﾌﾞｻﾞｰ(ｴﾘｱｾﾝｻ検出中)
OR @M436                 ; 投入ﾌﾞｻﾞｰ起動指令
OUT M4414                ; ｾｯﾄ不可ﾌﾞｻﾞｰ(ｴﾘｱｾﾝｻ検出中)
LD @M297                 ; Ux-ORG STEP END
OUT M4479                ; FlashST1 原点復帰完了
LD CR2002                ; 常時ON
MOV @M480 M4480          ; Ux 原点  U7(ST1) 原点
LD @M431                 ; NG処理中ﾌﾗｸﾞ
OUT M4498                ; U7(ST1) NG処理中ﾌﾗｸﾞ
LD @M380                 ; RB_上昇位置(P1)
OUT M4499                ; U7(ST1) 上治具上下 上昇端
LD CR2002                ; 常時ON
MOV.D @D34 D4106         ; 上治具ID ｾﾝｻｰ状態  上治具ID ｾﾝｻｰ状態
;出力
LD @R1110                ; IONIZER ON
OUT R25106               ; ST3 Ionizer  ON
INV
OUT Y231F                ; ST1 Ionizer Stop
LD @R1200                ; ﾌｨｸｽﾁｬ 電源ON1
OUT Y233C                ; ST1 FIXTURE IGP1電源ON
LD @R1201                ; ﾌｨｸｽﾁｬ 電源ON2
OUT Y233D                ; ST1 FIXTURE IGP2電源ON
LD @R1204                ; NG RESET LAMP
OUT Y2314                ; ST1 NG RESET PL
LD @R1205                ; DOOR LOCK
OUT Y55                  ; ST1 DOOR LOCK
LD @R1000                ; ﾌｨｸｽﾁｬ位置決め 下降(Lock)
OUT R25012               ; ﾌﾟﾚｽ部ST1下治具位置決めﾛｯｸ
LD @R1001                ; ﾌｨｸｽﾁｬ位置決め 上昇(Unlock)
OUT R25013               ; ﾌﾟﾚｽ部ST1下治具位置決めｱﾝﾛｯｸ
LD @R1002                ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 上昇(Lock)
OUT R25014               ; ﾌﾟﾚｽ部ST1上治具位置決めﾛｯｸ
LD @R1003                ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め 下降(Unloc
OUT R25015               ; ﾌﾟﾚｽ部ST1上治具位置決めｱﾝﾛｯｸ
LD @R1004                ; BCR READER上下下降
OUT R25100               ; ﾌﾟﾚｽ部ST1BCR READER上下下降
LD @R1005                ; BCR READER上下上昇
OUT R25101               ; ﾌﾟﾚｽ部ST1BCR READER上下上昇
LD @R1100                ; 上治具ﾛｯｸ/ｱﾝﾛｯｸPL
OUT Y2319                ; ST1 BACKUP BOARD 固定/解除 PL
LD @R1101                ; 下治具ﾛｯｸ/ｱﾝﾛｯｸPL
OUT Y231A                ; ST1 FIXTURE 固定/解除 PL
LD @R1102                ; ST有効/無効PL
OUT Y2315                ; ST1 ENABLE/DISABLE PL
OUT Y231B                ; ST1 Enable/Disable_PL(R)
LD @R1103                ; START LAMP 点灯
OUT Y2318                ; ST1 START PL
LD @R1304                ; 上治具 下降PL(MNU)
OUT Y2317                ; ST1 BACKUP BOARD DOWN PL
LD @R1305                ; 上治具 上昇PL
OUT Y2316                ; ST1 BACKUP BOARD UP PL
LD CR2002                ; 常時ON
MOV.D @D30 D6100         ; 上治具ID
;RB DATA
LD CR2002                ; 常時ON
MOV @D210 W0320          ; RB_制御信号  RBC3 ST3上下 制御信号1
;to PC
LDB M3                   ; OFFLINE_MODE
MPS
AND @R900                ; toPC) 書込み開始要求
OUT W0102.0              ; 書込み要求#1
MRD
AND @R901                ; toPC) BCR要求
OUT W0101.0              ; 基板読取要求#1
MRD
AND @L0                  ; 有効状態
OUT W0102.4              ; ｽﾃｰｼﾞ有効／無効#1
MRD
AND= @D51 K1             ; ﾜｰｸ有無記憶
OUT W0102.12             ; ﾜｰｸ検#1
MRD
MOV @D31 W0120           ; 下治具ID  ﾌｨｸｽﾁｬｰID#1
MRD
MOV @D30 W0124           ; 上治具ID  ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞID#1
MPP
MOV @D204 W0118          ; RB_現在POS NO.  ｼﾘﾝﾀﾞ現在値#1
;警報
LD @D42.0                ; 基板除去要求
OUT B0340                ; 832)_ST1 基板除去要求
LD @D42.1                ; ROM書込み中
OUT B0341                ; 833)_ST1 ROM書込み中
LD @D42.2                ; 下治具ｺﾈｸﾀ挿入確認
OUT B0342                ; 834)_ST1 下治具ｺﾈｸﾀ挿入確認
LD @D42.3                ; 治具をﾛｯｸしてください
OUT B0349                ; 841)_ST1 治具をﾛｯｸしてください
LD @D42.4                ; ﾜｰｸ投入要求
OUT B034C                ; 844)_ST1 ﾜｰｸ投入要求
;表示
LD CR2002                ; 常時ON
MOV @D49 D4400           ; ST状態  ST1状態
MOV.D @R1300 B1640       ; 下治具位置決め上下 下降PL  ST1 下治具位置決め上下 下降PL
BMOV @D0 D4000 K11       ; Ux-1 自動運転ｽﾃｯﾌﾟ  U7-1 自動運転ｽﾃｯﾌﾟ
END
ENDH
