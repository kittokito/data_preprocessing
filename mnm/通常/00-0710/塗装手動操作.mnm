DEVICE:51
;MODULE:塗装手動操作
;MODULE_TYPE:0
LDP R46206               ; 塗装NC原点復帰指令0.2SecPLS(Org)
ORP R46304               ; 塗装NC原点復帰、ﾊﾝﾄﾞ復帰後（Org
OR R45900                ; NC原点復帰開始記憶
ANB R45901               ; NC原点復帰完了記憶
ANB R41001               ; 塗装自動、手動SS切換ON PLS
ANB R41007               ; 塗装自動、手動SS切換確認OFF PLS
OUT R45900               ; NC原点復帰開始記憶
LD R45900                ; NC原点復帰開始記憶
AND R10207               ; 塗装NC原点停止フラグ
OR R45901                ; NC原点復帰完了記憶
AND R31115               ; 非常停止（OFFで非常停止）<#1>
OUT R45901               ; NC原点復帰完了記憶
;<h1/>塗装手動操作
LDB R30800               ; 塗装自動選択SS
AND R30801               ; 塗装手動選択SS
AND T5                   ; 電源ON後７秒
AND R31115               ; 非常停止（OFFで非常停止）<#1>
MC
;<h1/>NC現在位置エリアの確認
LD CR2002                ; 常時ON
MOV.L DM10004 DM5710     ; 塗装NC現在座標  現在位置ﾃﾞｰﾀ（符号付き2W）
LD>=.L DM5710 DM5700     ; 現在位置ﾃﾞｰﾀ（符号付き2W）  原点位置比較設定ﾃﾞｰﾀ（2W）
MPS
AND<=.L DM5710 DM82      ; 現在位置ﾃﾞｰﾀ（符号付き2W）  NC位置ﾃﾞｰﾀL No.1(待機)
OUT R46000               ; ｴﾘｱ1　原点⇔待機
MPP
AND=.L DM5710 DM82       ; 現在位置ﾃﾞｰﾀ（符号付き2W）  NC位置ﾃﾞｰﾀL No.1(待機)
OUT R46001               ; 待機位置エリア
LD>=.L DM5710 DM86       ; 現在位置ﾃﾞｰﾀ（符号付き2W）  NC位置ﾃﾞｰﾀL No.3(塗装完了)
AND<=.L DM5710 DM82      ; 現在位置ﾃﾞｰﾀ（符号付き2W）  NC位置ﾃﾞｰﾀL No.1(待機)
OUT R46002               ; ｴﾘｱ2　塗装完了<−>待機位置
LDB R46005               ; ｴﾘｱ5　塗装完了位置よりﾏｲﾅｽ側
AND>=.L DM5710 DM82      ; 現在位置ﾃﾞｰﾀ（符号付き2W）  NC位置ﾃﾞｰﾀL No.1(待機)
AND<=.L DM5710 DM90      ; 現在位置ﾃﾞｰﾀ（符号付き2W）  NC位置ﾃﾞｰﾀL No.5(受渡)
OUT R46003               ; ｴﾘｱ3　待機<−>受渡し位置
LD<=.L DM5710 DM84       ; 現在位置ﾃﾞｰﾀ（符号付き2W）  NC位置ﾃﾞｰﾀL No.2(塗装開始)
AND>=.L DM5710 DM86      ; 現在位置ﾃﾞｰﾀ（符号付き2W）  NC位置ﾃﾞｰﾀL No.3(塗装完了)
OUT R46004               ; ｴﾘｱ4　塗装開始<−>塗装完了
LD<=.L DM5710 DM86       ; 現在位置ﾃﾞｰﾀ（符号付き2W）  NC位置ﾃﾞｰﾀL No.3(塗装完了)
OUT R46005               ; ｴﾘｱ5　塗装完了位置よりﾏｲﾅｽ側
LD<.L DM10004 +0         ; 塗装NC現在座標
OUT R46006               ; ｴﾘｱ6　現在位置ﾏｲﾅｽ
LD>=.L DM5710 DM5704     ; 現在位置ﾃﾞｰﾀ（符号付き2W）  乾燥炉受渡ｵｰﾊﾞｰ位置比較設定Reg2W
OUT R46007               ; 乾燥炉受け渡し位置ｵｰﾊﾞｴﾘｱ
LD R46012                ; 塗装NCｽﾃｯﾌﾟPB OFF確認
AND R30807               ; 塗装送りステップPB
AND R45901               ; NC原点復帰完了記憶
ANB R31801               ; 塗装NC移動中
OR R46010                ; 塗装NCｽﾃｯﾌﾟ開始PLS(0.3SecON)
MPS
ANB T120                 ; 塗装NCｽﾃｯﾌﾟ開始信号OFF Dly
OUT R46010               ; 塗装NCｽﾃｯﾌﾟ開始PLS(0.3SecON)
MPP
TMR #120 #3              ; 塗装NCｽﾃｯﾌﾟ開始信号OFF Dly
LD R10207                ; 塗装NC原点停止フラグ
OR R49007                ; NC位置（移動指令No.7）
MOV #0 DM5900            ; NCｽﾃｯﾌﾟ送りNo.Reg
LDP R10205               ; 塗装NC位置決め動作完了
INC DM5900               ; NCｽﾃｯﾌﾟ送りNo.Reg
LD CR2002                ; 常時ON
LDA DM5900               ; NCｽﾃｯﾌﾟ送りNo.Reg
CON
MPX #0
CON
STA R49000               ; NC原点位置（移動指令No.0）
LD R49000                ; NC原点位置（移動指令No.0）
LD R49001                ; NC受取位置（移動指令No.1）
AND T45                  ; 塗装押さえ下降端
ORL
AND T47                  ; 塗装ハンド１上昇端
AND T48                  ; 塗装ハンド２上昇端
LD R49002                ; NC待機位置（移動指令No.2）
LD T46                   ; 塗装押さえ上昇端
AND T49                  ; 塗装ハンド１下降端
LD T45                   ; 塗装押さえ下降端
AND T47                  ; 塗装ハンド１上昇端
AND T48                  ; 塗装ハンド２上昇端
ORL
ANL
ORL
LD R49003                ; NC塗装開始位置（移動指令No.3）
AND T45                  ; 塗装押さえ下降端
LD T47                   ; 塗装ハンド１上昇端
AND T48                  ; 塗装ハンド２上昇端
LD T49                   ; 塗装ハンド１下降端
AND T50                  ; 塗装ハンド２下降端
ORL
ANL
ORL
LD R49004                ; NC塗装終了位置（移動指令No.4）
LD T45                   ; 塗装押さえ下降端
AND T47                  ; 塗装ハンド１上昇端
AND T48                  ; 塗装ハンド２上昇端
LD T46                   ; 塗装押さえ上昇端
AND T49                  ; 塗装ハンド１下降端
AND T48                  ; 塗装ハンド２上昇端
ORL
ANL
ORL
LD R49005                ; NC待機位置（移動指令No.5）
AND T47                  ; 塗装ハンド１上昇端
AND T48                  ; 塗装ハンド２上昇端
ORL
LD R49006                ; NC受渡位置（移動指令No.6）
AND T45                  ; 塗装押さえ下降端
AND T47                  ; 塗装ハンド１上昇端
AND T48                  ; 塗装ハンド２上昇端
ORL
AND R46010               ; 塗装NCｽﾃｯﾌﾟ開始PLS(0.3SecON)
OUT R46011               ; NCｽﾃｯﾌﾟ起動指令（Man）
LDB R30807               ; 塗装送りステップPB
OUT R46012               ; 塗装NCｽﾃｯﾌﾟPB OFF確認
;<h1/>塗装NC・Jog
LDB R31801               ; 塗装NC移動中
OR R46100                ; 塗装NC Jog前進SW ON確認
AND R30808               ; 塗装送り　前進SW
ANB R46103               ; 塗装NC Jog後退指令（Man）
AND R45901               ; NC原点復帰完了記憶
OUT R46100               ; 塗装NC Jog前進SW ON確認
LD R46000                ; ｴﾘｱ1　原点⇔待機
LD T45                   ; 塗装押さえ下降端
AND T47                  ; 塗装ハンド１上昇端
LD T46                   ; 塗装押さえ上昇端
AND T49                  ; 塗装ハンド１下降端
ORL
ANL
LD R46002                ; ｴﾘｱ2　塗装完了<−>待機位置
ANB R46003               ; ｴﾘｱ3　待機<−>受渡し位置
AND T46                  ; 塗装押さえ上昇端
LD R46003                ; ｴﾘｱ3　待機<−>受渡し位置
AND T47                  ; 塗装ハンド１上昇端
ORL
AND T48                  ; 塗装ハンド２上昇端
ORL
LD R46006                ; ｴﾘｱ6　現在位置ﾏｲﾅｽ
AND T47                  ; 塗装ハンド１上昇端
AND T48                  ; 塗装ハンド２上昇端
ORL
AND T48                  ; 塗装ハンド２上昇端
AND R46100               ; 塗装NC Jog前進SW ON確認
OUT R46101               ; 塗装NC Jog前進指令（Man）
LDB R31801               ; 塗装NC移動中
OR R46102                ; 塗装NC Jog後退SW ON確認
AND R30809               ; 塗装送り　後退SW
ANB R46101               ; 塗装NC Jog前進指令（Man）
AND R45901               ; NC原点復帰完了記憶
OUT R46102               ; 塗装NC Jog後退SW ON確認
LD R46000                ; ｴﾘｱ1　原点⇔待機
OR R46003                ; ｴﾘｱ3　待機<−>受渡し位置
OR R46007                ; 乾燥炉受け渡し位置ｵｰﾊﾞｴﾘｱ
AND T45                  ; 塗装押さえ下降端
LD R10210                ; 塗装NCゾーン３
ANB R46002               ; ｴﾘｱ2　塗装完了<−>待機位置
ORL
AND T47                  ; 塗装ハンド１上昇端
LD R46001                ; 待機位置エリア
OR R46002                ; ｴﾘｱ2　塗装完了<−>待機位置
AND T46                  ; 塗装押さえ上昇端
AND T49                  ; 塗装ハンド１下降端
ORL
AND T48                  ; 塗装ハンド２上昇端
LD R46003                ; ｴﾘｱ3　待機<−>受渡し位置
ANB R10208               ; 塗装NCゾーン１
ANB R10210               ; 塗装NCゾーン３
AND T46                  ; 塗装押さえ上昇端
AND T49                  ; 塗装ハンド１下降端
ORL
LD R46004                ; ｴﾘｱ4　塗装開始<−>塗装完了
LD T46                   ; 塗装押さえ上昇端
OR T45                   ; 塗装押さえ下降端
ANL
AND T49                  ; 塗装ハンド１下降端
AND T50                  ; 塗装ハンド２下降端
ORL
LD R46002                ; ｴﾘｱ2　塗装完了<−>待機位置
AND T46                  ; 塗装押さえ上昇端
AND T49                  ; 塗装ハンド１下降端
ORL
LD R46006                ; ｴﾘｱ6　現在位置ﾏｲﾅｽ
OR R46005                ; ｴﾘｱ5　塗装完了位置よりﾏｲﾅｽ側
AND T47                  ; 塗装ハンド１上昇端
AND T48                  ; 塗装ハンド２上昇端
ORL
AND R46102               ; 塗装NC Jog後退SW ON確認
OUT R46103               ; 塗装NC Jog後退指令（Man）
;<h1/>塗装列切り替え
LD R46105                ; 塗装列切換SW OFF確認
AND R30810               ; 塗装列切換SW
ANB R31801               ; 塗装NC移動中
OR R46104                ; 塗装列切換開始PLS Rob 0.2Sec(Man
LD T47                   ; 塗装ハンド１上昇端
OR T49                   ; 塗装ハンド１下降端
ANL
AND T48                  ; 塗装ハンド２上昇端
ANB T121                 ; 塗装列切替開始OFF　Dly
OUT R46104               ; 塗装列切換開始PLS Rob 0.2Sec(Man
TMR #121 #2              ; 塗装列切替開始OFF　Dly
LDB R30810               ; 塗装列切換SW
OUT R46105               ; 塗装列切換SW OFF確認
;<h1/>塗装CYL関係
LD R46107                ; 塗装押え上昇SW OFF確認
AND R30811               ; 塗装押え上下　上昇SW
ANB R31801               ; 塗装NC移動中
OR R46106                ; 塗装押え上昇（Man）
LDB R46000               ; ｴﾘｱ1　原点⇔待機
OR R10208                ; 塗装NCゾーン１
AND T47                  ; 塗装ハンド１上昇端
AND T48                  ; 塗装ハンド２上昇端
OR R46001                ; 待機位置エリア
LD R46000                ; ｴﾘｱ1　原点⇔待機
OR R46002                ; ｴﾘｱ2　塗装完了<−>待機位置
AND T48                  ; 塗装ハンド２上昇端
AND T49                  ; 塗装ハンド１下降端
ORL
LD T49                   ; 塗装ハンド１下降端
AND T50                  ; 塗装ハンド２下降端
ORL
OR R46003                ; ｴﾘｱ3　待機<−>受渡し位置
ANL
AND R45901               ; NC原点復帰完了記憶
ANB R30812               ; 塗装押え上下　下降SW
OUT R46106               ; 塗装押え上昇（Man）
LDB R30811               ; 塗装押え上下　上昇SW
OUT R46107               ; 塗装押え上昇SW OFF確認
LD R46109                ; 塗装押え下降SW OFF確認
AND R30812               ; 塗装押え上下　下降SW
ANB R31801               ; 塗装NC移動中
OR R46008                ; 塗装押え下降（Man）
LD T47                   ; 塗装ハンド１上昇端
AND T48                  ; 塗装ハンド２上昇端
LD R46002                ; ｴﾘｱ2　塗装完了<−>待機位置
AND T49                  ; 塗装ハンド１下降端
AND T50                  ; 塗装ハンド２下降端
ORL
ORB R46004               ; ｴﾘｱ4　塗装開始<−>塗装完了
ANL
AND R45901               ; NC原点復帰完了記憶
ANB R30811               ; 塗装押え上下　上昇SW
OUT R46008               ; 塗装押え下降（Man）
LDB R30812               ; 塗装押え上下　下降SW
OUT R46109               ; 塗装押え下降SW OFF確認
LD R46111                ; 塗装ﾊﾝﾄﾞ２上昇SW OFF確認
AND R30813               ; 塗装ハンド上下　上昇SW
LDB R46004               ; ｴﾘｱ4　塗装開始<−>塗装完了
ANB R10209               ; 塗装NCゾーン２
OR T46                   ; 塗装押さえ上昇端
ANL
ANB R31801               ; 塗装NC移動中
OR R46110                ; 塗装ﾊﾝﾄﾞ２上昇（Man）
AND R45901               ; NC原点復帰完了記憶
ANB R30814               ; 塗装ハンド上下　下降SW
OUT R46110               ; 塗装ﾊﾝﾄﾞ２上昇（Man）
LDB R30813               ; 塗装ハンド上下　上昇SW
OUT R46111               ; 塗装ﾊﾝﾄﾞ２上昇SW OFF確認
LD R46113                ; 塗装ﾊﾝﾄﾞ2上昇SW OFF確認
AND R30813               ; 塗装ハンド上下　上昇SW
AND T48                  ; 塗装ハンド２上昇端
ANB R31801               ; 塗装NC移動中
OR R46112                ; 塗装ﾊﾝﾄﾞ１上昇（Man）
LDB R46000               ; ｴﾘｱ1　原点⇔待機
OR R46001                ; 待機位置エリア
ANL
ANB R10209               ; 塗装NCゾーン２
AND R45901               ; NC原点復帰完了記憶
ANB R30814               ; 塗装ハンド上下　下降SW
OUT R46112               ; 塗装ﾊﾝﾄﾞ１上昇（Man）
LDB R30813               ; 塗装ハンド上下　上昇SW
OUT R46113               ; 塗装ﾊﾝﾄﾞ2上昇SW OFF確認
LD R46115                ; 塗装ﾊﾝﾄﾞ下降SW OFF確認
AND R30814               ; 塗装ハンド上下　下降SW
ANB R31801               ; 塗装NC移動中
LD T40                   ; 塗装パレット検出
AND T51                  ; 塗装ハンド右閉端
AND T53                  ; 塗装ハンド左閉端
LD T1040                 ; 塗装パレット無し検出
AND T52                  ; 塗装ハンド右開端
AND T54                  ; 塗装ハンド左開端
ORL
ANL
OR R46114                ; 塗装ﾊﾝﾄﾞ１下降（Man）
LDB R46000               ; ｴﾘｱ1　原点⇔待機
OR R46001                ; 待機位置エリア
ANL
ANB R10209               ; 塗装NCゾーン２
AND R45901               ; NC原点復帰完了記憶
ANB R30813               ; 塗装ハンド上下　上昇SW
OUT R46114               ; 塗装ﾊﾝﾄﾞ１下降（Man）
LDB R30814               ; 塗装ハンド上下　下降SW
OUT R46115               ; 塗装ﾊﾝﾄﾞ下降SW OFF確認
LD R46201                ; 塗装ﾊﾝﾄﾞ下降SW OFF確認
AND R30814               ; 塗装ハンド上下　下降SW
AND T49                  ; 塗装ハンド１下降端
ANB R31801               ; 塗装NC移動中
LD T40                   ; 塗装パレット検出
AND T51                  ; 塗装ハンド右閉端
AND T53                  ; 塗装ハンド左閉端
LD T1040                 ; 塗装パレット無し検出
AND T52                  ; 塗装ハンド右開端
AND T54                  ; 塗装ハンド左開端
ORL
ANL
OR R46200                ; 塗装ﾊﾝﾄﾞ２下降（Man）
AND R45901               ; NC原点復帰完了記憶
ANB R30813               ; 塗装ハンド上下　上昇SW
OUT R46200               ; 塗装ﾊﾝﾄﾞ２下降（Man）
LDB R30814               ; 塗装ハンド上下　下降SW
OUT R46201               ; 塗装ﾊﾝﾄﾞ下降SW OFF確認
LD R46203                ; 塗装ﾊﾝﾄﾞ開SW OFF確認
AND R30900               ; 塗装ハンド　開SW
ANB R31801               ; 塗装NC移動中
OR R46202                ; 塗装ﾊﾝﾄﾞ開（Man）
ANB R30815               ; 塗装ハンド　閉SW
OUT R46202               ; 塗装ﾊﾝﾄﾞ開（Man）
LDB R30900               ; 塗装ハンド　開SW
OUT R46203               ; 塗装ﾊﾝﾄﾞ開SW OFF確認
LD R46205                ; 塗装ﾊﾝﾄﾞ閉SW OFF確認
AND R30815               ; 塗装ハンド　閉SW
ANB R31801               ; 塗装NC移動中
OR R46204                ; 塗装ﾊﾝﾄﾞ閉（Man）
ANB R30900               ; 塗装ハンド　開SW
OUT R46204               ; 塗装ﾊﾝﾄﾞ閉（Man）
LDB R30815               ; 塗装ハンド　閉SW
OUT R46205               ; 塗装ﾊﾝﾄﾞ閉SW OFF確認
;<h1/>NC原点復帰（手動)
LD R46207                ; 塗装起動PB OFF確認
AND R30802               ; 塗装起動ＰＢ
ANB R10207               ; 塗装NC原点停止フラグ
OR R46206                ; 塗装NC原点復帰指令0.2SecPLS(Org)
LD T45                   ; 塗装押さえ下降端
OR R10208                ; 塗装NCゾーン１
ANL
AND T47                  ; 塗装ハンド１上昇端
AND T48                  ; 塗装ハンド２上昇端
ANB T122                 ; 塗装NC原点復帰指令OFF　Dly
OUT R46206               ; 塗装NC原点復帰指令0.2SecPLS(Org)
TMR #122 #2              ; 塗装NC原点復帰指令OFF　Dly
LDB R30802               ; 塗装起動ＰＢ
OUT R46207               ; 塗装起動PB OFF確認
;<h1/>塗装列ロボット原点復帰（手動）
LD R46209                ; 塗装起動PB　OFF確認
AND R30802               ; 塗装起動ＰＢ
OR R46208                ; 塗装列ﾛﾎﾞｯﾄ原点復帰0.2SecPLS(Org
AND R10207               ; 塗装NC原点停止フラグ
ANB R31710               ; １８A スタート
OUT R46208               ; 塗装列ﾛﾎﾞｯﾄ原点復帰0.2SecPLS(Org
TMR #123 #3              ; 塗装列ロボット原点復帰OFFDly
LDB R30802               ; 塗装起動ＰＢ
OUT R46209               ; 塗装起動PB　OFF確認
MCR
END
ENDH
