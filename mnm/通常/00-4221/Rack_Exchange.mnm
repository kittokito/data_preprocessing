DEVICE:53
;MODULE:Rack_Exchange
;MODULE_TYPE:0
LD X114D                 ; RB9_END
AND X114B                ; RB9_OUT3　(ORG-S)
ANB M72                  ; 自動運転開始
AND M4470                ; 排出ﾌﾟｯｼｬｰRB7待機位置
LD X136F                 ; 基板排出収納ｽﾄｯﾊﾟｰ下降端
AND X137A                ; 基板排出排出ｽﾄｯﾊﾟｰ上昇端
OR CR2002                ; 常時ON
ANL
OUT M5980                ; ﾗｯｸ交換原点
LD M31                   ; 手動ﾓｰﾄﾞ
AND M32                  ; ﾒｲﾝ手動操作可能条件
AND X02                  ; 安全扉正常
AND M4480                ; ﾕﾆｯﾄ7原点
ANB M4481                ; ﾕﾆｯﾄ7全異常
ANB M5985                ; 手動ﾗｯｸ交換起動中
ANB M4484                ; ﾕﾆｯﾄ7原点復帰中
ANB M4485                ; ﾕﾆｯﾄ7起動中
ANB M82                  ; 原点復帰開始
ANB B0EB                 ; 排出ﾘﾌﾀ　ﾗｯｸ内基板情報有ります
LD= D4200 K0             ; 排出ﾗｯｸ内基板有無確認(0=基板無)
ORB M4375                ; ﾗｯｸ排出ﾘﾌﾀ　ﾗｯｸ確認
ANL
OUT M5982                ; ﾗｯｸ交換起動条件
LDB M50                  ; 運転準備
OR T15                   ; 強制停止
OUT M5983                ; 起動OFF
LD X138A                 ; ﾗｯｸ交換開始SW
AND M5985                ; 手動ﾗｯｸ交換起動中
TMR K1000 K50            ; 手動ﾗｯｸ交換ﾓｰﾄﾞﾘｾｯﾄﾀｲﾏｰ
LDB M72                  ; 自動運転開始
LD X138A                 ; ﾗｯｸ交換開始SW
OR B1180                 ; 排出ﾘﾌﾀ　ﾗｯｸ交換一時停止確認SW
ANL
AND M5982                ; ﾗｯｸ交換起動条件
OR M5985                 ; 手動ﾗｯｸ交換起動中
ANB M5983                ; 起動OFF
ANB M5560                ; 手動ﾗｯｸ交換ｻｲｸﾙ終了
ANB M4484                ; ﾕﾆｯﾄ7原点復帰中
AND M31                  ; 手動ﾓｰﾄﾞ
ANB T1000                ; 手動ﾗｯｸ交換ﾓｰﾄﾞﾘｾｯﾄﾀｲﾏｰ
ANB M60                  ; ｴﾗｰ発生
OUT M5985                ; 手動ﾗｯｸ交換起動中
LD CR2002                ; 常時ON
FMOV K0 M5500 K4
LDB M5985                ; 手動ﾗｯｸ交換起動中
MOV K0 D5500             ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5985                 ; 手動ﾗｯｸ交換起動中
MOV D5500 Z1             ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
SET M5500:Z1
LD M5500
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5501
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5502                 ; 排出ﾘﾌﾀ　ﾗｯｸ交換動作中ON
AND M5700                ; 排出ﾘﾌﾀ　ﾗｯｸ交換動作中点滅
AND Y51                  ; 安全扉ﾛｯｸ
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5502                 ; 排出ﾘﾌﾀ　ﾗｯｸ交換動作中ON
OR M5700                 ; 排出ﾘﾌﾀ　ﾗｯｸ交換動作中点滅
ANB M5518                ; 排出ﾘﾌﾀ　ﾗｯｸ交換完了動作開始
AND M5985                ; 手動ﾗｯｸ交換起動中
OUT M5700                ; 排出ﾘﾌﾀ　ﾗｯｸ交換動作中点滅
LD M5503                 ; 基板排出ﾗｯｸ位置決め上昇
AND X02                  ; 安全扉正常
AND M4401                ; 基板排出ﾗｯｸ位置決め上昇端
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5504
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5505
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5506                 ; 排出ﾘﾌﾀｰ基板飛び出し確認
ANB M130                 ; 一時停止
AND X02                  ; 安全扉正常
AND M3904                ; 乾燥炉出口側ｼｬｯﾀｰ閉端
AND M4470                ; 排出ﾌﾟｯｼｬｰRB7待機位置
AND X1374                ; 排出ﾘﾌﾀｰ基板飛び出し確認1
AND X1375                ; 排出ﾘﾌﾀｰ基板飛び出し確認2
ANB M5407                ; ﾘﾀｰﾝCVﾗｯｸ通過確認
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5507
AND X02                  ; 安全扉正常
AND M4300                ; 排出ﾘﾌﾀRB9動作可条件
ANB M4420                ; 基板排出RB9動作中
MOV K3 D4020             ; 基板排出RB9_指令POS
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5508                 ; 基板排出RB9ﾗｯｸ交換位置移動
AND M4420                ; 基板排出RB9動作中
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5509
ANB M4420                ; 基板排出RB9動作中
AND X114D                ; RB9_END
ANB X114C                ; RB9_BUSY
AND= D4024 K3            ; 基板排出RB9_完了POS
AND X02                  ; 安全扉正常
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5510                 ; 基板排出収納ｽﾄｯﾊﾟｰ上昇
AND X02                  ; 安全扉正常
AND M4403                ; 基板排出収納ｽﾄｯﾊﾟｰ上昇端
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5511                 ; 基板排出排出ｽﾄｯﾊﾟｰ下降
AND X02                  ; 安全扉正常
AND M4405                ; 基板排出排出ｽﾄｯﾊﾟｰ下降端
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5512                 ; 基板排出ﾗｯｸ位置決め下降
AND X02                  ; 安全扉正常
AND M4402                ; 基板排出ﾗｯｸ位置決め下降端
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5513
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5514
AND M5701                ; 排出ﾘﾌﾀ ﾗｯｸ交換完了待ち点滅
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5514
OR M5701                 ; 排出ﾘﾌﾀ ﾗｯｸ交換完了待ち点滅
ANB M5518                ; 排出ﾘﾌﾀ　ﾗｯｸ交換完了動作開始
AND M5985                ; 手動ﾗｯｸ交換起動中
OUT M5701                ; 排出ﾘﾌﾀ ﾗｯｸ交換完了待ち点滅
LD M5515
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5516
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5517                 ; 排出ﾘﾌﾀ　ﾗｯｸ交換完了待ち
AND X02                  ; 安全扉正常
LD M4407                 ; 排出ﾘﾌﾀｰﾗｯｸ到着確認
AND M4390                ; 排出ﾗｯｸ有り確認
LDB M4407                ; 排出ﾘﾌﾀｰﾗｯｸ到着確認
ANB M4390                ; 排出ﾗｯｸ有り確認
ORL
ANL
LD X138B                 ; ﾗｯｸ交換完了SW
OR B1182                 ; 排出ﾘﾌﾀ　ﾗｯｸ交換完了SW
ANL
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5518                 ; 排出ﾘﾌﾀ　ﾗｯｸ交換完了動作開始
AND M5702                ; 排出ﾘﾌﾀ　ﾗｯｸ交換完了動作点滅
ANB M5700                ; 排出ﾘﾌﾀ　ﾗｯｸ交換動作中点滅
ANB M5701                ; 排出ﾘﾌﾀ ﾗｯｸ交換完了待ち点滅
AND Y51                  ; 安全扉ﾛｯｸ
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5518                 ; 排出ﾘﾌﾀ　ﾗｯｸ交換完了動作開始
OR M5702                 ; 排出ﾘﾌﾀ　ﾗｯｸ交換完了動作点滅
ANB M5529
AND M5985                ; 手動ﾗｯｸ交換起動中
OUT M5702                ; 排出ﾘﾌﾀ　ﾗｯｸ交換完了動作点滅
LD M5519
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5520
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5521                 ; 基板排出ﾗｯｸ位置決め上昇
AND X02                  ; 安全扉正常
LD M4407                 ; 排出ﾘﾌﾀｰﾗｯｸ到着確認
AND X1376                ; 排出ﾘﾌﾀｰﾗｯｸ確認
OR CR2002                ; 常時ON
ANL
AND M4401                ; 基板排出ﾗｯｸ位置決め上昇端
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5522                 ; 基板排出排出ｽﾄｯﾊﾟｰ上昇
AND X02                  ; 安全扉正常
AND M4406                ; 基板排出排出ｽﾄｯﾊﾟｰ上昇端
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5523                 ; 基板排出収納ｽﾄｯﾊﾟｰ下降
AND X02                  ; 安全扉正常
AND M4404                ; 基板排出収納ｽﾄｯﾊﾟｰ下降端
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5524
MOV K0 D4112             ; ﾗｯｸｲﾝﾃﾞｯｸｽ違い記憶(1=違)
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5525                 ; 排出ﾘﾌﾀｰ基板飛び出し確認
ANB M130                 ; 一時停止
AND X02                  ; 安全扉正常
AND M3904                ; 乾燥炉出口側ｼｬｯﾀｰ閉端
AND M4470                ; 排出ﾌﾟｯｼｬｰRB7待機位置
AND X1374                ; 排出ﾘﾌﾀｰ基板飛び出し確認1
AND X1375                ; 排出ﾘﾌﾀｰ基板飛び出し確認2
ANB M5407                ; ﾘﾀｰﾝCVﾗｯｸ通過確認
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5526
ANB M130                 ; 一時停止
AND X02                  ; 安全扉正常
AND M4300                ; 排出ﾘﾌﾀRB9動作可条件
ANB M4420                ; 基板排出RB9動作中
MOV K1 D4020             ; 基板排出RB9_指令POS
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5527                 ; 基板排出RB9待機位置移動
AND M4420                ; 基板排出RB9動作中
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5528
ANB M4420                ; 基板排出RB9動作中
AND X114D                ; RB9_END
ANB X114C                ; RB9_BUSY
AND= D4024 K1            ; 基板排出RB9_完了POS
AND X02                  ; 安全扉正常
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5529
ANB M5702                ; 排出ﾘﾌﾀ　ﾗｯｸ交換完了動作点滅
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5530
ANB M130                 ; 一時停止
MPS
LD M4407                 ; 排出ﾘﾌﾀｰﾗｯｸ到着確認
AND X1376                ; 排出ﾘﾌﾀｰﾗｯｸ確認
AND M4401                ; 基板排出ﾗｯｸ位置決め上昇端
ANB M5407                ; ﾘﾀｰﾝCVﾗｯｸ通過確認
ANB M5405                ; ﾘﾀｰﾝCVｴｽｹｰﾌﾟ通過確認
AND X02                  ; 安全扉正常
ANL
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
MPP
LDB M5407                ; ﾘﾀｰﾝCVﾗｯｸ通過確認
AND M5405                ; ﾘﾀｰﾝCVｴｽｹｰﾌﾟ通過確認
LDB M4407                ; 排出ﾘﾌﾀｰﾗｯｸ到着確認
ANB X1376                ; 排出ﾘﾌﾀｰﾗｯｸ確認
AND M4401                ; 基板排出ﾗｯｸ位置決め上昇端
ORL
ANL
MOV K60 D5500            ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5531                 ; ﾘﾀｰﾝCV排出開始/ﾘﾀｰﾝCVｴｽｹﾌﾟ上昇端
AND X02                  ; 安全扉正常
AND M5703                ; ﾘﾀｰﾝCV排出中
AND M5401                ; ﾘﾀｰﾝCVｴｽｹﾌﾟ上昇端
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5531                 ; ﾘﾀｰﾝCV排出開始/ﾘﾀｰﾝCVｴｽｹﾌﾟ上昇端
OR M5703                 ; ﾘﾀｰﾝCV排出中
ANB M5539                ; ﾘﾀｰﾝCV排出中OFF
AND M5985                ; 手動ﾗｯｸ交換起動中
OUT M5703                ; ﾘﾀｰﾝCV排出中
LD M5532                 ; 基板排出ﾗｯｸ位置決め/収納ST下降
ANB M130                 ; 一時停止
AND X02                  ; 安全扉正常
AND M4402                ; 基板排出ﾗｯｸ位置決め下降端
AND M4404                ; 基板排出収納ｽﾄｯﾊﾟｰ下降端
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5533
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5534                 ; 安全扉正常確認
AND X02                  ; 安全扉正常
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5535                 ; ﾘﾀｰﾝCV排出動作中
MPS
LDB M130                 ; 一時停止
AND X02                  ; 安全扉正常
AND Y2422                ; ﾘﾀｰﾝCV移動ON
AND Y2428                ; 排出ﾘﾌﾀCV逆転ON
ANB M4407                ; 排出ﾘﾌﾀｰﾗｯｸ到着確認
ANB X1376                ; 排出ﾘﾌﾀｰﾗｯｸ確認
AND M5405                ; ﾘﾀｰﾝCVｴｽｹｰﾌﾟ通過確認
ANB M5407                ; ﾘﾀｰﾝCVﾗｯｸ通過確認
ANL
TMR K1010 K20
MPP
AND T1010
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5536                 ; ﾘﾀｰﾝCV排出完了
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5537                 ; 基板排出ﾗｯｸ位置決め上昇
AND X02                  ; 安全扉正常
AND M4401                ; 基板排出ﾗｯｸ位置決め上昇端
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5538                 ; 排出ﾘﾌﾀｰﾗｯｸ無し確認
AND X02                  ; 安全扉正常
AND M4401                ; 基板排出ﾗｯｸ位置決め上昇端
ANB M4407                ; 排出ﾘﾌﾀｰﾗｯｸ到着確認
ANB X1376                ; 排出ﾘﾌﾀｰﾗｯｸ確認
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5539                 ; ﾘﾀｰﾝCV排出中OFF
ANB M5703                ; ﾘﾀｰﾝCV排出中
INC D5500                ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
LD M5540
MOV K60 D5500            ; ﾗｯｸ交換運転ｽﾃｯﾌﾟ
;<h1/>ＲＢＯＴ　手動モード
LDP B1184                ; ROBOT　1軸手動ﾓｰﾄﾞSW
OUT M5801                ; ROBOT　1軸手動ﾓｰﾄﾞSWﾊﾟﾙｽ
LD M5801                 ; ROBOT　1軸手動ﾓｰﾄﾞSWﾊﾟﾙｽ
ANB M5802                ; ROBOT　1軸手動ﾓｰﾄﾞON
LDB M5801                ; ROBOT　1軸手動ﾓｰﾄﾞSWﾊﾟﾙｽ
AND M5802                ; ROBOT　1軸手動ﾓｰﾄﾞON
ORL
ANB M81                  ; 原点復帰動作中
OUT M5802                ; ROBOT　1軸手動ﾓｰﾄﾞON
OUT B1684                ; ROBOT　1軸手動ﾓｰﾄﾞPL
LDP B1185                ; ROBOT　2〜7軸手動ﾓｰﾄﾞSW
OUT M5803                ; ROBOT　2〜7軸手動ﾓｰﾄﾞSWﾊﾟﾙｽ
LD M5803                 ; ROBOT　2〜7軸手動ﾓｰﾄﾞSWﾊﾟﾙｽ
ANB M5804                ; ROBOT　2〜7軸手動ﾓｰﾄﾞON
LDB M5803                ; ROBOT　2〜7軸手動ﾓｰﾄﾞSWﾊﾟﾙｽ
AND M5804                ; ROBOT　2〜7軸手動ﾓｰﾄﾞON
ORL
ANB M81                  ; 原点復帰動作中
OUT M5804                ; ROBOT　2〜7軸手動ﾓｰﾄﾞON
LD X1009                 ; RB2_ﾓｰﾄﾞ(RMOD)
AND X1029                ; RB3_ﾓｰﾄﾞ(RMOD)
AND X1049                ; RB4_ﾓｰﾄﾞ(RMOD)
AND X1069                ; RB5_ﾓｰﾄﾞ(RMOD)
AND X1089                ; RB6_ﾓｰﾄﾞ(RMOD)
AND X1109                ; RB7_ﾓｰﾄﾞ(RMOD)
OUT B1685                ; ROBOT　2〜7軸手動ﾓｰﾄﾞPL
;<h1/>自動中ﾗｯｸ交換処理
LD X138A                 ; ﾗｯｸ交換開始SW
AND= D4112 K0            ; ﾗｯｸｲﾝﾃﾞｯｸｽ違い記憶(1=違)
AND= D4113 K0            ; 不明基板有り記憶(1=基板有)
AND= D3712 K0            ; ﾗｯｸｲﾝﾃﾞｯｸｽ違い記憶
AND= D3713 K0            ; 不明基板有り記憶
DIFU M5902               ; ﾗｯｸ交換開始SWﾊﾟﾙｽ
LD M5902                 ; ﾗｯｸ交換開始SWﾊﾟﾙｽ
ANB M5900                ; 自動中ﾗｯｸ交換処理中
LDB M5902                ; ﾗｯｸ交換開始SWﾊﾟﾙｽ
AND M5900                ; 自動中ﾗｯｸ交換処理中
ORL
ANB M4090                ; 排出ﾘﾌﾀ ﾗｯｸ交換一時停止ﾗﾝﾌﾟ点滅
AND M72                  ; 自動運転開始
ANB M36                  ; 払出ﾓｰﾄﾞ
OUT M5900                ; 自動中ﾗｯｸ交換処理中
LDP M5900                ; 自動中ﾗｯｸ交換処理中
MOV K1 D4114             ; ﾗｯｸ交換要求(1=要求有)
LDF M5900                ; 自動中ﾗｯｸ交換処理中
MOV K0 D4114             ; ﾗｯｸ交換要求(1=要求有)
END
ENDH
