DEVICE:53
;MODULE:UT17_High_ST4
;MODULE_TYPE:0
;SCRIPT_TYPE:
;<h1/>□_入力受け
;関連する入力受け(ｾﾝｻのﾃﾞｨﾚｲﾀｲﾏ等)を必要があれば作成する。
;通常は入力ﾕﾆｯﾄに入力時定数(ﾃﾞｨﾚｲ)があるので直接使用しても問題は無い。
LD X1303                 ; 高温槽全扉正常(まとめ)
OR M37                   ; ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
TMR K1701 K5             ; HiST4扉閉
;ｺﾝﾀｸﾄﾍｯﾄﾞID
LD X1394                 ; HiST4_部_ｺﾝﾀｸﾄﾍｯﾄﾞID_1
OUT D9106.0
LD X1395                 ; HiST4_部_ｺﾝﾀｸﾄﾍｯﾄﾞID_2
OUT D9106.1
LD X1396                 ; HiST4_部_ｺﾝﾀｸﾄﾍｯﾄﾞID_4
OUT D9106.2
;ﾊﾟﾚｯﾄID
LD X1397                 ; HiST4_部_ﾊﾟﾚｯﾄID_1
OUT D9107.0
LD X1398                 ; HiST4_部_ﾊﾟﾚｯﾄID_2
OUT D9107.1
LD X1399                 ; HiST4_部_ﾊﾟﾚｯﾄID_4
OUT D9107.2
;ＩＤ保持
LD M71                   ; 自動運転開始BZ
AND L1700                ; HiST4_有効状態
LD M10412                ; HiST4_ID保持ﾄﾘｶﾞ
ANB M10410               ; HiST4_無効中
ORL
AND M71                  ; 自動運転開始BZ
OUT M10412               ; HiST4_ID保持ﾄﾘｶﾞ
;____ｺﾝﾀｸﾄﾍｯﾄﾞＩＤ保持
;※PC送信用は生ﾃﾞｰﾀに変更
LD L1700                 ; HiST4_有効状態
MPS
TMR K1706 K5             ; HiST4_ｺﾝﾀｸﾄﾍｯﾄﾞID_更新_DLY
MPP
AND T1706                ; HiST4_ｺﾝﾀｸﾄﾍｯﾄﾞID_更新_DLY
@MOV D9106 D9100         ; HiST4_ｺﾝﾀｸﾄﾍｯﾄﾞID_Copy  HiST4_ｺﾝﾀｸﾄﾍｯﾄﾞID
LD CR2002                ; 常時ON
MOV D9106 W013B          ; HiST4_ｺﾝﾀｸﾄﾍｯﾄﾞID_Copy  ﾃｽﾄﾍｯﾄﾞID#4
LDB L1700                ; HiST4_有効状態
MOV K0 D9100             ; HiST4_ｺﾝﾀｸﾄﾍｯﾄﾞID
;____ﾊﾟﾚｯﾄID保持
LD L1700                 ; HiST4_有効状態
LD M10121                ; RB15_ﾜｰｸ受取り位置(ID確認位置)
OR T1707                 ; HiST4_ﾊﾟﾚｯﾄID_更新_DLY
ANL
TMR K1707 K5             ; HiST4_ﾊﾟﾚｯﾄID_更新_DLY
@MOV D9107 D9101         ; HiST4_ﾊﾟﾚｯﾄID_ｾﾝｻ状態  HiST4_ﾊﾟﾚｯﾄID
LD CR2002                ; 常時ON
MOV D9101 W0135          ; HiST4_ﾊﾟﾚｯﾄID  ﾊﾟﾚｯﾄID#4
LDB L1700                ; HiST4_有効状態
MOV K0 D9101             ; HiST4_ﾊﾟﾚｯﾄID
;<h1/>__ST_有効/無効選択
;段取り状態中ﾌﾗｸﾞの追加
;自動中は段取り状態中に、ST上のﾜｰｸ無、RBﾊﾝﾄﾞﾜｰｸ無し、供給部ﾜｰｸ無しにて無効状態OKとなる
LDPB X139F               ; HiST4_検査_有効/無効SW
ANPB B128A               ; HiST4検査_有効/無効_Tpb
INV
ANB L1700                ; HiST4_有効状態
OR M10404                ; HiST4検査_有効確認要求
LD M300                  ; PC通信正常
OR M3                    ; OFFLINE_MODE
ANL
ANB M10405               ; HiST4検査_有効確認OK
OUT M10404               ; HiST4検査_有効確認要求
LD M10404                ; HiST4検査_有効確認要求
AND W0107.11             ; Hi_ST4ﾁｪｯｶ-確認要求
LD W07.11                ; Hi_ST4ﾁｪｯｶ-確認完了
OR M3                    ; OFFLINE_MODE
ANL
OUT M10405               ; HiST4検査_有効確認OK
LD M10405                ; HiST4検査_有効確認OK
ANB W05.4                ; ｽﾃｰｼﾞ#4 無効切替要求
LDB X139F                ; HiST4_検査_有効/無効SW
ANB B128A                ; HiST4検査_有効/無効_Tpb
ANB W05.4                ; ｽﾃｰｼﾞ#4 無効切替要求
INV
AND L1700                ; HiST4_有効状態
ORL
OUT M10406               ; HiST4検査_有効/無効要求
LD M71                   ; 自動運転開始BZ
LDB M7981                ; ﾊﾝﾄﾞ1_Hi検査未了品
ANB M7989                ; ﾊﾝﾄﾞ1_Hi検査ST5再検品
OR M7983                 ; ﾊﾝﾄﾞ1_OK品
ANL
LDB M7991                ; ﾊﾝﾄﾞ2_Hi検査未了品
ANB M7999                ; ﾊﾝﾄﾞ2_Hi検査ST5再検品
OR M7993                 ; ﾊﾝﾄﾞ2_OK品
ANL
AND= D9201 K0            ; HiST4 ﾜｰｸ有無記憶
LDB M10485               ; U17_起動中
LD M10001                ; U17-1_S01
ANB M7903                ; 【搬送】搬送→Hi_ST4搬送開始
ORL
ANL
ANB M8036                ; ﾊﾝﾄﾞ1_HiST4給材中ﾌﾗｸﾞ
ANB M8037                ; ﾊﾝﾄﾞ2_HiST4給材中ﾌﾗｸﾞ
ANB M7981                ; ﾊﾝﾄﾞ1_Hi検査未了品
ANB M7991                ; ﾊﾝﾄﾞ2_Hi検査未了品
OUT M10407               ; HiST4_自動中無効条件OK
LDB M71                  ; 自動運転開始BZ
OR M10407                ; HiST4_自動中無効条件OK
OUT M10408               ; HiST4_無効OK条件
LD M10409                ; HiST4_無効予約(自動運転)
ANB M10410               ; HiST4_無効中
ANP M10406               ; HiST4検査_有効/無効要求
OUT M10411               ; HiST4_予約ｷｬﾝｾﾙ
LDP M10406               ; HiST4検査_有効/無効要求
AND L1700                ; HiST4_有効状態
AND M71                  ; 自動運転開始BZ
ANB M10409               ; HiST4_無効予約(自動運転)
LD M10409                ; HiST4_無効予約(自動運転)
ANB M10410               ; HiST4_無効中
ANB M10411               ; HiST4_予約ｷｬﾝｾﾙ
ORL
OUT M10409               ; HiST4_無効予約(自動運転)
LD M10409                ; HiST4_無効予約(自動運転)
AND M10408               ; HiST4_無効OK条件
LDP M10406               ; HiST4検査_有効/無効要求
ANB M41                  ; ﾕﾆｯﾄ_起動中
ORL
LDB B0222                ; B222_547)HiST4_ﾃｽﾄﾍｯﾄﾞID_不一致
ANB B0223                ; B223_548)HiST4_ﾊﾟﾚｯﾄID_不一致
INV
MEP
ORL
LD M10410                ; HiST4_無効中
ANB L1700                ; HiST4_有効状態
ORL
OUT M10410               ; HiST4_無効中
;<h1/>__ST_有効処理
LDP M10406               ; HiST4検査_有効/無効要求
LD<> D9106 K0            ; HiST4_ｺﾝﾀｸﾄﾍｯﾄﾞID_Copy
AND<> D9107 K0           ; HiST4_ﾊﾟﾚｯﾄID_ｾﾝｻ状態
AND M10121               ; RB15_ﾜｰｸ受取り位置(ID確認位置)
LD M35                   ; 空運転ﾓｰﾄﾞ
AND= D9106 K0            ; HiST4_ｺﾝﾀｸﾄﾍｯﾄﾞID_Copy
AND= D9107 K0            ; HiST4_ﾊﾟﾚｯﾄID_ｾﾝｻ状態
ORL
ANL
ANB L1700                ; HiST4_有効状態
LD L1700                 ; HiST4_有効状態
ANB M10410               ; HiST4_無効中
LD M300                  ; PC通信正常
OR M3                    ; OFFLINE_MODE
ANL
ORL
OUT L1700                ; HiST4_有効状態
;JIG_ID一致確認
LD L1700                 ; HiST4_有効状態
MPS
LD= D9100 D7211          ; HiST4_ｺﾝﾀｸﾄﾍｯﾄﾞID  ﾊﾝﾄﾞ1 高温検査ﾃｽﾄﾍｯﾄﾞID
AND= D9101 D7210         ; HiST4_ﾊﾟﾚｯﾄID  ﾊﾝﾄﾞ1 高温検査ﾊﾟﾚｯﾄID
LD M35                   ; 空運転ﾓｰﾄﾞ
AND= D9100 K0            ; HiST4_ｺﾝﾀｸﾄﾍｯﾄﾞID
AND= D9101 K0            ; HiST4_ﾊﾟﾚｯﾄID
ORL
ANL
OUT M10401               ; HiST4-搬送ﾊﾝﾄﾞ1ID一致ﾌﾗｸﾞ
MPP
LD= D9100 D7311          ; HiST4_ｺﾝﾀｸﾄﾍｯﾄﾞID  ﾊﾝﾄﾞ2 高温検査ﾃｽﾄﾍｯﾄﾞID
AND= D9101 D7310         ; HiST4_ﾊﾟﾚｯﾄID  ﾊﾝﾄﾞ2 高温検査ﾊﾟﾚｯﾄID
LD M35                   ; 空運転ﾓｰﾄﾞ
AND= D9100 K0            ; HiST4_ｺﾝﾀｸﾄﾍｯﾄﾞID
AND= D9101 K0            ; HiST4_ﾊﾟﾚｯﾄID
ORL
ANL
OUT M10402               ; HiST4-搬送ﾊﾝﾄﾞ2ID一致ﾌﾗｸﾞ
;<h1/>__ﾛﾎﾞｯﾄ等機器入力受け
;<h1/>□_装置状態・動作条件
;ﾕﾆｯﾄまとめ
LD M10070                ; U17-1原点
AND M10230               ; U17-3原点
OUT M10480               ; U17_原点
;□ 非常停止
LDB M10071               ; U17-1全異常
ANB M10231               ; U17-3全異常
INV
OUT M10481               ; U17_即停止異常
;□ 起動条件
LD CR2003                ; 常時OFF
OUT M10482               ; U17_起動条件
;□ 起動OFF
LDB M50                  ; 運転準備
LD M60                   ; ｴﾗｰ発生
OR M56                   ; 自動起動停止指令(ｻｲｸﾙ停止)
AND M10484               ; U17_原点復帰中
ORL
OR M10486                ; U17_CYCLE停止異常
OR T15                   ; 強制停止
OUT M10483               ; U17_起動OFF
;□ 原点復帰
LD M82                   ; 原点復帰開始
ANB M10484               ; U17_原点復帰中
OR M10484                ; U17_原点復帰中
ANB M10483               ; U17_起動OFF
ANB M10491               ; U17_ERR発生
ANB M10297               ; OriStepEND
OUT M10484               ; U17_原点復帰中
;□ 起動中
LDB M10074               ; U17-1起動中
ANB M10234               ; U17-3(検査SUB)起動中
INV
OUT M10485               ; U17_起動中
;□ ｻｲｸﾙ停止異常
LDB M10075               ; U17-1ｻｲｸﾙ停止異常
ANB M10235               ; U17-3ｻｲｸﾙ停止異常
INV
OUT M10486               ; U17_CYCLE停止異常
;□ 払出停止異常
LDB CR2003               ; 常時OFF
INV
OUT M10487               ; U17_払出停止異常
;□ 警報補助
LDB CR2003               ; 常時OFF
INV
OUT M10488               ; U17_警報補助
;□ 機器準備確認
LD X386C                 ; H4st(RB15)ｻｰﾎﾞ状態_SV
ANB X3869                ; H4st(RB15)運転ﾓｰﾄﾞ_RMDS
AND X386D                ; H4st(RB15)非常停止_*EMGS
AND X386E                ; H4st(RB15)ｱﾗｰﾑ_*ALM
OUT M10490               ; U17_機器準備完了
;□ ｴﾗｰ発生　一時停止
LDB M10076               ; U17-1ｴﾗｰ発生
ANB M10236               ; U17-3ｴﾗｰ発生
INV
OUT M10491               ; U17_ERR発生
;□ 動作中ﾕﾆｯﾄ無し
LD M10077                ; U17-1動作無し
AND M10237               ; U17-3動作無し
OUT M10492               ; U17_動作無し確認
;□ 払出しﾜｰｸ無し
LDB X1392                ; HiST4_部_ﾜｰｸ確認(ON=有)
ANB M7981                ; ﾊﾝﾄﾞ1_Hi検査未了品
ANB M7988                ; ﾊﾝﾄﾞ1_Hi検査ST4再検品
ANB M7991                ; ﾊﾝﾄﾞ2_Hi検査未了品
ANB M7998                ; ﾊﾝﾄﾞ2_Hi検査ST4再検品
AND M10121               ; RB15_ﾜｰｸ受取り位置(ID確認位置)
TMR K1714 K10
LD T1714
OUT M10493               ; U17_WORK無し
;□ ｽﾃｯﾌﾟ起動
LD M30                   ; 自動ﾓｰﾄﾞ
OR M31                   ; 手動ﾓｰﾄﾞ
AND T1701                ; HiST4扉閉
ANB M51                  ; 即停止異常(緊急停止)
ANB M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ANB M57                  ; 全ﾕﾆｯﾄ払出完了
ANB M59                  ; 払出停止異常まとめ
ANB M10491               ; U17_ERR発生
LDB M140                 ; 全一時停止
ANB M180                 ; 高温検査一時停止
ORB M10017               ; U17-1_S17(検査SUB)起動確認
ANL
OUT M10479               ; U17_STEP動作
;<h1/>□_自動回路
;<h1/>◇_状態・動作条件(補助)
LD X1391                 ; HiST4_部_ﾜｰｸ押_上昇端
AND M10121               ; RB15_ﾜｰｸ受取り位置(ID確認位置)
ANB X1392                ; HiST4_部_ﾜｰｸ確認(ON=有)
AND= D9201 K0            ; HiST4 ﾜｰｸ有無記憶
OUT M10070               ; U17-1原点
LDB B0222                ; B222_547)HiST4_ﾃｽﾄﾍｯﾄﾞID_不一致
ANB B0223                ; B223_548)HiST4_ﾊﾟﾚｯﾄID_不一致
ANB B0224                ; B224_549)HiST4_ﾜｰｸ受取異常
ANB B0225                ; B225_550)HiST4_ﾜｰｸ受渡し異常
ANB B0226                ; B226_551)HiST4 ﾜｰｸ情報不一致
INV
OUT M10071               ; U17-1全異常
LD M10070                ; U17-1原点
ANB M10074               ; U17-1起動中
AND M10479               ; U17_STEP動作
LD M10401                ; HiST4-搬送ﾊﾝﾄﾞ1ID一致ﾌﾗｸﾞ
OR M10402                ; HiST4-搬送ﾊﾝﾄﾞ2ID一致ﾌﾗｸﾞ
ANL
ANB M10408               ; HiST4_無効OK条件
OUT M10072               ; U17-1起動条件
LDB M50                  ; 運転準備
ORB L1700                ; HiST4_有効状態
OR M10486                ; U17_CYCLE停止異常
OR T15                   ; 強制停止
OUT M10073               ; U17-1起動OFF
LD M73                   ; 各工程起動指令
AND M10072               ; U17-1起動条件
ANB B101D                ; 途中投入選択TP(1:単独_0:連動)
OR M10074                ; U17-1起動中
ANB M10073               ; U17-1起動OFF
ANB M10063               ; U17-1 StepEnd
OUT M10074               ; U17-1起動中
;ﾕﾆｯﾄ1-1 ｻｲｸﾙ停止異常
LDB CR2003               ; 常時OFF
INV
OUT M10075               ; U17-1ｻｲｸﾙ停止異常
;ﾕﾆｯﾄ1-1 ｴﾗｰ発生まとめ
LDB B0220                ; B220_545)HiST4ｽﾃｰｼﾞ前後RB異常
ANB B0221                ; B221_546)HiST4ｸﾗﾝﾌﾟ開閉CLS異常
ANB B023E                ; B23E_575)HiST4ﾜｰｸ除去要求
ANB B023F                ; B23F_576)HiST4ﾜｰｸ検査中
INV
OUT M10076               ; U17-1ｴﾗｰ発生
;ﾕﾆｯﾄ1-1 停止判定
LD= D9000 D9005          ; HiST4-1自動運転ｽﾃｯﾌﾟ  HiST4-1動作中判定
ORB M10074               ; U17-1起動中
TMR K1710 K20            ; 停止完了判定ﾀｲﾏｰ
LD CR2002                ; 常時ON
MOV D9000 D9005          ; HiST4-1自動運転ｽﾃｯﾌﾟ  HiST4-1動作中判定
LD T1710                 ; 停止完了判定ﾀｲﾏｰ
OUT M10077               ; U17-1動作無し
;□
;□　ﾕﾆｯﾄ1-1 自動運転ステップ開始
;□
LD CR2002                ; 常時ON
FMOV K0 M10000 K4        ; U17-1_S00
LDB M10074               ; U17-1起動中
MOV K0 D9000             ; HiST4-1自動運転ｽﾃｯﾌﾟ
LD M10074                ; U17-1起動中
MOV D9000 Z1             ; HiST4-1自動運転ｽﾃｯﾌﾟ
SET M10000:Z1            ; U17-1_S00
;ﾜｰｸ有無判定等
LD M10000                ; U17-1_S00
AND M10479               ; U17_STEP動作
INC D9000                ; HiST4-1自動運転ｽﾃｯﾌﾟ
;<h1/>__S01_給材要求
LD M10001                ; U17-1_S01
MPS
ANB M10493               ; U17_WORK無し
MPS
AND M7903                ; 【搬送】搬送→Hi_ST4搬送開始
INC D9000                ; HiST4-1自動運転ｽﾃｯﾌﾟ
MPP
LD M10401                ; HiST4-搬送ﾊﾝﾄﾞ1ID一致ﾌﾗｸﾞ
OR M10402                ; HiST4-搬送ﾊﾝﾄﾞ2ID一致ﾌﾗｸﾞ
ANB X1392                ; HiST4_部_ﾜｰｸ確認(ON=有)
ANL
OUT M10420               ; HiST4→搬送ﾜｰｸ供給要求
MPP
LD M10493                ; U17_WORK無し
AND M36                  ; 払出処理
ANL
MOV K63 D9000            ; HiST4-1自動運転ｽﾃｯﾌﾟ
LD M10002                ; U17-1_S02
LD M7908                 ; 【搬送】搬送→Hi_ST4搬送完了
OR M10422                ; HiST4→搬送ﾜｰｸ受取り完了
ANL
MPS
LDB M7903                ; 【搬送】搬送→Hi_ST4搬送開始
ANB M7908                ; 【搬送】搬送→Hi_ST4搬送完了
ANL
INC D9000                ; HiST4-1自動運転ｽﾃｯﾌﾟ
MPP
OUT M10422               ; HiST4→搬送ﾜｰｸ受取り完了
LD M10003                ; U17-1_S03
AND M10479               ; U17_STEP動作
AND= D9201 K1            ; HiST4 ﾜｰｸ有無記憶
MPS
LD X1392                 ; HiST4_部_ﾜｰｸ確認(ON=有)
OR M35                   ; 空運転ﾓｰﾄﾞ
ANL
INC D9000                ; HiST4-1自動運転ｽﾃｯﾌﾟ
MPP
LDB X1392                ; HiST4_部_ﾜｰｸ確認(ON=有)
ANB M35                  ; 空運転ﾓｰﾄﾞ
ANL
MOV K60 D9000            ; HiST4-1自動運転ｽﾃｯﾌﾟ
LD M10060                ; U17-1_S60 HiST3_ﾜｰｸ受取異常
AND B0224                ; B224_549)HiST4_ﾜｰｸ受取異常
MOV K63 D9000            ; HiST4-1自動運転ｽﾃｯﾌﾟ
;　　ｸﾗﾝﾌﾟ指令
LD M10004                ; U17-1_S04_ｸﾗﾝﾌﾟ指令
AND M10479               ; U17_STEP動作
AND X1390                ; HiST4_部_ﾜｰｸ押_下降端
ANB B0221                ; B221_546)HiST4ｸﾗﾝﾌﾟ開閉CLS異常
INC D9000                ; HiST4-1自動運転ｽﾃｯﾌﾟ
;　　Z軸上昇確認
LD M10005                ; U17-1_S05_開始確認待ち
AND T1701                ; HiST4扉閉
AND M10479               ; U17_STEP動作
LD L1352                 ; Hi搬送高さ移動完了(HIGH)
OR L1351                 ; Hi搬送高さ移動完了(MIDLE)
ANL
INC D9000                ; HiST4-1自動運転ｽﾃｯﾌﾟ
@INC D9020               ; HiST4投入回数
LD M10006                ; U17-1_S06
INC D9000                ; HiST4-1自動運転ｽﾃｯﾌﾟ
LD M10007                ; U17-1_S07
INC D9000                ; HiST4-1自動運転ｽﾃｯﾌﾟ
LD M10008                ; U17-1_S08
INC D9000                ; HiST4-1自動運転ｽﾃｯﾌﾟ
;　　■電特検査前処理
LD M10009                ; U17-1_S09
AND M10479               ; U17_STEP動作
AND M10102               ; RB15_位置決め条件
MPS
@MOV D9050 D9040         ; ｺﾈｸﾀ挿入開始位置指令Pos  RB15_指令Pos
MPP
AND= D9050 D9040         ; ｺﾈｸﾀ挿入開始位置指令Pos  RB15_指令Pos
INC D9000                ; HiST4-1自動運転ｽﾃｯﾌﾟ
LD M10010                ; U17-1_S10_ﾌﾟﾛｰﾌﾞｱﾌﾟﾛｰﾁ移動指令
AND M10104               ; RB15_位置決め起動指令
INC D9000                ; HiST4-1自動運転ｽﾃｯﾌﾟ
LD M10011                ; U17-1_S11_到着確認
ANB M10104               ; RB15_位置決め起動指令
AND M10122               ; RB15_ｺﾈｸﾀ挿入開始位置
AND M10479               ; U17_STEP動作
INC D9000                ; HiST4-1自動運転ｽﾃｯﾌﾟ
LD M10012                ; U17-1_S12_起動条件確認
AND M10479               ; U17_STEP動作
AND M10102               ; RB15_位置決め条件
MPS
@MOV D9051 D9040         ; ｺﾈｸﾀ挿入押込み量※1指令Pos  RB15_指令Pos
MPP
AND= D9051 D9040         ; ｺﾈｸﾀ挿入押込み量※1指令Pos  RB15_指令Pos
INC D9000                ; HiST4-1自動運転ｽﾃｯﾌﾟ
LD M10013                ; U17-1_S13_ｺﾈｸﾀ押込位置移動指指令
AND M10104               ; RB15_位置決め起動指令
AND M10479               ; U17_STEP動作
INC D9000                ; HiST4-1自動運転ｽﾃｯﾌﾟ
LD M10014                ; U17-1_S14_到着確認
ANB M10104               ; RB15_位置決め起動指令
AND M10123               ; RB15_ｺﾈｸﾀ挿入押込み完了位置
INC D9000                ; HiST4-1自動運転ｽﾃｯﾌﾟ
;<h1/>__S15_電特検査処理開始
LD M10015                ; U17-1_S15_検査SUB動作無確認
AND M10479               ; U17_STEP動作
ANB M10234               ; U17-3(検査SUB)起動中
INC D9000                ; HiST4-1自動運転ｽﾃｯﾌﾟ
LD M10016                ; U17-1_S16_検査SUB開始ﾌﾗｸﾞ
AND M10479               ; U17_STEP動作
AND M10234               ; U17-3(検査SUB)起動中
INC D9000                ; HiST4-1自動運転ｽﾃｯﾌﾟ
LD M10017                ; U17-1_S17(検査SUB)起動確認
AND M10479               ; U17_STEP動作
ANB M10234               ; U17-3(検査SUB)起動中
ANB M140                 ; 全一時停止
ANB M180                 ; 高温検査一時停止
INC D9000                ; HiST4-1自動運転ｽﾃｯﾌﾟ
LD M10018                ; U17-1_S18
AND M10479               ; U17_STEP動作
AND M10102               ; RB15_位置決め条件
MPS
@MOV D9052 D9040         ; ｺﾈｸﾀ抜き位置Pos  RB15_指令Pos
MPP
AND= D9052 D9040         ; ｺﾈｸﾀ抜き位置Pos  RB15_指令Pos
INC D9000                ; HiST4-1自動運転ｽﾃｯﾌﾟ
LD M10019                ; U17-1_S19_ｺﾈｸﾀ抜き位置移動指令
AND M10104               ; RB15_位置決め起動指令
INC D9000                ; HiST4-1自動運転ｽﾃｯﾌﾟ
;　　ｽﾃｰｼﾞ後退
LD M10020                ; U17-1_S20_到着確認
ANB M10104               ; RB15_位置決め起動指令
AND M10124               ; RB15_ｺﾈｸﾀ抜き位置
INC D9000                ; HiST4-1自動運転ｽﾃｯﾌﾟ
LD M10021                ; U17-1_S21_起動条件確認
AND M10479               ; U17_STEP動作
AND M10102               ; RB15_位置決め条件
MPS
@MOV K1 D9040            ; RB15_指令Pos
MPP
AND= K1 D9040            ; RB15_指令Pos
INC D9000                ; HiST4-1自動運転ｽﾃｯﾌﾟ
LD M10022                ; U17-1_S22_ﾜｰｸ受取位置移動指令
AND M10104               ; RB15_位置決め起動指令
INC D9000                ; HiST4-1自動運転ｽﾃｯﾌﾟ
LD M10023                ; U17-1_S23_到着確認
ANB M10104               ; RB15_位置決め起動指令
AND M10121               ; RB15_ﾜｰｸ受取り位置(ID確認位置)
INC D9000                ; HiST4-1自動運転ｽﾃｯﾌﾟ
LD M10024                ; U17-1_S24
AND M10479               ; U17_STEP動作
INC D9000                ; HiST4-1自動運転ｽﾃｯﾌﾟ
;<h1/>__S25_ﾜｰｸ除材要求
LDB M7981                ; ﾊﾝﾄﾞ1_Hi検査未了品
ANB M7989                ; ﾊﾝﾄﾞ1_Hi検査ST5再検品
ANB M7991                ; ﾊﾝﾄﾞ2_Hi検査未了品
ANB M7999                ; ﾊﾝﾄﾞ2_Hi検査ST5再検品
ANB M8026                ; ﾊﾝﾄﾞ1HiST4除材中ﾌﾗｸﾞ
ANB M8027                ; ﾊﾝﾄﾞ2HiST4除材中ﾌﾗｸﾞ
ANB M8909                ; HiST1_無効予約(自動運転)
ANB M9409                ; HiST2_無効予約(自動運転)
ANB M9909                ; HiST3_無効予約(自動運転)
ANB M10409               ; HiST4_無効予約(自動運転)
ANB M10909               ; HiST5_無効予約(自動運転)
INV
OUT M10425               ; HiST4_ﾜｰｸ除去要求発行許可
;M9　M1304を上流仮置きよりﾜｰｸ除材要求なしに入れ替え
LD M10025                ; U17-1_S25_ﾜｰｸ受取要求
MPS
AND M7913                ; 【搬送】HiST4除材開始
INC D9000                ; HiST4-1自動運転ｽﾃｯﾌﾟ
MPP
LDB M6057                ; U10_S57_受渡可(→検査RB)
OR M10425                ; HiST4_ﾜｰｸ除去要求発行許可
ANL
OUT M10421               ; HiST4→搬送1除材要求
LD M10026                ; U17-1_S26
LD M7918                 ; 【搬送】HiST4除材完了
OR M10423                ; HiST4→搬送除材完了受取
ANL
MPS
LDB M7913                ; 【搬送】HiST4除材開始
ANB M7918                ; 【搬送】HiST4除材完了
ANL
INC D9000                ; HiST4-1自動運転ｽﾃｯﾌﾟ
MPP
OUT M10423               ; HiST4→搬送除材完了受取
LD M10027                ; U17-1_S27
AND M10479               ; U17_STEP動作
AND= D9201 K0            ; HiST4 ﾜｰｸ有無記憶
LD L1352                 ; Hi搬送高さ移動完了(HIGH)
OR L1351                 ; Hi搬送高さ移動完了(MIDLE)
OR L1350                 ; ﾜｰｸ入替高さ移動完了(HiW)
ANL
MPS
ANB X1392                ; HiST4_部_ﾜｰｸ確認(ON=有)
INC D9000                ; HiST4-1自動運転ｽﾃｯﾌﾟ
MPP
AND X1392                ; HiST4_部_ﾜｰｸ確認(ON=有)
OUT M10430               ; HiST4_ﾜｰｸ受渡し異常
LD M10028                ; U17-1_S28
AND M10479               ; U17_STEP動作
INC D9000                ; HiST4-1自動運転ｽﾃｯﾌﾟ
LD M10029                ; U17-1_S29
AND M10479               ; U17_STEP動作
MOV K63 D9000            ; HiST4-1自動運転ｽﾃｯﾌﾟ
;ｻｲｸﾙ終了
LD M10062                ; U17-1_S62
OR CR2003                ; 常時OFF
@MOV K63 D9000           ; HiST4-1自動運転ｽﾃｯﾌﾟ
;<h1/>◇_電特検査SUB 状態・動作条件(補助)
LD CR2002                ; 常時ON
OUT M10230               ; U17-3原点
LDB CR2003               ; 常時OFF
INV
OUT M10231               ; U17-3全異常
LD M10230                ; U17-3原点
ANB M10234               ; U17-3(検査SUB)起動中
AND M10479               ; U17_STEP動作
LD M300                  ; PC通信正常
OR M3                    ; OFFLINE_MODE
ANL
OUT M10232               ; U17-3起動条件
LDB M50                  ; 運転準備
OR M10486                ; U17_CYCLE停止異常
OR T15                   ; 強制停止
OUT M10233               ; U17-3起動OFF
LD M10016                ; U17-1_S16_検査SUB開始ﾌﾗｸﾞ
AND M10232               ; U17-3起動条件
OR M10234                ; U17-3(検査SUB)起動中
ANB M10233               ; U17-3起動OFF
ANB M10223               ; U17-3 StepEnd
OUT M10234               ; U17-3(検査SUB)起動中
;tp表示
LD CR2002                ; 常時ON
DW K0 D9400              ; Hi検査_ｽﾃｰﾀｽ表示
LD M10234                ; U17-3(検査SUB)起動中
DW K1 D9400              ; Hi検査_ｽﾃｰﾀｽ表示
LD= D9204 K1             ; HiST4 Hi検査結果(1=OK_2=NG)
DW K2 D9400              ; Hi検査_ｽﾃｰﾀｽ表示
LD= D9204 K2             ; HiST4 Hi検査結果(1=OK_2=NG)
DW K3 D9400              ; Hi検査_ｽﾃｰﾀｽ表示
LDB L1700                ; HiST4_有効状態
DW K4 D9400              ; Hi検査_ｽﾃｰﾀｽ表示
;ﾕﾆｯﾄ1-3ｻｲｸﾙ停止異常
LDB CR2003               ; 常時OFF
INV
OUT M10235               ; U17-3ｻｲｸﾙ停止異常
;ﾕﾆｯﾄ1-3ｴﾗｰ発生まとめ
LDB CR2003               ; 常時OFF
INV
OUT M10236               ; U17-3ｴﾗｰ発生
;ﾕﾆｯﾄ1-3停止判定
LD= D9002 D9007          ; HiST4-3自動運転ｽﾃｯﾌﾟ  HiST4-3動作中判定
TMR K1712 K20
LD CR2002                ; 常時ON
MOV D9002 D9007          ; HiST4-3自動運転ｽﾃｯﾌﾟ  HiST4-3動作中判定
LD T1712
ORB M10234               ; U17-3(検査SUB)起動中
OUT M10237               ; U17-3動作無し
;□
;□　ﾕﾆｯﾄ1-3自動運転ステップ開始
;□
LD CR2002                ; 常時ON
FMOV K0 M10160 K4        ; U17-3_S0
LDB M10234               ; U17-3(検査SUB)起動中
MOV K0 D9002             ; HiST4-3自動運転ｽﾃｯﾌﾟ
LD M10234                ; U17-3(検査SUB)起動中
MOV D9002 Z1             ; HiST4-3自動運転ｽﾃｯﾌﾟ
SET M10160:Z1            ; U17-3_S0
;<h1/>__S0_ﾜｰｸ有無判定
LD M10160                ; U17-3_S0
MPS
LD T1701                 ; HiST4扉閉
AND M10479               ; U17_STEP動作
ANB M35                  ; 空運転ﾓｰﾄﾞ
ANB M3                   ; OFFLINE_MODE
ANL
INC D9002                ; HiST4-3自動運転ｽﾃｯﾌﾟ
MPP
LD M35                   ; 空運転ﾓｰﾄﾞ
OR M3                    ; OFFLINE_MODE
ANL
MPS
AND T1730                ; Hi検査時間(仮)
INC D9002                ; HiST4-3自動運転ｽﾃｯﾌﾟ
MPP
TMR K1730 K880           ; Hi検査時間(仮)
LD M10161                ; U17-3_S1Hi検査ｽﾀｰﾄ要求
AND W0105.9              ; 電気特性検査開始要求#4
LD W05.9                 ; 電気特性検査ｽﾃｰｼﾞ状態#4
ANB W05.14               ; 電気特性検査結果#4
OR M3                    ; OFFLINE_MODE
OR M35                   ; 空運転ﾓｰﾄﾞ
ANL
INC D9002                ; HiST4-3自動運転ｽﾃｯﾌﾟ
LD M10162                ; U17-3_S2
LDB W05.9                ; 電気特性検査ｽﾃｰｼﾞ状態#4
OR M3                    ; OFFLINE_MODE
ANL
INC D9002                ; HiST4-3自動運転ｽﾃｯﾌﾟ
LD M10163                ; U17-3_S3
MPS
AND<> D9204 K0           ; HiST4 Hi検査結果(1=OK_2=NG)
INC D9002                ; HiST4-3自動運転ｽﾃｯﾌﾟ
MRD
LDB M35                  ; 空運転ﾓｰﾄﾞ
ANB M3                   ; OFFLINE_MODE
ANL
MPS
AND W05.14               ; 電気特性検査結果#4
MOV K1 D9204             ; HiST4 Hi検査結果(1=OK_2=NG)
MPP
ANB W05.14               ; 電気特性検査結果#4
MOV K2 D9204             ; HiST4 Hi検査結果(1=OK_2=NG)
MPP
LD M3                    ; OFFLINE_MODE
OR M35                   ; 空運転ﾓｰﾄﾞ
ANL
MPS
ANB B1038                ; OFF_LINE_検査結果(OFF=OK_ON=NG)
MOV K1 D9204             ; HiST4 Hi検査結果(1=OK_2=NG)
MPP
AND B1038                ; OFF_LINE_検査結果(OFF=OK_ON=NG)
MOV K2 D9204             ; HiST4 Hi検査結果(1=OK_2=NG)
LD M10164                ; U17-3_S4
INC D9002                ; HiST4-3自動運転ｽﾃｯﾌﾟ
LD M10165                ; U17-3_S5
INC D9002                ; HiST4-3自動運転ｽﾃｯﾌﾟ
LD M10166                ; U17-3_S6
INC D9002                ; HiST4-3自動運転ｽﾃｯﾌﾟ
LD M10167                ; U17-3_S7
INC D9002                ; HiST4-3自動運転ｽﾃｯﾌﾟ
LD M10168                ; U17-3_S8
INC D9002                ; HiST4-3自動運転ｽﾃｯﾌﾟ
LD M10169                ; U17-3_S9
AND T1701                ; HiST4扉閉
AND M10479               ; U17_STEP動作
MOV K63 D9002            ; HiST4-3自動運転ｽﾃｯﾌﾟ
;<h1/>□_原点復帰回路
LD CR2002                ; 常時ON
FMOV K0 M10250 K3        ; OriStep0
LDB M10484               ; U17_原点復帰中
MOV K0 D9010             ; HiST4 原点復帰ｽﾃｯﾌﾟ
LD M10484                ; U17_原点復帰中
MOV D9010 Z1             ; HiST4 原点復帰ｽﾃｯﾌﾟ
SET M10250:Z1            ; OriStep0
;原点復帰ｻｲｸﾙ監視
LD M10484                ; U17_原点復帰中
TMR K1700 K200           ; UNIT18原点復帰ﾀｲﾑｱｳﾄ
;原点復帰ステップ開始
LD M10250                ; OriStep0
AND T1701                ; HiST4扉閉
AND M10479               ; U17_STEP動作
AND L1352                ; Hi搬送高さ移動完了(HIGH)
DW K0 D9020              ; HiST4投入回数
CON
INC D9010                ; HiST4 原点復帰ｽﾃｯﾌﾟ
LD M10251                ; OriStep1
AND T1701                ; HiST4扉閉
AND M10479               ; U17_STEP動作
ANB W05.9                ; 電気特性検査ｽﾃｰｼﾞ状態#4
INC D9010                ; HiST4 原点復帰ｽﾃｯﾌﾟ
LD M10252                ; OriStep2
AND T1701                ; HiST4扉閉
AND M10479               ; U17_STEP動作
AND X386A                ; H4st(RB15)原点確定_HEND
INC D9010                ; HiST4 原点復帰ｽﾃｯﾌﾟ
LD M10253                ; OriStep3_
AND T1701                ; HiST4扉閉
AND M10479               ; U17_STEP動作
AND M10102               ; RB15_位置決め条件
MPS
@MOV K1 D9040            ; RB15_指令Pos
MPP
AND= K1 D9040            ; RB15_指令Pos
INC D9010                ; HiST4 原点復帰ｽﾃｯﾌﾟ
LD M10254                ; OriStep4_ｽﾃｰｼﾞ戻り指令
AND M10104               ; RB15_位置決め起動指令
INC D9010                ; HiST4 原点復帰ｽﾃｯﾌﾟ
LD M10255                ; OriStep5_
ANB M10104               ; RB15_位置決め起動指令
AND M10121               ; RB15_ﾜｰｸ受取り位置(ID確認位置)
INC D9010                ; HiST4 原点復帰ｽﾃｯﾌﾟ
LD M10256                ; OriStep6_
AND T1701                ; HiST4扉閉
AND M10479               ; U17_STEP動作
AND L1352                ; Hi搬送高さ移動完了(HIGH)
INC D9010                ; HiST4 原点復帰ｽﾃｯﾌﾟ
LD M10257                ; OriStep7_ｸﾗﾝﾌﾟ上昇指令
AND T1701                ; HiST4扉閉
AND M10479               ; U17_STEP動作
AND X1391                ; HiST4_部_ﾜｰｸ押_上昇端
INC D9010                ; HiST4 原点復帰ｽﾃｯﾌﾟ
;　　ﾜｰｸ有無ﾁｪｯｸ
LD M10258                ; OriStep8
AND T1701                ; HiST4扉閉
AND M10479               ; U17_STEP動作
MPS
ANB X1392                ; HiST4_部_ﾜｰｸ確認(ON=有)
MOV K10 D9010            ; HiST4 原点復帰ｽﾃｯﾌﾟ
MPP
AND X1392                ; HiST4_部_ﾜｰｸ確認(ON=有)
INC D9010                ; HiST4 原点復帰ｽﾃｯﾌﾟ
;　　ﾜｰｸ除去要求
LD M10259                ; OriStep9_ORGﾜｰｸ除去要求
AND T1701                ; HiST4扉閉
AND M10479               ; U17_STEP動作
AND B023E                ; B23E_575)HiST4ﾜｰｸ除去要求
MOV K46 D9010            ; HiST4 原点復帰ｽﾃｯﾌﾟ
;　　
LD M10260                ; OriStep10
MPS
AND M10480               ; U17_原点
MOV K46 D9010            ; HiST4 原点復帰ｽﾃｯﾌﾟ
MPP
FMOV K0 D9200 K20        ; HiST4 INDEX NO.
LD M10296                ; OriStep46
ANB M82                  ; 原点復帰開始
MOV K47 D9010            ; HiST4 原点復帰ｽﾃｯﾌﾟ
;<h1/>□_手動回路
LD M31                   ; 手動ﾓｰﾄﾞ
AND M32                  ; ﾒｲﾝ手動操作可能条件
ANB M10485               ; U17_起動中
ANB M10484               ; U17_原点復帰中
LDB W05.9                ; 電気特性検査ｽﾃｰｼﾞ状態#4
OR M3                    ; OFFLINE_MODE
ANL
MC
LD M10102                ; RB15_位置決め条件
LD L1350                 ; ﾜｰｸ入替高さ移動完了(HiW)
OR L1351                 ; Hi搬送高さ移動完了(MIDLE)
OR L1352                 ; Hi搬送高さ移動完了(HIGH)
ANL
ANB M10330               ; RB15_ﾜｰｸ受取り位置移動指令
ANB M10331               ; RB15_ｺﾈｸﾀ挿入開始位置移動指令
ANB M10332               ; RB15_ｺﾈｸﾀ挿入押込完了位置移動指
ANB M10333               ; RB15_ｺﾈｸﾀ抜き位置移動指令
OUT M10320               ; RB15_ﾜｰｸ受取り位置移動OK
OUT M10321               ; RB15_ｺﾈｸﾀ挿入開始位置移動OK
OUT M10322               ; RB15_ｺﾈｸﾀ挿入押込完了位置移動OK
OUT M10323               ; RB15_ｺﾈｸﾀ抜き位置移動OK
LDP B1280                ; RB15_ﾜｰｸ受取り位置TP-PB
AND M10320               ; RB15_ﾜｰｸ受取り位置移動OK
OR M10330                ; RB15_ﾜｰｸ受取り位置移動指令
ANB M10107               ; RB15_位置決め完了
OUT M10330               ; RB15_ﾜｰｸ受取り位置移動指令
MOV K1 D9040             ; RB15_指令Pos
LDP B1281                ; RB15_ｺﾈｸﾀ挿入開始位置TP-PB
AND M10321               ; RB15_ｺﾈｸﾀ挿入開始位置移動OK
OR M10331                ; RB15_ｺﾈｸﾀ挿入開始位置移動指令
ANB M10107               ; RB15_位置決め完了
OUT M10331               ; RB15_ｺﾈｸﾀ挿入開始位置移動指令
MOV D9050 D9040          ; ｺﾈｸﾀ挿入開始位置指令Pos  RB15_指令Pos
LDP B1282                ; RB15_ｺﾈｸﾀ挿入押込み完了位置TP-PB
AND M10322               ; RB15_ｺﾈｸﾀ挿入押込完了位置移動OK
OR M10332                ; RB15_ｺﾈｸﾀ挿入押込完了位置移動指
ANB M10107               ; RB15_位置決め完了
OUT M10332               ; RB15_ｺﾈｸﾀ挿入押込完了位置移動指
MOV D9051 D9040          ; ｺﾈｸﾀ挿入押込み量※1指令Pos  RB15_指令Pos
LDP B1283                ; RB15_ｺﾈｸﾀ抜き位置TP-PB
AND M10323               ; RB15_ｺﾈｸﾀ抜き位置移動OK
OR M10333                ; RB15_ｺﾈｸﾀ抜き位置移動指令
ANB M10107               ; RB15_位置決め完了
OUT M10333               ; RB15_ｺﾈｸﾀ抜き位置移動指令
MOV D9052 D9040          ; ｺﾈｸﾀ抜き位置Pos  RB15_指令Pos
;　　ｸﾗﾝﾌﾟ上下
LD CR2002                ; 常時ON
AND M139                 ; 安全入力OK
AND M7802                ; U13-3_RCX240起動条件
AND M7811                ; RCX240動作完了
LD L1352                 ; Hi搬送高さ移動完了(HIGH)
OR L1323                 ; ﾊﾝﾄﾞ1ST4部ﾜｰｸ受渡し動作完了
OR L1325                 ; ﾊﾝﾄﾞ2ST4部ﾜｰｸ受渡し動作完了
ANL
AND M10121               ; RB15_ﾜｰｸ受取り位置(ID確認位置)
OUT M10304               ; HiST4ｸﾗﾝﾌﾟ開閉_閉_起動OK
LDP B1284                ; HiST4ｸﾗﾝﾌﾟ閉_TP-PB
AND M10304               ; HiST4ｸﾗﾝﾌﾟ開閉_閉_起動OK
LD M10305                ; HiST4ｸﾗﾝﾌﾟ開閉_閉_指令
ANB M10307               ; HiST4ｸﾗﾝﾌﾟ開閉_開__指令
ORL
OUT M10305               ; HiST4ｸﾗﾝﾌﾟ開閉_閉_指令
LD CR2002                ; 常時ON
ANB W05.9                ; 電気特性検査ｽﾃｰｼﾞ状態#4
AND M10121               ; RB15_ﾜｰｸ受取り位置(ID確認位置)
OUT M10306               ; HiST4ｸﾗﾝﾌﾟ開閉_開_起動OK
LDP B1285                ; HiST4ｸﾗﾝﾌﾟ開_TP-PB
AND M10306               ; HiST4ｸﾗﾝﾌﾟ開閉_開_起動OK
LD M10307                ; HiST4ｸﾗﾝﾌﾟ開閉_開__指令
ANB M10305               ; HiST4ｸﾗﾝﾌﾟ開閉_閉_指令
ORL
OUT M10307               ; HiST4ｸﾗﾝﾌﾟ開閉_開__指令
MCR
LDP B1286                ; SWBox_ﾊﾟﾚｯﾄ前後ﾓｰﾄﾞsw
ANB M10312               ; HiST4SwBoxMode_ﾊﾟﾚｯﾄ前後Flag
LDPB B1286               ; SWBox_ﾊﾟﾚｯﾄ前後ﾓｰﾄﾞsw
AND M10312               ; HiST4SwBoxMode_ﾊﾟﾚｯﾄ前後Flag
ANB M6312                ; Hi_RBﾁｬｯｸ開可
ANB M10313               ; HiST4SwBoxMode_ｸﾗﾝﾌﾟ&ﾊﾟﾚｯﾄFlag
ORL
AND= D50 K201            ; TpM-K_表示中ページNo.
AND M31                  ; 手動ﾓｰﾄﾞ
ANB M81                  ; 原点復帰動作中
AND M50                  ; 運転準備
AND M29                  ; 未使用
OUT M10312               ; HiST4SwBoxMode_ﾊﾟﾚｯﾄ前後Flag
LDP B1287                ; SWBox_ｸﾗﾝﾌﾟ&ﾊﾟﾚｯﾄﾓｰﾄﾞsw
ANB M10313               ; HiST4SwBoxMode_ｸﾗﾝﾌﾟ&ﾊﾟﾚｯﾄFlag
LDPB B1287               ; SWBox_ｸﾗﾝﾌﾟ&ﾊﾟﾚｯﾄﾓｰﾄﾞsw
AND M10313               ; HiST4SwBoxMode_ｸﾗﾝﾌﾟ&ﾊﾟﾚｯﾄFlag
ANB M10312               ; HiST4SwBoxMode_ﾊﾟﾚｯﾄ前後Flag
ANB M6312                ; Hi_RBﾁｬｯｸ開可
ORL
AND= D50 K201            ; TpM-K_表示中ページNo.
AND M31                  ; 手動ﾓｰﾄﾞ
ANB M81                  ; 原点復帰動作中
AND M50                  ; 運転準備
AND M29                  ; 未使用
OUT M10313               ; HiST4SwBoxMode_ｸﾗﾝﾌﾟ&ﾊﾟﾚｯﾄFlag
;<h1/>▽_検査ｽﾃｰｼﾞRB移動ｻﾌﾞﾙｰﾁﾝ
;　　移動POS
LD X386A                 ; H4st(RB15)原点確定_HEND
AND X386B                ; H4st(RB15)位置決め完了_PEND
MPS
AND X3860                ; H4st(RB15)完了Pos_PM1
OUT D9044.0
MRD
AND X3861                ; H4st(RB15)完了Pos_PM2
OUT D9044.1
MRD
AND X3862                ; H4st(RB15)完了Pos_PM4
OUT D9044.2
MRD
AND X3863                ; H4st(RB15)完了Pos_PM8
OUT D9044.3
MRD
AND X3864                ; H4st(RB15)完了Pos_PM16
OUT D9044.4
MRD
AND X3865                ; H4st(RB15)完了Pos_PM32
OUT D9044.5
MRD
AND X3866                ; H4st(RB15)完了Pos_PM64
OUT D9044.6
MRD
AND X3867                ; H4st(RB15)完了Pos_PM128
OUT D9044.7
MPP
INV
MOV K0 D9044             ; RB15_完了Pos
;'RB15 POS MANUAL JIG SETTING
;IF D250 < K1 THEN
;   D250 = K1
;END IF
;D9050 = (D250 - K1)*3 + 51   'ｺﾈｸﾀ挿入開始
;D9051 = (D250 - K1)*3 + 52   'ｺﾈｸﾀ挿入開始
;D9052 = (D250 - K1)*3 + 53   'ｺﾈｸﾀ挿入開始
LD M31                   ; 手動ﾓｰﾄﾞ
NCJ K1000
;'RB15 POS MANUAL JIG SETTING
;
;IF D250 < K1 THEN
;
LD< D250 K1              ; 手動_JIG_NO.指定
NCJ K2000
;   D250 = K1
;
LD CR2002                ; 常時ON
MOV K1 D250              ; 手動_JIG_NO.指定
;END IF
;
LABEL K2000
;D9050 = (D250 - K1)*3 + 51   'ｺﾈｸﾀ挿入開始
;
LD CR2002                ; 常時ON
LDA D250                 ; 手動_JIG_NO.指定
CON
EXT
CON
SUB.L +1
CON
MUL.L +3
CON
ADD.L +51
CON
STA D9050                ; ｺﾈｸﾀ挿入開始位置指令Pos
;D9051 = (D250 - K1)*3 + 52   'ｺﾈｸﾀ挿入開始
;
LD CR2002                ; 常時ON
LDA D250                 ; 手動_JIG_NO.指定
CON
EXT
CON
SUB.L +1
CON
MUL.L +3
CON
ADD.L +52
CON
STA D9051                ; ｺﾈｸﾀ挿入押込み量※1指令Pos
;D9052 = (D250 - K1)*3 + 53   'ｺﾈｸﾀ挿入開始
LD CR2002                ; 常時ON
LDA D250                 ; 手動_JIG_NO.指定
CON
EXT
CON
SUB.L +1
CON
MUL.L +3
CON
ADD.L +53
CON
STA D9052                ; ｺﾈｸﾀ抜き位置Pos
LABEL K1000
;
;'RB15 POS AUTO JIG SETTING
;D9050 = (D9215 - K1)*3 + 51   'ｺﾈｸﾀ挿入開始
;D9051 = (D9215 - K1)*3 + 52   'ｺﾈｸﾀ挿入開始
;D9052 = (D9215 - K1)*3 + 53   'ｺﾈｸﾀ挿入開始
LD M30                   ; 自動ﾓｰﾄﾞ
NCJ K1001
;'RB15 POS AUTO JIG SETTING
;
;D9050 = (D9215 - K1)*3 + 51   'ｺﾈｸﾀ挿入開始
;
LD CR2002                ; 常時ON
LDA D9215                ; HiST4 高温検査ﾛﾎﾞｯﾄNo.
CON
EXT
CON
SUB.L +1
CON
MUL.L +3
CON
ADD.L +51
CON
STA D9050                ; ｺﾈｸﾀ挿入開始位置指令Pos
;D9051 = (D9215 - K1)*3 + 52   'ｺﾈｸﾀ挿入開始
;
LD CR2002                ; 常時ON
LDA D9215                ; HiST4 高温検査ﾛﾎﾞｯﾄNo.
CON
EXT
CON
SUB.L +1
CON
MUL.L +3
CON
ADD.L +52
CON
STA D9051                ; ｺﾈｸﾀ挿入押込み量※1指令Pos
;D9052 = (D9215 - K1)*3 + 53   'ｺﾈｸﾀ挿入開始
LD CR2002                ; 常時ON
LDA D9215                ; HiST4 高温検査ﾛﾎﾞｯﾄNo.
CON
EXT
CON
SUB.L +1
CON
MUL.L +3
CON
ADD.L +53
CON
STA D9052                ; ｺﾈｸﾀ抜き位置Pos
LABEL K1001
;
LD= D9044 K1             ; RB15_完了Pos
AND<> D9044 K0           ; RB15_完了Pos
OUT M10121               ; RB15_ﾜｰｸ受取り位置(ID確認位置)
LD= D9044 D9050          ; RB15_完了Pos  ｺﾈｸﾀ挿入開始位置指令Pos
AND<> D9044 K0           ; RB15_完了Pos
OUT M10122               ; RB15_ｺﾈｸﾀ挿入開始位置
LD= D9044 D9051          ; RB15_完了Pos  ｺﾈｸﾀ挿入押込み量※1指令Pos
AND<> D9044 K0           ; RB15_完了Pos
OUT M10123               ; RB15_ｺﾈｸﾀ挿入押込み完了位置
LD= D9044 D9052          ; RB15_完了Pos  ｺﾈｸﾀ抜き位置Pos
AND<> D9044 K0           ; RB15_完了Pos
OUT M10124               ; RB15_ｺﾈｸﾀ抜き位置
;	検査ｽﾗｲﾀﾞ位置決め処理
LD X386C                 ; H4st(RB15)ｻｰﾎﾞ状態_SV
ANB X3869                ; H4st(RB15)運転ﾓｰﾄﾞ_RMDS
LD X386A                 ; H4st(RB15)原点確定_HEND
OR CR2002                ; 常時ON
ANL
AND X386D                ; H4st(RB15)非常停止_*EMGS
AND X386E                ; H4st(RB15)ｱﾗｰﾑ_*ALM
OUT M10100               ; RB15_状態OK
LD M50                   ; 運転準備
ANB M51                  ; 即停止異常(緊急停止)
AND M10100               ; RB15_状態OK
ANB M10104               ; RB15_位置決め起動指令
OUT M10102               ; RB15_位置決め条件
LDB M10010               ; U17-1_S10_ﾌﾟﾛｰﾌﾞｱﾌﾟﾛｰﾁ移動指令
ANB M10013               ; U17-1_S13_ｺﾈｸﾀ押込位置移動指指令
ANB M10019               ; U17-1_S19_ｺﾈｸﾀ抜き位置移動指令
ANB M10022               ; U17-1_S22_ﾜｰｸ受取位置移動指令
ANB M10254               ; OriStep4_ｽﾃｰｼﾞ戻り指令
INV
LDB M10330               ; RB15_ﾜｰｸ受取り位置移動指令
ANB M10331               ; RB15_ｺﾈｸﾀ挿入開始位置移動指令
ANB M10332               ; RB15_ｺﾈｸﾀ挿入押込完了位置移動指
ANB M10333               ; RB15_ｺﾈｸﾀ抜き位置移動指令
INV
ORL
OUT M10103               ; RB15_位置決め起動指令(まとめ)
LD M10103                ; RB15_位置決め起動指令(まとめ)
AND M10102               ; RB15_位置決め条件
OR M10104                ; RB15_位置決め起動指令
AND M50                  ; 運転準備
ANB M10108               ; RB15_位置決め動作完了
AND X386D                ; H4st(RB15)非常停止_*EMGS
AND X386E                ; H4st(RB15)ｱﾗｰﾑ_*ALM
OUT M10104               ; RB15_位置決め起動指令
LD M10104                ; RB15_位置決め起動指令
@MOV D9040 D9042         ; RB15_指令Pos  RB15_ｺﾝﾄﾛｰﾗｰ指令POS
TMH K1750 K5             ; RB15ﾃﾞｰﾀ転送ﾃﾞｨﾚｲ
LD T1750                 ; RB15ﾃﾞｰﾀ転送ﾃﾞｨﾚｲ
OR M10105                ; RB15_位置決めｽﾀｰﾄ指令
AND M10104               ; RB15_位置決め起動指令
ANB T1751                ; RB15位置決め再ｽﾀｰﾄ指令
OUT M10105               ; RB15_位置決めｽﾀｰﾄ指令
LD M10105                ; RB15_位置決めｽﾀｰﾄ指令
AND Y486D                ; H4st(RB15)ｽﾀｰﾄ_CSTR
ANB X386B                ; H4st(RB15)位置決め完了_PEND
OR M10106                ; RB15_位置決め起動確認
AND M10105               ; RB15_位置決めｽﾀｰﾄ指令
OUT M10106               ; RB15_位置決め起動確認
LD M10106                ; RB15_位置決め起動確認
ANB Y486D                ; H4st(RB15)ｽﾀｰﾄ_CSTR
AND X386B                ; H4st(RB15)位置決め完了_PEND
AND= D9042 D9044         ; RB15_ｺﾝﾄﾛｰﾗｰ指令POS  RB15_完了Pos
OR M10107                ; RB15_位置決め完了
AND M10105               ; RB15_位置決めｽﾀｰﾄ指令
OUT M10107               ; RB15_位置決め完了
LD M10106                ; RB15_位置決め起動確認
ANB Y486D                ; H4st(RB15)ｽﾀｰﾄ_CSTR
AND X386B                ; H4st(RB15)位置決め完了_PEND
AND<> D9042 D9044        ; RB15_ｺﾝﾄﾛｰﾗｰ指令POS  RB15_完了Pos
TMR K1751 K30            ; RB15位置決め再ｽﾀｰﾄ指令
LD M10107                ; RB15_位置決め完了
ANPB M10107              ; RB15_位置決め完了
OUT M10108               ; RB15_位置決め動作完了
;<h1/>□_出力回路
;ソレノイドバルブ出力
;ｸﾗﾝﾌﾟ/ｱﾝｸﾗﾝﾌﾟ
LD M10305                ; HiST4ｸﾗﾝﾌﾟ開閉_閉_指令
AND M10304               ; HiST4ｸﾗﾝﾌﾟ開閉_閉_起動OK
OR M7957                 ; HiST4 ｸﾗﾝﾌﾟ指令(Hi給材)
OR M10004                ; U17-1_S04_ｸﾗﾝﾌﾟ指令
LD Y2426                 ; HiST4ﾜｰｸ押さえ下降
ANB Y2427                ; HiST4ﾜｰｸ押さえ上昇
ORL
AND M50                  ; 運転準備
OUT Y2426                ; HiST4ﾜｰｸ押さえ下降
LD M10307                ; HiST4ｸﾗﾝﾌﾟ開閉_開__指令
AND M10306               ; HiST4ｸﾗﾝﾌﾟ開閉_開_起動OK
OR M7967                 ; HiST4_ｱﾝｸﾗﾝﾌﾟ指令(Hi除材)
OR M10257                ; OriStep7_ｸﾗﾝﾌﾟ上昇指令
LD Y2427                 ; HiST4ﾜｰｸ押さえ上昇
ANB Y2426                ; HiST4ﾜｰｸ押さえ下降
ORL
AND M50                  ; 運転準備
OUT Y2427                ; HiST4ﾜｰｸ押さえ上昇
;<h1/>____▼_検査ｽﾗｲﾀﾞ出力
LD CR2002                ; 常時ON
MPS
AND D9042.0
OUT Y4860                ; H4st(RB15)指令pos_PC1
MRD
AND D9042.1
OUT Y4861                ; H4st(RB15)指令pos_PC2
MRD
AND D9042.2
OUT Y4862                ; H4st(RB15)指令pos_PC4
MRD
AND D9042.3
OUT Y4863                ; H4st(RB15)指令pos_PC8
MRD
AND D9042.4
OUT Y4864                ; H4st(RB15)指令pos_PC16
MRD
AND D9042.5
OUT Y4865                ; H4st(RB15)指令pos_PC32
MRD
AND D9042.6
OUT Y4866                ; H4st(RB15)指令pos_PC64
MPP
AND D9042.7
OUT Y4867                ; H4st(RB15)指令pos_PC128
LD B128F                 ; ﾏﾆｭｱﾙﾓｰﾄﾞ切替SW(1：ﾏﾆｭｱﾙ)
OUT Y486A                ; H4st(RB15)運転ﾓｰﾄﾞ_RMOD
LD<> D50 K208            ; TpM-K_表示中ページNo.
AND<> D70 K208           ; TpM-K_表示中ページNo.
AND<> D90 K208           ; TpM-K_表示中ページNo.
AND<> D110 K208          ; TpM-K_表示中ページNo.
RES B128F                ; ﾏﾆｭｱﾙﾓｰﾄﾞ切替SW(1：ﾏﾆｭｱﾙ)
LD M10252                ; OriStep2
ANB X386A                ; H4st(RB15)原点確定_HEND
OUT Y486B                ; H4st(RB15)原点復帰_HOME
LD M128                  ; 高温検査安全扉正常
OR M37                   ; ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
OUT Y486C                ; H4st(RB15)一時停止_*STP
LD M10105                ; RB15_位置決めｽﾀｰﾄ指令
ANB M10106               ; RB15_位置決め起動確認
OUT Y486D                ; H4st(RB15)ｽﾀｰﾄ_CSTR
LD M16                   ; ﾘｾｯﾄPB
ANB X386E                ; H4st(RB15)ｱﾗｰﾑ_*ALM
OUT Y486E                ; H4st(RB15)ﾘｾｯﾄ_RES
LD T10                   ; 運転準備ﾃﾞｨﾚｲ
OR M10123                ; RB15_ｺﾈｸﾀ挿入押込み完了位置
LD W05.9                 ; 電気特性検査ｽﾃｰｼﾞ状態#4
ANB M3                   ; OFFLINE_MODE
ORL
OUT Y486F                ; H4st(RB15)ｻｰﾎﾞON_SON
;■その他制御出力
LD M10161                ; U17-3_S1Hi検査ｽﾀｰﾄ要求
OUT W0105.9              ; 電気特性検査開始要求#4
LD L1700                 ; HiST4_有効状態
ANB M10409               ; HiST4_無効予約(自動運転)
OUT W0105.14             ; 電気特性検査ｽﾃｰｼﾞ有効/無効#4
LD M10404                ; HiST4検査_有効確認要求
OUT W0107.11             ; Hi_ST4ﾁｪｯｶ-確認要求
LD L1700                 ; HiST4_有効状態
ANB M10409               ; HiST4_無効予約(自動運転)
LD M10409                ; HiST4_無効予約(自動運転)
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
ORL
OUT Y2413                ; HiST4__有効/無効表示
OUT B178A                ; HiST4__有効/無効表示
;□□　　パネル表示　　□□
LD M10330                ; RB15_ﾜｰｸ受取り位置移動指令
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR M10121                ; RB15_ﾜｰｸ受取り位置(ID確認位置)
OUT B1780                ; RB15_ﾜｰｸ受取り位置TP-PB
LD M10331                ; RB15_ｺﾈｸﾀ挿入開始位置移動指令
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR M10122                ; RB15_ｺﾈｸﾀ挿入開始位置
OUT B1781                ; RB15_ｺﾈｸﾀ挿入開始位置TP-PB
LD M10332                ; RB15_ｺﾈｸﾀ挿入押込完了位置移動指
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR M10123                ; RB15_ｺﾈｸﾀ挿入押込み完了位置
OUT B1782                ; RB15_ｺﾈｸﾀ挿入押込み完了位置TP-PB
LD M10333                ; RB15_ｺﾈｸﾀ抜き位置移動指令
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR M10124                ; RB15_ｺﾈｸﾀ抜き位置
OUT B1783                ; RB15_ｺﾈｸﾀ抜き位置TP-PB
LD Y2426                 ; HiST4ﾜｰｸ押さえ下降
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR X1390                 ; HiST4_部_ﾜｰｸ押_下降端
OUT B1784                ; HiST4ｸﾗﾝﾌﾟ閉_TP-PL
LD Y2427                 ; HiST4ﾜｰｸ押さえ上昇
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR X1391                 ; HiST4_部_ﾜｰｸ押_上昇端
OUT B1785                ; HiST4ｸﾗﾝﾌﾟ開_TP-PL
LD M10312                ; HiST4SwBoxMode_ﾊﾟﾚｯﾄ前後Flag
OUT B1786                ; SwBoxMode_ﾊﾟﾚｯﾄFlag_ONPL
LD M10313                ; HiST4SwBoxMode_ｸﾗﾝﾌﾟ&ﾊﾟﾚｯﾄFlag
OUT B1787                ; SWBox_ｸﾗﾝﾌﾟ&ﾊﾟﾚｯﾄﾓｰﾄﾞONPL
;<h1/>□_異常検出
;[][]    Error Detect    [][]
;B220--B22F  B230--B23F
LDB X386E                ; H4st(RB15)ｱﾗｰﾑ_*ALM
AND T12                  ; 運転準備ONﾃﾞｨﾚｲ(3S)
LD CR2003                ; 常時OFF
ANB B0720                ; B220_545)Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0220                ; B220_545)HiST4ｽﾃｰｼﾞ前後RB異常
ORL
OUT B0220                ; B220_545)HiST4ｽﾃｰｼﾞ前後RB異常
LDP B0220                ; B220_545)HiST4ｽﾃｰｼﾞ前後RB異常
AND< D900 K64            ; FIFO_DATA_VALUE
MOV H0221 D0             ; エラーコード
FIFOW D0 D900            ; エラーコード  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0720                 ; B220_545)Bz停止
AND B0220                ; B220_545)HiST4ｽﾃｰｼﾞ前後RB異常
OUT B0720                ; B220_545)Bz停止
;　　
LD Y2426                 ; HiST4ﾜｰｸ押さえ下降
ANB X1390                ; HiST4_部_ﾜｰｸ押_下降端
LD Y2427                 ; HiST4ﾜｰｸ押さえ上昇
ANB X1391                ; HiST4_部_ﾜｰｸ押_上昇端
ORL
LD X1390                 ; HiST4_部_ﾜｰｸ押_下降端
AND X1391                ; HiST4_部_ﾜｰｸ押_上昇端
ORL
LD CR2003                ; 常時OFF
ANB B0721                ; B221_546)Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0221                ; B221_546)HiST4ｸﾗﾝﾌﾟ開閉CLS異常
ORL
MPS
AND T1791                ; CLSﾀｲﾑｱｳﾄ
OUT B0221                ; B221_546)HiST4ｸﾗﾝﾌﾟ開閉CLS異常
MPP
TMR K1791 K100           ; CLSﾀｲﾑｱｳﾄ
LDP B0221                ; B221_546)HiST4ｸﾗﾝﾌﾟ開閉CLS異常
AND< D900 K64            ; FIFO_DATA_VALUE
MOV H0222 D0             ; エラーコード
FIFOW D0 D900            ; エラーコード  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0721                 ; B221_546)Bz停止
AND B0221                ; B221_546)HiST4ｸﾗﾝﾌﾟ開閉CLS異常
OUT B0721                ; B221_546)Bz停止
;
LD T1706                 ; HiST4_ｺﾝﾀｸﾄﾍｯﾄﾞID_更新_DLY
AND L1700                ; HiST4_有効状態
AND<> D9100 D9106        ; HiST4_ｺﾝﾀｸﾄﾍｯﾄﾞID  HiST4_ｺﾝﾀｸﾄﾍｯﾄﾞID_Copy
LD CR2003                ; 常時OFF
ANB B0722                ; B222_547)Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0222                ; B222_547)HiST4_ﾃｽﾄﾍｯﾄﾞID_不一致
ORL
OUT B0222                ; B222_547)HiST4_ﾃｽﾄﾍｯﾄﾞID_不一致
LDP B0222                ; B222_547)HiST4_ﾃｽﾄﾍｯﾄﾞID_不一致
AND< D900 K64            ; FIFO_DATA_VALUE
MOV H0223 D0             ; エラーコード
FIFOW D0 D900            ; エラーコード  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0722                 ; B222_547)Bz停止
AND B0222                ; B222_547)HiST4_ﾃｽﾄﾍｯﾄﾞID_不一致
OUT B0722                ; B222_547)Bz停止
;
LD T1707                 ; HiST4_ﾊﾟﾚｯﾄID_更新_DLY
AND L1700                ; HiST4_有効状態
AND<> D9101 D9107        ; HiST4_ﾊﾟﾚｯﾄID  HiST4_ﾊﾟﾚｯﾄID_ｾﾝｻ状態
AND M10121               ; RB15_ﾜｰｸ受取り位置(ID確認位置)
LD CR2003                ; 常時OFF
ANB B0723                ; B223_548)Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0223                ; B223_548)HiST4_ﾊﾟﾚｯﾄID_不一致
ORL
OUT B0223                ; B223_548)HiST4_ﾊﾟﾚｯﾄID_不一致
LDP B0223                ; B223_548)HiST4_ﾊﾟﾚｯﾄID_不一致
AND< D900 K64            ; FIFO_DATA_VALUE
MOV H0224 D0             ; エラーコード
FIFOW D0 D900            ; エラーコード  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0723                 ; B223_548)Bz停止
AND B0223                ; B223_548)HiST4_ﾊﾟﾚｯﾄID_不一致
OUT B0723                ; B223_548)Bz停止
;
LD M10060                ; U17-1_S60 HiST3_ﾜｰｸ受取異常
LD CR2003                ; 常時OFF
ANB B0724                ; B224_549)Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0224                ; B224_549)HiST4_ﾜｰｸ受取異常
ORL
OUT B0224                ; B224_549)HiST4_ﾜｰｸ受取異常
LDP B0224                ; B224_549)HiST4_ﾜｰｸ受取異常
AND< D900 K64            ; FIFO_DATA_VALUE
MOV H0225 D0             ; エラーコード
FIFOW D0 D900            ; エラーコード  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0724                 ; B224_549)Bz停止
AND B0224                ; B224_549)HiST4_ﾜｰｸ受取異常
OUT B0724                ; B224_549)Bz停止
;
LD M10430                ; HiST4_ﾜｰｸ受渡し異常
LD CR2003                ; 常時OFF
ANB B0725                ; B225_550)Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0225                ; B225_550)HiST4_ﾜｰｸ受渡し異常
ORL
OUT B0225                ; B225_550)HiST4_ﾜｰｸ受渡し異常
LDP B0225                ; B225_550)HiST4_ﾜｰｸ受渡し異常
AND< D900 K64            ; FIFO_DATA_VALUE
MOV H0226 D0             ; エラーコード
FIFOW D0 D900            ; エラーコード  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0725                 ; B225_550)Bz停止
AND B0225                ; B225_550)HiST4_ﾜｰｸ受渡し異常
OUT B0725                ; B225_550)Bz停止
;
LD D9201.0
ANB X1392                ; HiST4_部_ﾜｰｸ確認(ON=有)
LDB D9201.0
AND X1392                ; HiST4_部_ﾜｰｸ確認(ON=有)
ORL
ANB M7903                ; 【搬送】搬送→Hi_ST4搬送開始
ANB M7908                ; 【搬送】搬送→Hi_ST4搬送完了
ANB M7913                ; 【搬送】HiST4除材開始
ANB M7918                ; 【搬送】HiST4除材完了
ANB M10053               ; U17-1_S53
ANB M10054               ; U17-1_S54
AND L1700                ; HiST4_有効状態
AND M71                  ; 自動運転開始BZ
LD CR2003                ; 常時OFF
ANB B0726                ; B226_551)Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0226                ; B226_551)HiST4 ﾜｰｸ情報不一致
ORL
ANB M35                  ; 空運転ﾓｰﾄﾞ
OUT B0226                ; B226_551)HiST4 ﾜｰｸ情報不一致
LDP B0226                ; B226_551)HiST4 ﾜｰｸ情報不一致
AND< D900 K64            ; FIFO_DATA_VALUE
MOV H0227 D0             ; エラーコード
FIFOW D0 D900            ; エラーコード  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0726                 ; B226_551)Bz停止
AND B0226                ; B226_551)HiST4 ﾜｰｸ情報不一致
OUT B0726                ; B226_551)Bz停止
;　　
LD M10259                ; OriStep9_ORGﾜｰｸ除去要求
LD CR2003                ; 常時OFF
ANB B073E                ; B23E_575)Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B023E                ; B23E_575)HiST4ﾜｰｸ除去要求
ORL
OUT B023E                ; B23E_575)HiST4ﾜｰｸ除去要求
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B073E                 ; B23E_575)Bz停止
AND B023E                ; B23E_575)HiST4ﾜｰｸ除去要求
OUT B073E                ; B23E_575)Bz停止
;電特検査中
LD W05.9                 ; 電気特性検査ｽﾃｰｼﾞ状態#4
AND M31                  ; 手動ﾓｰﾄﾞ
AND M10251               ; OriStep1
LD CR2003                ; 常時OFF
ANB B073F                ; B23F_576)Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B023F                ; B23F_576)HiST4ﾜｰｸ検査中
ORL
OUT B023F                ; B23F_576)HiST4ﾜｰｸ検査中
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B073F                 ; B23F_576)Bz停止
AND B023F                ; B23F_576)HiST4ﾜｰｸ検査中
OUT B073F                ; B23F_576)Bz停止
;異常ﾌﾞｻﾞｰまとめ
LDB B0220                ; B220_545)HiST4ｽﾃｰｼﾞ前後RB異常
OR B0720                 ; B220_545)Bz停止
LDB B0221                ; B221_546)HiST4ｸﾗﾝﾌﾟ開閉CLS異常
OR B0721                 ; B221_546)Bz停止
ANL
LDB B0222                ; B222_547)HiST4_ﾃｽﾄﾍｯﾄﾞID_不一致
OR B0722                 ; B222_547)Bz停止
ANL
LDB B0223                ; B223_548)HiST4_ﾊﾟﾚｯﾄID_不一致
OR B0723                 ; B223_548)Bz停止
ANL
LDB B0224                ; B224_549)HiST4_ﾜｰｸ受取異常
OR B0724                 ; B224_549)Bz停止
ANL
LDB B0225                ; B225_550)HiST4_ﾜｰｸ受渡し異常
OR B0725                 ; B225_550)Bz停止
ANL
LDB B0226                ; B226_551)HiST4 ﾜｰｸ情報不一致
OR B0726                 ; B226_551)Bz停止
ANL
LDB B0227                ; B227_552)
OR B0727                 ; B227_552)Bz停止
ANL
LDB B0228                ; B228_553)
OR B0728                 ; B228_553)Bz停止
ANL
LDB B0229                ; B229_554)
OR B0729                 ; B229_554)Bz停止
ANL
LDB B022A                ; B22A_555)
OR B072A                 ; B22A_555)Bz停止
ANL
LDB B022B                ; B22B_556)
OR B072B                 ; B22B_556)Bz停止
ANL
LDB B022C                ; B22C_557)
OR B072C                 ; B22C_557)Bz停止
ANL
LDB B022D                ; B22D_558)
OR B072D                 ; B22D_558)Bz停止
ANL
LDB B022E                ; B22E_559)
OR B072E                 ; B22E_559)Bz停止
ANL
LDB B022F                ; B22F_560)
OR B072F                 ; B22F_560)Bz停止
ANL
LDB B0230                ; B230_561)
OR B0730                 ; B230_561)Bz停止
ANL
LDB B0231                ; B231_562)
OR B0731                 ; B231_562)Bz停止
ANL
LDB B0232                ; B232_563)
OR B0732                 ; B232_563)Bz停止
ANL
LDB B0233                ; B233_564)
OR B0733                 ; B233_564)Bz停止
ANL
LDB B0234                ; B234_565)
OR B0734                 ; B234_565)Bz停止
ANL
LDB B0235                ; B235_566)
OR B0735                 ; B235_566)Bz停止
ANL
LDB B0236                ; B236_567)
OR B0736                 ; B236_567)Bz停止
ANL
LDB B0237                ; B237_568)
OR B0737                 ; B237_568)Bz停止
ANL
LDB B0238                ; B238_569)
OR B0738                 ; B238_569)Bz停止
ANL
LDB B0239                ; B239_570)
OR B0739                 ; B239_570)Bz停止
ANL
LDB B023A                ; B23A_571)
OR B073A                 ; B23A_571)Bz停止
ANL
LDB B023B                ; B23B_572)
OR B073B                 ; B23B_572)Bz停止
ANL
LDB B023C                ; B23C_573)
OR B073C                 ; B23C_573)Bz停止
ANL
LDB B023D                ; B23D_574)
OR B073D                 ; B23D_574)Bz停止
ANL
LDB B023E                ; B23E_575)HiST4ﾜｰｸ除去要求
OR B073E                 ; B23E_575)Bz停止
ANL
LDB B023F                ; B23F_576)HiST4ﾜｰｸ検査中
OR B073F                 ; B23F_576)Bz停止
ANL
INV
OUT M10489               ; U17_異常BZ補助
END
ENDH
