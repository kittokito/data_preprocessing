DEVICE:53
;MODULE:UT08_Low_ST3
;MODULE_TYPE:0
;SCRIPT_TYPE:
;<h1/>□_入力受け
;関連する入力受け(ｾﾝｻのﾃﾞｨﾚｲﾀｲﾏ等)を必要があれば作成する。
;通常は入力ﾕﾆｯﾄに入力時定数(ﾃﾞｨﾚｲ)があるので直接使用しても問題は無い。
LD X04                   ; 低温検査安全扉正常まとめ
OR M37                   ; ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
TMR K801 K5              ; LoST3扉閉
;ｺﾝﾀｸﾄﾍｯﾄﾞID
LD X1084                 ; LoST3_部_ｺﾝﾀｸﾄﾍｯﾄﾞID_1
OUT D4606.0
LD X1085                 ; LoST3_部_ｺﾝﾀｸﾄﾍｯﾄﾞID_2
OUT D4606.1
LD X1086                 ; LoST3_部_ｺﾝﾀｸﾄﾍｯﾄﾞID_4
OUT D4606.2
;ﾊﾟﾚｯﾄID
LD X1087                 ; LoST3_部_ﾊﾟﾚｯﾄID_1
OUT D4607.0
LD X1088                 ; LoST3_部_ﾊﾟﾚｯﾄID_2
OUT D4607.1
LD X1089                 ; LoST3_部_ﾊﾟﾚｯﾄID_4
OUT D4607.2
;ＩＤ保持
LD M71                   ; 自動運転開始BZ
AND L800                 ; Lo検査ST3_有効状態
LD M5412                 ; LoST3_ID保持ﾄﾘｶﾞ
ANB M5410                ; LoST3_無効中
ORL
AND M71                  ; 自動運転開始BZ
OUT M5412                ; LoST3_ID保持ﾄﾘｶﾞ
;____ｺﾝﾀｸﾄﾍｯﾄﾞＩＤ保持
;※PC送信用は生ﾃﾞｰﾀに変更
LD L800                  ; Lo検査ST3_有効状態
MPS
TMR K806 K5              ; LoST3_ｺﾝﾀｸﾄﾍｯﾄﾞID_更新_DLY
MPP
AND T806                 ; LoST3_ｺﾝﾀｸﾄﾍｯﾄﾞID_更新_DLY
@MOV D4606 D4600         ; LoST3_ｺﾝﾀｸﾄﾍｯﾄﾞID_Copy  LoST3_ｺﾝﾀｸﾄﾍｯﾄﾞID
LD CR2002                ; 常時ON
MOV D4606 W012A          ; LoST3_ｺﾝﾀｸﾄﾍｯﾄﾞID_Copy  低温検査ﾃｽﾄﾍｯﾄﾞID#3
LDB L800                 ; Lo検査ST3_有効状態
MOV K0 D4600             ; LoST3_ｺﾝﾀｸﾄﾍｯﾄﾞID
;____ﾊﾟﾚｯﾄＩＤ保持
LD L800                  ; Lo検査ST3_有効状態
LD M5121                 ; RB7_ﾜｰｸ受取り位置(ID確認位置)
OR T807                  ; LoST3_ﾊﾟﾚｯﾄID_更新_DLY
ANL
TMR K807 K5              ; LoST3_ﾊﾟﾚｯﾄID_更新_DLY
@MOV D4607 D4601         ; LoST3_ﾊﾟﾚｯﾄID_ｾﾝｻ状態  LoST3_ﾊﾟﾚｯﾄID
LD CR2002                ; 常時ON
MOV D4601 W0124          ; LoST3_ﾊﾟﾚｯﾄID  低温検査ﾊﾟﾚｯﾄID#3
LDB L800                 ; Lo検査ST3_有効状態
MOV K0 D4601             ; LoST3_ﾊﾟﾚｯﾄID
;<h1/>__ST_有効/無効選択
;段取り状態中ﾌﾗｸﾞの追加
;自動中は段取り状態中に、ST上のﾜｰｸ無、RBﾊﾝﾄﾞﾜｰｸ無し、供給部ﾜｰｸ無しにて無効状態OKとなる
LDPB X108F               ; ST3電特検査_有効/無効SW
ANPB B116A               ; LoST3検査_有効/無効_Tpb
INV
ANB L800                 ; Lo検査ST3_有効状態
OR M5404                 ; LoST3検査_有効確認要求
LD M300                  ; PC通信正常
OR M3                    ; OFFLINE_MODE
ANL
ANB M5405                ; LoST3検査_有効確認OK
OUT M5404                ; LoST3検査_有効確認要求
LD M5404                 ; LoST3検査_有効確認要求
AND W0107.2              ; Lo_ST3ﾁｪｯｶ-確認要求
LD W07.2                 ; Lo_ST3ﾁｪｯｶ-確認完了
OR M3                    ; OFFLINE_MODE
ANL
OUT M5405                ; LoST3検査_有効確認OK
LD M5405                 ; LoST3検査_有効確認OK
ANB W03.3                ; ｽﾃｰｼﾞ#3 無効切替要求
LDPB X108F               ; ST3電特検査_有効/無効SW
ANPB B116A               ; LoST3検査_有効/無効_Tpb
ANB W03.3                ; ｽﾃｰｼﾞ#3 無効切替要求
ANB B0108                ; B108_265)LoST3 ﾋｰﾀｰ上昇ﾀｲﾑｱｳﾄ異
INV
AND L800                 ; Lo検査ST3_有効状態
ORL
OUT M5406                ; LoST3検査_有効/無効要求
LD M71                   ; 自動運転開始BZ
LDB M3482                ; ﾊﾝﾄﾞ1_Lo検査未了品
ANB M3488                ; ﾊﾝﾄﾞ1_Lo検査ST3再検品
OR M3483                 ; ﾊﾝﾄﾞ1_Lo検査完了品(排出ﾜｰｸ)
ANL
LDB M3492                ; ﾊﾝﾄﾞ2_Lo検査未了品
ANB M3498                ; ﾊﾝﾄﾞ2_Lo検査ST3再検品
OR M3493                 ; ﾊﾝﾄﾞ2_Lo検査完了品(排出ﾜｰｸ)
ANL
AND= D4701 K0            ; LoST3 ﾜｰｸ有無記憶
LDB M5485                ; U8_起動中
LD M5001                 ; U8-1_S01_
ANB M3403                ; 【搬送】搬送→Lo_ST3搬送開始
ORL
ANL
ANB M3534                ; ﾊﾝﾄﾞ1_LoST3給材中ﾌﾗｸﾞ
ANB M3535                ; ﾊﾝﾄﾞ2_LoST3給材中ﾌﾗｸﾞ
OUT M5407                ; LoST3_自動中無効条件OK
LDB M71                  ; 自動運転開始BZ
OR M5407                 ; LoST3_自動中無効条件OK
OUT M5408                ; LoST3_無効OK条件
LD M5409                 ; LoST3_無効予約(自動運転)
ANB M5410                ; LoST3_無効中
ANP M5406                ; LoST3検査_有効/無効要求
OUT M5411                ; LoST3_予約ｷｬﾝｾﾙ
LDP M5406                ; LoST3検査_有効/無効要求
AND L800                 ; Lo検査ST3_有効状態
AND M71                  ; 自動運転開始BZ
ANB M5409                ; LoST3_無効予約(自動運転)
LD M5409                 ; LoST3_無効予約(自動運転)
ANB M5410                ; LoST3_無効中
ANB M5411                ; LoST3_予約ｷｬﾝｾﾙ
ORL
OUT M5409                ; LoST3_無効予約(自動運転)
LD M5409                 ; LoST3_無効予約(自動運転)
AND M5408                ; LoST3_無効OK条件
LDP M5406                ; LoST3検査_有効/無効要求
ANB M41                  ; ﾕﾆｯﾄ_起動中
ORL
LDB B0102                ; B102_259)LoST3_ﾃｽﾄﾍｯﾄﾞID_不一致
ANB B0103                ; B103_260)LoST3_ﾊﾟﾚｯﾄID_不一致
INV
MEP
ORL
LD M5410                 ; LoST3_無効中
ANB L800                 ; Lo検査ST3_有効状態
ORL
OUT M5410                ; LoST3_無効中
;<h1/>__ST_有効処理
LDP M5406                ; LoST3検査_有効/無効要求
LD<> D4606 K0            ; LoST3_ｺﾝﾀｸﾄﾍｯﾄﾞID_Copy
AND<> D4607 K0           ; LoST3_ﾊﾟﾚｯﾄID_ｾﾝｻ状態
AND M5121                ; RB7_ﾜｰｸ受取り位置(ID確認位置)
LD M35                   ; 空運転ﾓｰﾄﾞ
AND= D4606 K0            ; LoST3_ｺﾝﾀｸﾄﾍｯﾄﾞID_Copy
AND= D4607 K0            ; LoST3_ﾊﾟﾚｯﾄID_ｾﾝｻ状態
ORL
ANL
ANB L800                 ; Lo検査ST3_有効状態
LD L800                  ; Lo検査ST3_有効状態
ANB M5410                ; LoST3_無効中
ANB B0107                ; B107_264)LoST3 ﾋｰﾀｰ過昇異常
LD M300                  ; PC通信正常
OR M3                    ; OFFLINE_MODE
ANL
ORL
OUT L800                 ; Lo検査ST3_有効状態
;JIG_ID一致確認
LD L800                  ; Lo検査ST3_有効状態
MPS
LD= D4600 D3211          ; LoST3_ｺﾝﾀｸﾄﾍｯﾄﾞID  ﾊﾝﾄﾞ1 低温検査ﾃｽﾄﾍｯﾄﾞID
AND= D4601 D3210         ; LoST3_ﾊﾟﾚｯﾄID  ﾊﾝﾄﾞ1 低温検査ﾊﾟﾚｯﾄID
LD M35                   ; 空運転ﾓｰﾄﾞ
AND= D4600 K0            ; LoST3_ｺﾝﾀｸﾄﾍｯﾄﾞID
AND= D4601 K0            ; LoST3_ﾊﾟﾚｯﾄID
ORL
ANL
OUT M5401                ; LoST3-搬送ﾊﾝﾄﾞ1ID一致ﾌﾗｸﾞ
MPP
LD= D4600 D3311          ; LoST3_ｺﾝﾀｸﾄﾍｯﾄﾞID  ﾊﾝﾄﾞ2 低温検査ﾃｽﾄﾍｯﾄﾞID
AND= D4601 D3310         ; LoST3_ﾊﾟﾚｯﾄID  ﾊﾝﾄﾞ2 低温検査ﾊﾟﾚｯﾄID
LD M35                   ; 空運転ﾓｰﾄﾞ
AND= D4600 K0            ; LoST3_ｺﾝﾀｸﾄﾍｯﾄﾞID
AND= D4601 K0            ; LoST3_ﾊﾟﾚｯﾄID
ORL
ANL
OUT M5402                ; LoST3-搬送ﾊﾝﾄﾞ2ID一致ﾌﾗｸﾞ
;<h1/>__ｺﾝﾀｸﾄﾍｯﾄﾞﾋｰﾀｰ管理
LD L800                  ; Lo検査ST3_有効状態
MPS
LDB T841                 ; LoST3_温度範囲内保持監視
LD M126                  ; 低温検査安全扉正常
OR M37                   ; ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
ANL
ANL
TMR K840 D4534           ; LoST3_初期温度上昇ﾀｲﾑｱｳﾄ監視  Lo_ST3_温度上昇時間設定値TP
MRD
MOV D4533 D4536          ; Lo_ST3_温度範囲外時間設定値TP
MRD
LD<= D4532 D21120        ; Lo_ST3_温度範囲下限設定値TP
AND>= D4531 D21120       ; Lo_ST3_温度範囲上限設定値TP
OR M998                  ; 仮運転用
ANL
TMR K841 D4536           ; LoST3_温度範囲内保持監視
INV
TMR K842 D4536           ; LoST3_温度範囲外監視
MPP
LD T841                  ; LoST3_温度範囲内保持監視
OR M5413                 ; LoST3_温度範囲内到達
ANB T842                 ; LoST3_温度範囲外監視
ANL
OUT M5413                ; LoST3_温度範囲内到達
;<h1/>__ﾛﾎﾞｯﾄ等機器入力受け
;<h1/>□_装置状態・動作条件
;ﾕﾆｯﾄまとめ
LD M5070                 ; U8-1原点
AND M5230                ; U8-3原点
OUT M5480                ; U8_原点
;□ 非常停止
LDB M5071                ; U8-1全異常
ANB M5231                ; U8-3全異常
INV
OUT M5481                ; U8_即停止異常
;□ 起動条件
LD CR2003                ; 常時OFF
OUT M5482                ; U8_起動条件
;□ 起動OFF
LDB M50                  ; 運転準備
LD M60                   ; ｴﾗｰ発生
OR M56                   ; 自動起動停止指令(ｻｲｸﾙ停止)
AND M5484                ; U8_原点復帰中
ORL
OR M5486                 ; U8_CYCLE停止異常
OR T15                   ; 強制停止
OUT M5483                ; U8_起動OFF
;□ 原点復帰
LD M82                   ; 原点復帰開始
ANB M5484                ; U8_原点復帰中
OR M5484                 ; U8_原点復帰中
ANB M5483                ; U8_起動OFF
ANB M5491                ; U8_ERR発生
ANB M5297                ; OriStepEND
OUT M5484                ; U8_原点復帰中
;□ 起動中
LDB M5074                ; U8-1起動中
ANB M5234                ; U8-3(検査SUB)起動中
INV
OUT M5485                ; U8_起動中
;□ ｻｲｸﾙ停止異常
LDB M5075                ; U8-1ｻｲｸﾙ停止異常
ANB M5235                ; U8-3ｻｲｸﾙ停止異常
INV
OUT M5486                ; U8_CYCLE停止異常
;□ 払出停止異常
LDB CR2003               ; 常時OFF
INV
OUT M5487                ; U8_払出停止異常
;□ 警報補助
LDB CR2003               ; 常時OFF
INV
OUT M5488                ; U8_警報補助
;□ 機器準備確認
LD X344C                 ; L3st(RB6)ｻｰﾎﾞ状態_SV
ANB X3449                ; L3st(RB6)運転ﾓｰﾄﾞ_RMDS
AND X344D                ; L3st(RB6)非常停止_*EMGS
AND X344E                ; L3st(RB6)ｱﾗｰﾑ_*ALM
OUT M5490                ; U8_機器準備完了
;□ ｴﾗｰ発生　一時停止
LDB M5076                ; U8-1ｴﾗｰ発生
ANB M5236                ; U8-3ｴﾗｰ発生
INV
OUT M5491                ; U8_ERR発生
;□ 動作中ﾕﾆｯﾄ無し
LD M5077                 ; U8-1動作無し
AND M5237                ; U8-3動作無し
OUT M5492                ; U8_動作無し確認
;□ 払出しﾜｰｸ無し
LDB X1082                ; LoST3_部_ﾜｰｸ確認(ON=有)
ANB M3482                ; ﾊﾝﾄﾞ1_Lo検査未了品
ANB M3488                ; ﾊﾝﾄﾞ1_Lo検査ST3再検品
ANB M3492                ; ﾊﾝﾄﾞ2_Lo検査未了品
ANB M3498                ; ﾊﾝﾄﾞ2_Lo検査ST3再検品
TMR K814 K10
LD T814
OUT M5493                ; U8_WORK無し
;□ ｽﾃｯﾌﾟ起動
LD M30                   ; 自動ﾓｰﾄﾞ
OR M31                   ; 手動ﾓｰﾄﾞ
AND T801                 ; LoST3扉閉
ANB M51                  ; 即停止異常(緊急停止)
ANB M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ANB M57                  ; 全ﾕﾆｯﾄ払出完了
ANB M59                  ; 払出停止異常まとめ
ANB M5491                ; U8_ERR発生
LDB M140                 ; 全一時停止
ANB M160                 ; 低温検査一時停止
ORB M5017                ; U8-1_S17(検査SUB)起動確認
ANL
OUT M5479                ; U8_STEP動作
;<h1/>□_自動回路
;<h1/>◇_状態・動作条件(補助)
LD X1081                 ; LoST3_部_ﾜｰｸ押_上昇端
AND M5121                ; RB7_ﾜｰｸ受取り位置(ID確認位置)
ANB X1082                ; LoST3_部_ﾜｰｸ確認(ON=有)
AND= D4701 K0            ; LoST3 ﾜｰｸ有無記憶
OUT M5070                ; U8-1原点
LDB B0100                ; B100_257)LoST3ｽﾃｰｼﾞ前後RB異常
ANB B0102                ; B102_259)LoST3_ﾃｽﾄﾍｯﾄﾞID_不一致
ANB B0103                ; B103_260)LoST3_ﾊﾟﾚｯﾄID_不一致
ANB B0104                ; B104_261)LoST3_ﾜｰｸ受取異常
ANB B0105                ; B105_262)LoST3_ﾜｰｸ受渡し異常
ANB B0106                ; B106_263)LoST3 ﾜｰｸ情報不一致
ANB B0107                ; B107_264)LoST3 ﾋｰﾀｰ過昇異常
INV
OUT M5071                ; U8-1全異常
LD M5070                 ; U8-1原点
ANB M5074                ; U8-1起動中
AND M5479                ; U8_STEP動作
LD M5401                 ; LoST3-搬送ﾊﾝﾄﾞ1ID一致ﾌﾗｸﾞ
OR M5402                 ; LoST3-搬送ﾊﾝﾄﾞ2ID一致ﾌﾗｸﾞ
ANL
ANB M5408                ; LoST3_無効OK条件
OUT M5072                ; U8-1起動条件
LDB M50                  ; 運転準備
ORB L800                 ; Lo検査ST3_有効状態
OR M5486                 ; U8_CYCLE停止異常
OR T15                   ; 強制停止
OUT M5073                ; U8-1起動OFF
LD M73                   ; 各工程起動指令
AND M5072                ; U8-1起動条件
ANB B101D                ; 途中投入選択TP(1:単独_0:連動)
OR M5074                 ; U8-1起動中
ANB M5073                ; U8-1起動OFF
ANB M5063                ; U8-1 StepEnd
OUT M5074                ; U8-1起動中
;ﾕﾆｯﾄ1-1 ｻｲｸﾙ停止異常
LDB CR2003               ; 常時OFF
INV
OUT M5075                ; U8-1ｻｲｸﾙ停止異常
;ﾕﾆｯﾄ1-1 ｴﾗｰ発生まとめ
LDB B0101                ; B101_258)LoST3ｸﾗﾝﾌﾟ開閉CLS異常
ANB B011E                ; B11E_287)LoST3ﾜｰｸ除去要求
ANB B011F                ; B11F_288)LoST3ﾜｰｸ検査中
INV
OUT M5076                ; U8-1ｴﾗｰ発生
;ﾕﾆｯﾄ1-1 停止判定
LD= D4500 D4505          ; LoST3-1自動運転ｽﾃｯﾌﾟ  LoST3-1動作中判定
ORB M5074                ; U8-1起動中
TMR K810 K20             ; 停止完了判定ﾀｲﾏｰ
LD CR2002                ; 常時ON
MOV D4500 D4505          ; LoST3-1自動運転ｽﾃｯﾌﾟ  LoST3-1動作中判定
LD T810                  ; 停止完了判定ﾀｲﾏｰ
OUT M5077                ; U8-1動作無し
;□
;□　ﾕﾆｯﾄ1-1 自動運転ステップ開始
;□
LD CR2002                ; 常時ON
FMOV K0 M5000 K4         ; U8-1_S00_
LDB M5074                ; U8-1起動中
MOV K0 D4500             ; LoST3-1自動運転ｽﾃｯﾌﾟ
LD M5074                 ; U8-1起動中
MOV D4500 Z1             ; LoST3-1自動運転ｽﾃｯﾌﾟ
SET M5000:Z1             ; U8-1_S00_
;ﾜｰｸ有無判定等
LD M5000                 ; U8-1_S00_
AND M5479                ; U8_STEP動作
INC D4500                ; LoST3-1自動運転ｽﾃｯﾌﾟ
LD M5001                 ; U8-1_S01_
MPS
LDB M5493                ; U8_WORK無し
AND M5413                ; LoST3_温度範囲内到達
ANL
MPS
AND M3403                ; 【搬送】搬送→Lo_ST3搬送開始
INC D4500                ; LoST3-1自動運転ｽﾃｯﾌﾟ
MPP
LD M5401                 ; LoST3-搬送ﾊﾝﾄﾞ1ID一致ﾌﾗｸﾞ
OR M5402                 ; LoST3-搬送ﾊﾝﾄﾞ2ID一致ﾌﾗｸﾞ
ANB X1082                ; LoST3_部_ﾜｰｸ確認(ON=有)
ANL
OUT M5420                ; LoST3→搬送ﾜｰｸ供給要求
MPP
LD M5493                 ; U8_WORK無し
AND M36                  ; 払出処理
ANL
MOV K63 D4500            ; LoST3-1自動運転ｽﾃｯﾌﾟ
LD M5002                 ; U8-1_S02_
LD M3407                 ; 【搬送】搬送→Lo_ST3搬送完了
OR M5422                 ; LoST3→搬送ﾜｰｸ受取り完了
ANL
MPS
LDB M3403                ; 【搬送】搬送→Lo_ST3搬送開始
ANB M3407                ; 【搬送】搬送→Lo_ST3搬送完了
ANL
INC D4500                ; LoST3-1自動運転ｽﾃｯﾌﾟ
MPP
OUT M5422                ; LoST3→搬送ﾜｰｸ受取り完了
LD M5003                 ; U8-1_S03_
AND M5479                ; U8_STEP動作
AND= D4701 K1            ; LoST3 ﾜｰｸ有無記憶
MPS
LD X1082                 ; LoST3_部_ﾜｰｸ確認(ON=有)
OR M35                   ; 空運転ﾓｰﾄﾞ
ANL
INC D4500                ; LoST3-1自動運転ｽﾃｯﾌﾟ
MPP
LDB X1082                ; LoST3_部_ﾜｰｸ確認(ON=有)
ANB M35                  ; 空運転ﾓｰﾄﾞ
ANL
MOV K60 D4500            ; LoST3-1自動運転ｽﾃｯﾌﾟ
LD M5060                 ; U8-1_S60 LoST3_ﾜｰｸ受取異常
AND B0104                ; B104_261)LoST3_ﾜｰｸ受取異常
MOV K63 D4500            ; LoST3-1自動運転ｽﾃｯﾌﾟ
;　　ｸﾗﾝﾌﾟ指令
LD M5004                 ; U8-1_S04_ｸﾗﾝﾌﾟ指令
AND M5479                ; U8_STEP動作
AND X1080                ; LoST3_部_ﾜｰｸ押_下降端
ANB B0101                ; B101_258)LoST3ｸﾗﾝﾌﾟ開閉CLS異常
INC D4500                ; LoST3-1自動運転ｽﾃｯﾌﾟ
;　　Z軸上昇確認
LD M5005                 ; U8-1_S05_開始確認待ち
AND T801                 ; LoST3扉閉
AND M5479                ; U8_STEP動作
LD L552                  ; Lo搬送高さ移動完了(HIGH)
OR L551                  ; Lo搬送高さ移動完了(MIDLE)
ANL
INC D4500                ; LoST3-1自動運転ｽﾃｯﾌﾟ
@INC D4520               ; LoST3投入回数
LD M5006                 ; U8-1_S06_
INC D4500                ; LoST3-1自動運転ｽﾃｯﾌﾟ
LD M5007                 ; U8-1_S07_
INC D4500                ; LoST3-1自動運転ｽﾃｯﾌﾟ
LD M5008                 ; U8-1_S08_
INC D4500                ; LoST3-1自動運転ｽﾃｯﾌﾟ
;　　■電特検査前処理
LD M5009                 ; U8-1_S09_
AND M5479                ; U8_STEP動作
AND M5102                ; RB7_位置決め条件
MPS
@MOV D4550 D4540         ; ｺﾈｸﾀ挿入開始位置指令Pos  RB7_指令Pos
MPP
AND= D4550 D4540         ; ｺﾈｸﾀ挿入開始位置指令Pos  RB7_指令Pos
INC D4500                ; LoST3-1自動運転ｽﾃｯﾌﾟ
LD M5010                 ; U8-1_S10_ﾌﾟﾛｰﾌﾞｱﾌﾟﾛｰﾁ移動指令
AND M5104                ; RB7_位置決め起動指令
INC D4500                ; LoST3-1自動運転ｽﾃｯﾌﾟ
LD M5011                 ; U8-1_S11_到着確認
ANB M5104                ; RB7_位置決め起動指令
AND M5122                ; RB7_ｺﾈｸﾀ挿入開始位置
AND M5479                ; U8_STEP動作
INC D4500                ; LoST3-1自動運転ｽﾃｯﾌﾟ
LD M5012                 ; U8-1_S12_起動条件確認
AND M5479                ; U8_STEP動作
AND M5102                ; RB7_位置決め条件
MPS
@MOV D4551 D4540         ; ｺﾈｸﾀ挿入押込み量※1指令Pos  RB7_指令Pos
MPP
AND= D4551 D4540         ; ｺﾈｸﾀ挿入押込み量※1指令Pos  RB7_指令Pos
INC D4500                ; LoST3-1自動運転ｽﾃｯﾌﾟ
LD M5013                 ; U8-1_S13_ｺﾈｸﾀ押込位置移動指指令
AND M5104                ; RB7_位置決め起動指令
INC D4500                ; LoST3-1自動運転ｽﾃｯﾌﾟ
LD M5014                 ; U8-1_S14_ﾊﾟﾚｯﾄ前進指令
ANB M5104                ; RB7_位置決め起動指令
AND M5123                ; RB7_ｺﾈｸﾀ挿入押込み完了位置
INC D4500                ; LoST3-1自動運転ｽﾃｯﾌﾟ
;<h1/>__S15_電特検査処理開始
LD M5015                 ; U8-1_S15_検査SUB動作無確認
AND M5479                ; U8_STEP動作
ANB M5234                ; U8-3(検査SUB)起動中
INC D4500                ; LoST3-1自動運転ｽﾃｯﾌﾟ
LD M5016                 ; U8-1_S16_検査SUB開始ﾌﾗｸﾞ
AND M5479                ; U8_STEP動作
AND M5234                ; U8-3(検査SUB)起動中
INC D4500                ; LoST3-1自動運転ｽﾃｯﾌﾟ
LD M5017                 ; U8-1_S17(検査SUB)起動確認
AND M5479                ; U8_STEP動作
ANB M5234                ; U8-3(検査SUB)起動中
ANB M140                 ; 全一時停止
ANB M160                 ; 低温検査一時停止
INC D4500                ; LoST3-1自動運転ｽﾃｯﾌﾟ
LD M5018                 ; U8-1_S18_
AND M5479                ; U8_STEP動作
AND M5102                ; RB7_位置決め条件
MPS
@MOV D4552 D4540         ; ｺﾈｸﾀ抜き位置Pos  RB7_指令Pos
MPP
AND= D4552 D4540         ; ｺﾈｸﾀ抜き位置Pos  RB7_指令Pos
INC D4500                ; LoST3-1自動運転ｽﾃｯﾌﾟ
LD M5019                 ; U8-1_S19_ｺﾈｸﾀ抜き位置移動指令
AND M5104                ; RB7_位置決め起動指令
INC D4500                ; LoST3-1自動運転ｽﾃｯﾌﾟ
;　　ｽﾃｰｼﾞ後退
LD M5020                 ; U8-1_S20_到着確認
ANB M5104                ; RB7_位置決め起動指令
AND M5124                ; RB7_ｺﾈｸﾀ抜き位置
INC D4500                ; LoST3-1自動運転ｽﾃｯﾌﾟ
LD M5021                 ; U8-1_S21_起動条件確認
AND M5479                ; U8_STEP動作
AND M5102                ; RB7_位置決め条件
MPS
@MOV K1 D4540            ; RB7_指令Pos
MPP
AND= K1 D4540            ; RB7_指令Pos
INC D4500                ; LoST3-1自動運転ｽﾃｯﾌﾟ
LD M5022                 ; U8-1_S22_ﾜｰｸ受取位置移動指令
AND M5104                ; RB7_位置決め起動指令
INC D4500                ; LoST3-1自動運転ｽﾃｯﾌﾟ
LD M5023                 ; U8-1_S23_到着確認
ANB M5104                ; RB7_位置決め起動指令
AND M5121                ; RB7_ﾜｰｸ受取り位置(ID確認位置)
INC D4500                ; LoST3-1自動運転ｽﾃｯﾌﾟ
LD M5024                 ; U8-1_S24_
AND M5479                ; U8_STEP動作
INC D4500                ; LoST3-1自動運転ｽﾃｯﾌﾟ
;<h1/>__S25_ﾜｰｸ除材要求
LDB M3482                ; ﾊﾝﾄﾞ1_Lo検査未了品
ANB M3488                ; ﾊﾝﾄﾞ1_Lo検査ST3再検品
ANB M3492                ; ﾊﾝﾄﾞ2_Lo検査未了品
ANB M3498                ; ﾊﾝﾄﾞ2_Lo検査ST3再検品
ANB M3524                ; ﾊﾝﾄﾞ1LoST3除材中ﾌﾗｸﾞ
ANB M3525                ; ﾊﾝﾄﾞ2LoST3除材中ﾌﾗｸﾞ
ANB M3575                ; Lo_ST1-3 無効予約ｽﾃｰｼﾞ有ﾌﾗｸﾞ
ANB M3576                ; Lo_ST1-3 温度未到達ｽﾃｰｼﾞ有ﾌﾗｸﾞ
INV
OUT M5425                ; LoST3_ﾜｰｸ除去要求発行許可
;M9　M1304を上流仮置きよりﾜｰｸ除材要求なしに入れ替え
LD M5025                 ; U8-1_S25_ﾜｰｸ受取要求
MPS
AND M3413                ; 【搬送】LoST3除材開始
INC D4500                ; LoST3-1自動運転ｽﾃｯﾌﾟ
MPP
LDB M1557                ; U2_S57_受渡可(→検査RB)
OR M5425                 ; LoST3_ﾜｰｸ除去要求発行許可
ANL
OUT M5421                ; LoST3→搬送1除材要求
LD M5026                 ; U8-1_S26_
LD M3417                 ; 【搬送】LoST3除材完了
OR M5423                 ; LoST3→搬送除材完了受取
ANL
MPS
LDB M3413                ; 【搬送】LoST3除材開始
ANB M3417                ; 【搬送】LoST3除材完了
ANL
INC D4500                ; LoST3-1自動運転ｽﾃｯﾌﾟ
MPP
OUT M5423                ; LoST3→搬送除材完了受取
LD M5027                 ; U8-1_S27_
AND M5479                ; U8_STEP動作
AND= D4701 K0            ; LoST3 ﾜｰｸ有無記憶
LD L552                  ; Lo搬送高さ移動完了(HIGH)
OR L551                  ; Lo搬送高さ移動完了(MIDLE)
OR L550                  ; ﾜｰｸ入替高さ移動完了(LOW)
ANL
MPS
ANB X1082                ; LoST3_部_ﾜｰｸ確認(ON=有)
INC D4500                ; LoST3-1自動運転ｽﾃｯﾌﾟ
MPP
AND X1082                ; LoST3_部_ﾜｰｸ確認(ON=有)
OUT M5430                ; LoST3_ﾜｰｸ受渡し異常
LD M5028                 ; U8-1_S28_
AND M5479                ; U8_STEP動作
INC D4500                ; LoST3-1自動運転ｽﾃｯﾌﾟ
LD M5029                 ; U8-1_S29_
AND M5479                ; U8_STEP動作
MOV K63 D4500            ; LoST3-1自動運転ｽﾃｯﾌﾟ
;ｻｲｸﾙ終了
LD M5062                 ; U8-1_S62_
OR CR2003                ; 常時OFF
@MOV K63 D4500           ; LoST3-1自動運転ｽﾃｯﾌﾟ
;<h1/>◇_電特検査SUB 状態・動作条件(補助)
LD CR2002                ; 常時ON
OUT M5230                ; U8-3原点
LDB CR2003               ; 常時OFF
INV
OUT M5231                ; U8-3全異常
LD M5230                 ; U8-3原点
ANB M5234                ; U8-3(検査SUB)起動中
AND M5479                ; U8_STEP動作
LD M300                  ; PC通信正常
OR M3                    ; OFFLINE_MODE
ANL
OUT M5232                ; U8-3起動条件
LDB M50                  ; 運転準備
OR M5486                 ; U8_CYCLE停止異常
OR T15                   ; 強制停止
OUT M5233                ; U8-3起動OFF
LD M5016                 ; U8-1_S16_検査SUB開始ﾌﾗｸﾞ
AND M5232                ; U8-3起動条件
OR M5234                 ; U8-3(検査SUB)起動中
ANB M5233                ; U8-3起動OFF
ANB M5223                ; U8-3 StepEnd
OUT M5234                ; U8-3(検査SUB)起動中
;tp表示
LD CR2002                ; 常時ON
DW K0 D4900              ; Lo検査ST3_ｽﾃｰﾀｽ表示1
DW K0 D4901              ; Lo検査ST3_ｽﾃｰﾀｽ表示2
LD M5234                 ; U8-3(検査SUB)起動中
DW K1 D4900              ; Lo検査ST3_ｽﾃｰﾀｽ表示1
LD= D4704 K1             ; LoST3 Lo検査結果(1=OK_2=NG)
DW K2 D4900              ; Lo検査ST3_ｽﾃｰﾀｽ表示1
LD= D4704 K2             ; LoST3 Lo検査結果(1=OK_2=NG)
DW K3 D4900              ; Lo検査ST3_ｽﾃｰﾀｽ表示1
LDB L800                 ; Lo検査ST3_有効状態
DW K4 D4900              ; Lo検査ST3_ｽﾃｰﾀｽ表示1
DW K2 D4901              ; Lo検査ST3_ｽﾃｰﾀｽ表示2
LD L800                  ; Lo検査ST3_有効状態
ANB M5413                ; LoST3_温度範囲内到達
DW K5 D4900              ; Lo検査ST3_ｽﾃｰﾀｽ表示1
DW K1 D4901              ; Lo検査ST3_ｽﾃｰﾀｽ表示2
;ﾕﾆｯﾄ1-3ｻｲｸﾙ停止異常
LDB CR2003               ; 常時OFF
INV
OUT M5235                ; U8-3ｻｲｸﾙ停止異常
;ﾕﾆｯﾄ1-3ｴﾗｰ発生まとめ
LDB CR2003               ; 常時OFF
INV
OUT M5236                ; U8-3ｴﾗｰ発生
;ﾕﾆｯﾄ1-3停止判定
LD= D4502 D4507          ; LoST3-3自動運転ｽﾃｯﾌﾟ  LoST3-3動作中判定
TMR K812 K20
LD CR2002                ; 常時ON
MOV D4502 D4507          ; LoST3-3自動運転ｽﾃｯﾌﾟ  LoST3-3動作中判定
LD T812
ORB M5234                ; U8-3(検査SUB)起動中
OUT M5237                ; U8-3動作無し
;□
;□　ﾕﾆｯﾄ1-3自動運転ステップ開始
;□
LD CR2002                ; 常時ON
FMOV K0 M5160 K4         ; U8-3_S0
LDB M5234                ; U8-3(検査SUB)起動中
MOV K0 D4502             ; LoST3-3自動運転ｽﾃｯﾌﾟ
LD M5234                 ; U8-3(検査SUB)起動中
MOV D4502 Z1             ; LoST3-3自動運転ｽﾃｯﾌﾟ
SET M5160:Z1             ; U8-3_S0
;<h1/>__S0_ﾜｰｸ有無判定
LD M5160                 ; U8-3_S0
MPS
LD T801                  ; LoST3扉閉
AND M5479                ; U8_STEP動作
ANB M35                  ; 空運転ﾓｰﾄﾞ
ANB M3                   ; OFFLINE_MODE
ANL
INC D4502                ; LoST3-3自動運転ｽﾃｯﾌﾟ
MPP
LD M35                   ; 空運転ﾓｰﾄﾞ
OR M3                    ; OFFLINE_MODE
ANL
MPS
AND T830                 ; Lo検査時間(仮)
INC D4502                ; LoST3-3自動運転ｽﾃｯﾌﾟ
MPP
TMR K830 K500            ; Lo検査時間(仮)
LD M5161                 ; U8-3_S1Lo検査ｽﾀｰﾄ要求
AND W0103.8              ; 電気特性検査開始要求#3
LD W03.8                 ; 電気特性検査ｽﾃｰｼﾞ状態#3
ANB W03.13               ; 電気特性検査結果#3
OR M3                    ; OFFLINE_MODE
OR M35                   ; 空運転ﾓｰﾄﾞ
ANL
INC D4502                ; LoST3-3自動運転ｽﾃｯﾌﾟ
LD M5162                 ; U8-3_S2
LDB W03.8                ; 電気特性検査ｽﾃｰｼﾞ状態#3
OR M3                    ; OFFLINE_MODE
ANL
INC D4502                ; LoST3-3自動運転ｽﾃｯﾌﾟ
LD M5163                 ; U8-3_S3
MPS
AND<> D4704 K0           ; LoST3 Lo検査結果(1=OK_2=NG)
INC D4502                ; LoST3-3自動運転ｽﾃｯﾌﾟ
MRD
LDB M35                  ; 空運転ﾓｰﾄﾞ
ANB M3                   ; OFFLINE_MODE
ANL
MPS
AND W03.13               ; 電気特性検査結果#3
MOV K1 D4704             ; LoST3 Lo検査結果(1=OK_2=NG)
MPP
ANB W03.13               ; 電気特性検査結果#3
MOV K2 D4704             ; LoST3 Lo検査結果(1=OK_2=NG)
MPP
LD M3                    ; OFFLINE_MODE
OR M35                   ; 空運転ﾓｰﾄﾞ
ANL
MPS
ANB B1038                ; OFF_LINE_検査結果(OFF=OK_ON=NG)
MOV K1 D4704             ; LoST3 Lo検査結果(1=OK_2=NG)
MPP
AND B1038                ; OFF_LINE_検査結果(OFF=OK_ON=NG)
MOV K2 D4704             ; LoST3 Lo検査結果(1=OK_2=NG)
LD M5164                 ; U8-3_S4
INC D4502                ; LoST3-3自動運転ｽﾃｯﾌﾟ
LD M5165                 ; U8-3_S5
INC D4502                ; LoST3-3自動運転ｽﾃｯﾌﾟ
LD M5166                 ; U8-3_S6
INC D4502                ; LoST3-3自動運転ｽﾃｯﾌﾟ
LD M5167                 ; U8-3_S7
INC D4502                ; LoST3-3自動運転ｽﾃｯﾌﾟ
LD M5168                 ; U8-3_S8
INC D4502                ; LoST3-3自動運転ｽﾃｯﾌﾟ
LD M5169                 ; U8-3_S9
AND T801                 ; LoST3扉閉
AND M5479                ; U8_STEP動作
MOV K63 D4502            ; LoST3-3自動運転ｽﾃｯﾌﾟ
;<h1/>□_原点復帰回路
LD CR2002                ; 常時ON
FMOV K0 M5250 K3         ; OriStep0
LDB M5484                ; U8_原点復帰中
MOV K0 D4510             ; LoST3 原点復帰ｽﾃｯﾌﾟ
LD M5484                 ; U8_原点復帰中
MOV D4510 Z1             ; LoST3 原点復帰ｽﾃｯﾌﾟ
SET M5250:Z1             ; OriStep0
;原点復帰ｻｲｸﾙ監視
LD M5484                 ; U8_原点復帰中
TMR K800 K200            ; UNIT9原点復帰ﾀｲﾑｱｳﾄ
;原点復帰ステップ開始
LD M5250                 ; OriStep0
AND T801                 ; LoST3扉閉
AND M5479                ; U8_STEP動作
AND L552                 ; Lo搬送高さ移動完了(HIGH)
DW K0 D4520              ; LoST3投入回数
CON
INC D4510                ; LoST3 原点復帰ｽﾃｯﾌﾟ
LD M5251                 ; OriStep1
AND T801                 ; LoST3扉閉
AND M5479                ; U8_STEP動作
ANB W03.8                ; 電気特性検査ｽﾃｰｼﾞ状態#3
INC D4510                ; LoST3 原点復帰ｽﾃｯﾌﾟ
LD M5252                 ; OriStep2
AND T801                 ; LoST3扉閉
AND M5479                ; U8_STEP動作
AND X344A                ; L3st(RB6)原点確定_HEND
INC D4510                ; LoST3 原点復帰ｽﾃｯﾌﾟ
LD M5253                 ; OriStep3_
AND T801                 ; LoST3扉閉
AND M5479                ; U8_STEP動作
AND M4102                ; RB5_位置決め条件
MPS
@MOV K1 D4540            ; RB7_指令Pos
MPP
AND= K1 D4540            ; RB7_指令Pos
INC D4510                ; LoST3 原点復帰ｽﾃｯﾌﾟ
LD M5254                 ; OriStep4_ｽﾃｰｼﾞ戻指令
AND M5104                ; RB7_位置決め起動指令
INC D4510                ; LoST3 原点復帰ｽﾃｯﾌﾟ
LD M5255                 ; OriStep5_
ANB M5104                ; RB7_位置決め起動指令
AND M5121                ; RB7_ﾜｰｸ受取り位置(ID確認位置)
INC D4510                ; LoST3 原点復帰ｽﾃｯﾌﾟ
LD M5256                 ; OriStep6_
AND T801                 ; LoST3扉閉
AND M5479                ; U8_STEP動作
AND L552                 ; Lo搬送高さ移動完了(HIGH)
INC D4510                ; LoST3 原点復帰ｽﾃｯﾌﾟ
LD M5257                 ; OriStep7_ｸﾗﾝﾌﾟ上昇指令
AND T801                 ; LoST3扉閉
AND M5479                ; U8_STEP動作
AND X1081                ; LoST3_部_ﾜｰｸ押_上昇端
INC D4510                ; LoST3 原点復帰ｽﾃｯﾌﾟ
;　　ﾜｰｸ有無ﾁｪｯｸ
LD M5258                 ; OriStep8
AND T801                 ; LoST3扉閉
AND M5479                ; U8_STEP動作
MPS
ANB X1082                ; LoST3_部_ﾜｰｸ確認(ON=有)
MOV K10 D4510            ; LoST3 原点復帰ｽﾃｯﾌﾟ
MPP
AND X1082                ; LoST3_部_ﾜｰｸ確認(ON=有)
INC D4510                ; LoST3 原点復帰ｽﾃｯﾌﾟ
;　　ﾜｰｸ除去要求
LD M5259                 ; OriStep9_ORGﾜｰｸ除去要求
AND T801                 ; LoST3扉閉
AND M5479                ; U8_STEP動作
AND B011E                ; B11E_287)LoST3ﾜｰｸ除去要求
MOV K46 D4510            ; LoST3 原点復帰ｽﾃｯﾌﾟ
;　　
LD M5260                 ; OriStep10
MPS
AND M5480                ; U8_原点
MOV K46 D4510            ; LoST3 原点復帰ｽﾃｯﾌﾟ
MPP
FMOV K0 D4700 K20        ; LoST3 INDEX NO.
LD M5296                 ; OriStep46
ANB M82                  ; 原点復帰開始
MOV K47 D4510            ; LoST3 原点復帰ｽﾃｯﾌﾟ
;<h1/>□_手動回路
LD M31                   ; 手動ﾓｰﾄﾞ
AND M32                  ; ﾒｲﾝ手動操作可能条件
ANB M5485                ; U8_起動中
ANB M5484                ; U8_原点復帰中
LDB W03.8                ; 電気特性検査ｽﾃｰｼﾞ状態#3
OR M3                    ; OFFLINE_MODE
ANL
MC
LD M5102                 ; RB7_位置決め条件
LD L550                  ; ﾜｰｸ入替高さ移動完了(LOW)
OR L551                  ; Lo搬送高さ移動完了(MIDLE)
OR L552                  ; Lo搬送高さ移動完了(HIGH)
ANL
ANB M5330                ; RB7_ﾜｰｸ受取り位置移動指令
ANB M5331                ; RB7_ｺﾈｸﾀ挿入開始位置移動指令
ANB M5332                ; RB7_ｺﾈｸﾀ挿入押込み完了位置移動指
ANB M5333                ; RB7_ｺﾈｸﾀ抜き位置移動指令
OUT M5320                ; RB7_ﾜｰｸ受取り位置移動OK
OUT M5321                ; RB7_ｺﾈｸﾀ挿入開始位置移動OK
OUT M5322                ; RB7_ｺﾈｸﾀ挿入押込み完了位置移動OK
OUT M5323                ; RB7_ｺﾈｸﾀ抜き位置移動OK
LDP B1160                ; RB7_ﾜｰｸ受取り位置TP-PB
AND M5320                ; RB7_ﾜｰｸ受取り位置移動OK
OR M5330                 ; RB7_ﾜｰｸ受取り位置移動指令
ANB M5107                ; RB7_位置決め完了
OUT M5330                ; RB7_ﾜｰｸ受取り位置移動指令
MOV K1 D4540             ; RB7_指令Pos
LDP B1161                ; RB7_ｺﾈｸﾀ挿入開始位置TP-PB
AND M5321                ; RB7_ｺﾈｸﾀ挿入開始位置移動OK
OR M5331                 ; RB7_ｺﾈｸﾀ挿入開始位置移動指令
ANB M5107                ; RB7_位置決め完了
OUT M5331                ; RB7_ｺﾈｸﾀ挿入開始位置移動指令
MOV D4550 D4540          ; ｺﾈｸﾀ挿入開始位置指令Pos  RB7_指令Pos
LDP B1162                ; RB7_ｺﾈｸﾀ挿入押込み完了位置TP-PB
AND M5322                ; RB7_ｺﾈｸﾀ挿入押込み完了位置移動OK
OR M5332                 ; RB7_ｺﾈｸﾀ挿入押込み完了位置移動指
ANB M5107                ; RB7_位置決め完了
OUT M5332                ; RB7_ｺﾈｸﾀ挿入押込み完了位置移動指
MOV D4551 D4540          ; ｺﾈｸﾀ挿入押込み量※1指令Pos  RB7_指令Pos
LDP B1163                ; RB7_ｺﾈｸﾀ抜き位置TP-PB
AND M5323                ; RB7_ｺﾈｸﾀ抜き位置移動OK
OR M5333                 ; RB7_ｺﾈｸﾀ抜き位置移動指令
ANB M5107                ; RB7_位置決め完了
OUT M5333                ; RB7_ｺﾈｸﾀ抜き位置移動指令
MOV D4552 D4540          ; ｺﾈｸﾀ抜き位置Pos  RB7_指令Pos
;    ｸﾗﾝﾌﾟ開閉
LD CR2002                ; 常時ON
ANB L518                 ; ﾊﾝﾄﾞ1st3部ﾜｰｸ受渡し動作完了
ANB L519                 ; ﾊﾝﾄﾞ2st3部ﾜｰｸ受取り動作完了
ANB L520                 ; ﾊﾝﾄﾞ2st3部ﾜｰｸ受渡し動作完了
ANB L521                 ; ﾊﾝﾄﾞ1OKｺﾝﾍﾞﾔ部ﾜｰｸ受渡し動作完了
ANB L551                 ; Lo搬送高さ移動完了(MIDLE)
ANB L552                 ; Lo搬送高さ移動完了(HIGH)
INV
AND M139                 ; 安全入力OK
AND M3302                ; U5-3_RCX240起動条件
AND M3311                ; RCX240動作完了
AND M5121                ; RB7_ﾜｰｸ受取り位置(ID確認位置)
ANB M3600                ; Lo搬送XY位置移動
OUT M5304                ; LoST3ｸﾗﾝﾌﾟ開閉_閉_起動OK
LDP B1164                ; LoST3ｸﾗﾝﾌﾟ閉_TP-PB
AND M5304                ; LoST3ｸﾗﾝﾌﾟ開閉_閉_起動OK
LD M5305                 ; LoST3ｸﾗﾝﾌﾟ開閉_閉_指令
ANB M5307                ; LoST3ｸﾗﾝﾌﾟ開閉_開__指令
ORL
OUT M5305                ; LoST3ｸﾗﾝﾌﾟ開閉_閉_指令
LD CR2002                ; 常時ON
ANB W03.8                ; 電気特性検査ｽﾃｰｼﾞ状態#3
AND M5121                ; RB7_ﾜｰｸ受取り位置(ID確認位置)
OUT M5306                ; LoST3ｸﾗﾝﾌﾟ開閉_開_起動OK
LDP B1165                ; LoST3ｸﾗﾝﾌﾟ開_TP-PB
AND M5306                ; LoST3ｸﾗﾝﾌﾟ開閉_開_起動OK
LD M5307                 ; LoST3ｸﾗﾝﾌﾟ開閉_開__指令
ANB M5305                ; LoST3ｸﾗﾝﾌﾟ開閉_閉_指令
ORL
OUT M5307                ; LoST3ｸﾗﾝﾌﾟ開閉_開__指令
MCR
LDP B1166                ; SWBox_ﾊﾟﾚｯﾄ前後ﾓｰﾄﾞsw
ANB M5312                ; LoST3SwBoxMode_ﾊﾟﾚｯﾄ前後Flag
LDPB B1166               ; SWBox_ﾊﾟﾚｯﾄ前後ﾓｰﾄﾞsw
AND M5312                ; LoST3SwBoxMode_ﾊﾟﾚｯﾄ前後Flag
ANB M6312                ; Hi_RBﾁｬｯｸ開可
ANB M5313                ; LoST3SwBoxMode_ｸﾗﾝﾌﾟ&ﾊﾟﾚｯﾄFlag
ORL
AND= D50 K201            ; TpM-K_表示中ページNo.
AND M31                  ; 手動ﾓｰﾄﾞ
ANB M81                  ; 原点復帰動作中
AND M50                  ; 運転準備
AND M29                  ; 未使用
OUT M5312                ; LoST3SwBoxMode_ﾊﾟﾚｯﾄ前後Flag
LDP B1167                ; SWBox_ｸﾗﾝﾌﾟ&ﾊﾟﾚｯﾄﾓｰﾄﾞsw
ANB M5313                ; LoST3SwBoxMode_ｸﾗﾝﾌﾟ&ﾊﾟﾚｯﾄFlag
LDPB B1167               ; SWBox_ｸﾗﾝﾌﾟ&ﾊﾟﾚｯﾄﾓｰﾄﾞsw
AND M5313                ; LoST3SwBoxMode_ｸﾗﾝﾌﾟ&ﾊﾟﾚｯﾄFlag
ANB M5312                ; LoST3SwBoxMode_ﾊﾟﾚｯﾄ前後Flag
ANB M6312                ; Hi_RBﾁｬｯｸ開可
ORL
AND= D50 K201            ; TpM-K_表示中ページNo.
AND M31                  ; 手動ﾓｰﾄﾞ
ANB M81                  ; 原点復帰動作中
AND M50                  ; 運転準備
AND M29                  ; 未使用
OUT M5313                ; LoST3SwBoxMode_ｸﾗﾝﾌﾟ&ﾊﾟﾚｯﾄFlag
;<h1/>▽_検査ｽﾃｰｼﾞRB移動ｻﾌﾞﾙｰﾁﾝ
;　　移動POS
LD X344A                 ; L3st(RB6)原点確定_HEND
AND X344B                ; L3st(RB6)位置決め完了_PEND
MPS
AND X3440                ; L3st(RB6)完了Pos_PM1
OUT D4544.0
MRD
AND X3441                ; L3st(RB6)完了Pos_PM2
OUT D4544.1
MRD
AND X3442                ; L3st(RB6)完了Pos_PM4
OUT D4544.2
MRD
AND X3443                ; L3st(RB6)完了Pos_PM8
OUT D4544.3
MRD
AND X3444                ; L3st(RB6)完了Pos_PM16
OUT D4544.4
MRD
AND X3445                ; L3st(RB6)完了Pos_PM32
OUT D4544.5
MRD
AND X3446                ; L3st(RB6)完了Pos_PM64
OUT D4544.6
MRD
AND X3447                ; L3st(RB6)完了Pos_PM128
OUT D4544.7
MPP
INV
MOV K0 D4544             ; RB7_完了Pos
;'RB7 POS MANUAL JIG SETTING
;IF D250 < K1 THEN
;   D250 = K1
;END IF
;D4550 = (D250 - K1)*3 + 51   'ｺﾈｸﾀ挿入開始
;D4551 = (D250 - K1)*3 + 52   'ｺﾈｸﾀ挿入開始
;D4552 = (D250 - K1)*3 + 53   'ｺﾈｸﾀ挿入開始
LD M31                   ; 手動ﾓｰﾄﾞ
NCJ K1000
;'RB7 POS MANUAL JIG SETTING
;
;IF D250 < K1 THEN
;
LD< D250 K1              ; 手動_JIG_NO.指定
NCJ K2000
;   D250 = K1
;
LD CR2002                ; 常時ON
MOV K1 D250              ; 手動_JIG_NO.指定
;END IF
;
LABEL K2000
;D4550 = (D250 - K1)*3 + 51   'ｺﾈｸﾀ挿入開始
;
LD CR2002                ; 常時ON
LDA D250                 ; 手動_JIG_NO.指定
CON
EXT
CON
SUB.L +1
CON
MUL.L +3
CON
ADD.L +51
CON
STA D4550                ; ｺﾈｸﾀ挿入開始位置指令Pos
;D4551 = (D250 - K1)*3 + 52   'ｺﾈｸﾀ挿入開始
;
LD CR2002                ; 常時ON
LDA D250                 ; 手動_JIG_NO.指定
CON
EXT
CON
SUB.L +1
CON
MUL.L +3
CON
ADD.L +52
CON
STA D4551                ; ｺﾈｸﾀ挿入押込み量※1指令Pos
;D4552 = (D250 - K1)*3 + 53   'ｺﾈｸﾀ挿入開始
LD CR2002                ; 常時ON
LDA D250                 ; 手動_JIG_NO.指定
CON
EXT
CON
SUB.L +1
CON
MUL.L +3
CON
ADD.L +53
CON
STA D4552                ; ｺﾈｸﾀ抜き位置Pos
LABEL K1000
;
;'RB7 POS AUTO JIG SETTING
;D4550 = (D4715 - K1)*3 + 51   'ｺﾈｸﾀ挿入開始
;D4551 = (D4715 - K1)*3 + 52   'ｺﾈｸﾀ挿入開始
;D4552 = (D4715 - K1)*3 + 53   'ｺﾈｸﾀ挿入開始
LD M30                   ; 自動ﾓｰﾄﾞ
NCJ K1001
;'RB7 POS AUTO JIG SETTING
;
;D4550 = (D4715 - K1)*3 + 51   'ｺﾈｸﾀ挿入開始
;
LD CR2002                ; 常時ON
LDA D4715                ; LoST3 低温検査ﾛﾎﾞｯﾄNo.
CON
EXT
CON
SUB.L +1
CON
MUL.L +3
CON
ADD.L +51
CON
STA D4550                ; ｺﾈｸﾀ挿入開始位置指令Pos
;D4551 = (D4715 - K1)*3 + 52   'ｺﾈｸﾀ挿入開始
;
LD CR2002                ; 常時ON
LDA D4715                ; LoST3 低温検査ﾛﾎﾞｯﾄNo.
CON
EXT
CON
SUB.L +1
CON
MUL.L +3
CON
ADD.L +52
CON
STA D4551                ; ｺﾈｸﾀ挿入押込み量※1指令Pos
;D4552 = (D4715 - K1)*3 + 53   'ｺﾈｸﾀ挿入開始
LD CR2002                ; 常時ON
LDA D4715                ; LoST3 低温検査ﾛﾎﾞｯﾄNo.
CON
EXT
CON
SUB.L +1
CON
MUL.L +3
CON
ADD.L +53
CON
STA D4552                ; ｺﾈｸﾀ抜き位置Pos
LABEL K1001
;
LD= D4544 K1             ; RB7_完了Pos
AND<> D4544 K0           ; RB7_完了Pos
OUT M5121                ; RB7_ﾜｰｸ受取り位置(ID確認位置)
LD= D4544 D4550          ; RB7_完了Pos  ｺﾈｸﾀ挿入開始位置指令Pos
AND<> D3544 K0           ; RB5_完了Pos
OUT M5122                ; RB7_ｺﾈｸﾀ挿入開始位置
LD= D4544 D4551          ; RB7_完了Pos  ｺﾈｸﾀ挿入押込み量※1指令Pos
AND<> D4544 K0           ; RB7_完了Pos
OUT M5123                ; RB7_ｺﾈｸﾀ挿入押込み完了位置
LD= D4544 D4552          ; RB7_完了Pos  ｺﾈｸﾀ抜き位置Pos
AND<> D4544 K0           ; RB7_完了Pos
OUT M5124                ; RB7_ｺﾈｸﾀ抜き位置
;	検査ｽﾗｲﾀﾞ位置決め処理
LD X344C                 ; L3st(RB6)ｻｰﾎﾞ状態_SV
ANB X3449                ; L3st(RB6)運転ﾓｰﾄﾞ_RMDS
LD X344A                 ; L3st(RB6)原点確定_HEND
OR CR2002                ; 常時ON
ANL
AND X344D                ; L3st(RB6)非常停止_*EMGS
AND X344E                ; L3st(RB6)ｱﾗｰﾑ_*ALM
OUT M5100                ; RB7_状態OK
LD M50                   ; 運転準備
ANB M51                  ; 即停止異常(緊急停止)
AND M5100                ; RB7_状態OK
ANB M5104                ; RB7_位置決め起動指令
OUT M5102                ; RB7_位置決め条件
LDB M5010                ; U8-1_S10_ﾌﾟﾛｰﾌﾞｱﾌﾟﾛｰﾁ移動指令
ANB M5013                ; U8-1_S13_ｺﾈｸﾀ押込位置移動指指令
ANB M5019                ; U8-1_S19_ｺﾈｸﾀ抜き位置移動指令
ANB M5022                ; U8-1_S22_ﾜｰｸ受取位置移動指令
ANB M5254                ; OriStep4_ｽﾃｰｼﾞ戻指令
INV
LDB M5330                ; RB7_ﾜｰｸ受取り位置移動指令
ANB M5331                ; RB7_ｺﾈｸﾀ挿入開始位置移動指令
ANB M5332                ; RB7_ｺﾈｸﾀ挿入押込み完了位置移動指
ANB M5333                ; RB7_ｺﾈｸﾀ抜き位置移動指令
INV
ORL
OUT M5103                ; RB7_位置決め起動指令(まとめ)
LD M5103                 ; RB7_位置決め起動指令(まとめ)
AND M5102                ; RB7_位置決め条件
OR M5104                 ; RB7_位置決め起動指令
AND M50                  ; 運転準備
ANB M5108                ; RB7_位置決め動作完了
AND X344D                ; L3st(RB6)非常停止_*EMGS
AND X344E                ; L3st(RB6)ｱﾗｰﾑ_*ALM
OUT M5104                ; RB7_位置決め起動指令
LD M5104                 ; RB7_位置決め起動指令
@MOV D4540 D4542         ; RB7_指令Pos  RB7_ｺﾝﾄﾛｰﾗｰ指令POS
TMH K850 K5              ; RB7ﾃﾞｰﾀ転送ﾃﾞｨﾚｲ
LD T850                  ; RB7ﾃﾞｰﾀ転送ﾃﾞｨﾚｲ
OR M5105                 ; RB7_位置決めｽﾀｰﾄ指令
AND M5104                ; RB7_位置決め起動指令
ANB T851                 ; RB7位置決め再ｽﾀｰﾄ指令
OUT M5105                ; RB7_位置決めｽﾀｰﾄ指令
LD M5105                 ; RB7_位置決めｽﾀｰﾄ指令
AND Y444D                ; L3st(RB7)ｽﾀｰﾄ_CSTR
ANB X344B                ; L3st(RB6)位置決め完了_PEND
OR M5106                 ; RB7_位置決め起動確認
AND M5105                ; RB7_位置決めｽﾀｰﾄ指令
OUT M5106                ; RB7_位置決め起動確認
LD M5106                 ; RB7_位置決め起動確認
ANB Y444D                ; L3st(RB7)ｽﾀｰﾄ_CSTR
AND X344B                ; L3st(RB6)位置決め完了_PEND
AND= D4542 D4544         ; RB7_ｺﾝﾄﾛｰﾗｰ指令POS  RB7_完了Pos
OR M5107                 ; RB7_位置決め完了
AND M5105                ; RB7_位置決めｽﾀｰﾄ指令
OUT M5107                ; RB7_位置決め完了
LD M5106                 ; RB7_位置決め起動確認
ANB Y444D                ; L3st(RB7)ｽﾀｰﾄ_CSTR
AND X344B                ; L3st(RB6)位置決め完了_PEND
AND<> D4542 D4544        ; RB7_ｺﾝﾄﾛｰﾗｰ指令POS  RB7_完了Pos
TMR K851 K30             ; RB7位置決め再ｽﾀｰﾄ指令
LD M5107                 ; RB7_位置決め完了
ANPB M7607               ; U13-S107_HiSTへ移動中
OUT M5108                ; RB7_位置決め動作完了
;<h1/>□_出力回路
;ソレノイドバルブ出力
LDB L800                 ; Lo検査ST3_有効状態
ANB B0107                ; B107_264)LoST3 ﾋｰﾀｰ過昇異常
TMR K820 K1800           ; Lo検査ST3ﾋｰﾀｰｴｱｰ停止ﾃﾞｨﾚｲ
LDB T820                 ; Lo検査ST3ﾋｰﾀｰｴｱｰ停止ﾃﾞｨﾚｲ
OR CR2002                ; 常時ON
OUT Y210A                ; Lo検査ST3ﾋｰﾀｰｴｱｰ供給
LDB Y210A                ; Lo検査ST3ﾋｰﾀｰｴｱｰ供給
OUT Y210B                ; Lo検査ST3ﾋｰﾀｰｴｱｰ供給OFF
LD L800                  ; Lo検査ST3_有効状態
AND Y210A                ; Lo検査ST3ﾋｰﾀｰｴｱｰ供給
AND X03                  ; 圧空元圧正常
LD M126                  ; 低温検査安全扉正常
OR M41                   ; ﾕﾆｯﾄ_起動中
OR M37                   ; ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
ANL
OUT Y201A                ; LoST3 Heater ON
;ｸﾗﾝﾌﾟ/ｱﾝｸﾗﾝﾌﾟ
LD M5305                 ; LoST3ｸﾗﾝﾌﾟ開閉_閉_指令
AND M5304                ; LoST3ｸﾗﾝﾌﾟ開閉_閉_起動OK
OR M3456                 ; LoST3 ｸﾗﾝﾌﾟ指令(Lo給材)
OR M5004                 ; U8-1_S04_ｸﾗﾝﾌﾟ指令
LD Y2104                 ; LoST3ﾜｰｸ押さえ下降
ANB Y2105                ; LoST3ﾜｰｸ押さえ上昇
ORL
AND M50                  ; 運転準備
OUT Y2104                ; LoST3ﾜｰｸ押さえ下降
LD M5307                 ; LoST3ｸﾗﾝﾌﾟ開閉_開__指令
AND M5306                ; LoST3ｸﾗﾝﾌﾟ開閉_開_起動OK
OR M3466                 ; LoST3_ｱﾝｸﾗﾝﾌﾟ指令(Lo除材)
OR M5257                 ; OriStep7_ｸﾗﾝﾌﾟ上昇指令
LD Y2105                 ; LoST3ﾜｰｸ押さえ上昇
ANB Y2104                ; LoST3ﾜｰｸ押さえ下降
ORL
AND M50                  ; 運転準備
OUT Y2105                ; LoST3ﾜｰｸ押さえ上昇
;<h1/>____▼_検査ｽﾗｲﾀﾞ出力
LD CR2002                ; 常時ON
MPS
AND D4542.0
OUT Y4440                ; L3st(RB7)指令pos_PC1
MRD
AND D4542.1
OUT Y4441                ; L3st(RB7)指令pos_PC2
MRD
AND D4542.2
OUT Y4442                ; L3st(RB7)指令pos_PC4
MRD
AND D4542.3
OUT Y4443                ; L3st(RB7)指令pos_PC8
MRD
AND D4542.4
OUT Y4444                ; L3st(RB7)指令pos_PC16
MRD
AND D4542.5
OUT Y4445                ; L3st(RB7)指令pos_PC32
MRD
AND D4542.6
OUT Y4446                ; L3st(RB7)指令pos_PC64
MPP
AND D4542.7
OUT Y4447                ; L3st(RB7)指令pos_PC128
LD B116F                 ; ﾏﾆｭｱﾙﾓｰﾄﾞ切替SW(1：ﾏﾆｭｱﾙ)
OUT Y444A                ; L3st(RB7)運転ﾓｰﾄﾞ_RMOD
LD<> D50 K204            ; TpM-K_表示中ページNo.
AND<> D70 K204           ; TpM-K_表示中ページNo.
AND<> D90 K204           ; TpM-K_表示中ページNo.
AND<> D110 K204          ; TpM-K_表示中ページNo.
RES B116F                ; ﾏﾆｭｱﾙﾓｰﾄﾞ切替SW(1：ﾏﾆｭｱﾙ)
LD M5252                 ; OriStep2
ANB X344A                ; L3st(RB6)原点確定_HEND
OUT Y444B                ; L3st(RB7)原点復帰_HOME
LD M126                  ; 低温検査安全扉正常
OR M37                   ; ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
OUT Y444C                ; L3st(RB7)一時停止_*STP
LD M5105                 ; RB7_位置決めｽﾀｰﾄ指令
ANB M5106                ; RB7_位置決め起動確認
OUT Y444D                ; L3st(RB7)ｽﾀｰﾄ_CSTR
LD M16                   ; ﾘｾｯﾄPB
ANB X344E                ; L3st(RB6)ｱﾗｰﾑ_*ALM
OUT Y444E                ; L3st(RB7)ﾘｾｯﾄ_RES
LD T10                   ; 運転準備ﾃﾞｨﾚｲ
OR M5123                 ; RB7_ｺﾈｸﾀ挿入押込み完了位置
LD W03.8                 ; 電気特性検査ｽﾃｰｼﾞ状態#3
ANB M3                   ; OFFLINE_MODE
ORL
OUT Y444F                ; L3st(RB7)ｻｰﾎﾞON_SON
;■その他制御出力
LD M5161                 ; U8-3_S1Lo検査ｽﾀｰﾄ要求
OUT W0103.8              ; 電気特性検査開始要求#3
LD L800                  ; Lo検査ST3_有効状態
ANB M5409                ; LoST3_無効予約(自動運転)
OUT W0103.13             ; 電気特性検査ｽﾃｰｼﾞ有効/無効#3
LD M5404                 ; LoST3検査_有効確認要求
OUT W0107.2              ; Lo_ST3ﾁｪｯｶ-確認要求
LD L800                  ; Lo検査ST3_有効状態
LD M5413                 ; LoST3_温度範囲内到達
LDB M5413                ; LoST3_温度範囲内到達
AND T1                   ; 0.3Secｸﾛｯｸ
ORL
ANL
ANB M5409                ; LoST3_無効予約(自動運転)
LD M5409                 ; LoST3_無効予約(自動運転)
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
ORL
OUT Y2092                ; LoST3__有効/無効表示
OUT B166A                ; LoST2__有効/無効表示
;□□　　パネル表示　　□□
LD M5330                 ; RB7_ﾜｰｸ受取り位置移動指令
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR M5121                 ; RB7_ﾜｰｸ受取り位置(ID確認位置)
OUT B1660                ; Tp-PL
LD M5331                 ; RB7_ｺﾈｸﾀ挿入開始位置移動指令
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR M5122                 ; RB7_ｺﾈｸﾀ挿入開始位置
OUT B1661                ; Tp-PL
LD M5332                 ; RB7_ｺﾈｸﾀ挿入押込み完了位置移動指
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR M5123                 ; RB7_ｺﾈｸﾀ挿入押込み完了位置
OUT B1662                ; Tp-PL
LD M5333                 ; RB7_ｺﾈｸﾀ抜き位置移動指令
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR M5124                 ; RB7_ｺﾈｸﾀ抜き位置
OUT B1663                ; Tp-PL
LD Y2104                 ; LoST3ﾜｰｸ押さえ下降
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR X1080                 ; LoST3_部_ﾜｰｸ押_下降端
OUT B1664                ; UNIT8-1-5 TP-PL
LD Y2105                 ; LoST3ﾜｰｸ押さえ上昇
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR X1081                 ; LoST3_部_ﾜｰｸ押_上昇端
OUT B1665                ; UNIT8-1-6 TP-PL
LD M5312                 ; LoST3SwBoxMode_ﾊﾟﾚｯﾄ前後Flag
OUT B1666                ; SwBoxMode_ﾊﾟﾚｯﾄFlag_ONPL
LD M5313                 ; LoST3SwBoxMode_ｸﾗﾝﾌﾟ&ﾊﾟﾚｯﾄFlag
OUT B1667                ; SWBox_ｸﾗﾝﾌﾟ&ﾊﾟﾚｯﾄﾓｰﾄﾞONPL
;<h1/>□_異常検出
;□□    異常検出    □□
;B120(K289)--B12F(K304)  B130(K305)--B13F(K320)
LDB X340E                ; L1st(RB5)ｱﾗｰﾑ_*ALM
AND T12                  ; 運転準備ONﾃﾞｨﾚｲ(3S)
LD CR2003                ; 常時OFF
ANB B0600                ; B100_257)Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0100                ; B100_257)LoST3ｽﾃｰｼﾞ前後RB異常
ORL
OUT B0100                ; B100_257)LoST3ｽﾃｰｼﾞ前後RB異常
LDP B0100                ; B100_257)LoST3ｽﾃｰｼﾞ前後RB異常
AND< D900 K64            ; FIFO_DATA_VALUE
MOV H0101 D0             ; エラーコード
FIFOW D0 D900            ; エラーコード  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0600                 ; B100_257)Bz停止
AND B0100                ; B100_257)LoST3ｽﾃｰｼﾞ前後RB異常
OUT B0600                ; B100_257)Bz停止
;　　
LD Y2104                 ; LoST3ﾜｰｸ押さえ下降
ANB X1080                ; LoST3_部_ﾜｰｸ押_下降端
LD Y2105                 ; LoST3ﾜｰｸ押さえ上昇
ANB X1081                ; LoST3_部_ﾜｰｸ押_上昇端
ORL
LD X1080                 ; LoST3_部_ﾜｰｸ押_下降端
AND X1081                ; LoST3_部_ﾜｰｸ押_上昇端
ORL
LD CR2003                ; 常時OFF
ANB B0601                ; B101_258)Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0101                ; B101_258)LoST3ｸﾗﾝﾌﾟ開閉CLS異常
ORL
MPS
AND T891                 ; CLSﾀｲﾑｱｳﾄ
OUT B0101                ; B101_258)LoST3ｸﾗﾝﾌﾟ開閉CLS異常
MPP
TMR K891 K100            ; CLSﾀｲﾑｱｳﾄ
LDP B0101                ; B101_258)LoST3ｸﾗﾝﾌﾟ開閉CLS異常
AND< D900 K64            ; FIFO_DATA_VALUE
MOV H0102 D0             ; エラーコード
FIFOW D0 D900            ; エラーコード  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0601                 ; B101_258)Bz停止
AND B0101                ; B101_258)LoST3ｸﾗﾝﾌﾟ開閉CLS異常
OUT B0601                ; B101_258)Bz停止
;
LD T806                  ; LoST3_ｺﾝﾀｸﾄﾍｯﾄﾞID_更新_DLY
AND L800                 ; Lo検査ST3_有効状態
AND<> D4600 D4606        ; LoST3_ｺﾝﾀｸﾄﾍｯﾄﾞID  LoST3_ｺﾝﾀｸﾄﾍｯﾄﾞID_Copy
LD CR2003                ; 常時OFF
ANB B0602                ; B102_259)Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0102                ; B102_259)LoST3_ﾃｽﾄﾍｯﾄﾞID_不一致
ORL
MPS
AND T892                 ; ﾃｽﾄﾍｯﾄﾞID変化確認ﾀｲﾏ
OUT B0102                ; B102_259)LoST3_ﾃｽﾄﾍｯﾄﾞID_不一致
MPP
TMR K892 K5              ; ﾃｽﾄﾍｯﾄﾞID変化確認ﾀｲﾏ
LDP B0102                ; B102_259)LoST3_ﾃｽﾄﾍｯﾄﾞID_不一致
AND< D900 K64            ; FIFO_DATA_VALUE
MOV H0103 D0             ; エラーコード
FIFOW D0 D900            ; エラーコード  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0602                 ; B102_259)Bz停止
AND B0102                ; B102_259)LoST3_ﾃｽﾄﾍｯﾄﾞID_不一致
OUT B0602                ; B102_259)Bz停止
;
LD T807                  ; LoST3_ﾊﾟﾚｯﾄID_更新_DLY
AND L800                 ; Lo検査ST3_有効状態
AND<> D4601 D4607        ; LoST3_ﾊﾟﾚｯﾄID  LoST3_ﾊﾟﾚｯﾄID_ｾﾝｻ状態
AND M5121                ; RB7_ﾜｰｸ受取り位置(ID確認位置)
LD CR2003                ; 常時OFF
ANB B0603                ; B103_260)Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0103                ; B103_260)LoST3_ﾊﾟﾚｯﾄID_不一致
ORL
MPS
AND T893                 ; ﾊﾟﾚｯﾄID変化確認ﾀｲﾏ
OUT B0103                ; B103_260)LoST3_ﾊﾟﾚｯﾄID_不一致
MPP
TMR K893 K5              ; ﾊﾟﾚｯﾄID変化確認ﾀｲﾏ
LDP B0103                ; B103_260)LoST3_ﾊﾟﾚｯﾄID_不一致
AND< D900 K64            ; FIFO_DATA_VALUE
MOV H0104 D0             ; エラーコード
FIFOW D0 D900            ; エラーコード  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0603                 ; B103_260)Bz停止
AND B0103                ; B103_260)LoST3_ﾊﾟﾚｯﾄID_不一致
OUT B0603                ; B103_260)Bz停止
;
LD M5060                 ; U8-1_S60 LoST3_ﾜｰｸ受取異常
LD CR2003                ; 常時OFF
ANB B0604                ; B104_261)Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0104                ; B104_261)LoST3_ﾜｰｸ受取異常
ORL
OUT B0104                ; B104_261)LoST3_ﾜｰｸ受取異常
LDP B0104                ; B104_261)LoST3_ﾜｰｸ受取異常
AND< D900 K64            ; FIFO_DATA_VALUE
MOV H0105 D0             ; エラーコード
FIFOW D0 D900            ; エラーコード  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0604                 ; B104_261)Bz停止
AND B0104                ; B104_261)LoST3_ﾜｰｸ受取異常
OUT B0604                ; B104_261)Bz停止
;
LD M5430                 ; LoST3_ﾜｰｸ受渡し異常
LD CR2003                ; 常時OFF
ANB B0605                ; B105_262)Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0105                ; B105_262)LoST3_ﾜｰｸ受渡し異常
ORL
OUT B0105                ; B105_262)LoST3_ﾜｰｸ受渡し異常
LDP B0105                ; B105_262)LoST3_ﾜｰｸ受渡し異常
AND< D900 K64            ; FIFO_DATA_VALUE
MOV H0106 D0             ; エラーコード
FIFOW D0 D900            ; エラーコード  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0605                 ; B105_262)Bz停止
AND B0105                ; B105_262)LoST3_ﾜｰｸ受渡し異常
OUT B0605                ; B105_262)Bz停止
;
LD D4701.0
ANB X1082                ; LoST3_部_ﾜｰｸ確認(ON=有)
LDB D4701.0
AND X1082                ; LoST3_部_ﾜｰｸ確認(ON=有)
ORL
ANB M3403                ; 【搬送】搬送→Lo_ST3搬送開始
ANB M3407                ; 【搬送】搬送→Lo_ST3搬送完了
ANB M3413                ; 【搬送】LoST3除材開始
ANB M3417                ; 【搬送】LoST3除材完了
ANB M5053                ; U8-1_S53_
ANB M5054                ; U8-1_S54_
AND L800                 ; Lo検査ST3_有効状態
AND M71                  ; 自動運転開始BZ
LD CR2003                ; 常時OFF
ANB B0606                ; B106_263)Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0106                ; B106_263)LoST3 ﾜｰｸ情報不一致
ORL
ANB M35                  ; 空運転ﾓｰﾄﾞ
OUT B0106                ; B106_263)LoST3 ﾜｰｸ情報不一致
LDP B0106                ; B106_263)LoST3 ﾜｰｸ情報不一致
AND< D900 K64            ; FIFO_DATA_VALUE
MOV H0107 D0             ; エラーコード
FIFOW D0 D900            ; エラーコード  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0606                 ; B106_263)Bz停止
AND B0106                ; B106_263)LoST3 ﾜｰｸ情報不一致
OUT B0606                ; B106_263)Bz停止
;　　
LD<= D4530 D21120        ; Lo_ST3_過昇設定値TP
LD CR2003                ; 常時OFF
ANB B05E7                ; B0E7_232)LoST1 ﾋｰﾀｰ過昇異Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0107                ; B107_264)LoST3 ﾋｰﾀｰ過昇異常
ORL
AND CR2003               ; 常時OFF
OUT B0107                ; B107_264)LoST3 ﾋｰﾀｰ過昇異常
MOV H0108 D0             ; エラーコード
FIFOW D0 D900            ; エラーコード  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0607                 ; B107_264)Bz停止
AND B0107                ; B107_264)LoST3 ﾋｰﾀｰ過昇異常
OUT B0607                ; B107_264)Bz停止
LD T840                  ; LoST3_初期温度上昇ﾀｲﾑｱｳﾄ監視
ANB M35                  ; 空運転ﾓｰﾄﾞ
LD CR2003                ; 常時OFF
ANB B0608                ; B108_265)Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0108                ; B108_265)LoST3 ﾋｰﾀｰ上昇ﾀｲﾑｱｳﾄ異
ORL
OUT B0108                ; B108_265)LoST3 ﾋｰﾀｰ上昇ﾀｲﾑｱｳﾄ異
MOV H0109 D0             ; エラーコード
FIFOW D0 D900            ; エラーコード  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0608                 ; B108_265)Bz停止
AND B0108                ; B108_265)LoST3 ﾋｰﾀｰ上昇ﾀｲﾑｱｳﾄ異
OUT B0608                ; B108_265)Bz停止
;　　
LD M5259                 ; OriStep9_ORGﾜｰｸ除去要求
LD CR2003                ; 常時OFF
ANB B061E                ; B11E_287)Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B011E                ; B11E_287)LoST3ﾜｰｸ除去要求
ORL
OUT B011E                ; B11E_287)LoST3ﾜｰｸ除去要求
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B061E                 ; B11E_287)Bz停止
AND B011E                ; B11E_287)LoST3ﾜｰｸ除去要求
OUT B061E                ; B11E_287)Bz停止
;電特検査中
LD W03.8                 ; 電気特性検査ｽﾃｰｼﾞ状態#3
AND M31                  ; 手動ﾓｰﾄﾞ
AND M5251                ; OriStep1
LD CR2003                ; 常時OFF
ANB B061F                ; B11F_288)Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B011F                ; B11F_288)LoST3ﾜｰｸ検査中
ORL
OUT B011F                ; B11F_288)LoST3ﾜｰｸ検査中
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B061F                 ; B11F_288)Bz停止
AND B011F                ; B11F_288)LoST3ﾜｰｸ検査中
OUT B061F                ; B11F_288)Bz停止
;異常ﾌﾞｻﾞｰまとめ
LDB B0100                ; B100_257)LoST3ｽﾃｰｼﾞ前後RB異常
OR B0600                 ; B100_257)Bz停止
LDB B0101                ; B101_258)LoST3ｸﾗﾝﾌﾟ開閉CLS異常
OR B0601                 ; B101_258)Bz停止
ANL
LDB B0102                ; B102_259)LoST3_ﾃｽﾄﾍｯﾄﾞID_不一致
OR B0602                 ; B102_259)Bz停止
ANL
LDB B0103                ; B103_260)LoST3_ﾊﾟﾚｯﾄID_不一致
OR B0603                 ; B103_260)Bz停止
ANL
LDB B0104                ; B104_261)LoST3_ﾜｰｸ受取異常
OR B0604                 ; B104_261)Bz停止
ANL
LDB B0105                ; B105_262)LoST3_ﾜｰｸ受渡し異常
OR B0605                 ; B105_262)Bz停止
ANL
LDB B0106                ; B106_263)LoST3 ﾜｰｸ情報不一致
OR B0606                 ; B106_263)Bz停止
ANL
LDB B0107                ; B107_264)LoST3 ﾋｰﾀｰ過昇異常
OR B0607                 ; B107_264)Bz停止
ANL
LDB B0108                ; B108_265)LoST3 ﾋｰﾀｰ上昇ﾀｲﾑｱｳﾄ異
OR B0608                 ; B108_265)Bz停止
ANL
LDB B0109                ; B109_266)
OR B0609                 ; B109_266)Bz停止
ANL
LDB B010A                ; B10A_267)
OR B060A                 ; B10A_267)Bz停止
ANL
LDB B010B                ; B10B_268)
OR B060B                 ; B10B_268)Bz停止
ANL
LDB B010C                ; B10C_269)
OR B060C                 ; B10C_269)Bz停止
ANL
LDB B010D                ; B10D_270)
OR B060D                 ; B10D_270)Bz停止
ANL
LDB B010E                ; B10E_271)
OR B060E                 ; B10E_271)Bz停止
ANL
LDB B010F                ; B10F_272)
OR B060F                 ; B10F_272)Bz停止
ANL
LDB B0110                ; B110_273)
OR B0610                 ; B110_273)Bz停止
ANL
LDB B0111                ; B111_274)
OR B0611                 ; B111_274)Bz停止
ANL
LDB B0112                ; B112_275)
OR B0612                 ; B112_275)Bz停止
ANL
LDB B0113                ; B113_276)
OR B0613                 ; B113_276)Bz停止
ANL
LDB B0114                ; B114_277)
OR B0614                 ; B114_277)Bz停止
ANL
LDB B0115                ; B115_278)
OR B0615                 ; B115_278)Bz停止
ANL
LDB B0116                ; B116_279)
OR B0616                 ; B116_279)Bz停止
ANL
LDB B0117                ; B117_280)
OR B0617                 ; B117_280)Bz停止
ANL
LDB B0118                ; B118_281)
OR B0618                 ; B118_281)Bz停止
ANL
LDB B0119                ; B119_282)
OR B0619                 ; B119_282)Bz停止
ANL
LDB B011A                ; B11A_283)
OR B061A                 ; B11A_283)Bz停止
ANL
LDB B011B                ; B11B_284)
OR B061B                 ; B11B_284)Bz停止
ANL
LDB B011C                ; B11C_285)
OR B061C                 ; B11C_285)Bz停止
ANL
LDB B011D                ; B11D_286)
OR B061D                 ; B11D_286)Bz停止
ANL
LDB B011E                ; B11E_287)LoST3ﾜｰｸ除去要求
OR B061E                 ; B11E_287)Bz停止
ANL
LDB B011F                ; B11F_288)LoST3ﾜｰｸ検査中
OR B061F                 ; B11F_288)Bz停止
ANL
LDB B011E                ; B11E_287)LoST3ﾜｰｸ除去要求
OR B061E                 ; B11E_287)Bz停止
ANL
LDB B011F                ; B11F_288)LoST3ﾜｰｸ検査中
OR B061F                 ; B11F_288)Bz停止
ANL
INV
OUT M5489                ; U8_異常BZ補助
END
ENDH
