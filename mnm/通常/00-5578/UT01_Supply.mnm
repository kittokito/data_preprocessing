DEVICE:53
;MODULE:UT01_Supply
;MODULE_TYPE:0
;<h1/>/ 入力受け
;□□    入力受け    □□
LD X1021                 ; ﾜｰｸ投入側ﾜｰｸ確認(ON=有)
TMR K111 K3              ; 給材部ﾜｰｸ有確認(ON=有)
LDB X1021                ; ﾜｰｸ投入側ﾜｰｸ確認(ON=有)
TMR K112 K3              ; 給材部ﾜｰｸ無確認(ON=無)
LD X1023                 ; 給材ﾃｰﾌﾞﾙﾜｰｸ浮き確認1
TMH K113 K10             ; 給材ﾜｰｸ浮き確認1(ON=OK)
LD X1024                 ; 給材ﾃｰﾌﾞﾙﾜｰｸ浮き確認2
TMH K114 K10             ; 給材ﾜｰｸ浮き確認2(ON=OK)
LD X1022                 ; 給材ﾃｰﾌﾞﾙ受渡位置ﾜｰｸ確認(ON=有)
TMH K115 K10             ; ﾜｰｸ受渡し部ﾜｰｸ有確認(ON=有)
LDB X1022                ; 給材ﾃｰﾌﾞﾙ受渡位置ﾜｰｸ確認(ON=有)
TMH K116 K10             ; ﾜｰｸ受渡し部ﾜｰｸ無確認(ON=無)
LDB X1022                ; 給材ﾃｰﾌﾞﾙ受渡位置ﾜｰｸ確認(ON=有)
TMR K118 K3              ; 給材ｽﾗｲﾀﾞ上ﾜｰｸ無確認
LD X102E                 ; 投入ﾗｲﾄｶｰﾃﾝ1_OUT1
AND X102F                ; 投入ﾗｲﾄｶｰﾃﾝ1_OUT2
TMR K126 K5              ; 投入部ﾗｲﾄｶｰﾃﾝ_確認
LDB X102E                ; 投入ﾗｲﾄｶｰﾃﾝ1_OUT1
ANB X102F                ; 投入ﾗｲﾄｶｰﾃﾝ1_OUT2
TMR K127 K5              ; 投入部ﾗｲﾄｶｰﾃﾝ_遮光_確認
;□ ｾｯﾄ治具ID
LD CR2002                ; 常時ON
MPS
AND X1025                ; 給材ﾃｰﾌﾞﾙ治具ID-1
OUT D1052.0
MRD
AND X1026                ; 給材ﾃｰﾌﾞﾙ治具ID-2
OUT D1052.1
MPP
AND X1027                ; 給材ﾃｰﾌﾞﾙ治具ID-3
OUT D1052.2
LD<> D1050 D1052         ; 投入ﾊﾟﾚｯﾄID  投入ﾊﾟﾚｯﾄID_Copy
AND M1471                ; RB1_ﾜｰｸ投入位置(待機位置)
MPS
TMR K106 K5              ; 投入ﾊﾟﾚｯﾄID_変更有り
MPP
AND T106                 ; 投入ﾊﾟﾚｯﾄID_変更有り
MOV D1052 D1050          ; 投入ﾊﾟﾚｯﾄID_Copy  投入ﾊﾟﾚｯﾄID
;投入ｼｬﾄﾙ現在値
LD X320A                 ; ｼｬﾄﾙ(RB1)原点確定_HEND
AND X320B                ; ｼｬﾄﾙ(RB1)位置決め完了_PEND
MPS
AND X3200                ; ｼｬﾄﾙ(RB1)完了Pos_PM1
OUT D1028.0              ; 投入ｼｬﾄﾙ_RB_完了POS1
MRD
AND X3201                ; ｼｬﾄﾙ(RB1)完了Pos_PM2
OUT D1028.1              ; 投入ｼｬﾄﾙ_RB_完了POS2
MRD
AND X3202                ; ｼｬﾄﾙ(RB1)完了Pos_PM4
OUT D1028.2              ; 投入ｼｬﾄﾙ_RB_完了POS4
MRD
AND X3203                ; ｼｬﾄﾙ(RB1)完了Pos_PM8
OUT D1028.3              ; 投入ｼｬﾄﾙ_RB_完了POS8
MRD
AND X3204                ; ｼｬﾄﾙ(RB1)完了Pos_PM16
OUT D1028.4              ; 投入ｼｬﾄﾙ_RB_完了POS16
MRD
AND X3205                ; ｼｬﾄﾙ(RB1)完了Pos_PM32
OUT D1028.5              ; 投入ｼｬﾄﾙ_RB_完了POS32
MRD
AND X3206                ; ｼｬﾄﾙ(RB1)完了Pos_PM64
OUT D1028.6              ; 投入ｼｬﾄﾙ_RB_完了POS64
MRD
AND X3207                ; ｼｬﾄﾙ(RB1)完了Pos_PM128
OUT D1028.7              ; 投入ｼｬﾄﾙ_RB_完了POS128
MPP
INV
MOV K0 D1028             ; 投入ｼｬﾄﾙ_RB_完了POS
LD= D1028 K1             ; 投入ｼｬﾄﾙ_RB_完了POS
OUT M1471                ; RB1_ﾜｰｸ投入位置(待機位置)
LD= D1028 K2             ; 投入ｼｬﾄﾙ_RB_完了POS
OUT M1472                ; RB1_BCR読取位置
LD= D1028 K3             ; 投入ｼｬﾄﾙ_RB_完了POS
OUT M1473                ; RB1_ﾜｰｸ受渡し位置
;<h1/>/ 装置状態･条件
;ﾕﾆｯﾄ原点
LDB X1022                ; 給材ﾃｰﾌﾞﾙ受渡位置ﾜｰｸ確認(ON=有)
LDB X1021                ; ﾜｰｸ投入側ﾜｰｸ確認(ON=有)
OR M71                   ; 自動運転開始BZ
ANL
LD M1471                 ; RB1_ﾜｰｸ投入位置(待機位置)
LDB M1484                ; U1_原点復帰中
ANB M1485                ; U1_起動中
ORL
ANL
OUT M1480                ; U1_原点
;非常停止
LDB B020                 ; B020_033)RBC1 ｺﾝﾄﾛｰﾗｰ異常
ANB B022                 ; B022_035)投入部ﾜｰｸ受渡異常
INV
OUT M1481                ; U1_即停止異常
;起動条件
LD M1480                 ; U1_原点
ANB M36                  ; 払出処理
OUT M1482                ; U1_起動条件
;起動OFF
LDB M50                  ; 運転準備
LD M60                   ; ｴﾗｰ発生
OR M56                   ; 自動起動停止指令(ｻｲｸﾙ停止)
AND M1484                ; U1_原点復帰中
ORL
OR M1486                 ; U1_CYCLE停止異常
OR T15                   ; 強制停止
OUT M1483                ; U1_起動OFF
;原点復帰
LD M82                   ; 原点復帰開始
LDB M82                  ; 原点復帰開始
ANP B1099                ; UNIT1-2-10 TP-PB
ORL
ANB M1484                ; U1_原点復帰中
OR M1484                 ; U1_原点復帰中
ANB M1483                ; U1_起動OFF
ANB M1491                ; U1_ERR発生
ANB M1299                ; ﾕﾆｯﾄ1原点復帰完了確認
MPS
OUT M1484                ; U1_原点復帰中
MPP
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OUT B1599                ; UNIT1-2-10 TP-PL
;起動中
LD M73                   ; 各工程起動指令
AND M1482                ; U1_起動条件
ANB B101D                ; 途中投入選択TP(1:単独_0:連動)
OR M1485                 ; U1_起動中
ANB M1483                ; U1_起動OFF
ANB M1049                ; ﾕﾆｯﾄ1-1ｻｲｸﾙ終了
OUT M1485                ; U1_起動中
;ｻｲｸﾙ停止異常
LDB CR2003               ; 常時OFF
INV
OUT M1486                ; U1_CYCLE停止異常
;払出停止異常
LDB M1032                ; ID_NG払出ｻｲｸﾙ停止
ANB CR2003               ; 常時OFF
INV
OUT M1487                ; U1_払出停止異常
;警報補助
LDB B021                 ; B021_034)投入部JIG_ID異常
OR B0521                 ; B021_34)Bz停止
LDB B023                 ; B023_036)投入部ﾜｰｸ有除去要求
OR B0523                 ; B023_36)Bz停止
ANL
LDB B024                 ; B024_037)投入部ﾜｰｸ浮き異常
OR B0524                 ; B024_37)Bz停止
ANL
ANB M1023                ; 投入不可ﾌﾚｰﾑ取出要求(BZ､PL)
ANB M1025                ; ﾌﾚｰﾑ取出選択(BZ､PL)
ANB M1030                ; ｻｲｸﾙ停止ﾌﾚｰﾑ取出要求ON(BZ､PL)
INV
OUT M1488                ; U1_警報補助
;機器準備確認
LD CR2002                ; 常時ON
OUT M1490                ; U1_機器準備完了
;ｴﾗｰ発生  一時停止
LDB CR2003               ; 常時OFF
INV
OUT M1491                ; U1_ERR発生
;動作中ﾕﾆｯﾄ無し
LD CR2002                ; 常時ON
ORB M1485                ; U1_起動中
ANB M1484                ; U1_原点復帰中
TMR K101 K20             ; ﾕﾆｯﾄ1-1動作無し判定ﾀｲﾏ
LD CR2002                ; 常時ON
MOV D1000 D1005          ; U1_自動運転ｽﾃｯﾌﾟ  U1_動作中判定
LD T101                  ; ﾕﾆｯﾄ1-1動作無し判定ﾀｲﾏ
OUT M1492                ; U1_動作無し確認
;払出しﾜｰｸ無し
LD= D1100 K0             ; 投入ｼｬﾄﾙ_ﾊﾟﾚｯﾄID
AND= D1101 K0            ; 投入ｼｬﾄﾙ_投入部ﾛﾎﾞｯﾄNo.
ANB X1021                ; ﾜｰｸ投入側ﾜｰｸ確認(ON=有)
ANB X1022                ; 給材ﾃｰﾌﾞﾙ受渡位置ﾜｰｸ確認(ON=有)
AND M1471                ; RB1_ﾜｰｸ投入位置(待機位置)
TMR K105 K10             ; UNIT1払出処理ﾜｰｸ無
LD T105                  ; UNIT1払出処理ﾜｰｸ無
OUT M1493                ; U1_WORK無し
;ｽﾃｯﾌﾟ起動
LD M30                   ; 自動ﾓｰﾄﾞ
OR M31                   ; 手動ﾓｰﾄﾞ
AND M124                 ; 投入ｴﾘｱｾﾝｻ正常
AND M125                 ; 投入ｼｬﾄﾙｶﾊﾞｰ正常
AND M126                 ; 低温検査安全扉正常
ANB M60                  ; ｴﾗｰ発生
ANB M140                 ; 全一時停止
ANB M160                 ; 低温検査一時停止
OUT M1479                ; U1_STEP動作
;<h1/>■自動
;/ ﾌﾚｰﾑ供給
LD CR2002                ; 常時ON
ZRES M1000 M1049         ; 投入部ｽﾃｯﾌﾟ開始  ﾕﾆｯﾄ1-1ｻｲｸﾙ終了
LDB M1485                ; U1_起動中
MOV K0 D1000             ; U1_自動運転ｽﾃｯﾌﾟ
LD M1485                 ; U1_起動中
MOV D1000 Z1             ; U1_自動運転ｽﾃｯﾌﾟ
OUT M1000:Z1             ; 投入部ｽﾃｯﾌﾟ開始
LD M1000                 ; 投入部ｽﾃｯﾌﾟ開始
AND M1479                ; U1_STEP動作
LD B3010                 ; Leak_Final_自動運転中
LDB B3010                ; Leak_Final_自動運転中
ANP B1060                ; 自動運転 Leak_Final未起動sw
ORL
OR M1065                 ; 起動時確認完了ﾌﾗｸﾞ
ANL
@INC D1000               ; U1_自動運転ｽﾃｯﾌﾟ
LD M1000                 ; 投入部ｽﾃｯﾌﾟ開始
ANB B3010                ; Leak_Final_自動運転中
ANB M1065                ; 起動時確認完了ﾌﾗｸﾞ
AND= D200 K0             ; ｴﾗｰｺｰﾄﾞNo.
OR M1064                 ; 下流装置未起動表示
ANPB B1060               ; 自動運転 Leak_Final未起動sw
DW K101 D200             ; ｴﾗｰｺｰﾄﾞNo.
CON
OUT M1064                ; 下流装置未起動表示
LD M1000                 ; 投入部ｽﾃｯﾌﾟ開始
ANP B1060                ; 自動運転 Leak_Final未起動sw
OR M1065                 ; 起動時確認完了ﾌﾗｸﾞ
LD M71                   ; 自動運転開始BZ
OR M1485                 ; U1_起動中
ANL
OUT M1065                ; 起動時確認完了ﾌﾗｸﾞ
MEP
DW K0 D200               ; ｴﾗｰｺｰﾄﾞNo.
LD M1000                 ; 投入部ｽﾃｯﾌﾟ開始
ANB B3010                ; Leak_Final_自動運転中
ANB M1065                ; 起動時確認完了ﾌﾗｸﾞ
OUT B150F
;ﾌﾚｰﾑ供給確認
;Frame supply check
LD M1001                 ; 検査ﾜｰｸ投入待ち
AND M1479                ; U1_STEP動作
MPS
LD T127                  ; 投入部ﾗｲﾄｶｰﾃﾝ_遮光_確認
OR T111                  ; 給材部ﾜｰｸ有確認(ON=有)
AND T111                 ; 給材部ﾜｰｸ有確認(ON=有)
OR M35                   ; 空運転ﾓｰﾄﾞ
ANL
@INC D1000               ; U1_自動運転ｽﾃｯﾌﾟ
MPP
LDB T111                 ; 給材部ﾜｰｸ有確認(ON=有)
AND M36                  ; 払出処理
ANL
MOV K49 D1000            ; U1_自動運転ｽﾃｯﾌﾟ
LD M1002                 ; 検査ﾜｰｸ投入中
AND M1479                ; U1_STEP動作
AND T126                 ; 投入部ﾗｲﾄｶｰﾃﾝ_確認
MPS
LD T111                  ; 給材部ﾜｰｸ有確認(ON=有)
OR M35                   ; 空運転ﾓｰﾄﾞ
ANL
MPS
TMR K130 K5              ; ﾜｰｸ投入確認ﾃﾞｨﾚｲ
MPP
AND T130                 ; ﾜｰｸ投入確認ﾃﾞｨﾚｲ
@INC D1000               ; U1_自動運転ｽﾃｯﾌﾟ
MPP
LD T112                  ; 給材部ﾜｰｸ無確認(ON=無)
ANB M35                  ; 空運転ﾓｰﾄﾞ
ANL
MOV K0 D1000             ; U1_自動運転ｽﾃｯﾌﾟ
LD M1003                 ; U1-S3
AND M1479                ; U1_STEP動作
@INC D1000               ; U1_自動運転ｽﾃｯﾌﾟ
LD M1004                 ; U1-S4
AND M1479                ; U1_STEP動作
@INC D1000               ; U1_自動運転ｽﾃｯﾌﾟ
;	ﾜｰｸ投入OK & JIG_IDﾁｪｯｸ
LD M1005                 ; 治具IDﾁｪｯｸ
AND M1479                ; U1_STEP動作
AND T126                 ; 投入部ﾗｲﾄｶｰﾃﾝ_確認
MPS
LD<> D1050 K0            ; 投入ﾊﾟﾚｯﾄID
ANB B021                 ; B021_034)投入部JIG_ID異常
ANL
@INC D1000               ; U1_自動運転ｽﾃｯﾌﾟ
MPP
LD= D1050 K0             ; 投入ﾊﾟﾚｯﾄID
AND B021                 ; B021_034)投入部JIG_ID異常
ANL
MOV K1 D1000             ; U1_自動運転ｽﾃｯﾌﾟ
LD M1006                 ; 有効槽ﾁｪｯｸ
AND M1479                ; U1_STEP動作
@INC D1000               ; U1_自動運転ｽﾃｯﾌﾟ
;ｽｷｬﾅ読取位置移動&ﾜｰｸ情報ｾｯﾄ
LD M1007                 ; U1-S7
AND M1479                ; U1_STEP動作
AND T126                 ; 投入部ﾗｲﾄｶｰﾃﾝ_確認
AND X320B                ; ｼｬﾄﾙ(RB1)位置決め完了_PEND
MPS
MOV K2 D1024             ; 投入ｼｬﾄﾙ_RB_POS_確定
MPP
AND= D1024 K2            ; 投入ｼｬﾄﾙ_RB_POS_確定
INC D1000                ; U1_自動運転ｽﾃｯﾌﾟ
LD M1008                 ; ｼｬﾄﾙ読取位置移動
ANB X320B                ; ｼｬﾄﾙ(RB1)位置決め完了_PEND
INC D1000                ; U1_自動運転ｽﾃｯﾌﾟ
LD M1009                 ; 位置決め完了OFF確認
AND M1479                ; U1_STEP動作
AND X320B                ; ｼｬﾄﾙ(RB1)位置決め完了_PEND
AND T126                 ; 投入部ﾗｲﾄｶｰﾃﾝ_確認
AND Y420C                ; ｼｬﾄﾙ(RB1)一時停止_*STP
MPS
AND M1472                ; RB1_BCR読取位置
INC D1000                ; U1_自動運転ｽﾃｯﾌﾟ
MPP
ANB M1472                ; RB1_BCR読取位置
MOV K7 D1000             ; U1_自動運転ｽﾃｯﾌﾟ
;<h1/>/ S10_ﾜｰｸ浮きﾁｪｯｸ
LD M1010                 ; ﾜｰｸ浮き確認
MPS
TMR K131 K20             ; ﾜｰｸ浮き確認ﾃﾞｨﾚｲ
MPP
LD M1479                 ; U1_STEP動作
AND T126                 ; 投入部ﾗｲﾄｶｰﾃﾝ_確認
ANL
MPS
LD T113                  ; 給材ﾜｰｸ浮き確認1(ON=OK)
AND T114                 ; 給材ﾜｰｸ浮き確認2(ON=OK)
OR M35                   ; 空運転ﾓｰﾄﾞ
ANL
MOV K19 D1000            ; U1_自動運転ｽﾃｯﾌﾟ
MPP
LDB T113                 ; 給材ﾜｰｸ浮き確認1(ON=OK)
ORB T114                 ; 給材ﾜｰｸ浮き確認2(ON=OK)
ANB M35                  ; 空運転ﾓｰﾄﾞ
ANL
@INC D1000               ; U1_自動運転ｽﾃｯﾌﾟ
;  ﾜｰｸ浮きNG
LD M1011                 ; U1-S7
AND M1479                ; U1_STEP動作
AND T126                 ; 投入部ﾗｲﾄｶｰﾃﾝ_確認
AND X320B                ; ｼｬﾄﾙ(RB1)位置決め完了_PEND
MPS
MOV K1 D1024             ; 投入ｼｬﾄﾙ_RB_POS_確定
MPP
AND= D1024 K1            ; 投入ｼｬﾄﾙ_RB_POS_確定
INC D1000                ; U1_自動運転ｽﾃｯﾌﾟ
LD M1012                 ; ｼｬﾄﾙ供給位置移動
AND M1479                ; U1_STEP動作
ANB X320B                ; ｼｬﾄﾙ(RB1)位置決め完了_PEND
INC D1000                ; U1_自動運転ｽﾃｯﾌﾟ
LD M1013                 ; 位置決め完了OFF確認
AND M1479                ; U1_STEP動作
AND X320B                ; ｼｬﾄﾙ(RB1)位置決め完了_PEND
AND T126                 ; 投入部ﾗｲﾄｶｰﾃﾝ_確認
AND Y420C                ; ｼｬﾄﾙ(RB1)一時停止_*STP
MPS
AND M1471                ; RB1_ﾜｰｸ投入位置(待機位置)
INC D1000                ; U1_自動運転ｽﾃｯﾌﾟ
MPP
ANB M1471                ; RB1_ﾜｰｸ投入位置(待機位置)
MOV K11 D1000            ; U1_自動運転ｽﾃｯﾌﾟ
LD M1014                 ; ﾜｰｸ浮きNG
ANPB M1014               ; ﾜｰｸ浮きNG
AND T127                 ; 投入部ﾗｲﾄｶｰﾃﾝ_遮光_確認
ANB B024                 ; B024_037)投入部ﾜｰｸ浮き異常
INC D1000                ; U1_自動運転ｽﾃｯﾌﾟ
LD M1015                 ; U1-S15
AND M1479                ; U1_STEP動作
AND T126                 ; 投入部ﾗｲﾄｶｰﾃﾝ_確認
MOV K49 D1000            ; U1_自動運転ｽﾃｯﾌﾟ
;<h1/>/ S19_ﾌﾚｰﾑｺｰﾄﾞ読取
;Frame code Read
LD M1019                 ; ｺｰﾄﾞ読込
AND M1479                ; U1_STEP動作
AND W0101.0              ; 投入部読込要求
LD W01.0                 ; 投入部読込完了
OR M3                    ; OFFLINE_MODE
ANL
MPS
LDB W01.1                ; 投入部投入不可
ANB W01.2                ; 製品IDｴﾗｰ､段取
ANL
BMOV W020 D1100 K2       ; 投入ﾊﾟﾚｯﾄID  投入ｼｬﾄﾙ_ﾊﾟﾚｯﾄID
MPS
AND M3                   ; OFFLINE_MODE
DW K7 D1100              ; 投入ｼｬﾄﾙ_ﾊﾟﾚｯﾄID
CON
DW K7 D1101              ; 投入ｼｬﾄﾙ_投入部ﾛﾎﾞｯﾄNo.
MPP
MOV K35 D1000            ; U1_自動運転ｽﾃｯﾌﾟ
MRD
AND W01.1                ; 投入部投入不可
MOV K1 D1040             ; 投入部ｴﾗｰ　(1=投入不可 2=段取)
MRD
AND W01.2                ; 製品IDｴﾗｰ､段取
MOV K2 D1040             ; 投入部ｴﾗｰ　(1=投入不可 2=段取)
MPP
LD W01.1                 ; 投入部投入不可
OR W01.2                 ; 製品IDｴﾗｰ､段取
ANL
MOV K20 D1000            ; U1_自動運転ｽﾃｯﾌﾟ
;<h1/>/ S20_読込ｴﾗｰ･ｼｬﾄﾙ戻
LD M1020                 ; ｺｰﾄﾞ読込ｴﾗｰ
AND M1479                ; U1_STEP動作
AND T126                 ; 投入部ﾗｲﾄｶｰﾃﾝ_確認
AND X320B                ; ｼｬﾄﾙ(RB1)位置決め完了_PEND
MPS
MOV K1 D1024             ; 投入ｼｬﾄﾙ_RB_POS_確定
MPP
AND= D1024 K1            ; 投入ｼｬﾄﾙ_RB_POS_確定
INC D1000                ; U1_自動運転ｽﾃｯﾌﾟ
LD M1021                 ; ｼｬﾄﾙ供給位置移動
AND M1479                ; U1_STEP動作
ANB X320B                ; ｼｬﾄﾙ(RB1)位置決め完了_PEND
INC D1000                ; U1_自動運転ｽﾃｯﾌﾟ
LD M1022                 ; 位置決め完了OFF確認
AND M1479                ; U1_STEP動作
AND X320B                ; ｼｬﾄﾙ(RB1)位置決め完了_PEND
AND T126                 ; 投入部ﾗｲﾄｶｰﾃﾝ_確認
AND Y420C                ; ｼｬﾄﾙ(RB1)一時停止_*STP
MPS
AND M1471                ; RB1_ﾜｰｸ投入位置(待機位置)
MPS
AND= D1040 K1            ; 投入部ｴﾗｰ　(1=投入不可 2=段取)
INC D1000                ; U1_自動運転ｽﾃｯﾌﾟ
MPP
LD= D1040 K2             ; 投入部ｴﾗｰ　(1=投入不可 2=段取)
AND= D200 K0             ; ｴﾗｰｺｰﾄﾞNo.
ANL
DW K100 D200             ; ｴﾗｰｺｰﾄﾞNo.
CON
MOV K24 D1000            ; U1_自動運転ｽﾃｯﾌﾟ
MPP
ANB M1471                ; RB1_ﾜｰｸ投入位置(待機位置)
MOV K20 D1000            ; U1_自動運転ｽﾃｯﾌﾟ
;投入不可 (確認PB X1020)
LD M1023                 ; 投入不可ﾌﾚｰﾑ取出要求(BZ､PL)
AND M1479                ; U1_STEP動作
ANB X1021                ; ﾜｰｸ投入側ﾜｰｸ確認(ON=有)
AND T126                 ; 投入部ﾗｲﾄｶｰﾃﾝ_確認
AND X1020                ; ﾜｰｸ投入部確認PB
MOV K49 D1000            ; U1_自動運転ｽﾃｯﾌﾟ
;<h1/>/ S24_ｴﾗｰ選択
;治具IDｴﾗｰ処理選択(ﾀﾞｲｱﾛｸﾞ表示)
;B1020:ﾜｰｸ取出  B1021:JIG交換  B1022:ｻｲｸﾙ停止
LD M1024                 ; IDｴﾗｰ確認､処理選択　(ﾀﾞｲｱﾛｸﾞ)
AND M1479                ; U1_STEP動作
AND<> D200 K0            ; ｴﾗｰｺｰﾄﾞNo.
MPS
AND B1020                ; ﾀﾞｲｱﾛｸﾞ選択PB1
DW K0 D200               ; ｴﾗｰｺｰﾄﾞNo.
CON
@INC D1000               ; U1_自動運転ｽﾃｯﾌﾟ
MRD
AND B1021                ; ﾀﾞｲｱﾛｸﾞ選択PB2
DW K0 D200               ; ｴﾗｰｺｰﾄﾞNo.
CON
MOV K27 D1000            ; U1_自動運転ｽﾃｯﾌﾟ
MPP
AND B1022                ; ﾀﾞｲｱﾛｸﾞ選択PB3
DW K0 D200               ; ｴﾗｰｺｰﾄﾞNo.
CON
MOV K30 D1000            ; U1_自動運転ｽﾃｯﾌﾟ
;治具IDｴﾗｰ･ﾜｰｸ取出処理(B1020)
LD M1025                 ; ﾌﾚｰﾑ取出選択(BZ､PL)
ANB X1021                ; ﾜｰｸ投入側ﾜｰｸ確認(ON=有)
@INC D1000               ; U1_自動運転ｽﾃｯﾌﾟ
LD M1026                 ; ﾌﾚｰﾑ取出確認
AND W0101.2              ; ID異常時取出選択
ANB W01.2                ; 製品IDｴﾗｰ､段取
MOV K49 D1000            ; U1_自動運転ｽﾃｯﾌﾟ
;治具IDｴﾗｰ･ﾜｰｸ治具交換選択(B1021)
LD M1027                 ; 治具交換選択
AND W0101.3              ; ID異常時段取選択
ANB W01.2                ; 製品IDｴﾗｰ､段取
MOV K49 D1000            ; U1_自動運転ｽﾃｯﾌﾟ
;治具IDｴﾗｰ･ﾌﾚｰﾑ取出後ｻｲｸﾙ停止(B1022)
LD M1030                 ; ｻｲｸﾙ停止ﾌﾚｰﾑ取出要求ON(BZ､PL)
ANB X1021                ; ﾜｰｸ投入側ﾜｰｸ確認(ON=有)
AND X102E                ; 投入ﾗｲﾄｶｰﾃﾝ1_OUT1
@INC D1000               ; U1_自動運転ｽﾃｯﾌﾟ
LD M1031                 ; ﾌﾚｰﾑ取出確認
AND W0101.1              ; ID異常時ｻｲｸﾙ停止選択
ANB W01.2                ; 製品IDｴﾗｰ､段取
@INC D1000               ; U1_自動運転ｽﾃｯﾌﾟ
LD M1032                 ; ID_NG払出ｻｲｸﾙ停止
AND M36                  ; 払出処理
MOV K49 D1000            ; U1_自動運転ｽﾃｯﾌﾟ
LD M1035                 ; ｺｰﾄﾞ読込正常
AND M1479                ; U1_STEP動作
AND T126                 ; 投入部ﾗｲﾄｶｰﾃﾝ_確認
AND X320B                ; ｼｬﾄﾙ(RB1)位置決め完了_PEND
MPS
MOV K3 D1024             ; 投入ｼｬﾄﾙ_RB_POS_確定
MPP
AND= D1024 K3            ; 投入ｼｬﾄﾙ_RB_POS_確定
INC D1000                ; U1_自動運転ｽﾃｯﾌﾟ
LD M1036                 ; ｼｬﾄﾙ受渡位置移動
ANB X320B                ; ｼｬﾄﾙ(RB1)位置決め完了_PEND
INC D1000                ; U1_自動運転ｽﾃｯﾌﾟ
LD M1037                 ; 位置決め完了OFF確認
AND X320B                ; ｼｬﾄﾙ(RB1)位置決め完了_PEND
AND T126                 ; 投入部ﾗｲﾄｶｰﾃﾝ_確認
AND Y420C                ; ｼｬﾄﾙ(RB1)一時停止_*STP
MPS
AND M1473                ; RB1_ﾜｰｸ受渡し位置
INC D1000                ; U1_自動運転ｽﾃｯﾌﾟ
MPP
ANB M1473                ; RB1_ﾜｰｸ受渡し位置
MOV K35 D1000            ; U1_自動運転ｽﾃｯﾌﾟ
LD M1038                 ; 受渡位置ﾜｰｸ確認
LD T115                  ; ﾜｰｸ受渡し部ﾜｰｸ有確認(ON=有)
OR M35                   ; 空運転ﾓｰﾄﾞ
ANL
INC D1000                ; U1_自動運転ｽﾃｯﾌﾟ
;<h1/>/ S39_ﾌﾚｰﾑ取出可(→RB)
LD M1039                 ; 投入ｼｬﾄﾙ取出可ON(→Low_Sup_RB)
MPS
AND M1590                ; Lo_ｼｬﾄﾙ取出完了(→ｼｬﾄﾙ)
INC D1000                ; U1_自動運転ｽﾃｯﾌﾟ
MPP
LDB M1985                ; U2_起動中
ANB X3221                ; Low_Sup_RB_RUN
AND CR2003               ; 常時OFF
ANL
MOV K49 D1000            ; U1_自動運転ｽﾃｯﾌﾟ
LD M1040                 ; ﾌﾚｰﾑ取出完了確認
ANB M1590                ; Lo_ｼｬﾄﾙ取出完了(→ｼｬﾄﾙ)
ANB X3240                ; Low_RB_給材取出侵入中(800)
INC D1000                ; U1_自動運転ｽﾃｯﾌﾟ
LD M1041                 ; 取出済ﾜｰｸ確認
AND T116                 ; ﾜｰｸ受渡し部ﾜｰｸ無確認(ON=無)
INC D1000                ; U1_自動運転ｽﾃｯﾌﾟ
;ﾜｰｸ取出完了ｼｬﾄﾙ戻
LD M1042                 ; ﾌﾚｰﾑ無確認完了
AND M1479                ; U1_STEP動作
AND T126                 ; 投入部ﾗｲﾄｶｰﾃﾝ_確認
AND X320B                ; ｼｬﾄﾙ(RB1)位置決め完了_PEND
MPS
MOV K1 D1024             ; 投入ｼｬﾄﾙ_RB_POS_確定
MPP
AND= D1024 K1            ; 投入ｼｬﾄﾙ_RB_POS_確定
INC D1000                ; U1_自動運転ｽﾃｯﾌﾟ
LD M1043                 ; ｼｬﾄﾙ供給位置移動
ANB X320B                ; ｼｬﾄﾙ(RB1)位置決め完了_PEND
INC D1000                ; U1_自動運転ｽﾃｯﾌﾟ
LD M1044                 ; 位置決め完了OFF確認
AND X320B                ; ｼｬﾄﾙ(RB1)位置決め完了_PEND
AND T126                 ; 投入部ﾗｲﾄｶｰﾃﾝ_確認
AND Y420C                ; ｼｬﾄﾙ(RB1)一時停止_*STP
MPS
AND M1471                ; RB1_ﾜｰｸ投入位置(待機位置)
MOV K49 D1000            ; U1_自動運転ｽﾃｯﾌﾟ
MPP
ANB M1471                ; RB1_ﾜｰｸ投入位置(待機位置)
MOV K42 D1000            ; U1_自動運転ｽﾃｯﾌﾟ
;ｻｲｸﾙ停止処理
;Cycle end check
LD M56                   ; 自動起動停止指令(ｻｲｸﾙ停止)
AND M1001                ; 検査ﾜｰｸ投入待ち
MOV K48 D1000            ; U1_自動運転ｽﾃｯﾌﾟ
;ｻｲｸﾙ終了
;Cycle end
LD M1048                 ; ﾕﾆｯﾄ1-1ｻｲｸﾙ停止処理
@MOV K49 D1000           ; U1_自動運転ｽﾃｯﾌﾟ
;<h1/>■工程処理 PLC→PC I/F
;各種要求･選択
LD M1019                 ; ｺｰﾄﾞ読込
OUT W0101.0              ; 投入部読込要求
LD M1031                 ; ﾌﾚｰﾑ取出確認
OUT W0101.1              ; ID異常時ｻｲｸﾙ停止選択
LD M1026                 ; ﾌﾚｰﾑ取出確認
OUT W0101.2              ; ID異常時取出選択
LD M1027                 ; 治具交換選択
OUT W0101.3              ; ID異常時段取選択
LD CR2003                ; 常時OFF
OUT W0101.4              ; 投入部投入ﾜｰｸﾃﾞｰﾀ消去要求
LD CR2002                ; 常時ON
MOV D1050 W0120          ; 投入ﾊﾟﾚｯﾄID  低温検査部投入ﾊﾟﾚｯﾄID
;<h1/>■原点復帰回路
;[][][][][][][][][][][][][][][]
;[][]    UNIT1 原点復帰    [][]
;[][][][][][][][][][][][][][][]
LD CR2002                ; 常時ON
ZRES M1250 M1299         ; ﾕﾆｯﾄ1原点復帰開始  ﾕﾆｯﾄ1原点復帰完了確認
LDB M1484                ; U1_原点復帰中
MOV K0 D1010             ; U1_原点復帰ｽﾃｯﾌﾟ
LD M1484                 ; U1_原点復帰中
MOV D1010 Z1             ; U1_原点復帰ｽﾃｯﾌﾟ
OUT M1250:Z1             ; ﾕﾆｯﾄ1原点復帰開始
;原点復帰ｻｲｸﾙ監視
;Origin cycle monitoring
LD M1484                 ; U1_原点復帰中
AND M1980                ; U2_原点
TMR K100 K300            ; ﾕﾆｯﾄ1原点復帰ﾀｲﾑｱｳﾄ
;原点復帰ステップ開始
;Origin step start
LD M1250                 ; ﾕﾆｯﾄ1原点復帰開始
AND M1479                ; U1_STEP動作
AND M1980                ; U2_原点
@INC D1010               ; U1_原点復帰ｽﾃｯﾌﾟ
@FMOV K0 D1100 K10       ; 投入ｼｬﾄﾙ_ﾊﾟﾚｯﾄID
LD M1251                 ; U2原点確認
AND T126                 ; 投入部ﾗｲﾄｶｰﾃﾝ_確認
AND M1479                ; U1_STEP動作
AND X320B                ; ｼｬﾄﾙ(RB1)位置決め完了_PEND
MPS
MOV K1 D1024             ; 投入ｼｬﾄﾙ_RB_POS_確定
MPP
AND= D1024 K1            ; 投入ｼｬﾄﾙ_RB_POS_確定
INC D1010                ; U1_原点復帰ｽﾃｯﾌﾟ
LD M1252                 ; ｼｬﾄﾙ供給位置移動
ANB X320B                ; ｼｬﾄﾙ(RB1)位置決め完了_PEND
@INC D1010               ; U1_原点復帰ｽﾃｯﾌﾟ
LD M1253                 ; 位置決め完了OFF確認
AND X320B                ; ｼｬﾄﾙ(RB1)位置決め完了_PEND
AND M1471                ; RB1_ﾜｰｸ投入位置(待機位置)
MPS
AND T126                 ; 投入部ﾗｲﾄｶｰﾃﾝ_確認
@INC D1010               ; U1_原点復帰ｽﾃｯﾌﾟ
MPP
ANB T126                 ; 投入部ﾗｲﾄｶｰﾃﾝ_確認
MOV K51 D1010            ; U1_原点復帰ｽﾃｯﾌﾟ
LD M1254                 ; ﾜｰｸ有無確認
AND M1479                ; U1_STEP動作
MPS
AND X1021                ; ﾜｰｸ投入側ﾜｰｸ確認(ON=有)
@INC D1010               ; U1_原点復帰ｽﾃｯﾌﾟ
MPP
ANB X1021                ; ﾜｰｸ投入側ﾜｰｸ確認(ON=有)
MOV K6 D1010             ; U1_原点復帰ｽﾃｯﾌﾟ
LD M1255                 ; ﾜｰｸ有取出要求
AND M1479                ; U1_STEP動作
ANB X1021                ; ﾜｰｸ投入側ﾜｰｸ確認(ON=有)
@INC D1010               ; U1_原点復帰ｽﾃｯﾌﾟ
;原点復帰終了
;Origin end
LD M1256                 ; ﾜｰｸ無確認
AND M1480                ; U1_原点
@MOV K48 D1010           ; U1_原点復帰ｽﾃｯﾌﾟ
LD M1298                 ; ﾕﾆｯﾄ1原点復帰完了
ANB M82                  ; 原点復帰開始
@MOV K49 D1010           ; U1_原点復帰ｽﾃｯﾌﾟ
;<h1/>■手動回路
;[][][][][][][][][][][][][][][]
;[] 　　   UNIT1 手動　      []
;[][][][][][][][][][][][][][][]
LD M31                   ; 手動ﾓｰﾄﾞ
AND M32                  ; ﾒｲﾝ手動操作可能条件
ANB M1485                ; U1_起動中
ANB M1484                ; U1_原点復帰中
ANB M1360                ; RB1_MANUAL_ON
MC
;供給位置移動
LD M124                  ; 投入ｴﾘｱｾﾝｻ正常
AND X320B                ; ｼｬﾄﾙ(RB1)位置決め完了_PEND
AND M1980                ; U2_原点
ANB M1841                ; U2_供給1ｻｲｸﾙ(手動)
ANB M1301                ; 供給位置移動
ANB M1306                ; 読取位置移動
ANB M1311                ; 受渡位置移動
OUT M1300                ; 供給位置移動可
LD B1080                 ; UNIT1-1-1 TP-PB
AND M1300                ; 供給位置移動可
OR M1301                 ; 供給位置移動
ANB M1304                ; 位置決め完了
OUT M1301                ; 供給位置移動
MPS
MOV K1 D1024             ; 投入ｼｬﾄﾙ_RB_POS_確定
MPP
LD= D1024 K1             ; 投入ｼｬﾄﾙ_RB_POS_確定
ANB M1303                ; 位置決め完了OFF確認
ANL
OUT M1302                ; 供給位置移動要求
LD M1301                 ; 供給位置移動
ANB X320B                ; ｼｬﾄﾙ(RB1)位置決め完了_PEND
OR M1303                 ; 位置決め完了OFF確認
AND M1301                ; 供給位置移動
OUT M1303                ; 位置決め完了OFF確認
LD M1303                 ; 位置決め完了OFF確認
AND X320B                ; ｼｬﾄﾙ(RB1)位置決め完了_PEND
AND M1471                ; RB1_ﾜｰｸ投入位置(待機位置)
OR M1304                 ; 位置決め完了
AND M1301                ; 供給位置移動
OUT M1304                ; 位置決め完了
;読取位置移動
LD M124                  ; 投入ｴﾘｱｾﾝｻ正常
AND X320B                ; ｼｬﾄﾙ(RB1)位置決め完了_PEND
AND M1980                ; U2_原点
ANB M1841                ; U2_供給1ｻｲｸﾙ(手動)
ANB M1301                ; 供給位置移動
ANB M1306                ; 読取位置移動
ANB M1311                ; 受渡位置移動
OUT M1305                ; 読取位置移動可
LD B1081                 ; UNIT1-1-2 TP-PB
AND M1305                ; 読取位置移動可
OR M1306                 ; 読取位置移動
ANB M1309                ; 位置決め完了
OUT M1306                ; 読取位置移動
MPS
MOV K2 D1024             ; 投入ｼｬﾄﾙ_RB_POS_確定
MPP
LD= D1024 K2             ; 投入ｼｬﾄﾙ_RB_POS_確定
ANB M1308                ; 位置決め完了OFF確認
ANL
OUT M1307                ; 読取位置移動要求
LD M1307                 ; 読取位置移動要求
ANB X320B                ; ｼｬﾄﾙ(RB1)位置決め完了_PEND
OR M1308                 ; 位置決め完了OFF確認
AND M1306                ; 読取位置移動
OUT M1308                ; 位置決め完了OFF確認
LD M1308                 ; 位置決め完了OFF確認
AND X320B                ; ｼｬﾄﾙ(RB1)位置決め完了_PEND
AND M1472                ; RB1_BCR読取位置
OR M1309                 ; 位置決め完了
AND M1306                ; 読取位置移動
OUT M1309                ; 位置決め完了
;受渡位置移動
LD M124                  ; 投入ｴﾘｱｾﾝｻ正常
AND X320B                ; ｼｬﾄﾙ(RB1)位置決め完了_PEND
AND M1980                ; U2_原点
ANB M1841                ; U2_供給1ｻｲｸﾙ(手動)
ANB M1821                ; Lo_取出1ｻｲｸﾙ(手動)
ANB M1301                ; 供給位置移動
ANB M1306                ; 読取位置移動
ANB M1311                ; 受渡位置移動
OUT M1310                ; 受渡位置移動可
LD B1082                 ; UNIT1-1-3 TP-PB
AND M1310                ; 受渡位置移動可
OR M1311                 ; 受渡位置移動
ANB M1314                ; 位置決め完了
OUT M1311                ; 受渡位置移動
MPS
MOV K3 D1024             ; 投入ｼｬﾄﾙ_RB_POS_確定
MPP
LD= D1024 K3             ; 投入ｼｬﾄﾙ_RB_POS_確定
ANB M1313                ; 位置決め完了OFF確認
ANL
OUT M1312                ; 受渡位置移動要求
LD M1311                 ; 受渡位置移動
ANB X320B                ; ｼｬﾄﾙ(RB1)位置決め完了_PEND
OR M1313                 ; 位置決め完了OFF確認
AND M1311                ; 受渡位置移動
OUT M1313                ; 位置決め完了OFF確認
LD M1313                 ; 位置決め完了OFF確認
AND X320B                ; ｼｬﾄﾙ(RB1)位置決め完了_PEND
AND M1473                ; RB1_ﾜｰｸ受渡し位置
OR M1314                 ; 位置決め完了
AND M1311                ; 受渡位置移動
OUT M1314                ; 位置決め完了
MCR
;<h1/>■出力回路
;□□    出力回路    □□
LDB M1023                ; 投入不可ﾌﾚｰﾑ取出要求(BZ､PL)
INV
AND T1                   ; 0.3Secｸﾛｯｸ
OUT Y2030                ; ﾜｰｸ投入部確認PL
LD M1485                 ; U1_起動中
OR M56                   ; 自動起動停止指令(ｻｲｸﾙ停止)
OR M36                   ; 払出処理
MPS
LDB M1001                ; 検査ﾜｰｸ投入待ち
ANB M1002                ; 検査ﾜｰｸ投入中
ANB M1023                ; 投入不可ﾌﾚｰﾑ取出要求(BZ､PL)
ANB M1025                ; ﾌﾚｰﾑ取出選択(BZ､PL)
ANB M1030                ; ｻｲｸﾙ停止ﾌﾚｰﾑ取出要求ON(BZ､PL)
LD M1023                 ; 投入不可ﾌﾚｰﾑ取出要求(BZ､PL)
OR M1025                 ; ﾌﾚｰﾑ取出選択(BZ､PL)
OR M1030                 ; ｻｲｸﾙ停止ﾌﾚｰﾑ取出要求ON(BZ､PL)
AND T1                   ; 0.3Secｸﾛｯｸ
ORL
ANL
OUT Y2031                ; ﾜｰｸ投入部投入不可PL
MPP
LD M1001                 ; 検査ﾜｰｸ投入待ち
OR M1002                 ; 検査ﾜｰｸ投入中
ANL
OUT Y2032                ; ﾜｰｸ投入部投入可PL
;ROBOT AUTO/MANU
LDP B109F                ; UNIT1-2-16 TP-PB
AND M1360                ; RB1_MANUAL_ON
LD<> D50 K201            ; TpM-K_表示中ページNo.
MEP
ORL
LD<> D70 K201            ; TpM-K_表示中ページNo.
MEP
ORL
LD<> D90 K201            ; TpM-K_表示中ページNo.
MEP
ORL
LD<> D110 K201           ; TpM-K_表示中ページNo.
MEP
ORL
OUT M1361                ; RB1_MANUAL_OFF
LDP B109F                ; UNIT1-2-16 TP-PB
ANB M1360                ; RB1_MANUAL_ON
OR M1360                 ; RB1_MANUAL_ON
ANB M1361                ; RB1_MANUAL_OFF
AND M31                  ; 手動ﾓｰﾄﾞ
OUT M1360                ; RB1_MANUAL_ON
;ｼｬﾄﾙRB
LDB M1008                ; ｼｬﾄﾙ読取位置移動
ANB M1012                ; ｼｬﾄﾙ供給位置移動
ANB M1021                ; ｼｬﾄﾙ供給位置移動
ANB M1036                ; ｼｬﾄﾙ受渡位置移動
ANB M1043                ; ｼｬﾄﾙ供給位置移動
ANB M1252                ; ｼｬﾄﾙ供給位置移動
INV
LDB M1302                ; 供給位置移動要求
ANB M1307                ; 読取位置移動要求
ANB M1312                ; 受渡位置移動要求
INV
ORL
MOV D1024 D1026          ; 投入ｼｬﾄﾙ_RB_POS_確定  投入ｼｬﾄﾙ_RB_指令POS
MPS
TMH K1091 K5             ; 投入ｼｬﾄﾙRB_POS確定ﾃﾞｨﾚｲ
MPP
AND T1091                ; 投入ｼｬﾄﾙRB_POS確定ﾃﾞｨﾚｲ
OUT Y420D                ; ｼｬﾄﾙ(RB1)ｽﾀｰﾄ_CSTR
LD CR2002                ; 常時ON
MPS
AND D1026.0
OUT Y4200                ; ｼｬﾄﾙ(RB1)指令pos_PC1
MRD
AND D1026.1
OUT Y4201                ; ｼｬﾄﾙ(RB1)指令pos_PC2
MRD
AND D1026.2
OUT Y4202                ; ｼｬﾄﾙ(RB1)指令pos_PC4
MRD
AND D1026.3
OUT Y4203                ; ｼｬﾄﾙ(RB1)指令pos_PC8
MRD
AND D1026.4
OUT Y4204                ; ｼｬﾄﾙ(RB1)指令pos_PC16
MRD
AND D1026.5
OUT Y4205                ; ｼｬﾄﾙ(RB1)指令pos_PC32
MRD
AND D1026.6
OUT Y4206                ; ｼｬﾄﾙ(RB1)指令pos_PC64
MPP
AND D1026.7
OUT Y4207                ; ｼｬﾄﾙ(RB1)指令pos_PC128
LD M1360                 ; RB1_MANUAL_ON
OUT Y420A                ; ｼｬﾄﾙ(RB1)運転ﾓｰﾄﾞ_RMOD
LDB CR2003               ; 常時OFF
INV
OUT Y420B                ; ｼｬﾄﾙ(RB1)原点復帰_HOME
LD M124                  ; 投入ｴﾘｱｾﾝｻ正常
AND M125                 ; 投入ｼｬﾄﾙｶﾊﾞｰ正常
AND M126                 ; 低温検査安全扉正常
OR M1360                 ; RB1_MANUAL_ON
OR M37                   ; ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
OUT Y420C                ; ｼｬﾄﾙ(RB1)一時停止_*STP
LD M16                   ; ﾘｾｯﾄPB
ANB X320E                ; ｼｬﾄﾙ(RB1)ｱﾗｰﾑ_*ALM
OUT Y420E                ; ｼｬﾄﾙ(RB1)ﾘｾｯﾄ_RES
LD M50                   ; 運転準備
OUT Y420F                ; ｼｬﾄﾙ(RB1)ｻｰﾎﾞON_SON
;<h1/>■表示
;□□　　パネル表示　　□□
LD M1471                 ; RB1_ﾜｰｸ投入位置(待機位置)
LD M1301                 ; 供給位置移動
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
ORL
OUT B1580                ; UNIT1-1-1 TP-PL
LD M1472                 ; RB1_BCR読取位置
LD M1306                 ; 読取位置移動
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
ORL
OUT B1581                ; UNIT1-1-2 TP-PL
LD M1473                 ; RB1_ﾜｰｸ受渡し位置
LD M1311                 ; 受渡位置移動
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
ORL
OUT B1582                ; UNIT1-1-3 TP-PL
;<h1/>■異常
;□□    異常検出    □□
;B020(K33)--B02F(K48)  B030(K49)--B03F(K64)
LDB X320E                ; ｼｬﾄﾙ(RB1)ｱﾗｰﾑ_*ALM
LDB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B020                 ; B020_033)RBC1 ｺﾝﾄﾛｰﾗｰ異常
ORL
OUT B020                 ; B020_033)RBC1 ｺﾝﾄﾛｰﾗｰ異常
LDP B020                 ; B020_033)RBC1 ｺﾝﾄﾛｰﾗｰ異常
AND< D900 K64            ; FIFO_DATA_VALUE
DW H0021 D0              ; エラーコード
CON
FIFOW D0 D900            ; エラーコード  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0520                 ; B020_33)Bz停止
AND B020                 ; B020_033)RBC1 ｺﾝﾄﾛｰﾗｰ異常
OUT B0520                ; B020_33)Bz停止
LD M1005                 ; 治具IDﾁｪｯｸ
AND= D1050 K0            ; 投入ﾊﾟﾚｯﾄID
OR B021                  ; B021_034)投入部JIG_ID異常
AND T111                 ; 給材部ﾜｰｸ有確認(ON=有)
OUT B021                 ; B021_034)投入部JIG_ID異常
LDP B021                 ; B021_034)投入部JIG_ID異常
AND< D900 K64            ; FIFO_DATA_VALUE
DW H0022 D0              ; エラーコード
CON
FIFOW D0 D900            ; エラーコード  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0521                 ; B021_34)Bz停止
AND B021                 ; B021_034)投入部JIG_ID異常
OUT B0521                ; B021_34)Bz停止
LD M1038                 ; 受渡位置ﾜｰｸ確認
AND T116                 ; ﾜｰｸ受渡し部ﾜｰｸ無確認(ON=無)
LD M1041                 ; 取出済ﾜｰｸ確認
AND T115                 ; ﾜｰｸ受渡し部ﾜｰｸ有確認(ON=有)
ORL
LDB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B022                 ; B022_035)投入部ﾜｰｸ受渡異常
ORL
ANB M35                  ; 空運転ﾓｰﾄﾞ
OUT B022                 ; B022_035)投入部ﾜｰｸ受渡異常
LDP B022                 ; B022_035)投入部ﾜｰｸ受渡異常
AND< D900 K64            ; FIFO_DATA_VALUE
DW H0023 D0              ; エラーコード
CON
FIFOW D0 D900            ; エラーコード  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0522                 ; B022_35)Bz停止
AND B022                 ; B022_035)投入部ﾜｰｸ受渡異常
OUT B0522                ; B022_35)Bz停止
LD M1255                 ; ﾜｰｸ有取出要求
LDB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B023                 ; B023_036)投入部ﾜｰｸ有除去要求
ORL
OUT B023                 ; B023_036)投入部ﾜｰｸ有除去要求
LDP B023                 ; B023_036)投入部ﾜｰｸ有除去要求
AND< D900 K64            ; FIFO_DATA_VALUE
DW H0024 D0              ; エラーコード
CON
FIFOW D0 D900            ; エラーコード  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0523                 ; B023_36)Bz停止
AND B023                 ; B023_036)投入部ﾜｰｸ有除去要求
OUT B0523                ; B023_36)Bz停止
LDP M1014                ; ﾜｰｸ浮きNG
LDB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
LDB T127                 ; 投入部ﾗｲﾄｶｰﾃﾝ_遮光_確認
ORB M1014                ; ﾜｰｸ浮きNG
ANL
AND B024                 ; B024_037)投入部ﾜｰｸ浮き異常
ORL
OUT B024                 ; B024_037)投入部ﾜｰｸ浮き異常
LDP B024                 ; B024_037)投入部ﾜｰｸ浮き異常
AND< D900 K64            ; FIFO_DATA_VALUE
DW H0025 D0              ; エラーコード
CON
FIFOW D0 D900            ; エラーコード  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0524                 ; B024_37)Bz停止
AND B024                 ; B024_037)投入部ﾜｰｸ浮き異常
OUT B0524                ; B024_37)Bz停止
LDB X102E                ; 投入ﾗｲﾄｶｰﾃﾝ1_OUT1
MPS
TMR K151 K80             ; 投入部ﾗｲﾄｶｰﾃﾝ遮光ﾀｲﾏ
MPP
AND T151                 ; 投入部ﾗｲﾄｶｰﾃﾝ遮光ﾀｲﾏ
OUT B025                 ; B025_038)投入部ﾗｲﾄｶｰﾃﾝ遮光中
LDP B025                 ; B025_038)投入部ﾗｲﾄｶｰﾃﾝ遮光中
AND< D900 K64            ; FIFO_DATA_VALUE
DW H0026 D0              ; エラーコード
CON
FIFOW D0 D900            ; エラーコード  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0525                 ; B025_38)Bz停止
AND B025                 ; B025_038)投入部ﾗｲﾄｶｰﾃﾝ遮光中
OUT B0525                ; B025_38)Bz停止
LD CR2003                ; 常時OFF
OUT B026                 ; B026_039)
LDP B026                 ; B026_039)
AND< D900 K64            ; FIFO_DATA_VALUE
DW H0027 D0              ; エラーコード
CON
FIFOW D0 D900            ; エラーコード  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0526                 ; B026_39)Bz停止
AND B026                 ; B026_039)
OUT B0526                ; B026_39)Bz停止
;異常ﾌﾞｻﾞｰまとめ
LDB B020                 ; B020_033)RBC1 ｺﾝﾄﾛｰﾗｰ異常
OR B0520                 ; B020_33)Bz停止
LDB B022                 ; B022_035)投入部ﾜｰｸ受渡異常
OR B0522                 ; B022_35)Bz停止
ANL
INV
OUT M1489                ; U1_異常BZ補助
END
ENDH
