DEVICE:53
;MODULE:UNIT1_Supply
;MODULE_TYPE:0
;<h1/>□_入力受け
;関連する入力受け(ｾﾝｻのﾃﾞｨﾚｲﾀｲﾏ等)を必要があれば作成する。
;通常は入力ﾕﾆｯﾄに入力時定数(ﾃﾞｨﾚｲ)があるので直接使用しても問題は無い。
LD X04                   ; 供給部ﾗｲﾄｶｰﾃﾝOUT1
AND X06                  ; ST1-2部ﾗｲﾄｶｰﾃﾝOUT1
AND X07                  ; ST1-2部ﾗｲﾄｶｰﾃﾝOUT2
AND X08                  ; ST3-4部ﾗｲﾄｶｰﾃﾝOUT1
AND X09                  ; ST3-4部ﾗｲﾄｶｰﾃﾝOUT2
AND X0A                  ; ST1-2背面ﾗｲﾄｶｰﾃﾝOUT1
AND X0B                  ; ST1-2背面ﾗｲﾄｶｰﾃﾝOUT1
AND X0C                  ; ST3-4背面ﾗｲﾄｶｰﾃﾝOUT1
AND X0D                  ; ST3-4背面ﾗｲﾄｶｰﾃﾝOUT1
OR M39                   ; ?LO?}?Y?a???nd??O??AT
TMR K115 K5              ; 投入部ﾗｲﾄｶｰﾃﾝOK
LDB X04                  ; 供給部ﾗｲﾄｶｰﾃﾝOUT1
TMR K116 K5              ; 投入部ﾗｲﾄｶｰﾃﾝ_遮光_確認
LD X1280                 ; 給材部ﾜｰｸ有無確認(ON=有)
TMR K101 K5              ; 給材部ﾜｰｸ有り確認
LDB X1280                ; 給材部ﾜｰｸ有無確認(ON=有)
TMR K105 K5              ; 給材部ﾜｰｸ無し確認
LD X1282                 ; 給材部ﾜｰｸ浮き確認1(ON=OK)
AND X1283                ; 給材部ﾜｰｸ浮き確認2(ON=OK)
TMR K102 K3              ; 給材部ﾜｰｸ浮き確認(ON=OK)
LD X1281                 ; 給材引込部ﾜｰｸ有無確認(ON=有)
TMR K103 K3              ; 給材引込部ﾜｰｸ有無確認(ON=有)
LD CR2003                ; 常時OFF
TMR K104 K3              ; 入力受け4
LD X1285                 ; 投入部JIG識別ID_1
OUT D1052.0              ; 投入部JIG識別ID_1_Copy
LD X1286                 ; 投入部JIG識別ID_2
OUT D1052.1              ; 投入部JIG識別ID_2_Copy
LD X1287                 ; 投入部JIG識別ID_4
OUT D1052.2              ; 投入部JIG識別ID_4_Copy
LD<> D1050 D1052         ; 投入部JIG_ID  投入部JIG識別ID_Copy
AND M1450                ; RB1_ﾜｰｸ投入位置_P2
MPS
TMR K106 K5              ; 投入治具ID_変更有り
MPP
AND T106                 ; 投入治具ID_変更有り
MOV D1052 D1050          ; 投入部JIG識別ID_Copy  投入部JIG_ID
LD CR2002                ; 常時ON
MOV D1050 W0120          ; 投入部JIG_ID  投入ﾊﾟﾚｯﾄID
;<h1/>□_装置状態・動作条件
;ﾕﾆｯﾄまとめ
LD M1070                 ; ﾕﾆｯﾄ1-1原点_供給ｽﾗｲﾀﾞ部
AND M1150                ; ﾕﾆｯﾄ1-2原点_ﾊﾞｰｺｰﾄﾞ読取
OUT M1480                ; ﾕﾆｯﾄ1原点
;□ 非常停止
LDB M1071                ; ﾕﾆｯﾄ1-1即停止異常_供給ｽﾗｲﾀﾞ部
ANB M1151                ; ﾕﾆｯﾄ1-2異常
INV
OUT M1481                ; ﾕﾆｯﾄ1即停止異常
;□ 起動条件
LD M1072                 ; ﾕﾆｯﾄ1-1起動条件_供給ｽﾗｲﾀﾞ部
AND M1152                ; ﾕﾆｯﾄ1-2起動条件
OUT M1482                ; ﾕﾆｯﾄ1起動条件
;□ 起動OFF
LDB M50                  ; 運転準備
LD M60                   ; ｴﾗｰ発生
OR M52                   ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
AND M1484                ; ﾕﾆｯﾄ1原点復帰中
ORL
OR T15                   ; 強制停止
OUT M1483                ; ﾕﾆｯﾄ1_原点復帰起動OFF
;□ 原点復帰
LD M82                   ; 原点復帰開始
ANB M1484                ; ﾕﾆｯﾄ1原点復帰中
OR M1484                 ; ﾕﾆｯﾄ1原点復帰中
ANB M1483                ; ﾕﾆｯﾄ1_原点復帰起動OFF
ANB M1491                ; ﾕﾆｯﾄ1ｴﾗｰ発生
ANB M1297                ; STEPEND
OUT M1484                ; ﾕﾆｯﾄ1原点復帰中
MPS
@MOV K0 D1550            ; 搬送_1_ﾜｰｸ在荷_CNT
MPP
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OUT B1599                ; UNIT1-2-10 TP-PL
;□ 起動中
LDB M1074                ; ﾕﾆｯﾄ1-1起動中
ANB M1154                ; ｺｰﾄﾞ読取ﾕﾆｯﾄ1-2起動中
INV
OUT M1485                ; ﾕﾆｯﾄ1起動中
;□ ｻｲｸﾙ停止異常
LDB M1075                ; ﾕﾆｯﾄ1-1ｻｲｸﾙ停止異常
ANB M1155                ; ﾕﾆｯﾄ1-2ｻｲｸﾙ停止異常
ANB B024                 ; 036)供給ｽﾗｲﾀﾞ原点ﾀｲﾑｵｰﾊﾞｰ
INV
OUT M1486                ; ﾕﾆｯﾄ1ｻｲｸﾙ停止異常
;□ 払出停止異常
LDB CR2003               ; 常時OFF
INV
OUT M1487                ; ﾕﾆｯﾄ1払出停止異常
;□ 警報補助
LDB CR2003               ; 常時OFF
INV
OUT M1488                ; ﾕﾆｯﾄ1警報補助
;□ 機器準備確認
LD X100F                 ; RB1 #01_RX00F_SAVO状態
OUT M1490                ; ﾕﾆｯﾄ1機器準備完了
;□ ｴﾗｰ発生　一時停止
LDB M1076                ; ﾕﾆｯﾄ1-1ｴﾗｰ発生(一時停止処理)
ANB M1156                ; ﾕﾆｯﾄ1-2ｴﾗｰ発生
INV
OUT M1491                ; ﾕﾆｯﾄ1ｴﾗｰ発生
;□ 動作中ﾕﾆｯﾄ無し
LD M1077                 ; ﾕﾆｯﾄ1-1動作無し
AND M1157                ; ﾕﾆｯﾄ1-2動作無し
OUT M1492                ; ﾕﾆｯﾄ1動作無し確認
;□ 払出しﾜｰｸ無し
LD T105                  ; 給材部ﾜｰｸ無し確認
ANB T103                 ; 給材引込部ﾜｰｸ有無確認(ON=有)
AND M36                  ; 払出ﾓｰﾄﾞ
TMR K114 K10             ; UNIT1払出処理ﾜｰｸ無
LD T114                  ; UNIT1払出処理ﾜｰｸ無
OUT M1493                ; ﾕﾆｯﾄ1ﾜｰｸ無し
;□ ｽﾃｯﾌﾟ起動
LD M30                   ; 自動ﾓｰﾄﾞ
OR M31                   ; 手動ﾓｰﾄﾞ
ANB M130                 ; 一時停止
AND T115                 ; 投入部ﾗｲﾄｶｰﾃﾝOK
ANB M51                  ; 即停止異常(緊急停止)
ANB M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ANB M57                  ; 自動起動停止指令(払出停止)
ANB M59                  ; 払出停止異常まとめ
ANB M60                  ; ｴﾗｰ発生
OUT M1479                ; ﾕﾆｯﾄ1_ｽﾃｯﾌﾟ動作可
;<h1/>□_自動回路
;<h1/>◇_状態・動作条件(補助)
LDP M71                  ; 自動運転開始BZ
OR M1078                 ; 供給ｽﾗｲﾀﾞ_起動初期確認
AND M71                  ; 自動運転開始BZ
ANB M1002                ; U1S02_検査ﾜｰｸ供給中
OUT M1078                ; 供給ｽﾗｲﾀﾞ_起動初期確認
LD M1450                 ; RB1_ﾜｰｸ投入位置_P2
LD M31                   ; 手動ﾓｰﾄﾞ
ANB X1280                ; 給材部ﾜｰｸ有無確認(ON=有)
OR M30                   ; 自動ﾓｰﾄﾞ
OR M75                   ; 自動運転開始PCﾁｪｯｸ開始
OR M1078                 ; 供給ｽﾗｲﾀﾞ_起動初期確認
ANL
ANB X1281                ; 給材引込部ﾜｰｸ有無確認(ON=有)
AND= D1201 K0            ; 投入部1_ﾜｰｸ有無記憶
OUT M1070                ; ﾕﾆｯﾄ1-1原点_供給ｽﾗｲﾀﾞ部
LDB B020                 ; 032)RB1ｺﾝﾄﾛｰﾗｰ異常
ANB B022                 ; 034)供給部ﾜｰｸ受渡し失敗
ANB B028                 ; 040)ﾜｰｸ搬送異常
INV
OUT M1071                ; ﾕﾆｯﾄ1-1即停止異常_供給ｽﾗｲﾀﾞ部
LD M1070                 ; ﾕﾆｯﾄ1-1原点_供給ｽﾗｲﾀﾞ部
ANB M1074                ; ﾕﾆｯﾄ1-1起動中
ANB M130                 ; 一時停止
ANB M56                  ; 自動起動停止指令(ｻｲｸﾙ停止)
ANB M36                  ; 払出ﾓｰﾄﾞ
ANB M1402                ; ﾊﾞｰｺｰﾄﾞ読取_正常終了
ANB M1403                ; ﾊﾞｰｺｰﾄﾞ読取_異常終了
ANB M1404                ; ID異常時  ｻｲｸﾙ停止選択
ANB M1405                ; ID異常時　取出し選択
ANB M1406                ; ID異常時　段取り替え選択
ANB M1407                ; BCR読み取れなかった異常
OUT M1072                ; ﾕﾆｯﾄ1-1起動条件_供給ｽﾗｲﾀﾞ部
LDB M50                  ; 運転準備
OR M1486                 ; ﾕﾆｯﾄ1ｻｲｸﾙ停止異常
OR T15                   ; 強制停止
OUT M1073                ; ﾕﾆｯﾄ1-1起動OFF
LD M71                   ; 自動運転開始BZ
AND M1072                ; ﾕﾆｯﾄ1-1起動条件_供給ｽﾗｲﾀﾞ部
OR M1074                 ; ﾕﾆｯﾄ1-1起動中
ANB M1073                ; ﾕﾆｯﾄ1-1起動OFF
ANB M1063                ; U1S63 STEPEND
OUT M1074                ; ﾕﾆｯﾄ1-1起動中
;ﾕﾆｯﾄ1-1 ｻｲｸﾙ停止異常
LDB B020                 ; 032)RB1ｺﾝﾄﾛｰﾗｰ異常
ANB B04C                 ; 076)吸着ｾﾝｻ確認異常
INV
OUT M1075                ; ﾕﾆｯﾄ1-1ｻｲｸﾙ停止異常
;ﾕﾆｯﾄ1-1 一時停止ｴﾗｰ発生まとめ
LDB B021                 ; 033)投入部JIGID異常
ANB B023                 ; 035)ﾜｰｸ投入NG異常
ANB B025                 ; 037)ID一致ｽﾃｰｼﾞ無
ANB B026                 ; 038)ｽﾃｰｼﾞﾁｪｯｸ要求(有効化要求)
ANB B0321                ; 801)給材部ﾜｰｸ除去要求
ANB B028                 ; 040)ﾜｰｸ搬送異常
ANB B029                 ; 041)投入部ﾜｰｸ浮き異常
INV
OUT M1076                ; ﾕﾆｯﾄ1-1ｴﾗｰ発生(一時停止処理)
;ﾕﾆｯﾄ1-1 停止判定
LD= D1000 D1005          ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ  ﾕﾆｯﾄ1-1動作中判定
ORB M1074                ; ﾕﾆｯﾄ1-1起動中
LD X100D                 ; RB1 #01_RX00D_運転完了
ORB X100C                ; RB1 #01_RX00C_運転実行中
ANL
TMR K110 K20             ; ﾕﾆｯﾄ1-1動作無し判定ﾀｲﾏ
LD CR2002                ; 常時ON
MOV D1000 D1005          ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ  ﾕﾆｯﾄ1-1動作中判定
LD T110                  ; ﾕﾆｯﾄ1-1動作無し判定ﾀｲﾏ
OUT M1077                ; ﾕﾆｯﾄ1-1動作無し
;□
;□　ﾕﾆｯﾄ1-1 自動運転ステップ開始
;□
LD CR2002                ; 常時ON
FMOV K0 M1000 K4         ; U1S00
LDB M1074                ; ﾕﾆｯﾄ1-1起動中
MOV K0 D1000             ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
MOV K0 D1201             ; 投入部1_ﾜｰｸ有無記憶
LD M1074                 ; ﾕﾆｯﾄ1-1起動中
MOV D1000 Z1             ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
SET M1000:Z1             ; U1S00
;<h1/>__S00_投入部ﾜｰｸ有無分岐
LD M1000                 ; U1S00
INC D1000                ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
;<h1/>__S01_ﾜｰｸ供給待ち
LD M1001                 ; U1S01
AND M2659                ; 初期起動時吸着ｾﾝｻ確認完了記憶
MPS
LDB M36                  ; 払出ﾓｰﾄﾞ
OR T101                  ; 給材部ﾜｰｸ有り確認
ANB M130                 ; 一時停止
ANL
MPS
LD T116                  ; 投入部ﾗｲﾄｶｰﾃﾝ_遮光_確認
OR M1351                 ; 上治具休憩解除指令
OR T101                  ; 給材部ﾜｰｸ有り確認
AND T101                 ; 給材部ﾜｰｸ有り確認
ANL
MPS
ANB M172                 ; ﾘｰｸ上治具_休息指令中
INC D1000                ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
MPP
OUT M1351                ; 上治具休憩解除指令
MPP
AND T115                 ; 投入部ﾗｲﾄｶｰﾃﾝOK
MPS
ANB T101                 ; 給材部ﾜｰｸ有り確認
TMR K108 K10             ; ｽﾗｲﾀﾞ_ﾜｰｸ待ち_DLY
MPP
AND T108                 ; ｽﾗｲﾀﾞ_ﾜｰｸ待ち_DLY
OUT M1350                ; ﾜｰｸ待状態(休息開始ｶｳﾝﾄ)
MPP
LD M36                   ; 払出ﾓｰﾄﾞ
ANB T101                 ; 給材部ﾜｰｸ有り確認
ANL
MOV K63 D1000            ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
LD M1002                 ; U1S02_検査ﾜｰｸ供給中
AND M1479                ; ﾕﾆｯﾄ1_ｽﾃｯﾌﾟ動作可
MPS
LD T101                  ; 給材部ﾜｰｸ有り確認
OR M35                   ; 空運転ﾓｰﾄﾞ
ANL
MPS
AND T120                 ; ﾜｰｸ投入確認ﾃﾞｨﾚｲ
MOV K5 D1000             ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
MPP
TMR K120 K2              ; ﾜｰｸ投入確認ﾃﾞｨﾚｲ
MPP
LD T105                  ; 給材部ﾜｰｸ無し確認
ANB M35                  ; 空運転ﾓｰﾄﾞ
ANL
MOV K1 D1000             ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
;	ﾜｰｸ投入OK　&JigNO.ﾁｪｯｸ
LD M1005                 ; U1S05_ｲﾝﾃﾞｯｸｽNO.ﾁｪｯｸ
AND M1479                ; ﾕﾆｯﾄ1_ｽﾃｯﾌﾟ動作可
MPS
AND<> D1050 K0           ; 投入部JIG_ID
MPS
MOV D1050 D1042          ; 投入部JIG_ID  自動_JIG_NO.指定
MPP
AND= D1050 D1042         ; 投入部JIG_ID  自動_JIG_NO.指定
INC D1000                ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
MPP
AND= D1050 K0            ; 投入部JIG_ID
MOV K1 D1000             ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
LD M1006                 ; U1S06
AND M1479                ; ﾕﾆｯﾄ1_ｽﾃｯﾌﾟ動作可
INC D1000                ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
;　　■ｽﾃｰｼﾞ有効ﾁｪｯｸ（ここではＰＣからのＩＤ情報がこないので、ステージの有効／無効のみをチェックする）
LD M1007                 ; U1S07_ｽﾃｰｼﾞﾁｪｯｸ
AND M1479                ; ﾕﾆｯﾄ1_ｽﾃｯﾌﾟ動作可
MPS
LD L1100                 ; ﾘｰｸst2_有効状態
OR L1300                 ; ﾘｰｸst1_有効状態
OR L1500                 ; ﾘｰｸst3_有効状態
OR L10                   ; ﾘｰｸ検査有無(0_有/1_無)
LD L1200                 ; FINALST2_有効状態
OR L1400                 ; FINALST1_有効状態
OR L1600                 ; FINALST3_有効状態
OR L11                   ; ﾌｧｲﾅﾙ検査有無(0_有/1_無)
ANL
LD L1700                 ; ﾘｰｸst4_有効状態
OR L10                   ; ﾘｰｸ検査有無(0_有/1_無)
LD L1800                 ; FINALST4_有効状態
OR L11                   ; ﾌｧｲﾅﾙ検査有無(0_有/1_無)
ANL
AND M99                  ; 能拡後対応FLG
ORL
ANL
MOV K10 D1000            ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
OUT M1422                ; ｽﾃｰｼﾞ状態OK
MPP
ANB M1422                ; ｽﾃｰｼﾞ状態OK
INC D1000                ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
LD M1008                 ; U1S08_ｽﾃｰｼﾞ異常
AND M1479                ; ﾕﾆｯﾄ1_ｽﾃｯﾌﾟ動作可
AND B026                 ; 038)ｽﾃｰｼﾞﾁｪｯｸ要求(有効化要求)
INC D1000                ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
LD M1009                 ; U1S09
AND M1479                ; ﾕﾆｯﾄ1_ｽﾃｯﾌﾟ動作可
ANB B026                 ; 038)ｽﾃｰｼﾞﾁｪｯｸ要求(有効化要求)
MOV K1 D1000             ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
;ﾊﾞｰｺｰﾄﾞ読み取り位置へ
LD M1010                 ; U1S10
ANB M1240                ; RB1位置決め指令
AND M1479                ; ﾕﾆｯﾄ1_ｽﾃｯﾌﾟ動作可
MPS
MOV D1031 D1024          ; RB1_ｺｰﾄﾞ読取位置Pos指定  RB1_移動先POS_NO.
MPP
AND= D1031 D1024         ; RB1_ｺｰﾄﾞ読取位置Pos指定  RB1_移動先POS_NO.
INC D1000                ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
;（ＣＴ短縮のため、移動中から読取要求をたてる。その後の浮き検知で戻った場合は、ＰＣへデータ消去する処理をかける）
LD M1011                 ; U1S11_BCR位置移動指令
MPS
LD M1479                 ; ﾕﾆｯﾄ1_ｽﾃｯﾌﾟ動作可
AND M1240                ; RB1位置決め指令
AND M1241                ; RB1位置決め完了
AND M1451                ; RB1_ｺｰﾄﾞ読取位置_P-D1031
AND M1401                ; ﾊﾞｰｺｰﾄﾞ読み取り中
ANL
INC D1000                ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
MRD
LD M1154                 ; ｺｰﾄﾞ読取ﾕﾆｯﾄ1-2起動中
OR M1401                 ; ﾊﾞｰｺｰﾄﾞ読み取り中
ANL
OUT M1401                ; ﾊﾞｰｺｰﾄﾞ読み取り中
MPP
LDB M1154                ; ｺｰﾄﾞ読取ﾕﾆｯﾄ1-2起動中
ANB M1401                ; ﾊﾞｰｺｰﾄﾞ読み取り中
ANB W01.1                ; 基板投入不可
ANB W01.2                ; 製品IDｴﾗｰﾀﾞｲｱﾛｸﾞ要求
ANL
OUT M1400                ; ﾊﾞｰｺｰﾄﾞ読み取り要求FLG
;<h1/>__S12_ﾜｰｸ浮きﾁｪｯｸ
LD M1012                 ; U1S12
ANB M1240                ; RB1位置決め指令
MPS
TMR K121 K3              ; 浮検知ﾃﾞｨﾚｲ
MPP
LD T121                  ; 浮検知ﾃﾞｨﾚｲ
AND M1479                ; ﾕﾆｯﾄ1_ｽﾃｯﾌﾟ動作可
ANL
MPS
LD T102                  ; 給材部ﾜｰｸ浮き確認(ON=OK)
OR M35                   ; 空運転ﾓｰﾄﾞ
ANL
MOV K14 D1000            ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
MPP
LDB T102                 ; 給材部ﾜｰｸ浮き確認(ON=OK)
ANB M35                  ; 空運転ﾓｰﾄﾞ
ANL
MOV K13 D1000            ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
; 浮検知
LD M1013                 ; U1S13_浮検知
ANPB M1013               ; U1S13_浮検知
AND T60                  ; 投入部ﾗｲﾄｶｰﾃﾝ確認ﾀｲﾏ
ANB M130                 ; 一時停止
AND B029                 ; 041)投入部ﾜｰｸ浮き異常
ANB M1154                ; ｺｰﾄﾞ読取ﾕﾆｯﾄ1-2起動中
AND T105                 ; 給材部ﾜｰｸ無し確認
MOV K40 D1000            ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
;<h1/>__S14_ﾊﾞｰｺｰﾄﾞ読み取り結果
LD M1014                 ; U1S14_ﾊﾞｰｺｰﾄﾞ読取要求
AND M1479                ; ﾕﾆｯﾄ1_ｽﾃｯﾌﾟ動作可
INC D1000                ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
LD M1015                 ; U1S15
ANB M1154                ; ｺｰﾄﾞ読取ﾕﾆｯﾄ1-2起動中
MPS
LD M1404                 ; ID異常時  ｻｲｸﾙ停止選択
OR M1405                 ; ID異常時　取出し選択
OR M1407                 ; BCR読み取れなかった異常
ANL
MOV K16 D1000            ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
MPP
AND M1402                ; ﾊﾞｰｺｰﾄﾞ読取_正常終了
MOV K20 D1000            ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
@MOV K1 D1201            ; 投入部1_ﾜｰｸ有無記憶
;<h1/>__S16_ﾜｰｸ投入NG処理
;　　ここでワーク投入位置へ移動
LD M1016                 ; U1S16
AND M1479                ; ﾕﾆｯﾄ1_ｽﾃｯﾌﾟ動作可
ANB M1240                ; RB1位置決め指令
MPS
MOV D1030 D1024          ; RB1_ﾜｰｸ投入位置Pos指定  RB1_移動先POS_NO.
MPP
AND= D1030 D1024         ; RB1_ﾜｰｸ投入位置Pos指定  RB1_移動先POS_NO.
INC D1000                ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
LD M1017                 ; U1S17_ﾜｰｸ投入位置移動
AND M1240                ; RB1位置決め指令
AND M1241                ; RB1位置決め完了
AND M1450                ; RB1_ﾜｰｸ投入位置_P2
INC D1000                ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
LD M1018                 ; U1S18_ﾜｰｸ投入NG異常
AND B023                 ; 035)ﾜｰｸ投入NG異常
INC D1000                ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
LD M1019                 ; U1S19_NGﾗﾝﾌﾟ点灯
AND T115                 ; 投入部ﾗｲﾄｶｰﾃﾝOK
ANB M130                 ; 一時停止
ANB B023                 ; 035)ﾜｰｸ投入NG異常
ANB W00.2                ; PC Busy
AND T105                 ; 給材部ﾜｰｸ無し確認
MOV K63 D1000            ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
;<h1/>__S20_ﾜｰｸ投入位置へ
LD M1020                 ; U1S20
ANB M1240                ; RB1位置決め指令
AND M1479                ; ﾕﾆｯﾄ1_ｽﾃｯﾌﾟ動作可
MPS
MOV K1 D1024             ; RB1_移動先POS_NO.
MPP
AND= K1 D1024            ; RB1_移動先POS_NO.
INC D1000                ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
LD M1021                 ; U1S21_ﾜｰｸ受渡し位置移動
AND M1240                ; RB1位置決め指令
AND M1241                ; RB1位置決め完了
AND M1452                ; RB1_搬送RBへﾜｰｸ受渡位置_P1
INC D1000                ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
LD M1022                 ; U1S22
ANB M1240                ; RB1位置決め指令
MPS
LD X1281                 ; 給材引込部ﾜｰｸ有無確認(ON=有)
OR M35                   ; 空運転ﾓｰﾄﾞ
ANL
MOV K30 D1000            ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
MPP
LDB X1281                ; 給材引込部ﾜｰｸ有無確認(ON=有)
ANB M35                  ; 空運転ﾓｰﾄﾞ
ANL
MOV K23 D1000            ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
;__S23_ﾜｰｸ搬送異常
LD M1023                 ; U1S23_ﾜｰｸ搬送異常
AND B028                 ; 040)ﾜｰｸ搬送異常
INC D1000                ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
LD M1024                 ; U1S24
AND T115                 ; 投入部ﾗｲﾄｶｰﾃﾝOK
AND M1479                ; ﾕﾆｯﾄ1_ｽﾃｯﾌﾟ動作可
ANB B028                 ; 040)ﾜｰｸ搬送異常
MOV K63 D1000            ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
;<h1/>__S30_受渡しステージ選択
LD M1030                 ; U1S30
INC D1000                ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
LD M1031                 ; U1S31
INC D1000                ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
LD M1032                 ; U1S32
INC D1000                ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
;　4ST化(搬送RBがダブルスライダー)になった場合、均等に振り分けられるようなﾌﾗｸﾞを作成する。
LD M1033                 ; U1S33_受渡ｽﾃｰｼﾞ確定
LD M1408                 ; ST1-2側供給するﾌﾗｸﾞ
OR M1409                 ; ST3-4側供給するﾌﾗｸﾞ
ANL
INC D1000                ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
LD M1033                 ; U1S33_受渡ｽﾃｰｼﾞ確定
OR M1408                 ; ST1-2側供給するﾌﾗｸﾞ
AND M1074                ; ﾕﾆｯﾄ1-1起動中
ANB M1409                ; ST3-4側供給するﾌﾗｸﾞ
OUT M1408                ; ST1-2側供給するﾌﾗｸﾞ
LD M1033                 ; U1S33_受渡ｽﾃｰｼﾞ確定
AND CR2003               ; 常時OFF
OR M1409                 ; ST3-4側供給するﾌﾗｸﾞ
AND M1074                ; ﾕﾆｯﾄ1-1起動中
ANB M1408                ; ST1-2側供給するﾌﾗｸﾞ
OUT M1409                ; ST3-4側供給するﾌﾗｸﾞ
;<h1/>__S34_ﾜｰｸ除材要求
;ﾌﾗｸﾞ受取完了とﾜｰｸ受取完了を入れる
;ﾃﾞｰﾀｼﾌﾄは、搬送側にて行う
LD M1034                 ; U1S34_ﾜｰｸ除材要求
MPS
LD M1410                 ; 供給→搬送RB1_除材要求
AND M3300                ; 搬送→供給_取出開始
LD M1412                 ; 供給→搬送RB2_除材要求
AND M5300
ORL
ANL
INC D1000                ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
MRD
LD M1408                 ; ST1-2側供給するﾌﾗｸﾞ
OR M1410                 ; 供給→搬送RB1_除材要求
ANL
OUT M1410                ; 供給→搬送RB1_除材要求
MPP
LD M1409                 ; ST3-4側供給するﾌﾗｸﾞ
OR M1412                 ; 供給→搬送RB2_除材要求
ANL
OUT M1412                ; 供給→搬送RB2_除材要求
;ﾜｰｸ受取完了ﾁｪｯｸ
LD M1035                 ; U1S35_ﾜｰｸ除材完了
MPS
LD M1408                 ; ST1-2側供給するﾌﾗｸﾞ
LD M3301                 ; 搬送→供給取出完了
OR M1411                 ; 供給→搬送RB1_取出完了受取り
ANL
ANL
MPS
LDB M3300                ; 搬送→供給_取出開始
ANB M3301                ; 搬送→供給取出完了
ANL
INC D1000                ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
MPP
OUT M1411                ; 供給→搬送RB1_取出完了受取り
MPP
LD M1409                 ; ST3-4側供給するﾌﾗｸﾞ
LD M5301
OR M1413                 ; 供給→搬送RB2_除材完了受取り
ANL
ANL
MPS
LDB M5300
ANB M5301
ANL
INC D1000                ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
MPP
OUT M1413                ; 供給→搬送RB2_除材完了受取り
LD M1036                 ; U1S36_
AND M1479                ; ﾕﾆｯﾄ1_ｽﾃｯﾌﾟ動作可
INC D1000                ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
LD M1037                 ; U1S37_
AND M1479                ; ﾕﾆｯﾄ1_ｽﾃｯﾌﾟ動作可
MPS
ANB X1281                ; 給材引込部ﾜｰｸ有無確認(ON=有)
MOV K40 D1000            ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
MPP
AND X1281                ; 給材引込部ﾜｰｸ有無確認(ON=有)
INC D1000                ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
;　搬送RBへ受渡異常
LD M1038                 ; U1S38_ﾜｰｸ受渡し失敗
AND B022                 ; 034)供給部ﾜｰｸ受渡し失敗
INC D1000                ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
LD M1039                 ; U1S39
AND T115                 ; 投入部ﾗｲﾄｶｰﾃﾝOK
AND M1479                ; ﾕﾆｯﾄ1_ｽﾃｯﾌﾟ動作可
ANB B022                 ; 034)供給部ﾜｰｸ受渡し失敗
MOV K63 D1000            ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
;<h1/>__S40_ﾜｰｸ投入位置へ移動
LD M1040                 ; U1S40
ANB M1240                ; RB1位置決め指令
MPS
MOV K2 D1024             ; RB1_移動先POS_NO.
MPP
AND= K2 D1024            ; RB1_移動先POS_NO.
INC D1000                ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
LD M1041                 ; U1S41_ﾜｰｸ投入位置へ移動
AND M1240                ; RB1位置決め指令
AND M1241                ; RB1位置決め完了
AND M1450                ; RB1_ﾜｰｸ投入位置_P2
INC D1000                ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
LD M1042                 ; U1S42
INC D1000                ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
;　　浮き異常の場合投入部のデータを削除する。
LD M1043                 ; U1S43_ﾜｰｸ浮きﾘｾｯﾄ待ち
MPS
ANB B029                 ; 041)投入部ﾜｰｸ浮き異常
INC D1000                ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
MPP
AND B029                 ; 041)投入部ﾜｰｸ浮き異常
MOV K46 D1000            ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
;　　浮き検知時ﾜｰｸ情報削除
LD M1046                 ; U1S46_PCﾃﾞｰﾀ削除ﾌﾗｸﾞ
ANB B029                 ; 041)投入部ﾜｰｸ浮き異常
MPS
LD M1360                 ; 投入部PCﾃﾞｰﾀ削除ﾌﾗｸﾞ
AND W01.14               ; ｲﾝﾃﾞｯｸｽﾃﾞｰﾀｸﾘｱ完了
ANL
MOV K44 D1000            ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
MPP
LDB W0101.14             ; ｲﾝﾃﾞｯｸｽﾃﾞｰﾀｸﾘｱ要求
OR M1360                 ; 投入部PCﾃﾞｰﾀ削除ﾌﾗｸﾞ
ANL
OUT M1360                ; 投入部PCﾃﾞｰﾀ削除ﾌﾗｸﾞ
@MOV K1 W0148            ; ﾃﾞｰﾀｸﾘｱｲﾝﾃﾞｯｸｽNo
LD M1044                 ; U1S44_
MOV K63 D1000            ; ﾕﾆｯﾄ1-1自動運転ｽﾃｯﾌﾟ
;<h1/>◇_BCR読取状態・動作条件(補助)
LD CR2002                ; 常時ON
OUT M1150                ; ﾕﾆｯﾄ1-2原点_ﾊﾞｰｺｰﾄﾞ読取
LDB CR2003               ; 常時OFF
INV
OUT M1151                ; ﾕﾆｯﾄ1-2異常
LD M1150                 ; ﾕﾆｯﾄ1-2原点_ﾊﾞｰｺｰﾄﾞ読取
ANB M1154                ; ｺｰﾄﾞ読取ﾕﾆｯﾄ1-2起動中
AND M1479                ; ﾕﾆｯﾄ1_ｽﾃｯﾌﾟ動作可
AND M300                 ; PC通信正常
OUT M1152                ; ﾕﾆｯﾄ1-2起動条件
LDB M50                  ; 運転準備
OR B029                  ; 041)投入部ﾜｰｸ浮き異常
OR M1486                 ; ﾕﾆｯﾄ1ｻｲｸﾙ停止異常
OR T15                   ; 強制停止
OUT M1153                ; ﾕﾆｯﾄ1-2起動OFF
LD M1400                 ; ﾊﾞｰｺｰﾄﾞ読み取り要求FLG
AND M1152                ; ﾕﾆｯﾄ1-2起動条件
OR M1154                 ; ｺｰﾄﾞ読取ﾕﾆｯﾄ1-2起動中
ANB M1153                ; ﾕﾆｯﾄ1-2起動OFF
ANB M1143                ; BCR_StepEnd
OUT M1154                ; ｺｰﾄﾞ読取ﾕﾆｯﾄ1-2起動中
;ﾕﾆｯﾄ1-2ｻｲｸﾙ停止異常
LDB CR2003               ; 常時OFF
INV
OUT M1155                ; ﾕﾆｯﾄ1-2ｻｲｸﾙ停止異常
;ﾕﾆｯﾄ1-2ｴﾗｰ発生まとめ
LDB CR2003               ; 常時OFF
INV
OUT M1156                ; ﾕﾆｯﾄ1-2ｴﾗｰ発生
;ﾕﾆｯﾄ1-2停止判定
LD= D1001 D1006          ; ﾕﾆｯﾄ1-2自動運転ｽﾃｯﾌﾟ  ﾕﾆｯﾄ1-2動作中判定
ORB M1154                ; ｺｰﾄﾞ読取ﾕﾆｯﾄ1-2起動中
TMR K111 K20             ; ﾕﾆｯﾄ1-2動作無し判定ﾀｲﾏ
LD CR2002                ; 常時ON
MOV D1001 D1006          ; ﾕﾆｯﾄ1-2自動運転ｽﾃｯﾌﾟ  ﾕﾆｯﾄ1-2動作中判定
LD T111                  ; ﾕﾆｯﾄ1-2動作無し判定ﾀｲﾏ
LD CR2003                ; 常時OFF
AND M31                  ; 手動ﾓｰﾄﾞ
ORL
OUT M1157                ; ﾕﾆｯﾄ1-2動作無し
;□
;□　ﾕﾆｯﾄ1-2ステップ開始
;□
LD CR2002                ; 常時ON
FMOV K0 M1080 K4         ; BCR_S00
LDB M1154                ; ｺｰﾄﾞ読取ﾕﾆｯﾄ1-2起動中
MOV K0 D1001             ; ﾕﾆｯﾄ1-2自動運転ｽﾃｯﾌﾟ
LD M1154                 ; ｺｰﾄﾞ読取ﾕﾆｯﾄ1-2起動中
MOV D1001 Z1             ; ﾕﾆｯﾄ1-2自動運転ｽﾃｯﾌﾟ
SET M1080:Z1             ; BCR_S00
;　　条件分岐
LD M1080                 ; BCR_S00
AND M1479                ; ﾕﾆｯﾄ1_ｽﾃｯﾌﾟ動作可
INC D1001                ; ﾕﾆｯﾄ1-2自動運転ｽﾃｯﾌﾟ
LD M1081                 ; BCR_S01
AND M1479                ; ﾕﾆｯﾄ1_ｽﾃｯﾌﾟ動作可
INC D1001                ; ﾕﾆｯﾄ1-2自動運転ｽﾃｯﾌﾟ
LD M1082                 ; BCR_S02
AND M1479                ; ﾕﾆｯﾄ1_ｽﾃｯﾌﾟ動作可
INC D1001                ; ﾕﾆｯﾄ1-2自動運転ｽﾃｯﾌﾟ
;　　ｺｰﾄﾞﾘｰﾀﾞｰへﾄﾘｶﾞｰ発信
LD M1083                 ; BCR_S03_ｽｷｬﾅ読取要求
LD W01.0                 ; ｽｷｬﾅ読込完了
OR W01.2                 ; 製品IDｴﾗｰﾀﾞｲｱﾛｸﾞ要求
OR M35                   ; 空運転ﾓｰﾄﾞ
OR M3                    ; OFFLINE_MODE
ANL
INC D1001                ; ﾕﾆｯﾄ1-2自動運転ｽﾃｯﾌﾟ
LD M1083                 ; BCR_S03_ｽｷｬﾅ読取要求
OR W0101.0               ; ｽｷｬﾅ読取要求
AND M1154                ; ｺｰﾄﾞ読取ﾕﾆｯﾄ1-2起動中
OUT W0101.0              ; ｽｷｬﾅ読取要求
LD M1084                 ; BCR_S04
INC D1001                ; ﾕﾆｯﾄ1-2自動運転ｽﾃｯﾌﾟ
LD M1085                 ; BCR_S05
INC D1001                ; ﾕﾆｯﾄ1-2自動運転ｽﾃｯﾌﾟ
;<h1/>__S06_受取りﾃﾞｰﾀ格納
LD M1086                 ; BCR_S06_読込みﾃﾞｰﾀ格納
LD M1402                 ; ﾊﾞｰｺｰﾄﾞ読取_正常終了
OR M1403                 ; ﾊﾞｰｺｰﾄﾞ読取_異常終了
ANL
INC D1001                ; ﾕﾆｯﾄ1-2自動運転ｽﾃｯﾌﾟ
LDP M1086                ; BCR_S06_読込みﾃﾞｰﾀ格納
MPS
LD M3                    ; OFFLINE_MODE
OR M35                   ; 空運転ﾓｰﾄﾞ
ANL
DW K7 W020               ; 投入ﾊﾟﾚｯﾄID
CON
DW K7 W021               ; ﾘｰｸ上治具ID
CON
DW K7 W022               ; ﾘｰｸ下治具ID
CON
DW K7 W023               ; 電特ﾊﾟﾚｯﾄID
CON
DW K7 W024               ; 電特ﾃｽﾄﾍｯﾄﾞID
CON
DW K7 W025               ; 搬送ﾛﾎﾞｯﾄNo.
CON
DW K50 W026              ; ﾘｰｸﾊﾞｲﾊﾟｽ回路開放時間
MRD
BMOV W020 D1210 K16      ; 投入ﾊﾟﾚｯﾄID  投入部1_投入ﾊﾟﾚｯﾄID
MRD
LD W01.3                 ; Break MODE品(ONで)
ANB M98                  ; Break品優先排出変更ﾌﾗｸﾞ
ANL
MOV K1 D1207             ; 投入部_BreakMode品(ONで)
MRD
AND W01.6                ; 電気特性検査再投入品
MOV K1 D1206             ; 投入部1_再検査品ﾌﾗｸﾞ(ON=再検査)
MPS
AND= W02A K13            ; 電気特性検査再投入ステージ
MOV K4 D1205             ; 投入部1_再検査品st
MRD
AND= W02A K12            ; 電気特性検査再投入ステージ
MOV K3 D1205             ; 投入部1_再検査品st
MRD
AND= W02A K11            ; 電気特性検査再投入ステージ
MOV K2 D1205             ; 投入部1_再検査品st
MPP
AND= W02A K10            ; 電気特性検査再投入ステージ
MOV K1 D1205             ; 投入部1_再検査品st
MPP
ANB W01.6                ; 電気特性検査再投入品
MOV K0 D1206             ; 投入部1_再検査品ﾌﾗｸﾞ(ON=再検査)
MOV K0 D1205             ; 投入部1_再検査品st
LDP M1086                ; BCR_S06_読込みﾃﾞｰﾀ格納
ANB W01.1                ; 基板投入不可
ANB W01.2                ; 製品IDｴﾗｰﾀﾞｲｱﾛｸﾞ要求
OR M1402                 ; ﾊﾞｰｺｰﾄﾞ読取_正常終了
AND M1074                ; ﾕﾆｯﾄ1-1起動中
OUT M1402                ; ﾊﾞｰｺｰﾄﾞ読取_正常終了
LDP M1086                ; BCR_S06_読込みﾃﾞｰﾀ格納
LD W01.1                 ; 基板投入不可
OR W01.2                 ; 製品IDｴﾗｰﾀﾞｲｱﾛｸﾞ要求
ANL
OR M1403                 ; ﾊﾞｰｺｰﾄﾞ読取_異常終了
AND M1074                ; ﾕﾆｯﾄ1-1起動中
OUT M1403                ; ﾊﾞｰｺｰﾄﾞ読取_異常終了
;　ﾊﾞｰｺｰﾄﾞ読取結果OK/NG分岐
LD M1087                 ; BCR_S07_読取ﾄﾘｶﾞｰOFF指令
MPS
AND M1402                ; ﾊﾞｰｺｰﾄﾞ読取_正常終了
INC D1001                ; ﾕﾆｯﾄ1-2自動運転ｽﾃｯﾌﾟ
MPP
AND M1403                ; ﾊﾞｰｺｰﾄﾞ読取_異常終了
MOV K30 D1001            ; ﾕﾆｯﾄ1-2自動運転ｽﾃｯﾌﾟ
;<h1/>__S08_バーコード読込正常処理
LD M1088                 ; BCR_S08
INC D1001                ; ﾕﾆｯﾄ1-2自動運転ｽﾃｯﾌﾟ
MPS
@INC D1200               ; 投入部1_INDEX NO.
MPP
AND> D1200 K10           ; 投入部1_INDEX NO.
DW K1 D1200              ; 投入部1_INDEX NO.
LD M1089                 ; BCR_S09_
INC D1001                ; ﾕﾆｯﾄ1-2自動運転ｽﾃｯﾌﾟ
LD M1090                 ; BCR_S10_
INC D1001                ; ﾕﾆｯﾄ1-2自動運転ｽﾃｯﾌﾟ
;<h1/>__S11_IDﾁｪｯｸ_
LD M1091                 ; BCR_S11_ｽﾃｰｼﾞ有効確認
MPS
LD L1100                 ; ﾘｰｸst2_有効状態
LD= D1211 D6100          ; 投入部1_ﾘｰｸ上治具ID  LeakST2_上治具ID
AND= D1212 D6101         ; 投入部1_ﾘｰｸ下治具ID  LeakST2_下治具ID
OR M35                   ; 空運転ﾓｰﾄﾞ
OR CR2003                ; 常時OFF
ANL
LD L1300                 ; ﾘｰｸst1_有効状態
LD= D1211 D7100          ; 投入部1_ﾘｰｸ上治具ID  LeakST1_上治具ID
AND= D1212 D7101         ; 投入部1_ﾘｰｸ下治具ID  LeakST1_下治具ID
OR M35                   ; 空運転ﾓｰﾄﾞ
OR CR2003                ; 常時OFF
ANL
ORL
LD L1500                 ; ﾘｰｸst3_有効状態
LD= D1211 D8100          ; 投入部1_ﾘｰｸ上治具ID  LeakST3_上治具ID
AND= D1212 D8101         ; 投入部1_ﾘｰｸ下治具ID  LeakST3_下治具ID
OR M35                   ; 空運転ﾓｰﾄﾞ
OR CR2003                ; 常時OFF
ANL
ORL
LD L1700                 ; ﾘｰｸst4_有効状態
LD= D1211 D9100          ; 投入部1_ﾘｰｸ上治具ID
AND= D1212 D9101         ; 投入部1_ﾘｰｸ下治具ID
OR M35                   ; 空運転ﾓｰﾄﾞ
OR CR2003                ; 常時OFF
ANL
ORL
OR L10                   ; ﾘｰｸ検査有無(0_有/1_無)
LD L1200                 ; FINALST2_有効状態
LD= D1205 K0             ; 投入部1_再検査品st
OR= D1205 K2             ; 投入部1_再検査品st
AND= D1213 D6601         ; 投入部1_電特ﾊﾟﾚｯﾄID  FinalST2_ﾊﾟﾚｯﾄID
AND= D1214 D6600         ; 投入部1_電特ﾃｽﾄﾍｯﾄﾞID  FinalST2_ｺﾝﾀｸﾄﾍｯﾄﾞID
OR M35                   ; 空運転ﾓｰﾄﾞ
ANL
LD L1400                 ; FINALST1_有効状態
LD= D1205 K0             ; 投入部1_再検査品st
OR= D1205 K1             ; 投入部1_再検査品st
AND= D1213 D7601         ; 投入部1_電特ﾊﾟﾚｯﾄID  FinalST1_ﾊﾟﾚｯﾄID
AND= D1214 D7600         ; 投入部1_電特ﾃｽﾄﾍｯﾄﾞID  FinalST1_ｺﾝﾀｸﾄﾍｯﾄﾞID
OR M35                   ; 空運転ﾓｰﾄﾞ
ANL
ORL
LD L1600                 ; FINALST3_有効状態
LD= D1205 K0             ; 投入部1_再検査品st
OR= D1205 K3             ; 投入部1_再検査品st
AND= D1213 D8601         ; 投入部1_電特ﾊﾟﾚｯﾄID  FinalST3_ﾊﾟﾚｯﾄID
AND= D1214 D8600         ; 投入部1_電特ﾃｽﾄﾍｯﾄﾞID  FinalST3_ｺﾝﾀｸﾄﾍｯﾄﾞID
OR M35                   ; 空運転ﾓｰﾄﾞ
ANL
ORL
LD L1800                 ; FINALST4_有効状態
LD= D1205 K0             ; 投入部1_再検査品st
OR= D1205 K4             ; 投入部1_再検査品st
AND= D1213 D9601         ; 投入部1_電特ﾊﾟﾚｯﾄID
AND= D1214 D9600         ; 投入部1_電特ﾃｽﾄﾍｯﾄﾞID
OR M35                   ; 空運転ﾓｰﾄﾞ
ANL
ORL
OR L11                   ; ﾌｧｲﾅﾙ検査有無(0_有/1_無)
ANL
ANL
OUT M1421                ; ST受入れ準備OK
MRD
ANB M1421                ; ST受入れ準備OK
OUT M1420                ; ST受入れ準備NG
MPP
LD M1421                 ; ST受入れ準備OK
ANB B025                 ; 037)ID一致ｽﾃｰｼﾞ無
ANL
INC D1001                ; ﾕﾆｯﾄ1-2自動運転ｽﾃｯﾌﾟ
LD M1092                 ; BCR_S12
MOV K63 D1001            ; ﾕﾆｯﾄ1-2自動運転ｽﾃｯﾌﾟ
;<h1/>__S30_読取_ID_NG
;　　ﾀﾞｲｱﾛｸﾞ要求有無ﾁｪｯｸ
LD M1110                 ; BCR_S30_ID読取_NG処理
MPS
AND W01.2                ; 製品IDｴﾗｰﾀﾞｲｱﾛｸﾞ要求
INC D1001                ; ﾕﾆｯﾄ1-2自動運転ｽﾃｯﾌﾟ
MPP
LDB W01.2                ; 製品IDｴﾗｰﾀﾞｲｱﾛｸﾞ要求
AND M1407                ; BCR読み取れなかった異常
ANL
MOV K63 D1001            ; ﾕﾆｯﾄ1-2自動運転ｽﾃｯﾌﾟ
LD M1110                 ; BCR_S30_ID読取_NG処理
ANB W01.2                ; 製品IDｴﾗｰﾀﾞｲｱﾛｸﾞ要求
OR M1407                 ; BCR読み取れなかった異常
AND M1074                ; ﾕﾆｯﾄ1-1起動中
OUT M1407                ; BCR読み取れなかった異常
LD M1111                 ; BCR_S31
MPS
LD M1404                 ; ID異常時  ｻｲｸﾙ停止選択
OR M1405                 ; ID異常時　取出し選択
OR M1406                 ; ID異常時　段取り替え選択
ANL
INC D1001                ; ﾕﾆｯﾄ1-2自動運転ｽﾃｯﾌﾟ
MPP
OUT B151F                ; ID異常_選択Window_Open
LD M1111                 ; BCR_S31
ANP B1022                ; Cycle Stopｻｲｸﾙ停止選択_Tws
ANB B1020                ; REMOVE取り出し選択_Tws
ANB B1021                ; JIG_CHANGE段取り替え選択_Tws
OR M1404                 ; ID異常時  ｻｲｸﾙ停止選択
AND M1074                ; ﾕﾆｯﾄ1-1起動中
ANB M1405                ; ID異常時　取出し選択
ANB M1406                ; ID異常時　段取り替え選択
OUT M1404                ; ID異常時  ｻｲｸﾙ停止選択
LD M1111                 ; BCR_S31
ANP B1020                ; REMOVE取り出し選択_Tws
ANB B1021                ; JIG_CHANGE段取り替え選択_Tws
ANB B1022                ; Cycle Stopｻｲｸﾙ停止選択_Tws
OR M1405                 ; ID異常時　取出し選択
AND M1074                ; ﾕﾆｯﾄ1-1起動中
ANB M1404                ; ID異常時  ｻｲｸﾙ停止選択
ANB M1406                ; ID異常時　段取り替え選択
OUT M1405                ; ID異常時　取出し選択
LD M1111                 ; BCR_S31
ANP B1021                ; JIG_CHANGE段取り替え選択_Tws
ANB B1020                ; REMOVE取り出し選択_Tws
ANB B1022                ; Cycle Stopｻｲｸﾙ停止選択_Tws
OR M1406                 ; ID異常時　段取り替え選択
AND M1074                ; ﾕﾆｯﾄ1-1起動中
ANB M1404                ; ID異常時  ｻｲｸﾙ停止選択
ANB M1405                ; ID異常時　取出し選択
OUT M1406                ; ID異常時　段取り替え選択
;　　段取り時以外はここで終了
LD M1112                 ; BCR_S32_ID読取_NG_処理選択完了
MPS
ANB M1406                ; ID異常時　段取り替え選択
MOV K63 D1001            ; ﾕﾆｯﾄ1-2自動運転ｽﾃｯﾌﾟ
MPP
AND M1406                ; ID異常時　段取り替え選択
INC D1001                ; ﾕﾆｯﾄ1-2自動運転ｽﾃｯﾌﾟ
;　　段取り処理
LDB L1100                ; ﾘｰｸst2_有効状態
ANB L1300                ; ﾘｰｸst1_有効状態
ANB L1500                ; ﾘｰｸst3_有効状態
ANB L1700                ; ﾘｰｸst4_有効状態
INV
OUT M1419                ; ｽﾃｰｼﾞ有効確認
LD M1113                 ; BCR_S33
MPS
ANB M1419                ; ｽﾃｰｼﾞ有効確認
INC D1001                ; ﾕﾆｯﾄ1-2自動運転ｽﾃｯﾌﾟ
MPP
AND W01.0                ; ｽｷｬﾅ読込完了
MOV K6 D1001             ; ﾕﾆｯﾄ1-2自動運転ｽﾃｯﾌﾟ
LD M1114                 ; BCR_S34
AND M1419                ; ｽﾃｰｼﾞ有効確認
AND W01.0                ; ｽｷｬﾅ読込完了
MOV K6 D1001             ; ﾕﾆｯﾄ1-2自動運転ｽﾃｯﾌﾟ
;<h1/>□_原点復帰回路
LD CR2002                ; 常時ON
FMOV K0 M1250 K3         ; STEP0
LDB M1484                ; ﾕﾆｯﾄ1原点復帰中
MOV K0 D1010             ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
LD M1484                 ; ﾕﾆｯﾄ1原点復帰中
MOV D1010 Z1             ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
SET M1250:Z1             ; STEP0
;原点復帰ｻｲｸﾙ監視
LD M1484                 ; ﾕﾆｯﾄ1原点復帰中
ANB X100C                ; RB1 #01_RX00C_運転実行中
TMR K100 K200            ; ﾕﾆｯﾄ1原点復帰ﾀｲﾑｱｳﾄ
;原点復帰ステップ開始
LD M1250                 ; STEP0
AND T115                 ; 投入部ﾗｲﾄｶｰﾃﾝOK
AND M1479                ; ﾕﾆｯﾄ1_ｽﾃｯﾌﾟ動作可
INC D1010                ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
;搬送部原点復帰待ち
LD M1251                 ; STEP1
AND T115                 ; 投入部ﾗｲﾄｶｰﾃﾝOK
AND M1479                ; ﾕﾆｯﾄ1_ｽﾃｯﾌﾟ動作可
AND L309                 ; Z_搬送高さ(P9)
LD M4480                 ; 搬送2_搬送高さ
ORB M99                  ; 能拡後対応FLG
ANL
INC D1010                ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
LD M1252                 ; STEP2
AND T115                 ; 投入部ﾗｲﾄｶｰﾃﾝOK
AND M1479                ; ﾕﾆｯﾄ1_ｽﾃｯﾌﾟ動作可
MPS
AND X100B                ; #01_RX00B_ORG原点復帰完了状態
MOV K4 D1010             ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
MPP
ANB X100B                ; #01_RX00B_ORG原点復帰完了状態
INC D1010                ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
LD M1253                 ; STEP3_搬送ｽﾗｲﾀﾞ後退指令
AND T115                 ; 投入部ﾗｲﾄｶｰﾃﾝOK
AND M1479                ; ﾕﾆｯﾄ1_ｽﾃｯﾌﾟ動作可
AND Y200B                ; #01_RY00B_原点復帰
AND X100B                ; #01_RX00B_ORG原点復帰完了状態
INC D1010                ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
LD M1254                 ; STEP4
ANB M1241                ; RB1位置決め完了
AND M1479                ; ﾕﾆｯﾄ1_ｽﾃｯﾌﾟ動作可
MPS
MOV D1030 D1024          ; RB1_ﾜｰｸ投入位置Pos指定  RB1_移動先POS_NO.
MPP
AND= D1030 D1024         ; RB1_ﾜｰｸ投入位置Pos指定  RB1_移動先POS_NO.
INC D1010                ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
LD M1255                 ; STEP5_ﾜｰｸ投入位置移動指令
AND M1240                ; RB1位置決め指令
AND M1241                ; RB1位置決め完了
AND M1450                ; RB1_ﾜｰｸ投入位置_P2
INC D1010                ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
LD M1256                 ; STEP6
ANB M1240                ; RB1位置決め指令
INC D1010                ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
;　　ﾜｰｸﾁｪｯｸ
LD M1257                 ; STEP7
AND T115                 ; 投入部ﾗｲﾄｶｰﾃﾝOK
AND M1479                ; ﾕﾆｯﾄ1_ｽﾃｯﾌﾟ動作可
MPS
ANB X1280                ; 給材部ﾜｰｸ有無確認(ON=有)
MOV K10 D1010            ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
MPP
AND X1280                ; 給材部ﾜｰｸ有無確認(ON=有)
INC D1010                ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
;　　ﾜｰｸ除去要求
LD M1258                 ; STEP8_給材部ﾜｰｸ除去要求
AND T115                 ; 投入部ﾗｲﾄｶｰﾃﾝOK
AND M1479                ; ﾕﾆｯﾄ1_ｽﾃｯﾌﾟ動作可
INC D1010                ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
LD M1259                 ; STEP9
AND T115                 ; 投入部ﾗｲﾄｶｰﾃﾝOK
AND M1479                ; ﾕﾆｯﾄ1_ｽﾃｯﾌﾟ動作可
INC D1010                ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
LD M1260                 ; STEP10
AND T115                 ; 投入部ﾗｲﾄｶｰﾃﾝOK
AND M1479                ; ﾕﾆｯﾄ1_ｽﾃｯﾌﾟ動作可
MOV K45 D1010            ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
;原点復帰終了
LD M1295                 ; STEP45
AND M1480                ; ﾕﾆｯﾄ1原点
INC D1010                ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
FMOV K0 D1200 K100       ; 投入部1_INDEX NO.
LD M1296                 ; STEP46
ANB M82                  ; 原点復帰開始
MOV K47 D1010            ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
;<h1/>□_手動回路
;　　ｲﾝﾀｰﾛｯｸ
;給材ｽﾗｲﾀﾞ待機位置移動
LD M1243                 ; RB1位置決めSub起動条件
LD T115                  ; 投入部ﾗｲﾄｶｰﾃﾝOK
OR CR2002                ; 常時ON
ANL
AND L309                 ; Z_搬送高さ(P9)
ANB M1301                ; 給材RB_ﾜｰｸ投入位置移動
ANB M1306                ; 給材ｽﾗｲﾀﾞ_ｺｰﾄﾞﾘｰﾀﾞｰ位置移動
ANB M1311                ; 給材ｽﾗｲﾀﾞ_ﾜｰｸ受渡し位置移動
OUT M1300                ; 給材ｽﾗｲﾀﾞ_ﾜｰｸ投入位置移動可
;ｺｰﾄﾞﾘｰﾀﾞｰ読取位置移動
LD M1243                 ; RB1位置決めSub起動条件
LD T115                  ; 投入部ﾗｲﾄｶｰﾃﾝOK
OR CR2002                ; 常時ON
ANL
AND L309                 ; Z_搬送高さ(P9)
ANB M1301                ; 給材RB_ﾜｰｸ投入位置移動
ANB M1306                ; 給材ｽﾗｲﾀﾞ_ｺｰﾄﾞﾘｰﾀﾞｰ位置移動
ANB M1311                ; 給材ｽﾗｲﾀﾞ_ﾜｰｸ受渡し位置移動
OUT M1305                ; 給材ｽﾗｲﾀﾞ_ｺｰﾄﾞﾘｰﾀﾞｰ位置移動可
;ﾜｰｸ受渡し位置
LD M1243                 ; RB1位置決めSub起動条件
LD T115                  ; 投入部ﾗｲﾄｶｰﾃﾝOK
OR CR2002                ; 常時ON
ANL
AND L309                 ; Z_搬送高さ(P9)
ANB M1301                ; 給材RB_ﾜｰｸ投入位置移動
ANB M1306                ; 給材ｽﾗｲﾀﾞ_ｺｰﾄﾞﾘｰﾀﾞｰ位置移動
ANB M1311                ; 給材ｽﾗｲﾀﾞ_ﾜｰｸ受渡し位置移動
OUT M1310                ; 給材ｽﾗｲﾀﾞ_ﾜｰｸ受渡し位置移動可
LD M31                   ; 手動ﾓｰﾄﾞ
LD T115                  ; 投入部ﾗｲﾄｶｰﾃﾝOK
OR CR2002                ; 常時ON
ANL
AND M32                  ; ﾒｲﾝ手動操作可能条件
ANB M1485                ; ﾕﾆｯﾄ1起動中
ANB M1484                ; ﾕﾆｯﾄ1原点復帰中
MC
;給材ｽﾗｲﾀﾞ待機位置移動
LDP B1080                ; 供給ｽﾗｲﾀﾞ待機位置移動TpSW
AND M1300                ; 給材ｽﾗｲﾀﾞ_ﾜｰｸ投入位置移動可
OR M1301                 ; 給材RB_ﾜｰｸ投入位置移動
ANB M1304                ; 給材RB_ﾜｰｸ投入位置移動終了
OUT M1301                ; 給材RB_ﾜｰｸ投入位置移動
OUT M1302                ; 給材RB_ﾜｰｸ投入位置移動指令
@LDA D1030               ; RB1_ﾜｰｸ投入位置Pos指定
CON
@STA D1024               ; RB1_移動先POS_NO.
LD M1302                 ; 給材RB_ﾜｰｸ投入位置移動指令
AND M1240                ; RB1位置決め指令
AND M1241                ; RB1位置決め完了
AND M1450                ; RB1_ﾜｰｸ投入位置_P2
OR M1303                 ; 給材RB_ﾜｰｸ投入位置移動完了
AND M1301                ; 給材RB_ﾜｰｸ投入位置移動
OUT M1303                ; 給材RB_ﾜｰｸ投入位置移動完了
LD M1303                 ; 給材RB_ﾜｰｸ投入位置移動完了
ANB M1240                ; RB1位置決め指令
ANB M1241                ; RB1位置決め完了
OUT M1304                ; 給材RB_ﾜｰｸ投入位置移動終了
;ｺｰﾄﾞﾘｰﾀﾞｰ読取位置移動
LDP B1081                ; 給材ｽﾗｲﾀﾞ_BCR位置移動TpSW
AND M1305                ; 給材ｽﾗｲﾀﾞ_ｺｰﾄﾞﾘｰﾀﾞｰ位置移動可
OR M1306                 ; 給材ｽﾗｲﾀﾞ_ｺｰﾄﾞﾘｰﾀﾞｰ位置移動
ANB M1309                ; 給材ｽﾗｲﾀﾞ_ｺｰﾄﾞﾘｰﾀﾞｰ位置移動終了
OUT M1306                ; 給材ｽﾗｲﾀﾞ_ｺｰﾄﾞﾘｰﾀﾞｰ位置移動
OUT M1307                ; 給材ｽﾗｲﾀﾞ_ｺｰﾄﾞﾘｰﾀﾞｰ位置移動指令
@LDA D1031               ; RB1_ｺｰﾄﾞ読取位置Pos指定
CON
@STA D1024               ; RB1_移動先POS_NO.
LD M1307                 ; 給材ｽﾗｲﾀﾞ_ｺｰﾄﾞﾘｰﾀﾞｰ位置移動指令
AND M1240                ; RB1位置決め指令
AND M1241                ; RB1位置決め完了
AND M1451                ; RB1_ｺｰﾄﾞ読取位置_P-D1031
OR M1308                 ; 給材ｽﾗｲﾀﾞ_ｺｰﾄﾞﾘｰﾀﾞ移動完了
AND M1306                ; 給材ｽﾗｲﾀﾞ_ｺｰﾄﾞﾘｰﾀﾞｰ位置移動
OUT M1308                ; 給材ｽﾗｲﾀﾞ_ｺｰﾄﾞﾘｰﾀﾞ移動完了
LD M1308                 ; 給材ｽﾗｲﾀﾞ_ｺｰﾄﾞﾘｰﾀﾞ移動完了
ANB M1240                ; RB1位置決め指令
ANB M1241                ; RB1位置決め完了
OUT M1309                ; 給材ｽﾗｲﾀﾞ_ｺｰﾄﾞﾘｰﾀﾞｰ位置移動終了
;ﾜｰｸ受渡し位置
LDP B1082                ; 給材ｽﾗｲﾀﾞ_ﾜｰｸ受渡し位置移動TpSW
AND M1310                ; 給材ｽﾗｲﾀﾞ_ﾜｰｸ受渡し位置移動可
OR M1311                 ; 給材ｽﾗｲﾀﾞ_ﾜｰｸ受渡し位置移動
ANB M1314                ; 給材ｽﾗｲﾀﾞ_ﾜｰｸ受渡し位置移動完了
OUT M1311                ; 給材ｽﾗｲﾀﾞ_ﾜｰｸ受渡し位置移動
OUT M1312                ; 給材ｽﾗｲﾀﾞ_ﾜｰｸ受渡し位置移動指令
@DW K1 D1024             ; RB1_移動先POS_NO.
LD M1312                 ; 給材ｽﾗｲﾀﾞ_ﾜｰｸ受渡し位置移動指令
AND M1240                ; RB1位置決め指令
AND M1241                ; RB1位置決め完了
AND M1452                ; RB1_搬送RBへﾜｰｸ受渡位置_P1
OR M1313                 ; 給材ｽﾗｲﾀﾞ_ﾜｰｸ受渡し位置移動完了
AND M1311                ; 給材ｽﾗｲﾀﾞ_ﾜｰｸ受渡し位置移動
OUT M1313                ; 給材ｽﾗｲﾀﾞ_ﾜｰｸ受渡し位置移動完了
LD M1313                 ; 給材ｽﾗｲﾀﾞ_ﾜｰｸ受渡し位置移動完了
ANB M1240                ; RB1位置決め指令
ANB M1241                ; RB1位置決め完了
OUT M1314                ; 給材ｽﾗｲﾀﾞ_ﾜｰｸ受渡し位置移動完了
MCR
;<h1/>□_RB1位置決めSub[M1240]
;__ロボット等機器入力受け
LD X100B                 ; #01_RX00B_ORG原点復帰完了状態
AND X100D                ; RB1 #01_RX00D_運転完了
MPS
LDA X1000                ; #01_RX000_完了位置_1
CON
ANDA H00FF
CON
STA D1028                ; RB1_完了POS
MRD
INV
MOV K0 D1028             ; RB1_完了POS
MRD
AND= D1028 D1030         ; RB1_完了POS  RB1_ﾜｰｸ投入位置Pos指定
OUT M1450                ; RB1_ﾜｰｸ投入位置_P2
MRD
AND= D1028 D1031         ; RB1_完了POS  RB1_ｺｰﾄﾞ読取位置Pos指定
OUT M1451                ; RB1_ｺｰﾄﾞ読取位置_P-D1031
MPP
AND= D1028 K1            ; RB1_完了POS
OUT M1452                ; RB1_搬送RBへﾜｰｸ受渡位置_P1
; POS NO.
LD CR2002                ; 常時ON
MOV K2 D1030             ; RB1_ﾜｰｸ投入位置Pos指定
LD CR2002                ; 常時ON
MPS
AND M31                  ; 手動ﾓｰﾄﾞ
MPS
LDA D500                 ; 手動_JIG_NO.指定(TP)
CON
STA D1040                ; RB1_POSｵﾌｾｯﾄ量計算
MPP
LDA D1040                ; RB1_POSｵﾌｾｯﾄ量計算
CON
ADD K10
CON
STA D1031                ; RB1_ｺｰﾄﾞ読取位置Pos指定
MPP
AND M30                  ; 自動ﾓｰﾄﾞ
MPS
LDA D1042                ; 自動_JIG_NO.指定
CON
STA D1040                ; RB1_POSｵﾌｾｯﾄ量計算
MPP
LDA D1040                ; RB1_POSｵﾌｾｯﾄ量計算
CON
ADD K10
CON
STA D1031                ; RB1_ｺｰﾄﾞ読取位置Pos指定
LD X100B                 ; #01_RX00B_ORG原点復帰完了状態
LDB X100C                ; RB1 #01_RX00C_運転実行中
OR X100D                 ; RB1 #01_RX00D_運転完了
ANL
AND X100E                ; RB1 #01_RX00E_ALM
AND X100F                ; RB1 #01_RX00F_SAVO状態
AND X101B                ; RB1 #01_RX01B_REMOTO READY
OUT M1242                ; RB1_状態OK
LD M50                   ; 運転準備
ANB M51                  ; 即停止異常(緊急停止)
AND M1242                ; RB1_状態OK
ANB M1244                ; RB1位置決めSub起動中
OUT M1243                ; RB1位置決めSub起動条件
LDB M1302                ; 給材RB_ﾜｰｸ投入位置移動指令
OR M1303                 ; 給材RB_ﾜｰｸ投入位置移動完了
LDB M1307                ; 給材ｽﾗｲﾀﾞ_ｺｰﾄﾞﾘｰﾀﾞｰ位置移動指令
OR M1308                 ; 給材ｽﾗｲﾀﾞ_ｺｰﾄﾞﾘｰﾀﾞ移動完了
ANL
LDB M1312                ; 給材ｽﾗｲﾀﾞ_ﾜｰｸ受渡し位置移動指令
OR M1313                 ; 給材ｽﾗｲﾀﾞ_ﾜｰｸ受渡し位置移動完了
ANL
ANB M1011                ; U1S11_BCR位置移動指令
ANB M1017                ; U1S17_ﾜｰｸ投入位置移動
ANB M1021                ; U1S21_ﾜｰｸ受渡し位置移動
ANB M1041                ; U1S41_ﾜｰｸ投入位置へ移動
ANB M1255                ; STEP5_ﾜｰｸ投入位置移動指令
ANB CR2003               ; 常時OFF
INV
LD M1243                 ; RB1位置決めSub起動条件
OR M1244                 ; RB1位置決めSub起動中
ANL
OUT M1240                ; RB1位置決め指令
LD M1240                 ; RB1位置決め指令
AND M50                  ; 運転準備
ANB M51                  ; 即停止異常(緊急停止)
AND X100E                ; RB1 #01_RX00E_ALM
AND X100F                ; RB1 #01_RX00F_SAVO状態
AND X101B                ; RB1 #01_RX01B_REMOTO READY
MC
LD M1240                 ; RB1位置決め指令
AND M1243                ; RB1位置決めSub起動条件
OR M1244                 ; RB1位置決めSub起動中
OUT M1244                ; RB1位置決めSub起動中
LD M1244                 ; RB1位置決めSub起動中
@MOV D1024 D1026         ; RB1_移動先POS_NO.  RB1_指令POS
TMH K140 K5              ; ﾃﾞｰﾀ転送ﾃﾞｨﾚｲ
LD T140                  ; ﾃﾞｰﾀ転送ﾃﾞｨﾚｲ
OR M1245                 ; RB1位置決めｽﾀｰﾄ指令ON
AND T115                 ; 投入部ﾗｲﾄｶｰﾃﾝOK
AND M123                 ; 安全扉正常
OUT M1245                ; RB1位置決めｽﾀｰﾄ指令ON
LD M1245                 ; RB1位置決めｽﾀｰﾄ指令ON
AND Y200D                ; #01_RY00D_スタート
AND X100C                ; RB1 #01_RX00C_運転実行中
OR M1246                 ; RB1位置決め動作中
AND T115                 ; 投入部ﾗｲﾄｶｰﾃﾝOK
AND M123                 ; 安全扉正常
OUT M1246                ; RB1位置決め動作中
LD M1246                 ; RB1位置決め動作中
ANB X100C                ; RB1 #01_RX00C_運転実行中
AND X100D                ; RB1 #01_RX00D_運転完了
AND= D1028 D1026         ; RB1_完了POS  RB1_指令POS
OR M1247                 ; RB1位置決め完了
OUT M1247                ; RB1位置決め完了
LD M1247                 ; RB1位置決め完了
OUT M1241                ; RB1位置決め完了
MCR
;<h1/>□_出力回路
;ソレノイドバルブ出力
;<h1/>__PC→PLCへ出力
LD W08.0                 ; 投入部ｽｷｬﾅ電源OFF
OUT Y57                  ; ｺｰﾄﾞﾘｰﾀﾞｰﾘｾｯﾄ
;<h1/>__PLC→PCへ出力
LD M1404                 ; ID異常時  ｻｲｸﾙ停止選択
OUT W0101.1              ; ID異常時ｻｲｸﾙ停止選択
LD M1405                 ; ID異常時　取出し選択
OUT W0101.2              ; ID異常時取出し選択
LD M1406                 ; ID異常時　段取り替え選択
OUT W0101.3              ; ID位常時段取指示
;<h1/>__RB動作出力
LD M1245                 ; RB1位置決めｽﾀｰﾄ指令ON
ANB M1246                ; RB1位置決め動作中
OUT Y200D                ; #01_RY00D_スタート
LD CR2002                ; 常時ON
MPS
AND D1026.0              ; 給材搬送PP RB_指令POS1
OUT Y2000                ; #01_RY000_指令位置_1
MRD
AND D1026.1              ; 給材搬送PP RB_指令POS2
OUT Y2001                ; #01_RY001_指令位置_2
MRD
AND D1026.2              ; 給材搬送PP RB_指令POS4
OUT Y2002                ; #01_RY002_指令位置_3
MRD
AND D1026.3              ; 給材搬送PP RB_指令POS8
OUT Y2003                ; #01_RY003_指令位置_4
MRD
AND D1026.4              ; 給材搬送PP RB_指令POS16
OUT Y2004                ; #01_RY004_指令位置_5
MRD
AND D1026.5              ; 給材搬送PP RB_指令POS32
OUT Y2005                ; #01_RY005_指令位置_6
MRD
AND D1026.6              ; 給材搬送PP RB_指令POS64
OUT Y2006                ; #01_RY006_指令位置_7
MPP
AND D1026.7              ; 給材搬送PP RB_指令POS128
OUT Y2007                ; #01_RY006_指令位置_8
LD M1253                 ; STEP3_搬送ｽﾗｲﾀﾞ後退指令
AND T115                 ; 投入部ﾗｲﾄｶｰﾃﾝOK
AND M1479                ; ﾕﾆｯﾄ1_ｽﾃｯﾌﾟ動作可
OUT Y200B                ; #01_RY00B_原点復帰
LD X04                   ; 供給部ﾗｲﾄｶｰﾃﾝOUT1
AND X06                  ; ST1-2部ﾗｲﾄｶｰﾃﾝOUT1
AND X0A                  ; ST1-2背面ﾗｲﾄｶｰﾃﾝOUT1
AND X06                  ; ST1-2部ﾗｲﾄｶｰﾃﾝOUT1
AND X07                  ; ST1-2部ﾗｲﾄｶｰﾃﾝOUT2
AND X08                  ; ST3-4部ﾗｲﾄｶｰﾃﾝOUT1
AND X09                  ; ST3-4部ﾗｲﾄｶｰﾃﾝOUT2
AND X0A                  ; ST1-2背面ﾗｲﾄｶｰﾃﾝOUT1
AND X0B                  ; ST1-2背面ﾗｲﾄｶｰﾃﾝOUT1
OR M39                   ; ?LO?}?Y?a???nd??O??AT
LD X0C                   ; ST3-4背面ﾗｲﾄｶｰﾃﾝOUT1
AND X0D                  ; ST3-4背面ﾗｲﾄｶｰﾃﾝOUT1
OR M39                   ; ?LO?}?Y?a???nd??O??AT
ANL
AND M129                 ; 安全入力OK
OUT Y200C                ; #01_RY00C_ｲﾝﾀｰﾛｯｸ
LD M16                   ; ﾘｾｯﾄPB
ANB X100E                ; RB1 #01_RX00E_ALM
OUT Y200E                ; #01_RY00E_リセット
LD M50                   ; 運転準備
AND X100E                ; RB1 #01_RX00E_ALM
OUT Y200F                ; #01_RY00F_サーボON
;□□　　I/O出力　　□□
LD M50                   ; 運転準備
ANB M51                  ; 即停止異常(緊急停止)
OUT Y52                  ; ﾜｰｸ給材RB電源ON
LDB B0321                ; 801)給材部ﾜｰｸ除去要求
ANB M1019                ; U1S19_NGﾗﾝﾌﾟ点灯
INV
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OUT Y318                 ; ﾜｰｸ供給部NGﾗﾝﾌﾟ
LDB M1013                ; U1S13_浮検知
ANB M1019                ; U1S19_NGﾗﾝﾌﾟ点灯
INV
OUT Y319                 ; ﾜｰｸ供給部ﾌﾞｻﾞｰ
;□□　　パネル表示　　□□
LD M1450                 ; RB1_ﾜｰｸ投入位置_P2
LD M1301                 ; 給材RB_ﾜｰｸ投入位置移動
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
ORL
OUT B1580                ; RB1_ﾜｰｸ投入位置_P2 TPPL
LD M1451                 ; RB1_ｺｰﾄﾞ読取位置_P-D1031
LD M1306                 ; 給材ｽﾗｲﾀﾞ_ｺｰﾄﾞﾘｰﾀﾞｰ位置移動
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
ORL
OUT B1581                ; RB1_ｺｰﾄﾞ読取位置_TP-PL
LD M1452                 ; RB1_搬送RBへﾜｰｸ受渡位置_P1
LD M1311                 ; 給材ｽﾗｲﾀﾞ_ﾜｰｸ受渡し位置移動
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
ORL
OUT B1582                ; RB1_ﾜｰｸ受渡し位置_P1TP-PL
;<h1/>□_異常検出
LDB X100E                ; RB1 #01_RX00E_ALM
AND X100F                ; RB1 #01_RX00F_SAVO状態
AND M50                  ; 運転準備
AND Y52                  ; ﾜｰｸ給材RB電源ON
LD CR2003                ; 常時OFF
ANB B0520                ; 32)_U1E1Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B020                 ; 032)RB1ｺﾝﾄﾛｰﾗｰ異常
ORL
OUT B020                 ; 032)RB1ｺﾝﾄﾛｰﾗｰ異常
LDP B020                 ; 032)RB1ｺﾝﾄﾛｰﾗｰ異常
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K1032 D13500         ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0520                 ; 32)_U1E1Bz停止
AND B020                 ; 032)RB1ｺﾝﾄﾛｰﾗｰ異常
OUT B0520                ; 32)_U1E1Bz停止
LD M1005                 ; U1S05_ｲﾝﾃﾞｯｸｽNO.ﾁｪｯｸ
LD M30                   ; 自動ﾓｰﾄﾞ
ANB M41                  ; ﾕﾆｯﾄ_起動中
ORL
AND= D1050 K0            ; 投入部JIG_ID
AND M1450                ; RB1_ﾜｰｸ投入位置_P2
LD CR2003                ; 常時OFF
ANB B0521                ; 33)_U1E2Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B021                 ; 033)投入部JIGID異常
ORL
OUT B021                 ; 033)投入部JIGID異常
LDP B021                 ; 033)投入部JIGID異常
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K33 D13500           ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0521                 ; 33)_U1E2Bz停止
AND B021                 ; 033)投入部JIGID異常
OUT B0521                ; 33)_U1E2Bz停止
LD M1038                 ; U1S38_ﾜｰｸ受渡し失敗
LD CR2003                ; 常時OFF
ANB B0522                ; 34)_U1E3Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B022                 ; 034)供給部ﾜｰｸ受渡し失敗
ORL
OUT B022                 ; 034)供給部ﾜｰｸ受渡し失敗
LDP B022                 ; 034)供給部ﾜｰｸ受渡し失敗
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K34 D13500           ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0522                 ; 34)_U1E3Bz停止
AND B022                 ; 034)供給部ﾜｰｸ受渡し失敗
OUT B0522                ; 34)_U1E3Bz停止
;
LDB M1018                ; U1S18_ﾜｰｸ投入NG異常
ANB M1019                ; U1S19_NGﾗﾝﾌﾟ点灯
INV
LD CR2003                ; 常時OFF
ANB B0523                ; 35)_U1E4Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B023                 ; 035)ﾜｰｸ投入NG異常
ORL
LDB T105                 ; 給材部ﾜｰｸ無し確認
OR W00.2                 ; PC Busy
ANL
OUT B023                 ; 035)ﾜｰｸ投入NG異常
LDP B023                 ; 035)ﾜｰｸ投入NG異常
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K35 D13500           ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0523                 ; 35)_U1E4Bz停止
AND B023                 ; 035)ﾜｰｸ投入NG異常
OUT B0523                ; 35)_U1E4Bz停止
;
LD T100                  ; ﾕﾆｯﾄ1原点復帰ﾀｲﾑｱｳﾄ
LD CR2003                ; 常時OFF
ANB B0524                ; 36)_U1E5Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B024                 ; 036)供給ｽﾗｲﾀﾞ原点ﾀｲﾑｵｰﾊﾞｰ
ORL
OUT B024                 ; 036)供給ｽﾗｲﾀﾞ原点ﾀｲﾑｵｰﾊﾞｰ
LDP B024                 ; 036)供給ｽﾗｲﾀﾞ原点ﾀｲﾑｵｰﾊﾞｰ
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K36 D13500           ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0524                 ; 36)_U1E5Bz停止
AND B024                 ; 036)供給ｽﾗｲﾀﾞ原点ﾀｲﾑｵｰﾊﾞｰ
OUT B0524                ; 36)_U1E5Bz停止
;　
LD M1420                 ; ST受入れ準備NG
LD CR2003                ; 常時OFF
ANB B0525                ; 37)_U1E6Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B025                 ; 037)ID一致ｽﾃｰｼﾞ無
ORL
OUT B025                 ; 037)ID一致ｽﾃｰｼﾞ無
LDP B025                 ; 037)ID一致ｽﾃｰｼﾞ無
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K37 D13500           ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0525                 ; 37)_U1E6Bz停止
AND B025                 ; 037)ID一致ｽﾃｰｼﾞ無
OUT B0525                ; 37)_U1E6Bz停止
;
LD M1008                 ; U1S08_ｽﾃｰｼﾞ異常
ANB M1422                ; ｽﾃｰｼﾞ状態OK
LD CR2003                ; 常時OFF
ANB B0526                ; 38)_U1E7Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B026                 ; 038)ｽﾃｰｼﾞﾁｪｯｸ要求(有効化要求)
ORL
OUT B026                 ; 038)ｽﾃｰｼﾞﾁｪｯｸ要求(有効化要求)
LDP B026                 ; 038)ｽﾃｰｼﾞﾁｪｯｸ要求(有効化要求)
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K38 D13500           ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0526                 ; 38)_U1E7Bz停止
AND B026                 ; 038)ｽﾃｰｼﾞﾁｪｯｸ要求(有効化要求)
OUT B0526                ; 38)_U1E7Bz停止
;　　
LDB M1258                ; STEP8_給材部ﾜｰｸ除去要求
INV
LD M36                   ; 払出ﾓｰﾄﾞ
AND M1450                ; RB1_ﾜｰｸ投入位置_P2
ANB M1074                ; ﾕﾆｯﾄ1-1起動中
AND T101                 ; 給材部ﾜｰｸ有り確認
ORL
LD CR2003                ; 常時OFF
ANB B0821                ; 801)_U1E8_ブザー停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0321                ; 801)給材部ﾜｰｸ除去要求
ORL
ANB X309                 ; ﾜｰｸ供給部NG_SW
ANB T105                 ; 給材部ﾜｰｸ無し確認
OUT B0321                ; 801)給材部ﾜｰｸ除去要求
LDP B0321                ; 801)給材部ﾜｰｸ除去要求
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K801 D13500          ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0821                 ; 801)_U1E8_ブザー停止
AND B0321                ; 801)給材部ﾜｰｸ除去要求
OUT B0821                ; 801)_U1E8_ブザー停止
;ﾜｰｸ搬送異常
LD M1023                 ; U1S23_ﾜｰｸ搬送異常
LD CR2003                ; 常時OFF
ANB B0528                ; 40)_U1E9Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B028                 ; 040)ﾜｰｸ搬送異常
ORL
OUT B028                 ; 040)ﾜｰｸ搬送異常
LDP B028                 ; 040)ﾜｰｸ搬送異常
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K40 D13500           ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0528                 ; 40)_U1E9Bz停止
AND B028                 ; 040)ﾜｰｸ搬送異常
OUT B0528                ; 40)_U1E9Bz停止
;
LD M1013                 ; U1S13_浮検知
LD CR2003                ; 常時OFF
ANB B0529                ; 41)_U1E10Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
ORB M1450                ; RB1_ﾜｰｸ投入位置_P2
AND B029                 ; 041)投入部ﾜｰｸ浮き異常
ORL
LD X1280                 ; 給材部ﾜｰｸ有無確認(ON=有)
OR T115                  ; 投入部ﾗｲﾄｶｰﾃﾝOK
ORB M1450                ; RB1_ﾜｰｸ投入位置_P2
ANL
OUT B029                 ; 041)投入部ﾜｰｸ浮き異常
LDP B029                 ; 041)投入部ﾜｰｸ浮き異常
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K41 D13500           ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0529                 ; 41)_U1E10Bz停止
AND B029                 ; 041)投入部ﾜｰｸ浮き異常
OUT B0529                ; 41)_U1E10Bz停止
;異常ﾌﾞｻﾞｰまとめ
LDB B020                 ; 032)RB1ｺﾝﾄﾛｰﾗｰ異常
OR B0520                 ; 32)_U1E1Bz停止
LDB B021                 ; 033)投入部JIGID異常
OR B0521                 ; 33)_U1E2Bz停止
ANL
LDB B022                 ; 034)供給部ﾜｰｸ受渡し失敗
OR B0522                 ; 34)_U1E3Bz停止
ANL
LDB B023                 ; 035)ﾜｰｸ投入NG異常
OR B0523                 ; 35)_U1E4Bz停止
ANL
LDB B024                 ; 036)供給ｽﾗｲﾀﾞ原点ﾀｲﾑｵｰﾊﾞｰ
OR B0524                 ; 36)_U1E5Bz停止
ANL
LDB B025                 ; 037)ID一致ｽﾃｰｼﾞ無
OR B0525                 ; 37)_U1E6Bz停止
ANL
LDB B026                 ; 038)ｽﾃｰｼﾞﾁｪｯｸ要求(有効化要求)
OR B0526                 ; 38)_U1E7Bz停止
ANL
LDB B027                 ; 039)
OR B0527                 ; 39)_U1E8Bz停止
ANL
LDB B028                 ; 040)ﾜｰｸ搬送異常
OR B0528                 ; 40)_U1E9Bz停止
ANL
LDB B029                 ; 041)投入部ﾜｰｸ浮き異常
OR B0529                 ; 41)_U1E10Bz停止
ANL
LDB B02A                 ; 042)
OR B052A                 ; 42)_U1E11Bz停止
ANL
LDB B02B                 ; 043)
OR B052B                 ; 43)_U1E12Bz停止
ANL
LDB B02C                 ; 044)
OR B052C                 ; 44)_U1E13Bz停止
ANL
LDB B02D                 ; 045)
OR B052D                 ; 45)_U1E14Bz停止
ANL
LDB B02E                 ; 046)
OR B052E                 ; 46)_U1E15Bz停止
ANL
LDB B02F                 ; 047)
OR B052F                 ; 47)_U1E16Bz停止
ANL
LDB B030                 ; 048)
OR B0530                 ; 48)_U1E17Bz停止
ANL
LDB B031                 ; 049)
OR B0531                 ; 49)_U1E18Bz停止
ANL
LDB B032                 ; 050)
OR B0532                 ; 50)_U1E19Bz停止
ANL
LDB B033                 ; 051)
OR B0533                 ; 51)_U1E20Bz停止
ANL
LDB B034                 ; 052)
OR B0534                 ; 52)_U1E21Bz停止
ANL
LDB B035                 ; 053)
OR B0535                 ; 53)_U1E22Bz停止
ANL
LDB B036                 ; 054)
OR B0536                 ; 54)_U1E23Bz停止
ANL
LDB B037                 ; 055)
OR B0537                 ; 55)_U1E24Bz停止
ANL
LDB B038                 ; 056)
OR B0538                 ; 56)_U1E25Bz停止
ANL
LDB B039                 ; 057)
OR B0539                 ; 57)_U1E26Bz停止
ANL
LDB B03A                 ; 058)
OR B053A                 ; 58)_U1E27Bz停止
ANL
LDB B03B                 ; 059)
OR B053B                 ; 59)_U1E28Bz停止
ANL
LDB B03C                 ; 060)
OR B053C                 ; 60)_U1E29Bz停止
ANL
LDB B03D                 ; 061)
OR B053D                 ; 61)_U1E30Bz停止
ANL
LDB B03E                 ; 062)
OR B053E                 ; 62)_U1E31Bz停止
ANL
LDB B03F                 ; 063)
OR B053F                 ; 63)_U1E32Bz停止
ANL
LDB B0321                ; 801)給材部ﾜｰｸ除去要求
OR B0821                 ; 801)_U1E8_ブザー停止
ANL
INV
OUT M1489                ; ﾕﾆｯﾄ1異常BZ補助
END
ENDH
