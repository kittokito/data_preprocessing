DEVICE:51
;MODULE:UT4
;MODULE_TYPE:0
LD MR915                 ; ﾀﾞﾐｰ
ANB R1413                ; 次工程搬送CV部　ｽﾃｰﾀ満杯
TMR @14 #50              ; 次工程搬送CV部　ｽﾃｰﾀ満杯ﾃﾞｨﾚｲ
TMR #114 #50             ; 次工程搬送CV部　ｽﾃｰﾀ満杯ﾃﾞｨﾚｲ
LDB R1414                ; 次工程搬送CV部　ﾛｰﾀ満杯
TMR @15 #50              ; 次工程搬送CV部　ﾛｰﾀ満杯ﾃﾞｨﾚｲ
TMR #48 #999             ; 次工程搬送CV部　ﾛｰﾀ満杯ﾃﾞｨﾚｲ
LD T48                   ; 次工程搬送CV部　ﾛｰﾀ満杯ﾃﾞｨﾚｲ
TMR #49 #999             ; 満杯継続時間
CON
AND T49                  ; 満杯継続時間
OUT MR7014               ; ﾛｰﾀ排出停止
;
;非常停止　Emergency Stop
;
LD R50010                ; Emargency　Stop
OR @MR001                ; 001
ZRES @MR002 @MR4915
CON
OUT @MR001               ; 001
TMR @0 #5                ; ｳｴｲﾄﾀｲﾏｰ00
LD @T0                   ; ｳｴｲﾄﾀｲﾏｰ00
MDSTOP UT4
;
;HOME
;
;
LD R50003                ; 原点復帰
ANB R50204               ; ST4 Do
TMR @7 #1                ; ｳｴｲﾄﾀｲﾏｰ07
CON
AND @T7                  ; ｳｴｲﾄﾀｲﾏｰ07
SET R50204               ; ST4 Do
CON
@SET @MR1000             ; 原点復帰開始
LDB R50003               ; 原点復帰
ANB R50001               ; AUTO　MODE
ANB R50002               ; STEP
AND @MR1015              ; 原点復帰完了
RES R50204               ; ST4 Do
CON
RES @MR1015              ; 原点復帰完了
STG @MR1000              ; 原点復帰開始
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
RES MR6509               ; 完成品排出　IDXﾁｬｯｸ上下　下降
CON
RES MR6510               ; 完成品排出　C/Vﾁｬｯｸ上下　下降
CON
RES MR6511               ; 完成品排出　変位ｾﾝｻｰ上下　下降
CON
AND R1613                ; 完成品排出　IDXﾁｬｯｸ上下　上昇限
AND R1615                ; 完成品排出　C/Vﾁｬｯｸ上下　上昇限
AND R1701                ; 完成品排出　変位ｾﾝｻｰ上下　上昇限
JMP @MR1001              ; 1001
STG @MR1001              ; 1001
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
RES MR6507               ; 完成品排出　IDXﾁｬｯｸ開閉　開
CON
AND R1609                ; 完成品排出　IDXﾁｬｯｸ開閉　閉限
JMP @MR1003              ; 1003
STG @MR1003              ; 1003
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
RES MR6508               ; 完成品排出　C/Vﾁｬｯｸ開閉　開
CON
AND R1611                ; 完成品排出　C/Vﾁｬｯｸ開閉　閉限
JMP @MR1005
STG @MR1005
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
RES MR6512               ; 完成品排出　完成品搬送　CV側
CON
SET MR6513               ; 完成品排出　完成品搬送　IDX側
CON
AND R1703                ; 完成品排出　完成品搬送　IDX側限
JMP @MR1006
STG @MR1006
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
MPS
AND R1704                ; 完成品排出　NG品排出　取出し側限
MPS
AND R1708                ; NG排出取り出し位置ﾜｰｸ有無
RES MR6515               ; 完成品排出　NG品排出　測定側
CON
SET MR6514               ; 完成品排出　NG品排出　取り出し側
CON
SET @MR100               ; ｴﾗｰ30　NGﾜｰｸ除材要求
CON
JMP @MR1100
MPP
ANB R1708                ; NG排出取り出し位置ﾜｰｸ有無
ZRES MR10000 MR10002     ; 検査完了ﾌﾗｸﾞ  NG品ﾌﾗｸﾞ
CON
JMP @MR1007
MRD
LDB R1704                ; 完成品排出　NG品排出　取出し側限
ANB R1705                ; 完成品排出　NG品排出　測定側限
ANL
JMP @MR1010
MPP
AND R1705                ; 完成品排出　NG品排出　測定側限
MPS
AND R1707                ; 完成品排出　ｽｷﾏ検査ﾛｰﾀ有無検出
MPS
AND MR10000              ; 検査完了ﾌﾗｸﾞ
MPS
AND MR10001              ; OK品ﾌﾗｸﾞ
JMP @MR1007
MPP
LD MR10002               ; NG品ﾌﾗｸﾞ
LDB MR10001              ; OK品ﾌﾗｸﾞ
ANB MR10002              ; NG品ﾌﾗｸﾞ
ORL
ANL
JMP @MR1010
MPP
ANB MR10000              ; 検査完了ﾌﾗｸﾞ
MPS
AND< #0 DM6804           ; ﾌﾗﾝｼﾞ厚み
ZRES MR10001 MR10002     ; OK品ﾌﾗｸﾞ  NG品ﾌﾗｸﾞ
CON
JMP @MR1007
MPP
AND>= #0 DM6804          ; ﾌﾗﾝｼﾞ厚み
JMP @MR1010
MPP
ANB R1707                ; 完成品排出　ｽｷﾏ検査ﾛｰﾀ有無検出
JMP @MR1007
STG @MR1010
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
RES MR6515               ; 完成品排出　NG品排出　測定側
CON
SET MR6514               ; 完成品排出　NG品排出　取り出し側
CON
AND R1704                ; 完成品排出　NG品排出　取出し側限
TMR #206 #2
CON
AND T206
JMP @MR1006
STG @MR1100
AND @MR107               ; ｴﾗｰ30　NGﾜｰｸ除材要求解除OK
RES @MR107               ; ｴﾗｰ30　NGﾜｰｸ除材要求解除OK
CON
JMP @MR1006
STG @MR1101
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
RES MR6515               ; 完成品排出　NG品排出　測定側
CON
SET MR6514               ; 完成品排出　NG品排出　取り出し側
CON
AND R1704                ; 完成品排出　NG品排出　取出し側限
TMR @10 #2
CON
AND @T10
JMP @MR1006
STG @MR1007
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
RES MR6514               ; 完成品排出　NG品排出　取り出し側
CON
SET MR6515               ; 完成品排出　NG品排出　測定側
CON
AND R1705                ; 完成品排出　NG品排出　測定側限
JMP @MR1008
STG @MR1008
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
SET R50414               ; ST4        1ｻｲｸﾙ終了
CON
SET @MR1015              ; 原点復帰完了
CON
ENDS
;
;AUTO
;
LD R50001                ; AUTO　MODE
ANB R50204               ; ST4 Do
TMR @8 #1                ; ｳｴｲﾄﾀｲﾏｰ08
CON
AND @T8                  ; ｳｴｲﾄﾀｲﾏｰ08
SET R50204               ; ST4 Do
CON
SET @MR4000              ; 4000
LDB R50003               ; 原点復帰
ANB R50001               ; AUTO　MODE
ANB R50002               ; STEP
AND @MR2915              ; AUTO運転終了
RES R50204               ; ST4 Do
CON
RES @MR2915              ; AUTO運転終了
STG @MR4000              ; 4000
AND R1703                ; 完成品排出　完成品搬送　IDX側限
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
MPS
AND R50209               ; 動作開始
JMP @MR4003              ; 4003
MPP
LDB R50209               ; 動作開始
AND R50000               ; HOLD
ANL
JMP @MR4400
;ﾜｰｸ有無確認　Cartridge Remain Check
STG @MR4003              ; 4003
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
MPS
AND R1412                ; 4ST部　ﾛｰﾀｺｱ有無検出
JMP @MR4004              ; 4004
MPP
ANB R1412                ; 4ST部　ﾛｰﾀｺｱ有無検出
SET @MR4015              ; 変位ｾﾝｻ側ﾊﾝﾄﾞ給材動作ﾅｼ
CON
JMP @MR4004              ; 4004
STG @MR4004              ; 4004
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
MPS
AND R1707                ; 完成品排出　ｽｷﾏ検査ﾛｰﾀ有無検出
JMP @MR4005              ; 4005
MPP
ANB R1707                ; 完成品排出　ｽｷﾏ検査ﾛｰﾀ有無検出
MPS
ANB @MR4015              ; 変位ｾﾝｻ側ﾊﾝﾄﾞ給材動作ﾅｼ
JMP @MR4200              ; 変位ｾﾝｻ側ﾊﾝﾄﾞのみ給材動作開始
MPP
AND @MR4015              ; 変位ｾﾝｻ側ﾊﾝﾄﾞ給材動作ﾅｼ
TMR @13 #10
CON
AND @T13
JMP @MR4400
STG @MR4005              ; 4005
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
MPS
AND MR10001              ; OK品ﾌﾗｸﾞ
MPS
ANB @MR4015              ; 変位ｾﾝｻ側ﾊﾝﾄﾞ給材動作ﾅｼ
JMP @MR4100              ; 両ﾊﾝﾄﾞ給材動作開始
MPP
AND @MR4015              ; 変位ｾﾝｻ側ﾊﾝﾄﾞ給材動作ﾅｼ
JMP @MR4108              ; 排出側ﾊﾝﾄﾞのみ給材動作開始
MPP
ANB MR10001              ; OK品ﾌﾗｸﾞ
JMP @MR4007              ; 4007
STG @MR4007              ; 4007
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
RES MR6515               ; 完成品排出　NG品排出　測定側
CON
SET MR6514               ; 完成品排出　NG品排出　取り出し側
CON
AND R1704                ; 完成品排出　NG品排出　取出し側限
SET @MR300               ; ｴﾗｰ34　検査不明ﾜｰｸ有り除材要求
CON
JMP @MR4008
STG @MR4008
AND @MR307               ; ｴﾗｰ34解除
RES @MR307               ; ｴﾗｰ34解除
CON
JMP @MR4009
STG @MR4009
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
MPS
ANB R1708                ; NG排出取り出し位置ﾜｰｸ有無
JMP @MR4010
MPP
AND R1708                ; NG排出取り出し位置ﾜｰｸ有無
JMP @MR4007              ; 4007
STG @MR4010
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
RES MR6514               ; 完成品排出　NG品排出　取り出し側
CON
SET MR6515               ; 完成品排出　NG品排出　測定側
CON
AND R1705                ; 完成品排出　NG品排出　測定側限
JMP @MR4004              ; 4004
STG @MR4100              ; 両ﾊﾝﾄﾞ給材動作開始
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
SET @MR4500              ; 変位S側ﾊﾝﾄﾞ取出動作開始
CON
SET @MR4700              ; 排出側ﾊﾝﾄﾞ取出し動作開始
CON
JMP @MR4101              ; 4101
STG @MR4101              ; 4101
AND @MR4502              ; 変位S側ﾊﾝﾄﾞ取出動作完了
AND @MR4702              ; 排出側ﾊﾝﾄﾞ取出し動作完了
JMP @MR4102
STG @MR4102
RES @MR4502              ; 変位S側ﾊﾝﾄﾞ取出動作完了
CON
RES @MR4702              ; 排出側ﾊﾝﾄﾞ取出し動作完了
CON
JMP @MR4103              ; 4103
STG @MR4103              ; 4103
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
RES MR6513               ; 完成品排出　完成品搬送　IDX側
CON
SET MR6512               ; 完成品排出　完成品搬送　CV側
CON
AND R1702                ; 完成品排出　完成品搬送　CV側限
JMP @MR4104              ; 4104
STG @MR4104              ; 4104
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
SET @MR4600              ; 変位S側ﾊﾝﾄﾞ検査位置給材動作
CON
SET @MR4800              ; 排出側ﾊﾝﾄﾞ排出動作開始
CON
JMP @MR4105              ; 4105
STG @MR4105              ; 4105
AND @MR4602              ; 変位S側ﾊﾝﾄﾞ検査位置給材動作完了
AND @MR4802              ; 排出側ﾊﾝﾄﾞ排出動作完了
JMP @MR4106
STG @MR4106
RES @MR4602              ; 変位S側ﾊﾝﾄﾞ検査位置給材動作完了
CON
RES @MR4802              ; 排出側ﾊﾝﾄﾞ排出動作完了
CON
JMP @MR4208
STG @MR4108              ; 排出側ﾊﾝﾄﾞのみ給材動作開始
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
SET @MR4700              ; 排出側ﾊﾝﾄﾞ取出し動作開始
CON
JMP @MR4109
STG @MR4109
AND @MR4702              ; 排出側ﾊﾝﾄﾞ取出し動作完了
JMP @MR4110
STG @MR4110
RES @MR4702              ; 排出側ﾊﾝﾄﾞ取出し動作完了
CON
JMP @MR4111
STG @MR4111
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
RES MR6513               ; 完成品排出　完成品搬送　IDX側
CON
SET MR6512               ; 完成品排出　完成品搬送　CV側
CON
AND R1702                ; 完成品排出　完成品搬送　CV側限
JMP @MR4112
STG @MR4112
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
SET @MR4800              ; 排出側ﾊﾝﾄﾞ排出動作開始
CON
JMP @MR4113
STG @MR4113
AND @MR4802              ; 排出側ﾊﾝﾄﾞ排出動作完了
JMP @MR4114
STG @MR4114
RES @MR4802              ; 排出側ﾊﾝﾄﾞ排出動作完了
CON
JMP @MR4208
STG @MR4200              ; 変位ｾﾝｻ側ﾊﾝﾄﾞのみ給材動作開始
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
SET @MR4500              ; 変位S側ﾊﾝﾄﾞ取出動作開始
CON
JMP @MR4201              ; 4201
STG @MR4201              ; 4201
AND @MR4502              ; 変位S側ﾊﾝﾄﾞ取出動作完了
JMP @MR4202              ; 4202
STG @MR4202              ; 4202
RES @MR4502              ; 変位S側ﾊﾝﾄﾞ取出動作完了
CON
JMP @MR4203              ; 4203
STG @MR4203              ; 4203
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
RES MR6513               ; 完成品排出　完成品搬送　IDX側
CON
SET MR6512               ; 完成品排出　完成品搬送　CV側
CON
AND R1702                ; 完成品排出　完成品搬送　CV側限
JMP @MR4204              ; 4204
STG @MR4204              ; 4204
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
SET @MR4600              ; 変位S側ﾊﾝﾄﾞ検査位置給材動作
CON
JMP @MR4205              ; 4205
STG @MR4205              ; 4205
AND @MR4602              ; 変位S側ﾊﾝﾄﾞ検査位置給材動作完了
JMP @MR4206
STG @MR4206
RES @MR4602              ; 変位S側ﾊﾝﾄﾞ検査位置給材動作完了
CON
JMP @MR4208
STG @MR4208
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
RES MR6512               ; 完成品排出　完成品搬送　CV側
CON
SET MR6513               ; 完成品排出　完成品搬送　IDX側
CON
JMP @MR4400
STG @MR4400
RES @MR4015              ; 変位ｾﾝｻ側ﾊﾝﾄﾞ給材動作ﾅｼ
CON
SET R50414               ; ST4        1ｻｲｸﾙ終了
CON
JMP @MR4401
STG @MR4401
ANB R50209               ; 動作開始
ANB R50414               ; ST4        1ｻｲｸﾙ終了
MPS
ANB R50000               ; HOLD
SET @MR4000              ; 4000
CON
ENDS
MPP
AND R50000               ; HOLD
RES MR6507               ; 完成品排出　IDXﾁｬｯｸ開閉　開
CON
RES MR6508               ; 完成品排出　C/Vﾁｬｯｸ開閉　開
CON
AND R1609                ; 完成品排出　IDXﾁｬｯｸ開閉　閉限
AND R1611                ; 完成品排出　C/Vﾁｬｯｸ開閉　閉限
SET @MR2915              ; AUTO運転終了
CON
ENDS
;変位ｾﾝｻ側ﾊﾝﾄﾞ取出動作　@MR4500〜
;
STG @MR4500              ; 変位S側ﾊﾝﾄﾞ取出動作開始
ANB @MR4501              ; 変位S側ﾊﾝﾄﾞ取出動作中
SET @MR4501              ; 変位S側ﾊﾝﾄﾞ取出動作中
CON
JMP @MR4505              ; 4505
STG @MR4505              ; 4505
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
SET MR6507               ; 完成品排出　IDXﾁｬｯｸ開閉　開
CON
AND R1608                ; 完成品排出　IDXﾁｬｯｸ開閉　開限
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR4506              ; 4506
STG @MR4506              ; 4506
MPS
LD R50002                ; STEP
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
ANL
SET MR6509               ; 完成品排出　IDXﾁｬｯｸ上下　下降
CON
AND R1612                ; 完成品排出　IDXﾁｬｯｸ上下　下降限
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR4507              ; 4507
MPP
AND R50001               ; AUTO　MODE
SET @MR1500              ; 一時停止禁止
CON
SET MR6509               ; 完成品排出　IDXﾁｬｯｸ上下　下降
CON
MPS
AND R1612                ; 完成品排出　IDXﾁｬｯｸ上下　下降限
JMP @MR4507              ; 4507
MPP
AND R46504               ; 完成品排出　IDXﾁｬｯｸ上下　下降ｴﾗｰ
JMP @MR4900              ; 　
STG @MR4900              ; 　
RES @MR1500              ; 一時停止禁止
CON
RES MR6509               ; 完成品排出　IDXﾁｬｯｸ上下　下降
CON
TMR @1 #3                ; 　
CON
AND @T1                  ; 　
JMP @MR4901
STG @MR4901
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
ANB R46504               ; 完成品排出　IDXﾁｬｯｸ上下　下降ｴﾗｰ
SET @MR1500              ; 一時停止禁止
CON
JMP @MR4506              ; 4506
STG @MR4507              ; 4507
MPS
LD R50002                ; STEP
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
ANL
RES MR6507               ; 完成品排出　IDXﾁｬｯｸ開閉　開
CON
AND R1609                ; 完成品排出　IDXﾁｬｯｸ開閉　閉限
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR4508              ; 4508
MPP
AND R50001               ; AUTO　MODE
RES MR6507               ; 完成品排出　IDXﾁｬｯｸ開閉　開
CON
MPS
AND R1609                ; 完成品排出　IDXﾁｬｯｸ開閉　閉限
JMP @MR4508              ; 4508
MPP
AND R46501               ; 完成品排出　IDXﾁｬｯｸ開閉　閉ｴﾗｰ
JMP @MR4902
STG @MR4902
RES @MR1500              ; 一時停止禁止
CON
RES MR6507               ; 完成品排出　IDXﾁｬｯｸ開閉　開
CON
TMR @2 #3                ; ｳｴｲﾄﾀｲﾏｰ02
CON
AND @T2                  ; ｳｴｲﾄﾀｲﾏｰ02
RES MR6509               ; 完成品排出　IDXﾁｬｯｸ上下　下降
CON
TMR @3 #3                ; ｳｴｲﾄﾀｲﾏｰ03
CON
AND @T3                  ; ｳｴｲﾄﾀｲﾏｰ03
JMP @MR4903
STG @MR4903
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
ANB R46501               ; 完成品排出　IDXﾁｬｯｸ開閉　閉ｴﾗｰ
SET @MR1500              ; 一時停止禁止
CON
JMP @MR4506              ; 4506
STG @MR4508              ; 4508
MPS
LD R50002                ; STEP
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
ANL
RES MR6509               ; 完成品排出　IDXﾁｬｯｸ上下　下降
CON
AND R1613                ; 完成品排出　IDXﾁｬｯｸ上下　上昇限
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR4509              ; 4509
MPP
AND R50001               ; AUTO　MODE
RES MR6509               ; 完成品排出　IDXﾁｬｯｸ上下　下降
CON
ANB R1612                ; 完成品排出　IDXﾁｬｯｸ上下　下降限
RES @MR1500              ; 一時停止禁止
CON
AND R1613                ; 完成品排出　IDXﾁｬｯｸ上下　上昇限
JMP @MR4509              ; 4509
STG @MR4509              ; 4509
MPS
ANB R1412                ; 4ST部　ﾛｰﾀｺｱ有無検出
JMP @MR4515              ; 4515
MPP
AND R1412                ; 4ST部　ﾛｰﾀｺｱ有無検出
SET @MR108               ; ｴﾗｰ31　除材失敗
CON
JMP @MR4510              ; 4510
STG @MR4510              ; 4510
AND @MR115               ; ｴﾗｰ31解除OK
RES @MR115               ; ｴﾗｰ31解除OK
CON
JMP @MR4511              ; 4511
STG @MR4511              ; 4511
MPS
AND R1412                ; 4ST部　ﾛｰﾀｺｱ有無検出
JMP @MR4505              ; 4505
MPP
ANB R1412                ; 4ST部　ﾛｰﾀｺｱ有無検出
JMP @MR4515              ; 4515
STG @MR4515              ; 4515
SET @MR4502              ; 変位S側ﾊﾝﾄﾞ取出動作完了
CON
RES @MR4501              ; 変位S側ﾊﾝﾄﾞ取出動作中
CON
ENDS
;変位ｾﾝｻ側ﾊﾝﾄﾞ検査位置給材動作　@MR4600〜
;
STG @MR4600              ; 変位S側ﾊﾝﾄﾞ検査位置給材動作
ANB @MR4601              ; 変位S側ﾊﾝﾄﾞ検査位置給材動作中
ZRES R55102 R55105       ; MAX値OK  MIN値NG
CON
SET @MR4601              ; 変位S側ﾊﾝﾄﾞ検査位置給材動作中
CON
JMP @MR4605              ; 4605
STG @MR4605              ; 4605
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
ANB R1707                ; 完成品排出　ｽｷﾏ検査ﾛｰﾀ有無検出
AND R1705                ; 完成品排出　NG品排出　測定側限
JMP @MR4606              ; 4606
STG @MR4606              ; 4606
MPS
ANB R50001               ; AUTO　MODE
SET MR6509               ; 完成品排出　IDXﾁｬｯｸ上下　下降
CON
AND R1612                ; 完成品排出　IDXﾁｬｯｸ上下　下降限
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR4607              ; 4607
MPP
AND R50001               ; AUTO　MODE
SET MR6509               ; 完成品排出　IDXﾁｬｯｸ上下　下降
CON
ANB R1613                ; 完成品排出　IDXﾁｬｯｸ上下　上昇限
SET MR6511               ; 完成品排出　変位ｾﾝｻｰ上下　下降
CON
AND R1612                ; 完成品排出　IDXﾁｬｯｸ上下　下降限
JMP @MR4607              ; 4607
STG @MR4607              ; 4607
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
SET MR6507               ; 完成品排出　IDXﾁｬｯｸ開閉　開
CON
AND R1608                ; 完成品排出　IDXﾁｬｯｸ開閉　開限
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR4608              ; 4608
STG @MR4608              ; 4608
MPS
LD<>.L DM6804 +99999     ; ﾌﾗﾝｼﾞ厚み
AND<>.L DM6804 +88888    ; ﾌﾗﾝｼﾞ厚み
ANL
SET R55102               ; MAX値OK
CON
SET R55103               ; MIN値OK
CON
LDA.D #0
CON
STA.D DM6810             ; ｽｷﾏ計測値
CON
ZRES MR10000 MR10002     ; 検査完了ﾌﾗｸﾞ  NG品ﾌﾗｸﾞ
CON
SET @MR5000              ; ｽｷﾏ検査開始
CON
JMP @MR4609              ; 4609
MRD
LD=.L DM6804 +99999      ; ﾌﾗﾝｼﾞ厚み
AND<>.L DM6804 +88888    ; ﾌﾗﾝｼﾞ厚み
ANL
SET R55104               ; MAX値NG
CON
SET R55103               ; MIN値OK
CON
LDA.D #0
CON
STA.D DM6810             ; ｽｷﾏ計測値
CON
ZRES MR10000 MR10002     ; 検査完了ﾌﾗｸﾞ  NG品ﾌﾗｸﾞ
CON
SET @MR5010              ; 圧入勘合異常
CON
JMP @MR4703              ; 4703
MRD
LD<>.L DM6804 +99999     ; ﾌﾗﾝｼﾞ厚み
AND=.L DM6804 +88888     ; ﾌﾗﾝｼﾞ厚み
ANL
SET R55102               ; MAX値OK
CON
SET R55105               ; MIN値NG
CON
LDA.D #0
CON
STA.D DM6810             ; ｽｷﾏ計測値
CON
ZRES MR10000 MR10002     ; 検査完了ﾌﾗｸﾞ  NG品ﾌﾗｸﾞ
CON
SET @MR5010              ; 圧入勘合異常
CON
JMP @MR4703              ; 4703
MPP
LD=.L DM6804 +99999      ; ﾌﾗﾝｼﾞ厚み
AND=.L DM6804 +88888     ; ﾌﾗﾝｼﾞ厚み
ANL
SET R55104               ; MAX値NG
CON
SET R55105               ; MIN値NG
CON
LDA.D #0
CON
STA.D DM6810             ; ｽｷﾏ計測値
CON
ZRES MR10000 MR10002     ; 検査完了ﾌﾗｸﾞ  NG品ﾌﾗｸﾞ
CON
SET @MR5010              ; 圧入勘合異常
CON
JMP @MR4703              ; 4703
STG @MR4703              ; 4703
LDA.L +0
CON
STA.L DM6902             ; 実ｽｷﾏ値
CON
JMP @MR4611              ; 4611
STG @MR4609              ; 4609
AND @MR5002              ; ｽｷﾏ検査完了
@SET MR512               ; ﾛｷﾞﾝｸﾞﾃﾞｰﾀ処理ｻﾌﾞﾙｰﾁﾝ
CON
RES @MR5002              ; ｽｷﾏ検査完了
CON
JMP @MR4610              ; 4610
STG @MR4610              ; 4610
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR4611              ; 4611
STG @MR4611              ; 4611
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
RES MR6509               ; 完成品排出　IDXﾁｬｯｸ上下　下降
CON
RES MR6511               ; 完成品排出　変位ｾﾝｻｰ上下　下降
CON
AND R1613                ; 完成品排出　IDXﾁｬｯｸ上下　上昇限
AND R1701                ; 完成品排出　変位ｾﾝｻｰ上下　上昇限
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR4612              ; 4612
STG @MR4612              ; 4612
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
MPS
ANB R50001               ; AUTO　MODE
RES MR6507               ; 完成品排出　IDXﾁｬｯｸ開閉　開
CON
AND R1609                ; 完成品排出　IDXﾁｬｯｸ開閉　閉限
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR4613              ; 4613
MPP
AND R50001               ; AUTO　MODE
JMP @MR4613              ; 4613
STG @MR4613              ; 4613
MPS
LD MR10001               ; OK品ﾌﾗｸﾞ
ANB MR10002              ; NG品ﾌﾗｸﾞ
ANB @MR5010              ; 圧入勘合異常
ANL
JMP @MR4615              ; 4615
MPP
LDB MR10001              ; OK品ﾌﾗｸﾞ
AND MR10002              ; NG品ﾌﾗｸﾞ
LDB MR10001              ; OK品ﾌﾗｸﾞ
ANB MR10002              ; NG品ﾌﾗｸﾞ
ORL
OR @MR5010               ; 圧入勘合異常
ANL
SET @MR5100              ; NG排出
CON
JMP @MR4614              ; 4614
STG @MR4614              ; 4614
AND @MR5102              ; NG排出完了
JMP @MR4615              ; 4615
STG @MR4615              ; 4615
RES @MR5102              ; NG排出完了
CON
RES @MR4601              ; 変位S側ﾊﾝﾄﾞ検査位置給材動作中
CON
SET @MR4602              ; 変位S側ﾊﾝﾄﾞ検査位置給材動作完了
CON
ENDS
;排出側ﾊﾝﾄﾞ取出動作　@MR4700〜
;
STG @MR4700              ; 排出側ﾊﾝﾄﾞ取出し動作開始
ANB @MR4701              ; 排出側ﾊﾝﾄﾞ取出し動作中
SET @MR4701              ; 排出側ﾊﾝﾄﾞ取出し動作中
CON
JMP @MR4705              ; 4705
STG @MR4705              ; 4705
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
SET MR6508               ; 完成品排出　C/Vﾁｬｯｸ開閉　開
CON
AND R1610                ; 完成品排出　C/Vﾁｬｯｸ開閉　開限
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR4706              ; 4706
STG @MR4706              ; 4706
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
SET MR6510               ; 完成品排出　C/Vﾁｬｯｸ上下　下降
CON
AND R1614                ; 完成品排出　C/Vﾁｬｯｸ上下　下降限
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR4707              ; 4707
STG @MR4707              ; 4707
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
RES MR6508               ; 完成品排出　C/Vﾁｬｯｸ開閉　開
CON
AND R1611                ; 完成品排出　C/Vﾁｬｯｸ開閉　閉限
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR4708              ; 4708
STG @MR4708              ; 4708
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
RES MR6510               ; 完成品排出　C/Vﾁｬｯｸ上下　下降
CON
AND R1615                ; 完成品排出　C/Vﾁｬｯｸ上下　上昇限
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR4709              ; 4709
STG @MR4709              ; 4709
MPS
LDB R1707                ; 完成品排出　ｽｷﾏ検査ﾛｰﾀ有無検出
AND R1611                ; 完成品排出　C/Vﾁｬｯｸ開閉　閉限
ANL
JMP @MR4715              ; 4715
MPP
LD R1707                 ; 完成品排出　ｽｷﾏ検査ﾛｰﾀ有無検出
ORB R1611                ; 完成品排出　C/Vﾁｬｯｸ開閉　閉限
ANL
SET @MR200               ; ｴﾗｰ32　除材失敗
CON
JMP @MR4710              ; 4710
STG @MR4710              ; 4710
AND @MR207               ; ｴﾗｰ32解除OK
RES @MR207               ; ｴﾗｰ32解除OK
CON
JMP @MR4711              ; 4711
STG @MR4711              ; 4711
MPS
AND R1707                ; 完成品排出　ｽｷﾏ検査ﾛｰﾀ有無検出
JMP @MR4705              ; 4705
MPP
ANB R1707                ; 完成品排出　ｽｷﾏ検査ﾛｰﾀ有無検出
JMP @MR4715              ; 4715
STG @MR4715              ; 4715
SET @MR4702              ; 排出側ﾊﾝﾄﾞ取出し動作完了
CON
RES @MR4701              ; 排出側ﾊﾝﾄﾞ取出し動作中
CON
ENDS
;排出側ﾊﾝﾄﾞ排出動作　@MR4800〜
;
STG @MR4800              ; 排出側ﾊﾝﾄﾞ排出動作開始
ANB @MR4801              ; 排出側ﾊﾝﾄﾞ排出動作中
SET @MR4801              ; 排出側ﾊﾝﾄﾞ排出動作中
CON
JMP @MR4805              ; ﾛｰﾀ　排出位置ﾜｰｸ有無確認
LDB R1710                ; ﾛｰﾀ排出CV　排出部ﾜｰｸ有無1
TMR #1000 #3             ; ﾛｰﾀ排出CV　排出部ﾜｰｸ有無1ﾃﾞｨﾚｲ
LDB R1711                ; ﾛｰﾀ排出CV　排出部ﾜｰｸ有無2
TMR #1001 #3             ; ﾛｰﾀ排出CV　排出部ﾜｰｸ有無2ﾃﾞｨﾚｲ
LD @MR4805               ; ﾛｰﾀ　排出位置ﾜｰｸ有無確認
AND MR7014               ; ﾛｰﾀ排出停止
OUT MR7010               ; 次工程ﾛｰﾀ搬送満杯
STG @MR4805              ; ﾛｰﾀ　排出位置ﾜｰｸ有無確認
ANB MR7014               ; ﾛｰﾀ排出停止
MPS
LD T1000                 ; ﾛｰﾀ排出CV　排出部ﾜｰｸ有無1ﾃﾞｨﾚｲ
AND T1001                ; ﾛｰﾀ排出CV　排出部ﾜｰｸ有無2ﾃﾞｨﾚｲ
ANL
SET MR7000               ; ﾛｰﾀ排出ｺﾝﾍﾞｱ停止要求
CON
JMP @MR4807
MPP
LD R2115                 ; 排出側C/V　ﾛｰﾀC/V　回転指令
ANB R1714                ; 取り出し位置ﾜｰｸ有無
LD R1710                 ; ﾛｰﾀ排出CV　排出部ﾜｰｸ有無1
OR R1711                 ; ﾛｰﾀ排出CV　排出部ﾜｰｸ有無2
ANL
ANL
TMR #200 #30
CON
AND T200
SET @MR208               ; ｴﾗｰ33　ﾛｰﾀ排出CV異常
CON
JMP @MR4806
STG @MR4806
AND @MR215               ; ｴﾗｰ33　ﾛｰﾀ排出CV異常解除
RES @MR215               ; ｴﾗｰ33　ﾛｰﾀ排出CV異常解除
CON
JMP @MR4805              ; ﾛｰﾀ　排出位置ﾜｰｸ有無確認
STG @MR4807
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
SET MR6510               ; 完成品排出　C/Vﾁｬｯｸ上下　下降
CON
AND R1614                ; 完成品排出　C/Vﾁｬｯｸ上下　下降限
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR4808
STG @MR4808
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
SET MR6508               ; 完成品排出　C/Vﾁｬｯｸ開閉　開
CON
AND R1610                ; 完成品排出　C/Vﾁｬｯｸ開閉　開限
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR4809
STG @MR4809
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
RES MR6510               ; 完成品排出　C/Vﾁｬｯｸ上下　下降
CON
AND R1615                ; 完成品排出　C/Vﾁｬｯｸ上下　上昇限
@INC DM7002              ; OK品排出数
CON
MPS
LDB R49900               ; AUTO　CV間欠運転ﾓｰﾄﾞ
LD R49900                ; AUTO　CV間欠運転ﾓｰﾄﾞ
ANB R50001               ; AUTO　MODE
ORL
ANL
RES MR7000               ; ﾛｰﾀ排出ｺﾝﾍﾞｱ停止要求
CON
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR4810
MPP
LD R49900                ; AUTO　CV間欠運転ﾓｰﾄﾞ
AND R50001               ; AUTO　MODE
ANL
RES MR7000               ; ﾛｰﾀ排出ｺﾝﾍﾞｱ停止要求
CON
SET MR7001               ; 排出ｺﾝﾍﾞｱ回転
CON
JMP @MR4810
STG @MR4810
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
MPS
ANB R50001               ; AUTO　MODE
RES MR6508               ; 完成品排出　C/Vﾁｬｯｸ開閉　開
CON
AND R1611                ; 完成品排出　C/Vﾁｬｯｸ開閉　閉限
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR4815
MPP
AND R50001               ; AUTO　MODE
JMP @MR4815
STG @MR4815
RES @MR4801              ; 排出側ﾊﾝﾄﾞ排出動作中
CON
SET @MR4802              ; 排出側ﾊﾝﾄﾞ排出動作完了
CON
ENDS
;スキマ検査動作
;
STG @MR5000              ; ｽｷﾏ検査開始
ANB MR2000               ; ｼｬﾌﾄ厚み測定中
SET MR2001               ; ｽｷﾏ検査中
CON
SET @MR5001              ; ｽｷﾏ検査中
CON
JMP @MR5003
STG @MR5003
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
SET MR6511               ; 完成品排出　変位ｾﾝｻｰ上下　下降
CON
LD R1608                 ; 完成品排出　IDXﾁｬｯｸ開閉　開限
OR CR2002                ; 常時ON
ANL
AND R1700                ; 完成品排出　変位ｾﾝｻｰ上下　下降限
AND R1406                ; 2ST部　変位ｾﾝｻ下降　読取位置
TMR #15 #9999            ; 厚み検査ﾀｲﾐﾝｸﾞ時間
CON
AND T15                  ; 厚み検査ﾀｲﾐﾝｸﾞ時間
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR5004
STG @MR5004
ZRES R55100 R55101       ; OK表示  NGﾌﾗｸﾞ
CON
LDA.D #0
CON
STA.D DM6810             ; ｽｷﾏ計測値
CON
ZRES MR10000 MR10002     ; 検査完了ﾌﾗｸﾞ  NG品ﾌﾗｸﾞ
CON
LD R50001                ; AUTO　MODE
OR R50002                ; STEP
ANL
MPS
SET @MR1501              ; 一時停止禁止
CON
SET MR1600               ; ｽｷﾏ測定読出しﾄﾘｶﾞ
CON
JMP @MR5005
MPP
AND CR2003               ; 常時OFF
JMP @MR5008
STG @MR5005
AND MR1615               ; ｽｷﾏ測定読出し完了
RES MR1615               ; ｽｷﾏ測定読出し完了
CON
JMP @MR5006
STG @MR5006
LDA.L DM6810             ; ｽｷﾏ計測値
CON
SUB.L DM6804             ; ﾌﾗﾝｼﾞ厚み
CON
STA.L DM6902             ; 実ｽｷﾏ値
CON
MPS
AND R50001               ; AUTO　MODE
JMP @MR5007
MPP
ANB R50001               ; AUTO　MODE
JMP @MR5007
STG @MR5007
TMR @12 #1               ; ｳｪｲﾄ
CON
AND @T12                 ; ｳｪｲﾄ
MPS
AND<=.L DM6902 DM6910    ; 実ｽｷﾏ値
RES MR10002              ; NG品ﾌﾗｸﾞ
CON
SET MR10001              ; OK品ﾌﾗｸﾞ
CON
SET R55100               ; OK表示
CON
JMP @MR5009
MPP
AND>.L DM6902 DM6910     ; 実ｽｷﾏ値
RES MR10001              ; OK品ﾌﾗｸﾞ
CON
SET MR10002              ; NG品ﾌﾗｸﾞ
CON
SET R55101               ; NGﾌﾗｸﾞ
CON
JMP @MR5009
STG @MR5008
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
RES MR6511               ; 完成品排出　変位ｾﾝｻｰ上下　下降
CON
AND R1701                ; 完成品排出　変位ｾﾝｻｰ上下　上昇限
RES MR2001               ; ｽｷﾏ検査中
CON
RES @MR5001              ; ｽｷﾏ検査中
CON
SET MR10000              ; 検査完了ﾌﾗｸﾞ
CON
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
SET @MR5002              ; ｽｷﾏ検査完了
CON
ENDS
STG @MR5009
RES MR6511               ; 完成品排出　変位ｾﾝｻｰ上下　下降
CON
RES @MR1501              ; 一時停止禁止
CON
RES MR2001               ; ｽｷﾏ検査中
CON
RES @MR5001              ; ｽｷﾏ検査中
CON
SET MR10000              ; 検査完了ﾌﾗｸﾞ
CON
SET @MR5002              ; ｽｷﾏ検査完了
CON
ENDS
;NG排出動作
;
STG @MR5100              ; NG排出
ANB @MR5101              ; NG排出動作中
SET @MR5101              ; NG排出動作中
CON
JMP @MR5106
STG @MR5106
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
RES MR6515               ; 完成品排出　NG品排出　測定側
CON
SET MR6514               ; 完成品排出　NG品排出　取り出し側
CON
AND R1704                ; 完成品排出　NG品排出　取出し側限
MPS
ANB @MR5010              ; 圧入勘合異常
SET @MR100               ; ｴﾗｰ30　NGﾜｰｸ除材要求
CON
JMP @MR5107
MPP
AND @MR5010              ; 圧入勘合異常
SET @MR500               ; ｼｬﾌﾄ圧入勘合異常
CON
JMP @MR5108
STG @MR5107
AND @MR107               ; ｴﾗｰ30　NGﾜｰｸ除材要求解除OK
RES @MR107               ; ｴﾗｰ30　NGﾜｰｸ除材要求解除OK
CON
JMP @MR5109
STG @MR5108
AND @MR507               ; ｴﾗｰ38解除
RES @MR507               ; ｴﾗｰ38解除
CON
JMP @MR5109
STG @MR5109
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
MPS
ANB R1708                ; NG排出取り出し位置ﾜｰｸ有無
@INC DM6806              ; NG数ｶｳﾝﾄ
CON
JMP @MR5110
MPP
AND R1708                ; NG排出取り出し位置ﾜｰｸ有無
JMP @MR5106
STG @MR5110
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
RES MR6514               ; 完成品排出　NG品排出　取り出し側
CON
SET MR6515               ; 完成品排出　NG品排出　測定側
CON
AND R1705                ; 完成品排出　NG品排出　測定側限
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR5111
STG @MR5111
RES @MR5010              ; 圧入勘合異常
CON
RES @MR5101              ; NG排出動作中
CON
SET @MR5102              ; NG排出完了
CON
ENDS
;STEP
LD R50002                ; STEP
ANB R50204               ; ST4 Do
SET R50204               ; ST4 Do
CON
SET @MR3000              ; STEP運転開始
LDB R50003               ; 原点復帰
ANB R50001               ; AUTO　MODE
ANB R50002               ; STEP
AND @MR3915              ; STEP終了
RES R50204               ; ST4 Do
CON
RES @MR3915              ; STEP終了
STG @MR3000              ; STEP運転開始
AND R50204               ; ST4 Do
MPS
AND LR400                ; STEP 完成品除材-0 選択ﾗﾝﾌﾟ
JMP @MR3001              ; 3001
MRD
AND LR401                ; STEP 完成品除材-1 選択ﾗﾝﾌﾟ
JMP @MR3100
MRD
AND LR404                ; STEP 完成品除材-4 選択ﾗﾝﾌﾟ
JMP @MR3200
MPP
LDB LR400                ; STEP 完成品除材-0 選択ﾗﾝﾌﾟ
ANB LR401                ; STEP 完成品除材-1 選択ﾗﾝﾌﾟ
ANB LR404                ; STEP 完成品除材-4 選択ﾗﾝﾌﾟ
ANL
TMR @5 #10               ; ｳｴｲﾄﾀｲﾏｰ05
CON
AND @T5                  ; ｳｴｲﾄﾀｲﾏｰ05
SET @MR3915              ; STEP終了
CON
ENDS
STG @MR3001              ; 3001
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
SET @MR4500              ; 変位S側ﾊﾝﾄﾞ取出動作開始
CON
JMP @MR3002
STG @MR3002
AND @MR4502              ; 変位S側ﾊﾝﾄﾞ取出動作完了
RES @MR4502              ; 変位S側ﾊﾝﾄﾞ取出動作完了
CON
JMP @MR3003
STG @MR3003
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
RES MR6513               ; 完成品排出　完成品搬送　IDX側
CON
SET MR6512               ; 完成品排出　完成品搬送　CV側
CON
AND R1702                ; 完成品排出　完成品搬送　CV側限
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR3004
STG @MR3004
JMP @MR3005
STG @MR3005
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
SET @MR4600              ; 変位S側ﾊﾝﾄﾞ検査位置給材動作
CON
JMP @MR3006
STG @MR3006
AND @MR4602              ; 変位S側ﾊﾝﾄﾞ検査位置給材動作完了
RES @MR4602              ; 変位S側ﾊﾝﾄﾞ検査位置給材動作完了
CON
JMP @MR3007
STG @MR3007
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
RES MR10000              ; 検査完了ﾌﾗｸﾞ
CON
RES MR6512               ; 完成品排出　完成品搬送　CV側
CON
SET MR6513               ; 完成品排出　完成品搬送　IDX側
CON
AND R1703                ; 完成品排出　完成品搬送　IDX側限
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR3900
STG @MR3008
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
RES MR6515               ; 完成品排出　NG品排出　測定側
CON
SET MR6514               ; 完成品排出　NG品排出　取り出し側
CON
AND R1704                ; 完成品排出　NG品排出　取出し側限
SET @MR300               ; ｴﾗｰ34　検査不明ﾜｰｸ有り除材要求
CON
JMP @MR3009
STG @MR3009
AND @MR307               ; ｴﾗｰ34解除
RES @MR307               ; ｴﾗｰ34解除
CON
JMP @MR3010
STG @MR3010
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
RES MR6514               ; 完成品排出　NG品排出　取り出し側
CON
SET MR6515               ; 完成品排出　NG品排出　測定側
CON
AND R1705                ; 完成品排出　NG品排出　測定側限
JMP @MR3900
STG @MR3100
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
SET @MR4700              ; 排出側ﾊﾝﾄﾞ取出し動作開始
CON
JMP @MR3101
STG @MR3101
AND @MR4702              ; 排出側ﾊﾝﾄﾞ取出し動作完了
RES @MR4702              ; 排出側ﾊﾝﾄﾞ取出し動作完了
CON
JMP @MR3102
STG @MR3102
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
RES MR6513               ; 完成品排出　完成品搬送　IDX側
CON
SET MR6512               ; 完成品排出　完成品搬送　CV側
CON
AND R1702                ; 完成品排出　完成品搬送　CV側限
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR3103
STG @MR3103
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
SET @MR4800              ; 排出側ﾊﾝﾄﾞ排出動作開始
CON
JMP @MR3104
STG @MR3104
AND @MR4802              ; 排出側ﾊﾝﾄﾞ排出動作完了
RES @MR4802              ; 排出側ﾊﾝﾄﾞ排出動作完了
CON
JMP @MR3105
STG @MR3105
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
RES MR6512               ; 完成品排出　完成品搬送　CV側
CON
SET MR6513               ; 完成品排出　完成品搬送　IDX側
CON
AND R1703                ; 完成品排出　完成品搬送　IDX側限
JMP @MR3900
STG @MR3200
MPS
AND R1707                ; 完成品排出　ｽｷﾏ検査ﾛｰﾀ有無検出
JMP @MR3213
MPP
ANB R1707                ; 完成品排出　ｽｷﾏ検査ﾛｰﾀ有無検出
TMR #252 #5
CON
AND T252
SET @MR508               ; 治具ｾｯﾄ要求
CON
JMP @MR3212
STG @MR3212
AND @MR515               ; ｴﾗｰ39解除OK
RES @MR515               ; ｴﾗｰ39解除OK
CON
JMP @MR3200
STG @MR3213
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
RES MR6513               ; 完成品排出　完成品搬送　IDX側
CON
SET MR6512               ; 完成品排出　完成品搬送　CV側
CON
AND R1702                ; 完成品排出　完成品搬送　CV側限
JMP @MR3201
STG @MR3201
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
JMP @MR3202
STG @MR3202
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
SET MR6507               ; 完成品排出　IDXﾁｬｯｸ開閉　開
CON
AND R1608                ; 完成品排出　IDXﾁｬｯｸ開閉　開限
JMP @MR3203              ; 3203
STG @MR3203              ; 3203
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
SET MR6509               ; 完成品排出　IDXﾁｬｯｸ上下　下降
CON
AND R1612                ; 完成品排出　IDXﾁｬｯｸ上下　下降限
JMP @MR3204              ; 3204
STG @MR3204              ; 3204
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
SET MR6511               ; 完成品排出　変位ｾﾝｻｰ上下　下降
CON
AND R1700                ; 完成品排出　変位ｾﾝｻｰ上下　下降限
AND R1406                ; 2ST部　変位ｾﾝｻ下降　読取位置
TMR @9 #5
CON
AND @T9
JMP @MR3205              ; 3205
STG @MR3205              ; 3205
SET MR6607               ; ﾃﾞｼﾞﾀﾙｾﾝｻ　ID 01 RESET入力
CON
TMR @11 #3
CON
AND @T11
JMP @MR3206
STG @MR3206
RES MR6607               ; ﾃﾞｼﾞﾀﾙｾﾝｻ　ID 01 RESET入力
CON
SET MR1600               ; ｽｷﾏ測定読出しﾄﾘｶﾞ
CON
JMP @MR3214
STG @MR3214
AND MR1615               ; ｽｷﾏ測定読出し完了
RES MR1615               ; ｽｷﾏ測定読出し完了
CON
JMP @MR3215
STG @MR3215
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR3207              ; 3207
STG @MR3207              ; 3207
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
RES MR6511               ; 完成品排出　変位ｾﾝｻｰ上下　下降
CON
AND R1700                ; 完成品排出　変位ｾﾝｻｰ上下　下降限
JMP @MR3208
STG @MR3208
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
RES MR6509               ; 完成品排出　IDXﾁｬｯｸ上下　下降
CON
AND R1613                ; 完成品排出　IDXﾁｬｯｸ上下　上昇限
JMP @MR3209
STG @MR3209
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
RES MR6507               ; 完成品排出　IDXﾁｬｯｸ開閉　開
CON
AND R1609                ; 完成品排出　IDXﾁｬｯｸ開閉　閉限
JMP @MR3210
STG @MR3210
ANB R50300               ; 一時停止中
ANB R50114               ; ST4部ｴﾗｰ発生中
RES MR6512               ; 完成品排出　完成品搬送　CV側
CON
SET MR6513               ; 完成品排出　完成品搬送　IDX側
CON
AND R1703                ; 完成品排出　完成品搬送　IDX側限
JMP @MR3900
STG @MR3900
SET R50414               ; ST4        1ｻｲｸﾙ終了
CON
SET @MR3915              ; STEP終了
CON
ENDS
;***** ERROR NO 30  / NGﾜｰｸ除材要求  *****
;
STG @MR100               ; ｴﾗｰ30　NGﾜｰｸ除材要求
ANB R50008               ; 全体ERROR
SET @MR101               ; ｴﾗｰ30発生
CON
SET R50008               ; 全体ERROR
CON
SET R50114               ; ST4部ｴﾗｰ発生中
CON
SET R55110
CON
SET R50614               ; Err30
CON
JMP @MR102               ; 102
MOV #30 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR102               ; 102
AND R50008               ; 全体ERROR
JMP @MR103               ; 103
STG @MR103               ; 103
ANB R50008               ; 全体ERROR
RES R55110
CON
RES @MR101               ; ｴﾗｰ30発生
CON
SET @MR107               ; ｴﾗｰ30　NGﾜｰｸ除材要求解除OK
CON
ENDS
;***** ERROR NO 31  / 除材失敗  *****
;
STG @MR108               ; ｴﾗｰ31　除材失敗
ANB R50008               ; 全体ERROR
SET @MR109               ; ｴﾗｰ31発生
CON
SET R50008               ; 全体ERROR
CON
SET R50114               ; ST4部ｴﾗｰ発生中
CON
SET R50615               ; Err31
CON
JMP @MR110               ; 202
MOV #31 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR110               ; 202
AND R50008               ; 全体ERROR
JMP @MR111               ; ﾊﾞｲﾊﾟｽ封止量過剰ｴﾗｰ解除OK
STG @MR111               ; ﾊﾞｲﾊﾟｽ封止量過剰ｴﾗｰ解除OK
ANB R50008               ; 全体ERROR
RES @MR109               ; ｴﾗｰ31発生
CON
SET @MR115               ; ｴﾗｰ31解除OK
CON
ENDS
;***** ERROR NO 32  / 除材失敗  *****
;
STG @MR200               ; ｴﾗｰ32　除材失敗
ANB R50008               ; 全体ERROR
SET @MR201               ; ｴﾗｰ32発生
CON
SET R50008               ; 全体ERROR
CON
SET R50114               ; ST4部ｴﾗｰ発生中
CON
SET R50700               ; Err32
CON
JMP @MR202               ; 202
MOV #32 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR202               ; 202
AND R50008               ; 全体ERROR
JMP @MR203
STG @MR203
ANB R50008               ; 全体ERROR
RES @MR201               ; ｴﾗｰ32発生
CON
SET @MR207               ; ｴﾗｰ32解除OK
CON
ENDS
;***** ERROR NO 33  / ﾛｰﾀ排出CV異常  *****
;
STG @MR208               ; ｴﾗｰ33　ﾛｰﾀ排出CV異常
ANB R50008               ; 全体ERROR
SET @MR209               ; ｴﾗｰ33発生
CON
SET R50008               ; 全体ERROR
CON
SET R50114               ; ST4部ｴﾗｰ発生中
CON
SET R50701               ; Err33
CON
JMP @MR210               ; 210
MOV #33 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR210               ; 210
AND R50008               ; 全体ERROR
JMP @MR211
STG @MR211
ANB R50008               ; 全体ERROR
RES @MR209               ; ｴﾗｰ33発生
CON
SET @MR215               ; ｴﾗｰ33　ﾛｰﾀ排出CV異常解除
CON
ENDS
;***** ERROR NO 34  / 検査不明ﾜｰｸ有り除材要求  *****
;
STG @MR300               ; ｴﾗｰ34　検査不明ﾜｰｸ有り除材要求
ANB R50008               ; 全体ERROR
SET @MR301               ; ｴﾗｰ34発生
CON
SET R50008               ; 全体ERROR
CON
SET R50114               ; ST4部ｴﾗｰ発生中
CON
SET R50702               ; Err34
CON
JMP @MR302
MOV #34 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR302
AND R50008               ; 全体ERROR
JMP @MR303
STG @MR303
ANB R50008               ; 全体ERROR
RES @MR301               ; ｴﾗｰ34発生
CON
SET @MR307               ; ｴﾗｰ34解除
CON
ENDS
;***** ERROR NO 35  / ｽｷﾏ検査台上ﾜｰｸ浮き検出  *****
;
STG @MR308               ; ｽｷﾏ検査台ﾜｰｸ浮き検出
ANB R50008               ; 全体ERROR
SET @MR309               ; ｴﾗｰ35発生
CON
SET R50008               ; 全体ERROR
CON
SET R50114               ; ST4部ｴﾗｰ発生中
CON
SET R50703               ; Err35
CON
JMP @MR310
MOV #35 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR310
AND R50008               ; 全体ERROR
JMP @MR311
STG @MR311
ANB R50008               ; 全体ERROR
RES @MR309               ; ｴﾗｰ35発生
CON
SET @MR315               ; ｴﾗｰ35解除
CON
ENDS
;***** ERROR NO 36  / ｲﾝﾃﾞｯｸｽ側ﾁｬｯｸ　ﾛｰﾀｺｱ在席検出  *****
;
STG @MR400               ; ｲﾝﾃﾞｯｸｽ側ﾁｬｯｸ　ﾛｰﾀｺｱ在席検出
ANB R50008               ; 全体ERROR
SET @MR401               ; ｴﾗｰ36発生
CON
SET R50008               ; 全体ERROR
CON
SET R50114               ; ST4部ｴﾗｰ発生中
CON
SET R50704               ; Err36
CON
JMP @MR402               ; 402
MOV #36 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR402               ; 402
AND R50008               ; 全体ERROR
JMP @MR403               ; 403
STG @MR403               ; 403
ANB R50008               ; 全体ERROR
RES @MR401               ; ｴﾗｰ36発生
CON
SET @MR407               ; ｴﾗｰ36　解除
CON
ENDS
;***** ERROR NO 37  / ｺﾝﾍﾞｱ側ﾁｬｯｸ　ﾛｰﾀｺｱ在席検出  *****
;
STG @MR408               ; ｺﾝﾍﾞｱ側ﾁｬｯｸ　ﾛｰﾀｺｱ在席検出
ANB R50008               ; 全体ERROR
SET @MR409               ; ｴﾗｰ37発生
CON
SET R50008               ; 全体ERROR
CON
SET R50114               ; ST4部ｴﾗｰ発生中
CON
SET R50705               ; Err37
CON
JMP @MR410
MOV #37 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR410
AND R50008               ; 全体ERROR
JMP @MR411
STG @MR411
ANB R50008               ; 全体ERROR
RES @MR409               ; ｴﾗｰ37発生
CON
SET @MR415               ; ｴﾗｰ37解除
CON
ENDS
;***** ERROR NO 38  / ｼｬﾌﾄ圧入勘合異常  *****
;
STG @MR500               ; ｼｬﾌﾄ圧入勘合異常
ANB R50008               ; 全体ERROR
SET @MR501               ; ｴﾗｰ38発生
CON
SET R50008               ; 全体ERROR
CON
SET R50114               ; ST4部ｴﾗｰ発生中
CON
SET R55110
CON
SET R50706               ; Err38
CON
JMP @MR502
MOV #37 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR502
AND R50008               ; 全体ERROR
JMP @MR503
STG @MR503
ANB R50008               ; 全体ERROR
RES R55110
CON
RES @MR501               ; ｴﾗｰ38発生
CON
SET @MR507               ; ｴﾗｰ38解除
CON
ENDS
;***** ERROR NO 39  / 治具ｾｯﾄ要求  *****
;
STG @MR508               ; 治具ｾｯﾄ要求
ANB R50008               ; 全体ERROR
SET @MR509               ; ｴﾗｰ39発生
CON
SET R50008               ; 全体ERROR
CON
SET R50114               ; ST4部ｴﾗｰ発生中
CON
SET R50707               ; Err39
CON
JMP @MR510
MOV #39 DM400            ; ﾒｯｾｰｼﾞNo.
STG @MR510
AND R50008               ; 全体ERROR
JMP @MR511
STG @MR511
ANB R50008               ; 全体ERROR
RES @MR509               ; ｴﾗｰ39発生
CON
SET @MR515               ; ｴﾗｰ39解除OK
CON
ENDS
;一時停止禁止処理
;
LD @MR1500               ; 一時停止禁止
OR @MR1501               ; 一時停止禁止
OUT R50104               ; PACK UT4
;ﾛｷﾞﾝｸﾞﾃﾞｰﾀ処理
;
STG MR512                ; ﾛｷﾞﾝｸﾞﾃﾞｰﾀ処理ｻﾌﾞﾙｰﾁﾝ
MPS
@LDA.D DM6810            ; ｽｷﾏ計測値
CON
@FLOAT.D
CON
@STA.F DM6830            ; ｽｷﾏ計測値_FLOAT変換
MRD
@LDA.D DM6804            ; ﾌﾗﾝｼﾞ厚み
CON
@FLOAT.D
CON
@STA.F DM6832            ; ﾌﾗﾝｼﾞ厚み_FLOAT変換
MRD
@LDA.L DM6902            ; 実ｽｷﾏ値
CON
@FLOAT.L
CON
@STA.F DM6834            ; 実ｽｷﾏ値_FLOAT変換
MPP
TMH #147 #5
CON
AND T147
JMP MR513
STG MR513
MPS
@LDA.F DM6830            ; ｽｷﾏ計測値_FLOAT変換
CON
@DIV.F +10000
CON
@STA.F DM6820            ; ｽｷﾏ計測値
MRD
@LDA.F DM6832            ; ﾌﾗﾝｼﾞ厚み_FLOAT変換
CON
@DIV.F +10000
CON
@STA.F DM6822            ; ﾌﾗﾝｼﾞ厚み
MRD
@LDA.F DM6834            ; 実ｽｷﾏ値_FLOAT変換
CON
@DIV.F +10000
CON
@STA.F DM6824            ; 実ｽｷﾏ値
MPP
TMH #148 #5
CON
AND T148
JMP MR514
STG MR514
DIFU MR511               ; #1　ﾛｷﾞﾝｸﾞﾄﾘｶﾞ
CON
ENDS
END
ENDH
