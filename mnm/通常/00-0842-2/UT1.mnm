DEVICE:51
;MODULE:UT1
;MODULE_TYPE:0
;
;非常停止　Emergency Stop
;
LD R50010                ; Emargency　Stop
OR @MR001                ; 001
ZRES @MR002 @MR4915      ; ﾜｰｸ設置ｴﾗｰ
CON
OUT @MR001               ; 001
TMR @0 #5                ; ｳｴｲﾄﾀｲﾏｰ00
LD @T0                   ; ｳｴｲﾄﾀｲﾏｰ00
MDSTOP UT1
;
;HOME
;
LD R50003                ; 原点復帰
ANB R50201               ; ST1 Do
TMR @10 #1               ; ｳｴｲﾄﾀｲﾏｰ10
CON
AND @T10                 ; ｳｴｲﾄﾀｲﾏｰ10
SET R50201               ; ST1 Do
CON
@SET @MR1000             ; UT1 原点復帰開始
LDB R50003               ; 原点復帰
ANB R50001               ; AUTO　MODE
ANB R50002               ; STEP
AND @MR1015              ; 原点復帰完了
RES R50201               ; ST1 Do
CON
RES @MR1015              ; 原点復帰完了
STG @MR1000              ; UT1 原点復帰開始
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
RES MR6404               ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ開閉　開
CON
RES MR6405               ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ上下　下降
CON
AND R1501                ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ開閉　閉限
AND R1503                ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ上下　上昇限
JMP @MR1001              ; 1001
STG @MR1001              ; 1001
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
RES MR6406               ; ﾛｰﾀｺｱ投入　ﾛｰﾀｰ搬送　ｲﾝﾃﾞｯｸｽ側
CON
SET MR6407               ; ﾛｰﾀｺｱ投入　ﾛｰﾀｰ搬送　ｺﾝﾍﾞｱ側
CON
ANB R1504                ; ﾛｰﾀｺｱ投入　ﾛｰﾀｰ搬送　ｲﾝﾃﾞｯｸｽ側限
AND R1505                ; ﾛｰﾀｺｱ投入　ﾛｰﾀｰ搬送　ｺﾝﾍﾞｱ側限
JMP @MR1002              ; 1002
STG @MR1002              ; 1002
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
JMP @MR1003
STG @MR1003
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
RES MR6409               ; ｺﾝﾍﾞｱ　1個前押さえ　上昇
CON
SET MR6408               ; ｺﾝﾍﾞｱ　1個前押さえ　下降
CON
MPS
AND R1506                ; ｺﾝﾍﾞｱ　1個前押さえ　下降限
JMP @MR1007              ; 1007
MPP
ANB R1506                ; ｺﾝﾍﾞｱ　1個前押さえ　下降限
TMR @3 #30               ; ｳｴｲﾄﾀｲﾏｰ03
CON
AND @T3                  ; ｳｴｲﾄﾀｲﾏｰ03
JMP @MR1004
STG @MR1004
RES MR6408               ; ｺﾝﾍﾞｱ　1個前押さえ　下降
CON
SET MR6409               ; ｺﾝﾍﾞｱ　1個前押さえ　上昇
CON
AND R1507                ; ｺﾝﾍﾞｱ　1個前押さえ　上昇限
SET @MR208               ; ST1部　CVよりﾜｰｸ給材失敗
CON
JMP @MR1005              ; 1005
STG @MR1005              ; 1005
AND @MR215               ; ｴﾗｰ4解除
RES @MR215               ; ｴﾗｰ4解除
CON
JMP @MR1003
STG @MR1007              ; 1007
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
RES MR6410               ; ｺﾝﾍﾞｱ　2個前押さえ　下降
CON
SET MR6411               ; ｺﾝﾍﾞｱ　2個前押さえ　上昇
CON
AND R1509                ; ｺﾝﾍﾞｱ　2個前押さえ　上昇限
JMP @MR1008              ; 1008
STG @MR1008              ; 1008
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
MPS
ANB R1510                ; ﾛｰﾀ到着検出
JMP @MR1100
MPP
AND R1510                ; ﾛｰﾀ到着検出
SET @MR300               ; 到着位置除材要求
CON
JMP @MR1012              ; 1012
STG @MR1012              ; 1012
AND @MR307               ; ｴﾗｰ5解除
RES @MR307               ; ｴﾗｰ5解除
CON
JMP @MR1008              ; 1008
STG @MR1100
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
SET MR6405               ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ上下　下降
CON
AND R1502                ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ上下　下降限
JMP @MR1101
STG @MR1101
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
SET MR6404               ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ開閉　開
CON
AND R1500                ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ開閉　開限
JMP @MR1102
STG @MR1102
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
RES MR6405               ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ上下　下降
CON
AND R1503                ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ上下　上昇限
JMP @MR1103
STG @MR1103
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
RES MR6404               ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ開閉　開
CON
AND R1501                ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ開閉　閉限
JMP @MR1104
STG @MR1104
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
MPS
ANB R1510                ; ﾛｰﾀ到着検出
JMP @MR1115
MPP
AND R1510                ; ﾛｰﾀ到着検出
SET @MR300               ; 到着位置除材要求
CON
JMP @MR1105
STG @MR1105
AND @MR307               ; ｴﾗｰ5解除
RES @MR307               ; ｴﾗｰ5解除
CON
JMP @MR1104
STG @MR1115
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
SET R50411               ; ST1        1ｻｲｸﾙ終了
CON
SET @MR1015              ; 原点復帰完了
CON
ENDS
;
;AUTO
;
LD R50001                ; AUTO　MODE
ANB R50201               ; ST1 Do
SET R50201               ; ST1 Do
CON
SET @MR4000              ; 4000
LDB R50003               ; 原点復帰
ANB R50001               ; AUTO　MODE
ANB R50002               ; STEP
AND @MR2915              ; AUTO終了処理完了
RES R50201               ; ST1 Do
CON
RES @MR2915              ; AUTO終了処理完了
;Main Routine
STG @MR4000              ; 4000
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
MPS
AND R50209               ; 動作開始
JMP @MR4001              ; 4001
MPP
LDB R50209               ; 動作開始
AND R50000               ; HOLD
ANL
JMP @MR4800              ; ｻｲｸﾙ停止処理
STG @MR4001              ; 4001
MPS
ANB @MR2015              ; 2回目以降動作
SET MR3500               ; ﾛｰﾀｺｱ取り出し位置供給動作
CON
LDA #0
CON
STA DM834                ; 定停止時 ｲﾝﾃﾞｯｸｽ回転数
CON
JMP @MR4002              ; 4002
MPP
AND @MR2015              ; 2回目以降動作
JMP @MR4003              ; 4003
STG @MR4002              ; 4002
SET @MR2015              ; 2回目以降動作
CON
JMP @MR4003              ; 4003
STG @MR4003              ; 4003
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
MPS
ANB R1400                ; 1ST部　ﾛｰﾀｺｱ有無検出
JMP @MR4006
MPP
AND R1400                ; 1ST部　ﾛｰﾀｺｱ有無検出
SET @MR100               ; ｲﾝﾃﾞｯｸｽﾜｰｸ除材要求
CON
JMP @MR4005              ; 4005
STG @MR4005              ; 4005
AND @MR107               ; ｴﾗｰ解除
RES @MR107               ; ｴﾗｰ解除
CON
JMP @MR4003              ; 4003
STG @MR4006
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
MPS
AND= DM609 #1            ; INDEX位置記憶
SET MR6400               ; ﾀﾞｲｾｯﾄ1　位置決め　上昇　
CON
JMP @MR4007              ; 4007
MRD
AND= DM609 #2            ; INDEX位置記憶
SET MR6401               ; ﾀﾞｲｾｯﾄ2　位置決め　上昇　
CON
JMP @MR4007              ; 4007
MRD
AND= DM609 #3            ; INDEX位置記憶
SET MR6402               ; ﾀﾞｲｾｯﾄ3　位置決め　上昇　
CON
JMP @MR4007              ; 4007
MPP
AND= DM609 #4            ; INDEX位置記憶
SET MR6403               ; ﾀﾞｲｾｯﾄ4　位置決め　上昇　
CON
JMP @MR4007              ; 4007
STG @MR4007              ; 4007
MPS
AND R1402                ; 1ST部　ﾋﾟｽﾄﾝ戻り確認
JMP @MR4010              ; 4010
MPP
ANB R1402                ; 1ST部　ﾋﾟｽﾄﾝ戻り確認
TMR @12 #20              ; ｳｴｲﾄﾀｲﾏｰ12
CON
AND @T12                 ; ｳｴｲﾄﾀｲﾏｰ12
SET @MR200               ; ﾋﾟｽﾄﾝ戻り異常
CON
JMP @MR4009              ; 4009
STG @MR4009              ; 4009
AND @MR207               ; ｴﾗｰ解除
RES @MR207               ; ｴﾗｰ解除
CON
JMP @MR4006
STG @MR4010              ; 4010
JMP @MR4011              ; 4011
STG @MR4011              ; 4011
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
MPS
ANB R49915               ; ﾛｰﾀｺｱ供給停止
MPS
LD T310                  ; ﾛｰﾀ到着検出補助ﾀｲﾏｰ
LD R1506                 ; ｺﾝﾍﾞｱ　1個前押さえ　下降限
OR CR2002                ; 常時ON
ANL
ANL
RES R55012               ; TP　1ST停止中表示
CON
SET R55011               ; TP 1ST供給中
CON
JMP @MR4012              ; 4012
MPP
LD T311                  ; ﾛｰﾀ到着OFF検出補助ﾀｲﾏｰ
ANB R1511                ; ｺﾝﾍﾞｱ　1個前ﾜｰｸ有無
LD R1404                 ; 2ST部　ﾛｰﾀｺｱ有無検出
OR R1409                 ; 3ST部　ﾛｰﾀｺｱ有無検出
OR R1707                 ; 完成品排出　ｽｷﾏ検査ﾛｰﾀ有無検出
ANL
ANL
TMR #5 #9999             ; CVよりｺｱ到着待ち時間
CON
AND T5                   ; CVよりｺｱ到着待ち時間
RES R55012               ; TP　1ST停止中表示
CON
RES R55011               ; TP 1ST供給中
CON
JMP @MR4800              ; ｻｲｸﾙ停止処理
MPP
AND R49915               ; ﾛｰﾀｺｱ供給停止
TMR @9 #10
CON
AND @T9
RES R55012               ; TP　1ST停止中表示
CON
RES R55011               ; TP 1ST供給中
CON
JMP @MR4800              ; ｻｲｸﾙ停止処理
STG @MR4012              ; 4012
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
JMP @MR4013              ; 4013
STG @MR4013              ; 4013
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
SET MR3502               ; 供給動作中
CON
SET MR6404               ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ開閉　開
CON
AND R1500                ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ開閉　開限
JMP @MR4014              ; 4014
STG @MR4014              ; 4014
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
SET MR6405               ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ上下　下降
CON
AND R1502                ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ上下　下降限
JMP @MR4015
STG @MR4015
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
RES MR6404               ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ開閉　開
CON
AND R1501                ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ開閉　閉限
JMP @MR4100              ; 4100
STG @MR4100              ; 4100
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
RES MR6405               ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ上下　下降
CON
AND R1503                ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ上下　上昇限
MPS
ANB R1510                ; ﾛｰﾀ到着検出
JMP @MR4101              ; 即時動作
MPP
AND R1510                ; ﾛｰﾀ到着検出
SET @MR208               ; ST1部　CVよりﾜｰｸ給材失敗
CON
JMP @MR4113
STG @MR4113
AND @MR215               ; ｴﾗｰ4解除
RES @MR215               ; ｴﾗｰ4解除
CON
RES @MR4112              ; ﾜｰｸ無し
CON
JMP @MR4011              ; 4011
STG @MR4101              ; 即時動作
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
RES MR6407               ; ﾛｰﾀｺｱ投入　ﾛｰﾀｰ搬送　ｺﾝﾍﾞｱ側
CON
SET MR6406               ; ﾛｰﾀｺｱ投入　ﾛｰﾀｰ搬送　ｲﾝﾃﾞｯｸｽ側
CON
ANB R1505                ; ﾛｰﾀｺｱ投入　ﾛｰﾀｰ搬送　ｺﾝﾍﾞｱ側限
RES MR3502               ; 供給動作中
CON
AND R1504                ; ﾛｰﾀｺｱ投入　ﾛｰﾀｰ搬送　ｲﾝﾃﾞｯｸｽ側限
TMR @20 #2               ; 　
CON
AND @T20                 ; 　
JMP @MR4102              ; 4102
STG @MR4102              ; 4102
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
JMP @MR4103              ; 4103
STG @MR4103              ; 4103
SET @MR1500              ; 一時停止禁止
CON
SET MR6405               ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ上下　下降
CON
MPS
AND R1502                ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ上下　下降限
JMP @MR4106
MPP
AND R46102               ; ﾁｬｯｸ上下　下降ｴﾗｰ
JMP @MR4104              ; 4104
STG @MR4104              ; 4104
RES MR6405               ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ上下　下降
CON
RES @MR1500              ; 一時停止禁止
CON
JMP @MR4105
STG @MR4105
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
ANB R46102               ; ﾁｬｯｸ上下　下降ｴﾗｰ
JMP @MR4103              ; 4103
STG @MR4106
SET MR6404               ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ開閉　開
CON
MPS
AND R1500                ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ開閉　開限
JMP @MR4109
MPP
AND R46100               ; ﾁｬｯｸ開閉　開ｴﾗｰ
JMP @MR4107
STG @MR4107
RES @MR1500              ; 一時停止禁止
CON
RES MR6405               ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ上下　下降
CON
JMP @MR4108
STG @MR4108
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
ANB R46100               ; ﾁｬｯｸ開閉　開ｴﾗｰ
JMP @MR4109
STG @MR4109
RES MR6405               ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ上下　下降
CON
ANB R1502                ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ上下　下降限
RES @MR1500              ; 一時停止禁止
CON
AND R1503                ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ上下　上昇限
JMP @MR4110
STG @MR4110
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
JMP @MR4111
STG @MR4111
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
RES MR6406               ; ﾛｰﾀｺｱ投入　ﾛｰﾀｰ搬送　ｲﾝﾃﾞｯｸｽ側
CON
SET MR6407               ; ﾛｰﾀｺｱ投入　ﾛｰﾀｰ搬送　ｺﾝﾍﾞｱ側
CON
AND R1505                ; ﾛｰﾀｺｱ投入　ﾛｰﾀｰ搬送　ｺﾝﾍﾞｱ側限
JMP @MR4200              ; 4200
STG @MR4200              ; 4200
MPS
LD R1401                 ; 1ST部　ﾛｰﾀｺｱ浮き検出-1
AND R1403                ; 1ST部　ﾛｰﾀｺｱ浮き検出-2
ANL
@INC DM7000              ; 投入数ｶﾝﾝﾄ
CON
SET R55002               ; 1ST部ﾜｰｸ有り
CON
JMP @MR4800              ; ｻｲｸﾙ停止処理
MPP
LDB R1401                ; 1ST部　ﾛｰﾀｺｱ浮き検出-1
ORB R1403                ; 1ST部　ﾛｰﾀｺｱ浮き検出-2
ANL
TMR @21 #10              ; 　
CON
AND @T21                 ; 　
SET @MR108               ; ﾜｰｸ浮き異常
CON
JMP @MR4203              ; 4203
STG @MR4203              ; 4203
AND @MR115               ; ｴﾗｰ解除
RES @MR115               ; ｴﾗｰ解除
CON
JMP @MR4200              ; 4200
;終了処理　End Operation
STG @MR4800              ; ｻｲｸﾙ停止処理
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
RES R55011               ; TP 1ST供給中
CON
SET R55012               ; TP　1ST停止中表示
CON
@INC DM834               ; 定停止時 ｲﾝﾃﾞｯｸｽ回転数
CON
JMP @MR4802              ; AUTO終了処理
STG @MR4802              ; AUTO終了処理
MPS
ANB R50000               ; HOLD
RES R50407               ; ｽﾀｰﾄSW表示
CON
SET R50411               ; ST1        1ｻｲｸﾙ終了
CON
JMP @MR4803              ; 4803
MPP
AND R50000               ; HOLD
SET R50411               ; ST1        1ｻｲｸﾙ終了
CON
JMP @MR4803              ; 4803
STG @MR4803              ; 4803
ANB R50209               ; 動作開始
MPS
LDB R50000               ; HOLD
AND R50409               ; ｻｲｸﾙ完了
ANL
SET @MR4000              ; 4000
CON
ENDS
MPP
AND R50000               ; HOLD
JMP @MR4804              ; 4804
STG @MR4804              ; 4804
RES MR6405               ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ上下　下降
CON
AND R1503                ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ上下　上昇限
RES MR6404               ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ開閉　開
CON
AND R1501                ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ開閉　閉限
RES @MR2015              ; 2回目以降動作
CON
SET @MR2915              ; AUTO終了処理完了
CON
ENDS
;
;STEP
;
LD R50002                ; STEP
ANB R50201               ; ST1 Do
SET R50201               ; ST1 Do
CON
SET @MR5000              ; 5000
LDB R50003               ; 原点復帰
ANB R50001               ; AUTO　MODE
ANB R50002               ; STEP
AND @MR2914              ; STEP終了処理完了
RES R50201               ; ST1 Do
CON
RES @MR2914              ; STEP終了処理完了
STG @MR5000              ; 5000
AND R50201               ; ST1 Do
MPS
AND LR100                ; STEP ﾛｰﾀ給材-0選択ﾗﾝﾌﾟ
JMP @MR5009
MPP
ANB LR100                ; STEP ﾛｰﾀ給材-0選択ﾗﾝﾌﾟ
JMP @MR4800              ; ｻｲｸﾙ停止処理
STG @MR5009
MPS
AND= DM609 #1            ; INDEX位置記憶
SET MR6400               ; ﾀﾞｲｾｯﾄ1　位置決め　上昇　
CON
JMP @MR5010
MRD
AND= DM609 #2            ; INDEX位置記憶
SET MR6401               ; ﾀﾞｲｾｯﾄ2　位置決め　上昇　
CON
JMP @MR5010
MRD
AND= DM609 #3            ; INDEX位置記憶
SET MR6402               ; ﾀﾞｲｾｯﾄ3　位置決め　上昇　
CON
JMP @MR5010
MPP
AND= DM609 #4            ; INDEX位置記憶
SET MR6403               ; ﾀﾞｲｾｯﾄ4　位置決め　上昇　
CON
JMP @MR5010
STG @MR5010
MPS
AND R1402                ; 1ST部　ﾋﾟｽﾄﾝ戻り確認
TMR @22 #2
CON
AND @T22
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR5012
MPP
ANB R1402                ; 1ST部　ﾋﾟｽﾄﾝ戻り確認
TMR @15 #20              ; ｳｴｲﾄﾀｲﾏｰ15
CON
AND @T15                 ; ｳｴｲﾄﾀｲﾏｰ15
SET @MR200               ; ﾋﾟｽﾄﾝ戻り異常
CON
JMP @MR5011
STG @MR5011
AND @MR207               ; ｴﾗｰ解除
RES @MR207               ; ｴﾗｰ解除
CON
JMP @MR5009
STG @MR5012
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
MPS
ANB R1400                ; 1ST部　ﾛｰﾀｺｱ有無検出
JMP @MR5100
MPP
AND R1400                ; 1ST部　ﾛｰﾀｺｱ有無検出
SET @MR100               ; ｲﾝﾃﾞｯｸｽﾜｰｸ除材要求
CON
JMP @MR5013
STG @MR5013
AND @MR107               ; ｴﾗｰ解除
RES @MR107               ; ｴﾗｰ解除
CON
JMP @MR5012
STG @MR5100
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
SET MR6404               ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ開閉　開
CON
AND R1500                ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ開閉　開限
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR5101
STG @MR5101
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
SET MR6405               ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ上下　下降
CON
AND R1502                ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ上下　下降限
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR5102
STG @MR5102
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
RES MR6404               ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ開閉　開
CON
AND R1501                ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ開閉　閉限
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR5103
STG @MR5103
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
RES MR6405               ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ上下　下降
CON
AND R1503                ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ上下　上昇限
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR5104
STG @MR5104
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
RES MR6407               ; ﾛｰﾀｺｱ投入　ﾛｰﾀｰ搬送　ｺﾝﾍﾞｱ側
CON
SET MR6406               ; ﾛｰﾀｺｱ投入　ﾛｰﾀｰ搬送　ｲﾝﾃﾞｯｸｽ側
CON
AND R1504                ; ﾛｰﾀｺｱ投入　ﾛｰﾀｰ搬送　ｲﾝﾃﾞｯｸｽ側限
TMR @23 #2
CON
AND @T23
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR5105
STG @MR5105
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
SET MR6405               ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ上下　下降
CON
AND R1502                ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ上下　下降限
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR5106
STG @MR5106
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
SET MR6404               ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ開閉　開
CON
AND R1500                ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ開閉　開限
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR5107
STG @MR5107
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
RES MR6405               ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ上下　下降
CON
AND R1503                ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ上下　上昇限
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR5108
STG @MR5108
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
RES MR6404               ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ開閉　開
CON
AND R1501                ; ﾛｰﾀｺｱ投入　ﾁｬｯｸ開閉　閉限
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR5109
STG @MR5109
ANB R50300               ; 一時停止中
ANB R50111               ; ST1部ｴﾗｰ発生中
RES MR6406               ; ﾛｰﾀｺｱ投入　ﾛｰﾀｰ搬送　ｲﾝﾃﾞｯｸｽ側
CON
SET MR6407               ; ﾛｰﾀｺｱ投入　ﾛｰﾀｰ搬送　ｺﾝﾍﾞｱ側
CON
AND R1505                ; ﾛｰﾀｺｱ投入　ﾛｰﾀｰ搬送　ｺﾝﾍﾞｱ側限
OUT R50400               ; 1ｽﾃｯﾌﾟ停止
CON
AND R50402               ; 1ｽﾃｯﾌﾟ停止要求可
JMP @MR5110
STG @MR5110
MPS
LD R1401                 ; 1ST部　ﾛｰﾀｺｱ浮き検出-1
AND R1403                ; 1ST部　ﾛｰﾀｺｱ浮き検出-2
ANL
JMP @MR4801              ; STEP終了処理
MPP
LDB R1401                ; 1ST部　ﾛｰﾀｺｱ浮き検出-1
ORB R1403                ; 1ST部　ﾛｰﾀｺｱ浮き検出-2
ANL
TMR @24 #10
CON
AND @T24
SET @MR108               ; ﾜｰｸ浮き異常
CON
JMP @MR5111
STG @MR5111
AND @MR115               ; ｴﾗｰ解除
RES @MR115               ; ｴﾗｰ解除
CON
JMP @MR4801              ; STEP終了処理
STG @MR4801              ; STEP終了処理
SET R50411               ; ST1        1ｻｲｸﾙ終了
CON
SET @MR2914              ; STEP終了処理完了
CON
ENDS
;エラー表示　Error Display
;Error 1 ST1部ｲﾝﾃﾞｯｸｽﾜｰｸ残り有り　除材要求
STG @MR100               ; ｲﾝﾃﾞｯｸｽﾜｰｸ除材要求
ANB R50008               ; 全体ERROR
SET @MR101               ; ｴﾗｰ1発生中
CON
SET R50008               ; 全体ERROR
CON
SET R50111               ; ST1部ｴﾗｰ発生中
CON
SET R50501               ; Err01
CON
JMP @MR102
MOV #1 DM400             ; ﾒｯｾｰｼﾞNo.
STG @MR102
AND R50008               ; 全体ERROR
JMP @MR103
STG @MR103
ANB R50008               ; 全体ERROR
RES @MR101               ; ｴﾗｰ1発生中
CON
SET @MR107               ; ｴﾗｰ解除
CON
ENDS
;Error　2　ST1部ﾜｰｸ浮き検出
STG @MR108               ; ﾜｰｸ浮き異常
ANB R50008               ; 全体ERROR
SET @MR109               ; ｴﾗｰ2発生中
CON
SET R50008               ; 全体ERROR
CON
SET R50111               ; ST1部ｴﾗｰ発生中
CON
SET R50502               ; Err02
CON
JMP @MR110
MOV #2 DM400             ; ﾒｯｾｰｼﾞNo.
STG @MR110
AND R50008               ; 全体ERROR
JMP @MR111
STG @MR111
ANB R50008               ; 全体ERROR
RES @MR109               ; ｴﾗｰ2発生中
CON
SET @MR115               ; ｴﾗｰ解除
CON
ENDS
;Error　3　ST1部ﾋﾟｽﾄﾝ戻り異常
STG @MR200               ; ﾋﾟｽﾄﾝ戻り異常
ANB R50008               ; 全体ERROR
SET @MR201               ; ｴﾗｰ3発生中
CON
SET R50008               ; 全体ERROR
CON
SET R50111               ; ST1部ｴﾗｰ発生中
CON
SET R50503               ; Err03
CON
JMP @MR202
MOV #3 DM400             ; ﾒｯｾｰｼﾞNo.
STG @MR202
AND R50008               ; 全体ERROR
JMP @MR203
STG @MR203
ANB R50008               ; 全体ERROR
RES @MR201               ; ｴﾗｰ3発生中
CON
SET @MR207               ; ｴﾗｰ解除
CON
ENDS
;Error　4　ST1部　CVよりﾜｰｸ給材失敗
STG @MR208               ; ST1部　CVよりﾜｰｸ給材失敗
ANB R50008               ; 全体ERROR
SET @MR209               ; ｴﾗｰ4発生中
CON
SET R50008               ; 全体ERROR
CON
SET R50111               ; ST1部ｴﾗｰ発生中
CON
SET R50504               ; Err04
CON
JMP @MR210
MOV #4 DM400             ; ﾒｯｾｰｼﾞNo.
STG @MR210
AND R50008               ; 全体ERROR
JMP @MR211
STG @MR211
ANB R50008               ; 全体ERROR
RES @MR209               ; ｴﾗｰ4発生中
CON
SET @MR215               ; ｴﾗｰ4解除
CON
ENDS
;Error　5　ST1部　ﾛｰﾀ給材PP　到着位置除材要求
STG @MR300               ; 到着位置除材要求
ANB R50008               ; 全体ERROR
SET @MR301
CON
SET R50008               ; 全体ERROR
CON
SET R50111               ; ST1部ｴﾗｰ発生中
CON
SET R50505               ; Err05
CON
JMP @MR302
MOV #5 DM400             ; ﾒｯｾｰｼﾞNo.
STG @MR302
AND R50008               ; 全体ERROR
JMP @MR303
STG @MR303
ANB R50008               ; 全体ERROR
RES @MR301
CON
SET @MR307               ; ｴﾗｰ5解除
CON
ENDS
;一時停止禁止処理
;
LD @MR1500               ; 一時停止禁止
OUT R50101               ; PACK UT1
END
ENDH
