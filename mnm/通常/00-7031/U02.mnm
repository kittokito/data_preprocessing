DEVICE:128
;MODULE:U02
;MODULE_TYPE:0
;  ▽_入力受け
LD X100                  ; INDEX 旋回端
AND M124                 ; 基板投入ｴﾘｱｾﾝｻ正常
LD T105                  ; INDEX旋回確認ﾀｲﾏ
AND X100                 ; INDEX 旋回端
ORL
TMH K105 K10             ; INDEX旋回確認ﾀｲﾏ
LD X101                  ; INDEX 旋回戻端
AND M124                 ; 基板投入ｴﾘｱｾﾝｻ正常
LD T106                  ; INDEX旋回戻確認ﾀｲﾏ
AND X101                 ; INDEX 旋回戻端
ORL
TMH K106 K10             ; INDEX旋回戻確認ﾀｲﾏ
LD M124                  ; 基板投入ｴﾘｱｾﾝｻ正常
TMR K120 K5              ; ｹｰｽ基板投入部ﾗｲﾄｶｰﾃﾝ正常
LD X100                  ; INDEX 旋回端
OR X101                  ; INDEX 旋回戻端
OUT M2790                ; INDEX正常位置
;<h1/>□_装置状態・動作条件
LD M124                  ; 基板投入ｴﾘｱｾﾝｻ正常
AND X105                 ; 基板傾き補正ﾁｬｯｸ 上昇端
AND W102F.4              ; BOARD_BUILT-IN_RB_PEND
ANB W102F.9              ; BOARD_BUILT-IN_RB_PRUN
AND W102F.10             ; BOARD_BUILT-IN_RB_PORG
AND M4510                ; UT4→UT2:RB干渉外
OUT M2610                ; INDEX動作可能
;  ▽_原点
LD M2800                 ; Cycle1原点
LD M2820                 ; Cycle2原点
AND M2840                ; Cycle3原点
OR CR2002                ; 常時ON
ANL
OUT M2980                ; ﾕﾆｯﾄ2原点
;  ▽_即停止異常
LDB M2801                ; Cycle1即停止異常
ANB M2821                ; Cycle2即停止異常
ANB M2841                ; Cycle3即停止異常
INV
OUT M2981                ; ﾕﾆｯﾄ2即停止異常
;  ▽_ﾕﾆｯﾄ起動条件
LD CR2003                ; 常時OFF
OUT M2982                ; ﾕﾆｯﾄ2起動条件
;  ▽_原点復帰OFF
LDB M50                  ; 運転準備
LDB M51                  ; 即停止異常(緊急停止)
ANB M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ANB M60                  ; ｴﾗｰ発生
INV
ORL
LDB T15                  ; 強制停止ONﾀｲﾏ
ANB M3995                ; ﾕﾆｯﾄ3原点復帰中断
INV
ORL
OUT M2983                ; ﾕﾆｯﾄ2_原点復帰起動OFF
;  ▽_原点復帰中
LD M82                   ; 原点復帰開始
ANB M2984                ; ﾕﾆｯﾄ2原点復帰中
OR M2984                 ; ﾕﾆｯﾄ2原点復帰中
ANB M2983                ; ﾕﾆｯﾄ2_原点復帰起動OFF
ANB M2969                ; Org_StepEnd
OUT M2984                ; ﾕﾆｯﾄ2原点復帰中
;  ▽_サイクル起動中
LDB M2804                ; Cycle1起動中
ANB M2824                ; Cycle2起動中
ANB M2844                ; Cycle3起動中
OUB M2985                ; ﾕﾆｯﾄ2起動中
;  ▽_サイクル停止異常
LDB M2805                ; Cycle1ｻｲｸﾙ停止異常
ANB M2825                ; Cycle2ｻｲｸﾙ停止異常
ANB M2845                ; Cycle3ｻｲｸﾙ停止異常
OUB M2986                ; ﾕﾆｯﾄ2ｻｲｸﾙ停止異常
;  ▽_払い出し後に停止する異常
LDB CR2003               ; 常時OFF
OUB M2987                ; ﾕﾆｯﾄ2払出後停止異常
;  ▽_警報ﾌﾞｻﾞｰ
LDB B045                 ; 069)_INDEX組付部ｹｰｽ浮検出
ANB B047                 ; 071)_INDEX組付部基板浮検出異常
ANB B049                 ; 073)_INDEX組付部基板傾検出異常
ANB B04A                 ; 074)_INDEX組付部ｹｰｽ検出OFF
ANB B04B                 ; 075)_INDEX組付部基板検出OFF
ANB B04C                 ; 076)_INDEX組付部ﾌﾀ検出OFF
INV
OUT M2988                ; ﾕﾆｯﾄ2警報補助
;  ▽_機器準備完了
LD CR2002                ; 常時ON
OUT M2990                ; ﾕﾆｯﾄ2機器準備完了
;  ▽_一時停止異常
LDB M2806                ; Cycle1ｴﾗｰ発生(一時停止処理)
ANB M2826                ; Cycle2ｴﾗｰ発生(一時停止処理)
ANB M2846                ; Cycle3ｴﾗｰ発生(一時停止処理)
ANB M2866                ; Cycle4ｴﾗｰ発生(一時停止処理)
ANB M2886                ; Cycle5ｴﾗｰ発生(一時停止処理)
OUB M2991                ; ﾕﾆｯﾄ2ｴﾗｰ発生
;  ▽_ﾕﾆｯﾄ停止中ﾌﾗｸﾞ
LD M2809                 ; Cycle1動作無し完了
LD M2827                 ; Cycle2動作無し
AND M2847                ; Cycle3動作無し
AND M2867                ; Cycle4動作無し
AND M2887                ; Cycle5動作無し
OR CR2002                ; 常時ON
ANL
OUT M2992                ; ﾕﾆｯﾄ2動作無し確認
;  ▽_ﾕﾆｯﾄ1ﾜｰｸ無確認
LDB X110                 ; INDEX投入部ｹｰｽ検出
ANB X111                 ; INDEX投入部基板検出
ANB X112                 ; INDEX投入部ﾌﾀ検出
ANB X118                 ; INDEX組付部ｹｰｽ検出
ANB X119                 ; INDEX組付部基板検出
ANB X11A                 ; INDEX組付部ﾌﾀ検出
AND= D20201 K0           ; UT2-1_ﾜｰｸ状態(0-10)
AND= D20251 K0           ; UT2-2_ﾜｰｸ状態(0-10)
OUT M2993                ; ﾕﾆｯﾄ2ﾜｰｸ無し
LD M2902                 ; Org_S02
OR M2994                 ; ﾕﾆｯﾄ2原点復帰時投入部ﾜｰｸ有り
AND M2984                ; ﾕﾆｯﾄ2原点復帰中
OUT M2994                ; ﾕﾆｯﾄ2原点復帰時投入部ﾜｰｸ有り
LD M2904                 ; Org_S04
OR M2995                 ; ﾕﾆｯﾄ2原点復帰時組付部ﾜｰｸ有り
AND M2984                ; ﾕﾆｯﾄ2原点復帰中
OUT M2995                ; ﾕﾆｯﾄ2原点復帰時組付部ﾜｰｸ有り
LD M2906                 ; Org_S06
OR M2996                 ; ﾕﾆｯﾄ2原点復帰時ﾊﾟﾚｯﾄID異常
AND M2984                ; ﾕﾆｯﾄ2原点復帰中
OUT M2996                ; ﾕﾆｯﾄ2原点復帰時ﾊﾟﾚｯﾄID異常
;<h1/>□_自動回路
;<h1/>▽_Cycle1
LD T106                  ; INDEX旋回戻確認ﾀｲﾏ
ANB X110                 ; INDEX投入部ｹｰｽ検出
ANB X111                 ; INDEX投入部基板検出
ANB X112                 ; INDEX投入部ﾌﾀ検出
ANB X118                 ; INDEX組付部ｹｰｽ検出
ANB X119                 ; INDEX組付部基板検出
ANB X11A                 ; INDEX組付部ﾌﾀ検出
AND M301                 ; INDEXﾊﾟﾚｯﾄID OK
OUT M2800                ; Cycle1原点
LDB B040                 ; 064)_INDEX旋回CL異常
ANB B043                 ; 067)_INDEX組付部ﾜｰｸ異常投入
INV
OUT M2801                ; Cycle1即停止異常
LD M50                   ; 運転準備
ANB M2803                ; Cycle1起動OFF
ANB M2804                ; Cycle1起動中
ANB M130                 ; 一時停止
ANB M56                  ; 自動起動停止指令(ｻｲｸﾙ停止)
ANB M2808                ; U2_Cycle1払出完了
OUT M2802                ; Cycle1起動条件
LDB M50                  ; 運転準備
OR M2986                 ; ﾕﾆｯﾄ2ｻｲｸﾙ停止異常
OR M51                   ; 即停止異常(緊急停止)
OR T15                   ; 強制停止ONﾀｲﾏ
OUT M2803                ; Cycle1起動OFF
LD M73                   ; 各工程起動指令
AND M2802                ; Cycle1起動条件
OR M2804                 ; Cycle1起動中
AND M50                  ; 運転準備
ANB M2803                ; Cycle1起動OFF
ANB M2199                ; U2C1_S199__動作終了
OUT M2804                ; Cycle1起動中
LDB CR2003               ; 常時OFF
INV
OUT M2805                ; Cycle1ｻｲｸﾙ停止異常
LDB B041                 ; 065)_INDEX投入部ﾜｰｸ残
ANB B042                 ; 066)_INDEX組付部ﾜｰｸ残
INV
OUT M2806                ; Cycle1ｴﾗｰ発生(一時停止処理)
LDB Y300                 ; INDEX 旋回
ANB Y301                 ; INDEX 旋回戻
AND M124                 ; 基板投入ｴﾘｱｾﾝｻ正常
TMR K110 K10             ; ｼﾘﾝﾀﾞ動作無しﾃﾞｨﾚｲ
LDB Y301                 ; INDEX 旋回戻
AND X100                 ; INDEX 旋回端
ANB X101                 ; INDEX 旋回戻端
LDB Y300                 ; INDEX 旋回
ANB X100                 ; INDEX 旋回端
AND X101                 ; INDEX 旋回戻端
ORL
OR T110                  ; ｼﾘﾝﾀﾞ動作無しﾃﾞｨﾚｲ
OUT M2895                ; UT2 ｼﾘﾝﾀﾞ動作中無し
LDB M2000                ; U2C1_S000
ANB M2010                ; U2C1_S010
ANB M2011                ; U2C1_S011
ANB M2041                ; U2C1_S041
ANB M2061                ; U2C1_S061
ANB M2071                ; U2C1_S071
ANB M2091                ; U2C1_S091
ANB M2190                ; U2C1_S190
INV
AND M130                 ; 一時停止
OUT M2807                ; Cycle1動作無し
LD M2807                 ; Cycle1動作無し
AND M2895                ; UT2 ｼﾘﾝﾀﾞ動作中無し
ORB M2804                ; Cycle1起動中
OR M2808                 ; U2_Cycle1払出完了
OR M2809                 ; Cycle1動作無し完了
AND M130                 ; 一時停止
OUT M2809                ; Cycle1動作無し完了
;ｻｲｸﾙﾀｲﾑ計測
LD M2804                 ; Cycle1起動中
AND>= D2000 K10          ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
@INC D2899               ; ｻｲｸﾙﾀｲﾑ計測
LDF M2804                ; Cycle1起動中
BMOV D2899 D2900 K10     ; ｻｲｸﾙﾀｲﾑ計測  ｻｲｸﾙﾀｲﾑ
DW K0 D2899              ; ｻｲｸﾙﾀｲﾑ計測
;  ▽_Cycle1ｽﾃｯﾌﾟ回路
LD CR2002                ; 常時ON
ZRES M2000 M2199         ; U2C1_S000  U2C1_S199__動作終了
LDB M2804                ; Cycle1起動中
MOV K0 D2000             ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
LD M2804                 ; Cycle1起動中
MOV D2000 Z1             ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
SET M2000:Z1             ; U2C1_S000
;<h1/>▽_Cycle1動作回路
LD M2000                 ; U2C1_S000
MOV K10 D2000            ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
;<h1/>▽_S010 UT1 & UT3旋回要求確認
;UT1 & UT3→旋回可要求
LD M36                   ; 払出ﾓｰﾄﾞ
AND M2993                ; ﾕﾆｯﾄ2ﾜｰｸ無し
OUT M2521                ; 払出ﾓｰﾄﾞ開始
LD M2010                 ; U2C1_S010
ANB M130                 ; 一時停止
MPS
LD M1500                 ; UT1→UT2:旋回可要求
AND M3500                ; UT3→UT2:旋回可要求
ANL
INC D2000                ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
MPP
LDB M1985                ; ﾕﾆｯﾄ1起動中
ANB M3985                ; ﾕﾆｯﾄ3起動中
AND M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ANL
MOV K190 D2000           ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
LD CR2002                ; 常時ON
LD= D20201 K0            ; UT2-1_ﾜｰｸ状態(0-10)
ANB M2522                ; INDEX旋回判定
OR= D20201 K20           ; UT2-1_ﾜｰｸ状態(0-10)
LD= D20201 K10           ; UT2-1_ﾜｰｸ状態(0-10)
AND= D20203 K2           ; UT2-1_ﾌﾟﾚｽOK/NG(1:OK 2:NG)
AND M176                 ; 嵌合NG時   刻印無し
ORL
OR= D20201 K2            ; UT2-1_ﾜｰｸ状態(0-10)
ANL
OUT M2520                ; INDEX旋回戻判定
LD CR2002                ; 常時ON
LD= D20251 K20           ; UT2-2_ﾜｰｸ状態(0-10)
LD= D20251 K10           ; UT2-2_ﾜｰｸ状態(0-10)
AND= D20253 K2           ; UT2-2_ﾌﾟﾚｽOK/NG(1:OK 2:NG)
AND M176                 ; 嵌合NG時   刻印無し
ORL
OR= D20251 K2            ; UT2-2_ﾜｰｸ状態(0-10)
ANL
OUT M2522                ; INDEX旋回判定
LD M2011                 ; U2C1_S011
MPS
LDB M130                 ; 一時停止
ANB M1500                ; UT1→UT2:旋回可要求
ANB M3500                ; UT3→UT2:旋回可要求
ANL
MPS
AND M2520                ; INDEX旋回戻判定
MOV K40 D2000            ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
MPP
ANB M2520                ; INDEX旋回戻判定
MOV K70 D2000            ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
MPP
OUT M2500                ; U2→U1&U3 旋回可要求受付
;<h1/>▽_S040 旋回戻動作
;INDEX 旋回戻
LD M2040                 ; U2C1_S040
LD X105                  ; 基板傾き補正ﾁｬｯｸ 上昇端
AND W102F.4              ; BOARD_BUILT-IN_RB_PEND
ANB W102F.9              ; BOARD_BUILT-IN_RB_PRUN
AND W102F.10             ; BOARD_BUILT-IN_RB_PORG
AND M4510                ; UT4→UT2:RB干渉外
OR M2671                 ; INDEX 旋回戻要求
ANL
MPS
AND T106                 ; INDEX旋回戻確認ﾀｲﾏ
INC D2000                ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
MPP
OUT M2671                ; INDEX 旋回戻要求
;UT2→UT3:ﾌﾟﾚｽ可要求(旋回戻側)
LD M2041                 ; U2C1_S041
ANB M130                 ; 一時停止
MPS
LD= D20201 K0            ; UT2-1_ﾜｰｸ状態(0-10)
OR= D20201 K20           ; UT2-1_ﾜｰｸ状態(0-10)
ANL
MPS
AND= D20251 K1           ; UT2-2_ﾜｰｸ状態(0-10)
MPS
AND M3501                ; UT3→UT2:ﾌﾟﾚｽ可要求受(旋回戻側)
INC D2000                ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
MRD
OUT M2501                ; UT2→UT3:ﾌﾟﾚｽ可要求(旋回戻側)
MRD
AND M3503                ; UT3→UT2:旋回要求
MOV K70 D2000            ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
MPP
LDB M3501                ; UT3→UT2:ﾌﾟﾚｽ可要求受(旋回戻側)
ANB M3985                ; ﾕﾆｯﾄ3起動中
AND M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ANL
MOV K190 D2000           ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
MPP
AND<> D20251 K1          ; UT2-2_ﾜｰｸ状態(0-10)
MPS
AND M3502                ; UT3→UT2:ﾌﾟﾚｽSkp要求受(旋回戻側)
MOV K45 D2000            ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
MPP
OUT M2504                ; UT2→UT3:ﾌﾟﾚｽSkip要求(旋回戻側)
MPP
LD<> D20201 K0           ; UT2-1_ﾜｰｸ状態(0-10)
AND<> D20201 K20         ; UT2-1_ﾜｰｸ状態(0-10)
ANL
MOV K50 D2000            ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
LD M2042                 ; U2C1_S042
ANB M3501                ; UT3→UT2:ﾌﾟﾚｽ可要求受(旋回戻側)
MOV K50 D2000            ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
LD M2045                 ; U2C1_S045
ANB M3502                ; UT3→UT2:ﾌﾟﾚｽSkp要求受(旋回戻側)
MOV K50 D2000            ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
;<h1/>▽_S050 除材要求(旋回戻側)
;UT2→UT1:除材要求(旋回戻側)
LD M2050                 ; U2C1_S050
MPS
LD<> D20201 K0           ; UT2-1_ﾜｰｸ状態(0-10)
AND<> D20201 K20         ; UT2-1_ﾜｰｸ状態(0-10)
ANL
MPS
AND M1502                ; UT1→UT2:除材要求受付(旋回戻側)
INC D2000                ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
MRD
OUT M2502                ; UT2→UT1:除材要求(旋回戻側)
MPP
LDB M1502                ; UT1→UT2:除材要求受付(旋回戻側)
ANB M1985                ; ﾕﾆｯﾄ1起動中
AND M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ANL
MOV K190 D2000           ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
MPP
LD= D20201 K0            ; UT2-1_ﾜｰｸ状態(0-10)
OR= D20201 K20           ; UT2-1_ﾜｰｸ状態(0-10)
ANL
MOV K60 D2000            ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
LD M2051                 ; U2C1_S051
LDB M1502                ; UT1→UT2:除材要求受付(旋回戻側)
AND= D20201 K0           ; UT2-1_ﾜｰｸ状態(0-10)
ANB X110                 ; INDEX投入部ｹｰｽ検出
ANB X111                 ; INDEX投入部基板検出
ANB X112                 ; INDEX投入部ﾌﾀ検出
LDB M1985                ; ﾕﾆｯﾄ1起動中
ANB M3985                ; ﾕﾆｯﾄ3起動中
AND M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ORL
ANL
MPS
AND= D20251 K0           ; UT2-2_ﾜｰｸ状態(0-10)
MOV K60 D2000            ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
MPP
AND<> D20251 K0          ; UT2-2_ﾜｰｸ状態(0-10)
MOV K40 D2000            ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
;<h1/>▽_S060 給材要求(旋回戻側)
;UT2→UT1:給材要求(旋回戻側)
LD M2060                 ; U2C1_S060
MPS
AND M1503                ; UT1→UT2:給材要求受付(旋回戻側)
INC D2000                ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
MRD
OUT M2503                ; UT2→UT1:給材要求(旋回戻側)
MPP
LDB M1503                ; UT1→UT2:給材要求受付(旋回戻側)
ANB M1985                ; ﾕﾆｯﾄ1起動中
LD M52                   ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
OR M36                   ; 払出ﾓｰﾄﾞ
ANL
ANL
MOV K190 D2000           ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
LD M2061                 ; U2C1_S061
ANB M130                 ; 一時停止
MPS
LDB M1503                ; UT1→UT2:給材要求受付(旋回戻側)
LD= D20201 K1            ; UT2-1_ﾜｰｸ状態(0-10)
LD X110                  ; INDEX投入部ｹｰｽ検出
LD X111                  ; INDEX投入部基板検出
OR M38                   ; 基板無ﾓｰﾄﾞ
ANL
AND X112                 ; INDEX投入部ﾌﾀ検出
OR M35                   ; 空運転ﾓｰﾄﾞ
ANL
LD M36                   ; 払出ﾓｰﾄﾞ
ANB X110                 ; INDEX投入部ｹｰｽ検出
ANB X111                 ; INDEX投入部基板検出
ANB X112                 ; INDEX投入部ﾌﾀ検出
AND T120                 ; ｹｰｽ基板投入部ﾗｲﾄｶｰﾃﾝ正常
ANB B07A                 ; 122) INDEX投入部ﾜｰｸ除去要求
ORL
ANL
LDB M1985                ; ﾕﾆｯﾄ1起動中
AND M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ORL
ANL
MOV K190 D2000           ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
MRD
LD M1523                 ; UT1→UT2:旋回要求
OR M3503                 ; UT3→UT2:旋回要求
ANL
MOV K70 D2000            ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
MPP
AND M1524                ; UT1→UT2:旋回要求
MOV K10 D2000            ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
;<h1/>▽_S070 旋回動作
;INDEX 旋回
LD M2070                 ; U2C1_S070
LD X105                  ; 基板傾き補正ﾁｬｯｸ 上昇端
AND W102F.4              ; BOARD_BUILT-IN_RB_PEND
ANB W102F.9              ; BOARD_BUILT-IN_RB_PRUN
AND W102F.10             ; BOARD_BUILT-IN_RB_PORG
AND M4510                ; UT4→UT2:RB干渉外
OR M2661                 ; INDEX 旋回要求
ANL
MPS
AND T105                 ; INDEX旋回確認ﾀｲﾏ
INC D2000                ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
MPP
OUT M2661                ; INDEX 旋回要求
;UT2→UT3:ﾌﾟﾚｽ可要求(旋回側)
LD M2071                 ; U2C1_S071
ANB M130                 ; 一時停止
MPS
LD= D20251 K0            ; UT2-2_ﾜｰｸ状態(0-10)
OR= D20251 K20           ; UT2-2_ﾜｰｸ状態(0-10)
ANL
MPS
AND= D20201 K1           ; UT2-1_ﾜｰｸ状態(0-10)
MPS
AND M3511                ; UT3→UT2:ﾌﾟﾚｽ可要求受(旋回側)
INC D2000                ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
MRD
OUT M2511                ; UT2→UT3:ﾌﾟﾚｽ可要求(旋回側)
MRD
AND M3503                ; UT3→UT2:旋回要求
MOV K40 D2000            ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
MPP
LDB M3511                ; UT3→UT2:ﾌﾟﾚｽ可要求受(旋回側)
ANB M3985                ; ﾕﾆｯﾄ3起動中
AND M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ANL
MOV K190 D2000           ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
MPP
AND<> D20201 K1          ; UT2-1_ﾜｰｸ状態(0-10)
MPS
AND M3512                ; UT3→UT2:ﾌﾟﾚｽSkp要求受(旋回側)
MOV K75 D2000            ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
MPP
OUT M2514                ; UT2→UT3:ﾌﾟﾚｽSkip要求(旋回側)
MPP
LD<> D20251 K0           ; UT2-2_ﾜｰｸ状態(0-10)
AND<> D20251 K20         ; UT2-2_ﾜｰｸ状態(0-10)
ANL
MOV K80 D2000            ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
LD M2072                 ; U2C1_S072
ANB M3511                ; UT3→UT2:ﾌﾟﾚｽ可要求受(旋回側)
MOV K80 D2000            ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
LD M2075                 ; U2C1_S075
ANB M3512                ; UT3→UT2:ﾌﾟﾚｽSkp要求受(旋回側)
MOV K80 D2000            ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
;<h1/>▽_S080 除材要求(旋回側)
;UT2→UT1:除材要求(旋回側)
LD M2080                 ; U2C1_S080
MPS
LD<> D20251 K0           ; UT2-2_ﾜｰｸ状態(0-10)
AND<> D20251 K20         ; UT2-2_ﾜｰｸ状態(0-10)
ANL
MPS
AND M1512                ; UT1→UT2:除材要求受付(旋回側)
INC D2000                ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
MRD
OUT M2512                ; UT2→UT1:除材要求(旋回側)
MPP
LDB M1512                ; UT1→UT2:除材要求受付(旋回側)
ANB M1985                ; ﾕﾆｯﾄ1起動中
AND M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ANL
MOV K190 D2000           ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
MPP
LD= D20251 K0            ; UT2-2_ﾜｰｸ状態(0-10)
OR= D20251 K20           ; UT2-2_ﾜｰｸ状態(0-10)
ANL
MOV K90 D2000            ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
LD M2081                 ; U2C1_S081
LDB M1512                ; UT1→UT2:除材要求受付(旋回側)
AND= D20251 K0           ; UT2-2_ﾜｰｸ状態(0-10)
ANB X110                 ; INDEX投入部ｹｰｽ検出
ANB X111                 ; INDEX投入部基板検出
ANB X112                 ; INDEX投入部ﾌﾀ検出
LDB M1985                ; ﾕﾆｯﾄ1起動中
ANB M3985                ; ﾕﾆｯﾄ3起動中
AND M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ORL
ANL
MPS
AND= D20201 K0           ; UT2-1_ﾜｰｸ状態(0-10)
MOV K90 D2000            ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
MPP
AND<> D20201 K0          ; UT2-1_ﾜｰｸ状態(0-10)
MOV K70 D2000            ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
;<h1/>▽_S090 給材要求(旋回側)
;UT2→UT1:給材要求(旋回側)
LD M2090                 ; U2C1_S090
MPS
AND M1513                ; UT1→UT2:給材要求受付(旋回側)
INC D2000                ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
MRD
OUT M2513                ; UT2→UT1:給材要求(旋回側)
MPP
LDB M1513                ; UT1→UT2:給材要求受付(旋回側)
ANB M1985                ; ﾕﾆｯﾄ1起動中
LD M52                   ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
OR M36                   ; 払出ﾓｰﾄﾞ
ANL
ANL
MOV K190 D2000           ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
LD M2091                 ; U2C1_S091
ANB M130                 ; 一時停止
MPS
ANB M1513                ; UT1→UT2:給材要求受付(旋回側)
MPS
LD= D20251 K1            ; UT2-2_ﾜｰｸ状態(0-10)
LD X110                  ; INDEX投入部ｹｰｽ検出
LD X111                  ; INDEX投入部基板検出
OR M38                   ; 基板無ﾓｰﾄﾞ
ANL
AND X112                 ; INDEX投入部ﾌﾀ検出
OR M35                   ; 空運転ﾓｰﾄﾞ
ANL
ANL
MOV K190 D2000           ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
MPP
LD M36                   ; 払出ﾓｰﾄﾞ
ANB X110                 ; INDEX投入部ｹｰｽ検出
ANB X111                 ; INDEX投入部基板検出
ANB X112                 ; INDEX投入部ﾌﾀ検出
AND T120                 ; ｹｰｽ基板投入部ﾗｲﾄｶｰﾃﾝ正常
ANB B07A                 ; 122) INDEX投入部ﾜｰｸ除去要求
ANL
MOV K0 D2000             ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
MRD
LDB M1985                ; ﾕﾆｯﾄ1起動中
AND M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ANL
MOV K190 D2000           ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
MRD
LD M1523                 ; UT1→UT2:旋回要求
OR M3503                 ; UT3→UT2:旋回要求
ANL
MOV K40 D2000            ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
MPP
AND M1524                ; UT1→UT2:旋回要求
MOV K10 D2000            ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
;<h1/>  ▽_ｻｲｸﾙ停止
LD M2190                 ; U2C1_S190
AND M2993                ; ﾕﾆｯﾄ2ﾜｰｸ無し
OR M2803                 ; Cycle1起動OFF
OR M2808                 ; U2_Cycle1払出完了
AND M36                  ; 払出ﾓｰﾄﾞ
OUT M2808                ; U2_Cycle1払出完了
LD M2190                 ; U2C1_S190
ANB M130                 ; 一時停止
MPS
LD M2808                 ; U2_Cycle1払出完了
ORB M36                  ; 払出ﾓｰﾄﾞ
ANL
MOV K199 D2000           ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
MPP
LD M36                   ; 払出ﾓｰﾄﾞ
ANB M2808                ; U2_Cycle1払出完了
ANL
MOV K0 D2000             ; Cycle1ｽﾃｯﾌﾟｶｳﾝﾀ
;<h1/>□_原点復帰回路
LD CR2002                ; 常時ON
ZRES M2900 M2969         ; Org_S00  Org_StepEnd
LDB M2984                ; ﾕﾆｯﾄ2原点復帰中
MOV K0 D2010             ; 原点復帰ｽﾃｯﾌﾟ
LD M2984                 ; ﾕﾆｯﾄ2原点復帰中
MOV D2010 Z1             ; 原点復帰ｽﾃｯﾌﾟ
SET M2900:Z1             ; Org_S00
;  ▽_原点復帰開始
;UT3,4原点復帰完了待ち / Waiting for UT3,4_HOME end 
LD M2900                 ; Org_S00
AND M84                  ; 原点復帰起動確認
ANB M3984                ; ﾕﾆｯﾄ3原点復帰中
MPS
ANB M4984                ; ﾕﾆｯﾄ4原点復帰中
INC D2010                ; 原点復帰ｽﾃｯﾌﾟ
MPP
LD M4968                 ; U4org_S068
AND W1011.8              ; BOARD_PP_RB_作業原点復帰完了(30)
ANL
MOV K11 D2010            ; 原点復帰ｽﾃｯﾌﾟ
;INDEX投入部ﾜｰｸ確認
LD M2901                 ; Org_S01
AND T120                 ; ｹｰｽ基板投入部ﾗｲﾄｶｰﾃﾝ正常
MPS
LDB X110                 ; INDEX投入部ｹｰｽ検出
ANB X111                 ; INDEX投入部基板検出
ANB X112                 ; INDEX投入部ﾌﾀ検出
LDB X100                 ; INDEX 旋回端
ANB X101                 ; INDEX 旋回戻端
ORL
ANL
MOV K3 D2010             ; 原点復帰ｽﾃｯﾌﾟ
MPP
LD X100                  ; INDEX 旋回端
OR X101                  ; INDEX 旋回戻端
LD X110                  ; INDEX投入部ｹｰｽ検出
OR X111                  ; INDEX投入部基板検出
OR X112                  ; INDEX投入部ﾌﾀ検出
ANL
ANL
INC D2010                ; 原点復帰ｽﾃｯﾌﾟ
LD M2902                 ; Org_S02
AND M2994                ; ﾕﾆｯﾄ2原点復帰時投入部ﾜｰｸ有り
INC D2010                ; 原点復帰ｽﾃｯﾌﾟ
;INDEX組付部ﾜｰｸ確認
LD M2903                 ; Org_S03
MPS
LDB X118                 ; INDEX組付部ｹｰｽ検出
ANB X119                 ; INDEX組付部基板検出
ANB X11A                 ; INDEX組付部ﾌﾀ検出
LDB X100                 ; INDEX 旋回端
ANB X101                 ; INDEX 旋回戻端
ORL
ANL
MOV K5 D2010             ; 原点復帰ｽﾃｯﾌﾟ
MPP
LD X100                  ; INDEX 旋回端
OR X101                  ; INDEX 旋回戻端
LD X118                  ; INDEX組付部ｹｰｽ検出
OR X119                  ; INDEX組付部基板検出
OR X11A                  ; INDEX組付部ﾌﾀ検出
ANL
ANL
INC D2010                ; 原点復帰ｽﾃｯﾌﾟ
LD M2904                 ; Org_S04
AND M2995                ; ﾕﾆｯﾄ2原点復帰時組付部ﾜｰｸ有り
INC D2010                ; 原点復帰ｽﾃｯﾌﾟ
;INDEX投入部ﾊﾟﾚｯﾄID確認
LD M2905                 ; Org_S05
MPS
AND T48                  ; INDEXﾊﾟﾚｯﾄID確認ﾃﾞｨﾚｲ
MPS
AND M301                 ; INDEXﾊﾟﾚｯﾄID OK
MOV K7 D2010             ; 原点復帰ｽﾃｯﾌﾟ
MPP
ANB M301                 ; INDEXﾊﾟﾚｯﾄID OK
INC D2010                ; 原点復帰ｽﾃｯﾌﾟ
MPP
LDB T48                  ; INDEXﾊﾟﾚｯﾄID確認ﾃﾞｨﾚｲ
ANB Y300                 ; INDEX 旋回
ANB Y301                 ; INDEX 旋回戻
ANL
MOV K7 D2010             ; 原点復帰ｽﾃｯﾌﾟ
LD M2906                 ; Org_S06
AND M2996                ; ﾕﾆｯﾄ2原点復帰時ﾊﾟﾚｯﾄID異常
INC D2010                ; 原点復帰ｽﾃｯﾌﾟ
;INDEXﾜｰｸ無し→旋回指令
;INDEXﾜｰｸ有り→除去要求
LD M2907                 ; Org_S07
MPS
LDB M2994                ; ﾕﾆｯﾄ2原点復帰時投入部ﾜｰｸ有り
ANB M2995                ; ﾕﾆｯﾄ2原点復帰時組付部ﾜｰｸ有り
ANB M2996                ; ﾕﾆｯﾄ2原点復帰時ﾊﾟﾚｯﾄID異常
AND M2610                ; INDEX動作可能
ANL
MPS
ANB M2530                ; 原点復帰時INDEX旋回記憶
INC D2010                ; 原点復帰ｽﾃｯﾌﾟ
MRD
LD M2530                 ; 原点復帰時INDEX旋回記憶
ANB M2531                ; 原点復帰時INDEX旋回戻記憶
ANL
MOV K9 D2010             ; 原点復帰ｽﾃｯﾌﾟ
MPP
LD M2530                 ; 原点復帰時INDEX旋回記憶
AND M2531                ; 原点復帰時INDEX旋回戻記憶
ANL
MOV K10 D2010            ; 原点復帰ｽﾃｯﾌﾟ
MPP
LD M2994                 ; ﾕﾆｯﾄ2原点復帰時投入部ﾜｰｸ有り
OR M2995                 ; ﾕﾆｯﾄ2原点復帰時組付部ﾜｰｸ有り
OR M2996                 ; ﾕﾆｯﾄ2原点復帰時ﾊﾟﾚｯﾄID異常
LDB M2610                ; INDEX動作可能
AND M4994                ; ﾕﾆｯﾄ4原点復帰時ﾜｰｸ有り
ORL
ANL
MOV K10 D2010            ; 原点復帰ｽﾃｯﾌﾟ
;INDEX旋回後、ﾜｰｸ再確認へ
LD M2908                 ; Org_S08
MPS
AND T105                 ; INDEX旋回確認ﾀｲﾏ
MOV K1 D2010             ; 原点復帰ｽﾃｯﾌﾟ
MPP
ANB T105                 ; INDEX旋回確認ﾀｲﾏ
OUT M2664                ; INDEX 旋回要求
LD M2908                 ; Org_S08
AND T105                 ; INDEX旋回確認ﾀｲﾏ
LD M2530                 ; 原点復帰時INDEX旋回記憶
AND M81                  ; 原点復帰動作中
ORL
OUT M2530                ; 原点復帰時INDEX旋回記憶
;INDEX旋回戻後、ﾜｰｸ再確認へ
LD M2909                 ; Org_S09
MPS
AND T106                 ; INDEX旋回戻確認ﾀｲﾏ
MOV K1 D2010             ; 原点復帰ｽﾃｯﾌﾟ
MPP
ANB T106                 ; INDEX旋回戻確認ﾀｲﾏ
OUT M2674                ; INDEX 旋回戻要求
LD M2909                 ; Org_S09
AND T106                 ; INDEX旋回戻確認ﾀｲﾏ
LD M2531                 ; 原点復帰時INDEX旋回戻記憶
AND M81                  ; 原点復帰動作中
ORL
OUT M2531                ; 原点復帰時INDEX旋回戻記憶
;他STﾜｰｸ残確認終了待ち
LD M2910                 ; Org_S10
LDB M1984                ; ﾕﾆｯﾄ1原点復帰中
OR M1994                 ; ﾕﾆｯﾄ1原点復帰時NGBOXﾜｰｸ有り
ANL
LDB M4984                ; ﾕﾆｯﾄ4原点復帰中
OR M4994                 ; ﾕﾆｯﾄ4原点復帰時ﾜｰｸ有り
ANL
LDB M5984                ; ﾕﾆｯﾄ5原点復帰中
OR M5994                 ; ﾕﾆｯﾄ5原点復帰時ｶﾊﾞｰID異常
OR M5995                 ; ﾕﾆｯﾄ5原点復帰時保護ｶﾞﾗｽ異常
ANL
LDB M6984                ; ﾕﾆｯﾄ6原点復帰中
LD M6968                 ; U6org_S068
LD M6994                 ; ﾕﾆｯﾄ6原点復帰時ﾊﾟﾚｯﾄ有り
OR M6995                 ; ﾕﾆｯﾄ6原点復帰時NGﾜｰｸ有り
ANL
ORL
ANL
INC D2010                ; 原点復帰ｽﾃｯﾌﾟ
;全STﾜｰｸ残ﾌﾗｸﾞ確認
LD M2911                 ; Org_S11
MPS
LDB M1994                ; ﾕﾆｯﾄ1原点復帰時NGBOXﾜｰｸ有り
ANB M2994                ; ﾕﾆｯﾄ2原点復帰時投入部ﾜｰｸ有り
ANB M2995                ; ﾕﾆｯﾄ2原点復帰時組付部ﾜｰｸ有り
ANB M2996                ; ﾕﾆｯﾄ2原点復帰時ﾊﾟﾚｯﾄID異常
ANB M4994                ; ﾕﾆｯﾄ4原点復帰時ﾜｰｸ有り
ANB M5994                ; ﾕﾆｯﾄ5原点復帰時ｶﾊﾞｰID異常
ANB M5995                ; ﾕﾆｯﾄ5原点復帰時保護ｶﾞﾗｽ異常
ANB M6994                ; ﾕﾆｯﾄ6原点復帰時ﾊﾟﾚｯﾄ有り
ANB M6995                ; ﾕﾆｯﾄ6原点復帰時NGﾜｰｸ有り
ANL
MOV K31 D2010            ; 原点復帰ｽﾃｯﾌﾟ
MPP
TMR K129 K10             ; ｴﾗｰﾃﾞｨﾚｲ
CON
AND T129                 ; ｴﾗｰﾃﾞｨﾚｲ
INC D2010                ; 原点復帰ｽﾃｯﾌﾟ
;◇ﾜｰｸ残ｴﾗｰ発報
LD M2912                 ; Org_S12
LDB M1994                ; ﾕﾆｯﾄ1原点復帰時NGBOXﾜｰｸ有り
OR B020                  ; 032)NGBOXﾜｰｸ残
ANL
LDB M2994                ; ﾕﾆｯﾄ2原点復帰時投入部ﾜｰｸ有り
OR B041                  ; 065)_INDEX投入部ﾜｰｸ残
ANL
LDB M2995                ; ﾕﾆｯﾄ2原点復帰時組付部ﾜｰｸ有り
OR B042                  ; 066)_INDEX組付部ﾜｰｸ残
ANL
LDB M2996                ; ﾕﾆｯﾄ2原点復帰時ﾊﾟﾚｯﾄID異常
OR B037                  ; 055)_INDEX投入部ﾊﾟﾚｯﾄID不一致
ANL
LDB M4994                ; ﾕﾆｯﾄ4原点復帰時ﾜｰｸ有り
OR B082                  ; 130)_搬送RBﾜｰｸ残
ANL
LDB M5994                ; ﾕﾆｯﾄ5原点復帰時ｶﾊﾞｰID異常
OR B0A7                  ; 167)刻印部ｶﾊﾞｰID異常
ANL
LDB M5995                ; ﾕﾆｯﾄ5原点復帰時保護ｶﾞﾗｽ異常
OR B0A9                  ; 169)ﾚｰｻﾞｰ保護ｶﾞﾗｽ検出OFF異常
ANL
LDB M6994                ; ﾕﾆｯﾄ6原点復帰時ﾊﾟﾚｯﾄ有り
OR B0C6                  ; 198)_OK排出ﾊﾟﾚｯﾄ残
ANL
LDB M6995                ; ﾕﾆｯﾄ6原点復帰時NGﾜｰｸ有り
OR B0C7                  ; 199)_NG置台ﾜｰｸ残
ANL
MOV K68 D2010            ; 原点復帰ｽﾃｯﾌﾟ
@FMOV K0 D20200 K400     ; UT2-1
;終了
LD M2931                 ; Org_S31
AND M2980                ; ﾕﾆｯﾄ2原点
ANB M82                  ; 原点復帰開始
MOV K69 D2010            ; 原点復帰ｽﾃｯﾌﾟ
LD M2931                 ; Org_S31
@FMOV K0 D20200 K400     ; UT2-1
;<h1/>□_手動回路
LD M31                   ; 手動ﾓｰﾄﾞ
AND M124                 ; 基板投入ｴﾘｱｾﾝｻ正常
AND M32                  ; ﾒｲﾝ手動操作可能条件
ANB M2984                ; ﾕﾆｯﾄ2原点復帰中
ANB M2985                ; ﾕﾆｯﾄ2起動中
MC
;	INDEX旋回
LD X105                  ; 基板傾き補正ﾁｬｯｸ 上昇端
AND W102F.4              ; BOARD_BUILT-IN_RB_PEND
ANB W102F.9              ; BOARD_BUILT-IN_RB_PRUN
AND W102F.10             ; BOARD_BUILT-IN_RB_PORG
AND M4510                ; UT4→UT2:RB干渉外
ANB W1013.6              ; BOARD_PP_RB_自動運転中(66)
AND W1015.0              ; BOARD_PP_RB_ｴﾘｱ10_INDEX外(120)
OUT M2700                ; INDEX 旋回条件
LDP B10A0                ; UNIT2-1-1 TP-PB
ANB B10A1                ; UNIT2-1-2 TP-PB
ORP M5504                ; U5→U2:INDEX旋回要求
ORP M3537                ; U3→U2:INDEX旋回要求
ORP M3539                ; U3→U2:INDEX旋回要求
AND M2700                ; INDEX 旋回条件
LD M2701                 ; MUN_INDEX 旋回指令
ANB M2703                ; MUN_INDEX 旋回戻指令
ORL
OUT M2701                ; MUN_INDEX 旋回指令
LD X105                  ; 基板傾き補正ﾁｬｯｸ 上昇端
AND W102F.4              ; BOARD_BUILT-IN_RB_PEND
ANB W102F.9              ; BOARD_BUILT-IN_RB_PRUN
AND W102F.10             ; BOARD_BUILT-IN_RB_PORG
AND M4510                ; UT4→UT2:RB干渉外
ANB W1013.6              ; BOARD_PP_RB_自動運転中(66)
AND W1015.0              ; BOARD_PP_RB_ｴﾘｱ10_INDEX外(120)
OUT M2702                ; INDEX 旋回戻条件
LDP B10A1                ; UNIT2-1-2 TP-PB
ANB B10A0                ; UNIT2-1-1 TP-PB
OR M5503                 ; U5→U2:INDEX旋回戻要求
OR M3536                 ; U3→U2:INDEX旋回戻要求
OR M3538                 ; U3→U2:INDEX旋回戻要求
AND M2702                ; INDEX 旋回戻条件
LD M2703                 ; MUN_INDEX 旋回戻指令
ANB M2701                ; MUN_INDEX 旋回指令
ORL
OUT M2703                ; MUN_INDEX 旋回戻指令
;
MCR
;<h1/>□_出力回路
;<h1/>____▼_SOL
LD M50                   ; 運転準備
AND M123                 ; 安全扉正常
ANB M51                  ; 即停止異常(緊急停止)
MC
;	INDEX旋回
LDB M2701                ; MUN_INDEX 旋回指令
ANB M2661                ; INDEX 旋回要求
ANB M2662                ; INDEX 旋回要求
ANB M2663                ; INDEX 旋回要求
ANB M2664                ; INDEX 旋回要求
INV
LDB M3541                ; INDEX 旋回
ANB M3542                ; INDEX 旋回
ANB M3543                ; INDEX 旋回
ANB M3544                ; INDEX 旋回
INV
ORL
LD M2660                 ; INDEX 旋回補助
ANB M2670                ; INDEX 旋回戻補助
ORL
OUT M2660                ; INDEX 旋回補助
LD M2660                 ; INDEX 旋回補助
AND T120                 ; ｹｰｽ基板投入部ﾗｲﾄｶｰﾃﾝ正常
LD Y300                  ; INDEX 旋回
ANB Y301                 ; INDEX 旋回戻
AND X100                 ; INDEX 旋回端
ORL
OUT Y300                 ; INDEX 旋回
LDB M2703                ; MUN_INDEX 旋回戻指令
ANB M2671                ; INDEX 旋回戻要求
ANB M2672                ; INDEX 旋回戻要求
ANB M2673                ; INDEX 旋回戻要求
ANB M2674                ; INDEX 旋回戻要求
INV
LDB M3545                ; INDEX 旋回戻し
ANB M3546                ; INDEX 旋回戻し
ANB M3547                ; INDEX 旋回戻し
ANB M3548                ; INDEX 旋回戻し
INV
ORL
LD M2670                 ; INDEX 旋回戻補助
ANB M2660                ; INDEX 旋回補助
ORL
OUT M2670                ; INDEX 旋回戻補助
LD M2670                 ; INDEX 旋回戻補助
AND T120                 ; ｹｰｽ基板投入部ﾗｲﾄｶｰﾃﾝ正常
LDB Y300                 ; INDEX 旋回
AND Y301                 ; INDEX 旋回戻
AND X101                 ; INDEX 旋回戻端
ORL
OUT Y301                 ; INDEX 旋回戻
MCR
;<h1/>____▼_Tp出力
LD Y300                  ; INDEX 旋回
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR X100                  ; INDEX 旋回端
OUT B15A0
LD Y301                  ; INDEX 旋回戻
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR X101                  ; INDEX 旋回戻端
OUT B15A1
;<h1/>□_異常回路
;B040 INDEX旋回CL異常
LD Y300                  ; INDEX 旋回
ANB X100                 ; INDEX 旋回端
LD Y301                  ; INDEX 旋回戻
ANB X101                 ; INDEX 旋回戻端
ORL
LD X100                  ; INDEX 旋回端
AND X101                 ; INDEX 旋回戻端
ORL
LD B040                  ; 064)_INDEX旋回CL異常
ANB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
ORL
MPS
AND T101                 ; INDEX旋回CLﾀｲﾏ
OUT B040                 ; 064)_INDEX旋回CL異常
MPP
TMR K101 K30             ; INDEX旋回CLﾀｲﾏ
LDP B040                 ; 064)_INDEX旋回CL異常
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H0040 D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
;原点復帰時INDEX投入ﾜｰｸ残
LD M2912                 ; Org_S12
AND M2994                ; ﾕﾆｯﾄ2原点復帰時投入部ﾜｰｸ有り
LD B041                  ; 065)_INDEX投入部ﾜｰｸ残
ANB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
ORL
OUT B041                 ; 065)_INDEX投入部ﾜｰｸ残
LDP B041                 ; 065)_INDEX投入部ﾜｰｸ残
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H0041 D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
;原点復帰時INDEX組付ﾜｰｸ残
LD M2912                 ; Org_S12
AND M2995                ; ﾕﾆｯﾄ2原点復帰時組付部ﾜｰｸ有り
LD B042                  ; 066)_INDEX組付部ﾜｰｸ残
ANB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
ORL
OUT B042                 ; 066)_INDEX組付部ﾜｰｸ残
LDP B042                 ; 066)_INDEX組付部ﾜｰｸ残
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H0042 D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
;INDEX組付部ﾜｰｸ異常投入
LD M73                   ; 各工程起動指令
ANB M130                 ; 一時停止
LD= D20201 K0            ; UT2-1_ﾜｰｸ状態(0-10)
AND T105                 ; INDEX旋回確認ﾀｲﾏ
LD= D20251 K0            ; UT2-2_ﾜｰｸ状態(0-10)
AND T106                 ; INDEX旋回戻確認ﾀｲﾏ
ORL
ANL
LD X118                  ; INDEX組付部ｹｰｽ検出
OR X119                  ; INDEX組付部基板検出
OR X11A                  ; INDEX組付部ﾌﾀ検出
ANL
LD B043                  ; 067)_INDEX組付部ﾜｰｸ異常投入
ANB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
ORL
MPS
TMR K102 K10             ; INDEX組付部ﾜｰｸ異常投入ﾀｲﾏ
MPP
AND T102                 ; INDEX組付部ﾜｰｸ異常投入ﾀｲﾏ
OUT B043                 ; 067)_INDEX組付部ﾜｰｸ異常投入
LDP B043                 ; 067)_INDEX組付部ﾜｰｸ異常投入
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H0043 D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
;
LD CR2003                ; 常時OFF
LD B044                  ; 068)_
ANB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
ORL
OUT B044                 ; 068)_
LDP B044                 ; 068)_
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H0044 D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
;INDEX 組付部ｹｰｽ浮検出
LDB M2501                ; UT2→UT3:ﾌﾟﾚｽ可要求(旋回戻側)
ANB M2511                ; UT2→UT3:ﾌﾟﾚｽ可要求(旋回側)
INV
LDB B1A01                ; INDEX 組付部ｹｰｽ浮検出1
ORB B1A02                ; INDEX 組付部ｹｰｽ浮検出2
ANL
AND X118                 ; INDEX組付部ｹｰｽ検出
AND M3011                ; U3C1_S011
LD B045                  ; 069)_INDEX組付部ｹｰｽ浮検出
ANB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
ANB M1042                ; U1C1_S042
ANB M1052                ; U1C1_S052
ORL
MPS
AND M73                  ; 各工程起動指令
TMR K140 K10             ; Error delay
MPP
AND T140                 ; Error delay
OUT B045                 ; 069)_INDEX組付部ｹｰｽ浮検出
LDP B045                 ; 069)_INDEX組付部ｹｰｽ浮検出
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H0045 D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
;
LD CR2003                ; 常時OFF
LD B046                  ; 070)_
ANB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
ORL
OUT B046                 ; 070)_
LDP B046                 ; 070)_
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H0046 D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
;INDEX 組付部基板浮検出
LDB M2501                ; UT2→UT3:ﾌﾟﾚｽ可要求(旋回戻側)
ANB M2511                ; UT2→UT3:ﾌﾟﾚｽ可要求(旋回側)
INV
LDB B1A03                ; INDEX 組付部基板浮検出1
ORB B1A04                ; INDEX 組付部基板浮検出2
ANL
AND X119                 ; INDEX組付部基板検出
AND M3011                ; U3C1_S011
LD B047                  ; 071)_INDEX組付部基板浮検出異常
ANB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
ANB M1042                ; U1C1_S042
ANB M1052                ; U1C1_S052
ORL
MPS
AND M73                  ; 各工程起動指令
TMR K141 K10             ; Error delay
MPP
AND T141                 ; Error delay
OUT B047                 ; 071)_INDEX組付部基板浮検出異常
LDP B047                 ; 071)_INDEX組付部基板浮検出異常
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H0047 D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
;
LD CR2003                ; 常時OFF
LD B048                  ; 072)_
ANB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
ORL
OUT B048                 ; 072)_
LDP B048                 ; 072)_
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H0048 D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
;INDEX 組付部基板傾検出異常
LDB M2501                ; UT2→UT3:ﾌﾟﾚｽ可要求(旋回戻側)
ANB M2511                ; UT2→UT3:ﾌﾟﾚｽ可要求(旋回側)
INV
ANB B1A05                ; INDEX 組付部基板傾検出
AND X119                 ; INDEX組付部基板検出
AND M3011                ; U3C1_S011
LD B049                  ; 073)_INDEX組付部基板傾検出異常
ANB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
ANB M1042                ; U1C1_S042
ANB M1052                ; U1C1_S052
ORL
MPS
LDB M38                  ; 基板無ﾓｰﾄﾞ
AND M73                  ; 各工程起動指令
ANL
TMR K142 K10             ; Error delay
MPP
AND T142                 ; Error delay
OUT B049                 ; 073)_INDEX組付部基板傾検出異常
LDP B049                 ; 073)_INDEX組付部基板傾検出異常
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H0049 D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
;INDEX組付部ｹｰｽ検出OFF
LDB M2501                ; UT2→UT3:ﾌﾟﾚｽ可要求(旋回戻側)
ANB M2511                ; UT2→UT3:ﾌﾟﾚｽ可要求(旋回側)
INV
ANB X118                 ; INDEX組付部ｹｰｽ検出
AND M3011                ; U3C1_S011
LD B04A                  ; 074)_INDEX組付部ｹｰｽ検出OFF
ANB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
ANB M1042                ; U1C1_S042
ANB M1052                ; U1C1_S052
ORL
ANB M35                  ; 空運転ﾓｰﾄﾞ
AND M73                  ; 各工程起動指令
OUT B04A                 ; 074)_INDEX組付部ｹｰｽ検出OFF
LDP B04A                 ; 074)_INDEX組付部ｹｰｽ検出OFF
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H004A D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
;INDEX組付部基板検出OFF
LDB M2501                ; UT2→UT3:ﾌﾟﾚｽ可要求(旋回戻側)
ANB M2511                ; UT2→UT3:ﾌﾟﾚｽ可要求(旋回側)
INV
ANB X119                 ; INDEX組付部基板検出
AND M3011                ; U3C1_S011
LD B04B                  ; 075)_INDEX組付部基板検出OFF
ANB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
ANB M1042                ; U1C1_S042
ANB M1052                ; U1C1_S052
ORL
ANB M35                  ; 空運転ﾓｰﾄﾞ
ANB M38                  ; 基板無ﾓｰﾄﾞ
AND M73                  ; 各工程起動指令
OUT B04B                 ; 075)_INDEX組付部基板検出OFF
LDP B04B                 ; 075)_INDEX組付部基板検出OFF
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H004B D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
;INDEX組付部ﾌﾀ検出OFF
LDB M2501                ; UT2→UT3:ﾌﾟﾚｽ可要求(旋回戻側)
ANB M2511                ; UT2→UT3:ﾌﾟﾚｽ可要求(旋回側)
INV
ANB X11A                 ; INDEX組付部ﾌﾀ検出
AND M3011                ; U3C1_S011
LD B04C                  ; 076)_INDEX組付部ﾌﾀ検出OFF
ANB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
ANB M1042                ; U1C1_S042
ANB M1052                ; U1C1_S052
ORL
ANB M35                  ; 空運転ﾓｰﾄﾞ
AND M73                  ; 各工程起動指令
OUT B04C                 ; 076)_INDEX組付部ﾌﾀ検出OFF
LDP B04C                 ; 076)_INDEX組付部ﾌﾀ検出OFF
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H004C D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
;ﾌﾞｻﾞｰ発生回路
LD<>.D B040 D2012        ; 064)_INDEX旋回CL異常  ﾌﾞｻﾞｰSTOP監視ｴﾘｱ
AND<>.D B040 K0          ; 064)_INDEX旋回CL異常
OUT M2989                ; ﾕﾆｯﾄ2異常BZ補助
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR M111                  ; 異常ﾘｾｯﾄﾊﾟﾙｽ
MOV.D B040 D2012         ; 064)_INDEX旋回CL異常  ﾌﾞｻﾞｰSTOP監視ｴﾘｱ
LD=.D B040 K0            ; 064)_INDEX旋回CL異常
@MOV.D K0 D2012          ; ﾌﾞｻﾞｰSTOP監視ｴﾘｱ
END
ENDH
