DEVICE:53
;MODULE:UNIT12_ST1
;MODULE_TYPE:0
;SCRIPT_TYPE:
;<h1/>□_入力受け
;関連する入力受け(ｾﾝｻのﾃﾞｨﾚｲﾀｲﾏ等)を必要があれば作成する。
;通常は入力ﾕﾆｯﾄに入力時定数(ﾃﾞｨﾚｲ)があるので直接使用しても問題は無い。
LD M123                  ; 安全扉正常
OR M39                   ; ｴﾘｱｾﾝｻｰ解除ﾓｰﾄﾞ
TMR K1201 K5             ; 装置扉閉確認
;ｺﾝﾀｸﾄﾍｯﾄﾞID
LD X1228                 ; 電特ST1_ﾍｯﾄﾞID_1
OUT D6606.0
LD X1229                 ; 電特ST1_ﾍｯﾄﾞID_2
OUT D6606.1
LD X122A                 ; 電特ST1_ﾍｯﾄﾞID_3
OUT D6606.2
;ﾊﾟﾚｯﾄID
LD X122C                 ; 電特ST1_ﾊﾟﾚｯﾄID_1
OUT D6607.0
LD X122D                 ; 電特ST1_ﾊﾟﾚｯﾄID_2
OUT D6607.1
LD X122E                 ; 電特ST1_ﾊﾟﾚｯﾄID_3
OUT D6607.2
;ＩＤ保持
LD M71                   ; 自動運転開始BZ
AND L1200                ; FBTST1_有効状態
LD M6912                 ; ST1_ID保持ﾄﾘｶﾞ
ANB M6910                ; ST1_無効中
ORL
AND M71                  ; 自動運転開始BZ
OUT M6912                ; ST1_ID保持ﾄﾘｶﾞ
;____ｺﾝﾀｸﾄﾍｯﾄﾞＩＤ保持
;※PC送信用は生ﾃﾞｰﾀに変更
LD L1200                 ; FBTST1_有効状態
MPS
TMR K1206 K5             ; FBTST2_ｺﾝﾀｸﾄﾍｯﾄﾞID_更新_DLY
MPP
AND T1206                ; FBTST2_ｺﾝﾀｸﾄﾍｯﾄﾞID_更新_DLY
@MOV D6606 D6600         ; FBTST1_ｺﾝﾀｸﾄﾍｯﾄﾞID_Copy  FBTST1_ｺﾝﾀｸﾄﾍｯﾄﾞID
LD CR2002                ; 常時ON
MOV D6606 W0128          ; FBTST1_ｺﾝﾀｸﾄﾍｯﾄﾞID_Copy  FBT検査ｽﾃｰｼﾞ#1ﾃｽﾄﾍｯﾄﾞID
LDB L1200                ; FBTST1_有効状態
MOV K0 D6600             ; FBTST1_ｺﾝﾀｸﾄﾍｯﾄﾞID
;____ﾊﾟﾚｯﾄＩＤ保持
LD L1200                 ; FBTST1_有効状態
LD M6621                 ; RB3_ﾜｰｸ受取り位置(ID確認位置)
OR T1207                 ; FBTST2_ﾊﾟﾚｯﾄID_更新_DLY
ANL
TMR K1207 K5             ; FBTST2_ﾊﾟﾚｯﾄID_更新_DLY
@MOV D6607 D6601         ; FBTST1_ﾊﾟﾚｯﾄID_ｾﾝｻ状態  FBTST1_ﾊﾟﾚｯﾄID
LD CR2002                ; 常時ON
MOV D6601 W0124          ; FBTST1_ﾊﾟﾚｯﾄID  FBT検査ｽﾃｰｼﾞ#1ﾊﾟﾚｯﾄ治具ID
LDB L1200                ; FBTST1_有効状態
MOV K0 D6601             ; FBTST1_ﾊﾟﾚｯﾄID
;<h1/>__ST有効/無効選択
;段取り状態中ﾌﾗｸﾞの追加
;自動中は段取り状態中に、ST上のﾜｰｸ無、RBﾊﾝﾄﾞﾜｰｸ無し、供給部ﾜｰｸ無しにて無効状態OKとなる
LDB X1300                ; ST1_有効/無効選択_SW
ANB B11EA                ; ST2電特検査_有効/無効_Tpb
INV
OUT M6904                ; ST1電特検査_有効/無効SW
LD M71                   ; 自動運転開始BZ
LDB M3102                ; ﾊﾝﾄﾞ1_FBT検査品
ANB M3111                ; ﾊﾝﾄﾞ1_FBTST1再検品
OR M3103                 ; ﾊﾝﾄﾞ1_検査完了品(排出ﾜｰｸ)
ANL
LDB M3152                ; ﾊﾝﾄﾞ2_FBT検査品
ANB M3161                ; ﾊﾝﾄﾞ2_FBTST1再検品
OR M3153                 ; ﾊﾝﾄﾞ2_検査完了品(排出ﾜｰｸ)
ANL
AND= D6701 K0            ; 1ST_ﾜｰｸ有無記憶
LDB M6985                ; 電特ST1起動中
LD M6501                 ; U12-1_S1_ﾜｰｸ供給待ち
ANB M2962                ; 【搬送】搬送→FBT_ST1搬送開始
ORL
ANL
ANB M3230                ; ﾊﾝﾄﾞ1_FBTST1給材中ﾌﾗｸﾞ
ANB M3231                ; ﾊﾝﾄﾞ2_FBTST1給材中ﾌﾗｸﾞ
OUT M6907                ; ST1_自動中無効条件OK
LDB M71                  ; 自動運転開始BZ
OR M6907                 ; ST1_自動中無効条件OK
OUT M6908                ; ST1_無効OK条件
LD M6909                 ; 電特ST1_無効予約(自動運転)
ANB M6910                ; ST1_無効中
ANP M6904                ; ST1電特検査_有効/無効SW
ANB W04.0                ; FBTｽﾃｰｼﾞ#1 無効予約要求
OUT M6911                ; ST1_予約ｷｬﾝｾﾙ
LDP M6904                ; ST1電特検査_有効/無効SW
ANB W04.0                ; FBTｽﾃｰｼﾞ#1 無効予約要求
ORP W04.0                ; FBTｽﾃｰｼﾞ#1 無効予約要求
AND L1200                ; FBTST1_有効状態
AND M71                  ; 自動運転開始BZ
ANB M6909                ; 電特ST1_無効予約(自動運転)
LD M6909                 ; 電特ST1_無効予約(自動運転)
ANB M6910                ; ST1_無効中
ANB M6911                ; ST1_予約ｷｬﾝｾﾙ
ORL
OUT M6909                ; 電特ST1_無効予約(自動運転)
LD M6909                 ; 電特ST1_無効予約(自動運転)
AND M6908                ; ST1_無効OK条件
LDP M6904                ; ST1電特検査_有効/無効SW
ANB W04.0                ; FBTｽﾃｰｼﾞ#1 無効予約要求
ORP W04.0                ; FBTｽﾃｰｼﾞ#1 無効予約要求
ANB M41                  ; ﾕﾆｯﾄ_起動中
ORL
LDB B0182                ; B182_387)ST1_ﾃｽﾄﾍｯﾄﾞID_不一致
ANB B0183                ; B183_388)ST1_ﾊﾟﾚｯﾄID_不一致
INV
MEP
ORL
LDB M300                 ; PC通信正常
ANB M3                   ; OFFLINE_MODE
ORL
LD M6910                 ; ST1_無効中
ANB L1200                ; FBTST1_有効状態
ORL
OUT M6910                ; ST1_無効中
;<h1/>__ST_有効処理
LDP M6904                ; ST1電特検査_有効/無効SW
LD<> D6606 K0            ; FBTST1_ｺﾝﾀｸﾄﾍｯﾄﾞID_Copy
AND<> D6607 K0           ; FBTST1_ﾊﾟﾚｯﾄID_ｾﾝｻ状態
AND M6621                ; RB3_ﾜｰｸ受取り位置(ID確認位置)
LD M35                   ; 空運転ﾓｰﾄﾞ
AND= D6606 K0            ; FBTST1_ｺﾝﾀｸﾄﾍｯﾄﾞID_Copy
AND= D6607 K0            ; FBTST1_ﾊﾟﾚｯﾄID_ｾﾝｻ状態
ORL
ANL
ANB L1200                ; FBTST1_有効状態
LD M6915                 ; FinalST1有効要求
ANB M6917                ; ST有効OK
ANB M6918                ; ST有効化NG
ORL
LD M300                  ; PC通信正常
OR M3                    ; OFFLINE_MODE
ANL
OUT M6915                ; FinalST1有効要求
LD M6915                 ; FinalST1有効要求
ANB M3                   ; OFFLINE_MODE
ANB M9                   ; ﾁｪｯｶｰﾁｪｯｸ有効ﾓｰﾄﾞOFF(step2でOFF)
OUT W0104.0              ; ﾁｪｯｶｰ#1確認要求
LD M6915                 ; FinalST1有効要求
LD W0104.0               ; ﾁｪｯｶｰ#1確認要求
OR M3                    ; OFFLINE_MODE
OR M9                    ; ﾁｪｯｶｰﾁｪｯｸ有効ﾓｰﾄﾞOFF(step2でOFF)
ANL
OR M6916                 ; ST有効確認要求
AND M6915                ; FinalST1有効要求
OUT M6916                ; ST有効確認要求
;有効化ok
LD M6916                 ; ST有効確認要求
LD W07.0                 ; ﾁｪｯｶｰ#1確認完了
ANB W04.0                ; FBTｽﾃｰｼﾞ#1 無効予約要求
OR M3                    ; OFFLINE_MODE
OR M9                    ; ﾁｪｯｶｰﾁｪｯｸ有効ﾓｰﾄﾞOFF(step2でOFF)
ANL
OR M6917                 ; ST有効OK
AND M6915                ; FinalST1有効要求
OUT M6917                ; ST有効OK
LD M6917                 ; ST有効OK
LD L1200                 ; FBTST1_有効状態
ANB M6910                ; ST1_無効中
ANB M6918                ; ST有効化NG
ORL
OUT L1200                ; FBTST1_有効状態
;有効化不可
LD M6916                 ; ST有効確認要求
ANB M3                   ; OFFLINE_MODE
ANB M9                   ; ﾁｪｯｶｰﾁｪｯｸ有効ﾓｰﾄﾞOFF(step2でOFF)
AND W07.0                ; ﾁｪｯｶｰ#1確認完了
AND W04.0                ; FBTｽﾃｰｼﾞ#1 無効予約要求
OR M6918                 ; ST有効化NG
AND M6915                ; FinalST1有効要求
OUT M6918                ; ST有効化NG
;JIG_ID一致確認
LD L1200                 ; FBTST1_有効状態
MPS
LD= D6600 D1717          ; FBTST1_ｺﾝﾀｸﾄﾍｯﾄﾞID  ﾊﾝﾄﾞ1_FBT検査ﾃｽﾄﾍｯﾄﾞID
AND= D6601 D1716         ; FBTST1_ﾊﾟﾚｯﾄID  ﾊﾝﾄﾞ1_FBT検査ﾊﾟﾚｯﾄID
LD M35                   ; 空運転ﾓｰﾄﾞ
AND= D6600 K0            ; FBTST1_ｺﾝﾀｸﾄﾍｯﾄﾞID
AND= D6601 K0            ; FBTST1_ﾊﾟﾚｯﾄID
ORL
ANL
OUT M6901                ; ST1-搬送ﾊﾝﾄﾞ1ID一致ﾌﾗｸﾞ
MPP
LD= D6600 D1817          ; FBTST1_ｺﾝﾀｸﾄﾍｯﾄﾞID  ﾊﾝﾄﾞ2_FBT検査ﾃｽﾄﾍｯﾄﾞID
AND= D6601 D1816         ; FBTST1_ﾊﾟﾚｯﾄID  ﾊﾝﾄﾞ2_FBT検査ﾊﾟﾚｯﾄID
LD M35                   ; 空運転ﾓｰﾄﾞ
AND= D6600 K0            ; FBTST1_ｺﾝﾀｸﾄﾍｯﾄﾞID
AND= D6601 K0            ; FBTST1_ﾊﾟﾚｯﾄID
ORL
ANL
OUT M6902                ; ST1-搬送ﾊﾝﾄﾞ2ID一致ﾌﾗｸﾞ
;<h1/>__ロボット等機器入力受け
;<h1/>□_装置状態・動作条件
;ﾕﾆｯﾄまとめ
LD M6570                 ; 電特ST1-1原点
AND M6730                ; 電特ST1-3原点
OUT M6980                ; ST1電特ST1原点
;□ 非常停止
LDB M6571                ; 電特ST1-1全異常
ANB M6731                ; 電特ST1-3全異常
INV
OUT M6981                ; 電特ST1即停止異常
;□ 起動条件
LD CR2003                ; 常時OFF
OUT M6982                ; 電特ST1起動条件
;□ 起動OFF
LDB M50                  ; 運転準備
LD M60                   ; ｴﾗｰ発生
OR M52                   ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
AND M6984                ; 電特ST1原点復帰中
ORL
OR T15                   ; 強制停止
OUT M6983                ; 電特ST1起動OFF
;□ 原点復帰
LD M82                   ; 原点復帰開始
ANB M6984                ; 電特ST1原点復帰中
OR M6984                 ; 電特ST1原点復帰中
ANB M6983                ; 電特ST1起動OFF
ANB M6991                ; 電特ST1ｴﾗｰ発生
ANB M6797                ; STEPEND
OUT M6984                ; 電特ST1原点復帰中
;□ 起動中
LDB M6574                ; 電特ST1-1起動中
ANB M6734                ; 電特ST1-3(電特検査SUB)起動中
INV
OUT M6985                ; 電特ST1起動中
;□ ｻｲｸﾙ停止異常
LDB M6575                ; 電特ST1-1ｻｲｸﾙ停止異常
ANB M6735                ; 電特ST1-3ｻｲｸﾙ停止異常
INV
OUT M6986                ; 電特ST1ｻｲｸﾙ停止異常
;□ 払出停止異常
LDB CR2003               ; 常時OFF
INV
OUT M6987                ; 電特ST1払出停止異常
;□ 警報補助
LDB CR2003               ; 常時OFF
INV
OUT M6988                ; 電特ST1警報補助
;□ 機器準備確認
LD X110C                 ; 1st(RB3)ｻｰﾎﾞ状態_SV
ANB X1109                ; 1st(RB3)運転ﾓｰﾄﾞ_RMDS
AND X110D                ; 1st(RB3)非常停止_*EMGS
AND X110E                ; 1st(RB3)ｱﾗｰﾑ_*ALM
OUT M6990                ; 電特ST1機器準備完了
;□ ｴﾗｰ発生　一時停止
LDB M6576                ; 電特ST1-1ｴﾗｰ発生
ANB M6736                ; 電特ST1-3ｴﾗｰ発生
INV
OUT M6991                ; 電特ST1ｴﾗｰ発生
;□ 動作中ﾕﾆｯﾄ無し
LD M6577                 ; 電特ST1-1動作無し
AND M6737                ; 電特ST1-3動作無し
OUT M6992                ; 電特ST1動作無し確認
;□ 払出しﾜｰｸ無し
LDB M3102                ; ﾊﾝﾄﾞ1_FBT検査品
ANB M3111                ; ﾊﾝﾄﾞ1_FBTST1再検品
ANB M3152                ; ﾊﾝﾄﾞ2_FBT検査品
ANB M3161                ; ﾊﾝﾄﾞ2_FBTST1再検品
ANB X1220                ; 電特St1部ﾜｰｸ確認(ON_有)
AND M6621                ; RB3_ﾜｰｸ受取り位置(ID確認位置)
AND M36                  ; 払出ﾓｰﾄﾞ
TMR K1214 K10
LD T1214
OUT M6993                ; 電特ST1ﾜｰｸ無し
;□ ｽﾃｯﾌﾟ起動
LD M30                   ; 自動ﾓｰﾄﾞ
OR M31                   ; 手動ﾓｰﾄﾞ
AND T1201                ; 装置扉閉確認
ANB M130                 ; 一時停止
ANB M51                  ; 即停止異常(緊急停止)
ANB M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ANB M57                  ; 全ﾕﾆｯﾄ払出完了
ANB M59                  ; 払出停止異常まとめ
ANB M60                  ; ｴﾗｰ発生
OUT M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
;<h1/>□_自動回路
;<h1/>◇_状態・動作条件(補助)
LD M6621                 ; RB3_ﾜｰｸ受取り位置(ID確認位置)
ANB X1220                ; 電特St1部ﾜｰｸ確認(ON_有)
AND= D6701 K0            ; 1ST_ﾜｰｸ有無記憶
OUT M6570                ; 電特ST1-1原点
LDB B0180                ; B180_385)ST1検査RB(RBC3)異常
ANB B0182                ; B182_387)ST1_ﾃｽﾄﾍｯﾄﾞID_不一致
ANB B0183                ; B183_388)ST1_ﾊﾟﾚｯﾄID_不一致
ANB B0184                ; B184_389)ST1_ﾜｰｸ受取異常
ANB B0185                ; B185_390)ST1_ﾜｰｸ受渡し異常
ANB B0186                ; B186_391)ST1ﾜｰｸ情報不一致
INV
OUT M6571                ; 電特ST1-1全異常
LD M6570                 ; 電特ST1-1原点
ANB M6574                ; 電特ST1-1起動中
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
LD M6901                 ; ST1-搬送ﾊﾝﾄﾞ1ID一致ﾌﾗｸﾞ
OR M6902                 ; ST1-搬送ﾊﾝﾄﾞ2ID一致ﾌﾗｸﾞ
ANL
ANB M6908                ; ST1_無効OK条件
OUT M6572                ; 電特ST1-1起動条件
LDB M50                  ; 運転準備
ORB L1200                ; FBTST1_有効状態
OR M6986                 ; 電特ST1ｻｲｸﾙ停止異常
OR T15                   ; 強制停止
OUT M6573                ; 電特ST1-1起動OFF
LD M73                   ; 各工程起動指令
AND M6572                ; 電特ST1-1起動条件
OR M6574                 ; 電特ST1-1起動中
ANB M6573                ; 電特ST1-1起動OFF
ANB M6563                ; U12-1_CYCLE END
OUT M6574                ; 電特ST1-1起動中
;ﾕﾆｯﾄ1-1 ｻｲｸﾙ停止異常
LDB CR2003               ; 常時OFF
INV
OUT M6575                ; 電特ST1-1ｻｲｸﾙ停止異常
;ﾕﾆｯﾄ1-1 ｴﾗｰ発生まとめ
LDB B0181                ; B181_386)ST1ﾜｰｸ浮き検知異常
ANB B0324                ; B324_805)ST1ﾜｰｸ除去要求
ANB B0328                ; B328_809)FBTST1検査中
ANB B0330                ; B330_817)ST1_RB3_MANUAL MODE
INV
OUT M6576                ; 電特ST1-1ｴﾗｰ発生
;ﾕﾆｯﾄ1-1 停止判定
LD= D6500 D6505          ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ  ﾕﾆｯﾄ8-1動作中判定
ORB M6574                ; 電特ST1-1起動中
TMR K1210 K20
LD CR2002                ; 常時ON
MOV D6500 D6505          ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ  ﾕﾆｯﾄ8-1動作中判定
LD T1210
OUT M6577                ; 電特ST1-1動作無し
;□
;□　ﾕﾆｯﾄ1-1 自動運転ステップ開始
;□
LD CR2002                ; 常時ON
FMOV K0 M6500 K4         ; U12-1_S0
LDB M6574                ; 電特ST1-1起動中
MOV K0 D6500             ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6574                 ; 電特ST1-1起動中
MOV D6500 Z1             ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
SET M6500:Z1             ; U12-1_S0
;ﾜｰｸ有無判定等
LD M6500                 ; U12-1_S0
AND T1201                ; 装置扉閉確認
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6501                 ; U12-1_S1_ﾜｰｸ供給待ち
MPS
ANB M6993                ; 電特ST1ﾜｰｸ無し
MPS
AND M2962                ; 【搬送】搬送→FBT_ST1搬送開始
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
MPP
LD M6901                 ; ST1-搬送ﾊﾝﾄﾞ1ID一致ﾌﾗｸﾞ
OR M6902                 ; ST1-搬送ﾊﾝﾄﾞ2ID一致ﾌﾗｸﾞ
ANB X1220                ; 電特St1部ﾜｰｸ確認(ON_有)
ANL
OUT M6920                ; ST1→搬送ﾜｰｸ供給要求
MPP
AND M6993                ; 電特ST1ﾜｰｸ無し
MOV K63 D6500            ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6502                 ; U12-1_S2
LD M2966                 ; 【搬送】搬送→FBT_ST1搬送完了
OR M6922                 ; ST1→搬送ﾜｰｸ受取り完了
ANL
MPS
LDB M2962                ; 【搬送】搬送→FBT_ST1搬送開始
ANB M2966                ; 【搬送】搬送→FBT_ST1搬送完了
ANL
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
MPP
OUT M6922                ; ST1→搬送ﾜｰｸ受取り完了
LD M6503                 ; U12-1_S3
AND T1201                ; 装置扉閉確認
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
AND= D6701 K1            ; 1ST_ﾜｰｸ有無記憶
MPS
LD X1220                 ; 電特St1部ﾜｰｸ確認(ON_有)
OR M35                   ; 空運転ﾓｰﾄﾞ
ANL
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
MPP
LDB X1220                ; 電特St1部ﾜｰｸ確認(ON_有)
ANB M35                  ; 空運転ﾓｰﾄﾞ
ANL
MOV K60 D6500            ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6560                 ; U12-1_S60_ST1_ﾜｰｸ受取異常
AND B0184                ; B184_389)ST1_ﾜｰｸ受取異常
MOV K63 D6500            ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
;　　Z軸上昇確認
LD M6504                 ; U12-1_S4_搬送RB上昇確認
MPS
LD L309                  ; 搬送高さ移動完了(HIGH)
OR L308                  ; 搬送高さ移動完了(MIDLE)
ANL
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
MPP
@INC D6520               ; FBTst2投入回数
;　　浮き確認位置まで移動
LD M6505                 ; U12-1_S5_
AND M6602                ; RB3位置決め条件
MPS
MOV D6540 D6530          ; ﾜｰｸ浮き確認位置指令Pos  RB3_指令Pos
MPP
AND= D6540 D6530         ; ﾜｰｸ浮き確認位置指令Pos  RB3_指令Pos
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6506                 ; U12-1_S6_浮き確認位置移動指令
AND M6604                ; RB3位置決め起動指令
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6507                 ; U12-1_S7
ANB M6604                ; RB3位置決め起動指令
AND M6622                ; RB3_ﾜｰｸ浮き確認位置
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
MOV K0 D6550             ; ﾜｰｸ浮きﾘｾｯﾄｶｳﾝﾄ
LDB M6508                ; U12-1_S8_ﾜｰｸ浮き確認
ANB M6526                ; U12-1_S26_ﾜｰｸ浮き確認
INV
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
TMH K1220 K30            ; 浮き確認時間
LD M6508                 ; U12-1_S8_ﾜｰｸ浮き確認
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
AND T1220                ; 浮き確認時間
MPS
AND X1221                ; 電特ST1_ﾜｰｸ浮き確認(ON_有)
MOV K10 D6500            ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
MPP
ANB X1221                ; 電特ST1_ﾜｰｸ浮き確認(ON_有)
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6509                 ; U12-1_S9_浮き検知異常
ANPB M6509               ; U12-1_S9_浮き検知異常
AND T1201                ; 装置扉閉確認
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
ANB B0181                ; B181_386)ST1ﾜｰｸ浮き検知異常
@INC D6550               ; ﾜｰｸ浮きﾘｾｯﾄｶｳﾝﾄ
MPS
AND>= K2 D6550           ; ﾜｰｸ浮きﾘｾｯﾄｶｳﾝﾄ
MOV K8 D6500             ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
MPP
AND< K2 D6550            ; ﾜｰｸ浮きﾘｾｯﾄｶｳﾝﾄ
MOV K50 D6500            ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6510                 ; U12-1_S10_
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
AND M6602                ; RB3位置決め条件
MPS
MOV D6541 D6530          ; ｺﾈｸﾀ挿入開始位置指令Pos  RB3_指令Pos
MPP
AND= D6541 D6530         ; ｺﾈｸﾀ挿入開始位置指令Pos  RB3_指令Pos
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6511                 ; U12-1_S11_ﾌﾟﾛｰﾌﾞｱﾌﾟﾛｰﾁ移動指令
AND M6604                ; RB3位置決め起動指令
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6512                 ; U12-1_S12_
ANB M6604                ; RB3位置決め起動指令
AND M6623                ; RB3_ｺﾈｸﾀ挿入開始位置
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6513                 ; U12-1_S13
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
AND M6602                ; RB3位置決め条件
MPS
MOV D6542 D6530          ; ｺﾈｸﾀ挿入押込み量※1指令Pos  RB3_指令Pos
MPP
AND= D6542 D6530         ; ｺﾈｸﾀ挿入押込み量※1指令Pos  RB3_指令Pos
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6514                 ; U12-1_S14_ｺﾈｸﾀ押込み位置移動指令
AND M6604                ; RB3位置決め起動指令
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6515                 ; U12-1_S15
ANB M6604                ; RB3位置決め起動指令
AND M6624                ; RB3_ｺﾈｸﾀ挿入押込み完了位置
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
;<h1/>__S16_電特検査処理開始
LD M6516                 ; U12-1_S16_
AND T1201                ; 装置扉閉確認
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
AND M6732                ; 電特ST1-3起動条件
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6517                 ; U12-1_S17電特検査SUB開始ﾌﾗｸﾞ
AND M6734                ; 電特ST1-3(電特検査SUB)起動中
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6518                 ; U12-1_S18
ANB M6734                ; 電特ST1-3(電特検査SUB)起動中
AND T1201                ; 装置扉閉確認
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6519                 ; U12-1_S19
AND T1201                ; 装置扉閉確認
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
;検査完了
LD M6520                 ; U12-1_S20_
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
AND M6602                ; RB3位置決め条件
MPS
MOV D6543 D6530          ; ｺﾈｸﾀ抜き位置Pos  RB3_指令Pos
MPP
AND= D6543 D6530         ; ｺﾈｸﾀ抜き位置Pos  RB3_指令Pos
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6521                 ; U12-1_S21_ｺﾈｸﾀ抜き位置移動指令
AND M6604                ; RB3位置決め起動指令
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6522                 ; U12-1_S22
ANB M6604                ; RB3位置決め起動指令
AND M6625                ; RB3_ｺﾈｸﾀ抜き位置
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6523                 ; U12-1_S23
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
AND M6602                ; RB3位置決め条件
MPS
MOV D6540 D6530          ; ﾜｰｸ浮き確認位置指令Pos  RB3_指令Pos
MPP
AND= D6540 D6530         ; ﾜｰｸ浮き確認位置指令Pos  RB3_指令Pos
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6524                 ; U12-1_S24_浮き確認位置移動指令
AND M6604                ; RB3位置決め起動指令
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6525                 ; U12-1_S25
ANB M6604                ; RB3位置決め起動指令
AND M6622                ; RB3_ﾜｰｸ浮き確認位置
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
MOV K0 D6550             ; ﾜｰｸ浮きﾘｾｯﾄｶｳﾝﾄ
LD M6526                 ; U12-1_S26_ﾜｰｸ浮き確認
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
AND T1220                ; 浮き確認時間
MPS
AND X1221                ; 電特ST1_ﾜｰｸ浮き確認(ON_有)
MOV K28 D6500            ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
MPP
ANB X1221                ; 電特ST1_ﾜｰｸ浮き確認(ON_有)
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6527                 ; U12-1_S27_後退時ﾜｰｸ浮き検知
ANPB M6527               ; U12-1_S27_後退時ﾜｰｸ浮き検知
AND T1201                ; 装置扉閉確認
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
ANB B0181                ; B181_386)ST1ﾜｰｸ浮き検知異常
@INC D6550               ; ﾜｰｸ浮きﾘｾｯﾄｶｳﾝﾄ
MPS
AND>= K3 D6550           ; ﾜｰｸ浮きﾘｾｯﾄｶｳﾝﾄ
MOV K26 D6500            ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
MPP
AND< K3 D6550            ; ﾜｰｸ浮きﾘｾｯﾄｶｳﾝﾄ
MOV K50 D6500            ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6528                 ; U12-1_S28
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6529                 ; U12-1_S29
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6530                 ; U12-1_S30
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
AND M6602                ; RB3位置決め条件
MPS
MOV K1 D6530             ; RB3_指令Pos
MPP
AND= K1 D6530            ; RB3_指令Pos
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6531                 ; U12-1_S31_ﾜｰｸ受取り位置移動指令
AND M6604                ; RB3位置決め起動指令
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6532                 ; U12-1_S32
ANB M6604                ; RB3位置決め起動指令
AND M6621                ; RB3_ﾜｰｸ受取り位置(ID確認位置)
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6533                 ; U12-1_S33
MOV K40 D6500            ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
;<h1/>__S40_ﾜｰｸ除材要求
LD M6540                 ; U12-1_S40
MPS
AND M2974                ; 【搬送】FBTST1除材開始
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
MPP
LDB M1304                ; 供給ｽﾗｲﾀﾞ上投入可能ﾜｰｸ有
LD M3100                 ; ﾊﾝﾄﾞ1_ﾜｰｸ有
ANB M3103                ; ﾊﾝﾄﾞ1_検査完了品(排出ﾜｰｸ)
ORL
LD M3150                 ; ﾊﾝﾄﾞ2_ﾜｰｸ有
ANB M3153                ; ﾊﾝﾄﾞ2_検査完了品(排出ﾜｰｸ)
ORL
OR M6909                 ; 電特ST1_無効予約(自動運転)
OR M7909                 ; 電特ST2_無効予約(自動運転)
OR M8909                 ; 電特ST3_無効予約(自動運転)
ANL
OUT M6921                ; ST1→搬送1除材要求
LD M6541                 ; U12-1_S41
LD M2977                 ; 【搬送】FBTST1除材完了
OR M6923                 ; ST1→搬送除材完了受取
ANL
MPS
LDB M2974                ; 【搬送】FBTST1除材開始
ANB M2977                ; 【搬送】FBTST1除材完了
ANL
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
MPP
OUT M6923                ; ST1→搬送除材完了受取
LD M6542                 ; U12-1_S42
AND T1201                ; 装置扉閉確認
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
AND= D6701 K0            ; 1ST_ﾜｰｸ有無記憶
LD L309                  ; 搬送高さ移動完了(HIGH)
OR L308                  ; 搬送高さ移動完了(MIDLE)
OR L307                  ; ﾜｰｸ入替高さ移動完了(LOW)
ANL
MPS
ANB X1220                ; 電特St1部ﾜｰｸ確認(ON_有)
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
MPP
AND X1220                ; 電特St1部ﾜｰｸ確認(ON_有)
OUT M6930                ; ST1_ﾜｰｸ受渡し異常
LD M6543                 ; U12-1_S43
AND T1201                ; 装置扉閉確認
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6544                 ; U12-1_S44
AND T1201                ; 装置扉閉確認
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
MOV K63 D6500            ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
;<h1/>_S50_浮き検出ﾜｰｸ排出
LD M6550                 ; U12-1_S50
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
LD L308                  ; 搬送高さ移動完了(MIDLE)
OR L309                  ; 搬送高さ移動完了(HIGH)
ANL
AND M6602                ; RB3位置決め条件
MPS
MOV K1 D6530             ; RB3_指令Pos
MPP
AND= K1 D6530            ; RB3_指令Pos
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6551                 ; U12-1_S51_待機位置移動指令
AND M6604                ; RB3位置決め起動指令
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6552                 ; U12-1_S52
ANB M6604                ; RB3位置決め起動指令
AND M6621                ; RB3_ﾜｰｸ受取り位置(ID確認位置)
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6553                 ; U12-1_S53_ﾜｰｸ除去要求
ANPB M6553               ; U12-1_S53_ﾜｰｸ除去要求
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
ANB B0324                ; B324_805)ST1ﾜｰｸ除去要求
ANB X1220                ; 電特St1部ﾜｰｸ確認(ON_有)
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6554                 ; U12-1_S54_PCﾃﾞｰﾀ削除指令
MPS
LD M6630                 ; ST1_ﾜｰｸﾃﾞｰﾀ削除指令
LD W01.13                ; ｲﾝﾃﾞｯｸｽﾃﾞｰﾀｸﾘｱ完了
OR M3                    ; OFFLINE_MODE
ANL
ANL
MOV K63 D6500            ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
MRD
LDB W0101.13             ; ｲﾝﾃﾞｯｸｽﾃﾞｰﾀｸﾘｱ要求
OR M6630                 ; ST1_ﾜｰｸﾃﾞｰﾀ削除指令
ANL
OUT M6630                ; ST1_ﾜｰｸﾃﾞｰﾀ削除指令
@MOV K4 W0148            ; ﾃﾞｰﾀｸﾘｱｲﾝﾃﾞｯｸｽNo
MPP
FMOV K0 D6700 K100       ; 1ST_INDEX NO.
LD M6555                 ; U12-1_S55
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6556                 ; U12-1_S56
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6557                 ; U12-1_S57
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6558                 ; U12-1_S58
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
INC D6500                ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
LD M6559                 ; U12-1_S59
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
MOV K63 D6500            ; ﾕﾆｯﾄ8-1自動運転ｽﾃｯﾌﾟ
;<h1/>◇_電特検査SUB状態・動作条件(補助)
LD CR2002                ; 常時ON
OUT M6730                ; 電特ST1-3原点
LDB CR2003               ; 常時OFF
INV
OUT M6731                ; 電特ST1-3全異常
LD M6730                 ; 電特ST1-3原点
ANB M6734                ; 電特ST1-3(電特検査SUB)起動中
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
AND M300                 ; PC通信正常
ANB W03.0                ; FBT検査ｽﾃｰｼﾞ状態#1
ANB W0103.0              ; FBT検査開始要求#1
OUT M6732                ; 電特ST1-3起動条件
LDB M50                  ; 運転準備
OR M6986                 ; 電特ST1ｻｲｸﾙ停止異常
OR T15                   ; 強制停止
OUT M6733                ; 電特ST1-3起動OFF
LD M6517                 ; U12-1_S17電特検査SUB開始ﾌﾗｸﾞ
AND M6732                ; 電特ST1-3起動条件
OR M6734                 ; 電特ST1-3(電特検査SUB)起動中
ANB M6733                ; 電特ST1-3起動OFF
ANB M6723                ; 電特ST1-3ｻｲｸﾙ終了
OUT M6734                ; 電特ST1-3(電特検査SUB)起動中
;tp表示
LD CR2002                ; 常時ON
DW K0 D6900              ; FBT検査_ｽﾃｰﾀｽ表示
LD M6734                 ; 電特ST1-3(電特検査SUB)起動中
DW K1 D6900              ; FBT検査_ｽﾃｰﾀｽ表示
LD= D6704 K1             ; 1ST_FBT検査結果(1=OK_2=NG)
DW K2 D6900              ; FBT検査_ｽﾃｰﾀｽ表示
LD= D6704 K2             ; 1ST_FBT検査結果(1=OK_2=NG)
DW K3 D6900              ; FBT検査_ｽﾃｰﾀｽ表示
LDB L1200                ; FBTST1_有効状態
DW K4 D6900              ; FBT検査_ｽﾃｰﾀｽ表示
;ﾕﾆｯﾄ1-3ｻｲｸﾙ停止異常
LDB CR2003               ; 常時OFF
INV
OUT M6735                ; 電特ST1-3ｻｲｸﾙ停止異常
;ﾕﾆｯﾄ1-3ｴﾗｰ発生まとめ
LDB CR2003               ; 常時OFF
INV
OUT M6736                ; 電特ST1-3ｴﾗｰ発生
;ﾕﾆｯﾄ1-3停止判定
LD= D6502 D6507          ; ﾕﾆｯﾄ8-3自動運転ｽﾃｯﾌﾟ  ﾕﾆｯﾄ8-3動作中判定
TMR K1212 K20            ; 停止ﾀｲﾏ
LD CR2002                ; 常時ON
MOV D6502 D6507          ; ﾕﾆｯﾄ8-3自動運転ｽﾃｯﾌﾟ  ﾕﾆｯﾄ8-3動作中判定
LD T1212                 ; 停止ﾀｲﾏ
ORB M6734                ; 電特ST1-3(電特検査SUB)起動中
OUT M6737                ; 電特ST1-3動作無し
;□
;□　ﾕﾆｯﾄ1-3自動運転ステップ開始
;□
LD CR2002                ; 常時ON
FMOV K0 M6660 K4         ; U12-3_S0
LDB M6734                ; 電特ST1-3(電特検査SUB)起動中
MOV K0 D6502             ; ﾕﾆｯﾄ8-3自動運転ｽﾃｯﾌﾟ
LD M6734                 ; 電特ST1-3(電特検査SUB)起動中
MOV D6502 Z1             ; ﾕﾆｯﾄ8-3自動運転ｽﾃｯﾌﾟ
SET M6660:Z1             ; U12-3_S0
;<h1/>__S0_
LD M6660                 ; U12-3_S0
MPS
LD T1201                 ; 装置扉閉確認
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
ANB M35                  ; 空運転ﾓｰﾄﾞ
ANB M3                   ; OFFLINE_MODE
ANL
INC D6502                ; ﾕﾆｯﾄ8-3自動運転ｽﾃｯﾌﾟ
MPP
LD M35                   ; 空運転ﾓｰﾄﾞ
OR M3                    ; OFFLINE_MODE
ANL
MPS
AND T1230                ; FBT検査時間(仮)
INC D6502                ; ﾕﾆｯﾄ8-3自動運転ｽﾃｯﾌﾟ
MPP
TMR K1230 K450           ; FBT検査時間(仮)
LD M6661                 ; U12-3_S1_検査ｽﾀｰﾄ要求
AND W0103.0              ; FBT検査開始要求#1
LD W03.0                 ; FBT検査ｽﾃｰｼﾞ状態#1
ANB W03.8                ; FBT検査結果#1
OR M3                    ; OFFLINE_MODE
OR M35                   ; 空運転ﾓｰﾄﾞ
ANL
INC D6502                ; ﾕﾆｯﾄ8-3自動運転ｽﾃｯﾌﾟ
LD M6662                 ; U12-3_S2
LDB W03.0                ; FBT検査ｽﾃｰｼﾞ状態#1
OR M3                    ; OFFLINE_MODE
ANL
INC D6502                ; ﾕﾆｯﾄ8-3自動運転ｽﾃｯﾌﾟ
LD M6663                 ; U12-3_S3
MPS
AND<> D6704 K0           ; 1ST_FBT検査結果(1=OK_2=NG)
INC D6502                ; ﾕﾆｯﾄ8-3自動運転ｽﾃｯﾌﾟ
MRD
LDB M35                  ; 空運転ﾓｰﾄﾞ
ANB M3                   ; OFFLINE_MODE
ANL
MPS
AND W03.8                ; FBT検査結果#1
MOV K1 D6704             ; 1ST_FBT検査結果(1=OK_2=NG)
MPP
ANB W03.8                ; FBT検査結果#1
MOV K2 D6704             ; 1ST_FBT検査結果(1=OK_2=NG)
MPP
LD M3                    ; OFFLINE_MODE
OR M35                   ; 空運転ﾓｰﾄﾞ
ANL
MPS
ANB B1038                ; FBTST2_強制NG_TEST
MOV K1 D6704             ; 1ST_FBT検査結果(1=OK_2=NG)
MPP
AND B1038                ; FBTST2_強制NG_TEST
MOV K2 D6704             ; 1ST_FBT検査結果(1=OK_2=NG)
LD M6664                 ; U12-3_S4
INC D6502                ; ﾕﾆｯﾄ8-3自動運転ｽﾃｯﾌﾟ
LD M6665                 ; U12-3_S5
INC D6502                ; ﾕﾆｯﾄ8-3自動運転ｽﾃｯﾌﾟ
LD M6666                 ; U12-3_S6
INC D6502                ; ﾕﾆｯﾄ8-3自動運転ｽﾃｯﾌﾟ
LD M6667                 ; U12-3_S7
INC D6502                ; ﾕﾆｯﾄ8-3自動運転ｽﾃｯﾌﾟ
LD M6668                 ; U12-3_S8
INC D6502                ; ﾕﾆｯﾄ8-3自動運転ｽﾃｯﾌﾟ
LD M6669                 ; U12-3_S9
AND T1201                ; 装置扉閉確認
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
MOV K63 D6502            ; ﾕﾆｯﾄ8-3自動運転ｽﾃｯﾌﾟ
;ｻｲｸﾙ停止処理
LD M56                   ; 自動起動停止指令(ｻｲｸﾙ停止)
AND CR2003               ; 常時OFF
MOV K62 D6502            ; ﾕﾆｯﾄ8-3自動運転ｽﾃｯﾌﾟ
;ｻｲｸﾙ終了
LD M6722                 ; U12-3_S62
OR CR2003                ; 常時OFF
@MOV K63 D6502           ; ﾕﾆｯﾄ8-3自動運転ｽﾃｯﾌﾟ
;<h1/>□_原点復帰回路
LD CR2002                ; 常時ON
FMOV K0 M6750 K3         ; STEP0
LDB M6984                ; 電特ST1原点復帰中
MOV K0 D6510             ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
LD M6984                 ; 電特ST1原点復帰中
MOV D6510 Z1             ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
SET M6750:Z1             ; STEP0
;原点復帰ｻｲｸﾙ監視
LD M6984                 ; 電特ST1原点復帰中
TMR K1200 K200
;原点復帰ステップ開始
LD M6750                 ; STEP0
MPS
LD T1201                 ; 装置扉閉確認
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
ANL
@INC D6510               ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
MPP
MOV K0 D6520             ; FBTst2投入回数
LD M6751                 ; STEP1
AND L309                 ; 搬送高さ移動完了(HIGH)
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
@INC D6510               ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
LD M6752                 ; STEP2_検査ST原点復帰指令
AND X110A                ; 1st(RB3)原点確定_HEND
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
@INC D6510               ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
LD M6753                 ; STEP3
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
AND M6602                ; RB3位置決め条件
MPS
MOV K1 D6530             ; RB3_指令Pos
MPP
AND= K1 D6530            ; RB3_指令Pos
INC D6510                ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
LD M6754                 ; STEP4_待機位置移動指令
AND M6604                ; RB3位置決め起動指令
INC D6510                ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
LD M6755                 ; STEP5_
ANB M6604                ; RB3位置決め起動指令
AND M6621                ; RB3_ﾜｰｸ受取り位置(ID確認位置)
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
INC D6510                ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
LD M6756                 ; STEP6_
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
@INC D6510               ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
;　　ﾜｰｸ有無ﾁｪｯｸ
LD M6757                 ; STEP7
AND T1201                ; 装置扉閉確認
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
MPS
ANB X1220                ; 電特St1部ﾜｰｸ確認(ON_有)
@MOV K10 D6510           ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
MPP
AND X1220                ; 電特St1部ﾜｰｸ確認(ON_有)
@INC D6510               ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
;　　ﾜｰｸ除去要求
LD M6758                 ; STEP8_ORGﾜｰｸ除去要求
AND T1201                ; 装置扉閉確認
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
AND B0324                ; B324_805)ST1ﾜｰｸ除去要求
@MOV K46 D6510           ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
;　　
LD M6759                 ; STEP9
AND T1201                ; 装置扉閉確認
AND M6979                ; 電特ST1ｽﾃｯﾌﾟ動作
@INC D6510               ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
LD M6760                 ; STEP10
MPS
AND M6980                ; ST1電特ST1原点
@MOV K46 D6510           ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
MPP
FMOV K0 D6700 K100       ; 1ST_INDEX NO.
LD M6796                 ; STEP46
ANB M82                  ; 原点復帰開始
@MOV K47 D6510           ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
;<h1/>□_UNIT_8_手動回路
LD M31                   ; 手動ﾓｰﾄﾞ
AND M120                 ; 圧空正常
AND M121                 ; 非常停止正常
LD M123                  ; 安全扉正常
OR M37                   ; ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
OR M39                   ; ｴﾘｱｾﾝｻｰ解除ﾓｰﾄﾞ
ANL
ANB M6985                ; 電特ST1起動中
ANB M6984                ; 電特ST1原点復帰中
LDB W03.0                ; FBT検査ｽﾃｰｼﾞ状態#1
OR M3                    ; OFFLINE_MODE
ANL
MC
LD M6602                 ; RB3位置決め条件
LD L307                  ; ﾜｰｸ入替高さ移動完了(LOW)
OR L308                  ; 搬送高さ移動完了(MIDLE)
OR L309                  ; 搬送高さ移動完了(HIGH)
ANL
ANB M6830                ; RB3_ﾜｰｸ受取り位置移動指令
ANB M6831                ; RB3_ﾜｰｸ浮き確認位置移動指令
ANB M6832                ; RB3_ｺﾈｸﾀ挿入開始位置移動指令
ANB M6833                ; RB3_ｺﾈｸﾀ挿入押込み完了位置移動指
ANB M6834                ; RB3_ｺﾈｸﾀ抜き位置移動指令
OUT M6820                ; RB3_ﾜｰｸ受取り位置移動OK
OUT M6821                ; RB3_ﾜｰｸ浮き確認位置移動OK
OUT M6822                ; RB3_ｺﾈｸﾀ挿入開始位置移動OK
OUT M6823                ; RB3_ｺﾈｸﾀ挿入押込み完了位置移動OK
OUT M6824                ; RB3_ｺﾈｸﾀ抜き位置移動OK
LDP B11F0                ; RB3_ﾜｰｸ受取り位置Tpsw
AND M6820                ; RB3_ﾜｰｸ受取り位置移動OK
OR M6830                 ; RB3_ﾜｰｸ受取り位置移動指令
ANB M6607                ; RB3_位置決め完了
OUT M6830                ; RB3_ﾜｰｸ受取り位置移動指令
@MOV K1 D6530            ; RB3_指令Pos
LDP B11F1                ; RB3_ﾜｰｸ浮き確認位置Tpsw
AND M6821                ; RB3_ﾜｰｸ浮き確認位置移動OK
OR M6831                 ; RB3_ﾜｰｸ浮き確認位置移動指令
ANB M6607                ; RB3_位置決め完了
OUT M6831                ; RB3_ﾜｰｸ浮き確認位置移動指令
@MOV D6540 D6530         ; ﾜｰｸ浮き確認位置指令Pos  RB3_指令Pos
LDP B11F2                ; RB3_ｺﾈｸﾀ挿入開始位置Tpsw
AND M6822                ; RB3_ｺﾈｸﾀ挿入開始位置移動OK
OR M6832                 ; RB3_ｺﾈｸﾀ挿入開始位置移動指令
ANB M6607                ; RB3_位置決め完了
OUT M6832                ; RB3_ｺﾈｸﾀ挿入開始位置移動指令
@MOV D6541 D6530         ; ｺﾈｸﾀ挿入開始位置指令Pos  RB3_指令Pos
LDP B11F3                ; RB3_ｺﾈｸﾀ挿入押込み完了位置Tpsw
AND M6823                ; RB3_ｺﾈｸﾀ挿入押込み完了位置移動OK
OR M6833                 ; RB3_ｺﾈｸﾀ挿入押込み完了位置移動指
ANB M6607                ; RB3_位置決め完了
OUT M6833                ; RB3_ｺﾈｸﾀ挿入押込み完了位置移動指
@MOV D6542 D6530         ; ｺﾈｸﾀ挿入押込み量※1指令Pos  RB3_指令Pos
LDP B11F4                ; RB3_ｺﾈｸﾀ抜き位置Tpsw
AND M6824                ; RB3_ｺﾈｸﾀ抜き位置移動OK
OR M6834                 ; RB3_ｺﾈｸﾀ抜き位置移動指令
ANB M6607                ; RB3_位置決め完了
OUT M6834                ; RB3_ｺﾈｸﾀ抜き位置移動指令
@MOV D6543 D6530         ; ｺﾈｸﾀ抜き位置Pos  RB3_指令Pos
MCR
LDP B11E6                ; SWBox_ﾊﾟﾚｯﾄ前後ﾓｰﾄﾞsw
ANB M6970                ; SwBoxMode_電特ﾊﾟﾚｯﾄ前後Flag
LDPB B11E6               ; SWBox_ﾊﾟﾚｯﾄ前後ﾓｰﾄﾞsw
AND M6970                ; SwBoxMode_電特ﾊﾟﾚｯﾄ前後Flag
ANB M6312                ; SwBoxMode_LeakﾁｬﾝﾊﾞｰFlag
ANB M6971                ; SwBoxMode_電特ｸﾗﾝﾌﾟ&ﾊﾟﾚｯﾄFlag
ORL
AND= D50 K201            ; TpM-K_表示中ページNo.
AND M31                  ; 手動ﾓｰﾄﾞ
ANB M81                  ; 原点復帰動作中
AND M50                  ; 運転準備
OUT M6970                ; SwBoxMode_電特ﾊﾟﾚｯﾄ前後Flag
LDP B11E7                ; SWBox_ｸﾗﾝﾌﾟ&ﾊﾟﾚｯﾄﾓｰﾄﾞsw
ANB M6971                ; SwBoxMode_電特ｸﾗﾝﾌﾟ&ﾊﾟﾚｯﾄFlag
LDPB B11E7               ; SWBox_ｸﾗﾝﾌﾟ&ﾊﾟﾚｯﾄﾓｰﾄﾞsw
AND M6971                ; SwBoxMode_電特ｸﾗﾝﾌﾟ&ﾊﾟﾚｯﾄFlag
ANB M6970                ; SwBoxMode_電特ﾊﾟﾚｯﾄ前後Flag
ANB M6312                ; SwBoxMode_LeakﾁｬﾝﾊﾞｰFlag
ORL
AND= D50 K201            ; TpM-K_表示中ページNo.
AND M31                  ; 手動ﾓｰﾄﾞ
ANB M81                  ; 原点復帰動作中
AND M50                  ; 運転準備
OUT M6971                ; SwBoxMode_電特ｸﾗﾝﾌﾟ&ﾊﾟﾚｯﾄFlag
;<h1/>▽_検査ｽﾃｰｼﾞRB移動ｻﾌﾞﾙｰﾁﾝ
;　　移動POS
LD X110A                 ; 1st(RB3)原点確定_HEND
AND X110B                ; 1st(RB3)位置決め完了_PEND
MPS
AND X1100                ; 1st(RB3)完了Pos_PM1
OUT D6534.0
MRD
AND X1101                ; 1st(RB3)完了Pos_PM2
OUT D6534.1
MRD
AND X1102                ; 1st(RB3)完了Pos_PM4
OUT D6534.2
MRD
AND X1103                ; 1st(RB3)完了Pos_PM8
OUT D6534.3
MRD
AND X1104                ; 1st(RB3)完了Pos_PM16
OUT D6534.4
MRD
AND X1105                ; 1st(RB3)完了Pos_PM32
OUT D6534.5
MRD
AND X1106                ; 1st(RB3)完了Pos_PM64
OUT D6534.6
MRD
AND X1107                ; 1st(RB3)完了Pos_PM128
OUT D6534.7
MPP
INV
MOV K0 D6534             ; RB3_完了Pos
;'RB3 POS MANUAL JIG SETTING
;IF D500 < K1 THEN
;   D500 = K1
;END IF
;D6540 = D500 + 10 		   '浮き確認位置
;D6541 = (D500 - K1)*3 + 51 'ｺﾈｸﾀ挿入開始
;D6542 = (D500 - K1)*3 + 52 'ｺﾈｸﾀ挿入完了位置
;D6543 = (D500 - K1)*3 + 53 'ｺﾈｸﾀ挿入完了位置
LD M31                   ; 手動ﾓｰﾄﾞ
NCJ K1000
;'RB3 POS MANUAL JIG SETTING
;
;IF D500 < K1 THEN
;
LD< D500 K1              ; 手動_JIG_NO.指定
NCJ K2000
;   D500 = K1
;
LD CR2002                ; 常時ON
MOV K1 D500              ; 手動_JIG_NO.指定
;END IF
;
LABEL K2000
;D6540 = D500 + 10 		   '浮き確認位置
;
LD CR2002                ; 常時ON
LDA D500                 ; 手動_JIG_NO.指定
CON
EXT
CON
ADD.L +10
CON
STA D6540                ; ﾜｰｸ浮き確認位置指令Pos
;D6541 = (D500 - K1)*3 + 51 'ｺﾈｸﾀ挿入開始
;
LD CR2002                ; 常時ON
LDA D500                 ; 手動_JIG_NO.指定
CON
EXT
CON
SUB.L +1
CON
MUL.L +3
CON
ADD.L +51
CON
STA D6541                ; ｺﾈｸﾀ挿入開始位置指令Pos
;D6542 = (D500 - K1)*3 + 52 'ｺﾈｸﾀ挿入完了位置
;
LD CR2002                ; 常時ON
LDA D500                 ; 手動_JIG_NO.指定
CON
EXT
CON
SUB.L +1
CON
MUL.L +3
CON
ADD.L +52
CON
STA D6542                ; ｺﾈｸﾀ挿入押込み量※1指令Pos
;D6543 = (D500 - K1)*3 + 53 'ｺﾈｸﾀ挿入完了位置
LD CR2002                ; 常時ON
LDA D500                 ; 手動_JIG_NO.指定
CON
EXT
CON
SUB.L +1
CON
MUL.L +3
CON
ADD.L +53
CON
STA D6543                ; ｺﾈｸﾀ抜き位置Pos
LABEL K1000
;
;'RB3 POS AUTO JIG SETTING
;D6540 = D6718 + 10 			'浮き確認位置
;D6541 = (D6718 - K1)*3 + 51	'ｺﾈｸﾀ挿入開始
;D6542 = (D6718 - K1)*3 + 52 'ｺﾈｸﾀ挿入完了位置
;D6543 = (D6718 - K1)*3 + 53 'ｺﾈｸﾀ挿入完了位置
LD M30                   ; 自動ﾓｰﾄﾞ
NCJ K1001
;'RB3 POS AUTO JIG SETTING
;
;D6540 = D6718 + 10 			'浮き確認位置
;
LD CR2002                ; 常時ON
LDA D6718                ; 1ST_FBT検査RBNo.
CON
EXT
CON
ADD.L +10
CON
STA D6540                ; ﾜｰｸ浮き確認位置指令Pos
;D6541 = (D6718 - K1)*3 + 51	'ｺﾈｸﾀ挿入開始
;
LD CR2002                ; 常時ON
LDA D6718                ; 1ST_FBT検査RBNo.
CON
EXT
CON
SUB.L +1
CON
MUL.L +3
CON
ADD.L +51
CON
STA D6541                ; ｺﾈｸﾀ挿入開始位置指令Pos
;D6542 = (D6718 - K1)*3 + 52 'ｺﾈｸﾀ挿入完了位置
;
LD CR2002                ; 常時ON
LDA D6718                ; 1ST_FBT検査RBNo.
CON
EXT
CON
SUB.L +1
CON
MUL.L +3
CON
ADD.L +52
CON
STA D6542                ; ｺﾈｸﾀ挿入押込み量※1指令Pos
;D6543 = (D6718 - K1)*3 + 53 'ｺﾈｸﾀ挿入完了位置
LD CR2002                ; 常時ON
LDA D6718                ; 1ST_FBT検査RBNo.
CON
EXT
CON
SUB.L +1
CON
MUL.L +3
CON
ADD.L +53
CON
STA D6543                ; ｺﾈｸﾀ抜き位置Pos
LABEL K1001
;
LD= K1 D6534             ; RB3_完了Pos
AND<> K0 D6534           ; RB3_完了Pos
OUT M6621                ; RB3_ﾜｰｸ受取り位置(ID確認位置)
LD= D6540 D6534          ; ﾜｰｸ浮き確認位置指令Pos  RB3_完了Pos
AND<> K0 D6534           ; RB3_完了Pos
OUT M6622                ; RB3_ﾜｰｸ浮き確認位置
LD= D6541 D6534          ; ｺﾈｸﾀ挿入開始位置指令Pos  RB3_完了Pos
AND<> K0 D6534           ; RB3_完了Pos
OUT M6623                ; RB3_ｺﾈｸﾀ挿入開始位置
LD= D6542 D6534          ; ｺﾈｸﾀ挿入押込み量※1指令Pos  RB3_完了Pos
AND<> K0 D6534           ; RB3_完了Pos
OUT M6624                ; RB3_ｺﾈｸﾀ挿入押込み完了位置
LD= D6543 D6534          ; ｺﾈｸﾀ抜き位置Pos  RB3_完了Pos
AND<> K0 D6534           ; RB3_完了Pos
OUT M6625                ; RB3_ｺﾈｸﾀ抜き位置
;	検査ｽﾗｲﾀﾞ位置決め処理
LD X110C                 ; 1st(RB3)ｻｰﾎﾞ状態_SV
ANB X1109                ; 1st(RB3)運転ﾓｰﾄﾞ_RMDS
LD X110A                 ; 1st(RB3)原点確定_HEND
OR CR2002                ; 常時ON
ANL
AND X110D                ; 1st(RB3)非常停止_*EMGS
AND X110E                ; 1st(RB3)ｱﾗｰﾑ_*ALM
OUT M6600                ; RB3状態OK
LD M50                   ; 運転準備
ANB M51                  ; 即停止異常(緊急停止)
AND M6600                ; RB3状態OK
ANB M6604                ; RB3位置決め起動指令
OUT M6602                ; RB3位置決め条件
LDB M6506                ; U12-1_S6_浮き確認位置移動指令
ANB M6511                ; U12-1_S11_ﾌﾟﾛｰﾌﾞｱﾌﾟﾛｰﾁ移動指令
ANB M6514                ; U12-1_S14_ｺﾈｸﾀ押込み位置移動指令
ANB M6521                ; U12-1_S21_ｺﾈｸﾀ抜き位置移動指令
ANB M6524                ; U12-1_S24_浮き確認位置移動指令
ANB M6531                ; U12-1_S31_ﾜｰｸ受取り位置移動指令
ANB M6551                ; U12-1_S51_待機位置移動指令
ANB M6754                ; STEP4_待機位置移動指令
INV
LDB M6830                ; RB3_ﾜｰｸ受取り位置移動指令
ANB M6831                ; RB3_ﾜｰｸ浮き確認位置移動指令
ANB M6832                ; RB3_ｺﾈｸﾀ挿入開始位置移動指令
ANB M6833                ; RB3_ｺﾈｸﾀ挿入押込み完了位置移動指
ANB M6834                ; RB3_ｺﾈｸﾀ抜き位置移動指令
INV
ORL
OUT M6603                ; RB3位置決め起動指令(まとめ)
LD M6603                 ; RB3位置決め起動指令(まとめ)
AND M6602                ; RB3位置決め条件
OR M6604                 ; RB3位置決め起動指令
AND M50                  ; 運転準備
ANB M6608                ; RB3_位置決め動作完了
AND X110D                ; 1st(RB3)非常停止_*EMGS
AND X110E                ; 1st(RB3)ｱﾗｰﾑ_*ALM
OUT M6604                ; RB3位置決め起動指令
LD M6604                 ; RB3位置決め起動指令
@MOV D6530 D6532         ; RB3_指令Pos  RB3_ｺﾝﾄﾛｰﾗｰ指令POS
TMH K1240 K5             ; RB3ﾃﾞｰﾀ転送ﾃﾞｨﾚｲ
LD T1240                 ; RB3ﾃﾞｰﾀ転送ﾃﾞｨﾚｲ
OR M6605                 ; RB3_位置決めｽﾀｰﾄ指令
AND M6604                ; RB3位置決め起動指令
ANB T1241                ; 位置決め再ｽﾀｰﾄ指令
OUT M6605                ; RB3_位置決めｽﾀｰﾄ指令
LD M6605                 ; RB3_位置決めｽﾀｰﾄ指令
AND Y210D                ; 1st(RB3)ｽﾀｰﾄ_CSTR
ANB X110B                ; 1st(RB3)位置決め完了_PEND
OR M6606                 ; RB3_位置決め起動確認
AND M6605                ; RB3_位置決めｽﾀｰﾄ指令
OUT M6606                ; RB3_位置決め起動確認
LD M6606                 ; RB3_位置決め起動確認
ANB Y210D                ; 1st(RB3)ｽﾀｰﾄ_CSTR
AND X110B                ; 1st(RB3)位置決め完了_PEND
AND= D6532 D6534         ; RB3_ｺﾝﾄﾛｰﾗｰ指令POS  RB3_完了Pos
OR M6607                 ; RB3_位置決め完了
AND M6605                ; RB3_位置決めｽﾀｰﾄ指令
OUT M6607                ; RB3_位置決め完了
LD M6606                 ; RB3_位置決め起動確認
ANB Y210D                ; 1st(RB3)ｽﾀｰﾄ_CSTR
AND X110B                ; 1st(RB3)位置決め完了_PEND
AND<> D6532 D6534        ; RB3_ｺﾝﾄﾛｰﾗｰ指令POS  RB3_完了Pos
TMR K1241 K50            ; 位置決め再ｽﾀｰﾄ指令
LD M6607                 ; RB3_位置決め完了
ANPB M6607               ; RB3_位置決め完了
OUT M6608                ; RB3_位置決め動作完了
;<h1/>□_出力回路
;ソレノイドバルブ出力
;<h1/>____▼_検査ｽﾗｲﾀﾞ出力
LD CR2002                ; 常時ON
MPS
AND D6532.0
OUT Y2100                ; 1st(RB3)指令pos_PC1
MRD
AND D6532.1
OUT Y2101                ; 1st(RB3)指令pos_PC2
MRD
AND D6532.2
OUT Y2102                ; 1st(RB3)指令pos_PC4
MRD
AND D6532.3
OUT Y2103                ; 1st(RB3)指令pos_PC8
MRD
AND D6532.4
OUT Y2104                ; 1st(RB3)指令pos_PC16
MRD
AND D6532.5
OUT Y2105                ; 1st(RB3)指令pos_PC32
MRD
AND D6532.6
OUT Y2106                ; 1st(RB3)指令pos_PC64
MPP
AND D6532.7
OUT Y2107                ; 1st(RB3)指令pos_PC128
LD B11EF                 ; ﾏﾆｭｱﾙﾓｰﾄﾞ切替SW(1：ﾏﾆｭｱﾙ)
OUT Y210A                ; 1st(RB3)運転ﾓｰﾄﾞ_RMOD
LD<> D50 K203            ; TpM-K_表示中ページNo.
RES B11EF                ; ﾏﾆｭｱﾙﾓｰﾄﾞ切替SW(1：ﾏﾆｭｱﾙ)
LD M6752                 ; STEP2_検査ST原点復帰指令
ANB X110A                ; 1st(RB3)原点確定_HEND
OUT Y210B                ; 1st(RB3)原点復帰_HOME
LD M123                  ; 安全扉正常
OUT Y210C                ; 1st(RB3)一時停止_*STP
LD M6605                 ; RB3_位置決めｽﾀｰﾄ指令
ANB M6606                ; RB3_位置決め起動確認
OUT Y210D                ; 1st(RB3)ｽﾀｰﾄ_CSTR
LD M16                   ; ﾘｾｯﾄPB
ANB X110E                ; 1st(RB3)ｱﾗｰﾑ_*ALM
OUT Y210E                ; 1st(RB3)ﾘｾｯﾄ_RES
LD T70                   ; Readyﾃﾞｨﾚｲ(1s)
ANB B0322                ; B322_803)ﾊﾝﾄﾞﾜｰｸ除材要求
OUT Y210F                ; 1st(RB3)ｻｰﾎﾞON_SON
;■その他制御出力
LD M6661                 ; U12-3_S1_検査ｽﾀｰﾄ要求
OUT W0103.0              ; FBT検査開始要求#1
LD L1200                 ; FBTST1_有効状態
OUT W0103.8              ; FBT検査ｽﾃｰｼﾞ有効/無効#1
LD L1200                 ; FBTST1_有効状態
ANB M6909                ; 電特ST1_無効予約(自動運転)
LD M6909                 ; 電特ST1_無効予約(自動運転)
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
ORL
LD M6916                 ; ST有効確認要求
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
ORL
OUT Y2310                ; ST1_有効/無効表示
OUT B16EA                ; ST2_電特_有効/無効表示
;□□　　パネル表示　　□□
LD M6970                 ; SwBoxMode_電特ﾊﾟﾚｯﾄ前後Flag
OUT B16E6                ; SwBoxMode_電特ﾊﾟﾚｯﾄFlag_ONPL
LD M6971                 ; SwBoxMode_電特ｸﾗﾝﾌﾟ&ﾊﾟﾚｯﾄFlag
OUT B16E7                ; SWBox_ｸﾗﾝﾌﾟ&ﾊﾟﾚｯﾄﾓｰﾄﾞONPL
LD M6830                 ; RB3_ﾜｰｸ受取り位置移動指令
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR M6621                 ; RB3_ﾜｰｸ受取り位置(ID確認位置)
OUT B16F0                ; RB3_ﾜｰｸ受取り位置TpPL
LD M6831                 ; RB3_ﾜｰｸ浮き確認位置移動指令
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR M6622                 ; RB3_ﾜｰｸ浮き確認位置
OUT B16F1                ; RB3_ﾜｰｸ浮き確認位置TpPL
LD M6832                 ; RB3_ｺﾈｸﾀ挿入開始位置移動指令
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR M6623                 ; RB3_ｺﾈｸﾀ挿入開始位置
OUT B16F2                ; RB3_ｺﾈｸﾀ挿入開始位置TpPL
LD M6833                 ; RB3_ｺﾈｸﾀ挿入押込み完了位置移動指
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR M6624                 ; RB3_ｺﾈｸﾀ挿入押込み完了位置
OUT B16F3                ; RB3_ｺﾈｸﾀ挿入押込み完了位置TpPL
LD M6834                 ; RB3_ｺﾈｸﾀ抜き位置移動指令
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR M6625                 ; RB3_ｺﾈｸﾀ抜き位置
OUT B16F4                ; RB3_ｺﾈｸﾀ抜き位置TpPL
;<h1/>□_異常検出
LDB X110E                ; 1st(RB3)ｱﾗｰﾑ_*ALM
AND T72                  ; Readyﾃﾞｨﾚｲ(3s)
LD CR2003                ; 常時OFF
ANB B0680                ; B180_385)Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0180                ; B180_385)ST1検査RB(RBC3)異常
ORL
OUT B0180                ; B180_385)ST1検査RB(RBC3)異常
LDP B0180                ; B180_385)ST1検査RB(RBC3)異常
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K385 D13500          ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0680                 ; B180_385)Bz停止
AND B0180                ; B180_385)ST1検査RB(RBC3)異常
OUT B0680                ; B180_385)Bz停止
;　　
LDP M6509                ; U12-1_S9_浮き検知異常
ORP M6527                ; U12-1_S27_後退時ﾜｰｸ浮き検知
LD CR2003                ; 常時OFF
ANB B0681                ; B181_386)Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0181                ; B181_386)ST1ﾜｰｸ浮き検知異常
ORL
OUT B0181                ; B181_386)ST1ﾜｰｸ浮き検知異常
LDP B0181                ; B181_386)ST1ﾜｰｸ浮き検知異常
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K386 D13500          ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0681                 ; B181_386)Bz停止
AND B0181                ; B181_386)ST1ﾜｰｸ浮き検知異常
OUT B0681                ; B181_386)Bz停止
;
LD T1206                 ; FBTST2_ｺﾝﾀｸﾄﾍｯﾄﾞID_更新_DLY
AND L1200                ; FBTST1_有効状態
AND<> D6600 D6606        ; FBTST1_ｺﾝﾀｸﾄﾍｯﾄﾞID  FBTST1_ｺﾝﾀｸﾄﾍｯﾄﾞID_Copy
LD CR2003                ; 常時OFF
ANB B0682                ; B182_387)Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0182                ; B182_387)ST1_ﾃｽﾄﾍｯﾄﾞID_不一致
ORL
OUT B0182                ; B182_387)ST1_ﾃｽﾄﾍｯﾄﾞID_不一致
LDP B0182                ; B182_387)ST1_ﾃｽﾄﾍｯﾄﾞID_不一致
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K1387 D13500         ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0682                 ; B182_387)Bz停止
AND B0182                ; B182_387)ST1_ﾃｽﾄﾍｯﾄﾞID_不一致
OUT B0682                ; B182_387)Bz停止
;
LD T1207                 ; FBTST2_ﾊﾟﾚｯﾄID_更新_DLY
AND L1200                ; FBTST1_有効状態
AND<> D6601 D6607        ; FBTST1_ﾊﾟﾚｯﾄID  FBTST1_ﾊﾟﾚｯﾄID_ｾﾝｻ状態
AND M6621                ; RB3_ﾜｰｸ受取り位置(ID確認位置)
LD CR2003                ; 常時OFF
ANB B0683                ; B183_388)Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0183                ; B183_388)ST1_ﾊﾟﾚｯﾄID_不一致
ORL
OUT B0183                ; B183_388)ST1_ﾊﾟﾚｯﾄID_不一致
LDP B0183                ; B183_388)ST1_ﾊﾟﾚｯﾄID_不一致
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K1388 D13500         ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0683                 ; B183_388)Bz停止
AND B0183                ; B183_388)ST1_ﾊﾟﾚｯﾄID_不一致
OUT B0683                ; B183_388)Bz停止
;
LD M6560                 ; U12-1_S60_ST1_ﾜｰｸ受取異常
LD CR2003                ; 常時OFF
ANB B0684                ; B184_389)Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0184                ; B184_389)ST1_ﾜｰｸ受取異常
ORL
OUT B0184                ; B184_389)ST1_ﾜｰｸ受取異常
LDP B0184                ; B184_389)ST1_ﾜｰｸ受取異常
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K1389 D13500         ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0684                 ; B184_389)Bz停止
AND B0184                ; B184_389)ST1_ﾜｰｸ受取異常
OUT B0684                ; B184_389)Bz停止
;
LD M6930                 ; ST1_ﾜｰｸ受渡し異常
LD CR2003                ; 常時OFF
ANB B0685                ; B185_390)Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0185                ; B185_390)ST1_ﾜｰｸ受渡し異常
ORL
OUT B0185                ; B185_390)ST1_ﾜｰｸ受渡し異常
LDP B0185                ; B185_390)ST1_ﾜｰｸ受渡し異常
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K1390 D13500         ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0685                 ; B185_390)Bz停止
AND B0185                ; B185_390)ST1_ﾜｰｸ受渡し異常
OUT B0685                ; B185_390)Bz停止
;
LD D6701.0
ANB X1220                ; 電特St1部ﾜｰｸ確認(ON_有)
LDB D6701.0
AND X1220                ; 電特St1部ﾜｰｸ確認(ON_有)
ORL
AND M6621                ; RB3_ﾜｰｸ受取り位置(ID確認位置)
ANB M2962                ; 【搬送】搬送→FBT_ST1搬送開始
ANB M2966                ; 【搬送】搬送→FBT_ST1搬送完了
ANB M2974                ; 【搬送】FBTST1除材開始
ANB M2977                ; 【搬送】FBTST1除材完了
ANB M6553                ; U12-1_S53_ﾜｰｸ除去要求
ANB M6554                ; U12-1_S54_PCﾃﾞｰﾀ削除指令
AND M71                  ; 自動運転開始BZ
LD CR2003                ; 常時OFF
ANB B0686                ; B186_391)Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0186                ; B186_391)ST1ﾜｰｸ情報不一致
ORL
OUT B0186                ; B186_391)ST1ﾜｰｸ情報不一致
LDP B0186                ; B186_391)ST1ﾜｰｸ情報不一致
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K1391 D13500         ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0686                 ; B186_391)Bz停止
AND B0186                ; B186_391)ST1ﾜｰｸ情報不一致
OUT B0686                ; B186_391)Bz停止
;　　
LD M6758                 ; STEP8_ORGﾜｰｸ除去要求
ORP M6553                ; U12-1_S53_ﾜｰｸ除去要求
LD CR2003                ; 常時OFF
ANB B0826                ; B326_807)Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
OR X1220                 ; 電特St1部ﾜｰｸ確認(ON_有)
AND B0324                ; B324_805)ST1ﾜｰｸ除去要求
ORL
OUT B0324                ; B324_805)ST1ﾜｰｸ除去要求
LDP B0324                ; B324_805)ST1ﾜｰｸ除去要求
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K805 D13500          ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0824                 ; B324_805)Bz停止
AND B0324                ; B324_805)ST1ﾜｰｸ除去要求
OUT B0824                ; B324_805)Bz停止
LD W03.0                 ; FBT検査ｽﾃｰｼﾞ状態#1
AND M31                  ; 手動ﾓｰﾄﾞ
ANP M17                  ; 原点復帰PB
LD CR2003                ; 常時OFF
ANB B0828                ; B328_809)Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0328                ; B328_809)FBTST1検査中
ORL
OUT B0328                ; B328_809)FBTST1検査中
LDP B0328                ; B328_809)FBTST1検査中
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K809 D13500          ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0828                 ; B328_809)Bz停止
AND B0328                ; B328_809)FBTST1検査中
OUT B0828                ; B328_809)Bz停止
LD X1109                 ; 1st(RB3)運転ﾓｰﾄﾞ_RMDS
ANB B11EF                ; ﾏﾆｭｱﾙﾓｰﾄﾞ切替SW(1：ﾏﾆｭｱﾙ)
OUT B0330                ; B330_817)ST1_RB3_MANUAL MODE
LDP B0330                ; B330_817)ST1_RB3_MANUAL MODE
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K817 D13500          ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0830                 ; B330_817)Bz停止
AND B0330                ; B330_817)ST1_RB3_MANUAL MODE
OUT B0830                ; B330_817)Bz停止
;異常ﾌﾞｻﾞｰまとめ
LDB B0180                ; B180_385)ST1検査RB(RBC3)異常
OR B0680                 ; B180_385)Bz停止
LDB B0181                ; B181_386)ST1ﾜｰｸ浮き検知異常
OR B0681                 ; B181_386)Bz停止
ANL
LDB B0182                ; B182_387)ST1_ﾃｽﾄﾍｯﾄﾞID_不一致
OR B0682                 ; B182_387)Bz停止
ANL
LDB B0183                ; B183_388)ST1_ﾊﾟﾚｯﾄID_不一致
OR B0683                 ; B183_388)Bz停止
ANL
LDB B0184                ; B184_389)ST1_ﾜｰｸ受取異常
OR B0684                 ; B184_389)Bz停止
ANL
LDB B0185                ; B185_390)ST1_ﾜｰｸ受渡し異常
OR B0685                 ; B185_390)Bz停止
ANL
LDB B0186                ; B186_391)ST1ﾜｰｸ情報不一致
OR B0686                 ; B186_391)Bz停止
ANL
LDB B0187                ; B187_392)
OR B0687                 ; B187_392)Bz停止
ANL
LDB B0188                ; B188_393)
OR B0688                 ; B188_393)Bz停止
ANL
LDB B0189                ; B189_394)
OR B0689                 ; B189_394)Bz停止
ANL
LDB B018A                ; B18A_395)
OR B068A                 ; B18A_395)Bz停止
ANL
LDB B018B                ; B18B_396)
OR B068B                 ; B18B_396)Bz停止
ANL
LDB B018C                ; B18C_397)
OR B068C                 ; B18C_397)Bz停止
ANL
LDB B018D                ; B18D_398)
OR B068D                 ; B18D_398)Bz停止
ANL
LDB B018E                ; B18E_399)
OR B068E                 ; B18E_399)Bz停止
ANL
LDB B018F                ; B18F_400)
OR B068F                 ; B18F_400)Bz停止
ANL
LDB B0190                ; B190_401)
OR B0690                 ; B190_401)Bz停止
ANL
LDB B0191                ; B191_402)
OR B0691                 ; B191_402)Bz停止
ANL
LDB B0192                ; B192_403)
OR B0692                 ; B192_403)Bz停止
ANL
LDB B0193                ; B193_404)
OR B0693                 ; B193_404)Bz停止
ANL
LDB B0174                ; B174_373)
OR B0674                 ; B174_373)Bz停止
ANL
LDB B0175                ; B175_374)
OR B0675                 ; B175_374)Bz停止
ANL
LDB B0176                ; B176_375)
OR B0676                 ; B176_375)Bz停止
ANL
LDB B0177                ; B177_376)
OR B0677                 ; B177_376)Bz停止
ANL
LDB B0178                ; B178_377)
OR B0678                 ; B178_377)Bz停止
ANL
LDB B0179                ; B179_378)
OR B0679                 ; B179_378)Bz停止
ANL
LDB B017A                ; B17A_379)
OR B067A                 ; B17A_379)Bz停止
ANL
LDB B017B                ; B17B_380)
OR B067B                 ; B17B_380)Bz停止
ANL
LDB B017C                ; B17C_381)
OR B067C                 ; B17C_381)Bz停止
ANL
LDB B017D                ; B17D_382)
OR B067D                 ; B17D_382)Bz停止
ANL
LDB B017E                ; B17E_383)
OR B067E                 ; B17E_383)Bz停止
ANL
LDB B017F                ; B17F_384)
OR B067F                 ; B17F_384)Bz停止
ANL
LDB B0324                ; B324_805)ST1ﾜｰｸ除去要求
OR B0824                 ; B324_805)Bz停止
ANL
LDB B0328                ; B328_809)FBTST1検査中
OR B0828                 ; B328_809)Bz停止
ANL
LDB B0330                ; B330_817)ST1_RB3_MANUAL MODE
OR B0830                 ; B330_817)Bz停止
ANL
INV
OUT M6989                ; 電特ST1異常BZ補助
END
ENDH
