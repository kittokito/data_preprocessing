DEVICE:53
;MODULE:DATA
;MODULE_TYPE:0
;SCRIPT_TYPE:
;<h1/>SMA
;SMA411　Current position data　D31290　　Bonding X axis
;SMA421　Current position data　D31350　　Bonding Z axis
;SMA431　Current position data　D31410　　Case-Transfer Y1 axis
;SMA441　Current position data　D31470　　Case-Transfer Y2 axis
;塗布X軸
;Bonding X axis
LD<=.L D31290 +44000     ; 軸1 現在座標
OUT R3000                ; 塗布X　   Case1干渉外
LD>=.L D31290 +24000     ; 軸1 現在座標
OUT R3001                ; 塗布X　   Case2干渉外
LD>=.L D31290 +31500     ; 軸1 現在座標
AND<=.L D31290 +54000    ; 軸1 現在座標
OUT R3002                ; 塗布X　   捨て打ち領域
LD CR2002                ; 常時ON
MPS
LDA.L E2000              ; X_P61
CON
SUB.L +10
CON
STA.L @D30
CON
LDA.L E2000              ; X_P61
CON
ADD.L +10
CON
STA.L @D32
MPP
LD>=.L D31290 @D30       ; 軸1 現在座標
AND<=.L D31290 @D32      ; 軸1 現在座標
ANL
OUT R3003                ; PCB塗布開始位置    [E2000]
;塗布Z軸
;Bonding Z axis
LD<=.L D31350 +5750      ; 軸2 現在座標
OUT R3008                ; 塗布Z　   上空位置
LD>=.L D31350 +8000      ; 軸2 現在座標
OUT R3009                ; 塗布Z　   塗布高さ
LD<=.L D31350 +7000      ; 軸2 現在座標
OUT R3010                ; 塗布Z　   搬送Y干渉外高さ
;ｹｰｽ搬送Y1軸
;Case-Transfer Y1 axis
LD<=.L D31410 +40000     ; 軸3 現在座標
OUT R3100                ; Case搬送Y1投入領域
LD>=.L D31410 +28000     ; 軸3 現在座標
AND<=.L D31410 +52000    ; 軸3 現在座標
OUT R3101                ; Case搬送Y1塗布領域
LD>=.L D31410 +90000     ; 軸3 現在座標
OUT R3102                ; Case搬送Y1受渡領域
LD>=.L D31410 +69000     ; 軸3 現在座標
AND<=.L D31410 +70000    ; 軸3 現在座標
OUT R3103                ; Case搬送Y1嵌合領域
LD<=.L D31410 +47000     ; 軸3 現在座標
OUT R3104                ; Case搬送Y1嵌合干渉外
LD<=.L D31410 +22000     ; 軸3 現在座標
OUT R3105                ; Case搬送Y1投入時LC一時停止領域
;ｹｰｽ搬送Y2軸
;Case-Transfer Y2 axis
LD>=.L D31470 +0         ; 軸4 現在座標
AND<=.L D31470 +22000    ; 軸4 現在座標
OUT R3109                ; Case搬送Y2塗布領域
LD>=.L D31470 +17000     ; 軸4 現在座標
AND<=.L D31470 +20000    ; 軸4 現在座標
OUT R3110                ; Case搬送Y2受渡領域
LD<=.L D31470 +66500     ; 軸4 現在座標
MPS
AND>=.L D31470 +63000    ; 軸4 現在座標
OUT R3111                ; Case搬送Y2嵌合領域
MPP
OUT R3115                ; 嵌合後移動領域
LD>=.L D31470 +42000     ; 軸4 現在座標
OUT R3112                ; Case搬送Y2 塗布･受渡干渉外
LD CR2002                ; 常時ON
MPS
LDA.L E2526              ; Case搬送2_TP_Case投入位置
CON
SUB.L +10
CON
STA.L @D14
CON
LDA.L E2526              ; Case搬送2_TP_Case投入位置
CON
ADD.L +10
CON
STA.L @D16
MPP
LD>=.L D31470 @D14       ; 軸4 現在座標
AND<=.L D31470 @D16      ; 軸4 現在座標
ANL
OUT R3113                ; Case搬送2_TP_Case投入位置
LD>=.L D31470 +69000     ; 軸4 現在座標
OUT R3108                ; Case搬送Y2投入時LC一時停止領域
LD>=.L D31470 +55000     ; 軸4 現在座標
OUT R3114                ; Case搬送2_LC一時停止ｴﾘｱ
;<h1/>RCA
;RCA1 PCB-Assy Z axis
LD CR2002                ; 常時ON
MOV D32307 R4000         ; RCA1 状態信号  RCA1 PEND
LD CR2002                ; 常時ON
MOV.L D32300 D120        ; RCA1 現在位置  RCA1_Position Data
LD R4001                 ; RCA1 HEND
MPS
AND<=.L D120 +13000      ; RCA1_Position Data
OUT R3200                ; PCB-Assy Z 待機領域
MPP
AND>=.L D120 +18500      ; RCA1_Position Data
OUT R3201                ; PCB-Assy Z 嵌合領域
LD>=.L D120 +6000        ; RCA1_Position Data
AND<=.L D120 +7700       ; RCA1_Position Data
OUT R3202                ; PCB-Assy Z 旋回可能領域
LD R4001                 ; RCA1 HEND
LD R3204                 ; PCB-Assy Z 基板受取位置
ANB T1600                ; 基板嵌合ﾁｬｯｸ 閉限   (ﾜｰｸ有でON)
AND T1601                ; 基板嵌合ﾁｬｯｸ 開限
OR<=.L D120 +14400       ; RCA1_Position Data
OR T1605                 ; 基板嵌合ﾁｬｯｸ 退避側限
ANL
OUT R3203                ; PCB-Assy Z 搬送干渉外
LD R4001                 ; RCA1 HEND
MPS
LDA.L E2820              ; PCB嵌合Z_TP_Pos21_Data
CON
SUB.L +10
CON
STA.L @D10
CON
LDA.L E2820              ; PCB嵌合Z_TP_Pos21_Data
CON
ADD.L +10
CON
STA.L @D12
MPP
LD>=.L D120 @D10         ; RCA1_Position Data
AND<=.L D120 @D12        ; RCA1_Position Data
ANL
OUT R3204                ; PCB-Assy Z 基板受取位置
;RCA2 PCB-Chuck 1
LD CR2002                ; 常時ON
MOV D32315 R4200         ; RCA2 状態信号  RCA2 PEND
LD CR2002                ; 常時ON
MOV.L D32308 D122        ; RCA2 現在位置  RCA2_Position Data
LD R4201                 ; RCA2 HEND
MPS
LDA.L E3300              ; R1ｸﾗﾝﾌﾟ開TP_Pos_Data
CON
SUB.L +10
CON
STA.L @D40
CON
LDA.L E3300              ; R1ｸﾗﾝﾌﾟ開TP_Pos_Data
CON
ADD.L +10
CON
STA.L @D42
MPP
LD>=.L D122 @D40         ; RCA2_Position Data
AND<=.L D122 @D42        ; RCA2_Position Data
ANL
OUT R3300                ; PCB-Chuck1 開
LD>=.L D122 E3310        ; RCA2_Position Data  R1ｸﾗﾝﾌﾟ閉TP_Pos_Data
OUT R3301                ; PCB-Chuck1 閉
;RCA3 PCB-Chuck 2
LD CR2002                ; 常時ON
MOV D32323 R4400         ; RCA3 状態信号  RCA3 PEND
LD CR2002                ; 常時ON
MOV.L D32316 D124        ; RCA3 現在位置  RCA3_Position Data
LD R4401                 ; RCA3 HEND
MPS
LDA.L E3350              ; R2ｸﾗﾝﾌﾟ開TP_Pos_Data
CON
SUB.L +10
CON
STA.L @D50
CON
LDA.L E3350              ; R2ｸﾗﾝﾌﾟ開TP_Pos_Data
CON
ADD.L +10
CON
STA.L @D52
MPP
LD>=.L D124 @D50         ; RCA3_Position Data
AND<=.L D124 @D52        ; RCA3_Position Data
ANL
OUT R3400                ; PCB-Chuck2 開
LD>=.L D124 E3360        ; RCA3_Position Data  R2ｸﾗﾝﾌﾟ閉TP_Pos_Data
OUT R3401                ; PCB-Chuck2 閉
;RCA4 COVER-Assy Z axis
LD CR2002                ; 常時ON
MOV D32331 R4600         ; RCA4 状態信号  RCA4 PEND
LD CR2002                ; 常時ON
MOV.L D32324 D126        ; RCA4 現在位置  RCA4_Position Data
LD R4601                 ; RCA4 HEND
AND<=.L D126 +24000      ; RCA4_Position Data
OUT R3500                ; COVER-Assy Z 待機領域
LD R4801                 ; RCA5 HEND
MPS
LDA.L E2940              ; Cover嵌合Z_TP_Pos31_Data
CON
SUB.L +10
CON
STA.L @D20
CON
LDA.L E2940              ; Cover嵌合Z_TP_Pos31_Data
CON
ADD.L +10
CON
STA.L @D22
MRD
LD>=.L D126 @D20         ; RCA4_Position Data
AND<=.L D126 @D22        ; RCA4_Position Data
ANL
OUT R3504                ; COVER吸着領域
MPP
AND>=.L D126 +17500      ; RCA4_Position Data
OUT R3505                ; COVER-Assy Z LC3無視領域
;RCA5 PCB-Eject Y axis
LD CR2002                ; 常時ON
MOV D32339 R4800         ; RCA5 状態信号  RCA5 PEND
LD CR2002                ; 常時ON
MOV.L D32332 D128        ; RCA5 現在位置  RCA5_Position Data
LD R4801                 ; RCA5 HEND
MPS
AND>=.L D128 +27700      ; RCA5_Position Data
OUT R3600                ; 除材1Y    受取干渉外
MRD
AND<=.L D128 +20000      ; RCA5_Position Data
OUT R3601                ; 除材1Y    除材干渉外
MRD
AND R3600                ; 除材1Y    受取干渉外
SET L29                  ; 除材1Y    嵌合X干渉外記憶
MRD
ANB R3600                ; 除材1Y    受取干渉外
RES L29                  ; 除材1Y    嵌合X干渉外記憶
MPP
AND>=.L D128 +31000      ; RCA5_Position Data
OUT R3605                ; 除材1Y    L.C.有効領域
LD R4801                 ; RCA5 HEND
MPS
LDA.L E3104              ; 除材1Y_TP_Pos3_Data
CON
ADD.L +10
CON
STA.L @D4                ; Max difference
CON
LDA.L E3104              ; 除材1Y_TP_Pos3_Data
CON
SUB.L +10
CON
STA.L @D6                ; Min difference
MPP
LD>=.L D128 @D6          ; RCA5_Position Data  Min difference
AND<=.L D128 @D4         ; RCA5_Position Data  Max difference
ANL
OUT R3602                ; 除材1Y    受取位置
LD R4801                 ; RCA5 HEND
MPS
AND>=.L D128 +50000      ; RCA5_Position Data
OUT R3603                ; 除材1Y    ねじ締め領域
MPP
AND<=.L D128 +30000      ; RCA5_Position Data
OUT R3604                ; 除材1Y    ﾌｯｸ開始可能ｴﾘｱ
;RCA6 COVER-Eject Y axis
LD CR2002                ; 常時ON
MOV D32347 R5000         ; RCA6 状態信号  RCA6 PEND
LD CR2002                ; 常時ON
MOV.L D32340 D130        ; RCA6 現在位置  RCA6_Position Data
LD R5001                 ; RCA6 HEND
MPS
AND<=.L D130 +20000      ; RCA6_Position Data
OUT R3700                ; 除材2Y    取出干渉外
MRD
AND>=.L D130 +42800      ; RCA6_Position Data
OUT R3701                ; 除材2Y    塗布干渉外
MPP
AND>=.L D130 +28500      ; RCA6_Position Data
OUT R3702                ; 除材2Y    受渡干渉外
LD R5001                 ; RCA6 HEND
MPS
AND>=.L D130 +48000      ; RCA6_Position Data
OUT R3703                ; 除材2Y    ねじ締め領域
MPP
AND<=.L D130 +25500      ; RCA6_Position Data
OUT R3704                ; 除材2Y    ﾌｯｸ開始可能ｴﾘｱ
;<h1/>JIG ID No.
LD CR2002                ; 常時ON
ZRES D90 D96             ; PCB-Transfer Jig ID  COVER-Remove S.A.Plate Jig ID
PMOV X118 K0 D90 K0 K3   ; 投入1_ｽﾗｲﾀﾞID1  PCB-Transfer Jig ID
PMOV X1251 K0 D91 K0 K3  ; 除材1 ｽﾗｲﾀﾞID識別1  PCB-Eject Jig ID
PMOV X1254 K0 D92 K0 K3  ; 除材1_案内板ID識別1  PCB-Remove S.A.Plate Jig ID
PMOV X1267 K0 D93 K0 K3  ; 投入2_搬送治具ID1  COVER-Transfer Jig ID
PMOV X1273 K0 D94 K0 K3  ; ｶﾊﾞｰ投入_ｶﾞｲﾄﾞID1  COVER-Assy Jig ID
PMOV X121 K0 D95 K0 K3   ; 除材2_ｽﾗｲﾀﾞID識別1  COVER-Eject Jig ID
PMOV X124 K0 D96 K0 K3   ; 除材2_案内板ID識別1  COVER-Remove S.A.Plate Jig ID
;Daily check Flg check
LD CR2002                ; 常時ON
SEC CM700 D410           ; ｶﾚﾝﾀﾞﾀｲﾏ（年）  現在時刻secﾃﾞｰﾀ
CAL* D400 K360 D402      ; 日常点検記憶RESET間隔(hour)  日常点検記憶RESET間隔(sec)
MPS
LD M1432                 ; 結果判定依頼
AND M40                  ; Y1 Daily check OK
OR M88                   ; DC Reset 実行
ANL
CAL+.D D410 D402 D408    ; 現在時刻secﾃﾞｰﾀ  日常点検記憶RESET間隔(sec)  Y1日常点検記憶RESET予定
MRD
LD M3432                 ; 結果判定依頼
AND M41                  ; Y2 Daily check OK
OR M88                   ; DC Reset 実行
ANL
CAL+.D D410 D402 D414    ; 現在時刻secﾃﾞｰﾀ  日常点検記憶RESET間隔(sec)  Y2日常点検記憶RESET予定
MPP
LD M1128                 ; 結果判定依頼
AND M42                  ; PA Daily check OK
OR M88                   ; DC Reset 実行
ANL
CAL+.D D410 D402 D416    ; 現在時刻secﾃﾞｰﾀ  日常点検記憶RESET間隔(sec)  PA日常点検記憶RESET予定
;捨て打ち時間管理
LD CR2008                ; 運転開始時1ｽｷｬﾝON
ORP M65                  ; 即停止異常(緊急停止)
ORF M66                  ; 主幹異常(ｻｲｸﾙ停止)
FMOV K0 D422 K2          ; 捨て打ち実施予定時間(sec)
;ﾜｰｸ投入管理
LD CR2002                ; 常時ON
CAL+ D1020 D3020 D160    ; Y1ﾊﾞｯﾌｧ数  Y2ﾊﾞｯﾌｧ数  Case投入数
;圧力グラフ
;Pressure Graph
;'表示レンジ初期化
;D9900 = 0      '時間軸下限
;D9901 = 100    '時間軸上限
;D9902 = -800   '回転数下限
;D9903 = 800    '回転数上限
;D9904 = 15     'P1下限
;D9905 = 45     'P1上限
;D9906 = 45     'P2下限
;D9907 = 120    'P2上限
;D9940 = 0      '表示ﾃﾞｰﾀNo.
LD<> D12000 K160         ; 表示画面No.
ORP M4680                ; 測定開始
NCJ K1000
;'表示レンジ初期化
;
;D9900 = 0      '時間軸下限
;
LD CR2002                ; 常時ON
MOV K0 D9900             ; 時間X軸下限
;D9901 = 100    '時間軸上限
;
LD CR2002                ; 常時ON
MOV K100 D9901           ; 時間X軸上限
;D9902 = -800   '回転数下限
;
LD CR2002                ; 常時ON
MOV K64736 D9902         ; 回転数ｸﾞﾗﾌY軸下限
;D9903 = 800    '回転数上限
;
LD CR2002                ; 常時ON
MOV K800 D9903           ; 回転数ｸﾞﾗﾌY軸上限
;D9904 = 15     'P1下限
;
LD CR2002                ; 常時ON
MOV K15 D9904            ; P1ｸﾞﾗﾌY軸下限
;D9905 = 45     'P1上限
;
LD CR2002                ; 常時ON
MOV K45 D9905            ; P1ｸﾞﾗﾌY軸上限
;D9906 = 45     'P2下限
;
LD CR2002                ; 常時ON
MOV K45 D9906            ; P2ｸﾞﾗﾌY軸下限
;D9907 = 120    'P2上限
;
LD CR2002                ; 常時ON
MOV K120 D9907           ; P2ｸﾞﾗﾌY軸上限
;D9940 = 0      '表示ﾃﾞｰﾀNo.
LD CR2002                ; 常時ON
MOV K0 D9940             ; Read data No.
LABEL K1000
;
LD= D12000 K160          ; 表示画面No.
FLIK K10 K10 B2900       ; ｸﾞﾗﾌｻﾝﾌﾟﾘﾝｸﾞﾄﾘｶﾞ
LDP M4635                ; Dispense ON 
ORP M4401                ; UT4SUB1ｽﾃｯﾌﾟ開始
ORP M4421                ; Y1塗布動作開始
ORP M4451                ; Y2塗布動作開始
ORP M4701                ; Y1DC塗布動作開始
ORP M4751                ; Y2DC塗布動作開始
OUT M4680                ; 測定開始
LD M4680                 ; 測定開始
OR M4681                 ; 測定中
MPS
AND< D9999 K100          ; ｶｳﾝﾄ
OUT M4681                ; 測定中
MPP
ANP CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
MOV D9999 Z2             ; ｶｳﾝﾄ
INC D9999                ; ｶｳﾝﾄ
MOV D9999 D19000:Z2      ; ｶｳﾝﾄ  時間
PMOV M9950 K0 D19100:Z2 K0 K1;吐出　ON  吐出ﾓｰﾀ正転ﾌﾗｸﾞlog
PMOV M9954 K0 D19200:Z2 K0 K1;吸込　ON  吐出ﾓｰﾀ逆転ﾌﾗｸﾞlog
MOV.L D310 D19300:Z2     ; 回転数  回転数log
MOV D302 D19400:Z2       ; 供給圧　　(0.0Ｍpa)  供給圧log
MOV D304 D19500:Z2       ; 吐出圧    (0.00Ｍpa)  吐出圧log
LDF M4681                ; 測定中
LD M4681                 ; 測定中
ANPB M4681               ; 測定中
AND M4680                ; 測定開始
ORL
BMOV D19000 D20000 K600  ; 時間  表示用データ領域
BMOV D20000 D20600 K9000 ; 表示用データ領域  保存ﾃﾞｰﾀ①
OUT M4682                ; 測定終了
MPS
DW K0 D9999              ; ｶｳﾝﾄ
CON
ZRES D19100 D19599       ; 吐出ﾓｰﾀ正転ﾌﾗｸﾞlog  吐出圧log
MPP
FMOV K100 D19000 K100    ; 時間
;'Time Axix
;@D0 = (D9901 - D9900) / 10
;D9931 = D9900 + @D0
;D9932 = D9931 + @D0
;D9933 = D9932 + @D0
;D9934 = D9933 + @D0
;D9935 = D9934 + @D0
;D9936 = D9935 + @D0
;D9937 = D9936 + @D0
;D9938 = D9937 + @D0
;D9939 = D9938 + @D0
;
;'P1 Y Axix
;@D1 = (D9905 - D9904) / 5
;D9916 = D9904 + @D1
;D9917 = D9916 + @D1
;D9918 = D9917 + @D1
;D9919 = D9918 + @D1
;
;'P2 Y Axix
;@D2 = (D9907 - D9906) / 5
;D9921 = D9906 + @D2
;D9922 = D9921 + @D2
;D9923 = D9922 + @D2
;D9924 = D9923 + @D2
LD= D12000 K160          ; 表示画面No.
NCJ K1001
;'Time Axix
;
;@D0 = (D9901 - D9900) / 10
;
LD CR2002                ; 常時ON
LDA D9900                ; 時間X軸下限
CON
EXT
CON
STA.L @VM0
CON
LDA D9901                ; 時間X軸上限
CON
EXT
CON
SUB.L @VM0
CON
EXT.L
CON
DIV.L +10
CON
STA @D0                  ; Time pitch
;D9931 = D9900 + @D0
;
LD CR2002                ; 常時ON
LDA @D0                  ; Time pitch
CON
EXT
CON
STA.L @VM2
CON
LDA D9900                ; 時間X軸下限
CON
EXT
CON
ADD.L @VM2
CON
STA D9931                ; 時間軸目盛り1
;D9932 = D9931 + @D0
;
LD CR2002                ; 常時ON
LDA @D0                  ; Time pitch
CON
EXT
CON
STA.L @VM4
CON
LDA D9931                ; 時間軸目盛り1
CON
EXT
CON
ADD.L @VM4
CON
STA D9932                ; 時間軸目盛り2
;D9933 = D9932 + @D0
;
LD CR2002                ; 常時ON
LDA @D0                  ; Time pitch
CON
EXT
CON
STA.L @VM6
CON
LDA D9932                ; 時間軸目盛り2
CON
EXT
CON
ADD.L @VM6
CON
STA D9933                ; 時間軸目盛り3
;D9934 = D9933 + @D0
;
LD CR2002                ; 常時ON
LDA @D0                  ; Time pitch
CON
EXT
CON
STA.L @VM8
CON
LDA D9933                ; 時間軸目盛り3
CON
EXT
CON
ADD.L @VM8
CON
STA D9934                ; 時間軸目盛り4
;D9935 = D9934 + @D0
;
LD CR2002                ; 常時ON
LDA @D0                  ; Time pitch
CON
EXT
CON
STA.L @VM10
CON
LDA D9934                ; 時間軸目盛り4
CON
EXT
CON
ADD.L @VM10
CON
STA D9935                ; 時間軸目盛り5
;D9936 = D9935 + @D0
;
LD CR2002                ; 常時ON
LDA @D0                  ; Time pitch
CON
EXT
CON
STA.L @VM12
CON
LDA D9935                ; 時間軸目盛り5
CON
EXT
CON
ADD.L @VM12
CON
STA D9936                ; 時間軸目盛り6
;D9937 = D9936 + @D0
;
LD CR2002                ; 常時ON
LDA @D0                  ; Time pitch
CON
EXT
CON
STA.L @VM14
CON
LDA D9936                ; 時間軸目盛り6
CON
EXT
CON
ADD.L @VM14
CON
STA D9937                ; 時間軸目盛り7
;D9938 = D9937 + @D0
;
LD CR2002                ; 常時ON
LDA @D0                  ; Time pitch
CON
EXT
CON
STA.L @VM16
CON
LDA D9937                ; 時間軸目盛り7
CON
EXT
CON
ADD.L @VM16
CON
STA D9938                ; 時間軸目盛り8
;D9939 = D9938 + @D0
;
LD CR2002                ; 常時ON
LDA @D0                  ; Time pitch
CON
EXT
CON
STA.L @VM18
CON
LDA D9938                ; 時間軸目盛り8
CON
EXT
CON
ADD.L @VM18
CON
STA D9939                ; 時間軸目盛り9
;'P1 Y Axix
;
;@D1 = (D9905 - D9904) / 5
;
LD CR2002                ; 常時ON
LDA D9904                ; P1ｸﾞﾗﾌY軸下限
CON
EXT
CON
STA.L @VM20
CON
LDA D9905                ; P1ｸﾞﾗﾌY軸上限
CON
EXT
CON
SUB.L @VM20
CON
EXT.L
CON
DIV.L +5
CON
STA @D1                  ; P1 pitch
;D9916 = D9904 + @D1
;
LD CR2002                ; 常時ON
LDA @D1                  ; P1 pitch
CON
EXT
CON
STA.L @VM22
CON
LDA D9904                ; P1ｸﾞﾗﾌY軸下限
CON
EXT
CON
ADD.L @VM22
CON
STA D9916                ; P1ｸﾞﾗﾌY軸目盛り1
;D9917 = D9916 + @D1
;
LD CR2002                ; 常時ON
LDA @D1                  ; P1 pitch
CON
EXT
CON
STA.L @VM24
CON
LDA D9916                ; P1ｸﾞﾗﾌY軸目盛り1
CON
EXT
CON
ADD.L @VM24
CON
STA D9917                ; P1ｸﾞﾗﾌY軸目盛り2
;D9918 = D9917 + @D1
;
LD CR2002                ; 常時ON
LDA @D1                  ; P1 pitch
CON
EXT
CON
STA.L @VM26
CON
LDA D9917                ; P1ｸﾞﾗﾌY軸目盛り2
CON
EXT
CON
ADD.L @VM26
CON
STA D9918                ; P1ｸﾞﾗﾌY軸目盛り3
;D9919 = D9918 + @D1
;
LD CR2002                ; 常時ON
LDA @D1                  ; P1 pitch
CON
EXT
CON
STA.L @VM28
CON
LDA D9918                ; P1ｸﾞﾗﾌY軸目盛り3
CON
EXT
CON
ADD.L @VM28
CON
STA D9919                ; P1ｸﾞﾗﾌY軸目盛り4
;'P2 Y Axix
;
;@D2 = (D9907 - D9906) / 5
;
LD CR2002                ; 常時ON
LDA D9906                ; P2ｸﾞﾗﾌY軸下限
CON
EXT
CON
STA.L @VM30
CON
LDA D9907                ; P2ｸﾞﾗﾌY軸上限
CON
EXT
CON
SUB.L @VM30
CON
EXT.L
CON
DIV.L +5
CON
STA @D2                  ; P2 pitch
;D9921 = D9906 + @D2
;
LD CR2002                ; 常時ON
LDA @D2                  ; P2 pitch
CON
EXT
CON
STA.L @VM32
CON
LDA D9906                ; P2ｸﾞﾗﾌY軸下限
CON
EXT
CON
ADD.L @VM32
CON
STA D9921                ; P2ｸﾞﾗﾌY軸目盛り1
;D9922 = D9921 + @D2
;
LD CR2002                ; 常時ON
LDA @D2                  ; P2 pitch
CON
EXT
CON
STA.L @VM34
CON
LDA D9921                ; P2ｸﾞﾗﾌY軸目盛り1
CON
EXT
CON
ADD.L @VM34
CON
STA D9922                ; P2ｸﾞﾗﾌY軸目盛り2
;D9923 = D9922 + @D2
;
LD CR2002                ; 常時ON
LDA @D2                  ; P2 pitch
CON
EXT
CON
STA.L @VM36
CON
LDA D9922                ; P2ｸﾞﾗﾌY軸目盛り2
CON
EXT
CON
ADD.L @VM36
CON
STA D9923                ; P2ｸﾞﾗﾌY軸目盛り3
;D9924 = D9923 + @D2
LD CR2002                ; 常時ON
LDA @D2                  ; P2 pitch
CON
EXT
CON
STA.L @VM38
CON
LDA D9923                ; P2ｸﾞﾗﾌY軸目盛り3
CON
EXT
CON
ADD.L @VM38
CON
STA D9924                ; P2ｸﾞﾗﾌY軸目盛り4
LABEL K1001
;
LD= D12000 K160          ; 表示画面No.
MPS
AND= D9940 K0            ; Read data No.
BMOV D19000 D20000 K600  ; 時間  表示用データ領域
MPP
AND<> D9940 K0           ; Read data No.
MPS
LDA D9940                ; Read data No.
CON
MUL K600
CON
STA Z8
MPP
BMOV D20000:Z8 D20000 K600;表示用データ領域  表示用データ領域
LD< D9940 K0             ; Read data No.
DW K0 D9940              ; Read data No.
LD> D9940 K15            ; Read data No.
DW K15 D9940             ; Read data No.
;ｻｲｸﾙﾀｲﾑ
LD M81                   ; 自動運転開始BZ
MPS
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
@INC D39                 ; ｻｲｸﾙﾀｲﾑ計測
MPP
ANP M8050                ; ｶﾊﾞｰ開確認
MOV D39 D40              ; ｻｲｸﾙﾀｲﾑ計測  ｻｲｸﾙﾀｲﾑ
DW K0 D39                ; ｻｲｸﾙﾀｲﾑ計測
BMOV D40 D41 K10         ; ｻｲｸﾙﾀｲﾑ  Cycle time last 1
@INC D62
LDP M81                  ; 自動運転開始BZ
DW K0 D39                ; ｻｲｸﾙﾀｲﾑ計測
;D61 = ( D41+D42+D43+D44+D45+D46+D47+D48+D49+D50 )
;D62 = ( D51+D52+D53+D54+D55+D56+D57+D58+D59+D60 + D61 ) / 20
;D61 = D61 / 10
;D63 = ( D41+D42+D43+D44+D45 ) / 5
LD CR2002                ; 常時ON
NCJ K1003
;D61 = ( D41+D42+D43+D44+D45+D46+D47+D48+D49+D50 )
;
LD CR2002                ; 常時ON
LDA D42                  ; Cycle time last 2
CON
EXT
CON
STA.L @VM40
CON
LDA D41                  ; Cycle time last 1
CON
EXT
CON
ADD.L @VM40
CON
STA.L @VM42
CON
LDA D43                  ; Cycle time last 3
CON
EXT
CON
ADD.L @VM42
CON
STA.L @VM44
CON
LDA D44                  ; Cycle time last 4
CON
EXT
CON
ADD.L @VM44
CON
STA.L @VM46
CON
LDA D45                  ; Cycle time last 5
CON
EXT
CON
ADD.L @VM46
CON
STA.L @VM48
CON
LDA D46                  ; Cycle time last 6
CON
EXT
CON
ADD.L @VM48
CON
STA.L @VM50
CON
LDA D47                  ; Cycle time last 7
CON
EXT
CON
ADD.L @VM50
CON
STA.L @VM52
CON
LDA D48                  ; Cycle time last 8
CON
EXT
CON
ADD.L @VM52
CON
STA.L @VM54
CON
LDA D49                  ; Cycle time last 9
CON
EXT
CON
ADD.L @VM54
CON
STA.L @VM56
CON
LDA D50                  ; Cycle time last 10
CON
EXT
CON
ADD.L @VM56
CON
STA D61
;D62 = ( D51+D52+D53+D54+D55+D56+D57+D58+D59+D60 + D61 ) / 20
;
LD CR2002                ; 常時ON
LDA D52
CON
EXT
CON
STA.L @VM58
CON
LDA D51
CON
EXT
CON
ADD.L @VM58
CON
STA.L @VM60
CON
LDA D53
CON
EXT
CON
ADD.L @VM60
CON
STA.L @VM62
CON
LDA D54
CON
EXT
CON
ADD.L @VM62
CON
STA.L @VM64
CON
LDA D55
CON
EXT
CON
ADD.L @VM64
CON
STA.L @VM66
CON
LDA D56
CON
EXT
CON
ADD.L @VM66
CON
STA.L @VM68
CON
LDA D57
CON
EXT
CON
ADD.L @VM68
CON
STA.L @VM70
CON
LDA D58
CON
EXT
CON
ADD.L @VM70
CON
STA.L @VM72
CON
LDA D59
CON
EXT
CON
ADD.L @VM72
CON
STA.L @VM74
CON
LDA D60
CON
EXT
CON
ADD.L @VM74
CON
STA.L @VM76
CON
LDA D61
CON
EXT
CON
ADD.L @VM76
CON
EXT.L
CON
DIV.L +20
CON
STA D62
;D61 = D61 / 10
;
LD CR2002                ; 常時ON
LDA D61
CON
EXT
CON
EXT.L
CON
DIV.L +10
CON
STA D61
;D63 = ( D41+D42+D43+D44+D45 ) / 5
LD CR2002                ; 常時ON
LDA D42                  ; Cycle time last 2
CON
EXT
CON
STA.L @VM78
CON
LDA D41                  ; Cycle time last 1
CON
EXT
CON
ADD.L @VM78
CON
STA.L @VM80
CON
LDA D43                  ; Cycle time last 3
CON
EXT
CON
ADD.L @VM80
CON
STA.L @VM82
CON
LDA D44                  ; Cycle time last 4
CON
EXT
CON
ADD.L @VM82
CON
STA.L @VM84
CON
LDA D45                  ; Cycle time last 5
CON
EXT
CON
ADD.L @VM84
CON
EXT.L
CON
DIV.L +5
CON
STA D63
LABEL K1003
;
;出力個数
;INPUT OUTPUT
LDP M1020                ; Jig番号確認
INC D10                  ; Input
LDP M8050                ; ｶﾊﾞｰ開確認
INC D11                  ; Output
LDP B2011                ; Counter reset
DW K0 D10                ; Input
DW K0 D11                ; Output
;浮きｾﾝｻNo.管理
;Float sensor NO. Manegement
LD CR2002                ; 常時ON
DW K5 E6413
CON
DW K5 E9413
CON
DW K5 E12413
CON
DW K5 E15413
CON
DW K5 E18413
CON
DW K5 E21413
CON
DW K5 E24413
LD CR2002                ; 常時ON
MPS
ANB M44                  ; 接着剤塗布日常点検
BMOV E3430 W0115 K2      ; PCB Product F.S.1 Threshold  NU-EP1[1]設定値[1]
BMOV E3434 W0215 K2      ; Cover Product F.S.1 Threshold  NU-EP1[2]設定値[1]
MPP
AND M44                  ; 接着剤塗布日常点検
BMOV E3432 W0115 K2      ; PCB D.C F.S.1 Threshold  NU-EP1[1]設定値[1]
BMOV E3436 W0215 K2      ; Cover D.C F.S.1 Threshold  NU-EP1[2]設定値[1]
END
ENDH
