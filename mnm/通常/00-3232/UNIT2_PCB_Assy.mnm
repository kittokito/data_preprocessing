DEVICE:53
;MODULE:UNIT2_PCB_Assy
;MODULE_TYPE:0
;SCRIPT_TYPE:
;
;UNIT2 Cover-Trasfer Y
;
;動作FLG
LD M2534                 ; Unit2 Z方向原点復帰完了
OR M2995                 ; PCB嵌合Z軸　原点復帰完了
ANB M103                 ; 原点復帰OK
OUT M2995                ; PCB嵌合Z軸　原点復帰完了
LD E3416                 ; PA check 無し
SET M42                  ; PA Daily check OK
LD CR2002                ; 常時ON
DW K0 D2030              ; UT2 Case status
MPS
LD>= D2000 K102          ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
AND< D2000 K117          ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD>= D2000 K210          ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
AND< D2000 K219          ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
ORL
ANL
DW K1 D2030              ; UT2 Case status
MPP
LD>= D2000 K30           ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
AND< D2000 K102          ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD>= D2000 K200          ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
AND< D2000 K210          ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
ORL
ANL
DW K2 D2030              ; UT2 Case status
;■ロボット等機器入力受け
;ロボット、検査装置など状態、現在位置などをまとめる信号は一旦ここで受ける。
;RCA1 signal
LD R4002                 ; RCA1 MOVE
BOR D32507 K2            ; RCA1 制御信号
ANB M131                 ; 安全扉正常
BOUT D32507 K2           ; RCA1 制御信号
;<h1/>装置状態・動作条件
LD R3200                 ; PCB-Assy Z 待機領域
OR R3204                 ; PCB-Assy Z 基板受取位置
AND T1601                ; 基板嵌合ﾁｬｯｸ 開限
AND T1603                ; 基板嵌合ﾁｬｯｸ 戻限
AND T1607                ; PCB移載ﾍｯﾄﾞ 上昇限
AND R3300                ; PCB-Chuck1 開
AND R3400                ; PCB-Chuck2 開
OUT M2900                ; ﾕﾆｯﾄ2原点
LDB B040                 ; ﾕﾆｯﾄ2_異常
ANB B041                 ; ﾕﾆｯﾄ2_異常
ANB B042                 ; 受渡位置Case行方不明
ANB B043                 ; IV異常
ANB B044                 ; IV動作異常
ANB B045                 ; RAC1ｱﾗｰﾑ_異常
ANB B046                 ; RAC2ｱﾗｰﾑ_異常
ANB B047                 ; RAC3ｱﾗｰﾑ_異常
INV
OUT M2901                ; ﾕﾆｯﾄ2全異常
LD M2900                 ; ﾕﾆｯﾄ2原点
ANB M2000                ; ﾕﾆｯﾄ2ｽﾃｯﾌﾟ開始
ANB R4002                ; RCA1 MOVE
AND R4004                ; RCA1 SV
AND R4001                ; RCA1 HEND
ANB R4015                ; RCA1 EMGS
ANB R4003                ; RCA1 ALM
ANB R4202                ; RCA2 MOVE
AND R4204                ; RCA2 SV
AND R4201                ; RCA2 HEND
ANB R4215                ; RCA2 EMGS
ANB R4203                ; RCA2 ALM
ANB R4402                ; RCA3 MOVE
AND R4404                ; RCA3 SV
AND R4401                ; RCA3 HEND
ANB R4415                ; RCA3 EMGS
ANB R4403                ; RCA3 ALM
OUT M2902                ; ﾕﾆｯﾄ2起動条件
LDB M64                  ; 運転準備
OR M65                   ; 即停止異常(緊急停止)
OR M2901                 ; ﾕﾆｯﾄ2全異常
OR T15                   ; 強制停止
OUT M2903                ; ﾕﾆｯﾄ2起動OFF
LD M98                   ; 原点復帰開始
ANB M2904                ; ﾕﾆｯﾄ2原点復帰中
OR M2904                 ; ﾕﾆｯﾄ2原点復帰中
ANB M2903                ; ﾕﾆｯﾄ2起動OFF
ANB M2579                ; ﾕﾆｯﾄ2原点復帰完了確認
OUT M2904                ; ﾕﾆｯﾄ2原点復帰中
LD M83                   ; 各工程起動指令
AND M2902                ; ﾕﾆｯﾄ2起動条件
OR M2905                 ; ﾕﾆｯﾄ2起動中
ANB M2903                ; ﾕﾆｯﾄ2起動OFF
ANB M2399                ; ﾕﾆｯﾄ2動作完了
OUT M2905                ; ﾕﾆｯﾄ2起動中
LD CR2003                ; 常時OFF
OUT M2908                ; ﾕﾆｯﾄ2警報補助
;Pack処理
LDB M2802                ; PCB嵌合Z 指示移動中
ANB M2812                ; PCB嵌合Z 原点復帰中
ANB M2832                ; PCBﾁｬｯｸ1 原点復帰中
ANB M2852                ; PCBﾁｬｯｸ2 原点復帰中
LDB M2822                ; PCBﾁｬｯｸ1 指示移動中
ANB M2842                ; PCBﾁｬｯｸ2 指示移動中
OR M2591                 ; 移載ﾁｬｯｸ強制開
ANL
ANB M2838                ; PCBﾁｬｯｸ1 押付け中
ANB M2858                ; PCBﾁｬｯｸ2 押付け中
INV
OUT M2910                ; UNIT2 Pack
;□エラー発生　一時停止フラグ
LD CR2002                ; 常時ON
MPS
PMOV.D M2920 K0 D2100 K0 K20;Err340:ﾜｰｸ残  UT2ｴﾗｰ判別
MPP
AND<> D2100 K0           ; UT2ｴﾗｰ判別
OUT M2912                ; UNIT2 ｴﾗｰ
LDB M2901                ; ﾕﾆｯﾄ2全異常
ANB M160                 ; ALL PAUSE
ANB M2908                ; ﾕﾆｯﾄ2警報補助
ANB M2912                ; UNIT2 ｴﾗｰ
LDB M32                  ; 自動ﾓｰﾄﾞ
ANB M33                  ; 手動ﾓｰﾄﾞ
LD M32                   ; 自動ﾓｰﾄﾞ
AND M2905                ; ﾕﾆｯﾄ2起動中
ORL
LD M33                   ; 手動ﾓｰﾄﾞ
AND M2904                ; ﾕﾆｯﾄ2原点復帰中
ORL
OR M2631                 ; Dailycheck PA check
ANL
OUT M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
;RB interlock
LDB R4002                ; RCA1 MOVE
AND R4004                ; RCA1 SV
ANB R4015                ; RCA1 EMGS
ANB R4003                ; RCA1 ALM
ANB M2800                ; PCB嵌合Z 移動完了
ANB M2802                ; PCB嵌合Z 指示移動中
ANB M2810                ; PCB嵌合Z 原点復帰完了
OUT M2960                ; PCB嵌合Z原点復帰可能
LD M2960                 ; PCB嵌合Z原点復帰可能
AND R4001                ; RCA1 HEND
LD T1601                 ; 基板嵌合ﾁｬｯｸ 開限
LD T1605                 ; 基板嵌合ﾁｬｯｸ 退避側限
ORB R3103                ; Case搬送Y1嵌合領域
ANL
LDB T1601                ; 基板嵌合ﾁｬｯｸ 開限
LDB R3103                ; Case搬送Y1嵌合領域
OR T1600                 ; 基板嵌合ﾁｬｯｸ 閉限   (ﾜｰｸ有でON)
ANL
ORL
OR R3203                 ; PCB-Assy Z 搬送干渉外
ANL
OUT M2961                ; PCB嵌合Z動作可能
LDB R4202                ; RCA2 MOVE
AND R4204                ; RCA2 SV
ANB R4215                ; RCA2 EMGS
ANB R4203                ; RCA2 ALM
ANB M2820                ; PCBﾁｬｯｸ1 移動完了
ANB M2822                ; PCBﾁｬｯｸ1 指示移動中
ANB M2838                ; PCBﾁｬｯｸ1 押付け中
OUT M2962                ; PCBﾁｬｯｸ1原点復帰可能
LD M2962                 ; PCBﾁｬｯｸ1原点復帰可能
AND R4201                ; RCA2 HEND
OUT M2963                ; PCBﾁｬｯｸ1動作可能
LDB R4402                ; RCA3 MOVE
AND R4404                ; RCA3 SV
ANB R4415                ; RCA3 EMGS
ANB R4403                ; RCA3 ALM
ANB M2840                ; PCBﾁｬｯｸ2 移動完了
ANB M2842                ; PCBﾁｬｯｸ2 指示移動中
ANB M2858                ; PCBﾁｬｯｸ2 押付け中
OUT M2964                ; PCBﾁｬｯｸ2原点復帰可能
LD M2964                 ; PCBﾁｬｯｸ2原点復帰可能
AND R4401                ; RCA3 HEND
OUT M2965                ; PCBﾁｬｯｸ2動作可能
LD CR2002                ; 常時ON
MPS
LD B1015                 ; re-move
OR M2970                 ; NG処理確認
ANB M2971                ; NG解除確認
ANL
OUT M2970                ; NG処理確認
MPP
LD M2970                 ; NG処理確認
AND T1915                ; 投入2 Cover-NGｽｲｯﾁ
ANB T1900                ; ｶﾊﾞｰ投入_ｶﾊﾞｰ検出
ANL
OUT M2971                ; NG解除確認
LDF M2905                ; ﾕﾆｯﾄ2起動中
ZRES M2800 M2812         ; PCB嵌合Z 移動完了  PCB嵌合Z 原点復帰中
;<h1/>■自動回路 
;
;運転開始・ステッパ初期化・補助接点へ展開
LD CR2002                ; 常時ON
ZRES M2000 M2399         ; ﾕﾆｯﾄ2ｽﾃｯﾌﾟ開始  ﾕﾆｯﾄ2動作完了
LDB M2905                ; ﾕﾆｯﾄ2起動中
MOV K0 D2000             ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
ZRES @M110 @M119         ; ｺｰﾄﾞﾘｰﾀﾞ読取位置移動
LD M2905                 ; ﾕﾆｯﾄ2起動中
MOV D2000 Z1             ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
OUT M2000:Z1             ; ﾕﾆｯﾄ2ｽﾃｯﾌﾟ開始
;PCB嵌合ﾁｬｯｸ　受取位置移動
;Move to PCB pick up point
LD M2000                 ; ﾕﾆｯﾄ2ｽﾃｯﾌﾟ開始
SET @M110                ; ｺｰﾄﾞﾘｰﾀﾞ読取位置移動
CON
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2001                 ; 基板嵌合ﾁｬｯｸ開
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
MPS
AND T1601                ; 基板嵌合ﾁｬｯｸ 開限
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
OUT M2652                ; PCB嵌合   ﾁｬｯｸ Open
LD M2002                 ; PCB嵌合ﾁｬｯｸ 受取高さ
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
AND M2961                ; PCB嵌合Z動作可能
AND R3104                ; Case搬送Y1嵌合干渉外
AND R3600                ; 除材1Y    受取干渉外
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2003                 ; PCB-A Z   P21 move
MPS
DW K21 D2050             ; PCB嵌合Z 移動No.
CON
OUT @M1                  ; PCB嵌合Z軸移動
MPP
AND M2800                ; PCB嵌合Z 移動完了
RES M2800                ; PCB嵌合Z 移動完了
CON
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2004                 ; PCB嵌合ﾁｬｯｸ前進
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
MPS
LD T1604                 ; 基板嵌合ﾁｬｯｸ 把握側限
AND @M111                ; ｺｰﾄﾞﾘｰﾀﾞ1移動完了
ANL
RES @M111                ; ｺｰﾄﾞﾘｰﾀﾞ1移動完了
CON
DW K10 D2000             ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
OUT M2682                ; PCBﾁｬｯｸ   把握側
;ｺｰﾄﾞﾘｰﾀﾞ　読み取り位置移動
;Code-reader move to mesurement point
STG @M110                ; ｺｰﾄﾞﾘｰﾀﾞ読取位置移動
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
MPS
ANB E3417                ; PCB code position 2
JMP @M112                ; Position1の場合
MPP
AND E3417                ; PCB code position 2
JMP @M113                ; Position1の場合
STG @M112                ; Position1の場合
MPS
LD M2913                 ; UNIT2     ｴﾗｰ・PAUSE無し
AND T1609                ; ｺｰﾄﾞﾘｰﾀﾞ1 後退限(BK3/4位置)
ANL
JMP @M114                ; 動作完了
MPP
OUT M2732                ; ｺｰﾄﾞﾘｰﾀﾞ 後退
STG @M113                ; Position1の場合
MPS
LD M2913                 ; UNIT2     ｴﾗｰ・PAUSE無し
AND T1608                ; ｺｰﾄﾞﾘｰﾀﾞ1 前進限(BK1位置)
ANL
JMP @M114                ; 動作完了
MPP
OUT M2722                ; ｺｰﾄﾞﾘｰﾀﾞ 前進
STG @M114                ; 動作完了
MPS
SET @M111                ; ｺｰﾄﾞﾘｰﾀﾞ1移動完了
CON
ENDS
MPP
@FMOV K0 D900 K8         ; BCR1読み取りﾃﾞｰﾀ
;PCB取り出し要求待ち
;Waiting for PCB pick up demand
LD M2010                 ; PCB取出要求待ち
MPS
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
MPS
AND M1976                ; PCB取出要求
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
@FMOV K0 D900 K8         ; BCR1読み取りﾃﾞｰﾀ
MPP
LDB M1976                ; PCB取出要求
AND M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
AND M1398                ; ﾕﾆｯﾄ1ｻｲｸﾙ停止
ANL
DW K396 D2000            ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
OUT M2985                ; PCB取出準備
;ﾁｬｯｸ　閉
;Chuck close
LD M2011                 ; ﾁｬｯｸ閉
MPS
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
MPS
AND T1600                ; 基板嵌合ﾁｬｯｸ 閉限   (ﾜｰｸ有でON)
DW K30 D2000             ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
LDB T1600                ; 基板嵌合ﾁｬｯｸ 閉限   (ﾜｰｸ有でON)
ANB T1601                ; 基板嵌合ﾁｬｯｸ 開限
ANL
TMR K210 K30             ; ｴﾗｰｳｪｲﾄ
CON
AND T210                 ; ｴﾗｰｳｪｲﾄ
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
OUT M2642                ; PCB嵌合   ﾁｬｯｸ Close
;PCBﾁｬｯｸ異常
;PCB chuck error
LD M2012                 ; ｴﾗｰ発生
ANB M71                  ; All Error PAUSE
DW K341 D148             ; 警報No.
CON
SET M2921                ; Err341:PCBﾁｬｯｸ異常
CON
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2013                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
RES B1013                ; Remove_FLG
CON
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2014                 ; ｴﾗｰ解除確認
ANB M71                  ; All Error PAUSE
MPS
ANB B1013                ; Remove_FLG
DW K11 D2000             ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
AND B1013                ; Remove_FLG
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2015                 ; ﾁｬｯｸ開
@RES B1013               ; Remove_FLG
CON
MPS
LD M2913                 ; UNIT2     ｴﾗｰ・PAUSE無し
AND T1601                ; 基板嵌合ﾁｬｯｸ 開限
ANL
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
OUT M2653                ; PCB嵌合   ﾁｬｯｸ Open
LD M2016                 ; ｹｰｽ残ﾁｪｯｸ
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
MPS
ANB T1312                ; PCB_嵌合位置ﾜｰｸ検出
DW K21 D2000             ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
AND T1312                ; PCB_嵌合位置ﾜｰｸ検出
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2017                 ; ﾁｬｯｸｴｽｹｰﾌﾟ
MPS
LD M2913                 ; UNIT2     ｴﾗｰ・PAUSE無し
AND T1605                ; 基板嵌合ﾁｬｯｸ 退避側限
ANL
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
OUT M2692                ; PCBﾁｬｯｸ   退避側
;* Err340:Work remain
LD M2018                 ; ｴﾗｰ発生
ANB M71                  ; All Error PAUSE
DW K340 D148             ; 警報No.
CON
SET M2920                ; Err340:ﾜｰｸ残
CON
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2019                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2020                 ; ｴﾗｰ解除確認
ANB M71                  ; All Error PAUSE
DW K16 D2000             ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
;* PCB chuck abnormal end
LD M2021                 ; PCBﾁｬｯｸ異常終了ﾊﾝﾄﾞｼｪｲｸ
MPS
LD M2913                 ; UNIT2     ｴﾗｰ・PAUSE無し
ANB M1976                ; PCB取出要求
ANL
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
OUT M2987                ; PCB取出異常
;* Cchuck reset
LD M2022                 ; ﾁｬｯｸｴｽｹｰﾌﾟ 戻し
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
ANB R3103                ; Case搬送Y1嵌合領域
MPS
AND T1604                ; 基板嵌合ﾁｬｯｸ 把握側限
DW K10 D2000             ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
OUT M2683                ; PCBﾁｬｯｸ   把握側
;基板ｺｰﾄﾞ読み取り位置移動
;Move to Code read position
LD M2030                 ; PCBｺｰﾄﾞ読取高さへ
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
AND M2961                ; PCB嵌合Z動作可能
MPS
LDB M45                  ; PAﾁｪｯｸ日常点検
OR E3416                 ; PA check 無し
ANL
DW K22 D2050             ; PCB嵌合Z 移動No.
CON
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
LD M45                   ; PAﾁｪｯｸ日常点検
ANB E3416                ; PA check 無し
ANL
DW K23 D2050             ; PCB嵌合Z 移動No.
CON
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2031                 ; PCB-A Z   P22 move
OUT @M2                  ; PCB嵌合Z軸移動
MPS
LD<=.L D120 E2828        ; RCA1_Position Data  PCB嵌合Z_TP_Pos25_Data
AND M1976                ; PCB取出要求
ANL
OUT M2986                ; PCB取出完了
MPP
LD M2800                 ; PCB嵌合Z 移動完了
ANB M1976                ; PCB取出要求
ANL
RES M2800                ; PCB嵌合Z 移動完了
CON
MPS
ANB M45                  ; PAﾁｪｯｸ日常点検
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
AND M45                  ; PAﾁｪｯｸ日常点検
DW K40 D2000             ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
;基板ｺｰﾄﾞ読み取り
;Code read
LD M2032                 ; 基板ｺｰﾄﾞ読み取り
MPS
ANB M23                  ; ｺｰﾄﾞﾘｰﾀﾞ無視
MPS
AND M10023               ; BCR1     読取り完了
DW K40 D2000             ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
BMOV D800 D810 K40       ; BCR1読み取りﾃﾞｰﾀ　Log1  BCR1読み取りﾃﾞｰﾀ　Log2
BMOV D900 D800 K10       ; BCR1読み取りﾃﾞｰﾀ  BCR1読み取りﾃﾞｰﾀ　Log1
MRD
AND M10033               ; BCR1     読取りｴﾗｰ
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MRD
AND M10035               ; ﾗﾍﾞﾙ発行PC応答無し
DW K34 D2000             ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MRD
AND M10036               ; BCR1     読取ﾃﾞｰﾀｴﾗｰ
DW K35 D2000             ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
OUT M2980                ; BCR1　　　読み取り
MPP
AND M23                  ; ｺｰﾄﾞﾘｰﾀﾞ無視
TMH K223 K20             ; 移動ﾃﾞｨﾚｲ
CON
AND T223                 ; 移動ﾃﾞｨﾚｲ
DW K40 D2000             ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
;Err323:Code read error
LD M2033                 ; ｴﾗｰ発生
ANB M71                  ; All Error PAUSE
DW K343 D148             ; 警報No.
CON
SET M2923                ; Err343:BCR1読み取り異常
CON
DW K36 D2000             ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2034                 ; ｴﾗｰ発生
ANB M71                  ; All Error PAUSE
DW K344 D148             ; 警報No.
CON
SET M2924                ; Err344:ﾗﾍﾞﾙ発行PC応答無し
CON
DW K36 D2000             ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2035                 ; ｴﾗｰ発生
ANB M71                  ; All Error PAUSE
DW K345 D148             ; 警報No.
CON
SET M2925                ; Err345:BCR1ﾃﾞｰﾀ異常
CON
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2036                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
RES B1013                ; Remove_FLG
CON
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2037                 ; ｴﾗｰ解除確認
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2038                 ; PCB在荷確認
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
AND M131                 ; 安全扉正常
MPS
ANB B1013                ; Remove_FLG
DW K32 D2000             ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
AND B1013                ; Remove_FLG
DW K200 D2000            ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
;PA検査位置移動
;Move to PA check point
LD M2040                 ; PAﾁｪｯｸ有無確認
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
MPS
AND E3416                ; PA check 無し
DW K70 D2000             ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
ANB E3416                ; PA check 無し
MPS
AND E3415                ; PA 表面
DW K44 D2000             ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
ANB E3415                ; PA 表面
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2041                 ; ﾁｬｯｸ旋回高さへ
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
AND M2961                ; PCB嵌合Z動作可能
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2042                 ; PCB-A Z   P23 move
MPS
DW K23 D2050             ; PCB嵌合Z 移動No.
CON
OUT @M3                  ; PCB嵌合Z軸移動
MPP
AND M2800                ; PCB嵌合Z 移動完了
RES M2800                ; PCB嵌合Z 移動完了
CON
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2043                 ; ﾁｬｯｸ旋回
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
AND R3202                ; PCB-Assy Z 旋回可能領域
MPS
AND T1602                ; 基板嵌合ﾁｬｯｸ 旋回限
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
OUT M2662                ; PCBﾁｬｯｸ   旋回
LD M2044                 ; PAﾁｪｯｸ高さへ
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
AND M2961                ; PCB嵌合Z動作可能
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2045                 ; PCB-A Z   P23 move
MPS
DW K24 D2050             ; PCB嵌合Z 移動No.
CON
OUT @M4                  ; PCB嵌合Z軸移動
MPP
AND M2800                ; PCB嵌合Z 移動完了
RES M2800                ; PCB嵌合Z 移動完了
CON
DW K50 D2000             ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
;PA検査
;PA check
LD M2050                 ; PA検査開始
MPS
ANB M22                  ; PAﾁｪｯｸ無視
MPS
AND X102                 ; 画像_BUSY
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
OUT M2982                ; IV  　　　測定
MPP
AND M22                  ; PAﾁｪｯｸ無視
DW K60 D2000             ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2051                 ; 検査終了待ち
ANB X102                 ; 画像_BUSY
MPS
LD X101                  ; 画像_総合判定
OR M45                   ; PAﾁｪｯｸ日常点検
ANL
DW K60 D2000             ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
ANB X101                 ; 画像_総合判定
TMR K217 K2              ; IV判定結果待ち時間
CON
AND T217                 ; IV判定結果待ち時間
ANB M45                  ; PAﾁｪｯｸ日常点検
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
;Err344:PA check error
LD M2052                 ; ｴﾗｰ発生
ANB M71                  ; All Error PAUSE
DW K346 D148             ; 警報No.
CON
SET M2926                ; Err346:PA検査異常
CON
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2053                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2054                 ; ｴﾗｰ解除確認
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2055                 ; PCB在荷確認
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
AND M131                 ; 安全扉正常
MPS
AND T1600                ; 基板嵌合ﾁｬｯｸ 閉限   (ﾜｰｸ有でON)
DW K50 D2000             ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
LDB T1600                ; 基板嵌合ﾁｬｯｸ 閉限   (ﾜｰｸ有でON)
ANB T1601                ; 基板嵌合ﾁｬｯｸ 開限
ANL
TMR K212 K30             ; No PCB delay
CON
AND T212                 ; No PCB delay
DW K200 D2000            ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
;PCB 戻し
;PCB return
LD M2060                 ; ﾁｬｯｸ旋回高さへ
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
AND M2961                ; PCB嵌合Z動作可能
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2061                 ; PCB-A Z   P23 move
MPS
DW K23 D2050             ; PCB嵌合Z 移動No.
CON
OUT @M5                  ; PCB嵌合Z軸移動
MPP
AND M2800                ; PCB嵌合Z 移動完了
RES M2800                ; PCB嵌合Z 移動完了
CON
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2062                 ; ﾁｬｯｸ旋回
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
AND R3202                ; PCB-Assy Z 旋回可能領域
MPS
AND T1603                ; 基板嵌合ﾁｬｯｸ 戻限
DW K70 D2000             ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
OUT M2672                ; PCBﾁｬｯｸ   旋回戻し
;移動先判断
;Assy demand check
LD M2070                 ; 嵌合要求確認
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
MPS
AND M1983                ; PCB　嵌合要求
DW K80 D2000             ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
ANB M1983                ; PCB　嵌合要求
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
;嵌合待機位置移動
;Move to waiting position for assy
LD M2071                 ; 嵌合待機高さへ
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
AND M2961                ; PCB嵌合Z動作可能
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2072                 ; PCB-A Z   P25 move
MPS
DW K25 D2050             ; PCB嵌合Z 移動No.
CON
OUT @M6                  ; PCB嵌合Z軸移動
MPP
AND M2800                ; PCB嵌合Z 移動完了
RES M2800                ; PCB嵌合Z 移動完了
CON
DW K80 D2000             ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
;嵌合要求確認
;Assy demand check2
LD M2080                 ; 嵌合要求待ち
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
MPS
AND M1983                ; PCB　嵌合要求
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
LDB M1983                ; PCB　嵌合要求
AND M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
AND M1398                ; ﾕﾆｯﾄ1ｻｲｸﾙ停止
ANL
DW K200 D2000            ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
;嵌合位置移動　＆　移載ﾁｬｯｸ下降指示
;Move to assy start height & Trasnfer chuck down command
LD M2081                 ; 嵌合高さへ
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
AND M2961                ; PCB嵌合Z動作可能
AND R3103                ; Case搬送Y1嵌合領域
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2082                 ; PCB-A Z   P26 move
MPS
DW K26 D2050             ; PCB嵌合Z 移動No.
CON
OUT @M7                  ; PCB嵌合Z軸移動
MRD
AND M2800                ; PCB嵌合Z 移動完了
RES M2800                ; PCB嵌合Z 移動完了
CON
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
ANB M45                  ; PAﾁｪｯｸ日常点検
OUT M2704                ; PCB移載ﾁｬｯｸ 下降
;嵌合開始ｳｪｲﾄ
;Assy start delay
LD M2083                 ; 嵌合開始  Delay
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
TMR K213 E4400           ; 嵌合開始ﾃﾞｨﾚｲ  Y1嵌合開始ﾃﾞｨﾚｲ
CON
AND T213                 ; 嵌合開始ﾃﾞｨﾚｲ
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
;嵌合終了位置移動
;Move to assy end height
LD M2084                 ; 嵌合押込み高さへ
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
AND M2961                ; PCB嵌合Z動作可能
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2085                 ; PCB-A Z   P27 move
MPS
DW K27 D2050             ; PCB嵌合Z 移動No.
CON
OUT @M8                  ; PCB嵌合Z軸移動
MPP
AND M2800                ; PCB嵌合Z 移動完了
RES M2800                ; PCB嵌合Z 移動完了
CON
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
;嵌合終了ｳｪｲﾄ
;Assy end delay
LD M2086                 ; 嵌合終了  Delay
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
TMR K214 E4402           ; 嵌合終了Delay  Y1嵌合終了ﾃﾞｨﾚｲ
CON
AND T214                 ; 嵌合終了Delay
MPS
ANB M45                  ; PAﾁｪｯｸ日常点検
DW K90 D2000             ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
AND M45                  ; PAﾁｪｯｸ日常点検
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2087                 ; ﾁｬｯｸ開
MPS
LD M2913                 ; UNIT2     ｴﾗｰ・PAUSE無し
AND T1601                ; 基板嵌合ﾁｬｯｸ 開限
ANL
DW K102 D2000            ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
OUT M2657                ; PCB嵌合   ﾁｬｯｸ Open
;PCBﾁｬｯｸ開　＆　移載ﾁｬｯｸ下降
;PCB release & Trasnfer chuck down
LD M2090                 ; ﾁｬｯｸ開　移載ﾁｬｯｸ下降(指示)
MPS
LD M2913                 ; UNIT2     ｴﾗｰ・PAUSE無し
AND T1601                ; 基板嵌合ﾁｬｯｸ 開限
AND Y2168                ; PCB移載ﾍｯﾄﾞ 下降
ANL
SET @M100                ; PCBﾁｬｯｸ　退避高さ動作開始
CON
DW K92 D2000             ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MRD
OUT M2654                ; PCB嵌合   ﾁｬｯｸ Open
MPP
OUT M2702                ; PCB移載ﾁｬｯｸ 下降
;PCBﾁｬｯｸ　基板受取高さ
;PCB Chuck PCB pick up height
STG @M100                ; PCBﾁｬｯｸ　退避高さ動作開始
MPS
LD M2913                 ; UNIT2     ｴﾗｰ・PAUSE無し
AND T1605                ; 基板嵌合ﾁｬｯｸ 退避側限
ANL
JMP @M102                ; PCBﾁｬｯｸ退避側
MPP
OUT M2693                ; PCBﾁｬｯｸ   退避側
STG @M102                ; PCBﾁｬｯｸ退避側
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
AND M2961                ; PCB嵌合Z動作可能
JMP @M103                ; PCB Z P28 move
STG @M103                ; PCB Z P28 move
MPS
DW K28 D2050             ; PCB嵌合Z 移動No.
CON
OUT @M9                  ; PCB嵌合Z軸移動
MPP
AND M2800                ; PCB嵌合Z 移動完了
RES M2800                ; PCB嵌合Z 移動完了
CON
JMP @M104                ; Move end
STG @M104                ; Move end
MPS
LD M2104                 ; PCBﾁｬｯｸ　応答確認1
OR M2095                 ; ﾁｬｯｸｴﾗｰ発生
ANL
ENDS
MPP
OUT @M101                ; PCBﾁｬｯｸ　基板受取高さ動作完了
;移載ﾁｬｯｸ閉
;Trasnfer chuck close
LD M2092                 ; 移載ﾁｬｯｸ 閉
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
AND M2963                ; PCBﾁｬｯｸ1動作可能
AND M2965                ; PCBﾁｬｯｸ2動作可能
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2093                 ; RB chuck P2 move
MPS
DW K2 D2051              ; PCBﾁｬｯｸ1 移動No.
CON
OUT @M36                 ; 移載ﾁｬｯｸ1移動
MRD
DW K2 D2052              ; PCBﾁｬｯｸ2 移動No.
CON
OUT @M61                 ; 移載ﾁｬｯｸ2押付
MPP
LD M2820                 ; PCBﾁｬｯｸ1 移動完了
AND M2840                ; PCBﾁｬｯｸ2 移動完了
ANL
RES M2820                ; PCBﾁｬｯｸ1 移動完了
CON
RES M2840                ; PCBﾁｬｯｸ2 移動完了
CON
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2094                 ; ﾁｬｯｸ完了・状況確認
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
TMH K215 K2              ; ﾁｬｯｸ安定時間
CON
AND T215                 ; ﾁｬｯｸ安定時間
MPS
AND= @D3 K20             ; ﾁｬｯｸ2完了ｺｰﾄﾞ
SET L20                  ; PCB移載ﾁｬｯｸ ﾜｰｸ有
CON
DW K100 D2000            ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
LD<> @D3 K20             ; ﾁｬｯｸ2完了ｺｰﾄﾞ
AND @M101                ; PCBﾁｬｯｸ　基板受取高さ動作完了
ANL
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
;移載ﾁｬｯｸ異常
;Transfer chuck error
LD M2095                 ; ﾁｬｯｸｴﾗｰ発生
ANB M71                  ; All Error PAUSE
DW K347 D148             ; 警報No.
CON
SET M2927                ; Err347:PCB移載ﾁｬｯｸ異常
CON
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2096                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
RES B1013                ; Remove_FLG
CON
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2097                 ; ｴﾗｰ解除確認
ANB M71                  ; All Error PAUSE
MPS
ANB B1013                ; Remove_FLG
DW K92 D2000             ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
AND B1013                ; Remove_FLG
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2098                 ; 除材→異常終了へ
RES B1013                ; Remove_FLG
CON
AND T1605                ; 基板嵌合ﾁｬｯｸ 退避側限
DW K210 D2000            ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
;移載ﾁｬｯｸ上昇
;Trasnfer chuck Up
LD M2100                 ; 移載ﾁｬｯｸ上昇
AND T1605                ; 基板嵌合ﾁｬｯｸ 退避側限
MPS
LD M2913                 ; UNIT2     ｴﾗｰ・PAUSE無し
AND T1607                ; PCB移載ﾍｯﾄﾞ 上昇限
ANL
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
OUT M2712                ; PCB移載ﾁｬｯｸ 上昇
;ｹｰｽ残ﾁｪｯｸ
;Case remain check
LD M2101                 ; Case残ﾁｪｯｸ
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
MPS
ANB T1312                ; PCB_嵌合位置ﾜｰｸ検出
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
AND T1312                ; PCB_嵌合位置ﾜｰｸ検出
TMR K216 K30             ; ｴﾗｰｳｪｲﾄ
CON
AND T216                 ; ｴﾗｰｳｪｲﾄ
OUT M2918                ; 受渡位置CASE行方不明
;嵌合完了
;Assy complete
LD M2102                 ; 嵌合完了ﾊﾝﾄﾞｼｪｲｸ
MPS
LD M2913                 ; UNIT2     ｴﾗｰ・PAUSE無し
ANB M1983                ; PCB　嵌合要求
ANL
MPS
AND M45                  ; PAﾁｪｯｸ日常点検
DW K225 D2000            ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
ANB M45                  ; PAﾁｪｯｸ日常点検
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
OUT M2988                ; PCB嵌合完了
;PCB搬送退避待ち
;Waiting for PCB-Transfer
LD M2103                 ; Case搬送1&PCBﾁｬｯｸ　退避待ち
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
AND R3104                ; Case搬送Y1嵌合干渉外
AND @M101                ; PCBﾁｬｯｸ　基板受取高さ動作完了
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2104                 ; PCBﾁｬｯｸ　応答確認1
ANB @M101                ; PCBﾁｬｯｸ　基板受取高さ動作完了
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
;PCB除材搬送待ち
;Waiting for PCB remove-Transfer
LD M2105                 ; PCB排出受渡要求待ち
MPS
LD M2913                 ; UNIT2     ｴﾗｰ・PAUSE無し
ANB R3600                ; 除材1Y    受取干渉外
AND R3602                ; 除材1Y    受取位置
AND M7972                ; PCB受渡要求
ANL
MPS
ANB T1312                ; PCB_嵌合位置ﾜｰｸ検出
DW K112 D2000            ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
AND T1312                ; PCB_嵌合位置ﾜｰｸ検出
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
OUT M2990                ; CASE除材  準備OK
;★ｹｰｽ受渡異常完了
;★Case pass Error
LD M2106                 ; 受渡異常ﾊﾝﾄﾞｼｪｲｸ
MPS
LD M2913                 ; UNIT2     ｴﾗｰ・PAUSE無し
ANB M7972                ; PCB受渡要求
ANL
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
OUT M2992                ; CASE受渡異常
LD M2107                 ; Delay
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
TMR K230 K20             ; 要求ON delay
CON
AND T230                 ; 要求ON delay
DW K105 D2000            ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
;移載ﾁｬｯｸ下降
;Transfer chuck Down
LD M2112                 ; 移載ﾁｬｯｸ下降
MPS
LD M2913                 ; UNIT2     ｴﾗｰ・PAUSE無し
AND T1606                ; 除材1 移載ﾍｯﾄﾞ 下降限
ANL
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
OUT M2703                ; PCB移載ﾁｬｯｸ 下降
;移載ﾁｬｯｸ開
;Trasnfer chuck Open
LD M2113                 ; 移載ﾁｬｯｸ 開
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
AND M2963                ; PCBﾁｬｯｸ1動作可能
AND M2965                ; PCBﾁｬｯｸ2動作可能
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2114                 ; RB chuck P1 move
MPS
DW K1 D2051              ; PCBﾁｬｯｸ1 移動No.
CON
OUT @M31                 ; 移載ﾁｬｯｸ1移動
MRD
DW K1 D2052              ; PCBﾁｬｯｸ2 移動No.
CON
OUT @M51                 ; 移載ﾁｬｯｸ2移動
MPP
LD M2820                 ; PCBﾁｬｯｸ1 移動完了
AND M2840                ; PCBﾁｬｯｸ2 移動完了
ANL
RES M2820                ; PCBﾁｬｯｸ1 移動完了
CON
RES M2840                ; PCBﾁｬｯｸ2 移動完了
CON
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
;移載ﾁｬｯｸ上昇
;Transfer chuck Up
LD M2115                 ; 移載ﾁｬｯｸ上昇
MPS
LD M2913                 ; UNIT2     ｴﾗｰ・PAUSE無し
AND T1607                ; PCB移載ﾍｯﾄﾞ 上昇限
ANL
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
OUT M2713                ; PCB移載ﾁｬｯｸ 上昇
;ｹｰｽﾁｪｯｸ
;Case check
LD M2116                 ; ｹｰｽﾁｪｯｸ
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
MPS
LD T1312                 ; PCB_嵌合位置ﾜｰｸ検出
OR M37                   ; 空運転ﾓｰﾄﾞ
ANL
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
LDB T1312                ; PCB_嵌合位置ﾜｰｸ検出
ANB M37                  ; 空運転ﾓｰﾄﾞ
ANL
OUT M2917                ; 受渡位置CASE行方不明
;ｹｰｽ受渡完了
;Case pass complete
LD M2117                 ; 受渡完了ﾊﾝﾄﾞｼｪｲｸ
MPS
LD M2913                 ; UNIT2     ｴﾗｰ・PAUSE無し
ANB M7972                ; PCB受渡要求
ANL
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
OUT M2991                ; CASE受渡完了
;PCBﾁｬｯｸ　基板受取高さ
;PCB Chuck PCB pick up height
LD M2118                 ; ﾁｬｯｸ受け取り位置へ
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
AND M2961                ; PCB嵌合Z動作可能
AND R3600                ; 除材1Y    受取干渉外
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2119                 ; PCB_chuck P21 move
MPS
DW K21 D2050             ; PCB嵌合Z 移動No.
CON
OUT @M23                 ; PCB嵌合Z軸移動
MRD
OUT M2684                ; PCBﾁｬｯｸ   把握側
MPP
LD M2800                 ; PCB嵌合Z 移動完了
AND T1604                ; 基板嵌合ﾁｬｯｸ 把握側限
ANL
RES M2800                ; PCB嵌合Z 移動完了
CON
DW K300 D2000            ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
;★★★　異常有ﾜｰｸ排出動作　★★★
;Eject of NG work　
;★PCB異常
;★PCB error
;★PCB残ﾁｪｯｸ
;★PCB remain check
LD M2200                 ; PCB異常  除材→終了
MPS
LD M2913                 ; UNIT2     ｴﾗｰ・PAUSE無し
AND M131                 ; 安全扉正常
ANL
MPS
LDB T1600                ; 基板嵌合ﾁｬｯｸ 閉限   (ﾜｰｸ有でON)
ANB T1601                ; 基板嵌合ﾁｬｯｸ 開限
ANL
DW K219 D2000            ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
AND T1600                ; 基板嵌合ﾁｬｯｸ 閉限   (ﾜｰｸ有でON)
TMR K218 K30             ; Case ON　ｄelay
CON
AND T218                 ; Case ON　ｄelay
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
OUT M2643                ; PCB嵌合   ﾁｬｯｸ Close
;★Err340:Work remain
LD M2201                 ; ｴﾗｰ発生
ANB M71                  ; All Error PAUSE
DW K340 D148             ; 警報No.
CON
SET M2920                ; Err340:ﾜｰｸ残
CON
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2202                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2203                 ; ｴﾗｰ解除確認
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
DW K200 D2000            ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
;★移載ﾁｬｯｸ異常
;★Case Trasfer chuck error
;★移載ﾁｬｯｸ開
;★Case Trasfer chuck Open
LD M2210                 ; 移載ﾁｬｯｸ異常　　　　除材→終了
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
AND M2963                ; PCBﾁｬｯｸ1動作可能
AND M2965                ; PCBﾁｬｯｸ2動作可能
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2211                 ; RB chuck P1 move
MPS
DW K1 D2051              ; PCBﾁｬｯｸ1 移動No.
CON
OUT @M32                 ; 移載ﾁｬｯｸ1移動
MRD
DW K1 D2052              ; PCBﾁｬｯｸ2 移動No.
CON
OUT @M52                 ; 移載ﾁｬｯｸ2移動
MPP
LD M2820                 ; PCBﾁｬｯｸ1 移動完了
AND M2840                ; PCBﾁｬｯｸ2 移動完了
ANL
RES M2820                ; PCBﾁｬｯｸ1 移動完了
CON
RES M2840                ; PCBﾁｬｯｸ2 移動完了
CON
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
;★移載ﾁｬｯｸ上昇
;★Transfer chuck Up
LD M2212                 ; 移載ﾁｬｯｸ上昇
MPS
LD M2913                 ; UNIT2     ｴﾗｰ・PAUSE無し
AND T1607                ; PCB移載ﾍｯﾄﾞ 上昇限
ANL
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
OUT M2714                ; PCB移載ﾁｬｯｸ 上昇
;★CASE残ﾁｪｯｸ
;★Case remain check
LD M2213                 ; Case残ﾁｪｯｸ
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
MPS
ANB T1312                ; PCB_嵌合位置ﾜｰｸ検出
DW K219 D2000            ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
AND T1312                ; PCB_嵌合位置ﾜｰｸ検出
TMR K219 K30             ; Case ON　ｄelay
CON
AND T219                 ; Case ON　ｄelay
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
;★Err340:Work remain
LD M2214                 ; ｴﾗｰ発生
ANB M71                  ; All Error PAUSE
DW K349 D148             ; 警報No.
CON
SET M2929                ; Err349:PCB嵌合部Case残
CON
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2215                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2216                 ; ｴﾗｰ解除確認
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
DW K213 D2000            ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
;★基板異常除材
;★PCB removed by error (PA check or Code read)
LD M2219                 ; 嵌合異常終了ﾊﾝﾄﾞｼｪｰｸ
MPS
LD M2913                 ; UNIT2     ｴﾗｰ・PAUSE無し
AND M1988                ; PCB除材了解
ANL
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
OUT M2993                ; PCB異常除材
;★PCBﾁｬｯｸ開
;★PCB chuck open
LD M2220                 ; PCBﾁｬｯｸ　開
MPS
LD M2913                 ; UNIT2     ｴﾗｰ・PAUSE無し
AND T1601                ; 基板嵌合ﾁｬｯｸ 開限
ANL
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
OUT M2655                ; PCB嵌合   ﾁｬｯｸ Open
;★PCBﾁｬｯｸ　旋回高さへ
;★Move to turn height
LD M2221                 ; ﾁｬｯｸ旋回高さへ
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
AND M2961                ; PCB嵌合Z動作可能
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2222                 ; PCB-A Z   P23 move
MPS
DW K23 D2050             ; PCB嵌合Z 移動No.
CON
OUT @M10                 ; PCB嵌合Z軸移動
MPP
AND M2800                ; PCB嵌合Z 移動完了
RES M2800                ; PCB嵌合Z 移動完了
CON
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
;★PCBﾁｬｯｸ　旋回戻し
;★PCB chuck return
LD M2223                 ; ﾁｬｯｸ旋回
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
AND R3202                ; PCB-Assy Z 旋回可能領域
MPS
AND T1603                ; 基板嵌合ﾁｬｯｸ 戻限
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
OUT M2673                ; PCBﾁｬｯｸ   旋回戻し
;★PCBﾁｬｯｸ　ｴｽｹｰﾌﾟ
;★PCB chuck escape
LD M2224                 ; PCBﾁｬｯｸ　ｴｽｹｰﾌﾟ
MPS
LD M2913                 ; UNIT2     ｴﾗｰ・PAUSE無し
AND T1605                ; 基板嵌合ﾁｬｯｸ 退避側限
ANL
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
OUT M2694                ; PCBﾁｬｯｸ   退避側
;★PCBﾁｬｯｸ　基板受取高さへ
;★Move to PCB pick up height
LD M2225                 ; 基板受取高さへ
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
AND M2961                ; PCB嵌合Z動作可能
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2226                 ; PCB-A Z   P21 move
MPS
DW K21 D2050             ; PCB嵌合Z 移動No.
CON
OUT @M11                 ; PCB嵌合Z軸移動
MPP
AND M2800                ; PCB嵌合Z 移動完了
RES M2800                ; PCB嵌合Z 移動完了
CON
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
;★PCBﾁｬｯｸ　ｴｽｹｰﾌﾟ戻し
;★PCB chuck escape return
LD M2227                 ; PCBﾁｬｯｸ ｴｽｹｰﾌﾟ戻し
MPS
LD M2913                 ; UNIT2     ｴﾗｰ・PAUSE無し
AND T1604                ; 基板嵌合ﾁｬｯｸ 把握側限
ANL
DW K300 D2000            ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
OUT M2685                ; PCBﾁｬｯｸ   把握側
;★★★
;サイクル停止条件
;Cycle end check
LD M2300                 ; 1ｻｲｸﾙ終了
MPS
LDB M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
ORB M1398                ; ﾕﾆｯﾄ1ｻｲｸﾙ停止
ANL
DW K10 D2000             ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
LD M70                   ; 自動起動停止指令(ｻｲｸﾙ停止)
AND M1398                ; ﾕﾆｯﾄ1ｻｲｸﾙ停止
ANL
@MOV K398 D2000          ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
;終了
;Unit AUTO cycle end
LD M2396                 ; 基板受取高さへ
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
AND M2961                ; PCB嵌合Z動作可能
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2397                 ; PCB-A Z   P21 move
MPS
DW K21 D2050             ; PCB嵌合Z 移動No.
CON
OUT @M25                 ; PCB嵌合Z軸移動
MPP
AND M2800                ; PCB嵌合Z 移動完了
RES M2800                ; PCB嵌合Z 移動完了
CON
@INC D2000               ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
LD M2398                 ; ﾕﾆｯﾄ2ｻｲｸﾙ停止
MPS
LD M70                   ; 自動起動停止指令(ｻｲｸﾙ停止)
AND M72                  ; 全ﾕﾆｯﾄ停止確認
ANL
@MOV K399 D2000          ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
MPP
ANB M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
DW K10 D2000             ; ﾕﾆｯﾄ2自動運転ｽﾃｯﾌﾟ
;<h1/>■原点復帰回路
;
;運転開始・ステッパ初期化・補助接点へ展開
LD CR2002                ; 常時ON
ZRES M2500 M2589         ; ﾕﾆｯﾄ2原点復帰開始
LDB M2904                ; ﾕﾆｯﾄ2原点復帰中
MOV K0 D2010             ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
LD M2904                 ; ﾕﾆｯﾄ2原点復帰中
MOV D2010 Z1             ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
OUT M2500:Z1             ; ﾕﾆｯﾄ2原点復帰開始
;原点復帰ステップ開始
;Origin start
LD M2500                 ; ﾕﾆｯﾄ2原点復帰開始
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
MPS
ANB L20                  ; PCB移載ﾁｬｯｸ ﾜｰｸ有
DW K10 D2010             ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
MPP
AND L20                  ; PCB移載ﾁｬｯｸ ﾜｰｸ有
@INC D2010               ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
;Err340:Work remain
LD M2501                 ; ｴﾗｰ発生
ANB M71                  ; All Error PAUSE
DW K348 D148             ; 警報No.
CON
SET M2928                ; Err348:PCB移載ﾁｬｯｸPCB残
CON
@INC D2010               ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
LD M2502                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
@INC D2010               ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
LD M2503                 ; ｴﾗｰ解除確認
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
DW K0 D2010              ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
;移載ﾁｬｯｸ原点復帰
;Transfer-chuck HOME
LD M2510                 ; 移載ﾁｬｯｸ原点復帰
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
AND M2962                ; PCBﾁｬｯｸ1原点復帰可能
AND M2964                ; PCBﾁｬｯｸ2原点復帰可能
@INC D2010               ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
LD M2511                 ; RCA2･RCA3 HOME
MPS
OUT @M81                 ; 移載ﾁｬｯｸ1原点復帰
CON
OUT @M91                 ; 移載ﾁｬｯｸ2原点復帰
MPP
LD M2830                 ; PCBﾁｬｯｸ1 原点復帰完了
AND M2850                ; PCBﾁｬｯｸ2 原点復帰完了
ANL
RES M2830                ; PCBﾁｬｯｸ1 原点復帰完了
CON
RES M2850                ; PCBﾁｬｯｸ2 原点復帰完了
CON
@INC D2010               ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
LD M2512                 ; 移載ﾁｬｯｸ上昇
MPS
LD M2913                 ; UNIT2     ｴﾗｰ・PAUSE無し
AND T1607                ; PCB移載ﾍｯﾄﾞ 上昇限
AND Y2169                ; PCB移載ﾍｯﾄﾞ 上昇
ANL
@INC D2010               ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
MPP
OUT M2715                ; PCB移載ﾁｬｯｸ 上昇
;移載ﾁｬｯｸ開
;Case Trasfer chuck Open
LD M2513
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
AND M2963                ; PCBﾁｬｯｸ1動作可能
AND M2965                ; PCBﾁｬｯｸ2動作可能
@INC D2010               ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
LD M2514
MPS
DW K1 D2051              ; PCBﾁｬｯｸ1 移動No.
CON
OUT @M35                 ; 移載ﾁｬｯｸ1移動
MRD
DW K1 D2052              ; PCBﾁｬｯｸ2 移動No.
CON
OUT @M55                 ; 移載ﾁｬｯｸ2移動
MPP
LD M2820                 ; PCBﾁｬｯｸ1 移動完了
AND M2840                ; PCBﾁｬｯｸ2 移動完了
ANL
RES M2820                ; PCBﾁｬｯｸ1 移動完了
CON
RES M2840                ; PCBﾁｬｯｸ2 移動完了
CON
DW K20 D2010             ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
;PCB残ﾁｪｯｸ
;PCB remain check
LD M2520                 ; ﾜｰｸ残ﾁｪｯｸ
MPS
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
MPS
LDB T1600                ; 基板嵌合ﾁｬｯｸ 閉限   (ﾜｰｸ有でON)
ANB T1601                ; 基板嵌合ﾁｬｯｸ 開限
ANL
DW K30 D2010             ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
MPP
AND T1600                ; 基板嵌合ﾁｬｯｸ 閉限   (ﾜｰｸ有でON)
TMR K220 K30             ; Case ON　ｄelay
CON
AND T220                 ; Case ON　ｄelay
@INC D2010               ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
MPP
OUT M2644                ; PCB嵌合   ﾁｬｯｸ Close
;Err340:Work remain
LD M2521                 ; ｴﾗｰ発生
ANB M71                  ; All Error PAUSE
DW K340 D148             ; 警報No.
CON
SET M2920                ; Err340:ﾜｰｸ残
CON
@INC D2010               ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
LD M2522                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
@INC D2010               ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
LD M2523                 ; ｴﾗｰ解除確認
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
DW K20 D2010             ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
;PCB-chuck　開
;PCB-chuck Open
LD M2530                 ; PCBﾁｬｯｸ　開
MPS
LD M2913                 ; UNIT2     ｴﾗｰ・PAUSE無し
AND T1601                ; 基板嵌合ﾁｬｯｸ 開限
ANL
@INC D2010               ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
MPP
OUT M2656                ; PCB嵌合   ﾁｬｯｸ Open
;PCB-chuck　退避
;PCB-chuck Escape
LD M2531                 ; PCBﾁｬｯｸ退避
MPS
LD M2913                 ; UNIT2     ｴﾗｰ・PAUSE無し
AND T1605                ; 基板嵌合ﾁｬｯｸ 退避側限
ANL
@INC D2010               ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
MPP
OUT M2695                ; PCBﾁｬｯｸ   退避側
;PCB-Z　原点復帰
;PCB-Z HOME
LD M2532                 ; PCB嵌合Z 原点復帰
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
AND M2960                ; PCB嵌合Z原点復帰可能
@INC D2010               ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
LD M2533                 ; RCA1 HOME
MPS
OUT @M71                 ; PCB嵌合Z軸原点復帰
MPP
AND M2810                ; PCB嵌合Z 原点復帰完了
RES M2810                ; PCB嵌合Z 原点復帰完了
CON
@INC D2010               ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
;ﾕﾆｯﾄ2　Z方向原点復帰完了ﾌﾗｸﾞ
;Unit2 Z axis HOME end flag
LD M2534                 ; Unit2 Z方向原点復帰完了
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
AND M2995                ; PCB嵌合Z軸　原点復帰完了
DW K40 D2010             ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
;PCBﾁｬｯｸ　旋回高さへ
;Move to turn height
LD M2540                 ; PCB嵌合ﾁｬｯｸ旋回高さへ
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
AND M2961                ; PCB嵌合Z動作可能
@INC D2010               ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
LD M2541                 ; PCB-A Z   P23 move
MPS
DW K23 D2050             ; PCB嵌合Z 移動No.
CON
OUT @M12                 ; PCB嵌合Z軸移動
MPP
AND M2800                ; PCB嵌合Z 移動完了
RES M2800                ; PCB嵌合Z 移動完了
CON
@INC D2010               ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
;PCBﾁｬｯｸ　旋回戻し
;PCB chuck return
LD M2542                 ; ﾁｬｯｸ旋回
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
AND R3202                ; PCB-Assy Z 旋回可能領域
MPS
AND T1603                ; 基板嵌合ﾁｬｯｸ 戻限
@INC D2010               ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
MPP
OUT M2674                ; PCBﾁｬｯｸ   旋回戻し
;BCR1 測定位置
;BCR1 Measurement position 
LD M2543                 ; BCRｼﾌﾄ
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
MPS
AND= E3417 K0            ; PCB code position 2
MPS
AND T1609                ; ｺｰﾄﾞﾘｰﾀﾞ1 後退限(BK3/4位置)
@INC D2010               ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
MPP
OUT M2733                ; ｺｰﾄﾞﾘｰﾀﾞ 後退
MPP
AND= E3417 K1            ; PCB code position 2
MPS
AND T1608                ; ｺｰﾄﾞﾘｰﾀﾞ1 前進限(BK1位置)
@INC D2010               ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
MPP
OUT M2723                ; ｺｰﾄﾞﾘｰﾀﾞ 前進
;除材1原点復帰待ち
;Waiting for Remove1 HOME cpmplete
LD M2544                 ; RM1Y HOME完了待ち
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
MPS
LD>= D7010 K5            ; ﾕﾆｯﾄ7原点復帰ｽﾃｯﾌﾟ
AND R3600                ; 除材1Y    受取干渉外
ANL
@INC D2010               ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
MPP
LDB M7904                ; ﾕﾆｯﾄ7原点復帰中
AND M7900                ; ﾕﾆｯﾄ7原点
ANL
TMR K200 K50             ; UT7停止確認時間
CON
AND T200                 ; UT7停止確認時間
@INC D2010               ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
;PCBﾁｬｯｸ　基板受取高さへ
;Move to PCB pick up height
LD M2545                 ; PCB嵌合ﾁｬｯｸ 受取高さ
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
AND M2961                ; PCB嵌合Z動作可能
@INC D2010               ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
LD M2546                 ; PCB-A Z   P21 move
MPS
DW K21 D2050             ; PCB嵌合Z 移動No.
CON
OUT @M13                 ; PCB嵌合Z軸移動
MPP
AND M2800                ; PCB嵌合Z 移動完了
RES M2800                ; PCB嵌合Z 移動完了
CON
DW K50 D2010             ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
;BCR check
LD M2550                 ; BCR1 FLG. reset
MPS
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
ZRES M10200 M10211       ; ﾄﾘｶﾞ有効BUSY  結果有効
CON
ANB M10005               ; ｺｰﾄﾞﾘｰﾀﾞﾄﾘｶﾞ有効ON
@INC D2010               ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
MPP
OUT M10006               ; ｺｰﾄﾞﾘｰﾀﾞﾄﾘｶﾞ有効OFF
LD M2551                 ; BCR1 CHECK
MPS
AND M10005               ; ｺｰﾄﾞﾘｰﾀﾞﾄﾘｶﾞ有効ON
DW K77 D2010             ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
MRD
AND M10004               ; ｺｰﾄﾞﾘｰﾀﾞ通信NG PLS
@INC D2010               ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
MPP
OUT M10007               ; ｺｰﾄﾞﾘｰﾀﾞ通信確認入力
;Err322:BCR1 communication error
LD M2552                 ; ｴﾗｰ発生
ANB M71                  ; All Error PAUSE
DW K342 D148             ; 警報No.
CON
SET M2922                ; Err342:BCR1通信異常
CON
@INC D2010               ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
LD M2553                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
@INC D2010               ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
LD M2554                 ; ｴﾗｰ解除確認
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
MPS
ANB M23                  ; ｺｰﾄﾞﾘｰﾀﾞ無視
DW K50 D2010             ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
MPP
AND M23                  ; ｺｰﾄﾞﾘｰﾀﾞ無視
DW K77 D2010             ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
;原点復帰終了
LD M2577                 ; 原点復帰動作完了
AND M2900                ; ﾕﾆｯﾄ2原点
OUT M2578                ; ﾕﾆｯﾄ2原点復帰完了
LD M2578                 ; ﾕﾆｯﾄ2原点復帰完了
ANB M98                  ; 原点復帰開始
@MOV K79 D2010           ; ﾕﾆｯﾄ2原点復帰ｽﾃｯﾌﾟ
;■強制ﾁｬｯｸ開回路
;Chuck forcibly canceled
LDB M81                  ; 自動運転開始BZ
ANB M97                  ; 原点復帰動作中
ANB M131                 ; 安全扉正常
ORB M2905                ; ﾕﾆｯﾄ2起動中
LD M2905                 ; ﾕﾆｯﾄ2起動中
AND M2912                ; UNIT2 ｴﾗｰ
AND B1013                ; Remove_FLG
ORL
AND T1711                ; 嵌合ﾁｬｯｸ開ｽｲｯﾁ
OUT M2591                ; 移載ﾁｬｯｸ強制開
LD CR2002                ; 常時ON
MPS
LD M2591                 ; 移載ﾁｬｯｸ強制開
AND M2963                ; PCBﾁｬｯｸ1動作可能
AND M2965                ; PCBﾁｬｯｸ2動作可能
OR M2590                 ; 移載ﾁｬｯｸ強制開P1移動
LDB M2820                ; PCBﾁｬｯｸ1 移動完了
ORB M2840                ; PCBﾁｬｯｸ2 移動完了
ANL
ANL
OUT M2590                ; 移載ﾁｬｯｸ強制開P1移動
DW K1 D2051              ; PCBﾁｬｯｸ1 移動No.
CON
DW K1 D2052              ; PCBﾁｬｯｸ2 移動No.
CON
OUT @M33                 ; 移載ﾁｬｯｸ1移動
CON
OUT @M53                 ; 移載ﾁｬｯｸ2移動
MPP
ANF M2590                ; 移載ﾁｬｯｸ強制開P1移動
RES M2820                ; PCBﾁｬｯｸ1 移動完了
CON
RES M2840                ; PCBﾁｬｯｸ2 移動完了
LD CR2002                ; 常時ON
LD M2591                 ; 移載ﾁｬｯｸ強制開
ANB M2963                ; PCBﾁｬｯｸ1動作可能
AND M2962                ; PCBﾁｬｯｸ1原点復帰可能
ANB M2965                ; PCBﾁｬｯｸ2動作可能
AND M2964                ; PCBﾁｬｯｸ2原点復帰可能
OR M2592                 ; 移載ﾁｬｯｸ強制原点復帰で開
ANL
LDB R4201                ; RCA2 HEND
ORB R4401                ; RCA3 HEND
ANL
MPS
OUT @M82                 ; 移載ﾁｬｯｸ1原点復帰
CON
OUT @M92                 ; 移載ﾁｬｯｸ2原点復帰
MPP
OUT M2592                ; 移載ﾁｬｯｸ強制原点復帰で開
;<h1/>■手動回路 
;
LD M33                   ; 手動ﾓｰﾄﾞ
AND M34                  ; ﾒｲﾝ手動操作可能条件
ANB M2905                ; ﾕﾆｯﾄ2起動中
ANB M97                  ; 原点復帰動作中
MC
;PCB Assy Z
LD M2961                 ; PCB嵌合Z動作可能
LD=.L D31410 E2440       ; 軸3 現在座標  Case搬送1_TP_Pos21_Data
OR R3602                 ; 除材1Y    受取位置
LD R3104                 ; Case搬送Y1嵌合干渉外
AND R3600                ; 除材1Y    受取干渉外
ORL
OR T1605                 ; 基板嵌合ﾁｬｯｸ 退避側限
ANL
ANB M1803                ; Case搬送Y1移動指示有
ANB M7802                ; PCB排出Y 移動指示中
TMH K260 K20             ; 手動起動許可ｳｪｲﾄ
CON
AND T260                 ; 手動起動許可ｳｪｲﾄ
OUT M2610                ; PCB嵌合Z  動作可
LD CR2002                ; 常時ON
MPS
LD B10A0                 ; PCB嵌合Z  基板受取高さPB
AND M2610                ; PCB嵌合Z  動作可
LD T1600                 ; 基板嵌合ﾁｬｯｸ 閉限   (ﾜｰｸ有でON)
AND R3103                ; Case搬送Y1嵌合領域
LD T1601                 ; 基板嵌合ﾁｬｯｸ 開限
AND R3104                ; Case搬送Y1嵌合干渉外
ORL
OR T1605                 ; 基板嵌合ﾁｬｯｸ 退避側限
ANL
AND T1603                ; 基板嵌合ﾁｬｯｸ 戻限
AND R3600                ; 除材1Y    受取干渉外
OR M2611                 ; PCB_Z     P21移動
ANB M2800                ; PCB嵌合Z 移動完了
ANL
OUT M2611                ; PCB_Z     P21移動
DW K21 D2050             ; PCB嵌合Z 移動No.
CON
OUT @M14                 ; PCB嵌合Z軸移動
MPP
ANF M2611                ; PCB_Z     P21移動
RES M2800                ; PCB嵌合Z 移動完了
LD CR2002                ; 常時ON
MPS
LD B10A1                 ; PCB嵌合Z  ｺｰﾄﾞ読取高さPB
AND M2610                ; PCB嵌合Z  動作可
LD T1600                 ; 基板嵌合ﾁｬｯｸ 閉限   (ﾜｰｸ有でON)
ANB T1601                ; 基板嵌合ﾁｬｯｸ 開限
OR<=.L D120 +14400       ; RCA1_Position Data
OR T1605                 ; 基板嵌合ﾁｬｯｸ 退避側限
LD R3104                 ; Case搬送Y1嵌合干渉外
AND R3600                ; 除材1Y    受取干渉外
ORL
ANL
AND T1603                ; 基板嵌合ﾁｬｯｸ 戻限
OR M2612                 ; PCB_Z     P22移動
ANB M2800                ; PCB嵌合Z 移動完了
ANL
OUT M2612                ; PCB_Z     P22移動
DW K22 D2050             ; PCB嵌合Z 移動No.
CON
OUT @M15                 ; PCB嵌合Z軸移動
MPP
ANF M2612                ; PCB_Z     P22移動
RES M2800                ; PCB嵌合Z 移動完了
LD CR2002                ; 常時ON
MPS
LD B10A2                 ; PCB嵌合Z  旋回高さPB
AND M2610                ; PCB嵌合Z  動作可
LD T1600                 ; 基板嵌合ﾁｬｯｸ 閉限   (ﾜｰｸ有でON)
ANB T1601                ; 基板嵌合ﾁｬｯｸ 開限
OR<=.L D120 +14400       ; RCA1_Position Data
OR T1605                 ; 基板嵌合ﾁｬｯｸ 退避側限
LD R3104                 ; Case搬送Y1嵌合干渉外
AND R3600                ; 除材1Y    受取干渉外
ORL
ANL
OR M2613                 ; PCB_Z     P23移動
ANB M2800                ; PCB嵌合Z 移動完了
ANL
OUT M2613                ; PCB_Z     P23移動
DW K23 D2050             ; PCB嵌合Z 移動No.
CON
OUT @M16                 ; PCB嵌合Z軸移動
MPP
ANF M2613                ; PCB_Z     P23移動
RES M2800                ; PCB嵌合Z 移動完了
LD CR2002                ; 常時ON
MPS
LD B10A3                 ; PCB嵌合Z  PA高さPB
AND M2610                ; PCB嵌合Z  動作可
LD T1600                 ; 基板嵌合ﾁｬｯｸ 閉限   (ﾜｰｸ有でON)
ANB T1601                ; 基板嵌合ﾁｬｯｸ 開限
OR<=.L D120 +14400       ; RCA1_Position Data
OR T1605                 ; 基板嵌合ﾁｬｯｸ 退避側限
LD R3104                 ; Case搬送Y1嵌合干渉外
AND R3600                ; 除材1Y    受取干渉外
ORL
ANL
OR M2614                 ; PCB_Z     P24移動
ANB M2800                ; PCB嵌合Z 移動完了
ANL
OUT M2614                ; PCB_Z     P24移動
DW K24 D2050             ; PCB嵌合Z 移動No.
CON
OUT @M17                 ; PCB嵌合Z軸移動
MPP
ANF M2614                ; PCB_Z     P24移動
RES M2800                ; PCB嵌合Z 移動完了
LD CR2002                ; 常時ON
MPS
LD B10A4                 ; PCB嵌合Z  嵌合前待機高さPB
AND M2610                ; PCB嵌合Z  動作可
LD T1600                 ; 基板嵌合ﾁｬｯｸ 閉限   (ﾜｰｸ有でON)
ANB T1601                ; 基板嵌合ﾁｬｯｸ 開限
OR<=.L D120 +14400       ; RCA1_Position Data
OR T1605                 ; 基板嵌合ﾁｬｯｸ 退避側限
LD R3104                 ; Case搬送Y1嵌合干渉外
AND R3600                ; 除材1Y    受取干渉外
ORL
ANL
AND T1603                ; 基板嵌合ﾁｬｯｸ 戻限
OR M2615                 ; PCB_Z     P25移動
ANB M2800                ; PCB嵌合Z 移動完了
ANL
OUT M2615                ; PCB_Z     P25移動
DW K25 D2050             ; PCB嵌合Z 移動No.
CON
OUT @M18                 ; PCB嵌合Z軸移動
MPP
ANF M2615                ; PCB_Z     P25移動
RES M2800                ; PCB嵌合Z 移動完了
LD CR2002                ; 常時ON
MPS
LD B10A5                 ; PCB嵌合Z  嵌合開始高さPB
LD T1600                 ; 基板嵌合ﾁｬｯｸ 閉限   (ﾜｰｸ有でON)
ANB T1601                ; 基板嵌合ﾁｬｯｸ 開限
OR T1600                 ; 基板嵌合ﾁｬｯｸ 閉限   (ﾜｰｸ有でON)
OR R3104                 ; Case搬送Y1嵌合干渉外
AND R3103                ; Case搬送Y1嵌合領域
OR T1605                 ; 基板嵌合ﾁｬｯｸ 退避側限
ANL
AND M2610                ; PCB嵌合Z  動作可
AND T1603                ; 基板嵌合ﾁｬｯｸ 戻限
AND R3600                ; 除材1Y    受取干渉外
OR M2616                 ; PCB_Z     P26移動
ANB M2800                ; PCB嵌合Z 移動完了
ANL
OUT M2616                ; PCB_Z     P26移動
DW K26 D2050             ; PCB嵌合Z 移動No.
CON
OUT @M19                 ; PCB嵌合Z軸移動
MPP
ANF M2616                ; PCB_Z     P26移動
RES M2800                ; PCB嵌合Z 移動完了
LD CR2002                ; 常時ON
MPS
LD B10A6                 ; PCB嵌合Z  押込高さPB
LD T1600                 ; 基板嵌合ﾁｬｯｸ 閉限   (ﾜｰｸ有でON)
ANB T1601                ; 基板嵌合ﾁｬｯｸ 開限
OR T1600                 ; 基板嵌合ﾁｬｯｸ 閉限   (ﾜｰｸ有でON)
OR R3104                 ; Case搬送Y1嵌合干渉外
AND R3103                ; Case搬送Y1嵌合領域
OR T1605                 ; 基板嵌合ﾁｬｯｸ 退避側限
ANL
AND M2610                ; PCB嵌合Z  動作可
AND T1603                ; 基板嵌合ﾁｬｯｸ 戻限
AND R3600                ; 除材1Y    受取干渉外
OR M2617                 ; PCB_Z     P27移動
ANB M2800                ; PCB嵌合Z 移動完了
ANL
OUT M2617                ; PCB_Z     P27移動
DW K27 D2050             ; PCB嵌合Z 移動No.
CON
OUT @M20                 ; PCB嵌合Z軸移動
MPP
ANF M2617                ; PCB_Z     P27移動
RES M2800                ; PCB嵌合Z 移動完了
;Transfer chuck
LD M2963                 ; PCBﾁｬｯｸ1動作可能
AND M2965                ; PCBﾁｬｯｸ2動作可能
TMH K261 K20             ; 手動起動許可ｳｪｲﾄ
CON
AND T261                 ; 手動起動許可ｳｪｲﾄ
OUT M2600                ; 移載ﾁｬｯｸ  動作可
LD CR2002                ; 常時ON
MPS
LD B10A9                 ; PCB移載ﾁｬｯｸ 開PB
AND M2600                ; 移載ﾁｬｯｸ  動作可
AND T1606                ; 除材1 移載ﾍｯﾄﾞ 下降限
OR M2601                 ; 移載ﾁｬｯｸ  開
LDB M2820                ; PCBﾁｬｯｸ1 移動完了
ORB M2840                ; PCBﾁｬｯｸ2 移動完了
ANL
ANL
OUT M2601                ; 移載ﾁｬｯｸ  開
MPS
DW K1 D2051              ; PCBﾁｬｯｸ1 移動No.
CON
OUT @M34                 ; 移載ﾁｬｯｸ1移動
MPP
DW K1 D2052              ; PCBﾁｬｯｸ2 移動No.
CON
OUT @M54                 ; 移載ﾁｬｯｸ2移動
MPP
ANF M2601                ; 移載ﾁｬｯｸ  開
RES M2820                ; PCBﾁｬｯｸ1 移動完了
CON
RES M2840                ; PCBﾁｬｯｸ2 移動完了
LD CR2002                ; 常時ON
MPS
LD B10AA                 ; PCB移載ﾁｬｯｸ 閉PB
AND M2600                ; 移載ﾁｬｯｸ  動作可
AND T1605                ; 基板嵌合ﾁｬｯｸ 退避側限
OR M2602                 ; 移載ﾁｬｯｸ  閉
LDB M2820                ; PCBﾁｬｯｸ1 移動完了
ORB M2840                ; PCBﾁｬｯｸ2 移動完了
ANL
ANL
OUT M2602                ; 移載ﾁｬｯｸ  閉
MPS
DW K2 D2051              ; PCBﾁｬｯｸ1 移動No.
CON
OUT @M37                 ; 移載ﾁｬｯｸ1移動
MPP
DW K2 D2052              ; PCBﾁｬｯｸ2 移動No.
CON
OUT @M62                 ; 移載ﾁｬｯｸ2押付
MPP
ANF M2602                ; 移載ﾁｬｯｸ  閉
MPS
RES M2820                ; PCBﾁｬｯｸ1 移動完了
CON
RES M2840                ; PCBﾁｬｯｸ2 移動完了
MPP
LD= @D2 K20              ; ﾁｬｯｸ1完了ｺｰﾄﾞ
LD= @D3 K20              ; ﾁｬｯｸ2完了ｺｰﾄﾞ
OR CR2002                ; 常時ON
ANL
ANL
SET L20                  ; PCB移載ﾁｬｯｸ ﾜｰｸ有
;Jog
LD R4004                 ; RCA1 SV
AND R4001                ; RCA1 HEND
ANB R4015                ; RCA1 EMGS
ANB R4003                ; RCA1 ALM
ANB M2800                ; PCB嵌合Z 移動完了
ANB M2802                ; PCB嵌合Z 指示移動中
ANB M2810                ; PCB嵌合Z 原点復帰完了
MPS
AND B2108                ; PCB_Assy_Z軸+JOG PB
BOUT D32507 K8           ; RCA1 制御信号
MPP
AND B2109                ; PCB_Assy_Z軸-JOG PB
BOUT D32507 K7           ; RCA1 制御信号
LD R4204                 ; RCA2 SV
AND R4201                ; RCA2 HEND
ANB R4215                ; RCA2 EMGS
ANB R4203                ; RCA2 ALM
ANB M2800                ; PCB嵌合Z 移動完了
ANB M2802                ; PCB嵌合Z 指示移動中
ANB M2810                ; PCB嵌合Z 原点復帰完了
MPS
AND B210A                ; 移載ﾁｬｯｸ1+JOG PB
BOUT D32515 K8           ; RCA2 制御信号
MPP
AND B210B                ; 移載ﾁｬｯｸ1-JOG PB
BOUT D32515 K7           ; RCA2 制御信号
LD R4404                 ; RCA3 SV
AND R4401                ; RCA3 HEND
ANB R4415                ; RCA3 EMGS
ANB R4403                ; RCA3 ALM
ANB M2800                ; PCB嵌合Z 移動完了
ANB M2802                ; PCB嵌合Z 指示移動中
ANB M2810                ; PCB嵌合Z 原点復帰完了
MPS
AND B210C                ; 移載ﾁｬｯｸ2+JOG PB
BOUT D32523 K8           ; RCA3 制御信号
MPP
AND B210D                ; 移載ﾁｬｯｸ2-JOG PB
BOUT D32523 K7           ; RCA3 制御信号
;PCB-Assy chuck
LD B109A                 ; PCBﾁｬｯｸ 閉PB
AND R3201                ; PCB-Assy Z 嵌合領域
AND T1604                ; 基板嵌合ﾁｬｯｸ 把握側限
OUT M2641                ; PCB嵌合   ﾁｬｯｸ Close
LD B109B                 ; PCBﾁｬｯｸ 開PB
AND R3201                ; PCB-Assy Z 嵌合領域
OUT M2651                ; PCB嵌合   ﾁｬｯｸ Open
LD B109C                 ; PCBﾁｬｯｸ 旋回PB
OUT M2661                ; PCBﾁｬｯｸ   旋回
LD B109D                 ; PCBﾁｬｯｸ 旋回戻しPB
OUT M2671                ; PCBﾁｬｯｸ   旋回戻し
LD B109E                 ; PCBﾁｬｯｸ 前進PB
AND R3300                ; PCB-Chuck1 開
AND R3400                ; PCB-Chuck2 開
AND T1603                ; 基板嵌合ﾁｬｯｸ 戻限
OUT M2681                ; PCBﾁｬｯｸ   把握側
LD B109F                 ; PCBﾁｬｯｸ 後退PB
AND R3300                ; PCB-Chuck1 開
AND R3400                ; PCB-Chuck2 開
AND T1603                ; 基板嵌合ﾁｬｯｸ 戻限
OUT M2691                ; PCBﾁｬｯｸ   退避側
;PCB Trasfer chuck
LD B10AB                 ; PCB移載ﾁｬｯｸ 下降PB
LD R3300                 ; PCB-Chuck1 開
AND R3400                ; PCB-Chuck2 開
OR T1605                 ; 基板嵌合ﾁｬｯｸ 退避側限
ANL
OUT M2701                ; PCB移載ﾁｬｯｸ 下降
LD B10AC                 ; PCB移載ﾁｬｯｸ 上昇PB
LD R3300                 ; PCB-Chuck1 開
AND R3400                ; PCB-Chuck2 開
LDB R3300                ; PCB-Chuck1 開
ORB R3400                ; PCB-Chuck2 開
AND T1605                ; 基板嵌合ﾁｬｯｸ 退避側限
ORL
ANL
OUT M2711                ; PCB移載ﾁｬｯｸ 上昇
;PA check sensor
LDP B10B0                ; Manual_IV測定sw
OR M2630                 ; Manual_IV測定
ANB X102                 ; 画像_BUSY
OUT M2630                ; Manual_IV測定
;code-reader 1
LDP B10B4                ; BCR1 read PB
ANB M10023               ; BCR1     読取り完了
ANB M10033               ; BCR1     読取りｴﾗｰ
ANB M10035               ; ﾗﾍﾞﾙ発行PC応答無し
ANB M10036               ; BCR1     読取ﾃﾞｰﾀｴﾗｰ
OUT M2636                ; BCR1 read
LD B10B5                 ; BCR1 前進PB
OUT M2721                ; ｺｰﾄﾞﾘｰﾀﾞ 前進
LD B10B6                 ; BCR1 後退 PB
OUT M2731                ; ｺｰﾄﾞﾘｰﾀﾞ 後退
MCR
;<h1/>■サブルーチン
;
;<h1/> ////　PAﾁｪｯｸ動作
;////   PA check operation
LD CR2002                ; 常時ON
ZRES M2400 M2409         ; 動作条件確認  PA検査完了
LDB M2631                ; Dailycheck PA check
MOV K0 D2001             ; UT2SUB1   PAﾁｪｯｸｽﾃｯﾌﾟ
LDP B10B0                ; Manual_IV測定sw
AND T1300                ; 投入1_ｹｰｽ検出
AND T1301                ; 投入1_基板検出
AND M2950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
AND M2900                ; ﾕﾆｯﾄ2原点
AND= D12000 K10          ; 表示画面No.
AND M32                  ; 自動ﾓｰﾄﾞ
OR M2631                 ; Dailycheck PA check
ANB M2632                ; PA検査完了
OUT M2631                ; Dailycheck PA check
MOV D2001 Z1             ; UT2SUB1   PAﾁｪｯｸｽﾃｯﾌﾟ
OUT M2400:Z1             ; 動作条件確認
;PA検査動作条件
;Status check for PA check
LD M2400                 ; 動作条件確認
AND T1300                ; 投入1_ｹｰｽ検出
AND T1301                ; 投入1_基板検出
AND T1302                ; 投入1_ｹｰｽ浮き1
AND T1303                ; 投入1_ｹｰｽ浮き2
AND M2950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
AND M2961                ; PCB嵌合Z動作可能
@INC D2001               ; UT2SUB1   PAﾁｪｯｸｽﾃｯﾌﾟ
;PA検査位置移動
;Move to PA check point
LD M2401                 ; PA検査位置移動
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
AND M2950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
AND M2961                ; PCB嵌合Z動作可能
@INC D2001               ; UT2SUB1   PAﾁｪｯｸｽﾃｯﾌﾟ
LD M2402                 ; PCB_Y_P19 move
MPS
DW K19 D2050             ; PCB嵌合Z 移動No.
CON
OUT @M21                 ; PCB嵌合Z軸移動
MPP
AND M2800                ; PCB嵌合Z 移動完了
RES M2800                ; PCB嵌合Z 移動完了
CON
@INC D2001               ; UT2SUB1   PAﾁｪｯｸｽﾃｯﾌﾟ
;PA検査
;PA check
LD M2403                 ; PA検査開始
MPS
AND X102                 ; 画像_BUSY
@INC D2001               ; UT2SUB1   PAﾁｪｯｸｽﾃｯﾌﾟ
MPP
OUT M2983                ; IV  　　　測定
LD M2404                 ; 検査終了待ち
ANB X102                 ; 画像_BUSY
@INC D2001               ; UT2SUB1   PAﾁｪｯｸｽﾃｯﾌﾟ
;投入位置移動
;Move to Work set point
LD M2405                 ; PA投入位置移動
AND M2913                ; UNIT2     ｴﾗｰ・PAUSE無し
AND M2961                ; PCB嵌合Z動作可能
AND M2950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
@INC D2001               ; UT2SUB1   PAﾁｪｯｸｽﾃｯﾌﾟ
LD M2406                 ; PCB_Y_P18 move
MPS
DW K18 D2050             ; PCB嵌合Z 移動No.
CON
OUT @M22                 ; PCB嵌合Z軸移動
MPP
AND M2800                ; PCB嵌合Z 移動完了
RES M2800                ; PCB嵌合Z 移動完了
CON
DW K9 D2001              ; UT2SUB1   PAﾁｪｯｸｽﾃｯﾌﾟ
LD M2409                 ; PA検査完了
OUT M2632                ; PA検査完了
;<h1/>Output
;PCB-Assy Z
;Move
LDB @M1                  ; PCB嵌合Z軸移動
ANB @M2                  ; PCB嵌合Z軸移動
ANB @M3                  ; PCB嵌合Z軸移動
ANB @M4                  ; PCB嵌合Z軸移動
ANB @M5                  ; PCB嵌合Z軸移動
ANB @M6                  ; PCB嵌合Z軸移動
ANB @M7                  ; PCB嵌合Z軸移動
ANB @M8                  ; PCB嵌合Z軸移動
ANB @M9                  ; PCB嵌合Z軸移動
ANB @M10                 ; PCB嵌合Z軸移動
ANB @M11                 ; PCB嵌合Z軸移動
ANB @M12                 ; PCB嵌合Z軸移動
ANB @M13                 ; PCB嵌合Z軸移動
ANB @M14                 ; PCB嵌合Z軸移動
ANB @M15                 ; PCB嵌合Z軸移動
ANB @M16                 ; PCB嵌合Z軸移動
ANB @M17                 ; PCB嵌合Z軸移動
ANB @M18                 ; PCB嵌合Z軸移動
ANB @M19                 ; PCB嵌合Z軸移動
ANB @M20                 ; PCB嵌合Z軸移動
ANB @M21                 ; PCB嵌合Z軸移動
ANB @M22                 ; PCB嵌合Z軸移動
ANB @M23                 ; PCB嵌合Z軸移動
ANB @M24                 ; PCB嵌合Z軸移動
ANB @M25                 ; PCB嵌合Z軸移動
INV
@SET M2804               ; PCB嵌合Z 移動開始
OUT M2802                ; PCB嵌合Z 指示移動中
;Z1 = (D2050-1) * 4        'ﾃﾞｰﾀ先頭ｲﾝﾃﾞｯｸｽ 1Point 4Data
;Z2 = Z1 + 2               '速度は2ﾜｰﾄﾞ後
;D2060.L = E34000.L:Z1     '目標位置ﾃﾞｰﾀｾｯﾄ
;D2062.D = #3              '位置決め完了幅0.03mm固定
;D2064.U = E34000.L:Z2     '速度ﾃﾞｰﾀｾｯﾄ
;RES(M2803)
;SET(M2805)                'ﾃﾞｰﾀｾｯﾄ完了ﾌﾗｸﾞ
LDP M2804                ; PCB嵌合Z 移動開始
NCJ K1002
;Z1 = (D2050-1) * 4        'ﾃﾞｰﾀ先頭ｲﾝﾃﾞｯｸｽ 1Point 4Data
;
LD CR2002                ; 常時ON
LDA D2050                ; PCB嵌合Z 移動No.
CON
EXT
CON
SUB.L +1
CON
MUL.L +4
CON
STA.L Z1
;Z2 = Z1 + 2               '速度は2ﾜｰﾄﾞ後
;
LD CR2002                ; 常時ON
LDA.L Z1
CON
ADD.L +2
CON
STA.L Z2
;D2060.L = E34000.L:Z1     '目標位置ﾃﾞｰﾀｾｯﾄ
;
LD CR2002                ; 常時ON
MOV.L E34000:Z1 D2060    ; RCA1 P1 Position data  RCA1 目標位置
;D2062.D = #3              '位置決め完了幅0.03mm固定
;
LD CR2002                ; 常時ON
MOV.D K3 D2062           ; RCA1 位置決め幅
;D2064.U = E34000.L:Z2     '速度ﾃﾞｰﾀｾｯﾄ
;
LD CR2002                ; 常時ON
MOV E34000:Z2 D2064      ; RCA1 P1 Position data  RCA1 位置決め速度
;RES(M2803)
;
LD CR2002                ; 常時ON
RES M2803
;SET(M2805)                'ﾃﾞｰﾀｾｯﾄ完了ﾌﾗｸﾞ
LD CR2002                ; 常時ON
SET M2805                ; PCB嵌合Z Data set 完了
LABEL K1002
;
LD M2805                 ; PCB嵌合Z Data set 完了
MSTRT IAI_CON_MOVE_1 D2060 D2062 D2064 D32300 D32500 @M0 @D1 M127 K50 M2803;RCA1 目標位置  RCA1 位置決め幅  RCA1 位置決め速度  RCA1 現在位置  RCA1 目標位置  PCB嵌合Z軸移動完了  完了ｺｰﾄﾞ  RBC 非常停止
RES M2805                ; PCB嵌合Z Data set 完了
STG M2804                ; PCB嵌合Z 移動開始
AND @M0                  ; PCB嵌合Z軸移動完了
ANB _IAI_CON_MOVE_1
RES @M0                  ; PCB嵌合Z軸移動完了
CON
SET M2800                ; PCB嵌合Z 移動完了
CON
ENDS
;HOME
LDB @M71                 ; PCB嵌合Z軸原点復帰
ANB @M72                 ; PCB嵌合Z軸原点復帰
INV
@SET M2813               ; PCB嵌合Z 原点復帰開始
OUT M2812                ; PCB嵌合Z 原点復帰中
LD M2813                 ; PCB嵌合Z 原点復帰開始
MSTRT IAI_CON_HOME_1 D32300 D32500 @M70 @D1 M127 K50;RCA1 現在位置  RCA1 目標位置  PCB嵌合Z軸原点復帰完了  完了ｺｰﾄﾞ  RBC 非常停止
STG M2813                ; PCB嵌合Z 原点復帰開始
AND _IAI_CON_HOME_1
JMP M2814
STG M2814
AND @M70                 ; PCB嵌合Z軸原点復帰完了
JMP M2815                ; PCB嵌合Z HOME完了待
STG M2815                ; PCB嵌合Z HOME完了待
ANB _IAI_CON_HOME_1
RES @M70                 ; PCB嵌合Z軸原点復帰完了
CON
SET M2810                ; PCB嵌合Z 原点復帰完了
CON
ENDS
;PCB-chuck 1 Normal Operation
LDB @M31                 ; 移載ﾁｬｯｸ1移動
ANB @M32                 ; 移載ﾁｬｯｸ1移動
ANB @M33                 ; 移載ﾁｬｯｸ1移動
ANB @M34                 ; 移載ﾁｬｯｸ1移動
ANB @M35                 ; 移載ﾁｬｯｸ1移動
ANB @M36                 ; 移載ﾁｬｯｸ1移動
ANB @M37                 ; 移載ﾁｬｯｸ1移動
INV
@SET M2824               ; PCBﾁｬｯｸ1 移動開始
OUT M2822                ; PCBﾁｬｯｸ1 指示移動中
;Z1 = (D2051-1) * 10       'ﾃﾞｰﾀ先頭ｲﾝﾃﾞｯｸｽ 1Point 10data
;Z2 = Z1 + 2               '速度は2ﾜｰﾄﾞ後
;D2070.L = E34600.L:Z1     '目標位置ﾃﾞｰﾀｾｯﾄ
;D2072.D =#3               '位置決め完了幅0.03mm固定
;D2074.U = E34600.L:Z2     '速度ﾃﾞｰﾀｾｯﾄ
;RES(L20)                  '把握ﾌﾗｸﾞ初期化
;RES(M2823)
;SET(M2825)                'ﾃﾞｰﾀｾｯﾄ完了ﾌﾗｸﾞ
LDP M2824                ; PCBﾁｬｯｸ1 移動開始
NCJ K1003
;Z1 = (D2051-1) * 10       'ﾃﾞｰﾀ先頭ｲﾝﾃﾞｯｸｽ 1Point 10data
;
LD CR2002                ; 常時ON
LDA D2051                ; PCBﾁｬｯｸ1 移動No.
CON
EXT
CON
SUB.L +1
CON
MUL.L +10
CON
STA.L Z1
;Z2 = Z1 + 2               '速度は2ﾜｰﾄﾞ後
;
LD CR2002                ; 常時ON
LDA.L Z1
CON
ADD.L +2
CON
STA.L Z2
;D2070.L = E34600.L:Z1     '目標位置ﾃﾞｰﾀｾｯﾄ
;
LD CR2002                ; 常時ON
MOV.L E34600:Z1 D2070    ; RCA2 P1 Position data  RCA2 目標位置
;D2072.D =#3               '位置決め完了幅0.03mm固定
;
LD CR2002                ; 常時ON
MOV.D K3 D2072           ; RCA2 位置決め幅
;D2074.U = E34600.L:Z2     '速度ﾃﾞｰﾀｾｯﾄ
;
LD CR2002                ; 常時ON
MOV E34600:Z2 D2074      ; RCA2 P1 Position data  RCA2 位置決め速度
;RES(L20)                  '把握ﾌﾗｸﾞ初期化
;
LD CR2002                ; 常時ON
RES L20                  ; PCB移載ﾁｬｯｸ ﾜｰｸ有
;RES(M2823)
;
LD CR2002                ; 常時ON
RES M2823
;SET(M2825)                'ﾃﾞｰﾀｾｯﾄ完了ﾌﾗｸﾞ
LD CR2002                ; 常時ON
SET M2825                ; PCBﾁｬｯｸ1 Data set 完了
LABEL K1003
;
LD M2825                 ; PCBﾁｬｯｸ1 Data set 完了
MSTRT IAI_CON_MOVE_2 D2070 D2072 D2074 D32308 D32508 @M30 @D2 M127 K50 M2823;RCA2 目標位置  RCA2 位置決め幅  RCA2 位置決め速度  RCA2 現在位置  RCA2 目標位置  移載ﾁｬｯｸ1移動完了  ﾁｬｯｸ1完了ｺｰﾄﾞ  RBC 非常停止
RES M2825                ; PCBﾁｬｯｸ1 Data set 完了
STG M2824                ; PCBﾁｬｯｸ1 移動開始
AND @M30                 ; 移載ﾁｬｯｸ1移動完了
ANB _IAI_CON_MOVE_2
RES @M30                 ; 移載ﾁｬｯｸ1移動完了
CON
SET M2820                ; PCBﾁｬｯｸ1 移動完了
CON
ENDS
;PCB-chuck 1 Pussing Operation
LDB @M41                 ; 移載ﾁｬｯｸ1押付
ANB @M42                 ; 移載ﾁｬｯｸ1押付
INV
@SET M2835               ; PCBﾁｬｯｸ1 押付け開始
OUT M2838                ; PCBﾁｬｯｸ1 押付け中
;Z1 = (D2051-1) * 10       'ﾃﾞｰﾀ先頭ｲﾝﾃﾞｯｸｽ 1Point 10data
;Z2 = Z1 + 2               '速度は2ﾜｰﾄﾞ後
;Z3 = Z1 + 4               '押付電流値は4ﾜｰﾄﾞ後
;D2070.L = E34600.L:Z1     '目標位置ﾃﾞｰﾀｾｯﾄ
;D2072.D = #500           '押付け範囲は10.00mm固定
;D2074.U = E34600.L:Z2     '速度ﾃﾞｰﾀｾｯﾄ
;D2075.U = E34600.U:Z3     '押付電流値ﾃﾞｰﾀｾｯﾄ
;D2076.U = #1              '押付方向は+側固定
;RES(L20)                  '把握ﾌﾗｸﾞ初期化
;SET(M2836)                'ﾃﾞｰﾀｾｯﾄ完了ﾌﾗｸﾞ
LDP M2835                ; PCBﾁｬｯｸ1 押付け開始
NCJ K1000
;Z1 = (D2051-1) * 10       'ﾃﾞｰﾀ先頭ｲﾝﾃﾞｯｸｽ 1Point 10data
;
LD CR2002                ; 常時ON
LDA D2051                ; PCBﾁｬｯｸ1 移動No.
CON
EXT
CON
SUB.L +1
CON
MUL.L +10
CON
STA.L Z1
;Z2 = Z1 + 2               '速度は2ﾜｰﾄﾞ後
;
LD CR2002                ; 常時ON
LDA.L Z1
CON
ADD.L +2
CON
STA.L Z2
;Z3 = Z1 + 4               '押付電流値は4ﾜｰﾄﾞ後
;
LD CR2002                ; 常時ON
LDA.L Z1
CON
ADD.L +4
CON
STA.L Z3
;D2070.L = E34600.L:Z1     '目標位置ﾃﾞｰﾀｾｯﾄ
;
LD CR2002                ; 常時ON
MOV.L E34600:Z1 D2070    ; RCA2 P1 Position data  RCA2 目標位置
;D2072.D = #500           '押付け範囲は10.00mm固定
;
LD CR2002                ; 常時ON
MOV.D K500 D2072         ; RCA2 位置決め幅
;D2074.U = E34600.L:Z2     '速度ﾃﾞｰﾀｾｯﾄ
;
LD CR2002                ; 常時ON
MOV E34600:Z2 D2074      ; RCA2 P1 Position data  RCA2 位置決め速度
;D2075.U = E34600.U:Z3     '押付電流値ﾃﾞｰﾀｾｯﾄ
;
LD CR2002                ; 常時ON
MOV E34600:Z3 D2075      ; RCA2 P1 Position data  RCA2 押付け電流制限値
;D2076.U = #1              '押付方向は+側固定
;
LD CR2002                ; 常時ON
MOV K1 D2076             ; RCA2 押付け方向
;RES(L20)                  '把握ﾌﾗｸﾞ初期化
;
LD CR2002                ; 常時ON
RES L20                  ; PCB移載ﾁｬｯｸ ﾜｰｸ有
;SET(M2836)                'ﾃﾞｰﾀｾｯﾄ完了ﾌﾗｸﾞ
LD CR2002                ; 常時ON
SET M2836                ; PCBﾁｬｯｸ1 Data set 完了
LABEL K1000
;
LD M2836                 ; PCBﾁｬｯｸ1 Data set 完了
MSTRT IAI_CON_PUSH_2 D2070 D2075 D2076 D32308 D32508 @M40 @D2 M127 K50;RCA2 目標位置  RCA2 押付け電流制限値  RCA2 押付け方向  RCA2 現在位置  RCA2 目標位置  移載ﾁｬｯｸ1押付完了  ﾁｬｯｸ1完了ｺｰﾄﾞ  RBC 非常停止
RES M2836                ; PCBﾁｬｯｸ1 Data set 完了
STG M2835                ; PCBﾁｬｯｸ1 押付け開始
AND @M40                 ; 移載ﾁｬｯｸ1押付完了
ANB _IAI_CON_PUSH_2
RES @M40                 ; 移載ﾁｬｯｸ1押付完了
CON
SET M2820                ; PCBﾁｬｯｸ1 移動完了
CON
ENDS
;HOME
LDB @M81                 ; 移載ﾁｬｯｸ1原点復帰
ANB @M82                 ; 移載ﾁｬｯｸ1原点復帰
INV
RES L20                  ; PCB移載ﾁｬｯｸ ﾜｰｸ有
CON
@SET M2833               ; PCBﾁｬｯｸ1 原点復帰開始
CON
OUT M2832                ; PCBﾁｬｯｸ1 原点復帰中
LD M2833                 ; PCBﾁｬｯｸ1 原点復帰開始
MSTRT IAI_CON_HOME_2 D32308 D32508 @M80 @D2 M127 K50;RCA2 現在位置  RCA2 目標位置  移載ﾁｬｯｸ1原点復帰完了  ﾁｬｯｸ1完了ｺｰﾄﾞ  RBC 非常停止
STG M2833                ; PCBﾁｬｯｸ1 原点復帰開始
AND _IAI_CON_HOME_2
JMP M2834                ; PCBﾁｬｯｸ1 MC完了待ち
STG M2834                ; PCBﾁｬｯｸ1 MC完了待ち
AND @M80                 ; 移載ﾁｬｯｸ1原点復帰完了
JMP M2839                ; PCBﾁｬｯｸ1 原点復帰完了待ち
STG M2839                ; PCBﾁｬｯｸ1 原点復帰完了待ち
ANB _IAI_CON_HOME_2
RES @M80                 ; 移載ﾁｬｯｸ1原点復帰完了
CON
SET M2830                ; PCBﾁｬｯｸ1 原点復帰完了
CON
ENDS
;PCB-chuck 2 Normal Operation
LDB @M51                 ; 移載ﾁｬｯｸ2移動
ANB @M52                 ; 移載ﾁｬｯｸ2移動
ANB @M53                 ; 移載ﾁｬｯｸ2移動
ANB @M54                 ; 移載ﾁｬｯｸ2移動
ANB @M55                 ; 移載ﾁｬｯｸ2移動
INV
@SET M2844               ; PCBﾁｬｯｸ2 移動開始
OUT M2842                ; PCBﾁｬｯｸ2 指示移動中
;Z1 = (D2052-1) * 10       'ﾃﾞｰﾀ先頭ｲﾝﾃﾞｯｸｽ 1Point 10data
;Z2 = Z1 + 2               '速度は2ﾜｰﾄﾞ後
;D2080.L = E34700.L:Z1     '目標位置ﾃﾞｰﾀｾｯﾄ
;D2082.D = #3              '位置決め完了幅0.03mm固定
;D2084.U = E34700.L:Z2     '速度ﾃﾞｰﾀｾｯﾄ
;RES(L20)                  '把握ﾌﾗｸﾞ初期化
;RES(M2843)
;SET(M2845)                'ﾃﾞｰﾀｾｯﾄ完了ﾌﾗｸﾞ
LDP M2844                ; PCBﾁｬｯｸ2 移動開始
NCJ K1004
;Z1 = (D2052-1) * 10       'ﾃﾞｰﾀ先頭ｲﾝﾃﾞｯｸｽ 1Point 10data
;
LD CR2002                ; 常時ON
LDA D2052                ; PCBﾁｬｯｸ2 移動No.
CON
EXT
CON
SUB.L +1
CON
MUL.L +10
CON
STA.L Z1
;Z2 = Z1 + 2               '速度は2ﾜｰﾄﾞ後
;
LD CR2002                ; 常時ON
LDA.L Z1
CON
ADD.L +2
CON
STA.L Z2
;D2080.L = E34700.L:Z1     '目標位置ﾃﾞｰﾀｾｯﾄ
;
LD CR2002                ; 常時ON
MOV.L E34700:Z1 D2080    ; RCA3 P1 Position data  RCA3 目標位置
;D2082.D = #3              '位置決め完了幅0.03mm固定
;
LD CR2002                ; 常時ON
MOV.D K3 D2082           ; RCA3 位置決め幅
;D2084.U = E34700.L:Z2     '速度ﾃﾞｰﾀｾｯﾄ
;
LD CR2002                ; 常時ON
MOV E34700:Z2 D2084      ; RCA3 P1 Position data  RCA3 位置決め速度
;RES(L20)                  '把握ﾌﾗｸﾞ初期化
;
LD CR2002                ; 常時ON
RES L20                  ; PCB移載ﾁｬｯｸ ﾜｰｸ有
;RES(M2843)
;
LD CR2002                ; 常時ON
RES M2843
;SET(M2845)                'ﾃﾞｰﾀｾｯﾄ完了ﾌﾗｸﾞ
LD CR2002                ; 常時ON
SET M2845                ; PCBﾁｬｯｸ2 Data set 完了
LABEL K1004
;
LD M2845                 ; PCBﾁｬｯｸ2 Data set 完了
MSTRT IAI_CON_MOVE_3 D2080 D2082 D2084 D32316 D32516 @M50 @D3 M127 K50 M2843;RCA3 目標位置  RCA3 位置決め幅  RCA3 位置決め速度  RCA3 現在位置  RCA3 目標位置  移載ﾁｬｯｸ2移動完了  ﾁｬｯｸ2完了ｺｰﾄﾞ  RBC 非常停止
RES M2845                ; PCBﾁｬｯｸ2 Data set 完了
STG M2844                ; PCBﾁｬｯｸ2 移動開始
AND @M50                 ; 移載ﾁｬｯｸ2移動完了
ANB _IAI_CON_MOVE_3
RES @M50                 ; 移載ﾁｬｯｸ2移動完了
CON
SET M2840                ; PCBﾁｬｯｸ2 移動完了
CON
ENDS
;PCB-chuck 2 Pussing Operation
LDB @M61                 ; 移載ﾁｬｯｸ2押付
ANB @M62                 ; 移載ﾁｬｯｸ2押付
INV
@SET M2855               ; PCBﾁｬｯｸ2 押付け開始
OUT M2858                ; PCBﾁｬｯｸ2 押付け中
;Z1 = (D2052-1) * 10       'ﾃﾞｰﾀ先頭ｲﾝﾃﾞｯｸｽ 1Point 10data
;Z2 = Z1 + 2               '速度は2ﾜｰﾄﾞ後
;Z3 = Z1 + 4               '押付電流値は4ﾜｰﾄﾞ後
;D2080.L = E34700.L:Z1     '目標位置ﾃﾞｰﾀｾｯﾄ
;D2082.D = #500           '押付け範囲は10.00mm固定
;D2084.U = E34700.L:Z2     '速度ﾃﾞｰﾀｾｯﾄ
;D2085.U = E34700.U:Z3     '押付電流値ﾃﾞｰﾀｾｯﾄ
;D2086.U = #1              '押付方向は+側固定
;RES(L20)                  '把握ﾌﾗｸﾞ初期化
;SET(M2856)                'ﾃﾞｰﾀｾｯﾄ完了ﾌﾗｸﾞ
LDP M2855                ; PCBﾁｬｯｸ2 押付け開始
NCJ K1001
;Z1 = (D2052-1) * 10       'ﾃﾞｰﾀ先頭ｲﾝﾃﾞｯｸｽ 1Point 10data
;
LD CR2002                ; 常時ON
LDA D2052                ; PCBﾁｬｯｸ2 移動No.
CON
EXT
CON
SUB.L +1
CON
MUL.L +10
CON
STA.L Z1
;Z2 = Z1 + 2               '速度は2ﾜｰﾄﾞ後
;
LD CR2002                ; 常時ON
LDA.L Z1
CON
ADD.L +2
CON
STA.L Z2
;Z3 = Z1 + 4               '押付電流値は4ﾜｰﾄﾞ後
;
LD CR2002                ; 常時ON
LDA.L Z1
CON
ADD.L +4
CON
STA.L Z3
;D2080.L = E34700.L:Z1     '目標位置ﾃﾞｰﾀｾｯﾄ
;
LD CR2002                ; 常時ON
MOV.L E34700:Z1 D2080    ; RCA3 P1 Position data  RCA3 目標位置
;D2082.D = #500           '押付け範囲は10.00mm固定
;
LD CR2002                ; 常時ON
MOV.D K500 D2082         ; RCA3 位置決め幅
;D2084.U = E34700.L:Z2     '速度ﾃﾞｰﾀｾｯﾄ
;
LD CR2002                ; 常時ON
MOV E34700:Z2 D2084      ; RCA3 P1 Position data  RCA3 位置決め速度
;D2085.U = E34700.U:Z3     '押付電流値ﾃﾞｰﾀｾｯﾄ
;
LD CR2002                ; 常時ON
MOV E34700:Z3 D2085      ; RCA3 P1 Position data  RCA3 押付け電流制限値
;D2086.U = #1              '押付方向は+側固定
;
LD CR2002                ; 常時ON
MOV K1 D2086             ; RCA3 押付け方向
;RES(L20)                  '把握ﾌﾗｸﾞ初期化
;
LD CR2002                ; 常時ON
RES L20                  ; PCB移載ﾁｬｯｸ ﾜｰｸ有
;SET(M2856)                'ﾃﾞｰﾀｾｯﾄ完了ﾌﾗｸﾞ
LD CR2002                ; 常時ON
SET M2856                ; PCBﾁｬｯｸ2 Data set 完了
LABEL K1001
;
LD M2856                 ; PCBﾁｬｯｸ2 Data set 完了
MSTRT IAI_CON_PUSH_3 D2080 D2085 D2086 D32316 D32516 @M60 @D3 M127 K50;RCA3 目標位置  RCA3 押付け電流制限値  RCA3 押付け方向  RCA3 現在位置  RCA3 目標位置  移載ﾁｬｯｸ2押付完了  ﾁｬｯｸ2完了ｺｰﾄﾞ  RBC 非常停止
RES M2856                ; PCBﾁｬｯｸ2 Data set 完了
STG M2855                ; PCBﾁｬｯｸ2 押付け開始
AND @M60                 ; 移載ﾁｬｯｸ2押付完了
ANB _IAI_CON_PUSH_3
RES @M60                 ; 移載ﾁｬｯｸ2押付完了
CON
SET M2840                ; PCBﾁｬｯｸ2 移動完了
CON
ENDS
;HOME
LDB @M91                 ; 移載ﾁｬｯｸ2原点復帰
ANB @M92                 ; 移載ﾁｬｯｸ2原点復帰
INV
RES L20                  ; PCB移載ﾁｬｯｸ ﾜｰｸ有
CON
@SET M2853               ; PCBﾁｬｯｸ2 原点復帰開始
CON
OUT M2852                ; PCBﾁｬｯｸ2 原点復帰中
LD M2853                 ; PCBﾁｬｯｸ2 原点復帰開始
MSTRT IAI_CON_HOME_3 D32316 D32516 @M90 @D3 M127 K50;RCA3 現在位置  RCA3 目標位置  移載ﾁｬｯｸ2原点復帰完了  ﾁｬｯｸ2完了ｺｰﾄﾞ  RBC 非常停止
STG M2853                ; PCBﾁｬｯｸ2 原点復帰開始
AND _IAI_CON_HOME_3
JMP M2854                ; PCBﾁｬｯｸ2 MC完了待ち
STG M2854                ; PCBﾁｬｯｸ2 MC完了待ち
AND @M90                 ; 移載ﾁｬｯｸ2原点復帰完了
JMP M2859                ; PCBﾁｬｯｸ2 原点復帰完了待ち
STG M2859                ; PCBﾁｬｯｸ2 原点復帰完了待ち
ANB _IAI_CON_HOME_3
RES @M90                 ; 移載ﾁｬｯｸ2原点復帰完了
CON
SET M2850                ; PCBﾁｬｯｸ2 原点復帰完了
CON
ENDS
;PCB嵌合ﾁｬｯｸ
;PCB-Assy chuck
LDP M2641                ; PCB嵌合   ﾁｬｯｸ Close
ORP M2642                ; PCB嵌合   ﾁｬｯｸ Close
ORP M2643                ; PCB嵌合   ﾁｬｯｸ Close
ORP M2644                ; PCB嵌合   ﾁｬｯｸ Close
OR M2640                 ; PCB嵌合ﾁｬｯｸ閉補助
ANPB M2650               ; PCB嵌合ﾁｬｯｸ開補助
OUT M2640                ; PCB嵌合ﾁｬｯｸ閉補助
LDP M2651                ; PCB嵌合   ﾁｬｯｸ Open
ORP M2652                ; PCB嵌合   ﾁｬｯｸ Open
ORP M2653                ; PCB嵌合   ﾁｬｯｸ Open
ORP M2654                ; PCB嵌合   ﾁｬｯｸ Open
ORP M2655                ; PCB嵌合   ﾁｬｯｸ Open
ORP M2656                ; PCB嵌合   ﾁｬｯｸ Open
ORP M2657                ; PCB嵌合   ﾁｬｯｸ Open
OR M2650                 ; PCB嵌合ﾁｬｯｸ開補助
ANPB M2640               ; PCB嵌合ﾁｬｯｸ閉補助
OUT M2650                ; PCB嵌合ﾁｬｯｸ開補助
LD M2640                 ; PCB嵌合ﾁｬｯｸ閉補助
OUT Y2160                ; 基板嵌合ﾁｬｯｸ 閉
LD M2650                 ; PCB嵌合ﾁｬｯｸ開補助
OUT Y2161                ; 基板嵌合ﾁｬｯｸ 開
;PCB嵌合ﾁｬｯｸ　旋回
;PCB-Assy chuck　Turn
LD R3202                 ; PCB-Assy Z 旋回可能領域
OR T1602                 ; 基板嵌合ﾁｬｯｸ 旋回限
LDP M2661                ; PCBﾁｬｯｸ   旋回
ORP M2662                ; PCBﾁｬｯｸ   旋回
ANL
OR M2660                 ; PCBﾁｬｯｸ   旋回補助
ANPB M2670               ; PCBﾁｬｯｸ   旋回戻し補助
OUT M2660                ; PCBﾁｬｯｸ   旋回補助
LD R3202                 ; PCB-Assy Z 旋回可能領域
OR T1603                 ; 基板嵌合ﾁｬｯｸ 戻限
LDP M2671                ; PCBﾁｬｯｸ   旋回戻し
ORP M2672                ; PCBﾁｬｯｸ   旋回戻し
ORP M2673                ; PCBﾁｬｯｸ   旋回戻し
ORP M2674                ; PCBﾁｬｯｸ   旋回戻し
ANL
OR M2670                 ; PCBﾁｬｯｸ   旋回戻し補助
ANPB M2660               ; PCBﾁｬｯｸ   旋回補助
OUT M2670                ; PCBﾁｬｯｸ   旋回戻し補助
LD M2660                 ; PCBﾁｬｯｸ   旋回補助
OUT Y2162                ; 基板嵌合ﾁｬｯｸ 旋回
LD M2670                 ; PCBﾁｬｯｸ   旋回戻し補助
OUT Y2163                ; 基板嵌合ﾁｬｯｸ 戻
;PCB嵌合ﾁｬｯｸ　ｴｽｹｰﾌﾟ
;PCB-Assy chuck Escape
LDP M2681                ; PCBﾁｬｯｸ   把握側
ORP M2682                ; PCBﾁｬｯｸ   把握側
ORP M2683                ; PCBﾁｬｯｸ   把握側
ORP M2684                ; PCBﾁｬｯｸ   把握側
ORP M2685                ; PCBﾁｬｯｸ   把握側
LD Y2161                 ; 基板嵌合ﾁｬｯｸ 開
AND T1601                ; 基板嵌合ﾁｬｯｸ 開限
ORB T1605                ; 基板嵌合ﾁｬｯｸ 退避側限
ANL
OR M2680                 ; PCBﾁｬｯｸ   把握側補助
ANPB M2690               ; PCBﾁｬｯｸ   退避側補助
OUT M2680                ; PCBﾁｬｯｸ   把握側補助
LDP M2691                ; PCBﾁｬｯｸ   退避側
ORP M2692                ; PCBﾁｬｯｸ   退避側
ORP M2693                ; PCBﾁｬｯｸ   退避側
ORP M2694                ; PCBﾁｬｯｸ   退避側
ORP M2695                ; PCBﾁｬｯｸ   退避側
AND Y2161                ; 基板嵌合ﾁｬｯｸ 開
AND T1601                ; 基板嵌合ﾁｬｯｸ 開限
OR M2690                 ; PCBﾁｬｯｸ   退避側補助
ANPB M2680               ; PCBﾁｬｯｸ   把握側補助
OUT M2690                ; PCBﾁｬｯｸ   退避側補助
LD M2680                 ; PCBﾁｬｯｸ   把握側補助
OUT Y2164                ; 基板嵌合ﾁｬｯｸ 把握側
LD M2690                 ; PCBﾁｬｯｸ   退避側補助
OUT Y2165                ; 基板嵌合ﾁｬｯｸ 退避側
;PCB移載ﾁｬｯｸ　
;PCB-Transfer chuck 
LDP M2701                ; PCB移載ﾁｬｯｸ 下降
ORP M2702                ; PCB移載ﾁｬｯｸ 下降
ORP M2703                ; PCB移載ﾁｬｯｸ 下降
ORP M2704                ; PCB移載ﾁｬｯｸ 下降
OR M2700                 ; PCB移載ﾁｬｯｸ 下降補助
ANPB M2710               ; PCB移載ﾁｬｯｸ 上昇補助
OUT M2700                ; PCB移載ﾁｬｯｸ 下降補助
LDP M2711                ; PCB移載ﾁｬｯｸ 上昇
ORP M2712                ; PCB移載ﾁｬｯｸ 上昇
ORP M2713                ; PCB移載ﾁｬｯｸ 上昇
ORP M2714                ; PCB移載ﾁｬｯｸ 上昇
ORP M2715                ; PCB移載ﾁｬｯｸ 上昇
OR M2710                 ; PCB移載ﾁｬｯｸ 上昇補助
ANPB M2700               ; PCB移載ﾁｬｯｸ 下降補助
OUT M2710                ; PCB移載ﾁｬｯｸ 上昇補助
LD T2108                 ; Source air pressure
OUT Y2166                ; 除材1 移載ﾍｯﾄﾞﾌﾞﾚｰｷ解除
LD M2700                 ; PCB移載ﾁｬｯｸ 下降補助
OUT Y2168                ; PCB移載ﾍｯﾄﾞ 下降
LD M2710                 ; PCB移載ﾁｬｯｸ 上昇補助
OUT Y2169                ; PCB移載ﾍｯﾄﾞ 上昇
;ｺｰﾄﾞﾘｰﾀﾞ1 ｼﾌﾄ　
;Core reader1 shift
LDP M2721                ; ｺｰﾄﾞﾘｰﾀﾞ 前進
ORP M2722                ; ｺｰﾄﾞﾘｰﾀﾞ 前進
ORP M2723                ; ｺｰﾄﾞﾘｰﾀﾞ 前進
ORP M2724                ; ｺｰﾄﾞﾘｰﾀﾞ 前進
OR M2720                 ; ｺｰﾄﾞﾘｰﾀﾞ 前進補助
ANPB M2730               ; ｺｰﾄﾞﾘｰﾀﾞ 後退補助
OUT M2720                ; ｺｰﾄﾞﾘｰﾀﾞ 前進補助
LDP M2731                ; ｺｰﾄﾞﾘｰﾀﾞ 後退
ORP M2732                ; ｺｰﾄﾞﾘｰﾀﾞ 後退
ORP M2733                ; ｺｰﾄﾞﾘｰﾀﾞ 後退
OR M2730                 ; ｺｰﾄﾞﾘｰﾀﾞ 後退補助
ANPB M2720               ; ｺｰﾄﾞﾘｰﾀﾞ 前進補助
OUT M2730                ; ｺｰﾄﾞﾘｰﾀﾞ 後退補助
LD M2720                 ; ｺｰﾄﾞﾘｰﾀﾞ 前進補助
OUT Y216C                ; ｺｰﾄﾞﾘｰﾀﾞ1 前進(BK1位置)
LD M2730                 ; ｺｰﾄﾞﾘｰﾀﾞ 後退補助
OUT Y216D                ; ｺｰﾄﾞﾘｰﾀﾞ1 後退(BK3/4位置)
;IV
LD M2982                 ; IV  　　　測定
OR M2983                 ; IV  　　　測定
OR M2630                 ; Manual_IV測定
OUT Y201                 ; 画像_TRG
LD CR2002                ; 常時ON
PMOV D10050 K0 Y203 K0 K4; 測定機種No.  画像_Bit0
LD Y201                  ; 画像_TRG
OR M2635                 ; IV_判定中
ANB T250                 ; IV結果表示時間
OUT M2635                ; IV_判定中
TMR K250 K10             ; IV結果表示時間
TMH K251 K10             ; IV判定時間
;<h1/>異常検出
;
LD CR2002                ; 常時ON
MPS
LD CR2003                ; 常時OFF
LDB B0540                ; ﾕﾆｯﾄ2_異常1BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B040                 ; ﾕﾆｯﾄ2_異常
ORL
ANL
OUT B040                 ; ﾕﾆｯﾄ2_異常
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0540                 ; ﾕﾆｯﾄ2_異常1BZ停止
AND B040                 ; ﾕﾆｯﾄ2_異常
ANL
OUT B0540                ; ﾕﾆｯﾄ2_異常1BZ停止
LD CR2002                ; 常時ON
MPS
LD CR2003                ; 常時OFF
LDB B0541                ; ﾕﾆｯﾄ2_異常2BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B041                 ; ﾕﾆｯﾄ2_異常
ORL
ANL
OUT B041                 ; ﾕﾆｯﾄ2_異常
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0541                 ; ﾕﾆｯﾄ2_異常2BZ停止
AND B041                 ; ﾕﾆｯﾄ2_異常
ANL
OUT B0541                ; ﾕﾆｯﾄ2_異常2BZ停止
LD CR2002                ; 常時ON
MPS
LD M2917                 ; 受渡位置CASE行方不明
OR M2918                 ; 受渡位置CASE行方不明
LDB B0542                ; ﾕﾆｯﾄ2_異常3BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B042                 ; 受渡位置Case行方不明
ORL
ANL
OUT B042                 ; 受渡位置Case行方不明
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0542                 ; ﾕﾆｯﾄ2_異常3BZ停止
AND B042                 ; 受渡位置Case行方不明
ANL
OUT B0542                ; ﾕﾆｯﾄ2_異常3BZ停止
LD M64                   ; 運転準備
ANB X103                 ; 画像_Error
TMR K290 K30             ; IV異常
LD CR2002                ; 常時ON
MPS
LD T290                  ; IV異常
LDB B0543                ; ﾕﾆｯﾄ2_異常4BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B043                 ; IV異常
ORL
ANL
OUT B043                 ; IV異常
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0543                 ; ﾕﾆｯﾄ2_異常4BZ停止
AND B043                 ; IV異常
ANL
OUT B0543                ; ﾕﾆｯﾄ2_異常4BZ停止
LD M2982                 ; IV  　　　測定
ANB X102                 ; 画像_BUSY
LD M2051                 ; 検査終了待ち
AND X102                 ; 画像_BUSY
ORL
TMR K291 K30             ; IV動作異常
LD CR2002                ; 常時ON
MPS
LD T291                  ; IV動作異常
LDB B0544                ; ﾕﾆｯﾄ2_異常5BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B044                 ; IV動作異常
ORL
ANL
OUT B044                 ; IV動作異常
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0544                 ; ﾕﾆｯﾄ2_異常5BZ停止
AND B044                 ; IV動作異常
ANL
OUT B0544                ; ﾕﾆｯﾄ2_異常5BZ停止
LD M510                  ; RCA1　起動
AND R4003                ; RCA1 ALM
TMR K205 K100            ; RCA1 error
LD CR2002                ; 常時ON
MPS
LD M64                   ; 運転準備
AND R4003                ; RCA1 ALM
OR T205                  ; RCA1 error
LDB B0545                ; ﾕﾆｯﾄ2_異常6BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B045                 ; RAC1ｱﾗｰﾑ_異常
ORL
ANL
OUT B045                 ; RAC1ｱﾗｰﾑ_異常
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0545                 ; ﾕﾆｯﾄ2_異常6BZ停止
AND B045                 ; RAC1ｱﾗｰﾑ_異常
ANL
OUT B0545                ; ﾕﾆｯﾄ2_異常6BZ停止
LD CR2002                ; 常時ON
MPS
LD M64                   ; 運転準備
ANB M2838                ; PCBﾁｬｯｸ1 押付け中
AND R4203                ; RCA2 ALM
LDB B0546                ; ﾕﾆｯﾄ2_異常6BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B046                 ; RAC2ｱﾗｰﾑ_異常
ORL
ANL
OUT B046                 ; RAC2ｱﾗｰﾑ_異常
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0546                 ; ﾕﾆｯﾄ2_異常6BZ停止
AND B046                 ; RAC2ｱﾗｰﾑ_異常
ANL
OUT B0546                ; ﾕﾆｯﾄ2_異常6BZ停止
LD CR2002                ; 常時ON
MPS
LD M64                   ; 運転準備
ANB M2858                ; PCBﾁｬｯｸ2 押付け中
AND R4403                ; RCA3 ALM
LDB B0547                ; ﾕﾆｯﾄ2_異常6BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B047                 ; RAC3ｱﾗｰﾑ_異常
ORL
ANL
OUT B047                 ; RAC3ｱﾗｰﾑ_異常
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0547                 ; ﾕﾆｯﾄ2_異常6BZ停止
AND B047                 ; RAC3ｱﾗｰﾑ_異常
ANL
OUT B0547                ; ﾕﾆｯﾄ2_異常6BZ停止
;異常ﾌﾞｻﾞｰまとめ
LD B040                  ; ﾕﾆｯﾄ2_異常
ANB B0540                ; ﾕﾆｯﾄ2_異常1BZ停止
LD B041                  ; ﾕﾆｯﾄ2_異常
ANB B0541                ; ﾕﾆｯﾄ2_異常2BZ停止
ORL
LD B042                  ; 受渡位置Case行方不明
ANB B0542                ; ﾕﾆｯﾄ2_異常3BZ停止
ORL
LD B043                  ; IV異常
ANB B0543                ; ﾕﾆｯﾄ2_異常4BZ停止
ORL
LD B044                  ; IV動作異常
ANB B0544                ; ﾕﾆｯﾄ2_異常5BZ停止
ORL
LD B045                  ; RAC1ｱﾗｰﾑ_異常
ANB B0545                ; ﾕﾆｯﾄ2_異常6BZ停止
ORL
LD B046                  ; RAC2ｱﾗｰﾑ_異常
ANB B0546                ; ﾕﾆｯﾄ2_異常6BZ停止
ORL
LD B047                  ; RAC3ｱﾗｰﾑ_異常
ANB B0547                ; ﾕﾆｯﾄ2_異常6BZ停止
ORL
OUT M2909                ; ﾕﾆｯﾄ2異常BZ補助
END
ENDH
