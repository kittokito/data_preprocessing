DEVICE:53
;MODULE:DATA
;MODULE_TYPE:0
;SCRIPT_TYPE:
;<h1/>SMA
;SMA411　Current position data　D31290　　Bonding X axis
;SMA421　Current position data　D31350　　Bonding Z axis
;SMA431　Current position data　D31410　　Case-Transfer Y1 axis
;SMA441　Current position data　D31470　　Case-Transfer Y2 axis
;塗布X軸
;Bonding X axis
LD<=.L D31290 +59300     ; 軸1 現在座標
OUT R3000                ; 塗布X　   Case1干渉外
LD>=.L D31290 +24000     ; 軸1 現在座標
OUT R3001                ; 塗布X　   Case2干渉外
LD>=.L D31290 +31500     ; 軸1 現在座標
AND<=.L D31290 +54000    ; 軸1 現在座標
OUT R3002                ; 塗布X　   捨て打ち領域
;塗布Z軸
;Bonding Z axis
LD<=.L D31350 +3000      ; 軸2 現在座標
OUT R3008                ; 塗布Z　   上空位置
LD>=.L D31350 +8000      ; 軸2 現在座標
OUT R3009                ; 塗布Z　   塗布高さ
LD<=.L D31350 +7000      ; 軸2 現在座標
OUT R3010                ; 塗布Z　   搬送Y干渉外高さ
;ｹｰｽ搬送Y1軸
;Case-Transfer Y1 axis
LD<=.L D31410 +19000     ; 軸3 現在座標
OUT R3100                ; Case搬送Y1投入領域
LD>=.L D31410 +14000     ; 軸3 現在座標
AND<=.L D31410 +37000    ; 軸3 現在座標
OUT R3101                ; Case搬送Y1塗布領域
LD>=.L D31410 +90000     ; 軸3 現在座標
OUT R3102                ; Case搬送Y1受渡領域
LD>=.L D31410 +81000     ; 軸3 現在座標
AND<=.L D31410 +84000    ; 軸3 現在座標
OUT R3103                ; Case搬送Y1嵌合領域
LD<=.L D31410 +5400      ; 軸3 現在座標
OUT R3104                ; Case搬送Y1減速領域
;ｹｰｽ搬送Y2軸
;Case-Transfer Y2 axis
LD<=.L D31470 +19000     ; 軸4 現在座標
OUT R3108                ; Case搬送Y2投入領域
LD>=.L D31470 +14000     ; 軸4 現在座標
AND<=.L D31470 +37000    ; 軸4 現在座標
OUT R3109                ; Case搬送Y2塗布領域
LD>=.L D31470 +90000     ; 軸4 現在座標
OUT R3110                ; Case搬送Y2受渡領域
LD>=.L D31470 +81000     ; 軸4 現在座標
AND<=.L D31470 +84000    ; 軸4 現在座標
OUT R3111                ; Case搬送Y2嵌合領域
LD<=.L D31470 +5400      ; 軸4 現在座標
OUT R3112                ; Case搬送Y2減速領域
;<h1/>RCA
;RCA1  Position Data  D32316　　Cover-Transfer Y axis
;RCA2  Position Data  D32325　　Assy X axis
;RCA3  Position Data  D32334　　Assy Z axis
;RCA4  Position Data  D32343　　Assy Chuck
;RCA5  Position Data  D32352　　Remove 1 Y axis
;RCA6  Position Data  D32361　　Remove 1 Z axis
;RCA7  Position Data  D32370　　Remove 1 Chuke
;RCA8  Position Data  D32379　　Remove 2 Y axis
;RCA9  Position Data  D32388　　Remove 2 Z axis
;RCA10 Position Data  D32397　　Remove 2 Chuck
LD CR2002                ; 常時ON
BMOV D32316 D120 K2      ; ID1 現在位置  RCA1_Position Data
BSWAP D120 K2            ; RCA1_Position Data
XCH D120 D121            ; RCA1_Position Data
LD CR2002                ; 常時ON
BMOV D32325 D122 K2      ; ID2 現在位置  RCA2_Position Data
BSWAP D122 K2            ; RCA2_Position Data
XCH D122 D123            ; RCA2_Position Data
LD CR2002                ; 常時ON
BMOV D32334 D124 K2      ; ID3 現在位置  RCA3_Position Data
BSWAP D124 K2            ; RCA3_Position Data
XCH D124 D125            ; RCA3_Position Data
LD CR2002                ; 常時ON
BMOV D32343 D126 K2      ; ID4 現在位置  RCA4_Position Data
BSWAP D126 K2            ; RCA4_Position Data
XCH D126 D127            ; RCA4_Position Data
LD CR2002                ; 常時ON
BMOV D32352 D128 K2      ; ID5 現在位置  RCA5_Position Data
BSWAP D128 K2            ; RCA5_Position Data
XCH D128 D129            ; RCA5_Position Data
LD CR2002                ; 常時ON
BMOV D32361 D130 K2      ; ID6 現在位置  RCA6_Position Data
BSWAP D130 K2            ; RCA6_Position Data
XCH D130 D131            ; RCA6_Position Data
LD CR2002                ; 常時ON
BMOV D32370 D132 K2      ; ID7 現在位置  RCA7_Position Data
BSWAP D132 K2            ; RCA7_Position Data
XCH D132 D133            ; RCA7_Position Data
LD CR2002                ; 常時ON
BMOV D32379 D134 K2      ; ID8 現在位置  RCA8_Position Data
BSWAP D134 K2            ; RCA8_Position Data
XCH D134 D135            ; RCA8_Position Data
LD CR2002                ; 常時ON
BMOV D32388 D136 K2      ; ID9 現在位置  RCA9_Position Data
BSWAP D136 K2            ; RCA9_Position Data
XCH D136 D137            ; RCA9_Position Data
LD CR2002                ; 常時ON
BMOV D32397 D138 K2      ; ID10 現在位置  RCA10_Position Data
BSWAP D138 K2            ; RCA10_Position Data
XCH D138 D139            ; RCA10_Position Data
;ｶﾊﾞｰ搬送Y軸
;Cover-Transfer Y axis
LD<=.L D120 +25000       ; RCA1_Position Data
OUT R3200                ; Cover搬送Y投入領域
LD>=.L D120 +44000       ; RCA1_Position Data
OUT R3201                ; Cover搬送Y受渡領域
LD CR2002                ; 常時ON
PMOV X1160 K0 D110 K0 K6 ; OUT0 ID1  RCA1_Position No.
;嵌合X軸
;Cover-Transfer X axis
LD<=.L D122 +24500       ; RCA2_Position Data
OR>=.L D122 +52000       ; RCA2_Position Data
OUT R3300                ; 嵌合X     ｶﾊﾞｰ搬送干渉外
LD<=.L D122 +48500       ; RCA2_Position Data
OUT R3301                ; 嵌合X     Case1干渉外
LD>=.L D122 +23000       ; RCA2_Position Data
OR<=.L D122 +2000        ; RCA2_Position Data
OUT R3302                ; 嵌合X     Case2干渉外
LD CR2002                ; 常時ON
PMOV X1170 K0 D111 K0 K6 ; OUT0 ID2  RCA2_Position No.
;嵌合Z軸
;Cover-Transfer Z axis
LD<=.L D124 +2500        ; RCA3_Position Data
OUT R3308                ; 嵌合Z     上空位置
LD>=.L D124 +6000        ; RCA3_Position Data
OUT R3309                ; 嵌合Z     嵌合領域
LD CR2002                ; 常時ON
PMOV X1180 K0 D112 K0 K6 ; OUT0 ID3  RCA3_Position No.
;嵌合ﾁｬｯｸ
;Cover-Transfer Chuck
LD>=.L D126 +2000        ; RCA4_Position Data
OUT R3400                ; 嵌合ﾁｬｯｸ  開
LD<=.L D126 +1000        ; RCA4_Position Data
OUT R3401                ; 嵌合ﾁｬｯｸ  閉
LD CR2002                ; 常時ON
PMOV X1190 K0 D113 K0 K6 ; OUT0 ID4  RCA4_Position No.
;除材1Y軸
;Remove-Transfer 1 Y axis
LD>=.L D128 +1000        ; RCA5_Position Data
OUT R3500                ; 除材1Y    取出干渉外
LD<=.L D128 +20000       ; RCA5_Position Data
OUT R3501                ; 除材1Y    除材干渉外
LD>=.L D128 +15000       ; RCA5_Position Data
OUT R3502                ; 除材1Y干渉外PCB搬送侵入可
LD CR2002                ; 常時ON
PMOV X1200 K0 D114 K0 K6 ; OUT0 ID5  RCA5_Position No.
;除材1Z軸
;Remove-Transfer 1 Z axis
LD<=.L D130 +12000       ; RCA6_Position Data
OUT R3508                ; 除材1Z    上空位置
LD>=.L D130 +3000        ; RCA6_Position Data
OUT R3509                ; 除材1Z    取出高さ
LD<=.L D130 +100         ; RCA6_Position Data
OUT R3510                ; 除材1Z    原点付近
LD CR2002                ; 常時ON
PMOV X1210 K0 D115 K0 K6 ; OUT0 ID6  RCA6_Position No.
;除材1ﾁｬｯｸ
;Remove-Transfer 1 Chuck
LD>=.L D132 +4000        ; RCA7_Position Data
OUT R3600                ; 除材1ﾁｬｯｸ 開
LD<.L D132 +4000         ; RCA7_Position Data
OUT R3601                ; 除材1ﾁｬｯｸ 閉
LD CR2002                ; 常時ON
PMOV X1220 K0 D116 K0 K6 ; OUT0 ID7  RCA7_Position No.
;除材2Y軸
;Remove-Transfer 2 Y axis
LD>=.L D134 +1000        ; RCA8_Position Data
OUT R3700                ; 除材2Y    取出干渉外
LD<=.L D134 +20000       ; RCA8_Position Data
OUT R3701                ; 除材2Y    除材干渉外
LD>=.L D134 +15000       ; RCA8_Position Data
OUT R3702                ; 除材2Y干渉外PCB搬送侵入可
LD CR2002                ; 常時ON
PMOV X1230 K0 D117 K0 K6 ; OUT0 ID8  RCA8_Position No.
;除材2Z軸
;Remove-Transfer 2 Z axis
LD<=.L D136 +12000       ; RCA9_Position Data
OUT R3708                ; 除材2Z    上空位置
LD>=.L D136 +3000        ; RCA9_Position Data
OUT R3709                ; 除材2Z    取出高さ
LD<=.L D136 +100         ; RCA9_Position Data
OUT R3710                ; 除材2Z    原点付近
LD CR2002                ; 常時ON
PMOV X1240 K0 D118 K0 K6 ; OUT0 ID9  RCA9_Position No.
;除材2ﾁｬｯｸ
;Remove-Transfer 2 Chuck
LD>=.L +138 +4000
OUT R3800                ; 除材2ﾁｬｯｸ 開
LD<.L D138 +4000         ; RCA10_Position Data
OUT R3801                ; 除材2ﾁｬｯｸ 閉
LD CR2002                ; 常時ON
PMOV X1250 K0 D119 K0 K6 ; OUT0 ID10  RCA10_Position No.
;<h1/>JIG ID No.
LD CR2002                ; 常時ON
PMOV X115 K0 D90 K0 K3   ; 投入1_ID1  Case1 Jig ID
PMOV X125 K0 D91 K0 K3   ; 投入2_ID1  PCB Jig ID
PMOV X135 K0 D92 K0 K3   ; 投入3_ID1  Case2 Jig ID
PMOV X1645 K0 D93 K0 K3  ; ﾈｼﾞ締め治具1 ID識別1  Screw Jig1 ID No.
PMOV X164D K0 D94 K0 K3  ; ﾈｼﾞ締め治具2 ID識別1  Screw2 Jig ID
;Daily check Flg check
LD CR2002                ; 常時ON
SEC CM700 D410           ; ｶﾚﾝﾀﾞﾀｲﾏ（年）  現在時刻secﾃﾞｰﾀ
CAL* D400 K360 D402      ; 日常点検記憶RESET間隔(hour)  日常点検記憶RESET間隔(sec)
MPS
LD M1422                 ; 結果判定依頼
AND M40                  ; Y1 Daily check OK
ANL
CAL+.D D410 D402 D408    ; 現在時刻secﾃﾞｰﾀ  日常点検記憶RESET間隔(sec)  Y1日常点検記憶RESET予定
MRD
LD M3422                 ; 結果判定依頼
AND M41                  ; Y2 Daily check OK
ANL
CAL+.D D410 D402 D414    ; 現在時刻secﾃﾞｰﾀ  日常点検記憶RESET間隔(sec)  Y2日常点検記憶RESET予定
MPP
LD M6420                 ; 作業者判断
AND M42                  ; RB Torque Daily check OK
ANL
CAL+.D D410 D402 D416    ; 現在時刻secﾃﾞｰﾀ  日常点検記憶RESET間隔(sec)  ﾄﾙｸ日常点検記憶RESET予定
;捨て打ち時間管理
LD CR2008                ; 運転開始時1ｽｷｬﾝON
ORP M65                  ; 即停止異常(緊急停止)
ORF M66                  ; 主幹異常(ｻｲｸﾙ停止)
FMOV K0 D422 K2          ; 捨て打ち実施予定時間(sec)
;数合わせﾓｰﾄﾞ時ﾜｰｸ投入管理
LD M38                   ; 数合ﾓｰﾄﾞ
MPS
LD M1950                 ; ﾗｲﾄｶｰﾃﾝ  遮光無し
AND T1300                ; 投入1_ﾜｰｸ有
AND T1301                ; 投入1_ﾜｰｸ浮き1
AND T1302                ; 投入1_ﾜｰｸ浮き2
ANL
OUT M244                 ; Y1Case投入準備完了
MRD
LD M3950                 ; ﾗｲﾄｶｰﾃﾝ  遮光無し
AND T1500                ; 投入3_ﾜｰｸ有無
AND T1501                ; 投入3_ﾜｰｸ浮き1
AND T1502                ; 投入3_ﾜｰｸ浮き2
ANL
OUT M245                 ; Y2CASE投入準備完了
MPP
LD M2950                 ; ﾗｲﾄｶｰﾃﾝ  遮光無し
AND T1400                ; 投入2_ﾜｰｸ有
AND T1401                ; 投入2_ﾜｰｸ浮き1
AND T1402                ; 投入2_ﾜｰｸ浮き2
ANL
OUT M246                 ; Y3 PCB投入準備完了
LD CR2002                ; 常時ON
CAL+ D1020 D3020 D160    ; Y1ﾊﾞｯﾌｧ数  Y2ﾊﾞｯﾌｧ数  Case投入数
CAL+ D2020 D5020 D162    ; Y3ﾊﾞｯﾌｧ数  PCB-Tﾊﾞｯﾌｧ数  PCB投入数
MPS
AND< D160 D162           ; Case投入数  PCB投入数
OUT M240                 ; 数合ﾓｰﾄﾞ: Case投入可
MRD
AND> D160 D162           ; Case投入数  PCB投入数
OUT M241                 ; 数合ﾓｰﾄﾞ: PCB投入可
MPP
LD= D160 D162            ; Case投入数  PCB投入数
AND M246                 ; Y3 PCB投入準備完了
ANL
MPS
AND M244                 ; Y1Case投入準備完了
OUT M242                 ; 数合ﾓｰﾄﾞ: Y1･Y3同時投入可
MPP
LD M245                  ; Y2CASE投入準備完了
ANB M242                 ; 数合ﾓｰﾄﾞ: Y1･Y3同時投入可
ANFB M242                ; 数合ﾓｰﾄﾞ: Y1･Y3同時投入可
ANL
OUT M243                 ; 数合ﾓｰﾄﾞ: Y2･Y3同時投入可
;圧力グラフ
;Pressure Graph
;'表示レンジ初期化
;D9900 = 0      '時間軸下限
;D9901 = 100    '時間軸上限
;D9902 = -800   '回転数下限
;D9903 = 800    '回転数上限
;D9904 = 25     'P1下限
;D9905 = 45     'P1上限
;D9906 = 75     'P2下限
;D9907 = 100    'P2上限
;D9940 = 0      '表示ﾃﾞｰﾀNo.
LD<> D12000 K160         ; 表示画面No.
ORP M4680                ; 測定開始
NCJ K1001
;'表示レンジ初期化
;
;D9900 = 0      '時間軸下限
;
LD CR2002                ; 常時ON
MOV K0 D9900             ; 時間X軸下限
;D9901 = 100    '時間軸上限
;
LD CR2002                ; 常時ON
MOV K100 D9901           ; 時間X軸上限
;D9902 = -800   '回転数下限
;
LD CR2002                ; 常時ON
MOV K64736 D9902         ; 回転数ｸﾞﾗﾌY軸下限
;D9903 = 800    '回転数上限
;
LD CR2002                ; 常時ON
MOV K800 D9903           ; 回転数ｸﾞﾗﾌY軸上限
;D9904 = 25     'P1下限
;
LD CR2002                ; 常時ON
MOV K25 D9904            ; P1ｸﾞﾗﾌY軸下限
;D9905 = 45     'P1上限
;
LD CR2002                ; 常時ON
MOV K45 D9905            ; P1ｸﾞﾗﾌY軸上限
;D9906 = 75     'P2下限
;
LD CR2002                ; 常時ON
MOV K75 D9906            ; P2ｸﾞﾗﾌY軸下限
;D9907 = 100    'P2上限
;
LD CR2002                ; 常時ON
MOV K100 D9907           ; P2ｸﾞﾗﾌY軸上限
;D9940 = 0      '表示ﾃﾞｰﾀNo.
LD CR2002                ; 常時ON
MOV K0 D9940             ; Read data No.
LABEL K1001
;
LD= D12000 K160          ; 表示画面No.
FLIK K10 K10 B2900       ; ｸﾞﾗﾌｻﾝﾌﾟﾘﾝｸﾞﾄﾘｶﾞ
LDP M4635                ; Dispense ON 
ORP M4401                ; UT4SUB1ｽﾃｯﾌﾟ開始
ORP M4421                ; Y1塗布動作開始
ORP M4451                ; Y2塗布動作開始
ORP M4701                ; Y1DC塗布動作開始
ORP M4751                ; Y2DC塗布動作開始
OUT M4680                ; 測定開始
LD M4680                 ; 測定開始
OR M4681                 ; 測定中
MPS
AND< D9999 K100          ; ｶｳﾝﾄ
OUT M4681                ; 測定中
MPP
ANP CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
MOV D9999 Z2             ; ｶｳﾝﾄ
INC D9999                ; ｶｳﾝﾄ
MOV D9999 D19000:Z2      ; ｶｳﾝﾄ  時間
PMOV Y204 K0 D19100:Z2 K0 K1;吐出ﾓｰﾀ_正転開始  吐出ﾓｰﾀ正転ﾌﾗｸﾞlog
PMOV Y205 K0 D19200:Z2 K0 K1;吐出ﾓｰﾀ_逆転開始  吐出ﾓｰﾀ逆転ﾌﾗｸﾞlog
MOV.L D310 D19300:Z2     ; 回転数  回転数log
MOV D302 D19400:Z2       ; 供給圧　　(0.0Ｍpa)  供給圧log
MOV D304 D19500:Z2       ; 吐出圧    (0.00Ｍpa)  吐出圧log
LDF M4681                ; 測定中
LD M4681                 ; 測定中
ANPB M4681               ; 測定中
AND M4680                ; 測定開始
ORL
BMOV D19000 D20000 K600  ; 時間  表示用データ領域
BMOV D20000 D20600 K9000 ; 表示用データ領域  保存ﾃﾞｰﾀ①
OUT M4682                ; 測定終了
MPS
DW K0 D9999              ; ｶｳﾝﾄ
CON
ZRES D19100 D19599       ; 吐出ﾓｰﾀ正転ﾌﾗｸﾞlog  吐出圧log
MPP
FMOV K100 D19000 K100    ; 時間
;'Time Axix
;@D0 = (D9901 - D9900) / 10
;D9931 = D9900 + @D0
;D9932 = D9931 + @D0
;D9933 = D9932 + @D0
;D9934 = D9933 + @D0
;D9935 = D9934 + @D0
;D9936 = D9935 + @D0
;D9937 = D9936 + @D0
;D9938 = D9937 + @D0
;D9939 = D9938 + @D0
;
;'P1 Y Axix
;@D1 = (D9905 - D9904) / 5
;D9916 = D9904 + @D1
;D9917 = D9916 + @D1
;D9918 = D9917 + @D1
;D9919 = D9918 + @D1
;
;'P2 Y Axix
;@D2 = (D9907 - D9906) / 5
;D9921 = D9906 + @D2
;D9922 = D9921 + @D2
;D9923 = D9922 + @D2
;D9924 = D9923 + @D2
LD= D12000 K160          ; 表示画面No.
NCJ K1002
;'Time Axix
;
;@D0 = (D9901 - D9900) / 10
;
LD CR2002                ; 常時ON
LDA D9900                ; 時間X軸下限
CON
EXT
CON
STA.L @VM0
CON
LDA D9901                ; 時間X軸上限
CON
EXT
CON
SUB.L @VM0
CON
EXT.L
CON
DIV.L +10
CON
STA @D0                  ; Time pitch
;D9931 = D9900 + @D0
;
LD CR2002                ; 常時ON
LDA @D0                  ; Time pitch
CON
EXT
CON
STA.L @VM2
CON
LDA D9900                ; 時間X軸下限
CON
EXT
CON
ADD.L @VM2
CON
STA D9931                ; 時間軸目盛り1
;D9932 = D9931 + @D0
;
LD CR2002                ; 常時ON
LDA @D0                  ; Time pitch
CON
EXT
CON
STA.L @VM4
CON
LDA D9931                ; 時間軸目盛り1
CON
EXT
CON
ADD.L @VM4
CON
STA D9932                ; 時間軸目盛り2
;D9933 = D9932 + @D0
;
LD CR2002                ; 常時ON
LDA @D0                  ; Time pitch
CON
EXT
CON
STA.L @VM6
CON
LDA D9932                ; 時間軸目盛り2
CON
EXT
CON
ADD.L @VM6
CON
STA D9933                ; 時間軸目盛り3
;D9934 = D9933 + @D0
;
LD CR2002                ; 常時ON
LDA @D0                  ; Time pitch
CON
EXT
CON
STA.L @VM8
CON
LDA D9933                ; 時間軸目盛り3
CON
EXT
CON
ADD.L @VM8
CON
STA D9934                ; 時間軸目盛り4
;D9935 = D9934 + @D0
;
LD CR2002                ; 常時ON
LDA @D0                  ; Time pitch
CON
EXT
CON
STA.L @VM10
CON
LDA D9934                ; 時間軸目盛り4
CON
EXT
CON
ADD.L @VM10
CON
STA D9935                ; 時間軸目盛り5
;D9936 = D9935 + @D0
;
LD CR2002                ; 常時ON
LDA @D0                  ; Time pitch
CON
EXT
CON
STA.L @VM12
CON
LDA D9935                ; 時間軸目盛り5
CON
EXT
CON
ADD.L @VM12
CON
STA D9936                ; 時間軸目盛り6
;D9937 = D9936 + @D0
;
LD CR2002                ; 常時ON
LDA @D0                  ; Time pitch
CON
EXT
CON
STA.L @VM14
CON
LDA D9936                ; 時間軸目盛り6
CON
EXT
CON
ADD.L @VM14
CON
STA D9937                ; 時間軸目盛り7
;D9938 = D9937 + @D0
;
LD CR2002                ; 常時ON
LDA @D0                  ; Time pitch
CON
EXT
CON
STA.L @VM16
CON
LDA D9937                ; 時間軸目盛り7
CON
EXT
CON
ADD.L @VM16
CON
STA D9938                ; 時間軸目盛り8
;D9939 = D9938 + @D0
;
LD CR2002                ; 常時ON
LDA @D0                  ; Time pitch
CON
EXT
CON
STA.L @VM18
CON
LDA D9938                ; 時間軸目盛り8
CON
EXT
CON
ADD.L @VM18
CON
STA D9939                ; 時間軸目盛り9
;'P1 Y Axix
;
;@D1 = (D9905 - D9904) / 5
;
LD CR2002                ; 常時ON
LDA D9904                ; P1ｸﾞﾗﾌY軸下限
CON
EXT
CON
STA.L @VM20
CON
LDA D9905                ; P1ｸﾞﾗﾌY軸上限
CON
EXT
CON
SUB.L @VM20
CON
EXT.L
CON
DIV.L +5
CON
STA @D1                  ; P1 pitch
;D9916 = D9904 + @D1
;
LD CR2002                ; 常時ON
LDA @D1                  ; P1 pitch
CON
EXT
CON
STA.L @VM22
CON
LDA D9904                ; P1ｸﾞﾗﾌY軸下限
CON
EXT
CON
ADD.L @VM22
CON
STA D9916                ; P1ｸﾞﾗﾌY軸目盛り1
;D9917 = D9916 + @D1
;
LD CR2002                ; 常時ON
LDA @D1                  ; P1 pitch
CON
EXT
CON
STA.L @VM24
CON
LDA D9916                ; P1ｸﾞﾗﾌY軸目盛り1
CON
EXT
CON
ADD.L @VM24
CON
STA D9917                ; P1ｸﾞﾗﾌY軸目盛り2
;D9918 = D9917 + @D1
;
LD CR2002                ; 常時ON
LDA @D1                  ; P1 pitch
CON
EXT
CON
STA.L @VM26
CON
LDA D9917                ; P1ｸﾞﾗﾌY軸目盛り2
CON
EXT
CON
ADD.L @VM26
CON
STA D9918                ; P1ｸﾞﾗﾌY軸目盛り3
;D9919 = D9918 + @D1
;
LD CR2002                ; 常時ON
LDA @D1                  ; P1 pitch
CON
EXT
CON
STA.L @VM28
CON
LDA D9918                ; P1ｸﾞﾗﾌY軸目盛り3
CON
EXT
CON
ADD.L @VM28
CON
STA D9919                ; P1ｸﾞﾗﾌY軸目盛り4
;'P2 Y Axix
;
;@D2 = (D9907 - D9906) / 5
;
LD CR2002                ; 常時ON
LDA D9906                ; P2ｸﾞﾗﾌY軸下限
CON
EXT
CON
STA.L @VM30
CON
LDA D9907                ; P2ｸﾞﾗﾌY軸上限
CON
EXT
CON
SUB.L @VM30
CON
EXT.L
CON
DIV.L +5
CON
STA @D2                  ; P2 pitch
;D9921 = D9906 + @D2
;
LD CR2002                ; 常時ON
LDA @D2                  ; P2 pitch
CON
EXT
CON
STA.L @VM32
CON
LDA D9906                ; P2ｸﾞﾗﾌY軸下限
CON
EXT
CON
ADD.L @VM32
CON
STA D9921                ; P2ｸﾞﾗﾌY軸目盛り1
;D9922 = D9921 + @D2
;
LD CR2002                ; 常時ON
LDA @D2                  ; P2 pitch
CON
EXT
CON
STA.L @VM34
CON
LDA D9921                ; P2ｸﾞﾗﾌY軸目盛り1
CON
EXT
CON
ADD.L @VM34
CON
STA D9922                ; P2ｸﾞﾗﾌY軸目盛り2
;D9923 = D9922 + @D2
;
LD CR2002                ; 常時ON
LDA @D2                  ; P2 pitch
CON
EXT
CON
STA.L @VM36
CON
LDA D9922                ; P2ｸﾞﾗﾌY軸目盛り2
CON
EXT
CON
ADD.L @VM36
CON
STA D9923                ; P2ｸﾞﾗﾌY軸目盛り3
;D9924 = D9923 + @D2
LD CR2002                ; 常時ON
LDA @D2                  ; P2 pitch
CON
EXT
CON
STA.L @VM38
CON
LDA D9923                ; P2ｸﾞﾗﾌY軸目盛り3
CON
EXT
CON
ADD.L @VM38
CON
STA D9924                ; P2ｸﾞﾗﾌY軸目盛り4
LABEL K1002
;
LD= D12000 K160          ; 表示画面No.
MPS
AND= D9940 K0            ; Read data No.
BMOV D19000 D20000 K600  ; 時間  表示用データ領域
MPP
AND<> D9940 K0           ; Read data No.
MPS
LDA D9940                ; Read data No.
CON
MUL K600
CON
STA Z8
MPP
BMOV D20000:Z8 D20000 K600;表示用データ領域  表示用データ領域
LD< D9940 K0             ; Read data No.
DW K0 D9940              ; Read data No.
LD> D9940 K15            ; Read data No.
DW K15 D9940             ; Read data No.
;ﾚｼﾋﾟ初期値ﾃﾞｰﾀｾｯﾄ　【DEBUG】
;E3032 = E3034     '投入位置ﾃﾞｰﾀを浮き1にコピー
;E4132 = E4134
;FOR D166 = 0 TO 6
;Z1 = D166
;BMOV(E2000,E5000:Z1,#3000)
;NEXT
;
LD M31                   ; 初期ﾃﾞｰﾀｾｯﾄ開始
NCJ K1000
;E3032 = E3034     '投入位置ﾃﾞｰﾀを浮き1にコピー
;
LD CR2002                ; 常時ON
MOV E3034 E3032          ; PCB搬送TP_P18_投入位置  PCB搬送TP_P17_浮き1検査位置
;E4132 = E4134
;
LD CR2002                ; 常時ON
MOV E4134 E4132          ; PCB搬送_TP_Pos18_Vel_Data  PCB搬送_TP_Pos17_Vel_Data
;FOR D166 = 0 TO 6
;
LD CR2002                ; 常時ON
MOV K0 D166
LABEL K2000
LD> D166 K6
CJ K2001
;Z1 = D166
;
LD CR2002                ; 常時ON
LDA D166
CON
EXT
CON
STA.L Z1
;BMOV(E2000,E5000:Z1,#3000)
;
LD CR2002                ; 常時ON
BMOV E2000 E5000:Z1 K3000; X_P61
;NEXT
;
LD CR2002                ; 常時ON
INC D166
LDB CR2009               ; 演算結果が負
CJ K2000
LABEL K2001
LABEL K1000
;
;ｻｲｸﾙﾀｲﾑ
LD M81                   ; 自動運転開始BZ
MPS
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
@INC D39                 ; ｻｲｸﾙﾀｲﾑ計測
MPP
LDP M7779                ; 除材1受渡完了
ORP M7067                ; 待機高さへ下降
ORP M8779                ; 除材2受渡完了
ORP M8067                ; 待機高さへ下降
ANL
MOV D39 D40              ; ｻｲｸﾙﾀｲﾑ計測  ｻｲｸﾙﾀｲﾑ
DW K0 D39                ; ｻｲｸﾙﾀｲﾑ計測
BMOV D40 D41 K10         ; ｻｲｸﾙﾀｲﾑ  Cycle time last 1
@INC D62
LDP M81                  ; 自動運転開始BZ
DW K0 D39                ; ｻｲｸﾙﾀｲﾑ計測
;D61 = ( D41+D42+D43+D44+D45+D46+D47+D48+D49+D50 )
;D62 = ( D51+D52+D53+D54+D55+D56+D57+D58+D59+D60 + D61 ) / 20
;D61 = D61 / 10
;D63 = ( D41+D42+D43+D44+D45 ) / 5
LD CR2002                ; 常時ON
NCJ K1003
;D61 = ( D41+D42+D43+D44+D45+D46+D47+D48+D49+D50 )
;
LD CR2002                ; 常時ON
LDA D42                  ; Cycle time last 2
CON
EXT
CON
STA.L @VM40
CON
LDA D41                  ; Cycle time last 1
CON
EXT
CON
ADD.L @VM40
CON
STA.L @VM42
CON
LDA D43                  ; Cycle time last 3
CON
EXT
CON
ADD.L @VM42
CON
STA.L @VM44
CON
LDA D44                  ; Cycle time last 4
CON
EXT
CON
ADD.L @VM44
CON
STA.L @VM46
CON
LDA D45                  ; Cycle time last 5
CON
EXT
CON
ADD.L @VM46
CON
STA.L @VM48
CON
LDA D46                  ; Cycle time last 6
CON
EXT
CON
ADD.L @VM48
CON
STA.L @VM50
CON
LDA D47                  ; Cycle time last 7
CON
EXT
CON
ADD.L @VM50
CON
STA.L @VM52
CON
LDA D48                  ; Cycle time last 8
CON
EXT
CON
ADD.L @VM52
CON
STA.L @VM54
CON
LDA D49                  ; Cycle time last 9
CON
EXT
CON
ADD.L @VM54
CON
STA.L @VM56
CON
LDA D50                  ; Cycle time last 10
CON
EXT
CON
ADD.L @VM56
CON
STA D61
;D62 = ( D51+D52+D53+D54+D55+D56+D57+D58+D59+D60 + D61 ) / 20
;
LD CR2002                ; 常時ON
LDA D52
CON
EXT
CON
STA.L @VM58
CON
LDA D51
CON
EXT
CON
ADD.L @VM58
CON
STA.L @VM60
CON
LDA D53
CON
EXT
CON
ADD.L @VM60
CON
STA.L @VM62
CON
LDA D54
CON
EXT
CON
ADD.L @VM62
CON
STA.L @VM64
CON
LDA D55
CON
EXT
CON
ADD.L @VM64
CON
STA.L @VM66
CON
LDA D56
CON
EXT
CON
ADD.L @VM66
CON
STA.L @VM68
CON
LDA D57
CON
EXT
CON
ADD.L @VM68
CON
STA.L @VM70
CON
LDA D58
CON
EXT
CON
ADD.L @VM70
CON
STA.L @VM72
CON
LDA D59
CON
EXT
CON
ADD.L @VM72
CON
STA.L @VM74
CON
LDA D60
CON
EXT
CON
ADD.L @VM74
CON
STA.L @VM76
CON
LDA D61
CON
EXT
CON
ADD.L @VM76
CON
EXT.L
CON
DIV.L +20
CON
STA D62
;D61 = D61 / 10
;
LD CR2002                ; 常時ON
LDA D61
CON
EXT
CON
EXT.L
CON
DIV.L +10
CON
STA D61
;D63 = ( D41+D42+D43+D44+D45 ) / 5
LD CR2002                ; 常時ON
LDA D42                  ; Cycle time last 2
CON
EXT
CON
STA.L @VM78
CON
LDA D41                  ; Cycle time last 1
CON
EXT
CON
ADD.L @VM78
CON
STA.L @VM80
CON
LDA D43                  ; Cycle time last 3
CON
EXT
CON
ADD.L @VM80
CON
STA.L @VM82
CON
LDA D44                  ; Cycle time last 4
CON
EXT
CON
ADD.L @VM82
CON
STA.L @VM84
CON
LDA D45                  ; Cycle time last 5
CON
EXT
CON
ADD.L @VM84
CON
EXT.L
CON
DIV.L +5
CON
STA D63
LABEL K1003
;
;ねじ締めRB　ｻｲｸﾙﾀｲﾑ
LD X1001                 ; ﾛﾎﾞｯﾄ運転中
MPS
AND CR2004               ; 10msｸﾛｯｸﾊﾟﾙｽ
@INC D6200               ; ねじ締めｻｲｸﾙﾀｲﾑ計測
MPP
AND= D6022 K1            ; Screwe RB  PLT No.
SET M6850                ; ﾈｼﾞ締めST記憶0
LDF X1001                ; ﾛﾎﾞｯﾄ運転中
BMOV D6200 D6201 K20     ; ねじ締めｻｲｸﾙﾀｲﾑ計測  ねじ締めｻｲｸﾙﾀｲﾑ 1
BSR M6850 K20 K1         ; ﾈｼﾞ締めST記憶0
LDB M6905                ; ﾕﾆｯﾄ6起動中
ORB X1001                ; ﾛﾎﾞｯﾄ運転中
ANB M302                 ; DEBUG　2
DW K0 D6200              ; ねじ締めｻｲｸﾙﾀｲﾑ計測
END
ENDH
