DEVICE:51
;MODULE:UNIT1_Coating
;MODULE_TYPE:0
;SCRIPT_TYPE:
LDP M65                  ; 即停止異常(緊急停止)
ZRES @M0 @M159
;
;UNIT1 Coating
;
;動作FLG
LDB T1005                ; M/Cｼｬｯﾀｰ閉じ検出
OR M1850                 ; ｼｬｯﾀ開確認
AND>= D1000 K20          ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
AND<= D1000 K49          ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
OUT M1850                ; ｼｬｯﾀ開確認
LD= E3420 K1             ; Ａ面のみ処理
OUT M1600                ; A面のみ処理
LDB M1603                ; B面加工
AND= E3421 K1            ; Ａ面マスク無し
LD M1603                 ; B面加工
AND= E3422 K1            ; Ｂ面マスク無し
ORL
OUT M1601                ; ﾏｽｸ無し
LDB M1906                ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝ実行中
AND= E60 K1              ; 加工面    (0:A 1:B)
OUT M1603                ; B面加工
LD CR2002                ; 常時ON
MPS
LDB M1603                ; B面加工
AND T1100                ; ﾜｰｸ検出1A
ANB T1101                ; ﾜｰｸ検出1B
LD M1603                 ; B面加工
ANB T1100                ; ﾜｰｸ検出1A
AND T1101                ; ﾜｰｸ検出1B
ORL
ANL
TMR K1120 K5             ; ﾜｰｸ1　有り
MRD
LDB T1100                ; ﾜｰｸ検出1A
ANB T1101                ; ﾜｰｸ検出1B
ANL
TMR K1121 K10            ; ﾜｰｸ1　無し
MRD
LDB M1603                ; B面加工
ANB T1100                ; ﾜｰｸ検出1A
AND T1101                ; ﾜｰｸ検出1B
LD M1603                 ; B面加工
AND T1100                ; ﾜｰｸ検出1A
ANB T1101                ; ﾜｰｸ検出1B
ORL
LD T1100                 ; ﾜｰｸ検出1A
AND T1101                ; ﾜｰｸ検出1B
ORL
ANL
TMR K1122 K5             ; ﾜｰｸ1　異常
MRD
LDB M1603                ; B面加工
AND T1102                ; ﾜｰｸ検出2A
ANB T1103                ; ﾜｰｸ検出2B
LD M1603                 ; B面加工
ANB T1102                ; ﾜｰｸ検出2A
AND T1103                ; ﾜｰｸ検出2B
ORL
ANL
TMR K1130 K5             ; ﾜｰｸ2　有り
MRD
LDB T1102                ; ﾜｰｸ検出2A
ANB T1103                ; ﾜｰｸ検出2B
ANL
TMR K1131 K10            ; ﾜｰｸ2　無し
MPP
LDB M1603                ; B面加工
ANB T1102                ; ﾜｰｸ検出2A
AND T1103                ; ﾜｰｸ検出2B
LD M1603                 ; B面加工
AND T1102                ; ﾜｰｸ検出2A
ANB T1103                ; ﾜｰｸ検出2B
ORL
LD T1102                 ; ﾜｰｸ検出2A
AND T1103                ; ﾜｰｸ検出2B
ORL
ANL
TMR K1132 K5             ; ﾜｰｸ2　異常
LD CR2002                ; 常時ON
MPS
LD T1120                 ; ﾜｰｸ1　有り
LDB M1601                ; ﾏｽｸ無し
AND T1104                ; 予備配線
LD M1601                 ; ﾏｽｸ無し
ANB T1104                ; 予備配線
ORL
ANL
ORB T1120                ; ﾜｰｸ1　有り
ANL
OUT M1604                ; ﾜｰｸ1ﾏｽｸOK
MPP
LD T1120                 ; ﾜｰｸ1　有り
AND M1601                ; ﾏｽｸ無し
AND T1104                ; 予備配線
ANL
OUT M1605                ; ﾜｰｸ1ﾏｽｸ検出（Error）
LD CR2002                ; 常時ON
MPS
LD T1130                 ; ﾜｰｸ2　有り
LDB M1601                ; ﾏｽｸ無し
AND T1105                ; 予備配線
LD M1601                 ; ﾏｽｸ無し
ANB T1105                ; 予備配線
ORL
ANL
ORB T1130                ; ﾜｰｸ2　有り
ANL
OUT M1606                ; ﾜｰｸ2ﾏｽｸOK
MPP
LD T1130                 ; ﾜｰｸ2　有り
AND M1601                ; ﾏｽｸ無し
AND T1105                ; 予備配線
ANL
OUT M1607                ; ﾜｰｸ2ﾏｽｸ検出（Error）
;■ロボット等機器入力受け
;ロボット、検査装置など状態、現在位置などをまとめる信号は一旦ここで受ける。
;Potting RB
LDB T1005                ; M/Cｼｬｯﾀｰ閉じ検出
AND<> D110 K15           ; RB　受付動作No.
AND<> D110 K0            ; RB　受付動作No.
AND X103                 ; RB OUT 3  BUSY
LDB CR2008               ; 運転開始時1ｽｷｬﾝON
ANB Y204                 ; RB IN 4  一時停止
ORL
ANB Y203                 ; RB IN 3  一時停止解除
ANB M65                  ; 即停止異常(緊急停止)
ANB M66                  ; 主幹異常(ｻｲｸﾙ停止)
ANB M29                  ; 仮ｼｬｯﾀｰｲﾝﾀｰﾛｯｸ解除
OUB Y204                 ; RB IN 4  一時停止
LDB Y204                 ; RB IN 4  一時停止
AND T1005                ; M/Cｼｬｯﾀｰ閉じ検出
OR Y203                  ; RB IN 3  一時停止解除
MPS
ANB T141                 ; 解除信号ON時間
OUT Y203                 ; RB IN 3  一時停止解除
MPP
TMH K141 K50             ; 解除信号ON時間
LDB Y204                 ; RB IN 4  一時停止
ANB T1005                ; M/Cｼｬｯﾀｰ閉じ検出
TMR K140 K30             ; RB一時停止超過
;<h1/>装置状態・動作条件
LDB X103                 ; RB OUT 3  BUSY
AND X105                 ; RB OUT 5  待機位置
AND X137                 ; 材料ﾌﾟｯｼｬ HEND
OUT M1900                ; ﾕﾆｯﾄ1原点
LDB B020                 ; ﾊﾟﾚｯﾄID異常
ANB B021                 ; RBｱﾗｰﾑ
ANB B022                 ; ﾕﾆｯﾄ1_異常3
ANB B023                 ; ﾕﾆｯﾄ1_異常4
ANB B024                 ; ﾕﾆｯﾄ1_異常5
ANB B025                 ; ﾕﾆｯﾄ1_異常6
ANB B026                 ; ﾕﾆｯﾄ1_異常7
INV
OUT M1901                ; ﾕﾆｯﾄ1全異常
LD M1900                 ; ﾕﾆｯﾄ1原点
ANB M1000                ; ﾕﾆｯﾄ1ｽﾃｯﾌﾟ開始
ANB X100                 ; RB OUT 0  ALM
AND X101                 ; RB OUT 1  RDY
AND X102                 ; RB OUT 2  EMG
AND X13A                 ; 材料ﾌﾟｯｼｬ EMGS
AND X13B                 ; 材料ﾌﾟｯｼｬ ALM
OUT M1902                ; ﾕﾆｯﾄ1起動条件
LDB M64                  ; 運転準備
OR M65                   ; 即停止異常(緊急停止)
OR M1901                 ; ﾕﾆｯﾄ1全異常
OR T15                   ; 強制停止
OUT M1903                ; ﾕﾆｯﾄ1起動OFF
LD M98                   ; 原点復帰開始
ANB M1904                ; ﾕﾆｯﾄ1原点復帰中
OR M1904                 ; ﾕﾆｯﾄ1原点復帰中
ANB M1903                ; ﾕﾆｯﾄ1起動OFF
ANB M1579                ; ﾕﾆｯﾄ1原点復帰完了確認
OUT M1904                ; ﾕﾆｯﾄ1原点復帰中
LD M83                   ; 各工程起動指令
AND M1902                ; ﾕﾆｯﾄ1起動条件
OR M1905                 ; ﾕﾆｯﾄ1起動中
ANB M1903                ; ﾕﾆｯﾄ1起動OFF
ANB M1399                ; ﾕﾆｯﾄ1動作完了
OUT M1905                ; ﾕﾆｯﾄ1起動中
;Pack処理
LD X108                  ; RB OUT 8  封止ｽﾗｲﾄﾞ切替要求
TMR @4 K2                ; 封止ｽﾗｲﾄﾞ交換要求中
LDB M1702                ; RB 動作中
OR @T4                   ; 封止ｽﾗｲﾄﾞ交換要求中
ANB M1706                ; RB 原点復帰中
OR X108                  ; RB OUT 8  封止ｽﾗｲﾄﾞ切替要求
ANB M1712                ; 材料ﾌﾟｯｼｬ 動作中
ANB M1716                ; 材料ﾌﾟｯｼｬ 原点復帰中
ANB Y20F                 ; RB IN 15 手動:吐出ﾊﾞﾙﾌﾞON
INV
OUT M1910                ; UNIT1 Pack
;□エラー発生　一時停止フラグ
LD CR2002                ; 常時ON
MPS
PMOV.D M1920 K0 D1100 K0 K20;Err320:ﾜｰｸ残  UT1ｴﾗｰ判別
MPP
LD<>.D D1100 K0          ; UT1ｴﾗｰ判別
OR M913                  ; ｼﾘﾝﾀﾞｴﾗｰ
ANL
OUT M1912                ; UNIT1 ｴﾗｰ
LDB M1901                ; ﾕﾆｯﾄ1全異常
ANB M160                 ; ALL PAUSE
ANB M1908                ; ﾕﾆｯﾄ1警報補助
ANB M1912                ; UNIT1 ｴﾗｰ
LDB M32                  ; 自動ﾓｰﾄﾞ
ANB M33                  ; 手動ﾓｰﾄﾞ
LD M32                   ; 自動ﾓｰﾄﾞ
AND M1905                ; ﾕﾆｯﾄ1起動中
ORL
LD M33                   ; 手動ﾓｰﾄﾞ
LD M1904                 ; ﾕﾆｯﾄ1原点復帰中
OR X108                  ; RB OUT 8  封止ｽﾗｲﾄﾞ切替要求
ANL
ORL
OR M2970                 ; 吐出量点検ﾓｰﾄﾞ起動(同粘度交換中)
OR M2971                 ; 吐出量点検ﾓｰﾄﾞ起動(異粘度交換中)
ANL
OUT M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
;RB interlock
LDB X100                 ; RB OUT 0  ALM
AND X101                 ; RB OUT 1  RDY
AND X102                 ; RB OUT 2  EMG
ANB X103                 ; RB OUT 3  BUSY
MPS
LD T1005                 ; M/Cｼｬｯﾀｰ閉じ検出
OR M29                   ; 仮ｼｬｯﾀｰｲﾝﾀｰﾛｯｸ解除
ANL
OUT M1959                ; RB原点復帰可能
MPP
LD X104                  ; RB OUT 4  原点復帰完了
AND X106                 ; RB OUT 6  動作開始待ち
ANL
MPS
OUT M1962                ; RB封止動作可能
MPP
LD M131                  ; 安全扉正常
OR M29                   ; 仮ｼｬｯﾀｰｲﾝﾀｰﾛｯｸ解除
ANB M1700                ; RB 動作完了
ANL
OUT M1960                ; RB動作可能
LDF M1905                ; ﾕﾆｯﾄ1起動中
AND M28                  ; 仮 NAT
ZRES M1955 M1960         ; 材料ﾌﾟｯｼｬ手動動作可能  RB動作可能
;<h1/>■自動回路 
;
;運転開始・ステッパ初期化・補助接点へ展開
LD CR2002                ; 常時ON
ZRES M1000 M1399         ; ﾕﾆｯﾄ1ｽﾃｯﾌﾟ開始  ﾕﾆｯﾄ1動作完了
LDB M1905                ; ﾕﾆｯﾄ1起動中
MOV K0 D1000             ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1905                 ; ﾕﾆｯﾄ1起動中
MOV D1000 Z3             ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
SET M1000:Z3             ; ﾕﾆｯﾄ1ｽﾃｯﾌﾟ開始
;自動運転ステップ開始
;運転開始時ﾊﾟﾚｯﾄIDﾁｪｯｸ
;Palette No. check when AUTO start.
LD M1000                 ; ﾕﾆｯﾄ1ｽﾃｯﾌﾟ開始
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
AND M300                 ; ﾊﾟﾚｯﾄID OK
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MPP
ANB M300                 ; ﾊﾟﾚｯﾄID OK
MPS
OUT M1963                ; Palette ID異常
MPP
AND M74                  ; ｷｬﾝｾﾙ不可 ｻｲｸﾙ停止
MOV K300 D1000           ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1001                 ; 運転開始時ﾜｰｸ残ﾁｪｯｸ
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
TMR K110 K5              ; ﾜｰｸ残検出ｳｪｲﾄ
CON
AND T110                 ; ﾜｰｸ残検出ｳｪｲﾄ
MPS
LDB T1100                ; ﾜｰｸ検出1A
ANB T1101                ; ﾜｰｸ検出1B
ANB T1102                ; ﾜｰｸ検出2A
ANB T1103                ; ﾜｰｸ検出2B
ANL
MOV K6 D1000             ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MPP
LD T1100                 ; ﾜｰｸ検出1A
OR T1101                 ; ﾜｰｸ検出1B
OR T1102                 ; ﾜｰｸ検出2A
OR T1103                 ; ﾜｰｸ検出2B
ANL
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;Err320:Work remain  (when START)
LD M1002                 ; ｴﾗｰ発生
ANB M71                  ; All Error PAUSE
DW K320 D148             ; 警報No.
CON
SET M1920                ; Err320:ﾜｰｸ残
CON
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1003                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1004                 ; ｴﾗｰ解除確認
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
MOV K1 D1000             ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;吐出量点検ﾓｰﾄﾞ？
;Dispense check mode?
LD M1006                 ; ﾓｰﾄﾞﾁｪｯｸ
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
ANB M44                  ; 吐出量点検
MOV K10 D1000            ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MPP
AND M44                  ; 吐出量点検
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;吐出量点検
;Dispense check
LD M1007                 ; 吐出量点検
MPS
OUT @M95                 ; 吐出量点検ﾓｰﾄﾞ起動
MPP
AND M1907                ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝ完了
MOV K300 D1000           ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;投入完了待ち
;waiting for Work set up end
LD M1010                 ; ﾜｰｸ投入待ち
MPS
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
AND T1005                ; M/Cｼｬｯﾀｰ閉じ検出
MPS
AND M300                 ; ﾊﾟﾚｯﾄID OK
MOV K20 D1000            ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MPP
ANB M300                 ; ﾊﾟﾚｯﾄID OK
TMR K190 K10             ; ﾊﾟﾚｯﾄID  不一致　  (AUTO)
MPP
LDB T1005                ; M/Cｼｬｯﾀｰ閉じ検出
AND M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
ANL
MOV K300 D1000           ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MPP
LDB M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
AND<> D110 K15           ; RB　受付動作No.
AND X105                 ; RB OUT 5  待機位置
ANL
MPS
ANB M1965                ; 状態変化有
TMR K151 K300            ; 状況変化後wait
MPP
LD<= D414 D400           ; ﾉｽﾞﾙ封止待機時刻(sec)  現在時刻secﾃﾞｰﾀ
AND T151                 ; 状況変化後wait
OR T14                   ; ｽﾀｰﾄ長押し
AND T1200                ; 封止ｶｯﾌﾟ検出
ANL
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD CR2002                ; 常時ON
MPS
PMOV X120 K0 D1082 K0 K2 ; 封止ｶｯﾌﾟ検出  封止ｶｯﾌﾟ周り状況
MPP
AND<> D1082 D1083        ; 封止ｶｯﾌﾟ周り状況  封止ｶｯﾌﾟ周り状況ﾒﾓﾘｰ
DIFU M1965               ; 状態変化有
MOV D1082 D1083          ; 封止ｶｯﾌﾟ周り状況  封止ｶｯﾌﾟ周り状況ﾒﾓﾘｰ
;ﾉｽﾞﾙ封止
;Nozzle sealing
LD M1011                 ; 時間切れ　ﾉｽﾞﾙ封止
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
AND M1962                ; RB封止動作可能
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1012                 ; RB　起動
MPS
OUT @M50                 ; ﾉｽﾞﾙ封止動作
MPP
AND M1700                ; RB 動作完了
MOV K10 D1000            ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;投入状況確認
;Board status check
LD M1020                 ; 状況確認
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
LD T1200                 ; 封止ｶｯﾌﾟ検出
AND T1201                ; 捨て打ちｶｯﾌﾟ検出
ANL
MPS
LDB T1122                ; ﾜｰｸ1　異常
ANB T1132                ; ﾜｰｸ2　異常
ANL
MPS
LD T1120                 ; ﾜｰｸ1　有り
OR T1130                 ; ﾜｰｸ2　有り
ANL
MOV K30 D1000            ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MPP
LD T1121                 ; ﾜｰｸ1　無し
AND T1131                ; ﾜｰｸ2　無し
ANL
MOV K22 D1000            ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MPP
LD T1122                 ; ﾜｰｸ1　異常
OR T1132                 ; ﾜｰｸ2　異常
ANL
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MRD
ANB T1200                ; 封止ｶｯﾌﾟ検出
MOV K23 D1000            ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MPP
ANB T1201                ; 捨て打ちｶｯﾌﾟ検出
MOV K24 D1000            ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;*** Err321:Board set error
LD M1021                 ; ｴﾗｰ発生
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
DW K321 D148             ; 警報No.
CON
SET M1921                ; Err321:ﾜｰｸｾｯﾄ異常
MPP
MOV K47 D1000            ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;*** Err322:No Board 
LD M1022                 ; ｴﾗｰ発生
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
DW K322 D148             ; 警報No.
CON
SET M1922                ; Err322:ﾜｰｸ無し
MPP
MOV K47 D1000            ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;*** Err336:No Toluen cup
LD M1023                 ; ｴﾗｰ発生
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
DW K336 D148             ; 警報No.
CON
SET M1936                ; Err336:封止ｶｯﾌﾟ未検出
MPP
MOV K47 D1000            ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;*** Err337:No Discharge cup
LD M1024                 ; ｴﾗｰ発生
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
DW K337 D148             ; 警報No.
CON
SET M1937                ; Err337:捨て打ちｶｯﾌﾟ未検出
MPP
MOV K47 D1000            ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;1側ﾏｽｸ確認
;Side 1 Mask check
LD M1030                 ; 1側ﾏｽｸ確認
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
ANB T1120                ; ﾜｰｸ1　有り
MOV K40 D1000            ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MPP
AND T1120                ; ﾜｰｸ1　有り
MPS
AND M1604                ; ﾜｰｸ1ﾏｽｸOK
MOV K40 D1000            ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MPP
ANB M1604                ; ﾜｰｸ1ﾏｽｸOK
MPS
ANB M1605                ; ﾜｰｸ1ﾏｽｸ検出（Error）
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MPP
AND M1605                ; ﾜｰｸ1ﾏｽｸ検出（Error）
MOV K32 D1000            ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;*** Err328:Board 1 No mask
LD M1031                 ; ｴﾗｰ発生
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
DW K328 D148             ; 警報No.
CON
SET M1928                ; Err328:ﾜｰｸ1ﾏｽｸ無し
MPP
MOV K47 D1000            ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;*** Err330:Board1 mask detect(Error)
LD M1032                 ; ｴﾗｰ発生
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
DW K330 D148             ; 警報No.
CON
SET M1930                ; Err330:ﾜｰｸ1ﾏｽｸ有り(Error)
MPP
MOV K47 D1000            ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;2側ﾏｽｸ確認
;Side 2 Mask check
LD M1040                 ; 2側ﾏｽｸ確認
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
ANB T1130                ; ﾜｰｸ2　有り
MOV K50 D1000            ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MPP
AND T1130                ; ﾜｰｸ2　有り
MPS
AND M1606                ; ﾜｰｸ2ﾏｽｸOK
MOV K50 D1000            ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MPP
ANB M1606                ; ﾜｰｸ2ﾏｽｸOK
MPS
ANB M1607                ; ﾜｰｸ2ﾏｽｸ検出（Error）
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MPP
AND M1607                ; ﾜｰｸ2ﾏｽｸ検出（Error）
MOV K42 D1000            ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;*** Err329:Board 2 No mask
LD M1041                 ; ｴﾗｰ発生
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
DW K329 D148             ; 警報No.
CON
SET M1929                ; Err329:ﾜｰｸ2ﾏｽｸ無し
MPP
MOV K47 D1000            ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;*** Err331:Board2 mask detect(Error)
LD M1042                 ; ｴﾗｰ発生
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
DW K331 D148             ; 警報No.
CON
SET M1931                ; Err331:ﾜｰｸ2ﾏｽｸ有り(Error)
MPP
MOV K47 D1000            ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;*** Error release check
LD M1047                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1048                 ; ｴﾗｰ解除確認
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
MOV K10 D1000            ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;*** ｼｬｯﾀｰ開待ち
;*** Waiting for shutter open
LD M1049                 ; ｼｬｯﾀ開確認
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
AND M1850                ; ｼｬｯﾀ開確認
MOV K10 D1000            ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;***
;ﾏｼﾝｼｬｯﾀｰ　ﾛｯｸ
;Shutter lock
LD M1050                 ; ｼｬｯﾀｰ閉確認
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
AND T1005                ; M/Cｼｬｯﾀｰ閉じ検出
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1051                 ; ｼｬｯﾀｰﾛｯｸ
MPS
AND T1005                ; M/Cｼｬｯﾀｰ閉じ検出
MPS
AND T1006                ; M/Cｼｬｯﾀｰﾛｯｸ 前進限
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MPP
OUT M1752                ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ
MPP
ANB T1005                ; M/Cｼｬｯﾀｰ閉じ検出
OUT M1783                ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ解除
;捨てだし確認
;Discharge check
LD M1052                 ; 捨てだし確認
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
LD<> D110 K15            ; RB　受付動作No.
AND<> D110 K0            ; RB　受付動作No.
ANL
MOV K70 D1000            ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MPP
LD= D110 K15             ; RB　受付動作No.
OR= D110 K0              ; RB　受付動作No.
ANL
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;封止捨て出し動作
;Sealing Discharge operation
LD M1053
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
AND M1960                ; RB動作可能
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1054                 ; RB起動
MPS
OUT @M45                 ; 捨出し位置移動
MPP
AND M1700                ; RB 動作完了
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1055                 ; 完了確認
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
ANB M1700                ; RB 動作完了
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1056                 ; 捨て出し吐出
OUT M1626                ; AUTO：封止吐出ON
CON
TMH K167 D1090           ; 捨出し吐出時間  封止時捨出し時間
CON
AND T167                 ; 捨出し吐出時間
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1057                 ; 吐出後wait
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
TMH K168 K20             ; 吐出後wait
CON
AND T168                 ; 吐出後wait
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1058                 ; 糸切動作
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
AND M1960                ; RB動作可能
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1059                 ; RB 起動
MPS
OUT @M60                 ; 糸切動作
MPP
AND M1700                ; RB 動作完了
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1060                 ; 糸切後ｳｪｲﾄ
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
TMH K173 K20             ; 糸切後ｗａｉｔ
CON
AND T173                 ; 糸切後ｗａｉｔ
MOV K80 D1000            ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;待機捨て出し動作
;Waiting Discharge operation
LD M1070                 ; 捨出し位置移動
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
AND M1960                ; RB動作可能
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1071                 ; RB起動
MPS
OUT @M57                 ; 捨出し位置移動
MPP
AND M1700                ; RB 動作完了
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1072                 ; 完了確認
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
ANB M1700                ; RB 動作完了
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1073                 ; 捨て出し吐出
OUT M1625                ; AUTO：待機吐出ON
CON
TMH K163 D1086           ; 捨出し吐出時間  待機時捨出し時間
CON
AND T163                 ; 捨出し吐出時間
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1074                 ; 吐出後wait
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
TMH K164 K20             ; 吐出後wait
CON
AND T164                 ; 吐出後wait
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1075                 ; 糸切動作
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
AND M1960                ; RB動作可能
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1076                 ; RB 起動
MPS
OUT @M59                 ; 糸切動作
MPP
AND M1700                ; RB 動作完了
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1077                 ; 糸切後ｳｪｲﾄ
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
TMH K166 K20             ; 糸切後ｗａｉｔ
CON
AND T166                 ; 糸切後ｗａｉｔ
MOV K80 D1000            ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;動作側　確認
;Operation side check
LD M1080                 ; 動作側確認
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
AND T1120                ; ﾜｰｸ1　有り
MOV K100 D1000           ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MPP
ANB T1120                ; ﾜｰｸ1　有り
MPS
AND T1130                ; ﾜｰｸ2　有り
MOV K200 D1000           ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MPP
ANB T1130                ; ﾜｰｸ2　有り
MOV K300 D1000           ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;<h1/>　　　1側塗布
;　　　Dispence for side 1
;ﾜｰｸ1 塗布動作
;Board 1 dispense operation
LD M1100                 ; 1側塗布動作
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
AND M1960                ; RB動作可能
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1101                 ; RB 起動
MPS
OUT @M40                 ; 1側塗布動作
MPP
AND M1700                ; RB 動作完了
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;2側塗布確認
;Side 2 dispence check
LD M1102                 ; 2側塗布確認
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
AND T1130                ; ﾜｰｸ2　有り
MOV K200 D1000           ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MPP
ANB T1130                ; ﾜｰｸ2　有り
MOV K270 D1000           ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;<h1/>　　　2側塗布
;　　　Dispence for side 2
;ﾜｰｸ2 塗布動作
;Board 2 dispense operation
LD M1200                 ; 2側塗布動作
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
AND M1960                ; RB動作可能
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1201                 ; RB 起動
MPS
OUT @M41                 ; 2側塗布動作
MPP
AND M1700                ; RB 動作完了
MOV K270 D1000           ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;<h1/>　　　終了動作
;　　　Finish routine
;ﾉｽﾞﾙ待機位置移動
;Nozzle immersion
LD M1270                 ; ﾉｽﾞﾙ待機位置
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
AND M1960                ; RB動作可能
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1271                 ; RB　起動
MPS
OUT @M42                 ; ﾉｽﾞﾙ待機位置
MPP
AND M1700                ; RB 動作完了
MPS
ANB M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
MOV K274 D1000           ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MPP
AND M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;定停止時ﾉｽﾞﾙ封止
;Nozzle sealing for stop
LD M1272                 ; ﾉｽﾞﾙ封止
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
AND M1962                ; RB封止動作可能
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1273                 ; RB起動
MPS
OUT @M54                 ; ﾉｽﾞﾙ封止動作
MPP
AND M1700                ; RB 動作完了
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;ﾏｼﾝｼｬｯﾀｰ　ﾛｯｸ解除
;Shutter Lock release
LD M1274                 ; ｼｬｯﾀｰﾛｯｸ解除
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
AND T1007                ; M/Cｼｬｯﾀｰﾛｯｸ 後退限
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MPP
OUT M1772                ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ解除
;ﾜｰｸ　除材確認
;Board remoce check
LD M1275                 ; ｼｬｯﾀｰ開待ち
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
ANB T1005                ; M/Cｼｬｯﾀｰ閉じ検出
MOV K280 D1000           ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MPP
LD T1005                 ; M/Cｼｬｯﾀｰ閉じ検出
AND M1962                ; RB封止動作可能
AND<> D110 K15           ; RB　受付動作No.
AND X105                 ; RB OUT 5  待機位置
ANB M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
LD<= D414 D400           ; ﾉｽﾞﾙ封止待機時刻(sec)  現在時刻secﾃﾞｰﾀ
OR T14                   ; ｽﾀｰﾄ長押し
OR M70                   ; 自動起動停止指令(ｻｲｸﾙ停止)
ANL
AND T1200                ; 封止ｶｯﾌﾟ検出
ANL
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;時間経過のﾉｽﾞﾙ封止
;Nozzle sealing by Sealing timeer
LD M1276                 ; RB起動
MPS
OUT @M55                 ; ﾉｽﾞﾙ封止動作
MPP
AND M1700                ; RB 動作完了
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1277                 ; ｼｬｯﾀｰ開待ち2
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
ANB T1005                ; M/Cｼｬｯﾀｰ閉じ検出
MOV K280 D1000           ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;ﾜｰｸ除材確認
;Board remove check
LD>= D1000 K275          ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
AND< D1000 K300          ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MPS
LDB T1100                ; ﾜｰｸ検出1A
ANB T1101                ; ﾜｰｸ検出1B
OR @M1                   ; 1側除材確認
ANL
OUT @M1                  ; 1側除材確認
MPP
LDB T1102                ; ﾜｰｸ検出2A
ANB T1103                ; ﾜｰｸ検出2B
OR @M2                   ; 2側除材確認
ANL
OUT @M2                  ; 2側除材確認
LD M1280                 ; ﾜｰｸ除材待ち
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
LD @M1                   ; 1側除材確認
AND @M2                  ; 2側除材確認
ANL
MOV K300 D1000           ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MRD
LDB @M1                  ; 1側除材確認
ORB @M2                  ; 2側除材確認
AND M1962                ; RB封止動作可能
AND<> D110 K15           ; RB　受付動作No.
AND X105                 ; RB OUT 5  待機位置
LD<= D414 D400           ; ﾉｽﾞﾙ封止待機時刻(sec)  現在時刻secﾃﾞｰﾀ
OR T14                   ; ｽﾀｰﾄ長押し
OR M70                   ; 自動起動停止指令(ｻｲｸﾙ停止)
ANL
AND T1200                ; 封止ｶｯﾌﾟ検出
ANL
MOV K285 D1000           ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MPP
AND T1005                ; M/Cｼｬｯﾀｰ閉じ検出
MPS
ANB @M1                  ; 1側除材確認
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MPP
ANB @M2                  ; 2側除材確認
MOV K282 D1000           ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD>= D1000 K275          ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
AND<= D1000 K289         ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
TMR K121 K300            ; ﾜｰｸ取り出し催促
;*** Err323/324:Remove Board 
LD M1281                 ; ｴﾗｰ発生
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
DW K323 D148             ; 警報No.
CON
SET M1923                ; Err323:1側ﾜｰｸ未除材
MPP
MOV K283 D1000           ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1282                 ; ｴﾗｰ発生
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
DW K324 D148             ; 警報No.
CON
SET M1924                ; Err324:2側ﾜｰｸ未除材
CON
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1283                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1284                 ; ｴﾗｰ解除確認
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
MOV K280 D1000           ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;時間経過のﾉｽﾞﾙ封止
;Nozzle sealing by Sealing timeer
LD M1285                 ; RB起動
MPS
OUT @M56                 ; ﾉｽﾞﾙ封止動作
MPP
AND M1700                ; RB 動作完了
MOV K280 D1000           ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;ｶｰﾄﾘｯｼﾞ残量ﾁｪｯｸ
;Silicon remain check
LD M1300
MPS
LD X135                  ; 材料ﾌﾟｯｼｬ ZONE2(残量警報)
OR M25                   ; 吐出無し
ANL
MOV K380 D1000           ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MPP
LDB X135                 ; 材料ﾌﾟｯｼｬ ZONE2(残量警報)
ANB M25                  ; 吐出無し
ANL
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;交換前ﾉｽﾞﾙ封止
;Nozzle sealing defore Cartridge cange
LD M1301                 ; ﾉｽﾞﾙ封止動作
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
AND M1962                ; RB封止動作可能
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1302                 ; RB 起動
MPS
OUT @M63                 ; ﾉｽﾞﾙ封止動作
MPP
AND M1700                ; RB 動作完了
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;*** ERR.341 Cartridge channge request
LD M1303                 ; ｴﾗｰ発生
ANB M71                  ; All Error PAUSE
DW K341 D148             ; 警報No.
CON
SET M2921                ; Err341:ｶｰﾄﾘｯｼﾞ交換要求
CON
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1304                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1305                 ; ｴﾗｰ解除確認
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;ｶｰﾄﾘｯｼﾞ交換
;Cartridge change
LD M1306                 ; ｶｰﾄﾘｯｼﾞ交換
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
SET M2700                ; ｶｰﾄﾘｯｼﾞ交換　開始
CON
ANB M2701                ; 加圧開始
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1307                 ; 自動運転中ｶｰﾄﾘｯｼﾞ交換完了待ち
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
ANB M2700                ; ｶｰﾄﾘｯｼﾞ交換　開始
LD M2701                 ; 加圧開始
LDB M2701                ; 加圧開始
AND M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
ORL
ANL
MOV K380 D1000           ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;サイクル停止条件
;Cycle end check
LD M1380                 ; 1ｻｲｸﾙ終了
MPS
ANB M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
DW K10 D1000             ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MPP
AND M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
MOV K390 D1000           ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;ﾉｽﾞﾙ封止動作
;Nozzle sealing operation
LD M1390                 ; ﾉｽﾞﾙ封止動作
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
AND M44                  ; 吐出量点検
MOV K397 D1000           ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MPP
LDB M44                  ; 吐出量点検
AND M1962                ; RB封止動作可能
ANL
@INC D1000               ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1391                 ; RB 起動
MPS
OUT @M51                 ; ﾉｽﾞﾙ封止動作
MPP
AND M1700                ; RB 動作完了
MOV K397 D1000           ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1397                 ; ｻｲｸﾙ終了
@MOV K398 D1000          ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;終了
;Unit AUTO cycle end
LD M1398                 ; ﾕﾆｯﾄ1ｻｲｸﾙ停止
MPS
LD M70                   ; 自動起動停止指令(ｻｲｸﾙ停止)
AND M72                  ; 全ﾕﾆｯﾄ停止確認
ANL
@MOV K399 D1000          ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MPP
ANB M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
DW K10 D1000             ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;<h1/>■原点復帰回路
;
;運転開始・ステッパ初期化・補助接点へ展開
LD CR2002                ; 常時ON
ZRES M1500 M1599         ; ﾕﾆｯﾄ1原点復帰開始
LDB M1904                ; ﾕﾆｯﾄ1原点復帰中
MOV K0 D1010             ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
LD M1904                 ; ﾕﾆｯﾄ1原点復帰中
MOV D1010 Z1             ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
SET M1500:Z1             ; ﾕﾆｯﾄ1原点復帰開始
;原点復帰ステップ開始
;Origin start
;Shutter lock
LD M1500                 ; ﾕﾆｯﾄ1原点復帰開始
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
AND T1005                ; M/Cｼｬｯﾀｰ閉じ検出
@INC D1010               ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
LD M1501                 ; ｼｬｯﾀｰﾛｯｸ
MPS
AND T1005                ; M/Cｼｬｯﾀｰ閉じ検出
MPS
AND T1006                ; M/Cｼｬｯﾀｰﾛｯｸ 前進限
@INC D1010               ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
MPP
OUT M1753                ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ
MPP
ANB T1005                ; M/Cｼｬｯﾀｰ閉じ検出
OUT M1782                ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ解除
;RB　HOME
LD M1502                 ; RB　HOME
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
AND M1959                ; RB原点復帰可能
@INC D1010               ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
LD M1503                 ; RB原点復帰中
MPS
OUT @M90                 ; RB原点復帰動作
MPP
AND M1704                ; RB 原点復帰完了
@INC D1010               ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
;ﾉｽﾞﾙ封止位置移動
;Nozzle sealing position move
LD M1504                 ; 封止位置移動
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
AND M1962                ; RB封止動作可能
@INC D1010               ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
LD M1505                 ; RB起動
MPS
OUT @M52                 ; ﾉｽﾞﾙ封止動作
MPP
AND M1700                ; RB 動作完了
@INC D1010               ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
;Shutter lock　release
LD M1506                 ; ｼｬｯﾀｰﾛｯｸ解除
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
AND T1005                ; M/Cｼｬｯﾀｰ閉じ検出
MPS
AND T1007                ; M/Cｼｬｯﾀｰﾛｯｸ 後退限
MOV K10 D1010            ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
MPP
OUT M1773                ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ解除
;Board remain check
LD M1510                 ; ﾜｰｸ残確認
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
LDB T1100                ; ﾜｰｸ検出1A
ANB T1101                ; ﾜｰｸ検出1B
ANB T1102                ; ﾜｰｸ検出2A
ANB T1103                ; ﾜｰｸ検出2B
ANL
MOV K70 D1010            ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
MPP
LD T1100                 ; ﾜｰｸ検出1A
OR T1101                 ; ﾜｰｸ検出1B
OR T1102                 ; ﾜｰｸ検出2A
OR T1103                 ; ﾜｰｸ検出2B
ANL
@INC D1010               ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
;***　ﾜｰｸ有り時処理
;Work remain
LD M1511                 ; ｴﾗｰ発生
ANB M71                  ; All Error PAUSE
DW K320 D148             ; 警報No.
CON
SET M1920                ; Err320:ﾜｰｸ残
CON
@INC D1010               ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
LD M1512                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
@INC D1010               ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
LD M1513                 ; ｴﾗｰ解除確認
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
MOV K10 D1010            ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
;***
;原点復帰終了
LD M1570                 ; 原点復帰動作完了
AND M1900                ; ﾕﾆｯﾄ1原点
OUT M1578                ; ﾕﾆｯﾄ1原点復帰完了
LD M1578                 ; ﾕﾆｯﾄ1原点復帰完了
ANB M98                  ; 原点復帰開始
@MOV K79 D1010           ; ﾕﾆｯﾄ1原点復帰ｽﾃｯﾌﾟ
;<h1/>■サブルーチン
;<h1/>　　　吐出量確認ﾓｰﾄﾞ
;　　　Dispense check mode
;運転開始・ステッパ初期化・補助接点へ展開
LD CR2002                ; 常時ON
ZRES M1400 M1499         ; 吐出点検開始
LDB @M95                 ; 吐出量点検ﾓｰﾄﾞ起動
ANB M2970                ; 吐出量点検ﾓｰﾄﾞ起動(同粘度交換中)
ANB M2971                ; 吐出量点検ﾓｰﾄﾞ起動(異粘度交換中)
INV
OUT M1906                ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝ実行中
LDB M1906                ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝ実行中
MOV K0 D1002             ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
LD M1906                 ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝ実行中
MOV D1002 Z1             ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
SET M1400:Z1             ; 吐出点検開始
;日常点検ステップ開始
;Daily check start
LD M1400                 ; 吐出点検開始
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
TMR K111 K5              ; ﾜｰｸ残確認ｳｪｲﾄ
CON
AND T111                 ; ﾜｰｸ残確認ｳｪｲﾄ
MPS
LDB T1100                ; ﾜｰｸ検出1A
ANB T1101                ; ﾜｰｸ検出1B
ANB T1102                ; ﾜｰｸ検出2A
ANB T1103                ; ﾜｰｸ検出2B
ANL
MOV K10 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
MPP
LD T1100                 ; ﾜｰｸ検出1A
OR T1101                 ; ﾜｰｸ検出1B
OR T1102                 ; ﾜｰｸ検出2A
OR T1103                 ; ﾜｰｸ検出2B
ANL
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
;Err320:Work remain  (when START)
LD M1401                 ; ｴﾗｰ発生
ANB M71                  ; All Error PAUSE
DW K320 D148             ; 警報No.
CON
SET M1920                ; Err320:ﾜｰｸ残
CON
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
LD M1402                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
LD M1403                 ; ｴﾗｰ解除確認
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
MOV K0 D1002             ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
;*** ｼｬｯﾀｰ閉待ち
;*** Waiting for shutter close
LD M1410                 ; ｼｬｯﾀｰ閉待ち
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
AND T1005                ; M/Cｼｬｯﾀｰ閉じ検出
MPS
AND M300                 ; ﾊﾟﾚｯﾄID OK
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
MPP
ANB M300                 ; ﾊﾟﾚｯﾄID OK
TMR K191 K10             ; ﾊﾟﾚｯﾄID  不一致　  (幅点検)
MRD
LDB T1005                ; M/Cｼｬｯﾀｰ閉じ検出
AND M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
ANL
MOV K80 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
MPP
OUT M1784                ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ解除
;投入状況確認
;Jig status check
LD M1411                 ; 治具装着状況確認
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
LD T1200                 ; 封止ｶｯﾌﾟ検出
AND T1201                ; 捨て打ちｶｯﾌﾟ検出
ANL
MOV K20 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
MRD
ANB T1200                ; 封止ｶｯﾌﾟ検出
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
MPP
ANB T1201                ; 捨て打ちｶｯﾌﾟ検出
MOV K13 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
;*** Err336:No Sealing cup
LD M1412                 ; ｴﾗｰ発生
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
DW K336 D148             ; 警報No.
CON
SET M1936                ; Err336:封止ｶｯﾌﾟ未検出
MPP
MOV K13 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
;*** Err337:No Discharge cup
LD M1413                 ; ｴﾗｰ発生
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
DW K337 D148             ; 警報No.
CON
SET M1937                ; Err337:捨て打ちｶｯﾌﾟ未検出
CON
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
;*** Error release check
LD M1414                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
LD M1415                 ; ｴﾗｰ解除確認
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
;*** ｼｬｯﾀｰ開待ち
;*** Waiting for shutter open
LD M1416                 ; ｼｬｯﾀ開待ち
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
AND T1020                ; M/Cｼｬｯﾀｰ開き検出
MOV K10 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
;***
;ﾏｼﾝｼｬｯﾀｰ　ﾛｯｸ
;Shutter lock
LD M1420                 ; ｼｬｯﾀｰﾛｯｸ
MPS
AND T1005                ; M/Cｼｬｯﾀｰ閉じ検出
MPS
AND T1006                ; M/Cｼｬｯﾀｰﾛｯｸ 前進限
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
MPP
OUT M1754                ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ
MPP
ANB T1005                ; M/Cｼｬｯﾀｰ閉じ検出
MOV K10 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
;捨て出し位置移動
;Move to Discharge position
LD M1421                 ; 捨て出し動作
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
AND M1960                ; RB動作可能
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
LD M1422                 ; RB起動
MPS
OUT @M46                 ; 捨て出し位置移動
MPP
AND M1700                ; RB 動作完了
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
;捨て出しﾓｰﾄﾞ確認
;Discharge mode check
LD M1423                 ; 捨出しﾓｰﾄﾞ確認
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
LDB M2970                ; 吐出量点検ﾓｰﾄﾞ起動(同粘度交換中)
ANB M2971                ; 吐出量点検ﾓｰﾄﾞ起動(異粘度交換中)
OR M1808                 ; 計量再試行
ANL
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
MPP
ANB M1808                ; 計量再試行
MPS
AND M2970                ; 吐出量点検ﾓｰﾄﾞ起動(同粘度交換中)
MOV K30 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
MPP
AND M2971                ; 吐出量点検ﾓｰﾄﾞ起動(異粘度交換中)
MOV K35 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
;★ 日常点検
;★ case Dailycheck
;D1161 = (T165.D * 100) / D1088.D + 1       '捨出し残量％表示用
;D1162 = T165.D / 6000                      '捨出し残時間表示用
LD M1424                 ; 計量前捨て出し
OUT M1631                ; 吐出ﾊﾞﾙﾌﾞON(計量前捨打用1)
TMH K165 D1088           ; 計量前吐出時間(sec)  計量前吐出時間(sec)
MPS
LDB M160                 ; ALL PAUSE
AND T165                 ; 計量前吐出時間(sec)
ANL
MOV K40 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
MRD
AND M160                 ; ALL PAUSE
MOV K23 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
MPP
NCJ K1001
;D1161 = (T165.D * 100) / D1088.D + 1       '捨出し残量％表示用
;
LD CR2002                ; 常時ON
LDA.L T165               ; 計量前吐出時間(sec)
CON
MUL.L +100
CON
DIV.L D1088              ; 計量前吐出時間(sec)
CON
ADD.L +1
CON
STA D1161                ; 残り捨出し%
;D1162 = T165.D / 6000                      '捨出し残時間表示用
LD CR2002                ; 常時ON
LDA.L T165               ; 計量前吐出時間(sec)
CON
EXT.L
CON
DIV.L +6000
CON
STA D1162                ; 残り捨出し時間
LABEL K1001
;
;★★ 同粘度捨て出し
;★★ Same viscosity discharge
LD M1430                 ; 捨出し準備
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
CAL+ D130 D163 D1154     ; 材料ﾌﾟｯｼｬーﾋﾟｯﾁ送り回数  同粘度予想捨出しｶｳﾝﾄ数  計測前吐出終了ｶｳﾝﾄ数
;IF D1154 >= D130 THEN
;  D1161 = 100 * (D1154 - D130) / D163                   '捨出し残量％表示用
;  D1162 =1 +  (D1154 - D130) * (E1004.D + 20) / 6000    '捨出し残時間表示用
;ELSE
;  D1161 = 0
;  D1162 = 0
;END IF
;
LD M1431                 ; 捨出し
OUT M1632                ; 吐出ﾊﾞﾙﾌﾞON(計量前捨打用2)
MPS
AND>= D130 D1154         ; 材料ﾌﾟｯｼｬーﾋﾟｯﾁ送り回数  計測前吐出終了ｶｳﾝﾄ数
MOV K40 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
MRD
LD< D130 D1154           ; 材料ﾌﾟｯｼｬーﾋﾟｯﾁ送り回数  計測前吐出終了ｶｳﾝﾄ数
AND M160                 ; ALL PAUSE
ANL
MOV K30 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
MPP
NCJ K1000
;IF D1154 >= D130 THEN
;
LD>= D1154 D130          ; 計測前吐出終了ｶｳﾝﾄ数  材料ﾌﾟｯｼｬーﾋﾟｯﾁ送り回数
NCJ K2000
;  D1161 = 100 * (D1154 - D130) / D163                   '捨出し残量％表示用
;
LD CR2002                ; 常時ON
LDA D163                 ; 同粘度予想捨出しｶｳﾝﾄ数
CON
EXT
CON
STA.L @VM0
CON
LDA D130                 ; 材料ﾌﾟｯｼｬーﾋﾟｯﾁ送り回数
CON
EXT
CON
STA.L @VM2
CON
LDA D1154                ; 計測前吐出終了ｶｳﾝﾄ数
CON
EXT
CON
SUB.L @VM2
CON
MUL.L +100
CON
DIV.L @VM0
CON
STA D1161                ; 残り捨出し%
;  D1162 =1 +  (D1154 - D130) * (E1004.D + 20) / 6000    '捨出し残時間表示用
;
LD CR2002                ; 常時ON
LDA.L E1004              ; 加圧ｻｲｸﾙ時間(s)
CON
ADD.L +20
CON
STA.L @VM4
CON
LDA D130                 ; 材料ﾌﾟｯｼｬーﾋﾟｯﾁ送り回数
CON
EXT
CON
STA.L @VM6
CON
LDA D1154                ; 計測前吐出終了ｶｳﾝﾄ数
CON
EXT
CON
SUB.L @VM6
CON
MUL.L @VM4
CON
DIV.L +6000
CON
ADD.L +1
CON
STA D1162                ; 残り捨出し時間
;ELSE
;
LD CR2002                ; 常時ON
CJ K2001
LABEL K2000
;  D1161 = 0
;
LD CR2002                ; 常時ON
MOV K0 D1161             ; 残り捨出し%
;  D1162 = 0
;
LD CR2002                ; 常時ON
MOV K0 D1162             ; 残り捨出し時間
;END IF
;
LABEL K2001
LABEL K1000
;
;★★★ 異粘度捨て出し
;★★★ Diffirence viscosity discharge
LD M1435                 ; 捨出し準備
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
CAL+ D130 D164 D1154     ; 材料ﾌﾟｯｼｬーﾋﾟｯﾁ送り回数  異粘度予想捨出しｶｳﾝﾄ数  計測前吐出終了ｶｳﾝﾄ数
;IF D1154 >= D130 THEN
;  D1161 = 100 * (D1154 - D130) / D164                   '捨出し残量％表示用
;  D1162 = 1 + (D1154 - D130) * (E1004.D + 20) / 6000    '捨出し残時間表示用
;ELSE
;  D1161 = 0
;  D1162 = 0
;END IF
;
LD M1436                 ; 捨出し
OUT M1633                ; 吐出ﾊﾞﾙﾌﾞON(計量前捨打用3)
MPS
ANB X13D                 ; 材料ﾌﾟｯｼｬ ZONE1(異粘度捨出域)
MOV K40 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
MRD
LD X13D                  ; 材料ﾌﾟｯｼｬ ZONE1(異粘度捨出域)
AND M160                 ; ALL PAUSE
ANL
MOV K35 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
MPP
NCJ K1003
;IF D1154 >= D130 THEN
;
LD>= D1154 D130          ; 計測前吐出終了ｶｳﾝﾄ数  材料ﾌﾟｯｼｬーﾋﾟｯﾁ送り回数
NCJ K2002
;  D1161 = 100 * (D1154 - D130) / D164                   '捨出し残量％表示用
;
LD CR2002                ; 常時ON
LDA D164                 ; 異粘度予想捨出しｶｳﾝﾄ数
CON
EXT
CON
STA.L @VM8
CON
LDA D130                 ; 材料ﾌﾟｯｼｬーﾋﾟｯﾁ送り回数
CON
EXT
CON
STA.L @VM10
CON
LDA D1154                ; 計測前吐出終了ｶｳﾝﾄ数
CON
EXT
CON
SUB.L @VM10
CON
MUL.L +100
CON
DIV.L @VM8
CON
STA D1161                ; 残り捨出し%
;  D1162 = 1 + (D1154 - D130) * (E1004.D + 20) / 6000    '捨出し残時間表示用
;
LD CR2002                ; 常時ON
LDA.L E1004              ; 加圧ｻｲｸﾙ時間(s)
CON
ADD.L +20
CON
STA.L @VM12
CON
LDA D130                 ; 材料ﾌﾟｯｼｬーﾋﾟｯﾁ送り回数
CON
EXT
CON
STA.L @VM14
CON
LDA D1154                ; 計測前吐出終了ｶｳﾝﾄ数
CON
EXT
CON
SUB.L @VM14
CON
MUL.L @VM12
CON
DIV.L +6000
CON
ADD.L +1
CON
STA D1162                ; 残り捨出し時間
;ELSE
;
LD CR2002                ; 常時ON
CJ K2003
LABEL K2002
;  D1161 = 0
;
LD CR2002                ; 常時ON
MOV K0 D1161             ; 残り捨出し%
;  D1162 = 0
;
LD CR2002                ; 常時ON
MOV K0 D1162             ; 残り捨出し時間
;END IF
;
LABEL K2003
LABEL K1003
;
;☆　☆☆　☆☆☆　
LD M1440                 ; RB起動
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
TMH K171 K20             ; 吐出後ｳｪｲﾄ
CON
AND T171                 ; 吐出後ｳｪｲﾄ
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
;Rev12  圧力比較をD00124（制御目標圧））からD00134（下限値設定）に変更
LDP M1440                ; RB起動
OR M1807                 ; 圧安定化中
ANB T181                 ; 圧安定化
MPS
OUT M1807                ; 圧安定化中
MPP
AND>= D12201 D134        ; ｼﾘｺﾝ圧力ﾃﾞｰﾀ  ｼﾘｺﾝ圧下限値【0.00MPa】
TMR K181 K100            ; 圧安定化
LD M1441                 ; RB　糸切動作
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
AND M1960                ; RB動作可能
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
LD M1442                 ; RB 起動
MPS
OUT @M53                 ; 糸切動作
MPP
AND M1700                ; RB 動作完了
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
LD M1443                 ; 糸切後wait
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
TMH K172 K50             ; 糸切後ｗａｉｔ
CON
AND T172                 ; 糸切後ｗａｉｔ
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
;待機位置移動
;Wait position move
LD M1444                 ; 待機位置移動
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
AND M1960                ; RB動作可能
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
LD M1445                 ; RB起動
MPS
OUT @M47                 ; 待機位置移動
MPP
AND M1700                ; RB 動作完了
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
;ﾏｼﾝｼｬｯﾀｰ　ﾛｯｸ解除
;Shutter Lock release
LD M1446                 ; ｼｬｯﾀｰﾛｯｸ解除
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
AND T1007                ; M/Cｼｬｯﾀｰﾛｯｸ 後退限
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
MPP
OUT M1779                ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ解除
;ｼｬｯﾀｰ開待ち
;Waiting for shutter open
LD M1447                 ; ｼｬｯﾀ開待ち
MPS
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
AND T1020                ; M/Cｼｬｯﾀｰ開き検出
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
MPP
LDB T1020                ; M/Cｼｬｯﾀｰ開き検出
AND M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
ANL
MOV K80 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
MPP
LD<> D110 K15            ; RB　受付動作No.
AND X105                 ; RB OUT 5  待機位置
LD<= D414 D400           ; ﾉｽﾞﾙ封止待機時刻(sec)  現在時刻secﾃﾞｰﾀ
OR T14                   ; ｽﾀｰﾄ長押し
ANL
AND T1200                ; 封止ｶｯﾌﾟ検出
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
AND M1962                ; RB封止動作可能
ANL
MOV K49 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
;捨て打ちｶｯﾌﾟ取り出し待ち
;Waiting for take out Discharge cup
LD M1448                 ; 捨打ちｶｯﾌﾟ取出し待ち
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
ANB T1201                ; 捨て打ちｶｯﾌﾟ検出
MOV K50 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
MPP
LD T1201                 ; 捨て打ちｶｯﾌﾟ検出
AND M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
ANL
MOV K80 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
;ﾉｽﾞﾙ封止
;Nozzle sealing
LD M1449                 ; RB起動
MPS
OUT @M62                 ; ﾉｽﾞﾙ封止動作
MPP
AND M1700                ; RB 動作完了
MOV K47 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
;計量準備
;Measurement preparation 
LD M1450                 ; 捨打ちCUP取り出し待ち
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
AND T1005                ; M/Cｼｬｯﾀｰ閉じ検出
MPS
AND M300                 ; ﾊﾟﾚｯﾄID OK
MPS
LD T1200                 ; 封止ｶｯﾌﾟ検出
AND T1201                ; 捨て打ちｶｯﾌﾟ検出
ANL
MOV K60 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
MRD
ANB T1200                ; 封止ｶｯﾌﾟ検出
MOV K52 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
MPP
ANB T1201                ; 捨て打ちｶｯﾌﾟ検出
MOV K53 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
MPP
ANB M300                 ; ﾊﾟﾚｯﾄID OK
TMR K199 K10             ; ﾊﾟﾚｯﾄID  不一致　  (幅点検)
MRD
LDB T1005                ; M/Cｼｬｯﾀｰ閉じ検出
AND M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
ANL
MOV K80 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
MPP
TMR K117 K300            ; 計量準備作業催促
;*** Err336:No Sealing cup
LD M1452                 ; ｴﾗｰ発生
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
DW K336 D148             ; 警報No.
CON
SET M1936                ; Err336:封止ｶｯﾌﾟ未検出
MPP
MOV K57 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
;*** Err337:No Discharge cup
LD M1453                 ; ｴﾗｰ発生
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
DW K337 D148             ; 警報No.
CON
SET M1937                ; Err337:捨て打ちｶｯﾌﾟ未検出
MPP
MOV K57 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
;*** Error release check
LD M1457                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
LD M1458                 ; ｴﾗｰ解除確認
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
;*** ｼｬｯﾀｰ開待ち
;*** Waiting for shutter open
LD M1459                 ; ｼｬｯﾀ開待ち
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
AND T1020                ; M/Cｼｬｯﾀｰ開き検出
MOV K50 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
;ﾏｼﾝｼｬｯﾀｰ　ﾛｯｸ
;Shutter lock
LD M1460                 ; ｼｬｯﾀｰﾛｯｸ
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
AND T1005                ; M/Cｼｬｯﾀｰ閉じ検出
MPS
AND T1006                ; M/Cｼｬｯﾀｰﾛｯｸ 前進限
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
MPP
OUT M1759                ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ
MPP
ANB T1005                ; M/Cｼｬｯﾀｰ閉じ検出
OUT M1785                ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ解除
;計量吐出動作
;Mesurement Discharge operation
;Rev12  圧力比較をD00124（制御目標圧））からD00134（下限値設定）に変更
LD M1461                 ; 捨て出し位置移動
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
ANB M1807                ; 圧安定化中
AND>= D12201 D134        ; ｼﾘｺﾝ圧力ﾃﾞｰﾀ  ｼﾘｺﾝ圧下限値【0.00MPa】
AND M1960                ; RB動作可能
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
LD M1462                 ; RB起動
MPS
OUT @M48                 ; 捨て出し位置移動
MPP
AND M1700                ; RB 動作完了
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
;D1161 = (T161.D * 100) / D1084.D + 1       '捨出し残量％表示用
;D1162 = T161.D / 6000                      '捨出し残時間表示用
LD M1463                 ; 計量吐出
OUT M1630                ; 吐出ﾊﾞﾙﾌﾞON(計量用)
TMH K161 D1084           ; 計量吐出時間(sec)  計量吐出時間(sec)
MPS
AND T161                 ; 計量吐出時間(sec)
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
MPP
NCJ K1002
;D1161 = (T161.D * 100) / D1084.D + 1       '捨出し残量％表示用
;
LD CR2002                ; 常時ON
LDA.L T161               ; 計量吐出時間(sec)
CON
MUL.L +100
CON
DIV.L D1084              ; 計量吐出時間(sec)
CON
ADD.L +1
CON
STA D1161                ; 残り捨出し%
;D1162 = T161.D / 6000                      '捨出し残時間表示用
LD CR2002                ; 常時ON
LDA.L T161               ; 計量吐出時間(sec)
CON
EXT.L
CON
DIV.L +6000
CON
STA D1162                ; 残り捨出し時間
LABEL K1002
;
LD M1464                 ; RB起動
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
TMH K169 K20             ; 吐出後ｳｪｲﾄ
CON
AND T169                 ; 吐出後ｳｪｲﾄ
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
LD M1465                 ; 糸切動作
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
AND M1960                ; RB動作可能
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
LD M1466                 ; RB 起動
MPS
OUT @M58                 ; 糸切動作
MPP
AND M1700                ; RB 動作完了
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
LD M1467                 ; 糸切後wait
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
TMH K170 K50             ; 糸切後ｳｪｲﾄ
CON
AND T170                 ; 糸切後ｳｪｲﾄ
MOV K70 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
;待機位置移動
;Wait position move
LD M1470                 ; 待機位置移動
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
AND M1960                ; RB動作可能
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
LD M1471                 ; RB　起動
MPS
OUT @M49                 ; 待機位置移動
MPP
AND M1700                ; RB 動作完了
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
;ﾏｼﾝｼｬｯﾀｰ　ﾛｯｸ解除
;Shutter Lock release
LD M1472                 ; ｼｬｯﾀｰﾛｯｸ解除
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
AND T1007                ; M/Cｼｬｯﾀｰﾛｯｸ 後退限
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
MOV E1002 D138           ; ｼﾘｺﾝ圧OFFSET【0.00MPa】  OFFSET仮入力値
MPP
OUT M1778                ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ解除
LD M1473                 ; 結果判定依頼
MPS
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
LD M70                   ; 自動起動停止指令(ｻｲｸﾙ停止)
ORB M49                  ; 全ﾕﾆｯﾄ起動中
ANL
MPS
AND B1514                ; DC_OK sw
SET M40                  ; Dispence Daily check OK
MOV K80 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
MPP
AND B1516                ; DC_NG sw
RES M40                  ; Dispence Daily check OK
MOV K80 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
MPP
AND B1515                ; DC_Retry sw
MPS
RES M40                  ; Dispence Daily check OK
CON
@INC D1002               ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
MPP
MOV D138 E1002           ; OFFSET仮入力値  ｼﾘｺﾝ圧OFFSET【0.00MPa】
MRD
OUT M1990                ; DC_作業者OK確認依頼画面表示1
MPP
LD<> D110 K15            ; RB　受付動作No.
AND X105                 ; RB OUT 5  待機位置
LD<= D414 D400           ; ﾉｽﾞﾙ封止待機時刻(sec)  現在時刻secﾃﾞｰﾀ
OR T14                   ; ｽﾀｰﾄ長押し
ANL
AND T1200                ; 封止ｶｯﾌﾟ検出
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
AND M1962                ; RB封止動作可能
ANL
MOV K75 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
LDB T1201                ; 捨て打ちｶｯﾌﾟ検出
OR M1806                 ; 捨打ｶｯﾌﾟ除材確認
AND M1473                ; 結果判定依頼
OUT M1806                ; 捨打ｶｯﾌﾟ除材確認
LD M1474                 ; 治具取り外し確認
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
AND M1808                ; 計量再試行
MOV K10 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
LD M1474                 ; 治具取り外し確認
OR M1808                 ; 計量再試行
AND M1906                ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝ実行中
ANB M1907                ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝ完了
OUT M1808                ; 計量再試行
;ﾉｽﾞﾙ封止
;Nozzle sealing
LD M1475                 ; RB起動
MPS
OUT @M61                 ; ﾉｽﾞﾙ封止動作
MPP
AND M1700                ; RB 動作完了
MOV K73 D1002            ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝｽﾃｯﾌﾟ
;終了動作
;End routine
LD M1480                 ; 終了処理
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
OUT M1907                ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝ完了
;<h1/>　　　ﾉｽﾞﾙ封止ｽﾗｲﾄﾞ
;　　　Nozzle sealing slider
LDB X108                 ; RB OUT 8  封止ｽﾗｲﾄﾞ切替要求
ZRES @M200 @M223         ; 封止段変更
LD X108                  ; RB OUT 8  封止ｽﾗｲﾄﾞ切替要求
MC
LD X108                  ; RB OUT 8  封止ｽﾗｲﾄﾞ切替要求
@SET @M200               ; 封止段変更
STG @M200                ; 封止段変更
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
AND L21                  ; ﾉｽﾞﾙ封止ﾄﾚｲ後退補助
JMP @M210                ; 封止ｽﾗｲﾄﾞ前進
MPP
AND L20                  ; ﾉｽﾞﾙ封止ﾄﾚｲ前進補助
JMP @M201                ; ｴﾗｰ発生
;<h1/>　　　　　前進の場合(交換動作)
;　　　　　for cup change
;*** Err337:No Discharge cup
STG @M201                ; ｴﾗｰ発生
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
DW K326 D148             ; 警報No.
CON
SET M1926                ; Err326:封止ｶｯﾌﾟ交換要求
CON
JMP @M202                ; ｴﾗｰ中
STG @M202                ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
JMP @M203                ; ｴﾗｰ解除確認
STG @M203                ; ｴﾗｰ解除確認
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
MPS
LD @M3                   ; 封止ｶｯﾌﾟ除材確認
AND T1200                ; 封止ｶｯﾌﾟ検出
ANL
JMP @M204                ; 封止ｽﾗｲﾄﾞ後退
MPP
LDB @M3                  ; 封止ｶｯﾌﾟ除材確認
ORB T1200                ; 封止ｶｯﾌﾟ検出
ANL
JMP @M201                ; ｴﾗｰ発生
LDB T1200                ; 封止ｶｯﾌﾟ検出
OR @M3                   ; 封止ｶｯﾌﾟ除材確認
LD @M201                 ; ｴﾗｰ発生
OR @M202                 ; ｴﾗｰ中
OR @M203                 ; ｴﾗｰ解除確認
ANL
OUT @M3                  ; 封止ｶｯﾌﾟ除材確認
;***
;ﾉｽﾞﾙ封止ｶｯﾌﾟｽﾗｲﾄﾞ　後退
;Nozzle sealing slider BWD
STG @M204                ; 封止ｽﾗｲﾄﾞ後退
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
AND T1205                ; ﾉｽﾞﾙ封止ﾄﾚｲ後退限
JMP @M220                ; 終了
MPP
OUT M1796                ; ﾉｽﾞﾙ封止ﾄﾚｲ後退
;<h1/>　　　　　後退の場合(ｽﾗｲﾄﾞ動作のみ)
;　　　　　for No cup change
;ﾉｽﾞﾙ封止ｶｯﾌﾟｽﾗｲﾄﾞ　前進
;Nozzle sealing slider FWD
STG @M210                ; 封止ｽﾗｲﾄﾞ前進
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
AND T1204                ; ﾉｽﾞﾙ封止ﾄﾚｲ前進限
JMP @M220                ; 終了
MPP
OUT M1791                ; ﾉｽﾞﾙ封止ﾄﾚｲ前進
;終了動作
;End process
STG @M220                ; 終了
MPS
ANB X108                 ; RB OUT 8  封止ｽﾗｲﾄﾞ切替要求
ENDS
MPP
OUT Y20D                 ; RB IN 13 封止ｽﾗｲﾄﾞ切替完了
MCR
;<h1/>■手動回路 
;
LD M33                   ; 手動ﾓｰﾄﾞ
AND M34                  ; ﾒｲﾝ手動操作可能条件
ANB M1905                ; ﾕﾆｯﾄ1起動中
ANB M97                  ; 原点復帰動作中
MC
LD M1959                 ; RB原点復帰可能
ANB X100                 ; RB OUT 0  ALM
AND X101                 ; RB OUT 1  RDY
AND X102                 ; RB OUT 2  EMG
ANB X103                 ; RB OUT 3  BUSY
AND X104                 ; RB OUT 4  原点復帰完了
AND X106                 ; RB OUT 6  動作開始待ち
LD T1005                 ; M/Cｼｬｯﾀｰ閉じ検出
OR M29                   ; 仮ｼｬｯﾀｰｲﾝﾀｰﾛｯｸ解除
ANL
ANB M1650                ; MUN:捨打ち動作中
ANB M1651                ; MUN:ﾉｽﾞﾙ洗浄動作中
ANB M1652                ; MUN:1側塗布動作中
ANB M1653                ; MUN:2側塗布動作中
OUT M1958                ; RB手動動作可能
;RB
;Point move
LD CR2002                ; 常時ON
LDP B1080                ; 塗布RB_封止位置移動PB
AND M1958                ; RB手動動作可能
OR @M67                  ; MNU:封止位置移動
ANL
ANB M1700                ; RB 動作完了
OUT @M67                 ; MNU:封止位置移動
LD CR2002                ; 常時ON
LDP B1081                ; 塗布RB_捨打位置移動PB
AND M1958                ; RB手動動作可能
OR @M68                  ; MNU:捨打位置移動
ANL
ANB M1700                ; RB 動作完了
OUT @M68                 ; MNU:捨打位置移動
LD CR2002                ; 常時ON
LDP B1084                ; 塗布RB_待機位置移動PB
AND M1958                ; RB手動動作可能
OR @M69                  ; MNU:待機位置移動
ANL
ANB M1700                ; RB 動作完了
OUT @M69                 ; MNU:待機位置移動
;1 Cycle operation
LD CR2002                ; 常時ON
MPS
AND<> D12000 K201        ; 表示画面No.
RES M1720                ; 塗布 ON
MPP
AND= D12000 K201         ; 表示画面No.
MPS
LDB M25                  ; 吐出無し
ANP B1099                ; 塗布 ON PB
ANL
ALT M1720                ; 塗布 ON
MPP
ANB M1720                ; 塗布 ON
OUT M1721                ; MUN：吐出無し
;Dischage operation
LD M1958                 ; RB手動動作可能
AND X105                 ; RB OUT 5  待機位置
AND T1201                ; 捨て打ちｶｯﾌﾟ検出
ANP B1090                ; 捨て打ち動作PB
SET @M100                ; 捨打ち動作開始
STG @M100                ; 捨打ち動作開始
SET M1650                ; MUN:捨打ち動作中
CON
JMP @M101                ; ｼｬｯﾀｰﾛｯｸ
STG @M101                ; ｼｬｯﾀｰﾛｯｸ
MPS
LD T1006                 ; M/Cｼｬｯﾀｰﾛｯｸ 前進限
ANB X100                 ; RB OUT 0  ALM
ANB X103                 ; RB OUT 3  BUSY
AND X106                 ; RB OUT 6  動作開始待ち
ANL
JMP @M102                ; 捨打ち動作
MPP
OUT M1755                ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ
STG @M102                ; 捨打ち動作
OUT @M70                 ; MNU:捨打位置移動
CON
AND M1700                ; RB 動作完了
JMP @M103                ; 計量吐出
STG @M103                ; 計量吐出
OUT M1624                ; MNU:吐出ON
CON
TMH K162 D1084           ; 計量吐出時間(sec)  計量吐出時間(sec)
CON
AND T162                 ; 計量吐出時間(sec)
JMP @M104                ; 吐出後待機
STG @M104                ; 吐出後待機
TMR @10 K40              ; 吐出後wait
CON
AND @T10                 ; 吐出後wait
JMP @M105                ; 動作前確認
STG @M105                ; 動作前確認
ANB M1700                ; RB 動作完了
ANB X100                 ; RB OUT 0  ALM
ANB X103                 ; RB OUT 3  BUSY
AND X106                 ; RB OUT 6  動作開始待ち
ANB M1912                ; UNIT1 ｴﾗｰ
ANB M2912                ; UNIT2 ｴﾗｰ
JMP @M106                ; ﾉｽﾞﾙ収納動作
STG @M106                ; ﾉｽﾞﾙ収納動作
OUT @M71                 ; MUN:ﾉｽﾞﾙ待機位置移動
CON
AND M1700                ; RB 動作完了
JMP @M107                ; 動作前確認
STG @M107                ; 動作前確認
ANB M1700                ; RB 動作完了
ANB X100                 ; RB OUT 0  ALM
ANB X103                 ; RB OUT 3  BUSY
AND X106                 ; RB OUT 6  動作開始待ち
JMP @M108                ; ﾉｽﾞﾙ封止動作
STG @M108                ; ﾉｽﾞﾙ封止動作
OUT @M78                 ; MNU:封止位置移動
CON
AND M1700                ; RB 動作完了
JMP @M109                ; ｼｬｯﾀｰﾛｯｸ解除
STG @M109                ; ｼｬｯﾀｰﾛｯｸ解除
MPS
AND T1007                ; M/Cｼｬｯﾀｰﾛｯｸ 後退限
RES M1650                ; MUN:捨打ち動作中
CON
ENDS
MPP
OUT M1774                ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ解除
;Side 1 Coatong operation
LD M1958                 ; RB手動動作可能
AND X105                 ; RB OUT 5  待機位置
LD T1120                 ; ﾜｰｸ1　有り
OR M1721                 ; MUN：吐出無し
ANL
ANP B1092                ; 1側塗布動作PB
SET @M120                ; 1側塗布動作開始
STG @M120                ; 1側塗布動作開始
SET M1652                ; MUN:1側塗布動作中
CON
JMP @M121                ; ｼｬｯﾀｰﾛｯｸ
STG @M121                ; ｼｬｯﾀｰﾛｯｸ
MPS
LD T1006                 ; M/Cｼｬｯﾀｰﾛｯｸ 前進限
ANB X100                 ; RB OUT 0  ALM
ANB X103                 ; RB OUT 3  BUSY
AND X106                 ; RB OUT 6  動作開始待ち
ANL
JMP @M122                ; 1側塗布動作
MPP
OUT M1757                ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ
STG @M122                ; 1側塗布動作
OUT @M74                 ; MUN:1側塗布動作
CON
AND M1700                ; RB 動作完了
JMP @M123                ; 動作前確認
STG @M123                ; 動作前確認
ANB M1700                ; RB 動作完了
ANB X100                 ; RB OUT 0  ALM
ANB X103                 ; RB OUT 3  BUSY
AND X106                 ; RB OUT 6  動作開始待ち
JMP @M124                ; ﾉｽﾞﾙ収納動作
STG @M124                ; ﾉｽﾞﾙ収納動作
OUT @M75                 ; MUN:ﾉｽﾞﾙ待機位置移動
CON
AND M1700                ; RB 動作完了
JMP @M125                ; ｼｬｯﾀｰﾛｯｸ解除
STG @M125                ; ｼｬｯﾀｰﾛｯｸ解除
MPS
AND T1007                ; M/Cｼｬｯﾀｰﾛｯｸ 後退限
RES M25                  ; 吐出無し
CON
RES M1652                ; MUN:1側塗布動作中
CON
ENDS
MPP
OUT M1776                ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ解除
;Side 2 Coatong operation
LD M1958                 ; RB手動動作可能
AND X105                 ; RB OUT 5  待機位置
LD T1130                 ; ﾜｰｸ2　有り
OR M1721                 ; MUN：吐出無し
ANL
ANP B1093                ; 2側塗布動作PB
SET @M130                ; 2側塗布動作開始
STG @M130                ; 2側塗布動作開始
SET M1653                ; MUN:2側塗布動作中
CON
JMP @M131                ; ｼｬｯﾀｰﾛｯｸ
STG @M131                ; ｼｬｯﾀｰﾛｯｸ
MPS
LD T1006                 ; M/Cｼｬｯﾀｰﾛｯｸ 前進限
ANB X100                 ; RB OUT 0  ALM
ANB X103                 ; RB OUT 3  BUSY
AND X106                 ; RB OUT 6  動作開始待ち
ANL
JMP @M132                ; 2側塗布動作
MPP
OUT M1758                ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ
STG @M132                ; 2側塗布動作
OUT @M76                 ; MUN:2側塗布動作
CON
AND M1700                ; RB 動作完了
JMP @M133                ; 動作前確認
STG @M133                ; 動作前確認
ANB M1700                ; RB 動作完了
ANB X100                 ; RB OUT 0  ALM
ANB X103                 ; RB OUT 3  BUSY
AND X106                 ; RB OUT 6  動作開始待ち
JMP @M134                ; ﾉｽﾞﾙ収納動作
STG @M134                ; ﾉｽﾞﾙ収納動作
OUT @M77                 ; MUN:ﾉｽﾞﾙ待機位置移動
CON
AND M1700                ; RB 動作完了
JMP @M135                ; ｼｬｯﾀｰﾛｯｸ解除
STG @M135                ; ｼｬｯﾀｰﾛｯｸ解除
MPS
AND T1007                ; M/Cｼｬｯﾀｰﾛｯｸ 後退限
RES M25                  ; 吐出無し
CON
RES M1653                ; MUN:2側塗布動作中
CON
ENDS
MPP
OUT M1777                ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ解除
;封止ﾄﾚｲ位置ﾘｾｯﾄ
LD M1958                 ; RB手動動作可能
ANP B1097                ; 封止位置ﾘｾｯﾄ PB
SET @M140                ; 捨て打ち位置移動
STG @M140                ; 捨て打ち位置移動
OUT @M73                 ; MNU:捨打位置移動
CON
AND M1700                ; RB 動作完了
JMP @M141                ; ﾄﾚｲ後退
STG @M141                ; ﾄﾚｲ後退
OUT M1797                ; ﾉｽﾞﾙ封止ﾄﾚｲ後退
CON
AND T1205                ; ﾉｽﾞﾙ封止ﾄﾚｲ後退限
ANB M1700                ; RB 動作完了
JMP @M142                ; 封止位置ﾘｾｯﾄ
STG @M142                ; 封止位置ﾘｾｯﾄ
OUT @M72                 ; MUN:封止位置ﾘｾｯﾄ
CON
AND M1700                ; RB 動作完了
JMP @M143                ; 終了ﾊﾝﾄﾞｼｪｲｸ
STG @M143                ; 終了ﾊﾝﾄﾞｼｪｲｸ
ANB M1700                ; RB 動作完了
ENDS
LDB @M140                ; 捨て打ち位置移動
ANB @M141                ; ﾄﾚｲ後退
ANB @M142                ; 封止位置ﾘｾｯﾄ
ANB @M143                ; 終了ﾊﾝﾄﾞｼｪｲｸ
INV
OUT M1809                ; 封止ﾄﾚｲﾘｾｯﾄ中
;ｼｬｯﾀｰﾛｯｸｼﾘﾝﾀﾞ
;Shutter lock cylinder
LD CR2002                ; 常時ON
MPS
AND B1082                ; ｼｬｯﾀﾛｯｸPB
OUT M1760                ; 手動：ｼｬｯﾀﾛｯｸ
MPP
AND B1083                ; ｼｬｯﾀﾛｯｸ解除PB
OUT M1780                ; 手動：ｼｬｯﾀﾛｯｸ解除
;吐出
;Discharge
LD= D110 K16             ; RB　受付動作No.
OR= D110 K63             ; RB　受付動作No.
ANB X103                 ; RB OUT 3  BUSY
ANB M25                  ; 吐出無し
MPS
AND B1098                ; 吐出 ON PB
OUT M1622                ; 手動：吐出ﾊﾞﾙﾌﾞON
MPP
LDP B1096                ; 計量吐出 ON PB
OR M1623                 ; 手動：吐出ﾊﾞﾙﾌﾞON(計量用)
ANB T160                 ; 計量吐出時間(sec)
ANL
OUT M1623                ; 手動：吐出ﾊﾞﾙﾌﾞON(計量用)
TMH K160 D1084           ; 計量吐出時間(sec)  計量吐出時間(sec)
MCR
;<h1/>出力回路
;RB
;Operation
LDB @M40                 ; 1側塗布動作
ANB @M74                 ; MUN:1側塗布動作
INV
@MOV D102 D100           ; 1側塗布指示Prog.No.  RB　指示動作No.
OUT @M20                 ; RB 1側塗布動作 起動
LDB @M41                 ; 2側塗布動作
ANB @M76                 ; MUN:2側塗布動作
INV
@MOV D104 D100           ; 2側塗布指示Prog.No.  RB　指示動作No.
OUT @M21                 ; RB 2側塗布動作 起動
LDB @M42                 ; ﾉｽﾞﾙ待機位置
ANB @M47                 ; 待機位置移動
ANB @M49                 ; 待機位置移動
ANB @M69                 ; MNU:待機位置移動
ANB @M71                 ; MUN:ﾉｽﾞﾙ待機位置移動
ANB @M75                 ; MUN:ﾉｽﾞﾙ待機位置移動
ANB @M77                 ; MUN:ﾉｽﾞﾙ待機位置移動
INV
@MOV K47 D100            ; RB　指示動作No.
OUT @M22                 ; RB ﾉｽﾞﾙ待機位置 起動
LDB @M72                 ; MUN:封止位置ﾘｾｯﾄ
INV
@MOV K63 D100            ; RB　指示動作No.
OUT @M23                 ; RB 封止位置ﾘｾｯﾄ
LDB @M53                 ; 糸切動作
ANB @M58                 ; 糸切動作
ANB @M59                 ; 糸切動作
ANB @M60                 ; 糸切動作
INV
@MOV K48 D100            ; RB　指示動作No.
OUT @M24                 ; RB 糸切動作 起動
LDB @M45                 ; 捨出し位置移動
ANB @M46                 ; 捨て出し位置移動
ANB @M48                 ; 捨て出し位置移動
ANB @M57                 ; 捨出し位置移動
ANB @M68                 ; MNU:捨打位置移動
ANB @M70                 ; MNU:捨打位置移動
ANB @M73                 ; MNU:捨打位置移動
INV
@MOV K16 D100            ; RB　指示動作No.
OUT @M25                 ; RB 捨打ち位置移動 
LDB @M51                 ; ﾉｽﾞﾙ封止動作
ANB @M52                 ; ﾉｽﾞﾙ封止動作
ANB @M54                 ; ﾉｽﾞﾙ封止動作
ANB @M63                 ; ﾉｽﾞﾙ封止動作
ANB @M67                 ; MNU:封止位置移動
ANB @M78                 ; MNU:封止位置移動
INV
@MOV K15 D100            ; RB　指示動作No.
OUT @M26                 ; RB ﾉｽﾞﾙ封止動作
LDB @M50                 ; ﾉｽﾞﾙ封止動作
ANB @M55                 ; ﾉｽﾞﾙ封止動作
ANB @M56                 ; ﾉｽﾞﾙ封止動作
ANB @M61                 ; ﾉｽﾞﾙ封止動作
ANB @M62                 ; ﾉｽﾞﾙ封止動作
INV
@MOV K15 D100            ; RB　指示動作No.
OUT M1708                ; RB強制収納動作
LDB @M20                 ; RB 1側塗布動作 起動
ANB @M21                 ; RB 2側塗布動作 起動
ANB @M22                 ; RB ﾉｽﾞﾙ待機位置 起動
ANB @M23                 ; RB 封止位置ﾘｾｯﾄ
ANB @M24                 ; RB 糸切動作 起動
ANB @M25                 ; RB 捨打ち位置移動 
ANB @M26                 ; RB ﾉｽﾞﾙ封止動作
ANB @M27                 ; RB 計量吐出動作
ANB M1708                ; RB強制収納動作
INV
MC
LD CR2002                ; 常時ON
MPS
AND @T0                  ; RB起動ﾃﾞｨﾚｲ
OUT M1702                ; RB 動作中
MPP
TMH @0 K3                ; RB起動ﾃﾞｨﾚｲ
LD M1702                 ; RB 動作中
AND X107                 ; RB OUT 7  動作完了
AND= D100 D110           ; RB　指示動作No.  RB　受付動作No.
OUT M1700                ; RB 動作完了
MCR
;HOME
LDB @M90                 ; RB原点復帰動作
INV
MC
LD CR2002                ; 常時ON
MOV K0 D100              ; RB　指示動作No.
MPS
AND @T1                  ; 原点復帰起動ﾃﾞｨﾚｲ
MPS
OUT M1706                ; RB 原点復帰中
MPP
LDB X104                 ; RB OUT 4  原点復帰完了
OR M1707                 ; 原点復帰開始確認
ANL
OUT M1707                ; 原点復帰開始確認
MPP
TMH @1 K20               ; 原点復帰起動ﾃﾞｨﾚｲ
LD M1706                 ; RB 原点復帰中
AND M1707                ; 原点復帰開始確認
AND X104                 ; RB OUT 4  原点復帰完了
AND= D110 K0             ; RB　受付動作No.
TMH @5 K20
CON
AND @T5
OUT M1704                ; RB 原点復帰完了
MCR
;ﾏｼﾝｼｬｯﾀｰﾛｯｸｼﾘﾝﾀﾞ
;Shutter lock cylinder
LDPB M1751               ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ
ANPB M1752               ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ
ANPB M1753               ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ
ANPB M1754               ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ
ANPB M1755               ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ
ANPB M1756               ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ
ANPB M1757               ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ
ANPB M1758               ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ
ANPB M1759               ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ
ANB M1760                ; 手動：ｼｬｯﾀﾛｯｸ
ANB M1750                ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ補助
INV
ANPB M1770               ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ解除補助
OUT M1750                ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ補助
LDPB M1771               ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ解除
ANPB M1772               ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ解除
ANPB M1773               ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ解除
ANPB M1774               ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ解除
ANPB M1775               ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ解除
ANPB M1776               ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ解除
ANPB M1777               ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ解除
ANPB M1778               ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ解除
ANPB M1779               ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ解除
ANB M1780                ; 手動：ｼｬｯﾀﾛｯｸ解除
ANPB M1781               ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ解除
ANPB M1782               ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ解除
ANPB M1783               ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ解除
ANPB M1784               ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ解除
ANPB M1785               ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ解除
ANB M65                  ; 即停止異常(緊急停止)
INV
ANPB M1750               ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ補助
OUT M1770                ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ解除補助
;ﾉｽﾞﾙ封止ｽﾗｲﾄﾞ
;Nozzle sealing slider
LDB L20                  ; ﾉｽﾞﾙ封止ﾄﾚｲ前進補助
ANPB M1791               ; ﾉｽﾞﾙ封止ﾄﾚｲ前進
INV
ANPB L21                 ; ﾉｽﾞﾙ封止ﾄﾚｲ後退補助
OUT L20                  ; ﾉｽﾞﾙ封止ﾄﾚｲ前進補助
LDB L21                  ; ﾉｽﾞﾙ封止ﾄﾚｲ後退補助
ANPB M1796               ; ﾉｽﾞﾙ封止ﾄﾚｲ後退
ANPB M1797               ; ﾉｽﾞﾙ封止ﾄﾚｲ後退
INV
ANPB L20                 ; ﾉｽﾞﾙ封止ﾄﾚｲ前進補助
OUT L21                  ; ﾉｽﾞﾙ封止ﾄﾚｲ後退補助
;<h1/>異常検出
;
LD CR2002                ; 常時ON
MPS
LD T190                  ; ﾊﾟﾚｯﾄID  不一致　  (AUTO)
OR T191                  ; ﾊﾟﾚｯﾄID  不一致　  (幅点検)
OR T199                  ; ﾊﾟﾚｯﾄID  不一致　  (幅点検)
LDB B0520                ; ﾕﾆｯﾄ1_異常1BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B020                 ; ﾊﾟﾚｯﾄID異常
ORL
ANL
OUT B020                 ; ﾊﾟﾚｯﾄID異常
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0520                 ; ﾕﾆｯﾄ1_異常1BZ停止
AND B020                 ; ﾊﾟﾚｯﾄID異常
ANL
OUT B0520                ; ﾕﾆｯﾄ1_異常1BZ停止
LD CR2002                ; 常時ON
MPS
LD T193                  ; 監視開始ﾃﾞｨﾚｲ
LD X100                  ; RB OUT 0  ALM
ORB X102                 ; RB OUT 2  EMG
ANL
ANB M404                 ; RB IN 1  ｿﾌﾄﾘｾｯﾄ
ANB M66                  ; 主幹異常(ｻｲｸﾙ停止)
ANL
TMR K192 K10             ; RB異常
MRD
AND Y52                  ; RB Power ON
TMR K193 K70             ; 監視開始ﾃﾞｨﾚｲ
MRD
LD T192                  ; RB異常
LDB B0521                ; ﾕﾆｯﾄ1_異常2BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B021                 ; RBｱﾗｰﾑ
ORL
ANL
OUT B021                 ; RBｱﾗｰﾑ
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0521                 ; ﾕﾆｯﾄ1_異常2BZ停止
AND B021                 ; RBｱﾗｰﾑ
ANL
OUT B0521                ; ﾕﾆｯﾄ1_異常2BZ停止
LD CR2002                ; 常時ON
MPS
LD CR2003                ; 常時OFF
LDB B0522                ; ﾕﾆｯﾄ1_異常3BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B022                 ; ﾕﾆｯﾄ1_異常3
ORL
ANL
OUT B022                 ; ﾕﾆｯﾄ1_異常3
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0522                 ; ﾕﾆｯﾄ1_異常3BZ停止
AND B022                 ; ﾕﾆｯﾄ1_異常3
ANL
OUT B0522                ; ﾕﾆｯﾄ1_異常3BZ停止
LD CR2002                ; 常時ON
MPS
LD CR2003                ; 常時OFF
LDB B0523                ; ﾕﾆｯﾄ1_異常4BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B023                 ; ﾕﾆｯﾄ1_異常4
ORL
ANL
OUT B023                 ; ﾕﾆｯﾄ1_異常4
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0523                 ; ﾕﾆｯﾄ1_異常4BZ停止
AND B023                 ; ﾕﾆｯﾄ1_異常4
ANL
OUT B0523                ; ﾕﾆｯﾄ1_異常4BZ停止
LD CR2002                ; 常時ON
MPS
LD CR2003                ; 常時OFF
LDB B0524                ; ﾕﾆｯﾄ1_異常5BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B024                 ; ﾕﾆｯﾄ1_異常5
ORL
ANL
OUT B024                 ; ﾕﾆｯﾄ1_異常5
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0524                 ; ﾕﾆｯﾄ1_異常5BZ停止
AND B024                 ; ﾕﾆｯﾄ1_異常5
ANL
OUT B0524                ; ﾕﾆｯﾄ1_異常5BZ停止
LD CR2002                ; 常時ON
MPS
LD CR2003                ; 常時OFF
LDB B0525                ; ﾕﾆｯﾄ1_異常6BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B025                 ; ﾕﾆｯﾄ1_異常6
ORL
ANL
OUT B025                 ; ﾕﾆｯﾄ1_異常6
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0525                 ; ﾕﾆｯﾄ1_異常6BZ停止
AND B025                 ; ﾕﾆｯﾄ1_異常6
ANL
OUT B0525                ; ﾕﾆｯﾄ1_異常6BZ停止
LD CR2002                ; 常時ON
MPS
LD CR2003                ; 常時OFF
LDB B0526                ; ﾕﾆｯﾄ1_異常7BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B026                 ; ﾕﾆｯﾄ1_異常7
ORL
ANL
OUT B026                 ; ﾕﾆｯﾄ1_異常7
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0526                 ; ﾕﾆｯﾄ1_異常7BZ停止
AND B026                 ; ﾕﾆｯﾄ1_異常7
ANL
OUT B0526                ; ﾕﾆｯﾄ1_異常7BZ停止
;異常ﾌﾞｻﾞｰまとめ
LDB B020                 ; ﾊﾟﾚｯﾄID異常
OR B0520                 ; ﾕﾆｯﾄ1_異常1BZ停止
LDB B021                 ; RBｱﾗｰﾑ
OR B0521                 ; ﾕﾆｯﾄ1_異常2BZ停止
ANL
LDB B022                 ; ﾕﾆｯﾄ1_異常3
OR B0522                 ; ﾕﾆｯﾄ1_異常3BZ停止
ANL
LDB B023                 ; ﾕﾆｯﾄ1_異常4
OR B0523                 ; ﾕﾆｯﾄ1_異常4BZ停止
ANL
LDB B024                 ; ﾕﾆｯﾄ1_異常5
OR B0524                 ; ﾕﾆｯﾄ1_異常5BZ停止
ANL
LDB B025                 ; ﾕﾆｯﾄ1_異常6
OR B0525                 ; ﾕﾆｯﾄ1_異常6BZ停止
ANL
LDB B026                 ; ﾕﾆｯﾄ1_異常7
OR B0526                 ; ﾕﾆｯﾄ1_異常7BZ停止
ANL
INV
OUT M1909                ; ﾕﾆｯﾄ1異常BZ補助
;封止警告
;Nozzle sealing warning
LD CR2002                ; 常時ON
MPS
LD= D148 K333            ; 警報No.
OR M231                  ; ﾉｽﾞﾙ封止要求記憶
ANB T62                  ; ﾉｽﾞﾙ封止要求間隔
ANL
OUT M231                 ; ﾉｽﾞﾙ封止要求記憶
TMR K62 K600             ; ﾉｽﾞﾙ封止要求間隔
MPP
LD M103                  ; 原点復帰OK
ANB M231                 ; ﾉｽﾞﾙ封止要求記憶
ANB M71                  ; All Error PAUSE
ANB M81                  ; 自動運転開始BZ
AND<.D D414 D400         ; ﾉｽﾞﾙ封止待機時刻(sec)  現在時刻secﾃﾞｰﾀ
ANL
MPS
LDB M2970                ; 吐出量点検ﾓｰﾄﾞ起動(同粘度交換中)
ANB M2971                ; 吐出量点検ﾓｰﾄﾞ起動(異粘度交換中)
ANL
DW K333 D148             ; 警報No.
CON
SET M1933                ; Err333:封止要求
MPP
LD M2970                 ; 吐出量点検ﾓｰﾄﾞ起動(同粘度交換中)
OR M2971                 ; 吐出量点検ﾓｰﾄﾞ起動(異粘度交換中)
ANL
TMR K125 K100            ; もうちょっと待ち
CON
AND T125                 ; もうちょっと待ち
DW K333 D148             ; 警報No.
CON
SET M1933                ; Err333:封止要求
END
ENDH
