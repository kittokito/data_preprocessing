DEVICE:53
;MODULE:U09_FLASH_ST2
;MODULE_TYPE:0
;SCRIPT_TYPE:
;<h1/>▽_入力受け
;関連する入力受け(ｾﾝｻのﾃﾞｨﾚｲﾀｲﾏ等)を必要があれば作成する。
;通常は入力ﾕﾆｯﾄに入力時定数(ﾃﾞｨﾚｲ)があるので直接使用しても問題は無い。
LD X04                   ; 書込み部ﾗｲﾄｶｰﾃﾝOUT1
AND X02                  ; 安全扉正常
ANB B0320                ; 800)_安全扉開
OR M39                   ; ｴﾘｱｾﾝｻｰ解除ﾓｰﾄﾞ
TMR K901 K5              ; 安全光柵OK
LD X04                   ; 書込み部ﾗｲﾄｶｰﾃﾝOUT1
AND X02                  ; 安全扉正常
ANB B0320                ; 800)_安全扉開
TMR K904 K20             ; 安全光柵OK遅い番
LD<> D5107 K0            ; ST4下治具IDｾﾝｻｰ状態
AND T960                 ; ST2Fixture位置決め固定端
AND T962                 ; ST2Fixture位置決め固定端
OUT M5403                ; ST2下治具_固定状態
LD<> D5106 K0            ; ST4上治具IDｾﾝｻｰ状態
AND T964                 ; ST2BackupBoard位置決め固定端
AND T966                 ; ST2BackupBoard位置決め固定端
OUT M5406                ; ST2上治具_固定状態
LDB X116A                ; ST2有効･無効選択
ANB B1191                ; ST2 有効･無効選択SW
INV
MEP
OUT M5415                ; ST2有効/無効選択SW受け
;　　CLｾﾝｻｰﾀｲﾏｰ受け
LD X1260                 ; ST2Fixture位置決め固定端
TMH K960 K10             ; ST2Fixture位置決め固定端
LD X1261                 ; ST2Fixture位置決め解除端
TMH K961 K10             ; ST2Fixture位置決め解除端
LD X1262                 ; ST2Fixture位置決め固定端
TMH K962 K10             ; ST2Fixture位置決め固定端
LD X1263                 ; ST2Fixture位置決め解除端
TMH K963 K10             ; ST2Fixture位置決め解除端
LD X1264                 ; ST2BackupBoard位置決め固定端
TMH K964 K10             ; ST2BackupBoard位置決め固定端
LD X1265                 ; ST2BackupBoard位置決め解除端
TMH K965 K10             ; ST2BackupBoard位置決め解除端
LD X1266                 ; ST2BackupBoard位置決め固定端
TMH K966 K10             ; ST2BackupBoard位置決め固定端
LD X1267                 ; ST2BackupBoard位置決め解除端
TMH K967 K10             ; ST2BackupBoard位置決め解除端
LDPB Y2426               ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上下下降
AND X1268                ; ST2BackupBoard上下下降端
TMR K968 K8              ; ST2上治具上下下降端
LDPB Y2427               ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上下上昇
MPS
AND X1269                ; ST2BackupBoard上下上昇端
TMH K969 K0              ; ST2上治具上下上昇端
MPP
ANB X1269                ; ST2BackupBoard上下上昇端
TMH K980 K10             ; ST2BackupBoard上下上昇端OFF
LD X126A                 ; ST2BackupBoard上下減速位置
LD M5450                 ; ST2上治具上下減速位置受け
ANB T970                 ; ST2上治具上下減速位置
ORL
TMH K970 K10             ; ST2上治具上下減速位置
OUT M5450                ; ST2上治具上下減速位置受け
LD X126B                 ; /
TMH K971 K10             ; /
LD X126C                 ; ST2下治具基板受取上昇端
TMH K972 K0              ; ST2下治具基板受取上昇端
LD X126D                 ; ST2下治具基板受取下降端
TMH K973 K0              ; ST2下治具基板受取下降端
LD X126E                 ; /
TMH K974 K10             ; /
LD X126F                 ; ST2Fixture在荷確認（ON無）
TMH K975 K10
;<h1/>___□BackUPBoard下降時間
LDB Y2426                ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上下下降
ANP CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
ANB M36                  ; 払出ﾓｰﾄﾞ
INC.D D5030              ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ下降OFF時間ｶｳﾝﾄ
LD Y2426                 ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上下下降
MOV.D K0 D5030           ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ下降OFF時間ｶｳﾝﾄ
;D5040.D = D210.U * K60 '分→秒
LD CR2002                ; 常時ON
NCJ K1000
;D5040.D = D210.U * K60 '分→秒
LD CR2002                ; 常時ON
LDA D210                 ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ下降指示時間(分)
CON
EXT
CON
MUL.L +60
CON
STA.D D5040              ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ下降指示時間(秒)
LABEL K1000
;
LD<.D D5040 D5030        ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ下降指示時間(秒)  ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ下降OFF時間ｶｳﾝﾄ
OR M5101                 ; 自動運転起ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ下降指示
AND<> D210 K0            ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ下降指示時間(分)
ANB M36                  ; 払出ﾓｰﾄﾞ
OUT M5100                ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ下降指示
LDP M71                  ; 自動運転開始BZ
OR M5101                 ; 自動運転起ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ下降指示
AND M71                  ; 自動運転開始BZ
ANB M5056                ; U9-1_S56_ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上昇指令
AND L900                 ; ST2_有効状態
OUT M5101                ; 自動運転起ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ下降指示
;<h1/>____□治具IDNO.
;上治具
LD X127A                 ; ST2上治具判別ID1
OUT D5106.0
LD X127B                 ; ST2上治具判別ID2
OUT D5106.1
LD X127C                 ; ST2上治具判別ID3
OUT D5106.2
;上治具ＩＤ保持
LD M71                   ; 自動運転開始BZ
AND L900                 ; ST2_有効状態
AND T969                 ; ST2上治具上下上昇端
LD M5412                 ; ST_ID保持ﾄﾘｶﾞ
ANB M5410                ; ST無効中
ORL
AND M71                  ; 自動運転開始BZ
OUT M5412                ; ST_ID保持ﾄﾘｶﾞ
LD L900                  ; ST2_有効状態
AND Y2427                ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上下上昇
AND T969                 ; ST2上治具上下上昇端
MPS
TMR K926 K5              ; 上治具_ID_更新_DLY
MPP
AND T926                 ; 上治具_ID_更新_DLY
@MOV D5106 D5100         ; ST4上治具IDｾﾝｻｰ状態  ST4_上治具iD確定
LD CR2002                ; 常時ON
MOV D5100 W0129          ; ST4_上治具iD確定  ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞID#2
;下治具
LD X127D                 ; ST2下治具(Fixture)判別ID1
OUT D5107.0
LD X127E                 ; ST2下治具(Fixture)判別ID2
OUT D5107.1
LD X127F                 ; ST2下治具(Fixture)判別ID3
OUT D5107.2
LD L900                  ; ST2_有効状態
MPS
TMR K927 K5              ; 下治具_ID_更新_DLY
MPP
AND T927                 ; 下治具_ID_更新_DLY
@MOV D5107 D5101         ; ST4下治具IDｾﾝｻｰ状態  ST4下治具(下治具)ID確定
LD CR2002                ; 常時ON
MOV D5101 W0121          ; ST4下治具(下治具)ID確定  ﾌｨｸｽﾁｬｰID#2
LD X1272                 ; ST2Fixture基板確認(1/有_0/無)
LD M35                   ; 空運転ﾓｰﾄﾞ
AND M30                  ; 自動ﾓｰﾄﾞ
AND= D5201 K1            ; ST2_基板有無記憶
ORL
OUT M5320                ; ST2下治具基板確認(1/有_0/無)
;<h1/>____□ST治具有効/無効選択
;段取り状態中ﾌﾗｸﾞの追加
;自動中は段取り状態中に、ST上のﾜｰｸ無、RBﾊﾝﾄﾞﾜｰｸ無し、供給部ﾜｰｸ無しにて無効状態OKとなる
;段取り状態中ﾌﾗｸﾞの追加
;自動中は段取り状態中に、ST上のﾜｰｸ無、RBﾊﾝﾄﾞﾜｰｸ無し、供給部ﾜｰｸ無しにて無効状態OKとなる
LDB M41                  ; 全ﾕﾆｯﾄ起動中
LDB M5074                ; U9-1起動中
LD M5001                 ; U9-1_S1
ANB M2961                ; 【HS】搬送→ST2へ供給開始
ORL
AND M41                  ; 全ﾕﾆｯﾄ起動中
ORL
OUT M5408                ; ST無効OK条件
LD M5409                 ; ST無効予約(自動運転)
ANB M5410                ; ST無効中
AND M5415                ; ST2有効/無効選択SW受け
OUT M5411                ; ST予約ｷｬﾝｾﾙ
LD M5415                 ; ST2有効/無効選択SW受け
AND M41                  ; 全ﾕﾆｯﾄ起動中
OR W04.13                ; ステージ#2 無効切替要求(ライタ異
OR W05.1                 ; ステージ#2 無効切替要求
AND L900                 ; ST2_有効状態
ANB M5409                ; ST無効予約(自動運転)
LD M5409                 ; ST無効予約(自動運転)
ANB M5410                ; ST無効中
ANB M5411                ; ST予約ｷｬﾝｾﾙ
ORL
OUT M5409                ; ST無効予約(自動運転)
LD M5409                 ; ST無効予約(自動運転)
AND M5408                ; ST無効OK条件
LD M5415                 ; ST2有効/無効選択SW受け
ANB M41                  ; 全ﾕﾆｯﾄ起動中
ORL
LDB Y2421                ; ST2ﾌｨｸｽﾁｬｰ位置決上昇
ANB Y2423                ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決上昇
ANB M5440                ; 有効時下治具ｺﾈｸﾀ挿入確認NG
ANB B012A                ; 298)_ST2 上治具ID異常
ANB B012B                ; 299)_ST2 下治具ID異常
INV
MEP
ORL
LD M5410                 ; ST無効中
ANB L900                 ; ST2_有効状態
ORL
OUT M5410                ; ST無効中
;<h1/>____□ST有効処理
LD M5415                 ; ST2有効/無効選択SW受け
LD<> D5106 K0            ; ST4上治具IDｾﾝｻｰ状態
AND<> D5107 K0           ; ST4下治具IDｾﾝｻｰ状態
AND M5403                ; ST2下治具_固定状態
AND M5406                ; ST2上治具_固定状態
LD M35                   ; 空運転ﾓｰﾄﾞ
AND= D5106 K0            ; ST4上治具IDｾﾝｻｰ状態
AND= D5107 K0            ; ST4下治具IDｾﾝｻｰ状態
ORL
ANL
ANB L900                 ; ST2_有効状態
LD L900                  ; ST2_有効状態
ANB M5410                ; ST無効中
ORL
OUT L900                 ; ST2_有効状態
LD L900                  ; ST2_有効状態
OUT W0102.9              ; ｽﾃｰｼﾞ有効/無効#1
LDB L900                 ; ST2_有効状態
MOV K0 D5100             ; ST4_上治具iD確定
MOV K0 D5101             ; ST4下治具(下治具)ID確定
;____ｺﾈｸﾀｾｯﾄ確認(浮き検知がONしていれば、ｺﾈｸﾀｾｯﾄしていることとする。)
LDP L900                 ; ST2_有効状態
LDB X1273                ; ST2Fixture基板浮き確認1
ORB X1274                ; ST2Fixture基板浮き確認2
ANL
OR M5440                 ; 有効時下治具ｺﾈｸﾀ挿入確認NG
ANB M5441                ; 下治具ｺﾈｸﾀ挿入確認終了
ANB M35                  ; 空運転ﾓｰﾄﾞ
OUT M5440                ; 有効時下治具ｺﾈｸﾀ挿入確認NG
LD M5440                 ; 有効時下治具ｺﾈｸﾀ挿入確認NG
ANB L900                 ; ST2_有効状態
OUT M5441                ; 下治具ｺﾈｸﾀ挿入確認終了
;　□治具LOCK/UNLOCK
;　　上治具
LDP X1168                ; ST2上治具ﾛｯｸ･ｱﾝﾛｯｸsw
AND T901                 ; 安全光柵OK
AND<> D5106 K0           ; ST4上治具IDｾﾝｻｰ状態
ANB L900                 ; ST2_有効状態
ANB M5402                ; ST2_上治具LOCK指令
LD M5402                 ; ST2_上治具LOCK指令
ANB M5404                ; ST2上治具UNLOCK指令
ORL
AND M50                  ; 運転準備
OUT M5402                ; ST2_上治具LOCK指令
LDP X1168                ; ST2上治具ﾛｯｸ･ｱﾝﾛｯｸsw
AND T901                 ; 安全光柵OK
ANB L900                 ; ST2_有効状態
ANB M5404                ; ST2上治具UNLOCK指令
LD M5404                 ; ST2上治具UNLOCK指令
ANB M5402                ; ST2_上治具LOCK指令
ORL
AND M50                  ; 運転準備
OUT M5404                ; ST2上治具UNLOCK指令
;　　下治具
LDP X1169                ; ST2下治具ﾛｯｸ･ｱﾝﾛｯｸsw
AND T901                 ; 安全光柵OK
AND<> D5107 K0           ; ST4下治具IDｾﾝｻｰ状態
ANB L900                 ; ST2_有効状態
ANB M5405                ; ST2下治具LOCK指令
LD M5405                 ; ST2下治具LOCK指令
ANB M5407                ; ST2_下治具UNLOCK指令
ORL
OUT M5405                ; ST2下治具LOCK指令
LDP X1169                ; ST2下治具ﾛｯｸ･ｱﾝﾛｯｸsw
AND T901                 ; 安全光柵OK
ANB L900                 ; ST2_有効状態
ANB M5407                ; ST2_下治具UNLOCK指令
LD M5407                 ; ST2_下治具UNLOCK指令
ANB M5405                ; ST2下治具LOCK指令
ORL
OUT M5407                ; ST2_下治具UNLOCK指令
;JIG_ID一致確認
LD L900                  ; ST2_有効状態
LD= D5100 D1711          ; ST4_上治具iD確定  搬送ﾍｯﾄﾞ1_BackupBoardID
AND= D5101 D1710         ; ST4下治具(下治具)ID確定  搬送ﾍｯﾄﾞ1_FixtureID
LD M35                   ; 空運転ﾓｰﾄﾞ
AND= D5100 K0            ; ST4_上治具iD確定
AND= D5101 K0            ; ST4下治具(下治具)ID確定
ORL
ANL
OUT M5401                ; ST2-搬送ID一致ﾌﾗｸﾞ
LD X1168                 ; ST2上治具ﾛｯｸ･ｱﾝﾛｯｸsw
ANB T901                 ; 安全光柵OK
AND<> D5100 K0           ; ST4_上治具iD確定
LD X1169                 ; ST2下治具ﾛｯｸ･ｱﾝﾛｯｸsw
ANB T901                 ; 安全光柵OK
AND<> D5101 K0           ; ST4下治具(下治具)ID確定
ORL
OUT M5414                ; ｾｯﾄ不可ﾌﾞｻﾞｰ(ｴﾘｱｾﾝｻ検出中)
;<h1/>▽_装置状態・動作条件
;ﾕﾆｯﾄまとめ
LD M5070                 ; U9-1原点
AND M5230                ; U9-3原点
OUT M5480                ; U9(ST2)原点
;□ 非常停止
LDB M5071                ; U9-1全異常
ANB M5231                ; U9-3全異常
INV
OUT M5481                ; U9即停止異常
;□ 起動条件
LD CR2003                ; 常時OFF
OUT M5482                ; U9起動条件
;□ 起動OFF
LDB M50                  ; 運転準備
LD M60                   ; ｴﾗｰ発生
OR M52                   ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
AND M5484                ; U9原点復帰中
ORL
OR T15                   ; 強制停止
OUT M5483                ; U9起動OFF
;□ 原点復帰
LD M82                   ; 原点復帰開始
ANB M5484                ; U9原点復帰中
OR M5484                 ; U9原点復帰中
ANB M5483                ; U9起動OFF
ANB M5491                ; U9ｴﾗｰ発生
ANB M5297                ; STEPEND
OUT M5484                ; U9原点復帰中
;□ 起動中
LDB M5074                ; U9-1起動中
ANB M5234                ; U9-3_Flash検査起動中
INV
OUT M5485                ; U9起動中
;□ ｻｲｸﾙ停止異常
LDB M5075                ; U9-1ｻｲｸﾙ停止異常
ANB M5235                ; U9-3ｻｲｸﾙ停止異常
INV
OUT M5486                ; U9ｻｲｸﾙ停止異常
;□ 払出停止異常
LDB CR2003               ; 常時OFF
INV
OUT M5487                ; U9払出停止異常
;□ 警報補助
LDB CR2003               ; 常時OFF
INV
OUT M5488                ; U9警報補助
;□ 機器準備確認
LDB CR2003               ; 常時OFF
OUT M5490                ; U9機器準備完了
;□ ｴﾗｰ発生　一時停止
LDB M5076                ; U9-1ｴﾗｰ発生
ANB M5236                ; U9-3ｴﾗｰ発生
INV
OUT M5491                ; U9ｴﾗｰ発生
;□ 動作中ﾕﾆｯﾄ無し
LD M5077                 ; U9-1動作無し
AND M5237                ; U9-3動作無し
OUT M5492                ; U9動作無し確認
;□ 払出しﾜｰｸ無し
LDB M5320                ; ST2下治具基板確認(1/有_0/無)
ANB M2574                ; ﾕﾆｯﾄ2-1起動中
AND M36                  ; 払出ﾓｰﾄﾞ
TMR K914 K10
LD T914
OUT M5493                ; U9基板無し
;□ ｽﾃｯﾌﾟ起動
LD M30                   ; 自動ﾓｰﾄﾞ
OR M31                   ; 手動ﾓｰﾄﾞ
AND T901                 ; 安全光柵OK
ANB M130                 ; 一時停止
ANB M51                  ; 即停止異常(緊急停止)
ANB M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ANB M57                  ; 自動起動停止指令(払出停止)
ANB M59                  ; 払出停止異常まとめ
ANB M60                  ; ｴﾗｰ発生
OUT M5479                ; U9ｽﾃｯﾌﾟ動作
;<h1/>▽_自動回路
;<h1/>▼_ﾕﾆｯﾄ状態・動作条件(補助)
LD X1270                 ; ST2Fixture下降確認1
AND X1271                ; ST2Fixture下降確認2
LD= D5107 K0             ; ST4下治具IDｾﾝｻｰ状態
AND X126F                ; ST2Fixture在荷確認（ON無）
ORL
AND T969                 ; ST2上治具上下上昇端
AND T973                 ; ST2下治具基板受取下降端
ANB M5320                ; ST2下治具基板確認(1/有_0/無)
AND= D5201 K0            ; ST2_基板有無記憶
OUT M5070                ; U9-1原点
;M**71は即停止異常
LDB B012A                ; 298)_ST2 上治具ID異常
ANB B012B                ; 299)_ST2 下治具ID異常
ANB B0122                ; 290)_ST2 基板受取り異常
ANB B0127                ; 295)_ST2 基盤受渡し異常
ANB B0129                ; 297)_ST2 基板浮き検出異常
ANB B012C                ; 300)_ST2 基板検知異常
INV
OUT M5071                ; U9-1全異常
LD M5070                 ; U9-1原点
ANB M5074                ; U9-1起動中
AND M5479                ; U9ｽﾃｯﾌﾟ動作
AND L900                 ; ST2_有効状態
LD M5412                 ; ST_ID保持ﾄﾘｶﾞ
AND M5401                ; ST2-搬送ID一致ﾌﾗｸﾞ
AND= D1701 K1            ; 搬送ﾍｯﾄﾞ1_有無記憶
OR M5100                 ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ下降指示
ANL
AND M2659                ; 初期起動時ﾊﾝﾄﾞ確認完了
ANB W04.13               ; ステージ#2 無効切替要求(ライタ異
OUT M5072                ; U9-1起動条件
LDB M50                  ; 運転準備
OR M5486                 ; U9ｻｲｸﾙ停止異常
OR T15                   ; 強制停止
OUT M5073                ; U9-1起動OFF
LD M73                   ; 各工程起動指令
AND M5072                ; U9-1起動条件
OR M5074                 ; U9-1起動中
ANB M5073                ; U9-1起動OFF
ANB M5063                ; U9-1ｻｲｸﾙ終了
OUT M5074                ; U9-1起動中
;ﾕﾆｯﾄ*-1 ｻｲｸﾙ停止異常
LD CR2002                ; 常時ON
INV
OUT M5075                ; U9-1ｻｲｸﾙ停止異常
;ﾕﾆｯﾄ*-1 ｴﾗｰ発生まとめ
LDB B0122                ; 290)_ST2 基板受取り異常
ANB B0120                ; 288)_ST2 下治具位置決CL異常
ANB B0121                ; 289)_ST2 上治具位置決CL異常
ANB B0123                ; 291)_ST2 基板受渡上下CLS異常
ANB B0124                ; 292)_ST2 上治具上下CLS異常
ANB B0340                ; 832)_ST2基板除去要求
ANB B0128                ; 296)_ST2 下治具下降異常
ANB B0341                ; 833)_ST2ROM書込み中
ANB B0342                ; 834)_ST2下治具ｺﾈｸﾀ挿入確認
INV
OUT M5076                ; U9-1ｴﾗｰ発生
;ﾕﾆｯﾄ*-1 停止判定
LD= D5000 D5005          ; U13-1自動運転ｽﾃｯﾌﾟ  U13-1動作中判定
ORB M5074                ; U9-1起動中
TMR K910 K20             ; U9-1動作無し
LD CR2002                ; 常時ON
MOV D5000 D5005          ; U13-1自動運転ｽﾃｯﾌﾟ  U13-1動作中判定
LD T910                  ; U9-1動作無し
OUT M5077                ; U9-1動作無し
;□
;□　ﾕﾆｯﾄ7-1 自動運転ステップ開始
;□
LD CR2002                ; 常時ON
FMOV K0 M5000 K4         ; U9-1_S0
LDB M5074                ; U9-1起動中
MOV K0 D5000             ; U13-1自動運転ｽﾃｯﾌﾟ
LD M5074                 ; U9-1起動中
MOV D5000 Z1             ; U13-1自動運転ｽﾃｯﾌﾟ
SET M5000:Z1             ; U9-1_S0
;条件分岐
;　　ｺﾈｸﾀ挿入確認
LD M5000                 ; U9-1_S0
MPS
LD X1273                 ; ST2Fixture基板浮き確認1
AND X1274                ; ST2Fixture基板浮き確認2
OR M35                   ; 空運転ﾓｰﾄﾞ
ANL
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
MPP
LDB X1273                ; ST2Fixture基板浮き確認1
ORB X1274                ; ST2Fixture基板浮き確認2
ANB M35                  ; 空運転ﾓｰﾄﾞ
ANL
MOV K50 D5000            ; U13-1自動運転ｽﾃｯﾌﾟ
LD M5050                 ; U9-1_S50_ST2_ｺﾈｸﾀ挿入確認
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
AND B0342                ; 834)_ST2下治具ｺﾈｸﾀ挿入確認
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
LD M5051                 ; U9-1_S51
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
ANB B0342                ; 834)_ST2下治具ｺﾈｸﾀ挿入確認
MOV K0 D5000             ; U13-1自動運転ｽﾃｯﾌﾟ
;<h1/>____▼_S001_ﾜｰｸ要求
LD M5001                 ; U9-1_S1
MPS
ANB M5493                ; U9基板無し
MPS
AND M2961                ; 【HS】搬送→ST2へ供給開始
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
MRD
LD M5401                 ; ST2-搬送ID一致ﾌﾗｸﾞ
ANB M5100                ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ下降指示
OR M2961                 ; 【HS】搬送→ST2へ供給開始
ANL
OUT M5420                ; ST2_基板供給要求→搬送
MPP
LDB M2961                ; 【HS】搬送→ST2へ供給開始
AND M5100                ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ下降指示
ANL
MOV K55 D5000            ; U13-1自動運転ｽﾃｯﾌﾟ
MPP
LD M5493                 ; U9基板無し
LD M5410                 ; ST無効中
ANB L900                 ; ST2_有効状態
ORL
ANL
MOV K63 D5000            ; U13-1自動運転ｽﾃｯﾌﾟ
;<h1/>____▼_S050_ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ下降
;時間が経つと圧力が抜けて、下降スピードがおかしくなる現象対策
LD M5055                 ; U9-1_S55_ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ下降指令
AND M5479                ; U9ｽﾃｯﾌﾟ動作
AND Y2426                ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上下下降
AND T980                 ; ST2BackupBoard上下上昇端OFF
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
LD M5056                 ; U9-1_S56_ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上昇指令
AND M5479                ; U9ｽﾃｯﾌﾟ動作
ANB M5100                ; ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ下降指示
AND Y2427                ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上下上昇
AND T969                 ; ST2上治具上下上昇端
MOV K1 D5000             ; U13-1自動運転ｽﾃｯﾌﾟ
;__搬送完了ﾊﾝﾄﾞｼｪｲｸ待ち
LD M5002                 ; U9-1_S2_搬送軸逃げ待ち
LD M2965                 ; 【HS】搬送→ST2へ供給完了
OR M5421                 ; ST2_基板供給完了受取り
ANL
MPS
LDB M2961                ; 【HS】搬送→ST2へ供給開始
ANB M2965                ; 【HS】搬送→ST2へ供給完了
ANL
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
MPP
OUT M5421                ; ST2_基板供給完了受取り
;　　ﾜｰｸ置く&搬送位置まで逃げ確認
LD M5003                 ; U9-1_S3_後退確認
ANB M2965                ; 【HS】搬送→ST2へ供給完了
AND= D5201 K1            ; ST2_基板有無記憶
AND M2808                ; Y軸_ﾌﾗｯｼｭ不干渉位置(RB領域判定)
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
;　　ﾜｰｸ確認
LD M5004                 ; U9-1_S4_
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
MPS
AND T902                 ; 基板確認ﾀｲﾏ
MPS
LD M5320                 ; ST2下治具基板確認(1/有_0/無)
OR M35                   ; 空運転ﾓｰﾄﾞ
ANL
@MOV K40 D5000           ; U13-1自動運転ｽﾃｯﾌﾟ
MPP
LDB M5320                ; ST2下治具基板確認(1/有_0/無)
ANB M35                  ; 空運転ﾓｰﾄﾞ
ANL
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
MPP
TMR K902 K3              ; 基板確認ﾀｲﾏ
;　　ﾜｰｸ受取異常(ﾜｰｸ受取異常は、即停止へ変更)
LD M5005                 ; U9-1_S5_基板受取り異常
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
AND B0122                ; 290)_ST2 基板受取り異常
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
LD M5006                 ; U9-1_S6_
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
ANB B0122                ; 290)_ST2 基板受取り異常
MPS
LD M5320                 ; ST2下治具基板確認(1/有_0/無)
OR M35                   ; 空運転ﾓｰﾄﾞ
ANL
@MOV K4 D5000            ; U13-1自動運転ｽﾃｯﾌﾟ
MPP
LDB M5320                ; ST2下治具基板確認(1/有_0/無)
ANB M35                  ; 空運転ﾓｰﾄﾞ
ANL
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
LD M5007                 ; U9-1_S7_基板除去処理
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
@MOV K63 D5000           ; U13-1自動運転ｽﾃｯﾌﾟ
FMOV K0 D5200 K100       ; ST2_INDEX NO.
;　　浮き確認(浮き検知異常は即停止へ変更)
LD M5040                 ; U9-1_S40
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
MPS
LD X1273                 ; ST2Fixture基板浮き確認1
AND X1274                ; ST2Fixture基板浮き確認2
OR M35                   ; 空運転ﾓｰﾄﾞ
ANL
@MOV K8 D5000            ; U13-1自動運転ｽﾃｯﾌﾟ
MPP
LDB X1273                ; ST2Fixture基板浮き確認1
ORB X1274                ; ST2Fixture基板浮き確認2
ANB M35                  ; 空運転ﾓｰﾄﾞ
ANL
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
;　　浮き異常後はﾜｰｸ有無ﾁｪｯｸから開始する
LD M5041                 ; U9-1_S41_基板浮き異常
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
AND B0129                ; 297)_ST2 基板浮き検出異常
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
LD M5042                 ; U9-1_S42
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
ANB B0129                ; 297)_ST2 基板浮き検出異常
MPS
AND M5320                ; ST2下治具基板確認(1/有_0/無)
@MOV K40 D5000           ; U13-1自動運転ｽﾃｯﾌﾟ
MPP
ANB M5320                ; ST2下治具基板確認(1/有_0/無)
@MOV K5 D5000            ; U13-1自動運転ｽﾃｯﾌﾟ
;　　PCﾃﾞｰﾀ送信（未使用）
LD M5008                 ; U9-1_S8_PCﾃﾞｰﾀ送信
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
LD M5009                 ; U9-1_S9
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
;<h1/>____▼_ﾌﾗｯｼｭ書込み処理
LD M5010                 ; U9-1_S10_
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
;　　ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ下降
LD M5011                 ; U9-1_S11_上治具下降指令
MPS
LD T901                  ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
AND Y2426                ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上下下降
ANL
MPS
AND T968                 ; ST2上治具上下下降端
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
MPP
LDB T968                 ; ST2上治具上下下降端
ANB M5095                ; ﾘﾄﾗｲ記憶(ﾘﾄﾗｲは一回のみ)
ANL
TMR K935 K50             ; 下降中停止ﾘﾄﾗｲﾀｲﾏ
MPP
LDB T901                 ; 安全光柵OK
ORB M5479                ; U9ｽﾃｯﾌﾟ動作
OR T935                  ; 下降中停止ﾘﾄﾗｲﾀｲﾏ
ANL
MOV K13 D5000            ; U13-1自動運転ｽﾃｯﾌﾟ
LD T935                  ; 下降中停止ﾘﾄﾗｲﾀｲﾏ
OR M5095                 ; ﾘﾄﾗｲ記憶(ﾘﾄﾗｲは一回のみ)
AND M5074                ; U9-1起動中
OUT M5095                ; ﾘﾄﾗｲ記憶(ﾘﾄﾗｲは一回のみ)
LDP M5011                ; U9-1_S11_上治具下降指令
MOV D5200 W0142          ; ST2_INDEX NO.  ｽﾃｰｼﾞ#2製品ｲﾝﾃﾞｯｸｽNo.
LD M5012                 ; U9-1_S12_上治具下降指令
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
ANB B0124                ; 292)_ST2 上治具上下CLS異常
AND Y2426                ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上下下降
AND T968                 ; ST2上治具上下下降端
MOV K15 D5000            ; U13-1自動運転ｽﾃｯﾌﾟ
;上治具下降中にｴﾘｱｾﾝｻが切れた場合、上昇させてからもう一回ﾌﾟﾚｽ
LD M5013                 ; U9-1_S13_ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上昇
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
AND Y2427                ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上下上昇
AND T969                 ; ST2上治具上下上昇端
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
LD M5014                 ; U9-1_S14_上治具下降指令停止
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
MOV K11 D5000            ; U13-1自動運転ｽﾃｯﾌﾟ
;上治具下降完了
LD M5015                 ; U9-1_S15
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
LD M5016                 ; U9-1_S16
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
LD M5017                 ; U9-1_S17
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
LD M5018                 ; U9-1_S18
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
;<h1/>____▼_ﾌﾗｯｼｭ書込み開始 →PC書込み
LD M5019                 ; U9-1_S19_Flash書込開始
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
AND M5234                ; U9-3_Flash検査起動中
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
LD M5020                 ; U9-1_S20_
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
ANB M5234                ; U9-3_Flash検査起動中
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
LD M5021                 ; U9-1_S21
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
LD M5022                 ; U9-1_S22
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
LD M5023                 ; U9-1_S23
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
;上治具上昇指令
LD M5024                 ; U9-1_S24_上治具上昇指令
MPS
LD T901                  ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
ANL
MPS
ANB M5430                ; Flash書込みﾘﾄﾗｲﾌﾗｸﾞ
MPS
AND T969                 ; ST2上治具上下上昇端
MOV K26 D5000            ; U13-1自動運転ｽﾃｯﾌﾟ
MPP
AND M5450                ; ST2上治具上下減速位置受け
OUT M5461                ; ST2_基板受取り上昇指令(先行動作)
MPP
LD M5430                 ; Flash書込みﾘﾄﾗｲﾌﾗｸﾞ
LDB CR2002               ; 常時ON
AND M5450                ; ST2上治具上下減速位置受け
LD CR2002                ; 常時ON
AND T969                 ; ST2上治具上下上昇端
ORL
ANL
ANL
MOV K10 D5000            ; U13-1自動運転ｽﾃｯﾌﾟ
MPP
LDB T901                 ; 安全光柵OK
ORB M5479                ; U9ｽﾃｯﾌﾟ動作
ANL
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
LD M5025                 ; U9-1_S25_上治具上昇停止
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
MOV K24 D5000            ; U13-1自動運転ｽﾃｯﾌﾟ
;　　基板受取りCL上昇
LD M5026                 ; U9-1_S26_基板受取りCL上昇指令
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
AND T972                 ; ST2下治具基板受取上昇端
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
@INC D5020               ; ST4_flash書込み回数
LDB M71                  ; 自動運転開始BZ
MOV K0 D5020             ; ST4_flash書込み回数
LD M5027                 ; U9-1_S27_
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
LD M5028                 ; U9-1_S28
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
;<h1/>____▼_搬送へﾜｰｸ除去要求
LD M5029                 ; U9-1_S29
MPS
ANB M2986                ; ﾕﾆｯﾄ2ｻｲｸﾙ停止異常
MPS
AND M2971                ; 【HS】搬送→ST2へ除材開始
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
MPP
LD<> D1201 K1            ; 投入_ﾜｰｸ有無記憶
AND<> D1301 K1           ; CV_渡部_有無記憶
OR= D1701 K1             ; 搬送ﾍｯﾄﾞ1_有無記憶
OR M2945                 ; ﾍｯﾄﾞ2_st2除材中ﾌﾗｸﾞ
ANL
OUT M5422                ; ST2_基板除去要求
MPP
AND M2986                ; ﾕﾆｯﾄ2ｻｲｸﾙ停止異常
MOV K63 D5000            ; U13-1自動運転ｽﾃｯﾌﾟ
LD M5030                 ; U9-1_S30
LD M2975                 ; 【HS】搬送→ST2へ除材完了
OR M5423                 ; ST2_基板除去完了受取り
ANL
MPS
LDB M2971                ; 【HS】搬送→ST2へ除材開始
ANB M2975                ; 【HS】搬送→ST2へ除材完了
ANL
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
MPP
OUT M5423                ; ST2_基板除去完了受取り
LD M5031                 ; U9-1_S31
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
AND= D5201 K0            ; ST2_基板有無記憶
LD M2840                 ; Z_搬送高さ(回転可能)
OR M2850                 ; Z_ﾌﾗｯｼｭ搬送高さ
ANL
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
LD M5032                 ; U9-1_S32
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
LD M5033                 ; U9-1_S33_下治具下降指令
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
AND T973                 ; ST2下治具基板受取下降端
MPS
LD X1270                 ; ST2Fixture下降確認1
AND X1271                ; ST2Fixture下降確認2
OR= D5101 K0             ; ST4下治具(下治具)ID確定
ANL
MOV K36 D5000            ; U13-1自動運転ｽﾃｯﾌﾟ
MPP
LD<> D5101 K0            ; ST4下治具(下治具)ID確定
LDB X1270                ; ST2Fixture下降確認1
ORB X1271                ; ST2Fixture下降確認2
ANL
ANL
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
;　　ﾌｨｸｽﾁｬｰ下降NG
LD M5034                 ; U9-1_S34_下治具下降異常
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
AND B0128                ; 296)_ST2 下治具下降異常
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
LD M5035                 ; U9-1_S35
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
ANB B0128                ; 296)_ST2 下治具下降異常
MOV K33 D5000            ; U13-1自動運転ｽﾃｯﾌﾟ
;　　ﾌｨｸｽﾁｬｰ下降OK
LD M5036                 ; U9-1_S36
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
MPS
ANB M5320                ; ST2下治具基板確認(1/有_0/無)
MOV K63 D5000            ; U13-1自動運転ｽﾃｯﾌﾟ
MPP
AND M5320                ; ST2下治具基板確認(1/有_0/無)
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
LD M5037                 ; U9-1_S37_基盤残り異常
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
AND B0127                ; 295)_ST2 基盤受渡し異常
INC D5000                ; U13-1自動運転ｽﾃｯﾌﾟ
LD M5038                 ; U9-1_S38
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
ANB B0127                ; 295)_ST2 基盤受渡し異常
MOV K36 D5000            ; U13-1自動運転ｽﾃｯﾌﾟ
;□
;□　ﾕﾆｯﾄ1-2ステップ開始
;□
;<h1/>____▼_FLASH書込み_状態・動作条件(補助)
LD M300                  ; PC通信正常
OR M3                    ; OFFLINE_MODE
ANB W02.1                ; ｽﾃｰｼﾞ状態#2(1_書込み中)
LD X1600                 ; ST2ﾌｨｸﾁｬｰ1_電源入り確認
ORB Y2608                ; ST2_Fixture1電源ON
ANL
LD X1601                 ; ST2ﾌｨｸﾁｬｰ2_電源入り確認
ORB Y2609                ; ST2_Fixture2電源ON
ANL
OUT M5230                ; U9-3原点
LDB B0125                ; 293)_ST2 基板1CP Trip異常
ANB B0126                ; 294)_ST2 基板2CP Trip異常
INV
OUT M5231                ; U9-3全異常
LD M5230                 ; U9-3原点
ANB M5234                ; U9-3_Flash検査起動中
AND M5479                ; U9ｽﾃｯﾌﾟ動作
OUT M5232                ; U9-3起動条件
LDB M50                  ; 運転準備
OR M5486                 ; U9ｻｲｸﾙ停止異常
OR T15                   ; 強制停止
OUT M5233                ; U9-3起動OFF
LD M5019                 ; U9-1_S19_Flash書込開始
AND M5232                ; U9-3起動条件
OR M5234                 ; U9-3_Flash検査起動中
ANB M5233                ; U9-3起動OFF
ANB M5223                ; U9-3ｻｲｸﾙ終了
OUT M5234                ; U9-3_Flash検査起動中
LD CR2002                ; 常時ON
DW K0 D5400
LD M5234                 ; U9-3_Flash検査起動中
DW K1 D5400
LD= D5203 K1             ; ST2_書込結果(1=OK_2=NG)
DW K2 D5400
LD= D5203 K2             ; ST2_書込結果(1=OK_2=NG)
DW K3 D5400
;ﾕﾆｯﾄ1-3ｻｲｸﾙ停止異常
LD CR2002                ; 常時ON
INV
OUT M5235                ; U9-3ｻｲｸﾙ停止異常
;ﾕﾆｯﾄ1-3ｴﾗｰ発生まとめ
LDB CR2003               ; 常時OFF
INV
OUT M5236                ; U9-3ｴﾗｰ発生
;ﾕﾆｯﾄ1-3停止判定
LD= D5002 D5007          ; U13-3自動運転ｽﾃｯﾌﾟ  U13-3動作中判定
TMR K912 K20
LD CR2002                ; 常時ON
MOV D5002 D5007          ; U13-3自動運転ｽﾃｯﾌﾟ  U13-3動作中判定
LD T912
ORB M5234                ; U9-3_Flash検査起動中
OUT M5237                ; U9-3動作無し
;□
;□　ﾕﾆｯﾄ1-3自動運転ステップ開始
;□
LD CR2002                ; 常時ON
FMOV K0 M5160 K4         ; U9-3_S0
LDB M5234                ; U9-3_Flash検査起動中
MOV K0 D5002             ; U13-3自動運転ｽﾃｯﾌﾟ
LD M5234                 ; U9-3_Flash検査起動中
MOV D5002 Z1             ; U13-3自動運転ｽﾃｯﾌﾟ
SET M5160:Z1             ; U9-3_S0
;検査開始
LD M5160                 ; U9-3_S0
@INC D5002               ; U13-3自動運転ｽﾃｯﾌﾟ
RES M5430                ; Flash書込みﾘﾄﾗｲﾌﾗｸﾞ
LD M5161                 ; U9-3_S1
MPS
ANB M3                   ; OFFLINE_MODE
@INC D5002               ; U13-3自動運転ｽﾃｯﾌﾟ
MPP
AND M3                   ; OFFLINE_MODE
MPS
AND T930                 ; 書込み時間
@MOV K7 D5002            ; U13-3自動運転ｽﾃｯﾌﾟ
MPP
TMR K930 K100            ; 書込み時間
;　　ｲﾝﾃﾞｯｸｽNOｾｯﾄ
LD M5162                 ; U9-3_S2_
@INC D5002               ; U13-3自動運転ｽﾃｯﾌﾟ
LD M5163                 ; U9-3_S3_
@INC D5002               ; U13-3自動運転ｽﾃｯﾌﾟ
LD M5164                 ; U9-3_S4
@INC D5002               ; U13-3自動運転ｽﾃｯﾌﾟ
;　　書込み開始ON　→　書込み状態ON
LD M5165                 ; U9-3_S5_PCへFlash書込要求
MPS
LD W0102.1               ; 書込み開始要求#2
AND W02.1                ; ｽﾃｰｼﾞ状態#2(1_書込み中)
ANB W02.9                ; 書込み結果#1(1_OK)
ANL
@INC D5002               ; U13-3自動運転ｽﾃｯﾌﾟ
MPP
OUT W0102.1              ; 書込み開始要求#2
;　　書込み開始OFF　→　書込み完了待ち
LD M5166                 ; U9-3_S6
AND M5479                ; U9ｽﾃｯﾌﾟ動作
ANB W02.1                ; ｽﾃｰｼﾞ状態#2(1_書込み中)
MPS
ANB W03.1                ; ﾘﾄﾗｲ要求#2
@INC D5002               ; U13-3自動運転ｽﾃｯﾌﾟ
MPP
AND W03.1                ; ﾘﾄﾗｲ要求#2
MOV K10 D5002            ; U13-3自動運転ｽﾃｯﾌﾟ
SET M5430                ; Flash書込みﾘﾄﾗｲﾌﾗｸﾞ
LD M5167                 ; U9-3_S7
@INC D5002               ; U13-3自動運転ｽﾃｯﾌﾟ
MPS
LDB M3                   ; OFFLINE_MODE
AND W02.9                ; 書込み結果#1(1_OK)
LD M3                    ; OFFLINE_MODE
AND B100F                ; OFFLINE時OK/NG選択(1:OK)
ORL
OR L1                    ; 強制OKｺﾝﾍﾞﾔ排出ON(ONでOK排出)
ANL
MOV K1 D5203             ; ST2_書込結果(1=OK_2=NG)
MPP
LDB M3                   ; OFFLINE_MODE
ANB W02.9                ; 書込み結果#1(1_OK)
LD M3                    ; OFFLINE_MODE
ANB B100F                ; OFFLINE時OK/NG選択(1:OK)
ORL
ANB L1                   ; 強制OKｺﾝﾍﾞﾔ排出ON(ONでOK排出)
ANL
MOV K2 D5203             ; ST2_書込結果(1=OK_2=NG)
LD M5168                 ; U9-3_S8
@INC D5002               ; U13-3自動運転ｽﾃｯﾌﾟ
LD M5169                 ; U9-3_S9
@INC D5002               ; U13-3自動運転ｽﾃｯﾌﾟ
LD M5170                 ; U9-3_S10
MOV K63 D5002            ; U13-3自動運転ｽﾃｯﾌﾟ
;ｻｲｸﾙ終了
LD M5222                 ; U9-3_S62
OR CR2003                ; 常時OFF
@MOV K63 D5002           ; U13-3自動運転ｽﾃｯﾌﾟ
;<h1/>▽_原点復帰
LD CR2002                ; 常時ON
FMOV K0 M5250 K3         ; STEP0
LDB M5484                ; U9原点復帰中
MOV K0 D5010             ; U13原点復帰ｽﾃｯﾌﾟ
LD M5484                 ; U9原点復帰中
MOV D5010 Z1             ; U13原点復帰ｽﾃｯﾌﾟ
SET M5250:Z1             ; STEP0
;原点復帰ｻｲｸﾙ監視
LD M5484                 ; U9原点復帰中
TMR K900 K200
;原点復帰ステップ開始
LD M5250                 ; STEP0
INC D5010                ; U13原点復帰ｽﾃｯﾌﾟ
LD M5251                 ; STEP1
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
INC D5010                ; U13原点復帰ｽﾃｯﾌﾟ
LD M5252                 ; STEP2
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
INC D5010                ; U13原点復帰ｽﾃｯﾌﾟ
LD M5253                 ; STEP3_上治具上昇指令
MPS
LD T901                  ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
AND T969                 ; ST2上治具上下上昇端
ANL
@MOV K5 D5010            ; U13原点復帰ｽﾃｯﾌﾟ
MPP
LDB T901                 ; 安全光柵OK
ORB M5479                ; U9ｽﾃｯﾌﾟ動作
ANL
INC D5010                ; U13原点復帰ｽﾃｯﾌﾟ
LD M5254                 ; STEP4_上治具上昇停止指令
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
@MOV K3 D5010            ; U13原点復帰ｽﾃｯﾌﾟ
;  基盤受け取り上昇指令　セット状態でなければ、下降指令へ
LD M5255                 ; STEP5_
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
AND M2840                ; Z_搬送高さ(回転可能)
MPS
AND M5403                ; ST2下治具_固定状態
MOV K25 D5010            ; U13原点復帰ｽﾃｯﾌﾟ
MPP
ANB M5403                ; ST2下治具_固定状態
INC D5010                ; U13原点復帰ｽﾃｯﾌﾟ
LD M5275                 ; STEP25_基盤受け取り上昇指令
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
AND T972                 ; ST2下治具基板受取上昇端
MOV K6 D5010             ; U13原点復帰ｽﾃｯﾌﾟ
;　　ﾌｨｸｽﾁｬｰ下降指令&ﾊﾞﾈ下降確認
LD M5256                 ; STEP6_基板受取り下降指令
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
AND T973                 ; ST2下治具基板受取下降端
MPS
LD X1270                 ; ST2Fixture下降確認1
AND X1271                ; ST2Fixture下降確認2
OR= D5107 K0             ; ST4下治具IDｾﾝｻｰ状態
ANL
INC D5010                ; U13原点復帰ｽﾃｯﾌﾟ
MPP
LD<> D5107 K0            ; ST4下治具IDｾﾝｻｰ状態
LDB X1270                ; ST2Fixture下降確認1
ORB X1271                ; ST2Fixture下降確認2
ANL
ANL
@MOV K20 D5010           ; U13原点復帰ｽﾃｯﾌﾟ
LD M5270                 ; STEP20_下治具下降確認NG
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
AND B0128                ; 296)_ST2 下治具下降異常
INC D5010                ; U13原点復帰ｽﾃｯﾌﾟ
LD M5271                 ; STEP21
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
ANB B0128                ; 296)_ST2 下治具下降異常
@MOV K6 D5010            ; U13原点復帰ｽﾃｯﾌﾟ
;　　ﾜｰｸ有無確認
LD M5257                 ; STEP7
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
MPS
ANB M5320                ; ST2下治具基板確認(1/有_0/無)
MOV K10 D5010            ; U13原点復帰ｽﾃｯﾌﾟ
MPP
AND M5320                ; ST2下治具基板確認(1/有_0/無)
INC D5010                ; U13原点復帰ｽﾃｯﾌﾟ
;　　ﾜｰｸ除去要求
LD M5258                 ; STEP8_ST2基板除去要求
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
AND B0340                ; 832)_ST2基板除去要求
INC D5010                ; U13原点復帰ｽﾃｯﾌﾟ
LD M5259                 ; STEP9
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
ANB B0340                ; 832)_ST2基板除去要求
@MOV K47 D5010           ; U13原点復帰ｽﾃｯﾌﾟ
;　ﾜｰｸ無し
LD M5260                 ; STEP10
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
INC D5010                ; U13原点復帰ｽﾃｯﾌﾟ
LD M5261                 ; STEP11_
INC D5010                ; U13原点復帰ｽﾃｯﾌﾟ
LD M5262                 ; STEP12
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
INC D5010                ; U13原点復帰ｽﾃｯﾌﾟ
LD M5263                 ; STEP13
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
INC D5010                ; U13原点復帰ｽﾃｯﾌﾟ
LD M5264                 ; STEP14
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
INC D5010                ; U13原点復帰ｽﾃｯﾌﾟ
LD M5265                 ; STEP15
AND T901                 ; 安全光柵OK
AND M5479                ; U9ｽﾃｯﾌﾟ動作
MPS
AND M5480                ; U9(ST2)原点
@MOV K46 D5010           ; U13原点復帰ｽﾃｯﾌﾟ
MPP
@FMOV K0 D5200 K100      ; ST2_INDEX NO.
LD M5296                 ; STEP46
ANB M82                  ; 原点復帰開始
@MOV K47 D5010           ; U13原点復帰ｽﾃｯﾌﾟ
;<h1/>▽_手動
LD M31                   ; 手動ﾓｰﾄﾞ
AND M32                  ; ﾒｲﾝ手動操作可能条件
ANB M5485                ; U9起動中
ANB M5484                ; U9原点復帰中
MC
;ﾌｨｸｽﾁｬｰ位置決め上下
LD CR2002                ; 常時ON
AND M129                 ; 安全入力OK
AND<> D5101 K0           ; ST4下治具(下治具)ID確定
OUT M5300                ; 下治具位置決め下降_OK
LDP B1180                ; ST2 下治具位置決め上下下降SW
AND M5300                ; 下治具位置決め下降_OK
LD M5301                 ; 下治具位置決め下降指令
ANB M5303                ; 下治具位置決め上昇指令
ORL
OUT M5301                ; 下治具位置決め下降指令
LD CR2002                ; 常時ON
AND T969                 ; ST2上治具上下上昇端
OUT M5302                ; 下治具位置決め上昇_OK
LDP B1181                ; ST2 下治具位置決め上下上昇SW
AND M5302                ; 下治具位置決め上昇_OK
LD M5303                 ; 下治具位置決め上昇指令
ANB M5301                ; 下治具位置決め下降指令
ORL
OUT M5303                ; 下治具位置決め上昇指令
;ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決め上下
LD CR2002                ; 常時ON
AND M129                 ; 安全入力OK
AND<> D5100 K0           ; ST4_上治具iD確定
OUT M5304                ; 上治具位置決め_LOCK起動OK
LDP B1182                ; ST2 上治具位置決め上昇SW
AND M5304                ; 上治具位置決め_LOCK起動OK
LD M5305                 ; 上治具位置決め_LOCK指令
ANB M5307                ; 上治具位置決め_unlo指令
ORL
OUT M5305                ; 上治具位置決め_LOCK指令
LD CR2002                ; 常時ON
AND T969                 ; ST2上治具上下上昇端
OUT M5306                ; 上治具位置決め_unlo起動OK
LDP B1183                ; ST2 上治具位置決め下降SW
AND M5306                ; 上治具位置決め_unlo起動OK
LD M5307                 ; 上治具位置決め_unlo指令
ANB M5305                ; 上治具位置決め_LOCK指令
ORL
OUT M5307                ; 上治具位置決め_unlo指令
;ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上下
LD CR2002                ; 常時ON
AND M129                 ; 安全入力OK
AND M2732                ; ﾕﾆｯﾄ1-3_RCX240起動条件
AND M2801                ; RCX240動作完了
ANB M2822                ; XY_ﾍｯﾄﾞ1ST1ﾜｰｸ置き位置
ANB M2824                ; XY_ﾍｯﾄﾞ1ST2ﾜｰｸ置き位置
AND T973                 ; ST2下治具基板受取下降端
LD X1270                 ; ST2Fixture下降確認1
AND X1271                ; ST2Fixture下降確認2
OR X126F                 ; ST2Fixture在荷確認（ON無）
ANL
ANB X1044                ; #02_44_RBがST1内にいる(領域判定)
AND M2808                ; Y軸_ﾌﾗｯｼｭ不干渉位置(RB領域判定)
LD M5403                 ; ST2下治具_固定状態
OR X126F                 ; ST2Fixture在荷確認（ON無）
ANL
ANB B0128                ; 296)_ST2 下治具下降異常
LD X1273                 ; ST2Fixture基板浮き確認1
AND X1274                ; ST2Fixture基板浮き確認2
OR X126F                 ; ST2Fixture在荷確認（ON無）
ANL
OUT M5308                ; 上治具下降_OK
LDP B1184                ; ST2 上治具下降SW（MNU）
ORP M164                 ; ﾁｬｯｸSWﾓｰﾄﾞ2_ST2Buﾎﾞｰﾄﾞ下降SW
ORP B118C                ; ST2 上治具下降SW（ALT）
ANB B1185                ; ST2 上治具上昇SW
AND M5308                ; 上治具下降_OK
ANB M5309                ; 上治具下降指令
LD M5309                 ; 上治具下降指令
ANB M5311                ; 上治具上昇指令
ORL
ANB M5319                ; 上治具下降指令off
AND X04                  ; 書込み部ﾗｲﾄｶｰﾃﾝOUT1
AND X02                  ; 安全扉正常
ANB B0320                ; 800)_安全扉開
OUT M5309                ; 上治具下降指令
;　モーメンタリー仕様
LDP M5309                ; 上治具下降指令
LD B1184                 ; ST2 上治具下降SW（MNU）
OR M164                  ; ﾁｬｯｸSWﾓｰﾄﾞ2_ST2Buﾎﾞｰﾄﾞ下降SW
ANL
OR M5318                 ; 上治具下降ﾓｰﾒﾝﾀﾘ記憶
AND M5309                ; 上治具下降指令
OUT M5318                ; 上治具下降ﾓｰﾒﾝﾀﾘ記憶
LD M5318                 ; 上治具下降ﾓｰﾒﾝﾀﾘ記憶
ANB B1184                ; ST2 上治具下降SW（MNU）
ANB M164                 ; ﾁｬｯｸSWﾓｰﾄﾞ2_ST2Buﾎﾞｰﾄﾞ下降SW
OUT M5319                ; 上治具下降指令off
LD CR2002                ; 常時ON
ANB W02.1                ; ｽﾃｰｼﾞ状態#2(1_書込み中)
OUT M5310                ; 上治具上昇_OK
LDP B1185                ; ST2 上治具上昇SW
ORP M163                 ; ﾁｬｯｸSWﾓｰﾄﾞ2_ST2Buﾎﾞｰﾄﾞ上昇SW
ANB B1184                ; ST2 上治具下降SW（MNU）
ANB B118C                ; ST2 上治具下降SW（ALT）
AND M5310                ; 上治具上昇_OK
LD M5311                 ; 上治具上昇指令
ANB M5309                ; 上治具下降指令
ORL
AND X04                  ; 書込み部ﾗｲﾄｶｰﾃﾝOUT1
AND X02                  ; 安全扉正常
ANB B0320                ; 800)_安全扉開
OUT M5311                ; 上治具上昇指令
;基板受取り上下
LD CR2002                ; 常時ON
AND M129                 ; 安全入力OK
AND T969                 ; ST2上治具上下上昇端
LD<> D5107 K0            ; ST4下治具IDｾﾝｻｰ状態
AND T960                 ; ST2Fixture位置決め固定端
AND T962                 ; ST2Fixture位置決め固定端
OR X126F                 ; ST2Fixture在荷確認（ON無）
ANL
OUT M5312                ; 基板受取り上昇_OK
LDP B1186                ; ST2 基板受取り上昇SW
AND M5312                ; 基板受取り上昇_OK
LD M5313                 ; 基板受取り上昇指令
ANB M5315                ; 基板受取り下降指令
ORL
OUT M5313                ; 基板受取り上昇指令
LD CR2002                ; 常時ON
OUT M5314                ; 基板受取り下降_OK
LDP B1187                ; ST2 基板受取り下降SW
AND M5314                ; 基板受取り下降_OK
LD M5315                 ; 基板受取り下降指令
ANB M5313                ; 基板受取り上昇指令
ORL
OUT M5315                ; 基板受取り下降指令
MCR
LD M31                   ; 手動ﾓｰﾄﾞ
ANB M5485                ; U9起動中
ANB M5484                ; U9原点復帰中
MC
LDP B1188                ; ST2 IGP 1-1 Power ON SW
OR M5316                 ; IGP_1-1_Power_ON
ANB B1189                ; ST2 IGP 1-1 Power OFF SW
MPS
OUT M5316                ; IGP_1-1_Power_ON
MPP
LD CR2006                ; 1sｸﾛｯｸﾊﾟﾙｽ
OR X1600                 ; ST2ﾌｨｸﾁｬｰ1_電源入り確認
ANL
OUT B1688                ; ST2 IGP 1-1 Power ON PL
LDB M5316                ; IGP_1-1_Power_ON
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
ORB X1600                ; ST2ﾌｨｸﾁｬｰ1_電源入り確認
OUT B1689                ; ST2 IGP 1-1 Power OFF PL
LDP B118A                ; ST2 IGP 1-2 Power ON SW
OR M5317                 ; IGP_1-2_Power_ON
ANB B118B                ; ST2 IGP 1-2 Power Off SW
MPS
OUT M5317                ; IGP_1-2_Power_ON
MPP
LD CR2006                ; 1sｸﾛｯｸﾊﾟﾙｽ
OR X1601                 ; ST2ﾌｨｸﾁｬｰ2_電源入り確認
ANL
OUT B168A                ; ST2 IGP 1-2 Power ON PL
LDB M5317                ; IGP_1-2_Power_ON
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
ORB X1601                ; ST2ﾌｨｸﾁｬｰ2_電源入り確認
ANB M9                   ; 後で検索(KCSTへ)
OUT B168B                ; ST2 IGP 1-2 Power Off PL
MCR
;<h1/>▽_出力
;SOL
LD Y2426                 ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上下下降
OR Y2427                 ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上下上昇
TMR K950 K0              ; ﾌﾞﾚｰｷ解除遅れ時間
LD T950                  ; ﾌﾞﾚｰｷ解除遅れ時間
LD X04                   ; 書込み部ﾗｲﾄｶｰﾃﾝOUT1
OR X1268                 ; ST2BackupBoard上下下降端
OR X1269                 ; ST2BackupBoard上下上昇端
ANL
AND M50                  ; 運転準備
OUT Y2424                ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上下ﾌﾞﾚｰｷ解除
LD CR2003                ; 常時OFF
OUT Y217E                ; ST2ﾊﾞｯｸｱｯﾌﾟ上昇速度切替（ON低）
LD Y2426                 ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上下下降
OR L910                  ; 上治具下降記憶
ANB L916                 ; 中間位置ON記憶
ANB T969                 ; ST2上治具上下上昇端
OUT L910                 ; 上治具下降記憶
LD M5450                 ; ST2上治具上下減速位置受け
OR L911                  ; 上治具減速位置記憶
AND L910                 ; 上治具下降記憶
OUT L911                 ; 上治具減速位置記憶
LD L911                  ; 上治具減速位置記憶
ANB Y2427                ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上下上昇
OUT Y217F                ; ST2ﾊﾞｯｸｱｯﾌﾟ下降時速度切替(ON低)
LD Y2427                 ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上下上昇
OR L915                  ; 上治具上昇記憶
AND L910                 ; 上治具下降記憶
OUT L915                 ; 上治具上昇記憶
LD L915                  ; 上治具上昇記憶
AND M5450                ; ST2上治具上下減速位置受け
OR L916                  ; 中間位置ON記憶
AND L910                 ; 上治具下降記憶
OUT L916                 ; 中間位置ON記憶
LDP M5301                ; 下治具位置決め下降指令
AND M5300                ; 下治具位置決め下降_OK
ORP M5405                ; ST2下治具LOCK指令
LD Y2420                 ; ST2ﾌｨｸｽﾁｬｰ位置決下降
ANB Y2421                ; ST2ﾌｨｸｽﾁｬｰ位置決上昇
ORL
AND M50                  ; 運転準備
OUT Y2420                ; ST2ﾌｨｸｽﾁｬｰ位置決下降
LDP M5303                ; 下治具位置決め上昇指令
AND M5302                ; 下治具位置決め上昇_OK
ORP M5407                ; ST2_下治具UNLOCK指令
LD Y2421                 ; ST2ﾌｨｸｽﾁｬｰ位置決上昇
ANB Y2420                ; ST2ﾌｨｸｽﾁｬｰ位置決下降
ORL
AND M50                  ; 運転準備
OUT Y2421                ; ST2ﾌｨｸｽﾁｬｰ位置決上昇
LDP M5305                ; 上治具位置決め_LOCK指令
AND M5304                ; 上治具位置決め_LOCK起動OK
ORP M5402                ; ST2_上治具LOCK指令
LD Y2422                 ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決下降
ANB Y2423                ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決上昇
ORL
AND M50                  ; 運転準備
OUT Y2422                ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決下降
LDP M5307                ; 上治具位置決め_unlo指令
AND M5306                ; 上治具位置決め_unlo起動OK
ORP M5404                ; ST2上治具UNLOCK指令
LD Y2423                 ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決上昇
ANB Y2422                ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決下降
ORL
AND M50                  ; 運転準備
OUT Y2423                ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決上昇
LDP M5309                ; 上治具下降指令
AND M5308                ; 上治具下降_OK
LDB M5011                ; U9-1_S11_上治具下降指令
ANB M5012                ; U9-1_S12_上治具下降指令
ANB M5055                ; U9-1_S55_ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ下降指令
INV
ANB X1044                ; #02_44_RBがST1内にいる(領域判定)
AND M2808                ; Y軸_ﾌﾗｯｼｭ不干渉位置(RB領域判定)
ORL
LD Y2426                 ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上下下降
ANB Y2427                ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上下上昇
ANB M5014                ; U9-1_S14_上治具下降指令停止
ORL
AND M50                  ; 運転準備
LD X04                   ; 書込み部ﾗｲﾄｶｰﾃﾝOUT1
AND X02                  ; 安全扉正常
ANB B0320                ; 800)_安全扉開
ANB M5319                ; 上治具下降指令off
OR X1268                 ; ST2BackupBoard上下下降端
ANL
OUT Y2426                ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上下下降
LDP M5311                ; 上治具上昇指令
AND M5310                ; 上治具上昇_OK
LDB M5013                ; U9-1_S13_ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上昇
ANB M5024                ; U9-1_S24_上治具上昇指令
ANB M5253                ; STEP3_上治具上昇指令
ANB M5056                ; U9-1_S56_ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上昇指令
INV
ORL
LD Y2427                 ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上下上昇
ANB Y2426                ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上下下降
ANB M5025                ; U9-1_S25_上治具上昇停止
ANB M5254                ; STEP4_上治具上昇停止指令
ORL
AND M50                  ; 運転準備
LD X04                   ; 書込み部ﾗｲﾄｶｰﾃﾝOUT1
AND X02                  ; 安全扉正常
ANB B0320                ; 800)_安全扉開
OR X1269                 ; ST2BackupBoard上下上昇端
ANL
OUT Y2427                ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上下上昇
LD M5313                 ; 基板受取り上昇指令
AND M5312                ; 基板受取り上昇_OK
LDB M5461                ; ST2_基板受取り上昇指令(先行動作)
ANB M5026                ; U9-1_S26_基板受取りCL上昇指令
ANB M5275                ; STEP25_基盤受け取り上昇指令
INV
ORL
LD Y2428                 ; 基板ﾊﾞｯｸｱｯﾌﾟST2基板受取上下上昇
ANB Y2429                ; 基板ﾊﾞｯｸｱｯﾌﾟST2基板受取上下下降
ORL
AND M50                  ; 運転準備
OUT Y2428                ; 基板ﾊﾞｯｸｱｯﾌﾟST2基板受取上下上昇
LD M5315                 ; 基板受取り下降指令
AND M5314                ; 基板受取り下降_OK
LDB M5033                ; U9-1_S33_下治具下降指令
ANB M5011                ; U9-1_S11_上治具下降指令
ANB M5256                ; STEP6_基板受取り下降指令
INV
ORL
OR M5460                 ; ST2_基板受取り下降指令
LD Y2429                 ; 基板ﾊﾞｯｸｱｯﾌﾟST2基板受取上下下降
ANB Y2428                ; 基板ﾊﾞｯｸｱｯﾌﾟST2基板受取上下上昇
ORL
AND M50                  ; 運転準備
OUT Y2429                ; 基板ﾊﾞｯｸｱｯﾌﾟST2基板受取上下下降
;■ﾗﾝﾌﾟ表示
LD T964                  ; ST2BackupBoard位置決め固定端
AND T966                 ; ST2BackupBoard位置決め固定端
LD<> D5106 K0            ; ST4上治具IDｾﾝｻｰ状態
AND T1                   ; 0.3Secｸﾛｯｸ
ORL
OUT Y2178                ; ST2上治具ﾛｯｸ･ｱﾝﾛｯｸ表示
LD T960                  ; ST2Fixture位置決め固定端
AND T962                 ; ST2Fixture位置決め固定端
LD<> D5107 K0            ; ST4下治具IDｾﾝｻｰ状態
AND T1                   ; 0.3Secｸﾛｯｸ
ORL
OUT Y2179                ; ST2下治具ﾛｯｸ･ｱﾝﾛｯｸ表示
LD M5409                 ; ST無効予約(自動運転)
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
LD L900                  ; ST2_有効状態
ANB M5409                ; ST無効予約(自動運転)
ORL
OUT Y217A                ; ST2有効･無効表示
;■その他制御出力
;PC_I/O
LD W03.10                ; IGP ON指示#1-1
OR M5316                 ; IGP_1-1_Power_ON
OUT Y2608                ; ST2_Fixture1電源ON
LD W03.11                ; IGP ON指示#2-2
OR M5317                 ; IGP_1-2_Power_ON
OUT Y2609                ; ST2_Fixture2電源ON
LD Y2608                 ; ST2_Fixture1電源ON
MPS
TMR K905 K2              ; ST2下治具基板1電源ONﾀｲﾏ
MPP
AND T905                 ; ST2下治具基板1電源ONﾀｲﾏ
OUT W0103.10             ; IGP ON状態#2-1
LD Y2609                 ; ST2_Fixture2電源ON
MPS
TMR K906 K2              ; ST2下治具基板2電源ONﾀｲﾏ
MPP
AND T906                 ; ST2下治具基板2電源ONﾀｲﾏ
OUT W0103.11             ; IGP ON状態#2-2
;□□　　パネル表示　　□□
LD Y2420                 ; ST2ﾌｨｸｽﾁｬｰ位置決下降
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
LD T960                  ; ST2Fixture位置決め固定端
AND T962                 ; ST2Fixture位置決め固定端
ORL
OUT B1680                ; ST2 下治具位置決め上下下降PL
LD Y2421                 ; ST2ﾌｨｸｽﾁｬｰ位置決上昇
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
LD T961                  ; ST2Fixture位置決め解除端
AND T963                 ; ST2Fixture位置決め解除端
ORL
OUT B1681                ; ST2 下治具位置決め上下上昇PL
LD Y2422                 ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決下降
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
LD T964                  ; ST2BackupBoard位置決め固定端
AND T966                 ; ST2BackupBoard位置決め固定端
ORL
OUT B1682                ; ST2 上治具位置決め上昇PL
LD Y2423                 ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決上昇
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
LD T965                  ; ST2BackupBoard位置決め解除端
AND T967                 ; ST2BackupBoard位置決め解除端
ORL
OUT B1683                ; ST2 上治具位置決め下降PL
LD Y2426                 ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上下下降
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR T968                  ; ST2上治具上下下降端
OUT B1684                ; ST2 上治具下降PL（MNU）
LD Y2427                 ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上下上昇
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR T969                  ; ST2上治具上下上昇端
OUT B1685                ; ST2 上治具上昇PL
LD Y2428                 ; 基板ﾊﾞｯｸｱｯﾌﾟST2基板受取上下上昇
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR T972                  ; ST2下治具基板受取上昇端
OUT B1686                ; ST2 基板受取り上昇PL
LD Y2429                 ; 基板ﾊﾞｯｸｱｯﾌﾟST2基板受取上下下降
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR T973                  ; ST2下治具基板受取下降端
OUT B1687                ; ST2 基板受取り下降PL
LD M5234                 ; U9-3_Flash検査起動中
AND M3                   ; OFFLINE_MODE
OR W02.1                 ; ｽﾃｰｼﾞ状態#2(1_書込み中)
OUT B1690                ; ST2 
LD Y217A                 ; ST2有効･無効表示
OUT B1691                ; ST2 有効･無効選択PL
;<h1/>▽_異常
LD Y2420                 ; ST2ﾌｨｸｽﾁｬｰ位置決下降
LDB T960                 ; ST2Fixture位置決め固定端
ORB T962                 ; ST2Fixture位置決め固定端
ANL
LD Y2421                 ; ST2ﾌｨｸｽﾁｬｰ位置決上昇
LDB T961                 ; ST2Fixture位置決め解除端
ORB T963                 ; ST2Fixture位置決め解除端
ANL
ORL
LD T960                  ; ST2Fixture位置決め固定端
AND T961                 ; ST2Fixture位置決め解除端
ORL
LD T962                  ; ST2Fixture位置決め固定端
AND T963                 ; ST2Fixture位置決め解除端
ORL
LD CR2003                ; 常時OFF
ANB B0620                ; 288)_Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0120                ; 288)_ST2 下治具位置決CL異常
ORL
MPS
AND T990                 ; CLSﾀｲﾑｱｳﾄ
OUT B0120                ; 288)_ST2 下治具位置決CL異常
MPP
TMR K990 K50             ; CLSﾀｲﾑｱｳﾄ
LDP B0120                ; 288)_ST2 下治具位置決CL異常
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K288 D13500          ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0620                 ; 288)_Bz停止
AND B0120                ; 288)_ST2 下治具位置決CL異常
OUT B0620                ; 288)_Bz停止
;
LD Y2422                 ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決下降
LDB T964                 ; ST2BackupBoard位置決め固定端
ORB T966                 ; ST2BackupBoard位置決め固定端
ANL
LD Y2423                 ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ位置決上昇
LDB T965                 ; ST2BackupBoard位置決め解除端
ORB T967                 ; ST2BackupBoard位置決め解除端
ANL
ORL
LD T964                  ; ST2BackupBoard位置決め固定端
AND T965                 ; ST2BackupBoard位置決め解除端
ORL
LD T966                  ; ST2BackupBoard位置決め固定端
AND T967                 ; ST2BackupBoard位置決め解除端
ORL
LD CR2003                ; 常時OFF
ANB B0621                ; 289)_Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0121                ; 289)_ST2 上治具位置決CL異常
ORL
MPS
AND T991                 ; CLSﾀｲﾑｱｳﾄ
OUT B0121                ; 289)_ST2 上治具位置決CL異常
MPP
TMR K991 K50             ; CLSﾀｲﾑｱｳﾄ
LDP B0121                ; 289)_ST2 上治具位置決CL異常
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K289 D13500          ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0621                 ; 289)_Bz停止
AND B0121                ; 289)_ST2 上治具位置決CL異常
OUT B0621                ; 289)_Bz停止
LD M5005                 ; U9-1_S5_基板受取り異常
LD CR2003                ; 常時OFF
ANB B0622                ; 290)_Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0122                ; 290)_ST2 基板受取り異常
ORL
OUT B0122                ; 290)_ST2 基板受取り異常
LDP B0122                ; 290)_ST2 基板受取り異常
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K290 D13500          ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0622                 ; 290)_Bz停止
AND B0122                ; 290)_ST2 基板受取り異常
OUT B0622                ; 290)_Bz停止
;
LD Y2428                 ; 基板ﾊﾞｯｸｱｯﾌﾟST2基板受取上下上昇
ANB T972                 ; ST2下治具基板受取上昇端
LD Y2429                 ; 基板ﾊﾞｯｸｱｯﾌﾟST2基板受取上下下降
ANB T973                 ; ST2下治具基板受取下降端
ORL
LD T972                  ; ST2下治具基板受取上昇端
AND T973                 ; ST2下治具基板受取下降端
ORL
LD CR2003                ; 常時OFF
ANB B0623                ; 291)_Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0123                ; 291)_ST2 基板受渡上下CLS異常
ORL
MPS
AND T995                 ; CLﾀｲﾏｱｳﾄ
OUT B0123                ; 291)_ST2 基板受渡上下CLS異常
MPP
TMR K995 K50             ; CLﾀｲﾏｱｳﾄ
LDP B0123                ; 291)_ST2 基板受渡上下CLS異常
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K291 D13500          ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0623                 ; 291)_Bz停止
AND B0123                ; 291)_ST2 基板受渡上下CLS異常
OUT B0623                ; 291)_Bz停止
;
LD Y2426                 ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上下下降
ANB T968                 ; ST2上治具上下下降端
LD Y2427                 ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上下上昇
ANB T969                 ; ST2上治具上下上昇端
ORL
LD T968                  ; ST2上治具上下下降端
AND T969                 ; ST2上治具上下上昇端
ORL
ANB B0124                ; 292)_ST2 上治具上下CLS異常
LD CR2003                ; 常時OFF
ANB B0624                ; 292)_Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0124                ; 292)_ST2 上治具上下CLS異常
ORL
MPS
AND T992                 ; CLSﾀｲﾑｱｳﾄ
OUT B0124                ; 292)_ST2 上治具上下CLS異常
MPP
LDPB Y2426               ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上下下降
ANPB Y2427               ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上下上昇
ANL
TMR K992 K70             ; CLSﾀｲﾑｱｳﾄ
LDP B0124                ; 292)_ST2 上治具上下CLS異常
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K292 D13500          ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0624                 ; 292)_Bz停止
AND B0124                ; 292)_ST2 上治具上下CLS異常
OUT B0624                ; 292)_Bz停止
;FLASH基板1ｻｰｷｯﾄﾄﾘｯﾌﾟ異常
LDB X1600                ; ST2ﾌｨｸﾁｬｰ1_電源入り確認
AND Y2608                ; ST2_Fixture1電源ON
LD CR2003                ; 常時OFF
ANB B0625                ; 293)_Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0125                ; 293)_ST2 基板1CP Trip異常
ORL
MPS
AND T993                 ; FLASH電源OFF異常
OUT B0125                ; 293)_ST2 基板1CP Trip異常
MPP
TMR K993 K10             ; FLASH電源OFF異常
LDP B0125                ; 293)_ST2 基板1CP Trip異常
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K1293 D13500         ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0625                 ; 293)_Bz停止
AND B0125                ; 293)_ST2 基板1CP Trip異常
OUT B0625                ; 293)_Bz停止
;FLASH基板2ｻｰｷｯﾄﾄﾘｯﾌﾟ異常
;
LDB X1601                ; ST2ﾌｨｸﾁｬｰ2_電源入り確認
AND Y2609                ; ST2_Fixture2電源ON
LD CR2003                ; 常時OFF
ANB B0626                ; 294)_Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0126                ; 294)_ST2 基板2CP Trip異常
ORL
MPS
AND T994                 ; FLASH電源OFF異常
OUT B0126                ; 294)_ST2 基板2CP Trip異常
MPP
TMR K994 K10             ; FLASH電源OFF異常
LDP B0126                ; 294)_ST2 基板2CP Trip異常
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K1294 D13500         ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0626                 ; 294)_Bz停止
AND B0126                ; 294)_ST2 基板2CP Trip異常
OUT B0626                ; 294)_Bz停止
;　
LD M5037                 ; U9-1_S37_基盤残り異常
LD CR2003                ; 常時OFF
ANB B0627                ; 295)_Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0127                ; 295)_ST2 基盤受渡し異常
ORL
OUT B0127                ; 295)_ST2 基盤受渡し異常
LDP B0127                ; 295)_ST2 基盤受渡し異常
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K1295 D13500         ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0627                 ; 295)_Bz停止
AND B0127                ; 295)_ST2 基盤受渡し異常
OUT B0627                ; 295)_Bz停止
;下治具下降異常
LDB M5270                ; STEP20_下治具下降確認NG
ANB M5034                ; U9-1_S34_下治具下降異常
INV
LD M5403                 ; ST2下治具_固定状態
AND T973                 ; ST2下治具基板受取下降端
AND<> D5101 K0           ; ST4下治具(下治具)ID確定
LDB X1270                ; ST2Fixture下降確認1
ORB X1271                ; ST2Fixture下降確認2
ANL
ORL
LD CR2003                ; 常時OFF
ANB B0628                ; 296)_Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0128                ; 296)_ST2 下治具下降異常
ORL
OUT B0128                ; 296)_ST2 下治具下降異常
LDP B0128                ; 296)_ST2 下治具下降異常
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K296 D13500          ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0628                 ; 296)_Bz停止
AND B0128                ; 296)_ST2 下治具下降異常
OUT B0628                ; 296)_Bz停止
;
LD M5041                 ; U9-1_S41_基板浮き異常
LD CR2003                ; 常時OFF
ANB B0629                ; 297)_Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0129                ; 297)_ST2 基板浮き検出異常
ORL
OUT B0129                ; 297)_ST2 基板浮き検出異常
LDP B0129                ; 297)_ST2 基板浮き検出異常
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K1297 D13500         ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0629                 ; 297)_Bz停止
AND B0129                ; 297)_ST2 基板浮き検出異常
OUT B0629                ; 297)_Bz停止
;　　ﾌﾗｯｼｭ上治具ID異常
LD L900                  ; ST2_有効状態
AND T904                 ; 安全光柵OK遅い番
AND Y2427                ; ST2ﾊﾞｯｸｱｯﾌﾟﾎﾞｰﾄﾞ上下上昇
AND T969                 ; ST2上治具上下上昇端
AND T926                 ; 上治具_ID_更新_DLY
AND<> D5100 D5106        ; ST4_上治具iD確定  ST4上治具IDｾﾝｻｰ状態
LD CR2003                ; 常時OFF
ANB B062A                ; 298)_Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B012A                ; 298)_ST2 上治具ID異常
ORL
OUT B012A                ; 298)_ST2 上治具ID異常
LDP B012A                ; 298)_ST2 上治具ID異常
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K1298 D13500         ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B062A                 ; 298)_Bz停止
AND B012A                ; 298)_ST2 上治具ID異常
OUT B062A                ; 298)_Bz停止
;　　
LD L900                  ; ST2_有効状態
AND T927                 ; 下治具_ID_更新_DLY
AND<> D5101 D5107        ; ST4下治具(下治具)ID確定  ST4下治具IDｾﾝｻｰ状態
LD CR2003                ; 常時OFF
ANB B062B                ; 299)_Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B012B                ; 299)_ST2 下治具ID異常
ORL
OUT B012B                ; 299)_ST2 下治具ID異常
LDP B012B                ; 299)_ST2 下治具ID異常
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K1299 D13500         ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B062B                 ; 299)_Bz停止
AND B012B                ; 299)_ST2 下治具ID異常
OUT B062B                ; 299)_Bz停止
;ﾌﾗｯｼｭﾜｰｸｾﾝｻｰ検知異常
LD M71                   ; 自動運転開始BZ
LD T901                  ; 安全光柵OK
ANB D5201.0
AND M5320                ; ST2下治具基板確認(1/有_0/無)
ANB M1716                ; U2_S216_ﾜｰｸをstへ置き中
ANB M1717                ; U2_S217_ﾍｯﾄﾞ1ﾁｬｯｸ開指令
ANB M1718                ; U2_S218_ﾃﾞｰﾀｼﾌﾄ
AND T973                 ; ST2下治具基板受取下降端
LD D5201.0
ANB M5320                ; ST2下治具基板確認(1/有_0/無)
ANB M2023                ; U2-S523_F搬送位置上昇中
ANB M2024                ; U2-S524_基板受下降指令&ﾃﾞｰﾀｼﾌﾄ
AND T973                 ; ST2下治具基板受取下降端
ORL
ANL
LD CR2003                ; 常時OFF
ANB B062C                ; 300)_Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B012C                ; 300)_ST2 基板検知異常
ORL
ANB M35                  ; 空運転ﾓｰﾄﾞ
OUT B012C                ; 300)_ST2 基板検知異常
LDP B012C                ; 300)_ST2 基板検知異常
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K1300 D13500         ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B062C                 ; 300)_Bz停止
AND B012C                ; 300)_ST2 基板検知異常
OUT B062C                ; 300)_Bz停止
;　　ﾌﾗｯｼｭSTﾜｰｸ除去要求
LD M5258                 ; STEP8_ST2基板除去要求
LD CR2003                ; 常時OFF
ANB B0840                ; 832)_Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0340                ; 832)_ST2基板除去要求
ORL
OUT B0340                ; 832)_ST2基板除去要求
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0840                 ; 832)_Bz停止
AND B0340                ; 832)_ST2基板除去要求
OUT B0840                ; 832)_Bz停止
;　　ﾌﾗｯｼｭSTｶｷｺﾐ中
LD W02.1                 ; ｽﾃｰｼﾞ状態#2(1_書込み中)
AND M31                  ; 手動ﾓｰﾄﾞ
ANP M17                  ; 原点復帰PB
LD CR2003                ; 常時OFF
ANB B0841                ; 833)_Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0341                ; 833)_ST2ROM書込み中
ORL
OUT B0341                ; 833)_ST2ROM書込み中
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0841                 ; 833)_Bz停止
AND B0341                ; 833)_ST2ROM書込み中
OUT B0841                ; 833)_Bz停止
;　　
LDB M5440                ; 有効時下治具ｺﾈｸﾀ挿入確認NG
ANB M5050                ; U9-1_S50_ST2_ｺﾈｸﾀ挿入確認
INV
LD CR2003                ; 常時OFF
ANB B0842                ; 834)_Bz停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0342                ; 834)_ST2下治具ｺﾈｸﾀ挿入確認
ORL
OUT B0342                ; 834)_ST2下治具ｺﾈｸﾀ挿入確認
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0842                 ; 834)_Bz停止
AND B0342                ; 834)_ST2下治具ｺﾈｸﾀ挿入確認
OUT B0842                ; 834)_Bz停止
;異常ﾌﾞｻﾞｰまとめ
LDB B0120                ; 288)_ST2 下治具位置決CL異常
OR B0620                 ; 288)_Bz停止
LDB B0121                ; 289)_ST2 上治具位置決CL異常
OR B0621                 ; 289)_Bz停止
ANL
LDB B0122                ; 290)_ST2 基板受取り異常
OR B0622                 ; 290)_Bz停止
ANL
LDB B0123                ; 291)_ST2 基板受渡上下CLS異常
OR B0623                 ; 291)_Bz停止
ANL
LDB B0124                ; 292)_ST2 上治具上下CLS異常
OR B0624                 ; 292)_Bz停止
ANL
LDB B0125                ; 293)_ST2 基板1CP Trip異常
OR B0625                 ; 293)_Bz停止
ANL
LDB B0126                ; 294)_ST2 基板2CP Trip異常
OR B0626                 ; 294)_Bz停止
ANL
LDB B0127                ; 295)_ST2 基盤受渡し異常
OR B0627                 ; 295)_Bz停止
ANL
LDB B0128                ; 296)_ST2 下治具下降異常
OR B0628                 ; 296)_Bz停止
ANL
LDB B0129                ; 297)_ST2 基板浮き検出異常
OR B0629                 ; 297)_Bz停止
ANL
LDB B012A                ; 298)_ST2 上治具ID異常
OR B062A                 ; 298)_Bz停止
ANL
LDB B012B                ; 299)_ST2 下治具ID異常
OR B062B                 ; 299)_Bz停止
ANL
LDB B012C                ; 300)_ST2 基板検知異常
OR B062C                 ; 300)_Bz停止
ANL
LDB B012D                ; 301)
OR B062D                 ; 301)_Bz停止
ANL
LDB B012E                ; 302)
OR B062E                 ; 302)_Bz停止
ANL
LDB B012F                ; 303)
OR B062F                 ; 303)_Bz停止
ANL
LDB B0130                ; 304)
OR B0630                 ; 304)_Bz停止
ANL
LDB B0131                ; 305)
OR B0631                 ; 305)_Bz停止
ANL
LDB B0132                ; 306)
OR B0632                 ; 306)_Bz停止
ANL
LDB B0133                ; 307)
OR B0633                 ; 307)_Bz停止
ANL
LDB B0134                ; 308)
OR B0634                 ; 308)_Bz停止
ANL
LDB B0135                ; 309)
OR B0635                 ; 309)_Bz停止
ANL
LDB B0136                ; 310)
OR B0636                 ; 310)_Bz停止
ANL
LDB B0137                ; 311)
OR B0637                 ; 311)_Bz停止
ANL
LDB B0138                ; 312)
OR B0638                 ; 312)_Bz停止
ANL
LDB B0139                ; 313)
OR B0639                 ; 313)_Bz停止
ANL
LDB B013A                ; 314)
OR B063A                 ; 314)_Bz停止
ANL
LDB B013B                ; 315)
OR B063B                 ; 315)_Bz停止
ANL
LDB B013C                ; 316)
OR B063C                 ; 316)_Bz停止
ANL
LDB B013D                ; 317)
OR B063D                 ; 317)_Bz停止
ANL
LDB B013E                ; 318)
OR B063E                 ; 318)_Bz停止
ANL
LDB B013F                ; 319)
OR B063F                 ; 319)_Bz停止
ANL
LDB B0340                ; 832)_ST2基板除去要求
OR B0840                 ; 832)_Bz停止
ANL
LDB B0341                ; 833)_ST2ROM書込み中
OR B0841                 ; 833)_Bz停止
ANL
LDB B0342                ; 834)_ST2下治具ｺﾈｸﾀ挿入確認
OR B0842                 ; 834)_Bz停止
ANL
INV
OUT M5489                ; U9異常BZ補助
END
ENDH
