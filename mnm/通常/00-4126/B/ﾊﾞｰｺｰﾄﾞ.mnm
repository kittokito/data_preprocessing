DEVICE:53
;MODULE:ﾊﾞｰｺｰﾄﾞ
;MODULE_TYPE:0
;入力
LD CR2002                ; 常時ON
MPS
AND R37100               ; ｼﾘｱﾙ通信  Port2 動作許可
OUT MR56400              ; ｼﾘｱﾙ通信  Port2動作許可
MRD
AND R36500               ; ｼﾘｱﾙ通信  Port2 受信読出要求1
OUT MR56401              ; ｼﾘｱﾙ通信  Port2 受信読出要求1
MRD
AND R35900               ; ｼﾘｱﾙ通信  Port2 受信照合1
OUT MR56402              ; ｼﾘｱﾙ通信  Port2 受信照合1
MPP
LDB R37102               ; ｼﾘｱﾙ通信Port2 受信待ちﾀｲﾑｱｳﾄｴﾗｰ
ANB R37103               ; ｼﾘｱﾙ通信Port2 受信完了ﾀｲﾑｱｳﾄｴﾗｰ
ANB R37104               ; ｼﾘｱﾙ通信Port2 ﾌﾚｰﾐﾝｸﾞｴﾗｰ
ANB R37105               ; ｼﾘｱﾙ通信Port2 ﾊﾟﾘﾃｨｴﾗｰ
ANB R37106               ; ｼﾘｱﾙ通信Port2 ｵｰﾊﾞｰﾗﾝｴﾗｰ
ANB R37107               ; ｼﾘｱﾙ通信Port2 受信ﾌﾞﾛｯｸｴﾗｰ
ANB R37108               ; ｼﾘｱﾙ通信Port2  受信照合不一致
ANB R37109               ; ｼﾘｱﾙ通信Port2 ﾊﾞｯﾌｧｵｰﾊﾞｰﾌﾛｰｴﾗｰ
ANB R37110               ; ｼﾘｱﾙ通信Port2 ﾏｸﾛ実行ｴﾗｰ
ANB R37111               ; ｼﾘｱﾙ通信Port2 ﾏｸﾛﾃﾞｰﾀｴﾗｰ
ANL
INV
OUT MR56403              ; ｼﾘｱﾙ通信Port2 異常まとめ
;異常
LDB MR56602              ; 送りCV ﾊﾟﾚｯﾄﾊﾞｰｺｰﾄﾞ読取値OK
ANP MR56601              ; 送りCVﾊﾟﾚｯﾄ ﾊﾞｰｺｰﾄﾞ受信完了
OR MR56403               ; ｼﾘｱﾙ通信Port2 異常まとめ
OR T1599                 ; 送りCVﾊﾟﾚｯﾄ BCR読取ﾀｲﾑｵｰﾊﾞｰ
LD LR2914                ; <A478>4st ﾊﾟﾚｯﾄ ﾊﾞｰｺｰﾄﾞ読取異常
ANB MR907                ; 異常ﾘｾｯﾄ
ORL
MPS
OUT LR2914               ; <A478>4st ﾊﾟﾚｯﾄ ﾊﾞｰｺｰﾄﾞ読取異常
MPP
ANP LR2914               ; <A478>4st ﾊﾟﾚｯﾄ ﾊﾞｰｺｰﾄﾞ読取異常
MPS
LDB MR56602              ; 送りCV ﾊﾟﾚｯﾄﾊﾞｰｺｰﾄﾞ読取値OK
AND MR56601              ; 送りCVﾊﾟﾚｯﾄ ﾊﾞｰｺｰﾄﾞ受信完了
ANL
MOV #1 W0478             ; <A478>補助ｺｰﾄﾞ
MRD
AND MR56403              ; ｼﾘｱﾙ通信Port2 異常まとめ
MOV #2 W0478             ; <A478>補助ｺｰﾄﾞ
MPP
AND T1599                ; 送りCVﾊﾟﾚｯﾄ BCR読取ﾀｲﾑｵｰﾊﾞｰ
MOV #3 W0478             ; <A478>補助ｺｰﾄﾞ
LDB LR2914               ; <A478>4st ﾊﾟﾚｯﾄ ﾊﾞｰｺｰﾄﾞ読取異常
MOV #0 W0478             ; <A478>補助ｺｰﾄﾞ
;ﾊﾞｰｺｰﾄﾞ読取
LDB MR12510              ; 4st 送りCVBCR読込_Man
ANB MR19201              ; 4st BCR読取指令_AUT
INV
OUT MR56502              ; 送りCVﾊﾟﾚｯﾄ ﾊﾞｰｺｰﾄﾞ読取補助
LDP MR56502              ; 送りCVﾊﾟﾚｯﾄ ﾊﾞｰｺｰﾄﾞ読取補助
AND MR56501              ; 送りCVﾊﾟﾚｯﾄ ﾊﾞｰｺｰﾄﾞ読取可
OR MR56500               ; 送りCVﾊﾟﾚｯﾄ ﾊﾞｰｺｰﾄﾞ読取
AND MR1101               ; 運転準備 完了
ANB MR56509              ; 送りCVﾊﾟﾚｯﾄ ﾊﾞｰｺｰﾄﾞ読取完了
OUT MR56500              ; 送りCVﾊﾟﾚｯﾄ ﾊﾞｰｺｰﾄﾞ読取
LD MR56400               ; ｼﾘｱﾙ通信  Port2動作許可
ANB MR56600              ; 送りCVﾊﾟﾚｯﾄ ﾊﾞｰｺｰﾄﾞ読取
ANB LR2914               ; <A478>4st ﾊﾟﾚｯﾄ ﾊﾞｰｺｰﾄﾞ読取異常
OUT MR56501              ; 送りCVﾊﾟﾚｯﾄ ﾊﾞｰｺｰﾄﾞ読取可
LD MR56500               ; 送りCVﾊﾟﾚｯﾄ ﾊﾞｰｺｰﾄﾞ読取
MC
LD MR56500               ; 送りCVﾊﾟﾚｯﾄ ﾊﾞｰｺｰﾄﾞ読取
OR MR56600               ; 送りCVﾊﾟﾚｯﾄ ﾊﾞｰｺｰﾄﾞ読取
AND MR56500              ; 送りCVﾊﾟﾚｯﾄ ﾊﾞｰｺｰﾄﾞ読取
OUT MR56600              ; 送りCVﾊﾟﾚｯﾄ ﾊﾞｰｺｰﾄﾞ読取
@MOV #0 DM580            ; 送りCVﾊﾟﾚｯﾄ BCR読取値
@MOV #0 DM590            ; ﾊﾞｰｺｰﾄﾞ読取値BIN変換後
@UWRIT #3 #2000 #0 #10
TMR #1599 #50            ; 送りCVﾊﾟﾚｯﾄ BCR読取ﾀｲﾑｵｰﾊﾞｰ
LD MR56401               ; ｼﾘｱﾙ通信  Port2 受信読出要求1
AND MR56402              ; ｼﾘｱﾙ通信  Port2 受信照合1
OR MR56601               ; 送りCVﾊﾟﾚｯﾄ ﾊﾞｰｺｰﾄﾞ受信完了
AND MR56600              ; 送りCVﾊﾟﾚｯﾄ ﾊﾞｰｺｰﾄﾞ読取
OUT MR56601              ; 送りCVﾊﾟﾚｯﾄ ﾊﾞｰｺｰﾄﾞ受信完了
UREAD #3 #2000 DM580 #10 ; 送りCVﾊﾟﾚｯﾄ BCR読取値
MPS
LEN DM580 TM1            ; 送りCVﾊﾟﾚｯﾄ BCR読取値
MPP
AND>= TM1 #3
MPS
LDA TM1
CON
SUB #2
CON
STA TM0
MRD
SLEFT DM580 DM1080 #1    ; 送りCVﾊﾟﾚｯﾄ BCR読取値  送りCVﾊﾟﾚｯﾄ BCR読取値①
MRD
SMID DM580 DM1081 #1 TM0 ; 送りCVﾊﾟﾚｯﾄ BCR読取値  送りCVﾊﾟﾚｯﾄ BCR読取値②
MPP
RDASC DM1081 DM590       ; 送りCVﾊﾟﾚｯﾄ BCR読取値②  ﾊﾞｰｺｰﾄﾞ読取値BIN変換後
LD= DM1080 $4200         ; 送りCVﾊﾟﾚｯﾄ BCR読取値①
AND<= #1 DM590           ; ﾊﾞｰｺｰﾄﾞ読取値BIN変換後
AND<= DM590 #20          ; ﾊﾞｰｺｰﾄﾞ読取値BIN変換後
OUT MR56602              ; 送りCV ﾊﾟﾚｯﾄﾊﾞｰｺｰﾄﾞ読取値OK
LD MR56602               ; 送りCV ﾊﾟﾚｯﾄﾊﾞｰｺｰﾄﾞ読取値OK
OR MR56608               ; 送りCV ﾊﾟﾚｯﾄﾊﾞｰｺｰﾄﾞ読取値完了
AND MR56601              ; 送りCVﾊﾟﾚｯﾄ ﾊﾞｰｺｰﾄﾞ受信完了
OUT MR56608              ; 送りCV ﾊﾟﾚｯﾄﾊﾞｰｺｰﾄﾞ読取値完了
LD LR2914                ; <A478>4st ﾊﾟﾚｯﾄ ﾊﾞｰｺｰﾄﾞ読取異常
OR MR56609               ; 送りCV ﾊﾟﾚｯﾄﾊﾞｰｺｰﾄﾞ読取異常
AND MR56600              ; 送りCVﾊﾟﾚｯﾄ ﾊﾞｰｺｰﾄﾞ読取
OUT MR56609              ; 送りCV ﾊﾟﾚｯﾄﾊﾞｰｺｰﾄﾞ読取異常
LDB MR56502              ; 送りCVﾊﾟﾚｯﾄ ﾊﾞｰｺｰﾄﾞ読取補助
AND MR56608              ; 送りCV ﾊﾟﾚｯﾄﾊﾞｰｺｰﾄﾞ読取値完了
OR MR56609               ; 送りCV ﾊﾟﾚｯﾄﾊﾞｰｺｰﾄﾞ読取異常
OUT MR56509              ; 送りCVﾊﾟﾚｯﾄ ﾊﾞｰｺｰﾄﾞ読取完了
MCR
;ｴﾗｰｸﾘｱ
LDP MR907                ; 異常ﾘｾｯﾄ
ANB MR4000               ; 自動運転
OR MR56615               ; ｼﾘｱﾙ通信  Port2ｴﾗｰｸﾘｱ
AND MR56403              ; ｼﾘｱﾙ通信Port2 異常まとめ
OUT MR56615              ; ｼﾘｱﾙ通信  Port2ｴﾗｰｸﾘｱ
;出力
LD CR2002                ; 常時ON
OUT R35800               ; ｼﾘｱﾙ通信  Port2 動作許可
LD MR56615               ; ｼﾘｱﾙ通信  Port2ｴﾗｰｸﾘｱ
OUT R35801               ; ｼﾘｱﾙ通信  Port2 ｴﾗｰｸﾘｱ
LD MR56600               ; 送りCVﾊﾟﾚｯﾄ ﾊﾞｰｺｰﾄﾞ読取
OUT R35200               ; ｼﾘｱﾙ通信  Port2 ﾏｸﾛ1開始
END
ENDH
