DEVICE:53
;MODULE:画像処理1
;MODULE_TYPE:0
;<h1/>ｶﾒﾗ1 ｽﾃｰﾀA確認  10-15-8-4-20-200
LDP B0535                ; TP5st ｽﾃｰﾀA確認 PB
AND MR59109              ; 画像処理2__ｶﾒﾗ1ｽﾃｰﾀA__確認可
ORP MR29802              ; 5st塗布ｽﾄｯﾊﾟ ｽﾃｰﾀA検査自動
AND MR59001              ; 画像処理2  ｶﾒﾗ1ﾄﾘｶﾞ 許可信号
OR MR59106               ; 画像処理2__ｶﾒﾗ1ｽﾃｰﾀA__確認
AND MR1101               ; 運転準備 完了
ANB MR59009              ; 画像処理2__ｶﾒﾗ1ｽﾃｰﾀA__結果受取
ANB T1601                ; 画像処理2ｶﾒﾗ1ﾀｲﾑｵｰﾊﾞｰ
ANB MR59900              ; 画像処理2__ﾘｾｯﾄ
OUT MR59106              ; 画像処理2__ｶﾒﾗ1ｽﾃｰﾀA__確認
TMS @8 #20               ; 画像処理2__ｶﾒﾗ1ｽﾃｰﾀA__検査DLY
LD MR2000                ; 手動ﾓｰﾄﾞ 操作可能
AND MR59001              ; 画像処理2  ｶﾒﾗ1ﾄﾘｶﾞ 許可信号
AND MR1101               ; 運転準備 完了
ANB MR59106              ; 画像処理2__ｶﾒﾗ1ｽﾃｰﾀA__確認
AND MR21102              ; 5st 送りCV塗布 L/R位置決め 出端
AND T321                 ; 5st ｼﾘｺﾝｸﾞﾘｽ塗布ｽﾗｲﾄﾞ 戻端
OUT MR59109              ; 画像処理2__ｶﾒﾗ1ｽﾃｰﾀA__確認可
LDP MR59106              ; 画像処理2__ｶﾒﾗ1ｽﾃｰﾀA__確認
MOV #0 DM1152            ; 5stRB ｽﾃｰﾀA検査記憶___[1OK/2NG]
MOV #1 DM1722            ; ｽﾃｰﾀｽ信号2ｽﾃｰﾀA[0OK/2NG]_2
MOV #2 DM1652            ; PLC→XG ｺﾏﾝﾄﾞﾊﾟﾗﾒｰﾀｱﾄﾞﾚｽ[ｶﾒﾗ1]_2
MOV #1 DM1603            ; PLC→XG ｶﾒﾗ1撮像開始_画像2
MOV #1 DM900             ; 画像処理2ﾄﾘｶﾞIL
LD= DM1603 #0            ; PLC→XG ｶﾒﾗ1撮像開始_画像2
AND @T8                  ; 画像処理2__ｶﾒﾗ1ｽﾃｰﾀA__検査DLY
OR MR59102               ; 画像処理2__STA検ｺﾏﾝﾄﾞ実行成功
AND MR59106              ; 画像処理2__ｶﾒﾗ1ｽﾃｰﾀA__確認
ANB MR59103              ; 画像処理2__STA検ｺﾏﾝﾄﾞ実行失敗
OUT MR59102              ; 画像処理2__STA検ｺﾏﾝﾄﾞ実行成功
LD>= DM1603 #2           ; PLC→XG ｶﾒﾗ1撮像開始_画像2
AND @T8                  ; 画像処理2__ｶﾒﾗ1ｽﾃｰﾀA__検査DLY
OR MR59103               ; 画像処理2__STA検ｺﾏﾝﾄﾞ実行失敗
AND MR59106              ; 画像処理2__ｶﾒﾗ1ｽﾃｰﾀA__確認
ANB MR59102              ; 画像処理2__STA検ｺﾏﾝﾄﾞ実行成功
OUT MR59103              ; 画像処理2__STA検ｺﾏﾝﾄﾞ実行失敗
LDP MR59102              ; 画像処理2__STA検ｺﾏﾝﾄﾞ実行成功
ORP MR59103              ; 画像処理2__STA検ｺﾏﾝﾄﾞ実行失敗
AND LR10201              ; 画像処理ﾊﾞｯｸｸﾞﾗｳﾝﾄﾞ処理有効
MOV #0 DM900             ; 画像処理2ﾄﾘｶﾞIL
LD MR59106               ; 画像処理2__ｶﾒﾗ1ｽﾃｰﾀA__確認
AND @T8                  ; 画像処理2__ｶﾒﾗ1ｽﾃｰﾀA__検査DLY
ANB MR59102              ; 画像処理2__STA検ｺﾏﾝﾄﾞ実行成功
ANB MR59103              ; 画像処理2__STA検ｺﾏﾝﾄﾞ実行失敗
OUT MR59007              ; 画像処理2__ｽﾃｰﾀA検査→PLC端子
;結果ﾃﾞｰﾀ受取
LD= DM1700 #1            ; PLC←XG 結果ﾃﾞｰﾀ出力完了ｱﾄﾞﾚｽ_2
AND=.D DM1716 #1         ; PLC←XG ｶﾒﾗ番号_2
AND=.D DM1718 #1         ; PLC←XG ﾜｰｸ番号_2
OUT MR59008              ; 画像処理2ｽﾃｰﾀA検査完了
LD MR59008               ; 画像処理2ｽﾃｰﾀA検査完了
AND MR59102              ; 画像処理2__STA検ｺﾏﾝﾄﾞ実行成功
OR MR59009               ; 画像処理2__ｶﾒﾗ1ｽﾃｰﾀA__結果受取
AND MR59106              ; 画像処理2__ｶﾒﾗ1ｽﾃｰﾀA__確認
OUT MR59009              ; 画像処理2__ｶﾒﾗ1ｽﾃｰﾀA__結果受取
LDP MR59009              ; 画像処理2__ｶﾒﾗ1ｽﾃｰﾀA__結果受取
MPS
AND= DM1722 #0           ; ｽﾃｰﾀｽ信号2ｽﾃｰﾀA[0OK/2NG]_2
MOV #1 DM1152            ; 5stRB ｽﾃｰﾀA検査記憶___[1OK/2NG]
MRD
AND<> DM1722 #0          ; ｽﾃｰﾀｽ信号2ｽﾃｰﾀA[0OK/2NG]_2
MOV #2 DM1152            ; 5stRB ｽﾃｰﾀA検査記憶___[1OK/2NG]
MRD
MOV #0 DM1700            ; PLC←XG 結果ﾃﾞｰﾀ出力完了ｱﾄﾞﾚｽ_2
MPP
ANB LR10201              ; 画像処理ﾊﾞｯｸｸﾞﾗｳﾝﾄﾞ処理有効
MOV #0 DM900             ; 画像処理2ﾄﾘｶﾞIL
;検査結果
LD<> DM1152 #0           ; 5stRB ｽﾃｰﾀA検査記憶___[1OK/2NG]
MPS
AND= DM1152 #1           ; 5stRB ｽﾃｰﾀA検査記憶___[1OK/2NG]
OUT MR59107              ; 画像処理2 _ｶﾒﾗ1ｽﾃｰﾀA__検査 OK
MPP
ANB MR59107              ; 画像処理2 _ｶﾒﾗ1ｽﾃｰﾀA__検査 OK
OUT MR59108              ; 画像処理2 _ｶﾒﾗ1ｽﾃｰﾀA__検査 NG
LD MR59106               ; 画像処理2__ｶﾒﾗ1ｽﾃｰﾀA__確認
ANB LR10015              ; 動作ﾀｲﾑｵｰﾊﾞ無効
ANB LR10215              ; 画像処理ﾀｲﾑｵｰﾊﾞ無効
ANB MR59103              ; 画像処理2__STA検ｺﾏﾝﾄﾞ実行失敗
TMR #1601 #400           ; 画像処理2ｶﾒﾗ1ﾀｲﾑｵｰﾊﾞｰ
;ｺﾝﾄﾛｰﾗﾘｾｯﾄ
LDP B0DE                 ; TPｶﾒﾗﾘｾｯﾄPB画像②
AND MR2000               ; 手動ﾓｰﾄﾞ 操作可能
OR MR59200               ; 画像処理2 ﾘｾｯﾄ
ANB MR59202              ; 画像処理2 ﾘｾｯﾄ完了
ANB T1605                ; 画像処理2ﾘｾｯﾄﾀｲﾑｵｰﾊﾞｰ
OUT MR59200              ; 画像処理2 ﾘｾｯﾄ
OUT MR59201              ; 画像処理2_ ﾘｾｯﾄ→PLC端子
@MOV #1 DM1602           ; PLC→XG ﾘｾｯﾄ_画像2
TMR #1605 #20            ; 画像処理2ﾘｾｯﾄﾀｲﾑｵｰﾊﾞｰ
LD<> DM1602 #0           ; PLC→XG ﾘｾｯﾄ_画像2
AND MR59200              ; 画像処理2 ﾘｾｯﾄ
OUT MR59202              ; 画像処理2 ﾘｾｯﾄ完了
@MOV #0 DM1700           ; PLC←XG 結果ﾃﾞｰﾀ出力完了ｱﾄﾞﾚｽ_2
;ｼｰｹﾝｽ停止中
LDB MR59106              ; 画像処理2__ｶﾒﾗ1ｽﾃｰﾀA__確認
OUT MR59910              ; 画像処理2 ｼｰｹﾝｽ停止中
TMR #1598 #10            ; 画像処理2ｼｰｹﾝｽ停止DLY
;ﾃﾞｰﾀ出力完了ｱﾄﾞﾚｽ ﾘｾｯﾄ
LD T1598                 ; 画像処理2ｼｰｹﾝｽ停止DLY
LD<> DM1700 #0           ; PLC←XG 結果ﾃﾞｰﾀ出力完了ｱﾄﾞﾚｽ_2
OR<> DM900 #0            ; 画像処理2ﾄﾘｶﾞIL
ANL
@MOV #0 DM1700           ; PLC←XG 結果ﾃﾞｰﾀ出力完了ｱﾄﾞﾚｽ_2
@MOV #0 DM900            ; 画像処理2ﾄﾘｶﾞIL
;<h1/>入力
LDB MR600                ; TP ｶﾒﾗ確認ｳｨﾝﾄﾞｳ表示中
MPS
AND R1014                ; 画像処理2 ｶﾒﾗ1ﾄﾘｶﾞ 許可信号
OUT MR59001              ; 画像処理2  ｶﾒﾗ1ﾄﾘｶﾞ 許可信号
MPP
AND R1015                ; 画像処理2 ｶﾒﾗ2ﾄﾘｶﾞ 許可信号
OUT MR59002              ; 画像処理2  ｶﾒﾗ2ﾄﾘｶﾞ 許可信号
;異常
LD MR59910               ; 画像処理2 ｼｰｹﾝｽ停止中
LDB R1014                ; 画像処理2 ｶﾒﾗ1ﾄﾘｶﾞ 許可信号
ORB R1015                ; 画像処理2 ｶﾒﾗ2ﾄﾘｶﾞ 許可信号
ANL
TMR #1600 #400           ; 画像処理2__ｺﾝﾄﾛｰﾗ異常
;<h1/>出力
LD MR59007               ; 画像処理2__ｽﾃｰﾀA検査→PLC端子
OR MR59201               ; 画像処理2_ ﾘｾｯﾄ→PLC端子
OUT R2011                ; 画像処理2__ｺﾏﾝﾄﾞ_実行信号
;TP出力
;ｶﾒﾗ1
LD MR59106               ; 画像処理2__ｶﾒﾗ1ｽﾃｰﾀA__確認
OUT B1535                ; TP5st ｽﾃｰﾀA確認 LP
LD MR59200               ; 画像処理2 ﾘｾｯﾄ
OUT B10DE                ; 画像処理2 ﾘｾｯﾄLP
END
ENDH
