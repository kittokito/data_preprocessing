DEVICE:53
;MODULE:BringDown_Scan
;MODULE_TYPE:0
;OneSystem UserOpen-Module
;
;-----------------------------------------
;ModuleName	:	BringDown_Scan
;ModuleType	:	UserOpen Module
;Function	:	User Open Function
;-----------------------------------------
;
;Copylight(C) 2011 SEIKO EPSON Corp. All rights reserved.
;[ﾕｰｻﾞｰ解放ﾌｧﾝｸｼｮﾝ共通注意事項]
;・ﾕｰｻﾞｰｵｰﾌﾟﾝｴﾘｱ以外は変更しないで下さい。
;・各Functionの作成上の注意点をよく読んで使用して下さい。
;↓Please do not delete.
;非常停止発生時STGｸﾘｱ
LDP R46104               ; _非常停止中　ﾓｰﾄﾞﾌﾗｸﾞ
ZRES @R000 @R015
CON
ZRES @R1000 @R8915
;↑Please do not delete.
;<h1/>*Common/共通
;<h1/>Data_Distribut/ﾃﾞｰﾀ変換
;[起動するﾀｲﾐﾝｸﾞ]
;・初期化ﾓｼﾞｭｰﾙ起動直後
;・ﾊﾟﾗﾒｰﾀ変更後
;・運転ﾓｰﾄﾞ開始時(HOME,AUTO,MAINTE初回)
;[作成上の注意点]
;・ﾕｰｻﾞｰｵｰﾌﾟﾝｴﾘｱ以外は修正しないで下さい。
;・動作命令、待ち要素がある記述は禁止します。
;・ﾃﾞｰﾀ処理ﾌﾟﾛｸﾞﾗﾑのみ記述して下さい。
;・STG〜JMP命令は@R001〜014を使用して下さい。
;・処理終了後は必ず@R015へJMPして下さい。
LD CR2008                ; 運転開始時1ｽｷｬﾝON
SET R40404               ; _ﾊﾟﾗﾒｰﾀ変更後ﾕｰｻﾞｰSTG
LD R40404                ; _ﾊﾟﾗﾒｰﾀ変更後ﾕｰｻﾞｰSTG
SET @R000
;//User Open Area Header
STG @R000
JMP @R015
;//User Open Area Footer
STG @R015
RES R40404               ; _ﾊﾟﾗﾒｰﾀ変更後ﾕｰｻﾞｰSTG
CON
ENDS
;<h1/>Estop_Handle/非常停止発生時
;[作成上の注意点]
;・待ち要素、動作命令記述は禁止します。
;・ﾕｰｻﾞｰI/O、ｸﾞﾛｰﾊﾞﾙｱﾄﾞﾚｽの初期化などを行って下さい。
;・STG〜JMP命令は@R101〜114を使用して下さい。
;・終了時は必ず@R115へJMPして下さい。
LD R40405                ; _非常停止ﾕｰｻﾞｰSTG
SET @R100
;//User Open Area Header
STG @R100
RES MR7101               ; RBC1非常停止
CON
RES MR7102               ; RBC2非常停止
CON
RES MR7103               ; RBC3非常停止
CON
RES MR7104               ; RBC4非常停止
CON
RES MR7105               ; RBC5非常停止
CON
RES MR7106               ; RBC6非常停止
CON
JMP @R115
;//User Open Area Footer
STG @R115
RES R40405               ; _非常停止ﾕｰｻﾞｰSTG
CON
ENDS
;<h1/>Estop_Revival/非常停止復帰時
;[作成上の注意点]
;・待ち要素、動作命令記述は禁止します。
;・STG〜JMP命令は@R201〜214を使用して下さい。
;・終了時は必ず@R215へJMPして下さい。
LD R40406                ; _非常停止復帰ﾕｰｻﾞｰSTG
SET @R200
;//User Open Area Header
STG @R200
JMP @R215
;//User Open Area Footer
STG @R215
RES R40406               ; _非常停止復帰ﾕｰｻﾞｰSTG
CON
ENDS
;<h1/>Tower_Lamp/ﾕｰｻﾞｰｶｽﾀﾑﾀﾜｰﾗﾝﾌﾟ
;User Custom1/ﾕｰｻﾞｰｶｽﾀﾑ1
;[作成上の注意点]
;・ﾕｰｻﾞｰ仕様ﾀﾜｰﾗﾝﾌﾟ処理を記述して下さい。
;・使用するｸﾞﾙｰﾌﾟ数分記述が必要です。
;・必ずMC〜MCRの範囲内に記述して下さい。
LD= DM9210 #1            ; _ﾀﾜｰﾗﾝﾌﾟ制御選択
MC
MCR
;User Custom2/ﾕｰｻﾞｰｶｽﾀﾑ2
;[作成上の注意点]
;・ﾕｰｻﾞｰ仕様ﾀﾜｰﾗﾝﾌﾟ処理を記述して下さい。
;・使用するｸﾞﾙｰﾌﾟ数分記述が必要です。
;・必ずMC〜MCRの範囲内に記述して下さい。
LD= DM9210 #2            ; _ﾀﾜｰﾗﾝﾌﾟ制御選択
MC
MCR
;User Custom3/ﾕｰｻﾞｰｶｽﾀﾑ3
;[作成上の注意点]
;・ﾕｰｻﾞｰ仕様ﾀﾜｰﾗﾝﾌﾟ処理を記述して下さい。
;・使用するｸﾞﾙｰﾌﾟ数分記述が必要です。
;・必ずMC〜MCRの範囲内に記述して下さい。
LD= DM9210 #3            ; _ﾀﾜｰﾗﾝﾌﾟ制御選択
MC
MCR
;User Custom4/ﾕｰｻﾞｰｶｽﾀﾑ4
;[作成上の注意点]
;・ﾕｰｻﾞｰ仕様ﾀﾜｰﾗﾝﾌﾟ処理を記述して下さい。
;・使用するｸﾞﾙｰﾌﾟ数分記述が必要です。
;・必ずMC〜MCRの範囲内に記述して下さい。
LD= DM9210 #4            ; _ﾀﾜｰﾗﾝﾌﾟ制御選択
MC
MCR
;User Custom5/ﾕｰｻﾞｰｶｽﾀﾑ5
;[作成上の注意点]
;・ﾕｰｻﾞｰ仕様ﾀﾜｰﾗﾝﾌﾟ処理を記述して下さい。
;・使用するｸﾞﾙｰﾌﾟ数分記述が必要です。
;・必ずMC〜MCRの範囲内に記述して下さい。
LD= DM9210 #5            ; _ﾀﾜｰﾗﾝﾌﾟ制御選択
MC
MCR
;User Custom6/ﾕｰｻﾞｰｶｽﾀﾑ6
;[作成上の注意点]
;・ﾕｰｻﾞｰ仕様ﾀﾜｰﾗﾝﾌﾟ処理を記述して下さい。
;・使用するｸﾞﾙｰﾌﾟ数分記述が必要です。
;・必ずMC〜MCRの範囲内に記述して下さい。
LD= DM9210 #6            ; _ﾀﾜｰﾗﾝﾌﾟ制御選択
MC
MCR
;User Custom7/ﾕｰｻﾞｰｶｽﾀﾑ7
;[作成上の注意点]
;・ﾕｰｻﾞｰ仕様ﾀﾜｰﾗﾝﾌﾟ処理を記述して下さい。
;・使用するｸﾞﾙｰﾌﾟ数分記述が必要です。
;・必ずMC〜MCRの範囲内に記述して下さい。
LD= DM9210 #7            ; _ﾀﾜｰﾗﾝﾌﾟ制御選択
MC
MCR
;User Custom8/ﾕｰｻﾞｰｶｽﾀﾑ8
;[作成上の注意点]
;・ﾕｰｻﾞｰ仕様ﾀﾜｰﾗﾝﾌﾟ処理を記述して下さい。
;・使用するｸﾞﾙｰﾌﾟ数分記述が必要です。
;・必ずMC〜MCRの範囲内に記述して下さい。
LD= DM9210 #8            ; _ﾀﾜｰﾗﾝﾌﾟ制御選択
MC
MCR
;User Custom9/ﾕｰｻﾞｰｶｽﾀﾑ9
;[作成上の注意点]
;・ﾕｰｻﾞｰ仕様ﾀﾜｰﾗﾝﾌﾟ処理を記述して下さい。
;・使用するｸﾞﾙｰﾌﾟ数分記述が必要です。
;・必ずMC〜MCRの範囲内に記述して下さい。
LD= DM9210 #9            ; _ﾀﾜｰﾗﾝﾌﾟ制御選択
MC
MCR
;User Custom10/ﾕｰｻﾞｰｶｽﾀﾑ10
;[作成上の注意点]
;・ﾕｰｻﾞｰ仕様ﾀﾜｰﾗﾝﾌﾟ処理を記述して下さい。
;・使用するｸﾞﾙｰﾌﾟ数分記述が必要です。
;・必ずMC〜MCRの範囲内に記述して下さい。
LD= DM9210 #10           ; _ﾀﾜｰﾗﾝﾌﾟ制御選択
MC
MCR
;<h1/>*Group1/ｸﾞﾙｰﾌﾟ1
;<h1/>SC1_Before/安全ｶﾊﾞｰ1開時
;[作成上の注意点]
;・ﾕｰｻﾞｰｵｰﾌﾟﾝｴﾘｱ以外は修正しないで下さい。
;・STG〜JMP命令は@R1001〜1013を使用して下さい。
;・ﾕｰｻﾞｰ処理終了後、いずれかのSTGへ必ずJMPして下さい。
;	→安全ｶﾊﾞｰ開OKの場合：@R1014へ
;	→安全ｶﾊﾞｰ開NGの場合：@R1015へ
STG R40500               ; _安全ｶﾊﾞｰ1解除ﾕｰｻﾞｰSTG
JMP @R1000
;//User Open Area Header
STG @R1000
MPS
AND CR2002               ; 常時ON
JMP @R1014               ; ﾛｯｸ解除OK
MPP
AND CR2003               ; 常時OFF
JMP @R1015               ; ﾛｯｸ解除NG
;//User Open Area Footer
STG @R1014               ; ﾛｯｸ解除OK
SET R40600               ; _安全ｶﾊﾞｰ1ﾛｯｸ解除OK
CON
ENDS
STG @R1015               ; ﾛｯｸ解除NG
SET R40601               ; _安全ｶﾊﾞｰ1ﾛｯｸ解除NG
CON
ENDS
;<h1/>SC1_After/安全ｶﾊﾞｰ1閉時
;[作成上の注意点]
;・ﾕｰｻﾞｰｵｰﾌﾟﾝｴﾘｱ以外は修正しないで下さい。
;・STG〜JMP命令は@R1101〜1113を使用して下さい。
;・ﾕｰｻﾞｰ処理終了後、いずれかのSTGへ必ずJMPして下さい。
;	→安全ｶﾊﾞｰﾛｯｸOKの場合：@R1114
;	→安全ｶﾊﾞｰﾛｯｸNGの場合：@R1115
STG R40501               ; _安全ｶﾊﾞｰ1ﾛｯｸﾕｰｻﾞｰSTG
JMP @R1100
;//User Open Area Header
STG @R1100
MPS
AND CR2002               ; 常時ON
JMP @R1114               ; ﾛｯｸOK
MPP
AND CR2003               ; 常時OFF
JMP @R1115               ; ﾛｯｸNG
;//User Open Area Footer
STG @R1114               ; ﾛｯｸOK
SET R40700               ; _安全ｶﾊﾞｰ1ﾛｯｸOK
CON
ENDS
STG @R1115               ; ﾛｯｸNG
SET R40701               ; _安全ｶﾊﾞｰ1ﾛｯｸNG
CON
ENDS
;<h1/>Air_Before/ｴｱｰ流量低下時
;[作成上の注意点]
;・待ち要素、動作命令記述は禁止します。
;・STG〜JMP命令は@R1201〜1214を使用して下さい。
;・終了時は必ず@R1215へJMPして下さい。
LD R40800                ; _ｴｱｰ元圧低下1ﾕｰｻﾞｰSTG
SET @R1200
;//User Open Area Header
STG @R1200
JMP @R1215
;//User Open Area Footer
STG @R1215
RES R40800               ; _ｴｱｰ元圧低下1ﾕｰｻﾞｰSTG
CON
ENDS
;<h1/>Air_After/ｴｱｰ流量低下復帰時
;[作成上の注意点]
;・待ち要素、動作命令記述は禁止します。
;・STG〜JMP命令は@R1301〜1314を使用して下さい。
;・終了時は必ず@R1315へJMPして下さい。
LD R40801                ; _ｴｱｰ元圧低下1解除ﾕｰｻﾞｰSTG
SET @R1300
;//User Open Area Header
STG @R1300
JMP @R1315
;//User Open Area Footer
STG @R1315
RES R40801               ; _ｴｱｰ元圧低下1解除ﾕｰｻﾞｰSTG
CON
ENDS
;<h1/>Area1_Before/ｴﾘｱｾﾝｻ遮断直後
;[作成上の注意点]
;・待ち要素、動作命令記述は禁止します。
;・STG〜JMP命令は@R1401〜1414を使用して下さい。
;・終了時は必ず@R1415へJMPして下さい。
LD R40900                ; _ｴﾘｱｾﾝｻ1遮断ﾕｰｻﾞｰSTG
SET @R1400
;//User Open Area Header
STG @R1400
JMP @R1415
;//User Open Area Footer
STG @R1415
RES R40900               ; _ｴﾘｱｾﾝｻ1遮断ﾕｰｻﾞｰSTG
CON
ENDS
;<h1/>Area1_After/ｴﾘｱｾﾝｻ復帰直前
;[作成上の注意点]
;・待ち要素、動作命令記述は禁止します。
;・STG〜JMP命令は@R1501〜1514を使用して下さい。
;・終了時は必ず@R1515へJMPして下さい。
LD R40901                ; _ｴﾘｱｾﾝｻ1復帰ﾕｰｻﾞｰSTG
SET @R1500
;//User Open Area Header
STG @R1500
JMP @R1515
;//User Open Area Footer
STG @R1515
RES R40901               ; _ｴﾘｱｾﾝｻ1復帰ﾕｰｻﾞｰSTG
CON
ENDS
;<h1/>TaskState1/ﾀｽｸ状態
;[Task]
;1行目：OneSystem2_Taskよりﾓｼﾞｭｰﾙ起動指令が来たらMDSTRT
;2行目：OneSystem2_Taskよりﾓｼﾞｭｰﾙ停止指令が来たらMDSTOP
;3行目：Task起動状態をOUT
;<使用方法>
;※不要ﾒｲﾝﾓｼﾞｭｰﾙﾌｧｲﾙを削除したい場合、未使用ﾀｽｸは行無効化を行ってください
;ﾒｲﾝﾓｼﾞｭｰﾙﾌｧｲﾙを削除したにも係わらず行無効化を実施しないと変換異常になります
;Group1_Task0
LD>= DM9200 #1           ; _Group1ﾀｽｸ登録数
MPS
LD R47300                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ起動要求
ANB _Group1_Task0
ANL
MDSTRT Group1_Task0
MRD
LD R47308                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ停止要求
AND _Group1_Task0
ANL
MDSTOP Group1_Task0
MPP
AND _Group1_Task0
TMR @0 DM9358            ; _ﾃﾞｰﾀ収集ﾘｾｯﾄﾃﾞｨﾚｲ
CON
AND @T0
OUT R49000               ; _Group1_Task0起動状態
;Group1_Task1
LD>= DM9200 #2           ; _Group1ﾀｽｸ登録数
MPS
LD R47300                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ起動要求
ANB _Group1_Task1
ANL
MDSTRT Group1_Task1
MRD
LD R47308                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ停止要求
AND _Group1_Task1
ANL
MDSTOP Group1_Task1
MPP
AND _Group1_Task1
TMR @1 DM9358            ; _ﾃﾞｰﾀ収集ﾘｾｯﾄﾃﾞｨﾚｲ
CON
AND @T1
OUT R49000:#1            ; _Group1_Task1起動状態
;Group1_Task2
LD>= DM9200 #3           ; _Group1ﾀｽｸ登録数
MPS
LD R47300                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ起動要求
ANB _Group1_Task2
ANL
MDSTRT Group1_Task2
MRD
LD R47308                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ停止要求
AND _Group1_Task2
ANL
MDSTOP Group1_Task2
MPP
AND _Group1_Task2
TMR @2 DM9358            ; _ﾃﾞｰﾀ収集ﾘｾｯﾄﾃﾞｨﾚｲ
CON
AND @T2
OUT R49000:#2            ; _Group1_Task2起動状態
;Group1_Task3
LD>= DM9200 #4           ; _Group1ﾀｽｸ登録数
MPS
LD R47300                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ起動要求
ANB _Group1_Task3
ANL
MDSTRT Group1_Task3
MRD
LD R47308                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ停止要求
AND _Group1_Task3
ANL
MDSTOP Group1_Task3
MPP
AND _Group1_Task3
TMR @3 DM9358            ; _ﾃﾞｰﾀ収集ﾘｾｯﾄﾃﾞｨﾚｲ
CON
AND @T3
OUT R49000:#3            ; _Group1_Task3起動状態
;Group1_Task4
LD>= DM9200 #5           ; _Group1ﾀｽｸ登録数
MPS
LD R47300                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ起動要求
ANB _Group1_Task4
ANL
MDSTRT Group1_Task4
MRD
LD R47308                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ停止要求
AND _Group1_Task4
ANL
MDSTOP Group1_Task4
MPP
AND _Group1_Task4
TMR @4 DM9358            ; _ﾃﾞｰﾀ収集ﾘｾｯﾄﾃﾞｨﾚｲ
CON
AND @T4
OUT R49000:#4            ; _Group1_Task4起動状態
;Group1_Task5
LD>= DM9200 #6           ; _Group1ﾀｽｸ登録数
MPS
LD R47300                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ起動要求
ANB _Group1_Task5
ANL
MDSTRT Group1_Task5
MRD
LD R47308                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ停止要求
AND _Group1_Task5
ANL
MDSTOP Group1_Task5
MPP
AND _Group1_Task5
TMR @5 DM9358            ; _ﾃﾞｰﾀ収集ﾘｾｯﾄﾃﾞｨﾚｲ
CON
AND @T5
OUT R49000:#5            ; _Group1_Task5起動状態
;Group1_Task6
LD>= DM9200 #7           ; _Group1ﾀｽｸ登録数
MPS
LD R47300                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ起動要求
ANB _Group1_Task6
ANL
MDSTRT Group1_Task6
MRD
LD R47308                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ停止要求
AND _Group1_Task6
ANL
MDSTOP Group1_Task6
MPP
AND _Group1_Task6
TMR @6 DM9358            ; _ﾃﾞｰﾀ収集ﾘｾｯﾄﾃﾞｨﾚｲ
CON
AND @T6
OUT R49000:#6            ; _Group1_Task6起動状態
;Group1_Task7
LD>= DM9200 #8           ; _Group1ﾀｽｸ登録数
MPS
LD R47300                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ起動要求
ANB _Group1_Task7
ANL
MDSTRT Group1_Task7
MRD
LD R47308                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ停止要求
AND _Group1_Task7
ANL
MDSTOP Group1_Task7
MPP
AND _Group1_Task7
TMR @7 DM9358            ; _ﾃﾞｰﾀ収集ﾘｾｯﾄﾃﾞｨﾚｲ
CON
AND @T7
OUT R49000:#7            ; _Group1_Task7起動状態
;Group1_Task8
LD>= DM9200 #9           ; _Group1ﾀｽｸ登録数
MPS
LD R47300                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ起動要求
ANB _Group1_Task8
ANL
MDSTRT Group1_Task8
MRD
LD R47308                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ停止要求
AND _Group1_Task8
ANL
MDSTOP Group1_Task8
MPP
AND _Group1_Task8
TMR @8 DM9358            ; _ﾃﾞｰﾀ収集ﾘｾｯﾄﾃﾞｨﾚｲ
CON
AND @T8
OUT R49000:#8            ; _Group1_Task8起動状態
;Group1_Task9
LD>= DM9200 #10          ; _Group1ﾀｽｸ登録数
MPS
LD R47300                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ起動要求
ANB _Group1_Task9
ANL
MDSTRT Group1_Task9
MRD
LD R47308                ; _Group1　ﾒｲﾝﾓｼﾞｭｰﾙ停止要求
AND _Group1_Task9
ANL
MDSTOP Group1_Task9
MPP
AND _Group1_Task9
TMR @9 DM9358            ; _ﾃﾞｰﾀ収集ﾘｾｯﾄﾃﾞｨﾚｲ
CON
AND @T9
OUT R49000:#9            ; _Group1_Task9起動状態
END
ENDH
