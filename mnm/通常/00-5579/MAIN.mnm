DEVICE:53
;MODULE:MAIN
;MODULE_TYPE:0
;SCRIPT_TYPE:
;□□　　ダミー接点　　□□
LD CR2003                ; 常時OFF
OUT M0                   ; 常時OFF
LD CR3905                ; 重度ｴﾗｰ発生中
INV
OUT M1                   ; CPU正常
LD CR2008                ; 運転開始時1ｽｷｬﾝON
OUT M2                   ; 1ｽｷｬﾝON
LD B101F                 ; PC_OFFLINE_MODE
OUT M3                   ; OFFLINE_MODE
LDB CR2002               ; 常時ON
OUT M9                   ; ﾁｪｯｶｰﾁｪｯｸ有効ﾓｰﾄﾞOFF(step2でOFF)
LD CR2002                ; 常時ON
ANB T2                   ; 0.3Secｸﾛｯｸ
TMH K1 K30               ; 0.3Secｸﾛｯｸ
LD T1                    ; 0.3Secｸﾛｯｸ
TMH K2 K30               ; 0.3Secｸﾛｯｸ
LD CR2002                ; 常時ON
ANB T5                   ; ﾌﾞｻﾞｰ音程ﾀｲﾏ1-1
TMH K4 K5                ; ﾌﾞｻﾞｰ音程ﾀｲﾏ1_0.5sec
LD T4                    ; ﾌﾞｻﾞｰ音程ﾀｲﾏ1_0.5sec
TMH K5 K25               ; ﾌﾞｻﾞｰ音程ﾀｲﾏ1-1
LD CR2002                ; 常時ON
ANB T7                   ; ﾌﾞｻﾞｰ音程ﾀｲﾏ2-1
TMH K6 K40               ; ﾌﾞｻﾞｰ音程ﾀｲﾏ2
LD T6                    ; ﾌﾞｻﾞｰ音程ﾀｲﾏ2
TMH K7 K5                ; ﾌﾞｻﾞｰ音程ﾀｲﾏ2-1
LD CR2002                ; 常時ON
ANB T9                   ; ﾌﾞｻﾞｰ音程ﾀｲﾏ3-1
TMR K8 K10               ; ﾌﾞｻﾞｰ音程ﾀｲﾏ3_1.0sec
LD T8                    ; ﾌﾞｻﾞｰ音程ﾀｲﾏ3_1.0sec
TMR K9 K5                ; ﾌﾞｻﾞｰ音程ﾀｲﾏ3-1
LD CR2002                ; 常時ON
ANB T37                  ; ｲﾝﾀｰﾛｯｸ解除音程ﾀｲﾏ1
TMR K36 K50              ; ｲﾝﾀｰﾛｯｸ解除音程ﾀｲﾏ_10.0sec
LD T36                   ; ｲﾝﾀｰﾛｯｸ解除音程ﾀｲﾏ_10.0sec
TMR K37 K5               ; ｲﾝﾀｰﾛｯｸ解除音程ﾀｲﾏ1
LD CR2002                ; 常時ON
ANB T39                  ; ﾜｰｸ投入可音程ﾀｲﾏ1
TMH K38 K30              ; ﾜｰｸ投入可音程ﾀｲﾏ
LD T38                   ; ﾜｰｸ投入可音程ﾀｲﾏ
TMH K39 K100             ; ﾜｰｸ投入可音程ﾀｲﾏ1
;<h1/>□_安全関連入力受け
;安全系の入力は一旦ここで受ける。
LD X03                   ; 圧空元圧正常
OUT M120                 ; 圧空正常
LD X01                   ; 非常停止正常
OUT M121                 ; 非常停止正常
LD CR2002                ; 常時ON
OUT M122                 ; 外部非常停止正常
LD X30E                  ; 正面左奥扉閉確認
AND X30F                 ; 正面右奥扉閉確認
OR M39                   ; ｴﾘｱｾﾝｻ-無視Mode
OUT M123                 ; 安全扉正常
LD X04                   ; 供給部扉閉確認
AND X06                  ; ST1-2部ﾗｲﾄｶｰﾃﾝOUT1
AND X07                  ; ST1-2部ﾗｲﾄｶｰﾃﾝOUT2
AND X08                  ; ST3-4部ﾗｲﾄｶｰﾃﾝOUT1
AND X09                  ; ST3-4部ﾗｲﾄｶｰﾃﾝOUT2
AND X0A                  ; ST1-2背面ﾗｲﾄｶｰﾃﾝOUT1
AND X0B                  ; ST1-2背面ﾗｲﾄｶｰﾃﾝOUT1
AND X0C                  ; ST3-4背面ﾗｲﾄｶｰﾃﾝOUT1
AND X0D                  ; ST3-4背面ﾗｲﾄｶｰﾃﾝOUT1
OR M39                   ; ｴﾘｱｾﾝｻ-無視Mode
OUT M124                 ; ｴﾘｱｾﾝｻ正常
LD X04                   ; 供給部扉閉確認
OR M39                   ; ｴﾘｱｾﾝｻ-無視Mode
TMR K60 K5               ; 投入部ﾗｲﾄｶｰﾃﾝ確認ﾀｲﾏ
LD M120                  ; 圧空正常
AND M121                 ; 非常停止正常
AND M122                 ; 外部非常停止正常
AND M123                 ; 安全扉正常
AND M124                 ; ｴﾘｱｾﾝｻ正常
OUT M129                 ; 安全入力OK
;<h1/>□_スイッチ変換
;操作系の入力は一旦ここで受ける。
LD B1016                 ; DRY_RUN_PB
OUT M7                   ; 空運転PB
LD B1001                 ; 自動/手動PB
OUT M10                  ; 自動/手動PB
;今回は運転準備PB無し装置電源入で常時ON
LD X00                   ; 装置電源入
OUT M12                  ; 運転準備入PB
LD CR2003                ; 常時OFF
OUT M13                  ; 運転準備切PB
LD B1010                 ; ﾌﾞｻﾞｰ停止PB
OUT M15                  ; ﾌﾞｻﾞｰ停止PB
LD B1011                 ; ｴﾗｰﾘｾｯﾄPB
OUT M16                  ; ﾘｾｯﾄPB
LD B1000                 ; 原点復帰PB
OUT M17                  ; 原点復帰PB
LD B1002                 ; ｽﾀｰﾄPB
OUT M18                  ; 起動PB
LD B1003                 ; ｻｲｸﾙ停止PB
TMR K15 K50              ; 強制停止
OUT M19                  ; 停止PB
LD B1004                 ; 段取PB
OUT M22                  ; 段取りPB
LDP M15                  ; ﾌﾞｻﾞｰ停止PB
OUT M110                 ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
LDP M16                  ; ﾘｾｯﾄPB
OUT M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
;用途に応じて使用する
LD CR2003                ; 常時OFF
MPS
TMR K16 K20              ; 終了PB_ONﾃﾞｨﾚｲ
MPP
AND T16                  ; 終了PB_ONﾃﾞｨﾚｲ
OUT M20                  ; 終了PB
LD CR2003                ; 常時OFF
MPS
TMR K17 K10              ; 払出PB_ONﾃﾞｨﾚｲ
MPP
AND T17                  ; 払出PB_ONﾃﾞｨﾚｲ
OUT M21                  ; 払出PB
;<h1/>□_各モード選択
;自動・手動モード
LDP M10                  ; 自動/手動PB
AND M33                  ; 自動ﾓｰﾄﾞ切替･起動可条件
ANB M30                  ; 自動ﾓｰﾄﾞ
MEP
LD M30                   ; 自動ﾓｰﾄﾞ
ANPB M31                 ; 手動ﾓｰﾄﾞ
ORL
ANB M51                  ; 即停止異常(緊急停止)
AND M50                  ; 運転準備
OUT M30                  ; 自動ﾓｰﾄﾞ
LDP M10                  ; 自動/手動PB
ANB M31                  ; 手動ﾓｰﾄﾞ
ANB M41                  ; U_起動中
MEP
OR T51                   ; 手動ﾓｰﾄﾞ移行ﾀｲﾏ
OR CR2008                ; 運転開始時1ｽｷｬﾝON
LD M31                   ; 手動ﾓｰﾄﾞ
ANPB M30                 ; 自動ﾓｰﾄﾞ
ORL
ANB M71                  ; 自動運転開始BZ
OUT M31                  ; 手動ﾓｰﾄﾞ
LDB M40                  ; 全U原点
ANB M71                  ; 自動運転開始BZ
ORB M33                  ; 自動ﾓｰﾄﾞ切替･起動可条件
ANB M41                  ; U_起動中
TMR K51 K10              ; 手動ﾓｰﾄﾞ移行ﾀｲﾏ
;この手動操作可条件はメインのみの条件
;ユニット毎に必要な条件は各ユニットへ追加する
LD M120                  ; 圧空正常
AND M121                 ; 非常停止正常
AND M122                 ; 外部非常停止正常
LD M123                  ; 安全扉正常
AND M124                 ; ｴﾘｱｾﾝｻ正常
OR M37                   ; ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
OR M39                   ; ｴﾘｱｾﾝｻ-無視Mode
ANL
AND M50                  ; 運転準備
OUT M32                  ; ﾒｲﾝ手動操作可能条件
LD M40                   ; 全U原点
AND M50                  ; 運転準備
OUT M33                  ; 自動ﾓｰﾄﾞ切替･起動可条件
;空運転､払出モードは必要に応じて使用
LD M7                    ; 空運転PB
AND B1011                ; ｴﾗｰﾘｾｯﾄPB
TMR K34 K50              ; 空運転ﾓｰﾄﾞONﾃﾞｨﾚｲ
LDB M35                  ; 空運転ﾓｰﾄﾞ
ANB M41                  ; U_起動中
ANP T34                  ; 空運転ﾓｰﾄﾞONﾃﾞｨﾚｲ
LD M35                   ; 空運転ﾓｰﾄﾞ
ANPB T34                 ; 空運転ﾓｰﾄﾞONﾃﾞｨﾚｲ
ORL
OUT M35                  ; 空運転ﾓｰﾄﾞ
LDP M19                  ; 停止PB
OR M13309                ; PC→自動運転停止ﾌﾗｸﾞ
OR M59                   ; 払出停止異常まとめ
ORP M1404                ; ID異常時  ｻｲｸﾙ停止選択
ANB M130                 ; 一時停止
ANB M36                  ; 払出ﾓｰﾄﾞ
LD M36                   ; 払出ﾓｰﾄﾞ
LDPB M18                 ; 起動PB
OR M57                   ; 自動起動停止指令(払出停止)
ANL
ORL
AND M71                  ; 自動運転開始BZ
OUT M36                  ; 払出ﾓｰﾄﾞ
;ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
LD B1015                 ; ｲﾝﾀｰﾛｯｸｷｬﾝｾﾙPB
AND B1011                ; ｴﾗｰﾘｾｯﾄPB
TMR K35 K50              ; ｲﾝﾀｰﾛｯｸ解除ONﾃﾞｨﾚｲ
LDP T35                  ; ｲﾝﾀｰﾛｯｸ解除ONﾃﾞｨﾚｲ
ANB M37                  ; ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
LDPB T35                 ; ｲﾝﾀｰﾛｯｸ解除ONﾃﾞｨﾚｲ
AND M37                  ; ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
ORL
ANB M41                  ; U_起動中
AND M31                  ; 手動ﾓｰﾄﾞ
ANB M42                  ; 全U原点復帰中
ANB B1000                ; 原点復帰PB
OUT M37                  ; ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
;エリアセンサー無効化
LD B1010                 ; ﾌﾞｻﾞｰ停止PB
AND B1011                ; ｴﾗｰﾘｾｯﾄPB
TMR K41 K30              ; ｴﾘｱｾﾝｻｰ解除ﾃﾞｨﾚｲﾀｲﾏｰ
LDP T41                  ; ｴﾘｱｾﾝｻｰ解除ﾃﾞｨﾚｲﾀｲﾏｰ
ANB M39                  ; ｴﾘｱｾﾝｻ-無視Mode
LDPB T41                 ; ｴﾘｱｾﾝｻｰ解除ﾃﾞｨﾚｲﾀｲﾏｰ
AND M39                  ; ｴﾘｱｾﾝｻ-無視Mode
ORL
ANB M41                  ; U_起動中
AND M31                  ; 手動ﾓｰﾄﾞ
ANB M42                  ; 全U原点復帰中
ANB B1000                ; 原点復帰PB
ANB B1001                ; 自動/手動PB
ANB B1002                ; ｽﾀｰﾄPB
ANPB B1011               ; ｴﾗｰﾘｾｯﾄPB
ANB M51                  ; 即停止異常(緊急停止)
OUT M39                  ; ｴﾘｱｾﾝｻ-無視Mode
LD CR2006                ; 1sｸﾛｯｸﾊﾟﾙｽ
MPS
AND M39                  ; ｴﾘｱｾﾝｻ-無視Mode
OUT B151C                ; ｴﾘｱｾﾝｻｰ無効
MPP
AND L22                  ; 上流接続無(ON=無)
OUT B151D                ; 単独運転ﾓｰﾄﾞ
;段取りﾓｰﾄﾞ　（未使用）
LDP M22                  ; 段取りPB
ANB M38                  ; 段取りﾓｰﾄﾞ
LD M38                   ; 段取りﾓｰﾄﾞ
ANPB M18                 ; 起動PB
ORL
AND M41                  ; U_起動中
OUT M38                  ; 段取りﾓｰﾄﾞ
;　　ﾓｰﾄﾞ切替異常
LD L10                   ; Leak検査有無(0_有/1_無)
AND L11                  ; Final検査有無(0_有/1_無)
RES L10                  ; Leak検査有無(0_有/1_無)
CON
RES L11                  ; Final検査有無(0_有/1_無)
;□□　　装置状態集約　　□□
;■装置原点
LD M1480                 ; U1SupSlider原点
LD M3480                 ; U5原点
ORB M99                  ; 能拡後対応FLG
ANL
AND M5480                ; U9原点
AND M5980                ; U10原点_OK_NG_CV
AND M6480                ; ﾘｰｸST1U11原点
LD M6980                 ; ﾌｧｲﾅﾙST1U12原点
ORB M99                  ; 能拡後対応FLG
ANL
AND M7480                ; LeakST2U13原点
AND M7980                ; FinalST2U14原点
AND M8980                ; FinalST3U16原点
AND M9480                ; LeakST3U17原点
AND M9980                ; FinalST4U18原点
AND M10480               ; LeakST4U19原点
AND M10980               ; FinalST5U20原点
LD M11980                ; FinalST6U22原点
ORB M99                  ; 能拡後対応FLG
ANL
OUT M40                  ; 全U原点
;■起動中
LDB M1485                ; U1SupSlider起動中
ANB M3485                ; U5起動中
ANB M5485                ; U9起動中
ANB M5985                ; U10起動中
ANB M6485                ; U11起動中
ANB M6985                ; U12起動中
ANB M7485                ; U13起動中
ANB M7985                ; U14起動中
ANB M8985                ; U16起動中
ANB M9485                ; U17起動中
ANB M9985                ; U18起動中
ANB M10485               ; U19起動中
ANB M10985               ; U20起動中
ANB M11985               ; U22起動中
INV
OUT M41                  ; U_起動中
;■原点復帰中
LDB M1484                ; U1SupSlider原点復帰中
ANB M3484                ; U5原点復帰中
ANB M5484                ; U9原点復帰中
ANB M5984                ; U10原点復帰中
ANB M6484                ; U11原点復帰中
ANB M6984                ; U12原点復帰中
ANB M7484                ; U13原点復帰中
ANB M7984                ; U14原点復帰中
ANB M8984                ; U16原点復帰中
ANB M9484                ; U17原点復帰中
ANB M9984                ; U18原点復帰中
ANB M10484               ; U19原点復帰中
ANB M10984               ; U20原点復帰中
ANB M11984               ; U22原点復帰中
INV
OUT M42                  ; 全U原点復帰中
;■ﾛﾎﾞｯﾄ準備完了
LD M1490                 ; U1SupSlider機器準備完了
LD M3490                 ; U5機器準備完了
ORB M99                  ; 能拡後対応FLG
ANL
AND M5490                ; U9機器準備完了
AND M5990                ; U10機器準備完了
AND M6490                ; U11機器準備完了
LD M6990                 ; U12機器準備完了
ORB M99                  ; 能拡後対応FLG
ANL
AND M7490                ; U13機器準備完了
AND M7990                ; U14機器準備完了
AND M8990                ; U16機器準備完了
AND M9490                ; U17機器準備完了
AND M9990                ; U18機器準備完了
AND M10490               ; U19機器準備完了
AND M10990               ; U20機器準備完了
LD M11990                ; U22機器準備完了
ORB M99                  ; 能拡後対応FLG
ANL
OUT M43                  ; ｲﾆｼｬﾗｲｽﾞ完了ﾌﾗｸﾞ
;■運転準備
LDB M0                   ; 常時OFF
MPS
TMR K0 K20               ; 電源投入0Nﾃﾞｨﾚｲ
MPP
AND= D50 K0              ; TpM-K_表示中ページNo.
TMR K11 K50              ; タッチパネル_ロゴ表示終了
LD T0                    ; 電源投入0Nﾃﾞｨﾚｲ
AND M12                  ; 運転準備入PB
OR M5                    ; 運転準備補助
LDB M13                  ; 運転準備切PB
OR M41                   ; U_起動中
ANL
ANB M51                  ; 即停止異常(緊急停止)
OUT M5                   ; 運転準備補助
LD M5                    ; 運転準備補助
TMR K10 K20              ; 運転準備ﾃﾞｨﾚｲ
MPS
AND T10                  ; 運転準備ﾃﾞｨﾚｲ
OUT M50                  ; 運転準備
MPP
AND M50                  ; 運転準備
TMR K12 K30              ; 運転準備ONﾃﾞｨﾚｲ(3S)
LD M50                   ; 運転準備
TMR K70 K10              ; Ready On 1s
CON
TMR K71 K20              ; Ready On 2s
CON
TMR K72 K30              ; Ready On 3s
CON
TMR K73 K40              ; Ready On 4s
CON
TMR K74 K50              ; Ready On 5s
CON
TMR K75 K60              ; Ready On 6s
CON
TMR K76 K70              ; Ready On 7s
CON
TMR K77 K80              ; Ready On 8s
CON
TMR K78 K90              ; Ready On 9s
;<h1/>□_異常検出まとめ
;■即停止異常(全ﾕﾆｯﾄ即停止)
LDB B01                  ; 001)非常停止異常
ANB B02                  ; 002)圧空低下異常
ANB B04                  ; 004)原点復帰ｻｲｸﾙﾀｲﾑｵｰﾊﾞｰ
ANB B05                  ; 005)外部非常停止
ANB B06                  ; 006)PLC異常
ANB B07                  ; 007)ﾘﾝｸ異常
ANB M58                  ; 非常停止異常まとめ
ANB B0B                  ; 011)PC通信異常
ANB B0C                  ; 012)PCｴﾗｰ
ANB B0D                  ; 013)WSlider衝突防止IL
ANB B017                 ; 023)EMGSTOP(ﾊﾝﾃﾞｨ)
ANB B018                 ; 024)EMGSTOP(操作ﾊﾟﾈﾙ)
ANB B019                 ; 025)EMGSTOP(ﾜｰｸ投入部)
ANB B01A                 ; 026)EMGSTOP(ﾘｰｸ検査ST1-2)
ANB B01B                 ; 027)EMGSTOP(ﾘｰｸ検査ST3-4)
ANB B01C                 ; 028)EMGSTOP(ﾌｧｲﾅﾙ検査ST2-2)
ANB B01D                 ; 029)EMGSTOP(ﾌｧｲﾅﾙ検査ST3-4)
ANB B01E                 ; 030)EMGSTOP(CV)
INV
OUT M51                  ; 即停止異常(緊急停止)
;■ﾕﾆｯﾄ異常検出(該当ﾕﾆｯﾄ以外ｻｲｸﾙ停止)
LDB M1486                ; U1SupSliderｻｲｸﾙ停止異常
ANB M3486                ; U5ｻｲｸﾙ停止異常
ANB M5486                ; U9ｻｲｸﾙ停止異常
ANB M5986                ; U10ｻｲｸﾙ停止異常
ANB M6486                ; U11ｻｲｸﾙ停止異常
ANB M6986                ; U12ｻｲｸﾙ停止異常
ANB M7486                ; U13ｻｲｸﾙ停止異常
ANB M7986                ; U14ｻｲｸﾙ停止異常
ANB M8986                ; U16ｻｲｸﾙ停止異常
ANB M9486                ; U17ｻｲｸﾙ停止異常
ANB M9986                ; U18ｻｲｸﾙ停止異常
ANB M10486               ; U19ｻｲｸﾙ停止異常
ANB M10986               ; U20ｻｲｸﾙ停止異常
ANB M11986               ; U22ｻｲｸﾙ停止異常
INV
OUT M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
;■ﾕﾆｯﾄ毎各種警報検出(ﾜｰｸ不足･ｵﾍﾟｺｰﾙ等)
LDB M1488                ; U1SupSlider警報補助
ANB M3488                ; U5警報補助
ANB M5488                ; U9警報補助
ANB M5988                ; U10警報補助
ANB M6488                ; U11警報補助
ANB M6988                ; U12警報補助
ANB M7488                ; U13警報補助
ANB M7988                ; U14警報補助
ANB M8988                ; U16警報補助
ANB M9488                ; U17警報補助
ANB M9988                ; U18警報補助
ANB M10488               ; U19警報補助
ANB M10988               ; U20警報補助
ANB M11988               ; U22警報補助
INV
OUT M53                  ; 警報(ﾜｰｸ不足等)
;■ﾕﾆｯﾄ毎異常ﾌﾞｻﾞｰ検出
LDB M200                 ; ﾒｲﾝ異常BZ まとめ
ANB M1489                ; U1SupSlider異常BZ補助
ANB M3489                ; U5異常BZ補助
ANB M5489                ; U9異常BZ補助
ANB M5989                ; U10異常BZ補助
ANB M6489                ; U11異常BZ補助
ANB M6989                ; U12異常BZ補助
ANB M7489                ; U13異常BZ補助
ANB M7989                ; U14異常BZ補助
ANB M8989                ; U16異常BZ補助
ANB M9489                ; U17異常BZ補助
ANB M9989                ; U18異常BZ補助
ANB M10489               ; U19異常BZ補助
ANB M10989               ; U20異常BZ補助
ANB M11989               ; U22異常BZ補助
ANB M13489               ; U25異常BZ補助
INV
OUT M54                  ; 異常ﾌﾞｻﾞｰ
;□□　　自動運転停止指令(ｻｲｸﾙ停止)　　□□
LD M52                   ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
OR T15                   ; 強制停止
OR M65                   ; 自動起動停止指令(払出停止)
OR M56                   ; 自動起動停止指令(ｻｲｸﾙ停止)
AND M73                  ; 各工程起動指令
OUT M56                  ; 自動起動停止指令(ｻｲｸﾙ停止)
;□□　　払出完了運転停止指令(ｻｲｸﾙ停止)　　□□
LD M36                   ; 払出ﾓｰﾄﾞ
AND M1493                ; U1SupSliderﾜｰｸ無し
AND M3493                ; U5ﾜｰｸ無し
AND M5493                ; U9ﾜｰｸ無し
AND M5993                ; U10ﾜｰｸ無し(払出時)
AND M6493                ; U11ﾜｰｸ無し(払出時)
LD M6993                 ; U12ﾜｰｸ無し
ORB M99                  ; 能拡後対応FLG
ANL
AND M7493                ; U13ﾜｰｸ無し(払出時)
AND M7993                ; U14ﾜｰｸ無し
AND M8993                ; U16ﾜｰｸ無し
AND M9493                ; U17ﾜｰｸ無し(払出時)
AND M9993                ; U18ﾜｰｸ無し
AND M10493               ; U19ﾜｰｸ無し(払出時)
AND M10993               ; U20ﾜｰｸ無し
LD M11993                ; U22ﾜｰｸ無し
ORB M99                  ; 能拡後対応FLG
ANL
ANB M41                  ; U_起動中
LD M3495                 ; 搬送1払出完了
ORB M99                  ; 能拡後対応FLG
ANL
AND M5495                ; 搬送2払出完了
OR M57                   ; 自動起動停止指令(払出停止)
AND M36                  ; 払出ﾓｰﾄﾞ
OUT M57                  ; 自動起動停止指令(払出停止)
LD M57                   ; 自動起動停止指令(払出停止)
LD M6350                 ; ﾘｰｸﾁｬﾝﾊﾞｰ下降完了
ORB L1100                ; LeakST1_有効状態
ANL
LD M7350                 ; Leakﾁｬﾝﾊﾞｰ下降完了
ORB L1300                ; LeakST2_有効状態
ANL
LD M9350                 ; Leakﾁｬﾝﾊﾞｰ下降完了
ORB L1700                ; LeakST3_有効状態
ANL
LD M10350                ; Leakﾁｬﾝﾊﾞｰ下降完了
ORB L1900                ; LeakST4_有効状態
ANL
OUT M65                  ; 自動起動停止指令(払出停止)
;緊急停止異常まとめ
LDB M1481                ; U1SupSlider即停止異常
ANB M3481                ; U5即停止異常
ANB M5481                ; U9即停止異常
ANB M5981                ; U10即停止異常
ANB M6481                ; U11即停止異常
ANB M6981                ; U12即停止異常
ANB M7481                ; U13即停止異常
ANB M7981                ; U14即停止異常
ANB M8981                ; U16即停止異常
ANB M9481                ; U17即停止異常
ANB M9981                ; U18即停止異常
ANB M10481               ; U19即停止異常
ANB M10981               ; U20即停止異常
ANB M11981               ; U22即停止異常
INV
OUT M58                  ; 非常停止異常まとめ
;払出停止異常まとめ
LDB M1487                ; U1SupSlider払出停止異常
ANB M3487                ; U5払出停止異常
ANB M5487                ; U9払出停止異常
ANB M5987                ; U10払出停止異常
ANB M6487                ; U11払出停止異常
ANB M6987                ; U12払出停止異常
ANB M7487                ; U13払出停止異常
ANB M7987                ; U14払出停止異常
ANB M8987                ; U16払出停止異常
ANB M9487                ; U17払出停止異常
ANB M9987                ; U18払出停止異常
ANB M10487               ; U19払出停止異常
ANB M10987               ; U20払出停止異常
ANB M11987               ; U22払出停止異常
INV
OUT M59                  ; 払出停止異常まとめ
;■各ﾕﾆｯﾄｴﾗｰ検出
LDB B08                  ; 008)PLCﾊﾞｯﾃﾘ低下
ANB B0A                  ; 010)原点未完ﾓｰﾄﾞ切替不可異常
ANB B03                  ; 003)安全扉開異常
ANB M1491                ; U1SupSliderｴﾗｰ発生
ANB M3491                ; U5ｴﾗｰ発生
ANB M5491                ; U9ｴﾗｰ発生
ANB M5991                ; U10ｴﾗｰ発生
ANB M6491                ; U11ｴﾗｰ発生
ANB M6991                ; U12ｴﾗｰ発生
ANB M7491                ; U13ｴﾗｰ発生
ANB M7991                ; U14ｴﾗｰ発生
ANB M8991                ; U16ｴﾗｰ発生
ANB M9491                ; U17ｴﾗｰ発生
ANB M9991                ; U18ｴﾗｰ発生
ANB M10491               ; U19ｴﾗｰ発生
ANB M10991               ; U20ｴﾗｰ発生
ANB M11991               ; U22ｴﾗｰ発生
INV
OUT M60                  ; ｴﾗｰ発生
;一時停止処理
;アラーム発生時に使用
LD M73                   ; 各工程起動指令
OR M41                   ; U_起動中
ANB M149                 ; 一時停止処理終了
ANB M133                 ; 一時停止 ｷｬﾝｾﾙ
MC
LDP B1012                ; 一時停止PB
LD CR2003                ; 常時OFF
ANP M60                  ; ｴﾗｰ発生
ORL
OR M130                  ; 一時停止
OUT M130                 ; 一時停止
LD M1492                 ; U1SupSlider動作無し確認
AND M3492                ; U5動作無し確認
AND M5492                ; U9動作無し確認
AND M5992                ; U10動作無し確認
AND M6492                ; U11動作無し確認
AND M6992                ; U12動作無し確認
AND M7492                ; U13動作無し確認
AND M7992                ; U14動作無し確認
AND M8992                ; U16動作無し確認
AND M9492                ; U17動作無し確認
AND M9992                ; U18動作無し確認
AND M10492               ; U19動作無し確認
AND M10992               ; U20動作無し確認
AND M11992               ; U22動作無し確認
OUB M131                 ; PACK中
LD M130                  ; 一時停止
OR M132                  ; 全U停止OK
OR M133                  ; 一時停止 ｷｬﾝｾﾙ
MPS
LDB M133                 ; 一時停止 ｷｬﾝｾﾙ
ANB M131                 ; PACK中
ANL
OUT M132                 ; 全U停止OK
MPP
LDB M132                 ; 全U停止OK
AND M131                 ; PACK中
ANP B1002                ; ｽﾀｰﾄPB
ANL
OUT M133                 ; 一時停止 ｷｬﾝｾﾙ
LD M132                  ; 全U停止OK
OR M140                  ; ﾄﾞｱﾛｯｸ開
ANB M141                 ; ﾄﾞｱ閉確認
OUT M140                 ; ﾄﾞｱﾛｯｸ開
LD M140                  ; ﾄﾞｱﾛｯｸ開
AND M123                 ; 安全扉正常
AND M124                 ; ｴﾘｱｾﾝｻ正常
ANP B1002                ; ｽﾀｰﾄPB
OR M141                  ; ﾄﾞｱ閉確認
OUT M141                 ; ﾄﾞｱ閉確認
LD M141                  ; ﾄﾞｱ閉確認
AND M123                 ; 安全扉正常
AND M124                 ; ｴﾘｱｾﾝｻ正常
OR M148                  ; 状態復帰完了
OUT M148                 ; 状態復帰完了
LD M148                  ; 状態復帰完了
OR M149                  ; 一時停止処理終了
OUT M149                 ; 一時停止処理終了
MCR
;<h1/>□_自動起動回路
LD CR2002                ; 常時ON
AND M30                  ; 自動ﾓｰﾄﾞ
AND M33                  ; 自動ﾓｰﾄﾞ切替･起動可条件
AND M40                  ; 全U原点
ANB M41                  ; U_起動中
ANB M42                  ; 全U原点復帰中
AND M43                  ; ｲﾆｼｬﾗｲｽﾞ完了ﾌﾗｸﾞ
AND M50                  ; 運転準備
ANB M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ANB M51                  ; 即停止異常(緊急停止)
LDB W00.8                ; PC自動抑制中
OR M3                    ; OFFLINE_MODE
OR M35                   ; 空運転ﾓｰﾄﾞ
ANL
LD L1100                 ; LeakST1_有効状態
OR L1300                 ; LeakST2_有効状態
OR L1700                 ; LeakST3_有効状態
OR L1900                 ; LeakST4_有効状態
OR L10                   ; Leak検査有無(0_有/1_無)
ANL
LD L1200                 ; FINALST1_有効状態
OR L1400                 ; FINALST2_有効状態
OR L1600                 ; FINALST3_有効状態
OR L1800                 ; FINALST4_有効状態
OR L2000                 ; FINALST5_有効状態
OR L2200                 ; FINALST6_有効状態
OR L11                   ; Final検査有無(0_有/1_無)
ANL
OUT M70                  ; 自動起動条件
;<h1/>__運転開始_PCﾁｪｯｸ
LDP M18                  ; 起動PB
AND M70                  ; 自動起動条件
OR M75                   ; 自動運転開始PCﾁｪｯｸ開始
ANB M71                  ; 自動運転開始BZ
ANB M76                  ; PCより起動不可ON
AND M50                  ; 運転準備
MPS
OUT M75                  ; 自動運転開始PCﾁｪｯｸ開始
MPP
LDB M3                   ; OFFLINE_MODE
ANB M35                  ; 空運転ﾓｰﾄﾞ
ANL
OUT W0100.6              ; 起動確認
LD M75                   ; 自動運転開始PCﾁｪｯｸ開始
ANB W00.6                ; 起動可能
AND W00.5                ; 起動確認完了
ANB M3                   ; OFFLINE_MODE
ANB M35                  ; 空運転ﾓｰﾄﾞ
OUT M76                  ; PCより起動不可ON
LD W00.6                 ; 起動可能
AND W00.5                ; 起動確認完了
OR M3                    ; OFFLINE_MODE
OR M35                   ; 空運転ﾓｰﾄﾞ
AND M75                  ; 自動運転開始PCﾁｪｯｸ開始
OUT M77                  ; PCより起動可能ON
;<h1/>__運転開始
LD M77                   ; PCより起動可能ON
OR M71                   ; 自動運転開始BZ
ANB M51                  ; 即停止異常(緊急停止)
ANB M56                  ; 自動起動停止指令(ｻｲｸﾙ停止)
OUT M71                  ; 自動運転開始BZ
@MOV K0 D5520            ; NG_CV_Status
INV
MOV K0 D200              ; 起動時ﾌﾞｻﾞｰｶｳﾝﾄ
;起動時ﾌﾞｻﾞｰ
LD M71                   ; 自動運転開始BZ
AND> K3 D200             ; 起動時ﾌﾞｻﾞｰｶｳﾝﾄ
MPS
ANB T21                  ; 自動起動ﾃﾞｨﾚｲ
TMR K20 K10              ; 起動前BZ_ONﾀｲﾏ
MPP
AND T20                  ; 起動前BZ_ONﾀｲﾏ
TMR K21 K5               ; 自動起動ﾃﾞｨﾚｲ
@CAL+ D200 K1 D200       ; 起動時ﾌﾞｻﾞｰｶｳﾝﾄ  起動時ﾌﾞｻﾞｰｶｳﾝﾄ
LD M71                   ; 自動運転開始BZ
AND= D200 K3             ; 起動時ﾌﾞｻﾞｰｶｳﾝﾄ
OUT M72                  ; 自動運転開始
LD M72                   ; 自動運転開始
OUT M73                  ; 各工程起動指令
;<h1/>__電特再検査品装置内有ﾌﾗｸﾞ
LD= D1205 K1             ; 投入部1_再検査品st
OR= D1205 K2             ; 投入部1_再検査品st
OR= D1205 K3             ; 投入部1_再検査品st
OUT M189                 ; 投入部_再検査品有(ST1‐2)
;____搬送1側
LD<> D1705 K0            ; 搬送ﾍｯﾄﾞ1_再検査品st
OR<> D1805 K0            ; 搬送ﾍｯﾄﾞ2_再検査品st
OUT M181                 ; 搬送RB1_再投入品_有
LD<> D6205 K0            ; Leak_ST1_再検査品st
OUT M182                 ; Leak_ST1_再投入品_有
LD<> D6705 K0            ; Final_ST1_再検査品st
OUT M183                 ; Final_ST1_再投入品_有
LD<> D7205 K0            ; Leak_ST2_再検査品st
OUT M184                 ; Leak_ST2_再投入品_有
LD<> D7705 K0            ; Final_ST2_再検査品st
OUT M185                 ; Final_ST2_再投入品_有
LD<> D8705 K0            ; Final_ST3_再検査品st
OUT M187                 ; Final_ST3_再投入品_有
LDB M181                 ; 搬送RB1_再投入品_有
ANB M182                 ; Leak_ST1_再投入品_有
ANB M183                 ; Final_ST1_再投入品_有
ANB M184                 ; Leak_ST2_再投入品_有
ANB M185                 ; Final_ST2_再投入品_有
ANB M187                 ; Final_ST3_再投入品_有
OUB M180                 ; 搬送1側_再投入品有
;____搬送2側
LD= D1205 K4             ; 投入部1_再検査品st
OR= D1205 K5             ; 投入部1_再検査品st
OR= D1205 K6             ; 投入部1_再検査品st
OUT M199                 ; 投入部_再検査品有(ST3‐4)
LD<> D3705 K0            ; 搬送2ﾊﾝﾄﾞ1_再検査品st
OR<> D3805 K0            ; 搬送2ﾊﾝﾄﾞ2_再検査品st
OUT M191                 ; 搬送RB2_再投入品_有
LD<> D9205 K0            ; Leak_ST3_再検査品st
OUT M192                 ; Leak_ST3_再投入品_有
LD<> D9705 K0            ; Final_ST4_再検査品st
OUT M193                 ; Final_ST4_再投入品_有
LD<> D10205 K0           ; Leak_ST4_再検査品st
OUT M194                 ; Leak_ST4_再投入品_有
LD<> D10705 K0           ; Final_ST5_再検査品st
OUT M195                 ; Final_ST5_再投入品_有
LD<> D11705 K0           ; Final_ST6_再検査品st
OUT M197                 ; Final_ST6_再投入品_有
LDB M191                 ; 搬送RB2_再投入品_有
ANB M192                 ; Leak_ST3_再投入品_有
ANB M193                 ; Final_ST4_再投入品_有
ANB M194                 ; Leak_ST4_再投入品_有
ANB M195                 ; Final_ST5_再投入品_有
ANB M197                 ; Final_ST6_再投入品_有
OUB M190                 ; 搬送2側_再投入品有
;<h1/>__リーク上治具_休息管理
LD> D212 K99             ; 休息設定時間
MOV K1 D212              ; 休息設定時間
LD>= D212 K1             ; 休息設定時間
AND<= D212 K99           ; 休息設定時間
AND<> D212 K0            ; 休息設定時間
OUT M160                 ; ﾘｰｸ上治具_休息待ち時間有効
LD= D1701 K0             ; 搬送ﾍｯﾄﾞ1_ﾜｰｸ有無記憶
AND= D1801 K0            ; 搬送ﾍｯﾄﾞ2_ﾜｰｸ有無記憶
AND= D3701 K0            ; 搬送2ﾊﾝﾄﾞ1_ﾜｰｸ有無記憶
AND= D3801 K0            ; 搬送2ﾊﾝﾄﾞ2_ﾜｰｸ有無記憶
OUT M161                 ; 搬送ﾊﾝﾄﾞ_ﾜｰｸ無し
LD= D6201 K0             ; Leak_ST1_ﾜｰｸ有無記憶
AND= D7201 K0            ; Leak_ST2_ﾜｰｸ有無記憶
AND= D9201 K0            ; Leak_ST3_ﾜｰｸ有無記憶
AND= D10201 K0           ; Leak_ST4_ﾜｰｸ有無記憶
OUT M162                 ; LeakST_ﾜｰｸ無し
LD= D6701 K0             ; Final_ST1_ﾜｰｸ有無記憶
AND= D7701 K0            ; Final_ST2_ﾜｰｸ有無記憶
AND= D8701 K0            ; Final_ST3_ﾜｰｸ有無記憶
AND= D9701 K0            ; Final_ST4_ﾜｰｸ有無記憶
AND= D10701 K0           ; Final_ST5_ﾜｰｸ有無記憶
AND= D11701 K0           ; Final_ST6_ﾜｰｸ有無記憶
OUT M163                 ; FinalST_ﾜｰｸ無し
LD M160                  ; ﾘｰｸ上治具_休息待ち時間有効
AND M161                 ; 搬送ﾊﾝﾄﾞ_ﾜｰｸ無し
AND M162                 ; LeakST_ﾜｰｸ無し
AND M163                 ; FinalST_ﾜｰｸ無し
ANB X1280                ; 給材部ﾜｰｸ有無確認(ON=有)
AND= D1201 K0            ; 投入部1_ﾜｰｸ有無記憶
OUT M169                 ; ﾜｰｸ無し確認
LD M1371                 ; ﾘｰｸ休息ﾓｰﾄﾞｶｳﾝﾄ開始ﾌﾗｸﾞ
AND M169                 ; ﾜｰｸ無し確認
ANB M6071                ; U11-1全異常
ANB M7071                ; U13-1全異常
ANB M9071                ; U17-1全異常
ANB M10071               ; U19-1全異常
ANB M172                 ; ﾘｰｸ上治具_休息指令中
OUT M170                 ; ﾘｰｸ上治具_休息待ちCNT_開始
@MOV K0 D210             ; 休息時間_秒カウント
@MOV K0 D211             ; 休息時間_分カウント
LD M170                  ; ﾘｰｸ上治具_休息待ちCNT_開始
ANP CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
ANB M172                 ; ﾘｰｸ上治具_休息指令中
MPS
INC D210                 ; 休息時間_秒カウント
MPP
AND>= D210 K60           ; 休息時間_秒カウント
INC D211                 ; 休息時間_分カウント
MOV K0 D210              ; 休息時間_秒カウント
LD M170                  ; ﾘｰｸ上治具_休息待ちCNT_開始
AND>= D211 D212          ; 休息時間_分カウント  休息設定時間
OR M6037                 ; U11-1_S37_下降中にｻｲｸﾙ停止中止
OR M172                  ; ﾘｰｸ上治具_休息指令中
AND M71                  ; 自動運転開始BZ
ANB M174                 ; ﾘｰｸ上治具_休息終了
OUT M172                 ; ﾘｰｸ上治具_休息指令中
OUT B0387                ; 903)ﾘｰｸ上治具休息中
LDP B0387                ; 903)ﾘｰｸ上治具休息中
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K903 D13500          ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD B1002                 ; ｽﾀｰﾄPB
OR M1370                 ; ﾘｰｸ休息ﾓｰﾄﾞ中止ﾌﾗｸﾞ
OR M36                   ; 払出ﾓｰﾄﾞ
OR M173                  ; ﾘｰｸ上治具_休息終了_待ち
AND M172                 ; ﾘｰｸ上治具_休息指令中
MPS
TMR K26 K2               ; ﾘｰｸ上治具_休息終了_DLY
MPP
AND T26                  ; ﾘｰｸ上治具_休息終了_DLY
OUT M173                 ; ﾘｰｸ上治具_休息終了_待ち
LD M173                  ; ﾘｰｸ上治具_休息終了_待ち
AND X1303                ; ST1_ﾘｰｸ検査_上治具_上昇端
AND X1323                ; ST2_ﾘｰｸ検査_上治具_上昇端
AND X1343                ; ST3_ﾘｰｸ検査_上治具_上昇端
AND X1363                ; ST4_ﾘｰｸ検査_上治具_上昇端
OUT M174                 ; ﾘｰｸ上治具_休息終了
LD M172                  ; ﾘｰｸ上治具_休息指令中
ANB M173                 ; ﾘｰｸ上治具_休息終了_待ち
OUT M179                 ; ﾘｰｸ上治具_休息指令中
;<h1/>□_原点復帰回路
LDB M72                  ; 自動運転開始
ANB M41                  ; U_起動中
ANB M42                  ; 全U原点復帰中
AND M43                  ; ｲﾆｼｬﾗｲｽﾞ完了ﾌﾗｸﾞ
AND M50                  ; 運転準備
ANB M51                  ; 即停止異常(緊急停止)
ANB M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ANB M60                  ; ｴﾗｰ発生
AND M31                  ; 手動ﾓｰﾄﾞ
OUT M80                  ; 原点復帰可能条件
LD M17                   ; 原点復帰PB
AND M80                  ; 原点復帰可能条件
OR M81                   ; 原点復帰動作中
ANB M86                  ; 装置全原点確認
ANB M51                  ; 即停止異常(緊急停止)
ANB M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ANB M60                  ; ｴﾗｰ発生
ANB T15                  ; 強制停止
OUT M81                  ; 原点復帰動作中
MPS
TMR K22 K5               ; 原点復帰開始ﾃﾞｨﾚｲ
MPP
AND CR2003               ; 常時OFF
TMR K23 K300             ; 原点復帰ﾀｲﾑｵｰﾊﾞｰ
LDP T22                  ; 原点復帰開始ﾃﾞｨﾚｲ
OR M82                   ; 原点復帰開始
AND M81                  ; 原点復帰動作中
ANB M84                  ; 原点復帰起動確認
OUT M82                  ; 原点復帰開始
LD M82                   ; 原点復帰開始
AND M1484                ; U1SupSlider原点復帰中
LD M3484                 ; U5原点復帰中
ORB M99                  ; 能拡後対応FLG
ANL
AND M5484                ; U9原点復帰中
AND M5984                ; U10原点復帰中
AND M6484                ; U11原点復帰中
LD M6984                 ; U12原点復帰中
ORB M99                  ; 能拡後対応FLG
ANL
AND M7484                ; U13原点復帰中
AND M7984                ; U14原点復帰中
AND M8984                ; U16原点復帰中
AND M9484                ; U17原点復帰中
AND M9984                ; U18原点復帰中
AND M10484               ; U19原点復帰中
AND M10984               ; U20原点復帰中
LD M11984                ; U22原点復帰中
ORB M99                  ; 能拡後対応FLG
ANL
OUT M83                  ; 原点復帰全起動確認補助
LD M82                   ; 原点復帰開始
AND M83                  ; 原点復帰全起動確認補助
OR M84                   ; 原点復帰起動確認
AND M81                  ; 原点復帰動作中
ANB M85                  ; 原点復帰完了
OUT M84                  ; 原点復帰起動確認
LD M84                   ; 原点復帰起動確認
ANB M42                  ; 全U原点復帰中
OR M85                   ; 原点復帰完了
AND M81                  ; 原点復帰動作中
ANB M86                  ; 装置全原点確認
OUT M85                  ; 原点復帰完了
LD M85                   ; 原点復帰完了
AND M40                  ; 全U原点
OR M86                   ; 装置全原点確認
AND M81                  ; 原点復帰動作中
OUT M86                  ; 装置全原点確認
;Leak,Final Unclamp状態
LD X1301                 ; ST1_ﾘｰｸ検査_ｺﾈｸﾀｼｰﾙ_後退端
AND X1321                ; ST2_ﾘｰｸ検査_ｺﾈｸﾀｼｰﾙ_後退端
AND X1341                ; ST3_ﾘｰｸ検査_ｺﾈｸﾀｼｰﾙ_後退端
AND X1361                ; ST4_ﾘｰｸ検査_ｺﾈｸﾀｼｰﾙ_後退端
AND X1303                ; ST1_ﾘｰｸ検査_上治具_上昇端
AND X1323                ; ST2_ﾘｰｸ検査_上治具_上昇端
AND X1343                ; ST3_ﾘｰｸ検査_上治具_上昇端
AND X1363                ; ST4_ﾘｰｸ検査_上治具_上昇端
LD X1505                 ; ST1_電特部_ﾜｰｸ押_上昇端
ORB M99                  ; 能拡後対応FLG
ANL
AND X1315                ; ST2_電特部_ﾜｰｸ押_上昇端
AND X1335                ; ST3_電特部_ﾜｰｸ押_上昇端
AND X1355                ; ST4_電特部_ﾜｰｸ押_上昇端
AND X1375                ; ST5_電特部_ﾜｰｸ押_上昇端
LD X1525                 ; ST6_電特部_ﾜｰｸ押_上昇端
ORB M99                  ; 能拡後対応FLG
ANL
OUT M89                  ; 全STﾜｰｸｱﾝｸﾗﾝﾌﾟ状態
;<h1/>□_その他補助回路
;ﾕﾆｯﾄ別動作停止、ﾕﾆｯﾄﾊﾟｽ設定､生産ｶｳﾝﾀ等装置固有の回路がある場合はここ。
;RCX240_CC-LINK初期通信処理
LD CR2002                ; 常時ON
ANB R8400                ; ｴﾗｰ発生
AND R8401                ; Uﾚﾃﾞｨ
OUT M500                 ; CC-LINK_UNIT_OK
;□□　　出力回路　　□□
LD X00                   ; 装置電源入
OUT Y50                  ; 電源入表示
LD CR2003                ; 常時OFF
OUT Y51                  ; ﾗｲﾄｶｰﾃﾝﾘｾｯﾄ
LD M50                   ; 運転準備
OUT Y311                 ; ﾌｧｲﾅﾙ1-3(RB4-6)電源ON
OUT Y312                 ; ﾌｧｲﾅﾙ4-6(RB7-9)電源ON
LD M54                   ; 異常ﾌﾞｻﾞｰ
LD M51                   ; 即停止異常(緊急停止)
OR M52                   ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ANL
LDB M6414                ; ｾｯﾄ不可ﾌﾞｻﾞｰ(ｴﾘｱｾﾝｻ検出中)
ANB M7414                ; ｾｯﾄ不可ﾌﾞｻﾞｰ(ｴﾘｱｾﾝｻ検出中)
ANB M9414                ; ｾｯﾄ不可ﾌﾞｻﾞｰ(ｴﾘｱｾﾝｻ検出中)
ANB M10414               ; ｾｯﾄ不可ﾌﾞｻﾞｰ(ｴﾘｱｾﾝｻ検出中)
INV
ANB M54                  ; 異常ﾌﾞｻﾞｰ
ORL
OUT M502                 ; 異常停止_連続ﾌﾞｻﾞｰ
LD M54                   ; 異常ﾌﾞｻﾞｰ
LD M59                   ; 払出停止異常まとめ
OR M60                   ; ｴﾗｰ発生
ANL
OUT M503                 ; ｴﾗｰ発生_ﾌﾞｻﾞｰ_0.5
LD M54                   ; 異常ﾌﾞｻﾞｰ
AND M53                  ; 警報(ﾜｰｸ不足等)
ANB M502                 ; 異常停止_連続ﾌﾞｻﾞｰ
ANB M503                 ; ｴﾗｰ発生_ﾌﾞｻﾞｰ_0.5
OUT M504                 ; 警報_ﾌﾞｻﾞｰ_0.5
LD M54                   ; 異常ﾌﾞｻﾞｰ
ANB M502                 ; 異常停止_連続ﾌﾞｻﾞｰ
ANB M503                 ; ｴﾗｰ発生_ﾌﾞｻﾞｰ_0.5
ANB M504                 ; 警報_ﾌﾞｻﾞｰ_0.5
OUT M505                 ; その他_ﾌﾞｻﾞｰ_1.0
LDB M54                  ; 異常ﾌﾞｻﾞｰ
AND M30                  ; 自動ﾓｰﾄﾞ
LD B0320                 ; 800)lightｶｰﾃﾝ遮光中
OR B0322                 ; 802)安全ドア開
ANL
ANB M37                  ; ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
OUT M510                 ; 自動時_安全ﾄﾞｱ開_ﾌﾞｻﾞｰ_1.0
LDB M54                  ; 異常ﾌﾞｻﾞｰ
LD M37                   ; ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
OR M39                   ; ｴﾘｱｾﾝｻ-無視Mode
ANL
OUT M511                 ; IL解除中_ﾌﾞｻﾞｰ_10.0
LD M71                   ; 自動運転開始BZ
AND> K3 D200             ; 起動時ﾌﾞｻﾞｰｶｳﾝﾄ
OUT M520                 ; 自動運転開始_ﾌﾞｻﾞｰ_1.0
LDB M502                 ; 異常停止_連続ﾌﾞｻﾞｰ
INV
LDB M503                 ; ｴﾗｰ発生_ﾌﾞｻﾞｰ_0.5
ANB M504                 ; 警報_ﾌﾞｻﾞｰ_0.5
INV
AND T4                   ; ﾌﾞｻﾞｰ音程ﾀｲﾏ1_0.5sec
ORL
LDB M505                 ; その他_ﾌﾞｻﾞｰ_1.0
ANB M510                 ; 自動時_安全ﾄﾞｱ開_ﾌﾞｻﾞｰ_1.0
INV
AND T8                   ; ﾌﾞｻﾞｰ音程ﾀｲﾏ3_1.0sec
ORL
LDB M511                 ; IL解除中_ﾌﾞｻﾞｰ_10.0
INV
AND T36                  ; ｲﾝﾀｰﾛｯｸ解除音程ﾀｲﾏ_10.0sec
ORL
LDB M520                 ; 自動運転開始_ﾌﾞｻﾞｰ_1.0
INV
ANB T20                  ; 起動前BZ_ONﾀｲﾏ
ORL
OUT Y31B                 ; ﾒｲﾝﾊﾟﾈﾙ_ﾌﾞｻﾞｰ
OUT Y31C                 ; ｼｸﾞﾅﾙﾀﾜｰ_ﾌﾞｻﾞｰ
LD CR2003                ; 常時OFF
TMR K45 K600             ; 投入要求ﾌﾞｻﾞｰ自動停止
;<h1/>□_ｼｸﾞﾅﾙﾀﾜｰ
LDB M51                  ; 即停止異常(緊急停止)
ANB M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ANB M60                  ; ｴﾗｰ発生
ANB M59                  ; 払出停止異常まとめ
INV
OUT Y31D                 ; ｼｸﾞﾅﾙﾀﾜｰ_赤
OUT W0100.8              ; ﾀﾜｰﾗｲﾄ赤
LD M53                   ; 警報(ﾜｰｸ不足等)
OUT Y31E                 ; ｼｸﾞﾅﾙﾀﾜｰ_黄
OUT W0100.9              ; ﾀﾜｰﾗｲﾄ黄
LD M71                   ; 自動運転開始BZ
AND M71                  ; 自動運転開始BZ
ANB T20                  ; 起動前BZ_ONﾀｲﾏ
AND> K3 D200             ; 起動時ﾌﾞｻﾞｰｶｳﾝﾄ
OR M73                   ; 各工程起動指令
OR M41                   ; U_起動中
LD M42                   ; 全U原点復帰中
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
ORL
OUT Y31F                 ; ｼｸﾞﾅﾙﾀﾜｰ_緑
OUT W0100.10             ; ﾀﾜｰﾗｲﾄ緑
;<h1/>□_画面切替管理
;※画面切替管理は別ﾓｼﾞｭｰﾙを作成しても良い。
;□□　　ﾀｯﾁﾊﾟﾈﾙ表示　　□□
LDB M0                   ; 常時OFF
@MOV K0 D58              ; TpM-K_切替ページNo．
MPS
AND T11                  ; タッチパネル_ロゴ表示終了
@MOV K1 D58              ; TpM-K_切替ページNo．
MRD
@MOV K2 D70              ; TP_言語切替
MPP
AND>= D70 K3             ; TP_言語切替
@MOV K0 D70              ; TP_言語切替
LD M40                   ; 全U原点
LD M81                   ; 原点復帰動作中
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
ORL
OUT B1500                ; 原点復帰TP-PL
LD M30                   ; 自動ﾓｰﾄﾞ
OUT B1501                ; 自動/手動TP-PL
LD M30                   ; 自動ﾓｰﾄﾞ
LD M71                   ; 自動運転開始BZ
OR M41                   ; U_起動中
ANL
ANB M179                 ; ﾘｰｸ上治具_休息指令中
LD M179                  ; ﾘｰｸ上治具_休息指令中
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
ORL
OUT B1502                ; 起動TP-PL
LDB M41                  ; U_起動中
ANB M71                  ; 自動運転開始BZ
ANB M36                  ; 払出ﾓｰﾄﾞ
LD M36                   ; 払出ﾓｰﾄﾞ
OR M56                   ; 自動起動停止指令(ｻｲｸﾙ停止)
LD M41                   ; U_起動中
OR M71                   ; 自動運転開始BZ
ANL
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
ORL
OUT B1503                ; 停止TP-PL
LDB M53                  ; 警報(ﾜｰｸ不足等)
OR CR2002                ; 常時ON
ANB M54                  ; 異常ﾌﾞｻﾞｰ
INV
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OUT B1510                ; ﾌﾞｻﾞｰ停止PL
LDB M51                  ; 即停止異常(緊急停止)
ANB M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ANB M59                  ; 払出停止異常まとめ
ANB M60                  ; ｴﾗｰ発生
ANB M13300               ; PCﾌﾞｻﾞｰ要求(PC_Busy)
INV
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OUT B1511                ; ｴﾗｰﾘｾｯﾄPL
LD M130                  ; 一時停止
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR M132                  ; 全U停止OK
OUT B1512                ; 一時停止PL
LD M37                   ; ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OUT B1515                ; ｲﾝﾀｰﾛｯｸｷｬﾝｾﾙ中PL
LD M35                   ; 空運転ﾓｰﾄﾞ
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OUT B1516                ; DRY_RUN_PL
LD M38                   ; 段取りﾓｰﾄﾞ
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OUT B1517                ; 段取り_PL
LDB M51                  ; 即停止異常(緊急停止)
ANB M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ANB M56                  ; 自動起動停止指令(ｻｲｸﾙ停止)
ANB M57                  ; 自動起動停止指令(払出停止)
ANB M59                  ; 払出停止異常まとめ
ANB M60                  ; ｴﾗｰ発生
OUB B1518                ; ｴﾗｰsw表示
LD M3                    ; OFFLINE_MODE
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OUT B151E                ; PC_Offline Mode
;メッセージ表示
LDB M41                  ; U_起動中
ANB M71                  ; 自動運転開始BZ
ANB M51                  ; 即停止異常(緊急停止)
ANB M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ANB M56                  ; 自動起動停止指令(ｻｲｸﾙ停止)
ANB M57                  ; 自動起動停止指令(払出停止)
ANB M59                  ; 払出停止異常まとめ
ANB M60                  ; ｴﾗｰ発生
MPS
ANB M43                  ; ｲﾆｼｬﾗｲｽﾞ完了ﾌﾗｸﾞ
OUT B0384                ; 900)ｲﾆｼｬﾗｲｽﾞ中表示
MPP
LDB M90                  ; ｲﾆｼｬﾗｲｽﾞ中表示
ANB M81                  ; 原点復帰動作中
ANB M40                  ; 全U原点
ANB B0384                ; 900)ｲﾆｼｬﾗｲｽﾞ中表示
ANL
OUT B0385                ; 901)原点復帰要求
LD M81                   ; 原点復帰動作中
OUT B0386                ; 902)原点復帰中
LDP B0384                ; 900)ｲﾆｼｬﾗｲｽﾞ中表示
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K900 D13500          ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LDP B0385                ; 901)原点復帰要求
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K901 D13500          ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LDP B0386                ; 902)原点復帰中
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K902 D13500          ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
;<h1/>□_主幹異常
;ﾒｲﾝ回路に関連する異常はここにまとめる。
LDB M121                 ; 非常停止正常
LD CR2003                ; 常時OFF
ANB B0501                ; 非常停止異常BZ停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B01                  ; 001)非常停止異常
ORL
OUT B01                  ; 001)非常停止異常
LDP B01                  ; 001)非常停止異常
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K1001 D13500         ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0501                 ; 非常停止異常BZ停止
AND B01                  ; 001)非常停止異常
OUT B0501                ; 非常停止異常BZ停止
;
LD M50                   ; 運転準備
ANB M120                 ; 圧空正常
LD CR2003                ; 常時OFF
ANB B0502                ; 圧空低下異常BZ停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B02                  ; 002)圧空低下異常
ORL
MPS
TMR K80 K50              ; 圧空低下確認
MPP
AND T80                  ; 圧空低下確認
OUT B02                  ; 002)圧空低下異常
LDP B02                  ; 002)圧空低下異常
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K1002 D13500         ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0502                 ; 圧空低下異常BZ停止
AND B02                  ; 002)圧空低下異常
OUT B0502                ; 圧空低下異常BZ停止
;
LDB M123                 ; 安全扉正常
AND M30                  ; 自動ﾓｰﾄﾞ
AND CR2003               ; 常時OFF
OUT B03                  ; 003)安全扉開異常
LDP B03                  ; 003)安全扉開異常
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K1003 D13500         ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0503                 ; 安全扉開異常BZ停止
AND B03                  ; 003)安全扉開異常
OUT B0503                ; 安全扉開異常BZ停止
;
LD T23                   ; 原点復帰ﾀｲﾑｵｰﾊﾞｰ
LD CR2003                ; 常時OFF
ANB B0504                ; 原点復帰ｻｲｸﾙﾀｲﾑｵｰﾊﾞｰBZ停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B04                  ; 004)原点復帰ｻｲｸﾙﾀｲﾑｵｰﾊﾞｰ
ORL
OUT B04                  ; 004)原点復帰ｻｲｸﾙﾀｲﾑｵｰﾊﾞｰ
LDP B04                  ; 004)原点復帰ｻｲｸﾙﾀｲﾑｵｰﾊﾞｰ
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K1004 D13500         ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0504                 ; 原点復帰ｻｲｸﾙﾀｲﾑｵｰﾊﾞｰBZ停止
AND B04                  ; 004)原点復帰ｻｲｸﾙﾀｲﾑｵｰﾊﾞｰ
OUT B0504                ; 原点復帰ｻｲｸﾙﾀｲﾑｵｰﾊﾞｰBZ停止
;
LD M50                   ; 運転準備
ANB M122                 ; 外部非常停止正常
LD CR2003                ; 常時OFF
ANB B0505                ; 外部非常停止BZ停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B05                  ; 005)外部非常停止
ORL
OUT B05                  ; 005)外部非常停止
LDP B05                  ; 005)外部非常停止
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K1005 D13500         ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0505                 ; 外部非常停止BZ停止
AND B05                  ; 005)外部非常停止
OUT B0505                ; 外部非常停止BZ停止
;
LD CR3905                ; 重度ｴﾗｰ発生中
LD CR2003                ; 常時OFF
ANB B0506                ; PLC異常BZ停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B06                  ; 006)PLC異常
ORL
OUT B06                  ; 006)PLC異常
LDP B06                  ; 006)PLC異常
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K1006 D13500         ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0506                 ; PLC異常BZ停止
AND B06                  ; 006)PLC異常
OUT B0506                ; PLC異常BZ停止
;
LD M5                    ; 運転準備補助
AND R8400                ; ｴﾗｰ発生
LDB R9200                ; 他局通信状態
ANB R9201                ; 他局WDTｴﾗｰ状態
ANB R9202                ; 他局ﾋｭｰｽﾞ断状態
INV
AND M5                   ; 運転準備補助
AND R8401                ; Uﾚﾃﾞｨ
ORL
LD CR2003                ; 常時OFF
ANB B0507                ; ﾘﾝｸ異常BZ停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B07                  ; 007)ﾘﾝｸ異常
ORL
OUT B07                  ; 007)ﾘﾝｸ異常
LDP B07                  ; 007)ﾘﾝｸ異常
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K1007 D13500         ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0507                 ; ﾘﾝｸ異常BZ停止
AND B07                  ; 007)ﾘﾝｸ異常
OUT B0507                ; ﾘﾝｸ異常BZ停止
;
LD CR2306                ; ﾊﾞｯｸｱｯﾌﾟ電池異常
ANB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
LD CR2003                ; 常時OFF
ANB B0508                ; PLCﾊﾞｯﾃﾘ低下BZ停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B08                  ; 008)PLCﾊﾞｯﾃﾘ低下
ORL
MPS
TMR K50 K18000           ; CPUﾊﾞｯﾃﾘ異常ﾀｲﾏ
MPP
AND T50                  ; CPUﾊﾞｯﾃﾘ異常ﾀｲﾏ
OUT B08                  ; 008)PLCﾊﾞｯﾃﾘ低下
LDP B08                  ; 008)PLCﾊﾞｯﾃﾘ低下
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K8 D13500            ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0508                 ; PLCﾊﾞｯﾃﾘ低下BZ停止
AND B08                  ; 008)PLCﾊﾞｯﾃﾘ低下
OUT B0508                ; PLCﾊﾞｯﾃﾘ低下BZ停止
;
LDP M10                  ; 自動/手動PB
ANB M40                  ; 全U原点
ANB M41                  ; U_起動中
ANB M71                  ; 自動運転開始BZ
LD CR2003                ; 常時OFF
ANB B050A                ; 原点未完ﾓｰﾄﾞ切替不可異常BZ停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0A                  ; 010)原点未完ﾓｰﾄﾞ切替不可異常
ORL
OUT B0A                  ; 010)原点未完ﾓｰﾄﾞ切替不可異常
LDP B0A                  ; 010)原点未完ﾓｰﾄﾞ切替不可異常
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K10 D13500           ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B050A                 ; 原点未完ﾓｰﾄﾞ切替不可異常BZ停止
AND B0A                  ; 010)原点未完ﾓｰﾄﾞ切替不可異常
OUT B050A                ; 原点未完ﾓｰﾄﾞ切替不可異常BZ停止
;
LD T0                    ; 電源投入0Nﾃﾞｨﾚｲ
ANB M300                 ; PC通信正常
AND M30                  ; 自動ﾓｰﾄﾞ
LD CR2003                ; 常時OFF
ANB B050B                ; 10)_PC通信異常BZOFF
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0B                  ; 011)PC通信異常
ORL
ANB M3                   ; OFFLINE_MODE
OUT B0B                  ; 011)PC通信異常
LDP B0B                  ; 011)PC通信異常
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K1011 D13500         ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B050B                 ; 10)_PC通信異常BZOFF
AND B0B                  ; 011)PC通信異常
OUT B050B                ; 10)_PC通信異常BZOFF
;
LD W00.1                 ; PC Error
LD CR2003                ; 常時OFF
ANB B050C                ; 11)_PC_Error_BZOFF
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0C                  ; 012)PCｴﾗｰ
ORL
ANB M3                   ; OFFLINE_MODE
OUT B0C                  ; 012)PCｴﾗｰ
LDP B0C                  ; 012)PCｴﾗｰ
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K1012 D13500         ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B050C                 ; 11)_PC_Error_BZOFF
AND B0C                  ; 012)PCｴﾗｰ
OUT B050C                ; 11)_PC_Error_BZOFF
;
;'/// 衝突防止IL ///
;D100.L = D20030.L + D20014.L '衝突防止IL座標
LD CR2002                ; 常時ON
NCJ K1000
;'/// 衝突防止IL ///
;
;D100.L = D20030.L + D20014.L '衝突防止IL座標
LD CR2002                ; 常時ON
LDA.L D20030             ; #06_RWr00A_汎用SOD10
CON
ADD.L D20014             ; #02_RWr00A_X軸現在値10
CON
STA.L D100               ; 衝突防止演算ｴﾘｱ
LABEL K1000
;
LD= D1530 K11            ; RB2_XY軸ﾃﾞｰﾀ指定
OR= D1530 K15            ; RB2_XY軸ﾃﾞｰﾀ指定
OR= D1530 K71            ; RB2_XY軸ﾃﾞｰﾀ指定
OR= D1530 K75            ; RB2_XY軸ﾃﾞｰﾀ指定
OR= D1534 K211           ; RB2_Z軸ﾃﾞｰﾀ指定
OR= D1534 K215           ; RB2_Z軸ﾃﾞｰﾀ指定
LD= D3530 K11            ; RB2_XY軸ﾃﾞｰﾀ指定
OR= D3530 K15            ; RB2_XY軸ﾃﾞｰﾀ指定
OR= D3530 K71            ; RB2_XY軸ﾃﾞｰﾀ指定
OR= D3530 K75            ; RB2_XY軸ﾃﾞｰﾀ指定
OR= D3534 K211           ; RB2_Z軸ﾃﾞｰﾀ指定
OR= D3534 K215           ; RB2_Z軸ﾃﾞｰﾀ指定
ANL
OUT M100                 ; RB衝突防止(ONで異常)
LDB X1041                ; #02_RB2-WSlider不干渉(Area)_41
AND X1029                ; #02_RX009_原点復帰完了状態
ANB X1121                ; #06_RB3-WSlider不干渉(Area)_41
AND X1109                ; #06_RX009_原点復帰完了状態
AND M5959                ; RB2，3ｴﾘｱ干渉監視
LD X110B                 ; #06_RX00B_ﾛﾎﾞｯﾄﾌﾟﾛｸﾞﾗﾑ実行状態
OR X1114                 ; #06_RX014_PRG_RUN_24
LD X102B                 ; #02_RX00B_ﾛﾎﾞｯﾄﾌﾟﾛｸﾞﾗﾑ実行状態
OR X1034                 ; #02_RX014_PRG_RUN_24
ANL
AND>=.L D100 +215300     ; 衝突防止演算ｴﾘｱ
ORL
OR M100                  ; RB衝突防止(ONで異常)
AND T10                  ; 運転準備ﾃﾞｨﾚｲ
LDB X1044                ; #02_RB2_NGCVより内ｴﾘｱ_44
AND X1029                ; #02_RX009_原点復帰完了状態
ANB X1124                ; #06_RB3_OKCVより内ｴﾘｱ_44
AND X1109                ; #06_RX009_原点復帰完了状態
ANB M30                  ; 自動ﾓｰﾄﾞ
ANB M81                  ; 原点復帰動作中
ORL
LD CR2003                ; 常時OFF
ANB B050D
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0D                  ; 013)WSlider衝突防止IL
ORL
OUT B0D                  ; 013)WSlider衝突防止IL
@MOV D1530 D106          ; RB2_XY軸ﾃﾞｰﾀ指定  衝突防止検知時のRB2ｺﾏﾝﾄﾞ控え
@MOV D1532 D120          ; XY軸_動作完了NO.
@MOV D1534 D121          ; RB2_Z軸ﾃﾞｰﾀ指定
@MOV D3530 D107          ; RB2_XY軸ﾃﾞｰﾀ指定  衝突防止検知時のRB3ｺﾏﾝﾄﾞ控え
@MOV D3532 D122          ; XY軸_動作完了NO.
@MOV D3534 D123          ; RB2_Z軸ﾃﾞｰﾀ指定
@MOV D1534 D108          ; RB2_Z軸ﾃﾞｰﾀ指定  衝突防止検知時のRB2ｺﾏﾝﾄﾞ控え
@MOV D3534 D109          ; RB2_Z軸ﾃﾞｰﾀ指定  衝突防止検知時のRB3ｺﾏﾝﾄﾞ控え
@MOV.L D100 D110         ; 衝突防止演算ｴﾘｱ
LDP B0D                  ; 013)WSlider衝突防止IL
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K1013 D13500         ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B050D
AND B0D                  ; 013)WSlider衝突防止IL
OUT B050D
;
LDB X302                 ; EMG_ON(ﾊﾝﾃﾞｨ)
LD CR2003                ; 常時OFF
ANB B0517                ; EMG_STOP(ﾊﾝﾃﾞｨ)BZ停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B017                 ; 023)EMGSTOP(ﾊﾝﾃﾞｨ)
ORL
OUT B017                 ; 023)EMGSTOP(ﾊﾝﾃﾞｨ)
LDP B017                 ; 023)EMGSTOP(ﾊﾝﾃﾞｨ)
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K1023 D13500         ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0517                 ; EMG_STOP(ﾊﾝﾃﾞｨ)BZ停止
AND B017                 ; 023)EMGSTOP(ﾊﾝﾃﾞｨ)
OUT B0517                ; EMG_STOP(ﾊﾝﾃﾞｨ)BZ停止
;
LDB X303                 ; EMG_ON(操作ﾊﾟﾈﾙ)
LD CR2003                ; 常時OFF
ANB B0518                ; EMG_STOP(操作ﾊﾟﾈﾙ)BZ停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B018                 ; 024)EMGSTOP(操作ﾊﾟﾈﾙ)
ORL
OUT B018                 ; 024)EMGSTOP(操作ﾊﾟﾈﾙ)
LDP B018                 ; 024)EMGSTOP(操作ﾊﾟﾈﾙ)
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K1024 D13500         ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0518                 ; EMG_STOP(操作ﾊﾟﾈﾙ)BZ停止
AND B018                 ; 024)EMGSTOP(操作ﾊﾟﾈﾙ)
OUT B0518                ; EMG_STOP(操作ﾊﾟﾈﾙ)BZ停止
;
LD CR2003                ; 常時OFF
LD CR2003                ; 常時OFF
ANB B0519                ; EMG_STOP(ﾜｰｸ投入部)BZ停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B019                 ; 025)EMGSTOP(ﾜｰｸ投入部)
ORL
OUT B019                 ; 025)EMGSTOP(ﾜｰｸ投入部)
LDP B019                 ; 025)EMGSTOP(ﾜｰｸ投入部)
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K1025 D13500         ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0519                 ; EMG_STOP(ﾜｰｸ投入部)BZ停止
AND B019                 ; 025)EMGSTOP(ﾜｰｸ投入部)
OUT B0519                ; EMG_STOP(ﾜｰｸ投入部)BZ停止
;
LDB X305                 ; EMG_ON(ﾘｰｸ検査ST1-2)
LD CR2003                ; 常時OFF
ANB B051A                ; EMG_STOP(ﾘｰｸ検査ST2-2)BZ停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B01A                 ; 026)EMGSTOP(ﾘｰｸ検査ST1-2)
ORL
OUT B01A                 ; 026)EMGSTOP(ﾘｰｸ検査ST1-2)
LDP B01A                 ; 026)EMGSTOP(ﾘｰｸ検査ST1-2)
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K1026 D13500         ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B051A                 ; EMG_STOP(ﾘｰｸ検査ST2-2)BZ停止
AND B01A                 ; 026)EMGSTOP(ﾘｰｸ検査ST1-2)
OUT B051A                ; EMG_STOP(ﾘｰｸ検査ST2-2)BZ停止
;
LDB X306                 ; EMG_ON(ﾘｰｸ検査ST3-4)
LD CR2003                ; 常時OFF
ANB B051B                ; EMG_STOP(ﾘｰｸ検査ST3-4)BZ停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B01B                 ; 027)EMGSTOP(ﾘｰｸ検査ST3-4)
ORL
OUT B01B                 ; 027)EMGSTOP(ﾘｰｸ検査ST3-4)
LDP B01B                 ; 027)EMGSTOP(ﾘｰｸ検査ST3-4)
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K1027 D13500         ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B051B                 ; EMG_STOP(ﾘｰｸ検査ST3-4)BZ停止
AND B01B                 ; 027)EMGSTOP(ﾘｰｸ検査ST3-4)
OUT B051B                ; EMG_STOP(ﾘｰｸ検査ST3-4)BZ停止
;
LDB X307                 ; EMG_ON(ﾌｧｲﾅﾙ検査ST1-2)
LD CR2003                ; 常時OFF
ANB B051C                ; EMG_STOP(ﾌｧｲﾅﾙ検査ST2-2)BZ停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B01C                 ; 028)EMGSTOP(ﾌｧｲﾅﾙ検査ST2-2)
ORL
OUT B01C                 ; 028)EMGSTOP(ﾌｧｲﾅﾙ検査ST2-2)
LDP B01C                 ; 028)EMGSTOP(ﾌｧｲﾅﾙ検査ST2-2)
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K1028 D13500         ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B051C                 ; EMG_STOP(ﾌｧｲﾅﾙ検査ST2-2)BZ停止
AND B01C                 ; 028)EMGSTOP(ﾌｧｲﾅﾙ検査ST2-2)
OUT B051C                ; EMG_STOP(ﾌｧｲﾅﾙ検査ST2-2)BZ停止
;
LDB X308                 ; EMG_ON(ﾌｧｲﾅﾙ検査ST3-4)
LD CR2003                ; 常時OFF
ANB B051D                ; EMG_STOP(ﾌｧｲﾅﾙ検査ST3-4)BZ停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B01D                 ; 029)EMGSTOP(ﾌｧｲﾅﾙ検査ST3-4)
ORL
OUT B01D                 ; 029)EMGSTOP(ﾌｧｲﾅﾙ検査ST3-4)
LDP B01D                 ; 029)EMGSTOP(ﾌｧｲﾅﾙ検査ST3-4)
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K1029 D13500         ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B051D                 ; EMG_STOP(ﾌｧｲﾅﾙ検査ST3-4)BZ停止
AND B01D                 ; 029)EMGSTOP(ﾌｧｲﾅﾙ検査ST3-4)
OUT B051D                ; EMG_STOP(ﾌｧｲﾅﾙ検査ST3-4)BZ停止
;
LDB X30C                 ; EMG_ON(ｺﾝﾍﾞﾔ部)
LD CR2003                ; 常時OFF
ANB B051E                ; 030)EMGSTOP(CV)BZ停止
ORB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B01E                 ; 030)EMGSTOP(CV)
ORL
OUT B01E                 ; 030)EMGSTOP(CV)
LDP B01E                 ; 030)EMGSTOP(CV)
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K1030 D13500         ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B051E                 ; 030)EMGSTOP(CV)BZ停止
AND B01E                 ; 030)EMGSTOP(CV)
OUT B051E                ; 030)EMGSTOP(CV)BZ停止
LD M124                  ; ｴﾘｱｾﾝｻ正常
ORB X04                  ; 供給部扉閉確認
INV
LD<> D50 K20             ; TpM-K_表示中ページNo.
OR M30                   ; 自動ﾓｰﾄﾞ
ANL
MPS
TMR K42 K30              ; 800)供給部ﾄﾞｱ開遮光発報ﾃﾞｨﾚｲ
MPP
AND T42                  ; 800)供給部ﾄﾞｱ開遮光発報ﾃﾞｨﾚｲ
OUT B0320                ; 800)lightｶｰﾃﾝ遮光中
LDP B0320                ; 800)lightｶｰﾃﾝ遮光中
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K800 D13500          ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
LD M123                  ; 安全扉正常
INV
LD<> D50 K20             ; TpM-K_表示中ページNo.
OR M30                   ; 自動ﾓｰﾄﾞ
ANL
OUT B0322                ; 802)安全ドア開
LDP B0322                ; 802)安全ドア開
AND< D13510 K64          ; FIFO_DATA_VALUE
MOV K802 D13500          ; ALM_WRITE_CODE(複合)
FIFOW D13500 D13510      ; ALM_WRITE_CODE(複合)  FIFO_DATA_VALUE
;異常ﾌﾞｻﾞｰまとめ
LDB B01                  ; 001)非常停止異常
OR B0501                 ; 非常停止異常BZ停止
LDB B02                  ; 002)圧空低下異常
OR B0502                 ; 圧空低下異常BZ停止
ANL
LDB B03                  ; 003)安全扉開異常
OR B0503                 ; 安全扉開異常BZ停止
ANL
LDB B04                  ; 004)原点復帰ｻｲｸﾙﾀｲﾑｵｰﾊﾞｰ
OR B0504                 ; 原点復帰ｻｲｸﾙﾀｲﾑｵｰﾊﾞｰBZ停止
ANL
LDB B05                  ; 005)外部非常停止
OR B0505                 ; 外部非常停止BZ停止
ANL
LDB B06                  ; 006)PLC異常
OR B0506                 ; PLC異常BZ停止
ANL
LDB B07                  ; 007)ﾘﾝｸ異常
OR B0507                 ; ﾘﾝｸ異常BZ停止
ANL
LDB B08                  ; 008)PLCﾊﾞｯﾃﾘ低下
OR B0508                 ; PLCﾊﾞｯﾃﾘ低下BZ停止
ANL
LDB B0A                  ; 010)原点未完ﾓｰﾄﾞ切替不可異常
OR B050A                 ; 原点未完ﾓｰﾄﾞ切替不可異常BZ停止
ANL
LDB B0B                  ; 011)PC通信異常
OR B050B                 ; 10)_PC通信異常BZOFF
ANL
LDB B0C                  ; 012)PCｴﾗｰ
OR B050C                 ; 11)_PC_Error_BZOFF
ANL
LDB B0C                  ; 012)PCｴﾗｰ
OR B050C                 ; 11)_PC_Error_BZOFF
ANL
LDB B0D                  ; 013)WSlider衝突防止IL
OR B050D
ANL
LDB B0E                  ; 014)
OR B050E
ANL
LDB B012                 ; 018)
OR B0512
ANL
LDB B013                 ; 019)
OR B0513
ANL
LDB B014                 ; 020)
OR B0514
ANL
LDB B015                 ; 021)
OR B0515
ANL
LDB B016                 ; 022)
OR B0516
ANL
INV
OUT M200                 ; ﾒｲﾝ異常BZ まとめ
;□JIGIDﾁｪｯｸ
LD= D1050 D1210          ; 投入部部JIG_ID  投入部1_投入ﾊﾟﾚｯﾄID
OUT M150                 ; input 部JIG_ID_OK
LD= D6100 D1211          ; LeakST1_上治具ID  投入部1_Leak上治具ID
AND= D6101 D1212         ; LeakST1_下治具ID  投入部1_Leak下治具ID
OUT M151                 ; ﾘｰｸST2部JIG_ID_OK
LD= D6600 D1214          ; FinalST1_ｺﾝﾀｸﾄﾍｯﾄﾞID  投入部1_電特ﾃｽﾄﾍｯﾄﾞID
AND= D6601 D1213         ; FinalST1_ﾊﾟﾚｯﾄID  投入部1_電特ﾊﾟﾚｯﾄID
OUT M152                 ; final ST2部JIG_ID_OK
LD= D1210 K0             ; 投入部1_投入ﾊﾟﾚｯﾄID
OUT M155                 ; input 部 jig OK_NG mask
;□ｻｲｸﾙﾀｲﾑ計測
LDB M1620                ; U2_S120_供給→搬送ﾃﾞｰﾀｼﾌﾄ
ANB M3620                ; U6_S120_供給→搬送ﾃﾞｰﾀｼﾌﾄ
INV
OUT M210                 ; ｻｲｸﾙﾀｲﾑ計測開始
LD M71                   ; 自動運転開始BZ
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
@INC E0                  ; ｻｲｸﾙﾀｲﾑ計測時間
LDP M210                 ; ｻｲｸﾙﾀｲﾑ計測開始
BMOV E0 E1 K99           ; ｻｲｸﾙﾀｲﾑ計測時間  ｻｲｸﾙﾀｲﾑ
MOV K0 E0                ; ｻｲｸﾙﾀｲﾑ計測時間
MPS
AND> K100 E110           ; ｻｲｸﾙﾀｲﾑ計測回数
INC E110                 ; ｻｲｸﾙﾀｲﾑ計測回数
MPP
AVG E1 E110              ; ｻｲｸﾙﾀｲﾑ  ｻｲｸﾙﾀｲﾑ計測回数
CON
STA E112
LD B1002                 ; ｽﾀｰﾄPB
AND B1001                ; 自動/手動PB
OR M48
@FMOV K0 E0 K120         ; ｻｲｸﾙﾀｲﾑ計測時間
;Leak All ST ﾁｬﾝﾊﾞｰ Up/Down 
LD M129                  ; 安全入力OK
LD M2809                 ; ﾘｰｸ不干渉位置
OR M4809                 ; Leak不干渉位置
ANL
AND M4809                ; Leak不干渉位置
LD<> D6107 K0            ; LeakST1_下治具ID_ｾﾝｻｰ状態
AND X1304                ; ST1_ﾘｰｸ検査_下治具位置決1下降端
AND X1306                ; ST1_ﾘｰｸ検査_下治具位置決2下降端
OR= D6107 K0             ; LeakST1_下治具ID_ｾﾝｻｰ状態
ANL
LD<> D7107 K0            ; LeakST2_下治具ID_ｾﾝｻｰ状態
AND X1324                ; ST2_ﾘｰｸ検査_下治具位置決1下降端
AND X1326                ; ST2_ﾘｰｸ検査_下治具位置決2下降端
OR= D7107 K0             ; LeakST2_下治具ID_ｾﾝｻｰ状態
ANL
LD<> D9107 K0            ; LeakST3_下治具ID_ｾﾝｻｰ状態
AND X1344                ; ST3_ﾘｰｸ検査_下治具位置決1下降端
AND X1346                ; ST3_ﾘｰｸ検査_下治具位置決2下降端
OR= D9107 K0             ; LeakST3_下治具ID_ｾﾝｻｰ状態
ANL
LD<> D10107 K0           ; LeakST4_下治具ID_ｾﾝｻｰ状態
AND X1364                ; ST4_ﾘｰｸ検査_下治具位置決1下降端
AND X1366                ; ST4_ﾘｰｸ検査_下治具位置決2下降端
OR= D10107 K0            ; LeakST4_下治具ID_ｾﾝｻｰ状態
ANL
OUT M220                 ; 全Leak ST_ﾁｬﾝﾊﾞｰ下降条件
LDP B100A                ; 全Leak ST_ﾁｬﾝﾊﾞｰ下降SW
AND M220                 ; 全Leak ST_ﾁｬﾝﾊﾞｰ下降条件
OR M221                  ; 全Leak ST_ﾁｬﾝﾊﾞｰ下降指令
AND B100A                ; 全Leak ST_ﾁｬﾝﾊﾞｰ下降SW
AND M50                  ; 運転準備
AND M124                 ; ｴﾘｱｾﾝｻ正常
OUT M221                 ; 全Leak ST_ﾁｬﾝﾊﾞｰ下降指令
LD M221                  ; 全Leak ST_ﾁｬﾝﾊﾞｰ下降指令
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
LD T1122                 ; ST1_Leak検査_上治具_下降端
AND T1322                ; ST2_Leak検査_上治具_下降端
AND T1722                ; ST3_Leak検査_上治具_下降端
AND T1922                ; ST4_Leak検査_上治具_下降端
ORL
OUT B150A                ; 全Leak ST_ﾁｬﾝﾊﾞｰ下降PL
LD M2809                 ; ﾘｰｸ不干渉位置
OR M4809                 ; Leak不干渉位置
AND M4809                ; Leak不干渉位置
ANB M6314                ; ﾘｰｸ手動検査動作中
ANB M7314                ; Leak手動検査動作中
ANB M9314                ; Leak手動検査動作中
ANB M10314               ; Leak手動検査動作中
OUT M222                 ; 全Leak ST_ﾁｬﾝﾊﾞｰ上昇条件
LDP B100B                ; 全Leak ST_ﾁｬﾝﾊﾞｰ上昇SW
AND M222                 ; 全Leak ST_ﾁｬﾝﾊﾞｰ上昇条件
OR M223                  ; 全Leak ST_ﾁｬﾝﾊﾞｰ上昇指令
AND B100B                ; 全Leak ST_ﾁｬﾝﾊﾞｰ上昇SW
AND M50                  ; 運転準備
AND M124                 ; ｴﾘｱｾﾝｻ正常
OUT M223                 ; 全Leak ST_ﾁｬﾝﾊﾞｰ上昇指令
LD M223                  ; 全Leak ST_ﾁｬﾝﾊﾞｰ上昇指令
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
LD T1124                 ; ST1_Leak検査_上治具_上昇端
AND T1324                ; ST2_Leak検査_上治具_上昇端
AND T1724                ; ST3_Leak検査_上治具_上昇端
AND T1924                ; ST4_Leak検査_上治具_上昇端
ORL
OUT B150B                ; 全Leak ST_ﾁｬﾝﾊﾞｰ上昇PL
END
ENDH
