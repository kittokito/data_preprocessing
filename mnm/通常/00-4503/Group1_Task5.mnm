DEVICE:53
;MODULE:Group1_Task5
;MODULE_TYPE:0
;SCRIPT_TYPE:
;OneSystem Main-Module
;
;-----------------------------------------
;ModuleName	:	Group1_Task5
;ModuleType	:	Main Module
;Line		:	
;Cell		:	
;Function	:	
;-----------------------------------------
;<<Task LocalDevice>>
;/*項目			/*割付ｴﾘｱ				/*備考
;---------------------------------------------------------------------			
;Emergency		@MR000〜@MR015			Emergency処理時RESET禁止ｴﾘｱ
;Free			@MR100〜@MR915			ﾕｰｻﾞｰﾌﾘｰｴﾘｱ
;HOME			@MR1000〜@MR1515		HOME動作時使用ｴﾘｱ
;MAINTENANCE		@MR2000〜@MR2915		MAINTE動作時使用ｴﾘｱ
;AUTO(Main1)		@MR3000〜@MR3915		AUTO(Main1)動作時使用ｴﾘｱ
;	(Main2)		@MR4000〜@MR4915		AUTO(Main2)動作時使用ｴﾘｱ
;SubRoutine		@MR4500〜@MR6415		ｻﾌﾞﾙｰﾁﾝ共通動作使用ｴﾘｱ
;----------------------------------------------------------------------
;<h1/>Device_Init/ﾃﾞﾊﾞｲｽ初期化
;[内容]
;・非常停止、優先ｴﾗｰ発生時に初期化したいﾃﾞﾊﾞｲｽを指定して下さい
;※本Taskで使用するﾛｰｶﾙﾃﾞﾊﾞｲｽなど
;※STG〜JMPにて使用しているﾃﾞﾊﾞｲｽは必須
LDP R46104               ; _非常停止中　ﾓｰﾄﾞﾌﾗｸﾞ
MPS
DW #0 DM35015            ; ﾜｰｸ補填回数
CON
ZRES MR19108 MR19115     ; ｼｬｯﾀｰ開要求(RB2->段積)
CON
ZRES MR19010 MR19100     ; ﾄﾚｲ供給要求(RB2->段ﾊﾞﾗｼ)  ﾄﾚｲ供給中(段ﾊﾞﾗｼ->RB2)
CON
ZRES MR19108 MR19200     ; ｼｬｯﾀｰ開要求(RB2->段積)  ｼｬｯﾀｰ開完了(段積->RB2)
CON
ZRES @MR100 @MR6415      ; Task5 ERROR
MPP
LD<> DM460 #0            ; 不足ﾜｰｸ補填動作No
AND<= DM460 DM35010      ; 不足ﾜｰｸ補填動作No  RB2 ﾜｰｸ収納回数
ANB LR20007              ; RB2 仮置台->ﾄﾚｲ収納Sub 補填完了
ANL
SET LR20007              ; RB2 仮置台->ﾄﾚｲ収納Sub 補填完了
;<h1/>Task_Monitor/ﾀｽｸﾓﾆﾀｰ
LD CR2002                ; 常時ON
FLIK #50 #50 @MR000
LD= DM60000 #5           ; TaskNo /ERROR_DISP
AND R46208               ; _Group1　ｴﾗｰ発生中
OUT @MR001               ; TASK5 ERROR
;ON STG Main1
;TYPE EM640.U,EM641.U,@MR000.U,@MR3000.U
;
;FOR EM640 = EM640 TO 160 STEP 16
;	IF @MR3000:EM640 <> 0 THEN
;		BREAK
;	END IF	
;NEXT
;	
;IF EM640 < 160 THEN
;	EM641 = (EM640 / 16) * 100 + DMX(@MR3000:EM640) + #3000
;END IF		
;		
;EM640 = EM640 + 16		
;IF EM640 > 160 THEN		
;	EM640 = 0		
;END IF
LDP @MR000
NCJ #1000
;TYPE EM640.U,EM641.U,@MR000.U,@MR3000.U
;
;FOR EM640 = EM640 TO 160 STEP 16
;
LD CR2002                ; 常時ON
MOV EM640 EM640          ; Task5 Main1@MR  Task5 Main1@MR
LABEL #2000
LD> EM640 #160           ; Task5 Main1@MR
CJ #2001
;	IF @MR3000:EM640 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM640                ; Task5 Main1@MR
CON
EXT
CON
STA.L Z12
LD<> @MR3000:Z12 #0      ; AUTO Main1
NCJ #2002
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2003
;	END IF	
;
LABEL #2002
;NEXT
;
LD CR2002                ; 常時ON
LDA EM640                ; Task5 Main1@MR
CON
ADD #16
CON
STA EM640                ; Task5 Main1@MR
LDB CR2009               ; 演算結果が負
CJ #2000
LABEL #2003
LABEL #2001
;IF EM640 < 160 THEN
;
LD< EM640 #160           ; Task5 Main1@MR
NCJ #2004
;	EM641 = (EM640 / 16) * 100 + DMX(@MR3000:EM640) + #3000
;
LD CR2002                ; 常時ON
LDA EM640                ; Task5 Main1@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR3000:Z12          ; AUTO Main1
CON
DMX
CON
STA @VM0
CON
LDA EM640                ; Task5 Main1@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM1
CON
LDA @VM0
CON
EXT
CON
ADD.L @VM1
CON
ADD.L +3000
CON
STA EM641                ; Task5 Main1@MR
;END IF		
;
LABEL #2004
;EM640 = EM640 + 16		
;
LD CR2002                ; 常時ON
LDA EM640                ; Task5 Main1@MR
CON
EXT
CON
ADD.L +16
CON
STA EM640                ; Task5 Main1@MR
;IF EM640 > 160 THEN		
;
LD> EM640 #160           ; Task5 Main1@MR
NCJ #2005
;	EM640 = 0		
;
LD CR2002                ; 常時ON
MOV #0 EM640             ; Task5 Main1@MR
;END IF
LABEL #2005
LABEL #1000
;
;ON STG Main2
;TYPE EM642.U,EM643.U,@MR4000.U
;
;FOR EM642 = EM642 TO 80 STEP 16
;	IF @MR4000:EM642 <> 0 THEN
;		BREAK
;	END IF	
;NEXT	
;
;IF EM642 < 80 THEN
;	EM643 = (EM642 / 16) * 100 + DMX(@MR4000:EM642) + #4000
;END IF
;
;EM642 = EM642 + 16		
;
;IF EM642 > 80 THEN
;	EM642 = 0	
;END IF
LDP @MR000
NCJ #1001
;TYPE EM642.U,EM643.U,@MR4000.U
;
;FOR EM642 = EM642 TO 80 STEP 16
;
LD CR2002                ; 常時ON
MOV EM642 EM642          ; Task5 Main2@MR  Task5 Main2@MR
LABEL #2006
LD> EM642 #80            ; Task5 Main2@MR
CJ #2007
;	IF @MR4000:EM642 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM642                ; Task5 Main2@MR
CON
EXT
CON
STA.L Z12
LD<> @MR4000:Z12 #0      ; AUTO Main2
NCJ #2008
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2009
;	END IF	
;
LABEL #2008
;NEXT	
;
LD CR2002                ; 常時ON
LDA EM642                ; Task5 Main2@MR
CON
ADD #16
CON
STA EM642                ; Task5 Main2@MR
LDB CR2009               ; 演算結果が負
CJ #2006
LABEL #2009
LABEL #2007
;IF EM642 < 80 THEN
;
LD< EM642 #80            ; Task5 Main2@MR
NCJ #2010
;	EM643 = (EM642 / 16) * 100 + DMX(@MR4000:EM642) + #4000
;
LD CR2002                ; 常時ON
LDA EM642                ; Task5 Main2@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR4000:Z12          ; AUTO Main2
CON
DMX
CON
STA @VM3
CON
LDA EM642                ; Task5 Main2@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM4
CON
LDA @VM3
CON
EXT
CON
ADD.L @VM4
CON
ADD.L +4000
CON
STA EM643                ; Task5 Main2@MR
;END IF
;
LABEL #2010
;EM642 = EM642 + 16		
;
LD CR2002                ; 常時ON
LDA EM642                ; Task5 Main2@MR
CON
EXT
CON
ADD.L +16
CON
STA EM642                ; Task5 Main2@MR
;IF EM642 > 80 THEN
;
LD> EM642 #80            ; Task5 Main2@MR
NCJ #2011
;	EM642 = 0	
;
LD CR2002                ; 常時ON
MOV #0 EM642             ; Task5 Main2@MR
;END IF
LABEL #2011
LABEL #1001
;
;ON STG SubRoutine
;TYPE EM644.U,EM645.U,@MR4500.U
;	
;FOR EM644 = EM644 TO 320 STEP 16
;	IF @MR4500:EM644 <> 0 THEN
;		BREAK
;	END IF	
;NEXT
;		
;IF EM644 < 320 THEN
;	EM645 = (EM644 / 16) * 100 + DMX(@MR4500:EM644) + #4500
;END IF
;		
;EM644 = EM644 + 16	
;
;IF EM644 > 320 THEN
;   EM644 = 0	
;END IF
LDP @MR000
NCJ #1002
;TYPE EM644.U,EM645.U,@MR4500.U
;
;FOR EM644 = EM644 TO 320 STEP 16
;
LD CR2002                ; 常時ON
MOV EM644 EM644          ; Task5 Sub@MR  Task5 Sub@MR
LABEL #2012
LD> EM644 #320           ; Task5 Sub@MR
CJ #2013
;	IF @MR4500:EM644 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM644                ; Task5 Sub@MR
CON
EXT
CON
STA.L Z12
LD<> @MR4500:Z12 #0      ; RB2動作指令Sub Start
NCJ #2014
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2015
;	END IF	
;
LABEL #2014
;NEXT
;
LD CR2002                ; 常時ON
LDA EM644                ; Task5 Sub@MR
CON
ADD #16
CON
STA EM644                ; Task5 Sub@MR
LDB CR2009               ; 演算結果が負
CJ #2012
LABEL #2015
LABEL #2013
;IF EM644 < 320 THEN
;
LD< EM644 #320           ; Task5 Sub@MR
NCJ #2016
;	EM645 = (EM644 / 16) * 100 + DMX(@MR4500:EM644) + #4500
;
LD CR2002                ; 常時ON
LDA EM644                ; Task5 Sub@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR4500:Z12          ; RB2動作指令Sub Start
CON
DMX
CON
STA @VM6
CON
LDA EM644                ; Task5 Sub@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM7
CON
LDA @VM6
CON
EXT
CON
ADD.L @VM7
CON
ADD.L +4500
CON
STA EM645                ; Task5 Sub@MR
;END IF
;
LABEL #2016
;EM644 = EM644 + 16	
;
LD CR2002                ; 常時ON
LDA EM644                ; Task5 Sub@MR
CON
EXT
CON
ADD.L +16
CON
STA EM644                ; Task5 Sub@MR
;IF EM644 > 320 THEN
;
LD> EM644 #320           ; Task5 Sub@MR
NCJ #2017
;   EM644 = 0	
;
LD CR2002                ; 常時ON
MOV #0 EM644             ; Task5 Sub@MR
;END IF
LABEL #2017
LABEL #1002
;
;<h1/>Task_Init/ﾀｽｸ初期化
;[本STG内容]
;・本Task起動時に必要な初期化処理を記述して下さい
;・起動Taskの全Init処理終了後、Task_StartのSTGが起動します
STG LR805                ; _Grp1_Task5_Init.STG
ENDS
;<h1/>Task_Start/ﾀｽｸ開始
;[本STG内容]
;・Task起動後、以下運転ﾓｰﾄﾞに従い、各STGにJMPします
;【HOME】	→	LR5200
;【AUTO】	→	LR5400
;【MAINTE】	→	LR5600
;・本STGは追記、修正不要です
STG LR405                ; _Grp1_Task5_Start.STG
MPS
AND R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5205               ; _Grp1_Task5_HOME.STG
MRD
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5405               ; _Grp1_Task5_AUTO.STG
MPP
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5605               ; _Grp1_Task5_MAINTE.STG
;<h1/>Task_Finish/ﾀｽｸ終了
;[本STG内容]
;・各Taskの終了STGになります
;・運転ﾓｰﾄﾞに係わらず終了時は本STGを経由して終了して下さい
;・本STGは追記、修正不要です
STG LR605                ; _Grp1_Task5_Fin.STG
RES R41005               ; _Grp1_Task5_起動中ﾌﾗｸﾞ
CON
ENDS
;<h1/>HOME/原点復帰
;[本STG内容]
;・STG @MR1000の続きから各Taskの原点復帰動作を記述する
;・動作終了時は@MR1515にJMPする事
STG LR5205               ; _Grp1_Task5_HOME.STG
ANB @MR001               ; TASK5 ERROR
JMP @MR1000              ; HOME
STG @MR1000              ; HOME
AND DM10509.8            ; RB2 RB_READY
ANB DM10509.9            ; RB2 RB_BUSY
AND DM10509.13           ; RB2 RB_COMP
ANB @MR1002              ; HOME中
AND MR23504              ; RB2ｺﾝﾄﾛｰﾗ起動完了
AND MR23505              ; D-NET通信状態OK
RES MR105                ; TASK5 原点復帰完了
CON
SET @MR1002              ; HOME中
CON
JMP @MR1003
;RB初期設定
STG @MR1003
ANB @MR4700              ; RB2 初期設定Sub Start
ANB @MR4701              ; RB2 初期設定Sub End
ANB @MR4702              ; RB2 初期設定Sub中
SET @MR4700              ; RB2 初期設定Sub Start
CON
JMP @MR1004
STG @MR1004
ANB @MR4700              ; RB2 初期設定Sub Start
AND @MR4701              ; RB2 初期設定Sub End
ANB @MR4702              ; RB2 初期設定Sub中
RES @MR4701              ; RB2 初期設定Sub End
CON
JMP @MR1100
;吸着ヘッド上昇
STG @MR1100
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB R35100               ; RB2 MOVE
ANB R35101               ; RB2 MOVE END
ANB R35102               ; During RB2 MOVE
ANL
DW #53 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $00FF EM1009          ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET R35100               ; RB2 MOVE
CON
JMP @MR1101
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
STG @MR1101
AND R35101               ; RB2 MOVE END
MPS
ANB R35103               ; RB2 Status Alarm
RES R35101               ; RB2 MOVE END
CON
JMP @MR1108
MPP
AND R35103               ; RB2 Status Alarm
RES R35101               ; RB2 MOVE END
CON
RES R35103               ; RB2 Status Alarm
CON
JMP @MR1102
STG @MR1102
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #8000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #70 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task5 ERROR
CON
JMP @MR1103
STG @MR1103
AND @MR101               ; Task5 ERROR_End
RES @MR101               ; Task5 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR105               ; SW1
JMP @MR1100
MPP
AND @MR106               ; SW2
MCALL MODE_INDI #2
JMP @MR1515              ; HOME END
;ﾜｰｸ有無確認
STG @MR1108
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
DW #50 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR1109
STG @MR1109
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
ANB @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR1112
;ﾜｰｸ吸着OFF
STG @MR1112
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
DW #52 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $00FF EM1009          ; RB2 数値指定1
CON
DW #2 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR1113
STG @MR1113
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
ANB @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
DW #0 EM50700            ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
JMP @MR1114
;ﾄﾚｲ吸着OFF
STG @MR1114
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
DW #56 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #2 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR1115
STG @MR1115
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
ANB @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR1200
;RB2 原点位置移動
STG @MR1200
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB R35100               ; RB2 MOVE
ANB R35101               ; RB2 MOVE END
ANB R35102               ; During RB2 MOVE
ANL
DW #5 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET R35100               ; RB2 MOVE
CON
JMP @MR1201
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
STG @MR1201
AND R35101               ; RB2 MOVE END
MPS
ANB R35103               ; RB2 Status Alarm
RES R35101               ; RB2 MOVE END
CON
JMP @MR1515              ; HOME END
MPP
AND R35103               ; RB2 Status Alarm
RES R35101               ; RB2 MOVE END
CON
RES R35103               ; RB2 Status Alarm
CON
JMP @MR1202
;	移動中の非常停止ｴﾗｰ
STG @MR1202
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #8900 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #71 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task5 ERROR
CON
JMP @MR1203
STG @MR1203
AND @MR101               ; Task5 ERROR_End
RES @MR101               ; Task5 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR105               ; SW1
JMP @MR1200
MPP
AND @MR106               ; SW2
MCALL MODE_INDI #2
SET MR115                ; 原点復帰中止
CON
JMP @MR1515              ; HOME END
;RB2 待機位置移動
STG @MR1300
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB R35100               ; RB2 MOVE
ANB R35101               ; RB2 MOVE END
ANB R35102               ; During RB2 MOVE
ANL
DW #130 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET R35100               ; RB2 MOVE
CON
JMP @MR1301
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
STG @MR1301
AND R35101               ; RB2 MOVE END
MPS
ANB R35103               ; RB2 Status Alarm
RES R35101               ; RB2 MOVE END
CON
JMP @MR1515              ; HOME END
MPP
AND R35103               ; RB2 Status Alarm
RES R35101               ; RB2 MOVE END
CON
RES R35103               ; RB2 Status Alarm
CON
JMP @MR1302
STG @MR1302
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #8900 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #11 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task5 ERROR
CON
JMP @MR1303
STG @MR1303
AND @MR101               ; Task5 ERROR_End
RES @MR101               ; Task5 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR105               ; SW1
JMP @MR1300
MPP
AND @MR106               ; SW2
MCALL MODE_INDI #2
SET MR115                ; 原点復帰中止
CON
JMP @MR1515              ; HOME END
;RB2 原点復帰終了処理
STG @MR1515              ; HOME END
ANB @MR001               ; TASK5 ERROR
MPS
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET MR16005              ; TASK5 終了可
CON
SET MR105                ; TASK5 原点復帰完了
CON
AND MR16000              ; TASK0 終了可
RES @MR1002              ; HOME中
CON
JMP LR605                ; _Grp1_Task5_Fin.STG
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
;<h1/>AUTO/自動動作
STG LR5405               ; _Grp1_Task5_AUTO.STG
JMP @MR3000              ; AUTO Main1
;<h1/>Auto-Main1/Autoﾒｲﾝﾙｰﾁﾝ1
;[本STG内容]
;・各TaskのAUTO動作を記述して下さい
;・動作ﾓｰﾄﾞは「AUTOAC」に格納されています(1〜32)
;・@MR3000:AUTO_Main1開始、@MR3001:AUTO_Main1完了、@MR3002:AUTO_Main1動作中
STG @MR3000              ; AUTO Main1
SET @MR3002              ; AUTO Main1 Busy
CON
JMP @MR3003              ; RB2 初期設定
;<h1/> RB2 初期設定実行
STG @MR3003              ; RB2 初期設定
ANB @MR4700              ; RB2 初期設定Sub Start
ANB @MR4701              ; RB2 初期設定Sub End
ANB @MR4702              ; RB2 初期設定Sub中
AND MR23504              ; RB2ｺﾝﾄﾛｰﾗ起動完了
AND MR23505              ; D-NET通信状態OK
SET @MR4700              ; RB2 初期設定Sub Start
CON
JMP @MR3004
STG @MR3004
ANB @MR4700              ; RB2 初期設定Sub Start
AND @MR4701              ; RB2 初期設定Sub End
ANB @MR4702              ; RB2 初期設定Sub中
RES @MR4701              ; RB2 初期設定Sub End
CON
JMP @MR3008
; ﾌﾗｸﾞﾘｾｯﾄ
LD MR19010               ; ﾄﾚｲ供給要求(RB2->段ﾊﾞﾗｼ)
AND MR19100              ; ﾄﾚｲ供給中(段ﾊﾞﾗｼ->RB2)
ANB MR19101              ; ﾄﾚｲ供給完了(段ﾊﾞﾗｼ->RB2)
RES MR19010              ; ﾄﾚｲ供給要求(RB2->段ﾊﾞﾗｼ)
LD MR19110               ; ｼｬｯﾀｰ閉要求(RB2->段積)
AND MR19202              ; ｼｬｯﾀｰ閉完了(段積->RB2)
RES MR19110              ; ｼｬｯﾀｰ閉要求(RB2->段積)
;<h1/> RB2 Auto Loop先頭
;@M500:ﾄﾚｲ段積みがﾌﾀをする時に失敗した場合、段積みﾙｰﾁﾝを抜けてしまう対策
LD= DM35023 DM35020      ; RB2 段積みﾄﾚｲ最大枚数-1  RB2 段積みﾄﾚｲ枚数
ANB MR010                ; 対策箇所160524
OUT @MR500               ; ﾌﾀ用ﾄﾚｲ段積み要求
STG @MR3008
MPS
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
MPS
ANB R46106               ; _定停止移行中
MPS
LD= DM464 DM35010        ; 段積ﾄﾚｲ搬出動作No  RB2 ﾜｰｸ収納回数
LD>= DM35020 DM432       ; RB2 段積みﾄﾚｲ枚数  RB2 段積み最大数設定(1-255)
ANB LR20000              ; ｻﾝﾌﾟﾙ取動作中
LD>= DM35020 DM5038      ; RB2 段積みﾄﾚｲ枚数  _生産ｶｳﾝﾀ10
AND LR20000              ; ｻﾝﾌﾟﾙ取動作中
ORL
ANL
ANL
JMP @MR3808              ; 段積ﾄﾚｲ搬出処理
MRD
LDB @MR3808              ; 段積ﾄﾚｲ搬出処理
AND R4600                ; ﾜｰｸ収納位置ﾄﾚｲ確認(ON=ﾄﾚｲ有)
ANL
MPS
LD<> DM5260 #17          ; 選択中ｺｰﾄﾞ
AND<> DM5260 #21         ; 選択中ｺｰﾄﾞ
LD<> DM460 #0            ; 不足ﾜｰｸ補填動作No
AND LR20007              ; RB2 仮置台->ﾄﾚｲ収納Sub 補填完了
ORL
OR= DM460 #0             ; 不足ﾜｰｸ補填動作No
AND<= DM462 DM35010      ; ﾄﾚｲ詰め完了動作No  RB2 ﾜｰｸ収納回数
ANL
MPS
AND> DM35021 DM35020     ; RB2 段積みﾄﾚｲ最大枚数-2  RB2 段積みﾄﾚｲ枚数
RES @MR3801              ; 段積み最終実ﾄﾚｲ
CON
JMP @MR3804              ; 実ﾄﾚｲ段積処理
MPP
AND<= DM35021 DM35020    ; RB2 段積みﾄﾚｲ最大枚数-2  RB2 段積みﾄﾚｲ枚数
SET @MR3801              ; 段積み最終実ﾄﾚｲ
CON
JMP @MR3804              ; 実ﾄﾚｲ段積処理
MPP
LD @MR500                ; ﾌﾀ用ﾄﾚｲ段積み要求
ANB MR010                ; 対策箇所160524
ANL
RES @MR3801              ; 段積み最終実ﾄﾚｲ
CON
JMP @MR3804              ; 実ﾄﾚｲ段積処理
MRD
LDB MR19010              ; ﾄﾚｲ供給要求(RB2->段ﾊﾞﾗｼ)
ANB MR19100              ; ﾄﾚｲ供給中(段ﾊﾞﾗｼ->RB2)
ANB MR19101              ; ﾄﾚｲ供給完了(段ﾊﾞﾗｼ->RB2)
ANB R4600                ; ﾜｰｸ収納位置ﾄﾚｲ確認(ON=ﾄﾚｲ有)
ANL
SET MR19010              ; ﾄﾚｲ供給要求(RB2->段ﾊﾞﾗｼ)
MRD
LD MR19001               ; ﾜｰｸ取出要求(INDEX->RB2)
ANB @MR3808              ; 段積ﾄﾚｲ搬出処理
ANB @MR3804              ; 実ﾄﾚｲ段積処理
ANB @MR500               ; ﾌﾀ用ﾄﾚｲ段積み要求
ANB MR010                ; 対策箇所160524
ANL
RES MR19008              ; ﾜｰｸ取出完了(RB2->INDEX)
CON
JMP @MR3009
MPP
LD LR100                 ; _割り込みSW1　ON/OFF状態
ANB MR19010              ; ﾄﾚｲ供給要求(RB2->段ﾊﾞﾗｼ)
LDB MR19100              ; ﾄﾚｲ供給中(段ﾊﾞﾗｼ->RB2)
AND MR19101              ; ﾄﾚｲ供給完了(段ﾊﾞﾗｼ->RB2)
AND R4600                ; ﾜｰｸ収納位置ﾄﾚｲ確認(ON=ﾄﾚｲ有)
OR CR2002                ; 常時ON
ANL
ANB MR19001              ; ﾜｰｸ取出要求(INDEX->RB2)
ANB @MR5600              ; RB2 仮置台->ﾄﾚｲ収納Sub Start
ANB @MR5602              ; RB2 仮置台->ﾄﾚｲ収納Sub中
LD<> EM50800 #0          ; 仮置台 ｼﾌﾄﾃﾞｰﾀ
OR CR2002                ; 常時ON
ANL
AND= EM50000 #0          ; 反転EV ｼﾌﾄﾃﾞｰﾀ
AND= EM50100 #0          ; INDEX Pos1 ｼﾌﾄﾚｼﾞｽﾀ
AND= EM50200 #0          ; INDEX Pos2 ｼﾌﾄﾚｼﾞｽﾀ
AND= EM50300 #0
AND= EM50400 #0
AND= EM50500 #0          ; INDEX Pos5 ｼﾌﾄﾚｼﾞｽﾀ
AND= EM50700 #0          ; RB2 ｼﾌﾄﾃﾞｰﾀ
ANB @MR3808              ; 段積ﾄﾚｲ搬出処理
ANB @MR3804              ; 実ﾄﾚｲ段積処理
ANB @MR500               ; ﾌﾀ用ﾄﾚｲ段積み要求
ANB MR010                ; 対策箇所160524
ANL
JMP @MR5600              ; RB2 仮置台->ﾄﾚｲ収納Sub Start
MPP
AND R46106               ; _定停止移行中
JMP @MR3915
MRD
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
MPP
LD= DM35020 #0           ; RB2 段積みﾄﾚｲ枚数
AND LR103                ; _割り込みSW4　ON/OFF状態
ANB LR20000              ; ｻﾝﾌﾟﾙ取動作中
ANL
@SET LR20000             ; ｻﾝﾌﾟﾙ取動作中
STG @MR3009
SET MR302                ; 自動運転_真空ﾎﾟﾝﾌﾟOn_FLG
CON
AND MR19001              ; ﾜｰｸ取出要求(INDEX->RB2)
AND R008                 ; 元真空検出
JMP @MR3012
;<h1/> ﾜｰｸ有無確認
STG @MR3012
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
DW #50 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR3013
STG @MR3013
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
ANB @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR3014
STG @MR3014
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
DW #52 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $00FF EM1009          ; RB2 数値指定1
CON
DW #2 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR3015
STG @MR3015
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
ANB @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR3100              ; RB2 INDEXからﾜｰｸ取出
;<h1/> INDEXからﾜｰｸ取出(ST1 1回/2回取り)
STG @MR3100              ; RB2 INDEXからﾜｰｸ取出
DW #100 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
MPS
AND= DM440 #1            ; RB2 INDEX取出回数(1-2)
DW #1 EM1009             ; RB2 数値指定1
CON
LDA DM35005              ; RB2 吸着ﾍｯﾄﾞ休止設定(1-255)
CON
STA EM1010               ; RB2 数値指定2
CON
JMP @MR3101
MPP
AND= DM440 #2            ; RB2 INDEX取出回数(1-2)
DW #51 EM1009            ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
JMP @MR3101
STG @MR3101
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND MR3101               ; RB2 INDEX下降IL(ON=起動可能)
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR3102
STG @MR3102
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
MPS
ANB @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR3104
MPP
AND @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
RES @MR4503              ; RB2動作指令Sub HOLD End
CON
JMP @MR3914
;<h1/> ﾜｰｸ取出確認
STG @MR3104
MPS
LD R4300                 ; INDEX ﾜｰｸ確認1
LD R4301                 ; INDEX ﾜｰｸ確認2
OR< DM402 #2             ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
LD R4302                 ; INDEX ﾜｰｸ確認3
OR< DM402 #3             ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
LD R4303                 ; INDEX ﾜｰｸ確認4
OR< DM402 #4             ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
LD R4304                 ; INDEX ﾜｰｸ確認5
OR< DM402 #5             ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
LD R4305                 ; INDEX ﾜｰｸ確認6
OR< DM402 #6             ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
LD R4306                 ; INDEX ﾜｰｸ確認7
OR< DM402 #7             ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
LD R4307                 ; INDEX ﾜｰｸ確認8
OR< DM402 #8             ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
ANL
JMP @MR3107
MPP
LDB R4300                ; INDEX ﾜｰｸ確認1
LDB R4301                ; INDEX ﾜｰｸ確認2
AND>= DM402 #2           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ORL
LDB R4302                ; INDEX ﾜｰｸ確認3
AND>= DM402 #3           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ORL
LDB R4303                ; INDEX ﾜｰｸ確認4
AND>= DM402 #4           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ORL
LDB R4304                ; INDEX ﾜｰｸ確認5
AND>= DM402 #5           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ORL
LDB R4305                ; INDEX ﾜｰｸ確認6
AND>= DM402 #6           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ORL
LDB R4306                ; INDEX ﾜｰｸ確認7
AND>= DM402 #7           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ORL
LDB R4307                ; INDEX ﾜｰｸ確認8
AND>= DM402 #8           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ORL
ANL
JMP @MR3105
STG @MR3105
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #35 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task5 ERROR
CON
JMP @MR3106
STG @MR3106
AND @MR101               ; Task5 ERROR_End
RES @MR101               ; Task5 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR3104
STG @MR3107
LDA DM35005              ; RB2 吸着ﾍｯﾄﾞ休止設定(1-255)
CON
STA EM50700              ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
SET MR19008              ; ﾜｰｸ取出完了(RB2->INDEX)
CON
JMP @MR3108
STG @MR3108
ANB MR19001              ; ﾜｰｸ取出要求(INDEX->RB2)
AND MR19008              ; ﾜｰｸ取出完了(RB2->INDEX)
MPS
FMOV #0 EM50500 #100     ; INDEX Pos5 ｼﾌﾄﾚｼﾞｽﾀ
MPP
AND= EM50500 #0          ; INDEX Pos5 ｼﾌﾄﾚｼﾞｽﾀ
RES MR19008              ; ﾜｰｸ取出完了(RB2->INDEX)
CON
JMP @MR3109
;<h1/> 動作分岐 ﾜｰｸ収納 -> 仮置き台 or ﾄﾚｲ
STG @MR3109
MPS
LD= DM7018 #0            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
ANB R4308                ; 仮置台 ﾜｰｸ確認1
ANB R4309                ; 仮置台 ﾜｰｸ確認2
ANB R4310                ; 仮置台 ﾜｰｸ確認3
ANB R4311                ; 仮置台 ﾜｰｸ確認4
ANB R4312                ; 仮置台 ﾜｰｸ確認5
ANB R4313                ; 仮置台 ﾜｰｸ確認6
ANB R4314                ; 仮置台 ﾜｰｸ確認7
ANB R4315                ; 仮置台 ﾜｰｸ確認8
LD= DM7018 #1            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND= EM50800 #0          ; 仮置台 ｼﾌﾄﾃﾞｰﾀ
ORL
ANL
MPS
LD LR10001               ; 吸着ﾍｯﾄﾞ休止(ON=有/OFF=無)
LDB LR10001              ; 吸着ﾍｯﾄﾞ休止(ON=有/OFF=無)
AND<> DM35012 #0         ; ﾄﾚｲ収納 不足ﾜｰｸ数
ORL
AND> DM402 #1            ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
JMP @MR3112              ; 仮置台へﾜｰｸ収納
MPP
LDB LR10001              ; 吸着ﾍｯﾄﾞ休止(ON=有/OFF=無)
AND= DM35012 #0          ; ﾄﾚｲ収納 不足ﾜｰｸ数
OR= DM402 #1             ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
JMP @MR3300              ; ﾄﾚｲへﾜｰｸ収納
MPP
LD= DM7018 #1            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND<> EM50800 #0         ; 仮置台 ｼﾌﾄﾃﾞｰﾀ
LD= DM7018 #0            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
LD R4308                 ; 仮置台 ﾜｰｸ確認1
OR R4309                 ; 仮置台 ﾜｰｸ確認2
OR R4310                 ; 仮置台 ﾜｰｸ確認3
OR R4311                 ; 仮置台 ﾜｰｸ確認4
OR R4312                 ; 仮置台 ﾜｰｸ確認5
OR R4313                 ; 仮置台 ﾜｰｸ確認6
OR R4314                 ; 仮置台 ﾜｰｸ確認7
OR R4315                 ; 仮置台 ﾜｰｸ確認8
ANL
ORL
ANL
MPS
AND LR10001              ; 吸着ﾍｯﾄﾞ休止(ON=有/OFF=無)
LDA DM35005              ; RB2 吸着ﾍｯﾄﾞ休止設定(1-255)
CON
STA DM35019              ; 仮置取出完了ﾍｯﾄﾞ(休止有時)
CON
JMP @MR3200              ; 仮置台からRBﾊﾝﾄﾞへ不足ﾜｰｸ補充
MPP
ANB LR10001              ; 吸着ﾍｯﾄﾞ休止(ON=有/OFF=無)
JMP @MR3300              ; ﾄﾚｲへﾜｰｸ収納
;<h1/> 仮置き台へﾜｰｸ収納
STG @MR3112              ; 仮置台へﾜｰｸ収納
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND MR3111               ; RB2 仮置台下降IL(ON=起動可能)
DW #129 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $00FF EM1009          ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR3113
STG @MR3113
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
MPS
ANB @MR4503              ; RB2動作指令Sub HOLD End
BMOV EM50700 EM50800 #100; RB2 ｼﾌﾄﾃﾞｰﾀ  仮置台 ｼﾌﾄﾃﾞｰﾀ
FMOV #0 EM50700 #100     ; RB2 ｼﾌﾄﾃﾞｰﾀ
RES @MR4501              ; RB2動作指令Sub End
CON
MPS
LD<> DM5260 #17          ; 選択中ｺｰﾄﾞ
AND<> DM5260 #21         ; 選択中ｺｰﾄﾞ
OR= DM460 #0             ; 不足ﾜｰｸ補填動作No
OR> DM462 DM35010        ; ﾄﾚｲ詰め完了動作No  RB2 ﾜｰｸ収納回数
OR LR20007               ; RB2 仮置台->ﾄﾚｲ収納Sub 補填完了
ANL
JMP @MR3900              ; ｻｲｸﾙ完了処理
MPP
LD= DM5260 #17           ; 選択中ｺｰﾄﾞ
OR= DM5260 #21           ; 選択中ｺｰﾄﾞ
AND<> DM460 #0           ; 不足ﾜｰｸ補填動作No
ANB LR20007              ; RB2 仮置台->ﾄﾚｲ収納Sub 補填完了
AND<= DM460 DM35010      ; 不足ﾜｰｸ補填動作No  RB2 ﾜｰｸ収納回数
AND<= DM462 DM35010      ; ﾄﾚｲ詰め完了動作No  RB2 ﾜｰｸ収納回数
ANL
JMP @MR3400              ; 不足ﾜｰｸを仮置き台から補充
MPP
AND @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
RES @MR4503              ; RB2動作指令Sub HOLD End
CON
JMP @MR3914
;<h1/> RBﾊﾝﾄﾞの不足ﾜｰｸを仮置き台から補充
; (休止ﾍｯﾄﾞ有り時限定)
STG @MR3200              ; 仮置台からRBﾊﾝﾄﾞへ不足ﾜｰｸ補充
MPS
DW #0 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
LD>= DM402 #8            ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANB DM35005.7            ; ﾍｯﾄﾞ8休止設定(OFF=休止)
ANB DM35019.7            ; 仮置取出完了ﾍｯﾄﾞ8(休止有時)
ANL
DW #108 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0080 EM1010          ; RB2 数値指定2
MRD
LD>= DM402 #7            ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANB DM35005.6            ; ﾍｯﾄﾞ7休止設定(OFF=休止)
ANB DM35019.6            ; 仮置取出完了ﾍｯﾄﾞ7(休止有時)
ANL
DW #107 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0040 EM1010          ; RB2 数値指定2
MRD
LD>= DM402 #6            ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANB DM35005.5            ; ﾍｯﾄﾞ6休止設定(OFF=休止)
ANB DM35019.5            ; 仮置取出完了ﾍｯﾄﾞ6(休止有時)
ANL
DW #106 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0020 EM1010          ; RB2 数値指定2
MRD
LD>= DM402 #5            ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANB DM35005.4            ; ﾍｯﾄﾞ5休止設定(OFF=休止)
ANB DM35019.4            ; 仮置取出完了ﾍｯﾄﾞ5(休止有時)
ANL
DW #105 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0010 EM1010          ; RB2 数値指定2
MRD
LD>= DM402 #4            ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANB DM35005.3            ; ﾍｯﾄﾞ4休止設定(OFF=休止)
ANB DM35019.3            ; 仮置取出完了ﾍｯﾄﾞ4(休止有時)
ANL
DW #104 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0008 EM1010          ; RB2 数値指定2
MRD
LD>= DM402 #3            ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANB DM35005.2            ; ﾍｯﾄﾞ3休止設定(OFF=休止)
ANB DM35019.2            ; 仮置取出完了ﾍｯﾄﾞ3(休止有時)
ANL
DW #103 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0004 EM1010          ; RB2 数値指定2
MRD
LD>= DM402 #2            ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANB DM35005.1            ; ﾍｯﾄﾞ2休止設定(OFF=休止)
ANB DM35019.1            ; 仮置取出完了ﾍｯﾄﾞ2(休止有時)
ANL
DW #102 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0002 EM1010          ; RB2 数値指定2
MRD
LD>= DM402 #1            ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANB DM35005.0            ; ﾍｯﾄﾞ1休止設定(OFF=休止)
ANB DM35019.0            ; 仮置取出完了ﾍｯﾄﾞ1(休止有時)
ANL
DW #101 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0001 EM1010          ; RB2 数値指定2
MRD
LD= DM7018 #0            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND R4315                ; 仮置台 ﾜｰｸ確認8
LD= DM7018 #1            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND EM50800.7
ORL
ANL
DW #8 EM1009             ; RB2 数値指定1
MRD
LD= DM7018 #0            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND R4314                ; 仮置台 ﾜｰｸ確認7
LD= DM7018 #1            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND EM50800.6
ORL
ANL
DW #7 EM1009             ; RB2 数値指定1
MRD
LD= DM7018 #0            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND R4313                ; 仮置台 ﾜｰｸ確認6
LD= DM7018 #1            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND EM50800.5
ORL
ANL
DW #6 EM1009             ; RB2 数値指定1
MRD
LD= DM7018 #0            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND R4312                ; 仮置台 ﾜｰｸ確認5
LD= DM7018 #1            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND EM50800.4
ORL
ANL
DW #5 EM1009             ; RB2 数値指定1
MRD
LD= DM7018 #0            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND R4311                ; 仮置台 ﾜｰｸ確認4
LD= DM7018 #1            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND EM50800.3
ORL
ANL
DW #4 EM1009             ; RB2 数値指定1
MRD
LD= DM7018 #0            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND R4310                ; 仮置台 ﾜｰｸ確認3
LD= DM7018 #1            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND EM50800.2
ORL
ANL
DW #3 EM1009             ; RB2 数値指定1
MRD
LD= DM7018 #0            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND R4309                ; 仮置台 ﾜｰｸ確認2
LD= DM7018 #1            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND EM50800.1
ORL
ANL
DW #2 EM1009             ; RB2 数値指定1
MRD
LD= DM7018 #0            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND R4308                ; 仮置台 ﾜｰｸ確認1
LD= DM7018 #1            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND EM50800.0
ORL
ANL
DW #1 EM1009             ; RB2 数値指定1
MRD
LD<> EM1008 #0           ; RB2 動作ｺﾏﾝﾄﾞ
AND<> EM1009 #0          ; RB2 数値指定1
AND<> EM1010 #0          ; RB2 数値指定2
ANL
JMP @MR3201
MPP
LD= EM1008 #0            ; RB2 動作ｺﾏﾝﾄﾞ
AND= EM1010 #0           ; RB2 数値指定2
ANL
JMP @MR3300              ; ﾄﾚｲへﾜｰｸ収納
STG @MR3201
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND MR3111               ; RB2 仮置台下降IL(ON=起動可能)
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR3202
STG @MR3202
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
ANB @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR3203
STG @MR3203
MPS
LDA EM50700              ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
ADD EM1010               ; RB2 数値指定2
CON
STA EM50700              ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
LDA DM35019              ; 仮置取出完了ﾍｯﾄﾞ(休止有時)
CON
ADD EM1010               ; RB2 数値指定2
CON
STA DM35019              ; 仮置取出完了ﾍｯﾄﾞ(休止有時)
MRD
AND= EM1009 #1           ; RB2 数値指定1
LDA EM50800              ; 仮置台 ｼﾌﾄﾃﾞｰﾀ
CON
SUB $0001
CON
STA EM50800              ; 仮置台 ｼﾌﾄﾃﾞｰﾀ
MRD
AND= EM1009 #2           ; RB2 数値指定1
LDA EM50800              ; 仮置台 ｼﾌﾄﾃﾞｰﾀ
CON
SUB $0002
CON
STA EM50800              ; 仮置台 ｼﾌﾄﾃﾞｰﾀ
MRD
AND= EM1009 #3           ; RB2 数値指定1
LDA EM50800              ; 仮置台 ｼﾌﾄﾃﾞｰﾀ
CON
SUB $0004
CON
STA EM50800              ; 仮置台 ｼﾌﾄﾃﾞｰﾀ
MRD
AND= EM1009 #4           ; RB2 数値指定1
LDA EM50800              ; 仮置台 ｼﾌﾄﾃﾞｰﾀ
CON
SUB $0008
CON
STA EM50800              ; 仮置台 ｼﾌﾄﾃﾞｰﾀ
MRD
AND= EM1009 #5           ; RB2 数値指定1
LDA EM50800              ; 仮置台 ｼﾌﾄﾃﾞｰﾀ
CON
SUB $0010
CON
STA EM50800              ; 仮置台 ｼﾌﾄﾃﾞｰﾀ
MRD
AND= EM1009 #6           ; RB2 数値指定1
LDA EM50800              ; 仮置台 ｼﾌﾄﾃﾞｰﾀ
CON
SUB $0020
CON
STA EM50800              ; 仮置台 ｼﾌﾄﾃﾞｰﾀ
MRD
AND= EM1009 #7           ; RB2 数値指定1
LDA EM50800              ; 仮置台 ｼﾌﾄﾃﾞｰﾀ
CON
SUB $0040
CON
STA EM50800              ; 仮置台 ｼﾌﾄﾃﾞｰﾀ
MRD
AND= EM1009 #8           ; RB2 数値指定1
LDA EM50800              ; 仮置台 ｼﾌﾄﾃﾞｰﾀ
CON
SUB $0080
CON
STA EM50800              ; 仮置台 ｼﾌﾄﾃﾞｰﾀ
MPP
JMP @MR3200              ; 仮置台からRBﾊﾝﾄﾞへ不足ﾜｰｸ補充
;<h1/> ﾄﾚｲへﾜｰｸ収納(機種ごとに動作が異なる)
STG @MR3300              ; ﾄﾚｲへﾜｰｸ収納
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
AND MR3102               ; RB2 ﾜｰｸ収納下降IL(ON=起動可能)
AND MR19101              ; ﾄﾚｲ供給完了(段ﾊﾞﾗｼ->RB2)
ANB MR19011              ; ﾜｰｸ収納中(RB2->段ﾊﾞﾗｼ)
ANL
MPS
AND R4600                ; ﾜｰｸ収納位置ﾄﾚｲ確認(ON=ﾄﾚｲ有)
SET MR19011              ; ﾜｰｸ収納中(RB2->段ﾊﾞﾗｼ)
CON
JMP @MR3301
MPP
ANB R4600                ; ﾜｰｸ収納位置ﾄﾚｲ確認(ON=ﾄﾚｲ有)
JMP @MR3304
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
STG @MR3301
ANB @MR4900              ; RB2 ﾄﾚｲ収納Sub Start
ANB @MR4901              ; RB2 ﾄﾚｲ収納Sub END
ANB @MR4902              ; RB2 ﾄﾚｲ収納Sub中
SET @MR4900              ; RB2 ﾄﾚｲ収納Sub Start
CON
JMP @MR3302
STG @MR3302
ANB @MR4900              ; RB2 ﾄﾚｲ収納Sub Start
AND @MR4901              ; RB2 ﾄﾚｲ収納Sub END
ANB @MR4902              ; RB2 ﾄﾚｲ収納Sub中
MPS
ANB @MR4903              ; RB2 ﾄﾚｲ収納Sub HOLD END
RES @MR4901              ; RB2 ﾄﾚｲ収納Sub END
CON
RES MR19011              ; ﾜｰｸ収納中(RB2->段ﾊﾞﾗｼ)
CON
JMP @MR3315
MPP
AND @MR4903              ; RB2 ﾄﾚｲ収納Sub HOLD END
RES @MR4901              ; RB2 ﾄﾚｲ収納Sub END
CON
RES @MR4903              ; RB2 ﾄﾚｲ収納Sub HOLD END
CON
RES MR19011              ; ﾜｰｸ収納中(RB2->段ﾊﾞﾗｼ)
CON
JMP @MR3914
STG @MR3304
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #2804 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #47 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task5 ERROR
CON
JMP @MR3305
STG @MR3305
AND @MR101               ; Task5 ERROR_End
RES @MR101               ; Task5 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR105               ; SW1
JMP @MR3300              ; ﾄﾚｲへﾜｰｸ収納
MRD
AND @MR106               ; SW2
SET MR19010              ; ﾄﾚｲ供給要求(RB2->段ﾊﾞﾗｼ)
CON
ANB MR19101              ; ﾄﾚｲ供給完了(段ﾊﾞﾗｼ->RB2)
JMP @MR3300              ; ﾄﾚｲへﾜｰｸ収納
MPP
AND @MR108               ; SW4
JMP @MR3315
;<h1/> ﾜｰｸ収納後の動作分岐
; (ﾄﾚｲへの収納回数に応じて追加動作を行う)
STG @MR3315
MPS
AND LR20007              ; RB2 仮置台->ﾄﾚｲ収納Sub 補填完了
DW #0 DM35013            ; 仮置取出ﾜｰｸ数
MRD
LD<> DM464 DM35010       ; 段積ﾄﾚｲ搬出動作No  RB2 ﾜｰｸ収納回数
AND<> DM462 DM35010      ; ﾄﾚｲ詰め完了動作No  RB2 ﾜｰｸ収納回数
LD= DM460 #0             ; 不足ﾜｰｸ補填動作No
LD<> DM460 #0            ; 不足ﾜｰｸ補填動作No
LD> DM460 DM35010        ; 不足ﾜｰｸ補填動作No  RB2 ﾜｰｸ収納回数
LD<= DM460 DM35010       ; 不足ﾜｰｸ補填動作No  RB2 ﾜｰｸ収納回数
AND LR20007              ; RB2 仮置台->ﾄﾚｲ収納Sub 補填完了
ORL
ANL
ORL
ANL
LD= DM464 DM35010        ; 段積ﾄﾚｲ搬出動作No  RB2 ﾜｰｸ収納回数
LD< DM35020 DM432        ; RB2 段積みﾄﾚｲ枚数  RB2 段積み最大数設定(1-255)
ANB LR20000              ; ｻﾝﾌﾟﾙ取動作中
LD< DM35020 DM5038       ; RB2 段積みﾄﾚｲ枚数  _生産ｶｳﾝﾀ10
AND LR20000              ; ｻﾝﾌﾟﾙ取動作中
ORL
ANL
AND<> DM460 DM464        ; 不足ﾜｰｸ補填動作No  段積ﾄﾚｲ搬出動作No
ORL
ANL
JMP @MR3900              ; ｻｲｸﾙ完了処理
MRD
LD<> DM460 #0            ; 不足ﾜｰｸ補填動作No
AND<= DM460 DM35010      ; 不足ﾜｰｸ補填動作No  RB2 ﾜｰｸ収納回数
ANB LR20007              ; RB2 仮置台->ﾄﾚｲ収納Sub 補填完了
ANB @MR3900              ; ｻｲｸﾙ完了処理
ANL
JMP @MR3400              ; 不足ﾜｰｸを仮置き台から補充
MRD
LD= DM462 DM35010        ; ﾄﾚｲ詰め完了動作No  RB2 ﾜｰｸ収納回数
ANB @MR3900              ; ｻｲｸﾙ完了処理
ANB @MR3400              ; 不足ﾜｰｸを仮置き台から補充
ANL
MPS
AND> DM35021 DM35020     ; RB2 段積みﾄﾚｲ最大枚数-2  RB2 段積みﾄﾚｲ枚数
RES @MR3801              ; 段積み最終実ﾄﾚｲ
CON
JMP @MR3804              ; 実ﾄﾚｲ段積処理
MPP
AND<= DM35021 DM35020    ; RB2 段積みﾄﾚｲ最大枚数-2  RB2 段積みﾄﾚｲ枚数
SET @MR3801              ; 段積み最終実ﾄﾚｲ
CON
JMP @MR3804              ; 実ﾄﾚｲ段積処理
MPP
LD= DM464 DM35010        ; 段積ﾄﾚｲ搬出動作No  RB2 ﾜｰｸ収納回数
LD>= DM35020 DM432       ; RB2 段積みﾄﾚｲ枚数  RB2 段積み最大数設定(1-255)
ANB LR20000              ; ｻﾝﾌﾟﾙ取動作中
LD>= DM35020 DM5038      ; RB2 段積みﾄﾚｲ枚数  _生産ｶｳﾝﾀ10
AND LR20000              ; ｻﾝﾌﾟﾙ取動作中
ORL
ANL
ANB @MR3900              ; ｻｲｸﾙ完了処理
ANB @MR3400              ; 不足ﾜｰｸを仮置き台から補充
ANB @MR3804              ; 実ﾄﾚｲ段積処理
ANL
JMP @MR3808              ; 段積ﾄﾚｲ搬出処理
;<h1/> 不足ﾜｰｸを仮置き台から補充
STG @MR3400              ; 不足ﾜｰｸを仮置き台から補充
AND MR3102               ; RB2 ﾜｰｸ収納下降IL(ON=起動可能)
AND MR3111               ; RB2 仮置台下降IL(ON=起動可能)
AND MR19101              ; ﾄﾚｲ供給完了(段ﾊﾞﾗｼ->RB2)
ANB MR19011              ; ﾜｰｸ収納中(RB2->段ﾊﾞﾗｼ)
SET MR19011              ; ﾜｰｸ収納中(RB2->段ﾊﾞﾗｼ)
CON
JMP @MR3401
STG @MR3401
ANB @MR5500              ; RB2 仮置台->ﾄﾚｲ収納Sub Start
ANB @MR5501              ; RB2 仮置台->ﾄﾚｲ収納Sub END
ANB @MR5502              ; RB2 仮置台->ﾄﾚｲ収納Sub中
SET @MR5500              ; RB2 仮置台->ﾄﾚｲ収納Sub Start
CON
JMP @MR3402
STG @MR3402
ANB @MR5500              ; RB2 仮置台->ﾄﾚｲ収納Sub Start
AND @MR5501              ; RB2 仮置台->ﾄﾚｲ収納Sub END
ANB @MR5502              ; RB2 仮置台->ﾄﾚｲ収納Sub中
MPS
ANB @MR5503              ; RB2 仮置台->ﾄﾚｲ収納Sub HOLD END
MPS
AND= DM460 DM464         ; 不足ﾜｰｸ補填動作No  段積ﾄﾚｲ搬出動作No
MPS
LD>= DM35020 DM432       ; RB2 段積みﾄﾚｲ枚数  RB2 段積み最大数設定(1-255)
ANB LR20000              ; ｻﾝﾌﾟﾙ取動作中
LD>= DM35020 DM5038      ; RB2 段積みﾄﾚｲ枚数  _生産ｶｳﾝﾀ10
AND LR20000              ; ｻﾝﾌﾟﾙ取動作中
ORL
ANL
JMP @MR3808              ; 段積ﾄﾚｲ搬出処理
MPP
ANB @MR3808              ; 段積ﾄﾚｲ搬出処理
JMP @MR3900              ; ｻｲｸﾙ完了処理
MRD
LD<> DM460 DM464         ; 不足ﾜｰｸ補填動作No  段積ﾄﾚｲ搬出動作No
ANB @MR3808              ; 段積ﾄﾚｲ搬出処理
ANL
JMP @MR3900              ; ｻｲｸﾙ完了処理
MPP
RES @MR5501              ; RB2 仮置台->ﾄﾚｲ収納Sub END
CON
RES MR19011              ; ﾜｰｸ収納中(RB2->段ﾊﾞﾗｼ)
MPP
AND @MR5503              ; RB2 仮置台->ﾄﾚｲ収納Sub HOLD END
RES @MR5501              ; RB2 仮置台->ﾄﾚｲ収納Sub END
CON
RES @MR5503              ; RB2 仮置台->ﾄﾚｲ収納Sub HOLD END
CON
RES MR19011              ; ﾜｰｸ収納中(RB2->段ﾊﾞﾗｼ)
CON
JMP @MR3914
;<h1/> 実ﾄﾚｲ 段積み
STG @MR3804              ; 実ﾄﾚｲ段積処理
SET MR302                ; 自動運転_真空ﾎﾟﾝﾌﾟOn_FLG
CON
AND MR3102               ; RB2 ﾜｰｸ収納下降IL(ON=起動可能)
AND MR19101              ; ﾄﾚｲ供給完了(段ﾊﾞﾗｼ->RB2)
ANB MR19012              ; ﾄﾚｲ取出中(RB2->段ﾊﾞﾗｼ)
ANB MR19015              ; 位置決め解除要求(RB2->位置決)
AND R008                 ; 元真空検出
SET @MR5100              ; RB2 段積みSub Start
CON
JMP @MR3805
STG @MR3805
ANB @MR5100              ; RB2 段積みSub Start
AND @MR5101              ; RB2 段積みSub END
ANB @MR5102              ; RB2 段積みSub中
MPS
ANB @MR5103              ; RB2 段積みSub HOLD END
DW #0 EM50700            ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
DW #0 DM35013            ; 仮置取出ﾜｰｸ数
CON
RES LR20007              ; RB2 仮置台->ﾄﾚｲ収納Sub 補填完了
CON
RES @MR5101              ; RB2 段積みSub END
CON
JMP @MR3900              ; ｻｲｸﾙ完了処理
MPP
AND @MR5103              ; RB2 段積みSub HOLD END
DW #0 EM50700            ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
DW #0 DM35013            ; 仮置取出ﾜｰｸ数
CON
RES LR20007              ; RB2 仮置台->ﾄﾚｲ収納Sub 補填完了
CON
RES @MR5101              ; RB2 段積みSub END
CON
RES @MR5103              ; RB2 段積みSub HOLD END
CON
JMP @MR3914
;<h1/> 段積みﾄﾚｲ搬出
STG @MR3808              ; 段積ﾄﾚｲ搬出処理
SET MR302                ; 自動運転_真空ﾎﾟﾝﾌﾟOn_FLG
CON
AND MR3105               ; RB2 ﾄﾚｲ搬出前IL(ON=起動可能)
AND R008                 ; 元真空検出
SET @MR5300              ; RB2 段積みﾄﾚｲ搬出Sub Start
CON
JMP @MR3809
STG @MR3809
ANB @MR5300              ; RB2 段積みﾄﾚｲ搬出Sub Start
ANB @MR5301              ; RB2 段積みﾄﾚｲ搬出Sub END
AND @MR5302              ; RB2 段積みﾄﾚｲ搬出Sub中
JMP @MR3810
STG @MR3810
ANB @MR5300              ; RB2 段積みﾄﾚｲ搬出Sub Start
AND @MR5301              ; RB2 段積みﾄﾚｲ搬出Sub END
ANB @MR5302              ; RB2 段積みﾄﾚｲ搬出Sub中
SET MR19110              ; ｼｬｯﾀｰ閉要求(RB2->段積)
CON
RES @MR5301              ; RB2 段積みﾄﾚｲ搬出Sub END
CON
JMP @MR3900              ; ｻｲｸﾙ完了処理
;Auto終了処理
STG @MR3900              ; ｻｲｸﾙ完了処理
MPS
ANB MR19001              ; ﾜｰｸ取出要求(INDEX->RB2)
JMP @MR3901
MPP
AND MR19001              ; ﾜｰｸ取出要求(INDEX->RB2)
JMP @MR3914
;<h1/> INDEX ST1 Pos1上昇位置移動
STG @MR3901
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND MR3100               ; RB2 上昇位置移動IL(ON=起動可能)
DW #140 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #1 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR3902
STG @MR3902
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
ANB @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR3914
STG @MR3914
ANB @MR001               ; TASK5 ERROR
MPS
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
MPS
ANB R46106               ; _定停止移行中
JMP @MR3008
MPP
AND R46106               ; _定停止移行中
JMP @MR3915
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
STG @MR3915
MPS
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET MR16005              ; TASK5 終了可
CON
AND MR16000              ; TASK0 終了可
RES @MR3002              ; AUTO Main1 Busy
CON
JMP LR605                ; _Grp1_Task5_Fin.STG
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
;<h1/>Auto-Main2/Autoﾒｲﾝﾙｰﾁﾝ2
;[本STG内容]
;・@MR4000の起動はMain1にて行う事
;・@MR4000:AUTO_Main2開始、@MR4001:AUTO_Main2完了、@MR4002:AUTO_Main2動作中
STG @MR4000              ; AUTO Main2
SET @MR4002              ; Main2 Busy
CON
JMP @MR4003
STG @MR4003
JMP @MR4415              ; Main2 END
STG @MR4415              ; Main2 END
SET @MR4001              ; Main2 END
CON
RES @MR4002              ; Main2 Busy
CON
ENDS
;<h1/>MAINTE/ﾒﾝﾃﾅﾝｽ動作
;[本STG内容]
;・各TaskのMAINTE動作を記述して下さい
;・動作ﾓｰﾄﾞは「MAINTEAC*」に格納されています(1〜32)
;・動作終了時は@MR2915にJMPして下さい
STG LR5605               ; _Grp1_Task5_MAINTE.STG
JMP @MR2000              ; Mainte
STG @MR2000              ; Mainte
MPS
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
MPS
LD MR23504               ; RB2ｺﾝﾄﾛｰﾗ起動完了
AND MR23505              ; D-NET通信状態OK
ANL
SET @MR2002              ; Mainte中
CON
JMP @MR2010
MPP
LD MR23400               ; 単独終了(TP SW)
OR R44915                ; Teaching End
OR MR23401               ; Teaching End（No）
ANL
RES @MR2002              ; Mainte中
CON
JMP @MR2910
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
STG @MR2010
ANB @MR4700              ; RB2 初期設定Sub Start
ANB @MR4701              ; RB2 初期設定Sub End
ANB @MR4702              ; RB2 初期設定Sub中
SET @MR4700              ; RB2 初期設定Sub Start
CON
JMP @MR2011
STG @MR2011
ANB @MR4700              ; RB2 初期設定Sub Start
AND @MR4701              ; RB2 初期設定Sub End
ANB @MR4702              ; RB2 初期設定Sub中
RES @MR4701              ; RB2 初期設定Sub End
CON
JMP @MR2003
STG @MR2003
MPS
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
ANL
SET @MR1900              ; Main1 HALT許可
MPP
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
MPS
AND= DM4110 #1           ; _Group1　ﾒﾝﾃ動作番号
JMP @MR2100
MRD
LD= DM4110 #29           ; _Group1　ﾒﾝﾃ動作番号
AND MR23400              ; 単独終了(TP SW)
ANL
JMP @MR2910
MRD
AND= DM4110 #30          ; _Group1　ﾒﾝﾃ動作番号
@DW #2150 DM3008         ; _MainTP　切替ﾍﾟｰｼﾞNo
CON
LDP R44915               ; Teaching End
ORP MR23401              ; Teaching End（No）
ANL
JMP @MR2910
MPP
AND R47800               ; _Group1　ﾒﾝﾃ動作定停止移行中
JMP @MR2910
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
MC
;<h1/> MainTP 表示中ﾍﾟｰｼﾞNo2125
LD @MR2002               ; Mainte中
AND= DM3000 #2125        ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANB R35102               ; During RB2 MOVE
AND MR3100               ; RB2 上昇位置移動IL(ON=起動可能)
MPS
ANP MR21308              ; TPSW RB2 待機位置
DW #130 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
ANP MR21309              ; TPSW RB2 段取替位置
DW #131 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
LD @MR2002               ; Mainte中
AND= DM3000 #2125        ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANB R35102               ; During RB2 MOVE
MPS
AND MR3100               ; RB2 上昇位置移動IL(ON=起動可能)
MPS
ANP MR21100              ; TPSW RB2 INDEX(ST1) Pos1上昇
DW #140 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #1 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
LDP MR21101              ; TPSW RB2 INDEX(ST1) Pos2上昇
AND= DM440 #2            ; RB2 INDEX取出回数(1-2)
ANL
DW #140 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #2 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
ANP MR21108              ; TPSW RB2 INDEX(ST2) Pos1上昇
DW #140 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #11 EM1009            ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
LDP MR21109              ; TPSW RB2 INDEX(ST2) Pos2上昇
AND= DM440 #2            ; RB2 INDEX取出回数(1-2)
ANL
DW #140 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #12 EM1009            ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
AND MR3101               ; RB2 INDEX下降IL(ON=起動可能)
MPS
ANP MR21200              ; TPSW RB2 INDEX(ST1) Pos1下降
DW #150 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #1 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
LDP MR21201              ; TPSW RB2 INDEX(ST1) Pos2下降
AND= DM440 #2            ; RB2 INDEX取出回数(1-2)
ANL
DW #150 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #2 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
ANP MR21208              ; TPSW RB2 INDEX(ST2) Pos1下降
DW #150 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #11 EM1009            ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
LDP MR21209              ; TPSW RB2 INDEX(ST2) Pos2下降
AND= DM440 #2            ; RB2 INDEX取出回数(1-2)
ANL
DW #150 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #12 EM1009            ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
AND<> DM5260 #15         ; 選択中ｺｰﾄﾞ
MPS
AND MR3100               ; RB2 上昇位置移動IL(ON=起動可能)
MPS
ANP MR21300              ; TPSW RB2 仮置台上昇
DW #141 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
MPP
AND= EM1008 #141         ; RB2 動作ｺﾏﾝﾄﾞ
LDA DM50953              ; TP RB2 仮置台位置設定
CON
STA EM1009               ; RB2 数値指定1
CON
LDA DM50954              ; TP RB2 仮置台基準ﾍｯﾄﾞ設定
CON
STA EM1010               ; RB2 数値指定2
MPP
AND MR3111               ; RB2 仮置台下降IL(ON=起動可能)
MPS
ANP MR21301              ; TPSW RB2 仮置台下降
DW #151 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
MPP
AND= EM1008 #151         ; RB2 動作ｺﾏﾝﾄﾞ
LDA DM50953              ; TP RB2 仮置台位置設定
CON
STA EM1009               ; RB2 数値指定1
CON
LDA DM50954              ; TP RB2 仮置台基準ﾍｯﾄﾞ設定
CON
STA EM1010               ; RB2 数値指定2
LD @MR2002               ; Mainte中
AND= DM3000 #2125        ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANB R35102               ; During RB2 MOVE
MPS
LD MR3100                ; RB2 上昇位置移動IL(ON=起動可能)
AND R4608                ; ﾄﾚｲ位置決めﾋﾟﾝ上下(右) 下降限
ANB R4609                ; ﾄﾚｲ位置決めﾋﾟﾝ上下(右) 上昇限
AND R4610                ; ﾄﾚｲ位置決めﾋﾟﾝ上下(左) 下降限
ANB R4611                ; ﾄﾚｲ位置決めﾋﾟﾝ上下(左) 上昇限
AND R4612                ; ﾄﾚｲ位置決めﾋﾟﾝ開閉(右) 閉限
ANB R4613                ; ﾄﾚｲ位置決めﾋﾟﾝ開閉(右) 開限
AND R4614                ; ﾄﾚｲ位置決めﾋﾟﾝ開閉(左) 閉限
ANB R4615                ; ﾄﾚｲ位置決めﾋﾟﾝ開閉(左) 開限
ANL
MPS
ANP MR21400              ; TPSW RB2 ﾜｰｸ収納上昇
DW #160 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
MPP
AND= EM1008 #160         ; RB2 動作ｺﾏﾝﾄﾞ
LDA DM50952              ; TP RB2 ﾜｰｸ収納基準ﾍｯﾄﾞ設定
CON
STA EM1009               ; RB2 数値指定1
CON
LDA DM50950              ; TP RB2 ﾜｰｸ収納位置設定
CON
STA EM1010               ; RB2 数値指定2
MPP
AND MR3102               ; RB2 ﾜｰｸ収納下降IL(ON=起動可能)
MPS
ANP MR21408              ; TPSW RB2 ﾜｰｸ収納下降
DW #170 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
MPP
AND= EM1008 #170         ; RB2 動作ｺﾏﾝﾄﾞ
LDA DM50952              ; TP RB2 ﾜｰｸ収納基準ﾍｯﾄﾞ設定
CON
STA EM1009               ; RB2 数値指定1
CON
LDA DM50950              ; TP RB2 ﾜｰｸ収納位置設定
CON
STA EM1010               ; RB2 数値指定2
LD @MR2002               ; Mainte中
AND= DM3000 #2125        ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANB R35102               ; During RB2 MOVE
MPS
LD MR3100                ; RB2 上昇位置移動IL(ON=起動可能)
ANP MR21500              ; TPSW RB2 ﾄﾚｲ取出上昇
ANL
DW #180 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
LD MR3103                ; RB2 ﾄﾚｲ取出下降IL(ON=起動可能)
ANP MR21501              ; TPSW RB2 ﾄﾚｲ取出下降
ANL
DW #181 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
AND MR3100               ; RB2 上昇位置移動IL(ON=起動可能)
MPS
ANP MR21502              ; TPSW RB2 段積み上昇
DW #185 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
MPP
AND= EM1008 #185         ; RB2 動作ｺﾏﾝﾄﾞ
LDA DM50951              ; TP RB2 段積み段数設定
CON
STA EM1009               ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
AND MR3104               ; RB2 段積下降IL(ON=起動可能)
MPS
ANP MR21503              ; TPSW RB2 段積み下降
DW #186 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
MPP
AND= EM1008 #186         ; RB2 動作ｺﾏﾝﾄﾞ
LDA DM50951              ; TP RB2 段積み段数設定
CON
STA EM1009               ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
LD MR3105                ; RB2 ﾄﾚｲ搬出前IL(ON=起動可能)
ANP MR21508              ; TPSW RB2 実ﾄﾚｲ搬出前位置
ANL
DW #190 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
LD MR3106                ; RB2 ﾄﾚｲ搬出IL(ON=起動可能)
ANP MR21509              ; TPSW RB2 実ﾄﾚｲ搬出位置
ANL
DW #191 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
LD MR3108                ; RB2 ﾄﾚｲ搬出前待機IL(ON=起動可能)
ANP MR21512              ; TPSW RB2 実ﾄﾚｲ搬出前待機位置
ANL
DW #195 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
LD MR3109                ; RB2 ﾄﾚｲ搬出待機IL(ON=起動可能)
ANP MR21513              ; TPSW RB2 実ﾄﾚｲ搬出待機位置
ANL
DW #196 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
;<h1/> MainTP 表示中ﾍﾟｰｼﾞNo2126
LD @MR2002               ; Mainte中
AND= DM3000 #2126        ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANB R35102               ; During RB2 MOVE
MPS
ANP MR21600              ; TPSW RB2 ﾍｯﾄﾞ1ｼﾘﾝﾀﾞ上昇
DW #53 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0001 EM1009          ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
ANP MR21601              ; TPSW RB2 ﾍｯﾄﾞ2ｼﾘﾝﾀﾞ上昇
DW #53 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0002 EM1009          ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
ANP MR21602              ; TPSW RB2 ﾍｯﾄﾞ3ｼﾘﾝﾀﾞ上昇
DW #53 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0004 EM1009          ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
ANP MR21603              ; TPSW RB2 ﾍｯﾄﾞ4ｼﾘﾝﾀﾞ上昇
DW #53 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0008 EM1009          ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
ANP MR21604              ; TPSW RB2 ﾍｯﾄﾞ5ｼﾘﾝﾀﾞ上昇
DW #53 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0010 EM1009          ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
ANP MR21605              ; TPSW RB2 ﾍｯﾄﾞ6ｼﾘﾝﾀﾞ上昇
DW #53 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0020 EM1009          ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
ANP MR21606              ; TPSW RB2 ﾍｯﾄﾞ7ｼﾘﾝﾀﾞ上昇
DW #53 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0040 EM1009          ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
ANP MR21607              ; TPSW RB2 ﾍｯﾄﾞ8ｼﾘﾝﾀﾞ上昇
DW #53 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0080 EM1009          ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
LD @MR2002               ; Mainte中
AND= DM3000 #2126        ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANB R35102               ; During RB2 MOVE
MPS
ANP MR21608              ; TPSW RB2 ﾍｯﾄﾞ1ｼﾘﾝﾀﾞ下降
DW #54 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0001 EM1009          ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
ANP MR21609              ; TPSW RB2 ﾍｯﾄﾞ2ｼﾘﾝﾀﾞ下降
DW #54 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0002 EM1009          ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
ANP MR21610              ; TPSW RB2 ﾍｯﾄﾞ3ｼﾘﾝﾀﾞ下降
DW #54 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0004 EM1009          ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
ANP MR21611              ; TPSW RB2 ﾍｯﾄﾞ4ｼﾘﾝﾀﾞ下降
DW #54 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0008 EM1009          ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
ANP MR21612              ; TPSW RB2 ﾍｯﾄﾞ5ｼﾘﾝﾀﾞ下降
DW #54 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0010 EM1009          ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
ANP MR21613              ; TPSW RB2 ﾍｯﾄﾞ6ｼﾘﾝﾀﾞ下降
DW #54 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0020 EM1009          ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
ANP MR21614              ; TPSW RB2 ﾍｯﾄﾞ7ｼﾘﾝﾀﾞ下降
DW #54 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0040 EM1009          ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
ANP MR21615              ; TPSW RB2 ﾍｯﾄﾞ8ｼﾘﾝﾀﾞ下降
DW #54 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0080 EM1009          ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
LD @MR2002               ; Mainte中
AND= DM3000 #2126        ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANB R35102               ; During RB2 MOVE
MPS
LDP MR21700              ; TPSW RB2 ﾍｯﾄﾞ1吸着ON
AND>= DM402 #1           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
DW #52 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0001 EM1009          ; RB2 数値指定1
CON
DW #1 EM1010             ; RB2 数値指定2
MRD
LDP MR21701              ; TPSW RB2 ﾍｯﾄﾞ2吸着ON
AND>= DM402 #2           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
DW #52 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0002 EM1009          ; RB2 数値指定1
CON
DW #1 EM1010             ; RB2 数値指定2
MRD
LDP MR21702              ; TPSW RB2 ﾍｯﾄﾞ3吸着ON
AND>= DM402 #3           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
DW #52 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0004 EM1009          ; RB2 数値指定1
CON
DW #1 EM1010             ; RB2 数値指定2
MRD
LDP MR21703              ; TPSW RB2 ﾍｯﾄﾞ4吸着ON
AND>= DM402 #4           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
DW #52 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0008 EM1009          ; RB2 数値指定1
CON
DW #1 EM1010             ; RB2 数値指定2
MRD
LDP MR21704              ; TPSW RB2 ﾍｯﾄﾞ5吸着ON
AND>= DM402 #5           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
DW #52 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0010 EM1009          ; RB2 数値指定1
CON
DW #1 EM1010             ; RB2 数値指定2
MRD
LDP MR21705              ; TPSW RB2 ﾍｯﾄﾞ6吸着ON
AND>= DM402 #6           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
DW #52 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0020 EM1009          ; RB2 数値指定1
CON
DW #1 EM1010             ; RB2 数値指定2
MRD
LDP MR21706              ; TPSW RB2 ﾍｯﾄﾞ7吸着ON
AND>= DM402 #7           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
DW #52 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0040 EM1009          ; RB2 数値指定1
CON
DW #1 EM1010             ; RB2 数値指定2
MPP
LDP MR21707              ; TPSW RB2 ﾍｯﾄﾞ8吸着ON
AND>= DM402 #8           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
DW #52 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0080 EM1009          ; RB2 数値指定1
CON
DW #1 EM1010             ; RB2 数値指定2
LD @MR2002               ; Mainte中
AND= DM3000 #2126        ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANB R35102               ; During RB2 MOVE
MPS
LDP MR21708              ; TPSW RB2 ﾍｯﾄﾞ1吸着OFF
AND>= DM402 #1           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
DW #52 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0001 EM1009          ; RB2 数値指定1
CON
DW #2 EM1010             ; RB2 数値指定2
MRD
LDP MR21709              ; TPSW RB2 ﾍｯﾄﾞ2吸着OFF
AND>= DM402 #2           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
DW #52 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0002 EM1009          ; RB2 数値指定1
CON
DW #2 EM1010             ; RB2 数値指定2
MRD
LDP MR21710              ; TPSW RB2 ﾍｯﾄﾞ3吸着OFF
AND>= DM402 #3           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
DW #52 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0004 EM1009          ; RB2 数値指定1
CON
DW #2 EM1010             ; RB2 数値指定2
MRD
LDP MR21711              ; TPSW RB2 ﾍｯﾄﾞ4吸着OFF
AND>= DM402 #4           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
DW #52 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0008 EM1009          ; RB2 数値指定1
CON
DW #2 EM1010             ; RB2 数値指定2
MRD
LDP MR21712              ; TPSW RB2 ﾍｯﾄﾞ5吸着OFF
AND>= DM402 #5           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
DW #52 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0010 EM1009          ; RB2 数値指定1
CON
DW #2 EM1010             ; RB2 数値指定2
MRD
LDP MR21713              ; TPSW RB2 ﾍｯﾄﾞ6吸着OFF
AND>= DM402 #6           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
DW #52 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0020 EM1009          ; RB2 数値指定1
CON
DW #2 EM1010             ; RB2 数値指定2
MRD
LDP MR21714              ; TPSW RB2 ﾍｯﾄﾞ7吸着OFF
AND>= DM402 #7           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
DW #52 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0040 EM1009          ; RB2 数値指定1
CON
DW #2 EM1010             ; RB2 数値指定2
MPP
LDP MR21715              ; TPSW RB2 ﾍｯﾄﾞ8吸着OFF
AND>= DM402 #8           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
DW #52 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0080 EM1009          ; RB2 数値指定1
CON
DW #2 EM1010             ; RB2 数値指定2
LD @MR2002               ; Mainte中
AND= DM3000 #2126        ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANB R35102               ; During RB2 MOVE
MPS
LDP MR21800              ; TPSW RB2 ﾍｯﾄﾞ1吸着破壊ON
AND>= DM402 #1           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
DW #51 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0001 EM1009          ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
LDP MR21801              ; TPSW RB2 ﾍｯﾄﾞ2吸着破壊ON
AND>= DM402 #2           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
DW #51 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0002 EM1009          ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
LDP MR21802              ; TPSW RB2 ﾍｯﾄﾞ3吸着破壊ON
AND>= DM402 #3           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
DW #51 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0004 EM1009          ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
LDP MR21803              ; TPSW RB2 ﾍｯﾄﾞ4吸着破壊ON
AND>= DM402 #4           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
DW #51 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0008 EM1009          ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
LDP MR21804              ; TPSW RB2 ﾍｯﾄﾞ5吸着破壊ON
AND>= DM402 #5           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
DW #51 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0010 EM1009          ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
LDP MR21805              ; TPSW RB2 ﾍｯﾄﾞ6吸着破壊ON
AND>= DM402 #6           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
DW #51 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0020 EM1009          ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
LDP MR21806              ; TPSW RB2 ﾍｯﾄﾞ7吸着破壊ON
AND>= DM402 #7           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
DW #51 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0040 EM1009          ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
LDP MR21807              ; TPSW RB2 ﾍｯﾄﾞ8吸着破壊ON
AND>= DM402 #8           ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
ANL
DW #51 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0080 EM1009          ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
LD @MR2002               ; Mainte中
AND= DM3000 #2126        ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANB R35102               ; During RB2 MOVE
MPS
ANP MR21808              ; TPSW RB2 ﾄﾚｲ吸着ON
DW #56 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #1 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
ANP MR21809              ; TPSW RB2 ﾄﾚｲ吸着OFF
DW #56 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #2 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
ANP MR21810              ; TPSW RB2 ﾄﾚｲ吸着破壊ON
DW #55 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
;<h1/> MainTP 表示中ﾍﾟｰｼﾞNo2127
LD @MR2002               ; Mainte中
AND= DM3000 #2127        ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANB R35102               ; During RB2 MOVE
MPS
AND MR21900              ; TPSW RB2 定量移動X+
MPS
ANB MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #6 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #1 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
AND MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #7 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #1 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
AND MR21901              ; TPSW RB2 定量移動X-
MPS
ANB MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #8 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #1 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
AND MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #9 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #1 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
AND MR21902              ; TPSW RB2 定量移動Y+
MPS
ANB MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #6 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #2 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
AND MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #7 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #2 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
AND MR21903              ; TPSW RB2 定量移動Y-
MPS
ANB MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #8 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #2 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
AND MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #9 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #2 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
AND MR21904              ; TPSW RB2 定量移動Z+
MPS
ANB MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #6 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #3 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
AND MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #7 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #3 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
AND MR21905              ; TPSW RB2 定量移動Z-
MPS
ANB MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #8 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #3 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
AND MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #9 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #3 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MRD
AND MR21906              ; TPSW RB2 定量移動θ+
MPS
ANB MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #6 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #4 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
AND MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #7 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #4 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
AND MR21907              ; TPSW RB2 定量移動θ-
MPS
ANB MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #8 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #4 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
MPP
AND MR21914              ; TPSW RB2 定量移動(ON=10mm)
DW #9 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #4 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
LD @MR2002               ; Mainte中
LD= DM3000 #2125         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2126         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2127         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
ANB R35102               ; During RB2 MOVE
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4502              ; RB2動作指令Sub中
MPS
LDP MR23104              ; TPSW RB2起動SW
LD<>.L MR21600 +0        ; TPSW RB2 ﾍｯﾄﾞ1ｼﾘﾝﾀﾞ上昇
OR<> MR21800 #0          ; TPSW RB2 ﾍｯﾄﾞ1吸着破壊ON
MEP
ORL
AND<> EM1008 #0          ; RB2 動作ｺﾏﾝﾄﾞ
ANL
SET @MR2108
MPP
ANP MR23106              ; TPSW RB2原点復帰SW
DW #5 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR2114
STG @MR2108
MPS
LD<> EM1008 #160         ; RB2 動作ｺﾏﾝﾄﾞ
AND<> EM1008 #170        ; RB2 動作ｺﾏﾝﾄﾞ
AND<> EM1008 #185        ; RB2 動作ｺﾏﾝﾄﾞ
AND<> EM1008 #186        ; RB2 動作ｺﾏﾝﾄﾞ
ANL
JMP @MR2114
MRD
LD= EM1008 #160          ; RB2 動作ｺﾏﾝﾄﾞ
OR= EM1008 #170          ; RB2 動作ｺﾏﾝﾄﾞ
ANL
MPS
ANB MR3400               ; ﾒﾝﾃ用ﾄﾚｲﾜｰｸ入れ移動OK
JMP @MR2112
MPP
AND MR3400               ; ﾒﾝﾃ用ﾄﾚｲﾜｰｸ入れ移動OK
JMP @MR2109
MPP
LD= EM1008 #185          ; RB2 動作ｺﾏﾝﾄﾞ
OR= EM1008 #186          ; RB2 動作ｺﾏﾝﾄﾞ
ANL
MPS
AND<= DM35020 DM50951    ; RB2 段積みﾄﾚｲ枚数  TP RB2 段積み段数設定
JMP @MR2114
MPP
AND> DM35020 DM50951     ; RB2 段積みﾄﾚｲ枚数  TP RB2 段積み段数設定
JMP @MR2200
STG @MR2109
MPS
AND<> DM5260 #6          ; 選択中ｺｰﾄﾞ
JMP @MR2114
MPP
AND= DM5260 #6           ; 選択中ｺｰﾄﾞ
LDA EM1010               ; RB2 数値指定2
CON
STA DM50960              ; ﾄﾚｲ上動作位置No Buf
CON
DW #20 EM1010            ; RB2 数値指定2
CON
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR2110
STG @MR2110
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
ANB @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR2111
STG @MR2111
LDA DM50960              ; ﾄﾚｲ上動作位置No Buf
CON
STA EM1010               ; RB2 数値指定2
CON
JMP @MR2114
STG @MR2112
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #14 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task5 ERROR
CON
JMP @MR2113
STG @MR2113
AND @MR101               ; Task5 ERROR_End
RES @MR101               ; Task5 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
ENDS
STG @MR2114
MPS
LD< EM1008 #190          ; RB2 動作ｺﾏﾝﾄﾞ
LDB MR10004              ; ﾄﾚｲ取出 ﾎﾟｰｽﾞ要求
ORB MR10005              ; ﾄﾚｲ取出 ｶﾊﾞｰ開
ANB R7101                ; Sｶﾊﾞｰ2(ﾄﾚｲ取出) 開
ORL
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
ANL
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR2115
MPP
LD>= EM1008 #190         ; RB2 動作ｺﾏﾝﾄﾞ
LD MR10004               ; ﾄﾚｲ取出 ﾎﾟｰｽﾞ要求
AND MR10005              ; ﾄﾚｲ取出 ｶﾊﾞｰ開
OR R7101                 ; Sｶﾊﾞｰ2(ﾄﾚｲ取出) 開
ANL
ANL
ENDS
STG @MR2115
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
ANB @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
ENDS
STG @MR2200
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #9004 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #15 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task5 ERROR
CON
JMP @MR2201
STG @MR2201
AND @MR101               ; Task5 ERROR_End
RES @MR101               ; Task5 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR105               ; SW1
ENDS
MPP
AND @MR108               ; SW4
JMP @MR2114
MCR
;ﾍﾟｰｼﾞ切替時ｺﾏﾝﾄﾞ初期化
LD>= DM3000 #2050        ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND<= DM3000 #2052       ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND<> DM3000 DM3008      ; _MainTP　表示中ﾍﾟｰｼﾞNo  _MainTP　切替ﾍﾟｰｼﾞNo
DW #0 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
;Maintenance　終了
STG @MR2908
ANB R39104               ; SELECT_Y_N Interlock
SET R39104               ; SELECT_Y_N Interlock
CON
DW #7 @DM21              ; ScreenNo /SELECT_Y_N
CON
DW #0 @DM22              ; Bz_Use /SELECT_Y_N
CON
SET @MR300               ; Task5 SELECT_Y_N
CON
JMP @MR2909
STG @MR2909
AND @MR301               ; Task5 Y/N END
RES @MR301               ; Task5 Y/N END
CON
RES R39104               ; SELECT_Y_N Interlock
CON
MPS
AND @MR306               ; Task5 Y/N
JMP @MR2000              ; Mainte
MPP
ANB @MR306               ; Task5 Y/N
JMP @MR2910
STG @MR2910
MCALL HOLD_REQUEST #1
JMP @MR2915              ; Mainte END
STG @MR2915              ; Mainte END
MPS
MCALL MODE_INDI #2
MPP
ANB @MR001               ; TASK5 ERROR
MPS
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
MPP
ANB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET MR16005              ; TASK5 終了可
CON
AND MR16000              ; TASK0 終了可
RES @MR2002              ; Mainte中
CON
JMP LR605                ; _Grp1_Task5_Fin.STG
;<h1/>ERROR
;MyTask Error Process Substance/エラー処理実体
STG @MR100               ; Task5 ERROR
ANB R39002               ; ERROR_DISP Busy
MPS
ZRES @MR105 @MR108       ; SW1  SW4
CON
LDA @DM9                 ; ReturnSW /ERROR_DISP
CON
TBCD
CON
STA @DM10
CON
DISN @DM10 @DM3 #4
MRD
DW #5 @DM0               ; TaskNo /ERROR_DISP
CON
BMOV @DM0 DM60000 #7     ; TaskNo /ERROR_DISP  TaskNo /ERROR_DISP
MPP
SET R39000               ; ERROR_DISP Start
CON
SET @MR102               ; Task5 ERROR Busy
CON
JMP @MR103
STG @MR103
AND R39002               ; ERROR_DISP Busy
AND= DM60008 @DM1        ; ReturnNo /ERROR_DISP  ErrorNo /ERROR_DISP
MPS
AND= DM60007 @DM6        ; ReturnSW /ERROR_DISP
SET @MR105               ; SW1
CON
JMP @MR104
MRD
AND= DM60007 @DM5        ; ReturnSW /ERROR_DISP
SET @MR106               ; SW2
CON
JMP @MR104
MRD
AND= DM60007 @DM4        ; ReturnSW /ERROR_DISP
SET @MR107               ; SW3
CON
JMP @MR104
MPP
AND= DM60007 @DM3        ; ReturnSW /ERROR_DISP
SET @MR108               ; SW4
CON
JMP @MR104
STG @MR104
ANB R39002               ; ERROR_DISP Busy
RES @MR102               ; Task5 ERROR Busy
CON
SET @MR101               ; Task5 ERROR_End
CON
ENDS
;<h1/>SELECT_ACT
;MyTask Select_ACT Process Substance/SELECT_ACT処理実体
STG @MR200               ; Task5 SELECT_ACT
ANB R39202               ; SELECT_ACT Busy
MPS
ZRES @MR205 @MR208       ; SW1  SW4
CON
DW #5 @DM30              ; TaskNo /SELECT_ACT
CON
BMOV @DM30 DM60030 #7    ; TaskNo /SELECT_ACT  TaskNo /SELECT_ACT
MPP
SET R39200               ; SELECT_ACT Start
CON
SET @MR202               ; Task5 SEL_ACT Busy
CON
JMP @MR203
STG @MR203
AND R39202               ; SELECT_ACT Busy
AND<> DM60037 #0         ; SelectSW /SELECT_ACT
MPS
AND= DM60037 #1          ; SelectSW /SELECT_ACT
SET @MR205               ; SW1
CON
JMP @MR204
MRD
AND= DM60037 #2          ; SelectSW /SELECT_ACT
SET @MR206               ; SW2
CON
JMP @MR204
MRD
AND= DM60037 #3          ; SelectSW /SELECT_ACT
SET @MR207               ; SW3
CON
JMP @MR204
MPP
AND= DM60037 #4          ; SelectSW /SELECT_ACT
SET @MR208               ; SW4
CON
JMP @MR204
STG @MR204
ANB R39202               ; SELECT_ACT Busy
RES @MR202               ; Task5 SEL_ACT Busy
CON
SET @MR201               ; Task5 SEL_ACT END
CON
ENDS
;<h1/>SELECT_Y_N
;MyTask Select_Y_N Process Substance/SELECT_Y_N処理実体
STG @MR300               ; Task5 SELECT_Y_N
ANB R39102               ; SELECT_Y_N Busy
MPS
ZRES @MR306 @MR307       ; Task5 Y/N
CON
DW #5 @DM20              ; TaskNo /SELECT_Y_N
CON
BMOV @DM20 DM60020 #3    ; TaskNo /SELECT_Y_N  TaskNo /SELECT_Y_N
MPP
SET R39100               ; SELECT_Y_N Start
CON
SET @MR302               ; Task5 Y_N Busy
CON
JMP @MR303
STG @MR303
AND R39102               ; SELECT_Y_N Busy
MPS
AND= DM60023 #1          ; Y_N /SELECT_Y_N
SET @MR306               ; Task5 Y/N
CON
JMP @MR304
MPP
AND= DM60023 #2          ; Y_N /SELECT_Y_N
RES @MR306               ; Task5 Y/N
CON
JMP @MR304
STG @MR304
ANB R39102               ; SELECT_Y_N Busy
RES @MR302               ; Task5 Y_N Busy
CON
SET @MR301               ; Task5 Y/N END
CON
ENDS
;<h1/>TIMEUP_ERROR
;MyTask TIMEUP_ERROR Process Substance/TIMEUP_ERROR処理実体
STG @MR400               ; Task5 TIMEUP_ERR
ANB R39302               ; TIMEUP_ERR Busy
MPS
DW #5 @DM40              ; TaskNo /TIMEUP_ERR
CON
BMOV @DM40 DM60040 #2    ; TaskNo /TIMEUP_ERR  TaskNo /TIMEUP_ERR
MPP
SET R39300               ; TIMEUP_ERR Start
CON
SET @MR402               ; Task5 TIMEUP Busy
CON
JMP @MR403
STG @MR403
AND R39302               ; TIMEUP_ERR Busy
JMP @MR404
STG @MR404
ANB R39302               ; TIMEUP_ERR Busy
RES @MR402               ; Task5 TIMEUP Busy
CON
SET @MR401               ; Task5 TIMEUP_END
CON
ENDS
;<h1/>SubRoutines/ｻﾌﾞﾙｰﾁﾝ
;[記述方法]
;・ｻﾌﾞﾙｰﾁﾝは本ﾌﾞｯｸﾏｰｸから下に記述していって下さい
;・ｻﾌﾞﾙｰﾁﾝは必ずﾌﾞｯｸﾏｰｸを挿入して処理内容を明確にする事
;<h1/> RB2 動作指令
STG @MR4500              ; RB2動作指令Sub Start
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
OR= EM1008 #190          ; RB2 動作ｺﾏﾝﾄﾞ
OR= EM1008 #191          ; RB2 動作ｺﾏﾝﾄﾞ
ANB R35102               ; During RB2 MOVE
ANB R35106               ; During RB2 RECOVERY MOVE
ANL
SET @MR4502              ; RB2動作指令Sub中
CON
SET R35100               ; RB2 MOVE
CON
JMP @MR4505
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
AND<> EM1008 #190        ; RB2 動作ｺﾏﾝﾄﾞ
AND<> EM1008 #191        ; RB2 動作ｺﾏﾝﾄﾞ
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR4505
LD R35101                ; RB2 MOVE END
OR R35105                ; RB2 RECOVERY MOVE END
ANL
MPS
LDB R35103               ; RB2 Status Alarm
ANB R35107               ; RB2 Moving Alarm
ANL
RES R35101               ; RB2 MOVE END
CON
RES R35105               ; RB2 RECOVERY MOVE END
CON
JMP @MR4506
MRD
AND R35103               ; RB2 Status Alarm
MPS
AND= EM1013 #1           ; RB2 動作ｽﾃｰﾀｽ1
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #61 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4600
MRD
AND= EM1013 #5           ; RB2 動作ｽﾃｰﾀｽ1
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #65 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4600
MRD
LD= EM1013 #6            ; RB2 動作ｽﾃｰﾀｽ1
OR= EM1013 #7            ; RB2 動作ｽﾃｰﾀｽ1
OR= EM1013 #8            ; RB2 動作ｽﾃｰﾀｽ1
ANL
DW #6 @DM9               ; ReturnSW /ERROR_DISP
CON
DW #68 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4600
MRD
AND= EM1013 #9           ; RB2 動作ｽﾃｰﾀｽ1
DW #1800 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #69 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4600
MRD
AND= EM1013 #10          ; RB2 動作ｽﾃｰﾀｽ1
DW #800 @DM9             ; ReturnSW /ERROR_DISP
CON
DW #70 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4600
MRD
AND= EM1013 #11          ; RB2 動作ｽﾃｰﾀｽ1
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #71 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4600
MRD
AND= EM1013 #20          ; RB2 動作ｽﾃｰﾀｽ1
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #80 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4600
MRD
AND= EM1013 #21          ; RB2 動作ｽﾃｰﾀｽ1
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #81 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4600
MRD
AND= EM1013 #30          ; RB2 動作ｽﾃｰﾀｽ1
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #90 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4600
MRD
AND= EM1013 #31          ; RB2 動作ｽﾃｰﾀｽ1
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #91 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4600
MPP
AND= EM1013 #99          ; RB2 動作ｽﾃｰﾀｽ1
MSTRT F_ERROR_DISP #12
MPP
AND R35107               ; RB2 Moving Alarm
MPS
AND= EM1015 #90          ; RB2 動作中ｴﾗｰｺｰﾄﾞ
DW #840 @DM9             ; ReturnSW /ERROR_DISP
CON
DW #100 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4604
MRD
AND= EM1015 #91          ; RB2 動作中ｴﾗｰｺｰﾄﾞ
DW #6 @DM9               ; ReturnSW /ERROR_DISP
CON
DW #101 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4604
MRD
AND= EM1015 #92          ; RB2 動作中ｴﾗｰｺｰﾄﾞ
DW #846 @DM9             ; ReturnSW /ERROR_DISP
CON
DW #102 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4604
MRD
AND= EM1015 #93          ; RB2 動作中ｴﾗｰｺｰﾄﾞ
DW #840 @DM9             ; ReturnSW /ERROR_DISP
CON
DW #103 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4604
MRD
AND= EM1015 #94          ; RB2 動作中ｴﾗｰｺｰﾄﾞ
DW #800 @DM9             ; ReturnSW /ERROR_DISP
CON
DW #104 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4604
MRD
AND= EM1015 #95          ; RB2 動作中ｴﾗｰｺｰﾄﾞ
DW #6 @DM9               ; ReturnSW /ERROR_DISP
CON
DW #105 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4604
MPP
AND= EM1015 #96          ; RB2 動作中ｴﾗｰｺｰﾄﾞ
DW #840 @DM9             ; ReturnSW /ERROR_DISP
CON
DW #106 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
JMP @MR4604
STG @MR4506
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
OR= EM1008 #190          ; RB2 動作ｺﾏﾝﾄﾞ
OR= EM1008 #191          ; RB2 動作ｺﾏﾝﾄﾞ
ANL
SET @MR4501              ; RB2動作指令Sub End
CON
RES @MR4502              ; RB2動作指令Sub中
CON
ENDS
MPP
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
AND<> EM1008 #190        ; RB2 動作ｺﾏﾝﾄﾞ
AND<> EM1008 #191        ; RB2 動作ｺﾏﾝﾄﾞ
ANL
SET @MR1900              ; Main1 HALT許可
; 動作終了時の異常処理
STG @MR4600
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
RES R35101               ; RB2 MOVE END
CON
RES R35105               ; RB2 RECOVERY MOVE END
CON
RES R35103               ; RB2 Status Alarm
CON
SET @MR100               ; Task5 ERROR
CON
JMP @MR4601
STG @MR4601
AND @MR101               ; Task5 ERROR_End
RES @MR101               ; Task5 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR105               ; SW1
JMP @MR4506
MRD
AND @MR106               ; SW2
JMP @MR4500              ; RB2動作指令Sub Start
MRD
AND @MR107               ; SW3
DW #2 EM1011             ; RB2 復帰ｺﾏﾝﾄﾞ
CON
ANB R35104               ; RB2 RECOVERY MOVE
SET R35104               ; RB2 RECOVERY MOVE
CON
JMP @MR4505
MPP
AND @MR108               ; SW4
JMP @MR4500              ; RB2動作指令Sub Start
; 動作中異常発生時の異常処理
STG @MR4604
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
RES R35101               ; RB2 MOVE END
CON
RES R35105               ; RB2 RECOVERY MOVE END
CON
RES R35107               ; RB2 Moving Alarm
CON
SET @MR100               ; Task5 ERROR
CON
JMP @MR4605
STG @MR4605
AND @MR101               ; Task5 ERROR_End
RES @MR101               ; Task5 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
MPS
AND @MR106               ; SW2
DW #1 EM1011             ; RB2 復帰ｺﾏﾝﾄﾞ
CON
ANB R35100               ; RB2 MOVE
SET R35104               ; RB2 RECOVERY MOVE
CON
JMP @MR4505
MRD
AND @MR107               ; SW3
DW #2 EM1011             ; RB2 復帰ｺﾏﾝﾄﾞ
CON
ANB R35100               ; RB2 MOVE
SET R35104               ; RB2 RECOVERY MOVE
CON
JMP @MR4505
MPP
AND @MR108               ; SW4
SET @MR4503              ; RB2動作指令Sub HOLD End
CON
DW #3 EM1011             ; RB2 復帰ｺﾏﾝﾄﾞ
CON
ANB R35100               ; RB2 MOVE
SET R35104               ; RB2 RECOVERY MOVE
CON
JMP @MR4505
;<h1/> RB2 初期設定
STG @MR4700              ; RB2 初期設定Sub Start
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
ANB @MR4702              ; RB2 初期設定Sub中
SET @MR4702              ; RB2 初期設定Sub中
CON
JMP @MR4704
; Command 30 吸着ﾍｯﾄﾞ設定
STG @MR4704
DW #30 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM402                ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
CON
STA EM1009               ; RB2 数値指定1
CON
LDA DM35005              ; RB2 吸着ﾍｯﾄﾞ休止設定(1-255)
CON
STA EM1010               ; RB2 数値指定2
CON
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR4705
STG @MR4705
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR4706
; Command 31 段積みﾄﾚｲ最大数設定
STG @MR4706
DW #31 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM432                ; RB2 段積み最大数設定(1-255)
CON
STA EM1009               ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR4707
STG @MR4707
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR4708
; Command 32 段積みﾋﾟｯﾁ設定
STG @MR4708
DW #32 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM434                ; RB2 段積みﾋﾟｯﾁ設定(整数部)
CON
STA EM1009               ; RB2 数値指定1
CON
LDA DM436                ; RB2 段積みﾋﾟｯﾁ設定(小数点部)
CON
STA EM1010               ; RB2 数値指定2
CON
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR4709
STG @MR4709
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR4710
; Command 33 ﾄﾚｲ分割数設定
STG @MR4710
DW #33 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM426                ; RB2 ﾄﾚｲ分割数Y(1-255)
CON
STA EM1009               ; RB2 数値指定1
CON
LDA DM424                ; RB2 ﾄﾚｲ分割数X(1-255)
CON
STA EM1010               ; RB2 数値指定2
CON
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR4711
STG @MR4711
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR4712
; Command 34 仮置き台分割数設定
STG @MR4712
DW #34 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM428                ; RB2 仮置台分割数X(1-4)
CON
STA EM1009               ; RB2 数値指定1
CON
LDA DM430                ; RB2 仮置台分割数Y(1-4)
CON
STA EM1010               ; RB2 数値指定2
CON
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR4713
STG @MR4713
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR4714
; Command 36 動作ﾓｰﾄﾞ設定
STG @MR4714
DW #36 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM7018               ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
CON
STA EM1009               ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR4715
STG @MR4715
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR4800
; Command 37 ﾜｰｸ取出動作設定
; (吸着ﾍｯﾄﾞ指定)
; (※INDEXから2回取出専用)
STG @MR4800
MPS
AND= DM440 #1            ; RB2 INDEX取出回数(1-2)
JMP @MR4802
MPP
AND= DM440 #2            ; RB2 INDEX取出回数(1-2)
DW #37 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM442                ; RB2 2回取出ﾍｯﾄﾞ設定1
CON
STA EM1009               ; RB2 数値指定1
CON
LDA DM444                ; RB2 2回取出ﾍｯﾄﾞ設定2
CON
STA EM1010               ; RB2 数値指定2
CON
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR4801
STG @MR4801
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR4802
; Command 38 ﾜｰｸ収納動作設定1
; (吸着ﾍｯﾄﾞ指定)
; (※ﾄﾚｲへ2回収納専用)
STG @MR4802
MPS
LD= DM446 #0             ; RB2 2回収納ﾍｯﾄﾞ設定1
AND= DM448 #0            ; RB2 2回収納ﾍｯﾄﾞ設定2
ANL
JMP @MR4804
MPP
LD<> DM446 #0            ; RB2 2回収納ﾍｯﾄﾞ設定1
AND<> DM448 #0           ; RB2 2回収納ﾍｯﾄﾞ設定2
ANL
DW #38 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM446                ; RB2 2回収納ﾍｯﾄﾞ設定1
CON
STA EM1009               ; RB2 数値指定1
CON
LDA DM448                ; RB2 2回収納ﾍｯﾄﾞ設定2
CON
STA EM1010               ; RB2 数値指定2
CON
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR4803
STG @MR4803
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR4804
; Command 39 ﾜｰｸ収納動作設定2
; (ﾊﾟﾚｯﾄ指定)
; (※ﾄﾚｲへ2回収納専用)
STG @MR4804
MPS
LD= DM450 #0             ; RB2 2回収納ﾊﾟﾚｯﾄ設定1
AND= DM452 #0            ; RB2 2回収納ﾊﾟﾚｯﾄ設定2
ANL
JMP @MR4806
MPP
LD<> DM450 #0            ; RB2 2回収納ﾊﾟﾚｯﾄ設定1
AND<> DM452 #0           ; RB2 2回収納ﾊﾟﾚｯﾄ設定2
ANL
DW #39 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM450                ; RB2 2回収納ﾊﾟﾚｯﾄ設定1
CON
STA EM1009               ; RB2 数値指定1
CON
LDA DM452                ; RB2 2回収納ﾊﾟﾚｯﾄ設定2
CON
STA EM1010               ; RB2 数値指定2
CON
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR4805
STG @MR4805
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR4806
; Command 35 機種初期設定
STG @MR4806
DW #35 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM5260               ; 選択中ｺｰﾄﾞ
CON
STA EM1009               ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR4807
STG @MR4807
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR4808
; Command 1 ﾛﾎﾞｯﾄ速度設定
STG @MR4808
DW #1 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM7000               ; RB2 速度設定(1-100%)
CON
STA EM1009               ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR4809
STG @MR4809
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR4810
; Command 2 ﾛﾎﾞｯﾄ加減速設定
STG @MR4810
DW #2 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM7002               ; RB2 加減速設定(1-100%)
CON
STA EM1009               ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR4811
STG @MR4811
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR4812
; Command 3 ﾛﾎﾞｯﾄ速度(直線補間)設定
STG @MR4812
DW #3 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM7010               ; RB2 速度(直線補間)設定(1-200)
CON
STA EM1009               ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR4813
STG @MR4813
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR4814
; Command 4 ﾛﾎﾞｯﾄ加減速(直線補間)設定
STG @MR4814
DW #4 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM7012               ; RB2 加減速(直線補間)設定(1-250)
CON
STA EM1009               ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR4815
STG @MR4815
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR5900
; Command 40 ﾜｰｸ吸着安定時間設定
STG @MR5900
DW #40 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM480                ; RB2 ﾜｰｸ吸着確認時間　
CON
STA EM1009               ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR5901
STG @MR5901
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR5902
; Command 41 ﾄﾚｲ吸着安定時間設定
STG @MR5902
DW #41 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM482                ; RB2 ﾄﾚｲ吸着確認時間
CON
STA EM1009               ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR5903
STG @MR5903
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR5904
; Command 45 ﾓｰﾀｰﾊﾟﾜｰ設定(1:HIGH_0:LOW)
STG @MR5904
DW #45 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
MPS
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR5905
MPP
ANB R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
DW #1 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR5905
STG @MR5905
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
RES @MR4501              ; RB2動作指令Sub End
CON
SET @MR4701              ; RB2 初期設定Sub End
CON
RES @MR4702              ; RB2 初期設定Sub中
CON
ENDS
;<h1/> RB2 ﾄﾚｲへﾜｰｸ収納(機種ごとに動作が異なる)
STG @MR4900              ; RB2 ﾄﾚｲ収納Sub Start
@INC DM35010             ; RB2 ﾜｰｸ収納回数
CON
SET @MR4902              ; RB2 ﾄﾚｲ収納Sub中
CON
JMP @MR4904
;    選択中ｺｰﾄﾞ		 1 : BIJ2 ﾌﾞｯｼｭｼｰﾙ ADJ		 2 : BIJ2 ｹｰｽﾍｯﾄﾞBK ADJ		 3 : BIJ2 ｹｰｽﾍｯﾄﾞCOL ADJ	 4 : BIJ2 針ｶｰﾄﾘｯｼﾞ ADJ
;    				 5 : BIJ2 流路中間 ADJ		 6 : BIJ2 取付板ﾌｨﾙﾀ ADJ	 7 : BIJ2 ﾎﾙﾀﾞﾍｯﾄﾞ ADJ		 8 : BIJ2 ﾎﾙﾀﾞ上 ADJ
;    				 9 : ----					10 : ----
;    				11 : BIJ4 ﾌﾟﾚｰﾄﾄｯﾌﾟ GAR		12 : BIJ4 ﾌﾟﾚｰﾄｷｬﾋﾞﾃｨ GAR	13 : BIJ4 ﾌﾟﾚｰﾄ流路 GAR		14 : BIJ4 ﾌﾟﾚｰﾄﾎﾞﾄﾑ GAR
;    				15 : BIJ4 ｶﾊﾞｰﾎﾞﾄﾑ GAR		16 : BIJ4 ﾌﾞｯｼｭｼｰﾙ GAR		17 : BIJ4 取付板ﾌｨﾙﾀ GAR	18 : BIJ4 針 GAR
;    				19 : BIJ4 ﾎﾙﾀﾞ上 GAR		20 : BIJ4 ﾎﾙﾀﾞﾍｯﾄﾞ GAR
;    				21 : FUS  ﾎﾙﾀﾞ上 FUS		22 : FUS  ﾌﾟﾚｰﾄ流路 FUS		23 : FUS  取付板ﾌｨﾙﾀ FUS
;    				24 : FUS 針 FUS				25 : FUS  ﾌﾞｯｼｭ FUS
STG @MR4904
MPS
AND= DM5260 #1           ; 選択中ｺｰﾄﾞ
DW #113 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM35010              ; RB2 ﾜｰｸ収納回数
CON
SUB #1
CON
MUL DM402                ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
CON
ADD #1
CON
STA EM1009               ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
JMP @MR4905
MRD
AND= DM5260 #2           ; 選択中ｺｰﾄﾞ
DW #0 DM35030            ; 個別置き回数
CON
JMP @MR4908              ; RB2 ﾄﾚｲ収納Sub(機種2専用)
MRD
AND= DM5260 #3           ; 選択中ｺｰﾄﾞ
DW #0 DM35030            ; 個別置き回数
CON
JMP @MR4912              ; RB2 ﾄﾚｲ収納Sub(機種3専用)
MRD
AND= DM5260 #4           ; 選択中ｺｰﾄﾞ
DW #113 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM35010              ; RB2 ﾜｰｸ収納回数
CON
SUB #1
CON
MUL DM402                ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
CON
ADD #1
CON
STA EM1009               ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
JMP @MR4905
MRD
AND= DM5260 #5           ; 選択中ｺｰﾄﾞ
DW #113 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM35010              ; RB2 ﾜｰｸ収納回数
CON
SUB #1
CON
MUL DM402                ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
CON
ADD #1
CON
STA EM1009               ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
JMP @MR4905
MRD
AND= DM5260 #6           ; 選択中ｺｰﾄﾞ
DW #113 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM35010              ; RB2 ﾜｰｸ収納回数
CON
SUB #1
CON
MUL DM402                ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
CON
ADD #4
CON
STA EM1009               ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
JMP @MR4905
MRD
AND= DM5260 #7           ; 選択中ｺｰﾄﾞ
DW #0 DM35030            ; 個別置き回数
CON
JMP @MR5000              ; RB2 ﾄﾚｲ収納Sub(機種7専用)
MRD
AND= DM5260 #8           ; 選択中ｺｰﾄﾞ
DW #113 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM35010              ; RB2 ﾜｰｸ収納回数
CON
SUB #1
CON
MUL DM402                ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
CON
ADD #4
CON
STA EM1009               ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
JMP @MR4905
MRD
LD>= DM5260 #11          ; 選択中ｺｰﾄﾞ
AND<= DM5260 #14         ; 選択中ｺｰﾄﾞ
ANL
DW #120 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0003 EM1009          ; RB2 数値指定1
CON
LDA DM35010              ; RB2 ﾜｰｸ収納回数
CON
MUL DM402                ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
CON
SUB #1
CON
STA EM1010               ; RB2 数値指定2
CON
JMP @MR4905
MRD
AND= DM5260 #15          ; 選択中ｺｰﾄﾞ
DW #0 DM35030            ; 個別置き回数
CON
JMP @MR5004              ; RB2 ﾄﾚｲ収納Sub(機種15専用)
MRD
AND= DM5260 #16          ; 選択中ｺｰﾄﾞ
DW #0 DM35030            ; 個別置き回数
CON
JMP @MR5008              ; RB2 ﾄﾚｲ収納Sub(機種16専用)
MRD
AND= DM5260 #17          ; 選択中ｺｰﾄﾞ
DW #0 DM35030            ; 個別置き回数
CON
JMP @MR6000              ; RB2 ﾄﾚｲ収納Sub(機種17専用)
MRD
AND= DM5260 #18          ; 選択中ｺｰﾄﾞ
DW #0 DM35030            ; 個別置き回数
CON
JMP @MR6004              ; RB2 ﾄﾚｲ収納Sub(機種18専用)
MRD
AND= DM5260 #19          ; 選択中ｺｰﾄﾞ
DW #0 DM35030            ; 個別置き回数
CON
JMP @MR6008              ; RB2 ﾄﾚｲ収納Sub(機種19専用)
MRD
AND= DM5260 #20          ; 選択中ｺｰﾄﾞ
DW #120 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0003 EM1009          ; RB2 数値指定1
CON
LDA DM35010              ; RB2 ﾜｰｸ収納回数
CON
SUB #1
CON
MUL DM402                ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
CON
ADD #1
CON
STA EM1010               ; RB2 数値指定2
CON
JMP @MR4905
MRD
AND= DM5260 #21          ; 選択中ｺｰﾄﾞ
DW #120 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0001 EM1009          ; RB2 数値指定1
CON
LDA DM35010              ; RB2 ﾜｰｸ収納回数
CON
STA EM1010               ; RB2 数値指定2
CON
JMP @MR4905
MRD
LD= DM5260 #22           ; 選択中ｺｰﾄﾞ
OR= DM5260 #23           ; 選択中ｺｰﾄﾞ
OR= DM5260 #24           ; 選択中ｺｰﾄﾞ
ANL
DW #120 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0003 EM1009          ; RB2 数値指定1
CON
LDA DM35010              ; RB2 ﾜｰｸ収納回数
CON
SUB #1
CON
MUL DM402                ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
CON
ADD #1
CON
STA EM1010               ; RB2 数値指定2
CON
JMP @MR4905
MPP
AND= DM5260 #25          ; 選択中ｺｰﾄﾞ
DW #0 DM35030            ; 個別置き回数
CON
JMP @MR6012              ; 機種25(FUS ﾌﾞｯｼｭ)専用動作
STG @MR4905
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND MR3102               ; RB2 ﾜｰｸ収納下降IL(ON=起動可能)
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR4906
STG @MR4906
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
MPS
MEP
MPS
LDA EM50700              ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
BCNT
CON
ADD.D DM5022             ; _生産ｶｳﾝﾀ2
CON
STA.D DM5022             ; _生産ｶｳﾝﾀ2
MPP
LDA EM50700              ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
BCNT
CON
ADD DM35011              ; RB2 収納完了ﾜｰｸ数
CON
STA DM35011              ; RB2 収納完了ﾜｰｸ数
MPP
DW #0 EM50700            ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR5015              ; RB2 ﾄﾚｲ収納Sub終了処理
;<h1/>  機種2(BIJ2 ｹｰｽﾍｯﾄﾞBK ADJ)専用動作
STG @MR4908              ; RB2 ﾄﾚｲ収納Sub(機種2専用)
MPS
AND= DM35030 #0          ; 個別置き回数
DW #121 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0003 EM1009          ; RB2 数値指定1
MRD
AND= DM35030 #1          ; 個別置き回数
DW #123 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $000C EM1009          ; RB2 数値指定1
MRD
AND= DM35030 #2          ; 個別置き回数
DW #124 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0030 EM1009          ; RB2 数値指定1
MRD
AND= DM35030 #3          ; 個別置き回数
DW #126 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $00C0 EM1009          ; RB2 数値指定1
MRD
LD>= DM35010 #1          ; RB2 ﾜｰｸ収納回数
AND<= DM35010 #3         ; RB2 ﾜｰｸ収納回数
ANL
LDA DM35010              ; RB2 ﾜｰｸ収納回数
CON
SUB #1
CON
MUL #4
CON
ADD #2
CON
ADD DM35030              ; 個別置き回数
CON
STA EM1010               ; RB2 数値指定2
CON
JMP @MR4909
MRD
AND= DM35010 #4          ; RB2 ﾜｰｸ収納回数
MPS
AND= DM35030 #0          ; 個別置き回数
DW #14 EM1010            ; RB2 数値指定2
CON
JMP @MR4909
MRD
AND= DM35030 #1          ; 個別置き回数
DW #15 EM1010            ; RB2 数値指定2
CON
JMP @MR4909
MRD
AND= DM35030 #2          ; 個別置き回数
DW #31 EM1010            ; RB2 数値指定2
CON
JMP @MR4909
MPP
AND= DM35030 #3          ; 個別置き回数
DW #32 EM1010            ; RB2 数値指定2
CON
JMP @MR4909
MRD
LD>= DM35010 #5          ; RB2 ﾜｰｸ収納回数
AND<= DM35010 #7         ; RB2 ﾜｰｸ収納回数
ANL
LDA DM35010              ; RB2 ﾜｰｸ収納回数
CON
SUB #1
CON
MUL #4
CON
ADD #17
CON
ADD DM35030              ; 個別置き回数
CON
STA EM1010               ; RB2 数値指定2
CON
JMP @MR4909
MRD
AND= DM35010 #8          ; RB2 ﾜｰｸ収納回数
MPS
AND= DM35030 #0          ; 個別置き回数
DW #45 EM1010            ; RB2 数値指定2
CON
JMP @MR4909
MPP
LD>= DM35030 #1          ; 個別置き回数
AND<= DM35030 #3         ; 個別置き回数
ANL
LDA DM35030              ; 個別置き回数
CON
ADD #60
CON
STA EM1010               ; RB2 数値指定2
CON
JMP @MR4909
MPP
LD>= DM35010 #9          ; RB2 ﾜｰｸ収納回数
AND<= DM35010 #11        ; RB2 ﾜｰｸ収納回数
ANL
LDA DM35010              ; RB2 ﾜｰｸ収納回数
CON
SUB #1
CON
MUL #4
CON
ADD #32
CON
ADD DM35030              ; 個別置き回数
CON
STA EM1010               ; RB2 数値指定2
CON
JMP @MR4909
STG @MR4909
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND MR3102               ; RB2 ﾜｰｸ収納下降IL(ON=起動可能)
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR4910
STG @MR4910
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
MPS
ANB @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR4911
MPP
AND @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR5015              ; RB2 ﾄﾚｲ収納Sub終了処理
STG @MR4911
MPS
MEP
INC DM35030              ; 個別置き回数
CON
LDA DM35011              ; RB2 収納完了ﾜｰｸ数
CON
ADD #2
CON
STA DM35011              ; RB2 収納完了ﾜｰｸ数
CON
LDA.D DM5022             ; _生産ｶｳﾝﾀ2
CON
ADD.D #2
CON
STA.D DM5022             ; _生産ｶｳﾝﾀ2
MRD
AND= DM35030 #1          ; 個別置き回数
BRES EM50700 #0          ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
BRES EM50700 #1          ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
JMP @MR4908              ; RB2 ﾄﾚｲ収納Sub(機種2専用)
MRD
AND= DM35030 #2          ; 個別置き回数
BRES EM50700 #2          ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
BRES EM50700 #3          ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
JMP @MR4908              ; RB2 ﾄﾚｲ収納Sub(機種2専用)
MRD
AND= DM35030 #3          ; 個別置き回数
BRES EM50700 #4          ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
BRES EM50700 #5          ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
JMP @MR4908              ; RB2 ﾄﾚｲ収納Sub(機種2専用)
MPP
AND= DM35030 #4          ; 個別置き回数
BRES EM50700 #6          ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
BRES EM50700 #7          ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
JMP @MR5015              ; RB2 ﾄﾚｲ収納Sub終了処理
;<h1/>  機種3(BIJ2 ｹｰｽﾍｯﾄﾞCOL ADJ)専用動作
STG @MR4912              ; RB2 ﾄﾚｲ収納Sub(機種3専用)
MPS
AND= DM35030 #0          ; 個別置き回数
DW #123 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0008 EM1009          ; RB2 数値指定1
MRD
AND= DM35030 #1          ; 個別置き回数
DW #122 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0004 EM1009          ; RB2 数値指定1
MRD
AND= DM35030 #2          ; 個別置き回数
DW #121 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0002 EM1009          ; RB2 数値指定1
MRD
AND= DM35030 #3          ; 個別置き回数
DW #120 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0001 EM1009          ; RB2 数値指定1
MRD
LD>= DM35010 #1          ; RB2 ﾜｰｸ収納回数
AND<= DM35010 #18        ; RB2 ﾜｰｸ収納回数
ANL
MPS
AND= DM35030 #0          ; 個別置き回数
LDA DM35010              ; RB2 ﾜｰｸ収納回数
CON
SUB #1
CON
MUL #5
CON
ADD #5
CON
STA EM1010               ; RB2 数値指定2
CON
JMP @MR4913
MRD
AND= DM35030 #1          ; 個別置き回数
LDA DM35010              ; RB2 ﾜｰｸ収納回数
CON
SUB #1
CON
MUL #5
CON
ADD #4
CON
STA EM1010               ; RB2 数値指定2
CON
JMP @MR4913
MRD
AND= DM35030 #2          ; 個別置き回数
LDA DM35010              ; RB2 ﾜｰｸ収納回数
CON
SUB #1
CON
MUL #5
CON
ADD #2
CON
STA EM1010               ; RB2 数値指定2
CON
JMP @MR4913
MPP
AND= DM35030 #3          ; 個別置き回数
LDA DM35010              ; RB2 ﾜｰｸ収納回数
CON
SUB #1
CON
MUL #5
CON
ADD #1
CON
STA EM1010               ; RB2 数値指定2
CON
JMP @MR4913
MPP
LD>= DM35010 #19         ; RB2 ﾜｰｸ収納回数
AND<= DM35010 #22        ; RB2 ﾜｰｸ収納回数
ANL
LDA DM35010              ; RB2 ﾜｰｸ収納回数
CON
SUB #19
CON
MUL #20
CON
ADD #13
CON
STA EM1010               ; RB2 数値指定2
CON
LDA DM35030              ; 個別置き回数
CON
MUL #5
CON
ADD EM1010               ; RB2 数値指定2
CON
STA EM1010               ; RB2 数値指定2
CON
JMP @MR4913
STG @MR4913
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND MR3102               ; RB2 ﾜｰｸ収納下降IL(ON=起動可能)
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR4914
STG @MR4914
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
MPS
ANB @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR4915
MPP
AND @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR5015              ; RB2 ﾄﾚｲ収納Sub終了処理
STG @MR4915
MPS
MEP
INC DM35030              ; 個別置き回数
CON
INC DM35011              ; RB2 収納完了ﾜｰｸ数
CON
INC.D DM5022             ; _生産ｶｳﾝﾀ2
MRD
AND= DM35030 #1          ; 個別置き回数
BRES EM50700 #3          ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
JMP @MR4912              ; RB2 ﾄﾚｲ収納Sub(機種3専用)
MRD
AND= DM35030 #2          ; 個別置き回数
BRES EM50700 #2          ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
JMP @MR4912              ; RB2 ﾄﾚｲ収納Sub(機種3専用)
MRD
AND= DM35030 #3          ; 個別置き回数
BRES EM50700 #1          ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
JMP @MR4912              ; RB2 ﾄﾚｲ収納Sub(機種3専用)
MPP
AND= DM35030 #4          ; 個別置き回数
BRES EM50700 #0          ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
JMP @MR5015              ; RB2 ﾄﾚｲ収納Sub終了処理
;<h1/>  機種7(BIJ2 ﾎﾙﾀﾞﾍｯﾄﾞADJ)専用動作
STG @MR5000              ; RB2 ﾄﾚｲ収納Sub(機種7専用)
MPS
LD<> DM35010 #5          ; RB2 ﾜｰｸ収納回数
AND<> DM35010 #6         ; RB2 ﾜｰｸ収納回数
ANL
MPS
AND= DM35030 #0          ; 個別置き回数
DW #120 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0005 EM1009          ; RB2 数値指定1
MPP
AND= DM35030 #1          ; 個別置き回数
DW #121 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $000A EM1009          ; RB2 数値指定1
MRD
AND= DM35010 #5          ; RB2 ﾜｰｸ収納回数
MPS
AND= DM35030 #0          ; 個別置き回数
DW #120 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0001 EM1009          ; RB2 数値指定1
MRD
AND= DM35030 #1          ; 個別置き回数
DW #121 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0002 EM1009          ; RB2 数値指定1
MRD
AND= DM35030 #2          ; 個別置き回数
DW #122 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0004 EM1009          ; RB2 数値指定1
MPP
AND= DM35030 #3          ; 個別置き回数
DW #123 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0008 EM1009          ; RB2 数値指定1
MRD
AND= DM35010 #6          ; RB2 ﾜｰｸ収納回数
MPS
AND= DM35030 #0          ; 個別置き回数
DW #120 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0001 EM1009          ; RB2 数値指定1
MRD
AND= DM35030 #1          ; 個別置き回数
DW #121 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0002 EM1009          ; RB2 数値指定1
MRD
AND= DM35030 #3          ; 個別置き回数
DW #122 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0004 EM1009          ; RB2 数値指定1
MPP
AND= DM35030 #2          ; 個別置き回数
DW #123 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0008 EM1009          ; RB2 数値指定1
MRD
LD<> DM35010 #5          ; RB2 ﾜｰｸ収納回数
AND<> DM35010 #6         ; RB2 ﾜｰｸ収納回数
ANL
MPS
AND= DM35030 #0          ; 個別置き回数
LDA DM35010              ; RB2 ﾜｰｸ収納回数
CON
SUB #1
CON
MUL #5
CON
ADD #1
CON
STA EM1010               ; RB2 数値指定2
CON
JMP @MR5001
MPP
AND= DM35030 #1          ; 個別置き回数
LDA DM35010              ; RB2 ﾜｰｸ収納回数
CON
SUB #1
CON
MUL #5
CON
ADD #4
CON
STA EM1010               ; RB2 数値指定2
CON
JMP @MR5001
MRD
AND= DM35010 #5          ; RB2 ﾜｰｸ収納回数
LDA DM35030              ; 個別置き回数
CON
MUL #5
CON
ADD #8
CON
STA EM1010               ; RB2 数値指定2
CON
JMP @MR5001
MPP
AND= DM35010 #6          ; RB2 ﾜｰｸ収納回数
MPS
AND= DM35030 #0          ; 個別置き回数
DW #21 EM1010            ; RB2 数値指定2
CON
JMP @MR5001
MPP
AND<> DM35030 #0         ; 個別置き回数
@INC EM1010              ; RB2 数値指定2
MPS
AND= EM1010 #23          ; RB2 数値指定2
@INC EM1010              ; RB2 数値指定2
MPP
JMP @MR5001
STG @MR5001
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND MR3102               ; RB2 ﾜｰｸ収納下降IL(ON=起動可能)
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR5002
STG @MR5002
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
MPS
ANB @MR4503              ; RB2動作指令Sub HOLD End
MPS
MEP
MPS
LD<> DM35010 #5          ; RB2 ﾜｰｸ収納回数
AND<> DM35010 #6         ; RB2 ﾜｰｸ収納回数
ANL
MPS
AND= DM35030 #0          ; 個別置き回数
RES EM50700.0
CON
RES EM50700.2
MPP
AND= DM35030 #1          ; 個別置き回数
RES EM50700.1
CON
RES EM50700.3
MRD
AND= DM35010 #5          ; RB2 ﾜｰｸ収納回数
MPS
AND= DM35030 #0          ; 個別置き回数
RES EM50700.0
MRD
AND= DM35030 #1          ; 個別置き回数
RES EM50700.1
MRD
AND= DM35030 #2          ; 個別置き回数
RES EM50700.2
MPP
AND= DM35030 #3          ; 個別置き回数
RES EM50700.3
MRD
AND= DM35010 #6          ; RB2 ﾜｰｸ収納回数
MPS
AND= DM35030 #0          ; 個別置き回数
RES EM50700.0
MRD
AND= DM35030 #1          ; 個別置き回数
RES EM50700.1
MRD
AND= DM35030 #3          ; 個別置き回数
RES EM50700.3
MPP
AND= DM35030 #2          ; 個別置き回数
RES EM50700.2
MRD
INC DM35011              ; RB2 収納完了ﾜｰｸ数
CON
INC DM35011              ; RB2 収納完了ﾜｰｸ数
CON
INC DM35030              ; 個別置き回数
MRD
LD<> DM35010 #5          ; RB2 ﾜｰｸ収納回数
AND<> DM35010 #6         ; RB2 ﾜｰｸ収納回数
ANL
LDA.D DM5022             ; _生産ｶｳﾝﾀ2
CON
ADD.D #2
CON
STA.D DM5022             ; _生産ｶｳﾝﾀ2
MPP
LD= DM35010 #5           ; RB2 ﾜｰｸ収納回数
OR= DM35010 #6           ; RB2 ﾜｰｸ収納回数
ANL
INC.D DM5022             ; _生産ｶｳﾝﾀ2
MPP
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR5003
MPP
AND @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR5015              ; RB2 ﾄﾚｲ収納Sub終了処理
STG @MR5003
MPS
LD<> DM35010 #5          ; RB2 ﾜｰｸ収納回数
AND<> DM35010 #6         ; RB2 ﾜｰｸ収納回数
ANL
MPS
AND<= DM35030 #1         ; 個別置き回数
JMP @MR5000              ; RB2 ﾄﾚｲ収納Sub(機種7専用)
MPP
AND> DM35030 #1          ; 個別置き回数
JMP @MR5015              ; RB2 ﾄﾚｲ収納Sub終了処理
MPP
LD= DM35010 #5           ; RB2 ﾜｰｸ収納回数
OR= DM35010 #6           ; RB2 ﾜｰｸ収納回数
ANL
MPS
AND<= DM35030 #3         ; 個別置き回数
JMP @MR5000              ; RB2 ﾄﾚｲ収納Sub(機種7専用)
MPP
AND> DM35030 #3          ; 個別置き回数
JMP @MR5015              ; RB2 ﾄﾚｲ収納Sub終了処理
;<h1/>  機種15(BIJ4 ｶﾊﾞｰﾄｯﾌﾟGAR)専用動作
;　　一つ取り
STG @MR5004              ; RB2 ﾄﾚｲ収納Sub(機種15専用)
DW #120 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0001 EM1009          ; RB2 数値指定1
CON
LDA DM35010              ; RB2 ﾜｰｸ収納回数
CON
STA EM1010               ; RB2 数値指定2
CON
JMP @MR5005
STG @MR5005
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND MR3102               ; RB2 ﾜｰｸ収納下降IL(ON=起動可能)
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR5006
STG @MR5006
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
MPS
ANB @MR4503              ; RB2動作指令Sub HOLD End
MPS
MEP
MPS
LDA EM50700              ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
SUB EM1009               ; RB2 数値指定1
CON
STA EM50700              ; RB2 ｼﾌﾄﾃﾞｰﾀ
MPP
INC DM35011              ; RB2 収納完了ﾜｰｸ数
CON
INC.D DM5022             ; _生産ｶｳﾝﾀ2
MPP
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR5007
MPP
AND @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR5015              ; RB2 ﾄﾚｲ収納Sub終了処理
STG @MR5007
JMP @MR5015              ; RB2 ﾄﾚｲ収納Sub終了処理
;<h1/>  機種16(BIJ4 ﾌﾞｯｼｭｼｰﾙGAR)専用動作
STG @MR5008              ; RB2 ﾄﾚｲ収納Sub(機種16専用)
MPS
LD>= DM35010 #1          ; RB2 ﾜｰｸ収納回数
AND<= DM35010 #3         ; RB2 ﾜｰｸ収納回数
ANL
DW #113 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM35010              ; RB2 ﾜｰｸ収納回数
CON
MUL #2
CON
ADD #5
CON
STA EM1009               ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
JMP @MR5009
MRD
LD>= DM35010 #4          ; RB2 ﾜｰｸ収納回数
AND<= DM35010 #6         ; RB2 ﾜｰｸ収納回数
ANL
DW #113 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM35010              ; RB2 ﾜｰｸ収納回数
CON
MUL #2
CON
ADD #11
CON
STA EM1009               ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
JMP @MR5009
MPP
AND= DM35010 #7          ; RB2 ﾜｰｸ収納回数
MPS
AND= DM35030 #0          ; 個別置き回数
DW #120 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0001 EM1009          ; RB2 数値指定1
CON
DW #1 EM1010             ; RB2 数値指定2
CON
JMP @MR5009
MRD
AND= DM35030 #1          ; 個別置き回数
DW #121 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0002 EM1009          ; RB2 数値指定1
CON
DW #2 EM1010             ; RB2 数値指定2
CON
JMP @MR5009
MRD
AND= DM35030 #3          ; 個別置き回数
DW #122 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0004 EM1009          ; RB2 数値指定1
CON
DW #5 EM1010             ; RB2 数値指定2
CON
JMP @MR5009
MPP
AND= DM35030 #2          ; 個別置き回数
DW #123 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0008 EM1009          ; RB2 数値指定1
CON
DW #6 EM1010             ; RB2 数値指定2
CON
JMP @MR5009
STG @MR5009
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND MR3102               ; RB2 ﾜｰｸ収納下降IL(ON=起動可能)
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR5010
STG @MR5010
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
MPS
ANB @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR5011
MPP
AND @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR5015              ; RB2 ﾄﾚｲ収納Sub終了処理
STG @MR5011
MPS
AND<> DM35010 #7         ; RB2 ﾜｰｸ収納回数
DW #0 EM50700            ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
LDA DM35011              ; RB2 収納完了ﾜｰｸ数
CON
ADD DM402                ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
CON
STA DM35011              ; RB2 収納完了ﾜｰｸ数
CON
LDA.D DM5022             ; _生産ｶｳﾝﾀ2
CON
ADD.D DM402              ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
CON
STA.D DM5022             ; _生産ｶｳﾝﾀ2
CON
JMP @MR5015              ; RB2 ﾄﾚｲ収納Sub終了処理
MPP
AND= DM35010 #7          ; RB2 ﾜｰｸ収納回数
MPS
MEP
LDA EM50700              ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
SUB EM1009               ; RB2 数値指定1
CON
STA EM50700              ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
INC DM35030              ; 個別置き回数
CON
INC DM35011              ; RB2 収納完了ﾜｰｸ数
CON
INC.D DM5022             ; _生産ｶｳﾝﾀ2
MRD
AND<= DM35030 #3         ; 個別置き回数
JMP @MR5008              ; RB2 ﾄﾚｲ収納Sub(機種16専用)
MPP
AND> DM35030 #3          ; 個別置き回数
DW #0 EM50700            ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
JMP @MR5015              ; RB2 ﾄﾚｲ収納Sub終了処理
;<h1/>  機種17(BIJ4 取付板ﾌｨﾙﾀGAR)専用動作
STG @MR6000              ; RB2 ﾄﾚｲ収納Sub(機種17専用)
MPS
LD>= DM35010 #1          ; RB2 ﾜｰｸ収納回数
AND<= DM35010 #2         ; RB2 ﾜｰｸ収納回数
OR= DM35010 #4           ; RB2 ﾜｰｸ収納回数
ANL
DW #120 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0003 EM1009          ; RB2 数値指定1
CON
LDA DM35010              ; RB2 ﾜｰｸ収納回数
CON
MUL #2
CON
STA EM1010               ; RB2 数値指定2
CON
JMP @MR6001
MPP
AND= DM35010 #3          ; RB2 ﾜｰｸ収納回数
MPS
AND= DM35030 #0          ; 個別置き回数
DW #121 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0002 EM1009          ; RB2 数値指定1
CON
DW #6 EM1010             ; RB2 数値指定2
CON
JMP @MR6001
MPP
AND= DM35030 #1          ; 個別置き回数
DW #120 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0001 EM1009          ; RB2 数値指定1
CON
DW #7 EM1010             ; RB2 数値指定2
CON
JMP @MR6001
STG @MR6001
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND MR3102               ; RB2 ﾜｰｸ収納下降IL(ON=起動可能)
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR6002
STG @MR6002
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
MPS
ANB @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR6003
MPP
AND @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR5015              ; RB2 ﾄﾚｲ収納Sub終了処理
STG @MR6003
MPS
AND<> DM35010 #3         ; RB2 ﾜｰｸ収納回数
DW #0 EM50700            ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
LDA DM35011              ; RB2 収納完了ﾜｰｸ数
CON
ADD DM402                ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
CON
STA DM35011              ; RB2 収納完了ﾜｰｸ数
CON
LDA.D DM5022             ; _生産ｶｳﾝﾀ2
CON
ADD.D DM402              ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
CON
STA.D DM5022             ; _生産ｶｳﾝﾀ2
CON
JMP @MR5015              ; RB2 ﾄﾚｲ収納Sub終了処理
MPP
AND= DM35010 #3          ; RB2 ﾜｰｸ収納回数
MPS
MEP
LDA EM50700              ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
SUB EM1009               ; RB2 数値指定1
CON
STA EM50700              ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
INC DM35030              ; 個別置き回数
CON
INC DM35011              ; RB2 収納完了ﾜｰｸ数
CON
INC.D DM5022             ; _生産ｶｳﾝﾀ2
MRD
AND<= DM35030 #1         ; 個別置き回数
JMP @MR6000              ; RB2 ﾄﾚｲ収納Sub(機種17専用)
MPP
AND> DM35030 #1          ; 個別置き回数
DW #0 EM50700            ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
JMP @MR5015              ; RB2 ﾄﾚｲ収納Sub終了処理
;<h1/>  機種18(BIJ4 針GAR)専用動作
STG @MR6004              ; RB2 ﾄﾚｲ収納Sub(機種18専用)
MPS
AND= DM35010 #1          ; RB2 ﾜｰｸ収納回数
DW #113 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #3 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
JMP @MR6005
MPP
AND= DM35010 #2          ; RB2 ﾜｰｸ収納回数
MPS
AND= DM35030 #0          ; 個別置き回数
DW #121 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0002 EM1009          ; RB2 数値指定1
CON
DW #6 EM1010             ; RB2 数値指定2
CON
JMP @MR6005
MRD
AND= DM35030 #1          ; 個別置き回数
DW #120 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0001 EM1009          ; RB2 数値指定1
CON
DW #7 EM1010             ; RB2 数値指定2
CON
JMP @MR6005
MPP
AND= DM35030 #2          ; 個別置き回数
DW #122 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $000C EM1009          ; RB2 数値指定1
CON
DW #8 EM1010             ; RB2 数値指定2
CON
JMP @MR6005
STG @MR6005
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND MR3102               ; RB2 ﾜｰｸ収納下降IL(ON=起動可能)
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR6006
STG @MR6006
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
MPS
ANB @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR6007
MPP
AND @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR5015              ; RB2 ﾄﾚｲ収納Sub終了処理
STG @MR6007
MPS
AND= DM35010 #1          ; RB2 ﾜｰｸ収納回数
DW #0 EM50700            ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
LDA DM35011              ; RB2 収納完了ﾜｰｸ数
CON
ADD DM402                ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
CON
STA DM35011              ; RB2 収納完了ﾜｰｸ数
CON
LDA.D DM5022             ; _生産ｶｳﾝﾀ2
CON
ADD.D DM402              ; RB2 吸着ﾍｯﾄﾞ数設定(1-8)
CON
STA.D DM5022             ; _生産ｶｳﾝﾀ2
CON
JMP @MR5015              ; RB2 ﾄﾚｲ収納Sub終了処理
MPP
AND= DM35010 #2          ; RB2 ﾜｰｸ収納回数
MPS
MEP
LDA EM50700              ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
SUB EM1009               ; RB2 数値指定1
CON
STA EM50700              ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
INC DM35030              ; 個別置き回数
CON
INC DM35011              ; RB2 収納完了ﾜｰｸ数
CON
INC.D DM5022             ; _生産ｶｳﾝﾀ2
MRD
AND<= DM35030 #2         ; 個別置き回数
JMP @MR6004              ; RB2 ﾄﾚｲ収納Sub(機種18専用)
MPP
AND> DM35030 #2          ; 個別置き回数
INC DM35011              ; RB2 収納完了ﾜｰｸ数
CON
INC.D DM5022             ; _生産ｶｳﾝﾀ2
CON
DW #0 EM50700            ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
JMP @MR5015              ; RB2 ﾄﾚｲ収納Sub終了処理
;<h1/>  機種19(BIJ4 ﾎﾙﾀﾞ上GAR)専用動作
STG @MR6008              ; RB2 ﾄﾚｲ収納Sub(機種19専用)
MPS
AND= DM35010 #1          ; RB2 ﾜｰｸ収納回数
MPS
AND= DM35030 #0          ; 個別置き回数
DW #120 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0003 EM1009          ; RB2 数値指定1
CON
DW #6 EM1010             ; RB2 数値指定2
CON
JMP @MR6009
MPP
AND= DM35030 #1          ; 個別置き回数
DW #122 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $000C EM1009          ; RB2 数値指定1
CON
DW #9 EM1010             ; RB2 数値指定2
CON
JMP @MR6009
MRD
AND= DM35010 #2          ; RB2 ﾜｰｸ収納回数
MPS
AND= DM35030 #0          ; 個別置き回数
DW #120 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0003 EM1009          ; RB2 数値指定1
CON
DW #7 EM1010             ; RB2 数値指定2
CON
JMP @MR6009
MPP
AND= DM35030 #1          ; 個別置き回数
DW #122 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $000C EM1009          ; RB2 数値指定1
CON
DW #10 EM1010            ; RB2 数値指定2
CON
JMP @MR6009
MRD
AND= DM35010 #3          ; RB2 ﾜｰｸ収納回数
MPS
AND= DM35030 #0          ; 個別置き回数
DW #120 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0003 EM1009          ; RB2 数値指定1
CON
DW #11 EM1010            ; RB2 数値指定2
CON
JMP @MR6009
MPP
AND= DM35030 #1          ; 個別置き回数
DW #122 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $000C EM1009          ; RB2 数値指定1
CON
DW #14 EM1010            ; RB2 数値指定2
CON
JMP @MR6009
MRD
AND= DM35010 #4          ; RB2 ﾜｰｸ収納回数
MPS
AND= DM35030 #0          ; 個別置き回数
DW #120 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0003 EM1009          ; RB2 数値指定1
CON
DW #12 EM1010            ; RB2 数値指定2
CON
JMP @MR6009
MPP
AND= DM35030 #1          ; 個別置き回数
DW #122 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $000C EM1009          ; RB2 数値指定1
CON
DW #15 EM1010            ; RB2 数値指定2
CON
JMP @MR6009
MRD
AND= DM35010 #5          ; RB2 ﾜｰｸ収納回数
MPS
AND= DM35030 #0          ; 個別置き回数
DW #120 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0003 EM1009          ; RB2 数値指定1
CON
DW #8 EM1010             ; RB2 数値指定2
CON
JMP @MR6009
MPP
AND= DM35030 #1          ; 個別置き回数
DW #122 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $000C EM1009          ; RB2 数値指定1
CON
DW #13 EM1010            ; RB2 数値指定2
CON
JMP @MR6009
MPP
AND= DM35010 #6          ; RB2 ﾜｰｸ収納回数
MPS
AND= DM35030 #0          ; 個別置き回数
DW #121 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0002 EM1009          ; RB2 数値指定1
CON
DW #1 EM1010             ; RB2 数値指定2
CON
JMP @MR6009
MRD
AND= DM35030 #1          ; 個別置き回数
DW #120 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0001 EM1009          ; RB2 数値指定1
CON
DW #2 EM1010             ; RB2 数値指定2
CON
JMP @MR6009
MRD
AND= DM35030 #2          ; 個別置き回数
DW #122 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0004 EM1009          ; RB2 数値指定1
CON
DW #4 EM1010             ; RB2 数値指定2
CON
JMP @MR6009
MPP
AND= DM35030 #3          ; 個別置き回数
DW #123 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0008 EM1009          ; RB2 数値指定1
CON
DW #5 EM1010             ; RB2 数値指定2
CON
JMP @MR6009
STG @MR6009
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND MR3102               ; RB2 ﾜｰｸ収納下降IL(ON=起動可能)
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR6010
STG @MR6010
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
MPS
ANB @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR6011
MPP
AND @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR5015              ; RB2 ﾄﾚｲ収納Sub終了処理
STG @MR6011
MPS
MEP
LDA EM50700              ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
SUB EM1009               ; RB2 数値指定1
CON
STA EM50700              ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
INC DM35030              ; 個別置き回数
MRD
LD>= DM35010 #1          ; RB2 ﾜｰｸ収納回数
AND<= DM35010 #5         ; RB2 ﾜｰｸ収納回数
ANL
MPS
MEP
LDA DM35011              ; RB2 収納完了ﾜｰｸ数
CON
ADD #2
CON
STA DM35011              ; RB2 収納完了ﾜｰｸ数
CON
LDA.D DM5022             ; _生産ｶｳﾝﾀ2
CON
ADD.D #2
CON
STA.D DM5022             ; _生産ｶｳﾝﾀ2
MRD
AND>= DM35030 #1         ; 個別置き回数
JMP @MR6008              ; RB2 ﾄﾚｲ収納Sub(機種19専用)
MPP
AND> DM35030 #1          ; 個別置き回数
JMP @MR5015              ; RB2 ﾄﾚｲ収納Sub終了処理
MPP
AND= DM35010 #6          ; RB2 ﾜｰｸ収納回数
MPS
MEP
INC DM35011              ; RB2 収納完了ﾜｰｸ数
CON
INC.D DM5022             ; _生産ｶｳﾝﾀ2
MRD
AND<= DM35030 #3         ; 個別置き回数
JMP @MR6008              ; RB2 ﾄﾚｲ収納Sub(機種19専用)
MPP
AND> DM35030 #3          ; 個別置き回数
DW #0 EM50700            ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
JMP @MR5015              ; RB2 ﾄﾚｲ収納Sub終了処理
;<h1/>  機種25(FUS ﾌﾞｯｼｭ)専用動作
STG @MR6012              ; 機種25(FUS ﾌﾞｯｼｭ)専用動作
MPS
AND<= DM35010 #3         ; RB2 ﾜｰｸ収納回数
DW #120 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $000F EM1009          ; RB2 数値指定1
CON
LDA DM35010              ; RB2 ﾜｰｸ収納回数
CON
SUB #1
CON
MUL #2
CON
ADD #1
CON
STA EM1010               ; RB2 数値指定2
CON
JMP @MR6013
MPP
AND> DM35010 #3          ; RB2 ﾜｰｸ収納回数
DW #120 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $000F EM1009          ; RB2 数値指定1
CON
LDA DM35010              ; RB2 ﾜｰｸ収納回数
CON
SUB #1
CON
MUL #2
CON
ADD #7
CON
STA EM1010               ; RB2 数値指定2
CON
JMP @MR6013
STG @MR6013
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND MR3102               ; RB2 ﾜｰｸ収納下降IL(ON=起動可能)
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR6014
STG @MR6014
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
MPS
ANB @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR6015
MPP
AND @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR5015              ; RB2 ﾄﾚｲ収納Sub終了処理
STG @MR6015
LDA DM35011              ; RB2 収納完了ﾜｰｸ数
CON
ADD #4
CON
STA DM35011              ; RB2 収納完了ﾜｰｸ数
CON
LDA.D DM5022             ; _生産ｶｳﾝﾀ2
CON
ADD.D #4
CON
STA.D DM5022             ; _生産ｶｳﾝﾀ2
CON
DW #0 EM50700            ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
JMP @MR5015              ; RB2 ﾄﾚｲ収納Sub終了処理
;　RB2 ﾄﾚｲへﾜｰｸ収納終了処理
STG @MR5015              ; RB2 ﾄﾚｲ収納Sub終了処理
MPS
ANB @MR4503              ; RB2動作指令Sub HOLD End
SET @MR4901              ; RB2 ﾄﾚｲ収納Sub END
CON
RES @MR4902              ; RB2 ﾄﾚｲ収納Sub中
CON
ENDS
MPP
AND @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4503              ; RB2動作指令Sub HOLD End
CON
SET @MR4901              ; RB2 ﾄﾚｲ収納Sub END
CON
RES @MR4902              ; RB2 ﾄﾚｲ収納Sub中
CON
SET @MR4903              ; RB2 ﾄﾚｲ収納Sub HOLD END
CON
ENDS
;<h1/> RB2 実ﾄﾚｲ 段積み
STG @MR5100              ; RB2 段積みSub Start
SET @MR5102              ; RB2 段積みSub中
CON
JMP @MR5104
STG @MR5104
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
AND MR3102               ; RB2 ﾜｰｸ収納下降IL(ON=起動可能)
AND MR19101              ; ﾄﾚｲ供給完了(段ﾊﾞﾗｼ->RB2)
ANB MR19012              ; ﾄﾚｲ取出中(RB2->段ﾊﾞﾗｼ)
ANB MR19015              ; 位置決め解除要求(RB2->位置決)
ANL
MPS
LD R4604                 ; 段積ｽﾗｲﾀﾞ 段積位置確認
ANB MR23501              ; 段積みﾄﾚｲ検知異常
ANL
SET MR19012              ; ﾄﾚｲ取出中(RB2->段ﾊﾞﾗｼ)
CON
JMP @MR5105
MRD
ANB R4604                ; 段積ｽﾗｲﾀﾞ 段積位置確認
JMP @MR5800
MPP
AND MR23501              ; 段積みﾄﾚｲ検知異常
JMP @MR5802
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
;段積ｽﾗｲﾀﾞ位置異常
STG @MR5800
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #50 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #4604 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task5 ERROR
CON
JMP @MR5801
STG @MR5801
AND @MR101               ; Task5 ERROR_End
RES @MR101               ; Task5 ERROR_End
CON
RES @MR1900              ; Main1 HALT許可
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR5104
;段積みﾄﾚｲ検知異常
STG @MR5802
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #2000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #54 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #4708 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task5 ERROR
CON
JMP @MR5803
STG @MR5803
AND @MR101               ; Task5 ERROR_End
RES @MR101               ; Task5 ERROR_End
CON
RES @MR1900              ; Main1 HALT許可
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR5104
;  RB2 ﾄﾚｲ取出 下降
STG @MR5105
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND MR3102               ; RB2 ﾜｰｸ収納下降IL(ON=起動可能)
DW #71 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR5106
STG @MR5106
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
MPS
ANB @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR5108
MPP
AND @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
RES @MR4503              ; RB2動作指令Sub HOLD End
CON
SET @MR5103              ; RB2 段積みSub HOLD END
CON
JMP @MR5215
;  ﾄﾚｲ位置決め解除
STG @MR5108
AND MR19101              ; ﾄﾚｲ供給完了(段ﾊﾞﾗｼ->RB2)
AND MR19012              ; ﾄﾚｲ取出中(RB2->段ﾊﾞﾗｼ)
ANB MR19015              ; 位置決め解除要求(RB2->位置決)
SET MR19015              ; 位置決め解除要求(RB2->位置決)
CON
JMP @MR5109
STG @MR5109
ANB R4608                ; ﾄﾚｲ位置決めﾋﾟﾝ上下(右) 下降限
AND R4609                ; ﾄﾚｲ位置決めﾋﾟﾝ上下(右) 上昇限
ANB R4610                ; ﾄﾚｲ位置決めﾋﾟﾝ上下(左) 下降限
AND R4611                ; ﾄﾚｲ位置決めﾋﾟﾝ上下(左) 上昇限
ANB R4612                ; ﾄﾚｲ位置決めﾋﾟﾝ開閉(右) 閉限
AND R4613                ; ﾄﾚｲ位置決めﾋﾟﾝ開閉(右) 開限
ANB R4614                ; ﾄﾚｲ位置決めﾋﾟﾝ開閉(左) 閉限
AND R4615                ; ﾄﾚｲ位置決めﾋﾟﾝ開閉(左) 開限
RES MR19015              ; 位置決め解除要求(RB2->位置決)
CON
JMP @MR5112
; ﾄﾚｲ取出上昇位置移動
STG @MR5112
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND MR3100               ; RB2 上昇位置移動IL(ON=起動可能)
DW #180 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR5113
STG @MR5113
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
MPS
ANB @MR4503              ; RB2動作指令Sub HOLD End
RES MR19012              ; ﾄﾚｲ取出中(RB2->段ﾊﾞﾗｼ)
CON
DW #0 DM35010            ; RB2 ﾜｰｸ収納回数
CON
DW #0 DM35011            ; RB2 収納完了ﾜｰｸ数
CON
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR5115
JMP @MR5200
MPP
AND @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
RES @MR4503              ; RB2動作指令Sub HOLD End
CON
SET @MR5103              ; RB2 段積みSub HOLD END
CON
JMP @MR5215
; 空ﾄﾚｲ供給要求
STG @MR5115
ANB MR19010              ; ﾄﾚｲ供給要求(RB2->段ﾊﾞﾗｼ)
ANB MR19100              ; ﾄﾚｲ供給中(段ﾊﾞﾗｼ->RB2)
ANB R4600                ; ﾜｰｸ収納位置ﾄﾚｲ確認(ON=ﾄﾚｲ有)
SET MR19010              ; ﾄﾚｲ供給要求(RB2->段ﾊﾞﾗｼ)
CON
ENDS
;  RB2 ﾄﾚｲ段積み
STG @MR5200
DW #72 EM1008            ; RB2 動作ｺﾏﾝﾄﾞ
CON
LDA DM35020              ; RB2 段積みﾄﾚｲ枚数
CON
ADD #1
CON
STA EM1009               ; RB2 数値指定1
CON
MPS
ANB @MR3801              ; 段積み最終実ﾄﾚｲ
DW #0 EM1010             ; RB2 数値指定2
CON
JMP @MR5201
MPP
AND @MR3801              ; 段積み最終実ﾄﾚｲ
DW #1 EM1010             ; RB2 数値指定2
CON
JMP @MR5201
STG @MR5201
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND MR3104               ; RB2 段積下降IL(ON=起動可能)
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR5202
STG @MR5202
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
MPS
ANB @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
@INC DM35020             ; RB2 段積みﾄﾚｲ枚数
CON
MPS
ANB @MR3801              ; 段積み最終実ﾄﾚｲ
JMP @MR5215
MPP
AND @MR3801              ; 段積み最終実ﾄﾚｲ
JMP @MR5203
MPP
AND @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
RES @MR4503              ; RB2動作指令Sub HOLD End
CON
SET @MR5103              ; RB2 段積みSub HOLD END
CON
JMP @MR5215
;  RB2 空ﾄﾚｲ段積み
STG @MR5203
RES @MR3801              ; 段積み最終実ﾄﾚｲ
CON
JMP @MR5100              ; RB2 段積みSub Start
STG @MR5215
SET @MR5101              ; RB2 段積みSub END
CON
RES @MR5102              ; RB2 段積みSub中
CON
ENDS
;<h1/> RB2 段積みﾄﾚｲ搬出
STG @MR5300              ; RB2 段積みﾄﾚｲ搬出Sub Start
AND MR3105               ; RB2 ﾄﾚｲ搬出前IL(ON=起動可能)
SET @MR5302              ; RB2 段積みﾄﾚｲ搬出Sub中
CON
JMP @MR5303
;  RB2 段積みﾄﾚｲ排出前位置移動
STG @MR5303
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND MR3105               ; RB2 ﾄﾚｲ搬出前IL(ON=起動可能)
DW #190 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR5304
STG @MR5304
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
ANB @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR5305
;  動作ｲﾝﾀｰﾛｯｸ確認
STG @MR5305
LD MR19108               ; ｼｬｯﾀｰ開要求(RB2->段積)
AND R4700                ; 段積 ｼｬｯﾀｰ 開限
ANB R4701                ; 段積 ｼｬｯﾀｰ 閉限
LDB MR19108              ; ｼｬｯﾀｰ開要求(RB2->段積)
ANB R4700                ; 段積 ｼｬｯﾀｰ 開限
AND R4701                ; 段積 ｼｬｯﾀｰ 閉限
ORL
ANL
ANB R4702                ; 段積 ﾄﾚｲﾘﾌﾄ 上昇限
AND R4703                ; 段積 ﾄﾚｲﾘﾌﾄ 下降限
AND R4101                ; Sｶﾊﾞｰ2(ﾄﾚｲ取出) 閉中
ANB R7101                ; Sｶﾊﾞｰ2(ﾄﾚｲ取出) 開
MPS
AND R4607                ; 段積 ﾄﾚｲ受皿有無確認
MPS
AND R4606                ; 段積 排出ﾄﾚｲ確認
MPS
AND R4605                ; 段積 段積ﾄﾚｲ高さ確認
JMP @MR5313
MPP
ANB R4605                ; 段積 段積ﾄﾚｲ高さ確認
JMP @MR5307
MPP
ANB R4606                ; 段積 排出ﾄﾚｲ確認
JMP @MR5309
MPP
ANB R4607                ; 段積 ﾄﾚｲ受皿有無確認
JMP @MR5311
STG @MR5313
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB R42603               ; _Grp1_Task3_ﾎﾟｰｽﾞ許可
ANB MR10006              ; ﾄﾚｲ取出 ﾎﾟｰｽﾞ許可
ANL
SET MR19108              ; ｼｬｯﾀｰ開要求(RB2->段積)
CON
JMP @MR5306
MPP
LD R42603                ; _Grp1_Task3_ﾎﾟｰｽﾞ許可
OR MR10006               ; ﾄﾚｲ取出 ﾎﾟｰｽﾞ許可
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR5306
AND MR19108              ; ｼｬｯﾀｰ開要求(RB2->段積)
AND MR19200              ; ｼｬｯﾀｰ開完了(段積->RB2)
AND R4700                ; 段積 ｼｬｯﾀｰ 開限
ANB R4701                ; 段積 ｼｬｯﾀｰ 閉限
RES MR19108              ; ｼｬｯﾀｰ開要求(RB2->段積)
CON
JMP @MR5314
; 段積みﾄﾚｲ高さ異常
STG @MR5307
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #2000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #51 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #4605 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task5 ERROR
CON
JMP @MR5308
STG @MR5308
AND @MR101               ; Task5 ERROR_End
RES @MR101               ; Task5 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR5305
; 排出済みﾄﾚｲ除材要求
STG @MR5309
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #2000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #53 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #4606 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task5 ERROR
CON
JMP @MR5310
STG @MR5310
AND @MR101               ; Task5 ERROR_End
RES @MR101               ; Task5 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR5305
; 段積みﾄﾚｲ受皿なし
STG @MR5311
SET @MR1900              ; Main1 HALT許可
CON
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #2000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #52 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #4607 @DM2            ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task5 ERROR
CON
JMP @MR5312
STG @MR5312
AND @MR101               ; Task5 ERROR_End
RES @MR101               ; Task5 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
AND @MR105               ; SW1
JMP @MR5305
;  RB2 段積みﾄﾚｲ搬出前位置移動
STG @MR5314
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND MR3105               ; RB2 ﾄﾚｲ搬出前IL(ON=起動可能)
DW #190 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR5315
STG @MR5315
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
ANB @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR5400
;  RB2 段積みﾄﾚｲ搬出位置移動
STG @MR5400
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND MR3106               ; RB2 ﾄﾚｲ搬出IL(ON=起動可能)
DW #191 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR5401
STG @MR5401
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
ANB @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR5402
STG @MR5402
MPS
ANB LR20000              ; ｻﾝﾌﾟﾙ取動作中
DW #0 DM35020            ; RB2 段積みﾄﾚｲ枚数
CON
JMP @MR5404
MPP
AND LR20000              ; ｻﾝﾌﾟﾙ取動作中
RES LR103                ; _割り込みSW4　ON/OFF状態
CON
RES LR20000              ; ｻﾝﾌﾟﾙ取動作中
CON
DW #0 DM35020            ; RB2 段積みﾄﾚｲ枚数
CON
JMP @MR5404
;  RB2 ﾄﾚｲﾘﾌﾄ上昇要求
STG @MR5404
ANB MR19109              ; ﾄﾚｲﾘﾌﾄ上昇要求(RB2->段積)
SET MR19109              ; ﾄﾚｲﾘﾌﾄ上昇要求(RB2->段積)
CON
JMP @MR5405
STG @MR5405
AND MR19109              ; ﾄﾚｲﾘﾌﾄ上昇要求(RB2->段積)
AND MR19201              ; ﾄﾚｲﾘﾌﾄ上昇完了(段積->RB2)
AND R4702                ; 段積 ﾄﾚｲﾘﾌﾄ 上昇限
RES MR19109              ; ﾄﾚｲﾘﾌﾄ上昇要求(RB2->段積)
CON
JMP @MR5408
;  RB2 段積みﾄﾚｲ搬出後位置移動
STG @MR5408
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND MR3105               ; RB2 ﾄﾚｲ搬出前IL(ON=起動可能)
DW #190 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR5409
STG @MR5409
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
ANB @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR5415
STG @MR5415
SET @MR5301              ; RB2 段積みﾄﾚｲ搬出Sub END
CON
RES @MR5302              ; RB2 段積みﾄﾚｲ搬出Sub中
CON
ENDS
;<h1/> RB2 仮置き台→ﾄﾚｲﾜｰｸ収納(不足分)
STG @MR5500              ; RB2 仮置台->ﾄﾚｲ収納Sub Start
SET @MR5502              ; RB2 仮置台->ﾄﾚｲ収納Sub中
CON
JMP @MR5505
;    選択中ｺｰﾄﾞ		 1 : BIJ2 ﾌﾞｯｼｭｼｰﾙ ADJ		 2 : BIJ2 ｹｰｽﾍｯﾄﾞBK ADJ		 3 : BIJ2 ｹｰｽﾍｯﾄﾞCOL ADJ	 4 : BIJ2 針ｶｰﾄﾘｯｼﾞ ADJ
;    				 5 : BIJ2 流路中間 ADJ		 6 : BIJ2 取付板ﾌｨﾙﾀ ADJ	 7 : BIJ2 ﾎﾙﾀﾞﾍｯﾄﾞ ADJ		 8 : BIJ2 ﾎﾙﾀﾞ上 ADJ
;    				 9 : ----					10 : ----
;    				11 : BIJ4 ﾌﾟﾚｰﾄﾄｯﾌﾟ HOP		12 : BIJ4 ﾌﾟﾚｰﾄｷｬﾋﾞﾃｨ HOP	13 : BIJ4 ﾌﾟﾚｰﾄ流路 HOP		14 : BIJ4 ﾌﾟﾚｰﾄﾎﾞﾄﾑ HOP
;    				15 : BIJ4 ｶﾊﾞｰﾎﾞﾄﾑ HOP		16 : BIJ4 ﾌﾞｯｼｭｼｰﾙ HOP		17 : BIJ4 取付板ﾌｨﾙﾀ HOP	18 : BIJ4 針 HOP
;    				19 : BIJ4 ﾎﾙﾀﾞ上 HOP		20 : BIJ4 ﾎﾙﾀﾞﾍｯﾄﾞ HOP
;    				21 : OP2  ﾎﾙﾀﾞﾌｨﾙﾀ OP2		22 : OP2  ｹｰｽﾍｯﾄﾞ OP2		23 : OP2  ｶﾊﾞｰﾌｨﾙﾀ/ｶﾊﾞｰ基板
;    				24 : OP2  ｼｰﾙFFC			25 : OP2  送品用ｷｬｯﾌﾟ
STG @MR5505
MPS
LD= DM5260 #1            ; 選択中ｺｰﾄﾞ
LD>= DM5260 #4           ; 選択中ｺｰﾄﾞ
AND<= DM5260 #5          ; 選択中ｺｰﾄﾞ
ORL
LD>= DM5260 #11          ; 選択中ｺｰﾄﾞ
AND<= DM5260 #15         ; 選択中ｺｰﾄﾞ
ORL
OR= DM5260 #20           ; 選択中ｺｰﾄﾞ
ANL
JMP @MR5515
MPP
LD>= DM5260 #2           ; 選択中ｺｰﾄﾞ
AND<= DM5260 #3          ; 選択中ｺｰﾄﾞ
LD>= DM5260 #6           ; 選択中ｺｰﾄﾞ
AND<= DM5260 #8          ; 選択中ｺｰﾄﾞ
ORL
LD>= DM5260 #16          ; 選択中ｺｰﾄﾞ
AND<= DM5260 #19         ; 選択中ｺｰﾄﾞ
ORL
OR>= DM5260 #21          ; 選択中ｺｰﾄﾞ
ANL
JMP @MR5506
; 仮置き台から取出動作を行うﾍｯﾄﾞ選択
STG @MR5506
MPS
DW #101 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #1 EM1009             ; RB2 数値指定1
CON
DW $0000 EM1010          ; RB2 数値指定2
CON
JMP @MR5508
MPP
LD<= DM35012 DM35013     ; ﾄﾚｲ収納 不足ﾜｰｸ数  仮置取出ﾜｰｸ数
ANB LR20007              ; RB2 仮置台->ﾄﾚｲ収納Sub 補填完了
ANL
@DW #0 DM35013           ; 仮置取出ﾜｰｸ数
STG @MR5508
MPS
LD= DM7018 #0            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND R4308                ; 仮置台 ﾜｰｸ確認1
LD= DM7018 #1            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND EM50800.0
ORL
AND> DM35012 DM35013     ; ﾄﾚｲ収納 不足ﾜｰｸ数  仮置取出ﾜｰｸ数
ANL
LDA EM1010               ; RB2 数値指定2
CON
ADD $0001
CON
STA EM1010               ; RB2 数値指定2
CON
@INC DM35013             ; 仮置取出ﾜｰｸ数
MRD
LD= DM7018 #0            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND R4309                ; 仮置台 ﾜｰｸ確認2
LD= DM7018 #1            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND EM50800.1
ORL
AND> DM35012 DM35013     ; ﾄﾚｲ収納 不足ﾜｰｸ数  仮置取出ﾜｰｸ数
ANL
LDA EM1010               ; RB2 数値指定2
CON
ADD $0002
CON
STA EM1010               ; RB2 数値指定2
CON
@INC DM35013             ; 仮置取出ﾜｰｸ数
MRD
LD= DM7018 #0            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND R4310                ; 仮置台 ﾜｰｸ確認3
LD= DM7018 #1            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND EM50800.2
ORL
AND> DM35012 DM35013     ; ﾄﾚｲ収納 不足ﾜｰｸ数  仮置取出ﾜｰｸ数
ANL
LDA EM1010               ; RB2 数値指定2
CON
ADD $0004
CON
STA EM1010               ; RB2 数値指定2
CON
@INC DM35013             ; 仮置取出ﾜｰｸ数
MRD
LD= DM7018 #0            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND R4311                ; 仮置台 ﾜｰｸ確認4
LD= DM7018 #1            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND EM50800.3
ORL
AND> DM35012 DM35013     ; ﾄﾚｲ収納 不足ﾜｰｸ数  仮置取出ﾜｰｸ数
ANL
LDA EM1010               ; RB2 数値指定2
CON
ADD $0008
CON
STA EM1010               ; RB2 数値指定2
CON
@INC DM35013             ; 仮置取出ﾜｰｸ数
MRD
LD= DM7018 #0            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND R4312                ; 仮置台 ﾜｰｸ確認5
LD= DM7018 #1            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND EM50800.4
ORL
AND> DM35012 DM35013     ; ﾄﾚｲ収納 不足ﾜｰｸ数  仮置取出ﾜｰｸ数
ANL
LDA EM1010               ; RB2 数値指定2
CON
ADD $0010
CON
STA EM1010               ; RB2 数値指定2
CON
@INC DM35013             ; 仮置取出ﾜｰｸ数
MRD
LD= DM7018 #0            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND R4313                ; 仮置台 ﾜｰｸ確認6
LD= DM7018 #1            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND EM50800.5
ORL
AND> DM35012 DM35013     ; ﾄﾚｲ収納 不足ﾜｰｸ数  仮置取出ﾜｰｸ数
ANL
LDA EM1010               ; RB2 数値指定2
CON
ADD $0020
CON
STA EM1010               ; RB2 数値指定2
CON
@INC DM35013             ; 仮置取出ﾜｰｸ数
MRD
LD= DM7018 #0            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND R4314                ; 仮置台 ﾜｰｸ確認7
LD= DM7018 #1            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND EM50800.6
ORL
AND> DM35012 DM35013     ; ﾄﾚｲ収納 不足ﾜｰｸ数  仮置取出ﾜｰｸ数
ANL
LDA EM1010               ; RB2 数値指定2
CON
ADD $0040
CON
STA EM1010               ; RB2 数値指定2
CON
@INC DM35013             ; 仮置取出ﾜｰｸ数
MRD
LD= DM7018 #0            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND R4315                ; 仮置台 ﾜｰｸ確認8
LD= DM7018 #1            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND EM50800.7
ORL
AND> DM35012 DM35013     ; ﾄﾚｲ収納 不足ﾜｰｸ数  仮置取出ﾜｰｸ数
ANL
LDA EM1010               ; RB2 数値指定2
CON
ADD $0080
CON
STA EM1010               ; RB2 数値指定2
CON
@INC DM35013             ; 仮置取出ﾜｰｸ数
MRD
AND<> EM1010 #0          ; RB2 数値指定2
JMP @MR5509
MPP
LD= DM7018 #0            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
ANB R4308                ; 仮置台 ﾜｰｸ確認1
ANB R4309                ; 仮置台 ﾜｰｸ確認2
ANB R4310                ; 仮置台 ﾜｰｸ確認3
ANB R4311                ; 仮置台 ﾜｰｸ確認4
ANB R4312                ; 仮置台 ﾜｰｸ確認5
ANB R4313                ; 仮置台 ﾜｰｸ確認6
ANB R4314                ; 仮置台 ﾜｰｸ確認7
ANB R4315                ; 仮置台 ﾜｰｸ確認8
LD= DM7018 #1            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND= EM50800 #0          ; 仮置台 ｼﾌﾄﾃﾞｰﾀ
ORL
ANL
JMP @MR5515
; 仮置き台からﾜｰｸ取出
STG @MR5509
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND MR3111               ; RB2 仮置台下降IL(ON=起動可能)
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR5510
STG @MR5510
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
ANB @MR4503              ; RB2動作指令Sub HOLD End
MPS
LDA EM50800              ; 仮置台 ｼﾌﾄﾃﾞｰﾀ
CON
SUB EM1010               ; RB2 数値指定2
CON
STA EM50800              ; 仮置台 ｼﾌﾄﾃﾞｰﾀ
CON
LDA EM1010               ; RB2 数値指定2
CON
STA DM35014              ; 仮置取出完了ﾍｯﾄﾞ(通常補填時)
MPP
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR5511
; ﾜｰｸをﾄﾚｲへ収納するﾍｯﾄﾞ/ﾎﾟｼﾞｼｮﾝ選択
STG @MR5511
MPS
DW #0 EM1008             ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW $0000 EM1010          ; RB2 数値指定2
MRD
AND DM35014.7            ; 仮置取出完了ﾍｯﾄﾞ8(通常補填時)
DW #127 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0080 EM1009          ; RB2 数値指定1
MRD
AND DM35014.6            ; 仮置取出完了ﾍｯﾄﾞ7(通常補填時)
DW #126 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0040 EM1009          ; RB2 数値指定1
MRD
AND DM35014.5            ; 仮置取出完了ﾍｯﾄﾞ6(通常補填時)
DW #125 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0020 EM1009          ; RB2 数値指定1
MRD
AND DM35014.4            ; 仮置取出完了ﾍｯﾄﾞ5(通常補填時)
DW #124 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0010 EM1009          ; RB2 数値指定1
MRD
AND DM35014.3            ; 仮置取出完了ﾍｯﾄﾞ4(通常補填時)
DW #123 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0008 EM1009          ; RB2 数値指定1
MRD
AND DM35014.2            ; 仮置取出完了ﾍｯﾄﾞ3(通常補填時)
DW #122 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0004 EM1009          ; RB2 数値指定1
MRD
AND DM35014.1            ; 仮置取出完了ﾍｯﾄﾞ2(通常補填時)
DW #121 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0002 EM1009          ; RB2 数値指定1
MRD
AND DM35014.0            ; 仮置取出完了ﾍｯﾄﾞ1(通常補填時)
DW #120 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW $0001 EM1009          ; RB2 数値指定1
MRD
AND= DM35015 #0          ; ﾜｰｸ補填回数
LDA DM470                ; ﾜｰｸ補填ﾄﾚｲ位置1
CON
STA EM1010               ; RB2 数値指定2
MRD
AND= DM35015 #1          ; ﾜｰｸ補填回数
LDA DM472                ; ﾜｰｸ補填ﾄﾚｲ位置2
CON
STA EM1010               ; RB2 数値指定2
MPP
LD<> EM1008 #0           ; RB2 動作ｺﾏﾝﾄﾞ
AND<> EM1009 #0          ; RB2 数値指定1
AND<> EM1010 #0          ; RB2 数値指定2
ANL
JMP @MR5512
; 仮置き台から取出したﾜｰｸをﾄﾚｲへ収納
STG @MR5512
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND MR3102               ; RB2 ﾜｰｸ収納下降IL(ON=起動可能)
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR5513
STG @MR5513
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
MPS
ANB @MR4502              ; RB2動作指令Sub中
@INC.D DM5022            ; _生産ｶｳﾝﾀ2
CON
@INC DM35011             ; RB2 収納完了ﾜｰｸ数
CON
@INC DM35015             ; ﾜｰｸ補填回数
CON
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR5514
MPP
AND @MR4502              ; RB2動作指令Sub中
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR5515
STG @MR5514
MPS
MEP
LDA DM35014              ; 仮置取出完了ﾍｯﾄﾞ(通常補填時)
CON
SUB EM1009               ; RB2 数値指定1
CON
STA DM35014              ; 仮置取出完了ﾍｯﾄﾞ(通常補填時)
MRD
LD= DM35012 DM35015      ; ﾄﾚｲ収納 不足ﾜｰｸ数  ﾜｰｸ補填回数
AND= DM35014 #0          ; 仮置取出完了ﾍｯﾄﾞ(通常補填時)
ANL
DW #0 DM35015            ; ﾜｰｸ補填回数
CON
SET LR20007              ; RB2 仮置台->ﾄﾚｲ収納Sub 補填完了
CON
JMP @MR5515
MPP
AND> DM35012 DM35015     ; ﾄﾚｲ収納 不足ﾜｰｸ数  ﾜｰｸ補填回数
MPS
AND= DM35014 #0          ; 仮置取出完了ﾍｯﾄﾞ(通常補填時)
JMP @MR5515
MPP
AND> DM35014 #0          ; 仮置取出完了ﾍｯﾄﾞ(通常補填時)
JMP @MR5511
STG @MR5515
MPS
ANB @MR4503              ; RB2動作指令Sub HOLD End
SET @MR5501              ; RB2 仮置台->ﾄﾚｲ収納Sub END
CON
RES @MR5502              ; RB2 仮置台->ﾄﾚｲ収納Sub中
CON
ENDS
MPP
AND @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4503              ; RB2動作指令Sub HOLD End
CON
SET @MR5501              ; RB2 仮置台->ﾄﾚｲ収納Sub END
CON
RES @MR5502              ; RB2 仮置台->ﾄﾚｲ収納Sub中
CON
SET @MR5503              ; RB2 仮置台->ﾄﾚｲ収納Sub HOLD END
CON
ENDS
;<h1/> RB2 仮置き台→ﾄﾚｲﾜｰｸ収納(払出停止)
STG @MR5600              ; RB2 仮置台->ﾄﾚｲ収納Sub Start
SET MR302                ; 自動運転_真空ﾎﾟﾝﾌﾟOn_FLG
CON
AND R008                 ; 元真空検出
SET @MR5602              ; RB2 仮置台->ﾄﾚｲ収納Sub中
CON
JMP @MR5604
STG @MR5604
AND= EM50000 #0          ; 反転EV ｼﾌﾄﾃﾞｰﾀ
AND= EM50100 #0          ; INDEX Pos1 ｼﾌﾄﾚｼﾞｽﾀ
AND= EM50200 #0          ; INDEX Pos2 ｼﾌﾄﾚｼﾞｽﾀ
AND= EM50300 #0
AND= EM50400 #0
AND= EM50500 #0          ; INDEX Pos5 ｼﾌﾄﾚｼﾞｽﾀ
AND= EM50700 #0          ; RB2 ｼﾌﾄﾃﾞｰﾀ
MPS
AND= EM50800 #0          ; 仮置台 ｼﾌﾄﾃﾞｰﾀ
JMP @MR5700
MPP
AND<> EM50800 #0         ; 仮置台 ｼﾌﾄﾃﾞｰﾀ
JMP @MR5606
; 仮置き台から取出動作を行うﾍｯﾄﾞ選択
STG @MR5606
DW #101 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #1 EM1009             ; RB2 数値指定1
CON
DW $0000 EM1010          ; RB2 数値指定2
CON
JMP @MR5607
STG @MR5607
MPS
AND= DM7018 #0           ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
LDA R4300                ; INDEX ﾜｰｸ確認1
CON
ASRA #8
CON
STA EM1010               ; RB2 数値指定2
MRD
AND= DM7018 #1           ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
MOV EM50800 EM1010       ; 仮置台 ｼﾌﾄﾃﾞｰﾀ  RB2 数値指定2
MRD
AND<> EM1010 #0          ; RB2 数値指定2
JMP @MR5608
MPP
LD= DM7018 #0            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
ANB R4308                ; 仮置台 ﾜｰｸ確認1
ANB R4309                ; 仮置台 ﾜｰｸ確認2
ANB R4310                ; 仮置台 ﾜｰｸ確認3
ANB R4311                ; 仮置台 ﾜｰｸ確認4
ANB R4312                ; 仮置台 ﾜｰｸ確認5
ANB R4313                ; 仮置台 ﾜｰｸ確認6
ANB R4314                ; 仮置台 ﾜｰｸ確認7
ANB R4315                ; 仮置台 ﾜｰｸ確認8
LD= DM7018 #1            ; 動作ﾓｰﾄﾞ(0=通常/1=ﾜｰｸ無)
AND= EM50800 #0          ; 仮置台 ｼﾌﾄﾃﾞｰﾀ
ORL
ANL
JMP @MR5700
; 仮置き台からﾜｰｸ取出
STG @MR5608
ANB @MR4500              ; RB2動作指令Sub Start
ANB @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
AND MR3111               ; RB2 仮置台下降IL(ON=起動可能)
SET @MR4500              ; RB2動作指令Sub Start
CON
JMP @MR5609
STG @MR5609
ANB @MR4500              ; RB2動作指令Sub Start
AND @MR4501              ; RB2動作指令Sub End
ANB @MR4502              ; RB2動作指令Sub中
ANB @MR4503              ; RB2動作指令Sub HOLD End
LDA EM50800              ; 仮置台 ｼﾌﾄﾃﾞｰﾀ
CON
STA EM50700              ; RB2 ｼﾌﾄﾃﾞｰﾀ
CON
DW #0 EM50800            ; 仮置台 ｼﾌﾄﾃﾞｰﾀ
CON
RES @MR4501              ; RB2動作指令Sub End
CON
JMP @MR5610
; ﾜｰｸをﾄﾚｲへ収納するﾍｯﾄﾞ/ﾎﾟｼﾞｼｮﾝ選択
; 仮置き台から取出したﾜｰｸをﾄﾚｲへ収納
STG @MR5610
ANB @MR4900              ; RB2 ﾄﾚｲ収納Sub Start
ANB @MR4901              ; RB2 ﾄﾚｲ収納Sub END
ANB @MR4902              ; RB2 ﾄﾚｲ収納Sub中
AND MR3102               ; RB2 ﾜｰｸ収納下降IL(ON=起動可能)
SET @MR4900              ; RB2 ﾄﾚｲ収納Sub Start
CON
JMP @MR5611
STG @MR5611
ANB @MR4900              ; RB2 ﾄﾚｲ収納Sub Start
AND @MR4901              ; RB2 ﾄﾚｲ収納Sub END
ANB @MR4902              ; RB2 ﾄﾚｲ収納Sub中
RES @MR4901              ; RB2 ﾄﾚｲ収納Sub END
CON
DW #0 DM35013            ; 仮置取出ﾜｰｸ数
CON
MPS
LD>= DM35020 DM432       ; RB2 段積みﾄﾚｲ枚数  RB2 段積み最大数設定(1-255)
ANB LR20000              ; ｻﾝﾌﾟﾙ取動作中
LD>= DM35020 DM5038      ; RB2 段積みﾄﾚｲ枚数  _生産ｶｳﾝﾀ10
AND LR20000              ; ｻﾝﾌﾟﾙ取動作中
ORL
ANL
JMP @MR5708
MPP
LD< DM35020 DM432        ; RB2 段積みﾄﾚｲ枚数  RB2 段積み最大数設定(1-255)
ANB LR20000              ; ｻﾝﾌﾟﾙ取動作中
LD< DM35020 DM5038       ; RB2 段積みﾄﾚｲ枚数  _生産ｶｳﾝﾀ10
AND LR20000              ; ｻﾝﾌﾟﾙ取動作中
ORL
ANL
JMP @MR5700
; 段積みﾄﾚｲ搬出
STG @MR5708
AND MR3105               ; RB2 ﾄﾚｲ搬出前IL(ON=起動可能)
SET @MR5300              ; RB2 段積みﾄﾚｲ搬出Sub Start
CON
JMP @MR5709
STG @MR5709
ANB @MR5300              ; RB2 段積みﾄﾚｲ搬出Sub Start
ANB @MR5301              ; RB2 段積みﾄﾚｲ搬出Sub END
AND @MR5302              ; RB2 段積みﾄﾚｲ搬出Sub中
JMP @MR5710
STG @MR5710
ANB @MR5300              ; RB2 段積みﾄﾚｲ搬出Sub Start
AND @MR5301              ; RB2 段積みﾄﾚｲ搬出Sub END
ANB @MR5302              ; RB2 段積みﾄﾚｲ搬出Sub中
SET MR19110              ; ｼｬｯﾀｰ閉要求(RB2->段積)
CON
RES @MR5301              ; RB2 段積みﾄﾚｲ搬出Sub END
CON
JMP @MR5700
; 段積み
STG @MR5700
MPS
LD< DM35020 DM432        ; RB2 段積みﾄﾚｲ枚数  RB2 段積み最大数設定(1-255)
ANB LR20000              ; ｻﾝﾌﾟﾙ取動作中
LD< DM35020 DM5038       ; RB2 段積みﾄﾚｲ枚数  _生産ｶｳﾝﾀ10
AND LR20000              ; ｻﾝﾌﾟﾙ取動作中
ORL
AND MR3102               ; RB2 ﾜｰｸ収納下降IL(ON=起動可能)
AND MR19101              ; ﾄﾚｲ供給完了(段ﾊﾞﾗｼ->RB2)
ANB MR19012              ; ﾄﾚｲ取出中(RB2->段ﾊﾞﾗｼ)
ANB MR19015              ; 位置決め解除要求(RB2->位置決)
ANL
MPS
AND> DM35011 #0          ; RB2 収納完了ﾜｰｸ数
SET @MR3801              ; 段積み最終実ﾄﾚｲ
CON
SET @MR5100              ; RB2 段積みSub Start
CON
JMP @MR5701
MPP
AND= DM35011 #0          ; RB2 収納完了ﾜｰｸ数
RES @MR3801              ; 段積み最終実ﾄﾚｲ
CON
SET @MR5100              ; RB2 段積みSub Start
CON
JMP @MR5701
MPP
LD>= DM35020 DM432       ; RB2 段積みﾄﾚｲ枚数  RB2 段積み最大数設定(1-255)
ANB LR20000              ; ｻﾝﾌﾟﾙ取動作中
LD>= DM35020 DM5038      ; RB2 段積みﾄﾚｲ枚数  _生産ｶｳﾝﾀ10
AND LR20000              ; ｻﾝﾌﾟﾙ取動作中
ORL
ANL
JMP @MR5702
STG @MR5701
ANB @MR5100              ; RB2 段積みSub Start
AND @MR5101              ; RB2 段積みSub END
ANB @MR5102              ; RB2 段積みSub中
MPS
ANB @MR5103              ; RB2 段積みSub HOLD END
DW #0 DM35013            ; 仮置取出ﾜｰｸ数
CON
RES LR20007              ; RB2 仮置台->ﾄﾚｲ収納Sub 補填完了
CON
RES @MR5101              ; RB2 段積みSub END
CON
JMP @MR5702
MPP
AND @MR5103              ; RB2 段積みSub HOLD END
DW #0 DM35013            ; 仮置取出ﾜｰｸ数
CON
RES LR20007              ; RB2 仮置台->ﾄﾚｲ収納Sub 補填完了
CON
RES @MR5101              ; RB2 段積みSub END
CON
RES @MR5103              ; RB2 段積みSub HOLD END
CON
JMP @MR5615
; 段積みﾄﾚｲ搬出
STG @MR5702
AND MR3105               ; RB2 ﾄﾚｲ搬出前IL(ON=起動可能)
SET @MR5300              ; RB2 段積みﾄﾚｲ搬出Sub Start
CON
JMP @MR5703
STG @MR5703
ANB @MR5300              ; RB2 段積みﾄﾚｲ搬出Sub Start
ANB @MR5301              ; RB2 段積みﾄﾚｲ搬出Sub END
AND @MR5302              ; RB2 段積みﾄﾚｲ搬出Sub中
JMP @MR5704
STG @MR5704
ANB @MR5300              ; RB2 段積みﾄﾚｲ搬出Sub Start
AND @MR5301              ; RB2 段積みﾄﾚｲ搬出Sub END
ANB @MR5302              ; RB2 段積みﾄﾚｲ搬出Sub中
SET MR19110              ; ｼｬｯﾀｰ閉要求(RB2->段積)
CON
RES @MR5301              ; RB2 段積みﾄﾚｲ搬出Sub END
CON
JMP @MR5705
STG @MR5705
MPS
LDB R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
ANB R35100               ; RB2 MOVE
ANB R35101               ; RB2 MOVE END
ANB R35102               ; During RB2 MOVE
ANL
DW #130 EM1008           ; RB2 動作ｺﾏﾝﾄﾞ
CON
DW #0 EM1009             ; RB2 数値指定1
CON
DW #0 EM1010             ; RB2 数値指定2
CON
SET R35100               ; RB2 MOVE
CON
JMP @MR5706
MPP
AND R44200               ; _Grp1 ﾎﾟｰｽﾞ要求
SET @MR1900              ; Main1 HALT許可
STG @MR5706
AND R35101               ; RB2 MOVE END
MPS
ANB R35103               ; RB2 Status Alarm
RES R35101               ; RB2 MOVE END
CON
JMP @MR5614
MPP
AND R35103               ; RB2 Status Alarm
RES R35101               ; RB2 MOVE END
CON
RES R35103               ; RB2 Status Alarm
CON
JMP @MR5614
STG @MR5614
MPS
DW #0 DM35015            ; ﾜｰｸ補填回数
CON
DW #0 DM35014            ; 仮置取出完了ﾍｯﾄﾞ(通常補填時)
MPP
JMP @MR5615
STG @MR5615
MPS
AND= DM35011 #0          ; RB2 収納完了ﾜｰｸ数
SET MR301                ; 払出し停止完了_真空ﾎﾟﾝﾌﾟOFF
CON
RES MR300                ; 払出停止HOLD用
CON
RES LR100                ; _割り込みSW1　ON/OFF状態
CON
MCALL HOLD_REQUEST #1
MRD
ANB @MR4503              ; RB2動作指令Sub HOLD End
RES @MR5602              ; RB2 仮置台->ﾄﾚｲ収納Sub中
CON
JMP @MR3008
MPP
AND @MR4503              ; RB2動作指令Sub HOLD End
RES @MR4503              ; RB2動作指令Sub HOLD End
CON
RES @MR5602              ; RB2 仮置台->ﾄﾚｲ収納Sub中
CON
SET @MR5603              ; RB2 仮置台->ﾄﾚｲ収納Sub HOLD END
CON
JMP @MR3008
;<h1/>HALT
LD R44200                ; _Grp1 ﾎﾟｰｽﾞ要求
AND @MR1900              ; Main1 HALT許可
LD @MR1901               ; Main2 HALT許可
ORB @MR4002              ; Main2 Busy
ANL
TMR @2 #2
CON
AND @T2
@SET R42605              ; _Grp1_Task5_ﾎﾟｰｽﾞ許可
LD R42605                ; _Grp1_Task5_ﾎﾟｰｽﾞ許可
ANB @MR001               ; TASK5 ERROR
ORF @MR001               ; TASK5 ERROR
RES @MR1900              ; Main1 HALT許可
CON
RES @MR1901              ; Main2 HALT許可
END
ENDH
