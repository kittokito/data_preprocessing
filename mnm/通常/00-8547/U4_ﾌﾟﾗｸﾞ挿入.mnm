DEVICE:128
;MODULE:U4_ﾌﾟﾗｸﾞ挿入
;MODULE_TYPE:0
;□□　　入力受け　　□□
;関連する入力受け(ｾﾝｻのﾃﾞｨﾚｲﾀｲﾏ等)を必要があれば作成する。
;通常は入力ﾕﾆｯﾄに入力時定数(ﾃﾞｨﾚｲ)があるので直接使用しても問題は無い。
LD CR2003                ; 常時OFF
TMR K101 K3              ; 入力受け1
LD CR2003                ; 常時OFF
TMR K102 K3              ; 入力受け2
LD CR2003                ; 常時OFF
TMR K103 K3              ; 入力受け3
LD CR2003                ; 常時OFF
TMR K104 K3              ; 入力受け4
LD B0271                 ; NU-EP1[4]出力1[2]ﾌﾟﾗｸﾞ吸着ON確認
TMR K113 K3              ; ﾌﾟﾗｸﾞ挿入_ﾌﾟﾗｸﾞ吸着ON確認
LDB B0271                ; NU-EP1[4]出力1[2]ﾌﾟﾗｸﾞ吸着ON確認
TMR K114 K3              ; ﾌﾟﾗｸﾞ挿入_ﾌﾟﾗｸﾞ吸着OFF確認
LD Y1507                 ; ﾌﾟﾗｸﾞ挿入_吸着破壊 ON
TMR K63 K5               ; ﾌﾟﾗｸﾞ挿入_吸着破壊停止
;ﾍﾞﾝﾄﾌﾟﾗｸﾞ圧入ﾛﾎﾞｯﾄ現在値
LD W00.10                ; #01_圧入RB_HEND
AND W00.11               ; #01_圧入RB_PEND
MPS
AND W00.0                ; #01_圧入RB_完了POS_1
OUT D1028.0              ; ﾌﾟﾗｸﾞ圧入 RB完了POS1
MRD
AND W00.1                ; #01_圧入RB_完了POS_2
OUT D1028.1              ; ﾌﾟﾗｸﾞ圧入 RB_完了POS2
MRD
AND W00.2                ; #01_圧入RB_完了POS_4
OUT D1028.2              ; ﾌﾟﾗｸﾞ圧入 RB_完了POS4
MRD
AND W00.3                ; #01_圧入RB_完了POS_8
OUT D1028.3              ; ﾌﾟﾗｸﾞ圧入 RB_完了POS8
MRD
AND W00.4                ; #01_圧入RB_完了POS_16
OUT D1028.4              ; ﾌﾟﾗｸﾞ圧入 RB_完了POS16
MRD
AND W00.5                ; #01_圧入RB_完了POS_32
OUT D1028.5              ; ﾌﾟﾗｸﾞ圧入 RB_完了POS32
MPP
INV
MOV K0 D1028             ; ﾌﾟﾗｸﾞ圧入 RB_完了POS
;<h1/>▽_装置状態・動作条件
;ﾌﾟﾗｸﾞ圧入ロボット(ﾌﾟﾗｸﾞ挿入)
LD= D1028 K1             ; ﾌﾟﾗｸﾞ圧入 RB_完了POS
AND W00.11               ; #01_圧入RB_PEND
OR CR2002                ; 常時ON
AND X2000                ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ1 開
AND X2002                ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ2 開
AND X2005                ; BZ1 位置押え 後退
ANB B0271                ; NU-EP1[4]出力1[2]ﾌﾟﾗｸﾞ吸着ON確認
OUT M2384                ; ﾌﾟﾗｸﾞ挿入原点
LDB B072                 ; ﾌﾟﾗｸﾞ挿入 在荷有異常
ANB B077                 ; ﾌﾟﾗｸﾞ挿入 吸着異常
ANB B078                 ; ﾌﾟﾗｸﾞ挿入 ﾌﾟﾗｸﾞ供給前 在荷有異常
ANB B07A                 ; ﾌﾟﾗｸﾞ挿入_ｸﾗﾝﾌﾟ下降ｼﾘﾝﾀﾞ動作異常
ANB B07B                 ; ﾌﾟﾗｸﾞ挿入_ｸﾗﾝﾌﾟ上昇ｼﾘﾝﾀﾞ動作異常
ANB B07C                 ; ﾌﾟﾗｸﾞ挿入_BZ1押え 前後ｼﾘﾝﾀﾞ異常
ANB B073                 ; ﾌﾟﾗｸﾞ挿入ﾛﾎﾞｯﾄ 異常
ANB B075                 ; 原点復帰_ﾌﾟﾗｸﾞ挿入在荷検知
ANB B070                 ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ閉 異常
ANB B071                 ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ開 異常
ANB B076                 ; 原点復帰_ｸﾗﾝﾌﾟ開 異常
INV
OUT M2385                ; ﾌﾟﾗｸﾞ挿入全異常
LD M2384                 ; ﾌﾟﾗｸﾞ挿入原点
ANB M1600                ; S00 ﾌﾟﾗｸﾞ挿入_ｽﾃｯﾌﾟ開始
OUT M2386                ; ﾌﾟﾗｸﾞ挿入起動条件
LDB M64                  ; 運転準備
OR M65                   ; 即停止異常(緊急停止)
OR M2385                 ; ﾌﾟﾗｸﾞ挿入全異常
OR T15                   ; 強制停止
OUT M2387                ; ﾌﾟﾗｸﾞ挿入起動OFF
;NG排出
;各工程原点復帰条件
;ﾌﾟﾗｸﾞ挿入原点復帰
LD M98                   ; 原点復帰開始
ANB M2403                ; ﾌﾟﾗｸﾞ挿入原点復帰中
OR M2403                 ; ﾌﾟﾗｸﾞ挿入原点復帰中
ANB M2387                ; ﾌﾟﾗｸﾞ挿入起動OFF
ANB M2079                ; STEP79_ﾕﾆｯﾄ1原点復帰完了確認
ANB M66                  ; 主幹異常(ｻｲｸﾙ停止)
OUT M2403                ; ﾌﾟﾗｸﾞ挿入原点復帰中
;各工程自動運転動作条件
LD M83                   ; 各工程起動指令
AND M2386                ; ﾌﾟﾗｸﾞ挿入起動条件
OR M2389                 ; ﾌﾟﾗｸﾞ挿入起動中
ANB M2387                ; ﾌﾟﾗｸﾞ挿入起動OFF
ANB M1679                ; ﾕﾆｯﾄ1動作完了
OUT M2389                ; ﾌﾟﾗｸﾞ挿入起動中
LD M32                   ; 自動ﾓｰﾄﾞ
ANB M2386                ; ﾌﾟﾗｸﾞ挿入起動条件
AND CR2003               ; 常時OFF
OUT M2390                ; ﾌﾟﾗｸﾞ挿入ｽﾀｰﾄ条件不足ﾌﾞｻﾞｰ
LD M80                   ; 自動起動条件
AND M2386                ; ﾌﾟﾗｸﾞ挿入起動条件
ANB M2387                ; ﾌﾟﾗｸﾞ挿入起動OFF
ANB M1679                ; ﾕﾆｯﾄ1動作完了
ANB M2389                ; ﾌﾟﾗｸﾞ挿入起動中
OUT M2391                ; ﾌﾟﾗｸﾞ挿入ｽﾀｰﾄ要求
LDB M1681                ; 圧入NGﾌﾞｻﾞｰ
ANB M2390                ; ﾌﾟﾗｸﾞ挿入ｽﾀｰﾄ条件不足ﾌﾞｻﾞｰ
INV
OUT M2392                ; ﾌﾟﾗｸﾞ挿入警報補助
;■機器準備
LD W00.12                ; #01_圧入RB_SV
OR CR2002                ; 常時ON
OUT M4001                ; ﾌﾟﾗｸﾞ挿入機器準備完了
LD M33                   ; 手動ﾓｰﾄﾞ
AND B0271                ; NU-EP1[4]出力1[2]ﾌﾟﾗｸﾞ吸着ON確認
OUT B079                 ; ﾌﾟﾗｸﾞ挿入 ﾌﾟﾗｸﾞ吸着中
LD M1600                 ; S00 ﾌﾟﾗｸﾞ挿入_ｽﾃｯﾌﾟ開始
OR M1604                 ; S04 ﾌﾟﾗｸﾞ挿入_ｶﾊﾞｰｾｯﾄ可
ORB M2389                ; ﾌﾟﾗｸﾞ挿入起動中
ANB M2403                ; ﾌﾟﾗｸﾞ挿入原点復帰中
TMR K310 K10             ; ﾌﾟﾗｸﾞ挿入_払出完了ﾀｲﾏ
LD T310                  ; ﾌﾟﾗｸﾞ挿入_払出完了ﾀｲﾏ
OUT M2900                ; ﾌﾟﾗｸﾞ挿入_払出完了
;□ステップ起動用フラグ
LD M32                   ; 自動ﾓｰﾄﾞ
LD M33                   ; 手動ﾓｰﾄﾞ
AND CR2003               ; 常時OFF
ORL
AND CR2003               ; 常時OFF
OUT M2368                ; ﾕﾆｯﾄ1ｽﾃｯﾌﾟ動作
;<h1/>▽_自動
;運転開始・ステッパ初期化・補助接点へ展開
LD CR2002                ; 常時ON
ZRES M1600 M1679         ; S00 ﾌﾟﾗｸﾞ挿入_ｽﾃｯﾌﾟ開始  ﾕﾆｯﾄ1動作完了
LDB M2389                ; ﾌﾟﾗｸﾞ挿入起動中
MOV K0 D1600             ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
LD M2389                 ; ﾌﾟﾗｸﾞ挿入起動中
MOV D1600 Z1             ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
SET M1600:Z1             ; S00 ﾌﾟﾗｸﾞ挿入_ｽﾃｯﾌﾟ開始
LD M1600                 ; S00 ﾌﾟﾗｸﾞ挿入_ｽﾃｯﾌﾟ開始
MPS
LD T114                  ; ﾌﾟﾗｸﾞ挿入_ﾌﾟﾗｸﾞ吸着OFF確認
ANB M190                 ; 一時停止
AND M1184                ; ｶﾊﾞｰ検知　ﾌﾟﾗｸﾞ供給要求
ANL
@INC D1600               ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
MPP
AND T113                 ; ﾌﾟﾗｸﾞ挿入_ﾌﾟﾗｸﾞ吸着ON確認
TMR K224 K30             ; ﾌﾟﾗｸﾞ挿入 ﾌﾟﾗｸﾞ在荷有異常
LD M1601                 ; S01 ﾌﾟﾗｸﾞ挿入_ﾌﾟﾗｸﾞ供給要求
MPS
LD M1512                 ; S12_ﾌﾟﾗｸﾞ搬送_供給完了
ANB M210                 ; ﾌﾟﾗｸﾞ挿入無ﾓｰﾄﾞ
ANL
@INC D1600               ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
MPP
AND M210                 ; ﾌﾟﾗｸﾞ挿入無ﾓｰﾄﾞ
@MOV K4 D1600            ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
LD M1602                 ; S02 供給完了確認
ANB M1512                ; S12_ﾌﾟﾗｸﾞ搬送_供給完了
@INC D1600               ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
LD M1603                 ; S03 ﾌﾟﾗｸﾞ挿入_ﾌﾟﾗｸﾞ吸着確認
MPS
AND T113                 ; ﾌﾟﾗｸﾞ挿入_ﾌﾟﾗｸﾞ吸着ON確認
@INC D1600               ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
MPP
AND T114                 ; ﾌﾟﾗｸﾞ挿入_ﾌﾟﾗｸﾞ吸着OFF確認
TMR K220 K30             ; ﾌﾟﾗｸﾞ挿入 吸着異常
;ｶﾊﾞｰｸﾗﾝﾌﾟ
LD M1604                 ; S04 ﾌﾟﾗｸﾞ挿入_ｶﾊﾞｰｾｯﾄ可
ANB M190                 ; 一時停止
MPS
LDB M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
AND M1255                ; S055_ｶﾊﾞｰｾｯﾄ完了
ANB M8                   ; ｵﾌﾗｲﾝ状態
ANL
@INC D1600               ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
@MOV K2 D1024            ; ﾌﾟﾗｸﾞ圧入  RB_POS確定
MPP
AND M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
MOV K78 D1600            ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
LD M1605                 ; S05 Nop
MPS
ANB M210                 ; ﾌﾟﾗｸﾞ挿入無ﾓｰﾄﾞ
@INC D1600               ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
MPP
AND M210                 ; ﾌﾟﾗｸﾞ挿入無ﾓｰﾄﾞ
@MOV K20 D1600           ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
LD M1606                 ; S06 Nop
@INC D1600               ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
LD M1607                 ; S07 ｸﾗﾝﾌﾟ閉_圧入開始位置上昇指令
ANB W00.11               ; #01_圧入RB_PEND
AND R25008               ; ｸﾗﾝﾌﾟ下降
LD R25010                ; BZ1位置押え 前進
OR= D1250 K7             ; ｶﾊﾞｰ移載RBNO.(CX:7/BZ:5/FG:2)
ANL
@INC D1600               ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
LD M1608                 ; S08 開始位置移動確認
AND W00.11               ; #01_圧入RB_PEND
MPS
AND= D1028 K2            ; ﾌﾟﾗｸﾞ圧入 RB_完了POS
MPS
LD X2001                 ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ1 閉
AND X2003                ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ2 閉
LD X2004                 ; BZ1 位置押え 前進
AND<> D1250 K7           ; ｶﾊﾞｰ移載RBNO.(CX:7/BZ:5/FG:2)
LD X2005                 ; BZ1 位置押え 後退
AND= D1250 K7            ; ｶﾊﾞｰ移載RBNO.(CX:7/BZ:5/FG:2)
ORL
ANL
ANL
@INC D1600               ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
@CAL+ D1250 K10 D1024    ; ｶﾊﾞｰ移載RBNO.(CX:7/BZ:5/FG:2)  ﾌﾟﾗｸﾞ圧入  RB_POS確定
MPP
LDB X2001                ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ1 閉
ORB X2003                ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ2 閉
LDB X2004                ; BZ1 位置押え 前進
AND<> D1250 K7           ; ｶﾊﾞｰ移載RBNO.(CX:7/BZ:5/FG:2)
ORL
LDB X2005                ; BZ1 位置押え 後退
AND= D1250 K7            ; ｶﾊﾞｰ移載RBNO.(CX:7/BZ:5/FG:2)
ORL
ANL
TMR K300 K50             ; ｸﾗﾝﾌﾟ閉  異常確認
MPP
AND<> D1028 K2           ; ﾌﾟﾗｸﾞ圧入 RB_完了POS
@MOV K7 D1600            ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
LD M1609                 ; S09 圧入上昇指令
ANB W00.11               ; #01_圧入RB_PEND
@INC D1600               ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
;	ﾌﾟﾗｸﾞ圧入判定
LD M1610                 ; S10 起動確認
AND T50                  ; RB1_MOVE_OFFﾀｲﾏ
MPS
AND<> D1028 K2           ; ﾌﾟﾗｸﾞ圧入 RB_完了POS
MPS
AND W00.11               ; #01_圧入RB_PEND
@MOV K20 D1600           ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
MPP
ANB W00.11               ; #01_圧入RB_PEND
@INC D1600               ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
MPP
AND= D1028 K2            ; ﾌﾟﾗｸﾞ圧入 RB_完了POS
MPS
AND W00.11               ; #01_圧入RB_PEND
@MOV K9 D1600            ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
MPP
ANB W00.11               ; #01_圧入RB_PEND
@INC D1600               ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
LDB W00.6                ; #01_圧入RB_MOVE
TMR K50 K10              ; RB1_MOVE_OFFﾀｲﾏ
;<h1/>____▼ﾌﾟﾗｸﾞ圧入OK/NG処理
;NG判定
LD M1611                 ; S11 ﾌﾟﾗｸﾞ挿入_圧入失敗
MPS
@INC D104                ; NGﾜｰｸ数 Total
CON
@INC D105                ; NGﾜｰｸ数 ASSY側要求枚数照合用
CON
@MOV K24 D1600           ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
MPP
@MOV K1 D1024            ; ﾌﾟﾗｸﾞ圧入  RB_POS確定
;OK判定
LD M1620                 ; S20 ﾌﾟﾗｸﾞ挿入_OK判定
@INC D1600               ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
LD M1621                 ; S21 
@INC D1600               ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
LD M1622                 ; S22 
@INC D1600               ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
;	圧入下降
LD M1623                 ; S23 ﾌﾟﾗｸﾞ挿入吸着OFF
MPS
ANB Y1506                ; ﾌﾟﾗｸﾞ挿入_吸着 ON
TMH K151 K25             ; 真空ﾎﾟﾝﾌﾟoffｳｪｲﾄ
MPP
AND T151                 ; 真空ﾎﾟﾝﾌﾟoffｳｪｲﾄ
MPS
@INC D102                ; OKﾜｰｸ数
CON
@INC D1600               ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
MPP
@MOV K1 D1024            ; ﾌﾟﾗｸﾞ圧入  RB_POS確定
;ﾌﾟﾗｸﾞ挿入戻、ｸﾗﾝﾌﾟ開
LD M1624                 ; S24 圧入戻､ｸﾗﾝﾌﾟ開指令
LD T192                  ; ﾌﾟﾗｸﾞ圧入 RB_POS確定ﾃﾞｨﾚｲ吸着OFF
OR CR2002                ; 常時ON
ANL
ANB W00.11               ; #01_圧入RB_PEND
AND R25009               ; ｸﾗﾝﾌﾟ上昇
AND R25011               ; BZ1位置押え 後退
@INC D1600               ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
LD M1625                 ; S25 起動確認
AND W00.11               ; #01_圧入RB_PEND
MPS
AND= D1028 K1            ; ﾌﾟﾗｸﾞ圧入 RB_完了POS
MPS
LD X2000                 ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ1 開
AND X2002                ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ2 開
AND X2005                ; BZ1 位置押え 後退
ANL
@MOV K41 D1600           ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
MPP
LDB X2000                ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ1 開
ORB X2002                ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ2 開
ORB X2005                ; BZ1 位置押え 後退
ANL
TMR K301 K50             ; ｸﾗﾝﾌﾟ開 異常確認
MPP
AND<> D1028 K1           ; ﾌﾟﾗｸﾞ圧入 RB_完了POS
@MOV K24 D1600           ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
;<h1/>____▼取出確認(終了処理)
LD M1641                 ; S41 Nop
@INC D1600               ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
LD M1642                 ; S42 ﾌﾟﾗｸﾞ挿入_判断結果
ANB M190                 ; 一時停止
MPS
AND M1684                ; S26 ﾌﾟﾗｸﾞ挿入_OK判定済
@INC D1600               ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
MPP
AND M1685                ; S32 ﾌﾟﾗｸﾞ挿入_NG判定済
MOV K50 D1600            ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
LD M1643                 ; S43ﾌﾟﾗｸﾞ挿入　正常完了
ANB M190                 ; 一時停止
AND M1260                ; S060_ｶﾊﾞｰ移載ﾌﾟﾗｸﾞ挿入作業要求_O
MOV K0 D1600             ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
;ｻｲｸﾙ停止処理
LD M70                   ; 自動起動停止指令(ｻｲｸﾙ停止)
LD M1600                 ; S00 ﾌﾟﾗｸﾞ挿入_ｽﾃｯﾌﾟ開始
LD M66                   ; 主幹異常(ｻｲｸﾙ停止)
LD M1601                 ; S01 ﾌﾟﾗｸﾞ挿入_ﾌﾟﾗｸﾞ供給要求
OR M1650                 ; ﾌﾟﾗｸﾞ挿入　異常完了
ANL
ORL
ANL
MOV K78 D1600            ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
;ｻｲｸﾙ終了
LD M1678                 ; ｻｲｸﾙ停止終了
MOV K79 D1600            ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
;<h1/>ﾌﾟﾗｸﾞ挿入_一時停止
LD M1674                 ; ﾌﾟﾗｸﾞ挿入_一時停止
@INC D1600               ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
LD M1675                 ; ﾌﾟﾗｸﾞ挿入_一時停止中
ANB M190                 ; 一時停止
@INC D1600               ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
LD M1676                 ; ﾌﾟﾗｸﾞ挿入_一時停止復帰
MOV K4 D1600             ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
;OK/NG  判別
LD M1620                 ; S20 ﾌﾟﾗｸﾞ挿入_OK判定
OR M1684                 ; S26 ﾌﾟﾗｸﾞ挿入_OK判定済
AND M2389                ; ﾌﾟﾗｸﾞ挿入起動中
ANB M1610                ; S10 起動確認
ANB M1679                ; ﾕﾆｯﾄ1動作完了
OUT M1684                ; S26 ﾌﾟﾗｸﾞ挿入_OK判定済
LD M1611                 ; S11 ﾌﾟﾗｸﾞ挿入_圧入失敗
OR M1685                 ; S32 ﾌﾟﾗｸﾞ挿入_NG判定済
AND M2389                ; ﾌﾟﾗｸﾞ挿入起動中
ANB M1610                ; S10 起動確認
ANB M1679                ; ﾕﾆｯﾄ1動作完了
OUT M1685                ; S32 ﾌﾟﾗｸﾞ挿入_NG判定済
;ﾌﾟﾗｸﾞ圧入NG処理
LD M1650                 ; ﾌﾟﾗｸﾞ挿入　異常完了
LD M1282                 ; S082_待機位置到着完了
OR M1354                 ; S154_待機位置到着確認
ANL
@INC D1600               ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
LD M1651                 ; ﾌﾟﾗｸﾞ在荷確認
MPS
AND T113                 ; ﾌﾟﾗｸﾞ挿入_ﾌﾟﾗｸﾞ吸着ON確認
OUT B162B                ; ﾌﾟﾗｸﾞ挿入 在荷有異常
MPP
AND T114                 ; ﾌﾟﾗｸﾞ挿入_ﾌﾟﾗｸﾞ吸着OFF確認
MOV K0 D1600             ; ﾌﾟﾗｸﾞ挿入_自動運転ｽﾃｯﾌﾟ
LDB M1600                ; S00 ﾌﾟﾗｸﾞ挿入_ｽﾃｯﾌﾟ開始
ANB M1601                ; S01 ﾌﾟﾗｸﾞ挿入_ﾌﾟﾗｸﾞ供給要求
ANB M1604                ; S04 ﾌﾟﾗｸﾞ挿入_ｶﾊﾞｰｾｯﾄ可
ANB M1642                ; S42 ﾌﾟﾗｸﾞ挿入_判断結果
ANB M1643                ; S43ﾌﾟﾗｸﾞ挿入　正常完了
INV
AND M190                 ; 一時停止
OUT M3005                ; ﾌﾟﾗｸﾞ挿入一時停止中
LD M1600                 ; S00 ﾌﾟﾗｸﾞ挿入_ｽﾃｯﾌﾟ開始
OR M1686                 ; ﾌﾟﾗｸﾞ挿入吸着ﾌﾗｸﾞ
ANB M1678                ; ｻｲｸﾙ停止終了
ANB M2403                ; ﾌﾟﾗｸﾞ挿入原点復帰中
ANB Y1507                ; ﾌﾟﾗｸﾞ挿入_吸着破壊 ON
OUT M1686                ; ﾌﾟﾗｸﾞ挿入吸着ﾌﾗｸﾞ
;<h1/>＿▼下流ｺﾝﾍﾞｱ
LD CR2002                ; 常時ON
ZRES M1700 M1720         ; 下流ｺﾝﾍﾞｱｽﾃｯﾌﾟ開始
LDB M2389                ; ﾌﾟﾗｸﾞ挿入起動中
MOV K0 D1700
LD M2389                 ; ﾌﾟﾗｸﾞ挿入起動中
MOV D1700 Z1
SET M1700:Z1             ; 下流ｺﾝﾍﾞｱｽﾃｯﾌﾟ開始
;<h1/>▽_原点復帰
;運転開始・ステッパ初期化・補助接点へ展開
;<h1/>＿＿ﾌﾟﾗｸﾞ挿入原点復帰
LD CR2002                ; 常時ON
ZRES M2060 M2079         ; ﾌﾟﾗｸﾞ挿入原点復帰開始  STEP79_ﾕﾆｯﾄ1原点復帰完了確認
LDB M2403                ; ﾌﾟﾗｸﾞ挿入原点復帰中
MOV K0 D2060             ; ﾌﾟﾗｸﾞ挿入原点復帰ｽﾃｯﾌﾟ
LD M2403                 ; ﾌﾟﾗｸﾞ挿入原点復帰中
MOV D2060 Z1             ; ﾌﾟﾗｸﾞ挿入原点復帰ｽﾃｯﾌﾟ
SET M2060:Z1             ; ﾌﾟﾗｸﾞ挿入原点復帰開始
;原点復帰ｻｲｸﾙ監視
LD M2403                 ; ﾌﾟﾗｸﾞ挿入原点復帰中
TMR K363 K200            ; ﾌﾟﾗｸﾞ挿入原点復帰ﾀｲﾑｱｱｳﾄ
;原点復帰ｽﾃｯﾌﾟ開始
LD M2060                 ; ﾌﾟﾗｸﾞ挿入原点復帰開始
@INC D2060               ; ﾌﾟﾗｸﾞ挿入原点復帰ｽﾃｯﾌﾟ
LD M2061                 ; STEP1_ｼｬｯﾀｰ開閉 RB_原点復帰指令
@INC D2060               ; ﾌﾟﾗｸﾞ挿入原点復帰ｽﾃｯﾌﾟ
LD M2062                 ; STEP2_起動確認
@INC D2060               ; ﾌﾟﾗｸﾞ挿入原点復帰ｽﾃｯﾌﾟ
LD M2063                 ; STEP3_位置決完了確認
@INC D2060               ; ﾌﾟﾗｸﾞ挿入原点復帰ｽﾃｯﾌﾟ
@MOV K0 D1024            ; ﾌﾟﾗｸﾞ圧入  RB_POS確定
LD M2064                 ; STEP4_ﾌﾟﾗｸﾞ圧入 RB_原点復帰指令
LD M2336                 ; ﾌﾟﾗｸﾞ圧入 RB_原点完了
OR M2340                 ; ﾌﾟﾗｸﾞ圧入 RB_原点復帰完了
ANL
ANB W00.11               ; #01_圧入RB_PEND
@INC D2060               ; ﾌﾟﾗｸﾞ挿入原点復帰ｽﾃｯﾌﾟ
LD M2065                 ; STEP5_起動確認
ANB W00.6                ; #01_圧入RB_MOVE
AND W00.11               ; #01_圧入RB_PEND
MPS
AND= D1028 K0            ; ﾌﾟﾗｸﾞ圧入 RB_完了POS
@INC D2060               ; ﾌﾟﾗｸﾞ挿入原点復帰ｽﾃｯﾌﾟ
MPP
AND<> D1028 K0           ; ﾌﾟﾗｸﾞ圧入 RB_完了POS
MOV K4 D2060             ; ﾌﾟﾗｸﾞ挿入原点復帰ｽﾃｯﾌﾟ
LD M2066                 ; STEP6_下降位置移動
@INC D2060               ; ﾌﾟﾗｸﾞ挿入原点復帰ｽﾃｯﾌﾟ
@MOV K1 D1024            ; ﾌﾟﾗｸﾞ圧入  RB_POS確定
LD M2067                 ; STEP7_下降位置移動指令
ANB W00.11               ; #01_圧入RB_PEND
@INC D2060               ; ﾌﾟﾗｸﾞ挿入原点復帰ｽﾃｯﾌﾟ
LD M2068                 ; STEP8 下降位置移動確認
ANB W00.6                ; #01_圧入RB_MOVE
AND W00.11               ; #01_圧入RB_PEND
MPS
AND= D1028 K1            ; ﾌﾟﾗｸﾞ圧入 RB_完了POS
@INC D2060               ; ﾌﾟﾗｸﾞ挿入原点復帰ｽﾃｯﾌﾟ
MPP
AND<> D1028 K1           ; ﾌﾟﾗｸﾞ圧入 RB_完了POS
MOV K6 D2060             ; ﾌﾟﾗｸﾞ挿入原点復帰ｽﾃｯﾌﾟ
LD M2069                 ; STEP9 原点確認
AND M2403                ; ﾌﾟﾗｸﾞ挿入原点復帰中
@INC D2060               ; ﾌﾟﾗｸﾞ挿入原点復帰ｽﾃｯﾌﾟ
LD M2070                 ; ﾌﾟﾗｸﾞ挿入吸着確認
MPS
AND T113                 ; ﾌﾟﾗｸﾞ挿入_ﾌﾟﾗｸﾞ吸着ON確認
OUT B162A                ; 原点復帰_ﾌﾟﾗｸﾞ在荷検知
MPP
AND T114                 ; ﾌﾟﾗｸﾞ挿入_ﾌﾟﾗｸﾞ吸着OFF確認
@INC D2060               ; ﾌﾟﾗｸﾞ挿入原点復帰ｽﾃｯﾌﾟ
LD M2071                 ; ｸﾗﾝﾌﾟ開指令_原点復帰
AND R25009               ; ｸﾗﾝﾌﾟ上昇
@INC D2060               ; ﾌﾟﾗｸﾞ挿入原点復帰ｽﾃｯﾌﾟ
LD M2072                 ; ｸﾗﾝﾌﾟ開確認
MPS
LD X2000                 ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ1 開
AND X2002                ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ2 開
ANL
@INC D2060               ; ﾌﾟﾗｸﾞ挿入原点復帰ｽﾃｯﾌﾟ
MPP
LDB X2000                ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ1 開
ORB X2002                ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ2 開
ANL
TMR K262 K50             ; 原点復帰_ｸﾗﾝﾌﾟ開 異常
LD M2073                 ; BZ1位置押え後退確認
AND X2005                ; BZ1 位置押え 後退
@INC D2060               ; ﾌﾟﾗｸﾞ挿入原点復帰ｽﾃｯﾌﾟ
;原点復帰ｻｲｸﾙ終了
LD M2074                 ; ﾌﾟﾗｸﾞ搬送原点復帰確認
AND M2384                ; ﾌﾟﾗｸﾞ挿入原点
@INC D2060               ; ﾌﾟﾗｸﾞ挿入原点復帰ｽﾃｯﾌﾟ
LD M2075                 ; ﾌﾟﾗｸﾞ挿入 STEP10 原点復帰終了
ANB M98                  ; 原点復帰開始
MOV K19 D2060            ; ﾌﾟﾗｸﾞ挿入原点復帰ｽﾃｯﾌﾟ
LD M66                   ; 主幹異常(ｻｲｸﾙ停止)
MOV K19 D2060            ; ﾌﾟﾗｸﾞ挿入原点復帰ｽﾃｯﾌﾟ
;<h1/>▽_手動
LD M33                   ; 手動ﾓｰﾄﾞ
AND M34                  ; ﾒｲﾝ手動操作可能条件
ANB M2389                ; ﾌﾟﾗｸﾞ挿入起動中
ANB M2403                ; ﾌﾟﾗｸﾞ挿入原点復帰中
MC
;吸着ON_OFF
LD W00.10                ; #01_圧入RB_HEND
OUT M2750                ; ﾌﾟﾗｸﾞ挿入_吸着ON可
LDP M459                 ; VT ｸﾞﾛｰﾊﾞﾙﾌｧﾝｸｼｮﾝSW
AND B194E                ; ﾌﾟﾗｸﾞ挿入_吸着ON　SW
AND M2750                ; ﾌﾟﾗｸﾞ挿入_吸着ON可
OR M2751                 ; ﾌﾟﾗｸﾞ挿入吸着ON
ANPB M2753               ; 日常点検_ﾌﾟﾗｸﾞ挿入_吸着OFF
OUT M2751                ; ﾌﾟﾗｸﾞ挿入吸着ON
LD W00.10                ; #01_圧入RB_HEND
OUT M2752                ; ﾌﾟﾗｸﾞ挿入_吸着OFF可
LDP M459                 ; VT ｸﾞﾛｰﾊﾞﾙﾌｧﾝｸｼｮﾝSW
AND B194F                ; ﾌﾟﾗｸﾞ挿入_吸着OFF SW
AND M2752                ; ﾌﾟﾗｸﾞ挿入_吸着OFF可
LD M2753                 ; 日常点検_ﾌﾟﾗｸﾞ挿入_吸着OFF
AND T63                  ; ﾌﾟﾗｸﾞ挿入_吸着破壊停止
ORL
ANPB M2751               ; ﾌﾟﾗｸﾞ挿入吸着ON
OUT M2753                ; 日常点検_ﾌﾟﾗｸﾞ挿入_吸着OFF
;ﾌﾟﾗｸﾞ挿入_ｸﾗﾝﾌﾟ上昇
LD CR2002                ; 常時ON
AND X100D                ; ﾌﾟﾗｸﾞ搬送 ｼﾘﾝﾀﾞ後退端
ANB B052D                ; ｶﾊﾞｰ移載RB自動運転中(55)
AND<= D1028 K2           ; ﾌﾟﾗｸﾞ圧入 RB_完了POS
AND= D1026 D1028         ; ﾌﾟﾗｸﾞ圧入 RB_指令POS  ﾌﾟﾗｸﾞ圧入 RB_完了POS
OUT M2754                ; ﾌﾟﾗｸﾞ挿入_ｸﾗﾝﾌﾟ上昇可
LDP M459                 ; VT ｸﾞﾛｰﾊﾞﾙﾌｧﾝｸｼｮﾝSW
AND B1948                ; ﾌﾟﾗｸﾞ挿入_ｸﾗﾝﾌﾟ上昇 SW
AND M2754                ; ﾌﾟﾗｸﾞ挿入_ｸﾗﾝﾌﾟ上昇可
OR M2755                 ; ﾌﾟﾗｸﾞ挿入_ｸﾗﾝﾌﾟ上昇
ANPB M2761               ; ﾌﾟﾗｸﾞ挿入_ｸﾗﾝﾌﾟ下降
OUT M2755                ; ﾌﾟﾗｸﾞ挿入_ｸﾗﾝﾌﾟ上昇
LD M2755                 ; ﾌﾟﾗｸﾞ挿入_ｸﾗﾝﾌﾟ上昇
AND X2000                ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ1 開
AND X2002                ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ2 開
OUT M2757                ; ﾌﾟﾗｸﾞ挿入_ｸﾗﾝﾌﾟ上昇中
;ﾌﾟﾗｸﾞ挿入_ｸﾗﾝﾌﾟ下降
LD CR2002                ; 常時ON
ANB B052D                ; ｶﾊﾞｰ移載RB自動運転中(55)
OUT M2760                ; ﾌﾟﾗｸﾞ挿入_ｸﾗﾝﾌﾟ下降可
LDP M459                 ; VT ｸﾞﾛｰﾊﾞﾙﾌｧﾝｸｼｮﾝSW
AND B1949                ; ﾌﾟﾗｸﾞ挿入_ｸﾗﾝﾌﾟ下降 SW
AND M2760                ; ﾌﾟﾗｸﾞ挿入_ｸﾗﾝﾌﾟ下降可
OR M2761                 ; ﾌﾟﾗｸﾞ挿入_ｸﾗﾝﾌﾟ下降
ANPB M2755               ; ﾌﾟﾗｸﾞ挿入_ｸﾗﾝﾌﾟ上昇
OUT M2761                ; ﾌﾟﾗｸﾞ挿入_ｸﾗﾝﾌﾟ下降
LD M2761                 ; ﾌﾟﾗｸﾞ挿入_ｸﾗﾝﾌﾟ下降
AND X2001                ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ1 閉
AND X2003                ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ2 閉
OUT M2762                ; ﾌﾟﾗｸﾞ挿入_下降完了
;BZ1押え  前進
LD CR2002                ; 常時ON
ANB B052D                ; ｶﾊﾞｰ移載RB自動運転中(55)
OUT M2765                ; ﾌﾟﾗｸﾞ挿入_BZ1押えｼﾘﾝﾀﾞ前進可
LDP M459                 ; VT ｸﾞﾛｰﾊﾞﾙﾌｧﾝｸｼｮﾝSW
AND B194B                ; ﾌﾟﾗｸﾞ挿入_BZ1押え前進 SW
AND M2765                ; ﾌﾟﾗｸﾞ挿入_BZ1押えｼﾘﾝﾀﾞ前進可
OR M2766                 ; ﾌﾟﾗｸﾞ挿入_BZ1押えｼﾘﾝﾀﾞ前進
ANPB M2772               ; ﾌﾟﾗｸﾞ挿入_BZ1押え後退完了
OUT M2766                ; ﾌﾟﾗｸﾞ挿入_BZ1押えｼﾘﾝﾀﾞ前進
LD M2766                 ; ﾌﾟﾗｸﾞ挿入_BZ1押えｼﾘﾝﾀﾞ前進
AND X2004                ; BZ1 位置押え 前進
OUT M2767                ; ﾌﾟﾗｸﾞ挿入_BZ1押え前進完了
;BZ1押え  後退
LD CR2002                ; 常時ON
ANB B052D                ; ｶﾊﾞｰ移載RB自動運転中(55)
OUT M2770                ; ﾌﾟﾗｸﾞ挿入_BZ1押えｼﾘﾝﾀﾞ後退可
LDP M459                 ; VT ｸﾞﾛｰﾊﾞﾙﾌｧﾝｸｼｮﾝSW
AND B194A                ; ﾌﾟﾗｸﾞ挿入_BZ1押え後退 SW
AND M2770                ; ﾌﾟﾗｸﾞ挿入_BZ1押えｼﾘﾝﾀﾞ後退可
OR M2771                 ; ﾌﾟﾗｸﾞ挿入_BZ1押えｼﾘﾝﾀﾞ後退
ANPB M2766               ; ﾌﾟﾗｸﾞ挿入_BZ1押えｼﾘﾝﾀﾞ前進
OUT M2771                ; ﾌﾟﾗｸﾞ挿入_BZ1押えｼﾘﾝﾀﾞ後退
LD M2771                 ; ﾌﾟﾗｸﾞ挿入_BZ1押えｼﾘﾝﾀﾞ後退
AND X2005                ; BZ1 位置押え 後退
OUT M2772                ; ﾌﾟﾗｸﾞ挿入_BZ1押え後退完了
;圧入ﾛﾎﾞｯﾄ上昇
LD W00.10                ; #01_圧入RB_HEND
AND<> D1028 K2           ; ﾌﾟﾗｸﾞ圧入 RB_完了POS
ANB M2081                ; ﾍﾞﾝﾄ圧入   RB_上昇
ANB M2086                ; ﾍﾞﾝﾄ圧入   RB_圧入
ANB M2091                ; ﾍﾞﾝﾄ圧入   RB_下降
ANB M2816                ; 手動_ﾌﾟﾗｸﾞ搬送_ｼﾘﾝﾀﾞ前進
AND X100D                ; ﾌﾟﾗｸﾞ搬送 ｼﾘﾝﾀﾞ後退端
OUT M2080                ; ﾍﾞﾝﾄ圧入   RB_上昇可
LDP M459                 ; VT ｸﾞﾛｰﾊﾞﾙﾌｧﾝｸｼｮﾝSW
AND B1940                ; 圧入ﾛﾎﾞｯﾄ上昇SW
AND M2080                ; ﾍﾞﾝﾄ圧入   RB_上昇可
OR M2081                 ; ﾍﾞﾝﾄ圧入   RB_上昇
ANB M2084                ; 位置決完了確認
MPS
OUT M2081                ; ﾍﾞﾝﾄ圧入   RB_上昇
MPP
ANB M2083                ; 起動確認
OUT M2082                ; ﾍﾞﾝﾄ圧入   RB_上昇指令
@MOV K2 D1024            ; ﾌﾟﾗｸﾞ圧入  RB_POS確定
LD M2082                 ; ﾍﾞﾝﾄ圧入   RB_上昇指令
AND W010.13              ; #01_圧入RB_CSTR
LD T192                  ; ﾌﾟﾗｸﾞ圧入 RB_POS確定ﾃﾞｨﾚｲ吸着OFF
OR CR2002                ; 常時ON
ANL
ANB W00.11               ; #01_圧入RB_PEND
OR M2083                 ; 起動確認
AND M2081                ; ﾍﾞﾝﾄ圧入   RB_上昇
OUT M2083                ; 起動確認
LD M2083                 ; 起動確認
ANB W00.6                ; #01_圧入RB_MOVE
AND W00.11               ; #01_圧入RB_PEND
OR M2084                 ; 位置決完了確認
AND M2081                ; ﾍﾞﾝﾄ圧入   RB_上昇
OUT M2084                ; 位置決完了確認
LD M2081                 ; ﾍﾞﾝﾄ圧入   RB_上昇
OR= D1028 K2             ; ﾌﾟﾗｸﾞ圧入 RB_完了POS
OUT B1B40                ; 圧入ﾛﾎﾞｯﾄ上昇PL
;圧入ﾛﾎﾞｯﾄ圧入上昇
LD= D1028 K2             ; ﾌﾟﾗｸﾞ圧入 RB_完了POS
AND W00.10               ; #01_圧入RB_HEND
ANB M2081                ; ﾍﾞﾝﾄ圧入   RB_上昇
ANB M2086                ; ﾍﾞﾝﾄ圧入   RB_圧入
ANB M2091                ; ﾍﾞﾝﾄ圧入   RB_下降
AND X100D                ; ﾌﾟﾗｸﾞ搬送 ｼﾘﾝﾀﾞ後退端
OUT M2085                ; ﾍﾞﾝﾄ圧入   RB_圧入可
LD M459                  ; VT ｸﾞﾛｰﾊﾞﾙﾌｧﾝｸｼｮﾝSW
AND B1941                ; 圧入ﾛﾎﾞｯﾄ圧入圧入SW
AND M2085                ; ﾍﾞﾝﾄ圧入   RB_圧入可
OR M2086                 ; ﾍﾞﾝﾄ圧入   RB_圧入
ANB M2089                ; 位置決完了確認
MPS
OUT M2086                ; ﾍﾞﾝﾄ圧入   RB_圧入
MPP
ANB M2088                ; 起動確認
OUT M2087                ; ﾍﾞﾝﾄ圧入   RB_圧入指令
@CAL+ D2005 K10 D1040    ; 手動RB品種切替 7=CX1 5=BZ1/FG  手動押し込み位置指定
@MOV D1040 D1024         ; 手動押し込み位置指定  ﾌﾟﾗｸﾞ圧入  RB_POS確定
LD M2087                 ; ﾍﾞﾝﾄ圧入   RB_圧入指令
AND W010.13              ; #01_圧入RB_CSTR
ANB W00.11               ; #01_圧入RB_PEND
OR M2088                 ; 起動確認
AND M2086                ; ﾍﾞﾝﾄ圧入   RB_圧入
OUT M2088                ; 起動確認
LD M2088                 ; 起動確認
ANB W00.6                ; #01_圧入RB_MOVE
OR M2089                 ; 位置決完了確認
AND M2086                ; ﾍﾞﾝﾄ圧入   RB_圧入
OUT M2089                ; 位置決完了確認
LD M2086                 ; ﾍﾞﾝﾄ圧入   RB_圧入
LD>= D1028 K11           ; ﾌﾟﾗｸﾞ圧入 RB_完了POS
AND<= D1028 K17          ; ﾌﾟﾗｸﾞ圧入 RB_完了POS
ORL
OUT B1B41                ; 圧入ﾛﾎﾞｯﾄ圧入下降PL
;圧入ﾛﾎﾞｯﾄ下降
LD W00.10                ; #01_圧入RB_HEND
AND<> D1028 K1           ; ﾌﾟﾗｸﾞ圧入 RB_完了POS
ANB M2081                ; ﾍﾞﾝﾄ圧入   RB_上昇
ANB M2086                ; ﾍﾞﾝﾄ圧入   RB_圧入
ANB M2091                ; ﾍﾞﾝﾄ圧入   RB_下降
OUT M2090                ; ﾍﾞﾝﾄ圧入   RB_下降可
LDP M459                 ; VT ｸﾞﾛｰﾊﾞﾙﾌｧﾝｸｼｮﾝSW
AND B1942                ; 圧入ﾛﾎﾞｯﾄ下降SW
AND M2090                ; ﾍﾞﾝﾄ圧入   RB_下降可
OR M2091                 ; ﾍﾞﾝﾄ圧入   RB_下降
ANB M2094                ; 位置決完了確認
MPS
OUT M2091                ; ﾍﾞﾝﾄ圧入   RB_下降
MPP
ANB M2093                ; 起動確認
OUT M2092                ; ﾍﾞﾝﾄ圧入   RB_下降指令
@MOV K1 D1024            ; ﾌﾟﾗｸﾞ圧入  RB_POS確定
LD M2092                 ; ﾍﾞﾝﾄ圧入   RB_下降指令
AND W010.13              ; #01_圧入RB_CSTR
LD T192                  ; ﾌﾟﾗｸﾞ圧入 RB_POS確定ﾃﾞｨﾚｲ吸着OFF
OR CR2002                ; 常時ON
ANL
ANB W00.11               ; #01_圧入RB_PEND
OR M2093                 ; 起動確認
AND M2091                ; ﾍﾞﾝﾄ圧入   RB_下降
OUT M2093                ; 起動確認
LD M2093                 ; 起動確認
ANB W00.6                ; #01_圧入RB_MOVE
AND W00.11               ; #01_圧入RB_PEND
OR M2094                 ; 位置決完了確認
AND M2091                ; ﾍﾞﾝﾄ圧入   RB_下降
OUT M2094                ; 位置決完了確認
LD M2091                 ; ﾍﾞﾝﾄ圧入   RB_下降
OR= D1028 K1             ; ﾌﾟﾗｸﾞ圧入 RB_完了POS
OUT B1B42                ; 圧入ﾛﾎﾞｯﾄ下降PL
LDB M2081                ; ﾍﾞﾝﾄ圧入   RB_上昇
ANB M2086                ; ﾍﾞﾝﾄ圧入   RB_圧入
ANB M2091                ; ﾍﾞﾝﾄ圧入   RB_下降
OUT M2130                ; 手動操作中
MCR
;<h1/>□_出力回路
;<h1/>＿＿▼ﾊﾞﾙﾌﾞ出力回路
LD M1624                 ; S24 圧入戻､ｸﾗﾝﾌﾟ開指令
OR M1940                 ; 日常点検_ｸﾗﾝﾌﾟ開確認
OR M2071                 ; ｸﾗﾝﾌﾟ開指令_原点復帰
OR M2755                 ; ﾌﾟﾗｸﾞ挿入_ｸﾗﾝﾌﾟ上昇
LD R25009                ; ｸﾗﾝﾌﾟ上昇
ANB R25008               ; ｸﾗﾝﾌﾟ下降
ORL
LD M131                  ; 安全扉正常
OR B1A0A                 ; TP扉無効ﾓｰﾄﾞ
ANL
ANB B052D                ; ｶﾊﾞｰ移載RB自動運転中(55)
OUT R25009               ; ｸﾗﾝﾌﾟ上昇
LD M1607                 ; S07 ｸﾗﾝﾌﾟ閉_圧入開始位置上昇指令
OR M1902                 ; ｸﾗﾝﾌﾟ下降指令_日常点検
OR M2761                 ; ﾌﾟﾗｸﾞ挿入_ｸﾗﾝﾌﾟ下降
LD R25008                ; ｸﾗﾝﾌﾟ下降
ANB R25009               ; ｸﾗﾝﾌﾟ上昇
ORL
LD M131                  ; 安全扉正常
OR B1A0A                 ; TP扉無効ﾓｰﾄﾞ
ANL
ANB B052D                ; ｶﾊﾞｰ移載RB自動運転中(55)
OUT R25008               ; ｸﾗﾝﾌﾟ下降
LD M1607                 ; S07 ｸﾗﾝﾌﾟ閉_圧入開始位置上昇指令
AND<> D1250 K7           ; ｶﾊﾞｰ移載RBNO.(CX:7/BZ:5/FG:2)
ORP M2766                ; ﾌﾟﾗｸﾞ挿入_BZ1押えｼﾘﾝﾀﾞ前進
LD R25010                ; BZ1位置押え 前進
ANB R25011               ; BZ1位置押え 後退
ORL
ANB B052D                ; ｶﾊﾞｰ移載RB自動運転中(55)
OUT R25010               ; BZ1位置押え 前進
LD M1624                 ; S24 圧入戻､ｸﾗﾝﾌﾟ開指令
ORP M2771                ; ﾌﾟﾗｸﾞ挿入_BZ1押えｼﾘﾝﾀﾞ後退
OR M2073                 ; BZ1位置押え後退確認
LD R25011                ; BZ1位置押え 後退
ANB R25010               ; BZ1位置押え 前進
ORL
ANB B052D                ; ｶﾊﾞｰ移載RB自動運転中(55)
OUT R25011               ; BZ1位置押え 後退
;ｶﾊﾞｰ・ﾌﾟﾗｸﾞ吸着真空ポンプ出力
;■真空ポンプ出力
;	RB下降時はポンプOFF
LDB M1623                ; S23 ﾌﾟﾗｸﾞ挿入吸着OFF
ANB M2092                ; ﾍﾞﾝﾄ圧入   RB_下降指令
ANB M2063                ; STEP3_位置決完了確認
INV
LD M2100                 ; 真空ﾎﾟﾝﾌﾟOFF指令
ANB M1684                ; S26 ﾌﾟﾗｸﾞ挿入_OK判定済
ANB M2094                ; 位置決完了確認
ANB M2069                ; STEP9 原点確認
ORL
OUT M2100                ; 真空ﾎﾟﾝﾌﾟOFF指令
LD M64                   ; 運転準備
ANB M65                  ; 即停止異常(緊急停止)
ANB M66                  ; 主幹異常(ｻｲｸﾙ停止)
ANB B1004                ; 冶具動作中(TP)
ANB M1686                ; ﾌﾟﾗｸﾞ挿入吸着ﾌﾗｸﾞ
ANB M1623                ; S23 ﾌﾟﾗｸﾞ挿入吸着OFF
ANB M2751                ; ﾌﾟﾗｸﾞ挿入吸着ON
INV
ANB M2100                ; 真空ﾎﾟﾝﾌﾟOFF指令
ANB Y1507                ; ﾌﾟﾗｸﾞ挿入_吸着破壊 ON
OUT Y1506                ; ﾌﾟﾗｸﾞ挿入_吸着 ON
LD M2753                 ; 日常点検_ﾌﾟﾗｸﾞ挿入_吸着OFF
LDB Y1506                ; ﾌﾟﾗｸﾞ挿入_吸着 ON
AND Y1507                ; ﾌﾟﾗｸﾞ挿入_吸着破壊 ON
ORL
ANB T63                  ; ﾌﾟﾗｸﾞ挿入_吸着破壊停止
OUT Y1507                ; ﾌﾟﾗｸﾞ挿入_吸着破壊 ON
;■プラグ圧入ロボット初期原点動作
LDB M2064                ; STEP4_ﾌﾟﾗｸﾞ圧入 RB_原点復帰指令
INV
MPS
LD W00.10                ; #01_圧入RB_HEND
OR M2336                 ; ﾌﾟﾗｸﾞ圧入 RB_原点完了
ANB M2337                ; ﾌﾟﾗｸﾞ圧入 RB_原点未完了
ANL
OUT M2336                ; ﾌﾟﾗｸﾞ圧入 RB_原点完了
MPP
LDB W00.10               ; #01_圧入RB_HEND
OR M2337                 ; ﾌﾟﾗｸﾞ圧入 RB_原点未完了
ANB M2336                ; ﾌﾟﾗｸﾞ圧入 RB_原点完了
ANL
OUT M2337                ; ﾌﾟﾗｸﾞ圧入 RB_原点未完了
LD M2337                 ; ﾌﾟﾗｸﾞ圧入 RB_原点未完了
MPS
ANB M2339                ; ﾌﾟﾗｸﾞ圧入 RB_原点復帰開始確認
OUT M2338                ; ﾌﾟﾗｸﾞ圧入 RB_原点復帰開始
MRD
LD M2338                 ; ﾌﾟﾗｸﾞ圧入 RB_原点復帰開始
AND W00.6                ; #01_圧入RB_MOVE
OR M2339                 ; ﾌﾟﾗｸﾞ圧入 RB_原点復帰開始確認
ANL
OUT M2339                ; ﾌﾟﾗｸﾞ圧入 RB_原点復帰開始確認
MPP
LD M2339                 ; ﾌﾟﾗｸﾞ圧入 RB_原点復帰開始確認
ANB W00.6                ; #01_圧入RB_MOVE
AND W00.10               ; #01_圧入RB_HEND
AND W00.11               ; #01_圧入RB_PEND
OR M2340                 ; ﾌﾟﾗｸﾞ圧入 RB_原点復帰完了
ANL
OUT M2340                ; ﾌﾟﾗｸﾞ圧入 RB_原点復帰完了
;<h1/>____▼_ﾛﾎﾞｯﾄ動作出力
;<h1/>プラグ挿入
LDB M1607                ; S07 ｸﾗﾝﾌﾟ閉_圧入開始位置上昇指令
ANB M1609                ; S09 圧入上昇指令
ANB M1624                ; S24 圧入戻､ｸﾗﾝﾌﾟ開指令
INV
LDB M2067                ; STEP7_下降位置移動指令
ANB M2336                ; ﾌﾟﾗｸﾞ圧入 RB_原点完了
ANB M2340                ; ﾌﾟﾗｸﾞ圧入 RB_原点復帰完了
ANB M2075                ; ﾌﾟﾗｸﾞ挿入 STEP10 原点復帰終了
INV
ORL
LDB M2082                ; ﾍﾞﾝﾄ圧入   RB_上昇指令
ANB M2087                ; ﾍﾞﾝﾄ圧入   RB_圧入指令
ANB M2092                ; ﾍﾞﾝﾄ圧入   RB_下降指令
INV
ORL
LDB M1904                ; S01 圧入開始位置上昇指令
ANB M1906                ; S03 圧入上昇指令
ANB M1924                ; S24 圧入下降指令
INV
ORL
@MOV D1024 D1026         ; ﾌﾟﾗｸﾞ圧入  RB_POS確定  ﾌﾟﾗｸﾞ圧入 RB_指令POS
MPS
TMH K190 K2              ; ﾌﾟﾗｸﾞ圧入 RB_POS確定ﾃﾞｨﾚｲ
MPP
AND T190                 ; ﾌﾟﾗｸﾞ圧入 RB_POS確定ﾃﾞｨﾚｲ
OUT W010.13              ; #01_圧入RB_CSTR
LD W010.13               ; #01_圧入RB_CSTR
TMH K192 K30             ; ﾌﾟﾗｸﾞ圧入 RB_POS確定ﾃﾞｨﾚｲ吸着OFF
LD CR2002                ; 常時ON
MPS
AND D1026.0              ; ﾌﾟﾗｸﾞ圧入 RB_指令POS1
OUT W010.0               ; #01_圧入RB_指令POS_1
MRD
AND D1026.1              ; ﾌﾟﾗｸﾞ圧入 RB_指令POS2
OUT W010.1               ; #01_圧入RB_指令POS_2
MRD
AND D1026.2              ; ﾌﾟﾗｸﾞ圧入 RB_指令POS4
OUT W010.2               ; #01_圧入RB_指令POS_4
MRD
AND D1026.3              ; ﾌﾟﾗｸﾞ圧入 RB_指令POS8
OUT W010.3               ; #01_圧入RB_指令POS_8
MRD
AND D1026.4              ; ﾌﾟﾗｸﾞ圧入 RB_指令POS16
OUT W010.4               ; #01_圧入RB_指令POS_16
MPP
AND D1026.5              ; ﾌﾟﾗｸﾞ圧入 RB_指令POS32
OUT W010.5               ; #01_圧入RB_指令POS_32
LD M129                  ; 非常停止正常
OUT W010.12              ; #01_圧入RB_*STP
LD M64                   ; 運転準備
OUT W010.15              ; #01_圧入RB_SON
LD M16                   ; ﾘｾｯﾄPB
ANB W00.14               ; #01_圧入RB_*ALM
OUT W010.14              ; #01_圧入RB_RES
LD M2403                 ; ﾌﾟﾗｸﾞ挿入原点復帰中
OUT W010.11              ; #01_圧入RB_HOME
;<h1/>□_ﾊﾟﾈﾙ表示
LD X2000                 ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ1 開
AND X2002                ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ2 開
OUT B1B48                ; ｸﾗﾝﾌﾟ上昇 ON
LD X2001                 ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ1 閉
AND X2003                ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ2 閉
OUT B1B49                ; ｸﾗﾝﾌﾟ下降 ON
LD X2004                 ; BZ1 位置押え 前進
OUT B1B4B                ; BZ1押え前進　ON
LD X2005                 ; BZ1 位置押え 後退
OUT B1B4A                ; BZ1押え後退ON
LD Y1506                 ; ﾌﾟﾗｸﾞ挿入_吸着 ON
OUT B1B4E                ; ﾌﾟﾗｸﾞ挿入_吸着ON
LDB Y1506                ; ﾌﾟﾗｸﾞ挿入_吸着 ON
OUT B1B4F                ; ﾌﾟﾗｸﾞ挿入_吸着破壊ON
LD M1684                 ; S26 ﾌﾟﾗｸﾞ挿入_OK判定済
OUT B1A0E                ; ﾌﾟﾗｸﾞ挿入_判定OK
;NG表示
LDB M1685                ; S32 ﾌﾟﾗｸﾞ挿入_NG判定済
INV
OUT B1A0F                ; ﾌﾟﾗｸﾞ挿入_NG
;画面色
LD B1A0F                 ; ﾌﾟﾗｸﾞ挿入_NG
AND= D0 K10              ; TPｼｽﾃﾑ 表示中ﾍﾟｰｼﾞNO.
@MOV K1 D54              ; 画面色
INV
@MOV K0 D54              ; 画面色
;<h1/>□_ﾕｰｻﾞｰｱﾗｰﾑ表示
LD CR2003                ; 常時OFF
@SET CR3310              ; ﾕｰｻﾞｱﾗｰﾑ10
LD CR2003                ; 常時OFF
@RES CR3310              ; ﾕｰｻﾞｱﾗｰﾑ10
LD CR2003                ; 常時OFF
@SET CR3311              ; ﾕｰｻﾞｱﾗｰﾑ11
LD CR2003                ; 常時OFF
@RES CR3311              ; ﾕｰｻﾞｱﾗｰﾑ11
;<h1/>□_異常検出
;
LD T300                  ; ｸﾗﾝﾌﾟ閉  異常確認
LDB M123                 ; 異常ﾘｾｯﾄ
AND B070                 ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ閉 異常
ORL
OUT B070                 ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ閉 異常
;
LD T301                  ; ｸﾗﾝﾌﾟ開 異常確認
LDB M123                 ; 異常ﾘｾｯﾄ
AND B071                 ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ開 異常
ORL
OUT B071                 ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ開 異常
;
LD B162B                 ; ﾌﾟﾗｸﾞ挿入 在荷有異常
LDB M123                 ; 異常ﾘｾｯﾄ
AND B072                 ; ﾌﾟﾗｸﾞ挿入 在荷有異常
ORL
OUT B072                 ; ﾌﾟﾗｸﾞ挿入 在荷有異常
;＿＿□圧入ﾛﾎﾞｯﾄ異常
LDB W00.14               ; #01_圧入RB_*ALM
AND M64                  ; 運転準備
LDB M123                 ; 異常ﾘｾｯﾄ
AND B073                 ; ﾌﾟﾗｸﾞ挿入ﾛﾎﾞｯﾄ 異常
ORL
OUT B073                 ; ﾌﾟﾗｸﾞ挿入ﾛﾎﾞｯﾄ 異常
;ﾜｰｸ浮き検出異常
LD M80                   ; 自動起動条件
LD X06                   ; 全ﾄﾞｱ閉
LD B1004                 ; 冶具動作中(TP)
ANB X0B                  ; 搬送ｺﾝﾍﾞｱｴﾗｰ
ORL
ANL
LDB M123                 ; 異常ﾘｾｯﾄ
AND B074                 ; (仮)
ORL
AND CR2003               ; 常時OFF
OUT B074                 ; (仮)
;
LD B162A                 ; 原点復帰_ﾌﾟﾗｸﾞ在荷検知
LDB M123                 ; 異常ﾘｾｯﾄ
AND B075                 ; 原点復帰_ﾌﾟﾗｸﾞ挿入在荷検知
ORL
OUT B075                 ; 原点復帰_ﾌﾟﾗｸﾞ挿入在荷検知
;
LD T262                  ; 原点復帰_ｸﾗﾝﾌﾟ開 異常
LDB M123                 ; 異常ﾘｾｯﾄ
AND B076                 ; 原点復帰_ｸﾗﾝﾌﾟ開 異常
ORL
OUT B076                 ; 原点復帰_ｸﾗﾝﾌﾟ開 異常
;
LD T220                  ; ﾌﾟﾗｸﾞ挿入 吸着異常
LDB M123                 ; 異常ﾘｾｯﾄ
AND B077                 ; ﾌﾟﾗｸﾞ挿入 吸着異常
ORL
OUT B077                 ; ﾌﾟﾗｸﾞ挿入 吸着異常
;
LD T224                  ; ﾌﾟﾗｸﾞ挿入 ﾌﾟﾗｸﾞ在荷有異常
OR T263                  ; プラグ挿入_ﾌﾟﾗｸﾞ吸着在荷有
LDB M123                 ; 異常ﾘｾｯﾄ
AND B078                 ; ﾌﾟﾗｸﾞ挿入 ﾌﾟﾗｸﾞ供給前 在荷有異常
ORL
OUT B078                 ; ﾌﾟﾗｸﾞ挿入 ﾌﾟﾗｸﾞ供給前 在荷有異常
;＿＿□ﾌﾟﾗｸﾞ挿入異常出力
LD R25008                ; ｸﾗﾝﾌﾟ下降
LDB X2001                ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ1 閉
ORB X2003                ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ2 閉
ANL
LD X2000                 ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ1 開
AND X2001                ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ1 閉
ORL
LD X2002                 ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ2 開
AND X2003                ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ2 閉
ORL
LDB M123                 ; 異常ﾘｾｯﾄ
AND B07A                 ; ﾌﾟﾗｸﾞ挿入_ｸﾗﾝﾌﾟ下降ｼﾘﾝﾀﾞ動作異常
ORL
MPS
TMR K221 K50             ; ﾌﾟﾗｸﾞ挿入_ｸﾗﾝﾌﾟ下降ｼﾘﾝﾀﾞ動作異常
MPP
AND T221                 ; ﾌﾟﾗｸﾞ挿入_ｸﾗﾝﾌﾟ下降ｼﾘﾝﾀﾞ動作異常
OUT B07A                 ; ﾌﾟﾗｸﾞ挿入_ｸﾗﾝﾌﾟ下降ｼﾘﾝﾀﾞ動作異常
;
LD R25009                ; ｸﾗﾝﾌﾟ上昇
LDB X2000                ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ1 開
ORB X2002                ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ2 開
ANL
LD X2000                 ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ1 開
AND X2001                ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ1 閉
ORL
LD X2002                 ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ2 開
AND X2003                ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ2 閉
ORL
LDB M123                 ; 異常ﾘｾｯﾄ
AND B07B                 ; ﾌﾟﾗｸﾞ挿入_ｸﾗﾝﾌﾟ上昇ｼﾘﾝﾀﾞ動作異常
ORL
MPS
TMR K222 K50             ; ﾌﾟﾗｸﾞ挿入_ｸﾗﾝﾌﾟ上昇ｼﾘﾝﾀﾞ動作異常
MPP
AND T222                 ; ﾌﾟﾗｸﾞ挿入_ｸﾗﾝﾌﾟ上昇ｼﾘﾝﾀﾞ動作異常
OUT B07B                 ; ﾌﾟﾗｸﾞ挿入_ｸﾗﾝﾌﾟ上昇ｼﾘﾝﾀﾞ動作異常
;
LD R25010                ; BZ1位置押え 前進
ANB X2004                ; BZ1 位置押え 前進
LD R25011                ; BZ1位置押え 後退
ANB X2005                ; BZ1 位置押え 後退
ORL
LD X2004                 ; BZ1 位置押え 前進
AND X2005                ; BZ1 位置押え 後退
ORL
LDB M123                 ; 異常ﾘｾｯﾄ
AND B07C                 ; ﾌﾟﾗｸﾞ挿入_BZ1押え 前後ｼﾘﾝﾀﾞ異常
ORL
MPS
TMR K223 K50             ; ﾌﾟﾗｸﾞ挿入_BZ1押え 前後ｼﾘﾝﾀﾞ異常
MPP
AND T223                 ; ﾌﾟﾗｸﾞ挿入_BZ1押え 前後ｼﾘﾝﾀﾞ異常
OUT B07C                 ; ﾌﾟﾗｸﾞ挿入_BZ1押え 前後ｼﾘﾝﾀﾞ異常
;
LD T260                  ; 日常点検 ｸﾗﾝﾌﾟ閉じ異常
LDB M123                 ; 異常ﾘｾｯﾄ
AND B085                 ; 日常点検_ｸﾗﾝﾌﾟ閉 異常
ORL
OUT B085                 ; 日常点検_ｸﾗﾝﾌﾟ閉 異常
;
LD T261                  ; 日常点検_ｸﾗﾝﾌﾟ開 異常確認
LDB M123                 ; 異常ﾘｾｯﾄ
AND B086                 ; 日常点検_ｸﾗﾝﾌﾟ開 異常
ORL
OUT B086                 ; 日常点検_ｸﾗﾝﾌﾟ開 異常
;異常ﾌﾞｻﾞｰまとめ
LD<>.D B070 @D0          ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ閉 異常  BUZZ停止
AND<>.D B070 K0          ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ閉 異常
OUT M2393                ; ﾌﾟﾗｸﾞ挿入異常BZ補助
LD M122                  ; ﾌﾞｻﾞｰ停止
MOV.D B070 @D0           ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ閉 異常  BUZZ停止
LD=.D B070 K0            ; ﾌﾟﾗｸﾞ挿入 ｸﾗﾝﾌﾟ閉 異常
MOV.D K0 @D0             ; BUZZ停止
END
ENDH
