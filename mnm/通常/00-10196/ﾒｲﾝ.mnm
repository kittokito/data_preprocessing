DEVICE:128
;MODULE:ﾒｲﾝ
;MODULE_TYPE:0
;<h1/>初期処理
LD CR2002                ; 常時ON
OUT M0                   ; 常時ON
LD CR2003                ; 常時OFF
OUT M1                   ; 常時OFF
LD CR2008                ; 運転開始時1ｽｷｬﾝON
OUT M2                   ; RUN後1ｽｷｬﾝON
LD CR2006                ; 1sｸﾛｯｸﾊﾟﾙｽ
OUT M3                   ; 1sｸﾛｯｸ
LD CR3905                ; 重度ｴﾗｰ発生中
INV
AND M0                   ; 常時ON
OUT M4                   ; CPU正常
;
LD M0                    ; 常時ON
OR T0                    ; 設備RUN確認PLC
AND CR2007               ; 運転開始時1ｽｷｬﾝOFF
TMR K0 K50               ; 設備RUN確認PLC
@MOV K1 W08              ; TP_切替ﾍﾟｰｼﾞNo.
;<h1/>ﾒｲﾝ入力
LD X1000                 ; 運転準備ON
OUT M10                  ; 運転準備ON
LD X1001                 ; 真空ﾎﾟﾝﾌﾟ過電流検知
OFDL K50 M11             ; 真空ﾎﾟﾝﾌﾟ過電流ﾀｲﾏ
LDB X1002                ; 非常停止PB
OUT M12                  ; 非常停止SW_ON
LD X1003                 ; 元圧確認
TMR K1 K10               ; 元圧確認ﾀｲﾏ
LD X1004                 ; ﾁｬﾝﾊﾞｰ扉 閉確認
OUT M13                  ; ﾁｬﾝﾊﾞｰ扉　閉確認
;
LD X1008                 ; ｼｬｯﾀｰ 上昇端
ANB X1009                ; ｼｬｯﾀｰ 下降端
TMR @1 K5                ; ｼｬｯﾀｰ上昇端
LDB X1008                ; ｼｬｯﾀｰ 上昇端
AND X1009                ; ｼｬｯﾀｰ 下降端
TMR @2 K5                ; ｼｬｯﾀｰ下降端
;
;<h1/>操作盤入力
LD B1000                 ; 運転SW
AND M24                  ; 自動選択中
ANB M32                  ; 異常ﾘｾｯﾄ
AND M50                  ; ｽﾃｯﾌﾟ運転開始条件
OUT M20                  ; 運転入力
LD B1002                 ; ﾘｾｯﾄSW
OUT M22                  ; ﾘｾｯﾄ入力
LD B1003                 ; 原点復帰SW
ANB M32                  ; 異常ﾘｾｯﾄ
ANB M51                  ; 自動中
OUT M23                  ; 原点復帰入力
LDP B1004                ; 自動選択SW
OR M2                    ; RUN後1ｽｷｬﾝON
OR M24                   ; 自動選択中
ANPB M25                 ; 手動選択中
OUT M24                  ; 自動選択中
LDP B1005                ; 手動選択SW
OR M25                   ; 手動選択中
ANPB M24                 ; 自動選択中
OUT M25                  ; 手動選択中
;<h1/>異常
LD T0                    ; 設備RUN確認PLC
MC
LD M12                   ; 非常停止SW_ON
LD B00                   ; 異常_非常停止SW_ON
ANB M31                  ; ﾘｾｯﾄ要求
ORL
OUT B00                  ; 異常_非常停止SW_ON
LD M11                   ; 真空ﾎﾟﾝﾌﾟ過電流ﾀｲﾏ
AND Y1500                ; 真空ﾎﾟﾝﾌﾟ 電源ON
LD B01                   ; 異常_真空ﾎﾟﾝﾌﾟ異常
ANB M31                  ; ﾘｾｯﾄ要求
ORL
MPS
TMR K5 K50               ; 真空ﾎﾟﾝﾌﾟ異常監視
MPP
AND T5                   ; 真空ﾎﾟﾝﾌﾟ異常監視
OUT B01                  ; 異常_真空ﾎﾟﾝﾌﾟ異常
LD M51                   ; 自動中
ANB M13                  ; ﾁｬﾝﾊﾞｰ扉　閉確認
LD B02                   ; 異常_運転中ﾁｬﾝﾊﾞｰ扉開異常
ANB M31                  ; ﾘｾｯﾄ要求
ORL
OUT B02                  ; 異常_運転中ﾁｬﾝﾊﾞｰ扉開異常
LD D5090.1               ; PLCｴﾗｰ状態
OR B03                   ; 異常_PLCｴﾗｰ異常
ANB M31                  ; ﾘｾｯﾄ要求
OUT B03                  ; 異常_PLCｴﾗｰ異常
LD T0                    ; 設備RUN確認PLC
ANB T1                   ; 元圧確認ﾀｲﾏ
LD B04                   ; 異常_元圧異常
ANB M31                  ; ﾘｾｯﾄ要求
ORL
MPS
TMR K2 K300              ; 圧力低下確認
MPP
AND T2                   ; 圧力低下確認
OUT B04                  ; 異常_元圧異常
;
LD Y1508                 ; ｼｬｯﾀｰ 上昇
ANB @T1                  ; ｼｬｯﾀｰ上昇端
LD B05                   ; ｼｬｯﾀｰ上昇ｼﾘﾝﾀﾞ異常
ANB M31                  ; ﾘｾｯﾄ要求
ORL
MPS
TMR @11 K70              ; ｼｬｯﾀｰ上昇 異常監視
MPP
AND @T11                 ; ｼｬｯﾀｰ上昇 異常監視
OUT B05                  ; ｼｬｯﾀｰ上昇ｼﾘﾝﾀﾞ異常
LD Y1509                 ; ｼｬｯﾀｰ 下降
ANB @T2                  ; ｼｬｯﾀｰ下降端
LD B06                   ; ｼｬｯﾀｰ下降ｼﾘﾝﾀﾞ異常
ANB M31                  ; ﾘｾｯﾄ要求
ORL
MPS
TMR @12 K70              ; ｼｬｯﾀｰ下降 異常監視
MPP
AND @T12                 ; ｼｬｯﾀｰ下降 異常監視
OUT B06                  ; ｼｬｯﾀｰ下降ｼﾘﾝﾀﾞ異常
MCR
;<h1/>異常まとめ
LDB B00                  ; 異常_非常停止SW_ON
ANB B01                  ; 異常_真空ﾎﾟﾝﾌﾟ異常
ANB B02                  ; 異常_運転中ﾁｬﾝﾊﾞｰ扉開異常
ANB B03                  ; 異常_PLCｴﾗｰ異常
ANB B04                  ; 異常_元圧異常
ANB B05                  ; ｼｬｯﾀｰ上昇ｼﾘﾝﾀﾞ異常
ANB B06                  ; ｼｬｯﾀｰ下降ｼﾘﾝﾀﾞ異常
INV
OUT M30                  ; 異常発生中
LD M30                   ; 異常発生中
OR M32                   ; 異常ﾘｾｯﾄ
ANB M31                  ; ﾘｾｯﾄ要求
OUT M32                  ; 異常ﾘｾｯﾄ
;<h1/>IL
LD M10                   ; 運転準備ON
MPS
LD>=.L D25000 D506       ; 移動平均真空圧値(kPa)  大気圧誤差設定値(−)
AND M28                  ; IL_共通
ANB Y150A                ; 大気開放弁 開
ANB Y150C                ; 真空配管弁 開
ANL
OUT M27                  ; IL_ｼｬｯﾀｰ
MRD
AND M13                  ; ﾁｬﾝﾊﾞｰ扉　閉確認
OUT M28                  ; IL_共通
MRD
LD<=.L D25000 D504       ; 移動平均真空圧値(kPa)  大気圧誤差設定値(＋)
AND M28                  ; IL_共通
ANB Y150A                ; 大気開放弁 開
ANB Y150E                ; 加圧配管弁 開
ANL
OUT M29                  ; IL_真空配管
MPP
LDB Y150C                ; 真空配管弁 開
ANB Y150E                ; 加圧配管弁 開
ANL
OUT M26                  ; IL_大気開放
;<h1/>ﾘｾｯﾄ
LD M22                   ; ﾘｾｯﾄ入力
OUT M31                  ; ﾘｾｯﾄ要求
;<h1/>原点復帰
LDP M23                  ; 原点復帰入力
OR M40                   ; 原点復帰開始
ANB M30                  ; 異常発生中
ANB M41                  ; 原点復帰完了
OUT M40                  ; 原点復帰開始
LD M40                   ; 原点復帰開始
MPS
ANB @M5                  ; 原位置確認
OUT M42                  ; 原点復帰指令
MRD
LD Y150A                 ; 大気開放弁 開
ANB Y150C                ; 真空配管弁 開
ANB Y150E                ; 加圧配管弁 開
AND M350                 ; 大気圧
ANL
OUT M43                  ; ﾊﾞﾙﾌﾞ原位置確認
MRD
LD M43                   ; ﾊﾞﾙﾌﾞ原位置確認
AND @T2                  ; ｼｬｯﾀｰ下降端
ANL
OUT @M5                  ; 原位置確認
MPP
AND @M5                  ; 原位置確認
TMR K6 K5                ; 原点復帰_DL
LD T6                    ; 原点復帰_DL
OUT M41                  ; 原点復帰完了
;<h1/>原位置
LDB M40                  ; 原点復帰開始
LD M40                   ; 原点復帰開始
AND M41                  ; 原点復帰完了
ORL
AND @T2                  ; ｼｬｯﾀｰ下降端
AND Y150A                ; 大気開放弁 開
ANB Y150C                ; 真空配管弁 開
ANB Y150E                ; 加圧配管弁 開
AND T1                   ; 元圧確認ﾀｲﾏ
OUT M45                  ; 全原位置
LDB M45                  ; 全原位置
ANB M51                  ; 自動中
OUT M46                  ; 原点復帰動作可
;<h1/>自動運転
;<h1/>├ｽﾃｯﾌﾟ運転開始条件
LD M10                   ; 運転準備ON
AND M13                  ; ﾁｬﾝﾊﾞｰ扉　閉確認
AND M24                  ; 自動選択中
AND M45                  ; 全原位置
AND>= D900 K1            ; ｽﾃｯﾌﾟ回数設定値
OUT M50                  ; ｽﾃｯﾌﾟ運転開始条件
;<h1/>├ｽﾃｯﾌﾟ運転開始
LDP M20                  ; 運転入力
AND M50                  ; ｽﾃｯﾌﾟ運転開始条件
OR M51                   ; 自動中
ANB M30                  ; 異常発生中
ANB M52                  ; ｽﾃｯﾌﾟ終了
MC
OUT M51                  ; 自動中
@MOV K0 D902             ; ｽﾃｯﾌﾟ現在回数
;品種データセット
LDP M51                  ; 自動中
MPS
LDA D11000               ; 現在品種番号
CON
SUB K1
CON
MUL K500
CON
STA D11002               ; (現在品種番号-1)*200
MRD
MOV D11002 Z1            ; (現在品種番号-1)*200
MPP
BMOV D20000:Z1 D0 K500   ; 品種1品種設定1  運用品種設定1
LD M51                   ; 自動中
CAL* D2 K10 D2000        ; 運用品種設定2  到達圧保持時間*10
CAL* D4 K10 D2002        ; 運用品種設定3  常圧保持時間*10
;原位置
LD @T1                   ; ｼｬｯﾀｰ上昇端
AND Y150A                ; 大気開放弁 開
ANB Y150C                ; 真空配管弁 開
ANB Y150E                ; 加圧配管弁 開
OUT @M2                  ; 自動出力【原位置】
;ｽﾃｯﾌﾟ
LD M51                   ; 自動中
ANB M65                  ; ｽﾃｯﾌﾟ完了
MC
MPS
OUT M53                  ; 1ｽﾃｯﾌﾟ
MPP
AND<> D900 D902          ; ｽﾃｯﾌﾟ回数設定値  ｽﾃｯﾌﾟ現在回数
@INC D902                ; ｽﾃｯﾌﾟ現在回数
;制御判定
LD M350                  ; 大気圧
MPS
AND<.L D0 +0             ; 運用品種設定1
OUT M55                  ; 減圧制御開始
MRD
AND>.L D0 +0             ; 運用品種設定1
OUT M56                  ; 加圧制御開始
MPP
AND=.L D0 +0             ; 運用品種設定1
OUT M57                  ; ｽﾃｯﾌﾟｽｷｯﾌﾟ
;減圧自動
LD @M2                   ; 自動出力【原位置】
AND M55                  ; 減圧制御開始
OR M60                   ; 減圧制御要求
ANB M62                  ; 加圧制御要求
OUT M60                  ; 減圧制御要求
LD M60                   ; 減圧制御要求
AND M210                 ; 減圧制御完了
OR M61                   ; 減圧制御完了
OUT M61                  ; 減圧制御完了
;加圧自動
LD @M2                   ; 自動出力【原位置】
AND M56                  ; 加圧制御開始
OR M62                   ; 加圧制御要求
ANB M60                  ; 減圧制御要求
OUT M62                  ; 加圧制御要求
LD M62                   ; 加圧制御要求
AND M260                 ; 加圧制御完了
OR M63                   ; 加圧制御完了
OUT M63                  ; 加圧制御完了
LDB M61                  ; 減圧制御完了
ANB M63                  ; 加圧制御完了
ANB M57                  ; ｽﾃｯﾌﾟｽｷｯﾌﾟ
INV
OUT M65                  ; ｽﾃｯﾌﾟ完了
MCR
;ワードシフト
LD M65                   ; ｽﾃｯﾌﾟ完了
MEP
WSL D10 K290 K10         ; 運用品種設定6
MCR
;<h1/>└ｽﾃｯﾌﾟ運転終了
LD= D900 D902            ; ｽﾃｯﾌﾟ回数設定値  ｽﾃｯﾌﾟ現在回数
AND M65                  ; ｽﾃｯﾌﾟ完了
LD M52                   ; ｽﾃｯﾌﾟ終了
AND M51                  ; 自動中
ORL
OUT M52                  ; ｽﾃｯﾌﾟ終了
;<h1/>手動ﾗﾝﾌﾟ
LD Y1500                 ; 真空ﾎﾟﾝﾌﾟ 電源ON
OUT B1110                ; 手動_真空ﾎﾟﾝﾌﾟON_LP
INV
OUT B1111                ; 手動_真空ﾎﾟﾝﾌﾟOFF_LP
LD @T1                   ; ｼｬｯﾀｰ上昇端
OUT B1112                ; 手動_ｼｬｯﾀｰ上昇_LP
LD @T2                   ; ｼｬｯﾀｰ下降端
OUT B1113                ; 手動_ｼｬｯﾀｰ下降_LP
LD Y150C                 ; 真空配管弁 開
OUT B1114                ; 手動_真空配管弁開端_LP
INV
OUT B1115                ; 手動_真空配管弁閉端_LP
LD Y150E                 ; 加圧配管弁 開
OUT B1116                ; 手動_加圧配管弁開端_LP
INV
OUT B1117                ; 手動_加圧配管弁閉端_LP
LD Y150A                 ; 大気開放弁 開
OUT B1118                ; 手動_大気開放弁開端_LP
INV
OUT B1119                ; 手動_大気開放弁閉端_LP
END
ENDH
