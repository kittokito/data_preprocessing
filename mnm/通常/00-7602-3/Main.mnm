DEVICE:133
;MODULE:Main
;MODULE_TYPE:0
;
LD CR3905                ; 重度ｴﾗｰ発生中
INV
OUT M1                   ; CPU正常
LD CR2002                ; 常時ON
FLIK K20 K20 M2          ; 200ms FLIK
;<h1/>□_Main_Cycle
LDB M1049                ; S49_ｻｲｸﾙ終了
OUT M100                 ; 起動指令
LD CR2002                ; 常時ON
ZRES M1000 M1049         ; S00_ﾜｰｸﾀｲﾏ  S49_ｻｲｸﾙ終了
LDB M100                 ; 起動指令
MOV K0 D1000             ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M100                  ; 起動指令
MOV D1000 Z1             ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
SET M1000:Z1             ; S00_ﾜｰｸﾀｲﾏ
;<h1/>__S000_CYCLE START
;	ﾀｲﾏｶｳﾝﾄ
LD M1000                 ; S00_ﾜｰｸﾀｲﾏ
MPS
AND T100                 ; ﾜｰｸ取出可能ﾀｲﾏ
INC D1000                ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MPP
TMR K100 K100            ; ﾜｰｸ取出可能ﾀｲﾏ
LD M1001                 ; S01_JIG要求確認
LD B0510                 ; JIG1ﾜｰｸ要求
OR B0520                 ; JIG2ﾜｰｸ要求
OR B0530                 ; JIG3ﾜｰｸ要求
OR B0540                 ; JIG4ﾜｰｸ要求
OR B0550                 ; JIG5ﾜｰｸ要求
OR B0560                 ; JIG6ﾜｰｸ要求
ANL
MPS
OUT M120                 ; ﾜｰｸ取出開始要求
MPP
AND X00                  ; ﾃｽﾄ_PB
INC D1000                ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
OFDL K10 B0500           ; 槽1→PLC 取り出し開始信号
LD M1002                 ; S02_取出開始
INC D1000                ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
LD M1003                 ; S03_取出確認
MPS
LD X01                   ; OK_PB
ANB X02                  ; NG_PB
ANL
INC D1000                ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
MRD
LD X02                   ; NG_PB
ANB X01                  ; OK_PB
ANL
INC D1000                ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
OFDL K10 B0501           ; 槽1→PLC 取り出しｷｬﾝｾﾙ信号
MPP
OUT M121                 ; ﾜｰｸ取出要求
LD M1004                 ; S04_終了
MOV K49 D1000            ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
;<h1/>OUTPUT
LD M120                  ; ﾜｰｸ取出開始要求
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR M121                  ; ﾜｰｸ取出要求
OUT Y50                  ; TEST_PL
LD M121                  ; ﾜｰｸ取出要求
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OUT Y51                  ; OK_PL
OUT Y52                  ; NG_PL
END
ENDH
