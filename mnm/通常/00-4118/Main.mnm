DEVICE:51
;MODULE:Main
;MODULE_TYPE:0
;SCRIPT_TYPE:
;□□　　ダミー接点　　□□
LD CR2003                ; 常時OFF
OUT M28                  ; 仮 NAT
LD CR3905                ; 重度ｴﾗｰ発生中
INV
OUT M1                   ; CPU正常
LD= E1010 K0             ; 塗布幅点検時間(min)
OUT L11                  ; Daily check reset  無効
LD CR2008                ; 運転開始時1ｽｷｬﾝON
DW K0 D148               ; 警報No.
CON
ZRES M1920 M1939         ; Err320:ﾜｰｸ残  Err339:
CON
ZRES M2920 M2939         ; Err340:ﾜｰｸ残  Err359:
;運転準備ﾀｲﾏ
;Delay timer 
LD CR2007                ; 運転開始時1ｽｷｬﾝOFF
TMR K0 K20               ; 電源投入0N後2秒秒ﾃﾞｨﾚｲ
TMR K1 K130              ; 電源投入0N後13秒ﾃﾞｨﾚｲ
TMR K2 K500              ; 電源投入0N後50秒ﾃﾞｨﾚｲ
;音程ﾀｲﾏ1
;Buzzer interval timer 1
LD CR2002                ; 常時ON
ANB T5                   ; ﾌﾞｻﾞｰ音程ﾀｲﾏ1-1
TMH K4 K5                ; ﾌﾞｻﾞｰ音程ﾀｲﾏ1
LD T4                    ; ﾌﾞｻﾞｰ音程ﾀｲﾏ1
TMH K5 K25               ; ﾌﾞｻﾞｰ音程ﾀｲﾏ1-1
;音程ﾀｲﾏ2
;Buzzer interval timer 2
LD CR2002                ; 常時ON
ANB T7                   ; ﾌﾞｻﾞｰ音程ﾀｲﾏ2-1
TMH K6 K2                ; ﾌﾞｻﾞｰ音程ﾀｲﾏ2
LD T6                    ; ﾌﾞｻﾞｰ音程ﾀｲﾏ2
TMH K7 K8                ; ﾌﾞｻﾞｰ音程ﾀｲﾏ2-1
;音程ﾀｲﾏ3
;Buzzer interval timer 3
LD CR2002                ; 常時ON
ANB T9                   ; ﾌﾞｻﾞｰ音程ﾀｲﾏ3-1
TMR K8 K10               ; ﾌﾞｻﾞｰ音程ﾀｲﾏ3
LD T8                    ; ﾌﾞｻﾞｰ音程ﾀｲﾏ3
TMR K9 K5                ; ﾌﾞｻﾞｰ音程ﾀｲﾏ3-1
;音程ﾀｲﾏ4
;Buzzer interval timer 4
LD CR2002                ; 常時ON
ANB T94                  ; ﾌﾞｻﾞｰ音程ﾀｲﾏ4-4
TMH K91 K5               ; ﾌﾞｻﾞｰ音程ﾀｲﾏ4-1
LD T91                   ; ﾌﾞｻﾞｰ音程ﾀｲﾏ4-1
TMH K92 K25              ; ﾌﾞｻﾞｰ音程ﾀｲﾏ4-2
LD T92                   ; ﾌﾞｻﾞｰ音程ﾀｲﾏ4-2
TMH K93 K5               ; ﾌﾞｻﾞｰ音程ﾀｲﾏ4-3
LD T93                   ; ﾌﾞｻﾞｰ音程ﾀｲﾏ4-3
TMH K94 K5               ; ﾌﾞｻﾞｰ音程ﾀｲﾏ4-4
LD T91                   ; ﾌﾞｻﾞｰ音程ﾀｲﾏ4-1
ANB T92                  ; ﾌﾞｻﾞｰ音程ﾀｲﾏ4-2
OR T93                   ; ﾌﾞｻﾞｰ音程ﾀｲﾏ4-3
OUT M59                  ; ﾌﾞｻﾞｰ音程4
;AUTO start buzzer
LD CR2002                ; 常時ON
MPS
LD M81                   ; 自動運転開始BZ
AND< D600 K4             ; ﾌﾞｻﾞｰ呼応
ANL
MPS
ANB T900                 ; 自動起動BZ OFF
TMR K901 K10             ; 自動起動BZ
MPP
AND T901                 ; 自動起動BZ
TMR K900 K5              ; 自動起動BZ OFF
@CAL+ D600 K1 D600       ; ﾌﾞｻﾞｰ呼応  ﾌﾞｻﾞｰ呼応
MPP
ANB M81                  ; 自動運転開始BZ
@MOV K0 D600             ; ﾌﾞｻﾞｰ呼応
;AUTO end buzzer
LD CR2002                ; 常時ON
MPS
LDB M81                  ; 自動運転開始BZ
AND< D601 K3             ; 終了ﾌﾞｻﾞｰ呼応
ANL
MPS
ANB T902                 ; 自動終了BZ OFF
TMH K903 K30             ; 自動終了BZ
MPP
AND T903                 ; 自動終了BZ
TMH K902 K60             ; 自動終了BZ OFF
@CAL+ D601 K1 D601       ; 終了ﾌﾞｻﾞｰ呼応  終了ﾌﾞｻﾞｰ呼応
MPP
AND M81                  ; 自動運転開始BZ
@MOV K0 D601             ; 終了ﾌﾞｻﾞｰ呼応
;Cycle end buzzer
LD CR2002                ; 常時ON
MPS
LDP M1276                ; ｼｬｯﾀｰ開待ち (CTE)
OR M190                  ; ｻｲｸﾙ終了ﾌﾞｻﾞｰ処理中
AND< D602 K3             ; ｻｲｸﾙ終了ﾌﾞｻﾞｰ呼応
ANL
OUT M190                 ; ｻｲｸﾙ終了ﾌﾞｻﾞｰ処理中
MPS
ANB T904                 ; ｻｲｸﾙ終了BZ OFF
TMH K905 K12             ; ｻｲｸﾙ終了BZ
MPP
AND T905                 ; ｻｲｸﾙ終了BZ
TMH K904 K3              ; ｻｲｸﾙ終了BZ OFF
@CAL+ D602 K1 D602       ; ｻｲｸﾙ終了ﾌﾞｻﾞｰ呼応  ｻｲｸﾙ終了ﾌﾞｻﾞｰ呼応
MPP
ANB M190                 ; ｻｲｸﾙ終了ﾌﾞｻﾞｰ処理中
@MOV K0 D602             ; ｻｲｸﾙ終了ﾌﾞｻﾞｰ呼応
;<h1/>安全関連入力受け
;安全系の入力は一旦ここで受ける。
LD T1003                 ; 圧空元圧力正常
OUT M128                 ; 圧空正常
LD X01                   ; 非常停止正常
ORB T0                   ; 電源投入0N後2秒秒ﾃﾞｨﾚｲ
OUT M129                 ; 非常停止　正常
LD M129                  ; 非常停止　正常
ANB M65                  ; 即停止異常(緊急停止)
ANB M66                  ; 主幹異常(ｻｲｸﾙ停止)
INV
OUT M127                 ; RBC 非常停止
LD Y50                   ; M/Cｼｬｯﾀｰﾛｯｸ 前進
AND X06                  ; M/Cｼｬｯﾀｰﾛｯｸ 前進限
AND T1005                ; M/Cｼｬｯﾀｰ閉じ検出
OUT M131                 ; 安全扉正常
LD CR2003                ; 常時OFF
OUT M132                 ; ｴﾘｱｾﾝｻ正常
;<h1/>スイッチ変換
;操作系の入力は一旦ここで受ける。
;ここで受ける事で装置毎に入力アドレスが変更されても変更が容易になる
LD CR2003                ; 常時OFF
OUT M7                   ; 空運転PB
LD B1001                 ; 自動/手動切替Pｌｓ
OUT M10                  ; 自動/手動PB
LD B1010                 ; ﾌﾞｻﾞｰｽﾄｯﾌﾟPB
OR B1011                 ; ｴﾗｰﾘｾｯﾄPB
OUT M15                  ; ﾌﾞｻﾞｰ停止PB
LD B1011                 ; ｴﾗｰﾘｾｯﾄPB
ANPB M15                 ; ﾌﾞｻﾞｰ停止PB
OUT M16                  ; ｴﾗｰﾘｾｯﾄPB
LD B1000                 ; 原点復帰PB
OUT M17                  ; 原点復帰PB
LD B1002                 ; ｽﾀｰﾄPB
OR B2056                 ; DC_D start
OUT M18                  ; 起動PB
TMR K14 K10              ; ｽﾀｰﾄ長押し
LD B1003                 ; ｻｲｸﾙ停止PB
TMR K15 K50              ; 強制停止
OUT M19                  ; 停止PB
LD CR2003                ; 常時OFF
MPS
TMR K16 K20              ; 終了PB_ONﾃﾞｨﾚｲ
MPP
AND T16                  ; 終了PB_ONﾃﾞｨﾚｲ
OUT M20                  ; 終了PB
;Debug option
LD B2104                 ; 乾燥ﾕﾆｯﾄONsw
@RES M24                 ; 乾燥ﾕﾆｯﾄPower OFF
LD B2105                 ; 乾燥ﾕﾆｯﾄOFFsw
@SET M24                 ; 乾燥ﾕﾆｯﾄPower OFF
LD B2100                 ; 吐出有効sw
@RES M25                 ; 吐出無し
LD B2101                 ; 吐出無効sw
@SET M25                 ; 吐出無し
LD B2102                 ; ﾋｰﾀ有効sw
@RES M26                 ; ﾋｰﾀｰ無し
LD B2103                 ; ﾋｰﾀ無効sw
@SET M26                 ; ﾋｰﾀｰ無し
;<h1/>各モード選択
;自動・手動モード
LDB M81                  ; 自動運転開始BZ
AND M48                  ; 全ﾕﾆｯﾄ原点
AND R3011                ; ｺｰﾃｨﾝｸﾞ部準備OK
AND M103                 ; 原点復帰OK
OUT B2060                ; 自動切換えI.L.
LD M33                   ; 手動ﾓｰﾄﾞ
ANP M10                  ; 自動/手動PB
AND B2060                ; 自動切換えI.L.
OR M32                   ; 自動ﾓｰﾄﾞ
ANPB M33                 ; 手動ﾓｰﾄﾞ
OUT M32                  ; 自動ﾓｰﾄﾞ
LD M32                   ; 自動ﾓｰﾄﾞ
ANB M81                  ; 自動運転開始BZ
LDP M10                  ; 自動/手動PB
ORP B1516                ; DC_NG sw
ORP B2057                ; Daily check end
LDB M48                  ; 全ﾕﾆｯﾄ原点
ANB M1906                ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝ実行中
ANB M39                  ; 日常点検ﾓｰﾄﾞ
ORL
OR B1016                 ; ﾒｲﾝ画面戻りsw
ANL
OR CR2008                ; 運転開始時1ｽｷｬﾝON
LD= D12000 K20           ; 表示画面No.
MEP
ORL
ORF M74                  ; ｷｬﾝｾﾙ不可 ｻｲｸﾙ停止
OR M65                   ; 即停止異常(緊急停止)
OR M66                   ; 主幹異常(ｻｲｸﾙ停止)
OR M33                   ; 手動ﾓｰﾄﾞ
ANPB M32                 ; 自動ﾓｰﾄﾞ
OUT M33                  ; 手動ﾓｰﾄﾞ
;この手動操作可条件はメインのみの条件
;ユニット毎に必要な条件は各ユニットへ追加する
LD M129                  ; 非常停止　正常
AND M64                  ; 運転準備
AND M103                 ; 原点復帰OK
OUT M34                  ; ﾒｲﾝ手動操作可能条件
;空運転､払出モードは必要に応じて使用
LDB M37                  ; 空運転ﾓｰﾄﾞ
ANB M49                  ; 全ﾕﾆｯﾄ起動中
ANP M7                   ; 空運転PB
LD M37                   ; 空運転ﾓｰﾄﾞ
ANPB M7                  ; 空運転PB
ORL
OUT M37                  ; 空運転ﾓｰﾄﾞ
LDB M44                  ; ｺｰﾃｨﾝｸﾞ材塗布日常点検
INV
OUT M39                  ; 日常点検ﾓｰﾄﾞ
LDP M81                  ; 自動運転開始BZ
AND= D12000 K10          ; 表示画面No.
AND M8                   ; 接着剤塗布日常点検PB
OR M44                   ; ｺｰﾃｨﾝｸﾞ材塗布日常点検
AND M81                  ; 自動運転開始BZ
OUT M44                  ; ｺｰﾃｨﾝｸﾞ材塗布日常点検
LDB L11                  ; Daily check reset  無効
AND M40                  ; Dispence Daily check OK
AND<.D D410 D400         ; 日常点検記憶RESET予定  現在時刻secﾃﾞｰﾀ
OR M104                  ; ﾚｼﾋﾟ変更
OR CR2008                ; 運転開始時1ｽｷｬﾝON
RES M40                  ; Dispence Daily check OK
;　　　　　　　　　↑日常点検中でﾜｰｸ投入完了でＯＦＦするように
;<h1/>装置状態集約
;
;■装置原点
LD M1900                 ; ﾕﾆｯﾄ1原点
OUT M48                  ; 全ﾕﾆｯﾄ原点
;■起動中
LDB M1905                ; ﾕﾆｯﾄ1起動中
INV
OUT M49                  ; 全ﾕﾆｯﾄ起動中
;■原点復帰中
LDB M1904                ; ﾕﾆｯﾄ1原点復帰中
INV
OUT M50                  ; 全ﾕﾆｯﾄ原点復帰中
;<h1/>運転準備
;
LDP M65                  ; 即停止異常(緊急停止)
ORF M66                  ; 主幹異常(ｻｲｸﾙ停止)
RES Y21A                 ; ﾉｽﾞﾙ洗浄ﾊﾞﾙﾌﾞ ON
ZRES M25 M26             ; 吐出無し  ﾋｰﾀｰ無し
CON
ZRES M1000 M8999         ; ﾕﾆｯﾄ1ｽﾃｯﾌﾟ開始
LD T0                    ; 電源投入0N後2秒秒ﾃﾞｨﾚｲ
AND T1000                ; 装置電源入
OR M5                    ; 運転準備補助
ANB M65                  ; 即停止異常(緊急停止)
ANB M66                  ; 主幹異常(ｻｲｸﾙ停止)
OUT M5                   ; 運転準備補助
LD CR2008                ; 運転開始時1ｽｷｬﾝON
SET M581                 ; TTA Power ON
;RB start
LD M5                    ; 運転準備補助
TMR K41 K10              ; RB起動開始ﾃﾞｨﾚｲ
LDB Y52                  ; RB Power ON
TMR K42 K50              ; RB電源再投入ﾃﾞｨﾚｲ
LD M5                    ; 運転準備補助
MC
;Coarting RB
LD M5                    ; 運転準備補助
LDP T41                  ; RB起動開始ﾃﾞｨﾚｲ
OR T42                   ; RB電源再投入ﾃﾞｨﾚｲ
ANL
OR M402                  ; RB　電源ON
MPS
OUT M402                 ; RB　電源ON
MPP
ANB M409                 ; RB　ready
OUT M404                 ; RB IN 1  ｿﾌﾄﾘｾｯﾄ
LD M402                  ; RB　電源ON
ANB X100                 ; RB OUT 0  ALM
ANB X101                 ; RB OUT 1  RDY
ANB X102                 ; RB OUT 2  EMG
OR M405                  ; ﾘｾｯﾄ確認
OUT M405                 ; ﾘｾｯﾄ確認
LD X101                  ; RB OUT 1  RDY
AND X106                 ; RB OUT 6  動作開始待ち
OR M409                  ; RB　ready
AND M405                 ; ﾘｾｯﾄ確認
AND Y52                  ; RB Power ON
ANB X100                 ; RB OUT 0  ALM
AND X102                 ; RB OUT 2  EMG
OUT M409                 ; RB　ready
MCR
;起動完了確認
LD M409                  ; RB　ready
AND X101                 ; RB OUT 1  RDY
OUT M64                  ; 運転準備
;<h1/>異常検出まとめ
;■即停止異常(全ﾕﾆｯﾄ即停止)
LDB B00                  ; 非常停止異常
ANB B01                  ; 圧空低下異常
ANB B02                  ; 安全扉開異常
ANB B03                  ; 原点復帰ｻｲｸﾙﾀｲﾑｵｰﾊﾞｰ
ANB B04                  ; 運転準備ﾀｲﾑｵｰﾊﾞｰ
ANB B05                  ; 運転中　運転準備OFF
ANB B06                  ; PLC異常
INV
OUT M65                  ; 即停止異常(緊急停止)
;■ﾕﾆｯﾄ異常検出(該当ﾕﾆｯﾄ以外ｻｲｸﾙ停止)
LDB M1901                ; ﾕﾆｯﾄ1全異常
INV
OUT M66                  ; 主幹異常(ｻｲｸﾙ停止)
;■ﾕﾆｯﾄ毎各種警報検出(ﾜｰｸ不足･ｵﾍﾟｺｰﾙ等)
LDB M1908                ; ﾕﾆｯﾄ1警報補助
INV
OUT M67                  ; 警報(ﾜｰｸ不足等)
;■ﾕﾆｯﾄ毎異常ﾌﾞｻﾞｰ検出
LDB M159                 ; ﾒｲﾝ異常BZ　まとめ
ANB M1909                ; ﾕﾆｯﾄ1異常BZ補助
INV
OUT M68                  ; 異常ﾌﾞｻﾞｰ
;ﾕﾆｯﾄ毎ｴﾗｰ検出
LDB M912                 ; ｼｽﾃﾑｴﾗｰ
ANB M913                 ; ｼﾘﾝﾀﾞｴﾗｰ
ANB M1912                ; UNIT1 ｴﾗｰ
INV
OUT M71                  ; All Error PAUSE
;ｴﾗｰ解除
LD M71                   ; All Error PAUSE
LDB M160                 ; ALL PAUSE
LD M157                  ; PAUSEｴﾗｰ 発生
AND M131                 ; 安全扉正常
ORL
ANL
ANP M16                  ; ｴﾗｰﾘｾｯﾄPB
DW K0 D148               ; 警報No.
CON
ZRES M912 M913           ; ｼｽﾃﾑｴﾗｰ  ｼﾘﾝﾀﾞｴﾗｰ
CON
ZRES M1920 M1939         ; Err320:ﾜｰｸ残  Err339:
LDB M71                  ; All Error PAUSE
TMR K130 K5              ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
;<h1/>電源OFF処理
;Power OFF routine
LDF T1002                ; 電源ON/OFF sw入力
AND T0                   ; 電源投入0N後2秒秒ﾃﾞｨﾚｲ
OR M507                  ; ﾒｲﾝ ﾊﾟﾜｰ OFF
OUT M507                 ; ﾒｲﾝ ﾊﾟﾜｰ OFF
;<h1/>全PAUSE処理
;PAUSE routine
LD M49                   ; 全ﾕﾆｯﾄ起動中
OR M50                   ; 全ﾕﾆｯﾄ原点復帰中
ANB M179                 ; 一時停止処理終了
ANB M163                 ; All PAUSE cancel
MC
LDB M7920                ; Err440:除材搬送1ｹｰｽ残
ANB M8920                ; Err460:除材搬送2ｹｰｽ残
INV
OR M157                  ; PAUSEｴﾗｰ 発生
ANB M179                 ; 一時停止処理終了
AND CR2003               ; 常時OFF
OUT M157                 ; PAUSEｴﾗｰ 発生
LDP B1012                ; Pause PB
ORP M6770                ; DC_T PAUSE Pls.
ORP M157                 ; PAUSEｴﾗｰ 発生
ANB M160                 ; ALL PAUSE
OR M160                  ; ALL PAUSE
OUT M160                 ; ALL PAUSE
LDB M1910                ; UNIT1 Pack
OUB M161                 ; PACK中
LD M160                  ; ALL PAUSE
OR M162                  ; 全unit停止
OR M163                  ; All PAUSE cancel
MPS
LDB M163                 ; All PAUSE cancel
ANB M161                 ; PACK中
ANL
OUT M162                 ; 全unit停止
MPP
LDB M162                 ; 全unit停止
AND M161                 ; PACK中
ANP M18                  ; 起動PB
ANL
OUT M163                 ; All PAUSE cancel
LD CR2002                ; 常時ON
MPS
LD M162                  ; 全unit停止
AND Y50                  ; M/Cｼｬｯﾀｰﾛｯｸ 前進
OR M164                  ; Pause開始時ｼｬｯﾀｰ閉
ANB M165                 ; Pause開始時ｼｬｯﾀｰ開
ANL
OUT M164                 ; Pause開始時ｼｬｯﾀｰ閉
OUT M1771                ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ解除
MPP
LD M162                  ; 全unit停止
ANB Y50                  ; M/Cｼｬｯﾀｰﾛｯｸ 前進
OR M165                  ; Pause開始時ｼｬｯﾀｰ開
ANB M164                 ; Pause開始時ｼｬｯﾀｰ閉
ANL
OUT M165                 ; Pause開始時ｼｬｯﾀｰ開
LD M164                  ; Pause開始時ｼｬｯﾀｰ閉
OR M165                  ; Pause開始時ｼｬｯﾀｰ開
OR M170                  ; 作業者PAUSE解除待ち
OUT M170                 ; 作業者PAUSE解除待ち
LD M170                  ; 作業者PAUSE解除待ち
ANP M18                  ; 起動PB
OR M171                  ; ｼｬｯﾀｰ閉じ確認
LD T1005                 ; M/Cｼｬｯﾀｰ閉じ検出
OR M165                  ; Pause開始時ｼｬｯﾀｰ開
ANL
MPS
OUT M171                 ; ｼｬｯﾀｰ閉じ確認
MPP
AND M164                 ; Pause開始時ｼｬｯﾀｰ閉
OUT M1751                ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ
LD M171                  ; ｼｬｯﾀｰ閉じ確認
AND M131                 ; 安全扉正常
OR M165                  ; Pause開始時ｼｬｯﾀｰ開
OR M178                  ; 状態復帰完了
OUT M178                 ; 状態復帰完了
LD M178                  ; 状態復帰完了
OR M179                  ; 一時停止処理終了
OUT M179                 ; 一時停止処理終了
MCR
;<h1/>自動運転停止指令(ｻｲｸﾙ停止)
;AUTO cycle stop routine
LD M1963                 ; Palette ID異常
OR M233                  ; ｺｰﾃｨﾝｸﾞ剤残量無
OR M74                   ; ｷｬﾝｾﾙ不可 ｻｲｸﾙ停止
AND M49                  ; 全ﾕﾆｯﾄ起動中
OUT M74                  ; ｷｬﾝｾﾙ不可 ｻｲｸﾙ停止
LD M19                   ; 停止PB
OR B2057                 ; Daily check end
OR M74                   ; ｷｬﾝｾﾙ不可 ｻｲｸﾙ停止
OR M70                   ; 自動起動停止指令(ｻｲｸﾙ停止)
LD M49                   ; 全ﾕﾆｯﾄ起動中
OR M97                   ; 原点復帰動作中
OR M1906                 ; ﾕﾆｯﾄ1ｻﾌﾞﾙｰﾁﾝ実行中
ANL
LDPB M18                 ; 起動PB
OR M160                  ; ALL PAUSE
OR M74                   ; ｷｬﾝｾﾙ不可 ｻｲｸﾙ停止
ANL
OUT M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
LD M70                   ; 自動起動停止指令(ｻｲｸﾙ停止)
LD M1398                 ; ﾕﾆｯﾄ1ｻｲｸﾙ停止
ORB M1905                ; ﾕﾆｯﾄ1起動中
OR M1901                 ; ﾕﾆｯﾄ1全異常
ANL
OUT M72                  ; 全ﾕﾆｯﾄ停止確認
LDF M81                  ; 自動運転開始BZ
ZRES M25 M26             ; 吐出無し  ﾋｰﾀｰ無し
;<h1/>自動起動回路
;AUTO operation start routine
LD M32                   ; 自動ﾓｰﾄﾞ
AND M48                  ; 全ﾕﾆｯﾄ原点
AND R3011                ; ｺｰﾃｨﾝｸﾞ部準備OK
ANB M49                  ; 全ﾕﾆｯﾄ起動中
ANB M50                  ; 全ﾕﾆｯﾄ原点復帰中
AND M64                  ; 運転準備
ANB M81                  ; 自動運転開始BZ
AND M103                 ; 原点復帰OK
ANB M71                  ; All Error PAUSE
LD M40                   ; Dispence Daily check OK
OR= D12000 K10           ; 表示画面No.
ANL
OUT M80                  ; 自動起動条件
LD M18                   ; 起動PB
AND M80                  ; 自動起動条件
OR M81                   ; 自動運転開始BZ
ANB M65                  ; 即停止異常(緊急停止)
ANB M66                  ; 主幹異常(ｻｲｸﾙ停止)
ANB M72                  ; 全ﾕﾆｯﾄ停止確認
OUT M81                  ; 自動運転開始BZ
TMR K20 K20              ; 起動前BZ_ONﾀｲﾏ
TMH K24 K20              ; 日常点検判定ﾃﾞｨﾚｲ
LD T20                   ; 起動前BZ_ONﾀｲﾏ
OUT M82                  ; 自動運転開始
TMR K21 K10              ; 自動起動ﾃﾞｨﾚｲ
LD M82                   ; 自動運転開始
AND T21                  ; 自動起動ﾃﾞｨﾚｲ
OUT M83                  ; 各工程起動指令
;<h1/>原点復帰回路
;HOME operation start routine
LDB M82                  ; 自動運転開始
ANB M49                  ; 全ﾕﾆｯﾄ起動中
ANB M50                  ; 全ﾕﾆｯﾄ原点復帰中
AND M64                  ; 運転準備
ANB M65                  ; 即停止異常(緊急停止)
ANB M66                  ; 主幹異常(ｻｲｸﾙ停止)
AND M33                  ; 手動ﾓｰﾄﾞ
AND T1005                ; M/Cｼｬｯﾀｰ閉じ検出
OUT M96                  ; 原点復帰可能条件
LD M17                   ; 原点復帰PB
AND M96                  ; 原点復帰可能条件
OR M97                   ; 原点復帰動作中
ANB M102                 ; 装置全原点確認
ANB M65                  ; 即停止異常(緊急停止)
ANB M66                  ; 主幹異常(ｻｲｸﾙ停止)
OUT M97                  ; 原点復帰動作中
MPS
TMR K22 K5               ; 原点復帰開始ﾃﾞｨﾚｲ
MPP
LDB M71                  ; All Error PAUSE
ANB M160                 ; ALL PAUSE
ANL
TMR K23 K6000            ; 原点復帰ﾀｲﾑｵｰﾊﾞｰ
LDP T22                  ; 原点復帰開始ﾃﾞｨﾚｲ
OR M98                   ; 原点復帰開始
AND M97                  ; 原点復帰動作中
ANB M100                 ; 原点復帰起動確認
OUT M98                  ; 原点復帰開始
LD M98                   ; 原点復帰開始
AND M1904                ; ﾕﾆｯﾄ1原点復帰中
OUT M99                  ; 原点復帰全起動確認補助
LD M98                   ; 原点復帰開始
AND M99                  ; 原点復帰全起動確認補助
OR M100                  ; 原点復帰起動確認
AND M97                  ; 原点復帰動作中
ANB M101                 ; 原点復帰完了
OUT M100                 ; 原点復帰起動確認
LD M100                  ; 原点復帰起動確認
ANB M50                  ; 全ﾕﾆｯﾄ原点復帰中
OR M101                  ; 原点復帰完了
AND M97                  ; 原点復帰動作中
ANB M102                 ; 装置全原点確認
OUT M101                 ; 原点復帰完了
LD M101                  ; 原点復帰完了
AND M48                  ; 全ﾕﾆｯﾄ原点
OR M102                  ; 装置全原点確認
AND M97                  ; 原点復帰動作中
OUT M102                 ; 装置全原点確認
LD M102                  ; 装置全原点確認
OR M103                  ; 原点復帰OK
ANB M98                  ; 原点復帰開始
LDFB M32                 ; 自動ﾓｰﾄﾞ
OR M39                   ; 日常点検ﾓｰﾄﾞ
ORFB M81                 ; 自動運転開始BZ
ANL
AND M64                  ; 運転準備
ANB M65                  ; 即停止異常(緊急停止)
ANB M66                  ; 主幹異常(ｻｲｸﾙ停止)
ANB M104                 ; ﾚｼﾋﾟ変更
OUT M103                 ; 原点復帰OK
;<h1/>ﾌﾞｻﾞｰ補助回路
;Buzzer assist
LD M68                   ; 異常ﾌﾞｻﾞｰ
OUT M112                 ; 異常ﾌﾞｻﾞｰON
LD M67                   ; 警報(ﾜｰｸ不足等)
ANB M118                 ; 警報ﾌﾞｻﾞｰ OFF
OUT M113                 ; 警報ﾌﾞｻﾞｰON
LD M71                   ; All Error PAUSE
ANB M119                 ; ｴﾗｰﾌﾞｻﾞｰOFF
OUT M114                 ; ｴﾗｰﾌﾞｻﾞｰON
LDB M15                  ; ﾌﾞｻﾞｰ停止PB
ANB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
INV
OR M118                  ; 警報ﾌﾞｻﾞｰ OFF
AND M67                  ; 警報(ﾜｰｸ不足等)
OUT M118                 ; 警報ﾌﾞｻﾞｰ OFF
LDB M15                  ; ﾌﾞｻﾞｰ停止PB
ANB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
INV
OR M119                  ; ｴﾗｰﾌﾞｻﾞｰOFF
AND M71                  ; All Error PAUSE
OUT M119                 ; ｴﾗｰﾌﾞｻﾞｰOFF
LDP M15                  ; ﾌﾞｻﾞｰ停止PB
ORP M16                  ; ｴﾗｰﾘｾｯﾄPB
OUT M122                 ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
LDP M16                  ; ｴﾗｰﾘｾｯﾄPB
OUT M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
;<h1/>入力受け回路
;Input assist
;　　　　　Normal:0.10sec  Work detection:0.30sec
;　X000-X00F CPU system
LD X00                   ; 装置電源入
TMH K1000 K10            ; 装置電源入
LD X01                   ; 非常停止正常
TMH K1001 K10            ; 非常停止正常
LD X02                   ; 電源ON/OFF sw入力
TMH K1002 K10            ; 電源ON/OFF sw入力
LD X03                   ; 圧空元圧力正常
TMH K1003 K10            ; 圧空元圧力正常
LD X04                   ; RBｲﾈｰﾌﾞﾙsw
TMH K1004 K10            ; RBｲﾈｰﾌﾞﾙsw
LD X05                   ; M/Cｼｬｯﾀｰ閉じ検出
TMH K1005 K50            ; M/Cｼｬｯﾀｰ閉じ検出
LDB X05                  ; M/Cｼｬｯﾀｰ閉じ検出
TMR K1020 K5             ; M/Cｼｬｯﾀｰ開き検出
LD X06                   ; M/Cｼｬｯﾀｰﾛｯｸ 前進限
TMH K1006 K10            ; M/Cｼｬｯﾀｰﾛｯｸ 前進限
LD X07                   ; M/Cｼｬｯﾀｰﾛｯｸ 後退限
TMH K1007 K10            ; M/Cｼｬｯﾀｰﾛｯｸ 後退限
LD X08                   ; 乾燥ﾌｧﾝ回転異常
TMH K1008 K10            ; 乾燥ﾌｧﾝ回転異常
;　X100-X10F はRBのI/Oなので省略
;　X110-X13F I/O unit system
LD X110                  ; ﾜｰｸ検出1A
TMH K1100 K50            ; ﾜｰｸ検出1A
LD X111                  ; ﾜｰｸ検出1B
TMH K1101 K50            ; ﾜｰｸ検出1B
LD X112                  ; ﾜｰｸ検出2A
TMH K1102 K50            ; ﾜｰｸ検出2A
LD X113                  ; ﾜｰｸ検出2B
TMH K1103 K50            ; ﾜｰｸ検出2B
LD X114                  ; ﾏｽｸ検出1
TMH K1104 K50            ; ﾏｽｸ検出1
LD X115                  ; ﾏｽｸ検出2
TMH K1105 K50            ; ﾏｽｸ検出2
LD X116                  ; 予備配線
TMH K1106 K50            ; 予備配線
LD X11A                  ; ﾊﾟﾚｯﾄID 1
TMH K1110 K50            ; ﾊﾟﾚｯﾄID 1
LD X11B                  ; ﾊﾟﾚｯﾄID 2
TMH K1111 K50            ; ﾊﾟﾚｯﾄID 2
LD X11C                  ; ﾊﾟﾚｯﾄID 4
TMH K1112 K50            ; ﾊﾟﾚｯﾄID 4
LD X11D                  ; ﾊﾟﾚｯﾄID 8
TMH K1113 K50            ; ﾊﾟﾚｯﾄID 8
;
LD X120                  ; 浸漬ｶｯﾌﾟ検出
TMH K1200 K50            ; 浸漬ｶｯﾌﾟ検出
LD X121                  ; 浸漬ｶｯﾌﾟ液面検出
TMH K1201 K50            ; 浸漬ｶｯﾌﾟ液面検出
LD X122                  ; 捨て打ちｶｯﾌﾟ検出
TMH K1202 K50            ; 捨て打ちｶｯﾌﾟ検出
LD X123                  ; ｺｰﾃｨﾝｸﾞ材温調異常
TMH K1203 K50            ; ｺｰﾃｨﾝｸﾞ材温調異常
LD X124                  ; ｺｰﾃｨﾝｸﾞ材温度適温
TMH K1204 K50            ; ｺｰﾃｨﾝｸﾞ材温度適温
LD X125                  ; ｺｰﾃｨﾝｸﾞ材液面検出OUT1
TMH K1205 K50            ; ｺｰﾃｨﾝｸﾞ材液面検出OUT1
LD X126                  ; ｺｰﾃｨﾝｸﾞ材液面検出OUT2
TMH K1206 K50            ; ｺｰﾃｨﾝｸﾞ材液面検出OUT2
LD X127                  ; ｺｰﾃｨﾝｸﾞ材液面検出OUT3 下限ﾚﾍﾞﾙ
TMH K1207 K50            ; ｺｰﾃｨﾝｸﾞ材液面検出OUT3 下限ﾚﾍﾞﾙ
LD X128                  ; ｺｰﾃｨﾝｸﾞ材液面検出OUT4 警報ﾚﾍﾞﾙ
TMH K1208 K50            ; ｺｰﾃｨﾝｸﾞ材液面検出OUT4 警報ﾚﾍﾞﾙ
LD X129                  ; ｺｰﾃｨﾝｸﾞ材液面検出ｱﾗｰﾑ
TMH K1209 K50            ; ｺｰﾃｨﾝｸﾞ材液面検出ｱﾗｰﾑ
;<h1/>出力回路
;Output
LD M1750                 ; ﾏｼﾝｼｬｯﾀｰ ﾛｯｸ補助
OUT Y50                  ; M/Cｼｬｯﾀｰﾛｯｸ 前進
LD M581                  ; TTA Power ON
OUT Y52                  ; RB Power ON
LD CR2002                ; 常時ON
OUT Y53                  ; RB Inable ON
LD M507                  ; ﾒｲﾝ ﾊﾟﾜｰ OFF
OUT Y57                  ; ﾒｲﾝ ﾊﾟﾜｰ OFF
;
LD M1708                 ; RB強制収納動作
TMR K30 K10              ; 強制動作ﾃﾞｨﾚｲ
LD M1702                 ; RB 動作中
LDB M1708                ; RB強制収納動作
LD M1708                 ; RB強制収納動作
AND T30                  ; 強制動作ﾃﾞｨﾚｲ
ORL
ANL
OUT Y200                 ; RB IN 0  動作開始
LD M404                  ; RB IN 1  ｿﾌﾄﾘｾｯﾄ
OUT Y201                 ; RB IN 1  ｿﾌﾄﾘｾｯﾄ
LD CR2003                ; 常時OFF
OUT Y202                 ; RB IN 2  
LD M1706                 ; RB 原点復帰中
OUT Y20C                 ; RB IN 12 原点復帰
LD M25                   ; 吐出無し
OR M1721                 ; MUN：吐出無し
OUT Y20E                 ; RB IN 14 吐出無(ﾄﾚｰｽﾓｰﾄﾞ)
LD R62015                ; RB IN 15 手動:吐出ﾊﾞﾙﾌﾞON
ANB M25                  ; 吐出無し
ANB Y20E                 ; RB IN 14 吐出無(ﾄﾚｰｽﾓｰﾄﾞ)
OUT Y20F                 ; RB IN 15 手動:吐出ﾊﾞﾙﾌﾞON
;
LD R3010                 ; 塗布剤ﾋｰﾀON
OUT Y210                 ; ｺｰﾃｨﾝｸﾞ材温調ﾋｰﾀ   Power ON
LDB Y210                 ; ｺｰﾃｨﾝｸﾞ材温調ﾋｰﾀ   Power ON
OUT Y211                 ; ｺｰﾃｨﾝｸﾞ材温度 EV1 (STOP)
LD CR2003                ; 常時OFF
OUT Y212                 ; ｺｰﾃｨﾝｸﾞ材温度 EV2
LD M24                   ; 乾燥ﾕﾆｯﾄPower OFF
ORB X01                  ; 非常停止正常
OR B00                   ; 非常停止異常
OUT Y213                 ; 乾燥ﾕﾆｯﾄ Power OFF
LD T0                    ; 電源投入0N後2秒秒ﾃﾞｨﾚｲ
OUT Y218                 ; ｴｱﾊﾟｰｼﾞ ON
LD X108                  ; RB OUT 8  ﾉｽﾞﾙ洗浄ON依頼
OR R62110                ; ﾉｽﾞﾙ洗浄ﾊﾞﾙﾌﾞ ON
OUT Y21A                 ; ﾉｽﾞﾙ洗浄ﾊﾞﾙﾌﾞ ON
LDB T189                 ; ﾎﾟﾝﾌﾟ駆動ｴｱOFF
OUT Y21F                 ; 樹脂循環ﾎﾟﾝﾌﾟ駆動ｴｱON
;<h1/>主幹異常
;Alarm
LD T1000                 ; 装置電源入
MPS
LDB M129                 ; 非常停止　正常
LDB B0500                ; 非常停止異常 BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B00                  ; 非常停止異常
ORL
ANB Y57                  ; ﾒｲﾝ ﾊﾟﾜｰ OFF
ANL
OUT B00                  ; 非常停止異常
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0500                 ; 非常停止異常 BZ停止
AND B00                  ; 非常停止異常
ANL
OUT B0500                ; 非常停止異常 BZ停止
LD T1000                 ; 装置電源入
MPS
LD M64                   ; 運転準備
ANB M128                 ; 圧空正常
LDB B0501                ; 圧空低下異常 BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B01                  ; 圧空低下異常
ORL
ANL
MPS
AND T40                  ; 圧空低下確認
OUT B01                  ; 圧空低下異常
MPP
ANB Y57                  ; ﾒｲﾝ ﾊﾟﾜｰ OFF
TMR K40 K15              ; 圧空低下確認
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0501                 ; 圧空低下異常 BZ停止
AND B01                  ; 圧空低下異常
ANL
OUT B0501                ; 圧空低下異常 BZ停止
LD CR2002                ; 常時ON
MPS
LD M28                   ; 仮 NAT
ANB M131                 ; 安全扉正常
LDB B0502                ; 安全扉開異常 BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B02                  ; 安全扉開異常
ORL
ANL
OUT B02                  ; 安全扉開異常
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0502                 ; 安全扉開異常 BZ停止
AND B02                  ; 安全扉開異常
ANL
OUT B0502                ; 安全扉開異常 BZ停止
LD CR2002                ; 常時ON
MPS
LD T23                   ; 原点復帰ﾀｲﾑｵｰﾊﾞｰ
LDB B0503                ; 原点復帰ｻｲｸﾙﾀｲﾑｵｰﾊﾞｰ BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B03                  ; 原点復帰ｻｲｸﾙﾀｲﾑｵｰﾊﾞｰ
ORL
ANL
OUT B03                  ; 原点復帰ｻｲｸﾙﾀｲﾑｵｰﾊﾞｰ
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0503                 ; 原点復帰ｻｲｸﾙﾀｲﾑｵｰﾊﾞｰ BZ停止
AND B03                  ; 原点復帰ｻｲｸﾙﾀｲﾑｵｰﾊﾞｰ
ANL
OUT B0503                ; 原点復帰ｻｲｸﾙﾀｲﾑｵｰﾊﾞｰ BZ停止
LD CR2002                ; 常時ON
MPS
LD M5                    ; 運転準備補助
ANB M64                  ; 運転準備
AND T2                   ; 電源投入0N後50秒ﾃﾞｨﾚｲ
ANB M6640                ; Manual enable OFF
ANL
TMR K113 K300            ; 運転準備ﾀｲﾑｵｰﾊﾞｰ
MRD
LD T113                  ; 運転準備ﾀｲﾑｵｰﾊﾞｰ
LDB B0504                ; 運転準備ﾀｲﾑｵｰﾊﾞｰ BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B04                  ; 運転準備ﾀｲﾑｵｰﾊﾞｰ
ORL
ANL
OUT B04                  ; 運転準備ﾀｲﾑｵｰﾊﾞｰ
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0504                 ; 運転準備ﾀｲﾑｵｰﾊﾞｰ BZ停止
AND B04                  ; 運転準備ﾀｲﾑｵｰﾊﾞｰ
ANL
OUT B0504                ; 運転準備ﾀｲﾑｵｰﾊﾞｰ BZ停止
LD T1000                 ; 装置電源入
MPS
LD M64                   ; 運転準備
OR T84                   ; 運転準備監視ﾃﾞｨﾚｲ
ANB B05                  ; 運転中　運転準備OFF
ANB M68                  ; 異常ﾌﾞｻﾞｰ
ANB Y57                  ; ﾒｲﾝ ﾊﾟﾜｰ OFF
ANL
TMR K84 K10              ; 運転準備監視ﾃﾞｨﾚｲ
MRD
LD T84                   ; 運転準備監視ﾃﾞｨﾚｲ
ANB M68                  ; 異常ﾌﾞｻﾞｰ
ANB M64                  ; 運転準備
LDB B0505                ; 運転中　運転準備OFF BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B05                  ; 運転中　運転準備OFF
ORL
ANL
OUT B05                  ; 運転中　運転準備OFF
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0505                 ; 運転中　運転準備OFF BZ停止
AND B05                  ; 運転中　運転準備OFF
ANL
OUT B0505                ; 運転中　運転準備OFF BZ停止
LD T1000                 ; 装置電源入
MPS
LDB M1                   ; CPU正常
LDB B0506                ; PLC異常 BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B06                  ; PLC異常
ORL
ANB Y57                  ; ﾒｲﾝ ﾊﾟﾜｰ OFF
ANL
OUT B06                  ; PLC異常
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0506                 ; PLC異常 BZ停止
AND B06                  ; PLC異常
ANL
OUT B0506                ; PLC異常 BZ停止
;異常ﾌﾞｻﾞｰまとめ
LDB B00                  ; 非常停止異常
OR B0500                 ; 非常停止異常 BZ停止
LDB B01                  ; 圧空低下異常
OR B0501                 ; 圧空低下異常 BZ停止
ANL
LDB B02                  ; 安全扉開異常
OR B0502                 ; 安全扉開異常 BZ停止
ANL
LDB B03                  ; 原点復帰ｻｲｸﾙﾀｲﾑｵｰﾊﾞｰ
OR B0503                 ; 原点復帰ｻｲｸﾙﾀｲﾑｵｰﾊﾞｰ BZ停止
ANL
LDB B04                  ; 運転準備ﾀｲﾑｵｰﾊﾞｰ
OR B0504                 ; 運転準備ﾀｲﾑｵｰﾊﾞｰ BZ停止
ANL
LDB B05                  ; 運転中　運転準備OFF
OR B0505                 ; 運転中　運転準備OFF BZ停止
ANL
LDB B06                  ; PLC異常
OR B0506                 ; PLC異常 BZ停止
ANL
INV
OUT M159                 ; ﾒｲﾝ異常BZ　まとめ
;PLC battely alarm
LD= D148 K300            ; 警報No.
OR M230                  ; PLCﾊﾞｯﾃﾘｰ異常記憶
ANB T61                  ; PLCﾊﾞｯﾃﾘｰ警報間隔
OUT M230                 ; PLCﾊﾞｯﾃﾘｰ異常記憶
TMR K61 K18000           ; PLCﾊﾞｯﾃﾘｰ警報間隔
LD T0                    ; 電源投入0N後2秒秒ﾃﾞｨﾚｲ
AND CR2306               ; ﾊﾞｯｸｱｯﾌﾟ電池異常
ANB M230                 ; PLCﾊﾞｯﾃﾘｰ異常記憶
TMR K60 K10              ; PLCﾊﾞｯﾃﾘｰ警報
LD T60                   ; PLCﾊﾞｯﾃﾘｰ警報
ANB M71                  ; All Error PAUSE
DW K300 D148             ; 警報No.
CON
SET M912                 ; ｼｽﾃﾑｴﾗｰ
;Drying fan rotation alarm
LD M64                   ; 運転準備
ANB M24                  ; 乾燥ﾕﾆｯﾄPower OFF
MPS
LD= D148 K302            ; 警報No.
OR M231                  ; 乾燥ﾌｧﾝ回転異常記憶
ANB T63                  ; 乾燥ﾌｧﾝ回転異常間隔
ANL
OUT M231                 ; 乾燥ﾌｧﾝ回転異常記憶
TMR K63 K600             ; 乾燥ﾌｧﾝ回転異常間隔
MRD
LD T0                    ; 電源投入0N後2秒秒ﾃﾞｨﾚｲ
ANB Y213                 ; 乾燥ﾕﾆｯﾄ Power OFF
ANB T1008                ; 乾燥ﾌｧﾝ回転異常
ANL
TMR K62 K10              ; 乾燥ﾌｧﾝ回転異常
MPP
LD T62                   ; 乾燥ﾌｧﾝ回転異常
ANB M71                  ; All Error PAUSE
ANL
DW K302 D148             ; 警報No.
CON
SET M912                 ; ｼｽﾃﾑｴﾗｰ
;<h1/>ｼﾘﾝﾀﾞ動作監視
;Cylinder check
LDB X06                  ; M/Cｼｬｯﾀｰﾛｯｸ 前進限
LD X06                   ; M/Cｼｬｯﾀｰﾛｯｸ 前進限
AND X07                  ; M/Cｼｬｯﾀｰﾛｯｸ 後退限
ORL
AND Y50                  ; M/Cｼｬｯﾀｰﾛｯｸ 前進
TMR @0 K50
CON
AND @T0
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
DW K800 D144             ; ｴﾗｰｼﾘﾝﾀﾞｾﾝｻNo.(文字列)
CON
DW K301 D148             ; 警報No.
CON
SET M913                 ; ｼﾘﾝﾀﾞｴﾗｰ
LDB X07                  ; M/Cｼｬｯﾀｰﾛｯｸ 後退限
LD X06                   ; M/Cｼｬｯﾀｰﾛｯｸ 前進限
AND X07                  ; M/Cｼｬｯﾀｰﾛｯｸ 後退限
ORL
ANB Y50                  ; M/Cｼｬｯﾀｰﾛｯｸ 前進
TMR @1 K50
CON
AND @T1
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
DW K801 D144             ; ｴﾗｰｼﾘﾝﾀﾞｾﾝｻNo.(文字列)
CON
DW K301 D148             ; 警報No.
CON
SET M913                 ; ｼﾘﾝﾀﾞｴﾗｰ
;<h1/>その他
;etc.
;出力個数
;INPUT OUTPUT
LDP M1050                ; ｼｬｯﾀｰﾛｯｸ
MPS
AND T1120                ; ﾜｰｸ1　有り
INC D10                  ; Input
MPP
AND T1130                ; ﾜｰｸ2　有り
INC D10                  ; Input
LDP M1276                ; ｼｬｯﾀｰ開待ち (CTE)
MPS
AND T1120                ; ﾜｰｸ1　有り
INC D11                  ; Output
MPP
AND T1130                ; ﾜｰｸ2　有り
INC D11                  ; Output
LDP B2011                ; Counter reset
DW K0 D10                ; Input
DW K0 D11                ; Output
;ｻｲｸﾙﾀｲﾑ
LD M81                   ; 自動運転開始BZ
MPS
AND CR2004               ; 10msｸﾛｯｸﾊﾟﾙｽ
@INC D18000              ; ｻｲｸﾙﾀｲﾑ計測
MPS
LD>= D1000 K50           ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
AND< D1000 K283          ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
ANL
@INC D18020              ; ﾀｲﾑ計測
MPP
LD< D1000 K50            ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
OR>= D1000 K283          ; ﾕﾆｯﾄ1自動運転ｽﾃｯﾌﾟ
ANL
@INC D18040              ; ﾀｲﾑ計測
MPP
ANP M1276                ; ｼｬｯﾀｰ開待ち (CTE)
BMOV D18000 D18001 K10   ; ｻｲｸﾙﾀｲﾑ計測  Cycle time last 1
BMOV D18020 D18021 K10   ; ﾀｲﾑ計測  Machine time last 1
BMOV D18040 D18041 K10   ; ﾀｲﾑ計測  Worker wait time last 1
DW K0 D18000             ; ｻｲｸﾙﾀｲﾑ計測
CON
DW K0 D18020             ; ﾀｲﾑ計測
CON
DW K0 D18040             ; ﾀｲﾑ計測
LDP M81                  ; 自動運転開始BZ
DW K0 D18000             ; ｻｲｸﾙﾀｲﾑ計測
CON
DW K0 D18020             ; ﾀｲﾑ計測
CON
DW K0 D18040             ; ﾀｲﾑ計測
;D18019 = AVG(D18001,10)
;D18039 = AVG(D18021,10)
;D18059 = AVG(D18041,10)
;D18019 = AVG(D18001,10)
;
LD CR2002                ; 常時ON
LDA.D K0
CON
AVG D18001 K10           ; Cycle time last 1
CON
STA D18019               ; Cycle time AVERAGE
;D18039 = AVG(D18021,10)
;
LD CR2002                ; 常時ON
LDA.D K0
CON
AVG D18021 K10           ; Machine time last 1
CON
STA D18039               ; Machine time AVERAGE
;D18059 = AVG(D18041,10)
LD CR2002                ; 常時ON
LDA.D K0
CON
AVG D18041 K10           ; Worker wait time last 1
CON
STA D18059               ; Worker wait time AVERAGE
;
END
ENDH
