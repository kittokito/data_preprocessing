DEVICE:53
;MODULE:P_CHUCK_S
;MODULE_TYPE:1
LD @CR2008
ZRES @M0 @M15
FMOV K0 @D0 K4           ; OUTPUT STEP No.
MPS
LDA V0                   ; AXIX No.
CON
SUB K1
CON
MUL K16
CON
STA Z1
CON
ADRSET X1160:Z1 @E0      ; OUT0 ID1  Axis INPUT Head address
ADRSET Y1960:Z1 @E2      ; ID1 IN0  Axis OUTPUT Head address
MPP
SET P2                   ; Axis moving
CON
RES P3                   ; Work detect
LD CR2002                ; èÌéûON
PMOV *@E0:#0 K0 @D0 K0 K6; Axis INPUT Head address  OUTPUT STEP No.
LDB *@E0:#14             ; Axis INPUT Head address
ORB *@E0:#15             ; Axis INPUT Head address
AND CR2003               ; èÌéûOFF
RES P2                   ; Axis moving
CON
SET P0                   ; ERROR No.
LD @CR2008
MPS
AND= V1 @D0              ; POINT No.  OUTPUT STEP No.
RES P2                   ; Axis moving
CON
SET P1                   ; MACRO END
MPP
AND<> V1 @D0             ; POINT No.  OUTPUT STEP No.
SET @M0
STG @M0
PMOV V1 K0 *@E2:#0 K0 K6 ; POINT No.  Axis OUTPUT Head address
JMP @M1
STG @M1
TMH @1 K5
CON
AND @T1
ANB *@E0:#8              ; Axis INPUT Head address
SET *@E2:#10             ; Axis OUTPUT Head address
CON
JMP @M2
STG @M2
ANB *@E0:#11             ; Axis INPUT Head address
AND *@E0:#8              ; Axis INPUT Head address
RES *@E2:#10             ; Axis OUTPUT Head address
CON
JMP @M3
STG @M3
ANB *@E0:#8              ; Axis INPUT Head address
MPS
LD *@E0:#11              ; Axis INPUT Head address
AND= V1 @D0              ; POINT No.  OUTPUT STEP No.
ANL
SET P3                   ; Work detect
CON
RES P2                   ; Axis moving
CON
SET P1                   ; MACRO END
CON
ENDS
MPP
ANB *@E0:#11             ; Axis INPUT Head address
TMH @0 K2
CON
AND @T0
RES P3                   ; Work detect
CON
RES P2                   ; Axis moving
CON
SET P1                   ; MACRO END
CON
ENDS
END
ENDH
