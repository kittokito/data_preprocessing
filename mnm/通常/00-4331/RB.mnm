DEVICE:53
;MODULE:RB
;MODULE_TYPE:0
;SCRIPT_TYPE:
;非常停止時
LDP R46104               ; _非常停止中　ﾓｰﾄﾞﾌﾗｸﾞ
RES MR2100               ; RBC1 EMG STOP(off)
CON
RES MR2101               ; RBC2 EMG STOP(off)
CON
RES MR2102               ; RBC3 EMG STOP(off)
CON
RES MR2103               ; RBC4 EMG STOP(off)
CON
RES MR2104               ; RBC5 EMG STOP(off)
CON
ZRES @R100 @R2915
;RBｱﾗｰﾑｺｰﾄﾞ※IAI仕様
BLD DM10507 #3           ; RB1 状態信号
@SET @MR002
CON
LDA DM10506              ; RB1 ｱﾗｰﾑｺｰﾄﾞ
CON
STA DM20030              ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
BLD DM10515 #3           ; RB2 状態信号
AND= DM20030 #0          ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
@SET @MR002
CON
LDA DM10514              ; RB2 ｱﾗｰﾑｺｰﾄﾞ
CON
STA DM20030              ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
BLD DM10523 #3           ; RB3 状態信号
AND= DM20030 #0          ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
@SET @MR002
CON
LDA DM10522              ; RB3 ｱﾗｰﾑｺｰﾄﾞ
CON
STA DM20030              ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
BLD DM10531 #3           ; RB4 状態信号
AND= DM20030 #0          ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
@SET @MR002
CON
LDA DM10530              ; RB4 ｱﾗｰﾑｺｰﾄﾞ
CON
STA DM20030              ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
BLD DM10539 #3           ; RB5 状態信号
AND= DM20030 #0          ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
@SET @MR002
CON
LDA DM10538              ; RB5 ｱﾗｰﾑｺｰﾄﾞ
CON
STA DM20030              ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
LD @MR002
MPS
AND= $0000 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24096 DM50316        ; RBAlarm
MRD
AND= $0080 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24224 DM50316        ; RBAlarm
MRD
AND= $0082 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24226 DM50316        ; RBAlarm
MRD
AND= $0083 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24227 DM50316        ; RBAlarm
MRD
AND= $0084 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24228 DM50316        ; RBAlarm
MRD
AND= $0085 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24229 DM50316        ; RBAlarm
MRD
AND= $0090 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24230 DM50316        ; RBAlarm
MRD
AND= $0091 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24241 DM50316        ; RBAlarm
MRD
AND= $0092 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24242 DM50316        ; RBAlarm
MRD
AND= $0093 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24243 DM50316        ; RBAlarm
MRD
AND= $00A1 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24257 DM50316        ; RBAlarm
MRD
AND= $00A2 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24258 DM50316        ; RBAlarm
MRD
AND= $00A3 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24259 DM50316        ; RBAlarm
MRD
AND= $00A5 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24261 DM50316        ; RBAlarm
MRD
AND= $00A6 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24262 DM50316        ; RBAlarm
MRD
AND= $00A7 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24263 DM50316        ; RBAlarm
MRD
AND= $00A8 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24264 DM50316        ; RBAlarm
MRD
AND= $00B4 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24276 DM50316        ; RBAlarm
MRD
AND= $00B5 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24277 DM50316        ; RBAlarm
MRD
AND= $00B7 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24279 DM50316        ; RBAlarm
MRD
AND= $00B8 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24280 DM50316        ; RBAlarm
MRD
AND= $00BA DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24282 DM50316        ; RBAlarm
MRD
AND= $00BE DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24286 DM50316        ; RBAlarm
MRD
AND= $00BF DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24287 DM50316        ; RBAlarm
MRD
AND= $00C0 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24288 DM50316        ; RBAlarm
MRD
AND= $00C2 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24290 DM50316        ; RBAlarm
MRD
AND= $00C8 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24296 DM50316        ; RBAlarm
MRD
AND= $00C9 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24297 DM50316        ; RBAlarm
MRD
AND= $00CA DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24298 DM50316        ; RBAlarm
MRD
AND= $00CB DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24299 DM50316        ; RBAlarm
MRD
AND= $00CC DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24300 DM50316        ; RBAlarm
MRD
AND= $00CD DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24301 DM50316        ; RBAlarm
MRD
AND= $00CE DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24302 DM50316        ; RBAlarm
MRD
AND= $00CF DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24303 DM50316        ; RBAlarm
MRD
AND= $00D2 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24306 DM50316        ; RBAlarm
MRD
AND= $00D3 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24307 DM50316        ; RBAlarm
MRD
AND= $00D7 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24311 DM50316        ; RBAlarm
MRD
AND= $00D8 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24312 DM50316        ; RBAlarm
MRD
AND= $00D9 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24313 DM50316        ; RBAlarm
MRD
AND= $00DA DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24314 DM50316        ; RBAlarm
MRD
AND= $00DC DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24316 DM50316        ; RBAlarm
MRD
AND= $00E0 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24320 DM50316        ; RBAlarm
MRD
AND= $00E5 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24325 DM50316        ; RBAlarm
MRD
AND= $00E6 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24326 DM50316        ; RBAlarm
MRD
AND= $00E7 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24327 DM50316        ; RBAlarm
MRD
AND= $00E8 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24328 DM50316        ; RBAlarm
MRD
AND= $00E9 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24329 DM50316        ; RBAlarm
MRD
AND= $00EA DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24330 DM50316        ; RBAlarm
MRD
AND= $00ED DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24333 DM50316        ; RBAlarm
MRD
AND= $00EE DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24334 DM50316        ; RBAlarm
MRD
AND= $00EF DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24335 DM50316        ; RBAlarm
MRD
AND= $00F0 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24336 DM50316        ; RBAlarm
MRD
AND= $00F2 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24338 DM50316        ; RBAlarm
MRD
AND= $00F3 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24339 DM50316        ; RBAlarm
MRD
AND= $00F4 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24340 DM50316        ; RBAlarm
MRD
AND= $00F5 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24341 DM50316        ; RBAlarm
MRD
AND= $00F6 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24342 DM50316        ; RBAlarm
MRD
AND= $00F8 DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24344 DM50316        ; RBAlarm
MRD
AND= $00FA DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24346 DM50316        ; RBAlarm
MRD
AND= $00FB DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24347 DM50316        ; RBAlarm
MRD
AND= $00FC DM20030       ; Error画面RBｱﾗｰﾑｺｰﾄﾞ表示
DW #24348 DM50316        ; RBAlarm
MPP
BANB DM10507 #3          ; RB1 状態信号
RES @MR002
;動作MONITOR
BLDB DM10507 #2          ; RB1 状態信号
BANB DM10515 #2          ; RB2 状態信号
BANB DM10523 #2          ; RB3 状態信号
BANB DM10531 #2          ; RB4 状態信号
BANB DM10539 #2          ; RB5 状態信号
INV
OUT R39900               ; RB動作中
;<h1/>RB Teaching　Dyisplay
;DATA Display
;TYPE D50300.U,D50302-D50304.L,D50406.U,D50307.U,D50312.U,DM50318.U,@DM0-@DM2.U,EM10000.L
;
;DM50318=DM50300-1+(DM50312*100)+#10100 'Position Messag 表示
;
;'DATA表示
;@DM0 = ((D50300-1)*6)+(D50312*600)
;DM50302 = EM10000:(@DM0) 'Position
;DM50306 = EM10004:(@DM0) 'SPEED
;DM50307 = EM10005:(@DM0) 'ACC/DEC
;'D4=((D50300+@DM1-1)*6)+(D50312*600)
;
;IF D3000 = #2150 THEN
;
;
;	IF DM50312 <> D50319-1 THEN    'POSI No.= 1
;	   DM50300 = 1
;	END IF
;	
;IF R39900 = OFF THEN	'MONITOR画面 RB 切り替え
;	DM50312 = DM50319-1
;END IF
;	
;	FOR @DM1 = 0 TO 9
;		@DM2=(((D50300+@DM1)-1)*6)+(D50312*600)			
;  		D50350:(@D1*4) = EM10000:@DM2'point
;		D50352:(@D1*4) = EM10004:@DM2'SPEED
;		D50353:(@D1*4) = EM10005:@DM2'ACC/DCC
;	NEXT
;
;END IF
LD= DM3000 #2150         ; _MainTP　表示中ﾍﾟｰｼﾞNo
NCJ #1000
;TYPE D50300.U,D50302-D50304.L,D50406.U,D50307.U,D50312.U,DM50318.U,@DM0-@DM2.U,EM10000.L
;
;DM50318=DM50300-1+(DM50312*100)+#10100 'Position Messag 表示
;
LD CR2002                ; 常時ON
LDA DM50312              ; RB選択
CON
EXT
CON
MUL.L +100
CON
STA.L @VM0
CON
LDA DM50300              ; Position No
CON
EXT
CON
SUB.L +1
CON
ADD.L @VM0
CON
ADD.L +10100
CON
STA DM50318
;'DATA表示
;
;@DM0 = ((D50300-1)*6)+(D50312*600)
;
LD CR2002                ; 常時ON
LDA DM50312              ; RB選択
CON
EXT
CON
MUL.L +600
CON
STA.L @VM2
CON
LDA DM50300              ; Position No
CON
EXT
CON
SUB.L +1
CON
MUL.L +6
CON
ADD.L @VM2
CON
STA @DM0
;DM50302 = EM10000:(@DM0) 'Position
;
LD CR2002                ; 常時ON
LDA @DM0
CON
EXT
CON
STA.L Z12
CON
MOV.L EM10000:Z12 DM50302; RB1 目標値(下位)1  RB Position Low
;DM50306 = EM10004:(@DM0) 'SPEED
;
LD CR2002                ; 常時ON
LDA @DM0
CON
EXT
CON
STA.L Z12
CON
MOV EM10004:Z12 DM50306  ; RB1 速度1  RB SPEED
;DM50307 = EM10005:(@DM0) 'ACC/DEC
;
LD CR2002                ; 常時ON
LDA @DM0
CON
EXT
CON
STA.L Z12
CON
MOV EM10005:Z12 DM50307  ; RB1 加減速1  RB Acc/Dec
;'D4=((D50300+@DM1-1)*6)+(D50312*600)
;
;IF D3000 = #2150 THEN
;
LD= DM3000 #2150         ; _MainTP　表示中ﾍﾟｰｼﾞNo
NCJ #2000
;	IF DM50312 <> D50319-1 THEN    'POSI No.= 1
;
LD CR2002                ; 常時ON
LDA DM50319
CON
EXT
CON
SUB.L +1
CON
STA.L @VM4
CON
LDA DM50312              ; RB選択
CON
EXT
CON
CMP.L @VM4
LDB CR2010               ; 演算結果がｾﾞﾛ
NCJ #2001
;	   DM50300 = 1
;
LD CR2002                ; 常時ON
MOV #1 DM50300           ; Position No
;	END IF
;
LABEL #2001
;IF R39900 = OFF THEN	'MONITOR画面 RB 切り替え
;
LDB R39900               ; RB動作中
NCJ #2002
;	DM50312 = DM50319-1
;
LD CR2002                ; 常時ON
LDA DM50319
CON
EXT
CON
SUB.L +1
CON
STA DM50312              ; RB選択
;END IF
;
LABEL #2002
;	FOR @DM1 = 0 TO 9
;
LD CR2002                ; 常時ON
MOV #0 @DM1              ; ErrorNo /ERROR_DISP
LABEL #2003
LD> @DM1 #9              ; ErrorNo /ERROR_DISP
CJ #2004
;		@DM2=(((D50300+@DM1)-1)*6)+(D50312*600)			
;
LD CR2002                ; 常時ON
LDA DM50312              ; RB選択
CON
EXT
CON
MUL.L +600
CON
STA.L @VM6
CON
LDA @DM1                 ; ErrorNo /ERROR_DISP
CON
EXT
CON
STA.L @VM8
CON
LDA DM50300              ; Position No
CON
EXT
CON
ADD.L @VM8
CON
SUB.L +1
CON
MUL.L +6
CON
ADD.L @VM6
CON
STA @DM2
;  		D50350:(@D1*4) = EM10000:@DM2'point
;
LD CR2002                ; 常時ON
LDA @DM1                 ; ErrorNo /ERROR_DISP
CON
EXT
CON
MUL.L +4
CON
STA.L Z11
CON
LDA @DM2
CON
EXT
CON
STA.L Z12
CON
MOV EM10000:Z12 DM50350:Z11;RB1 目標値(下位)1  VT Pos NAME
;		D50352:(@D1*4) = EM10004:@DM2'SPEED
;
LD CR2002                ; 常時ON
LDA @DM1                 ; ErrorNo /ERROR_DISP
CON
EXT
CON
MUL.L +4
CON
STA.L Z11
CON
LDA @DM2
CON
EXT
CON
STA.L Z12
CON
MOV EM10004:Z12 DM50352:Z11;RB1 速度1
;		D50353:(@D1*4) = EM10005:@DM2'ACC/DCC
;
LD CR2002                ; 常時ON
LDA @DM1                 ; ErrorNo /ERROR_DISP
CON
EXT
CON
MUL.L +4
CON
STA.L Z11
CON
LDA @DM2
CON
EXT
CON
STA.L Z12
CON
MOV EM10005:Z12 DM50353:Z11;RB1 加減速1
;	NEXT
;
LD CR2002                ; 常時ON
INC @DM1                 ; ErrorNo /ERROR_DISP
LDB CR2009               ; 演算結果が負
CJ #2003
LABEL #2004
;END IF
LABEL #2000
LABEL #1000
;
LDP R44915               ; Teaching End
BMOV EM10000 ZF470 #19200; RB1 目標値(下位)1  RBPOSﾃﾞｰﾀ
SET @R2505
STG @R2505
OUT R45010               ; Memory書き込み開始
CON
TMR @99 #5
CON
AND @T99
ENDS
;DATA Write
;TYPE D50312.U,D50320.L,DM10500.L
;'現在値 表示
;DM50320 = DM10500:((D50312)*8) 'Now Position
LD<= DM3000 #2220        ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND>= DM3000 #2150       ; _MainTP　表示中ﾍﾟｰｼﾞNo
NCJ #1001
;TYPE D50312.U,D50320.L,DM10500.L
;
;'現在値 表示
;
;DM50320 = DM10500:((D50312)*8) 'Now Position
LD CR2002                ; 常時ON
LDA DM50312              ; RB選択
CON
EXT
CON
MUL.L +8
CON
STA.L Z12
CON
MOV.L DM10500:Z12 DM50320; RB1 現在位置(下位)  Now Pos.
LABEL #1001
;
;TYPE D50300.U,D50312.U,@DM0.U,D50320.L,DM10500.L
;'現在値 表示
;DM50320 = DM10500:((D50312)*8) 'Now Position
;
;'DATA 格納
;IF R34000 = 1 THEN
;	@DM0 = ((D50300-1)*6)+(D50312*600)
;	IF R34002 = 1 THEN 
;		EM10000.D:(@DM0) = DM50320.D	'Position
;	    EM10004:(@DM0) = DM50326.U	'SPEED
;        EM10005:(@DM0) = DM50327.U	'ACC/DEC
;    ELSE
;		EM10000.D:(@DM0) = DM50302.D	'Direct Position
;		EM10004:(@DM0) = DM50306.U	'SPEED
;        EM10005:(@DM0) = DM50307.U	'ACC/DEC
;    END IF
;	RES (R34002)
;END IF
LD<= DM3000 #2220        ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND>= DM3000 #2150       ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANP R34002               ; TP_Point GetSW
NCJ #1002
;TYPE D50300.U,D50312.U,@DM0.U,D50320.L,DM10500.L
;
;'現在値 表示
;
;DM50320 = DM10500:((D50312)*8) 'Now Position
;
LD CR2002                ; 常時ON
LDA DM50312              ; RB選択
CON
EXT
CON
MUL.L +8
CON
STA.L Z12
CON
MOV.L DM10500:Z12 DM50320; RB1 現在位置(下位)  Now Pos.
;'DATA 格納
;
;IF R34000 = 1 THEN
;
LD R34000                ; Teaching
NCJ #2005
;	@DM0 = ((D50300-1)*6)+(D50312*600)
;
LD CR2002                ; 常時ON
LDA DM50312              ; RB選択
CON
EXT
CON
MUL.L +600
CON
STA.L @VM10
CON
LDA DM50300              ; Position No
CON
EXT
CON
SUB.L +1
CON
MUL.L +6
CON
ADD.L @VM10
CON
STA @DM0
;	IF R34002 = 1 THEN 
;
LD R34002                ; TP_Point GetSW
NCJ #2006
;		EM10000.D:(@DM0) = DM50320.D	'Position
;
LD CR2002                ; 常時ON
LDA @DM0
CON
EXT
CON
STA.L Z11
CON
MOV.D DM50320 EM10000:Z11; Now Pos.  RB1 目標値(下位)1
;	    EM10004:(@DM0) = DM50326.U	'SPEED
;
LD CR2002                ; 常時ON
LDA @DM0
CON
EXT
CON
STA.L Z11
CON
MOV DM50326 EM10004:Z11  ; RB1 速度1
;        EM10005:(@DM0) = DM50327.U	'ACC/DEC
;
LD CR2002                ; 常時ON
LDA @DM0
CON
EXT
CON
STA.L Z11
CON
MOV DM50327 EM10005:Z11  ; RB1 加減速1
;    ELSE
;
LD CR2002                ; 常時ON
CJ #2007
LABEL #2006
;		EM10000.D:(@DM0) = DM50302.D	'Direct Position
;
LD CR2002                ; 常時ON
LDA @DM0
CON
EXT
CON
STA.L Z11
CON
MOV.D DM50302 EM10000:Z11; RB Position Low  RB1 目標値(下位)1
;		EM10004:(@DM0) = DM50306.U	'SPEED
;
LD CR2002                ; 常時ON
LDA @DM0
CON
EXT
CON
STA.L Z11
CON
MOV DM50306 EM10004:Z11  ; RB SPEED  RB1 速度1
;        EM10005:(@DM0) = DM50307.U	'ACC/DEC
;
LD CR2002                ; 常時ON
LDA @DM0
CON
EXT
CON
STA.L Z11
CON
MOV DM50307 EM10005:Z11  ; RB Acc/Dec  RB1 加減速1
;    END IF
;
LABEL #2007
;	RES (R34002)
;
LD CR2002                ; 常時ON
RES R34002               ; TP_Point GetSW
;END IF
LABEL #2005
LABEL #1002
;
;'Position Edit OffSet
;IF DM20100.U < 1 OR DM20100.U > 32 THEN
;	DM20100.U = 1
;END IF
;
;IF DM20102.U < 1 OR DM20102 > 100 THEN
;	DM20102 = 1
;END IF
;
;DM20104.U = ((DM20100.U - 1 ) * 4)
;DM20106.U = ((DM20100.U - 1) * 600 + (DM20102.U -1) *6)/2
;DM20108.U = (DM20100.U - 1) * 600 + (DM20102.U -1) *6
LD CR2002                ; 常時ON
NCJ #1003
;'Position Edit OffSet
;
;IF DM20100.U < 1 OR DM20100.U > 32 THEN
;
LD< DM20100 #1           ; Edit_ﾛﾎﾞｯﾄNo
OUT @VB00
LD> DM20100 #32          ; Edit_ﾛﾎﾞｯﾄNo
OR @VB00
NCJ #2008
;	DM20100.U = 1
;
LD CR2002                ; 常時ON
MOV #1 DM20100           ; Edit_ﾛﾎﾞｯﾄNo
;END IF
;
LABEL #2008
;IF DM20102.U < 1 OR DM20102 > 100 THEN
;
LD< DM20102 #1           ; Edit_Position_No
OUT @VB01
LD> DM20102 #100         ; Edit_Position_No
OR @VB01
NCJ #2009
;	DM20102 = 1
;
LD CR2002                ; 常時ON
MOV #1 DM20102           ; Edit_Position_No
;END IF
;
LABEL #2009
;DM20104.U = ((DM20100.U - 1 ) * 4)
;
LD CR2002                ; 常時ON
LDA DM20100              ; Edit_ﾛﾎﾞｯﾄNo
CON
EXT
CON
SUB.L +1
CON
MUL.L +4
CON
STA DM20104              ; Edit_ﾛﾎﾞｯﾄ現在位置_OffSet
;DM20106.U = ((DM20100.U - 1) * 600 + (DM20102.U -1) *6)/2
;
LD CR2002                ; 常時ON
LDA DM20102              ; Edit_Position_No
CON
EXT
CON
SUB.L +1
CON
MUL.L +6
CON
STA.L @VM12
CON
LDA DM20100              ; Edit_ﾛﾎﾞｯﾄNo
CON
EXT
CON
SUB.L +1
CON
MUL.L +600
CON
ADD.L @VM12
CON
EXT.L
CON
DIV.L +2
CON
STA DM20106              ; Edit_D_Data_OffSet
;DM20108.U = (DM20100.U - 1) * 600 + (DM20102.U -1) *6
LD CR2002                ; 常時ON
LDA DM20102              ; Edit_Position_No
CON
EXT
CON
SUB.L +1
CON
MUL.L +6
CON
STA.L @VM14
CON
LDA DM20100              ; Edit_ﾛﾎﾞｯﾄNo
CON
EXT
CON
SUB.L +1
CON
MUL.L +600
CON
ADD.L @VM14
CON
STA DM20108              ; Edit_S_Data_OffSet
LABEL #1003
;
;TPSWRB1_ﾏｶﾞｼﾞﾝ取出し一括計算
LD= DM3000 #2204         ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND= DM20100 #1          ; Edit_ﾛﾎﾞｯﾄNo
OUT MR23110              ; RB1選択中(RB編集画面用)
LDP MR23111              ; TPSWRB1_ﾏｶﾞｼﾞﾝ取出し一括計算
ANB @MR003               ; ﾏｶﾞｼﾞﾝ取出し一括計算中
ANB @MR005               ; ﾏｶﾞｼﾞﾝ取出し一括ｺﾋﾟｰ中
AND MR23110              ; RB1選択中(RB編集画面用)
DW #0 @DM3
CON
SET @MR003               ; ﾏｶﾞｼﾞﾝ取出し一括計算中
;'RB1 POS1のﾃﾞｰﾀからPOS2～POS20までの取り出し位置を
;’ﾋﾟｯﾁ6㎜で算出する
;TYPE @DM3.U,@DM4.U
;
;IF @DM3<19 THEN
;@DM4=@DM3*6  
;EM10006.L:@DM4=EM10000.L+(1200*(@DM3+1))
;@DM3=@DM3+1
;END IF
;
;IF @DM3=19 THEN
;SET (CR2002,@MR4)
;END IF
LD @MR003                ; ﾏｶﾞｼﾞﾝ取出し一括計算中
ANB @MR004               ; ﾏｶﾞｼﾞﾝ取出し一括計算終わり
NCJ #1024
;'RB1 POS1のﾃﾞｰﾀからPOS2～POS20までの取り出し位置を
;
;’ﾋﾟｯﾁ6㎜で算出する
;
;TYPE @DM3.U,@DM4.U
;
;IF @DM3<19 THEN
;
LD< @DM3 #19
NCJ #2010
;@DM4=@DM3*6  
;
LD CR2002                ; 常時ON
LDA @DM3
CON
EXT
CON
MUL.L +6
CON
STA @DM4
;EM10006.L:@DM4=EM10000.L+(1200*(@DM3+1))
;
LD CR2002                ; 常時ON
LDA @DM4
CON
EXT
CON
STA.L Z11
CON
LDA @DM3
CON
EXT
CON
ADD.L +1
CON
MUL.L +1200
CON
ADD.L EM10000            ; RB1 目標値(下位)1
CON
STA.L EM10006:Z11        ; RB1 目標値(下位)2
;@DM3=@DM3+1
;
LD CR2002                ; 常時ON
LDA @DM3
CON
EXT
CON
ADD.L +1
CON
STA @DM3
;END IF
;
LABEL #2010
;IF @DM3=19 THEN
;
LD= @DM3 #19
NCJ #2011
;SET (CR2002,@MR4)
;
LD CR2002                ; 常時ON
SET @MR004               ; ﾏｶﾞｼﾞﾝ取出し一括計算終わり
;END IF
LABEL #2011
LABEL #1024
;
LD @MR004                ; ﾏｶﾞｼﾞﾝ取出し一括計算終わり
RES @MR003               ; ﾏｶﾞｼﾞﾝ取出し一括計算中
CON
RES @MR004               ; ﾏｶﾞｼﾞﾝ取出し一括計算終わり
;TPSWRB1_ﾏｶﾞｼﾞﾝ取出し一括ｺﾋﾟｰ(目標値除く)
LDP MR23112              ; TPSWRB1_ﾏｶﾞｼﾞﾝ取出し一括ｺﾋﾟｰ
ANB @MR003               ; ﾏｶﾞｼﾞﾝ取出し一括計算中
ANB @MR005               ; ﾏｶﾞｼﾞﾝ取出し一括ｺﾋﾟｰ中
AND MR23110              ; RB1選択中(RB編集画面用)
DW #0 @DM3
CON
SET @MR005               ; ﾏｶﾞｼﾞﾝ取出し一括ｺﾋﾟｰ中
;'RB1 POS1のﾃﾞｰﾀをPOS2～POS20まで複写する
;'目標位置は含まない
;TYPE @DM3.U,@DM4.U
;
;IF @DM3<19 THEN
;@DM4=@DM3*6  
;EM10008.L:@DM4=EM10002.L
;EM10010.U:@DM4=EM10004.U
;EM10011.U:@DM4=EM10005.U
;@DM3=@DM3+1
;END IF
;
;IF @DM3=19 THEN
;SET (CR2002,@MR6)
;END IF
LD @MR005                ; ﾏｶﾞｼﾞﾝ取出し一括ｺﾋﾟｰ中
ANB @MR006               ; ﾏｶﾞｼﾞﾝ取出し一括ｺﾋﾟｰ終わり
NCJ #1028
;'RB1 POS1のﾃﾞｰﾀをPOS2～POS20まで複写する
;
;'目標位置は含まない
;
;TYPE @DM3.U,@DM4.U
;
;IF @DM3<19 THEN
;
LD< @DM3 #19
NCJ #2012
;@DM4=@DM3*6  
;
LD CR2002                ; 常時ON
LDA @DM3
CON
EXT
CON
MUL.L +6
CON
STA @DM4
;EM10008.L:@DM4=EM10002.L
;
LD CR2002                ; 常時ON
LDA @DM4
CON
EXT
CON
STA.L Z11
CON
MOV.L EM10002 EM10008:Z11; RB1 位置決め幅(下位)1  RB1 位置決め幅(下位)2
;EM10010.U:@DM4=EM10004.U
;
LD CR2002                ; 常時ON
LDA @DM4
CON
EXT
CON
STA.L Z11
CON
MOV EM10004 EM10010:Z11  ; RB1 速度1  RB1 速度2
;EM10011.U:@DM4=EM10005.U
;
LD CR2002                ; 常時ON
LDA @DM4
CON
EXT
CON
STA.L Z11
CON
MOV EM10005 EM10011:Z11  ; RB1 加減速1  RB1 加減速2
;@DM3=@DM3+1
;
LD CR2002                ; 常時ON
LDA @DM3
CON
EXT
CON
ADD.L +1
CON
STA @DM3
;END IF
;
LABEL #2012
;IF @DM3=19 THEN
;
LD= @DM3 #19
NCJ #2013
;SET (CR2002,@MR6)
;
LD CR2002                ; 常時ON
SET @MR006               ; ﾏｶﾞｼﾞﾝ取出し一括ｺﾋﾟｰ終わり
;END IF
LABEL #2013
LABEL #1028
;
LD @MR006                ; ﾏｶﾞｼﾞﾝ取出し一括ｺﾋﾟｰ終わり
RES @MR005               ; ﾏｶﾞｼﾞﾝ取出し一括ｺﾋﾟｰ中
CON
RES @MR006               ; ﾏｶﾞｼﾞﾝ取出し一括ｺﾋﾟｰ終わり
;TPSWRB2_金型ｾｯﾄ一括計算(設計寸法ﾋﾟｯﾁ3.3mmにて算出)
LD= DM3000 #2204         ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND= DM20100 #2          ; Edit_ﾛﾎﾞｯﾄNo
OUT MR23113              ; RB2選択中(RB編集画面用)
LDP MR23114              ; TPSWRB2_金型ｾｯﾄ一括算出
ANB @MR007               ; RB2_金型ｾｯﾄ一括計算中
ANB @MR009               ; RB2_金型ｾｯﾄ一括ｺﾋﾟｰ中
AND MR23113              ; RB2選択中(RB編集画面用)
DW #0 @DM3
CON
SET @MR007               ; RB2_金型ｾｯﾄ一括計算中
;'RB2 POS11の目標位置ﾃﾞｰﾀよりPOS12～POS42の目標位置を
;'ﾋﾟｯﾁ3.3mmで算出する
;TYPE @DM3.U,@DM4.U
;
;IF @DM3<31 THEN
;@DM4=@DM3*6  
;EM10666.L:@DM4=(EM10660.L+(330*(@DM3+1)))
;@DM3=@DM3+1
;END IF
;
;IF @DM3=31 THEN
;SET (CR2002,@MR8)
;END IF
LD @MR007                ; RB2_金型ｾｯﾄ一括計算中
ANB @MR008               ; RB2_金型ｾｯﾄ一括計算終わり
NCJ #1026
;'RB2 POS11の目標位置ﾃﾞｰﾀよりPOS12～POS42の目標位置を
;
;'ﾋﾟｯﾁ3.3mmで算出する
;
;TYPE @DM3.U,@DM4.U
;
;IF @DM3<31 THEN
;
LD< @DM3 #31
NCJ #2014
;@DM4=@DM3*6  
;
LD CR2002                ; 常時ON
LDA @DM3
CON
EXT
CON
MUL.L +6
CON
STA @DM4
;EM10666.L:@DM4=(EM10660.L+(330*(@DM3+1)))
;
LD CR2002                ; 常時ON
LDA @DM4
CON
EXT
CON
STA.L Z11
CON
LDA @DM3
CON
EXT
CON
ADD.L +1
CON
MUL.L +330
CON
ADD.L EM10660            ; RB2 目標値(下位)11
CON
STA.L EM10666:Z11        ; RB2 目標値(下位)12
;@DM3=@DM3+1
;
LD CR2002                ; 常時ON
LDA @DM3
CON
EXT
CON
ADD.L +1
CON
STA @DM3
;END IF
;
LABEL #2014
;IF @DM3=31 THEN
;
LD= @DM3 #31
NCJ #2015
;SET (CR2002,@MR8)
;
LD CR2002                ; 常時ON
SET @MR008               ; RB2_金型ｾｯﾄ一括計算終わり
;END IF
LABEL #2015
LABEL #1026
;
LD @MR008                ; RB2_金型ｾｯﾄ一括計算終わり
RES @MR007               ; RB2_金型ｾｯﾄ一括計算中
CON
RES @MR008               ; RB2_金型ｾｯﾄ一括計算終わり
;TPSWRB2_金型ｾｯﾄ一括ｺﾋﾟｰ(目標位置は除く)
LDP MR23115              ; TPSWRB2_金型ｾｯﾄ一括ｺﾋﾟｰ
ANB @MR007               ; RB2_金型ｾｯﾄ一括計算中
ANB @MR009               ; RB2_金型ｾｯﾄ一括ｺﾋﾟｰ中
AND MR23113              ; RB2選択中(RB編集画面用)
DW #0 @DM3
CON
SET @MR009               ; RB2_金型ｾｯﾄ一括ｺﾋﾟｰ中
;'RB2 POS11のﾃﾞｰﾀをPOS12～POS42まで複写する
;'目標位置は含まない
;TYPE @DM3.U,@DM4.U
;
;IF @DM3<31 THEN
;@DM4=@DM3*6  
;EM10668.L:@DM4=EM10662.L
;EM10670.U:@DM4=EM10664.U
;EM10671.U:@DM4=EM10665.U
;@DM3=@DM3+1
;END IF
;
;IF @DM3=31 THEN
;SET (CR2002,@MR10)
;END IF
LD @MR009                ; RB2_金型ｾｯﾄ一括ｺﾋﾟｰ中
ANB @MR010               ; RB2_金型ｾｯﾄ一括ｺﾋﾟｰ終わり
NCJ #1025
;'RB2 POS11のﾃﾞｰﾀをPOS12～POS42まで複写する
;
;'目標位置は含まない
;
;TYPE @DM3.U,@DM4.U
;
;IF @DM3<31 THEN
;
LD< @DM3 #31
NCJ #2016
;@DM4=@DM3*6  
;
LD CR2002                ; 常時ON
LDA @DM3
CON
EXT
CON
MUL.L +6
CON
STA @DM4
;EM10668.L:@DM4=EM10662.L
;
LD CR2002                ; 常時ON
LDA @DM4
CON
EXT
CON
STA.L Z11
CON
MOV.L EM10662 EM10668:Z11; RB2 位置決め幅(下位)11  RB2 位置決め幅(下位)12
;EM10670.U:@DM4=EM10664.U
;
LD CR2002                ; 常時ON
LDA @DM4
CON
EXT
CON
STA.L Z11
CON
MOV EM10664 EM10670:Z11  ; RB2 速度11  RB2 速度12
;EM10671.U:@DM4=EM10665.U
;
LD CR2002                ; 常時ON
LDA @DM4
CON
EXT
CON
STA.L Z11
CON
MOV EM10665 EM10671:Z11  ; RB2 加減速11  RB2 加減速12
;@DM3=@DM3+1
;
LD CR2002                ; 常時ON
LDA @DM3
CON
EXT
CON
ADD.L +1
CON
STA @DM3
;END IF
;
LABEL #2016
;IF @DM3=31 THEN
;
LD= @DM3 #31
NCJ #2017
;SET (CR2002,@MR10)
;
LD CR2002                ; 常時ON
SET @MR010               ; RB2_金型ｾｯﾄ一括ｺﾋﾟｰ終わり
;END IF
LABEL #2017
LABEL #1025
;
LD @MR010                ; RB2_金型ｾｯﾄ一括ｺﾋﾟｰ終わり
RES @MR009               ; RB2_金型ｾｯﾄ一括ｺﾋﾟｰ中
CON
RES @MR010               ; RB2_金型ｾｯﾄ一括ｺﾋﾟｰ終わり
;TPSWRB3_金型ｾｯﾄ一括ｺﾋﾟｰ
LD= DM3000 #2204         ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND= DM20100 #3          ; Edit_ﾛﾎﾞｯﾄNo
OUT MR23200              ; RB3選択中(RB編集画面用)
LDP MR23201              ; TPSWRB3_金型ｾｯﾄ一括ｺﾋﾟｰ
ANB @MR011               ; RB3_金型ｾｯﾄ一括ｺﾋﾟｰ中
AND MR23200              ; RB3選択中(RB編集画面用)
DW #0 @DM3
CON
SET @MR011               ; RB3_金型ｾｯﾄ一括ｺﾋﾟｰ中
;'RB3 POS11のﾃﾞｰﾀをPOS12～POS42まで複写する
;TYPE @DM3.U,@DM4.U
;
;IF @DM3<31 THEN
;@DM4=@DM3*6  
;EM11266.L:@DM4=EM11260.L
;EM11268.L:@DM4=EM11262.L
;EM11270.U:@DM4=EM11264.U
;EM11271.U:@DM4=EM11265.U
;@DM3=@DM3+1
;END IF
;
;IF @DM3=31 THEN
;SET (CR2002,@MR12)
;END IF
LD @MR011                ; RB3_金型ｾｯﾄ一括ｺﾋﾟｰ中
ANB @MR012               ; RB3_金型ｾｯﾄ一括ｺﾋﾟｰ終わり
NCJ #1027
;'RB3 POS11のﾃﾞｰﾀをPOS12～POS42まで複写する
;
;TYPE @DM3.U,@DM4.U
;
;IF @DM3<31 THEN
;
LD< @DM3 #31
NCJ #2018
;@DM4=@DM3*6  
;
LD CR2002                ; 常時ON
LDA @DM3
CON
EXT
CON
MUL.L +6
CON
STA @DM4
;EM11266.L:@DM4=EM11260.L
;
LD CR2002                ; 常時ON
LDA @DM4
CON
EXT
CON
STA.L Z11
CON
MOV.L EM11260 EM11266:Z11; RB3 目標値(下位)11  RB3 目標値(下位)12
;EM11268.L:@DM4=EM11262.L
;
LD CR2002                ; 常時ON
LDA @DM4
CON
EXT
CON
STA.L Z11
CON
MOV.L EM11262 EM11268:Z11; RB3 位置決め幅(下位)11  RB3 位置決め幅(下位)12
;EM11270.U:@DM4=EM11264.U
;
LD CR2002                ; 常時ON
LDA @DM4
CON
EXT
CON
STA.L Z11
CON
MOV EM11264 EM11270:Z11  ; RB3 速度11  RB3 速度12
;EM11271.U:@DM4=EM11265.U
;
LD CR2002                ; 常時ON
LDA @DM4
CON
EXT
CON
STA.L Z11
CON
MOV EM11265 EM11271:Z11  ; RB3 加減速11  RB3 加減速12
;@DM3=@DM3+1
;
LD CR2002                ; 常時ON
LDA @DM3
CON
EXT
CON
ADD.L +1
CON
STA @DM3
;END IF
;
LABEL #2018
;IF @DM3=31 THEN
;
LD= @DM3 #31
NCJ #2019
;SET (CR2002,@MR12)
;
LD CR2002                ; 常時ON
SET @MR012               ; RB3_金型ｾｯﾄ一括ｺﾋﾟｰ終わり
;END IF
LABEL #2019
LABEL #1027
;
LD @MR012                ; RB3_金型ｾｯﾄ一括ｺﾋﾟｰ終わり
RES @MR011               ; RB3_金型ｾｯﾄ一括ｺﾋﾟｰ中
CON
RES @MR012               ; RB3_金型ｾｯﾄ一括ｺﾋﾟｰ終わり
;TPSWRB5_画像検査一括計算(設計寸法ﾋﾟｯﾁ6.6mmにて算出)
LD= DM3000 #2204         ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND= DM20100 #5          ; Edit_ﾛﾎﾞｯﾄNo
OUT MR23202              ; RB5選択中(RB編集画面用)
LDP MR23203              ; TPSWRB5_画像検査一括算出
ANB @MR013               ; 画像検査一括計算中
ANB @MR015               ; 画像検査一括ｺﾋﾟｰ中
AND MR23202              ; RB5選択中(RB編集画面用)
DW #0 @DM3
CON
SET @MR013               ; 画像検査一括計算中
;'RB5 POS11の目標位置ﾃﾞｰﾀよりPOS12～POS22の目標位置を
;'ﾋﾟｯﾁ6.6mmで算出する
;TYPE @DM3.U,@DM4.U
;
;IF @DM3<=2 THEN
;@DM4=@DM3*6  
;EM12466.L:@DM4=EM12460.L-(660*(@DM3+1))
;@DM3=@DM3+1
;
;'5個目からは追加で1ﾋﾟｯﾁずれる(1個目基準)
;ELSE IF @DM3>=3 AND @DM3<=6 THEN
;@DM4=@DM3*6  
;EM12466.L:@DM4=EM12460.L-(660*(@DM3+2))
;@DM3=@DM3+1
;
;
;'8個目からは追加で2ﾋﾟｯﾁずれる(1個目基準)
;ELSE IF @DM3>=7  THEN
;@DM4=@DM3*6  
;EM12466.L:@DM4=EM12460.L-(660*(@DM3+3))
;@DM3=@DM3+1
;END IF
;
;IF @DM3=11 THEN
;SET (CR2002,@MR14)
;END IF
LD @MR013                ; 画像検査一括計算中
ANB @MR014               ; 画像検査一括計算終わり
NCJ #1029
;'RB5 POS11の目標位置ﾃﾞｰﾀよりPOS12～POS22の目標位置を
;
;'ﾋﾟｯﾁ6.6mmで算出する
;
;TYPE @DM3.U,@DM4.U
;
;IF @DM3<=2 THEN
;
LD<= @DM3 #2
NCJ #2020
;@DM4=@DM3*6  
;
LD CR2002                ; 常時ON
LDA @DM3
CON
EXT
CON
MUL.L +6
CON
STA @DM4
;EM12466.L:@DM4=EM12460.L-(660*(@DM3+1))
;
LD CR2002                ; 常時ON
LDA @DM4
CON
EXT
CON
STA.L Z11
CON
LDA @DM3
CON
EXT
CON
ADD.L +1
CON
MUL.L +660
CON
STA.L @VM16
CON
LDA.L EM12460            ; RB5 目標値(下位)11
CON
SUB.L @VM16
CON
STA.L EM12466:Z11        ; RB5 目標値(下位)12
;@DM3=@DM3+1
;
LD CR2002                ; 常時ON
LDA @DM3
CON
EXT
CON
ADD.L +1
CON
STA @DM3
;'5個目からは追加で1ﾋﾟｯﾁずれる(1個目基準)
;
LD CR2002                ; 常時ON
CJ #2021
LABEL #2020
;ELSE IF @DM3>=3 AND @DM3<=6 THEN
;
LD>= @DM3 #3
OUT @VB02
LD<= @DM3 #6
AND @VB02
NCJ #2022
;@DM4=@DM3*6  
;
LD CR2002                ; 常時ON
LDA @DM3
CON
EXT
CON
MUL.L +6
CON
STA @DM4
;EM12466.L:@DM4=EM12460.L-(660*(@DM3+2))
;
LD CR2002                ; 常時ON
LDA @DM4
CON
EXT
CON
STA.L Z11
CON
LDA @DM3
CON
EXT
CON
ADD.L +2
CON
MUL.L +660
CON
STA.L @VM18
CON
LDA.L EM12460            ; RB5 目標値(下位)11
CON
SUB.L @VM18
CON
STA.L EM12466:Z11        ; RB5 目標値(下位)12
;@DM3=@DM3+1
;
LD CR2002                ; 常時ON
LDA @DM3
CON
EXT
CON
ADD.L +1
CON
STA @DM3
;'8個目からは追加で2ﾋﾟｯﾁずれる(1個目基準)
;
LD CR2002                ; 常時ON
CJ #2023
LABEL #2022
;ELSE IF @DM3>=7  THEN
;
LD>= @DM3 #7
NCJ #2024
;@DM4=@DM3*6  
;
LD CR2002                ; 常時ON
LDA @DM3
CON
EXT
CON
MUL.L +6
CON
STA @DM4
;EM12466.L:@DM4=EM12460.L-(660*(@DM3+3))
;
LD CR2002                ; 常時ON
LDA @DM4
CON
EXT
CON
STA.L Z11
CON
LDA @DM3
CON
EXT
CON
ADD.L +3
CON
MUL.L +660
CON
STA.L @VM20
CON
LDA.L EM12460            ; RB5 目標値(下位)11
CON
SUB.L @VM20
CON
STA.L EM12466:Z11        ; RB5 目標値(下位)12
;@DM3=@DM3+1
;
LD CR2002                ; 常時ON
LDA @DM3
CON
EXT
CON
ADD.L +1
CON
STA @DM3
;END IF
;
LABEL #2024
LABEL #2023
LABEL #2021
;IF @DM3=11 THEN
;
LD= @DM3 #11
NCJ #2025
;SET (CR2002,@MR14)
;
LD CR2002                ; 常時ON
SET @MR014               ; 画像検査一括計算終わり
;END IF
LABEL #2025
LABEL #1029
;
LD @MR014                ; 画像検査一括計算終わり
RES @MR013               ; 画像検査一括計算中
CON
RES @MR014               ; 画像検査一括計算終わり
;TPSWRB5_画像検査一括ｺﾋﾟｰ(目標位置は除く)
LDP MR23204              ; TPSWRB5_画像検査一括ｺﾋﾟｰ
ANB @MR013               ; 画像検査一括計算中
ANB @MR015               ; 画像検査一括ｺﾋﾟｰ中
AND MR23202              ; RB5選択中(RB編集画面用)
DW #0 @DM3
CON
SET @MR015               ; 画像検査一括ｺﾋﾟｰ中
;'RB5 POS11のﾃﾞｰﾀをPOS12～POS22まで複写する
;'目標位置は含まない
;TYPE @DM3.U,@DM4.U
;
;IF @DM3<11 THEN
;@DM4=@DM3*6  
;EM12468.L:@DM4=EM12462.L
;EM12470.U:@DM4=EM12464.U
;EM12471.U:@DM4=EM12465.U
;@DM3=@DM3+1
;END IF
;
;IF @DM3=11 THEN
;SET (CR2002,@MR100)
;END IF
LD @MR015                ; 画像検査一括ｺﾋﾟｰ中
ANB @MR100               ; 画像検査一括ｺﾋﾟｰ終わり
NCJ #1030
;'RB5 POS11のﾃﾞｰﾀをPOS12～POS22まで複写する
;
;'目標位置は含まない
;
;TYPE @DM3.U,@DM4.U
;
;IF @DM3<11 THEN
;
LD< @DM3 #11
NCJ #2026
;@DM4=@DM3*6  
;
LD CR2002                ; 常時ON
LDA @DM3
CON
EXT
CON
MUL.L +6
CON
STA @DM4
;EM12468.L:@DM4=EM12462.L
;
LD CR2002                ; 常時ON
LDA @DM4
CON
EXT
CON
STA.L Z11
CON
MOV.L EM12462 EM12468:Z11; RB5 位置決め幅(下位)11  RB5 位置決め幅(下位)12
;EM12470.U:@DM4=EM12464.U
;
LD CR2002                ; 常時ON
LDA @DM4
CON
EXT
CON
STA.L Z11
CON
MOV EM12464 EM12470:Z11  ; RB5 速度11  RB5 速度12
;EM12471.U:@DM4=EM12465.U
;
LD CR2002                ; 常時ON
LDA @DM4
CON
EXT
CON
STA.L Z11
CON
MOV EM12465 EM12471:Z11  ; RB5 加減速11  RB5 加減速12
;@DM3=@DM3+1
;
LD CR2002                ; 常時ON
LDA @DM3
CON
EXT
CON
ADD.L +1
CON
STA @DM3
;END IF
;
LABEL #2026
;IF @DM3=11 THEN
;
LD= @DM3 #11
NCJ #2027
;SET (CR2002,@MR100)
;
LD CR2002                ; 常時ON
SET @MR100               ; 画像検査一括ｺﾋﾟｰ終わり
;END IF
LABEL #2027
LABEL #1030
;
LD @MR100                ; 画像検査一括ｺﾋﾟｰ終わり
RES @MR015               ; 画像検査一括ｺﾋﾟｰ中
CON
RES @MR100               ; 画像検査一括ｺﾋﾟｰ終わり
;<h1/>Panel Control
;RB1 ﾏｶﾞｼﾞﾝ上下 SW名称
;移動方向カーソル設定
;1=通常X 2=ﾘﾊﾞｰｽX 3通常Y,Z 4ﾘﾊﾞｰｽY,Z
;RB1 SW名称
LD= DM50312 #0           ; RB選択
AND R34000               ; Teaching
BRES DM50317 #1          ; RB Cursor type 表示
CON
BRES DM50317 #2          ; RB Cursor type 表示
CON
BRES DM50317 #3          ; RB Cursor type 表示
CON
BRES DM50317 #4          ; RB Cursor type 表示
CON
BSET DM50317 #15         ; RB Cursor type 表示
CON
BRES DM50317 #15         ; RB Cursor type 表示
CON
BSET DM50317 #3          ; RB Cursor type 表示
;'SW名称
;'2200:前進 2201:後退 2202:上昇 2203:下降 
;'2204:ON   2205:OFF  2206:開   2207:閉
;DM1940 = 2207 'ｼﾘﾝﾀﾞ1_SW1名称
;DM1941 = 2206 'ｼﾘﾝﾀﾞ1_SW2名称
;DM1942 = 2200 'ｼﾘﾝﾀﾞ2_SW1名称
;DM1943 = 2201 'ｼﾘﾝﾀﾞ2_SW2名称
;DM1944 = 0 'ｼﾘﾝﾀﾞ3_SW1名称
;DM1945 = 0 'ｼﾘﾝﾀﾞ3_SW2名称
;DM1946 = 0 'ｼﾘﾝﾀﾞ4_SW1名称
;DM1947 = 0 'ｼﾘﾝﾀﾞ4_SW2名称
;
LD= DM50312 #0           ; RB選択
NCJ #1004
;'SW名称
;
;'2200:前進 2201:後退 2202:上昇 2203:下降 
;
;'2204:ON   2205:OFF  2206:開   2207:閉
;
;DM1940 = 2207 'ｼﾘﾝﾀﾞ1_SW1名称
;
LD CR2002                ; 常時ON
MOV #2207 DM1940         ; SWﾒｯｾｰｼﾞ0
;DM1941 = 2206 'ｼﾘﾝﾀﾞ1_SW2名称
;
LD CR2002                ; 常時ON
MOV #2206 DM1941         ; SWﾒｯｾｰｼﾞ1
;DM1942 = 2200 'ｼﾘﾝﾀﾞ2_SW1名称
;
LD CR2002                ; 常時ON
MOV #2200 DM1942         ; SWﾒｯｾｰｼﾞ2
;DM1943 = 2201 'ｼﾘﾝﾀﾞ2_SW2名称
;
LD CR2002                ; 常時ON
MOV #2201 DM1943         ; SWﾒｯｾｰｼﾞ3
;DM1944 = 0 'ｼﾘﾝﾀﾞ3_SW1名称
;
LD CR2002                ; 常時ON
MOV #0 DM1944            ; SWﾒｯｾｰｼﾞ4
;DM1945 = 0 'ｼﾘﾝﾀﾞ3_SW2名称
;
LD CR2002                ; 常時ON
MOV #0 DM1945            ; SWﾒｯｾｰｼﾞ5
;DM1946 = 0 'ｼﾘﾝﾀﾞ4_SW1名称
;
LD CR2002                ; 常時ON
MOV #0 DM1946            ; SWﾒｯｾｰｼﾞ6
;DM1947 = 0 'ｼﾘﾝﾀﾞ4_SW2名称
;
LD CR2002                ; 常時ON
MOV #0 DM1947            ; SWﾒｯｾｰｼﾞ7
LABEL #1004
;
;'ｼﾘﾝﾀﾞ名称
;DM1950 = 2220 'ｼﾘﾝﾀﾞ1_名称
;DM1951 = 2221 'ｼﾘﾝﾀﾞ2_名称
;DM1952 = 0 'ｼﾘﾝﾀﾞ3_名称
;DM1953 = 0 'ｼﾘﾝﾀﾞ4_名称
;
LD= DM50312 #0           ; RB選択
NCJ #1005
;'ｼﾘﾝﾀﾞ名称
;
;DM1950 = 2220 'ｼﾘﾝﾀﾞ1_名称
;
LD CR2002                ; 常時ON
MOV #2220 DM1950         ; Cylinder0
;DM1951 = 2221 'ｼﾘﾝﾀﾞ2_名称
;
LD CR2002                ; 常時ON
MOV #2221 DM1951         ; Cylinder1
;DM1952 = 0 'ｼﾘﾝﾀﾞ3_名称
;
LD CR2002                ; 常時ON
MOV #0 DM1952            ; Cylinder2
;DM1953 = 0 'ｼﾘﾝﾀﾞ4_名称
;
LD CR2002                ; 常時ON
MOV #0 DM1953            ; Cylinder3
LABEL #1005
;
;RB2 大々判搬送X SW名称
;移動方向ｶｰｿﾙ設定
;1=通常X 2=ﾘﾊﾞｰｽX 3通常Y,Z 4ﾘﾊﾞｰｽY,Z
LD= DM50312 #1           ; RB選択
AND R34000               ; Teaching
BRES DM50317 #1          ; RB Cursor type 表示
CON
BRES DM50317 #2          ; RB Cursor type 表示
CON
BRES DM50317 #3          ; RB Cursor type 表示
CON
BRES DM50317 #4          ; RB Cursor type 表示
CON
BSET DM50317 #15         ; RB Cursor type 表示
CON
BRES DM50317 #15         ; RB Cursor type 表示
CON
BSET DM50317 #1          ; RB Cursor type 表示
;'SW名称
;'2200:前進 2201:後退 2202:上昇 2203:下降 
;'2204:ON   2205:OFF  2206:開   2207:閉
;DM1940 = 2201 'ｼﾘﾝﾀﾞ1_SW1名称
;DM1941 = 2200 'ｼﾘﾝﾀﾞ1_SW2名称
;DM1942 = 2202 'ｼﾘﾝﾀﾞ2_SW1名称
;DM1943 = 2203 'ｼﾘﾝﾀﾞ2_SW2名称
;DM1944 = 0 'ｼﾘﾝﾀﾞ3_SW1名称
;DM1945 = 0 'ｼﾘﾝﾀﾞ3_SW2名称
;DM1946 = 0 'ｼﾘﾝﾀﾞ4_SW1名称
;DM1947 = 0 'ｼﾘﾝﾀﾞ4_SW2名称
;
LD= DM50312 #1           ; RB選択
NCJ #1006
;'SW名称
;
;'2200:前進 2201:後退 2202:上昇 2203:下降 
;
;'2204:ON   2205:OFF  2206:開   2207:閉
;
;DM1940 = 2201 'ｼﾘﾝﾀﾞ1_SW1名称
;
LD CR2002                ; 常時ON
MOV #2201 DM1940         ; SWﾒｯｾｰｼﾞ0
;DM1941 = 2200 'ｼﾘﾝﾀﾞ1_SW2名称
;
LD CR2002                ; 常時ON
MOV #2200 DM1941         ; SWﾒｯｾｰｼﾞ1
;DM1942 = 2202 'ｼﾘﾝﾀﾞ2_SW1名称
;
LD CR2002                ; 常時ON
MOV #2202 DM1942         ; SWﾒｯｾｰｼﾞ2
;DM1943 = 2203 'ｼﾘﾝﾀﾞ2_SW2名称
;
LD CR2002                ; 常時ON
MOV #2203 DM1943         ; SWﾒｯｾｰｼﾞ3
;DM1944 = 0 'ｼﾘﾝﾀﾞ3_SW1名称
;
LD CR2002                ; 常時ON
MOV #0 DM1944            ; SWﾒｯｾｰｼﾞ4
;DM1945 = 0 'ｼﾘﾝﾀﾞ3_SW2名称
;
LD CR2002                ; 常時ON
MOV #0 DM1945            ; SWﾒｯｾｰｼﾞ5
;DM1946 = 0 'ｼﾘﾝﾀﾞ4_SW1名称
;
LD CR2002                ; 常時ON
MOV #0 DM1946            ; SWﾒｯｾｰｼﾞ6
;DM1947 = 0 'ｼﾘﾝﾀﾞ4_SW2名称
;
LD CR2002                ; 常時ON
MOV #0 DM1947            ; SWﾒｯｾｰｼﾞ7
LABEL #1006
;
;'ｼﾘﾝﾀﾞ名称
;DM1950 = 2222 'ｼﾘﾝﾀﾞ1_名称
;DM1951 = 2223 'ｼﾘﾝﾀﾞ2_名称
;DM1952 = 0 'ｼﾘﾝﾀﾞ3_名称
;DM1953 = 0 'ｼﾘﾝﾀﾞ4_名称
;
LD= DM50312 #1           ; RB選択
NCJ #1007
;'ｼﾘﾝﾀﾞ名称
;
;DM1950 = 2222 'ｼﾘﾝﾀﾞ1_名称
;
LD CR2002                ; 常時ON
MOV #2222 DM1950         ; Cylinder0
;DM1951 = 2223 'ｼﾘﾝﾀﾞ2_名称
;
LD CR2002                ; 常時ON
MOV #2223 DM1951         ; Cylinder1
;DM1952 = 0 'ｼﾘﾝﾀﾞ3_名称
;
LD CR2002                ; 常時ON
MOV #0 DM1952            ; Cylinder2
;DM1953 = 0 'ｼﾘﾝﾀﾞ4_名称
;
LD CR2002                ; 常時ON
MOV #0 DM1953            ; Cylinder3
LABEL #1007
;
;RB3 大々判搬送Z SW名称
;移動方向ｶｰｿﾙ設定
;1=通常X 2=ﾘﾊﾞｰｽX 3通常Y,Z 4ﾘﾊﾞｰｽY,Z
LD= DM50312 #2           ; RB選択
AND R34000               ; Teaching
BRES DM50317 #1          ; RB Cursor type 表示
CON
BRES DM50317 #2          ; RB Cursor type 表示
CON
BRES DM50317 #3          ; RB Cursor type 表示
CON
BRES DM50317 #4          ; RB Cursor type 表示
CON
BSET DM50317 #15         ; RB Cursor type 表示
CON
BRES DM50317 #15         ; RB Cursor type 表示
CON
BSET DM50317 #4          ; RB Cursor type 表示
;'SW名称
;'2200:前進 2201:後退 2202:上昇 2203:下降 
;'2204:ON   2205:OFF  2206:開   2207:閉
;DM1940 = 2201 'ｼﾘﾝﾀﾞ1_SW1名称
;DM1941 = 2200 'ｼﾘﾝﾀﾞ1_SW2名称
;DM1942 = 0 'ｼﾘﾝﾀﾞ2_SW1名称
;DM1943 = 0 'ｼﾘﾝﾀﾞ2_SW2名称
;DM1944 = 0 'ｼﾘﾝﾀﾞ3_SW1名称
;DM1945 = 0 'ｼﾘﾝﾀﾞ3_SW2名称
;DM1946 = 0 'ｼﾘﾝﾀﾞ4_SW1名称
;DM1947 = 0 'ｼﾘﾝﾀﾞ4_SW2名称
LD= DM50312 #2           ; RB選択
NCJ #1008
;'SW名称
;
;'2200:前進 2201:後退 2202:上昇 2203:下降 
;
;'2204:ON   2205:OFF  2206:開   2207:閉
;
;DM1940 = 2201 'ｼﾘﾝﾀﾞ1_SW1名称
;
LD CR2002                ; 常時ON
MOV #2201 DM1940         ; SWﾒｯｾｰｼﾞ0
;DM1941 = 2200 'ｼﾘﾝﾀﾞ1_SW2名称
;
LD CR2002                ; 常時ON
MOV #2200 DM1941         ; SWﾒｯｾｰｼﾞ1
;DM1942 = 0 'ｼﾘﾝﾀﾞ2_SW1名称
;
LD CR2002                ; 常時ON
MOV #0 DM1942            ; SWﾒｯｾｰｼﾞ2
;DM1943 = 0 'ｼﾘﾝﾀﾞ2_SW2名称
;
LD CR2002                ; 常時ON
MOV #0 DM1943            ; SWﾒｯｾｰｼﾞ3
;DM1944 = 0 'ｼﾘﾝﾀﾞ3_SW1名称
;
LD CR2002                ; 常時ON
MOV #0 DM1944            ; SWﾒｯｾｰｼﾞ4
;DM1945 = 0 'ｼﾘﾝﾀﾞ3_SW2名称
;
LD CR2002                ; 常時ON
MOV #0 DM1945            ; SWﾒｯｾｰｼﾞ5
;DM1946 = 0 'ｼﾘﾝﾀﾞ4_SW1名称
;
LD CR2002                ; 常時ON
MOV #0 DM1946            ; SWﾒｯｾｰｼﾞ6
;DM1947 = 0 'ｼﾘﾝﾀﾞ4_SW2名称
LD CR2002                ; 常時ON
MOV #0 DM1947            ; SWﾒｯｾｰｼﾞ7
LABEL #1008
;
;'ｼﾘﾝﾀﾞ名称
;DM1950 = 2222 'ｼﾘﾝﾀﾞ1_名称
;DM1951 = 0 'ｼﾘﾝﾀﾞ2_名称
;DM1952 = 0 'ｼﾘﾝﾀﾞ3_名称
;DM1953 = 0 'ｼﾘﾝﾀﾞ4_名称
;
LD= DM50312 #2           ; RB選択
NCJ #1009
;'ｼﾘﾝﾀﾞ名称
;
;DM1950 = 2222 'ｼﾘﾝﾀﾞ1_名称
;
LD CR2002                ; 常時ON
MOV #2222 DM1950         ; Cylinder0
;DM1951 = 0 'ｼﾘﾝﾀﾞ2_名称
;
LD CR2002                ; 常時ON
MOV #0 DM1951            ; Cylinder1
;DM1952 = 0 'ｼﾘﾝﾀﾞ3_名称
;
LD CR2002                ; 常時ON
MOV #0 DM1952            ; Cylinder2
;DM1953 = 0 'ｼﾘﾝﾀﾞ4_名称
;
LD CR2002                ; 常時ON
MOV #0 DM1953            ; Cylinder3
LABEL #1009
;
;RB4 ﾌﾟﾚｽｸﾘｰﾆﾝｸﾞ SW名称
;移動方向ｶｰｿﾙ設定
;1=通常X 2=ﾘﾊﾞｰｽX 3通常Y,Z 4ﾘﾊﾞｰｽY,Z
LD= DM50312 #3           ; RB選択
AND R34000               ; Teaching
BRES DM50317 #1          ; RB Cursor type 表示
CON
BRES DM50317 #2          ; RB Cursor type 表示
CON
BRES DM50317 #3          ; RB Cursor type 表示
CON
BRES DM50317 #4          ; RB Cursor type 表示
CON
BSET DM50317 #15         ; RB Cursor type 表示
CON
BRES DM50317 #15         ; RB Cursor type 表示
CON
BSET DM50317 #1          ; RB Cursor type 表示
;'SW名称
;'2200:前進 2201:後退 2202:上昇 2203:下降 
;'2204:ON   2205:OFF  2206:開   2207:閉
;DM1940 = 0 'ｼﾘﾝﾀﾞ1_SW1名称
;DM1941 = 0 'ｼﾘﾝﾀﾞ1_SW2名称
;DM1942 = 0 'ｼﾘﾝﾀﾞ2_SW1名称
;DM1943 = 0 'ｼﾘﾝﾀﾞ2_SW2名称
;DM1944 = 0 'ｼﾘﾝﾀﾞ3_SW1名称
;DM1945 = 0 'ｼﾘﾝﾀﾞ3_SW2名称
;DM1946 = 0 'ｼﾘﾝﾀﾞ4_SW1名称
;DM1947 = 0 'ｼﾘﾝﾀﾞ4_SW2名称
;
LD= DM50312 #3           ; RB選択
NCJ #1010
;'SW名称
;
;'2200:前進 2201:後退 2202:上昇 2203:下降 
;
;'2204:ON   2205:OFF  2206:開   2207:閉
;
;DM1940 = 0 'ｼﾘﾝﾀﾞ1_SW1名称
;
LD CR2002                ; 常時ON
MOV #0 DM1940            ; SWﾒｯｾｰｼﾞ0
;DM1941 = 0 'ｼﾘﾝﾀﾞ1_SW2名称
;
LD CR2002                ; 常時ON
MOV #0 DM1941            ; SWﾒｯｾｰｼﾞ1
;DM1942 = 0 'ｼﾘﾝﾀﾞ2_SW1名称
;
LD CR2002                ; 常時ON
MOV #0 DM1942            ; SWﾒｯｾｰｼﾞ2
;DM1943 = 0 'ｼﾘﾝﾀﾞ2_SW2名称
;
LD CR2002                ; 常時ON
MOV #0 DM1943            ; SWﾒｯｾｰｼﾞ3
;DM1944 = 0 'ｼﾘﾝﾀﾞ3_SW1名称
;
LD CR2002                ; 常時ON
MOV #0 DM1944            ; SWﾒｯｾｰｼﾞ4
;DM1945 = 0 'ｼﾘﾝﾀﾞ3_SW2名称
;
LD CR2002                ; 常時ON
MOV #0 DM1945            ; SWﾒｯｾｰｼﾞ5
;DM1946 = 0 'ｼﾘﾝﾀﾞ4_SW1名称
;
LD CR2002                ; 常時ON
MOV #0 DM1946            ; SWﾒｯｾｰｼﾞ6
;DM1947 = 0 'ｼﾘﾝﾀﾞ4_SW2名称
;
LD CR2002                ; 常時ON
MOV #0 DM1947            ; SWﾒｯｾｰｼﾞ7
LABEL #1010
;
;'ｼﾘﾝﾀﾞ名称
;DM1950 = 0 'ｼﾘﾝﾀﾞ1_名称
;DM1951 = 0 'ｼﾘﾝﾀﾞ2_名称
;DM1952 = 0 'ｼﾘﾝﾀﾞ3_名称
;DM1953 = 0 'ｼﾘﾝﾀﾞ4_名称
;
LD= DM50312 #3           ; RB選択
NCJ #1011
;'ｼﾘﾝﾀﾞ名称
;
;DM1950 = 0 'ｼﾘﾝﾀﾞ1_名称
;
LD CR2002                ; 常時ON
MOV #0 DM1950            ; Cylinder0
;DM1951 = 0 'ｼﾘﾝﾀﾞ2_名称
;
LD CR2002                ; 常時ON
MOV #0 DM1951            ; Cylinder1
;DM1952 = 0 'ｼﾘﾝﾀﾞ3_名称
;
LD CR2002                ; 常時ON
MOV #0 DM1952            ; Cylinder2
;DM1953 = 0 'ｼﾘﾝﾀﾞ4_名称
;
LD CR2002                ; 常時ON
MOV #0 DM1953            ; Cylinder3
LABEL #1011
;
;RB5 画像検査 SW名称
;移動方向ｶｰｿﾙ設定
;1=通常X 2=ﾘﾊﾞｰｽX 3通常Y,Z 4ﾘﾊﾞｰｽY,Z
LD= DM50312 #4           ; RB選択
AND R34000               ; Teaching
BRES DM50317 #1          ; RB Cursor type 表示
CON
BRES DM50317 #2          ; RB Cursor type 表示
CON
BRES DM50317 #3          ; RB Cursor type 表示
CON
BRES DM50317 #4          ; RB Cursor type 表示
CON
BSET DM50317 #15         ; RB Cursor type 表示
CON
BRES DM50317 #15         ; RB Cursor type 表示
CON
BSET DM50317 #4          ; RB Cursor type 表示
;'SW名称
;'2200:前進 2201:後退 2202:上昇 2203:下降 
;'2204:ON   2205:OFF  2206:開   2207:閉
;DM1940 = 0 'ｼﾘﾝﾀﾞ1_SW1名称
;DM1941 = 0 'ｼﾘﾝﾀﾞ1_SW2名称
;DM1942 = 0 'ｼﾘﾝﾀﾞ2_SW1名称
;DM1943 = 0 'ｼﾘﾝﾀﾞ2_SW2名称
;DM1944 = 0 'ｼﾘﾝﾀﾞ3_SW1名称
;DM1945 = 0 'ｼﾘﾝﾀﾞ3_SW2名称
;DM1946 = 0 'ｼﾘﾝﾀﾞ4_SW1名称
;DM1947 = 0 'ｼﾘﾝﾀﾞ4_SW2名称
;
LD= DM50312 #4           ; RB選択
NCJ #1012
;'SW名称
;
;'2200:前進 2201:後退 2202:上昇 2203:下降 
;
;'2204:ON   2205:OFF  2206:開   2207:閉
;
;DM1940 = 0 'ｼﾘﾝﾀﾞ1_SW1名称
;
LD CR2002                ; 常時ON
MOV #0 DM1940            ; SWﾒｯｾｰｼﾞ0
;DM1941 = 0 'ｼﾘﾝﾀﾞ1_SW2名称
;
LD CR2002                ; 常時ON
MOV #0 DM1941            ; SWﾒｯｾｰｼﾞ1
;DM1942 = 0 'ｼﾘﾝﾀﾞ2_SW1名称
;
LD CR2002                ; 常時ON
MOV #0 DM1942            ; SWﾒｯｾｰｼﾞ2
;DM1943 = 0 'ｼﾘﾝﾀﾞ2_SW2名称
;
LD CR2002                ; 常時ON
MOV #0 DM1943            ; SWﾒｯｾｰｼﾞ3
;DM1944 = 0 'ｼﾘﾝﾀﾞ3_SW1名称
;
LD CR2002                ; 常時ON
MOV #0 DM1944            ; SWﾒｯｾｰｼﾞ4
;DM1945 = 0 'ｼﾘﾝﾀﾞ3_SW2名称
;
LD CR2002                ; 常時ON
MOV #0 DM1945            ; SWﾒｯｾｰｼﾞ5
;DM1946 = 0 'ｼﾘﾝﾀﾞ4_SW1名称
;
LD CR2002                ; 常時ON
MOV #0 DM1946            ; SWﾒｯｾｰｼﾞ6
;DM1947 = 0 'ｼﾘﾝﾀﾞ4_SW2名称
;
LD CR2002                ; 常時ON
MOV #0 DM1947            ; SWﾒｯｾｰｼﾞ7
LABEL #1012
;
;'ｼﾘﾝﾀﾞ名称
;DM1950 = 0 'ｼﾘﾝﾀﾞ1_名称
;DM1951 = 0 'ｼﾘﾝﾀﾞ2_名称
;DM1952 = 0 'ｼﾘﾝﾀﾞ3_名称
;DM1953 = 0 'ｼﾘﾝﾀﾞ4_名称
;
LD= DM50312 #4           ; RB選択
NCJ #1013
;'ｼﾘﾝﾀﾞ名称
;
;DM1950 = 0 'ｼﾘﾝﾀﾞ1_名称
;
LD CR2002                ; 常時ON
MOV #0 DM1950            ; Cylinder0
;DM1951 = 0 'ｼﾘﾝﾀﾞ2_名称
;
LD CR2002                ; 常時ON
MOV #0 DM1951            ; Cylinder1
;DM1952 = 0 'ｼﾘﾝﾀﾞ3_名称
;
LD CR2002                ; 常時ON
MOV #0 DM1952            ; Cylinder2
;DM1953 = 0 'ｼﾘﾝﾀﾞ4_名称
;
LD CR2002                ; 常時ON
MOV #0 DM1953            ; Cylinder3
LABEL #1013
;
;ｼﾘﾝﾀﾞ操作SW ﾗﾝﾌﾟ管理
LD= DM3000 #2150         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD= DM50312 #0           ; RB選択
AND R7402                ; ﾏｶﾞｼﾞﾝｸﾗﾝﾌﾟ 閉
LD= DM50312 #1           ; RB選択
OR= DM50312 #2           ; RB選択
AND R7408                ; 大々判受け搬送 ﾏｶﾞｼﾞﾝ側
ORL
ANL
OUT R42100               ; 共用SWﾗﾝﾌﾟ0
LD= DM3000 #2150         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD= DM50312 #0           ; RB選択
AND R7403                ; ﾏｶﾞｼﾞﾝｸﾗﾝﾌﾟ 開
LD= DM50312 #1           ; RB選択
OR= DM50312 #2           ; RB選択
AND R7409                ; 大々判受け搬送 金型側
ORL
ANL
OUT R42101               ; 共用SWﾗﾝﾌﾟ1
LD= DM3000 #2150         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD= DM50312 #0           ; RB選択
AND R4604                ; ﾏｶﾞｼﾞﾝｸﾗﾝﾌﾟ手前 閉限
AND R4602                ; ﾏｶﾞｼﾞﾝｸﾗﾝﾌﾟ奥 閉限
LD= DM50312 #1           ; RB選択
OR= DM50312 #2           ; RB選択
AND R4610                ; 大々判受け搬送 ﾏｶﾞｼﾞﾝ側限
ORL
ANL
OUT R42200               ; 共用ｾﾝｻｰﾗﾝﾌﾟ0
LD= DM3000 #2150         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD= DM50312 #0           ; RB選択
AND R4605                ; ﾏｶﾞｼﾞﾝｸﾗﾝﾌﾟ手前 開限
AND R4603                ; ﾏｶﾞｼﾞﾝｸﾗﾝﾌﾟ奥 開限
LD= DM50312 #1           ; RB選択
OR= DM50312 #2           ; RB選択
AND R4611                ; 大々判受け搬送 金型側限
ORL
ANL
OUT R42201               ; 共用ｾﾝｻｰﾗﾝﾌﾟ1
LD= DM3000 #2150         ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND= DM50312 #0          ; RB選択
AND R7400                ; ﾏｶﾞｼﾞﾝ ﾌﾟｯｼｬ 位置決め側(ON)
OUT R42102               ; 共用SWﾗﾝﾌﾟ2
LD= DM3000 #2150         ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND= DM50312 #0          ; RB選択
ANB R7400                ; ﾏｶﾞｼﾞﾝ ﾌﾟｯｼｬ 位置決め側(ON)
OUT R42103               ; 共用SWﾗﾝﾌﾟ3
LD= DM3000 #2150         ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND= DM50312 #0          ; RB選択
AND R4600                ; ﾏｶﾞｼﾞﾝﾌﾟｯｼｬ 位置決め側限
OUT R42202               ; 共用ｾﾝｻｰﾗﾝﾌﾟ2
LD= DM3000 #2150         ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND= DM50312 #0          ; RB選択
AND R4601                ; ﾏｶﾞｼﾞﾝﾌﾟｯｼｬ ﾏｶﾞｼﾞﾝ側限
OUT R42203               ; 共用ｾﾝｻｰﾗﾝﾌﾟ3
LD= DM3000 #2150         ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND= DM50312 #0          ; RB選択
AND CR2003               ; 常時OFF
OUT R42104               ; 共用SWﾗﾝﾌﾟ4
LD= DM3000 #2150         ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND= DM50312 #0          ; RB選択
AND CR2003               ; 常時OFF
OUT R42105               ; 共用SWﾗﾝﾌﾟ5
LD= DM3000 #2150         ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND= DM50312 #0          ; RB選択
AND CR2003               ; 常時OFF
OUT R42204               ; 共用ｾﾝｻｰﾗﾝﾌﾟ4
LD= DM3000 #2150         ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND= DM50312 #0          ; RB選択
AND CR2003               ; 常時OFF
OUT R42205               ; 共用ｾﾝｻｰﾗﾝﾌﾟ5
LD= DM3000 #2150         ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND= DM50312 #0          ; RB選択
AND CR2003               ; 常時OFF
OUT R42106               ; 共用SWﾗﾝﾌﾟ6
LD= DM3000 #2150         ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND= DM50312 #0          ; RB選択
AND CR2003               ; 常時OFF
OUT R42107               ; 共用SWﾗﾝﾌﾟ7
LD= DM3000 #2150         ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND= DM50312 #0          ; RB選択
AND CR2003               ; 常時OFF
OUT R42206               ; 共用ｾﾝｻｰﾗﾝﾌﾟ6
LD= DM3000 #2150         ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND= DM50312 #0          ; RB選択
AND CR2003               ; 常時OFF
OUT R42207               ; 共用ｾﾝｻｰﾗﾝﾌﾟ7
;RB起動OK
LD= DM50312 #0           ; RB選択
AND= DM3000 #2150        ; _MainTP　表示中ﾍﾟｰｼﾞNo
MPS
ANB DM50314.1            ; HOME_SW
LDA DM50300              ; Position No
CON
STA EM1300               ; RB1 TargetPos
MPP
AND DM50314.1            ; HOME_SW
DW #100 EM1300           ; RB1 TargetPos
LD= DM50312 #1           ; RB選択
AND= DM3000 #2150        ; _MainTP　表示中ﾍﾟｰｼﾞNo
MPS
ANB DM50314.1            ; HOME_SW
LDA DM50300              ; Position No
CON
STA EM1302               ; RB2 Target Pos
MPP
AND DM50314.1            ; HOME_SW
DW #100 EM1302           ; RB2 Target Pos
LD= DM50312 #2           ; RB選択
AND= DM3000 #2150        ; _MainTP　表示中ﾍﾟｰｼﾞNo
MPS
ANB DM50314.1            ; HOME_SW
LDA DM50300              ; Position No
CON
STA EM1304               ; RB3 Target Pos
MPP
AND DM50314.1            ; HOME_SW
DW #100 EM1304           ; RB3 Target Pos
LD= DM50312 #3           ; RB選択
AND= DM3000 #2150        ; _MainTP　表示中ﾍﾟｰｼﾞNo
MPS
ANB DM50314.1            ; HOME_SW
LDA DM50300              ; Position No
CON
STA EM1306               ; RB4 Target Pos
MPP
AND DM50314.1            ; HOME_SW
DW #100 EM1306           ; RB4 Target Pos
LD= DM50312 #4           ; RB選択
AND= DM3000 #2150        ; _MainTP　表示中ﾍﾟｰｼﾞNo
MPS
ANB DM50314.1            ; HOME_SW
LDA DM50300              ; Position No
CON
STA EM1308               ; RB5 Target Pos
MPP
AND DM50314.1            ; HOME_SW
DW #100 EM1308           ; RB5 Target Pos
LD= DM50312 #0           ; RB選択
AND MR3000               ; RB1 起動IL ON=起動可能
LD= DM50312 #1           ; RB選択
AND MR3001               ; RB2 起動IL ON=起動可能
ORL
LD= DM50312 #2           ; RB選択
AND MR3002               ; RB3 起動IL ON=起動可能
ORL
LD= DM50312 #3           ; RB選択
AND MR3003               ; RB4 起動IL ON=起動可能
ORL
LD= DM50312 #4           ; RB選択
AND MR3004               ; RB5 起動IL ON=起動可能
ORL
OUT @MR001               ; RB起動OK
;<h1/>Teaching MOVE
LDB R34000               ; Teaching
AND DM50314.0            ; MOVE_SW
LDA DM50312              ; RB選択
CON
MUL #16
CON
STA Z3
CON
LDA DM50312              ; RB選択
CON
MUL #8
CON
STA Z4
CON
LDA DM50312              ; RB選択
CON
MUL #2
CON
STA Z5
BLD DM50314 #0
MEP
ANB R35002:Z3            ; During RB1 MOVE 
AND @MR001               ; RB起動OK
LDA DM50300              ; Position No
CON
STA EM1300:Z5            ; RB1 TargetPos
CON
SET R35000:Z3            ; RB1 MOVE
CON
SET @R2500
STG @R2500
AND R35001:Z3            ; RB1 MOVE END
RES R35001:Z3            ; RB1 MOVE END
CON
ENDS
STG @R2501
AND R35005:Z3            ; RB1 PUSH END
RES R35005:Z3            ; RB1 PUSH END
CON
ENDS
;Teaching HOME
BLD DM50314 #1
MPS
AND= DM50312 #0          ; RB選択
DW #100 EM1300           ; RB1 TargetPos
MRD
AND= DM50312 #1          ; RB選択
DW #100 EM1302           ; RB2 Target Pos
MRD
AND= DM50312 #2          ; RB選択
DW #100 EM1304           ; RB3 Target Pos
MRD
AND= DM50312 #3          ; RB選択
DW #100 EM1306           ; RB4 Target Pos
MPP
AND= DM50312 #4          ; RB選択
DW #100 EM1308           ; RB5 Target Pos
LD= DM3000 #2150         ; _MainTP　表示中ﾍﾟｰｼﾞNo
BAND DM50314 #1
LDA DM50312              ; RB選択
CON
MUL #16
CON
STA Z3
CON
LDA DM50312              ; RB選択
CON
MUL #8
CON
STA Z4
CON
LDA DM50312              ; RB選択
CON
MUL #2
CON
STA Z5
BLD DM50314 #1
MEP
ANB R35010:Z3            ; During RB1 HOME
AND @MR001               ; RB起動OK
SET R35008:Z3            ; RB1 HOME
CON
SET @MR2502
STG @MR2502
AND R35009:Z3            ; RB1 HOME END
RES R35009:Z3            ; RB1 HOME END
CON
ENDS
;Teaching HOME Lamp
BLD DM10507:Z4 #1        ; RB1 状態信号
OUT MR23005              ; Teaching HOME Lamp
;JOG/INC
LD<> DM50314 #0
LDA DM50312              ; RB選択
CON
MUL #8
CON
STA Z4
;Servo ON
LD DM50314.4             ; ｻｰﾎﾞSW
MEP
MPS
BAND DM10507:Z4 #4       ; RB1 状態信号
OUT @R2504
CON
BRES DM10707:Z4 #4       ; RB1 制御信号
MPP
BLDB DM10507:Z4 #4       ; RB1 状態信号
ANB @R2504
BANB DM10707:Z4 #15      ; RB1 制御信号
ANL
BSET DM10707:Z4 #4       ; RB1 制御信号
;Servo ON Lamp
BLD DM10507:Z4 #4        ; RB1 状態信号
OUT MR23000              ; Servo ON Lamp
;Alarm Code
LD= DM50312 #0           ; RB選択
LDA DM10506              ; RB1 ｱﾗｰﾑｺｰﾄﾞ
CON
STA DM50310              ; Alarm Code
LD= DM50312 #1           ; RB選択
LDA DM10514              ; RB2 ｱﾗｰﾑｺｰﾄﾞ
CON
STA DM50310              ; Alarm Code
LD= DM50312 #2           ; RB選択
LDA DM10522              ; RB3 ｱﾗｰﾑｺｰﾄﾞ
CON
STA DM50310              ; Alarm Code
LD= DM50312 #3           ; RB選択
LDA DM10530              ; RB4 ｱﾗｰﾑｺｰﾄﾞ
CON
STA DM50310              ; Alarm Code
LD= DM50312 #4           ; RB選択
LDA DM10538              ; RB5 ｱﾗｰﾑｺｰﾄﾞ
CON
STA DM50310              ; Alarm Code
;Alarm RESET
LD DM50314.3             ; ｱﾗｰﾑSW
AND= DM3000 #2150        ; _MainTP　表示中ﾍﾟｰｼﾞNo
BSET DM10707:Z4 #3       ; RB1 制御信号
LDB DM50314.3            ; ｱﾗｰﾑSW
AND= DM3000 #2150        ; _MainTP　表示中ﾍﾟｰｼﾞNo
BRES DM10707:Z4 #3       ; RB1 制御信号
;Alarm RESET Lamp
BLD DM10507:Z4 #3        ; RB1 状態信号
OUT MR23001              ; Alarm RESET Lamp
;Brake Release
LD DM50314.15            ; ﾌﾞﾚｰｷﾘﾘｰｽSW
MEP
MPS
BAND DM10707:Z4 #15      ; RB1 制御信号
OUT @MR2505
CON
BRES DM10707:Z4 #15      ; RB1 制御信号
MPP
BLDB DM10707:Z4 #15      ; RB1 制御信号
ANB @MR2505
BANB DM10507:Z4 #4       ; RB1 状態信号
ANL
BSET DM10707:Z4 #15      ; RB1 制御信号
;Brake Release Lamp
BLD DM10707:Z4 #15       ; RB1 制御信号
OUT MR23003              ; Brake Release Lamp
;<h1/>ｼﾞｮｸﾞ/ｲﾝﾁﾝｸﾞ出力
LD R44300                ; *非常停止ｽｲｯﾁ
MC
LDB DM50314.5
INV
OUT @MR105               ; ｼﾞｮｸﾞ/ｲﾝﾁﾝｸﾞ
LDB DM50314.6
INV
OUT @MR106               ; 速度切替__(距離切替)
LDB DM50314.7
INV
OUT @MR107               ; -JOG
LDB DM50314.8
INV
OUT @MR108               ; +JOG
;RB1 ﾏｶﾞｼﾞﾝ上下
; #5:JISL_ｼﾞｮｸﾞ/ｲﾝﾁﾝｸﾞ切替え #6:JVEL_ｼﾞｮｸﾞ速度/ｲﾝﾁﾝｸﾞ距離切替え #7:JOG-_-ｼﾞｮｸﾞ #8:JOG+_+ｼﾞｮｸﾞ
LD= DM50312 #0           ; RB選択
OR MR10102               ; 上方ｻｰﾁ
OR MR10103               ; 下方ｻｰﾁ
MPS
LD @MR105                ; ｼﾞｮｸﾞ/ｲﾝﾁﾝｸﾞ
ANB MR10102              ; 上方ｻｰﾁ
ANB MR10103              ; 下方ｻｰﾁ
ANL
OUT DM10707.5            ; RB1JISL
MRD
LD @MR106                ; 速度切替__(距離切替)
ANB MR10102              ; 上方ｻｰﾁ
ANB MR10103              ; 下方ｻｰﾁ
ANL
OUT DM10707.6            ; RB1JVEL
MRD
LD @MR107                ; -JOG
OR MR10103               ; 下方ｻｰﾁ
AND R007                 ; 安全ｶﾊﾞｰ(ON閉)
ANL
OUT DM10707.7            ; RB1JOG-
MPP
LD @MR108                ; +JOG
OR MR10102               ; 上方ｻｰﾁ
AND R007                 ; 安全ｶﾊﾞｰ(ON閉)
LDB MR17011              ; RB1ｴﾘｱ1(中間位置決め干渉域)
LD R4611                 ; 大々判受け搬送 金型側限
ANB R4610                ; 大々判受け搬送 ﾏｶﾞｼﾞﾝ側限
ORL
ANL
ANL
OUT DM10707.8            ; RB1JOG+
;RB2 大々判搬送X
; #5:JISL_ｼﾞｮｸﾞ/ｲﾝﾁﾝｸﾞ切替え #6:JVEL_ｼﾞｮｸﾞ速度/ｲﾝﾁﾝｸﾞ距離切替え #7:JOG-_-ｼﾞｮｸﾞ #8:JOG+_+ｼﾞｮｸﾞ
LD= DM50312 #1           ; RB選択
MPS
AND @MR105               ; ｼﾞｮｸﾞ/ｲﾝﾁﾝｸﾞ
OUT DM10715.5            ; RB2JISL
MRD
AND @MR106               ; 速度切替__(距離切替)
OUT DM10715.6            ; RB2JVEL
MRD
LD @MR107                ; -JOG
AND R007                 ; 安全ｶﾊﾞｰ(ON閉)
ANL
OUT DM10715.7            ; RB2JOG-
MPP
LD @MR108                ; +JOG
AND R007                 ; 安全ｶﾊﾞｰ(ON閉)
LDB MR17211              ; RB2ｴﾘｱ1(金型進入範囲)
LD MR17211               ; RB2ｴﾘｱ1(金型進入範囲)
AND R4703                ; 金型ﾌﾟﾚｽ上下 上昇限
ANB R4702                ; 金型ﾌﾟﾚｽ上下 下降限
ORL
ANL
ANB DM10523.2            ; RB3移動中
ANL
OUT DM10715.8            ; RB2JOG+
;RB3 大々判搬送Z
; #5:JISL_ｼﾞｮｸﾞ/ｲﾝﾁﾝｸﾞ切替え #6:JVEL_ｼﾞｮｸﾞ速度/ｲﾝﾁﾝｸﾞ距離切替え #7:JOG-_-ｼﾞｮｸﾞ #8:JOG+_+ｼﾞｮｸﾞ
LD= DM50312 #2           ; RB選択
MPS
AND @MR105               ; ｼﾞｮｸﾞ/ｲﾝﾁﾝｸﾞ
OUT DM10723.5            ; RB3JISL
MRD
AND @MR106               ; 速度切替__(距離切替)
OUT DM10723.6            ; RB3JVEL
MRD
LD @MR107                ; -JOG
AND R007                 ; 安全ｶﾊﾞｰ(ON閉)
ANB DM10515.2            ; RB2移動中
ANL
OUT DM10723.7            ; RB3JOG-
MPP
LD @MR108                ; +JOG
AND R007                 ; 安全ｶﾊﾞｰ(ON閉)
ANB DM10515.2            ; RB2移動中
ANL
OUT DM10723.8            ; RB3JOG+
;RB4 ﾌﾟﾚｽｸﾘｰﾆﾝｸﾞ
; #5:JISL_ｼﾞｮｸﾞ/ｲﾝﾁﾝｸﾞ切替え #6:JVEL_ｼﾞｮｸﾞ速度/ｲﾝﾁﾝｸﾞ距離切替え #7:JOG-_-ｼﾞｮｸﾞ #8:JOG+_+ｼﾞｮｸﾞ
LD= DM50312 #3           ; RB選択
MPS
LD @MR105                ; ｼﾞｮｸﾞ/ｲﾝﾁﾝｸﾞ
OR MR10003               ; ｸﾘｰﾆﾝｸﾞﾛｰﾗｰSW表示
ANL
OUT DM10731.5            ; RB4JISL
MRD
AND @MR106               ; 速度切替__(距離切替)
OUT DM10731.6            ; RB4JVEL
MPP
LD R4614                 ; ｸﾘｰﾆﾝｸﾞﾛｰﾗ前後 前進限
ANB R4615                ; ｸﾘｰﾆﾝｸﾞﾛｰﾗ前後 後退限
LDB R4614                ; ｸﾘｰﾆﾝｸﾞﾛｰﾗ前後 前進限
AND R4615                ; ｸﾘｰﾆﾝｸﾞﾛｰﾗ前後 後退限
ORL
OR MR10003               ; ｸﾘｰﾆﾝｸﾞﾛｰﾗｰSW表示
AND R007                 ; 安全ｶﾊﾞｰ(ON閉)
ANB MR21110              ; MC 軸1BUSY
LDB MR22500              ; ｸﾘｰﾆﾝｸﾞﾛｰﾗﾌﾘｰ中
OR MR10003               ; ｸﾘｰﾆﾝｸﾞﾛｰﾗｰSW表示
ANL
ANL
MPS
AND @MR107               ; -JOG
OUT DM10731.7            ; RB4JOG-
MPP
AND @MR108               ; +JOG
OUT DM10731.8            ; RB4JOG+
;RB5 画像検査
; #5:JISL_ｼﾞｮｸﾞ/ｲﾝﾁﾝｸﾞ切替え #6:JVEL_ｼﾞｮｸﾞ速度/ｲﾝﾁﾝｸﾞ距離切替え #7:JOG-_-ｼﾞｮｸﾞ #8:JOG+_+ｼﾞｮｸﾞ
LD= DM50312 #4           ; RB選択
MPS
AND @MR105               ; ｼﾞｮｸﾞ/ｲﾝﾁﾝｸﾞ
OUT DM10739.5            ; RB5JISL
MRD
AND @MR106               ; 速度切替__(距離切替)
OUT DM10739.6            ; RB5JVEL
MPP
LD B04                   ; Index->Press IL ｽｶﾗZ退避ON
OR MR17701               ; 動作ﾊﾟﾗﾒｰﾀ1_Index装置無し
ANL
MPS
LD @MR107                ; -JOG
AND R007                 ; 安全ｶﾊﾞｰ(ON閉)
ANL
OUT DM10739.7            ; RB5JOG-
MPP
LD @MR108                ; +JOG
AND R007                 ; 安全ｶﾊﾞｰ(ON閉)
ANL
OUT DM10739.8            ; RB5JOG+
MCR
;<h1/>RB1 ﾏｶﾞｼﾞﾝ上下 移動
;RB1 ﾏｶﾞｼﾞﾝ上下_現在位置の確認
BLDB DM10507 #2          ; RB1 状態信号
MPS
CAL-.L EM10000 DM10500 DM22000;RB1 目標値(下位)1  RB1 現在位置(下位)  RB1_POS1_現在位置_差分
MPP
LD>=.L DM22000 -50       ; RB1_POS1_現在位置_差分
AND<=.L DM22000 +50      ; RB1_POS1_現在位置_差分
ANL
TMR @1 #1
CON
AND @T1
OUT MR17000              ; RB1_Pos#1
BLDB DM10507 #2          ; RB1 状態信号
MPS
CAL-.L EM10006 DM10500 DM22002;RB1 目標値(下位)2  RB1 現在位置(下位)  RB1_POS2_現在位置_差分
MPP
LD>=.L DM22002 -50       ; RB1_POS2_現在位置_差分
AND<=.L DM22002 +50      ; RB1_POS2_現在位置_差分
ANL
TMR @2 #1
CON
AND @T2
OUT MR17001              ; RB1_Pos#2
BLDB DM10507 #2          ; RB1 状態信号
MPS
CAL-.L EM10012 DM10500 DM22004;RB1 目標値(下位)3  RB1 現在位置(下位)  RB1_POS3_現在位置_差分
MPP
LD>=.L DM22004 -50       ; RB1_POS3_現在位置_差分
AND<=.L DM22004 +50      ; RB1_POS3_現在位置_差分
ANL
TMR @3 #1
CON
AND @T3
OUT MR17002              ; RB1_Pos#3
BLDB DM10507 #2          ; RB1 状態信号
MPS
CAL-.L EM10018 DM10500 DM22006;RB1 目標値(下位)4  RB1 現在位置(下位)  RB1_POS4_現在位置_差分
MPP
LD>=.L DM22006 -50       ; RB1_POS4_現在位置_差分
AND<=.L DM22006 +50      ; RB1_POS4_現在位置_差分
ANL
TMR @4 #1
CON
AND @T4
OUT MR17003              ; RB1_Pos#4
BLDB DM10507 #2          ; RB1 状態信号
MPS
CAL-.L EM10024 DM10500 DM22008;RB1 目標値(下位)5  RB1 現在位置(下位)  RB1_POS5_現在位置_差分
MPP
LD>=.L DM22008 -50       ; RB1_POS5_現在位置_差分
AND<=.L DM22008 +50      ; RB1_POS5_現在位置_差分
ANL
TMR @5 #1
CON
AND @T5
OUT MR17004              ; RB1_Pos#5
BLDB DM10507 #2          ; RB1 状態信号
MPS
LD>=.L DM10500 +24500    ; RB1 現在位置(下位)
AND<=.L DM10500 +26500   ; RB1 現在位置(下位)
ANL
TMR @6 #1
CON
AND @T6
OUT MR17011              ; RB1ｴﾘｱ1(中間位置決め干渉域)
MPP
LD>=.L DM10500 +0        ; RB1 現在位置(下位)
AND<=.L DM10500 +0       ; RB1 現在位置(下位)
ANL
TMR @7 #1
CON
AND @T7
AND CR2003               ; 常時OFF
OUT MR17012              ; RB1ｴﾘｱ2
;<h1/>RB1 ﾏｶﾞｼﾞﾝ上下_MOVE_先頭
STG R35000               ; RB1 MOVE
SET R35002               ; During RB1 MOVE 
CON
JMP @R100
STG @R100
AND @R101
DW #0 EM1301             ; RB1現在地Pos
CON
DW #0 @DM10
CON
JMP @R102
;TYPE EM1000.U,EM1300.U,EM10000.U   
;BMOV(EM10000:((EM1300-1)*6),EM1000,#6)	'指定されたPOSをEM1000へ格納
;SET (@R101)
LD @R100
NCJ #1016
;TYPE EM1000.U,EM1300.U,EM10000.U   
;
;BMOV(EM10000:((EM1300-1)*6),EM1000,#6)	'指定されたPOSをEM1000へ格納
;
LD CR2002                ; 常時ON
LDA EM1300               ; RB1 TargetPos
CON
EXT
CON
SUB.L +1
CON
MUL.L +6
CON
STA.L Z12
BMOV EM10000:Z12 EM1000 #6;RB1 目標値(下位)1  RB1 目標値下位
;SET (@R101)
LD CR2002                ; 常時ON
SET @R101
LABEL #1016
;
LDP @R102
RES @R101
CON
MSTRT CON_MOVE EM1000 EM1004 EM1005 DM10500 DM10700 @DM10;RB1 目標値下位  RB1 速度  RB1 G  RB1 現在位置(下位)  RB1 目標位置(下位)
STG @R102
MPS
AND= @DM10 #20
LDA EM1300               ; RB1 TargetPos
CON
STA EM1301               ; RB1現在地Pos
CON
JMP @R103
MPP
LD<> @DM10 #20
AND<> @DM10 #0
ANL
SET R35003               ; RB1Alarm
CON
JMP @R103
STG @R103
RES R35002               ; During RB1 MOVE 
CON
SET R35001               ; RB1 MOVE END
CON
ENDS
;RB1 PUSH
STG R35004               ; RB1 PUSH
SET R35006               ; During RB1 PUSH 
CON
JMP @R104
STG @R104
AND @R105
DW #0 EM1301             ; RB1現在地Pos
CON
DW #0 @DM11
CON
JMP @R106
;TYPE EM1000.U,EM1300.U,EM10000.U   
;BMOV(EM10000:((EM1300-1)*6),EM1000,#6)	'指定されたPOSをEM1000へ格納
;SET (@R105)
LD @R104
NCJ #1017
;TYPE EM1000.U,EM1300.U,EM10000.U   
;
;BMOV(EM10000:((EM1300-1)*6),EM1000,#6)	'指定されたPOSをEM1000へ格納
;
LD CR2002                ; 常時ON
LDA EM1300               ; RB1 TargetPos
CON
EXT
CON
SUB.L +1
CON
MUL.L +6
CON
STA.L Z12
BMOV EM10000:Z12 EM1000 #6;RB1 目標値(下位)1  RB1 目標値下位
;SET (@R105)
LD CR2002                ; 常時ON
SET @R105
LABEL #1017
;
;PUSH ﾏｸﾛは2種類準備しています（任意で選択して下さい）
;CON_PUSH	押付け動作用
;CON_WD_PUSH	溶着向け動作用
;
;注1)速度(SPEED)はPUSH開始位置へ移動するまでの速度。
;注2)押付け動作中速度はRBﾊﾟﾗﾒｰﾀにて設定してください。
;注3)PUSH動作ではPush Wideが押付け幅となります。
;注4)PUSH動作には電流値も必要です。
;	※押付け電流制限値（単位：%）
;	0～100％　※RCP4はMAX70％まで
;	MAXを超えた値を入力するとｴﾗｰとなります。
;	→ｺﾝﾄﾛｰﾗへは0～255で入力
;注5)WD_PUSHマクロは、Break offが入力されると位置情報(PUSH_Result)が格納され終了となります。
;	ﾀﾞﾐｰ接点を任意のﾃﾞﾊﾞｲｽに変更して下さい。
;
;Push_Result一時保管ﾃﾞﾊﾞｲｽ	@DM100～@DM138(2ﾜｰﾄﾞ)
LDP @R106
RES @R105
CON
MPS
LDA #70
CON
MUL #25500
CON
DIV #10000
CON
STA EM1006               ; RB1 押付け電流値(0～255)
MPP
MSTRT CON_PUSH EM1000 EM1002 EM1004 EM1005 EM1006 DM10500 DM10700 @DM11;RB1 目標値下位  RB1 位置決め幅下位  RB1 速度  RB1 G  RB1 押付け電流値(0～255)  RB1 現在位置(下位)  RB1 目標位置(下位)
STG @R106
MPS
AND= @DM11 #20
LDA EM1300               ; RB1 TargetPos
CON
STA EM1301               ; RB1現在地Pos
CON
JMP @R107
MPP
LD<> @DM11 #20
AND<> @DM11 #0
ANL
SET R35003               ; RB1Alarm
CON
JMP @R107
STG @R107
RES R35006               ; During RB1 PUSH 
CON
SET R35005               ; RB1 PUSH END
CON
ENDS
;RB1 HOME
STG R35008               ; RB1 HOME
DW #0 EM1301             ; RB1現在地Pos
CON
DW #0 @DM12
CON
SET R35010               ; During RB1 HOME
CON
JMP @R108
;原点復帰ﾏｸﾛは2種類準備しています（任意で選択して下さい）
;CON_HOME	通常用
;CON_HOME2	原点確認仕様用
;			→原点ｾﾝｻｰをSensor_INに指定してください。ｾﾝｻｰはA接点を想定しています。
;			#20	=	正常終了
;			#21	=	RB応答なし
;			#22	=	ｽﾃｰﾀｽ異常
;			#25	=	原点異常
;			#26	=	原点ｾﾝｻｰ異常
LDP @R108
MPS
MSTRT CON_HOME DM10500 DM10700 @DM12;RB1 現在位置(下位)  RB1 目標位置(下位)
MPP
AND CR2003               ; 常時OFF
MSTRT CON_HOME2 DM10500 DM10700 @DM12 @R001;RB1 現在位置(下位)  RB1 目標位置(下位)  ONﾃﾞﾊﾞｯｸﾞ
STG @R108
MPS
AND= @DM12 #20
DW #100 EM1301           ; RB1現在地Pos
CON
JMP @R109
MPP
LD<> @DM12 #20
AND<> @DM12 #0
ANL
SET R35003               ; RB1Alarm
CON
JMP @R109
STG @R109
SET R35009               ; RB1 HOME END
CON
RES R35010               ; During RB1 HOME
CON
ENDS
;<h1/>RB2 大々判搬送X 移動
;RB2 大々判搬送X_現在位置の確認
BLDB DM10515 #2          ; RB2 状態信号
MPS
CAL-.L EM10600 DM10508 DM22100;RB2 目標値(下位)1  RB2 現在位置(下位)  RB2_POS1_現在位置_差分
MPP
LD>=.L DM22100 -50       ; RB2_POS1_現在位置_差分
AND<=.L DM22100 +50      ; RB2_POS1_現在位置_差分
ANL
TMR @8 #1
CON
AND @T8
OUT MR17200              ; RB2_Pos#1
BLDB DM10515 #2          ; RB2 状態信号
MPS
CAL-.L EM10606 DM10508 DM22102;RB2 目標値(下位)2  RB2 現在位置(下位)  RB2_POS2_現在位置_差分
MPP
LD>=.L DM22102 -50       ; RB2_POS2_現在位置_差分
AND<=.L DM22102 +50      ; RB2_POS2_現在位置_差分
ANL
TMR @9 #1
CON
AND @T9
OUT MR17201              ; RB2_Pos#2
BLDB DM10515 #2          ; RB2 状態信号
MPS
CAL-.L EM10612 DM10508 DM22104;RB2 目標値(下位)3  RB2 現在位置(下位)  RB2_POS3_現在位置_差分
MPP
LD>=.L DM22104 -50       ; RB2_POS3_現在位置_差分
AND<=.L DM22104 +50      ; RB2_POS3_現在位置_差分
ANL
TMR @10 #1
CON
AND @T10
OUT MR17202              ; RB2_Pos#3
BLDB DM10515 #2          ; RB2 状態信号
MPS
CAL-.L EM10618 DM10508 DM22106;RB2 目標値(下位)4  RB2 現在位置(下位)  RB2_POS4_現在位置_差分
MPP
LD>=.L DM22106 -50       ; RB2_POS4_現在位置_差分
AND<=.L DM22106 +50      ; RB2_POS4_現在位置_差分
ANL
TMR @11 #1
CON
AND @T11
OUT MR17203              ; RB2_Pos#4
BLDB DM10515 #2          ; RB2 状態信号
MPS
CAL-.L EM10624 DM10508 DM22108;RB2 目標値(下位)5  RB2 現在位置(下位)  RB2_POS5_現在位置_差分
MPP
LD>=.L DM22108 -50       ; RB2_POS5_現在位置_差分
AND<=.L DM22108 +50      ; RB2_POS5_現在位置_差分
ANL
TMR @12 #1
CON
AND @T12
OUT MR17204              ; RB2_Pos#5
BLDB DM10515 #2          ; RB2 状態信号
MPS
LD>=.L DM10508 +17000    ; RB2 現在位置(下位)
AND<=.L DM10508 +40000   ; RB2 現在位置(下位)
ANL
TMR @13 #1
CON
AND @T13
OUT MR17211              ; RB2ｴﾘｱ1(金型進入範囲)
MPP
LD>=.L DM10508 +0        ; RB2 現在位置(下位)
AND<=.L DM10508 +600     ; RB2 現在位置(下位)
ANL
TMR @14 #1
CON
AND @T14
AND CR2003               ; 常時OFF
OUT MR17212              ; RB2ｴﾘｱ2
;<h1/>RB2 大々判搬送X_MOVE_先頭
STG R35100               ; RB2 MOVE
SET R35102               ; During RB2 MOVE
CON
JMP @R200
STG @R200
AND @R201
DW #0 EM1303             ; RB2現在地Pos
CON
DW #0 @DM13
CON
JMP @R202
;TYPE EM1008.U,EM1302.U,EM10600.U   
;BMOV(EM10600:((EM1302-1)*6),EM1008,#6)	'指定されたPOSをEM1000へ格納
;SET (@R201)
LD @R200
NCJ #1014
;TYPE EM1008.U,EM1302.U,EM10600.U   
;
;BMOV(EM10600:((EM1302-1)*6),EM1008,#6)	'指定されたPOSをEM1000へ格納
;
LD CR2002                ; 常時ON
LDA EM1302               ; RB2 Target Pos
CON
EXT
CON
SUB.L +1
CON
MUL.L +6
CON
STA.L Z12
BMOV EM10600:Z12 EM1008 #6;RB2 目標値(下位)1  RB2 目標値下位
;SET (@R201)
LD CR2002                ; 常時ON
SET @R201
LABEL #1014
;
LDP @R202
RES @R201
CON
MSTRT CON_MOVE EM1008 EM1012 EM1013 DM10508 DM10708 @DM13;RB2 目標値下位  RB2 速度  RB2 G  RB2 現在位置(下位)  RB2 目標位置(下位)
STG @R202
MPS
AND= @DM13 #20
LDA EM1302               ; RB2 Target Pos
CON
STA EM1303               ; RB2現在地Pos
CON
JMP @R203
MPP
LD<> @DM13 #20
AND<> @DM13 #0
ANL
SET R35103               ; RB2 Alarm
CON
JMP @R203
STG @R203
RES R35102               ; During RB2 MOVE
CON
SET R35101               ; RB2 MOVE END
CON
ENDS
;RB2 大々判搬送X PUSH
STG R35104               ; RB2 PUSH
SET R35106               ; During RB2 PUSH
CON
JMP @R204
STG @R204
AND @R205
DW #0 EM1303             ; RB2現在地Pos
CON
DW #0 @DM14
CON
JMP @R206
;TYPE EM1008.U,EM1302.U,EM10600.U   
;BMOV(EM10600:((EM1302-1)*6),EM1008,#6)	'指定されたPOSをEM1000へ格納
;SET (@R205)
LD @R204
NCJ #1015
;TYPE EM1008.U,EM1302.U,EM10600.U   
;
;BMOV(EM10600:((EM1302-1)*6),EM1008,#6)	'指定されたPOSをEM1000へ格納
;
LD CR2002                ; 常時ON
LDA EM1302               ; RB2 Target Pos
CON
EXT
CON
SUB.L +1
CON
MUL.L +6
CON
STA.L Z12
BMOV EM10600:Z12 EM1008 #6;RB2 目標値(下位)1  RB2 目標値下位
;SET (@R205)
LD CR2002                ; 常時ON
SET @R205
LABEL #1015
;
;PUSH ﾏｸﾛは2種類準備しています（任意で選択して下さい）
;CON_PUSH	押付け動作用
;CON_WD_PUSH	溶着向け動作用
;
;注1)速度(SPEED)はPUSH開始位置へ移動するまでの速度。
;注2)押付け動作中速度はRBﾊﾟﾗﾒｰﾀにて設定してください。
;注3)PUSH動作ではPush Wideが押付け幅となります。
;注4)PUSH動作には電流値も必要です。
;	※押付け電流制限値（単位：%）
;	0～100％　※RCP4はMAX70％まで
;	MAXを超えた値を入力するとｴﾗｰとなります。
;	→ｺﾝﾄﾛｰﾗへは0～255で入力
;注5)WD_PUSHマクロは、Break offが入力されると位置情報(PUSH_Result)が格納され終了となります。
;	ﾀﾞﾐｰ接点を任意のﾃﾞﾊﾞｲｽに変更して下さい。
;
;Push_Result一時保管ﾃﾞﾊﾞｲｽ	@DM100～@DM138(2ﾜｰﾄﾞ)
LDP @R206
RES @R205
CON
MPS
LDA #70
CON
MUL #25500
CON
DIV #10000
CON
STA EM1014               ; RB2 押付け電流値(0～255)
MPP
MSTRT CON_PUSH EM1008 EM1010 EM1012 EM1013 EM1014 DM10508 DM10708 @DM14;RB2 目標値下位  RB2 位置決め幅下位  RB2 速度  RB2 G  RB2 押付け電流値(0～255)  RB2 現在位置(下位)  RB2 目標位置(下位)
STG @R206
MPS
AND= @DM14 #20
LDA EM1302               ; RB2 Target Pos
CON
STA EM1303               ; RB2現在地Pos
CON
JMP @R207
MPP
LD<> @DM14 #20
AND<> @DM14 #0
ANL
SET R35103               ; RB2 Alarm
CON
JMP @R207
STG @R207
RES R35106               ; During RB2 PUSH
CON
SET R35105               ; RB2 PUSH END
CON
ENDS
;RB2 大々判搬送X HOME
STG R35108               ; RB2 HOME
DW #0 EM1303             ; RB2現在地Pos
CON
DW #0 @DM15
CON
SET R35110               ; During RB2 HOME
CON
JMP @R208
;原点復帰ﾏｸﾛは2種類準備しています（任意で選択して下さい）
;CON_HOME	通常用
;CON_HOME2	原点確認仕様用
;			→原点ｾﾝｻｰをSensor_INに指定してください。ｾﾝｻｰはA接点を想定しています。
;			#20	=	正常終了
;			#21	=	RB応答なし
;			#22	=	ｽﾃｰﾀｽ異常
;			#25	=	原点異常
;			#26	=	原点ｾﾝｻｰ異常
LDP @R208
MPS
MSTRT CON_HOME DM10508 DM10708 @DM15;RB2 現在位置(下位)  RB2 目標位置(下位)
MPP
AND CR2003               ; 常時OFF
MSTRT CON_HOME2 DM10508 DM10708 @DM15 @R001;RB2 現在位置(下位)  RB2 目標位置(下位)  ONﾃﾞﾊﾞｯｸﾞ
STG @R208
MPS
AND= @DM15 #20
DW #100 EM1303           ; RB2現在地Pos
CON
JMP @R209
MPP
LD<> @DM15 #20
AND<> @DM15 #0
ANL
SET R35103               ; RB2 Alarm
CON
JMP @R209
STG @R209
SET R35109               ; RB2 HOME END
CON
RES R35110               ; During RB2 HOME
CON
ENDS
;<h1/>RB3 大々判搬送Z 移動
;RB3 大々判搬送Z_現在位置の確認
BLDB DM10523 #2          ; RB3 状態信号
MPS
CAL-.L EM11200 DM10516 DM22200;RB3 目標値(下位)1  RB3 現在位置(下位)  RB3_POS1_現在位置_差分
MPP
LD>=.L DM22200 -50       ; RB3_POS1_現在位置_差分
AND<=.L DM22200 +50      ; RB3_POS1_現在位置_差分
ANL
TMR @15 #1
CON
AND @T15
OUT MR17400              ; RB3_Pos#1
BLDB DM10523 #2          ; RB3 状態信号
MPS
CAL-.L EM11206 DM10516 DM22202;RB3 目標値(下位)2  RB3 現在位置(下位)  RB3_POS2_現在位置_差分
MPP
LD>=.L DM22202 -50       ; RB3_POS2_現在位置_差分
AND<=.L DM22202 +50      ; RB3_POS2_現在位置_差分
ANL
TMR @16 #1
CON
AND @T16
OUT MR17401              ; RB3_Pos#2
BLDB DM10523 #2          ; RB3 状態信号
MPS
CAL-.L EM11212 DM10516 DM22204;RB3 目標値(下位)3  RB3 現在位置(下位)  RB3_POS3_現在位置_差分
MPP
LD>=.L DM22204 -50       ; RB3_POS3_現在位置_差分
AND<=.L DM22204 +50      ; RB3_POS3_現在位置_差分
ANL
TMR @17 #1
CON
AND @T17
OUT MR17402              ; RB3_Pos#3
BLDB DM10523 #2          ; RB3 状態信号
MPS
CAL-.L EM11218 DM10516 DM22206;RB3 目標値(下位)4  RB3 現在位置(下位)  RB3_POS4_現在位置_差分
MPP
LD>=.L DM22206 -50       ; RB3_POS4_現在位置_差分
AND<=.L DM22206 +50      ; RB3_POS4_現在位置_差分
ANL
TMR @18 #1
CON
AND @T18
OUT MR17403              ; RB3_Pos#4
BLDB DM10523 #2          ; RB3 状態信号
MPS
CAL-.L EM11224 DM10516 DM22208;RB3 目標値(下位)5  RB3 現在位置(下位)  RB3_POS5_現在位置_差分
MPP
LD>=.L DM22208 -50       ; RB3_POS5_現在位置_差分
AND<=.L DM22208 +50      ; RB3_POS5_現在位置_差分
ANL
TMR @19 #1
CON
AND @T19
OUT MR17404              ; RB3_Pos#5
BLDB DM10523 #2          ; RB3 状態信号
MPS
CAL-.L EM11230 DM10516 DM22210;RB3 目標値(下位)6  RB3 現在位置(下位)  RB3_POS6_現在位置_差分
MPP
LD>=.L DM22210 -50       ; RB3_POS6_現在位置_差分
AND<=.L DM22210 +50      ; RB3_POS6_現在位置_差分
ANL
TMR @37 #1
CON
AND @T37
OUT MR17405              ; RB3_Pos#6
BLDB DM10523 #2          ; RB3 状態信号
MPS
CAL-.L EM11236 DM10516 DM22212;RB3 目標値(下位)7  RB3 現在位置(下位)  RB3_POS7_現在位置_差分
MPP
LD>=.L DM22212 -50       ; RB3_POS7_現在位置_差分
AND<=.L DM22212 +50      ; RB3_POS7_現在位置_差分
ANL
TMR @38 #1
CON
AND @T38
OUT MR17406              ; RB3_Pos#7
BLDB DM10523 #2          ; RB3 状態信号
MPS
AND<=.L DM10516 +2000    ; RB3 現在位置(下位)
TMR @20 #1
CON
AND @T20
OUT MR17411              ; RB3ｴﾘｱ1(ﾊﾟｽﾗｲﾝ)
MPP
AND>=.L DM10516 +1800    ; RB3 現在位置(下位)
TMR @21 #1
CON
AND @T21
AND CR2003               ; 常時OFF
OUT MR17412              ; RB3ｴﾘｱ2
;<h1/>RB3 大々判搬送Z_MOVE_先頭
STG R35200               ; RB3 MOVE
SET R35202               ; During RB3 MOVE
CON
JMP @R300
STG @R300
AND @R301
DW #0 EM1305             ; RB3現在地Pos
CON
DW #0 @DM16
CON
JMP @R302
;TYPE EM1016.U,EM1304.U,EM11200.U   
;BMOV(EM11200:((EM1304-1)*6),EM1016,#6)	'指定されたPOSをEM1000へ格納
;SET (@R301)
LD @R300
NCJ #1018
;TYPE EM1016.U,EM1304.U,EM11200.U   
;
;BMOV(EM11200:((EM1304-1)*6),EM1016,#6)	'指定されたPOSをEM1000へ格納
;
LD CR2002                ; 常時ON
LDA EM1304               ; RB3 Target Pos
CON
EXT
CON
SUB.L +1
CON
MUL.L +6
CON
STA.L Z12
BMOV EM11200:Z12 EM1016 #6;RB3 目標値(下位)1  RB3 目標値下位
;SET (@R301)
LD CR2002                ; 常時ON
SET @R301
LABEL #1018
;
LDP @R302
RES @R301
CON
MSTRT CON_MOVE EM1016 EM1020 EM1021 DM10516 DM10716 @DM16;RB3 目標値下位  RB3 速度  RB3 G  RB3 現在位置(下位)  RB3 目標位置(下位)
STG @R302
MPS
AND= @DM16 #20
LDA EM1304               ; RB3 Target Pos
CON
STA EM1305               ; RB3現在地Pos
CON
JMP @R303
MPP
LD<> @DM16 #20
AND<> @DM16 #0
ANL
SET R35203               ; RB3 Alarm
CON
JMP @R303
STG @R303
RES R35202               ; During RB3 MOVE
CON
SET R35201               ; RB3 MOVE END
CON
ENDS
;RB3 大々判搬送Z PUSH
STG R35204               ; RB3 PUSH
SET R35206               ; During RB3 PUSH
CON
JMP @R304
STG @R304
AND @R305
DW #0 EM1305             ; RB3現在地Pos
CON
DW #0 @DM17
CON
JMP @R306
;TYPE EM1016.U,EM1304.U,EM11200.U   
;BMOV(EM11200:((EM1304-1)*6),EM1016,#6)	'指定されたPOSをEM1000へ格納
;SET (@R305)
LD @R304
NCJ #1019
;TYPE EM1016.U,EM1304.U,EM11200.U   
;
;BMOV(EM11200:((EM1304-1)*6),EM1016,#6)	'指定されたPOSをEM1000へ格納
;
LD CR2002                ; 常時ON
LDA EM1304               ; RB3 Target Pos
CON
EXT
CON
SUB.L +1
CON
MUL.L +6
CON
STA.L Z12
BMOV EM11200:Z12 EM1016 #6;RB3 目標値(下位)1  RB3 目標値下位
;SET (@R305)
LD CR2002                ; 常時ON
SET @R305
LABEL #1019
;
;PUSH ﾏｸﾛは2種類準備しています（任意で選択して下さい）
;CON_PUSH	押付け動作用
;CON_WD_PUSH	溶着向け動作用
;
;注1)速度(SPEED)はPUSH開始位置へ移動するまでの速度。
;注2)押付け動作中速度はRBﾊﾟﾗﾒｰﾀにて設定してください。
;注3)PUSH動作ではPush Wideが押付け幅となります。
;注4)PUSH動作には電流値も必要です。
;	※押付け電流制限値（単位：%）
;	0～100％　※RCP4はMAX70％まで
;	MAXを超えた値を入力するとｴﾗｰとなります。
;	→ｺﾝﾄﾛｰﾗへは0～255で入力
;注5)WD_PUSHマクロは、Break offが入力されると位置情報(PUSH_Result)が格納され終了となります。
;	ﾀﾞﾐｰ接点を任意のﾃﾞﾊﾞｲｽに変更して下さい。
;
;Push_Result一時保管ﾃﾞﾊﾞｲｽ	@DM100～@DM138(2ﾜｰﾄﾞ)
LDP @R306
RES @R305
CON
MPS
LDA #70
CON
MUL #25500
CON
DIV #10000
CON
STA EM1022               ; RB3 押付け電流値(0～255)
MPP
MSTRT CON_PUSH EM1016 EM1018 EM1020 EM1021 EM1022 DM10516 DM10716 @DM17;RB3 目標値下位  RB3 位置決め幅下位  RB3 速度  RB3 G  RB3 押付け電流値(0～255)  RB3 現在位置(下位)  RB3 目標位置(下位)
STG @R306
MPS
AND= @DM17 #20
LDA EM1304               ; RB3 Target Pos
CON
STA EM1305               ; RB3現在地Pos
CON
JMP @R307
MPP
LD<> @DM17 #20
AND<> @DM17 #0
ANL
SET R35203               ; RB3 Alarm
CON
JMP @R307
STG @R307
RES R35206               ; During RB3 PUSH
CON
SET R35205               ; RB3 PUSH END
CON
ENDS
;RB3 大々判搬送Z HOME
STG R35208               ; RB3 HOME
DW #0 EM1305             ; RB3現在地Pos
CON
DW #0 @DM18
CON
SET R35210               ; During RB3 HOME
CON
JMP @R308
;原点復帰ﾏｸﾛは2種類準備しています（任意で選択して下さい）
;CON_HOME	通常用
;CON_HOME2	原点確認仕様用
;			→原点ｾﾝｻｰをSensor_INに指定してください。ｾﾝｻｰはA接点を想定しています。
;			#20	=	正常終了
;			#21	=	RB応答なし
;			#22	=	ｽﾃｰﾀｽ異常
;			#25	=	原点異常
;			#26	=	原点ｾﾝｻｰ異常
LDP @R308
MPS
MSTRT CON_HOME DM10516 DM10716 @DM18;RB3 現在位置(下位)  RB3 目標位置(下位)
MPP
AND CR2003               ; 常時OFF
MSTRT CON_HOME2 DM10516 DM10716 @DM18 @R001;RB3 現在位置(下位)  RB3 目標位置(下位)  ONﾃﾞﾊﾞｯｸﾞ
STG @R308
MPS
AND= @DM18 #20
DW #100 EM1305           ; RB3現在地Pos
CON
JMP @R309
MPP
LD<> @DM18 #20
AND<> @DM18 #0
ANL
SET R35203               ; RB3 Alarm
CON
JMP @R309
STG @R309
SET R35209               ; RB3 HOME END
CON
RES R35210               ; During RB3 HOME
CON
ENDS
;<h1/>RB4 ﾌﾟﾚｽｸﾘｰﾆﾝｸﾞ 移動
;RB4 ﾌﾟﾚｽｸﾘｰﾆﾝｸﾞ_現在位置の確認
BLDB DM10531 #2          ; RB4 状態信号
MPS
CAL-.L EM11800 DM10524 DM22300;RB4 目標値(下位)1  RB4 現在位置(下位)  RB4_POS1_現在位置_差分
MPP
LD>=.L DM22300 -50       ; RB4_POS1_現在位置_差分
AND<=.L DM22300 +50      ; RB4_POS1_現在位置_差分
ANL
TMR @22 #1
CON
AND @T22
OUT MR17600              ; RB4_Pos#1(ﾛｰﾗ出し入れ)
BLDB DM10531 #2          ; RB4 状態信号
MPS
CAL-.L EM11806 DM10524 DM22302;RB4 目標値(下位)2  RB4 現在位置(下位)  RB4_POS2_現在位置_差分
MPP
LD>=.L DM22302 -50       ; RB4_POS2_現在位置_差分
AND<=.L DM22302 +50      ; RB4_POS2_現在位置_差分
ANL
TMR @23 #1
CON
AND @T23
OUT MR17601              ; RB4_Pos#2
BLDB DM10531 #2          ; RB4 状態信号
MPS
CAL-.L EM11812 DM10524 DM22304;RB4 目標値(下位)3  RB4 現在位置(下位)  RB4_POS3_現在位置_差分
MPP
LD>=.L DM22304 -50       ; RB4_POS3_現在位置_差分
AND<=.L DM22304 +50      ; RB4_POS3_現在位置_差分
ANL
TMR @24 #1
CON
AND @T24
OUT MR17602              ; RB4_Pos#3
BLDB DM10531 #2          ; RB4 状態信号
MPS
CAL-.L EM11818 DM10524 DM22306;RB4 目標値(下位)4  RB4 現在位置(下位)  RB4_POS4_現在位置_差分
MPP
LD>=.L DM22306 -50       ; RB4_POS4_現在位置_差分
AND<=.L DM22306 +50      ; RB4_POS4_現在位置_差分
ANL
TMR @25 #1
CON
AND @T25
OUT MR17603              ; RB4_Pos#4
BLDB DM10531 #2          ; RB4 状態信号
MPS
CAL-.L EM11824 DM10524 DM22308;RB4 目標値(下位)5  RB4 現在位置(下位)  RB4_POS5_現在位置_差分
MPP
LD>=.L DM22308 -50       ; RB4_POS5_現在位置_差分
AND<=.L DM22308 +50      ; RB4_POS5_現在位置_差分
ANL
TMR @26 #1
CON
AND @T26
OUT MR17604              ; RB4_Pos#5
BLDB DM10531 #2          ; RB4 状態信号
MPS
CAL-.L EM11830 DM10524 DM22310;RB4 目標値(下位)6  RB4 現在位置(下位)  RB4_POS6_現在位置_差分
MPP
LD>=.L DM22310 -50       ; RB4_POS6_現在位置_差分
AND<=.L DM22310 +50      ; RB4_POS6_現在位置_差分
ANL
TMR @27 #1
CON
AND @T27
OUT MR17605              ; RB4_Pos#6
BLDB DM10531 #2          ; RB4 状態信号
MPS
LD>=.L DM10524 +0        ; RB4 現在位置(下位)
AND<=.L DM10524 +0       ; RB4 現在位置(下位)
ANL
TMR @28 #1
CON
AND @T28
AND CR2003               ; 常時OFF
OUT MR17611              ; RB4ｴﾘｱ1
MPP
LD>=.L DM10524 +0        ; RB4 現在位置(下位)
AND<=.L DM10524 +0       ; RB4 現在位置(下位)
ANL
TMR @36 #1
CON
AND @T36
AND CR2003               ; 常時OFF
OUT MR17612              ; RB4ｴﾘｱ2
;<h1/>RB4 ﾌﾟﾚｽｸﾘｰﾆﾝｸﾞ_MOVE_先頭
STG R35300               ; RB4 MOVE
SET R35302               ; During RB4_MOVE
CON
JMP @R400
STG @R400
AND @R401
DW #0 EM1307             ; RB4現在地Pos
CON
DW #0 @DM19
CON
JMP @R402
;TYPE EM1024.U,EM1306.U,EM11800.U   
;BMOV(EM11800:((EM1306-1)*6),EM1024,#6)	'指定されたPOSをEM1000へ格納
;SET (@R401)
LD @R400
NCJ #1020
;TYPE EM1024.U,EM1306.U,EM11800.U   
;
;BMOV(EM11800:((EM1306-1)*6),EM1024,#6)	'指定されたPOSをEM1000へ格納
;
LD CR2002                ; 常時ON
LDA EM1306               ; RB4 Target Pos
CON
EXT
CON
SUB.L +1
CON
MUL.L +6
CON
STA.L Z12
BMOV EM11800:Z12 EM1024 #6;RB4 目標値(下位)1  RB4 目標値下位
;SET (@R401)
LD CR2002                ; 常時ON
SET @R401
LABEL #1020
;
LDP @R402
RES @R401
CON
MSTRT CON_MOVE EM1024 EM1028 EM1029 DM10524 DM10724 @DM19;RB4 目標値下位  RB4 速度  RB4 G  RB4 現在位置(下位)  RB4 目標位置(下位)
STG @R402
MPS
AND= @DM19 #20
LDA EM1306               ; RB4 Target Pos
CON
STA EM1307               ; RB4現在地Pos
CON
JMP @R403
MPP
LD<> @DM19 #20
AND<> @DM19 #0
ANL
SET R35303               ; RB4_Alarm
CON
JMP @R403
STG @R403
RES R35302               ; During RB4_MOVE
CON
SET R35301               ; RB4 MOVE END
CON
ENDS
;RB4 ﾌﾟﾚｽｸﾘｰﾆﾝｸﾞ PUSH
STG R35304               ; RB4 PUSH
SET R35306               ; During RB4 PUSH
CON
JMP @R404
STG @R404
AND @R405
DW #0 EM1307             ; RB4現在地Pos
CON
DW #0 @DM20
CON
JMP @R406
;TYPE EM1024.U,EM1306.U,EM11800.U   
;BMOV(EM11800:((EM1306-1)*6),EM1024,#6)	'指定されたPOSをEM1000へ格納
;SET (@R405)
LD @R404
NCJ #1021
;TYPE EM1024.U,EM1306.U,EM11800.U   
;
;BMOV(EM11800:((EM1306-1)*6),EM1024,#6)	'指定されたPOSをEM1000へ格納
;
LD CR2002                ; 常時ON
LDA EM1306               ; RB4 Target Pos
CON
EXT
CON
SUB.L +1
CON
MUL.L +6
CON
STA.L Z12
BMOV EM11800:Z12 EM1024 #6;RB4 目標値(下位)1  RB4 目標値下位
;SET (@R405)
LD CR2002                ; 常時ON
SET @R405
LABEL #1021
;
;PUSH ﾏｸﾛは2種類準備しています（任意で選択して下さい）
;CON_PUSH	押付け動作用
;CON_WD_PUSH	溶着向け動作用
;
;注1)速度(SPEED)はPUSH開始位置へ移動するまでの速度。
;注2)押付け動作中速度はRBﾊﾟﾗﾒｰﾀにて設定してください。
;注3)PUSH動作ではPush Wideが押付け幅となります。
;注4)PUSH動作には電流値も必要です。
;	※押付け電流制限値（単位：%）
;	0～100％　※RCP4はMAX70％まで
;	MAXを超えた値を入力するとｴﾗｰとなります。
;	→ｺﾝﾄﾛｰﾗへは0～255で入力
;注5)WD_PUSHマクロは、Break offが入力されると位置情報(PUSH_Result)が格納され終了となります。
;	ﾀﾞﾐｰ接点を任意のﾃﾞﾊﾞｲｽに変更して下さい。
;
;Push_Result一時保管ﾃﾞﾊﾞｲｽ	@DM100～@DM138(2ﾜｰﾄﾞ)
LDP @R406
RES @R405
CON
MPS
LDA #70
CON
MUL #25500
CON
DIV #10000
CON
STA EM1030               ; RB4 押付け電流値(0～255)
MPP
MSTRT CON_PUSH EM1024 EM1026 EM1028 EM1029 EM1030 DM10524 DM10724 @DM20;RB4 目標値下位  RB4 位置決め幅下位  RB4 速度  RB4 G  RB4 押付け電流値(0～255)  RB4 現在位置(下位)  RB4 目標位置(下位)
STG @R406
MPS
AND= @DM20 #20
LDA EM1306               ; RB4 Target Pos
CON
STA EM1307               ; RB4現在地Pos
CON
JMP @R407
MPP
LD<> @DM20 #20
AND<> @DM20 #0
ANL
SET R35303               ; RB4_Alarm
CON
JMP @R407
STG @R407
RES R35306               ; During RB4 PUSH
CON
SET R35305               ; RB4 PUSH END
CON
ENDS
;RB4 ﾌﾟﾚｽｸﾘｰﾆﾝｸﾞ HOME
STG R35308               ; RB4 HOME
DW #0 EM1307             ; RB4現在地Pos
CON
DW #0 @DM21
CON
SET R35310               ; During RB4 HOME
CON
JMP @R408
;原点復帰ﾏｸﾛは2種類準備しています（任意で選択して下さい）
;CON_HOME	通常用
;CON_HOME2	原点確認仕様用
;			→原点ｾﾝｻｰをSensor_INに指定してください。ｾﾝｻｰはA接点を想定しています。
;			#20	=	正常終了
;			#21	=	RB応答なし
;			#22	=	ｽﾃｰﾀｽ異常
;			#25	=	原点異常
;			#26	=	原点ｾﾝｻｰ異常
LDP @R408
MPS
MSTRT CON_HOME DM10524 DM10724 @DM21;RB4 現在位置(下位)  RB4 目標位置(下位)
MPP
AND CR2003               ; 常時OFF
MSTRT CON_HOME2 DM10524 DM10724 @DM21 @R001;RB4 現在位置(下位)  RB4 目標位置(下位)  ONﾃﾞﾊﾞｯｸﾞ
STG @R408
MPS
AND= @DM21 #20
LDA EM1306               ; RB4 Target Pos
CON
STA EM1307               ; RB4現在地Pos
CON
JMP @R409
MPP
LD<> @DM21 #20
AND<> @DM21 #0
ANL
SET R35303               ; RB4_Alarm
CON
JMP @R409
STG @R409
SET R35309               ; RB4 HOME END
CON
RES R35310               ; During RB4 HOME
CON
ENDS
;<h1/>RB5 画像検査 移動
;RB5 画像検査_現在位置の確認
BLDB DM10539 #2          ; RB5 状態信号
MPS
CAL-.L EM12400 DM10532 DM22400;RB5 目標値(下位)1  RB5 現在位置(下位)  RB5_POS1_現在位置_差分
MPP
LD>=.L DM22400 -50       ; RB5_POS1_現在位置_差分
AND<=.L DM22400 +50      ; RB5_POS1_現在位置_差分
ANL
TMR @29 #1
CON
AND @T29
OUT MR17800              ; RB5_Pos#1
BLDB DM10539 #2          ; RB5 状態信号
MPS
CAL-.L EM12406 DM10532 DM22402;RB5 目標値(下位)2  RB5 現在位置(下位)  RB5_POS2_現在位置_差分
MPP
LD>=.L DM22402 -50       ; RB5_POS2_現在位置_差分
AND<=.L DM22402 +50      ; RB5_POS2_現在位置_差分
ANL
TMR @30 #1
CON
AND @T30
OUT MR17801              ; RB5_Pos#2
BLDB DM10539 #2          ; RB5 状態信号
MPS
CAL-.L EM12412 DM10532 DM22404;RB5 目標値(下位)3  RB5 現在位置(下位)  RB5_POS3_現在位置_差分
MPP
LD>=.L DM22404 -50       ; RB5_POS3_現在位置_差分
AND<=.L DM22404 +50      ; RB5_POS3_現在位置_差分
ANL
TMR @31 #1
CON
AND @T31
OUT MR17802              ; RB5_Pos#3
BLDB DM10539 #2          ; RB5 状態信号
MPS
CAL-.L EM12418 DM10532 DM22406;RB5 目標値(下位)4  RB5 現在位置(下位)  RB5_POS4_現在位置_差分
MPP
LD>=.L DM22406 -50       ; RB5_POS4_現在位置_差分
AND<=.L DM22406 +50      ; RB5_POS4_現在位置_差分
ANL
TMR @32 #1
CON
AND @T32
OUT MR17803              ; RB5_Pos#4
BLDB DM10539 #2          ; RB5 状態信号
MPS
CAL-.L EM12424 DM10532 DM22408;RB5 目標値(下位)5  RB5 現在位置(下位)  RB5_POS5_現在位置_差分
MPP
LD>=.L DM22408 -50       ; RB5_POS5_現在位置_差分
AND<=.L DM22408 +50      ; RB5_POS5_現在位置_差分
ANL
TMR @33 #1
CON
AND @T33
OUT MR17804              ; RB5_Pos#5
BLDB DM10539 #2          ; RB5 状態信号
MPS
LD>=.L DM10532 +0        ; RB5 現在位置(下位)
AND<=.L DM10532 +0       ; RB5 現在位置(下位)
ANL
TMR @34 #1
CON
AND @T34
AND CR2003               ; 常時OFF
OUT MR17811              ; RB5ｴﾘｱ1
MPP
LD>=.L DM10532 +0        ; RB5 現在位置(下位)
AND<=.L DM10532 +0       ; RB5 現在位置(下位)
ANL
TMR @35 #1
CON
AND @T35
AND CR2003               ; 常時OFF
OUT MR17812              ; RB5ｴﾘｱ2
;<h1/>RB5 画像検査_MOVE_先頭
STG R35400               ; RB5 MOVE
SET R35402               ; During RB5 MOVE
CON
JMP @R500
STG @R500
AND @R501
DW #0 @DM22
CON
JMP @R502
;TYPE EM1032.U,EM1308.U,EM12400.U   
;BMOV(EM12400:((EM1308-1)*6),EM1032,#6)	'指定されたPOSをEM1000へ格納
;SET (@R501)
LD @R500
NCJ #1022
;TYPE EM1032.U,EM1308.U,EM12400.U   
;
;BMOV(EM12400:((EM1308-1)*6),EM1032,#6)	'指定されたPOSをEM1000へ格納
;
LD CR2002                ; 常時ON
LDA EM1308               ; RB5 Target Pos
CON
EXT
CON
SUB.L +1
CON
MUL.L +6
CON
STA.L Z12
BMOV EM12400:Z12 EM1032 #6;RB5 目標値(下位)1  RB5 目標値下位
;SET (@R501)
LD CR2002                ; 常時ON
SET @R501
LABEL #1022
;
LDP @R502
RES @R501
CON
MSTRT CON_MOVE EM1032 EM1036 EM1037 DM10532 DM10732 @DM22;RB5 目標値下位  RB5 速度  RB5 G  RB5 現在位置(下位)  RB5 目標位置(下位)
STG @R502
MPS
AND= @DM22 #20
JMP @R503
MPP
LD<> @DM22 #20
AND<> @DM22 #0
ANL
SET R35403               ; RB5_Alarm
CON
JMP @R503
STG @R503
RES R35402               ; During RB5 MOVE
CON
SET R35401               ; RB5 MOVE END
CON
ENDS
;RB5 画像検査 PUSH
STG R35404               ; RB5 PUSH
SET R35406               ; During RB5 PUSH
CON
JMP @R504
STG @R504
AND @R505
DW #0 EM1309             ; RB5現在地Pos
CON
DW #0 @DM23
CON
JMP @R506
;TYPE EM1032.U,EM1308.U,EM12400.U   
;BMOV(EM12400:((EM1308-1)*6),EM1032,#6)	'指定されたPOSをEM1000へ格納
;SET (@R505)
LD @R504
NCJ #1023
;TYPE EM1032.U,EM1308.U,EM12400.U   
;
;BMOV(EM12400:((EM1308-1)*6),EM1032,#6)	'指定されたPOSをEM1000へ格納
;
LD CR2002                ; 常時ON
LDA EM1308               ; RB5 Target Pos
CON
EXT
CON
SUB.L +1
CON
MUL.L +6
CON
STA.L Z12
BMOV EM12400:Z12 EM1032 #6;RB5 目標値(下位)1  RB5 目標値下位
;SET (@R505)
LD CR2002                ; 常時ON
SET @R505
LABEL #1023
;
;PUSH ﾏｸﾛは2種類準備しています（任意で選択して下さい）
;CON_PUSH	押付け動作用
;CON_WD_PUSH	溶着向け動作用
;
;注1)速度(SPEED)はPUSH開始位置へ移動するまでの速度。
;注2)押付け動作中速度はRBﾊﾟﾗﾒｰﾀにて設定してください。
;注3)PUSH動作ではPush Wideが押付け幅となります。
;注4)PUSH動作には電流値も必要です。
;	※押付け電流制限値（単位：%）
;	0～100％　※RCP4はMAX70％まで
;	MAXを超えた値を入力するとｴﾗｰとなります。
;	→ｺﾝﾄﾛｰﾗへは0～255で入力
;注5)WD_PUSHマクロは、Break offが入力されると位置情報(PUSH_Result)が格納され終了となります。
;	ﾀﾞﾐｰ接点を任意のﾃﾞﾊﾞｲｽに変更して下さい。
;
;Push_Result一時保管ﾃﾞﾊﾞｲｽ	@DM100～@DM138(2ﾜｰﾄﾞ)
LDP @R506
RES @R505
CON
MPS
LDA #70
CON
MUL #25500
CON
DIV #10000
CON
STA EM1038               ; RB5 押付け電流値(0～255)
MPP
MSTRT CON_PUSH EM1032 EM1034 EM1036 EM1037 EM1038 DM10532 DM10732 @DM23;RB5 目標値下位  RB5 位置決め幅下位  RB5 速度  RB5 G  RB5 押付け電流値(0～255)  RB5 現在位置(下位)  RB5 目標位置(下位)
STG @R506
MPS
AND= @DM23 #20
LDA EM1308               ; RB5 Target Pos
CON
STA EM1309               ; RB5現在地Pos
CON
JMP @R507
MPP
LD<> @DM23 #20
AND<> @DM23 #0
ANL
SET R35403               ; RB5_Alarm
CON
JMP @R507
STG @R507
RES R35406               ; During RB5 PUSH
CON
SET R35405               ; RB5 PUSH END
CON
ENDS
;RB5 ﾌﾟﾚｽｸﾘｰﾆﾝｸﾞ HOME
STG R35408               ; RB5 HOME
DW #0 EM1309             ; RB5現在地Pos
CON
DW #0 @DM24
CON
SET R35410               ; During RB5 HOME
CON
JMP @R508
;原点復帰ﾏｸﾛは2種類準備しています（任意で選択して下さい）
;CON_HOME	通常用
;CON_HOME2	原点確認仕様用
;			→原点ｾﾝｻｰをSensor_INに指定してください。ｾﾝｻｰはA接点を想定しています。
;			#20	=	正常終了
;			#21	=	RB応答なし
;			#22	=	ｽﾃｰﾀｽ異常
;			#25	=	原点異常
;			#26	=	原点ｾﾝｻｰ異常
LDP @R508
MPS
MSTRT CON_HOME DM10532 DM10732 @DM24;RB5 現在位置(下位)  RB5 目標位置(下位)
MPP
AND CR2003               ; 常時OFF
MSTRT CON_HOME2 DM10532 DM10732 @DM24 @R001;RB5 現在位置(下位)  RB5 目標位置(下位)  ONﾃﾞﾊﾞｯｸﾞ
STG @R508
MPS
AND= @DM24 #20
LDA EM1308               ; RB5 Target Pos
CON
STA EM1309               ; RB5現在地Pos
CON
JMP @R509
MPP
LD<> @DM24 #20
AND<> @DM24 #0
ANL
SET R35403               ; RB5_Alarm
CON
JMP @R509
STG @R509
SET R35409               ; RB5 HOME END
CON
RES R35410               ; During RB5 HOME
CON
ENDS
END
ENDH
