DEVICE:53
;MODULE:MC_Main
;MODULE_TYPE:0
;<h1/>MC20 動作許可
;[内容]
;・非常停止、優先ｴﾗｰ発生時に初期化したいﾃﾞﾊﾞｲｽを指定して下さい
;※本Taskで使用するﾛｰｶﾙﾃﾞﾊﾞｲｽなど
;※STG〜JMPにて使用しているﾃﾞﾊﾞｲｽは必須
;<h1/>MC20 制御
;<h1/>MC20 動作許可
LD MR24800               ; MC20 動作可能
MC
;<h1/>MC20 軸1 ｸﾘｰﾆﾝｸﾞﾛｰﾗ 制御 ﾎﾟｲﾝﾄ移動
;<h1/>MC20 軸1 ｸﾘｰﾆﾝｸﾞﾛｰﾗ ﾎﾟｲﾝﾄ1
LDB MR21610              ; MC 軸1動作中
ANP MR10301              ; MC 軸1 ﾎﾟｲﾝﾄ-1移動要求
SET @MR100
STG @MR100
SET MR21610              ; MC 軸1動作中
CON
MPS
AND MR21611              ; MC 軸1移動完了
JMP @MR101
MPP
MCALL POINT_MOVE #2 #1 #1 MR21609 MR21611;MC 軸1ｱﾗｰﾑ  MC 軸1移動完了
STG @MR101
RES MR21611              ; MC 軸1移動完了
CON
ANB MR21611              ; MC 軸1移動完了
RES MR21610              ; MC 軸1動作中
CON
ENDS
;<h1/>MC20 軸1 ｸﾘｰﾆﾝｸﾞﾛｰﾗ ﾎﾟｲﾝﾄ2
LDB MR21610              ; MC 軸1動作中
ANP MR10302              ; MC 軸1 ﾎﾟｲﾝﾄ-2移動要求
SET @MR102
STG @MR102
SET MR21610              ; MC 軸1動作中
CON
MPS
AND MR21611              ; MC 軸1移動完了
JMP @MR103
MPP
MCALL POINT_MOVE #2 #1 #2 MR21609 MR21611;MC 軸1ｱﾗｰﾑ  MC 軸1移動完了
STG @MR103
RES MR21611              ; MC 軸1移動完了
CON
ANB MR21611              ; MC 軸1移動完了
RES MR21610              ; MC 軸1動作中
CON
ENDS
;<h1/>MC20 軸1 ｸﾘｰﾆﾝｸﾞﾛｰﾗ ﾎﾟｲﾝﾄ3
LDB MR21610              ; MC 軸1動作中
ANP MR10303              ; MC 軸1 ﾎﾟｲﾝﾄ-3移動要求
SET @MR104
STG @MR104
SET MR21610              ; MC 軸1動作中
CON
MPS
AND MR21611              ; MC 軸1移動完了
JMP @MR105
MPP
MCALL POINT_MOVE #2 #1 #3 MR21609 MR21611;MC 軸1ｱﾗｰﾑ  MC 軸1移動完了
STG @MR105
RES MR21611              ; MC 軸1移動完了
CON
ANB MR21611              ; MC 軸1移動完了
RES MR21610              ; MC 軸1動作中
CON
ENDS
;<h1/>MC20 軸1 ｸﾘｰﾆﾝｸﾞﾛｰﾗ ﾎﾟｲﾝﾄ4
LDB MR21610              ; MC 軸1動作中
ANP MR10304              ; MC 軸1 ﾎﾟｲﾝﾄ-4移動要求
SET @MR106
STG @MR106
SET MR21610              ; MC 軸1動作中
CON
MPS
AND MR21611              ; MC 軸1移動完了
JMP @MR107
MPP
MCALL POINT_MOVE #2 #1 #4 MR21609 MR21611;MC 軸1ｱﾗｰﾑ  MC 軸1移動完了
STG @MR107
RES MR21611              ; MC 軸1移動完了
CON
ANB MR21611              ; MC 軸1移動完了
RES MR21610              ; MC 軸1動作中
CON
ENDS
;<h1/>MC20 軸1 ｸﾘｰﾆﾝｸﾞﾛｰﾗ ﾎﾟｲﾝﾄ5
LDB MR21610              ; MC 軸1動作中
ANP MR10305              ; MC 軸1 ﾎﾟｲﾝﾄ-5移動要求
SET @MR108
STG @MR108
SET MR21610              ; MC 軸1動作中
CON
MPS
AND MR21611              ; MC 軸1移動完了
JMP @MR109
MPP
MCALL POINT_MOVE #2 #1 #5 MR21609 MR21611;MC 軸1ｱﾗｰﾑ  MC 軸1移動完了
STG @MR109
RES MR21611              ; MC 軸1移動完了
CON
ANB MR21611              ; MC 軸1移動完了
RES MR21610              ; MC 軸1動作中
CON
ENDS
;<h1/>MC20 軸1 ｸﾘｰﾆﾝｸﾞﾛｰﾗ ﾎﾟｲﾝﾄ6
LDB MR21610              ; MC 軸1動作中
ANP MR10306              ; MC 軸1 ﾎﾟｲﾝﾄ-6移動要求
SET @MR110
STG @MR110
SET MR21610              ; MC 軸1動作中
CON
MPS
AND MR21611              ; MC 軸1移動完了
JMP @MR111
MPP
MCALL POINT_MOVE #2 #1 #6 MR21609 MR21611;MC 軸1ｱﾗｰﾑ  MC 軸1移動完了
STG @MR111
RES MR21611              ; MC 軸1移動完了
CON
ANB MR21611              ; MC 軸1移動完了
RES MR21610              ; MC 軸1動作中
CON
ENDS
;<h1/>MC20 軸1 ｸﾘｰﾆﾝｸﾞﾛｰﾗ ﾎﾟｲﾝﾄ7
LDB MR21610              ; MC 軸1動作中
ANP MR10307              ; MC 軸1 ﾎﾟｲﾝﾄ-7移動要求
SET @MR112
STG @MR112
SET MR21610              ; MC 軸1動作中
CON
MPS
AND MR21611              ; MC 軸1移動完了
JMP @MR113
MPP
MCALL POINT_MOVE #2 #1 #7 MR21609 MR21611;MC 軸1ｱﾗｰﾑ  MC 軸1移動完了
STG @MR113
RES MR21611              ; MC 軸1移動完了
CON
ANB MR21611              ; MC 軸1移動完了
RES MR21610              ; MC 軸1動作中
CON
ENDS
;<h1/>MC20 軸2 裏面取出し 制御 ﾎﾟｲﾝﾄ移動
;<h1/>MC20 軸2 裏面取出し ﾎﾟｲﾝﾄ1
LDB MR21910              ; MC 軸2動作中
ANP MR10501              ; MC 軸2 ﾎﾟｲﾝﾄ-1移動要求
SET @MR300
STG @MR300
SET MR21910              ; MC 軸2動作中
CON
MPS
AND MR21911              ; MC 軸2移動完了
JMP @MR301
MPP
MCALL POINT_MOVE #2 #2 #1 MR21909 MR21911;MC 軸2ｱﾗｰﾑ  MC 軸2移動完了
STG @MR301
RES MR21911              ; MC 軸2移動完了
CON
ANB MR21911              ; MC 軸2移動完了
RES MR21910              ; MC 軸2動作中
CON
ENDS
;<h1/>MC20 軸2 裏面取出し ﾎﾟｲﾝﾄ2
LDB MR21910              ; MC 軸2動作中
ANP MR10502              ; MC 軸2 ﾎﾟｲﾝﾄ-2移動要求
SET @MR302
STG @MR302
SET MR21910              ; MC 軸2動作中
CON
ANB R22802               ; ｴﾗｰ中
MPS
AND MR21911              ; MC 軸2移動完了
JMP @MR303
MPP
MCALL POINT_MOVE #2 #2 #2 MR21909 MR21911;MC 軸2ｱﾗｰﾑ  MC 軸2移動完了
STG @MR303
RES MR21911              ; MC 軸2移動完了
CON
ANB MR21911              ; MC 軸2移動完了
RES MR21910              ; MC 軸2動作中
CON
ENDS
;<h1/>MC20 軸2 裏面取出し ﾎﾟｲﾝﾄ3
LDB MR21910              ; MC 軸2動作中
ANP MR10503              ; MC 軸2 ﾎﾟｲﾝﾄ-3移動要求
SET @MR304
STG @MR304
SET MR21910              ; MC 軸2動作中
CON
MPS
AND MR21911              ; MC 軸2移動完了
JMP @MR305
MPP
MCALL POINT_MOVE #2 #2 #3 MR21909 MR21911;MC 軸2ｱﾗｰﾑ  MC 軸2移動完了
STG @MR305
RES MR21911              ; MC 軸2移動完了
CON
ANB MR21911              ; MC 軸2移動完了
RES MR21910              ; MC 軸2動作中
CON
ENDS
;<h1/>MC20 軸2 裏面取出し ﾎﾟｲﾝﾄ4
LDB MR21910              ; MC 軸2動作中
ANP MR10504              ; MC 軸2 ﾎﾟｲﾝﾄ-4移動要求
SET @MR306
STG @MR306
SET MR21910              ; MC 軸2動作中
CON
MPS
AND MR21911              ; MC 軸2移動完了
JMP @MR307
MPP
MCALL POINT_MOVE #2 #2 #4 MR21909 MR21911;MC 軸2ｱﾗｰﾑ  MC 軸2移動完了
STG @MR307
RES MR21911              ; MC 軸2移動完了
CON
ANB MR21911              ; MC 軸2移動完了
RES MR21910              ; MC 軸2動作中
CON
ENDS
;<h1/>MC20 軸2 裏面取出し ﾎﾟｲﾝﾄ5
LDB MR21910              ; MC 軸2動作中
ANP MR10505              ; MC 軸2 ﾎﾟｲﾝﾄ-5移動要求
SET @MR308
STG @MR308
SET MR21910              ; MC 軸2動作中
CON
MPS
AND MR21911              ; MC 軸2移動完了
JMP @MR309
MPP
MCALL POINT_MOVE #2 #2 #5 MR21909 MR21911;MC 軸2ｱﾗｰﾑ  MC 軸2移動完了
STG @MR309
RES MR21911              ; MC 軸2移動完了
CON
ANB MR21911              ; MC 軸2移動完了
RES MR21910              ; MC 軸2動作中
CON
ENDS
;<h1/>MC20 軸2 裏面取出し ﾎﾟｲﾝﾄ6
LDB MR21910              ; MC 軸2動作中
ANP MR10506              ; MC 軸2 ﾎﾟｲﾝﾄ-6移動要求
SET @MR310
STG @MR310
SET MR21910              ; MC 軸2動作中
CON
MPS
AND MR21911              ; MC 軸2移動完了
JMP @MR311
MPP
MCALL POINT_MOVE #2 #2 #6 MR21909 MR21911;MC 軸2ｱﾗｰﾑ  MC 軸2移動完了
STG @MR311
RES MR21911              ; MC 軸2移動完了
CON
ANB MR21911              ; MC 軸2移動完了
RES MR21910              ; MC 軸2動作中
CON
ENDS
;<h1/>MC20 軸2 裏面取出し ﾎﾟｲﾝﾄ7
LDB MR21910              ; MC 軸2動作中
ANP MR10507              ; MC 軸2 ﾎﾟｲﾝﾄ-7移動要求
SET @MR312
STG @MR312
SET MR21910              ; MC 軸2動作中
CON
MPS
AND MR21911              ; MC 軸2移動完了
JMP @MR313
MPP
MCALL POINT_MOVE #2 #2 #7 MR21909 MR21911;MC 軸2ｱﾗｰﾑ  MC 軸2移動完了
STG @MR313
RES MR21911              ; MC 軸2移動完了
CON
ANB MR21911              ; MC 軸2移動完了
RES MR21910              ; MC 軸2動作中
CON
ENDS
MCR
;
END
ENDH
