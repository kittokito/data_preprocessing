DEVICE:53
;MODULE:UNIT3_Case2
;MODULE_TYPE:0
;
;UNIT3 Case-Transfer Y2
;
;動作FLG
LD T1011                 ; ﾗｲﾄｶｰﾃﾝ3 OUT1
AND T1012                ; ﾗｲﾄｶｰﾃﾝ3 OUT2
OUT M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
LDB M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
OR M3850                 ; 取り出し作業確認
LD M3006                 ; ｴﾗｰ解除確認
OR M3154                 ; ｴﾗｰ解除確認
ANL
OUT M3850                ; 取り出し作業確認
LDB T1500                ; 投入3_ﾜｰｸ有無
AND T1501                ; 投入3_ﾜｰｸ浮き1
AND T1501                ; 投入3_ﾜｰｸ浮き1
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
OR M3851                 ; 日常点検治具取り外し確認
LD M3422                 ; 結果判定依頼
OR M3423                 ; 日常点検治具Check
OR M3010                 ; 投入位置移動
OR M3011                 ; Y2_P14 move
OR M3012                 ; 日常点検Case check
ANL
OUT M3851                ; 日常点検治具取り外し確認
LD CR2002                ; 常時ON
MPS
LD<= D3000 K15           ; UT3自動運転ｽﾃｯﾌﾟ
OR> D3000 K92            ; UT3自動運転ｽﾃｯﾌﾟ
ANL
DW K0 D3020              ; Y2ﾊﾞｯﾌｧ数
MPP
LD> D3000 K15            ; UT3自動運転ｽﾃｯﾌﾟ
AND<= D3000 K92          ; UT3自動運転ｽﾃｯﾌﾟ
ANL
DW K1 D3020              ; Y2ﾊﾞｯﾌｧ数
LDB M38                  ; 数合ﾓｰﾄﾞ
ANB T1500                ; 投入3_ﾜｰｸ有無
ANB B2056                ; DC_D start
AND>= D160 D162          ; Case投入数  PCB投入数
LD M38                   ; 数合ﾓｰﾄﾞ
AND= D160 D162           ; Case投入数  PCB投入数
ANB M243                 ; 数合ﾓｰﾄﾞ: Y2･Y3同時投入可
ORL
OUT M3952                ; ｻｲｸﾙ停止 可能
;■ロボット等機器入力受け
;ロボット、検査装置など状態、現在位置などをまとめる信号は一旦ここで受ける。
LD R3108                 ; Case搬送Y2投入領域
ANB R3112                ; Case搬送Y2減速領域
AND X5684                ; 軸4 軸制御中
OR M3501                 ; Y2原点復帰中
OR M3503                 ; Y2 P14移動中
OR Y5642                 ; 軸4 減速停止
ANB M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
ANB M4915                ; 塗布動作中
OUT Y5642                ; 軸4 減速停止
LDF Y5642                ; 軸4 減速停止
OR Y5645                 ; 軸4 位置決め運転再開
ANB X5684                ; 軸4 軸制御中
OUT Y5645                ; 軸4 位置決め運転再開
LD Y5642                 ; 軸4 減速停止
ANB M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
TMR K340 K30             ; UNIT3_SMA441一時停止超過
;<h1/>装置状態・動作条件
LD=.L D31470 E2500       ; 軸4 現在座標  Case搬送2_TP_Pos1_Data
OR=.L D31470 E2526       ; 軸4 現在座標  Case搬送2_TP_Case投入位置
AND R3108                ; Case搬送Y2投入領域
ANB X5684                ; 軸4 軸制御中
OUT M3900                ; ﾕﾆｯﾄ3原点
LDB B060                 ; ﾕﾆｯﾄ3_JIG番号異常
ANB B061                 ; SMA441ｱﾗｰﾑ
ANB B062                 ; ﾕﾆｯﾄ3_異常3
ANB B063                 ; ﾕﾆｯﾄ3_異常4
ANB B064                 ; ﾕﾆｯﾄ3_異常4
ANB B065                 ; 塗布位置ｹｰｽ行方不明
ANB B066                 ; 嵌合位置ｹｰｽ行方不明
ANB B067                 ; 受渡位置ﾜｰｸ行方不明
INV
OUT M3901                ; ﾕﾆｯﾄ3全異常
LD M3900                 ; ﾕﾆｯﾄ3原点
ANB M3000                ; UT3ｽﾃｯﾌﾟ開始
AND X569D                ; 軸4 ｻｰﾎﾞﾚﾃﾞｨ
ANB X5680                ; 軸4 軸ｴﾗｰ中
ANB X5684                ; 軸4 軸制御中
OUT M3902                ; ﾕﾆｯﾄ3起動条件
LDB M64                  ; 運転準備
OR M65                   ; 即停止異常(緊急停止)
OR M3901                 ; ﾕﾆｯﾄ3全異常
OR T15                   ; 強制停止
OUT M3903                ; ﾕﾆｯﾄ3起動OFF
LD M98                   ; 原点復帰開始
ANB M3904                ; ﾕﾆｯﾄ3原点復帰中
OR M3904                 ; ﾕﾆｯﾄ3原点復帰中
ANB M3903                ; ﾕﾆｯﾄ3起動OFF
ANB M3579                ; UT3原点復帰完了確認
OUT M3904                ; ﾕﾆｯﾄ3原点復帰中
LD M83                   ; 各工程起動指令
LD M33                   ; 手動ﾓｰﾄﾞ
AND M34                  ; ﾒｲﾝ手動操作可能条件
AND CR2003               ; 常時OFF
ORL
AND M3902                ; ﾕﾆｯﾄ3起動条件
OR M3905                 ; ﾕﾆｯﾄ3起動中
ANB M3903                ; ﾕﾆｯﾄ3起動OFF
ANB M3399                ; ﾕﾆｯﾄ3動作完了
OUT M3905                ; ﾕﾆｯﾄ3起動中
LD CR2003                ; 常時OFF
OUT M3908                ; ﾕﾆｯﾄ3警報補助
;Pack処理
LDB M3802                ; 搬送Y2 移動中
ANB M3501                ; Y2原点復帰中
ANB M3503                ; Y2 P14移動中
INV
OUT M3910                ; UNIT3 Pack
;□エラー発生　一時停止フラグ
LD CR2002                ; 常時ON
MPS
PMOV.D M3920 K0 D3100 K0 K20;Err360:ﾜｰｸ残  UT3ｴﾗｰ判別
MPP
AND<> D3100 K0           ; UT3ｴﾗｰ判別
OUT M3912                ; UNIT3 ｴﾗｰ
LDB M3901                ; ﾕﾆｯﾄ3全異常
ANB M160                 ; ALL PAUSE
ANB M3908                ; ﾕﾆｯﾄ3警報補助
ANB M3912                ; UNIT3 ｴﾗｰ
LDB M32                  ; 自動ﾓｰﾄﾞ
ANB M33                  ; 手動ﾓｰﾄﾞ
LD M32                   ; 自動ﾓｰﾄﾞ
AND M3905                ; ﾕﾆｯﾄ3起動中
ORL
LD M33                   ; 手動ﾓｰﾄﾞ
AND M3904                ; ﾕﾆｯﾄ3原点復帰中
ORL
ANL
OUT M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
;RB interlock
LD R3010                 ; 塗布Z　   搬送Y干渉外高さ
OR R3001                 ; 塗布X　   Case2干渉外
OR M4850                 ; 塗布工程
LD R3308                 ; 嵌合Z     上空位置
OR R3302                 ; 嵌合X     Case2干渉外
OR R3111                 ; Case搬送Y2嵌合領域
ANL
LD R3708                 ; 除材2Z    上空位置
OR R3700                 ; 除材2Y    取出干渉外
ANL
AND X569D                ; 軸4 ｻｰﾎﾞﾚﾃﾞｨ
ANB X5680                ; 軸4 軸ｴﾗｰ中
ANB X5684                ; 軸4 軸制御中
ANB M3800                ; 搬送Y2 移動完了
ANB M3804                ; 搬送Y2 原点復帰完了
OUT M3960                ; Case搬送Y2動作可能
LDB M3803                ; Case搬送Y2移動指示有
TMH K333 K10             ; UNIT3_次移動指示ｳｪｲﾄ
LD CR2002                ; 常時ON
MPS
LD B1015                 ; re-move
OR M3961                 ; ｹｰｽ2NG処理
ANB M3962                ; ｹｰｽ2NG処理解除
ANL
OUT M3961                ; ｹｰｽ2NG処理
MPP
LD M3961                 ; ｹｰｽ2NG処理
AND T1014                ; 投入2 NG解除ｽｲｯﾁ
ANB T1400                ; 投入2_ﾜｰｸ有
ANL
OUT M3962                ; ｹｰｽ2NG処理解除
LDF M3905                ; ﾕﾆｯﾄ3起動中
ZRES M3800 M3805         ; 搬送Y2 移動完了  搬送Y2 原点復帰異常
;<h1/>■自動回路 
;
;運転開始・ステッパ初期化・補助接点へ展開
LD CR2002                ; 常時ON
ZRES M3000 M3499         ; UT3ｽﾃｯﾌﾟ開始
LDB M3905                ; ﾕﾆｯﾄ3起動中
MOV K0 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
LD M3905                 ; ﾕﾆｯﾄ3起動中
MOV D3000 Z1             ; UT3自動運転ｽﾃｯﾌﾟ
SET M3000:Z1             ; UT3ｽﾃｯﾌﾟ開始
;自動運転ステップ開始
;投入位置移動
;Move to Work set point
LD M3000                 ; UT3ｽﾃｯﾌﾟ開始
MPS
LDB M39                  ; 日常点検ﾓｰﾄﾞ
OR M44                   ; 接着剤塗布日常点検
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
AND M3960                ; Case搬送Y2動作可能
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
ANB M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
ANL
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MPP
LD M39                   ; 日常点検ﾓｰﾄﾞ
ANB M44                  ; 接着剤塗布日常点検
AND M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
ANL
DW K398 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
LD M3001                 ; Y2_P14 move
MPS
DW K14 D3050             ; 搬送Y2   移動No.
CON
OUT @M0                  ; Case搬送Y2移動
MPP
AND M3800                ; 搬送Y2 移動完了
RES M3800                ; 搬送Y2 移動完了
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
;運転開始時JIG番号ﾁｪｯｸ
;Jig No. check when AUTO start.
LD M3002                 ; Jig番号確認
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
MPS
AND= D92 E3422           ; Case2 Jig ID  Case2 ID
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND<> D92 E3422          ; Case2 Jig ID  Case2 ID
OUT M3963                ; Jig No.異常
;運転開始時ﾜｰｸ残ﾁｪｯｸ
;Remain work check when AUTO start.
LD M3003                 ; 運転開始時ﾜｰｸﾁｪｯｸ
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
TMR K310 K5              ; ﾜｰｸ残検出ｳｪｲﾄ
CON
AND T310                 ; ﾜｰｸ残検出ｳｪｲﾄ
ANB M3961                ; ｹｰｽ2NG処理
MPS
LDB T1500                ; 投入3_ﾜｰｸ有無
AND T1501                ; 投入3_ﾜｰｸ浮き1
AND T1502                ; 投入3_ﾜｰｸ浮き2
ANL
DW K10 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
LD T1500                 ; 投入3_ﾜｰｸ有無
ORB T1501                ; 投入3_ﾜｰｸ浮き1
ORB T1502                ; 投入3_ﾜｰｸ浮き2
ANL
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
;Err360:Work remain  (when START)
LD M3004                 ; ｴﾗｰ発生
ANB M71                  ; All Error PAUSE
DW K360 D148             ; 警報No.
CON
SET M3920                ; Err360:ﾜｰｸ残
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3005                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3006                 ; ｴﾗｰ解除確認
ANB M71                  ; All Error PAUSE
MPS
ANB M3850                ; 取り出し作業確認
DW K2 D3000              ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND M3850                ; 取り出し作業確認
DW K15 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
;投入位置移動
;Move to Work set point
LD M3010                 ; 投入位置移動
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
AND M3960                ; Case搬送Y2動作可能
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
MPS
AND=.L D31470 E2526      ; 軸4 現在座標  Case搬送2_TP_Case投入位置
DW K12 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND<>.L D31470 E2526     ; 軸4 現在座標  Case搬送2_TP_Case投入位置
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3011                 ; Y2_P14 move
MPS
DW K14 D3050             ; 搬送Y2   移動No.
CON
OUT @M1                  ; Case搬送Y2移動
MPP
AND M3800                ; 搬送Y2 移動完了
RES M3800                ; 搬送Y2 移動完了
CON
MPS
ANB M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
DW K300 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
;日常点検時Case除材確認
;Case remove check when Daily check
LD M3012                 ; 日常点検Case check
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
MPS
ANB M44                  ; 接着剤塗布日常点検
DW K15 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND M44                  ; 接着剤塗布日常点検
MPS
AND M3851                ; 日常点検治具取り外し確認
DW K15 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
TMR K316 K100            ; 日常点検治具取外し催促
;投入完了待ち
;waiting for Work set up end
LD M3015                 ; Case投入依頼
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
MPS
LDB M38                  ; 数合ﾓｰﾄﾞ
OR M240                  ; 数合ﾓｰﾄﾞ: Case投入可
OR M243                  ; 数合ﾓｰﾄﾞ: Y2･Y3同時投入可
ANL
MPS
LD T1500                 ; 投入3_ﾜｰｸ有無
ANB M44                  ; 接着剤塗布日常点検
ANL
MPS
LD T1501                 ; 投入3_ﾜｰｸ浮き1
LD T1502                 ; 投入3_ﾜｰｸ浮き2
OR<>.L E2526 E2538       ; Case搬送2_TP_Case投入位置  Case搬送2_TP_Pos20_Data
ANL
ANL
DW K20 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
TMR K311 K10             ; ﾜｰｸ浮き検出ｳｪｲﾄ
CON
AND T311                 ; ﾜｰｸ浮き検出ｳｪｲﾄ
LDB T1501                ; 投入3_ﾜｰｸ浮き1
LDB T1502                ; 投入3_ﾜｰｸ浮き2
AND=.L E2526 E2538       ; Case搬送2_TP_Case投入位置  Case搬送2_TP_Pos20_Data
ORL
ANL
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MPP
LD B2055                 ; DC_Y2 select
AND B2056                ; DC_D start
ANL
DW K400 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
MPS
LDB M44                  ; 接着剤塗布日常点検
AND M3952                ; ｻｲｸﾙ停止 可能
ANL
DW K300 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND M44                  ; 接着剤塗布日常点検
DW K310 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
;Err361:Work floated
LD M3016                 ; ｴﾗｰ発生
ANB M71                  ; All Error PAUSE
DW K361 D148             ; 警報No.
CON
SET M3921                ; Err361:ﾜｰｸ浮き
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3017                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3018                 ; ｴﾗｰ解除確認
ANB M71                  ; All Error PAUSE
DW K15 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
;投入後JIG番号ﾁｪｯｸ
;Jig No. check when Case in.
LD M3020                 ; Jig番号確認
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
MPS
AND= D92 E3422           ; Case2 Jig ID  Case2 ID
DW K40 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND<> D92 E3422          ; Case2 Jig ID  Case2 ID
OUT M3964                ; 投入後　  Jig No.異常
;浮き検出位置移動
;Move to floating check point
LD M3040                 ; 浮き検出2位置確認
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
MPS
AND=.L E2526 E2538       ; Case搬送2_TP_Case投入位置  Case搬送2_TP_Pos20_Data
MPS
ANB M39                  ; 日常点検ﾓｰﾄﾞ
DW K50 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND M39                  ; 日常点検ﾓｰﾄﾞ
DW K400 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND<>.L E2526 E2538      ; Case搬送2_TP_Case投入位置  Case搬送2_TP_Pos20_Data
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3041                 ; 浮き検出位置移動
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
ANPB M3041               ; 浮き検出位置移動
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
AND M3960                ; Case搬送Y2動作可能
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3042                 ; Y1_P20 move
MPS
DW K20 D3050             ; 搬送Y2   移動No.
CON
OUT @M20                 ; Case搬送Y2移動
MPP
AND M3800                ; 搬送Y2 移動完了
RES M3800                ; 搬送Y2 移動完了
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
;浮き検出
;Floating check
LD M3043                 ; 浮き2確認
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
MPS
AND T1502                ; 投入3_ﾜｰｸ浮き2
MPS
ANB M39                  ; 日常点検ﾓｰﾄﾞ
DW K50 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND M39                  ; 日常点検ﾓｰﾄﾞ
DW K400 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
MPP
TMR K127 K10             ; Case2ﾜｰｸ浮き検出ｳｪｲﾄ
CON
AND T127                 ; Case2ﾜｰｸ浮き検出ｳｪｲﾄ
ANB T1502                ; 投入3_ﾜｰｸ浮き2
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
;Err321:Work floated
LD M3044                 ; ｴﾗｰ発生
ANB M71                  ; All Error PAUSE
DW K361 D148             ; 警報No.
CON
SET M3921                ; Err361:ﾜｰｸ浮き
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3045                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3046                 ; ｴﾗｰ解除確認
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
MPS
AND T1502                ; 投入3_ﾜｰｸ浮き2
DW K10 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
TMR K128 K10             ; Case2ﾜｰｸ浮き検出ｳｪｲﾄ
CON
AND T128                 ; Case2ﾜｰｸ浮き検出ｳｪｲﾄ
ANB T1502                ; 投入3_ﾜｰｸ浮き2
DW K44 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
;▼↓↓↓　Daily check mode　↓↓↓▼
;Err327:Daily check Jig set up demand
LD M3400                 ; DC_Jig装着依頼
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
DW K404 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
;治具を在荷ｾﾝｻで確認
;Jig set up check
LD M3404                 ; 在荷確認
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
MPS
AND T1500                ; 投入3_ﾜｰｸ有無
MPS
LD T1501                 ; 投入3_ﾜｰｸ浮き1
LD T1502                 ; 投入3_ﾜｰｸ浮き2
OR<>.L E2526 E2538       ; Case搬送2_TP_Case投入位置  Case搬送2_TP_Pos20_Data
ANL
ANL
DW K408 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
MPP
LDB T1501                ; 投入3_ﾜｰｸ浮き1
LDB T1502                ; 投入3_ﾜｰｸ浮き2
AND=.L E2526 E2538       ; Case搬送2_TP_Case投入位置  Case搬送2_TP_Pos20_Data
ORL
ANL
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MPP
LDB T1500                ; 投入3_ﾜｰｸ有無
AND M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
ANL
DW K400 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
;Err321:Work floated
LD M3405                 ; ｴﾗｰ発生
ANB M71                  ; All Error PAUSE
DW K361 D148             ; 警報No.
CON
SET M3921                ; Err361:ﾜｰｸ浮き
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3406                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3407                 ; ｴﾗｰ解除確認
ANB M71                  ; All Error PAUSE
DW K404 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
;浮き検出位置移動
;Move to floating check point
LD M3408                 ; 浮き検出2位置確認
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
MPS
AND=.L E2526 E2538       ; Case搬送2_TP_Case投入位置  Case搬送2_TP_Pos20_Data
DW K50 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND<>.L E2526 E2538      ; Case搬送2_TP_Case投入位置  Case搬送2_TP_Pos20_Data
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3409                 ; 浮き検出2位置移動
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
ANPB M3409               ; 浮き検出2位置移動
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
AND M3960                ; Case搬送Y2動作可能
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3410                 ; Y2_P20 move
MPS
DW K20 D3050             ; 搬送Y2   移動No.
CON
OUT @M22                 ; Case搬送Y2移動
MPP
AND M3800                ; 搬送Y2 移動完了
RES M3800                ; 搬送Y2 移動完了
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
;浮き検出
;Floating check
LD M3411                 ; 浮き2確認
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
MPS
AND T1502                ; 投入3_ﾜｰｸ浮き2
DW K50 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
TMR K319 K10             ; ﾜｰｸ浮き検出ｳｪｲﾄ
CON
AND T319                 ; ﾜｰｸ浮き検出ｳｪｲﾄ
ANB T1502                ; 投入3_ﾜｰｸ浮き2
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
;Err321:Work floated
LD M3412                 ; ｴﾗｰ発生
ANB M71                  ; All Error PAUSE
DW K361 D148             ; 警報No.
CON
SET M3921                ; Err361:ﾜｰｸ浮き
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3413                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3414                 ; ｴﾗｰ解除確認
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
;投入位置移動
;Move to Work set point
LD M3415                 ; 投入位置移動
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
AND M3960                ; Case搬送Y2動作可能
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3416                 ; Y2_P14 move
MPS
DW K14 D3050             ; 搬送Y2   移動No.
CON
OUT @M23                 ; Case搬送Y2移動
MPP
AND M3800                ; 搬送Y2 移動完了
RES M3800                ; 搬送Y2 移動完了
CON
DW K400 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
;▲↑↑↑　Daily check mode　↑↑↑▲
;塗布開始点移動　　　　　　　　　　　　　　　　　　＜開始点はARC無し・吐出無し・補完無しでお願いします＞
;Move to bonding start point
LD M3050                 ; 塗布開始点移動
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
AND M3960                ; Case搬送Y2動作可能
MPS
ANB M44                  ; 接着剤塗布日常点検
DW K81 D3050             ; 搬送Y2   移動No.
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND M44                  ; 接着剤塗布日常点検
DW K121 D3050            ; 搬送Y2   移動No.
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
;塗布位置移動しない対策
;Malfunction measures
LD CR2002                ; 常時ON
CAL-.L E2202 +100 D3060  ; Y2_P81  Y2塗布位置-1mm
CAL+.L E2202 +100 D3062  ; Y2_P81  Y2塗布位置+1mm
LD M3051                 ; Y2_P81 move
MPS
OUT @M2                  ; Case搬送Y2移動
MPP
AND M3800                ; 搬送Y2 移動完了
MPS
LD>.L D3060 D31470       ; Y2塗布位置-1mm  軸4 現在座標
OR<.L D3062 D31470       ; Y2塗布位置+1mm  軸4 現在座標
ANL
TMR K318 K5              ; 塗布開始位置未到達再起動ﾃﾞｨﾚｲ
CON
AND T318                 ; 塗布開始位置未到達再起動ﾃﾞｨﾚｲ
RES M3800                ; 搬送Y2 移動完了
CON
DW K50 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MRD
LD T1508                 ; 投入3_塗布位置ﾜｰｸ検出
OR M22                   ; ﾜｰｸ在荷無視
AND<.L D3060 D31470      ; Y2塗布位置-1mm  軸4 現在座標
AND>.L D3062 D31470      ; Y2塗布位置+1mm  軸4 現在座標
OR M44                   ; 接着剤塗布日常点検
ANL
RES M3800                ; 搬送Y2 移動完了
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MPP
LDB T1508                ; 投入3_塗布位置ﾜｰｸ検出
ANB M22                  ; ﾜｰｸ在荷無視
ANB M44                  ; 接着剤塗布日常点検
ANL
TMR K320 K30             ; 行方不明検出ｳｪｲﾄ
CON
AND T320                 ; 行方不明検出ｳｪｲﾄ
MPS
AND R3109                ; Case搬送Y2塗布領域
OUT M3917                ; 塗布位置　 Case不明
MPP
ANB R3109                ; Case搬送Y2塗布領域
DW K368 D148             ; 警報No.
CON
SET M3928                ; Err368:TEST搬送2動作せず
;接着剤塗布要求
;Bonding demand to bonding head
LD M3052                 ; 接着剤塗布要求
MPS
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
MPS
AND M4986                ; Y2へ塗布完了
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MRD
AND M4987                ; Y2へ塗布異常
DW K55 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
LDB M4986                ; Y2へ塗布完了
ANB M4987                ; Y2へ塗布異常
AND M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
AND M4398                ; ﾕﾆｯﾄ4ｻｲｸﾙ停止
ANL
DW K150 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
MPP
OUT M3981                ; Y2 塗布要求
;塗布軸とハンドシェイク
;Handshake with Dispence axis
LD M3053                 ; 正常完了確認
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
ANB M4986                ; Y2へ塗布完了
DW K70 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
LD M3055                 ; 異常完了確認
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
ANB M4987                ; Y2へ塗布異常
DW K150 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
;塗布形状測定位置へ移動
;Move to form measurement point
LD M3070                 ; 形状測定位置へ移動
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
AND M3960                ; Case搬送Y2動作可能
MPS
ANB M44                  ; 接着剤塗布日常点検
DW K34 D3050             ; 搬送Y2   移動No.
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND M44                  ; 接着剤塗布日常点検
DW K59 D3050             ; 搬送Y2   移動No.
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3071                 ; Y2_P34 move
MPS
OUT @M3                  ; Case搬送Y2移動
MPP
AND M3800                ; 搬送Y2 移動完了
RES M3800                ; 搬送Y2 移動完了
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
;塗布形状測定要求
;Form measurement demand
LD M3072                 ; 形状測定要求
MPS
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
MPS
AND M5980                ; Y2形状測定完了
RES M3810                ; 塗布幅NGﾌﾗｸﾞ
CON
DW K1 D3110              ; Y2形状測定NGﾘﾄﾗｲ回数
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MRD
LDB M44                  ; 接着剤塗布日常点検
AND M5981                ; Y2形状測定異常
ANL
MPS
AND<= D3110 K1           ; Y2形状測定NGﾘﾄﾗｲ回数
DW K74 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND>= D3110 K2           ; Y2形状測定NGﾘﾄﾗｲ回数
SET M3810                ; 塗布幅NGﾌﾗｸﾞ
CON
DW K80 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
LDB M5980                ; Y2形状測定完了
ANB M5981                ; Y2形状測定異常
AND M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
AND M5398                ; ﾕﾆｯﾄ5ｻｲｸﾙ停止
LD R3308                 ; 嵌合Z     上空位置
OR R3301                 ; 嵌合X     Case1干渉外
ANL
ANL
DW K150 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
MPP
OUT M3982                ; Y2形状測定要求
LD M3073                 ; 正常完了確認
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
ANB M5980                ; Y2形状測定完了
MPS
ANB M44                  ; 接着剤塗布日常点検
DW K90 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
LD M44                   ; 接着剤塗布日常点検
AND M44                  ; 接着剤塗布日常点検
ANL
DW K420 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
;塗布幅ＮＧ塗布開始点移動(計測リトライ動作)
;Move to bonding start point(measurement Retry)
LD M3074                 ; 異常ﾘﾄﾗｲ
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
AND M3960                ; Case搬送Y2動作可能
DW K2 D3110              ; Y2形状測定NGﾘﾄﾗｲ回数
CON
DW K81 D3050             ; 搬送Y2   移動No.
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3075                 ; Y1_P61 move
MPS
OUT @M24                 ; Case搬送Y2移動
MPP
AND M3800                ; 搬送Y2 移動完了
RES M3800                ; 搬送Y2 移動完了
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3076                 ; 移動後待機ﾀｲﾏ
TMR K335 K5              ; 塗布幅NG戻り後待機ﾀｲﾏ
CON
AND T335                 ; 塗布幅NG戻り後待機ﾀｲﾏ
DW K70 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
;計測２回異常は排出
;Eject of NG work
LD M3080                 ; 異常完了確認
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
DW K1 D3110              ; Y2形状測定NGﾘﾄﾗｲ回数
CON
DW K150 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
;嵌合位置へ移動
;Move to Cover set point
LD M3090                 ; 嵌合位置へ移動
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
AND M3960                ; Case搬送Y2動作可能
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3091                 ; Y2_P35 move
MPS
DW K35 D3050             ; 搬送Y2   移動No.
CON
OUT @M4                  ; Case搬送Y2移動
MPP
AND M3800                ; 搬送Y2 移動完了
MPS
LD T1509                 ; 投入3_基板受取位置ﾜｰｸ検出
OR M22                   ; ﾜｰｸ在荷無視
ANL
RES M3800                ; 搬送Y2 移動完了
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MPP
LDB T1509                ; 投入3_基板受取位置ﾜｰｸ検出
ANB M22                  ; ﾜｰｸ在荷無視
ANL
TMR K321 K30             ; ｴﾗｰﾃﾞｨﾚｲ
CON
AND T321                 ; ｴﾗｰﾃﾞｨﾚｲ
OUT M3918                ; 嵌合位置ﾜｰｸ不明
;ｶﾊﾞｰ嵌合要求
;Cover set demand to Cover-Tranfer
LD M3092                 ; 嵌合要求
MPS
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
MPS
AND M5983                ; Y2へ嵌合完了
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MRD
AND M5984                ; Y2へ嵌合異常
DW K94 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
LDB M5983                ; Y2へ嵌合完了
ANB M5984                ; Y2へ嵌合異常
AND M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
AND M5398                ; ﾕﾆｯﾄ5ｻｲｸﾙ停止
LD R3308                 ; 嵌合Z     上空位置
OR R3301                 ; 嵌合X     Case1干渉外
ANL
ANL
DW K150 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
MPP
OUT M3983                ; Y2　嵌合要求
LD M3093                 ; 正常完了確認
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
ANB M5983                ; Y2へ嵌合完了
DW K110 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
LD M3094                 ; 異常完了確認
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
ANB M5984                ; Y2へ嵌合異常
DW K150 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
;排出位置へ移動
;Move to pass position
LD M3110                 ; 排出位置移動
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
AND M3960                ; Case搬送Y2動作可能
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3111                 ; Y2_P47 move
MPS
DW K47 D3050             ; 搬送Y2   移動No.
CON
OUT @M5                  ; Case搬送Y2移動
MPP
AND M3800                ; 搬送Y2 移動完了
MPS
LD T1510                 ; 投入3_受渡位置ﾜｰｸ検出
OR M22                   ; ﾜｰｸ在荷無視
ANL
RES M3800                ; 搬送Y2 移動完了
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MPP
LDB T1510                ; 投入3_受渡位置ﾜｰｸ検出
ANB M22                  ; ﾜｰｸ在荷無視
ANL
TMR K322 K30             ; ｴﾗｰﾃﾞｨﾚｲ
CON
AND T322                 ; ｴﾗｰﾃﾞｨﾚｲ
OUT M3916                ; 受私位置ﾜｰｸ不明
;排出要求
;Pass demand to Remove-Tranfer
LD M3112                 ; 排出要求
MPS
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
MPS
AND M8981                ; Y2排出完了
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MRD
AND M8982                ; Y2排出異常
DW K114 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
MPP
LDB M8981                ; Y2排出完了
ANB M8982                ; Y2排出異常
AND M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
AND M8398                ; ﾕﾆｯﾄ8ｻｲｸﾙ停止
LD R3708                 ; 除材2Z    上空位置
OR R3700                 ; 除材2Y    取出干渉外
ANL
ANL
DW K150 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
MPP
OUT M3985                ; Y2排出要求
LD M3113                 ; 正常完了確認
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
ANB M8981                ; Y2排出完了
DW K120 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
LD M3114                 ; 異常完了確認
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
ANB M8982                ; Y2排出異常
DW K150 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
;念のため、ﾜｰｸ残確認
;Check for Work remain
LD M3120                 ; ﾜｰｸ残ﾁｪｯｸ
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
MPS
ANB T1510                ; 投入3_受渡位置ﾜｰｸ検出
DW K124 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
MPP
TMR K312 K10             ; ﾜｰｸ浮き検出ｳｪｲﾄ
CON
AND T312                 ; ﾜｰｸ浮き検出ｳｪｲﾄ
AND T1510                ; 投入3_受渡位置ﾜｰｸ検出
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
;Err366:NG work remain on pass position 
LD M3121                 ; ｴﾗｰ発生
ANB M71                  ; All Error PAUSE
DW K366 D148             ; 警報No.
CON
SET M3926                ; Err366:排出位置ﾜｰｸ残
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3122                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3123                 ; ｴﾗｰ解除確認
ANB M71                  ; All Error PAUSE
DW K120 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
;投入位置移動
;Move to Work set point
LD M3124                 ; 投入位置へ戻り
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
AND M3960                ; Case搬送Y2動作可能
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3125                 ; Y2_P14 move
MPS
DW K14 D3050             ; 搬送Y2   移動No.
CON
OUT @M6                  ; Case搬送Y2移動
MPP
AND M3800                ; 搬送Y2 移動完了
RES M3800                ; 搬送Y2 移動完了
CON
DW K300 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
;★★★　異常有ﾜｰｸ排出動作　★★★
;Eject of NG work　
LD M3150                 ; 投入位置へ戻り
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
AND M3960                ; Case搬送Y2動作可能
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3151                 ; Y2_P14 move
MPS
DW K14 D3050             ; 搬送Y2   移動No.
CON
OUT @M7                  ; Case搬送Y2移動
MPP
AND M3800                ; 搬送Y2 移動完了
RES M3800                ; 搬送Y2 移動完了
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
;Err365:NG work remove demand 
LD M3152                 ; ｴﾗｰ発生
ANB M71                  ; All Error PAUSE
MPS
ANB M3810                ; 塗布幅NGﾌﾗｸﾞ
DW K365 D148             ; 警報No.
CON
SET M3925                ; Err365:NGﾜｰｸ除材要求
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND M3810                ; 塗布幅NGﾌﾗｸﾞ
DW K369 D148             ; 警報No.
CON
SET M3929                ; Err369:塗布幅NG
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3153                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3154                 ; ｴﾗｰ解除確認
ANB M71                  ; All Error PAUSE
MPS
AND M3850                ; 取り出し作業確認
MPS
ANB M3810                ; 塗布幅NGﾌﾗｸﾞ
DW K300 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
MPP
RES M3810                ; 塗布幅NGﾌﾗｸﾞ
MPP
ANB M3850                ; 取り出し作業確認
DW K152 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
;★★★
;▼↓↓↓　Daily check mode　↓↓↓▼
;投入位置移動
;Move to Work set point
LD M3420                 ; Case2搬送投入位置戻り
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
AND M3960                ; Case搬送Y2動作可能
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3421                 ; Y2_P14
MPS
DW K14 D3050             ; 搬送Y2   移動No.
CON
OUT @M8                  ; Case搬送Y2移動
MPP
AND M3800                ; 搬送Y2 移動完了
RES M3800                ; 搬送Y2 移動完了
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3422                 ; 結果判定依頼
MPS
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
MPS
AND B1514                ; DC_D OK sw
SET M41                  ; Y2 Daily check OK
CON
DW K10 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MRD
AND B1516                ; DC_D NG sw
RES M41                  ; Y2 Daily check OK
CON
DW K10 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND B1515                ; DC_D Retry sw
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MPP
OUT M3990                ; DC_作業者OK確認依頼画面表示
LD M3423                 ; 日常点検治具Check
MPS
LD M3913                 ; UNIT3     ｴﾗｰ・PAUSE無し
AND M3851                ; 日常点検治具取り外し確認
ANL
DW K400 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
MPP
TMR K315 K100            ; 日常点検治具取外し催促
;▲↑↑↑　Daily check mode　↑↑↑▲
;サイクル停止条件
;Cycle end check
LD M3300                 ; 1ｻｲｸﾙ終了
MPS
LDB M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
ORB M3952                ; ｻｲｸﾙ停止 可能
ANL
DW K10 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
LD M70                   ; 自動起動停止指令(ｻｲｸﾙ停止)
AND M3952                ; ｻｲｸﾙ停止 可能
ANL
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3301                 ; 投入位置戻り
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
AND M3960                ; Case搬送Y2動作可能
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3302                 ; Y2_P14 move
MPS
DW K14 D3050             ; 搬送Y2   移動No.
CON
OUT @M9                  ; Case搬送Y2移動
MPP
AND M3800                ; 搬送Y2 移動完了
RES M3800                ; 搬送Y2 移動完了
CON
DW K397 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
;▼↓↓↓　Daily check mode　↓↓↓▼
LD M3310                 ; 治具取り外し待ち
AND M1913                ; UNIT1     ｴﾗｰ・PAUSE無し
MPS
LDB T1500                ; 投入3_ﾜｰｸ有無
AND T1501                ; 投入3_ﾜｰｸ浮き1
AND T1502                ; 投入3_ﾜｰｸ浮き2
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
ANL
DW K397 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
MPP
LD T1500                 ; 投入3_ﾜｰｸ有無
ORB T1501                ; 投入3_ﾜｰｸ浮き1
ORB T1502                ; 投入3_ﾜｰｸ浮き2
ANL
TMR K314 K100            ; 日常点検治具取外し催促
;▲↑↑↑　Daily check mode　↑↑↑▲
LD M3397                 ; ｻｲｸﾙ終了
@MOV K398 D3000          ; UT3自動運転ｽﾃｯﾌﾟ
;終了
;Unit AUTO cycle end
LD M3398                 ; UT3ｻｲｸﾙ停止
MPS
LD M70                   ; 自動起動停止指令(ｻｲｸﾙ停止)
AND M72                  ; 全ﾕﾆｯﾄ停止確認
ANL
@MOV K399 D3000          ; UT3自動運転ｽﾃｯﾌﾟ
MPP
ANB M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
DW K10 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
;<h1/>■原点復帰回路
;
;運転開始・ステッパ初期化・補助接点へ展開
LD CR2002                ; 常時ON
ZRES M3500 M3599         ; ﾕﾆｯﾄ3原点復帰開始
LDB M3904                ; ﾕﾆｯﾄ3原点復帰中
MOV K0 D3010             ; UT3原点復帰ｽﾃｯﾌﾟ
LD M3904                 ; ﾕﾆｯﾄ3原点復帰中
MOV D3010 Z1             ; UT3原点復帰ｽﾃｯﾌﾟ
SET M3500:Z1             ; ﾕﾆｯﾄ3原点復帰開始
;原点復帰ステップ開始
;Origin start
LD M3500                 ; ﾕﾆｯﾄ3原点復帰開始
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
AND M4990                ; 塗布Z軸　原点復帰完了
AND M5990                ; 嵌合Z軸　原点復帰完了
AND M8990                ; 除材2Z軸　原点復帰完了
AND M6900                ; ネジ締めRB原点
AND M3960                ; Case搬送Y2動作可能
ANB X5684                ; 軸4 軸制御中
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
@INC D3010               ; UT3原点復帰ｽﾃｯﾌﾟ
;搬送Y　原点復帰
;Transport-Y1 HOME start
LD M3501                 ; Y2原点復帰中
MPS
MCALL ORIGIN_K K5 K4 M3805 M3804;搬送Y2 原点復帰異常  搬送Y2 原点復帰完了
MPP
AND M3804                ; 搬送Y2 原点復帰完了
RES M3804                ; 搬送Y2 原点復帰完了
CON
MPS
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
@INC D3010               ; UT3原点復帰ｽﾃｯﾌﾟ
MPP
ANB M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
DW K0 D3010              ; UT3原点復帰ｽﾃｯﾌﾟ
;搬送Y　投入位置移動
;Y1 Point4 move
LD M3502
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
AND M3960                ; Case搬送Y2動作可能
@INC D3010               ; UT3原点復帰ｽﾃｯﾌﾟ
LD M3503                 ; Y2 P14移動中
MPS
DW K14 D3050             ; 搬送Y2   移動No.
CON
OUT @M10                 ; Case搬送Y2移動
MPP
AND M3800                ; 搬送Y2 移動完了
RES M3800                ; 搬送Y2 移動完了
CON
@INC D3010               ; UT3原点復帰ｽﾃｯﾌﾟ
;ﾜｰｸ有無Check
;Work check
LD M3504                 ; ﾜｰｸﾁｪｯｸ
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
TMR K301 K5              ; ﾜｰｸ無し確認ﾃﾞｨﾚｲ
CON
AND T301                 ; ﾜｰｸ無し確認ﾃﾞｨﾚｲ
MPS
LDB T1500                ; 投入3_ﾜｰｸ有無
LD T1501                 ; 投入3_ﾜｰｸ浮き1
AND T1502                ; 投入3_ﾜｰｸ浮き2
OR CR2002                ; 常時ON
ANL
ANL
DW K10 D3010             ; UT3原点復帰ｽﾃｯﾌﾟ
MPP
LD T1500                 ; 投入3_ﾜｰｸ有無
LD CR2003                ; 常時OFF
LDB T1501                ; 投入3_ﾜｰｸ浮き1
ORB T1502                ; 投入3_ﾜｰｸ浮き2
ANL
ORL
ANL
@INC D3010               ; UT3原点復帰ｽﾃｯﾌﾟ
;***　ﾜｰｸ有り時処理
;Work remain
LD M3505                 ; ｴﾗｰ発生
ANB M71                  ; All Error PAUSE
DW K360 D148             ; 警報No.
CON
SET M3920                ; Err360:ﾜｰｸ残
CON
@INC D3010               ; UT3原点復帰ｽﾃｯﾌﾟ
LD M3506                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
@INC D3010               ; UT3原点復帰ｽﾃｯﾌﾟ
LD M3507                 ; ｴﾗｰ解除確認
ANB M71                  ; All Error PAUSE
DW K4 D3010              ; UT3原点復帰ｽﾃｯﾌﾟ
;***
;原点復帰終了
LD M3510                 ; 原点復帰動作完了
AND M3900                ; ﾕﾆｯﾄ3原点
OUT M3578                ; UT3原点復帰完了
LD M3578                 ; UT3原点復帰完了
ANB M98                  ; 原点復帰開始
@MOV K79 D3010           ; UT3原点復帰ｽﾃｯﾌﾟ
;<h1/>■手動回路 
;
LD M33                   ; 手動ﾓｰﾄﾞ
AND M34                  ; ﾒｲﾝ手動操作可能条件
ANB M3905                ; ﾕﾆｯﾄ3起動中
ANB M97                  ; 原点復帰動作中
MC
;Case-Transfer Y2
LD M3960                 ; Case搬送Y2動作可能
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
ANB M3800                ; 搬送Y2 移動完了
ANB M3801                ; 搬送Y2 移動異常
ANB M3802                ; 搬送Y2 移動中
LD R3308                 ; 嵌合Z     上空位置
OR R3302                 ; 嵌合X     Case2干渉外
LD R3111                 ; Case搬送Y2嵌合領域
LD B10C3                 ; 搬送Y2_嵌合位置移動PB
LD B10C5                 ; 搬送Y2_排出位置移動PB
AND R3400                ; 嵌合ﾁｬｯｸ  開
ORL
ANL
ORL
ANL
OUT M3610                ; Case搬送Y2動作可
LD CR2002                ; 常時ON
MPS
LDP B10C0                ; 搬送Y2_投入位置移動PB
AND M3610                ; Case搬送Y2動作可
OR M3611                 ; Y2_P14移動
ANB M3800                ; 搬送Y2 移動完了
ANL
OUT M3611                ; Y2_P14移動
DW K14 D3050             ; 搬送Y2   移動No.
CON
OUT @M11                 ; Case搬送Y2移動
MPP
ANF M3611                ; Y2_P14移動
RES M3800                ; 搬送Y2 移動完了
LD CR2002                ; 常時ON
MPS
LDP B10C1                ; 搬送Y2_塗布位置移動PB
AND M3610                ; Case搬送Y2動作可
OR M3612                 ; Y2_P81移動
ANB M3800                ; 搬送Y2 移動完了
ANL
OUT M3612                ; Y2_P81移動
DW K81 D3050             ; 搬送Y2   移動No.
CON
OUT @M12                 ; Case搬送Y2移動
MPP
ANF M3612                ; Y2_P81移動
RES M3800                ; 搬送Y2 移動完了
LD CR2002                ; 常時ON
MPS
LDP B10C2                ; 搬送Y2_測定位置移動PB
AND M3610                ; Case搬送Y2動作可
OR M3613                 ; Y2_P34移動
ANB M3800                ; 搬送Y2 移動完了
ANL
OUT M3613                ; Y2_P34移動
DW K34 D3050             ; 搬送Y2   移動No.
CON
OUT @M13                 ; Case搬送Y2移動
MPP
ANF M3613                ; Y2_P34移動
RES M3800                ; 搬送Y2 移動完了
LD CR2002                ; 常時ON
MPS
LDP B10C3                ; 搬送Y2_嵌合位置移動PB
AND M3610                ; Case搬送Y2動作可
OR M3614                 ; Y2_P35移動
ANB M3800                ; 搬送Y2 移動完了
ANL
OUT M3614                ; Y2_P35移動
DW K35 D3050             ; 搬送Y2   移動No.
CON
OUT @M14                 ; Case搬送Y2移動
MPP
ANF M3614                ; Y2_P35移動
RES M3800                ; 搬送Y2 移動完了
LD CR2002                ; 常時ON
MPS
LDP B10C4                ; 搬送Y2_浮き2確認位置移動PB
AND M3610                ; Case搬送Y2動作可
OR M3615                 ; Y2_P20移動
ANB M3800                ; 搬送Y2 移動完了
ANL
OUT M3615                ; Y2_P20移動
DW K20 D3050             ; 搬送Y2   移動No.
CON
OUT @M15                 ; Case搬送Y2移動
MPP
ANF M3615                ; Y2_P20移動
RES M3800                ; 搬送Y2 移動完了
LD CR2002                ; 常時ON
MPS
LDP B10C5                ; 搬送Y2_排出位置移動PB
AND M3610                ; Case搬送Y2動作可
OR M3617                 ; Y2_P47移動
ANB M3800                ; 搬送Y2 移動完了
ANL
OUT M3617                ; Y2_P47移動
DW K47 D3050             ; 搬送Y2   移動No.
CON
OUT @M16                 ; Case搬送Y2移動
MPP
ANF M3617                ; Y2_P47移動
RES M3800                ; 搬送Y2 移動完了
LD CR2002                ; 常時ON
MPS
LDP B10C6                ; 搬送Y2_BCR位置移動PB
AND M3610                ; Case搬送Y2動作可
OR M3618                 ; Y2_P15移動
ANB M3800                ; 搬送Y2 移動完了
ANL
OUT M3618                ; Y2_P15移動
DW K15 D3050             ; 搬送Y2   移動No.
CON
OUT @M17                 ; Case搬送Y2移動
MPP
ANF M3618                ; Y2_P15移動
RES M3800                ; 搬送Y2 移動完了
LD CR2002                ; 常時ON
MPS
LDP B10C7                ; 搬送Y2DC測定位置
AND M3610                ; Case搬送Y2動作可
OR M3619                 ; Y2_P59
ANB M3800                ; 搬送Y2 移動完了
ANL
OUT M3619                ; Y2_P59
DW K59 D3050             ; 搬送Y2   移動No.
CON
OUT @M18                 ; Case搬送Y2移動
MPP
ANF M3619                ; Y2_P59
RES M3800                ; 搬送Y2 移動完了
LD CR2002                ; 常時ON
MPS
LDP B10C9                ; 搬送Y2_日常点検位置移動PB
AND M3610                ; Case搬送Y2動作可
OR M3620                 ; Y2_P121
ANB M3800                ; 搬送Y2 移動完了
ANL
OUT M3620                ; Y2_P121
DW K121 D3050            ; 搬送Y2   移動No.
CON
OUT @M19                 ; Case搬送Y2移動
MPP
ANF M3620                ; Y2_P121
RES M3800                ; 搬送Y2 移動完了
;Jog
LD M260                  ; RCA ｲﾝﾁﾝｸﾞ動作FLG.
LD B2106                 ; Case Y2軸+JOG PB
OR B2107                 ; Case Y2軸-JOG PB
ANL
TMH K370 K10             ; ｲﾝﾁﾝｸﾞ用JOG信号ON時間
LDB T370                 ; ｲﾝﾁﾝｸﾞ用JOG信号ON時間
AND X569D                ; 軸4 ｻｰﾎﾞﾚﾃﾞｨ
ANB X5680                ; 軸4 軸ｴﾗｰ中
MPS
AND B2106                ; Case Y2軸+JOG PB
OUT Y5650                ; 軸4 JOG正方向
MPP
AND B2107                ; Case Y2軸-JOG PB
OUT Y5651                ; 軸4 JOG負方向
;code-reader 3
LDP B10C8                ; BCR3 read PB
OR M3616                 ; BCR3 read
LDB M10023               ; BCR1     読取り完了
ORB M10033               ; BCR1     読取りｴﾗｰ
ANL
OUT M3616                ; BCR3 read
MCR
;<h1/>出力回路
;搬送2X軸
LDB @M0                  ; Case搬送Y2移動
ANB @M1                  ; Case搬送Y2移動
ANB @M2                  ; Case搬送Y2移動
ANB @M3                  ; Case搬送Y2移動
ANB @M4                  ; Case搬送Y2移動
ANB @M5                  ; Case搬送Y2移動
ANB @M6                  ; Case搬送Y2移動
ANB @M7                  ; Case搬送Y2移動
ANB @M8                  ; Case搬送Y2移動
ANB @M9                  ; Case搬送Y2移動
ANB @M10                 ; Case搬送Y2移動
ANB @M11                 ; Case搬送Y2移動
ANB @M12                 ; Case搬送Y2移動
ANB @M13                 ; Case搬送Y2移動
ANB @M14                 ; Case搬送Y2移動
ANB @M15                 ; Case搬送Y2移動
ANB @M16                 ; Case搬送Y2移動
ANB @M17                 ; Case搬送Y2移動
ANB @M18                 ; Case搬送Y2移動
ANB @M19                 ; Case搬送Y2移動
ANB @M20                 ; Case搬送Y2移動
ANB @M22                 ; Case搬送Y2移動
ANB @M23                 ; Case搬送Y2移動
ANB @M24                 ; Case搬送Y2移動
ANB R31708               ; Case搬送Y2起動
ANB R31709               ; Case搬送Y2起動
ANB R32001               ; Case搬送Y2移動
INV
OUT M3803                ; Case搬送Y2移動指示有
LD M3803                 ; Case搬送Y2移動指示有
MCALL P_MOVE_K K5 K4 D3050 M3801 M3800 M3802;搬送Y2   移動No.  搬送Y2 移動異常  搬送Y2 移動完了  搬送Y2 移動中
;<h1/>異常検出
;
LD CR2002                ; 常時ON
MPS
LD M3963                 ; Jig No.異常
OR M3964                 ; 投入後　  Jig No.異常
LDB B0560                ; ﾕﾆｯﾄ3_異常1BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B060                 ; ﾕﾆｯﾄ3_JIG番号異常
ORL
ANL
OUT B060                 ; ﾕﾆｯﾄ3_JIG番号異常
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0560                 ; ﾕﾆｯﾄ3_異常1BZ停止
AND B060                 ; ﾕﾆｯﾄ3_JIG番号異常
ANL
OUT B0560                ; ﾕﾆｯﾄ3_異常1BZ停止
LD M551                  ; SMA441ｱﾗｰﾑﾘｾｯﾄ
AND X5680                ; 軸4 軸ｴﾗｰ中
TMR K390 K30             ; SMA441ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
LD CR2002                ; 常時ON
MPS
LD T390                  ; SMA441ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
LD M64                   ; 運転準備
AND X5715                ; 軸4 ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
ORL
LDB B0561                ; ﾕﾆｯﾄ3_異常2BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B061                 ; SMA441ｱﾗｰﾑ
ORL
ANL
OUT B061                 ; SMA441ｱﾗｰﾑ
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0561                 ; ﾕﾆｯﾄ3_異常2BZ停止
AND B061                 ; SMA441ｱﾗｰﾑ
ANL
OUT B0561                ; ﾕﾆｯﾄ3_異常2BZ停止
LD CR2002                ; 常時ON
MPS
LD CR2003                ; 常時OFF
LDB B0562                ; ﾕﾆｯﾄ3_異常3BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B062                 ; ﾕﾆｯﾄ3_異常3
ORL
ANL
OUT B062                 ; ﾕﾆｯﾄ3_異常3
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0562                 ; ﾕﾆｯﾄ3_異常3BZ停止
AND B062                 ; ﾕﾆｯﾄ3_異常3
ANL
OUT B0562                ; ﾕﾆｯﾄ3_異常3BZ停止
LD CR2002                ; 常時ON
MPS
LD CR2003                ; 常時OFF
LDB B0563                ; ﾕﾆｯﾄ3_異常4BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B063                 ; ﾕﾆｯﾄ3_異常4
ORL
ANL
OUT B063                 ; ﾕﾆｯﾄ3_異常4
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0563                 ; ﾕﾆｯﾄ3_異常4BZ停止
AND B063                 ; ﾕﾆｯﾄ3_異常4
ANL
OUT B0563                ; ﾕﾆｯﾄ3_異常4BZ停止
LD CR2002                ; 常時ON
MPS
LD CR2003                ; 常時OFF
LDB B0564                ; ﾕﾆｯﾄ3_異常5BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B064                 ; ﾕﾆｯﾄ3_異常4
ORL
ANL
OUT B064                 ; ﾕﾆｯﾄ3_異常4
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0564                 ; ﾕﾆｯﾄ3_異常5BZ停止
AND B064                 ; ﾕﾆｯﾄ3_異常4
ANL
OUT B0564                ; ﾕﾆｯﾄ3_異常5BZ停止
LD CR2002                ; 常時ON
MPS
LD M3917                 ; 塗布位置　 Case不明
LDB B0565                ; ﾕﾆｯﾄ3_異常6BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B065                 ; 塗布位置ｹｰｽ行方不明
ORL
ANL
OUT B065                 ; 塗布位置ｹｰｽ行方不明
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0565                 ; ﾕﾆｯﾄ3_異常6BZ停止
AND B065                 ; 塗布位置ｹｰｽ行方不明
ANL
OUT B0565                ; ﾕﾆｯﾄ3_異常6BZ停止
LD CR2002                ; 常時ON
MPS
LD M3918                 ; 嵌合位置ﾜｰｸ不明
LDB B0566                ; ﾕﾆｯﾄ3_異常7BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B066                 ; 嵌合位置ｹｰｽ行方不明
ORL
ANL
OUT B066                 ; 嵌合位置ｹｰｽ行方不明
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0566                 ; ﾕﾆｯﾄ3_異常7BZ停止
AND B066                 ; 嵌合位置ｹｰｽ行方不明
ANL
OUT B0566                ; ﾕﾆｯﾄ3_異常7BZ停止
LD CR2002                ; 常時ON
MPS
LD M3916                 ; 受私位置ﾜｰｸ不明
LDB B0567                ; ﾕﾆｯﾄ3_異常8BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B067                 ; 受渡位置ﾜｰｸ行方不明
ORL
ANL
OUT B067                 ; 受渡位置ﾜｰｸ行方不明
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0567                 ; ﾕﾆｯﾄ3_異常8BZ停止
AND B067                 ; 受渡位置ﾜｰｸ行方不明
ANL
OUT B0567                ; ﾕﾆｯﾄ3_異常8BZ停止
;異常ﾌﾞｻﾞｰまとめ
LD B060                  ; ﾕﾆｯﾄ3_JIG番号異常
ANB B0560                ; ﾕﾆｯﾄ3_異常1BZ停止
LD B061                  ; SMA441ｱﾗｰﾑ
ANB B0561                ; ﾕﾆｯﾄ3_異常2BZ停止
ORL
LD B062                  ; ﾕﾆｯﾄ3_異常3
ANB B0562                ; ﾕﾆｯﾄ3_異常3BZ停止
ORL
LD B063                  ; ﾕﾆｯﾄ3_異常4
ANB B0563                ; ﾕﾆｯﾄ3_異常4BZ停止
ORL
LD B064                  ; ﾕﾆｯﾄ3_異常4
ANB B0564                ; ﾕﾆｯﾄ3_異常5BZ停止
ORL
LD B065                  ; 塗布位置ｹｰｽ行方不明
ANB B0565                ; ﾕﾆｯﾄ3_異常6BZ停止
ORL
LD B066                  ; 嵌合位置ｹｰｽ行方不明
ANB B0566                ; ﾕﾆｯﾄ3_異常7BZ停止
ORL
LD B067                  ; 受渡位置ﾜｰｸ行方不明
ANB B0567                ; ﾕﾆｯﾄ3_異常8BZ停止
ORL
OUT M3909                ; ﾕﾆｯﾄ3異常BZ補助
END
ENDH
