DEVICE:53
;MODULE:除材Y軸ax5
;MODULE_TYPE:0
;SCRIPT_TYPE:
;<h1/>設定値制限
;'設定値制限
;
;FM12004.L = LIMIT ( -80000, 0, FM12004.L )		'待機位置_目標値
;FM12016.D = LIMIT ( 1, 2000, FM12016.D )			'待機位置_運転速度
;FM12018.D = LIMIT ( 1, 9999, FM12018.D )			'待機位置_加速時間
;FM12020.D = LIMIT ( 1, 9999, FM12020.D )			'待機位置_減速時間
;
;FM12204.L = LIMIT ( -80000, 0, FM12304.L )		'吸着確認位置_目標値
;FM12216.D = LIMIT ( 1, 2000, FM12416.D )			'吸着確認位置_運転速度
;FM12218.D = LIMIT ( 1, 9999, FM12418.D )			'吸着確認位置_加速時間
;FM12220.D = LIMIT ( 1, 9999, FM12420.D )			'吸着確認位置_減速時間
;
;FM12304.L = LIMIT ( -80000, 0, FM12304.L )		'検査投入位置_目標値
;FM12316.D = LIMIT ( 1, 2000, FM12416.D )			'検査投入位置_運転速度
;FM12318.D = LIMIT ( 1, 9999, FM12418.D )			'検査投入位置_加速時間
;FM12320.D = LIMIT ( 1, 9999, FM12420.D )			'検査投入位置_減速時間
;
;FM12404.L = LIMIT ( -80000, 0, FM12404.L )		'返却位置_目標値
;FM12416.D = LIMIT ( 1, 2000, FM12416.D )			'返却位置_運転速度
;FM12418.D = LIMIT ( 1, 9999, FM12418.D )			'返却位置_加速時間
;FM12420.D = LIMIT ( 1, 9999, FM12420.D )			'返却位置_減速時間
;
;FM12804.L = LIMIT ( -80000, 0, FM12804.L )		'ﾒﾝﾃ位置_目標値
;FM12816.D = LIMIT ( 1, 2000, FM12816.D )			'ﾒﾝﾃ位置_運転速度
;FM12818.D = LIMIT ( 1, 9999, FM12818.D )			'ﾒﾝﾃ位置_加速時間
;FM12820.D = LIMIT ( 1, 9999, FM12820.D )			'ﾒﾝﾃ位置_減速時間
;
;FM12904.L = LIMIT ( -60000, 0, FM12904.L )		'画像基準位置_目標値
;FM12916.D = LIMIT ( 1, 2000, FM12916.D )			'画像基準位置_運転速度
;FM12918.D = LIMIT ( 1, 9999, FM12918.D )			'画像基準位置_加速時間
;FM12920.D = LIMIT ( 1, 9999, FM12920.D )			'画像基準位置_減速時間
;
LDB CR2002               ; 常時ON
NCJ #1000
;'設定値制限
;
;FM12004.L = LIMIT ( -80000, 0, FM12004.L )		'待機位置_目標値
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT.L -80000 +0 FM12004 @VM0;TP除材Y軸 待機位置 目標座標
LDA.L @VM0
CON
STA.L FM12004            ; TP除材Y軸 待機位置 目標座標
;FM12016.D = LIMIT ( 1, 2000, FM12016.D )			'待機位置_運転速度
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #2000 FM12016 @VM2;TP除材Y軸 待機位置 速度
LDA @VM2
CON
EXT
CON
STA.D FM12016            ; TP除材Y軸 待機位置 速度
;FM12018.D = LIMIT ( 1, 9999, FM12018.D )			'待機位置_加速時間
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #9999 FM12018 @VM3;TP除材Y軸 待機位置 加速時間
LDA @VM3
CON
EXT
CON
STA.D FM12018            ; TP除材Y軸 待機位置 加速時間
;FM12020.D = LIMIT ( 1, 9999, FM12020.D )			'待機位置_減速時間
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #9999 FM12020 @VM4;TP除材Y軸 待機位置 減速時間
LDA @VM4
CON
EXT
CON
STA.D FM12020            ; TP除材Y軸 待機位置 減速時間
;FM12204.L = LIMIT ( -80000, 0, FM12304.L )		'吸着確認位置_目標値
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT.L -80000 +0 FM12304 @VM5;TP除材Y軸 ﾊﾟﾚｯﾄ置 目標座標
LDA.L @VM5
CON
STA.L FM12204            ; TP除材Y軸 吸着確認 目標座標
;FM12216.D = LIMIT ( 1, 2000, FM12416.D )			'吸着確認位置_運転速度
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #2000 FM12416 @VM7;TP除材Y軸 NG位置 速度
LDA @VM7
CON
EXT
CON
STA.D FM12216            ; TP除材Y軸 吸着確認 速度
;FM12218.D = LIMIT ( 1, 9999, FM12418.D )			'吸着確認位置_加速時間
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #9999 FM12418 @VM8;TP除材Y軸 NG位置 加速時間
LDA @VM8
CON
EXT
CON
STA.D FM12218            ; TP除材Y軸 吸着確認 加速時間
;FM12220.D = LIMIT ( 1, 9999, FM12420.D )			'吸着確認位置_減速時間
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #9999 FM12420 @VM9;TP除材Y軸 NG位置 減速時間
LDA @VM9
CON
EXT
CON
STA.D FM12220            ; TP除材Y軸 吸着確認 減速時間
;FM12304.L = LIMIT ( -80000, 0, FM12304.L )		'検査投入位置_目標値
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT.L -80000 +0 FM12304 @VM10;TP除材Y軸 ﾊﾟﾚｯﾄ置 目標座標
LDA.L @VM10
CON
STA.L FM12304            ; TP除材Y軸 ﾊﾟﾚｯﾄ置 目標座標
;FM12316.D = LIMIT ( 1, 2000, FM12416.D )			'検査投入位置_運転速度
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #2000 FM12416 @VM12;TP除材Y軸 NG位置 速度
LDA @VM12
CON
EXT
CON
STA.D FM12316            ; TP除材Y軸 ﾊﾟﾚｯﾄ置 速度
;FM12318.D = LIMIT ( 1, 9999, FM12418.D )			'検査投入位置_加速時間
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #9999 FM12418 @VM13;TP除材Y軸 NG位置 加速時間
LDA @VM13
CON
EXT
CON
STA.D FM12318            ; TP除材Y軸 ﾊﾟﾚｯﾄ置 加速時間
;FM12320.D = LIMIT ( 1, 9999, FM12420.D )			'検査投入位置_減速時間
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #9999 FM12420 @VM14;TP除材Y軸 NG位置 減速時間
LDA @VM14
CON
EXT
CON
STA.D FM12320            ; TP除材Y軸 ﾊﾟﾚｯﾄ置 減速時間
;FM12404.L = LIMIT ( -80000, 0, FM12404.L )		'返却位置_目標値
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT.L -80000 +0 FM12404 @VM15;TP除材Y軸 NG位置 目標座標
LDA.L @VM15
CON
STA.L FM12404            ; TP除材Y軸 NG位置 目標座標
;FM12416.D = LIMIT ( 1, 2000, FM12416.D )			'返却位置_運転速度
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #2000 FM12416 @VM17;TP除材Y軸 NG位置 速度
LDA @VM17
CON
EXT
CON
STA.D FM12416            ; TP除材Y軸 NG位置 速度
;FM12418.D = LIMIT ( 1, 9999, FM12418.D )			'返却位置_加速時間
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #9999 FM12418 @VM18;TP除材Y軸 NG位置 加速時間
LDA @VM18
CON
EXT
CON
STA.D FM12418            ; TP除材Y軸 NG位置 加速時間
;FM12420.D = LIMIT ( 1, 9999, FM12420.D )			'返却位置_減速時間
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #9999 FM12420 @VM19;TP除材Y軸 NG位置 減速時間
LDA @VM19
CON
EXT
CON
STA.D FM12420            ; TP除材Y軸 NG位置 減速時間
;FM12804.L = LIMIT ( -80000, 0, FM12804.L )		'ﾒﾝﾃ位置_目標値
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT.L -80000 +0 FM12804 @VM20;TP除材Y軸 画像基準 目標座標
LDA.L @VM20
CON
STA.L FM12804            ; TP除材Y軸 画像基準 目標座標
;FM12816.D = LIMIT ( 1, 2000, FM12816.D )			'ﾒﾝﾃ位置_運転速度
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #2000 FM12816 @VM22;TP除材Y軸 画像基準 速度
LDA @VM22
CON
EXT
CON
STA.D FM12816            ; TP除材Y軸 画像基準 速度
;FM12818.D = LIMIT ( 1, 9999, FM12818.D )			'ﾒﾝﾃ位置_加速時間
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #9999 FM12818 @VM23;TP除材Y軸 画像基準 加速時間
LDA @VM23
CON
EXT
CON
STA.D FM12818            ; TP除材Y軸 画像基準 加速時間
;FM12820.D = LIMIT ( 1, 9999, FM12820.D )			'ﾒﾝﾃ位置_減速時間
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #9999 FM12820 @VM24;TP除材Y軸 画像基準 減速時間
LDA @VM24
CON
EXT
CON
STA.D FM12820            ; TP除材Y軸 画像基準 減速時間
;FM12904.L = LIMIT ( -60000, 0, FM12904.L )		'画像基準位置_目標値
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT.L -60000 +0 FM12904 @VM25;TP除材Y軸 ﾊﾟﾚｯﾄ1基準 目標座標
LDA.L @VM25
CON
STA.L FM12904            ; TP除材Y軸 ﾊﾟﾚｯﾄ1基準 目標座標
;FM12916.D = LIMIT ( 1, 2000, FM12916.D )			'画像基準位置_運転速度
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #2000 FM12916 @VM27;TP除材Y軸 ﾊﾟﾚｯﾄ1基準 速度
LDA @VM27
CON
EXT
CON
STA.D FM12916            ; TP除材Y軸 ﾊﾟﾚｯﾄ1基準 速度
;FM12918.D = LIMIT ( 1, 9999, FM12918.D )			'画像基準位置_加速時間
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #9999 FM12918 @VM28;TP除材Y軸 ﾊﾟﾚｯﾄ1基準 加速時間
LDA @VM28
CON
EXT
CON
STA.D FM12918            ; TP除材Y軸 ﾊﾟﾚｯﾄ1基準 加速時間
;FM12920.D = LIMIT ( 1, 9999, FM12920.D )			'画像基準位置_減速時間
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #9999 FM12920 @VM29;TP除材Y軸 ﾊﾟﾚｯﾄ1基準 減速時間
LDA @VM29
CON
EXT
CON
STA.D FM12920            ; TP除材Y軸 ﾊﾟﾚｯﾄ1基準 減速時間
LABEL #1000
;
LD R67604                ; 軸5 軸制御中
ANB MR400                ; 全ﾄﾞｱ閉確認
OUT R67202               ; 軸5 減速停止
LD CR2002                ; 常時ON
OUT R3604                ; 除材Y軸 電源MC
LD CR2002                ; 常時ON
ANB @MR601               ; 除材Y軸 ｻｰﾎﾞOFF
OUT R67313               ; 軸5 ｻｰﾎﾞON
LD R62800                ; ML16動作可能
AND R67713               ; 軸5 ｻｰﾎﾞﾚﾃﾞｨ
ANB MR7102               ; ERR12 除材Y軸ﾄﾞﾗｲﾊﾞｰ異常
ANB MR7103               ; ERR13 除材Y軸軸ｴﾗｰ
ANB R62802               ; ｴﾗｰ中
OUT MR804                ; 除材Y軸 動作可能
LDP B0339                ; 除材Y軸 ｻｰﾎﾞOFF_SW
AND B01D4                ; ﾏｽﾀｰﾛｸﾞｲﾝ中PL
OUT @MR600               ; 除材Y軸 ｻｰﾎﾞOFF_PLS
LD @MR600                ; 除材Y軸 ｻｰﾎﾞOFF_PLS
ANB @MR601               ; 除材Y軸 ｻｰﾎﾞOFF
LDB @MR600               ; 除材Y軸 ｻｰﾎﾞOFF_PLS
AND @MR601               ; 除材Y軸 ｻｰﾎﾞOFF
ORL
AND MR100                ; 手動ﾓｰﾄﾞ
OUT @MR601               ; 除材Y軸 ｻｰﾎﾞOFF
LD @MR601                ; 除材Y軸 ｻｰﾎﾞOFF
OUT B0439                ; 除材Y軸 ｻｰﾎﾞOFF_PL
;<h1/>原点復帰
LDP B0320                ; 除材Y軸 原点復帰SW
OUT @MR000               ; 手動 除材Y軸 原点復帰
;ｲﾝﾀｰﾛｯｸ
LD MR804                 ; 除材Y軸 動作可能
LD MR6500                ; 除材Z軸 原点位置
OR MR6501                ; 除材Z軸 待機位置
ANL
ANB MR7102               ; ERR12 除材Y軸ﾄﾞﾗｲﾊﾞｰ異常
ANB MR7103               ; ERR13 除材Y軸軸ｴﾗｰ
AND MR400                ; 全ﾄﾞｱ閉確認
LD MR100                 ; 手動ﾓｰﾄﾞ
OR MR101                 ; 自動ﾓｰﾄﾞ
ANL
OUT MR10402              ; ﾏｸﾛHP 除材Y軸 原点復帰IL
LD @MR000                ; 手動 除材Y軸 原点復帰
AND MR100                ; 手動ﾓｰﾄﾞ
LD MR6200                ; 除材Y軸 原点復帰指令
AND MR101                ; 自動ﾓｰﾄﾞ
ORL
OR @MR005                ; 除材Y軸 原点復帰
ANB MR10409              ; ﾏｸﾛHP 除材Y軸 原点復帰完了
ANB MR10410              ; ﾏｸﾛHP 除材Y軸 原点復帰異常
AND MR10402              ; ﾏｸﾛHP 除材Y軸 原点復帰IL
OUT @MR005               ; 除材Y軸 原点復帰
;ﾎﾟｲﾝﾄﾊﾟﾗﾒｰﾀ転送
;出力
LD @MR005                ; 除材Y軸 原点復帰
OUT MR10400              ; ﾏｸﾛHP 除材Y軸 原点復帰起動
LD MR004                 ; ﾘｾｯﾄSW
OUT MR10403              ; ﾏｸﾛHP 除材Y軸 原点復帰ﾘｾｯﾄSW
LD CR2002                ; 常時ON
MSTRT KE_ML_HP #5 #1 MR10400 DM19040;ﾏｸﾛHP 除材Y軸 原点復帰起動  除材Y軸 ｴﾗｰ状態
LD MR10409               ; ﾏｸﾛHP 除材Y軸 原点復帰完了
OR MR6312                ; 除材Y軸 原点復帰記憶
AND MR804                ; 除材Y軸 動作可能
ANB MR7102               ; ERR12 除材Y軸ﾄﾞﾗｲﾊﾞｰ異常
ANB MR7103               ; ERR13 除材Y軸軸ｴﾗｰ
ANPB @MR005              ; 除材Y軸 原点復帰
OUT MR6312               ; 除材Y軸 原点復帰記憶
LD MR10412               ; ﾏｸﾛHP 除材Y軸 原点復帰要求
OUT R67212               ; 軸5 原点復帰要求
;ﾗﾝﾌﾟ
LD MR10408               ; ﾏｸﾛHP 除材Y軸 原点復帰中
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR MR6300                ; 除材Y軸 原点位置
OUT B0420                ; 除材Y軸 原点復帰PL
;<h1/>手動位置決め
LD MR100                 ; 手動ﾓｰﾄﾞ
ANB @MR305               ; 除材Y軸 位置決め
MPS
ANP B0321                ; 除材Y軸 待機位置SW
DW #1 DM55               ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
MRD
ANP B0322                ; 除材Y軸 除材反転 取出位置SW
DW #2 DM55               ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
MRD
ANP B0323                ; 除材Y軸 吸着確認 位置SW
DW #3 DM55               ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
MRD
ANP B0324                ; 除材Y軸 ﾊﾟﾚｯﾄ置 位置SW
DW #4 DM55               ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
MRD
ANP B0325                ; 除材Y軸 NG位置SW
DW #5 DM55               ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
MRD
ANP B0328                ; 除材Y軸 ﾒﾝﾃﾅﾝｽ位置SW
DW #8 DM55               ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
MRD
ANP B0329                ; 除材Y軸 画像基準 位置SW
DW #9 DM55               ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
MRD
ANP B032E                ; 除材Y軸 ﾊﾟﾚｯﾄ1 基準位置SW
DW #10 DM55              ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
MPP
ANP B032F                ; 除材Y軸 ﾊﾟﾚｯﾄ2 基準位置SW
DW #11 DM55              ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
LDPB B0321               ; 除材Y軸 待機位置SW
ANPB B0322               ; 除材Y軸 除材反転 取出位置SW
ANPB B0323               ; 除材Y軸 吸着確認 位置SW
ANPB B0324               ; 除材Y軸 ﾊﾟﾚｯﾄ置 位置SW
ANPB B0325               ; 除材Y軸 NG位置SW
ANPB B0328               ; 除材Y軸 ﾒﾝﾃﾅﾝｽ位置SW
ANPB B0329               ; 除材Y軸 画像基準 位置SW
ANPB B032E               ; 除材Y軸 ﾊﾟﾚｯﾄ1 基準位置SW
ANPB B032F               ; 除材Y軸 ﾊﾟﾚｯﾄ2 基準位置SW
INV
ANB @MR305               ; 除材Y軸 位置決め
OUT @MR300               ; 手動 除材Y軸 位置決め
;<h1/>自動位置決め
LD MR101                 ; 自動ﾓｰﾄﾞ
ANB @MR305               ; 除材Y軸 位置決め
MPS
AND MR6201               ; 除材Y軸 待機位置指令
DW #1 DM55               ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
MRD
AND MR6202               ; 除材Y軸 除材反転 取出位置指令
DW #2 DM55               ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
MRD
AND MR6203               ; 除材Y軸 吸着確認 位置指令
DW #3 DM55               ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
MRD
AND MR6204               ; 除材Y軸 ﾊﾟﾚｯﾄ置 位置指令
DW #4 DM55               ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
MPP
AND MR6205               ; 除材Y軸 NG位置指令
DW #5 DM55               ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
LDB MR6201               ; 除材Y軸 待機位置指令
ANB MR6202               ; 除材Y軸 除材反転 取出位置指令
ANB MR6203               ; 除材Y軸 吸着確認 位置指令
ANB MR6204               ; 除材Y軸 ﾊﾟﾚｯﾄ置 位置指令
ANB MR6205               ; 除材Y軸 NG位置指令
INV
ANB @MR305               ; 除材Y軸 位置決め
MPS
AND @MR303
OUT @MR302               ; 自動除材Y軸 位置決め
MPP
OUT @MR303
;<h1/>ｲﾝﾀｰﾛｯｸ
LD MR804                 ; 除材Y軸 動作可能
AND MR6312               ; 除材Y軸 原点復帰記憶
LD MR6500                ; 除材Z軸 原点位置
OR MR6501                ; 除材Z軸 待機位置
ANL
ANB MR7102               ; ERR12 除材Y軸ﾄﾞﾗｲﾊﾞｰ異常
ANB MR7103               ; ERR13 除材Y軸軸ｴﾗｰ
AND MR400                ; 全ﾄﾞｱ閉確認
LD MR100                 ; 手動ﾓｰﾄﾞ
OR MR101                 ; 自動ﾓｰﾄﾞ
ANL
OUT MR11402              ; ﾏｸﾛPOS 除材Y軸 位置決めIL
;<h1/>位置決め開始
LDB R67604               ; 軸5 軸制御中
LD @MR300                ; 手動 除材Y軸 位置決め
AND MR100                ; 手動ﾓｰﾄﾞ
LD @MR302                ; 自動除材Y軸 位置決め
AND MR101                ; 自動ﾓｰﾄﾞ
ORL
ANL
OR @MR305                ; 除材Y軸 位置決め
ANB MR11409              ; ﾏｸﾛPOS 除材Y軸 位置決め完了
ANB MR11410              ; ﾏｸﾛPOS 除材Y軸 位置決め異常
AND MR11402              ; ﾏｸﾛPOS 除材Y軸 位置決めIL
OUT @MR305               ; 除材Y軸 位置決め
;<h1/>ﾎﾟｲﾝﾄﾊﾟﾗﾒｰﾀ演算
;除材反転取出位置演算
;'除材Y軸 除材反転取出位置演算
;
;FM12104.L = FM12804.L + DM1210.L
LD CR2002                ; 常時ON
NCJ #1004
;'除材Y軸 除材反転取出位置演算
;
;FM12104.L = FM12804.L + DM1210.L
LD CR2002                ; 常時ON
LDA.L FM12804            ; TP除材Y軸 画像基準 目標座標
CON
ADD.L DM1210             ; 画像除材Y軸 除材反転取出座標
CON
STA.L FM12104            ; TP除材Y軸 取出位置 目標座標
LABEL #1004
;
;Y軸吸着確認位置演算
;'Y軸吸着確認位置演算
;
;FM12204.L = FM12240.L + FM9588.L	'Y軸吸着確認位置+Y軸吸着確認位置補正量
LD CR2002                ; 常時ON
NCJ #1002
;'Y軸吸着確認位置演算
;
;FM12204.L = FM12240.L + FM9588.L	'Y軸吸着確認位置+Y軸吸着確認位置補正量
LD CR2002                ; 常時ON
LDA.L FM12240            ; TP除材Y軸 吸着確認 補正前座標
CON
ADD.L FM9588             ; ﾜｰｸﾚｼﾋﾟその他(Y検査位置補正量)
CON
STA.L FM12204            ; TP除材Y軸 吸着確認 目標座標
LABEL #1002
;
;Y軸手動列数
;'ﾊﾟﾚｯﾄ1 Y軸手動列数
;FM112 = LIMIT ( 1, 999, FM112 )
;DM2110 = FM112
;
;'ﾊﾟﾚｯﾄ2 Y軸手動列数
;FM116 = LIMIT ( 1, 999, FM116 )
;DM2112 = FM116
LD MR100                 ; 手動ﾓｰﾄﾞ
NCJ #1012
;'ﾊﾟﾚｯﾄ1 Y軸手動列数
;
;FM112 = LIMIT ( 1, 999, FM112 )
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #999 FM112 @VM30; TPY軸 ﾊﾟﾚｯﾄ1列 設定
LDA @VM30
CON
STA FM112                ; TPY軸 ﾊﾟﾚｯﾄ1列 設定
;DM2110 = FM112
;
LD CR2002                ; 常時ON
MOV FM112 DM2110         ; TPY軸 ﾊﾟﾚｯﾄ1列 設定  Y軸ﾊﾟﾚｯﾄ1 現在列
;'ﾊﾟﾚｯﾄ2 Y軸手動列数
;
;FM116 = LIMIT ( 1, 999, FM116 )
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #999 FM116 @VM31; TPY軸 ﾊﾟﾚｯﾄ2列 設定
LDA @VM31
CON
STA FM116                ; TPY軸 ﾊﾟﾚｯﾄ2列 設定
;DM2112 = FM116
LD CR2002                ; 常時ON
MOV FM116 DM2112         ; TPY軸 ﾊﾟﾚｯﾄ2列 設定  Y軸ﾊﾟﾚｯﾄ2 現在列
LABEL #1012
;
LD MR101                 ; 自動ﾓｰﾄﾞ
MOV DM310 DM2110         ; 自動 Y軸ﾊﾟﾚｯﾄ1 現在列  Y軸ﾊﾟﾚｯﾄ1 現在列
MOV DM312 DM2112         ; 自動 Y軸ﾊﾟﾚｯﾄ2 現在列  Y軸ﾊﾟﾚｯﾄ2 現在列
;'ｵﾌｾｯﾄ量算出
;
;IF FM9136 <> 0 THEN									'ｵﾌｾｯﾄA
;	DM210.L = (DM2110 - 1) / FM9136 * FM9130.L
;ELSE
;	DM210.L = 0
;END IF
;
;IF FM9137 <> 0 THEN									'ｵﾌｾｯﾄB
;	DM212.L = (DM2110 - 1) / FM9137 * FM9132.L
;ELSE
;	DM212.L = 0
;END IF
;
;IF FM9138 <> 0 THEN									'ｵﾌｾｯﾄC
;	DM214.L = (DM2110 - 1) / FM9138 * FM9134.L
;ELSE
;	DM214.L = 0
;END IF
;
;DM11186.L = DM210.L + DM212.L + DM214.L				'Y軸ｵﾌｾｯﾄ値合計
LD CR2002                ; 常時ON
NCJ #1006
;'ｵﾌｾｯﾄ量算出
;
;IF FM9136 <> 0 THEN									'ｵﾌｾｯﾄA
;
LD<> FM9136 #0           ; ﾊﾟﾚｯﾄﾚｼﾋﾟYｵﾌｾｯﾄA周期
NCJ #2000
;	DM210.L = (DM2110 - 1) / FM9136 * FM9130.L
;
LD CR2002                ; 常時ON
LDA FM9136               ; ﾊﾟﾚｯﾄﾚｼﾋﾟYｵﾌｾｯﾄA周期
CON
EXT
CON
STA.L @VM32
CON
LDA DM2110               ; Y軸ﾊﾟﾚｯﾄ1 現在列
CON
EXT
CON
SUB.L +1
CON
EXT.L
CON
DIV.L @VM32
CON
MUL.L FM9130             ; ﾊﾟﾚｯﾄﾚｼﾋﾟYｵﾌｾｯﾄA量
CON
STA.L DM210              ; Y軸ｵﾌｾｯﾄA量
;ELSE
;
LD CR2002                ; 常時ON
CJ #2001
LABEL #2000
;	DM210.L = 0
;
LD CR2002                ; 常時ON
MOV.L +0 DM210           ; Y軸ｵﾌｾｯﾄA量
;END IF
;
LABEL #2001
;IF FM9137 <> 0 THEN									'ｵﾌｾｯﾄB
;
LD<> FM9137 #0           ; ﾊﾟﾚｯﾄﾚｼﾋﾟYｵﾌｾｯﾄB周期
NCJ #2002
;	DM212.L = (DM2110 - 1) / FM9137 * FM9132.L
;
LD CR2002                ; 常時ON
LDA FM9137               ; ﾊﾟﾚｯﾄﾚｼﾋﾟYｵﾌｾｯﾄB周期
CON
EXT
CON
STA.L @VM34
CON
LDA DM2110               ; Y軸ﾊﾟﾚｯﾄ1 現在列
CON
EXT
CON
SUB.L +1
CON
EXT.L
CON
DIV.L @VM34
CON
MUL.L FM9132             ; ﾊﾟﾚｯﾄﾚｼﾋﾟYｵﾌｾｯﾄB量
CON
STA.L DM212              ; Y軸ｵﾌｾｯﾄB量
;ELSE
;
LD CR2002                ; 常時ON
CJ #2003
LABEL #2002
;	DM212.L = 0
;
LD CR2002                ; 常時ON
MOV.L +0 DM212           ; Y軸ｵﾌｾｯﾄB量
;END IF
;
LABEL #2003
;IF FM9138 <> 0 THEN									'ｵﾌｾｯﾄC
;
LD<> FM9138 #0           ; ﾊﾟﾚｯﾄﾚｼﾋﾟYｵﾌｾｯﾄC周期
NCJ #2004
;	DM214.L = (DM2110 - 1) / FM9138 * FM9134.L
;
LD CR2002                ; 常時ON
LDA FM9138               ; ﾊﾟﾚｯﾄﾚｼﾋﾟYｵﾌｾｯﾄC周期
CON
EXT
CON
STA.L @VM36
CON
LDA DM2110               ; Y軸ﾊﾟﾚｯﾄ1 現在列
CON
EXT
CON
SUB.L +1
CON
EXT.L
CON
DIV.L @VM36
CON
MUL.L FM9134             ; ﾊﾟﾚｯﾄﾚｼﾋﾟYｵﾌｾｯﾄC量
CON
STA.L DM214              ; Y軸ｵﾌｾｯﾄC量
;ELSE
;
LD CR2002                ; 常時ON
CJ #2005
LABEL #2004
;	DM214.L = 0
;
LD CR2002                ; 常時ON
MOV.L +0 DM214           ; Y軸ｵﾌｾｯﾄC量
;END IF
;
LABEL #2005
;DM11186.L = DM210.L + DM212.L + DM214.L				'Y軸ｵﾌｾｯﾄ値合計
LD CR2002                ; 常時ON
LDA.L DM210              ; Y軸ｵﾌｾｯﾄA量
CON
ADD.L DM212              ; Y軸ｵﾌｾｯﾄB量
CON
ADD.L DM214              ; Y軸ｵﾌｾｯﾄC量
CON
STA.L DM11186            ; Y軸合計ｵﾌｾｯﾄ量
LABEL #1006
;
LD CR2003                ; 常時OFF
MOV.L +0 DM11186         ; Y軸合計ｵﾌｾｯﾄ量
;'現在行による演算基準ﾎﾟｲﾝﾄ算出
;FM12340.L = FM12904.L + FM102.L
;DM2100.L = FM12340.L + FM9112.L + FM9512.L
;DM2102.L =	DM2100.L - ((DM2110 - 1) * FM9114.D) - DM11186.L
LD CR2002                ; 常時ON
NCJ #1005
;'現在行による演算基準ﾎﾟｲﾝﾄ算出
;
;FM12340.L = FM12904.L + FM102.L
;
LD CR2002                ; 常時ON
LDA.L FM12904            ; TP除材Y軸 ﾊﾟﾚｯﾄ1基準 目標座標
CON
ADD.L FM102              ; 裏TP ﾊﾟﾚｯﾄ1Y軸基準_ﾊﾟﾚｯﾄ原点
CON
STA.L FM12340            ; TP除材Y軸 ﾊﾟﾚｯﾄ1原点座標
;DM2100.L = FM12340.L + FM9112.L + FM9512.L
;
LD CR2002                ; 常時ON
LDA.L FM12340            ; TP除材Y軸 ﾊﾟﾚｯﾄ1原点座標
CON
ADD.L FM9112             ; ﾊﾟﾚｯﾄﾚｼﾋﾟ(Y_P0寸法)
CON
ADD.L FM9512             ; ﾜｰｸﾚｼﾋﾟ基本(ﾊﾟﾚｯﾄ補正値Y軸)
CON
STA.L DM2100             ; Y軸ﾊﾟﾚｯﾄ1 ｽﾀｰﾄ位置基準
;DM2102.L =	DM2100.L - ((DM2110 - 1) * FM9114.D) - DM11186.L
LD CR2002                ; 常時ON
LDA DM2110               ; Y軸ﾊﾟﾚｯﾄ1 現在列
CON
EXT
CON
SUB.L +1
CON
MUL.L FM9114             ; ﾊﾟﾚｯﾄﾚｼﾋﾟ(Y_ﾋﾟｯﾁ寸法)
CON
STA.L @VM38
CON
LDA.L DM2100             ; Y軸ﾊﾟﾚｯﾄ1 ｽﾀｰﾄ位置基準
CON
SUB.L @VM38
CON
SUB.L DM11186            ; Y軸合計ｵﾌｾｯﾄ量
CON
STA.L DM2102             ; Y軸ﾊﾟﾚｯﾄ1 ﾊﾟﾚｯﾄ置目標座標
LABEL #1005
;
;'現在行による演算基準ﾎﾟｲﾝﾄ算出
;FM12342.L = FM12944.L + FM106.L
;DM2104.L = FM12342.L + FM9112.L + FM9512.L
;DM2106.L =	DM2104.L - ((DM2112 - 1) * FM9114.D) - DM11186.L
LD CR2002                ; 常時ON
NCJ #1011
;'現在行による演算基準ﾎﾟｲﾝﾄ算出
;
;FM12342.L = FM12944.L + FM106.L
;
LD CR2002                ; 常時ON
LDA.L FM12944            ; TP除材Y軸 ﾊﾟﾚｯﾄ2基準 目標座標
CON
ADD.L FM106              ; 裏TP ﾊﾟﾚｯﾄ2Y軸基準_ﾊﾟﾚｯﾄ原点
CON
STA.L FM12342            ; TP除材Y軸 ﾊﾟﾚｯﾄ2原点座標
;DM2104.L = FM12342.L + FM9112.L + FM9512.L
;
LD CR2002                ; 常時ON
LDA.L FM12342            ; TP除材Y軸 ﾊﾟﾚｯﾄ2原点座標
CON
ADD.L FM9112             ; ﾊﾟﾚｯﾄﾚｼﾋﾟ(Y_P0寸法)
CON
ADD.L FM9512             ; ﾜｰｸﾚｼﾋﾟ基本(ﾊﾟﾚｯﾄ補正値Y軸)
CON
STA.L DM2104             ; Y軸ﾊﾟﾚｯﾄ2 ｽﾀｰﾄ位置基準
;DM2106.L =	DM2104.L - ((DM2112 - 1) * FM9114.D) - DM11186.L
LD CR2002                ; 常時ON
LDA DM2112               ; Y軸ﾊﾟﾚｯﾄ2 現在列
CON
EXT
CON
SUB.L +1
CON
MUL.L FM9114             ; ﾊﾟﾚｯﾄﾚｼﾋﾟ(Y_ﾋﾟｯﾁ寸法)
CON
STA.L @VM40
CON
LDA.L DM2104             ; Y軸ﾊﾟﾚｯﾄ2 ｽﾀｰﾄ位置基準
CON
SUB.L @VM40
CON
SUB.L DM11186            ; Y軸合計ｵﾌｾｯﾄ量
CON
STA.L DM2106             ; Y軸ﾊﾟﾚｯﾄ2 ﾊﾟﾚｯﾄ置目標座標
LABEL #1011
;
;'Y軸ﾊﾟﾚｯﾄ1置位置演算
;
;FM12304.L = DM2102.L + DM1310.L	'Y軸ﾊﾟﾚｯﾄ置位置目標座標へ代入
LD B0410                 ; 手動 ﾊﾟﾚｯﾄ1選択PL
AND MR100                ; 手動ﾓｰﾄﾞ
LDB MR3315               ; ﾊﾟﾚｯﾄ2整列
AND MR101                ; 自動ﾓｰﾄﾞ
ORL
AND=.L FM9574 +0         ; ﾜｰｸﾚｼﾋﾟ基本(ﾊﾟﾚｯﾄ置角度)
NCJ #1007
;'Y軸ﾊﾟﾚｯﾄ1置位置演算
;
;FM12304.L = DM2102.L + DM1310.L	'Y軸ﾊﾟﾚｯﾄ置位置目標座標へ代入
LD CR2002                ; 常時ON
LDA.L DM2102             ; Y軸ﾊﾟﾚｯﾄ1 ﾊﾟﾚｯﾄ置目標座標
CON
ADD.L DM1310             ; 画像除材Y軸 吸着確認座標
CON
STA.L FM12304            ; TP除材Y軸 ﾊﾟﾚｯﾄ置 目標座標
LABEL #1007
;
;'Y軸ﾊﾟﾚｯﾄ1置位置演算
;
;FM12304.L = DM2102.L - DM1310.L	'Y軸ﾊﾟﾚｯﾄ置位置目標座標へ代入
LD B0410                 ; 手動 ﾊﾟﾚｯﾄ1選択PL
AND MR100                ; 手動ﾓｰﾄﾞ
LDB MR3315               ; ﾊﾟﾚｯﾄ2整列
AND MR101                ; 自動ﾓｰﾄﾞ
ORL
AND=.L FM9574 +18000     ; ﾜｰｸﾚｼﾋﾟ基本(ﾊﾟﾚｯﾄ置角度)
NCJ #1008
;'Y軸ﾊﾟﾚｯﾄ1置位置演算
;
;FM12304.L = DM2102.L - DM1310.L	'Y軸ﾊﾟﾚｯﾄ置位置目標座標へ代入
LD CR2002                ; 常時ON
LDA.L DM2102             ; Y軸ﾊﾟﾚｯﾄ1 ﾊﾟﾚｯﾄ置目標座標
CON
SUB.L DM1310             ; 画像除材Y軸 吸着確認座標
CON
STA.L FM12304            ; TP除材Y軸 ﾊﾟﾚｯﾄ置 目標座標
LABEL #1008
;
;'Y軸ﾊﾟﾚｯﾄ1置位置演算
;
;FM12304.L = DM2102.L			'Y軸ﾊﾟﾚｯﾄ置位置目標座標へ代入
LD B0410                 ; 手動 ﾊﾟﾚｯﾄ1選択PL
AND MR100                ; 手動ﾓｰﾄﾞ
LDB MR3315               ; ﾊﾟﾚｯﾄ2整列
AND MR101                ; 自動ﾓｰﾄﾞ
ORL
AND<> FM9574 #0          ; ﾜｰｸﾚｼﾋﾟ基本(ﾊﾟﾚｯﾄ置角度)
AND<> FM9574 #18000      ; ﾜｰｸﾚｼﾋﾟ基本(ﾊﾟﾚｯﾄ置角度)
NCJ #1009
;'Y軸ﾊﾟﾚｯﾄ1置位置演算
;
;FM12304.L = DM2102.L			'Y軸ﾊﾟﾚｯﾄ置位置目標座標へ代入
LD CR2002                ; 常時ON
MOV.L DM2102 FM12304     ; Y軸ﾊﾟﾚｯﾄ1 ﾊﾟﾚｯﾄ置目標座標  TP除材Y軸 ﾊﾟﾚｯﾄ置 目標座標
LABEL #1009
;
;'Y軸ﾊﾟﾚｯﾄ2置位置演算
;
;FM12304.L = DM2106.L  + DM1310.L	'Y軸ﾊﾟﾚｯﾄ置位置目標座標へ代入
LD B0411                 ; 手動 ﾊﾟﾚｯﾄ2選択PL
AND MR100                ; 手動ﾓｰﾄﾞ
LD MR3315                ; ﾊﾟﾚｯﾄ2整列
AND MR101                ; 自動ﾓｰﾄﾞ
ORL
LD MR37800               ; 検査NGﾌﾗｸﾞ
ANB LR010                ; ﾊﾟﾚｯﾄ2OK/NG選択 ON:OK OFF:NG
ORL
AND=.L FM9574 +0         ; ﾜｰｸﾚｼﾋﾟ基本(ﾊﾟﾚｯﾄ置角度)
NCJ #1001
;'Y軸ﾊﾟﾚｯﾄ2置位置演算
;
;FM12304.L = DM2106.L  + DM1310.L	'Y軸ﾊﾟﾚｯﾄ置位置目標座標へ代入
LD CR2002                ; 常時ON
LDA.L DM2106             ; Y軸ﾊﾟﾚｯﾄ2 ﾊﾟﾚｯﾄ置目標座標
CON
ADD.L DM1310             ; 画像除材Y軸 吸着確認座標
CON
STA.L FM12304            ; TP除材Y軸 ﾊﾟﾚｯﾄ置 目標座標
LABEL #1001
;
;'Y軸ﾊﾟﾚｯﾄ2置位置演算
;
;FM12304.L = DM2106.L  - DM1310.L	'Y軸ﾊﾟﾚｯﾄ置位置目標座標へ代入
LD B0411                 ; 手動 ﾊﾟﾚｯﾄ2選択PL
AND MR100                ; 手動ﾓｰﾄﾞ
LD MR3315                ; ﾊﾟﾚｯﾄ2整列
AND MR101                ; 自動ﾓｰﾄﾞ
ORL
LD MR37800               ; 検査NGﾌﾗｸﾞ
ANB LR010                ; ﾊﾟﾚｯﾄ2OK/NG選択 ON:OK OFF:NG
ORL
AND=.L FM9574 +18000     ; ﾜｰｸﾚｼﾋﾟ基本(ﾊﾟﾚｯﾄ置角度)
NCJ #1013
;'Y軸ﾊﾟﾚｯﾄ2置位置演算
;
;FM12304.L = DM2106.L  - DM1310.L	'Y軸ﾊﾟﾚｯﾄ置位置目標座標へ代入
LD CR2002                ; 常時ON
LDA.L DM2106             ; Y軸ﾊﾟﾚｯﾄ2 ﾊﾟﾚｯﾄ置目標座標
CON
SUB.L DM1310             ; 画像除材Y軸 吸着確認座標
CON
STA.L FM12304            ; TP除材Y軸 ﾊﾟﾚｯﾄ置 目標座標
LABEL #1013
;
;'Y軸ﾊﾟﾚｯﾄ2置位置演算
;
;FM12304.L = DM2106.L			'Y軸ﾊﾟﾚｯﾄ置位置目標座標へ代入
LD B0411                 ; 手動 ﾊﾟﾚｯﾄ2選択PL
AND MR100                ; 手動ﾓｰﾄﾞ
LD MR3315                ; ﾊﾟﾚｯﾄ2整列
AND MR101                ; 自動ﾓｰﾄﾞ
ORL
LD MR37800               ; 検査NGﾌﾗｸﾞ
ANB LR010                ; ﾊﾟﾚｯﾄ2OK/NG選択 ON:OK OFF:NG
ORL
AND<> FM9574 #0          ; ﾜｰｸﾚｼﾋﾟ基本(ﾊﾟﾚｯﾄ置角度)
AND<> FM9574 #18000      ; ﾜｰｸﾚｼﾋﾟ基本(ﾊﾟﾚｯﾄ置角度)
NCJ #1014
;'Y軸ﾊﾟﾚｯﾄ2置位置演算
;
;FM12304.L = DM2106.L			'Y軸ﾊﾟﾚｯﾄ置位置目標座標へ代入
LD CR2002                ; 常時ON
MOV.L DM2106 FM12304     ; Y軸ﾊﾟﾚｯﾄ2 ﾊﾟﾚｯﾄ置目標座標  TP除材Y軸 ﾊﾟﾚｯﾄ置 目標座標
LABEL #1014
;
;<h1/>ﾎﾟｲﾝﾄﾊﾟﾗﾒｰﾀ転送
;P1　除材Y軸 待機位置
LDP @MR305               ; 除材Y軸 位置決め
AND= DM55 #1             ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
BMOV FM12000 DM11400 #16 ; TP除材Y軸 待機位置 動作ﾓｰﾄﾞ  除材Y軸 動作ﾓｰﾄﾞ
MPS
LDA.D FM12016            ; TP除材Y軸 待機位置 速度
CON
MUL.D #1000
CON
STA.D DM11416            ; 除材Y軸 速度
MPP
BMOV FM12018 DM11418 #10 ; TP除材Y軸 待機位置 加速時間  除材Y軸 加速時間
;P2　除材Y軸 除材反転取出位置
LDP @MR305               ; 除材Y軸 位置決め
AND= DM55 #2             ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
BMOV FM12100 DM11400 #16 ; TP除材Y軸 取出位置 動作ﾓｰﾄﾞ  除材Y軸 動作ﾓｰﾄﾞ
MPS
LDA.D FM12116            ; TP除材Y軸 取出位置 速度
CON
MUL.D #1000
CON
STA.D DM11416            ; 除材Y軸 速度
MPP
BMOV FM12118 DM11418 #10 ; TP除材Y軸 取出位置 加速時間  除材Y軸 加速時間
;P3　除材Y軸 吸着確認位置
LDP @MR305               ; 除材Y軸 位置決め
AND= DM55 #3             ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
BMOV FM12200 DM11400 #16 ; TP除材Y軸 吸着確認 動作ﾓｰﾄﾞ  除材Y軸 動作ﾓｰﾄﾞ
MPS
LDA.D FM12216            ; TP除材Y軸 吸着確認 速度
CON
MUL.D #1000
CON
STA.D DM11416            ; 除材Y軸 速度
MPP
BMOV FM12218 DM11418 #10 ; TP除材Y軸 吸着確認 加速時間  除材Y軸 加速時間
;P4　除材Y軸 ﾊﾟﾚｯﾄ置位置
LDP @MR305               ; 除材Y軸 位置決め
AND= DM55 #4             ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
BMOV FM12300 DM11400 #16 ; TP除材Y軸 ﾊﾟﾚｯﾄ置 動作ﾓｰﾄﾞ  除材Y軸 動作ﾓｰﾄﾞ
MPS
LDA.D FM12316            ; TP除材Y軸 ﾊﾟﾚｯﾄ置 速度
CON
MUL.D #1000
CON
STA.D DM11416            ; 除材Y軸 速度
MPP
BMOV FM12318 DM11418 #10 ; TP除材Y軸 ﾊﾟﾚｯﾄ置 加速時間  除材Y軸 加速時間
;P5　除材Y軸 NG位置
LDP @MR305               ; 除材Y軸 位置決め
AND= DM55 #5             ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
BMOV FM12400 DM11400 #16 ; TP除材Y軸 NG位置 動作ﾓｰﾄﾞ  除材Y軸 動作ﾓｰﾄﾞ
MPS
LDA.D FM12416            ; TP除材Y軸 NG位置 速度
CON
MUL.D #1000
CON
STA.D DM11416            ; 除材Y軸 速度
MPP
BMOV FM12418 DM11418 #10 ; TP除材Y軸 NG位置 加速時間  除材Y軸 加速時間
;P8　除材Y軸 ﾒﾝﾃﾅﾝｽ位置
LDP @MR305               ; 除材Y軸 位置決め
AND= DM55 #8             ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
BMOV FM12700 DM11400 #16 ; TP除材Y軸 ﾒﾝﾃ位置 動作ﾓｰﾄﾞ  除材Y軸 動作ﾓｰﾄﾞ
MPS
LDA.D FM12716            ; TP除材Y軸 ﾒﾝﾃ位置 速度
CON
MUL.D #1000
CON
STA.D DM11416            ; 除材Y軸 速度
MPP
BMOV FM12718 DM11418 #10 ; TP除材Y軸 ﾒﾝﾃ位置 加速時間  除材Y軸 加速時間
;P9　除材Y軸 画像基準位置
LDP @MR305               ; 除材Y軸 位置決め
AND= DM55 #9             ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
BMOV FM12800 DM11400 #16 ; TP除材Y軸 画像基準 動作ﾓｰﾄﾞ  除材Y軸 動作ﾓｰﾄﾞ
MPS
LDA.D FM12816            ; TP除材Y軸 画像基準 速度
CON
MUL.D #1000
CON
STA.D DM11416            ; 除材Y軸 速度
MPP
BMOV FM12818 DM11418 #10 ; TP除材Y軸 画像基準 加速時間  除材Y軸 加速時間
;P10　除材Y軸 ﾊﾟﾚｯﾄ1基準位置
LDP @MR305               ; 除材Y軸 位置決め
AND= DM55 #10            ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
BMOV FM12900 DM11400 #16 ; TP除材Y軸 ﾊﾟﾚｯﾄ1基準 動作ﾓｰﾄﾞ  除材Y軸 動作ﾓｰﾄﾞ
MPS
LDA.D FM12916            ; TP除材Y軸 ﾊﾟﾚｯﾄ1基準 速度
CON
MUL.D #1000
CON
STA.D DM11416            ; 除材Y軸 速度
MPP
BMOV FM12918 DM11418 #10 ; TP除材Y軸 ﾊﾟﾚｯﾄ1基準 加速時間  除材Y軸 加速時間
;P11　除材Y軸 ﾊﾟﾚｯﾄ2基準位置
LDP @MR305               ; 除材Y軸 位置決め
AND= DM55 #11            ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
BMOV FM12940 DM11400 #16 ; TP除材Y軸 ﾊﾟﾚｯﾄ2基準 動作ﾓｰﾄﾞ  除材Y軸 動作ﾓｰﾄﾞ
MPS
LDA.D FM12956            ; TP除材Y軸 ﾊﾟﾚｯﾄ2基準 速度
CON
MUL.D #1000
CON
STA.D DM11416            ; 除材Y軸 速度
MPP
BMOV FM12958 DM11418 #10 ; TP除材Y軸 ﾊﾟﾚｯﾄ2基準 加速時間  除材Y軸 加速時間
LDP @MR305               ; 除材Y軸 位置決め
MCALL KE_ML_PDAT #5 DM55 #1 DM11400;除材Y軸 ﾎﾟｼﾞｼｮﾝNo  除材Y軸 動作ﾓｰﾄﾞ
;<h1/>位置決め出力
LD @MR305                ; 除材Y軸 位置決め
ANB T123                 ; 除材Y軸ﾏｸﾛﾀﾞﾝﾏﾘ対策
MPS
OUT MR11400              ; ﾏｸﾛPOS 除材Y軸 位置決め起動
MPP
ANB MR11408              ; ﾏｸﾛPOS 除材Y軸 位置決め 移動中
TMS #123 #100            ; 除材Y軸ﾏｸﾛﾀﾞﾝﾏﾘ対策
LD MR004                 ; ﾘｾｯﾄSW
OUT MR11403              ; ﾏｸﾛPOS 除材Y軸 位置決め ﾘｾｯﾄSW
LD CR2002                ; 常時ON
MSTRT KE_ML_POS #5 #1 MR11400 DM19040;ﾏｸﾛPOS 除材Y軸 位置決め起動  除材Y軸 ｴﾗｰ状態
LD MR11413               ; ﾏｸﾛPOS 除材Y軸 位置決め制御開始
OUT R60200               ; 軸5 位置決め制御開始
LD MR11414               ; ﾏｸﾛPOS 除材Y軸 位置決め完了ｸﾘｱ
OUT R60202               ; 軸5 位置決め完了ｸﾘｱ
;ﾗﾝﾌﾟ
LD MR11408               ; ﾏｸﾛPOS 除材Y軸 位置決め 移動中
AND= DM55 #1             ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR MR6301                ; 除材Y軸 待機位置
OUT B0421                ; 除材Y軸 待機位置PL
LD MR11408               ; ﾏｸﾛPOS 除材Y軸 位置決め 移動中
AND= DM55 #2             ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR MR6302                ; 除材Y軸 除材反転 取出位置
OUT B0422                ; 除材Y軸 除材反転 取出位置PL
LD MR11408               ; ﾏｸﾛPOS 除材Y軸 位置決め 移動中
AND= DM55 #3             ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR MR6303                ; 除材Y軸 吸着確認位置
OUT B0423                ; 除材Y軸 吸着確認 位置PL
LD MR11408               ; ﾏｸﾛPOS 除材Y軸 位置決め 移動中
AND= DM55 #4             ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR MR6304                ; 除材Y軸 ﾊﾟﾚｯﾄ置位置
OUT B0424                ; 除材Y軸 ﾊﾟﾚｯﾄ置 位置PL
LD MR11408               ; ﾏｸﾛPOS 除材Y軸 位置決め 移動中
AND= DM55 #5             ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR MR6305                ; 除材Y軸 NG位置
OUT B0425                ; 除材Y軸 NG位置PL
LD MR11408               ; ﾏｸﾛPOS 除材Y軸 位置決め 移動中
AND= DM55 #8             ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR MR6308                ; 除材Y軸 ﾒﾝﾃﾅﾝｽ位置
OUT B0428                ; 除材Y軸 ﾒﾝﾃﾅﾝｽ位置PL
LD MR11408               ; ﾏｸﾛPOS 除材Y軸 位置決め 移動中
AND= DM55 #9             ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR MR6309                ; 除材Y軸 画像基準位置
OUT B0429                ; 除材Y軸 画像基準 位置PL
LD MR11408               ; ﾏｸﾛPOS 除材Y軸 位置決め 移動中
AND= DM55 #10            ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR MR6310                ; 除材Y軸 ﾊﾟﾚｯﾄ1 基準位置
OUT B042E                ; 除材Y軸 ﾊﾟﾚｯﾄ1 基準位置PL
LD MR11408               ; ﾏｸﾛPOS 除材Y軸 位置決め 移動中
AND= DM55 #11            ; 除材Y軸 ﾎﾟｼﾞｼｮﾝNo
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR MR6311                ; 除材Y軸 ﾊﾟﾚｯﾄ2 基準位置
OUT B042F                ; 除材Y軸 ﾊﾟﾚｯﾄ2 基準位置PL
;<h1/>位置出力
;軸現在位置が目標位置の±15μm以内で出力
;※位置決範囲を狭くすると出力がﾁｬﾀﾘﾝｸﾞして関係する軸のI/Lが動作するので注意!
;'Y軸位置表示
;FM62.L = DM60530.L					'現在値
;DM474.L = DM60530.L + 15	'位置決め判定上限
;DM476.L = DM60530.L - 15	'位置決め判定下限
LD CR2002                ; 常時ON
NCJ #1003
;'Y軸位置表示
;
;FM62.L = DM60530.L					'現在値
;
LD CR2002                ; 常時ON
MOV.L DM60530 FM62       ; 軸5 現在座標  除材Y軸 現在値表示
;DM474.L = DM60530.L + 15	'位置決め判定上限
;
LD CR2002                ; 常時ON
LDA.L DM60530            ; 軸5 現在座標
CON
ADD.L +15
CON
STA.L DM474              ; 除材Y軸 位置決+限
;DM476.L = DM60530.L - 15	'位置決め判定下限
LD CR2002                ; 常時ON
LDA.L DM60530            ; 軸5 現在座標
CON
SUB.L +15
CON
STA.L DM476              ; 除材Y軸 位置決-限
LABEL #1003
;
LD MR6312                ; 除材Y軸 原点復帰記憶
ANB @MR305               ; 除材Y軸 位置決め
ANB MR11408              ; ﾏｸﾛPOS 除材Y軸 位置決め 移動中
MPS
LD>=.L +15 FM62          ; 除材Y軸 現在値表示
AND<=.L -15 FM62         ; 除材Y軸 現在値表示
ANL
OUT MR6300               ; 除材Y軸 原点位置
MRD
LD>=.L DM474 FM12004     ; 除材Y軸 位置決+限  TP除材Y軸 待機位置 目標座標
AND<=.L DM476 FM12004    ; 除材Y軸 位置決-限  TP除材Y軸 待機位置 目標座標
ANL
OUT MR6301               ; 除材Y軸 待機位置
MRD
LD>=.L DM474 FM12104     ; 除材Y軸 位置決+限  TP除材Y軸 取出位置 目標座標
AND<=.L DM476 FM12104    ; 除材Y軸 位置決-限  TP除材Y軸 取出位置 目標座標
ANL
OUT MR6302               ; 除材Y軸 除材反転 取出位置
MRD
LD>=.L DM474 FM12204     ; 除材Y軸 位置決+限  TP除材Y軸 吸着確認 目標座標
AND<=.L DM476 FM12204    ; 除材Y軸 位置決-限  TP除材Y軸 吸着確認 目標座標
ANL
OUT MR6303               ; 除材Y軸 吸着確認位置
MRD
LD>=.L DM474 FM12304     ; 除材Y軸 位置決+限  TP除材Y軸 ﾊﾟﾚｯﾄ置 目標座標
AND<=.L DM476 FM12304    ; 除材Y軸 位置決-限  TP除材Y軸 ﾊﾟﾚｯﾄ置 目標座標
ANL
OUT MR6304               ; 除材Y軸 ﾊﾟﾚｯﾄ置位置
MRD
LD>=.L DM474 FM12404     ; 除材Y軸 位置決+限  TP除材Y軸 NG位置 目標座標
AND<=.L DM476 FM12404    ; 除材Y軸 位置決-限  TP除材Y軸 NG位置 目標座標
ANL
OUT MR6305               ; 除材Y軸 NG位置
MRD
LD>=.L DM474 FM12704     ; 除材Y軸 位置決+限  TP除材Y軸 ﾒﾝﾃ位置 目標座標
AND<=.L DM476 FM12704    ; 除材Y軸 位置決-限  TP除材Y軸 ﾒﾝﾃ位置 目標座標
ANL
OUT MR6308               ; 除材Y軸 ﾒﾝﾃﾅﾝｽ位置
MRD
LD>=.L DM474 FM12804     ; 除材Y軸 位置決+限  TP除材Y軸 画像基準 目標座標
AND<=.L DM476 FM12804    ; 除材Y軸 位置決-限  TP除材Y軸 画像基準 目標座標
ANL
OUT MR6309               ; 除材Y軸 画像基準位置
MRD
LD>=.L DM474 FM12904     ; 除材Y軸 位置決+限  TP除材Y軸 ﾊﾟﾚｯﾄ1基準 目標座標
AND<=.L DM476 FM12904    ; 除材Y軸 位置決-限  TP除材Y軸 ﾊﾟﾚｯﾄ1基準 目標座標
ANL
OUT MR6310               ; 除材Y軸 ﾊﾟﾚｯﾄ1 基準位置
MPP
LD>=.L DM474 FM12944     ; 除材Y軸 位置決+限  TP除材Y軸 ﾊﾟﾚｯﾄ2基準 目標座標
AND<=.L DM476 FM12944    ; 除材Y軸 位置決-限  TP除材Y軸 ﾊﾟﾚｯﾄ2基準 目標座標
ANL
OUT MR6311               ; 除材Y軸 ﾊﾟﾚｯﾄ2 基準位置
;<h1/>JOG移動
LD B032A                 ; 除材Y軸 JOG正転SW
OUT @MR500               ; 除材Y軸 JOG運転正転
LD B032B                 ; 除材Y軸 JOG逆転SW
OUT @MR501               ; 除材Y軸 JOG運転逆転
;ｲﾝﾀｰﾛｯｸ
LD MR804                 ; 除材Y軸 動作可能
LD MR6500                ; 除材Z軸 原点位置
OR MR6501                ; 除材Z軸 待機位置
OR B043A                 ; 除材Y軸 JOG倍率0.1PL
ANL
ANB MR7102               ; ERR12 除材Y軸ﾄﾞﾗｲﾊﾞｰ異常
ANB MR7103               ; ERR13 除材Y軸軸ｴﾗｰ
AND MR400                ; 全ﾄﾞｱ閉確認
OUT MR12402              ; ﾏｸﾛ 除材Y軸 JOG動作IL
;JOG運転
LD @MR500                ; 除材Y軸 JOG運転正転
AND MR100                ; 手動ﾓｰﾄﾞ
AND MR12402              ; ﾏｸﾛ 除材Y軸 JOG動作IL
ANB MR12410              ; ﾏｸﾛ 除材Y軸 JOG動作異常
OUT @MR505               ; 除材Y軸 JOG運転正転
LD @MR501                ; 除材Y軸 JOG運転逆転
AND MR100                ; 手動ﾓｰﾄﾞ
AND MR12402              ; ﾏｸﾛ 除材Y軸 JOG動作IL
ANB MR12410              ; ﾏｸﾛ 除材Y軸 JOG動作異常
OUT @MR506               ; 除材Y軸 JOG運転逆転
;速度倍率設定
LD CR2002                ; 常時ON
MSTRT JOG_倍率 B033A B043A DM10560;除材Y軸 JOG倍率0.1SW  除材Y軸 JOG倍率0.1PL  除材Y軸 JOG倍率DATA
;動作ﾃﾞｰﾀ転送
LD @MR505                ; 除材Y軸 JOG運転正転
OR @MR506                ; 除材Y軸 JOG運転逆転
MPS
LDA.D #100
CON
MUL.D DM10560            ; 除材Y軸 JOG倍率DATA
CON
STA.D DM10518            ; 除材Y軸 JOG高速速度
MPP
@UWRIT #1 #14368 DM10518 #2;除材Y軸 JOG高速速度
;出力
LD @MR505                ; 除材Y軸 JOG運転正転
OUT MR12400              ; ﾏｸﾛ 除材Y軸 JOG起動＋
LD @MR506                ; 除材Y軸 JOG運転逆転
OUT MR12401              ; ﾏｸﾛ 除材Y軸 JOG起動−
LD MR004                 ; ﾘｾｯﾄSW
OUT MR12403              ; ﾏｸﾛ 除材Y軸 JOG動作 ﾘｾｯﾄSW
LD CR2002                ; 常時ON
MSTRT KE_ML_JOG #5 #1 MR12400 DM19040;ﾏｸﾛ 除材Y軸 JOG起動＋  除材Y軸 ｴﾗｰ状態
LD MR12412               ; ﾏｸﾛJOG 除材Y軸 JOG正方向
OUT R67300               ; 軸5 JOG正方向
LD MR12413               ; ﾏｸﾛJOG 除材Y軸 JOG負方向
OUT R67301               ; 軸5 JOG負方向
LD MR12412               ; ﾏｸﾛJOG 除材Y軸 JOG正方向
OR MR12413               ; ﾏｸﾛJOG 除材Y軸 JOG負方向
OUT R67302               ; 軸5 高速JOG
;ﾗﾝﾌﾟ
LD MR12408               ; ﾏｸﾛ 除材Y軸 JOG＋運転中
OUT B042A                ; 除材Y軸 JOG正転PL
LD MR12409               ; ﾏｸﾛ 除材Y軸 JOG−運転中
OUT B042B                ; 除材Y軸 JOG逆転PL
;<h1/>DATA_SET
LD B03E1                 ; 除材 待機位置 SET_SW
AND MR100                ; 手動ﾓｰﾄﾞ
MOV.L FM62 FM12004       ; 除材Y軸 現在値表示  TP除材Y軸 待機位置 目標座標
LD B03E3                 ; 除材 吸着確認 位置SET_SW
AND MR100                ; 手動ﾓｰﾄﾞ
MOV.L FM62 FM12240       ; 除材Y軸 現在値表示  TP除材Y軸 吸着確認 補正前座標
LD B03E5                 ; 除材 NG排出位置 SET_SW
AND MR100                ; 手動ﾓｰﾄﾞ
MOV.L FM62 FM12404       ; 除材Y軸 現在値表示  TP除材Y軸 NG位置 目標座標
LD B03E8                 ; 除材 ﾒﾝﾃﾅﾝｽ位置 SET_SW
AND MR100                ; 手動ﾓｰﾄﾞ
MOV.L FM62 FM12704       ; 除材Y軸 現在値表示  TP除材Y軸 ﾒﾝﾃ位置 目標座標
LD B03E9                 ; 除材反転 画像基準 位置SET_SW
AND MR100                ; 手動ﾓｰﾄﾞ
MOV.L FM62 FM12804       ; 除材Y軸 現在値表示  TP除材Y軸 画像基準 目標座標
LD B03EA                 ; 除材 ﾊﾟﾚｯﾄ1 基準位置 SET_SW
AND MR100                ; 手動ﾓｰﾄﾞ
MOV.L FM62 FM12904       ; 除材Y軸 現在値表示  TP除材Y軸 ﾊﾟﾚｯﾄ1基準 目標座標
LD B03EB                 ; 除材 ﾊﾟﾚｯﾄ2 基準位置 SET_SW
AND MR100                ; 手動ﾓｰﾄﾞ
MOV.L FM62 FM12944       ; 除材Y軸 現在値表示  TP除材Y軸 ﾊﾟﾚｯﾄ2基準 目標座標
;<h1/>ｴﾗｰ出力
LD MR10410               ; ﾏｸﾛHP 除材Y軸 原点復帰異常
OR MR11410               ; ﾏｸﾛPOS 除材Y軸 位置決め異常
OR MR12410               ; ﾏｸﾛ 除材Y軸 JOG動作異常
MPS
AND DM19040.0
OUT MR7102               ; ERR12 除材Y軸ﾄﾞﾗｲﾊﾞｰ異常
MPP
AND DM19040.1
OUT MR7103               ; ERR13 除材Y軸軸ｴﾗｰ
LD MR10411               ; ﾏｸﾛHP 除材Y軸 ｴﾗｰｸﾘｱ
OR MR11411               ; ﾏｸﾛPOS 除材Y軸 ｴﾗｰｸﾘｱ
OR MR12411               ; ﾏｸﾛJOG 除材Y軸 ｴﾗｰｸﾘｱ
OUT R67200               ; 軸5 軸ｴﾗｰｸﾘｱ
LD MR10413               ; ﾏｸﾛHP 除材Y軸 ﾄﾞﾗｲﾊﾞｱﾗｰﾑﾘｾｯﾄ
OR MR11412               ; ﾏｸﾛPOS 除材Y軸 ﾄﾞﾗｲﾊﾞｱﾗｰﾑ ﾘｾｯﾄ
OR MR12414               ; ﾏｸﾛJOG 除材Y軸 ﾄﾞﾗｲﾊﾞｱﾗｰﾑ ﾘｾｯﾄ
OUT R67505               ; 軸5 ﾄﾞﾗｲﾊﾞｱﾗｰﾑﾘｾｯﾄ
;<h1/>まとめ
LD MR7102                ; ERR12 除材Y軸ﾄﾞﾗｲﾊﾞｰ異常
OR MR7103                ; ERR13 除材Y軸軸ｴﾗｰ
OUT MR6313               ; 除材Y軸 全異常
LD MR6301                ; 除材Y軸 待機位置
OUT MR6314               ; 除材Y軸 全原点
LDB MR10400              ; ﾏｸﾛHP 除材Y軸 原点復帰起動
ANB MR10408              ; ﾏｸﾛHP 除材Y軸 原点復帰中
ANB MR11400              ; ﾏｸﾛPOS 除材Y軸 位置決め起動
ANB MR11408              ; ﾏｸﾛPOS 除材Y軸 位置決め 移動中
ANB MR12400              ; ﾏｸﾛ 除材Y軸 JOG起動＋
ANB MR12401              ; ﾏｸﾛ 除材Y軸 JOG起動−
ANB MR12408              ; ﾏｸﾛ 除材Y軸 JOG＋運転中
ANB MR12409              ; ﾏｸﾛ 除材Y軸 JOG−運転中
OUT MR6315               ; 除材Y軸 全停止
END
ENDH
