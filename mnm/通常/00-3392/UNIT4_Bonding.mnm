DEVICE:53
;MODULE:UNIT4_Bonding
;MODULE_TYPE:0
;SCRIPT_TYPE:
;
;UNIT4 Bonding
;
;動作FLG
LD>= D4000 K122          ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
AND< D4000 K140          ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD>= D4000 K222          ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
AND< D4000 K240          ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
ORL
OR M4915                 ; 塗布動作中
OUT M4850                ; 塗布工程
LD M1050                 ; 塗布開始点移動
OR M1981                 ; Y1 塗布要求
OR M4851                 ; 投入1ﾜｰｸ確認
ANB M4141                ; Y1塗布動作終了
ANB M1015                ; Case投入依頼
MPS
OUT M4851                ; 投入1ﾜｰｸ確認
MPP
ANB M4854                ; 投入2優先
OUT M4853                ; 投入1優先
LD M3050                 ; 塗布開始点移動
OR M3981                 ; Y2 塗布要求
OR M4852                 ; 投入2ﾜｰｸ確認
ANB M4241                ; Y2塗布動作終了
ANB M3015                ; Case投入依頼
MPS
OUT M4852                ; 投入2ﾜｰｸ確認
MPP
ANB M4853                ; 投入1優先
OUT M4854                ; 投入2優先
LD>= D31304 K62          ; 軸1 位置決め現在ﾎﾟｲﾝﾄ番号
AND<= D31304 K80         ; 軸1 位置決め現在ﾎﾟｲﾝﾄ番号
OUT M4857                ; Y1塗布判断有効ポイント番号
LD>= D31304 K82          ; 軸1 位置決め現在ﾎﾟｲﾝﾄ番号
AND<= D31304 K100        ; 軸1 位置決め現在ﾎﾟｲﾝﾄ番号
OUT M4858                ; Y2塗布判断有効ポイント番号
LD M9702                 ; P1運転
AND T1900                ; P切替_自動三方ﾊﾞﾙﾌﾞA
LD M9703                 ; P2運転
AND T1901                ; P切替_自動三方ﾊﾞﾙﾌﾞB
ORL
OUT M4859                ; Bond pump Operating
LD M4503                 ; 塗布X軸原点復帰
OR M4990                 ; 塗布Z軸　原点復帰完了
ANB M103                 ; 原点復帰OK
OUT M4990                ; 塗布Z軸　原点復帰完了
LDF M4905                ; ﾕﾆｯﾄ4起動中
ORP M4905                ; ﾕﾆｯﾄ4起動中
ORP M33                  ; 手動ﾓｰﾄﾞ
OR M4843                 ; PUMP切り替えPLS
OR M4844                 ; PUMP切り替えPLS
OR M4845                 ; PUMP切り替えPLS
RES M4840                ; P1接着剤残量予告記憶
CON
RES M4841                ; P2接着剤残量予告記憶
;■ロボット等機器入力受け
;ロボット、検査装置など状態、現在位置などをまとめる信号は一旦ここで受ける。
;<h1/>装置状態・動作条件
LD R3008                 ; 塗布Z　   上空位置
LD M33                   ; 手動ﾓｰﾄﾞ
LD=.L D31350 E2004       ; 軸2 現在座標  Z_P61
OR=.L D31350 E2204       ; 軸2 現在座標  Z_P81
OR=.L D31350 E2704       ; 軸2 現在座標  塗布Z_TP_Pos3_Data
OR=.L D31350 E4604       ; 軸2 現在座標
OR=.L D31350 E4804       ; 軸2 現在座標
ANL
ORL
AND X105                 ; 吐出ﾓｰﾀ_速度0
ANB X5444                ; 軸1 軸制御中
ANB X5524                ; 軸2 軸制御中
OUT M4900                ; ﾕﾆｯﾄ4原点
LDB B080                 ; ﾕﾆｯﾄ4_異常
ANB B081                 ; SMA411異常
ANB B082                 ; SMA421異常
LDB B083                 ; P2圧力_異常4
ANB B084                 ; P1圧力_異常5
ANB B085                 ; 吐出圧力変動異常
ANB B086                 ; 吸込圧力変動異常
ANB B087                 ; 吐出圧復元異常
OR M25                   ; 吐出無し
ANL
ANB B088                 ; 回転検出異常
LDB B089                 ; 最低吐出圧異常
OR M25                   ; 吐出無し
ANL
ANB B08A                 ; SMA451異常
ANB B08B                 ; ﾕﾆｯﾄ4_異常12
ANB B08C                 ; ﾕﾆｯﾄ4_異常13
ANB B08D                 ; 自動中接着剤ﾎﾟﾝﾌﾟ電源OFF
ANB B090                 ; 塗布RB衝突I.L.
INV
OUT M4901                ; ﾕﾆｯﾄ4全異常
LD M4900                 ; ﾕﾆｯﾄ4原点
ANB M4000                ; ﾕﾆｯﾄ4ｽﾃｯﾌﾟ開始
AND X545D                ; 軸1 ｻｰﾎﾞﾚﾃﾞｨ
ANB X5440                ; 軸1 軸ｴﾗｰ中
ANB X5444                ; 軸1 軸制御中
AND X553D                ; 軸2 ｻｰﾎﾞﾚﾃﾞｨ
ANB X5520                ; 軸2 軸ｴﾗｰ中
ANB X5524                ; 軸2 軸制御中
AND X104                 ; 吐出ﾓｰﾀ_READY
AND X102                 ; 吐出ﾓｰﾀ_ALARM
AND X105                 ; 吐出ﾓｰﾀ_速度0
OUT M4902                ; ﾕﾆｯﾄ4起動条件
LDB M64                  ; 運転準備
OR M65                   ; 即停止異常(緊急停止)
OR M4901                 ; ﾕﾆｯﾄ4全異常
OR T15                   ; 強制停止
OUT M4903                ; ﾕﾆｯﾄ4起動OFF
LD M98                   ; 原点復帰開始
ANB M4904                ; ﾕﾆｯﾄ4原点復帰中
OR M4904                 ; ﾕﾆｯﾄ4原点復帰中
ANB M4903                ; ﾕﾆｯﾄ4起動OFF
ANB M4579                ; ﾕﾆｯﾄ4原点復帰完了確認
OUT M4904                ; ﾕﾆｯﾄ4原点復帰中
LDB M4449                ; Y1塗布ﾙｰﾁﾝ完了
ANB M4479                ; Y2塗布ﾙｰﾁﾝ完了
INV
ORF M4633                ; 塗布ﾄﾚｰｽ開始
ORF M4636                ; 日常点検塗布ﾄﾚｰｽ開始
ORF M4631                ; 捨て打ち動作実行
OUT M4914                ; U4手動ﾙｰﾁﾝ動作完了
LD M83                   ; 各工程起動指令
LD M33                   ; 手動ﾓｰﾄﾞ
AND M34                  ; ﾒｲﾝ手動操作可能条件
LD M4631                 ; 捨て打ち動作実行
OR M4633                 ; 塗布ﾄﾚｰｽ開始
OR M4636                 ; 日常点検塗布ﾄﾚｰｽ開始
ANL
ORL
AND M4902                ; ﾕﾆｯﾄ4起動条件
OR M4905                 ; ﾕﾆｯﾄ4起動中
ANB M4903                ; ﾕﾆｯﾄ4起動OFF
ANB M4399                ; ﾕﾆｯﾄ4動作完了
LDB M33                  ; 手動ﾓｰﾄﾞ
LD M33                   ; 手動ﾓｰﾄﾞ
ANB M4914                ; U4手動ﾙｰﾁﾝ動作完了
ORL
ANL
OUT M4905                ; ﾕﾆｯﾄ4起動中
LD CR2003                ; 常時OFF
OUT M4908                ; ﾕﾆｯﾄ4警報補助
;Pack処理
LD> D4002 K0             ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
AND< D4002 K20           ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
LD> D4003 K0             ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
AND< D4003 K20           ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
ORL
LD> D4004 K0             ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
AND< D4004 K20           ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
ORL
LD> D4005 K0             ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
AND< D4005 K20           ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
ORL
OUT M4915                ; 塗布動作中
LDB M4802                ; 塗布X 移動中
ANB M4812                ; 塗布Z 移動中
ANB M4502                ; Bonding Z HOME
ANB M4504                ; Bonding X HOME
ANB M4915                ; 塗布動作中
ANB Y204                 ; 吐出ﾓｰﾀ_正転開始
ANB Y205                 ; 吐出ﾓｰﾀ_逆転開始
INV
OUT M4910                ; UNIT4 Pack
;□エラー発生　一時停止フラグ
LD CR2002                ; 常時ON
MPS
PMOV.D M4920 K0 D4100 K0 K20;Err380:自動給材ﾊﾞﾙﾌﾞｴﾗｰ  UT4ｴﾗｰ判別
MPP
AND<>.D D4100 K0         ; UT4ｴﾗｰ判別
OUT M4912                ; UNIT4 ｴﾗｰ
LDB M4901                ; ﾕﾆｯﾄ4全異常
ANB M160                 ; ALL PAUSE
ANB M4908                ; ﾕﾆｯﾄ4警報補助
ANB M4912                ; UNIT4 ｴﾗｰ
LDB M32                  ; 自動ﾓｰﾄﾞ
ANB M33                  ; 手動ﾓｰﾄﾞ
LD M32                   ; 自動ﾓｰﾄﾞ
AND M4905                ; ﾕﾆｯﾄ4起動中
ORL
LD M33                   ; 手動ﾓｰﾄﾞ
LD M4904                 ; ﾕﾆｯﾄ4原点復帰中
OR M4905                 ; ﾕﾆｯﾄ4起動中
ANL
ORL
ANL
OUT M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
;RB interlock
LD R3008                 ; 塗布Z　   上空位置
OR M4850                 ; 塗布工程
LD M33                   ; 手動ﾓｰﾄﾞ
LDB R3000                ; 塗布X　   Case1干渉外
ORB R3001                ; 塗布X　   Case2干渉外
ANL
ORL
ORB R3008                ; 塗布Z　   上空位置
AND X545D                ; 軸1 ｻｰﾎﾞﾚﾃﾞｨ
ANB X5440                ; 軸1 軸ｴﾗｰ中
ANB X5444                ; 軸1 軸制御中
ANB M4800                ; 塗布X 移動完了
ANB M4804                ; 塗布X 原点復帰完了
OUT M4960                ; 塗布X軸  動作可能
LDB R3000                ; 塗布X　   Case1干渉外
LD R3101                 ; Case搬送Y1塗布領域
ORB R3009                ; 塗布Z　   塗布高さ
ANL
LDB R3001                ; 塗布X　   Case2干渉外
LD R3109                 ; Case搬送Y2塗布領域
ORB R3009                ; 塗布Z　   塗布高さ
ANL
ORL
LDB X5604                ; 軸3 軸制御中
OR R3000                 ; 塗布X　   Case1干渉外
ANL
LDB X5684                ; 軸4 軸制御中
OR R3001                 ; 塗布X　   Case2干渉外
ANL
OR R3002                 ; 塗布X　   捨て打ち領域
ANB X5444                ; 軸1 軸制御中
ANB X5524                ; 軸2 軸制御中
AND X553D                ; 軸2 ｻｰﾎﾞﾚﾃﾞｨ
ANB X5520                ; 軸2 軸ｴﾗｰ中
ANB M4810                ; 塗布Z 移動完了
ANB M4814                ; 塗布Z 原点復帰完了
OUT M4961                ; 塗布Z軸   動作可能
LDF M4905                ; ﾕﾆｯﾄ4起動中
ZRES M4800 M4815         ; 塗布X 移動完了  塗布Z 原点復帰異常
;<h1/>■自動回路 
;
;運転開始・ステッパ初期化・補助接点へ展開
LD CR2002                ; 常時ON
ZRES M4000 M4399         ; ﾕﾆｯﾄ4ｽﾃｯﾌﾟ開始  ﾕﾆｯﾄ4動作完了
LDB M4905                ; ﾕﾆｯﾄ4起動中
ORB M32                  ; 自動ﾓｰﾄﾞ
MOV K0 D4000             ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4905                 ; ﾕﾆｯﾄ4起動中
AND M32                  ; 自動ﾓｰﾄﾞ
MOV D4000 Z1             ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
SET M4000:Z1             ; ﾕﾆｯﾄ4ｽﾃｯﾌﾟ開始
;自動運転ステップ開始
LD M4000                 ; ﾕﾆｯﾄ4ｽﾃｯﾌﾟ開始
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
DW K10 D4000             ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;ﾜｰｸ投入待ち
;Waiting for Work in
LD M4010                 ; Case投入待ち
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
MPS
ANB M45                  ; ﾈｼﾞ締めRB日常点検
MPS
ANB B205B                ; DC_D Discharge sw
MPS
LD M4851                 ; 投入1ﾜｰｸ確認
OR M4852                 ; 投入2ﾜｰｸ確認
OR M1981                 ; Y1 塗布要求
OR M3981                 ; Y2 塗布要求
ANL
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
LDB M4851                ; 投入1ﾜｰｸ確認
ANB M4852                ; 投入2ﾜｰｸ確認
ANB M1981                ; Y1 塗布要求
ANB M3981                ; Y2 塗布要求
AND M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
ANL
DW K309 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
AND B205B                ; DC_D Discharge sw
DW K16 D4000             ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
LD M45                   ; ﾈｼﾞ締めRB日常点検
AND M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
ANL
DW K309 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4011                 ; 塗布準備開始
ANPB M4011               ; 塗布準備開始
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;ﾎﾟﾝﾌﾟ運転状況確
;Pump run status check
LD M4012                 ; Pump運転確認
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
MPS
ANB M25                  ; 吐出無し
MPS
LD M4859                 ; Bond pump Operating
OR M74                   ; ｷｬﾝｾﾙ不可 ｻｲｸﾙ停止
ANL
DW K20 D4000             ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
ANB M74                  ; ｷｬﾝｾﾙ不可 ｻｲｸﾙ停止
MPS
LD M9702                 ; P1運転
OR M9703                 ; P2運転
LDB M9702                ; P1運転
ORB T1900                ; P切替_自動三方ﾊﾞﾙﾌﾞA
ANL
LDB M9703                ; P2運転
ORB T1901                ; P切替_自動三方ﾊﾞﾙﾌﾞB
ANL
ANL
DIFU M4844               ; PUMP切り替えPLS
MPP
LDB M9702                ; P1運転
ANB M9703                ; P2運転
ANL
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
AND M25                  ; 吐出無し
DW K70 D4000             ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;Err380:Auto supply valve status error
LD M4013                 ; ｴﾗｰ発生
ANB M71                  ; All Error PAUSE
DW K388 D148             ; 警報No.
CON
SET M4928                ; Err388:ﾎﾟﾝﾌﾟ運転停止中
CON
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4014                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4015                 ; ｴﾗｰ解除確認
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
DW K12 D4000             ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;▼▼▼　日常点検塗布前手動捨て打ち動作
;Discharge operation before Daly check
LD M4016                 ; 捨て打ち実行
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
AND= D4001 K0            ; UT4SUB1   捨て打ちｽﾃｯﾌﾟ
DW K1 D4001              ; UT4SUB1   捨て打ちｽﾃｯﾌﾟ
CON
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4017                 ; 捨て打ち終了待ち
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
AND M4419                ; 捨て打ち完了
INC @D0                  ; 捨て打ち連続実行回数
CON
DW K0 D4001              ; UT4SUB1   捨て打ちｽﾃｯﾌﾟ
CON
DW K10 D4000             ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;▲▲▲
;捨て打ち皿確認
;Discharge saucer check
LD M4020                 ; 捨て打ち皿確認
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
MPS
AND T1200                ; 捨打皿検出
DW K0 @D0                ; 捨て打ち連続実行回数
CON
DW K30 D4000             ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
ANB T1200                ; 捨打皿検出
TMR K412 K30             ; 捨て打ち皿未検出時間
CON
AND T412                 ; 捨て打ち皿未検出時間
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;Err370:Discharge saucer no detect
LD M4021                 ; ｴﾗｰ発生
ANB M71                  ; All Error PAUSE
DW K387 D148             ; 警報No.
CON
SET M4927                ; Err387:捨て打ち皿未検出
CON
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4022                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4023                 ; ｴﾗｰ解除
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
DW K20 D4000             ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;ﾃﾞｨｽﾍﾟﾝｻ状態確認
;Dispenser status check
LD M4030                 ; 圧力ﾁｪｯｸ
MPS
TMR K415 K40
MPP
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
MPS
LDB T482                 ; 吐出圧上限監視時間
ANB T483                 ; 吐出圧下限監視時間
ANB T480                 ; 供給圧上限監視時間
ANB T481                 ; 供給圧下限監視時間
AND<=.D D410 D422        ; 現在時刻secﾃﾞｰﾀ  捨て打ち実施予定時間(sec)
ANL
DW K35 D4000             ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
LD T415
LD T481                  ; 供給圧下限監視時間
OR T483                  ; 吐出圧下限監視時間
OR T480                  ; 供給圧上限監視時間
OR T482                  ; 吐出圧上限監視時間
OR>.D D410 D422          ; 現在時刻secﾃﾞｰﾀ  捨て打ち実施予定時間(sec)
ANL
ANL
MPS
ANB M25                  ; 吐出無し
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
AND M25                  ; 吐出無し
DW K35 D4000             ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;圧力上限異常→捨て打ち動作
;Discharge operation
LD M4031                 ; 捨て打ち実行
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
AND= D4001 K0            ; UT4SUB1   捨て打ちｽﾃｯﾌﾟ
DW K1 D4001              ; UT4SUB1   捨て打ちｽﾃｯﾌﾟ
CON
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4032                 ; 捨て打ち終了待ち
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
AND M4419                ; 捨て打ち完了
INC @D0                  ; 捨て打ち連続実行回数
CON
DW K0 D4001              ; UT4SUB1   捨て打ちｽﾃｯﾌﾟ
CON
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4033                 ; 状態判別
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
MPS
LDB T480                 ; 供給圧上限監視時間
ANB T481                 ; 供給圧下限監視時間
ANB T482                 ; 吐出圧上限監視時間
ANB T483                 ; 吐出圧下限監視時間
ANL
DW K0 @D0                ; 捨て打ち連続実行回数
CON
DW K35 D4000             ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
LD T480                  ; 供給圧上限監視時間
OR T481                  ; 供給圧下限監視時間
OR T482                  ; 吐出圧上限監視時間
OR T483                  ; 吐出圧下限監視時間
ANL
MPS
AND< @D0 K3              ; 捨て打ち連続実行回数
DW K30 D4000             ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
AND>= @D0 K3             ; 捨て打ち連続実行回数
MPS
AND T482                 ; 吐出圧上限監視時間
OUT M4891                ; ﾃﾞｨｽﾍﾟﾝｻ圧力上限異常
MRD
AND T483                 ; 吐出圧下限監視時間
OUT M4890                ; ﾃﾞｨｽﾍﾟﾝｻ圧力下限異常
MRD
LD T481                  ; 供給圧下限監視時間
OR T480                  ; 供給圧上限監視時間
ANL
OUT M4892                ; ﾎﾟﾝﾌﾟ圧力異常
MPP
RES L32                  ; P1 運転記憶
CON
RES L33                  ; P1 捨打ち運転記憶
CON
RES L37                  ; P2 運転記憶
CON
RES L38                  ; P2 捨打ち運転記憶
;自動供給ﾊﾞﾙﾌﾞ状態確認
;Auto supply valve status check
LD M4035                 ; 自動供給ﾊﾞﾙﾌﾞ確認
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
MPS
LD T1900                 ; P切替_自動三方ﾊﾞﾙﾌﾞA
AND Y2510                ; P切替_自動三方ﾊﾞﾙﾌﾞA
LD T1901                 ; P切替_自動三方ﾊﾞﾙﾌﾞB
AND Y2511                ; P切替_自動三方ﾊﾞﾙﾌﾞB
ORL
ANL
DW K40 D4000             ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
LDB Y2510                ; P切替_自動三方ﾊﾞﾙﾌﾞA
ORB T1900                ; P切替_自動三方ﾊﾞﾙﾌﾞA
LDB Y2511                ; P切替_自動三方ﾊﾞﾙﾌﾞB
ORB T1901                ; P切替_自動三方ﾊﾞﾙﾌﾞB
ANL
ANL
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;Err380:Auto supply valve status error
LD M4036                 ; ｴﾗｰ発生
ANB M71                  ; All Error PAUSE
DW K380 D148             ; 警報No.
CON
SET M4920                ; Err380:自動給材ﾊﾞﾙﾌﾞｴﾗｰ
CON
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4037                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4038                 ; ｴﾗｰ解除確認
ANB M71                  ; All Error PAUSE
DW K35 D4000             ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;捨て打ちﾊﾞﾙﾌﾞ状態確認
;Manial air-bleeding valve status check
LD M4040                 ; 捨て打ちﾊﾞﾙﾌﾞ確認
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
MPS
LD Y2510                 ; P切替_自動三方ﾊﾞﾙﾌﾞA
AND T1906                ; 接着剤P1_手動三方ﾊﾞﾙﾌﾞA
LD Y2511                 ; P切替_自動三方ﾊﾞﾙﾌﾞB
AND T1914                ; 接着剤P2_手動三方ﾊﾞﾙﾌﾞA
ORL
ANL
DW K50 D4000             ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
LD Y2510                 ; P切替_自動三方ﾊﾞﾙﾌﾞA
ANB T1906                ; 接着剤P1_手動三方ﾊﾞﾙﾌﾞA
LD Y2511                 ; P切替_自動三方ﾊﾞﾙﾌﾞB
ANB T1914                ; 接着剤P2_手動三方ﾊﾞﾙﾌﾞA
ORL
ANL
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;Err381:Manual air-bleeding valve status error
LD M4041                 ; ｴﾗｰ発生
ANB M71                  ; All Error PAUSE
DW K381 D148             ; 警報No.
CON
SET M4921                ; Err381:ｴｱ抜き手動ﾊﾞﾙﾌﾞ異常
CON
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4042                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4043                 ; ｴﾗｰ解除確認
ANB M71                  ; All Error PAUSE
DW K40 D4000             ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;接着剤残量確認
;Bond level check
LD M4050                 ; 接着剤残量ﾁｪｯｸ
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
MPS
AND T1900                ; P切替_自動三方ﾊﾞﾙﾌﾞA
MPS
ANB T1905                ; 接着剤P1_残量警告
SET L36                  ; P1 残量警告記憶
CON
DW K57 D4000             ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
AND T1905                ; 接着剤P1_残量警告
MPS
LD T1904                 ; 接着剤P1_残量予告
ANB L36                  ; P1 残量警告記憶
OR M4840                 ; P1接着剤残量予告記憶
ANL
DW K70 D4000             ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
LDB T1904                ; 接着剤P1_残量予告
OR L36                   ; P1 残量警告記憶
ANB M4840                ; P1接着剤残量予告記憶
ANL
SET M4840                ; P1接着剤残量予告記憶
CON
SET L36                  ; P1 残量警告記憶
CON
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
AND T1901                ; P切替_自動三方ﾊﾞﾙﾌﾞB
MPS
ANB T1913                ; 接着剤P2_残量警告
SET L41                  ; P2 残量警告記憶
CON
DW K57 D4000             ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
AND T1913                ; 接着剤P2_残量警告
MPS
LD T1912                 ; 接着剤P2_残量予告
ANB L41                  ; P2 残量警告記憶
OR M4841                 ; P2接着剤残量予告記憶
ANL
DW K70 D4000             ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
LDB T1912                ; 接着剤P2_残量予告
OR L41                   ; P2 残量警告記憶
ANB M4841                ; P2接着剤残量予告記憶
ANL
SET M4841                ; P2接着剤残量予告記憶
CON
SET L41                  ; P2 残量警告記憶
CON
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;Err382:Bond low level errror
LD M4051                 ; ｴﾗｰ発生
ANB M71                  ; All Error PAUSE
DW K382 D148             ; 警報No.
CON
SET M4922                ; Err382:接着剤残少
CON
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4052                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4053                 ; ｴﾗｰ解除確認
ANB M71                  ; All Error PAUSE
DW K70 D4000             ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;Err383:Bond empty errror
LD M4055                 ; ｴﾗｰ発生
ANB M71                  ; All Error PAUSE
RES M4840                ; P1接着剤残量予告記憶
CON
RES M4841                ; P2接着剤残量予告記憶
CON
DW K383 D148             ; 警報No.
CON
SET M4923                ; Err383:接着剤残量無し
CON
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4056                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD T1800                 ; 接着剤P_電源ｽｲｯﾁ
LD M9702                 ; P1運転
AND T1905                ; 接着剤P1_残量警告
AND Y2513                ; 接着剤P1_ﾗﾑ駆動ｼﾘﾝﾀﾞ下降
LD M9703                 ; P2運転
AND T1913                ; 接着剤P2_残量警告
AND Y2517                ; 接着剤P2_ﾗﾑ駆動ｼﾘﾝﾀﾞ下降
ORL
ANL
ANB M36                  ; 1Pumpﾓｰﾄﾞ
OUT M4842                ; 自動PUMP切り替え可能
LD M4057                 ; ｴﾗｰ解除確認
ANB M71                  ; All Error PAUSE
MPS
AND M4842                ; 自動PUMP切り替え可能
DIFU M4843               ; PUMP切り替えPLS
CON
MPS
AND Y2510                ; P切替_自動三方ﾊﾞﾙﾌﾞA
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
AND Y2511                ; P切替_自動三方ﾊﾞﾙﾌﾞB
DW K59 D4000             ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
ANB M4842                ; 自動PUMP切り替え可能
MPS
AND M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
DW K70 D4000             ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
OUT M4991                ; 接着剤残量無し      CycleSTOP
LD M4058                 ; P1→P2
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
AND Y2511                ; P切替_自動三方ﾊﾞﾙﾌﾞB
AND T1901                ; P切替_自動三方ﾊﾞﾙﾌﾞB
RES L32                  ; P1 運転記憶
CON
RES L33                  ; P1 捨打ち運転記憶
CON
DW K12 D4000             ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4059                 ; P2→P1
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
AND Y2510                ; P切替_自動三方ﾊﾞﾙﾌﾞA
AND T1900                ; P切替_自動三方ﾊﾞﾙﾌﾞA
RES L37                  ; P2 運転記憶
CON
RES L38                  ; P2 捨打ち運転記憶
CON
DW K12 D4000             ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;塗布ｴﾘｱ確認
;Bonding area select 
LD M4070                 ; 機種ﾃﾞｰﾀ確認
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
MPS
LD M1981                 ; Y1 塗布要求
ANB M3981                ; Y2 塗布要求
ANL
DW K100 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MRD
LDB M1981                ; Y1 塗布要求
AND M3981                ; Y2 塗布要求
ANL
DW K200 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MRD
LD M1981                 ; Y1 塗布要求
AND M3981                ; Y2 塗布要求
ANL
MPS
AND M4853                ; 投入1優先
DW K100 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
AND M4854                ; 投入2優先
DW K200 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MRD
LDB M1981                ; Y1 塗布要求
ANB M3981                ; Y2 塗布要求
ANL
MPS
LD M4851                 ; 投入1ﾜｰｸ確認
ANB M4852                ; 投入2ﾜｰｸ確認
ANL
DW K100 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MRD
LDB M4851                ; 投入1ﾜｰｸ確認
AND M4852                ; 投入2ﾜｰｸ確認
ANL
DW K200 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
LD M4851                 ; 投入1ﾜｰｸ確認
AND M4852                ; 投入2ﾜｰｸ確認
ANL
MPS
AND M4853                ; 投入1優先
DW K100 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
AND M4854                ; 投入2優先
DW K200 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
LD M70                   ; 自動起動停止指令(ｻｲｸﾙ停止)
AND M1398                ; ﾕﾆｯﾄ1ｻｲｸﾙ停止
AND M3398                ; UT3ｻｲｸﾙ停止
ANL
DW K309 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;<h1/>　　投入1側塗布位置移動
;　　bonding-1 side move
;Y1側移動
;Move to Bonding-1 side
LD M4100                 ; Z1上空退避
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
MPS
ANB M44                  ; 接着剤塗布日常点検
MPS
AND=.L D31290 E2000      ; 軸1 現在座標  X_P61
DW K104 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
LD<>.L D31290 E2000      ; 軸1 現在座標  X_P61
AND M4961                ; 塗布Z軸   動作可能
ANL
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
AND M44                  ; 接着剤塗布日常点検
DW K135 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4101                 ; Z_P1 move
MPS
DW K1 D4051              ; 塗布Z軸  移動No.
CON
OUT @M30                 ; 塗布Z軸移動
MPP
AND M4810                ; 塗布Z 移動完了
RES M4810                ; 塗布Z 移動完了
CON
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4102                 ; Y1側移動
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
AND M4960                ; 塗布X軸  動作可能
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4103                 ; X_P61 move
MPS
DW K61 D4050             ; 塗布X軸  移動No.
CON
OUT @M0                  ; 塗布X軸移動
MPP
AND M4800                ; 塗布X 移動完了
RES M4800                ; 塗布X 移動完了
CON
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;塗布要求確認
;Bonding demand check
LD M4104                 ; 塗布要求確認
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
MPS
AND M1981                ; Y1 塗布要求
DW K120 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
ANB M1981                ; Y1 塗布要求
MPS
AND M3981                ; Y2 塗布要求
DW K200 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
ANB M3981                ; Y2 塗布要求
DW K110 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;要求ないから上空退避位置へ
;Move to escape point when no bonding demand
LD M4110                 ; Z軸_上空退避点
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
AND M4961                ; 塗布Z軸   動作可能
ANB M4800                ; 塗布X 移動完了
ANB M4810                ; 塗布Z 移動完了
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4111                 ; Z_P2 move
MPS
DW K61 D4051             ; 塗布Z軸  移動No.
CON
OUT @M31                 ; 塗布Z軸移動
MPP
AND M4810                ; 塗布Z 移動完了
RES M4810                ; 塗布Z 移動完了
CON
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;塗布要求待ち
;Waiting for bonding demand
LD M4112                 ; 塗布要求待ち
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
AND M4960                ; 塗布X軸  動作可能
AND M4961                ; 塗布Z軸   動作可能
MPS
LD M1981                 ; Y1 塗布要求
ANB M3981                ; Y2 塗布要求
ANL
DW K120 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MRD
LDB M1981                ; Y1 塗布要求
AND M3981                ; Y2 塗布要求
ANL
DW K200 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
LDB M1981                ; Y1 塗布要求
ANB M3981                ; Y2 塗布要求
AND M1398                ; ﾕﾆｯﾄ1ｻｲｸﾙ停止
AND M3398                ; UT3ｻｲｸﾙ停止
AND M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
ANL
DW K309 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;塗布開始位置移動
;Move to bonding start point
LD M4120                 ; Y1塗布開始点移動
ANPB M4120               ; Y1塗布開始点移動
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4121                 ; XZ_P61 move
MPS
DW K61 D4050             ; 塗布X軸  移動No.
CON
OUT @M1                  ; 塗布X軸移動
MRD
DW K61 D4051             ; 塗布Z軸  移動No.
CON
OUT @M32                 ; 塗布Z軸移動
MPP
LD M4800                 ; 塗布X 移動完了
AND M4810                ; 塗布Z 移動完了
ANL
RES M4800                ; 塗布X 移動完了
CON
RES M4810                ; 塗布Z 移動完了
CON
DW K130 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;Y1塗布ﾙｰﾁﾝ呼び出し
;Y1 dispense operation
LD M4130                 ; Y1塗布    呼び出し
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
DW K1 D4002              ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
CON
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4131                 ; Y1塗布    実行中
AND M4449                ; Y1塗布ﾙｰﾁﾝ完了
DW K0 D4002              ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
CON
DW K140 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;▼↓↓↓　Daily check mode　↓↓↓▼
;Y1日常点検塗布ﾙｰﾁﾝ呼び出し
;Y1 Daily check dispense operation
LD M4135                 ; Y1DC塗布呼び出し
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
AND M1981                ; Y1 塗布要求
AND M4700                ; Y1DC塗布動作待機中
DW K1 D4004              ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
CON
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4136                 ; Y1DC塗布実行中
AND M4729                ; Y1DC塗布ﾙｰﾁﾝ完了
DW K0 D4004              ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
CON
DW K140 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;▲↑↑↑　Daily check mode　↑↑↑▲
;Case搬送とハンドシェイク
;Handshake with Case-Transfer Y1
LD M4140                 ; Y1へ塗布完了
MPS
LD M4913                 ; UNIT4     ｴﾗｰ・PAUSE無し
ANB M1981                ; Y1 塗布要求
ANL
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
OUT M4983                ; Y1へ塗布完了
LD M4141                 ; Y1塗布動作終了
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
DW K300 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;<h1/>　　投入2側塗布位置移動
;　　bonding-1 side move
;Y1側移動
;Move to Bonding-1 side
LD M4200                 ; Z1上空退避
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
MPS
ANB M44                  ; 接着剤塗布日常点検
MPS
AND=.L D31290 E2200      ; 軸1 現在座標  X_P81
DW K204 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
LD<>.L D31290 E2200      ; 軸1 現在座標  X_P81
AND M4961                ; 塗布Z軸   動作可能
ANL
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
AND M44                  ; 接着剤塗布日常点検
DW K235 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4201                 ; Z_P1 move
MPS
DW K1 D4051              ; 塗布Z軸  移動No.
CON
OUT @M33                 ; 塗布Z軸移動
MPP
AND M4810                ; 塗布Z 移動完了
RES M4810                ; 塗布Z 移動完了
CON
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4202                 ; Y1側移動
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
AND M4960                ; 塗布X軸  動作可能
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4203                 ; X_P81 move
MPS
DW K81 D4050             ; 塗布X軸  移動No.
CON
OUT @M2                  ; 塗布X軸移動
MPP
AND M4800                ; 塗布X 移動完了
RES M4800                ; 塗布X 移動完了
CON
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;塗布要求確認
;Bonding demand check
LD M4204                 ; 塗布要求確認
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
MPS
AND M3981                ; Y2 塗布要求
DW K220 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
ANB M3981                ; Y2 塗布要求
MPS
AND M1981                ; Y1 塗布要求
DW K100 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
ANB M1981                ; Y1 塗布要求
DW K210 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;要求ないから上空退避位置へ
;Move to escape point when no bonding demand
LD M4210                 ; Z軸_上空退避点
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
AND M4961                ; 塗布Z軸   動作可能
ANB M4800                ; 塗布X 移動完了
ANB M4810                ; 塗布Z 移動完了
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4211                 ; Z_P2 move
MPS
DW K81 D4051             ; 塗布Z軸  移動No.
CON
OUT @M34                 ; 塗布Z軸移動
MPP
AND M4810                ; 塗布Z 移動完了
RES M4810                ; 塗布Z 移動完了
CON
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;塗布要求待ち
;Waiting for bonding demand
LD M4212                 ; 塗布要求待ち
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
AND M4960                ; 塗布X軸  動作可能
AND M4961                ; 塗布Z軸   動作可能
MPS
LD M3981                 ; Y2 塗布要求
ANB M1981                ; Y1 塗布要求
ANL
DW K220 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MRD
LDB M3981                ; Y2 塗布要求
AND M1981                ; Y1 塗布要求
ANL
DW K100 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
LDB M1981                ; Y1 塗布要求
ANB M3981                ; Y2 塗布要求
AND M1398                ; ﾕﾆｯﾄ1ｻｲｸﾙ停止
AND M3398                ; UT3ｻｲｸﾙ停止
AND M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
ANL
DW K309 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;塗布開始位置移動
;Move to bonding start point
LD M4220                 ; Y2塗布開始点移動
ANPB M4220               ; Y2塗布開始点移動
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4221                 ; XZ_P81 move
MPS
DW K81 D4050             ; 塗布X軸  移動No.
CON
OUT @M3                  ; 塗布X軸移動
MRD
DW K81 D4051             ; 塗布Z軸  移動No.
CON
OUT @M35                 ; 塗布Z軸移動
MPP
LD M4800                 ; 塗布X 移動完了
AND M4810                ; 塗布Z 移動完了
ANL
RES M4800                ; 塗布X 移動完了
CON
RES M4810                ; 塗布Z 移動完了
CON
DW K230 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;Y2塗布ﾙｰﾁﾝ呼び出し
;Y2 dispense operation
LD M4230                 ; Y2塗布    呼び出し
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
DW K1 D4003              ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
CON
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4231                 ; Y2塗布    実行中
AND M4479                ; Y2塗布ﾙｰﾁﾝ完了
DW K0 D4003              ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
CON
DW K240 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;▼↓↓↓　Daily check mode　↓↓↓▼
;Y2日常点検塗布ﾙｰﾁﾝ呼び出し
;Y2 Daily check dispense operation
LD M4235                 ; Y1DC塗布呼び出し
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
AND M3981                ; Y2 塗布要求
AND M4750                ; Y2DC塗布動作待機中
DW K1 D4005              ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
CON
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4236
AND M4779                ; Y2DC塗布ﾙｰﾁﾝ完了
DW K0 D4005              ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
CON
DW K240 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;▲↑↑↑　Daily check mode　↑↑↑▲
;Case搬送とハンドシェイク
;Handshake with Case-Transfer Y2
LD M4240
MPS
LD M4913                 ; UNIT4     ｴﾗｰ・PAUSE無し
ANB M3981                ; Y2 塗布要求
ANL
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
OUT M4986                ; Y2へ塗布完了
LD M4241                 ; Y2塗布動作終了
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
DW K300 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;終了後　移動先確認
;Destination check
LD M4300                 ; ｻｲｸﾙ終了処理
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
MPS
LDB M1981                ; Y1 塗布要求
ANB M3981                ; Y2 塗布要求
ANB M4853                ; 投入1優先
ANB M4854                ; 投入2優先
ANL
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
LD M1981                 ; Y1 塗布要求
OR M3981                 ; Y2 塗布要求
OR M4853                 ; 投入1優先
OR M4854                 ; 投入2優先
ANL
DW K309 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;行き先が無いので捨て打ち位置へ移動
;Move to discharge point
LD M4301                 ; Z軸上空位置移動
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
AND M4961                ; 塗布Z軸   動作可能
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4302                 ; Z_P1 move
MPS
DW K1 D4051              ; 塗布Z軸  移動No.
CON
OUT @M36                 ; 塗布Z軸移動
MPP
AND M4810                ; 塗布Z 移動完了
RES M4810                ; 塗布Z 移動完了
CON
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4303                 ; 捨て打ち位置移動
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
AND M4960                ; 塗布X軸  動作可能
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4304                 ; X_P5 move
MPS
DW K5 D4050              ; 塗布X軸  移動No.
CON
OUT @M4                  ; 塗布X軸移動
MPP
AND M4800                ; 塗布X 移動完了
RES M4800                ; 塗布X 移動完了
CON
@INC D4000               ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
LD M4305                 ; ！！
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
DW K309 D4000            ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;サイクル停止条件
;Cycle end check
LD M4309                 ; 1ｻｲｸﾙ終了
MPS
LDB M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
ORB M1398                ; ﾕﾆｯﾄ1ｻｲｸﾙ停止
ORB M3398                ; UT3ｻｲｸﾙ停止
ANL
DW K0 D4000              ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
LD M70                   ; 自動起動停止指令(ｻｲｸﾙ停止)
AND M1398                ; ﾕﾆｯﾄ1ｻｲｸﾙ停止
AND M3398                ; UT3ｻｲｸﾙ停止
ANL
@MOV K398 D4000          ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPS
AND X1695                ; 接着剤P1_残量警告 【ONで無】
RES L32                  ; P1 運転記憶
CON
RES L33                  ; P1 捨打ち運転記憶
MPP
AND X169D                ; 接着剤P2_残量警告 【ONで無】
RES L37                  ; P2 運転記憶
CON
RES L38                  ; P2 捨打ち運転記憶
;終了
;Unit AUTO cycle end
LD M4398                 ; ﾕﾆｯﾄ4ｻｲｸﾙ停止
MPS
LD M70                   ; 自動起動停止指令(ｻｲｸﾙ停止)
AND M72                  ; 全ﾕﾆｯﾄ停止確認
ANL
@MOV K399 D4000          ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
MPP
ANB M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
DW K0 D4000              ; ﾕﾆｯﾄ4自動運転ｽﾃｯﾌﾟ
;<h1/>■原点復帰回路
;
;運転開始・ステッパ初期化・補助接点へ展開
LD CR2002                ; 常時ON
ZRES M4500 M4599         ; ﾕﾆｯﾄ4原点復帰開始
LDB M4904                ; ﾕﾆｯﾄ4原点復帰中
MOV K0 D4010             ; ﾕﾆｯﾄ4原点復帰ｽﾃｯﾌﾟ
LD M4904                 ; ﾕﾆｯﾄ4原点復帰中
MOV D4010 Z1             ; ﾕﾆｯﾄ4原点復帰ｽﾃｯﾌﾟ
SET M4500:Z1             ; ﾕﾆｯﾄ4原点復帰開始
;原点復帰ステップ開始
;Origin start
LD M4500                 ; ﾕﾆｯﾄ4原点復帰開始
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
MPS
AND X105                 ; 吐出ﾓｰﾀ_速度0
@INC D4010               ; ﾕﾆｯﾄ4原点復帰ｽﾃｯﾌﾟ
MPP
OUT M4970                ; 塗布停止
;塗布Z軸　原点復帰
;Bonding Z axis HOME start
LD M4501                 ; 塗布Z軸原点復帰
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
ANB X5444                ; 軸1 軸制御中
ANB X5524                ; 軸2 軸制御中
AND X553D                ; 軸2 ｻｰﾎﾞﾚﾃﾞｨ
ANB X5520                ; 軸2 軸ｴﾗｰ中
@INC D4010               ; ﾕﾆｯﾄ4原点復帰ｽﾃｯﾌﾟ
LD M4502                 ; Bonding Z HOME
MPS
MCALL ORIGIN_K K5 K2 M4815 M4814;塗布Z 原点復帰異常  塗布Z 原点復帰完了
MPP
AND M4814                ; 塗布Z 原点復帰完了
RES M4814                ; 塗布Z 原点復帰完了
CON
@INC D4010               ; ﾕﾆｯﾄ4原点復帰ｽﾃｯﾌﾟ
;塗布X軸　原点復帰
;Bonding X axis HOME start
LD M4503                 ; 塗布X軸原点復帰
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
AND M4960                ; 塗布X軸  動作可能
@INC D4010               ; ﾕﾆｯﾄ4原点復帰ｽﾃｯﾌﾟ
LD M4504                 ; Bonding X HOME
MPS
MCALL ORIGIN_K K5 K1 M4805 M4804;塗布X 原点復帰異常  塗布X 原点復帰完了
MPP
AND M4804                ; 塗布X 原点復帰完了
RES M4804                ; 塗布X 原点復帰完了
CON
@INC D4010               ; ﾕﾆｯﾄ4原点復帰ｽﾃｯﾌﾟ
;塗布X軸　捨てうち開始位置移動
;Bonding X move to discharge point
LD M4505                 ; 捨てうち開始位置移動
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
AND M4960                ; 塗布X軸  動作可能
@INC D4010               ; ﾕﾆｯﾄ4原点復帰ｽﾃｯﾌﾟ
LD M4506                 ; X_P5 move
MPS
DW K5 D4050              ; 塗布X軸  移動No.
CON
OUT @M5                  ; 塗布X軸移動
MPP
AND M4800                ; 塗布X 移動完了
RES M4800                ; 塗布X 移動完了
CON
DW K10 D4010             ; ﾕﾆｯﾄ4原点復帰ｽﾃｯﾌﾟ
;原点復帰終了
LD M4510                 ; 原点復帰動作完了
AND M4900                ; ﾕﾆｯﾄ4原点
OUT M4578                ; ﾕﾆｯﾄ4原点復帰完了
LD M4578                 ; ﾕﾆｯﾄ4原点復帰完了
ANB M98                  ; 原点復帰開始
@MOV K79 D4010           ; ﾕﾆｯﾄ4原点復帰ｽﾃｯﾌﾟ
;<h1/>■手動回路 
;
LD M33                   ; 手動ﾓｰﾄﾞ
AND M34                  ; ﾒｲﾝ手動操作可能条件
LDB M4905                ; ﾕﾆｯﾄ4起動中
OR M4631                 ; 捨て打ち動作実行
OR M4633                 ; 塗布ﾄﾚｰｽ開始
OR M4636                 ; 日常点検塗布ﾄﾚｰｽ開始
ANL
ANB M97                  ; 原点復帰動作中
MC
;Bonding X
LDB X5444                ; 軸1 軸制御中
ANB X5524                ; 軸2 軸制御中
MPS
LD M4960                 ; 塗布X軸  動作可能
ANB M4800                ; 塗布X 移動完了
ANB M4801                ; 塗布X 移動異常
ANB M4802                ; 塗布X 移動中
ANL
OUT M4609                ; 塗布ﾍｯﾄﾞX軸動作可
MPP
LD M4961                 ; 塗布Z軸   動作可能
ANB M4810                ; 塗布Z 移動完了
ANB M4811                ; 塗布Z 移動異常
ANB M4812                ; 塗布Z 移動中
ANL
OUT M4610                ; 塗布ﾍｯﾄﾞZ軸動作可
LD CR2002                ; 常時ON
MPS
LD B10E0                 ; 塗布X軸 待機位置PB
AND M4610                ; 塗布ﾍｯﾄﾞZ軸動作可
OR M4611                 ; Z_P2 move
ANB M4800                ; 塗布X 移動完了
ANL
OUT M4611                ; Z_P2 move
MPS
DW K1 D4051              ; 塗布Z軸  移動No.
CON
OUT @M37                 ; 塗布Z軸移動
MPP
LD M4810                 ; 塗布Z 移動完了
AND M4609                ; 塗布ﾍｯﾄﾞX軸動作可
OR @M6                   ; 塗布X軸移動
ANL
DW K5 D4050              ; 塗布X軸  移動No.
CON
OUT @M6                  ; 塗布X軸移動
MPP
ANF M4611                ; Z_P2 move
RES M4800                ; 塗布X 移動完了
CON
RES M4810                ; 塗布Z 移動完了
LD CR2002                ; 常時ON
MPS
LD B10E1                 ; 塗布X軸 Y1塗布位置PB
AND M4610                ; 塗布ﾍｯﾄﾞZ軸動作可
OR M4612                 ; Z_P61 move
ANB M4800                ; 塗布X 移動完了
ANL
OUT M4612                ; Z_P61 move
MPS
DW K1 D4051              ; 塗布Z軸  移動No.
CON
OUT @M38                 ; 塗布Z軸移動
MPP
LD M4810                 ; 塗布Z 移動完了
AND M4609                ; 塗布ﾍｯﾄﾞX軸動作可
OR @M7                   ; 塗布X軸移動
ANL
DW K61 D4050             ; 塗布X軸  移動No.
CON
OUT @M7                  ; 塗布X軸移動
MPP
ANF M4612                ; Z_P61 move
RES M4800                ; 塗布X 移動完了
CON
RES M4810                ; 塗布Z 移動完了
LD CR2002                ; 常時ON
MPS
LD B10E2                 ; 塗布X軸 Y2塗布位置PB
AND M4610                ; 塗布ﾍｯﾄﾞZ軸動作可
OR M4613                 ; Z_P81 move
ANB M4800                ; 塗布X 移動完了
ANL
OUT M4613                ; Z_P81 move
MPS
DW K1 D4051              ; 塗布Z軸  移動No.
CON
OUT @M39                 ; 塗布Z軸移動
MPP
LD M4810                 ; 塗布Z 移動完了
AND M4609                ; 塗布ﾍｯﾄﾞX軸動作可
OR @M8                   ; 塗布X軸移動
ANL
DW K81 D4050             ; 塗布X軸  移動No.
CON
OUT @M8                  ; 塗布X軸移動
MPP
ANF M4613                ; Z_P81 move
RES M4800                ; 塗布X 移動完了
CON
RES M4810                ; 塗布Z 移動完了
LD CR2002                ; 常時ON
MPS
LD B10E3                 ; 塗布X軸 捨て打ち位置PB
AND M4610                ; 塗布ﾍｯﾄﾞZ軸動作可
OR M4614                 ; X_P1 move
ANB M4617                ; 捨て打ち位置移動完了
ANL
OUT M4614                ; X_P1 move
MPS
ANB M4615                ; X_P3 move
DW K1 D4051              ; 塗布Z軸  移動No.
CON
OUT @M40                 ; 塗布Z軸移動
MRD
LD M4810                 ; 塗布Z 移動完了
AND M4960                ; 塗布X軸  動作可能
OR M4615                 ; X_P3 move
ANL
MPS
@RES M4810               ; 塗布Z 移動完了
CON
OUT M4615                ; X_P3 move
MPP
ANB M4616                ; Z_P5 move
MOV D4300 D4050          ; 捨て打ち実行位置  塗布X軸  移動No.
OUT @M9                  ; 塗布X軸移動
MRD
LD M4615                 ; X_P3 move
AND M4800                ; 塗布X 移動完了
AND M4961                ; 塗布Z軸   動作可能
OR M4616                 ; Z_P5 move
ANL
OUT M4616                ; Z_P5 move
DW K3 D4051              ; 塗布Z軸  移動No.
CON
OUT @M41                 ; 塗布Z軸移動
MPP
LD M4616                 ; Z_P5 move
AND M4810                ; 塗布Z 移動完了
ANL
OUT M4617                ; 捨て打ち位置移動完了
MPP
ANF M4614                ; X_P1 move
RES M4800                ; 塗布X 移動完了
CON
RES M4810                ; 塗布Z 移動完了
LD CR2002                ; 常時ON
MPS
LD B10E9                 ; 塗布X軸 Y1日常点検位置PB
AND M4610                ; 塗布ﾍｯﾄﾞZ軸動作可
OR M4623                 ; X_P101 move
ANB M4800                ; 塗布X 移動完了
ANL
OUT M4623                ; X_P101 move
MPS
DW K1 D4051              ; 塗布Z軸  移動No.
CON
OUT @M42                 ; 塗布Z軸移動
MPP
LD M4810                 ; 塗布Z 移動完了
AND M4609                ; 塗布ﾍｯﾄﾞX軸動作可
OR @M10                  ; 塗布X軸移動
ANL
DW K101 D4050            ; 塗布X軸  移動No.
CON
OUT @M10                 ; 塗布X軸移動
MPP
ANF M4623                ; X_P101 move
RES M4800                ; 塗布X 移動完了
CON
RES M4810                ; 塗布Z 移動完了
LD CR2002                ; 常時ON
MPS
LD B10EA                 ; 塗布X軸 Y2日常点検位置PB
AND M4610                ; 塗布ﾍｯﾄﾞZ軸動作可
OR M4624                 ; X_P121 move
ANB M4800                ; 塗布X 移動完了
ANL
OUT M4624                ; X_P121 move
MPS
DW K1 D4051              ; 塗布Z軸  移動No.
CON
OUT @M43                 ; 塗布Z軸移動
MPP
LD M4810                 ; 塗布Z 移動完了
AND M4609                ; 塗布ﾍｯﾄﾞX軸動作可
OR @M11                  ; 塗布X軸移動
ANL
DW K121 D4050            ; 塗布X軸  移動No.
CON
OUT @M11                 ; 塗布X軸移動
MPP
ANF M4624                ; X_P121 move
RES M4800                ; 塗布X 移動完了
CON
RES M4810                ; 塗布Z 移動完了
;Bonding Z
LD CR2002                ; 常時ON
MPS
LD B10E4                 ; 塗布Z軸 Y1塗布開始位置PB
ANB R3000                ; 塗布X　   Case1干渉外
AND M4610                ; 塗布ﾍｯﾄﾞZ軸動作可
OR M4618                 ; Z_P61 move
ANB M4810                ; 塗布Z 移動完了
ANL
OUT M4618                ; Z_P61 move
DW K61 D4051             ; 塗布Z軸  移動No.
CON
OUT @M44                 ; 塗布Z軸移動
MPP
ANF M4618                ; Z_P61 move
RES M4810                ; 塗布Z 移動完了
LD CR2002                ; 常時ON
MPS
LD B10E5                 ; 塗布Z軸 Y2塗布開始位置
ANB R3001                ; 塗布X　   Case2干渉外
AND M4610                ; 塗布ﾍｯﾄﾞZ軸動作可
OR M4619                 ; Z_P81 move
ANB M4810                ; 塗布Z 移動完了
ANL
OUT M4619                ; Z_P81 move
DW K81 D4051             ; 塗布Z軸  移動No.
CON
OUT @M45                 ; 塗布Z軸移動
MPP
ANF M4619                ; Z_P81 move
RES M4810                ; 塗布Z 移動完了
LD CR2002                ; 常時ON
MPS
LD B10E6                 ; 塗布Z軸 捨てうち開始位置
AND M4610                ; 塗布ﾍｯﾄﾞZ軸動作可
OR M4620                 ; Z_P3 move
ANB M4810                ; 塗布Z 移動完了
ANL
OUT M4620                ; Z_P3 move
DW K3 D4051              ; 塗布Z軸  移動No.
CON
OUT @M46                 ; 塗布Z軸移動
MPP
ANF M4620                ; Z_P3 move
RES M4810                ; 塗布Z 移動完了
LD CR2002                ; 常時ON
MPS
LD B10E7                 ; 塗布Z軸 原点位置
ANB X5444                ; 軸1 軸制御中
ANB X5524                ; 軸2 軸制御中
AND X553D                ; 軸2 ｻｰﾎﾞﾚﾃﾞｨ
ANB X5520                ; 軸2 軸ｴﾗｰ中
ANB M4810                ; 塗布Z 移動完了
OR M4621                 ; Z_P1 move
ANB M4810                ; 塗布Z 移動完了
ANL
OUT M4621                ; Z_P1 move
DW K1 D4051              ; 塗布Z軸  移動No.
CON
OUT @M47                 ; 塗布Z軸移動
MPP
ANF M4621                ; Z_P1 move
RES M4810                ; 塗布Z 移動完了
LD CR2002                ; 常時ON
MPS
LD B10E8                 ; 塗布Z軸 上空退避位置移動
AND M4610                ; 塗布ﾍｯﾄﾞZ軸動作可
OR M4622                 ; Z_P2 move
ANB M4810                ; 塗布Z 移動完了
ANL
OUT M4622                ; Z_P2 move
DW K2 D4051              ; 塗布Z軸  移動No.
CON
OUT @M48                 ; 塗布Z軸移動
MPP
ANF M4622                ; Z_P2 move
RES M4810                ; 塗布Z 移動完了
LD CR2002                ; 常時ON
MPS
LD B10EB                 ; 塗布Z軸 Y1日常点検高さPB
AND M4610                ; 塗布ﾍｯﾄﾞZ軸動作可
OR M4625                 ; Z_P101 move
ANB M4810                ; 塗布Z 移動完了
ANL
OUT M4625                ; Z_P101 move
DW K101 D4051            ; 塗布Z軸  移動No.
CON
OUT @M49                 ; 塗布Z軸移動
MPP
ANF M4625                ; Z_P101 move
RES M4810                ; 塗布Z 移動完了
LD CR2002                ; 常時ON
MPS
LD B10EC                 ; 塗布Z軸 Y2日常点検高さPB
AND M4610                ; 塗布ﾍｯﾄﾞZ軸動作可
OR M4626                 ; Z_P121 move
ANB M4810                ; 塗布Z 移動完了
ANL
OUT M4626                ; Z_P121 move
DW K121 D4051            ; 塗布Z軸  移動No.
CON
OUT @M50                 ; 塗布Z軸移動
MPP
ANF M4626                ; Z_P121 move
RES M4810                ; 塗布Z 移動完了
;Jog
LD M260                  ; RCA ｲﾝﾁﾝｸﾞ動作FLG.
LD B2100                 ; 塗布X軸+JOG PB
OR B2101                 ; 塗布X軸-JOG PB
OR B2102                 ; 塗布Z軸+JOG PB
OR B2103                 ; 塗布Z軸-JOG PB
ANL
TMH K470 K10             ; ｲﾝﾁﾝｸﾞ用JOG信号ON時間
LDB T470                 ; ｲﾝﾁﾝｸﾞ用JOG信号ON時間
MPS
LD X545D                 ; 軸1 ｻｰﾎﾞﾚﾃﾞｨ
ANB X5440                ; 軸1 軸ｴﾗｰ中
ANL
MPS
AND B2100                ; 塗布X軸+JOG PB
OUT Y5410                ; 軸1 JOG正方向
MPP
AND B2101                ; 塗布X軸-JOG PB
OUT Y5411                ; 軸1 JOG負方向
MPP
LD X553D                 ; 軸2 ｻｰﾎﾞﾚﾃﾞｨ
ANB X5520                ; 軸2 軸ｴﾗｰ中
ANL
MPS
LD B2102                 ; 塗布Z軸+JOG PB
AND<=.L D31350 +15000    ; 軸2 現在座標
ANL
OUT Y5490                ; 軸2 JOG正方向
MPP
LD B2103                 ; 塗布Z軸-JOG PB
AND>=.L D31350 +0        ; 軸2 現在座標
ANL
OUT Y5491                ; 軸2 JOG負方向
;Test shots
LD CR2002                ; 常時ON
MPS
LDP B10F2                ; 捨て打ち動作
AND= D4001 K0            ; UT4SUB1   捨て打ちｽﾃｯﾌﾟ
AND M4610                ; 塗布ﾍｯﾄﾞZ軸動作可
AND M4902                ; ﾕﾆｯﾄ4起動条件
LD M4859                 ; Bond pump Operating
OR M43                   ; Pump runing check 無効
ANL
OR M4631                 ; 捨て打ち動作実行
ANB M4419                ; 捨て打ち完了
ANL
MPS
OUT M4631                ; 捨て打ち動作実行
MPP
AND M4400                ; UT4SUB1　待機中
@DW K1 D4001             ; UT4SUB1   捨て打ちｽﾃｯﾌﾟ
MPP
ANF M4631                ; 捨て打ち動作実行
DW K0 D4001              ; UT4SUB1   捨て打ちｽﾃｯﾌﾟ
LD B10F0                 ; Discharge shot PB
LD M4859                 ; Bond pump Operating
OR M43                   ; Pump runing check 無効
ANL
OR M4632                 ; Timer shot
OUT M4635                ; Dispense ON 
LD CR2002                ; 常時ON
LDP B10F1                ; Timer shot PB
LD M4859                 ; Bond pump Operating
OR M43                   ; Pump runing check 無効
ANL
OR M4632                 ; Timer shot
ANL
ANB T411                 ; CW timer
OUT M4632                ; Timer shot
TMH K411 E71             ; CW timer
;Bonding trace
LD CR2002                ; 常時ON
MPS
LD B2003                 ; B.trace Start sw
LDB R3000                ; 塗布X　   Case1干渉外
AND= D4002 K0            ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
LDB R3001                ; 塗布X　   Case2干渉外
AND= D4003 K0            ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
ORL
ANL
AND M4610                ; 塗布ﾍｯﾄﾞZ軸動作可
AND M4902                ; ﾕﾆｯﾄ4起動条件
OR M4633                 ; 塗布ﾄﾚｰｽ開始
ANB M4449                ; Y1塗布ﾙｰﾁﾝ完了
ANB M4479                ; Y2塗布ﾙｰﾁﾝ完了
ANL
OUT M4633                ; 塗布ﾄﾚｰｽ開始
MPS
LDB R3000                ; 塗布X　   Case1干渉外
AND M4420                ; Y1塗布動作待機中
ANL
@DW K1 D4002             ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
MPP
LDB R3001                ; 塗布X　   Case2干渉外
AND M4450                ; Y2塗布動作待機中
ANL
@DW K1 D4003             ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
MPP
ANF M4633                ; 塗布ﾄﾚｰｽ開始
RES D502                 ; 完了ポイントNo.
CON
RES M4634                ; Dis. ON
CON
DW K0 D4002              ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
CON
DW K0 D4003              ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
;Daily check Bonding trace
LD CR2002                ; 常時ON
MPS
LD B2005                 ; DC.B.trace Start sw
LDB R3000                ; 塗布X　   Case1干渉外
AND= D4002 K0            ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
LDB R3001                ; 塗布X　   Case2干渉外
AND= D4003 K0            ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
ORL
ANL
AND M4610                ; 塗布ﾍｯﾄﾞZ軸動作可
AND M4902                ; ﾕﾆｯﾄ4起動条件
OR M4636                 ; 日常点検塗布ﾄﾚｰｽ開始
ANB M4729                ; Y1DC塗布ﾙｰﾁﾝ完了
ANB M4779                ; Y2DC塗布ﾙｰﾁﾝ完了
ANL
OUT M4636                ; 日常点検塗布ﾄﾚｰｽ開始
MPS
LDB R3000                ; 塗布X　   Case1干渉外
AND M4700                ; Y1DC塗布動作待機中
ANL
@DW K1 D4004             ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
MPP
LDB R3001                ; 塗布X　   Case2干渉外
AND M4750                ; Y2DC塗布動作待機中
ANL
@DW K1 D4005             ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
MPP
ANF M4636                ; 日常点検塗布ﾄﾚｰｽ開始
RES D502                 ; 完了ポイントNo.
CON
RES M4634                ; Dis. ON
CON
DW K0 D4004              ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
CON
DW K0 D4004              ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
;Dispense ON/OFF control
LDP B2004                ; BT Dispence ON　sw
ANB M4633                ; 塗布ﾄﾚｰｽ開始
ANB M4636                ; 日常点検塗布ﾄﾚｰｽ開始
ALT M4634                ; Dis. ON
LD= D12000 K411          ; 表示画面No.
OR= D12000 K412          ; 表示画面No.
OR= D12000 K414          ; 表示画面No.
OR= D12000 K415          ; 表示画面No.
OR= D12000 K417          ; 表示画面No.
OR= D12000 K418          ; 表示画面No.
OR= D12000 K419          ; 表示画面No.
OR= D12000 K420          ; 表示画面No.
MEP
RES M4634                ; Dis. ON
MCR
;<h1/>■サブルーチン
;
;<h1/> ////　捨て打ち動作
;////   Discharge operation
LD CR2002                ; 常時ON
ZRES M4400 M4419         ; UT4SUB1　待機中  捨て打ち完了
LDB M4905                ; ﾕﾆｯﾄ4起動中
MOV K0 D4001             ; UT4SUB1   捨て打ちｽﾃｯﾌﾟ
LD M4905                 ; ﾕﾆｯﾄ4起動中
MOV D4001 Z1             ; UT4SUB1   捨て打ちｽﾃｯﾌﾟ
MPS
SET M4400:Z1             ; UT4SUB1　待機中
MPP
AND<> D4001 K0           ; UT4SUB1   捨て打ちｽﾃｯﾌﾟ
OUT M4685                ; 捨て打ち中
;捨て打ちポイント管理
;Discharge point manegemant
;IF (D4300 < 3) OR (D4300 > 7) THEN
;  D4300 = 3
;END IF
;IF (D4300 < 3) OR (D4300 > 7) THEN
;
LD< D4300 K3             ; 捨て打ち実行位置
OUT @VB00
LD> D4300 K7             ; 捨て打ち実行位置
OR @VB00
NCJ K2000
;  D4300 = 3
;
LD CR2002                ; 常時ON
MOV K3 D4300             ; 捨て打ち実行位置
;END IF
LABEL K2000
;
;捨て打ち皿確認
;Discharge saucer check
LD M4401                 ; UT4SUB1ｽﾃｯﾌﾟ開始
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
MPS
AND T1200                ; 捨打皿検出
DW K5 D4001              ; UT4SUB1   捨て打ちｽﾃｯﾌﾟ
MPP
ANB T1200                ; 捨打皿検出
TMR K410 K30             ; 捨て打ち皿未検出時間
CON
AND T410                 ; 捨て打ち皿未検出時間
@INC D4001               ; UT4SUB1   捨て打ちｽﾃｯﾌﾟ
;Err370:Discharge saucer no detect
LD M4402                 ; ｴﾗｰ発生
ANB M71                  ; All Error PAUSE
DW K387 D148             ; 警報No.
CON
SET M4927                ; Err387:捨て打ち皿未検出
CON
@INC D4001               ; UT4SUB1   捨て打ちｽﾃｯﾌﾟ
LD M4403                 ; ｴﾗｰ中
AND M71                  ; All Error PAUSE
@INC D4001               ; UT4SUB1   捨て打ちｽﾃｯﾌﾟ
LD M4404                 ; ｴﾗｰ解除確認
ANB M71                  ; All Error PAUSE
DW K1 D4001              ; UT4SUB1   捨て打ちｽﾃｯﾌﾟ
;捨て打ち位置移動
;Move to Discharge point
LD M4405                 ; 捨て打ち位置移動
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
AND M4961                ; 塗布Z軸   動作可能
@INC D4001               ; UT4SUB1   捨て打ちｽﾃｯﾌﾟ
LD M4406                 ; Z_P1 move
MPS
DW K1 D4051              ; 塗布Z軸  移動No.
CON
OUT @M51                 ; 塗布Z軸移動
MPP
AND M4810                ; 塗布Z 移動完了
RES M4810                ; 塗布Z 移動完了
CON
@INC D4001               ; UT4SUB1   捨て打ちｽﾃｯﾌﾟ
LD M4407                 ; 塗布X　捨て打ち位置移動
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
AND M4960                ; 塗布X軸  動作可能
@INC D4001               ; UT4SUB1   捨て打ちｽﾃｯﾌﾟ
LD M4408                 ; X_P3 move
MOV D4300 D4050          ; 捨て打ち実行位置  塗布X軸  移動No.
MPS
OUT @M12                 ; 塗布X軸移動
MPP
AND M4800                ; 塗布X 移動完了
RES M4800                ; 塗布X 移動完了
CON
@INC D4300               ; 捨て打ち実行位置
CON
@INC D4001               ; UT4SUB1   捨て打ちｽﾃｯﾌﾟ
LD M4409                 ; 塗布Z軸　捨て打ち開始位置下降
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
AND M4961                ; 塗布Z軸   動作可能
@INC D4001               ; UT4SUB1   捨て打ちｽﾃｯﾌﾟ
LD M4410                 ; Z_P3 down
MPS
DW K3 D4051              ; 塗布Z軸  移動No.
CON
OUT @M52                 ; 塗布Z軸移動
MPP
AND M4810                ; 塗布Z 移動完了
RES M4810                ; 塗布Z 移動完了
CON
@INC D4001               ; UT4SUB1   捨て打ちｽﾃｯﾌﾟ
;捨て打ち
;Discharge
LD M4411                 ; 吐出開始
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
AND M4960                ; 塗布X軸  動作可能
MPS
LDB X105                 ; 吐出ﾓｰﾀ_速度0
AND X103                 ; 吐出ﾓｰﾀ_速度一致
OR Y204                  ; 吐出ﾓｰﾀ_正転開始
OR M25                   ; 吐出無し
ANL
@INC D4001               ; UT4SUB1   捨て打ちｽﾃｯﾌﾟ
MPP
OUT M4980                ; 捨て打ち 吐出ON
LD M4412                 ; X_P4 move
TMH K435 E4501           ; Interval time
CON
AND T435
@INC D4001               ; UT4SUB1   捨て打ちｽﾃｯﾌﾟ
LD M4413                 ; 吐出停止
MPS
LD X105                  ; 吐出ﾓｰﾀ_速度0
AND X103                 ; 吐出ﾓｰﾀ_速度一致
ORB Y204                 ; 吐出ﾓｰﾀ_正転開始
ANL
@INC D4001               ; UT4SUB1   捨て打ちｽﾃｯﾌﾟ
MPP
OUT M4981                ; 捨て打ち 吐出OFF
LD M4414                 ; ｲﾝﾀｰﾊﾞﾙ
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
TMH K436 K500
CON
AND T436
@INC D4001               ; UT4SUB1   捨て打ちｽﾃｯﾌﾟ
;塗布Z軸上空退避
;Move to upside
LD M4415                 ; 塗布Z軸　上空退避
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
AND M4961                ; 塗布Z軸   動作可能
@INC D4001               ; UT4SUB1   捨て打ちｽﾃｯﾌﾟ
LD M4416                 ; Z_P1 move
MPS
DW K1 D4051              ; 塗布Z軸  移動No.
CON
OUT @M53                 ; 塗布Z軸移動
MPP
AND M4810                ; 塗布Z 移動完了
RES M4810                ; 塗布Z 移動完了
CON
DW K19 D4001             ; UT4SUB1   捨て打ちｽﾃｯﾌﾟ
;<h1/> ////　塗布動作1
;////   Dispense operation 1
LD CR2002                ; 常時ON
ZRES M4420 M4449         ; Y1塗布動作待機中  Y1塗布ﾙｰﾁﾝ完了
LDB M4905                ; ﾕﾆｯﾄ4起動中
MOV K0 D4002             ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
LD M4905                 ; ﾕﾆｯﾄ4起動中
MOV D4002 Z1             ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
SET M4420:Z1             ; Y1塗布動作待機中
;塗布動作開始
LD M4421                 ; Y1塗布動作開始
DW K1 D4060              ; 塗布 Point No.
CON
AND= D4060 K1            ; 塗布 Point No.
MPS
LD=.L D31290 E2000       ; 軸1 現在座標  X_P61
AND=.L D31350 E2004      ; 軸2 現在座標  Z_P61
ANL
DW K6 D4002              ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
MPP
LD<>.L D31290 E2000      ; 軸1 現在座標  X_P61
OR<>.L D31350 E2004      ; 軸2 現在座標  Z_P61
AND M4961                ; 塗布Z軸   動作可能
ANL
TMH K424 K30             ; 塗布開始位置移動ﾃﾞｨﾚｲ
CON
AND T424                 ; 塗布開始位置移動ﾃﾞｨﾚｲ
@INC D4002               ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
LD M4422                 ; 塗布Z軸上空移動
MPS
DW K1 D4051              ; 塗布Z軸  移動No.
CON
OUT @M54                 ; 塗布Z軸移動
MPP
AND M4810                ; 塗布Z 移動完了
RES M4810                ; 塗布Z 移動完了
CON
@INC D4002               ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
LD M4423                 ; Y1側塗布開始点移動
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
AND M4960                ; 塗布X軸  動作可能
@INC D4002               ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
LD M4424                 ; X_P61 move
MPS
DW K61 D4050             ; 塗布X軸  移動No.
CON
OUT @M13                 ; 塗布X軸移動
MPP
AND M4800                ; 塗布X 移動完了
RES M4800                ; 塗布X 移動完了
CON
@INC D4002               ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
LD M4425                 ; Z_P61 move
MPS
DW K61 D4051             ; 塗布Z軸  移動No.
CON
OUT @M55                 ; 塗布Z軸移動
MPP
AND M4810                ; 塗布Z 移動完了
RES M4810                ; 塗布Z 移動完了
CON
@INC D4002               ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
;塗布条件確認
;Dispense condition check
;Z2 = D4060
;Z3 = Z2 *10
;D4061 = E3200:Z2
;D4062.D = 0
;D4062.U = E2008.U:Z3
;D4066 = D4060 +61
;D4080.L = E2000.L:Z3
;D4082.L = E2002.L:Z3
;
LD CR2002                ; 常時ON
NCJ K1000
;Z2 = D4060
;
LD CR2002                ; 常時ON
LDA D4060                ; 塗布 Point No.
CON
EXT
CON
STA.L Z2
;Z3 = Z2 *10
;
LD CR2002                ; 常時ON
LDA.L Z2
CON
MUL.L +10
CON
STA.L Z3
;D4061 = E3200:Z2
;
LD CR2002                ; 常時ON
MOV E3200:Z2 D4061       ; P21 FLG  塗布ﾎﾟｲﾝﾄﾌﾗｸﾞﾃﾞｰﾀ
;D4062.D = 0
;
LD CR2002                ; 常時ON
MOV.D K0 D4062           ; ON delay
;D4062.U = E2008.U:Z3
;
LD CR2002                ; 常時ON
MOV E2008:Z3 D4062       ; ON delay
;D4066 = D4060 +61
;
LD CR2002                ; 常時ON
LDA D4060                ; 塗布 Point No.
CON
EXT
CON
ADD.L +61
CON
STA D4066                ; 塗布positon data No.
;D4080.L = E2000.L:Z3
;
LD CR2002                ; 常時ON
MOV.L E2000:Z3 D4080     ; X_P61  塗布1X軸ﾃﾞｰﾀ
;D4082.L = E2002.L:Z3
;
LD CR2002                ; 常時ON
MOV.L E2002:Z3 D4082     ; Y1_P61  塗布1Y軸ﾃﾞｰﾀ
LABEL K1000
;
LD M4426                 ; Dispense  check
AND M4960                ; 塗布X軸  動作可能
AND M4961                ; 塗布Z軸   動作可能
AND M1960                ; Case搬送動作可能
TMH K450 K2              ; ﾃﾞｰﾀ読み込み安定化ﾃﾞｨﾚｲ
CON
AND T450                 ; ﾃﾞｰﾀ読み込み安定化ﾃﾞｨﾚｲ
@INC D4002               ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
LD M4427                 ; Dispense  check
MPS
LD>=.L D4080 +57500      ; 塗布1X軸ﾃﾞｰﾀ
AND>=.L D4082 +11000     ; 塗布1Y軸ﾃﾞｰﾀ
ANL
MPS
ANB D4061.4
DW K10 D4002             ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
MPP
AND D4061.4
@INC D4002               ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
MPP
LD<.L D4080 +57500       ; 塗布1X軸ﾃﾞｰﾀ
OR<.L D4082 +11000       ; 塗布1Y軸ﾃﾞｰﾀ
ANL
DW K1 D4060              ; 塗布 Point No.
CON
DW K20 D4002             ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
;吐出ON
;Dispenser ON
LD M4428                 ; Dispense ON
MPS
LDB X105                 ; 吐出ﾓｰﾀ_速度0
AND Y204                 ; 吐出ﾓｰﾀ_正転開始
OR M25                   ; 吐出無し
LD M33                   ; 手動ﾓｰﾄﾞ
ANB M4634                ; Dis. ON
ORL
ANL
@INC D4002               ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
MPP
OUT M4860                ; 吐出ON
LD M4429                 ; Dispenser ON delay
TMH K420 D4062           ; 吐出ON    delay  ON delay
CON
AND T420                 ; 吐出ON    delay
@INC D4002               ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
;塗布移動
;Dispense move
LD M4430                 ; 塗布ﾎﾟｲﾝﾄ移動
MOV D4066 D4050          ; 塗布positon data No.  塗布X軸  移動No.
MPS
OUT @M14                 ; 塗布X軸移動
MPP
AND M4800                ; 塗布X 移動完了
RES M4800                ; 塗布X 移動完了
CON
@INC D4002               ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
LD M4430                 ; 塗布ﾎﾟｲﾝﾄ移動
TMH K440 K10             ; 塗布停止ﾌﾗｸﾞ監視ｳｪｲﾄ
;Z4 = D31304 - 61
;D4067 = E3200:Z4
;Z5 = Z4 * 10
;D4064.D = 0
;D4064.U = E2009.U:Z5
LD T440                  ; 塗布停止ﾌﾗｸﾞ監視ｳｪｲﾄ
NCJ K1001
;Z4 = D31304 - 61
;
LD CR2002                ; 常時ON
LDA D31304               ; 軸1 位置決め現在ﾎﾟｲﾝﾄ番号
CON
EXT
CON
SUB.L +61
CON
STA.L Z4
;D4067 = E3200:Z4
;
LD CR2002                ; 常時ON
MOV E3200:Z4 D4067       ; P21 FLG  移動点塗布ﾌﾗｸﾞﾃﾞｰﾀ
;Z5 = Z4 * 10
;
LD CR2002                ; 常時ON
LDA.L Z4
CON
MUL.L +10
CON
STA.L Z5
;D4064.D = 0
;
LD CR2002                ; 常時ON
MOV.D K0 D4064           ; OFF delay
;D4064.U = E2009.U:Z5
LD CR2002                ; 常時ON
MOV E2009:Z5 D4064       ; OFF delay
LABEL K1001
;
LD T440                  ; 塗布停止ﾌﾗｸﾞ監視ｳｪｲﾄ
AND M4857                ; Y1塗布判断有効ポイント番号
MPS
ANB D4067.4
OUT M4864                ; 吐出OFF
MPP
AND D4067.4
OUT M4865                ; 吐出ON
;停止ﾃﾞｨﾚｲ
;STOP delay
LD M4431                 ; 吐出OFF
MPS
ANB Y204                 ; 吐出ﾓｰﾀ_正転開始
@INC D4002               ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
MPP
OUT M4861                ; 吐出OFF
LD M4432                 ; 停止後ﾃﾞｨﾚｲﾃﾞｨﾚｲ
TMH K421 D4064           ; 吐出OFF delay  OFF delay
CON
AND T421                 ; 吐出OFF delay
@INC D4002               ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
;連続移動　確認
;ARC check
LD M4433                 ; ARC check
MPS
AND D4061.2
@INC D4002               ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
MPP
ANB D4061.2
DW K16 D4002             ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
;ARCの場合　　　　　　　　<連続移動しているのでﾎﾟｲﾝﾄNo.が先行して完了している>
;Case of ARC ON
LD M4434                 ; Point No. +1
@INC D4060               ; 塗布 Point No.
CON
@INC D4002               ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
LD M4435                 ; End No. check
MPS
AND< D4060 K20           ; 塗布 Point No.
DW K13 D4002             ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
MPP
AND>= D4060 K20          ; 塗布 Point No.
DW K20 D4002             ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
;ARC無しの場合
;Case of ARC OFF
LD M4436                 ; Point No. +1
@INC D4060               ; 塗布 Point No.
CON
@INC D4002               ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
LD M4437                 ; End No. check
MPS
AND< D4060 K20           ; 塗布 Point No.
DW K6 D4002              ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
MPP
AND>= D4060 K20          ; 塗布 Point No.
DW K20 D4002             ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
;塗布完了
;Dispense end
LD M4440
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
AND M4961                ; 塗布Z軸   動作可能
@INC D4002               ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
LD M4441                 ; ！
MPS
DW K2 D4051              ; 塗布Z軸  移動No.
CON
OUT @M28                 ; 塗布Z軸移動
MPP
AND M4810                ; 塗布Z 移動完了
RES M4810                ; 塗布Z 移動完了
CON
DW K29 D4002             ; UT4SUB2   Y1塗布ｽﾃｯﾌﾟ
;<h1/> ////　塗布動作2
;////   Dispense operation 2
LD CR2002                ; 常時ON
ZRES M4450 M4479         ; Y2塗布動作待機中  Y2塗布ﾙｰﾁﾝ完了
LDB M4905                ; ﾕﾆｯﾄ4起動中
MOV K0 D4003             ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
LD M4905                 ; ﾕﾆｯﾄ4起動中
MOV D4003 Z1             ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
SET M4450:Z1             ; Y2塗布動作待機中
;塗布動作開始
;Dispense operation start
LD M4451                 ; Y2塗布動作開始
DW K1 D4070              ; 塗布 Point No.
CON
AND= D4070 K1            ; 塗布 Point No.
MPS
LD=.L D31290 E2200       ; 軸1 現在座標  X_P81
AND=.L D31350 E2204      ; 軸2 現在座標  Z_P81
ANL
DW K6 D4003              ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
MPP
LD<>.L D31290 E2200      ; 軸1 現在座標  X_P81
OR<>.L D31350 E2204      ; 軸2 現在座標  Z_P81
AND M4961                ; 塗布Z軸   動作可能
ANL
TMH K425 K30             ; 塗布開始位置移動ﾃﾞｨﾚｲ
CON
AND T425                 ; 塗布開始位置移動ﾃﾞｨﾚｲ
@INC D4003               ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
LD M4452                 ; 塗布Z軸上空移動
MPS
DW K1 D4051              ; 塗布Z軸  移動No.
CON
OUT @M56                 ; 塗布Z軸移動
MPP
AND M4810                ; 塗布Z 移動完了
RES M4810                ; 塗布Z 移動完了
CON
@INC D4003               ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
LD M4453                 ; Y2側塗布開始点移動
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
AND M4960                ; 塗布X軸  動作可能
@INC D4003               ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
LD M4454                 ; X_P81 move
MPS
DW K81 D4050             ; 塗布X軸  移動No.
CON
OUT @M15                 ; 塗布X軸移動
MPP
AND M4800                ; 塗布X 移動完了
RES M4800                ; 塗布X 移動完了
CON
@INC D4003               ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
LD M4455                 ; Z_P81 move
MPS
DW K81 D4051             ; 塗布Z軸  移動No.
CON
OUT @M29                 ; 塗布Z軸移動
MPP
AND M4810                ; 塗布Z 移動完了
RES M4810                ; 塗布Z 移動完了
CON
@INC D4003               ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
;塗布条件確認
;Dispense condition check
;Z2 = D4070
;Z3 = Z2 *10
;D4071 = E3220:Z2
;D4072.D = 0
;D4072.U = E2208.U:Z3
;D4076 = D4070 +81 
;D4084.L = E2200.L:Z3
;D4086.L = E2202.L:Z3
LD CR2002                ; 常時ON
NCJ K1002
;Z2 = D4070
;
LD CR2002                ; 常時ON
LDA D4070                ; 塗布 Point No.
CON
EXT
CON
STA.L Z2
;Z3 = Z2 *10
;
LD CR2002                ; 常時ON
LDA.L Z2
CON
MUL.L +10
CON
STA.L Z3
;D4071 = E3220:Z2
;
LD CR2002                ; 常時ON
MOV E3220:Z2 D4071       ; P41 FLG  塗布ﾎﾟｲﾝﾄﾌﾗｸﾞﾃﾞｰﾀ
;D4072.D = 0
;
LD CR2002                ; 常時ON
MOV.D K0 D4072           ; ON delay
;D4072.U = E2208.U:Z3
;
LD CR2002                ; 常時ON
MOV E2208:Z3 D4072       ; ON delay
;D4076 = D4070 +81 
;
LD CR2002                ; 常時ON
LDA D4070                ; 塗布 Point No.
CON
EXT
CON
ADD.L +81
CON
STA D4076                ; 塗布positon data No.
;D4084.L = E2200.L:Z3
;
LD CR2002                ; 常時ON
MOV.L E2200:Z3 D4084     ; X_P81  塗布2X軸ﾃﾞｰﾀ
;D4086.L = E2202.L:Z3
LD CR2002                ; 常時ON
MOV.L E2202:Z3 D4086     ; Y2_P81  塗布2Y軸ﾃﾞｰﾀ
LABEL K1002
;
LD M4456                 ; Dispense  check
AND M4960                ; 塗布X軸  動作可能
AND M4961                ; 塗布Z軸   動作可能
AND M3960                ; Case搬送Y2動作可能
TMH K451 K2              ; ﾃﾞｰﾀ読み込み安定化ﾃﾞｨﾚｲ
CON
AND T451                 ; ﾃﾞｰﾀ読み込み安定化ﾃﾞｨﾚｲ
@INC D4003               ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
LD M4457                 ; Dispense  check
MPS
LD<=.L D4084 +22000      ; 塗布2X軸ﾃﾞｰﾀ
AND<>.L D4084 +0         ; 塗布2X軸ﾃﾞｰﾀ
AND>=.L D4086 +11000     ; 塗布2Y軸ﾃﾞｰﾀ
ANL
MPS
ANB D4071.4
DW K10 D4003             ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
MPP
AND D4071.4
@INC D4003               ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
MPP
LD>.L D4084 +22000       ; 塗布2X軸ﾃﾞｰﾀ
OR=.L D4084 +22000       ; 塗布2X軸ﾃﾞｰﾀ
OR<.L D4086 +11000       ; 塗布2Y軸ﾃﾞｰﾀ
ANL
DW K1 D4070              ; 塗布 Point No.
CON
DW K20 D4003             ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
;吐出ON
;Dispenser ON
LD M4458                 ; Dispense ON
MPS
LDB X105                 ; 吐出ﾓｰﾀ_速度0
AND Y204                 ; 吐出ﾓｰﾀ_正転開始
OR M25                   ; 吐出無し
LD M33                   ; 手動ﾓｰﾄﾞ
ANB M4634                ; Dis. ON
ORL
ANL
@INC D4003               ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
MPP
OUT M4862                ; 吐出ON
LD M4459                 ; Dispencer ON delay
TMH K430 D4072           ; 吐出delay  ON delay
CON
AND T430                 ; 吐出delay
@INC D4003               ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
;塗布移動
;Dispense move
LD M4460                 ; 塗布ﾎﾟｲﾝﾄ移動
MOV D4076 D4050          ; 塗布positon data No.  塗布X軸  移動No.
MPS
OUT @M16                 ; 塗布X軸移動
MPP
AND M4800                ; 塗布X 移動完了
RES M4800                ; 塗布X 移動完了
CON
@INC D4003               ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
LD M4460                 ; 塗布ﾎﾟｲﾝﾄ移動
TMH K441 K10             ; 塗布停止ﾌﾗｸﾞ監視ｳｪｲﾄ
;Z4 = D31304 - 81
;D4077 = E3220:Z4
;Z5 = Z4 * 10
;D4074.D = 0
;D4074.U = E2209.U:Z5
LD T441                  ; 塗布停止ﾌﾗｸﾞ監視ｳｪｲﾄ
NCJ K1003
;Z4 = D31304 - 81
;
LD CR2002                ; 常時ON
LDA D31304               ; 軸1 位置決め現在ﾎﾟｲﾝﾄ番号
CON
EXT
CON
SUB.L +81
CON
STA.L Z4
;D4077 = E3220:Z4
;
LD CR2002                ; 常時ON
MOV E3220:Z4 D4077       ; P41 FLG  移動点塗布ﾌﾗｸﾞﾃﾞｰﾀ
;Z5 = Z4 * 10
;
LD CR2002                ; 常時ON
LDA.L Z4
CON
MUL.L +10
CON
STA.L Z5
;D4074.D = 0
;
LD CR2002                ; 常時ON
MOV.D K0 D4074           ; OFF delay
;D4074.U = E2209.U:Z5
LD CR2002                ; 常時ON
MOV E2209:Z5 D4074       ; OFF delay
LABEL K1003
;
LD T441                  ; 塗布停止ﾌﾗｸﾞ監視ｳｪｲﾄ
AND M4858                ; Y2塗布判断有効ポイント番号
MPS
ANB D4077.4
OUT M4866                ; 吐出OFF
MPP
AND D4077.4
OUT M4867                ; 吐出ON
;吐出OFF
;Dispenser OFF
LD M4461                 ; 吐出OFF
MPS
ANB Y204                 ; 吐出ﾓｰﾀ_正転開始
@INC D4003               ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
MPP
OUT M4863                ; 吐出OFF
LD M4462                 ; 吐出OFFﾃﾞｨﾚｲ
TMH K431 D4074           ; 吐出OFF delay  OFF delay
CON
AND T431                 ; 吐出OFF delay
@INC D4003               ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
;連続移動　確認
;ARC check
LD M4463                 ; ARC check
MPS
AND D4071.2
@INC D4003               ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
MPP
ANB D4071.2
DW K16 D4003             ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
;ARCの場合　　　　　　　　<連続移動しているのでﾎﾟｲﾝﾄNo.が先行して完了している>
;Case of ARC ON
LD M4464                 ; Point No. +1
@INC D4070               ; 塗布 Point No.
CON
@INC D4003               ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
LD M4465                 ; End No. check
MPS
AND< D4070 K20           ; 塗布 Point No.
DW K13 D4003             ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
MPP
AND>= D4070 K20          ; 塗布 Point No.
DW K20 D4003             ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
;ARC無しの場合
;Case of ARC OFF
LD M4466                 ; Point No. +1
@INC D4070               ; 塗布 Point No.
CON
@INC D4003               ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
LD M4467                 ; End No. check
MPS
AND< D4070 K20           ; 塗布 Point No.
DW K6 D4003              ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
MPP
AND>= D4070 K20          ; 塗布 Point No.
DW K20 D4003             ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
;塗布完了
;Dispense end
LD M4470                 ; 上空待避
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
AND M4961                ; 塗布Z軸   動作可能
@INC D4003               ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
LD M4471                 ; XY_P2 move
MPS
DW K2 D4051              ; 塗布Z軸  移動No.
CON
OUT @M57                 ; 塗布Z軸移動
MPP
AND M4810                ; 塗布Z 移動完了
RES M4810                ; 塗布Z 移動完了
CON
DW K29 D4003             ; UT4SUB3   Y2塗布ｽﾃｯﾌﾟ
;<h1/> ////　日常点検塗布動作1
;////   Daily check Dispense operation 1
LD CR2002                ; 常時ON
ZRES M4700 M4749         ; Y1DC塗布動作待機中
LDB M4905                ; ﾕﾆｯﾄ4起動中
MOV K0 D4004             ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
LD M4905                 ; ﾕﾆｯﾄ4起動中
MOV D4004 Z1             ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
SET M4700:Z1             ; Y1DC塗布動作待機中
;塗布動作開始
LD M4701                 ; Y1DC塗布動作開始
DW K1 D4200              ; 塗布 Point No.
CON
AND= D4200 K1            ; 塗布 Point No.
MPS
LD=.L D31290 E4600       ; 軸1 現在座標
AND=.L D31350 E4604      ; 軸2 現在座標
ANL
DW K6 D4004              ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
MPP
LD<>.L D31290 E4600      ; 軸1 現在座標
OR<>.L D31350 E4604      ; 軸2 現在座標
AND M4961                ; 塗布Z軸   動作可能
ANL
TMH K426 K30             ; 塗布開始位置移動ﾃﾞｨﾚｲ
CON
AND T426                 ; 塗布開始位置移動ﾃﾞｨﾚｲ
@INC D4004               ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
LD M4702                 ; 塗布Z軸上空移動
MPS
DW K1 D4051              ; 塗布Z軸  移動No.
CON
OUT @M58                 ; 塗布Z軸移動
MPP
AND M4810                ; 塗布Z 移動完了
RES M4810                ; 塗布Z 移動完了
CON
@INC D4004               ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
LD M4703                 ; Y1側塗布開始点移動
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
AND M4960                ; 塗布X軸  動作可能
AND M1960                ; Case搬送動作可能
@INC D4004               ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
LD M4704                 ; X_P101 move
MPS
DW K101 D4050            ; 塗布X軸  移動No.
CON
OUT @M17                 ; 塗布X軸移動
MRD
DW K101 D1050            ; 搬送Y1   移動No.
CON
OUT R32000               ; Case搬送Y1移動
MPP
LD M4800                 ; 塗布X 移動完了
AND M1800                ; 搬送Y1 移動完了
ANL
RES M4800                ; 塗布X 移動完了
CON
RES M1800                ; 搬送Y1 移動完了
CON
@INC D4004               ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
LD M4705                 ; Z_P101 move
MPS
DW K101 D4051            ; 塗布Z軸  移動No.
CON
OUT @M59                 ; 塗布Z軸移動
MPP
AND M4810                ; 塗布Z 移動完了
RES M4810                ; 塗布Z 移動完了
CON
@INC D4004               ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
;塗布条件確認
;Dispense condition check
;Z2 = D4200
;Z3 = Z2 *10
;D4201 = E3250:Z2
;D4202.D = 0
;D4202.U = E4608.U:Z3
;D4206 = D4200 +101
;D4210.L = E4600.L:Z3
;D4212.L = E4602.L:Z3
LD CR2002                ; 常時ON
NCJ K1004
;Z2 = D4200
;
LD CR2002                ; 常時ON
LDA D4200                ; 塗布 Point No.
CON
EXT
CON
STA.L Z2
;Z3 = Z2 *10
;
LD CR2002                ; 常時ON
LDA.L Z2
CON
MUL.L +10
CON
STA.L Z3
;D4201 = E3250:Z2
;
LD CR2002                ; 常時ON
MOV E3250:Z2 D4201       ; 塗布ﾎﾟｲﾝﾄﾌﾗｸﾞﾃﾞｰﾀ
;D4202.D = 0
;
LD CR2002                ; 常時ON
MOV.D K0 D4202           ; ON delay
;D4202.U = E4608.U:Z3
;
LD CR2002                ; 常時ON
MOV E4608:Z3 D4202       ; ON delay
;D4206 = D4200 +101
;
LD CR2002                ; 常時ON
LDA D4200                ; 塗布 Point No.
CON
EXT
CON
ADD.L +101
CON
STA D4206                ; 塗布positon data No.
;D4210.L = E4600.L:Z3
;
LD CR2002                ; 常時ON
MOV.L E4600:Z3 D4210     ; 塗布1X軸ﾃﾞｰﾀ
;D4212.L = E4602.L:Z3
LD CR2002                ; 常時ON
MOV.L E4602:Z3 D4212     ; 塗布1Y軸ﾃﾞｰﾀ
LABEL K1004
;
LD M4706                 ; START
AND M4960                ; 塗布X軸  動作可能
AND M4961                ; 塗布Z軸   動作可能
AND M1960                ; Case搬送動作可能
@INC D4004               ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
LD M4707                 ; Dispense  check
MPS
LD>=.L D4210 +57500      ; 塗布1X軸ﾃﾞｰﾀ
AND>=.L D4212 +11000     ; 塗布1Y軸ﾃﾞｰﾀ
ANL
MPS
ANB D4201.4
DW K9 D4004              ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
MPP
AND D4201.4
@INC D4004               ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
MPP
LD<.L D4210 +57500       ; 塗布1X軸ﾃﾞｰﾀ
OR<.L D4212 +11000       ; 塗布1Y軸ﾃﾞｰﾀ
ANL
DW K1 D4200              ; 塗布 Point No.
CON
DW K20 D4004             ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
;吐出ON
;Dispenser ON
LD M4708                 ; Dispense ON
MPS
LDB X105                 ; 吐出ﾓｰﾀ_速度0
AND Y204                 ; 吐出ﾓｰﾀ_正転開始
OR M25                   ; 吐出無し
LD M33                   ; 手動ﾓｰﾄﾞ
ANB M4634                ; Dis. ON
ORL
ANL
@INC D4004               ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
MPP
OUT M4868                ; 吐出ON
LD M4709                 ; Dispenser ON delay
TMH K422 D4202           ; 吐出ON    delay  ON delay
CON
AND T422                 ; 吐出ON    delay
@INC D4004               ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
;塗布移動
;Dispense move
LD M4710                 ; 塗布ﾎﾟｲﾝﾄ移動
MOV D4206 D4050          ; 塗布positon data No.  塗布X軸  移動No.
MPS
OUT @M18                 ; 塗布X軸移動
MPP
AND M4800                ; 塗布X 移動完了
RES M4800                ; 塗布X 移動完了
CON
@INC D4004               ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
LD M4710                 ; 塗布ﾎﾟｲﾝﾄ移動
TMS K442 K10             ; 塗布停止ﾌﾗｸﾞ監視ｳｪｲﾄ
;Z4 = D31304 - 101
;D4207 = E3250:Z4
;Z5 = Z4 * 10
;D4204.D = 0
;D4204.U = E4609.U:Z5
LD T442                  ; 塗布停止ﾌﾗｸﾞ監視ｳｪｲﾄ
NCJ K1005
;Z4 = D31304 - 101
;
LD CR2002                ; 常時ON
LDA D31304               ; 軸1 位置決め現在ﾎﾟｲﾝﾄ番号
CON
EXT
CON
SUB.L +101
CON
STA.L Z4
;D4207 = E3250:Z4
;
LD CR2002                ; 常時ON
MOV E3250:Z4 D4207       ; 移動点塗布ﾌﾗｸﾞﾃﾞｰﾀ
;Z5 = Z4 * 10
;
LD CR2002                ; 常時ON
LDA.L Z4
CON
MUL.L +10
CON
STA.L Z5
;D4204.D = 0
;
LD CR2002                ; 常時ON
MOV.D K0 D4204           ; OFF delay
;D4204.U = E4609.U:Z5
LD CR2002                ; 常時ON
MOV E4609:Z5 D4204       ; OFF delay
LABEL K1005
;
LD T442                  ; 塗布停止ﾌﾗｸﾞ監視ｳｪｲﾄ
MPS
ANB D4207.4
OUT M4869                ; 吐出OFF
MPP
AND D4207.4
OUT M4870                ; 吐出ON
;停止ﾃﾞｨﾚｲ
;STOP delay
LD M4711                 ; 吐出OFF
MPS
ANB Y204                 ; 吐出ﾓｰﾀ_正転開始
@INC D4004               ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
MPP
OUT M4871                ; 吐出OFF
LD M4712                 ; 停止後ﾃﾞｨﾚｲﾃﾞｨﾚｲ
TMH K423 D4204           ; 吐出OFF delay  OFF delay
CON
AND T423                 ; 吐出OFF delay
@INC D4004               ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
;連続移動　確認
;ARC check
LD M4713                 ; ARC check
MPS
AND D4201.2
@INC D4004               ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
MPP
ANB D4201.2
DW K16 D4004             ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
;ARCの場合　　　　　　　　<連続移動しているのでﾎﾟｲﾝﾄNo.が先行して完了している>
;Case of ARC ON
LD M4714                 ; Point No. +1
@INC D4200               ; 塗布 Point No.
CON
@INC D4004               ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
LD M4715                 ; End No. check
MPS
AND< D4200 K20           ; 塗布 Point No.
DW K13 D4004             ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
MPP
AND>= D4200 K20          ; 塗布 Point No.
DW K20 D4004             ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
;ARC無しの場合
;Case of ARC OFF
LD M4716                 ; Point No. +1
@INC D4200               ; 塗布 Point No.
CON
@INC D4004               ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
LD M4717                 ; End No. check
MPS
AND< D4200 K20           ; 塗布 Point No.
DW K6 D4004              ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
MPP
AND>= D4200 K20          ; 塗布 Point No.
DW K20 D4004             ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
;塗布完了
;Dispense end
LD M4720
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
AND M4961                ; 塗布Z軸   動作可能
@INC D4004               ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
LD M4721                 ; ！
MPS
DW K2 D4051              ; 塗布Z軸  移動No.
CON
OUT @M60                 ; 塗布Z軸移動
MPP
AND M4810                ; 塗布Z 移動完了
RES M4810                ; 塗布Z 移動完了
CON
DW K29 D4004             ; UT4SUB4   Y1日検塗布ｽﾃｯﾌﾟ
;<h1/> ////　日常点検塗布動作2
;////   Daily check Dispense operation 2
LD CR2002                ; 常時ON
ZRES M4750 M4779         ; Y2DC塗布動作待機中  Y2DC塗布ﾙｰﾁﾝ完了
LDB M4905                ; ﾕﾆｯﾄ4起動中
MOV K0 D4005             ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
LD M4905                 ; ﾕﾆｯﾄ4起動中
MOV D4005 Z1             ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
SET M4750:Z1             ; Y2DC塗布動作待機中
;塗布動作開始
LD M4751                 ; Y2DC塗布動作開始
DW K1 D4250              ; 塗布 Point No.
CON
AND= D4250 K1            ; 塗布 Point No.
MPS
LD=.L D31290 E4800       ; 軸1 現在座標
AND=.L D31350 E4804      ; 軸2 現在座標
ANL
DW K6 D4005              ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
MPP
LD<>.L D31290 E4800      ; 軸1 現在座標
OR<>.L D31350 E4804      ; 軸2 現在座標
AND M4961                ; 塗布Z軸   動作可能
ANL
TMH K427 K30             ; 塗布開始位置移動ﾃﾞｨﾚｲ
CON
AND T427                 ; 塗布開始位置移動ﾃﾞｨﾚｲ
@INC D4005               ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
LD M4752                 ; 塗布Z軸上空移動
MPS
DW K1 D4051              ; 塗布Z軸  移動No.
CON
OUT @M61                 ; 塗布Z軸移動
MPP
AND M4810                ; 塗布Z 移動完了
RES M4810                ; 塗布Z 移動完了
CON
@INC D4005               ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
LD M4753                 ; Y1側塗布開始点移動
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
AND M4960                ; 塗布X軸  動作可能
AND M3960                ; Case搬送Y2動作可能
@INC D4005               ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
LD M4754                 ; X_P121 move
MPS
DW K121 D4050            ; 塗布X軸  移動No.
CON
OUT @M19                 ; 塗布X軸移動
MRD
DW K121 D3050            ; 搬送Y2   移動No.
CON
OUT R32001               ; Case搬送Y2移動
MPP
LD M4800                 ; 塗布X 移動完了
AND M3800                ; 搬送Y2 移動完了
ANL
RES M4800                ; 塗布X 移動完了
CON
RES M3800                ; 搬送Y2 移動完了
CON
@INC D4005               ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
LD M4755                 ; Z_P121 move
MPS
DW K121 D4051            ; 塗布Z軸  移動No.
CON
OUT @M62                 ; 塗布Z軸移動
MPP
AND M4810                ; 塗布Z 移動完了
RES M4810                ; 塗布Z 移動完了
CON
@INC D4005               ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
;塗布条件確認
;Dispense condition check
;Z2 = D4250
;Z3 = Z2 *10
;D4251 = E3270:Z2
;D4252.D = 0
;D4252.U = E4808.U:Z3
;D4256 = D4250 +121 
;D4260.L = E4800.L:Z3
;D4262.L = E4802.L:Z3
LD CR2002                ; 常時ON
NCJ K1006
;Z2 = D4250
;
LD CR2002                ; 常時ON
LDA D4250                ; 塗布 Point No.
CON
EXT
CON
STA.L Z2
;Z3 = Z2 *10
;
LD CR2002                ; 常時ON
LDA.L Z2
CON
MUL.L +10
CON
STA.L Z3
;D4251 = E3270:Z2
;
LD CR2002                ; 常時ON
MOV E3270:Z2 D4251       ; 塗布ﾎﾟｲﾝﾄﾌﾗｸﾞﾃﾞｰﾀ
;D4252.D = 0
;
LD CR2002                ; 常時ON
MOV.D K0 D4252           ; ON delay
;D4252.U = E4808.U:Z3
;
LD CR2002                ; 常時ON
MOV E4808:Z3 D4252       ; ON delay
;D4256 = D4250 +121 
;
LD CR2002                ; 常時ON
LDA D4250                ; 塗布 Point No.
CON
EXT
CON
ADD.L +121
CON
STA D4256                ; 塗布positon data No.
;D4260.L = E4800.L:Z3
;
LD CR2002                ; 常時ON
MOV.L E4800:Z3 D4260     ; 塗布2X軸ﾃﾞｰﾀ
;D4262.L = E4802.L:Z3
LD CR2002                ; 常時ON
MOV.L E4802:Z3 D4262     ; 塗布2Y軸ﾃﾞｰﾀ
LABEL K1006
;
LD M4756                 ; Dispense  check
AND M4960                ; 塗布X軸  動作可能
AND M4961                ; 塗布Z軸   動作可能
AND M3960                ; Case搬送Y2動作可能
@INC D4005               ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
LD M4757                 ; Dispense  check
MPS
LD<=.L D4260 +22000      ; 塗布2X軸ﾃﾞｰﾀ
AND<>.L D4260 +0         ; 塗布2X軸ﾃﾞｰﾀ
AND>=.L D4262 +11000     ; 塗布2Y軸ﾃﾞｰﾀ
ANL
MPS
ANB D4251.4
DW K9 D4005              ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
MPP
AND D4251.4
@INC D4005               ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
MPP
LD>.L D4260 +22000       ; 塗布2X軸ﾃﾞｰﾀ
OR=.L D4260 +0           ; 塗布2X軸ﾃﾞｰﾀ
OR<.L D4262 +11000       ; 塗布2Y軸ﾃﾞｰﾀ
ANL
DW K1 D4250              ; 塗布 Point No.
CON
DW K20 D4005             ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
;吐出ON
;Dispenser ON
LD M4758                 ; Dispense ON
MPS
LDB X105                 ; 吐出ﾓｰﾀ_速度0
AND Y204                 ; 吐出ﾓｰﾀ_正転開始
OR M25                   ; 吐出無し
LD M33                   ; 手動ﾓｰﾄﾞ
ANB M4634                ; Dis. ON
ORL
ANL
@INC D4005               ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
MPP
OUT M4872                ; 吐出ON
LD M4759                 ; Dispencer ON delay
TMH K432 D4252           ; 吐出delay  ON delay
CON
AND T432                 ; 吐出delay
@INC D4005               ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
;塗布移動
;Dispense move
LD M4760                 ; 塗布ﾎﾟｲﾝﾄ移動
MOV D4256 D4050          ; 塗布positon data No.  塗布X軸  移動No.
MPS
OUT @M20                 ; 塗布X軸移動
MPP
AND M4800                ; 塗布X 移動完了
RES M4800                ; 塗布X 移動完了
CON
@INC D4005               ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
LD M4760                 ; 塗布ﾎﾟｲﾝﾄ移動
TMS K443 K10             ; 塗布停止ﾌﾗｸﾞ監視ｳｪｲﾄ
;Z4 = D31304 - 121
;D4257 = E3270:Z4
;Z5 = Z4 * 10
;D4254.D = 0
;D4254.U = E4809.U:Z5
LD T443                  ; 塗布停止ﾌﾗｸﾞ監視ｳｪｲﾄ
NCJ K1007
;Z4 = D31304 - 121
;
LD CR2002                ; 常時ON
LDA D31304               ; 軸1 位置決め現在ﾎﾟｲﾝﾄ番号
CON
EXT
CON
SUB.L +121
CON
STA.L Z4
;D4257 = E3270:Z4
;
LD CR2002                ; 常時ON
MOV E3270:Z4 D4257       ; 移動点塗布ﾌﾗｸﾞﾃﾞｰﾀ
;Z5 = Z4 * 10
;
LD CR2002                ; 常時ON
LDA.L Z4
CON
MUL.L +10
CON
STA.L Z5
;D4254.D = 0
;
LD CR2002                ; 常時ON
MOV.D K0 D4254           ; OFF delay
;D4254.U = E4809.U:Z5
LD CR2002                ; 常時ON
MOV E4809:Z5 D4254       ; OFF delay
LABEL K1007
;
LD T443                  ; 塗布停止ﾌﾗｸﾞ監視ｳｪｲﾄ
MPS
ANB D4257.4
OUT M4873                ; 吐出OFF
MPP
AND D4257.4
OUT M4874                ; 吐出ON
;吐出OFF
;Dispenser OFF
LD M4761                 ; 吐出OFF
MPS
ANB Y204                 ; 吐出ﾓｰﾀ_正転開始
@INC D4005               ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
MPP
OUT M4875                ; 吐出OFF
LD M4762                 ; 吐出OFFﾃﾞｨﾚｲ
TMH K433 D4254           ; 吐出OFF delay  OFF delay
CON
AND T433                 ; 吐出OFF delay
@INC D4005               ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
;連続移動　確認
;ARC check
LD M4763                 ; ARC check
MPS
AND D4251.2
@INC D4005               ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
MPP
ANB D4251.2
DW K16 D4005             ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
;ARCの場合　　　　　　　　<連続移動しているのでﾎﾟｲﾝﾄNo.が先行して完了している>
;Case of ARC ON
LD M4764                 ; Point No. +1
@INC D4250               ; 塗布 Point No.
CON
@INC D4005               ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
LD M4765                 ; End No. check
MPS
AND< D4250 K20           ; 塗布 Point No.
DW K13 D4005             ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
MPP
AND>= D4250 K20          ; 塗布 Point No.
DW K20 D4005             ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
;ARC無しの場合
;Case of ARC OFF
LD M4766                 ; Point No. +1
@INC D4250               ; 塗布 Point No.
CON
@INC D4005               ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
LD M4767                 ; End No. check
MPS
AND< D4250 K20           ; 塗布 Point No.
DW K6 D4005              ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
MPP
AND>= D4250 K20          ; 塗布 Point No.
DW K20 D4005             ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
;塗布完了
;Dispense end
LD M4770                 ; 上空待避
AND M4913                ; UNIT4     ｴﾗｰ・PAUSE無し
AND M4961                ; 塗布Z軸   動作可能
@INC D4005               ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
LD M4771                 ; XY_P2 move
MPS
DW K2 D4051              ; 塗布Z軸  移動No.
CON
OUT @M63                 ; 塗布Z軸移動
MPP
AND M4810                ; 塗布Z 移動完了
RES M4810                ; 塗布Z 移動完了
CON
DW K29 D4005             ; UT4SUB3   Y2日検塗布ｽﾃｯﾌﾟ
;<h1/>状態監視
;Dispenser Status check
;Dispense control
LDP M4980                ; 捨て打ち 吐出ON
ORP M4860                ; 吐出ON
ORP M4862                ; 吐出ON
ORP M4865                ; 吐出ON
ORP M4867                ; 吐出ON
ORP M4868                ; 吐出ON
ORP M4870                ; 吐出ON
ORP M4872                ; 吐出ON
ORP M4874                ; 吐出ON
ORP M4635                ; Dispense ON 
OR M9990                 ; 吐出ON補助
ANB M9991                ; 吐出OFF補助
LD M4634                 ; Dis. ON
OR M32                   ; 自動ﾓｰﾄﾞ
OR M4635                 ; Dispense ON 
OR M4631                 ; 捨て打ち動作実行
ANL
OUT M9990                ; 吐出ON補助
LDP M4970                ; 塗布停止
ORP M4861                ; 吐出OFF
ORP M4863                ; 吐出OFF
ORP M4864                ; 吐出OFF
ORP M4866                ; 吐出OFF
ORP M4869                ; 吐出OFF
ORP M4871                ; 吐出OFF
ORP M4873                ; 吐出OFF
ORP M4875                ; 吐出OFF
ORP M4981                ; 捨て打ち 吐出OFF
OR M4903                 ; ﾕﾆｯﾄ4起動OFF
ORF B10F0                ; Discharge shot PB
ORF M4635                ; Dispense ON 
OUT M9991                ; 吐出OFF補助
LD M9990                 ; 吐出ON補助
MPS
ANB M25                  ; 吐出無し
MPS
AND M32                  ; 自動ﾓｰﾄﾞ
MOV E4500 D30418         ; Dishcarge shot speed  ch2_DA 出力ﾃﾞｰﾀ
MPP
ANB M32                  ; 自動ﾓｰﾄﾞ
MOV E70 D30418           ; ch2_DA 出力ﾃﾞｰﾀ
MRD
AND M25                  ; 吐出無し
MOV K0 D30418            ; ch2_DA 出力ﾃﾞｰﾀ
MPP
ANB M25                  ; 吐出無し
OUT Y204                 ; 吐出ﾓｰﾀ_正転開始
LDB X00                  ; 装置READY
LD M4903                 ; ﾕﾆｯﾄ4起動OFF
ANB M4635                ; Dispense ON 
ORL
OR M4901                 ; ﾕﾆｯﾄ4全異常
MOV K0 D30418            ; ch2_DA 出力ﾃﾞｰﾀ
LDP M9904                ; 吸い込み開始
MPS
ANB M25                  ; 吐出無し
MOV E4520 D30418         ; Dispenser CCW  ch2_DA 出力ﾃﾞｰﾀ
MPP
AND M25                  ; 吐出無し
MOV K0 D30418            ; ch2_DA 出力ﾃﾞｰﾀ
;吐出ON後圧力変動監視
LD Y204                  ; 吐出ﾓｰﾀ_正転開始
MC
LD Y204                  ; 吐出ﾓｰﾀ_正転開始
OUT M9891                ; 吐出開始
LDP M9891                ; 吐出開始
MOV D304 D320            ; 吐出圧    (0.00Ｍpa)  吐出開始時吐出圧
CAL- D320 E4525 D326     ; 吐出開始時吐出圧  Shot Differential Pressure  吐出変動圧力閾値
LD M9891                 ; 吐出開始
LDB X105                 ; 吐出ﾓｰﾀ_速度0
OR M25                   ; 吐出無し
ANL
OR M9892                 ; 吐出回転数到達
OUT M9892                ; 吐出回転数到達
TMH K486 E4527           ; 吐出圧力変動監視時間  Shot check time
LDP T486                 ; 吐出圧力変動監視時間
MPS
MOV D304 D322            ; 吐出圧    (0.00Ｍpa)  Shot監視時間後吐出圧
MPP
LD>= D320 E4508          ; 吐出開始時吐出圧  Pressure1 lower
AND<= D320 E4505         ; 吐出開始時吐出圧  Pressure1 upper
AND> D322 D326           ; Shot監視時間後吐出圧  吐出変動圧力閾値
ANL
OUT M9890                ; 吐出圧力変動異常
MCR
;吐出OFF→吸い込み動作
LD Y204                  ; 吐出ﾓｰﾀ_正転開始
OR M9989                 ; 吐出ON実行確認
OUT M9989                ; 吐出ON実行確認
LDB M9990                ; 吐出ON補助
ANB M25                  ; 吐出無し
MC
LDB M9990                ; 吐出ON補助
AND X105                 ; 吐出ﾓｰﾀ_速度0
AND M9989                ; 吐出ON実行確認
OR M9903                 ; 吐出ﾓｰﾀ停止
OUT M9903                ; 吐出ﾓｰﾀ停止
LD M9903                 ; 吐出ﾓｰﾀ停止
MPS
OUT M9904                ; 吸い込み開始
MPP
ANB T460                 ; 吸込時間
OUT Y205                 ; 吐出ﾓｰﾀ_逆転開始
LDP M9904                ; 吸い込み開始
MOV D304 D330            ; 吐出圧    (0.00Ｍpa)  吸込開始時吐出圧
CAL+ D330 E4526 D336     ; 吸込開始時吐出圧  Suction Differential Pressure  吸込変動圧力閾値
;D420.D = SEC(CM700)
;D422.D = (E4503.D * 6) + D420.D
;
LDP M9904                ; 吸い込み開始
NCJ K1008
;D420.D = SEC(CM700)
;
LD CR2002                ; 常時ON
MOV.D K0 @VM0
SEC CM700 @VM0           ; ｶﾚﾝﾀﾞﾀｲﾏ（年）
MOV.D @VM0 D420          ; 最終吐出日時ﾃﾞｰﾀ
;D422.D = (E4503.D * 6) + D420.D
;
LD CR2002                ; 常時ON
LDA.L E4503              ; Dishcarge shot time
CON
MUL.L +6
CON
ADD.L D420               ; 最終吐出日時ﾃﾞｰﾀ
CON
STA.D D422               ; 捨て打ち実施予定時間(sec)
LABEL K1008
;
LD M9904                 ; 吸い込み開始
OR M9905                 ; 吸い込み回転数到達
OUT M9905                ; 吸い込み回転数到達
TMH K460 E4521           ; 吸込時間  CCW timer
TMH K489 E4531           ; 吸込圧力変動監視時間  Suction check time
LDP T489                 ; 吸込圧力変動監視時間
MOV D304 D332            ; 吐出圧    (0.00Ｍpa)  Suction監視時間後吐出圧
LD M9905                 ; 吸い込み回転数到達
AND T460                 ; 吸込時間
AND X105                 ; 吐出ﾓｰﾀ_速度0
OR M9900                 ; 吐出停止完了
OUT M9900                ; 吐出停止完了
TMR K461 E4533           ; 吐出圧力復旧監視時間  Pressure restoration time
LDP M9900                ; 吐出停止完了
MOV D304 D338            ; 吐出圧    (0.00Ｍpa)  吸込後吐出圧
MPS
AND< D332 D336           ; Suction監視時間後吐出圧  吸込変動圧力閾値
OUT M9901                ; 吸込圧力変動異常
MPP
LD> D338 E4505           ; 吸込後吐出圧  Pressure1 upper
OR< D338 E4508           ; 吸込後吐出圧  Pressure1 lower
ANB M9901                ; 吸込圧力変動異常
ANB T490                 ; 最低吐出圧検出時間
AND CR2003               ; 常時OFF
ANL
OUT M9906                ; 吸込完了時P2 異常
LDP T461                 ; 吐出圧力復旧監視時間
MPS
MOV D304 D340            ; 吐出圧    (0.00Ｍpa)  復元監視時間後吐出圧
MPP
LD> D340 E4505           ; 復元監視時間後吐出圧  Pressure1 upper
OR< D340 E4508           ; 復元監視時間後吐出圧  Pressure1 lower
ANB M25                  ; 吐出無し
AND CR2003               ; 常時OFF
ANL
OUT M9902                ; 吐出圧復元異常
MCR
;回転数・ﾄﾙｸ監視
;Dispense motor rev. & torque
;D310.S = D30406.S
;D312.S = D30401.S
;D310.S = D30406.S
;
LD CR2002                ; 常時ON
MOV.S D30406 D310        ; ch1_AD 特殊ﾃﾞｰﾀ  回転数
;D312.S = D30401.S
LD CR2002                ; 常時ON
MOV.S D30401 D312        ; ch0_AD 特殊ﾃﾞｰﾀ  ﾄﾙｸ[%]
;
;接着剤圧力
;Bond pressure
;D302.S = D30301.S / 100                              '小数点以下1桁
;D304.S = D30306.S / 10                              '小数点以下2桁
;D306.S = D30316.S / 100                              '小数点以下1桁
;D302.S = D30301.S / 100                              '小数点以下1桁
;
LD CR2002                ; 常時ON
LDA.S D30301             ; ch0 特殊データ
CON
EXT.S
CON
EXT.L
CON
DIV.L +100
CON
STA.S D302               ; 供給圧　　(0.0Ｍpa)
;D304.S = D30306.S / 10                              '小数点以下2桁
;
LD CR2002                ; 常時ON
LDA.S D30306             ; ch1 特殊データ
CON
EXT.S
CON
EXT.L
CON
DIV.L +10
CON
STA.S D304               ; 吐出圧    (0.00Ｍpa)
;D306.S = D30316.S / 100                              '小数点以下1桁
LD CR2002                ; 常時ON
LDA.S D30316             ; ch3 特殊データ
CON
EXT.S
CON
EXT.L
CON
DIV.L +100
CON
STA.S D306               ; 供給圧2 　(0.0Ｍpa)
;
;1次側
;Inlet side
LD> D302 E4511           ; 供給圧　　(0.0Ｍpa)  Pressure2 upper
TMR K480 E4512           ; 供給圧上限監視時間  P2 upper limit time
LD< D302 E4514           ; 供給圧　　(0.0Ｍpa)  Pressure2 lower
TMR K481 E4515           ; 供給圧下限監視時間  P2 lower limit time
;2次側
;Outlet side
LD> D304 E4505           ; 吐出圧    (0.00Ｍpa)  Pressure1 upper
TMR K482 E4506           ; 吐出圧上限監視時間  P1 upper limit time
LD< D304 E4508           ; 吐出圧    (0.00Ｍpa)  Pressure1 lower
TMR K483 E4509           ; 吐出圧下限監視時間  P1 lower limit time
;<h1/>接着剤残量＆ﾎﾟﾝﾌﾟ管理
LD M33                   ; 手動ﾓｰﾄﾞ
AND Y204                 ; 吐出ﾓｰﾀ_正転開始
OR M83                   ; 各工程起動指令
MPS
ANB M25                  ; 吐出無し
MPS
LD T1900                 ; P切替_自動三方ﾊﾞﾙﾌﾞA
ANB T1905                ; 接着剤P1_残量警告
ANL
MEP
SET L36                  ; P1 残量警告記憶
CON
DW K383 D148             ; 警報No.
CON
SET M4923                ; Err383:接着剤残量無し
MPP
LD T1901                 ; P切替_自動三方ﾊﾞﾙﾌﾞB
ANB T1913                ; 接着剤P2_残量警告
ANL
MEP
SET L41                  ; P2 残量警告記憶
CON
DW K383 D148             ; 警報No.
CON
SET M4923                ; Err383:接着剤残量無し
MRD
LDB M4840                ; P1接着剤残量予告記憶
AND T1900                ; P切替_自動三方ﾊﾞﾙﾌﾞA
AND T1905                ; 接着剤P1_残量警告
LDB T1904                ; 接着剤P1_残量予告
OR L36                   ; P1 残量警告記憶
ANL
ANL
SET L36                  ; P1 残量警告記憶
CON
SET M4840                ; P1接着剤残量予告記憶
CON
DW K382 D148             ; 警報No.
CON
SET M4922                ; Err382:接着剤残少
MPP
LDB M4841                ; P2接着剤残量予告記憶
AND T1901                ; P切替_自動三方ﾊﾞﾙﾌﾞB
AND T1913                ; 接着剤P2_残量警告
LDB T1912                ; 接着剤P2_残量予告
OR L41                   ; P2 残量警告記憶
ANL
ANL
SET L41                  ; P2 残量警告記憶
CON
SET M4841                ; P2接着剤残量予告記憶
CON
DW K382 D148             ; 警報No.
CON
SET M4922                ; Err382:接着剤残少
LDP M4923                ; Err383:接着剤残量無し
MPS
AND M4842                ; 自動PUMP切り替え可能
OUT M4845                ; PUMP切り替えPLS
MPS
AND X1695                ; 接着剤P1_残量警告 【ONで無】
RES L32                  ; P1 運転記憶
CON
RES L33                  ; P1 捨打ち運転記憶
MPP
AND X169D                ; 接着剤P2_残量警告 【ONで無】
RES L37                  ; P2 運転記憶
CON
RES L38                  ; P2 捨打ち運転記憶
MPP
ANB M4842                ; 自動PUMP切り替え可能
OUT M4992                ; 接着剤残量無し      CycleSTOP
;ﾎﾟﾝﾌﾟ運転状況監視
;Pump status check 
LD M81                   ; 自動運転開始BZ
ANB M74                  ; ｷｬﾝｾﾙ不可 ｻｲｸﾙ停止
MPS
LDB M9702                ; P1運転
ANB M9703                ; P2運転
ANL
TMR K465 K10             ; ﾎﾟﾝﾌﾟ未運転時間
CON
AND T465                 ; ﾎﾟﾝﾌﾟ未運転時間
DW K388 D148             ; 警報No.
CON
SET M4928                ; Err388:ﾎﾟﾝﾌﾟ運転停止中
MPP
LD M9702                 ; P1運転
OR M9703                 ; P2運転
LDB M9702                ; P1運転
ORB T1900                ; P切替_自動三方ﾊﾞﾙﾌﾞA
ANL
LDB M9703                ; P2運転
ORB T1901                ; P切替_自動三方ﾊﾞﾙﾌﾞB
ANL
ANL
TMR K466 K10             ; ﾎﾟﾝﾌﾟ方向異常時間
CON
AND T466                 ; ﾎﾟﾝﾌﾟ方向異常時間
DW K380 D148             ; 警報No.
CON
SET M4920                ; Err380:自動給材ﾊﾞﾙﾌﾞｴﾗｰ
LDP M4634                ; Dis. ON
LDB M25                  ; 吐出無し
ANB M43                  ; Pump runing check 無効
LDP B10F0                ; Discharge shot PB
ORP B10F1                ; Timer shot PB
ORP B10F2                ; 捨て打ち動作
ANL
ORL
MPS
LDB M9702                ; P1運転
ANB M9703                ; P2運転
ANL
DW K388 D148             ; 警報No.
CON
SET M4928                ; Err388:ﾎﾟﾝﾌﾟ運転停止中
MPP
LD M9702                 ; P1運転
OR M9703                 ; P2運転
LDB M9702                ; P1運転
ORB T1900                ; P切替_自動三方ﾊﾞﾙﾌﾞA
ANL
LDB M9703                ; P2運転
ORB T1901                ; P切替_自動三方ﾊﾞﾙﾌﾞB
ANL
ANL
DW K380 D148             ; 警報No.
CON
SET M4920                ; Err380:自動給材ﾊﾞﾙﾌﾞｴﾗｰ
LDB M33                  ; 手動ﾓｰﾄﾞ
RES M43                  ; Pump runing check 無効
;<h1/>出力回路
;
LDB @M0                  ; 塗布X軸移動
ANB @M1                  ; 塗布X軸移動
ANB @M2                  ; 塗布X軸移動
ANB @M3                  ; 塗布X軸移動
ANB @M4                  ; 塗布X軸移動
ANB @M5                  ; 塗布X軸移動
ANB @M6                  ; 塗布X軸移動
ANB @M7                  ; 塗布X軸移動
ANB @M8                  ; 塗布X軸移動
ANB @M9                  ; 塗布X軸移動
ANB @M10                 ; 塗布X軸移動
ANB @M11                 ; 塗布X軸移動
ANB @M12                 ; 塗布X軸移動
ANB @M13                 ; 塗布X軸移動
ANB @M14                 ; 塗布X軸移動
ANB @M15                 ; 塗布X軸移動
ANB @M16                 ; 塗布X軸移動
ANB @M17                 ; 塗布X軸移動
ANB @M18                 ; 塗布X軸移動
ANB @M19                 ; 塗布X軸移動
ANB @M20                 ; 塗布X軸移動
ANB R31800               ; 塗布X軸起動
ANB R31801               ; 塗布X軸起動
ANB R31802               ; 塗布X軸起動
ANB R31803               ; 塗布X軸起動
ANB R31804               ; 塗布X軸起動
INV
MCALL P_MOVE_K K5 K1 D4050 M4801 M4800 M4802;塗布X軸  移動No.  塗布X 移動異常  塗布X 移動完了  塗布X 移動中
LDB @M30                 ; 塗布Z軸移動
ANB @M31                 ; 塗布Z軸移動
ANB @M32                 ; 塗布Z軸移動
ANB @M33                 ; 塗布Z軸移動
ANB @M34                 ; 塗布Z軸移動
ANB @M35                 ; 塗布Z軸移動
ANB @M36                 ; 塗布Z軸移動
ANB @M37                 ; 塗布Z軸移動
ANB @M38                 ; 塗布Z軸移動
ANB @M39                 ; 塗布Z軸移動
ANB @M40                 ; 塗布Z軸移動
ANB @M41                 ; 塗布Z軸移動
ANB @M42                 ; 塗布Z軸移動
ANB @M43                 ; 塗布Z軸移動
ANB @M44                 ; 塗布Z軸移動
ANB @M45                 ; 塗布Z軸移動
ANB @M46                 ; 塗布Z軸移動
ANB @M47                 ; 塗布Z軸移動
ANB @M48                 ; 塗布Z軸移動
ANB @M49                 ; 塗布Z軸移動
ANB @M50                 ; 塗布Z軸移動
ANB @M51                 ; 塗布Z軸移動
ANB @M52                 ; 塗布Z軸移動
ANB @M53                 ; 塗布Z軸移動
ANB @M54                 ; 塗布Z軸移動
ANB @M55                 ; 塗布Z軸移動
ANB @M56                 ; 塗布Z軸移動
ANB @M57                 ; 塗布Z軸移動
ANB @M58                 ; 塗布Z軸移動
ANB @M59                 ; 塗布Z軸移動
ANB @M60                 ; 塗布Z軸移動
ANB @M61                 ; 塗布Z軸移動
ANB @M62                 ; 塗布Z軸移動
ANB @M63                 ; 塗布Z軸移動
ANB @M28                 ; 塗布Z軸移動
ANB @M29                 ; 塗布Z軸移動
ANB R31808               ; 塗布Y軸起動
ANB R31809               ; 塗布Y軸起動
ANB R31810               ; 塗布Y軸起動
ANB R31811               ; 塗布Y軸起動
ANB R31812               ; 塗布Y軸起動
ANB R31813               ; 塗布Y軸起動
ANB R31814               ; 塗布Y軸起動
ANB R31815               ; 塗布Y軸起動
INV
MCALL P_MOVE_K K5 K2 D4051 M4811 M4810 M4812;塗布Z軸  移動No.  塗布Z 移動異常  塗布Z 移動完了  塗布Z 移動中
;<h1/>異常検出
;
LD CR2002                ; 常時ON
MPS
LD CR2003                ; 常時OFF
LDB B0580                ; ﾕﾆｯﾄ4_異常1BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B080                 ; ﾕﾆｯﾄ4_異常
ORL
ANL
OUT B080                 ; ﾕﾆｯﾄ4_異常
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0580                 ; ﾕﾆｯﾄ4_異常1BZ停止
AND B080                 ; ﾕﾆｯﾄ4_異常
ANL
OUT B0580                ; ﾕﾆｯﾄ4_異常1BZ停止
LD M521                  ; SMA411ｱﾗｰﾑﾘｾｯﾄ
AND X5475                ; 軸1 ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
TMR K493 K30             ; SMA411ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
LD CR2002                ; 常時ON
MPS
LD T493                  ; SMA411ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
LD M64                   ; 運転準備
AND X5440                ; 軸1 軸ｴﾗｰ中
ORL
LDB B0581                ; ﾕﾆｯﾄ4_異常2BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B081                 ; SMA411異常
ORL
ANL
OUT B081                 ; SMA411異常
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0581                 ; ﾕﾆｯﾄ4_異常2BZ停止
AND B081                 ; SMA411異常
ANL
OUT B0581                ; ﾕﾆｯﾄ4_異常2BZ停止
LD M531                  ; SMA421ｱﾗｰﾑﾘｾｯﾄ
AND X5555                ; 軸2 ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
TMR K494 K30             ; SMA421ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
LD CR2002                ; 常時ON
MPS
LD T494                  ; SMA421ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
LD M64                   ; 運転準備
AND X5520                ; 軸2 軸ｴﾗｰ中
ORL
LDB B0582                ; ﾕﾆｯﾄ4_異常3BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B082                 ; SMA421異常
ORL
ANL
OUT B082                 ; SMA421異常
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0582                 ; ﾕﾆｯﾄ4_異常3BZ停止
AND B082                 ; SMA421異常
ANL
OUT B0582                ; ﾕﾆｯﾄ4_異常3BZ停止
LD CR2002                ; 常時ON
MPS
LD M4905                 ; ﾕﾆｯﾄ4起動中
LD M4890                 ; ﾃﾞｨｽﾍﾟﾝｻ圧力下限異常
OR M9906                 ; 吸込完了時P2 異常
OR M4891                 ; ﾃﾞｨｽﾍﾟﾝｻ圧力上限異常
ANL
LDB B0583                ; ﾕﾆｯﾄ4_異常4BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B083                 ; P2圧力_異常4
ORL
ANB M25                  ; 吐出無し
ANL
DW K0 @D0                ; 捨て打ち連続実行回数
CON
OUT B083                 ; P2圧力_異常4
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0583                 ; ﾕﾆｯﾄ4_異常4BZ停止
AND B083                 ; P2圧力_異常4
ANL
OUT B0583                ; ﾕﾆｯﾄ4_異常4BZ停止
LD CR2002                ; 常時ON
MPS
LD M4905                 ; ﾕﾆｯﾄ4起動中
AND M4892                ; ﾎﾟﾝﾌﾟ圧力異常
LDB B0584                ; ﾕﾆｯﾄ4_異常5BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B084                 ; P1圧力_異常5
ORL
ANB M25                  ; 吐出無し
ANL
DW K0 @D0                ; 捨て打ち連続実行回数
CON
OUT B084                 ; P1圧力_異常5
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0584                 ; ﾕﾆｯﾄ4_異常5BZ停止
AND B084                 ; P1圧力_異常5
ANL
OUT B0584                ; ﾕﾆｯﾄ4_異常5BZ停止
LD CR2002                ; 常時ON
MPS
LD M4905                 ; ﾕﾆｯﾄ4起動中
AND M9890                ; 吐出圧力変動異常
LDB B0585                ; ﾕﾆｯﾄ4_異常6BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B085                 ; 吐出圧力変動異常
ORL
ANB M25                  ; 吐出無し
ANL
OUT B085                 ; 吐出圧力変動異常
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0585                 ; ﾕﾆｯﾄ4_異常6BZ停止
AND B085                 ; 吐出圧力変動異常
ANL
OUT B0585                ; ﾕﾆｯﾄ4_異常6BZ停止
LD CR2002                ; 常時ON
MPS
LD M4905                 ; ﾕﾆｯﾄ4起動中
AND M9901                ; 吸込圧力変動異常
LDB B0586                ; ﾕﾆｯﾄ4_異常7BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B086                 ; 吸込圧力変動異常
ORL
ANB M25                  ; 吐出無し
ANL
OUT B086                 ; 吸込圧力変動異常
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0586                 ; ﾕﾆｯﾄ4_異常7BZ停止
AND B086                 ; 吸込圧力変動異常
ANL
OUT B0586                ; ﾕﾆｯﾄ4_異常7BZ停止
LD CR2002                ; 常時ON
MPS
LD M4905                 ; ﾕﾆｯﾄ4起動中
AND M9902                ; 吐出圧復元異常
LDB B0587                ; ﾕﾆｯﾄ4_異常8BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B087                 ; 吐出圧復元異常
ORL
ANB M25                  ; 吐出無し
ANL
OUT B087                 ; 吐出圧復元異常
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0587                 ; ﾕﾆｯﾄ4_異常8BZ停止
AND B087                 ; 吐出圧復元異常
ANL
OUT B0587                ; ﾕﾆｯﾄ4_異常8BZ停止
LD Y204                  ; 吐出ﾓｰﾀ_正転開始
ANB X103                 ; 吐出ﾓｰﾀ_速度一致
ANB M25                  ; 吐出無し
TMR K491 K30             ; 回転検出異常
LD CR2002                ; 常時ON
MPS
LD T491                  ; 回転検出異常
LDB B0588                ; ﾕﾆｯﾄ4_異常9BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B088                 ; 回転検出異常
ORL
ANL
OUT B088                 ; 回転検出異常
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0588                 ; ﾕﾆｯﾄ4_異常9BZ停止
AND B088                 ; 回転検出異常
ANL
OUT B0588                ; ﾕﾆｯﾄ4_異常9BZ停止
LD Y204                  ; 吐出ﾓｰﾀ_正転開始
AND< D304 E4535          ; 吐出圧    (0.00Ｍpa)  Minimun Dispense Pressure
ANB M25                  ; 吐出無し
TMH K490 E4536           ; 最低吐出圧検出時間  Minimun D.Pressure check time
LD CR2002                ; 常時ON
MPS
LD M4905                 ; ﾕﾆｯﾄ4起動中
AND T490                 ; 最低吐出圧検出時間
LDB B0589                ; ﾕﾆｯﾄ4_異常10BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B089                 ; 最低吐出圧異常
ORL
ANL
OUT B089                 ; 最低吐出圧異常
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0589                 ; ﾕﾆｯﾄ4_異常10BZ停止
AND B089                 ; 最低吐出圧異常
ANL
OUT B0589                ; ﾕﾆｯﾄ4_異常10BZ停止
LD M561                  ; SMA451ｱﾗｰﾑﾘｾｯﾄ
ANB X102                 ; 吐出ﾓｰﾀ_ALARM
TMH K492 K100            ; SMA451異常
LD CR2002                ; 常時ON
MPS
LD T492                  ; SMA451異常
LDB B058A                ; ﾕﾆｯﾄ4_異常11BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B08A                 ; SMA451異常
ORL
ANL
OUT B08A                 ; SMA451異常
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B058A                 ; ﾕﾆｯﾄ4_異常11BZ停止
AND B08A                 ; SMA451異常
ANL
OUT B058A                ; ﾕﾆｯﾄ4_異常11BZ停止
LD CR2002                ; 常時ON
MPS
LD CR2003                ; 常時OFF
LDB B058B                ; ﾕﾆｯﾄ4_異常12BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B08B                 ; ﾕﾆｯﾄ4_異常12
ORL
ANL
OUT B08B                 ; ﾕﾆｯﾄ4_異常12
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B058B                 ; ﾕﾆｯﾄ4_異常12BZ停止
AND B08B                 ; ﾕﾆｯﾄ4_異常12
ANL
OUT B058B                ; ﾕﾆｯﾄ4_異常12BZ停止
LD CR2002                ; 常時ON
MPS
LD CR2003                ; 常時OFF
LDB B058C                ; ﾕﾆｯﾄ4_異常13BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B08C                 ; ﾕﾆｯﾄ4_異常13
ORL
ANL
OUT B08C                 ; ﾕﾆｯﾄ4_異常13
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B058C                 ; ﾕﾆｯﾄ4_異常13BZ停止
AND B08C                 ; ﾕﾆｯﾄ4_異常13
ANL
OUT B058C                ; ﾕﾆｯﾄ4_異常13BZ停止
LD M81                   ; 自動運転開始BZ
ANB X1680                ; 接着剤P_電源ｽｲｯﾁ
ANB M25                  ; 吐出無し
TMR K497 K2              ; 自動中接着剤ﾎﾟﾝﾌﾟ電源OFF
LD CR2002                ; 常時ON
MPS
LD T497                  ; 自動中接着剤ﾎﾟﾝﾌﾟ電源OFF
LDB B058D                ; ﾕﾆｯﾄ4_異常14BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B08D                 ; 自動中接着剤ﾎﾟﾝﾌﾟ電源OFF
ORL
ANL
OUT B08D                 ; 自動中接着剤ﾎﾟﾝﾌﾟ電源OFF
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B058D                 ; ﾕﾆｯﾄ4_異常14BZ停止
AND B08D                 ; 自動中接着剤ﾎﾟﾝﾌﾟ電源OFF
ANL
OUT B058D                ; ﾕﾆｯﾄ4_異常14BZ停止
LD CR2002                ; 常時ON
MPS
LD X5444                 ; 軸1 軸制御中
AND R3000                ; 塗布X　   Case1干渉外
AND R3001                ; 塗布X　   Case2干渉外
ANB R3008                ; 塗布Z　   上空位置
LDB B0590                ; ﾕﾆｯﾄ4_異常17BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B090                 ; 塗布RB衝突I.L.
ORL
ANL
OUT B090                 ; 塗布RB衝突I.L.
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0590                 ; ﾕﾆｯﾄ4_異常17BZ停止
AND B090                 ; 塗布RB衝突I.L.
ANL
OUT B0590                ; ﾕﾆｯﾄ4_異常17BZ停止
;異常ﾌﾞｻﾞｰまとめ
LD B080                  ; ﾕﾆｯﾄ4_異常
ANB B0580                ; ﾕﾆｯﾄ4_異常1BZ停止
LD B081                  ; SMA411異常
ANB B0581                ; ﾕﾆｯﾄ4_異常2BZ停止
ORL
LD B082                  ; SMA421異常
ANB B0582                ; ﾕﾆｯﾄ4_異常3BZ停止
ORL
LD B083                  ; P2圧力_異常4
ANB B0583                ; ﾕﾆｯﾄ4_異常4BZ停止
ORL
LD B084                  ; P1圧力_異常5
ANB B0584                ; ﾕﾆｯﾄ4_異常5BZ停止
ORL
LD B085                  ; 吐出圧力変動異常
ANB B0585                ; ﾕﾆｯﾄ4_異常6BZ停止
ORL
LD B086                  ; 吸込圧力変動異常
ANB B0586                ; ﾕﾆｯﾄ4_異常7BZ停止
ORL
LD B087                  ; 吐出圧復元異常
ANB B0587                ; ﾕﾆｯﾄ4_異常8BZ停止
ORL
LD B088                  ; 回転検出異常
ANB B0588                ; ﾕﾆｯﾄ4_異常9BZ停止
ORL
LD B089                  ; 最低吐出圧異常
ANB B0589                ; ﾕﾆｯﾄ4_異常10BZ停止
ORL
LD B08A                  ; SMA451異常
ANB B058A                ; ﾕﾆｯﾄ4_異常11BZ停止
ORL
LD B08B                  ; ﾕﾆｯﾄ4_異常12
ANB B058B                ; ﾕﾆｯﾄ4_異常12BZ停止
ORL
LD B08C                  ; ﾕﾆｯﾄ4_異常13
ANB B058C                ; ﾕﾆｯﾄ4_異常13BZ停止
ORL
LD B08D                  ; 自動中接着剤ﾎﾟﾝﾌﾟ電源OFF
ANB B058D                ; ﾕﾆｯﾄ4_異常14BZ停止
ORL
LD B090                  ; 塗布RB衝突I.L.
ANB B0590                ; ﾕﾆｯﾄ4_異常17BZ停止
ORL
OUT M4909                ; ﾕﾆｯﾄ4異常BZ補助
END
ENDH
