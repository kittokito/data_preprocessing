DEVICE:53
;MODULE:除材X軸ax4
;MODULE_TYPE:0
;SCRIPT_TYPE:
;<h1/>設定値制限
;'設定値制限
;
;FM11004.L = LIMIT ( -270000, 0, FM11004.L )		'待機位置_目標値
;FM11016.D = LIMIT ( 1, 2000, FM11016.D )			'待機位置_運転速度
;FM11018.D = LIMIT ( 1, 9999, FM11018.D )			'待機位置_加速時間
;FM11020.D = LIMIT ( 1, 9999, FM11020.D )			'待機位置_減速時間
;
;FM11204.L = LIMIT ( -270000, 0, FM11204.L )		'吸着確認位置_目標値
;FM11216.D = LIMIT ( 1, 2000, FM11216.D )			'吸着確認位置_運転速度
;FM11218.D = LIMIT ( 1, 9999, FM11218.D )			'吸着確認位置_加速時間
;FM11220.D = LIMIT ( 1, 9999, FM11220.D )			'吸着確認位置_減速時間
;
;FM11304.L = LIMIT ( -270000, 0, FM11304.L )		'検査投入位置_目標値
;FM11316.D = LIMIT ( 1, 2000, FM11316.D )			'検査投入位置_運転速度
;FM11318.D = LIMIT ( 1, 9999, FM11318.D )			'検査投入位置_加速時間
;FM11320.D = LIMIT ( 1, 9999, FM11320.D )			'検査投入位置_減速時間
;
;FM11404.L = LIMIT ( -370000, 0, FM11404.L )		'NG排出位置_目標値
;FM11416.D = LIMIT ( 1, 2000, FM11416.D )			'返却位置_運転速度
;FM11418.D = LIMIT ( 1, 9999, FM11418.D )			'返却位置_加速時間
;FM11420.D = LIMIT ( 1, 9999, FM11420.D )			'返却位置_減速時間
;
;FM11804.L = LIMIT ( -270000, 0, FM11804.L )		'ﾒﾝﾃ位置_目標値
;FM11816.D = LIMIT ( 1, 2000, FM11816.D )			'ﾒﾝﾃ位置_運転速度
;FM11818.D = LIMIT ( 1, 9999, FM11818.D )			'ﾒﾝﾃ位置_加速時間
;FM11820.D = LIMIT ( 1, 9999, FM11820.D )			'ﾒﾝﾃ位置_減速時間
;
;FM11904.L = LIMIT ( -370000, 0, FM11904.L )		'画像基準位置_目標値
;FM11916.D = LIMIT ( 1, 2000, FM11916.D )			'画像基準位置_運転速度
;FM11918.D = LIMIT ( 1, 9999, FM11918.D )			'画像基準位置_加速時間
;FM11920.D = LIMIT ( 1, 9999, FM11920.D )			'画像基準位置_減速時間
LDB CR2002               ; 常時ON
NCJ #1000
;'設定値制限
;
;FM11004.L = LIMIT ( -270000, 0, FM11004.L )		'待機位置_目標値
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT.L -270000 +0 FM11004 @VM0;TP除材X軸 待機位置 目標座標
LDA.L @VM0
CON
STA.L FM11004            ; TP除材X軸 待機位置 目標座標
;FM11016.D = LIMIT ( 1, 2000, FM11016.D )			'待機位置_運転速度
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #2000 FM11016 @VM2;TP除材X軸 待機位置 速度
LDA @VM2
CON
EXT
CON
STA.D FM11016            ; TP除材X軸 待機位置 速度
;FM11018.D = LIMIT ( 1, 9999, FM11018.D )			'待機位置_加速時間
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #9999 FM11018 @VM3;TP除材X軸 待機位置 加速時間
LDA @VM3
CON
EXT
CON
STA.D FM11018            ; TP除材X軸 待機位置 加速時間
;FM11020.D = LIMIT ( 1, 9999, FM11020.D )			'待機位置_減速時間
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #9999 FM11020 @VM4;TP除材X軸 待機位置 減速時間
LDA @VM4
CON
EXT
CON
STA.D FM11020            ; TP除材X軸 待機位置 減速時間
;FM11204.L = LIMIT ( -270000, 0, FM11204.L )		'吸着確認位置_目標値
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT.L -270000 +0 FM11204 @VM5;TP除材X軸 吸着確認 目標座標
LDA.L @VM5
CON
STA.L FM11204            ; TP除材X軸 吸着確認 目標座標
;FM11216.D = LIMIT ( 1, 2000, FM11216.D )			'吸着確認位置_運転速度
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #2000 FM11216 @VM7;TP除材X軸 吸着確認 速度
LDA @VM7
CON
EXT
CON
STA.D FM11216            ; TP除材X軸 吸着確認 速度
;FM11218.D = LIMIT ( 1, 9999, FM11218.D )			'吸着確認位置_加速時間
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #9999 FM11218 @VM8;TP除材X軸 吸着確認 加速時間
LDA @VM8
CON
EXT
CON
STA.D FM11218            ; TP除材X軸 吸着確認 加速時間
;FM11220.D = LIMIT ( 1, 9999, FM11220.D )			'吸着確認位置_減速時間
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #9999 FM11220 @VM9;TP除材X軸 吸着確認 減速時間
LDA @VM9
CON
EXT
CON
STA.D FM11220            ; TP除材X軸 吸着確認 減速時間
;FM11304.L = LIMIT ( -270000, 0, FM11304.L )		'検査投入位置_目標値
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT.L -270000 +0 FM11304 @VM10;TP除材X軸 ﾊﾟﾚｯﾄ置 目標座標
LDA.L @VM10
CON
STA.L FM11304            ; TP除材X軸 ﾊﾟﾚｯﾄ置 目標座標
;FM11316.D = LIMIT ( 1, 2000, FM11316.D )			'検査投入位置_運転速度
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #2000 FM11316 @VM12;TP除材X軸 ﾊﾟﾚｯﾄ置 速度
LDA @VM12
CON
EXT
CON
STA.D FM11316            ; TP除材X軸 ﾊﾟﾚｯﾄ置 速度
;FM11318.D = LIMIT ( 1, 9999, FM11318.D )			'検査投入位置_加速時間
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #9999 FM11318 @VM13;TP除材X軸 ﾊﾟﾚｯﾄ置 加速時間
LDA @VM13
CON
EXT
CON
STA.D FM11318            ; TP除材X軸 ﾊﾟﾚｯﾄ置 加速時間
;FM11320.D = LIMIT ( 1, 9999, FM11320.D )			'検査投入位置_減速時間
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #9999 FM11320 @VM14;TP除材X軸 ﾊﾟﾚｯﾄ置 減速時間
LDA @VM14
CON
EXT
CON
STA.D FM11320            ; TP除材X軸 ﾊﾟﾚｯﾄ置 減速時間
;FM11404.L = LIMIT ( -370000, 0, FM11404.L )		'NG排出位置_目標値
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT.L -370000 +0 FM11404 @VM15;TP除材X軸 排出位置 目標座標
LDA.L @VM15
CON
STA.L FM11404            ; TP除材X軸 排出位置 目標座標
;FM11416.D = LIMIT ( 1, 2000, FM11416.D )			'返却位置_運転速度
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #2000 FM11416 @VM17;TP除材X軸 排出位置 速度
LDA @VM17
CON
EXT
CON
STA.D FM11416            ; TP除材X軸 排出位置 速度
;FM11418.D = LIMIT ( 1, 9999, FM11418.D )			'返却位置_加速時間
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #9999 FM11418 @VM18;TP除材X軸 排出位置 加速時間
LDA @VM18
CON
EXT
CON
STA.D FM11418            ; TP除材X軸 排出位置 加速時間
;FM11420.D = LIMIT ( 1, 9999, FM11420.D )			'返却位置_減速時間
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #9999 FM11420 @VM19;TP除材X軸 排出位置 減速時間
LDA @VM19
CON
EXT
CON
STA.D FM11420            ; TP除材X軸 排出位置 減速時間
;FM11804.L = LIMIT ( -270000, 0, FM11804.L )		'ﾒﾝﾃ位置_目標値
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT.L -270000 +0 FM11804 @VM20;TP除材X軸 画像基準 目標座標
LDA.L @VM20
CON
STA.L FM11804            ; TP除材X軸 画像基準 目標座標
;FM11816.D = LIMIT ( 1, 2000, FM11816.D )			'ﾒﾝﾃ位置_運転速度
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #2000 FM11816 @VM22;TP除材X軸 画像基準 速度
LDA @VM22
CON
EXT
CON
STA.D FM11816            ; TP除材X軸 画像基準 速度
;FM11818.D = LIMIT ( 1, 9999, FM11818.D )			'ﾒﾝﾃ位置_加速時間
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #9999 FM11818 @VM23;TP除材X軸 画像基準 加速時間
LDA @VM23
CON
EXT
CON
STA.D FM11818            ; TP除材X軸 画像基準 加速時間
;FM11820.D = LIMIT ( 1, 9999, FM11820.D )			'ﾒﾝﾃ位置_減速時間
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #9999 FM11820 @VM24;TP除材X軸 画像基準 減速時間
LDA @VM24
CON
EXT
CON
STA.D FM11820            ; TP除材X軸 画像基準 減速時間
;FM11904.L = LIMIT ( -370000, 0, FM11904.L )		'画像基準位置_目標値
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT.L -370000 +0 FM11904 @VM25;TP除材X軸 ﾊﾟﾚｯﾄ1基準 目標座標
LDA.L @VM25
CON
STA.L FM11904            ; TP除材X軸 ﾊﾟﾚｯﾄ1基準 目標座標
;FM11916.D = LIMIT ( 1, 2000, FM11916.D )			'画像基準位置_運転速度
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #2000 FM11916 @VM27;TP除材X軸 ﾊﾟﾚｯﾄ1基準 速度
LDA @VM27
CON
EXT
CON
STA.D FM11916            ; TP除材X軸 ﾊﾟﾚｯﾄ1基準 速度
;FM11918.D = LIMIT ( 1, 9999, FM11918.D )			'画像基準位置_加速時間
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #9999 FM11918 @VM28;TP除材X軸 ﾊﾟﾚｯﾄ1基準 加速時間
LDA @VM28
CON
EXT
CON
STA.D FM11918            ; TP除材X軸 ﾊﾟﾚｯﾄ1基準 加速時間
;FM11920.D = LIMIT ( 1, 9999, FM11920.D )			'画像基準位置_減速時間
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #9999 FM11920 @VM29;TP除材X軸 ﾊﾟﾚｯﾄ1基準 減速時間
LDA @VM29
CON
EXT
CON
STA.D FM11920            ; TP除材X軸 ﾊﾟﾚｯﾄ1基準 減速時間
LABEL #1000
;
LD R66804                ; 軸4 軸制御中
ANB MR400                ; 全ﾄﾞｱ閉確認
OUT R66402               ; 軸4 減速停止
LD CR2002                ; 常時ON
OUT R3603                ; 除材X軸 電源MC
LD CR2002                ; 常時ON
ANB @MR601               ; 除材X軸 ｻｰﾎﾞOFF
OUT R66513               ; 軸4 ｻｰﾎﾞON
LD R62800                ; ML16動作可能
AND R66913               ; 軸4 ｻｰﾎﾞﾚﾃﾞｨ
ANB MR7100               ; ERR10 除材X軸ﾄﾞﾗｲﾊﾞｰ異常
ANB MR7101               ; ERR11 除材X軸軸ｴﾗｰ
ANB R62802               ; ｴﾗｰ中
OUT MR803                ; 除材X軸 動作可能
LDP B0319                ; 除材X軸 ｻｰﾎﾞOFF_SW
AND B01D4                ; ﾏｽﾀｰﾛｸﾞｲﾝ中PL
OUT @MR600               ; 除材X軸 ｻｰﾎﾞOFF_PLS
LD @MR600                ; 除材X軸 ｻｰﾎﾞOFF_PLS
ANB @MR601               ; 除材X軸 ｻｰﾎﾞOFF
LDB @MR600               ; 除材X軸 ｻｰﾎﾞOFF_PLS
AND @MR601               ; 除材X軸 ｻｰﾎﾞOFF
ORL
AND MR100                ; 手動ﾓｰﾄﾞ
OUT @MR601               ; 除材X軸 ｻｰﾎﾞOFF
LD @MR601                ; 除材X軸 ｻｰﾎﾞOFF
OUT B0419                ; 除材X軸 ｻｰﾎﾞOFF_PL
;<h1/>原点復帰
LDP B0300                ; 除材X軸 原点復帰SW
OUT @MR000               ; 手動 除材X軸 原点復帰
;ｲﾝﾀｰﾛｯｸ
LD MR803                 ; 除材X軸 動作可能
LD MR6500                ; 除材Z軸 原点位置
OR MR6501                ; 除材Z軸 待機位置
ANL
ANB MR7100               ; ERR10 除材X軸ﾄﾞﾗｲﾊﾞｰ異常
ANB MR7101               ; ERR11 除材X軸軸ｴﾗｰ
AND MR400                ; 全ﾄﾞｱ閉確認
LD MR100                 ; 手動ﾓｰﾄﾞ
OR MR101                 ; 自動ﾓｰﾄﾞ
ANL
OUT MR10302              ; ﾏｸﾛHP 除材X軸 原点復帰IL
LD @MR000                ; 手動 除材X軸 原点復帰
AND MR100                ; 手動ﾓｰﾄﾞ
LD MR6000                ; 除材X軸 原点復帰指令
AND MR101                ; 自動ﾓｰﾄﾞ
ORL
OR @MR005                ; 除材X軸 原点復帰
ANB MR10309              ; ﾏｸﾛHP 除材X軸 原点復帰完了
AND MR10302              ; ﾏｸﾛHP 除材X軸 原点復帰IL
OUT @MR005               ; 除材X軸 原点復帰
;ﾎﾟｲﾝﾄﾊﾟﾗﾒｰﾀ転送
;出力
LD @MR005                ; 除材X軸 原点復帰
OUT MR10300              ; ﾏｸﾛHP 除材X軸 原点復帰起動
LD MR004                 ; ﾘｾｯﾄSW
OUT MR10303              ; ﾏｸﾛHP 除材X軸 原点復帰 ﾘｾｯﾄSW
LD CR2002                ; 常時ON
MSTRT KE_ML_HP #4 #1 MR10300 DM19030;ﾏｸﾛHP 除材X軸 原点復帰起動  除材X軸 ｴﾗｰ状態
LD MR10309               ; ﾏｸﾛHP 除材X軸 原点復帰完了
OR MR6112                ; 除材X軸 原点復帰記憶
AND MR803                ; 除材X軸 動作可能
ANB MR7100               ; ERR10 除材X軸ﾄﾞﾗｲﾊﾞｰ異常
ANB MR7101               ; ERR11 除材X軸軸ｴﾗｰ
ANPB @MR005              ; 除材X軸 原点復帰
OUT MR6112               ; 除材X軸 原点復帰記憶
LD MR10312               ; ﾏｸﾛHP 除材X軸 原点復帰要求
OUT R66412               ; 軸4 原点復帰要求
;ﾗﾝﾌﾟ
LD MR10308               ; ﾏｸﾛHP 除材X軸 原点復帰中
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR MR6100                ; 除材X軸 原点位置
OUT B0400                ; 除材X軸 原点復帰PL
;<h1/>手動位置決め
LD MR100                 ; 手動ﾓｰﾄﾞ
ANB @MR305               ; 除材X軸 位置決め
MPS
ANP B0301                ; 除材X軸 待機位置SW
DW #1 DM54               ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
MRD
ANP B0302                ; 除材X軸 除材反転 取出位置SW
DW #2 DM54               ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
MRD
ANP B0303                ; 除材X軸 吸着確認 位置SW
DW #3 DM54               ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
MRD
ANP B0304                ; 除材X軸 ﾊﾟﾚｯﾄ置 位置SW
DW #4 DM54               ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
MRD
ANP B0305                ; 除材X軸 NG位置SW
DW #5 DM54               ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
MRD
ANP B0308                ; 除材X軸 ﾒﾝﾃﾅﾝｽ位置SW
DW #8 DM54               ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
MRD
ANP B0309                ; 除材X軸 画像基準 位置SW
DW #9 DM54               ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
MRD
ANP B030E                ; 除材X軸 ﾊﾟﾚｯﾄ1 基準位置SW
DW #10 DM54              ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
MPP
ANP B030F                ; 除材X軸 ﾊﾟﾚｯﾄ2 基準位置SW
DW #11 DM54              ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
LDPB B0301               ; 除材X軸 待機位置SW
ANPB B0302               ; 除材X軸 除材反転 取出位置SW
ANPB B0303               ; 除材X軸 吸着確認 位置SW
ANPB B0304               ; 除材X軸 ﾊﾟﾚｯﾄ置 位置SW
ANPB B0305               ; 除材X軸 NG位置SW
ANPB B0308               ; 除材X軸 ﾒﾝﾃﾅﾝｽ位置SW
ANPB B0309               ; 除材X軸 画像基準 位置SW
ANPB B030E               ; 除材X軸 ﾊﾟﾚｯﾄ1 基準位置SW
ANPB B030F               ; 除材X軸 ﾊﾟﾚｯﾄ2 基準位置SW
INV
ANB @MR305               ; 除材X軸 位置決め
OUT @MR300               ; 手動除材X軸 位置決め
;<h1/>自動位置決め
LD MR101                 ; 自動ﾓｰﾄﾞ
ANB @MR305               ; 除材X軸 位置決め
MPS
AND MR6001               ; 除材X軸 待機位置指令
DW #1 DM54               ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
MRD
AND MR6002               ; 除材X軸 除材反転 取出位置指令
DW #2 DM54               ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
MRD
AND MR6003               ; 除材X軸 吸着確認 位置指令
DW #3 DM54               ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
MRD
AND MR6004               ; 除材X軸 ﾊﾟﾚｯﾄ置 位置指令
DW #4 DM54               ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
MPP
AND MR6005               ; 除材X軸 NG位置指令
DW #5 DM54               ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
LDB MR6001               ; 除材X軸 待機位置指令
ANB MR6002               ; 除材X軸 除材反転 取出位置指令
ANB MR6003               ; 除材X軸 吸着確認 位置指令
ANB MR6004               ; 除材X軸 ﾊﾟﾚｯﾄ置 位置指令
ANB MR6005               ; 除材X軸 NG位置指令
INV
ANB @MR305               ; 除材X軸 位置決め
OUT @MR302               ; 自動除材X軸 位置決め
;<h1/>ｲﾝﾀｰﾛｯｸ
LD MR803                 ; 除材X軸 動作可能
AND MR6112               ; 除材X軸 原点復帰記憶
LD MR6500                ; 除材Z軸 原点位置
OR MR6501                ; 除材Z軸 待機位置
ANL
ANB MR7100               ; ERR10 除材X軸ﾄﾞﾗｲﾊﾞｰ異常
ANB MR7101               ; ERR11 除材X軸軸ｴﾗｰ
AND MR400                ; 全ﾄﾞｱ閉確認
LD MR100                 ; 手動ﾓｰﾄﾞ
OR MR101                 ; 自動ﾓｰﾄﾞ
ANL
OUT MR11302              ; ﾏｸﾛPOS 除材X軸 位置決めIL
;<h1/>位置決め開始
LDB R66804               ; 軸4 軸制御中
LD @MR300                ; 手動除材X軸 位置決め
AND MR100                ; 手動ﾓｰﾄﾞ
LD @MR302                ; 自動除材X軸 位置決め
AND MR101                ; 自動ﾓｰﾄﾞ
ORL
ANL
OR @MR305                ; 除材X軸 位置決め
ANB MR11309              ; ﾏｸﾛPOS 除材X軸 位置決め完了
ANB MR11310              ; ﾏｸﾛPOS 除材X軸 位置決め異常
AND MR11302              ; ﾏｸﾛPOS 除材X軸 位置決めIL
OUT @MR305               ; 除材X軸 位置決め
;<h1/>ﾎﾟｲﾝﾄﾊﾟﾗﾒｰﾀ演算
;除材反転取出位置演算
;'除材X軸 除材反転取出位置演算
;
;FM11104.L = FM11804.L + DM1200.L
LD CR2002                ; 常時ON
NCJ #1001
;'除材X軸 除材反転取出位置演算
;
;FM11104.L = FM11804.L + DM1200.L
LD CR2002                ; 常時ON
LDA.L FM11804            ; TP除材X軸 画像基準 目標座標
CON
ADD.L DM1200             ; 画像除材X軸 除材反転取出座標
CON
STA.L FM11104            ; TP除材X軸 取出位置 目標座標
LABEL #1001
;
;吸着確認位置演算
;'除材X軸 吸着確認位置演算
;
;FM11204.L = FM11240.L + FM9586.L
LD CR2002                ; 常時ON
NCJ #1002
;'除材X軸 吸着確認位置演算
;
;FM11204.L = FM11240.L + FM9586.L
LD CR2002                ; 常時ON
LDA.L FM11240            ; TP除材X軸 吸着確認 補正前座標
CON
ADD.L FM9586             ; ﾜｰｸﾚｼﾋﾟその他(X検査位置補正量)
CON
STA.L FM11204            ; TP除材X軸 吸着確認 目標座標
LABEL #1002
;
;X軸手動列数
;'ﾊﾟﾚｯﾄ1 X軸手動列数
;FM110 = LIMIT ( 1, 999, FM110 )
;DM2010 = FM110
;
;'ﾊﾟﾚｯﾄ2 X軸手動列数
;FM114 = LIMIT ( 1, 999, FM114 )
;DM2012 = FM114
LD MR100                 ; 手動ﾓｰﾄﾞ
NCJ #1007
;'ﾊﾟﾚｯﾄ1 X軸手動列数
;
;FM110 = LIMIT ( 1, 999, FM110 )
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #999 FM110 @VM30; TPX軸 ﾊﾟﾚｯﾄ1列 設定
LDA @VM30
CON
STA FM110                ; TPX軸 ﾊﾟﾚｯﾄ1列 設定
;DM2010 = FM110
;
LD CR2002                ; 常時ON
MOV FM110 DM2010         ; TPX軸 ﾊﾟﾚｯﾄ1列 設定  X軸ﾊﾟﾚｯﾄ1 現在列
;'ﾊﾟﾚｯﾄ2 X軸手動列数
;
;FM114 = LIMIT ( 1, 999, FM114 )
;
LD CR2002                ; 常時ON
LDA.D #0
CON
LIMIT #1 #999 FM114 @VM31; TPX軸 ﾊﾟﾚｯﾄ2列 設定
LDA @VM31
CON
STA FM114                ; TPX軸 ﾊﾟﾚｯﾄ2列 設定
;DM2012 = FM114
LD CR2002                ; 常時ON
MOV FM114 DM2012         ; TPX軸 ﾊﾟﾚｯﾄ2列 設定  X軸ﾊﾟﾚｯﾄ2 現在列
LABEL #1007
;
LD MR101                 ; 自動ﾓｰﾄﾞ
MOV DM300 DM2010         ; 自動 X軸ﾊﾟﾚｯﾄ1 現在列  X軸ﾊﾟﾚｯﾄ1 現在列
MOV DM302 DM2012         ; 自動 X軸ﾊﾟﾚｯﾄ2 現在列  X軸ﾊﾟﾚｯﾄ2 現在列
;'ﾊﾟﾚｯﾄ1ｵﾌｾｯﾄ量算出
;
;IF FM9126 <> 0 THEN									'ｵﾌｾｯﾄA
;	DM200.L = (DM2010 - 1) / FM9126 * FM9120.L
;ELSE
;	DM200.L = 0
;END IF
;
;IF FM9127 <> 0 THEN									'ｵﾌｾｯﾄB
;	DM202.L = (DM2010 - 1) / FM9127 * FM9122.L
;ELSE
;	DM202.L = 0
;END IF
;
;IF FM9128 <> 0 THEN									'ｵﾌｾｯﾄC
;	DM204.L = (DM2010 - 1) / FM9128 * FM9124.L
;ELSE
;	DM204.L = 0
;END IF
;
;DM11086.L = DM200.L + DM202.L + DM204.L			'ﾊﾟﾚｯﾄ1 X軸ｵﾌｾｯﾄ値合計
LD CR2002                ; 常時ON
NCJ #1004
;'ﾊﾟﾚｯﾄ1ｵﾌｾｯﾄ量算出
;
;IF FM9126 <> 0 THEN									'ｵﾌｾｯﾄA
;
LD<> FM9126 #0           ; ﾊﾟﾚｯﾄﾚｼﾋﾟ XｵﾌｾｯﾄA周期
NCJ #2000
;	DM200.L = (DM2010 - 1) / FM9126 * FM9120.L
;
LD CR2002                ; 常時ON
LDA FM9126               ; ﾊﾟﾚｯﾄﾚｼﾋﾟ XｵﾌｾｯﾄA周期
CON
EXT
CON
STA.L @VM32
CON
LDA DM2010               ; X軸ﾊﾟﾚｯﾄ1 現在列
CON
EXT
CON
SUB.L +1
CON
EXT.L
CON
DIV.L @VM32
CON
MUL.L FM9120             ; ﾊﾟﾚｯﾄﾚｼﾋﾟXｵﾌｾｯﾄA量
CON
STA.L DM200              ; X軸ｵﾌｾｯﾄA量
;ELSE
;
LD CR2002                ; 常時ON
CJ #2001
LABEL #2000
;	DM200.L = 0
;
LD CR2002                ; 常時ON
MOV.L +0 DM200           ; X軸ｵﾌｾｯﾄA量
;END IF
;
LABEL #2001
;IF FM9127 <> 0 THEN									'ｵﾌｾｯﾄB
;
LD<> FM9127 #0           ; ﾊﾟﾚｯﾄﾚｼﾋﾟXｵﾌｾｯﾄB周期
NCJ #2002
;	DM202.L = (DM2010 - 1) / FM9127 * FM9122.L
;
LD CR2002                ; 常時ON
LDA FM9127               ; ﾊﾟﾚｯﾄﾚｼﾋﾟXｵﾌｾｯﾄB周期
CON
EXT
CON
STA.L @VM34
CON
LDA DM2010               ; X軸ﾊﾟﾚｯﾄ1 現在列
CON
EXT
CON
SUB.L +1
CON
EXT.L
CON
DIV.L @VM34
CON
MUL.L FM9122             ; ﾊﾟﾚｯﾄﾚｼﾋﾟXｵﾌｾｯﾄB量
CON
STA.L DM202              ; X軸ｵﾌｾｯﾄB量
;ELSE
;
LD CR2002                ; 常時ON
CJ #2003
LABEL #2002
;	DM202.L = 0
;
LD CR2002                ; 常時ON
MOV.L +0 DM202           ; X軸ｵﾌｾｯﾄB量
;END IF
;
LABEL #2003
;IF FM9128 <> 0 THEN									'ｵﾌｾｯﾄC
;
LD<> FM9128 #0           ; ﾊﾟﾚｯﾄﾚｼﾋﾟXｵﾌｾｯﾄC周期
NCJ #2004
;	DM204.L = (DM2010 - 1) / FM9128 * FM9124.L
;
LD CR2002                ; 常時ON
LDA FM9128               ; ﾊﾟﾚｯﾄﾚｼﾋﾟXｵﾌｾｯﾄC周期
CON
EXT
CON
STA.L @VM36
CON
LDA DM2010               ; X軸ﾊﾟﾚｯﾄ1 現在列
CON
EXT
CON
SUB.L +1
CON
EXT.L
CON
DIV.L @VM36
CON
MUL.L FM9124             ; ﾊﾟﾚｯﾄﾚｼﾋﾟXｵﾌｾｯﾄC量
CON
STA.L DM204              ; X軸ｵﾌｾｯﾄC量
;ELSE
;
LD CR2002                ; 常時ON
CJ #2005
LABEL #2004
;	DM204.L = 0
;
LD CR2002                ; 常時ON
MOV.L +0 DM204           ; X軸ｵﾌｾｯﾄC量
;END IF
;
LABEL #2005
;DM11086.L = DM200.L + DM202.L + DM204.L			'ﾊﾟﾚｯﾄ1 X軸ｵﾌｾｯﾄ値合計
LD CR2002                ; 常時ON
LDA.L DM200              ; X軸ｵﾌｾｯﾄA量
CON
ADD.L DM202              ; X軸ｵﾌｾｯﾄB量
CON
ADD.L DM204              ; X軸ｵﾌｾｯﾄC量
CON
STA.L DM11086            ; X軸ﾊﾟﾚｯﾄ1合計ｵﾌｾｯﾄ量
LABEL #1004
;
;'ﾊﾟﾚｯﾄ2ｵﾌｾｯﾄ量算出
;
;IF FM9126 <> 0 THEN									'ｵﾌｾｯﾄA
;	DM200.L = (DM2012 - 1) / FM9126 * FM9120.L
;ELSE
;	DM200.L = 0
;END IF
;
;IF FM9127 <> 0 THEN									'ｵﾌｾｯﾄB
;	DM202.L = (DM2012 - 1) / FM9127 * FM9122.L
;ELSE
;	DM202.L = 0
;END IF
;
;IF FM9128 <> 0 THEN									'ｵﾌｾｯﾄC
;	DM204.L = (DM2012 - 1) / FM9128 * FM9124.L
;ELSE
;	DM204.L = 0
;END IF
;
;DM11088.L = DM200.L + DM202.L + DM204.L			'ﾊﾟﾚｯﾄ2 X軸ｵﾌｾｯﾄ値合計
LD CR2002                ; 常時ON
NCJ #1010
;'ﾊﾟﾚｯﾄ2ｵﾌｾｯﾄ量算出
;
;IF FM9126 <> 0 THEN									'ｵﾌｾｯﾄA
;
LD<> FM9126 #0           ; ﾊﾟﾚｯﾄﾚｼﾋﾟ XｵﾌｾｯﾄA周期
NCJ #2006
;	DM200.L = (DM2012 - 1) / FM9126 * FM9120.L
;
LD CR2002                ; 常時ON
LDA FM9126               ; ﾊﾟﾚｯﾄﾚｼﾋﾟ XｵﾌｾｯﾄA周期
CON
EXT
CON
STA.L @VM38
CON
LDA DM2012               ; X軸ﾊﾟﾚｯﾄ2 現在列
CON
EXT
CON
SUB.L +1
CON
EXT.L
CON
DIV.L @VM38
CON
MUL.L FM9120             ; ﾊﾟﾚｯﾄﾚｼﾋﾟXｵﾌｾｯﾄA量
CON
STA.L DM200              ; X軸ｵﾌｾｯﾄA量
;ELSE
;
LD CR2002                ; 常時ON
CJ #2007
LABEL #2006
;	DM200.L = 0
;
LD CR2002                ; 常時ON
MOV.L +0 DM200           ; X軸ｵﾌｾｯﾄA量
;END IF
;
LABEL #2007
;IF FM9127 <> 0 THEN									'ｵﾌｾｯﾄB
;
LD<> FM9127 #0           ; ﾊﾟﾚｯﾄﾚｼﾋﾟXｵﾌｾｯﾄB周期
NCJ #2008
;	DM202.L = (DM2012 - 1) / FM9127 * FM9122.L
;
LD CR2002                ; 常時ON
LDA FM9127               ; ﾊﾟﾚｯﾄﾚｼﾋﾟXｵﾌｾｯﾄB周期
CON
EXT
CON
STA.L @VM40
CON
LDA DM2012               ; X軸ﾊﾟﾚｯﾄ2 現在列
CON
EXT
CON
SUB.L +1
CON
EXT.L
CON
DIV.L @VM40
CON
MUL.L FM9122             ; ﾊﾟﾚｯﾄﾚｼﾋﾟXｵﾌｾｯﾄB量
CON
STA.L DM202              ; X軸ｵﾌｾｯﾄB量
;ELSE
;
LD CR2002                ; 常時ON
CJ #2009
LABEL #2008
;	DM202.L = 0
;
LD CR2002                ; 常時ON
MOV.L +0 DM202           ; X軸ｵﾌｾｯﾄB量
;END IF
;
LABEL #2009
;IF FM9128 <> 0 THEN									'ｵﾌｾｯﾄC
;
LD<> FM9128 #0           ; ﾊﾟﾚｯﾄﾚｼﾋﾟXｵﾌｾｯﾄC周期
NCJ #2010
;	DM204.L = (DM2012 - 1) / FM9128 * FM9124.L
;
LD CR2002                ; 常時ON
LDA FM9128               ; ﾊﾟﾚｯﾄﾚｼﾋﾟXｵﾌｾｯﾄC周期
CON
EXT
CON
STA.L @VM42
CON
LDA DM2012               ; X軸ﾊﾟﾚｯﾄ2 現在列
CON
EXT
CON
SUB.L +1
CON
EXT.L
CON
DIV.L @VM42
CON
MUL.L FM9124             ; ﾊﾟﾚｯﾄﾚｼﾋﾟXｵﾌｾｯﾄC量
CON
STA.L DM204              ; X軸ｵﾌｾｯﾄC量
;ELSE
;
LD CR2002                ; 常時ON
CJ #2011
LABEL #2010
;	DM204.L = 0
;
LD CR2002                ; 常時ON
MOV.L +0 DM204           ; X軸ｵﾌｾｯﾄC量
;END IF
;
LABEL #2011
;DM11088.L = DM200.L + DM202.L + DM204.L			'ﾊﾟﾚｯﾄ2 X軸ｵﾌｾｯﾄ値合計
LD CR2002                ; 常時ON
LDA.L DM200              ; X軸ｵﾌｾｯﾄA量
CON
ADD.L DM202              ; X軸ｵﾌｾｯﾄB量
CON
ADD.L DM204              ; X軸ｵﾌｾｯﾄC量
CON
STA.L DM11088            ; X軸ﾊﾟﾚｯﾄ2合計ｵﾌｾｯﾄ量
LABEL #1010
;
LD CR2003                ; 常時OFF
MOV.L +0 DM11086         ; X軸ﾊﾟﾚｯﾄ1合計ｵﾌｾｯﾄ量
MOV.L +0 DM11088         ; X軸ﾊﾟﾚｯﾄ2合計ｵﾌｾｯﾄ量
LD CR2002                ; 常時ON
MPS
LD B0310                 ; 手動 ﾊﾟﾚｯﾄ1選択SW
OR B0410                 ; 手動 ﾊﾟﾚｯﾄ1選択PL
ANB B0311                ; 手動 ﾊﾟﾚｯﾄ2選択SW
ANL
OUT B0410                ; 手動 ﾊﾟﾚｯﾄ1選択PL
MPP
ANB B0410                ; 手動 ﾊﾟﾚｯﾄ1選択PL
OUT B0411                ; 手動 ﾊﾟﾚｯﾄ2選択PL
;'現在列による演算基準ﾎﾟｲﾝﾄ算出
;FM11340.L = FM11904.L + FM100.L
;DM2000.L = FM11340.L + FM9106.L + FM9510.L
;DM2002.L =	DM2000.L + ((DM2010 - 1) * FM9108.D) + DM11086.L
LD CR2002                ; 常時ON
NCJ #1005
;'現在列による演算基準ﾎﾟｲﾝﾄ算出
;
;FM11340.L = FM11904.L + FM100.L
;
LD CR2002                ; 常時ON
LDA.L FM11904            ; TP除材X軸 ﾊﾟﾚｯﾄ1基準 目標座標
CON
ADD.L FM100              ; 裏TP ﾊﾟﾚｯﾄ1X軸基準_ﾊﾟﾚｯﾄ原点
CON
STA.L FM11340            ; TP除材X軸 ﾊﾟﾚｯﾄ1原点座標
;DM2000.L = FM11340.L + FM9106.L + FM9510.L
;
LD CR2002                ; 常時ON
LDA.L FM11340            ; TP除材X軸 ﾊﾟﾚｯﾄ1原点座標
CON
ADD.L FM9106             ; ﾊﾟﾚｯﾄﾚｼﾋﾟ(X_P0寸法)
CON
ADD.L FM9510             ; ﾜｰｸﾚｼﾋﾟ基本(ﾊﾟﾚｯﾄ補正値X軸)
CON
STA.L DM2000             ; X軸ﾊﾟﾚｯﾄ1 ｽﾀｰﾄ位置基準
;DM2002.L =	DM2000.L + ((DM2010 - 1) * FM9108.D) + DM11086.L
LD CR2002                ; 常時ON
LDA DM2010               ; X軸ﾊﾟﾚｯﾄ1 現在列
CON
EXT
CON
SUB.L +1
CON
MUL.L FM9108             ; ﾊﾟﾚｯﾄﾚｼﾋﾟ(X_ﾋﾟｯﾁ寸法)
CON
ADD.L DM2000             ; X軸ﾊﾟﾚｯﾄ1 ｽﾀｰﾄ位置基準
CON
ADD.L DM11086            ; X軸ﾊﾟﾚｯﾄ1合計ｵﾌｾｯﾄ量
CON
STA.L DM2002             ; X軸ﾊﾟﾚｯﾄ1 ﾊﾟﾚｯﾄ置目標座標
LABEL #1005
;
;'現在列による演算基準ﾎﾟｲﾝﾄ算出
;FM11342.L = FM11944.L + FM104.L
;DM2004.L = FM11342.L + FM9106.L + FM9510.L
;DM2006.L =	DM2004.L + ((DM2012 - 1) * FM9108.D) + DM11088.L
LD CR2002                ; 常時ON
NCJ #1008
;'現在列による演算基準ﾎﾟｲﾝﾄ算出
;
;FM11342.L = FM11944.L + FM104.L
;
LD CR2002                ; 常時ON
LDA.L FM11944            ; TP除材X軸 ﾊﾟﾚｯﾄ2基準 目標座標
CON
ADD.L FM104              ; 裏TP ﾊﾟﾚｯﾄ2X軸基準_ﾊﾟﾚｯﾄ原点
CON
STA.L FM11342            ; TP除材X軸 ﾊﾟﾚｯﾄ2原点座標
;DM2004.L = FM11342.L + FM9106.L + FM9510.L
;
LD CR2002                ; 常時ON
LDA.L FM11342            ; TP除材X軸 ﾊﾟﾚｯﾄ2原点座標
CON
ADD.L FM9106             ; ﾊﾟﾚｯﾄﾚｼﾋﾟ(X_P0寸法)
CON
ADD.L FM9510             ; ﾜｰｸﾚｼﾋﾟ基本(ﾊﾟﾚｯﾄ補正値X軸)
CON
STA.L DM2004             ; X軸ﾊﾟﾚｯﾄ2 ｽﾀｰﾄ位置基準
;DM2006.L =	DM2004.L + ((DM2012 - 1) * FM9108.D) + DM11088.L
LD CR2002                ; 常時ON
LDA DM2012               ; X軸ﾊﾟﾚｯﾄ2 現在列
CON
EXT
CON
SUB.L +1
CON
MUL.L FM9108             ; ﾊﾟﾚｯﾄﾚｼﾋﾟ(X_ﾋﾟｯﾁ寸法)
CON
ADD.L DM2004             ; X軸ﾊﾟﾚｯﾄ2 ｽﾀｰﾄ位置基準
CON
ADD.L DM11088            ; X軸ﾊﾟﾚｯﾄ2合計ｵﾌｾｯﾄ量
CON
STA.L DM2006             ; X軸ﾊﾟﾚｯﾄ2 ﾊﾟﾚｯﾄ置目標座標
LABEL #1008
;
;'除材X軸 ﾊﾟﾚｯﾄ1置位置演算
;
;FM11304.L = DM2002.L	'除材X軸 ﾊﾟﾚｯﾄ置位置目標座標へ代入
LD B0410                 ; 手動 ﾊﾟﾚｯﾄ1選択PL
AND MR100                ; 手動ﾓｰﾄﾞ
LDB MR3315               ; ﾊﾟﾚｯﾄ2整列
LDB MR37800              ; 検査NGﾌﾗｸﾞ
OR LR010                 ; ﾊﾟﾚｯﾄ2OK/NG選択 ON:OK OFF:NG
ANL
AND MR101                ; 自動ﾓｰﾄﾞ
ORL
NCJ #1006
;'除材X軸 ﾊﾟﾚｯﾄ1置位置演算
;
;FM11304.L = DM2002.L	'除材X軸 ﾊﾟﾚｯﾄ置位置目標座標へ代入
LD CR2002                ; 常時ON
MOV.L DM2002 FM11304     ; X軸ﾊﾟﾚｯﾄ1 ﾊﾟﾚｯﾄ置目標座標  TP除材X軸 ﾊﾟﾚｯﾄ置 目標座標
LABEL #1006
;
;'除材X軸 ﾊﾟﾚｯﾄ2置位置演算
;
;FM11304.L = DM2006.L	'除材X軸 ﾊﾟﾚｯﾄ置位置目標座標へ代入
LD B0411                 ; 手動 ﾊﾟﾚｯﾄ2選択PL
AND MR100                ; 手動ﾓｰﾄﾞ
LD MR3315                ; ﾊﾟﾚｯﾄ2整列
LD MR37800               ; 検査NGﾌﾗｸﾞ
ANB LR010                ; ﾊﾟﾚｯﾄ2OK/NG選択 ON:OK OFF:NG
ORL
AND MR101                ; 自動ﾓｰﾄﾞ
ORL
NCJ #1009
;'除材X軸 ﾊﾟﾚｯﾄ2置位置演算
;
;FM11304.L = DM2006.L	'除材X軸 ﾊﾟﾚｯﾄ置位置目標座標へ代入
LD CR2002                ; 常時ON
MOV.L DM2006 FM11304     ; X軸ﾊﾟﾚｯﾄ2 ﾊﾟﾚｯﾄ置目標座標  TP除材X軸 ﾊﾟﾚｯﾄ置 目標座標
LABEL #1009
;
;<h1/>ﾎﾟｲﾝﾄﾊﾟﾗﾒｰﾀ転送
;P1　除材X軸 待機位置
LDP @MR305               ; 除材X軸 位置決め
AND= DM54 #1             ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
BMOV FM11000 DM11300 #16 ; TP除材X軸 待機位置 動作ﾓｰﾄﾞ  除材X軸 動作ﾓｰﾄﾞ
MPS
LDA.D FM11016            ; TP除材X軸 待機位置 速度
CON
MUL.D #1000
CON
STA.D DM11316            ; 除材X軸 速度
MPP
BMOV FM11018 DM11318 #10 ; TP除材X軸 待機位置 加速時間  除材X軸 加速時間
;P2　除材X軸 除材反転取出位置
LDP @MR305               ; 除材X軸 位置決め
AND= DM54 #2             ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
BMOV FM11100 DM11300 #16 ; TP除材X軸 取出位置 動作ﾓｰﾄﾞ  除材X軸 動作ﾓｰﾄﾞ
MPS
LDA.D FM11116            ; TP除材X軸 取出位置 速度
CON
MUL.D #1000
CON
STA.D DM11316            ; 除材X軸 速度
MPP
BMOV FM11118 DM11318 #10 ; TP除材X軸 取出位置 加速時間  除材X軸 加速時間
;P3　除材X軸 吸着確認位置
LDP @MR305               ; 除材X軸 位置決め
AND= DM54 #3             ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
BMOV FM11200 DM11300 #16 ; TP除材X軸 吸着確認 動作ﾓｰﾄﾞ  除材X軸 動作ﾓｰﾄﾞ
MPS
LDA.D FM11216            ; TP除材X軸 吸着確認 速度
CON
MUL.D #1000
CON
STA.D DM11316            ; 除材X軸 速度
MPP
BMOV FM11218 DM11318 #10 ; TP除材X軸 吸着確認 加速時間  除材X軸 加速時間
;P4　除材X軸 ﾊﾟﾚｯﾄ置位置
LDP @MR305               ; 除材X軸 位置決め
AND= DM54 #4             ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
BMOV FM11300 DM11300 #16 ; TP除材X軸 ﾊﾟﾚｯﾄ置 動作ﾓｰﾄﾞ  除材X軸 動作ﾓｰﾄﾞ
MPS
LDA.D FM11316            ; TP除材X軸 ﾊﾟﾚｯﾄ置 速度
CON
MUL.D #1000
CON
STA.D DM11316            ; 除材X軸 速度
MPP
BMOV FM11318 DM11318 #10 ; TP除材X軸 ﾊﾟﾚｯﾄ置 加速時間  除材X軸 加速時間
;P5　除材X軸 NG排出位置
LDP @MR305               ; 除材X軸 位置決め
AND= DM54 #5             ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
BMOV FM11400 DM11300 #16 ; TP除材X軸 排出位置 動作ﾓｰﾄﾞ  除材X軸 動作ﾓｰﾄﾞ
MPS
LDA.D FM11416            ; TP除材X軸 排出位置 速度
CON
MUL.D #1000
CON
STA.D DM11316            ; 除材X軸 速度
MPP
BMOV FM11418 DM11318 #10 ; TP除材X軸 排出位置 加速時間  除材X軸 加速時間
;P8　除材X軸 ﾒﾝﾃﾅﾝｽ位置
LDP @MR305               ; 除材X軸 位置決め
AND= DM54 #8             ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
BMOV FM11700 DM11300 #16 ; TP除材X軸 ﾒﾝﾃ位置 動作ﾓｰﾄﾞ  除材X軸 動作ﾓｰﾄﾞ
MPS
LDA.D FM11716            ; TP除材X軸 ﾒﾝﾃ位置 速度
CON
MUL.D #1000
CON
STA.D DM11316            ; 除材X軸 速度
MPP
BMOV FM11718 DM11318 #10 ; TP除材X軸 ﾒﾝﾃ位置 加速時間  除材X軸 加速時間
;P9　除材X軸 画像基準位置
LDP @MR305               ; 除材X軸 位置決め
AND= DM54 #9             ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
BMOV FM11800 DM11300 #16 ; TP除材X軸 画像基準 動作ﾓｰﾄﾞ  除材X軸 動作ﾓｰﾄﾞ
MPS
LDA.D FM11816            ; TP除材X軸 画像基準 速度
CON
MUL.D #1000
CON
STA.D DM11316            ; 除材X軸 速度
MPP
BMOV FM11818 DM11318 #10 ; TP除材X軸 画像基準 加速時間  除材X軸 加速時間
;P10　除材X軸 ﾊﾟﾚｯﾄ1基準位置
LDP @MR305               ; 除材X軸 位置決め
AND= DM54 #10            ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
BMOV FM11900 DM11300 #16 ; TP除材X軸 ﾊﾟﾚｯﾄ1基準 動作ﾓｰﾄﾞ  除材X軸 動作ﾓｰﾄﾞ
MPS
LDA.D FM11916            ; TP除材X軸 ﾊﾟﾚｯﾄ1基準 速度
CON
MUL.D #1000
CON
STA.D DM11316            ; 除材X軸 速度
MPP
BMOV FM11918 DM11318 #10 ; TP除材X軸 ﾊﾟﾚｯﾄ1基準 加速時間  除材X軸 加速時間
;P11　除材X軸 ﾊﾟﾚｯﾄ2基準位置
LDP @MR305               ; 除材X軸 位置決め
AND= DM54 #11            ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
BMOV FM11940 DM11300 #16 ; TP除材X軸 ﾊﾟﾚｯﾄ2基準 動作ﾓｰﾄﾞ  除材X軸 動作ﾓｰﾄﾞ
MPS
LDA.D FM11956            ; TP除材X軸 ﾊﾟﾚｯﾄ2基準 速度
CON
MUL.D #1000
CON
STA.D DM11316            ; 除材X軸 速度
MPP
BMOV FM11958 DM11318 #10 ; TP除材X軸 ﾊﾟﾚｯﾄ2基準 加速時間  除材X軸 加速時間
LDP @MR305               ; 除材X軸 位置決め
MCALL KE_ML_PDAT #4 DM54 #1 DM11300;除材X軸 ﾎﾟｼﾞｼｮﾝNo  除材X軸 動作ﾓｰﾄﾞ
;<h1/>位置決め出力
LD @MR305                ; 除材X軸 位置決め
ANB T121                 ; 除材X軸ﾏｸﾛﾀﾞﾝﾏﾘ対策
MPS
OUT MR11300              ; ﾏｸﾛPOS 除材X軸 位置決め起動
MPP
ANB MR11308              ; ﾏｸﾛPOS 除材X軸 位置決め 移動中
TMS #121 #100            ; 除材X軸ﾏｸﾛﾀﾞﾝﾏﾘ対策
LD MR004                 ; ﾘｾｯﾄSW
OUT MR11303              ; ﾏｸﾛPOS 除材X軸 位置決めﾘｾｯﾄSW
LD CR2002                ; 常時ON
MSTRT KE_ML_POS #4 #1 MR11300 DM19030;ﾏｸﾛPOS 除材X軸 位置決め起動  除材X軸 ｴﾗｰ状態
LD MR11313               ; ﾏｸﾛPOS 除材X軸 位置決め制御開始
OUT R60108               ; 軸4 位置決め 制御開始
LD MR11314               ; ﾏｸﾛPOS 除材X軸 位置決め完了ｸﾘｱ
OUT R60110               ; 軸4 位置決め 完了ｸﾘｱ
;ﾗﾝﾌﾟ
LD MR11308               ; ﾏｸﾛPOS 除材X軸 位置決め 移動中
AND= DM54 #1             ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR MR6101                ; 除材X軸 待機位置
OUT B0401                ; 除材X軸 待機位置PL
LD MR11308               ; ﾏｸﾛPOS 除材X軸 位置決め 移動中
AND= DM54 #2             ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR MR6102                ; 除材X軸 除材反転 取出位置
OUT B0402                ; 除材X軸 除材反転 取出位置PL
LD MR11308               ; ﾏｸﾛPOS 除材X軸 位置決め 移動中
AND= DM54 #3             ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR MR6103                ; 除材X軸 吸着確認位置
OUT B0403                ; 除材X軸 吸着確認 位置PL
LD MR11308               ; ﾏｸﾛPOS 除材X軸 位置決め 移動中
AND= DM54 #4             ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR MR6104                ; 除材X軸 ﾊﾟﾚｯﾄ置位置
OUT B0404                ; 除材X軸 ﾊﾟﾚｯﾄ置 位置PL
LD MR11308               ; ﾏｸﾛPOS 除材X軸 位置決め 移動中
AND= DM54 #5             ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR MR6105                ; 除材X軸 NG排出位置
OUT B0405                ; 除材X軸 NG位置PL
LD MR11308               ; ﾏｸﾛPOS 除材X軸 位置決め 移動中
AND= DM54 #8             ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR MR6108                ; 除材X軸 ﾒﾝﾃﾅﾝｽ位置
OUT B0408                ; 除材X軸 ﾒﾝﾃﾅﾝｽ位置PL
LD MR11308               ; ﾏｸﾛPOS 除材X軸 位置決め 移動中
AND= DM54 #9             ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR MR6109                ; 除材X軸 画像基準位置
OUT B0409                ; 除材X軸 画像基準 位置PL
LD MR11308               ; ﾏｸﾛPOS 除材X軸 位置決め 移動中
AND= DM54 #10            ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR MR6110                ; 除材X軸 ﾊﾟﾚｯﾄ1 基準位置
OUT B040E                ; 除材X軸 ﾊﾟﾚｯﾄ1基準 位置PL
LD MR11308               ; ﾏｸﾛPOS 除材X軸 位置決め 移動中
AND= DM54 #11            ; 除材X軸 ﾎﾟｼﾞｼｮﾝNo
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR MR6111                ; 除材X軸 ﾊﾟﾚｯﾄ2 基準位置
OUT B040F                ; 除材X軸 ﾊﾟﾚｯﾄ2基準 位置PL
;<h1/>位置出力
;軸現在位置が目標位置の±15μm以内で出力
;※位置決範囲を狭くすると出力がﾁｬﾀﾘﾝｸﾞして関係する軸のI/Lが動作するので注意!
;'X軸位置表示
;FM60.L = DM60470.L					'現在値
;DM470.L = DM60470.L + 15	'位置決め判定上限
;DM472.L = DM60470.L - 15	'位置決め判定下限
LD CR2002                ; 常時ON
NCJ #1003
;'X軸位置表示
;
;FM60.L = DM60470.L					'現在値
;
LD CR2002                ; 常時ON
MOV.L DM60470 FM60       ; 軸4 現在座標  除材X軸 現在値表示
;DM470.L = DM60470.L + 15	'位置決め判定上限
;
LD CR2002                ; 常時ON
LDA.L DM60470            ; 軸4 現在座標
CON
ADD.L +15
CON
STA.L DM470              ; 除材X軸 位置決+限
;DM472.L = DM60470.L - 15	'位置決め判定下限
LD CR2002                ; 常時ON
LDA.L DM60470            ; 軸4 現在座標
CON
SUB.L +15
CON
STA.L DM472              ; 除材X軸 位置決-限
LABEL #1003
;
LD MR6112                ; 除材X軸 原点復帰記憶
ANB @MR305               ; 除材X軸 位置決め
ANB MR11308              ; ﾏｸﾛPOS 除材X軸 位置決め 移動中
MPS
LD>=.L +15 FM60          ; 除材X軸 現在値表示
AND<=.L -15 FM60         ; 除材X軸 現在値表示
ANL
OUT MR6100               ; 除材X軸 原点位置
MRD
LD>=.L DM470 FM11004     ; 除材X軸 位置決+限  TP除材X軸 待機位置 目標座標
AND<=.L DM472 FM11004    ; 除材X軸 位置決-限  TP除材X軸 待機位置 目標座標
ANL
OUT MR6101               ; 除材X軸 待機位置
MRD
LD>=.L DM470 FM11104     ; 除材X軸 位置決+限  TP除材X軸 取出位置 目標座標
AND<=.L DM472 FM11104    ; 除材X軸 位置決-限  TP除材X軸 取出位置 目標座標
ANL
OUT MR6102               ; 除材X軸 除材反転 取出位置
MRD
LD>=.L DM470 FM11204     ; 除材X軸 位置決+限  TP除材X軸 吸着確認 目標座標
AND<=.L DM472 FM11204    ; 除材X軸 位置決-限  TP除材X軸 吸着確認 目標座標
ANL
OUT MR6103               ; 除材X軸 吸着確認位置
MRD
LD>=.L DM470 FM11304     ; 除材X軸 位置決+限  TP除材X軸 ﾊﾟﾚｯﾄ置 目標座標
AND<=.L DM472 FM11304    ; 除材X軸 位置決-限  TP除材X軸 ﾊﾟﾚｯﾄ置 目標座標
ANL
OUT MR6104               ; 除材X軸 ﾊﾟﾚｯﾄ置位置
MRD
LD>=.L DM470 FM11404     ; 除材X軸 位置決+限  TP除材X軸 排出位置 目標座標
AND<=.L DM472 FM11404    ; 除材X軸 位置決-限  TP除材X軸 排出位置 目標座標
ANL
OUT MR6105               ; 除材X軸 NG排出位置
MRD
LD>=.L DM470 FM11704     ; 除材X軸 位置決+限  TP除材X軸 ﾒﾝﾃ位置 目標座標
AND<=.L DM472 FM11704    ; 除材X軸 位置決-限  TP除材X軸 ﾒﾝﾃ位置 目標座標
ANL
OUT MR6108               ; 除材X軸 ﾒﾝﾃﾅﾝｽ位置
MRD
LD>=.L DM470 FM11804     ; 除材X軸 位置決+限  TP除材X軸 画像基準 目標座標
AND<=.L DM472 FM11804    ; 除材X軸 位置決-限  TP除材X軸 画像基準 目標座標
ANL
OUT MR6109               ; 除材X軸 画像基準位置
MRD
LD>=.L DM470 FM11904     ; 除材X軸 位置決+限  TP除材X軸 ﾊﾟﾚｯﾄ1基準 目標座標
AND<=.L DM472 FM11904    ; 除材X軸 位置決-限  TP除材X軸 ﾊﾟﾚｯﾄ1基準 目標座標
ANL
OUT MR6110               ; 除材X軸 ﾊﾟﾚｯﾄ1 基準位置
MPP
LD>=.L DM470 FM11944     ; 除材X軸 位置決+限  TP除材X軸 ﾊﾟﾚｯﾄ2基準 目標座標
AND<=.L DM472 FM11944    ; 除材X軸 位置決-限  TP除材X軸 ﾊﾟﾚｯﾄ2基準 目標座標
ANL
OUT MR6111               ; 除材X軸 ﾊﾟﾚｯﾄ2 基準位置
;<h1/>JOG移動
LD B030A                 ; 除材X軸 JOG正転SW
OUT @MR500               ; 手動 X軸JOG運転正転
LD B030B                 ; 除材X軸 JOG逆転SW
OUT @MR501               ; 手動 X軸JOG運転逆転
;ｲﾝﾀｰﾛｯｸ
LD MR803                 ; 除材X軸 動作可能
LD MR6500                ; 除材Z軸 原点位置
OR MR6501                ; 除材Z軸 待機位置
OR B041A                 ; 除材X軸 JOG倍率0.1PL
ANL
ANB MR7100               ; ERR10 除材X軸ﾄﾞﾗｲﾊﾞｰ異常
ANB MR7101               ; ERR11 除材X軸軸ｴﾗｰ
AND MR400                ; 全ﾄﾞｱ閉確認
OUT MR12302              ; ﾏｸﾛ 除材X軸 JOG動作IL
;X軸JOG運転
LD @MR500                ; 手動 X軸JOG運転正転
AND MR100                ; 手動ﾓｰﾄﾞ
AND MR12302              ; ﾏｸﾛ 除材X軸 JOG動作IL
ANB MR12310              ; ﾏｸﾛ 除材X軸 JOG動作異常
OUT @MR505               ; 出.X軸JOG運転正転
LD @MR501                ; 手動 X軸JOG運転逆転
AND MR100                ; 手動ﾓｰﾄﾞ
AND MR12302              ; ﾏｸﾛ 除材X軸 JOG動作IL
ANB MR12310              ; ﾏｸﾛ 除材X軸 JOG動作異常
OUT @MR506               ; 出.X軸JOG運転逆転
;X軸JOG速度倍率設定
LD CR2002                ; 常時ON
MSTRT JOG_倍率 B031A B041A DM10460;除材X軸 JOG倍率0.1SW  除材X軸 JOG倍率0.1PL  除材X軸 JOG倍率DATA
;動作ﾃﾞｰﾀ転送
LD @MR505                ; 出.X軸JOG運転正転
OR @MR506                ; 出.X軸JOG運転逆転
MPS
LDA.D #100
CON
MUL.D DM10460            ; 除材X軸 JOG倍率DATA
CON
STA.D DM10418            ; 除材X軸 JOG高速速度
MPP
UWRIT #1 #14318 DM10418 #2;除材X軸 JOG高速速度
;出力
LD @MR505                ; 出.X軸JOG運転正転
OUT MR12300              ; ﾏｸﾛ 除材X軸 JOG起動＋
LD @MR506                ; 出.X軸JOG運転逆転
OUT MR12301              ; ﾏｸﾛ 除材X軸 JOG起動−
LD MR004                 ; ﾘｾｯﾄSW
OUT MR12303              ; ﾏｸﾛ 除材X軸 JOG動作 ﾘｾｯﾄSW
LD CR2002                ; 常時ON
MSTRT KE_ML_JOG #4 #1 MR12300 DM19030;ﾏｸﾛ 除材X軸 JOG起動＋  除材X軸 ｴﾗｰ状態
LD MR12312               ; ﾏｸﾛJOG 除材X軸 JOG正方向
OUT R66500               ; 軸4 JOG正方向
LD MR12313               ; ﾏｸﾛJOG 除材X軸 JOG負方向
OUT R66501               ; 軸4 JOG負方向
LD MR12312               ; ﾏｸﾛJOG 除材X軸 JOG正方向
OR MR12313               ; ﾏｸﾛJOG 除材X軸 JOG負方向
OUT R66502               ; 軸4 高速JOG
;ﾗﾝﾌﾟ
LD MR12308               ; ﾏｸﾛ 除材X軸 JOG＋運転中
OUT B040A                ; 除材X軸 JOG正転PL
LD MR12309               ; ﾏｸﾛ 除材X軸 JOG−運転中
OUT B040B                ; 除材X軸 JOG逆転PL
;<h1/>DATA_SET
LD B03E1                 ; 除材 待機位置 SET_SW
AND MR100                ; 手動ﾓｰﾄﾞ
MOV.L FM60 FM11004       ; 除材X軸 現在値表示  TP除材X軸 待機位置 目標座標
LD B03E3                 ; 除材 吸着確認 位置SET_SW
AND MR100                ; 手動ﾓｰﾄﾞ
MOV.L FM60 FM11240       ; 除材X軸 現在値表示  TP除材X軸 吸着確認 補正前座標
LD B03E5                 ; 除材 NG排出位置 SET_SW
AND MR100                ; 手動ﾓｰﾄﾞ
MOV.L FM60 FM11404       ; 除材X軸 現在値表示  TP除材X軸 排出位置 目標座標
LD B03E8                 ; 除材 ﾒﾝﾃﾅﾝｽ位置 SET_SW
AND MR100                ; 手動ﾓｰﾄﾞ
MOV.L FM60 FM11704       ; 除材X軸 現在値表示  TP除材X軸 ﾒﾝﾃ位置 目標座標
LD B03E9                 ; 除材反転 画像基準 位置SET_SW
AND MR100                ; 手動ﾓｰﾄﾞ
MOV.L FM60 FM11804       ; 除材X軸 現在値表示  TP除材X軸 画像基準 目標座標
LD B03EA                 ; 除材 ﾊﾟﾚｯﾄ1 基準位置 SET_SW
AND MR100                ; 手動ﾓｰﾄﾞ
MOV.L FM60 FM11904       ; 除材X軸 現在値表示  TP除材X軸 ﾊﾟﾚｯﾄ1基準 目標座標
LD B03EB                 ; 除材 ﾊﾟﾚｯﾄ2 基準位置 SET_SW
AND MR100                ; 手動ﾓｰﾄﾞ
MOV.L FM60 FM11944       ; 除材X軸 現在値表示  TP除材X軸 ﾊﾟﾚｯﾄ2基準 目標座標
;<h1/>ｴﾗｰ出力
LD MR10310               ; ﾏｸﾛHP 除材X軸 原点復帰異常
OR MR11310               ; ﾏｸﾛPOS 除材X軸 位置決め異常
OR MR12310               ; ﾏｸﾛ 除材X軸 JOG動作異常
MPS
AND DM19030.0
OUT MR7100               ; ERR10 除材X軸ﾄﾞﾗｲﾊﾞｰ異常
MPP
AND DM19030.1
OUT MR7101               ; ERR11 除材X軸軸ｴﾗｰ
LD MR10311               ; ﾏｸﾛHP 除材X軸 ｴﾗｰｸﾘｱ
OR MR11311               ; ﾏｸﾛPOS 除材X軸 ｴﾗｰｸﾘｱ
OR MR12311               ; ﾏｸﾛJOG 除材X軸 ｴﾗｰｸﾘｱ
OUT R66400               ; 軸4 軸ｴﾗｰｸﾘｱ
LD MR10313               ; ﾏｸﾛHP 除材X軸 ﾄﾞﾗｲﾊﾞｱﾗｰﾑﾘｾｯﾄ
OR MR11312               ; ﾏｸﾛPOS 除材X軸 ﾄﾞﾗｲﾊﾞｱﾗｰﾑ ﾘｾｯﾄ
OR MR12314               ; ﾏｸﾛJOG 除材X軸 ﾄﾞﾗｲﾊﾞｱﾗｰﾑ ﾘｾｯﾄ
OUT R66705               ; 軸4 ﾄﾞﾗｲﾊﾞｱﾗｰﾑﾘｾｯﾄ
;<h1/>まとめ
LD MR7100                ; ERR10 除材X軸ﾄﾞﾗｲﾊﾞｰ異常
OR MR7101                ; ERR11 除材X軸軸ｴﾗｰ
OUT MR6113               ; 除材X軸 全異常
LD MR6101                ; 除材X軸 待機位置
OUT MR6114               ; 除材X軸 全原点
LDB MR10300              ; ﾏｸﾛHP 除材X軸 原点復帰起動
ANB MR10308              ; ﾏｸﾛHP 除材X軸 原点復帰中
ANB MR11300              ; ﾏｸﾛPOS 除材X軸 位置決め起動
ANB MR11308              ; ﾏｸﾛPOS 除材X軸 位置決め 移動中
ANB MR12300              ; ﾏｸﾛ 除材X軸 JOG起動＋
ANB MR12301              ; ﾏｸﾛ 除材X軸 JOG起動−
ANB MR12308              ; ﾏｸﾛ 除材X軸 JOG＋運転中
ANB MR12309              ; ﾏｸﾛ 除材X軸 JOG−運転中
OUT MR6115               ; 除材X軸 全停止
END
ENDH
