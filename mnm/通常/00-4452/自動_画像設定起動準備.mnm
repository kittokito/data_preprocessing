DEVICE:53
;MODULE:自動_画像設定起動準備
;MODULE_TYPE:0
LDB MR3200               ; 自動運転中
DW #0 DM3300             ; 給材搬送 ﾜｰｸ在荷
CON
DW #0 MR31000            ; 画像 設定切替 STEP00
CON
DW #0 MR31100            ; 給材搬送 準備STEP00
CON
DW #0 MR31200            ; 除材搬送 準備STEP00
CON
DW #0 MR31300            ; 検査部 準備STEP00
LDP MR3200               ; 自動運転中
AND= MR31000 #0          ; 画像 設定切替 STEP00
AND= MR31100 #0          ; 給材搬送 準備STEP00
AND= MR31200 #0          ; 除材搬送 準備STEP00
AND= MR31300 #0          ; 検査部 準備STEP00
SET MR31000              ; 画像 設定切替 STEP00
;<h1/>STEP先頭
STG MR31000              ; 画像 設定切替 STEP00
AND MR2600               ; 全画像 準備OK
AND MR2604               ; 全画像 Cmd_ready
JMP MR31001              ; 画像 設定切替 STEP01
STG MR31001              ; 画像 設定切替 STEP01
AND MR2900               ; 給材ｶﾒﾗ 設定No. 切替完了
AND MR2901               ; 除材ｶﾒﾗ 設定No. 切替完了
AND MR2902               ; 検査ｶﾒﾗ 設定No. 切替完了
JMP MR31002              ; 画像 設定切替 STEP02
STG MR31002              ; 画像 設定切替 STEP02
ANB MR2900               ; 給材ｶﾒﾗ 設定No. 切替完了
ANB MR2901               ; 除材ｶﾒﾗ 設定No. 切替完了
ANB MR2902               ; 検査ｶﾒﾗ 設定No. 切替完了
AND MR2600               ; 全画像 準備OK
AND MR2604               ; 全画像 Cmd_ready
JMP MR31003              ; 画像 設定切替 STEP03
STG MR31003              ; 画像 設定切替 STEP03
AND MR2903               ; 給材ｶﾒﾗ 設定No. 読出完了
AND MR2904               ; 除材ｶﾒﾗ 設定No. 読出完了
AND MR2905               ; 検査ｶﾒﾗ 設定No. 読出完了
JMP MR31004              ; 画像 設定切替 STEP04
STG MR31004              ; 画像 設定切替 STEP04
ANB MR2903               ; 給材ｶﾒﾗ 設定No. 読出完了
ANB MR2904               ; 除材ｶﾒﾗ 設定No. 読出完了
ANB MR2905               ; 検査ｶﾒﾗ 設定No. 読出完了
JMP MR31005              ; 画像 設定切替 STEP05
STG MR31005              ; 画像 設定切替 STEP05
AND= FM6010 FM9006       ; TP給材ｶﾒﾗ 設定読出No.  ﾜｰｸﾚｼﾋﾟ基本(画像登録No.)
AND= FM6012 FM9506       ; TP除材ｶﾒﾗ 設定読出No.  ﾜｰｸﾚｼﾋﾟ基本(画像登録No.)
AND= FM6014 FM9007       ; TP検査ｶﾒﾗ 設定読出No.  ﾜｰｸﾚｼﾋﾟ基本(ﾊﾟﾚｯﾄ登録No.)
JMP MR31006              ; 画像 設定切替 STEP06
STG MR31006              ; 画像 設定切替 STEP06
SET MR31100              ; 給材搬送 準備STEP00
CON
SET MR31200              ; 除材搬送 準備STEP00
CON
SET MR31300              ; 検査部 準備STEP00
CON
ENDS
;<h1/>給材搬送起動準備
STG MR31100              ; 給材搬送 準備STEP00
AND MR203                ; 自動歩進可
ANB MR113                ; ｽﾃｯﾌﾟPLS
MPS
AND R3900                ; 給材 真空吸着
JMP MR31101              ; 給材搬送 準備STEP01
MPP
ANB R3900                ; 給材 真空吸着
JMP MR31105              ; 給材搬送 準備STEP05
STG MR31101              ; 給材搬送 準備STEP01
AND MR203                ; 自動歩進可
ANB MR113                ; ｽﾃｯﾌﾟPLS
AND MR1501               ; 給材Z軸 待機位置
JMP MR31102              ; 給材搬送 準備STEP02
STG MR31102              ; 給材搬送 準備STEP02
AND MR203                ; 自動歩進可
ANB MR113                ; ｽﾃｯﾌﾟPLS
AND MR1105               ; 給材X軸 返却位置
AND MR1305               ; 給材Y軸 返却位置
AND MR1705               ; 給材θ軸 返却位置
JMP MR31103              ; 給材搬送 準備STEP03
STG MR31103              ; 給材搬送 準備STEP03
AND MR203                ; 自動歩進可
ANB MR113                ; ｽﾃｯﾌﾟPLS
AND MR1505               ; 給材Z軸 返却位置
JMP MR31104              ; 給材搬送 準備STEP04
STG MR31104              ; 給材搬送 準備STEP04
AND MR203                ; 自動歩進可
ANB MR113                ; ｽﾃｯﾌﾟPLS
ANB R3900                ; 給材 真空吸着
TMH #100 DM9002          ; 給材吸着解放ﾀｲﾏ  給材吸着解放ﾀｲﾏ
CON
AND T100                 ; 給材吸着解放ﾀｲﾏ
JMP MR31105              ; 給材搬送 準備STEP05
STG MR31105              ; 給材搬送 準備STEP05
AND MR203                ; 自動歩進可
ANB MR113                ; ｽﾃｯﾌﾟPLS
AND MR1501               ; 給材Z軸 待機位置
JMP MR31106              ; 給材搬送 準備STEP06
STG MR31106              ; 給材搬送 準備STEP06
AND MR203                ; 自動歩進可
ANB MR113                ; ｽﾃｯﾌﾟPLS
AND MR1101               ; 給材X軸 待機位置
AND MR1301               ; 給材Y軸 待機位置
AND MR1701               ; 給材θ軸 待機位置
JMP MR31107              ; 給材搬送 準備STEP07
STG MR31107              ; 給材搬送 準備STEP07
AND MR203                ; 自動歩進可
ANB MR113                ; ｽﾃｯﾌﾟPLS
DW #0 DM3300             ; 給材搬送 ﾜｰｸ在荷
CON
SET MR31600              ; 給材搬送 起動準備OK
CON
ENDS
;<h1/>除材搬送起動準備
STG MR31200              ; 除材搬送 準備STEP00
AND MR203                ; 自動歩進可
ANB MR113                ; ｽﾃｯﾌﾟPLS
MPS
AND R3908                ; 除材 真空吸着
JMP MR31201              ; 除材搬送 準備STEP01
MPP
ANB R3908                ; 除材 真空吸着
JMP MR31206              ; 除材搬送 準備STEP06
STG MR31201              ; 除材搬送 準備STEP01
AND MR203                ; 自動歩進可
ANB MR113                ; ｽﾃｯﾌﾟPLS
AND MR6501               ; 除材Z軸 待機位置
JMP MR31202              ; 除材搬送 準備STEP02
STG MR31202              ; 除材搬送 準備STEP02
AND MR203                ; 自動歩進可
ANB MR113                ; ｽﾃｯﾌﾟPLS
AND MR6105               ; 除材X軸 NG排出位置
AND MR6305               ; 除材Y軸 NG位置
AND MR6705               ; 除材θ軸 NG位置
JMP MR31203              ; 除材搬送 準備STEP03
STG MR31203              ; 除材搬送 準備STEP03
AND MR203                ; 自動歩進可
ANB MR113                ; ｽﾃｯﾌﾟPLS
AND MR6505               ; 除材Z軸 NG位置
JMP MR31204              ; 除材搬送 準備STEP04
STG MR31204              ; 除材搬送 準備STEP04
AND MR203                ; 自動歩進可
ANB MR113                ; ｽﾃｯﾌﾟPLS
ANB R3908                ; 除材 真空吸着
TMH #101 DM9012          ; 除材吸着解放ﾀｲﾏ  除材吸着解放ﾀｲﾏ
CON
AND T101                 ; 除材吸着解放ﾀｲﾏ
JMP MR31205              ; 除材搬送 準備STEP05
STG MR31205              ; 除材搬送 準備STEP05
AND MR203                ; 自動歩進可
ANB MR113                ; ｽﾃｯﾌﾟPLS
AND MR6501               ; 除材Z軸 待機位置
JMP MR31206              ; 除材搬送 準備STEP06
STG MR31206              ; 除材搬送 準備STEP06
AND MR203                ; 自動歩進可
ANB MR113                ; ｽﾃｯﾌﾟPLS
MPS
AND R3903                ; 除材反転 ﾜｰｸ吸着
JMP MR31207              ; 除材搬送 準備STEP07
MPP
ANB R3903                ; 除材反転 ﾜｰｸ吸着
JMP MR31211              ; 除材搬送 準備STEP11
STG MR31207              ; 除材搬送 準備STEP07
AND MR203                ; 自動歩進可
ANB MR113                ; ｽﾃｯﾌﾟPLS
AND MR6102               ; 除材X軸 除材反転 取出位置
AND MR6302               ; 除材Y軸 除材反転 取出位置
AND MR6702               ; 除材θ軸 除材反転 取出位置
JMP MR31208              ; 除材搬送 準備STEP08
STG MR31208              ; 除材搬送 準備STEP08
AND MR203                ; 自動歩進可
ANB MR113                ; ｽﾃｯﾌﾟPLS
AND MR6502               ; 除材Z軸 除材反転 取出位置
JMP MR31209              ; 除材搬送 準備STEP09
STG MR31209              ; 除材搬送 準備STEP09
AND MR203                ; 自動歩進可
ANB MR113                ; ｽﾃｯﾌﾟPLS
AND R3908                ; 除材 真空吸着
TMH #102 DM9010          ; 除材真空吸着ﾀｲﾏ  除材真空吸着ﾀｲﾏ
CON
AND T102                 ; 除材真空吸着ﾀｲﾏ
JMP MR31210              ; 除材搬送 準備STEP10
STG MR31210              ; 除材搬送 準備STEP10
AND MR203                ; 自動歩進可
ANB MR113                ; ｽﾃｯﾌﾟPLS
ANB R3903                ; 除材反転 ﾜｰｸ吸着
JMP MR31211              ; 除材搬送 準備STEP11
STG MR31211              ; 除材搬送 準備STEP11
AND MR203                ; 自動歩進可
ANB MR113                ; ｽﾃｯﾌﾟPLS
AND MR6501               ; 除材Z軸 待機位置
JMP MR31212              ; 除材搬送 準備STEP12
STG MR31212              ; 除材搬送 準備STEP12
AND MR203                ; 自動歩進可
ANB MR113                ; ｽﾃｯﾌﾟPLS
AND MR6101               ; 除材X軸 待機位置
AND MR6301               ; 除材Y軸 待機位置
AND MR6701               ; 除材θ軸 待機位置
JMP MR31213              ; 除材搬送 準備STEP13
STG MR31213              ; 除材搬送 準備STEP13
AND MR203                ; 自動歩進可
ANB MR113                ; ｽﾃｯﾌﾟPLS
DW #0 DM3600             ; 除材反転 ﾜｰｸ在荷
CON
DW #0 DM3700             ; 除材搬送 ﾜｰｸ在荷
CON
SET MR31602              ; 除材搬送 起動準備OK
CON
ENDS
;<h1/>検査部起動準備
STG MR31300              ; 検査部 準備STEP00
AND MR203                ; 自動歩進可
ANB MR113                ; ｽﾃｯﾌﾟPLS
AND MR6905               ; 検査Z軸 待機位置
AND MR2607               ; 検査画像 Cmd_ready
DW #0 W326C              ; ﾜｰｸ 0:有 1:NG 2:無 XG[22](0224)
CON
JMP MR31301              ; 検査部 準備STEP01
STG MR31301              ; 検査部 準備STEP01
AND MR203                ; 自動歩進可
ANB MR113                ; ｽﾃｯﾌﾟPLS
AND MR2806               ; 検査ｶﾒﾗ ﾜｰｸ有無 検出完了
JMP MR31302              ; 検査部 準備STEP02
STG MR31302              ; 検査部 準備STEP02
AND MR203                ; 自動歩進可
ANB MR113                ; ｽﾃｯﾌﾟPLS
ANB MR2806               ; 検査ｶﾒﾗ ﾜｰｸ有無 検出完了
JMP MR31303              ; 検査部 準備STEP03
STG MR31303              ; 検査部 準備STEP03
AND MR203                ; 自動歩進可
ANB MR113                ; ｽﾃｯﾌﾟPLS
MPS
LD= W326C #0             ; ﾜｰｸ 0:有 1:NG 2:無 XG[22](0224)
OR= W326C #1             ; ﾜｰｸ 0:有 1:NG 2:無 XG[22](0224)
ANL
DW #0 DM68               ; 検査部残確認有無｢0:有 1:無｣
CON
JMP MR31304              ; 検査部 準備STEP04
MPP
AND= W326C #2            ; ﾜｰｸ 0:有 1:NG 2:無 XG[22](0224)
DW #1 DM68               ; 検査部残確認有無｢0:有 1:無｣
CON
JMP MR31306              ; 検査部 準備STEP06
STG MR31304              ; 検査部 準備STEP04
AND MR203                ; 自動歩進可
ANB MR113                ; ｽﾃｯﾌﾟPLS
AND MR31501              ; 準備時検査部ﾜｰｸ有､回収ﾌﾗｸﾞ
SET MR34100              ; ﾜｰｸ回収動作 STEP00
CON
JMP MR31305              ; 検査部 準備STEP05
STG MR31305              ; 検査部 準備STEP05
AND MR203                ; 自動歩進可
ANB MR113                ; ｽﾃｯﾌﾟPLS
AND= MR34100 #0          ; ﾜｰｸ回収動作 STEP00
AND= MR34200 #0          ; ﾜｰｸ回収動作 STEP16
ANB MR31501              ; 準備時検査部ﾜｰｸ有､回収ﾌﾗｸﾞ
JMP MR31306              ; 検査部 準備STEP06
STG MR31306              ; 検査部 準備STEP06
AND MR203                ; 自動歩進可
ANB MR113                ; ｽﾃｯﾌﾟPLS
AND MR36502              ; 給材搬送 検査位置 ﾜｰｸ投入可
JMP MR31307              ; 検査部 準備STEP07
STG MR31307              ; 検査部 準備STEP07
AND MR203                ; 自動歩進可
ANB MR113                ; ｽﾃｯﾌﾟPLS
AND= MR34100 #0          ; ﾜｰｸ回収動作 STEP00
DW #0 DM3500             ; 検査ﾜｰｸ在荷
CON
SET MR31604              ; 検査部 起動準備OK
CON
ENDS
LD MR31600               ; 給材搬送 起動準備OK
AND MR31602              ; 除材搬送 起動準備OK
AND MR31604              ; 検査部 起動準備OK
AND= MR31100 #0          ; 給材搬送 準備STEP00
AND= MR31200 #0          ; 除材搬送 準備STEP00
AND= MR31300 #0          ; 検査部 準備STEP00
SET MR31500              ; S盤 画像読取要求
LD MR32000               ; S盤画像読取 STEP00
ORB MR3200               ; 自動運転中
RES MR31500              ; S盤 画像読取要求
LD MR31500               ; S盤 画像読取要求
ORB MR3200               ; 自動運転中
RES MR31600              ; 給材搬送 起動準備OK
CON
RES MR31602              ; 除材搬送 起動準備OK
CON
RES MR31604              ; 検査部 起動準備OK
LD MR31304               ; 検査部 準備STEP04
OR MR31501               ; 準備時検査部ﾜｰｸ有､回収ﾌﾗｸﾞ
ANB MR34202              ; ﾜｰｸ回収動作 STEP18
AND MR3200               ; 自動運転中
OUT MR31501              ; 準備時検査部ﾜｰｸ有､回収ﾌﾗｸﾞ
END
ENDH
