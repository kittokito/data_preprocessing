DEVICE:53
;MODULE:画像処理
;MODULE_TYPE:0
;SCRIPT_TYPE:
;<h1/>画像単位変換
LD CR2002                ; 常時ON
LIMIT.L +1 +9999999 FM9210 FM9210;給材ｶﾒﾗ 画像単位変換係数  給材ｶﾒﾗ 画像単位変換係数
LD CR2002                ; 常時ON
LIMIT.L +1 +9999999 FM9212 FM9212;除材ｶﾒﾗ 画像単位変換係数  除材ｶﾒﾗ 画像単位変換係数
LD CR2002                ; 常時ON
LIMIT.L +1 +9999999 FM9214 FM9214;給材下ｶﾒﾗ 画像単位変換係数  給材下ｶﾒﾗ 画像単位変換係数
LD CR2002                ; 常時ON
LIMIT.L +1 +9999999 FM9216 FM9216;除材下ｶﾒﾗ 画像単位変換係数  除材下ｶﾒﾗ 画像単位変換係数
;ｽﾌﾟﾚｯﾄﾞ盤 座標変換
;'画像処理出力ﾃﾞｰﾀ取込
;
;DM1000.L = W3038.L * 10000 / FM9210.L		'Ｘ軸
;DM1010.L = W303A.L * 10000 / FM9210.L * -1 	'Ｙ軸
;DM1020.L = W303C.L / 10						'θ軸
LD= W303E #2             ; XG-8000/7000[20]InDat(0132)
NCJ #1003
;'画像処理出力ﾃﾞｰﾀ取込
;
;DM1000.L = W3038.L * 10000 / FM9210.L		'Ｘ軸
;
LD CR2002                ; 常時ON
LDA.L W3038              ; XG-8000/7000[20]InDat(0120)
CON
MUL.L +10000
CON
DIV.L FM9210             ; 給材ｶﾒﾗ 画像単位変換係数
CON
STA.L DM1000             ; 画像給材X軸 S盤ﾜｰｸ取出し座標
;DM1010.L = W303A.L * 10000 / FM9210.L * -1 	'Ｙ軸
;
LD CR2002                ; 常時ON
LDA.L W303A              ; XG-8000/7000[20]InDat(0124)
CON
MUL.L +10000
CON
DIV.L FM9210             ; 給材ｶﾒﾗ 画像単位変換係数
CON
MUL.L -1
CON
STA.L DM1010             ; 画像給材Y軸 S盤ﾜｰｸ取出し座標
;DM1020.L = W303C.L / 10						'θ軸
LD CR2002                ; 常時ON
LDA.L W303C              ; XG-8000/7000[20]InDat(0128)
CON
EXT.L
CON
DIV.L +10
CON
STA.L DM1020             ; 画像給材θ軸 S盤ﾜｰｸ取出し座標
LABEL #1003
;
;'判定結果NGの場合ﾘｾｯﾄ
;
;DM1000.L = 0								'Ｘ軸
;DM1010.L = 0								'Ｙ軸
;DM1020.L = 0								'θ軸
LD= W303E #1             ; XG-8000/7000[20]InDat(0132)
NCJ #1005
;'判定結果NGの場合ﾘｾｯﾄ
;
;DM1000.L = 0								'Ｘ軸
;
LD CR2002                ; 常時ON
MOV.L +0 DM1000          ; 画像給材X軸 S盤ﾜｰｸ取出し座標
;DM1010.L = 0								'Ｙ軸
;
LD CR2002                ; 常時ON
MOV.L +0 DM1010          ; 画像給材Y軸 S盤ﾜｰｸ取出し座標
;DM1020.L = 0								'θ軸
LD CR2002                ; 常時ON
MOV.L +0 DM1020          ; 画像給材θ軸 S盤ﾜｰｸ取出し座標
LABEL #1005
;
;給材吸着確認 座標変換
;'下ｶﾒﾗ画像処理出力ﾃﾞｰﾀ取込
;
;DM1100.L = W3042.L / 10						'θ軸
;DM1110.L = W3044.L * 10000 / FM9214.L * -1	'Ｙ軸
LD= W3040 #2             ; 給材ｶﾒﾗ 吸着確認 2:OK1:NG [20](0
NCJ #1000
;'下ｶﾒﾗ画像処理出力ﾃﾞｰﾀ取込
;
;DM1100.L = W3042.L / 10						'θ軸
;
LD CR2002                ; 常時ON
LDA.L W3042              ; 給材ｶﾒﾗθ [20](0140)
CON
EXT.L
CON
DIV.L +10
CON
STA.L DM1100             ; 画像給材θ軸 吸着確認座標
;DM1110.L = W3044.L * 10000 / FM9214.L * -1	'Ｙ軸
LD CR2002                ; 常時ON
LDA.L W3044              ; 給材ｶﾒﾗY [20]InDat(0144)
CON
MUL.L +10000
CON
DIV.L FM9214             ; 給材下ｶﾒﾗ 画像単位変換係数
CON
MUL.L -1
CON
STA.L DM1110             ; 画像給材Y軸 吸着確認座標
LABEL #1000
;
;'判定結果NGの場合ﾘｾｯﾄ
;
;DM1100.L = 0								'Ｘ軸
;DM1110.L = 0								'Ｙ軸
LD= W3040 #1             ; 給材ｶﾒﾗ 吸着確認 2:OK1:NG [20](0
NCJ #1009
;'判定結果NGの場合ﾘｾｯﾄ
;
;DM1100.L = 0								'Ｘ軸
;
LD CR2002                ; 常時ON
MOV.L +0 DM1100          ; 画像給材θ軸 吸着確認座標
;DM1110.L = 0								'Ｙ軸
LD CR2002                ; 常時ON
MOV.L +0 DM1110          ; 画像給材Y軸 吸着確認座標
LABEL #1009
;
;除材反転 座標変換
;'画像処理出力ﾃﾞｰﾀ取込
;
;DM1200.L = W3138.L * 10000 / FM9212.L   	'Ｘ軸
;DM1210.L = W313A.L * 10000 / FM9212.L * -1 	'Ｙ軸
;DM1220.L = W313C.L / 10						'θ軸
LD= W313E #2             ; XG-8000/7000[21]InDat(0132)
NCJ #1001
;'画像処理出力ﾃﾞｰﾀ取込
;
;DM1200.L = W3138.L * 10000 / FM9212.L   	'Ｘ軸
;
LD CR2002                ; 常時ON
LDA.L W3138              ; XG-8000/7000[21]InDat(0120)
CON
MUL.L +10000
CON
DIV.L FM9212             ; 除材ｶﾒﾗ 画像単位変換係数
CON
STA.L DM1200             ; 画像除材X軸 除材反転取出座標
;DM1210.L = W313A.L * 10000 / FM9212.L * -1 	'Ｙ軸
;
LD CR2002                ; 常時ON
LDA.L W313A              ; XG-8000/7000[21]InDat(0124)
CON
MUL.L +10000
CON
DIV.L FM9212             ; 除材ｶﾒﾗ 画像単位変換係数
CON
MUL.L -1
CON
STA.L DM1210             ; 画像除材Y軸 除材反転取出座標
;DM1220.L = W313C.L / 10						'θ軸
LD CR2002                ; 常時ON
LDA.L W313C              ; XG-8000/7000[21]InDat(0128)
CON
EXT.L
CON
DIV.L +10
CON
STA.L DM1220             ; 画像除材Z軸 除材反転取出座標
LABEL #1001
;
;'判定結果NGの場合ﾘｾｯﾄ
;
;DM1200.L = 0								'Ｘ軸
;DM1210.L = 0								'Ｙ軸
;DM1220.L = 0								'θ軸
LD= W313E #1             ; XG-8000/7000[21]InDat(0132)
NCJ #1002
;'判定結果NGの場合ﾘｾｯﾄ
;
;DM1200.L = 0								'Ｘ軸
;
LD CR2002                ; 常時ON
MOV.L +0 DM1200          ; 画像除材X軸 除材反転取出座標
;DM1210.L = 0								'Ｙ軸
;
LD CR2002                ; 常時ON
MOV.L +0 DM1210          ; 画像除材Y軸 除材反転取出座標
;DM1220.L = 0								'θ軸
LD CR2002                ; 常時ON
MOV.L +0 DM1220          ; 画像除材Z軸 除材反転取出座標
LABEL #1002
;
;除材吸着確認 座標変換
;'下ｶﾒﾗ画像処理出力ﾃﾞｰﾀ取込
;
;DM1300.L = W3142.L / 10						'θ軸
;DM1310.L = W3144.L * 10000 / FM9216.L   	'Ｙ軸
LD= W3140 #2             ; XG-8000/7000[21]InDat(0136)
NCJ #1004
;'下ｶﾒﾗ画像処理出力ﾃﾞｰﾀ取込
;
;DM1300.L = W3142.L / 10						'θ軸
;
LD CR2002                ; 常時ON
LDA.L W3142              ; XG-8000/7000[21]InDat(0140)
CON
EXT.L
CON
DIV.L +10
CON
STA.L DM1300             ; 画像除材θ軸 吸着確認座標
;DM1310.L = W3144.L * 10000 / FM9216.L   	'Ｙ軸
LD CR2002                ; 常時ON
LDA.L W3144              ; XG-8000/7000[21]InDat(0144)
CON
MUL.L +10000
CON
DIV.L FM9216             ; 除材下ｶﾒﾗ 画像単位変換係数
CON
STA.L DM1310             ; 画像除材Y軸 吸着確認座標
LABEL #1004
;
;'判定結果NGの場合ﾘｾｯﾄ
;
;DM1300.L = 0								'Ｘ軸
;DM1310.L = 0								'Ｙ軸
LD= W3140 #1             ; XG-8000/7000[21]InDat(0136)
NCJ #1006
;'判定結果NGの場合ﾘｾｯﾄ
;
;DM1300.L = 0								'Ｘ軸
;
LD CR2002                ; 常時ON
MOV.L +0 DM1300          ; 画像除材θ軸 吸着確認座標
;DM1310.L = 0								'Ｙ軸
LD CR2002                ; 常時ON
MOV.L +0 DM1310          ; 画像除材Y軸 吸着確認座標
LABEL #1006
;
;<h1/>画像判定結果表示
;給材判定
LD= W303E #2             ; XG-8000/7000[20]InDat(0132)
OUT B02A0                ; 給材ｶﾒﾗ S盤座標読取 判定OK_PL
LD= W3040 #2             ; 給材ｶﾒﾗ 吸着確認 2:OK1:NG [20](0
OUT B02A1                ; 給材ｶﾒﾗ 吸着確認 判定OK_PL
LD= W3046 #2             ; XG-8000/7000[20]InDat(0148)
OUT B02A2                ; 給材ｶﾒﾗ S盤濃淡 判定OK_PL
;除材判定
LD= W313E #2             ; XG-8000/7000[21]InDat(0132)
OUT B02A3                ; 除材ｶﾒﾗ 除材反 座標読取 判定OK_P
LD= W3140 #2             ; XG-8000/7000[21]InDat(0136)
OUT B02A4                ; 除材ｶﾒﾗ 吸着確認 判定OK_PL
;除材判定
LD= W3238 #0             ; 先端1 検査判定 XG[22](0120)
OUT B02A6                ; 検査ｶﾒﾗ 先頭1検出 OK_PL
LD= W3242 #0             ; 先端2 検査判定 XG[22](0140)
OUT B02A7                ; 検査ｶﾒﾗ 先頭2検出 OK_PL
LD= W324C #0             ; 直線 検査判定 XG[22](0160)
OUT B02A8                ; 検査ｶﾒﾗ 直線部検出 OK_PL
LD= W3250 #0             ; ﾊﾞﾈ開始 検査判定 XG[22](0168)
OUT B02A9                ; 検査ｶﾒﾗ ﾊﾞﾈ開始部 検出OK_PL
LD= W3256 #2             ; ﾊﾞﾈ終了 検査判定 XG[22](0180)
OUT B02AA                ; 検査ｶﾒﾗ ﾊﾞﾈ終了部 検出OK_PL
LD= W325C #0             ; ﾊﾞﾈ 検査判定 XG[22](0192)
OUT B02AB                ; 検査ｶﾒﾗ ﾊﾞﾈ部検出 OK_PL
LD= W326C #0             ; ﾜｰｸ 0:有 1:NG 2:無 XG[22](0224)
OUT B02AC                ; 検査ｶﾒﾗ ﾜｰｸ有無検出 OK_PL
;<h1/>画像状態確認
LD CR2002                ; 常時ON
MPS
LD MR2601                ; 給材画像 準備OK
AND MR2602               ; 除材画像 準備OK
AND MR2603               ; 検査画像 準備OK
ANL
OUT MR2600               ; 全画像 準備OK
MRD
LD B301B                 ; XG-8000/7000[20]Remote ready
AND R3003                ; 給材 画像処理RUN
ANL
OUT MR2601               ; 給材画像 準備OK
MRD
LD B311B                 ; XG-8000/7000[21]Remote ready
AND R3403                ; 除材 画像処理RUN
ANL
OUT MR2602               ; 除材画像 準備OK
MPP
LD B321B                 ; XG-8000/7000[22]Remote ready
AND R3103                ; 検査 画像処理RUN
ANL
OUT MR2603               ; 検査画像 準備OK
LD CR2002                ; 常時ON
MPS
LD MR2605                ; 給材画像 Cmd_ready
AND MR2606               ; 除材画像 Cmd_ready
AND MR2607               ; 検査画像 Cmd_ready
ANL
OUT MR2604               ; 全画像 Cmd_ready
MRD
LD B3002                 ; XG-8000/7000[20]Cmd ready
AND B3008                ; XG-8000/7000[20]READY1
ANB B3018                ; XG-8000/7000[20]BUSY
ANL
OUT MR2605               ; 給材画像 Cmd_ready
MRD
LD B3102                 ; XG-8000/7000[21]Cmd ready
AND B3108                ; XG-8000/7000[21]READY1
ANB B3118                ; XG-8000/7000[21]BUSY
ANL
OUT MR2606               ; 除材画像 Cmd_ready
MPP
LD B3202                 ; XG-8000/7000[22]Cmd ready
AND B3208                ; XG-8000/7000[22]READY1
ANB B3218                ; XG-8000/7000[22]BUSY
ANL
OUT MR2607               ; 検査画像 Cmd_ready
;<h1/>給材ｶﾒﾗ S盤 座標読取
LDP B0A0                 ; 給材ｶﾒﾗ S盤 座標読取SW
ANB @MR000               ; 給材ｶﾒﾗ S盤 座標読取
AND MR2605               ; 給材画像 Cmd_ready
LDPB B0A0                ; 給材ｶﾒﾗ S盤 座標読取SW
AND @MR000               ; 給材ｶﾒﾗ S盤 座標読取
ORL
AND MR100                ; 手動ﾓｰﾄﾞ
ANB @MR002               ; 給材ｶﾒﾗ S盤 座標読取 動作完了
LD MR32001               ; S盤画像読取 STEP01
OR MR32005               ; S盤画像読取 STEP05
OR MR33001               ; 給材搬送 STEP01
AND MR3200               ; 自動運転中
ANB MR2700               ; 給材ｶﾒﾗ S盤 座標読取完了
ORL
AND MR2601               ; 給材画像 準備OK
MPS
OUT B01A0                ; PL.画像ﾄﾘｶﾞ出力CA1
CON
OUT @MR000               ; 給材ｶﾒﾗ S盤 座標読取
MPP
LD B3003                 ; XG-8000/7000[20]Result ready
OR @MR001                ; 給材ｶﾒﾗ S盤 座標読取 動作確認
ANL
OUT @MR001               ; 給材ｶﾒﾗ S盤 座標読取 動作確認
MPS
ANB B3003                ; XG-8000/7000[20]Result ready
OUT @MR002               ; 給材ｶﾒﾗ S盤 座標読取 動作完了
MPP
AND T50                  ; 給材座標確認ｶﾒﾗ結果ﾃﾞｨﾚｲ
TMS #50 #20              ; 給材座標確認ｶﾒﾗ結果ﾃﾞｨﾚｲ
LD @MR000                ; 給材ｶﾒﾗ S盤 座標読取
MOV.D #20 W3504          ; XG-8000/7000[20]OutDat(0016)
MOV.D #1 W3506           ; XG-8000/7000[20]OutDat(0020)
MOV.D #0 W3508           ; XG-8000/7000[20]OutDat(0024)
MOV.D #0 W350A           ; XG-8000/7000[20]OutDat(0028)
LD @MR002                ; 給材ｶﾒﾗ S盤 座標読取 動作完了
OR MR2700                ; 給材ｶﾒﾗ S盤 座標読取完了
AND MR3200               ; 自動運転中
ANB MR32002              ; S盤画像読取 STEP02
ANB MR32006              ; S盤画像読取 STEP06
ANB MR33002              ; 給材搬送 STEP02
OUT MR2700               ; 給材ｶﾒﾗ S盤 座標読取完了
;<h1/>給材ｶﾒﾗ 吸着確認
LDP B0A1                 ; 給材ｶﾒﾗ 吸着確認SW
ANB @MR004               ; 給材ｶﾒﾗ 吸着確認
AND MR2605               ; 給材画像 Cmd_ready
LDPB B0A1                ; 給材ｶﾒﾗ 吸着確認SW
AND @MR004               ; 給材ｶﾒﾗ 吸着確認
ORL
AND MR100                ; 手動ﾓｰﾄﾞ
LD MR33012               ; 給材搬送 STEP12
OR MR33100               ; 給材搬送 STEP16
AND MR3200               ; 自動運転中
ANB MR2701               ; 給材ｶﾒﾗ 吸着確認完了
ORL
AND MR2601               ; 給材画像 準備OK
ANB @MR006               ; 給材ｶﾒﾗ 吸着確認 動作完了
MPS
OUT B01A1                ; 画像設定No. 切替PL
CON
OUT @MR004               ; 給材ｶﾒﾗ 吸着確認
MPP
LD B3003                 ; XG-8000/7000[20]Result ready
OR @MR005                ; 給材ｶﾒﾗ 吸着確認 動作確認
ANL
OUT @MR005               ; 給材ｶﾒﾗ 吸着確認 動作確認
MPS
LDB B3003                ; XG-8000/7000[20]Result ready
ANB B3013                ; XG-8000/7000[20]TRGACK4
ANL
OUT @MR006               ; 給材ｶﾒﾗ 吸着確認 動作完了
MPP
AND T51                  ; 給材吸着確認ｶﾒﾗ結果ﾃﾞｨﾚｲ
TMS #51 #15              ; 給材吸着確認ｶﾒﾗ結果ﾃﾞｨﾚｲ
LD @MR004                ; 給材ｶﾒﾗ 吸着確認
MOV.D #20 W3504          ; XG-8000/7000[20]OutDat(0016)
MOV.D #0 W3506           ; XG-8000/7000[20]OutDat(0020)
MOV.D #1 W3508           ; XG-8000/7000[20]OutDat(0024)
MOV.D #0 W350A           ; XG-8000/7000[20]OutDat(0028)
LD @MR006                ; 給材ｶﾒﾗ 吸着確認 動作完了
OR MR2701                ; 給材ｶﾒﾗ 吸着確認完了
AND MR3200               ; 自動運転中
ANB MR33013              ; 給材搬送 STEP13
ANB MR33101              ; 給材搬送 STEP17
OUT MR2701               ; 給材ｶﾒﾗ 吸着確認完了
;<h1/>給材ｶﾒﾗ S盤 濃淡判定
LDP B0A2                 ; 給材ｶﾒﾗ S盤 濃淡判定SW
ANB @MR008               ; 給材ｶﾒﾗ S盤 濃淡判定
AND MR2605               ; 給材画像 Cmd_ready
LDPB B0A2                ; 給材ｶﾒﾗ S盤 濃淡判定SW
AND @MR008               ; 給材ｶﾒﾗ S盤 濃淡判定
ORL
AND MR100                ; 手動ﾓｰﾄﾞ
LD MR32008               ; S盤画像読取 STEP08
AND MR3200               ; 自動運転中
ORL
AND MR2601               ; 給材画像 準備OK
ANB @MR010               ; 給材ｶﾒﾗ S盤 濃淡判定 動作完了
MPS
OUT B01A2                ; 画像設定No.読出PL
CON
OUT @MR008               ; 給材ｶﾒﾗ S盤 濃淡判定
MPP
LD B3003                 ; XG-8000/7000[20]Result ready
OR @MR009                ; 給材ｶﾒﾗ S盤 濃淡判定 動作確認
ANL
OUT @MR009               ; 給材ｶﾒﾗ S盤 濃淡判定 動作確認
MPS
ANB B3003                ; XG-8000/7000[20]Result ready
OUT @MR010               ; 給材ｶﾒﾗ S盤 濃淡判定 動作完了
MPP
AND T52                  ; 給材濃淡検査ｶﾒﾗ結果ﾃﾞｨﾚｲ
TMS #52 #10              ; 給材濃淡検査ｶﾒﾗ結果ﾃﾞｨﾚｲ
LD @MR008                ; 給材ｶﾒﾗ S盤 濃淡判定
MOV.D #20 W3504          ; XG-8000/7000[20]OutDat(0016)
MOV.D #0 W3506           ; XG-8000/7000[20]OutDat(0020)
MOV.D #0 W3508           ; XG-8000/7000[20]OutDat(0024)
MOV.D #1 W350A           ; XG-8000/7000[20]OutDat(0028)
LD @MR010                ; 給材ｶﾒﾗ S盤 濃淡判定 動作完了
OR MR2702                ; 給材ｶﾒﾗ S盤 濃淡判定完了
AND MR3200               ; 自動運転中
ANB MR32009              ; S盤画像読取 STEP09
OUT MR2702               ; 給材ｶﾒﾗ S盤 濃淡判定完了
;<h1/>給材ｶﾒﾗ 画面切替
LDP MR3200               ; 自動運転中
AND MR2605               ; 給材画像 Cmd_ready
OR @MR012                ; 給材ｶﾒﾗ 画面切替
AND MR2601               ; 給材画像 準備OK
ANB @MR013               ; 給材ｶﾒﾗ 画面切替完了
MPS
OUT @MR012               ; 給材ｶﾒﾗ 画面切替
MPP
AND B3000                ; XG-8000/7000[20]Cmd complete
OUT @MR013               ; 給材ｶﾒﾗ 画面切替完了
LDP @MR012               ; 給材ｶﾒﾗ 画面切替
MOV.D #21 W3504          ; XG-8000/7000[20]OutDat(0016)
;<h1/>除材ｶﾒﾗ 除材反転 座標読取
LDP B0A3                 ; 除材ｶﾒﾗ 除材反転 座標読取SW
ANB @MR100               ; 除材ｶﾒﾗ 除材反転 座標読取
AND MR2606               ; 除材画像 Cmd_ready
LDPB B0A3                ; 除材ｶﾒﾗ 除材反転 座標読取SW
AND @MR100               ; 除材ｶﾒﾗ 除材反転 座標読取
ORL
AND MR100                ; 手動ﾓｰﾄﾞ
LD MR36014               ; 除材反転 STEP14
OR MR37003               ; 除材搬送 STEP03
OR MR37100               ; 除材搬送 STEP16
AND MR3200               ; 自動運転中
ANB MR2703               ; 除材ｶﾒﾗ 除材反転 読取完了
ORL
AND MR2602               ; 除材画像 準備OK
ANB @MR102               ; 除材ｶﾒﾗ 除材反転座標読取動作完了
MPS
OUT B01A3                ; PL.照明OFF
CON
OUT @MR100               ; 除材ｶﾒﾗ 除材反転 座標読取
MPP
LD B3103                 ; XG-8000/7000[21]Result ready
OR @MR101                ; 除材ｶﾒﾗ 除材反転座標読取動作確認
ANL
OUT @MR101               ; 除材ｶﾒﾗ 除材反転座標読取動作確認
;反転取出確認時のみﾃﾞｨﾚｲ動作追加
LD @MR101                ; 除材ｶﾒﾗ 除材反転座標読取動作確認
ANB B3103                ; XG-8000/7000[21]Result ready
ANB B3118                ; XG-8000/7000[21]BUSY
MPS
AND MR37100              ; 除材搬送 STEP16
TMS #54 #10              ; 除材ｶﾒﾗ 除材反転座標読取ﾃﾞｨﾚｲ
MPP
LDB MR37100              ; 除材搬送 STEP16
OR T54                   ; 除材ｶﾒﾗ 除材反転座標読取ﾃﾞｨﾚｲ
ANL
OUT @MR102               ; 除材ｶﾒﾗ 除材反転座標読取動作完了
LD @MR100                ; 除材ｶﾒﾗ 除材反転 座標読取
MOV.D #20 W3604          ; XG-8000/7000[21]OutDat(0016)
MOV.D #1 W3606           ; XG-8000/7000[21]OutDat(0020)
MOV.D #0 W3608           ; XG-8000/7000[21]OutDat(0024)
LD @MR102                ; 除材ｶﾒﾗ 除材反転座標読取動作完了
OR MR2703                ; 除材ｶﾒﾗ 除材反転 読取完了
AND MR3200               ; 自動運転中
ANB MR36015              ; 除材反転 STEP15
ANB MR37004              ; 除材搬送 STEP04
ANB MR37101              ; 除材搬送 STEP17
OUT MR2703               ; 除材ｶﾒﾗ 除材反転 読取完了
;<h1/>除材ｶﾒﾗ 吸着確認
LDP B0A4                 ; 除材ｶﾒﾗ 吸着確認SW
ANB @MR106               ; 除材ｶﾒﾗ 吸着確認
AND MR2606               ; 除材画像 Cmd_ready
LDPB B0A4                ; 除材ｶﾒﾗ 吸着確認SW
AND @MR106               ; 除材ｶﾒﾗ 吸着確認
ORL
AND MR100                ; 手動ﾓｰﾄﾞ
LD MR37105               ; 除材搬送 STEP21
OR MR37109               ; 除材搬送 STEP25
OR MR37402               ; 除材搬送 STEP66
OR MR37406               ; 除材搬送 STEP70
AND MR3200               ; 自動運転中
ANB MR2704               ; 除材ｶﾒﾗ 吸着確認完了
ORL
AND MR2602               ; 除材画像 準備OK
ANB @MR108               ; 除材ｶﾒﾗ 吸着確認 動作完了
MPS
OUT B01A4                ; PL.画像ﾄﾘｶﾞ出力CA2
CON
OUT @MR106               ; 除材ｶﾒﾗ 吸着確認
MPP
LD B3103                 ; XG-8000/7000[21]Result ready
OR @MR107                ; 除材ｶﾒﾗ 吸着確認 動作確認
ANL
OUT @MR107               ; 除材ｶﾒﾗ 吸着確認 動作確認
MPS
LDB B3103                ; XG-8000/7000[21]Result ready
ANB B3118                ; XG-8000/7000[21]BUSY
ANL
OUT @MR108               ; 除材ｶﾒﾗ 吸着確認 動作完了
MPP
AND T55                  ; 除材ｶﾒﾗ吸着確認ﾃﾞｨﾚｲ
TMS #55 #15              ; 除材ｶﾒﾗ吸着確認ﾃﾞｨﾚｲ
LD @MR106                ; 除材ｶﾒﾗ 吸着確認
MOV.D #20 W3604          ; XG-8000/7000[21]OutDat(0016)
MOV.D #0 W3606           ; XG-8000/7000[21]OutDat(0020)
MOV.D #1 W3608           ; XG-8000/7000[21]OutDat(0024)
LD @MR108                ; 除材ｶﾒﾗ 吸着確認 動作完了
OR MR2704                ; 除材ｶﾒﾗ 吸着確認完了
AND MR3200               ; 自動運転中
ANB MR37106              ; 除材搬送 STEP22
ANB MR37403              ; 除材搬送 STEP67
ANB MR37407              ; 除材搬送 STEP71
ANB MR37110              ; 除材搬送 STEP26
OUT MR2704               ; 除材ｶﾒﾗ 吸着確認完了
;<h1/>除材ｶﾒﾗ 画面切替
;連続ﾄﾘｶﾞﾓｰﾄﾞ
LD MR101                 ; 自動ﾓｰﾄﾞ
AND MR2606               ; 除材画像 Cmd_ready
LDP MR3200               ; 自動運転中
LDB MR106                ; ﾎﾟｯﾌﾟｱｯﾌﾟ警報
MEP
ORL
ANL
OR @MR110                ; 除材ｶﾒﾗ 画面切替
AND MR2602               ; 除材画像 準備OK
ANB @MR111               ; 除材ｶﾒﾗ 画面切替完了
MPS
OUT @MR110               ; 除材ｶﾒﾗ 画面切替
MPP
AND B3100                ; XG-8000/7000[21]Cmd complete
OUT @MR111               ; 除材ｶﾒﾗ 画面切替完了
LDP @MR110               ; 除材ｶﾒﾗ 画面切替
MOV.D #21 W3604          ; XG-8000/7000[21]OutDat(0016)
;通常ﾄﾘｶﾞﾓｰﾄﾞ
LD MR101                 ; 自動ﾓｰﾄﾞ
AND MR2606               ; 除材画像 Cmd_ready
AND MR106                ; ﾎﾟｯﾌﾟｱｯﾌﾟ警報
ORF MR3200               ; 自動運転中
ORP MR100                ; 手動ﾓｰﾄﾞ
LDB B03A1                ; 手動 給材 画像照明SW
ANB B03A2                ; 手動検査  画像照明SW
ANB B03A3                ; 手動 除材 画像照明SW
INV
MEP
ORL
OR @MR112                ; 除材ｶﾒﾗ 画面切替
AND MR2602               ; 除材画像 準備OK
ANB @MR113               ; 除材ｶﾒﾗ 画面切替完了
MPS
OUT @MR112               ; 除材ｶﾒﾗ 画面切替
MPP
AND B3100                ; XG-8000/7000[21]Cmd complete
OUT @MR113               ; 除材ｶﾒﾗ 画面切替完了
LDP @MR112               ; 除材ｶﾒﾗ 画面切替
MOV.D #22 W3604          ; XG-8000/7000[21]OutDat(0016)
;<h1/>検査ｶﾒﾗ 先端1検出
LDP B0A6                 ; 検査ｶﾒﾗ 先端1検出SW
ANB @MR200               ; 検査ｶﾒﾗ 先頭1検出
AND MR2607               ; 検査画像 Cmd_ready
LDPB B0A6                ; 検査ｶﾒﾗ 先端1検出SW
AND @MR200               ; 検査ｶﾒﾗ 先頭1検出
ORL
AND MR100                ; 手動ﾓｰﾄﾞ
LD MR35900               ; 先端1検出
AND MR3200               ; 自動運転中
ANB MR2800               ; 検査ｶﾒﾗ 先端1 検出完了
ORL
AND MR2603               ; 検査画像 準備OK
ANB @MR202               ; 検査ｶﾒﾗ 先頭1検出 動作完了
MPS
OUT B01A6                ; 検査ｶﾒﾗ 先端1検出PL
CON
OUT @MR200               ; 検査ｶﾒﾗ 先頭1検出
MPP
LD B3218                 ; XG-8000/7000[22]BUSY
OR @MR201                ; 検査ｶﾒﾗ 先頭1検出 動作確認
ANL
MPS
OUT @MR201               ; 検査ｶﾒﾗ 先頭1検出 動作確認
MPP
ANB B3218                ; XG-8000/7000[22]BUSY
OUT @MR202               ; 検査ｶﾒﾗ 先頭1検出 動作完了
LD @MR200                ; 検査ｶﾒﾗ 先頭1検出
MOV.D #1 W3704           ; XG-8000/7000[22]OutDat(0016)
MOV.D #1 W3706           ; XG-8000/7000[22]OutDat(0020)
@FMOV.D #0 DM3110 #4     ; 検査ｶﾒﾗ 検査判定
LD @MR202                ; 検査ｶﾒﾗ 先頭1検出 動作完了
OR MR2800                ; 検査ｶﾒﾗ 先端1 検出完了
AND MR3200               ; 自動運転中
ANB MR35012              ; 検査STEP12 検査完了確認
OUT MR2800               ; 検査ｶﾒﾗ 先端1 検出完了
LD @MR202                ; 検査ｶﾒﾗ 先頭1検出 動作完了
MOV.D W3238 DM3110       ; 先端1 検査判定 XG[22](0120)  検査ｶﾒﾗ 検査判定
MOV.D W323A DM3112       ; 先端1 Y座標AVG XG[22](0124)  検査ｶﾒﾗ Y座標
MOV.D #0 DM3114          ; 検査ｶﾒﾗ 帯幅平均
MOV.D #0 DM3116          ; 検査ｶﾒﾗ ﾋﾟｯﾁ幅平均
MOV.D W3240 DM3118       ; 先端1 穴面積 XG[22](0136)  検査ｶﾒﾗ 穴面積
MOV.D W323E DM3120       ; 先端1 Y座標MIN XG[22](0132)  検査ｶﾒﾗ Y座標最小
MOV.D W323C DM3122       ; 先端1 Y座標MAX XG[22](0128)  検査ｶﾒﾗ Y座標最大
MOV.D #0 DM3124          ; 検査ｶﾒﾗ 帯幅最小
MOV.D #0 DM3126          ; 検査ｶﾒﾗ 帯幅最大
MOV.D #0 DM3128          ; 検査ｶﾒﾗ ﾋﾟｯﾁ最小
MOV.D #0 DM3130          ; 検査ｶﾒﾗ ﾋﾟｯﾁ最大
;<h1/>検査ｶﾒﾗ 先端2検出
LDP B0A7                 ; 検査ｶﾒﾗ 先端2検出SW
ANB @MR204               ; 検査ｶﾒﾗ 先頭2検出
AND MR2607               ; 検査画像 Cmd_ready
LDPB B0A7                ; 検査ｶﾒﾗ 先端2検出SW
AND @MR204               ; 検査ｶﾒﾗ 先頭2検出
ORL
AND MR100                ; 手動ﾓｰﾄﾞ
LD MR35901               ; 先端2検出
AND MR3200               ; 自動運転中
ANB MR2801               ; 検査ｶﾒﾗ 先頭2 検出完了
ORL
AND MR2603               ; 検査画像 準備OK
ANB @MR206               ; 検査ｶﾒﾗ 先頭2検出 動作完了
MPS
OUT B01A7                ; 検査ｶﾒﾗ 先端2検出PL
CON
OUT @MR204               ; 検査ｶﾒﾗ 先頭2検出
MPP
LD B3218                 ; XG-8000/7000[22]BUSY
OR @MR205                ; 検査ｶﾒﾗ 先頭2検出 動作確認
ANL
MPS
OUT @MR205               ; 検査ｶﾒﾗ 先頭2検出 動作確認
MPP
ANB B3218                ; XG-8000/7000[22]BUSY
OUT @MR206               ; 検査ｶﾒﾗ 先頭2検出 動作完了
LD @MR204                ; 検査ｶﾒﾗ 先頭2検出
MOV.D #1 W3704           ; XG-8000/7000[22]OutDat(0016)
MOV.D #2 W3706           ; XG-8000/7000[22]OutDat(0020)
@FMOV.D #0 DM3110 #4     ; 検査ｶﾒﾗ 検査判定
LD @MR206                ; 検査ｶﾒﾗ 先頭2検出 動作完了
OR MR2801                ; 検査ｶﾒﾗ 先頭2 検出完了
AND MR3200               ; 自動運転中
ANB MR35012              ; 検査STEP12 検査完了確認
OUT MR2801               ; 検査ｶﾒﾗ 先頭2 検出完了
LD @MR206                ; 検査ｶﾒﾗ 先頭2検出 動作完了
MOV.D W3242 DM3110       ; 先端2 検査判定 XG[22](0140)  検査ｶﾒﾗ 検査判定
MOV.D W3244 DM3112       ; 先端2 Y座標AVG XG[22](0144)  検査ｶﾒﾗ Y座標
MOV.D #0 DM3114          ; 検査ｶﾒﾗ 帯幅平均
MOV.D #0 DM3116          ; 検査ｶﾒﾗ ﾋﾟｯﾁ幅平均
MOV.D W324A DM3118       ; 先端2 穴面積 XG[22](0156)  検査ｶﾒﾗ 穴面積
MOV.D W3248 DM3120       ; 先端2 Y座標MIN XG[22](0152)  検査ｶﾒﾗ Y座標最小
MOV.D W3246 DM3122       ; 先端2 Y座標MAX XG[22](0148)  検査ｶﾒﾗ Y座標最大
MOV.D #0 DM3124          ; 検査ｶﾒﾗ 帯幅最小
MOV.D #0 DM3126          ; 検査ｶﾒﾗ 帯幅最大
MOV.D #0 DM3128          ; 検査ｶﾒﾗ ﾋﾟｯﾁ最小
MOV.D #0 DM3130          ; 検査ｶﾒﾗ ﾋﾟｯﾁ最大
;<h1/>検査ｶﾒﾗ 直線部検出
LDP B0A8                 ; 検査ｶﾒﾗ 直線部検出SW
ANB @MR208               ; 検査ｶﾒﾗ 直線部検出
AND MR2607               ; 検査画像 Cmd_ready
LDPB B0A8                ; 検査ｶﾒﾗ 直線部検出SW
AND @MR208               ; 検査ｶﾒﾗ 直線部検出
ORL
AND MR100                ; 手動ﾓｰﾄﾞ
LD MR35902               ; 直線部検出
AND MR3200               ; 自動運転中
ANB MR2802               ; 検査ｶﾒﾗ 直線部 検出完了
ORL
AND MR2603               ; 検査画像 準備OK
ANB @MR210               ; 検査ｶﾒﾗ 直線部検出 動作完了
MPS
OUT B01A8                ; 検査ｶﾒﾗ 直線部検出PL
CON
OUT @MR208               ; 検査ｶﾒﾗ 直線部検出
MPP
LD B3218                 ; XG-8000/7000[22]BUSY
OR @MR209                ; 検査ｶﾒﾗ 直線部検出 動作確認
ANL
MPS
OUT @MR209               ; 検査ｶﾒﾗ 直線部検出 動作確認
MPP
ANB B3218                ; XG-8000/7000[22]BUSY
OUT @MR210               ; 検査ｶﾒﾗ 直線部検出 動作完了
LD @MR208                ; 検査ｶﾒﾗ 直線部検出
MOV.D #1 W3704           ; XG-8000/7000[22]OutDat(0016)
MOV.D #3 W3706           ; XG-8000/7000[22]OutDat(0020)
@FMOV.D #0 DM3110 #4     ; 検査ｶﾒﾗ 検査判定
LD @MR210                ; 検査ｶﾒﾗ 直線部検出 動作完了
OR MR2802                ; 検査ｶﾒﾗ 直線部 検出完了
AND MR3200               ; 自動運転中
ANB MR35012              ; 検査STEP12 検査完了確認
OUT MR2802               ; 検査ｶﾒﾗ 直線部 検出完了
LD @MR210                ; 検査ｶﾒﾗ 直線部検出 動作完了
MOV.D W324C DM3110       ; 直線 検査判定 XG[22](0160)  検査ｶﾒﾗ 検査判定
MOV.D #0 DM3112          ; 検査ｶﾒﾗ Y座標
MOV.D #0 DM3114          ; 検査ｶﾒﾗ 帯幅平均
MOV.D #0 DM3116          ; 検査ｶﾒﾗ ﾋﾟｯﾁ幅平均
MOV.D W324E DM3118       ; 直線 穴面積 XG[22](0164)  検査ｶﾒﾗ 穴面積
MOV.D #0 DM3120          ; 検査ｶﾒﾗ Y座標最小
MOV.D #0 DM3122          ; 検査ｶﾒﾗ Y座標最大
MOV.D #0 DM3124          ; 検査ｶﾒﾗ 帯幅最小
MOV.D #0 DM3126          ; 検査ｶﾒﾗ 帯幅最大
MOV.D #0 DM3128          ; 検査ｶﾒﾗ ﾋﾟｯﾁ最小
MOV.D #0 DM3130          ; 検査ｶﾒﾗ ﾋﾟｯﾁ最大
;<h1/>検査ｶﾒﾗ ﾊﾞﾈ開始部検出
LDP B0A9                 ; 検査ｶﾒﾗ ﾊﾞﾈ開始部検出SW
ANB @MR212               ; 検査ｶﾒﾗ ﾊﾞﾈ開始部 検出
AND MR2607               ; 検査画像 Cmd_ready
LDPB B0A9                ; 検査ｶﾒﾗ ﾊﾞﾈ開始部検出SW
AND @MR212               ; 検査ｶﾒﾗ ﾊﾞﾈ開始部 検出
ORL
AND MR100                ; 手動ﾓｰﾄﾞ
LD MR35903               ; ﾊﾞﾈ開始部 検出
AND MR3200               ; 自動運転中
ANB MR2803               ; 検査ｶﾒﾗ ﾊﾞﾈ開始部 検出完了
ORL
AND MR2603               ; 検査画像 準備OK
ANB @MR214               ; 検査ｶﾒﾗ ﾊﾞﾈ開始部 検出 動作完了
MPS
OUT B01A9                ; 検査ｶﾒﾗ ﾊﾞﾈ開始部検出PL
CON
OUT @MR212               ; 検査ｶﾒﾗ ﾊﾞﾈ開始部 検出
MPP
LD B3218                 ; XG-8000/7000[22]BUSY
OR @MR213                ; 検査ｶﾒﾗ ﾊﾞﾈ開始部 検出 動作確認
ANL
MPS
OUT @MR213               ; 検査ｶﾒﾗ ﾊﾞﾈ開始部 検出 動作確認
MPP
ANB B3218                ; XG-8000/7000[22]BUSY
OUT @MR214               ; 検査ｶﾒﾗ ﾊﾞﾈ開始部 検出 動作完了
LD @MR212                ; 検査ｶﾒﾗ ﾊﾞﾈ開始部 検出
MOV.D #1 W3704           ; XG-8000/7000[22]OutDat(0016)
MOV.D #4 W3706           ; XG-8000/7000[22]OutDat(0020)
@FMOV.D #0 DM3110 #4     ; 検査ｶﾒﾗ 検査判定
LD @MR214                ; 検査ｶﾒﾗ ﾊﾞﾈ開始部 検出 動作完了
OR MR2803                ; 検査ｶﾒﾗ ﾊﾞﾈ開始部 検出完了
AND MR3200               ; 自動運転中
ANB MR35012              ; 検査STEP12 検査完了確認
OUT MR2803               ; 検査ｶﾒﾗ ﾊﾞﾈ開始部 検出完了
LD @MR214                ; 検査ｶﾒﾗ ﾊﾞﾈ開始部 検出 動作完了
MOV.D W3250 DM3110       ; ﾊﾞﾈ開始 検査判定 XG[22](0168)  検査ｶﾒﾗ 検査判定
MOV.D W3252 DM3112       ; ﾊﾞﾈ開始 Y座標MIN XG[22](0172)  検査ｶﾒﾗ Y座標
MOV.D #0 DM3114          ; 検査ｶﾒﾗ 帯幅平均
MOV.D #0 DM3116          ; 検査ｶﾒﾗ ﾋﾟｯﾁ幅平均
MOV.D W3254 DM3118       ; ﾊﾞﾈ開始 穴面積 XG[22](0176)  検査ｶﾒﾗ 穴面積
MOV.D #0 DM3120          ; 検査ｶﾒﾗ Y座標最小
MOV.D #0 DM3122          ; 検査ｶﾒﾗ Y座標最大
MOV.D #0 DM3124          ; 検査ｶﾒﾗ 帯幅最小
MOV.D #0 DM3126          ; 検査ｶﾒﾗ 帯幅最大
MOV.D #0 DM3128          ; 検査ｶﾒﾗ ﾋﾟｯﾁ最小
MOV.D #0 DM3130          ; 検査ｶﾒﾗ ﾋﾟｯﾁ最大
;<h1/>検査ｶﾒﾗ ﾊﾞﾈ終了部検出
LDP B0AA                 ; 検査ｶﾒﾗ ﾊﾞﾈ終了部検出SW
ANB @MR300               ; 検査ｶﾒﾗ ﾊﾞﾈ終了部 検出
AND MR2607               ; 検査画像 Cmd_ready
LDPB B0AA                ; 検査ｶﾒﾗ ﾊﾞﾈ終了部検出SW
AND @MR300               ; 検査ｶﾒﾗ ﾊﾞﾈ終了部 検出
ORL
AND MR100                ; 手動ﾓｰﾄﾞ
LD MR35904               ; ﾊﾞﾈ終了部 検出
AND MR3200               ; 自動運転中
ANB MR2804               ; 検査ｶﾒﾗ ﾊﾞﾈ終了部 検出完了
ORL
AND MR2603               ; 検査画像 準備OK
ANB @MR302               ; 検査ｶﾒﾗ ﾊﾞﾈ終了部 検出 動作完了
MPS
OUT B01AA                ; 検査ｶﾒﾗ ﾊﾞﾈ終了部検出PL
CON
OUT @MR300               ; 検査ｶﾒﾗ ﾊﾞﾈ終了部 検出
MPP
LD B3218                 ; XG-8000/7000[22]BUSY
OR @MR301                ; 検査ｶﾒﾗ ﾊﾞﾈ終了部 検出 動作確認
ANL
MPS
OUT @MR301               ; 検査ｶﾒﾗ ﾊﾞﾈ終了部 検出 動作確認
MPP
ANB B3218                ; XG-8000/7000[22]BUSY
OUT @MR302               ; 検査ｶﾒﾗ ﾊﾞﾈ終了部 検出 動作完了
LD @MR300                ; 検査ｶﾒﾗ ﾊﾞﾈ終了部 検出
MOV.D #1 W3704           ; XG-8000/7000[22]OutDat(0016)
MOV.D #5 W3706           ; XG-8000/7000[22]OutDat(0020)
@FMOV.D #0 DM3110 #4     ; 検査ｶﾒﾗ 検査判定
LD @MR302                ; 検査ｶﾒﾗ ﾊﾞﾈ終了部 検出 動作完了
OR MR2804                ; 検査ｶﾒﾗ ﾊﾞﾈ終了部 検出完了
AND MR3200               ; 自動運転中
ANB MR35012              ; 検査STEP12 検査完了確認
OUT MR2804               ; 検査ｶﾒﾗ ﾊﾞﾈ終了部 検出完了
LD @MR302                ; 検査ｶﾒﾗ ﾊﾞﾈ終了部 検出 動作完了
MOV.D W3256 DM3110       ; ﾊﾞﾈ終了 検査判定 XG[22](0180)  検査ｶﾒﾗ 検査判定
MOV.D W3258 DM3112       ; ﾊﾞﾈ終了 Y座標MAX XG[22](0184)  検査ｶﾒﾗ Y座標
MOV.D #0 DM3114          ; 検査ｶﾒﾗ 帯幅平均
MOV.D #0 DM3116          ; 検査ｶﾒﾗ ﾋﾟｯﾁ幅平均
MOV.D W325A DM3118       ; ﾊﾞﾈ終了 穴面積 XG[22](0188)  検査ｶﾒﾗ 穴面積
MOV.D #0 DM3120          ; 検査ｶﾒﾗ Y座標最小
MOV.D #0 DM3122          ; 検査ｶﾒﾗ Y座標最大
MOV.D #0 DM3124          ; 検査ｶﾒﾗ 帯幅最小
MOV.D #0 DM3126          ; 検査ｶﾒﾗ 帯幅最大
MOV.D #0 DM3128          ; 検査ｶﾒﾗ ﾋﾟｯﾁ最小
MOV.D #0 DM3130          ; 検査ｶﾒﾗ ﾋﾟｯﾁ最大
;<h1/>検査ｶﾒﾗ ﾊﾞﾈ部検出
LDP B0AB                 ; 検査ｶﾒﾗ ﾊﾞﾈ部検出SW
ANB @MR304               ; 検査ｶﾒﾗ ﾊﾞﾈ部検出
AND MR2607               ; 検査画像 Cmd_ready
LDPB B0AB                ; 検査ｶﾒﾗ ﾊﾞﾈ部検出SW
AND @MR304               ; 検査ｶﾒﾗ ﾊﾞﾈ部検出
ORL
AND MR100                ; 手動ﾓｰﾄﾞ
LD MR35905               ; ﾊﾞﾈ部検出
AND MR3200               ; 自動運転中
ANB MR2805               ; 検査ｶﾒﾗ ﾊﾞﾈ部 検出完了
ORL
AND MR2603               ; 検査画像 準備OK
ANB @MR306               ; 検査ｶﾒﾗ ﾊﾞﾈ部検出 動作完了
MPS
OUT B01AB                ; 検査ｶﾒﾗ ﾊﾞﾈ部検出PL
CON
OUT @MR304               ; 検査ｶﾒﾗ ﾊﾞﾈ部検出
MPP
LD B3218                 ; XG-8000/7000[22]BUSY
OR @MR305                ; 検査ｶﾒﾗ ﾊﾞﾈ部検出 動作確認
ANL
MPS
OUT @MR305               ; 検査ｶﾒﾗ ﾊﾞﾈ部検出 動作確認
MPP
ANB B3218                ; XG-8000/7000[22]BUSY
OUT @MR306               ; 検査ｶﾒﾗ ﾊﾞﾈ部検出 動作完了
LD @MR304                ; 検査ｶﾒﾗ ﾊﾞﾈ部検出
MOV.D #1 W3704           ; XG-8000/7000[22]OutDat(0016)
MOV.D #6 W3706           ; XG-8000/7000[22]OutDat(0020)
@FMOV.D #0 DM3110 #4     ; 検査ｶﾒﾗ 検査判定
LD @MR306                ; 検査ｶﾒﾗ ﾊﾞﾈ部検出 動作完了
OR MR2805                ; 検査ｶﾒﾗ ﾊﾞﾈ部 検出完了
AND MR3200               ; 自動運転中
ANB MR35012              ; 検査STEP12 検査完了確認
OUT MR2805               ; 検査ｶﾒﾗ ﾊﾞﾈ部 検出完了
LD @MR306                ; 検査ｶﾒﾗ ﾊﾞﾈ部検出 動作完了
MOV.D W325C DM3110       ; ﾊﾞﾈ 検査判定 XG[22](0192)  検査ｶﾒﾗ 検査判定
MOV.D #0 DM3112          ; 検査ｶﾒﾗ Y座標
MOV.D W325E DM3114       ; ﾊﾞﾈ 帯幅平均 XG[22](0196)  検査ｶﾒﾗ 帯幅平均
MOV.D W3264 DM3116       ; ﾊﾞﾈ ﾋﾟｯﾁ幅AVG XG[22](0208)  検査ｶﾒﾗ ﾋﾟｯﾁ幅平均
MOV.D W326A DM3118       ; ﾊﾞﾈ 穴面積 XG[22](0220)  検査ｶﾒﾗ 穴面積
MOV.D #0 DM3120          ; 検査ｶﾒﾗ Y座標最小
MOV.D #0 DM3122          ; 検査ｶﾒﾗ Y座標最大
MOV.D W3262 DM3124       ; ﾊﾞﾈ 帯幅MIN XG[22](0204)  検査ｶﾒﾗ 帯幅最小
MOV.D W3260 DM3126       ; ﾊﾞﾈ 帯幅MAX XG[22](0200)  検査ｶﾒﾗ 帯幅最大
MOV.D W3268 DM3128       ; ﾊﾞﾈ ﾋﾟｯﾁ幅MIN XG[22](0216)  検査ｶﾒﾗ ﾋﾟｯﾁ最小
MOV.D W3266 DM3130       ; ﾊﾞﾈ ﾋﾟｯﾁ幅MAX XG[22](0212)  検査ｶﾒﾗ ﾋﾟｯﾁ最大
;<h1/>検査ｶﾒﾗ ﾜｰｸ有無検出
LDP B0AC                 ; 検査ｶﾒﾗ ﾜｰｸ有無検出SW
ANB @MR308               ; 検査ｶﾒﾗ ﾜｰｸ有無検出
AND MR2607               ; 検査画像 Cmd_ready
LDPB B0AC                ; 検査ｶﾒﾗ ﾜｰｸ有無検出SW
AND @MR308               ; 検査ｶﾒﾗ ﾜｰｸ有無検出
ORL
AND MR100                ; 手動ﾓｰﾄﾞ
LD MR31301               ; 検査部 準備STEP01
OR MR33107               ; 給材搬送 STEP23 投入前ﾜｰｸ確認
OR MR34004               ; ﾜｰｸ押込動作 STEP04
OR MR34009               ; ﾜｰｸ押込動作 STEP09
AND MR3200               ; 自動運転中
ANB MR2806               ; 検査ｶﾒﾗ ﾜｰｸ有無 検出完了
ORL
AND MR2603               ; 検査画像 準備OK
ANB @MR310               ; 検査ｶﾒﾗ ﾜｰｸ有無検出 動作完了
MPS
OUT B01AC                ; 検査ｶﾒﾗ ﾜｰｸ有無検出PL
CON
OUT @MR308               ; 検査ｶﾒﾗ ﾜｰｸ有無検出
MPP
LD B3218                 ; XG-8000/7000[22]BUSY
OR @MR309                ; 検査ｶﾒﾗ ﾜｰｸ有無検出 動作確認
ANL
OUT @MR309               ; 検査ｶﾒﾗ ﾜｰｸ有無検出 動作確認
MPS
ANB B3218                ; XG-8000/7000[22]BUSY
TMH #53 #2               ; 検査ｶﾒﾗ有無検知確認ﾃﾞｨﾚｲ
MPP
AND T53                  ; 検査ｶﾒﾗ有無検知確認ﾃﾞｨﾚｲ
OUT @MR310               ; 検査ｶﾒﾗ ﾜｰｸ有無検出 動作完了
LD @MR308                ; 検査ｶﾒﾗ ﾜｰｸ有無検出
MOV.D #1 W3704           ; XG-8000/7000[22]OutDat(0016)
MOV.D #7 W3706           ; XG-8000/7000[22]OutDat(0020)
LD @MR310                ; 検査ｶﾒﾗ ﾜｰｸ有無検出 動作完了
OR MR2806                ; 検査ｶﾒﾗ ﾜｰｸ有無 検出完了
AND MR3200               ; 自動運転中
ANB MR31302              ; 検査部 準備STEP02
ANB MR33108              ; 給材搬送 STEP24 確認完了
ANB MR34005              ; ﾜｰｸ押込動作 STEP05
ANB MR34010              ; ﾜｰｸ押込動作 STEP10
OUT MR2806               ; 検査ｶﾒﾗ ﾜｰｸ有無 検出完了
;<h1/>検査ｶﾒﾗ 画面切替
LDP MR3200               ; 自動運転中
AND MR2607               ; 検査画像 Cmd_ready
OR @MR312                ; 検査ｶﾒﾗ 画面切替
AND MR2603               ; 検査画像 準備OK
ANB @MR313               ; 検査ｶﾒﾗ 画面切替完了
MPS
OUT @MR312               ; 検査ｶﾒﾗ 画面切替
MPP
AND B3200                ; XG-8000/7000[22]Cmd complete
OUT @MR313               ; 検査ｶﾒﾗ 画面切替完了
LDP @MR312               ; 検査ｶﾒﾗ 画面切替
MOV.D #21 W3704          ; XG-8000/7000[22]OutDat(0016)
;<h1/>給材ｶﾒﾗ設定No.切替
LDP B080                 ; 給材ｶﾒﾗ 設定No. 切替SW
ANB @MR400               ; 給材ｶﾒﾗ 設定No.切替
AND MR2605               ; 給材画像 Cmd_ready
LDPB B080                ; 給材ｶﾒﾗ 設定No. 切替SW
AND @MR400               ; 給材ｶﾒﾗ 設定No.切替
ORL
AND MR100                ; 手動ﾓｰﾄﾞ
LD MR31001               ; 画像 設定切替 STEP01
AND MR3200               ; 自動運転中
ANB MR2900               ; 給材ｶﾒﾗ 設定No. 切替完了
ORL
AND MR2601               ; 給材画像 準備OK
ANB @MR402               ; 給材ｶﾒﾗ 設定No. 切替完了
MPS
OUT B0180                ; 給材ｶﾒﾗ 設定No. 切替PL
CON
OUT @MR400               ; 給材ｶﾒﾗ 設定No.切替
MPP
LD B3018                 ; XG-8000/7000[20]BUSY
OR @MR401                ; 給材ｶﾒﾗ 動作確認
ANL
MPS
OUT @MR401               ; 給材ｶﾒﾗ 動作確認
MPP
ANB B3018                ; XG-8000/7000[20]BUSY
OUT @MR402               ; 給材ｶﾒﾗ 設定No. 切替完了
LDP @MR400               ; 給材ｶﾒﾗ 設定No.切替
MOV.D #2 W3504           ; XG-8000/7000[20]OutDat(0016)
MPS
AND MR3200               ; 自動運転中
DW #0 W3507              ; XG-8000/7000[20]OutDat(0022)
CON
MOV FM9006 W3506         ; ﾜｰｸﾚｼﾋﾟ基本(画像登録No.)  XG-8000/7000[20]OutDat(0020)
MPP
AND MR100                ; 手動ﾓｰﾄﾞ
MOV.D FM6000 W3506       ; TP給材ｶﾒﾗ 設定No.  XG-8000/7000[20]OutDat(0020)
LD @MR402                ; 給材ｶﾒﾗ 設定No. 切替完了
OR MR2900                ; 給材ｶﾒﾗ 設定No. 切替完了
AND MR3200               ; 自動運転中
ANB MR31002              ; 画像 設定切替 STEP02
OUT MR2900               ; 給材ｶﾒﾗ 設定No. 切替完了
;<h1/>除材ｶﾒﾗ設定No.切替
LDP B081                 ; 除材ｶﾒﾗ 設定No. 切替SW
ANB @MR404               ; 除材ｶﾒﾗ 設定No.切替
AND MR2606               ; 除材画像 Cmd_ready
LDPB B081                ; 除材ｶﾒﾗ 設定No. 切替SW
AND @MR404               ; 除材ｶﾒﾗ 設定No.切替
ORL
AND MR100                ; 手動ﾓｰﾄﾞ
LD MR31001               ; 画像 設定切替 STEP01
AND MR3200               ; 自動運転中
ANB MR2901               ; 除材ｶﾒﾗ 設定No. 切替完了
ORL
AND MR2602               ; 除材画像 準備OK
ANB @MR406               ; 除材ｶﾒﾗ 設定No. 切替完了
MPS
OUT B0181                ; 除材ｶﾒﾗ 設定No. 切替PL
CON
OUT @MR404               ; 除材ｶﾒﾗ 設定No.切替
MPP
LD B3118                 ; XG-8000/7000[21]BUSY
OR @MR405                ; 除材ｶﾒﾗ 動作確認
ANL
MPS
OUT @MR405               ; 除材ｶﾒﾗ 動作確認
MPP
ANB B3118                ; XG-8000/7000[21]BUSY
OUT @MR406               ; 除材ｶﾒﾗ 設定No. 切替完了
LDP @MR404               ; 除材ｶﾒﾗ 設定No.切替
MOV.D #2 W3604           ; XG-8000/7000[21]OutDat(0016)
MPS
AND MR3200               ; 自動運転中
DW #0 W3607              ; XG-8000/7000[21]OutDat(0022)
CON
MOV FM9506 W3606         ; ﾜｰｸﾚｼﾋﾟ基本(画像登録No.)  XG-8000/7000[21]OutDat(0020)
MPP
AND MR100                ; 手動ﾓｰﾄﾞ
MOV.D FM6002 W3606       ; TP除材ｶﾒﾗ 設定No.  XG-8000/7000[21]OutDat(0020)
LD @MR402                ; 給材ｶﾒﾗ 設定No. 切替完了
OR MR2901                ; 除材ｶﾒﾗ 設定No. 切替完了
AND MR3200               ; 自動運転中
ANB MR31002              ; 画像 設定切替 STEP02
OUT MR2901               ; 除材ｶﾒﾗ 設定No. 切替完了
;<h1/>検査ｶﾒﾗ設定No.切替
LDP B082                 ; 検査ｶﾒﾗ 設定No. 切替SW
ANB @MR408               ; 検査ｶﾒﾗ 設定No.切替
AND MR2607               ; 検査画像 Cmd_ready
LDPB B082                ; 検査ｶﾒﾗ 設定No. 切替SW
AND @MR408               ; 検査ｶﾒﾗ 設定No.切替
ORL
AND MR100                ; 手動ﾓｰﾄﾞ
LD MR31001               ; 画像 設定切替 STEP01
AND MR3200               ; 自動運転中
ANB MR2902               ; 検査ｶﾒﾗ 設定No. 切替完了
ORL
AND MR2603               ; 検査画像 準備OK
ANB @MR410               ; 検査ｶﾒﾗ 設定No. 切替完了
MPS
OUT B0182                ; 検査ｶﾒﾗ 設定No. 切替PL
CON
OUT @MR408               ; 検査ｶﾒﾗ 設定No.切替
MPP
LD B3218                 ; XG-8000/7000[22]BUSY
OR @MR409                ; 検査ｶﾒﾗ 動作確認
ANL
MPS
OUT @MR409               ; 検査ｶﾒﾗ 動作確認
MPP
ANB B3218                ; XG-8000/7000[22]BUSY
OUT @MR410               ; 検査ｶﾒﾗ 設定No. 切替完了
LDP @MR408               ; 検査ｶﾒﾗ 設定No.切替
MOV.D #2 W3704           ; XG-8000/7000[22]OutDat(0016)
MPS
AND MR3200               ; 自動運転中
DW #0 W3707              ; XG-8000/7000[22]OutDat(0022)
CON
MOV FM9007 W3706         ; ﾜｰｸﾚｼﾋﾟ基本(ﾊﾟﾚｯﾄ登録No.)  XG-8000/7000[22]OutDat(0020)
MPP
AND MR100                ; 手動ﾓｰﾄﾞ
MOV.D FM6004 W3706       ; TP検査ｶﾒﾗ 設定No.  XG-8000/7000[22]OutDat(0020)
LD @MR410                ; 検査ｶﾒﾗ 設定No. 切替完了
OR MR2902                ; 検査ｶﾒﾗ 設定No. 切替完了
AND MR3200               ; 自動運転中
ANB MR31002              ; 画像 設定切替 STEP02
OUT MR2902               ; 検査ｶﾒﾗ 設定No. 切替完了
;<h1/>給材ｶﾒﾗ設定No.読出
LDP B083                 ; 給材ｶﾒﾗ 設定No. 読出SW
ANB @MR500               ; 給材ｶﾒﾗ 設定No.読出
AND MR2605               ; 給材画像 Cmd_ready
LDPB B083                ; 給材ｶﾒﾗ 設定No. 読出SW
AND @MR500               ; 給材ｶﾒﾗ 設定No.読出
ORL
AND MR100                ; 手動ﾓｰﾄﾞ
LD MR31003               ; 画像 設定切替 STEP03
AND MR3200               ; 自動運転中
ANB MR2903               ; 給材ｶﾒﾗ 設定No. 読出完了
ORL
AND MR2601               ; 給材画像 準備OK
ANB @MR501               ; 給材ｶﾒﾗ 設定No. 読出完了
MPS
OUT B0183                ; 給材ｶﾒﾗ 設定No. 読出PL
CON
OUT @MR500               ; 給材ｶﾒﾗ 設定No.読出
MPP
AND B3000                ; XG-8000/7000[20]Cmd complete
OUT @MR501               ; 給材ｶﾒﾗ 設定No. 読出完了
MOV.D W300A FM6010       ; XG-8000/7000[20]InDat(0028)  TP給材ｶﾒﾗ 設定読出No.
LDP @MR500               ; 給材ｶﾒﾗ 設定No.読出
MOV.D #32 W3504          ; XG-8000/7000[20]OutDat(0016)
LD @MR501                ; 給材ｶﾒﾗ 設定No. 読出完了
OR MR2903                ; 給材ｶﾒﾗ 設定No. 読出完了
AND MR3200               ; 自動運転中
ANB MR31004              ; 画像 設定切替 STEP04
OUT MR2903               ; 給材ｶﾒﾗ 設定No. 読出完了
;<h1/>除材ｶﾒﾗ設定No.読出
LDP B084                 ; 除材ｶﾒﾗ 設定No. 読出SW
ANB @MR504               ; 除材ｶﾒﾗ 設定No.読出
AND MR2606               ; 除材画像 Cmd_ready
LDPB B084                ; 除材ｶﾒﾗ 設定No. 読出SW
AND @MR504               ; 除材ｶﾒﾗ 設定No.読出
ORL
AND MR100                ; 手動ﾓｰﾄﾞ
LD MR31003               ; 画像 設定切替 STEP03
AND MR3200               ; 自動運転中
ANB MR2904               ; 除材ｶﾒﾗ 設定No. 読出完了
ORL
AND MR2602               ; 除材画像 準備OK
ANB @MR505               ; 除材ｶﾒﾗ 設定No. 読出完了
MPS
OUT B0184                ; 除材ｶﾒﾗ 設定No. 読出PL
CON
OUT @MR504               ; 除材ｶﾒﾗ 設定No.読出
MPP
AND B3100                ; XG-8000/7000[21]Cmd complete
OUT @MR505               ; 除材ｶﾒﾗ 設定No. 読出完了
MOV.D W310A FM6012       ; XG-8000/7000[21]InDat(0028)  TP除材ｶﾒﾗ 設定読出No.
LDP @MR504               ; 除材ｶﾒﾗ 設定No.読出
MOV.D #32 W3604          ; XG-8000/7000[21]OutDat(0016)
LD @MR505                ; 除材ｶﾒﾗ 設定No. 読出完了
OR MR2904                ; 除材ｶﾒﾗ 設定No. 読出完了
AND MR3200               ; 自動運転中
ANB MR31004              ; 画像 設定切替 STEP04
OUT MR2904               ; 除材ｶﾒﾗ 設定No. 読出完了
;<h1/>検査ｶﾒﾗ設定No.読出
LDP B085                 ; 検査ｶﾒﾗ 設定No. 読出SW
ANB @MR508               ; 検査ｶﾒﾗ 設定No.読出
AND MR2607               ; 検査画像 Cmd_ready
LDPB B085                ; 検査ｶﾒﾗ 設定No. 読出SW
AND @MR508               ; 検査ｶﾒﾗ 設定No.読出
ORL
AND MR100                ; 手動ﾓｰﾄﾞ
LD MR31003               ; 画像 設定切替 STEP03
AND MR3200               ; 自動運転中
ANB MR2905               ; 検査ｶﾒﾗ 設定No. 読出完了
ORL
AND MR2603               ; 検査画像 準備OK
ANB @MR509               ; 検査ｶﾒﾗ 設定No. 読出完了
MPS
OUT B0185                ; 検査ｶﾒﾗ 設定No. 読出PL
CON
OUT @MR508               ; 検査ｶﾒﾗ 設定No.読出
MPP
AND B3200                ; XG-8000/7000[22]Cmd complete
OUT @MR509               ; 検査ｶﾒﾗ 設定No. 読出完了
MOV.D W320A FM6014       ; XG-8000/7000[22]InDat(0028)  TP検査ｶﾒﾗ 設定読出No.
LDP @MR508               ; 検査ｶﾒﾗ 設定No.読出
MOV.D #32 W3704          ; XG-8000/7000[22]OutDat(0016)
LD @MR509                ; 検査ｶﾒﾗ 設定No. 読出完了
OR MR2905                ; 検査ｶﾒﾗ 設定No. 読出完了
AND MR3200               ; 自動運転中
ANB MR31004              ; 画像 設定切替 STEP04
OUT MR2905               ; 検査ｶﾒﾗ 設定No. 読出完了
;<h1/>検査ｶﾒﾗ 全ｶﾒﾗ画面切替
LDP B086                 ; 全ｶﾒﾗSW
ANB @MR700               ; 全ｶﾒﾗ切替
AND MR2607               ; 検査画像 Cmd_ready
LDPB B086                ; 全ｶﾒﾗSW
AND @MR700               ; 全ｶﾒﾗ切替
ORL
AND MR2603               ; 検査画像 準備OK
ANB @MR701               ; 全ｶﾒﾗ切替完了
MPS
OUT B0186                ; 全ｶﾒﾗPL
CON
OUT @MR700               ; 全ｶﾒﾗ切替
MPP
AND B3200                ; XG-8000/7000[22]Cmd complete
OUT @MR701               ; 全ｶﾒﾗ切替完了
LDP @MR700               ; 全ｶﾒﾗ切替
MOV.D #10 W3704          ; XG-8000/7000[22]OutDat(0016)
;<h1/>検査ｶﾒﾗ ｶﾒﾗ1画面切替
LDP B087                 ; ｶﾒﾗ1SW
ANB @MR702               ; ｶﾒﾗ1切替
AND MR2607               ; 検査画像 Cmd_ready
LDPB B087                ; ｶﾒﾗ1SW
AND @MR702               ; ｶﾒﾗ1切替
ORL
AND MR2603               ; 検査画像 準備OK
ANB @MR703               ; ｶﾒﾗ1切替完了
MPS
OUT B0187                ; ｶﾒﾗ1PL
CON
OUT @MR702               ; ｶﾒﾗ1切替
MPP
AND B3200                ; XG-8000/7000[22]Cmd complete
OUT @MR703               ; ｶﾒﾗ1切替完了
LDP @MR702               ; ｶﾒﾗ1切替
MOV.D #11 W3704          ; XG-8000/7000[22]OutDat(0016)
;<h1/>検査ｶﾒﾗ ｶﾒﾗ2画面切替
LDP B088                 ; ｶﾒﾗ2SW
ANB @MR704               ; ｶﾒﾗ2切替
AND MR2607               ; 検査画像 Cmd_ready
LDPB B088                ; ｶﾒﾗ2SW
AND @MR704               ; ｶﾒﾗ2切替
ORL
AND MR2603               ; 検査画像 準備OK
ANB @MR705               ; ｶﾒﾗ2切替完了
MPS
OUT B0188                ; ｶﾒﾗ2PL
CON
OUT @MR704               ; ｶﾒﾗ2切替
MPP
AND B3200                ; XG-8000/7000[22]Cmd complete
OUT @MR705               ; ｶﾒﾗ2切替完了
LDP @MR704               ; ｶﾒﾗ2切替
MOV.D #12 W3704          ; XG-8000/7000[22]OutDat(0016)
;<h1/>検査ｶﾒﾗ ｶﾒﾗ3画面切替
LDP B089                 ; ｶﾒﾗ3SW
ANB @MR706               ; ｶﾒﾗ3切替
AND MR2607               ; 検査画像 Cmd_ready
LDPB B089                ; ｶﾒﾗ3SW
AND @MR706               ; ｶﾒﾗ3切替
ORL
AND MR2603               ; 検査画像 準備OK
ANB @MR707               ; ｶﾒﾗ3切替完了
MPS
OUT B0189                ; ｶﾒﾗ3PL
CON
OUT @MR706               ; ｶﾒﾗ3切替
MPP
AND B3200                ; XG-8000/7000[22]Cmd complete
OUT @MR707               ; ｶﾒﾗ3切替完了
LDP @MR706               ; ｶﾒﾗ3切替
MOV.D #13 W3704          ; XG-8000/7000[22]OutDat(0016)
;<h1/>検査ｶﾒﾗ ｶﾒﾗ4画面切替
LDP B08A                 ; ｶﾒﾗ4SW
ANB @MR708               ; ｶﾒﾗ4切替
AND MR2607               ; 検査画像 Cmd_ready
LDPB B08A                ; ｶﾒﾗ4SW
AND @MR708               ; ｶﾒﾗ4切替
ORL
AND MR2603               ; 検査画像 準備OK
ANB @MR709               ; ｶﾒﾗ4切替完了
MPS
OUT B018A                ; ｶﾒﾗ4PL
CON
OUT @MR708               ; ｶﾒﾗ4切替
MPP
AND B3200                ; XG-8000/7000[22]Cmd complete
OUT @MR709               ; ｶﾒﾗ4切替完了
LDP @MR708               ; ｶﾒﾗ4切替
MOV.D #14 W3704          ; XG-8000/7000[22]OutDat(0016)
;<h1/>検査ｶﾒﾗ ｶﾒﾗ5画面切替
LDP B08B                 ; ｶﾒﾗ5SW
ANB @MR710               ; ｶﾒﾗ5切替
AND MR2607               ; 検査画像 Cmd_ready
LDPB B08B                ; ｶﾒﾗ5SW
AND @MR710               ; ｶﾒﾗ5切替
ORL
AND MR2603               ; 検査画像 準備OK
ANB @MR711               ; ｶﾒﾗ5切替完了
MPS
OUT B018B                ; ｶﾒﾗ5PL
CON
OUT @MR710               ; ｶﾒﾗ5切替
MPP
AND B3200                ; XG-8000/7000[22]Cmd complete
OUT @MR711               ; ｶﾒﾗ5切替完了
LDP @MR710               ; ｶﾒﾗ5切替
MOV.D #15 W3704          ; XG-8000/7000[22]OutDat(0016)
;<h1/>ﾄﾘｶﾞ出力
LDB @MR000               ; 給材ｶﾒﾗ S盤 座標読取
ANB @MR004               ; 給材ｶﾒﾗ 吸着確認
ANB @MR008               ; 給材ｶﾒﾗ S盤 濃淡判定
ANB @MR012               ; 給材ｶﾒﾗ 画面切替
ANB @MR400               ; 給材ｶﾒﾗ 設定No.切替
ANB @MR500               ; 給材ｶﾒﾗ 設定No.読出
INV
OUT B3500                ; XG-8000/7000[20]Cmd request
LDB @MR001               ; 給材ｶﾒﾗ S盤 座標読取 動作確認
ANB @MR005               ; 給材ｶﾒﾗ 吸着確認 動作確認
ANB @MR009               ; 給材ｶﾒﾗ S盤 濃淡判定 動作確認
INV
OUT B3503                ; XG-8000/7000[20]Result ack
LDB @MR100               ; 除材ｶﾒﾗ 除材反転 座標読取
ANB @MR106               ; 除材ｶﾒﾗ 吸着確認
ANB @MR110               ; 除材ｶﾒﾗ 画面切替
ANB @MR112               ; 除材ｶﾒﾗ 画面切替
ANB @MR404               ; 除材ｶﾒﾗ 設定No.切替
ANB @MR504               ; 除材ｶﾒﾗ 設定No.読出
INV
OUT B3600                ; XG-8000/7000[21]Cmd request
LDB @MR101               ; 除材ｶﾒﾗ 除材反転座標読取動作確認
ANB @MR107               ; 除材ｶﾒﾗ 吸着確認 動作確認
INV
OUT B3603                ; XG-8000/7000[21]Result ack
LDB @MR200               ; 検査ｶﾒﾗ 先頭1検出
ANB @MR204               ; 検査ｶﾒﾗ 先頭2検出
ANB @MR208               ; 検査ｶﾒﾗ 直線部検出
ANB @MR212               ; 検査ｶﾒﾗ ﾊﾞﾈ開始部 検出
ANB @MR300               ; 検査ｶﾒﾗ ﾊﾞﾈ終了部 検出
ANB @MR304               ; 検査ｶﾒﾗ ﾊﾞﾈ部検出
ANB @MR308               ; 検査ｶﾒﾗ ﾜｰｸ有無検出
ANB @MR312               ; 検査ｶﾒﾗ 画面切替
ANB @MR408               ; 検査ｶﾒﾗ 設定No.切替
ANB @MR508               ; 検査ｶﾒﾗ 設定No.読出
ANB @MR604               ; 手動検査 画像照明ON
ANB @MR606               ; 手動検査 画像照明OFF
ANB @MR612               ; 検査ｶﾒﾗ 照明光度変更
ANB @MR700               ; 全ｶﾒﾗ切替
ANB @MR702               ; ｶﾒﾗ1切替
ANB @MR704               ; ｶﾒﾗ2切替
ANB @MR706               ; ｶﾒﾗ3切替
ANB @MR708               ; ｶﾒﾗ4切替
ANB @MR710               ; ｶﾒﾗ5切替
INV
OUT B3700                ; XG-8000/7000[22]Cmd request
LDB @MR201               ; 検査ｶﾒﾗ 先頭1検出 動作確認
ANB @MR205               ; 検査ｶﾒﾗ 先頭2検出 動作確認
ANB @MR209               ; 検査ｶﾒﾗ 直線部検出 動作確認
ANB @MR213               ; 検査ｶﾒﾗ ﾊﾞﾈ開始部 検出 動作確認
ANB @MR301               ; 検査ｶﾒﾗ ﾊﾞﾈ終了部 検出 動作確認
ANB @MR305               ; 検査ｶﾒﾗ ﾊﾞﾈ部検出 動作確認
ANB @MR309               ; 検査ｶﾒﾗ ﾜｰｸ有無検出 動作確認
INV
AND CR2003               ; 常時OFF
OUT B3703                ; XG-8000/7000[22]Result ack
LDB @MR000               ; 給材ｶﾒﾗ S盤 座標読取
ANB @MR004               ; 給材ｶﾒﾗ 吸着確認
ANB @MR008               ; 給材ｶﾒﾗ S盤 濃淡判定
INV
TMH #56 #5               ; 給材ｶﾒﾗﾄﾘｶﾞﾃﾞｨﾚｲ
CON
AND T56                  ; 給材ｶﾒﾗﾄﾘｶﾞﾃﾞｨﾚｲ
AND CR2003               ; 常時OFF
OUT R3201                ; 給材ｶﾒﾗ ﾄﾘｶﾞ1
LDB @MR100               ; 除材ｶﾒﾗ 除材反転 座標読取
ANB @MR106               ; 除材ｶﾒﾗ 吸着確認
INV
TMH #57 #5               ; 除材ｶﾒﾗﾄﾘｶﾞﾃﾞｨﾚｲ
CON
AND T57                  ; 除材ｶﾒﾗﾄﾘｶﾞﾃﾞｨﾚｲ
AND CR2003               ; 常時OFF
OUT R3601                ; 除材ｶﾒﾗ ﾄﾘｶﾞ1
LD CR2003                ; 常時OFF
OUT R3301                ; 検査ｶﾒﾗ ﾄﾘｶﾞ1
;<h1/>S盤 画像照明光度設定
LD CR2002                ; 常時ON
LIMIT #0 #255 DM150 DM150; TPｽﾌﾟﾚｯﾄ盤 画像照明 光度設定  TPｽﾌﾟﾚｯﾄ盤 画像照明 光度設定
LD CR2002                ; 常時ON
TMR @0 #10               ; ｳｪｲﾄﾀｲﾏｰ0
LD<> DM150 DM6020        ; TPｽﾌﾟﾚｯﾄ盤 画像照明 光度設定  ｽﾌﾟﾚｯﾄ盤 画像照明 光度現在値
ORP @T0                  ; ｳｪｲﾄﾀｲﾏｰ0
SET MR15000              ; ﾏｸﾛ 画像照明 設定変更
LD MR15000               ; ﾏｸﾛ 画像照明 設定変更
@MOV DM150 DM6020        ; TPｽﾌﾟﾚｯﾄ盤 画像照明 光度設定  ｽﾌﾟﾚｯﾄ盤 画像照明 光度現在値
LD CR2002                ; 常時ON
MSTRT GAZOU_LED MR15000 DM6020;ﾏｸﾛ 画像照明 設定変更  ｽﾌﾟﾚｯﾄ盤 画像照明 光度現在値
LD MR15008               ; ﾏｸﾛ 画像照明 (CLK)
OUT R3209                ; 画像照明  　(CLK)
LD MR15009               ; ﾏｸﾛ 画像照明 (SDI)
OUT R3210                ; 画像照明 　 (SDI)
LD MR15010               ; ﾏｸﾛ 画像照明 (LD_)
OUT R3211                ; 画像照明　 (LD_)
;<h1/>S盤 画像照明OFF
LDP B03A0                ; 手動 ｽﾌﾟﾚｯﾄﾞ盤 画像照明SW
ANB @MR600               ; 手動 ｽﾌﾟﾚｯﾄﾞ盤 画像照明OFF
LDPB B03A0               ; 手動 ｽﾌﾟﾚｯﾄﾞ盤 画像照明SW
AND @MR600               ; 手動 ｽﾌﾟﾚｯﾄﾞ盤 画像照明OFF
ORL
AND MR100                ; 手動ﾓｰﾄﾞ
OUT @MR600               ; 手動 ｽﾌﾟﾚｯﾄﾞ盤 画像照明OFF
LDB @MR600               ; 手動 ｽﾌﾟﾚｯﾄﾞ盤 画像照明OFF
LD<> MR32000 #0          ; S盤画像読取 STEP00
OR<> MR33000 #0          ; 給材搬送 STEP00
OR MR100                 ; 手動ﾓｰﾄﾞ
ANL
OUT R506                 ; ｽﾌﾟﾚｯﾄﾞ盤 画像照明ON
CON
OUT B04A0                ; 手動 ｽﾌﾟﾚｯﾄﾞ盤 画像照明PL
;<h1/>給材 画像照明
LDP B03A1                ; 手動 給材 画像照明SW
ANB @MR602               ; 手動 給材 画像照明
LDPB B03A1               ; 手動 給材 画像照明SW
AND @MR602               ; 手動 給材 画像照明
ORL
AND MR100                ; 手動ﾓｰﾄﾞ
OUT @MR602               ; 手動 給材 画像照明
LD @MR602                ; 手動 給材 画像照明
AND MR100                ; 手動ﾓｰﾄﾞ
LDB @MR004               ; 給材ｶﾒﾗ 吸着確認
AND MR101                ; 自動ﾓｰﾄﾞ
ORL
OUT R3310                ; 給材 画像照明OFF
LDB @MR602               ; 手動 給材 画像照明
OUT B04A1                ; 手動 給材 画像照明PL
;<h1/>検査 画像照明
LDP B03A2                ; 手動検査  画像照明SW
ORP MR100                ; 手動ﾓｰﾄﾞ
ANB @MR604               ; 手動検査 画像照明ON
ANB @MR608               ; 検査画像 照明ON記憶
AND MR2607               ; 検査画像 Cmd_ready
LDPB B03A2               ; 手動検査  画像照明SW
AND @MR604               ; 手動検査 画像照明ON
ORL
AND MR100                ; 手動ﾓｰﾄﾞ
AND MR2603               ; 検査画像 準備OK
ANB @MR605               ; 手動検査 画像照明ON完了
MPS
OUT @MR604               ; 手動検査 画像照明ON
MPP
AND B3200                ; XG-8000/7000[22]Cmd complete
SET @MR608               ; 検査画像 照明ON記憶
CON
OUT @MR605               ; 手動検査 画像照明ON完了
LDP B03A2                ; 手動検査  画像照明SW
ORP MR101                ; 自動ﾓｰﾄﾞ
ANB @MR606               ; 手動検査 画像照明OFF
AND @MR608               ; 検査画像 照明ON記憶
AND MR2607               ; 検査画像 Cmd_ready
LDPB B03A2               ; 手動検査  画像照明SW
AND @MR606               ; 手動検査 画像照明OFF
ORL
LD MR100                 ; 手動ﾓｰﾄﾞ
OR MR101                 ; 自動ﾓｰﾄﾞ
ANL
AND MR2603               ; 検査画像 準備OK
ANB @MR607               ; 手動検査 画像照明OFF完了
MPS
OUT @MR606               ; 手動検査 画像照明OFF
MPP
AND B3200                ; XG-8000/7000[22]Cmd complete
RES @MR608               ; 検査画像 照明ON記憶
CON
OUT @MR607               ; 手動検査 画像照明OFF完了
LDP @MR604               ; 手動検査 画像照明ON
MOV.D #4 W3704           ; XG-8000/7000[22]OutDat(0016)
MOV.D #1 W3706           ; XG-8000/7000[22]OutDat(0020)
LDP @MR606               ; 手動検査 画像照明OFF
MOV.D #4 W3704           ; XG-8000/7000[22]OutDat(0016)
MOV.D #0 W3706           ; XG-8000/7000[22]OutDat(0020)
LD @MR608                ; 検査画像 照明ON記憶
OUT B04A2                ; 手動 検査  画像照明PL
LDB @MR608               ; 検査画像 照明ON記憶
LDB MR3200               ; 自動運転中
LD MR3200                ; 自動運転中
AND R3008                ; 受取ﾗﾌｶﾞｲﾄﾞ上昇端
ORL
ANL
OUT R3309                ; 手動 検査  画像照明OFF
;<h1/>除材 画像照明
LDP B03A3                ; 手動 除材 画像照明SW
ANB @MR610               ; 手動 除材反転 画像照明
LDPB B03A3               ; 手動 除材 画像照明SW
AND @MR610               ; 手動 除材反転 画像照明
ORL
AND MR100                ; 手動ﾓｰﾄﾞ
OUT @MR610               ; 手動 除材反転 画像照明
LD @MR610                ; 手動 除材反転 画像照明
AND MR100                ; 手動ﾓｰﾄﾞ
LDB @MR100               ; 除材ｶﾒﾗ 除材反転 座標読取
ANB @MR106               ; 除材ｶﾒﾗ 吸着確認
AND MR101                ; 自動ﾓｰﾄﾞ
ORL
OUT R3710                ; 手動 除材  画像照明OFF
LDB @MR610               ; 手動 除材反転 画像照明
OUT B04A3                ; 手動 除材 画像照明PL
;<h1/>検査画像照明光度設定
LD CR2002                ; 常時ON
LIMIT #0 #255 DM152 DM152
LDP B090                 ; 検査ｶﾒﾗ 照明光度 変更通知
ANB @MR612               ; 検査ｶﾒﾗ 照明光度変更
AND MR2607               ; 検査画像 Cmd_ready
LDPB B090                ; 検査ｶﾒﾗ 照明光度 変更通知
AND @MR612               ; 検査ｶﾒﾗ 照明光度変更
ORL
AND MR100                ; 手動ﾓｰﾄﾞ
AND MR2603               ; 検査画像 準備OK
ANB @MR613               ; 検査ｶﾒﾗ 照明光度 変更完了
MPS
OUT @MR612               ; 検査ｶﾒﾗ 照明光度変更
MPP
AND B3200                ; XG-8000/7000[22]Cmd complete
RES B090                 ; 検査ｶﾒﾗ 照明光度 変更通知
CON
OUT @MR613               ; 検査ｶﾒﾗ 照明光度 変更完了
LDP @MR612               ; 検査ｶﾒﾗ 照明光度変更
MOV.D #3 W3704           ; XG-8000/7000[22]OutDat(0016)
MOV.D DM152 W3706        ; XG-8000/7000[22]OutDat(0020)
;<h1/>画面切替
LD CR2008                ; 運転開始時1ｽｷｬﾝON
OR @MR915                ; 立上PC画面表示
ANB @T1
OUT @MR915               ; 立上PC画面表示
TMR @1 #10
LD B08C                  ; PC画面 選択SW
OR @MR915                ; 立上PC画面表示
OUT R3711                ; PC画面 選択
CON
OUT B018C                ; PC画面 選択PL
LD B08D                  ; 給材画面 選択SW
OUT R3712                ; 給材画面 選択
CON
OUT B018D                ; 給材画面 選択PL
LD B08E                  ; 除材画面 選択SW
OUT R3713                ; 除材画面 選択
CON
OUT B018E                ; 除材画面 選択PL
LD B08F                  ; 検査画面 選択SW
OUT R3714                ; 検査画面 選択
CON
OUT B018F                ; 検査画面 選択PL
LDB B08D                 ; 給材画面 選択SW
ANB B08E                 ; 除材画面 選択SW
ANB B08F                 ; 検査画面 選択SW
INV
SET R3715                ; USB_OFF
LD B08C                  ; PC画面 選択SW
RES R3715                ; USB_OFF
;<h1/>ｴﾗｰ出力
;ERR50 給材画像 ｺﾝﾄﾛｰﾗ異常
LD R3002                 ; 給材画像 ERROR
LD MR7308                ; ERR38 給材画像 ｺﾝﾄﾛｰﾗ異常
ANB MR004                ; ﾘｾｯﾄSW
ORL
OUT MR7308               ; ERR38 給材画像 ｺﾝﾄﾛｰﾗ異常
;ERR51 検査画像 ｺﾝﾄﾛｰﾗ異常
LD R3102                 ; 検査画像 ERROR
LD MR7309                ; ERR39 検査画像 ｺﾝﾄﾛｰﾗ異常
ANB MR004                ; ﾘｾｯﾄSW
ORL
OUT MR7309               ; ERR39 検査画像 ｺﾝﾄﾛｰﾗ異常
;ERR52 除材画像 ｺﾝﾄﾛｰﾗ異常
LD R3402                 ; 除材画像 ERROR
LD MR7310                ; ERR3A 除材画像 ｺﾝﾄﾛｰﾗ異常
ANB MR004                ; ﾘｾｯﾄSW
ORL
OUT MR7310               ; ERR3A 除材画像 ｺﾝﾄﾛｰﾗ異常
;<h1/>まとめ
LDB MR7308               ; ERR38 給材画像 ｺﾝﾄﾛｰﾗ異常
ANB MR7309               ; ERR39 検査画像 ｺﾝﾄﾛｰﾗ異常
ANB MR7310               ; ERR3A 除材画像 ｺﾝﾄﾛｰﾗ異常
INV
OUT MR2013               ; 画像全異常
LD CR2002                ; 常時ON
OUT MR2014               ; 画像全原点
LDB @MR000               ; 給材ｶﾒﾗ S盤 座標読取
ANB @MR004               ; 給材ｶﾒﾗ 吸着確認
ANB @MR008               ; 給材ｶﾒﾗ S盤 濃淡判定
ANB @MR100               ; 除材ｶﾒﾗ 除材反転 座標読取
ANB @MR106               ; 除材ｶﾒﾗ 吸着確認
ANB @MR200               ; 検査ｶﾒﾗ 先頭1検出
ANB @MR204               ; 検査ｶﾒﾗ 先頭2検出
ANB @MR208               ; 検査ｶﾒﾗ 直線部検出
ANB @MR212               ; 検査ｶﾒﾗ ﾊﾞﾈ開始部 検出
ANB @MR300               ; 検査ｶﾒﾗ ﾊﾞﾈ終了部 検出
ANB @MR304               ; 検査ｶﾒﾗ ﾊﾞﾈ部検出
ANB @MR308               ; 検査ｶﾒﾗ ﾜｰｸ有無検出
ANB @MR400               ; 給材ｶﾒﾗ 設定No.切替
ANB @MR404               ; 除材ｶﾒﾗ 設定No.切替
ANB @MR408               ; 検査ｶﾒﾗ 設定No.切替
ANB @MR500               ; 給材ｶﾒﾗ 設定No.読出
ANB @MR504               ; 除材ｶﾒﾗ 設定No.読出
ANB @MR508               ; 検査ｶﾒﾗ 設定No.読出
OUT MR2015               ; 画像全停止
END
ENDH
