DEVICE:53
;MODULE:運転準備
;MODULE_TYPE:0
;<h1/>運転準備動作
LDP MR005                ; 起動SW
AND MR400                ; 全ﾄﾞｱ閉確認
OR MR3000                ; 運転準備開始
AND MR101                ; 自動ﾓｰﾄﾞ
ANB MR3200               ; 自動運転中
LDB MR3012               ; 運転準備 完了記憶
ORB MR014                ; 全原点
ANL
AND MR3002               ; 運転準備条件
ANB MR013                ; 全異常、警報
ANB MR3202               ; 自動運転 強制終了
OUT MR3000               ; 運転準備開始
@SET MR23000             ; 原点復帰 STEP00
LD MR800                 ; 給材X軸 動作可能
AND MR801                ; 給材Y軸 動作可能
AND MR802                ; 給材Z軸 動作可能
AND MR803                ; 除材X軸 動作可能
AND MR804                ; 除材Y軸 動作可能
AND MR805                ; 除材Z軸 動作可能
OUT MR3002               ; 運転準備条件
LDB MR3000               ; 運転準備開始
DW #0 MR23000            ; 原点復帰 STEP00
STG MR23000              ; 原点復帰 STEP00
JMP MR23001              ; 原点復帰 STEP01
STG MR23001              ; 原点復帰 STEP01
AND MR1512               ; 給材Z軸 原点復帰記憶
AND MR6512               ; 除材Z軸 原点復帰記憶
JMP MR23002              ; 原点復帰 STEP02
STG MR23002              ; 原点復帰 STEP02
AND MR1501               ; 給材Z軸 待機位置
AND MR6501               ; 除材Z軸 待機位置
JMP MR23003              ; 原点復帰 STEP03
STG MR23003              ; 原点復帰 STEP03
AND MR1112               ; 給材X軸 原点復帰記憶
AND MR1312               ; 給材Y軸 原点復帰記憶
AND MR1712               ; 給材θ軸 原点復帰記憶
AND MR6112               ; 除材X軸 原点復帰記憶
AND MR6312               ; 除材Y軸 原点復帰記憶
AND MR6712               ; 除材θ軸 原点復帰記憶
AND MR6912               ; 検査Z軸 原点復帰記憶
JMP MR23004              ; 原点復帰 STEP04
STG MR23004              ; 原点復帰 STEP04
AND MR1101               ; 給材X軸 待機位置
AND MR1301               ; 給材Y軸 待機位置
AND MR1701               ; 給材θ軸 待機位置
AND MR6101               ; 除材X軸 待機位置
AND MR6301               ; 除材Y軸 待機位置
AND MR6701               ; 除材θ軸 待機位置
AND MR6905               ; 検査Z軸 待機位置
AND R006                 ; ｴｱｰ圧力ｽｲｯﾁ
AND R008                 ; 真空圧力ｽｲｯﾁ
JMP MR23005              ; 原点復帰 STEP05
STG MR23005              ; 原点復帰 STEP05
AND R3010                ; 落し込み 回収上昇端
AND R3406                ; 除材移動 上昇端
JMP MR23006              ; 原点復帰 STEP06
STG MR23006              ; 原点復帰 STEP06
AND R3012                ; 落し込み 回収切替 押込側
AND R3014                ; 落し込み 回収ｽﾗｲﾄﾞ 後退端
AND R3405                ; 除材移動 後退端
AND R3409                ; 除材反転 ﾕﾆｯﾄ開端
JMP MR23007              ; 原点復帰 STEP07
STG MR23007              ; 原点復帰 STEP07
AND R3009                ; 受取ﾗﾌｶﾞｲﾄﾞ下降端
JMP MR23008              ; 原点復帰 STEP08
STG MR23008              ; 原点復帰 STEP08
AND MR3012               ; 運転準備 完了記憶
JMP MR23009              ; 原点復帰 STEP09
STG MR23009              ; 原点復帰 STEP09
ENDS
LD MR1512                ; 給材Z軸 原点復帰記憶
AND MR6512               ; 除材Z軸 原点復帰記憶
AND MR1112               ; 給材X軸 原点復帰記憶
AND MR1312               ; 給材Y軸 原点復帰記憶
AND MR1712               ; 給材θ軸 原点復帰記憶
AND MR6112               ; 除材X軸 原点復帰記憶
AND MR6312               ; 除材Y軸 原点復帰記憶
AND MR6712               ; 除材θ軸 原点復帰記憶
AND MR6912               ; 検査Z軸 原点復帰記憶
AND MR1101               ; 給材X軸 待機位置
AND MR1301               ; 給材Y軸 待機位置
AND MR1701               ; 給材θ軸 待機位置
AND MR6101               ; 除材X軸 待機位置
AND MR6301               ; 除材Y軸 待機位置
AND MR6701               ; 除材θ軸 待機位置
AND MR6905               ; 検査Z軸 待機位置
AND R006                 ; ｴｱｰ圧力ｽｲｯﾁ
AND R008                 ; 真空圧力ｽｲｯﾁ
AND R3010                ; 落し込み 回収上昇端
AND R3406                ; 除材移動 上昇端
AND R3012                ; 落し込み 回収切替 押込側
AND R3014                ; 落し込み 回収ｽﾗｲﾄﾞ 後退端
AND R3405                ; 除材移動 後退端
AND R3409                ; 除材反転 ﾕﾆｯﾄ開端
AND R3009                ; 受取ﾗﾌｶﾞｲﾄﾞ下降端
OUT MR3011               ; 装置原点
LD MR3011                ; 装置原点
OR MR3012                ; 運転準備 完了記憶
AND MR101                ; 自動ﾓｰﾄﾞ
AND MR3002               ; 運転準備条件
ANB MR103                ; 即停止異常 (原点復帰有)
ANB MR3202               ; 自動運転 強制終了
OUT MR3012               ; 運転準備 完了記憶
;原点復帰出力
LD MR23003               ; 原点復帰 STEP03
ANB MR1112               ; 給材X軸 原点復帰記憶
OUT MR1000               ; 給材X軸 原点復帰指令
LD MR23003               ; 原点復帰 STEP03
ANB MR1312               ; 給材Y軸 原点復帰記憶
OUT MR1200               ; 給材Y軸 原点復帰指令
LD MR23001               ; 原点復帰 STEP01
ANB MR1512               ; 給材Z軸 原点復帰記憶
OUT MR1400               ; 給材Z軸 原点復帰指令
LD MR23003               ; 原点復帰 STEP03
ANB MR1712               ; 給材θ軸 原点復帰記憶
OUT MR1600               ; 給材θ軸 原点復帰指令
LD MR23003               ; 原点復帰 STEP03
ANB MR6112               ; 除材X軸 原点復帰記憶
OUT MR6000               ; 除材X軸 原点復帰指令
LD MR23003               ; 原点復帰 STEP03
ANB MR6312               ; 除材Y軸 原点復帰記憶
OUT MR6200               ; 除材Y軸 原点復帰指令
LD MR23001               ; 原点復帰 STEP01
ANB MR6512               ; 除材Z軸 原点復帰記憶
OUT MR6400               ; 除材Z軸 原点復帰指令
LD MR23003               ; 原点復帰 STEP03
ANB MR6712               ; 除材θ軸 原点復帰記憶
OUT MR6600               ; 除材θ軸 原点復帰指令
;<h1/>ｴﾗｰ出力
LDB R006                 ; ｴｱｰ圧力ｽｲｯﾁ
LD MR7400                ; ERR40 元圧異常
ANB MR004                ; ﾘｾｯﾄSW
ORL
OUT MR7400               ; ERR40 元圧異常
LDB R008                 ; 真空圧力ｽｲｯﾁ
LD MR7401                ; ERR41 真空圧異常
ANB MR004                ; ﾘｾｯﾄSW
ORL
OUT MR7401               ; ERR41 真空圧異常
END
ENDH
