DEVICE:53
;MODULE:GAZOU_LED
;MODULE_TYPE:1
;****CPUﾊﾟﾙｽ出力位置決め入出力転送****
;軸No　		#1〜＃2
;IN/OUTｱﾄﾞﾚｽ　先頭ﾋﾞｯﾄｱﾄﾞﾚｽから16bit占有
;				先頭ﾋﾞｯﾄｱﾄﾞﾚｽ+00〜07(IN)
;				先頭ﾋﾞｯﾄｱﾄﾞﾚｽ+08〜15(OUT)
;ERR_CODE	 先頭ﾜｰﾄﾞｱﾄﾞﾚｽから1Word占有
;				異常内容のｺｰﾄﾞNoを格納
;IN
LD P0:#0                 ; I/Oｱﾄﾞﾚｽ
OUT @MR000               ; 出.画像照明設定変更
;ﾌﾟﾛｸﾞﾗﾑｴﾘｱ
LDP @MR000               ; 出.画像照明設定変更
LDA P1                   ; 照明輝度設値
CON
SLA #4
CON
STA @DM0                 ; DATA処理演算値
CON
MOV #1 @DM2              ; DATA処理実行No
LD= #1 @DM2              ; DATA処理実行No
OR= #4 @DM2              ; DATA処理実行No
OR= #7 @DM2              ; DATA処理実行No
OR= #10 @DM2             ; DATA処理実行No
OR= #13 @DM2             ; DATA処理実行No
OR= #16 @DM2             ; DATA処理実行No
OR= #19 @DM2             ; DATA処理実行No
OR= #22 @DM2             ; DATA処理実行No
OR= #25 @DM2             ; DATA処理実行No
OR= #28 @DM2             ; DATA処理実行No
OR= #31 @DM2             ; DATA処理実行No
OR= #34 @DM2             ; DATA処理実行No
SET @MR001               ; 画像照明 　 (CLK)
LD= #2 @DM2              ; DATA処理実行No
OR= #5 @DM2              ; DATA処理実行No
OR= #8 @DM2              ; DATA処理実行No
OR= #11 @DM2             ; DATA処理実行No
OR= #14 @DM2             ; DATA処理実行No
OR= #17 @DM2             ; DATA処理実行No
OR= #20 @DM2             ; DATA処理実行No
OR= #23 @DM2             ; DATA処理実行No
OR= #26 @DM2             ; DATA処理実行No
OR= #29 @DM2             ; DATA処理実行No
OR= #32 @DM2             ; DATA処理実行No
OR= #35 @DM2             ; DATA処理実行No
LDA @DM0                 ; DATA処理演算値
CON
SLA #1
CON
STA @DM0                 ; DATA処理演算値
CON
MPS
AND CR2009               ; 演算結果が負
SET @MR002               ; 画像照明  　(SDI)
MPP
ANB CR2009               ; 演算結果が負
RES @MR002               ; 画像照明  　(SDI)
LD= #3 @DM2              ; DATA処理実行No
OR= #6 @DM2              ; DATA処理実行No
OR= #9 @DM2              ; DATA処理実行No
OR= #12 @DM2             ; DATA処理実行No
OR= #15 @DM2             ; DATA処理実行No
OR= #18 @DM2             ; DATA処理実行No
OR= #21 @DM2             ; DATA処理実行No
OR= #24 @DM2             ; DATA処理実行No
OR= #27 @DM2             ; DATA処理実行No
OR= #30 @DM2             ; DATA処理実行No
OR= #33 @DM2             ; DATA処理実行No
OR= #36 @DM2             ; DATA処理実行No
RES @MR001               ; 画像照明 　 (CLK)
LD>= #42 @DM2            ; DATA処理実行No
INC @DM2                 ; DATA処理実行No
LD= #38 @DM2             ; DATA処理実行No
SET @MR003               ; 画像照明  　(LD_)
LD= #39 @DM2             ; DATA処理実行No
RES @MR003               ; 画像照明  　(LD_)
LD= #41 @DM2             ; DATA処理実行No
RES P0:#0                ; I/Oｱﾄﾞﾚｽ
;OUT
LD @MR001                ; 画像照明 　 (CLK)
OUT P0:#8                ; I/Oｱﾄﾞﾚｽ
LD @MR002                ; 画像照明  　(SDI)
OUT P0:#9                ; I/Oｱﾄﾞﾚｽ
LD @MR003                ; 画像照明  　(LD_)
OUT P0:#10               ; I/Oｱﾄﾞﾚｽ
LDB CR2002               ; 常時ON
MEND
END
ENDH
