DEVICE:53
;MODULE:Panel
;MODULE_TYPE:0
;SCRIPT_TYPE:
LDP MR23915              ; ﾒﾝﾃﾅﾝｽ終了
SET R46114               ; _装置原点復帰待ち
LD CR2002                ; 常時ON
ANP R46104               ; _非常停止中　ﾓｰﾄﾞﾌﾗｸﾞ
LDA DM35000              ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
CON
STA DM35012              ; 非常停止時のｲﾝﾃﾞｯｸｽ位置
LD CR2008                ; 運転開始時1ｽｷｬﾝON
ZRES LR100 LR103         ; _割り込みSW1　ON/OFF状態  _割り込みSW4　ON/OFF状態
;接着剤設定
LDP MR24700              ; ﾎﾟｯﾄﾗｲﾌﾀｲﾏﾘｾｯﾄ
ORP MR24807              ; ﾎﾟｯﾄﾗｲﾌﾀｲﾏﾘｾｯﾄ
ORP MR24501              ; ﾎﾟｯﾄﾗｲﾌﾀｲﾏﾘｾｯﾄ 
SET LR24715
CON
DW #0 DM25212            ; 接着剤塗布回数
CON
RES MR8014               ; 接着剤交換要求ﾒｯｾｰｼﾞ
;<h1/>2014/3/20 追加　ﾎﾟｯﾄﾗｲﾌﾀｲﾏｰﾘｾｯﾄ、接着回数ｶｳﾝﾀｰﾘｾｯﾄ
;ﾎﾟｯﾄﾗｲﾌﾀｲﾏｰ：接着剤解凍報知の時OPによってﾌﾞｻﾞｰを止めた時にﾘｾｯﾄを掛ける
LD MR24505               ; ﾎﾟｯﾄﾗｲﾌﾀｲﾏｰﾘｾｯﾄ要求
SET LR24715
CON
RES MR8014               ; 接着剤交換要求ﾒｯｾｰｼﾞ
CON
TMH #1277 #1
CON
AND T1277
RES MR24505              ; ﾎﾟｯﾄﾗｲﾌﾀｲﾏｰﾘｾｯﾄ要求
LD LR24715
LDA.D DM27200
CON
STA.D DM27060
CON
LDA.D DM25214            ; 接着剤使用経過時間　分
CON
STA.D DM27064
CON
LDA.D DM25216            ; 接着剤使用経過時間　秒
CON
STA.D DM27066
;'現在の時間を秒に変えてDM10910へ格納
;　
;　DM10910.d = SEC(cm700)
;　
;
;
LDP MR24805              ; 解凍開始SW
NCJ #1000
;'現在の時間を秒に変えてDM10910へ格納
;
;　
;
;　DM10910.d = SEC(cm700)
;
LD CR2002                ; 常時ON
MOV.D #0 @VM0
SEC CM700 @VM0           ; ｶﾚﾝﾀﾞﾀｲﾏ（年）
MOV.D @VM0 DM10910
;　
;
LABEL #1000
;
;'現在の時間を秒に変えてDM10930へ格納
;　
;　DM10930.d = SEC(cm700)
;　
;
;
LDP MR24700              ; ﾎﾟｯﾄﾗｲﾌﾀｲﾏﾘｾｯﾄ
OR MR24807               ; ﾎﾟｯﾄﾗｲﾌﾀｲﾏﾘｾｯﾄ
NCJ #1001
;'現在の時間を秒に変えてDM10930へ格納
;
;　
;
;　DM10930.d = SEC(cm700)
;
LD CR2002                ; 常時ON
MOV.D #0 @VM2
SEC CM700 @VM2           ; ｶﾚﾝﾀﾞﾀｲﾏ（年）
MOV.D @VM2 DM10930
;　
;
LABEL #1001
;
LDP MR24700              ; ﾎﾟｯﾄﾗｲﾌﾀｲﾏﾘｾｯﾄ
OR MR24807               ; ﾎﾟｯﾄﾗｲﾌﾀｲﾏﾘｾｯﾄ
OUT MR8010               ; ﾎﾟｯﾄﾗｲﾌﾀｲﾏﾘｾｯﾄ
;'現在の時間を秒に変えてDM10940へ格納
;　
;　DM10940.d = SEC(cm700)
;　
;
;
LDP MR24805              ; 解凍開始SW
AND CR2003               ; 常時OFF
OR CR2002                ; 常時ON
NCJ #1002
;'現在の時間を秒に変えてDM10940へ格納
;
;　
;
;　DM10940.d = SEC(cm700)
;
LD CR2002                ; 常時ON
MOV.D #0 @VM4
SEC CM700 @VM4           ; ｶﾚﾝﾀﾞﾀｲﾏ（年）
MOV.D @VM4 DM10940
;　
;
LABEL #1002
;
;<h1/>2014/3/20 追加　MR24505→B08Cへ変更
;ｵﾍﾟﾚｰﾀがﾌﾞｻﾞｰを止めた時にﾎﾟｯﾄﾗｲﾌﾀｲﾏｰをﾘｾｯﾄする
;'ﾎﾟｯﾄﾀｲﾑﾘｾｯﾄ時の時間を格納
;
;　DM25220.D = SEC(CM700)
LD CR2002                ; 常時ON
LDP MR24501              ; ﾎﾟｯﾄﾗｲﾌﾀｲﾏﾘｾｯﾄ 
ORP MR8010               ; ﾎﾟｯﾄﾗｲﾌﾀｲﾏﾘｾｯﾄ
ORF B08C                 ; 接着剤準備報知ﾌﾗｸﾞ
ANL
NCJ #1003
;'ﾎﾟｯﾄﾀｲﾑﾘｾｯﾄ時の時間を格納
;
;　DM25220.D = SEC(CM700)
LD CR2002                ; 常時ON
MOV.D #0 @VM6
SEC CM700 @VM6           ; ｶﾚﾝﾀﾞﾀｲﾏ（年）
MOV.D @VM6 DM25220       ; ﾎﾟｯﾄﾀｲﾑﾘｾｯﾄ時間
LABEL #1003
;
;'ﾎﾟｯﾄﾗｲﾌﾀｲﾏ DM27060 (秒)を *分*秒に変換したものを算出
;  
;DM27080.D = DM27060.D / 60   '分  表示
;DM27082.D = DM27060.D MOD 60   '秒  表示
LD CR2002                ; 常時ON
NCJ #1009
;'ﾎﾟｯﾄﾗｲﾌﾀｲﾏ DM27060 (秒)を *分*秒に変換したものを算出
;
;DM27080.D = DM27060.D / 60   '分  表示
;
LD CR2002                ; 常時ON
LDA.L DM27060
CON
EXT.L
CON
DIV.L +60
CON
STA.D DM27080
;DM27082.D = DM27060.D MOD 60   '秒  表示
LD CR2002                ; 常時ON
LDA.L DM27060
CON
EXT.L
CON
DIV.L +60
CON
LDA.L TM2
CON
STA.D DM27082
LABEL #1009
;
;'接着剤解凍要求時間の設定
;
;DM10918.D = DM462.d - DM460.d
;
;'現在時間(DM10940)に解凍要求時間(DM10918)を足した数を算出
;
;DM10912.D = dm25220.d + dm10918.d
;
;'現在の時間をDM10914に取得
;
;DM10914.d = SEC(cm700)
;
;'DM10912  と  DM10914  との差を解凍時間として表示
;
;DM27210.D = DM10912.D - DM10914.D
;
;IF DM10912.D < DM10914.D THEN
;
;DM27210.D = 0
;
;END IF
;
;
;'DM10940にﾎﾟｯﾄﾗｲﾌﾀｲﾏDM7062を足した数を算出
;
;DM10932.D = dm25220.d + DM462.d
;
;'現在の時間をDM10934に取得
;
;DM10934.d = SEC(cm700)
;
;'DM10932  と  DM10934  との差をﾎﾟｯﾄﾗｲﾌ時間として表示
;
;DM27200.D = DM10932.D - DM10934.D
;
;IF DM10932.D < DM10934.D THEN
;
;DM27200.D = 0
;
;END IF
;
;
;dm10936.d = dm27200.d - 900
;
;IF DM27200.D < 900 THEN
;
;DM10936.D = 0
;
;END IF
;
;
;'接着剤の使用経過時間 DM25218 (秒) と、それを *分*秒に変換したものを算出
;  
;DM25218.D = DM10914.D - DM25220.D
;
;DM25214.D = DM25218.D / 60   '分  表示
;DM25216.D = DM25218.D MOD 60   '秒  表示
;
;IF DM25214.D > 99 THEN
;
;DM25214.D = 100   '表示は、ｵｰﾊﾞｰﾌﾛｰ状態にする
;DM25216.D = 100   '表示は、ｵｰﾊﾞｰﾌﾛｰ状態にする
;
;END IF
;
;
;
LD CR2002                ; 常時ON
NCJ #1004
;'接着剤解凍要求時間の設定
;
;DM10918.D = DM462.d - DM460.d
;
LD CR2002                ; 常時ON
LDA.L DM462
CON
SUB.L DM460              ; 装置基礎ﾃﾞｰﾀ31
CON
STA.D DM10918
;'現在時間(DM10940)に解凍要求時間(DM10918)を足した数を算出
;
;DM10912.D = dm25220.d + dm10918.d
;
LD CR2002                ; 常時ON
LDA.L DM25220            ; ﾎﾟｯﾄﾀｲﾑﾘｾｯﾄ時間
CON
ADD.L DM10918
CON
STA.D DM10912
;'現在の時間をDM10914に取得
;
;DM10914.d = SEC(cm700)
;
LD CR2002                ; 常時ON
MOV.D #0 @VM8
SEC CM700 @VM8           ; ｶﾚﾝﾀﾞﾀｲﾏ（年）
MOV.D @VM8 DM10914
;'DM10912  と  DM10914  との差を解凍時間として表示
;
;DM27210.D = DM10912.D - DM10914.D
;
LD CR2002                ; 常時ON
LDA.L DM10912
CON
SUB.L DM10914
CON
STA.D DM27210
;IF DM10912.D < DM10914.D THEN
;
LD<.D DM10912 DM10914
NCJ #2000
;DM27210.D = 0
;
LD CR2002                ; 常時ON
MOV.D #0 DM27210
;END IF
;
LABEL #2000
;'DM10940にﾎﾟｯﾄﾗｲﾌﾀｲﾏDM7062を足した数を算出
;
;DM10932.D = dm25220.d + DM462.d
;
LD CR2002                ; 常時ON
LDA.L DM25220            ; ﾎﾟｯﾄﾀｲﾑﾘｾｯﾄ時間
CON
ADD.L DM462
CON
STA.D DM10932
;'現在の時間をDM10934に取得
;
;DM10934.d = SEC(cm700)
;
LD CR2002                ; 常時ON
MOV.D #0 @VM10
SEC CM700 @VM10          ; ｶﾚﾝﾀﾞﾀｲﾏ（年）
MOV.D @VM10 DM10934
;'DM10932  と  DM10934  との差をﾎﾟｯﾄﾗｲﾌ時間として表示
;
;DM27200.D = DM10932.D - DM10934.D
;
LD CR2002                ; 常時ON
LDA.L DM10932
CON
SUB.L DM10934
CON
STA.D DM27200
;IF DM10932.D < DM10934.D THEN
;
LD<.D DM10932 DM10934
NCJ #2001
;DM27200.D = 0
;
LD CR2002                ; 常時ON
MOV.D #0 DM27200
;END IF
;
LABEL #2001
;dm10936.d = dm27200.d - 900
;
LD CR2002                ; 常時ON
LDA.L DM27200
CON
SUB.L +900
CON
STA.D DM10936
;IF DM27200.D < 900 THEN
;
LD<.D DM27200 #900
NCJ #2002
;DM10936.D = 0
;
LD CR2002                ; 常時ON
MOV.D #0 DM10936
;END IF
;
LABEL #2002
;'接着剤の使用経過時間 DM25218 (秒) と、それを *分*秒に変換したものを算出
;
;DM25218.D = DM10914.D - DM25220.D
;
LD CR2002                ; 常時ON
LDA.L DM10914
CON
SUB.L DM25220            ; ﾎﾟｯﾄﾀｲﾑﾘｾｯﾄ時間
CON
STA.D DM25218            ; 接着剤使用経過時間　TOTAL秒
;DM25214.D = DM25218.D / 60   '分  表示
;
LD CR2002                ; 常時ON
LDA.L DM25218            ; 接着剤使用経過時間　TOTAL秒
CON
EXT.L
CON
DIV.L +60
CON
STA.D DM25214            ; 接着剤使用経過時間　分
;DM25216.D = DM25218.D MOD 60   '秒  表示
;
LD CR2002                ; 常時ON
LDA.L DM25218            ; 接着剤使用経過時間　TOTAL秒
CON
EXT.L
CON
DIV.L +60
CON
LDA.L TM2
CON
STA.D DM25216            ; 接着剤使用経過時間　秒
;IF DM25214.D > 99 THEN
;
LD>.D DM25214 #99        ; 接着剤使用経過時間　分
NCJ #2003
;DM25214.D = 100   '表示は、ｵｰﾊﾞｰﾌﾛｰ状態にする
;
LD CR2002                ; 常時ON
MOV.D #100 DM25214       ; 接着剤使用経過時間　分
;DM25216.D = 100   '表示は、ｵｰﾊﾞｰﾌﾛｰ状態にする
;
LD CR2002                ; 常時ON
MOV.D #100 DM25216       ; 接着剤使用経過時間　秒
;END IF
;
LABEL #2003
LABEL #1004
;
LD R46103                ; _停止中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND MR19709              ; ﾀｲﾏﾘｾｯﾄｽｲｯﾁ
TMR #1275 #10
CON
AND T1275
RES MR8014               ; 接着剤交換要求ﾒｯｾｰｼﾞ
CON
RES LR24715
CON
DW.D #0 DM27060
CON
DW.D #0 DM27064
CON
DW.D #0 DM27066
LD=.D DM10936 #0
OUT MR8011               ; 接着剤解凍準備可
;2014/6/11 追加(LDB DM2000.1:動作ﾊﾟﾗﾒｰﾀ_ﾎﾟｯﾄﾗｲﾌﾀｲﾏ無効)
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB R46106               ; _定停止移行中
ANB LR101                ; _割り込みSW2　ON/OFF状態
AND=.D DM27210 #0
ANB DM2000.1             ; ﾎﾟｯﾄﾗｲﾌﾀｲﾏ 有効/無効
SET MR8013               ; 次接着剤解凍要求ﾒｯｾｰｼﾞ
;<h1/>2014/3/20 追加 B08C
LD R46103                ; _停止中　ﾓｰﾄﾞﾌﾗｸﾞ
OR LR101                 ; _割り込みSW2　ON/OFF状態
ORP MR24501              ; ﾎﾟｯﾄﾗｲﾌﾀｲﾏﾘｾｯﾄ 
ORP MR8010               ; ﾎﾟｯﾄﾗｲﾌﾀｲﾏﾘｾｯﾄ
ORF B08C                 ; 接着剤準備報知ﾌﾗｸﾞ
RES MR8013               ; 次接着剤解凍要求ﾒｯｾｰｼﾞ
;<h1/>2014/3/20 追加　各要求SW制御
;接着剤解凍要求後、5分後に接着剤交換要求、ﾌｨﾙﾑ受台清掃要求を自動でONさせる（ﾌﾞｻﾞｰを止めた時からではない）
LD LR5405                ; _Grp1_Task5_AUTO.STG
MPS
AND= DM29000 #0          ; 装置内ﾜｰｸ個数
@SET LR110               ; 起動後1回目ﾒﾓ
MPP
@SET LR111               ; 起動後ﾒﾓ
LDF LR101                ; _割り込みSW2　ON/OFF状態
RES LR110                ; 起動後1回目ﾒﾓ
LDB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
RES LR111                ; 起動後ﾒﾓ
LDP MR8013               ; 次接着剤解凍要求ﾒｯｾｰｼﾞ
MPS
SET MR24505              ; ﾎﾟｯﾄﾗｲﾌﾀｲﾏｰﾘｾｯﾄ要求
CON
SET MR24506              ; OP報知用
CON
SEC CM700 DM27214        ; ｶﾚﾝﾀﾞﾀｲﾏ（年）  接着剤準備報知日時
MPP
LDA.D DM27214            ; 接着剤準備報知日時
CON
ADD.D DM468              ; 装置基礎ﾃﾞｰﾀ35
CON
STA.D DM27216            ; 接着剤交換SW_ON_時間
CON
SET LR24710              ; 交換要求SW監視有効ﾌﾗｸﾞ
;<h1/>2014/4/10	清掃回数ｲﾝﾀｰﾊﾞﾙ対応
;			3回が設定されていれば、接着剤交換3回に1回受け台清掃となる
;			LR110はﾛｯﾄ切替後の最初はﾌｨﾙﾑ受台交換のSWはONさせない様にする為
LD LR111                 ; 起動後ﾒﾓ
AND LR24710              ; 交換要求SW監視有効ﾌﾗｸﾞ
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB LR101                ; _割り込みSW2　ON/OFF状態
ANB LR102                ; _割り込みSW3　ON/OFF状態
AND<=.D DM27216 DM10914  ; 接着剤交換SW_ON_時間
MPS
@INC DM56                ; ｲﾝﾀｰﾊﾞﾙ回数
CON
@SET LR101               ; _割り込みSW2　ON/OFF状態
CON
RES LR24710              ; 交換要求SW監視有効ﾌﾗｸﾞ
MPP
LDB LR110                ; 起動後1回目ﾒﾓ
AND>=.D DM56 DM472       ; ｲﾝﾀｰﾊﾞﾙ回数  _機種分類1　機種別ﾃﾞｰﾀ37
ANL
@SET LR102               ; _割り込みSW3　ON/OFF状態
CON
DW.D #0 DM56             ; ｲﾝﾀｰﾊﾞﾙ回数
LD MR24506               ; OP報知用
ANB R46104               ; _非常停止中　ﾓｰﾄﾞﾌﾗｸﾞ
ANF R44504               ; *Group1　ﾌﾞｻﾞｰ
RES MR24506              ; OP報知用
;ﾌｨﾙﾑ受け台設定
;'現在の時間を秒に変えてDM10910へ格納
;　
;　DM10920.d = SEC(cm700)
LDP MR24702              ; ﾌｨﾙﾑ受け台交換後ﾘｾｯﾄSW
NCJ #1005
;'現在の時間を秒に変えてDM10910へ格納
;
;　
;
;　DM10920.d = SEC(cm700)
LD CR2002                ; 常時ON
MOV.D #0 @VM12
SEC CM700 @VM12          ; ｶﾚﾝﾀﾞﾀｲﾏ（年）
MOV.D @VM12 DM10920
LABEL #1005
;
LDP MR24702              ; ﾌｨﾙﾑ受け台交換後ﾘｾｯﾄSW
DW.D #0 DM56             ; ｲﾝﾀｰﾊﾞﾙ回数
CON
SET LR24714
CON
RES MR8100               ; ﾌｨﾙﾑ受け台交換要求ﾒｯｾｰｼﾞ
LD LR24714
LDA.D DM27220
CON
STA.D DM27070
CON
LDA.D DM25224            ; ﾌｨﾙﾑ受け台使用経過時間　分
CON
STA.D DM27074
CON
LDA.D DM25226            ; ﾌｨﾙﾑ受け台使用経過時間　秒
CON
STA.D DM27076
;'DM10910にﾌｨﾙﾑ受け台使用可能時間DM7066を足した数を算出
;
;DM10922.D = dm10920.d + DM466.d
;
;'現在の時間をDM10924に取得
;
;DM10924.d = SEC(cm700)
;
;'DM10922  と  DM10924  との差をﾌｨﾙﾑ受け使用時間として表示
;
;DM27220.D = DM10922.D - DM10924.D
;
;IF DM10922.D < DM10924.D THEN
;
;DM27220.D = 0
;
;END IF
;
;
;'ﾌｨﾙﾑ受け台の使用経過時間 DM25218 (秒) と、
;'    それを *分*秒に変換したものを算出
;  
;DM25228.D = DM10924.D - DM10920.D
;
;DM25224.D = DM25228.D / 60   '分  表示
;DM25226.D = DM25228.D MOD 60   '秒  表示
;
;IF DM25224.D > 99 THEN
;
;DM25224.D = 100   '表示は、ｵｰﾊﾞｰﾌﾛｰ状態にする
;DM25226.D = 100   '表示は、ｵｰﾊﾞｰﾌﾛｰ状態にする
;
;END IF
;
;
;
LD CR2002                ; 常時ON
NCJ #1006
;'DM10910にﾌｨﾙﾑ受け台使用可能時間DM7066を足した数を算出
;
;DM10922.D = dm10920.d + DM466.d
;
LD CR2002                ; 常時ON
LDA.L DM10920
CON
ADD.L DM466              ; 装置基礎ﾃﾞｰﾀ34
CON
STA.D DM10922
;'現在の時間をDM10924に取得
;
;DM10924.d = SEC(cm700)
;
LD CR2002                ; 常時ON
MOV.D #0 @VM14
SEC CM700 @VM14          ; ｶﾚﾝﾀﾞﾀｲﾏ（年）
MOV.D @VM14 DM10924
;'DM10922  と  DM10924  との差をﾌｨﾙﾑ受け使用時間として表示
;
;DM27220.D = DM10922.D - DM10924.D
;
LD CR2002                ; 常時ON
LDA.L DM10922
CON
SUB.L DM10924
CON
STA.D DM27220
;IF DM10922.D < DM10924.D THEN
;
LD<.D DM10922 DM10924
NCJ #2004
;DM27220.D = 0
;
LD CR2002                ; 常時ON
MOV.D #0 DM27220
;END IF
;
LABEL #2004
;'ﾌｨﾙﾑ受け台の使用経過時間 DM25218 (秒) と、
;
;'    それを *分*秒に変換したものを算出
;
;DM25228.D = DM10924.D - DM10920.D
;
LD CR2002                ; 常時ON
LDA.L DM10924
CON
SUB.L DM10920
CON
STA.D DM25228            ; ﾌｨﾙﾑ受け台使用経過時間　TOTAL秒
;DM25224.D = DM25228.D / 60   '分  表示
;
LD CR2002                ; 常時ON
LDA.L DM25228            ; ﾌｨﾙﾑ受け台使用経過時間　TOTAL秒
CON
EXT.L
CON
DIV.L +60
CON
STA.D DM25224            ; ﾌｨﾙﾑ受け台使用経過時間　分
;DM25226.D = DM25228.D MOD 60   '秒  表示
;
LD CR2002                ; 常時ON
LDA.L DM25228            ; ﾌｨﾙﾑ受け台使用経過時間　TOTAL秒
CON
EXT.L
CON
DIV.L +60
CON
LDA.L TM2
CON
STA.D DM25226            ; ﾌｨﾙﾑ受け台使用経過時間　秒
;IF DM25224.D > 99 THEN
;
LD>.D DM25224 #99        ; ﾌｨﾙﾑ受け台使用経過時間　分
NCJ #2005
;DM25224.D = 100   '表示は、ｵｰﾊﾞｰﾌﾛｰ状態にする
;
LD CR2002                ; 常時ON
MOV.D #100 DM25224       ; ﾌｨﾙﾑ受け台使用経過時間　分
;DM25226.D = 100   '表示は、ｵｰﾊﾞｰﾌﾛｰ状態にする
;
LD CR2002                ; 常時ON
MOV.D #100 DM25226       ; ﾌｨﾙﾑ受け台使用経過時間　秒
;END IF
;
LABEL #2005
LABEL #1006
;
LD R46103                ; _停止中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND MR19709              ; ﾀｲﾏﾘｾｯﾄｽｲｯﾁ
TMR #1276 #10
CON
AND T1276
RES MR8100               ; ﾌｨﾙﾑ受け台交換要求ﾒｯｾｰｼﾞ
CON
RES LR24714
CON
DW.D #0 DM27070
CON
DW.D #0 DM27074
CON
DW.D #0 DM27076
LD CR2002                ; 常時ON
AND= DM27240 #0
AND= DM27241 #0
AND= DM27242 #0
AND= DM27243 #0
AND= DM27244 #0
AND= DM27245 #0
AND= DM27246 #0
AND= DM27247 #0
OUT MR24707              ; 接着剤ｼﾘｱﾙ未記入
LD= #290 DM3000          ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANB MR24707              ; 接着剤ｼﾘｱﾙ未記入
ANF MR24704              ; 接着剤LOT書き込み確定SW
BMOV DM27240 DM27230 #7
MPS
FMOV #0 DM27240 #7
MPP
AND CR2003               ; 常時OFF
OUT MR24807              ; ﾎﾟｯﾄﾗｲﾌﾀｲﾏﾘｾｯﾄ
;休止設定
LDB LR10500              ; INDEX治具1 使用可
ANB LR10501              ; INDEX治具2 使用可
ANB LR10502              ; INDEX治具3 使用可
ANB LR10503              ; INDEX治具4 使用可
OUT MR22300              ; INDEX全休止中
;@EM10.T = "INDEX JIG-1 休止中"
;@EM30.T = "INDEX JIG-2 休止中"
;@EM50.T = "INDEX JIG-3 休止中"
;@EM70.T = "INDEX JIG-4 休止中"
;@EM90.T = "INDEX JIG-1,2 休止中"
;@EM110.T = "INDEX JIG-1,3 休止中"
;@EM130.T = "INDEX JIG-1,4 休止中"
;@EM150.T = "INDEX JIG-2,3 休止中"
;@EM170.T = "INDEX JIG-2,4 休止中"
;@EM190.T = "INDEX JIG-3,4 休止中"
;@EM210.T = "INDEX JIG-1,2,3 休止中"
;@EM230.T = "INDEX JIG-1,2,4 休止中"
;@EM250.T = "INDEX JIG-2,3,4 休止中"
;@EM270.T = " "
;
LD CR2002                ; 常時ON
NCJ #1007
;@EM10.T = "INDEX JIG-1 休止中"
;
LD CR2002                ; 常時ON
SMOV "INDEX JIG-1 休止中" @EM10
;@EM30.T = "INDEX JIG-2 休止中"
;
LD CR2002                ; 常時ON
SMOV "INDEX JIG-2 休止中" @EM30
;@EM50.T = "INDEX JIG-3 休止中"
;
LD CR2002                ; 常時ON
SMOV "INDEX JIG-3 休止中" @EM50
;@EM70.T = "INDEX JIG-4 休止中"
;
LD CR2002                ; 常時ON
SMOV "INDEX JIG-4 休止中" @EM70
;@EM90.T = "INDEX JIG-1,2 休止中"
;
LD CR2002                ; 常時ON
SMOV "INDEX JIG-1,2 休止中" @EM90
;@EM110.T = "INDEX JIG-1,3 休止中"
;
LD CR2002                ; 常時ON
SMOV "INDEX JIG-1,3 休止中" @EM110
;@EM130.T = "INDEX JIG-1,4 休止中"
;
LD CR2002                ; 常時ON
SMOV "INDEX JIG-1,4 休止中" @EM130
;@EM150.T = "INDEX JIG-2,3 休止中"
;
LD CR2002                ; 常時ON
SMOV "INDEX JIG-2,3 休止中" @EM150
;@EM170.T = "INDEX JIG-2,4 休止中"
;
LD CR2002                ; 常時ON
SMOV "INDEX JIG-2,4 休止中" @EM170
;@EM190.T = "INDEX JIG-3,4 休止中"
;
LD CR2002                ; 常時ON
SMOV "INDEX JIG-3,4 休止中" @EM190
;@EM210.T = "INDEX JIG-1,2,3 休止中"
;
LD CR2002                ; 常時ON
SMOV "INDEX JIG-1,2,3 休止中" @EM210
;@EM230.T = "INDEX JIG-1,2,4 休止中"
;
LD CR2002                ; 常時ON
SMOV "INDEX JIG-1,2,4 休止中" @EM230
;@EM250.T = "INDEX JIG-2,3,4 休止中"
;
LD CR2002                ; 常時ON
SMOV "INDEX JIG-2,3,4 休止中" @EM250
;@EM270.T = " "
;
LD CR2002                ; 常時ON
SMOV " " @EM270
LABEL #1007
;
LDB LR10500              ; INDEX治具1 使用可
AND LR10501              ; INDEX治具2 使用可
AND LR10502              ; INDEX治具3 使用可
AND LR10503              ; INDEX治具4 使用可
ANB MR8400               ; 装置原点復帰待ち
SMOV @EM10 DM11250       ; USER 文字列表示　2行目
LD LR10500               ; INDEX治具1 使用可
ANB LR10501              ; INDEX治具2 使用可
AND LR10502              ; INDEX治具3 使用可
AND LR10503              ; INDEX治具4 使用可
ANB MR8400               ; 装置原点復帰待ち
SMOV @EM30 DM11250       ; USER 文字列表示　2行目
LD LR10500               ; INDEX治具1 使用可
AND LR10501              ; INDEX治具2 使用可
ANB LR10502              ; INDEX治具3 使用可
AND LR10503              ; INDEX治具4 使用可
ANB MR8400               ; 装置原点復帰待ち
SMOV @EM50 DM11250       ; USER 文字列表示　2行目
LD LR10500               ; INDEX治具1 使用可
AND LR10501              ; INDEX治具2 使用可
AND LR10502              ; INDEX治具3 使用可
ANB LR10503              ; INDEX治具4 使用可
ANB MR8400               ; 装置原点復帰待ち
SMOV @EM70 DM11250       ; USER 文字列表示　2行目
LDB LR10500              ; INDEX治具1 使用可
ANB LR10501              ; INDEX治具2 使用可
AND LR10502              ; INDEX治具3 使用可
AND LR10503              ; INDEX治具4 使用可
ANB MR8400               ; 装置原点復帰待ち
SMOV @EM90 DM11250       ; USER 文字列表示　2行目
LDB LR10500              ; INDEX治具1 使用可
AND LR10501              ; INDEX治具2 使用可
ANB LR10502              ; INDEX治具3 使用可
AND LR10503              ; INDEX治具4 使用可
ANB MR8400               ; 装置原点復帰待ち
SMOV @EM110 DM11250      ; USER 文字列表示　2行目
LDB LR10500              ; INDEX治具1 使用可
AND LR10501              ; INDEX治具2 使用可
AND LR10502              ; INDEX治具3 使用可
ANB LR10503              ; INDEX治具4 使用可
ANB MR8400               ; 装置原点復帰待ち
SMOV @EM130 DM11250      ; USER 文字列表示　2行目
LD LR10500               ; INDEX治具1 使用可
ANB LR10501              ; INDEX治具2 使用可
ANB LR10502              ; INDEX治具3 使用可
AND LR10503              ; INDEX治具4 使用可
ANB MR8400               ; 装置原点復帰待ち
SMOV @EM150 DM11250      ; USER 文字列表示　2行目
LD LR10500               ; INDEX治具1 使用可
ANB LR10501              ; INDEX治具2 使用可
AND LR10502              ; INDEX治具3 使用可
ANB LR10503              ; INDEX治具4 使用可
ANB MR8400               ; 装置原点復帰待ち
SMOV @EM170 DM11250      ; USER 文字列表示　2行目
LD LR10500               ; INDEX治具1 使用可
AND LR10501              ; INDEX治具2 使用可
ANB LR10502              ; INDEX治具3 使用可
ANB LR10503              ; INDEX治具4 使用可
ANB MR8400               ; 装置原点復帰待ち
SMOV @EM190 DM11250      ; USER 文字列表示　2行目
LDB LR10500              ; INDEX治具1 使用可
ANB LR10501              ; INDEX治具2 使用可
ANB LR10502              ; INDEX治具3 使用可
AND LR10503              ; INDEX治具4 使用可
ANB MR8400               ; 装置原点復帰待ち
SMOV @EM210 DM11250      ; USER 文字列表示　2行目
LDB LR10500              ; INDEX治具1 使用可
ANB LR10501              ; INDEX治具2 使用可
AND LR10502              ; INDEX治具3 使用可
ANB LR10503              ; INDEX治具4 使用可
ANB MR8400               ; 装置原点復帰待ち
SMOV @EM230 DM11250      ; USER 文字列表示　2行目
LD LR10500               ; INDEX治具1 使用可
ANB LR10501              ; INDEX治具2 使用可
ANB LR10502              ; INDEX治具3 使用可
ANB LR10503              ; INDEX治具4 使用可
ANB MR8400               ; 装置原点復帰待ち
SMOV @EM250 DM11250      ; USER 文字列表示　2行目
LD LR10500               ; INDEX治具1 使用可
AND LR10501              ; INDEX治具2 使用可
AND LR10502              ; INDEX治具3 使用可
AND LR10503              ; INDEX治具4 使用可
ANB MR8400               ; 装置原点復帰待ち
OR MR8400                ; 装置原点復帰待ち
OUB MR15900              ; 特殊ｽﾃｰﾀｽ-1表示ON
CON
SMOV @EM270 DM11250      ; USER 文字列表示　2行目
;ﾀｯﾁﾊﾟﾈﾙ 原点状態表示
LD CR2002                ; 常時ON
AND MR23500              ; 旋回軸_給材PIN_P1
AND MR609                ; 給材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ 原点復帰済 ﾗﾝﾌﾟ
AND MR17705              ; 給材ﾊﾞｯｸｱｯﾌﾟ軸ｻｰﾎﾞON表示
OUB MR17900              ; 給材部原点位置無し表示
LD CR2002                ; 常時ON
OUB MR17901              ; ﾊﾞｯﾌｧ部原点位置無し表示
LD CR2002                ; 常時ON
ANB R11402               ; ﾌｨﾙﾑ受け 下降
AND R11403               ; ﾌｨﾙﾑ受け 上昇
ANB R7514                ; ﾌｨﾙﾑ受け部  F受け 下限
AND R7515                ; ﾌｨﾙﾑ受け部  F受け 上限
ANB R11400               ; ﾌｨﾙﾑﾊﾝﾄﾞ開閉 開
AND R11401               ; ﾌｨﾙﾑﾊﾝﾄﾞ開閉 閉
ANB R7512                ; ﾌｨﾙﾑ受け部  Fﾊﾝﾄﾞ 開限
AND R7513                ; ﾌｨﾙﾑ受け部  Fﾊﾝﾄﾞ 閉限
ANB R11410               ; 治具ｴｱｰ真空  上昇
ANB R7608                ; 治具ｴｱｰ真空  上限
AND R7609                ; 治具ｴｱｰ真空  下限
AND R7613                ; 治具ｴｱｰ真空 圧力2 (破壊)
OUB MR17902              ; ﾌｨﾙﾑ受け部原点位置無し表示
LD CR2002                ; 常時ON
ANB R11406               ; ﾕﾆｯﾄ 下降
ANB R7600                ; 接着剤塗布部 ﾕﾆｯﾄ 下限
AND R7601                ; 接着剤塗布部 ﾕﾆｯﾄ 上限
ANB R11404               ; ﾍｯﾄﾞ前後 前進
ANB R7602                ; 接着剤塗布部 ﾍｯﾄﾞ 前限
AND R7603                ; 接着剤塗布部 ﾍｯﾄﾞ 後限
AND MR17706              ; 塗布軸ｻｰﾎﾞON表示
AND MR23600              ; 接着剤塗布_P1
AND MR1011               ; 接着剤塗布RB 原点復帰済み ﾗﾝﾌﾟ
OUB MR17903              ; 塗布部原点位置無し表示
LD CR2002                ; 常時ON
ANB R11206               ; ｽｷｰｼﾞ台 上昇
ANB R7400                ; ｽｷｰｼﾞ台部 ｽｷｰｼﾞ台 上限
AND R7401                ; ｽｷｰｼﾞ台部 ｽｷｰｼﾞ台 下限
ANB R11204               ; ｽｸﾚｰﾊﾟｰ（大） 下降
ANB R7408                ; ｽｷｰｼﾞ部 ｽｸﾚｰﾊﾟｰ（大） 下限
AND R7409                ; ｽｷｰｼﾞ部 ｽｸﾚｰﾊﾟｰ（大） 上限
AND MR23700              ; ｽｷｰｼﾞ_P1
AND MR17707              ; ｽｷｰｼﾞ軸ｻｰﾎﾞON表示
AND MR1306               ; ｽｷｰｼﾞRB 原点復帰済み ﾗﾝﾌﾟ
AND R7403                ; ｽｷｰｼﾞ台下流側 ﾜｰｸ圧力2
OUB MR17904              ; ｽｷｰｼﾞ部原点位置無し表示
LD CR2002                ; 常時ON
ANB R11200               ; 主軸ﾛｰﾗｸﾗﾝﾌﾟ 上昇
AND R11201               ; 主軸ﾛｰﾗｸﾗﾝﾌﾟ 下降
ANB R7606                ; 転写部  主軸ﾛｰﾗｸﾗﾝﾌﾟ 上限
AND R7607                ; 転写部  主軸ﾛｰﾗｸﾗﾝﾌﾟ 下限
ANB R11210               ; ｽﾌﾟﾘﾝｸﾞ　上昇
ANB R7310                ; F巻出し部 ｽﾌﾟﾘﾝｸﾞ 上限
AND R7311                ; F巻出し部 ｽﾌﾟﾘﾝｸﾞ 下限
ANB R11212               ; ﾀﾞﾝｻ後ﾌｨﾙﾑ押え 上昇
ANB R7306                ; F巻出し部 ﾀﾞﾝｻﾛｰﾗ後F押え 上限
AND R7307                ; F巻出し部 ﾀﾞﾝｻﾛｰﾗ後F押え 下限
AND MR21109              ; MC 軸1原点復帰完了記憶
AND MR23802              ; 接着剤転写_P3
AND MR20804              ; MC_軸2 ｻｰﾎﾞON LP
OUB MR17905              ; 転写部原点位置無し表示
LD CR2002                ; 常時ON
ANB R11214               ; 巻き出しﾌｨﾙﾑ押え 上昇
ANB R7304                ; F巻出し部 巻出しF押え 上限
AND R7305                ; F巻出し部 巻出しF押え 下限
ANB R11210               ; ｽﾌﾟﾘﾝｸﾞ　上昇
ANB R7310                ; F巻出し部 ｽﾌﾟﾘﾝｸﾞ 上限
AND R7311                ; F巻出し部 ｽﾌﾟﾘﾝｸﾞ 下限
ANB R11212               ; ﾀﾞﾝｻ後ﾌｨﾙﾑ押え 上昇
ANB R7306                ; F巻出し部 ﾀﾞﾝｻﾛｰﾗ後F押え 上限
AND R7307                ; F巻出し部 ﾀﾞﾝｻﾛｰﾗ後F押え 下限
ANB R11208               ; ﾀﾞﾝｻｰﾛｰﾗｸﾗﾝﾌﾟ 閉じ
LD R11209                ; ﾀﾞﾝｻｰﾛｰﾗｸﾗﾝﾌﾟ 開き
ANB R7308                ; F巻出し部 ﾀﾞﾝｻﾛｰﾗｸﾗﾝﾌﾟ 閉限
AND R7309                ; F巻出し部 ﾀﾞﾝｻﾛｰﾗｸﾗﾝﾌﾟ 開限
OR CR2002                ; 常時ON
ANL
ANB MR2005               ; 巻き出しﾓｰﾀ回転中 ﾗﾝﾌﾟ
OUB MR17906              ; 巻出しM部原点位置無し表示
LD CR2002                ; 常時ON
ANB R11408               ; 巻き取りﾌｨﾙﾑ押え　下降
ANB R7500                ; F巻取り部 巻取りF押え上下 下限
AND R7501                ; F巻取り部 巻取りF押え上下 上限
ANB MR2100               ; 巻き取りﾓｰﾀ回転中 ﾗﾝﾌﾟ
OUB MR17907              ; 巻取りM部原点位置無し表示
LD CR2002                ; 常時ON
AND MR24600              ; 除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ_Z軸_P1
AND MR3307               ; 除材ﾊﾞｯｸｱｯﾌﾟﾋﾟﾝ 原点復帰済
AND MR17708              ; 除材ﾊﾞｯｸｱｯﾌﾟ軸ｻｰﾎﾞON表示
AND MR23000              ; 除材搬送_X軸_P1
AND MR2805               ; 搬送X軸RBｻｰﾎﾞｵﾝ ﾗﾝﾌﾟ
AND MR2907               ; 搬送X軸RB原点復帰済み ﾗﾝﾌﾟ
AND MR24200              ; 除材搬送_Y軸_P1
AND MR2812               ; 搬送Y軸RBｻｰﾎﾞｵﾝ ﾗﾝﾌﾟ
AND MR2908               ; 搬送Y軸RB原点復帰済み ﾗﾝﾌﾟ
AND MR23300              ; 除材搬送_Z軸_P1
AND MR2904               ; 搬送Z軸RBｻｰﾎﾞｵﾝ ﾗﾝﾌﾟ
AND MR2909               ; 搬送Z軸RB原点復帰済み ﾗﾝﾌﾟ
AND R7511                ; 除材部 除材ﾊﾝﾄﾞ 圧力2
AND MR23400              ; 除材搬送_θ軸_P1
AND MR3109               ; 搬送θ軸RBｻｰﾎﾞｵﾝ ﾗﾝﾌﾟ
AND MR3113               ; 搬送θ軸RB原点復帰済み ﾗﾝﾌﾟ
OUB MR17908              ; 除材搬送部原点位置無し表示
LD CR2002                ; 常時ON
OUB MR17909              ; 除材ｱﾗｲﾒﾝﾄ部原点位置無し表示
LDB MR17900              ; 給材部原点位置無し表示
ANB MR17901              ; ﾊﾞｯﾌｧ部原点位置無し表示
ANB MR17902              ; ﾌｨﾙﾑ受け部原点位置無し表示
ANB MR17903              ; 塗布部原点位置無し表示
ANB MR17904              ; ｽｷｰｼﾞ部原点位置無し表示
ANB MR17905              ; 転写部原点位置無し表示
ANB MR17906              ; 巻出しM部原点位置無し表示
ANB MR17907              ; 巻取りM部原点位置無し表示
ANB MR17908              ; 除材搬送部原点位置無し表示
ANB MR17909              ; 除材ｱﾗｲﾒﾝﾄ部原点位置無し表示
ANB R46114               ; _装置原点復帰待ち
OUT MR17915              ; AUTO動作OK
LDB MR17915              ; AUTO動作OK
ANB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
OUB MR17914              ; TP AUTO不可表示
;SENSER AMP Setting 
; SENSER AMP Setting / 巻出しﾌｨﾙﾑ 残少検出ｾﾝｻ
LD CR2002                ; 常時ON
AND= DM3000 #520         ; _MainTP　表示中ﾍﾟｰｼﾞNo
MEP
MOV W015 DM31006
MOV W016 DM31016
MOV W03D DM31026
MOV W03E DM31036
LD CR2002                ; 常時ON
ANP MR24710              ; AMPﾃﾞｰﾀ書き込み要求
MOV DM31006 DM31004      ; ｾﾝｻ1 設定値格納ﾃﾞﾊﾞｲｽ
SPWR #0 #1 #1 #833 DM31000;ｾﾝｻ1 結果格納ﾃﾞﾊﾞｲｽ
; SENSER AMP Setting / 巻取りﾌｨﾙﾑ 満杯検出ｾﾝｻ
LD CR2002                ; 常時ON
ANP MR24710              ; AMPﾃﾞｰﾀ書き込み要求
MOV DM31016 DM31014      ; ｾﾝｻ2 設定値格納ﾃﾞﾊﾞｲｽ
SPWR #0 #1 #2 #833 DM31010;ｾﾝｻ2 結果格納ﾃﾞﾊﾞｲｽ
; SENSER AMP Setting / NG DUMMY BOX 満杯検出ｾﾝｻ
LD CR2002                ; 常時ON
ANP MR24710              ; AMPﾃﾞｰﾀ書き込み要求
MOV DM31026 DM31024      ; ｾﾝｻ3 設定値格納ﾃﾞﾊﾞｲｽ
SPWR #0 #2 #1 #833 DM31020;ｾﾝｻ3 結果格納ﾃﾞﾊﾞｲｽ
; SENSER AMP Setting / NG DUMMY BOX BOX有無検出ｾﾝｻ
LD CR2002                ; 常時ON
ANP MR24710              ; AMPﾃﾞｰﾀ書き込み要求
MOV DM31036 DM31034      ; ｾﾝｻ4 設定値格納ﾃﾞﾊﾞｲｽ
SPWR #0 #2 #2 #833 DM31030;ｾﾝｻ4 結果格納ﾃﾞﾊﾞｲｽ
; Monitor / 画面切替
LD MR7000                ; 画面切替
MOV #246 DM3008          ; _MainTP　切替ﾍﾟｰｼﾞNo
;上下流ｲﾝﾀｰﾛｯｸ 信号
LD CR2002                ; 常時ON
OUT R5600                ; 自PLC電源状態　（常時ON）
LDB R46104               ; _非常停止中　ﾓｰﾄﾞﾌﾗｸﾞ
OUT R5601                ; 非常停止　（通常ON）
LD R46114                ; _装置原点復帰待ち
OUT MR15602              ; ｲﾝﾀﾛｯｸ
LD MR5602                ; O_ｲﾝﾀｰﾛｯｸ信号1
OR MR15602               ; ｲﾝﾀﾛｯｸ
LD CR2003                ; 常時OFF
AND R5306                ; INDEX 位置決め完了
ORL
OUB R5602                ; O_ｲﾝﾀｰﾛｯｸ信号1
LD MR5603                ; O_ｲﾝﾀｰﾛｯｸ信号2
OUB R5603                ; O_ｲﾝﾀｰﾛｯｸ信号2
LD= DM3000 #2016         ; _MainTP　表示中ﾍﾟｰｼﾞNo
MEF
RES LR11007              ; 3cellｲﾝﾀﾛｯｸ信号無視
LD CR2002                ; 常時ON
AND MR001                ; ｲﾝﾃﾞｯｸｽ原点復帰完了
MPS
AND= DM35000 #0          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
DW #1 DM25000            ; ﾊﾟﾈﾙ2019 ﾃｰﾌﾞﾙ番号 ST1
CON
DW #4 DM25002            ; ﾊﾟﾈﾙ2019 ﾃｰﾌﾞﾙ番号 ST2
CON
DW #3 DM25004            ; ﾊﾟﾈﾙ2019 ﾃｰﾌﾞﾙ番号 ST3
CON
DW #2 DM25006            ; ﾊﾟﾈﾙ2019 ﾃｰﾌﾞﾙ番号 ST4
MRD
AND= DM35000 #1          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
DW #2 DM25000            ; ﾊﾟﾈﾙ2019 ﾃｰﾌﾞﾙ番号 ST1
CON
DW #1 DM25002            ; ﾊﾟﾈﾙ2019 ﾃｰﾌﾞﾙ番号 ST2
CON
DW #4 DM25004            ; ﾊﾟﾈﾙ2019 ﾃｰﾌﾞﾙ番号 ST3
CON
DW #3 DM25006            ; ﾊﾟﾈﾙ2019 ﾃｰﾌﾞﾙ番号 ST4
MRD
AND= DM35000 #2          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
DW #3 DM25000            ; ﾊﾟﾈﾙ2019 ﾃｰﾌﾞﾙ番号 ST1
CON
DW #2 DM25002            ; ﾊﾟﾈﾙ2019 ﾃｰﾌﾞﾙ番号 ST2
CON
DW #1 DM25004            ; ﾊﾟﾈﾙ2019 ﾃｰﾌﾞﾙ番号 ST3
CON
DW #4 DM25006            ; ﾊﾟﾈﾙ2019 ﾃｰﾌﾞﾙ番号 ST4
MPP
AND= DM35000 #3          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
DW #4 DM25000            ; ﾊﾟﾈﾙ2019 ﾃｰﾌﾞﾙ番号 ST1
CON
DW #3 DM25002            ; ﾊﾟﾈﾙ2019 ﾃｰﾌﾞﾙ番号 ST2
CON
DW #2 DM25004            ; ﾊﾟﾈﾙ2019 ﾃｰﾌﾞﾙ番号 ST3
CON
DW #1 DM25006            ; ﾊﾟﾈﾙ2019 ﾃｰﾌﾞﾙ番号 ST4
LD R54206                ; KtoV_MDF_INV
OR R46106                ; _定停止移行中
OUT R1000                ; 割り込みSW1 操作不可
LD R54206                ; KtoV_MDF_INV
OR MR9805                ; 接着剤交換中
OR LR101                 ; _割り込みSW2　ON/OFF状態
OUT R1001                ; 割り込みSW2 操作不可
LD R54206                ; KtoV_MDF_INV
OR MR9800                ; ﾌｨﾙﾑ受け交換中
OR LR102                 ; _割り込みSW3　ON/OFF状態
OUT R1002                ; 割り込みSW3 操作不可
LD R54206                ; KtoV_MDF_INV
OR R46106                ; _定停止移行中
OUT R1003                ; 割り込みSW4 操作不可
;ｻｲｸﾙﾀｲﾑ計測
LD MR6600                ; ｲﾝﾃﾞｯｸｽ回転中 ｻｲｸﾙﾀｲﾑ計測用
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
@INC.D DM11300
LDF MR6600               ; ｲﾝﾃﾞｯｸｽ回転中 ｻｲｸﾙﾀｲﾑ計測用
MOV.D DM11300 DM5062     ; _処理計測時間11
MOV.D #0 DM11300
LD MR6601                ; ﾜｰｸ給材中 ｻｲｸﾙﾀｲﾑ計測用
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
@INC.D DM11304
LDF MR6601               ; ﾜｰｸ給材中 ｻｲｸﾙﾀｲﾑ計測用
MOV.D DM11304 DM5058     ; _処理計測時間9
MOV.D #0 DM11304
LD MR6602                ; 接着剤転写UT ｻｲｸﾙﾀｲﾑ計測用
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
@INC.D DM11308
LDF MR6602               ; 接着剤転写UT ｻｲｸﾙﾀｲﾑ計測用
MOV.D DM11308 DM5042     ; _処理計測時間1
MOV.D #0 DM11308
LD MR6603                ; 接着剤塗布 ｻｲｸﾙﾀｲﾑ計測用
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
@INC.D DM11312
LDF MR6603               ; 接着剤塗布 ｻｲｸﾙﾀｲﾑ計測用
MOV.D DM11312 DM5044     ; _処理計測時間2
MOV.D #0 DM11312
LD MR6604                ; ｽｷｰｼﾞ ｻｲｸﾙﾀｲﾑ計測用
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
@INC.D DM11316
LDF MR6604               ; ｽｷｰｼﾞ ｻｲｸﾙﾀｲﾑ計測用
MOV.D DM11316 DM5046     ; _処理計測時間3
MOV.D #0 DM11316
LD MR6605                ; 接着剤転写 ｻｲｸﾙﾀｲﾑ計測
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
@INC.D DM11320
LDF MR6605               ; 接着剤転写 ｻｲｸﾙﾀｲﾑ計測
MOV.D DM11320 DM5048     ; _処理計測時間4
MOV.D #0 DM11320
LD MR6606                ; 除材UT ｻｲｸﾙﾀｲﾑ計測用
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
@INC.D DM11324
LDF MR6606               ; 除材UT ｻｲｸﾙﾀｲﾑ計測用
MOV.D DM11324 DM5052     ; _処理計測時間6
MOV.D #0 DM11324
LD MR6607                ; 個別除材動作 ｻｲｸﾙﾀｲﾑ計測用
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
@INC.D DM11328
LDF MR6607               ; 個別除材動作 ｻｲｸﾙﾀｲﾑ計測用
MOV.D DM11328 DM5054     ; _処理計測時間7
MOV.D #0 DM11328
LD MR6608                ; 画像ｱﾗｲﾒﾝﾄ ｻｲｸﾙﾀｲﾑ計測用
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
@INC.D DM11332
LDF MR6608               ; 画像ｱﾗｲﾒﾝﾄ ｻｲｸﾙﾀｲﾑ計測用
MOV.D DM11332 DM5056     ; _処理計測時間8
MOV.D #0 DM11332
LD MR6609                ; ﾏｼﾝｻｲｸﾙ
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
AND CR2003               ; 常時OFF
@INC.D DM11336
LDF MR6609               ; ﾏｼﾝｻｲｸﾙ
AND CR2003               ; 常時OFF
MOV.D DM11336 DM5040     ; _装置ｻｲｸﾙﾀｲﾑ
MOV.D #0 DM11336
LD LR12001               ; INDEX_治具1 ﾜｰｸ有無-1
AND LR12002              ; INDEX_治具1 ﾜｰｸ有無-2
AND LR12003              ; INDEX_治具1 ﾜｰｸ有無-3
AND LR12004              ; INDEX_治具1 ﾜｰｸ有無-4
AND LR12005              ; INDEX_治具1 ﾜｰｸ有無-5
AND LR12006              ; INDEX_治具1 ﾜｰｸ有無-6
AND LR12007              ; INDEX_治具1 ﾜｰｸ有無-7
AND LR12008              ; INDEX_治具1 ﾜｰｸ有無-8
AND LR12009              ; INDEX_治具1 ﾜｰｸ有無-9
AND LR12010              ; INDEX_治具1 ﾜｰｸ有無-10
OUT MR9101               ; INDEX_治具-1上ﾜｰｸ全て有り
LD LR12101               ; INDEX_治具2 ﾜｰｸ有無-1
AND LR12102              ; INDEX_治具2 ﾜｰｸ有無-2
AND LR12103              ; INDEX_治具2 ﾜｰｸ有無-3
AND LR12104              ; INDEX_治具2 ﾜｰｸ有無-4
AND LR12105              ; INDEX_治具2 ﾜｰｸ有無-5
AND LR12106              ; INDEX_治具2 ﾜｰｸ有無-6
AND LR12107              ; INDEX_治具2 ﾜｰｸ有無-7
AND LR12108              ; INDEX_治具2 ﾜｰｸ有無-8
AND LR12109              ; INDEX_治具2 ﾜｰｸ有無-9
AND LR12110              ; INDEX_治具2 ﾜｰｸ有無-10
OUT MR9102               ; INDEX_治具-2上ﾜｰｸ全て有り
LD LR12201               ; INDEX_治具3 ﾜｰｸ有無-1
AND LR12202              ; INDEX_治具3 ﾜｰｸ有無-2
AND LR12203              ; INDEX_治具3 ﾜｰｸ有無-3
AND LR12204              ; INDEX_治具3 ﾜｰｸ有無-4
AND LR12205              ; INDEX_治具3 ﾜｰｸ有無-5
AND LR12206              ; INDEX_治具3 ﾜｰｸ有無-6
AND LR12207              ; INDEX_治具3 ﾜｰｸ有無-7
AND LR12208              ; INDEX_治具3 ﾜｰｸ有無-8
AND LR12209              ; INDEX_治具3 ﾜｰｸ有無-9
AND LR12210              ; INDEX_治具3 ﾜｰｸ有無-10
OUT MR9103               ; INDEX_治具-3上ﾜｰｸ全て有り
LD LR12301               ; INDEX_治具4 ﾜｰｸ有無-1
AND LR12302              ; INDEX_治具4 ﾜｰｸ有無-2
AND LR12303              ; INDEX_治具4 ﾜｰｸ有無-3
AND LR12304              ; INDEX_治具4 ﾜｰｸ有無-4
AND LR12305              ; INDEX_治具4 ﾜｰｸ有無-5
AND LR12306              ; INDEX_治具4 ﾜｰｸ有無-6
AND LR12307              ; INDEX_治具4 ﾜｰｸ有無-7
AND LR12308              ; INDEX_治具4 ﾜｰｸ有無-8
AND LR12309              ; INDEX_治具4 ﾜｰｸ有無-9
AND LR12310              ; INDEX_治具4 ﾜｰｸ有無-10
OUT MR9104               ; INDEX_治具-4上ﾜｰｸ全て有り
LD MR24614               ; TP ｵｰﾙﾘｾｯﾄSW
TMR #1160 #10
CON
AND T1160
DW #0 W072
CON
DW #0 W08F
CON
ZRES LR13000 LR13005     ; Table-1 ﾜｰｸ有  Table-1 救済ｽｲｯﾁ表示
CON
ZRES LR13100 LR13105     ; Table-2 ﾜｰｸ有  Table-2 救済ｽｲｯﾁ表示
CON
ZRES LR13200 LR13205     ; Table-3 ﾜｰｸ有  Table-3 救済ｽｲｯﾁ表示
CON
ZRES LR13300 LR13305     ; Table-4 ﾜｰｸ有  Table-4 救済ｽｲｯﾁ表示
CON
ZRES LR12001 LR12010     ; INDEX_治具1 ﾜｰｸ有無-1  INDEX_治具1 ﾜｰｸ有無-10
CON
ZRES LR12101 LR12110     ; INDEX_治具2 ﾜｰｸ有無-1  INDEX_治具2 ﾜｰｸ有無-10
CON
ZRES LR12201 LR12210     ; INDEX_治具3 ﾜｰｸ有無-1  INDEX_治具3 ﾜｰｸ有無-10
CON
ZRES LR12301 LR12310     ; INDEX_治具4 ﾜｰｸ有無-1  INDEX_治具4 ﾜｰｸ有無-10
CON
OUT MR24615              ; TP ｵｰﾙﾘｾｯﾄSW LP
LDF R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
LD MR9101                ; INDEX_治具-1上ﾜｰｸ全て有り
ANB MR9102               ; INDEX_治具-2上ﾜｰｸ全て有り
ANB MR9103               ; INDEX_治具-3上ﾜｰｸ全て有り
ANB MR9104               ; INDEX_治具-4上ﾜｰｸ全て有り
LD MR9102                ; INDEX_治具-2上ﾜｰｸ全て有り
ANB MR9103               ; INDEX_治具-3上ﾜｰｸ全て有り
ANB MR9104               ; INDEX_治具-4上ﾜｰｸ全て有り
ANB MR9101               ; INDEX_治具-1上ﾜｰｸ全て有り
ORL
LD MR9103                ; INDEX_治具-3上ﾜｰｸ全て有り
ANB MR9104               ; INDEX_治具-4上ﾜｰｸ全て有り
ANB MR9101               ; INDEX_治具-1上ﾜｰｸ全て有り
ANB MR9102               ; INDEX_治具-2上ﾜｰｸ全て有り
ORL
LD MR9104                ; INDEX_治具-4上ﾜｰｸ全て有り
ANB MR9101               ; INDEX_治具-1上ﾜｰｸ全て有り
ANB MR9102               ; INDEX_治具-2上ﾜｰｸ全て有り
ANB MR9103               ; INDEX_治具-3上ﾜｰｸ全て有り
ORL
ANL
DW #10 DM29000           ; 装置内ﾜｰｸ個数
LDF R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
LD MR9101                ; INDEX_治具-1上ﾜｰｸ全て有り
AND MR9102               ; INDEX_治具-2上ﾜｰｸ全て有り
ANB MR9103               ; INDEX_治具-3上ﾜｰｸ全て有り
ANB MR9104               ; INDEX_治具-4上ﾜｰｸ全て有り
LD MR9101                ; INDEX_治具-1上ﾜｰｸ全て有り
ANB MR9102               ; INDEX_治具-2上ﾜｰｸ全て有り
AND MR9103               ; INDEX_治具-3上ﾜｰｸ全て有り
ANB MR9104               ; INDEX_治具-4上ﾜｰｸ全て有り
ORL
LD MR9101                ; INDEX_治具-1上ﾜｰｸ全て有り
ANB MR9102               ; INDEX_治具-2上ﾜｰｸ全て有り
ANB MR9103               ; INDEX_治具-3上ﾜｰｸ全て有り
AND MR9104               ; INDEX_治具-4上ﾜｰｸ全て有り
ORL
LDB MR9101               ; INDEX_治具-1上ﾜｰｸ全て有り
AND MR9102               ; INDEX_治具-2上ﾜｰｸ全て有り
AND MR9103               ; INDEX_治具-3上ﾜｰｸ全て有り
ANB MR9104               ; INDEX_治具-4上ﾜｰｸ全て有り
ORL
LDB MR9101               ; INDEX_治具-1上ﾜｰｸ全て有り
AND MR9102               ; INDEX_治具-2上ﾜｰｸ全て有り
ANB MR9103               ; INDEX_治具-3上ﾜｰｸ全て有り
AND MR9104               ; INDEX_治具-4上ﾜｰｸ全て有り
ORL
LDB MR9101               ; INDEX_治具-1上ﾜｰｸ全て有り
ANB MR9102               ; INDEX_治具-2上ﾜｰｸ全て有り
AND MR9103               ; INDEX_治具-3上ﾜｰｸ全て有り
AND MR9104               ; INDEX_治具-4上ﾜｰｸ全て有り
ORL
ANL
DW #20 DM29000           ; 装置内ﾜｰｸ個数
LDF R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
LD MR9101                ; INDEX_治具-1上ﾜｰｸ全て有り
AND MR9102               ; INDEX_治具-2上ﾜｰｸ全て有り
AND MR9103               ; INDEX_治具-3上ﾜｰｸ全て有り
ANB MR9104               ; INDEX_治具-4上ﾜｰｸ全て有り
LD MR9101                ; INDEX_治具-1上ﾜｰｸ全て有り
AND MR9102               ; INDEX_治具-2上ﾜｰｸ全て有り
ANB MR9103               ; INDEX_治具-3上ﾜｰｸ全て有り
AND MR9104               ; INDEX_治具-4上ﾜｰｸ全て有り
ORL
LDB MR9101               ; INDEX_治具-1上ﾜｰｸ全て有り
AND MR9102               ; INDEX_治具-2上ﾜｰｸ全て有り
AND MR9103               ; INDEX_治具-3上ﾜｰｸ全て有り
AND MR9104               ; INDEX_治具-4上ﾜｰｸ全て有り
ORL
ANL
DW #30 DM29000           ; 装置内ﾜｰｸ個数
LDF R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
AND MR9101               ; INDEX_治具-1上ﾜｰｸ全て有り
AND MR9102               ; INDEX_治具-2上ﾜｰｸ全て有り
AND MR9103               ; INDEX_治具-3上ﾜｰｸ全て有り
AND MR9104               ; INDEX_治具-4上ﾜｰｸ全て有り
DW #40 DM29000           ; 装置内ﾜｰｸ個数
LD CR2003                ; 常時OFF
ANB LR13005              ; Table-1 救済ｽｲｯﾁ表示
ANB LR13105              ; Table-2 救済ｽｲｯﾁ表示
ANB LR13205              ; Table-3 救済ｽｲｯﾁ表示
ANB LR13305              ; Table-4 救済ｽｲｯﾁ表示
ANP R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
DW #0 DM35012            ; 非常停止時のｲﾝﾃﾞｯｸｽ位置
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
LD MR6610                ; 接着剤塗布 ﾘﾄﾗｲ可
OR MR6603                ; 接着剤塗布 ｻｲｸﾙﾀｲﾑ計測用
OR MR6604                ; ｽｷｰｼﾞ ｻｲｸﾙﾀｲﾑ計測用
ANL
OUT MR6615               ; 救済ｽｲｯﾁ表示
LD R46100                ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
MOV DM29000 W072         ; 装置内ﾜｰｸ個数
MOV DM29000 W08F         ; 装置内ﾜｰｸ個数
MOV DM29004 W08C         ; 装置内ﾀﾞﾐｰ除くﾜｰｸ個数
LD= DM3000 #290          ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND MR8000               ; ﾌｨﾙﾑ交換後捨て出しSW
ANB MR8001               ; ﾌｨﾙﾑ交換後、ﾌｨﾙﾑ捨て出し動作中
SET MR8001               ; ﾌｨﾙﾑ交換後、ﾌｨﾙﾑ捨て出し動作中
CON
SET MR8005
MDSTRT Group1_Task5
STG MR8005
AND _Group1_Task5
RES MR8000               ; ﾌｨﾙﾑ交換後捨て出しSW
CON
SET MR6311               ; ﾌｨﾙﾑ交換後捨て出しSW
CON
AND MR6303               ; ﾌｨﾙﾑ交換後 捨て出し動作中
RES MR6311               ; ﾌｨﾙﾑ交換後捨て出しSW
CON
JMP MR8006
STG MR8006
ANB MR6303               ; ﾌｨﾙﾑ交換後 捨て出し動作中
MPS
TMR #1735 #10
CON
AND T1735
JMP MR8007
MPP
MDSTOP Group1_Task5
STG MR8007
ANB _Group1_Task5
RES MR8001               ; ﾌｨﾙﾑ交換後、ﾌｨﾙﾑ捨て出し動作中
CON
ENDS
LDP R46114               ; _装置原点復帰待ち
SET MR8400               ; 装置原点復帰待ち
LDP R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
RES MR8400               ; 装置原点復帰待ち
CON
SET MR8401               ; 原点復帰中
LDF R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
RES MR8401               ; 原点復帰中
STG R700
MPS
TMR #1259 #1
CON
AND T1259
JMP R701
MRD
@BMOV.D FM0 FM2 #1000    ; RB1 Poinnt-1 目標位置  RB1 Poinnt-1 位置決め幅
MRD
@BMOV.D FM10000 FM10002 #1000
MPP
@BMOV.D FM20000 FM20002 #1000
STG R701
LDA.L DM33008            ; 画像よりﾃﾞｰﾀ取り込み　X軸
CON
STA.L FM0                ; RB1 Poinnt-1 目標位置
CON
LDA.L DM33010            ; 画像よりﾃﾞｰﾀ取り込み　Y軸
CON
STA.L FM10000
CON
LDA.L DM33012            ; 画像よりﾃﾞｰﾀ取り込み　θ軸
CON
STA.L FM20000
CON
ENDS
LD DM2000.0              ; ｱﾗｲﾒﾝﾄ画像 有効/無効
OUT R12000
LD DM2000.1              ; ﾎﾟｯﾄﾗｲﾌﾀｲﾏ 有効/無効
OUT R12001
LD DM2000.2              ; ﾌｨﾙﾑ受台時間管理 有効/無効
OUT R12002
LD DM2000.3              ; 転写後ﾜｰｸ時間管理 有効/無効
OUT R12003
LD DM2000.4              ; ｱｸｼｮﾝﾊﾟﾗﾒｰﾀ-5
OUT R12004
LD DM2000.5              ; ｱｸｼｮﾝﾊﾟﾗﾒｰﾀ-6
OUT R12005
LD DM2000.6              ; ｱｸｼｮﾝﾊﾟﾗﾒｰﾀ-7
OUT R12006
LD DM2000.7              ; ｱｸｼｮﾝﾊﾟﾗﾒｰﾀ-8
OUT R12007
LD DM2000.8              ; 接着剤検出 有効/無効
OUT R12008
LD DM2000.9              ; ﾌｨﾙﾑ検出ｾﾝｻｰ選択(R7302 or R7303)
OUT R12009
LD DM2000.10             ; 上流ｾﾙﾎﾟｰｽﾞ処理 有効/無効
OUT R12010
LD DM2000.11             ; 下流ｾﾙﾎﾟｰｽﾞ処理 有効/無効
OUT R12011
LD DM2000.12             ; ON-LINE/OFF-LINE
OUT R12012
LD DM2000.13             ; ﾄﾚｻﾋﾞﾘﾃｨ 有効/無効
OUT R12013
LD DM2000.14             ; 上流ﾊﾝﾄﾞｼｪｲｸ 有効/無効
OUT R12014
LD DM2000.15             ; 下流ﾊﾝﾄﾞｼｪｲｸ 有効/無効
OUT R12015
LD CR2002                ; 常時ON
FLIK #30 #30 R12115
LDB R12000
ANB R12001
ANB R12002
ANB R12003
ANB R12004
ANB R12005
ANB R12006
ANB R12007
ANB R12008
ANB R12009
ANB R12010
ANB R12011
ANB R12012
ANB R12013
ANB R12014
ANB R12015
INV
OUT R12101
CON
AND R12115
OUT R12100
;@EM10.T = "無効 動作ﾊﾟﾗﾒｰﾀ有り"
;@EM30.T = " "
;
LD CR2002                ; 常時ON
NCJ #1008
;@EM10.T = "無効 動作ﾊﾟﾗﾒｰﾀ有り"
;
LD CR2002                ; 常時ON
SMOV "無効 動作ﾊﾟﾗﾒｰﾀ有り" @EM10
;@EM30.T = " "
;
LD CR2002                ; 常時ON
SMOV " " @EM30
LABEL #1008
;
LD R12101
ANB MR8400               ; 装置原点復帰待ち
SMOV @EM10 DM11230       ; USER 文字列表示　1行目
LDB R12101
OR MR8400                ; 装置原点復帰待ち
OUB MR15901              ; 特殊ｽﾃｰﾀｽ-2表示ON
CON
SMOV @EM30 DM11230       ; USER 文字列表示　1行目
LD MR15900               ; 特殊ｽﾃｰﾀｽ-1表示ON
OR MR15901               ; 特殊ｽﾃｰﾀｽ-2表示ON
ANB MR8400               ; 装置原点復帰待ち
OUT MR15905              ; 特殊ｽﾃｰﾀｽ表示
LD= DM25000 #1           ; ﾊﾟﾈﾙ2019 ﾃｰﾌﾞﾙ番号 ST1
DW #0 DM25010
LD= DM25000 #2           ; ﾊﾟﾈﾙ2019 ﾃｰﾌﾞﾙ番号 ST1
DW #1 DM25010
LD= DM25000 #3           ; ﾊﾟﾈﾙ2019 ﾃｰﾌﾞﾙ番号 ST1
DW #2 DM25010
LD= DM25000 #4           ; ﾊﾟﾈﾙ2019 ﾃｰﾌﾞﾙ番号 ST1
DW #3 DM25010
END
ENDH
