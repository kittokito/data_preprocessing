DEVICE:128
;MODULE:Main
;MODULE_TYPE:0
;SCRIPT_TYPE:
LD CR2003                ; 常時OFF
OUT M0                   ; 常時OFF
OUT M99                  ; 仮NAT
LD CR3905                ; 重度ｴﾗｰ発生中
INV
OUT M1                   ; CPU正常
LD CR2008                ; 運転開始時1ｽｷｬﾝON
OUT M2                   ; 1ｽｷｬﾝON
MPS
DW K100 D141             ; IAI Speed  Override
MPP
AND L29                  ; KTR仕様
DW K1 D100               ; 表示言語ID
LD CR2007                ; 運転開始時1ｽｷｬﾝOFF
TMR K0 K20               ; PLC_RUN_ONﾀｲﾏ
TMR K1 K500              ; ﾘﾝｸ確立時間
TMR K3 K20               ; 電源ON 1sﾀｲﾏ
LD B101D                 ; PC_OFFLINE_MODE
OUT M3                   ; OFFLINE_MODE
;<h1/>□_安全関連入力受け
;安全系の入力は一旦ここで受ける。
LD B1A00                 ; ﾒｲﾝｴｱ圧正常
OUT M120                 ; 圧空正常
LD X00                   ; 非常停止正常
OUT M121                 ; 非常停止正常
LD CR2002                ; 常時ON
OUT M122                 ; 外部非常停止正常
LD X02                   ; 側面安全ﾄﾞｱ閉確認
AND X03                  ; 正面安全ﾄﾞｱ閉確認
ANB B03                  ; 003)安全扉開異常
OR M39                   ; 安全柵解除ﾓｰﾄﾞ
OUT M123                 ; 安全扉正常
LD X08                   ; ﾗｲﾄｶｰﾃﾝOUT1
AND X09                  ; ﾗｲﾄｶｰﾃﾝOUT2
OR M39                   ; 安全柵解除ﾓｰﾄﾞ
OUT M124                 ; ｴﾘｱｾﾝｻ正常
TMR K44 K5               ; ｴﾘｱｾﾝｻ正常
LDB X08                  ; ﾗｲﾄｶｰﾃﾝOUT1
ORB X09                  ; ﾗｲﾄｶｰﾃﾝOUT2
AND M50                  ; 運転準備
OUT M160                 ; ｴﾘｱｾﾝｻ遮光画面表示
LD X02                   ; 側面安全ﾄﾞｱ閉確認
AND X03                  ; 正面安全ﾄﾞｱ閉確認
OUT M125                 ; 全扉閉じ
LDB M120                 ; 圧空正常
ANB M121                 ; 非常停止正常
ANB M122                 ; 外部非常停止正常
ANB M123                 ; 安全扉正常
ANB M124                 ; ｴﾘｱｾﾝｻ正常
OUB M129                 ; 安全入力OK
;<h1/>□_スイッチ変換
;操作系の入力は一旦ここで受ける。
LD B1016                 ; DRY_RUN_PB
OUT M7                   ; 空運転PB
LD CR2003                ; 常時OFF
OUT M8                   ; ROBOT_TEST_TP-PB
LD B1001                 ; 自動/手動PB
OUT M10                  ; 自動/手動PB
LD X01                   ; 装置READY
OUT M12                  ; 装置Ready(運転準備ON)
LD CR2003                ; 常時OFF
OUT M13                  ; 運転準備切PB
LD B1010                 ; ﾌﾞｻﾞｰ停止PB
OR M161                  ; ｴﾘｱ遮光時ｴﾗｰ解除予約
OUT M15                  ; ﾌﾞｻﾞｰ停止PB
DIFU M110                ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
LDB B032                 ; 050)ﾜｰｸ1 電特検査NG
ANB B033                 ; 051)ﾜｰｸ2 電特検査NG
ANB B034                 ; 052)ﾜｰｸ3 電特検査NG
ORB M3                   ; OFFLINE_MODE
ANB B02A                 ; 042)NGﾜｰｸ残（除材要求）
INV
OUT M168                 ; Error resetのSTARTsw有効
LDB M124                 ; ｴﾘｱｾﾝｻ正常
LDB M62                  ; ｴﾗｰ発生(NGﾘｾｯﾄ)
ANP B1011                ; ｴﾗｰﾘｾｯﾄPB
LD M62                   ; ｴﾗｰ発生(NGﾘｾｯﾄ)
LDP B1013                ; NGﾘｾｯﾄPB
ORP X0F                  ; NGｽｲｯﾁ入力
ANL
ORL
ANL
OR M161                  ; ｴﾘｱ遮光時ｴﾗｰ解除予約
ANB M16                  ; ﾘｾｯﾄPB
OUT M161                 ; ｴﾘｱ遮光時ｴﾗｰ解除予約
LD B1011                 ; ｴﾗｰﾘｾｯﾄPB
ANB M62                  ; ｴﾗｰ発生(NGﾘｾｯﾄ)
LD B1013                 ; NGﾘｾｯﾄPB
OR X0F                   ; NGｽｲｯﾁ入力
AND M62                  ; ｴﾗｰ発生(NGﾘｾｯﾄ)
ORL
LD M168                  ; Error resetのSTARTsw有効
AND X0A                  ; ﾜｰｸ投入確認sw
ORL
OR M161                  ; ｴﾘｱ遮光時ｴﾗｰ解除予約
AND M124                 ; ｴﾘｱｾﾝｻ正常
OUT M16                  ; ﾘｾｯﾄPB
DIFU M111                ; 異常ﾘｾｯﾄﾊﾟﾙｽ
LD B1000                 ; 原点復帰PB
OUT M17                  ; 原点復帰PB
LD B1002                 ; ｽﾀｰﾄPB
OUT M18                  ; 起動PB
TMR K2 K10               ; Start SW 1s長押し
LD B1003                 ; ｻｲｸﾙ停止PB
TMR K15 K80              ; 強制停止ONﾀｲﾏ
TMR K16 K30              ; 日常点検終了ﾀｲﾏ
OUT M19                  ; 停止PB
;<h1/>□_各モード選択
;自動・手動モード
LDP M10                  ; 自動/手動PB
AND M33                  ; 自動ﾓｰﾄﾞ切替・起動可条件
ANB M30                  ; 自動ﾓｰﾄﾞ
MEP
LD M30                   ; 自動ﾓｰﾄﾞ
ANPB M31                 ; 手動ﾓｰﾄﾞ
ORL
ANB M51                  ; 即停止異常(緊急停止)
AND M50                  ; 運転準備
OUT M30                  ; 自動ﾓｰﾄﾞ
LDP M10                  ; 自動/手動PB
ANB M31                  ; 手動ﾓｰﾄﾞ
ANB M41                  ; ﾕﾆｯﾄ_起動中
ORF M150                 ; 日常点検1ﾓｰﾄﾞ
ORF M152                 ; 日常点検2ﾓｰﾄﾞ
OR T51                   ; 手動ﾓｰﾄﾞ移行時間
LD M31                   ; 手動ﾓｰﾄﾞ
ANPB M30                 ; 自動ﾓｰﾄﾞ
ORL
ANB M71                  ; 自動運転開始BZ
AND M50                  ; 運転準備
OUT M31                  ; 手動ﾓｰﾄﾞ
LDB M40                  ; 全ﾕﾆｯﾄ原点
ANB M71                  ; 自動運転開始BZ
ORB M33                  ; 自動ﾓｰﾄﾞ切替・起動可条件
ANB M41                  ; ﾕﾆｯﾄ_起動中
TMR K51 K10              ; 手動ﾓｰﾄﾞ移行時間
;この手動操作可条件はメインのみの条件
;ユニット毎に必要な条件は各ユニットへ追加する
LD M120                  ; 圧空正常
AND M121                 ; 非常停止正常
AND M122                 ; 外部非常停止正常
AND M50                  ; 運転準備
ANB M73                  ; 各工程起動指令
ANB M81                  ; 原点復帰動作中
LD M123                  ; 安全扉正常
OR M37                   ; ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
OR M39                   ; 安全柵解除ﾓｰﾄﾞ
ANL
MPS
LD M124                  ; ｴﾘｱｾﾝｻ正常
OR M37                   ; ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
OR M39                   ; 安全柵解除ﾓｰﾄﾞ
ANL
OUT M32                  ; ﾒｲﾝ手動操作可能条件
MPP
OUT M162                 ; ｴﾘｱS除外手動操作可能条件
LD M40                   ; 全ﾕﾆｯﾄ原点
LD M87                   ; 原点復帰実行記憶
OR M150                  ; 日常点検1ﾓｰﾄﾞ
OR M152                  ; 日常点検2ﾓｰﾄﾞ
ANL
ANB M151                 ; 日常点検1ﾓｰﾄﾞOFF
ANB M153                 ; 日常点検2ﾓｰﾄﾞOFF
LD Y51                   ; 安全ﾄﾞｱﾛｯｸ
OR L29                   ; KTR仕様
ANL
OUT M33                  ; 自動ﾓｰﾄﾞ切替・起動可条件
;  ▽_ﾄﾞﾗｲﾗﾝ
LD M7                    ; 空運転PB
AND B1011                ; ｴﾗｰﾘｾｯﾄPB
TMR K34 K50              ; ﾄﾞﾗｲﾗﾝ_ONﾃﾞｨﾚｲ
LDB M35                  ; 空運転ﾓｰﾄﾞ
ANB M41                  ; ﾕﾆｯﾄ_起動中
ANP T34                  ; ﾄﾞﾗｲﾗﾝ_ONﾃﾞｨﾚｲ
LD M35                   ; 空運転ﾓｰﾄﾞ
ANPB T34                 ; ﾄﾞﾗｲﾗﾝ_ONﾃﾞｨﾚｲ
ORL
OUT M35                  ; 空運転ﾓｰﾄﾞ
;  ▽_払い出し中
LDP M19                  ; 停止PB
OR M219                  ; PC→自動運転停止ﾌﾗｸﾞ
ANB M36                  ; 払出ﾓｰﾄﾞ
OR M59                   ; 払出停止異常まとめ
LD M36                   ; 払出ﾓｰﾄﾞ
LDPB T2                  ; Start SW 1s長押し
OR M44                   ; 払出ﾓｰﾄﾞ解除不可
ANL
ORL
AND M73                  ; 各工程起動指令
OUT M36                  ; 払出ﾓｰﾄﾞ
LDB M150                 ; 日常点検1ﾓｰﾄﾞ
ANB M152                 ; 日常点検2ﾓｰﾄﾞ
INV
OUT M44                  ; 払出ﾓｰﾄﾞ解除不可
;  ▽_ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
LD B1015                 ; ｲﾝﾀｰﾛｯｸｷｬﾝｾﾙPB
AND B1011                ; ｴﾗｰﾘｾｯﾄPB
TMR K35 K50              ; ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
LDP T35                  ; ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
ANB M37                  ; ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
LDPB T35                 ; ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
AND M37                  ; ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
ORL
ANB M41                  ; ﾕﾆｯﾄ_起動中
AND M31                  ; 手動ﾓｰﾄﾞ
ANB M42                  ; 全ﾕﾆｯﾄ原点復帰中
ANB B1000                ; 原点復帰PB
OUT M37                  ; ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
;  ▽_安全柵無効化
LD B1011                 ; ｴﾗｰﾘｾｯﾄPB
TMR K41 K100             ; 安全柵無効化
LDP T41                  ; 安全柵無効化
ANB M39                  ; 安全柵解除ﾓｰﾄﾞ
LDPB T41                 ; 安全柵無効化
AND M39                  ; 安全柵解除ﾓｰﾄﾞ
ORL
ANB M41                  ; ﾕﾆｯﾄ_起動中
AND M31                  ; 手動ﾓｰﾄﾞ
ANB M42                  ; 全ﾕﾆｯﾄ原点復帰中
ANB B1000                ; 原点復帰PB
ANB B1001                ; 自動/手動PB
ANB M18                  ; 起動PB
ANPB B1011               ; ｴﾗｰﾘｾｯﾄPB
ANB M51                  ; 即停止異常(緊急停止)
OUT M39                  ; 安全柵解除ﾓｰﾄﾞ
LD M39                   ; 安全柵解除ﾓｰﾄﾞ
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OUT B151C                ; ｴﾘｱｾﾝｻｰ無効
;<h1/>__日常点検・再投入ﾓｰﾄﾞ
;日常点検1 / Dialy check 1
LDP B1070                ; 日常点検1ﾓｰﾄﾞPB
AND M150                 ; 日常点検1ﾓｰﾄﾞ
ANB M71                  ; 自動運転開始BZ
OUT M151                 ; 日常点検1ﾓｰﾄﾞOFF
LDP B1070                ; 日常点検1ﾓｰﾄﾞPB
ANB M150                 ; 日常点検1ﾓｰﾄﾞ
ANB M71                  ; 自動運転開始BZ
OR M150                  ; 日常点検1ﾓｰﾄﾞ
AND M50                  ; 運転準備
ANB M151                 ; 日常点検1ﾓｰﾄﾞOFF
ANPB M152                ; 日常点検2ﾓｰﾄﾞ
ANFB M41                 ; ﾕﾆｯﾄ_起動中
OUT M150                 ; 日常点検1ﾓｰﾄﾞ
MOV K3 W0132             ; 製品再投入区分(1：有 2 4：無 3：
;日常点検2 / Dialy check 2
LDP B1072                ; 日常点検2ﾓｰﾄﾞPB
AND M152                 ; 日常点検2ﾓｰﾄﾞ
ANB M71                  ; 自動運転開始BZ
OUT M153                 ; 日常点検2ﾓｰﾄﾞOFF
LDP B1072                ; 日常点検2ﾓｰﾄﾞPB
ANB M152                 ; 日常点検2ﾓｰﾄﾞ
ANB M71                  ; 自動運転開始BZ
OR M152                  ; 日常点検2ﾓｰﾄﾞ
AND M50                  ; 運転準備
ANB M153                 ; 日常点検2ﾓｰﾄﾞOFF
ANPB M150                ; 日常点検1ﾓｰﾄﾞ
ANFB M41                 ; ﾕﾆｯﾄ_起動中
OUT M152                 ; 日常点検2ﾓｰﾄﾞ
MOV K3 W0132             ; 製品再投入区分(1：有 2 4：無 3：
;
LDB M150                 ; 日常点検1ﾓｰﾄﾞ
ANB M152                 ; 日常点検2ﾓｰﾄﾞ
MOV K0 W0132             ; 製品再投入区分(1：有 2 4：無 3：
;日常点検実施記憶 / Daily check memory
LDB D20100.0             ; 日常点検ﾌﾗｸﾞ設定1不使用
AND= D20101 CM703        ; ﾘｾｯﾄ設定1-1(時)  ｶﾚﾝﾀﾞﾀｲﾏ（時）
AND= D20102 CM704        ; ﾘｾｯﾄ設定1-2(分)  ｶﾚﾝﾀﾞﾀｲﾏ（分）
LDB D20100.1             ; 日常点検ﾌﾗｸﾞ設定2不使用
AND= D20103 CM703        ; ﾘｾｯﾄ設定2-1(時)  ｶﾚﾝﾀﾞﾀｲﾏ（時）
AND= D20104 CM704        ; ﾘｾｯﾄ設定2-2(分)  ｶﾚﾝﾀﾞﾀｲﾏ（分）
ORL
LDB D20100.2             ; 日常点検ﾌﾗｸﾞ設定3不使用
AND= D20105 CM703        ; ﾘｾｯﾄ設定3-1(時)  ｶﾚﾝﾀﾞﾀｲﾏ（時）
AND= D20106 CM704        ; ﾘｾｯﾄ設定3-2(分)  ｶﾚﾝﾀﾞﾀｲﾏ（分）
ORL
AND= CM705 K0            ; ｶﾚﾝﾀﾞﾀｲﾏ（秒）
RES M154                 ; 日常点検1 OK
CON
RES M155                 ; 日常点検2 OK
LDP M73                  ; 各工程起動指令
MPS
AND M150                 ; 日常点検1ﾓｰﾄﾞ
RES M154                 ; 日常点検1 OK
MPP
AND M152                 ; 日常点検2ﾓｰﾄﾞ
RES M155                 ; 日常点検2 OK
;□□　　装置状態集約　　□□
;■装置原点
LD M1980                 ; ﾕﾆｯﾄ1原点
AND M2980                ; ﾕﾆｯﾄ2原点
OUT M40                  ; 全ﾕﾆｯﾄ原点
;■起動中
LDB M1985                ; ﾕﾆｯﾄ1起動中
ANB M2985                ; ﾕﾆｯﾄ2起動中
ANB M3985                ; ﾕﾆｯﾄ3起動中
ANB M4985                ; ﾕﾆｯﾄ4起動中
ANB M5985                ; ﾕﾆｯﾄ5起動中
ANB M6985                ; ﾕﾆｯﾄ6起動中
INV
OUT M41                  ; ﾕﾆｯﾄ_起動中
;■原点復帰中
LDB M1984                ; ﾕﾆｯﾄ1原点復帰中
ANB M2984                ; ﾕﾆｯﾄ2原点復帰中
ANB M3984                ; ﾕﾆｯﾄ3原点復帰中
ANB M4984                ; ﾕﾆｯﾄ4原点復帰中
ANB M5984                ; ﾕﾆｯﾄ5原点復帰中
ANB M6984                ; ﾕﾆｯﾄ6原点復帰中
INV
OUT M42                  ; 全ﾕﾆｯﾄ原点復帰中
;■ﾛﾎﾞｯﾄ準備完了
LD M1990                 ; ﾕﾆｯﾄ1機器準備完了
AND M2990                ; ﾕﾆｯﾄ2機器準備完了
OUT M43                  ; 機器準備完了
;■他装置電源ON / Chiller & Loader power ON
LD T0                    ; PLC_RUN_ONﾀｲﾏ
TMR K90 K100             ; 電源ONﾃﾞｨﾚｲA
;<h1/>□_運転準備
LD Y50                   ; PLC OK 装置正常
AND M12                  ; 装置Ready(運転準備ON)
AND M121                 ; 非常停止正常
ANB M51                  ; 即停止異常(緊急停止)
OUT M5                   ; 運転準備ON
LD M5                    ; 運転準備ON
MPS
TMR K10 K5               ; 運転準備ONﾃﾞｨﾚｲ
MPP
AND T10                  ; 運転準備ONﾃﾞｨﾚｲ
OUT M50                  ; 運転準備
LD M50                   ; 運転準備
TMR K72 K20              ; 運転準備ONﾃﾞｨﾚｲ_2s
CON
TMR K73 K30              ; 運転準備ONﾃﾞｨﾚｲ_3s
CON
TMR K74 K40              ; 運転準備ONﾃﾞｨﾚｲ_4s
CON
TMR K75 K50              ; 運転準備ONﾃﾞｨﾚｲ_5s
CON
TMR K76 K60              ; 運転準備ONﾃﾞｨﾚｲ_6s
CON
TMR K77 K70              ; 運転準備ONﾃﾞｨﾚｲ_7s
CON
TMR K78 K80              ; 運転準備ONﾃﾞｨﾚｲ_8s
CON
TMR K79 K200             ; 運転準備ONﾃﾞｨﾚｲ_20s
;RB等電源ON
LD Y51                   ; 安全ﾄﾞｱﾛｯｸ
LD L29                   ; KTR仕様
AND M123                 ; 安全扉正常
ORL
ANB M43                  ; 機器準備完了
OR T71                   ; 運転準備ONﾃﾞｨﾚｲ_1s
AND M50                  ; 運転準備
TMR K71 K10              ; 運転準備ONﾃﾞｨﾚｲ_1s
LD T71                   ; 運転準備ONﾃﾞｨﾚｲ_1s
AND M121                 ; 非常停止正常
TMR K81 K3               ; 電源ONﾃﾞｨﾚｲ1
CON
TMR K82 K6               ; 電源ONﾃﾞｨﾚｲ2
CON
TMR K83 K9               ; 電源ONﾃﾞｨﾚｲ3
CON
TMR K84 K12              ; 電源ONﾃﾞｨﾚｲ4
CON
TMR K85 K15              ; 電源ONﾃﾞｨﾚｲ5
CON
TMR K86 K18              ; 電源ONﾃﾞｨﾚｲ6
CON
TMR K87 K21              ; 電源ONﾃﾞｨﾚｲ7
CON
TMR K88 K24              ; 電源ONﾃﾞｨﾚｲ8
CON
TMR K89 K27              ; 電源ONﾃﾞｨﾚｲ9
CON
TMR K91 K30              ; 電源ONﾃﾞｨﾚｲ10
CON
TMR K92 K60              ; 電源ONﾃﾞｨﾚｲ11
LD T81                   ; 電源ONﾃﾞｨﾚｲ1
OUT Y5B                  ; RB1 Power ON
LD T82                   ; 電源ONﾃﾞｨﾚｲ2
OUT Y5C                  ; RB2 Power ON
LD T83                   ; 電源ONﾃﾞｨﾚｲ3
OUT Y5D                  ; RB3 Power ON
LD T84                   ; 電源ONﾃﾞｨﾚｲ4
OUT Y451                 ; 冷却CV 電源ON
LD T92                   ; 電源ONﾃﾞｨﾚｲ11
OR M360                  ; RBC 監視中
AND M50                  ; 運転準備
OUT M360                 ; RBC 監視中
LDB M121                 ; 非常停止正常
ORB M50                  ; 運転準備
RES W2007.0              ; RBC1 CSTR
CON
RES W200F.0              ; RBC2 CSTR
CON
RES W2017.0              ; RBC3 CSTR
;<h1/>□_異常検出まとめ
;■即停止異常(全ﾕﾆｯﾄ即停止)
LDB B01                  ; 001)非常停止異常
ANB B02                  ; 002)圧空低下異常
ANB B03                  ; 003)安全扉開異常
ANB B04                  ; 004)原点復帰ｻｲｸﾙﾀｲﾑｵｰﾊﾞｰ
ANB B05                  ; 005)外部非常停止
ANB B06                  ; 006)PLC異常
ANB B07                  ; 007)ﾘﾝｸ異常
ANB B0B                  ; 011)HOST PC通信異常
ANB B0C                  ; 012)HOST PCｴﾗｰ
ANB M58                  ; 非常停止異常まとめ
INV
OUT M51                  ; 即停止異常(緊急停止)
;■ﾕﾆｯﾄ異常検出(該当ﾕﾆｯﾄ以外ｻｲｸﾙ停止)
LDB M1986                ; ﾕﾆｯﾄ1ｻｲｸﾙ停止異常
ANB M2986                ; ﾕﾆｯﾄ2ｻｲｸﾙ停止異常
ANB M3986                ; ﾕﾆｯﾄ3ｻｲｸﾙ停止異常
ANB M4986                ; ﾕﾆｯﾄ4ｻｲｸﾙ停止異常
ANB M5986                ; ﾕﾆｯﾄ5ｻｲｸﾙ停止異常
ANB M6986                ; ﾕﾆｯﾄ6ｻｲｸﾙ停止異常
INV
OUT M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
;■ﾕﾆｯﾄ毎各種警報検出(ﾜｰｸ不足･ｵﾍﾟｺｰﾙ等)
LDB M1988                ; ﾕﾆｯﾄ1警報補助
ANB M2988                ; ﾕﾆｯﾄ2警報補助
ANB M3988                ; ﾕﾆｯﾄ3警報補助
ANB M4988                ; ﾕﾆｯﾄ4警報補助
ANB M5988                ; ﾕﾆｯﾄ5警報補助
ANB M6988                ; ﾕﾆｯﾄ6警報補助
INV
OUT M53                  ; 警報(ﾜｰｸ不足等)
;■ﾕﾆｯﾄ毎異常ﾌﾞｻﾞｰ検出
LDB M200                 ; ﾒｲﾝﾓｼﾞｭｰﾙ異常ﾌﾞｻﾞｰON
ANB M1989                ; ﾕﾆｯﾄ1異常BZ補助
ANB M2989                ; ﾕﾆｯﾄ2異常BZ補助
ANB M3989                ; ﾕﾆｯﾄ3異常BZ補助
ANB M4989                ; ﾕﾆｯﾄ4異常BZ補助
ANB M5989                ; ﾕﾆｯﾄ5異常BZ補助
ANB M6989                ; ﾕﾆｯﾄ6異常BZ補助
INV
OUT M54                  ; 異常ﾌﾞｻﾞｰ
LDB M51                  ; 即停止異常(緊急停止)
ANB M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ANB M53                  ; 警報(ﾜｰｸ不足等)
ANB M58                  ; 非常停止異常まとめ
ANB M59                  ; 払出停止異常まとめ
ANB M60                  ; ｴﾗｰ発生
ANB M61                  ; ｴﾗｰ発生(一時停止無赤ﾗﾝﾌﾟ)
OUT M55                  ; 異常なし
;□□　　自動運転停止指令(ｻｲｸﾙ停止)　　□□
LD M52                   ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
OR T15                   ; 強制停止ONﾀｲﾏ
OR M65                   ; 自動起動停止指令(払出停止)
OR M56                   ; 自動起動停止指令(ｻｲｸﾙ停止)
AND M73                  ; 各工程起動指令
OUT M56                  ; 自動起動停止指令(ｻｲｸﾙ停止)
;□□　　払出完了運転停止指令(ｻｲｸﾙ停止)　　□□
LD M36                   ; 払出ﾓｰﾄﾞ
AND M1993                ; ﾕﾆｯﾄ1ﾜｰｸ無し
ANB M1985                ; ﾕﾆｯﾄ1起動中
AND M1808                ; U1_Cycle1払出完了
AND M2993                ; ﾕﾆｯﾄ2ﾜｰｸ無し
ANB M2985                ; ﾕﾆｯﾄ2起動中
AND M2808                ; U2_Cycle1払出完了
OUT M57                  ; 全ﾕﾆｯﾄ払出完了
LD M57                   ; 全ﾕﾆｯﾄ払出完了
OUT M65                  ; 自動起動停止指令(払出停止)
;緊急停止異常まとめ
LDB M1981                ; ﾕﾆｯﾄ1即停止異常
ANB M2981                ; ﾕﾆｯﾄ2即停止異常
ANB M3981                ; ﾕﾆｯﾄ3即停止異常
ANB M4981                ; ﾕﾆｯﾄ4即停止異常
ANB M5981                ; ﾕﾆｯﾄ5即停止異常
ANB M6981                ; ﾕﾆｯﾄ6即停止異常
INV
OUT M58                  ; 非常停止異常まとめ
;払出停止異常まとめ
LDB M1987                ; ﾕﾆｯﾄ1払出後停止異常
ANB M2987                ; ﾕﾆｯﾄ2払出後停止異常
ANB M3987                ; ﾕﾆｯﾄ3払出後停止異常
ANB M4987                ; ﾕﾆｯﾄ4払出後停止異常
ANB M5987                ; ﾕﾆｯﾄ5払出後停止異常
ANB M6987                ; ﾕﾆｯﾄ6払出後停止異常
INV
LD M59                   ; 払出停止異常まとめ
AND M71                  ; 自動運転開始BZ
ORL
OUT M59                  ; 払出停止異常まとめ
;■各ﾕﾆｯﾄｴﾗｰ検出
LDB B08                  ; 008)PLCﾊﾞｯﾃﾘ低下
ANB B0A                  ; 010)原点未完ﾓｰﾄﾞ切替不可異常
ANB B018                 ; 024)
ANB M1991                ; ﾕﾆｯﾄ1ｴﾗｰ発生
ANB M2991                ; ﾕﾆｯﾄ2ｴﾗｰ発生
ANB M3991                ; ﾕﾆｯﾄ3ｴﾗｰ発生
ANB M4991                ; ﾕﾆｯﾄ4ｴﾗｰ発生
ANB M5991                ; ﾕﾆｯﾄ5ｴﾗｰ発生
ANB M6991                ; ﾕﾆｯﾄ6ｴﾗｰ発生
INV
OUT M60                  ; ｴﾗｰ発生
LDB B032                 ; 050)ﾜｰｸ1 電特検査NG
ANB B033                 ; 051)ﾜｰｸ2 電特検査NG
ANB B034                 ; 052)ﾜｰｸ3 電特検査NG
INV
OUT M62                  ; ｴﾗｰ発生(NGﾘｾｯﾄ)
LDB CR2003               ; 常時OFF
OUB M61                  ; ｴﾗｰ発生(一時停止無赤ﾗﾝﾌﾟ)
;<h1/>□_一時停止処理 / PAUSE routine
;アラーム発生時に使用 / Use in error (All door lock release)
LD M74                   ; 自動運転中
OR M42                   ; 全ﾕﾆｯﾄ原点復帰中
ANB M149                 ; 一時停止処理終了
ANB M133                 ; 一時停止　ｷｬﾝｾﾙ
MC
LDP B1012                ; 一時停止PB
LD M60                   ; ｴﾗｰ発生
AND CR2003               ; 常時OFF
ORL
ANB M130                 ; 一時停止
OR M130                  ; 一時停止
OUT M130                 ; 一時停止
LD M1992                 ; ﾕﾆｯﾄ1動作無し確認
AND M2992                ; ﾕﾆｯﾄ2動作無し確認
AND M3992                ; ﾕﾆｯﾄ3動作無し確認
AND M4992                ; ﾕﾆｯﾄ4動作無し確認
AND M5992                ; ﾕﾆｯﾄ5動作無し確認
AND M6992                ; ﾕﾆｯﾄ6動作無し確認
OUT M131                 ; 全ﾕﾆｯﾄ一時停止完了
LD M130                  ; 一時停止
OR M132                  ; 全ﾕﾆｯﾄ停止OK
AND M131                 ; 全ﾕﾆｯﾄ一時停止完了
ANB M133                 ; 一時停止　ｷｬﾝｾﾙ
OUT M132                 ; 全ﾕﾆｯﾄ停止OK
LD M130                  ; 一時停止
ANB M131                 ; 全ﾕﾆｯﾄ一時停止完了
ANB M132                 ; 全ﾕﾆｯﾄ停止OK
ANP M18                  ; 起動PB
OUT M133                 ; 一時停止　ｷｬﾝｾﾙ
LD M132                  ; 全ﾕﾆｯﾄ停止OK
OR M140                  ; ﾄﾞｱﾛｯｸ開
ANB M141                 ; ﾄﾞｱ閉確認
OUT M140                 ; ﾄﾞｱﾛｯｸ開
LD M140                  ; ﾄﾞｱﾛｯｸ開
AND M123                 ; 安全扉正常
AND M124                 ; ｴﾘｱｾﾝｻ正常
ANP M18                  ; 起動PB
OR M141                  ; ﾄﾞｱ閉確認
OUT M141                 ; ﾄﾞｱ閉確認
LD M141                  ; ﾄﾞｱ閉確認
AND M123                 ; 安全扉正常
AND M124                 ; ｴﾘｱｾﾝｻ正常
OR M148                  ; 状態復帰完了
OUT M148                 ; 状態復帰完了
LD M148                  ; 状態復帰完了
OR M149                  ; 一時停止処理終了
OUT M149                 ; 一時停止処理終了
MCR
;<h1/>□_自動起動回路
LD M30                   ; 自動ﾓｰﾄﾞ
AND M129                 ; 安全入力OK
LD M124                  ; ｴﾘｱｾﾝｻ正常
OR CR2002                ; 常時ON
ANL
LD Y51                   ; 安全ﾄﾞｱﾛｯｸ
OR L29                   ; KTR仕様
ANL
AND M33                  ; 自動ﾓｰﾄﾞ切替・起動可条件
AND M40                  ; 全ﾕﾆｯﾄ原点
ANB M41                  ; ﾕﾆｯﾄ_起動中
ANB M42                  ; 全ﾕﾆｯﾄ原点復帰中
AND M43                  ; 機器準備完了
AND M50                  ; 運転準備
ANB M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ANB M51                  ; 即停止異常(緊急停止)
ANB M151                 ; 日常点検1ﾓｰﾄﾞOFF
ANB M153                 ; 日常点検2ﾓｰﾄﾞOFF
AND M87                  ; 原点復帰実行記憶
LDB W00.8                ; PC自動抑制中
OR M3                    ; OFFLINE_MODE
ANL
AND M1993                ; ﾕﾆｯﾄ1ﾜｰｸ無し
OUT M70                  ; 自動起動条件
LDB M73                  ; 各工程起動指令
ANB M41                  ; ﾕﾆｯﾄ_起動中
INV
OUT M74                  ; 自動運転中
;<h1/>__運転開始_PCチェック
LDP M18                  ; 起動PB
AND M70                  ; 自動起動条件
OR M75                   ; 自動運転開始PCﾁｪｯｸ開始
ANB M71                  ; 自動運転開始BZ
ANB M76                  ; PCより起動不可ON
AND M50                  ; 運転準備
MPS
OUT M75                  ; 自動運転開始PCﾁｪｯｸ開始
MPP
LDB M3                   ; OFFLINE_MODE
ANB M35                  ; 空運転ﾓｰﾄﾞ
ANL
OUT W0100.6              ; 起動確認
LD M75                   ; 自動運転開始PCﾁｪｯｸ開始
ANB W00.6                ; 起動可能
AND W00.5                ; 起動確認完了
ANB M3                   ; OFFLINE_MODE
ANB M35                  ; 空運転ﾓｰﾄﾞ
OUT M76                  ; PCより起動不可ON
LD W00.6                 ; 起動可能
AND W00.5                ; 起動確認完了
OR M3                    ; OFFLINE_MODE
OR M35                   ; 空運転ﾓｰﾄﾞ
AND M75                  ; 自動運転開始PCﾁｪｯｸ開始
OUT M77                  ; PCより起動可能ON
;<h1/>__運転開始
LD M77                   ; PCより起動可能ON
OR M71                   ; 自動運転開始BZ
ANB M51                  ; 即停止異常(緊急停止)
ANB M56                  ; 自動起動停止指令(ｻｲｸﾙ停止)
OUT M71                  ; 自動運転開始BZ
MPS
LDB M3                   ; OFFLINE_MODE
AND CR2003               ; 常時OFF
ANL
BMOV W020 D20003 K2      ; パレットID  Type No.入力
MPP
INV
MOV K0 D200              ; 起動時ﾌﾞｻﾞｰONｶｳﾝﾄ
;起動時ﾌﾞｻﾞｰ
LD M71                   ; 自動運転開始BZ
AND> K3 D200             ; 起動時ﾌﾞｻﾞｰONｶｳﾝﾄ
MPS
FLIK K50 K100 M102       ; 自動運転開始時ﾌﾞｻﾞｰON
MPP
ANF M102                 ; 自動運転開始時ﾌﾞｻﾞｰON
INC D200                 ; 起動時ﾌﾞｻﾞｰONｶｳﾝﾄ
LD M124                  ; ｴﾘｱｾﾝｻ正常
OR M72                   ; 自動運転開始
AND M71                  ; 自動運転開始BZ
AND= D200 K3             ; 起動時ﾌﾞｻﾞｰONｶｳﾝﾄ
OUT M72                  ; 自動運転開始
OUT M73                  ; 各工程起動指令
;<h1/>□_原点復帰回路
LDB M72                  ; 自動運転開始
ANB M41                  ; ﾕﾆｯﾄ_起動中
ANB M42                  ; 全ﾕﾆｯﾄ原点復帰中
AND M129                 ; 安全入力OK
AND M123                 ; 安全扉正常
LD Y51                   ; 安全ﾄﾞｱﾛｯｸ
OR L29                   ; KTR仕様
ANL
AND M43                  ; 機器準備完了
ANB M51                  ; 即停止異常(緊急停止)
ANB M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ANB M60                  ; ｴﾗｰ発生
AND M31                  ; 手動ﾓｰﾄﾞ
LD M124                  ; ｴﾘｱｾﾝｻ正常
OR CR2002                ; 常時ON
ANL
ANB W02.0                ; 電特検査開始受付
OUT M80                  ; 原点復帰可能条件
LDB M86                  ; 装置全原点確認
ANB M51                  ; 即停止異常(緊急停止)
ANB M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ANB M60                  ; ｴﾗｰ発生
ANB T15                  ; 強制停止ONﾀｲﾏ
ANB M3995                ; ﾕﾆｯﾄ3原点復帰中断
INV
OUT M88                  ; 原点復帰終了
LD M17                   ; 原点復帰PB
AND M80                  ; 原点復帰可能条件
OR M81                   ; 原点復帰動作中
ANB M88                  ; 原点復帰終了
AND M50                  ; 運転準備
MPS
OUT M81                  ; 原点復帰動作中
MPP
AND M124                 ; ｴﾘｱｾﾝｻ正常
TMR K22 K5               ; 原点復帰開始ﾃﾞｨﾚｲ
TMR K23 K1200            ; 原点復帰ﾀｲﾑｱｳﾄ
LDP T22                  ; 原点復帰開始ﾃﾞｨﾚｲ
OR M82                   ; 原点復帰開始
AND M81                  ; 原点復帰動作中
ANB M84                  ; 原点復帰起動確認
OUT M82                  ; 原点復帰開始
LD M82                   ; 原点復帰開始
AND M1984                ; ﾕﾆｯﾄ1原点復帰中
AND M2984                ; ﾕﾆｯﾄ2原点復帰中
OUT M83                  ; 原点復帰全起動確認補助
LD M82                   ; 原点復帰開始
AND M83                  ; 原点復帰全起動確認補助
OR M84                   ; 原点復帰起動確認
AND M81                  ; 原点復帰動作中
ANB M85                  ; 原点復帰完了
OUT M84                  ; 原点復帰起動確認
LD M84                   ; 原点復帰起動確認
ANB M42                  ; 全ﾕﾆｯﾄ原点復帰中
OR M85                   ; 原点復帰完了
AND M81                  ; 原点復帰動作中
ANB M86                  ; 装置全原点確認
OUT M85                  ; 原点復帰完了
LD M85                   ; 原点復帰完了
AND M40                  ; 全ﾕﾆｯﾄ原点
AND M87                  ; 原点復帰実行記憶
OR M86                   ; 装置全原点確認
AND M81                  ; 原点復帰動作中
OUT M86                  ; 装置全原点確認
LD M85                   ; 原点復帰完了
AND M40                  ; 全ﾕﾆｯﾄ原点
OR M87                   ; 原点復帰実行記憶
LD M123                  ; 安全扉正常
LD M74                   ; 自動運転中
AND M30                  ; 自動ﾓｰﾄﾞ
ORL
ANL
AND M50                  ; 運転準備
OUT M87                  ; 原点復帰実行記憶
;<h1/>□_その他回路
;ﾕﾆｯﾄ別動作停止、ﾕﾆｯﾄﾊﾟｽ設定､生産ｶｳﾝﾀ等装置固有の回路がある場合はここ。
;□□　　出力回路　　□□
;ﾌﾞｻﾞｰ音色
LD M54                   ; 異常ﾌﾞｻﾞｰ
LD M51                   ; 即停止異常(緊急停止)
OR M52                   ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ANL
OUT M502                 ; 異常停止_連続ONﾌﾞｻﾞｰ
LD M54                   ; 異常ﾌﾞｻﾞｰ
LD M59                   ; 払出停止異常まとめ
OR M60                   ; ｴﾗｰ発生
OR M61                   ; ｴﾗｰ発生(一時停止無赤ﾗﾝﾌﾟ)
ANL
FLIK K50 K50 M503        ; ｴﾗｰﾌﾞｻﾞｰ_0.5s
LD M54                   ; 異常ﾌﾞｻﾞｰ
AND M53                  ; 警報(ﾜｰｸ不足等)
ANB M502                 ; 異常停止_連続ONﾌﾞｻﾞｰ
ANB M503                 ; ｴﾗｰﾌﾞｻﾞｰ_0.5s
OR M213                  ; PC ﾌﾞｻﾞｰまとめ
FLIK K50 K50 M504        ; 警報ﾌﾞｻﾞｰ_0.5s
LDB M54                  ; 異常ﾌﾞｻﾞｰ
LD M30                   ; 自動ﾓｰﾄﾞ
ANB M123                 ; 安全扉正常
LD M71                   ; 自動運転開始BZ
AND M1883                ; ﾗｲﾄｶｰﾃﾝ遮光不可
OR M81                   ; 原点復帰動作中
ANB M124                 ; ｴﾘｱｾﾝｻ正常
ORL
ANL
ANB M37                  ; ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
FLIK K50 K100 M505       ; その他ﾌﾞｻﾞｰ_0.5s
LD M104                  ; 自動終了時ﾌﾞｻﾞｰ
FLIK K25 K25 M506        ; 自動終了ﾌﾞｻﾞｰ_0.25s
LD M3440                 ; 終了ﾌﾞｻﾞｰ予約
OR M103                  ; 自動終了時ﾌﾞｻﾞｰ予約
ANB T70                  ; 終了ﾌﾞｻﾞｰ
MPS
OUT M103                 ; 自動終了時ﾌﾞｻﾞｰ予約
MPP
LD M56                   ; 自動起動停止指令(ｻｲｸﾙ停止)
OR M3440                 ; 終了ﾌﾞｻﾞｰ予約
OR M104                  ; 自動終了時ﾌﾞｻﾞｰ
ANL
OUT M104                 ; 自動終了時ﾌﾞｻﾞｰ
TMR K70 K20              ; 終了ﾌﾞｻﾞｰ
LDB M54                  ; 異常ﾌﾞｻﾞｰ
LD M37                   ; ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
OR M39                   ; 安全柵解除ﾓｰﾄﾞ
ANL
FLIK K50 K1000 M511      ; 安全関連無効中_ﾌﾞｻﾞｰ
LDB T101                 ; 開始督促
INV
AND M55                  ; 異常なし
FLIK K25 K25 M507        ; 督促ﾌﾞｻﾞｰ0.25s
FLIK K150 K50 M508       ; 督促ﾌﾞｻﾞｰ1.5-0.5s
LDB M54                  ; 異常ﾌﾞｻﾞｰ
AND M30                  ; 自動ﾓｰﾄﾞ
LD T102                  ; 除材督促1
OR T240                  ; 除材督促    第一形態
ANL
FLIK K20 K20 M520        ; Fliker1
FLIK K40 K120 M521       ; Fliker2
LDB M54                  ; 異常ﾌﾞｻﾞｰ
AND M30                  ; 自動ﾓｰﾄﾞ
AND CR2003               ; 常時OFF
FLIK K50 K100 M522       ; Fliker3
LDB M502                 ; 異常停止_連続ONﾌﾞｻﾞｰ
INV
LDB M503                 ; ｴﾗｰﾌﾞｻﾞｰ_0.5s
ANB M504                 ; 警報ﾌﾞｻﾞｰ_0.5s
INV
ORL
LDB M505                 ; その他ﾌﾞｻﾞｰ_0.5s
ANB M510                 ; 安全柵開放中ﾌﾞｻﾞｰ
INV
ORL
LDB M511                 ; 安全関連無効中_ﾌﾞｻﾞｰ
INV
ORL
LDB M506                 ; 自動終了ﾌﾞｻﾞｰ_0.25s
INV
ORL
LDB M102                 ; 自動運転開始時ﾌﾞｻﾞｰON
INV
ORL
LD M507                  ; 督促ﾌﾞｻﾞｰ0.25s
AND M508                 ; 督促ﾌﾞｻﾞｰ1.5-0.5s
ORL
LD T102                  ; 除材督促1
AND M520                 ; Fliker1
AND M521                 ; Fliker2
ORL
LD T103                  ; 除材督促2
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
ORL
OR M1880                 ; ﾊﾟﾚｯﾄ投入完了ﾌﾞｻﾞｰ
OR M522                  ; Fliker3
MPS
OUT Y52                  ; 操作BOXﾌﾞｻﾞｰ
MPP
AND CR2003               ; 常時OFF
OUT Y56                  ; ｼｸﾞﾅﾙﾀﾜｰ　ﾌﾞｻﾞｰ
;
LD X408                  ; 投入部ﾊﾟﾚｯﾄ検出
OR X409                  ; ﾊﾟﾚｯﾄ残留確認1(前半部)
OR X40A                  ; ﾊﾟﾚｯﾄ残留確認2(後半部)
LD T240                  ; 除材督促    第一形態
AND M520                 ; Fliker1
AND M521                 ; Fliker2
LD T241                  ; 除材督促    第二形態
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
AND CR2005               ; 100msｸﾛｯｸﾊﾟﾙｽ
ORL
ANL
ANB T242                 ; 督促ﾌﾞｻﾞｰOFF
OUT Y45E                 ; 冷却CV 排出側ﾌﾞｻﾞｰ
;<h1/>□_ｼｸﾞﾅﾙﾀﾜｰ
LD T3                    ; 電源ON 1sﾀｲﾏ
ANB M51                  ; 即停止異常(緊急停止)
ANB M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ANB M60                  ; ｴﾗｰ発生
ANB M61                  ; ｴﾗｰ発生(一時停止無赤ﾗﾝﾌﾟ)
ANB M59                  ; 払出停止異常まとめ
INV
OUT Y53                  ; ｼｸﾞﾅﾙﾀﾜｰ　赤
OUT W0100.8              ; ﾀﾜｰﾗｲﾄ赤
LD T3                    ; 電源ON 1sﾀｲﾏ
ANB M53                  ; 警報(ﾜｰｸ不足等)
ANB B03                  ; 003)安全扉開異常
ANB M1891                ; ﾊﾟﾚｯﾄ給材待ち
ANB M1892                ; ﾊﾟﾚｯﾄ除材待ち
INV
OUT Y54                  ; ｼｸﾞﾅﾙﾀﾜｰ　黄
OUT W0100.9              ; ﾀﾜｰﾗｲﾄ黄
LDB T3                   ; 電源ON 1sﾀｲﾏ
OR M102                  ; 自動運転開始時ﾌﾞｻﾞｰON
LD M74                   ; 自動運転中
OR M41                   ; ﾕﾆｯﾄ_起動中
ANB M36                  ; 払出ﾓｰﾄﾞ
ORL
LD M42                   ; 全ﾕﾆｯﾄ原点復帰中
OR M36                   ; 払出ﾓｰﾄﾞ
LD M31                   ; 手動ﾓｰﾄﾞ
ANB M415                 ; 動作中無し
ORL
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
ORL
OUT Y55                  ; ｼｸﾞﾅﾙﾀﾜｰ　緑
OUT W0100.10             ; ﾀﾜｰﾗｲﾄ緑
;<h1/>□_画面切替管理
;※画面切替管理は別ﾓｼﾞｭｰﾙを作成しても良い。
;□□　　ﾀｯﾁﾊﾟﾈﾙ表示　　□□
LD CR2002                ; 常時ON
@MOV K0 D58              ; Tp_切替ﾍﾟｰｼﾞNo.
@MOV K0 D78              ; Soft_VT_切替ﾍﾟｰｼﾞNo.
TMR K11 K150             ; ﾛｺﾞ表示時間
LD T11                   ; ﾛｺﾞ表示時間
@MOV K1 D58              ; Tp_切替ﾍﾟｰｼﾞNo.
@MOV K1 D78              ; Soft_VT_切替ﾍﾟｰｼﾞNo.
LDB M50                  ; 運転準備
OR M54                   ; 異常ﾌﾞｻﾞｰ
@MOV K1 D58              ; Tp_切替ﾍﾟｰｼﾞNo.
LD M40                   ; 全ﾕﾆｯﾄ原点
AND M87                  ; 原点復帰実行記憶
LD M81                   ; 原点復帰動作中
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
ORL
OUT B1500                ; 原点復帰TP-PL
LD M30                   ; 自動ﾓｰﾄﾞ
OUT B1501                ; 自動/手動TP-PL
LD M30                   ; 自動ﾓｰﾄﾞ
LD M71                   ; 自動運転開始BZ
OR M41                   ; ﾕﾆｯﾄ_起動中
ANL
ANB M130                 ; 一時停止
LD M130                  ; 一時停止
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
ORL
OUT B1502                ; 起動TP-PL
LDB M41                  ; ﾕﾆｯﾄ_起動中
ANB M71                  ; 自動運転開始BZ
ANB M36                  ; 払出ﾓｰﾄﾞ
LD M36                   ; 払出ﾓｰﾄﾞ
OR M56                   ; 自動起動停止指令(ｻｲｸﾙ停止)
LD M41                   ; ﾕﾆｯﾄ_起動中
OR M71                   ; 自動運転開始BZ
ANL
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
ORL
OUT B1503                ; 停止TP-PL
LDB M53                  ; 警報(ﾜｰｸ不足等)
OR CR2002                ; 常時ON
ANB M54                  ; 異常ﾌﾞｻﾞｰ
ANB M213                 ; PC ﾌﾞｻﾞｰまとめ
INV
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OUT B1510                ; ﾌﾞｻﾞｰ停止PL
LDB M51                  ; 即停止異常(緊急停止)
ANB M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ANB M53                  ; 警報(ﾜｰｸ不足等)
ANB M59                  ; 払出停止異常まとめ
ANB M60                  ; ｴﾗｰ発生
ANB M61                  ; ｴﾗｰ発生(一時停止無赤ﾗﾝﾌﾟ)
ANB M210                 ; HOST_PCﾌﾞｻﾞｰ要求(PC_Busy)
INV
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR M161                  ; ｴﾘｱ遮光時ｴﾗｰ解除予約
ANB M62                  ; ｴﾗｰ発生(NGﾘｾｯﾄ)
OUT B1511                ; ｴﾗｰﾘｾｯﾄPL
LD M130                  ; 一時停止
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OR M132                  ; 全ﾕﾆｯﾄ停止OK
OUT B1512                ; 一時停止PL
LD M60                   ; ｴﾗｰ発生
AND M62                  ; ｴﾗｰ発生(NGﾘｾｯﾄ)
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OUT B1513                ; NGﾘｾｯﾄPL
LD M37                   ; ｲﾝﾀｰﾛｯｸ解除ﾓｰﾄﾞ
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OUT B1515                ; ｲﾝﾀｰﾛｯｸｷｬﾝｾﾙ中PL
LD M35                   ; 空運転ﾓｰﾄﾞ
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OUT B1516                ; DRY_RUN_PL
LDB M51                  ; 即停止異常(緊急停止)
ANB M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ANB M56                  ; 自動起動停止指令(ｻｲｸﾙ停止)
ANB M57                  ; 全ﾕﾆｯﾄ払出完了
ANB M59                  ; 払出停止異常まとめ
ANB M60                  ; ｴﾗｰ発生
ANB M61                  ; ｴﾗｰ発生(一時停止無赤ﾗﾝﾌﾟ)
OUB B1518                ; ｴﾗｰsw表示
LD Y51                   ; 安全ﾄﾞｱﾛｯｸ
LD M123                  ; 安全扉正常
LDB M123                 ; 安全扉正常
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
ORL
ANL
OUT B151E                ; 安全ﾄﾞｱ閉PL
LDB Y51                  ; 安全ﾄﾞｱﾛｯｸ
OUT B151F                ; 安全ﾄﾞｱ開PL
;言語切替
LD CR2003                ; 常時OFF
DW K0 D100               ; 表示言語ID
;<h1/>  ▽_ﾒｯｾｰｼﾞ表示
LD CR2002                ; 常時ON
AND M50                  ; 運転準備
ANB M41                  ; ﾕﾆｯﾄ_起動中
ANB M71                  ; 自動運転開始BZ
ANB M51                  ; 即停止異常(緊急停止)
ANB M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ANB M56                  ; 自動起動停止指令(ｻｲｸﾙ停止)
ANB M57                  ; 全ﾕﾆｯﾄ払出完了
ANB M59                  ; 払出停止異常まとめ
ANB M60                  ; ｴﾗｰ発生
ANB M61                  ; ｴﾗｰ発生(一時停止無赤ﾗﾝﾌﾟ)
ANB M81                  ; 原点復帰動作中
MPS
LDB M43                  ; 機器準備完了
LD Y51                   ; 安全ﾄﾞｱﾛｯｸ
OR L29                   ; KTR仕様
ANL
AND M123                 ; 安全扉正常
ANL
OUT B0100                ; 256)ｲﾆｼｬﾗｲｽﾞ中
MPP
LD M43                   ; 機器準備完了
ANB B0100                ; 256)ｲﾆｼｬﾗｲｽﾞ中
LDB M87                  ; 原点復帰実行記憶
LDB M40                  ; 全ﾕﾆｯﾄ原点
ANB X110                 ; ﾊﾟﾚｯﾄ検出
ORL
ANL
ANB M150                 ; 日常点検1ﾓｰﾄﾞ
ANB M152                 ; 日常点検2ﾓｰﾄﾞ
ANL
OUT B0101                ; 257)原点復帰要求
LD M81                   ; 原点復帰動作中
OUT B0102                ; 258)原点復帰中
LDB M50                  ; 運転準備
AND M55                  ; 異常なし
OUT B0105                ; 261)運転準備を入れてください。
LDB X40F                 ; 冷却CV電源正常
OUT B0106                ; 262)
LD M150                  ; 日常点検1ﾓｰﾄﾞ
OUT B0390                ; 912)日常点検ﾓｰﾄﾞ1
LD M152                  ; 日常点検2ﾓｰﾄﾞ
OUT B0391                ; 913)日常点検ﾓｰﾄﾞ2
LD M30                   ; 自動ﾓｰﾄﾞ
AND M129                 ; 安全入力OK
AND M33                  ; 自動ﾓｰﾄﾞ切替・起動可条件
AND M40                  ; 全ﾕﾆｯﾄ原点
ANB M41                  ; ﾕﾆｯﾄ_起動中
ANB M42                  ; 全ﾕﾆｯﾄ原点復帰中
AND M43                  ; 機器準備完了
AND M50                  ; 運転準備
ANB M52                  ; ｻｲｸﾙ停止異常(ｻｲｸﾙ停止)
ANB M51                  ; 即停止異常(緊急停止)
ANB M150                 ; 日常点検1ﾓｰﾄﾞ
ANB M152                 ; 日常点検2ﾓｰﾄﾞ
ANP M18                  ; 起動PB
LDB B03A2                ; 930)日常点検１を行って下さい
ANB B03A3                ; 931)日常点検２を行って下さい
INV
ANB T24                  ; 表示時間
ORL
MPS
ANB M154                 ; 日常点検1 OK
OUT B03A2                ; 930)日常点検１を行って下さい
MRD
ANB M155                 ; 日常点検2 OK
OUT B03A3                ; 931)日常点検２を行って下さい
MPP
TMR K24 K30              ; 表示時間
LD M50                   ; 運転準備
ANB Y51                  ; 安全ﾄﾞｱﾛｯｸ
LDB M43                  ; 機器準備完了
LDB B0100                ; 256)ｲﾆｼｬﾗｲｽﾞ中
LDB M33                  ; 自動ﾓｰﾄﾞ切替・起動可条件
ANP M10                  ; 自動/手動PB
LDB M80                  ; 原点復帰可能条件
ANP M17                  ; 原点復帰PB
ORL
ANL
ORL
ANL
LD B0103                 ; 259)ドアをロックして下さい
ANB T25                  ; 表示時間
ANB Y51                  ; 安全ﾄﾞｱﾛｯｸ
ORL
MPS
ANB L29                  ; KTR仕様
OUT B0103                ; 259)ドアをロックして下さい
MPP
LDPB M17                 ; 原点復帰PB
ANPB M10                 ; 自動/手動PB
ANL
TMR K25 K30              ; 表示時間
LD M55                   ; 異常なし
MPS
LDB M81                  ; 原点復帰動作中
ANB M74                  ; 自動運転中
AND X110                 ; ﾊﾟﾚｯﾄ検出
OR T102                  ; 除材督促1
OR T103                  ; 除材督促2
ANL
OUT B0107                ; 263)電特部ﾊﾟﾚｯﾄを除材して下さい
MRD
LD T240                  ; 除材督促    第一形態
OR T241                  ; 除材督促    第二形態
ANL
OUT B0108                ; 264)ｺﾝﾍﾞﾔ出口のﾊﾟﾚｯﾄを除材して
MPP
AND T101                 ; 開始督促
OUT B0109                ; 265)OKｽｲｯﾁを押して下さい
LDB M124                 ; ｴﾘｱｾﾝｻ正常
ANB M1882                ; ﾗｲﾄｶｰﾃﾝ遮光可能
AND CR2003               ; 常時OFF
OUT B010B                ; 267)ﾗｲﾄｶｰﾃﾝ遮光
LDP M71                  ; 自動運転開始BZ
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MPS
AND B0390                ; 912)日常点検ﾓｰﾄﾞ1
MOV K912 D13500          ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
MPP
AND B0391                ; 913)日常点検ﾓｰﾄﾞ2
MOV K913 D13500          ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
LDP B0100                ; 256)ｲﾆｼｬﾗｲｽﾞ中
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H0100 D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
LDP B0101                ; 257)原点復帰要求
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H0101 D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
LDP B0102                ; 258)原点復帰中
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H0102 D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
LDP B0103                ; 259)ドアをロックして下さい
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H0103 D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
LDP B0105                ; 261)運転準備を入れてください。
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H0105 D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
LDP B0106                ; 262)
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H0106 D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
LDP B0107                ; 263)電特部ﾊﾟﾚｯﾄを除材して下さい
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H0107 D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
LDP B0108                ; 264)ｺﾝﾍﾞﾔ出口のﾊﾟﾚｯﾄを除材して
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H0108 D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
LDP B0109                ; 265)OKｽｲｯﾁを押して下さい
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H0109 D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
;生産ｶｳﾝﾀ
LDP B1020                ; Counter reset
DW K0 D20005             ; Output
;<h1/>  ▽_ｸﾞﾛｰﾊﾞﾙｳｨﾝﾄﾞｳ制御
;     Global window control
;Palette ID window control
LD M301                  ; ﾊﾟﾚｯﾄID OK
INV
OUT B1520                ; Palette ID 画面表示
;Debug mode window control
LDB M3                   ; OFFLINE_MODE
ANB L30                  ; Debug1
ANB L31                  ; Debug2
ANB L32                  ; Debug3
INV
OUT B1521                ; Debug mode 画面表示
;Retry window control
LDB CR2003               ; 常時OFF
INV
OUT B1522                ; Retry選択画面表示
LDB M2595                ; Reset画面表示要求
INV
OUT B1523                ; Reset選択画面表示
;<h1/>□_ﾃﾞｰﾀ生成 / Data generating
;ﾒｲﾝｴｱ圧表示 / Main air pressure
LD CR2002                ; 常時ON
LDA W0905
CON
DIV K100
CON
STA D1                   ; 表示用ﾒｲﾝｴｱ圧
;時刻ﾃﾞｰﾀ
LD CR2002                ; 常時ON
SEC CM700 D290           ; ｶﾚﾝﾀﾞﾀｲﾏ（年）  現在時刻ﾃﾞｰﾀ(sec)
;<h1/>□_Sensor network Settings
LD M50                   ; 運転準備
AND>= D50 K404           ; Tp_表示中ﾍﾟｰｼﾞNo.
AND<= D50 K407           ; Tp_表示中ﾍﾟｰｼﾞNo.
OUT M603                 ; ｾﾝｻﾈｯﾄﾜｰｸ調整画面表示中
;初期値読込 / Status read
LDP M603                 ; ｾﾝｻﾈｯﾄﾜｰｸ調整画面表示中
ANB M602                 ; ｾﾝｻ閾値書込み
SET M601                 ; ｾﾝｻ閾値読込
LD M601                  ; ｾﾝｻ閾値読込
MPS
MSTRT SENSOR1_READ K1 K4 D600 D610 M600 D605;結果格1  ｾﾝｻ設定保存領域  ｾﾝｻ処理完了  *****
MPP
AND M600                 ; ｾﾝｻ処理完了
RES M600                 ; ｾﾝｻ処理完了
CON
RES M601                 ; ｾﾝｻ閾値読込
;Switch lamp
LD M602                  ; ｾﾝｻ閾値書込み
OUT B1970                ; Sensor 書き込み PL
;Write
LD M603                  ; ｾﾝｻﾈｯﾄﾜｰｸ調整画面表示中
ANB M601                 ; ｾﾝｻ閾値読込
BCMP D610 D650 M610 K36  ; ｾﾝｻ設定保存領域  設定1(閾値)記憶  閾値1比較結果
LD M603                  ; ｾﾝｻﾈｯﾄﾜｰｸ調整画面表示中
ANB M601                 ; ｾﾝｻ閾値読込
ANB CR2010               ; 演算結果がｾﾞﾛ
OUT M604                 ; 変更ﾃﾞｰﾀ有り
LDP B1960                ; Sensor 書き込み
ORP M604                 ; 変更ﾃﾞｰﾀ有り
SET M602                 ; ｾﾝｻ閾値書込み
LD M602                  ; ｾﾝｻ閾値書込み
MPS
MSTRT SENSOR1_WRIT K1 K4 D600 D610 M600 D605;結果格1  ｾﾝｻ設定保存領域  ｾﾝｻ処理完了  *****
MPP
AND M600                 ; ｾﾝｻ処理完了
RES M600                 ; ｾﾝｻ処理完了
CON
RES M602                 ; ｾﾝｻ閾値書込み
;
;<h1/>□_出力
;  ▽_PLC_OK
LD CR2007                ; 運転開始時1ｽｷｬﾝOFF
ANB CR3905               ; 重度ｴﾗｰ発生中
ANB M51                  ; 即停止異常(緊急停止)
AND M121                 ; 非常停止正常
OUT Y50                  ; PLC OK 装置正常
;ID
LD CR2002                ; 常時ON
MPS
AND X110                 ; ﾊﾟﾚｯﾄ検出
TMR K60 K5               ; ﾊﾟﾚｯﾄ検出
MRD
ANB X110                 ; ﾊﾟﾚｯﾄ検出
TMR K61 K10              ; ﾊﾟﾚｯﾄ未検出
MRD
AND T60                  ; ﾊﾟﾚｯﾄ検出
PMOV B1A01 K0 D280 K0 K3 ; ﾊﾟﾚｯﾄID1  ﾊﾟﾚｯﾄID
MPP
LD T61                   ; ﾊﾟﾚｯﾄ未検出
ANB M74                  ; 自動運転中
ANL
DW K0 D280               ; ﾊﾟﾚｯﾄID
LD CR2002                ; 常時ON
PMOV X117 K0 D281 K0 K3  ; 検査ﾍｯﾄﾞ1ID1  検査ﾍｯﾄﾞ1ID
PMOV X11A K0 D282 K0 K3  ; 検査ﾍｯﾄﾞ2ID1  検査ﾍｯﾄﾞ2ID
PMOV X11D K0 D283 K0 K3  ; 検査ﾍｯﾄﾞ3ID1  検査ﾍｯﾄﾞ3ID
BMOV D280 W0120 K4       ; ﾊﾟﾚｯﾄID  ﾊﾟﾚｯﾄID     =>HOST
LD= D280 D20000          ; ﾊﾟﾚｯﾄID  Type No.
AND= D281 D20000         ; 検査ﾍｯﾄﾞ1ID  Type No.
AND= D282 D20000         ; 検査ﾍｯﾄﾞ2ID  Type No.
AND= D283 D20000         ; 検査ﾍｯﾄﾞ3ID  Type No.
AND<> D280 K0            ; ﾊﾟﾚｯﾄID
AND<> D281 K0            ; 検査ﾍｯﾄﾞ1ID
AND<> D282 K0            ; 検査ﾍｯﾄﾞ2ID
AND<> D283 K0            ; 検査ﾍｯﾄﾞ3ID
OUT M301                 ; ﾊﾟﾚｯﾄID OK
;  ▽_DOORLock
;      手動時マニュアルドアロック
LD M1895                 ; UT1 ｼﾘﾝﾀﾞ動作中無し
AND M2895                ; UT2 ｼﾘﾝﾀﾞ動作中無し
ANB M1770                ; 検査ﾍｯﾄﾞ1   Move
ANB M1780                ; 検査ﾍｯﾄﾞ2  Move
ANB M1790                ; 検査ﾍｯﾄﾞ3 Move
ANB M1501                ; ﾜｰｸｸﾗﾝﾌﾟ開始
ANB M1511                ; ﾜｰｸ解放開始
ANB M1521                ; ﾜｰｸｸﾗﾝﾌﾟ開始
ANB M1531                ; ﾜｰｸ解放開始
ANB M1541                ; ﾜｰｸｸﾗﾝﾌﾟ開始
ANB M1551                ; ﾜｰｸ解放開始
OUT M415                 ; 動作中無し
LD M31                   ; 手動ﾓｰﾄﾞ
ORB L29                  ; KTR仕様
ANB M51                  ; 即停止異常(緊急停止)
MC
LD CR2002                ; 常時ON
OUT M410                 ; 手動時ﾄﾞｱﾛｯｸON条件
LDP B101E                ; 安全ﾄﾞｱ閉SW
ANB B101F                ; 安全ﾄﾞｱ開SW
AND M410                 ; 手動時ﾄﾞｱﾛｯｸON条件
LDP T11                  ; ﾛｺﾞ表示時間
AND M123                 ; 安全扉正常
ORL
LD M411                  ; 手動時ﾄﾞｱﾛｯｸON指令
ANB M413                 ; 手動時ﾄﾞｱﾛｯｸOFF指令
ORL
ANB M1960                ; U1org_S060
OUT M411                 ; 手動時ﾄﾞｱﾛｯｸON指令
LD M415                  ; 動作中無し
OUT M412                 ; 手動時ﾄﾞｱﾛｯｸOFF条件
LDP B101F                ; 安全ﾄﾞｱ開SW
ANB B101E                ; 安全ﾄﾞｱ閉SW
AND M412                 ; 手動時ﾄﾞｱﾛｯｸOFF条件
LD M413                  ; 手動時ﾄﾞｱﾛｯｸOFF指令
ANB M411                 ; 手動時ﾄﾞｱﾛｯｸON指令
ORL
OUT M413                 ; 手動時ﾄﾞｱﾛｯｸOFF指令
MCR
LD M81                   ; 原点復帰動作中
OR M30                   ; 自動ﾓｰﾄﾞ
ANB M140                 ; ﾄﾞｱﾛｯｸ開
AND L29                  ; KTR仕様
OR M411                  ; 手動時ﾄﾞｱﾛｯｸON指令
OUT Y51                  ; 安全ﾄﾞｱﾛｯｸ
LD M3                    ; OFFLINE_MODE
OUT B151D                ; OFFLINE
;<h1/>____▼_POWER出力
LD M50                   ; 運転準備
AND M123                 ; 安全扉正常
ANB M51                  ; 即停止異常(緊急停止)
MC
MCR
;<h1/>____▼_Tp出力
LD M350                  ; ﾊﾟﾗﾒｰﾀﾃﾞｰﾀ変更有り
AND CR2006               ; 1sｸﾛｯｸﾊﾟﾙｽ
OUT B1700                ; Write sw PL
LD B1210                 ; IAI_INCHING
OUT B1710                ; IAI_INCHING PL
LDB B1210                ; IAI_INCHING
AND B1211                ; IAI_High speed
LD B1210                 ; IAI_INCHING
AND B1211                ; IAI_High speed
ORL
OUT B1711                ; IAI_High speed PL
LD M30                   ; 自動ﾓｰﾄﾞ
OR M81                   ; 原点復帰動作中
RES B1210                ; IAI_INCHING
CON
RES B1211                ; IAI_High speed
LD Y51                   ; 安全ﾄﾞｱﾛｯｸ
AND M124                 ; ｴﾘｱｾﾝｻ正常
OUT M165                 ; RB移動SW共通interlock
;<h1/>□_主幹異常
;ﾒｲﾝ回路に関連する異常はここにまとめる。
LDB M121                 ; 非常停止正常
LD B01                   ; 001)非常停止異常
ANB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
ORL
OUT B01                  ; 001)非常停止異常
LDP B01                  ; 001)非常停止異常
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H0001 D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
;
LD M50                   ; 運転準備
ANB M120                 ; 圧空正常
TMH K80 K50              ; 元圧低下ﾀｲﾏ
LD T80                   ; 元圧低下ﾀｲﾏ
LD B02                   ; 002)圧空低下異常
ANB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
ORL
OUT B02                  ; 002)圧空低下異常
LDP B02                  ; 002)圧空低下異常
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H0002 D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
;
LD X02                   ; 側面安全ﾄﾞｱ閉確認
AND X03                  ; 正面安全ﾄﾞｱ閉確認
OR T42                   ; 安全扉閉じ確認
AND Y51                  ; 安全ﾄﾞｱﾛｯｸ
TMR K42 K5               ; 安全扉閉じ確認
LD Y51                   ; 安全ﾄﾞｱﾛｯｸ
LDB X02                  ; 側面安全ﾄﾞｱ閉確認
ORB X03                  ; 正面安全ﾄﾞｱ閉確認
ANL
ANB M140                 ; ﾄﾞｱﾛｯｸ開
AND T42                  ; 安全扉閉じ確認
LD B03                   ; 003)安全扉開異常
ANB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
ORL
ANB M39                  ; 安全柵解除ﾓｰﾄﾞ
OUT B03                  ; 003)安全扉開異常
LDP B03                  ; 003)安全扉開異常
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H0003 D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
;
LD T23                   ; 原点復帰ﾀｲﾑｱｳﾄ
LD B04                   ; 004)原点復帰ｻｲｸﾙﾀｲﾑｵｰﾊﾞｰ
ANB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
ORL
OUT B04                  ; 004)原点復帰ｻｲｸﾙﾀｲﾑｵｰﾊﾞｰ
LDP B04                  ; 004)原点復帰ｻｲｸﾙﾀｲﾑｵｰﾊﾞｰ
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H0004 D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
;
LD M50                   ; 運転準備
ANB M122                 ; 外部非常停止正常
LD B05                   ; 005)外部非常停止
ANB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
ORL
OUT B05                  ; 005)外部非常停止
LDP B05                  ; 005)外部非常停止
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H0005 D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
;
LD CR3905                ; 重度ｴﾗｰ発生中
LD B06                   ; 006)PLC異常
ANB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
ORL
OUT B06                  ; 006)PLC異常
LDP B06                  ; 006)PLC異常
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H0006 D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
;
LD CR2003                ; 常時OFF
ANB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
LD B08                   ; 008)PLCﾊﾞｯﾃﾘ低下
ANB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
ORL
MPS
TMR K50 K18000           ; ｴﾗｰﾃﾞｨﾚｲ
MPP
AND T50                  ; ｴﾗｰﾃﾞｨﾚｲ
OUT B08                  ; 008)PLCﾊﾞｯﾃﾘ低下
LDP B08                  ; 008)PLCﾊﾞｯﾃﾘ低下
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H0008 D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
;自動ﾓｰﾄﾞ切替不可異常
LDP M10                  ; 自動/手動PB
ANB M40                  ; 全ﾕﾆｯﾄ原点
ANB M41                  ; ﾕﾆｯﾄ_起動中
ANB M71                  ; 自動運転開始BZ
LD B0A                   ; 010)原点未完ﾓｰﾄﾞ切替不可異常
ANB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
ORL
OUT B0A                  ; 010)原点未完ﾓｰﾄﾞ切替不可異常
LDP B0A                  ; 010)原点未完ﾓｰﾄﾞ切替不可異常
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H000A D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
;HOST PC通信異常
LD T0                    ; PLC_RUN_ONﾀｲﾏ
ANB M300                 ; HOST PC通信正常
AND M30                  ; 自動ﾓｰﾄﾞ
LD B0B                   ; 011)HOST PC通信異常
ANB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
ORL
ANB M3                   ; OFFLINE_MODE
OUT B0B                  ; 011)HOST PC通信異常
LDP B0B                  ; 011)HOST PC通信異常
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H000B D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
;HOST PCｴﾗｰ
LD W00.1                 ; HOST_PC Error
LD B0C                   ; 012)HOST PCｴﾗｰ
ANB M111                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
ORL
ANB M3                   ; OFFLINE_MODE
OUT B0C                  ; 012)HOST PCｴﾗｰ
LDP B0C                  ; 012)HOST PCｴﾗｰ
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H000C D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
;<h1/>□_ﾒｯｾｰｼﾞ表示
;安全扉開中ﾒｯｾｰｼﾞ
LD M123                  ; 安全扉正常
INV
OUT B010A                ; 266)安全扉開
LDP B010A                ; 266)安全扉開
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H010A D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
;一時停止中
LD M132                  ; 全ﾕﾆｯﾄ停止OK
OUT B0104                ; 260)一時停止中
LDP B0104                ; 260)一時停止中
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H0104 D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
;元圧確認
LDB M120                 ; 圧空正常
OUT B010C                ; 268)元圧確認してください。
LDP B010C                ; 268)元圧確認してください。
AND< D13510 K64          ; 発生ｴﾗｰｺｰﾄﾞ格納先
MOV H010C D13500         ; ｴﾗｰｺｰﾄﾞ
FIFOW D13500 D13510      ; ｴﾗｰｺｰﾄﾞ  発生ｴﾗｰｺｰﾄﾞ格納先
;ﾌﾞｻﾞｰ発生回路
LD<>.D B00 D12           ; 000)  ﾌﾞｻﾞｰSTOP監視ｴﾘｱ
AND<>.D B00 K0           ; 000)
OUT M200                 ; ﾒｲﾝﾓｼﾞｭｰﾙ異常ﾌﾞｻﾞｰON
LD M110                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR M111                  ; 異常ﾘｾｯﾄﾊﾟﾙｽ
MOV.D B00 D12            ; 000)  ﾌﾞｻﾞｰSTOP監視ｴﾘｱ
LD=.D B00 K0             ; 000)
@MOV.D K0 D12            ; ﾌﾞｻﾞｰSTOP監視ｴﾘｱ
;<h1/>■ Product
LD= D50 K400             ; Tp_表示中ﾍﾟｰｼﾞNo.
@MOV D20000 D20003       ; Type No.  Type No.入力
;FMOV(#0,D20600,#300)			'機種ﾃﾞｰﾀ領域を初期化
;'ﾊﾟﾗﾒｰﾀ
;Z7 = (D20003-1)*300				'1品種300ﾃﾞｰﾀ
;BMOV(D20900:Z7,D20600,#300)		'保存ﾃﾞｰﾀから読込
;'記憶領域に保存（writeｽｲｯﾁ点灯用）
;BMOV(D20600,D300,#300)
;D20000 = D20003
LD<> D20000 D20003       ; Type No.  Type No.入力
MPS
AND CR2003               ; 常時OFF
RES M154                 ; 日常点検1 OK
CON
RES M155                 ; 日常点検2 OK
MPP
NCJ K1003
;FMOV(#0,D20600,#300)			'機種ﾃﾞｰﾀ領域を初期化
;
LD CR2002                ; 常時ON
FMOV K0 D20600 K300
;'ﾊﾟﾗﾒｰﾀ
;
;Z7 = (D20003-1)*300				'1品種300ﾃﾞｰﾀ
;
LD CR2002                ; 常時ON
LDA D20003               ; Type No.入力
CON
EXT
CON
SUB.L +1
CON
MUL.L +300
CON
STA.L Z7
;BMOV(D20900:Z7,D20600,#300)		'保存ﾃﾞｰﾀから読込
;
LD CR2002                ; 常時ON
BMOV D20900:Z7 D20600 K300
;'記憶領域に保存（writeｽｲｯﾁ点灯用）
;
;BMOV(D20600,D300,#300)
;
LD CR2002                ; 常時ON
BMOV D20600 D300 K300    ; 設定記憶
;D20000 = D20003
LD CR2002                ; 常時ON
MOV D20003 D20000        ; Type No.入力  Type No.
LABEL K1003
;
;Type data SAVE
;'ﾊﾟﾗﾒｰﾀ
;Z7 = (D20003-1)*300
;BMOV(D20600,D20900:Z7,#300)
;'記憶領域に保存
;BMOV(D20600,D300,#300)
;D20000 = D20003
LDP B1200                ; Write sw
NCJ K1001
;'ﾊﾟﾗﾒｰﾀ
;
;Z7 = (D20003-1)*300
;
LD CR2002                ; 常時ON
LDA D20003               ; Type No.入力
CON
EXT
CON
SUB.L +1
CON
MUL.L +300
CON
STA.L Z7
;BMOV(D20600,D20900:Z7,#300)
;
LD CR2002                ; 常時ON
BMOV D20600 D20900:Z7 K300
;'記憶領域に保存
;
;BMOV(D20600,D300,#300)
;
LD CR2002                ; 常時ON
BMOV D20600 D300 K300    ; 設定記憶
;D20000 = D20003
LD CR2002                ; 常時ON
MOV D20003 D20000        ; Type No.入力  Type No.
LABEL K1001
;
;Temprary Input
;'ﾃﾞｰﾀ変更確認
;RES(M350)
;D140 = 0
;Z7 = (D20000-1)*300
;'呼び出し領域D20600と記憶領域D20900:Z7を比較
;IF D20000 <> 0 THEN
;	DO
;		Z5 = D140
;		Z6 = D140 + Z7
;		IF (D20600:Z5) <> (D20900:Z6) THEN
;			SET(M350)
;		END IF
;		D140 += 1
;	UNTIL D140 >= 300
;END IF
LD>= D50 K400            ; Tp_表示中ﾍﾟｰｼﾞNo.
AND<= D50 K499           ; Tp_表示中ﾍﾟｰｼﾞNo.
OR= D50 K300             ; Tp_表示中ﾍﾟｰｼﾞNo.
NCJ K1000
;'ﾃﾞｰﾀ変更確認
;
;RES(M350)
;
LD CR2002                ; 常時ON
RES M350                 ; ﾊﾟﾗﾒｰﾀﾃﾞｰﾀ変更有り
;D140 = 0
;
LD CR2002                ; 常時ON
MOV K0 D140
;Z7 = (D20000-1)*300
;
LD CR2002                ; 常時ON
LDA D20000               ; Type No.
CON
EXT
CON
SUB.L +1
CON
MUL.L +300
CON
STA.L Z7
;'呼び出し領域D20600と記憶領域D20900:Z7を比較
;
;IF D20000 <> 0 THEN
;
LD<> D20000 K0           ; Type No.
NCJ K2000
;	DO
;
LABEL K2001
;		Z5 = D140
;
LD CR2002                ; 常時ON
LDA D140
CON
EXT
CON
STA.L Z5
;		Z6 = D140 + Z7
;
LD CR2002                ; 常時ON
LDA D140
CON
EXT
CON
ADD.L Z7
CON
STA.L Z6
;		IF (D20600:Z5) <> (D20900:Z6) THEN
;
LD<> D20600:Z5 D20900:Z6
NCJ K2002
;			SET(M350)
;
LD CR2002                ; 常時ON
SET M350                 ; ﾊﾟﾗﾒｰﾀﾃﾞｰﾀ変更有り
;		END IF
;
LABEL K2002
;		D140 += 1
;
LD CR2002                ; 常時ON
INC D140
;	UNTIL D140 >= 300
;
LD>= D140 K300
CJ K2003
LD CR2002                ; 常時ON
CJ K2001
LABEL K2003
;END IF
LABEL K2000
LABEL K1000
;
;品種複製
;Recipe copy
;Z6 = (D20001-1) * 300
;Z7 = (D20002-1) * 300
;BMOV(D20900:Z6,D20900:Z7,#300)
LDP B1202                ; 品種ｺﾋﾟｰsw
NCJ K1002
;Z6 = (D20001-1) * 300
;
LD CR2002                ; 常時ON
LDA D20001               ; ｺﾋﾟｰ元No.
CON
EXT
CON
SUB.L +1
CON
MUL.L +300
CON
STA.L Z6
;Z7 = (D20002-1) * 300
;
LD CR2002                ; 常時ON
LDA D20002               ; ｺﾋﾟｰ先No.
CON
EXT
CON
SUB.L +1
CON
MUL.L +300
CON
STA.L Z7
;BMOV(D20900:Z6,D20900:Z7,#300)
LD CR2002                ; 常時ON
BMOV D20900:Z6 D20900:Z7 K300
LABEL K1002
;
END
ENDH
