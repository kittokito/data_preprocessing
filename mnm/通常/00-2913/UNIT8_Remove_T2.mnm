DEVICE:53
;MODULE:UNIT8_Remove_T2
;MODULE_TYPE:0
;
;UNIT8 Remove-Trasfer 2
;
;動作FLG
LD T1708                 ; 除材2ﾗｲﾄｶｰﾃﾝOUT1
AND T1709                ; 除材2ﾗｲﾄｶｰﾃﾝOUT2
OUT M8950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
LDB T1711                ; 除材2_ﾜｰｸ検出
TMR K803 K10             ; 除材部ﾜｰｸ無し
LD CR2003                ; 常時OFF
AND Y2474                ; 除材ﾍｯﾄﾞ2吸着ON　●
ANB Y2475                ; 除材ﾍｯﾄﾞ2破壊ON　●
MPS
LD T1712                 ; 除材2_ﾍｯﾄﾞ吸着OUT1
AND T1713                ; 除材2_ﾍｯﾄﾞ吸着OUT2
ANL
TMH K800 K2              ; 除材ﾍｯﾄﾞ2吸着OK
MRD
LDB T1712                ; 除材2_ﾍｯﾄﾞ吸着OUT1
AND T1713                ; 除材2_ﾍｯﾄﾞ吸着OUT2
ANL
TMR K801 K30             ; 除材ﾍｯﾄﾞ2吸着異常
MPP
LDB T1712                ; 除材2_ﾍｯﾄﾞ吸着OUT1
ANB T1713                ; 除材2_ﾍｯﾄﾞ吸着OUT2
ANL
TMH K802 K3              ; 除材ﾍｯﾄﾞ2除材OK
LD M8540                 ; 除材2Z軸原点復帰完了
OR M8990                 ; 除材2Z軸　原点復帰完了
ANB M103                 ; 原点復帰OK
OUT M8990                ; 除材2Z軸　原点復帰完了
LD M8770                 ; Y2排出完了
OR M8772
OUT M8981                ; Y2排出完了
LD M8771                 ; 排出異常【自動ﾓｰﾄﾞ】
OR M8773                 ; 排出異常【手動ﾓｰﾄﾞ】
OUT M8982                ; Y2排出異常
LD>= D8001 K2            ; UT8SUB1  除材ｽﾃｯﾌﾟ
OR>= D8002 K2            ; UT8SUB2  手動除材ｽﾃｯﾌﾟ
OUT M8776                ; 除材2取り出し要求
;■ロボット等機器入力受け
;ロボット、検査装置など状態、現在位置などをまとめる信号は一旦ここで受ける。
LD X1238                 ; BUSY ID8
OR Y2038                 ; ID8 HOLD
LDB X01                  ; DOOR close SIGNAL
ORB M8950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
ORB X1239                ; SVRE ID8
ANL
OUT Y2038                ; ID8 HOLD
LD X1248                 ; BUSY ID9
OR Y2048                 ; ID9 HOLD
LDB X01                  ; DOOR close SIGNAL
LDB M8950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
ANB R3701                ; 除材2Y    受取干渉外
ORL
ORB X1249                ; SVRE ID9
ANL
OUT Y2048                ; ID9 HOLD
LD X1258                 ; BUSY ID10
OR Y2058                 ; ID10 HOLD
LDB X01                  ; DOOR close SIGNAL
LDB M8950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
ANB R3701                ; 除材2Y    受取干渉外
ORL
ORB X1259                ; SVRE ID10
ANL
OUT Y2058                ; ID10 HOLD
LD Y2038                 ; ID8 HOLD
ANB M8046                ; 2Y_P5 move
OR Y2048                 ; ID9 HOLD
OR Y2058                 ; ID10 HOLD
LD M8040                 ; 除材部状況確認
OR M8050                 ; 除材完了待ち
AND M8400                ; 開始要求待ち
ORL
ANB M8950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
TMR K841 K300            ; RCA8910一時停止超過
;<h1/>装置状態・動作条件
LD= D117 K1              ; RCA8_Position No.
OR= D117 K2              ; RCA8_Position No.
OR= D117 K5              ; RCA8_Position No.
AND= D118 K1             ; RCA9_Position No.
LD=.L D138 +0            ; RCA10_Position Data
OR=.L D138 +5000         ; RCA10_Position Data
ANL
OUT M8900                ; ﾕﾆｯﾄ8原点
LDB B0100                ; ﾕﾆｯﾄ8_Jig番号異常
ANB B0101                ; 除材2Y軸異常
ANB B0102                ; 除材2Z軸異常
ANB B0103                ; 除材2ﾁｬｯｸ異常
ANB B0104                ; 除材2ﾜｰｸ行方不明
ANB B0105                ; ﾕﾆｯﾄ8_異常6
ANB B0106                ; ねじ締め治具2ID異常
INV
OUT M8901                ; ﾕﾆｯﾄ8全異常
LD M8900                 ; ﾕﾆｯﾄ8原点
ANB M8000                ; ﾕﾆｯﾄ8ｽﾃｯﾌﾟ開始
ANB X1238                ; BUSY ID8
AND X1239                ; SVRE ID8
AND X123A                ; SETON ID8
ANB X123E                ; ESTOP ID8
ANB X123F                ; ALARM ID8
ANB X1248                ; BUSY ID9
AND X1249                ; SVRE ID9
AND X124A                ; SETON ID9
ANB X124E                ; ESTOP ID9
ANB X124F                ; ALARM ID9
OUT M8902                ; ﾕﾆｯﾄ8起動条件
LDB M64                  ; 運転準備
OR M65                   ; 即停止異常(緊急停止)
OR M8901                 ; ﾕﾆｯﾄ8全異常
OR T15                   ; 強制停止
OUT M8903                ; ﾕﾆｯﾄ8起動OFF
LD M98                   ; 原点復帰開始
ANB M8904                ; ﾕﾆｯﾄ8原点復帰中
OR M8904                 ; ﾕﾆｯﾄ8原点復帰中
ANB M8903                ; ﾕﾆｯﾄ8起動OFF
ANB M8589                ; ﾕﾆｯﾄ8原点復帰完了確認
LDB M103                 ; 原点復帰OK
ORB L0                   ; 手動ﾓｰﾄﾞ
ANL
OUT M8904                ; ﾕﾆｯﾄ8原点復帰中
LD M83                   ; 各工程起動指令
LD M33                   ; 手動ﾓｰﾄﾞ
AND M34                  ; ﾒｲﾝ手動操作可能条件
AND CR2003               ; 常時OFF
ORL
AND M8902                ; ﾕﾆｯﾄ8起動条件
OR M8905                 ; ﾕﾆｯﾄ8起動中
ANB M8903                ; ﾕﾆｯﾄ8起動OFF
ANB M8399                ; ﾕﾆｯﾄ8動作完了
OUT M8905                ; ﾕﾆｯﾄ8起動中
LD CR2003                ; 常時OFF
OUT M8908                ; ﾕﾆｯﾄ8警報補助
;Pack処理
LDB M8802                ; 除材2Y 移動中
ANB M8806                ; 除材2Y 原点復帰中
ANB M8812                ; 除材2Z 移動中
ANB M8816                ; 除材2Z 原点復帰中
ANB M8822                ; 除材2ﾁｬｯｸ 移動中
ANB M8826                ; 除材2ﾁｬｯｸ 原点復帰中
INV
OUT M8910                ; UNIT8 Pack
;□エラー発生　一時停止フラグ
LD CR2002                ; 常時ON
MPS
PMOV.D M8920 K0 D8100 K0 K20;Err460:除材2ﾜｰｸ残  UT8ｴﾗｰ判別
MPP
AND<> D8100 K0           ; UT8ｴﾗｰ判別
OUT M8912                ; UNIT8 ｴﾗｰ
LDB M8901                ; ﾕﾆｯﾄ8全異常
ANB M160                 ; PAUSE
ANB M8908                ; ﾕﾆｯﾄ8警報補助
ANB M8912                ; UNIT8 ｴﾗｰ
LDB M32                  ; 自動ﾓｰﾄﾞ
ANB M33                  ; 手動ﾓｰﾄﾞ
LD M32                   ; 自動ﾓｰﾄﾞ
AND M8905                ; ﾕﾆｯﾄ8起動中
ORL
LD M33                   ; 手動ﾓｰﾄﾞ
AND M8904                ; ﾕﾆｯﾄ8原点復帰中
ORL
ANL
OUT M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
;RB interlock
LD R3708                 ; 除材2Z    上空位置
ANB X1238                ; BUSY ID8
AND X1239                ; SVRE ID8
LD X123A                 ; SETON ID8
OR M8904                 ; ﾕﾆｯﾄ8原点復帰中
ANL
ANB X123E                ; ESTOP ID8
ANB X123F                ; ALARM ID8
ANB M8800                ; 除材2Y 移動完了
ANB M8802                ; 除材2Y 移動中
ANB M8804                ; 除材2Y 原点復帰完了
LD M8950                 ; ﾗｲﾄｶｰﾃﾝ  遮光無し
OR M8045                 ; 待機位置移動
ANL
OUT M8960                ; 除材2Y軸 動作可能
LDB R3700                ; 除材2Y    取出干渉外
AND R3110                ; Case搬送Y2ﾈｼﾞ締め領域
ORB R3701                ; 除材2Y    受取干渉外
ORB R3708                ; 除材2Z    上空位置
OR M8904                 ; ﾕﾆｯﾄ8原点復帰中
ANB M6915                ; ﾈｼﾞ締めRB Y2側動作中
ANB X1248                ; BUSY ID9
AND X1249                ; SVRE ID9
LD X124A                 ; SETON ID9
OR M8904                 ; ﾕﾆｯﾄ8原点復帰中
ANL
ANB X124E                ; ESTOP ID9
ANB X124F                ; ALARM ID9
ANB M8810                ; 除材2Z 移動完了
ANB M8812                ; 除材2Z 移動中
ANB M8814                ; 除材2Z 原点復帰完了
OUT M8961                ; 除材2Z軸 動作可能
LDB X1258                ; BUSY ID10
AND X1259                ; SVRE ID10
LD X125A                 ; SETON ID10
OR M8904                 ; ﾕﾆｯﾄ8原点復帰中
ANL
ANB X125E                ; ESTOP ID10
ANB X125F                ; ALARM ID10
ANB M8820                ; 除材2ﾁｬｯｸ 移動完了
ANB M8822                ; 除材2ﾁｬｯｸ 移動中
ANB M8824                ; 除材2ﾁｬｯｸ 原点復帰完了
AND M8950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
OUT M8962                ; 除材2ﾁｬｯｸ 動作可能
LDF M8905                ; ﾕﾆｯﾄ8起動中
ZRES M8800 M8829         ; 除材2Y 移動完了  HOLD停止後ｻｰﾎﾞOFF
;<h1/>■自動回路 
;
;運転開始・ステッパ初期化・補助接点へ展開
LD CR2002                ; 常時ON
ZRES M8000 M8399         ; ﾕﾆｯﾄ8ｽﾃｯﾌﾟ開始  ﾕﾆｯﾄ8動作完了
LDB M8905                ; ﾕﾆｯﾄ8起動中
MOV K0 D8000             ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8905                 ; ﾕﾆｯﾄ8起動中
MOV D8000 Z1             ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
OUT M8000:Z1             ; ﾕﾆｯﾄ8ｽﾃｯﾌﾟ開始
;自動運転ステップ開始
;除材1Z軸上空位置移動
;Move to up point
LD M8000                 ; ﾕﾆｯﾄ8ｽﾃｯﾌﾟ開始
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
MPS
AND L0                   ; 手動ﾓｰﾄﾞ
DW K398 D8000            ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
MPP
LDB L0                   ; 手動ﾓｰﾄﾞ
AND M8961                ; 除材2Z軸 動作可能
ANL
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8001                 ; 2Z_P1　move
MPS
DW K1 D8051              ; 除材2Z軸 移動No.
CON
OUT @M20                 ; 除材2Z軸移動
MPP
AND M8810                ; 除材2Z 移動完了
RES M8810                ; 除材2Z 移動完了
CON
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
;除材要求確認
;Remove demand check
LD M8002                 ; 除材要求確認
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
MPS
AND M3985                ; Y2排出要求
DW K5 D8000              ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
MPP
ANB M3985                ; Y2排出要求
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
;Y軸　待機位置移動
;Move to remove waiting posotion
LD M8003                 ; 待機位置移動
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
AND M8960                ; 除材2Y軸 動作可能
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8004                 ; 2Y_P2 move
MPS
DW K2 D8050              ; 除材2Y軸 移動No.
CON
OUT @M0                  ; 除材2Y軸移動
MPP
AND M8800                ; 除材2Y 移動完了
RES M8800                ; 除材2Y 移動完了
CON
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
;除材要求待ち
;Waiting for remove demand
LD M8005                 ; 除材要求待ち
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
MPS
AND M3985                ; Y2排出要求
DW K10 D8000             ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
MPP
LDB M3985                ; Y2排出要求
AND M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
AND M3398                ; UT3ｻｲｸﾙ停止
ANL
DW K380 D8000            ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
;Y軸　取り出し位置移動
;Move to pick up posotion
LD M8010                 ; 取出し位置移動
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
AND M8960                ; 除材2Y軸 動作可能
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8011                 ; 2Y_P3 move
MPS
DW K3 D8050              ; 除材2Y軸 移動No.
CON
OUT @M1                  ; 除材2Y軸移動
MPP
AND M8800                ; 除材2Y 移動完了
RES M8800                ; 除材2Y 移動完了
CON
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
;Z軸　取り出し位置下降
;Down to pick up height
LD M8012                 ; 取出し高さ下降
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
AND M8961                ; 除材2Z軸 動作可能
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8013                 ; 2Z_P3　move
MPS
DW K3 D8051              ; 除材2Z軸 移動No.
CON
OUT @M21                 ; 除材2Z軸移動
MPP
AND M8810                ; 除材2Z 移動完了
RES M8810                ; 除材2Z 移動完了
CON
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
;ﾁｬｯｸ閉
;Chuck close 
LD M8014                 ; 除材ﾁｬｯｸ閉じ
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
AND M8962                ; 除材2ﾁｬｯｸ 動作可能
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8015                 ; Chuck_P2  move
MPS
OUT @M60                 ; 除材2ﾁｬｯｸ  Close
MPP
AND M8820                ; 除材2ﾁｬｯｸ 移動完了
RES M8820                ; 除材2ﾁｬｯｸ 移動完了
CON
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8016                 ; ﾜｰｸﾁｪｯｸ
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
MPS
AND M8822                ; 除材2ﾁｬｯｸ 移動中
DW K30 D8000             ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
MPP
ANB M8822                ; 除材2ﾁｬｯｸ 移動中
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
;Err461:Chuck error of Remove head 2
LD M8017                 ; ｴﾗｰ発生
ANB M71                  ; Error
DW K461 D148             ; 警報No.
CON
SET M8921                ; Err461:除材ﾍｯﾄﾞ2ﾁｬｯｸ異常
CON
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8018                 ; ｴﾗｰ中
AND M71                  ; Error
RES B1013                ; remove
CON
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8019                 ; ｴﾗｰ解除確認
ANB M71                  ; Error
MPS
ANB B1013                ; remove
DW K21 D8000             ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
MPP
AND B1013                ; remove
RES B1013                ; remove
CON
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8020                 ; Removeﾌﾗｸﾞ解除
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
DW K300 D8000            ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
;ﾘﾄﾗｲのためﾁｬｯｸ開
;Chuck open for retry
LD M8021                 ; ﾘﾄﾗｲ用ﾁｬｯｸ開
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
AND M8962                ; 除材2ﾁｬｯｸ 動作可能
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8022                 ; Chuck_P1  move
MPS
OUT @M40                 ; 除材2ﾁｬｯｸ  Open
MPP
AND M8820                ; 除材2ﾁｬｯｸ 移動完了
RES M8820                ; 除材2ﾁｬｯｸ 移動完了
CON
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8023
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
ANB M8820                ; 除材2ﾁｬｯｸ 移動完了
DW K14 D8000             ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
;Z軸　上昇
;Up to weiting point
LD M8030                 ; 待機高さ上昇
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
AND M8961                ; 除材2Z軸 動作可能
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8031                 ; 2Z_P1　move
MPS
DW K1 D8051              ; 除材2Z軸 移動No.
CON
OUT @M22                 ; 除材2Z軸移動
MPP
AND M8810                ; 除材2Z 移動完了
RES M8810                ; 除材2Z 移動完了
CON
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
;取り出し完了
;Pick up comlete
LD M8032                 ; 排出完了
MPS
LD M8913                 ; UNIT8     ｴﾗｰ・PAUSE無し
ANB M3985                ; Y2排出要求
ANL
DW K40 D8000             ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
MPP
OUT M8770                ; Y2排出完了
;除材部　状況確認
;Remove stage status check
LD M8040                 ; 除材部状況確認
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
AND M8950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
MPS
LD T803                  ; 除材部ﾜｰｸ無し
ANB M8776                ; 除材2取り出し要求
ANL
DW K50 D8000             ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
MPP
LDB T803                 ; 除材部ﾜｰｸ無し
OR M8776                 ; 除材2取り出し要求
ANL
DW K45 D8000             ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
;ﾜｰｸ未除材なので待機位置へ
;Move to waiting position
LD M8045                 ; 待機位置移動
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
AND M8960                ; 除材2Y軸 動作可能
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8046                 ; 2Y_P5 move
MPS
DW K5 D8050              ; 除材2Y軸 移動No.
CON
OUT @M2                  ; 除材2Y軸移動
MPP
AND M8800                ; 除材2Y 移動完了
RES M8800                ; 除材2Y 移動完了
CON
DW K50 D8000             ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
;除材待ち
;Waiting for remove complete
LD M8050                 ; 除材完了待ち
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
AND M8950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
AND T803                 ; 除材部ﾜｰｸ無し
ANB M8776                ; 除材2取り出し要求
TMR K810 K5              ; 次工程ｳｪｲﾄ
CON
AND T810                 ; 次工程ｳｪｲﾄ
DW K60 D8000             ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
;Y軸　除材位置移動
;Move to remove position
LD M8060                 ; 除材位置移動
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
AND M8960                ; 除材2Y軸 動作可能
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8061                 ; 2Y_P7 move
MPS
DW K7 D8050              ; 除材2Y軸 移動No.
CON
OUT @M3                  ; 除材2Y軸移動
MPP
AND M8800                ; 除材2Y 移動完了
RES M8800                ; 除材2Y 移動完了
CON
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
;Z軸　除材高さ下降
;Down to remove point
LD M8062                 ; 除材高さへ下降
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
AND M8961                ; 除材2Z軸 動作可能
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8063                 ; 2Z_P7　move
MPS
DW K7 D8051              ; 除材2Z軸 移動No.
CON
OUT @M23                 ; 除材2Z軸移動
MPP
AND M8810                ; 除材2Z 移動完了
RES M8810                ; 除材2Z 移動完了
CON
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
;ﾁｬｯｸ開
;Chuck Open 
LD M8064                 ; ﾁｬｯｸ開
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
AND M8962                ; 除材2ﾁｬｯｸ 動作可能
RES L22                  ; 除材2ﾁｬｯｸ ﾜｰｸ有
CON
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8065                 ; Chuck_P1  move
MPS
OUT @M41                 ; 除材2ﾁｬｯｸ  Open
MPP
AND M8820                ; 除材2ﾁｬｯｸ 移動完了
RES M8820                ; 除材2ﾁｬｯｸ 移動完了
CON
DW K70 D8000             ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
;Z軸　上昇
;Up to weiting point
LD M8070                 ; Z軸上空位置
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
AND M8961                ; 除材2Z軸 動作可能
AND M8950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8071                 ; 1Z_P1　move
MPS
DW K1 D8051              ; 除材2Z軸 移動No.
CON
OUT @M24                 ; 除材2Z軸移動
MPP
AND M8810                ; 除材2Z 移動完了
RES M8810                ; 除材2Z 移動完了
CON
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
;在荷確認
;Work check
LD M8072                 ; 在荷確認
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
MPS
AND T1711                ; 除材2_ﾜｰｸ検出
DW K90 D8000             ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
MPP
ANB T1711                ; 除材2_ﾜｰｸ検出
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
;***
;Err464:No Work on remove stage
LD M8080                 ; ｴﾗｰ発生
ANB M71                  ; Error
DW K464 D148             ; 警報No.
CON
SET M8924                ; Err464:除材部2ﾜｰｸ未検出
CON
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8081                 ; ｴﾗｰ中
AND M71                  ; Error
RES B1013                ; remove
CON
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8082                 ; ｴﾗｰ解除確認
ANB M71                  ; Error
MPS
ANB B1013                ; remove
DW K72 D8000             ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
MPP
AND B1013                ; remove
RES B1013                ; remove
CON
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8083                 ; Removeﾌﾗｸﾞ解除
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
;異常ﾜｰｸ除材のため待機位置へ
;Move to waiting position for remove error work
LD M8084                 ; 除材ﾍｯﾄﾞ　待機位置移動
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
AND M8960                ; 除材2Y軸 動作可能
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8085                 ; Y_P2 move
MPS
DW K2 D8050              ; 除材2Y軸 移動No.
CON
OUT @M4                  ; 除材2Y軸移動
MPP
AND M8800                ; 除材2Y 移動完了
RES M8800                ; 除材2Y 移動完了
CON
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
;Err460:Work remain
LD M8086                 ; ｴﾗｰ発生
ANB M71                  ; Error
DW K460 D148             ; 警報No.
CON
SET M8920                ; Err460:除材2ﾜｰｸ残
CON
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8087                 ; ｴﾗｰ中
AND M71                  ; Error
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8088                 ; ｴﾗｰ解除確認
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
MPS
AND T1711                ; 除材2_ﾜｰｸ検出
DW K86 D8000             ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
MPP
ANB T1711                ; 除材2_ﾜｰｸ検出
DW K380 D8000            ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
;***
;除材要求動作開始
;Remove operation demand
LD M8090                 ; 除材要求 開始
MPS
AND<> D8001 K0           ; UT8SUB1  除材ｽﾃｯﾌﾟ
DW K380 D8000            ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
MPP
OUT M8774                ; 除材動作開始
;★★★　ﾁｬｯｸNG除材動作　★★★
;Chuck Error Operation
;ﾁｬｯｸ開
;Chuck Open 
LD M8300                 ; 吸着NG→除材処理へ
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
AND M8962                ; 除材2ﾁｬｯｸ 動作可能
RES L22                  ; 除材2ﾁｬｯｸ ﾜｰｸ有
CON
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8301                 ; Chuck_P1  move
MPS
OUT @M42                 ; 除材2ﾁｬｯｸ  Open
MPP
AND M8820                ; 除材2ﾁｬｯｸ 移動完了
RES M8820                ; 除材2ﾁｬｯｸ 移動完了
CON
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
;嵌合ﾍｯﾄﾞ上空位置へ上昇
;Assy head up
LD M8302                 ; 除材2Z　上空位置
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
AND M8961                ; 除材2Z軸 動作可能
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8303                 ; 2Z_P1 move
MPS
DW K1 D8051              ; 除材2Z軸 移動No.
CON
OUT @M25                 ; 除材2Z軸移動
MPP
AND M8810                ; 除材2Z 移動完了
RES M8810                ; 除材2Z 移動完了
CON
DW K320 D8000            ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
;Frame搬送とﾊﾝﾄﾞｼｪｲｸ
;Handshake with Frame-Trasfer Y1
LD M8320                 ; Case取り出し異常
MPS
LD M8913                 ; UNIT8     ｴﾗｰ・PAUSE無し
ANB M3985                ; Y2排出要求
ANL
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
MPP
OUT M8771                ; 排出異常【自動ﾓｰﾄﾞ】
LD M8321                 ; 終了へ
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
DW K380 D8000            ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
;★★★
;■■■　搬送中吸着NG除材動作　■■■
;Adsorption Error when transpot Operation
;除材確認
;Remove check　　　　　　　　　　↓多分ない
LD M8330                 ; 除材確認
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
AND M28                  ; 仮 NAT
MPS
AND T802                 ; 除材ﾍｯﾄﾞ2除材OK
DW K334 D8000            ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
MPP
LD T800                  ; 除材ﾍｯﾄﾞ2吸着OK
OR T801                  ; 除材ﾍｯﾄﾞ2吸着異常
ANL
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
;Err460:Work remain
LD M8331                 ; ｴﾗｰ発生
ANB M71                  ; Error
DW K460 D148             ; 警報No.
CON
SET M8920                ; Err460:除材2ﾜｰｸ残
CON
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8332                 ; ｴﾗｰ中
AND M71                  ; Error
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8333                 ; ｴﾗｰ解除確認
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
DW K330 D8000            ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
;吸着OFF
;Adsorption OFF
LD M8334                 ; 吸着OFF
MPS
LD M8913                 ; UNIT8     ｴﾗｰ・PAUSE無し
ANB Y2474                ; 除材ﾍｯﾄﾞ2吸着ON　●
ANL
DW K380 D8000            ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
MPP
OUT M8765                ; 除材2ﾍｯﾄﾞ吸着OFF
;■■■
;サイクル停止条件
;Cycle end check
LD M8380                 ; 1ｻｲｸﾙ終了
MPS
LDB M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
LDB M3398                ; UT3ｻｲｸﾙ停止
ANB L0                   ; 手動ﾓｰﾄﾞ
ORL
ANL
DW K0 D8000              ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
MPP
LD M70                   ; 自動起動停止指令(ｻｲｸﾙ停止)
LD M3398                 ; UT3ｻｲｸﾙ停止
OR L0                    ; 手動ﾓｰﾄﾞ
ANL
ANL
MPS
AND L0                   ; 手動ﾓｰﾄﾞ
DW K390 D8000            ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
MPP
ANB L0                   ; 手動ﾓｰﾄﾞ
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8381                 ; ﾜｰｸ残ﾁｪｯｸ
MPS
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
MPS
AND T802                 ; 除材ﾍｯﾄﾞ2除材OK
DW K385 D8000            ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
MPP
LD T800                  ; 除材ﾍｯﾄﾞ2吸着OK
OR T801                  ; 除材ﾍｯﾄﾞ2吸着異常
ANL
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
MPP
OUT M8766                ; 除材2ﾍｯﾄﾞ吸着ON
;Err460:Work remain
LD M8382                 ; ｴﾗｰ発生
ANB M71                  ; Error
DW K460 D148             ; 警報No.
CON
SET M8920                ; Err460:除材2ﾜｰｸ残
CON
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8383                 ; ｴﾗｰ中
AND M71                  ; Error
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8384                 ; ｴﾗｰ解除確認
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
DW K381 D8000            ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
;吸着OFF
;Adsorption OFF
LD M8385                 ; 吸着OFF
MPS
LD M8913                 ; UNIT8     ｴﾗｰ・PAUSE無し
ANB Y2474                ; 除材ﾍｯﾄﾞ2吸着ON　●
ANB Y2475                ; 除材ﾍｯﾄﾞ2破壊ON　●
ANL
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
MPP
OUT M8767
;除材1Z軸上空位置移動
;Move to up point
LD M8386                 ; 除材1Z上空位置移動
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
AND M8961                ; 除材2Z軸 動作可能
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8387                 ; Z_P1 move
MPS
DW K1 D8051              ; 除材2Z軸 移動No.
CON
OUT @M26                 ; 除材2Z軸移動
MPP
AND M8810                ; 除材2Z 移動完了
RES M8810                ; 除材2Z 移動完了
CON
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
;除材1Y軸ｶﾊﾞｰ待機位置移動
;Move to waiting point
LD M8388                 ; 嵌合Xｶﾊﾞｰ吸着位置移動
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
AND M8960                ; 除材2Y軸 動作可能
@INC D8000               ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8389                 ; Y_P2 move
MPS
DW K2 D8050              ; 除材2Y軸 移動No.
CON
OUT @M5                  ; 除材2Y軸移動
MPP
AND M8800                ; 除材2Y 移動完了
RES M8800                ; 除材2Y 移動完了
CON
DW K390 D8000            ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
LD M8390                 ; ｻｲｸﾙ終了へ
AND M8409                ; 除材動作ﾙｰﾁﾝ停止
@MOV K398 D8000          ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
;終了
;Unit AUTO cycle end
LD M8398                 ; ﾕﾆｯﾄ8ｻｲｸﾙ停止
MPS
LD M70                   ; 自動起動停止指令(ｻｲｸﾙ停止)
OR L0                    ; 手動ﾓｰﾄﾞ
AND M72                  ; 全ﾕﾆｯﾄ停止確認
ANL
@MOV K399 D8000          ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
MPP
LDB M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
ANB L0                   ; 手動ﾓｰﾄﾞ
ANL
DW K0 D8000              ; ﾕﾆｯﾄ8自動運転ｽﾃｯﾌﾟ
;<h1/>■原点復帰回路
;
;運転開始・ステッパ初期化・補助接点へ展開
LD CR2002                ; 常時ON
ZRES M8500 M8589         ; ﾕﾆｯﾄ8原点復帰開始  ﾕﾆｯﾄ8原点復帰完了確認
LDB M8904                ; ﾕﾆｯﾄ8原点復帰中
MOV K0 D8010             ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
LD M8904                 ; ﾕﾆｯﾄ8原点復帰中
MOV D8010 Z1             ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
OUT M8500:Z1             ; ﾕﾆｯﾄ8原点復帰開始
;原点復帰ステップ開始
;Origin start
LD M8500                 ; ﾕﾆｯﾄ8原点復帰開始
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
MPS
AND L0                   ; 手動ﾓｰﾄﾞ
DW K80 D8010             ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
MPP
LDB L0                   ; 手動ﾓｰﾄﾞ
LD M6900                 ; ネジ締めRB原点
OR L1                    ; ﾈｼﾞ締めRB無し
ANL
ANL
@INC D8010               ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
;除材2ﾜｰｸ残ﾁｪｯｸ
;Remove-2 work remain check
LD M8501                 ; ﾜｰｸ残ﾁｪｯｸ
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
MPS
LDB L22                  ; 除材2ﾁｬｯｸ ﾜｰｸ有
LDB X125B                ; INP ID10
OR<> D119 K2             ; RCA10_Position No.
ANL
ANL
DW K10 D8010             ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
MPP
LD L22                   ; 除材2ﾁｬｯｸ ﾜｰｸ有
LD X125B                 ; INP ID10
AND= D119 K2             ; RCA10_Position No.
ORL
ANL
@INC D8010               ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
;Err460:Work remain
LD M8502                 ; ｴﾗｰ発生
ANB M71                  ; Error
DW K460 D148             ; 警報No.
CON
SET M8920                ; Err460:除材2ﾜｰｸ残
CON
@INC D8010               ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
LD M8503                 ; ｴﾗｰ中
AND M71                  ; Error
@INC D8010               ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
LD M8504                 ; ｴﾗｰ解除確認
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
MPS
AND<> D119 K2            ; RCA10_Position No.
DW K10 D8010             ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
MPP
AND= D119 K2             ; RCA10_Position No.
DW K2 D8010              ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
;除材1Z軸　原点復帰
;Remove-Transfer Z HOME
LD M8510                 ; 除材1Z原点復帰
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
AND M8961                ; 除材2Z軸 動作可能
SET M8816                ; 除材2Z 原点復帰中
CON
@INC D8010               ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
LD M8511                 ; RCA9 HOME
MPS
ANB X1248                ; BUSY ID9
OUT Y204C                ; ID9 SETUP
MPP
AND X1248                ; BUSY ID9
@INC D8010               ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
LD M8512                 ; RCA9 HOME end
ANB X1248                ; BUSY ID9
AND X124A                ; SETON ID9
AND X124B                ; INP ID9
RES M8816                ; 除材2Z 原点復帰中
CON
DW K40 D8010             ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
;除材1Z軸原点復帰完了
;Remove-Transfer Z HOME end
LD M8540                 ; 除材2Z軸原点復帰完了
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
@INC D8010               ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
;除材1ﾁｬｯｸ　原点復帰
;Remove-Transfer chuck HOME
LD M8541                 ; 除材2ﾁｬｯｸ原点復帰
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
AND M8962                ; 除材2ﾁｬｯｸ 動作可能
RES L22                  ; 除材2ﾁｬｯｸ ﾜｰｸ有
CON
SET M8826                ; 除材2ﾁｬｯｸ 原点復帰中
CON
@INC D8010               ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
LD M8542                 ; Chuck HOME
MPS
ANB X1258                ; BUSY ID10
OUT Y205C                ; ID10 SETUP
MPP
AND X1258                ; BUSY ID10
@INC D8010               ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
LD M8543                 ; Chuck HOME end
ANB X1258                ; BUSY ID10
AND X125A                ; SETON ID10
AND X125B                ; INP ID10
RES M8826                ; 除材2ﾁｬｯｸ 原点復帰中
CON
@INC D8010               ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
;除材ﾁｬｯｸ開
;Remove chuck open
LD M8544                 ; ﾁｬｯｸちょっと閉じ
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
AND M8962                ; 除材2ﾁｬｯｸ 動作可能
RES L22                  ; 除材2ﾁｬｯｸ ﾜｰｸ有
CON
@INC D8010               ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
LD M8545                 ; Chuck_P1 move
MPS
OUT @M43                 ; 除材2ﾁｬｯｸ  Open
MPP
AND M8820                ; 除材2ﾁｬｯｸ 移動完了
RES M8820                ; 除材2ﾁｬｯｸ 移動完了
CON
@INC D8010               ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
;除材1Y軸　原点復帰
;Remove-Transfer Y HOME
LD M8546                 ; 除材1Y軸原点復帰
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
AND M8960                ; 除材2Y軸 動作可能
SET M8806                ; 除材2Y 原点復帰中
CON
@INC D8010               ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
LD M8547                 ; RCA8 HOME
MPS
ANB X1238                ; BUSY ID8
OUT Y203C                ; ID8 SETUP
MPP
AND X1238                ; BUSY ID8
@INC D8010               ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
LD M8548                 ; RCA8 HOME end
ANB X1238                ; BUSY ID8
AND X123A                ; SETON ID8
AND X123B                ; INP ID8
RES M8806                ; 除材2Y 原点復帰中
CON
DW K50 D8010             ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
;Y軸　待機位置移動
;Move to remove waiting posotion
LD M8550                 ; 待機位置移動
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
AND M8960                ; 除材2Y軸 動作可能
@INC D8010               ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
LD M8551                 ; Y_P2 move
MPS
DW K2 D8050              ; 除材2Y軸 移動No.
CON
OUT @M6                  ; 除材2Y軸移動
MPP
AND M8800                ; 除材2Y 移動完了
RES M8800                ; 除材2Y 移動完了
CON
@INC D8010               ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
;除材1Z軸上空位置移動
;Move to up point
LD M8552                 ; 待機位置移動
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
AND M8961                ; 除材2Z軸 動作可能
@INC D8010               ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
LD M8553                 ; Z_P2 move
MPS
DW K2 D8051              ; 除材2Z軸 移動No.
CON
OUT @M27                 ; 除材2Z軸移動
MPP
AND M8810                ; 除材2Z 移動完了
RES M8810                ; 除材2Z 移動完了
CON
DW K80 D8010             ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
;原点復帰終了
LD M8580                 ; 原点復帰動作完了
AND M8900                ; ﾕﾆｯﾄ8原点
OUT M8588                ; ﾕﾆｯﾄ8原点復帰完了
LD M8588                 ; ﾕﾆｯﾄ8原点復帰完了
ANB M98                  ; 原点復帰開始
@MOV K89 D8010           ; ﾕﾆｯﾄ8原点復帰ｽﾃｯﾌﾟ
;<h1/>■手動回路 
;
LD M33                   ; 手動ﾓｰﾄﾞ
AND M34                  ; ﾒｲﾝ手動操作可能条件
ANB M8905                ; ﾕﾆｯﾄ8起動中
ANB M97                  ; 原点復帰動作中
MC
LD M8950                 ; ﾗｲﾄｶｰﾃﾝ  遮光無し
ANB X1238                ; BUSY ID8
ANB X1248                ; BUSY ID9
ANB X1258                ; BUSY ID10
MPS
AND M8960                ; 除材2Y軸 動作可能
OUT M8608                ; 除材2手動Y軸動作可能
MRD
AND M8961                ; 除材2Z軸 動作可能
OUT M8609                ; 除材2手動Z軸動作可能
MPP
AND M8962                ; 除材2ﾁｬｯｸ 動作可能
OUT M8610                ; 除材2手動ﾁｬｯｸ動作可能
;Remove-Transfer 1 Y
LD CR2002                ; 常時ON
MPS
LD B1160                 ; 除材2Y軸　除材2位置PB
ANB L0                   ; 手動ﾓｰﾄﾞ
AND M8608                ; 除材2手動Y軸動作可能
OR M8611                 ; 除材2Y    P7移動
ANB M8800                ; 除材2Y 移動完了
ANL
OUT M8611                ; 除材2Y    P7移動
DW K7 D8050              ; 除材2Y軸 移動No.
CON
OUT @M7                  ; 除材2Y軸移動
MPP
ANF M8611                ; 除材2Y    P7移動
RES M8800                ; 除材2Y 移動完了
LD CR2002                ; 常時ON
MPS
LD B1161                 ; 除材2Y軸　待機位置PB
AND M8608                ; 除材2手動Y軸動作可能
OR M8613                 ; 除材2Y    P2移動
ANB M8800                ; 除材2Y 移動完了
ANL
OUT M8613                ; 除材2Y    P2移動
DW K2 D8050              ; 除材2Y軸 移動No.
CON
OUT @M9                  ; 除材2Y軸移動
MPP
ANF M8613                ; 除材2Y    P2移動
RES M8800                ; 除材2Y 移動完了
LD CR2002                ; 常時ON
MPS
LD B1162                 ; 除材2Y軸　受取位置PB
ANB L0                   ; 手動ﾓｰﾄﾞ
AND M8608                ; 除材2手動Y軸動作可能
OR M8614                 ; 除材2Y    P3移動
ANB M8800                ; 除材2Y 移動完了
ANL
OUT M8614                ; 除材2Y    P3移動
DW K3 D8050              ; 除材2Y軸 移動No.
CON
OUT @M10                 ; 除材2Y軸移動
MPP
ANF M8614                ; 除材2Y    P3移動
RES M8800                ; 除材2Y 移動完了
LD CR2002                ; 常時ON
MPS
LD B1163                 ; 除材2Y軸　待機位置2PB
AND M8608                ; 除材2手動Y軸動作可能
OR M8616                 ; 除材2Y    P５移動
ANB M8800                ; 除材2Y 移動完了
ANL
OUT M8616                ; 除材2Y    P５移動
DW K5 D8050              ; 除材2Y軸 移動No.
CON
OUT @M11                 ; 除材2Y軸移動
MPP
ANF M8616                ; 除材2Y    P５移動
RES M8800                ; 除材2Y 移動完了
;Remove-Transfer 1 Z
LD CR2002                ; 常時ON
MPS
LD B1165                 ; 除材2Z軸　上空高さPB
AND M8609                ; 除材2手動Z軸動作可能
OR M8620                 ; 除材2Z    P1移動
ANB M8810                ; 除材2Z 移動完了
ANL
OUT M8620                ; 除材2Z    P1移動
DW K1 D8051              ; 除材2Z軸 移動No.
CON
OUT @M28                 ; 除材2Z軸移動
MPP
ANF M8620                ; 除材2Z    P1移動
RES M8810                ; 除材2Z 移動完了
LD CR2002                ; 常時ON
MPS
LD B1166                 ; 除材2Z軸　除材2高さPB
ANB L0                   ; 手動ﾓｰﾄﾞ
AND M8609                ; 除材2手動Z軸動作可能
OR M8621                 ; 除材2Z    P7移動
ANB M8810                ; 除材2Z 移動完了
ANL
OUT M8621                ; 除材2Z    P7移動
DW K7 D8051              ; 除材2Z軸 移動No.
CON
OUT @M29                 ; 除材2Z軸移動
MPP
ANF M8621                ; 除材2Z    P7移動
RES M8810                ; 除材2Z 移動完了
LD CR2002                ; 常時ON
MPS
LD B1166                 ; 除材2Z軸　除材2高さPB
AND L0                   ; 手動ﾓｰﾄﾞ
AND M8609                ; 除材2手動Z軸動作可能
OR M8622                 ; 除材2Z    P8移動
ANB M8810                ; 除材2Z 移動完了
ANL
OUT M8622                ; 除材2Z    P8移動
DW K8 D8051              ; 除材2Z軸 移動No.
CON
OUT @M30                 ; 除材2Z軸移動
MPP
ANF M8622                ; 除材2Z    P8移動
RES M8810                ; 除材2Z 移動完了
LD CR2002                ; 常時ON
MPS
LD B1167                 ; 除材2Z軸　受取高さPB
ANB L0                   ; 手動ﾓｰﾄﾞ
AND M8609                ; 除材2手動Z軸動作可能
OR M8623                 ; 除材2Z    P3移動
ANB M8810                ; 除材2Z 移動完了
ANL
OUT M8623                ; 除材2Z    P3移動
DW K3 D8051              ; 除材2Z軸 移動No.
CON
OUT @M31                 ; 除材2Z軸移動
MPP
ANF M8623                ; 除材2Z    P3移動
RES M8810                ; 除材2Z 移動完了
LD CR2002                ; 常時ON
MPS
LD B1167                 ; 除材2Z軸　受取高さPB
AND L0                   ; 手動ﾓｰﾄﾞ
AND M8609                ; 除材2手動Z軸動作可能
OR M8624                 ; 除材2Z    P4移動
ANB M8810                ; 除材2Z 移動完了
ANL
OUT M8624                ; 除材2Z    P4移動
DW K4 D8051              ; 除材2Z軸 移動No.
CON
OUT @M32                 ; 除材2Z軸移動
MPP
ANF M8624                ; 除材2Z    P4移動
RES M8810                ; 除材2Z 移動完了
MCR
;<h1/>■サブルーチン
;
;<h1/> ////　除材動作
;////   Remove operation
LD CR2002                ; 常時ON
ZRES M8400 M8409         ; 開始要求待ち  除材動作ﾙｰﾁﾝ停止
LDB M8905                ; ﾕﾆｯﾄ8起動中
MOV K0 D8001             ; UT8SUB1  除材ｽﾃｯﾌﾟ
LD M8905                 ; ﾕﾆｯﾄ8起動中
MOV D8001 Z1             ; UT8SUB1  除材ｽﾃｯﾌﾟ
OUT M8400:Z1             ; 開始要求待ち
;開始要求待ち
;Waiting for remove operation demand
LD M8400                 ; 開始要求待ち
MPS
LDB M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
ORB M8398                ; ﾕﾆｯﾄ8ｻｲｸﾙ停止
AND M8774                ; 除材動作開始
ANL
@INC D8001               ; UT8SUB1  除材ｽﾃｯﾌﾟ
MPP
LD M70                   ; 自動起動停止指令(ｻｲｸﾙ停止)
AND M8390                ; ｻｲｸﾙ終了へ
ANB M8409                ; 除材動作ﾙｰﾁﾝ停止
ANL
DW K9 D8001              ; UT8SUB1  除材ｽﾃｯﾌﾟ
LD M8401                 ; 除材ﾊﾝﾄﾞ干渉外確認
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
AND R3701                ; 除材2Y    受取干渉外
@INC D8001               ; UT8SUB1  除材ｽﾃｯﾌﾟ
LD M8402                 ; 取り出し動作確認
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
ANB M8950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
@INC D8001               ; UT8SUB1  除材ｽﾃｯﾌﾟ
LD M8403                 ; ﾜｰｸ残確認
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
AND M8950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
AND T803                 ; 除材部ﾜｰｸ無し
@INC D8001               ; UT8SUB1  除材ｽﾃｯﾌﾟ
LD M8404                 ; 終了
AND M8913                ; UNIT8     ｴﾗｰ・PAUSE無し
ANB M8774                ; 除材動作開始
DW K0 D8001              ; UT8SUB1  除材ｽﾃｯﾌﾟ
;<h1/>出力
;OUTPUT
LDB @M0                  ; 除材2Y軸移動
ANB @M1                  ; 除材2Y軸移動
ANB @M2                  ; 除材2Y軸移動
ANB @M3                  ; 除材2Y軸移動
ANB @M4                  ; 除材2Y軸移動
ANB @M5                  ; 除材2Y軸移動
ANB @M6                  ; 除材2Y軸移動
ANB @M7                  ; 除材2Y軸移動
ANB @M8                  ; 除材2Y軸移動
ANB @M9                  ; 除材2Y軸移動
ANB @M10                 ; 除材2Y軸移動
ANB @M11                 ; 除材2Y軸移動
INV
MCALL P_MOVE_S K8 D8050 M8801 M8800 M8802;除材2Y軸 移動No.  除材2Y 移動異常  除材2Y 移動完了  除材2Y 移動中
LDB @M20                 ; 除材2Z軸移動
ANB @M21                 ; 除材2Z軸移動
ANB @M22                 ; 除材2Z軸移動
ANB @M23                 ; 除材2Z軸移動
ANB @M24                 ; 除材2Z軸移動
ANB @M25                 ; 除材2Z軸移動
ANB @M26                 ; 除材2Z軸移動
ANB @M27                 ; 除材2Z軸移動
ANB @M28                 ; 除材2Z軸移動
ANB @M29                 ; 除材2Z軸移動
ANB @M30                 ; 除材2Z軸移動
ANB @M31                 ; 除材2Z軸移動
ANB @M32                 ; 除材2Z軸移動
INV
MCALL P_MOVE_S K9 D8051 M8811 M8810 M8812;除材2Z軸 移動No.  除材2Z 移動異常  除材2Z 移動完了  除材2Z 移動中
LDB @M40                 ; 除材2ﾁｬｯｸ  Open
ANB @M41                 ; 除材2ﾁｬｯｸ  Open
ANB @M42                 ; 除材2ﾁｬｯｸ  Open
ANB @M43                 ; 除材2ﾁｬｯｸ  Open
ANB @M44                 ; 除材2ﾁｬｯｸ  Open
ANB @M45                 ; 除材2ﾁｬｯｸ  Open
INV
MCALL P_MOVE_S K10 K1 M8821 M8820 M8822;除材2ﾁｬｯｸ 移動異常  除材2ﾁｬｯｸ 移動完了  除材2ﾁｬｯｸ 移動中
LDB @M60                 ; 除材2ﾁｬｯｸ  Close
ANB @M61                 ; 除材2ﾁｬｯｸ  Close
INV
MCALL P_CHUCK_S K10 K2 M8821 M8820 M8822 L22;除材2ﾁｬｯｸ 移動異常  除材2ﾁｬｯｸ 移動完了  除材2ﾁｬｯｸ 移動中  除材2ﾁｬｯｸ ﾜｰｸ有
;除材ﾍｯﾄﾞ1吸着
;Remove head 1 vauuming
LDP M8640                ; 除材2MUN  吸着ON
ORP M8750
ORP M8752
ORP M8754                ; 除材2ﾍｯﾄﾞ吸着ON
ORP M8762                ; 除材2ﾍｯﾄﾞ吸着ON
ORP M8766                ; 除材2ﾍｯﾄﾞ吸着ON
OR M8700                 ; 除材ﾍｯﾄﾞ1吸着ON補助
ANB M8701                ; 除材ﾍｯﾄﾞ1吸着OFF補助
ANPB M8702               ; 除材ﾍｯﾄﾞ1破壊ON補助
OUT M8700                ; 除材ﾍｯﾄﾞ1吸着ON補助
LDP M8641                ; 除材2MUN  吸着OFF
ORP M8751
ORP M8755                ; 除材2ﾍｯﾄﾞ吸着OFF
ORP M8763                ; 除材2ﾍｯﾄﾞ吸着OFF
ORP M8765                ; 除材2ﾍｯﾄﾞ吸着OFF
OUT M8701                ; 除材ﾍｯﾄﾞ1吸着OFF補助
LD M8700                 ; 除材ﾍｯﾄﾞ1吸着ON補助
OUT Y2474                ; 除材ﾍｯﾄﾞ2吸着ON　●
;除材ﾍｯﾄﾞ1真空破壊
;Remove head 1 air release
LDP M8642                ; 除材2MUN  破壊ON
ORP M8753                ; 除材2ﾍｯﾄﾞ破壊ON
ORP M8760                ; 除材2ﾍｯﾄﾞ破壊ON
OR M8702                 ; 除材ﾍｯﾄﾞ1破壊ON補助
ANB M8703                ; 除材ﾍｯﾄﾞ1破壊OFF補助
ANPB M8700               ; 除材ﾍｯﾄﾞ1吸着ON補助
OUT M8702                ; 除材ﾍｯﾄﾞ1破壊ON補助
LDP M8643                ; 除材2MUN  破壊OFF
ORP M8761                ; 除材2ﾍｯﾄﾞ破壊OFF
OUT M8703                ; 除材ﾍｯﾄﾞ1破壊OFF補助
LD M8702                 ; 除材ﾍｯﾄﾞ1破壊ON補助
OUT Y2475                ; 除材ﾍｯﾄﾞ2破壊ON　●
;<h1/>異常検出
;
LD CR2002                ; 常時ON
MPS
LD CR2003                ; 常時OFF
LDB B0660
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0100                ; ﾕﾆｯﾄ8_Jig番号異常
ORL
ANL
OUT B0100                ; ﾕﾆｯﾄ8_Jig番号異常
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0660
AND B0100                ; ﾕﾆｯﾄ8_Jig番号異常
ANL
OUT B0660
LD CR2002                ; 常時ON
MPS
LD M64                   ; 運転準備
AND X123F                ; ALARM ID8
LDB B0661
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0101                ; 除材2Y軸異常
ORL
ANB L0                   ; 手動ﾓｰﾄﾞ
ANL
OUT B0101                ; 除材2Y軸異常
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0661
AND B0101                ; 除材2Y軸異常
ANL
OUT B0661
LD CR2002                ; 常時ON
MPS
LD M64                   ; 運転準備
AND X124F                ; ALARM ID9
LDB B0662
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0102                ; 除材2Z軸異常
ORL
ANB L0                   ; 手動ﾓｰﾄﾞ
ANL
OUT B0102                ; 除材2Z軸異常
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0662
AND B0102                ; 除材2Z軸異常
ANL
OUT B0662
LD CR2002                ; 常時ON
MPS
LD M64                   ; 運転準備
AND X125F                ; ALARM ID10
LDB B0663
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0103                ; 除材2ﾁｬｯｸ異常
ORL
AND L10                  ; 基板ASSY
ANL
OUT B0103                ; 除材2ﾁｬｯｸ異常
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0663
AND B0103                ; 除材2ﾁｬｯｸ異常
ANL
OUT B0663
LD M64                   ; 運転準備
AND= D119 K2             ; RCA10_Position No.
AND L22                  ; 除材2ﾁｬｯｸ ﾜｰｸ有
ANB X125B                ; INP ID10
AND L10                  ; 基板ASSY
TMR K840 K10             ; ﾁｬｯｸ異常検出時間
LD CR2002                ; 常時ON
MPS
LD T840                  ; ﾁｬｯｸ異常検出時間
LDB B0664
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0104                ; 除材2ﾜｰｸ行方不明
ORL
ANL
OUT B0104                ; 除材2ﾜｰｸ行方不明
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0664
AND B0104                ; 除材2ﾜｰｸ行方不明
ANL
OUT B0664
LD CR2002                ; 常時ON
MPS
LD CR2003                ; 常時OFF
LDB B0665
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0105                ; ﾕﾆｯﾄ8_異常6
ORL
ANL
OUT B0105                ; ﾕﾆｯﾄ8_異常6
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0665
AND B0105                ; ﾕﾆｯﾄ8_異常6
ANL
OUT B0665
LD M81                   ; 自動運転開始BZ
AND<> D94 E3424          ; Remove2   Jig ID  Screw Jig2 ID 
TMR K743 K10             ; ねじ締め治具2ID異常
LD CR2002                ; 常時ON
MPS
LD CR2003                ; 常時OFF
LDB B0666
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B0106                ; ねじ締め治具2ID異常
ORL
ANL
OUT B0106                ; ねじ締め治具2ID異常
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0666
AND B0106                ; ねじ締め治具2ID異常
ANL
OUT B0666
;異常ﾌﾞｻﾞｰまとめ
LD B0100                 ; ﾕﾆｯﾄ8_Jig番号異常
ANB B0660
LD B0101                 ; 除材2Y軸異常
ANB B0661
ORL
LD B0102                 ; 除材2Z軸異常
ANB B0662
ORL
LD B0103                 ; 除材2ﾁｬｯｸ異常
ANB B0663
ORL
LD B0104                 ; 除材2ﾜｰｸ行方不明
ANB B0664
ORL
LD B0105                 ; ﾕﾆｯﾄ8_異常6
ANB B0665
ORL
LD B0106                 ; ねじ締め治具2ID異常
ANB B0666
ORL
OUT M8909                ; ﾕﾆｯﾄ8異常BZ補助
END
ENDH
