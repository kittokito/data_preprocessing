DEVICE:53
;MODULE:UNIT3_Case2
;MODULE_TYPE:0
;
;UNIT3 Case-Transfer Y2
;
;動作FLG
LD X0B                   ; ﾗｲﾄｶｰﾃﾝ3 OUT1
AND X0C                  ; ﾗｲﾄｶｰﾃﾝ3 OUT2
OUT M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
LDB M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
OR M3850                 ; 取り出し作業確認
LD M3004                 ; ｴﾗｰ発生
OR M3005                 ; ｴﾗｰ中
OR M3006                 ; ｴﾗｰ解除確認
OR M3152                 ; ｴﾗｰ発生
OR M3153                 ; ｴﾗｰ中
OR M3154                 ; ｴﾗｰ解除確認
ANL
OUT M3850                ; 取り出し作業確認
LD CR2002                ; 常時ON
MPS
LD<= D3000 K12           ; UT3自動運転ｽﾃｯﾌﾟ
OR> D3000 K92            ; UT3自動運転ｽﾃｯﾌﾟ
ANL
DW K0 D3020              ; Y2ﾊﾞｯﾌｧ数
MPP
LD> D3000 K12            ; UT3自動運転ｽﾃｯﾌﾟ
AND<= D3000 K92          ; UT3自動運転ｽﾃｯﾌﾟ
ANL
DW K1 D3020              ; Y2ﾊﾞｯﾌｧ数
;■ロボット等機器入力受け
;ロボット、検査装置など状態、現在位置などをまとめる信号は一旦ここで受ける。
LDB R3108                ; Case搬送Y2投入領域
ORB X5684                ; 軸4 軸制御中
ANB M3802                ; 搬送Y2 移動中
ANB M3501                ; Y2原点復帰中
ANB M3503                ; Y2 P14移動中
INV
OR Y5642                 ; 軸4 減速停止
ANB M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
OUT Y5642                ; 軸4 減速停止
LDF Y5642                ; 軸4 減速停止
OR Y5645                 ; 軸4 位置決め運転再開
ANB X5684                ; 軸4 軸制御中
OUT Y5645                ; 軸4 位置決め運転再開
LD Y5642                 ; 軸4 減速停止
ANB M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
TMR K340 K30             ; SMA441一時停止超過
;<h1/>装置状態・動作条件
LD=.L D31470 E2500       ; 軸4 現在座標
OR=.L D31470 E2526       ; 軸4 現在座標
AND R3108                ; Case搬送Y2投入領域
ANB X5684                ; 軸4 軸制御中
OUT M3900                ; ﾕﾆｯﾄ3原点
LDB B060                 ; ﾕﾆｯﾄ3_JIG番号異常
ANB B061                 ; SMA441ｱﾗｰﾑ
ANB B062                 ; Y2塗布位置ｹｰｽ行方不明
ANB B063                 ; Y2嵌合位置ｹｰｽ行方不明
ANB B064                 ; Y2ねじ締め位置ｹｰｽ行方不明
ANB B065                 ; ﾕﾆｯﾄ3_異常6
INV
OUT M3901                ; ﾕﾆｯﾄ3全異常
LD M3900                 ; ﾕﾆｯﾄ3原点
ANB M3000                ; UT3ｽﾃｯﾌﾟ開始
AND X569D                ; 軸4 ｻｰﾎﾞﾚﾃﾞｨ
ANB X5680                ; 軸4 軸ｴﾗｰ中
ANB X5684                ; 軸4 軸制御中
OUT M3902                ; ﾕﾆｯﾄ3起動条件
LDB M64                  ; 運転準備
OR M65                   ; 即停止異常(緊急停止)
OR M3901                 ; ﾕﾆｯﾄ3全異常
OR T15                   ; 強制停止
OUT M3903                ; ﾕﾆｯﾄ3起動OFF
LD M98                   ; 原点復帰開始
ANB M3904                ; ﾕﾆｯﾄ3原点復帰中
OR M3904                 ; ﾕﾆｯﾄ3原点復帰中
ANB M3903                ; ﾕﾆｯﾄ3起動OFF
ANB M3579                ; UT3原点復帰完了確認
LDB M103                 ; 原点復帰OK
ORB L0                   ; 手動ﾓｰﾄﾞ
ANL
OUT M3904                ; ﾕﾆｯﾄ3原点復帰中
LD M83                   ; 各工程起動指令
LD M33                   ; 手動ﾓｰﾄﾞ
AND M34                  ; ﾒｲﾝ手動操作可能条件
AND CR2003               ; 常時OFF
ORL
AND M3902                ; ﾕﾆｯﾄ3起動条件
OR M3905                 ; ﾕﾆｯﾄ3起動中
ANB M3903                ; ﾕﾆｯﾄ3起動OFF
ANB M3399                ; UT3動作完了
OUT M3905                ; ﾕﾆｯﾄ3起動中
LD CR2003                ; 常時OFF
OUT M3908                ; ﾕﾆｯﾄ3警報補助
;Pack処理
LDB M3802                ; 搬送Y2 移動中
ANB M3501                ; Y2原点復帰中
ANB M3503                ; Y2 P14移動中
INV
OUT M3910                ; UNIT3 Pack
;□エラー発生　一時停止フラグ
LD CR2002                ; 常時ON
MPS
PMOV.D M3920 K0 D3100 K0 K20;Err360:ﾜｰｸ残  UT3ｴﾗｰ判別
MPP
AND<> D3100 K0           ; UT3ｴﾗｰ判別
OUT M3912                ; UNIT3 ｴﾗｰ
LDB M3901                ; ﾕﾆｯﾄ3全異常
ANB M160                 ; PAUSE
ANB M3908                ; ﾕﾆｯﾄ3警報補助
ANB M3912                ; UNIT3 ｴﾗｰ
LDB M32                  ; 自動ﾓｰﾄﾞ
ANB M33                  ; 手動ﾓｰﾄﾞ
LD M32                   ; 自動ﾓｰﾄﾞ
AND M3905                ; ﾕﾆｯﾄ3起動中
ORL
LD M33                   ; 手動ﾓｰﾄﾞ
AND M3904                ; ﾕﾆｯﾄ3原点復帰中
ORL
ANL
OUT M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
;RB interlock
LD R3010                 ; 塗布Z　   搬送Y干渉外高さ
OR R3001                 ; 塗布X　   Case2干渉外
OR M4915                 ; 塗布動作中
LD R3308                 ; 嵌合Z     上空位置
OR R3302                 ; 嵌合X     Case2干渉外
OR R3111                 ; Case搬送Y2嵌合領域
ANL
LD R3708                 ; 除材2Z    上空位置
OR R3700                 ; 除材2Y    取出干渉外
ANL
AND X569D                ; 軸4 ｻｰﾎﾞﾚﾃﾞｨ
ANB X5680                ; 軸4 軸ｴﾗｰ中
ANB X5684                ; 軸4 軸制御中
ANB M3800                ; 搬送Y2 移動完了
ANB M3804                ; 搬送Y2 原点復帰完了
OUT M3960                ; Case搬送Y2動作可能
LDF M3905                ; ﾕﾆｯﾄ3起動中
ZRES M3800 M3805         ; 搬送Y2 移動完了  搬送Y2 原点復帰異常
;<h1/>■自動回路 
;
;運転開始・ステッパ初期化・補助接点へ展開
LD CR2002                ; 常時ON
ZRES M3000 M3499         ; UT3ｽﾃｯﾌﾟ開始
LDB M3905                ; ﾕﾆｯﾄ3起動中
MOV K0 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
LD M3905                 ; ﾕﾆｯﾄ3起動中
MOV D3000 Z1             ; UT3自動運転ｽﾃｯﾌﾟ
OUT M3000:Z1             ; UT3ｽﾃｯﾌﾟ開始
;自動運転ステップ開始
;投入位置移動
;Move to Work set point
LD M3000                 ; UT3ｽﾃｯﾌﾟ開始
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
AND M3960                ; Case搬送Y2動作可能
MPS
AND L0                   ; 手動ﾓｰﾄﾞ
DW K398 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
MRD
@FMOV K0 D920 K8         ; BCR3読み取りﾃﾞｰﾀ
MPP
LDB L0                   ; 手動ﾓｰﾄﾞ
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
ANL
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3001                 ; Y2_P14 move
MPS
DW K14 D3050             ; 搬送Y2   移動No.
CON
OUT @M0                  ; Case搬送Y2移動
MPP
AND M3800                ; 搬送Y2 移動完了
RES M3800                ; 搬送Y2 移動完了
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
;運転開始時JIG番号ﾁｪｯｸ
;Jig No. check when AUTO start.
LD M3002                 ; Jig番号確認
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
MPS
AND= D92 E3422           ; Case2 Jig ID  Case2 ID
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND<> D92 E3422          ; Case2 Jig ID  Case2 ID
OUT M3963                ; Jig No.異常
;運転開始時ﾜｰｸ残ﾁｪｯｸ
;Remain work check when AUTO start.
LD M3003                 ; 運転開始時ﾜｰｸﾁｪｯｸ
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
TMR K310 K5              ; ﾜｰｸ残検出ｳｪｲﾄ
CON
MPS
AND T310                 ; ﾜｰｸ残検出ｳｪｲﾄ
MPS
LDB T1500                ; 投入3_ﾜｰｸ有無
AND T1501                ; 投入3_ﾜｰｸ浮き1
AND T1502                ; 投入3_ﾜｰｸ浮き2
ANL
DW K15 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
LD T1500                 ; 投入3_ﾜｰｸ有無
ORB T1501                ; 投入3_ﾜｰｸ浮き1
ORB T1502                ; 投入3_ﾜｰｸ浮き2
ANL
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MPP
LDB T310                 ; ﾜｰｸ残検出ｳｪｲﾄ
AND M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
ANL
DW K300 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
;Err360:Work remain  (when START)
LD M3004                 ; ｴﾗｰ発生
ANB M71                  ; Error
DW K360 D148             ; 警報No.
CON
SET M3920                ; Err360:ﾜｰｸ残
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3005                 ; ｴﾗｰ中
AND M71                  ; Error
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3006                 ; ｴﾗｰ解除確認
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
MPS
ANB M3850                ; 取り出し作業確認
DW K2 D3000              ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND M3850                ; 取り出し作業確認
DW K15 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
;投入位置移動
;Move to Work set point
LD M3010                 ; 投入位置移動
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
AND M3960                ; Case搬送Y2動作可能
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
MPS
AND=.L D31470 E2526      ; 軸4 現在座標
DW K12 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND<>.L D31470 E2526     ; 軸4 現在座標
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3011                 ; Y2_P14 move
MPS
DW K14 D3050             ; 搬送Y2   移動No.
CON
OUT @M1                  ; Case搬送Y2移動
MPP
AND M3800                ; 搬送Y2 移動完了
RES M3800                ; 搬送Y2 移動完了
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
;日常点検時Case除材確認
;Case remove check when Daily check
LD M3012                 ; 日常点検Case check
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
MPS
ANB M39                  ; 日常点検ﾓｰﾄﾞ
DW K15 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND M39                  ; 日常点検ﾓｰﾄﾞ
MPS
AND M3851                ; 日常点検治具取り外し確認
DW K15 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
TMR K316 K100            ; 日常点検治具取外し催促
;投入完了待ち
;waiting for Work set up end
LD M3015                 ; Case投入依頼
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
MPS
LD T1500                 ; 投入3_ﾜｰｸ有無
ANB M39                  ; 日常点検ﾓｰﾄﾞ
LD B2055                 ; DC_Y2 select
AND B2056                ; Daily check start
ORL
ANL
MPS
LD T1501                 ; 投入3_ﾜｰｸ浮き1
AND T1502                ; 投入3_ﾜｰｸ浮き2
ANL
MPS
ANB M39                  ; 日常点検ﾓｰﾄﾞ
DW K20 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND M39                  ; 日常点検ﾓｰﾄﾞ
DW K400 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
MPP
TMR K311 K10             ; ﾜｰｸ浮き検出ｳｪｲﾄ
CON
AND T311                 ; ﾜｰｸ浮き検出ｳｪｲﾄ
LDB T1501                ; 投入3_ﾜｰｸ浮き1
ORB T1502                ; 投入3_ﾜｰｸ浮き2
ANL
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MPP
LDB T1500                ; 投入3_ﾜｰｸ有無
ANB B2056                ; Daily check start
AND M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
ANL
MPS
ANB M39                  ; 日常点検ﾓｰﾄﾞ
DW K300 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND M39                  ; 日常点検ﾓｰﾄﾞ
DW K310 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
;Err361:Work floated
LD M3016                 ; ｴﾗｰ発生
ANB M71                  ; Error
DW K361 D148             ; 警報No.
CON
SET M3921                ; Err361:ﾜｰｸ浮き
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3017                 ; ｴﾗｰ中
AND M71                  ; Error
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3018                 ; ｴﾗｰ解除確認
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
DW K15 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
;投入後JIG番号ﾁｪｯｸ
;Jig No. check when Case in.
LD M3020                 ; Jig番号確認
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
MPS
AND= D92 E3422           ; Case2 Jig ID  Case2 ID
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND<> D92 E3422          ; Case2 Jig ID  Case2 ID
OUT M3964                ; 投入後　  Jig No.異常
;ｺｰﾄﾞ読み取り位置移動
;Move to code-reader point
LD M3021                 ; ｺｰﾄﾞ読み取り位置移動
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
ANPB M3021               ; ｺｰﾄﾞ読み取り位置移動
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
AND M3960                ; Case搬送Y2動作可能
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3022                 ; Y2_P15 move
MPS
DW K15 D3050             ; 搬送Y2   移動No.
CON
OUT @M2                  ; Case搬送Y2移動
MPP
AND M3800                ; 搬送Y2 移動完了
RES M3800                ; 搬送Y2 移動完了
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
;基板ｺｰﾄﾞ読み取り
;Code read
LD M3023                 ; 基板ｺｰﾄﾞ読み取り
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
MPS
AND M10023               ; BCR1     読取り完了
DW K30 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MRD
AND M10033               ; BCR1     読取りｴﾗｰ
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MPP
OUT M3980                ; BCR3　　　読み取り
;Err363:Code read error
LD M3024                 ; ｴﾗｰ発生
ANB M71                  ; Error
DW K363 D148             ; 警報No.
CON
SET M3923                ; Err363:ｺｰﾄﾞ読み取りｴﾗｰ
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3025                 ; ｴﾗｰ中
AND M71                  ; Error
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3026                 ; ｴﾗｰ解除確認
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3027                 ; Caseﾁｪｯｸ
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
MPS
AND T1500                ; 投入3_ﾜｰｸ有無
DW K22 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
ANB T1500                ; 投入3_ﾜｰｸ有無
DW K10 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
;ﾃﾞｰﾀ照合
;Data check
LD M3030                 ; ﾃﾞｰﾀ照合
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
DW K50 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
;Err364:Code verification error
LD M3031                 ; ｴﾗｰ発生
ANB M71                  ; Error
DW K364 D148             ; 警報No.
CON
SET M3924                ; Err364:ｺｰﾄﾞ照合異常
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3032                 ; ｴﾗｰ中
AND M71                  ; Error
RES B1013                ; remove
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3033                 ; ｴﾗｰ解除確認
ANB M71                  ; Error
MPS
ANB B1013                ; remove
DW K30 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND B1013                ; remove
RES B1013                ; remove
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3034                 ; Removeﾌﾗｸﾞ解除
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
DW K10 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
;▼↓↓↓　Daily check mode　↓↓↓▼
;Err327:Daily check Jig set up demand
LD M3400                 ; DC_Jig装着依頼
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
DW K404 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
;治具を在荷ｾﾝｻで確認
;Jig set up check
LD M3404                 ; 在荷確認
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
MPS
AND T1500                ; 投入3_ﾜｰｸ有無
MPS
LD T1501                 ; 投入3_ﾜｰｸ浮き1
AND T1502                ; 投入3_ﾜｰｸ浮き2
ANL
DW K50 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
LDB T1501                ; 投入3_ﾜｰｸ浮き1
ORB T1502                ; 投入3_ﾜｰｸ浮き2
ANL
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MPP
ANB T1500                ; 投入3_ﾜｰｸ有無
DW K400 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
;Err321:Work floated
LD M3405                 ; ｴﾗｰ発生
ANB M71                  ; Error
DW K361 D148             ; 警報No.
CON
SET M3921                ; Err361:ﾜｰｸ浮き
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3406                 ; ｴﾗｰ中
AND M71                  ; Error
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3407                 ; ｴﾗｰ解除確認
ANB M71                  ; Error
DW K404 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
;▲↑↑↑　Daily check mode　↑↑↑▲
;塗布開始点移動　　　　　　　　　　　　　　　　　　＜開始点はARC無し・吐出無し・補完無しでお願いします＞
;Move to bonding start point
LD M3050                 ; 塗布開始点移動
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
AND M3960                ; Case搬送Y2動作可能
MPS
ANB M39                  ; 日常点検ﾓｰﾄﾞ
DW K81 D3050             ; 搬送Y2   移動No.
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND M39                  ; 日常点検ﾓｰﾄﾞ
DW K121 D3050            ; 搬送Y2   移動No.
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3051                 ; Y2_P81 move
MPS
OUT @M3                  ; Case搬送Y2移動
MPP
AND M3800                ; 搬送Y2 移動完了
MPS
LD T1408                 ; 投入2_受渡位置
OR M22                   ; ﾜｰｸ在荷無視
OR M39                   ; 日常点検ﾓｰﾄﾞ
ANL
RES M3800                ; 搬送Y2 移動完了
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MPP
LD T1408                 ; 投入2_受渡位置
AND M22                  ; ﾜｰｸ在荷無視
ANB M39                  ; 日常点検ﾓｰﾄﾞ
ANL
TMR K320 K30             ; No Case check wait
CON
AND T320                 ; No Case check wait
OUT M3917                ; 塗布位置Case不明
;接着剤塗布要求
;Bonding demand to bonding head
LD M3052                 ; 接着剤塗布要求
MPS
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
MPS
AND M4986                ; Y2へ塗布完了
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND M4987                ; Y2へ塗布異常
DW K55 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
OUT M3981                ; Y2 塗布要求
;塗布軸とハンドシェイク
;Handshake with Dispence axis
LD M3053                 ; 正常完了確認
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
ANB M4986                ; Y2へ塗布完了
DW K70 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
LD M3055                 ; 異常完了確認
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
ANB M4987                ; Y2へ塗布異常
DW K150 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
;塗布形状測定位置へ移動
;Move to form measurement point
LD M3070                 ; 形状測定位置へ移動
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
AND M3960                ; Case搬送Y2動作可能
MPS
ANB M39                  ; 日常点検ﾓｰﾄﾞ
DW K34 D3050             ; 搬送Y2   移動No.
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND M39                  ; 日常点検ﾓｰﾄﾞ
DW K59 D3050             ; 搬送Y2   移動No.
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3071                 ; Y2_P34 move
MPS
OUT @M4                  ; Case搬送Y2移動
MPP
AND M3800                ; 搬送Y2 移動完了
RES M3800                ; 搬送Y2 移動完了
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
;塗布形状測定要求
;Form measurement demand
LD M3072                 ; 形状測定要求
MPS
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
MPS
AND M5980                ; Y2形状測定完了
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND M5981                ; Y2形状測定異常
DW K74 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
OUT M3982                ; Y2形状測定要求
LD M3073                 ; 正常完了確認
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
ANB M5980                ; Y2形状測定完了
MPS
ANB M39                  ; 日常点検ﾓｰﾄﾞ
DW K90 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND M39                  ; 日常点検ﾓｰﾄﾞ
DW K420 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
;異常は排出
;Eject of NG work
LD M3074                 ; 異常完了確認
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
DW K150 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
;嵌合位置へ移動
;Move to Cover set point
LD M3090                 ; 嵌合位置へ移動
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
AND M3960                ; Case搬送Y2動作可能
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3091                 ; Y2_P35 move
MPS
DW K35 D3050             ; 搬送Y2   移動No.
CON
OUT @M5                  ; Case搬送Y2移動
MPP
AND M3800                ; 搬送Y2 移動完了
MPS
LD T1509                 ; 投入3_嵌合位置Case有
OR M22                   ; ﾜｰｸ在荷無視
ANL
RES M3800                ; 搬送Y2 移動完了
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MPP
LDB T1509                ; 投入3_嵌合位置Case有
ANB M22                  ; ﾜｰｸ在荷無視
ANL
TMR K321 K30             ; ｴﾗｰﾃﾞｨﾚｲ
CON
AND T321                 ; ｴﾗｰﾃﾞｨﾚｲ
OUT M3918                ; 嵌合位置ﾜｰｸ不明
;ｶﾊﾞｰ嵌合要求
;Cover set demand to Cover-Tranfer
LD M3092                 ; 嵌合要求
MPS
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
MPS
AND M5983                ; Y2へ嵌合完了
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND M5984                ; Y2へ嵌合異常
DW K94 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
OUT M3983                ; Y2　嵌合要求
LD M3093                 ; 正常完了確認
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
ANB M5983                ; Y2へ嵌合完了
DW K100 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
LD M3094                 ; 異常完了確認
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
ANB M5984                ; Y2へ嵌合異常
DW K150 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
;ねじ締め位置へ移動
;Move to screw point
LD M3100                 ; ねじ締め位置移動
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
AND M3960                ; Case搬送Y2動作可能
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3101                 ; Y2_P46 move
MPS
DW K46 D3050             ; 搬送Y2   移動No.
CON
OUT @M6                  ; Case搬送Y2移動
MPP
AND M3800                ; 搬送Y2 移動完了
MPS
LD T1510                 ; 投入3_ﾈｼﾞ締め位置
OR M22                   ; ﾜｰｸ在荷無視
ANL
RES M3800                ; 搬送Y2 移動完了
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MPP
LDB T1510                ; 投入3_ﾈｼﾞ締め位置
ANB M22                  ; ﾜｰｸ在荷無視
ANL
TMR K322 K30             ; ｴﾗｰﾃﾞｨﾚｲ
CON
AND T322                 ; ｴﾗｰﾃﾞｨﾚｲ
OUT M3919                ; ねじ締め位置ﾜｰｸ不明
;ねじ締め要求
;Screw demand
LD M3102                 ; ねじ締め要求
MPS
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
MPS
AND M6981                ; Y1ねじ締め完了
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND M6982                ; Y1ねじ締め異常
DW K104 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
MPP
OUT M3984                ; Y2ねじ締め要求
LD M3103                 ; 正常完了確認
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
ANB M6981                ; Y1ねじ締め完了
DW K110 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
LD M3104                 ; 異常完了確認
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
ANB M6982                ; Y1ねじ締め異常
DW K150 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
;排出位置へ移動
;Move to pass position
LD M3110                 ; 排出位置移動
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
AND M3960                ; Case搬送Y2動作可能
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3111                 ; Y2_P47 move
MPS
DW K47 D3050             ; 搬送Y2   移動No.
CON
OUT @M7                  ; Case搬送Y2移動
MPP
AND M3800                ; 搬送Y2 移動完了
RES M3800                ; 搬送Y2 移動完了
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
;排出要求
;Pass demand to Remove-Tranfer
LD M3112                 ; 排出要求
MPS
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
MPS
AND M8981                ; Y2排出完了
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND M8982                ; Y2排出異常
DW K114 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
MPP
OUT M3985                ; Y2排出要求
LD M3113                 ; 正常完了確認
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
ANB M8981                ; Y2排出完了
DW K120 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
FMOV K0 D950 K8          ; C2嵌合ﾜｰｸｺｰﾄﾞ
LD M3114                 ; 異常完了確認
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
ANB M8982                ; Y2排出異常
DW K150 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
;念のため、ﾜｰｸ残確認
;Check for Work remain
LD M3120                 ; ﾜｰｸ残ﾁｪｯｸ
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
MPS
ANB T1510                ; 投入3_ﾈｼﾞ締め位置
DW K124 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
MPP
TMR K312 K10             ; ﾜｰｸ浮き検出ｳｪｲﾄ
CON
AND T312                 ; ﾜｰｸ浮き検出ｳｪｲﾄ
AND T1510                ; 投入3_ﾈｼﾞ締め位置
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
;Err366:NG work remain on pass position 
LD M3121                 ; ｴﾗｰ発生
ANB M71                  ; Error
DW K366 D148             ; 警報No.
CON
SET M3926                ; Err366:排出位置ﾜｰｸ残
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3122                 ; ｴﾗｰ中
AND M71                  ; Error
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3123                 ; ｴﾗｰ解除確認
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
DW K120 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
;投入位置移動
;Move to Work set point
LD M3124                 ; 投入位置へ戻り
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
AND M3960                ; Case搬送Y2動作可能
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3125                 ; Y2_P14 move
MPS
DW K14 D3050             ; 搬送Y2   移動No.
CON
OUT @M8                  ; Case搬送Y2移動
MPP
AND M3800                ; 搬送Y2 移動完了
RES M3800                ; 搬送Y2 移動完了
CON
DW K300 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
;★★★　異常有ﾜｰｸ排出動作　★★★
;Eject of NG work　
LD M3150                 ; 投入位置へ戻り
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
AND M3960                ; Case搬送Y2動作可能
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3151                 ; Y2_P14 move
MPS
DW K14 D3050             ; 搬送Y2   移動No.
CON
OUT @M9                  ; Case搬送Y2移動
MPP
AND M3800                ; 搬送Y2 移動完了
RES M3800                ; 搬送Y2 移動完了
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
;Err365:NG work remove demand 
LD M3152                 ; ｴﾗｰ発生
ANB M71                  ; Error
DW K365 D148             ; 警報No.
CON
SET M3925                ; Err365:NGﾜｰｸ除材要求
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3153                 ; ｴﾗｰ中
AND M71                  ; Error
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3154                 ; ｴﾗｰ解除確認
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
MPS
AND M3850                ; 取り出し作業確認
DW K300 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
FMOV K0 D920 K8          ; BCR3読み取りﾃﾞｰﾀ
FMOV K0 D950 K8          ; C2嵌合ﾜｰｸｺｰﾄﾞ
MPP
ANB M3850                ; 取り出し作業確認
DW K152 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
;★★★
;▼↓↓↓　Daily check mode　↓↓↓▼
;投入位置移動
;Move to Work set point
LD M3420                 ; Case2搬送投入位置戻り
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
AND M3960                ; Case搬送Y2動作可能
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3421                 ; Y2_P14
MPS
DW K14 D3050             ; 搬送Y2   移動No.
CON
OUT @M21                 ; Case搬送Y2移動
MPP
AND M3800                ; 搬送Y2 移動完了
RES M3800                ; 搬送Y2 移動完了
CON
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3422                 ; 結果判定依頼
MPS
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
MPS
AND B1514                ; DC_OK sw
SET M41                  ; Y2 Daily check OK
CON
DW K10 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MRD
AND B1516                ; DC_NG sw
RES M41                  ; Y2 Daily check OK
CON
DW K10 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND B1515                ; DC_Retry sw
DW K400 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
MPP
OUT M3990                ; DC_作業者OK確認依頼画面表示
LD M3423                 ; 日常点検治具Check
MPS
LD M3913                 ; UNIT3     ｴﾗｰ・PAUSE無し
AND M3851                ; 日常点検治具取り外し確認
ANL
DW K400 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
MPP
TMR K315 K100            ; 日常点検治具取外し催促
;▲↑↑↑　Daily check mode　↑↑↑▲
;サイクル停止条件
;Cycle end check
LD M3300                 ; 1ｻｲｸﾙ終了
MPS
ANB M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
DW K10 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
MPP
AND M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3301                 ; 投入位置戻り
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
AND M3960                ; Case搬送Y2動作可能
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
@INC D3000               ; UT3自動運転ｽﾃｯﾌﾟ
LD M3302                 ; Y2_P14 move
MPS
DW K14 D3050             ; 搬送Y2   移動No.
CON
OUT @M19                 ; Case搬送Y2移動
MPP
AND M3800                ; 搬送Y2 移動完了
RES M3800                ; 搬送Y2 移動完了
CON
DW K397 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
;▼↓↓↓　Daily check mode　↓↓↓▼
LD M3310                 ; 治具取り外し待ち
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
MPS
LDB T1500                ; 投入3_ﾜｰｸ有無
AND T1501                ; 投入3_ﾜｰｸ浮き1
AND T1502                ; 投入3_ﾜｰｸ浮き2
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
ANL
DW K397 D3000            ; UT3自動運転ｽﾃｯﾌﾟ
MPP
LD T1500                 ; 投入3_ﾜｰｸ有無
ORB T1501                ; 投入3_ﾜｰｸ浮き1
ORB T1502                ; 投入3_ﾜｰｸ浮き2
ANL
TMR K314 K100            ; 日常点検治具取外し催促
;▲↑↑↑　Daily check mode　↑↑↑▲
LD M3397                 ; ｻｲｸﾙ終了
@MOV K398 D3000          ; UT3自動運転ｽﾃｯﾌﾟ
;終了
;Unit AUTO cycle end
LD M3398                 ; UT3ｻｲｸﾙ停止
MPS
LD M70                   ; 自動起動停止指令(ｻｲｸﾙ停止)
OR L0                    ; 手動ﾓｰﾄﾞ
AND M72                  ; 全ﾕﾆｯﾄ停止確認
ANL
@MOV K399 D3000          ; UT3自動運転ｽﾃｯﾌﾟ
FMOV K0 D920 K8          ; BCR3読み取りﾃﾞｰﾀ
MPP
LDB M70                  ; 自動起動停止指令(ｻｲｸﾙ停止)
ANB L0                   ; 手動ﾓｰﾄﾞ
ANL
DW K10 D3000             ; UT3自動運転ｽﾃｯﾌﾟ
;<h1/>■原点復帰回路
;
;運転開始・ステッパ初期化・補助接点へ展開
LD CR2002                ; 常時ON
ZRES M3500 M3599         ; ﾕﾆｯﾄ3原点復帰開始
LDB M3904                ; ﾕﾆｯﾄ3原点復帰中
MOV K0 D3010             ; UT3原点復帰ｽﾃｯﾌﾟ
LD M3904                 ; ﾕﾆｯﾄ3原点復帰中
MOV D3010 Z1             ; UT3原点復帰ｽﾃｯﾌﾟ
OUT M3500:Z1             ; ﾕﾆｯﾄ3原点復帰開始
;原点復帰ステップ開始
;Origin start
LD M3500                 ; ﾕﾆｯﾄ3原点復帰開始
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
AND M4990                ; 塗布Z軸　原点復帰完了
AND M5990                ; 嵌合Z軸　原点復帰完了
LD M8990                 ; 除材2Z軸　原点復帰完了
OR L0                    ; 手動ﾓｰﾄﾞ
ANL
LD M6900                 ; ネジ締めRB原点
OR L1                    ; ﾈｼﾞ締めRB無し
ANL
AND M3960                ; Case搬送Y2動作可能
ANB X5684                ; 軸4 軸制御中
@INC D3010               ; UT3原点復帰ｽﾃｯﾌﾟ
;搬送Y　原点復帰
;Transport-Y1 HOME start
LD M3501                 ; Y2原点復帰中
MPS
MCALL ORIGIN_K K5 K4 M3805 M3804;搬送Y2 原点復帰異常  搬送Y2 原点復帰完了
MPP
AND M3804                ; 搬送Y2 原点復帰完了
RES M3804                ; 搬送Y2 原点復帰完了
CON
@INC D3010               ; UT3原点復帰ｽﾃｯﾌﾟ
;搬送Y　投入位置移動
;Y1 Point4 move
LD M3502
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
AND M3960                ; Case搬送Y2動作可能
@INC D3010               ; UT3原点復帰ｽﾃｯﾌﾟ
LD M3503                 ; Y2 P14移動中
MPS
DW K14 D3050             ; 搬送Y2   移動No.
CON
OUT @M10                 ; Case搬送Y2移動
MPP
AND M3800                ; 搬送Y2 移動完了
RES M3800                ; 搬送Y2 移動完了
CON
@INC D3010               ; UT3原点復帰ｽﾃｯﾌﾟ
;ﾜｰｸ有無Check
;Work check
LD M3504                 ; ﾜｰｸﾁｪｯｸ
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
TMR K301 K5              ; ﾜｰｸ無し確認ﾃﾞｨﾚｲ
CON
AND T301                 ; ﾜｰｸ無し確認ﾃﾞｨﾚｲ
MPS
LDB T1500                ; 投入3_ﾜｰｸ有無
AND T1501                ; 投入3_ﾜｰｸ浮き1
AND T1502                ; 投入3_ﾜｰｸ浮き2
ANL
DW K10 D3010             ; UT3原点復帰ｽﾃｯﾌﾟ
MPP
LD T1500                 ; 投入3_ﾜｰｸ有無
ORB T1501                ; 投入3_ﾜｰｸ浮き1
ORB T1502                ; 投入3_ﾜｰｸ浮き2
ANL
@INC D3010               ; UT3原点復帰ｽﾃｯﾌﾟ
;***　ﾜｰｸ有り時処理
;Work remain
LD M3505                 ; ｴﾗｰ発生
ANB M71                  ; Error
DW K360 D148             ; 警報No.
CON
SET M3920                ; Err360:ﾜｰｸ残
CON
@INC D3010               ; UT3原点復帰ｽﾃｯﾌﾟ
LD M3506                 ; ｴﾗｰ中
AND M71                  ; Error
@INC D3010               ; UT3原点復帰ｽﾃｯﾌﾟ
LD M3507                 ; ｴﾗｰ解除確認
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
DW K4 D3010              ; UT3原点復帰ｽﾃｯﾌﾟ
;***
;BCR check
LD M3510                 ; BCR3 CHECK
MPS
AND M3913                ; UNIT3     ｴﾗｰ・PAUSE無し
MPS
AND M10605               ; ｺｰﾄﾞﾘｰﾀﾞﾄﾘｶﾞ有効ON
DW K70 D3010             ; UT3原点復帰ｽﾃｯﾌﾟ
MPP
AND M10604               ; ｺｰﾄﾞﾘｰﾀﾞ通信NG PLS
@INC D3010               ; UT3原点復帰ｽﾃｯﾌﾟ
MPP
OUT M10607               ; ｺｰﾄﾞﾘｰﾀﾞ通信確認入力
;Err362:BCR3 communication error
LD M3511                 ; ｴﾗｰ発生
ANB M71                  ; Error
DW K362 D148             ; 警報No.
CON
SET M3922                ; Err362:BCR3通信異常
CON
@INC D3010               ; UT3原点復帰ｽﾃｯﾌﾟ
LD M3512                 ; ｴﾗｰ中
AND M71                  ; Error
@INC D3010               ; UT3原点復帰ｽﾃｯﾌﾟ
LD M3513                 ; ｴﾗｰ解除確認
AND T130                 ; ｴﾗｰﾘﾄﾗｲｳｪｲﾄ
DW K10 D3010             ; UT3原点復帰ｽﾃｯﾌﾟ
;原点復帰終了
LD M3570                 ; 原点復帰動作完了
AND M3900                ; ﾕﾆｯﾄ3原点
OUT M3578                ; UT3原点復帰完了
LD M3578                 ; UT3原点復帰完了
ANB M98                  ; 原点復帰開始
@MOV K79 D3010           ; UT3原点復帰ｽﾃｯﾌﾟ
;<h1/>■手動回路 
;
LD M33                   ; 手動ﾓｰﾄﾞ
AND M34                  ; ﾒｲﾝ手動操作可能条件
ANB M3905                ; ﾕﾆｯﾄ3起動中
ANB M97                  ; 原点復帰動作中
MC
;Case-Transfer Y2
LD M3960                 ; Case搬送Y2動作可能
AND M3950                ; ﾗｲﾄｶｰﾃﾝ  遮光無し
ANB M3800                ; 搬送Y2 移動完了
ANB M3801                ; 搬送Y2 移動異常
ANB M3802                ; 搬送Y2 移動中
OUT M3610                ; Case搬送Y2動作可
LD CR2002                ; 常時ON
MPS
LD B10C0                 ; 搬送Y2_投入位置移動PB
AND M3610                ; Case搬送Y2動作可
OR M3611                 ; Y2_P14移動
ANB M3800                ; 搬送Y2 移動完了
ANL
OUT M3611                ; Y2_P14移動
DW K14 D3050             ; 搬送Y2   移動No.
CON
OUT @M11                 ; Case搬送Y2移動
MPP
ANF M3611                ; Y2_P14移動
RES M3800                ; 搬送Y2 移動完了
LD CR2002                ; 常時ON
MPS
LD B10C1                 ; 搬送Y2_塗布位置移動PB
AND M3610                ; Case搬送Y2動作可
OR M3612                 ; Y2_P81移動
ANB M3800                ; 搬送Y2 移動完了
ANL
OUT M3612                ; Y2_P81移動
DW K81 D3050             ; 搬送Y2   移動No.
CON
OUT @M12                 ; Case搬送Y2移動
MPP
ANF M3612                ; Y2_P81移動
RES M3800                ; 搬送Y2 移動完了
LD CR2002                ; 常時ON
MPS
LD B10C2                 ; 搬送Y2_測定位置移動PB
AND M3610                ; Case搬送Y2動作可
OR M3613                 ; Y2_P34移動
ANB M3800                ; 搬送Y2 移動完了
ANL
OUT M3613                ; Y2_P34移動
DW K34 D3050             ; 搬送Y2   移動No.
CON
OUT @M13                 ; Case搬送Y2移動
MPP
ANF M3613                ; Y2_P34移動
RES M3800                ; 搬送Y2 移動完了
LD CR2002                ; 常時ON
MPS
LD B10C3                 ; 搬送Y2_嵌合位置移動PB
AND M3610                ; Case搬送Y2動作可
OR M3614                 ; Y2_P35移動
ANB M3800                ; 搬送Y2 移動完了
ANL
OUT M3614                ; Y2_P35移動
DW K35 D3050             ; 搬送Y2   移動No.
CON
OUT @M14                 ; Case搬送Y2移動
MPP
ANF M3614                ; Y2_P35移動
RES M3800                ; 搬送Y2 移動完了
LD CR2002                ; 常時ON
MPS
LD B10C4                 ; 搬送Y2_ﾈｼﾞ締め位置移動PB
AND M3610                ; Case搬送Y2動作可
OR M3615                 ; Y2_P46移動
ANB M3800                ; 搬送Y2 移動完了
ANL
OUT M3615                ; Y2_P46移動
DW K46 D3050             ; 搬送Y2   移動No.
CON
OUT @M15                 ; Case搬送Y2移動
MPP
ANF M3615                ; Y2_P46移動
RES M3800                ; 搬送Y2 移動完了
LD CR2002                ; 常時ON
MPS
LD B10C5                 ; 搬送Y2_排出位置移動PB
AND M3610                ; Case搬送Y2動作可
OR M3617                 ; Y2_P47移動
ANB M3800                ; 搬送Y2 移動完了
ANL
OUT M3617                ; Y2_P47移動
DW K47 D3050             ; 搬送Y2   移動No.
CON
OUT @M16                 ; Case搬送Y2移動
MPP
ANF M3617                ; Y2_P47移動
RES M3800                ; 搬送Y2 移動完了
LD CR2002                ; 常時ON
MPS
LD B10C6                 ; 搬送Y2_BCR位置移動PB
AND M3610                ; Case搬送Y2動作可
OR M3618                 ; Y2_P15移動
ANB M3800                ; 搬送Y2 移動完了
ANL
OUT M3618                ; Y2_P15移動
DW K15 D3050             ; 搬送Y2   移動No.
CON
OUT @M17                 ; Case搬送Y2移動
MPP
ANF M3618                ; Y2_P15移動
RES M3801                ; 搬送Y2 移動異常
LD CR2002                ; 常時ON
MPS
LD B10C7                 ; 搬送Y2DC測定位置
AND M3610                ; Case搬送Y2動作可
OR M3619                 ; Y2_P59
ANB M3800                ; 搬送Y2 移動完了
ANL
OUT M3619                ; Y2_P59
DW K59 D3050             ; 搬送Y2   移動No.
CON
OUT @M18                 ; Case搬送Y2移動
MPP
ANF M3619                ; Y2_P59
RES M3801                ; 搬送Y2 移動異常
LD CR2002                ; 常時ON
MPS
LD B10C9                 ; 搬送Y2_日常点検位置移動PB
AND M3610                ; Case搬送Y2動作可
OR M3620                 ; Y2_P121
ANB M3800                ; 搬送Y2 移動完了
ANL
OUT M3620                ; Y2_P121
DW K121 D3050            ; 搬送Y2   移動No.
CON
OUT @M20                 ; Case搬送Y2移動
MPP
ANF M3620                ; Y2_P121
RES M3801                ; 搬送Y2 移動異常
;Jog
LD X569D                 ; 軸4 ｻｰﾎﾞﾚﾃﾞｨ
ANB X5680                ; 軸4 軸ｴﾗｰ中
MPS
AND B2106                ; CaseY2軸+JOG PB
OUT Y5650                ; 軸4 JOG正方向
MPP
AND B2107                ; CaseY2軸-JOG PB
OUT Y5651                ; 軸4 JOG負方向
;code-reader 3
LDP B10C8                ; BCR3 read PB
OR M3616                 ; BCR3 read
ANB M10623               ; BCR3     読取り完了
ANB M10633               ; BCR3     読取りｴﾗｰ
ANB T592                 ; 手動ﾓｰﾄﾞ時ﾄﾘｶﾞ自動OFF時間
MPS
OUT M3616                ; BCR3 read
MPP
AND M33                  ; 手動ﾓｰﾄﾞ
TMR K592 K50             ; 手動ﾓｰﾄﾞ時ﾄﾘｶﾞ自動OFF時間
MCR
;<h1/>出力回路
;
LDB @M0                  ; Case搬送Y2移動
ANB @M1                  ; Case搬送Y2移動
ANB @M2                  ; Case搬送Y2移動
ANB @M3                  ; Case搬送Y2移動
ANB @M4                  ; Case搬送Y2移動
ANB @M5                  ; Case搬送Y2移動
ANB @M6                  ; Case搬送Y2移動
ANB @M7                  ; Case搬送Y2移動
ANB @M8                  ; Case搬送Y2移動
ANB @M9                  ; Case搬送Y2移動
ANB @M10                 ; Case搬送Y2移動
ANB @M11                 ; Case搬送Y2移動
ANB @M12                 ; Case搬送Y2移動
ANB @M13                 ; Case搬送Y2移動
ANB @M14                 ; Case搬送Y2移動
ANB @M15                 ; Case搬送Y2移動
ANB @M16                 ; Case搬送Y2移動
ANB @M17                 ; Case搬送Y2移動
ANB @M18                 ; Case搬送Y2移動
ANB @M19                 ; Case搬送Y2移動
ANB @M20                 ; Case搬送Y2移動
ANB @M21                 ; Case搬送Y2移動
ANB R31708               ; Case搬送Y2起動
ANB R31709               ; Case搬送Y2起動
ANB R32001               ; Case搬送Y2移動
INV
MCALL P_MOVE_K K5 K4 D3050 M3801 M3800 M3802;搬送Y2   移動No.  搬送Y2 移動異常  搬送Y2 移動完了  搬送Y2 移動中
;<h1/>異常検出
;
LD CR2002                ; 常時ON
MPS
LD M3963                 ; Jig No.異常
OR M3964                 ; 投入後　  Jig No.異常
LDB B0560                ; ﾕﾆｯﾄ3_異常1BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B060                 ; ﾕﾆｯﾄ3_JIG番号異常
ORL
ANL
OUT B060                 ; ﾕﾆｯﾄ3_JIG番号異常
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0560                 ; ﾕﾆｯﾄ3_異常1BZ停止
AND B060                 ; ﾕﾆｯﾄ3_JIG番号異常
ANL
OUT B0560                ; ﾕﾆｯﾄ3_異常1BZ停止
LD M64                   ; 運転準備
AND X5680                ; 軸4 軸ｴﾗｰ中
LD M551                  ; SMA441ｱﾗｰﾑﾘｾｯﾄ
AND X5715                ; 軸4 ﾄﾞﾗｲﾊﾞｱﾗｰﾑ
ORL
TMR K390 K30             ; SMA441ｱﾗｰﾑ
LD CR2002                ; 常時ON
MPS
LD T390                  ; SMA441ｱﾗｰﾑ
LDB B0561                ; ﾕﾆｯﾄ3_異常2BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B061                 ; SMA441ｱﾗｰﾑ
ORL
ANB L0                   ; 手動ﾓｰﾄﾞ
ANL
OUT B061                 ; SMA441ｱﾗｰﾑ
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0561                 ; ﾕﾆｯﾄ3_異常2BZ停止
AND B061                 ; SMA441ｱﾗｰﾑ
ANL
OUT B0561                ; ﾕﾆｯﾄ3_異常2BZ停止
LD CR2002                ; 常時ON
MPS
LD M3917                 ; 塗布位置Case不明
LDB B0562                ; ﾕﾆｯﾄ3_異常3BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B062                 ; Y2塗布位置ｹｰｽ行方不明
ORL
ANL
OUT B062                 ; Y2塗布位置ｹｰｽ行方不明
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0562                 ; ﾕﾆｯﾄ3_異常3BZ停止
AND B062                 ; Y2塗布位置ｹｰｽ行方不明
ANL
OUT B0562                ; ﾕﾆｯﾄ3_異常3BZ停止
LD CR2002                ; 常時ON
MPS
LD M3918                 ; 嵌合位置ﾜｰｸ不明
LDB B0563                ; ﾕﾆｯﾄ3_異常4BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B063                 ; Y2嵌合位置ｹｰｽ行方不明
ORL
ANL
OUT B063                 ; Y2嵌合位置ｹｰｽ行方不明
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0563                 ; ﾕﾆｯﾄ3_異常4BZ停止
AND B063                 ; Y2嵌合位置ｹｰｽ行方不明
ANL
OUT B0563                ; ﾕﾆｯﾄ3_異常4BZ停止
LD CR2002                ; 常時ON
MPS
LD M3919                 ; ねじ締め位置ﾜｰｸ不明
LDB B0564                ; ﾕﾆｯﾄ3_異常5BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B064                 ; Y2ねじ締め位置ｹｰｽ行方不明
ORL
ANL
OUT B064                 ; Y2ねじ締め位置ｹｰｽ行方不明
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0564                 ; ﾕﾆｯﾄ3_異常5BZ停止
AND B064                 ; Y2ねじ締め位置ｹｰｽ行方不明
ANL
OUT B0564                ; ﾕﾆｯﾄ3_異常5BZ停止
LD CR2002                ; 常時ON
MPS
LD CR2003                ; 常時OFF
LDB B0565                ; ﾕﾆｯﾄ3_異常6BZ停止
ORB M123                 ; 異常ﾘｾｯﾄﾊﾟﾙｽ
AND B065                 ; ﾕﾆｯﾄ3_異常6
ORL
ANL
OUT B065                 ; ﾕﾆｯﾄ3_異常6
MPP
LD M122                  ; ﾌﾞｻﾞｰ停止ﾊﾟﾙｽ
OR B0565                 ; ﾕﾆｯﾄ3_異常6BZ停止
AND B065                 ; ﾕﾆｯﾄ3_異常6
ANL
OUT B0565                ; ﾕﾆｯﾄ3_異常6BZ停止
;異常ﾌﾞｻﾞｰまとめ
LD B060                  ; ﾕﾆｯﾄ3_JIG番号異常
ANB B0560                ; ﾕﾆｯﾄ3_異常1BZ停止
LD B061                  ; SMA441ｱﾗｰﾑ
ANB B0561                ; ﾕﾆｯﾄ3_異常2BZ停止
ORL
LD B062                  ; Y2塗布位置ｹｰｽ行方不明
ANB B0562                ; ﾕﾆｯﾄ3_異常3BZ停止
ORL
LD B063                  ; Y2嵌合位置ｹｰｽ行方不明
ANB B0563                ; ﾕﾆｯﾄ3_異常4BZ停止
ORL
LD B064                  ; Y2ねじ締め位置ｹｰｽ行方不明
ANB B0564                ; ﾕﾆｯﾄ3_異常5BZ停止
ORL
LD B065                  ; ﾕﾆｯﾄ3_異常6
ANB B0565                ; ﾕﾆｯﾄ3_異常6BZ停止
ORL
OUT M3909                ; ﾕﾆｯﾄ3異常BZ補助
END
ENDH
