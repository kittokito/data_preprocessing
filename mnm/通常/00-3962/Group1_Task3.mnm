DEVICE:53
;MODULE:Group1_Task3
;MODULE_TYPE:0
;SCRIPT_TYPE:
;OneSystem Main-Module
;
;-----------------------------------------
;ModuleName	:	Group1_Task3
;ModuleType	:	Main Module
;Line		:	μTFP CAV Plate Assembly Line
;Cell		:	<CR> 2Cell
;Function	:	ｲﾝﾃﾞｯｸｽから除材
;-----------------------------------------
;<<Task LocalDevice>>
;/*項目			/*割付ｴﾘｱ				/*備考
;---------------------------------------------------------------------			
;Emergency		@MR000〜@MR015			Emergency処理時RESET禁止ｴﾘｱ
;Free			@MR100〜@MR915			ﾕｰｻﾞｰﾌﾘｰｴﾘｱ
;Home			@MR1000〜@MR1915		HOME動作時使用ｴﾘｱ
;Maintenance		@MR2000〜@MR2915		MAINTE動作時使用ｴﾘｱ
;Auto(Main1)		@MR3000〜@MR3915		AUTO(Main1)動作時使用ｴﾘｱ
;	(Main2)		@MR4000〜@MR4415		AUTO(Main2)動作時使用ｴﾘｱ
;Subroutine		@MR4500〜@MR5515		ｻﾌﾞﾙｰﾁﾝ共通動作使用ｴﾘｱ
;----------------------------------------------------------------------
;<h1/>Device_Init/ﾃﾞﾊﾞｲｽ初期化
;[内容]
;・非常停止、優先ｴﾗｰ発生時に初期化したいﾃﾞﾊﾞｲｽを指定して下さい
;※本Taskで使用するﾛｰｶﾙﾃﾞﾊﾞｲｽなど
;※STG〜JMPにて使用しているﾃﾞﾊﾞｲｽは必須
LDP R46104               ; _非常停止中　ﾓｰﾄﾞﾌﾗｸﾞ
RES MR10400              ; 点灯/消灯制御入力(L1)
CON
RES MR6606               ; 除材UT ｻｲｸﾙﾀｲﾑ計測用
CON
RES MR6607               ; 個別除材動作 ｻｲｸﾙﾀｲﾑ計測用
CON
RES MR6608               ; 画像ｱﾗｲﾒﾝﾄ ｻｲｸﾙﾀｲﾑ計測用
CON
RES MR6608               ; 画像ｱﾗｲﾒﾝﾄ ｻｲｸﾙﾀｲﾑ計測用
CON
RES @R706
CON
ZRES @MR100 @MR5515      ; Task3 ERROR
;<h1/>Task_Monitor/ﾀｽｸﾓﾆﾀｰ
LD CR2002                ; 常時ON
FLIK #50 #50 @MR000
LD CR2002                ; 常時ON
FLIK #30 #30 @MR004      ; ﾌﾘｯｶ
LD= DM60000 #3           ; TaskNo /ERROR_DISP
AND R46208               ; _Group1　ｴﾗｰ発生中
OUT @MR001               ; TASK3 ERROR
;ON STG Main1
;TYPE EM624.U,EM625.U,@MR000.U,@MR3000.U
;
;FOR EM624 = EM624 TO 160 STEP 16
;	IF @MR3000:EM624 <> 0 THEN
;		BREAK
;	END IF	
;NEXT
;	
;IF EM624 < 160 THEN
;	EM625 = (EM624 / 16) * 100 + DMX(@MR3000:EM624) + #3000
;END IF		
;		
;EM624 = EM624 + 16		
;IF EM624 > 160 THEN		
;	EM624 = 0		
;END IF
LDP @MR000
NCJ #1000
;TYPE EM624.U,EM625.U,@MR000.U,@MR3000.U
;
;FOR EM624 = EM624 TO 160 STEP 16
;
LD CR2002                ; 常時ON
MOV EM624 EM624          ; Task3 Main1@MR  Task3 Main1@MR
LABEL #2000
LD> EM624 #160           ; Task3 Main1@MR
CJ #2001
;	IF @MR3000:EM624 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM624                ; Task3 Main1@MR
CON
EXT
CON
STA.L Z12
LD<> @MR3000:Z12 #0      ; AUTO Main1
NCJ #2002
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2003
;	END IF	
;
LABEL #2002
;NEXT
;
LD CR2002                ; 常時ON
LDA EM624                ; Task3 Main1@MR
CON
ADD #16
CON
STA EM624                ; Task3 Main1@MR
LDB CR2009               ; 演算結果が負
CJ #2000
LABEL #2003
LABEL #2001
;IF EM624 < 160 THEN
;
LD< EM624 #160           ; Task3 Main1@MR
NCJ #2004
;	EM625 = (EM624 / 16) * 100 + DMX(@MR3000:EM624) + #3000
;
LD CR2002                ; 常時ON
LDA EM624                ; Task3 Main1@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR3000:Z12          ; AUTO Main1
CON
DMX
CON
STA @VM0
CON
LDA EM624                ; Task3 Main1@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM1
CON
LDA @VM0
CON
EXT
CON
ADD.L @VM1
CON
ADD.L +3000
CON
STA EM625                ; Task3 Main1@MR
;END IF		
;
LABEL #2004
;EM624 = EM624 + 16		
;
LD CR2002                ; 常時ON
LDA EM624                ; Task3 Main1@MR
CON
EXT
CON
ADD.L +16
CON
STA EM624                ; Task3 Main1@MR
;IF EM624 > 160 THEN		
;
LD> EM624 #160           ; Task3 Main1@MR
NCJ #2005
;	EM624 = 0		
;
LD CR2002                ; 常時ON
MOV #0 EM624             ; Task3 Main1@MR
;END IF
LABEL #2005
LABEL #1000
;
;ON STG Main2
;TYPE EM626.U,EM627.U,@MR4000.U
;
;FOR EM626 = EM626 TO 80 STEP 16
;	IF @MR4000:EM626 <> 0 THEN
;		BREAK
;	END IF	
;NEXT	
;
;IF EM626 < 80 THEN
;	EM627 = (EM626 / 16) * 100 + DMX(@MR4000:EM626) + #4000
;END IF
;
;EM626 = EM626 + 16		
;
;IF EM626 > 80 THEN
;	EM626 = 0	
;END IF
LDP @MR000
NCJ #1001
;TYPE EM626.U,EM627.U,@MR4000.U
;
;FOR EM626 = EM626 TO 80 STEP 16
;
LD CR2002                ; 常時ON
MOV EM626 EM626          ; Task3 Main2@MR  Task3 Main2@MR
LABEL #2006
LD> EM626 #80            ; Task3 Main2@MR
CJ #2007
;	IF @MR4000:EM626 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM626                ; Task3 Main2@MR
CON
EXT
CON
STA.L Z12
LD<> @MR4000:Z12 #0      ; AUTO Main2
NCJ #2008
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2009
;	END IF	
;
LABEL #2008
;NEXT	
;
LD CR2002                ; 常時ON
LDA EM626                ; Task3 Main2@MR
CON
ADD #16
CON
STA EM626                ; Task3 Main2@MR
LDB CR2009               ; 演算結果が負
CJ #2006
LABEL #2009
LABEL #2007
;IF EM626 < 80 THEN
;
LD< EM626 #80            ; Task3 Main2@MR
NCJ #2010
;	EM627 = (EM626 / 16) * 100 + DMX(@MR4000:EM626) + #4000
;
LD CR2002                ; 常時ON
LDA EM626                ; Task3 Main2@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR4000:Z12          ; AUTO Main2
CON
DMX
CON
STA @VM3
CON
LDA EM626                ; Task3 Main2@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM4
CON
LDA @VM3
CON
EXT
CON
ADD.L @VM4
CON
ADD.L +4000
CON
STA EM627                ; Task3 Main2@MR
;END IF
;
LABEL #2010
;EM626 = EM626 + 16		
;
LD CR2002                ; 常時ON
LDA EM626                ; Task3 Main2@MR
CON
EXT
CON
ADD.L +16
CON
STA EM626                ; Task3 Main2@MR
;IF EM626 > 80 THEN
;
LD> EM626 #80            ; Task3 Main2@MR
NCJ #2011
;	EM626 = 0	
;
LD CR2002                ; 常時ON
MOV #0 EM626             ; Task3 Main2@MR
;END IF
LABEL #2011
LABEL #1001
;
;ON STG SubRoutine
;TYPE EM628.U,EM629.U,@MR4500.U
;	
;FOR EM628 = EM628 TO 320 STEP 16
;	IF @MR4500:EM628 <> 0 THEN
;		BREAK
;	END IF	
;NEXT
;		
;IF EM628 < 320 THEN
;	EM629 = (EM628 / 16) * 100 + DMX(@MR4500:EM628) + #4500
;END IF
;		
;EM628 = EM628 + 16	
;
;IF EM628 > 320 THEN
;   EM628 = 0	
;END IF
LDP @MR000
NCJ #1002
;TYPE EM628.U,EM629.U,@MR4500.U
;
;FOR EM628 = EM628 TO 320 STEP 16
;
LD CR2002                ; 常時ON
MOV EM628 EM628          ; Task3 Sub@MR  Task3 Sub@MR
LABEL #2012
LD> EM628 #320           ; Task3 Sub@MR
CJ #2013
;	IF @MR4500:EM628 <> 0 THEN
;
LD CR2002                ; 常時ON
LDA EM628                ; Task3 Sub@MR
CON
EXT
CON
STA.L Z12
LD<> @MR4500:Z12 #0      ; 除材準備開始
NCJ #2014
;		BREAK
;
LD CR2002                ; 常時ON
CJ #2015
;	END IF	
;
LABEL #2014
;NEXT
;
LD CR2002                ; 常時ON
LDA EM628                ; Task3 Sub@MR
CON
ADD #16
CON
STA EM628                ; Task3 Sub@MR
LDB CR2009               ; 演算結果が負
CJ #2012
LABEL #2015
LABEL #2013
;IF EM628 < 320 THEN
;
LD< EM628 #320           ; Task3 Sub@MR
NCJ #2016
;	EM629 = (EM628 / 16) * 100 + DMX(@MR4500:EM628) + #4500
;
LD CR2002                ; 常時ON
LDA EM628                ; Task3 Sub@MR
CON
EXT
CON
STA.L Z12
CON
LDA @MR4500:Z12          ; 除材準備開始
CON
DMX
CON
STA @VM6
CON
LDA EM628                ; Task3 Sub@MR
CON
EXT
CON
EXT.L
CON
DIV.L +16
CON
MUL.L +100
CON
STA.L @VM7
CON
LDA @VM6
CON
EXT
CON
ADD.L @VM7
CON
ADD.L +4500
CON
STA EM629                ; Task3 Sub@MR
;END IF
;
LABEL #2016
;EM628 = EM628 + 16	
;
LD CR2002                ; 常時ON
LDA EM628                ; Task3 Sub@MR
CON
EXT
CON
ADD.L +16
CON
STA EM628                ; Task3 Sub@MR
;IF EM628 > 320 THEN
;
LD> EM628 #320           ; Task3 Sub@MR
NCJ #2017
;   EM628 = 0	
;
LD CR2002                ; 常時ON
MOV #0 EM628             ; Task3 Sub@MR
;END IF
LABEL #2017
LABEL #1002
;
;<h1/>Task_Init/ﾀｽｸ初期化
;[本STG内容]
;・本Task起動時に必要な初期化処理を記述して下さい
;・起動Taskの全Init処理終了後、Task_StartのSTGが起動します
STG LR803                ; _Grp1_Task3_Init.STG
ENDS
;<h1/>Task_Start/ﾀｽｸ開始
;[本STG内容]
;・Task起動後、以下運転ﾓｰﾄﾞに従い、各STGにJMPします
;【HOME】	→	LR5200
;【AUTO】	→	LR5400
;【MAINTE】	→	LR5600
;・本STGは追記、修正不要です
STG LR403                ; _Grp1_Task3_Start.STG
MPS
AND R46101               ; _原点復帰中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5203               ; _Grp1_Task3_HOME.STG
MRD
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
RES @MR3515              ; 最終除材動作中
CON
RES MR6606               ; 除材UT ｻｲｸﾙﾀｲﾑ計測用
CON
RES MR6607               ; 個別除材動作 ｻｲｸﾙﾀｲﾑ計測用
CON
RES MR6608               ; 画像ｱﾗｲﾒﾝﾄ ｻｲｸﾙﾀｲﾑ計測用
CON
JMP LR5403               ; _Grp1_Task3_AUTO.STG
MPP
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP LR5603               ; _Grp1_Task3_MAINTE.STG
;<h1/>Task_Finish/ﾀｽｸ終了
;[本STG内容]
;・各Taskの終了STGになります
;・運転ﾓｰﾄﾞに係わらず終了時は本STGを経由して終了して下さい
;・本STGは追記、修正不要です
STG LR603                ; _Grp1_Task3_Fin.STG
ANB @MR001               ; TASK3 ERROR
ANB R41203               ; TASK3  PAUSE
RES MR22603              ; TASK0→TASK3 HOLD
CON
RES R41003               ; _Grp1_Task3_起動中ﾌﾗｸﾞ
CON
ENDS
;<h1/>HOME
;[本STG内容]
;・STG @MR1000の続きから各Taskの原点復帰動作を記述する
;・動作終了時は@MR1515にJMPする事
;各種条件
LDB R7903                ; 除材側1 OUT2 破壊
ANB R7905                ; 除材側2 OUT2 破壊
ANB R7907                ; 除材側3 OUT2 破壊
ANB R7909                ; 除材側4 OUT2 破壊
ANB R7911                ; 除材側5 OUT2 破壊
ANB R7913                ; 除材側6 OUT2 破壊
ANB R7915                ; 除材側7 OUT2 破壊
ANB R8000                ; 除材側8 OUT1 吸着
ANB R8002                ; 除材側9 OUT1 吸着
ANB R8003                ; 除材側9 OUT2 破壊
OUT @MR1008              ; 吸着ﾜｰｸ無し
LD CR2002                ; 常時ON
LDA.L EM2180             ; RB8 P1 目標位置（下位bit）
CON
ADD.L +150
CON
STA.L DM11130            ; X軸 現在位置+5mm
CON
LDA.L EM2180             ; RB8 P1 目標位置（下位bit）
CON
SUB.L +150
CON
STA.L DM11132            ; X軸 現在位置-5mm
LD<=.L DM11132 DM11122   ; X軸 現在位置-5mm  RB8 現在位置1
AND<=.L DM11122 DM11130  ; RB8 現在位置1  X軸 現在位置+5mm
AND>=.L DM11142 +3000    ; RB9 現在位置1
OUT @MR1009              ; 吸着ﾍｯﾄﾞ ﾜｰｸｾｯﾄﾃｰﾌﾞﾙ内有り
;TASK3 原点復帰ﾒｲﾝ
STG LR5203               ; _Grp1_Task3_HOME.STG
ANB @MR001               ; TASK3 ERROR
MPS
ANB R41203               ; TASK3  PAUSE
JMP @MR1000              ; HOME
MPP
AND R41203               ; TASK3  PAUSE
SET @MR1900              ; Main1 HALT許可
STG @MR1000              ; HOME
JMP @MR1100
STG @MR1100
ANB @MR1001              ; TASK3　原点復帰動作中
SET @MR1001              ; TASK3　原点復帰動作中
CON
JMP @MR1101
STG @MR1101
LD @MR1009               ; 吸着ﾍｯﾄﾞ ﾜｰｸｾｯﾄﾃｰﾌﾞﾙ内有り
OR CR2002                ; 常時ON
ANL
SET @MR1200              ; 除材仮吸着部原点復帰
CON
SET @MR1300              ; 搬送RB部原点復帰
CON
JMP @MR1102
STG @MR1102
AND @MR1202              ; 除材仮吸着部原点復帰完了
AND @MR1302              ; 搬送RB部原点復帰完了
RES @MR1202              ; 除材仮吸着部原点復帰完了
CON
RES @MR1302              ; 搬送RB部原点復帰完了
CON
JMP @MR1515              ; HOME END
STG @MR1515              ; HOME END
ANB @MR001               ; TASK3 ERROR
SET MR007                ; TASK3原点復帰完了
CON
RES @MR1001              ; TASK3　原点復帰動作中
CON
JMP LR603                ; _Grp1_Task3_Fin.STG
;除材仮吸着部の原点復帰
STG @MR1200              ; 除材仮吸着部原点復帰
ANB @MR1201              ; 除材仮吸着部原点復帰中
TMR @100 #1
CON
AND @T100
SET @MR1201              ; 除材仮吸着部原点復帰中
CON
JMP @MR1203
STG @MR1203
SET MR11604              ; 除材部ﾜｰｸ1 破壊確認開始
CON
SET MR11612              ; 除材部ﾜｰｸ2 破壊確認開始
CON
SET MR11704              ; 除材部ﾜｰｸ3 破壊確認開始
CON
SET MR11712              ; 除材部ﾜｰｸ4 破壊確認開始
CON
SET MR11804              ; 除材部ﾜｰｸ5 破壊確認開始
CON
SET MR11812              ; 除材部ﾜｰｸ6 破壊確認開始
CON
SET MR11904              ; 除材部ﾜｰｸ7 破壊確認開始
CON
SET MR11912              ; 除材部ﾜｰｸ8 破壊確認開始
CON
SET MR12004              ; 除材部ﾜｰｸ9 破壊確認開始
CON
SET MR12012              ; 除材部ﾜｰｸ10 破壊確認開始
CON
TMR @101 #10
CON
AND @T101
JMP @MR1204
STG @MR1204
AND MR11605              ; 除材部ﾜｰｸ1 吸着破壊OK
AND MR11613              ; 除材部ﾜｰｸ2 吸着破壊OK
AND MR11705              ; 除材部ﾜｰｸ3 吸着破壊OK
AND MR11713              ; 除材部ﾜｰｸ4 吸着破壊OK
AND MR11805              ; 除材部ﾜｰｸ5 吸着破壊OK
AND MR11813              ; 除材部ﾜｰｸ6 吸着破壊OK
AND MR11905              ; 除材部ﾜｰｸ7 吸着破壊OK
AND MR11913              ; 除材部ﾜｰｸ8 吸着破壊OK
AND MR12005              ; 除材部ﾜｰｸ9 吸着破壊OK
AND MR12013              ; 除材部ﾜｰｸ10 吸着破壊OK
JMP @MR1206
STG @MR1206
ZRES MR11600 MR12015     ; 除材部ﾜｰｸ1 吸着確認開始
CON
JMP @MR1207
STG @MR1207
RES MR11414              ; 除材側  吸着治具 上昇
CON
SET MR11415              ; 除材側  吸着治具 下降
CON
MPS
LDB MR7901               ; 除材側  吸着治具 下降ｴﾗｰ
ANB R7900                ; 除材側  吸着治具 上限
AND R7901                ; 除材側  吸着治具 下限
ANL
RES @MR1201              ; 除材仮吸着部原点復帰中
CON
SET @MR1202              ; 除材仮吸着部原点復帰完了
CON
ENDS
MPP
LD MR7901                ; 除材側  吸着治具 下降ｴﾗｰ
AND R41203               ; TASK3  PAUSE
ANL
SET @MR1900              ; Main1 HALT許可
;搬送ﾛﾎﾞｯﾄ部の原点復帰
STG @MR1300              ; 搬送RB部原点復帰
RES MR19002              ; RB4:原点復帰完了
CON
RES MR18002              ; RB5:原点復帰完了
CON
RES MR18802              ; RB3:原点復帰完了
CON
JMP @MR1303
STG @MR1303
SET @MR1301              ; 搬送RB部原点復帰中
CON
SET MR19009              ; RB4:ARMRST
CON
SET MR18009              ; RB5:ARMRST
CON
SET MR19209              ; RB8:ARMRST
CON
SET MR19409              ; RB9:ARMRST
CON
SET MR18809              ; RB3:ARMRST
CON
JMP @MR1304
STG @MR1304
MPS
LD MR19000               ; RB4:動作完了
AND MR18000              ; RB5:動作完了
AND MR19200              ; RB8:動作完了
AND MR19400              ; RB9:動作完了
AND MR18800              ; RB3:動作完了
ANL
JMP @MR1308
MRD
ANB MR19000              ; RB4:動作完了
TMR #600 #150            ; ｳｪｲﾄﾀｲﾏ
CON
AND T600                 ; ｳｪｲﾄﾀｲﾏ
JMP @MR1305
MRD
ANB MR18000              ; RB5:動作完了
TMR #601 #150            ; ｳｪｲﾄﾀｲﾏ
CON
AND T601                 ; ｳｪｲﾄﾀｲﾏ
JMP @MR1305
MRD
ANB MR19200              ; RB8:動作完了
TMR #602 #150            ; ｳｪｲﾄﾀｲﾏ
CON
AND T602                 ; ｳｪｲﾄﾀｲﾏ
JMP @MR1305
MRD
ANB MR19400              ; RB9:動作完了
TMR #603 #150            ; ｳｪｲﾄﾀｲﾏ
CON
AND T603                 ; ｳｪｲﾄﾀｲﾏ
JMP @MR1305
MPP
ANB MR18800              ; RB3:動作完了
TMR #604 #150            ; ｳｪｲﾄﾀｲﾏ
CON
AND T604                 ; ｳｪｲﾄﾀｲﾏ
JMP @MR1305
STG @MR1305
ANB R39004               ; ｴﾗｰ中
MPS
ANB MR19000              ; RB4:動作完了
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #83 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
@SET @MR100              ; Task3 ERROR
CON
JMP @MR1306
MRD
ANB MR18000              ; RB5:動作完了
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #85 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
@SET @MR100              ; Task3 ERROR
CON
JMP @MR1306
MRD
ANB MR19200              ; RB8:動作完了
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #24 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
@SET @MR100              ; Task3 ERROR
CON
JMP @MR1306
MRD
ANB MR19400              ; RB9:動作完了
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #25 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
@SET @MR100              ; Task3 ERROR
CON
JMP @MR1306
MPP
ANB MR18800              ; RB3:動作完了
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #84 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
@SET @MR100              ; Task3 ERROR
CON
JMP @MR1306
STG @MR1306
SET @MR1900              ; Main1 HALT許可
CON
AND @MR101               ; Task3 ERROR_End
RES @MR101               ; Task3 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
JMP @MR1307
STG @MR1307
ANB @MR102               ; Task3 ERROR Busy
AND @MR105               ; SW1
JMP @MR1300              ; 搬送RB部原点復帰
STG @MR1308
RES MR19000              ; RB4:動作完了
CON
RES MR18000              ; RB5:動作完了
CON
RES MR19200              ; RB8:動作完了
CON
RES MR19400              ; RB9:動作完了
CON
RES MR18800              ; RB3:動作完了
CON
JMP @MR1309
STG @MR1309
RES @MR1302              ; 搬送RB部原点復帰完了
CON
RES MR2908               ; 搬送Y軸RB原点復帰済み ﾗﾝﾌﾟ
CON
RES MR2907               ; 搬送X軸RB原点復帰済み ﾗﾝﾌﾟ
CON
RES MR2909               ; 搬送Z軸RB原点復帰済み ﾗﾝﾌﾟ
CON
RES MR3112               ; 反転RB原点復帰済み ﾗﾝﾌﾟ
CON
RES MR3113               ; 搬送θ軸RB原点復帰済み ﾗﾝﾌﾟ
CON
JMP @MR1310
STG @MR1310
MPS
LD>.L DM10572 +11000     ; SCON-1 現在位置（下位8bit）
OR>.L DM10580 +13000     ; SCON-2 現在位置（下位8bit）
ANL
JMP @MR1311
MPP
LD<=.L DM10572 +11000    ; SCON-1 現在位置（下位8bit）
AND<=.L DM10580 +13000   ; SCON-2 現在位置（下位8bit）
ANL
JMP @MR1400
STG @MR1311
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #27 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
@SET @MR100              ; Task3 ERROR
CON
JMP @MR1312
STG @MR1312
SET @MR1900              ; Main1 HALT許可
CON
AND @MR101               ; Task3 ERROR_End
RES @MR101               ; Task3 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
JMP @MR1313
STG @MR1313
ANB @MR102               ; Task3 ERROR Busy
AND @MR105               ; SW1
JMP @MR1300              ; 搬送RB部原点復帰
STG @MR1400
MPS
LDB MR19213              ; RB8:ｱﾗｰﾑ出力
ANB MR19413              ; RB9:ｱﾗｰﾑ出力
ANB MR18013              ; RB5:ｱﾗｰﾑ出力
ANB MR18813              ; RB3:ｱﾗｰﾑ出力
ANB MR19013              ; RB4:ｱﾗｰﾑ出力
ANL
JMP @MR1401
MPP
LD MR19213               ; RB8:ｱﾗｰﾑ出力
OR MR19413               ; RB9:ｱﾗｰﾑ出力
OR MR18013               ; RB5:ｱﾗｰﾑ出力
OR MR18813               ; RB3:ｱﾗｰﾑ出力
OR MR19013               ; RB4:ｱﾗｰﾑ出力
ANL
TMR @110 #30
CON
AND @T110
JMP @MR1300              ; 搬送RB部原点復帰
STG @MR1401
SET MR2908               ; 搬送Y軸RB原点復帰済み ﾗﾝﾌﾟ
CON
SET @MR1410              ; X軸原点復帰開始
CON
JMP @MR1405
STG @MR1405
DW #1 DM11148            ; RB9 Y軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @R005                ; RB9動作開始
CON
JMP @MR1406
STG @MR1406
AND @R006                ; RB9動作完了
RES @R006                ; RB9動作完了
CON
JMP @MR1409
STG @MR1409
SET @MR1500              ; RB9待機位置移動完了
CON
ENDS
STG @MR1410              ; X軸原点復帰開始
JMP @MR1411
STG @MR1411
SET MR2907               ; 搬送X軸RB原点復帰済み ﾗﾝﾌﾟ
CON
JMP @MR1501
STG @MR1501
AND @MR1500              ; RB9待機位置移動完了
AND MR24200              ; 除材搬送_Y軸_P1
RES @MR1500              ; RB9待機位置移動完了
CON
SET @MR1510              ; Z軸原点復帰開始
CON
JMP @MR1502
STG @MR1502
DW #1 DM11128            ; RB8 X軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @R010                ; RB8動作開始
CON
JMP @MR1503
STG @MR1503
AND @R011                ; RB8動作完了
RES @R011                ; RB8動作完了
CON
SET @MR1507              ; RB8待機位置移動完了
CON
ENDS
STG @MR1510              ; Z軸原点復帰開始
SET MR19004              ; RB4:HOME
CON
JMP @MR1511
STG @MR1511
MPS
AND MR19002              ; RB4:原点復帰完了
DW #0 DM11108            ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
CON
SET MR2909               ; 搬送Z軸RB原点復帰済み ﾗﾝﾌﾟ
CON
RES MR19002              ; RB4:原点復帰完了
CON
JMP @MR1600              ; 旋回軸原点復帰
MPP
LDB MR19002              ; RB4:原点復帰完了
BANB DM10755 #4          ; MSEP Axis-5 制御信号
ANL
TMR @111 #200
CON
AND @T111
JMP @MR1512
STG @MR1512
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #83 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
@SET @MR100              ; Task3 ERROR
CON
JMP @MR1513
STG @MR1513
SET @MR1900              ; Main1 HALT許可
CON
AND @MR101               ; Task3 ERROR_End
RES @MR101               ; Task3 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
JMP @MR1514
STG @MR1514
ANB @MR102               ; Task3 ERROR Busy
AND @MR105               ; SW1
JMP @MR1510              ; Z軸原点復帰開始
STG @MR1600              ; 旋回軸原点復帰
AND @MR1507              ; RB8待機位置移動完了
AND MR23000              ; 除材搬送_X軸_P1
AND MR24200              ; 除材搬送_Y軸_P1
RES @MR1507              ; RB8待機位置移動完了
CON
SET @MR1700              ; θ軸原点復帰開始
CON
SET @MR1610              ; 旋回軸原点復帰開始
CON
JMP @MR1602
STG @MR1602
DW #1 DM11108            ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @R100                ; RB4動作開始
CON
JMP @MR1603
STG @MR1603
AND @R101                ; RB4動作完了
RES @R101                ; RB4動作完了
CON
SET @MR1607              ; RB5待機位置移動完了
CON
ENDS
STG @MR1610              ; 旋回軸原点復帰開始
SET MR18004              ; RB5:HOME
CON
JMP @MR1611
STG @MR1611
AND MR18002              ; RB5:原点復帰完了
SET MR3112               ; 反転RB原点復帰済み ﾗﾝﾌﾟ
CON
RES MR18002              ; RB5:原点復帰完了
CON
SET @MR1608              ; 反転軸原点復帰完了
CON
ENDS
STG @MR1700              ; θ軸原点復帰開始
SET MR18804              ; RB3:HOME
CON
JMP @MR1701
STG @MR1701
AND MR18802              ; RB3:原点復帰完了
SET MR3113               ; 搬送θ軸RB原点復帰済み ﾗﾝﾌﾟ
CON
RES MR18802              ; RB3:原点復帰完了
CON
JMP @MR1708
STG @MR1708
AND @MR1608              ; 反転軸原点復帰完了
AND @MR1607              ; RB5待機位置移動完了
MPS
LD= DM11104 #1           ; RB4 現在ﾎﾟｼﾞｼｮﾝ番号
AND MR23300              ; 除材搬送_Z軸_P1
ANL
SET MR3112               ; 反転RB原点復帰済み ﾗﾝﾌﾟ
CON
RES @MR1608              ; 反転軸原点復帰完了
CON
RES @MR1607              ; RB5待機位置移動完了
CON
JMP @MR1711
MPP
LD<> DM11104 #1          ; RB4 現在ﾎﾟｼﾞｼｮﾝ番号
ORB MR23300              ; 除材搬送_Z軸_P1
ANL
DW #1 DM11108            ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @R100                ; RB4動作開始
CON
JMP @MR1710
STG @MR1710
AND @R101                ; RB4動作完了
RES @R101                ; RB4動作完了
CON
JMP @MR1708
STG @MR1711
DW #1 DM11008            ; RB5 　反転軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @R000                ; RB5動作開始
CON
JMP @MR1712
STG @MR1712
AND @R001                ; RB5動作完了
RES @R001                ; RB5動作完了
CON
JMP @MR1800
STG @MR1800
DW #1 DM11088            ; RB3 θ軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @R105                ; RB3動作開始
CON
JMP @MR1801
STG @MR1801
AND @R106                ; RB3動作完了
RES @R106                ; RB3動作完了
CON
JMP @MR1805
STG @MR1805
SET MR12808              ; 除材吸着ﾊﾝﾄﾞ 吸着確認開始
CON
TMR @112 #3
CON
AND @T112
MPS
AND MR12810              ; 除材吸着ﾊﾝﾄﾞ 吸着確認-OFF
JMP @MR1810
MPP
AND MR12809              ; 除材吸着ﾊﾝﾄﾞ 吸着確認-ON
JMP @MR1806
STG @MR1806
RES MR10606              ; 除材ﾊﾝﾄﾞ 吸着ON
CON
TMH @113 #3
CON
AND @T113
SET MR10607              ; 除材ﾊﾝﾄﾞ 吸着OFF
CON
JMP @MR1807
STG @MR1807
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #6000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #47 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #7510 @DM2            ; SensorNo /ERROR_DISP
CON
@SET @MR100              ; Task3 ERROR
CON
JMP @MR1808
STG @MR1808
SET @MR1900              ; Main1 HALT許可
CON
AND @MR101               ; Task3 ERROR_End
RES @MR101               ; Task3 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
ZRES MR12808 MR12815     ; 除材吸着ﾊﾝﾄﾞ 吸着確認開始
CON
JMP @MR1809
STG @MR1809
ANB @MR102               ; Task3 ERROR Busy
AND @MR105               ; SW1
JMP @MR1805
STG @MR1810
SET MR12812              ; 除材吸着ﾊﾝﾄﾞ 破壊確認開始
CON
AND MR12813              ; 除材吸着ﾊﾝﾄﾞ 吸着破壊OK
JMP @MR1811
STG @MR1811
RES MR12813              ; 除材吸着ﾊﾝﾄﾞ 吸着破壊OK
CON
ZRES MR12808 MR12815     ; 除材吸着ﾊﾝﾄﾞ 吸着確認開始
CON
JMP @MR1815
STG @MR1815
RES MR10606              ; 除材ﾊﾝﾄﾞ 吸着ON
CON
RES MR10608              ; 除材ﾊﾝﾄﾞ 破壊ON
CON
TMH @114 #3
CON
AND @T114
SET MR10607              ; 除材ﾊﾝﾄﾞ 吸着OFF
CON
SET @MR1302              ; 搬送RB部原点復帰完了
CON
RES @MR1301              ; 搬送RB部原点復帰中
CON
ENDS
;<h1/>AUTO
STG LR5403               ; _Grp1_Task3_AUTO.STG
JMP @MR3000              ; AUTO Main1
;<h1/>Auto (Main1)
;[本STG内容]
;・各TaskのAUTO動作を記述して下さい
;・動作ﾓｰﾄﾞは「AUTOAC」に格納されています(1〜32)
;・@MR3000:AUTO_Main1開始、@MR3001:AUTO_Main1完了、@MR3002:AUTO_Main1動作中
STG @MR3000              ; AUTO Main1
ANB @MR001               ; TASK3 ERROR
MPS
LDB R41203               ; TASK3  PAUSE
ANB MR24904              ; 4ST　動作完了
ANB MR6607               ; 個別除材動作 ｻｲｸﾙﾀｲﾑ計測用
ANL
LDA DM35000              ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
CON
STA DM35030              ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ補助
CON
DW #0 EM40100            ; 除材ﾎﾟｼﾞｼｮﾝ
CON
ANB @MR3515              ; 最終除材動作中
RES MR19710              ; NG排出
CON
RES @MR3302              ; ﾎﾟｯﾄﾀｲﾑｵｰﾊﾞｴﾗｰ出力済み
CON
MPS
AND MR22503              ; TASK0→TASK3 START
SET @MR3002              ; AUTO Main1 Busy
CON
SET MR6606               ; 除材UT ｻｲｸﾙﾀｲﾑ計測用
CON
JMP @MR3908
MPP
AND MR22603              ; TASK0→TASK3 HOLD
RES @MR3002              ; AUTO Main1 Busy
CON
JMP @MR3909
MPP
AND R41203               ; TASK3  PAUSE
SET @MR1900              ; Main1 HALT許可
STG @MR3909
RES MR22503              ; TASK0→TASK3 START
CON
RES MR22603              ; TASK0→TASK3 HOLD
CON
RES @MR3302              ; ﾎﾟｯﾄﾀｲﾑｵｰﾊﾞｴﾗｰ出力済み
CON
JMP @MR3915              ; AUTO END
STG @MR3908
TMR @0 #1
CON
AND @T0
RES MR22503              ; TASK0→TASK3 START
CON
JMP @MR3003
STG @MR3003
JMP @MR3004
STG @MR3004
MPS
AND= DM35000 #0          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
AND= DM5010 #1           ; _AUTO動作番号
MPS
AND R7504                ; ﾜｰｸｾｯﾄ部 ST2 圧力1
MPS
AND MR9102               ; INDEX_治具-2上ﾜｰｸ全て有り
MPS
AND= #10 EM31904         ; 転写状態
JMP @MR3005
MRD
AND= #5 EM31904          ; 転写状態
JMP @MR3200
MPP
AND= #0 EM31904          ; 転写状態
SET @MR5300              ; 除材終了動作
CON
JMP @MR3900
MPP
ANB MR9102               ; INDEX_治具-2上ﾜｰｸ全て有り
SET LR12110              ; INDEX_治具2 ﾜｰｸ有無-10
CON
JMP @MR3908
MRD
LDB R7504                ; ﾜｰｸｾｯﾄ部 ST2 圧力1
AND MR9102               ; INDEX_治具-2上ﾜｰｸ全て有り
ANL
JMP @MR3205
MPP
LDB R7504                ; ﾜｰｸｾｯﾄ部 ST2 圧力1
ANB MR9102               ; INDEX_治具-2上ﾜｰｸ全て有り
ANL
RES MR10612              ; ST2ﾜｰｸ吸着 吸着ON
CON
SET MR10613              ; ST2ﾜｰｸ吸着 吸着OFF
CON
RES MR10614              ; ST2ﾜｰｸ吸着 破壊ON
CON
SET @MR5300              ; 除材終了動作
CON
JMP @MR3900
MPP
AND= DM5010 #4           ; _AUTO動作番号
MPS
AND MR9102               ; INDEX_治具-2上ﾜｰｸ全て有り
MPS
AND= #10 EM31904         ; 転写状態
JMP @MR3005
MRD
AND= #5 EM31904          ; 転写状態
JMP @MR3200
MPP
AND= #0 EM31904          ; 転写状態
SET @MR5300              ; 除材終了動作
CON
JMP @MR3900
MPP
ANB MR9102               ; INDEX_治具-2上ﾜｰｸ全て有り
SET @MR5300              ; 除材終了動作
CON
JMP @MR3900
MRD
AND= DM35000 #1          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
AND= DM5010 #1           ; _AUTO動作番号
MPS
AND R7506                ; ﾜｰｸｾｯﾄ部 ST3 圧力1
MPS
AND MR9103               ; INDEX_治具-3上ﾜｰｸ全て有り
MPS
AND= #10 EM31904         ; 転写状態
JMP @MR3005
MRD
AND= #5 EM31904          ; 転写状態
JMP @MR3200
MPP
AND= #0 EM31904          ; 転写状態
SET @MR5300              ; 除材終了動作
CON
JMP @MR3900
MPP
ANB MR9103               ; INDEX_治具-3上ﾜｰｸ全て有り
SET LR12210              ; INDEX_治具3 ﾜｰｸ有無-10
CON
JMP @MR3908
MRD
LDB R7506                ; ﾜｰｸｾｯﾄ部 ST3 圧力1
AND MR9103               ; INDEX_治具-3上ﾜｰｸ全て有り
ANL
JMP @MR3205
MPP
LDB R7506                ; ﾜｰｸｾｯﾄ部 ST3 圧力1
ANB MR9103               ; INDEX_治具-3上ﾜｰｸ全て有り
ANL
RES MR10700              ; ST3ﾜｰｸ吸着 吸着ON
CON
SET MR10701              ; ST3ﾜｰｸ吸着 吸着OFF
CON
RES MR10702              ; ST3ﾜｰｸ吸着 破壊ON
CON
SET @MR5300              ; 除材終了動作
CON
JMP @MR3900
MPP
AND= DM5010 #4           ; _AUTO動作番号
MPS
AND MR9103               ; INDEX_治具-3上ﾜｰｸ全て有り
MPS
AND= #10 EM31904         ; 転写状態
JMP @MR3005
MRD
AND= #5 EM31904          ; 転写状態
JMP @MR3200
MPP
AND= #0 EM31904          ; 転写状態
SET @MR5300              ; 除材終了動作
CON
JMP @MR3900
MPP
ANB MR9103               ; INDEX_治具-3上ﾜｰｸ全て有り
SET @MR5300              ; 除材終了動作
CON
JMP @MR3900
MRD
AND= DM35000 #2          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
AND= DM5010 #1           ; _AUTO動作番号
MPS
AND R7508                ; ﾜｰｸｾｯﾄ部 ST4 圧力1
MPS
AND MR9104               ; INDEX_治具-4上ﾜｰｸ全て有り
MPS
AND= #10 EM31904         ; 転写状態
JMP @MR3005
MRD
AND= #5 EM31904          ; 転写状態
JMP @MR3200
MPP
AND= #0 EM31904          ; 転写状態
SET @MR5300              ; 除材終了動作
CON
JMP @MR3900
MPP
ANB MR9104               ; INDEX_治具-4上ﾜｰｸ全て有り
SET LR12310              ; INDEX_治具4 ﾜｰｸ有無-10
CON
JMP @MR3908
MRD
LDB R7508                ; ﾜｰｸｾｯﾄ部 ST4 圧力1
AND MR9104               ; INDEX_治具-4上ﾜｰｸ全て有り
ANL
JMP @MR3205
MPP
LDB R7508                ; ﾜｰｸｾｯﾄ部 ST4 圧力1
ANB MR9104               ; INDEX_治具-4上ﾜｰｸ全て有り
ANL
RES MR10703              ; ST4ﾜｰｸ吸着 吸着ON
CON
SET MR10704              ; ST4ﾜｰｸ吸着 吸着OFF
CON
RES MR10705              ; ST4ﾜｰｸ吸着 破壊ON
CON
SET @MR5300              ; 除材終了動作
CON
JMP @MR3900
MPP
AND= DM5010 #4           ; _AUTO動作番号
MPS
AND MR9104               ; INDEX_治具-4上ﾜｰｸ全て有り
MPS
AND= #10 EM31904         ; 転写状態
JMP @MR3005
MRD
AND= #5 EM31904          ; 転写状態
JMP @MR3200
MPP
AND= #0 EM31904          ; 転写状態
SET @MR5300              ; 除材終了動作
CON
JMP @MR3900
MPP
ANB MR9104               ; INDEX_治具-4上ﾜｰｸ全て有り
SET @MR5300              ; 除材終了動作
CON
JMP @MR3900
MPP
AND= DM35000 #3          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
MPS
AND= DM5010 #1           ; _AUTO動作番号
MPS
AND R7502                ; ﾜｰｸｾｯﾄ部 ST1 圧力1
MPS
AND MR9101               ; INDEX_治具-1上ﾜｰｸ全て有り
MPS
AND= #10 EM31904         ; 転写状態
JMP @MR3005
MRD
AND= #5 EM31904          ; 転写状態
JMP @MR3200
MPP
AND= #0 EM31904          ; 転写状態
SET @MR5300              ; 除材終了動作
CON
JMP @MR3900
MPP
ANB MR9101               ; INDEX_治具-1上ﾜｰｸ全て有り
SET LR12010              ; INDEX_治具1 ﾜｰｸ有無-10
CON
JMP @MR3908
MRD
LDB R7502                ; ﾜｰｸｾｯﾄ部 ST1 圧力1
AND MR9101               ; INDEX_治具-1上ﾜｰｸ全て有り
ANL
JMP @MR3205
MPP
LDB R7502                ; ﾜｰｸｾｯﾄ部 ST1 圧力1
ANB MR9101               ; INDEX_治具-1上ﾜｰｸ全て有り
ANL
RES MR10609              ; ST1ﾜｰｸ吸着 吸着ON
CON
SET MR10610              ; ST1ﾜｰｸ吸着 吸着OFF
CON
RES MR10611              ; ST1ﾜｰｸ吸着 破壊ON
CON
SET @MR5300              ; 除材終了動作
CON
JMP @MR3900
MPP
AND= DM5010 #4           ; _AUTO動作番号
MPS
AND MR9101               ; INDEX_治具-1上ﾜｰｸ全て有り
MPS
AND= #10 EM31904         ; 転写状態
JMP @MR3005
MRD
AND= #5 EM31904          ; 転写状態
JMP @MR3200
MPP
AND= #0 EM31904          ; 転写状態
SET @MR5300              ; 除材終了動作
CON
JMP @MR3900
MPP
ANB MR9101               ; INDEX_治具-1上ﾜｰｸ全て有り
SET @MR5300              ; 除材終了動作
CON
JMP @MR3900
STG @MR3200
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #9004 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #119 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
@SET @MR100              ; Task3 ERROR
CON
JMP @MR3201
STG @MR3201
SET @MR1900              ; Main1 HALT許可
CON
AND @MR101               ; Task3 ERROR_End
RES @MR101               ; Task3 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
JMP @MR3202
STG @MR3202
MPS
AND @MR105               ; SW1
JMP @MR3203
MPP
AND @MR108               ; SW4
DW #10 EM31904           ; 転写状態
CON
JMP @MR3908
STG @MR3203
LDA #200
CON
STA EM31515              ; WORK DATA
CON
STA EM31565              ; WORK DATA
CON
STA EM31615              ; WORK DATA
CON
STA EM31665              ; WORK DATA
CON
STA EM31715              ; WORK DATA
CON
STA EM31765              ; WORK DATA
CON
STA EM31815              ; WORK DATA
CON
STA EM31865              ; WORK DATA
CON
STA EM31915              ; WORK DATA
CON
STA EM31965              ; WORK DATA
CON
JMP @MR3005
STG @MR3205
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1006 @DM9            ; ReturnSW /ERROR_DISP
CON
MPS
AND= DM35000 #0          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
DW #54 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
@SET @MR100              ; Task3 ERROR
CON
JMP @MR3206
MRD
AND= DM35000 #1          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
DW #55 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
@SET @MR100              ; Task3 ERROR
CON
JMP @MR3206
MRD
AND= DM35000 #2          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
DW #56 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
@SET @MR100              ; Task3 ERROR
CON
JMP @MR3206
MPP
AND= DM35000 #3          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
DW #53 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
@SET @MR100              ; Task3 ERROR
CON
JMP @MR3206
STG @MR3206
SET @MR1900              ; Main1 HALT許可
CON
AND @MR101               ; Task3 ERROR_End
RES @MR101               ; Task3 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
JMP @MR3207
STG @MR3207
MPS
AND @MR105               ; SW1
JMP @MR3003
MPP
AND @MR108               ; SW4
JMP @MR3208
STG @MR3208
MPS
AND= DM35000 #0          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ZRES LR12101 LR12110     ; INDEX_治具2 ﾜｰｸ有無-1  INDEX_治具2 ﾜｰｸ有無-10
CON
RES MR10614              ; ST2ﾜｰｸ吸着 破壊ON
CON
RES MR10612              ; ST2ﾜｰｸ吸着 吸着ON
CON
TMH @60 #3
CON
AND @T60
DW #0 EM31904            ; 転写状態
CON
SET MR10613              ; ST2ﾜｰｸ吸着 吸着OFF
CON
JMP @MR3003
MRD
AND= DM35000 #1          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ZRES LR12201 LR12210     ; INDEX_治具3 ﾜｰｸ有無-1  INDEX_治具3 ﾜｰｸ有無-10
CON
RES MR10702              ; ST3ﾜｰｸ吸着 破壊ON
CON
RES MR10700              ; ST3ﾜｰｸ吸着 吸着ON
CON
TMH @61 #3
CON
AND @T61
DW #0 EM31904            ; 転写状態
CON
SET MR10701              ; ST3ﾜｰｸ吸着 吸着OFF
CON
JMP @MR3003
MRD
AND= DM35000 #2          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ZRES LR12301 LR12310     ; INDEX_治具4 ﾜｰｸ有無-1  INDEX_治具4 ﾜｰｸ有無-10
CON
RES MR10705              ; ST4ﾜｰｸ吸着 破壊ON
CON
RES MR10703              ; ST4ﾜｰｸ吸着 吸着ON
CON
TMH @62 #3
CON
AND @T62
DW #0 EM31904            ; 転写状態
CON
SET MR10704              ; ST4ﾜｰｸ吸着 吸着OFF
CON
JMP @MR3003
MPP
AND= DM35000 #3          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ZRES LR12001 LR12010     ; INDEX_治具1 ﾜｰｸ有無-1  INDEX_治具1 ﾜｰｸ有無-10
CON
RES MR10611              ; ST1ﾜｰｸ吸着 破壊ON
CON
RES MR10609              ; ST1ﾜｰｸ吸着 吸着ON
CON
TMH @63 #3
CON
AND @T63
DW #0 EM31904            ; 転写状態
CON
SET MR10610              ; ST1ﾜｰｸ吸着 吸着OFF
CON
JMP @MR3003
STG @MR3005
MPS
AND R8102                ; ﾀﾞﾐｰBOX有無確認
JMP @MR3107
MPP
ANB R8102                ; ﾀﾞﾐｰBOX有無確認
TMR @1 #3
CON
AND @T1
JMP @MR3101
STG @MR3101
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #126 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #8102 @DM2            ; SensorNo /ERROR_DISP
CON
@SET @MR100              ; Task3 ERROR
CON
JMP @MR3102
STG @MR3102
SET @MR1900              ; Main1 HALT許可
CON
AND @MR101               ; Task3 ERROR_End
RES @MR101               ; Task3 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
JMP @MR3103
STG @MR3103
AND @MR105               ; SW1
JMP @MR3005
STG @MR3107
MPS
ANB R8101                ; ﾀﾞﾐｰBOX満杯検出
JMP @MR3108
MPP
AND R8101                ; ﾀﾞﾐｰBOX満杯検出
TMR @3 #3
CON
AND @T3
JMP @MR3109
STG @MR3109
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #1000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #127 @DM1             ; ErrorNo /ERROR_DISP
CON
DW #8101 @DM2            ; SensorNo /ERROR_DISP
CON
@SET @MR100              ; Task3 ERROR
CON
JMP @MR3110
STG @MR3110
SET @MR1900              ; Main1 HALT許可
CON
AND @MR101               ; Task3 ERROR_End
RES @MR101               ; Task3 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
JMP @MR3111
STG @MR3111
AND @MR105               ; SW1
JMP @MR3107
STG @MR3108
SET @MR4500              ; 除材準備開始
CON
JMP @MR3012
STG @MR3012
AND @MR4501              ; 除材動作　準備完了
RES @MR4501              ; 除材動作　準備完了
CON
DW #1 EM40100            ; 除材ﾎﾟｼﾞｼｮﾝ
CON
JMP @MR3006
STG @MR3006
MPS
ANB R41203               ; TASK3  PAUSE
JMP @MR3008
MPP
AND R41203               ; TASK3  PAUSE
SET @MR1900              ; Main1 HALT許可
STG @MR3008
MPS
AND= EM40100 #1          ; 除材ﾎﾟｼﾞｼｮﾝ
DW #1 DM35010            ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
CON
JMP @MR3300
MRD
AND= EM40100 #2          ; 除材ﾎﾟｼﾞｼｮﾝ
DW #2 DM35010            ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
CON
JMP @MR3300
MRD
AND= EM40100 #3          ; 除材ﾎﾟｼﾞｼｮﾝ
DW #3 DM35010            ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
CON
JMP @MR3300
MRD
AND= EM40100 #4          ; 除材ﾎﾟｼﾞｼｮﾝ
DW #4 DM35010            ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
CON
JMP @MR3300
MRD
AND= EM40100 #5          ; 除材ﾎﾟｼﾞｼｮﾝ
DW #5 DM35010            ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
CON
JMP @MR3300
MRD
AND= EM40100 #6          ; 除材ﾎﾟｼﾞｼｮﾝ
DW #6 DM35010            ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
CON
JMP @MR3300
MRD
AND= EM40100 #7          ; 除材ﾎﾟｼﾞｼｮﾝ
DW #7 DM35010            ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
CON
JMP @MR3300
MRD
AND= EM40100 #8          ; 除材ﾎﾟｼﾞｼｮﾝ
DW #8 DM35010            ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
CON
JMP @MR3300
MRD
AND= EM40100 #9          ; 除材ﾎﾟｼﾞｼｮﾝ
DW #9 DM35010            ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
CON
JMP @MR3300
MPP
AND= EM40100 #10         ; 除材ﾎﾟｼﾞｼｮﾝ
DW #10 DM35010           ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
CON
JMP @MR3300
;ﾜｰｸﾃﾞｰﾀがﾀﾞﾐｰならばﾀﾞﾐｰ箱へ廃棄処理
;OKﾜｰｸであれば搬送動作を行う
STG @MR3300
AND @MR3301              ; ﾎﾟｯﾄﾀｲﾑ管理 計算完了
RES @MR3301              ; ﾎﾟｯﾄﾀｲﾑ管理 計算完了
CON
JMP @MR3303
;'接着剤ﾎﾟｯﾄﾗｲﾌ ﾀｲﾑ管理
;
;SELECT CASE EM40100
;  CASE 1
;    DM27100.D = SEC(EM31966)
;  CASE 2
;    DM27100.D = SEC(EM31966)   
;  CASE 3
;    DM27100.D = SEC(EM31966)
;  CASE 4
;    DM27100.D = SEC(EM31966)
;  CASE 5
;    DM27100.D = SEC(EM31966)
;  CASE 6
;    DM27100.D = SEC(EM31966)
;  CASE 7
;    DM27100.D = SEC(EM31966)
;  CASE 8
;    DM27100.D = SEC(EM31966)
;  CASE 9
;    DM27100.D = SEC(EM31966)
;  CASE 10
;    DM27100.D = SEC(EM31966)
;END SELECT    
;        
;DM27102.D = DM27100.D + DM470.D '次装置搬送可能時間  (通算 秒)
;
;DM27104.D = SEC(CM700) '現在時刻  (通算 秒)
;
;DM27108.D = DM27102.D - DM27104.D
;
;IF DM27102.D < DM27104.D THEN 
;
;DM27108.D = 0
;
;END IF
;
;
;SET(@MR3301)
LD @MR3300
NCJ #1003
;'接着剤ﾎﾟｯﾄﾗｲﾌ ﾀｲﾑ管理
;
;SELECT CASE EM40100
;
LD CR2002                ; 常時ON
MOV EM40100 @VM9         ; 除材ﾎﾟｼﾞｼｮﾝ
;  CASE 1
;
LD= @VM9 #1
NCJ #2018
;    DM27100.D = SEC(EM31966)
;
LD CR2002                ; 常時ON
MOV.D #0 @VM10
SEC EM31966 @VM10        ; 接着時刻 YY（年）
MOV.D @VM10 DM27100
LD CR2002                ; 常時ON
CJ #2019
LABEL #2018
;  CASE 2
;
LD= @VM9 #2
NCJ #2020
;    DM27100.D = SEC(EM31966)   
;
LD CR2002                ; 常時ON
MOV.D #0 @VM12
SEC EM31966 @VM12        ; 接着時刻 YY（年）
MOV.D @VM12 DM27100
LD CR2002                ; 常時ON
CJ #2021
LABEL #2020
;  CASE 3
;
LD= @VM9 #3
NCJ #2022
;    DM27100.D = SEC(EM31966)
;
LD CR2002                ; 常時ON
MOV.D #0 @VM14
SEC EM31966 @VM14        ; 接着時刻 YY（年）
MOV.D @VM14 DM27100
LD CR2002                ; 常時ON
CJ #2023
LABEL #2022
;  CASE 4
;
LD= @VM9 #4
NCJ #2024
;    DM27100.D = SEC(EM31966)
;
LD CR2002                ; 常時ON
MOV.D #0 @VM16
SEC EM31966 @VM16        ; 接着時刻 YY（年）
MOV.D @VM16 DM27100
LD CR2002                ; 常時ON
CJ #2025
LABEL #2024
;  CASE 5
;
LD= @VM9 #5
NCJ #2026
;    DM27100.D = SEC(EM31966)
;
LD CR2002                ; 常時ON
MOV.D #0 @VM18
SEC EM31966 @VM18        ; 接着時刻 YY（年）
MOV.D @VM18 DM27100
LD CR2002                ; 常時ON
CJ #2027
LABEL #2026
;  CASE 6
;
LD= @VM9 #6
NCJ #2028
;    DM27100.D = SEC(EM31966)
;
LD CR2002                ; 常時ON
MOV.D #0 @VM20
SEC EM31966 @VM20        ; 接着時刻 YY（年）
MOV.D @VM20 DM27100
LD CR2002                ; 常時ON
CJ #2029
LABEL #2028
;  CASE 7
;
LD= @VM9 #7
NCJ #2030
;    DM27100.D = SEC(EM31966)
;
LD CR2002                ; 常時ON
MOV.D #0 @VM22
SEC EM31966 @VM22        ; 接着時刻 YY（年）
MOV.D @VM22 DM27100
LD CR2002                ; 常時ON
CJ #2031
LABEL #2030
;  CASE 8
;
LD= @VM9 #8
NCJ #2032
;    DM27100.D = SEC(EM31966)
;
LD CR2002                ; 常時ON
MOV.D #0 @VM24
SEC EM31966 @VM24        ; 接着時刻 YY（年）
MOV.D @VM24 DM27100
LD CR2002                ; 常時ON
CJ #2033
LABEL #2032
;  CASE 9
;
LD= @VM9 #9
NCJ #2034
;    DM27100.D = SEC(EM31966)
;
LD CR2002                ; 常時ON
MOV.D #0 @VM26
SEC EM31966 @VM26        ; 接着時刻 YY（年）
MOV.D @VM26 DM27100
LD CR2002                ; 常時ON
CJ #2035
LABEL #2034
;  CASE 10
;
LD= @VM9 #10
NCJ #2036
;    DM27100.D = SEC(EM31966)
;
LD CR2002                ; 常時ON
MOV.D #0 @VM28
SEC EM31966 @VM28        ; 接着時刻 YY（年）
MOV.D @VM28 DM27100
;END SELECT    
;
LABEL #2036
LABEL #2035
LABEL #2033
LABEL #2031
LABEL #2029
LABEL #2027
LABEL #2025
LABEL #2023
LABEL #2021
LABEL #2019
;DM27102.D = DM27100.D + DM470.D '次装置搬送可能時間  (通算 秒)
;
LD CR2002                ; 常時ON
LDA.L DM27100
CON
ADD.L DM470              ; _機種分類1　機種別ﾃﾞｰﾀ36
CON
STA.D DM27102
;DM27104.D = SEC(CM700) '現在時刻  (通算 秒)
;
LD CR2002                ; 常時ON
MOV.D #0 @VM30
SEC CM700 @VM30          ; ｶﾚﾝﾀﾞﾀｲﾏ（年）
MOV.D @VM30 DM27104
;DM27108.D = DM27102.D - DM27104.D
;
LD CR2002                ; 常時ON
LDA.L DM27102
CON
SUB.L DM27104
CON
STA.D DM27108
;IF DM27102.D < DM27104.D THEN 
;
LD<.D DM27102 DM27104
NCJ #2037
;DM27108.D = 0
;
LD CR2002                ; 常時ON
MOV.D #0 DM27108
;END IF
;
LABEL #2037
;SET(@MR3301)
LD CR2002                ; 常時ON
SET @MR3301              ; ﾎﾟｯﾄﾀｲﾑ管理 計算完了
LABEL #1003
;
STG @MR3303
ANB MR9915
MPS
ANB DM2000.3             ; 転写後ﾜｰｸ時間管理 有効/無効
MPS
ANB MR19710              ; NG排出
MPS
AND>.D DM27108 #0
JMP @MR3010
MPP
AND=.D DM27108 #0
MPS
ANB @MR3302              ; ﾎﾟｯﾄﾀｲﾑｵｰﾊﾞｴﾗｰ出力済み
JMP @MR3305
MPP
AND @MR3302              ; ﾎﾟｯﾄﾀｲﾑｵｰﾊﾞｴﾗｰ出力済み
JMP @MR3010
MPP
AND MR19710              ; NG排出
JMP @MR3010
MPP
AND DM2000.3             ; 転写後ﾜｰｸ時間管理 有効/無効
JMP @MR3010
STG @MR3305
ANB R39004               ; ｴﾗｰ中
SET R39004               ; ｴﾗｰ中
CON
DW #9004 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #64 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
SET @MR100               ; Task3 ERROR
CON
JMP @MR3306
STG @MR3306
SET @MR1900              ; Main1 HALT許可
CON
AND @MR101               ; Task3 ERROR_End
RES @MR101               ; Task3 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
JMP @MR3307
STG @MR3307
MPS
AND @MR105               ; SW1
SET @MR3302              ; ﾎﾟｯﾄﾀｲﾑｵｰﾊﾞｴﾗｰ出力済み
CON
JMP @MR3010
MPP
AND @MR108               ; SW4
SET @MR3304              ; ﾎﾟｯﾄﾀｲﾑｵｰﾊﾞｰｴﾗｰ継続処理済み
CON
RES @MR3302              ; ﾎﾟｯﾄﾀｲﾑｵｰﾊﾞｴﾗｰ出力済み
CON
JMP @MR3010
STG @MR3010
SET R46001               ; _装置C/T取得
CON
SET MR6607               ; 個別除材動作 ｻｲｸﾙﾀｲﾑ計測用
CON
SET @MR4600              ; 除材処理
CON
JMP @MR3015
STG @MR3015
AND @MR4601              ; 除材処理完了
MPS
AND<> EM40100 #10        ; 除材ﾎﾟｼﾞｼｮﾝ
RES MR6607               ; 個別除材動作 ｻｲｸﾙﾀｲﾑ計測用
CON
RES @MR4601              ; 除材処理完了
CON
JMP @MR3401
MPP
AND= EM40100 #10         ; 除材ﾎﾟｼﾞｼｮﾝ
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
JMP @MR3402
STG @MR3402
MPS
AND= #3 DM35030          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ補助
RES MR6606               ; 除材UT ｻｲｸﾙﾀｲﾑ計測用
CON
RES LR12010              ; INDEX_治具1 ﾜｰｸ有無-10
CON
RES MR6607               ; 個別除材動作 ｻｲｸﾙﾀｲﾑ計測用
CON
RES @MR4601              ; 除材処理完了
CON
RES @MR3515              ; 最終除材動作中
CON
ENDS
MRD
AND= #0 DM35030          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ補助
RES MR6606               ; 除材UT ｻｲｸﾙﾀｲﾑ計測用
CON
RES LR12110              ; INDEX_治具2 ﾜｰｸ有無-10
CON
RES MR6607               ; 個別除材動作 ｻｲｸﾙﾀｲﾑ計測用
CON
RES @MR4601              ; 除材処理完了
CON
RES @MR3515              ; 最終除材動作中
CON
ENDS
MRD
AND= #1 DM35030          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ補助
RES MR6606               ; 除材UT ｻｲｸﾙﾀｲﾑ計測用
CON
RES LR12210              ; INDEX_治具3 ﾜｰｸ有無-10
CON
RES MR6607               ; 個別除材動作 ｻｲｸﾙﾀｲﾑ計測用
CON
RES @MR4601              ; 除材処理完了
CON
RES @MR3515              ; 最終除材動作中
CON
ENDS
MPP
AND= #2 DM35030          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ補助
RES MR6606               ; 除材UT ｻｲｸﾙﾀｲﾑ計測用
CON
RES LR12310              ; INDEX_治具4 ﾜｰｸ有無-10
CON
RES MR6607               ; 個別除材動作 ｻｲｸﾙﾀｲﾑ計測用
CON
RES @MR4601              ; 除材処理完了
CON
RES @MR3515              ; 最終除材動作中
CON
ENDS
;吸着OKの場合は、EM10100をｲﾝｸﾘﾒﾝﾄし、
;11以上の場合は、1STの終了→ｲﾝﾃﾞｯｸｽへ動作完了を出す
;10未満の場合は、次のﾜｰｸ受け取りへ
STG @MR3401
MPS
AND= EM40100 #1          ; 除材ﾎﾟｼﾞｼｮﾝ
MPS
AND= #1 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12001              ; INDEX_治具1 ﾜｰｸ有無-1
MRD
AND= #2 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12101              ; INDEX_治具2 ﾜｰｸ有無-1
MRD
AND= #3 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12201              ; INDEX_治具3 ﾜｰｸ有無-1
MPP
AND= #4 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12301              ; INDEX_治具4 ﾜｰｸ有無-1
MRD
AND= EM40100 #2          ; 除材ﾎﾟｼﾞｼｮﾝ
MPS
AND= #1 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12002              ; INDEX_治具1 ﾜｰｸ有無-2
MRD
AND= #2 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12102              ; INDEX_治具2 ﾜｰｸ有無-2
MRD
AND= #3 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12202              ; INDEX_治具3 ﾜｰｸ有無-2
MPP
AND= #4 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12302              ; INDEX_治具4 ﾜｰｸ有無-2
MRD
AND= EM40100 #3          ; 除材ﾎﾟｼﾞｼｮﾝ
MPS
AND= #1 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12003              ; INDEX_治具1 ﾜｰｸ有無-3
MRD
AND= #2 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12103              ; INDEX_治具2 ﾜｰｸ有無-3
MRD
AND= #3 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12203              ; INDEX_治具3 ﾜｰｸ有無-3
MPP
AND= #4 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12303              ; INDEX_治具4 ﾜｰｸ有無-3
MRD
AND= EM40100 #4          ; 除材ﾎﾟｼﾞｼｮﾝ
MPS
AND= #1 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12004              ; INDEX_治具1 ﾜｰｸ有無-4
MRD
AND= #2 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12104              ; INDEX_治具2 ﾜｰｸ有無-4
MRD
AND= #3 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12204              ; INDEX_治具3 ﾜｰｸ有無-4
MPP
AND= #4 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12304              ; INDEX_治具4 ﾜｰｸ有無-4
MRD
AND= EM40100 #5          ; 除材ﾎﾟｼﾞｼｮﾝ
MPS
AND= #1 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12005              ; INDEX_治具1 ﾜｰｸ有無-5
MRD
AND= #2 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12105              ; INDEX_治具2 ﾜｰｸ有無-5
MRD
AND= #3 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12205              ; INDEX_治具3 ﾜｰｸ有無-5
MPP
AND= #4 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12305              ; INDEX_治具4 ﾜｰｸ有無-5
MRD
AND= EM40100 #6          ; 除材ﾎﾟｼﾞｼｮﾝ
MPS
AND= #1 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12006              ; INDEX_治具1 ﾜｰｸ有無-6
MRD
AND= #2 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12106              ; INDEX_治具2 ﾜｰｸ有無-6
MRD
AND= #3 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12206              ; INDEX_治具3 ﾜｰｸ有無-6
MPP
AND= #4 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12306              ; INDEX_治具4 ﾜｰｸ有無-6
MRD
AND= EM40100 #7          ; 除材ﾎﾟｼﾞｼｮﾝ
MPS
AND= #1 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12007              ; INDEX_治具1 ﾜｰｸ有無-7
MRD
AND= #2 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12107              ; INDEX_治具2 ﾜｰｸ有無-7
MRD
AND= #3 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12207              ; INDEX_治具3 ﾜｰｸ有無-7
MPP
AND= #4 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12307              ; INDEX_治具4 ﾜｰｸ有無-7
MRD
AND= EM40100 #8          ; 除材ﾎﾟｼﾞｼｮﾝ
MPS
AND= #1 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12008              ; INDEX_治具1 ﾜｰｸ有無-8
MRD
AND= #2 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12108              ; INDEX_治具2 ﾜｰｸ有無-8
MRD
AND= #3 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12208              ; INDEX_治具3 ﾜｰｸ有無-8
MPP
AND= #4 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12308              ; INDEX_治具4 ﾜｰｸ有無-8
MRD
AND= EM40100 #9          ; 除材ﾎﾟｼﾞｼｮﾝ
MPS
AND= #1 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12009              ; INDEX_治具1 ﾜｰｸ有無-9
MRD
AND= #2 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12109              ; INDEX_治具2 ﾜｰｸ有無-9
MRD
AND= #3 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12209              ; INDEX_治具3 ﾜｰｸ有無-9
MPP
AND= #4 EM31501          ; インデックス治具NO
DW #0 EM31500            ; ﾜｰｸ情報1
CON
@DEC DM29000             ; 装置内ﾜｰｸ個数
CON
RES LR12309              ; INDEX_治具4 ﾜｰｸ有無-9
MPP
TMR @5 #1
CON
AND @T5
JMP @MR3403
STG @MR3403
@INC EM40100             ; 除材ﾎﾟｼﾞｼｮﾝ
CON
TMR @6 #1
CON
AND @T6
JMP @MR3404
STG @MR3404
MPS
AND>= EM40100 #11        ; 除材ﾎﾟｼﾞｼｮﾝ
ENDS
MPP
AND>= #10 EM40100        ; 除材ﾎﾟｼﾞｼｮﾝ
JMP @MR3006
STG @MR3500              ; 除材終了動作
ANB MR10011              ; ﾌｨﾙﾑ受けｾｯﾄ中
JMP @MR3501
STG @MR3501
RES MR11414              ; 除材側  吸着治具 上昇
CON
SET MR11415              ; 除材側  吸着治具 下降
CON
MPS
LDB MR7901               ; 除材側  吸着治具 下降ｴﾗｰ
ANB R7900                ; 除材側  吸着治具 上限
AND R7901                ; 除材側  吸着治具 下限
ANL
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
JMP @MR3502
MPP
LD MR7901                ; 除材側  吸着治具 下降ｴﾗｰ
AND R41203               ; TASK3  PAUSE
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR3502
MPS
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
SET @MR5300              ; 除材終了動作
CON
JMP @MR3900
MPP
ANB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ENDS
;Auto終了処理
STG @MR3900
ANB @MR001               ; TASK3 ERROR
MPS
LDB R41203               ; TASK3  PAUSE
AND @MR5300              ; 除材終了動作
ANL
SET MR24904              ; 4ST　動作完了
CON
RES @MR5300              ; 除材終了動作
CON
JMP @MR3000              ; AUTO Main1
MPP
AND R41203               ; TASK3  PAUSE
SET @MR1900              ; Main1 HALT許可
STG @MR3915              ; AUTO END
JMP LR603                ; _Grp1_Task3_Fin.STG
;<h1/>Maintenance
;[本STG内容]
;・各TaskのMAINTE動作を記述して下さい
;・動作ﾓｰﾄﾞは「MAINTEAC*」に格納されています(1〜32)
;・動作終了時は@MR2915にJMPして下さい
STG LR5603               ; _Grp1_Task3_MAINTE.STG
JMP @MR2000              ; Mainte
STG @MR2000              ; Mainte
JMP @MR2100
STG @MR2100
SET MR23914              ; ﾒﾝﾃﾅﾝｽ中
CON
JMP @MR2101
STG @MR2101
LD> #2000 DM3000         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR> DM3000 #2118         ; _MainTP　表示中ﾍﾟｰｼﾞNo
LD<= #2000 DM3000        ; _MainTP　表示中ﾍﾟｰｼﾞNo
AND<= DM3000 #2118       ; _MainTP　表示中ﾍﾟｰｼﾞNo
ORL
ANL
MPS
AND R41203               ; TASK3  PAUSE
SET @MR1900              ; Main1 HALT許可
MRD
ANB R41203               ; TASK3  PAUSE
MPS
LD= DM4110 #9            ; _Group1　ﾒﾝﾃ動作番号
OR= DM4110 #10           ; _Group1　ﾒﾝﾃ動作番号
ANL
DW #1 DM35020            ; 99_ﾀﾞﾐｰﾜｰｸ　1_良品ﾜｰｸ
CON
LDA DM25028
CON
STA DM35010              ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
CON
JMP @MR2700              ; 除材動作開始
MRD
LD= DM4110 #25           ; _Group1　ﾒﾝﾃ動作番号
AND R45015               ; 単動終了
ANL
JMP @MR2915              ; Mainte END
MRD
LD= DM4110 #26           ; _Group1　ﾒﾝﾃ動作番号
AND R44914               ; *Group3　ｴﾘｱｾﾝｻ継続実行SW2ﾗﾝﾌﾟ
ANL
JMP @MR2915              ; Mainte END
MPP
AND= DM4110 #11          ; _Group1　ﾒﾝﾃ動作番号
DW #99 DM35020           ; 99_ﾀﾞﾐｰﾜｰｸ　1_良品ﾜｰｸ
CON
LDA DM25028
CON
STA DM35010              ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
CON
JMP @MR2700              ; 除材動作開始
MPP
AND R47800               ; _Group1　ﾒﾝﾃ動作定停止移行中
JMP @MR2110
STG @MR2700              ; 除材動作開始
ANB @MR2701              ; 除材動作中
SET @MR2701              ; 除材動作中
CON
JMP @MR2703
STG @MR2703
MPS
MSTRT SELECT_POST #1 #3 #0 @MR2704
MPP
AND @MR2704
JMP @MR2705
STG @MR2705
MPS
ANB R003                 ; ｽﾄｯﾌﾟSW
RES @MR2704
CON
SET @MR4600              ; 除材処理
CON
JMP @MR2706
MPP
AND R003                 ; ｽﾄｯﾌﾟSW
RES @MR2704
CON
RES @MR2701              ; 除材動作中
CON
JMP @MR2110
STG @MR2706
AND @MR4601              ; 除材処理完了
DW #1 DM35020            ; 99_ﾀﾞﾐｰﾜｰｸ　1_良品ﾜｰｸ
CON
RES @MR4601              ; 除材処理完了
CON
RES @MR2701              ; 除材動作中
CON
JMP @MR2108
LD CR2002                ; 常時ON
MC
LD MR23914               ; ﾒﾝﾃﾅﾝｽ中
LD= DM3000 #2010         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2011         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2012         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2016         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2017         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
MPS
LDP MR2707               ; 除材ﾊﾝﾄﾞ 吸着ON SW
ANB MR2708               ; 除材ﾊﾝﾄﾞ 吸着OFF SW
ANB MR2709               ; 除材ﾊﾝﾄﾞ 破壊ON SW
ANL
SET MR10606              ; 除材ﾊﾝﾄﾞ 吸着ON
CON
RES MR10607              ; 除材ﾊﾝﾄﾞ 吸着OFF
CON
RES MR10608              ; 除材ﾊﾝﾄﾞ 破壊ON
CON
RES MR15300              ; 除材ﾊﾝﾄﾞ吸着OFF
MRD
LDP MR2708               ; 除材ﾊﾝﾄﾞ 吸着OFF SW
ANB MR2707               ; 除材ﾊﾝﾄﾞ 吸着ON SW
ANB MR2709               ; 除材ﾊﾝﾄﾞ 破壊ON SW
ANL
RES MR10606              ; 除材ﾊﾝﾄﾞ 吸着ON
CON
SET MR10607              ; 除材ﾊﾝﾄﾞ 吸着OFF
CON
RES MR10608              ; 除材ﾊﾝﾄﾞ 破壊ON
CON
SET MR15300              ; 除材ﾊﾝﾄﾞ吸着OFF
MPP
LDP MR2709               ; 除材ﾊﾝﾄﾞ 破壊ON SW
ANB MR2707               ; 除材ﾊﾝﾄﾞ 吸着ON SW
ANB MR2708               ; 除材ﾊﾝﾄﾞ 吸着OFF SW
ANL
SET MR12812              ; 除材吸着ﾊﾝﾄﾞ 破壊確認開始
CON
SET @MR2111
STG @MR2111
AND MR12813              ; 除材吸着ﾊﾝﾄﾞ 吸着破壊OK
ZRES MR12812 MR12815     ; 除材吸着ﾊﾝﾄﾞ 破壊確認開始
CON
ENDS
LD MR23914               ; ﾒﾝﾃﾅﾝｽ中
LD= DM3000 #2010         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2011         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2012         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2016         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2017         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
LD MR001                 ; ｲﾝﾃﾞｯｸｽ原点復帰完了
OR CR2002                ; 常時ON
ANL
MPS
AND MR407                ; 全ﾜｰｸｾｯﾄ用圧力計　破壊ON
MPS
LDP MR2200               ; 除材 仮吸着 吸着JIG下降 SW
ANB MR2201               ; 除材 仮吸着 吸着JIG上昇 SW
ANL
RES MR11414              ; 除材側  吸着治具 上昇
CON
SET MR11415              ; 除材側  吸着治具 下降
MPP
LDP MR2201               ; 除材 仮吸着 吸着JIG上昇 SW
ANB MR2200               ; 除材 仮吸着 吸着JIG下降 SW
ANL
RES MR11415              ; 除材側  吸着治具 下降
CON
SET MR11414              ; 除材側  吸着治具 上昇
MRD
LD R7900                 ; 除材側  吸着治具 上限
OR CR2002                ; 常時ON
ANL
MPS
LDP MR2300               ; 除材 仮吸着 ﾜｰｸ1 吸着ON SW
ANB MR2301               ; 除材 仮吸着 ﾜｰｸ1 吸着OFF SW
ANB MR2302               ; 除材 仮吸着 ﾜｰｸ1 破壊ON SW
ANL
SET MR11000              ; 除材側1 吸着ON
CON
RES MR11001              ; 除材側1 吸着OFF
CON
RES MR11002              ; 除材側1 破壊ON
MRD
LDP MR2303               ; 除材 仮吸着 ﾜｰｸ2 吸着ON SW
ANB MR2304               ; 除材 仮吸着 ﾜｰｸ2 吸着OFF SW
ANB MR2305               ; 除材 仮吸着 ﾜｰｸ2 破壊ON SW
ANL
SET MR11003              ; 除材側2 吸着ON
CON
RES MR11004              ; 除材側2 吸着OFF
CON
RES MR11005              ; 除材側2 破壊ON
MRD
LDP MR2306               ; 除材 仮吸着 ﾜｰｸ3 吸着ON SW
ANB MR2307               ; 除材 仮吸着 ﾜｰｸ3 吸着OFF SW
ANB MR2308               ; 除材 仮吸着 ﾜｰｸ3 破壊ON SW
ANL
SET MR11006              ; 除材側3 吸着ON
CON
RES MR11007              ; 除材側3 吸着OFF
CON
RES MR11008              ; 除材側3 破壊ON
MRD
LDP MR2309               ; 除材 仮吸着 ﾜｰｸ4 吸着ON SW
ANB MR2310               ; 除材 仮吸着 ﾜｰｸ4 吸着OFF SW
ANB MR2311               ; 除材 仮吸着 ﾜｰｸ4 破壊ON SW
ANL
SET MR11009              ; 除材側4 吸着ON
CON
RES MR11010              ; 除材側4 吸着OFF
CON
RES MR11011              ; 除材側4 破壊ON
MRD
LDP MR2312               ; 除材 仮吸着 ﾜｰｸ5 吸着ON SW
ANB MR2313               ; 除材 仮吸着 ﾜｰｸ5 吸着OFF SW
ANB MR2314               ; 除材 仮吸着 ﾜｰｸ5 破壊ON SW
ANL
SET MR11012              ; 除材側5 吸着ON
CON
RES MR11013              ; 除材側5 吸着OFF
CON
RES MR11014              ; 除材側5 破壊ON
MRD
LDP MR2315               ; 除材 仮吸着 ﾜｰｸ6 吸着ON SW
ANB MR2400               ; 除材 仮吸着 ﾜｰｸ6 吸着OFF SW
ANB MR2401               ; 除材 仮吸着 ﾜｰｸ6 破壊ON SW
ANL
SET MR11100              ; 除材側6 吸着ON
CON
RES MR11101              ; 除材側6 吸着OFF
CON
RES MR11102              ; 除材側6 破壊ON
MRD
LDP MR2402               ; 除材 仮吸着 ﾜｰｸ7 吸着ON SW
ANB MR2403               ; 除材 仮吸着 ﾜｰｸ7 吸着OFF SW
ANB MR2404               ; 除材 仮吸着 ﾜｰｸ7 破壊ON SW
ANL
SET MR11103              ; 除材側7 吸着ON
CON
RES MR11104              ; 除材側7 吸着OFF
CON
RES MR11105              ; 除材側7 破壊ON
MRD
LDP MR2405               ; 除材 仮吸着 ﾜｰｸ8 吸着ON SW
ANB MR2406               ; 除材 仮吸着 ﾜｰｸ8 吸着OFF SW
ANB MR2407               ; 除材 仮吸着 ﾜｰｸ8 破壊ON SW
ANL
SET MR11106              ; 除材側8 吸着ON
CON
RES MR11107              ; 除材側8 吸着OFF
CON
RES MR11108              ; 除材側8 破壊ON
MRD
LDP MR2408               ; 除材 仮吸着 ﾜｰｸ9 吸着ON SW
ANB MR2409               ; 除材 仮吸着 ﾜｰｸ9 吸着OFF SW
ANB MR2410               ; 除材 仮吸着 ﾜｰｸ9 破壊ON SW
ANL
SET MR11109              ; 除材側9 吸着ON
CON
RES MR11110              ; 除材側9 吸着OFF
CON
RES MR11111              ; 除材側9 破壊ON
MRD
LDP MR2411               ; 除材 仮吸着 ﾜｰｸ10 吸着ON SW
ANB MR2412               ; 除材 仮吸着 ﾜｰｸ10 吸着OFF SW
ANB MR2413               ; 除材 仮吸着 ﾜｰｸ10 破壊ON SW
ANL
SET MR11112              ; 除材側10 吸着ON
CON
RES MR11113              ; 除材側10 吸着OFF
CON
RES MR11114              ; 除材側10 破壊ON
MRD
LDB MR2300               ; 除材 仮吸着 ﾜｰｸ1 吸着ON SW
ANP MR2301               ; 除材 仮吸着 ﾜｰｸ1 吸着OFF SW
ANB MR2302               ; 除材 仮吸着 ﾜｰｸ1 破壊ON SW
ANL
RES MR11000              ; 除材側1 吸着ON
CON
SET MR11001              ; 除材側1 吸着OFF
CON
RES MR11002              ; 除材側1 破壊ON
MRD
LDB MR2303               ; 除材 仮吸着 ﾜｰｸ2 吸着ON SW
ANP MR2304               ; 除材 仮吸着 ﾜｰｸ2 吸着OFF SW
ANB MR2305               ; 除材 仮吸着 ﾜｰｸ2 破壊ON SW
ANL
RES MR11003              ; 除材側2 吸着ON
CON
SET MR11004              ; 除材側2 吸着OFF
CON
RES MR11005              ; 除材側2 破壊ON
MRD
LDB MR2306               ; 除材 仮吸着 ﾜｰｸ3 吸着ON SW
ANP MR2307               ; 除材 仮吸着 ﾜｰｸ3 吸着OFF SW
ANB MR2308               ; 除材 仮吸着 ﾜｰｸ3 破壊ON SW
ANL
RES MR11006              ; 除材側3 吸着ON
CON
SET MR11007              ; 除材側3 吸着OFF
CON
RES MR11008              ; 除材側3 破壊ON
MRD
LDB MR2309               ; 除材 仮吸着 ﾜｰｸ4 吸着ON SW
ANP MR2310               ; 除材 仮吸着 ﾜｰｸ4 吸着OFF SW
ANB MR2311               ; 除材 仮吸着 ﾜｰｸ4 破壊ON SW
ANL
RES MR11009              ; 除材側4 吸着ON
CON
SET MR11010              ; 除材側4 吸着OFF
CON
RES MR11011              ; 除材側4 破壊ON
MRD
LDB MR2312               ; 除材 仮吸着 ﾜｰｸ5 吸着ON SW
ANP MR2313               ; 除材 仮吸着 ﾜｰｸ5 吸着OFF SW
ANB MR2314               ; 除材 仮吸着 ﾜｰｸ5 破壊ON SW
ANL
RES MR11012              ; 除材側5 吸着ON
CON
SET MR11013              ; 除材側5 吸着OFF
CON
RES MR11014              ; 除材側5 破壊ON
MRD
LDB MR2315               ; 除材 仮吸着 ﾜｰｸ6 吸着ON SW
ANP MR2400               ; 除材 仮吸着 ﾜｰｸ6 吸着OFF SW
ANB MR2401               ; 除材 仮吸着 ﾜｰｸ6 破壊ON SW
ANL
RES MR11100              ; 除材側6 吸着ON
CON
SET MR11101              ; 除材側6 吸着OFF
CON
RES MR11102              ; 除材側6 破壊ON
MRD
LDB MR2402               ; 除材 仮吸着 ﾜｰｸ7 吸着ON SW
ANP MR2403               ; 除材 仮吸着 ﾜｰｸ7 吸着OFF SW
ANB MR2404               ; 除材 仮吸着 ﾜｰｸ7 破壊ON SW
ANL
RES MR11103              ; 除材側7 吸着ON
CON
SET MR11104              ; 除材側7 吸着OFF
CON
RES MR11105              ; 除材側7 破壊ON
MRD
LDB MR2405               ; 除材 仮吸着 ﾜｰｸ8 吸着ON SW
ANP MR2406               ; 除材 仮吸着 ﾜｰｸ8 吸着OFF SW
ANB MR2407               ; 除材 仮吸着 ﾜｰｸ8 破壊ON SW
ANL
RES MR11106              ; 除材側8 吸着ON
CON
SET MR11107              ; 除材側8 吸着OFF
CON
RES MR11108              ; 除材側8 破壊ON
MRD
LDB MR2408               ; 除材 仮吸着 ﾜｰｸ9 吸着ON SW
ANP MR2409               ; 除材 仮吸着 ﾜｰｸ9 吸着OFF SW
ANB MR2410               ; 除材 仮吸着 ﾜｰｸ9 破壊ON SW
ANL
RES MR11109              ; 除材側9 吸着ON
CON
SET MR11110              ; 除材側9 吸着OFF
CON
RES MR11111              ; 除材側9 破壊ON
MPP
LDB MR2411               ; 除材 仮吸着 ﾜｰｸ10 吸着ON SW
ANP MR2412               ; 除材 仮吸着 ﾜｰｸ10 吸着OFF SW
ANB MR2413               ; 除材 仮吸着 ﾜｰｸ10 破壊ON SW
ANL
RES MR11112              ; 除材側10 吸着ON
CON
SET MR11113              ; 除材側10 吸着OFF
CON
RES MR11114              ; 除材側10 破壊ON
MRD
LDB MR2300               ; 除材 仮吸着 ﾜｰｸ1 吸着ON SW
ANB MR2301               ; 除材 仮吸着 ﾜｰｸ1 吸着OFF SW
ANP MR2302               ; 除材 仮吸着 ﾜｰｸ1 破壊ON SW
ANL
SET MR11604              ; 除材部ﾜｰｸ1 破壊確認開始
CON
SET @MR2200
MRD
LDB MR2303               ; 除材 仮吸着 ﾜｰｸ2 吸着ON SW
ANB MR2304               ; 除材 仮吸着 ﾜｰｸ2 吸着OFF SW
ANP MR2305               ; 除材 仮吸着 ﾜｰｸ2 破壊ON SW
ANL
SET MR11612              ; 除材部ﾜｰｸ2 破壊確認開始
CON
SET @MR2201
MRD
LDB MR2306               ; 除材 仮吸着 ﾜｰｸ3 吸着ON SW
ANB MR2307               ; 除材 仮吸着 ﾜｰｸ3 吸着OFF SW
ANP MR2308               ; 除材 仮吸着 ﾜｰｸ3 破壊ON SW
ANL
SET MR11704              ; 除材部ﾜｰｸ3 破壊確認開始
CON
SET @MR2202
MRD
LDB MR2309               ; 除材 仮吸着 ﾜｰｸ4 吸着ON SW
ANB MR2310               ; 除材 仮吸着 ﾜｰｸ4 吸着OFF SW
ANP MR2311               ; 除材 仮吸着 ﾜｰｸ4 破壊ON SW
ANL
SET MR11712              ; 除材部ﾜｰｸ4 破壊確認開始
CON
SET @MR2203
MRD
LDB MR2312               ; 除材 仮吸着 ﾜｰｸ5 吸着ON SW
ANB MR2313               ; 除材 仮吸着 ﾜｰｸ5 吸着OFF SW
ANP MR2314               ; 除材 仮吸着 ﾜｰｸ5 破壊ON SW
ANL
SET MR11804              ; 除材部ﾜｰｸ5 破壊確認開始
CON
SET @MR2204
MRD
LDB MR2315               ; 除材 仮吸着 ﾜｰｸ6 吸着ON SW
ANB MR2400               ; 除材 仮吸着 ﾜｰｸ6 吸着OFF SW
ANP MR2401               ; 除材 仮吸着 ﾜｰｸ6 破壊ON SW
ANL
SET MR11812              ; 除材部ﾜｰｸ6 破壊確認開始
CON
SET @MR2205
MRD
LDB MR2402               ; 除材 仮吸着 ﾜｰｸ7 吸着ON SW
ANB MR2403               ; 除材 仮吸着 ﾜｰｸ7 吸着OFF SW
ANP MR2404               ; 除材 仮吸着 ﾜｰｸ7 破壊ON SW
ANL
SET MR11904              ; 除材部ﾜｰｸ7 破壊確認開始
CON
SET @MR2206
MRD
LDB MR2405               ; 除材 仮吸着 ﾜｰｸ8 吸着ON SW
ANB MR2406               ; 除材 仮吸着 ﾜｰｸ8 吸着OFF SW
ANP MR2407               ; 除材 仮吸着 ﾜｰｸ8 破壊ON SW
ANL
SET MR11912              ; 除材部ﾜｰｸ8 破壊確認開始
CON
SET @MR2207
MRD
LDB MR2408               ; 除材 仮吸着 ﾜｰｸ9 吸着ON SW
ANB MR2409               ; 除材 仮吸着 ﾜｰｸ9 吸着OFF SW
ANP MR2410               ; 除材 仮吸着 ﾜｰｸ9 破壊ON SW
ANL
SET MR12004              ; 除材部ﾜｰｸ9 破壊確認開始
CON
SET @MR2208
MPP
LDB MR2411               ; 除材 仮吸着 ﾜｰｸ10 吸着ON SW
ANB MR2412               ; 除材 仮吸着 ﾜｰｸ10 吸着OFF SW
ANP MR2413               ; 除材 仮吸着 ﾜｰｸ10 破壊ON SW
ANL
SET MR12012              ; 除材部ﾜｰｸ10 破壊確認開始
CON
SET @MR2209
STG @MR2200
AND MR11605              ; 除材部ﾜｰｸ1 吸着破壊OK
RES MR11605              ; 除材部ﾜｰｸ1 吸着破壊OK
CON
ENDS
STG @MR2201
AND MR11613              ; 除材部ﾜｰｸ2 吸着破壊OK
RES MR11613              ; 除材部ﾜｰｸ2 吸着破壊OK
CON
ENDS
STG @MR2202
AND MR11705              ; 除材部ﾜｰｸ3 吸着破壊OK
RES MR11705              ; 除材部ﾜｰｸ3 吸着破壊OK
CON
ENDS
STG @MR2203
AND MR11713              ; 除材部ﾜｰｸ4 吸着破壊OK
RES MR11713              ; 除材部ﾜｰｸ4 吸着破壊OK
CON
ENDS
STG @MR2204
AND MR11805              ; 除材部ﾜｰｸ5 吸着破壊OK
RES MR11805              ; 除材部ﾜｰｸ5 吸着破壊OK
CON
ENDS
STG @MR2205
AND MR11813              ; 除材部ﾜｰｸ6 吸着破壊OK
RES MR11813              ; 除材部ﾜｰｸ6 吸着破壊OK
CON
ENDS
STG @MR2206
AND MR11905              ; 除材部ﾜｰｸ7 吸着破壊OK
RES MR11905              ; 除材部ﾜｰｸ7 吸着破壊OK
CON
ENDS
STG @MR2207
AND MR11913              ; 除材部ﾜｰｸ8 吸着破壊OK
RES MR11913              ; 除材部ﾜｰｸ8 吸着破壊OK
CON
ENDS
STG @MR2208
AND MR12005              ; 除材部ﾜｰｸ9 吸着破壊OK
RES MR12005              ; 除材部ﾜｰｸ9 吸着破壊OK
CON
ENDS
STG @MR2209
AND MR12013              ; 除材部ﾜｰｸ10 吸着破壊OK
RES MR12013              ; 除材部ﾜｰｸ10 吸着破壊OK
CON
ENDS
LD MR23914               ; ﾒﾝﾃﾅﾝｽ中
LD= DM3000 #2010         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2011         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2012         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2016         ; _MainTP　表示中ﾍﾟｰｼﾞNo
OR= DM3000 #2017         ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANL
AND MR001                ; ｲﾝﾃﾞｯｸｽ原点復帰完了
OUT @MR2300              ; 全吸着操作用条件1
LD @MR2300               ; 全吸着操作用条件1
MPS
LD= DM35000 #0           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ANP MR2202               ; 除材 仮吸着 全吸着 吸着ON SW
ANB MR2203               ; 除材 仮吸着 全吸着 吸着OFF SW
ANB MR2204               ; 除材 仮吸着 全吸着 破壊ON SW
ANL
SET MR10612              ; ST2ﾜｰｸ吸着 吸着ON
CON
RES MR10613              ; ST2ﾜｰｸ吸着 吸着OFF
CON
RES MR10614              ; ST2ﾜｰｸ吸着 破壊ON
MRD
LD= DM35000 #1           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ANP MR2202               ; 除材 仮吸着 全吸着 吸着ON SW
ANB MR2203               ; 除材 仮吸着 全吸着 吸着OFF SW
ANB MR2204               ; 除材 仮吸着 全吸着 破壊ON SW
ANL
SET MR10700              ; ST3ﾜｰｸ吸着 吸着ON
CON
RES MR10701              ; ST3ﾜｰｸ吸着 吸着OFF
CON
RES MR10702              ; ST3ﾜｰｸ吸着 破壊ON
MRD
LD= DM35000 #2           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ANP MR2202               ; 除材 仮吸着 全吸着 吸着ON SW
ANB MR2203               ; 除材 仮吸着 全吸着 吸着OFF SW
ANB MR2204               ; 除材 仮吸着 全吸着 破壊ON SW
ANL
SET MR10703              ; ST4ﾜｰｸ吸着 吸着ON
CON
RES MR10704              ; ST4ﾜｰｸ吸着 吸着OFF
CON
RES MR10705              ; ST4ﾜｰｸ吸着 破壊ON
MRD
LD= DM35000 #3           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ANP MR2202               ; 除材 仮吸着 全吸着 吸着ON SW
ANB MR2203               ; 除材 仮吸着 全吸着 吸着OFF SW
ANB MR2204               ; 除材 仮吸着 全吸着 破壊ON SW
ANL
SET MR10609              ; ST1ﾜｰｸ吸着 吸着ON
CON
RES MR10610              ; ST1ﾜｰｸ吸着 吸着OFF
CON
RES MR10611              ; ST1ﾜｰｸ吸着 破壊ON
MRD
LD= DM35000 #0           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ANB MR2202               ; 除材 仮吸着 全吸着 吸着ON SW
ANP MR2203               ; 除材 仮吸着 全吸着 吸着OFF SW
ANB MR2204               ; 除材 仮吸着 全吸着 破壊ON SW
ANL
RES MR10612              ; ST2ﾜｰｸ吸着 吸着ON
CON
SET MR10613              ; ST2ﾜｰｸ吸着 吸着OFF
CON
RES MR10614              ; ST2ﾜｰｸ吸着 破壊ON
MRD
LD= DM35000 #1           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ANB MR2202               ; 除材 仮吸着 全吸着 吸着ON SW
ANP MR2203               ; 除材 仮吸着 全吸着 吸着OFF SW
ANB MR2204               ; 除材 仮吸着 全吸着 破壊ON SW
ANL
RES MR10700              ; ST3ﾜｰｸ吸着 吸着ON
CON
SET MR10701              ; ST3ﾜｰｸ吸着 吸着OFF
CON
RES MR10702              ; ST3ﾜｰｸ吸着 破壊ON
MRD
LD= DM35000 #2           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ANB MR2202               ; 除材 仮吸着 全吸着 吸着ON SW
ANP MR2203               ; 除材 仮吸着 全吸着 吸着OFF SW
ANB MR2204               ; 除材 仮吸着 全吸着 破壊ON SW
ANL
RES MR10703              ; ST4ﾜｰｸ吸着 吸着ON
CON
SET MR10704              ; ST4ﾜｰｸ吸着 吸着OFF
CON
RES MR10705              ; ST4ﾜｰｸ吸着 破壊ON
MRD
LD= DM35000 #3           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ANB MR2202               ; 除材 仮吸着 全吸着 吸着ON SW
ANP MR2203               ; 除材 仮吸着 全吸着 吸着OFF SW
ANB MR2204               ; 除材 仮吸着 全吸着 破壊ON SW
ANL
RES MR10609              ; ST1ﾜｰｸ吸着 吸着ON
CON
SET MR10610              ; ST1ﾜｰｸ吸着 吸着OFF
CON
RES MR10611              ; ST1ﾜｰｸ吸着 破壊ON
MRD
LD= DM35000 #0           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ANB MR2202               ; 除材 仮吸着 全吸着 吸着ON SW
ANB MR2203               ; 除材 仮吸着 全吸着 吸着OFF SW
ANP MR2204               ; 除材 仮吸着 全吸着 破壊ON SW
ANL
SET MR12612              ; 給材部ﾃｰﾌﾞﾙ2 破壊確認開始
CON
SET @MR2210
MRD
LD= DM35000 #1           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ANB MR2202               ; 除材 仮吸着 全吸着 吸着ON SW
ANB MR2203               ; 除材 仮吸着 全吸着 吸着OFF SW
ANP MR2204               ; 除材 仮吸着 全吸着 破壊ON SW
ANL
SET MR12704              ; 給材部ﾃｰﾌﾞﾙ3 破壊確認開始
CON
SET @MR2211
MRD
LD= DM35000 #2           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ANB MR2202               ; 除材 仮吸着 全吸着 吸着ON SW
ANB MR2203               ; 除材 仮吸着 全吸着 吸着OFF SW
ANP MR2204               ; 除材 仮吸着 全吸着 破壊ON SW
ANL
SET MR12712              ; 給材部ﾃｰﾌﾞﾙ4 破壊確認開始
CON
SET @MR2212
MPP
LD= DM35000 #3           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ANB MR2202               ; 除材 仮吸着 全吸着 吸着ON SW
ANB MR2203               ; 除材 仮吸着 全吸着 吸着OFF SW
ANP MR2204               ; 除材 仮吸着 全吸着 破壊ON SW
ANL
SET MR12604              ; 給材部ﾃｰﾌﾞﾙ1 破壊確認開始
CON
SET @MR2213
STG @MR2210
AND MR12613              ; 給材部ﾃｰﾌﾞﾙ2 吸着破壊OK
RES MR12613              ; 給材部ﾃｰﾌﾞﾙ2 吸着破壊OK
CON
ENDS
STG @MR2211
AND MR12705              ; 給材部ﾃｰﾌﾞﾙ3 吸着破壊OK
RES MR12705              ; 給材部ﾃｰﾌﾞﾙ3 吸着破壊OK
CON
ENDS
STG @MR2212
AND MR12713              ; 給材部ﾃｰﾌﾞﾙ4 吸着破壊OK
RES MR12713              ; 給材部ﾃｰﾌﾞﾙ4 吸着破壊OK
CON
ENDS
STG @MR2213
AND MR12605              ; 給材部ﾃｰﾌﾞﾙ1 吸着破壊OK
RES MR12605              ; 給材部ﾃｰﾌﾞﾙ1 吸着破壊OK
CON
ENDS
LD CR2002                ; 常時ON
LD= DM35000 #0           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND MR10612              ; ST2ﾜｰｸ吸着 吸着ON
LD= DM35000 #1           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND MR10700              ; ST3ﾜｰｸ吸着 吸着ON
ORL
LD= DM35000 #2           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND MR10703              ; ST4ﾜｰｸ吸着 吸着ON
ORL
LD= DM35000 #3           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND MR10609              ; ST1ﾜｰｸ吸着 吸着ON
ORL
ANL
OUT MR2500               ; 除材 全吸着 吸着ON ﾗﾝﾌﾟ
LD CR2002                ; 常時ON
LD= DM35000 #0           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ANB MR10612              ; ST2ﾜｰｸ吸着 吸着ON
AND MR10613              ; ST2ﾜｰｸ吸着 吸着OFF
ANB MR10614              ; ST2ﾜｰｸ吸着 破壊ON
LD= DM35000 #1           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ANB MR10700              ; ST3ﾜｰｸ吸着 吸着ON
AND MR10701              ; ST3ﾜｰｸ吸着 吸着OFF
ANB MR10702              ; ST3ﾜｰｸ吸着 破壊ON
ORL
LD= DM35000 #2           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ANB MR10703              ; ST4ﾜｰｸ吸着 吸着ON
AND MR10704              ; ST4ﾜｰｸ吸着 吸着OFF
ANB MR10705              ; ST4ﾜｰｸ吸着 破壊ON
ORL
LD= DM35000 #3           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
ANB MR10609              ; ST1ﾜｰｸ吸着 吸着ON
AND MR10610              ; ST1ﾜｰｸ吸着 吸着OFF
ANB MR10611              ; ST1ﾜｰｸ吸着 破壊ON
ORL
ANL
OUT MR2501               ; 除材 全吸着 吸着OFF ﾗﾝﾌﾟ
LD CR2002                ; 常時ON
LD= DM35000 #0           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND MR10614              ; ST2ﾜｰｸ吸着 破壊ON
LD= DM35000 #1           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND MR10702              ; ST3ﾜｰｸ吸着 破壊ON
ORL
LD= DM35000 #2           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND MR10705              ; ST4ﾜｰｸ吸着 破壊ON
ORL
LD= DM35000 #3           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND MR10611              ; ST1ﾜｰｸ吸着 破壊ON
ORL
ANL
OUT MR2502               ; 除材 全吸着 破壊ON ﾗﾝﾌﾟ
LD CR2002                ; 常時ON
LD= DM35000 #0           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND R7504                ; ﾜｰｸｾｯﾄ部 ST2 圧力1
LD= DM35000 #1           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND R7506                ; ﾜｰｸｾｯﾄ部 ST3 圧力1
ORL
LD= DM35000 #2           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND R7508                ; ﾜｰｸｾｯﾄ部 ST4 圧力1
ORL
LD= DM35000 #3           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND R7502                ; ﾜｰｸｾｯﾄ部 ST1 圧力1
ORL
ANL
OUT MR2503               ; 除材 全吸着 圧力ｾﾝｻOUT1 ﾗﾝﾌﾟ
LD CR2002                ; 常時ON
LD= DM35000 #0           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND R7505                ; ﾜｰｸｾｯﾄ部 ST2 圧力2
LD= DM35000 #1           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND R7507                ; ﾜｰｸｾｯﾄ部 ST3 圧力2
ORL
LD= DM35000 #2           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND R7509                ; ﾜｰｸｾｯﾄ部 ST4 圧力2
ORL
LD= DM35000 #3           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND R7503                ; ﾜｰｸｾｯﾄ部 ST1 圧力2
ORL
ANL
OUT MR2504               ; 除材 全吸着 圧力ｾﾝｻOUT2 ﾗﾝﾌﾟ
LD CR2002                ; 常時ON
ANB MR19201              ; RB8:動作中
ANB MR19401              ; RB9:動作中
ANB MR18801              ; RB3:動作中
AND MR2907               ; 搬送X軸RB原点復帰済み ﾗﾝﾌﾟ
AND MR2908               ; 搬送Y軸RB原点復帰済み ﾗﾝﾌﾟ
AND MR3113               ; 搬送θ軸RB原点復帰済み ﾗﾝﾌﾟ
ANB @MR2810              ; ｱﾗｲﾒﾝﾄ動作中
ANB @R700
ANP MR3601               ; XYθｱﾗｲﾒﾝﾄ移動 SW
SET MR3603               ; θ軸ｱﾗｲﾒﾝﾄ中
CON
SET @R700
CON
SET @R702
STG @R702
DW #20 DM11088           ; RB3 θ軸　目標ﾎﾟｲﾝﾄ番号
CON
LDA.L EM2120             ; RB3 P1 目標位置（下位bit）
CON
ADD.L EM2284             ; ｱﾗｲﾒﾝﾄ θ軸移動量
CON
STA.L DM10740            ; MSEP Axis-4 目標位置（下位8bit）
CON
LDA DM418
CON
STA DM10744              ; MSEP Axis-4 速度
CON
TMR @20 #5
CON
AND @T20
JMP @R703
STG @R703
SET @R105                ; RB3動作開始
CON
JMP @R704
STG @R704
AND @R106                ; RB3動作完了
RES @R106                ; RB3動作完了
CON
JMP @R705
STG @R705
RES MR3603               ; θ軸ｱﾗｲﾒﾝﾄ中
CON
ENDS
LD CR2002                ; 常時ON
ANB MR19201              ; RB8:動作中
ANB MR19401              ; RB9:動作中
ANB MR18801              ; RB3:動作中
AND MR2907               ; 搬送X軸RB原点復帰済み ﾗﾝﾌﾟ
AND MR2908               ; 搬送Y軸RB原点復帰済み ﾗﾝﾌﾟ
AND MR3113               ; 搬送θ軸RB原点復帰済み ﾗﾝﾌﾟ
ANB @MR2810              ; ｱﾗｲﾒﾝﾄ動作中
ANP MR3602               ; XYｱﾗｲﾒﾝﾄ移動 SW
SET MR3604               ; XY軸ｱﾗｲﾒﾝﾄ中
CON
SET @R707
STG @R707
DW #20 DM11128           ; RB8 X軸　目標ﾎﾟｲﾝﾄ番号
CON
DW #18 DM11148           ; RB9 Y軸　目標ﾎﾟｲﾝﾄ番号
CON
LDA.L EM2186             ; RB8 P3 目標位置（下位bit）
CON
ADD.L EM2280             ; ｱﾗｲﾒﾝﾄ X軸移動量
CON
STA.L DM10772            ; SCON-1 目標位置（下位8bit）
CON
LDA.L EM2243             ; RB9 P12 目標位置（下位bit）
CON
ADD.L EM2282             ; ｱﾗｲﾒﾝﾄ Y軸移動量
CON
STA.L DM10780            ; SCON-2 目標位置（下位8bit）
CON
LDA DM414                ; _機種分類1　機種別ﾃﾞｰﾀ8
CON
STA DM10776              ; SCON-1 速度
CON
LDA DM416
CON
STA DM10784              ; SCON-2 速度
CON
TMR @21 #5
CON
AND @T21
JMP @R708
STG @R708
SET @R010                ; RB8動作開始
CON
SET @R005                ; RB9動作開始
CON
JMP @R709
STG @R709
AND @R011                ; RB8動作完了
AND @R006                ; RB9動作完了
RES @R011                ; RB8動作完了
CON
RES @R006                ; RB9動作完了
CON
JMP @R710
STG @R710
RES MR3604               ; XY軸ｱﾗｲﾒﾝﾄ中
CON
RES @R700
CON
ENDS
LD= DM11124 #3           ; RB8 現在ﾎﾟｼﾞｼｮﾝ番号
OR= DM11124 #21          ; RB8 現在ﾎﾟｼﾞｼｮﾝ番号
OR= DM11124 #20          ; RB8 現在ﾎﾟｼﾞｼｮﾝ番号
ANB MR19201              ; RB8:動作中
AND MR2907               ; 搬送X軸RB原点復帰済み ﾗﾝﾌﾟ
ANB @MR2810              ; ｱﾗｲﾒﾝﾄ動作中
ANP MR3400               ; 搬送X軸RB 下流移載移動 SW
SET @R500
STG @R500
LDA.L DM10572            ; SCON-1 現在位置（下位8bit）
CON
ADD.L DM7000             ; 装置基礎ﾃﾞｰﾀ1
CON
ADD.L DM7008             ; 装置基礎ﾃﾞｰﾀ5
CON
STA.L DM10772            ; SCON-1 目標位置（下位8bit）
CON
LDA DM7004               ; 装置基礎ﾃﾞｰﾀ3
CON
STA DM10776              ; SCON-1 速度
CON
DW #21 DM11128           ; RB8 X軸　目標ﾎﾟｲﾝﾄ番号
CON
JMP @R501
STG @R501
SET @R010                ; RB8動作開始
CON
JMP @R502
STG @R502
AND @R011                ; RB8動作完了
ENDS
MCR
STG @MR2108
ANB R39104               ; SELECT_Y_N Interlock
SET R39104               ; SELECT_Y_N Interlock
CON
DW #7 @DM21              ; ScreenNo /SELECT_Y_N
CON
DW #0 @DM22              ; Bz_Use /SELECT_Y_N
CON
SET @MR300               ; Task3 SELECT_Y_N
CON
JMP @MR2109
STG @MR2109
AND @MR301               ; Task3 Y/N END
RES @MR301               ; Task3 Y/N END
CON
RES R39104               ; SELECT_Y_N Interlock
CON
MPS
AND @MR306               ; Task3 Y/N
JMP @MR2000              ; Mainte
MPP
ANB @MR306               ; Task3 Y/N
JMP @MR2110
STG @MR2110
MCALL HOLD_REQUEST #1
JMP @MR2915              ; Mainte END
STG @MR2915              ; Mainte END
MPS
MCALL MODE_INDI #2
MPP
ANB @MR004               ; ﾌﾘｯｶ
MPS
ANB R41203               ; TASK3  PAUSE
RES MR23914              ; ﾒﾝﾃﾅﾝｽ中
CON
SET R46103               ; _停止中　ﾓｰﾄﾞﾌﾗｸﾞ
CON
JMP LR603                ; _Grp1_Task3_Fin.STG
MPP
AND R41203               ; TASK3  PAUSE
SET @MR1900              ; Main1 HALT許可
;<h1/>ERROR
;//*Error Sample
;[使用方法]
;・@DM1にERROR番号を代入
;・@DM2にSensor番号を代入(ｾﾝｻ無しｴﾗｰの場合は0)
;・@DM9に復帰SW番号(1〜9、0はSW無し)をdegit単位で4桁入力
;・Task0 ERROR SET(@MR100)でｴﾗｰ処理開始
;・ｴﾗｰ復帰でTask0 ERROR END(@MR101)がON
;・押下復帰SW番号により左から対応した@MR105,@MR106,@MR107,@MR108のいずれかがON
;・上記ONが成立したらJMPするSTGに対応する処理を記述
;MyTask Error Process Substance/ｴﾗｰ処理実体
STG @MR100               ; Task3 ERROR
ANB R39002               ; ERROR_DISP Busy
MPS
ZRES @MR105 @MR108       ; SW1  SW4
CON
LDA @DM9                 ; ReturnSW /ERROR_DISP
CON
TBCD
CON
STA @DM10
CON
DISN @DM10 @DM3 #4
MRD
DW #3 @DM0               ; TaskNo /ERROR_DISP
CON
BMOV @DM0 DM60000 #7     ; TaskNo /ERROR_DISP  TaskNo /ERROR_DISP
MPP
SET R39000               ; ERROR_DISP Start
CON
SET @MR102               ; Task3 ERROR Busy
CON
JMP @MR103
STG @MR103
AND R39002               ; ERROR_DISP Busy
AND= DM60008 @DM1        ; ReturnNo /ERROR_DISP  ErrorNo /ERROR_DISP
MPS
AND= DM60007 @DM6        ; ReturnSW /ERROR_DISP
SET @MR105               ; SW1
CON
JMP @MR104
MRD
AND= DM60007 @DM5        ; ReturnSW /ERROR_DISP
SET @MR106               ; SW2
CON
JMP @MR104
MRD
AND= DM60007 @DM4        ; ReturnSW /ERROR_DISP
SET @MR107               ; SW3
CON
JMP @MR104
MPP
AND= DM60007 @DM3        ; ReturnSW /ERROR_DISP
SET @MR108               ; SW4
CON
JMP @MR104
STG @MR104
ANB R39002               ; ERROR_DISP Busy
RES @MR102               ; Task3 ERROR Busy
CON
SET @MR101               ; Task3 ERROR_End
CON
ENDS
;<h1/>SELECT_ACT
;//*Select_ACT Sample
;画面番号33をﾌﾞｻﾞｰ有りで選択SW番号を左から#5,#10,#0(無し),#34の並びで表示する
STG @MR4104
ANB R39204               ; SELECT_ACT Interlock
SET R39204               ; SELECT_ACT Interlock
CON
MPS
DW #33 @DM31             ; ScreenNo /SELECT_ACT
CON
DW #1 @DM32              ; Bz_Use /SELECT_ACT
CON
DW #5 @DM33              ; SW1_No /SELECT_ACT
CON
DW #10 @DM34             ; SW2_No /SELECT_ACT
CON
DW #0 @DM35              ; SW3_No /SELECT_ACT
CON
DW #34 @DM36             ; SW4_No /SELECT_ACT
MPP
SET @MR200               ; Task3 SELECT_ACT
CON
JMP @MR4105
STG @MR4105
AND @MR201               ; Task3 SEL_ACT END
RES @MR201               ; Task3 SEL_ACT END
CON
RES R39204               ; SELECT_ACT Interlock
CON
MPS
AND @MR205               ; SW1
JMP @MR4106
MRD
AND @MR206               ; SW2
JMP @MR4107
MRD
AND @MR207               ; SW3
JMP @MR4108
MPP
AND @MR208               ; SW4
JMP @MR4109
;Select_ACT Sample *//
;MyTask Select_ACT Process Substance/SELECT_ACT処理実体
STG @MR200               ; Task3 SELECT_ACT
ANB R39202               ; SELECT_ACT Busy
MPS
ZRES @MR205 @MR208       ; SW1  SW4
CON
DW #3 @DM30              ; TaskNo /SELECT_ACT
CON
BMOV @DM30 DM60030 #7    ; TaskNo /SELECT_ACT
MPP
SET R39200               ; SELECT_ACT Start
CON
SET @MR202               ; Task3 SEL_ACT Busy
CON
JMP @MR203
STG @MR203
AND R39202               ; SELECT_ACT Busy
AND<> DM60037 #0         ; SelectSW /SELECT_ACT
MPS
AND= DM60037 #1          ; SelectSW /SELECT_ACT
SET @MR205               ; SW1
CON
JMP @MR204
MRD
AND= DM60037 #2          ; SelectSW /SELECT_ACT
SET @MR206               ; SW2
CON
JMP @MR204
MRD
AND= DM60037 #3          ; SelectSW /SELECT_ACT
SET @MR207               ; SW3
CON
JMP @MR204
MPP
AND= DM60037 #4          ; SelectSW /SELECT_ACT
SET @MR208               ; SW4
CON
JMP @MR204
STG @MR204
ANB R39202               ; SELECT_ACT Busy
RES @MR202               ; Task3 SEL_ACT Busy
CON
SET @MR201               ; Task3 SEL_ACT END
CON
ENDS
;<h1/>SELECT_Y_N
;//*Select_Y_N Sample
STG @MR4203
ANB R39104               ; SELECT_Y_N Interlock
SET R39104               ; SELECT_Y_N Interlock
CON
DW #7 @DM21              ; ScreenNo /SELECT_Y_N
CON
DW #0 @DM22              ; Bz_Use /SELECT_Y_N
CON
SET @MR300               ; Task3 SELECT_Y_N
CON
JMP @MR4204
STG @MR4204
AND @MR301               ; Task3 Y/N END
RES @MR301               ; Task3 Y/N END
CON
RES R39104               ; SELECT_Y_N Interlock
CON
MPS
AND @MR306               ; Task3 Y/N
JMP @MR4205
MPP
ANB @MR306               ; Task3 Y/N
JMP @MR4206
;*Select_Y_N Sample//
;MyTask Select_Y_N Process Substance/SELECT_Y_N処理実体
STG @MR300               ; Task3 SELECT_Y_N
ANB R39102               ; SELECT_Y_N Busy
MPS
ZRES @MR306 @MR307       ; Task3 Y/N
CON
DW #3 @DM20              ; TaskNo /SELECT_Y_N
CON
BMOV @DM20 DM60020 #3    ; TaskNo /SELECT_Y_N  TaskNo /SELECT_Y_N
MPP
SET R39100               ; SELECT_Y_N Start
CON
SET @MR302               ; Task3 Y_N Busy
CON
JMP @MR303
STG @MR303
AND R39102               ; SELECT_Y_N Busy
MPS
AND= DM60023 #1          ; Y_N /SELECT_Y_N
SET @MR306               ; Task3 Y/N
CON
JMP @MR304
MPP
AND= DM60023 #2          ; Y_N /SELECT_Y_N
RES @MR306               ; Task3 Y/N
CON
JMP @MR304
STG @MR304
ANB R39102               ; SELECT_Y_N Busy
RES @MR302               ; Task3 Y_N Busy
CON
SET @MR301               ; Task3 Y/N END
CON
ENDS
;<h1/>TIMEUP_ERROR
;//*TIMEUP_ERROR Sample
;ｻﾝﾌﾟﾙｾﾝｻ:MR5000=ON AND MR5001 = OFF のいずれかが5sﾀｲﾑｱｯﾌﾟしたらTIMEUP_ERROR出力
;ｴﾗｰ復帰後、再度ｾﾝｻ確認
;TIMEUP_ERROR Sample *//
;MyTask TIMEUP_ERROR Process Substance/TIMEUP_ERROR処理実体
STG @MR400               ; Task3 TIMEUP_ERR
ANB R39302               ; TIMEUP_ERR Busy
MPS
DW #3 @DM40              ; TaskNo /TIMEUP_ERR
CON
BMOV @DM40 DM60040 #2    ; TaskNo /TIMEUP_ERR  TaskNo /TIMEUP_ERR
MPP
SET R39300               ; TIMEUP_ERR Start
CON
SET @MR402               ; Task3 TIMEUP Busy
CON
JMP @MR403
STG @MR403
AND R39302               ; TIMEUP_ERR Busy
JMP @MR404
STG @MR404
ANB R39302               ; TIMEUP_ERR Busy
RES @MR402               ; Task3 TIMEUP Busy
CON
SET @MR401               ; Task3 TIMEUP_END
CON
ENDS
;<h1/>Subroutines/ｻﾌﾞﾙｰﾁﾝ
;[記述方法]
;・ｻﾌﾞﾙｰﾁﾝは本ﾌﾞｯｸﾏｰｸから下に記述していって下さい
;・ｻﾌﾞﾙｰﾁﾝは必ずﾌﾞｯｸﾏｰｸを挿入して処理内容を明確にする事
;<h1/>ｲﾝﾃﾞｯｸｽ部除材準備ｻﾌﾞﾙｰﾁﾝ
STG @MR4500              ; 除材準備開始
JMP @MR4503
STG @MR4503
RES MR11415              ; 除材側  吸着治具 下降
CON
SET MR11414              ; 除材側  吸着治具 上昇
CON
MPS
LDB MR7900               ; 除材側  吸着治具 上昇ｴﾗｰ
ANB R7901                ; 除材側  吸着治具 下限
AND R7900                ; 除材側  吸着治具 上限
ANL
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
JMP @MR4504
MPP
AND MR7900               ; 除材側  吸着治具 上昇ｴﾗｰ
JMP @MR4508
STG @MR4508
RES MR11414              ; 除材側  吸着治具 上昇
CON
SET MR11415              ; 除材側  吸着治具 下降
CON
MPS
ANB MR7900               ; 除材側  吸着治具 上昇ｴﾗｰ
JMP @MR4503
MPP
LD MR7900                ; 除材側  吸着治具 上昇ｴﾗｰ
AND R41203               ; TASK3  PAUSE
ANL
SET @MR1900              ; Main1 HALT許可
STG @MR4504
MPS
LD= DM5010 #1            ; _AUTO動作番号
OR R46102                ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANL
SET MR11600              ; 除材部ﾜｰｸ1 吸着確認開始
CON
SET MR11608              ; 除材部ﾜｰｸ2 吸着確認開始
CON
SET MR11700              ; 除材部ﾜｰｸ3 吸着確認開始
CON
SET MR11708              ; 除材部ﾜｰｸ4 吸着確認開始
CON
SET MR11800              ; 除材部ﾜｰｸ5 吸着確認開始
CON
SET MR11808              ; 除材部ﾜｰｸ6 吸着確認開始
CON
SET MR11900              ; 除材部ﾜｰｸ7 吸着確認開始
CON
SET MR11908              ; 除材部ﾜｰｸ8 吸着確認開始
CON
SET MR12000              ; 除材部ﾜｰｸ9 吸着確認開始
CON
SET MR12008              ; 除材部ﾜｰｸ10 吸着確認開始
CON
JMP @MR4505
MPP
LD= DM5010 #4            ; _AUTO動作番号
ANB R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANL
JMP @MR4512
STG @MR4505
MPS
LD MR11601               ; 除材部ﾜｰｸ1 吸着確認-ON
AND MR11609              ; 除材部ﾜｰｸ2 吸着確認-ON
AND MR11701              ; 除材部ﾜｰｸ3 吸着確認-ON
AND MR11709              ; 除材部ﾜｰｸ4 吸着確認-ON
AND MR11801              ; 除材部ﾜｰｸ5 吸着確認-ON
AND MR11809              ; 除材部ﾜｰｸ6 吸着確認-ON
AND MR11901              ; 除材部ﾜｰｸ7 吸着確認-ON
AND MR11909              ; 除材部ﾜｰｸ8 吸着確認-ON
AND MR12001              ; 除材部ﾜｰｸ9 吸着確認-ON
AND MR12009              ; 除材部ﾜｰｸ10 吸着確認-ON
ANL
JMP @MR4510
MPP
LD MR11602               ; 除材部ﾜｰｸ1 吸着確認-OFF
OR MR11610               ; 除材部ﾜｰｸ2 吸着確認-OFF
OR MR11702               ; 除材部ﾜｰｸ3 吸着確認-OFF
OR MR11710               ; 除材部ﾜｰｸ4 吸着確認-OFF
OR MR11802               ; 除材部ﾜｰｸ5 吸着確認-OFF
OR MR11810               ; 除材部ﾜｰｸ6 吸着確認-OFF
OR MR11902               ; 除材部ﾜｰｸ7 吸着確認-OFF
OR MR11910               ; 除材部ﾜｰｸ8 吸着確認-OFF
OR MR12002               ; 除材部ﾜｰｸ9 吸着確認-OFF
OR MR12010               ; 除材部ﾜｰｸ10 吸着確認-OFF
ANB R39004               ; ｴﾗｰ中
ANL
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET R39004               ; ｴﾗｰ中
CON
DW #4000 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #39 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
@SET @MR100              ; Task3 ERROR
CON
JMP @MR4506
STG @MR4506
SET @MR1900              ; Main1 HALT許可
CON
AND @MR101               ; Task3 ERROR_End
RES @MR101               ; Task3 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
JMP @MR4507
STG @MR4507
ANB @MR102               ; Task3 ERROR Busy
AND @MR105               ; SW1
ZRES MR11600 MR12015     ; 除材部ﾜｰｸ1 吸着確認開始
CON
JMP @MR4510
STG @MR4510
MPS
AND= DM35000 #0          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
SET MR12612              ; 給材部ﾃｰﾌﾞﾙ2 破壊確認開始
CON
JMP @MR4511
MRD
AND= DM35000 #1          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
SET MR12704              ; 給材部ﾃｰﾌﾞﾙ3 破壊確認開始
CON
JMP @MR4511
MRD
AND= DM35000 #2          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
SET MR12712              ; 給材部ﾃｰﾌﾞﾙ4 破壊確認開始
CON
JMP @MR4511
MPP
AND= DM35000 #3          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
SET MR12604              ; 給材部ﾃｰﾌﾞﾙ1 破壊確認開始
CON
JMP @MR4511
STG @MR4511
MPS
LD= DM35000 #0           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND MR12613              ; 給材部ﾃｰﾌﾞﾙ2 吸着破壊OK
ANL
RES MR12613              ; 給材部ﾃｰﾌﾞﾙ2 吸着破壊OK
CON
JMP @MR4512
MRD
LD= DM35000 #1           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND MR12705              ; 給材部ﾃｰﾌﾞﾙ3 吸着破壊OK
ANL
RES MR12705              ; 給材部ﾃｰﾌﾞﾙ3 吸着破壊OK
CON
JMP @MR4512
MRD
LD= DM35000 #2           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND MR12713              ; 給材部ﾃｰﾌﾞﾙ4 吸着破壊OK
ANL
RES MR12713              ; 給材部ﾃｰﾌﾞﾙ4 吸着破壊OK
CON
JMP @MR4512
MPP
LD= DM35000 #3           ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
AND MR12605              ; 給材部ﾃｰﾌﾞﾙ1 吸着破壊OK
ANL
RES MR12605              ; 給材部ﾃｰﾌﾞﾙ1 吸着破壊OK
CON
JMP @MR4512
STG @MR4512
DW #1 DM53010            ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
CON
SET @MR4501              ; 除材動作　準備完了
CON
ENDS
;<h1/>除材開始ｻﾌﾞﾙｰﾁﾝ
STG @MR4600              ; 除材処理
JMP @MR4603
STG @MR4603
DW #1 DM11148            ; RB9 Y軸　目標ﾎﾟｲﾝﾄ番号
CON
DW #1 DM11128            ; RB8 X軸　目標ﾎﾟｲﾝﾄ番号
CON
DW #2 DM11108            ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @R005                ; RB9動作開始
CON
SET @R010                ; RB8動作開始
CON
SET @R100                ; RB4動作開始
CON
JMP @MR4604
STG @MR4604
AND @R006                ; RB9動作完了
AND @R011                ; RB8動作完了
AND @R101                ; RB4動作完了
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
RES @R006                ; RB9動作完了
CON
RES @R011                ; RB8動作完了
CON
RES @R101                ; RB4動作完了
CON
JMP @MR4606
STG @MR4606
MPS
AND= DM35010 #1          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
DW #2 DM11148            ; RB9 Y軸　目標ﾎﾟｲﾝﾄ番号
CON
JMP @MR4607
MRD
AND= DM35010 #2          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
DW #3 DM11148            ; RB9 Y軸　目標ﾎﾟｲﾝﾄ番号
CON
JMP @MR4607
MRD
AND= DM35010 #3          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
DW #4 DM11148            ; RB9 Y軸　目標ﾎﾟｲﾝﾄ番号
CON
JMP @MR4607
MRD
AND= DM35010 #4          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
DW #5 DM11148            ; RB9 Y軸　目標ﾎﾟｲﾝﾄ番号
CON
JMP @MR4607
MRD
AND= DM35010 #5          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
DW #6 DM11148            ; RB9 Y軸　目標ﾎﾟｲﾝﾄ番号
CON
JMP @MR4607
MRD
AND= DM35010 #6          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
DW #7 DM11148            ; RB9 Y軸　目標ﾎﾟｲﾝﾄ番号
CON
JMP @MR4607
MRD
AND= DM35010 #7          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
DW #8 DM11148            ; RB9 Y軸　目標ﾎﾟｲﾝﾄ番号
CON
JMP @MR4607
MRD
AND= DM35010 #8          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
DW #9 DM11148            ; RB9 Y軸　目標ﾎﾟｲﾝﾄ番号
CON
JMP @MR4607
MRD
AND= DM35010 #9          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
DW #10 DM11148           ; RB9 Y軸　目標ﾎﾟｲﾝﾄ番号
CON
JMP @MR4607
MPP
AND= DM35010 #10         ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
DW #11 DM11148           ; RB9 Y軸　目標ﾎﾟｲﾝﾄ番号
CON
JMP @MR4607
STG @MR4607
MPS
AND MR23400              ; 除材搬送_θ軸_P1
SET @R005                ; RB9動作開始
CON
JMP @MR4608
MPP
ANB MR23400              ; 除材搬送_θ軸_P1
JMP @MR4609
STG @MR4609
DW #1 DM11088            ; RB3 θ軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @R105                ; RB3動作開始
CON
JMP @MR4610
STG @MR4610
AND @R106                ; RB3動作完了
RES @R106                ; RB3動作完了
CON
JMP @MR4607
STG @MR4608
AND @R006                ; RB9動作完了
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
RES @R006                ; RB9動作完了
CON
JMP @MR4611
STG @MR4611
DW #3 DM11108            ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @R100                ; RB4動作開始
CON
JMP @MR4612
STG @MR4612
AND @R101                ; RB4動作完了
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
RES @R101                ; RB4動作完了
CON
JMP @MR4613
STG @MR4613
ZRES MR12808 MR12815     ; 除材吸着ﾊﾝﾄﾞ 吸着確認開始
CON
MPS
LD= DM5010 #1            ; _AUTO動作番号
OR R46102                ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANL
SET MR10606              ; 除材ﾊﾝﾄﾞ 吸着ON
CON
RES MR10607              ; 除材ﾊﾝﾄﾞ 吸着OFF
CON
RES MR10608              ; 除材ﾊﾝﾄﾞ 破壊ON
CON
TMR @40 #0
CON
AND @T40
JMP @MR4700
MPP
LD= DM5010 #4            ; _AUTO動作番号
ANB R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANL
TMR @41 #0
CON
AND @T41
JMP @MR4701
STG @MR4700
MPS
AND= DM35010 #1          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
RES MR11000              ; 除材側1 吸着ON
CON
RES MR11002              ; 除材側1 破壊ON
CON
TMH @30 #3
CON
AND @T30
SET MR11001              ; 除材側1 吸着OFF
CON
JMP @MR4701
MRD
AND= DM35010 #2          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
RES MR11003              ; 除材側2 吸着ON
CON
RES MR11005              ; 除材側2 破壊ON
CON
TMH @31 #3
CON
AND @T31
SET MR11004              ; 除材側2 吸着OFF
CON
JMP @MR4701
MRD
AND= DM35010 #3          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
RES MR11006              ; 除材側3 吸着ON
CON
RES MR11008              ; 除材側3 破壊ON
CON
TMH @32 #3
CON
AND @T32
SET MR11007              ; 除材側3 吸着OFF
CON
JMP @MR4701
MRD
AND= DM35010 #4          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
RES MR11009              ; 除材側4 吸着ON
CON
RES MR11011              ; 除材側4 破壊ON
CON
TMH @33 #3
CON
AND @T33
SET MR11010              ; 除材側4 吸着OFF
CON
JMP @MR4701
MRD
AND= DM35010 #5          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
RES MR11012              ; 除材側5 吸着ON
CON
RES MR11014              ; 除材側5 破壊ON
CON
TMH @34 #3
CON
AND @T34
SET MR11013              ; 除材側5 吸着OFF
CON
JMP @MR4701
MRD
AND= DM35010 #6          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
RES MR11100              ; 除材側6 吸着ON
CON
RES MR11102              ; 除材側6 破壊ON
CON
TMH @35 #3
CON
AND @T35
SET MR11101              ; 除材側6 吸着OFF
CON
JMP @MR4701
MRD
AND= DM35010 #7          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
RES MR11103              ; 除材側7 吸着ON
CON
RES MR11105              ; 除材側7 破壊ON
CON
TMH @36 #3
CON
AND @T36
SET MR11104              ; 除材側7 吸着OFF
CON
JMP @MR4701
MRD
AND= DM35010 #8          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
RES MR11106              ; 除材側8 吸着ON
CON
RES MR11108              ; 除材側8 破壊ON
CON
TMH @37 #3
CON
AND @T37
SET MR11107              ; 除材側8 吸着OFF
CON
JMP @MR4701
MRD
AND= DM35010 #9          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
RES MR11109              ; 除材側9 吸着ON
CON
RES MR11111              ; 除材側9 破壊ON
CON
TMH @38 #3
CON
AND @T38
SET MR11110              ; 除材側9 吸着OFF
CON
JMP @MR4701
MPP
AND= DM35010 #10         ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
RES MR11112              ; 除材側10 吸着ON
CON
RES MR11114              ; 除材側10 破壊ON
CON
TMH @39 #3
CON
AND @T39
SET MR11113              ; 除材側10 吸着OFF
CON
JMP @MR4701
STG @MR4701
ZRES MR11600 MR12015     ; 除材部ﾜｰｸ1 吸着確認開始
CON
DW #4 DM11108            ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @R100                ; RB4動作開始
CON
JMP @MR4702
STG @MR4702
AND @R101                ; RB4動作完了
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
RES @R101                ; RB4動作完了
CON
JMP @MR4703
STG @MR4703
MPS
LD= DM5010 #1            ; _AUTO動作番号
OR R46102                ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANL
SET MR12808              ; 除材吸着ﾊﾝﾄﾞ 吸着確認開始
CON
JMP @MR4704
MPP
LD= DM5010 #4            ; _AUTO動作番号
ANB R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
ANL
JMP @MR4800
;<h1/>2014/3/20 ﾌｨﾙﾑLotNoを除材時に書き込む
;DM35000=0の時:除材の位置は2st
;DM35000=1の時:除材の位置は3st
;DM35000=2の時:除材の位置は4st
;DM35000=3の時:除材の位置は1st
STG @MR4704
MPS
LD MR12809               ; 除材吸着ﾊﾝﾄﾞ 吸着確認-ON
ANB MR12810              ; 除材吸着ﾊﾝﾄﾞ 吸着確認-OFF
ANL
JMP @MR4800
MRD
LD MR12810               ; 除材吸着ﾊﾝﾄﾞ 吸着確認-OFF
ANB MR12809              ; 除材吸着ﾊﾝﾄﾞ 吸着確認-ON
ANL
JMP @MR4705
MRD
AND= DM35000 #0          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
BMOV EM32020 W202C #8    ; 2st ﾌｨﾙﾑLotNo  ﾌｨﾙﾑLotNo
MRD
AND= DM35000 #1          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
BMOV EM32030 W202C #8    ; 3st ﾌｨﾙﾑLotNo  ﾌｨﾙﾑLotNo
MRD
AND= DM35000 #2          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
BMOV EM32040 W202C #8    ; 4st ﾌｨﾙﾑLotNo  ﾌｨﾙﾑLotNo
MPP
AND= DM35000 #3          ; ｲﾝﾃﾞｯｸｽ位置ﾃﾞｰﾀ
BMOV EM32010 W202C #8    ; 1st ﾌｨﾙﾑLotNo  ﾌｨﾙﾑLotNo
STG @MR4705
MPS
AND= DM35010 #1          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
RES MR11001              ; 除材側1 吸着OFF
CON
RES MR11002              ; 除材側1 破壊ON
CON
TMH @70 #3
CON
AND @T70
SET MR11000              ; 除材側1 吸着ON
CON
JMP @MR4706
MRD
AND= DM35010 #2          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
RES MR11004              ; 除材側2 吸着OFF
CON
RES MR11005              ; 除材側2 破壊ON
CON
TMH @71 #3
CON
AND @T71
SET MR11003              ; 除材側2 吸着ON
CON
JMP @MR4706
MRD
AND= DM35010 #3          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
RES MR11007              ; 除材側3 吸着OFF
CON
RES MR11008              ; 除材側3 破壊ON
CON
TMH @72 #3
CON
AND @T72
SET MR11006              ; 除材側3 吸着ON
CON
JMP @MR4706
MRD
AND= DM35010 #4          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
RES MR11010              ; 除材側4 吸着OFF
CON
RES MR11011              ; 除材側4 破壊ON
CON
TMH @73 #3
CON
AND @T73
SET MR11009              ; 除材側4 吸着ON
CON
JMP @MR4706
MRD
AND= DM35010 #5          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
RES MR11013              ; 除材側5 吸着OFF
CON
RES MR11014              ; 除材側5 破壊ON
CON
TMH @74 #3
CON
AND @T74
SET MR11012              ; 除材側5 吸着ON
CON
JMP @MR4706
MRD
AND= DM35010 #6          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
RES MR11101              ; 除材側6 吸着OFF
CON
RES MR11102              ; 除材側6 破壊ON
CON
TMH @75 #3
CON
AND @T75
SET MR11100              ; 除材側6 吸着ON
CON
JMP @MR4706
MRD
AND= DM35010 #7          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
RES MR11104              ; 除材側7 吸着OFF
CON
RES MR11105              ; 除材側7 破壊ON
CON
TMH @76 #3
CON
AND @T76
SET MR11103              ; 除材側7 吸着ON
CON
JMP @MR4706
MRD
AND= DM35010 #8          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
RES MR11107              ; 除材側8 吸着OFF
CON
RES MR11108              ; 除材側8 破壊ON
CON
TMH @77 #3
CON
AND @T77
SET MR11106              ; 除材側8 吸着ON
CON
JMP @MR4706
MRD
AND= DM35010 #9          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
RES MR11110              ; 除材側9 吸着OFF
CON
RES MR11111              ; 除材側9 破壊ON
CON
TMH @78 #3
CON
AND @T78
SET MR11109              ; 除材側9 吸着ON
CON
JMP @MR4706
MPP
AND= DM35010 #10         ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
RES MR11113              ; 除材側10 吸着OFF
CON
RES MR11114              ; 除材側10 破壊ON
CON
TMH @79 #3
CON
AND @T79
SET MR11112              ; 除材側10 吸着ON
CON
JMP @MR4706
STG @MR4706
DW #3 DM11108            ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @R100                ; RB4動作開始
CON
JMP @MR4707
STG @MR4707
AND @R101                ; RB4動作完了
RES @R101                ; RB4動作完了
CON
JMP @MR4708
STG @MR4708
TMR @42 #0
CON
AND @T42
SET MR12812              ; 除材吸着ﾊﾝﾄﾞ 破壊確認開始
CON
AND MR12813              ; 除材吸着ﾊﾝﾄﾞ 吸着破壊OK
JMP @MR4709
STG @MR4709
ANB R39004               ; ｴﾗｰ中
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET R39004               ; ｴﾗｰ中
CON
DW #1709 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #46 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #7511 @DM2            ; SensorNo /ERROR_DISP
CON
@SET @MR100              ; Task3 ERROR
CON
JMP @MR4710
STG @MR4710
SET @MR1900              ; Main1 HALT許可
CON
AND @MR101               ; Task3 ERROR_End
RES @MR101               ; Task3 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
JMP @MR4711
STG @MR4711
MPS
AND @MR105               ; SW1
ZRES MR12808 MR12815     ; 除材吸着ﾊﾝﾄﾞ 吸着確認開始
CON
JMP @MR4613
MRD
AND @MR106               ; SW2
ZRES MR12808 MR12815     ; 除材吸着ﾊﾝﾄﾞ 吸着確認開始
CON
RES MR10606              ; 除材ﾊﾝﾄﾞ 吸着ON
CON
TMH @65 #3
CON
AND @T65
SET MR10607              ; 除材ﾊﾝﾄﾞ 吸着OFF
CON
SET @MR4915              ; ﾜｰｸPASS
CON
JMP @MR4911
MPP
AND @MR108               ; SW4
ZRES MR12808 MR12815     ; 除材吸着ﾊﾝﾄﾞ 吸着確認開始
CON
RES MR10606              ; 除材ﾊﾝﾄﾞ 吸着ON
CON
TMH @66 #3
CON
AND @T66
SET MR10607              ; 除材ﾊﾝﾄﾞ 吸着OFF
CON
JMP @MR4911
STG @MR4800
MPS
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
MPS
AND= DM35010 #10         ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
MPS
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
DW #1 DM11108            ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @R100                ; RB4動作開始
CON
SET @MR3500              ; 除材終了動作
CON
SET @MR3515              ; 最終除材動作中
CON
JMP @MR4801
MPP
ANB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
DW #1 DM11108            ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @R100                ; RB4動作開始
CON
JMP @MR4801
MPP
AND<> DM35010 #10        ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
DW #1 DM11108            ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @R100                ; RB4動作開始
CON
JMP @MR4801
MPP
ANB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
DW #1 DM11108            ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @R100                ; RB4動作開始
CON
JMP @MR4801
STG @MR4801
AND @R101                ; RB4動作完了
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
RES @R101                ; RB4動作完了
CON
JMP @MR4802
STG @MR4802
SET MR314                ; 除材P&P Data shift Request
CON
DW #2 DM11128            ; RB8 X軸　目標ﾎﾟｲﾝﾄ番号
CON
DW #1 DM11148            ; RB9 Y軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @R005                ; RB9動作開始
CON
SET @R010                ; RB8動作開始
CON
JMP @MR4811
STG @MR4811
AND @R011                ; RB8動作完了
AND @R006                ; RB9動作完了
TMR @43 #0
CON
AND @T43
RES @R006                ; RB9動作完了
CON
RES @R011                ; RB8動作完了
CON
JMP @MR4803
STG @MR4911
MPS
AND= DM35010 #1          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
RES MR11000              ; 除材側1 吸着ON
CON
RES MR11002              ; 除材側1 破壊ON
CON
TMH @80 #3
CON
AND @T80
SET MR11001              ; 除材側1 吸着OFF
CON
JMP @MR4912
MRD
AND= DM35010 #2          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
RES MR11003              ; 除材側2 吸着ON
CON
RES MR11005              ; 除材側2 破壊ON
CON
TMH @81 #3
CON
AND @T81
SET MR11004              ; 除材側2 吸着OFF
CON
JMP @MR4912
MRD
AND= DM35010 #3          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
RES MR11006              ; 除材側3 吸着ON
CON
RES MR11008              ; 除材側3 破壊ON
CON
TMH @82 #3
CON
AND @T82
SET MR11007              ; 除材側3 吸着OFF
CON
JMP @MR4912
MRD
AND= DM35010 #4          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
RES MR11009              ; 除材側4 吸着ON
CON
RES MR11011              ; 除材側4 破壊ON
CON
TMH @83 #3
CON
AND @T83
SET MR11010              ; 除材側4 吸着OFF
CON
JMP @MR4912
MRD
AND= DM35010 #5          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
RES MR11012              ; 除材側5 吸着ON
CON
RES MR11014              ; 除材側5 破壊ON
CON
TMH @84 #3
CON
AND @T84
SET MR11013              ; 除材側5 吸着OFF
CON
JMP @MR4912
MRD
AND= DM35010 #6          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
RES MR11100              ; 除材側6 吸着ON
CON
RES MR11102              ; 除材側6 破壊ON
CON
TMH @85 #3
CON
AND @T85
SET MR11101              ; 除材側6 吸着OFF
CON
JMP @MR4912
MRD
AND= DM35010 #7          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
RES MR11103              ; 除材側7 吸着ON
CON
RES MR11105              ; 除材側7 破壊ON
CON
TMH @86 #3
CON
AND @T86
SET MR11104              ; 除材側7 吸着OFF
CON
JMP @MR4912
MRD
AND= DM35010 #8          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
RES MR11106              ; 除材側8 吸着ON
CON
RES MR11108              ; 除材側8 破壊ON
CON
TMH @87 #3
CON
AND @T87
SET MR11107              ; 除材側8 吸着OFF
CON
JMP @MR4912
MRD
AND= DM35010 #9          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
RES MR11109              ; 除材側9 吸着ON
CON
RES MR11111              ; 除材側9 破壊ON
CON
TMH @88 #3
CON
AND @T88
SET MR11110              ; 除材側9 吸着OFF
CON
JMP @MR4912
MPP
AND= DM35010 #10         ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
RES MR11112              ; 除材側10 吸着ON
CON
RES MR11114              ; 除材側10 破壊ON
CON
TMH @89 #3
CON
AND @T89
SET MR11113              ; 除材側10 吸着OFF
CON
JMP @MR4912
STG @MR4912
DW #4 DM11108            ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @R100                ; RB4動作開始
CON
JMP @MR4913
STG @MR4913
AND @R101                ; RB4動作完了
TMR @44 #1
CON
AND @T44
DW #1 DM11148            ; RB9 Y軸　目標ﾎﾟｲﾝﾄ番号
CON
SET MR314                ; 除材P&P Data shift Request
CON
SET @R005                ; RB9動作開始
CON
RES @R101                ; RB4動作完了
CON
JMP @MR4914
STG @MR4914
AND @R006                ; RB9動作完了
MPS
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
MPS
LD= DM35010 #10          ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
AND MR514                ; 完了
ANL
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
RES MR514                ; 完了
CON
RES @R006                ; RB9動作完了
CON
SET @MR3500              ; 除材終了動作
CON
SET @MR3515              ; 最終除材動作中
CON
JMP @MR5200
MPP
LD<> DM35010 #10         ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
AND MR514                ; 完了
ANL
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
RES MR514                ; 完了
CON
RES @R006                ; RB9動作完了
CON
JMP @MR5200
MPP
LDB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
AND MR514                ; 完了
ANL
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
RES MR514                ; 完了
CON
RES @R006                ; RB9動作完了
CON
SET @MR3500              ; 除材終了動作
CON
JMP @MR5200
;ﾜｰｸﾃﾞｰﾀがﾀﾞﾐｰならばﾀﾞﾐｰ箱へ廃棄処理
;OKﾜｰｸであれば搬送動作を行う
STG @MR4803
AND MR514                ; 完了
MPS
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
MPS
LD= EM32115 #200         ; WORK DATA
OR @MR3302               ; ﾎﾟｯﾄﾀｲﾑｵｰﾊﾞｴﾗｰ出力済み
OR MR19710               ; NG排出
ANL
RES MR514                ; 完了
CON
JMP @MR5200
MPP
LD= EM32115 #100         ; WORK DATA
OR= EM32115 #0           ; WORK DATA
ANB @MR3302              ; ﾎﾟｯﾄﾀｲﾑｵｰﾊﾞｴﾗｰ出力済み
ANB MR19710              ; NG排出
ANL
RES MR514                ; 完了
CON
JMP @MR4804
MPP
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
MPS
LD= DM4110 #9            ; _Group1　ﾒﾝﾃ動作番号
OR= DM4110 #10           ; _Group1　ﾒﾝﾃ動作番号
ANL
RES MR514                ; 完了
CON
JMP @MR4804
MPP
AND= DM4110 #11          ; _Group1　ﾒﾝﾃ動作番号
RES MR514                ; 完了
CON
JMP @MR5200
STG @MR4804
RES @R011                ; RB8動作完了
CON
RES @R001                ; RB5動作完了
CON
RES @R101                ; RB4動作完了
CON
RES @R006                ; RB9動作完了
CON
MPS
ANB R41203               ; TASK3  PAUSE
JMP @MR4805
MPP
AND R41203               ; TASK3  PAUSE
SET @MR1900              ; Main1 HALT許可
STG @MR4805
DW #12 DM11148           ; RB9 Y軸　目標ﾎﾟｲﾝﾄ番号
CON
DW #3 DM11128            ; RB8 X軸　目標ﾎﾟｲﾝﾄ番号
CON
DW #2 DM11008            ; RB5 　反転軸　目標ﾎﾟｲﾝﾄ番号
CON
DW #5 DM11108            ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @R005                ; RB9動作開始
CON
SET @R010                ; RB8動作開始
CON
SET @R000                ; RB5動作開始
CON
SET @R100                ; RB4動作開始
CON
JMP @MR4806
STG @MR4806
AND @R011                ; RB8動作完了
AND @R001                ; RB5動作完了
AND @R101                ; RB4動作完了
AND @R006                ; RB9動作完了
JMP @MR4807
STG @MR4807
MPS
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
RES MR514                ; 完了
CON
RES @R011                ; RB8動作完了
CON
RES @R001                ; RB5動作完了
CON
RES @R101                ; RB4動作完了
CON
RES @R006                ; RB9動作完了
CON
JMP @MR4808
MPP
ANB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
RES MR514                ; 完了
CON
RES @R011                ; RB8動作完了
CON
RES @R001                ; RB5動作完了
CON
RES @R101                ; RB4動作完了
CON
RES @R006                ; RB9動作完了
CON
JMP @MR4808
STG @MR4808
MPS
ANB R41203               ; TASK3  PAUSE
MPS
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
MPS
ANB DM2000.0             ; ｱﾗｲﾒﾝﾄ画像 有効/無効
SET MR10400              ; 点灯/消灯制御入力(L1)
CON
SET MR9500               ; ｱﾗｲﾒﾝﾄ　画像検査開始
CON
SET MR6608               ; 画像ｱﾗｲﾒﾝﾄ ｻｲｸﾙﾀｲﾑ計測用
CON
JMP @MR4809
MPP
AND DM2000.0             ; ｱﾗｲﾒﾝﾄ画像 有効/無効
JMP @MR4810
MPP
AND R46102               ; _ﾒﾝﾃﾅﾝｽ運転中　ﾓｰﾄﾞﾌﾗｸﾞ
MPS
AND= #10 DM4110          ; _Group1　ﾒﾝﾃ動作番号
SET MR10400              ; 点灯/消灯制御入力(L1)
CON
SET MR9500               ; ｱﾗｲﾒﾝﾄ　画像検査開始
CON
SET MR6608               ; 画像ｱﾗｲﾒﾝﾄ ｻｲｸﾙﾀｲﾑ計測用
CON
JMP @MR4809
MPP
AND= #9 DM4110           ; _Group1　ﾒﾝﾃ動作番号
DW.L +0 EM2280           ; ｱﾗｲﾒﾝﾄ X軸移動量
CON
DW.L +0 EM2282           ; ｱﾗｲﾒﾝﾄ Y軸移動量
CON
DW.L +0 EM2284           ; ｱﾗｲﾒﾝﾄ θ軸移動量
CON
JMP @MR4810
MPP
AND R41203               ; TASK3  PAUSE
SET @MR1900              ; Main1 HALT許可
STG @MR4809
AND MR9501               ; 画像検査　ｱﾗｲﾒﾝﾄ移動完了
MPS
ANB MR4515               ; NG排出処理
RES MR6608               ; 画像ｱﾗｲﾒﾝﾄ ｻｲｸﾙﾀｲﾑ計測用
CON
RES MR9501               ; 画像検査　ｱﾗｲﾒﾝﾄ移動完了
CON
JMP @MR4810
MPP
AND MR4515               ; NG排出処理
RES MR6608               ; 画像ｱﾗｲﾒﾝﾄ ｻｲｸﾙﾀｲﾑ計測用
CON
RES MR9501               ; 画像検査　ｱﾗｲﾒﾝﾄ移動完了
CON
JMP @MR5100
STG @MR5100
RES MR4515               ; NG排出処理
CON
DW #1 DM11088            ; RB3 θ軸　目標ﾎﾟｲﾝﾄ番号
CON
DW #1 DM11008            ; RB5 　反転軸　目標ﾎﾟｲﾝﾄ番号
CON
DW #1 DM11108            ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @R105                ; RB3動作開始
CON
SET @R000                ; RB5動作開始
CON
SET @R100                ; RB4動作開始
CON
JMP @MR5101
STG @MR5101
AND @R001                ; RB5動作完了
AND @R101                ; RB4動作完了
AND @R106                ; RB3動作完了
RES MR10400              ; 点灯/消灯制御入力(L1)
CON
RES @R101                ; RB4動作完了
CON
RES @R001                ; RB5動作完了
CON
RES @R106                ; RB3動作完了
CON
JMP @MR5200
STG @MR4810
TMH @45 #10
CON
AND @T45
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
RES MR10400              ; 点灯/消灯制御入力(L1)
CON
JMP @MR4813
STG @MR4813
LDA.L DM7000             ; 装置基礎ﾃﾞｰﾀ1
CON
SUB.L EM2186             ; RB8 P3 目標位置（下位bit）
CON
ADD.L DM10572            ; SCON-1 現在位置（下位8bit）
CON
ADD.L DM7008             ; 装置基礎ﾃﾞｰﾀ5
CON
STA.L DM10772            ; SCON-1 目標位置（下位8bit）
CON
STA.L EM38008
CON
LDA.L DM7002             ; 装置基礎ﾃﾞｰﾀ2
CON
SUB.L EM2243             ; RB9 P12 目標位置（下位bit）
CON
ADD.L DM10580            ; SCON-2 現在位置（下位8bit）
CON
ADD.L DM7010             ; 装置基礎ﾃﾞｰﾀ6
CON
SUB.L DM7014             ; 装置基礎ﾃﾞｰﾀ8
CON
STA.L DM10780            ; SCON-2 目標位置（下位8bit）
CON
LDA DM7004               ; 装置基礎ﾃﾞｰﾀ3
CON
STA DM10776              ; SCON-1 速度
CON
LDA DM7006               ; 装置基礎ﾃﾞｰﾀ4
CON
STA DM10784              ; SCON-2 速度
CON
LDA.L DM10540            ; MSEP Axis-4 現在位置（下位8bit）
CON
ADD.L DM7012             ; 装置基礎ﾃﾞｰﾀ7
CON
STA.L DM10740            ; MSEP Axis-4 目標位置（下位8bit）
CON
LDA.L DM10540            ; MSEP Axis-4 現在位置（下位8bit）
CON
STA.L EM38308
CON
STA.L EM38308
CON
LDA DM418
CON
STA DM10744              ; MSEP Axis-4 速度
CON
DW #6 DM11108            ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
CON
DW #21 DM11128           ; RB8 X軸　目標ﾎﾟｲﾝﾄ番号
CON
DW #17 DM11148           ; RB9 Y軸　目標ﾎﾟｲﾝﾄ番号
CON
DW #19 DM11088           ; RB3 θ軸　目標ﾎﾟｲﾝﾄ番号
CON
JMP @MR4814
STG @MR4814
MPS
ANB R41203               ; TASK3  PAUSE
TMH @46 #30
CON
AND @T46
SET @R005                ; RB9動作開始
CON
SET @R105                ; RB3動作開始
CON
SET @R100                ; RB4動作開始
CON
SET @R010                ; RB8動作開始
CON
JMP @MR4815
MPP
AND R41203               ; TASK3  PAUSE
SET @MR1900              ; Main1 HALT許可
STG @MR4815
AND @R011                ; RB8動作完了
AND @R101                ; RB4動作完了
AND @R106                ; RB3動作完了
AND @R006                ; RB9動作完了
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
RES @R106                ; RB3動作完了
CON
RES @R101                ; RB4動作完了
CON
RES @R011                ; RB8動作完了
CON
RES @R006                ; RB9動作完了
CON
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
SET MR414                ; to 3cell Data shift Request
CON
JMP @MR4904              ; 次ｾﾙとのH/S
STG @MR4904              ; 次ｾﾙとのH/S
MPS
LDB R5503                ; I_ｲﾝﾀｰﾛｯｸ信号2（隣ｾﾙ2）
ORB B091                 ; ｾﾙ2へ動作開始許可
AND R41203               ; TASK3  PAUSE
ANL
SET @MR1900              ; Main1 HALT許可
MPP
ANB R41203               ; TASK3  PAUSE
MPS
ANB DM2000.15            ; 下流ﾊﾝﾄﾞｼｪｲｸ 有効/無効
SET B064
CON
AND R5503                ; I_ｲﾝﾀｰﾛｯｸ信号2（隣ｾﾙ2）
MPS
AND B091                 ; ｾﾙ2へ動作開始許可
JMP @MR4905
MRD
LDB B091                 ; ｾﾙ2へ動作開始許可
ANB DM2000.3             ; 転写後ﾜｰｸ時間管理 有効/無効
ANB @MR3304              ; ﾎﾟｯﾄﾀｲﾑｵｰﾊﾞｰｴﾗｰ継続処理済み
ANB MR19711              ; 良品処理
ANL
LDA.L DM27102
CON
SUB.L DM10914
CON
STA.L DM27120
CON
AND>.L +0 DM27120
JMP @MR5108
MPP
LD B091                  ; ｾﾙ2へ動作開始許可
AND DM2000.3             ; 転写後ﾜｰｸ時間管理 有効/無効
ANB @MR3304              ; ﾎﾟｯﾄﾀｲﾑｵｰﾊﾞｰｴﾗｰ継続処理済み
ANL
JMP @MR4905
MPP
AND DM2000.15            ; 下流ﾊﾝﾄﾞｼｪｲｸ 有効/無効
JMP @MR4905
;<h1/>2014/7 無言停止対応　時間監視
LD CR2002                ; 常時ON
MPS
LDA.D DM7018             ; 装置基礎ﾃﾞｰﾀ10
CON
MUL #10
CON
STA.D @DM18
MRD
LD @MR4904               ; 次ｾﾙとのH/S
ANB R41203               ; TASK3  PAUSE
ANB MR16111              ; 表示ｸﾘｱSW
AND<>.D @DM18 #0
ANL
TMR @59 @DM18
CON
AND @T59
OUT MR16110              ; 無言停止確認表示要求
@DW #1012 DM3008         ; _MainTP　切替ﾍﾟｰｼﾞNo
MPP
LDB MR16110              ; 無言停止確認表示要求
AND= DM3000 #1012        ; _MainTP　表示中ﾍﾟｰｼﾞNo
ANB MR16111              ; 表示ｸﾘｱSW
ANL
@DW #10 DM3008           ; _MainTP　切替ﾍﾟｰｼﾞNo
;
STG @MR5108
ANB R39004               ; ｴﾗｰ中
RES MR17600              ; TP/ｴﾗｰｺｰﾄﾞ表示
CON
SET R39004               ; ｴﾗｰ中
CON
DW #9004 @DM9            ; ReturnSW /ERROR_DISP
CON
DW #65 @DM1              ; ErrorNo /ERROR_DISP
CON
DW #0 @DM2               ; SensorNo /ERROR_DISP
CON
@SET @MR100              ; Task3 ERROR
CON
JMP @MR5109
STG @MR5109
SET @MR1900              ; Main1 HALT許可
CON
AND @MR101               ; Task3 ERROR_End
RES @MR101               ; Task3 ERROR_End
CON
RES R39004               ; ｴﾗｰ中
CON
JMP @MR5110
STG @MR5110
MPS
AND @MR105               ; SW1
DW #1 DM11148            ; RB9 Y軸　目標ﾎﾟｲﾝﾄ番号
CON
SET MR19710              ; NG排出
CON
JMP @MR5111
MPP
AND @MR108               ; SW4
SET MR19711              ; 良品処理
CON
JMP @MR4904              ; 次ｾﾙとのH/S
STG @MR5111
SET @R005                ; RB9動作開始
CON
JMP @MR5112
STG @MR5112
AND @R006                ; RB9動作完了
RES @R006                ; RB9動作完了
CON
JMP @MR5100
STG @MR4905
RES MR19711              ; 良品処理
CON
LDA.L DM10580            ; SCON-2 現在位置（下位8bit）
CON
ADD.L DM7014             ; 装置基礎ﾃﾞｰﾀ8
CON
STA.L DM10780            ; SCON-2 目標位置（下位8bit）
CON
STA.L EM38108
CON
LDA DM7006               ; 装置基礎ﾃﾞｰﾀ4
CON
STA DM10784              ; SCON-2 速度
CON
RES @MR3304              ; ﾎﾟｯﾄﾀｲﾑｵｰﾊﾞｰｴﾗｰ継続処理済み
CON
RES B064
CON
JMP @MR4900
STG @MR4900
ANB MR414                ; to 3cell Data shift Request
SET B063                 ; ｾﾙ3へ動作開始通知
CON
SET MR5603               ; O_ｲﾝﾀｰﾛｯｸ信号2
CON
ANB B091                 ; ｾﾙ2へ動作開始許可
SET @R005                ; RB9動作開始
CON
JMP @MR4901
STG @MR4901
AND @R006                ; RB9動作完了
MPS
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
RES @R006                ; RB9動作完了
CON
JMP @MR4902
MPP
ANB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
TMR @47 #1
CON
AND @T47
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
RES @R006                ; RB9動作完了
CON
JMP @MR4902
STG @MR4902
TMR @48 #1
CON
AND @T48
DW #7 DM11108            ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @R100                ; RB4動作開始
CON
JMP @MR4903
STG @MR4903
AND @R101                ; RB4動作完了
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
RES @R101                ; RB4動作完了
CON
JMP @MR4908
STG @MR4908
SET MR10608              ; 除材ﾊﾝﾄﾞ 破壊ON
CON
SET MR10607              ; 除材ﾊﾝﾄﾞ 吸着OFF
CON
RES MR10606              ; 除材ﾊﾝﾄﾞ 吸着ON
CON
JMP @MR4909
STG @MR4909
AND R7511                ; 除材部 除材ﾊﾝﾄﾞ 圧力2
TMR @49 #5
CON
AND @T49
JMP @MR4910
STG @MR4910
JMP @MR5000
STG @MR5000
DW #10 DM11108           ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @R100                ; RB4動作開始
CON
JMP @MR5001
STG @MR5001
MPS
AND @R101                ; RB4動作完了
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
RES MR10608              ; 除材ﾊﾝﾄﾞ 破壊ON
CON
RES @R101                ; RB4動作完了
CON
JMP @MR5002
MPP
TMR @50 #10
CON
AND @T50
RES MR10608              ; 除材ﾊﾝﾄﾞ 破壊ON
STG @MR5002
DW #1 DM11008            ; RB5 　反転軸　目標ﾎﾟｲﾝﾄ番号
CON
DW #1 DM11148            ; RB9 Y軸　目標ﾎﾟｲﾝﾄ番号
CON
DW #2 DM11128            ; RB8 X軸　目標ﾎﾟｲﾝﾄ番号
CON
DW #1 DM11088            ; RB3 θ軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @R105                ; RB3動作開始
CON
SET @R005                ; RB9動作開始
CON
SET @R000                ; RB5動作開始
CON
AND<=.L DM10580 +7500    ; SCON-2 現在位置（下位8bit）
SET @R010                ; RB8動作開始
CON
JMP @MR5003
STG @MR5003
AND @R006                ; RB9動作完了
AND @R106                ; RB3動作完了
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
MPS
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
MPS
ANB DM2000.13            ; ﾄﾚｻﾋﾞﾘﾃｨ 有効/無効
SET MR410                ; SDCard書き込みﾌﾗｸﾞ
CON
JMP @MR5004
MPP
AND DM2000.13            ; ﾄﾚｻﾋﾞﾘﾃｨ 有効/無効
JMP @MR5004
MPP
ANB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP @MR5004
STG @MR5004
RES @R006                ; RB9動作完了
CON
RES @R106                ; RB3動作完了
CON
RES B063                 ; ｾﾙ3へ動作開始通知
CON
RES MR5603               ; O_ｲﾝﾀｰﾛｯｸ信号2
CON
JMP @MR5005
STG @MR5005
TMR @51 #0
CON
AND @T51
MPS
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
@INC.D DM5022            ; _生産ｶｳﾝﾀ2
CON
DW #1 DM11108            ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
CON
JMP @MR5006
MPP
ANB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
DW #1 DM11108            ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
CON
JMP @MR5006
STG @MR5006
SET @R100                ; RB4動作開始
CON
JMP @MR5008
STG @MR5008
AND @R001                ; RB5動作完了
AND @R011                ; RB8動作完了
AND @R101                ; RB4動作完了
MPS
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
MPS
LDB DM2000.14            ; 上流ﾊﾝﾄﾞｼｪｲｸ 有効/無効
LD MR413                 ; SDCard書き込み完了
OR MR9914
BOR DM2000 #13           ; _動作ﾊﾟﾗﾒｰﾀ
ANL
ANL
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
RES @R001                ; RB5動作完了
CON
RES @R011                ; RB8動作完了
CON
RES @R101                ; RB4動作完了
CON
RES MR413                ; SDCard書き込み完了
CON
JMP @MR5009
MPP
AND DM2000.14            ; 上流ﾊﾝﾄﾞｼｪｲｸ 有効/無効
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
RES @R001                ; RB5動作完了
CON
RES @R011                ; RB8動作完了
CON
RES @R101                ; RB4動作完了
CON
JMP @MR5009
MPP
ANB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
RES @R001                ; RB5動作完了
CON
RES @R011                ; RB8動作完了
CON
RES @R101                ; RB4動作完了
CON
JMP @MR5009
STG @MR5009
DW #1 DM11088            ; RB3 θ軸　目標ﾎﾟｲﾝﾄ番号
CON
DW #1 DM11128            ; RB8 X軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @R105                ; RB3動作開始
CON
SET @R010                ; RB8動作開始
CON
JMP @MR5010
STG @MR5010
AND @R011                ; RB8動作完了
AND @R106                ; RB3動作完了
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
RES @R106                ; RB3動作完了
CON
RES @R011                ; RB8動作完了
CON
JMP @MR5012
STG @MR5012
AND MR508                ; ﾃﾞｰﾀ書き込み完了
RES MR508                ; ﾃﾞｰﾀ書き込み完了
CON
SET @MR4601              ; 除材処理完了
CON
ENDS
STG @MR5200
MPS
ANB R41203               ; TASK3  PAUSE
JMP @MR5201
MPP
AND R41203               ; TASK3  PAUSE
SET @MR1900              ; Main1 HALT許可
STG @MR5201
MPS
ANB @MR4915              ; ﾜｰｸPASS
DW #4 DM11128            ; RB8 X軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @R010                ; RB8動作開始
CON
AND @R011                ; RB8動作完了
DW #13 DM11148           ; RB9 Y軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @R005                ; RB9動作開始
CON
JMP @MR5202
MPP
AND @MR4915              ; ﾜｰｸPASS
JMP @MR5202
STG @MR5202
MPS
LDB @MR4915              ; ﾜｰｸPASS
AND @R006                ; RB9動作完了
ANL
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
RES @R011                ; RB8動作完了
CON
RES @R006                ; RB9動作完了
CON
JMP @MR5203
MPP
AND @MR4915              ; ﾜｰｸPASS
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
JMP @MR5210
STG @MR5203
MPS
ANB R41203               ; TASK3  PAUSE
MPS
AND= DM35010 #10         ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
DW #8 DM11108            ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @R100                ; RB4動作開始
CON
JMP @MR5204
MPP
AND<> DM35010 #10        ; 除材部　除材ﾎﾟｼﾞｼｮﾝ
DW #8 DM11108            ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @R100                ; RB4動作開始
CON
JMP @MR5204
MPP
AND R41203               ; TASK3  PAUSE
SET @MR1900              ; Main1 HALT許可
STG @MR5204
AND @R101                ; RB4動作完了
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
RES @R101                ; RB4動作完了
CON
JMP @MR5206
STG @MR5206
MPS
ANB R41203               ; TASK3  PAUSE
RES MR10606              ; 除材ﾊﾝﾄﾞ 吸着ON
CON
SET MR10607              ; 除材ﾊﾝﾄﾞ 吸着OFF
CON
RES MR10608              ; 除材ﾊﾝﾄﾞ 破壊ON
CON
DW #21 DM11148           ; RB9 Y軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @R005                ; RB9動作開始
CON
JMP @MR5207
MPP
AND R41203               ; TASK3  PAUSE
SET @MR1900              ; Main1 HALT許可
STG @MR5207
AND @R006                ; RB9動作完了
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
RES @R006                ; RB9動作完了
CON
JMP @MR5209
STG @MR5209
MPS
ANB R41203               ; TASK3  PAUSE
RES MR10606              ; 除材ﾊﾝﾄﾞ 吸着ON
CON
SET MR10607              ; 除材ﾊﾝﾄﾞ 吸着OFF
CON
RES MR10608              ; 除材ﾊﾝﾄﾞ 破壊ON
CON
DW #1 DM11148            ; RB9 Y軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @R005                ; RB9動作開始
CON
JMP @MR5210
MPP
AND R41203               ; TASK3  PAUSE
SET @MR1900              ; Main1 HALT許可
STG @MR5210
MPS
LDB @MR4915              ; ﾜｰｸPASS
AND @R006                ; RB9動作完了
ANL
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
MPS
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
@INC.D DM5024            ; _生産ｶｳﾝﾀ3
CON
RES @R006                ; RB9動作完了
CON
JMP @MR5212
MPP
ANB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
RES @R006                ; RB9動作完了
CON
JMP @MR5212
MPP
AND @MR4915              ; ﾜｰｸPASS
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
MPS
AND R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
@INC.D DM5024            ; _生産ｶｳﾝﾀ3
CON
JMP @MR5212
MPP
ANB R46100               ; _自動運転中　ﾓｰﾄﾞﾌﾗｸﾞ
JMP @MR5212
STG @MR5212
MPS
ANB R41203               ; TASK3  PAUSE
RES MR10606              ; 除材ﾊﾝﾄﾞ 吸着ON
CON
SET MR10607              ; 除材ﾊﾝﾄﾞ 吸着OFF
CON
RES MR10608              ; 除材ﾊﾝﾄﾞ 破壊ON
CON
DW #2 DM11128            ; RB8 X軸　目標ﾎﾟｲﾝﾄ番号
CON
DW #1 DM11108            ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @R010                ; RB8動作開始
CON
SET @R100                ; RB4動作開始
CON
JMP @MR5213
MPP
AND R41203               ; TASK3  PAUSE
SET @MR1900              ; Main1 HALT許可
STG @MR5213
AND @R011                ; RB8動作完了
AND @R101                ; RB4動作完了
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
RES @R011                ; RB8動作完了
CON
RES @R101                ; RB4動作完了
CON
JMP @MR5215
STG @MR5215
MPS
ANB R41203               ; TASK3  PAUSE
DW #1 DM11128            ; RB8 X軸　目標ﾎﾟｲﾝﾄ番号
CON
SET @R010                ; RB8動作開始
CON
JMP @MR5307
MPP
AND R41203               ; TASK3  PAUSE
SET @MR1900              ; Main1 HALT許可
STG @MR5307
AND @R011                ; RB8動作完了
SET R47600               ; _Group1　動作区切り開始
CON
AND R47608               ; _Group1　動作区切り完了
RES @R011                ; RB8動作完了
CON
JMP @MR5309
STG @MR5309
RES @MR4915              ; ﾜｰｸPASS
CON
SET @MR4601              ; 除材処理完了
CON
ENDS
;<h1/>RB5動作ｻﾌﾞﾙｰﾁﾝ
STG @R000                ; RB5動作開始
ANB @R002                ; RB5動作中
ANB MR18013              ; RB5:ｱﾗｰﾑ出力
SET @R002                ; RB5動作中
CON
JMP @R003
STG @R003
TMH @10 #5
CON
AND @T10
SET MR18005              ; RB5:反転軸　MOVE
CON
JMP @R004
STG @R004
AND= DM11008 DM11004     ; RB5 　反転軸　目標ﾎﾟｲﾝﾄ番号  RB5 現在ﾎﾟｼﾞｼｮﾝ番号
ANB MR18205              ; RB6:MOVE
TMH @11 #0
CON
AND @T11
RES @R002                ; RB5動作中
CON
SET @R001                ; RB5動作完了
CON
ENDS
;<h1/>RB9動作ｻﾌﾞﾙｰﾁﾝ
STG @R005                ; RB9動作開始
ANB @R007                ; RB9動作中
ANB MR19413              ; RB9:ｱﾗｰﾑ出力
SET @R007                ; RB9動作中
CON
JMP @R008
STG @R008
TMH @12 #5
CON
AND @T12
SET MR19405              ; RB9:Y軸　MOVE
CON
JMP @R009
STG @R009
AND= DM11148 DM11144     ; RB9 Y軸　目標ﾎﾟｲﾝﾄ番号  RB9 現在ﾎﾟｼﾞｼｮﾝ番号
ANB MR19405              ; RB9:Y軸　MOVE
TMH @13 #0
CON
AND @T13
RES @R007                ; RB9動作中
CON
SET @R006                ; RB9動作完了
CON
ENDS
;<h1/>RB8動作ｻﾌﾞﾙｰﾁﾝ
STG @R010                ; RB8動作開始
ANB @R012                ; RB8動作中
ANB MR19213              ; RB8:ｱﾗｰﾑ出力
SET @R012                ; RB8動作中
CON
JMP @R013
STG @R013
TMH @14 #5
CON
AND @T14
SET MR19205              ; RB8:X軸　MOVE
CON
JMP @R014
STG @R014
AND= DM11128 DM11124     ; RB8 X軸　目標ﾎﾟｲﾝﾄ番号  RB8 現在ﾎﾟｼﾞｼｮﾝ番号
ANB MR19205              ; RB8:X軸　MOVE
TMH @15 #0
CON
AND @T15
RES @R012                ; RB8動作中
CON
SET @R011                ; RB8動作完了
CON
ENDS
;<h1/>RB4動作ｻﾌﾞﾙｰﾁﾝ
STG @R100                ; RB4動作開始
ANB @R102                ; RB4動作中
ANB MR19013              ; RB4:ｱﾗｰﾑ出力
SET @R102                ; RB4動作中
CON
JMP @R103
STG @R103
TMH @16 #5
CON
AND @T16
SET MR19005              ; RB4:Z軸  MOVE
CON
JMP @R104
STG @R104
AND= DM11108 DM11104     ; RB4 Z軸　目標ﾎﾟｲﾝﾄ番号  RB4 現在ﾎﾟｼﾞｼｮﾝ番号
ANB MR19005              ; RB4:Z軸  MOVE
TMH @17 #0
CON
AND @T17
RES @R102                ; RB4動作中
CON
SET @R101                ; RB4動作完了
CON
ENDS
;<h1/>RB3動作ｻﾌﾞﾙｰﾁﾝ
STG @R105                ; RB3動作開始
ANB @R107                ; RB3動作中
ANB MR18813              ; RB3:ｱﾗｰﾑ出力
SET @R107                ; RB3動作中
CON
JMP @R108
STG @R108
TMH @18 #5
CON
AND @T18
SET MR18805              ; RB3:θ軸　MOVE
CON
JMP @R109
STG @R109
AND= DM11088 DM11084     ; RB3 θ軸　目標ﾎﾟｲﾝﾄ番号  RB3 現在ﾎﾟｼﾞｼｮﾝ番号
ANB MR18805              ; RB3:θ軸　MOVE
TMH @19 #0
CON
AND @T19
RES @R107                ; RB3動作中
CON
SET @R106                ; RB3動作完了
CON
ENDS
;<h1/>HALT
LD R41203                ; TASK3  PAUSE
AND @MR1900              ; Main1 HALT許可
ANB @R107                ; RB3動作中
ANB @R102                ; RB4動作中
ANB @R002                ; RB5動作中
ANB @R012                ; RB8動作中
ANB @R007                ; RB9動作中
TMR @190 #2
CON
AND @T190
SET R42603               ; _Grp1_Task3_ﾎﾟｰｽﾞ許可
LDB R41203               ; TASK3  PAUSE
RES @MR1900              ; Main1 HALT許可
CON
RES R42603               ; _Grp1_Task3_ﾎﾟｰｽﾞ許可
;
END
ENDH
